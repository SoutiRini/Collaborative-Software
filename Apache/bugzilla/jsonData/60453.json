[{"count": 0, "tags": [], "creator": "liu_xp2003@sina.com", "attachment_id": null, "is_private": false, "id": 195396, "time": "2016-12-08T03:39:07Z", "bug_id": 60453, "creation_time": "2016-12-08T03:39:07Z", "text": "In JMeter org.apache.jmeter.reports.SummariserRunningSample\nthe max and min using res.getTime() to get one sampler elapsedTime.\nBut in statistical running mode, SampleResut.elapsedTime recorded multiple sampler's  elapsed time.\n\nThus, in summary log, the min response time is bigger than Avg response time and Max time is also not correct.\n\nCurrent Result in summering log:\nStarting remote engines\nStarting the test @ Thu Dec 08 11:20:17 CST 2016 (1481167217382)\nRemote engines have been started\nWaiting for possible Shutdown/StopTestNow/Heapdump message on port 4445\nsummary + 374320 in 00:00:11 = 34417.1/s Avg:     6 Min:    47 Max:  2270 Err:\n   0 (0.0000%) Active: 400 Started: 300 Finished: 0\nsummary + 1715500 in 00:00:30 = 57185.2/s Avg:     6 Min:   635 Max:  3679 Err:\n    0 (0.0000%) Active: 400 Started: 300 Finished: 0\nsummary = 2089820 in 00:00:41 = 51124.6/s Avg:     6 Min:    47 Max:  3679 Err:\n    0 (0.0000%)\nsummary + 1723400 in 00:00:30 = 57446.7/s Avg:     6 Min:   637 Max:  3692 Err:\n    0 (0.0000%) Active: 400 Started: 300 Finished: 0\nsummary = 3813220 in 00:01:11 = 53799.8/s Avg:     6 Min:    47 Max:  3692 Err:\n    0 (0.0000%)\nsummary + 1725100 in 00:00:30 = 57507.2/s Avg:     6 Min:   629 Max:  3677 Err:\n    0 (0.0000%) Active: 400 Started: 300 Finished: 0\nsummary = 5538320 in 00:01:41 = 54901.7/s Avg:     6 Min:    47 Max:  3692 Err:\n    0 (0.0000%)\n...\n\n\nI fixed in org.apache.jmeter.reports.SummariserRunningSample\nLine123:         long aTimeInMillis = res.getTime();\nchanged to\nlong aTimeInMillis = res.getEndTime() - res.getStartTime() - res.getIdleTime();"}, {"count": 1, "tags": [], "bug_id": 60453, "is_private": false, "text": "Oops!\nMy change couldn't fix this issue.", "id": 195397, "time": "2016-12-08T06:06:16Z", "creator": "liu_xp2003@sina.com", "creation_time": "2016-12-08T06:06:16Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Created attachment 34514\nsrc/core/org/apache/jmeter/samplers/SampleResult.java", "attachment_id": 34514, "bug_id": 60453, "id": 195437, "time": "2016-12-11T00:38:07Z", "creator": "liu_xp2003@sina.com", "creation_time": "2016-12-11T00:38:07Z", "is_private": false}, {"count": 3, "tags": [], "creator": "liu_xp2003@sina.com", "attachment_id": 34515, "id": 195438, "time": "2016-12-11T00:45:09Z", "bug_id": 60453, "creation_time": "2016-12-11T00:45:09Z", "is_private": false, "text": "Created attachment 34515\nsrc/core/org/apache/jmeter/samplers/StatisticalSampleResult.java"}, {"count": 4, "tags": [], "creator": "liu_xp2003@sina.com", "attachment_id": 34516, "is_private": false, "id": 195439, "time": "2016-12-11T00:46:00Z", "bug_id": 60453, "creation_time": "2016-12-11T00:46:00Z", "text": "Created attachment 34516\nsrc/core/org/apache/jmeter/reporters/SummariserRunningSample.java"}, {"count": 5, "tags": [], "text": "To fixed this issue, I updated code in three files. Attached snapshot.\nMaybe, it is not best solution and increased a little CPU usage, but it could get correct result as following.\n\n\nStarting remote engines\nStarting the test @ Sun Dec 11 00:55:42 CST 2016 (1481388942822)\nsummary +      1 in 00:00:00 =   38.5/s Avg:     2 Min:     2 Max:     2 Err:     0 (0.0000%) Active: 2 Started: 1 Finished: 0\nRemote engines have been started\nWaiting for possible Shutdown/StopTestNow/Heapdump message on port 4445\nsummary + 881519 in 00:00:06 = 148403.9/s Avg:     2 Min:     0 Max:    27 Err:     0 (0.0000%) Active: 700 Started: 634 Finished: 0\nsummary = 881520 in 00:00:06 = 146189.1/s Avg:     2 Min:     0 Max:    27 Err:     0 (0.0000%)\nsummary + 2667000 in 00:00:10 = 266726.7/s Avg:     2 Min:     0 Max:  3002 Err:     0 (0.0000%) Active: 700 Started: 634 Finished: 0\nsummary = 3548520 in 00:00:16 = 221381.2/s Avg:     2 Min:     0 Max:  3002 Err:     0 (0.0000%)\nsummary + 2674500 in 00:00:10 = 267423.3/s Avg:     2 Min:     0 Max:   211 Err:     0 (0.0000%) Active: 700 Started: 634 Finished: 0\nsummary = 6223020 in 00:00:26 = 239061.9/s Avg:     2 Min:     0 Max:  3002 Err:     0 (0.0000%)\nsummary + 2651500 in 00:00:10 = 265176.5/s Avg:     2 Min:     0 Max:  3002 Err:     0 (0.0000%) Active: 700 Started: 634 Finished: 0\nsummary = 8874520 in 00:00:36 = 246309.2/s Avg:     2 Min:     0 Max:  3002 Err:     0 (0.0000%)\nsummary + 2636000 in 00:00:10 = 263573.6/s Avg:     2 Min:     0 Max:   207 Err:     0 (0.0000%) Active: 700 Started: 634 Finished: 0\nsummary = 11510520 in 00:00:46 = 250060.2/s Avg:     2 Min:     0 Max:  3002 Err:     0 (0.0000%)\n...", "attachment_id": null, "bug_id": 60453, "id": 195440, "time": "2016-12-11T00:47:11Z", "creator": "liu_xp2003@sina.com", "creation_time": "2016-12-11T00:47:11Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 60453, "is_private": false, "text": "Hello,\nThanks for the analysis and patch , but could you provide a Text based patch instead of screenshots of code ?\nThank you", "id": 195482, "time": "2016-12-13T20:48:20Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-12-13T20:48:20Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "liu_xp2003@sina.com", "text": "Created attachment 34553\nFixed patch based on JMeter head commit on github site.\n\nUploaded patch.", "id": 195651, "time": "2016-12-24T15:41:23Z", "bug_id": 60453, "creation_time": "2016-12-24T15:41:23Z", "is_private": false, "attachment_id": 34553}, {"count": 8, "tags": [], "creator": "liu_xp2003@sina.com", "text": "Uploaded patch and changed bug status.", "id": 195652, "time": "2016-12-24T15:42:16Z", "bug_id": 60453, "creation_time": "2016-12-24T15:42:16Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 195734, "time": "2016-12-30T21:24:17Z", "bug_id": 60453, "creation_time": "2016-12-30T21:24:17Z", "is_private": false, "text": "Thanks for patch, unfortunately I don't think it can be integrated this way:\n- minTime and maxTime should not be in SampleResult if only used for StatisticalSampleResult\n- In SummariserRunningSample, getSampleCount() can be higher than 1 (see PublisherSampler and SubscriberSampler) without being related to StatisticalSampleResult, in this case the change in SummariserRunningSample would not be correct\n\nI'll be happy to integrate a fixed version of the patch.\nI've linked this bug to Bug 43484 as I think it is related and the issue there might also interest you.\n\nRegards"}, {"count": 10, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 195735, "time": "2016-12-30T21:25:44Z", "bug_id": 60453, "creation_time": "2016-12-30T21:25:44Z", "is_private": false, "text": "Marking as duplicate of Bug 43484.\nAny patch should be submitted in the 43484 one.\n\n*** This bug has been marked as a duplicate of bug 43484 ***"}]