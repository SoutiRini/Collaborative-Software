[{"count": 0, "tags": [], "bug_id": 7980, "attachment_id": null, "is_private": false, "id": 13274, "time": "2002-04-11T19:28:26Z", "creator": "rmilliken@smartops.com", "creation_time": "2002-04-11T19:28:26Z", "text": "Consider the following buildfile snippet:\n\n<junit>\n    <batchtest todir=\"${project.build.test.reports}\" fork=\"no\">\n        <formatter type=\"plain\" usefile=\"yes\" />\n        <fileset dir=\"${project.build.classes}\">\n            <include name=\"**/Test*\" />\n        </fileset>\n    </batchtest>\n</junit>\n\nThis buildfile snippet runs all classes which begin with \"Test\" (in our \nproject, all such classes inherit from JUnit's \"TestCase\" class) in JUnit.\n\nSome of our \"public void test*()\" methods in these classes spawn Threads; some \nof these spawned Threads print output to System.out.  This output actually goes \nto console, and not to the <formatter>'s destination as the documentation \nstates: \"Output will always be sent to a file unless you set the usefile \nattribute to false\".\n\nThis also occurs in the 1.5 alpha (nightly) build on 04-11-02."}, {"count": 1, "tags": [], "bug_id": 7980, "attachment_id": null, "id": 13298, "time": "2002-04-12T01:06:17Z", "creator": "conor@apache.org", "creation_time": "2002-04-12T01:06:17Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 5377 ***"}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "Actually this is not really a duplicate of bug 5377.\n\n5377 was concerned with output in the fork=\"true\" case, which work now - with\nor without spawned threads.\n\nThis one is a lot more difficult to tackle (to be honest, I don't know how).\nWhat we have here is that a test case spawns a thread in Ant's VM.  \n\nAnt's output handling system doesn't know about the new thread and therefore\nwill not pass the output to the junit task but send it to the logging system\ndirectly.  As the <junit> task doesn'r receive the output, it cannot\nsuppress/swallow it.\n\nIf we simply pass all output to junit (by replacing System.out directly),\njunit will receive the output of different tasks when running inside <parallel>\nas well and label it as test case output.  Bad.\n", "id": 13777, "time": "2002-04-16T15:31:27Z", "bug_id": 7980, "creation_time": "2002-04-16T15:31:27Z", "is_private": false}, {"count": 3, "tags": [], "text": "Fixed by using ThreadGroups to track threads back to the owning task. Any chance\nyou can retry with the code from CVS or the next nightly build?", "is_private": false, "bug_id": 7980, "id": 30998, "time": "2003-02-10T12:56:26Z", "creator": "conor@apache.org", "creation_time": "2003-02-10T12:56:26Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "rmilliken@smartops.com", "attachment_id": null, "id": 31003, "time": "2003-02-10T14:07:41Z", "bug_id": 7980, "creation_time": "2003-02-10T14:07:41Z", "is_private": false, "text": "I will try to try this from a nightly build, though I may not get to it until \nthis coming weekend (2/15-16/03)."}]