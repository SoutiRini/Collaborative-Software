[{"count": 0, "tags": [], "bug_id": 49809, "attachment_id": null, "is_private": false, "id": 139373, "time": "2010-08-23T09:29:32Z", "creator": "covener@gmail.com", "creation_time": "2010-08-23T09:29:32Z", "text": "DirectoryMatch treats $ as literal instead of an anchor for EOL. This dates back to the initial DirectoryMatch support in 1.3.   \n\nThis is highly unexpected and somewhat limiting, whereas an escaped $ works fine and is natural in PCRE.\n\nI intend to remove this behavior in trunk and document it in all releases (when $ is EOL, getting the trailing slash right is not so intuitive wrt e.g. DirectorySlash)"}, {"count": 1, "tags": [], "bug_id": 49809, "is_private": false, "id": 139378, "creation_time": "2010-08-23T10:33:53Z", "time": "2010-08-23T10:33:53Z", "creator": "public@macfreek.nl", "text": "Here is a short httpd.conf to reproduce this bug/feature:\n\nAlias /test/ /var/www/test/\n\n<Directory \"/var/www/test/projects\">\n    Options Indexes\n    Order deny,allow\n    Deny from all\n</Directory>\n\n<Directory ~ \"/var/www/test/projects/$\">\n    Allow from all\n</Directory>\n\n\nExpected results:\n- requesting http://localhost/test/projects would give an autoindex\n- requesting http://localhost/test/projects/subdir would give a 403\nForbidden\n\nActual results:\n- requesting http://localhost/test/projects gives a 403 Forbidden\n- requesting http://localhost/test/projects/subdir gives a 403 Forbidden", "attachment_id": null}, {"count": 2, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 139379, "time": "2010-08-23T11:28:08Z", "bug_id": 49809, "creation_time": "2010-08-23T11:28:08Z", "is_private": false, "text": "I may actually understand this now. The operative part of the documentation is this \"and sub-directories\" part:\n\n<DirectoryMatch> and </DirectoryMatch> are used to enclose a group of directives which will apply only to the named directory and sub-directories of that directory, the same as <Directory>. However, it takes as an argument a regular expression. For example:\n\nWhich is why the $ cannot be matched, since we tell PCRE the string we pass in is not really a string with an end-of-line in it. This is a side of efffect of expecting it to match sub-directories as well.\n\nStill seems sensless, as with a reasonable default behavior one can just include subdirectories with the regex itself."}, {"count": 3, "tags": [], "bug_id": 49809, "is_private": false, "id": 139547, "creation_time": "2010-08-29T16:46:40Z", "time": "2010-08-29T16:46:40Z", "creator": "covener@gmail.com", "text": "fixed in trunk in r990091, documented in 2.2.x", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 49809, "attachment_id": null, "id": 160835, "time": "2012-07-23T13:43:58Z", "creator": "smartgig@gigfa.com", "creation_time": "2012-07-23T13:43:58Z", "is_private": false, "text": "I've tested the bug in apache 2.2.22 and it has not been fixed.\n\nHere is my config file :\n\n======================================================\n<FilesMatch \".(php)$\">\ndeny from all\n</FilesMatch>\n\n<Directory ~ \"^/home/domain/public_html/en$\">\n<Files \"index.php\">\nallow from all\n</Files>\n</Directory>\n======================================================\n\nExpected result :\nhttp://domain.com/en/index.php -> 200 OK\nhttp://domain.com/en/includes/index.php -> 403 Forbidden\nhttp://domain.com/en/hacked-shell/index.php -> 403 Forbidden\n\nActual result :\nhttp://domain.com/en/index.php -> 403 Forbidden\nhttp://domain.com/en/includes/index.php -> 403 Forbidden\nhttp://domain.com/en/hacked-shell/index.php -> 403 Forbidden"}, {"count": 5, "tags": [], "bug_id": 49809, "attachment_id": null, "id": 160836, "creation_time": "2012-07-23T13:46:53Z", "time": "2012-07-23T13:46:53Z", "creator": "covener@gmail.com", "text": "This is how it has behaved for years, will not change in 2.2 and earlier as it would/could break working config.  Resolved in 2.4", "is_private": false}]