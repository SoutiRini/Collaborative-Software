[{"count": 0, "tags": [], "bug_id": 28779, "attachment_id": null, "id": 56858, "time": "2004-05-05T12:36:13Z", "creator": "magnus@pitch.se", "creation_time": "2004-05-05T12:36:13Z", "is_private": false, "text": "My java-application uses some XML-files as resources. I use ANT to create the \njar file but the resource is null when I access it from within my application.\n\nSample code:\n\nInputStream is = getClass().getResourceAsStream( \"myFile.xml\" );\n\nThe above call to getResourceAsStream() returns null.\n\nThe referred java class-file lies in the same dir as the xml-file in the jar. \nWhen I use JBuilder to build the jar file, the code works fine.\n\nI have tried to turn compress on and off."}, {"count": 1, "attachment_id": null, "creator": "jan@materne.de", "is_private": false, "id": 56859, "time": "2004-05-05T12:39:57Z", "bug_id": 28779, "creation_time": "2004-05-05T12:39:57Z", "tags": [], "text": "Does the Ant generated jar file contain the xml file?"}, {"count": 2, "tags": [], "creator": "magnus@pitch.se", "attachment_id": null, "text": "> Does the Ant generated jar file contain the xml file?\n\nYes it does. It is located in the jar structure in the same dir as the class-\nfile that is referenced by the getClass() method call.\n", "id": 56860, "time": "2004-05-05T12:45:07Z", "bug_id": 28779, "creation_time": "2004-05-05T12:45:07Z", "is_private": false}, {"count": 3, "tags": [], "text": "The code also works when I manually build the jar file using jar.exe \n(j2sdk1.4.2_03).", "is_private": false, "id": 56929, "creator": "magnus@pitch.se", "time": "2004-05-06T13:57:49Z", "bug_id": 28779, "creation_time": "2004-05-06T13:57:49Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 28779, "text": "please reopen if the problem still exists in more recent versions of Ant, I think\nthis has been fixed a while ago, but don't find the report to mark this one as a\nduplicate.", "id": 72396, "time": "2005-03-14T16:49:17Z", "creator": "bodewig@apache.org", "creation_time": "2005-03-14T16:49:17Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "jan@materne.de", "attachment_id": null, "text": "Current status is \"NEW\" and not \"REOPENED\", so I think Stefan has forgotten to\nclose the bug in 2005.\n\nAnd I did a retest which works for me:\n\nbuild.xml\n----------------------------------------\n<project>\n  <javac srcdir=\".\" destdir=\".\"/>\n  <jar destfile=\"test.jar\" excludes=\"*.jar\" basedir=\".\"/>\n  <java classname=\"MyClass\" classpath=\"test.jar\"/>\n</project>\n\n\nmyFile.xml\n----------------------------------------\n<myfile/>\n\n\nMyClass.java\n----------------------------------------\npublic class MyClass {\n    public static void main(String[] args) {\n        MyClass cl = new MyClass();\n        cl.run();\n    }\n    \n    public void run() {\n        java.io.InputStream is = getClass().getResourceAsStream( \"myFile.xml\" );\n        System.out.println(\"is=\"+is);\n        System.out.println(\"Content:\");\n        try {\n            int ch = is.read();\n            while (ch!=-1) {\n                System.out.print( (char)ch );\n                ch = is.read();\n            }\n            is.close();\n        } catch (java.io.IOException ioe) {\n        }\n        System.out.println();\n    }\n}\n\n\n\nApache Ant version 1.7alpha compiled on July 7 2006\n\nBuildfile: build.xml\n    [javac] Compiling 1 source file to C:\\tmp\\ant-28779-jar+resources\n      [jar] Building jar: C:\\tmp\\ant-28779-jar+resources\\test.jar\n     [java] is=java.util.zip.ZipFile$2@765a16\n     [java] Content:\n     [java] <myfile/>\n\nBUILD SUCCESSFUL", "id": 91041, "time": "2006-07-10T06:30:29Z", "bug_id": 28779, "creation_time": "2006-07-10T06:30:29Z", "is_private": false}]