[{"count": 0, "tags": [], "bug_id": 5561, "is_private": false, "text": "I detected an error on package name mangling. Reserved works were not mangled \nif they were not the last part of the JSP path.\n\nThe problem was in this snippet of code in \norg.apache.tomcat.util.JavaGeneratorTool.manglePackage(String):\n\n...\nif ((s.length() > endIdx + 1) && s.charAt(endIdx + 1) != '/')\n{\n  index = s.indexOf(keywords[i], index + 3);\n  continue;\n}\n...\n\nThere is an error in there since endIdx is already at the character immediately \nafter the reserved work. The \"+1\" moves the index one character further, which \nis the first letter in the JSP's next directory.\n\nRemoving the +1 corrected the problem:\n\n...\nif ((s.length() > endIdx) && s.charAt(endIdx) != '/')\n{\n  index = s.indexOf(keywords[i], index + 3);\n  continue;\n}\n...\n\nThks\n\nPD I put this in servlet. Sorry if it dooes not belong there.\nPD I don't know if the severity is OK. For us it is a MAJOR since our site \nuses \"public\" in one directory, and there are lots of dirs under it, making \nTC3.3 unusable with this bug.", "id": 9132, "time": "2001-12-21T10:56:43Z", "creator": "cesarbv@hotmail.com", "creation_time": "2001-12-21T10:56:43Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "Larry.Isaacs@sas.com", "is_private": false, "id": 9133, "time": "2001-12-21T11:03:45Z", "bug_id": 5561, "creation_time": "2001-12-21T11:03:45Z", "tags": [], "text": "The patch you suggest has already been applied and appears in the current\nTomcat 3.3.1 nightly.\n\n*** This bug has been marked as a duplicate of 5365 ***"}]