[{"count": 0, "tags": [], "bug_id": 54001, "is_private": false, "text": "Created attachment 29473\npatch against svn tree\n\ninclude/apr_general.h use\n#if defined(CRAY) || (defined(__arm) && !defined(LINUX))\n#ifdef __STDC__\n#define APR_OFFSET(p_type,field) _Offsetof(p_type,field)\n#else\n#ifdef CRAY2\n#define APR_OFFSET(p_type,field) \\\n        (sizeof(int)*((unsigned int)&(((p_type)NULL)->field)))\n\n#else /* !CRAY2 */\n\n#define APR_OFFSET(p_type,field) ((unsigned int)&(((p_type)NULL)->field))\n\n#endif /* !CRAY2 */\n#endif /* __STDC__ */\n#else /* ! (CRAY || __arm) */\n\napr_hints.m4 has\n    *-linux*)\n        case `uname -r` in\n\t    2.* )  APR_ADDTO(CPPFLAGS, [-DLINUX=2])\n\t           ;;\n\t    1.* )  APR_ADDTO(CPPFLAGS, [-DLINUX=1])\n\t           ;;\n\t    * )\n\t           ;;\n        esac\n\nSo when `uname -r` start with 3 on arm, LINUX is not defined\n\nI would suggest this change as the value assigned to LINUX value is never used\n\nIndex: build/apr_hints.m4\n===================================================================\n--- build/apr_hints.m4\t(r\u00c3\u00a9vision 1397958)\n+++ build/apr_hints.m4\t(copie de travail)\n@@ -119,15 +119,7 @@\n \tAPR_ADDTO(CPPFLAGS, [-DHPUX -D_REENTRANT])\n \t;;\n     *-linux*)\n-        case `uname -r` in\n-\t    2.* )  APR_ADDTO(CPPFLAGS, [-DLINUX=2])\n-\t           ;;\n-\t    1.* )  APR_ADDTO(CPPFLAGS, [-DLINUX=1])\n-\t           ;;\n-\t    * )\n-\t           ;;\n-        esac\n-\tAPR_ADDTO(CPPFLAGS, [-D_REENTRANT -D_GNU_SOURCE])\n+\tAPR_ADDTO(CPPFLAGS, [-DLINUX -D_REENTRANT -D_GNU_SOURCE])\n \t;;\n     *-lynx-lynxos)\n \tAPR_ADDTO(CPPFLAGS, [-D__NO_INCLUDE_WARN__ -DLYNXOS])", "id": 162735, "time": "2012-10-14T08:36:55Z", "creator": "g.esp@free.fr", "creation_time": "2012-10-14T08:36:55Z", "attachment_id": 29473}, {"count": 1, "tags": [], "creator": "sf@sfritsch.de", "text": "Committed, thanks.\n\ntrunk: r1400200\n1.5: r1400203\n1.4: r1400205", "id": 162827, "time": "2012-10-19T18:16:26Z", "bug_id": 54001, "creation_time": "2012-10-19T18:16:26Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "fixed in 1.4.7 and later releases", "is_private": false, "bug_id": 54001, "id": 172595, "time": "2014-01-21T12:59:28Z", "creator": "trawick@apache.org", "creation_time": "2014-01-21T12:59:28Z", "attachment_id": null}]