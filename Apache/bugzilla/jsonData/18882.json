[{"count": 0, "tags": [], "creator": "sarcher@us.ibm.com", "attachment_id": null, "id": 34835, "time": "2003-04-09T21:32:58Z", "bug_id": 18882, "creation_time": "2003-04-09T21:32:58Z", "is_private": false, "text": "The <zip> task seems to refuse to include the file .cvsignore in a zip file.  \nGiven the following files and directory structure:\n\n  build.xml\n  src/\n    hello.txt\n    .cvsignore\n    .classpath\n\nWhere build.xml contains the following Ant script:\n\n  <?xml version=\"1.0\"?>\n  <project name=\"TestCase\" default=\"build\" basedir=\".\">\n    <target name=\"build\">\n      <delete file=\"src.zip\"/>\n      <zip zipfile=\"src.zip\" basedir=\"src\"/>\n    </target>\n  </project>\n\n\nRunning Ant yeilds the following:\n\n  C:\\ant\\simon>ant\n  Buildfile: build.xml\n\n  build:\n        [zip] Building zip: C:\\ant\\simon\\src.zip\n\n  BUILD SUCCESSFUL\n  Total time: 1 second\n\n\nUnfortunately the generated src.zip file DOES NOT CONTAIN the file .cvsignore.  \nBoth hello.txt and .classpath are included."}, {"count": 1, "tags": [], "creator": "sarcher@us.ibm.com", "text": "Created attachment 5752\nZip file generated by Ant script", "id": 34836, "time": "2003-04-09T21:34:33Z", "bug_id": 18882, "creation_time": "2003-04-09T21:34:33Z", "is_private": false, "attachment_id": 5752}, {"count": 2, "tags": [], "creator": "sarcher@us.ibm.com", "attachment_id": 5753, "id": 34837, "time": "2003-04-09T21:36:33Z", "bug_id": 18882, "creation_time": "2003-04-09T21:36:33Z", "is_private": false, "text": "Created attachment 5753\nZip file generated by Ant script."}, {"count": 3, "attachment_id": null, "bug_id": 18882, "text": "FileSet (and ZipFileSet) by extension, has default Excludes which contains \na .cvsignore pattern. Please see the documentation of FileSet for the attribute \nthat allows to not use these default excludes. --DD", "id": 34839, "time": "2003-04-09T21:50:35Z", "creator": "ddevienne@lgc.com", "creation_time": "2003-04-09T21:50:35Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "sarcher@us.ibm.com", "attachment_id": null, "id": 34866, "time": "2003-04-10T14:22:23Z", "bug_id": 18882, "creation_time": "2003-04-10T14:22:23Z", "is_private": false, "text": "Thanks for the feedback.  Well, I tried using the defaultexcludes attribute on \nthe <zip> task and it simply did not help.  For example, the following Ant \nscript still excludes the .cvignore file and other files excluded by default:\n\n  <?xml version=\"1.0\"?>\n  <project name=\"TestCase\" default=\"build\" basedir=\".\">\n    <target name=\"build\">\n      <delete file=\"src.zip\"/>\n      <zip\n        zipfile=\"src.zip\"\n        basedir=\"src\"\n        defaultexcludes=\"no\"/>\n    </target>\n  </project>\n\n\nFrom reading the doc for the <zip> task I can only guess that this is a bug.  \nSo the next thing I tried was a nested Fileset:\n\n  <?xml version=\"1.0\"?>\n  <project name=\"TestCase\" default=\"build\" basedir=\".\">\n    <target name=\"build\">\n      <delete file=\"src.zip\"/>\n      <zip zipfile=\"src.zip\">\n        <fileset dir=\"src\" defaultexcludes=\"no\"/>\n      </zip>\n    </target>\n  </project>\n\nNote that I'm using the defaultexcludes attribute on <fileset>.  This works \nfine.\n"}, {"count": 5, "tags": [], "creator": "bodewig@apache.org", "text": "Yes, defaultexclude at the task level doesn't work in Ant 1.5.x, see bug 18637.", "id": 34874, "time": "2003-04-10T15:58:27Z", "bug_id": 18882, "creation_time": "2003-04-10T15:58:27Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "sarcher@us.ibm.com", "attachment_id": null, "id": 34877, "time": "2003-04-10T16:04:29Z", "bug_id": 18882, "creation_time": "2003-04-10T16:04:29Z", "is_private": false, "text": "Thank you Stefan, I appreciate your help."}]