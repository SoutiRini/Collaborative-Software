[{"count": 0, "tags": [], "text": "Hi,\n\nhere is a real hidden feature of ant which I like quite well :). Consider the\nfollowing  build file:\n\nbuild.xml:\n\n<?xml version=\"1.0\" encoding=\"iso-8859-1\" ?>\n<project name=\"test\" default=\"test-id\">\n\t<target name=\"test-id\" id=\"case1\" if=\"property\">\n\t\t<echo>Property is set.</echo>\n\t</target>\n\t<target name=\"test-id\" id=\"case2\" unless=\"property\">\n\t\t<echo>Property is not set.</echo>\n\t</target>\n</project>\n\nThis fails (as expected):\n\nC:\\workspace\\Utilitiy Project>ant\nBuildfile: build.xml\n\nBUILD FAILED\nC:\\workspace\\Utilitiy Project\\build.xml:6: Duplicate target 'test-id'\n\nTotal time: 0 seconds\n\nBut consider the following use of an import Statement:\n\nbuild.xml:\n<?xml version=\"1.0\" encoding=\"iso-8859-1\" ?>\n<project name=\"test\" default=\"test-id\">\n\t<import file=\"test.xml\" />\n</project>\n\ntest.xml:\n<?xml version=\"1.0\" encoding=\"iso-8859-1\" ?>\n<project default=\"test-id\">\n\t<target name=\"test-id\" id=\"case1\" if=\"property\">\n\t\t<echo>Property is set.</echo>\n\t</target>\n\t<target name=\"test-id\" id=\"case2\" unless=\"property\">\n\t\t<echo>Property is not set.</echo>\n\t</target>\n</project>\n\nThis should fail as well? Surprise! It works. Output of ant:\n\nC:\\workspace\\Utilitiy Project>ant\nBuildfile: build.xml\n\ntest-id:\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds\n\nI do not know whether this behavior should be considered as a bug - I like it.\nCould the differentiation of targets by ID instead of names be implemented. It\nwould save the use of a dummy target which depends on the two or more case-tags.\n\nRegards,\nJens", "attachment_id": null, "bug_id": 34566, "id": 73953, "time": "2005-04-22T11:06:00Z", "creator": "jens.hausherr@unilog.de", "creation_time": "2005-04-22T11:06:00Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 34566, "attachment_id": null, "id": 73954, "time": "2005-04-22T11:17:23Z", "creator": "peterreilly@apache.org", "creation_time": "2005-04-22T11:17:23Z", "is_private": false, "text": "This is *not* a feature!, it is a bug!\n"}, {"count": 2, "tags": [], "bug_id": 34566, "attachment_id": null, "text": "Seems like one way to catch this bug would be to implement bug 28444.", "id": 73988, "time": "2005-04-22T16:30:40Z", "creator": "mbenson@apache.org", "creation_time": "2005-04-22T16:30:40Z", "is_private": false}, {"count": 3, "tags": [], "text": "> Jens,\nthe reason it is a bug is that only the first target will be\nused, the second target will be ignored. (or given a name test-test-id in\nthis case).\n> Matt,\nthe 28444 bug is different, it does involve the same few lines\nof code, but a fix for 28444 will not help this case - also\nfixing 28444 will involve a small change in behaviour and so\nwill be fixed in an ant 1.7 time frame.\n\nI have fixed this bug by adding a map of targets in the current\nsource to the ant context and hopefully it does not have bugs!\nas I placed it in the 1.6 branch for inclusion in ant 1.6.3.", "is_private": false, "id": 74081, "creator": "peterreilly@apache.org", "time": "2005-04-25T12:22:22Z", "bug_id": 34566, "creation_time": "2005-04-25T12:22:22Z", "attachment_id": null}]