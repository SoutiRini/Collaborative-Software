[{"count": 0, "tags": [], "bug_id": 49987, "attachment_id": null, "text": "r998053\nhttp://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk/java/org/apache/catalina/core/ApplicationContext.java\n\nData race on variable \nprivate Map parameters\n\nIn method\n\n    private void mergeParameters() {\n\n        if (parameters != null)  // concurrent read : 881\n            return;\n        Map results = new ConcurrentHashMap();\n        ...\n        parameters = results; // concurrent write : 897\n\n    }", "id": 140104, "time": "2010-09-23T10:16:06Z", "creator": "sergeyvorobyev@google.com", "creation_time": "2010-09-23T10:16:06Z", "is_private": false}, {"count": 1, "tags": [], "creator": "timw@apache.org", "attachment_id": null, "id": 140317, "time": "2010-09-30T03:45:45Z", "bug_id": 49987, "creation_time": "2010-09-30T03:45:45Z", "is_private": false, "text": "The best way to fix this is probably to do the merge in the startup lifecycle (probably near the end of StandardContext.startInternal) and set the parameters into the ApplicationContext.\n(ApplicationContext is constructed and used before local application parameters are added in the lifecycle)"}, {"count": 2, "tags": [], "bug_id": 49987, "attachment_id": null, "text": "Fixed in trunk and will be included in 7.0.4 onwards.\n\nProposed for 6.0.x", "id": 140572, "time": "2010-10-07T17:56:06Z", "creator": "markt@apache.org", "creation_time": "2010-10-07T17:56:06Z", "is_private": false}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 140721, "time": "2010-10-13T10:42:37Z", "bug_id": 49987, "creation_time": "2010-10-13T10:42:37Z", "text": "Fixed in 6.0.x and will be included in 6.0.30 onwards."}]