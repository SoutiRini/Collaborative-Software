[{"count": 0, "tags": [], "bug_id": 54218, "text": "Code:\n<?\nif(!empty($_POST)) {\n  header(\"Content-Type: text/plain\");\n  echo file_get_contents('php://input');\n  echo \"\\n=========================================================\\n\";\n  var_dump($_POST); exit;\n}\n?>\nThis duplicates:\n<form method=\"post\" target=\"_blank\">\n    <input type=\"text\" name=\"menu\" value=\"Blah\" />\n    <input type=\"submit\" />\n</form>\n<p>This doesn't:</p>\n<form method=\"post\" target=\"_blank\">\n    <input type=\"text\" name=\"menu\" value=\"Blah\" />\n    <input type=\"text\" name=\"second\" value=\"Second value\" />\n    <input type=\"submit\" />\n</form>\n\nOutput (first button):\nmenu=Blahmenu=Blah\n=========================================================\narray(1) {\n  [\"menu\"]=>\n  string(13) \"Blahmenu=Blah\"\n}\nOutput (second button):\nmenu=Blah&second=Second+valuemenu=Blah&second=Second+value\n=========================================================\narray(2) {\n  [\"menu\"]=>\n  string(4) \"Blah\"\n  [\"second\"]=>\n  string(12) \"Second value\"\n}\n\n# Some system information #\nadmin@summit:$uname -a\nLinux summit 2.6.26-2-686-bigmem #1 SMP Sun Mar 4 23:05:22 UTC 2012 i686 GNU/Linux\nadmin@summit:$/usr/sbin/apache2 -v\nServer version: Apache/2.2.16 (Debian)\nServer built:   Sep  9 2012 21:17:33\nadmin@summit:$ /usr/bin/php5 -v\nPHP 5.4.9-1~dotdeb.0 (cli) (built: Nov 26 2012 04:24:47)\nCopyright (c) 1997-2012 The PHP Group\nZend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies", "id": 163696, "time": "2012-11-28T12:53:56Z", "creator": "sarciszewski@knights.ucf.edu", "creation_time": "2012-11-28T12:53:56Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "closing -- there's nothing alleged to be wrong with Apache here.  Modules like PHP read and interpret the post body.", "is_private": false, "id": 163698, "creator": "covener@gmail.com", "time": "2012-11-28T16:51:31Z", "bug_id": 54218, "creation_time": "2012-11-28T16:51:31Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "(In reply to comment #1)\n> closing -- there's nothing alleged to be wrong with Apache here.  Modules\n> like PHP read and interpret the post body.\nThe line here indicates that PHP is being passed wrong values by the webserver:\n  echo file_get_contents('php://input');", "is_private": false, "id": 163699, "creator": "sarciszewski@knights.ucf.edu", "time": "2012-11-28T16:56:49Z", "bug_id": 54218, "creation_time": "2012-11-28T16:56:49Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "sarciszewski@knights.ucf.edu", "text": "(In reply to comment #1)\n> closing -- there's nothing alleged to be wrong with Apache here.  Modules\n> like PHP read and interpret the post body.\nThe line here indicates that PHP is being passed wrong values by the webserver:\n  echo file_get_contents('php://input');", "id": 163700, "time": "2012-11-28T16:59:36Z", "bug_id": 54218, "creation_time": "2012-11-28T16:59:36Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 54218, "attachment_id": null, "text": "What did the client put on the wire?\nWhat did PHP see?\nWhat does a non-PHP CGI think the body was?", "id": 163701, "time": "2012-11-28T17:02:06Z", "creator": "covener@gmail.com", "creation_time": "2012-11-28T17:02:06Z", "is_private": false}, {"count": 5, "tags": [], "creator": "sarciszewski@knights.ucf.edu", "attachment_id": null, "id": 163702, "time": "2012-11-28T17:19:19Z", "bug_id": 54218, "creation_time": "2012-11-28T17:19:19Z", "is_private": false, "text": "(In reply to comment #4)\n> What did the client put on the wire?\n> What did PHP see?\nHttpRequester says:\n\nPOST https://[domain]/test.php\nContent-Type: application/x-www-form-urlencoded\nmenu=Blah\n\n -- response --\n200 OK\nDate:  Wed, 28 Nov 2012 17:09:35 GMT\nServer:  Apache\nAccept-Ranges:  bytes\nX-Powered-By:  PHP/5.4.9-1~dotdeb.0\nStrict-Transport-Security:  max-age=15768000\nKeep-Alive:  timeout=15, max=100\nConnection:  Keep-Alive\nTransfer-Encoding:  chunked\nContent-Type:  text/plain\nmenu=Blahmenu=Blah\n=========================================================\narray(1) {\n  [\"menu\"]=>\n  string(13) \"Blahmenu=Blah\"\n}\n> What does a non-PHP CGI think the body was?\ntest.pl\n  #!/usr/bin/perl\n  use strict;\n  use CGI ':standard';\n  # written by steve andrews 20060222, 20071107\n  # modified for this bug report\n  \n  print \"Content-Type: text/html\\n\\n\";\n  print \"<html>\\n<head>\\n<title>Your Answers</title>\\n\";\n  print \"<style type='text/css'>\\n  th {background-color: coral; }\\n</style>\";\n  print \"</head>\\n<body>\\n\";\n  print \"<table style='border: thin solid black;' \";\n  print \"border='1' >\\n\";\n  print \"<tr>\\n<th>Field:</th><th>Value:</th>\\n</tr>\";\n  foreach my $name ( param() ) \n    {\n      my @values = param ($name);\n      print \"<tr>\\n\";\n      print \"<td>$name</td><td>@values</td>\\n\";\n      print \"</tr>\\n\";\n    }\n  print \"</table>\\n</body>\\n</html>\\n\";\n\nOutput:\nField:\tValue:\nmenu\tBlah\n\nSo is this a PHP 5.4 bug?"}, {"count": 6, "tags": [], "bug_id": 54218, "attachment_id": null, "id": 163703, "time": "2012-11-28T17:28:14Z", "creator": "covener@gmail.com", "creation_time": "2012-11-28T17:28:14Z", "is_private": false, "text": "Appears that way on the surface since the perl CGI didn't see any corruption."}, {"count": 7, "tags": [], "bug_id": 54218, "text": "(In reply to comment #6)\n> Appears that way on the surface since the perl CGI didn't see any corruption.\nAlright. I've filed a PHP bug report then. https://bugs.php.net/bug.php?id=63637\n\nThanks for your time.", "id": 163704, "time": "2012-11-28T17:29:44Z", "creator": "sarciszewski@knights.ucf.edu", "creation_time": "2012-11-28T17:29:44Z", "is_private": false, "attachment_id": null}]