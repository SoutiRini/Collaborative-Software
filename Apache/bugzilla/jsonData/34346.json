[{"count": 0, "tags": [], "text": "Hello,\n\nI have noticed that since the move from 5.5.7 to 5.5.8 when I remove a \ndeployed webapp via the Tomcat Manager the actual folder (under Tomcat5.5\n\\webapps) does not get deleted.\n\nDid not try to use 5.5.9, but in the changelog I did not spot anything \npointing in this direction ...\n\nmany thanks,\nandrea", "attachment_id": null, "id": 73384, "creator": "Andrea.Barbieri@movingimageresearch.com", "time": "2005-04-07T14:59:08Z", "bug_id": 34346, "creation_time": "2005-04-07T14:59:08Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 34346, "attachment_id": null, "id": 73385, "time": "2005-04-07T15:06:06Z", "creator": "remm@apache.org", "creation_time": "2005-04-07T15:06:06Z", "is_private": false, "text": "This works well for me, and others. Please explain how to reproduce the problem."}, {"count": 2, "tags": [], "bug_id": 34346, "text": "I install a simple webapp via Tomcat Manager.\nWebapp starts correctly.\nExercise the Webapp a little.\nUsing Tomcat Manager to undeploy the webapp.\nThe .war file (mder Tomcat5.5\\webapps) is deleted.\nThe webapp folder on the other hand does not get removed at all (not any of \nits content).\n\nI am using Java JRE 1.5.0_01.\n\nWith Tomcat 5.5.7 following the same steps resulted in a full undeployment of \nthe webapp.", "id": 73388, "time": "2005-04-07T15:18:11Z", "creator": "Andrea.Barbieri@movingimageresearch.com", "creation_time": "2005-04-07T15:18:11Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "\"Did not try to use 5.5.9, but in the changelog I did not spot anything \npointing in this direction ...\"\n\nSpot harder.\n\nWhat you describe works for me, and your subsequent comment does not explain\nanything. Since you are not willing to make the effort of properly explaining\nyour issue (configuration, META-INF/context.xml, etc), I am wasting my time ->\nINVALID.", "id": 73390, "time": "2005-04-07T15:34:55Z", "bug_id": 34346, "creation_time": "2005-04-07T15:34:55Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 34346, "attachment_id": 14639, "id": 73395, "time": "2005-04-07T16:22:56Z", "creator": "Andrea.Barbieri@movingimageresearch.com", "creation_time": "2005-04-07T16:22:56Z", "is_private": false, "text": "Created attachment 14639\nWEB-INF/web.xml"}, {"count": 5, "attachment_id": 14640, "creator": "Andrea.Barbieri@movingimageresearch.com", "text": "Created attachment 14640\nMETA-INF/context.xml", "id": 73396, "time": "2005-04-07T16:26:47Z", "bug_id": 34346, "creation_time": "2005-04-07T16:26:47Z", "tags": [], "is_private": false}, {"count": 6, "text": "Could you please spend some of your invaluable time and infinite wisdom to \nactually explain where in the ChangeLog the 'spot harder' action would have \nborn successful fruits?\n\nThis will not just help myself but all others who will read this bug report in \nthe future on the ASF Bugzilla website.\n\nI see of some interest:\nTomcat 5.5.9\n+ General\n  - Add host manager webapp (remm)\n  -> not this, correct?\n\n+ Catalina\n  - Remove some instances of expanded folder removal (remm)\n  -> no bug to look up\n  -> i.e. 'fewer' instances of 'expanded folder removal'\n  -> not my case, that would have been Added some instances ...\n\n  - 34006: If antiResourceLocking was used, HostConfig considered the path as \nexternal, and web application resources were not correctly removed or tacked; \nalso simplify the code a lot (remm)\n  -> did not use it (5.5.7 did undeploy things correctly without using this \nattribute)\n  -> will now experiment with 5.5.9, antiResourceLocking, and antiJARLocking\n\n\nQuoting:\n\"Since you are not willing to make the effort of properly explaining\nyour issue (configuration, META-INF/context.xml, etc), I am wasting my time\"\n\nIn my humble opinion the description of what I have encountered as an issue \nseems to be 'properly' explained in english language.\nI have provided the steps which in my case always reproduce the issue.\nI have now also provided as attachments (if useful) the WEB-INF/web.xml and \nMETA-INF/context.xml if they would help in shedding more light on the \ndescribed issue.\n\nWhat more would you have liked to be provided in order to be more helpful?\nThe war file itself?\nThe directory structure when unfolded?\nI wish I could read minds, that way I will have provided you with all the \ninformation you required.\n", "creator": "Andrea.Barbieri@movingimageresearch.com", "attachment_id": null, "id": 73399, "time": "2005-04-07T17:09:26Z", "bug_id": 34346, "creation_time": "2005-04-07T17:09:26Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "Apparently, submitting configuration as part of a bug report is something which\ndefies logic.\n\nBTW, since you're on Windows, and not using antiResourceLocking or\nantiJARLocking, there's no way 5.5.7 could undeploy anything, except in very\nspecific cases (again, I have to make guesses).\n\nNo server.xml or test WAR, of course. At least you are consistent ;)", "id": 73402, "time": "2005-04-07T17:16:17Z", "bug_id": 34346, "creation_time": "2005-04-07T17:16:17Z", "is_private": false}, {"count": 8, "tags": [], "text": "From your META-INF/context.xml:\n<Context path=\"/mmserver\" docBase=\"mmserver\" debug=\"0\" reloadable=\"false\"\ncrossContext=\"false\" override=\"false\">\n   <Logger className=\"org.apache.catalina.logger.SystemOutLogger\"\nprefix=\"localhost_mmserver_log.\" suffix=\".txt\" timestamp=\"true\" />\n</Context>\n\n- Logger element does not exist anymore\n- never use either \"path\", \"docBase\", \"debug\" on your Context element", "attachment_id": null, "id": 73404, "creator": "remm@apache.org", "time": "2005-04-07T17:19:12Z", "bug_id": 34346, "creation_time": "2005-04-07T17:19:12Z", "is_private": false}, {"count": 9, "tags": [], "creator": "Andrea.Barbieri@movingimageresearch.com", "attachment_id": null, "text": "Thanks for the useful info for context.xml.\n\nServer.xml is untouched, same one as per default Tomcat 5.5.8 installation.\n\nDid not provide test war file because did not have any real time to spend on \nencapsulating the problem. It was sufficient to be aware of the issue and \nmanually deleting the webapp folder after undeployment.\n\nTomcat 5.5.7 did for real undeploy fully the webapp, so it must have been one \nof the very special cases for which it worked....\n\nSwitched to Tomcat 5.5.9, applied the suggested changes to context.xml plus \nadding the antiJARLocking=\"true\" and antiResourceLocking=\"true\" attributes.\nNow the webapp fully undeploys itself when using the Tomcat Manager undeploy \naction (as it did in the past).\n\nCase closed I suspect since Tomcat 5.5.8 is probably consigned to history by \nnow.", "id": 73406, "time": "2005-04-07T18:28:50Z", "bug_id": 34346, "creation_time": "2005-04-07T18:28:50Z", "is_private": false}, {"count": 10, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "Depending on what your webapp is doing, you may be able to live with\nantiJARLocking only. If your webapp is extra careful about all the URL it\nhandles (it's fairly rare, however), you don't need anything.", "id": 73407, "time": "2005-04-07T18:36:30Z", "bug_id": 34346, "creation_time": "2005-04-07T18:36:30Z", "is_private": false}]