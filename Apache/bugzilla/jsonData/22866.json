[{"count": 0, "tags": [], "creator": "kosh.podder@ubs.com", "text": "In my current testing of a Tomcat 4.1.27 build (Redhat Linux 2.4.9, JVM\n1.3.1_09) for our development teams, I am seeing that any webapp containing\nStruts 1.1 is throwing an exception when the struts.jar is scanned, leading to a\nJVM crash - the traces are shown below. Therefore, if Tomcat is built against\nStruts 1.1, the admin webapp crashes, as do the example Struts webapps. This\ndoes not happen with Struts 1.0.2.\n\nYour help is greatly appreciated since we have rather a lot of apps dependent on\nStruts and we would like to migrate to both Struts 1.1 and Tomcat 4 sooner\nrather than later :-) This is the only real serious issue stopping me from\nprogressing further now!\n\nMany thanks,\n\nKosh\n\ncatalina.out\n-------------\n\nStarting service Tomcat-Standalone\nApache Tomcat/4.1\n\nAn unexpected exception has been detected in native code outside the VM.\nUnexpected Signal : 7 occurred at PC=0x4058c7bb\nFunction name=(N/A)\nLibrary=/home/podderko/3ps/jdk/1.3.1_09-linux/jre/lib/i386/libzip.so\n\nNOTE: We are unable to locate the function name symbol for the error\n      just occurred. Please refer to release documentation for possible\n      reason and solutions.\n\n\n\nCurrent Java thread:\n        at java.util.zip.ZipFile.getNextEntry(Native Method)\n        at java.util.zip.ZipFile.access$400(ZipFile.java:24)\n        at java.util.zip.ZipFile$2.nextElement(ZipFile.java:296)\n        at java.util.jar.JarFile$1.nextElement(JarFile.java:193)\n        at org.apache.catalina.startup.ContextConfig.tldScanJar(ContextConfig.ja\nva:909)\n        at org.apache.catalina.startup.ContextConfig.tldScan(ContextConfig.java:\n868)\n        at org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:64\n7)\n        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfi\ng.java:243)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl\neSupport.java:166)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3\n568)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase\n.java:821)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:80\n7)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:579)\n        at org.apache.catalina.core.StandardHostDeployer.addChild(StandardHostDe\nployer.java:700)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.apache.commons.beanutils.MethodUtils.invokeMethod(MethodUtils.jav\na:252)\n        at org.apache.commons.digester.SetNextRule.end(SetNextRule.java:256)\n        at org.apache.commons.digester.Rule.end(Rule.java:276)\n        at org.apache.commons.digester.Digester.endElement(Digester.java:1058)\n        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source\n)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(\nUnknown Source)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContent\nDispatcher.dispatch(Unknown Source)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Un\nknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.commons.digester.Digester.parse(Digester.java:1567)\n        at org.apache.catalina.core.StandardHostDeployer.install(StandardHostDep\nloyer.java:385)\n        at org.apache.catalina.core.StandardHost.install(StandardHost.java:803)\n        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.j\nava:442)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:399\n)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:718)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java\n:358)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl\neSupport.java:166)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1196)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:738)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1188)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:347\n)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:4\n97)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:219\n0)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:512)\n        at org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n        at org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\n\nDynamic libraries:\n08048000-0804c000 r-xp 00000000 00:a7 377319     /home/podderko/3ps/jdk/1.3.1_09\n-linux/bin/i386/native_threads/java\n0804c000-0804d000 rw-p 00003000 00:a7 377319     /home/podderko/3ps/jdk/1.3.1_09\n-linux/bin/i386/native_threads/java\n40000000-40015000 r-xp 00000000 08:06 69448      /lib/ld-2.2.4.so\n40015000-40016000 rw-p 00014000 08:06 69448      /lib/ld-2.2.4.so\n40017000-40018000 r--p 00000000 08:02 131106     /usr/lib/locale/en_US/LC_IDENTI\nFICATION\n40018000-40019000 r--p 00000000 08:02 99510      /usr/lib/locale/en_US/LC_MEASUR\nEMENT\n40019000-4001a000 r--p 00000000 08:02 213165     /usr/lib/locale/en_US/LC_TELEPH\nONE\n4001a000-4001b000 r--p 00000000 08:02 215454     /usr/lib/locale/en_US/LC_ADDRES\nS\n4001b000-4001c000 r--p 00000000 08:02 215453     /usr/lib/locale/en_US/LC_NAME\n4001c000-4002b000 r-xp 00000000 08:06 69406      /lib/libpthread-0.9.so\n4002b000-4002f000 rw-p 0000e000 08:06 69406      /lib/libpthread-0.9.so\n4004f000-40058000 r-xp 00000000 00:a7 362721     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/native_threads/libhpi.so\n40058000-40059000 rw-p 00008000 00:a7 362721     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/native_threads/libhpi.so\n4005a000-40261000 r-xp 00000000 00:a7 362729     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/client/libjvm.so\n40261000-40376000 rw-p 00206000 00:a7 362729     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/client/libjvm.so\n4038d000-4038f000 r-xp 00000000 08:06 69374      /lib/libdl-2.2.4.so\n4038f000-40391000 rw-p 00001000 08:06 69374      /lib/libdl-2.2.4.so\n40391000-404bd000 r-xp 00000000 08:06 69370      /lib/libc-2.2.4.so\n404bd000-404c3000 rw-p 0012b000 08:06 69370      /lib/libc-2.2.4.so\n404c7000-404da000 r-xp 00000000 08:06 69379      /lib/libnsl-2.2.4.so\n404da000-404dc000 rw-p 00012000 08:06 69379      /lib/libnsl-2.2.4.so\n404de000-404ff000 r-xp 00000000 08:06 69376      /lib/libm-2.2.4.so\n404ff000-40500000 rw-p 00020000 08:06 69376      /lib/libm-2.2.4.so\n40500000-40534000 r-xp 00000000 08:02 66241      /usr/lib/libstdc++-2-libc6.1-1-\n2.9.0.so\n40534000-40540000 rw-p 00033000 08:02 66241      /usr/lib/libstdc++-2-libc6.1-1-\n2.9.0.so\n40543000-40555000 r-xp 00000000 00:a7 362732     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/libverify.so\n40555000-40556000 rw-p 00011000 00:a7 362732     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/libverify.so\n40556000-40577000 r-xp 00000000 00:a7 362733     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/libjava.so\n40577000-40579000 rw-p 00020000 00:a7 362733     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/libjava.so\n4057b000-40590000 r-xp 00000000 00:a7 362734     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/libzip.so\n40590000-40592000 rw-p 00014000 00:a7 362734     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/libzip.so\n40592000-412cf000 r--s 00000000 00:a7 377182     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/rt.jar\n412fc000-41611000 r--s 00000000 00:a7 377183     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i18n.jar\n41611000-41627000 r--s 00000000 00:a7 366324     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/sunrsasign.jar\n436cf000-436d0000 r--p 00000000 08:02 131349     /usr/lib/locale/en_US/LC_PAPER\n4972f000-49730000 r--p 00000000 08:02 114922     /usr/lib/locale/en_US/LC_MESSAG\nES/SYS_LC_MESSAGES\n49730000-49731000 r--p 00000000 08:02 98408      /usr/lib/locale/en_US/LC_MONETA\nRY\n49731000-49737000 r--p 00000000 08:02 49365      /usr/lib/locale/en_US/LC_COLLAT\nE\n49737000-49738000 r--p 00000000 08:02 132123     /usr/lib/locale/en_US/LC_TIME\n49738000-49739000 r--p 00000000 08:02 196823     /usr/lib/locale/en_US/LC_NUMERI\nC\n49739000-49764000 r--p 00000000 08:02 196840     /usr/lib/locale/en_US/LC_CTYPE\n497d0000-49c51000 r--s 00000000 00:a7 377249     /home/podderko/3ps/jdk/1.3.1_09\n-linux/lib/tools.jar\n49c51000-49c54000 r--s 00000000 00:0e 394841     /sbcimp/run/tp/sun/jsse/1.0.3_0\n1/lib/jcert.jar\n49c54000-49c56000 r--s 00000000 00:0e 394842     /sbcimp/run/tp/sun/jsse/1.0.3_0\n1/lib/jnet.jar\n49c56000-49cd4000 r--s 00000000 00:0e 394843     /sbcimp/run/tp/sun/jsse/1.0.3_0\n1/lib/jsse.jar\n49cd4000-49cdb000 r--s 00000000 00:a7 469772     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/bin/bootstrap.jar\n49cdb000-49cde000 r--s 00000000 00:a7 469776     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/bin/commons-daemon.jar\n49cde000-49cfd000 r--s 00000000 00:a7 469792     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/endorsed/xmlParserAPIs.jar\n49cfd000-49d00000 r--s 00000000 00:a7 469795     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/jta.jar\n49e00000-49ee3000 r--s 00000000 00:a7 469791     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/endorsed/xercesImpl.jar\n49ee3000-49eed000 r--s 00000000 00:a7 469793     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/naming-resources.jar\n49eed000-49efb000 r--s 00000000 00:a7 469794     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/activation.jar\n49efb000-49f03000 r--s 00000000 00:a7 469796     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/naming-common.jar\n49f03000-49f05000 r--s 00000000 00:a7 469797     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/jdbc2_0-stdext.jar\n49f05000-49f15000 r--s 00000000 00:a7 469798     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/commons-dbcp.jar\n\n\n49f15000-49f19000 r--s 00000000 00:a7 469799     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/naming-factory.jar\n49f19000-49f44000 r--s 00000000 00:a7 469800     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/commons-collections.jar\n49f44000-49f4c000 r--s 00000000 00:a7 469801     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/commons-pool.jar\n49f4c000-49f52000 r--s 00000000 00:a7 469802     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/commons-logging-api.jar\n49f52000-49f66000 r--s 00000000 00:a7 469803     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/servlet.jar\n49f66000-49f93000 r--s 00000000 00:a7 469804     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/jasper-compiler.jar\n49f93000-49fa5000 r--s 00000000 00:a7 469805     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/jasper-runtime.jar\n49fa5000-4a054000 r--s 00000000 00:a7 469806     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/ant.jar\n4a054000-4a099000 r--s 00000000 00:a7 469807     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/common/lib/mail.jar\n4a099000-4a09f000 r--s 00000000 00:a7 469814     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/tomcat-warp.jar\n4a09f000-4a0b3000 r--s 00000000 00:a7 469815     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/tomcat-jk2.jar\n4a0b3000-4a0db000 r--s 00000000 00:a7 469820     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/tomcat-util.jar\n4a0db000-4a0e3000 r--s 00000000 00:a7 469817     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/commons-logging.jar\n4a0e3000-4a0f3000 r--s 00000000 00:a7 469828     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/tomcat-coyote.jar\n4a0f3000-4a0f9000 r--s 00000000 00:a7 469816     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/servlets-webdav.jar\n4a0f9000-4a0fe000 r--s 00000000 00:a7 469822     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/servlets-manager.jar\n4a0fe000-4a100000 r--s 00000000 00:a7 469824     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/servlets-common.jar\n4a200000-4a208000 r--s 00000000 00:a7 469818     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/jakarta-regexp-1.2.jar\n4a208000-4a212000 r--s 00000000 00:a7 469821     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/tomcat-http11.jar\n4a212000-4a218000 r--s 00000000 00:a7 469823     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/commons-fileupload-1.0.jar\n4a218000-4a21c000 r--s 00000000 00:a7 469825     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/catalina-ant.jar\n4a21c000-4a276000 r--s 00000000 00:a7 469826     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/jmxri.jar\n4a276000-4a278000 r--s 00000000 00:a7 469827     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/servlets-invoker.jar\n4a278000-4a295000 r--s 00000000 00:a7 469829     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/commons-beanutils.jar\n4a295000-4a34f000 r--s 00000000 00:a7 469830     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/catalina.jar\n4a34f000-4a35f000 r--s 00000000 00:a7 469832     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/tomcat-jk.jar\n4a35f000-4a364000 r--s 00000000 00:a7 469833     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/servlets-default.jar\n4a364000-4a37f000 r--s 00000000 00:a7 469834     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/commons-modeler.jar\n4a37f000-4a39a000 r--s 00000000 00:a7 469836     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/lib/commons-digester.jar\n4a39a000-4a3a3000 r-xp 00000000 00:a7 362737     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/libnet.so\n4a3a3000-4a3a4000 rw-p 00008000 00:a7 362737     /home/podderko/3ps/jdk/1.3.1_09\n-linux/jre/lib/i386/libnet.so\n4a3a9000-4a3b2000 r-xp 00000000 08:06 69395      /lib/libnss_files-2.2.4.so\n4a3b2000-4a3b4000 rw-p 00008000 08:06 69395      /lib/libnss_files-2.2.4.so\n4a500000-4a57a000 r--s 00000000 00:a7 470153     /home/podderko/3ps/jakarta-tomc\nat/4.1.27_04/server/webapps/admin/WEB-INF/lib/struts.jar\n4a57a000-4a5f4000 r--s 00000000 00:a7 393649     /home/podderko/dyn/data/catalin\na/temp/.nfs000601b1000000d1 (deleted)\n\nLocal Time = Mon Sep  1 21:57:55 2003\nElapsed Time = 2\n#\n# The exception above was detected in native code outside the VM\n#\n# Java VM: Java HotSpot(TM) Client VM (1.3.1_09-b03 mixed mode)\n#\n# An error report file has been saved as hs_err_pid2585.log.\n# Please refer to the file for further information.\n#\n\n\nadmin.log\n----------\n2003-09-01 21:26:15 StandardContext[/admin]: Starting\n2003-09-01 21:26:15 StandardContext[/admin]: Processing start(), current availab\nle=false\n2003-09-01 21:26:15 StandardContext[/admin]: Configuring default Resources\n2003-09-01 21:26:15 StandardContext[/admin]: Configuring privileged default Load\ner\n2003-09-01 21:26:15 StandardContext[/admin]: Configuring default Manager\n2003-09-01 21:26:15 StandardContext[/admin]: Processing standard container start\nup\n2003-09-01 21:26:15 WebappLoader[/admin]: Deploying class repositories to work d\nirectory /home/podderko/dyn/data/catalina/work/admin\n2003-09-01 21:26:15 WebappLoader[/admin]: Deploy class files /WEB-INF/classes to\n /home/podderko/3ps/jakarta-tomcat/4.1.27_04/server/webapps/admin/WEB-INF/classe\ns\n2003-09-01 21:26:15 WebappLoader[/admin]: Deploy JAR /WEB-INF/lib/struts.jar to \n/home/podderko/3ps/jakarta-tomcat/4.1.27_04/server/webapps/admin/WEB-INF/lib/str\nuts.jar\n2003-09-01 21:26:15 ContextConfig[/admin]: ContextConfig: Processing START\n2003-09-01 21:26:15 StandardContext[/admin]: Setting deployment descriptor publi\nc ID to '-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN'\n2003-09-01 21:26:15 StandardContext[/admin]: Setting deployment descriptor publi\nc ID to '-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN'\n2003-09-01 21:26:15 ContextConfig[/admin]:  Accumulating TLD resource paths\n2003-09-01 21:26:15 ContextConfig[/admin]:   Scanning <taglib> elements in web.x\nml\n2003-09-01 21:26:15 ContextConfig[/admin]:    Adding path '/WEB-INF/struts-bean.\ntld' for URI '/WEB-INF/struts-bean.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:    Adding path '/WEB-INF/struts-logic\n.tld' for URI '/WEB-INF/struts-logic.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:    Adding path '/WEB-INF/struts-html.\ntld' for URI '/WEB-INF/struts-html.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:   Scanning TLDs in /WEB-INF subdirect\nory\n2003-09-01 21:26:15 ContextConfig[/admin]:    Adding path '/WEB-INF/controls.tld\n'\n2003-09-01 21:26:15 ContextConfig[/admin]:    Adding path '/WEB-INF/struts-bean.\ntld'\n2003-09-01 21:26:15 ContextConfig[/admin]:    Adding path '/WEB-INF/struts-html.\ntld'\n2003-09-01 21:26:15 ContextConfig[/admin]:    Adding path '/WEB-INF/struts-logic\n.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:   Scanning JARs in /WEB-INF/lib subdi\nrectory\n2003-09-01 21:26:15 ContextConfig[/admin]:    Adding path '/WEB-INF/lib/struts.j\nar'\n2003-09-01 21:26:15 ContextConfig[/admin]:  Scanning TLD at resource path '/WEB-\nINF/struts-bean.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:  Scanning TLD at resource path '/WEB-\nINF/controls.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:  Scanning JAR at resource path '/WEB-\nINF/lib/struts.jar'\n2003-09-01 21:26:15 ContextConfig[/admin]:   Processing TLD at 'META-INF/tlds/st\nruts-template.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:   Processing TLD at 'META-INF/tlds/st\nruts-html.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:   Processing TLD at 'META-INF/tlds/st\nruts-logic.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:   Processing TLD at 'META-INF/tlds/st\nruts-tiles.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:   Processing TLD at 'META-INF/tlds/st\nruts-nested.tld'\n2003-09-01 21:26:15 ContextConfig[/admin]:   Processing TLD at 'META-INF/tlds/st\nruts-bean.tld'", "id": 43571, "time": "2003-09-01T21:31:28Z", "bug_id": 22866, "creation_time": "2003-09-01T21:31:28Z", "is_private": false, "attachment_id": null}, {"count": 1, "text": "Well, I hate Sun 1.2 and 1.3 VMs on Linux (they need workarounds or they are\nunreliable; look at the release notes !). Use IBM 1.3 or 1.4, or Sun 1.4.1 or\n1.4.2 (I'd rather use IBM, though).", "bug_id": 22866, "is_private": false, "id": 43572, "time": "2003-09-01T21:44:53Z", "creator": "remm@apache.org", "creation_time": "2003-09-01T21:44:53Z", "tags": [], "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 22866, "is_private": false, "id": 43589, "time": "2003-09-02T10:38:09Z", "creator": "kosh.podder@ubs.com", "creation_time": "2003-09-02T10:38:09Z", "tags": [], "text": "IBM 1.3.1, 1.4.1 and Sun 1.4.1 and 1.4.2 still throw errors albeit different\nones - the IBM one does not crash the JVM. A lot of our apps must use 1.3.1\nright now due to third party dependencies. Can you take a look at the IBM 1.3.1\ntrace below, and offer any ideas? \n\ncatalina.out\n------------\nStarting service Tomcat-Standalone\nApache Tomcat/4.1\n[ERROR] Digester - -End event threw exception <java.lang.reflect.InvocationTa\nrgetException>java.lang.reflect.InvocationTargetException: java.lang.Internal\nError: jzentry == 0\n        at java.util.zip.ZipFile$2.nextElement(ZipFile.java:318)\n        at java.util.jar.JarFile$1.nextElement(JarFile.java:242)\n        at org.apache.catalina.startup.ContextConfig.tldScanJar(ContextConfig\n.java:909)\n        at org.apache.catalina.startup.ContextConfig.tldScan(ContextConfig.ja\nva:868)\n        at org.apache.catalina.startup.ContextConfig.start(ContextConfig.java\n:647)\n        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextCo\nnfig.java:243)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifec\nycleSupport.java:166)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.jav\na:3568)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerB\nase.java:821)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java\n:807)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:5\n79)\n        at org.apache.catalina.core.StandardHostDeployer.addChild(StandardHos\ntDeployer.java:700)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.apache.commons.beanutils.MethodUtils.invokeMethod(MethodUtils.\njava:252)\n        at org.apache.commons.digester.SetNextRule.end(SetNextRule.java:256)\n        at org.apache.commons.digester.Rule.end(Rule.java:276)\n        at org.apache.commons.digester.Digester.endElement(Digester.java:1058\n)\n        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Sou\nrce)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndEleme\nnt(Unknown Source)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentCont\nentDispatcher.dispatch(Unknown Source)(Compiled Code)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument\n(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.commons.digester.Digester.parse(Digester.java:1567)\n        at org.apache.catalina.core.StandardHostDeployer.install(StandardHost\nDeployer.java:385)\n        at org.apache.catalina.core.StandardHost.install(StandardHost.java:80\n3)\n        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfi\ng.java:442)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:\n399)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:718)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.j\nava:358)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifec\nycleSupport.java:166)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:11\n96)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:738)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:11\n88)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:\n347)\n        at org.apache.catalina.core.StandardService.start(StandardService.jav\na:497)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:\n2190)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:512)\n        at org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n        at org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\n\nadmin.log\n---------\n2003-09-02 10:30:59 StandardContext[/admin]: Starting\n2003-09-02 10:30:59 StandardContext[/admin]: Processing start(), current\navailable=false\n2003-09-02 10:30:59 StandardContext[/admin]: Configuring default Resources\n2003-09-02 10:30:59 StandardContext[/admin]: Configuring privileged default Loader\n2003-09-02 10:30:59 StandardContext[/admin]: Configuring default Manager\n2003-09-02 10:30:59 StandardContext[/admin]: Processing standard container startup\n2003-09-02 10:30:59 WebappLoader[/admin]: Deploying class repositories to work\ndirectory /home/podderko/dyn/data/catalina/work/admin\n2003-09-02 10:30:59 WebappLoader[/admin]: Deploy class files /WEB-INF/classes to\n/home/podderko/3ps/jakarta-tomcat/4.1.27_04/server/webapps/admin/WEB-INF/classes\n2003-09-02 10:30:59 WebappLoader[/admin]: Deploy JAR /WEB-INF/lib/struts.jar to\n/home/podderko/3ps/jakarta-tomcat/4.1.27_04/server/webapps/admin/WEB-INF/lib/struts.jar\n2003-09-02 10:30:59 ContextConfig[/admin]: ContextConfig: Processing START\n2003-09-02 10:30:59 StandardContext[/admin]: Setting deployment descriptor\npublic ID to '-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN'\n2003-09-02 10:31:00 StandardContext[/admin]: Setting deployment descriptor\npublic ID to '-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN'\n2003-09-02 10:31:00 ContextConfig[/admin]:  Accumulating TLD resource paths\n2003-09-02 10:31:00 ContextConfig[/admin]:   Scanning <taglib> elements in web.xml\n2003-09-02 10:31:00 ContextConfig[/admin]:    Adding path\n'/WEB-INF/struts-bean.tld' for URI '/WEB-INF/struts-bean.tld'\n2003-09-02 10:31:00 ContextConfig[/admin]:    Adding path\n'/WEB-INF/struts-logic.tld' for URI '/WEB-INF/struts-logic.tld'\n2003-09-02 10:31:00 ContextConfig[/admin]:    Adding path\n'/WEB-INF/struts-html.tld' for URI '/WEB-INF/struts-html.tld'\n2003-09-02 10:31:00 ContextConfig[/admin]:   Scanning TLDs in /WEB-INF subdirectory\n2003-09-02 10:31:00 ContextConfig[/admin]:    Adding path '/WEB-INF/controls.tld'\n2003-09-02 10:31:00 ContextConfig[/admin]:    Adding path '/WEB-INF/struts-bean.tld'\n2003-09-02 10:31:00 ContextConfig[/admin]:    Adding path '/WEB-INF/struts-html.tld'\n2003-09-02 10:31:00 ContextConfig[/admin]:    Adding path\n'/WEB-INF/struts-logic.tld'\n2003-09-02 10:31:00 ContextConfig[/admin]:   Scanning JARs in /WEB-INF/lib\nsubdirectory\n2003-09-02 10:31:00 ContextConfig[/admin]:    Adding path '/WEB-INF/lib/struts.jar'\n2003-09-02 10:31:00 ContextConfig[/admin]:  Scanning TLD at resource path\n'/WEB-INF/struts-bean.tld'\n2003-09-02 10:31:00 ContextConfig[/admin]:  Scanning TLD at resource path\n'/WEB-INF/controls.tld'\n2003-09-02 10:31:00 ContextConfig[/admin]:  Scanning JAR at resource path\n'/WEB-INF/lib/struts.jar'"}, {"count": 3, "tags": [], "bug_id": 22866, "attachment_id": null, "id": 44069, "time": "2003-09-11T20:17:30Z", "creator": "kosh.podder@ubs.com", "creation_time": "2003-09-11T20:17:30Z", "is_private": false, "text": "After numerous tests with different Linux builds, JVMs etc, I am happy to say\nthat we have narrowed down this cause of this problem to be something to do with\nour Linux version of the ClearCase client - it does not occur if not running\nTomcat in a ClearCase view - and we are now in the processing of finding out the\nroot cause and getting it fixed. This is therefore not a Tomcat bug - the cat\nmarches on! :-)"}]