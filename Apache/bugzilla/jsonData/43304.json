[{"count": 0, "attachment_id": null, "bug_id": 43304, "is_private": false, "id": 107692, "time": "2007-09-04T04:55:33Z", "creator": "jo.vandermeeren@gmail.com", "creation_time": "2007-09-04T04:55:33Z", "tags": [], "text": "Log4j release 1.2.15 enforces some runtime dependencies (javax.jms, etc) which\nshould have been marked as optional in the Maven POM, but they are not."}, {"count": 1, "tags": [], "creator": "carnold@apache.org", "is_private": false, "text": "Background info: http://maven.apache.org/guides/introduction/introduction-to-optional-and-\nexcludes-dependencies.html\n\nNeither optional dependencies or exclude dependencies (which could be used as a work-around with \n1.2.15) are desirable.  But log4j 1.2.x isn't a candidate to be split into subprojects with only non-\noptional dependencies.\n\nThe log4j 1.2.14 POM (and likely proceeding ones) were not actually used to build log4j and listed no \ndependencies (or effectively everything was an optional dependency).\n\nI could see how it would be desirable to make the compile scope dependencies (javamail, jms, jmxri, \njmxtools) optional in 1.2.16.  Or maybe all but javamail since it is in java.net repo and is more likely to \nbe used than the others which need to be manually downloaded.\n", "id": 107730, "time": "2007-09-04T21:22:09Z", "bug_id": 43304, "creation_time": "2007-09-04T21:22:09Z", "attachment_id": null}, {"id": 107731, "tags": [], "creator": "psmith@apache.org", "attachment_id": null, "count": 2, "text": "the problem here is that using log4j 1.2.15 in a project will immediately\nrequire that upstream project to depend on java mail and jms etc, when in\nreality, this is not the case _unless_ you need to use certain features.\n\nIdeally the upstream projects when depending on log4j only need log4j itself. \nIf that project then decides to need to use, say, the SMTPAppender, that\nupstream project will need to mark itself as depending on javax.mail.\n\nI'm in favour of keeping log4j's mandatory dependencies as small as possible (it\nshould be zero).", "time": "2007-09-04T21:27:25Z", "bug_id": 43304, "creation_time": "2007-09-04T21:27:25Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 43304, "attachment_id": 20824, "id": 108185, "creation_time": "2007-09-13T20:10:59Z", "time": "2007-09-13T20:10:59Z", "creator": "psmith@apache.org", "text": "Created attachment 20824\nTweaks dependencies to add optional flag\n\nAttached patch which changes log4j's dependencies to be marked as optional.  I\nborrowed this from how the ActiveMQ team have specified it.\n\nTaken from the POM reference guide @ maven.apache.org:\n\n\"In the shortest terms, optional  lets other projects know that, when you use\nthis project, you do not require this dependency in order to work correctly.\"", "is_private": false}, {"count": 4, "tags": [], "bug_id": 43304, "attachment_id": 20825, "id": 108186, "time": "2007-09-13T20:12:33Z", "creator": "psmith@apache.org", "creation_time": "2007-09-13T20:12:33Z", "is_private": false, "text": "Created attachment 20825\nNewer version with oro not marked as optional (oro is test scope already)\n\nJust realised ORO is only dependency because of test scope, so that one doesn't\nneed to be marked as optional."}, {"count": 5, "tags": [], "bug_id": 43304, "attachment_id": null, "id": 108215, "time": "2007-09-14T15:01:48Z", "creator": "carnold@apache.org", "creation_time": "2007-09-14T15:01:48Z", "is_private": false, "text": "Committed rev 575804."}, {"count": 6, "tags": [], "text": "*** Bug 43452 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 108516, "creator": "hoju@visi.com", "time": "2007-09-23T20:27:31Z", "bug_id": 43304, "creation_time": "2007-09-23T20:27:31Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 43304, "attachment_id": null, "id": 108696, "time": "2007-09-26T23:34:05Z", "creator": "mail@dekies.de", "creation_time": "2007-09-26T23:34:05Z", "is_private": false, "text": "*** Bug 43488 has been marked as a duplicate of this bug. ***"}, {"count": 8, "tags": [], "bug_id": 43304, "attachment_id": null, "is_private": false, "id": 109868, "time": "2007-10-29T06:35:44Z", "creator": "gaschbrenner@picturesafe.de", "creation_time": "2007-10-29T06:35:44Z", "text": "Environmental dependencies like 'javax.mail' or 'javax.serlvet-api' should be\nset to scope 'provided'.\n\nExample to explain what I mean:\nWhen a feature uses the dependency 'javax.ejb-2.1' it usually will only be used\nin an environment still providing this dependency (J2EE-Server). The scope of\nsuch dependencies should be set to 'provided'.\n\nI guess at least the dependencies 'javax.mail' and 'javax.jms' should get the\nscope 'provided'. I do not know enough about the jmx-libs, but I guess they also\ncan be set to 'provided'.\n\n\nThe 'optional' tag may stay. When they stay, a comment would be nice listing the\noptional features that are in need of it. That would help others to decide to\ninclude or exclude this dependency.\nSomething like: Needed when the MailAppender is used.\n\n\n"}, {"count": 9, "tags": [], "creator": "dennisl@apache.org", "is_private": false, "id": 111168, "creation_time": "2007-11-27T14:04:03Z", "time": "2007-11-27T14:04:03Z", "bug_id": 43304, "text": "The javax.mail dependency should not be marked as provided. Provided means that\nthe dependency will always be provided by the target environment.\n\nAn example to highlight why it would be wrong to mark it as provided. Say you\nhave a command line application that uses log4j for logging. The user of the\napplication decides to add an SMTPAppender to send email if something goes\nfataly wrong. Now the user needs to take action to make this work. He or she\nneeds to copy the javamail jar into the classpath of the application. In other\nwords: javax.mail is not provided by the target environment.", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 43304, "attachment_id": 21196, "id": 111170, "time": "2007-11-27T14:23:20Z", "creator": "dennisl@apache.org", "creation_time": "2007-11-27T14:23:20Z", "is_private": false, "text": "Created attachment 21196\nThis patch reformats the xml by changing whitespace\n\nThis patch reformats the xml in the pom with a consistent 2-spaces indentation.\nOnly whitespace is changed in this patch.\n\nAnother patch with improvements to the actual content is coming soon."}, {"count": 11, "tags": [], "bug_id": 43304, "attachment_id": 21674, "is_private": false, "id": 114663, "time": "2008-03-16T12:17:35Z", "creator": "dennisl@apache.org", "creation_time": "2008-03-16T12:17:35Z", "text": "Created attachment 21674\nApart from whitespace this patch also adds versions for all plugins\n\nThis includes the whitespace changes in my previous patch.\n\nThe patch adds versions for all plugins (it's a best practice to do that) and moves the release-plugin from reporting to build."}, {"count": 12, "tags": [], "text": "Thanks Dennis, I've applied your patch to the pom.  Looks puuurty now!", "is_private": false, "id": 116534, "creator": "psmith@apache.org", "time": "2008-05-12T15:34:28Z", "bug_id": 43304, "creation_time": "2008-05-12T15:34:28Z", "attachment_id": null}, {"count": 13, "tags": [], "text": "*** Bug 48216 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 134438, "creator": "dennisl@apache.org", "time": "2010-02-11T19:11:33Z", "bug_id": 43304, "creation_time": "2010-02-11T19:11:33Z", "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 43304, "attachment_id": null, "id": 135653, "creation_time": "2010-03-26T05:39:32Z", "time": "2010-03-26T05:39:32Z", "creator": "carnold@apache.org", "text": "*** Bug 48991 has been marked as a duplicate of this bug. ***", "is_private": false}]