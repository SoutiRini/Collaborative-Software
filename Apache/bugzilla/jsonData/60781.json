[{"count": 0, "tags": [], "text": "It is my understanding that the log format is supposed to match apache2.\nHowever, escaping is not the same.\n\nAs a concrete example, if there is a \" in the User-Agent and you use the combined format, apache2 gives\n\n    127.0.0.1 - - [27/Feb/2017:14:31:48 +0000] \"GET / HTTP/1.1\" 401 17277 \"-\" \"Agent \\\"Test\\\"\"\n\nWhile Tomcat gives\n\n    127.0.0.1 - - [27/Feb/2017:14:31:48 +0000] \"GET / HTTP/1.1\" 401 17277 \"-\" \"Agent \"Test\"\"\n\nThe latter cannot be parsed safely.", "attachment_id": null, "id": 197303, "creator": "james@howeswho.co.uk", "time": "2017-02-27T17:54:22Z", "bug_id": 60781, "creation_time": "2017-02-27T17:54:22Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 60781, "attachment_id": 34787, "is_private": false, "id": 197319, "time": "2017-02-28T19:41:49Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2017-02-28T19:41:49Z", "text": "Created attachment 34787\nEscape characters like httpd\n\nI am not sure about the correct handling of chars with values out of the ASCII range. I believe they are double encoded now. \n\nBut quotes and alike should be escaped correctly.\n\nMy first thought was to combine this escaping with ExtendedAccessLogValve, but it seems, that the quotes are explicitly coded as \"\" instead of \\\"."}, {"count": 2, "tags": [], "creator": "felix.schumacher@internetallee.de", "attachment_id": 34788, "id": 197321, "time": "2017-02-28T20:00:47Z", "bug_id": 60781, "creation_time": "2017-02-28T20:00:47Z", "is_private": false, "text": "Created attachment 34788\nEscape characters like httpd\n\nUse ISO-8859-1 to decode String into bytes."}]