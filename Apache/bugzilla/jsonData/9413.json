[{"count": 0, "tags": [], "creator": "nazonazo@miobox.jp", "attachment_id": null, "id": 16700, "time": "2002-05-25T08:17:49Z", "bug_id": 9413, "creation_time": "2002-05-25T08:17:49Z", "is_private": false, "text": "To use apr_pool_userdata_setn() in post_config functions of DSO modules\nis not good. I experienced SEGV at httpd startup.\n\n--- httpd-2.0.36/modules/aaa/mod_auth_digest.c.org      Sun Apr 28 18:02:19 2002\n+++ httpd-2.0.36/modules/aaa/mod_auth_digest.c  Fri May 24 21:39:42 2002\n@@ -384,7 +384,7 @@\n      * set up our static data on the second call. */\n     apr_pool_userdata_get(&data, userdata_key, s->process->pool);\n     if (!data) {\n-        apr_pool_userdata_setn((const void *)1, userdata_key,\n+        apr_pool_userdata_set((const void *)1, userdata_key,\n                                apr_pool_cleanup_null, s->process->pool);\n         return OK;\n     }\n--- httpd-2.0.36/modules/generators/mod_suexec.c.org    Thu Apr 25 16:18:39 2002\n+++ httpd-2.0.36/modules/generators/mod_suexec.c        Sat May 25 13:56:59 2002\n@@ -141,7 +141,7 @@\n         ap_log_error(APLOG_MARK, APLOG_NOERRNO|APLOG_NOTICE, 0, s,\n                      \"suEXEC mechanism enabled (wrapper: %s)\", SUEXEC_BIN);\n \n-        apr_pool_userdata_setn((void *)1, SUEXEC_POST_CONFIG_USERDATA,\n+        apr_pool_userdata_set((void *)1, SUEXEC_POST_CONFIG_USERDATA,\n                                apr_pool_cleanup_null, s->process->pool);\n     }\n \n--- httpd-2.0.36/modules/ssl/ssl_scache.c.org   Thu Mar 28 08:25:58 2002\n+++ httpd-2.0.36/modules/ssl/ssl_scache.c       Fri May 24 22:15:04 2002\n@@ -94,7 +94,7 @@\n \n         apr_pool_userdata_get(&data, userdata_key, s->process->pool);\n         if (!data) {\n-            apr_pool_userdata_setn((const void *)1, userdata_key,\n+            apr_pool_userdata_set((const void *)1, userdata_key,\n                                    apr_pool_cleanup_null, s->process->pool);\n             return;\n         }"}, {"count": 1, "text": "Right you are... Brad Nicholes had already caught one of these after 2.0.36 was \nreleased.  Justin Erenkrantz caught a similar one in PHP4 not long ago as \nwell.  I've committed your patch for the two remaining modules that were doing \nthis.\n\nThanks for using Apache!", "bug_id": 9413, "is_private": false, "id": 16705, "time": "2002-05-25T14:39:44Z", "creator": "jwoolley@apache.org", "creation_time": "2002-05-25T14:39:44Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9413, "attachment_id": null, "text": "*** Bug 7992 has been marked as a duplicate of this bug. ***", "id": 16725, "time": "2002-05-26T01:51:20Z", "creator": "jwoolley@apache.org", "creation_time": "2002-05-26T01:51:20Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 9413, "attachment_id": null, "id": 17471, "time": "2002-06-09T17:36:26Z", "creator": "jwoolley@apache.org", "creation_time": "2002-06-09T17:36:26Z", "is_private": false, "text": "*** Bug 7635 has been marked as a duplicate of this bug. ***"}]