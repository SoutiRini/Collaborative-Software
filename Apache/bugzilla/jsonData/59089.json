[{"count": 0, "tags": [], "bug_id": 59089, "attachment_id": null, "id": 188963, "time": "2016-02-29T13:43:52Z", "creator": "apache-bugzilla@michael-kaufmann.ch", "creation_time": "2016-02-29T13:43:52Z", "is_private": false, "text": "If a header name contains a byte value > 127, Tomcat 8 throws this exception:\n\n29-Feb-2016 09:42:47.833 INFO [http-nio-8080-exec-3] org.apache.coyote.http11.AbstractHttp11Processor.process Error parsing HTTP request header\n Note: further occurrences of HTTP header parsing errors will be logged at DEBUG level.\n java.lang.ArrayIndexOutOfBoundsException: -61\n\tat org.apache.coyote.http11.AbstractNioInputBuffer.parseHeader(AbstractNioInputBuffer.java:474)\n\tat org.apache.coyote.http11.AbstractNioInputBuffer.parseHeaders(AbstractNioInputBuffer.java:381)\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1024)\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:672)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\tat java.lang.Thread.run(Thread.java:745)\n\n\nThe corresponding source code is:\n\n    } else if (!HTTP_TOKEN_CHAR[chr]) {\n        // If a non-token header is detected, skip the line and\n        // ignore the header\n        headerData.lastSignificantChar = pos;\n        return skipLine();\n    }\n\n\n\"chr\" may be negative (-128 ... 127), so this is a possible bugfix:\n    } else if (chr < 0 || !HTTP_TOKEN_CHAR[chr]) {\n\n\nThis bug is present in 3 source files:\n- AbstractNioInputBuffer.java\n- InternalAprInputBuffer.java\n- InternalInputBuffer.java"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Thanks for the report. This has been fixed in trunk for 9.0.0.M4 onwards and 8.0.x for 8.0.33 onwards.\n\nIn 7.0.x and earlier the request is rejected with a 400 response.", "id": 189050, "time": "2016-03-03T11:53:04Z", "bug_id": 59089, "creation_time": "2016-03-03T11:53:04Z", "is_private": false}]