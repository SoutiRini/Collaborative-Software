[{"count": 0, "tags": [], "bug_id": 49167, "attachment_id": null, "text": "When there's a timeout reading the very first chunk length, Apache returns a 413 error response. This might be better as a 400 or 408.\n\nWhen there's a timeout reading any other chunk length, Apache returns a concatenation of the 413 and 400 error response due to the HTTP_IN filter adding a 413 error response then returning APR_TIMEUP from the filter.\n\nI haven't looked at what this means to the proxies usage of HTTP_IN, but since all the current ones are already a misleading 4xx maybe a change to 400 or 408 wouldn't do much harm.\n\nI'm attaching a patch to illustrate where the issue manifests but it's just for illustration purposes. My requests are e.g.:\n\nprintf \"POST / HTTP/1.1\\r\\nHost: foo\\r\\nTransfer-Encoding: chunked\\r\\n\\r\\n\" | nc 0 80\n\nprintf \"POST / HTTP/1.1\\r\\nHost: foo\\r\\nTransfer-Encoding: chunked\\r\\n\\r\\n4\\r\\nabcd\\r\\n\" | nc 0 80\n\n(2.2.x returns a pair of 413s instead of a 413 and a 400 for the later chunks)", "id": 136301, "time": "2010-04-21T17:30:30Z", "creator": "covener@gmail.com", "creation_time": "2010-04-21T17:30:30Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 49167, "is_private": false, "id": 136302, "attachment_id": 25329, "creator": "covener@gmail.com", "creation_time": "2010-04-21T17:31:08Z", "time": "2010-04-21T17:31:08Z", "text": "Created attachment 25329\nnaive patch for illustration"}, {"count": 2, "tags": [], "bug_id": 49167, "text": "Patch looks good to me. Please commit.", "id": 136306, "time": "2010-04-22T04:23:44Z", "creator": "rpluem@apache.org", "creation_time": "2010-04-22T04:23:44Z", "is_private": false, "attachment_id": null}]