[{"count": 0, "tags": [], "creator": "rbohnet@efasoftware.com", "attachment_id": null, "text": "When more than 1 apply task with different file mappings exist in one or\nmore targets, the last modified times on the second apply task seems to be \nignored.\nThis behaviour has been observed on a AIX platform using JDK 1.3.\nIt is not reproducible on Windows NT.  I only have an AIX box,\nso I am not sure if it is reproducible on other unix/linux platforms.\n\nBelow is a sample build.xml file and 2 scripts to cut out and place \ninto files.  Cut and paste into the appropriate files run on a unix\nbox and do the following steps:\n\n1. Enter: ant setup  \n   - This creates a 2 source files\n2. Enter: ant apply-all-unix\n   - This transforms the 2 source files into separate target files\n3. Repeat the above step.  I observe the following: \n   the first file transformation is skipped because of the presence of \n   the target file, but the second transformation is repeated.\n\nOn Windows NT, the last step (3) detects all file transformation have been done,\nand does not invoke the transform script.\n\nRalph Bohnet\nEFA Software\n\n--------------Cut here and paste into build.xml --------------------------\n<?xml version=\"1.0\"?>\n\n<project name=\"test\" default=\"apply-all-windows\" basedir=\".\">\n\n  <target name=\"init\">\n    <tstamp/>\n    <mkdir dir=\"src\"/>\n  </target>\n  \n  <target name=\"setup\" depends=\"init\">\n     <touch file=\"src/my.foo\"/>\n     <touch file=\"src/some.jms\"/>\n  </target>\n   \n  <!-- =================== Unix targets  == -->\n  <target name=\"transform1\" depends=\"init\" >\n    <apply executable=\"sh\" \n      dest=\"src\" type=\"file\">\n      <arg value=\"transform.sh\"/>\n      <srcfile/>\n      <targetfile/>\n      <fileset dir=\"src\" includes=\"**/*.foo\"/>\n      <mapper type=\"glob\" from=\"*.foo\" to=\"*.x\"/>\n    </apply>\n  </target>\n\n  <target name=\"transform2\" depends=\"init\" >\n    <apply executable=\"sh\" \n      dest=\"src\" type=\"file\">\n      <arg value=\"transform.sh\"/>\n      <srcfile/>\n      <targetfile/>\n      <fileset dir=\"src\" includes=\"**/*.jms\"/>\n      <mapper type=\"glob\" from=\"*.jms\" to=\"*.java\"/>\n    </apply>\n  </target>\n  \n  <!-- =================== Dos targets  == -->\n  <target name=\"transform3\" depends=\"init\" >\n    <apply executable=\"transform.bat\" \n      dest=\"src\" type=\"file\">\n      <srcfile/>\n      <targetfile/>\n      <fileset dir=\"src\" includes=\"**/*.foo\"/>\n      <mapper type=\"glob\" from=\"*.foo\" to=\"*.x\"/>\n    </apply>\n  </target>\n\n  <target name=\"transform4\" depends=\"init\" >\n    <apply executable=\"transform.bat\" \n      dest=\"src\" type=\"file\">\n      <srcfile/>\n      <targetfile/>\n      <fileset dir=\"src\" includes=\"**/*.jms\"/>\n      <mapper type=\"glob\" from=\"*.jms\" to=\"*.java\"/>\n    </apply>\n  </target>\n  \n  <target name=\"apply-all-unix\" depends=\"transform1,transform2\" />\n   \n  <target name=\"apply-all-windows\" depends=\"transform3,transform4\" />\n   \n  <target name=\"clean\">\n     <delete>\n       <fileset dir=\"src\" includes=\"*.java,*.x\"/>\n     </delete>\n   </target>\n</project>\n--------------Cut here and paste into transform.sh --------------------------\n#!/bin/sh\necho transforming `basename $1`\necho done > $2\n\n--------------Cut here and paste into transform.bat --------------------------\n@ECHO OFF\n@echo transforming %2\n@echo done > %2", "id": 4745, "time": "2001-08-22T14:41:37Z", "bug_id": 3237, "creation_time": "2001-08-22T14:41:37Z", "is_private": false}, {"count": 1, "tags": [], "creator": "rbohnet@efasoftware.com", "attachment_id": null, "text": "This problem goes away when the JIT is disabled (ANT_OPTS=-Djava.compiler=NONE)\nIt looks as if it is something unique to the AIX JVM.  \n", "id": 8068, "time": "2001-11-19T09:44:23Z", "bug_id": 3237, "creation_time": "2001-11-19T09:44:23Z", "is_private": false}]