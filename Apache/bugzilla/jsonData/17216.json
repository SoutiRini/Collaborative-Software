[{"count": 0, "attachment_id": null, "creator": "jallers@advancedreality.com", "text": "org.apache.tools.ant.taskdefs.ProcessDestroyer is the source of a memory leak.\nWhenever an instance of ProcessDestroyer is created, it adds a shutdown hook.\nNormally, their is only one instance, the static member of\norg.apache.tools.ant.taskdefs.Execute, but if there are situations when the\nExecute class is loaded more than once, e.g. IDE integration then multiple\ninstances of Execute can be created.\n\nEclipse ant integration invokes a new classloader every time it runs an Ant\nproject. Since the new ProcessDestroyer adds a shutdown hook, the entire\nclassloader cannot be GCed until the VM exits.\n\nI think ProcessDestroyer should only add the shutdown hook if necessary and\nremove the shutdown hook if it is no longer needed. I think this is a nice fix\nfor ProcessDestroyer which does not alter its function except for some\nunnecessary method calls.", "id": 31624, "time": "2003-02-19T19:46:34Z", "bug_id": 17216, "creation_time": "2003-02-19T19:46:34Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": 4932, "creator": "jallers@advancedreality.com", "text": "Created attachment 4932\nNew Implementation", "id": 31642, "time": "2003-02-20T02:32:04Z", "bug_id": 17216, "creation_time": "2003-02-20T02:32:04Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 17216, "attachment_id": 4933, "id": 31643, "time": "2003-02-20T02:32:46Z", "creator": "jallers@advancedreality.com", "creation_time": "2003-02-20T02:32:46Z", "is_private": false, "text": "Created attachment 4933\nSimple Test Case"}, {"count": 3, "tags": [], "bug_id": 17216, "attachment_id": 4961, "id": 31728, "time": "2003-02-21T05:53:06Z", "creator": "jallers@advancedreality.com", "creation_time": "2003-02-21T05:53:06Z", "is_private": false, "text": "Created attachment 4961\nProcess Destroyer Patch file (additional code comments)"}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "patch applied, thanks.  Should be fixed in nightly build 2003-02-27.", "id": 31998, "time": "2003-02-26T13:07:53Z", "bug_id": 17216, "creation_time": "2003-02-26T13:07:53Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 17216, "text": "I can verify that the bug affected the NetBeans IDE integration as well (leading\noften to OutOfMemoryError's, yuck) and that the fix works for NB as well - at\nleast with dev versions of Ant there is no stray shutdown hook. A workaround is\npossible using Java reflection. Details:\n\nhttp://www.netbeans.org/issues/show_bug.cgi?id=36393\n\nThanks James!", "id": 44968, "time": "2003-10-01T23:46:15Z", "creator": "jglick@apache.org", "creation_time": "2003-10-01T23:46:15Z", "is_private": false, "attachment_id": null}, {"count": 6, "text": "You have a beta as an upgrade option now, Jesse 8-)", "creator": "bodewig@apache.org", "attachment_id": null, "id": 44984, "time": "2003-10-02T07:34:46Z", "bug_id": 17216, "creation_time": "2003-10-02T07:34:46Z", "tags": [], "is_private": false}]