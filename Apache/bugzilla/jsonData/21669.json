[{"count": 0, "tags": [], "creator": "art_w@eastpoint.com", "attachment_id": null, "is_private": false, "id": 40868, "time": "2003-07-16T22:59:24Z", "bug_id": 21669, "creation_time": "2003-07-16T22:59:24Z", "text": "Currently the roleBase attribute must be a fxed location in the directory. A \nsimple change would allow the role base to be specified relative to the user \nDN. My enhancement suggestion would change the roleBase definition as follows:\n\nroleBase - the base entry for the role search. If not specified, the search \nbase is the top level directory context. If specified it may optionally include \npattern replacements \"{0}\"..\"{n}\" corrosponding to the name parts of the user's \ndistinguished name (as returned by javax.naming.Name.get()).\n\nFor example, in the <Realm> defintion in server.xml you could specify the \nroleBase as:\n\n    roleBase=\"ou=Groups,{1},{0}\"\n\nThe majority of the code to accomplish this would be in JNDIRealm.getRoles() \nand could look like this:\n\n\tString base = null;\n\tif ( roleBaseFormat != null )\n\t{\n\t\tNameParser np = context.getNameParser(\"\");\n\t\tName name = np.parse(dn);\n\t\tString nameParts[] = new String[name.size()];\n\t\tfor ( int idx = 0 ; idx < name.size() ; idx++ )\n\t\t\tnameParts[idx] = name.get(idx);\n       \tbase = roleBaseFormat.format(nameParts);\n\t}\n\n        // Perform the configured search and process the results\n        if (debug >= 3) {\n            log(\"  Searching role base '\" + base + \"' for attribute '\" +\n                roleName + \"'\");\n            log(\"  With filter expression '\" + filter + \"'\");\n        }\n        NamingEnumeration results =\n            context.search(base, filter, controls);\n\nThank You,\nArt"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 144470, "time": "2011-02-22T06:48:41Z", "bug_id": 21669, "creation_time": "2011-02-22T06:48:41Z", "is_private": false, "text": "Thanks for the suggestion. Sorry it took so long to get to.\n\nI have added this feature to 7.0.x and it will be included in 7.0.9 onwards."}]