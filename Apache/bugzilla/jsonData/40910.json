[{"count": 0, "tags": [], "bug_id": 40910, "attachment_id": null, "is_private": false, "id": 95478, "time": "2006-11-06T07:00:17Z", "creator": "markus.lind@yellowmap.de", "creation_time": "2006-11-06T07:00:17Z", "text": "When defining more than 1 proxy balancers the system sometimes ignores\nconfigurations and takes the first balancer for all requests. ErrorLog and\nconfigtest say everything is ok, the effect seems to be depending of the order\nof configuration\n\nThe following configuration doesn't work\n\n<VirtualHost xxx.xxx.xxx.xxx>\n    <Proxy balancer://cluster1>\n        BalancerMember http://10.x.x.x loadfactor=20 retry=60\n        BalancerMember http://10.x.x.y loadfactor=10 retry=60\n    </Proxy>\n    <Proxy balancer://cluster2>\n        BalancerMember http://10.x.x.x:8080 loadfactor=20 retry=60\n        BalancerMember http://10.x.x.y:8080 loadfactor=10 retry=60\n    </Proxy>\n     RewriteEngine on\n     RewriteRule ^/specialpath/(.*)$ balancer://cluster2/specialpath/$1 [NC,P,L]\n     RewriteRule ^/(.*)$ balancer://cluster1/$1 [P,L]\n</VirtualHost>\n\nEvery request to specialpath is routed to the webs linked in cluster1\nIf I change the sequence of the 2 balancers it works\n\n<VirtualHost xxx.xxx.xxx.xxx>\n    <Proxy balancer://cluster2>\n        BalancerMember http://10.x.x.x:8080 loadfactor=20 retry=60\n        BalancerMember http://10.x.x.y:8080 loadfactor=10 retry=60\n    </Proxy>\n    <Proxy balancer://cluster1>\n        BalancerMember http://10.x.x.x loadfactor=20 retry=60\n        BalancerMember http://10.x.x.y loadfactor=10 retry=60\n    </Proxy>\n     RewriteEngine on\n     RewriteRule ^/specialpath/(.*)$ balancer://cluster2/specialpath/$1 [NC,P,L]\n     RewriteRule ^/(.*)$ balancer://cluster1/$1 [P,L]\n</VirtualHost>\n\nBalancer Manager Webpage shows both clusters, but in case 1 the ports of cluster\n2 are \"lost\", in case 2 it is shown correctly with port 8080\n\nWith 3 or more backend clusters this issue would be even more complicated to test"}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "Could you please give the attached patch a try? It should fix your problem.", "id": 95482, "time": "2006-11-06T08:31:35Z", "bug_id": 40910, "creation_time": "2006-11-06T08:31:35Z", "is_private": false}, {"count": 2, "tags": [], "creator": "rpluem@apache.org", "attachment_id": 19092, "text": "Created attachment 19092\nPatch against trunk", "id": 95483, "time": "2006-11-06T08:32:07Z", "bug_id": 40910, "creation_time": "2006-11-06T08:32:07Z", "is_private": false}, {"count": 3, "text": "Thanks, the Patch fixes the problem\n\n", "bug_id": 40910, "is_private": false, "id": 95489, "time": "2006-11-06T09:22:19Z", "creator": "markus.lind@yellowmap.de", "creation_time": "2006-11-06T09:22:19Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 40910, "attachment_id": null, "is_private": false, "id": 96486, "time": "2006-12-03T13:26:59Z", "creator": "rpluem@apache.org", "creation_time": "2006-12-03T13:26:59Z", "text": "Committed to trunk as r481901 (http://svn.apache.org/viewvc?view=rev&rev=481901)."}, {"count": 5, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "Proposed for backport as r571936 (http://svn.apache.org/viewvc?rev=571936&view=rev).", "id": 107603, "time": "2007-09-02T03:00:42Z", "bug_id": 40910, "creation_time": "2007-09-02T03:00:42Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 40910, "is_private": false, "text": "Backported to 2.2.x as r572420 (http://svn.apache.org/viewvc?rev=572420&view=rev).", "id": 107669, "time": "2007-09-03T14:01:19Z", "creator": "rpluem@apache.org", "creation_time": "2007-09-03T14:01:19Z", "attachment_id": null}]