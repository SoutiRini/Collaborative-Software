[{"count": 0, "tags": [], "bug_id": 23718, "attachment_id": null, "text": "Here is the deal. I've compiled this successfully before using Netscape SDK 4.14\nwith httpd 2.0.44-. Can't remember the exact version. So I feel confident that I\nhave the correct options for configure. When I Googled for answers I found some\ninfo that something changed in httpd at around 2.0.45 that might be the cause of\nour problems.\n\nProblem\n-------\nWe've narrowed it down to apr-util. When the configure script for apr-util is\ncalled it produces the following warnings:\n\n checking ldap_ssl.h usability... no\n checking ldap_ssl.h presence... yes\n configure: WARNING: ldap_ssl.h: present but cannot be compiled\n configure: WARNING: ldap_ssl.h: check for missing prerequisite headers?\n configure: WARNING: ldap_ssl.h: proceeding with the preprocessor's\n  result\n checking for ldap_ssl.h... yes\n\nThe configure script continues and exits without errors, but when I try to\ncompile - it won't compile. As you can see configure has concluded that\nldap_ssl.h is present but not usable. Not a good sign.\n\nBy the way this happens with both 4.14 and 5.08 of the Netscape SDK. After\ndigging into the internals of the Netscape SDK we found that ldap_ssl.h is\ndependant on ldap.h, but it doesn't actually include it directly. They leave\nthat as an excercise for the users I guess :-)\n\nSo there are two ways to fix this.\n\nFix 1\n-----\nAdd the following lines to the top of the file include/ldap_ssl.h in the\nNetscape SDK.\n\n #ifndef _LDAP_H\n #include \"ldap.h\"\n #endif\n\nFix 2\n-----\nAlter the configure script for apr-util. Now I must confess that I am not a\nmaster when it comes to configure-scripts, so bear with me here. I realize that\nthe file configure is generated in some way by autoconf. However we have not\nbeen able to find a suitable place in configure.in to apply a cure. We have\nmanaged to apply a rather crude fix to the configure file itself, that makes\nthings work.\n\nAlter this section in the configure file:\n\n for ac_header in ldap_ssl.h\n ...\n #include \"confdefs.h\"\n $ac_includes_default\n #include <$ac_header>\n _ACEOF\n\nso that it looks like this\n\n for ac_header in ldap_ssl.h\n ...\n #include \"confdefs.h\"\n $ac_includes_default\n #include <ldap.h>\n #include <$ac_header>\n _ACEOF\n\nAs I said I am unable to provide a patch-file for this but I hope that someone\nelse can use this information and create a suitable patch.\n\nTo make sure that this has not been fixed I also downloaded apr and apr-util\nnightlies (20031001101908) and the problem is still there.\n\nThis message was posted to the httpd-user list, but one there could help.\n\nEnvironment\n-----------\nSolaris 8 on Sparc\nNetscape SDK: ldapcsdk4.14, ldapcsdk5.08\nApache httpd: 2.0.45, 2.0.47\napr & apr-util: 20031001101908\nautoconf 2.54\nm4 1.4\ngcc 3.3\n\nconfigure options\n-----------------\n./configure \\\n  --prefix=/www/httpd-2.0.47 \\\n  --disable-ipv6 \\\n  --with-mpm=prefork \\\n  --enable-mods-shared=most \\\n  --enable-ssl=shared \\\n  --enable-ldap=shared \\\n  --enable-auth-ldap=shared \\\n  --with-ldap \\\n  --with-ldap-include=/usr/local/ldapcsdk/include \\\n  --with-ldap-lib=/usr/local/ldapcsdk/lib", "id": 45334, "time": "2003-10-10T09:13:08Z", "creator": "dennisl@apache.org", "creation_time": "2003-10-10T09:13:08Z", "is_private": false}, {"count": 1, "tags": [], "creator": "dennisl@apache.org", "attachment_id": null, "id": 48738, "time": "2003-12-09T16:16:20Z", "bug_id": 23718, "creation_time": "2003-12-09T16:16:20Z", "is_private": false, "text": "This problem is still present in 2.0.48."}, {"count": 2, "tags": [], "bug_id": 23718, "text": "\n\n*** This bug has been marked as a duplicate of 19085 ***", "id": 51148, "time": "2004-01-25T17:46:36Z", "creator": "jorton@redhat.com", "creation_time": "2004-01-25T17:46:36Z", "is_private": false, "attachment_id": null}]