[{"count": 0, "tags": [], "creator": "john.mckisson@gmail.com", "text": "My OS is Mac OS X 10.6.  This problem exists in ant 1.7.0 (included with 10.6), 1.7.1, and the latest version I got from svn (Apache Ant version 1.8.0alpha compiled on September 1 2009).\n\nThis problem persists with both the 32 and 64 bit JVM included by Apple in 10.6, Java(TM) SE Runtime Environment (build 1.6.0_15-b03-219).\n\nI have a simple ant java task which launches a java program:\n\n<target name=\"run-server\" depends=\"compile\" description=\"Run the CarrierServer\">\n    <java classname=\"jDaq.server.CarrierServer\"/>\n</target>\n\nRunning this task appears to launch properly but then immediately exits, producing this output:\n\nmckisson:jDaq john$ ant run-server\nBuildfile: /Users/john/Development/jDaq/build.xml\n\ninit:\n\ncompile:\n\nrun-server:\n     [java] Sep 1, 2009 10:41:28 AM jDaq.server.CarrierServer <clinit>\n     [java] 10:41:28.981 [INFO] (main) CarrierServer:: Starting Server...\n     [java] 10:41:33.650 [INFO] (main) CarrierServer:: Server running on interface 0.0.0.0\n     [java] 10:41:33.651 [INFO] (main) CarrierServer:: Using TCP port 1198\n     [java] 10:41:33.651 [INFO] (main) CarrierServer:: Codebase server running: http://129.57.53.6:9000/\n     [java] 10:41:33.651 [INFO] (main) CarrierServer:: Looking for Devices...\n     [java] 10:41:33.696 [INFO] (main) CarrierServer:: <Remote> new FpgaControl QUSB-0\n     [java] 10:41:33.724 [INFO] (main) FpgaControl:: Creating new Daq/COG threads: QUSB-0\n     [java] 10:41:33.725 [INFO] (QUSB-0 Daq) FpgaControl:: idle...\n     [java] 10:41:33.727 [INFO] (QUSB-0 COG) FpgaControl:: idle...\n     [java] 10:41:33.771 [INFO] (main) CarrierServer:: <Remote> new FpgaControl QUSB-1\n     [java] 10:41:33.772 [INFO] (main) FpgaControl:: Creating new Daq/COG threads: QUSB-1\n     [java] 10:41:33.777 [INFO] (QUSB-1 Daq) FpgaControl:: idle...\n     [java] 10:41:33.778 [INFO] (QUSB-1 COG) FpgaControl:: idle...\n     [java] 10:41:33.780 [INFO] (main) CarrierServer:: Server Ready, free memory = 71548.34kB\n\nBUILD SUCCESSFUL\nTotal time: 6 seconds\nmckisson:jDaq john$ \n\nRunning the same task with fork defined as true works properly and the program does not exit immediately.", "id": 130101, "attachment_id": null, "bug_id": 47775, "creation_time": "2009-09-01T07:53:32Z", "time": "2009-09-01T07:53:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 47775, "is_private": false, "text": "This could be caused by the main thread exiting in the called java program. (This implies the program completely runs from other threads than main.)\nant calls System.exit when the end of the build is reached.\n\nI'll investigate if it is safe to change the Main class not to call System.exit in case of an successful exit status.", "id": 130784, "time": "2009-10-01T13:52:54Z", "creator": "jkf@apache.org", "creation_time": "2009-10-01T13:52:54Z", "attachment_id": null}]