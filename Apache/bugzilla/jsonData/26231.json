[{"count": 0, "tags": [], "bug_id": 26231, "is_private": false, "text": "I have built Apache 2.0.48 with the prefork MPM, and mod_jk2 using the tomcat\n5.0.16 source tarball.  When I start apache, I see some errors of the form:\n\njk2_init() Can't find child 23459 in none of the 256 scoreboard slots\n\nI've traced this error to the jk2_child_init function in\nnative2/server/mod_jk2.c. By adding additional logging calls to mod_jk2.c and\nthe apache prefork.c file, I've verified that these messages are issued when\njk2_child_init is called AFTER make_child (from prefork.c) is invoked, and\nBEFORE it completes.  I think this is pretty good evidence of a race condition.\n\nI'm not familiar enough with the Apache codebase to figure out why this is\nhappening, but I think it ought to be corrected nevertheless.  (The only way I'm\nsure I could fix this is by putting a little delay and retry in jk2_child_init\nwhen the process can't be found in the apache scoreboard, but that seems tacky.)", "id": 50703, "time": "2004-01-18T21:08:12Z", "creator": "brett.neumeier@ualloyalty.com", "creation_time": "2004-01-18T21:08:12Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 26231, "text": "For what it's worth, I've confirmed the same thing happens with the worker MPM.", "count": 1, "id": 50829, "time": "2004-01-20T19:23:59Z", "creator": "brett.neumeier@ualloyalty.com", "creation_time": "2004-01-20T19:23:59Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 26231, "text": "I've implemented a patch as I described earlier, it seems to work.  On my\nmachine, one \"spin\" iteration is necessary about a third of the time when\ninitializing a jk2 worker.  Patch is attached.", "id": 51530, "time": "2004-01-31T19:58:08Z", "creator": "brett.neumeier@ualloyalty.com", "creation_time": "2004-01-31T19:58:08Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": 10169, "creator": "brett.neumeier@ualloyalty.com", "is_private": false, "id": 51531, "time": "2004-01-31T19:58:57Z", "bug_id": 26231, "creation_time": "2004-01-31T19:58:57Z", "tags": [], "text": "Created attachment 10169\nspin and retry when child process isn't yet in scoreboard."}, {"count": 4, "tags": [], "bug_id": 26231, "attachment_id": null, "is_private": false, "id": 54700, "time": "2004-03-26T03:09:24Z", "creator": "truk@apache.org", "creation_time": "2004-03-26T03:09:24Z", "text": "*** Bug 27967 has been marked as a duplicate of this bug. ***"}, {"count": 5, "tags": [], "creator": "George.Lindholm@ubc.ca", "text": "It works for me too (solaris). Any chance of getting the patch into the \ndistribution? \n \n   George ", "id": 57000, "time": "2004-05-07T19:18:13Z", "bug_id": 26231, "creation_time": "2004-05-07T19:18:13Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 26231, "text": "OK, patch applied.", "id": 59302, "time": "2004-06-16T14:39:54Z", "creator": "yoavs@computer.org", "creation_time": "2004-06-16T14:39:54Z", "is_private": false, "attachment_id": null}]