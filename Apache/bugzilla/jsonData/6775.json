[{"count": 0, "tags": [], "creator": "mhartle@hartle-klug.com", "is_private": false, "text": "If you are using JDK1.4.0, use the JPEGTranscoder and have set the hint\nImageTranscoder.KEY_BACKGROUND_COLOR (like the Cocoon SVGSerializer presetting\nwhite as background color), you receive a blank image with the hinted background\ncolor you set instead of the image you wanted.\n\nThis is produced due to the single, misplaced g2d.dispose()-call - according to\nthe Javadoc, g2d.dispose() releases all related system resources and makes the\nGraphics2D unusable, but currently, after disposing g2d, it is being used by\npainting the image on it. Seems like the JDK1.4.0 has some changes under the\nhood that now enforce the spec.\n\nCut the g2d.dispose()-call out of the if-statement checking for the\nImageTranscoder.KEY_BACKGROUND_COLOR hint and move it further down, paste it\ninto a new line directly before \"rend = null;\".\n\nMaking this change to batik, rebuilding libs-jar and replacing the default batik\njar in Cocoon, it suddenly serializes SVG to JPEGs under JDK1.4.0 again like a\ncharm.", "id": 11339, "time": "2002-03-01T02:28:22Z", "bug_id": 6775, "creation_time": "2002-03-01T02:28:22Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 6775, "attachment_id": null, "id": 11340, "time": "2002-03-01T02:47:15Z", "creator": "mhartle@hartle-klug.com", "creation_time": "2002-03-01T02:47:15Z", "is_private": false, "text": "I forgot where to find that misplaced g2d.dispose()-call; you will find it in\norg.apache.batik.transcoder.image.ImageTranscoder.transcode()."}, {"count": 2, "tags": [], "bug_id": 6775, "attachment_id": null, "id": 11422, "time": "2002-03-04T08:39:21Z", "creator": "tkormann@apache.org", "creation_time": "2002-03-04T08:39:21Z", "is_private": false, "text": "patch applied. Thanks\n"}]