[{"count": 0, "attachment_id": null, "creator": "mark.barnes@adp.com", "text": "It looks to me like Tomcat 8.0.14 is trying to use the wrong directory when trying to load a web app.\n\nIn my server.xml, in my <Host> element, I have name='wapp1_001\" and appBase=\u201d\u201d.  In my <Context> element, I have path=\u201d/src\u201d and docBase=\u201dwebapps/src\u201d\n\nI would expect Tomcat to use $TOMCAT_HOME/webapps/src for the /src context, but it's not.  It's trying to use $TOMCAT_HOME/src.  Why?\n\nBoth TOMCAT_HOME and CATALINA_HOME are set to /usr/local/tomcat, which is a symbolic link to /usr/local/tomcat8, which is a symbolic to /usr/local/apache-tomcat-8.0.14.\n\nWhen I use appBase=\"/usr/local/tomcat/webapps\" things work just fine.  Notice that \"webapps\" is now in both appBase and docBase.\n\nWhen I use appBase=\"webapps\" things work just fine as well.  Notice that \"webapps\" is redundant again.\n\nButh when I use appBase=\"\" it doesn't work.\n\nThe Tomcat 8 configuration docs seem to say that the default for appBase is the \"webapps\" sub-directory of $TOMCAT_HOME, as it always has been.\n\nI have had this same problem on both Windows 7 and Ubuntu Linux.  JDK is 1.8.0_25 (64-bit) in both cases\n\nAm I missing something here?  Did somethning change between Tomcat 6 and Tomcat 8.  Or is this a bug in Tomcat 8.0.14?\n\n\n\n\nHere is the stack traceback:\n\njava.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat-Standalone].StandardHost[wapp1_001].StandardContext[/src]]\n  at java.util.concurrent.FutureTask.report(FutureTask.java:122)\n  at java.util.concurrent.FutureTask.get(FutureTask.java:192)\n  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:916)\n  at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:868)\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1408)\n  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1398)\n  at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n  at java.lang.Thread.run(Thread.java:745)\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat-Standalone].StandardHost[wapp1_001].StandardContext[/src]]\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\n  ... 6 more\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [org.apache.catalina.webresources.StandardRoot@6672f1f2]\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)\n  at org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4900)\n  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5029)\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n  ... 6 more\nCaused by: java.lang.IllegalArgumentException: The main resource set specified [/usr/local/apache-tomcat-8.0.14/src] is not valid\n  at org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:665)\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n  ... 9 more\n01-19-2015 14:16:03.524 A child container failed during start", "id": 180397, "time": "2015-01-19T19:33:33Z", "bug_id": 57467, "creation_time": "2015-01-19T19:33:33Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 57467, "attachment_id": null, "id": 180398, "time": "2015-01-19T19:51:17Z", "creator": "chuck.caldarale@unisys.com", "creation_time": "2015-01-19T19:51:17Z", "is_private": false, "text": "(In reply to Mark Barnes from comment #0)\n> In my server.xml, in my <Host> element, I have name='wapp1_001\" and\n> appBase=\u201d\u201d.\n\nInvalid right off the bat.\n\n> Buth when I use appBase=\"\" it doesn't work.\n\nNor should it, since that's an invalid configuration.\n\nBugzilla is not a support forum; post your configuration issues on the Tomcat users' mailing list."}, {"count": 2, "tags": [], "bug_id": 57467, "text": "It works for Tomcat 6 and it worked for Tomcat 5.  We're upgrading from 6.0.20 to 8.0.14.\n\nThe configuration reference does say this:\n\nThe Application Base directory for this virtual host. This is the pathname of a directory that may contain web applications to be deployed on this virtual host. You may specify an absolute pathname, or a pathname that is relative to the $CATALINA_BASE directory. See Automatic Application Deployment for more information on automatic recognition and deployment of web applications. If not specified, the default of webapps will be used.\n\nI get that it does NOT say that appBase=\"\" is the same as not specifying appBase at all.  In fact, it doesn't say what appBase=\"\" means.  It doesn't say it's invalid, either.  So \"\" is not relative $CATALINA_BASE ???\n\n\t\nThe Document Base (also known as the Context Root) directory for this web application, or the pathname to the web application archive file (if this web application is being executed directly from the WAR file). You may specify an absolute pathname for this directory or WAR file, or a pathname that is relative to the appBase directory of the owning Host.\nThe value of this field must not be set unless the Context element is defined in server.xml or the docBase is not located under the Host's appBase.\nIf a symbolic link is used for docBase then changes to the symbolic link will only be effective after a Tomcat restart or by undeploying and redeploying the context. A context reload is not sufficient.\n\nOh, well...", "id": 180399, "time": "2015-01-19T20:03:20Z", "creator": "mark.barnes@adp.com", "creation_time": "2015-01-19T20:03:20Z", "is_private": false, "attachment_id": null}]