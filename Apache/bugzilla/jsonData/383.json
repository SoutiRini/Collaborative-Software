[{"count": 0, "tags": [], "creator": "dev@tomcat.apache.org", "attachment_id": null, "text": "I use ant to build multiple jar files, some which depend on \r\nothers in the same build. If I change public API in a \"depended\r\non\" jar file, I get\r\n\r\nlyophil-jdbc20:\r\nCompiling 1 source file to /home/dwalend/opensource/lyophilizer/build/lyophil-jdbc20\r\nAn exception has occurred in the compiler (1.3.0). Please file a bug at the Java Developer Connection (http://java.sun.com/cgi-bin/bugreport.cgi).  Include your program and the following diagnostic in your report.  Thank you.\r\njava.lang.InternalError: jzentry == 0\r\n\tat java.util.zip.ZipFile$2.nextElement(ZipFile.java:297)\r\n\tat com.sun.tools.javac.v8.code.ClassReader.openArchive(ClassReader.java:893)\r\n\tat com.sun.tools.javac.v8.code.ClassReader.list(ClassReader.java:1095)\r\n\tat com.sun.tools.javac.v8.code.ClassReader.listAll(ClassReader.java:1180)\r\n\tat com.sun.tools.javac.v8.code.ClassReader.fillIn(ClassReader.java:1202)\r\n\tat com.sun.tools.javac.v8.code.ClassReader.complete(ClassReader.java:955)\r\n\tat com.sun.tools.javac.v8.code.Symbol.complete(Symbol.java:366)\r\n\tat com.sun.tools.javac.v8.comp.Enter._case(Enter.java:424)\r\n\tat com.sun.tools.javac.v8.tree.Tree$TopLevel.visit(Tree.java:349)\r\n\tat com.sun.tools.javac.v8.comp.Enter.classEnter(Enter.java:392)\r\n\tat com.sun.tools.javac.v8.comp.Enter.classEnter(Enter.java:410)\r\n\tat com.sun.tools.javac.v8.comp.Enter.main(Enter.java:540)\r\n\tat com.sun.tools.javac.v8.JavaCompiler.compile(JavaCompiler.java:357)\r\n\tat com.sun.tools.javac.v8.Main.compile(Main.java:247)\r\n\tat com.sun.tools.javac.Main.compile(Main.java:26)\r\n\tat java.lang.reflect.Method.invoke(Native Method)\r\n\tat org.apache.tools.ant.taskdefs.Javac.doModernCompile(Javac.java)\r\n\tat org.apache.tools.ant.taskdefs.Javac.execute(Javac.java)\r\n\tat org.apache.tools.ant.Target.execute(Target.java)\r\n\tat org.apache.tools.ant.Project.runTarget(Project.java)\r\n\tat org.apache.tools.ant.Project.executeTarget(Project.java)\r\n\tat org.apache.tools.ant.Project.executeTargets(Project.java)\r\n\tat org.apache.tools.ant.Main.runBuild(Main.java)\r\n\tat org.apache.tools.ant.Main.main(Main.java)\r\n\r\nthe first time I build. The next time, everything builds fine.\r\n\r\nI think the problem is this: ant doesn't fork the javac process.\r\nant has already loaded stale versions of the classes its \r\ncompiling. So when it compiles classes that depend on those,\r\nit barfs out that stack trace. I think forking the javac \r\nprocess would fix it.\r\n\r\nThanks,\r\n\r\nDave", "id": 357, "time": "2000-12-29T18:51:54Z", "bug_id": 383, "creation_time": "2000-12-29T18:51:54Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 383, "is_private": false, "count": 1, "id": 554, "time": "2001-02-04T07:49:04Z", "creator": "nico@apache.org", "creation_time": "2001-02-04T07:49:04Z", "text": "From ZipFile.java it looks like ZipFile thinks there should be more files \navailable in the zip, but ZipFile can not read them. Is there another process \nmodifying the zip-file?\nI tried to reproduce this on W2K, but I don't know how to reproduce. \nCalling 'ant lyophil-jdbc20' works for me."}, {"attachment_id": null, "tags": [], "bug_id": 383, "is_private": false, "count": 2, "id": 3156, "time": "2001-06-21T07:28:29Z", "creator": "bodewig@apache.org", "creation_time": "2001-06-21T07:28:29Z", "text": "*** Bug 2072 has been marked as a duplicate of this bug. ***"}, {"count": 3, "tags": [], "bug_id": 383, "is_private": false, "text": "*** Bug 2366 has been marked as a duplicate of this bug. ***", "id": 3389, "time": "2001-07-04T03:11:06Z", "creator": "bodewig@apache.org", "creation_time": "2001-07-04T03:11:06Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "dfw1@cornell.edu", "is_private": false, "text": "Nico,\n\nI didn't realize you were keeping up with this until just now. Thanks.\n\nIf I remimber correctly, it worked fine the first time, but not the second. I\nsolved the problem by cleaning before every build to flush out the old .jar\nfiles.\n\nI'd really prefer to have a forked attribute in the javac tag. \n\nI've switched the resolution to \"Works for me\" since it worked for you.\n\nDave\n", "id": 3400, "time": "2001-07-04T07:41:11Z", "bug_id": 383, "creation_time": "2001-07-04T07:41:11Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 383, "is_private": false, "count": 5, "id": 3401, "time": "2001-07-04T07:48:38Z", "creator": "bodewig@apache.org", "creation_time": "2001-07-04T07:48:38Z", "text": "reopened as it still is a valid enhancement request (and closing it removes all\nmy carefully attached duplicate bug report resolutions 8-)"}, {"count": 6, "tags": [], "bug_id": 383, "attachment_id": null, "text": "<javac> now has a fork attribute starting with nightly build 2001-08-04", "id": 4257, "time": "2001-08-03T07:36:08Z", "creator": "bodewig@apache.org", "creation_time": "2001-08-03T07:36:08Z", "is_private": false}]