[{"attachment_id": 27736, "tags": [], "bug_id": 51997, "text": "Created attachment 27736\nTest Plan\n\nHello,\nScenario:\n- Using ActiveMQ 5.5.0\n- Start test \n- Let one sample run\n- Call stop before it ends\n\nWe have Thread ActiveMQ Tranport tcp://.... Running.\n\n\nI think it's a bug in ActiveMQ but I open an issue here if anyone meets the same issue.\nCause is due to an exception occuring on close:\n2011/10/08 17:16:59 ERROR - jmeter.protocol.jms.client.ReceiveSubscriber: Error during close:  javax.jms.JMSException: java.io.InterruptedIOException\n\tat org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62)\n\tat org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1342)\n\tat org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:660)\n\tat org.apache.jmeter.protocol.jms.Utils.close(Utils.java:65)\n\tat org.apache.jmeter.protocol.jms.client.ReceiveSubscriber.close(ReceiveSubscriber.java:236)\n\tat org.apache.jmeter.protocol.jms.sampler.SubscriberSampler.threadFinished(SubscriberSampler.java:305)\n\tat org.apache.jmeter.threads.JMeterThread$ThreadListenerTraverser.addNode(JMeterThread.java:579)\n\tat org.apache.jorphan.collections.HashTree.traverseInto(HashTree.java:986)\n\tat org.apache.jorphan.collections.HashTree.traverse(HashTree.java:969)\n\tat org.apache.jmeter.threads.JMeterThread.threadFinished(JMeterThread.java:554)\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:328)\n\tat java.lang.Thread.run(Thread.java:680)\nCaused by: java.io.InterruptedIOException\n\tat org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:102)\n\tat org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)\n\tat org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81)\n\tat org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:91)\n\tat org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1329)\n\t... 10 more", "count": 0, "id": 150353, "time": "2011-10-08T15:18:30Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-08T15:18:30Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 27737\nJMeter log file", "is_private": false, "id": 150354, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2011-10-08T15:19:11Z", "bug_id": 51997, "creation_time": "2011-10-08T15:19:11Z", "attachment_id": 27737}, {"count": 2, "tags": [], "bug_id": 51997, "text": "Created attachment 27738\nThread Dump", "id": 150355, "attachment_id": 27738, "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-08T15:20:37Z", "time": "2011-10-08T15:20:37Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 51997, "is_private": false, "id": 150356, "attachment_id": null, "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-08T15:46:08Z", "time": "2011-10-08T15:46:08Z", "text": "(In reply to comment #0)\n> Created attachment 27736 [details]\n> Test Plan\n> \n> Hello,\n> Scenario:\n> - Using ActiveMQ 5.5.0\n> - Start test \n> - Let one sample run\n> - Call stop before it ends\n> \n> We have Thread ActiveMQ Tranport tcp://.... Running.\n> \n> \n> I think it's a bug in ActiveMQ but I open an issue here if anyone meets the\n> same issue.\n> Cause is due to an exception occuring on close:\n> 2011/10/08 17:16:59 ERROR - jmeter.protocol.jms.client.ReceiveSubscriber: Error\n> during close:  javax.jms.JMSException: java.io.InterruptedIOException\n>     at\n> org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:62)\n>     at\n> org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1342)\n>     at\n> org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:660)\n>     at org.apache.jmeter.protocol.jms.Utils.close(Utils.java:65)\n>     at\n> org.apache.jmeter.protocol.jms.client.ReceiveSubscriber.close(ReceiveSubscriber.java:236)\n>     at\n> org.apache.jmeter.protocol.jms.sampler.SubscriberSampler.threadFinished(SubscriberSampler.java:305)\n>     at\n> org.apache.jmeter.threads.JMeterThread$ThreadListenerTraverser.addNode(JMeterThread.java:579)\n>     at org.apache.jorphan.collections.HashTree.traverseInto(HashTree.java:986)\n>     at org.apache.jorphan.collections.HashTree.traverse(HashTree.java:969)\n>     at\n> org.apache.jmeter.threads.JMeterThread.threadFinished(JMeterThread.java:554)\n>     at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:328)\n>     at java.lang.Thread.run(Thread.java:680)\n> Caused by: java.io.InterruptedIOException\n>     at\n> org.apache.activemq.transport.WireFormatNegotiator.oneway(WireFormatNegotiator.java:102)\n>     at\n> org.apache.activemq.transport.MutexTransport.oneway(MutexTransport.java:40)\n>     at\n> org.apache.activemq.transport.ResponseCorrelator.asyncRequest(ResponseCorrelator.java:81)\n>     at\n> org.apache.activemq.transport.ResponseCorrelator.request(ResponseCorrelator.java:91)\n>     at\n> org.apache.activemq.ActiveMQConnection.doSyncSendPacket(ActiveMQConnection.java:1329)\n>     ... 10 more\n\n\nIt seems issue is due to the call of t.interrupt(); in StandardJMeterEngine#tellThreadsToStop.\n\nActiveMQ does not like it."}, {"count": 4, "tags": [], "text": "Issue opened at ActiveMQ:\nhttps://issues.apache.org/jira/browse/AMQ-3529", "is_private": false, "id": 150357, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2011-10-08T16:04:23Z", "bug_id": 51997, "creation_time": "2011-10-08T16:04:23Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": 27742, "text": "Created attachment 27742\nTest Plan using OpenJMS\n\nIssue seems to be in ActiveMQ as we don't have it with OpenJMS.\nTO run test add following libraries to jmeter lib folder: \n-spice-jndikit-1.2.jar\n-openjms-tunnel-0.7.7-beta-1.war\n-openjms-tools-0.7.7-beta-1.jar\n-openjms-net-0.7.7-beta-1.jar\n-openjms-common-0.7.7-beta-1.jar\n-openjms-0.7.7-beta-1.jar", "id": 150369, "time": "2011-10-08T20:18:56Z", "bug_id": 51997, "creation_time": "2011-10-08T20:18:56Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 51997, "text": "It also breaks Subscriber in AMQ.", "id": 150619, "time": "2011-10-15T14:32:33Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-15T14:32:33Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 51997, "attachment_id": null, "is_private": false, "id": 150683, "time": "2011-10-17T18:49:01Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-17T18:49:01Z", "text": "*** Bug 52034 has been marked as a duplicate of this bug. ***"}, {"count": 8, "tags": [], "creator": "slavko_h@yahoo.com", "attachment_id": null, "text": "*** Bug 52034 has been marked as a duplicate of this bug. ***", "id": 150720, "time": "2011-10-18T18:18:18Z", "bug_id": 51997, "creation_time": "2011-10-18T18:18:18Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 51997, "is_private": false, "text": "Bug fixed in activemq 5.6.0\n\nWaiting for release for test.", "id": 151034, "time": "2011-10-29T22:15:50Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-29T22:15:50Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 51997, "is_private": false, "id": 151051, "creation_time": "2011-10-30T10:28:07Z", "time": "2011-10-30T10:28:07Z", "creator": "p.mouawad@ubik-ingenierie.com", "text": "Tested with nightly build.\nBug still there.\n\nProvided JUnit Test case to reproduce issue.", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Issue fixed in upcomint ActiveMQ 5.6.0 version.\n\nIssue was not a JMeter one, closing as invalid.", "count": 11, "id": 151064, "time": "2011-10-31T04:39:20Z", "bug_id": 51997, "creation_time": "2011-10-31T04:39:20Z", "is_private": false}]