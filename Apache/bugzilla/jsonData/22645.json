[{"count": 0, "tags": [], "bug_id": 22645, "attachment_id": null, "text": "When the static including (<%@ include %>) JSP file has no specified character \nset for Response (<% page contentType %> but included file has, the including \nfile has treated as \"iso-8859-1\" encoding and the included file treated as \nspecified (as contentType) encoding\" \n\nBy the term \u201ctreated as XXX encoding\u201d, I meant the Reader for XML(JSP) \ndocument has XXX encoding.\n\nI think the XML(JSP) should be treated as specified by <?xml encoding=\u201dXXX\u201d>. \nAnd the XML, generated from JSP file which has no specific xml encoding \nequivalent information, should be treated as default encoding. \n(System.getProperty(\u201cfile.encoding\u201d)) like <?xml encoding=\u201d** value from \nSystem.getProperty(\u201cfile.encoding\u201d) **\u201d>.\n\nCf.) example source sinps\n--- including.jsp ---\n<%@ include file =\"included.jsp\" %>\nincluding : \ud55c\uae00\n--- \n--- included.jsp ---\n<%@ page contentType=\"text/html; charset=euc-kr\"%>\nincluded : \ud55c\uae00\n---\n\nCf.) possible patch to solve this problem\n---\nIndex: ParserController.java\n===================================================================\nRCS file: /home/cvspublic/jakarta-tomcat-\n4.0/jasper/src/share/org/apache/jasper/compiler/ParserController.java,v\nretrieving revision 1.18\ndiff -u -r1.18 ParserController.java\n--- ParserController.java\t21 May 2002 01:40:13 -0000\t1.18\n+++ ParserController.java\t22 Aug 2003 02:40:56 -0000\n@@ -122,9 +122,8 @@\n     /*\n      * The encoding of the \"top\" file. This encoding is used\n      * for included files by default.\n-     * Defaults to \"ISO-8859-1\" per JSP spec.\n      */\n-    private String topFileEncoding = \"ISO-8859-1\"; \n+    private String topFileEncoding = System.getProperty(\"file.encoding\"); \n     \n     /*\n      * The 'new' encoding required to read a page.\n\n--- \n\nI\u2019ve removed the comment which has \u201cper Spec\u201d. I\u2019ve reviewed the JSP 1.2 final \nspec. But it has nothing to do with the encoding of JSP file. But it only read \nthat the Response should have \u201ciso-8859-1\u201d as default.", "id": 43139, "time": "2003-08-22T02:46:38Z", "creator": "HeartBit@runeconsulting.com", "creation_time": "2003-08-22T02:46:38Z", "is_private": false}, {"count": 1, "tags": [], "creator": "HeartBit@runeconsulting.com", "attachment_id": null, "id": 43167, "time": "2003-08-22T14:18:33Z", "bug_id": 22645, "creation_time": "2003-08-22T14:18:33Z", "is_private": false, "text": "it seems like this but has something to do with bug #19617"}, {"count": 2, "tags": [], "bug_id": 22645, "attachment_id": null, "id": 44006, "time": "2003-09-10T23:03:20Z", "creator": "medthomas@ntlworld.com", "creation_time": "2003-09-10T23:03:20Z", "is_private": false, "text": "I am afraid you can come up against a bug in the spec. See the duplicate bug \nfor more info.\n\n*** This bug has been marked as a duplicate of 19245 ***"}]