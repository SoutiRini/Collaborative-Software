[{"count": 0, "tags": [], "bug_id": 39659, "text": "the build target src/targets/webapp-build.xml always copies the entire content/\nsubdirectory of all publications over to the build tree, even if those\npublications use an external content locating as specified by the <content-dir/>\ndirective in publication.xconf. this should be fixed, because it wastes space\nand confuses users as to where exactly their content is actually stored.\nright now, you end up with a \"dead\" copy under build which never changes after\nbuilding, and a \"live\" copy in your <content-dir/>.\n\ni could not find an example of parsing xml files from withing an ant target\nfile, but i guess it is possible. what we need is some sort of conditional: if\n<content-dir/> exists, don't attempt to copy the content/ directory to the build\ntree. additionally, if the src attribute of <content-dir/> does not exist, print\na warning.", "id": 89479, "time": "2006-05-25T13:03:43Z", "creator": "nettings@apache.org", "creation_time": "2006-05-25T13:03:43Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 39659, "attachment_id": null, "id": 90017, "time": "2006-06-09T16:14:39Z", "creator": "nettings@apache.org", "creation_time": "2006-06-09T16:14:39Z", "is_private": false, "text": "i object to changing the target milestone to after 1.4, for two reasons:\n\n* it's a huuuge waste of diskspace for large publications and needlessly\nincreases build time.\n* it can even lead to data loss when people get confused as to what their actual\n\"live\" dataset is.\n\nso unless this is extremely hard to fix or overly intrusive, please somebody try\nto solve it before 1.4."}, {"count": 2, "tags": [], "bug_id": 39659, "attachment_id": null, "id": 90090, "time": "2006-06-12T07:49:15Z", "creator": "andreas@apache.org", "creation_time": "2006-06-12T07:49:15Z", "is_private": false, "text": "A hint for fixing it: use the Ant xmlproperty task on publication.xconf.\nIt's not really nice to access config files directly from the build, though."}, {"count": 3, "tags": [], "bug_id": 39659, "text": "set dependency to bug 39466. it's not quite the same issue, but maybe we can do\naway with both issues by implementing a \"pubs.copy=false\" similar to\n\"modules.copy=false\" and get rid of the <content-dir> setting altogether.\n\n", "id": 92991, "time": "2006-09-04T17:18:09Z", "creator": "nettings@apache.org", "creation_time": "2006-09-04T17:18:09Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 39659, "attachment_id": null, "text": "This should be obsolete for the default publication, since the example content\nis imported in the build directory. Maybe we should use something similar for\nthe blog publication?", "id": 100740, "time": "2007-03-21T10:15:53Z", "creator": "andreas@apache.org", "creation_time": "2007-03-21T10:15:53Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 39659, "attachment_id": null, "text": "(In reply to comment #4)\n> This should be obsolete for the default publication, since the example content\n> is imported in the build directory. Maybe we should use something similar for\n> the blog publication?\n\ni don't understand. the issue is about publications that use a <content-dir/>\noutside the standard location in build/... the default publication does not do that.", "id": 101336, "time": "2007-04-02T11:30:49Z", "creator": "nettings@apache.org", "creation_time": "2007-04-02T11:30:49Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 39659, "attachment_id": null, "text": "(In reply to comment #5)\n> (In reply to comment #4)\n> > This should be obsolete for the default publication, since the example content\n> > is imported in the build directory. Maybe we should use something similar for\n> > the blog publication?\n> \n> i don't understand. the issue is about publications that use a <content-dir/>\n> outside the standard location in build/... the default publication does not do\nthat.\n\nThere is no content directory for the default publication in the source tree, so\nnothing is copied.\n", "id": 102068, "time": "2007-04-23T02:20:08Z", "creator": "andreas@apache.org", "creation_time": "2007-04-23T02:20:08Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 39659, "attachment_id": null, "id": 102099, "time": "2007-04-23T05:37:49Z", "creator": "nettings@apache.org", "creation_time": "2007-04-23T05:37:49Z", "is_private": false, "text": "yes, but that's not the point. my point is that if a publication uses\n<content-dir/> to specify a custom content location, the build process still\ncopies the entire content/ directory of this publication into the build tree,\neven though it is never used after that.\nthis has no direct functional consequences, except that users might get confused\nabout which tree to back up and lose data..."}, {"count": 8, "tags": [], "bug_id": 39659, "text": "(In reply to comment #7)\n> yes, but that's not the point. my point is that if a publication uses\n> <content-dir/> to specify a custom content location, the build process still\n> copies the entire content/ directory of this publication into the build tree,\n> even though it is never used after that.\n\nIIUC the source tree of a publication usually doesn't contain a content/\ndirectory, does it? So there shouldn't be anything to copy ...", "id": 102103, "time": "2007-04-23T06:05:34Z", "creator": "andreas@apache.org", "creation_time": "2007-04-23T06:05:34Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 39659, "text": "well. before the <content-dir/> setting was introduced, it was customary to have\none's custom publications in some directory with a complete publication\n(including content/) somewhere on the disk, and to add that path to\npub-root-dirs in local.build.properties.\ni did not change that when <content-dir/> came up, so yes, i still have a\ncontent tree in my publication source directory. am i the only one?", "id": 102104, "time": "2007-04-23T06:18:47Z", "creator": "nettings@apache.org", "creation_time": "2007-04-23T06:18:47Z", "is_private": false, "attachment_id": null}]