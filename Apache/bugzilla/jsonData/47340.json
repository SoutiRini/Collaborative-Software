[{"count": 0, "tags": [], "bug_id": 47340, "text": "Per the block comment before the body of function uldap_cache_comparedn(), a lock must be held already:\n\n/* ...\n   The lock for the ldap cache should already be acquired */\nstatic int uldap_cache_comparedn() ...)\n\nBut when it is called from authz_ldap_check_user_access(), no lock is held before calling uldap_cache_comparedn(). It is a bug, or the comment is outdated?\n\n\nDetected by an automatic tool iComment.", "id": 127773, "attachment_id": null, "creator": "tammy000@gmail.com", "creation_time": "2009-06-09T15:16:52Z", "time": "2009-06-09T15:16:52Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 47340, "text": "There only seems to be one cache lock, and this function acquires and releases it internally several times, so it certainly seems unnecessary for the lock to already be held before calling it.\n\nI was hoping to find a revision in which this internal locking was added without removing that comment, but it appears to have been this way since before the file was added to subversion (http://svn.apache.org/viewvc?view=rev&revision=91504).\n\nStill, I think the comment is wrong.", "id": 127789, "time": "2009-06-10T06:01:48Z", "creator": "poirier@pobox.com", "creation_time": "2009-06-10T06:01:48Z", "is_private": false, "attachment_id": null}]