[{"count": 0, "tags": [], "bug_id": 41834, "attachment_id": null, "is_private": false, "id": 100349, "time": "2007-03-13T13:48:04Z", "creator": "troy@osc.edu", "creation_time": "2007-03-13T13:48:04Z", "text": "I've run into a couple oddities related to how WebdavResource.copyMethod()\nhandles depth.\n\nFirst, I've found that a WebdavResource's copyMethod(String) always seems to\nsend a request with a header of \"Depth:  Infinity\", even if the WebdavResource\nis not a collection and its default depth is set to 0.  This seems a bit silly,\nbut it's not a bug per se.\n\nSecond, the header \"Depth:  Infinity\" appears to be problematic to some WebDAV\nservers, in particular ones based on the Python twisted.web2.dav code.  Twisted\nWebDAV servers will respond to any COPY request with this header set with an\nHTTP 400 status.  Changing the header to \"Depth:  infinity\" using the attached\npatch resolves the problem.  While it is true that servers should be somewhat\nforgiving of input, my reading of section 9.2 of RFC2518 is that it does not\n*require* the server to be case-insensitive of Depth header values."}, {"count": 1, "tags": [], "bug_id": 41834, "attachment_id": 19704, "is_private": false, "id": 100351, "time": "2007-03-13T13:53:00Z", "creator": "troy@osc.edu", "creation_time": "2007-03-13T13:53:00Z", "text": "Created attachment 19704\nA one-line patch to fix potential RFC2519 non-compliance WRT COPY depth values\n\nAs I said initially, the Twisted WebDAV server code should probably be a bit\nmore forgiving than it currently is, but there's nothing I can find in RFC2518\nthat requires it.  Hence, this patch."}, {"count": 2, "tags": [], "creator": "antoine@apache.org", "attachment_id": null, "text": "Patch committed, thanks.", "id": 100943, "time": "2007-03-25T18:47:31Z", "bug_id": 41834, "creation_time": "2007-03-25T18:47:31Z", "is_private": false}]