[{"count": 0, "tags": [], "creator": "matthias@grumet.at", "is_private": false, "id": 148993, "creation_time": "2011-09-02T15:15:45Z", "time": "2011-09-02T15:15:45Z", "bug_id": 51762, "text": "the following simple target seems to hit the server twice. i have logged the http traffic with wireshark and it confirms that the http-call is sent (and received) twice.\n\n<project name=\"Test\" default=\"recreate-via-http\" >\n\n    <target name=\"recreate-via-http\">\n        <loadresource property=\"result\" >\n            <url url=\"http://someserver/somecall.php\"  />           \n        </loadresource>  \n        <echo>${result}</echo>\n    </target>\n\n</project>", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "matthias@grumet.at", "is_private": false, "id": 148994, "time": "2011-09-02T15:41:34Z", "bug_id": 51762, "creation_time": "2011-09-02T15:41:34Z", "tags": [], "text": "as a user on stackoverflow points out, it seems that the problem is getting the length of the content first and then getting the actual content, resulting in two http calls.\n\nsee:\nhttp://stackoverflow.com/questions/7284649/ant-loadresource-task-called-twice"}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "The analysis is correct.  For \"local\" resources the querying the size first is a nice optimization.  Also, we don't set properties for resources of length 0 and don't need to read the resource in order to find out it is empty that way.\n\nThere is no easy way for Ant to know whether a resource is a remote resource, it may have been wrapped in some sort of decorator like a gzipresource wrapped around an urlresource.\n\nThe best we can probably do is adding an option to disable the size check.\n\nWRT the stackoverflow comments: The call to close() inside of the getSize method is strictly necessary as there will be many cases where only the size of a resource is asked for without actually reading the stream (just think of the size selector).", "id": 151010, "time": "2011-10-28T14:52:50Z", "bug_id": 51762, "creation_time": "2011-10-28T14:52:50Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 51762, "attachment_id": null, "id": 164188, "time": "2012-12-20T22:11:42Z", "creator": "ryan@stillnet.org", "creation_time": "2012-12-20T22:11:42Z", "is_private": false, "text": "I'd love to see this fixed. I am trying to switch to ant for our deployment, but we reinitialize our web apps via a special URL. I need to call this after deployment. Calling it twice adds a delay and impacts the users.\n\nI don't understand the comments about why it's necessary to do it this way. If I call GET or wget on the command line those programs don't request my URL twice."}]