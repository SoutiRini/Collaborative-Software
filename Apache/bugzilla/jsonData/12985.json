[{"count": 0, "tags": [], "creator": "steve5m@yahoo.com", "text": "There are two problems. The first is the same bug that I reported for\nTomcat 4.0.4 (9979, and this bug is still Open).\nThe second is a related issue that used to work ok in Tomcat 4.0.4.\n\nI will repeat Part 1 of the problem:\nFollowing is part of a web.xml file to talk about.\n\n  <servlet>\n      <servlet-name>foo_jsp</servlet-name>\n      <jsp-file>/foo.jsp</jsp-file>\n      <load-on-startup></load-on-startup>\n      <!-- Note there is no integer inside the tag above. -->\n  </servlet>\n\nThe bug is that in this particular case - where there is no integer\ninside the load-on-startup tag, the load-on-startup\nhas no effect. (Note I think this actually works for Servlets, but I'm\ntalking about JSP's.) The Servlet 2.3 spec says that if you don't specify\na number, then all servlets/jsps with a number will get loaded first\n(in their proper numbered order) and then everything else (with load-on-\nstartup) will be preloaded in no particular order.\n\nThis bug has an easy workaround, which is to always put a number,\nbut it's annoying if you have a lot of JSP's that you want to preload\nand you have to add a number for all when you really don't care about\nthe order.\n\nPart 2 of the problem is new in Tomcat 4.1.12 (or maybe it existed in 4.1.10 \nalso).\nFor those jsp's that have a numbered load-on-startup, their jspInit method\nis called -- but then when the page is hit for the first time, their jspInit\nmethod is called again! This should not happen.\n\nI'm using JDK 1.4.1 on Windows 2000, but I would imagine this bug exists on \nall platforms.\n\nI will try to attach my test war file to this bug (look for it).\nAmong other things it has .../test_app/preload1.jsp and preload2.jsp,\neach of which print out a line to System.out from their jspInit methods\nto help see what's happening. Both jsp's are requested to load-on-startup\nin the web.xml file, but #1 has no order, and #2 does have an order specified.\n\nthanks.", "id": 23342, "time": "2002-09-25T04:24:57Z", "bug_id": 12985, "creation_time": "2002-09-25T04:24:57Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 12985, "attachment_id": 3210, "is_private": false, "id": 23343, "time": "2002-09-25T04:26:03Z", "creator": "steve5m@yahoo.com", "creation_time": "2002-09-25T04:26:03Z", "text": "Created attachment 3210\nThe war file that I was testing with."}, {"count": 2, "tags": [], "creator": "steve5m@yahoo.com", "text": "I forgot to mention that for preload2.jsp - upon startup, the message it \nprints goes to the log file, but then the first time someone hits the page \n(when jspInit is called again) the message goes to the startup window.\nThis also, is weird.\n", "id": 23344, "time": "2002-09-25T04:37:15Z", "bug_id": 12985, "creation_time": "2002-09-25T04:37:15Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 12985, "attachment_id": null, "is_private": false, "id": 23471, "time": "2002-09-26T19:01:09Z", "creator": "jakarta@trollingers.com", "creation_time": "2002-09-26T19:01:09Z", "text": "The third thing you mentioned is now fixed.  There is a attribute on the \ncontext called swallowOutput that is false by default and it will redirect \nSystem.out to a log.  This was not working for the init method of a servlet and \nwas fixed this morning.\n\nI will look into the other 2 things now as I have confirmed they exist."}, {"count": 4, "tags": [], "creator": "jakarta@trollingers.com", "text": "Created attachment 3248\no.a.c.c.StandardWrapper.java - fix for empty <loadonstartup>", "id": 23473, "time": "2002-09-26T19:14:18Z", "bug_id": 12985, "creation_time": "2002-09-26T19:14:18Z", "is_private": false, "attachment_id": 3248}, {"count": 5, "attachment_id": null, "bug_id": 12985, "is_private": false, "id": 23502, "time": "2002-09-27T07:14:21Z", "creator": "remm@apache.org", "creation_time": "2002-09-27T07:14:21Z", "tags": [], "text": "The fix will be in Tomcat 4.1.13."}, {"count": 6, "tags": [], "bug_id": 12985, "is_private": false, "text": "There is still a bug where the jspInit() method gets called twice.\n\n", "id": 23520, "time": "2002-09-27T10:51:59Z", "creator": "jakarta@trollingers.com", "creation_time": "2002-09-27T10:51:59Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "markt@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of 15084 ***", "id": 50851, "time": "2004-01-20T22:44:33Z", "bug_id": 12985, "creation_time": "2004-01-20T22:44:33Z", "is_private": false, "attachment_id": null}]