[{"count": 0, "tags": [], "bug_id": 50835, "attachment_id": null, "text": "26 f\u00e9vr. 2011 15:43:54 org.apache.catalina.connector.CoyoteAdapter service\n.lang.NullPointerException\n\tat org.apache.catalina.valves.AccessLogValve.getTimeZone(AccessLogValve.java:764)\n\tat org.apache.catalina.valves.AccessLogValve.access$800(AccessLogValve.java:122)\n\tat org.GRAVE: Une exception ou une erreur s'est produite dans le conteneur durant le traitement de la requ\u00eate\njavaapache.catalina.valves.AccessLogValve$DateAndTimeElement.addElement(AccessLogValve.java:1008)\n\tat org.apache.catalina.valves.AccessLogValve.log(AccessLogValve.java:575)\n\tat org.apache.catalina.core.ContainerBase.logAccess(ContainerBase.java:1214)\n\tat org.apache.catalina.connector.CoyoteAdapter.postParseRequest(CoyoteAdapter.java:562)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:296)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n\tat java.lang.Thread.run(Thread.java:680)\n\n\nserver.xml change:\n   <Context path=\"/aa\" docBase=\"aa\" debug=\"true\" reloadable=\"true\" crossContext=\"true\" >\n            <Valve className=\"org.apache.catalina.valves.AccessLogValve\"\n         prefix=\"localhost_access_aa1_log.\" suffix=\".txt\"\n         pattern=\"common\"/>\n         </Context>", "id": 144573, "time": "2011-02-26T10:03:36Z", "creator": "based@free.fr", "creation_time": "2011-02-26T10:03:36Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 50835, "attachment_id": null, "text": "I cannot reproduce it.\n\nIn what circumstances this was observed? Are there other errors and warnings or interesting messages in the logs? Did tomcat start successfully?\n\n\n\nFrom the source, it can happen only of AccessLogValve#timezone is null, but that field is initialized in AccessLogValve#start().\n\nIs it possible that the AccessLogValve#log() call happened before #start() was called? Maybe context itself failed to start and thus initialization did not complete?\n\n(BTW, there should be at least one WARNING there, because there is no \"debug\" attribute in a Context.)", "id": 144574, "time": "2011-02-26T11:04:19Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2011-02-26T11:04:19Z", "is_private": false}, {"count": 2, "tags": [], "creator": "based@free.fr", "attachment_id": null, "id": 144577, "time": "2011-02-26T11:41:40Z", "bug_id": 50835, "creation_time": "2011-02-26T11:41:40Z", "is_private": false, "text": "I cannot reproduce it.\n\nIn what circumstances this was observed? Are there other errors and warnings or\ninteresting messages in the logs? Did tomcat start successfully?\n\n> I tried to deployed a new apllication with H2 database inside.\nI had problem with \nreloadable=\"true\"and \na catalina defined context for the same application:\n\naa.xml\n<Context path=\"aa\" reloadable=\"true\" docBase=\"M/webapp\" workDir=\"M/work\" >\n\t<Logger className=\"org.apache.catalina.logger.SystemOutLogger\" verbosity=\"4\" timestamp=\"true\"/>\n\t<Loader className=\"org.apache.catalina.loader.DevLoader\" reloadable=\"true\" debug=\"1\" useSystemClassLoaderAsParent=\"false\" />\n</Context>\n\n\nFrom the source, it can happen only of AccessLogValve#timezone is null, but\nthat field is initialized in AccessLogValve#start().\n\nIs it possible that the AccessLogValve#log() call happened before #start() was\ncalled? Maybe context itself failed to start and thus initialization did not\ncomplete?\n\n\n\n(BTW, there should be at least one WARNING there, because there is no \"debug\"\nattribute in a Context.)\n\n> Sorry, it was a configuration issue with the aa.xml in catalina/localhost folder, it is now working as expected.\n\nYou can close the issue, if you want."}, {"count": 3, "tags": [], "creator": "chuck.caldarale@unisys.com", "attachment_id": null, "id": 144578, "time": "2011-02-26T11:48:41Z", "bug_id": 50835, "creation_time": "2011-02-26T11:48:41Z", "is_private": false, "text": "(In reply to comment #2)\n> aa.xml\n> <Context path=\"aa\" reloadable=\"true\" docBase=\"M/webapp\" workDir=\"M/work\" >\n>     <Logger className=\"org.apache.catalina.logger.SystemOutLogger\"\n> verbosity=\"4\" timestamp=\"true\"/>\n>     <Loader className=\"org.apache.catalina.loader.DevLoader\" reloadable=\"true\"\n> debug=\"1\" useSystemClassLoaderAsParent=\"false\" />\n> </Context>\n\nYou really need to spend some time with the current Tomcat documentation.  For example, the <Logger> element has not been used in many years.  You cannot blindly copy configuration settings from older versions of Tomcat into a newer one and expect anything close to reliable results."}]