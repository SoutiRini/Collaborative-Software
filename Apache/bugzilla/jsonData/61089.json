[{"count": 0, "tags": [], "text": "When using protocol Http11NioProtocol with port 20443 and a keystore PKCS12, tomcat looks to be running at the beginning but after some seconds I can see the processor working too hard, it keeps like that until I shut down tomcat.\n\nIf I wait more like that, I can see the next exception stacktrace being repeated indefinitely in catalina.out:\n\n12-May-2017 11:14:22.153 SEVERE [https-jsse-nio-20443-exec-27] org.apache.coyote.AbstractProtocol$ConnectionHandler.process Error reading request, ignored\n java.lang.NullPointerException\n        at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.getSslSupport(NioEndpoint.java:1349)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:775)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1425)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at org.apache.tomcat.util.net.AbstractEndpoint.processSocket(AbstractEndpoint.java:830)\n        at org.apache.tomcat.util.net.NioEndpoint$Poller.add(NioEndpoint.java:669)\n        at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.registerReadInterest(NioEndpoint.java:1264)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1433)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.lang.Thread.run(Thread.java:745)\n\nIt fixes if I change to port 8443 or if I change to use protocol Http11Nio2Protocol", "attachment_id": null, "id": 198771, "creator": "hiram.esparza@gmail.com", "time": "2017-05-12T16:36:41Z", "bug_id": 61089, "creation_time": "2017-05-12T16:36:41Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 198774, "time": "2017-05-13T13:37:02Z", "bug_id": 61089, "creation_time": "2017-05-13T13:37:02Z", "is_private": false, "text": "Please try a reasonably up to date version before reporting an issue. This should be fixed in Tomcat 8.5.6+.\n\nI don't know what lead to the theory on the port number, but this is not possible, so something was tested incorrectly. Using NIO2 is a workaround however, as its SNI processing did not have the bug.\n\n*** This bug has been marked as a duplicate of bug 60030 ***"}, {"count": 2, "attachment_id": null, "creator": "hiram.esparza@gmail.com", "text": "(In reply to Remy Maucherat from comment #1)\n> Please try a reasonably up to date version before reporting an issue. This\n> should be fixed in Tomcat 8.5.6+.\n> \n> I don't know what lead to the theory on the port number, but this is not\n> possible, so something was tested incorrectly. Using NIO2 is a workaround\n> however, as its SNI processing did not have the bug.\n> \n> *** This bug has been marked as a duplicate of bug 60030 ***\n\nThank you very much for your quick response.\n\nI'm sorry I reported this in an older version of Tomcat but that's what I have to use because of the system administrators.\n\nThis information helped me a lot.\n\nHave a good day.", "id": 198776, "time": "2017-05-13T14:16:10Z", "bug_id": 61089, "creation_time": "2017-05-13T14:16:10Z", "tags": [], "is_private": false}]