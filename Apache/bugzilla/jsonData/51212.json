[{"count": 0, "tags": [], "bug_id": 51212, "attachment_id": 27017, "id": 146385, "time": "2011-05-17T16:25:52Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-05-17T16:25:52Z", "is_private": false, "text": "Created attachment 27017\nPatch with Atomic approach\n\nHello,\nI don't know if it is volontary but I think QueryStats fields should be Atomic because they are accessed by multiple threads at same time.\nI made a Load test with heavy load and collected results of SlowQueryReport and I get Sql queries with 0 as number of executions which is wrong as they have been executed at least once.\n\nBy the way I don't know which approach will perform better:\n- synchronize add/failure\n- Use Atomic\nMaybe you did this for performance reasons.\n\nRegards\nPhilippe Mouawad\nhttp://www.ubik-ingenierie.com"}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Created attachment 27024\nFix to synchro issue\n\nPrevious patch was bugged", "id": 146424, "time": "2011-05-18T16:31:05Z", "bug_id": 51212, "creation_time": "2011-05-18T16:31:05Z", "is_private": false, "attachment_id": 27024}, {"count": 2, "tags": [], "text": "Note that there is still an issue where nbrInvocations is equals to 0.", "attachment_id": null, "id": 146426, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2011-05-18T16:35:14Z", "bug_id": 51212, "creation_time": "2011-05-18T16:35:14Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 51212, "attachment_id": null, "text": "Fixed in r1124352\nno need for atomic, it's a stats collector.", "id": 146429, "time": "2011-05-18T17:46:16Z", "creator": "fhanik@apache.org", "creation_time": "2011-05-18T17:46:16Z", "is_private": false}]