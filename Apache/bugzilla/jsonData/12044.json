[{"count": 0, "tags": [], "bug_id": 12044, "is_private": false, "text": "I tried to use the 'addproperty' attribute to capture user input from \nthe 'input' task. The scope of the assigned property is limited to the \ncontaining target task.\n\nThe build file that demonstrates the problem:\n---------------------------------------------\n\n<?xml version=\"1.0\"?>\n\n<project name=\"Demo input addproperty bug\" default=\"init\" basedir=\".\" >\n\n<target name=\"init\" >\n   <property environment=\"env\" />\n\n   <antcall target=\"_get.input.from_cmdline\" />\n   <echo>\n     In init (after _get.input.from_cmdline)...\n     get.input is ${get.input}\n     MYVAR is ${MYVAR}\n   </echo>\n\n   <antcall target=\"_get.input.from_env\" />\n   <echo>\n     In init (after _get.input.from_env)...\n     get.input is ${get.input}\n     MYVAR is ${MYVAR}\n   </echo>\n\n</target>\n\n<target name=\"_get.input.from_cmdline\" unless=\"env.MYVAR\" >\n   <input message=\"Enter value:\" addproperty=\"get.input\" />\n   <property name=\"MYVAR\" value=\"${get.input}\" />\n   <echo>\n     In _get.input.from_cmdline...\n     get.input is ${get.input}\n     MYVAR is ${MYVAR}\n   </echo>\n</target>\n\n<target name=\"_get.input.from_env\" if=\"env.MYVAR\" >\n   <property name=\"MYVAR\" value=\"${env.MYVAR}\" />\n   <echo>\n     In _get.input.from_env...\n     get.input is ${get.input}\n     MYVAR is ${MYVAR}\n   </echo>\n</target>\n\n</project>\n\nThe resulting output:\n---------------------\n\ninit:\n\n_get.input.from_cmdline:\n    [input] Enter value:\nfoobar\n     [echo] \n     [echo]      In _get.input.from_cmdline...\n     [echo]      get.input is foobar\n     [echo]      MYVAR is foobar\n     [echo]    \n     [echo] \n     [echo]      In init (after _get.input.from_cmdline)...\n     [echo]      get.input is ${get.input}\n     [echo]      MYVAR is ${MYVAR}\n     [echo]    \n\n_get.input.from_env:\n     [echo] \n     [echo]      In init (after _get.input.from_env)...\n     [echo]      get.input is ${get.input}\n     [echo]      MYVAR is ${MYVAR}\n     [echo]    \n\nBUILD SUCCESSFUL\nTotal time: 3 seconds\n\n------- Ant diagnostics report -------\nApache Ant version 1.5 compiled on July 9 2002\n\n-------------------------------------------\n Implementation Version (JDK1.2+ only)\n-------------------------------------------\ncore tasks     : 1.5\noptional tasks : 1.5\n\n-------------------------------------------\n ANT_HOME/lib jar listing\n-------------------------------------------\nant.jar (716139 bytes)\noptional.jar (653661 bytes)\nxercesImpl.jar (933730 bytes)\nxml-apis.jar (108484 bytes)\njakarta-oro-2.0.6.jar (65368 bytes)\n\n-------------------------------------------\n Tasks availability\n-------------------------------------------\ncom/oroinc/net/SocketClient\n\n\nRegards,\nMike", "id": 21741, "time": "2002-08-26T16:04:46Z", "creator": "mcsherry@qualcomm.com", "creation_time": "2002-08-26T16:04:46Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "This is because you are running <antcall>.\n\nAll properties defined in an ant-called target are not exposed back to the\ncaller, because a new containing Project is created.\n\nYou can use the proposed RunTarget patch in Bugzilla instead, or inline the input.", "is_private": false, "id": 21744, "creator": "nicolaken@apache.org", "time": "2002-08-26T16:18:29Z", "bug_id": 12044, "creation_time": "2002-08-26T16:18:29Z", "attachment_id": null}]