[{"count": 0, "text": "Created attachment 23908\nZipped Eclipse 3.4 projects\n\nI tried to get the JSF sample application bookstore6 from the SUN Java EE 5 Tutorial running.\n\nEnvironment:  \nTomcat Version : 6.0.20\nEclipse Version: 3.4\nJava JDK Version: jdk1.5.0_17\n\nSee: http://java.sun.com/javaee/5/docs/tutorial/doc/bnara.html\n\nI added jsf-api.jar, jsf-impl.jar and jstl-1.1.2.jar to Tomcat's lib directory, then created the project (bookstoreJSF and utility project bookstore)and populated it with the sample source files from the Java EE 5 tutorial.\n\nI created a Tomcat Server in the Eclipse workspace and added the project to the Tomcat Server.\n\nThe server and the web application started fine.\n\nWhen I directed my browser (Firefox 3) at the starting page of the project (http://localhost:8080/bookstoreJSF), I got a Jasper Exception:\n\norg.apache.jasper.JasperException: /chooselocale.jsp(45,12) Unknown attribute type (void) for attribute actionListener.\n\tat org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)\n\tat org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)\n\tat org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:236)\n\tat org.apache.jasper.compiler.Validator$ValidateVisitor.checkXmlAttributes(Validator.java:1099)\n\tat org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:821)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1530)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2361)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2411)\n\tat org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:840)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1530)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2361)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2411)\n\tat org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:840)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1530)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2361)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2411)\n\tat org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:840)\n\tat org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1530)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2361)\n\tat org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2411)\n\tat org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2417)\n\tat org.apache.jasper.compiler.Node$Root.accept(Node.java:495)\n\tat org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2361)\n\tat org.apache.jasper.compiler.Validator.validateExDirectives(Validator.java:1736)\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:183)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:332)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:312)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:299)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:586)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\n\tat com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:410)\n\tat com.sun.faces.application.ViewHandlerImpl.executePageToBuildView(ViewHandlerImpl.java:468)\n\tat com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:140)\n\tat com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:110)\n\tat com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)\n\tat com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)\n\tat javax.faces.webapp.FacesServlet.service(FacesServlet.java:266)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\n\tat org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:706)\n\tat org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:677)\n\tat org.apache.jsp.index_jsp._jspService(index_jsp.java:91)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat java.lang.Thread.run(Thread.java:595)\n\n\nThe problem comes from an actionListener defined in the taglib (see bookstore.tld in the attached project bookstoreJSF) with a method-signature using 'void' as return type.\n\nI found no way to work around the problem. Then I looked up the source code for org.apache.jasper.compiler.Validator.\n\nFrom what I understand, the (inner class) method ValidateVisitor.checkXmlAttributes checks the deferred-method's return type from the taglib. The call to JspUtil.toClass then fires a ClassNotFoundException for the method's return type 'void'. This triggers the JasperException 'invalid attribute type' that I see in the Tomcat console.\n\nThe test for a 'deferred-value' type is perfectly correct, but the return type for a deferred-method should be legally specifiable as void.", "bug_id": 47453, "is_private": false, "id": 128421, "time": "2009-06-30T01:46:56Z", "creator": "W.Rupprath@fsp-gmbh.com", "creation_time": "2009-06-30T01:46:56Z", "tags": [], "attachment_id": 23908}, {"count": 1, "tags": [], "bug_id": 47453, "attachment_id": null, "id": 131733, "time": "2009-11-05T09:36:51Z", "creator": "funkman@apache.org", "creation_time": "2009-11-05T09:36:51Z", "is_private": false, "text": "Please see if the attached patch fixes the issue\n\nIndex: java/org/apache/jasper/compiler/JspUtil.java\n===================================================================\n--- java/org/apache/jasper/compiler/JspUtil.java        (revision 833094)\n+++ java/org/apache/jasper/compiler/JspUtil.java        (working copy)\n@@ -338,6 +338,8 @@\n             c = float.class;\n         else if (\"double\".equals(type))\n             c = double.class;\n+        else if (\"void\".equals(type))\n+            c = void.class;\n         else if (type.indexOf('[') < 0)\n             c = loader.loadClass(type);"}, {"count": 2, "tags": [], "bug_id": 47453, "attachment_id": null, "text": "updating status to NEEDINFO based on last comment", "id": 131737, "time": "2009-11-05T10:29:54Z", "creator": "funkman@apache.org", "creation_time": "2009-11-05T10:29:54Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 47453, "is_private": false, "id": 132558, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2009-12-01T14:54:59Z", "time": "2009-12-01T14:54:59Z", "text": "I can confirm that Tim's proposed patch does indeed fix the compilation problem.\n\nI have applied the patch to trunk and proposed it for 6.0.x"}, {"count": 4, "tags": [], "bug_id": 47453, "text": "Patch applied to 6.0.x and will be included in 6.0.21 onwards.", "id": 132960, "time": "2009-12-19T15:57:22Z", "creator": "markt@apache.org", "creation_time": "2009-12-19T15:57:22Z", "is_private": false, "attachment_id": null}]