[{"attachment_id": null, "tags": [], "bug_id": 45795, "is_private": false, "count": 0, "id": 120566, "time": "2008-09-12T11:42:58Z", "creator": "langel@redhat.com", "creation_time": "2008-09-12T11:42:58Z", "text": "Test case:\nhttp://www.murrayc.com/temp/docbook_fop_test.tar.gz\n\n[murrayc@localhost docbook_fop_test]$ ls\nflumotion.xml  test.png\n[murrayc@localhost docbook_fop_test]$\n[murrayc@localhost docbook_fop_test]$ xsltproc -o flumotion.fo -xinclude\n--catalogs http://docbook.sourceforge.net/release/xsl/current/fo/docbook.xsl\nflumotion.xml\nVariable $SGML_CATALOG_FILES not set\nMaking portrait pages on USletter paper (8.5inx11in)\n\n[murrayc@localhost docbook_fop_test]$ \n[murrayc@localhost docbook_fop_test]$ fop -fo flumotion.fo -pdf flumotion.pdf\n\nSep 10, 2008 12:33:49 PM org.apache.fop.fonts.FontInfo notifyFontReplacement\nWARNING: Font 'Symbol,normal,700' not found. Substituting with\n'Symbol,normal,400'.\nSep 10, 2008 12:33:49 PM org.apache.fop.fonts.FontInfo notifyFontReplacement\nWARNING: Font 'ZapfDingbats,normal,700' not found. Substituting with\n'ZapfDingbats,normal,400'.\nSep 10, 2008 12:33:50 PM org.apache.fop.hyphenation.Hyphenator\ngetHyphenationTree\nSEVERE: Couldn't find hyphenation pattern en\nSep 10, 2008 12:33:52 PM org.apache.fop.area.RenderPagesModel addPage\nSEVERE: Error while rendering page 3\njava.lang.UnsupportedOperationException: Unsupported DataBuffer type:\njava.awt.image.DataBufferUShort\n at\norg.apache.fop.pdf.AlphaRasterImage.outputContents(AlphaRasterImage.java:169)\n at\norg.apache.fop.pdf.PDFImageXObject.outputRawStreamData(PDFImageXObject.java:145)\n at\norg.apache.fop.pdf.AbstractPDFStream.encodeAndWriteStream(AbstractPDFStream.java:155)\n at org.apache.fop.pdf.AbstractPDFStream.output(AbstractPDFStream.java:199)\n at org.apache.fop.pdf.PDFImageXObject.output(PDFImageXObject.java:65)\n at org.apache.fop.pdf.PDFDocument.output(PDFDocument.java:937)\n at org.apache.fop.render.pdf.PDFRenderer.putImage(PDFRenderer.java:1767)\n at org.apache.fop.render.pdf.PDFRenderer.renderImage(PDFRenderer.java:1679)\n at\norg.apache.fop.render.AbstractRenderer.renderViewport(AbstractRenderer.java:734)\n at\norg.apache.fop.render.AbstractPathOrientedRenderer.renderViewport(AbstractPathOrientedRenderer.java:557)\n at\norg.apache.fop.render.AbstractRenderer.renderInlineArea(AbstractRenderer.java:617)\n at\norg.apache.fop.render.pdf.PDFRenderer.renderInlineArea(PDFRenderer.java:1345)\n at\norg.apache.fop.render.AbstractRenderer.renderLineArea(AbstractRenderer.java:592)\n at org.apache.fop.render.pdf.PDFRenderer.renderLineArea(PDFRenderer.java:1336)\n at\norg.apache.fop.render.AbstractRenderer.renderBlocks(AbstractRenderer.java:529)\n at\norg.apache.fop.render.AbstractRenderer.renderBlock(AbstractRenderer.java:564)\n at org.apache.fop.render.pdf.PDFRenderer.renderBlock(PDFRenderer.java:1329)\n at\norg.apache.fop.render.AbstractRenderer.renderBlocks(AbstractRenderer.java:519)\n at\norg.apache.fop.render.AbstractRenderer.renderBlock(AbstractRenderer.java:564)\n at org.apache.fop.render.pdf.PDFRenderer.renderBlock(PDFRenderer.java:1329)\n at\norg.apache.fop.render.AbstractRenderer.renderBlocks(AbstractRenderer.java:519)\n at\norg.apache.fop.render.AbstractRenderer.renderBlock(AbstractRenderer.java:564)\n at org.apache.fop.render.pdf.PDFRenderer.renderBlock(PDFRenderer.java:1329)\n at\norg.apache.fop.render.AbstractRenderer.renderBlocks(AbstractRenderer.java:519)\n at\norg.apache.fop.render.AbstractRenderer.renderBlock(AbstractRenderer.java:564)\n at org.apache.fop.render.pdf.PDFRenderer.renderBlock(PDFRenderer.java:1329)\n at\norg.apache.fop.render.AbstractRenderer.renderBlocks(AbstractRenderer.java:519)\n at\norg.apache.fop.render.AbstractRenderer.renderFlow(AbstractRenderer.java:424)\n at\norg.apache.fop.render.AbstractRenderer.renderMainReference(AbstractRenderer.java:403)\n at\norg.apache.fop.render.AbstractRenderer.renderBodyRegion(AbstractRenderer.java:337)\n at\norg.apache.fop.render.AbstractRenderer.renderRegionViewport(AbstractRenderer.java:282)\n at\norg.apache.fop.render.AbstractRenderer.renderPageAreas(AbstractRenderer.java:255)\n at\norg.apache.fop.render.AbstractRenderer.renderPage(AbstractRenderer.java:229)\n at org.apache.fop.render.pdf.PDFRenderer.renderPage(PDFRenderer.java:801)\n at org.apache.fop.area.RenderPagesModel.addPage(RenderPagesModel.java:113)\n at\norg.apache.fop.layoutmgr.AbstractPageSequenceLayoutManager.finishPage(AbstractPageSequenceLayoutManager.java:312)\n at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager.finishPage(PageSequenceLayoutManager.java:167)\n at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:108)\n at\norg.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:234)\n at org.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:123)\n at\norg.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:340)\n at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:169)\n at\ncom.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.endElement(Unknown\nSource)\n at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown\nSource)\n at\ncom.sun.org.apache.xerces.internal.xinclude.XIncludeHandler.endElement(Unknown\nSource)\n at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown\nSource)\n at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown\nSource)\n at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown\nSource)\n at\ncom.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown\nSource)\n at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown\nSource)\n at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown\nSource)\n at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown\nSource)\n at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)\n at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown\nSource)\n at\ncom.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown\nSource)\n at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(Unknown\nSource)\n at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(Unknown\nSource)\n at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(Unknown\nSource)\n at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:214)\n at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:125)\n at org.apache.fop.cli.Main.startFOP(Main.java:166)\n at org.apache.fop.cli.Main.main(Main.java:196)\nSep 10, 2008 12:33:52 PM org.apache.fop.cli.InputHandler error\nSEVERE: javax.xml.transform.TransformerException: Unsupported DataBuffer type:\njava.awt.image.DataBufferUShort\nSep 10, 2008 12:33:52 PM org.apache.fop.cli.Main startFOP\nSEVERE: Exception\njavax.xml.transform.TransformerException:\njava.lang.UnsupportedOperationException: Unsupported DataBuffer type:\njava.awt.image.DataBufferUShort\n at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:217)\n at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:125)\n at org.apache.fop.cli.Main.startFOP(Main.java:166)\n at org.apache.fop.cli.Main.main(Main.java:196)\n\n\n\nFails with all Sun's JDK and OpenJDK.\n\nIt seems like fop throws this error if the dataType is not TYPE_BYTE or\nTYPE_INT. This is a bug with the sources; I will file this upstream.\n\norg/apache/fop/pdf/AlphaRasterImage.java:\n\n  143           //...and write the Raster line by line with a reusable buffer\n  144           int dataType = alpha.getDataBuffer().getDataType();\n  145           if (dataType == DataBuffer.TYPE_BYTE) {\n  146               ...\n  151           } else if (dataType == DataBuffer.TYPE_INT) {\n  152               ....\n  168           } else {\n  169               throw new UnsupportedOperationException(\"Unsupported\nDataBuffer type: \"\n  170                       + alpha.getDataBuffer().getClass().getName());\n  171           }\n\n\nShould handle other datatypes. See bug initially reported here: https://bugzilla.redhat.com/show_bug.cgi?id=461740"}, {"count": 1, "tags": [], "text": "This is now fixed in FOP Trunk:\nhttp://svn.apache.org/viewvc?rev=696365&view=rev\n\nThanks for the test file.", "attachment_id": null, "id": 120715, "creator": "jeremias@apache.org", "time": "2008-09-17T09:47:50Z", "bug_id": 45795, "creation_time": "2008-09-17T09:47:50Z", "is_private": false}, {"count": 2, "tags": [], "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "attachment_id": null, "id": 155842, "creator": "gadams@apache.org", "time": "2012-04-01T06:44:14Z", "bug_id": 45795, "creation_time": "2012-04-01T06:44:14Z", "is_private": false}]