[{"text": "Originally reported as a log4cxx bug (https://issues.apache.org/jira/browse/LOGCXX-185) by Curtis \nJensen.  The compilation error occurs in the switch statement in conv_os_thread_t in strings/\napr_snprintf.c (line 496 in head, line 512 in apr 1.2.7) and the compilation error would imply that \napr_int32_t and apr_int64_t are the same size in his configuration.  The existing SVN HEAD has not had \nany changes that should eliminate the issue, but I can't confirm the problem as I don't have the \nplatform. \n\nWhile trying to compile a 32 bit library on a 64 bit RedHat EL 4, the following error occurs during \ncompile:\n\n[mkdir] Created dir: /home/users/jensen/tmp/l2/build/debug/static/apr_obj\n       [cc] 67 total files to be compiled.\n       [cc] /home/users/jensen/tmp/l2/lib/apr-1.2.7/strings/apr_snprintf.c: In function \n`conv_os_thread_t':\n       [cc] /home/users/jensen/tmp/l2/lib/apr-1.2.7/strings/apr_snprintf.c:512: error: duplicate case \nvalue\n       [cc] /home/users/jensen/tmp/l2/lib/apr-1.2.7/strings/apr_snprintf.c:510: error: previously used \nhere\n       [cc] /home/users/jensen/tmp/l2/lib/apr-1.2.7/strings/apr_snprintf.c: In function \n`conv_os_thread_t_hex':\n       [cc] /home/users/jensen/tmp/l2/lib/apr-1.2.7/strings/apr_snprintf.c:682: error: duplicate case \nvalue\n       [cc] /home/users/jensen/tmp/l2/lib/apr-1.2.7/strings/apr_snprintf.c:680: error: previously used \nhere\n       [cc] /home/users/jensen/tmp/l2/lib/apr-1.2.7/random/unix/sha2.c:193: warning: large integer \nimplicitly truncated to unsigned type\n...\n       [cc] /home/users/jensen/tmp/l2/lib/apr-1.2.7/random/unix/sha2.c:957: warning: left shift count \n>= width of type\n\nBUILD FAILED\n/home/users/jensen/tmp/l2/build.xml:560: The following error occurred while executing this line:\n/home/users/jensen/tmp/l2/apr-build.xml:167: gcc failed with return code 1\n\n\nThis error can be overcome by commenting out lines 512-513.", "tags": [], "creator": "carnold@apache.org", "attachment_id": null, "count": 0, "id": 108871, "time": "2007-10-01T16:21:52Z", "bug_id": 43528, "creation_time": "2007-10-01T16:21:52Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 43528, "attachment_id": null, "id": 108875, "time": "2007-10-01T18:59:52Z", "creator": "wrowe@apache.org", "creation_time": "2007-10-01T18:59:52Z", "is_private": false, "text": "That code must not be commented out.\n\napr_int32_t must be 32 bits.\n\napr_int64_t must be 64 bits.\n\nThis points to a deeper problem in their config; missing various information\nhere such as how they attempted to configure to build as a 32 bit lib, etc.\n\nBe warned the original report is no more detailed than this report, and\nsince the original reporter isn't even CC'ed to ask to provide apr.h and\napr_private.h, config.log etc, it's really pointless to leave this bug open.\n\nINVALIDating, feel free to reopen with useful detail"}]