[{"count": 0, "tags": [], "bug_id": 4236, "attachment_id": null, "id": 6796, "creation_time": "2001-10-17T08:16:51Z", "time": "2001-10-17T08:16:51Z", "creator": "mroderic@csc.com", "text": "We have upgraded from Tomcat 3.2.2 to 4.0.1 with a very strange effect. Now one \nand only one of our custom tag attributes <name>action</name> is assigned a \nstring value including the \"\". \n\nFormTag.getAction() returns literally \"do.vpms\" rather than the string do.vpms. \nI would have expected the \"\" to cause problems in the Java class since they \nnormally need to be escaped but the mutators work correctly. However, \"\" causes \na call to HttpServletResponse.encodeURL(action) to create an incorrect action \nURI for our custom form tag. This behavior was actually already apparent in 4.0 \nRC1.\n\nWe have a work around but this is very strange so I thought I would report it. \nNo other attribute is assigned with the \"\". I think the problem must be related \nto Tomcat. We haven't changed jdk versions (we are using 1.3.1) so the same \nPropertyEditor class is responsible for introspection and assignment of tag \nattribute values. I have also changed the TLD to be JSP1.2 conformant but still \nhave the same effect.\n\nI have also reviewed Sun's Tag classes, the JavaBeans Specification, the JSP1.2 \nSpecification, the JSP1.2 TLD DTD , and Tomcat's reported bugs and have found \nno mention of  'action' being a reserved word (the only possible explanation I \ncould come up with).\n\nLooking forward to your feedback!\nMary", "is_private": false}, {"count": 1, "tags": [], "bug_id": 4236, "text": "I tryied a small Tag test case with \"action\" as its attribute, and it ran\nwithout problem.  I also don't quite understand the part about\nFormTag.getAction().  Is that something that Jasper generate or something that\nyou define in your tag handler?\n\nCan you include you .jsp file and the Tag handler file (trimmed down, if you\ncan) here so that I can reproduce the problem?  Thanks.", "id": 6908, "time": "2001-10-19T12:45:14Z", "creator": "kin-man.chung@sun.com", "creation_time": "2001-10-19T12:45:14Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "mroderic@csc.com", "attachment_id": 705, "is_private": false, "id": 7033, "time": "2001-10-23T02:02:17Z", "bug_id": 4236, "creation_time": "2001-10-23T02:02:17Z", "text": "Created attachment 705\nfurther information"}, {"count": 3, "tags": [], "bug_id": 4236, "attachment_id": null, "is_private": false, "id": 7122, "time": "2001-10-24T16:58:56Z", "creator": "kin-man.chung@sun.com", "creation_time": "2001-10-24T16:58:56Z", "text": "Your attachment seems to include a program fragment from the Jasper generated\nfile, including some unprintable characters.  Your added explanation also makes\nno sense to me :)  What is FormTab?  Is it an example you got from a book?  Can\nyou include here your .jsp file, your .tld file, and your tag handler sources? \nThanks."}, {"count": 4, "tags": [], "creator": "mroderic@csc.com", "text": "Created attachment 723\nAnother try!", "id": 7182, "time": "2001-10-26T01:29:22Z", "bug_id": 4236, "creation_time": "2001-10-26T01:29:22Z", "is_private": false, "attachment_id": 723}, {"count": 5, "tags": [], "bug_id": 4236, "attachment_id": null, "text": "I want the original sources, either as sparate files or in a .war.\n\nTry again!  :)", "id": 7206, "time": "2001-10-26T10:27:03Z", "creator": "kin-man.chung@sun.com", "creation_time": "2001-10-26T10:27:03Z", "is_private": false}, {"count": 6, "tags": [], "creator": "mroderic@csc.com", "text": "Hi,\nAs I cannot send our entire code base, which is apparently necessary to \nrecreate this bug, and I have a work-around for the problem, I would like \nto 'remove' the bug or set the status to 'later' when I have more time to \ndetermine what reduced set of original source code will actually reproduce the \nerror. Anyway, thanks for your responsiveness and willingness to help.\nMary", "id": 7301, "time": "2001-10-30T02:36:28Z", "bug_id": 4236, "creation_time": "2001-10-30T02:36:28Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 4236, "is_private": false, "id": 7462, "creation_time": "2001-11-01T14:54:00Z", "time": "2001-11-01T14:54:00Z", "creator": "kin-man.chung@sun.com", "text": "Please reopen this bug if you have a concrete test case.", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 4236, "attachment_id": null, "text": "We have upgraded from Tomcat 3.2 to Tomcat 4.0.3, and have come across the same \nproblem. We have also found a work around or two, but it is a real kludge. I'd \nbe interested to here Mary's work around.\n\nWe have a custon tld (agent.tld) that has a tag (destinationpictures) that has \nno bodycontent, so its value is \"empty\". Our first attribute is called \"name\". \nIn our JSP we define the tag extension agent.tld, then we use the \ndestinationpictures tag and set the name property to \"destination\". The \ndefinition reads:\n\n<agent:destinationpictures name=\"destination\" />\n\nWe noticed that in our destinationpictures tag that \"\"destination\"\" was being \nset for the name attribute (instead of the string \"destination\"). In our \ncompiled JSP we noticed the following line of code:\n\n_jspx_th_agent_destinationpictures_0.setName(\"\\\"destination\\\"\");\n\nIt should have just been:\n\n_jspx_th_agent_destinationpictures_0.setName(\"destination\");\n\nOur two kludges would be to:\n1) Set the bodycontent for destinationpictures to \"JSP\", and redefine the tag \nin our JSP--giving it a start tag and an end tag OR\n2) We could send a substring of the name to RequestUtils.lookup in the Struts \nlibrary--removing the additional quotes before doing so.\n\nNeither of these solutions is very appealing.\n\nThanks!\nBruce", "id": 20625, "time": "2002-08-02T20:22:15Z", "creator": "BLattimore@mltvacations.com", "creation_time": "2002-08-02T20:22:15Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 4236, "attachment_id": null, "id": 20650, "creation_time": "2002-08-05T10:07:38Z", "time": "2002-08-05T10:07:38Z", "creator": "mroderic@csc.com", "text": "Hi Bruce,\nWe chose option #2 because we didn't have any more time to invest in \ndetermining the source of the problem. A word to option #1: the tag in which \nthe problem is occuring has a start and end tag (it is the equivalent to HTML \n<form>) and it's bodycontent is type \"JSP\".\nI wish I could suggest a more elegant solution. Maybe you could send a test \ncase. I wasn't able to reproduce the problem with my pared down code.\n\ngood luck,\nMary \n", "is_private": false}, {"count": 10, "tags": [], "bug_id": 4236, "attachment_id": null, "id": 22651, "creation_time": "2002-09-11T07:52:57Z", "time": "2002-09-11T07:52:57Z", "creator": "apachebug@filter.verelst.net", "text": "The company I work for has experienced exactly the same bug in tomcat 4.0.1,\n4.0.3 and 4.0.4. We have several tags extending eachother:\n\nUrlTag (has attribute 'name')\nIncludeTag (extends UrlTag)\nLeafIncludeTag (extends IncludeTag and has extra parameter 'objectlist')\nLeafFileTag (extends UrlTag and has extra parameter 'objectlist').\n\nWhen using tags 'url', 'include' or 'leaffile', everything works just fine. Only\nwhen using 'leafinclude' (which internally just looks like leaffile) the value\n'name' attribute suddenly includes those two quotes. \n\nIt appears that 4.1.10 does not contain the bug, but switching to that is not an\noption for us right now for several reasons. Is there any posibility that this\ncould be fixed in the 4.0 branch?", "is_private": false}, {"count": 11, "tags": [], "bug_id": 4236, "attachment_id": null, "text": "Note that this behaviour is triggered with the open-source MMBase software\n(www.mmbase.org). If you want to reproduce this, you can download the 1.5\nrelease from that site (there even is a war you can deploy) and look at the\ncorresponding source.\n\nThe page I used to test it is as follows:\n\n<%@ taglib uri=\"http://www.mmbase.org/mmbase-taglib-1.0\" prefix=\"mm\" %>\n<mm:cloud>\n  <mm:leafinclude page=\"home.jsp\" objectlist=\"1\" />\n</mm:cloud>\n\nThe file does not need to exist. It should give an error that file home.jsp does\nn't exist, but the error it gives is that file \"home.jsp\" is not found (mind the\nquotes!!).\n\nIf you try 'leaffile' instead of 'leafinclude', the correct errormessage is given.\n\nI hope this helps", "id": 22976, "time": "2002-09-17T08:26:49Z", "creator": "apachebug@filter.verelst.net", "creation_time": "2002-09-17T08:26:49Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 4236, "attachment_id": null, "text": "Since this is a problem with 4.0.x, but not 4.1.x or 5.x, it is considered fixed\nor wontfix.", "id": 35610, "time": "2003-04-18T22:25:39Z", "creator": "kin-man.chung@sun.com", "creation_time": "2003-04-18T22:25:39Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 4236, "attachment_id": null, "id": 40660, "creation_time": "2003-07-14T18:14:33Z", "time": "2003-07-14T18:14:33Z", "creator": "ethan.wallwork@reflectivesystems.com", "text": "We encountered this problem with Tomcat 4.0.6 as well.  It seems to occur if \nyou have an attribute specified twice in the tag definition in the TLD.  \nNormally this wouldn't occur, but when you have a tag with a lot of attributes \na duplicate can sneak in.  Removing the duplicate attribute definitions from \nthe TLD fixed the problem for us.", "is_private": false}]