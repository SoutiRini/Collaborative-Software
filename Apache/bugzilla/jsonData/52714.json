[{"count": 0, "tags": [], "bug_id": 52714, "is_private": false, "text": "Referring to http://svn.apache.org/viewvc/tomcat/native/branches/1.1.x/native/src/sslcontext.c?r1=1149279&view=log there something thats broke that does not support TLSv1+SSLv3. \n\nTomcat Version 6.0.35 \n\nAPR Details : \nINFO: Loaded APR based Apache Tomcat Native library 1.1.22.\nFeb 19, 2012 10:22:55 PM org.apache.catalina.core.AprLifecycleListener init\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\n\nTomcat Server.xml \n<Connector port=\"30002\" SSLCipherSuite=\"HIGH:!ADH:!MD5\" SSLCertificateFile=\"/local/Tomcat6/0/cluster/machine0/tc6u/tomcat.crt\" SSLCertificateKeyFile=\"/local/Tomcat6/0/cluster/machine0/tc6u/tomcat.key\" SSLPassword=\"xxx\" SSLProtocol=\"TLSv1+SSLv3\" address=\"0.0.0.0\" SSLEnabled=\"true\" maxThreads=\"150\" scheme=\"https\" secure=\"true\"/>\n\n\nError noticed in logs: -- \nFeb 19, 2012 10:22:57 PM org.apache.coyote.http11.Http11AprProtocol init\nSEVERE: Error initializing endpoint\njava.lang.Exception: An invalid value [TLSv1+SSLv3] was provided for the SSLProtocol attribute\n        at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:724)\n        at org.apache.coyote.http11.Http11AprProtocol.init(Http11AprProtocol.java:107)\n        at org.apache.catalina.connector.Connector.initialize(Connector.java:1049)\n        at org.apache.catalina.core.StandardService.initialize(StandardService.java:703)\n        at org.apache.catalina.core.StandardServer.initialize(StandardServer.java:838)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nFeb 19, 2012 10:22:57 PM org.apache.catalina.core.StandardService initialize\nSEVERE: Failed to initialize connector [Connector[HTTP/1.1-30002]]\nLifecycleException:  Protocol handler initialization failed: java.lang.Exception: An invalid value [TLSv1+SSLv3] was provided for the SSLProtocol attribute at org.apache.catalina.connector.Connector.initialize(Connector.java:1051)\n        at org.apache.catalina.core.StandardService.initialize(StandardService.java:703)\n        at org.apache.catalina.core.StandardServer.initialize(StandardServer.java:838)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)\n       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nFeb 19, 2012 10:22:57 PM org.apache.coyote.ajp.AjpAprProtocol init\n\n\nIs there a work around to this issue.", "id": 153948, "time": "2012-02-20T15:26:46Z", "creator": "marcmanthony@yahoo.com", "creation_time": "2012-02-20T15:26:46Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "text": "No that code was not broken by the change you cited. That change reverted an addition that was not needed.\n\nThe feature to support all combinations of SSLv2, SSLv3 and TLSv1 is tracked as BZ 51477. The feature was realized by a combination of patches applied to tcnative 1.1 (first released in 1.1.22) and Tomcat 7 (first released in 7.0.19).\n\nThe feature is neither documented nor available in TC 6. You might opt for a backport in BZ 51477.\n\nBugzilla is not a support forum. If you want to discuss this further, please use the Tomcat users list.\n\nThanks\n\nRainer", "id": 153953, "time": "2012-02-20T17:16:06Z", "bug_id": 52714, "creation_time": "2012-02-20T17:16:06Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 52714, "text": "Adding this to TC 6 has been proposed by me today. Backport will happen if enough other committers agree.", "id": 153955, "time": "2012-02-20T17:55:24Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2012-02-20T17:55:24Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 52714, "is_private": false, "id": 154007, "time": "2012-02-21T20:08:23Z", "creator": "marcmanthony@yahoo.com", "creation_time": "2012-02-21T20:08:23Z", "tags": [], "text": "Tomcat 6.0.35 does not work with older 1.1.20 of the APR \n\nFeb 21, 2012 1:38:55 PM org.apache.catalina.core.AprLifecycleListener init\n\nINFO: An older version 1.1.20 of the APR based Apache Tomcat Native library is installed, while Tomcat recommends version greater than 1.1.22\n\nFeb 21, 2012 1:38:55 PM org.apache.catalina.core.AprLifecycleListener init\n\nINFO: Loaded APR based Apache Tomcat Native library 1.1.20.\n\nFeb 21, 2012 1:38:55 PM org.apache.catalina.core.AprLifecycleListener init\n\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\n\nFeb 21, 2012 1:38:55 PM org.apache.coyote.http11.Http11AprProtocol init\n\nINFO: Initializing Coyote HTTP/1.1 on http-0.0.0.0-30221\n\nFeb 21, 2012 1:38:55 PM org.apache.coyote.http11.Http11AprProtocol init\n\nSEVERE: Error initializing endpoint\n\njava.lang.Exception: An invalid value [TLSv1+SSLv3] was provided for the SSLProtocol attribute\n\n        at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:724)\n\n        at org.apache.coyote.http11.Http11AprProtocol.init(Http11AprProtocol.java:107)\n\n        at org.apache.catalina.connector.Connector.initialize(Connector.java:1049)\n\n        at org.apache.catalina.core.StandardService.initialize(StandardService.java:703)\n\n        at org.apache.catalina.core.StandardServer.initialize(StandardServer.java:838)\n\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)\n\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)\n\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\n        at java.lang.reflect.Method.invoke(Method.java:597)\n\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)\n\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\n\nFeb 21, 2012 1:38:55 PM org.apache.catalina.core.StandardService initialize\n\nSEVERE: Failed to initialize connector [Connector[HTTP/1.1-30222]]\n\nLifecycleException:  Protocol handler initialization failed: java.lang.Exception: An invalid value [TLSv1+SSLv3] was provided for the SSLProtocol attribute\n\n        at org.apache.catalina.connector.Connector.initialize(Connector.java:1051)\n\n        at org.apache.catalina.core.StandardService.initialize(StandardService.java:703)\n\n        at org.apache.catalina.core.StandardServer.initialize(StandardServer.java:838)\n\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)\n\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)\n\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\n        at java.lang.reflect.Method.invoke(Method.java:597)\n\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)\n\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\n\n\n\nHow can this be resolved..Can a intermediate fix be supplied.."}, {"count": 4, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "text": "Bugzilla is not a support forum. Please do not reopen this issue.\nYou can seek help by posting to the Tomcat users list.\nThanks.", "id": 154008, "time": "2012-02-21T20:25:46Z", "bug_id": 52714, "creation_time": "2012-02-21T20:25:46Z", "is_private": false}]