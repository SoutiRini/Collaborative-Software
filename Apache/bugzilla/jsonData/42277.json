[{"count": 0, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "text": "StringResource does a property expand on a getContent() operation:\n\n    /**\n     * Get the content of this StringResource.\n     * @return a String; if the Project has been set properties\n     *         replacement will be attempted.\n     */\n    protected synchronized String getContent() {\n        if (isReference()) {\n            return ((StringResource) getCheckedRef()).getContent();\n        }\n        String value = getValue();\n        if (value == null) {\n            return value;\n        }\n        return getProject() == null\n            ? value : getProject().replaceProperties(value);\n    }\n\nbut since the resource has its value set by the value attribute, that is, an\nattribute setter, properties have already been expanded. \n\nThis will double expand anything, such as $${ant.version}. \n\nI propose we conclude this is a real defect, and fix it, unless there is a good\nexplanation for double-expanding properties.", "id": 102550, "time": "2007-04-27T06:31:13Z", "bug_id": 42277, "creation_time": "2007-04-27T06:31:13Z", "is_private": false}, {"count": 1, "text": "No--I can't imagine why I did that.  :)", "creator": "mbenson@apache.org", "attachment_id": null, "id": 102552, "time": "2007-04-27T07:05:33Z", "bug_id": 42277, "creation_time": "2007-04-27T07:05:33Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 42277, "text": "Wait--I am having some kind of memory here--I think I was trying to expand properties as late as \npossible, especially as, StringResource being writable, its value might (theoretically; I seriously doubt this \nis used anywhere yet) be set some time after instantiation.  Wasn't there some recent discussion on \nbypassing property expansion during setAttr(String val)?  Nested text (bug 42276) will be another PITA \ndue to the possibility of it coming in multiple chunks.  Or will UnknownElement magically handle that for \nus these days (not even considering API usage)?", "id": 102553, "time": "2007-04-27T07:18:36Z", "creator": "mbenson@apache.org", "creation_time": "2007-04-27T07:18:36Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 42277, "attachment_id": null, "id": 102554, "time": "2007-04-27T07:24:09Z", "creator": "stevel@apache.org", "creation_time": "2007-04-27T07:24:09Z", "is_private": false, "text": "Its write once, so whoever sets it, gets it. I've tweaked the writing code to do\na property expand there-and-then, which is the main reason for doing a property\nexpand, as far as I can see."}, {"count": 4, "text": "Yeah, looks good, other than your trademark whitespace-challengedness.  >;)", "creator": "mbenson@apache.org", "attachment_id": null, "id": 102557, "time": "2007-04-27T07:34:29Z", "bug_id": 42277, "creation_time": "2007-04-27T07:34:29Z", "tags": [], "is_private": false}]