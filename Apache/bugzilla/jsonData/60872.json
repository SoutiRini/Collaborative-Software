[{"count": 0, "tags": [], "bug_id": 60872, "attachment_id": null, "id": 197702, "time": "2017-03-16T07:43:11Z", "creator": "eric@peartreefarm.org.uk", "creation_time": "2017-03-16T07:43:11Z", "is_private": false, "text": "mod_cgid does not check for existence of \"logs\" directory before creating AF_UNIX socket. If this directory is missing (eg logs are all piped), socket creation silently fails, causing all cgi requests to fail with \"AH01257: unable to connect to cgi daemon after multiple tries\""}, {"count": 1, "tags": [], "text": "Hi Eric,\n\nthere should be also a more descriptive error like \"No such file or directory\" IIRC for AH01257. Have you checked all the error log entries? What would be the desired behavior?", "is_private": false, "id": 197703, "creator": "toscano.luca@gmail.com", "time": "2017-03-16T08:12:10Z", "bug_id": 60872, "creation_time": "2017-03-16T08:12:10Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Here's the error log. You'll see that the first error in caused by a client request rather than server start-up, giving me little clue to the detail of the server-side failure:\n=================================================================\n$ cat /fs01/log/mwhandbook/apache2.4.25/mwhandbook/mwhandbook_mwhandbook_error.log.1489594412\n\n[Wed Mar 15 16:13:32.746587 2017] [mpm_worker:notice] [pid 1459:tid 140629072512768] AH00292: Apache/2.4.25 (Unix) configured -- resuming normal operations\n\n[Wed Mar 15 16:13:32.746645 2017] [core:notice] [pid 1459:tid 140629072512768] AH00094: Command line: '/fs01/app/sw/apache2.4/apache2.4.25/bin/httpd -d /fs01/app/mwhandbook/apache2.4.25/mwhandbook'\n\n[Wed Mar 15 16:13:38.071787 2017] [cgid:error] [pid 2124:tid 140629006206720] (22)Invalid argument: [client 10.64.149.155:55669] AH01257: unable to connect to cgi daemon after multiple tries: /var/www/cgi-bin/tnspp\n\n[Wed Mar 15 16:42:00.627351 2017] [mpm_worker:notice] [pid 1459:tid 140629072512768] AH00298: SIGHUP received.  Attempting to restart\n\n==================================================================\n\nI subsequently discovered a separate issue which required me to raise StartServers from 2 to 5, following this change, a more useful message appeared in the log, flagging a bind() failure:\n\n==================================================================\n\n[Wed Mar 15 16:42:00.678486 2017] [cgid:error] [pid 2172:tid 140629072512768] (2)No such file or directory: AH01243: Couldn't bind unix domain socket /fs01/app/mwhandbook/apache2.4.25/mwhandbook/logs/cgisock.1459\n\n[Wed Mar 15 16:42:00.679209 2017] [mpm_worker:notice] [pid 1459:tid 140629072512768] AH00292: Apache/2.4.25 (Unix) configured -- resuming normal operations\n\n[Wed Mar 15 16:42:00.679229 2017] [core:notice] [pid 1459:tid 140629072512768] AH00094: Command line: '/fs01/app/sw/apache2.4/apache2.4.25/bin/httpd -d /fs01/app/mwhandbook/apache2.4.25/mwhandbook'\n\n[Wed Mar 15 16:42:00.679273 2017] [cgid:crit] [pid 1459:tid 140629072512768] AH01238: cgid daemon failed to initialize\n\n[Wed Mar 15 16:57:45.140797 2017] [mpm_worker:notice] [pid 1459:tid 140629072512768] AH00295: caught SIGTERM, shutting down\n==================================================================\n\nThis is better as it now tells me the pathname of the failed bind().  So the only remaining issue is:\n\nWhy did it attempt to bind a socket to a non-existent directory?", "is_private": false, "id": 197818, "creator": "eric@peartreefarm.org.uk", "time": "2017-03-20T08:27:34Z", "bug_id": 60872, "creation_time": "2017-03-20T08:27:34Z", "attachment_id": null}]