[{"count": 0, "tags": [], "bug_id": 10038, "attachment_id": null, "text": "I have compiled ab with USE_SSL under 1.3.26 and have been using it to benchmark\nour https servers. It was working well: I was using 1k,10k and 100k documents as\nthe test URLs (made of NULL chars if that matters).\n\nAnyway, \"ab -n 100 https://xxxxx/test/10K.txt\" works fine, but \n\"ab -n 100 -k https://xxxxx/test/10K.txt\" hangs after the first hit.\n\nDoing \"-k\" works fine on the 1K and 100K files, so I'm thinking there's\nsomething  that just happens to hit a buffer limit or the likes on that\nparticular 10K file.\n\nAnyway, curl and a browser has no problem with the URL, neither does ab if I\nmake it get the URL via a stunnel tunnel.\n\nGreat tool BTW :-)", "id": 18120, "time": "2002-06-20T03:25:10Z", "creator": "jhaar@trimble.co.nz", "creation_time": "2002-06-20T03:25:10Z", "is_private": false}, {"count": 1, "tags": [], "creator": "mcmanus@datapower.com", "text": "I just had this problem too.. this patch is one way to address the problem (I\nhad it on 2.0.44)\n\n--- ab.c        Wed Oct 16 08:39:21 2002\n+++ new.c       Wed Feb 19 17:07:54 2003\n@@ -762,12 +762,6 @@\n #endif\n        e = apr_send(c->aprsock, request + c->rwrote, &l);\n \n-       /*\n-        * Bail early on the most common case\n-        */\n-       if (l == c->rwrite)\n-           break;\n-\n #ifdef USE_SSL\n         if (ssl != 1)\n        if (e != APR_SUCCESS) {\n@@ -784,7 +778,7 @@\n #endif\n        c->rwrote += l;\n        c->rwrite -= l;\n-    } while (1);\n+    } while (c->rwrite != 0);\n \n     totalposted += c->rwrite;\n     c->state = STATE_READ;", "id": 31628, "time": "2003-02-19T21:14:50Z", "bug_id": 10038, "creation_time": "2003-02-19T21:14:50Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Fixed in trunk (r655637).\n\nColor me stunned that this bug persisted for five years after a patch was provided, apparently because it targets the old httpd-1.3 product.\n", "is_private": false, "id": 116528, "creator": "fielding@apache.org", "time": "2008-05-12T14:06:16Z", "bug_id": 10038, "creation_time": "2008-05-12T14:06:16Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "rpluem@apache.org", "text": "Backported to 2.2.x as r660576 (http://svn.apache.org/viewvc?rev=660576&view=rev).", "id": 117060, "time": "2008-05-27T15:14:54Z", "bug_id": 10038, "creation_time": "2008-05-27T15:14:54Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "fielding@apache.org", "text": "ab.c in 1.3.x has a completely different implementation of\nthe request writing and does not suffer from the bug fixed\nby the proposed patch (which is based on a later implementation\nin 2.x and has now been fixed for 2.0.x and 2.2.x).\n\nHowever, ab.c in 1.3.x also has a completely broken SSL\nimplementation that does not work and probably should be removed.\nMy guess is that the keepalive code is equally broken.\nI suggest that anyone who wants to run ab against an httpd\n(any version) should use the one in 2.2.9 or later.\n\nIf anyone does revisit this bug, I suspect the hang may be due\nto close_connection not doing an SSL_shutdown (compare it to the\nimplementation in 2.2.x).", "id": 119237, "time": "2008-08-01T19:22:22Z", "bug_id": 10038, "creation_time": "2008-08-01T19:22:22Z", "is_private": false, "attachment_id": null}]