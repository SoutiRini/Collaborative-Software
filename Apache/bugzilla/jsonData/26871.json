[{"count": 0, "tags": [], "bug_id": 26871, "attachment_id": null, "id": 52163, "time": "2004-02-11T20:40:34Z", "creator": "emaus@nr.no", "creation_time": "2004-02-11T20:40:34Z", "is_private": false, "text": "There are two ways to extend and with custom tasks. One is using <taskdef> in \nyout build file, which is a little awkward for tasks you use a lot and usually \nbreaks ant-support in editors. \n\nThe other is to open ant.jar, modify the definition file\norg/apache/tools/ant/tasdefs/default.properties\nand then wrap it all up again. This is cumbersome and not so easy.\n\nI suggest making it possible for all jars in classpath to have a task definition \nfile named as above. Then new tasks can be loaded by placing the jar file in \nant/lib, and voila! ant finds the new task. \n\nThe ant core must be changed to not only look for one item in the class path \nwith the def-file name, but to look for all resources with that name. AFAIK, the \nfollowing change will implement the suggestion:\n\nFile: apache-ant-1.6.0/src/main/org/apache/tools/ant/ComponentHelper.java\nMethod: private void initTasks() {....}\nmodified code starting at line 732\n\n\n            /* replaced code:\n            in = this.getClass().getResourceAsStream(dataDefs);\n            if (in == null) {\n                throw new BuildException(\"Can't load default task list\");\n            }\n            props.load(in);\n            */\n            // replacement begin\n            Enumeration enumeration = this.getClass()\n                            .getClassLoader().getResources(dataDefs);\n            while (enumeration.hasMoreElements()) {\n                URL url = (URL) enumeration.nextElement();\n                in = url.openStream();\n                props.load(in);\n            }\n            // end of replacement"}, {"count": 1, "tags": [], "bug_id": 26871, "attachment_id": null, "text": "Check out <antlib>s in 1.6+, especially antlib namespaces.  These will almost \ndo what you want for now.... and stay tuned, since there are ongoing \ndiscussions about automatic antlib inclusion...", "id": 52164, "time": "2004-02-11T20:44:50Z", "creator": "mbenson@apache.org", "creation_time": "2004-02-11T20:44:50Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 26871, "is_private": false, "text": "It would still be easier if ant could discover the task all by itself. ", "id": 54482, "time": "2004-03-23T15:28:41Z", "creator": "emaus@nr.no", "creation_time": "2004-03-23T15:28:41Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 26871, "is_private": false, "text": "antlibs cover this.\n\nsure Ant doesn't discover them all by itself, it needs the namespace URI as a hint.  But OTOH this forces the tasks into a different XML namespace which is good as it avoids collisions and helps editors as well.", "id": 129318, "time": "2009-07-31T04:07:02Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-31T04:07:02Z", "attachment_id": null}]