[{"count": 0, "tags": [], "bug_id": 54370, "text": "Created attachment 29808\nPatch\n\nNPE when using null parameters in some cases: https://issues.jboss.org/browse/AS7-3177\n\nI did put a workaround for it, but I don't know how legitimate it is. It looks a bit similar to the NPE with a null toString that got reverted, where a null object is used as an argument.", "id": 164352, "time": "2013-01-03T14:20:38Z", "creator": "remm@apache.org", "creation_time": "2013-01-03T14:20:38Z", "is_private": false, "attachment_id": 29808}, {"count": 1, "tags": [], "bug_id": 54370, "is_private": false, "text": "I think you have identified a problem but I'm not sure the proposed solution is correct. Treating a null as an exact match for a parameter seems wrong. I think it needs to be treated as a possible match. I'll work on some test cases.", "id": 164353, "time": "2013-01-03T14:39:47Z", "creator": "markt@apache.org", "creation_time": "2013-01-03T14:39:47Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 164354, "time": "2013-01-03T14:55:00Z", "bug_id": 54370, "creation_time": "2013-01-03T14:55:00Z", "text": "(In reply to comment #1)\n> I think you have identified a problem but I'm not sure the proposed solution\n> is correct. Treating a null as an exact match for a parameter seems wrong. I\n> think it needs to be treated as a possible match. I'll work on some test\n> cases.\n\nI think it is suspicious too [like many one line patches], but even if it goes through ELSupport.coerceToType, I think null looks like it will always end up matching the expected type (unless I missed something)."}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "It is the exact match part that is the problem. As soon as an exact match is find, Tomcat stops looking. With a null parameter type it needs to keep looking as it is only a possible match. Tomcat needs to ensure it is the only possible match and that there aren't ambiguous matches.\n\nI fixed this in trunk and 7.0.x and it will be included in 7.0.35 onwards.", "count": 3, "id": 164357, "time": "2013-01-03T15:39:59Z", "bug_id": 54370, "creation_time": "2013-01-03T15:39:59Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "remm@apache.org", "is_private": false, "count": 4, "id": 164361, "time": "2013-01-03T17:22:59Z", "bug_id": 54370, "creation_time": "2013-01-03T17:22:59Z", "text": "Thanks, very nice improvement."}]