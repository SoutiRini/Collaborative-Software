[{"count": 0, "tags": [], "bug_id": 40000, "is_private": false, "id": 91056, "attachment_id": null, "creator": "a.walland@focusmr.com", "creation_time": "2006-07-10T12:54:56Z", "time": "2006-07-10T12:54:56Z", "text": "i have the following in context.xml\n        <Resource\n            auth=\"Container\"\n            name=\"jdbc/ConnName\"\n            type=\"javax.sql.DataSource\"\n            driverClassName=\"oracle.jdbc.OracleDriver\"\n            password=\"mypass\"\n            maxIdle=\"10\"\n            maxWait=\"-1\"\n            validationQuery=\"SELECT SYSDATE FROM DUAL\"\n            username=\"myuser\"\n            url=\"jdbc:oracle:thin:@127.0.0.1:1521:SID\"\n            maxActive=\"25\"\n            initialSize=\"10\"\n            />\n\nbenchmarking with siege the tomcat server stops responding when it hits the\nmaxActive setting. even when the 25 queries finish on the database server tomcat\ndoesn't seem to return to life ^^.\n\nworkaround: set maxActive to \"-1\" and control maximum active processes with the\n\"processes\" or \"sessions\" parameter on the oracle server.\n\ni do not know if the same problem exists in conjunction with other databases, i\nhave only tried it with oracle (10g enterprise and XE)\n\nsetup:\n\napache 1.3.33 on debian stable,\nmod-jk connector via ajp13,\nlatest ojdbc14.jar from oracle.com,\ntomcat 5.5.17\njdk 1.5.0_06-b05 BEA Systems, Inc\n2.6.8 kernel on a 32 bit x86 smp machine\n\n\nif any additional information is required i hope i can provide it :)"}, {"attachment_id": null, "tags": [], "bug_id": 40000, "text": "Don't set maxWait to -1.  If you set it to something reasonable, when the pool\nis fully busy (i.e. active = maxActive), the pool will wait forever if maxWait =\n-1, hence the behavior you're seeing.  If I set maxWait to a positive value I\nget the exception back right away as expected.\n\nEither way, if there's a bug here, it's much more likely a DBCP bug.  It's DBCP\ndoing the waiting.  If you have a stack trace showing hung threads in Tomcat\nfunction calls after the queries have completed (not before), please feel free\nto reopen this issue and attach said stack trace.\n", "count": 1, "id": 97332, "time": "2006-12-26T07:28:34Z", "creator": "yoavs@computer.org", "creation_time": "2006-12-26T07:28:34Z", "is_private": false}]