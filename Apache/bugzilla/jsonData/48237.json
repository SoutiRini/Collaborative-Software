[{"text": "Created attachment 24564\nsample fo and afp\n\nColor svg, declared both inline (<fo:instream-foreign-object>) and external (<fo:external-graphic>), are not rendered to afp as black and white under the following fop.xconf configuration:\n\n <renderer mime=\"application/x-afp\">   \n      <images mode=\"b+w\" bits-per-pixel=\"8\"/>\n..\n</renderer>\n\nThe attached includes sample xsl-fo and afp output to demonstrate.", "tags": [], "bug_id": 48237, "attachment_id": 24564, "count": 0, "id": 132137, "time": "2009-11-19T06:31:18Z", "creator": "peter.hancock@gmail.com", "creation_time": "2009-11-19T06:31:18Z", "is_private": false}, {"text": "Hi Peter,\n\nThere is no bug with this functionality. You can have a look at the FO file that I have used...\n\n1. Update the configuration file for the image mode (b+w  or  color)\n2. Run the following command from the command prompt...\n    C:\\mywork\\FOP\\fop-0.95> fop -c C:\\fop.xconf -fo C:\\mywork\\JavaXSLTSamples\\XSLFOSamples\\hello.fo -afp C:\\mywork\\JavaXSLTSamples\\XSLFOSamples\\hellotest.afp\n\nAccording to the mode, the image will be rendered with color or black and white...\n\nThanks,\nVenkat.", "tags": [], "bug_id": 48237, "attachment_id": null, "count": 1, "id": 132282, "time": "2009-11-24T08:58:35Z", "creator": "vanukuri.venkat@googlemail.com", "creation_time": "2009-11-24T08:58:35Z", "is_private": false}, {"count": 2, "tags": [], "creator": "vanukuri.venkat@googlemail.com", "attachment_id": 24606, "id": 132283, "time": "2009-11-24T08:59:36Z", "bug_id": 48237, "creation_time": "2009-11-24T08:59:36Z", "is_private": false, "text": "Created attachment 24606\nInput FO file"}, {"count": 3, "tags": [], "creator": "vanukuri.venkat@googlemail.com", "attachment_id": null, "id": 132316, "time": "2009-11-25T07:39:33Z", "bug_id": 48237, "creation_time": "2009-11-25T07:39:33Z", "is_private": false, "text": "I have checked this bug with FOP 0.95 version initially, but later understood that FOPTrunk is having this problem instead of FOP 0.95.\n\nThe Bitmaps are rendering according the image mode configuration (either b+w or color) in both FOP 0.95 and FOPTrunk. \n\nThe problem is with SVGs, the image mode is not respected in case of SVGs in FOPTrunk. \n\nSo, It is a valid bug in FOPTrunk...."}, {"text": "Peter, I understand the bug report (all colors should ideally be transformed to grayscales when AFP output is configured to 8bit grayscales), but what I'm curious about is whether the current behaviour actually caused a problem on your side. So far I have no reports that the colors cause any problems. The systems seem to be able to handle them correctly, even on a monochrome system. Only the bitmap images are currently reduced in color depth most of all because that has a huge impact on file size.", "tags": [], "bug_id": 48237, "attachment_id": null, "count": 4, "id": 132332, "time": "2009-11-25T12:10:42Z", "creator": "jeremias@apache.org", "creation_time": "2009-11-25T12:10:42Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 48237, "attachment_id": null, "is_private": false, "id": 132347, "time": "2009-11-26T00:24:13Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2009-11-26T00:24:13Z", "text": "Jeremias,\n\nour local B+W AFP Printer handles this and converts the colour SVG to B+W on the fly. However, one of our customers with B+W Printers said the AFP failed to print due to the colour in the GOCA objects. We believe this is a bug and should be fixed.\n\nThanks,\n\nChris"}, {"count": 6, "tags": [], "creator": "peter.hancock@gmail.com", "attachment_id": 24725, "is_private": false, "id": 132902, "time": "2009-12-17T06:08:15Z", "bug_id": 48237, "creation_time": "2009-12-17T06:08:15Z", "text": "Created attachment 24725\npatch of proposed fix\n\nImplements a grayscale color conversion utility that is used when setting the color value on the GOCA stream whilst rendering SVG to AFP in grayscale.\n\nWARNING \nThis patch will depend upon an update to xmlgraphics-commons that includes the patch defined in Attachment #24724  of bug 48405"}, {"text": "Created attachment 24779\npatch of proposed fix", "tags": [], "bug_id": 48237, "attachment_id": 24779, "count": 7, "id": 133205, "time": "2009-12-30T02:35:55Z", "creator": "peter.hancock@gmail.com", "creation_time": "2009-12-30T02:35:55Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 48237, "attachment_id": 24818, "text": "Created attachment 24818\npatch of proposed fix\n\nUpdated patch.\n\nMoved some files to xmlgraphics commons", "id": 133449, "time": "2010-01-08T02:34:14Z", "creator": "peter.hancock@gmail.com", "creation_time": "2010-01-08T02:34:14Z", "is_private": false}, {"count": 9, "tags": [], "creator": "bowditch_chris@hotmail.com", "attachment_id": null, "id": 133454, "time": "2010-01-08T06:53:36Z", "bug_id": 48237, "creation_time": "2010-01-08T06:53:36Z", "is_private": false, "text": "Thanks for the patch Peter. Committed to SVN in revision 897221"}, {"count": 10, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "bug_id": 48237, "attachment_id": null, "id": 156198, "time": "2012-04-01T07:04:07Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T07:04:07Z", "tags": [], "is_private": false}]