[{"count": 0, "attachment_id": null, "bug_id": 34748, "is_private": false, "id": 74458, "time": "2005-05-04T23:29:42Z", "creator": "jrsisson@gmail.com", "creation_time": "2005-05-04T23:29:42Z", "tags": [], "text": "Currently, when a JUnit test is executed via the Ant JUnit task ( \nhttp://ant.apache.org/manual/OptionalTasks/junit.html ), a number of test\nmethods in the test class are executed and there is no support in the JUnit task\nfor instructing JUnit to execute a single test method (like the way JUnit\nprovides this functionality via the -m parameter in the junit.textui.TestRunner\nclass).\n\nThis patch (generated against the ANT_16_BRANCH in CVS) provides the ability to\nspecify a test method name to be executed in the new \"method\" attribute of the\nnested \"test\" element in the <junit> ant task.\n\nReasons why enhancing the Ant JUnit task to allow the execution a single test\nmethod is desirable:\n\n* When a test method fails, you can run the failing test method under the Java\ndebugger without having to wait for the other test methods to complete\n(especially where some of the other tests are long running).\n* Ability to quickly test code changes that fix a failing test\n* Ability to run under a Java profiler, a single test method that appears to be\nrunning slower than expected (without the overhead of running the profiler\nwhilst other test methods are being executed).\n* Speeds up the test/debug cycle when you are running on a busy system or slow\nhardware\n* No need to make code changes to force one test to be run when you want to\ndebug a single test.\n\nThe patch also adds 2 tests for the new functionality, which have been executed\nalong with the existing Ant JUnit tests in the ANT_16_BRANCH."}, {"count": 1, "tags": [], "text": "Created attachment 14935\n[PATCH] JUnit - add ability to execute a single test method", "attachment_id": 14935, "bug_id": 34748, "id": 74459, "time": "2005-05-04T23:31:55Z", "creator": "jrsisson@gmail.com", "creation_time": "2005-05-04T23:31:55Z", "is_private": false}, {"count": 2, "tags": [], "creator": "jrsisson@gmail.com", "text": "FYI.. If this patch is accepted, I plan to submit a related patch to the Apache\nMaven project's Test plug-in that allows this new functionality to be used in a\ncommand like the following:\n\nmaven -o -Dtestcasecom.mycompany.MyTest -Dmethod=testSomething test:single\n\nor under a debugger..\n\nmaven -o -Dmaven.junit.jvmargs=\"-Xdebug -Xnoagent -Djava.compiler=NONE\n-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000\"\n-Dtestcasecom.mycompany.MyTest -Dmethod=testSomething test:single", "id": 74460, "time": "2005-05-04T23:34:39Z", "bug_id": 34748, "creation_time": "2005-05-04T23:34:39Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 34748, "text": "* please use ant head and not ant_16_branch\n* the patch changes a public constuctor - JUnitTest\n", "count": 3, "id": 74468, "time": "2005-05-05T10:59:09Z", "creator": "peterreilly@apache.org", "creation_time": "2005-05-05T10:59:09Z", "is_private": false}, {"count": 4, "tags": [], "creator": "jrsisson@gmail.com", "text": "Created attachment 14963\n[PATCH] JUnit - add ability to execute a single test method\n\nAttached patch (generated against cvshead) for review that obsoletes the\nexisting patch that I submitted (that was generated against the ant_16_branch).\n\n\nThe 'since' information in the doc & javadoc changes assume that it will be\nincluded in Ant 1.7.\n\nI have checked that no public method signatures have been changed.\n\nAlso see the two // TODO comments - delete them if you don't think a different\nmessage should be logged (I wasn't sure whether changing the messages could\nimpact some program that relies upon the format of the log messages).", "id": 74572, "time": "2005-05-08T06:25:18Z", "bug_id": 34748, "creation_time": "2005-05-08T06:25:18Z", "is_private": false, "attachment_id": 14963}, {"count": 5, "tags": [], "bug_id": 34748, "attachment_id": null, "text": "Any chance someone could review this patch. Thanks.", "id": 76446, "time": "2005-06-16T07:10:07Z", "creator": "jrsisson@gmail.com", "creation_time": "2005-06-16T07:10:07Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 34748, "attachment_id": null, "id": 115632, "creation_time": "2008-04-16T05:36:17Z", "time": "2008-04-16T05:36:17Z", "creator": "mpetras@netbeans.org", "text": "The patch looks good at the first sight (but no thorough check yet).\n\nI suggest that it should be possible to specify multiple method names.", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 34748, "text": "Would also want to ensure that this works sanely with JUnit 4 tests using annotations.\n\nI presume that if the test class has a\n\npublic static Test suite() {...}\n\nmethod, the parameter would be ignored?", "count": 7, "id": 115644, "time": "2008-04-16T08:30:48Z", "creator": "jglick@apache.org", "creation_time": "2008-04-16T08:30:48Z", "is_private": false}, {"count": 8, "tags": [], "creator": "mpetras@netbeans.org", "text": "Why do you think it should be ignored? I think it should not be ignored.", "id": 115834, "time": "2008-04-24T05:05:08Z", "bug_id": 34748, "creation_time": "2008-04-24T05:05:08Z", "is_private": false, "attachment_id": null}, {"count": 9, "attachment_id": null, "bug_id": 34748, "is_private": false, "id": 115844, "time": "2008-04-24T10:10:24Z", "creator": "jglick@apache.org", "creation_time": "2008-04-24T10:10:24Z", "tags": [], "text": "If you have a static suite method, then that is going to specify a list of tests to run (which may in fact live in other classes, etc.), rather than the default suite which contains all test* methods from the current class. Using suite() would directly contradict the intent to run a single test case from this class, as I understand it."}, {"count": 10, "tags": [], "bug_id": 34748, "attachment_id": null, "text": "I understand what the suite() method is for but I still I do not understand what would be the reason for ignoring the method name if the suite() method is present. What would be the benefit?", "id": 115874, "time": "2008-04-25T08:53:14Z", "creator": "mpetras@netbeans.org", "creation_time": "2008-04-25T08:53:14Z", "is_private": false}, {"count": 11, "tags": [], "creator": "jglick@apache.org", "text": "If you have\n\npublic class MyTest extends TestCase {\n    public void test1() {...}\n    public void test2() {...}\n}\n\nthen it makes sense to ask to run test1 by itself, or test2 by itself; the implicit default suite being run is test1 followed by test2, which the environment is just overriding. But if you have\n\npublic class MyTest extends TestCase {\n    public MyTest(String n) {\n        super(n);\n    }\n    public static Test suite() {\n        TestSuite suite = new TestSuite();\n        suite.addTest(new MyTest(\"one\"));\n        suite.addTest(new MyTest(\"two\"));\n        // stuff in other classes too, maybe parametrized:\n        suite.addTest(new MyOtherTestSuite());\n        return suite;\n    }\n    public void one() {...}\n    /* expected to be run immediately after one() */\n    public void two() {...}\n}\n\nthen the suite() method gives the definitive answer to what tests should be run and in which order. In this case it is senseless to try to run a single test method from the environment.", "id": 115890, "time": "2008-04-25T12:32:50Z", "bug_id": 34748, "creation_time": "2008-04-25T12:32:50Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 34748, "attachment_id": null, "text": "I understand. But I still consider it a needless restriction - something like \"I assume you will not need to do this so I will not allow you to do it.\" In other words: Why it is better to have this restriction in place than not to have it? What would be the negative implications if the restriction is not applied?\n\nAnother reasoning:\nIf a test class does not contain any suite() method, then the set of test methods is defined. By specifying a particular method name (or names), I override this selection. Why it should be any different if the suite() method is present?", "id": 115895, "time": "2008-04-25T13:13:29Z", "creator": "mpetras@netbeans.org", "creation_time": "2008-04-25T13:13:29Z", "is_private": false}, {"count": 13, "tags": [], "creator": "jglick@apache.org", "text": "Well, you can try to select some \"public void test*()\" methods to run even if there is a suite() method, but there might not be any such methods (they might be implemented in another class, or named differently), and they might not run correctly. I guess it is harmless to try.", "id": 115899, "time": "2008-04-25T14:18:26Z", "bug_id": 34748, "creation_time": "2008-04-25T14:18:26Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "creator": "david@saff.net", "text": "What's the current thinking on this patch?  Thanks,\n\n   David Saff", "id": 120605, "time": "2008-09-15T06:14:00Z", "bug_id": 34748, "creation_time": "2008-09-15T06:14:00Z", "is_private": false, "attachment_id": null}, {"count": 15, "tags": [], "creator": "jglick@apache.org", "text": "FYI: a variant of this patch (against 1.7.1) is shipped with NetBeans 6.8 to permit single test method execution from inside the IDE. (Versioned project build scripts do not use this feature - only available for \"quick run\" mode with a special transient script.) https://svn.apache.org/repos/asf/ant/core/branches/run-single-test-method/ holds an update of the patch against 1.8.0.", "id": 134264, "time": "2010-02-05T16:59:06Z", "bug_id": 34748, "creation_time": "2010-02-05T16:59:06Z", "is_private": false, "attachment_id": null}, {"count": 16, "tags": [], "creator": "jglick@apache.org", "text": "Branch updated to 1.8.1.", "id": 136607, "time": "2010-05-03T13:49:08Z", "bug_id": 34748, "creation_time": "2010-05-03T13:49:08Z", "is_private": false, "attachment_id": null}, {"count": 17, "tags": [], "bug_id": 34748, "attachment_id": null, "text": "I would like to merge the run-single-test-method branch for 1.8.2. It has been in use for quite some time as a binary patch in NetBeans, for rerunning failed tests. Any objections to merging it?", "id": 137194, "time": "2010-05-28T13:20:30Z", "creator": "jglick@apache.org", "creation_time": "2010-05-28T13:20:30Z", "is_private": false}, {"count": 18, "tags": [], "creator": "jkf@apache.org", "attachment_id": null, "id": 137198, "time": "2010-05-29T02:38:55Z", "bug_id": 34748, "creation_time": "2010-05-29T02:38:55Z", "is_private": false, "text": "(In reply to comment #17)\n> I would like to merge the run-single-test-method branch for 1.8.2. It has been\n> in use for quite some time as a binary patch in NetBeans, for rerunning failed\n> tests. Any objections to merging it?\n\nJesse, please do merge"}, {"count": 19, "tags": [], "bug_id": 34748, "attachment_id": null, "id": 137580, "creation_time": "2010-06-11T12:39:34Z", "time": "2010-06-11T12:39:34Z", "creator": "jglick@apache.org", "text": "merged: rev 34748", "is_private": false}]