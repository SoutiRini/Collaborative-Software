[{"count": 0, "tags": [], "bug_id": 51720, "attachment_id": null, "text": "Consider the following call to a PHP script running on an Apache server.\nConnection: Keep-Alive\nContent-Type: multipart/form-data; boundary=BVoyv; charset=iso-8859-1\nAccept: */*\nContent-Length: 72\nHost: example.com\n\nContent-Disposition: form-data; name=\"data\"\n\nabc\n--BVoyv--\n\nAnd a corresponding PHP script:\n<?php\n  print_r(getallheaders());\n  print_r($_REQUEST);\n?>\n\nIn this case, the POST data are not seen on the PHP side, as shown on the output:\nArray\n(\n    [Connection] => Keep-Alive\n    [Content-Type] => multipart/form-data; boundary=BVoyv; charset=iso-8859-1\n    [Accept] => */*\n    [Content-Length] => 72\n    [Host] => example.com\n)\nArray\n(\n)\n\nHowever, after changing order of parameters in the Content-Type header to:\n\"Content-Type: multipart/form-data; charset=iso-8859-1; boundary=BVoyv\"\nthe respond of the script is as expected (notify appearing of the [data] line):\nArray\n(\n    [Connection] => Keep-Alive\n    [Content-Type] => multipart/form-data; charset=iso-8859-1; boundary=BVoyv\n    [Accept] => */*\n    [Content-Length] => 72\n    [Host] => example.com\n)\nArray\n(\n    [data] => abc\n)\n\nHowever, both cases should be equal to each other.\n\nGuessing (might be wrong):\nIn the first case, Apache parses the \";\" (and maybe also the rest of the line) after the boundary still as part of the boundary value. As a result, the POST DATA are not \"understood\" correctly. However, the following parts from RFC 1521 states clearly thet \";\" could not be part of the boundary:\ntspecials :=  \"(\" / \")\" / \"<\" / \">\" / \"@\"\n                /  \",\" / \";\" / \":\" / \"\\\" / <\">\n                /  \"/\" / \"[\" / \"]\" / \"?\" / \"=\"\n               ; Must be in quoted-string,\n               ; to use within parameter values\n\nboundary := 0*69<bchars> bcharsnospace\nbchars := bcharsnospace / \" \"\nbcharsnospace :=    DIGIT / ALPHA / \"'\" / \"(\" / \")\" / \"+\" /\"_\"\n                 / \",\" / \"-\" / \".\" / \"/\" / \":\" / \"=\" / \"?\"", "id": 148807, "time": "2011-08-24T22:31:02Z", "creator": "alik@seznam.cz", "creation_time": "2011-08-24T22:31:02Z", "is_private": false}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "text": "IIUC, you'd need to take this up with PHP.  Apache isn't parsing the body.", "id": 148812, "time": "2011-08-25T01:43:36Z", "bug_id": 51720, "creation_time": "2011-08-25T01:43:36Z", "is_private": false, "attachment_id": null}]