[{"count": 0, "tags": [], "bug_id": 32519, "is_private": false, "text": "I've a Java application running under a Windows 2000 Server with Tomcat 4.1.27 \nand this application will can be accessed from the internet through IIS and \nIIS redirects to our server with Tomcat. The problem is that in my application \nhas a field to do upload and it doesn't work as the error below.\nWhen I access this application right to Tomcat it works fine, but on the \ninternet passing through IIS doesn't.\nWe're using the isapi_redirect.dll so I would like to know if anyone had this \nsame problem and how resolved it. The others applications without upload field \nit works fine too.\n\njavax.servlet.ServletException: Processing of multipart/form-data request \nfailed. Read timed out\n\tat \norg.apache.struts.upload.CommonsMultipartRequestHandler.handleRequest\n(CommonsMultipartRequestHandler.java:242)\n\tat org.apache.struts.util.RequestUtils.populate(RequestUtils.java:1209)\n\tat org.apache.struts.action.RequestProcessor.processPopulate\n(RequestProcessor.java:821)\n\tat org.apache.struts.action.RequestProcessor.process\n(RequestProcessor.java:254)\n\tat org.apache.struts.action.ActionServlet.process\n(ActionServlet.java:1482)\n\tat org.apache.struts.action.ActionServlet.doPost\n(ActionServlet.java:525)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:248)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:259)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2491)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngine.invoke\n(StandardEngine.java:376)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.process\n(Ajp13Processor.java:466)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.run(Ajp13Processor.java:585)\n\tat java.lang.Thread.run(Thread.java:534)\nroot cause \norg.apache.commons.fileupload.FileUploadException: Processing of \nmultipart/form-data request failed. Read timed out\n\tat org.apache.commons.fileupload.FileUploadBase.parseRequest\n(FileUploadBase.java:429)\n\tat \norg.apache.struts.upload.CommonsMultipartRequestHandler.handleRequest\n(CommonsMultipartRequestHandler.java:233)\n\tat org.apache.struts.util.RequestUtils.populate(RequestUtils.java:1209)\n\tat org.apache.struts.action.RequestProcessor.processPopulate\n(RequestProcessor.java:821)\n\tat org.apache.struts.action.RequestProcessor.process\n(RequestProcessor.java:254)\n\tat org.apache.struts.action.ActionServlet.process\n(ActionServlet.java:1482)\n\tat org.apache.struts.action.ActionServlet.doPost\n(ActionServlet.java:525)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:248)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:259)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2491)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngine.invoke\n(StandardEngine.java:376)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.process\n(Ajp13Processor.java:466)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.run(Ajp13Processor.java:585)\n\tat java.lang.Thread.run(Thread.java:534)", "id": 67896, "time": "2004-12-03T19:47:24Z", "creator": "anav@ciee-rs.org.br", "creation_time": "2004-12-03T19:47:24Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 69095, "time": "2004-12-30T19:14:40Z", "bug_id": 32519, "creation_time": "2004-12-30T19:14:40Z", "text": "What version of JK? Have you tried it with the latest release?"}, {"count": 2, "tags": [], "bug_id": 32519, "is_private": false, "text": "(In reply to comment #1)\n> What version of JK? Have you tried it with the latest release?\n\n\nThe JDK's version is 1.4.2_03-b01\n", "id": 69097, "time": "2004-12-30T19:41:50Z", "creator": "anav@ciee-rs.org.br", "creation_time": "2004-12-30T19:41:50Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 32519, "text": "Please do not add individuals to the cc list or re-assign bugs to individuals\nwithout their consent.\n\nI consider such behaviour to be both rude and inconsiderate.\n", "id": 69098, "time": "2004-12-30T19:54:58Z", "creator": "markt@apache.org", "creation_time": "2004-12-30T19:54:58Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 32519, "text": "Back to my original question.\n\nI was not asking which JDK you were using, I asked which version of JK. To put\nit another way, which version of the JK connector (the software that connects\nIIS to Tomcat) are you using?", "id": 69099, "time": "2004-12-30T19:56:19Z", "creator": "markt@apache.org", "creation_time": "2004-12-30T19:56:19Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 32519, "text": "(In reply to comment #4)\n> Back to my original question.\n> I was not asking which JDK you were using, I asked which version of JK. To \nput\n> it another way, which version of the JK connector (the software that connects\n> IIS to Tomcat) are you using?\n\n\nAbout the Ccs... I really don't know how it work.. I thought I should assing \nagain to all the others I've assigned once.\n\nThe conector is AJp13 - this is the class: \norg.apache.ajp.tomcat4.Ajp13Connector\n", "id": 69100, "time": "2004-12-30T20:13:34Z", "creator": "anav@ciee-rs.org.br", "creation_time": "2004-12-30T20:13:34Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 32519, "is_private": false, "text": "No, AJP13 is not the JK version. AJP1.3 is the protocol.\n\nWhere did you get isapi_redirect.dll from?", "id": 69102, "time": "2004-12-30T20:33:08Z", "creator": "markt@apache.org", "creation_time": "2004-12-30T20:33:08Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 32519, "is_private": false, "text": "(In reply to comment #6)\n> No, AJP13 is not the JK version. AJP1.3 is the protocol.\n> Where did you get isapi_redirect.dll from?\n\nWell so I don't know where I can see which version it is.. I just saw this on \nthe BES console.\n\nAbout the isapi we got from the Tomcat.", "id": 69103, "time": "2004-12-30T20:36:31Z", "creator": "anav@ciee-rs.org.br", "creation_time": "2004-12-30T20:36:31Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 32519, "is_private": false, "text": "OK. Lets try and narrow it down.\n\nWhat is the date of the dll file?\nWhat is its size (exactly) in bytes?", "id": 69104, "time": "2004-12-30T20:44:26Z", "creator": "markt@apache.org", "creation_time": "2004-12-30T20:44:26Z", "attachment_id": null}, {"count": 9, "tags": [], "creator": "anav@ciee-rs.org.br", "attachment_id": null, "is_private": false, "id": 69105, "time": "2004-12-30T20:59:57Z", "bug_id": 32519, "creation_time": "2004-12-30T20:59:57Z", "text": "(In reply to comment #8)\n> OK. Lets try and narrow it down.\n> What is the date of the dll file?\n> What is its size (exactly) in bytes?\nMarch 23th, 2004\n114.688 bytes"}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "Neither that file size or date match anything in the JK downloads. I am guessing\nthat someone built the .dll from the source. It is just not possible for me to\ndetermine what source was used.\n\nWhat I suggest is trying the latest JK - 1.2.8 and see if that works.\n\nOne random thought - might this be related to bug 27796?", "count": 10, "id": 69107, "time": "2004-12-30T21:46:10Z", "bug_id": 32519, "creation_time": "2004-12-30T21:46:10Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 32519, "is_private": false, "text": "(In reply to comment #10)\n> Neither that file size or date match anything in the JK downloads. I am \nguessing\n> that someone built the .dll from the source. It is just not possible for me \nto\n> determine what source was used.\n> What I suggest is trying the latest JK - 1.2.8 and see if that works.\n> One random thought - might this be related to bug 27796?\n\nThis dll came with the Tomcat. If I got this dll form a newer version from \ntomcat wont conflit with the version we're using?\n\nAbout bug 27796 I don't think is the same case because we aren't using special \ncaracteres.", "id": 69167, "time": "2005-01-03T17:44:33Z", "creator": "anav@ciee-rs.org.br", "creation_time": "2005-01-03T17:44:33Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 32519, "is_private": false, "text": "JK 1.2.8 will be fine with your Tomcat version. Test it and report back.", "id": 69170, "time": "2005-01-03T17:57:12Z", "creator": "markt@apache.org", "creation_time": "2005-01-03T17:57:12Z", "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 32519, "text": "No further response so closing as invalid.", "id": 72533, "time": "2005-03-16T22:18:11Z", "creator": "markt@apache.org", "creation_time": "2005-03-16T22:18:11Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 32519, "is_private": false, "text": "Very similar to bug 33916.  But, I've seen this *exact* stack trace,\nwhich wasn't reproduceable but just happened once in a while when IE was the\nweb client.  I looked into it and concluded that it was a bug in Commons\nFileUpload, which is included with Struts in this case, and that it is likely\nfixed in newer versions (probably a newer version than we're using).\n\nWhich version of Struts are you using?  I'd guess Struts 1.1, and I'll bet\nthat a new version of Struts integrates a new version of Commons FileUpload\nthat doesn't have the bug.\n\nSee bug 21269.  I believe that's the one that fixes it, although I haven't\nconfirmed that it is indeed fixed that way.\n", "id": 72534, "time": "2005-03-16T23:19:17Z", "creator": "jason_brittain@yahoo.com", "creation_time": "2005-03-16T23:19:17Z", "attachment_id": null}]