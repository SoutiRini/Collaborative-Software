[{"count": 0, "tags": [], "bug_id": 1202, "attachment_id": null, "id": 1708, "time": "2001-04-03T14:12:10Z", "creator": "jhut@inst.strykercorp.com", "creation_time": "2001-04-03T14:12:10Z", "is_private": false, "text": "Creating a new JNDI InitialContext in init() fails when servlet is set to load \non startup in web.xml.  Works fine if not set to load on startup.\n\nException is:\n\n----- Root Cause -----\njavax.naming.NoInitialContextException: Cannot instantiate class: \norg.apache.naming.java.javaURLContextFactory.  Root exception is \njava.lang.ClassNotFoundException: org.apache.naming.java.javaURLContextFactory\n[snip]\n\nInit method from servlet is:\n\n    public void init() throws ServletException {\n        Context ctx = null;\n        try {\n            ctx = new InitialContext();\n            log(\"initialized successfully\");\n        } catch (NamingException ex) {\n            throw new ServletException(ex);\n        }\n    }"}, {"count": 1, "tags": [], "bug_id": 1202, "text": "Created attachment 72\nServlet that causes bug", "id": 1710, "time": "2001-04-03T16:17:03Z", "creator": "jhut@inst.strykercorp.com", "creation_time": "2001-04-03T16:17:03Z", "is_private": false, "attachment_id": 72}, {"count": 2, "tags": [], "bug_id": 1202, "attachment_id": null, "id": 1738, "time": "2001-04-04T17:43:45Z", "creator": "remm@apache.org", "creation_time": "2001-04-04T17:43:45Z", "is_private": false, "text": "An initial context factory is no longer set, which fixes the problem."}, {"count": 3, "tags": [], "creator": "jhut@inst.strykercorp.com", "is_private": false, "id": 1746, "attachment_id": null, "bug_id": 1202, "creation_time": "2001-04-05T04:51:28Z", "time": "2001-04-05T04:51:28Z", "text": "While this fixes the ClassNotFoundException, the default InitialContext cannot \nbe created.  Sequence of tests:\n\n1. Servlet run with load-on-startup commented out in web.xml, test value is \nretrieved from JNDI when servlet initialized on first invocation as expected.  \nOutput from doGet() as expected.\n\n2. Same servlet run with load-on-startup set to 1.  Get following exception \nwhen servlet is initialized:\n\n----- Root Cause -----\njavax.naming.NoInitialContextException: Need to specify class name in \nenvironment or system property, or as an applet parameter, or in an application \nresource file:  java.naming.factory.initial\n\nAttempt to run servlet gets: 503 application not available\n\nUpdated servlet that shows bug attached."}, {"count": 4, "tags": [], "bug_id": 1202, "attachment_id": 77, "text": "Created attachment 77\nRevised testcase servlet", "id": 1747, "time": "2001-04-05T04:52:30Z", "creator": "jhut@inst.strykercorp.com", "creation_time": "2001-04-05T04:52:30Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 1202, "attachment_id": null, "id": 1781, "time": "2001-04-07T12:40:01Z", "creator": "remm@apache.org", "creation_time": "2001-04-07T12:40:01Z", "is_private": false, "text": "I fixed the bindings of the JNDI environment. Originally, I thought it was a \nclassloader problem. I also added this to one of the tester's tests."}, {"count": 6, "tags": [], "creator": "craig.mcclanahan@sun.com", "attachment_id": null, "id": 1782, "creation_time": "2001-04-07T14:02:07Z", "time": "2001-04-07T14:02:07Z", "bug_id": 1202, "text": "Tthis is *not* fixed under JDK 1.2.2 on Linux.  The Jndi01 module in tester \nthrows\n\njavax.naming.NoInitialContextException: Need to specify class name in \nenvironment or system property, or as an applet parameter, or in an application \nresource file:  java.naming.factory.initial\n  at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:650)\n  at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:250)\n  at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:287)\n  at javax.naming.InitialContext.lookup(InitialContext.java:354)\n  at org.aqpache.tester.Jndi01.init(Jndi01.java:86)\n  ...\n", "is_private": false}, {"count": 7, "tags": [], "bug_id": 1202, "text": "I added a test in the tester for this, and after clearing out the issue with \ndestroy(), it appears to be working fine now.", "id": 1796, "time": "2001-04-09T14:46:58Z", "creator": "remm@apache.org", "creation_time": "2001-04-09T14:46:58Z", "is_private": false, "attachment_id": null}]