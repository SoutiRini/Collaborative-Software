[{"count": 0, "tags": [], "bug_id": 44111, "text": "When using Cocoon from the command line to generate a static version of a \nLenya site, a NullPointerException is thrown from \norg.apache.lenya.cms.cocoon.source.FallbackSourceFactory.getSource() (line \n120) and \norg.apache.lenya.cms.cocoon.source.AggregatingFallbackSourceFactory.getSource() \n(line 95).\n\nIn looking at the Cocoon CLI sources, it looks like this is because the \nRequest has a null context path. If that's correct, then NPE is thrown because \nwe try to request.getContextPath().length() without first checking if \nrequest.getContextPath() might return null.", "id": 111934, "time": "2007-12-19T22:45:50Z", "creator": "alex@valuadder.com", "creation_time": "2007-12-19T22:45:50Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 44111, "text": "Stack traces:\n\njava.lang.RuntimeException: Resolving path \n[aggregate-fallback://config/access-control/usecase-policies.xml] failed: \n\tat \norg.apache.lenya.cms.cocoon.source.AggregatingFallbackSourceFactory.getSource(AggregatingFallbackSourceFactory.java:143)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat \nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat \norg.apache.avalon.excalibur.component.ComponentProxyGenerator$ComponentInvocationHandler.invoke(ComponentProxyGenerator.java:143)\n\tat $Proxy50.getSource(Unknown Source)\n\tat \norg.apache.excalibur.source.impl.AbstractSourceResolver.resolveURI(AbstractSourceResolver.java:146)\n\tat sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)\n\tat \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat \norg.apache.avalon.excalibur.component.ComponentProxyGenerator$ComponentInvocationHandler.invoke(ComponentProxyGenerator.java:143)\n\tat $Proxy10.resolveURI(Unknown Source)\n\tat \norg.apache.cocoon.components.CocoonComponentManager.resolveURI(CocoonComponentManager.java:558)\n\tat \norg.apache.cocoon.components.CocoonComponentManager.resolveURI(CocoonComponentManager.java:541)\n\tat \norg.apache.lenya.ac.cache.SourceCacheImpl.getSourceValidity(SourceCacheImpl.java:226)\n\tat \norg.apache.lenya.ac.cache.SourceCacheImpl.get(SourceCacheImpl.java:144)\n\tat \norg.apache.lenya.cms.ac.usecase.impl.UsecaseAuthorizerImpl.getUsecaseRoles(UsecaseAuthorizerImpl.java:252)\n\tat \norg.apache.lenya.cms.ac.usecase.impl.UsecaseAuthorizerImpl.authorizeUsecase(UsecaseAuthorizerImpl.java:105)\n\tat \norg.apache.lenya.cms.ac.usecase.impl.UsecaseAuthorizerImpl.authorize(UsecaseAuthorizerImpl.java:202)\n\tat \norg.apache.lenya.ac.impl.DefaultAccessController.authorize(DefaultAccessController.java:118)\n\tat \norg.apache.lenya.ac.impl.BypassableAccessController.authorize(BypassableAccessController.java:179)\n\tat \norg.apache.lenya.cms.cocoon.acting.DelegatingAuthorizerAction.doAct(DelegatingAuthorizerAction.java:69)\n\tat \norg.apache.lenya.cms.cocoon.acting.AccessControlAction.act(AccessControlAction.java:87)\n\tat \norg.apache.lenya.cms.cocoon.acting.DelegatingAuthorizerAction.act(DelegatingAuthorizerAction.java:51)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.ActTypeNode.invoke(ActTypeNode.java:125)\n\tat \norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:47)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.MatchNode.invoke(MatchNode.java:108)\n\tat \norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:143)\n\tat \norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:93)\n\tat \norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat \norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:177)\n\tat \norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:254)\n\tat org.apache.cocoon.Cocoon.process(Cocoon.java:699)\n\tat \norg.apache.cocoon.bean.CocoonWrapper.getPage(CocoonWrapper.java:514)\n\tat \norg.apache.cocoon.bean.CocoonBean.processTarget(CocoonBean.java:499)\n\tat org.apache.cocoon.bean.CocoonBean.process(CocoonBean.java:356)\n\tat org.apache.cocoon.Main.main(Main.java:321)\nCaused by: java.lang.NullPointerException\n\tat \norg.apache.lenya.cms.cocoon.source.AggregatingFallbackSourceFactory.getSource(AggregatingFallbackSourceFactory.java:95)\n\t... 39 more\n\njava.lang.RuntimeException: Resolving path [fallback://error.xmap] failed: \n\tat \norg.apache.lenya.cms.cocoon.source.FallbackSourceFactory.getSource(FallbackSourceFactory.java:159)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat \nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat \norg.apache.avalon.excalibur.component.ComponentProxyGenerator$ComponentInvocationHandler.invoke(ComponentProxyGenerator.java:143)\n\tat $Proxy50.getSource(Unknown Source)\n\tat \norg.apache.excalibur.source.impl.AbstractSourceResolver.resolveURI(AbstractSourceResolver.java:146)\n\tat sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)\n\tat \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat \norg.apache.avalon.excalibur.component.ComponentProxyGenerator$ComponentInvocationHandler.invoke(ComponentProxyGenerator.java:143)\n\tat $Proxy10.resolveURI(Unknown Source)\n\tat \norg.apache.cocoon.components.CocoonComponentManager.resolveURI(CocoonComponentManager.java:558)\n\tat \norg.apache.cocoon.components.CocoonComponentManager.resolveURI(CocoonComponentManager.java:541)\n\tat \norg.apache.lenya.cms.cocoon.components.modules.input.PublicationTemplateFallbackModule.getAttribute(PublicationTemplateFallbackModule.java:81)\n\tat \norg.apache.cocoon.components.treeprocessor.variables.PreparedVariableResolver.processModule(PreparedVariableResolver.java:272)\n\tat \norg.apache.cocoon.components.treeprocessor.variables.PreparedVariableResolver.resolve(PreparedVariableResolver.java:209)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:89)\n\tat \norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.HandleErrorsNode.invoke(HandleErrorsNode.java:89)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.ErrorHandlerHelper.prepareErrorHandler(ErrorHandlerHelper.java:182)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.ErrorHandlerHelper.prepareErrorHandler(ErrorHandlerHelper.java:135)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.ErrorHandlerHelper.invokeErrorHandler(ErrorHandlerHelper.java:108)\n\tat \norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:100)\n\tat \norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat \norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:177)\n\tat \norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:254)\n\tat org.apache.cocoon.Cocoon.process(Cocoon.java:699)\n\tat \norg.apache.cocoon.bean.CocoonWrapper.getPage(CocoonWrapper.java:514)\n\tat \norg.apache.cocoon.bean.CocoonBean.processTarget(CocoonBean.java:499)\n\tat org.apache.cocoon.bean.CocoonBean.process(CocoonBean.java:356)\n\tat org.apache.cocoon.Main.main(Main.java:321)\nCaused by: java.lang.NullPointerException\n\tat \norg.apache.lenya.cms.cocoon.source.FallbackSourceFactory.getSource(FallbackSourceFactory.java:120)\n\t... 32 more", "id": 111935, "time": "2007-12-19T22:46:37Z", "creator": "alex@valuadder.com", "creation_time": "2007-12-19T22:46:37Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Should be fixed in revision 605844. Please test, TIA!", "attachment_id": null, "id": 111940, "creator": "andreas@apache.org", "time": "2007-12-20T01:27:55Z", "bug_id": 44111, "creation_time": "2007-12-20T01:27:55Z", "is_private": false}]