[{"count": 0, "tags": [], "creator": "hajime-n@reso.co.jp", "attachment_id": null, "id": 102271, "time": "2007-04-24T19:15:55Z", "bug_id": 42228, "creation_time": "2007-04-24T19:15:55Z", "is_private": false, "text": "org.apache.batik.dom.events.EventListenerList#removeListener\n\nif not head. and found listner, we can't return at\n\n-----\n // Listener not present.\n return;\n-----\n\nwe must decrement counter \"n\" after remove listener\nfor keep EventListenerList proper condition.\n\n(if n is not correct, EventSupport#fireEventListeners outputs Exception. )"}, {"count": 1, "tags": [], "creator": "hajime-n@reso.co.jp", "attachment_id": null, "id": 102272, "time": "2007-04-24T19:41:13Z", "bug_id": 42228, "creation_time": "2007-04-24T19:41:13Z", "is_private": false, "text": "Index: C:/MyJob/work/ext/xml-\nbatik/sources/org/apache/batik/dom/events/EventListenerList.java\n===================================================================\n--- C:/MyJob/work/ext/xml-\nbatik/sources/org/apache/batik/dom/events/EventListenerList.java\n\t(revision 532165)\n+++ C:/MyJob/work/ext/xml-\nbatik/sources/org/apache/batik/dom/events/EventListenerList.java\n\t(working copy)\n@@ -91,18 +91,21 @@\n                 && listener == head.listener) {\n             head = head.next;\n         } else {\n+        \tboolean bFound = false;\n             Entry prev = head;\n             for (Entry e = head.next; e != null; e = e.next) {\n                 if ((namespaceURI != null && namespaceURI.equals\n(e.namespaceURI)\n                             || namespaceURI == null && e.namespaceURI == null)\n                         && e.listener == listener) {\n                     prev.next = e.next;\n+                    bFound = true;\n                     break;\n                 }\n                 prev = e;\n             }\n             // Listener not present.\n-            return;\n+            if(!bFound)\n+            \treturn;\n         }\n         counts.dec(namespaceURI);\n         n--;\n"}, {"count": 2, "tags": [], "creator": "cam@apache.org", "text": "Fixed in SVN now, thanks!", "id": 108677, "time": "2007-09-26T16:52:55Z", "bug_id": 42228, "creation_time": "2007-09-26T16:52:55Z", "is_private": false, "attachment_id": null}]