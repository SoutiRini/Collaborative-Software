[{"count": 0, "tags": [], "text": "When I login as a normail user, sudo to root, then use <exec> task to commit \nfiles, \n\n    <exec dir=\"/home/user/xxx\" executable=\"/usr/bin/cvs\">\n        <arg line=\"commit -m ''\"/>\n    </exec>\n\nI got error like this: \n\ncvs [commit aborted]: cannot commit files as 'root'\n\nHowever that should only occur when people login as root. And I've verified \nthat it does work in command line. Here is the explanation from CVS gurus for \nthat error: \n\n============\nIt's an intended feature, but it has more to do with maintaining\naccountability than security.  Since root is usually a shared account,\nCVS won't allow you to commit as root unless it can figure out who you\nreally are.  Logging in as yourself and then su'ing to root will usually\nallow CVS to figure out who you are, logging in as root won't. \n============\n\nDid anyone else hit this problem? Please let me know if there's a solution.\n\nThank you.", "attachment_id": null, "bug_id": 21083, "id": 39415, "time": "2003-06-25T14:14:02Z", "creator": "gcao@lemurnetworks.net", "creation_time": "2003-06-25T14:14:02Z", "is_private": false}, {"count": 1, "tags": [], "creator": "gus.heck@olin.edu", "attachment_id": null, "id": 39428, "time": "2003-06-25T15:41:16Z", "bug_id": 21083, "creation_time": "2003-06-25T15:41:16Z", "is_private": false, "text": "I think I had something like this... I have a build that runs as root, and sudos\nout of it to do cvs work... I think the problem crops up that cvs can't find\nyour home directory so you need to give it working home environement vareable\ntoo (I presume this is on a unix system from your dirs). Here is a snippet I use\n\n    <apply executable=\"sudo\"\n           dir=\"${dir.working}\"\n           parallel=\"false\"\n           failonerror=\"true\">\n      <env key=\"HOME\" value=\"/home/${user.cvs.commit}\"/>\n      <arg value=\"-u\"/>\n      <arg value=\"${user.cvs.commit}\"/>\n      <arg value=\"cvs\"/>\n      <arg value=\"commit\"/>\n      <arg value=\"-m\"/>\n      <arg value=\"auto-commit of symlink files\"/>\n      <srcfile/>\n      <fileset dir=\"${dir.working}\"\n               followSymlinks=\"false\">\n        <patternset refid=\"files.all.symlink\"/>\n      </fileset>\n    </apply>\n\nI supsect this is 100% cvs magic problems, so it probably shouldn't be in the\nAnt bugzilla. Invalidate if you concur..."}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 44501, "time": "2003-09-23T13:54:35Z", "bug_id": 21083, "creation_time": "2003-09-23T13:54:35Z", "is_private": false, "text": "I agree with Gus, this is a CVS setup problem, not an Ant problem (and nothing\nAnt could solve IMHO)."}]