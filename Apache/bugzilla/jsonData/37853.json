[{"attachment_id": null, "tags": [], "bug_id": 37853, "text": "Apache 2.0.55 configure parameters:\nCC=gcc CFLAGS='-DHARD_SERVER_LIMIT=1024' ./configure --prefix=/usr/local/apache2 \\\n--enable-modules=\"headers info mime_magic proxy proxy_ftp proxy_http\nproxy_connect rewrite so status usertrack\" \\\n--with-expat=$PWD/srclib/apr-util/xml/expat\n\nApache is used without additional modules. There are numerous rewrite rules and\nit uses mod_proxy to pass requests to jboss behind it.\n\nAfter a while we noticed that each of apache's 26 childs consumed 138 MB of\nmemory and error log states:\n[Fri Dec 09 14:03:14 2005] [error] (12)Not enough space: fork: Unable to fork\nnew process\n\n   PID USERNAME THR PR NCE  SIZE   RES STATE   TIME FLTS    CPU COMMAND\n 19075 www        1 59   0  138M 3400K sleep   0:00    0  0.00% httpd\n 19072 www        1 59   0  138M 3400K sleep   0:00    0  0.00% httpd\n 19074 www        1 59   0  138M 3400K sleep   0:00    0  0.00% httpd\n [...]\n\nI also noticed that 2.0.52 requests libgcc:\nbash-2.05$ ldd /usr/local/apache2/bin/httpd\n        libaprutil-0.so.0 =>     /usr/local/apache2/lib/libaprutil-0.so.0\n        libexpat.so.0 =>         /usr/local/apache2/lib/libexpat.so.0\n        libiconv.so.2 =>         /usr/local/lib/libiconv.so.2\n        libapr-0.so.0 =>         /usr/local/apache2/lib/libapr-0.so.0\n        libsendfile.so.1 =>      /usr/lib/libsendfile.so.1\n        librt.so.1 =>    /usr/lib/librt.so.1\n        libm.so.1 =>     /usr/lib/libm.so.1\n        libsocket.so.1 =>        /usr/lib/libsocket.so.1\n        libnsl.so.1 =>   /usr/lib/libnsl.so.1\n        libresolv.so.2 =>        /usr/lib/libresolv.so.2\n        libpthread.so.1 =>       /usr/lib/libpthread.so.1\n        libdl.so.1 =>    /usr/lib/libdl.so.1\n        libc.so.1 =>     /usr/lib/libc.so.1\n        libgcc_s.so.1 =>         /usr/local/lib/libgcc_s.so.1\n        libaio.so.1 =>   /usr/lib/libaio.so.1\n        libmd5.so.1 =>   /usr/lib/libmd5.so.1\n        libmp.so.2 =>    /usr/lib/libmp.so.2\n        libthread.so.1 =>        /usr/lib/libthread.so.1\n        /usr/platform/SUNW,Sun-Fire-V240/lib/libc_psr.so.1\n        /usr/platform/SUNW,Sun-Fire-V240/lib/libmd5_psr.so.1\n\nWe have one more similar environment on apache 2.0.52 and httpd doesn't request\nlibgcc nor it counsumes a lot of memory.It stays on around 6 MB per child.\n\nAny ideas what is going on?\n\nThanks a lot\n\n--\nMario Pranjic", "count": 0, "id": 83478, "time": "2005-12-09T15:38:56Z", "creator": "keeper@fly.srk.fer.hr", "creation_time": "2005-12-09T15:38:56Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jim@apache.org", "is_private": false, "text": "Cannot confirm this behavior.  Please test/confirm with more recent versions and reopen if needed.", "id": 106286, "time": "2007-08-03T08:07:27Z", "bug_id": 37853, "creation_time": "2007-08-03T08:07:27Z", "attachment_id": null}]