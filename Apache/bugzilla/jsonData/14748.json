[{"count": 0, "tags": [], "creator": "david@wheeler.net", "attachment_id": null, "id": 26736, "time": "2002-11-21T20:16:39Z", "bug_id": 14748, "creation_time": "2002-11-21T20:16:39Z", "is_private": false, "text": "The -ldbm argument to gcc on Mac OS X confuses gcc. This is because dbm is\nincluded in Mac OS X's libSystem library, which is always linked in by gcc, but\nthere is no libdbm.dylib file for gcc to find on the file system. This issue\ncrops up when one attempts to compile Apache with mod_ssl. This patch to\nsrc/Configure addresses the problem:\n\n--- Configure~  Wed Jul 24 13:41:23 2002\n+++ Configure   Wed Nov 20 16:56:49 2002\n@@ -532,11 +532,13 @@\n        OS='Mac OS X Server'\n        CFLAGS=\"$CFLAGS -DDARWIN -DMAC_OS_X_SERVER\"\n        DEF_WANTHSREGEX=yes\n+       DBM_LIB=\"\"\n        ;;\n     *-apple-darwin*)\n        OS='Darwin'\n        CFLAGS=\"$CFLAGS -DDARWIN\"\n        DEF_WANTHSREGEX=yes\n+       DBM_LIB=\"\"\n        ;;\n     *-dec-osf*)\n        OS='DEC OSF/1'\n\nI believe that the issue would be the same with Mac OS X Server, so I've changed\nthe DBM_LIB setting for that platform, too, although I've not tested it."}, {"count": 1, "tags": [], "bug_id": 14748, "text": "You can also explicitly use the System library for the DBM_LIB, and this might\nmake more sense conceptually. Here's the update patch.\n\n--- Configure~  Wed Jul 24 13:41:23 2002\n+++ Configure   Wed Nov 20 16:56:49 2002\n@@ -532,11 +532,13 @@\n        OS='Mac OS X Server'\n        CFLAGS=\"$CFLAGS -DDARWIN -DMAC_OS_X_SERVER\"\n        DEF_WANTHSREGEX=yes\n+       DBM_LIB=\"-lSystem\"\n        ;;\n     *-apple-darwin*)\n        OS='Darwin'\n        CFLAGS=\"$CFLAGS -DDARWIN\"\n        DEF_WANTHSREGEX=yes\n+       DBM_LIB=\"-lSystem\"\n        ;;\n     *-dec-osf*)\n        OS='DEC OSF/1'", "id": 26758, "time": "2002-11-22T01:15:37Z", "creator": "david@wheeler.net", "creation_time": "2002-11-22T01:15:37Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "trawick@apache.org", "text": "Can you specify which version of Mac OS you have?  Run src/helpers/GuessOS\nand show the output.\n\nIt is certain that this code worked at some time.  Perhaps Jaguar changed\nhow this code was provided.\n\nWe don't want to break Apache for folks with the older releases, so the\nchange needs to be version-specific.", "id": 26808, "time": "2002-11-22T18:26:23Z", "bug_id": 14748, "creation_time": "2002-11-22T18:26:23Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "david@wheeler.net", "attachment_id": null, "id": 26810, "time": "2002-11-22T19:03:23Z", "bug_id": 14748, "creation_time": "2002-11-22T19:03:23Z", "is_private": false, "text": "% src/helpers/GuessOS\npowerpc-apple-darwin6.2\n\nAFAIK, this never worked. I originally installed Apache/mod_ssl on Mac OS X\n10.1. At that time, I documented for other OS X users that they needed to\ninstall gdbm in order to get mod_ssl working:\n\n  http://david.wheeler.net/osx.html\n\nI got that information from this PDF:\n\n  http://homepage.mac.com/rgriff/files/mod_ssl.pdf\n\nI was unable to find any other documentation on the topic, but I can tell you\nthat in Mac OS X 10.1 and in 10.2, Apache would not configure with -ldbm:\n\n======== Error Output for sanity check ========\ncd ..; gcc  -DDARWIN -DMOD_SSL=208112 -DMOD_PERL -DUSE_PERL_SSI -I/sw/include\n-pipe -fno-common -no-cpp-precomp -fno-strict-aliasing -DUSE_HSREGEX -DEAPI\n-DUSE_APREQ -I./lib/apreq `./apaci` -I. -I/usr/local/lib/perl5/5.8.0/darwin/CORE\n -L/usr/local/src/openssl-0.9.6g/  -o helpers/dummy helpers/dummy.c -ldbm -lssl\n-lcrypto   -L/sw/lib -flat_namespace\n/usr/local/lib/perl5/5.8.0/darwin/auto/DynaLoader/DynaLoader.a\n-L/usr/local/lib/perl5/5.8.0/darwin/CORE -lperl -lm -lc  -lexpat\n/usr/bin/ld: can't locate file for: -ldbm\nmake: *** [dummy] Error 1\n============= End of Error Report =============\n\nIOW, \"-ldbm\" doesn't work with on Mac OS X, though I will likely file a bug\nreport with Apple asking them to make it a no-op the way \"-lm\" is.\n\nIf it ever worked, it was before I used Mac OS X, and therefore most likely was\nwith Mac OS X 10.0. I very seriously doubt that a significant number of users\nstill use that release.\n\nNote that this issue has been reported before:\n\n  http://www.mail-archive.com/modssl-users@modssl.org/msg10587.html\n  http://www.mail-archive.com/modssl-users@modssl.org/msg09679.html\n  http://archive.develooper.com/macosx@perl.org/msg02716.html\n\nHTH,\n\nDavid"}, {"count": 4, "tags": [], "creator": "david@wheeler.net", "text": "FYI, I've reported this issue to Apple. Radar # 3109002.", "id": 26818, "time": "2002-11-22T19:17:23Z", "bug_id": 14748, "creation_time": "2002-11-22T19:17:23Z", "is_private": false, "attachment_id": null}, {"text": "This does appear to still be a problem. Not sure if it's Apple's bug or\nApache's, but I'm still applying the patch every time I rebuild on Panther (Mac\nOS X 10.3).", "tags": [], "bug_id": 14748, "attachment_id": null, "count": 5, "id": 64235, "time": "2004-09-26T17:47:46Z", "creator": "david@wheeler.net", "creation_time": "2004-09-26T17:47:46Z", "is_private": false}]