[{"count": 0, "tags": [], "bug_id": 49776, "text": "Add an attribute \"execdepends\" to Target. Targets listed in execdepends are dependencies that -- as far as the current target is concerned -- are only executed if the current target is executed, i.e. if the current target hasn't been disabled via if/unless.\n\nThe resulting operational order for a given target would be:\n1) execute \"depends\" targets\n2) evaluate if/unless\n3) execute \"execdepends\" targets\n4) execute target body\nWhere the 3 and 4 are skipped if 2 determines that the target is disabled.\n\nThis feature would enable conditional dependencies as for example described in http://mail-archives.apache.org/mod_mbox/ant-user/201008.mbox/%3c20100817223510.GC15983@nmhq.net%3e.\n\nMore generally: Sometimes there are multiple ways to achieve a particular state (= target), where the one to pursue depends on the presence of certain inputs or settings, or some other condition. By \"multiple ways\", we mean based on inputs from different sources, i.e. different dependee targets. Consider the following dependency graph for example (dependencies go upwards):\n\n      F   G\n     / \\ / \\\n    C   D   E\n     \\ / \\ /\n      A   B\n       \\v/\n        T\n\nIndicated by the \"v\", target T can be achieved by either A _or_ B. Depending on some condition, we would want to execute either\n\n      F   G\n     / \\ /  \n    C   D    \n     \\ /    \n      A    \n       \\  \n        T\n\nor\n\n      F   G\n       \\ / \\\n        D   E\n         \\ /\n          B\n         /\n        T\n\nbut not both. And (as an additional example) if we execute an additional target S that depends on T and E, we would want to have either\n\n      F   G\n     / \\ / \\\n    C   D   E\n     \\ /    |\n      A     |\n       \\    |\n        T   |\n         \\ /\n          S\n\nor\n\n      F   G\n       \\ / \\\n        D   E\n         \\ /|\n          B |\n         /  |\n        T   |\n         \\ /\n          S\n\nbut again not both.\n\nThis is currently not possible with Ant, other than by complicated, redundant and hard-to-maintain instrumentation of all targets with additional ifs/unless', possibly having to AND/OR with existing ifs/unless'.\n\nWith execdefault, one could simply define\n\n    <target name=\"T-by-A\" if=\"t.by.a\" execdepends=\"A\"/>\n    <target name=\"T-by-B\" unless=\"t.by.a\" execdepends=\"B\"/>\n    <target name=\"T\" depends\"T-by-A, T-by-B\"/>\n\nand would not have to touch the definitions of A-G (and of S).", "id": 139208, "time": "2010-08-18T11:32:45Z", "creator": "info_issues.apache.org@nmhq.net", "creation_time": "2010-08-18T11:32:45Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "jglick@apache.org", "is_private": false, "id": 139211, "attachment_id": null, "bug_id": 49776, "creation_time": "2010-08-18T12:23:15Z", "time": "2010-08-18T12:23:15Z", "text": "Possible to work around using <antcall> in a conditionally executed target, or using ant-contrib's <if>, or <script>, etc."}, {"count": 2, "tags": [], "bug_id": 49776, "text": "AntCall, If etc. aren't real substitutes. If for example T does antcall B instead of depending on it, then invoking S will cause G and E to be executed twice. Also, properties etc. set by the antcall to A or B won't be seen by S. You effectively lose all benefits of Ant's dependency mechanism across the call.", "id": 139213, "time": "2010-08-18T13:35:07Z", "creator": "info_issues.apache.org@nmhq.net", "creation_time": "2010-08-18T13:35:07Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 49776, "text": "Instead of having conditional dependencies you could have conditional executions with actual Ant (xmlns:if|unless).", "id": 198517, "time": "2017-04-25T10:14:50Z", "creator": "jan@materne.de", "creation_time": "2017-04-25T10:14:50Z", "is_private": false, "attachment_id": null}]