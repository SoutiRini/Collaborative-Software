[{"count": 0, "tags": [], "bug_id": 33562, "attachment_id": null, "text": "Reply_timeout param told webserver to wait some time for reply to a forwarded \nrequest before considering the remote tomcat is dead and eventually switch to \nanother tomcat in a cluster group.\nBut in the case of the network trouble processing the application program, the \nunconditional switch to another tomcat generates double registration of data.\nTo prevent this, when recovery_options is larger than 1, reply_timeout has to \ninterrupt to switch to another tomcat and show the error page. \nTherefore, I made the following patches. \n\n--- jk_ajp_common.c.org        2004-12-24 20:18:10.000000000 +0900\n+++ jk_ajp_common.c    2005-02-14 23:25:57.000000000 +0900\n@@ -1421,6 +1421,14 @@\n                        \"Timeout will waiting reply from tomcat. \"\n                        \"Tomcat is down, stopped or network problems.\\n\");\n\n+                if (headeratclient == JK_FALSE) {\n+                    if (p->worker->recovery_opts & \nRECOVER_ABORT_IF_TCGETREQUEST)\n+                        op->recoverable = JK_FALSE;\n+                } else {\n+                    if (p->worker->recovery_opts & \nRECOVER_ABORT_IF_TCSENDHEADER)\n+                        op->recoverable = JK_FALSE;\n+                }\n+\n                 JK_TRACE_EXIT(l);\n                 return JK_FALSE;\n             }", "id": 70932, "time": "2005-02-14T15:29:39Z", "creator": "satout@intellilink.co.jp", "creation_time": "2005-02-14T15:29:39Z", "is_private": false}, {"count": 1, "tags": [], "creator": "mturk@apache.org", "attachment_id": null, "text": "Commited thanks!", "id": 70949, "time": "2005-02-14T19:08:45Z", "bug_id": 33562, "creation_time": "2005-02-14T19:08:45Z", "is_private": false}]