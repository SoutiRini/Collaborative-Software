[{"count": 0, "tags": [], "bug_id": 40463, "attachment_id": null, "id": 93331, "time": "2006-09-11T10:04:23Z", "creator": "arekm@maven.pl", "creation_time": "2006-09-11T10:04:23Z", "is_private": false, "text": "The problem looks like this:\n\n[root@web2 ~]# service httpd restart\nhttpd.prefork service is not running.\nStarting httpd.prefork service.....................................[ BUSY\n ]Terminated\nTerminated\nTerminated\n\nstracing shows for 2.0.59 and 2.2.3:\n\n2.0.59\n \n[root@pepe ~]# grep 'kill(' WYNIK\n28181 kill(28180, SIGTERM)              = 0\n \n \n2.2.3\n[root@pepe buildmpm-prefork]# grep 'kill(' WYNIK\n31818 kill(31818, SIGCHLD <unfinished ...>\n31818 kill(31818, SIGCHLD <unfinished ...>\n31855 kill(31854, SIGTERM)              = 0\n31854 kill(0, SIGTERM <unfinished ...>\n31818 kill(0, SIGTERM <unfinished ...>\n31810 kill(0, SIGTERM)                  = 0\n\nthats above after adding:\nCustomLog \"| /bin/cat - > /tmp/xx\" combined\n(normally I use vlogger here; /bin/cat is just for reproduction of the problem)\n\nThese kill(0...) seems to be comming from /bin/sh which is run by apache to run /\nbin/cat.\n\nAfter reverting (dropping entire line)\n((status = apr_procattr_cmdtype_set(procattr,\n                                          APR_SHELLCMD_ENV)) != APR_SUCCESS) \naddition from server/log.c everything is back to normal.\n\n\nWhy apr_procattr...(APR_SHELLCMD_ENV) was added here?"}, {"count": 1, "tags": [], "bug_id": 40463, "attachment_id": null, "id": 93332, "time": "2006-09-11T10:14:01Z", "creator": "arekm@maven.pl", "creation_time": "2006-09-11T10:14:01Z", "is_private": false, "text": "Problem caused by commit by trawick:\nhttp://svn.apache.org/viewvc?view=rev&revision=104019"}, {"count": 2, "tags": [], "text": "The problem is reproducible with pdksh as /bin/sh. I'm unable to reproduce with \nbash as /bin/sh for example.", "attachment_id": null, "id": 93333, "creator": "arekm@maven.pl", "time": "2006-09-11T10:42:17Z", "bug_id": 40463, "creation_time": "2006-09-11T10:42:17Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 40463, "text": ">Why apr_procattr...(APR_SHELLCMD_ENV) was added here?\n\nto correct a regression since Apache 1.3.  Some recipes floating around for\npiped loggers for years require that the logging program be started via the shell.\n\nkill(0,...  sends the signal to the whole proccess group.\n\nWhat is this \"service\" command?  Do you see any problems using apachectl?", "id": 93345, "time": "2006-09-11T13:53:14Z", "creator": "trawick@apache.org", "creation_time": "2006-09-11T13:53:14Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 40463, "text": "service is a shell script that cleans env and runs appropriate init script\n(service httpd start is clean env; /etc/rc.d/init.d/httpd start)\n\nI didn't see problems with apachectl because I wasn't using it actually.\n\nI'm using apache with that commit reverted for last almost 3 years now.", "id": 124890, "time": "2009-02-17T04:28:55Z", "creator": "arekm@maven.pl", "creation_time": "2009-02-17T04:28:55Z", "is_private": false, "attachment_id": null}]