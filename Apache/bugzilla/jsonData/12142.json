[{"count": 0, "tags": [], "creator": "jian.cai@sun.com", "attachment_id": null, "is_private": false, "id": 21926, "time": "2002-08-28T21:55:46Z", "bug_id": 12142, "creation_time": "2002-08-28T21:55:46Z", "text": "When the jsp page directive uses requst.getContextPath() expression in the file \npath. Tomcat throws complie error.\n\nThe Jsp is like:\n\n<%@page errorPage=\"<%=request.getContextPath()%>/jsp/error.jsp\" %>\n<BR>\n<BR>\n<p>\n...\n\nCompile Error log:\n\norg.apache.jasper.JasperException: /jsp/signinsuccess.jsp(0,22) attribute for %\n>\" is not properly terminated\n\tat org.apache.jasper.compiler.DefaultErrorHandler.jspError\n(DefaultErrorHandler.java:95)\n\tat org.apache.jasper.compiler.ErrorDispatcher.dispatch\n(ErrorDispatcher.java:440)\n\tat org.apache.jasper.compiler.ErrorDispatcher.jspError\n(ErrorDispatcher.java:170)\n\tat org.apache.jasper.compiler.Parser.parseAttributeValue\n(Parser.java:244)\n\tat org.apache.jasper.compiler.Parser.parseAttribute(Parser.java:208)\n\tat org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:163)\n\tat org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:176)\n\tat org.apache.jasper.compiler.ParserController.figureOutJspDocument\n(ParserController.java:294)\n\tat org.apache.jasper.compiler.ParserController.parse\n(ParserController.java:183)\n\tat org.apache.jasper.compiler.ParserController.parse\n(ParserController.java:160)\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:257)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:381)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:552)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:241)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:289)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:263)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.RequestListenerValve.invoke\n(RequestListenerValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:474)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2487)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.authenticator.SingleSignOn.invoke\n(SingleSignOn.java:415)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:405)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:380)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:508)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:533)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\n\n--------------------------------------------------------------------------------"}, {"count": 1, "tags": [], "creator": "kin-man.chung@sun.com", "attachment_id": null, "is_private": false, "id": 21931, "time": "2002-08-28T22:32:30Z", "bug_id": 12142, "creation_time": "2002-08-28T22:32:30Z", "text": "You test case contains two errors:\n\n1) You cannot use a rtexpr in a directive, therefore you cannot use <%=...%>\n2) \"<%=request.getContextPath()%>/jsp/error.jsp\" is not a well-formed rtexpr,\nwhich is of the form \"<%=...%>\".  Use '<%=request.getContextPath() +\n\"/jsp/error.jsp\" %>'."}]