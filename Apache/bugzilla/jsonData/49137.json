[{"count": 0, "attachment_id": null, "creator": "brad.macphee@newpace.ca", "text": "As you can see below, I'm using the symlink task to delete a symlink.  The build.xml has been simplified to the very minimum, so my use case isn't really obvious here, but what I provided still reproduces the problem.  Find the stack trace at the end of this description.\n\nHere are the details on the environment (java version, build xml, and relevant directory layout:\n\nmasheen# java -version\njava version \"1.6.0_18\"\nJava(TM) SE Runtime Environment (build 1.6.0_18-b07)\nJava HotSpot(TM) Server VM (build 16.0-b13, mixed mode)\n\n\nmasheen# pwd\n/home/bmacphee/project1\n\nmasheen# cat build.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project name=\"project1\" default=\"build\" basedir=\".\">\n    <target name=\"build\">\n        <symlink action=\"delete\" link=\"Templates\"/>\n    </target>\n</project>\n\n\nmasheen# ls -go\ntotal 9\nlrwxrwxrwx   1      12 Apr 16 09:47 Templates -> ../Templates\n-rw-r--r--   1     199 Apr 16 12:18 build.xml\n\nmasheen# ls -go ../\ntotal 9\ndrwxr-xr-x   2       2 Apr 16 09:47 Templates\ndrwxr-xr-x   2       4 Apr 16 12:19 project1\n\n\n\nmasheen# ant\nBuildfile: /home/bmacphee/project1/build.xml\n\nbuild:\n  [symlink] Removing symlink: Templates\n\nBUILD FAILED\n/home/bmacphee/project1/build.xml:4: java.lang.NullPointerException\n        at org.apache.tools.ant.util.SymbolicLinkUtils.isSymbolicLink(SymbolicLinkUtils.java:107)\n        at org.apache.tools.ant.util.SymbolicLinkUtils.isSymbolicLink(SymbolicLinkUtils.java:73)\n        at org.apache.tools.ant.util.SymbolicLinkUtils.deleteSymbolicLink(SymbolicLinkUtils.java:223)\n        at org.apache.tools.ant.taskdefs.optional.unix.Symlink.delete(Symlink.java:187)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:77)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:390)\n        at org.apache.tools.ant.Target.performTasks(Target.java:411)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1360)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1329)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1212)\n        at org.apache.tools.ant.Main.runBuild(Main.java:801)\n        at org.apache.tools.ant.Main.startAnt(Main.java:218)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)\n\nTotal time: 1 second", "id": 136205, "time": "2010-04-16T12:43:08Z", "bug_id": 49137, "creation_time": "2010-04-16T12:43:08Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 49137, "attachment_id": null, "text": "Apparently, if you create a File instance using new File(\"name\") and ./name\nis a symbolic link then this file's getParent() returns null.\n\nIf you create new File(new File(\".\"), \"name\") you get the current directory as\nparent.  Learn something new every day.\n\nAs a workaround for your case, use link=\"./Templates\" and the delete succeeds.\n\nFixed in svn revision 935064\n\nRealized that link is not resolved against basedir but against the current\nworking directory and didn't dare to change that for backwards compatibility -\nwill document that.\n\nMany thanks for the testcase.", "id": 136208, "time": "2010-04-16T16:05:09Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-16T16:05:09Z", "is_private": false}]