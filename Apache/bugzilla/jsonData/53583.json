[{"count": 0, "tags": [], "bug_id": 53583, "attachment_id": null, "text": "I've installed\n\n\trpm -qa | grep -i ^tomcat\n\t\ttomcat-lib-7.0.27-7.1.noarch\n\t\ttomcat-docs-webapp-7.0.27-7.1.noarch\n\t\ttomcat-javadoc-7.0.27-7.1.noarch\n\t\ttomcat-webapps-7.0.27-7.1.noarch\n\t\ttomcat-admin-webapps-7.0.27-7.1.noarch\n\t\ttomcat-servlet-3_0-api-7.0.27-7.1.noarch\n\t\ttomcat-7.0.27-7.1.noarch\n\t\ttomcat-el-2_2-api-7.0.27-7.1.noarch\n\t\ttomcat-jsp-2_2-api-7.0.27-7.1.noarch\n\n\nwith\n\n  update-alternatives --config java\n\t  There are 2 choices for the alternative java (providing\n\t  /usr/bin/java).\n\n\t    Selection    Path                                       Priority\n\t    Status\n\t  ------------------------------------------------------------\n\t    0            /usr/lib64/jvm/jre-1.7.0-openjdk/bin/java   17147\n\t    auto mode\n\t  * 1            /usr/lib64/jvm/jre-1.7.0-openjdk/bin/java   17147\n\t  manual mode\n\t    2            /usr/lib64/jvm/jre-1.7.0-sun/bin/java       1700\n\t    manual mode\n\non\n\n\tuname -a\n\t\tLinux svr 3.1.10-1.16-desktop #1 SMP PREEMPT Wed Jun 27\n\t\t05:21:40 UTC 2012 (d016078) x86_64 x86_64 x86_64\n\t\tGNU/Linux\n\nThis server is configured for dual-stack, with separate sockets intenionally/necessarily\nspecified for IPv6:\n\n\tgrep bindv6only /etc/sysctl.conf\n\t\tnet.ipv6.bindv6only = 1\n\nas defined at:\n\n\thttps://www.kernel.org/doc/man-pages/online/pages/man7/ipv6.7.html\n\n\t\tIPV6_V6ONLY (since Linux 2.4.21 and 2.6)\n\t\t              If this flag is set to true (nonzero),\n\t\t              then the socket is restricted to\n\t\t              sending and receiving IPv6 packets only.\n\t\t              In this case, an IPv4 and an\n\t\t              IPv6 application can bind to a single port\n\t\t              at the same time.\n\n\t\t              If this flag is set to false (zero), then\n\t\t              the socket can be used to\n\t\t              send and receive packets to and from an\n\t\t              IPv6 address or an IPv4-mapped\n\t\t              IPv6 address.\n\n\t\t              The argument is a pointer to a boolean\n\t\t              value in an integer.\n\n\t\t              The default value for this flag is defined\n\t\t              by the contents of the file\n\t\t              /proc/sys/net/ipv6/bindv6only.  The\n\t\t              default value for that file is 0\n\t\t              (false).\n\nI need Tomcat to listen/respond on IPv4 localhost @ 127.0.0.1.\n\nSo, reading here -\nhttp://tomcat.10.n6.nabble.com/Tomcat-uses-IPv6-td2164369.html#a2164371\n- and elsewhere, I set\n\n\tvi /etc/tomcat/tomcat.conf\n\t\t...\n\t\tJAVA_OPTS=\"Djava.net.preferIPv4Stack=true\n\t\t-Djava.net.preferIPv4Addresses=true\"\n\t\tCATALINA_OPTS=\"Djava.net.preferIPv4Stack=true\n\t\t-Djava.net.preferIPv4Addresses=true\"\n\t\t...\n\nnow, @ tomcat start,\n\n\tps ax | grep tomcat\n\t 6530 ?        Sl     0:03 /etc/alternatives/jre/bin/java\n\t -Djava.net.preferIPv4Stack=true\n\t -Djava.net.preferIPv4Addresses=true\n\t -Djava.net.preferIPv4Stack=true\n\t -Djava.net.preferIPv4Addresses=true -classpath\n\t :/usr/share/tomcat/bin/bootstrap.jar:/usr/share/tomcat/bin/tomcat-juli.jar:/usr/share/java/commons-daemon.jar\n\t -Dcatalina.base=/usr/share/tomcat\n\t -Dcatalina.home=/usr/share/tomcat -Djava.endorsed.dirs=\n\t -Djava.io.tmpdir=/var/cache/tomcat/temp\n\t -Djava.util.logging.config.file=/usr/share/tomcat/conf/logging.properties\n\t -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager\n\t org.apache.catalina.startup.Bootstrap start\n\nbut, Tomcat still listens only on IPv6 @ port 8080,\n\n\tsudo netstat -tlpn | grep java\n\t\ttcp        0      0 :::8080                 :::*                    LISTEN      13005/java\n\t\ttcp        0      0 127.0.0.1:8795          :::*                    LISTEN      9388/java\n\t\ttcp        0      0 127.0.0.1:8005          :::*                    LISTEN      13005/java\n\t\ttcp        0      0 :::8009                 :::*                    LISTEN      13005/java\n\n\nand is unavailable/unreachable @ 127.0.0.1\n\n\ttelnet 127.0.0.1 8080\n\t\tTrying 127.0.0.1...\n\t\ttelnet: connect to address 127.0.0.1: Connection refused\n\n\ttelnet ::1 8080\n\t\tTrying ::1...\n\t\tConnected to ::1.\n\t\tEscape character is '^]'.\n\t\ttelnet>\n\nreading here on this issue:\n\n\thttp://linux.derkeiler.com/Mailing-Lists/Debian/2009-12/msg01262.html\n\n\t\t\" ... Thus you should report a bug against Tomcat. Also you can replace \"net.ipv6.bindv6only=1\" with \"net.ipv6.bindv6only=0\" in your /etc/sysctl.d/ as a temporary solution. ...\"\n\nwhich, as per above, is not a viable/acceptable workaround.\n\nFwiw, in this config, any/all other apps on the box (nginx, varnish, apache, bind, dhcp(6), firewall, etc) are easily configured to listen on IPv4 &/or IPv6 (non)localhost addresses.", "id": 160793, "time": "2012-07-22T17:07:56Z", "creator": "k9157@operamail.com", "creation_time": "2012-07-22T17:07:56Z", "is_private": false}, {"count": 1, "tags": [], "text": "Bugzilla is not a support forum.  Since Tomcat works properly with both IPv4 and IPv6 on many, many thousands of installations, the problem is clearly with your setup and as such is inappropriate as a bugzilla entry.", "is_private": false, "id": 160794, "creator": "chuck.caldarale@unisys.com", "time": "2012-07-22T17:12:34Z", "bug_id": 53583, "creation_time": "2012-07-22T17:12:34Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 53583, "attachment_id": null, "text": "Bugzilla is not a support forum.  Since Tomcat works properly with both IPv4 and IPv6 on many, many thousands of installations, the problem is clearly with your setup and as such is inappropriate as a bugzilla entry.\n\nreally? just me?\n\nhttps://www.google.com/search?&q=IPv6+tomcat+bindv6only&oq=IPv6+tomcat+bindv6only", "id": 160795, "time": "2012-07-22T18:00:36Z", "creator": "k9157@operamail.com", "creation_time": "2012-07-22T18:00:36Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 53583, "attachment_id": null, "text": "Again, Bugzilla is not a support forum.\n\nThis bug report contains no information that demonstrates that this is a bug rather than configuration error. You have failed to include your connector configuration which I am pretty sure will show that this is indeed a configuration error.\n\nThe users list is the place to follow up on this, NOT Bugzilla.", "id": 160796, "time": "2012-07-22T19:12:01Z", "creator": "markt@apache.org", "creation_time": "2012-07-22T19:12:01Z", "is_private": false}]