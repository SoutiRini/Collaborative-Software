[{"attachment_id": null, "tags": [], "bug_id": 41260, "is_private": false, "count": 0, "id": 97444, "time": "2006-12-29T06:16:43Z", "creator": "fgiust@apache.org", "creation_time": "2006-12-29T06:16:43Z", "text": "Background:\nThrough the customization of the <Loader> and <Resources> elements in a context\ndefinition tomcat allow to plug in custom implementations that can handle a\nwebapp also if not assembled in a standard way.\nThis is especially useful during development and I saw several implementations\nof custom classloaders in the past (see for example the one used by the Sysdeo\ntomcat plugin for Eclipse, or other implementations for eclipse Webtools\nadapters): this makes possible for IDE users to develop and update classes\nwithout the need for fully republishing jars in WEB-INF/lib. The addition of a\ncustom classloader also needs the modification of the server (or common) loader\nin catalina.properties.\nBy using a custom DirContext is also possible to handle tld files that should be\nplaced in WEB-INF or in the META-INF directory of jars in the classpath by\n\"virtually publishing\" them to the WEB-INF dir, making a webapp with unexpanded\njars behave like a standard one.\n\nSince these \"development versions\" of a webapp classloader are fairly simple and\ncould be made very generic I think that it makes sense to add such a\ncustomizable classloader directly to the tomcat distribution.\n\nI have implemented two fairly simple extension that allow a \"virtualClasspath\"\nelement that can be used to configure additional classpath entries. This is a\nsample context configuration:\n\n<Context docBase=\"\\webapps\\mydocbase\">\n  <Loader className=\"org.apache.catalina.loader.VirtualWebappLoader\"\n              virtualClasspath=\"\\dir\\classes;\\somedir\\somejar.jar\"/>\n  <Resources className=\"org.apache.naming.resources.VirtualDirContext\"\n              virtualClasspath=\"\\dir\\classes;\\somedir\\somejar.jar\"/>\n</Context>\n\n\nI would be happy to see them integrated in the tomcat codebase, so that any\ndevelopment environment that needs a simplified way of loading webapps could\nmake use of it without having to reinvent them..."}, {"count": 1, "attachment_id": 19326, "bug_id": 41260, "is_private": false, "id": 97445, "time": "2006-12-29T06:17:39Z", "creator": "fgiust@apache.org", "creation_time": "2006-12-29T06:17:39Z", "tags": [], "text": "Created attachment 19326\nVirtualWebappLoader implementation (full file)"}, {"count": 2, "tags": [], "bug_id": 41260, "attachment_id": 19327, "text": "Created attachment 19327\nVirtualDirContext implementation (full file)", "id": 97446, "time": "2006-12-29T06:18:10Z", "creator": "fgiust@apache.org", "creation_time": "2006-12-29T06:18:10Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 41260, "is_private": false, "text": "Add as part of Committed revision 491995.\n\nThanks.\n", "id": 97549, "time": "2007-01-02T16:52:47Z", "creator": "funkman@joedog.org", "creation_time": "2007-01-02T16:52:47Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "fgiust@apache.org", "text": "Created attachment 19343\nVirtualDirContext enhancement\n\nThanks Tim, great news!\nCould you please also apply this patch to the newly committed\nVirtualDirContext? I just enhanced it to also handle tag files loaded from\nMETA-INF/tags dirs of referenced libraries, in order to fully emulate an\nassembled webapp.", "id": 97553, "time": "2007-01-03T01:28:42Z", "bug_id": 41260, "creation_time": "2007-01-03T01:28:42Z", "is_private": false, "attachment_id": 19343}, {"count": 5, "tags": [], "creator": "funkman@joedog.org", "text": "Done - Committed revision 492112.\n\nAlso added warning to javadocs that the files should be used for developmenet / \nIDE's only, not for production.\n", "id": 97555, "time": "2007-01-03T04:56:07Z", "bug_id": 41260, "creation_time": "2007-01-03T04:56:07Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 41260, "text": "This is quite incomplete:\n\na) can one can set a jars folder? This is unclear. One would have to set ALL jars 1 by 1 manually, instead of pointing to a dir other than web-inf/lib where the jars are discovered. Maybe it is supported but not indicated.\n\nb) are the path elements are absolute or relative to the docbase?\n\nc) the paths given ARE NOT overriding the content of web-inf/lib jars. This makes the added feature useless in the context of debugging/patching a .war or a .jar in the regular classpath. We need a kind of \"prepend\" to override the .war, (or any of web-inf/classes and web-inf/lib/*.jar).\n\n\nNote: According to the javadoc, the org.apache.naming.resources.VirtualDirContext is only required if you need .tld to be loaded externally too.\n", "id": 123477, "time": "2008-12-22T07:24:04Z", "creator": "quartz12h@yahoo.com", "creation_time": "2008-12-22T07:24:04Z", "tags": [], "is_private": false}, {"count": 7, "attachment_id": null, "bug_id": 41260, "text": "Still has no indication on how to prepend the classpath to override classes.\n\nStill no indication on how to add an entire jars folder.", "id": 129096, "time": "2009-07-23T12:51:48Z", "creator": "quartz12h@yahoo.com", "creation_time": "2009-07-23T12:51:48Z", "tags": [], "is_private": false}]