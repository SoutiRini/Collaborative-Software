[{"count": 0, "tags": [], "bug_id": 10381, "attachment_id": null, "is_private": false, "id": 18811, "time": "2002-07-01T18:29:32Z", "creator": "damon.hill@valtech.com", "creation_time": "2002-07-01T18:29:32Z", "text": "I have a setup.xml file that is called to setup the common environment \nvariables for my project. I call this setup.xml from the main project and then \neach subsequent subproject calls this setup as well. However, the problem \narises when I run the default target from my top level directory. The setup.xml \nworks fine in the top level however, the call to the first subproject fails due \nto an appearant CLASSPATH issue that should be resolved in the setup.xml call. \n\nexample run:\nant (from top level) \nerror: \nzeus:\n     [zeus] Processing 1 DTD \nto /view/dhill_i4_dev/vobs/TURBO_source/turbo1/util/src\n     [zeus] Exception in thread \"main\" java.lang.NoClassDefFoundError: \norg/enhydra/zeus/util/DTDSourceGenerator\n\nIf each subproject is ran from its own main directory, each default target call \noperates correctly. The problem only arises when we call the subprojects.\n\nThe Zeus target in the setup.xml is this:\n <!-- optional task to build zeus DTD object model -->\n   <taskdef name=\"zeus\"\n            classname=\"com.swa.ant.taskdefs.ZEUS\">\n      <classpath refid=\"project.tools.path\"/>\n   </taskdef>\n\nEchoing the classpath actually shows the zeus.jar file is being picked up \ncorrectly."}, {"count": 1, "attachment_id": 2224, "bug_id": 10381, "text": "Created attachment 2224\nBuild.xml file from the top level project", "id": 18812, "time": "2002-07-01T18:33:56Z", "creator": "damon.hill@valtech.com", "creation_time": "2002-07-01T18:33:56Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": 2225, "bug_id": 10381, "text": "Created attachment 2225\nSetup file called by each project in the build process", "id": 18813, "time": "2002-07-01T18:34:28Z", "creator": "damon.hill@valtech.com", "creation_time": "2002-07-01T18:34:28Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 10381, "attachment_id": 2226, "text": "Created attachment 2226\nThe UTIL subproject build.xml file - all subprojects follow this layout", "id": 18814, "time": "2002-07-01T18:35:15Z", "creator": "damon.hill@valtech.com", "creation_time": "2002-07-01T18:35:15Z", "is_private": false}, {"text": "As I don't have the proper environment to test, some things to check:\n\n* Does the resolution for your entity include work at all when you use the\n<ant> mechanism?\n\n* Does it work if you pass down project.tools.path via a nested <reference>\nelement in the calling build file?\n\n* Are you getting any \"Trying to override previous definition of task\" warnings?", "tags": [], "creator": "bodewig@apache.org", "is_private": false, "count": 4, "id": 18940, "time": "2002-07-03T14:04:45Z", "bug_id": 10381, "creation_time": "2002-07-03T14:04:45Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 10381, "attachment_id": null, "id": 18945, "time": "2002-07-03T14:48:51Z", "creator": "damon.hill@valtech.com", "creation_time": "2002-07-03T14:48:51Z", "is_private": false, "text": "Stefan--\n\nA few additional comments that I was going to add before you comment. In the \nUTIL build.xml file attached, there are two tasks for ZEUS. These tasks we have \nwritten ourselves. They are called two times in the particular ZEUS target. \nEach time it sets the variable javapackage to a different value: the first time \nto --> com.swa.turb.exceptions.xml and the second time it sets it to the value -\n-> com.swa.turbo.jms.config. However, when we run from the root directory and \ncall the util project's build.xml file and the all target, it only sets the \njavapackage variable ONCE in this target tot he com.swa.turbo.exceptions.xml \nvalue. This causes a javac compilation error when it attemps to find the \nMessageServiceConfig.java file under the wrong pacakge of \ncom.swa.turbo.exceptions.xml instead of the correct value \ncom.swa.turbo.jms.config. \n\nIf we run ant from the UTIL directory and call the 'all'target, it sets the \njavapackage correct for both passes through the ZEUS target. This is the most \npinpoint information I have been able to gather over the passed two days.\n\nDoes this help?\n\nI will attache the ZEUS.java file for you to look at as well.\n"}, {"count": 6, "tags": [], "bug_id": 10381, "text": "Created attachment 2251\nSource file for ZEUS task", "id": 18946, "time": "2002-07-03T14:50:42Z", "creator": "damon.hill@valtech.com", "creation_time": "2002-07-03T14:50:42Z", "is_private": false, "attachment_id": 2251}, {"count": 7, "tags": [], "text": "So it doesn't fail with the NoClassDefFoundError any longer?\n\nNoClassDefFound usually means you are able to load the task class, but cannot load\na class this class needs.  Are you sure you have all dependencies in the\nCLASSPATH?\n\nYou may also want to add project.tools.path to the classpath of your zeus\ntask invocation, I think it is org.enhydra.zeus.util.DTDSourceGenerator that\nyour task doesn't find.\n\nFinally - what is the difference between fork=true and false?\nYou fork a new VM in both cases, the only difference I see is that you don't\nchange the working directory and discard the return code if you set fork to\nfalse.", "attachment_id": null, "id": 19006, "creator": "bodewig@apache.org", "time": "2002-07-04T11:54:56Z", "bug_id": 10381, "creation_time": "2002-07-04T11:54:56Z", "is_private": false}, {"count": 8, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "Could this be a duplicate of Bug 10904?  Could you please try whether the problem\nis fixed if you use the latest nightly build?", "id": 20849, "time": "2002-08-09T15:00:58Z", "bug_id": 10381, "creation_time": "2002-08-09T15:00:58Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 10381, "text": "PING", "id": 23512, "time": "2002-09-27T09:40:28Z", "creator": "bodewig@apache.org", "creation_time": "2002-09-27T09:40:28Z", "is_private": false, "attachment_id": null}, {"text": "assume it is fixed now.", "tags": [], "creator": "bodewig@apache.org", "is_private": false, "count": 10, "id": 25940, "time": "2002-11-08T14:31:55Z", "bug_id": 10381, "creation_time": "2002-11-08T14:31:55Z", "attachment_id": null}]