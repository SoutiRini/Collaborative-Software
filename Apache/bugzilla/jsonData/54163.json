[{"count": 0, "tags": [], "bug_id": 54163, "attachment_id": null, "id": 163505, "time": "2012-11-18T11:39:10Z", "creator": "shivaprasad.s@trianz.com", "creation_time": "2012-11-18T11:39:10Z", "is_private": false, "text": "Dear Team,\n\nWe have a filter which is sending response back to the server with entity, the datagram has content-length header already but the Apache 2.2.21 is adding content length again to the http header.\n\nSay if the existing content-length header has 140, its adding 142 as an additional content length header, which is causing issue in Chrome browser which is restricting the multiple content length header with different values.\n\nCan you please advise on this.\n\nPlease let me know for further details.\n\nThank you!"}, {"count": 1, "text": "Can you post an example module and headers it generates?  When does your filter run and how does it set the content length?", "creator": "covener@gmail.com", "is_private": false, "id": 163506, "time": "2012-11-18T12:01:47Z", "bug_id": 54163, "creation_time": "2012-11-18T12:01:47Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "creator": "shivaprasad.s@trianz.com", "attachment_id": null, "text": "Thanks for the reply!\n\nBelow are the headers passsed to Apache by setting the content and headers for http response.\n\nexpires:0\npragma:no-cache\ncache-control=no-store, no-cache, private\ncontent-type=text/html\ncontent-length=140\n<html>......</html>\n\nHTTP headers passed to Browser from Apache webserver:\n\nexpires:0\npragma:no-cache\ncache-control=no-store, no-cache, private\ncontent-type=text/html\ncontent-length=140\nexpires:0\npragma:no-cache\ncache-control=no-store, no-cache, private\ncontent-type=text/html\ncontent-length=142  (Issue is here, the content length is 2 bytes extra)\nkeep-alive: time-out=5, max=95\nConnection: keep-alive\n<html>......</html>\n\nCan you please suggest whether we can do any thing for this,by adding additional transfer-code header or any alternative if available..\n\nThank you!", "id": 163516, "time": "2012-11-19T05:33:52Z", "bug_id": 54163, "creation_time": "2012-11-19T05:33:52Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 54163, "attachment_id": null, "is_private": false, "id": 163553, "time": "2012-11-20T12:37:27Z", "creator": "rpluem@apache.org", "creation_time": "2012-11-20T12:37:27Z", "text": "Try to omit the content length calculation in your filter and let httpd do this. If it can't it will switch to chunked encoding automatically.\nRegarding the two byte difference: The httpd code counts the amount of data that is sent as body. So if its two bytes more then your filter is calculating you likely have a bug in your filter or the content is changed again by a following filter."}, {"count": 4, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "id": 163554, "time": "2012-11-20T12:42:55Z", "bug_id": 54163, "creation_time": "2012-11-20T12:42:55Z", "is_private": false, "text": "How do you generate your headers? Via apr_table_set(n)(r->headers_out, ...)?"}, {"count": 5, "tags": [], "bug_id": 54163, "is_private": false, "text": "Yes we are using the apr_table_set ((req_rec)?req_rec->headers_out:NULL, name, (value?value:\"\"));\n(In reply to comment #4)\n> How do you generate your headers? Via apr_table_set(n)(r->headers_out, ...)?", "id": 163556, "time": "2012-11-20T13:41:50Z", "creator": "shivaprasad.s@trianz.com", "creation_time": "2012-11-20T13:41:50Z", "attachment_id": null}, {"count": 6, "text": "Never reported anywhere else, closing.", "bug_id": 54163, "is_private": false, "id": 172524, "time": "2014-01-20T00:18:05Z", "creator": "covener@gmail.com", "creation_time": "2014-01-20T00:18:05Z", "tags": [], "attachment_id": null}]