[{"count": 0, "text": "I ran JspC via the ant-task proposed by the JavaDocs (<taskdef \nclassname=\"org.apache.jasper.JspC\" name=\"jasper2\"/>) on a I think quite normal webapp like \nso:\n    <jasper2 verbose=\"0\"\n      uriroot=\"${webapp.dir}\"\n      outputDir=\"${jsp.output.dir}\"\n      \nclassDebugInfo=\"true\"\n      compile=\"true\"/>\n(running directly from jspc.sh made no \ndifference to the problem.)\n\nBut this failed at the first file with a NullPointerException in \nTagLibraryInfoImpl around line 212, which is a catch clause stating\n\t\tConstants.message(\n                    \n\"jsp.error.taglib.jarFileException\",\n\t\t    new Object[] {url.toString(), \nex.getMessage()},\n\t\t    Logger.ERROR);\n\nBut url is null in my situation.\nI investigated \nthe cause and found it to be around line 192 which says\n            if(ctxt.getClassLoader() != null &&\n              \nURLClassLoader.class.equals(ctxt.getClassLoader().getClass())\n                  && \npath.startsWith(\"/\"))\n              path = path.substring(1,path.length());\n\nIn my situation this \nresulted in the paths to JARs of taglibs I use to be truncated from \"/WEB-INF/lib/thejar.jar\" to \n\"WEB-INF/lib/thejar.jar\", which in turn of course causes a MalformedURLException at the next \nline,\n            url = ctxt.getResource(path);\nwhich is caught at the well-known catch-clause - but url is \nnull!\n\nFrankly, I don't understand the URLClassLoader thing at all, but what I do understand \nis that the catch-clause, which would have reported the malformed URL or some other useful \nException containing information about the problem at hand, instead produces a genuinely \nunhelpful NullPointerException.\n\nWhat confuses me most, though, is this: after I removed \nthe URLClassloader-statements, JspC compiled my webapp just fine...", "bug_id": 16532, "attachment_id": null, "id": 30242, "time": "2003-01-29T09:05:57Z", "creator": "wosc@wosc.de", "creation_time": "2003-01-29T09:05:57Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "rami.ojares@legosoft.net", "attachment_id": null, "id": 32736, "time": "2003-03-09T13:19:05Z", "bug_id": 16532, "creation_time": "2003-03-09T13:19:05Z", "is_private": false, "text": "I confirm this bug.\nI am using Tomcat 4.1.21.\nI could not get any jsp pages compiled\nthat had taglibraries (and their tld files\ninside jar) without commenting out the URLClassLoader\nstuff like Wolfgang reported."}, {"count": 2, "tags": [], "text": "This was fixed in 4.1.22\n\n*** This bug has been marked as a duplicate of 14302 ***", "is_private": false, "bug_id": 16532, "id": 53966, "time": "2004-03-14T17:21:56Z", "creator": "markt@apache.org", "creation_time": "2004-03-14T17:21:56Z", "attachment_id": null}]