[{"count": 0, "tags": [], "creator": "philippe.prados-renexter@renault.com", "attachment_id": null, "is_private": false, "id": 24192, "time": "2002-10-09T09:24:12Z", "bug_id": 13446, "creation_time": "2002-10-09T09:24:12Z", "text": "In a servlet, i want to forward to a JSP error page. For transmit the current \nexception, i set the attribute javax.servlet.error.exception in the request, \nand i forward to the error page. This page initialise the exception variable \nwith the exception. Then, in the error page, i call response.sendRedirect\n(\"/index.jsp\");\nBecause the variable \"javax.servlet.error.exception\" live when i call the \nsendRedirect, i receive the Tomcat error page and the sendRedirect can't work.\nI make a sample for check that. Create to JSP file in a webapp.\nTest.jsp\n========\n<%@ page errorPage=\"TestError.jsp\" %>\nTest.jsp\n<%\n  System.out.println(\"Test.jsp\");\n  request.setAttribute(\"javax.servlet.error.exception\",new Throwable());\n  Object n=null;\n  n.toString(); // This statement generate a null pointer exception\n%>\n\nTestError.jsp\n=============\n\nTestError.jsp\n<%\n  System.out.println(\"TestError.jsp\");\n// Next line for patch the bug\n//  request.removeAttribute(\"javax.servlet.error.exception\");\n  response.sendRedirect(request.getContextPath()+\"/index.jsp\");\n%>\n\nInvoke the Test.jsp page. Because the NullPointerException was throw, the page \nTestError.jsp is called. This page want to send a redirect to the page \nindex.jsp (must be present). But, you receive the Tomcat error page !\n\nBecause the servlet must be deconnected to JSP, normally, the JSP technique for \nmanage the error can be deconnected to the servlet engine. I think, in the \nErrorReportValve.java or ErrorDispatcherValve.c can detect this situation \n(reset this attribute AFTER the service() method, remember it's in error \npage, ...) Other servlet engine haven't this problem."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 51076, "time": "2004-01-23T19:22:39Z", "bug_id": 13446, "creation_time": "2004-01-23T19:22:39Z", "text": "This now works for me with the latest version of TC4 from CVS."}]