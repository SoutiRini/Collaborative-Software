[{"count": 0, "tags": [], "creator": "ms419@freezone.co.uk", "attachment_id": null, "is_private": false, "id": 84799, "time": "2006-01-20T04:15:23Z", "bug_id": 38325, "creation_time": "2006-01-20T04:15:23Z", "text": "It's not possible to determine AUTH_TYPE if the resource on which authentication\nis defined is interpreted by a handler\n\nI experienced this same problem a year ago -\nhttp://thread.gmane.org/gmane.comp.apache.user/44276\n\nCurrently, my problem is determining the AUTH_TYPE in PHP scripts using the CGI\nPHP server API\n\nI define authentication on a PHP resource - the Gallery PHP web gallery, for\ninstance - http://gallery.menalto.com/\n\nI then want to set the active Gallery user if appropriate HTTP authentication\nhas taken place. HTTP authentication is necessary to implement a WebDAV\ninterface - http://cgi.sfu.ca/~jdbates/moin/moin.cgi/Gallery&DAV\n\nUsing mod_php I can check the values of the REMOTE_USER & AUTH_TYPE environment\nvariables - using php-cgi I must check the value of the REDIRECT_REMOTE_USER\nenvironment variable - but there's no REDIRECT_AUTH_TYPE variable, so it's\nimpossible to determine the AUTH_TYPE in this case\n\nUsing php-cgi the REMOTE_USER & AUTH_TYPE variables correspond to authentication\ndefined on the php-cgi interpreter\n\nThis bug presents a serious problem for implementing HTTP authentication in\nGallery, since many installations use the CGI PHP server API. I haven't yet\nfound a work-around\n\nMany thanks!\n\nJack"}, {"count": 1, "tags": [], "bug_id": 38325, "text": "Using CGI you have AUTH_TYPE.  What you have using PHP is none of Apache's \nbusiness. ", "id": 84817, "time": "2006-01-20T14:52:08Z", "creator": "nick@webthing.com", "creation_time": "2006-01-20T14:52:08Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 38325, "text": "This is a problem with any resource where Apache is configured to use a handler\nor interpreter. Apache is configured to use a handler with 'Action my-handler\n/path/handlercgi' & 'AddHandler my-handler foo' or 'SetHandler my-handler'. This\nis not a problem only with PHP\n\nAuthentication defined on the *handler* (/path/handlercgi) using AuthType is\ndescribed by AUTH_TYPE & REMOTE_USER environment variables\n\nAuthentication defined on the *actual resource* using AuthType is described by\nREDIRECT_REMOTE_USER - but there is no REDIRECT_AUTH_TYPE environment variable!\n\nI just encountered this problem yet again, trying to determine the AUTH_TYPE in\nMoin where the Moin CGI is handled by CGIWrap\n\nAuthentication defined on CGIWrap is described by AUTH_TYPE & REMOTE_USER,\nauthentication defined on the Moin CGI is described by REDIRECT_REMOTE_USER -\nbut since there is no REDIRECT_AUTH_TYPE, it is impossible for Moin to tell what\nAUTH_TYPE was defined on the actual Moin CGI\n\nThanks again - Jack", "id": 86930, "time": "2006-03-16T19:48:40Z", "creator": "ms419@freezone.co.uk", "creation_time": "2006-03-16T19:48:40Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "nick@webthing.com", "attachment_id": null, "text": "Look, if you want to define environment variables REDIRECT_*, that's your \nbusiness.  It only becomes Apache's business if Apache claims to support a \nstandard that defines them.  CGI - which apache supports - certainly doesn't. \n \nApache doesn't define environment variable MORON_USER, either.  A third-party \nmodule is free to define any environment variableit wants, but that's none of \nApache's business. ", "id": 86940, "time": "2006-03-16T23:46:59Z", "bug_id": 38325, "creation_time": "2006-03-16T23:46:59Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "ms419@freezone.co.uk", "is_private": false, "count": 4, "id": 86979, "time": "2006-03-17T21:09:19Z", "bug_id": 38325, "creation_time": "2006-03-17T21:09:19Z", "text": "Fair enough - maybe it would be better to use AUTH_TYPE & REMOTE_USER variables\ndefined in CGI. I use REDIRECT_AUTH_TYPE only for symmetry with\nREDIRECT_REMOTE_USER which Apache already defines\n\nMy point is when authentication is defined on a resource using AuthType,\nauthentication which takes place should be described in AUTH_TYPE & REMOTE_USER\nvariables - as per CGI & usual Apache behavior\n\nBut in the common case that mod_actions defines a handler or interpreter,\nAUTH_TYPE & REMOTE_USER are blank - even though authentication takes place\n\nIn this case Apache defines REDIRECT_REMOTE_USER - for good reason: Otherwise it\nwould be impossible to work around blank REMOTE_USER & determine the\nauthenticated username\n\nBut since Apache doesn't also define REDIRECT_AUTH_TYPE it is impossible to work\naround blank AUTH_TYPE\n\nUse AUTH_TYPE & REMOTE_USER or REDIRECT_AUTH_TYPE & REDIRECT_REMOTE_USER - just\nplease let AUTH_TYPE be determined when authentication is defined on a resource\n& mod_actions defines a handler or interpreter. This problem has stung me\nseveral times with different configurations\n\nThis small patch extends Apache's current REDIRECT_REMOTE_USER approach to\nAUTH_TYPE - http://cgi.sfu.ca/~jdbates/tmp/apache/200603160/patch"}, {"count": 5, "tags": [], "bug_id": 38325, "text": "What's the status here?\n\nJack is in so far right, that Apache itself creates those standards in-compliant REDIRECT_* variables...\n\na) I never understood why,... and why it simply doesn't set the \"normal\" ones like \"REMOTE_USER\" in the redirection case,... any ideas?\nI mean this behaviour causes a lot of trouble as all applications need to support this Apache weirdness...\n\nb) If there was a good reason for the REDIRECT_* variables, then I agree that it's a problem not to have that counterpart for AUTH_TYPE.\n\n\nCheers,\nChris.\n\n\nbtw: bumping this to current apache versions, so that it gets attention again.", "id": 165977, "time": "2013-03-18T22:14:03Z", "creator": "calestyo@scientia.net", "creation_time": "2013-03-18T22:14:03Z", "is_private": false, "attachment_id": null}]