[{"count": 0, "tags": [], "bug_id": 15560, "text": "By holding down the F5 button (refresh) in Internet Explorer \nfor a few seconds Tomcat hangs. All threads in the pool becomes busy\nand are never recyled. \n\nA thread dump displays the following stack traces:\n\n\"Thread-30\" daemon prio=5 tid=0x0B23A5E8 nid=0x79c in Object.wait() \n[c01f000..c01fd88]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at java.lang.Object.wait(Object.java:426)\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:232)\n        - locked <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n\n\"Thread-29\" daemon prio=5 tid=0x0AF0D440 nid=0x7b4 in Object.wait() \n[bfdf000..bfdfd88]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at java.lang.Object.wait(Object.java:426)\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:232)\n        - locked <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n\n\"Thread-28\" daemon prio=5 tid=0x0AE01080 nid=0x7a0 in Object.wait() \n[bf9f000..bf9fd88]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at java.lang.Object.wait(Object.java:426)\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:232)\n        - locked <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n\n\"Thread-27\" daemon prio=5 tid=0x0AE00618 nid=0x448 in Object.wait() \n[bf5f000..bf5fd88]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at java.lang.Object.wait(Object.java:426)\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:232)\n        - locked <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n\n\"Thread-26\" daemon prio=5 tid=0x0AE00418 nid=0x7a8 in Object.wait() \n[bf1f000..bf1fd88]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at java.lang.Object.wait(Object.java:426)\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:232)\n        - locked <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n\n\"Thread-25\" daemon prio=5 tid=0x0AF70B98 nid=0x6d0 in Object.wait() \n[bedf000..bedfd88]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at java.lang.Object.wait(Object.java:426)\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:232)\n        - locked <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n\n\"Thread-24\" daemon prio=5 tid=0x0AD91690 nid=0x474 in Object.wait() \n[be9f000..be9fd88]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at java.lang.Object.wait(Object.java:426)\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:232)\n        - locked <02FE24C0> (a org.apache.tomcat.util.threads.ThreadPool)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n\n\n\nAnd shutting down tomcat generates the following exceptions:\n\n\n\n2002-dec-20 08:34:55 org.apache.tomcat.util.log.CommonLogHandler log\nALLVARLIG: Caught exception executing \norg.apache.tomcat.util.net.TcpWorkerThread@2e34bf, terminating thread\njava.lang.IllegalStateException\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:245)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n2002-dec-20 08:34:55 org.apache.tomcat.util.log.CommonLogHandler log\nALLVARLIG: Caught exception executing \norg.apache.tomcat.util.net.TcpWorkerThread@2e34bf, terminating thread\njava.lang.IllegalStateException\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:245)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n2002-dec-20 08:34:55 org.apache.tomcat.util.log.CommonLogHandler log\nALLVARLIG: Caught exception executing \norg.apache.tomcat.util.net.TcpWorkerThread@2e34bf, terminating thread\njava.lang.IllegalStateException\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:245)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n2002-dec-20 08:34:55 org.apache.tomcat.util.log.CommonLogHandler log\nALLVARLIG: Caught exception executing \norg.apache.tomcat.util.net.TcpWorkerThread@2e34bf, terminating thread\njava.lang.IllegalStateException\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:245)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n2002-dec-20 08:34:55 org.apache.tomcat.util.log.CommonLogHandler log\nALLVARLIG: Caught exception executing \norg.apache.tomcat.util.net.TcpWorkerThread@2e34bf, terminating thread\njava.lang.IllegalStateException\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:245)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)\n2002-dec-20 08:34:55 org.apache.tomcat.util.log.CommonLogHandler log\nALLVARLIG: Caught exception executing \norg.apache.tomcat.util.net.TcpWorkerThread@2e34bf, terminating thread\njava.lang.IllegalStateException\n        at org.apache.tomcat.util.threads.ThreadPool.runIt(ThreadPool.java:245)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:503)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n        at java.lang.Thread.run(Thread.java:536)", "id": 28095, "attachment_id": null, "creator": "ulf.ekstrom@tradeextensions.com", "creation_time": "2002-12-20T09:09:50Z", "time": "2002-12-20T09:09:50Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 15560, "attachment_id": null, "id": 28096, "time": "2002-12-20T09:33:41Z", "creator": "remm@apache.org", "creation_time": "2002-12-20T09:33:41Z", "is_private": false, "text": "The thread stacks look like that when they are waiting for work.\n\nThe exceptions on shutdown may happen when processing was in progress when the\npool was stopped.\n\n*** This bug has been marked as a duplicate of 15497 ***"}, {"count": 2, "tags": [], "creator": "ricardo@hottolink.co.jp", "is_private": false, "text": "I also got this problem.\nI got this problem only when using SSL (coyote connector).\n\nAfter I switched to the Old HTTP1.1 connector, everything worked fine.\n\nIf all the HTTPS requests are succesfully completed, nothing happens.\n\nI checked the number of active threads in the \"ThreadPool\"; some threads are \nnever released when the some invalid requests are received (only).\n\n\nMy environment:\nWindows 2000\nJDK Sun 1.4.0-b92\nTomcat 4.1.18\n", "id": 32762, "time": "2003-03-10T06:01:48Z", "bug_id": 15560, "creation_time": "2003-03-10T06:01:48Z", "attachment_id": null}]