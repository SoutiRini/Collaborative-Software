[{"count": 0, "tags": [], "creator": "yandapalli.harika@gmail.com", "text": "We have installed Apache 2.2.3 from source on Z Linux(RHEL 5.3).\n\nWe have choosen prefork mpm, while compiling apache.\n\n./configure \u2013prefix=/usr/local/apache \u2013enable-ssl \u2013with-mpm=prefork \u2013with-expat=builtin\n\nWe are running HTTP stress test on this machine. Our test sends HTTP get request to apache server. While the test is running we have seen some messages keeps coming in error_log.\n\nWe observe  some connections timeout messages in the error_log after running the test for some time.\n\n*****************************************************************\n[Thu May 21 06:31:11 2009] [info] server seems busy, (you may need to increase StartServers, or Min/MaxSpareServers), spawning 16 children, there are 11 idle, and 846 total children\n[Thu May 21 06:31:49 2009] [info] server seems busy, (you may need to increase StartServers, or Min/MaxSpareServers), spawning 8 children, there are 0 idle, and 881 total children\n[Thu May 21 06:31:50 2009] [info] server seems busy, (you may need to increase StartServers, or Min/MaxSpareServers), spawning 16 children, there are 13 idle, and 889 total children\n[Thu May 21 06:32:10 2009] [info] server seems busy, (you may need to increase StartServers, or Min/MaxSpareServers), spawning 8 children, there are 7 idle, and 902 total children\n[Thu May 21 06:32:11 2009] [info] server seems busy, (you may need to increase StartServers, or Min/MaxSpareServers), spawning 16 children, there are 12 idle, and 910 total children\n[Thu May 21 06:32:56 2009] [info] server seems busy, (you may need to increase StartServers, or Min/MaxSpareServers), spawning 8 children, there are 5 idle, and 929 total children\n[Thu May 21 06:33:01 2009] [debug] mpm_common.c(629): (70007)The timeout specified has expired: connect to listener on [::]:80\n[Thu May 21 06:33:07 2009] [debug] mpm_common.c(629): (70007)The timeout specified has expired: connect to listener on [::]:80\n\n**********************************************************************\n\nAfter this timeout message all our get transactions started failing.When i increase the timeout, \n\nAnd it is also showing messages like increase Min/MaxSpareSevers, even we increased that figure this message keeps coming.\n\n\n\nThis is prefork mpm file values(httpd-mpm.conf)\n\n*******************************************************\n# prefork MPM\n# StartServers: number of server processes to start\n# MinSpareServers: minimum number of server processes which are kept spare\n# MaxSpareServers: maximum number of server processes which are kept spare\n# MaxClients: maximum number of server processes allowed to start\n# MaxRequestsPerChild: maximum number of requests a server process serves\n#ListenBacklog 1000\n<IfModule mpm_prefork_module>\n    StartServers           20\n    MinSpareServers        15\n    MaxSpareServers       15\n    ServerLimit         2048\n    MaxClients          2048\n    MaxRequestsPerChild   0\n******************************************************\n\nThis is default conf file values (httpd-default.conf)\n\n*******************************\nTimeout 30\n\nKeepAlive on\n\nMaxKeepAliveRequests 0\n\nKeepAliveTimeout 4\n*********************************************\n\n\n\n\nWe doubt the server is not creating new connections after some time, it is breaking in between. Please help us to fix this issue.", "id": 127232, "time": "2009-05-21T04:23:30Z", "bug_id": 47233, "creation_time": "2009-05-21T04:23:30Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "trawick@apache.org", "text": "Please take this to a user support mailing list.  See http://httpd.apache.org/lists.html\n\n(One hint: Don't set MinSpareServers and MaxSpareServers to the same value.  Check the doc for those.)", "id": 127233, "time": "2009-05-21T04:33:59Z", "bug_id": 47233, "creation_time": "2009-05-21T04:33:59Z", "is_private": false, "attachment_id": null}]