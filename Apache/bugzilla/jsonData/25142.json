[{"count": 0, "tags": [], "bug_id": 25142, "is_private": false, "text": "If a SVG file contains an image tag which references a TIFF\n1 bpp CCITT T.6 like\n\n<?xml version=\"1.0\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\"\n\"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" \nxmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"450\" height=\"800\" viewBox=\"0 \n0 450 800\">\n\n        <image xlink:href=\"tests/resources/images/a4.tif\" \n               x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" />\n\n</svg>\n\n\nthe error\n\njava.lang.ArrayIndexOutOfBoundsException: 1728\n\tat java.awt.image.SinglePixelPackedSampleModel.setPixels\n(SinglePixelPackedSampleModel.java:670)\n\tat java.awt.image.WritableRaster.setPixels(WritableRaster.java:547)\n\tat sun.awt.image.SunWritableRaster.setPixels(SunWritableRaster.java:132)\n\tat org.apache.batik.ext.awt.image.GraphicsUtil.copyData_FALLBACK\n(GraphicsUtil.java:791)\n\tat org.apache.batik.ext.awt.image.GraphicsUtil.copyData\n(GraphicsUtil.java:810)\n\tat org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData\n(Any2sRGBRed.java:209)\n\tat org.apache.batik.ext.awt.image.rendered.AbstractRed.getData\n(AbstractRed.java:513)\n...\n\noccurs with org.apache.batik.apps.svgbrowser.Main.\nThis is done because the source has 1 band, the destination 3;\nAn ColorConvertOp is not done because the ColorSpaces are \ncompared; but the TIFFImage has the same ColorSpace as the Destination.\nFollowing change helpes me:\n\n \n * @version $Id: Any2sRGBRed.java,v 1.5 2003/04/11 13:57:59 vhardy Exp $ */\n\n199,200c199\n<             if (srcCM.getColorSpace() == dstCM.getColorSpace() \n<             \t&& srcCM.isCompatibleRaster(wr)) {\n---\n>             if (srcCM.getColorSpace() == dstCM.getColorSpace()) {", "id": 48391, "time": "2003-12-02T17:04:18Z", "creator": "klaus.bartz@coi.de", "creation_time": "2003-12-02T17:04:18Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 25142, "text": "I had to back this out because it caused problems with a number of PNG\nimages (as PNG is required by SVG and Tiff is not I choose the\nlesser of two evils).  If you can update the patch so it also\nworks with samples/tests/spec/color/colorProfile.svg I may reapply\nit.", "id": 48728, "time": "2003-12-09T11:59:57Z", "creator": "deweese@apache.org", "creation_time": "2003-12-09T11:59:57Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 25142, "attachment_id": null, "text": "Reassigning all open bugs to the development list.\nSorry for the mass mailing.", "id": 40380, "time": "2005-03-22T12:15:42Z", "creator": "deweese@apache.org", "creation_time": "2005-03-22T12:15:42Z", "is_private": false}, {"count": 3, "tags": [], "creator": "helder.magalhaes@gmail.com", "attachment_id": null, "text": "(In reply to comment #0)\n> If a SVG file contains an image tag which references a TIFF\n> 1 bpp CCITT T.6 like\n\nCould a sample TIFF file which reproduces this be attached to this report? As this is a somehow specific format, it could help reproducing this issue. :-)", "id": 122693, "time": "2008-11-21T04:32:02Z", "bug_id": 25142, "creation_time": "2008-11-21T04:32:02Z", "is_private": false}, {"count": 4, "tags": [], "creator": "jeremias@apache.org", "attachment_id": null, "is_private": false, "id": 122694, "time": "2008-11-21T05:02:21Z", "bug_id": 25142, "creation_time": "2008-11-21T05:02:21Z", "text": "https://svn.apache.org/repos/asf/xmlgraphics/fop/trunk/test/resources/images/tiff_group4.tif is a T.6 TIFF image."}, {"count": 5, "attachment_id": 22914, "bug_id": 25142, "text": "Created attachment 22914\nTest case adapted from comment 0\n\nThis is a tricky one. Downloaded the TIFF file sample and adapted the test case to realize that this isn't supported by most implementations... :-|\n\nRenders in:\n * Inkscape 0.46\n\nDoesn't render in:\n * Squiggle (Batik) 1.8pre\n * Firefox 3.0.1\n * Opera 9.62\n * ActiveX-based plug-ins:\n   * Adobe SVG Viewer 6.0 Development Release 1 (a.k.a. ASV6)\n   * Adobe SVG Viewer 3.03 (a.k.a. ASV3)\n   * Renesis Player 1.1.1\n   * Corel SVG Viewer 2.1 (a.k.a. CSV)\n   * GPAC 0.4.5-dev\n   * SVG Map Toolkit 0.7 (a.k.a. SMT)\n\nThis is mostly just for the record, but may save some time if someone else tries to find a working implementation. ;-)", "id": 122732, "time": "2008-11-21T10:22:14Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2008-11-21T10:22:14Z", "tags": [], "is_private": false}]