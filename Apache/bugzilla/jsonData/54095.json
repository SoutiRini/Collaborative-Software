[{"count": 0, "tags": [], "creator": "kustos@gmx.net", "attachment_id": 29546, "is_private": false, "id": 163155, "time": "2012-11-03T20:49:45Z", "bug_id": 54095, "creation_time": "2012-11-03T20:49:45Z", "text": "Created attachment 29546\npatch that supports gzipped versions of files\n\nIf you want to serve gzipped versions of files you often use a filter, valve or enable compression attribute on the connector. However this is suboptimal for several reasons. Compression has to be done in memory so the whole content has to be loaded into memory, the result is not cached meaning compression has to be done over agin and sendfile can't be used.\n\nThe most efficient way to implement gzip serving to generate gzipped versions of the resources at build time. Then use a custom filter that forwards to the gzipped version if the user agent supports it. This way sendfile can be used and compression is only done once at build time.\n\nIt would be nice if the DefaultServlet detected that there's a gzipped version of the resource and serves it when the client supports it. The Jetty DefaultServlet does exactly this:\n\nhttp://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/servlet/DefaultServlet.html\n\nPatch attached with tests and updated documentation."}, {"count": 1, "tags": [], "bug_id": 54095, "is_private": false, "text": "Thanks for the feature suggestion and the patch. This has been added to 8.0.x and will be included in 8.0.0-RC4 onwards.", "id": 170558, "time": "2013-10-10T21:25:23Z", "creator": "markt@apache.org", "creation_time": "2013-10-10T21:25:23Z", "attachment_id": null}]