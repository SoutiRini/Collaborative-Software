[{"count": 0, "tags": [], "creator": "jglick@apache.org", "attachment_id": null, "is_private": false, "id": 125224, "time": "2009-02-27T13:58:24Z", "bug_id": 46781, "creation_time": "2009-02-27T13:58:24Z", "text": "When Ant is run embedded, the container can set a default input handler - there is a method on Project for this. But it is pretty common for a script to request SecureInputHandler to read a password. If it does this, the container no longer has any way to substitute a preferred handler, so java.io.Console is used whether this makes sense or not.\n\nIn the case of the NetBeans IDE (see URL), it would like to pop up a dialog with a JPasswordField, and you can imagine other GUI embedders (or even CI servers) wanting to provide their own impls.\n\nWould like to introduce Project.setSecureInputHandler(InputHandler). Since <input classname=\"...\"> always loads exactly that, should introduce \"secure\" as a value for HandlerType. Scripts using this mode would get the handler defined by the project, SecureInputHandler if not set otherwise.\n\nOld scripts using classname=\"...SecureInputHandler\" would be unaffected; would be nice to provide the new behavior for these automatically, but that would mean you could not explicitly request SIH and nothing else. Possible trick: introduce\n\npublic class ConsoleSecureInputHandler extends SecureInputHandler {}\n\n(a no-op override), and treat <handler classname=\"...SecureInputHandler\"/> like <handler type=\"secure\"/>, with <handler classname=\"...ConsoleSecureInputHandler\"/> available for scripts which really do not want this to be overridden by a container.\n\nShould probably have CLI\n\n  -secureinputhandler <class>  the class which will handle secure input requests\n\nas well, useful for containers which fork Ant rather than embedding in-VM."}]