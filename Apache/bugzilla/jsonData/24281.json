[{"text": "File names on Unix and Windows platform can contain '&' character.\nWhen generating XML cvstagdiff report it need be properly escaped.\n\nSolution:\nAdd method to class: org.apache.tools.ant.taskdefs.cvslib.CvsTagEntry\n\n    public String getFile_XML_escaped() {\n\t\t// It seems that file names can contain only & characters\n\t\tif (m_filename.indexOf('&') < 0)\n\t\t\treturn m_filename;\n\t\tStringBuffer buf = new StringBuffer(m_filename);\n\t\tint index = 0;\n\t\twhile(true) {\n\t\t\tint pos = buf.toString().indexOf('&', index);\n\t\t\tif (pos < 0)\n\t\t\t\tbreak;\n\t\t\tindex = pos + 1;\n\t\t\tbuf.replace(pos, index, \"&amp;\");\n\t\t}\n        return buf.toString();\n    }\n\nUse this method instead of CvsTagEntry.getFile() in class \norg.apache.tools.ant.taskdefs.cvslib.CvsTagDiff method writeTagEntry:\nline 380:\n    private void writeTagEntry(PrintWriter writer, CvsTagEntry entry) {\n        writer.println(\"\\t<entry>\");\n        writer.println(\"\\t\\t<file>\");\n        writer.println(\"\\t\\t\\t<name>\" + entry.getFile_XML_escaped() \n+ \"</name>\");\n\n...", "tags": [], "bug_id": 24281, "is_private": false, "count": 0, "id": 46569, "time": "2003-10-31T08:31:36Z", "creator": "phil@mobilae.ru", "creation_time": "2003-10-31T08:31:36Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 24281, "attachment_id": 8844, "id": 46570, "time": "2003-10-31T08:33:38Z", "creator": "phil@mobilae.ru", "creation_time": "2003-10-31T08:33:38Z", "is_private": false, "text": "Created attachment 8844\nfixed CvsTagEntry.java"}, {"count": 2, "tags": [], "bug_id": 24281, "text": "Created attachment 8845\nfixed CvsTagDiff.java", "id": 46571, "time": "2003-10-31T08:34:45Z", "creator": "phil@mobilae.ru", "creation_time": "2003-10-31T08:34:45Z", "is_private": false, "attachment_id": 8845}, {"count": 3, "attachment_id": null, "creator": "riznob@hotmail.com", "is_private": false, "id": 46584, "time": "2003-10-31T17:55:43Z", "bug_id": 24281, "creation_time": "2003-10-31T17:55:43Z", "tags": [], "text": "I ran accross this issue a few months ago and solved it by renaming my files so \nthat they do not contain \"&\" characters."}, {"count": 4, "tags": [], "bug_id": 24281, "is_private": false, "text": "The patch might work for the ampersand in the filename. But I think the real\nclean solution is to use some specialized XML API to produce the document,\nrather than writing all \"from scratch\".\nI have had a look at this URL, I guess we should do something along these lines\nto  produce the output file of cvstagdiff.\nhttp://xml.apache.org/xerces2-j/faq-dom.html#faq-6", "id": 46945, "time": "2003-11-06T21:47:20Z", "creator": "antoine@apache.org", "creation_time": "2003-11-06T21:47:20Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 24281, "text": "Leverage the funcs in util.DOMElementWriter, no? --DD", "id": 46946, "time": "2003-11-06T21:49:53Z", "creator": "ddevienne@lgc.com", "creation_time": "2003-11-06T21:49:53Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "Makes sense, I did not know that we had this class. Cool !\nThanks for the suggestion.\n\nAntoine", "is_private": false, "bug_id": 24281, "id": 46951, "time": "2003-11-06T22:01:05Z", "creator": "antoine@apache.org", "creation_time": "2003-11-06T22:01:05Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "antoine@apache.org", "attachment_id": null, "is_private": false, "id": 49493, "time": "2003-12-21T17:39:13Z", "bug_id": 24281, "creation_time": "2003-12-21T17:39:13Z", "text": "*** Bug 25564 has been marked as a duplicate of this bug. ***"}, {"count": 8, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "while working on the subversion cousins of this task (and cvschangelog) I already\nwondered why we didn't use DOMElementWriter.\n", "id": 72366, "time": "2005-03-14T13:14:46Z", "bug_id": 24281, "creation_time": "2005-03-14T13:14:46Z", "is_private": false}, {"count": 9, "attachment_id": null, "creator": "bodewig@apache.org", "text": "should be fixed in CVS HEAD now.\n\nI'd appreciate it if you could try nightly build 2005-03-16 to verify it is\nfixed now.", "id": 72449, "time": "2005-03-15T16:03:39Z", "bug_id": 24281, "creation_time": "2005-03-15T16:03:39Z", "tags": [], "is_private": false}, {"count": 10, "attachment_id": null, "creator": "jkf@apache.org", "is_private": false, "id": 77142, "time": "2005-07-09T17:35:45Z", "bug_id": 24281, "creation_time": "2005-07-09T17:35:45Z", "tags": [], "text": "*** Bug 35674 has been marked as a duplicate of this bug. ***"}]