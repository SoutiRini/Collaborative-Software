[{"text": "I got a java application creates the following Collection structure:\n\n/opt/tests/test5\n\nby calling the following code\n\nCollection col = org.xmldb.api.DatabaseManager.getCollection(m_dbURL + path);\nif(col.getChildCollection(name) != null) return;\nCollectionManagementService service = (CollectionManagementService \ncol.getService(\"CollectionManagementService\", \"1.0\");\nservice.createCollection(name);\n\nthree times such that on the first run '/opt', then '/opt/tests' and \nfinally '/opt/tests/test5' is being created.\nThe problem that occurs since 1.1b4 is that though all corresponding directories\nin the file system are being created, only the 'opt' Collection is added to \nthe 'database.xml' file under '/system/SysConfig'.\nIf I then run my application a second time the 'tests' Collection is added and \non a third run 'test5' is created.\n\nI have also looked for a possible reason for this bug and I found out that \nwithin the 'flushConfig' method in 'org.apache.xindice.core.Database' the call \nfor 'getConfig().isDirty()' only returns true one time, after that it is false \nand so the changes of the configuration are not written down.\n\nI marked this as a major bug as this misbehaviour first of all results \nsometimes in a loss of data and secondary 'xmldbgui' does not display these \ncollections (which are created in the filesystem, but not added \nto 'database.xml') any more.\n\nMy current workaround is to set the if-statement within 'flushConfig' to always \ntrue, but as this is obviously not the best way, it would be nice if someone \ncould look for the real cause.\n\nGreetings\n\nBj\u00f6rn Eickvonder", "tags": [], "bug_id": 28783, "is_private": false, "count": 0, "id": 56868, "time": "2004-05-05T14:21:38Z", "creator": "b.eicki@gmx.net", "creation_time": "2004-05-05T14:21:38Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 28783, "text": "Assign to the list.", "id": 57671, "time": "2004-05-19T20:52:14Z", "creator": "vgritsenko@apache.org", "creation_time": "2004-05-19T20:52:14Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "vgritsenko@apache.org", "is_private": false, "id": 57672, "attachment_id": null, "bug_id": 28783, "creation_time": "2004-05-19T20:52:54Z", "time": "2004-05-19T20:52:54Z", "text": "This bug has been fixed in the Xindice CVS. Please check and report if any problem."}, {"count": 3, "attachment_id": null, "creator": "b.eicki@gmx.net", "is_private": false, "id": 57785, "time": "2004-05-21T10:10:35Z", "bug_id": 28783, "creation_time": "2004-05-21T10:10:35Z", "tags": [], "text": "Thank you, seems to work now. Sorry for not having assigned the bug to the \nlist, I simply left it blank so it was automatically assigned, next time I will \nassign bugs to the list directly."}, {"count": 4, "tags": [], "creator": "vgritsenko@apache.org", "text": "Don't worry about assigning bug, bugzilla config has been changed.", "id": 57792, "attachment_id": null, "bug_id": 28783, "creation_time": "2004-05-21T12:49:48Z", "time": "2004-05-21T12:49:48Z", "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 28783, "is_private": false, "id": 66164, "time": "2004-10-30T13:28:15Z", "creator": "vgritsenko@apache.org", "creation_time": "2004-10-30T13:28:15Z", "tags": [], "text": "*** Bug 31622 has been marked as a duplicate of this bug. ***"}, {"count": 6, "tags": [], "bug_id": 28783, "text": "*** Bug 33441 has been marked as a duplicate of this bug. ***", "id": 70976, "time": "2005-02-15T00:38:06Z", "creator": "vgritsenko@apache.org", "creation_time": "2005-02-15T00:38:06Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 28783, "is_private": false, "text": "*** Bug 38179 has been marked as a duplicate of this bug. ***", "id": 84382, "time": "2006-01-09T16:50:10Z", "creator": "vgritsenko@apache.org", "creation_time": "2006-01-09T16:50:10Z", "attachment_id": null}]