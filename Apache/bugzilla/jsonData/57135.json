[{"count": 0, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "id": 178711, "time": "2014-10-23T23:18:35Z", "bug_id": 57135, "creation_time": "2014-10-23T23:18:35Z", "is_private": false, "text": "EL 3.0 specification says in 1.22.2 \"Imports of Packages, Classes, and Static Fields\" that \"Importing a package imports all the classes in the package.\"\n\nI think that that is wrong and it shall actually say that it imports all *public* classes in the package.\n\nIt may result in spirituous conflicts during resolveClass() -- see the example below.\n\nConsider the following example:\n================================\nMr.Cameron has class com.cameron.Terminator and uses package import to make it accessible.\n\nImportHandler handler = new ImportHandler();\nhandler.importPackage(\"com.cameron\");\nhandler.resolveClass(\"Terminator\");\n\nIf it really were importing all classes from a package, the above code will run successfully on some JRE, but will fail on Oracle Java 7 JRE that has \"java.lang.Terminator\" class, due to ambiguity between the two classes.\n\nThe \"java.lang.Terminator\" class is not part of public API of a JRE. A JRE vendor is free to add such classes. It should not cause such spiritual failures.\n\n\nJavadoc for javax.el.ImportHandler in JavaEE 7 [1] says that resolveClass(String) throws ELException - if the class is <...> not public.\n\nIf resolveClass(String) method were changed to return 'null' for non-public classes instead of throwing an ELException, it would be a bit easier to implement.\n\n[1] http://docs.oracle.com/javaee/7/api/javax/el/ImportHandler.html"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 178738, "time": "2014-10-24T21:36:14Z", "bug_id": 57135, "creation_time": "2014-10-24T21:36:14Z", "is_private": false, "text": "I'm guessing you mean spurious rather than spirituous/spiritual.\n\nI agree the text in the spec is likely to be wrong but the text is clear. I suggest we seek clarification from the EG before continuing else we risk different behaviour in different implementations."}, {"count": 2, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "is_private": false, "id": 178750, "time": "2014-10-25T20:25:46Z", "bug_id": 57135, "creation_time": "2014-10-25T20:25:46Z", "text": "(In reply to Mark Thomas from comment #1)\n> I'm guessing you mean spurious rather than spirituous/spiritual.\n\nI meant unexpected and mysterious.\n \n> I agree the text in the spec is likely to be wrong but the text is clear. I\n> suggest we seek clarification from the EG before continuing else we risk\n> different behaviour in different implementations.\n\nOK. I am changing status to NEEDINFO for now.\n\nI think that if there are both public and non-public class from package imports, we would be pretty safe to prefer the public class."}, {"count": 3, "tags": [], "text": "https://java.net/jira/browse/UEL-41", "attachment_id": null, "id": 179418, "creation_time": "2014-12-01T21:44:05Z", "time": "2014-12-01T21:44:05Z", "creator": "markt@apache.org", "bug_id": 57135, "is_private": false}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 181528, "time": "2015-03-05T13:40:51Z", "bug_id": 57135, "creation_time": "2015-03-05T13:40:51Z", "is_private": false, "text": "There has been no input from the EG so lets proceed on the basis that this bug is valid."}, {"count": 5, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 181529, "time": "2015-03-05T13:57:31Z", "bug_id": 57135, "creation_time": "2015-03-05T13:57:31Z", "is_private": false, "text": "Fixed in trunk and 8.0.x for 8.0.21 onwards,"}]