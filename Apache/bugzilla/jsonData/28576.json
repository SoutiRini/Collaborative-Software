[{"attachment_id": null, "tags": [], "bug_id": 28576, "text": "System information:\nKernel 2.6.5, no 'exotic' modules loaded/built in \nGCC-3.3 w/ The GNU Standard C++ Library v3 dev files\nDistribution: Debian Sarge/Testing\n\nProblem:\nApache thinks STCP is enabled while it isn't, I've verified the bug on several \ndifferent installations. It effectively breaks the build process.\nThe compile runs fine until this error message is displayed:\n/bin/sh /usr/src/httpd-2.0.49/srclib/apr/libtool --silent --mode=compile gcc -\npthread  -D_XOPEN_SOURCE_EXTENDED -DHAVE_CONFIG_H -DLINUX=2 -D_REENTRANT -\nD_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE   -\nI../../include -I../../include/arch/unix -I../../include/arch/unix  -c \nsockopt.c && touch sockopt.lo\nsockopt.c: In function `apr_socket_opt_set':\nsockopt.c:216: error: `SCTP_NODELAY' undeclared (first use in this function)\nsockopt.c:216: error: (Each undeclared identifier is reported only once\nsockopt.c:216: error: for each function it appears in.)\nmake[4]: *** [sockopt.lo] Error 1\nmake[4]: Leaving directory `/usr/src/httpd-2.0.49/srclib/apr/network_io/unix'\nmake[3]: *** [all-recursive] Error 1\nmake[3]: Leaving directory `/usr/src/httpd-2.0.49/srclib/apr/network_io/unix'\nmake[2]: *** [all-recursive] Error 1\nmake[2]: Leaving directory `/usr/src/httpd-2.0.49/srclib/apr'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/usr/src/httpd-2.0.49/srclib'\nmake: *** [all-recursive] Error 1\n\nApache is configured with:\n--enable-so --enable-auth-anon=shared --enable-auth-dbm=shared \\\n--enable-auth-digest=shared --enable-charset-lite=shared \\\n--enable-case-filter=shared --enable-case-filter-in=shared \\\n--enable-deflate=shared --enable-logio --enable-mime-magic=shared \\\n--enable-expires=shared --enable-headers=shared --enable-usertrack=shared \\\n--enable-unique-id=shared --enable-http --enable-info=shared \\\n--enable-vhost-alias=shared --enable-speling=shared --enable-rewrite=shared\n\nPossible temp. fixes: install lkstcp\nChipig@freenet gave me this information:\n\"I believe its an error in our m4 code for detection of support.\"\nMy config.log is available at http://040.sytes.net/config.log", "count": 0, "id": 56346, "time": "2004-04-25T02:10:06Z", "creator": "henric@digital-bless.com", "creation_time": "2004-04-25T02:10:06Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 28576, "attachment_id": 11323, "id": 56347, "time": "2004-04-25T02:20:49Z", "creator": "chip@force-elite.com", "creation_time": "2004-04-25T02:20:49Z", "is_private": false, "text": "Created attachment 11323\ntry to use SCTP_NODELAY to detect SCTP Support"}, {"count": 2, "tags": [], "creator": "chip@force-elite.com", "attachment_id": null, "id": 56348, "time": "2004-04-25T02:23:17Z", "bug_id": 28576, "creation_time": "2004-04-25T02:23:17Z", "is_private": false, "text": "It looks like the 2.6 Kernel headers add IPPROTO_SCTP even when support is not\navailable.  This means the old test will return that SCTP support is enabled\nwhen it truely is not, and bomb out later in the compile.\n\nThe patch attempts to use SCTP_NODELAY to make sure SCTP support is really there.\n\nnote: i don't have a 2.6 machine with this issue, so i was unable to test this\npatch."}, {"count": 3, "tags": [], "bug_id": 28576, "attachment_id": null, "id": 56349, "creation_time": "2004-04-25T02:38:20Z", "time": "2004-04-25T02:38:20Z", "creator": "henric@digital-bless.com", "text": "I'd like to verify that Paul Querna's patch worked excellent after I applied it \nto my source and ran buildconf.", "is_private": false}, {"count": 4, "tags": [], "bug_id": 28576, "text": "Thanks Paul.  Committed a cleaned up version to HEAD and the 0.9 branch.", "id": 58752, "attachment_id": null, "creator": "jorton@redhat.com", "creation_time": "2004-06-04T13:20:33Z", "time": "2004-06-04T13:20:33Z", "is_private": false}]