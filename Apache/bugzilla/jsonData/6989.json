[{"count": 0, "tags": [], "creator": "thomas.maier@sdm.de", "attachment_id": null, "is_private": false, "id": 11575, "time": "2002-03-08T14:23:49Z", "bug_id": 6989, "creation_time": "2002-03-08T14:23:49Z", "text": "In our production environment we observe a strange exception during JSP \ncompilation, which after our interpretation is due to a bug in Tomcat.\n\nOur JSP contain these statements:\n\n<%\n%><%@taglib uri=\"/WEB-INF/tld/struts-logic.tld\" prefix=\"logic\"%><%\n%><%@taglib uri=\"/WEB-INF/tld/struts-bean.tld\" prefix=\"bean\"%>\n\nNormally, this works, i.e. the tld files are found, the JSP are compiled, and \nthe application works fine. However from time to time we get the following kind \nof exception if we start Tomcat and try to surf our site:\n\norg.apache.jasper.compiler.CompileException:\n/var/coremedia-3.2.7/de/generator/coremedia/templates/Redesign/vision/10hheaders\nssl.jsp(33,2)\nUnable to open taglibrary /WEB-INF/tld/struts-bean.tld : null\n\n(The full stack trace will be given below.) Note that we get this exception \nwithout modifying our application. Especially the tld files and the jar files \nwith the tag handler classes are unmodified and have the same permissions as \nwhen the application works without problems. The error is difficult to \nreproduce, but occurs often enough to be a real problem for the production \nenvironment.\n\nWe assume that the problem has something to do with parallel requests beeing \nprocessed in Tomcat during JSP compilation for the following reasons:\n\n   - We have quite a lot of web servers for the site (something about 50 \nmachines), with different hardware architectures, but all running Sun Solaris 8 \nas operating system. Some people claim to have observed that the problem occurs \nsignificantly more often on multiprocessor machines. \n\n   - Currently we help ourselves by calling every JSP once with a script before \nexposing a server to real user requests. The script requests the pages \nsequentially so that the JSP are compiled without parallel load on the server. \nThis does not really solve the problem, but makes it to occur with less \nprobability. \n\nWe have observed the exception with Tomcat 3.2.2 as well as with Tomcat 3.2.3. \nWe use a Sun JDK 1.3.x on Sun Solaris 8 with different hardware. Many machines \nhave more than one CPU.\n\nHere follows an example for the exception with full stack trace. It was observed \nwith Tomcat 3.2.2:\n\norg.apache.jasper.compiler.CompileException:\n/var/coremedia-3.2.7/de/generator/coremedia/templates/Redesign/vision/10hheaders\nssl.jsp(33,2)\nUnable to open taglibrary /WEB-INF/tld/struts-bean.tld : null\n at\norg.apache.jasper.compiler.JspParseEventListener.handleDirective(JspParseEventLi\nstener.java:713)\n\n at\norg.apache.jasper.compiler.DelegatingListener.handleDirective(DelegatingListener\n.java:116)\n\n at org.apache.jasper.compiler.Parser$Directive.accept(Parser.java:215)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1077)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1042)\n at org.apache.jasper.compiler.Parser$Tag.accept(Parser.java:833)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1077)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1042)\n at org.apache.jasper.compiler.Parser$Tag.accept(Parser.java:833)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1077)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1042)\n at org.apache.jasper.compiler.Parser$Tag.accept(Parser.java:833)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1077)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1042)\n at org.apache.jasper.compiler.Parser$Tag.accept(Parser.java:833)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1077)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1042)\n at org.apache.jasper.compiler.Parser$Tag.accept(Parser.java:833)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1077)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1042)\n at org.apache.jasper.compiler.Parser.parse(Parser.java:1038)\n at org.apache.jasper.compiler.Compiler.compile(Compiler.java:209)\n at org.apache.jasper.servlet.JspServlet.doLoadJSP(JspServlet.java:612)\n at\norg.apache.jasper.servlet.JasperLoader12.loadJSP(JasperLoader12.java:146)\n\n at org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:542)\n at\norg.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary(JspServle\nt.java:258)\n\n at\norg.apache.jasper.servlet.JspServlet$JspServletWrapper.service(JspServlet.java:2\n68)\n\n at\norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:429)\n\n at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:500)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n at\norg.apache.tomcat.core.ServletWrapper.doService(ServletWrapper.java:405)\n\n at org.apache.tomcat.core.Handler.service(Handler.java:287)\n at\norg.apache.tomcat.core.ServletWrapper.service(ServletWrapper.java:372)\n at\norg.apache.tomcat.facade.RequestDispatcherImpl.doForward(RequestDispatcherImpl.j\nava:222)\n\n at\norg.apache.tomcat.facade.RequestDispatcherImpl.forward(RequestDispatcherImpl.jav\na:162)\n\n at\nhox.corem.servlets.GeneratorServlet.service(GeneratorServlet.java:431)\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n at\norg.apache.tomcat.core.ServletWrapper.doService(ServletWrapper.java:405)\n\n at org.apache.tomcat.core.Handler.service(Handler.java:287)\n at\norg.apache.tomcat.core.ServletWrapper.service(ServletWrapper.java:372)\n at\norg.apache.tomcat.core.ContextManager.internalService(ContextManager.java:797)\n\n at\norg.apache.tomcat.core.ContextManager.service(ContextManager.java:743)\n at\norg.apache.tomcat.service.http.HttpConnectionHandler.processConnection(HttpConne\nctionHandler.java:213)\n\n at\norg.apache.tomcat.service.TcpWorkerThread.runIt(PoolTcpEndpoint.java:416)\n\n at\norg.apache.tomcat.util.ThreadPool$ControlRunnable.run(ThreadPool.java:501)\n\n at java.lang.Thread.run(Thread.java:484)"}, {"count": 1, "tags": [], "creator": "sriramnrn@gmail.com", "attachment_id": null, "id": 93423, "time": "2006-09-12T16:39:47Z", "bug_id": 6989, "creation_time": "2006-09-12T16:39:47Z", "is_private": false, "text": "Thank you for your detailed bug report. Tomcat 3.2.3 is no longer supported. If\nyou experience the same problems with the latest stable Tomcat releases, do\nwrite in to the tomcat-user mailing list."}]