[{"count": 0, "tags": [], "bug_id": 33806, "attachment_id": null, "is_private": false, "id": 71714, "time": "2005-03-02T13:57:57Z", "creator": "christoph@dahlen.org", "creation_time": "2005-03-02T13:57:57Z", "text": "It seems that Tomcat 5.0.28 (at least) fails to track session using URL\nrewriting (whith no cookies), when the client converts the reserved characters ;\nand = in a rewritten URL, rendering what was supposed to be ;jsessionid= as\n%3Bjsessionid%D.\n\nI had a look at RFC 2396, but did not figure out, wether URL encoding in path\npart of URI is valid. Is it?"}, {"count": 1, "attachment_id": null, "bug_id": 33806, "is_private": false, "id": 72743, "time": "2005-03-23T17:17:59Z", "creator": "remm@apache.org", "creation_time": "2005-03-23T17:17:59Z", "tags": [], "text": "The client needs to preserve path parameters, otherwise it will not work."}, {"count": 2, "attachment_id": null, "bug_id": 33806, "text": "(In reply to comment #1)\n> The client needs to preserve path parameters, otherwise it will not work.\n\nI'm well aware of that. Question was: by performing an URL encoding on reserved\ncharacters ; and :, it the client actually doing something illegal or should\ntomcat be able to handle it?", "id": 72838, "time": "2005-03-25T12:00:24Z", "creator": "christoph@dahlen.org", "creation_time": "2005-03-25T12:00:24Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 33806, "text": "';' is reserved, because it is used to define path parameters (such as the\nsession id). If it is encoded, it becomes a regular part of the URI.", "id": 72839, "time": "2005-03-25T12:06:38Z", "creator": "remm@apache.org", "creation_time": "2005-03-25T12:06:38Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 33806, "attachment_id": null, "id": 72843, "time": "2005-03-25T14:33:46Z", "creator": "christoph@dahlen.org", "creation_time": "2005-03-25T14:33:46Z", "is_private": false, "text": "(In reply to comment #3)\n> ';' is reserved, because it is used to define path parameters (such as the\n> session id). If it is encoded, it becomes a regular part of the URI.\n\nOkay, thank you for clearing that out."}, {"count": 5, "tags": [], "text": "I've verified with 5.0.28 and Tomcat DOES unescape %3b (;) and %3d (=) before\nextracting ;jsessionid= \n\nI don't understand what was tested by the person who opened this bug.  Maybe the\nproblem was with the %D in the example... It should be %3D, so I believe his\ntest was incorrect.\n\nIt's very simple to test using the session example (assume session\n1A1D98B86F2E813CC27BDCC214C73285 is already created):\n\n$telnet localhost 8080\nGET\n/servlets-examples/servlet/SessionExample%3Bjsessionid%3D1A1D98B86F2E813CC27BDCC214C73285\nHTTP/1.1\nHost: localhost\n\nHTTP/1.1 200 OK\nContent-Type: text/html;charset=ISO-8859-1\nContent-Length: 1285\nDate: Fri, 16 Dec 2005 20:18:20 GMT\nServer: Apache-Coyote/1.1\n\n<html>\n<body bgcolor=\"white\">\n<head>\n<title>Sessions Example</title>\n</head>\n<body>\n<a href=\"../sessions.html\">\n<img src=\"../images/code.gif\" height=24 width=24 align=right border=0 alt=\"view\ncode\"></a>\n<a href=\"../index.html\">\n<img src=\"../images/return.gif\" height=24 width=24 align=right border=0\nalt=\"return\"></a>\n<h3>Sessions Example</h3>\nSession ID: 1A1D98B86F2E813CC27BDCC214C73285\n<br>\nCreated:\nFri Dec 16 15:13:30 EST 2005<br>\nLast Accessed:\nFri Dec 16 15:13:52 EST 2005\n<P>\nThe following data is in your session:<br>\nfoo = bar<br>\n<P>\n<form action=\"SessionExample;jsessionid=1A1D98B86F2E813CC27BDCC214C73285\"\nmethod=POST>\nName of Session Attribute:\n<input type=text size=20 name=dataname>\n<br>\nValue of Session Attribute:\n<input type=text size=20 name=datavalue>\n<br>\n<input type=submit>\n</form>\n<P>GET based form:<br>\n<form action=\"SessionExample;jsessionid=1A1D98B86F2E813CC27BDCC214C73285\"\nmethod=GET>\nName of Session Attribute:\n<input type=text size=20 name=dataname>\n<br>\nValue of Session Attribute:\n<input type=text size=20 name=datavalue>\n<br>\n<input type=submit>\n</form>\n<p><a\nhref=\"SessionExample;jsessionid=1A1D98B86F2E813CC27BDCC214C73285?dataname=foo&datavalue=bar\"\n>URL encoded </a>\n</body>\n</html>\n</body>\n</html>\n\nI totally agree with Remy analysis regarding preserving reserved characters in\nthe URI (http://www.ietf.org/rfc/rfc2396.txt).  I'm reopening the bug because I\nbelieve that tomcat should have failed retrieving session when URI is encoded as\nabove.  Considering Tomcat is a reference implementation, I would have expected\na strict behaviour.  Weblogic 8.1 and WebSphere Application Server 5.1.1.7 do\nnot unescape the path portion and path parameters of the URI.\n\nIt is wrong for a HTTP User agent to encode reserved characters in a URI placed\nin a document (i.e. HTML, VoiceXML, etc.).  Believe it or not, I'm using a\nVoiceXML platform embedding two different HTTP user agents that have this\nproblem.  argh!", "attachment_id": null, "bug_id": 33806, "id": 83750, "time": "2005-12-16T21:47:28Z", "creator": "gawix@yahoo.com", "creation_time": "2005-12-16T21:47:28Z", "is_private": false}, {"count": 6, "tags": [], "text": "Downgrading priority because the behavior is more lenient (i.e. works when\n*maybe* it shouldn't) instead of being broken when it should work.  \n\nJean-Philippe, thank you for your explanation of the issue.  If you could test\nthis issue on 5.5.16 or 5.5.17 and inform us of your findings, that'd be great.", "is_private": false, "bug_id": 33806, "id": 88267, "time": "2006-04-19T13:19:01Z", "creator": "yoavs@computer.org", "creation_time": "2006-04-19T13:19:01Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 33806, "attachment_id": null, "id": 92702, "time": "2006-08-30T03:18:03Z", "creator": "markt@apache.org", "creation_time": "2006-08-30T03:18:03Z", "is_private": false, "text": "The root cause of this is the same although the observed effects are very different.\n\nI have tested using the servlet examples and the behaviour is now correct.\n\n*** This bug has been marked as a duplicate of 36905 ***"}]