[{"count": 0, "tags": [], "text": "I have installed J2SE v1.4.1 and Windows XP SP1 on my Pentium 4 PC.\nI downloaded jakarta-tomcat-4.1.12-LE-jdk14.exe, installed it successfully, and\nstarted up Tomcat4 running startup.bat. Then, I tried to browse \nhttp://localhost:8080/ but I had an error message as follows:  \n\nHTTP Status 500 - \n\n-------------------------------------------------------------------------------\n-\n\ntype Exception report\n\nmessage \n\ndescription The server encountered an internal error () that prevented it from \nfulfilling this request.\n\nexception \n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n    [javac] Compiling 1 source file\n\n\n\n\tat org.apache.jasper.compiler.DefaultErrorHandler.javacError\n(DefaultErrorHandler.java:120)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError\n(ErrorDispatcher.java:293)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:313)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:324)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:474)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:184)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:289)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2396)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:405)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:380)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:508)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:533)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\n\n-------------------------------------------------------------------------------\n-\n\nApache Tomcat/4.1.12-LE-jdk14", "is_private": false, "id": 23498, "creator": "sj@kldp.org", "time": "2002-09-27T05:00:23Z", "bug_id": 13060, "creation_time": "2002-09-27T05:00:23Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 13060, "attachment_id": null, "text": "Sorry, this works for me. Please investigate further, or post about that on\ntomcat-user.", "id": 23503, "time": "2002-09-27T07:17:19Z", "creator": "remm@apache.org", "creation_time": "2002-09-27T07:17:19Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 13060, "attachment_id": null, "is_private": false, "id": 23799, "time": "2002-10-03T00:14:25Z", "creator": "ingo.etienne@dresdner-bank.com", "creation_time": "2002-10-03T00:14:25Z", "text": "I experiance the same exception on Win NT 4.\n\nThe reason why may be running Tomcat as a Windows Service using tomcat.exe.\nWhen I start Tomcat using startup.bat everything is fine, but when running the \nservice the exception is thrown.\n\nPerhaps this may also help: \nI'm also using my own PreferencesFactory in conjunction with Log4J and \ntherefore I have to add a jar file with all the required classes plus the log4j-\n1.2.6.jar and jdom.jar to the classpath...\n\nHTH"}, {"count": 3, "tags": [], "bug_id": 13060, "text": "It is the same error that I see in my Linux installation. \n \nI am using Red Hat Linux 7.3 (Lastest patch to 3-Oct-2002)  \nJava 1.4.1  ", "id": 23984, "time": "2002-10-05T00:56:51Z", "creator": "agallardo@agsoftware.dnsalias.com", "creation_time": "2002-10-05T00:56:51Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 13060, "is_private": false, "count": 4, "id": 23992, "time": "2002-10-05T08:25:16Z", "creator": "remm@apache.org", "creation_time": "2002-10-05T08:25:16Z", "text": "It doesn't seem like Ant is able to find the Java compiler (I got the error that\nway under XP when the classpath did not contain tools.jar). This can happen when\nJAVA_HOME is incorrectly set, or when using the NT installer, when the JVM was\nmoved around and is incorrectly detected."}, {"attachment_id": null, "tags": [], "bug_id": 13060, "is_private": false, "count": 5, "id": 26560, "time": "2002-11-19T13:01:28Z", "creator": "kazumiura17@yahoo.com", "creation_time": "2002-11-19T13:01:28Z", "text": "I have installed J2SE v1.4.1 and Windows 2000 Pro on my Pentium 4 PC.\nI have downloaded jakarta-tomcat-4.1.12-LE-jdk14.exe and have installed it \nsuccessfully as a service\nWhen i try to acces to my pages i see the same error:\n\n...\nAn error occurred at line: -1 in the jsp file: null\n...\n\nWhen i start Tomcat not as a service but with \"catalina run\" all works fine.\n\nI have changed the verbosity of the compiler from WARNING to DEBUG in \nconf\\web.xml:\n    <servlet>\n        <servlet-name>jsp</servlet-name>\n        <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>\n        <init-param>\n            <param-name>logVerbosityLevel</param-name>\n            <param-value>DEBUG</param-value>\n        </init-param>\n        <load-on-startup>3</load-on-startup>\n    </servlet>\n    \nif you look at logs\\localhost_log.yyyy-mm-dd.txt you can see \n(if you guess /indexf.jsp with your browser),\n\n**for Tomcat started with batch file (right display):**\n2002-11-19 13:48:10 Scratch dir for the JSP engine is: C:\\server\\tomcat_2\n\\work\\Standalone\\localhost\\webdav\n2002-11-19 13:48:10 IMPORTANT: Do not modify the generated servlets\n2002-11-19 13:49:23 JspEngine --> /indexf.jsp\n2002-11-19 13:49:23 \t     ServletPath: /indexf.jsp\n2002-11-19 13:49:23 \t        PathInfo: null\n2002-11-19 13:49:23 \t        RealPath: C:\\server\\tomcat_2\n\\bin\\..\\webapps\\ROOT\\indexf.jsp\n2002-11-19 13:49:23 \t      RequestURI: /indexf.jsp\n2002-11-19 13:49:23 \t     QueryString: null\n2002-11-19 13:49:23 \t  Request Params: \n\n**for Tomcat started as a service (display the error):**\n2002-11-19 13:47:36 JspEngine --> /indexf.jsp\n2002-11-19 13:47:36 \t     ServletPath: /indexf.jsp\n2002-11-19 13:47:36 \t        PathInfo: null\n2002-11-19 13:47:36 \t        RealPath: C:\\server\\tomcat_2\n\\webapps\\ROOT\\indexf.jsp\n2002-11-19 13:47:36 \t      RequestURI: /indexf.jsp\n2002-11-19 13:47:36 \t     QueryString: null\n2002-11-19 13:47:36 \t  Request Params: \n2002-11-19 13:47:37 Error compiling file: C:\\server\\tomcat_2\n\\work\\Standalone\\localhost\\_\\/indexf_jsp.java Detected Java version: 1.4 in: \nD:\\programmi\\programmazione\\java\\jdk\\j2sdk\\jre\nDetected OS: Windows 2000\n    [javac] indexf_jsp.java added as C:\\server\\tomcat_2\n\\work\\Standalone\\localhost\\_\\indexf_jsp.class doesn't exist.\n    [javac] Compiling 1 source file\n\n2002-11-19 13:47:37 StandardWrapperValve[jsp]: Servlet.service() for servlet \njsp threw exception\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\nDetected Java version: 1.4 in: D:\\programmi\\programmazione\\java\\jdk\\j2sdk\\jre\nDetected OS: Windows 2000\n    [javac] indexf_jsp.java added as C:\\server\\tomcat_2\n\\work\\Standalone\\localhost\\_\\indexf_jsp.class doesn't exist.\n    [javac] Compiling 1 source file\n\n\n\n\tat org.apache.jasper.compiler.DefaultErrorHandler.javacError\n(DefaultErrorHandler.java:120)\n...\n\n==> My Comment:\n    It seems that the file separator is wrong: \n    look at \"\\/\" in ..Standalone\\localhost\\_\\/indexf_jsp.java..\n    \n    Why?\n\n"}, {"count": 6, "tags": [], "text": "Are you sure you have the J2SDK installed (you need the development kit for \njsps because it has the compilier) you might also want to make sure tools.jar \nis in your classpath. (tools.jar comes with the j2sdk and contains the \ncompilier classes)", "attachment_id": null, "id": 26564, "creator": "jakarta@trollingers.com", "time": "2002-11-19T13:16:32Z", "bug_id": 13060, "creation_time": "2002-11-19T13:16:32Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 13060, "is_private": false, "count": 7, "id": 26571, "time": "2002-11-19T13:46:28Z", "creator": "kazumiura17@yahoo.com", "creation_time": "2002-11-19T13:46:28Z", "text": "Yes, i have J2SDK ver. 1.4.0_01. \n\nRemember: It works fine with \"catalina run\" but not as a service\n\nI also put in my CLASSPATH :\nD:\\programmi\\programmazione\\java\\jdk\\j2sdk\\lib\\tools.jar;\n.;\nC:\\server\\tomcat_2\\common\\lib\\jasper-compiler.jar;\nC:\\server\\tomcat_2\\common\\lib\\jasper-runtime.jar\n\nThe error on the browser is:\n---------------------\ntype Exception report\nmessage\ndescription The server encountered an internal error () that prevented it from \nfulfilling this request.\nexception\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\nDetected Java version: 1.4 in: D:\\programmi\\programmazione\\java\\jdk\\j2sdk\\jre\nDetected OS: Windows 2000\n    [javac] indexf_jsp.java added as C:\\server\\tomcat_2\n\\work\\Standalone\\localhost\\_\\indexf_jsp.class doesn't exist.\n    [javac] Compiling 1 source file\n\nat org.apache.jasper.compiler.DefaultErrorHandler.javacError\n(DefaultErrorHandler.java:120)\nat org.apache.jasper.compiler.ErrorDispatcher.javacError\n(ErrorDispatcher.java:293)\n...\n---------------------\n"}, {"count": 8, "tags": [], "creator": "jakarta@trollingers.com", "text": "Every time I have seen those errors it has been because jasper could not find \nthe java compilier.  Try and put tools.jar in your common/lib and see if the \nservice works then..", "id": 26573, "time": "2002-11-19T14:01:48Z", "bug_id": 13060, "creation_time": "2002-11-19T14:01:48Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "text": "Thank you John, with tools.jar in common/lib now it seems to work. How can a \nuser imagine this? I'm not sure but it seems to me that this strange behavior \nit's not documented", "attachment_id": null, "id": 26587, "creator": "kazumiura17@yahoo.com", "time": "2002-11-19T16:53:47Z", "bug_id": 13060, "creation_time": "2002-11-19T16:53:47Z", "is_private": false}]