[{"count": 0, "tags": [], "creator": "jagadish.nagarajaiah@gmail.com", "attachment_id": null, "id": 81684, "time": "2005-10-25T08:31:05Z", "bug_id": 37238, "creation_time": "2005-10-25T08:31:05Z", "is_private": false, "text": "After moving keystore from JKS format to PKCS12 format, tomcat server fails to\nlisten for https and logs following:\n\n=========================================\nINFO: Starting Coyote HTTP/1.1 on http-80\nOct 19, 2005 2:47:27 AM org.apache.coyote.http11.Http11Protocol start\nSEVERE: Error starting endpoint\njava.io.IOException: DerInputStream.getLength(): lengthTag=79, too big.\n        at sun.security.util.DerInputStream.getLength(DerInputStream.java:530)\n        at sun.security.util.DerValue.<init>(DerValue.java:234)\n        at sun.security.util.DerInputStream.readVector(DerInputStream.java:359)\n        at sun.security.util.DerInputStream.getSequence(DerInputStream.java:267)\n        at\ncom.sun.net.ssl.internal.ssl.PKCS12KeyStore.engineLoad(PKCS12KeyStore.java:1222)\n        at java.security.KeyStore.load(KeyStore.java:1150)\n        at\norg.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFactory.java:278)\n        at\norg.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketFactory.java:220)\n        at\norg.apache.tomcat.util.net.jsse.JSSE14SocketFactory.getKeyManagers(JSSE14SocketFactory.java:143)\n        at\norg.apache.tomcat.util.net.jsse.JSSE14SocketFactory.init(JSSE14SocketFactory.java:109)\n        at\norg.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:88)\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.initEndpoint(PoolTcpEndpoint.java:253)\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.startEndpoint(PoolTcpEndpoint.java:275)\n        at org.apache.coyote.http11.Http11Protocol.start(Http11Protocol.java:177)\n        at\norg.apache.coyote.tomcat5.CoyoteConnector.start(CoyoteConnector.java:1500)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:485)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:2298)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:556)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:284)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:422)\n========================================================\n\n\nHere is our configuration file:\n===========================================================\n<Connector acceptCount=\"100\" clientAuth=\"false\"\n            connectionTimeout=\"20000\" debug=\"0\"\n            disableUploadTimeout=\"true\" enableLookups=\"false\"\n            keystoreFile=\"tmce.p12\" keystorePass=\"xxx\"\n            keystoreType=\"PKCS12\" maxSpareThreads=\"50\" maxThreads=\"200\"\n            minSpareThreads=\"15\" port=\"443\" redirectPort=\"8443\"\n            scheme=\"https\" secure=\"true\" sslProtocol=\"TLS\"/>\n==============================================================="}, {"count": 1, "tags": [], "bug_id": 37238, "text": "Can't reproduce problem with Tomcat 5.0.28 using OpenSSL to create PKCS12\nkeystore. Could you try Tomcat 5.0.28, and get back to me if it's still a problem?\n\nIf it is, it would also help if you could produce a keystore with a self-signed\ncertificate, that demonstrates the problem, and attach it to this bug.\n", "id": 92170, "time": "2006-08-13T14:02:38Z", "creator": "jrn2005@cs.st-andrews.ac.uk", "creation_time": "2006-08-13T14:02:38Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "text": "Based on the last comment and lack of response closing this as working.", "id": 95048, "time": "2006-10-23T15:48:00Z", "bug_id": 37238, "creation_time": "2006-10-23T15:48:00Z", "is_private": false, "attachment_id": null}]