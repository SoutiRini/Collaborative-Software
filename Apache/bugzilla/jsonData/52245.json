[{"count": 0, "tags": [], "text": "The EL API is not currently detected by the code in WebappClassLoader.\nApplications containing el-api.jar will not start.\n\n(patch to follow).", "is_private": false, "id": 151790, "creator": "bugzilla@pidster.com", "time": "2011-11-25T15:13:41Z", "bug_id": 52245, "creation_time": "2011-11-25T15:13:41Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "knst.kolinko@gmail.com", "text": "Can you explain what do you mean by this?\nWhat is the actual behaviour and what is expected?", "id": 151794, "time": "2011-11-25T16:02:52Z", "bug_id": 52245, "creation_time": "2011-11-25T16:02:52Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 52245, "is_private": false, "text": "(In reply to comment #1)\n> Can you explain what do you mean by this?\n\n(Sorry, I wanted to put an initial report in so I wouldn't forget.)\n\nWebappClassLoader detects classes in certain packages/JARs (e.g. java.servlet.*) that are supplied by the container and won't load them, as per SRV.9.7.2.\n\n> What is the actual behaviour and what is expected?\n\nA simple application is attached. It will start, (my mistake earlier), but throws an exception when a JSP is accessed. The application contains el-api.jar in WEB-INF/lib.\n\nThe exception is:\n\njavax.servlet.ServletException: java.lang.LinkageError: loader constraint violation: when resolving interface method \"javax.servlet.jsp.JspApplicationContext.getExpressionFactory()Ljavax/el/ExpressionFactory;\" the class loader (instance of org/apache/jasper/servlet/JasperLoader) of the current class, org/apache/jsp/index_jsp, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for resolved class, javax/servlet/jsp/JspApplicationContext, have different Class objects for the type javax/el/ExpressionFactory used in the signature\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:342)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n\nroot cause:\n\njava.lang.LinkageError: loader constraint violation: when resolving interface method \"javax.servlet.jsp.JspApplicationContext.getExpressionFactory()Ljavax/el/ExpressionFactory;\" the class loader (instance of org/apache/jasper/servlet/JasperLoader) of the current class, org/apache/jsp/index_jsp, and the class loader (instance of org/apache/catalina/loader/StandardClassLoader) for resolved class, javax/servlet/jsp/JspApplicationContext, have different Class objects for the type javax/el/ExpressionFactory used in the signature\n\torg.apache.jsp.index_jsp._jspInit(index_jsp.java:31)\n\torg.apache.jasper.runtime.HttpJspBase.init(HttpJspBase.java:49)\n\torg.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:181)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:370)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n\n\nThe javax.el package is not detected by WebappClassLoader, unlike the javax.servlet package - which causes JARs to be ignored by the class loader.\n\nSRV 9.7.2 suggests that classes discovered in the application classpath, but from the javax.el * packages should not be loaded by the WebappClassLoader as they are provided by the container.\n\n\n* and possibly javax.annotation and javax.persistence, if the annotation-api.jar contains all of the classes, as opposed to a subset.", "id": 151796, "time": "2011-11-25T17:58:36Z", "creator": "bugzilla@pidster.com", "creation_time": "2011-11-25T17:58:36Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 52245, "text": "Created attachment 27986\nSimple EL API test case", "id": 151797, "time": "2011-11-25T18:00:13Z", "creator": "bugzilla@pidster.com", "creation_time": "2011-11-25T18:00:13Z", "is_private": false, "attachment_id": 27986}, {"count": 4, "tags": [], "creator": "bugzilla@pidster.com", "text": "Created attachment 27987\nPatch to detect classes in javax.el and avoid loading repository/class", "id": 151798, "time": "2011-11-25T18:37:27Z", "bug_id": 52245, "creation_time": "2011-11-25T18:37:27Z", "is_private": false, "attachment_id": 27987}, {"count": 5, "tags": [], "bug_id": 52245, "attachment_id": null, "text": "Thanks for the patch. Applied to trunk and 7.0.x and will be included in 7.0.24 onwards.", "id": 152730, "time": "2012-01-12T19:49:45Z", "creator": "markt@apache.org", "creation_time": "2012-01-12T19:49:45Z", "is_private": false}]