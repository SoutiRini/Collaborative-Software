[{"count": 0, "tags": [], "creator": "wholder@nglm.com", "attachment_id": null, "text": "I'm trying to convert code from Oracle's OC4J to run under Tomcat 4.1.18.  As \npart of this, I'm trying to configure a DataSource that will let me use pooled \nconnections with heavyweight users (each user has a unique username and \npassword to access the database.)  I can configure a database resource and open \na pooled connection using DataSource.getConnection(), but this only lets me \nopen a connection using the user/pass that was specified in the \n<ResourceParams> setup for JNDI.\n\nWhat I want to do is call DataSource.getConnection(String, String), but this \nthrows an UnsupportedOperationException exception on the call to getConnection\n() (Note: see below for full stack trace.)  Also, it seems this issues is not \naddressed in the docs, so I'm not really clear if there is something more I \nneed to do, such as alter the way the database resource is defined, to make it \nwork, or if this is just something that is not yet implemented....\n\nNote: I've tried removing the user/password defintions from the \n<ResourceParams> definition, but this just seems to produce a message telling \nme I need to define them.  So, I'm stuck.\n\nWayne\n\nStack Trace:\n\njava.lang.UnsupportedOperationException\n\tat org.apache.commons.dbcp.PoolingDataSource.getConnection\n(PoolingDataSource.java:125)\n\tat org.apache.commons.dbcp.BasicDataSource.getConnection\n(BasicDataSource.java:329)\n\tat com.nglm.webfh.DoRequest.getConnection(DoRequest.java:457)\n\tat com.nglm.webfh.Login.doLogin(Login.java:123)\n\tat com.nglm.webfh.Login.doPost(Login.java:104)\n\tat com.nglm.webfh.DoRequest.post(DoRequest.java:394)\n\tat com.nglm.webfh.DispatchServlet.invokeModule(DispatchServlet.java:155)\n\tat com.nglm.webfh.DispatchServlet.doPost(DispatchServlet.java:217)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2415)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:432)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:386)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:534)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n\tat java.lang.Thread.run(Thread.java:536)", "id": 33222, "time": "2003-03-14T22:47:54Z", "bug_id": 18019, "creation_time": "2003-03-14T22:47:54Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "If you're using DBCP directly, you're using DBCP, not Tomcat. You may report a\nbug on DBCP if this is still unresolved.", "id": 35878, "time": "2003-04-23T11:04:01Z", "bug_id": 18019, "creation_time": "2003-04-23T11:04:01Z", "is_private": false}]