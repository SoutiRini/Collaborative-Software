[{"count": 0, "tags": [], "bug_id": 54449, "text": "Created attachment 29866\nJmeter plan that shows the issue\n\nWhen using HTTPClient4 with HTTPS, requests hangs for 4-5 seconds for each request when using IP's without reverse DNS, using the DNS names or adding the IP and DNS name to hosts file removes the delay. Also using HTTPClient3.1 instead seems to solve the issue.\n\nI have added a plan that shows the issue.\n\nRegards Troels", "id": 164726, "time": "2013-01-18T15:13:58Z", "creator": "tlb@rapanden.dk", "creation_time": "2013-01-18T15:13:58Z", "is_private": false, "attachment_id": 29866}, {"count": 1, "text": "Should note that this is on Windows 8", "bug_id": 54449, "is_private": false, "id": 164728, "time": "2013-01-18T16:50:40Z", "creator": "tlb@rapanden.dk", "creation_time": "2013-01-18T16:50:40Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 54449, "attachment_id": null, "is_private": false, "id": 164729, "time": "2013-01-18T17:00:04Z", "creator": "sebb@apache.org", "creation_time": "2013-01-18T17:00:04Z", "text": "Here is a stack dump during the pause:\n\n\"Thread Group 1-1\" prio=6 tid=0x038f3c00 nid=0xd80 runnable [0x03b7f000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.Inet4AddressImpl.getHostByAddr(Native Method)\n        at java.net.InetAddress$1.getHostByAddr(Unknown Source)\n        at java.net.InetAddress.getHostFromNameService(Unknown Source)\n        at java.net.InetAddress.getHostName(Unknown Source)\n        at java.net.InetAddress.getHostName(Unknown Source)\n        at sun.security.ssl.SSLSocketImpl.getHost(Unknown Source)\n        - locked <0x1349be48> (a sun.security.ssl.SSLSocketImpl)\n        at sun.security.ssl.Handshaker.getHostSE(Unknown Source)\n        at sun.security.ssl.ClientHandshaker.getKickstartMessage(Unknown Source)\n        at sun.security.ssl.Handshaker.kickstart(Unknown Source)\n        at sun.security.ssl.SSLSocketImpl.kickstartHandshake(Unknown Source)\n        - locked <0x1349be48> (a sun.security.ssl.SSLSocketImpl)\n        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)\n        - locked <0x1349c038> (a java.lang.Object)\n        at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)\n        at sun.security.ssl.SSLSocketImpl.getSession(Unknown Source)\n        at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:91)\n        at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:572)\n        at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)\n        at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)\n        at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)\n        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)\n        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)\n        at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:284)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1075)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1064)\n        at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:426)\n        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:255)\n        at java.lang.Thread.run(Unknown Source)\n\nThis will need further investigation."}, {"count": 3, "tags": [], "bug_id": 54449, "attachment_id": null, "is_private": false, "id": 164730, "time": "2013-01-18T17:01:09Z", "creator": "sebb@apache.org", "creation_time": "2013-01-18T17:01:09Z", "text": "The stack dump was on WinXP using JMeter 2.8."}, {"count": 4, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "text": "Hello,\nWhat java version are you using ?\n\n\nRegards", "id": 164731, "time": "2013-01-18T17:04:30Z", "bug_id": 54449, "creation_time": "2013-01-18T17:04:30Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 54449, "is_private": false, "count": 5, "id": 164732, "time": "2013-01-18T17:11:44Z", "creator": "tlb@rapanden.dk", "creation_time": "2013-01-18T17:11:44Z", "text": "C:\\Users\\TroelsLiebeBentsen>java -version\njava version \"1.7.0_11\"\nJava(TM) SE Runtime Environment (build 1.7.0_11-b21)\nJava HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)"}, {"count": 6, "text": "(In reply to comment #3)\n> The stack dump was on WinXP using JMeter 2.8.\n\n2013/01/18 16:55:19 INFO  - jmeter.JMeter: Version 2.8 r1393162 \n2013/01/18 16:55:19 INFO  - jmeter.JMeter: java.version=1.7.0_11 \n2013/01/18 16:55:19 INFO  - jmeter.JMeter: java.vm.name=Java HotSpot(TM) Client VM", "bug_id": 54449, "is_private": false, "id": 164733, "time": "2013-01-18T17:27:53Z", "creator": "sebb@apache.org", "creation_time": "2013-01-18T17:27:53Z", "tags": [], "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 54449, "text": "Using:\n\n2013/01/18 17:25:52 INFO  - jmeter.JMeter: Version 2.8 r1393162 \n2013/01/18 17:25:52 INFO  - jmeter.JMeter: java.version=1.6.0_38 \n2013/01/18 17:25:52 INFO  - jmeter.JMeter: java.vm.name=Java HotSpot(TM) Client VM \n2013/01/18 17:25:52 INFO  - jmeter.JMeter: os.name=Windows XP \n\nI get similar results:\n\n\"Thread Group 1-1\" prio=6 tid=0x03c4c400 nid=0x27c runnable [0x055ff000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.Inet4AddressImpl.getHostByAddr(Native Method)\n        at java.net.InetAddress$1.getHostByAddr(InetAddress.java:852)\n        at java.net.InetAddress.getHostFromNameService(InetAddress.java:532)\n        at java.net.InetAddress.getHostName(InetAddress.java:475)\n        at java.net.InetAddress.getHostName(InetAddress.java:447)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.getHost(SSLSocketImpl.java:1971)\n        - locked <0x1302b5b8> (a com.sun.net.ssl.internal.ssl.SSLSocketImpl)\n        at com.sun.net.ssl.internal.ssl.Handshaker.getHostSE(Handshaker.java:257)\n        at com.sun.net.ssl.internal.ssl.ClientHandshaker.getKickstartMessage(ClientHandshaker.java:1020)\n        at com.sun.net.ssl.internal.ssl.Handshaker.kickstart(Handshaker.java:620)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.kickstartHandshake(SSLSocketImpl.java:1305)\n        - locked <0x1302b5b8> (a com.sun.net.ssl.internal.ssl.SSLSocketImpl)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1202)\n        - locked <0x1302b718> (a java.lang.Object)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1230)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.getSession(SSLSocketImpl.java:2036)\n        at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:91)\n        at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:572)\n        at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)\n        at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)\n        at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)\n        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)\n        at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)\n        at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:284)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1075)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1064)\n        at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:426)\n        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:255)\n        at java.lang.Thread.run(Thread.java:662)", "id": 164734, "time": "2013-01-18T17:29:12Z", "creator": "sebb@apache.org", "creation_time": "2013-01-18T17:29:12Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 54449, "attachment_id": null, "is_private": false, "id": 164735, "time": "2013-01-18T17:50:15Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-01-18T17:50:15Z", "text": "I don't reproduce on Mac OSx:\njava version \"1.6.0_37\"\nJava(TM) SE Runtime Environment (build 1.6.0_37-b06-434-10M3909)\nJava HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode)\n\n@sebb do you use the plan as is or do you point \n\n@Troels Liebe Bentsen Is the IP in the test plan public ?\n\nThanks"}, {"count": 9, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "(In reply to comment #8)\n> I don't reproduce on Mac OSx:\n> java version \"1.6.0_37\"\n> Java(TM) SE Runtime Environment (build 1.6.0_37-b06-434-10M3909)\n> Java HotSpot(TM) 64-Bit Server VM (build 20.12-b01-434, mixed mode)\n> \n> @sebb do you use the plan as is or do you point \n\nYes (except I unchecked \"Follow redirects\" - not relevant here)\n\n> @Troels Liebe Bentsen Is the IP in the test plan public ?\n>\n> Thanks", "id": 164736, "time": "2013-01-18T17:56:36Z", "bug_id": 54449, "creation_time": "2013-01-18T17:56:36Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 54449, "text": "I reproduce on Windows 7  but not on Mac OS.\nSeems to affect Windows Family only.\n\nCould be something related to this:\nhttp://www.velocityreviews.com/forums/showpost.php?p=2959030&postcount=8", "id": 164752, "time": "2013-01-20T21:13:55Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-01-20T21:13:55Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 54449, "text": "However the problem only affects HC4, not the HC3.1 or Java implementations.\n\nSo if it is a Windows issue, why is it being triggered by HC4 only?\n\nI think it may be something to do with the way SSL verification is handled in HC4.\nEven though we use the HC4TrustAllSSLSocketFactory, it still invokes org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:91) which calls getSession, even though the session is not needed later.\n\nI've not yet had a chance to try recoding to avoid this; if it is the cause then I think we may need to raise an enhancement request against HC4.", "id": 164753, "time": "2013-01-20T23:43:45Z", "creator": "sebb@apache.org", "creation_time": "2013-01-20T23:43:45Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 54449, "text": "I thought that:\n\n- https://issues.apache.org/jira/browse/HTTPCLIENT-1302", "id": 164756, "time": "2013-01-21T06:10:16Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-01-21T06:10:16Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 54449, "attachment_id": 30151, "is_private": false, "id": 166394, "time": "2013-04-04T21:20:20Z", "creator": "guruhitesh@gmail.com", "creation_time": "2013-04-04T21:20:20Z", "text": "Created attachment 30151\nJmeter file for Mac OS x attached"}, {"count": 14, "text": "(In reply to comment #13)\n> Created attachment 30151 [details]\n> Jmeter file for Mac OS x attached\n\nSeems to be for a different bug report. Was this intended for Bugzilla 54799 ?", "bug_id": 54449, "is_private": false, "id": 166402, "time": "2013-04-05T00:24:49Z", "creator": "sebb@apache.org", "creation_time": "2013-04-05T00:24:49Z", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 54449, "text": "Yes it's related to 54799", "count": 15, "id": 166407, "time": "2013-04-05T05:40:40Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-04-05T05:40:40Z", "is_private": false}, {"count": 16, "tags": [], "creator": "dzmitry.kashlach@blazemeter.com", "attachment_id": null, "is_private": false, "id": 176489, "time": "2014-07-18T12:28:06Z", "bug_id": 54449, "creation_time": "2014-07-18T12:28:06Z", "text": "Failed to reproduce on Xubuntu 12.04\njava version \"1.6.0_45\"\nJava(TM) SE Runtime Environment (build 1.6.0_45-b06)\nJava HotSpot(TM) Server VM (build 20.45-b01, mixed mode)"}, {"count": 17, "tags": [], "bug_id": 54449, "text": "Could this be an explanation:\n\n- http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6450279", "id": 177260, "time": "2014-08-18T19:53:31Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-18T19:53:31Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 54449, "text": "Anybody could test this bug on Windows again to see if it's still in 3.0 or current nightly ?\nThanks", "count": 18, "id": 194020, "time": "2016-09-27T08:57:44Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-09-27T08:57:44Z", "is_private": false}]