[{"count": 0, "tags": [], "bug_id": 23303, "is_private": false, "id": 44398, "attachment_id": null, "creator": "son@sparc.spb.su", "creation_time": "2003-09-21T12:35:58Z", "time": "2003-09-21T12:35:58Z", "text": "The follows program requires more then 1 minute to check \nif given string matchs a pattern (some users will think that jvm hangs).\nBTW if I remove last unterscope in the string the program\nworks less then 1 ms.\n\nimport org.apache.regexp.RESyntaxException;\nimport org.apache.regexp.RE;\n\npublic class RegexpTest {\n    public static void main(String[] args) {\n        String format = \"^(_?[A-Z0-9]+)*$\";\n        String bad_str = \n            \"_NOERROR_AND_LAST_TXN_NOT_OK_AND_LAST_TXN_WAS_\";\n        try {\n            RE regexp = new RE(format);\n            long before = System.currentTimeMillis();\n            System.err.println(regexp.match(bad_str));\n            long after = System.currentTimeMillis();\n            System.err.println(after-before);\n        }\n        catch(RESyntaxException e) {\n            e.printStackTrace();\n        }\n    }\n}"}, {"count": 1, "tags": [], "text": "The error email says it takes over a minute to match the pattern against\n  \"_NOERROR_AND_LAST_TXN_NOT_OK_AND_LAST_TXN_WAS_\"\n(and fail) but less than a millisecond to match the pattern against \n  \"_NOERROR_AND_LAST_TXN_NOT_OK_AND_LAST_TXN_WAS\"\n(and succeed).  These are the same strings except for the final \"_\".\n\nThe \"?\" in the pattern gives a large degree of indeterminacy in how the match \nmay be made if the greediest match fails.  The equivalent pattern\n  \"^[A-Z0-9]*(_[A-Z0-9]+)*$\"\nhas much less indeterminacy and succeeds or fails very quickly with the above \ntest strings.  I am tempted to say that the problem lies more with the pattern \nthan the matcher.  \n", "attachment_id": null, "bug_id": 23303, "id": 44454, "time": "2003-09-22T15:15:10Z", "creator": "rmallory@ausinfo.com", "creation_time": "2003-09-22T15:15:10Z", "is_private": false}, {"count": 2, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of 9153 ***", "is_private": false, "bug_id": 23303, "id": 44473, "time": "2003-09-23T00:35:52Z", "creator": "vgritsenko@apache.org", "creation_time": "2003-09-23T00:35:52Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "I would agree that some regexp is better for the string then another.\nBut I will never agree that ANY regexp should be matched with exponential \ncomplexity.", "attachment_id": null, "id": 44636, "creation_time": "2003-09-25T03:46:32Z", "time": "2003-09-25T03:46:32Z", "creator": "son@sparc.spb.su", "bug_id": 23303, "is_private": false}, {"count": 4, "tags": [], "text": "Oleg,\n\nNobody disagrees with you.\nIf you see \"slow\" regexps and you want to improve performance, please send a\npatch, it will be considered.", "attachment_id": null, "bug_id": 23303, "id": 44660, "time": "2003-09-25T12:03:51Z", "creator": "vgritsenko@apache.org", "creation_time": "2003-09-25T12:03:51Z", "is_private": false}]