[{"count": 0, "tags": [], "bug_id": 47392, "is_private": false, "text": "The <FilesMatch> directive is using the superior directory if the access through the URL is without a / at the end. Here is an example for better understanding:\n\nI created in the htdocs directory a new directory and named it test. In this directory have i created a .htaccess with the content:\n\nAllow from all\n<FilesMatch ^test>\nDeny from all\n</FilesMatch>\n\nAnd there are two empty files named test.php and another_file.php. Now the following happens:\n\nhttp://localhost/test -> Error 403 forbidden\nhttp://localhost/test/ -> Access is allowed and i can see the index\nhttp://localhost/test/test.php -> Error 403 forbidden\nhttp://localhost/test/another_file.php -> Access is allowed\n\nThe problem is, that ^test matches of the superior directory if there is no / at the end of the URL and the access is denied. If i delete the .htaccess the following happens:\n\nhttp://localhost/test -> Switches to http://localhost/test/ and the i can see the index\nhttp://localhost/test/ -> Access is allowed and i can see the index\nhttp://localhost/test/test.php -> Access is allowed\nhttp://localhost/test/another_file.php -> Access is allowed", "id": 128071, "time": "2009-06-18T23:54:36Z", "creator": "sworddragon2@aol.com", "creation_time": "2009-06-18T23:54:36Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 47392, "is_private": false, "text": "Good detailed problem description, but in the wrong place.  Please ask configuration questions on the user's list, don't open bug reports.", "id": 128085, "time": "2009-06-19T05:08:49Z", "creator": "poirier@pobox.com", "creation_time": "2009-06-19T05:08:49Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 47392, "is_private": false, "text": "I have already read the following documentation: http://httpd.apache.org/docs/2.2/mod/core.html\n\nThere is nothing what explains this behavior. Just try to make a solution with my example. If this is really a bug, nobody can resolve this without a bugfix.", "id": 128313, "time": "2009-06-26T05:36:14Z", "creator": "sworddragon2@aol.com", "creation_time": "2009-06-26T05:36:14Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 47392, "is_private": false, "text": "If you don't think the server is behaving the way you expect it to, you should always ask about it on the users list.  Maybe someone will say \"yes, that's a bug, please open a bug report\" but it's much more likely that someone will explain to you how to configure the server to behave the way you want.", "id": 128320, "time": "2009-06-26T07:05:14Z", "creator": "poirier@pobox.com", "creation_time": "2009-06-26T07:05:14Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "re-opening for some more eyes.\n\nRequesting a directory e.g. \"/test\" without a trailing slash, ap_file_walk applies Files/Filesmatch containers to the \"basename\" (/test->test)  that live in  /test/.htaccess\n\nIs this as desired or should it be short-circuited (skipped, treated as an empty iflename, ???) if we have the above case?  Sounds like a candidate for trunk-only change.", "attachment_id": null, "id": 128325, "creator": "covener@gmail.com", "time": "2009-06-26T08:26:45Z", "bug_id": 47392, "creation_time": "2009-06-26T08:26:45Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 47392, "text": "FWIW, I took a look this afternoon.  This report needs to move to users@ so we can diagnose the OP's real problem, but playing with a .htaccess showed up a more serious bug.  I need to poke about a bit more before reporting/fixing it.\n\nI guess none of the devs tend to use .htaccess ...", "id": 128326, "time": "2009-06-26T09:11:35Z", "creator": "nick@webthing.com", "creation_time": "2009-06-26T09:11:35Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "(In reply to comment #5)\n> FWIW, I took a look this afternoon.  This report needs to move to users@ so we\n> can diagnose the OP's real problem, but playing with a .htaccess showed up a\n> more serious bug.  I need to poke about a bit more before reporting/fixing it.\n\nI take that back: my issue was a <Location /> overriding the .htaccess (I blame the heat).  I can confirm the behaviour reported by the OP.\n\nStill thinking about it.  The least we should do is document more clearly some of the counter-intuitive things that happen on a merge.", "is_private": false, "id": 128327, "creator": "nick@webthing.com", "time": "2009-06-26T09:26:50Z", "bug_id": 47392, "creation_time": "2009-06-26T09:26:50Z", "attachment_id": null}]