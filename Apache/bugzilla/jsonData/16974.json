[{"attachment_id": null, "tags": [], "creator": "coderobo@hotmail.com", "text": "There is no way in hell JNI can ever work with JK2.  \njk_channel_jni.c::jk2_channel_jni_open invokes\nthe java static method AprImpl.createJavaContext() which in turns tries to \nreturn a registered JkHandler for\nJni (ChannelJni) from the underlying hashtable. However when the in-process \nmode is enabled, there\nis nobody registering any handlers! As a result null is trurned into c land \nfrom Java when createJavaContext\nreturns causing the JNI invocation to fail.\n \nTried this with Apache 2.0.43/44. With the out of process mode the declaration \nin server.xml cause a JkCoyoteHandler to be registered but with the in-process \nmode, this was suppose to happen automatically. Nobody seems to trigger a call \nto AprImpl.addJkHandler() - not in java land not in c land!\n \nThis convince me that JNI mode never really worked with JK2. If you look at the \ntomcat-user archive\nyou can see people falling on their faces trying to get this to work,but nobody \nhas succedded now\nI know why.\n \nSomeone should fix the Jk2 web site which lures naive users to believe that JNI \nmode is working with\nJk2! I did try to fix the problem by tring to instantiate a ChannelJni instance \nin the ctor of AprImpl and register\nit into the jkHandlers table but  was getting NPE...don't know the code that \nwell to know what assumptions are built into ChannelJni. Will continue to \ndebug.", "count": 0, "id": 31087, "time": "2003-02-11T19:42:00Z", "bug_id": 16974, "creation_time": "2003-02-11T19:42:00Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 16974, "text": "Well, I relatively easily got JNI working with JK 2.0.2 and Tomcat 5.0.1-dev\n(which should be similar to the 4.1.18), wither with Apache 2 and IIS. Of\ncourse, you apparentl can't seem to be bothered to specify which versions you're\nusing, or your error logs, and choose to go on a rant instead.", "count": 1, "id": 31100, "time": "2003-02-12T07:50:41Z", "creator": "remm@apache.org", "creation_time": "2003-02-12T07:50:41Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 16974, "is_private": false, "text": "Remy - Please look at the comments and versions # closely.\n\nTomcat Version string is filled in the bug report (4.1.18), Apache version was\nspecified in the comments (2.0.43/2.044). Just because it works in 5.x doesn't\nimply it will automatically work in 4.x (how callous to assume that )\n\nWill be hapy to supply all the logs/config files. Let me attach them in the\nnext email.", "id": 31172, "time": "2003-02-12T21:19:17Z", "creator": "coderobo@hotmail.com", "creation_time": "2003-02-12T21:19:17Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 16974, "is_private": false, "text": "Created attachment 4838\nworker 2 conf with JNI config", "id": 31176, "time": "2003-02-12T21:50:13Z", "creator": "coderobo@hotmail.com", "creation_time": "2003-02-12T21:50:13Z", "attachment_id": 4838}, {"count": 4, "tags": [], "bug_id": 16974, "attachment_id": 4839, "text": "Created attachment 4839\nhttpd conf with mod_jk2 module", "id": 31177, "time": "2003-02-12T21:52:59Z", "creator": "coderobo@hotmail.com", "creation_time": "2003-02-12T21:52:59Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 16974, "text": "Created attachment 4840\nJk2.properties with in process enabled", "id": 31178, "time": "2003-02-12T21:54:24Z", "creator": "coderobo@hotmail.com", "creation_time": "2003-02-12T21:54:24Z", "is_private": false, "attachment_id": 4840}, {"count": 6, "tags": [], "text": "Created attachment 4841\nserver.xml with ajp13 out-process connector disabled for JNI", "is_private": false, "id": 31179, "creation_time": "2003-02-12T21:55:39Z", "time": "2003-02-12T21:55:39Z", "creator": "coderobo@hotmail.com", "bug_id": 16974, "attachment_id": 4841}, {"count": 7, "attachment_id": null, "bug_id": 16974, "is_private": false, "id": 31201, "time": "2003-02-13T03:36:48Z", "creator": "qnx6@yahoo.com", "creation_time": "2003-02-13T03:36:48Z", "tags": [], "text": "A quick question to Remy: are you running Microsoft Windows for your mod_jk2/JNI\ninprocess setup? I actually have seen quite some success stories for Windows\nusers but nobody from Unix world has had any success yet."}, {"count": 8, "tags": [], "bug_id": 16974, "attachment_id": null, "is_private": false, "id": 31202, "time": "2003-02-13T03:39:58Z", "creator": "qnx6@yahoo.com", "creation_time": "2003-02-13T03:39:58Z", "text": "Rahul, your httpd.conf has mod_jk2.dll so I assume you are Microsoft Windows also?"}, {"count": 9, "tags": [], "text": "If you are Windows user, this howto will get you going:\nhttp://www.gregoire.org/howto/Apache2_Jk2_TC4.1.x_JSDK1.4.x.html\nbut what about us Unix users?", "is_private": false, "id": 31203, "creation_time": "2003-02-13T03:45:31Z", "time": "2003-02-13T03:45:31Z", "creator": "qnx6@yahoo.com", "bug_id": 16974, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 16974, "text": "Yup I am on win2K Sp2. The files in the recipe look similar to what I have \nattached here in the bug report but still no luck. Rsults of debugging the code \nseem to suggest somehow the JkHandler is not being registered.", "id": 31257, "time": "2003-02-13T19:40:32Z", "creator": "coderobo@hotmail.com", "creation_time": "2003-02-13T19:40:32Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 16974, "attachment_id": null, "is_private": false, "id": 67674, "time": "2004-12-01T02:54:53Z", "creator": "funkman@joedog.org", "creation_time": "2004-12-01T02:54:53Z", "text": "As of November 15, 2004, JK2 is no longer supported. All bugs related to JK2 \nwill be marked as WONTFIX. In its place, some of its features have been \nbackported to jk1. Most of those features will be seen in 1.2.7, which is \nslated for release on November 30th, 2004.\n\nAnother alternative is the ajp addition to mod_proxy which will be part of \napache 2.\n\nFor more information on the Tomat connectors docs at\nhttp://jakarta.apache.org/tomcat/connectors-doc/"}]