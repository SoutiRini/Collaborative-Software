[{"count": 0, "tags": [], "text": "As per http spec, we want clients to send us trailers in chunked requests.\nHowever the request on the server side does not get the trailer at all.\n\nThis can be reproduced with Apache 2.4.16 and mod proxy\n\nRequest:\n<<<<<\ntelnet somehost 80\nPOST /some-path HTTP/1.1\nAuthorization: Basic XXXX=\nHost: somehost.domain.com\nTransfer-Encoding: chunked\nTrailer: My-Test-Trailer\n\n50\n11111111111111111111111111111111111111111111111111111111111111111111111111111111\n0\nMy-Test-Trailer: some-value-new\n>>>>>> \n\nMod proxy is forwarding the request to apache tomcat in our case and it does not forward the trailers. We have verified that tomcat does get the trailers when the same request is sent to tomcat directly, so mod proxy is blocking them out.\n\n\nApparently mod proxy never uses the trailers stored in the request/response trailers as per the discussion in the user group: http://www.gossamer-threads.com/lists/apache/users/448909\n\nThis is very critical to us and blocking a feature rollout, I can help testing a patch if available.", "attachment_id": null, "id": 184157, "creation_time": "2015-07-24T09:16:50Z", "time": "2015-07-24T09:16:50Z", "creator": "sachin.shetty@gmail.com", "bug_id": 58177, "is_private": false}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 184166, "time": "2015-07-24T13:12:13Z", "bug_id": 58177, "creation_time": "2015-07-24T13:12:13Z", "is_private": false, "text": "Reclassifying as enhancement per Yann's assessment in the thread.  The trailers are hop-by-hop so they are not being \"blocked\"."}, {"count": 2, "tags": [], "bug_id": 58177, "attachment_id": null, "text": "Hi,\n\nThis is a crucial fix for us, if anybody can provide us with a patch, we can test it out. I can even work with my management and try to fund the patch development if possible.\n\nThanks\nSachin", "id": 184372, "time": "2015-08-06T07:09:16Z", "creator": "sachin.shetty@gmail.com", "creation_time": "2015-08-06T07:09:16Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 58177, "is_private": false, "text": "Created attachment 33203\nHTTP Trailer patch for 2.4.16\n\nEnforces chunked encoding if trailers are presented.\nChecks and filters trailer headers which are declared in the Trailer header.", "id": 185913, "time": "2015-10-24T17:55:18Z", "creator": "rtfm.rtfm.rtfm@gmail.com", "creation_time": "2015-10-24T17:55:18Z", "attachment_id": 33203}, {"count": 4, "tags": [], "bug_id": 58177, "is_private": false, "text": "Created attachment 33204\nscript sending test chunked request with a trailer", "id": 185914, "time": "2015-10-24T17:57:31Z", "creator": "rtfm.rtfm.rtfm@gmail.com", "creation_time": "2015-10-24T17:57:31Z", "attachment_id": 33204}, {"count": 5, "tags": [], "creator": "rtfm.rtfm.rtfm@gmail.com", "attachment_id": 33205, "text": "Created attachment 33205\nHTTP Trailer patch for trunk (2.5)\n\nI wasn't able to test this because I was stumbled with configure script generation.\n\nSo I tested only patch for 2.4.16.\n\nThe patch forward trailing headers in a request passing only those which names are predefined in the Trailer header.", "id": 185915, "time": "2015-10-24T18:01:47Z", "bug_id": 58177, "creation_time": "2015-10-24T18:01:47Z", "is_private": false}, {"attachment_id": 33239, "tags": [], "bug_id": 58177, "is_private": false, "count": 6, "id": 186137, "time": "2015-11-01T08:17:02Z", "creator": "rtfm.rtfm.rtfm@gmail.com", "creation_time": "2015-11-01T08:17:02Z", "text": "Created attachment 33239\nproxy client trailers for 2.4.17"}, {"attachment_id": null, "tags": [], "bug_id": 58177, "text": "Hi,\n\na few remarks:\n   - calling apr_bucket_immortal_create on a buffer allocated with apr_pstrcat is odd.\n\n   - apr_strtok(mod_trailers, \", \",...\nshould maybe be\n     apr_strtok(mod_trailers, \", \\t\",...", "count": 7, "id": 186140, "time": "2015-11-01T10:45:42Z", "creator": "christophe.jaillet@wanadoo.fr", "creation_time": "2015-11-01T10:45:42Z", "is_private": false}, {"attachment_id": 33249, "tags": [], "bug_id": 58177, "is_private": false, "count": 8, "id": 186204, "time": "2015-11-02T20:22:58Z", "creator": "rtfm.rtfm.rtfm@gmail.com", "creation_time": "2015-11-02T20:22:58Z", "text": "Created attachment 33249\nproxy client trailers for 2.4.17\n\nChanges after the review:\n\n1. Split trailer list by tab, comma and space.\n2. Replace apr_bucket_immortal_create with apr_bucket_pool_create for trailing headers."}, {"count": 9, "tags": [], "text": "Created attachment 33368\nproxy passes http trailers from client", "attachment_id": 33368, "id": 187089, "creator": "rtfm.rtfm.rtfm@gmail.com", "time": "2015-12-22T14:19:00Z", "bug_id": 58177, "creation_time": "2015-12-22T14:19:00Z", "is_private": false}]