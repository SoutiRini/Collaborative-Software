[{"text": "If xmlsec is used in an container env, every webapp can now use its own config and\nand dont rely on the global one.\n\nAttached is a patch which is tested against xmlsec trunk.\n\nFeel free to include/modify/extend/decline the attached patch", "tags": [], "bug_id": 44918, "attachment_id": null, "count": 0, "id": 116102, "time": "2008-05-01T09:28:44Z", "creator": "gigerstyle@gmx.ch", "creation_time": "2008-05-01T09:28:44Z", "is_private": false}, {"count": 1, "tags": [], "creator": "gigerstyle@gmx.ch", "attachment_id": 21898, "id": 116103, "time": "2008-05-01T09:32:35Z", "bug_id": 44918, "creation_time": "2008-05-01T09:32:35Z", "is_private": false, "text": "Created attachment 21898\nallow to pass custom config"}, {"count": 2, "tags": [], "bug_id": 44918, "attachment_id": null, "is_private": false, "id": 128141, "time": "2009-06-22T04:44:27Z", "creator": "coheigea@apache.org", "creation_time": "2009-06-22T04:44:27Z", "text": "\nThis patch seems fine to me. Sean, can you confirm?\n\nColm."}, {"count": 3, "tags": [], "creator": "sean.mullan@oracle.com", "attachment_id": null, "id": 128155, "time": "2009-06-22T11:58:35Z", "bug_id": 44918, "creation_time": "2009-06-22T11:58:35Z", "is_private": false, "text": "This patch contains a potential security hole which can allow untrusted code (ex: an unsigned applet) to replace the xml security configuration which could be part of a trusted installation. \n\nYou can already specify a custom configuration by setting a system property and this is more secure since your code needs to have permission to set that property.\n\nTo the submitter: have you tried specifying your custom config with the \norg.apache.xml.security.resource.config property?"}, {"count": 4, "tags": [], "bug_id": 44918, "attachment_id": null, "text": "Sean,\n\nYes, we always pass the custom config via org.apache.xml.security.resource.config\nproperty. The problem with this solution is the inability to specify different configs for e.g. different webservices in the same Container/VM.\n\nOn the other hand I see your point with the security concern. \nPerhaps we can add a custom Permission class to check against current active SecurityManager/SecurityPolicy if we are allowed to set the config? Altough I've never done this.\n\nWhat do you think?\n\nMarc", "id": 128161, "time": "2009-06-22T23:40:01Z", "creator": "gigerstyle@gmx.ch", "creation_time": "2009-06-22T23:40:01Z", "is_private": false}, {"count": 5, "tags": [], "creator": "sean.mullan@oracle.com", "attachment_id": null, "id": 128184, "time": "2009-06-23T06:57:41Z", "bug_id": 44918, "creation_time": "2009-06-23T06:57:41Z", "is_private": false, "text": "(In reply to comment #4)\n> Sean,\n> \n> Yes, we always pass the custom config via\n> org.apache.xml.security.resource.config\n> property. The problem with this solution is the inability to specify different\n> configs for e.g. different webservices in the same Container/VM.\n\nOk, but I believe that requires changes to support multiple configurations in the same VM. Right now, there is only one configuration per VM.\nSo this patch doesn't solve that problem.\n\n> On the other hand I see your point with the security concern. \n> Perhaps we can add a custom Permission class to check against current active\n> SecurityManager/SecurityPolicy if we are allowed to set the config? Altough\n> I've never done this.\n> \n> What do you think?\n\nI think if you added a per-App/container configuration such that it wouldn't affect any other threads in the same VM then you may not need to protect it with a permission."}, {"text": "(In reply to comment #5)\n> (In reply to comment #4)\n> > Sean,\n> > \n> > Yes, we always pass the custom config via\n> > org.apache.xml.security.resource.config\n> > property. The problem with this solution is the inability to specify different\n> > configs for e.g. different webservices in the same Container/VM.\n> \n> Ok, but I believe that requires changes to support multiple configurations in\n> the same VM. Right now, there is only one configuration per VM.\n> So this patch doesn't solve that problem.\n\nI think it does;-) but perhaps I didn't express myself correctly:\nWhat I meant is when I have multiple web-apps deployed (e.g webservices) and every deployment has it's own copy of xmlsec.jar then the org.apache.xml.security.Init class will be loaded multiple times, once per webapp beause of the class loader hirarchy. No?\n\n> \n> > On the other hand I see your point with the security concern. \n> > Perhaps we can add a custom Permission class to check against current active\n> > SecurityManager/SecurityPolicy if we are allowed to set the config? Altough\n> > I've never done this.\n> > \n> > What do you think?\n> \n> I think if you added a per-App/container configuration such that it wouldn't\n> affect any other threads in the same VM then you may not need to protect it\n> with a permission.", "tags": [], "bug_id": 44918, "attachment_id": null, "count": 6, "id": 128190, "time": "2009-06-23T07:33:38Z", "creator": "gigerstyle@gmx.ch", "creation_time": "2009-06-23T07:33:38Z", "is_private": false}, {"text": "(In reply to comment #6)\n> (In reply to comment #5)\n> > (In reply to comment #4)\n> > > Sean,\n> > > \n> > > Yes, we always pass the custom config via\n> > > org.apache.xml.security.resource.config\n> > > property. The problem with this solution is the inability to specify different\n> > > configs for e.g. different webservices in the same Container/VM.\n> > \n> > Ok, but I believe that requires changes to support multiple configurations in\n> > the same VM. Right now, there is only one configuration per VM.\n> > So this patch doesn't solve that problem.\n> \n> I think it does;-) but perhaps I didn't express myself correctly:\n> What I meant is when I have multiple web-apps deployed (e.g webservices) and\n> every deployment has it's own copy of xmlsec.jar then the\n> org.apache.xml.security.Init class will be loaded multiple times, once per\n> webapp beause of the class loader hirarchy. No?\n\nOk, I see now. Yes, I believe you're right. \n\nLet me think about this some more and get back to you.", "tags": [], "creator": "sean.mullan@oracle.com", "attachment_id": null, "count": 7, "id": 128193, "time": "2009-06-23T07:48:52Z", "bug_id": 44918, "creation_time": "2009-06-23T07:48:52Z", "is_private": false}]