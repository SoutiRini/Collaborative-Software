[{"count": 0, "tags": [], "creator": "kgreiner@xpediantsolutions.com", "attachment_id": null, "is_private": false, "id": 61824, "time": "2004-08-11T14:10:17Z", "bug_id": 30593, "creation_time": "2004-08-11T14:10:17Z", "text": "The following stack trace occurred while running tests.\n\n    [junit] Testcase:\ntestCreateDocument(org.apache.tools.ant.taskdefs.optional.sitraka.XMLReportTest):\nCaused an ERROR\n    [junit]\nC:\\Documents%20and%20Settings\\Kevin%20Greiner\\My%20Documents\\Develop\\Apache\\ant\\src\\etc\\testcases\\taskdefs\\optional\\sitraka\\covreport-test.xml\n(The system cannot find the path specified)\n    [junit] java.io.FileNotFoundException:\nC:\\Documents%20and%20Settings\\Kevin%20Greiner\\My%20Documents\\Develop\\Apache\\ant\\src\\etc\\testcases\\taskdefs\\optional\\sitraka\\covreport-test.xml\n(The system cannot find the path specified)\n    [junit] \tat java.io.FileInputStream.open(Native Method)\n    [junit] \tat java.io.FileInputStream.<init>(FileInputStream.java:106)\n    [junit] \tat\norg.apache.tools.ant.taskdefs.optional.sitraka.XMLReport.createDocument(XMLReport.java:176)\n    [junit] \tat\norg.apache.tools.ant.taskdefs.optional.sitraka.XMLReportTest.testCreateDocument(XMLReportTest.java:63)\n\nI checked the source and found that java.net.URL.getFile() was being used to get\nthe file's path from a URL.  The only problem being that getFile() does not\ndecode quoted characters (such as %20) in the URL (See the JDK's javadoc\ndescription of getFile()).  I'm inlining the patch to do the necessary decoding.\n I'll also attach it as a file if I can figure out that part of bugzilla.\n\nKevin\n\nRCS file:\n/home/cvspublic/ant/src/testcases/org/apache/tools/ant/taskdefs/optional/sitraka/XMLReportTest.java,v\nretrieving revision 1.7\ndiff -u -r1.7 XMLReportTest.java\n--- XMLReportTest.java\t9 Mar 2004 16:49:03 -0000\t1.7\n+++ XMLReportTest.java\t10 Aug 2004 14:56:23 -0000\n@@ -20,6 +20,7 @@\n import java.io.FileNotFoundException;\n import java.io.OutputStream;\n import java.net.URL;\n+import java.net.URLDecoder;\n import javax.xml.transform.OutputKeys;\n import javax.xml.transform.Transformer;\n import javax.xml.transform.TransformerFactory;\n@@ -45,7 +46,11 @@\n         if (url == null) {\n             throw new FileNotFoundException(\"Unable to load '\" + name + \"' from\nclasspath\");\n         }\n-        return new File(url.getFile());\n+        try {\n+            return new File(URLDecoder.decode(url.getFile(), \"UTF-8\"));\n+        } catch (java.io.UnsupportedEncodingException e) {\n+            throw new FileNotFoundException(\"Unable to load '\" + name + \"' from\nclasspath\");\n+        }\n     }\n \n     public void testCreateDocument() throws Exception {"}, {"count": 1, "tags": [], "creator": "kgreiner@xpediantsolutions.com", "attachment_id": 12390, "is_private": false, "id": 61825, "time": "2004-08-11T14:11:38Z", "bug_id": 30593, "creation_time": "2004-08-11T14:11:38Z", "text": "Created attachment 12390\npatch to add URL decoding"}, {"count": 2, "text": "The decode method you have used is from JDK 1.4. There is, however, a method in\nAnt's FileUtils (fromURI()) which should be suitable, although it does not\nconsider encoding when converting bytes to chars.", "bug_id": 30593, "attachment_id": null, "id": 61893, "time": "2004-08-12T15:07:41Z", "creator": "conor@apache.org", "creation_time": "2004-08-12T15:07:41Z", "tags": [], "is_private": false}, {"count": 3, "text": "I see.  I'd still favor the older URLDecoder.decode(String) method over\nFileUtils.fromURL as it appears that it would be (somewhat) faster since we\nalready have a URL object.  That is, URLDecoder.decode(url.getFile ()) parses\nthe file portion of the url whereas FileUtils.fromURL(url.toString()) parses the\nentire url.\n\nHowever, it's a minor point and I'm willing code it either way to see this\nfixed.  Should I attach a new patch file?", "bug_id": 30593, "attachment_id": null, "id": 61910, "time": "2004-08-12T18:45:14Z", "creator": "kgreiner@xpediantsolutions.com", "creation_time": "2004-08-12T18:45:14Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 30593, "is_private": false, "text": "Created attachment 12412\nUpdated patch using JDK 1.2 version of URLDecoder.decode()", "id": 61928, "time": "2004-08-13T04:55:25Z", "creator": "kgreiner@xpediantsolutions.com", "creation_time": "2004-08-13T04:55:25Z", "attachment_id": 12412}, {"count": 5, "attachment_id": null, "bug_id": 30593, "is_private": false, "id": 66497, "time": "2004-11-05T03:57:14Z", "creator": "kevin.greiner@compsol.cc", "creation_time": "2004-11-05T03:57:14Z", "tags": [], "text": "The latest patch for Bug 30642 also fixes this bug as both bugs reported the\nsame problem but in separate files.\n"}]