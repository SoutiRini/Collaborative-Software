[{"count": 0, "tags": [], "bug_id": 6180, "attachment_id": null, "text": "Here is a patch to include Ant's version in the manifest file.\n\nThis way, determining the version of ant.jar is *standard* (and easy).\nPVI specification is available since jdk 1.2, it's very helpfull, but it is \nquite unused...\nsee http://java.sun.com/products/jdk/1.2/docs/guide/versioning/index.html\n\nRemark : I'm not sure if the value of Implementation-Version as the build-date \nis really a good choice...\n\nIndex: build.xml\n===================================================================\nRCS file: /home/cvspublic/jakarta-ant/build.xml,v\nretrieving revision 1.233\ndiff -u -r1.233 build.xml\n--- build.xml\t1 Feb 2002 07:34:33 -0000\t1.233\n+++ build.xml\t1 Feb 2002 15:28:53 -0000\n@@ -343,6 +343,12 @@\n       <filterset refid=\"ant.filters\"/>\n     </copy>\n \n+    <copy    file=\"${manifest}\"\n+             toFile=\"${build.classes}/manifest\"\n+             overwrite=\"true\">\n+      <filterset refid=\"ant.filters\"/>\n+    </copy>\n+\n     <copy todir=\"${build.classes}/${optional.package}/junit/xsl\">\n        <fileset dir=\"${etc.dir}\">\n          <include name=\"junit-frames.xsl\" />\n@@ -365,7 +371,8 @@\n     \n     <jar destfile=\"${build.lib}/${name}.jar\"\n          basedir=\"${build.classes}\"\n-         manifest=\"${manifest}\">\n+         manifest=\"${build.classes}/manifest\">\n+      <exclude name=\"manifest\" />\n       <exclude name=\"org/apache/tools/ant/taskdefs/optional/**\" />\n       <metainf dir=\"${build.dir}\" includes=\"LICENSE.txt\"/>\n     </jar>\n\n\nIndex: manifest\n===================================================================\nRCS file: /home/cvspublic/jakarta-ant/src/etc/manifest,v\nretrieving revision 1.3\ndiff -u -r1.3 manifest\n--- manifest\t1 Aug 2001 21:37:50 -0000\t1.3\n+++ manifest\t1 Feb 2002 15:07:34 -0000\n@@ -2,4 +2,10 @@\n Main-Class: org.apache.tools.ant.Main\n Class-Path: jaxp.jar parser.jar crimson.jar optional.jar xalan.jar\n \n-\n+Name: org/apache/tools/ant\n+Specification-Title: Apache Ant\n+Specification-Vendor: Apache Jakarta (http://jakarta.apache.org/)\n+Specification-Version: @VERSION@\n+Implementation-Title: org.apache.tools.ant\n+Implementation-Vendor: Apache Jakarta (http://jakarta.apache.org/)\n+Implementation-Version: @DATE@", "id": 10167, "time": "2002-02-01T15:31:23Z", "creator": "hboutemy@business-village.fr", "creation_time": "2002-02-01T15:31:23Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 6180, "text": "Nightly build 2002-02-20 contains package version identifications in the generated\njars - using inline manifests rather than modifying an external file, though.", "id": 10895, "time": "2002-02-19T14:06:31Z", "creator": "bodewig@apache.org", "creation_time": "2002-02-19T14:06:31Z", "is_private": false, "attachment_id": null}]