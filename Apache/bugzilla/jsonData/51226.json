[{"count": 0, "attachment_id": null, "creator": "mashmk02@gmail.com", "is_private": false, "id": 146440, "time": "2011-05-19T06:26:15Z", "bug_id": 51226, "creation_time": "2011-05-19T06:26:15Z", "tags": [], "text": "There is no ant task for FindLeaks."}, {"count": 1, "tags": [], "bug_id": 51226, "attachment_id": 27029, "text": "Created attachment 27029\nfindleaks ant task\n\nI made patch for adding FindLeaks ant task.\n\nRegards.", "id": 146441, "time": "2011-05-19T06:36:46Z", "creator": "mashmk02@gmail.com", "creation_time": "2011-05-19T06:36:46Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 51226, "attachment_id": null, "text": "Thanks for the report and the patch. There were a couple of minor issues with the patch and one slightly more serious issue.\n\nFirst the minor issues:\n- no license header in FindLeaksTask.java\n- a couple of unused imports in FindLeaksTask.java\n\nTomcat includes a checkstyle configuration in /res/checkstyle that you can use with your IDE. Alternatively, you can set execute.validate=true in your build.properties and ant will run the checkstyle checks.\n\nThe bigger issue is that the patch changes the output format of find leaks for the manager application. The output is intended to be a plain text list of leaking contexts that can be parsed easily by the client. Adding the additional text from the HTML Manager to the Manager will make it much more difficult for a client to parse the output.\n\nIf you submit an updated patch, it should get applied pretty quickly. If not, one of the committers will probably make the necessary changes to this patch and apply it but that is likely to take a little longer.", "id": 146449, "time": "2011-05-19T09:10:40Z", "creator": "markt@apache.org", "creation_time": "2011-05-19T09:10:40Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "mashmk02@gmail.com", "is_private": false, "id": 146528, "time": "2011-05-23T01:41:04Z", "bug_id": 51226, "creation_time": "2011-05-23T01:41:04Z", "tags": [], "text": "Thanks for comments.\n\n(In reply to comment #2)\n> Thanks for the report and the patch. There were a couple of minor issues with\n> the patch and one slightly more serious issue.\n> \n> First the minor issues:\n> - no license header in FindLeaksTask.java\nadded license header\n\n> - a couple of unused imports in FindLeaksTask.java\nremoved two unused imports\n\n> \n> Tomcat includes a checkstyle configuration in /res/checkstyle that you can use\n> with your IDE. Alternatively, you can set execute.validate=true in your\n> build.properties and ant will run the checkstyle checks.\nI ran ant with execute.validate=true, and I got no error.\n \n> The bigger issue is that the patch changes the output format of find leaks for\n> the manager application. The output is intended to be a plain text list of\n> leaking contexts that can be parsed easily by the client. Adding the additional\n> text from the HTML Manager to the Manager will make it much more difficult for\n> a client to parse the output.\n\nI added the new request parameter \"status\". If set this parameter to true, ManagerServlet returns the message that starts with \"OK -\".\nThis parameter is used only by the Ant task.\nIf set this parameter to false or not set, ManagerServlet and HTMLManagerServlet return the same message as before.\n\n> \n> If you submit an updated patch, it should get applied pretty quickly. If not,\n> one of the committers will probably make the necessary changes to this patch\n> and apply it but that is likely to take a little longer.\nI'll attach the new patch.\n\nBest regards."}, {"count": 4, "attachment_id": 27045, "creator": "mashmk02@gmail.com", "is_private": false, "id": 146529, "time": "2011-05-23T01:45:21Z", "bug_id": 51226, "creation_time": "2011-05-23T01:45:21Z", "tags": [], "text": "Created attachment 27045\nfindleaks ant task"}, {"count": 5, "tags": [], "bug_id": 51226, "is_private": false, "text": "Thanks for the updated patch. I have applied it with the following changes to 7.0.x and it will be included in 7.0.15 onwards.\n\n- renamed query parameter to statusLine for consistency\n- made statusLine configurable in Ant task\n- added a status response if no leaking apps were found\n- added some documentation\n\nThanks again for the patch.", "id": 146594, "time": "2011-05-24T16:05:16Z", "creator": "markt@apache.org", "creation_time": "2011-05-24T16:05:16Z", "attachment_id": null}]