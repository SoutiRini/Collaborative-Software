[{"count": 0, "attachment_id": null, "bug_id": 35425, "text": "Hello,\n probably due to fix in bug #28222 (but this is not confirmed) getRequestURL()\ndoesn't work like described in\nhttp://jakarta.apache.org/tomcat/tomcat-5.5-doc/servletapi/javax/servlet/http/HttpServletRequest.html#getRequestURL()\njavadoc page.\n\nThis is most visible when using struts. When users request address (i.e.)\nhttp://localhost/struts_action.do (which is purely forward action) requestURL()\nused in jsp page where this action forwards returns address of that page\n(however address in browser is still struts action). This violates sentence from\napi docs that requestURL() \"Reconstructs the URL the client used to make the\nrequest.\"\n\nAbove behaviour breaks applications which depend on it.\n\nWith Tomcat 5.0.48 requestURL() works correctly.\n\nRadoslaw Grzanka", "id": 76553, "time": "2005-06-20T09:03:54Z", "creator": "r.grzanka@ks-software.com", "creation_time": "2005-06-20T09:03:54Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 35425, "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of 28222 ***", "id": 76558, "time": "2005-06-20T10:45:25Z", "creator": "remm@apache.org", "creation_time": "2005-06-20T10:45:25Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 35425, "attachment_id": null, "text": "O just installed tomcat 5.5.9 and got the same problem. This hasn't been\ncorrected in release 5.5.7? I already read the other bug reports and doesn't\nseems to me that the bug has been solved, that's because I'm reopening this.\n\nI'll try to analyse the sources to find out some way I can contribute.", "id": 76902, "time": "2005-07-01T21:19:28Z", "creator": "iran@isic.com.br", "creation_time": "2005-07-01T21:19:28Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 35425, "text": "This is a duplicate and will not be changed.", "count": 3, "id": 76903, "time": "2005-07-01T21:43:27Z", "creator": "markt@apache.org", "creation_time": "2005-07-01T21:43:27Z", "is_private": false}, {"count": 4, "tags": [], "text": "This is a duplicate and will not be changed.\n\n*** This bug has been marked as a duplicate of 28222 ***\n\n*** This bug has been marked as a duplicate of 28222 ***", "attachment_id": null, "bug_id": 35425, "id": 76904, "time": "2005-07-01T21:43:54Z", "creator": "markt@apache.org", "creation_time": "2005-07-01T21:43:54Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 35425, "attachment_id": null, "text": "(In reply to comment #4)\n> This is a duplicate and will not be changed.\n> \n> *** This bug has been marked as a duplicate of 28222 ***\n> \n> *** This bug has been marked as a duplicate of 28222 ***\n\nOnce this bug \"is a duplicate and will not be changed\", should I assume\ngetRequestURL() behaviour won't change, despite it's return value isn't\nconsistent with servlet specification? Or is it consistent? Should I look for\nanother solution, change my code?\n\nI'm sorry for the inconvenient question, but I'm really looking for\nclarification here.", "id": 76912, "time": "2005-07-01T22:36:28Z", "creator": "iran@isic.com.br", "creation_time": "2005-07-01T22:36:28Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 35425, "text": "The return value is as required by SRV8.4\n\nThe javadocs are, in my view, misleading as none of them take any account of the\nrequirements of SRV8.4\n\nIf you want the original request, then obtain it as per SRV.8.4.2\n\nThere was some debate about this change on the tomcat-dev list but the\nconclusion was that the current behaviour is the correct one.", "id": 76914, "time": "2005-07-01T22:48:14Z", "creator": "markt@apache.org", "creation_time": "2005-07-01T22:48:14Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "text": "Thanks Mark. This really helped.\n\n(In reply to comment #6)\n> The return value is as required by SRV8.4\n> \n> The javadocs are, in my view, misleading as none of them take any account of the\n> requirements of SRV8.4\n> \n> If you want the original request, then obtain it as per SRV.8.4.2\n> \n> There was some debate about this change on the tomcat-dev list but the\n> conclusion was that the current behaviour is the correct one.", "attachment_id": null, "bug_id": 35425, "id": 76968, "time": "2005-07-04T13:09:35Z", "creator": "iran@isic.com.br", "creation_time": "2005-07-04T13:09:35Z", "is_private": false}, {"count": 8, "tags": [], "text": "\nI don't know how to obtain origianl request url. I used the \nrequest.getAttribute(\"javax.servlet.forward.request_uri\") and it returned the \nsame thing as the request.getURI(). Can anyone give an example?\n\n\n(In reply to comment #7)\n> Thanks Mark. This really helped.\n> (In reply to comment #6)\n> > The return value is as required by SRV8.4\n> > \n> > The javadocs are, in my view, misleading as none of them take any account \nof the\n> > requirements of SRV8.4\n> > \n> > If you want the original request, then obtain it as per SRV.8.4.2\n> > \n> > There was some debate about this change on the tomcat-dev list but the\n> > conclusion was that the current behaviour is the correct one.\n\n", "attachment_id": null, "bug_id": 35425, "id": 91662, "time": "2006-07-27T19:27:58Z", "creator": "zwu_ca@yahoo.com", "creation_time": "2006-07-27T19:27:58Z", "is_private": false}]