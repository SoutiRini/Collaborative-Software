[{"count": 0, "tags": [], "creator": "charly41434@yahoo.de", "is_private": false, "text": "If there are 2 contexts declared with the path of the 2nd context is a subpath\nof the 1nd context then getContext(subpath) within the 1st context does not give\nthe 2nd context.\nFor example:\nc:/TOMCATHOME/conf/Catalina/localhost/context$sub.xml:\n<Context path=\"/context/sub\" docBase=\"../webapp2/contextsub\" crossContext=\"true\">\n</Context>\n\nc:/TOMCATHOME/conf/Catalina/localhost/context.xml:\n<Context path=\"/context\" docBase=\"../webapp2/context\" crossContext=\"true\">\n</Context>\n\nc:/TOMCATHOME/webapp2/context/test.jsp:\n<html><body>\n<% \n\nServletContext self = getServletContext();\nServletContext sub_ctx = self.getContext(\"/context/sub\");\n\nif (self!=sub_ctx)\n{ %>\nok: <%=  sub_ctx!=null?sub_ctx.getRealPath(\"/\"):\"null\" %>\n\n<% } else { %>\nNOT ok: Should not be same context: <%= sub_ctx.getRealPath(\"/\") %>\n\n<% } %>\n</body></html>\n\n\nDirectory c:/TOMCATHOME/webapp2/contextsub  exists...\n\nCalling http://localhost:8080/context/test.jsp shows:\nNOT ok: Should not be same context: c:\\TOMCATHOME\\webapps\\..\\webapp2\\context\\\n\nIt should show:\nok: c:\\TOMCATHOME\\webapps\\..\\webapp2\\contextsub\\", "id": 90971, "time": "2006-07-07T08:06:15Z", "bug_id": 39987, "creation_time": "2006-07-07T08:06:15Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Created attachment 18566\ntestcase\n\nFiles for testing   \nadd to vanilla 5.5.17\n\nbug is also present in 5.0.30", "attachment_id": 18566, "id": 90972, "creator": "charly41434@yahoo.de", "time": "2006-07-07T08:10:26Z", "bug_id": 39987, "creation_time": "2006-07-07T08:10:26Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 39987, "is_private": false, "id": 91015, "time": "2006-07-07T23:52:48Z", "creator": "markt@apache.org", "creation_time": "2006-07-07T23:52:48Z", "tags": [], "text": "This is a duplicate of bug 13040 and has been fixed for the 5.5.x branch\nincluding 5.5.17.\n\nIt looks like your contexts are not correctly configured. You should use #\nrather than $ when defining context.xml files for sub-contexts so your file\nshould be called context#sub.xml\n\nI have just re-tested 5.5.x and the behaviour is correct in this version.\n\nI previuosly fixed 13040 in 4.1.x and 5.5.x but not 5.0.x so this bug is valid\nfor 5.0.x only. I have changed the version accordingly. Please be aware that\nfurther development of the 5.0.x branch is unlikely."}, {"count": 3, "attachment_id": null, "bug_id": 39987, "is_private": false, "id": 91017, "time": "2006-07-08T07:35:21Z", "creator": "charly41434@yahoo.de", "creation_time": "2006-07-08T07:35:21Z", "tags": [], "text": "(In reply to comment #2)\nThanks!\n> This is a duplicate of bug 13040 and has been fixed for the 5.5.x branch\n> including 5.5.17.\nSorry for the dup. I made a simple bugzilla search for \"getContext\" but I forgot \nto change the \"status\" from \"open\" to \"all\" (better the default would be \"all\")\n> \n> It looks like your contexts are not correctly configured. You should use #\n> rather than $ when defining context.xml files for sub-contexts so your file\n> should be called context#sub.xml\nI wished there would be some indication (warning or even error) in the logfiles \nthat the path attribute of <context> deviates from what TC (5.5) has actually \nconfigured.\nI know there is certainly some doc about this...\n> \n> I have just re-tested 5.5.x and the behaviour is correct in this version.\nI stumbled over this bug in 5.0.30  but I knew that this version is outdated and \nso uninteresting. So I made the (buggy) check against 5.5.17...\n\n> \n> Please be aware that\n> further development of the 5.0.x branch is unlikely.\nI used 5.0.30 only because its a prerequisite for a purchased webapp.\n"}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Changing this to WONTFIX since the chances of further development on the 5.0.x\nbranch are pretty slim.", "id": 91681, "time": "2006-07-28T01:43:45Z", "bug_id": 39987, "creation_time": "2006-07-28T01:43:45Z", "is_private": false}]