[{"count": 0, "tags": [], "bug_id": 49526, "text": "The sequence\n  <c:set var=\"hello\" value=\"hello\"/>\n  <c:set var=\"x\" value=\"#{hello}\"/>\n  <c:set var=\"x\" value=\"world\"/>\n  <c:out value=\"${x}\"/>\n\ngenerates \"hello\" rather than \"world\"\n\nThe commented out code at SetSupport#138 appears to be needed.", "id": 138022, "time": "2010-06-29T23:28:11Z", "creator": "jboynes@apache.org", "creation_time": "2010-06-29T23:28:11Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "jboynes@apache.org", "text": "That code always removed any expression from the VariableMapper. Per the question, it looks like it should only do that if variable is in page scope; setting in request scope, for example, should leave the original ValueExpression bound.", "id": 138023, "time": "2010-06-29T23:30:08Z", "bug_id": 49526, "creation_time": "2010-06-29T23:30:08Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 49526, "is_private": false, "id": 138025, "creation_time": "2010-06-29T23:48:43Z", "time": "2010-06-29T23:48:43Z", "creator": "jboynes@apache.org", "text": "Created attachment 25665\nPatch to remove variable from VariableMapper if page scope", "attachment_id": 25665}, {"count": 3, "attachment_id": null, "bug_id": 49526, "text": "Seems good. Need to write a test for this I think; fits the Cactus test nicely.\n\nI've updated the standard-test package so tests are passing; though the maven-jetty-plugin appears to give an error after tests pass [yet doesn't when tests fail].", "id": 138101, "time": "2010-07-02T21:04:47Z", "creator": "bayard@apache.org", "creation_time": "2010-07-02T21:04:47Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 49526, "is_private": false, "id": 138102, "creation_time": "2010-07-02T22:07:47Z", "time": "2010-07-02T22:07:47Z", "creator": "jboynes@apache.org", "text": "Thanks. I'm not getting an error per se, but I am getting a warning:\n2010-07-02 18:10:06.977:org.apache.jasper.runtime.PageContextImpl:WARN:  Internal error flushing the buffer in release()\n\nTesting this does not actually need the container support Cactus provides; an alternative would be to use something like EasyMock and add a unit test within standard-impl itself. That would also allow us to verify all the interactions with the container.", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 49526, "text": "Created attachment 25687\nTest case that verifies the mapper variable is handled correctly\n\nAlso updates to junit 4.8.1 and adds EasyMock dependency to pom.\nEasyMock uses Apache 2.0 license.", "id": 138103, "time": "2010-07-02T23:10:59Z", "creator": "jboynes@apache.org", "creation_time": "2010-07-02T23:10:59Z", "is_private": false, "attachment_id": 25687}, {"count": 6, "attachment_id": null, "creator": "bayard@apache.org", "text": "Thanks - both patches applied.\n\nsvn ci -m \"Implementing commented out code - c:set now removes variables from ELContext VariableMapper. Test and fix patches from Jeremy Boynes #49526\"\nSending        impl/pom.xml\nSending        impl/src/main/java/org/apache/taglibs/standard/tag/common/core/SetSupport.java\nAdding         impl/src/test/java/org/apache/taglibs/standard/tag/common\nAdding         impl/src/test/java/org/apache/taglibs/standard/tag/common/core\nAdding         impl/src/test/java/org/apache/taglibs/standard/tag/common/core/TestSetSupport.java\nTransmitting file data ...\nCommitted revision 960166.", "id": 138106, "time": "2010-07-03T03:37:22Z", "bug_id": 49526, "creation_time": "2010-07-03T03:37:22Z", "tags": [], "is_private": false}]