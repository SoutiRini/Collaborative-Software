[{"count": 0, "tags": [], "bug_id": 50934, "text": "Created attachment 26773\nApache httpd startup script\n\nWhen issuing HTTP CGI requests, the server sometimes returns an empty HTTP response. This is an intermittent problem and seems to happen randomly.\nI've reproduced it in at least 1 request in 100,000, using a very simple Perl\nCGI script. With other scripts, I've had this issue happening a few (less than 10)\ntimes in 100,000 requests as well. The problem happens both when using HTTPS as\nwell as HTTP.\n\nI've used an unmodified Apache 2.2.17 version, compiled with:\n\n--enable-layout=Apache --enable-mods --enable-so --enable-vhost-alias --enable-ssl --enable-expires --enable-rewrite --enable-proxy --enable-speling --enable-deflate --enable-headers --disable-stat\n\nThe build platform is a Linux 2.6.18.8 i686 and the list of shared libraries is:\n\n\tlibz.so.1 => /lib/libz.so.1 (0x4001c000)\n\tlibssl.so.0.9.8 => /usr/lib/libssl.so.0.9.8 (0x4002b000)\n\tlibcrypto.so.0.9.6 => /usr/lib/libcrypto.so.0.9.6 (0x4006c000)\n\tlibm.so.6 => /lib/libm.so.6 (0x40140000)\n\tlibaprutil-1.so.0 => /services/apache2217-original/lib/libaprutil-1.so.0 (0x40163000)\n\tlibexpat.so.0 => /usr/lib/libexpat.so.0 (0x4017f000)\n\tlibiconv.so.2 => /usr/lib/libiconv.so.2 (0x4019f000)\n\tlibapr-1.so.0 => /services/apache2217-original/lib/libapr-1.so.0 (0x4027e000)\n\tlibrt.so.1 => /lib/librt.so.1 (0x402a3000)\n\tlibcrypt.so.1 => /lib/libcrypt.so.1 (0x402b4000)\n\tlibpthread.so.0 => /lib/libpthread.so.0 (0x402e6000)\n\tlibdl.so.2 => /lib/libdl.so.2 (0x402fb000)\n\tlibc.so.6 => /lib/libc.so.6 (0x402fe000)\n\tlibcrypto.so.0.9.8 => /usr/lib/libcrypto.so.0.9.8 (0x4041e000)\n\t/lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)\n\nThe server has version 5.6.1 of Perl installed, though this may not be relevant\nto the issue. The CGI script is attached to this bug report and is installed in a directory named: /services/apache2217-original/htdocs/cranfordpub.com/cgi-bin/stress\n\nI setup a test to send 100,000 HTTP get request to the CGI script, using JMeter (version 2.4) and have had an empty HTTP response at least once in 100,000 requests. This response is logged by JMeter about 20 seconds after the request\nwas initiated and doesn't appear to fork the CGI process. It appears that the problem occurs before the script has a chance to run.\n\nThe GET request is\n\nhttp://server.dns.address/cgibin/stress/stress_test.cgi?/Merchant2/merchant.mv+Session_ID=4D12622E000AA3BD000069C400000000&Screen=LOGN&Order=1&Store_Code=CPOS\n\nThe parameters for this test are irrelevant and only mimic a request to a different production script.\n\nThe attached CGI script logs each request with a timestamp in a temporary file in /tmp.", "id": 145016, "time": "2011-03-15T11:44:29Z", "creator": "noliveira@hostopia.com", "creation_time": "2011-03-15T11:44:29Z", "is_private": false, "attachment_id": 26773}, {"attachment_id": 26774, "tags": [], "bug_id": 50934, "text": "Created attachment 26774\nTest Perl CGI script used to reproduce the problem", "count": 1, "id": 145017, "time": "2011-03-15T11:45:41Z", "creator": "noliveira@hostopia.com", "creation_time": "2011-03-15T11:45:41Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 50934, "text": "After more extensive analysis, we found that Apache HTTPD 2.2.17\nhad no issue, but we rather had a third-party daemon running on our test\nservers, that was sending SIGTERM signals about every 50 minutes \"believing\"\nthat the Apache thread was idle, when in fact it was not.\nWe previously didn't have this issue in Apache 1.3.x, and it appears that\nsignal handling changed somewhat from 1.3.x to 2.2\n\nShort comment: There is no issue with Apache. This bug should be invalid.", "count": 2, "id": 145549, "time": "2011-04-04T14:04:36Z", "creator": "noliveira@hostopia.com", "creation_time": "2011-04-04T14:04:36Z", "is_private": false}]