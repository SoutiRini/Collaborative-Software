[{"count": 0, "tags": [], "bug_id": 39546, "text": "In my application, Webmill jsr-168 portal, if I use JSF/MyFaces filters, \nconfigured in web.xml not invoked.\n\nInvestigate this bug, I found what in \norg.apache.catalina.core.ApplicationDispatcher\n\nafter prepare include, we call\n            invoke(outerRequest, outerResponse);  // line 574\ncorrert call\n            invoke(wrequest, outerResponse);  \n\nAfter this patch all filters correctly invoked.\n\nFilters not invoked due to we set dispatcher type in wreqeust object, not in \nouterRequest:\n            wrequest.setAttribute(ApplicationFilterFactory.DISPATCHER_TYPE_ATTR,\n                                             new Integer\n(ApplicationFilterFactory.INCLUDE)); // line 571,572", "id": 88999, "time": "2006-05-10T15:28:49Z", "creator": "serg_main@yahoo.com", "creation_time": "2006-05-10T15:28:49Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 89004, "time": "2006-05-10T15:55:44Z", "bug_id": 39546, "creation_time": "2006-05-10T15:55:44Z", "text": "To start things with, -1 for your proposed fix; if there is a problem, this is\nnot a way to fix things.\n\nCan you produce a simple test war ?"}, {"count": 2, "tags": [], "bug_id": 39546, "attachment_id": null, "text": "I will try in next few days", "id": 89006, "time": "2006-05-10T16:00:06Z", "creator": "serg_main@yahoo.com", "creation_time": "2006-05-10T16:00:06Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 39546, "is_private": false, "id": 89007, "attachment_id": null, "creator": "remm@apache.org", "creation_time": "2006-05-10T16:13:22Z", "time": "2006-05-10T16:13:22Z", "text": "The problem I have with this is that the outerRequest field value will actually\nbe the wrapper, unless you have wrapped the request. In that case, you need to\nuse ServletRequestWrapper, and delegate properly."}, {"count": 4, "tags": [], "bug_id": 39546, "text": "Yes, I use ServletRequestWrapper\nThis is my current implementation of request\n\nhttp://cvs.sourceforge.net/viewcvs.py/riverock/riverock/riverock-\nwebmill/src/java/org/riverock/webmill/portal/impl/WebmillPortletRequest.java?\nrev=1.12&view=markup\n", "id": 89009, "time": "2006-05-10T16:55:03Z", "creator": "serg_main@yahoo.com", "creation_time": "2006-05-10T16:55:03Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 39546, "is_private": false, "text": "Your implementation of getAttribute doesn't do it:\n    public Object getAttribute( String key ) {\n        if (key==null) {\n            throw new IllegalArgumentException(\"Call getAttribute() with\nkey==null\");\n        }\n\n        return portletAttributes.get( key );\n    }\nYou have to delegate to your \"parent\" request for attributes which may not be\nportlet related.", "id": 89025, "time": "2006-05-11T09:26:48Z", "creator": "remm@apache.org", "creation_time": "2006-05-11T09:26:48Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 89145, "time": "2006-05-15T17:13:23Z", "bug_id": 39546, "creation_time": "2006-05-15T17:13:23Z", "text": "*** Bug 39586 has been marked as a duplicate of this bug. ***"}]