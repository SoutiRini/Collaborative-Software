[{"text": "The SocketInputStream class reads HTTP headers up to a maximum of 4096 bytes\n(HttpHeader.MAX_VALUE_SIZE), after that it fails logging the exception in\ncatalina's log.\nI assume they hardcoded this limit assuming the maximum length of a single\nCookie (4K). However, browsers append cookies into a single Cookies header\nseparating the cookies with ';'. If you have 2 cookies going with the same\nrequest and adding up more than 4K, then the request fails. \n\nOffending code [SocketInputStream, line 461]:\n  if ((2 * maxRead) <= HttpHeader.MAX_VALUE_SIZE) {\n\nAs browsers are recommended to support at least 20 cookies to a single web site\nof 4K each, the value of the HttpHeader.MAX_VALUE_SIZE should be 20 bigger.\n\n[This applies to all 4.x versions]", "tags": [], "bug_id": 17178, "is_private": false, "count": 0, "id": 31544, "time": "2003-02-18T19:53:16Z", "creator": "alejandro.abdelnur@sun.com", "creation_time": "2003-02-18T19:53:16Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 71679, "time": "2005-03-01T21:56:28Z", "bug_id": 17178, "creation_time": "2005-03-01T21:56:28Z", "is_private": false, "text": "The HTTP connector has been deprecated. Use the Coyote connector instead."}]