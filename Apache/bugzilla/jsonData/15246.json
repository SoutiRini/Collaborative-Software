[{"attachment_id": null, "tags": [], "bug_id": 15246, "text": "On line 365 of org.apache.tools.ant.taskdefs.email.EmailTask.java, the list of\nfilenames to attach is tokenized by comma (as per the documentation for the mail\ntask) and also by spaces. Unfortunately this seems to be preventing attaching\nfiles with spaces in the pathname. I am using EmailTask directly from another\njava application and attaching a file with spaces in the pathname causes a\nNullPointerException to be thrown. I have not confirmed if doing the same using\nthe mail task from an ant build.xml has the same affect.\n\nThe following code has been tested and demonstrates the problem:\n\nimport org.apache.tools.ant.taskdefs.email.EmailTask;\nimport java.io.*;\n\npublic class TestEmailTask\n{\n    public static void main(String[] args)\n    {\n        try\n        {\n            EmailTask emailTask = new EmailTask();\n            emailTask.setMailhost(\"myhost\");\n            emailTask.setMailport(25);\n            emailTask.setSubject(\"Test\");\n            emailTask.setFrom(\"myself@somewhere.com\");\n            // Get NullPointerException on next line\n            emailTask.setFiles(\"Path with spaces\" + File.separator + \"MyFile.txt\");\n            emailTask.execute();\n        }\n        catch (Throwable e)\n        {\n            e.printStackTrace();\n        }\n    }\n}", "count": 0, "id": 27621, "time": "2002-12-10T19:38:59Z", "creator": "aaronj@norwestlabs.com", "creation_time": "2002-12-10T19:38:59Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "text": "OK, three things:\n\n(1) mail's documentation was broken, the files attribute also splits on spaces.\n    FIXED.\n\n(2) The NPE in your test occurs as you haven't set the project attribute of the\n    task.  So it's a bug in your testcase 8-)\n\n(3) You can use a <fileset> to attach your files with spaces in their name.\n", "id": 34068, "time": "2003-03-28T15:08:46Z", "bug_id": 15246, "creation_time": "2003-03-28T15:08:46Z", "is_private": false, "attachment_id": null}]