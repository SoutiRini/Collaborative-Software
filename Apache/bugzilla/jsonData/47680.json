[{"count": 0, "tags": [], "text": "Hi\nI am getting following errors in catalina.out while deploying war files.\nHowever I can access the web application fine and the actual files MANIFEST.MF,context.xml and web.xml are present in the war file. I am getting these errors every time application is deployed.\n\n========================================================================\nAug 11, 2009 12:51:17 PM org.apache.catalina.core.StandardService start\nINFO: Starting service Catalina\nAug 11, 2009 12:51:17 PM org.apache.catalina.core.StandardEngine start\nINFO: Starting Servlet Engine: Apache Tomcat/6.0.20\nAug 11, 2009 12:51:22 PM org.apache.catalina.startup.ContextConfig init\nSEVERE: Exception fixing docBase: {0} \njava.io.FileNotFoundException: /export/people/tomcat/apache-tomcat-6.0.20/webapps/biorep/META-INF/MANIFEST.MF (No such file or directory)\n\tat java.io.FileOutputStream.open(Native Method)\n\tat java.io.FileOutputStream.<init>(FileOutputStream.java:179)\n\tat java.io.FileOutputStream.<init>(FileOutputStream.java:131)\n\tat org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:312)\n\tat org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:158)\n\tat org.apache.catalina.startup.ContextConfig.fixDocBase(ContextConfig.java:897)\n\tat org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:1012)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:279)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n\tat org.apache.catalina.core.StandardContext.init(StandardContext.java:5398)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4177)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:630)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:556)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:491)\n\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1206)\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:314)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:722)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:516)\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:710)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:583)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nAug 11, 2009 12:51:22 PM org.apache.catalina.core.StandardContext resourcesStart\nSEVERE: Error starting static Resources\njava.lang.NullPointerException\n\tat java.io.File.<init>(File.java:194)\n\tat org.apache.catalina.core.StandardContext.getBasePath(StandardContext.java:4840)\n\tat org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4048)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4217)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:630)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:556)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:491)\n\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1206)\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:314)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:722)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:516)\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:710)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:583)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nAug 11, 2009 12:51:22 PM org.apache.catalina.core.StandardContext start\nSEVERE: Error in resourceStart()\nAug 11, 2009 12:51:22 PM org.apache.catalina.startup.HostConfig deployDescriptor\nSEVERE: Error deploying configuration descriptor biorep.xml\njava.lang.NullPointerException\n\tat java.io.File.<init>(File.java:194)\n\tat org.apache.catalina.core.StandardContext.getBasePath(StandardContext.java:4840)\n\tat org.apache.catalina.core.StandardContext.getServletContext(StandardContext.java:1725)\n\tat org.apache.catalina.core.StandardContext.postWorkDirectory(StandardContext.java:5108)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4253)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:630)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:556)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:491)\n\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1206)\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:314)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:722)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:516)\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:710)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:583)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nAug 11, 2009 12:51:22 PM org.apache.catalina.startup.HostConfig deployWAR", "attachment_id": null, "id": 129629, "creator": "tipirneni@yahoo.com", "time": "2009-08-11T12:37:42Z", "bug_id": 47680, "creation_time": "2009-08-11T12:37:42Z", "is_private": false}, {"count": 1, "tags": [], "text": "Please attach the simplest war that replicates this issue to this bug report and someone will take a look.", "is_private": false, "id": 129631, "creator": "markt@apache.org", "time": "2009-08-11T13:20:06Z", "bug_id": 47680, "creation_time": "2009-08-11T13:20:06Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 47680, "attachment_id": null, "id": 129641, "time": "2009-08-11T20:09:50Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2009-08-11T20:09:50Z", "is_private": false, "text": "I think that this is caused by Unix permissions: I think that the user running Tomcat cannot create the following directory:\n\n/export/people/tomcat/apache-tomcat-6.0.20/webapps/biorep\n\n\nNote, that File.mkdirs() does not throw an IOException on failures, so I think the following happens inside of ExpandWar#expand():\n - if (docBase.exists()) check is false\n - docBase.mkdir(); call silently fails\n - parent.mkdirs(); call silently fails\n - expand(input, docBase, name) fails to open the file for writing and throws the exception\n\nBy the way, besides ignored mkdir errors, there are other things that are wrong:\n2. \" Exception fixing docBase: {0}\" message with an unfilled placeholder\n3. java.lang.NullPointerException  in StandardContext.getBasePath(StandardContext.java:4840)\napparently caused by null docBase\n4. \"However I can access the web application fine\" phrase -- is the app just running off an unexpanded war ?"}, {"count": 3, "tags": [], "text": "Hi developers,\n   Looks like the web application (WAR files) had permission problem in unwaring and the JSP/Servlets were running directly of the WAR files and work directory with deployment errors.\n\n  Thanks very much Konstantin,\n   \n-Suresh", "is_private": false, "bug_id": 47680, "id": 129657, "time": "2009-08-12T07:30:18Z", "creator": "tipirneni@yahoo.com", "creation_time": "2009-08-12T07:30:18Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 47680, "attachment_id": null, "id": 130329, "time": "2009-09-12T09:27:54Z", "creator": "markt@apache.org", "creation_time": "2009-09-12T09:27:54Z", "is_private": false, "text": "Resolving based on OP's comment #3"}]