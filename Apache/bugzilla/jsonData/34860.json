[{"count": 0, "tags": [], "bug_id": 34860, "attachment_id": null, "id": 74709, "creation_time": "2005-05-11T13:35:13Z", "time": "2005-05-11T13:35:13Z", "creator": "mgd@technosis.de", "text": "Hi ! \n \nI hope this is not a dublicate, but I didn't find one. \n \nWhen there is no environment variable CLASSPATH then the invoked command must \nnot contain -cp \"$CLASSPATH\" (which is expanded to -cp \"\"). \n \nThe following change it a trivial fix (could probably be improved): \n \nif [ -n \"$CLASSPATH\" ] ; then \n  ant_exec_command=\"exec \\\"$JAVACMD\\\" $ANT_OPTS -classpath \\\"$LOCALCLASSPATH\\\" \n-Dant.home=\\\"$ANT_HOME\\\" -Dant.library.dir=\\\"$ANT_LIB\\\" $ant_sys_opts \norg.apache.tools.ant.launch.Launcher $ANT_ARGS -cp \\\"$CLASSPATH\\\" \n$ant_exec_args\" \nelse \n  ant_exec_command=\"exec \\\"$JAVACMD\\\" $ANT_OPTS -classpath \\\"$LOCALCLASSPATH\\\" \n-Dant.home=\\\"$ANT_HOME\\\" -Dant.library.dir=\\\"$ANT_LIB\\\" $ant_sys_opts \norg.apache.tools.ant.launch.Launcher $ANT_ARGS $ant_exec_args\" \nfi \n \nBest, \nMichael", "is_private": false}, {"count": 1, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "id": 74787, "time": "2005-05-12T12:34:01Z", "bug_id": 34860, "creation_time": "2005-05-12T12:34:01Z", "is_private": false, "text": "Why would you think that it is a problem\nto call the launcher with -cp \"\" when there\nis no classpath?\n"}, {"count": 2, "tags": [], "text": "Because on my SuSE Linux 9.3 system with ant 1.6.3 installed I get the \nfollowing error: \n \nmgd@linux:~/ataqcvs/webataq> ant \nUnknown argument: -cp \nant [options] [target [target2 [target3] ...]] \nOptions: \n  -help, -h              print this message \n  -projecthelp, -p       print project help information \n  -version               print the version information and exit \n  -diagnostics           print information that might be helpful to \n                         diagnose or report problems. \n  -quiet, -q             be extra quiet \n  -verbose, -v           be extra verbose \n  -debug, -d             print debugging information \n  -emacs, -e             produce logging information without adornments \n  -lib <path>            specifies a path to search for jars and classes \n  -logfile <file>        use given file for log \n    -l     <file>                '' \n  -logger <classname>    the class which is to perform logging \n  -listener <classname>  add an instance of class as a project listener \n  -noinput               do not allow interactive input \n  -buildfile <file>      use given buildfile \n    -file    <file>              '' \n    -f       <file>              '' \n  -D<property>=<value>   use value for given property \n  -keep-going, -k        execute all targets that do not depend \n                         on failed target(s) \n  -propertyfile <name>   load all properties from file with -D \n                         properties taking precedence \n  -inputhandler <class>  the class which will handle input requests \n  -find <file>           (s)earch for buildfile towards the root of \n    -s  <file>           the filesystem and use it \n  -nice  number          A niceness value for the main thread: \n                         1 (lowest) to 10 (highest); 5 is the default \n \nWith the proposed \"fix\" everything works as expected. \n \nNote this is new behavior with ant 1.6.3 -- 1.6.2 didn't have the problem. \n \nBest, \nMichael ", "is_private": false, "bug_id": 34860, "id": 74788, "time": "2005-05-12T13:18:31Z", "creator": "mgd@technosis.de", "creation_time": "2005-05-12T13:18:31Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "is_private": false, "id": 74789, "time": "2005-05-12T13:24:05Z", "bug_id": 34860, "creation_time": "2005-05-12T13:24:05Z", "text": "What does ant -diagnostics say?"}, {"count": 4, "tags": [], "creator": "mgd@technosis.de", "attachment_id": null, "is_private": false, "id": 74791, "time": "2005-05-12T13:56:20Z", "bug_id": 34860, "creation_time": "2005-05-12T13:56:20Z", "text": "Nothing other than what I pasted in my last mail. "}, {"count": 5, "tags": [], "text": "ah, of course.\n\nRight, here is the situation.\n1. Ant's main entry point knows nothing about -cp; it is an error.\n2. Ant's launcher does, along with the -lib and -noclasspath options. It is the\nlauncher entry point that gets it from the script, and then strips it out of the\nargument set before calling ant main.\n3. if that doesnt happen, or ant.Main gets called directly, bad things happen.\n\nThis is what confuses me. It is probably some configuration/installation error,\nbecause the script+launcher are not behaving right. But nothing springs to mind.\n\nwhat is the script you are using? is it the one that came with Ant? Can you\ncheck (i.e. by CD to the /bin directory and invoking it directly?)\n", "is_private": false, "bug_id": 34860, "id": 74793, "time": "2005-05-12T14:08:03Z", "creator": "stevel@apache.org", "creation_time": "2005-05-12T14:08:03Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 34860, "is_private": false, "text": "Try with\nthe --noconfig option\n\nIt looks like you are mixing 1.6.2 runtime with 1.6.3 script", "id": 74794, "time": "2005-05-12T14:14:55Z", "creator": "peterreilly@apache.org", "creation_time": "2005-05-12T14:14:55Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "mgd@technosis.de", "attachment_id": null, "id": 74795, "time": "2005-05-12T14:18:43Z", "bug_id": 34860, "creation_time": "2005-05-12T14:18:43Z", "is_private": false, "text": "I now added -diagnostics to the invoking line and finally found   \nthe cause of the problem:   \n   \nThere was an ant-1.6.2 installed by SuSE which somehow majorized  \nthe manually installed ant-1.6.3.  \n  \nAfter removing them RPMs the problem vanished.  \n  \nSorry to have bothered you with what turned out to be an installation  \nproblem on my part.  "}, {"count": 8, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "id": 74865, "time": "2005-05-14T00:02:28Z", "bug_id": 34860, "creation_time": "2005-05-14T00:02:28Z", "is_private": false, "text": "FYI, We've just patched ant main to give a special error message when -lib or\n-cp get that far down, warning people that they have a probable version mismatch\nbetween ant and the scripts. So the next time someone encounters this problem,\nit will be easier to resolve. Your suffering was not completely in vain."}]