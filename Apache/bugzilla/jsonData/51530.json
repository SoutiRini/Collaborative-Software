[{"count": 0, "attachment_id": 27298, "bug_id": 51530, "text": "Created attachment 27298\n[PATCH] the fix\n\nSome double byte characters aren't being written correctly to an AFP document. These are specifically EBCDIC encoded double byte fonts, as the java.nio.CharsetEncoder prepends and appends the \"Shift Out Shift In\" operators (0x0E and 0x0F respectively) to the byte array. \n\nThese are line data commands used for shifting between single and double byte encodings and not necessary in AFP. The result being that the characters aren't encoded correctly. \n\nThese need to be removed, however, there's no \"fool proof\" way of distinguishing between an EBCDIC DBCS (double byte character set) and other DBCSs. Thus I have implemented an optional attribute \"ebcdic-dbcs\" to remove these 0x0E and 0x0F operators.\n\nI've tested this here, but can't provide an EBCDIC encoded DBCS due to licensing issues.", "id": 148007, "time": "2011-07-19T14:04:05Z", "creator": "med1985@gmail.com", "creation_time": "2011-07-19T14:04:05Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 51530, "attachment_id": 27458, "text": "Created attachment 27458\nAFP dbcs patch\n\nI failed to include a file in the patch", "id": 149024, "time": "2011-09-05T08:58:53Z", "creator": "med1985@gmail.com", "creation_time": "2011-09-05T08:58:53Z", "is_private": false}, {"count": 2, "attachment_id": null, "creator": "gadams@apache.org", "is_private": false, "id": 155498, "time": "2012-04-01T06:19:14Z", "bug_id": 51530, "creation_time": "2012-04-01T06:19:14Z", "tags": [], "text": "batch transition to closed; if someone wishes to restore one of these to resolved in order to perform a verification step, then feel free to do so"}]