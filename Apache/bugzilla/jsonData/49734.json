[{"count": 0, "tags": [], "creator": "stephane.hoblingre@gmail.com", "attachment_id": null, "id": 139025, "time": "2010-08-10T07:17:15Z", "bug_id": 49734, "creation_time": "2010-08-10T07:17:15Z", "is_private": false, "text": "Some times when asking jmeter to stop a running thread group a null pointer exception is thrown and the window saying \"Stopping Threads\" remains displayed.\nThe exception is:\nException in thread \"Thread-357\" java.lang.NullPointerException\n\tat org.apache.jmeter.engine.StandardJMeterEngine.tellThreadsToStop(StandardJMeterEngine.java:542)\n\tat org.apache.jmeter.engine.StandardJMeterEngine.access$700(StandardJMeterEngine.java:57)\n\tat org.apache.jmeter.engine.StandardJMeterEngine$StopTest.run(StandardJMeterEngine.java:357)\n\tat java.lang.Thread.run(Unknown Source)\n\nIt seams a null check on the Thread object retreived should be done in this method:\n\n    private void tellThreadsToStop() {\n        synchronized (allThreads) { // Protect iterator\n            Iterator<JMeterThread> iter = new HashSet<JMeterThread>(allThreads.keySet()).iterator();\n            while (iter.hasNext()) {\n                JMeterThread item = iter.next();\n                item.stop(); // set stop flag\n                item.interrupt(); // interrupt sampler if possible\n                Thread t = allThreads.get(item);\n                t.interrupt(); // also interrupt JVM thread           // <-- Line 542\n            }\n        }\n    }\n\nRegards,\n\nStephane"}, {"count": 1, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 139112, "time": "2010-08-16T12:31:12Z", "bug_id": 49734, "creation_time": "2010-08-16T12:31:12Z", "is_private": false, "text": "Thanks for the report; fixed in SVN:\n\nURL: http://svn.apache.org/viewvc?rev=986020&view=rev\nLog:\nBug 49734 - Null pointer exception on stop Threads command (Run>Stop)\n\nModified:\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/engine/StandardJMeterEngine.java\n   jakarta/jmeter/trunk/xdocs/changes.xml"}, {"count": 2, "tags": [], "bug_id": 49734, "is_private": false, "text": "(In reply to comment #1)\n> Thanks for the report; fixed in SVN:\n> \n> URL: http://svn.apache.org/viewvc?rev=986020&view=rev\n> Log:\n> Bug 49734 - Null pointer exception on stop Threads command (Run>Stop)\n> \n> Modified:\n>   \n> jakarta/jmeter/trunk/src/core/org/apache/jmeter/engine/StandardJMeterEngine.java\n>    jakarta/jmeter/trunk/xdocs/changes.xml\n\nHi, Sebb, \n\nThe Fix is confused, can you explain why t can be 'null' here or shall we need to dig the root cause deeper? :)\n\nif (t != null ) { // Bug 49734\nt.interrupt(); // also interrupt JVM thread\n} \n\nThanks!\nCheng Chi", "id": 141740, "time": "2010-11-16T02:52:57Z", "creator": "joychester@gmail.com", "creation_time": "2010-11-16T02:52:57Z", "attachment_id": null}, {"count": 3, "text": "See the original bug report stack trace.", "bug_id": 49734, "is_private": false, "id": 141741, "time": "2010-11-16T05:12:28Z", "creator": "sebb@apache.org", "creation_time": "2010-11-16T05:12:28Z", "tags": [], "attachment_id": null}]