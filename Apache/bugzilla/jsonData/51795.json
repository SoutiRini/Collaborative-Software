[{"count": 0, "tags": [], "bug_id": 51795, "is_private": false, "text": "P4 server 2007.3 cannot handle an empty Files: section in a changelist description.  It wants Files: to be populated or missing.  I do not know whether this is true in more recent versions of p4.\n\nIn getEmptyChangelist() the P4Change task retains the Files: section header but stops processing the changelist description when it encounters a filespec.  Thus if any files are open in the default changelist when p4change runs, the task fails silently.\n\nRepro:\n\n<target name=\"increment-minor\">\n  <p4edit view=\"build.version\" />\n  <propertyfile file=\"build.version\"\n      comment=\"Build versioning properties\">\n    <entry key=\"minor\"\n      type=\"int\"\n      default=\"0\"\n      operation=\"+\"\n      value=\"1\" />\n  </propertyfile>\n  <property file=\"build.version\"\n      prefix=\"version.new\" />\n  <p4change description=\"Updating build version to ${version.new.major}.${version.new.minor}.\" />\n  <p4reopen view=\"build.version\" tochange=\"${p4.change}\" />\n  <p4sumbit change=\"${p4.change}\" />\n</target>\n\nResult: p4reopen fails; p4.change is not set.", "id": 149137, "time": "2011-09-09T19:45:58Z", "creator": "apache@timbojones.net", "creation_time": "2011-09-09T19:45:58Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Ant 1.9.0 does not include Perforce tasks any more. The Ant tasks supplied by Perforce Inc which are based on the native p4java API can be used instead.", "is_private": false, "bug_id": 51795, "id": 167045, "time": "2013-05-05T20:27:49Z", "creator": "antoine@apache.org", "creation_time": "2013-05-05T20:27:49Z", "attachment_id": null}]