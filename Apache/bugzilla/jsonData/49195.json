[{"count": 0, "attachment_id": null, "bug_id": 49195, "is_private": false, "id": 136447, "time": "2010-04-27T10:22:54Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-04-27T10:22:54Z", "tags": [], "text": "1. Install Tomcat as a service on Windows\n2. Specify <Server port=\"-1\" in server.xml\n3. Start the service, and then stop the service.\n4. The following is printed in the catalina.2010-04-27.log:\n\n27.04.2010 17:49:13 org.apache.catalina.startup.Catalina stopServer\nSEVERE: No shutdown port configured. Shut down server through OS signal. Server not shut down.\n\nIt is just a message. Tomcat stops regardless of it:\nAfter printing the message Catalina#stopServer() performs System.exit(1) which results in Tomcat shutdown.\n\nI think that when service launcher stops Tomcat, Catalina#server is not null. That can be used to differentiate the two use cases.\n\nThere could be improvements on how to stop Tomcat. E.g., to call Catalina.stop(). If that is the case, it would be better to use wait(10000) instead of sleep(10000) in StandardServer.await(), so that it could be woken by a notifyAll() call, or use interrupt() call to wake it up (if we know the thread). System.exit(0) would work regardless of all that.\n\nI suppose that jsvc may show the same behaviour, but I have not tried."}, {"count": 1, "tags": [], "text": "This has been fixed in 6.0.x and will be included in 6.0.30 onwards.", "is_private": false, "id": 140458, "creator": "markt@apache.org", "time": "2010-10-04T17:04:50Z", "bug_id": 49195, "creation_time": "2010-10-04T17:04:50Z", "attachment_id": null}]