[{"count": 0, "tags": [], "creator": "dev@tomcat.apache.org", "text": "I was running a load test with Apache(1.3.12)/Tomcat (3.1, 3.2 beta2): Apache -> mod_jserv -> Tomcat. Tomcat is serving a simple servlet (HelloWorld). This is on Solaris 2.7, with Sun's JVM (build 1.3.0-beta). I used a tool call \"WEBLOAD\" to generate the request load. \r\n\r\nThe test ran OK with 1 or 2 users (generating lots of request non-stop). When I increased to 3 or more users, I was getting the follow error (on stdout):\r\n\r\nHANDLER THREAD PROBLEM: java.net.SocketException: socket closed: Bad file number\r\njava.net.SocketException: socket closed: Bad file number\r\n        at java.net.SocketInputStream.socketRead(Native Method)\r\n        at java.net.SocketInputStream.read(SocketInputStream.java:86)\r\n        at java.io.BufferedInputStream.fill(BufferedInputStream.java:186)\r\n        at java.io.BufferedInputStream.read(BufferedInputStream.java:204)\r\n        at org.apache.tomcat.service.connector.AJP12RequestAdapter.readNextRequest(Ajp12ConnectionHandler.java:233)\r\n        at org.apache.tomcat.service.connector.Ajp12ConnectionHandler.processConnection(Ajp12ConnectionHandler.java:147)\r\n        at org.apache.tomcat.service.TcpWorkerThread.runIt(PoolTcpEndpoint.java:403)\r\n        at org.apache.tomcat.util.ThreadPool$ControlRunnable.run(ThreadPool.java:498)\r\n        at java.lang.Thread.run(Thread.java:484)\r\n\r\n", "id": 65, "time": "2000-08-30T17:36:33Z", "bug_id": 85, "creation_time": "2000-08-30T17:36:33Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "marc.saegesser@apropos.com", "text": "If possible, try mod_jk instead of mod_jserv.", "id": 825, "time": "2001-02-22T19:15:56Z", "bug_id": 85, "creation_time": "2001-02-22T19:15:56Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "The bug is probably related with a VM or setup problem ( or even a OS setting ).\nThis shouldn't happen - it's just a normal read.\nMy guess is that a \"netstat -an\" will show a lot of TIME_WAIT threads, and that\ncan be resolved with some settings in the os ( please don't ask for details :-).\nYou can try to use mod_jk ( which doesn't create additional threads ).", "is_private": false, "id": 1973, "creator": "cmanolache@yahoo.com", "time": "2001-04-21T13:02:49Z", "bug_id": 85, "creation_time": "2001-04-21T13:02:49Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "cmanolache@yahoo.com", "text": "As a OS setting problem, will not be fixed in tomcat.", "id": 1974, "time": "2001-04-21T13:03:24Z", "bug_id": 85, "creation_time": "2001-04-21T13:03:24Z", "is_private": false, "attachment_id": null}]