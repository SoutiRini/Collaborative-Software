[{"count": 0, "tags": [], "creator": "business2008+issues.apache.org@rodneybeede.com", "attachment_id": null, "is_private": false, "id": 170394, "time": "2013-10-02T16:36:43Z", "bug_id": 55620, "creation_time": "2013-10-02T16:36:43Z", "text": "When using startup.bat if apache-tomcat-7.0.xx is in directory with \",\" (comma) or \";\" (semi-colon) Tomcat fails to start correctly\n\nExample:\n\nC:\\Users\\username\\Desktop\\Some Parent\\Another parent with, a comma\\apache-tomcat-7.0.42\\\n\ncd \"C:\\Users\\username\\Desktop\\Some Parent\\Another parent with, a comma\\apache-tomcat-7.0.42\"\n\ncd bin\n\nset java_home=c:\\Program Files\\java\\jre7\n\nstartup.bat\n\n\nYou get the catalina log attached at the end.\n\nIf there is a semi-colon then you get no log at all.\n\n\nMost likely the Windows batch scripts for startup need to better handle escaping directory paths.  The error isn't clear as to the cause.  A work-around is to move the apache-tomcat-7.0.xx to a full pathname with NO commas or semi-colons.\n\n\n\ncatalina log:\n\nOct 02, 2013 11:34:31 AM org.apache.catalina.startup.ClassLoaderFactory validateFile\nWARNING: Problem with directory [C:\\Users\\username\\Desktop\\Some Parent\\Another parent with], exists: [false], isDirectory: [false], canRead: [false]\nOct 02, 2013 11:34:31 AM org.apache.catalina.startup.ClassLoaderFactory validateFile\nWARNING: Problem with directory [C:\\Users\\username\\Desktop\\Some Parent\\Another parent with, a comma\\apache-tomcat-7.0.42\\bin\\a comma\\apache-tomcat-7.0.42\\lib], exists: [false], isDirectory: [false], canRead: [false]\nOct 02, 2013 11:34:31 AM org.apache.catalina.startup.ClassLoaderFactory validateFile\nWARNING: Problem with directory [C:\\Users\\username\\Desktop\\Some Parent\\Another parent with], exists: [false], isDirectory: [false], canRead: [false]\nOct 02, 2013 11:34:31 AM org.apache.catalina.startup.ClassLoaderFactory validateFile\nWARNING: Problem with directory [C:\\Users\\username\\Desktop\\Some Parent\\Another parent with, a comma\\apache-tomcat-7.0.42\\bin\\a comma\\apache-tomcat-7.0.42\\lib], exists: [false], isDirectory: [false], canRead: [false]\nOct 02, 2013 11:34:31 AM org.apache.catalina.startup.ClassLoaderFactory validateFile\nWARNING: Problem with directory [C:\\Users\\username\\Desktop\\Some Parent\\Another parent with], exists: [false], isDirectory: [false], canRead: [false]\nOct 02, 2013 11:34:31 AM org.apache.catalina.startup.ClassLoaderFactory validateFile\nWARNING: Problem with directory [C:\\Users\\username\\Desktop\\Some Parent\\Another parent with, a comma\\apache-tomcat-7.0.42\\bin\\a comma\\apache-tomcat-7.0.42\\lib], exists: [false], isDirectory: [false], canRead: [false]\nOct 02, 2013 11:34:31 AM org.apache.catalina.startup.ClassLoaderFactory validateFile\nWARNING: Problem with directory [C:\\Users\\username\\Desktop\\Some Parent\\Another parent with], exists: [false], isDirectory: [false], canRead: [false]\nOct 02, 2013 11:34:31 AM org.apache.catalina.startup.ClassLoaderFactory validateFile\nWARNING: Problem with directory [C:\\Users\\username\\Desktop\\Some Parent\\Another parent with, a comma\\apache-tomcat-7.0.42\\bin\\a comma\\apache-tomcat-7.0.42\\lib], exists: [false], isDirectory: [false], canRead: [false]"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "Comma causes problems because Tomcat uses it as a separator in .loader properties in catalina.properties.\n\nSemi-colon causes problems because it is the separator for class path entries on Windows.\n\nColon will probably cause a problem on non-Windows platforms as it is used as the class path separator there.", "id": 170465, "attachment_id": null, "bug_id": 55620, "creation_time": "2013-10-07T09:58:00Z", "time": "2013-10-07T09:58:00Z", "is_private": false}, {"count": 2, "text": "I'm moving this to Tomcat 8 as I don't think there is sufficient demand from the user community for this feature in Tomcat 7 and there is a small chance that the changes necessary to support it will break something.\n\nI have fixed the comma case for 8.0.x and this will be include in 8.0.0-RC4 onwards. I'm still looking at semi-colon and colon.", "bug_id": 55620, "attachment_id": null, "id": 170466, "time": "2013-10-07T10:57:01Z", "creator": "markt@apache.org", "creation_time": "2013-10-07T10:57:01Z", "tags": [], "is_private": false}, {"count": 3, "text": "Having dug through the OpenJDK code there is no way Tomcat can support ; or ; in CATALINA_HOME and CATRALINA_BASE as the JRE doesn't provide any mechanism for quoting ; or : so they can't be distinguished from path separators.\n\nI'm resolving this as WONTFIX to make clear that elements of this bug can't - therefore won't - be fixed.", "bug_id": 55620, "attachment_id": null, "id": 170468, "time": "2013-10-07T12:47:37Z", "creator": "markt@apache.org", "creation_time": "2013-10-07T12:47:37Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 55620, "text": "It might be worth doing a check in catalina.bat and catalina.sh for those characters in either of CATALINA_HOME or CATALINA_BASE, and refusing to even attempt to start under those conditions.\n\nAny objections?", "id": 170469, "time": "2013-10-07T13:39:23Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-10-07T13:39:23Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 55620, "text": "None here.", "id": 170470, "time": "2013-10-07T13:51:21Z", "creator": "markt@apache.org", "creation_time": "2013-10-07T13:51:21Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 170533, "time": "2013-10-10T11:07:58Z", "bug_id": 55620, "creation_time": "2013-10-10T11:07:58Z", "text": "Checks added."}, {"count": 7, "tags": [], "bug_id": 55620, "text": "Aw. I had a patch waiting to be committed.\n\nMine would have worked under Cygwin, too ;)", "id": 170550, "time": "2013-10-10T19:34:28Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-10-10T19:34:28Z", "is_private": false, "attachment_id": null}]