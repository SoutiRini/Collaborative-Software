[{"count": 0, "tags": [], "creator": "a.panfilov@equant.ru", "attachment_id": null, "text": "We have an perl script accessed via WEB and protected by BASIC authorization\nmethod. Clients requests script using HTTP POST method, opening separate session\n(and processing authorization cycle as well) for each request. In previous\nversion of Apache (1.3.27) everything was OK. After upgrade to 1.3.31, we've got\ntrouble well seen in following access_log extract:\n\n172.16.0.14 - - [11/Oct/2004:12:26:01 +0400] \"POST /guacsc/guacsc.pl HTTP/1.1\"\n401 490\n172.16.0.14 - gazhariga [11/Oct/2004:12:26:13 +0400] \"mode=WPOST\n/guacsc/guacsc.pl HTTP/1.1\" 500 628\n-------------------------------------------------------^^^^^^^\n\nAs we suspects, following sequence occured:\n1. Client sends a POST request with some parameters in it's body (\"mode=W\")\n2. Apache sends an \"Authorization required (401)\" response immediately after\nrequest header is read\n3. Client sends a second request with authorization information\n4. Apache accepts authorization, but aggregates first request body with second\nrequest header (as marked in log above), so request parameters are lost and are\nnot passed to the script.\n5. So script fails with 500 error.  \n\nWe use following simple html to test a trouble:\n<html>\n<body>\n<form action=\"http://sun-lpp:8880/guacsc/guacsc.pl\" method=\"POST\">\n<input type=\"hidden\" name=\"mode\" value=\"W\">\n<input type=\"submit\">\n</form>\n</body>\n</html>\n\nApache is installed on Sun Solaris Platform (SunFire 880 + Sun Solaris OS v.2.8).\nRelated Apache configuration part (httpd.conf):\n ScriptAlias /guacsc/ \"/usr/local/guacsc/cgi-bin/\"\n        <Directory \"/usr/local/guacsc/cgi-bin\">\n                AllowOverride AuthConfig\n                Options None\n                Order allow,deny\n                Allow from all\n        </Directory>\n\nOther settings are left default.\n\nTrouble not depends on HTTP client used (we tested with IE 6, NN 7 and Jakarta\nHttpClient 2.0 lib), but not always happens in other configurations (e.g. in Red\nHat behind firewalls environment we have no troubles with common browsers, but\nhave same trouble with HttpClient lib).", "id": 64918, "time": "2004-10-11T10:24:22Z", "bug_id": 31638, "creation_time": "2004-10-11T10:24:22Z", "is_private": false}, {"count": 1, "tags": [], "text": "Thanks for the report, please use this patch until 1.3.32 is released:\n\nhttp://www.apache.org/dist/httpd/patches/apply_to_1.3.31/PR-29257.patch\n\n\n*** This bug has been marked as a duplicate of 29257 ***", "attachment_id": null, "id": 64919, "creator": "jorton@redhat.com", "time": "2004-10-11T10:34:33Z", "bug_id": 31638, "creation_time": "2004-10-11T10:34:33Z", "is_private": false}]