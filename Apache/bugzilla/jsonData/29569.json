[{"count": 0, "tags": [], "bug_id": 29569, "is_private": false, "text": "I'm using POST over HTTPS with verify client certificate and found possible bug.\nAccording to /CHANES:\n>Changes with Apache 2.0.37\n>\n> *) allow POST method over SSL when per-directory client cert\n>     authentication is used with 'SSLOptions +OptRenegotiate' enabled\n>     and a client cert was found in the ssl session cache.\nBut server still write to log:\n>[error] SSL Re-negotiation in conjunction with POST method not supported!\n\\nhint: try SSLOptions +OptRenegotiate\nThen I apply patch below feature will be worked rigth.\n### BEGIN DIFF ###\n--- modules/ssl/ssl_engine_kernel.c     Tue Jun 15 13:20:46 2004\n+++ modules/ssl/ssl_engine_kernel.c.orig        Tue Jun 15 13:38:17 2004\n@@ -549,7 +549,7 @@\n      *\n      * !! BUT ALL THIS IS STILL NOT RE-IMPLEMENTED FOR APACHE 2.0 !!\n      */\n-    if (!renegotiate && !renegotiate_quick && (r->method_number == M_POST)) {\n+    if (renegotiate && !renegotiate_quick && (r->method_number == M_POST)) {\n         ap_log_error(APLOG_MARK, APLOG_ERR, 0, r->server,\n                      \"SSL Re-negotiation in conjunction \"\n                      \"with POST method not supported!\\n\"\n### END DIFF ###", "id": 59214, "time": "2004-06-15T09:59:48Z", "creator": "ers@ers.msk.ru", "creation_time": "2004-06-15T09:59:48Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 29569, "text": "I think this patch is reversed?  The current logic is \n\n  if (renegotiate && !renegotiate_quick && (r->method_number == M_POST)) {\n\ni.e. if a renegotiation is needed, and a quick renegotiation isn't possible, and\nthe request is a POST request, then log the error and return a 403.  Which makes\nsense.\n\nIf a renegotiation is *not* needed, then the function does not attempt one anyway.  \n\nPresuming this is a duplicate of 12355 unless there's anything subtle I'm missing.\n\n*** This bug has been marked as a duplicate of 12355 ***", "id": 60237, "time": "2004-07-07T14:09:25Z", "creator": "jorton@redhat.com", "creation_time": "2004-07-07T14:09:25Z", "is_private": false, "attachment_id": null}]