[{"count": 0, "tags": [], "bug_id": 57088, "attachment_id": null, "id": 178442, "time": "2014-10-14T11:36:01Z", "creator": "apache@famille-jung.fr", "creation_time": "2014-10-14T11:36:01Z", "is_private": false, "text": "In workbench, add a HTTP(S) Recorder, a Recording Controller that is the target chosen in the HTTP(S) Recorder.\nAdd a View Results in Table in the HTTP(S) Recorder.\nStart recording.\n\nWhen you want to Stop recording, you get the exception at the end of the description.\nIf you remove the listener from the recorder, you can use Stop button again.\n\n2014/10/14 13:22:44 ERROR - jmeter.JMeter: Uncaught exception:  java.lang.NullPointerException\n\tat java.lang.ApplicationShutdownHooks.remove(ApplicationShutdownHooks.java:85)\n\tat java.lang.Runtime.removeShutdownHook(Runtime.java:239)\n\tat org.apache.jmeter.reporters.ResultCollector.testEnded(ResultCollector.java:269)\n\tat org.apache.jmeter.reporters.ResultCollector.testEnded(ResultCollector.java:306)\n\tat org.apache.jmeter.protocol.http.proxy.ProxyControl.notifyTestListenersOfEnd(ProxyControl.java:1192)\n\tat org.apache.jmeter.protocol.http.proxy.ProxyControl.stopProxy(ProxyControl.java:560)\n\tat org.apache.jmeter.protocol.http.proxy.gui.ProxyControlGui.actionPerformed(ProxyControlGui.java:365)\n\tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)\n\tat javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)\n\tat javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)\n\tat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)\n\tat java.awt.Component.processMouseEvent(Component.java:6516)\n\tat javax.swing.JComponent.processMouseEvent(JComponent.java:3311)\n\tat java.awt.Component.processEvent(Component.java:6281)\n\tat java.awt.Container.processEvent(Container.java:2229)\n\tat java.awt.Component.dispatchEventImpl(Component.java:4872)\n\tat java.awt.Container.dispatchEventImpl(Container.java:2287)\n\tat java.awt.Component.dispatchEvent(Component.java:4698)\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)\n\tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)\n\tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)\n\tat java.awt.Container.dispatchEventImpl(Container.java:2273)\n\tat java.awt.Window.dispatchEventImpl(Window.java:2719)\n\tat java.awt.Component.dispatchEvent(Component.java:4698)\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:735)\n\tat java.awt.EventQueue.access$200(EventQueue.java:103)\n\tat java.awt.EventQueue$3.run(EventQueue.java:694)\n\tat java.awt.EventQueue$3.run(EventQueue.java:692)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)\n\tat java.awt.EventQueue$4.run(EventQueue.java:708)\n\tat java.awt.EventQueue$4.run(EventQueue.java:706)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:705)\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:91)\n\nLinux Mint 17\njava version \"1.7.0_65\"\nOpenJDK Runtime Environment (IcedTea 2.5.2) (7u65-2.5.2-3~14.04)\nOpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)"}, {"attachment_id": null, "tags": [], "bug_id": 57088, "is_private": false, "count": 1, "id": 178446, "time": "2014-10-14T14:06:23Z", "creator": "sebb@apache.org", "creation_time": "2014-10-14T14:06:23Z", "text": "I cannot reproduce this.\n\nCan you create a simple JMX file that shows the behaviour?"}, {"count": 2, "tags": [], "bug_id": 57088, "attachment_id": null, "id": 178447, "time": "2014-10-14T15:33:32Z", "creator": "apache@famille-jung.fr", "creation_time": "2014-10-14T15:33:32Z", "is_private": false, "text": "Sorry but I cannot reproduce this bug since I restarted JMeter. I remember switching language from French to English but even with this and the mentionned actions, I cannot produce the exception. \n\nBy the way, the bug tracker displays:\n\n\"If you are providing the requested information, please change the bug status back to .\"\n\nProbably 'NEW' is missing at the end of the sentence\n\nPhilippe"}, {"attachment_id": null, "tags": [], "bug_id": 57088, "is_private": false, "count": 3, "id": 178450, "time": "2014-10-14T16:16:55Z", "creator": "sebb@apache.org", "creation_time": "2014-10-14T16:16:55Z", "text": "Thanks. I have reported the missing word in the message.\n\nIt looks as though the NPE must be caused by a null value for the static field shutdownHook. I cannot see how that can happen. Also, it does not look like this has anything directlty to do with the Recording Controller. \n\nThe problem can only occur if ResultCollector#testEnded() is called, and that is only called at the end of a test run. It is not called during recording as far as I can tell. Further, the variable cannot be null unless testStarted() was not called.\n\nHowever, given that this has occurred once, it would be sensible to check for null before calling removeShutdownHook()."}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "URL: http://svn.apache.org/r1631811\nLog:\nNPE in ResultCollector.testEnded\nBugzilla Id: 57088\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/reporters/ResultCollector.java\n    jmeter/trunk/xdocs/changes.xml", "id": 178451, "time": "2014-10-14T16:24:02Z", "bug_id": 57088, "creation_time": "2014-10-14T16:24:02Z", "is_private": false}, {"count": 5, "tags": [], "text": "Based on your comments I found a way to reproduce:\n\nLaunch JMeter\nAdd HTTPS Recorder\nAdd Recording controller (probably not required to reproduce the bug)\nStart the HTTPS Recorder\nAdd a Listener to the HTTPS Recorder\nTry to stop it.", "is_private": false, "id": 178469, "creator": "apache@famille-jung.fr", "time": "2014-10-15T07:04:46Z", "bug_id": 57088, "creation_time": "2014-10-15T07:04:46Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 57088, "attachment_id": null, "id": 178470, "time": "2014-10-15T07:07:05Z", "creator": "apache@famille-jung.fr", "creation_time": "2014-10-15T07:07:05Z", "is_private": false, "text": "Based on this, I would say the root cause is not fixed: if you add a listener to a already recording recorder, you probably should call some kind of start"}, {"attachment_id": null, "tags": [], "bug_id": 57088, "is_private": false, "count": 7, "id": 178474, "time": "2014-10-15T10:35:34Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-10-15T10:35:34Z", "text": "Based on your scenario, issue can happen as it is testStarted that initializes ShutdownHook, so since you add it after recording it is null.\n\nSo the null check is enough as this scenario is weird and exceptional. You usually add listener before starting recorder.\nPS : By the way for recording there is a Template called recording that setups all required config for recording.\n\nIf you have another opinion feel free to reopen with proposed solution.\nThanks"}]