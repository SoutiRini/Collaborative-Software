[{"count": 0, "tags": [], "text": "The Problem\n-----------\nI used ant-1.4.1 with jdk1.3.1-01 in a Windows XP professional environment.\nAfter I switched jdk from 1.3.1-01 to 1.4.0, Core task <property environment \n... > failed.\n\nThe xml and the results\n-----------------------\n\n-----------------------------------------------------------------------\nenv.xml\n-----------------------------------------------------------------------\n\n<project name=\"test\" default=\"test\" basedir=\".\">\n  <property name=\"os_name\" value=\"Windows XP\"/>\n\n  <target name=\"test\">\n    <echo message=\" before property environment='env'\"/>\n    <property environment=\"env\"/>\n    <echo message=\"JAVA_HOME = ${env.JAVA_HOME}\"/>\n    <echo message=\"ANT_HOME = ${env.ANT_HOME}\"/>\n  </target>\n\n</project>\n\n\n-----------------------------------------------------------------------\nJDK1.3.1_01\n-----------------------------------------------------------------------\n\nE:\\java\\jrt\\applications>echo %JAVA_HOME%\nc:\\java\\bea\\jdk131\n\nE:\\java\\jrt\\applications>echo %ANT_HOME%\nc:\\java\\jakarta-ant-1.4.1\n\nE:\\java\\jrt\\applications>echo %PATH%\n.;c:\\java\\jakarta-ant-1.4.1\\bin;c:\\java\\bea\\jdk131\\bin;C:\\WINNT\\system32;G:\\ora\nc\nle\\ora90\\bin;C:\\WINNT\\system32;C:\\WINNT;C:\\WINNT\\system32\\WBEM\n\nE:\\java\\jrt\\applications>java -version\njava version \"1.3.1_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.3.1_01)\nJava HotSpot(TM) Client VM (build 1.3.1_01, mixed mode)\n\nE:\\java\\jrt\\applications>ant -version\nAnt version 1.4.1 compiled on October 11 2001\n\nE:\\java\\jrt\\applications>ant -f env.xml\nBuildfile: env.xml\n\ntest:\n     [echo]  before property environment='env'\n     [echo] JAVA_HOME = c:\\java\\bea\\jdk131\n     [echo] ANT_HOME = c:\\java\\jakarta-ant-1.4.1\n\nBUILD SUCCESSFUL\n\nTotal time: 0 seconds\nE:\\java\\jrt\\applications>\n\n-----------------------------------------------------------------------\nJDK1.4.0\n-----------------------------------------------------------------------\n\nE:\\java\\jrt\\applications>echo %JAVA_HOME%\nc:\\java\\j2sdk1.4.0\n\nE:\\java\\jrt\\applications>echo %ANT_HOME%\nc:\\java\\jakarta-ant-1.4.1\n\nE:\\java\\jrt\\applications>echo %PATH%\n.;c:\\java\\jakarta-ant-1.4.1\\bin;c:\\java\\j2sdk1.4.0\\bin;C:\\WINNT\\system32;G:\\ora\nc\nle\\ora90\\bin;C:\\WINNT\\system32;C:\\WINNT;C:\\WINNT\\system32\\WBEM\n\nE:\\java\\jrt\\applications>ant -version\nAnt version 1.4.1 compiled on October 11 2001\n\nE:\\java\\jrt\\applications>java -version\njava version \"1.4.0\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.0-b92)\nJava HotSpot(TM) Client VM (build 1.4.0-b92, mixed mode)\n\nE:\\java\\jrt\\applications>ant -f env.xml\nBuildfile: env.xml\n\ntest:\n     [echo]  before property environment='env'\n\nBUILD FAILED\n\njava.lang.NullPointerException\n        at \norg.apache.tools.ant.taskdefs.Property.loadEnvironment(Property.java:\n253)\n        at org.apache.tools.ant.taskdefs.Property.execute(Property.java:183)\n        at org.apache.tools.ant.Task.perform(Task.java:217)\n        at org.apache.tools.ant.Target.execute(Target.java:184)\n        at org.apache.tools.ant.Target.performTasks(Target.java:202)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:601)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:560)\n        at org.apache.tools.ant.Main.runBuild(Main.java:454)\n        at org.apache.tools.ant.Main.start(Main.java:153)\n        at org.apache.tools.ant.Main.main(Main.java:176)\n\nTotal time: 2 seconds\nE:\\java\\jrt\\applications>", "is_private": false, "id": 11618, "creation_time": "2002-03-10T02:22:30Z", "time": "2002-03-10T02:22:30Z", "creator": "y.inoue@computer.org", "bug_id": 7006, "attachment_id": null}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 6456 ***", "id": 11647, "time": "2002-03-11T08:11:37Z", "bug_id": 7006, "creation_time": "2002-03-11T08:11:37Z", "attachment_id": null}]