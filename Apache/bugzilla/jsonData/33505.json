[{"count": 0, "tags": [], "creator": "cybermac912@yahoo.com", "is_private": false, "id": 70798, "creation_time": "2005-02-10T23:58:39Z", "time": "2005-02-10T23:58:39Z", "bug_id": 33505, "text": "Building mod_jk for Apache 2 on OS/400 (IBM HTTP Server powered by Apache)\nfails. There are three problems.\n\n1) jk_ajp12_worker.c: Cannot convert between 'char *' and 'const char *' in\najpv12_handle_request\n2) bldjk.qclsrc: STGMDL(*INHERIT) requires ACTGRP(*CALLER) in CRTSRVPGM call.\n3) bldjk.qclsrc: Unresolved symbols during CRTSRVPGM call\n(status_worker_factory, jk_shm_*)\n\nThese problems were experienced using CVS source checked out yesterday (2/9/05).", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 33505, "attachment_id": 14247, "id": 70805, "time": "2005-02-11T01:47:02Z", "creator": "cybermac912@yahoo.com", "creation_time": "2005-02-11T01:47:02Z", "is_private": false, "text": "Created attachment 14247\nChanges to header file & build CL for correct compilation\n\nThis will patch:\n- jk\\native\\common\\jk_service.h to eliminate the char * conversion error\n- jk\\native\\apache-2.0\\bldjk.qclsrc to eliminate CRTSRVPGM errors"}, {"count": 2, "attachment_id": null, "bug_id": 33505, "is_private": false, "id": 70820, "time": "2005-02-11T09:02:25Z", "creator": "mturk@apache.org", "creation_time": "2005-02-11T09:02:25Z", "tags": [], "text": "Hi,\n\nThere is a problem with your const -> const char patch.\nAll service_t mmembers that are now char* like query_string etc,\nwill be changed to const char*.\n\nSince apr13 worker resolves the issue of xlate by using message buffer,\nsomething similar must be made for ajp12 worker, and not tweeking constness.\nFurter reason is that AS400 implemetation for ajp12 uses inplace conversion\nof const char* strings like ap_get_server_name(), etc...\n\nI'll use 8k stack buffer for ajpv12_sendstring for AS400.\nWill you be able to test that?\n\nThe bldjk.qclsrc patch look fine\n"}, {"count": 3, "tags": [], "bug_id": 33505, "attachment_id": null, "id": 70825, "time": "2005-02-11T11:14:54Z", "creator": "hgomez@apache.org", "creation_time": "2005-02-11T11:14:54Z", "is_private": false, "text": "(In reply to comment #1)\n> Created an attachment (id=14247) [edit]\n> Changes to header file & build CL for correct compilation\n> \n> This will patch:\n> - jk\\native\\common\\jk_service.h to eliminate the char * conversion error\n> - jk\\native\\apache-2.0\\bldjk.qclsrc to eliminate CRTSRVPGM errors\n\nWhy did you add the ACTGRP(*CALLER) in the build file ? Are you using V5R3 ?"}, {"attachment_id": null, "tags": [], "bug_id": 33505, "text": "(In reply to comment #2)\n> Hi,\n> \n> There is a problem with your const -> const char patch.\n> All service_t mmembers that are now char* like query_string etc,\n> will be changed to const char*.\n> \n> Since apr13 worker resolves the issue of xlate by using message buffer,\n> something similar must be made for ajp12 worker, and not tweeking constness.\n> Furter reason is that AS400 implemetation for ajp12 uses inplace conversion\n> of const char* strings like ap_get_server_name(), etc...\n\nSorry. I'm not familiar with the code, and I've always had trouble with char *\nin C :) That was just the easiest way for me to get it to compile. If there's a\nbetter way...\n\n> \n> I'll use 8k stack buffer for ajpv12_sendstring for AS400.\n> Will you be able to test that?\n\nSure. You may need to give me a specific test case or two to make sure I test it\nright.\n\n> \n> The bldjk.qclsrc patch look fine\n\nThanks.", "count": 4, "id": 70847, "time": "2005-02-11T18:04:39Z", "creator": "cybermac912@yahoo.com", "creation_time": "2005-02-11T18:04:39Z", "is_private": false}, {"count": 5, "tags": [], "text": "(In reply to comment #3)\n> Why did you add the ACTGRP(*CALLER) in the build file ? Are you using V5R3 ?\n\nNo, V5R2. From the iSeries help for CRTSRVPGM/STGMDL:\n*INHERIT\n    The service program is created with inherit storage\n    model.  When activated, the service program adopts the\n    storage model of the activation group into which it is\n    activated.  An equivalent view is that it inherits the\n    storage model of its caller.  When the *INHERIT\n    storage model is selected, the *CALLER activation\n    group (ACTGRP parameter) must also be selected.", "is_private": false, "id": 70848, "creator": "cybermac912@yahoo.com", "time": "2005-02-11T18:13:04Z", "bug_id": 33505, "creation_time": "2005-02-11T18:13:04Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 33505, "text": "I have changed all char * to const char * with local xlate buf.\nCan you check if it's buildable an runnable?", "id": 70882, "time": "2005-02-12T12:38:16Z", "creator": "mturk@apache.org", "creation_time": "2005-02-12T12:38:16Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 33505, "text": "Commited the missing ACTGRP(*CALLER) for *INHERIT ", "id": 70924, "time": "2005-02-14T13:26:08Z", "creator": "hgomez@apache.org", "creation_time": "2005-02-14T13:26:08Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 33505, "attachment_id": null, "id": 70973, "time": "2005-02-15T00:11:43Z", "creator": "cybermac912@yahoo.com", "creation_time": "2005-02-15T00:11:43Z", "is_private": false, "text": "Still a couple of compilation problems:\n\nBLDJK.QCLSRC, 306 - Extra ')' (Param 'MODULE' closed too early)\nnative/common/jk_ajp12_worker.c, 321 - Undeclared identifier buflen\nnative/common/jk_ajp12_worker.c, 323 - Missing ;\n\nAfter I resolve these, compilation proceeds. The resulting service program seems\nto function correctly (using a very small AJP13 test).\n\nNew patch shortly."}, {"count": 9, "tags": [], "creator": "cybermac912@yahoo.com", "is_private": false, "text": "Created attachment 14284\nFixes CL & C compilation errors\n\nFixes CL compilation error in CRTSRVPGM command.\nFixes C compilation errors in jk_ajp12_worker.c.\n\nBased on current source tree as of 2/14/04 @ 15:15 (PST).", "id": 70974, "time": "2005-02-15T00:17:13Z", "bug_id": 33505, "creation_time": "2005-02-15T00:17:13Z", "attachment_id": 14284}, {"count": 10, "attachment_id": null, "bug_id": 33505, "text": "Commited the typo fixes. Thanks!", "id": 70986, "time": "2005-02-15T08:20:27Z", "creator": "mturk@apache.org", "creation_time": "2005-02-15T08:20:27Z", "tags": [], "is_private": false}, {"count": 11, "tags": [], "bug_id": 33505, "attachment_id": null, "is_private": false, "id": 71015, "time": "2005-02-15T17:56:06Z", "creator": "cybermac912@yahoo.com", "creation_time": "2005-02-15T17:56:06Z", "text": "Sorry, Mladen, but that semicolon is still missing in jk_ajp12_worker.c. I'm\nlooking at revision 1.22."}, {"count": 12, "tags": [], "text": "OK, fixed the missing semicolon.\n\nAlso, please do not reopen the case if still unbuildable.\nBugzilla is not ment to be used for development-in-progress.\nIt is used only for bugs in released versions.\nIf there are problems with current build from CVS, use dev-list instead.\n\nThanks,\nMladen.\n", "is_private": false, "id": 71065, "creator": "mturk@apache.org", "time": "2005-02-16T10:04:01Z", "bug_id": 33505, "creation_time": "2005-02-16T10:04:01Z", "attachment_id": null}]