[{"count": 0, "attachment_id": null, "bug_id": 39767, "text": "The created war does not contain all files that are in the specified fileset,\nincluding files in the \"root dir\" and sub dirs.\n\nInterestingly, the verbose output shows one of the missing files identified as\nneeded and added on a run that doesn't delete the war first:\n[war] [VERBOSE] perforcefaq.html added as perforcefaq.html is outdated.\n....\n[war] [VERBOSE] adding entry perforcefaq.html\n\nYet the resulting war does not have that file (and others).\n\nThe war is large, around 360M; not sure if there are size limitations with the war.\n\nThis is the snippet used to create the war:\n<war destfile=\"target/hm-ant-site.war\"\n  webxml=\"../../productname/main/web/WebContent/WEB-INF/web.xml\">\n  <fileset dir=\"target/docs\" />\n</war>", "id": 90024, "time": "2006-06-09T18:42:24Z", "creator": "jeffjensen@upstairstechnology.com", "creation_time": "2006-06-09T18:42:24Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 39767, "text": "This is pretty surprising. War is <jar>, and <jar> creates most JAR files in\nant-enabled projects. Someone should have noticed.\n\nHow did you test this? It wasnt with Winzip was it? \n\nWhat happens if you have a target like\n\n<target name=\"unzip\" depends=\"war\">\n  <mkdir dir=\"build/unzip\" />\n  <unzip src=\"target.war\"\n       dest=\"build/unzip\"/>\n</target>\n\nThis will expand the entire war into a directory, and ensure that you are\nworking with an unzip tool that we trust.", "id": 90033, "time": "2006-06-09T22:19:34Z", "creator": "stevel@apache.org", "creation_time": "2006-06-09T22:19:34Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "jeffjensen@upstairstechnology.com", "attachment_id": null, "id": 90036, "time": "2006-06-10T01:18:11Z", "bug_id": 39767, "creation_time": "2006-06-10T01:18:11Z", "is_private": false, "text": "(In reply to comment #1)\n> This is pretty surprising. War is <jar>, and <jar> creates most JAR files in\n> ant-enabled projects. Someone should have noticed.\n\nI was very surprised too.  It was working flawlessly for perhaps a year.  The\nmain thing that changed is big growth in file count.\n\nIn defense of \"noticed, I'm not sure how many people would have tested with a\n360M war or jar file!  :-)\n\n\n> How did you test this? It wasnt with Winzip was it?\n\nI first noticed it because of the missing files from the extracted war.  The\nprocess creates the war and then pushes the war to Tomcat's webapps dir and\nTomcat expands it.  Voila, our dev site.  Neatly done.\n\nBut earlier this week the site was foo'd.  Pages missing, display problems (e.g.\na CSS file and icons missing).  Easily noticed.\n\nI verified the files existed in the build area.  Then I verified the war, and\nthey were not there.\n\nSo to directly answer your question:\n - tested via Tomcat expansion\n - tested via PowerArchiver opening\n - tested via jar -xf xx.war\n\n\n> What happens if you have a target like\n> \n> <target name=\"unzip\" depends=\"war\">\n>   <mkdir dir=\"build/unzip\" />\n>   <unzip src=\"target.war\"\n>        dest=\"build/unzip\"/>\n> </target>\n> \n> This will expand the entire war into a directory, and ensure that you are\n> working with an unzip tool that we trust.\n\nI think the jar tool covers it, but I will gladly test this on Monday (the\nmachine is at my customer site) and report.\n\nAnything else to try, please just let me know!\n"}, {"count": 3, "attachment_id": null, "bug_id": 39767, "text": "ping, request for promised report", "id": 90667, "time": "2006-06-27T18:26:53Z", "creator": "mbenson@apache.org", "creation_time": "2006-06-27T18:26:53Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 39767, "attachment_id": null, "id": 90688, "time": "2006-06-27T21:18:43Z", "creator": "jeffjensen@upstairstechnology.com", "creation_time": "2006-06-27T21:18:43Z", "is_private": false, "text": "(thanks for the reminder :-)\n\nI created the war again (with the same snippet as listed in the description). \nFiles were missing in it as viewed by PowerArchiver.\n\nI extracted the war to a new location with the same Ant snippet as Steve\nrequested in comment 1.  Files were there in the new location.\n\nInteresting that the Tomcat extract of the hot-deployed war was missing files. \nPerhaps there is some very very long time delay on extracts of it.\nThanks for the help - I'm sure you will close this as Ant seems to perform fine.\n"}, {"count": 5, "tags": [], "creator": "mbenson@apache.org", "text": "(In reply to comment #4)\n> (thanks for the reminder :-)\n\nNo problem.  ;)\n\n> \n> I created the war again (with the same snippet as listed in the description). \n> Files were missing in it as viewed by PowerArchiver.\n> \n> I extracted the war to a new location with the same Ant snippet as Steve\n> requested in comment 1.  Files were there in the new location.\n> \n> Interesting that the Tomcat extract of the hot-deployed war was missing files. \n> Perhaps there is some very very long time delay on extracts of it.\n> Thanks for the help - I'm sure you will close this as Ant seems to perform fine.\n> \n\nI think you just said this does appear to be no fault of Ant's.  So, yes, we'll\nclose it.  If I misunderstood you in some way please reopen.\n", "id": 90700, "time": "2006-06-27T21:49:23Z", "bug_id": 39767, "creation_time": "2006-06-27T21:49:23Z", "is_private": false, "attachment_id": null}]