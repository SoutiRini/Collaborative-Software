[{"count": 0, "tags": [], "bug_id": 51358, "attachment_id": 27145, "text": "Created attachment 27145\nProposed patch\n\nHi,\n\nfollowing r51357, here are less trivial apr_table_(set|add|merge) --> apr_table_(set|add|merge)n conversion.\n\nThe goal here is the same, avoid memory allocation when it can be safely avoided.\n\n\nIt modifies the function calls when both the key and the value are constant strings or allocated from the *same* memory pool and *not* used for any purpose. \n\nThis is, IMO, always safe to do the transformation in this case.\n\nModified files are :\n   - modules/proxy/mod_proxy.c ('r->pool' and the pool referenced in 'r->headers_in' are the same)\n   - modules/aaa/mod_auth_form.c (idem)\n   - modules/ssl/ssl_engine_kernel.c (idem, even if more complex)\n\n   - modules/proxy/mod_proxy_ftp.c (the pool 'p' and the pool referenced in 'r->headers_out' are the same. See definition of 'p' at the beginning of the function)\n   - modules/dav/main/mod_dav.c (idem, even if a bit more complex)\n\n   - modules/mappers/mod_rewrite.c ('r->pool' and the pool referenced in 'r->notes' are the same)\n\n\nBest regards", "id": 147029, "time": "2011-06-11T05:43:07Z", "creator": "christophe.jaillet@wanadoo.fr", "creation_time": "2011-06-11T05:43:07Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 51358, "text": "Committed to trunk as r1135084. Thanks for the patch.", "id": 147054, "time": "2011-06-13T11:05:11Z", "creator": "sf@sfritsch.de", "creation_time": "2011-06-13T11:05:11Z", "is_private": false, "attachment_id": null}]