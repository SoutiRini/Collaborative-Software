[{"count": 0, "tags": [], "bug_id": 30216, "text": "resultproperty yields different values from machine to machine.\n\nTwo build.xml are needed to repro this bug:\n\nbuild.xml\n\n<project name=\"test\" default=\"build\">\n    <target name=\"build\">\n\t<exec dir=\".\" executable=\"cmd\" \n            failonerror=\"false\"\n            resultproperty=\"build.result\">\n\t\t<arg line=\"/c ant -f build2.xml\"/>\n\t</exec>\n\t<echo message=\"build.result=${build.result}\" />\n    </target>\n</project>\n\nbuild2.xml\n<project name=\"test2\" default=\"build\">\n    <target name=\"build\">\n\t<echo message=\"inside build2.xml\" />\n\t<fail message=\"fail on purpose\" />\n    </target>\n</project>\n\n\nafter run ant, on some machines, I see build.result=1\nbut on other machines(more than one), I see build.result=0", "id": 60881, "time": "2004-07-20T18:35:01Z", "creator": "j9988@yahoo.com", "creation_time": "2004-07-20T18:35:01Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "What OSes in particular for each result?", "id": 60882, "time": "2004-07-20T18:43:30Z", "bug_id": 30216, "creation_time": "2004-07-20T18:43:30Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 30216, "text": "for build.result=0, I see on on both WinXP and Win2k, on at least 3 different \nmachine, with ant 1.5.4 and 1.6.1\nMost of the time, I see build.result=1 on different machines.", "id": 60883, "time": "2004-07-20T18:55:29Z", "creator": "j9988@yahoo.com", "creation_time": "2004-07-20T18:55:29Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "what kind of different machines?", "id": 60884, "time": "2004-07-20T19:00:45Z", "bug_id": 30216, "creation_time": "2004-07-20T19:00:45Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 30216, "text": "This is a problem with cmd.exe - sometimes it returns error code, \nsometimes it does not. In order to make sure that the error code is returned, \nthe very last command should be the command that returns error code (and there \nshould be no setlocal/endlocal).\n\nPersonally I found that on XP there is a better chance to get a correct result code.\n", "id": 60885, "time": "2004-07-20T19:01:54Z", "creator": "alexeys@inventigo.com", "creation_time": "2004-07-20T19:01:54Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "text": "I think this is probably a wontfix, not until we abandon Win9x support.\n\n1. the python and perl entry points should work consistently.\n\n2. Have a look ant ant and subant to invoke stuff in sub dirs; they will fail if\nthe build fails, then the ant-contrib condition/try-catch tasks to recognise and\nprocess failures. ", "id": 60956, "time": "2004-07-22T11:24:07Z", "bug_id": 30216, "creation_time": "2004-07-22T11:24:07Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 30216, "attachment_id": null, "id": 66535, "time": "2004-11-05T15:56:49Z", "creator": "bodewig@apache.org", "creation_time": "2004-11-05T15:56:49Z", "is_private": false, "text": "More of CANTFIX if the target OS is Windows."}, {"count": 7, "tags": [], "text": "Footnote:  I use Cygwin on Windows and often rely on a failed build returning > \n0 to the shell.  So maybe \"ant\" the script with Cygwin is more reliable \nthan \"ant.bat\" with the DOS shell...", "attachment_id": null, "id": 66539, "creator": "mbenson@apache.org", "time": "2004-11-05T16:09:12Z", "bug_id": 30216, "creation_time": "2004-11-05T16:09:12Z", "is_private": false}]