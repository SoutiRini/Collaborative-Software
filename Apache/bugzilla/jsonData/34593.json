[{"count": 0, "tags": [], "bug_id": 34593, "attachment_id": null, "id": 74032, "time": "2005-04-23T18:38:29Z", "creator": "scott@javadude.com", "creation_time": "2005-04-23T18:38:29Z", "is_private": false, "text": "Hi!\n\nI've done some work on ANTLR (soon to be released by Terence Parr) which \nrequires two new command-line-options. I've updated the ANTLR ANT task to \ninclude these and attached it.\n\nCan you include this in the dist?\n\nThanks!\n- Scott"}, {"count": 1, "tags": [], "bug_id": 34593, "text": "Created attachment 14809\nANTLR Task Documentation Update", "id": 74033, "time": "2005-04-23T18:39:35Z", "creator": "scott@javadude.com", "creation_time": "2005-04-23T18:39:35Z", "is_private": false, "attachment_id": 14809}, {"count": 2, "tags": [], "bug_id": 34593, "attachment_id": 14810, "text": "Created attachment 14810\nANTLR Task Update", "id": 74034, "time": "2005-04-23T18:40:14Z", "creator": "scott@javadude.com", "creation_time": "2005-04-23T18:40:14Z", "is_private": false}, {"count": 3, "text": "Please don't include the whole files if those are updates, make a 'cvs diff -\nu' from HEAD if you're familiar with cvs. It makes reviewing and patch easier \nto process at first glance.", "bug_id": 34593, "attachment_id": null, "id": 74035, "time": "2005-04-23T18:43:04Z", "creator": "sbailliez@apache.org", "creation_time": "2005-04-23T18:43:04Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 34593, "attachment_id": null, "text": "Sorry -- I'm doing so now.\n\nLooks like it changed on the server as well. I'm working in those changes to \nwhat I have so the patch will be small.", "id": 74036, "time": "2005-04-23T20:23:24Z", "creator": "scott@javadude.com", "creation_time": "2005-04-23T20:23:24Z", "is_private": false}, {"count": 5, "text": "Created attachment 14811\nANTLR Task Update (patch)", "bug_id": 34593, "attachment_id": 14811, "id": 74037, "time": "2005-04-23T20:29:25Z", "creator": "scott@javadude.com", "creation_time": "2005-04-23T20:29:25Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "creator": "scott@javadude.com", "attachment_id": 14812, "id": 74038, "time": "2005-04-23T20:33:23Z", "bug_id": 34593, "creation_time": "2005-04-23T20:33:23Z", "is_private": false, "text": "Created attachment 14812\nANTLR Task Documentation Update (patch)"}, {"count": 7, "tags": [], "bug_id": 34593, "text": "I added the patch versions of the task and documentation. Please let me kwow \nif this the right format. I generated a unified diff from eclipse (which I \nthink is the cvs diff -u)\n\nLMK if you need anything else!", "id": 74039, "time": "2005-04-23T20:34:36Z", "creator": "scott@javadude.com", "creation_time": "2005-04-23T20:34:36Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 34593, "text": "Sorry, but at first glance I'm not accepting this patch as you include \nreference to extra-work out of the ANTLR options scope, for instance, your \nplugin implementation.\n\nThe task should be enhanced to support ANTLR options, nothing more.\nA more generic way would be to provide a 'plugin' option, so that anyone could \nactually specify his plugin, including yours.\n\n(And we would be glad if Terence could ship a antlr task in his distribution :)", "id": 74040, "time": "2005-04-23T20:57:33Z", "creator": "sbailliez@apache.org", "creation_time": "2005-04-23T20:57:33Z", "is_private": false, "attachment_id": null}, {"count": 9, "text": "(In reply to comment #8)\nI added a -plugin option to ANTLR itself (for 2.7.6 which Ter will be \nreleasing soon), but it's only used for the XML plugin I wrote. The -\nxmlSupport option added to the antlr ant task translates into a -plugin call \nfor the xml plugin.\n\nBehind the scenes, the -plugin is very specific to the xml support (other \nplugins would require big changes in ANTLR to work), and Ter just didn't want \nto have to support the XML code himself. He's currently working on ANTLR 3.0 \n(which will require a new ant task) and doesn't have much time for ANTLR 2.x \nimprovements.\n\nThe -debug option has always been there. I just added a link to my web site in \nthe doc page (which is where ParseView lives) so people will know where to go \nto get it.\n\nI could change the -xmlSupport option to -plugin, but because the xml support \nis the only plugin (and quite likely will forever be [for ANTLR 2.x]), it just \nmakes the task harder to use.\n\nSo I'd like to ask to keep it this way. If you'd like me to remove the links \nin the doc page, I could.", "bug_id": 34593, "attachment_id": null, "id": 74041, "time": "2005-04-23T21:11:43Z", "creator": "scott@javadude.com", "creation_time": "2005-04-23T21:11:43Z", "tags": [], "is_private": false}, {"count": 10, "attachment_id": null, "bug_id": 34593, "text": "(In reply to comment #8)\n> (And we would be glad if Terence could ship a antlr task in his \ndistribution :)\n\nAre you suggesting that we deprecate the antlr ant task that comes with ant, \nand just deliver it with ANTLR? I could probably talk him into it (although he \nis *not* a fan of ant... he still uses, <cough> make <cough>.) I added an ant \nbuild.xml into the antlr dist for 2.7.6 which he's accepting (after much \ndebate...).\n\nPerhaps we could have the \"official\" antlr ant task be a shell that delegates \nto the antlr-dist ant task if found in the classpath?", "id": 74042, "time": "2005-04-23T21:16:45Z", "creator": "scott@javadude.com", "creation_time": "2005-04-23T21:16:45Z", "tags": [], "is_private": false}, {"count": 11, "tags": [], "creator": "sbailliez@apache.org", "attachment_id": null, "id": 74044, "time": "2005-04-23T22:02:00Z", "bug_id": 34593, "creation_time": "2005-04-23T22:02:00Z", "is_private": false, "text": "(In reply to comment #9)\n\nThe plugin might be the only one...or maybe not.\nPackage name may change or the plugin might simply not be available anymore.\nSo who will be responsible for that ? Ant developpers.\n\nSo -plugin is better than -xmlparser, if you could not convince Terence to \ninclude support for it, there's no way Ant can serve as a mediator and \nbasically get twice the risks of change.\n\nBasically we don't want Ant to be some kind of 'dumping ground' for tasks, \nwe've done mistakes in the past and maintaining third-party tasks is a lot of \nwork as ant committers don't necessarily use them, or the used API or options \nmight break at just every release making it a nightmare to provide backward \ncompatibility to ant users. From the top of my head I can give you the jspc \nexample.\n\nSo yes, considering that Ant is the de-facto tool in the Java community it is \nof course better if each package can provide its own Ant task. This way at \nleast everybody's happy and things get more stable and up to date in a timely \nfashion. "}, {"count": 12, "text": "(In reply to comment #11)\nOk. How about this approach:\n\n1) we mark the antlr optional ant task as deprecated\n2) we change the docs for the ant task to state that it's been moved to \nhttp://www.antlr.org as a separate download (or part of the dist - depends on \nwhat Ter says)\n\nThoughts?", "bug_id": 34593, "attachment_id": null, "id": 74045, "time": "2005-04-23T22:16:33Z", "creator": "scott@javadude.com", "creation_time": "2005-04-23T22:16:33Z", "tags": [], "is_private": false}, {"count": 13, "tags": [], "bug_id": 34593, "attachment_id": null, "text": "I have also talked with Terence about Ant.  And in fairness, although I don't\nknow what he uses for most things, for ANTLR he doesn't use make now; instead he\nuses a home-brewed Java build process whose code basically does the things that\nAnt does.  I also don't have a lot of faith that he would want to include the\nAnt task in his distro due to his distaste for \"XML for human consumption.\"  If\nwe already have the task it seems that (like it or not) we already have some\nresponsibility to see that it works (I realize this is a RFE and so beyond our\nbasic responsibility).  I haven't studied the plugin option; when I do I may\nhave more to say.", "id": 74088, "time": "2005-04-25T16:36:34Z", "creator": "mbenson@apache.org", "creation_time": "2005-04-25T16:36:34Z", "is_private": false}, {"count": 14, "tags": [], "bug_id": 34593, "attachment_id": null, "id": 74089, "time": "2005-04-25T16:41:37Z", "creator": "mbenson@apache.org", "creation_time": "2005-04-25T16:41:37Z", "is_private": false, "text": "I agree; the plugin should be handled by a plugin option.  If, Scott, you feel\nthat makes the ANTLR task harder to use, my suggestion would be to refactor the\nANTLR task in such a way that backward-compatibility is retained, but you have\nthe flexibility you need to add your plugin arguments in a subclass task.  You\ncould then distribute this task yourself."}, {"count": 15, "tags": [], "creator": "scott@javadude.com", "text": "(In reply to comment #13)\n> I have also talked with Terence about Ant.  And in fairness, although I don't\n> know what he uses for most things, for ANTLR he doesn't use make now; \ninstead he\n> uses a home-brewed Java build process whose code basically does the things \nthat\n> Ant does.  \n\nHe ships both makefiles and his custom build process (that noone else uses).\n\nI chatted with him last night and he's willing to ship the ant antlr task with \nthe antlr dist.\n\nHere's my suggestion:\n\n1) We add a \"other\" command-line options attribute. This will protect future \ncompatibility, though a bit clumsy.\n\n2) We mark the task as deprecated\n\n3) We point to the antlr dist for an ant task that's closely tied to the \nlatest antlr release.\n\nThoughts?", "id": 74098, "time": "2005-04-26T00:55:51Z", "bug_id": 34593, "creation_time": "2005-04-26T00:55:51Z", "is_private": false, "attachment_id": null}, {"count": 16, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 74124, "time": "2005-04-26T12:15:55Z", "bug_id": 34593, "creation_time": "2005-04-26T12:15:55Z", "is_private": false, "text": "Maybe the task should simply accept nested <arg> elements to be as future-proof\nas possible?\n\nAs for moving the task to ANTLR and deprecating Ant's, yes, I think it would be \na good idea."}, {"count": 17, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "id": 74137, "time": "2005-04-26T16:18:13Z", "bug_id": 34593, "creation_time": "2005-04-26T16:18:13Z", "is_private": false, "text": "Agreed with Stefan; <arg> elements are the most Ant-esque approach for Scott's\n1).  As for supporting <arg> elements, it might be easiest to insert the Java\ntask into ANTLR's class inheritance hierarchy to get automatic support for them.\n This way your main job would be removing the CommandlineJava instance and\nsetting its arguments as attributes are encountered, rather than after the\ninvocation of execute(), this last being something you would probably do anyway\nif you implemented arbitrary <arg>s."}, {"count": 18, "tags": [], "bug_id": 34593, "text": "(In reply to comment #17)\nAwesome ideas gang. I'll see what I can whip up this weekend.\n\nNote that it'll be a total change to the structure of the task, so I don't \nthink a patch would be terribly helpful.\n\nI'll set it up to include the existing options, plus the smap option. I won't \nadd the plugin or xml options.\n\nSound good? ", "id": 74159, "time": "2005-04-27T02:36:11Z", "creator": "scott@javadude.com", "creation_time": "2005-04-27T02:36:11Z", "is_private": false, "attachment_id": null}, {"count": 19, "tags": [], "bug_id": 34593, "attachment_id": null, "text": "I've removed the XML support from ANTLR and made it into a separate project. \nThe current ANT task does not need to be changed.\n\nI will work with Terence to provide a new ANT Task for ANTLR 3.0 as part of \nthe ANTLR distribution.", "id": 76364, "time": "2005-06-14T03:25:09Z", "creator": "scott@javadude.com", "creation_time": "2005-06-14T03:25:09Z", "is_private": false}]