[{"count": 0, "tags": [], "creator": "robert@manamind.com", "attachment_id": null, "is_private": false, "id": 113688, "time": "2008-02-13T03:36:02Z", "bug_id": 44408, "creation_time": "2008-02-13T03:36:02Z", "text": "Tomcat version 6.0.16 trunk (and earlier)\n\nPageContextImpl.java has:\npublic static Object proprietaryEvaluate()\nthat does a:\nfinal ExpressionFactory exprFactory = JspFactory.getDefaultFactory().get\nJspApplicationContext(pageContext.getServletContext()).getExpressionFactory();\n\nOur benchmarking of pages using large amounts of EL-expression shows this turns\ninto a bottleneck due to the fact that JspFactory.getDefaultFactory() is\nsynchronized.\n\nThe bug is very similar to bug #41558\n\nI have a patch that fixes the issue, coming up..."}, {"count": 1, "tags": [], "creator": "robert@manamind.com", "attachment_id": 21515, "is_private": false, "id": 113689, "time": "2008-02-13T03:39:09Z", "bug_id": 44408, "creation_time": "2008-02-13T03:39:09Z", "text": "Created attachment 21515\nPatch to avoid calling synchronized method every EL evaluation\n\nThe attached patch fixes the performance problem by calling the synchronized\nmethod only once."}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 115509, "time": "2008-04-10T10:30:09Z", "bug_id": 44408, "creation_time": "2008-04-10T10:30:09Z", "text": "This has been fixed in trunk and proposed for 6.0.x."}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 115651, "time": "2008-04-16T14:46:44Z", "bug_id": 44408, "creation_time": "2008-04-16T14:46:44Z", "text": "This has been applied to svn for 6.0.x and will be in 6.0.17 onwards."}, {"count": 4, "tags": [], "creator": "xiaoming@cs.wisc.edu", "attachment_id": null, "is_private": false, "id": 143963, "time": "2011-02-03T14:48:07Z", "bug_id": 44408, "creation_time": "2011-02-03T14:48:07Z", "text": "Hi Robert,\n\nI find that this similar bug can be found in other Apache projects:\n\n./openwebbeans-1.0.0/webbeans-web/src/main/java/org/apache/webbeans/web/lifecycle/WebContainerLifecycle.java line:86\n./tiles-2.2.2/src/tiles-el/src/main/java/org/apache/tiles/el/JspExpressionFactoryFactory.java line:61\n\n\n\n\n\n\n(In reply to comment #0)\n> Tomcat version 6.0.16 trunk (and earlier)\n> \n> PageContextImpl.java has:\n> public static Object proprietaryEvaluate()\n> that does a:\n> final ExpressionFactory exprFactory = JspFactory.getDefaultFactory().get\n> JspApplicationContext(pageContext.getServletContext()).getExpressionFactory();\n> \n> Our benchmarking of pages using large amounts of EL-expression shows this turns\n> into a bottleneck due to the fact that JspFactory.getDefaultFactory() is\n> synchronized.\n> \n> The bug is very similar to bug #41558\n> \n> I have a patch that fixes the issue, coming up..."}]