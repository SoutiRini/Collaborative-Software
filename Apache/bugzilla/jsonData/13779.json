[{"count": 0, "tags": [], "bug_id": 13779, "attachment_id": null, "id": 24891, "time": "2002-10-19T08:18:36Z", "creator": "LukasRazik@web.de", "creation_time": "2002-10-19T08:18:36Z", "is_private": false, "text": "If I mount a NetServ fileserver volume to the apache data-dir for example with:\n\nncpmount -U USERNAME -P PASSWORD -V VOLUME -S SERVER /apache-data-dir/htdocs/volume\n\nthen I it's possible to list the files of this volume (with all subdirectories)\nwith the apache.But it's not possible to download the files from this volume.\n\nYou only get 0 byte files and there's no entry in the error log for this action."}, {"count": 1, "tags": [], "bug_id": 13779, "attachment_id": null, "id": 24894, "time": "2002-10-19T11:44:20Z", "creator": "LukasRazik@web.de", "creation_time": "2002-10-19T11:44:20Z", "is_private": false, "text": "In apache-1.3.6 there's no problem to download files from a mounted NetWare \nfileserver volume."}, {"count": 2, "tags": [], "bug_id": 13779, "attachment_id": null, "id": 24896, "time": "2002-10-19T12:30:31Z", "creator": "trawick@apache.org", "creation_time": "2002-10-19T12:30:31Z", "is_private": false, "text": "sendfile() is an obvious suspect.  Have you looked at an strace of Apache\nhandling a request for one of those files to see what happens?\n\nHere are a couple of ways to disable sendfile on those files to see if it starts\nworking:\n\na) make distclean then reconfigure with the additional --disable-sendfile  \nparameter\n\nb) run current CVS from Apache and APR since an EnableSendfile directive was\nadded after 2.0.43 to allow the user to selectively disable sendfile for some\ndirectories or locations\n\nc) set up a filter (e.g., INCLUDES) on those files so that sendfile can't be\nused for that reason\n"}, {"count": 3, "tags": [], "text": "I don't know what you mean with: \"Have you looked at an strace of Apache\nhandling a request for one of those files to see what happens?\"\nCould you explain it, please?\n\nI've recompiled it with the --disable-sendfile and there's still the same \nproblem.\n\nThis is the dialog between the client and the server:\n--- BEGIN ---\nSat Oct 19 16:54:03 2002 GET /volume/programm.exe HTTP/1.1\nSat Oct 19 16:54:03 2002 Host: my-domain.org\nSat Oct 19 16:54:03 2002 Accept: */*\nSat Oct 19 16:54:03 2002 Referer: http://my-domain.org/volume\nSat Oct 19 16:54:03 2002 User-Agent: Mozilla/4.0 (compatible; MSIE 5.00; \nWindows 98)\nSat Oct 19 16:54:03 2002 Pragma: no-cache\nSat Oct 19 16:54:03 2002 Cache-Control: no-cache\nSat Oct 19 16:54:03 2002 Connection: close\nSat Oct 19 16:54:03 2002 HTTP/1.1 200 OK\nSat Oct 19 16:54:03 2002 Date: Sat, 19 Oct 2002 14:53:59 GMT\nSat Oct 19 16:54:03 2002 Server: Apache/2.0.43 (Unix) PHP/4.2.3\nSat Oct 19 16:54:03 2002 Last-Modified: Tue, 16 Nov 1999 23:00:00 GMT\nSat Oct 19 16:54:03 2002 ETag: \"373b-342048-25c85c00\"\nSat Oct 19 16:54:03 2002 Accept-Ranges: bytes\nSat Oct 19 16:54:03 2002 Content-Length: 3416136\nSat Oct 19 16:54:03 2002 Connection: close\nSat Oct 19 16:54:03 2002 Content-Type: application/octet-stream\nSat Oct 19 16:54:03 2002 \u00dcbertragung beginnt! (starting download)\nSat Oct 19 16:54:03 2002 Fehler aufgetreten! (ERROR)\n--- END ---\n\nAnd that's the entry in the access log of apache:\n217.84.134.XXX - - [19/Oct/2002:16:54:03 +0200] \"GET /volume/programm.exe \nHTTP/1.1\" 200 3416136\n", "attachment_id": null, "bug_id": 13779, "id": 24898, "time": "2002-10-19T15:06:19Z", "creator": "LukasRazik@web.de", "creation_time": "2002-10-19T15:06:19Z", "is_private": false}, {"count": 4, "tags": [], "text": "Thnx Jeff for your help!\n\nI've tried to recompile it with '--without-sendfile' and now it works!\n\nSorry for this bug report!\n", "is_private": false, "id": 24900, "creator": "LukasRazik@web.de", "time": "2002-10-19T17:28:53Z", "bug_id": 13779, "creation_time": "2002-10-19T17:28:53Z", "attachment_id": null}]