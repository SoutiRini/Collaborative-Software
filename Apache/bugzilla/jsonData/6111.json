[{"count": 0, "tags": [], "creator": "jhunter@apache.org", "attachment_id": null, "is_private": false, "id": 10038, "time": "2002-01-29T19:43:14Z", "bug_id": 6111, "creation_time": "2002-01-29T19:43:14Z", "text": "It seems with Xerces 1.3.x and 1.4.x that if you turn entity expansion off \n(http://xml.org/sax/features/external-general-entities), there's some odd \nbehavior with entities in attribute values.\n\nPer my reading of SAX, entities in attribute values should still be silently \nexpanded, and in fact Xerces does expand them.  It just doesn't do so \nsilently.  Instead Xerces generates startEntity/endEntity events for the \nentities that were expanded in the attribute values.  The events occur before \nthe startElement of the element containing the attribute.  You don't get the \nentity events if entity expansion is on.\n\nCrimson behaves as expected and when silently expanding entities in attribute \nvalues it truly does it silently.\n\nThis is affecting JDOM where using SAXBuilder to build from:\n\n<?xml version=\"1.0\" ?>\n<!DOCTYPE internalentities [\n        <!ELEMENT internalentites (#PCDATA)>\n        <!ENTITY simple 'simple entity' >\n]>\n<internalentities>datadatadata\n        <subelement test2=\"&simple;\" />\n</internalentities>\n\nWorks perfectly in Crimson but with Xerces results in:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE internalentities [\n  <!ELEMENT internalentites (#PCDATA)>\n  <!ENTITY simple \"simple entity\">\n]>\n<internalentities>datadatadata\n        &simple;<subelement test2=\"simple entity\" />\n</internalentities>\n\nBecause of the spurious startEntity/endEntity callbacks.\n\n-jh-"}]