[{"count": 0, "tags": [], "text": "To build lenya with jcr I activated jcr block\nin cocoon_2_1_x/blocks.properties using include.block.jcr=true\nand Added modules-optional (to add jcrsource) in modules.root.dirs  in\nbuild.properties using\nmodules.root.dirs=src/modules:src/modules-core:src/pubs/default/modules:src/modules-optional\n\nNow with patch for Bug 40433, the build works fine but when I try to open\ndefault lenya page http://localhost:8888/index.html\n\nMessage:\nC:\\marquis1\\Lenya1.4_3108\\lenya-1.4.x\\build\\lenya\\webapp\\samples\\blocks\\jcr\\repotest\\repository.xml\n(The system cannot find the path specified)\n\nDescription: org.apache.avalon.framework.configuration.ConfigurationException:\nCannot access configuration information at\nfile:/C:/marquis1/Lenya1.4_3108/lenya-1.4.x/build/lenya/webapp/WEB-INF/cocoon.xconf:1784:106\n\nSender: org.apache.cocoon.servlet.CocoonServlet\n\nSource: Cocoon Servlet\n\ncause\n\njava.io.FileNotFoundException:\nC:\\marquis1\\Lenya1.4_3108\\lenya-1.4.x\\build\\lenya\\webapp\\samples\\blocks\\jcr\\repotest\\repository.xml\n(The system cannot find the path specified)\n\nrequest-uri\n\n/index.html\n\nfull exception chain stacktrace\n\norg.apache.avalon.framework.configuration.ConfigurationException: Cannot access\nconfiguration information at\nfile:/C:/marquis1/Lenya1.4_3108/lenya-1.4.x/build/lenya/webapp/WEB-INF/cocoon.xconf:1784:106\n\tat\norg.apache.cocoon.jcr.JackrabbitRepository.configure(JackrabbitRepository.java:98)\n.....................\nCaused by: org.apache.excalibur.source.SourceNotFoundException:\nfile:/C:/marquis1/Lenya1.4_3108/lenya-1.4.x/build/lenya/webapp/samples/blocks/jcr/repotest/repository.xml\ndoesn't exist.\n\tat org.apache.excalibur.source.impl.FileSource.getInputStream(FileSource.java:150)\n\tat\norg.apache.cocoon.components.source.SourceUtil.getInputSource(SourceUtil.java:522)\n\t... 29 more\nCaused by: java.io.FileNotFoundException:\nC:\\marquis1\\Lenya1.4_3108\\lenya-1.4.x\\build\\lenya\\webapp\\samples\\blocks\\jcr\\repotest\\repository.xml\n(The system cannot find the path specified)\n\tat java.io.FileInputStream.open(Native Method)\n\tat java.io.FileInputStream.<init>(FileInputStream.java:106)\n\tat org.apache.excalibur.source.impl.FileSource.getInputStream(FileSource.java:146)\n\t... 30 more\n\n<b>The problem is occuring because, lenya build adds following component in\nwebapp\\WEB-INF\\cocoon.xconf file but doesn't supply the sample repository.\n  <component class=\"org.apache.cocoon.jcr.JackrabbitRepository\" logger=\"jcr\"\nrole=\"javax.jcr.Repository\">\n     <credentials login=\"anonymous\" password=\"\"/>\n\n     <jaas src=\"context://samples/blocks/jcr/repotest/jaas.config\"/>\n\n     <home src=\"context://samples/blocks/jcr/repotest\"/>\n     <!--\n     <home src=\"file:/home/USER/repotest\"/>\n     -->\n\n     <configuration src=\"context://samples/blocks/jcr/repotest/repository.xml\"/>\n     <!--\n     <configuration src=\"file:/home/USER/repository.xml\"/>\n     -->\n  </component>\n\n</b>\n\nSolution could be either we remove the above code block from cocoon.xconf\nor\ncopy lenya-1.4.x\\externals\\cocoon_2_1_x\\src\\blocks\\jcr\\samples\\repotest to\nbuild\\lenya\\webapp\\samples\\blocks\\jcr\\repotest", "is_private": false, "bug_id": 40436, "id": 93156, "time": "2006-09-07T14:17:02Z", "creator": "midha.rakesh@gmail.com", "creation_time": "2006-09-07T14:17:02Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 40436, "attachment_id": null, "text": "\nI tried to check this and I feel this is happening because of Revision 381340 on\nlenya/trunk/src/targets/test-build.xml. \nWhich says \"\nSet patch.webapp property to 'false' before starting tests. This way, the\nproperty is handled correctly even if the webapp and test targets are executed\nsubsequently in the same process.\"\n\nBecause patch.webapp is set false, cocoon.xconf has \n  <component class=\"org.apache.cocoon.jcr.JackrabbitRepository\" logger=\"jcr\"\nrole=\"javax.jcr.Repository\">\n     <credentials login=\"anonymous\" password=\"\"/>\n\n     <jaas src=\"context://samples/blocks/jcr/repotest/jaas.config\"/>\n\n     <home src=\"context://samples/blocks/jcr/repotest\"/>\n     <!--\n     <home src=\"file:/home/USER/repotest\"/>\n     -->\n\n     <configuration src=\"context://samples/blocks/jcr/repotest/repository.xml\"/>\n     <!--\n     <configuration src=\"file:/home/USER/repository.xml\"/>\n     -->\n  </component>\n\n\ninstead of \n    <component class=\"org.apache.lenya.cms.jcr.LenyaRepository\" logger=\"jcr\"\nrole=\"javax.jcr.Repository\">\n      <credentials login=\"anonymous\" password=\"\"/>\n      <jaas src=\"context://jcr-repository/jaas.config\"/>\n      <home src=\"context://jcr-repository/repository\"/>\n      <configuration src=\"context://jcr-repository/repository.xml\"/>\n      \n      <namespace prefix=\"dc\" uri=\"http://purl.org/dc/elements/1.1/\"/>\n      <namespace prefix=\"dcterms\" uri=\"http://purl.org/dc/terms/\"/>\n      <namespace prefix=\"lenya\"\nuri=\"http://apache.org/cocoon/lenya/page-envelope/1.0\"/>\n    </component>\n\nWhich causes requirement for samples repository.\nEither in build process we should copy this repository.\n\nor \n\nse should set  <property name=\"patch.webapp\" value=\"true\"/> by default in\ntest--build.xml\n\nWhat are your views on this? \n\nAlso have a look at Bug 40437 which is happening for the same reason.", "id": 93186, "time": "2006-09-08T07:28:14Z", "creator": "midha.rakesh@gmail.com", "creation_time": "2006-09-08T07:28:14Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 40436, "attachment_id": null, "text": "JCR integration is a goal for the next version of Lenya. Modification of Lenya 2.x to have proper support for JCR will not happen at this time. Thank you for your submission.", "id": 138321, "time": "2010-07-10T05:25:01Z", "creator": "rfrovarp@apache.org", "creation_time": "2010-07-10T05:25:01Z", "is_private": false}]