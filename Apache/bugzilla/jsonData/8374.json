[{"count": 0, "tags": [], "bug_id": 8374, "text": "Help! I'm not sure if this problem is a bug.... or something I am doing\nincorrectly... I did submit the problem to the apache user group and have had \nno luck.\n\nI am trying to build Apache 2.0.35 on a Solaris 7 system.\n\nBackground.......\n\ngcc (3.0.3), gcc libraries, and libtools are installed in /usr/local\ngawk and other utilities are in /opt/tools and /usr/tools\nISC bind 8.2.3 installed in /usr/local\nThe apache src is in /export2/ws/apache/httpd-2.0.35\n\n# uname -a\nSunOS my-system 5.7 Generic_106541-20 sun4m sparc SUNW,SPARCstation-5\n# \n\n# \n# echo $PATH\n/usr/local/bin:/usr/local/sbin:/usr/tools/bin:/usr/tools/sbin:/opt/tools/bin\n:/opt/tools/sbin:/usr/dt/bin:/usr/ccs/bin:/usr/openwin/bin:/usr/bin:/usr/ucb\n:/usr/sbin:/usr/local/include:/usr/include:/usr/local/lib:/usr/lib\n# echo $LD_LIBRARY_PATH\n/usr/dt/lib:/usr/openwin/lib:/usr/lib:/usr/include:/usr/local/lib:/usr/local\n/include:/usr/tools/lib:/usr/tools/include\n# \n\nI ran:\n# ./configure\nthen...\n# make\n.\n.\n.\n\nAnd get the following message:\n\n/bin/sh /export2/ws/apache/httpd-2.0.35/srclib/apr/libtool --silent\n--mode=link \ngcc  -g -O2 -pthreads    -DSOLARIS2=7 -D_POSIX_PTHREAD_SEMANTICS\n-D_REENTRANT \n-DAP_HAVE_DESIGNATED_INITIALIZER   -I.\n-I/export2/ws/apache/httpd-2.0.35/os/unix \n-I/export2/ws/apache/httpd-2.0.35/server/mpm/prefork \n-I/export2/ws/apache/httpd-2.0.35/modules/http \n-I/export2/ws/apache/httpd-2.0.35/modules/proxy \n-I/export2/ws/apache/httpd-2.0.35/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/modules/dav/main \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/xml/expat/lib\n-export-dynamic  \n  -o htpasswd  htpasswd.lo   \n/export2/ws/apache/httpd-2.0.35/srclib/apr-util/libaprutil.la \n/export2/ws/apache/httpd-2.0.35/srclib/apr/libapr.la -lrt -lm -lsocket -lnsl\n\n-lresolv -ldl \n/export2/ws/apache/httpd-2.0.35/srclib/apr-util/xml/expat/lib/libexpat.la\n/export2/ws/apache/httpd-2.0.35/srclib/apr/.libs/libapr.so: undefined\nreference \nto `__inet_addr'\ncollect2: ld returned 1 exit status\nmake[2]: *** [htpasswd] Error 1\nmake[2]: Leaving directory `/export2/ws/apache/httpd-2.0.35/support'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/export2/ws/apache/httpd-2.0.35/support'\nmake: *** [all-recursive] Error 1\n# \n\n\nI checked the config.log file and found errors.\n\n1. It can not find bindprocessor()\n2. It can not find timegm()\n\nWhat additional packages are required to build apache 2.0.35 on Solaris 7?\n\nconfigure:3273: checking for getgrnam\nconfigure:3301: gcc -o conftest -g -O2 -pthreads -DSOLARIS2=7 \n-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT  conftest.c -lrt -lm -lsocket -lnsl \n-lresolv  -ldl 1>&5\nconfigure:3273: checking for initgroups\nconfigure:3301: gcc -o conftest -g -O2 -pthreads -DSOLARIS2=7 \n-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT  conftest.c -lrt -lm -lsocket -lnsl \n-lresolv  -ldl 1>&5\nconfigure:3273: checking for bindprocessor\nconfigure:3301: gcc -o conftest -g -O2 -pthreads -DSOLARIS2=7 \n-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT  conftest.c -lrt -lm -lsocket -lnsl \n-lresolv  -ldl 1>&5\n/var/tmp/ccwxHjih.o: In function `main':\n/export2/ws/apache/httpd-2.0.35/configure:3295: undefined reference to \n`bindprocessor'\ncollect2: ld returned 1 exit status\nconfigure: failed program was:\n#line 3278 \"configure\"\n#include \"confdefs.h\"\n/* System header to define __stub macros and hopefully few prototypes,\n    which can conflict with char bindprocessor(); below.  */\n#include <assert.h>\n/* Override any gcc2 internal prototype to avoid an error.  */\n/* We use char because int might match the return type of a gcc2\n    builtin and then its argument prototype would still apply.  */\nchar bindprocessor();\n\nint main() {\n\n/* The GNU C library defines this for functions which it implements\n    to always fail with ENOSYS.  Some functions are actually named\n    something starting with __ and the normal name is an alias.  */\n#if defined (__stub_bindprocessor) || defined (__stub___bindprocessor)\nchoke me\n#else\nbindprocessor();\n#endif\n\n; return 0; }\nconfigure:3273: checking for timegm\nconfigure:3301: gcc -o conftest -g -O2 -pthreads -DSOLARIS2=7 \n-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT  conftest.c -lrt -lm -lsocket -lnsl \n-lresolv  -ldl 1>&5\n/var/tmp/ccmtrGkJ.o: In function `main':\n/export2/ws/apache/httpd-2.0.35/configure:3295: undefined reference to\n`timegm'\ncollect2: ld returned 1 exit status\nconfigure: failed program was:\n#line 3278 \"configure\"\n#include \"confdefs.h\"\n/* System header to define __stub macros and hopefully few prototypes,\n    which can conflict with char timegm(); below.  */\n#include <assert.h>\n/* Override any gcc2 internal prototype to avoid an error.  */\n/* We use char because int might match the return type of a gcc2\n    builtin and then its argument prototype would still apply.  */\nchar timegm();\n\nint main() {\n\n/* The GNU C library defines this for functions which it implements\n    to always fail with ENOSYS.  Some functions are actually named\n    something starting with __ and the normal name is an alias.  */\n#if defined (__stub_timegm) || defined (__stub___timegm)\nchoke me\n#else\ntimegm();\n#endif\n\n; return 0; }\n\n\nThanks.\n\n-Venessa", "id": 14344, "attachment_id": null, "creator": "venessa.mondi@tycoelectronics.com", "creation_time": "2002-04-22T18:18:06Z", "time": "2002-04-22T18:18:06Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 8374, "text": "First take /usr/ucb out of your path, it is evil and will cause problems.\n(I believe it only exists for legacy support.)\n\nNext remove any duplicate entries from your PATH. It is probably good to have\n/usr/ccs/bin after entries like /usr/local/bin.\n\nNext completely remove LD_LIBRARY_PATH, it is totally unnecessary for\nbuilding Apache.\n\nNext, don't run any of this as root, wait until you have to install\nsomething.\n\nIf you are still having problems at this point, I suggest you make sure\nyour machine is upgraded to the latest patch cluster from Sun. If you\nare still having problems at this point, please come back and reopen\nthis bug report.\n\nThank you for using Apache.", "id": 14547, "time": "2002-04-23T22:32:31Z", "creator": "aaron@apache.org", "creation_time": "2002-04-23T22:32:31Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "venessa.mondi@tycoelectronics.com", "text": "I am and was up-to-date on Solaris patches. I did adjust my path and eliminated \nthe LD-LIBRARY_PATH variable. I ran configure and make as user. I am still \nhaving problems.\n\nmaine% echo $path\n/usr/local/bin /usr/local/sbin /usr/ccs/bin /usr/tools/bin /usr/tools/sbin \n/usr/dt/bin /usr/openwin/bin /usr/bin /usr/sbin /opt/tools/bin /opt/tools/sbin\nmaine% echo $LD_LIBRARY_PATH\nLD_LIBRARY_PATH: Undefined variable\nmaine% \nmaine%./configure \n\nThis creates the same error messages in the config.log file as before. It can \nnot find bindprocessor() and timegm()\n\n\nThe make has a different error.\nmaine% make\n.\n.\n.\nMaking all in pcre\nmake[2]: Entering directory `/export2/ws/apache/httpd-2.0.35/srclib/pcre'\nmake[3]: Entering directory `/export2/ws/apache/httpd-2.0.35/srclib/pcre'\n/bin/sh /export2/ws/apache/httpd-2.0.35/srclib/apr/libtool --silent \n--mode=compile gcc  -g -O2 -pthreads    -DSOLARIS2=7 -D_POSIX_PTHREAD_SEMANTICS \n-D_REENTRANT -DAP_HAVE_DESIGNATED_INITIALIZER   -I. \n-I/export2/ws/apache/httpd-2.0.35/os/unix \n-I/export2/ws/apache/httpd-2.0.35/server/mpm/prefork \n-I/export2/ws/apache/httpd-2.0.35/modules/http \n-I/export2/ws/apache/httpd-2.0.35/modules/proxy \n-I/export2/ws/apache/httpd-2.0.35/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/modules/dav/main \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/xml/expat/lib  -c \nmaketables.c \n&& touch maketables.lo\n/bin/sh /export2/ws/apache/httpd-2.0.35/srclib/apr/libtool --silent \n--mode=compile gcc  -g -O2 -pthreads    -DSOLARIS2=7 -D_POSIX_PTHREAD_SEMANTICS \n-D_REENTRANT -DAP_HAVE_DESIGNATED_INITIALIZER   -I. \n-I/export2/ws/apache/httpd-2.0.35/os/unix \n-I/export2/ws/apache/httpd-2.0.35/server/mpm/prefork \n-I/export2/ws/apache/httpd-2.0.35/modules/http \n-I/export2/ws/apache/httpd-2.0.35/modules/proxy \n-I/export2/ws/apache/httpd-2.0.35/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/modules/dav/main \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/xml/expat/lib  -c get.c && \ntouch get.lo\n/bin/sh /export2/ws/apache/httpd-2.0.35/srclib/apr/libtool --silent \n--mode=compile gcc  -g -O2 -pthreads    -DSOLARIS2=7 -D_POSIX_PTHREAD_SEMANTICS \n-D_REENTRANT -DAP_HAVE_DESIGNATED_INITIALIZER   -I. \n-I/export2/ws/apache/httpd-2.0.35/os/unix \n-I/export2/ws/apache/httpd-2.0.35/server/mpm/prefork \n-I/export2/ws/apache/httpd-2.0.35/modules/http \n-I/export2/ws/apache/httpd-2.0.35/modules/proxy \n-I/export2/ws/apache/httpd-2.0.35/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/modules/dav/main \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/xml/expat/lib  -c study.c && \ntouch study.lo\n/bin/sh /export2/ws/apache/httpd-2.0.35/srclib/apr/libtool --silent \n--mode=compile gcc  -g -O2 -pthreads    -DSOLARIS2=7 -D_POSIX_PTHREAD_SEMANTICS \n-D_REENTRANT -DAP_HAVE_DESIGNATED_INITIALIZER   -I. \n-I/export2/ws/apache/httpd-2.0.35/os/unix \n-I/export2/ws/apache/httpd-2.0.35/server/mpm/prefork \n-I/export2/ws/apache/httpd-2.0.35/modules/http \n-I/export2/ws/apache/httpd-2.0.35/modules/proxy \n-I/export2/ws/apache/httpd-2.0.35/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/modules/dav/main \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/xml/expat/lib  -c dftables.c \n&& touch dftables.lo\n/bin/sh /export2/ws/apache/httpd-2.0.35/srclib/apr/libtool --silent --mode=link \ngcc  -g -O2 -pthreads    -DSOLARIS2=7 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT \n-DAP_HAVE_DESIGNATED_INITIALIZER   -I. -I/export2/ws/apache/httpd-\n2.0.35/os/unix \n-I/export2/ws/apache/httpd-2.0.35/server/mpm/prefork \n-I/export2/ws/apache/httpd-2.0.35/modules/http \n-I/export2/ws/apache/httpd-2.0.35/modules/proxy \n-I/export2/ws/apache/httpd-2.0.35/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/modules/dav/main \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/include \n-I/export2/ws/apache/httpd-2.0.35/srclib/apr-util/xml/expat/lib -export-\ndynamic  \n  -o dftables  dftables.lo -lrt -lm -lsocket -lnsl -lresolv -ldl \n/export2/ws/apache/httpd-2.0.35/srclib/apr-util/xml/expat/lib/libexpat.la\n./dftables > /export2/ws/apache/httpd-2.0.35/srclib/pcre/chartables.c\nld.so.1: dftables: fatal: libgcc_s.so.1: open failed: No such file or directory\nKilled\nmake[3]: *** [/export2/ws/apache/httpd-2.0.35/srclib/pcre/chartables.c] Error \n137\nmake[3]: Leaving directory `/export2/ws/apache/httpd-2.0.35/srclib/pcre'\nmake[2]: *** [all-recursive] Error 1\nmake[2]: Leaving directory `/export2/ws/apache/httpd-2.0.35/srclib/pcre'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/export2/ws/apache/httpd-2.0.35/srclib'\nmake: *** [all-recursive] Error 1\nmaine% pwd\n/export2/ws/apache/httpd-2.0.35\nmaine% find . -name libgcc_s.so.1 -print\nmaine% find /usr/local -name libgcc_s.so.1 -print\n/usr/local/lib/libgcc_s.so.1\nmaine%\n\n\nFYI. The /export2/ws/apache/httpd-2.0.35/srclib/pcre/chartables.c is a null \nfile.\n\n-Venessa\n", "id": 14660, "attachment_id": null, "bug_id": 8374, "creation_time": "2002-04-24T19:18:59Z", "time": "2002-04-24T19:18:59Z", "is_private": false}, {"count": 3, "tags": [], "text": "This is a different problem: you have a broken gcc build. For some\nreason your gcc build is trying to link against libgcc_s.so.1, but it\nisn't including the library path in your dftables binary.\n\nTry looking at the output of \"ldd srclib/pcre/.libs/dftables\" and\nif that file doesn't exist then just \"ldd srclib/pcre/dftables\".\nIf any of the libraries can't be found by your system, you may have\nto set LDFLAGS=\"-L/path/to/libgcc_s/ -R/path/to/libgcc_s/\" before\nrunning configure.\n\nAnother thing you might try is adding -static to the libtool\nparameters (in your Makefile) that are used to link dftables.\nOther than that I don't know what to say that this isn't a problem\nwith Apache. Hope the above helps and thanks for using Apache.", "attachment_id": null, "bug_id": 8374, "id": 14674, "time": "2002-04-25T00:30:00Z", "creator": "aaron@apache.org", "creation_time": "2002-04-25T00:30:00Z", "is_private": false}]