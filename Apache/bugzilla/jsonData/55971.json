[{"count": 0, "text": "Although release 1.9.3 fixed a bug related to the new if: and unless: attributes (https://issues.apache.org/bugzilla/show_bug.cgi?id=55885) it seems there are still some inconsistencies in that area.\n\nUsing if:true on macrodef doesn't work as expected\n\n<project xmlns:if=\"ant:if\" xmlns:unless=\"ant:unless\">\n  \n  <property name=\"foo\" value=\"true\"/>\n  \n  <macrodef name=\"foobar\">\n   <attribute name=\"bla\"/>\n   <sequential>\n     <echo>@{bla}</echo>\n   </sequential>\n  </macrodef>\n  \n  <echo>${ant.version}</echo>\n  <foobar bla=\"yada,yada\" if:true=\"foo\"/>\n  \n</project>\n\noutput, no error but macrodef doesn't get executed :\n\n[echo] Apache Ant(TM) version 1.9.3 compiled on December 23 2013\nBUILD SUCCESSFUL\n\n\nWhereas when using if:true inside macrodef the macro\ngets executed (but only when using if:true=\"${@{whentrue}}\"\nit doesn't work with if:true=\"@{whentrue}\")\n\n<project xmlns:if=\"ant:if\" xmlns:unless=\"ant:unless\">\n\n  <property name=\"foo\" value=\"true\"/>\n  \n  <macrodef name=\"foobar\">\n   <attribute name=\"bla\"/>\n   <attribute name=\"whentrue\"/>\n   <sequential>\n     <echo if:true=\"${@{whentrue}}\">@{bla}</echo>\n   </sequential>\n  </macrodef>\n  \n  <echo>${ant.version}</echo>\n  <foobar whentrue=\"foo\" bla=\"yada,yada\"/>\n  \n</project>\n\noutput :\n\n[echo] Apache Ant(TM) version 1.9.3 compiled on December 23 2013\n[echo] yada,yada\nBUILD SUCCESSFUL\n\n\nRegards, Gilbert", "bug_id": 55971, "attachment_id": null, "id": 172152, "time": "2014-01-07T18:27:28Z", "creator": "mailforgilbert@gmx.de", "creation_time": "2014-01-07T18:27:28Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 55971, "attachment_id": null, "text": "Also this doesn't work :\n\n<macrodef name=\"foobar\" if:true=\"foo\">\n <attribute name=\"bla\"/>\n <sequential>\n   <echo>@{bla}</echo>\n </sequential>\n</macrodef>\n\n <echo>${ant.version}</echo>\n <foobar bla=\"yada,yada\"/>\n\noutput :\n\n... Problem: failed to create task or type foobar\nCause: The name is undefined.\nAction: Check the spelling.\nAction: Check that any custom tasks/types have been declared.\nAction: Check that any <presetdef>/<macrodef> declarations have taken place.", "id": 172191, "time": "2014-01-08T20:26:11Z", "creator": "mailforgilbert@gmx.de", "creation_time": "2014-01-08T20:26:11Z", "is_private": false}, {"count": 2, "text": "Hello Gilbert,\n\nI took a look at the documentation concerning these if:true ... attributes.\n\nThe documentation http://ant.apache.org/manual/ifunless.html gives examples such as   <foobar bla=\"yada,yada\" if:true=\"${foo}\"/>\n\nso you have to dereference the property you want to use as a flag rather than using the property name like in the if and unless attributes of targets. Sorry maybe this is a bit confusing.", "bug_id": 55971, "attachment_id": null, "id": 172252, "time": "2014-01-10T00:25:33Z", "creator": "antoine@apache.org", "creation_time": "2014-01-10T00:25:33Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "mailforgilbert@gmx.de", "attachment_id": null, "text": "Hello Antoine,\n\nthanks for response. Yes, indeed it's a bit confusing -\nand i already used the right syntax inside macrodef ;-)\n\n  <echo if:true=\"${@{whentrue}}\">@{bla}</echo>\n\nA hint in the documentation won't hurt.\n\n<project xmlns:if=\"ant:if\" xmlns:unless=\"ant:unless\">\n\n  <property name=\"foo\" value=\"on\"/>\n  \n  <macrodef name=\"foobar\">\n   <attribute name=\"bla\"/>\n   <sequential>\n     <echo>@{bla}</echo>\n   </sequential>\n  </macrodef>\n  \n  <echo>${ant.version}</echo>\n  <foobar bla=\"yada,yada\" if:true=\"${foo}\"/>\n  \n</project>\n\nrunning with Ant 1.9.1 :\n\n[echo] Apache Ant(TM) version 1.9.1 compiled on May 15 2013\nBUILD FAILED\nc:\\WKS\\ant\\tryme.xml:13: Unknown attribute [ant:if:if:true]\n\nrunning with Ant 1.9.3 :\n\n[echo] Apache Ant(TM) version 1.9.3 compiled on December 23 2013\n[echo] yada,yada\nBUILD SUCCESSFUL", "id": 172261, "time": "2014-01-10T08:53:13Z", "bug_id": 55971, "creation_time": "2014-01-10T08:53:13Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 55971, "text": "(In reply to Antoine Levy-Lambert from comment #2)\n\n> I took a look at the documentation concerning these if:true ... attributes.\n> \n> The documentation http://ant.apache.org/manual/ifunless.html gives examples\n> such as   <foobar bla=\"yada,yada\" if:true=\"${foo}\"/>\n\nP.S. \n\ni see, documentation has been fixed for Ant 1.9.3 (https://issues.apache.org/bugzilla/show_bug.cgi?id=55359 ), so i didn't know about that still using Ant 1.9.1", "id": 172262, "time": "2014-01-10T09:18:09Z", "creator": "mailforgilbert@gmx.de", "creation_time": "2014-01-10T09:18:09Z", "is_private": false, "attachment_id": null}]