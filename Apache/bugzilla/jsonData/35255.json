[{"count": 0, "tags": [], "bug_id": 35255, "text": "The org.apache.webdav.ant.taskdefs.Get.copyStream(InputStream, OutputStream, \nFilterSetCollection, String) method uses java.io.InputStream.available() in \norder to determine the number of bytes to be read from the stream.\n\nAccording to the documentation of java.io.InputStream.available() this \nmethod \"Returns the number of bytes that can be read (or skipped over) from \nthis input stream without blocking by the next caller of a method for this \ninput stream. The next caller might be the same thread or or another thread.\"\n\nAs a result all downloaded files will have the size 0 if a slow connection is \nused.\n\nSuggested solution:\nReplace the existing code:\n    while (in.available() > 0) {\n        int cnt = in.read(b, 0, b.length);\n        if (cnt > -1) {\n            out.write(b, 0, cnt);\n        }\n    }\nby:\n    int cnt;\n    while ((cnt = in.read(b, 0, b.length)) > 0)\n    {\n        out.write(b, 0, cnt);\n    }\nin order to read the stream until the end of the stream has been reached.", "id": 76133, "time": "2005-06-07T16:53:28Z", "creator": "polliguard-asf@yahoo.de", "creation_time": "2005-06-07T16:53:28Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 35255, "attachment_id": 15331, "is_private": false, "id": 76153, "time": "2005-06-08T11:22:27Z", "creator": "mkalen@apache.org", "creation_time": "2005-06-08T11:22:27Z", "text": "Created attachment 15331\nPatch to use blocking I/O in Get task, as suggested\n\nPatch to use blocking I/O in Get task, as suggested by user. Created against\nSLIDE_2_1_BRANCH but should apply to HEAD as well."}, {"count": 2, "tags": [], "creator": "mkalen@apache.org", "attachment_id": null, "is_private": false, "id": 76154, "time": "2005-06-08T11:23:33Z", "bug_id": 35255, "creation_time": "2005-06-08T11:23:33Z", "text": "Patch for SLIDE_2_1_BRANCH and HEAD is available."}, {"count": 3, "tags": [], "bug_id": 35255, "attachment_id": null, "is_private": false, "id": 91417, "time": "2006-07-19T12:44:51Z", "creator": "wheyboer@triennium.com", "creation_time": "2006-07-19T12:44:51Z", "text": "I had this problem although slightly different, I tried your fix but it didn't\nwork for me. \nDidn't see this bug (because I was lazy), but created another bugreport: 40074.\nThe patch thats used there definitely works.\n\nregards,\n\nWim"}]