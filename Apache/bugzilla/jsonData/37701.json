[{"count": 0, "tags": [], "creator": "anthony.goubard@wanadoo.nl", "text": "The Move task doesn't execute to the File.renameTo to move a file.\n\nEven if the code of the Move task seems to indicate that it first tries to use\nrenameTo() before moving the file physically, it doesn't do so.\n\nI've noticed it with renaming directories that contains a lot of files or\nrenaming a file with the similar name but with another case.\n\nHere is an example:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project basedir=\".\" default=\"moveTest\">\n  <target name=\"moveTest\" description=\"Shows that the move tasks doesn't use\nFile.renameTo()\">\n    <echo file=\"README\">Hello world</echo>\n    <available property=\"readme.exists\" file=\"README\"/>\n    <fail message=\"README file not created\" unless=\"readme.exists\"/>\n    <move file=\"README\" tofile=\"readme\" />\n    <!-- At this point on Windows XP the file disappears -->\n    <available property=\"readme.exists2\" file=\"readme\"/>\n    <fail message=\"readme file not found\" unless=\"readme.exists2\"/>\n  </target>\n</project>\n\nWhereas Java code new File(\"README\").renameTo(new File(\"readme\")); works.", "id": 82998, "time": "2005-11-29T23:06:56Z", "bug_id": 37701, "creation_time": "2005-11-29T23:06:56Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "This is a bug, but its not what you've titled. You looked at the code, you can\nsee we use renameTo.\n\nwhat is the problem is that we delete the dest file first. And I bet on a case\ninsensitive filesystem, if the src file is called \"README\" then the dest file\n\"readme\" appears to exist, so we delete it and so del the source file.\n\nWe cant just act differently on windows because some filesystems are case\nsensitive (remote unix filesys, clearcase). Maybe there is some other kind of\ntrick we can use. If not, then doc in the manual is the only other option.", "is_private": false, "bug_id": 37701, "id": 82999, "time": "2005-11-29T23:36:30Z", "creator": "stevel@apache.org", "creation_time": "2005-11-29T23:36:30Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "anthony.goubard@wanadoo.nl", "attachment_id": null, "id": 83000, "time": "2005-11-30T01:05:22Z", "bug_id": 37701, "creation_time": "2005-11-30T01:05:22Z", "is_private": false, "text": "After doing some other tests, it indeed seems to be the fact that the file is\nremoved.\nI personnaly think that the move task should do 'move' and not 'delete\ndestination' and then try to move the file; or do the 'delete destination' once\nthat the File.renameTo() failed."}, {"count": 3, "attachment_id": 17610, "creator": "anthony.goubard@wanadoo.nl", "is_private": false, "id": 85480, "time": "2006-02-06T21:42:24Z", "bug_id": 37701, "creation_time": "2006-02-06T21:42:24Z", "tags": [], "text": "Created attachment 17610\nFix to this bug"}, {"count": 4, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "is_private": false, "id": 89079, "time": "2006-05-12T19:33:43Z", "bug_id": 37701, "creation_time": "2006-05-12T19:33:43Z", "text": "incorporated equals check in svn HEAD.  Thanks!"}]