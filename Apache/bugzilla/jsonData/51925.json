[{"count": 0, "tags": [], "bug_id": 51925, "attachment_id": 27644, "text": "Created attachment 27644\nTest Case\n\nHello,\nIf you setup a test with :\n- Retrieve All embedded Resources from HTML files\n- Use concurrent pool size to 4\n\nYou run a test and stop while a concurrent download is running.\nYou will end up leaking 4 threads that were started by ThreadPoolExecutor.\n\nTo reproduce issue:\n1) Put a breakpoint at line ASyncSample#call \n2) Start a test\n3) Wait for stop a these breakpoints\n4) Call stop\n5) Let all threads run\n\nYou will end up with 4 threads called :\npool-1-thread-1\npool-1-thread-3\npool-1-thread-2\npool-1-thread-4\n\n\nRegards\nPhilippe", "id": 149968, "time": "2011-09-30T08:06:40Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-09-30T08:06:40Z", "is_private": false}, {"attachment_id": 27645, "tags": [], "bug_id": 51925, "text": "Created attachment 27645\nFix to the issue\n\nFix that calls shutdownNow in finally if shutdown did not run.\n\nRegards\nPhilippe Mouawad", "count": 1, "id": 149969, "time": "2011-09-30T08:09:17Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-09-30T08:09:17Z", "is_private": false}, {"count": 2, "tags": [], "text": "Created attachment 27646\nFix to the issue", "attachment_id": 27646, "bug_id": 51925, "id": 149970, "time": "2011-09-30T08:10:04Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-09-30T08:10:04Z", "is_private": false}, {"count": 3, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Created attachment 27684\nFix to issue\n\nUpdated to last revision.\nHope you can take it into account soon.\nRegards\nPhilippe M.", "id": 150126, "time": "2011-10-04T14:34:20Z", "bug_id": 51925, "creation_time": "2011-10-04T14:34:20Z", "is_private": false, "attachment_id": 27684}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "text": "Patch looks OK, however when Bug 51957 is fixed, the try clause can complete normally without all tasks having completed.\n\nOne way to fix this would be to call awaitTermination again with a very short timeout; the return value will indicate whether any tasks remain to be stopped.", "id": 150160, "time": "2011-10-04T23:41:54Z", "bug_id": 51925, "creation_time": "2011-10-04T23:41:54Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 150165, "time": "2011-10-05T00:29:28Z", "bug_id": 51925, "creation_time": "2011-10-05T00:29:28Z", "is_private": false, "text": "URL: http://svn.apache.org/viewvc?rev=1179022&view=rev\nLog:\nBug 51925 - Calling Stop on Test leaks executor threads when concurrent download of resources is on\n\nModified:\n   jakarta/jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerBase.java\n   jakarta/jmeter/trunk/xdocs/changes.xml"}]