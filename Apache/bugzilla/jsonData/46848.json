[{"count": 0, "tags": [], "bug_id": 46848, "text": "Hi,\n\nwe want to include a page of another publication into the current one.\n\n* I added a new page to my publication called \"includetest\".\n\n* In the body of that page I added only one div element:\n  <div id=\"refsea\"></div>\n\n* In the XSLT stylesheet webapps/lenya/lenya/pubs/mypub/xslt/page2xhtml.xsl I added the following template:\n <xsl:template match=\"xhtml:div[@id = 'refsea']\">\n    <ci:include src=\"lenya-document:c420b7f0-5ed0-11dd-aaf2-d7972f130a48,pub=ecount?format=xhtml\"/>\n </xsl:template>\n\n* I added the transformer\n<map:transform type=\"cinclude\"/>\nto the pattern\n<map:match pattern=\"lenyabody-*/*/*/*/**\"> just before\n<map:transform type=\"uuid2url\"/>.\nIt works fine when including pages of the same \"mypub\" publication (without pub parameter). When referencing pages of other publications (see sample code above) Lenya says \"LinkException: The target doesn't exist!\".\n\nHere's an excerpt of the stack trace:\nat org.apache.avalon.excalibur.component.ComponentProxyGenerator$ComponentInvocationHandler.invoke(ComponentProxyGenerator.java:143)\n\tat $Proxy11.resolveURI(Unknown Source)\n\tat org.apache.cocoon.components.CocoonComponentManager.resolveURI(CocoonComponentManager.java:558)\n\tat org.apache.cocoon.components.CocoonComponentManager.resolveURI(CocoonComponentManager.java:558)\n\tat org.apache.cocoon.components.CocoonComponentManager.resolveURI(CocoonComponentManager.java:558)\n\tat org.apache.cocoon.components.CocoonComponentManager.resolveURI(CocoonComponentManager.java:558)\n\tat org.apache.cocoon.environment.AbstractEnvironment.resolveURI(AbstractEnvironment.java:554)\n\tat org.apache.cocoon.environment.AbstractEnvironment.resolveURI(AbstractEnvironment.java:541)\n\tat org.apache.cocoon.environment.wrapper.MutableEnvironmentFacade.resolveURI(MutableEnvironmentFacade.java:299)\n\tat org.apache.cocoon.transformation.CIncludeTransformer.processCIncludeElement(CIncludeTransformer.java:522)\n\t... 149 more\nCaused by: java.lang.RuntimeException: org.apache.lenya.cms.linking.LinkException: The target doesn't exist!\n\tat org.apache.lenya.cms.cocoon.source.DocumentSourceFactory.getSource(DocumentSourceFactory.java:165)", "id": 125540, "time": "2009-03-13T04:50:13Z", "creator": "geldner.list.reg@gmx.net", "creation_time": "2009-03-13T04:50:13Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "I added a test case in r753237. It looks like 2.0.2 supports cross-publication links. I'll run the test against 2.0 as well, maybe it was buggy.", "attachment_id": null, "bug_id": 46848, "id": 125541, "time": "2009-03-13T06:25:24Z", "creator": "andreas@apache.org", "creation_time": "2009-03-13T06:25:24Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 46848, "is_private": false, "id": 125542, "creation_time": "2009-03-13T06:45:40Z", "time": "2009-03-13T06:45:40Z", "creator": "andreas@apache.org", "text": "Interestingly, the test succeeds in 2.0 as well \u2026", "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "andreas@apache.org", "text": "Ah, when the ?format=xhtml parameter is added the test fails (with 2.0 and the current 2.0.x branch).", "id": 125544, "time": "2009-03-13T06:53:24Z", "bug_id": 46848, "creation_time": "2009-03-13T06:53:24Z", "tags": [], "is_private": false}, {"count": 4, "attachment_id": null, "creator": "andreas@apache.org", "text": "(In reply to comment #3)\n> Ah, when the ?format=xhtml parameter is added the test fails (with 2.0 and the\n> current 2.0.x branch).\n\nThe LinkResolver chokes on this parameter. I changed the test to use the source resolver instead. The test succeeds with 2.0.x and fails with 2.0.\n\nWould it be an option for you to try it with the current 2.0.x branch?", "id": 125547, "time": "2009-03-13T07:28:45Z", "bug_id": 46848, "creation_time": "2009-03-13T07:28:45Z", "tags": [], "is_private": false}]