[{"count": 0, "attachment_id": null, "creator": "bert@gildrum.com", "text": "Looks like the java compiler included in Tomcat 4.x is failing to compile \nan import statement if the class it refers to belongs to the \"unnamed package\"\n\nsee \nhttp://java.sun.com/docs/books/jls/second_edition/html/packages.doc.html#26639\nfor info on \"unnamed package\"\n\n- see the various supporting info below.\n- note that ACJJspBean is a public class in the \"unnamed package\"\n- also FYI the ACJJspBean.class file is in <context>/WEB-INF/classes\n\nAs far as I can tell, this is supposed to be a legal use of an import statement.\nAnd yes, it is from an example piece of code from a 3rd party package\n\n------------- version and environment stuff ---------\n\nJVM: Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.1_02-b06)\nOS: Win2K professional 5.00.2195 Service Pack 3\nCPU: Intel(R) Celeron(R) CPU 1.70GHz AT/AT COMPATIBLE\nTomcat: jakarta-tomcat-4.1.24-LE-jdk14 (downloaded on 20030411)\nMemory: 646,640 KB RAM\n\n------------ snippet from input JSP file -----------\n<%@ page import = \"ACJJspBean\" %>\n\n<jsp:useBean id=\"erwbean\" class=\"ACJJspBean\" scope=\"session\"/>\n\n------------ snippet from generated java file -----------\npackage org.apache.jsp;\n\nimport javax.servlet.*;\nimport javax.servlet.http.*;\nimport javax.servlet.jsp.*;\nimport org.apache.jasper.runtime.*;\nimport ACJJspBean;\n\npublic class acjjspdemo_jsp extends HttpJspBase {\n\n\n  private static java.util.Vector _jspx_includes;\n\n  public java.util.List getIncludes() {\n    return _jspx_includes;\n  }\n\n  public void _jspService(HttpServletRequest request, HttpServletResponse \nresponse)\n        throws java.io.IOException, ServletException {\n\n----------- error reported on html output to browser ----------------\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n    [javac] Since fork is true, ignoring compiler setting.\n    [javac] Compiling 1 source file\n    [javac] Since fork is true, ignoring compiler setting.\n    [javac] C:\\jakarta-tomcat-4.1.24-LE-jdk14\n\\work\\Standalone\\localhost\\test\\acjjspdemo_jsp.java:7: '.' expected\n    [javac] import ACJJspBean;\n    [javac]                  ^\n    [javac] C:\\jakarta-tomcat-4.1.24-LE-jdk14\n\\work\\Standalone\\localhost\\test\\acjjspdemo_jsp.java:44: cannot resolve symbol\n    [javac] symbol  : class ACJJspBean \n    [javac] location: class org.apache.jsp.acjjspdemo_jsp\n    [javac]       ACJJspBean erwbean = null;\n    [javac]       ^\n    [javac] C:\\jakarta-tomcat-4.1.24-LE-jdk14\n\\work\\Standalone\\localhost\\test\\acjjspdemo_jsp.java:46: cannot resolve symbol\n    [javac] symbol  : class ACJJspBean \n    [javac] location: class org.apache.jsp.acjjspdemo_jsp\n    [javac]         erwbean = (ACJJspBean) pageContext.getAttribute(\"erwbean\", \nPageContext.SESSION_SCOPE);\n    [javac]                    ^\n    [javac] C:\\jakarta-tomcat-4.1.24-LE-jdk14\n\\work\\Standalone\\localhost\\test\\acjjspdemo_jsp.java:49: cannot resolve symbol\n    [javac] symbol  : class ACJJspBean \n    [javac] location: class org.apache.jsp.acjjspdemo_jsp\n    [javac]             erwbean = (ACJJspBean) java.beans.Beans.instantiate\n(this.getClass().getClassLoader(), \"ACJJspBean\");\n    [javac]                        ^\n    [javac] 4 errors\n\n\n\n\tat org.apache.jasper.compiler.DefaultErrorHandler.javacError\n(DefaultErrorHandler.java:130)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError\n(ErrorDispatcher.java:293)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:353)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:370)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:473)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:190)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2415)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:594)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:565)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:536)\n\n------------ error in Catalina NT console --------------------\nCompile failed; see the compiler error output for details.\n        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:842)\n        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:682)\n        at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:317)\n        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:370)\n        at org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:473)\n        at org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:190)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2415)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n        at org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:594)\n        at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:392)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:565)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:536)", "id": 35021, "time": "2003-04-11T19:26:44Z", "bug_id": 18970, "creation_time": "2003-04-11T19:26:44Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "creator": "kin-man.chung@sun.com", "text": "\n\n*** This bug has been marked as a duplicate of 10036 ***", "id": 35026, "time": "2003-04-11T19:54:14Z", "bug_id": 18970, "creation_time": "2003-04-11T19:54:14Z", "tags": [], "is_private": false}]