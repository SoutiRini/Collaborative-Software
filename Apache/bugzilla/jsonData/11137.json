[{"count": 0, "tags": [], "creator": "dlindquist@castoracer.com", "text": "Using Tomcat 3.3.1 final and JDK 1.3 under Windows XP, a POST operation that \nsubmits the values of many textboxes to an HttpServlet subclass will \"fail\".  \nThe POST operation in the servlet is called, but after it completes, \na \"network connection\" error occurs (presumably the connection is simply \nrudely severed).  The odd time the operation succeeds and proper output is \ndisplayed.  The percentage of time that the operation fails is directly \nproportional to the number of textboxes on the form.\n\nThis occurs using both IE and Netscape (IE either hangs or reports page not \nfound, Netscape reports \"Network connection failure\"), but only seems to occur \nunder Windows XP (tested on both Win 98 and Win XP) -- under Windows 98 the \nproblem could not be reproduced.  The java environment was identical in both \ncases.\n\nA simple test case is provided:\n\n-----testpostbug.java-----8<-------------------\nimport javax.servlet.http.*;\nimport java.io.PrintWriter;\nimport java.util.*;\n\n public class testpostbug extends javax.servlet.http.HttpServlet\n {\n    protected void doGet(HttpServletRequest req,HttpServletResponse resp) \nthrows javax.servlet.ServletException, java.io.IOException\n    {\n\t\tPrintWriter writer = resp.getWriter();\n\t\twriter.println(\"doing GET\");\n\t\twriter.flush();\n\t}\n\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) \nthrows javax.servlet.ServletException, java.io.IOException\n    {\n\t\tPrintWriter writer = resp.getWriter();\n\t\twriter.println(\"doing POST\");\n\t\twriter.flush();\n\t}\n}\n-------------------8<-------------------\n\n-----test.html-----8<-------------------\n<html>\n<body><form method=\"POST\" \naction=\"http://localhost:8080/webapp/servlet/testpostbug\">\n<input type=\"text\" maxlength=\"50\" name=\"one\" value=\"one\">\n*** REPEAT ABOVE INPUT BOX FOR 100 TIMES WITH _DIFFERENT NAMES_ ***\n*** BE SURE TO INCLUDE VALUES FOR THE TEXTBOXES ***\n<input type=\"submit\" name=\"submit\" value=\"submit\">\n</form>\n</body>\n</html>\n-------------------8<-------------------\n(This test case is available as a ZIP file upon request.)\n\nBe sure to properly modify the URL in the form tag in the html file, and to \nreplace the ***'d comments with actual <input> boxes.\n\nClicking the \"submit\" button on this webpage will attempt to submit to the \nservlet, causing the error.  It will likely work on the first attempt -- hit \nthe \"back\" button and click \"submit\" again, and it will fail.", "id": 20140, "time": "2002-07-24T18:05:47Z", "bug_id": 11137, "creation_time": "2002-07-24T18:05:47Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 11137, "attachment_id": 2472, "text": "Created attachment 2472\nTest Case Zip File", "id": 20141, "time": "2002-07-24T18:06:30Z", "creator": "dlindquist@castoracer.com", "creation_time": "2002-07-24T18:06:30Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 11137, "attachment_id": null, "id": 20142, "time": "2002-07-24T18:08:56Z", "creator": "dlindquist@castoracer.com", "creation_time": "2002-07-24T18:08:56Z", "is_private": false, "text": "ZIP file containing the test case has been added.\n\nNote that Tomcat 4.0.4 does *NOT* seem to suffer from this problem."}, {"count": 3, "tags": [], "bug_id": 11137, "attachment_id": null, "id": 20144, "time": "2002-07-24T18:35:44Z", "creator": "william.barker@wilshire.com", "creation_time": "2002-07-24T18:35:44Z", "is_private": false, "text": "The Http10Interceptor is known to not work well on XP.  One work-around is to \nset socketCloseDelay=\"250\" on the Http10Interceptor element.\n\nA better solution is to use the Coyote HTTP/1.1 connector.  The instructions \nfor installing it are at  <http://jakarta.apache.org/builds/jakarta-tomcat-\nconnectors/coyote/release/v1.0-rc2/>.  Unfortunately, the jar files there are \nbroken for 3.3.  You need to use the ones from the nightly build \n<http://jakarta.apache.org/builds/jakarta-tomcat/nightly-3.3/>.\n\n*** This bug has been marked as a duplicate of 8992 ***"}]