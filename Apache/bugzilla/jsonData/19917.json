[{"count": 0, "tags": [], "bug_id": 19917, "is_private": false, "text": "Using AF_UNIX socket with Tomcat 4.1.24, Apache 2.0.45 (configuration according\nto http://jakarta.apache.org/tomcat/tomcat-4.1-doc/jk2/jk2/configtcex.html)\ndoesn't work.\n\n\ntomcat/conf/jk2.properties:\nhandler.list=apr,channelUnix,request\nchannelUnix.file=${jkHome}/work/jk2.socket\napr.NativeSo=/lvol1/apache2/modules/jkjni.so\n\n\ncatalina.out reports on Tomcat start:\n\nINFO: APR not loaded, disabling jni components: java.io.IOException:\n/lvol1/apache2/modules/jkjni.so: /lvol1/apache2/modules/jkjni.so: undefined\nsymbol: apr_md5_final\n\n\nThe symbol apr_md5_final is in libaprutil-0.so which isn't linked in jkjni.so:\n#ldd /lvol1/apache2/modules/jkjni.so \n        libcrypt.so.1 => /lib/libcrypt.so.1 (0x4002d000)\n        libapr-0.so.0 => /lvol1/apache2/lib/libapr-0.so.0 (0x4005a000)\n        libc.so.6 => /lib/i686/libc.so.6 (0x40077000)\n        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x80000000)\n\n#nm /lvol1/apache2/lib/libaprutil-0.so|grep apr_md5_final\n000094f4 T apr_md5_final\n\n\n\nmod_jk2 was compiled as DSO from source jakarta-tomcat-connectors-4.1.24-src\nwith the following options:\n./configure --with-apxs2=/lvol1/apache2/bin/apxs\n\nApache 2 (httpd-2.0.45) was compiled with the following options:\n./configure --prefix=/lvol1/apache2 --enable-so --enable-ssl\n\nOperating System: Red Hat Linux Advanced Server release 2.1AS (Pensacola)\nLinux Kernel: 2.4.9-e.16summit", "id": 37176, "time": "2003-05-14T12:47:03Z", "creator": "simon.pabst@siemens.com", "creation_time": "2003-05-14T12:47:03Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "dchatenay@gmail.com", "attachment_id": null, "is_private": false, "id": 67191, "time": "2004-11-19T01:46:51Z", "bug_id": 19917, "creation_time": "2004-11-19T01:46:51Z", "text": "  I ran into the same issue with Tomcat 4.1.18, Apache 2.0.52 and Tomcat\nconnectors 2.0.4 on a Redhat 7.3. The first part of the problem has to do with\n$TOMCAT_HOME/bin/tomcat-jni.jar, which conflicts with\n$TOMCAT_HOME/server/lib/tomcat-jk2.jar, and causes the apr to fail loading with\na CNFE on org.apache.commons.logging.LogFactory. Once this is out of the way, I\nran in the same problem described in this bug.\n  I had to resort to a temporary workaround: \n-edit jk/native2/server/apache2/Makefile\n-add \"-laprutil-0 -lgdbm -lexpat -ldb -lcrypt\" to APR_LIBS\n-make and deploy\n  This worked for me.\n  This is apparently not an uncommon problem: a lot of sites are reporting the\nsame issue, and it is almost impossible a solution that works. I'm posting here\nbecause I believe some people might find this useful, given the scarcity of\nproper documentation on the the jk2 connector.\n"}, {"count": 2, "tags": [], "text": "As of November 15, 2004, JK2 is no longer supported. All bugs related to JK2 \nwill be marked as WONTFIX. In its place, some of its features have been \nbackported to jk1. Most of those features will be seen in 1.2.7, which is \nslated for release on November 30th, 2004.\n\nAnother alternative is the ajp addition to mod_proxy which will be part of \napache 2.\n\nFor more information on the Tomat connectors docs at\nhttp://jakarta.apache.org/tomcat/connectors-doc/", "is_private": false, "id": 67678, "creator": "funkman@joedog.org", "time": "2004-12-01T03:00:06Z", "bug_id": 19917, "creation_time": "2004-12-01T03:00:06Z", "attachment_id": null}]