[{"count": 0, "tags": [], "bug_id": 43929, "text": "having the same problem described in \nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=41949\nwith\n- Apache/2.0.59 (Win32) \n- mod_jk/1.2.25\n- tomcat 5.5.25\n- same test WAR file to reproduce the problem\n\n-> response freezes every second request\n\nmod_jk log also stops at following line; browser is waiting for the response\nto complete...:\n[Wed Nov 21 17:51:53 2007][1260:2180] [debug] jk_ajp_common.c (1325): (xy) \nrequest body to send 0 - request body to resend 0\n\nthanks", "id": 110936, "time": "2007-11-21T09:03:22Z", "creator": "starzer@it-fabrik.at", "creation_time": "2007-11-21T09:03:22Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 43929, "is_private": false, "text": "Which connector are you using on the Tomcat side for AJP?", "id": 111030, "time": "2007-11-23T12:10:11Z", "creator": "markt@apache.org", "creation_time": "2007-11-23T12:10:11Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 43929, "text": "\nmy config is:\n\n<Connector debug=\"9\" enableLookups=\"false\" port=\"8047\" protocol=\"AJP/1.3\" \nredirectPort=\"8443\" useBodyEncodingForURI=\"true\" />\n\nthanks", "id": 111058, "time": "2007-11-24T05:05:41Z", "creator": "starzer@it-fabrik.at", "creation_time": "2007-11-24T05:05:41Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 111061, "time": "2007-11-24T08:07:28Z", "bug_id": 43929, "creation_time": "2007-11-24T08:07:28Z", "text": "Hmm. OK. That will use the Coyote connector which means you shouldn't be seeing\nthis issue if it is the same one as 41949. Let me do some testing and get back\nto you."}, {"count": 4, "tags": [], "creator": "markt@apache.org", "text": "I can not reproduce this with completely clean installs of:\n - Windows Server 2003 Ent, SP2 with latest pacthes\n - JDK 1.6.0_03\n - httpd 2.0.59 (no ssl binary installer)\n - Tomcat 5.5.25 (zip distribution)\n - mod_jk 1.2.25\n\nAll software installed on localhost using standard configuration.\n\nI also tried your exact connector configuration and it all works as expected.\n\nIt looks like you have some other issue going on here. Could be configuration,\ncould be network / firewall related.\n\nWhat ever it is Bugzilla isn't really suited to helping you track this down. I\nsuggest you try with a completely clean install and if you still have the\nproblem seek help on the users mailing list. If you can provide a set of steps\nthat reproduces the issue from a clean installation and you are as sure as you\ncan be that it is not related to your environment, please feel free to re-open\nthis bug and I'll take another look.", "id": 111167, "time": "2007-11-27T13:42:42Z", "bug_id": 43929, "creation_time": "2007-11-27T13:42:42Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 43929, "attachment_id": null, "id": 111199, "time": "2007-11-28T04:49:46Z", "creator": "starzer@it-fabrik.at", "creation_time": "2007-11-28T04:49:46Z", "is_private": false, "text": "hi thomas,\n\ncould you please check my attachments, i can not find the problem\n(there must be a problem somewhere because it also fails on our production \nsystem [linux red hat, tomcat 5.0.28, apache 2.0.58] after upgrading from \n1.2.15 to > 1.2.21)\n\nas you can see from my attachments my test case fails with 1.2.21 (and 1.2.25) \nbut working with previous mod_jk versions\ni have also switched to trace-log-level for more info\n\nthanks\n\n"}, {"count": 6, "tags": [], "bug_id": 43929, "attachment_id": 21200, "id": 111200, "time": "2007-11-28T04:51:04Z", "creator": "starzer@it-fabrik.at", "creation_time": "2007-11-28T04:51:04Z", "is_private": false, "text": "Created attachment 21200\nmod jk logs"}, {"count": 7, "tags": [], "creator": "markt@apache.org", "text": "Your production issue will almost certainly be because you are using an old\n5.0.x version that doesn't include the necessary fix on the Java side of the\nconnector.\n\nAs for you win32 system, I can't produce this on a clean install. Again, the\nuser list is the place to be looking for help debugging your win32 configuration.", "id": 111213, "time": "2007-11-28T11:07:24Z", "bug_id": 43929, "creation_time": "2007-11-28T11:07:24Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "text": "I can see a pettern here, taht let's me reopen the issue.\nWe actually send the include as a GET with a Content-Length header \"3\" and no \nbody. The length \"3\" might come from the main request, because the main request \nis a POST with body \"x=y\" of length \"3\".\nSo it should be normal for Tomcat to wait for the body. It is interesting \nthough, that the log contains a couple of calls to the same URL, and whenever \nthe included request with the buggy content length is sent via a freshly opened \nconnection, it succeeds...\nI'll investigate, why we use the content length of the main request for the \nincluded GET, could also be a mod_include bug. Let's see.\n", "attachment_id": null, "bug_id": 43929, "id": 112647, "time": "2008-01-08T12:17:27Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2008-01-08T12:17:27Z", "is_private": false}, {"count": 9, "tags": [], "creator": "rainer.jung@kippdata.de", "text": "Should also note: why does it work for older jk versions?\nBecause before we fixed bug 41949, we additionally send a content length 0 \nheader. So with bug 41949, included GET will work but not POSTs, with the fix \nof 41949, an underlying bug pops up, and POSTs work, but GET not if the main \nrequest is a POST.", "id": 112648, "time": "2008-01-08T12:19:10Z", "bug_id": 43929, "creation_time": "2008-01-08T12:19:10Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "starzer@it-fabrik.at", "text": "anything i can do to help?", "count": 10, "id": 112649, "time": "2008-01-08T12:57:35Z", "bug_id": 43929, "creation_time": "2008-01-08T12:57:35Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 43929, "attachment_id": null, "id": 112651, "time": "2008-01-08T13:26:22Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2008-01-08T13:26:22Z", "is_private": false, "text": "I can already reproduce.\nIt looks like httpd 2.2.x doesn't have the problem.\nI'll investigate deeper. If 2.2.x is an option for you, you could do a quick \ntest, if that fixes it for you to."}, {"count": 12, "tags": [], "bug_id": 43929, "attachment_id": null, "id": 112652, "time": "2008-01-08T14:26:31Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2008-01-08T14:26:31Z", "is_private": false, "text": "It's a bug in httpd 2.0.\nIt has been fixed in 2.1 (the dev branch of 2.2) in March 2005:\n\nhttp://svn.apache.org/viewvc?view=rev&revision=158798\n\nIt would be hard to work around this bug and most likely would introduce new \nproblems.\n\nSince 2.2 is very stable and a migration from 2.0 to 2.2 is not very hard, I'm \nclosing this as invalid. Sorry.\n\nIf the problem does not vanish with httpd 2.2.x, please reopen.\n"}, {"count": 13, "tags": [], "creator": "starzer@it-fabrik.at", "attachment_id": null, "is_private": false, "id": 112653, "time": "2008-01-08T14:37:52Z", "bug_id": 43929, "creation_time": "2008-01-08T14:37:52Z", "text": "ok thanks"}, {"count": 14, "tags": [], "bug_id": 43929, "text": "Another comment, although closed as invalid:\n\nYou could try the patch I'll attach soon if you can compile the module for yourself:\n\nThe patch is against trunk. For 1.2.26 you need to apply it 11 lines later, the\npatch program will most likely do this automatically for you.\n\nI would not expect this to become part of an official JK release.", "id": 112655, "time": "2008-01-08T15:13:43Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2008-01-08T15:13:43Z", "is_private": false, "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 43929, "text": "Created attachment 21358\nOverwrite request Content-Length\n\nOverwrite incoming Content-Length with \"0\", if r->clength == 0.", "id": 112656, "time": "2008-01-08T15:17:54Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2008-01-08T15:17:54Z", "is_private": false, "attachment_id": 21358}, {"count": 16, "tags": [], "bug_id": 43929, "attachment_id": null, "text": "problem OK with Apache/2.2.6 (Win32) mod_jk/1.2.26, thanks", "id": 112725, "time": "2008-01-10T01:53:13Z", "creator": "starzer@it-fabrik.at", "creation_time": "2008-01-10T01:53:13Z", "is_private": false}]