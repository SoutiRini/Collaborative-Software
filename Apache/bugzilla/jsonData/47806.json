[{"count": 0, "tags": [], "bug_id": 47806, "attachment_id": 24233, "text": "Created attachment 24233\nISAPI filter logs\n\nHi,\n\nWe have installed AJP connector 1.2.26 on IIS 6.0 on Windows XP server. It was\ninstalled last year around Aug. 2008. Recently we observed that we are getting\nHTTP 500 Internal server error [Incorrect function] while accessing CSS, Images\nfrom the IIS web server. While debugging the issue, Microsoft support informed\nthat every HTTP request is going through this ISAPI filter and some times it\nfails and throws this error. We disabled the ISAPI filter and the site is\nworking fine.\n\nWe would like to know your analysis on this issue and possible solution for the\nsame. The problem is intermittent however affects most of our end customers.\n\nAny support in this regard is highly appreciated.\n\nAttached: ISAPI logs from 30th Aug. however issue started on 1st Sep. onwards.\n\nThanks!\nKetan Malekar", "id": 130226, "time": "2009-09-08T20:40:59Z", "creator": "ketan.malekar@gmail.com", "creation_time": "2009-09-08T20:40:59Z", "is_private": false}, {"count": 1, "tags": [], "creator": "chinhouswee@hotmail.com", "attachment_id": null, "is_private": false, "id": 133102, "time": "2009-12-23T15:30:40Z", "bug_id": 47806, "creation_time": "2009-12-23T15:30:40Z", "text": "mostly the same problem here. still no idea\n\n\n\n    Me: w2003\n    compaq evo w6000\n    apache tomcat 5.5.28\n    isapi_redirect.dll 1.2.28\n    IIS 6\n    \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2013\n    Hello everyone,\n\n    I finally get to the \u201cincorrect function\u201d point. It seems that this Problem has different causes.\n    If u read my logs u will c IIS says http 500 error (Internal server error) and i cant find any solution or hint to my last 2 ISAPI log Entries.\n\n    my log files:\n\n    isapi log:\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_util.c (458): Pre-processed log time stamp format is \u2018[%a %b %d %H:%M:%S.000 %Y] \u2018\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [info] jk_isapi_plugin.c (2405): Starting Jakarta/ISAPI/isapi_redirector/1.2.28\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2423): Detected IIS version 6.0\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2425): Using ini file C:\\Tomcat\\ISAPI\\isapi_redirect.properties.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2431): Using log file C:\\Tomcat\\logs\\isapi_redirect.log.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2432): Using log level 1.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2433): Using extension uri /jakarta/isapi_redirect.dll.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2434): Using worker file C:\\Tomcat\\conf\\workers.properties.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2435): Using worker mount file C:\\Tomcat\\conf\\uriworkermap.properties.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2437): Using rewrite rule file .\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2439): Using uri select 3.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2440): Using no chunked encoding.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2442): Using notification event SF_NOTIFY_AUTH_COMPLETE (0\u00d704000000)\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2452): Using uri header TOMCATURI6A6B0000:.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2453): Using query header TOMCATQUERY6A6B0000:.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2454): Using worker header TOMCATWORKER6A6B0000:.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2455): Using worker index TOMCATWORKERIDX6A6B0000:.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2456): Using translate header TOMCATTRANSLATE6A6B0000:.\n    [Tue Dec 08 19:40:00.484 2009] [2400:2684] [debug] jk_isapi_plugin.c (2457): Using a default of 250 connections per pool.\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018/admin/*\u2019 with value \u2018wlb\u2019 to map.\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018/manager/*\u2019 with value \u2018wlb\u2019 to map.\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018/jsp-examples/*\u2019 with value \u2018wlb\u2019 to map.\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018/servlets-examples/*\u2019 with value \u2018wlb\u2019 to map.\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018/examples/*\u2019 with value \u2018wlb\u2019 to map.\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018!/servlets-examples/*.jpeg\u2019 with value \u2018wlb\u2019 to map.\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018/jkmanager\u2019 with value \u2018jkstatus\u2019 to map.\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (1102): Loading urimaps from C:\\Tomcat\\conf\\uriworkermap.properties with reload check interval 60 seconds\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (720): wildchar rule \u2018/admin/*=wlb\u2019 source \u2018uriworkermap\u2019 was added\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (720): wildchar rule \u2018/manager/*=wlb\u2019 source \u2018uriworkermap\u2019 was added\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (720): wildchar rule \u2018/jsp-examples/*=wlb\u2019 source \u2018uriworkermap\u2019 was added\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (720): wildchar rule \u2018/servlets-examples/*=wlb\u2019 source \u2018uriworkermap\u2019 was added\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (720): wildchar rule \u2018/examples/*=wlb\u2019 source \u2018uriworkermap\u2019 was added\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (720): wildchar rule \u2018/servlets-examples/*.jpeg=wlb\u2019 source \u2018uriworkermap\u2019 was added\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (729): exact rule \u2018/jkmanager=jkstatus\u2019 source \u2018uriworkermap\u2019 was added\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (171): uri map dump after file load: index=0 file=\u2019C:\\Tomcat\\conf\\uriworkermap.properties\u2019 reject_unsafe=0 reload=60 modified=1188757932 checked=1260297600\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (176): generation 0: size=0 nosize=0 capacity=0\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (176): generation 1: size=7 nosize=1 capacity=8\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (186): NEXT (1) map #0: uri=/servlets-examples/*.jpeg worker=wlb context=/servlets-examples/*.jpeg source=uriworkermap type=Unmount Wildchar len=25\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (186): NEXT (1) map #1: uri=/servlets-examples/* worker=wlb context=/servlets-examples/* source=uriworkermap type=Wildchar len=20\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (186): NEXT (1) map #2: uri=/jsp-examples/* worker=wlb context=/jsp-examples/* source=uriworkermap type=Wildchar len=15\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (186): NEXT (1) map #3: uri=/examples/* worker=wlb context=/examples/* source=uriworkermap type=Wildchar len=11\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (186): NEXT (1) map #4: uri=/manager/* worker=wlb context=/manager/* source=uriworkermap type=Wildchar len=10\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (186): NEXT (1) map #5: uri=/admin/* worker=wlb context=/admin/* source=uriworkermap type=Wildchar len=8\n    [Tue Dec 08 19:40:00.515 2009] [2400:2684] [debug] jk_uri_worker_map.c (186): NEXT (1) map #6: uri=/jkmanager worker=jkstatus context=/jkmanager source=uriworkermap type=Exact len=10\n    [Tue Dec 08 19:40:00.531 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018worker.list\u2019 with value \u2018wlb,jkstatus\u2019 to map.\n    [Tue Dec 08 19:40:00.531 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018worker.ajp13w.type\u2019 with value \u2018ajp13\u2032 to map.\n    [Tue Dec 08 19:40:00.531 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018worker.ajp13w.host\u2019 with value \u2018localhost\u2019 to map.\n    [Tue Dec 08 19:40:00.546 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018worker.ajp13w.port\u2019 with value \u20188009\u2032 to map.\n    [Tue Dec 08 19:40:00.546 2009] [2400:2684] [debug] jk_map.c (491): Adding property \u2018worker.wlb.type\u2019 with value \u2018lb\u2019 to map.\n    [Tue Dec 08 19:40:00.546 2009] [2400:2684] [error] jk_map.c (404): The attribute \u2018worker.wlb.balance_worker\u2019 is not supported - please check the documentation for the supported attributes.\n    [Tue Dec 08 19:40:00.546 2009] [2400:2684] [emerg] jk_isapi_plugin.c (2553): Unable to read worker file C:\\Tomcat\\conf\\workers.properties.\n\n    \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2013\n\n    IIS website log:\n    #Fields: date time s-sitename s-computername s-ip cs-method cs-uri-stem cs-uri-query s-port cs-username c-ip cs-version cs(User-Agent) cs(Cookie) cs(Referer) cs-host sc-status sc-substatus sc-win32-status sc-bytes cs-bytes time-taken\n    2009-12-08 18:40:00 W3SVC1763425915 ATLANTIS 192.168.2.101 GET / - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 380 421\n    2009-12-08 18:40:03 W3SVC1763425915 ATLANTIS 192.168.2.101 GET / - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 406 0\n    2009-12-08 18:40:03 W3SVC1763425915 ATLANTIS 192.168.2.101 GET / - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 406 0\n    2009-12-08 18:40:03 W3SVC1763425915 ATLANTIS 192.168.2.101 GET / - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 406 0\n    2009-12-08 18:40:03 W3SVC1763425915 ATLANTIS 192.168.2.101 GET / - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 406 0\n    2009-12-08 18:40:03 W3SVC1763425915 ATLANTIS 192.168.2.101 GET / - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 406 0\n    2009-12-08 18:40:03 W3SVC1763425915 ATLANTIS 192.168.2.101 GET / - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 406 0\n    2009-12-08 18:40:04 W3SVC1763425915 ATLANTIS 192.168.2.101 GET / - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 406 0\n    2009-12-08 18:40:10 W3SVC1763425915 ATLANTIS 192.168.2.101 GET /test.php - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 388 0\n    2009-12-08 18:40:10 W3SVC1763425915 ATLANTIS 192.168.2.101 GET /test.php - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 388 0\n    2009-12-08 18:41:02 W3SVC1763425915 ATLANTIS 192.168.2.101 GET /servlets-examples/ - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 398 0\n    2009-12-08 18:41:02 W3SVC1763425915 ATLANTIS 192.168.2.101 GET /servlets-examples/ - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 - - atlantis 500 0 1 271 398 0\n    2009-12-08 18:41:15 W3SVC1763425915 ATLANTIS 192.168.2.101 GET /jsp-examples/ - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 JSESSIONID=8521F125099C2459293A111F5ACD429E - atlantis 500 0 1 271 446 0\n    2009-12-08 18:41:15 W3SVC1763425915 ATLANTIS 192.168.2.101 GET /jsp-examples/ - 80 - 192.168.2.100 HTTP/1.1 Mozilla/5.0+(Windows;+U;+Windows+NT+5.1;+de;+rv:1.9.1.5)+Gecko/20091102+Firefox/3.5.5 JSESSIONID=8521F125099C2459293A111F5ACD429E - atlantis 500 0 1 271 446 0\n\n    i hope some one can"}, {"count": 2, "tags": [], "text": "It looks like you're getting errors loading workers.properties, which would probably result in a broken configuration (and thus would be unable to serve some/all requests).\nThe Tomcat Documentation and Users list would be the place to go to figure out how to fix this.", "is_private": false, "bug_id": 47806, "id": 133291, "time": "2010-01-03T23:48:45Z", "creator": "Tim.Whittington@orionhealth.com", "creation_time": "2010-01-03T23:48:45Z", "attachment_id": null}]