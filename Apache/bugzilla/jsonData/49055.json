[{"count": 0, "attachment_id": 25235, "creator": "sven_victoria@deltalloyd.nl", "is_private": false, "id": 135908, "time": "2010-04-06T15:52:06Z", "bug_id": 49055, "creation_time": "2010-04-06T15:52:06Z", "tags": [], "text": "Created attachment 25235\nfiles used to reproduce bug\n\nWhen trying to set svg path attributes via a stylesheet, the resulting shape is only displayed when the pdf is created from the intermediate fo file.\nIf I skip the fo part and create the pdf directly the shape is not displayed. Same goes for the internal (-awt) viewer.\n\nIn the stylesheet the following lines causing the problem are:\n\n<fo:instream-foreign-object>\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.5cm\" height=\"1.5cm\">\n    <polygon style=\"fill: #cccccc;\">\n      <xsl:attribute name=\"points\"><xsl:value-of select=\"points\"/></xsl:attribute>\n    </polygon>\n  </svg>\n</fo:instream-foreign-object>\n\nIn short (files are attached):\n\n$ fop -xml in.xml -xsl test.xsl -pdf out.pdf \n\nDoes not create correct output (but no warning/errors are given)\n\n$ fop -xml in.xml -xsl test.xsl -foout out.fo\n$ fop out.fo -pdf out.pdf\n\ndoes work."}, {"count": 1, "tags": [], "creator": "adelmelle@apache.org", "attachment_id": null, "id": 135912, "time": "2010-04-06T17:04:01Z", "bug_id": 49055, "creation_time": "2010-04-06T17:04:01Z", "is_private": false, "text": "(In reply to comment #0)\n\n> \n> When trying to set svg path attributes via a stylesheet, the resulting shape is\n> only displayed when the pdf is created from the intermediate fo file.\n> If I skip the fo part and create the pdf directly the shape is not displayed.\n> Same goes for the internal (-awt) viewer.\n\nThis is not a FOP issue.\nThe cause is that you are creating the attribute in no-namespace. If the intermediate FO is serialized and parsed again, that attribute is interpreted to be in the namespace of the parent element. \nHowever, if the SAX events are triggered directly onto the target ContentHandler you get the effect as if the input were:\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.5cm\" height=\"1.5cm\">\n   <polygon style=\"fill: #cccccc;\" nn:points=\"...\" xmlns:nn=\"\"></polygon>\n</svg>\n\nNotice that the points attribute is in a different namespace than the polygon element, since the XSLT processor is not aware of the changed mapping for the default namespace in the literal result tree fragment.\n\nIIC, the recommended solution to get the result you desire, is to change your XSLT to look like:\n\n<xsl:stylesheet ... xmlns:svg=\"http://www.w3.org/2000/svg\">\n...\n<svg:svg width=\"1.5cm\" height=\"1.5cm\">\n   <svg:polygon style=\"fill: #cccccc;\">\n      <xsl:attribute name=\"svg:points\"><xsl:value-of select=\"points\"/></xsl:attribute>\n   </svg:polygon>\n</svg:svg>\n\nAlternatively, if you really do not want to declare the SVG namespace on the xsl:stylesheet element, the following would also work:\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1.5cm\" height=\"1.5cm\">\n   <polygon style=\"fill: #cccccc;\">\n      <xsl:attribute name=\"points\" namespace=\"http://www.w3.org/2000/svg\">\n         <xsl:value-of select=\"points\"/>\n      </xsl:attribute>\n   </polygon>\n</svg>"}, {"count": 2, "tags": [], "text": "thanks for the explanation. I will try your suggestions", "is_private": false, "bug_id": 49055, "id": 135918, "time": "2010-04-06T22:21:47Z", "creator": "sven_victoria@deltalloyd.nl", "creation_time": "2010-04-06T22:21:47Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "sven_victoria@deltalloyd.nl", "attachment_id": 25241, "is_private": false, "id": 135932, "time": "2010-04-07T13:41:30Z", "bug_id": 49055, "creation_time": "2010-04-07T13:41:30Z", "text": "Created attachment 25241\n2nd testcase"}, {"count": 4, "tags": [], "bug_id": 49055, "attachment_id": null, "text": "I have tried both suggestions but could not get the desired result.\nThe first one seems to generate the correct fo but neither direct or indirectly can I produce the correct output.\n\nWith the second option I get a ns0:points in my fo, which seems odd to me.\n\nTestcases are attached as 2nd attachement.", "id": 135933, "time": "2010-04-07T13:44:18Z", "creator": "sven_victoria@deltalloyd.nl", "creation_time": "2010-04-07T13:44:18Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 49055, "attachment_id": null, "text": "The first version is correct and works for me with FOP 1.0 and even FOP 0.95. Which Java version do you use? You may have to update the XSLT processor that comes with it.\n\nHTH,\nVincent", "id": 141951, "time": "2010-11-23T14:45:11Z", "creator": "vhennebert@gmail.com", "creation_time": "2010-11-23T14:45:11Z", "is_private": false}, {"count": 6, "tags": [], "text": "batch transition to closed for remaining resolved bugs", "is_private": false, "bug_id": 49055, "id": 156393, "time": "2012-04-01T13:42:56Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T13:42:56Z", "attachment_id": null}]