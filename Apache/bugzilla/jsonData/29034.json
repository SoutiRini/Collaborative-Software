[{"count": 0, "tags": [], "creator": "thierry.beigbeder@free.fr", "attachment_id": null, "id": 57542, "time": "2004-05-17T11:52:09Z", "bug_id": 29034, "creation_time": "2004-05-17T11:52:09Z", "is_private": false, "text": "The WebDAV MKCOL method returns FORBIDDEN instead of CONFLICT when the parent \ncollection or one of its ancestors does not exist.\n\nThe issue appears quickly when using the Eclipse IDE release 2.1 with the \nFTP/DAV extensions: when uploading a new project with folders/sub-folders on \nthe target WebDAV site, the Eclipse DAV client checks for CONFLICT status in \norder to create parent collections. Here it gets a FORBIDDEN error which is \nsimply displayed.\n\nI have tested the following workaround with success, but it is probably not \nclean, as I just begin to discover Apache's design. In the file mod_dav.c, \nfunction dav_method_mkcol, I have inserted the following lines after success of \ndav_auto_checkout:\n/* check state for parent */\nerr = (*resource->hooks->get_parent_resource)(resource,&parent_resource);\nif(err == NULL && parent_resource != NULL && !parent_resource->exists) {\n    return dav_error_response(r, HTTP_CONFLICT,\n        \"Cannot create a collection until one or more intermediate collections \nhave been created.\");\n}\n\nWith this workaround everything seems to work well and quickly between Eclipse \nand Apache."}, {"count": 1, "tags": [], "bug_id": 29034, "attachment_id": null, "id": 57548, "time": "2004-05-17T13:43:01Z", "creator": "jorton@redhat.com", "creation_time": "2004-05-17T13:43:01Z", "is_private": false, "text": "This was fixed on HEAD recently:\n\nhttp://cvs.apache.org/viewcvs.cgi/httpd-2.0/modules/dav/fs/repos.c?r1=1.80&r2=1.81\n\nI'll propose it for backport to 2.0 if it causes real interop issues.  Thanks a\nlot for the report."}]