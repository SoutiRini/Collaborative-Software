[{"count": 0, "tags": [], "bug_id": 152, "attachment_id": null, "text": "<H1>Remarks: this is correction of ID=181</H1>\r\n<P>\r\nThere are problems with cooperate of session.invalidate() and session.putValue() methods with Tomcat 3.2 beta 3.\r\n<P>\r\nWith Tomcat 3.1 there are no problems.\r\n<P>\r\nWith Tomcat 3.2 beta 3 they cause\r\n\"java.lang.IllegalStateException: getAttribute: Session already invalidated\"!\r\n<P>\r\nOr more exactly, if I use session.invalidate (see \"The Code\"), then session.putValue cause this exception.\r\nIf I do not use session.invalidate, session.putValue works normaly. But I want to invalidate this session!\r\n<P>\r\nThe code:<BR>\r\n--------\r\n<P>\r\nI use this code at my JSP page (mesto.jsp):\r\n<P> session.invalidate();\r\n<BR> session = request.getSession (true);\r\n<BR> beanX=new Vector();\r\n<BR> session.putValue(\"beanX\", beanX);\r\n<P>\r\n Here is the exception:<BR>\r\n ---------------------<P>\r\njava.lang.IllegalStateException: setAttribute: Session already invalidated\r\nat org.apache.tomcat.session.StandardSession.setAttribute\r\n(StandardSession.java:713)\r\nat org.apache.tomcat.session.StandardSession.putValue\r\n(StandardSession.java:629)\r\nat org.apache.tomcat.facade.HttpSessionFacade.putValue\r\n(HttpSessionFacade.java:147)\r\nat _0002fmesto_0002ejspmesto_jsp_3._jspService\r\n(_0002fmesto_0002ejspmesto_jsp_3.java, Compiled Code)\r\nat org.apache.jasper.runtime.HttpJspBase.service (HttpJspBase.java:119)\r\nat javax.servlet.http.HttpServlet.service (HttpServlet.java:853)\r\nat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\r\n(JspServlet.java:177)\r\nat org.apache.jasper.servlet.JspServlet.serviceJspFile\r\n(JspServlet.java:309)\r\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java, Compiled\r\nCode)\r\nat javax.servlet.http.HttpServlet.service (HttpServlet.java:853)\r\nat org.apache.tomcat.core.ServletWrapper.doService\r\n(ServletWrapper.java:387)\r\nat org.apache.tomcat.core.Handler.service(Handler.java:263)\r\nat org.apache.tomcat.core.ServletWrapper.service (ServletWrapper.java:371)\r\nat org.apache.tomcat.core.ContextManager.internalService\r\n(ContextManager.java:749)\r\nat org.apache.tomcat.core.ContextManager.service (ContextManager.java:695)\r\nat\r\norg.apache.tomcat.service.http.HttpConnectionHandler.processConnection(HttpConnectionHandler.java:207)\r\nat org.apache.tomcat.service.TcpWorkerThread.runIt (PoolTcpEndpoint.java,\r\nCompiled Code)\r\nat org.apache.tomcat.util.ThreadPool$ControlRunnable.run (ThreadPool.java,\r\nCompiled Code)\r\nat java.lang.Thread.run (Thread.java, Compiled Code)\r\n<P><P>\r\n<B>Mirek.Subrt@Mirek.Subrt@intax.cz</B>\r\n", "id": 132, "time": "2000-09-29T07:23:52Z", "creator": "dev@tomcat.apache.org", "creation_time": "2000-09-29T07:23:52Z", "is_private": false}, {"count": 1, "tags": [], "creator": "marc.saegesser@apropos.com", "text": "Seems to already be fixed in 3.2.2 but the bug report was never closed.", "id": 993, "time": "2001-03-05T11:51:28Z", "bug_id": 152, "creation_time": "2001-03-05T11:51:28Z", "is_private": false, "attachment_id": null}]