[{"count": 0, "tags": [], "creator": "yves.martin@elca.ch", "text": "When creating my own task, I tried to get Target.getLocation information but it\nis never set. May you please include the following patch to set Target location\nwhen parsing the build file with ProjectHelper2. Thank you in advance. \n\n *** ProjectHelper2.java.org     2004-07-16 09:57:32.000000000 +0200\n--- ProjectHelper2.java 2004-11-17 10:20:42.139829000 +0100\n***************\n*** 121,126 ****\n--- 121,133 ----\n                  newCurrent.setProject(project);\n                  newCurrent.setName(\"\");\n                  context.setCurrentTarget(newCurrent);\n+                 if (context.getLocator() != null) {\n+                     Location location =\n+                         new Location(context.getLocator().getSystemId(),\n+                                      context.getLocator().getLineNumber(),\n+                                      context.getLocator().getColumnNumber());\n+                     newCurrent.setLocation(location);\n+                 }\n                  parse(project, source, new RootHandler(context, mainHandler));\n                  newCurrent.execute();\n              } finally {\n***************\n*** 758,763 ****\n--- 765,777 ----\n              Target target = new Target();\n              target.setProject(project);\n              context.addTarget(target);\n+             if (context.getLocator() != null) {\n+                 Location location =\n+                     new Location(context.getLocator().getSystemId(),\n+                                  context.getLocator().getLineNumber(),\n+                                  context.getLocator().getColumnNumber());\n+                 target.setLocation(location);\n+             }\n   \n              for (int i = 0; i < attrs.getLength(); i++) {\n                  String attrUri = attrs.getURI(i);", "id": 67000, "attachment_id": null, "bug_id": 32267, "creation_time": "2004-11-17T10:43:33Z", "time": "2004-11-17T10:43:33Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 32267, "text": "The second part of the patch (target location) is already in\nCVS.\n\nThe first part (default target for imported files) will not work as \nthe context locator is not yet set correctly (id is null and line\nnumber is -1).\n\n- One also needs to do default target for main file (in this case\nthe context locator is null).\n\nChanging the title to reflect the sub bug.\n", "id": 67004, "time": "2004-11-17T11:16:18Z", "creator": "peterreilly@apache.org", "creation_time": "2004-11-17T11:16:18Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 32267, "attachment_id": null, "id": 67122, "time": "2004-11-18T10:51:01Z", "creator": "peterreilly@apache.org", "creation_time": "2004-11-18T10:51:01Z", "is_private": false, "text": "Ok, I have committed a change to set the location for the default target.\nNow, why do you need the location of the target?. You should have the\nlocation of the task that is creating your task."}]