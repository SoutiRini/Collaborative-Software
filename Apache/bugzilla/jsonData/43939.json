[{"count": 0, "tags": [], "bug_id": 43939, "text": "It appears that mod_deflate is causing virtual includes which rely on \"default\"\nURLs to fail.\n\nAn example is this:\n\n<!--#include virtual=\"/test/index.html\"--> - Works as expected\n\n<!--#include virtual=\"/test/\"--> - Entire page doesn't load (suspected apache crash)\n\nNothing is logged in the apache error or access logs when this event occurs. \nThis problem also effects the php virtual() function in the exact same way. \nAlso, multiviews is not enabled.\n\nIf Deflate is disabled on the including file type (in this case .shtml) the\ninclude works fine.\n\nHere's my exact mod_deflate for reference:\n\n#\n# Required modules: mod_deflate\n#\n# Please see the documentation at\n# <URL:http://httpd.apache.org/docs/2.2/mod/mod_deflate.html>\n# for further details before you try to setup deflate module.\n#\n\n<Location />\n# Insert filter\nSetOutputFilter DEFLATE\n\n# Netscape 4.x has some problems...\nBrowserMatch ^Mozilla/4 gzip-only-text/html\n\n# Netscape 4.06-4.08 have some more problems\nBrowserMatch ^Mozilla/4\\.0[678] no-gzip\n\n# MSIE masquerades as Netscape, but it is fine\nBrowserMatch \\bMSIE !no-gzip !gzip-only-text/html\n\n# Don't compress images and other uncompressible content\nSetEnvIfNoCase Request_URI \\\n \\.(?:gif|jpe?g|png|rar|zip|exe|mov)$ no-gzip dont-vary\n\n# Make sure proxies don't deliver the wrong content\nHeader append Vary User-Agent env=!dont-vary\n\n</Location>", "id": 110989, "time": "2007-11-22T07:30:29Z", "creator": "keefe@techwarepc.com", "creation_time": "2007-11-22T07:30:29Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 43939, "attachment_id": null, "text": "This looks like a duplicate of Bug 17629.  Leaving open in case having it filed\nunder mod_deflate improves the chances of noticing it at a time of round tuits.", "id": 110993, "time": "2007-11-22T09:25:20Z", "creator": "nick@webthing.com", "creation_time": "2007-11-22T09:25:20Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 43939, "text": "I am not sure if this is really Bug 17629 as\n<!--#include virtual=\"/test/index.html\"--> works (which is a subrequest).\n\nHaving \n\n<!--#include virtual=\"/test/\"--> \n\nnot working smells to me like a problem with (fast) internal redirects or\nmod_dir and not with subrequests.\nWe are losing our content filters (and thus mod_deflate) because of the\nap_sub_req_lookup_uri call in mod_dir.c:fixup_dir with NULL as last parameter.", "id": 110996, "time": "2007-11-22T13:03:00Z", "creator": "rpluem@apache.org", "creation_time": "2007-11-22T13:03:00Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 43939, "attachment_id": null, "is_private": false, "id": 137429, "time": "2010-06-08T05:35:37Z", "creator": "jorton@redhat.com", "creation_time": "2010-06-08T05:35:37Z", "text": "So far as I can tell this particular bug was fixed on the trunk in the set of commits: r620133 r724515 r725077\n\nA test case reproducing the configuration works fine at least"}, {"count": 4, "tags": [], "creator": "rpluem@apache.org", "is_private": false, "text": "Backported to 2.2.x as r988400.", "id": 139405, "time": "2010-08-24T02:46:35Z", "bug_id": 43939, "creation_time": "2010-08-24T02:46:35Z", "attachment_id": null}]