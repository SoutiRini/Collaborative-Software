[{"count": 0, "tags": [], "creator": "apache@studio1.com.au", "attachment_id": null, "id": 93183, "time": "2006-09-08T06:52:33Z", "bug_id": 40441, "creation_time": "2006-09-08T06:52:33Z", "is_private": false, "text": "The current mod_vhost_alias does not intelligently handle 'www.'. A simple example:\n\nRequest: www.example.com  \nConfig: VirtualDocumentRoot /webhome/%1.1/%0\nResult: /webhome/w/www.example.com\n\nRequest: example.com  \nConfig: VirtualDocumentRoot /webhome/%1.1/%0\nResult: /webhome/e/example.com\n\nA messy example, involving *wildcard* dns subdomains.\n\nRequest: testing.example.com  \nConfig: VirtualDocumentRoot /webhome/%1.1/%0\nResult: /webhome/t/testing.example.com\n\nThe common solution has been to create symlinks. Eg, between e/example.com and\nw/www.example.com. This is a crude solution due to requiring additional symlink\nlookups and manual or scripted maintenance of such symlinks - which we'd all\nagree is messy.\n\nAttached is a patch that allows you to use a flag called 'VirtualStripWWW' to\nallow mod_vhost_alias to strip any occurences of 'www.'. The default is 'on' -\nprobably a topic of discussion. \n\nThe result is you do not need to have symlinks to maintain subdomains. \n\nThe patch also allows for the scenario where you have configured dynamic\nsubdomains for a given domain and are required to show content from a directory\ncorrelating to the subdomain. Simply use a seperate virtualhost for the domain,\nand whatever servername you use it will not be stripped, which is very useful\nwhen you may want to keep the 'www' (eg if you have public/www,\npublic/othersubdomain, public/yetanothersubdomain).\n\nHopefully people find it useful.\n\nRegards,\nMark"}, {"count": 1, "attachment_id": 18839, "creator": "apache@studio1.com.au", "text": "Created attachment 18839\nPatch for mod_vhost_alias - from trunk\n\nThe diff was done on a svn checkout of trunk...", "id": 93184, "time": "2006-09-08T06:53:59Z", "bug_id": 40441, "creation_time": "2006-09-08T06:53:59Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 40441, "attachment_id": null, "text": "(In reply to comment #0)\n\nIt also allows for servername coming from mod_proxy.", "id": 93185, "time": "2006-09-08T06:55:02Z", "creator": "apache@studio1.com.au", "creation_time": "2006-09-08T06:55:02Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 40441, "text": "*** Bug 29260 has been marked as a duplicate of this bug. ***", "id": 108581, "time": "2007-09-25T11:14:19Z", "creator": "slive@apache.org", "creation_time": "2007-09-25T11:14:19Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "a121996@rmqkr.net", "text": "Could some additional syntax be implemented for this command?\n\nIn addition to simply *copying* part of the server name or IP into the document root, it would be useful if you could INSTEAD choose to select between several predefined document roots based on tests applied to the server name.\n\ni.e. something like:\n\n%1=subdomain1: /webhome/firstsubdomain\n%1=subdomain2: /otherplace/secondsubdomain\ndefault:       /webhome/www\n\n\nSo the urls \"subdomain1.example.com\" and \"subdomain2.example.com\" would map to /webhome/firstsubdomain and /otherplace/secondsubdomain respectively, whilst anything else (e.g. example.com, www.example.com, xyz.example.com) would map to /webhome/www.\n\n\nThis would give you the flexibility to give specific subdomains separate document roots in the filesystem, without locking the filesystem directory structure to the domain name.  It also ensures that only known, prespecified directories get used as the document root (which might help avoid some security problems if the server's directory structure is set up carelessly).", "id": 163454, "time": "2012-11-15T11:34:20Z", "bug_id": 40441, "creation_time": "2012-11-15T11:34:20Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "a121996@rmqkr.net", "text": "Of course you could combine this with the existing approach:\n\n.\n.\n.\ndefault:       /webhome/www/%1.1/%0", "id": 163456, "time": "2012-11-15T11:40:51Z", "bug_id": 40441, "creation_time": "2012-11-15T11:40:51Z", "is_private": false, "attachment_id": null}]