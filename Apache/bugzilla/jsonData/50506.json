[{"count": 0, "tags": [], "creator": "y.nagaraj.mca07@gmail.com", "text": "I had a windows batch file and it contains :\nbuild.bat :\n  cls\n  ant -f build.xml\n\n\ntest.xml :\n\n<project name=\"test\" default=\"run\">\n<target name=\"run\">\n        <exec executable=\"cmd.exe\" failonerror=\"true\" osfamily=\"windows\" >\n                <arg line=\"/c build.bat\" />\n        </exec>\n        <echo message=\"test\" />\n</target>\n</project>\n\nthe below is the output, when I run ant -f test.xml :\n\nBuildfile: E:\\Test\\test.xml\n\nrun:\n     [exec]\n     [exec] E:\\Test>cls\n     [exec] ?\n     [exec] E:\\Test>ant -f build.xml\n     [exec] Buildfile: E:\\Test\\build.xml\n     [exec]\n     [exec] init:\n     [exec]\n     [exec] clean_all:\n     [exec]    [delete] Deleting directory E:\\Test\\target\n     [exec]     [mkdir] Created dir: E:\\Test\\target\n     [exec]\n     [exec] prepareTobuild:\n     [exec]     [mkdir] Created dir: E:\\Test\\target\\lib\n     [exec]     [mkdir] Created dir: E:\\Test\\target\\classes\n     [exec]     [mkdir] Created dir: E:\\Test\\target\\classes\\resources\n     [exec]     [mkdir] Created dir: E:\\Test\\target\\samples\n     [exec]     [mkdir] Created dir: E:\\Test\\target\\samples\\src\n     [exec]     [mkdir] Created dir: E:\\Test\\target\\samples\\data\n     [exec]\n     [exec] out_genjaxb:\n     [exec]      [echo] Compiling the schema...\n     [exec]       [xjc] Compiling file:/E:/Test/build/test.xsd\n     [exec]\n     [exec] BUILD FAILED\n     [exec] E:\\Test\\build.xml:1\n84: java.lang.NoClassDefFoundError: javax.xml.bind.Element\n     [exec]     at com.sun.tools.xjc.reader.xmlschema.cs.DefaultClassBinder.clas\ns$(DefaultClassBinder.java:112)\n     [exec]     at com.sun.tools.xjc.reader.xmlschema.cs.DefaultClassBinder.elem\nentDecl(DefaultClassBinder.java:112)\n     [exec]     at com.sun.xml.xsom.impl.ElementDecl.apply(ElementDecl.java:182)\n\n     [exec]     at com.sun.tools.xjc.reader.xmlschema.cs.ClassSelector._bindToCl\nass(ClassSelector.java:219)\n     [exec]     at com.sun.tools.xjc.reader.xmlschema.cs.ClassSelector.bindToTyp\ne(ClassSelector.java:184)\n     [exec]     at com.sun.tools.xjc.reader.xmlschema.BGMBuilder.populate(BGMBui\nlder.java:264)\n     [exec]     at com.sun.tools.xjc.reader.xmlschema.BGMBuilder.buildContents(B\nGMBuilder.java:231)\n     [exec]     at com.sun.tools.xjc.reader.xmlschema.BGMBuilder._build(BGMBuild\ner.java:120)\n     [exec]     at com.sun.tools.xjc.reader.xmlschema.BGMBuilder.build(BGMBuilde\nr.java:84)\n     [exec]     at com.sun.tools.xjc.GrammarLoader.annotateXMLSchema(GrammarLoad\ner.java:408)\n     [exec]     at com.sun.tools.xjc.GrammarLoader.load(GrammarLoader.java:127)\n     [exec]     at com.sun.tools.xjc.GrammarLoader.load(GrammarLoader.java:76)\n     [exec]     at com.sun.tools.xjc.XJCTask._doXJC(XJCTask.java:356)\n     [exec]     at com.sun.tools.xjc.XJCTask.doXJC(XJCTask.java:305)\n     [exec]     at com.sun.tools.xjc.XJCTask.execute(XJCTask.java:245)\n     [exec]     at org.apache.tools.ant.UnknownElement.execute(UnknownElement.ja\nva:291)\n     [exec]     at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n     [exec]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMet\nhodAccessorImpl.java:25)\n     [exec]     at java.lang.reflect.Method.invoke(Method.java:585)\n     [exec]     at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchU\ntils.java:106)\n     [exec]     at org.apache.tools.ant.Task.perform(Task.java:348)\n     [exec]     at org.apache.tools.ant.Target.execute(Target.java:390)\n     [exec]     at org.apache.tools.ant.Target.performTasks(Target.java:411)\n     [exec]     at org.apache.tools.ant.Project.executeSortedTargets(Project.jav\na:1397)\n     [exec]     at org.apache.tools.ant.Project.executeTarget(Project.java:1366)\n\n     [exec]     at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(De\nfaultExecutor.java:41)\n     [exec]     at org.apache.tools.ant.Project.executeTargets(Project.java:1249\n)\n     [exec]     at org.apache.tools.ant.Main.runBuild(Main.java:801)\n     [exec]     at org.apache.tools.ant.Main.startAnt(Main.java:218)\n     [exec]     at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)\n     [exec]     at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)\n     [exec]\n     [exec] Total time: 1 second\n     [exec]\n     [echo] test\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n\nThe exec task and build has to fail since the build.bat execution fails.\nBut, the same is not happening, instead build and exec task is passing.", "id": 142888, "time": "2010-12-21T08:29:11Z", "bug_id": 50506, "creation_time": "2010-12-21T08:29:11Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "antoine@apache.org", "text": "Most likely you should change build.bat to do this\n\ncall ant -f build.xml\n\ninstead of just\n\nant -f build.xml\n\nwith the keyword call your build.bat will wait until ant.bat has finished and capture its error level.\n\nIf this does not work just right on your version of Windows you can add another line right after\n\ncall ant -f build.xml\nexit /B %errorlevel%", "id": 142891, "time": "2010-12-21T14:23:11Z", "bug_id": 50506, "creation_time": "2010-12-21T14:23:11Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 50506, "text": "Most likely you should change build.bat to do this\n\ncall ant -f build.xml\n\ninstead of just\n\nant -f build.xml\n\nwith the keyword call your build.bat will wait until ant.bat has finished and capture its error level.\n\nIf this does not work just right on your version of Windows you can add another line right after\n\ncall ant -f build.xml\nexit /B %errorlevel%", "id": 142892, "time": "2010-12-21T14:23:36Z", "creator": "antoine@apache.org", "creation_time": "2010-12-21T14:23:36Z", "tags": [], "is_private": false}]