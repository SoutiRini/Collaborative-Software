[{"count": 0, "tags": [], "creator": "ryan_peter@bah.com", "is_private": false, "id": 42585, "creation_time": "2003-08-11T22:39:05Z", "time": "2003-08-11T22:39:05Z", "bug_id": 22328, "text": "With the exception of choosing to make it an NT/2K service, I performed a \nvanilla install of Tomcat 4.1.27 on MS Windows 2K Server, build 5.00.2195, SP 4 \nwith J2SDK 1.4.2 build 1.4.2-b28 and MS SQLServer 2K SP 3a. I then stopped the \nservice, changed it to a manual service, and unzipped 4.1.27-hotfix-22096. I \nthen restarted the Tomocat service via the Services panel. Initially, the admin \ntool worrks fine. If I uncomment the AccessLogValve for the default virtual \nhost in the conf/server.xml file, I receive the following error in the \nlogs/stdout.log file once I log into the admin tool:\n\nBootstrap: Create Catalina server\nBootstrap: Starting service\nStarting service Tomcat-Standalone\nApache Tomcat/4.1.27\nBootstrap: Service started\njavax.management.ReflectionException: Cannot find method getClassName with this \nsignaturenested exception is java.lang.NoSuchMethodException: \norg.apache.catalina.valves.AccessLogValve.getClassName()\njava.lang.NoSuchMethodException: \norg.apache.catalina.valves.AccessLogValve.getClassName()\n\tat java.lang.Class.getMethod(Class.java:978)\n\tat org.apache.commons.modeler.BaseModelMBean.invoke\n(BaseModelMBean.java:372)\n\tat org.apache.commons.modeler.BaseModelMBean.getAttribute\n(BaseModelMBean.java:238)\n\tat mx4j.server.interceptor.InvokerMBeanServerInterceptor.getAttribute\n(InvokerMBeanServerInterceptor.java:242)\n\tat mx4j.server.interceptor.DefaultMBeanServerInterceptor.getAttribute\n(DefaultMBeanServerInterceptor.java:138)\n\tat mx4j.server.interceptor.SecurityMBeanServerInterceptor.getAttribute\n(SecurityMBeanServerInterceptor.java:101)\n\tat mx4j.server.interceptor.DefaultMBeanServerInterceptor.getAttribute\n(DefaultMBeanServerInterceptor.java:138)\n\tat mx4j.server.interceptor.DefaultMBeanServerInterceptor.getAttribute\n(DefaultMBeanServerInterceptor.java:138)\n\tat \nmx4j.server.interceptor.ContextClassLoaderMBeanServerInterceptor.getAttribute\n(ContextClassLoaderMBeanServerInterceptor.java:198)\n\tat mx4j.server.MBeanServerImpl.getAttribute(MBeanServerImpl.java:1237)\n\tat org.apache.webapp.admin.Lists.getValves(Lists.java:549)\n\tat org.apache.webapp.admin.Lists.getValves(Lists.java:600)\n\tat org.apache.webapp.admin.TomcatTreeBuilder.getValves\n(TomcatTreeBuilder.java:542)\n\tat org.apache.webapp.admin.TomcatTreeBuilder.getContexts\n(TomcatTreeBuilder.java:336)\n\tat org.apache.webapp.admin.TomcatTreeBuilder.getHosts\n(TomcatTreeBuilder.java:292)\n\tat org.apache.webapp.admin.TomcatTreeBuilder.getServices\n(TomcatTreeBuilder.java:219)\n\tat org.apache.webapp.admin.TomcatTreeBuilder.getServers\n(TomcatTreeBuilder.java:180)\n\tat org.apache.webapp.admin.TomcatTreeBuilder.buildTree\n(TomcatTreeBuilder.java:133)\n\tat org.apache.webapp.admin.SetUpTreeAction.perform\n(SetUpTreeAction.java:165)\n\tat org.apache.struts.action.Action.execute(Action.java:420)\n\tat org.apache.struts.action.RequestProcessor.processActionPerform\n(RequestProcessor.java:484)\n\tat org.apache.struts.action.RequestProcessor.process\n(RequestProcessor.java:274)\n\tat org.apache.struts.action.ActionServlet.process\n(ActionServlet.java:1482)\n\tat org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:553)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2416)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:577)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:601)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:565)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 22328, "attachment_id": null, "id": 43481, "time": "2003-08-29T18:37:24Z", "creator": "bogdan@klosek.de", "creation_time": "2003-08-29T18:37:24Z", "is_private": false, "text": "Der Fehler passiert, wenn man die Valve\norg.apache.catalina.valves.AccessLogValve \u00f6ffnet. Leider, kenne ich noch keine\nAbhilfe, au\u00dfer der, die Valve zu machen.\nAusgerechnet aber gerade diese Valve ist \u00e4u\u00dferst wichtig!\n                                                                                \njava.lang.NoSuchMethodException:\norg.apache.catalina.valves.AccessLogValve.getClassName()\n        at java.lang.Class.getMethod0(Class.java:1756)\n        at java.lang.Class.getMethod(Class.java:963)\n        at org.apache.commons.modeler.BaseModelMBean.invoke(BaseModelMBean.java:372)\n        at\norg.apache.commons.modeler.BaseModelMBean.getAttribute(BaseModelMBean.java:238)\n        at\nmx4j.server.interceptor.InvokerMBeanServerInterceptor.getAttribute(InvokerMBeanServerInterceptor.java:242)\n.........\n"}, {"count": 2, "tags": [], "bug_id": 22328, "attachment_id": null, "id": 43501, "creation_time": "2003-08-31T00:02:56Z", "time": "2003-08-31T00:02:56Z", "creator": "amyroh@apache.org", "text": "This is fixed and will be available in the next release.  You can add missing\nclassName property for AccessLogValve mbean description as a patch.\n\n  <mbean\t name=\"AccessLogValve\"\n  \t    className=\"org.apache.catalina.mbeans.ClassNameMBean\"\n\t  description=\"Valve that generates a web server access log\"\n               domain=\"Catalina\"\n                group=\"Valve\"\n                 type=\"org.apache.catalina.valves.AccessLogValve\">", "is_private": false}, {"count": 3, "tags": [], "bug_id": 22328, "attachment_id": 8428, "id": 45004, "time": "2003-10-02T12:25:35Z", "creator": "davidw@gpsoft.co.uk", "creation_time": "2003-10-02T12:25:35Z", "is_private": false, "text": "Created attachment 8428\nbeans xml config"}, {"count": 4, "tags": [], "bug_id": 22328, "text": "\nThe beans xml config file attachment (id=8428)\n\ndoes not resolve this problem when added to the descriptors attribute of the \nServerLifecycleListener tag.\n\n---- attachment contents ------\n\n<?xml version=\"1.0\"?>\n  <!DOCTYPE mbeans-descriptors PUBLIC\n   \"-//Apache Software Foundation//DTD Model MBeans Configuration File\"\n   \"http://jakarta.apache.org/commons/dtds/mbeans-descriptors.dtd\";>\n  <!--\n       Descriptions of JMX MBeans for Catalina\n   -->\n  \n  <mbeans-descriptors>\n\t<mbean\t name=\"AccessLogValve\"\n  \t    className=\"org.apache.catalina.mbeans.ClassNameMBean\"\n\t  description=\"Valve that generates a web server access log\"\n               domain=\"Catalina\"\n                group=\"Valve\"\n                 type=\"org.apache.catalina.valves.AccessLogValve\">\n  </mbeans-descriptors>\n", "id": 45008, "time": "2003-10-02T12:40:05Z", "creator": "davidw@gpsoft.co.uk", "creation_time": "2003-10-02T12:40:05Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 22328, "attachment_id": null, "id": 49623, "creation_time": "2003-12-23T18:29:21Z", "time": "2003-12-23T18:29:21Z", "creator": "amyroh@apache.org", "text": "You need to add missing className property for AccessLogValve mbean description\nin org.apache.catalina.mbeans.mbeans-descriptors.xml.\n\ncvs diff -r 1.76 -r 1.77 mbeans-descriptors.xml (in directory\nC:\\jakarta\\jakarta-tomcat-4.0\\catalina\\src\\share\\org\\apache\\catalina\\mbeans\\)\nIndex: mbeans-descriptors.xml\n===================================================================\nRCS file:\n/home/cvs/jakarta-tomcat-4.0/catalina/src/share/org/apache/catalina/mbeans/mbeans-descriptors.xml,v\nretrieving revision 1.76\nretrieving revision 1.77\ndiff -r1.76 -r1.77\n9c9\n<      $Id: mbeans-descriptors.xml,v 1.76 2003/07/08 23:12:51 funkman Exp $\n---\n>      $Id: mbeans-descriptors.xml,v 1.77 2003/08/19 00:43:09 amyroh Exp $\n13,17c13,18\n<   <mbean name=\"AccessLogValve\"\n<          description=\"Valve that generates a web server access log\"\n<          domain=\"Catalina\"\n<          group=\"Valve\"\n<          type=\"org.apache.catalina.valves.AccessLogValve\">\n---\n>   <mbean\t name=\"AccessLogValve\"\n>   \t    className=\"org.apache.catalina.mbeans.ClassNameMBean\"\n> \t  description=\"Valve that generates a web server access log\"\n>                domain=\"Catalina\"\n>                 group=\"Valve\"\n>                  type=\"org.apache.catalina.valves.AccessLogValve\">\n501a503\n>          className=\"org.apache.catalina.mbeans.ClassNameMBean\"\n\nThe recent builds should have the fix it them.  Please update.  \n", "is_private": false}]