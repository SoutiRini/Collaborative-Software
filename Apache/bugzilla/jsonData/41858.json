[{"count": 0, "tags": [], "creator": "kohring@ccrl-nece.de", "text": "When initializing XMLSignature from a DOM Element a null pointer exception can\narise if an Object element was created in the active default namespace, without\nan explicit namespace identifier.  This arises because the\nNode.getNamespaceURI() method only looks for explicit namespaces and does not\nsearch for any default namespaces which may be active.\n\nThe null pointer error occurs at:\n\nif ((keyInfoElem != null) &&\n(keyInfoElem.getNamespaceURI().equals(Constants.SignatureSpecNS) &&\nkeyInfoElem.getLocalName().equals(Constants._TAG_KEYINFO)) )\n\n-- Gregory", "id": 100458, "time": "2007-03-16T01:14:43Z", "bug_id": 41858, "creation_time": "2007-03-16T01:14:43Z", "is_private": false, "attachment_id": null}, {"attachment_id": 19719, "tags": [], "bug_id": 41858, "is_private": false, "count": 1, "id": 100459, "time": "2007-03-16T01:16:05Z", "creator": "kohring@ccrl-nece.de", "creation_time": "2007-03-16T01:16:05Z", "text": "Created attachment 19719\none possible solution"}, {"count": 2, "tags": [], "bug_id": 41858, "is_private": false, "text": "Can you attach a test case, or a sample of XML demonstrating the problem? I need\nto be able to reproduce this problem.", "id": 106155, "time": "2007-08-01T09:48:03Z", "creator": "sean.mullan@oracle.com", "creation_time": "2007-08-01T09:48:03Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 41858, "attachment_id": null, "text": "(In reply to comment #2)\n> Can you attach a test case, or a sample of XML demonstrating the problem? I need\n> to be able to reproduce this problem.\n\nWell, the contract of  org.w3c.dom.Node.getNamespaceURI()  is very specific:\n\"The namespace URI of this node, or null if it is unspecified (see ). This is\nnot a computed value that is the result of a namespace lookup based on an\nexamination of the namespace declarations in scope.\"  In other words, if a\norg.w3c.dom.Node was given an implicit namespace based upon the default\nnamespace in effect when it was created, then this method will return null.  It\nwill only return a non-null value if the Node was explicitly given a namespace\nwhen it was created.  For this reason you should check the return value of\norg.w3c.dom.Node.getNamespaceURI() to make sure it is not null before you use it.", "id": 106167, "time": "2007-08-02T00:26:47Z", "creator": "kohring@ccrl-nece.de", "creation_time": "2007-08-02T00:26:47Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 41858, "is_private": false, "count": 4, "id": 106178, "time": "2007-08-02T08:35:38Z", "creator": "sean.mullan@oracle.com", "creation_time": "2007-08-02T08:35:38Z", "text": "The Apache implementation requires all elements to be created with\nthe DOM L2 namespace aware methods (Document.createElementNS ...) etc. Please\nsearch the archives for more information. The other problem is that the\nNode.isDefaultNamespace is a DOM L3 method and right now the implementation\ndoesn't have any direct dependencies on DOM L3.\n\nIs there some reason you did not create the KeyInfo element with the \ncreateElementNS method?"}, {"attachment_id": null, "tags": [], "bug_id": 41858, "is_private": false, "count": 5, "id": 106680, "time": "2007-08-13T00:08:11Z", "creator": "kohring@ccrl-nece.de", "creation_time": "2007-08-13T00:08:11Z", "text": "(In reply to comment #4)\n> The Apache implementation requires all elements to be created with\n> the DOM L2 namespace aware methods (Document.createElementNS ...) etc. Please\n> search the archives for more information. The other problem is that the\n> Node.isDefaultNamespace is a DOM L3 method and right now the implementation\n> doesn't have any direct dependencies on DOM L3.\n> \n> Is there some reason you did not create the KeyInfo element with the \n> createElementNS method?\n\nOK, I see your point with respect to the DOM L3 interface (though it is odd that\ngetNamespaceURI() method on DOM L2 does not do a complete namespace lookup\neither -- maybe that is why a new method was added in L3).  As for how the\nKeyInfo element is created, I do not have any control over that -- my part of\nthe code only validates the signature.  The DOM Document is constructed by\nsoftware from another open source project.  I contacted them about the following\nthe practice you recommend, but have not heard back from them.  Thanks for you help."}, {"count": 6, "tags": [], "bug_id": 41858, "attachment_id": null, "text": "\nIs there a reason this bug is marked as \"NEEDINFO\"? From the comments it seems like the bug is in another open source project, not XML Security. Can this be marked as \"RESOLVED\"?\n\nColm.", "id": 128835, "time": "2009-07-14T06:48:48Z", "creator": "coheigea@apache.org", "creation_time": "2009-07-14T06:48:48Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 41858, "text": "Yes, I think it can be marked RESOLVED. It was originally marked NEEDINFO because I wanted a sample program. The current status is that I was waiting for the submitter to get back to me about the issue in the other software, but since it has been a while I think we can close this out as not a bug according to my analysis.", "count": 7, "id": 128837, "time": "2009-07-14T07:05:39Z", "creator": "sean.mullan@oracle.com", "creation_time": "2009-07-14T07:05:39Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 41858, "is_private": false, "count": 8, "id": 128838, "time": "2009-07-14T07:08:09Z", "creator": "coheigea@apache.org", "creation_time": "2009-07-14T07:08:09Z", "text": "\nMarking as \"RESOLVED/WONTFIX\" as the bug is in another project.\n\nColm."}]