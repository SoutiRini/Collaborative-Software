[{"count": 0, "tags": [], "bug_id": 6246, "attachment_id": null, "text": "Let me suggest that you replace the example build.xml in the documentation\nwith the one enclosed.  I have found it to be very useful.\n\nJohn\n\n<project name=\"PROJECT\" default=\"all\" basedir=\".\">\n\n<!-- set global properties for this build -->\n<property name=\"proj\" value=\"PROJECT\"/>\n<property name=\"pkgs\" value=\"PROJECT-PACKAGES\"/>\n\n<!-- usually, no changes are needed below this line -->\n<property name=\"srczip\" value=\"src.zip\"/>\n<!-- directory names -->\n<property name=\"docs\" value=\"docs\"/>\n<property name=\"build\" value=\"build\"/>\n<property name=\"dist\" value=\"dist\"/>\n<property name=\"api\" value=\"api\"/>\n\n<target name=\"init\">\n<!-- Create the time stamp -->\n<tstamp/>\n<!-- Create the build directory structure used by compile -->\n<mkdir dir=\"${build}\"/>\n</target>\n\n<target name=\"compile\" depends=\"init\">\n<!-- Compile the java code from . into ${build} -->\n<javac srcdir=\".\" destdir=\"${build}\"/>\n</target>\n\n<target name=\"resource\" depends=\"init\">\n<!-- Copy resources from . into ${build} -->\n<copy todir=\"${build}\">\n  <fileset dir=\".\">\n    <exclude name=\"${docs}/\"/>\n    <exclude name=\"${build}/\"/>\n    <exclude name=\"${dist}/\"/>\n    <exclude name=\"${api}/\"/>\n    <include name=\"**/*.properties\"/>\n    <include name=\"**/*.png\"/> \n    <include name=\"**/*.gif\"/> \n    <include name=\"**/*COPYING\"/>\n  </fileset>\n</copy>\n</target>\n\n<target name=\"all\" depends=\"compile,resource\">\n<!-- Put everything in ${build} into the ${proj}.jar file -->\n<jar jarfile=\"${proj}.jar\" manifest=\"${proj}.mf\" basedir=\"${build}\"/>\n</target>\n\n<target name=\"source\" depends=\"init\">\n<zip zipfile=\"${srczip}\">\n  <fileset dir=\".\">\n    <exclude name=\"${build}/\"/>\n    <exclude name=\"${proj}.jar\"/>\n    <exclude name=\"*.zip\"/>\n    <exclude name=\"${dist}/\"/>\n    <exclude name=\"${api}/\"/>\n  </fileset>\n</zip>\n</target>\n\n<target name=\"dist\" depends=\"all,source\">\n<mkdir dir=\"${dist}/${proj}\"/>\n<copy todir=\"${dist}/${proj}\">\n  <fileset dir=\".\">\n    <include name=\"${proj}.jar\"/>\n    <include name=\"${proj}.sh\"/>\n    <include name=\"${docs}/\"/>\n    <include name=\"${srczip}\"/>\n  </fileset>\n</copy>\n<zip zipfile=\"${proj}-${DSTAMP}.zip\" basedir=\"${dist}\"/>\n</target>\n\n<target name=\"doc\">\n<mkdir dir=\"${api}\"/>\n<javadoc sourcepath=\".\" packagenames=\"${pkgs}\" destdir=\"${api}\"/>\n</target>\n\n<target name=\"clean\">\n<!-- Delete the ${build} directory, the project jar file, -->\n<!-- the source zip file, and the ${dist} and ${api} directories -->\n<delete dir=\"${build}\"/>\n<delete file=\"${proj}.jar\"/>\n<delete file=\"${srczip}\"/>\n<delete dir=\"${dist}\"/>\n<delete dir=\"${api}\"/>\n</target>\n</project>", "id": 10366, "time": "2002-02-05T13:18:00Z", "creator": "ramsdell@mitre.org", "creation_time": "2002-02-05T13:18:00Z", "is_private": false}, {"count": 1, "tags": [], "text": "For a slight improvement, apply this patch.\n\nJohn\n\n--- build.xml~\tTue Feb  5 08:28:20 2002\n+++ build.xml\tTue Feb  5 08:29:01 2002\n@@ -61,7 +61,7 @@\n <mkdir dir=\"${dist}/${proj}\"/>\n <copy todir=\"${dist}/${proj}\">\n   <fileset dir=\".\">\n-    <include name=\"${proj}.jar\"/>\n+    <include name=\"*.jar\"/>\n     <include name=\"${proj}.sh\"/>\n     <include name=\"${docs}/\"/>\n     <include name=\"${srczip}\"/>\n", "is_private": false, "bug_id": 6246, "id": 10368, "time": "2002-02-05T13:30:24Z", "creator": "ramsdell@mitre.org", "creation_time": "2002-02-05T13:30:24Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "To be a little nit-picky, why do you think including *.jar is better than \nspecifically listing it?", "is_private": false, "id": 10373, "creator": "jakarta@ehatchersolutions.com", "time": "2002-02-05T15:53:32Z", "bug_id": 6246, "creation_time": "2002-02-05T15:53:32Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "ramsdell@mitre.org", "text": "Using *.jar means that a jar file can float through the system.\nFor example, I use xp.jar, for some of my XML processing (it has the\nright buffering behavior for my needs).  If you add xp.jar to the root directory,\nthe build process will put it in src.zip and place it in the right place\nin the ZIP file for distribution.  If you give someone src.zip, that person has\nall that is needed to build the distribution.", "id": 10374, "time": "2002-02-05T16:35:44Z", "bug_id": 6246, "creation_time": "2002-02-05T16:35:44Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "text": "John, I think that the example buildfile should stay rather small for ease of \ncomprehension by the new user and you should avoid adding any trick to it such \nas a floating jar or complexify it by adding many excludes, includes, javadoc \netc... especially if it is not explained.\n\nFor advanced uses of Ant there will be Erik and Steve book ..soon in a \nbookstore near you ;-)\n\n\n", "is_private": false, "bug_id": 6246, "id": 18515, "time": "2002-06-24T22:24:40Z", "creator": "sbailliez@apache.org", "creation_time": "2002-06-24T22:24:40Z", "attachment_id": null}]