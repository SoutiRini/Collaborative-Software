[{"count": 0, "tags": [], "bug_id": 49013, "attachment_id": null, "text": "hello,\n\ntrying to compile httpd-2.3.5-alpha on mac os x results in this error which seems to be related to aprutils...\n\n> CFLAGS=\"-arch i386\" ./configure --prefix=/tools/apache-2.3.5 --enable-so --enable-cgi --enable-info --enable-rewrite --enable-speling --enable-usertrack --enable-deflate --enable-ssl --enable-mime-magic\n\n[...]\nConfiguring Apache Portable Runtime library ...\n\nchecking for APR... yes\n  setting CC to \"gcc\"\n  setting CPP to \"gcc -E\"\n  adding \"-g\" to CFLAGS\n  adding \"-O2\" to CFLAGS\n  setting CPPFLAGS to \" -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp\"\n  setting LDFLAGS to \" \"\n\nConfiguring Apache Portable Runtime Utility library...\n\nchecking for APR-util... yes\n  adding \"-L/sw/lib\" to LDFLAGS\nchecking for gcc... gcc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables...\nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to accept ISO C89... none needed\nchecking how to run the C preprocessor... gcc -E\nchecking for pcre-config... /sw/bin/pcre-config\nconfigure: Using external PCRE library from /sw/bin/pcre-config\n  setting PCRE_INCLUDES to \"-I/sw/include\"\n  setting PCRE_LIBS to \"-L/sw/lib -lpcre\"\n  setting HTTPD_LDFLAGS to \"$(PCRE_LIBS)\"\n[...]\n\n\n> make\n/sw/share/apache2/build-1/libtool --silent --mode=compile gcc -g -O2  -arch i386  -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp    -I. -I/var/tmp/httpd-2.3.5-alpha/os/unix -I/var/tmp/httpd-2.3.5-alpha/include -I/sw/include/apache2 -I/sw/include -I/var/tmp/httpd-2.3.5-alpha/modules/aaa -I/var/tmp/httpd-2.3.5-alpha/modules/cache -I/var/tmp/httpd-2.3.5-alpha/modules/core -I/var/tmp/httpd-2.3.5-alpha/modules/database -I/var/tmp/httpd-2.3.5-alpha/modules/filters -I/var/tmp/httpd-2.3.5-alpha/modules/ldap -I/var/tmp/httpd-2.3.5-alpha/modules/loggers -I/var/tmp/httpd-2.3.5-alpha/modules/lua -I/var/tmp/httpd-2.3.5-alpha/modules/proxy -I/var/tmp/httpd-2.3.5-alpha/modules/session -I/var/tmp/httpd-2.3.5-alpha/modules/ssl -I/var/tmp/httpd-2.3.5-alpha/modules/test -I/var/tmp/httpd-2.3.5-alpha/modules/arch/unix -I/var/tmp/httpd-2.3.5-alpha/modules/dav/main -I/var/tmp/httpd-2.3.5-alpha/modules/generators -I/var/tmp/httpd-2.3.5-alpha/modules/mappers  -prefer-non-pic -static -c modules.c && touch modules.lo\ngcc -g -O2  -arch i386  -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK -no-cpp-precomp    -I. -I/var/tmp/httpd-2.3.5-alpha/os/unix -I/var/tmp/httpd-2.3.5-alpha/include -I/sw/include/apache2 -I/sw/include -I/var/tmp/httpd-2.3.5-alpha/modules/aaa -I/var/tmp/httpd-2.3.5-alpha/modules/cache -I/var/tmp/httpd-2.3.5-alpha/modules/core -I/var/tmp/httpd-2.3.5-alpha/modules/database -I/var/tmp/httpd-2.3.5-alpha/modules/filters -I/var/tmp/httpd-2.3.5-alpha/modules/ldap -I/var/tmp/httpd-2.3.5-alpha/modules/loggers -I/var/tmp/httpd-2.3.5-alpha/modules/lua -I/var/tmp/httpd-2.3.5-alpha/modules/proxy -I/var/tmp/httpd-2.3.5-alpha/modules/session -I/var/tmp/httpd-2.3.5-alpha/modules/ssl -I/var/tmp/httpd-2.3.5-alpha/modules/test -I/var/tmp/httpd-2.3.5-alpha/modules/arch/unix -I/var/tmp/httpd-2.3.5-alpha/modules/dav/main -I/var/tmp/httpd-2.3.5-alpha/modules/generators -I/var/tmp/httpd-2.3.5-alpha/modules/mappers  -c /var/tmp/httpd-2.3.5-alpha/server/buildmark.c\n/sw/share/apache2/build-1/libtool --silent --mode=link gcc -g -O2  -arch i386   -L/sw/lib   -o httpd  modules.lo buildmark.o -L/sw/lib -lpcre -export-dynamic server/libmain.la modules/aaa/libmod_authn_file.la modules/aaa/libmod_authn_core.la modules/aaa/libmod_authz_host.la modules/aaa/libmod_authz_groupfile.la modules/aaa/libmod_authz_user.la modules/aaa/libmod_authz_core.la modules/aaa/libmod_access_compat.la modules/aaa/libmod_auth_basic.la modules/aaa/libmod_auth_form.la modules/core/libmod_so.la modules/filters/libmod_buffer.la modules/filters/libmod_ratelimit.la modules/filters/libmod_reqtimeout.la modules/filters/libmod_request.la modules/filters/libmod_include.la modules/filters/libmod_filter.la modules/filters/libmod_deflate.la modules/loggers/libmod_log_config.la modules/metadata/libmod_env.la modules/metadata/libmod_mime_magic.la modules/metadata/libmod_usertrack.la modules/metadata/libmod_setenvif.la modules/metadata/libmod_version.la modules/ssl/libmod_ssl.la modules/http/libmod_http.la modules/http/libmod_mime.la modules/arch/unix/libmod_unixd.la modules/generators/libmod_status.la modules/generators/libmod_autoindex.la modules/generators/libmod_asis.la modules/generators/libmod_info.la modules/generators/libmod_cgid.la modules/generators/libmod_cgi.la modules/mappers/libmod_negotiation.la modules/mappers/libmod_dir.la modules/mappers/libmod_actions.la modules/mappers/libmod_speling.la modules/mappers/libmod_userdir.la modules/mappers/libmod_alias.la modules/mappers/libmod_rewrite.la server/mpm/event/libevent.la os/unix/libos.la                  -lz       -lssl -lcrypto -lz                 /sw/lib/libaprutil.la /sw/lib/libapr.la -lpthread\nUndefined symbols:\n  \"_apr_global_mutex_lockfile\", referenced from:\n      _init_child in libmod_rewrite.a(mod_rewrite.o)\n      _ssl_mutex_reinit in libmod_ssl.a(ssl_engine_mutex.o)\n      _ssl_stapling_mutex_reinit in libmod_ssl.a(ssl_util_stapling.o)\nld: symbol(s) not found\ncollect2: ld returned 1 exit status\nmake[1]: *** [httpd] Error 1\nmake: *** [all-recursive] Error 1\n\n\nhere apr-related packages installed on the system:\n\n> fink apropos libapr\n\nInformation about 8737 packages read in 1 seconds.\n     apr-shlibs                    1:0.9.12-16            OBSOLETE use libapr0-shlibs instead\n     apr-ssl-shlibs                1:0.9.12-16            OBSOLETE use libapr0-shlibs instead\n i   libapr.0-dev                  1.3.3-6                Headers and static libraries for APR\n i   libapr.0-shlibs               1.3.3-6                Apache Portable Runtime shared libraries\n     libapr0-shlibs                1:0.9.12-16            Apache Portable Runtime\n     libapreq2                     2.08-1003              Library for parsing HTTP data\n     libapreq2-pm588               2.08-1003              Perl modules for libapreq2\n     libapreq2-shlibs              2.08-1003              Library for parsing HTTP data\n i   libaprutil.0-dev              1.3.4-9                Headers and static libraries for APRUTIL\n     libaprutil.0-mysql            1.3.4-9                APRUTIL mysql backend\n     libaprutil.0-odbc             1.3.4-9                APRUTIL odbc backend\n     libaprutil.0-postgresql       1.3.4-9                APRUTIL postgresql backend\n i   libaprutil.0-shlibs           1.3.4-9                APRUTIL shared libraries\n     libaprutil.0-sqlite2          1.3.4-9                APRUTIL sqlite2 backend\n     libaprutil.0-sqlite3          1.3.4-9                APRUTIL sqlite3 backend\n     libaprutil0-shlibs            1:0.9.12-16            Apache Portable Runtime\n\n\nMy setup:\nplatform: mac mini\nos: OS X, Darwin moria.local.pc 10.2.0 Darwin Kernel Version 10.2.0: Tue Nov  3 23:08:29 PST 2009; root:xnu-1486.2.11~3/RELEASE_I386 i386\n\nhelp would be greatly appreciated,\nTIA", "id": 135726, "time": "2010-03-28T17:43:13Z", "creator": "dev66@gmx.de", "creation_time": "2010-03-28T17:43:13Z", "is_private": false}, {"count": 1, "tags": [], "creator": "wrowe@apache.org", "text": "httpd 2.3 requires APR 1.4, while ./configure detected your installation of\nAPR 1.3.  Upgrade APR to 1.4 and try again.", "id": 135730, "time": "2010-03-28T19:50:13Z", "bug_id": 49013, "creation_time": "2010-03-28T19:50:13Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 49013, "attachment_id": null, "text": "(In reply to comment #1)\n> httpd 2.3 requires APR 1.4, while ./configure detected your installation of\n> APR 1.3.  Upgrade APR to 1.4 and try again.\n\n\n\nOK. This works.\n\nin the directory srclib I put apr-1.4.2 and apr-util-1.3.9 and created the symlinks apr and apr-util.\nTo configure I added --with-included-apr.\n\nthanks again.", "id": 135732, "time": "2010-03-28T20:48:32Z", "creator": "dev66@gmx.de", "creation_time": "2010-03-28T20:48:32Z", "is_private": false}]