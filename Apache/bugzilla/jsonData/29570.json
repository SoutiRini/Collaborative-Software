[{"count": 0, "tags": [], "creator": "mguillemot@yahoo.fr", "text": "We've got a strange problem: on one application of a virtual host, the jsp\ncouldn't get compiled because the compile task wanted to create a temporary file\nin tomcat root dir, where it hadn't any write right. \nThis was the case only for one virtual host and it worked previously. We are not\naware of changes that may have caused this behavior. As a workaround we have\nchanged the permissions to allow the task to write in tomcat's dir, but that's\nnot a clean solution.\n\nThe log excerpt:\n2004-06-06 00:25:39 Exception:\nError creating temporary file\n        at\norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalCompile(DefaultCompilerAdapter.java:\n429)\n        at\norg.apache.tools.ant.taskdefs.compilers.JavacExternal.execute(JavacExternal.java:81)\n        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:842)\n        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:682)\n        at org.apache.jasper.compiler.Compiler.generateClass(Unknown Source)\n        at org.apache.jasper.compiler.Compiler.compile(Unknown Source)\n        at org.apache.jasper.JspCompilationContext.compile(Unknown Source)\n        at org.apache.jasper.servlet.JspServletWrapper.service(Unknown Source)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(Unknown Source)\n        at org.apache.jasper.servlet.JspServlet.service(Unknown Source)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java)\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(Unknown Source)\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(Unknown Source)\n        at org.apache.catalina.core.ApplicationDispatcher.forward(Unknown Source)\n        at\norg.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1069)\n        at\norg.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:274)\n        at\norg.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:254)\n        at\norg.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:309)\n        at\norg.apache.struts.action.RequestProcessor.process(RequestProcessor.java:279)\n        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)\n        at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at\nde.internetzky.util.hibernate.SessionClosingFilter.doFilter(SessionClosingFilter.java:65)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at\nde.internetzky.util.web.JSPEngineExceptionReporter.doFilter(JSPEngineExceptionReporter.java:45)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at\nde.internetzky.util.web.SessionsObserver$SessionCreationFilter.doFilter(SessionsObserver.java:77)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at de.internetzky.jnetz.web.Log4jNDCFilter.doFilter(Log4jNDCFilter.java:68)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardContext.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n        at\norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:594)\n        at\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:536)\nCaused by: java.io.FileNotFoundException: /var/tomcat4/files2048078612\n(Permission denied)\n        at java.io.FileOutputStream.open(Native Method)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:176)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:131)\n        at java.io.FileWriter.<init>(FileWriter.java:70)\n        at\norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalCompile(DefaultCompilerAdapter.java:\n420)\n        ... 63 more\n--- Nested Exception ---\njava.io.FileNotFoundException: /var/tomcat4/files2048078612 (Permission denied)\n        at java.io.FileOutputStream.open(Native Method)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:176)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:131)\n        at java.io.FileWriter.<init>(FileWriter.java:70)\n        at\norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalCompile(DefaultCompilerAdapter.java:\n420)\n        at\norg.apache.tools.ant.taskdefs.compilers.JavacExternal.execute(JavacExternal.java:81)\n        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:842)\n        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:682)\n        at org.apache.jasper.compiler.Compiler.generateClass(Unknown Source)\n        at org.apache.jasper.compiler.Compiler.compile(Unknown Source)\n        at org.apache.jasper.JspCompilationContext.compile(Unknown Source)\n        at org.apache.jasper.servlet.JspServletWrapper.service(Unknown Source)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(Unknown Source)\n        at org.apache.jasper.servlet.JspServlet.service(Unknown Source)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java)\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(Unknown Source)\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(Unknown Source)\n        at org.apache.catalina.core.ApplicationDispatcher.forward(Unknown Source)\n        at\norg.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1069)\n        at\norg.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:274)\n        at\norg.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:254)\n        at\norg.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:309)\n        at\norg.apache.struts.action.RequestProcessor.process(RequestProcessor.java:279)\n        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)\n        at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at\nde.internetzky.util.hibernate.SessionClosingFilter.doFilter(SessionClosingFilter.java:65)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at\nde.internetzky.util.web.JSPEngineExceptionReporter.doFilter(JSPEngineExceptionReporter.java:45)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at\nde.internetzky.util.web.SessionsObserver$SessionCreationFilter.doFilter(SessionsObserver.java:77)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at de.internetzky.jnetz.web.Log4jNDCFilter.doFilter(Log4jNDCFilter.java:68)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardContext.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n        at\norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:594)\n        at\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:536)\n\n2004-06-06 00:25:39 ApplicationDispatcher[] Servlet.service() for servlet jsp\nthrew exception\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n    [javac] Compiling 1 source file\n\n\n\n        at org.apache.jasper.compiler.DefaultErrorHandler.javacError(Unknown Source)\n        at org.apache.jasper.compiler.ErrorDispatcher.javacError(Unknown Source)\n        at org.apache.jasper.compiler.Compiler.generateClass(Unknown Source)\n        at org.apache.jasper.compiler.Compiler.compile(Unknown Source)\n        at org.apache.jasper.JspCompilationContext.compile(Unknown Source)\n        at org.apache.jasper.servlet.JspServletWrapper.service(Unknown Source)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(Unknown Source)\n        at org.apache.jasper.servlet.JspServlet.service(Unknown Source)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java)\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(Unknown Source)\n        at org.apache.catalina.core.ApplicationDispatcher.doForward(Unknown Source)\n        at org.apache.catalina.core.ApplicationDispatcher.forward(Unknown Source)\n        at\norg.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1069)\n        at\norg.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:274)\n        at\norg.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:254)\n        at\norg.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:309)\n        at\norg.apache.struts.action.RequestProcessor.process(RequestProcessor.java:279)\n        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)\n        at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at\nde.internetzky.util.hibernate.SessionClosingFilter.doFilter(SessionClosingFilter.java:65)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at\nde.internetzky.util.web.JSPEngineExceptionReporter.doFilter(JSPEngineExceptionReporter.java:45)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at\nde.internetzky.util.web.SessionsObserver$SessionCreationFilter.doFilter(SessionsObserver.java:77)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at de.internetzky.jnetz.web.Log4jNDCFilter.doFilter(Log4jNDCFilter.java:68)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown Source)\n        at org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardContext.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(Unknown\nSource)\n        at org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n        at org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n        at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n        at\norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:594)\n        at\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:536)", "id": 59216, "time": "2004-06-15T10:53:08Z", "bug_id": 29570, "creation_time": "2004-06-15T10:53:08Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "When the command line for the javac task is more the 4096 characters long, the \nant task creates a temporary file to hold the full command. This is to \novercome command length limitations on a number of OSes.\n\nJasper was not setting the temp dir so Ant tries to use the user dir which in \nyour case must be the tomcat root dir.\n\nJasper has now been patched to fix this.", "id": 63427, "time": "2004-09-12T20:51:36Z", "bug_id": 29570, "creation_time": "2004-09-12T20:51:36Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 29570, "attachment_id": null, "text": "We have run into this problem with Red Hat App Server (which includes Tomcat 5).\n\nIt is a bug (IMO) in the Ant javac task  -- it uses the user home directory\ninstead of the system temp directory for a temporary file created when the\ncommand line gets larger than 4K, which happens with long classpaths.\n\nI have filed a bug for Ant and a patch has been checked into Ant's CVS\nrepository.  It was not supposed to be included in 1.6.2 yet so more people had\na chance to comment on it.  I have backpatched the change in the Ant 1.6.1 that\nwe've released.\n\nI believe the fix in the Ant task is the better solution, although the change is\nJasper makes it immune to this problem.\n\nIn any case, I am attaching the Ant patch we are using (last thing I've heard\nthis was in Ant's current sources).\n\nReards to all,\nFernando", "id": 63564, "time": "2004-09-15T08:21:05Z", "creator": "fnasser@redhat.com", "creation_time": "2004-09-15T08:21:05Z", "is_private": false}, {"attachment_id": 12738, "tags": [], "bug_id": 29570, "is_private": false, "count": 3, "id": 63565, "time": "2004-09-15T08:21:49Z", "creator": "fnasser@redhat.com", "creation_time": "2004-09-15T08:21:49Z", "text": "Created attachment 12738\nAnt 1.6.1 patch"}]