[{"count": 0, "tags": [], "bug_id": 16451, "attachment_id": null, "id": 30101, "time": "2003-01-27T14:24:18Z", "creator": "julian.reschke@gmx.de", "creation_time": "2003-01-27T14:24:18Z", "is_private": false, "text": "Upon PUT, an \"If\" header checking both for valid lock token and entity tag\nfails, at least when the etag was returned by a previous PUT (which returns a\nweak etag in the default case).\n\nRequest was:\n\nIf: (<opaquelocktoken:35c1f976-24af-964a-88f6-9b26ac86938d> [W/\"8823-1c-22d9c11\"])\n\nResponse was:\n\n412 Precondition failed\n\n\nError logs says:\n\nThe precondition(s) specified by the \"If:\" header did not match this resource.\nAt least one failure is because: an entity-tag was specified, but the resource's\nactual ETag does not match.  [412, #0]"}, {"count": 1, "tags": [], "bug_id": 16451, "attachment_id": null, "id": 30236, "time": "2003-01-29T05:05:10Z", "creator": "jerenkrantz@apache.org", "creation_time": "2003-01-29T05:05:10Z", "is_private": false, "text": "What is the ETag header for this resource?  If you do a HEAD, are you getting the W/ prefixed?  If the ETag *is* identical, it works for me.  I tried with mod_dav_fs and mod_dav_svn which don't seem to use weak entity tags.  (Note that both of them implement the getetag hook.  A provider that doesn't implement it would fail here.)If you can provide a reproduction case that produces a weak entity tag, we can look at it further.  The question remains that if something is producing a weak entity tag, should it compare with the W/ prefix or strip it first?  I think in order to be true to the RFC, we should test the entire ETag with the W/ prefix (if passed).  It is truly an opaque token.Comments welcome."}, {"count": 2, "tags": [], "bug_id": 16451, "attachment_id": null, "id": 30243, "time": "2003-01-29T09:28:12Z", "creator": "julian.reschke@gmx.de", "creation_time": "2003-01-29T09:28:12Z", "is_private": false, "text": "The (weak) etag (as shown in the If header) indeed was obtained as result from \na HEAD request. This issue may be related to issue 14921 then (PROPFIND and \nHEAD/GET returning syntactically different entity tags).\n"}, {"count": 3, "tags": [], "bug_id": 16451, "attachment_id": null, "text": "I believe with the recent change to do weak entity comparison functions, this should be resolved.  It now won't matter if we use weak entity tags or not.\n\n*** This bug has been marked as a duplicate of 14921 ***", "id": 30280, "time": "2003-01-29T17:35:06Z", "creator": "jerenkrantz@apache.org", "creation_time": "2003-01-29T17:35:06Z", "is_private": false}]