[{"text": "The build may become corrupted if a process called by exec prints warnings to\nstderr.\n        <exec dir=\".\" executable=\"/usr/bin/perl\" output=\"p.out\">\n        <arg line=\"p.pl\" />\n        </exec>\np.out will contain both stderr AND stdout, although only stdout is useful.\n\nExample. On some redhat linux 7.2 systems, perl always writes the following\nwarning into stderr (a configuration problem that I will never have time to debug):\nperl: warning: Setting locale failed.\nperl: warning: Please check that your locale settings:\n        LANGUAGE = (unset),\n        LC_ALL = (unset),\n        LANG = \"en.ISO-8859-1\"\n    are supported and installed on your system.\nperl: warning: Falling back to the standard locale (\"C\").\n\nNormally, this warning is harmless because simple unix scripts and makefiles use\nredirections of stdout only (\">\" and \"|\" operators). Only ant fails, when a\ntarget uses exec's mixed stdout+stderr output:\n...\n     [java] skipped /home/cspeter/marvin/obf-applic/back: cannot read\n     [java] skipped /home/cspeter/marvin/obf-applic/to: cannot read\n     [java] skipped /home/cspeter/marvin/obf-applic/the: cannot read\n     [java] skipped /home/cspeter/marvin/obf-applic/standard: cannot read\n     [java] skipped /home/cspeter/marvin/obf-applic/locale: cannot read\n     [java] skipped /home/cspeter/marvin/obf-applic/(C).\n     [java] marvin/util/d.class: cannot read\n\nBUILD FAILED\n\nPossible solutions:\n1. exec's \"output\" argument should only contain stdout\n2. a new \"stdout\" argument should be introduced", "tags": [], "bug_id": 7330, "is_private": false, "count": 0, "id": 12142, "time": "2002-03-21T16:29:14Z", "creator": "cspeter@rmki.kfki.hu", "creation_time": "2002-03-21T16:29:14Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "holtdl@yahoo.com", "text": "Use:\n        <exec dir=\".\" executable=\"sh\" output=\"p.out\">\n          <arg line='-c \"/usr/bin/perl p.pl 2&gt; p.err\"'/>\n        </exec>\n\nOr /dev/null if you don't want to capture stderr -- but you probably should, in \ncase there really are errors. Which is why I don't think 'output' should, by \ndefault, only contain stdout -- but I think leaving 'output' as both, and \nintroducing two new (boolean) attrs, 'stdout' and 'stderr', might be reasonable \n(maybe an 'append' as well, so the same output file can be used to capture more \nthan one command's output). Would you agree this bug should be changed to an \nEnhancement severity?", "id": 12152, "time": "2002-03-21T19:25:48Z", "bug_id": 7330, "creation_time": "2002-03-21T19:25:48Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 7330, "attachment_id": null, "id": 12156, "time": "2002-03-21T20:41:05Z", "creator": "bob.kerns@firepond.com", "creation_time": "2002-03-21T20:41:05Z", "is_private": false, "text": "I would not agree that this should be changed to Enhancement severity.\n\nThe current behavior violates the contract for stdout vs stderr. stderr output \nby default should be logged with the output of ant itself, as if log(..., \nProject.MSG_WARN) were called.\n\nAdditional control over the disposition of the output would be welcome and \ncould be entered as an enhancement, but the current behavior is a defect."}, {"count": 3, "tags": [], "bug_id": 7330, "attachment_id": null, "id": 12170, "time": "2002-03-22T06:26:32Z", "creator": "cspeter@rmki.kfki.hu", "creation_time": "2002-03-22T06:26:32Z", "is_private": false, "text": "Exactly. Mixing stderr into output is a dangerous and unexpected behavior of\nexec. It increases platform dependence and makes further processing impossible\nwhen stderr is not empty. Fortunately, this feature is also undocumented. The\ndocumentation does not mention stderr, therefore \"output\" = \"stdout\" is expected. \n\nThe problem with boolean stderr and stdout attrs is that there is only one\nreally useful combination: stdout=true && stderr=false. If someone needs stderr\ntoo, then (s)he needs it in a different (log)file. Probably in ant's logfile."}, {"count": 4, "tags": [], "creator": "conor@apache.org", "text": "Fixed. The exec task takes 3 new attributes\n\n\"logError\". If this is set to true, stderr is sent to the Ant log and the\nredirected ouout only contains stdout\n\n\"error\" - this attribute is the name a file to take stderr. If this is set, the\nredirected output will only contain stdout\n\n\"errorProperty\" - this redirects stderr to a property. this can be combined with\nerror and again the output will only contain stdout.\n\nIf output is not redirected but stderr is, the output will appear in the ant log.\n\n", "id": 30809, "time": "2003-02-06T13:15:30Z", "bug_id": 7330, "creation_time": "2003-02-06T13:15:30Z", "is_private": false, "attachment_id": null}]