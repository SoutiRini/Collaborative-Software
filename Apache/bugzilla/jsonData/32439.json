[{"count": 0, "tags": [], "bug_id": 32439, "attachment_id": null, "id": 67600, "time": "2004-11-30T01:09:59Z", "creator": "amigo@max3d.com", "creation_time": "2004-11-30T01:09:59Z", "is_private": false, "text": "Let's assume two file systems, /home and /home2 ; /home2 contains \nthe /home2/httpd/html as the DocumentRoot of the web server ; /home and /home2 \nalso contain users and their public_html/ web directories.\n\nDocumentRoot (/home2/httpd/html) contains any number of symlinks to user's \npublic_html/ folders, ie:\nuser1 -> /home/user1/public_html\nuser2 -> /home/user1/public_html\nuser3 -> /home2/user3/public_html\nuser4 -> /home2/user4/public_html\n\n...which creates URLs of kind: http://www.somesite.com/user1 ,etc.\n\nApache httpd.conf (excert):\n...\n<Directory /home2/httpd/*>\n    Options Indexes FollowSymLinks ExecCGI MultiViews\n    AllowOverride AuthConfig\n    Order allow,deny\n    Allow from all\n</Directory>\n\n<Directory /home/*/public_html/>\n        Options Indexes MultiViews\n        AllowOverride None\n        Order allow,deny\n        Allow from all\n</Directory>\n\n<Directory /home2/*/public_html/>\n        Options Indexes MultiViews  \n        AllowOverride None\n        Order allow,deny\n        Allow from all\n</Directory>\n...\nNameVirtualHost *\n<VirtualHost *>\n    ServerAdmin admin@somesite.com\n    DocumentRoot /home2/httpd/html\n    ServerName www.somesite.com\n    ErrorDocument 404 /missing.html\n \n    RewriteEngine on\n \n    <Directory /home/*/public_html/>\n     RewriteRule     ^/(.+).avi$             /wrap.php?url=$1.avi [L]\n    </Directory>\n</VirtualHost>\n\nWith the above, Apache fails to process the Directory directive inside the \nVirtualHost and apply the RewriteRule to the matching user's files in /home/ \nfilesystem because the destination folder was a symlink from the DocumentRoot \nand not a real folder.\n\nI believe this to be an omission and that Apache should (must) check for any \ndirectives that relate to symlink destinations before processing the request."}, {"count": 1, "tags": [], "text": "From the <Directory> docs:\n\nBe careful with the directory-path arguments: They have to literally match the\nfilesystem path which Apache uses to access the files. Directives applied to a\nparticular <Directory> will not apply to files accessed from that same directory\nvia a different path, such as via different symbolic links.", "is_private": false, "id": 67603, "creator": "nd@perlig.de", "time": "2004-11-30T01:39:03Z", "bug_id": 32439, "creation_time": "2004-11-30T01:39:03Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 32439, "attachment_id": null, "id": 67605, "time": "2004-11-30T01:39:20Z", "creator": "nd@perlig.de", "creation_time": "2004-11-30T01:39:20Z", "is_private": false, "text": "*** Bug 32440 has been marked as a duplicate of this bug. ***"}, {"count": 3, "tags": [], "bug_id": 32439, "text": "And it is similarly explicitly documented in the Options directive under\nFollowSymLinks.", "id": 67623, "time": "2004-11-30T16:02:14Z", "creator": "slive@apache.org", "creation_time": "2004-11-30T16:02:14Z", "is_private": false, "attachment_id": null}]