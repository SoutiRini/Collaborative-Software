[{"count": 0, "tags": [], "bug_id": 41468, "attachment_id": null, "text": "Process:\n\ntake a stock install of Apache (unconfigured)\n\ntake the initrd.img (which is a gzip) file from RHEL4-U4's tree\n(images/pxeboot/initrd.img) and place it into /var/www/html\n\nwget -S 127.0.0.1/initrd.img to download the file then diff the downloaded copy\nwith the original.   They are not the same, though they have the same file size.\n\n[root@pong tmp]# head nfs_hex\n0000000 8b1f 0008 5dfa 44d1 0302 fdec 7c0b d514\n0000010 f8fd cfff 1b26 4212 a360 4446 8d45 5b1a\n0000020 8150 f144 c112 840a b620 81a0 0848 6020\n0000030 e080 2112 64c1 8b97 c505 b66e ac32 b4ab\n0000040 5695 5adb 6ab5 d63f d3f6 56da 5e2c 51b0\n0000050 2268 b6d6 b688 f162 5682 aced 958b 017a\n0000060 7454 efff 99f7 4dd9 a882 08fd dfdf ffe7\n0000070 f6fd e4f5 c871 ccee 7399 9cce 7339 cce6\n0000080 ecec 658e f801 554f b47b 661b 2cf8 746b\n0000090 659e 3d6d b2ca 5d7c 1423 41bb 7ce3 fd30\n\nHere's what happened after I copied into the RHEL4 Apache root (/var/www/html)\nand wgetted it\n\n[root@pong tmp]# head download_hex\n0000000 8b1f 0008 5dfa 44d1 0302 fdec 7c0b d514\n0000010 f8fd cfff 1b26 4212 a360 4446 8d45 5b1a\n0000020 8150 f144 c112 840a b620 81a0 0848 6020\n0000030 e080 2112 64c1 8b97 c505 b66e ac32 b4ab\n0000040 5695 5adb 6ab5 d63f d3f6 56da 5e2c 51b0\n0000050 2268 b6d6 b688 f162 5682 aced 958b 017a\n0000060 7454 efff 99f7 4dd9 a882 08fd dfdf ffe7\n0000070 f6fd e4f5 c871 ccee 7399 9cce 7339 cce6\n0000080 ecec 658e f801 554f b47b 661b 2cf8 746b\n0000090 659e 3d6d b2ca 5d7c 1423 41bb 7ce3 fd30\n\nThis shows that the heads are the same.   However, the tails are not the same.\n\nHere's the original:\n\n[root@pong tmp]# tail nfs_hex\n036d960 680e e896 3e9b 2f1c 3f2f 488f 2ce0 4dc9\n036d970 3cd2 18b6 7a90 a064 0743 42d2 4611 da9d\n036d980 dd3f f96a 3d22 4e37 2d00 1b33 c1a0 07a8\n036d990 3a66 530e 6808 df41 8d00 a8e1 e787 34eb\n036d9a0 5dc7 3df1 f6fe e7f5 cfeb b6ff 8707 0004\n036d9b0 0000 8200 bffe 84f6 0011 0000 0000 0000\n036d9c0 0000 0000 0000 0000 0000 0000 0000 0000\n*\n036db90 e000 c711 fd51 000e 6d60 0000         036db9b\n\nHere's the version I downloaded from Apache:\n\n[root@pong tmp]# tail download_hex\n001a010 0000 0000 0000 0000 0000 0000 0000 0000\n*\n001c000 0000 0000 0000 0000 4549 0000 0000 0000\n001c010 0000 0000 0000 0000 0000 0000 0000 0000\n*\n001e000 0000 0000 0000 0000 2549 0000 0000 0000\n001e010 0000 0000 0000 0000 0000 0000 0000 0000\n*\n036db90 0000 0000 0000 0000 0000 0000         036db9b \n\nThis seems extremely weird in that I would think other users would have this\nproblem, though I'm not entirely sure what is going on here.  I tried turning\noff the various cache modules with no success, and doing an \"AddType\napplication/octet-stream .img\"  also had no effect.\n\nThis is repeatable every time and I've tried this on two seperate boxes.  There\nis nothing obvious in the logs.", "id": 98521, "time": "2007-01-25T10:22:51Z", "creator": "mdehaan@redhat.com", "creation_time": "2007-01-25T10:22:51Z", "is_private": false}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "text": "1. You are using a very old version of httpd. Does this also happen with later \n   versions of 2.0.x or 2.2.x?\n2. Please try if this still happens when you use the directives\n   EnableMMAP off\n   EnableSendfile off\n   Please try both together and separately.\n3. Is /var/www/html a NFS mount?\n   If yes, please have a look to the sections \"Memory-mapping\" and \"Sendfile\" \n   at http://httpd.apache.org/docs/2.0/en/misc/perf-tuning.html#runtime", "id": 98525, "time": "2007-01-25T13:07:26Z", "bug_id": 41468, "creation_time": "2007-01-25T13:07:26Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Ok, I apologize for not detecting this earlier.\n\nThere is a mod python filter (output) handler on the directory.  Removing the\noutput handler solves the problem.\n\nMoving bug to INVALID for now, unless I figure out there is actually a\nmod_python problem also (the script looks very very tame, but I'm skeptical).\n\nThanks!", "is_private": false, "id": 98527, "creation_time": "2007-01-25T14:35:50Z", "time": "2007-01-25T14:35:50Z", "creator": "mdehaan@redhat.com", "bug_id": 41468, "attachment_id": null}]