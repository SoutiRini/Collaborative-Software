[{"count": 0, "tags": [], "text": "Created attachment 24512\nAFP output (RGB color space used for the uncalibrated CMYK)\n\nWhen using uncalibrated CMYK colors in FO file without a declarations tag (no\nneed to provide the declaration tag for the uncalibrated CMYK colors, as the\ncolor profile source is not a necessary) like....\n\n<fo:block color=\"rgb-icc(0, 255, 0, #CMYK, 1, 0, 1, 0)\">GREEN TEXT</fo:block>\n<fo:block color=\"rgb-icc(0, 255, 255, #CMYK, 1, 0, 0, 0)\">CYAN TEXT</fo:block>\n\nWhen trying to generate a AFP output, and the AFP renderer is using RGB color\nspace instead of CMYK color space..\n\nWhen declarations tag is used, it is generating AFP output with CMYK color\nspace.\n\nPlease find the input file and output attached to this bug.", "is_private": false, "id": 131843, "creator": "vanukuri.venkat@googlemail.com", "time": "2009-11-10T07:34:06Z", "bug_id": 48167, "creation_time": "2009-11-10T07:34:06Z", "attachment_id": 24512}, {"count": 1, "tags": [], "bug_id": 48167, "attachment_id": 24513, "is_private": false, "id": 131844, "time": "2009-11-10T07:37:11Z", "creator": "vanukuri.venkat@googlemail.com", "creation_time": "2009-11-10T07:37:11Z", "text": "Created attachment 24513\ncmyk-test input fo document"}, {"count": 2, "text": "- my trunk output just contains CMYK and no RGB\n- could you please provide me your binary afp output file for futher analysis \n\n\n$ grep -A2 Color  cmyk-test.dmp\n          0x81: SEC Set Extended Color [14]\n                Reserved: 00 \n                ColSpace: 0x04 (CMYK)\n--\n          0x81: SEC Set Extended Color [14]\n                Reserved: 00 \n                ColSpace: 0x04 (CMYK)\n--\n          0x81: SEC Set Extended Color [14]\n                Reserved: 00 \n                ColSpace: 0x04 (CMYK)\n--\n          0x81: SEC Set Extended Color [14]\n                Reserved: 00 \n                ColSpace: 0x04 (CMYK)\n--\n          0x81: SEC Set Extended Color [14]\n                Reserved: 00 \n                ColSpace: 0x04 (CMYK)", "bug_id": 48167, "is_private": false, "id": 131849, "time": "2009-11-10T09:49:12Z", "creator": "afputils@web.de", "creation_time": "2009-11-10T09:49:12Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 48167, "attachment_id": null, "is_private": false, "id": 131898, "time": "2009-11-12T02:13:47Z", "creator": "vanukuri.venkat@googlemail.com", "creation_time": "2009-11-12T02:13:47Z", "text": "Sorry, it was my mistake attached the wrong input file. Please find the newly attached input file for the bug.\n\n\n(In reply to comment #2)\n> - my trunk output just contains CMYK and no RGB\n> - could you please provide me your binary afp output file for futher analysis \n> $ grep -A2 Color  cmyk-test.dmp\n>           0x81: SEC Set Extended Color [14]\n>                 Reserved: 00 \n>                 ColSpace: 0x04 (CMYK)\n> --\n>           0x81: SEC Set Extended Color [14]\n>                 Reserved: 00 \n>                 ColSpace: 0x04 (CMYK)\n> --\n>           0x81: SEC Set Extended Color [14]\n>                 Reserved: 00 \n>                 ColSpace: 0x04 (CMYK)\n> --\n>           0x81: SEC Set Extended Color [14]\n>                 Reserved: 00 \n>                 ColSpace: 0x04 (CMYK)\n> --\n>           0x81: SEC Set Extended Color [14]\n>                 Reserved: 00 \n>                 ColSpace: 0x04 (CMYK)"}, {"count": 4, "tags": [], "bug_id": 48167, "attachment_id": 24521, "text": "Created attachment 24521\nCorrect Input file, please ignore the previous one", "id": 131899, "time": "2009-11-12T02:16:16Z", "creator": "vanukuri.venkat@googlemail.com", "creation_time": "2009-11-12T02:16:16Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 48167, "attachment_id": 24523, "is_private": false, "id": 131901, "time": "2009-11-12T06:48:38Z", "creator": "vanukuri.venkat@googlemail.com", "creation_time": "2009-11-12T06:48:38Z", "text": "Created attachment 24523\nCMYK Declarations patch\n\nThis patch resolves the bug, where no declarations tag is necessary for the uncalibrated CMYK."}, {"count": 6, "tags": [], "bug_id": 48167, "attachment_id": null, "is_private": false, "id": 131906, "time": "2009-11-12T09:52:16Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2009-11-12T09:52:16Z", "text": "Hi Vincent,\n\nplease can you process this patch?\n\nThanks,\n\nChris"}, {"count": 7, "tags": [], "bug_id": 48167, "attachment_id": 24526, "is_private": false, "id": 131917, "time": "2009-11-13T00:17:36Z", "creator": "afputils@web.de", "creation_time": "2009-11-13T00:17:36Z", "text": "Created attachment 24526\npatch for PtocaBuilder.java\n\nThe patch CMYKDeclarations.patch.txt is looking good for me \nbut there is additional problem inside PtocaBuilder.setExtendedTextColor().\n\nA CMYK component with value 1.0 becomes to 256 witch does not fit into one\nbyte. Finally 0x00 is written out at the moment, but 0xff is expected."}, {"count": 8, "tags": [], "creator": "afputils@web.de", "is_private": false, "text": "Created attachment 24527\nbefore/after CMYKDeclarations.001.patch.txt\n\n- text 'CYAN TEXT' is written out as white color '00 00 00 00' and\n  not visible in any afp viewer\n\n- input: <fo:block color=\"rgb-icc(0, 255, 255, #CMYK, 1, 0, 0, 0)\">CYAN TEXT</fo:block>\n\n- output with CMYKDeclarations.patch.txt but wrong color due to interger overflow\n          0x81: SEC Set Extended Color [14]\n                Reserved: 00 \n                ColSpace: 0x04 (CMYK)\n                Reserved: 00 00 00 00 \n                Size1:    0x08 (8)\n                Size2:    0x08 (8)\n                Size3:    0x08 (8)\n                Size4:    0x08 (8)\n                ColValue: 00 00 00 00 \n          0xF1: SCFL Set Coded Font Local [1]\n                CFLid:     0x01 (1)\n          0xC5: SVI Set Variable-Space Char Increment [2]\n                Value:    0x000B (11)\n          0xDB: TRN Transparent Data [9]\n                Text:     \"CYAN TEXT\"\n\n- output with CMYKDeclarations.patch.txt and CMYKDeclarations.001.patch.txt\n          0x81: SEC Set Extended Color [14]\n                Reserved: 00 \n                ColSpace: 0x04 (CMYK)\n                Reserved: 00 00 00 00 \n                Size1:    0x08 (8)\n                Size2:    0x08 (8)\n                Size3:    0x08 (8)\n                Size4:    0x08 (8)\n                ColValue: FF 00 00 00 \n          0xF1: SCFL Set Coded Font Local [1]\n                CFLid:     0x01 (1)\n          0xC5: SVI Set Variable-Space Char Increment [2]\n                Value:    0x000B (11)\n          0xDB: TRN Transparent Data [9]\n                Text:     \"CYAN TEXT\"", "id": 131919, "time": "2009-11-13T00:38:34Z", "bug_id": 48167, "creation_time": "2009-11-13T00:38:34Z", "attachment_id": 24527}, {"count": 9, "tags": [], "bug_id": 48167, "attachment_id": null, "is_private": false, "id": 131997, "time": "2009-11-16T04:19:46Z", "creator": "vanukuri.venkat@googlemail.com", "creation_time": "2009-11-16T04:19:46Z", "text": "Hi Harald G. Henne,\n\nYou are right, I have prepared two different patches( this bug relates to fo:declarations tag is not neccessary for uncalibrated CMYK colors, and the other patch for the bug 48185 will fix the problem you mentioned).\n\nPlease check the other bug for the details...\n\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=48185\n\nI have enabled the dependency attribute between these two bugs..."}, {"count": 10, "tags": [], "text": "Patch applied in rev. 883310:\nhttp://svn.apache.org/viewvc?rev=883310&view=rev\n\nThanks!\nVincent", "is_private": false, "id": 132239, "creator": "vhennebert@gmail.com", "time": "2009-11-23T03:48:27Z", "bug_id": 48167, "creation_time": "2009-11-23T03:48:27Z", "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 48167, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155707, "time": "2012-04-01T06:36:50Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:36:50Z", "is_private": false, "attachment_id": null}]