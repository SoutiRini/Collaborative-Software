[{"count": 0, "tags": [], "bug_id": 40230, "attachment_id": null, "is_private": false, "id": 92133, "time": "2006-08-11T08:08:38Z", "creator": "vhennebert@gmail.com", "creation_time": "2006-08-11T08:08:38Z", "text": "When there is an <fo:block break-after=\"page\"/> and nothing after it in the\nflow, a new page is still created, whereas section 7.19.1 of the recommendation\nstates that it should be the case only if there is material to typeset\nafterwards. See the attached fo sample.\nThe result is the same if we replace break-after by break-before.\nSame result also if we remove the indenting such that all the closing tags after\nthe block are sticked together, so this is not a whitespace handling issue.\n\nI guess that a Knuth penalty of value -infinity is generated for such a block,\nand this doesn't play well with the (infinite glue, -infinite penalty) pair\nwhich is probably added at the end of the page sequence. The penalty should\nprobably be only generated if there is also some box after it, and before the\nending pair.\n\nIf nobody takes this bug I'll have a look at it after the GSoC."}, {"count": 1, "tags": [], "text": "Created attachment 18697\nSample file demonstrating the problem", "attachment_id": 18697, "id": 92134, "creator": "vhennebert@gmail.com", "time": "2006-08-11T08:10:25Z", "bug_id": 40230, "creation_time": "2006-08-11T08:10:25Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "adelmelle@apache.org", "is_private": false, "count": 2, "id": 92150, "time": "2006-08-11T17:36:52Z", "bug_id": 40230, "creation_time": "2006-08-11T17:36:52Z", "text": "(Here I go again :))\nI think this could be handled before layout even kicks off...\n\nFOTreeBuilder could keep track of whether the currentFObj has area-generating content --shouldn't \nprove too hard to come up with a set of conditions that have to be satisfied.\nI'm thinking much in the same direction as the 'inMarker' instance member I recently added to \nFOEventHandler: a switch that is updated in the start- or endElement() event for each FObj. If it does \nnot have any content, and the currentPropertyList contains a break-before/break-after property, \ninstruct the current or the previous FO to discard that property (maybe log a warning, because it's not \nincorrect to specify it)\nMaybe we'd have to add a reference to the previousFObj/previousPropertyList to FOTreeBuilder as well, \nbut that would be a small price to pay, and may open up perspectives in other areas.\n\nSorry if I keep nagging about these 'normalizations' in the FOTree... :/\n\nI guess my underlying goal is: whatever layoutengine/renderer combination processes our FOTree, we \nshould try to offer it a representation of the tree that would be difficult to 'misrender'."}, {"count": 3, "tags": [], "text": "Should be fixed by:\nhttp://svn.apache.org/viewvc?rev=598558&view=rev\n", "attachment_id": null, "id": 111125, "creator": "jeremias@apache.org", "time": "2007-11-27T00:52:30Z", "bug_id": 40230, "creation_time": "2007-11-27T00:52:30Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 40230, "attachment_id": null, "id": 128268, "time": "2009-06-25T04:12:11Z", "creator": "vhennebert@gmail.com", "creation_time": "2009-06-25T04:12:11Z", "is_private": false, "text": "(In reply to comment #3)\n> Should be fixed by:\n> http://svn.apache.org/viewvc?rev=598558&view=rev \n\nThis change introduces a regression: if a block has break-after=\"odd-page\" and a child block that has break-after=\"page\", the following content will be on the next page instead of the next odd page. See upcoming attachment."}, {"count": 5, "tags": [], "bug_id": 40230, "is_private": false, "text": "Created attachment 23877\nTestcase showing the regression", "id": 128269, "time": "2009-06-25T04:13:54Z", "creator": "vhennebert@gmail.com", "creation_time": "2009-06-25T04:13:54Z", "attachment_id": 23877}, {"count": 6, "tags": [], "text": "vincent, should this stay open, or is it waiting for an assignment to a dev to fix?", "attachment_id": null, "id": 157022, "creator": "gadams@apache.org", "time": "2012-04-01T19:08:01Z", "bug_id": 40230, "creation_time": "2012-04-01T19:08:01Z", "is_private": false}, {"count": 7, "tags": [], "text": "It (In reply to comment #6)\n> vincent, should this stay open, or is it waiting for an assignment to a dev to\n> fix?\n\nIt still needs to be fixed.", "attachment_id": null, "id": 157140, "creator": "vhennebert@gmail.com", "time": "2012-04-04T09:28:46Z", "bug_id": 40230, "creation_time": "2012-04-04T09:28:46Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 40230, "attachment_id": null, "id": 157423, "time": "2012-04-07T01:42:44Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:42:44Z", "is_private": false, "text": "resetting P2 open bugs to P3 pending further review"}]