[{"count": 0, "tags": [], "bug_id": 41376, "attachment_id": null, "id": 98119, "time": "2007-01-16T03:20:12Z", "creator": "schroeder@dakosy.de", "creation_time": "2007-01-16T03:20:12Z", "is_private": false, "text": "Hi!\n\nI want to process XSL-FO generated from XML using XSLT 2.0.\nSo i use Saxon-8.8 for the transformation.\nWith Fop-0.91 it works fine.\nBut when i use Version 0.92 or 0.93\nan IllegalStateException encountered (see stack below).\n\nRegards\nJ\u00f6rg\n\n\njava.lang.IllegalStateException: FOTreeBuilder (and the Fop class) cannot be \nreused. Please instantiate a new instance.\n\tat org.apache.fop.fo.FOTreeBuilder.startDocument(FOTreeBuilder.java:147)\n\tat \nnet.sf.saxon.event.ContentHandlerProxy.open(ContentHandlerProxy.java:242)\n\tat net.sf.saxon.event.ProxyReceiver.open(ProxyReceiver.java:76)\n\tat \nnet.sf.saxon.event.ImplicitResultChecker.open(ImplicitResultChecker.java:24)\n\tat \nnet.sf.saxon.event.ImplicitResultChecker.firstContent(ImplicitResultChecker.java:59)\n\tat \nnet.sf.saxon.event.ImplicitResultChecker.startElement(ImplicitResultChecker.java:30)\n\tat \nnet.sf.saxon.event.NamespaceReducer.startElement(NamespaceReducer.java:54)\n\tat \nnet.sf.saxon.event.ComplexContentOutputter.startContent(ComplexContentOutputter.java:481)\n\tat \nnet.sf.saxon.event.ComplexContentOutputter.startElement(ComplexContentOutputter.java:153)\n\tat \nnet.sf.saxon.instruct.ElementCreator.processLeavingTail(ElementCreator.java:243)\n\tat net.sf.saxon.instruct.Block.processLeavingTail(Block.java:353)\n\tat net.sf.saxon.instruct.Instruction.process(Instruction.java:91)\n\tat \nnet.sf.saxon.instruct.ElementCreator.processLeavingTail(ElementCreator.java:250)\n\tat net.sf.saxon.instruct.Template.expand(Template.java:113)\n\tat \nnet.sf.saxon.instruct.CallTemplate$CallTemplatePackage.processLeavingTail(CallTemplate.java:375)\n\tat net.sf.saxon.Controller.transformDocument(Controller.java:1607)\n\tat net.sf.saxon.Controller.transform(Controller.java:1426)"}, {"attachment_id": null, "tags": [], "creator": "bowditch_chris@hotmail.com", "text": "How are you running FOP? From the command line or via an embedded application? \nThe API has changed since 0.91. Have you read?\n\nhttp://xmlgraphics.apache.org/fop/0.93/upgrading.html", "count": 1, "id": 98126, "time": "2007-01-16T06:10:34Z", "bug_id": 41376, "creation_time": "2007-01-16T06:10:34Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "schroeder@dakosy.de", "text": "As well as.\nI have change the fop.bat to add saxon-8.8.0.jar to use XSLT 2.0\n\nI have notice, that the FOTreeBuilder has changed from 0.91 to 0.92\nHe cannot be reused since 0.92.\n(See FOTreeBuilder#startDocument():\n    public void startDocument() throws SAXException {\n        if (used) {\n            throw new IllegalStateException(\"FOTreeBuilder (and the Fop class) \ncannot be reused.\"\n                    + \" Please instantiate a new instance.\");\n        }\n        used = true;\n        rootFObj = null;    // allows FOTreeBuilder to be reused\n        if (log.isDebugEnabled()) {\n            ....\n)\n\nBut it seems, that Saxon calls #startDocument() once again.\n", "count": 2, "id": 98134, "time": "2007-01-16T07:42:13Z", "bug_id": 41376, "creation_time": "2007-01-16T07:42:13Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 41376, "attachment_id": null, "id": 98140, "time": "2007-01-16T07:58:47Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2007-01-16T07:58:47Z", "is_private": false, "text": "(In reply to comment #2)\n> As well as.\n\nI don't understand this remark.\n\n> But it seems, that Saxon calls #startDocument() once again.\n\nWell then isn't the fault with Saxon. startDocument event should only be \ncalled once! Have you asked why startDocument event is generated twice on a \nSaxon users list? I'll leave this bug open for now.\n\n"}, {"count": 4, "tags": [], "creator": "adelmelle@apache.org", "attachment_id": null, "text": "Hi,\n\n> But when i use Version 0.92 or 0.93\n> an IllegalStateException encountered (see stack below).\n<snip />\n> java.lang.IllegalStateException: FOTreeBuilder (and the Fop class) cannot be \n> reused. Please instantiate a new instance.\n\nI'm wondering whether FOP can be any clearer than this? \nIt seems that the Fop class is being used for multiple runs (which, IIC, was perfectly possible with \n0.91)...\n\nDoesn't look like a bug to me.", "id": 98149, "time": "2007-01-16T09:50:23Z", "bug_id": 41376, "creation_time": "2007-01-16T09:50:23Z", "is_private": false}, {"count": 5, "tags": [], "creator": "wavestyle@web.de", "attachment_id": null, "text": "I had the same problem with saxon 8.8 and fop 93.\n\nThen i have changed to saxonb8-7-1j\n(http://downloads.sourceforge.net/saxon/saxonb8-7-1j.zip?modtime=1144880744&big_mirror=0).\nI works absolute perfectly now! So it seems that it's rather a problem with\nsaxon 8.8, not fop.", "id": 98560, "time": "2007-01-26T06:21:06Z", "bug_id": 41376, "creation_time": "2007-01-26T06:21:06Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "gadams@apache.org", "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "count": 6, "id": 156953, "time": "2012-04-01T13:55:25Z", "bug_id": 41376, "creation_time": "2012-04-01T13:55:25Z", "is_private": false}]