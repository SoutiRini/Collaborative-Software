[{"count": 0, "tags": [], "text": "Hi,\n\nSince we've moved to tomcat 3.3-b1 & tomcat 3.3-b2, we've been getting this\nerror into the logs :\n\n2001-09-13 14:44:40 - SessionIdGenerator: Opening /dev/urandom\n2001-09-13 14:44:40 - ServerXmlReader: Config=$TOMCAT_HOME/conf/server.xml\n2001-09-13 14:44:40 - PathSetter: home=/var/tomcat\n2001-09-13 14:44:41 - ContextXmlReader: Context\nconfig=$TOMCAT_HOME/conf/apps-kitu.xml\n2001-09-13 14:44:41 - AutoDeploy: Source or destination missing \n2001-09-13 14:44:41 - AutoWebApp: No autoconf directory /var/tomcat/modules\n2001-09-13 14:44:41 - AutoWebApp: Auto-Adding DEFAULT:/kitu-1.9.39\n2001-09-13 14:44:41 - ContextManager: Tomcat configured and in stable state \n2001-09-13 14:44:41 - WorkDirSetup: Creating work dir\n/var/tomcat/work/kitu.olympe.o2t/ROOT\n2001-09-13 14:44:41 - ContextManager: Adding  kitu.olympe.o2t:/ROOT\n2001-09-13 14:44:41 - WorkDirSetup: Creating work dir\n/var/tomcat/work/DEFAULT/kitu-1.9.39\n2001-09-13 14:44:41 - ContextManager: Adding  DEFAULT:/kitu-1.9.39\n2001-09-13 14:44:41 - Ctx() : Validating web.xml\n2001-09-13 14:44:41 - Ctx() : Error creating validation mark  -\njava.io.FileNotFoundException:\n/var/tomcat/work/kitu.olympe.o2t/ROOT/webxmlval.txt (No such file or directory)\n        at java.io.FileOutputStream.open(Native Method)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:108)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:68)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:138)\n        at\norg.apache.tomcat.facade.WebXmlReader.processWebXmlFile(WebXmlReader.java:237)\n        at org.apache.tomcat.facade.WebXmlReader.contextInit(WebXmlReader.java:112)\n        at org.apache.tomcat.core.Context.init(Context.java:542)\n        at org.apache.tomcat.core.ContextManager.init(ContextManager.java:595)\n        at\norg.apache.tomcat.startup.EmbededTomcat.initContextManager(EmbededTomcat.java:425)\n        at org.apache.tomcat.startup.EmbededTomcat.execute1(EmbededTomcat.java:546)\n        at org.apache.tomcat.startup.EmbededTomcat$1.run(EmbededTomcat.java:530)\n        at\norg.apache.tomcat.util.compat.Jdk12Support$PrivilegedProxy.run(Jdk12Support.java:163)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at\norg.apache.tomcat.util.compat.Jdk12Support.doPrivileged(Jdk12Support.java:96)\n        at org.apache.tomcat.startup.EmbededTomcat.execute(EmbededTomcat.java:528)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at\norg.apache.tomcat.util.IntrospectionUtils.execute(IntrospectionUtils.java:87)\n        at org.apache.tomcat.startup.Main.execute(Main.java:307)\n        at org.apache.tomcat.startup.Main.main(Main.java:134) \n\nis it dangerous ?\nHow can we solve this ?", "is_private": false, "bug_id": 3581, "id": 5461, "time": "2001-09-13T05:52:34Z", "creator": "nicolas.mailhot@one2team.com", "creation_time": "2001-09-13T05:52:34Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "cmanolache@yahoo.com", "is_private": false, "count": 1, "id": 5488, "time": "2001-09-13T15:17:23Z", "bug_id": 3581, "creation_time": "2001-09-13T15:17:23Z", "text": "webxmlval is a mark that the web.xml file has been validated once, so the\nexpensive operation will not be duplicated.\n\nIt is create in the work directory of each app - where you are supposed to be\nable to write ( or jsp will fail ). Please check the directory for file\npermissions ( and for existence - but if it isn't there the workdir may have\nproblems ).\n\nI believe it's a configuration problem - please reopen the bug if you have the\nright permissions and you still see the problem\n\n( it's nothing bad if the file can't be created, but you'll have problems later\nwith jsp, so make sure the workdir exists and is writable )."}, {"count": 2, "tags": [], "creator": "nicolas.mailhot@one2team.com", "attachment_id": null, "is_private": false, "id": 5518, "time": "2001-09-14T00:50:58Z", "bug_id": 3581, "creation_time": "2001-09-14T00:50:58Z", "text": "As you can see in the logs tomcat is responsible for creating the work dir\n\n2001-09-13 14:44:41 - WorkDirSetup: Creating work dir\n/var/tomcat/work/kitu.olympe.o2t/ROOT\n\nsince I've got the following lines in my server.xml\n\n<WebXmlReader validate=\"true\" />\n<WorkDirSetup cleanWorkDir=\"true\" />\n\nMoreover the workdir is writeable by tomcat (else no jsp would ever be compiled,\nand I'd have submitted a blocker bug).\n\nSo the problem does not lie here. Any other idea ?"}, {"count": 3, "tags": [], "creator": "cmanolache@yahoo.com", "attachment_id": null, "id": 5791, "time": "2001-09-19T16:45:42Z", "bug_id": 3581, "creation_time": "2001-09-19T16:45:42Z", "is_private": false, "text": "Aha, cleanWorkDir=true was the problem. Fixed, next nightly will have it.\nBTW, any reason for using cleanWorkDir=true? We have it mostly for backward compat. ( and many thanks for testing it !), I couldn't find any reason you would delete the work dir ( which can be used to store persistent data, will \ncontain the compiled jsp files, etc ). By using it you'll force recompilation\nof all pages and lose anything a servlet may write ( and the work dir is the only dir where a servlet is allowed to write - if sandbox is enabled )"}, {"count": 4, "text": "This tomcat was installed on a box where we test new developments -- therefore I\nprefer to be parano\u00efd concerning what traces the previous versions may have left\nin work\n\nAnyway, thanks a lot", "bug_id": 3581, "attachment_id": null, "id": 5811, "time": "2001-09-20T01:38:07Z", "creator": "nicolas.mailhot@one2team.com", "creation_time": "2001-09-20T01:38:07Z", "tags": [], "is_private": false}]