[{"count": 0, "tags": [], "bug_id": 6494, "attachment_id": null, "id": 10772, "time": "2002-02-15T20:57:31Z", "creator": "dzhang@utdallas.edu", "creation_time": "2002-02-15T20:57:31Z", "is_private": false, "text": "Hi,\n\nTomcat works well from the W2k service; it can be automatically started. But \nafter putting follow code into the $catalina_home\\conf\\server.xml, it could not \nbe started from the service. However, it can ba started by executing \nstartup.bat command from MS-DOS ($catalina_home\\bin). Here is the code which \nwas added into the \"Host\" tag:\n\n<!-- ResearchDB Context -->\n<Context path=\"/ResearchDB\" docBase=\"ResearchDB\" cookies=\"true\" debug=\"0\">\n  <Logger className=\"org.apache.catalina.logger.FileLogger\"\n       prefix=\"researchDB_log.\" suffix=\".txt\" timestamp=\"true\"/>\n\t<Realm  className=\"org.apache.catalina.realm.JDBCRealm\" debug=\"99\"\n        \tdigest=\"MD5\"\n                driverName=\"sun.jdbc.odbc.JdbcOdbcDriver\"\n                connectionURL=\"jdbc:odbc:Authentication\"\n\t\tconnectionName=\"ResearchDB\"\n\t\tconnectionPassword=\"password\"\n                userTable=\"users\" \n                userNameCol=\"user_name\" \n                userCredCol=\"user_pass\"\n                userRoleTable=\"user_roles\" \n                roleNameCol=\"role_name\" />\n</Context>\n\nThe startup.bat is:\n\n@echo off\nrem ---------------------------------------------------------------------------\nrem startup.bat - Start Script for the CATALINA Server\nrem\nrem $Id: startup.bat,v 1.3.4.1 2001/10/12 16:48:57 remm Exp $\nrem ---------------------------------------------------------------------------\nset _CATALINA_HOME=%CATALINA_HOME%\nif not \"%CATALINA_HOME%\" == \"\" goto gotHome\nset CATALINA_HOME=.\nif exist \"%CATALINA_HOME%\\bin\\catalina.bat\" goto gotHome\nset CATALINA_HOME=..\nif exist \"%CATALINA_HOME%\\bin\\catalina.bat\" goto gotHome\necho Unable to determine the value of CATALINA_HOME\ngoto cleanup\n:gotHome\n\"%CATALINA_HOME%\\bin\\catalina\" start %1 %2 %3 %4 %5 %6 %7 %8 %9\n:cleanup\nset CATALINA_HOME=%_CATALINA_HOME%\nset _CATALINA_HOME=\n\n\nMy application ResearchDB was put into the directory ResearchDB under \n$catalina_home\\webapps.\n\nThank you.\n\nDayong Zhang"}, {"count": 1, "tags": [], "text": "I'm using the service on a daily basis, so I'd say it works for me.\nYou should include the error messages you're getting (from the logs).\nAlso, did you try without the JDBC realm ?\n\nNote: If the logs are empty, then it's a VM crash on startup, in which case the\nbug is INVALID (as it's a JVM bug, not a Tomcat bug).", "is_private": false, "id": 10774, "creator": "remm@apache.org", "time": "2002-02-15T22:24:43Z", "bug_id": 6494, "creation_time": "2002-02-15T22:24:43Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 6494, "attachment_id": null, "id": 10805, "time": "2002-02-16T08:51:29Z", "creator": "remm@apache.org", "creation_time": "2002-02-16T08:51:29Z", "is_private": false, "text": "I did some sanity checking, and the 'examples' webapp, which is declared in a\nsimilar way as yours, works fine.\nI'm marking the bug as working for me; reopen the bug is you can add information\non what is exactly failing (stack traces would help)."}, {"count": 3, "tags": [], "bug_id": 6494, "attachment_id": 1200, "id": 10860, "time": "2002-02-18T18:08:51Z", "creator": "dzhang@utdallas.edu", "creation_time": "2002-02-18T18:08:51Z", "is_private": false, "text": "Created attachment 1200\nThis is the log file of today.  There is a detail description on the topic website."}, {"count": 4, "tags": [], "bug_id": 6494, "attachment_id": null, "is_private": false, "id": 10861, "time": "2002-02-18T18:21:15Z", "creator": "dzhang@utdallas.edu", "creation_time": "2002-02-18T18:21:15Z", "text": "Hi, Dear Remy,\n\nThank you very much for your help.\n\nI have posted the log file of today. At the beginning of this test, I started \nup the server mannully by MS-DOS command startup. You can see that it worked \ncorrectly. \n\nAt \"2002-02-18 11:36:08 BrowseServlet: init\", I shut down the server and then \nstart up the server in the W2K service. It did start up. But I got a exception \nfrom the log. And I could NOT log on the web server even the Apache Tomcat 4.0 \ndefault directory:\nhttp://pc47094.utdallas.edu/\n\nSeems there is a bug on the servlet part.\n\nThanks again.\n\nDayong\n"}, {"count": 5, "tags": [], "text": "If the following code is deleted from server.xml file, the webserver works \ncorrectly. \n\n<Realm  className=\"org.apache.catalina.realm.JDBCRealm\" debug=\"99\"\n\t   digest=\"MD5\"\n           driverName=\"sun.jdbc.odbc.JdbcOdbcDriver\"\n           connectionURL=\"jdbc:odbc:Authentication\"\n           connectionName=\"ResearchDB\"\n\t   connectionPassword=\"password\"\n           userTable=\"users\" userNameCol=\"user_name\" userCredCol=\"user_pass\"\n           userRoleTable=\"user_roles\" roleNameCol=\"role_name\" />\n\nBut without Database connection, ResearchDB could not work anymore.\n\nDayong", "is_private": false, "id": 10862, "creator": "dzhang@utdallas.edu", "time": "2002-02-18T18:32:05Z", "bug_id": 6494, "creation_time": "2002-02-18T18:32:05Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 6494, "attachment_id": null, "id": 10864, "time": "2002-02-18T19:53:25Z", "creator": "remm@apache.org", "creation_time": "2002-02-18T19:53:25Z", "is_private": false, "text": "And, can you add the error logs you get when the realm is added (that's the\ninteresting part) ?"}, {"count": 7, "tags": [], "bug_id": 6494, "is_private": false, "id": 11049, "attachment_id": null, "creator": "dzhang@utdallas.edu", "creation_time": "2002-02-21T18:06:21Z", "time": "2002-02-21T18:06:21Z", "text": "Hi, Remy,\n\nWe have solvt this problem. It is from the ODBC. We should use system DSN, not \nuser DSN.\n\nThanks for your help.\n\nDayong"}]