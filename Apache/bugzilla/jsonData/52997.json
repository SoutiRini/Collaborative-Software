[{"count": 0, "tags": [], "text": "If you open a script, change it and then try exit JMeter, it will ask you to save the changes, which is good practice.\nThe problem is that when you try to save the file and you fail to do so (i.e. when you try to write over a read only file) JMeter will exit without letting you another chance to save the file.\n\n(might be the same in a case you don't have permissions to save to file in specific folder, but haven't tried this)", "attachment_id": null, "id": 155343, "creator": "shmulikk@gmail.com", "time": "2012-03-28T15:53:20Z", "bug_id": 52997, "creation_time": "2012-03-28T15:53:20Z", "is_private": false}, {"text": "Date: Mon Apr 23 20:15:41 2012\nNew Revision: 1329421\n\nURL: http://svn.apache.org/viewvc?rev=1329421&view=rev\nLog:\nBug 52997 - Jmeter should not exit without saving Test Plan if saving before exit fails\n\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/gui/action/Save.java\n   jmeter/trunk/xdocs/changes.xml", "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "count": 1, "id": 158318, "time": "2012-04-23T20:16:27Z", "bug_id": 52997, "creation_time": "2012-04-23T20:16:27Z", "is_private": false}, {"count": 2, "tags": [], "text": "Unfortunately, the fix does not work.\n\nFile#canWrite() only returns true if the file already exists *and* can be written, so the upfront check means that test plans cannot be saved to new files.\n\nI think the best is to deal with any problems in the catch clause, rather than trying to anticipate them.\n\nFurther testing shows that the problem is caused by the call to\n\nActionRouter.getInstance().doActionNow(new ActionEvent(subTree, e.getID(), ActionNames.SUB_TREE_SAVED));\n\nbefore the save is attempted. \nIf this is moved after the SaveService.saveTree() call, the code behaves much better. Patch to be checked in shortly.", "attachment_id": null, "id": 158372, "creator": "sebb@apache.org", "time": "2012-04-24T12:23:09Z", "bug_id": 52997, "creation_time": "2012-04-24T12:23:09Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 52997, "attachment_id": null, "is_private": false, "id": 158373, "time": "2012-04-24T12:38:21Z", "creator": "sebb@apache.org", "creation_time": "2012-04-24T12:38:21Z", "text": "Fixed in SVN:\n\nURL: http://svn.apache.org/viewvc?rev=1329669&view=rev\nLog:\nBug 52997 - Jmeter should not exit without saving Test Plan if saving before exit fails\n\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/gui/action/Save.java\n\n\nNote: I removed the setDirty(true) method call and the clearing of the file name.\nFailure to save the file should not affect the dirty status.\nClearing the filename does not really achieve anything.\n\nLeaving the issue open for now, in case there are further problems."}, {"count": 4, "tags": [], "text": "URL: http://svn.apache.org/viewvc?rev=1330275&view=rev\nLog:\nBug 52997 - Jmeter should not exit without saving Test Plan if saving before exit fails\nFix crash with larger trees; only update saved copy of tree if we wrote the whole tree\n\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/gui/action/Save.java\n\nHopefully issue now really fixed!", "is_private": false, "id": 158420, "creator": "sebb@apache.org", "time": "2012-04-25T13:28:00Z", "bug_id": 52997, "creation_time": "2012-04-25T13:28:00Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 52997, "attachment_id": null, "id": 158710, "time": "2012-05-01T13:37:33Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-05-01T13:37:33Z", "is_private": false, "text": "Tests are OK for me.\nClosing issue as fixed."}, {"count": 6, "tags": [], "creator": "shmulikk@gmail.com", "is_private": false, "text": "Works for me too with r1332261.", "id": 158715, "time": "2012-05-01T14:32:15Z", "bug_id": 52997, "creation_time": "2012-05-01T14:32:15Z", "attachment_id": null}]