[{"attachment_id": 22351, "tags": [], "creator": "avizner@nextnine.com", "text": "Created attachment 22351\nThe keystore i use\n\nI'm usind apache-tomcat-6.0.16 with jdk1.6.0_06 (but it was also occur with jdk1.5.0_16)\nI have a .keystore file which doesn\u2019t matches the SSL definitions in the server.xml(wrong password).\ntomcat 4 handled it well \u2013 it was unable to connect to it but the logs showed a friendly messages and the server continue working fine.\nHowever in tomcat 6 when I configured the connectors in the server.xml with default settings or as\" org.apache.coyote.http11.Http11Protocol\" \nand I started the service, the tomcat get in an infinite loop which holds the CPU in 90% and keep writing to catalina log the following error:\n\n*************************************************************************\n03/08/2008 11:09:37 org.apache.tomcat.util.net.JIoEndpoint$Acceptor run\nSEVERE: Socket accept failed\njava.net.SocketException: SSL handshake errorjavax.net.ssl.SSLException: No available certificate or key corresponds to the SSL cipher suites which are enabled.\n                at org.apache.tomcat.util.net.jsse.JSSESocketFactory.acceptSocket(JSSESocketFactory.java:150)\n                at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:310)\n                at java.lang.Thread.run(Thread.java:619)\n*************************************************************************\n\nWhen I configure the connectors to work with \u201corg.apache.coyote.http11.Http11NioProtocol\u201d the problem seems to disappear", "count": 0, "id": 119320, "time": "2008-08-03T04:22:43Z", "bug_id": 45528, "creation_time": "2008-08-03T04:22:43Z", "is_private": false}, {"count": 1, "tags": [], "creator": "avizner@nextnine.com", "attachment_id": 22352, "text": "Created attachment 22352\nThe server.xml i use with the connector of Http11Protocol", "id": 119321, "time": "2008-08-03T04:29:02Z", "bug_id": 45528, "creation_time": "2008-08-03T04:29:02Z", "is_private": false}, {"attachment_id": 22353, "tags": [], "creator": "avizner@nextnine.com", "text": "Created attachment 22353\nThe catalina log", "count": 2, "id": 119322, "time": "2008-08-03T04:29:53Z", "bug_id": 45528, "creation_time": "2008-08-03T04:29:53Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "This has been fixed in trunk and proposed for 5.5.x and 6.0.x.", "count": 3, "id": 119661, "time": "2008-08-10T10:27:40Z", "bug_id": 45528, "creation_time": "2008-08-10T10:27:40Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "For the record, neither the alias nor the password appears to be the problem. The only way I could reproduce the loop of log messages it was to take a valid, working SSL configuration and set a value for the ciphers attribute that was not compatible with the certificate Tomcat was using.\n", "count": 4, "id": 119827, "time": "2008-08-14T03:41:12Z", "bug_id": 45528, "creation_time": "2008-08-14T03:41:12Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 45528, "attachment_id": null, "text": "The original patch was rejected. I have just proposed a reworked patch.", "id": 119965, "time": "2008-08-20T16:23:22Z", "creator": "markt@apache.org", "creation_time": "2008-08-20T16:23:22Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 45528, "is_private": false, "text": "The improved patch has been applied to 6.0.x and will be included in 6.0.19 onwards.", "id": 120417, "time": "2008-09-06T13:06:54Z", "creator": "markt@apache.org", "creation_time": "2008-09-06T13:06:54Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "This has been fixed in 5.5.x/4.1.x and will be included in 5.5.28 and 4.1.40 onwards", "count": 7, "id": 127348, "time": "2009-05-24T17:19:40Z", "bug_id": 45528, "creation_time": "2009-05-24T17:19:40Z", "is_private": false}]