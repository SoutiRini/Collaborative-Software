[{"count": 0, "tags": [], "text": "Tomcat (3.3a.1, but also a similar problem with 3.2.4) dies on startup on Mac Classic OS (version 9.1). With the exceptions listed below. This is a major pain, as tomcat is the only decent free webserver for this platform.\n\nThe cause of the java.io.IOException: OSErr: -50 at java.io.File.getCanonicalPath is probably the following lines from org/apache/tomcat/util/IntrospectionUtils.java\n\n                  File f1=new File ( f, \"..\");\n\nThe \"..\" path is probably not valid on Classic Mac OS. tomcat 3.2.1 runs ok, so this (or a similar) bug probably got introduced somewhere in 3.2.[234]\n\n\nJdk11Compat: Installing jar protocol handler\njava.io.IOException: OSErr: -50\n        at java.io.File.getCanonicalPath(File.java)\n        at org.apache.tomcat.util.IntrospectionUtils.guessInstall(Compiled Code)\n        at org.apache.tomcat.util.IntrospectionUtils.guessInstall(Unknown Source)\n        at org.apache.tomcat.startup.EmbededTomcat.initContextManager(Compiled Code)\n        at org.apache.tomcat.startup.EmbededTomcat.execute1(Unknown Source)\n        at org.apache.tomcat.startup.EmbededTomcat$1.run(Unknown Source)\n        at org.apache.tomcat.util.compat.Jdk11Compat.doPrivileged(Unknown Source)\n        at org.apache.tomcat.startup.EmbededTomcat.execute(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.startTomcat(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.execute(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.main(Unknown Source)\n        at com.apple.mrj.JManager.JMStaticMethodDispatcher.run(JMAWTContextImpl.java)\n        at java.lang.Thread.run(Thread.java)\nEmbededTomcat: Default commonCL\nERROR reading /iMac/Applications (Mac OS 9)/jakarta-\ntomcat-3.3a.1/conf/server.xml\nAt Line 13 /Server/ContextManager/LoaderInterceptor11/ useApplicationLoader=true\n\n\njava.lang.NullPointerException\n        at org.apache.tomcat.util.xml.ObjectCreate.start(Compiled Code)\n        at org.apache.tomcat.util.xml.XmlMapper.matchStart(Compiled Code)\n        at org.apache.tomcat.util.xml.XmlMapper.startElement(Compiled Code)\n        at org.xml.sax.helpers.XMLReaderAdapter.startElement(Compiled Code)\n        at org.apache.crimson.parser.Parser2.maybeElement(Compiled Code)\n        at org.apache.crimson.parser.Parser2.content(Compiled Code)\n        at org.apache.crimson.parser.Parser2.maybeElement(Compiled Code)\n        at org.apache.crimson.parser.Parser2.content(Compiled Code)\n        at org.apache.crimson.parser.Parser2.maybeElement(Compiled Code)\n        at org.apache.crimson.parser.Parser2.parseInternal(Compiled Code)\n        at org.apache.crimson.parser.Parser2.parse(Parser2.java:305)\n        at org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:442)\n        at org.xml.sax.helpers.XMLReaderAdapter.parse(XMLReaderAdapter.java:223)\n        at org.apache.tomcat.util.xml.XmlMapper.readXml(Unknown Source)\n        at org.apache.tomcat.modules.config.ServerXmlReader.loadConfigFile(Unknown Source)\n        at org.apache.tomcat.modules.config.ServerXmlReader.addInterceptor(Compiled Code)\n        at org.apache.tomcat.core.ContextManager.addInterceptor(Compiled Code)\n        at org.apache.tomcat.startup.EmbededTomcat.initContextManager(Compiled Code)\n        at org.apache.tomcat.startup.EmbededTomcat.execute1(Unknown Source)\n        at org.apache.tomcat.startup.EmbededTomcat$1.run(Unknown Source)\n        at org.apache.tomcat.util.compat.Jdk11Compat.doPrivileged(Unknown Source)\n        at org.apache.tomcat.startup.EmbededTomcat.execute(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.startTomcat(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.execute(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.main(Unknown Source)\n        at com.apple.mrj.JManager.JMStaticMethodDispatcher.run(JMAWTContextImpl.java)\n        at java.lang.Thread.run(Thread.java)\n\nEmbededTomcat: exception initializing ContextManager\norg.apache.tomcat.core.TomcatException: Root cause - null\n        at org.apache.tomcat.modules.config.ServerXmlReader.loadConfigFile(Unknown Source)\n        at org.apache.tomcat.modules.config.ServerXmlReader.addInterceptor(Compiled Code)\n        at org.apache.tomcat.core.ContextManager.addInterceptor(Compiled Code)\n        at org.apache.tomcat.startup.EmbededTomcat.initContextManager(Compiled Code)\n        at org.apache.tomcat.startup.EmbededTomcat.execute1(Unknown Source)\n        at org.apache.tomcat.startup.EmbededTomcat$1.run(Unknown Source)\n        at org.apache.tomcat.util.compat.Jdk11Compat.doPrivileged(Unknown Source)\n        at org.apache.tomcat.startup.EmbededTomcat.execute(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.startTomcat(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.execute(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.main(Unknown Source)\n        at com.apple.mrj.JManager.JMStaticMethodDispatcher.run(JMAWTContextImpl.java)\n        at java.lang.Thread.run(Thread.java)\norg.apache.tomcat.core.TomcatException: Root cause - EmbededTomcat.initContextManager\n        at org.apache.tomcat.startup.Tomcat.startTomcat(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.execute(Unknown Source)\n        at org.apache.tomcat.startup.Tomcat.main(Unknown Source)\n        at com.apple.mrj.JManager.JMStaticMethodDispatcher.run(JMAWTContextImpl.java)\n        at java.lang.Thread.run(Thread.java)", "is_private": false, "bug_id": 6341, "id": 10506, "time": "2002-02-09T10:16:23Z", "creator": "m.redington@ucl.ac.uk", "creation_time": "2002-02-09T10:16:23Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 6341, "attachment_id": null, "text": "For now, I'm marking this as invalid since if the\ninvoking command contained a -Dtomcat.home=/path/to/tomcat, \n(with the Mac way of specifing paths of course) then Tomcat should work.  \nPlease re-open with details of your start-up if you still have a problem.\n\nAlternatively, please give the value of your System.getProperty(\"os.name\") so\nthat I can add a check to skip trying \"..\" in this case.", "id": 10512, "time": "2002-02-10T06:25:46Z", "creator": "william.barker@wilshire.com", "creation_time": "2002-02-10T06:25:46Z", "is_private": false}, {"count": 2, "tags": [], "text": "I'm using JBindery to start tomcat, with the tomcat.home defined in the Properties panel (see http://www.rainwatersoft.com/java4u/tomcat_on_macintosh/ for instructions provided by Basil Bourqe). According to the JBindery docs, this is equivalent to using a -D flag, so that is not a potential fix.\n\nMy os.name property is \"Mac OS\", but even using that and \"..\" is a bit of a hack, as it breaks the platform independence of java. Maybe you can accomplish something similar with File.getParent(). I'd send a patch, but I'm swamped here.\n\nIf anyone fixes this, and would like me to test it on Mac OS X, that's no problem.\n\n", "is_private": false, "id": 10718, "creator": "m.redington@ucl.ac.uk", "time": "2002-02-14T19:40:44Z", "bug_id": 6341, "creation_time": "2002-02-14T19:40:44Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 6341, "attachment_id": null, "id": 10723, "time": "2002-02-14T20:54:35Z", "creator": "m.redington@ucl.ac.uk", "creation_time": "2002-02-14T20:54:35Z", "is_private": false, "text": "I meant I'm happy to test on Mac Classic OS, not Mac OS X (see previous comment). The problem is Classic specific. Tomcat runs fine on X for me."}, {"count": 4, "tags": [], "text": "This is now fixed in the CVS HEAD, and should appear in tonight's nightly \n(which is pretty much 3.3.1-B1 + this fix).", "is_private": false, "id": 10740, "creator": "william.barker@wilshire.com", "time": "2002-02-15T02:45:22Z", "bug_id": 6341, "creation_time": "2002-02-15T02:45:22Z", "attachment_id": null}]