[{"text": "It would be beneficial if the jar task supported the ability to replace tokens \nin files as it builds the jar file using nested filtersets.", "tags": [], "creator": "sschnick@yahoo.com", "is_private": false, "count": 0, "id": 70504, "time": "2005-02-04T17:51:39Z", "bug_id": 33404, "creation_time": "2005-02-04T17:51:39Z", "attachment_id": null}, {"text": "I dont think we're going to add this. Since you can do it via a <copy> before\nthe <jar>, its a bit to gratuitous. Also, given that filtering works on binary\nfiles,  your idea of filtering on JAR is going to cause no end of grief the\nmoment you (or anyone else) add some binaries to the JAR.", "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "count": 1, "id": 70568, "time": "2005-02-07T10:43:51Z", "bug_id": 33404, "creation_time": "2005-02-07T10:43:51Z", "is_private": false}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "is_private": false, "id": 141050, "time": "2010-10-26T06:54:01Z", "bug_id": 33404, "creation_time": "2010-10-26T06:54:01Z", "text": "this is a cleaner approach to part 4 of bug 44816\n\n*** This bug has been marked as a duplicate of bug 44816 ***"}, {"count": 3, "tags": [], "bug_id": 33404, "attachment_id": null, "text": "Sure you have to be careful to avoid filtering unwanted files, but doesn't this apply to the <copy> task in an equal manner?\n\nIf you would limit filtering to specific filesets as suggested by the OP, I don't see more potential to do harm than with the <copy> task.\n\n<filter token=\"BUILD.VERSION\" value=\"${BUILD.VERSION}\" />\n<filter token=\"BUILD.NUMBER\" value=\"${SAFE.BUILD.NUMBER}\" />\n<copy todir=\"/tmp\" filtering=\"true\" overwrite=\"true\">\n  <fileset dir=\"src/main/resources\">\n    <include name=\"**\" />\n  </fileset>\n</copy>\n<jar jarfile=\"target/file-${BUILD.VERSION}.jar\">\n  <zipfileset dir=\"/tmp\">\n    <patternset>\n      <include name=\"**\" />\n    </patternset>\n  </zipfileset>\n</jar>\n\nvs.\n\n<filter token=\"BUILD.VERSION\" value=\"${BUILD.VERSION}\" />\n<filter token=\"BUILD.NUMBER\" value=\"${SAFE.BUILD.NUMBER}\" />\n<jar jarfile=\"target/file-${BUILD.VERSION}.jar\">\n  <zipfileset dir=\"src/main/resources\" filtering=\"true\">\n    <patternset>\n      <include name=\"**\" />\n    </patternset>\n  </zipfileset>\n</jar>\n\n\nAs I often need to filter things, I've patched Ant. It's a simple change if you assume all files have the same encoding like in my use case, but still a nice enhancement. I'd vote to reconsider your decision.", "id": 147511, "time": "2011-06-26T11:31:53Z", "creator": "apache@triemax.com", "creation_time": "2011-06-26T11:31:53Z", "is_private": false}]