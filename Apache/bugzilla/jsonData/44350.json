[{"count": 0, "tags": [], "bug_id": 44350, "is_private": false, "text": "Since 2.2.8 we see this warning when starting and stopping apache.\n\n[warn] worker xxx already used by another worker\n\nProxyPass config exampel:\n\n<VirtualHost 10.1.10.8:443 10.1.10.9:443>\n        ServerName www.example.com\n        ServerAdmin support@example.com\n        SSLEngine on\n        SSLCipherSuite ALL\n        SSLProtocol -SSLv3 all\n        SSLCertificateFile /files/x.cert\n        SSLCertificateKeyFile /files/x.key\n\n        ProxyPass /xyz http://www1/xxx\n        ProxyPassReverse /xyz http://www1/xxx\n        ProxyPass /XYZ http://www1/xxx\n        ProxyPassReverse /XYZ http://www1/xxx\n\n        ProxyPass /Xyz http://www2/xxx\n        ProxyPassReverse /Xyz http://www2/xxx\n        ProxyPass /xyz http://www2/xxx\n        ProxyPassReverse /xyz http://www2/xxx\n        ProxyPass /XYZ http://www2/xxx\n        ProxyPassReverse /XYZ http://www2/xxx\n\n        BrowserMatch \".*MSIE.*\" \\\n          ssl-unclean-shutdown \\\n          downgrade-1.0 force-response-1.0\n\n        DocumentRoot /files\n\n        SetEnv force-proxy-request-1.0 1\n        SetEnv proxy-nokeepalive 1\n</VirtualHost>", "id": 113404, "time": "2008-02-04T04:54:14Z", "creator": "nicklas.bondesson@mindping.se", "creation_time": "2008-02-04T04:54:14Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "nicklas.bondesson@mindping.se", "text": "The previous example did not show the reality. Here's a new example.\n\n\n<VirtualHost 10.1.10.8:443 10.1.10.9:443>\n        ServerName www.example.com\n        ServerAdmin support@example.com\n        SSLEngine on\n        SSLCipherSuite ALL\n        SSLProtocol -SSLv3 all\n        SSLCertificateFile /files/x.cert\n        SSLCertificateKeyFile /files/x.key\n\n        ProxyPass /xyz http://www1/xyz\n        ProxyPassReverse /xyz http://www1/xyz\n        ProxyPass /XYZ http://www1/XYZ\n        ProxyPassReverse /XYZ http://www1/XYZ\n\n        # this section is repeated in other vhosts\n        ProxyPass /aaa http://www2/aaa\n        ProxyPassReverse /aaa http://www2/aaa\n        ProxyPass /bbb http://www2/bbb\n        ProxyPassReverse /bbb http://www2/bbb\n        # end repeating section\n\n        BrowserMatch \".*MSIE.*\" \\\n          ssl-unclean-shutdown \\\n          downgrade-1.0 force-response-1.0\n\n        DocumentRoot /files\n\n        SetEnv force-proxy-request-1.0 1\n        SetEnv proxy-nokeepalive 1\n</VirtualHost>", "id": 113586, "attachment_id": null, "bug_id": 44350, "creation_time": "2008-02-09T09:00:50Z", "time": "2008-02-09T09:00:50Z", "is_private": false}, {"count": 2, "tags": [], "creator": "yneko@yamamaya.com", "is_private": false, "text": "I too have confirmed same problem.\nI think SSL and vhost are not related to this problem.\nMy config relating to it is;\n\n<Location /app1/>\n    ProxyPass               http://192.168.1.100/app1/\n    ProxyPassReverse        http://192.168.3.100/app1/\n</Location>\n\n<Location /app2/>\n    ProxyPass               http://192.168.1.100/app2/\n    ProxyPassReverse        http://192.168.3.100/app2/\n</Location>\n", "id": 119162, "time": "2008-07-30T18:27:35Z", "bug_id": 44350, "creation_time": "2008-07-30T18:27:35Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 44350, "attachment_id": null, "id": 119163, "time": "2008-07-30T18:29:43Z", "creator": "yneko@yamamaya.com", "creation_time": "2008-07-30T18:29:43Z", "is_private": false, "text": "sorry!\n\n<Location /app1/>\n    ProxyPass               http://192.168.1.100/app1/\n    ProxyPassReverse        http://192.168.1.100/app1/\n</Location>\n\n<Location /app2/>\n    ProxyPass               http://192.168.1.100/app2/\n    ProxyPassReverse        http://192.168.1.100/app2/\n</Location>\n"}, {"count": 4, "tags": [], "bug_id": 44350, "attachment_id": null, "id": 119797, "time": "2008-08-13T13:03:12Z", "creator": "rahul.g.nair@gmail.com", "creation_time": "2008-08-13T13:03:12Z", "is_private": false, "text": "For the first reporter (virtualhost + ssl), the configuration is invalid.\nThere cannot be more than one ProxyPassReverse pointing to the same URL, in your\ncase\n\nhttp://www1/xxx is used twice and so is http://www2/xxx\n\nThe reason for the above restriction is that ProxyPassReverse is used to adjust the Location header in redirects.\ni.e suppose http://www1/xxx/XXX is now redirected to http://www1/yyy/XXX\nwhat should be the redirect that the client receives?\n(which of [Xx][Yy][ZZ])\n\nThe second configuration(s) will not cause this error since the only reason for\nthis error is multiple ProxyPass directives with the same URL backend.\n\ni.e\nProxyPass /xyz http://webproxy/app1/\nProxyPass /abc http://webproxy/app1/\n\nshould cause it.\n\nNote that the above is not a problem with ProxyPass, but it does warn you\nin the interests of making sure that it is not a misconfiguration, but lets\nyou do it any way.\n\n"}, {"count": 5, "tags": [], "creator": "rahul.g.nair@gmail.com", "attachment_id": null, "is_private": false, "id": 119800, "time": "2008-08-13T15:02:41Z", "bug_id": 44350, "creation_time": "2008-08-13T15:02:41Z", "text": "I think I was wrong about multiple ProxyPassReverse there can be multiple ppr with same backend-url.\n"}, {"count": 6, "tags": [], "bug_id": 44350, "attachment_id": null, "id": 119825, "time": "2008-08-14T03:13:54Z", "creator": "rahul.g.nair@gmail.com", "creation_time": "2008-08-14T03:13:54Z", "is_private": false, "text": "- Or rather it should be possible to use correct ProxyPassReverse by matching it against the client request.\nAs of now, it is not done by apache.\n\n\nProxyPass /app1 http://webproxy.india.sun.com/tst\nProxyPassReverse /app1 http://webproxy.india.sun.com/tst\n\nProxyPass /app2 http://webproxy.india.sun.com/tst\nProxyPassReverse /app2 http://webproxy.india.sun.com/tst\n\nbackend server\n=================================\n|echo \"GET /tst HTTP/1.0\\n\\n\" | nc webproxy 80\nHTTP/1.1 302 Moved Temporarily\nServer: Sun-Java-System-Web-Proxy-Server/4.0.4\nDate: Thu, 14 Aug 2008 09:52:21 GMT\nContent-length: 0\nContent-type: text/html\nLocation: http://webproxy.india.sun.com/tst/\nConnection: close\n\nLocation => http://agneyam/app1\n=================================\n|echo \"GET /app1 HTTP/1.0\\n\\n\" | nc 0 8080 | more\nHTTP/1.1 302 Moved Temporarily\nDate: Thu, 14 Aug 2008 09:52:27 GMT\nServer: Sun-Java-System-Web-Proxy-Server/4.0.4\nContent-length: 0\nContent-type: text/html\nLocation: http://agneyam/app1/\nVia: 1.0 agneyam\nConnection: close\n\nLocation should have been http://agneyam/app2\n=================================\n|echo \"GET /app2 HTTP/1.0\\n\\n\" | nc 0 8080 | more\nHTTP/1.1 302 Moved Temporarily\nDate: Thu, 14 Aug 2008 09:52:32 GMT\nServer: Sun-Java-System-Web-Proxy-Server/4.0.4\nContent-length: 0\nContent-type: text/html\nLocation: http://agneyam/app1/\nVia: 1.0 agneyam\nConnection: close\n\n"}, {"count": 7, "tags": [], "creator": "lcynkin@honestyonline.com", "text": "I tested the following scenarios with 2.2.11:\n\nScenario A:\n\nProxyPass / ajp://localhost:8009/a\nProxyPass /b ajp://localhost:8009/b\nProxyPass /c ajp://localhost:8009/c\n\nScenario B:\n\nProxyPass / ajp://localhost:8009/\nProxyPass /b ajp://localhost:8009/b\nProxyPass /c ajp://localhost:8009/c\n\nScenario C:\n\nProxyPass / ajp://localhost:8009/a\nProxyPass /b ajp://localhost:8009/a/b\nProxyPass /c ajp://localhost:8009/a/c\n\nScenario A generates no warnings, but Scenario B and C generate two \"worker xxx already used by another worker\" warnings.  Removing the trailing slash from the first ProxyPass directive in Scenario B does not change the result.\n\nReopening after consultation with Rahul.", "id": 124592, "time": "2009-02-02T11:54:25Z", "bug_id": 44350, "creation_time": "2009-02-02T11:54:25Z", "is_private": false, "attachment_id": null}, {"count": 8, "attachment_id": null, "bug_id": 44350, "text": "I just stumbled on this warning with a configuration like\n\nProxyPass /     http://localhost:8800/foo/\nProxyPass /foo/ http://localhost:8800/foo/\n\nMy suggestion is to get rid of the warning, unless there is some deeper problem I don't see.  This configuration is completely reasonable and it seems to work fine.  In my case, I'm doing it because I want to reach the application on http://localhost:8800/foo/ from the root of my apache server, but the application \ngenerates URLs starting with /foo/ so I want to proxy those correctly too.  But I can think of other reasons to reverse proxy the same remote server under different URLs.\n\nNor can I imagine the warning has helped many people out.  If someone proxied to the same remote location twice by accident, they would find out soon enough anyway.\n\nAndrew", "id": 131128, "time": "2009-10-14T17:06:47Z", "creator": "andrew@pimlott.net", "creation_time": "2009-10-14T17:06:47Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "bug_id": 44350, "text": "https://issues.apache.org/bugzilla/show_bug.cgi?id=48947", "id": 137700, "time": "2010-06-17T09:00:16Z", "creator": "me@eduard-siebert.de", "creation_time": "2010-06-17T09:00:16Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "is_private": false, "id": 137703, "time": "2010-06-17T09:28:47Z", "bug_id": 44350, "creation_time": "2010-06-17T09:28:47Z", "text": "\n\n*** This bug has been marked as a duplicate of bug 48947 ***"}]