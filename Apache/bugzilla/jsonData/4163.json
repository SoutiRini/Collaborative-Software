[{"count": 0, "tags": [], "bug_id": 4163, "is_private": false, "text": "When saying   <taskdef name=\"somewhat\" classname=\"org.apache.tools.ant.Project\" />or any other existing class, there is no error message, that the class does not extend Task. I think there should be an immediate fatal error terminating the build process. The same seems to be valid for definitions in default.properties.Current behaviour is, that when initializing the task:  <somewhat xyz=\"somewhatelse\" />there is some \"class org.apache.tools.ant.Project does not support attribute xyz\", which is true but misleading. If one invokes the task without any attributes, ant terminates with a NoSuchMethodException.Proposed fix: add something like  if(!Task.class.isAssignableFrom(taskClass))    throw new BuildException(taskClass.toString()+\" does not extend org.apache.tools.ant.Task\");to Project.addTaskDefinition. It would be nice to have a proper location information attached pointing at the position of the <taskdef> in the build.xml (or the position in defaults.properties). I think, this bug is somewhat related to #3205.Anyway, thanks to all developers here for the great tool.Cheers,Ralf.", "id": 6702, "time": "2001-10-15T00:48:50Z", "creator": "ralf@rw7.de", "creation_time": "2001-10-15T00:48:50Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "steve_l@iseran.com", "text": "One of the reasons taskdef doesnt check is that you dont need to be a subclass \nof Task to be executed, just export a method called execute().\n\nOne might argue that we would be better with an interface Taskable which Task \nimplemented, and which other classes could also interface if they wished to \nbecome and ant task. But it doesnt work like that now, and to change things \nruns the risk of breaking existing builds. \n\nWhether we can provide more informative error messages while still retaining \nthe same behaviour as now is something to consider. ", "id": 6713, "time": "2001-10-15T12:56:20Z", "bug_id": 4163, "creation_time": "2001-10-15T12:56:20Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 4163, "is_private": false, "text": "At first, sorry about the unformatted text. It was formatted when I clicked on\ncommit. Hope it's better with Mozilla.\n\nI didn't know, that a task has not to extend Task. I think, the idea with a\nTaskable interface is a significant design improvement, but this could be\ndelayed until a release which break user-task compatibility anyway for some more\npressing reason.\n\nFor now I think it's good idea to look for that public void execute() method and\nemit an informative error message if it does not exist. Additionally, one could\ncheck the class for being public, not abstract, not an interface and having a\npublic constructor with no arguments. \n\nThis should happen before ant tries to instantiate the task or set any of the\ntask's attributes, and the error message's location should point at the\n<taskdef> tag. Again, it wouldn't hurt to make that work for default.properties\nas well.", "id": 6741, "time": "2001-10-16T00:58:43Z", "creator": "ralf@rw7.de", "creation_time": "2001-10-16T00:58:43Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "That is definetly a good idea - would you mind sending a patch for this ? ;)", "is_private": false, "id": 6743, "creator": "donaldp@apache.org", "time": "2001-10-16T01:58:41Z", "bug_id": 4163, "creation_time": "2001-10-16T01:58:41Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 4163, "attachment_id": null, "text": "I don't think the Taskable interface would be a good step. I think the people \nwho use the TaskAdapter generally like the fact that their task is completely \ncompile-time decoupled from Ant. ", "id": 6772, "time": "2001-10-16T16:28:14Z", "creator": "conor@apache.org", "creation_time": "2001-10-16T16:28:14Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 4163, "attachment_id": null, "is_private": false, "id": 6776, "time": "2001-10-17T00:03:56Z", "creator": "ralf@rw7.de", "creation_time": "2001-10-17T00:03:56Z", "text": "My experience is, that compile-time decoupling isn't possible anyway, because\nany task I could think of needs that BuildException.\n\nAFAIK throwing a BuildException is the only clean way to signal a build error,\ntogether with some nice location information. Probably any task has some\nexternal error conditions. Mostly there will be some IO, thus it has an\nIOException to catch and rethrow as BuildException."}, {"count": 6, "attachment_id": null, "bug_id": 4163, "is_private": false, "id": 6873, "time": "2001-10-19T00:36:22Z", "creator": "bodewig@apache.org", "creation_time": "2001-10-19T00:36:22Z", "tags": [], "text": "Regardless of whether we want to introduce a Taskable interface (and enforce it)\nor not - something that would need to be discussed on ant-dev, not here - checking\nfor an execute method should be done.\n\nSo how about the patch 8-)"}, {"count": 7, "attachment_id": null, "bug_id": 4163, "text": "I'll try to make a patch. \n\nHowever, I don't have much spare time, and up to now I didn't even succeed to\nget the junit tests running on my system after checkout.\n\nSo it will take some time...", "id": 6963, "time": "2001-10-21T23:51:57Z", "creator": "ralf@rw7.de", "creation_time": "2001-10-21T23:51:57Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "text": "Created attachment 728\nFirst try, not yet really tested", "attachment_id": 728, "id": 7322, "creator": "ralf@rw7.de", "time": "2001-10-30T13:10:57Z", "bug_id": 4163, "creation_time": "2001-10-30T13:10:57Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 4163, "is_private": false, "text": "applied the patch for nightly build 2001-11-03", "id": 7477, "time": "2001-11-02T06:49:22Z", "creator": "bodewig@apache.org", "creation_time": "2001-11-02T06:49:22Z", "attachment_id": null}]