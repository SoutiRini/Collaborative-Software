[{"count": 0, "tags": [], "bug_id": 49018, "attachment_id": null, "text": "Steps to reproduce:\n1. Login to the Tomcat Manager Application\n2. Select a web application that has several sessions that are inactive for more than 2 minutes\n3. In the text field next to the \"Expire sessions\" button print \"2\"\n4. Press \"Expire sessions\"\n5. Sample observed result:\n\nOK - Session information for application at context path /myapp\nDefault maximum session inactive interval 30 minutes\n<1 minutes:16 sessions\n1 - <2 minutes:2 sessions\n2 - <3 minutes:5 sessions\n3 - <4 minutes:1 sessions\n4 - <5 minutes:2 sessions\n5 - <6 minutes:1 sessions\n6 - <7 minutes:2 sessions\n9 - <10 minutes:1 sessions\n8 minutes:expired 0 sessions\n\nActually some sessions were expired (even if the above message prints \"0\").\n\nExpected result:\nAll sessions with idle time > 2 minutes had to be expired.\n\nThe bug is in the following lines of ManagerServlet#sessions(PrintWriter, String, int):\n\nLines 1176-1179\n                if (idle >= 0 && time >= idle*60) {\n                    sessions[i].expire();\n                    idle++;\n                }\n\nThe patch would be to replace \"idle++\" with \"expired++\",\nbecause \"idle\" is the time (in minutes) as submitted from the web form and \"expired\" is the counter.", "id": 135763, "time": "2010-03-29T15:18:35Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-03-29T15:18:35Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 49018, "attachment_id": null, "text": "Fixed in trunk (r931415), proposed for 6.0.x.\n\nTomcat 5.5.x is not affected by this issue: it does not have \"Expire sessions\" action in the Manager app.", "id": 135921, "time": "2010-04-07T03:35:03Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-04-07T03:35:03Z", "is_private": false}, {"count": 2, "tags": [], "text": "This has been fixed in 6.0.x and will be included in 6.0.26 onwards.", "attachment_id": null, "bug_id": 49018, "id": 136008, "time": "2010-04-11T10:19:43Z", "creator": "markt@apache.org", "creation_time": "2010-04-11T10:19:43Z", "is_private": false}]