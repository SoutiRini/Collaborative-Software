[{"count": 0, "tags": [], "bug_id": 41981, "attachment_id": null, "id": 101151, "time": "2007-03-29T05:21:59Z", "creator": "asf@ematan.com", "creation_time": "2007-03-29T05:21:59Z", "is_private": false, "text": "I'm trying to compress JS files on my Tomcat server.  It seems to work fine \nwith the following configuration:\n\n    <Connector port=\"80\" maxHttpHeaderSize=\"8192\"\n               maxThreads=\"150\" minSpareThreads=\"25\" maxSpareThreads=\"75\"\n               enableLookups=\"false\" redirectPort=\"443\" acceptCount=\"100\"\n               connectionTimeout=\"20000\" disableUploadTimeout=\"true\"\n               useBodyEncodingForURI=\"true\" \n               compression=\"on\"\n               compressionMinSize=\"2048\"\n\t\t\t   \t\t\t \ncompressableMimeType=\"text/css,text/javascript,text/html,text/xml,text/plain\"\n               />\n\n\nThis compresses the html, js, and css files nicely.  I noticed a problem when \nthe JS files were larger than ~48k.  If it was, it would skip compression of \nthem all together.  If i deleted lines from the JS file to make it under that \n48k threshold, it would be compressed properly.  I tried making dummy js files \nfull of just comments and it has the same behavior.  \n\nThe JS files are server properly with the text/javascript content-type.  \nThis is the same behavior if i access the JS files via <script> tags or \ndirectly from the browser.\n\nIt seems to compress text/html content fine even when above 48k though."}, {"count": 1, "tags": [], "creator": "asf@ematan.com", "attachment_id": 19839, "is_private": false, "id": 101152, "time": "2007-03-29T05:24:36Z", "bug_id": 41981, "creation_time": "2007-03-29T05:24:36Z", "text": "Created attachment 19839\nSample JS that compresses"}, {"count": 2, "tags": [], "creator": "asf@ematan.com", "attachment_id": 19840, "text": "Created attachment 19840\nSample JS that does not compress", "id": 101153, "time": "2007-03-29T05:24:56Z", "bug_id": 41981, "creation_time": "2007-03-29T05:24:56Z", "is_private": false}, {"count": 3, "tags": [], "creator": "asf@ematan.com", "text": "I forgot to add that i'm using APR 1.1.8", "id": 101210, "attachment_id": null, "bug_id": 41981, "creation_time": "2007-03-30T03:07:39Z", "time": "2007-03-30T03:07:39Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 41981, "text": "Ultimately, it seemed to be connected to browser cache... if i clear the \nbrowser cache.. the files will compress properly.", "id": 101258, "time": "2007-03-30T15:25:00Z", "creator": "asf@ematan.com", "creation_time": "2007-03-30T15:25:00Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "is_private": false, "id": 101269, "time": "2007-03-31T09:21:43Z", "bug_id": 41981, "creation_time": "2007-03-31T09:21:43Z", "text": "See google for JS and CSS files and compression issues. IIRC - MSIE sometimes \nmesses up how files are compressed in the cache. "}]