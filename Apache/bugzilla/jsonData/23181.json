[{"count": 0, "tags": [], "bug_id": 23181, "attachment_id": null, "is_private": false, "id": 44216, "time": "2003-09-15T17:36:46Z", "creator": "hartmut.keil@gmx.ch", "creation_time": "2003-09-15T17:36:46Z", "text": "In the case of status 304 the 'Transfer-Encoding' encoding header will be \nsupressed (http_protocol.c line 1672) but in 'chunk_filter(..)' the \nterminating chunk will be written in every case (http_core.c line 253).\n\nSo the following response results:\n\nHTTP/1.1 304 Not Modified\nDate: Thu, 11 Sep 2003 03:18:09 GMT\nServer: Apache/2.0.45 (Unix) mod_ssl/2.0.45 OpenSSL/0.9.7b\nConnection: close\nETag: excxgxgxuy6tre\nExpires: Mon, 01 Jan 2004 01:00:00 GMT\n0\n\nAnd in the case of keep alive the client will read afer the next request \nthe terminating chunk will  be readed first etc. \nAnd that is because the http spec. says explicitly in the case of 304 \nther is no body at all. (And that means not an empty body)\n\nSo chunking  ha sto be disabled for status 304 (http_protocol.c line 1672)"}, {"count": 1, "tags": [], "bug_id": 23181, "attachment_id": null, "text": "Got a testcase?  What enabled chunked transfer encoding to start with?\n\n(Not doubting your analysis, but I'd like to see it in action.)\n\nThanks!", "id": 45349, "time": "2003-10-10T12:52:47Z", "creator": "trawick@apache.org", "creation_time": "2003-10-10T12:52:47Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 23181, "text": "I have the same problem on 2.2.23, proxy with ajp connection to tomcat.\n\nWhen the browser did not send the header \"If-Modified-Since\", the response contains a body (the body is a content from an other response, who was delivered by a other response) before header.\n\nIf I turn off \"Keep-Alive\" on Browser it will works correctly.\n\nrequest:\nGET https://none.at/jira/s/en_UK2j9dor-418945332/854/16/1.0/_/download/batch/jira.webresources:old_header_resources/jira.webresources:old_header_resources.css HTTP/1.1\nHost: tasktrack.telekom.at\nUser-Agent: Mozilla/5.0 (Windows NT 5.1; rv:22.0) Gecko/20100101 Firefox/22.0\nAccept: text/css,*/*;q=0.1\nAccept-Language: en,de-de;q=0.8,de;q=0.5,en-us;q=0.3\nAccept-Encoding: gzip, deflate\nReferer: https://tasktrack.telekom.at/jira/secure/Dashboard.jspa\nCookie: JSESSIONID=E808A752B02307B0BABE6431D8E530A3; atlassian.xsrf.token=AP1H-ZIAC-5B1M-681R|bb8ae707705da9d759f45bde330a2353cd069313|lin; mywork.tab.tasks=false\nAuthorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXX\nConnection: keep-alive\nIf-None-Match: \"1376079000000\"\nCache-Control: max-age=0\n\n\nresponse:\n#greenhopper_menu_no_project{padding-right:3px;}\n.jsuLocation .jsuMap,.jsuLocation .jsuHideMap,.jsuLocation .jsuMapNotFound{display:none;}\n.jsuLocation .jsuMap{width:100%;height:300px;}\n.jsuLocation.notFound .jsuMapNotFound{text-align:center;}\n.jsuLocation .jsuHideMap{float:right;}\n.jsuLocation.open .jsuHideMap,.jsuLocation.open .jsuMap,.jsuLocation.notFound .jsuMapNotFound{display:block;}\nform.aui .aui-icon.icon-applinks-key,.aui-icon.icon-applinks-key{background:url(\"/jira/s/en_UK2j9dor-418945332/854/16/3.10.4/_/download/resources/com.atlassian.applinks.applinks-plugin:applinks-public/images/icon_key.png\") no-repeat scroll 0 0 transparent;width:16px;height:16px;}\nform.aui .aui-icon.icon-applinks-key-success,.aui-icon.icon-applinks-key-success{background:url(\"/jira/s/en_UK2j9dor-418945332/854/16/3.10.4/_/download/resources/com.atlassian.applinks.applinks-plugin:applinks-public/images/icon_key_success.png\") no-repeat scroll 0 0 transparent;width:16px;height:16px;}\nspan.applinks-auth-request{background:#fffff0;border:1px solid #ccc;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px 3px 3px 3px;display:inline-block;margin:1px 0;padding:2px 4px;}\nspan.applinks-auth-request a:link,span.applinks-auth-request a:visited{color:#00f;}\nspan.applinks-auth-request .applinks-request-description{background:url(\"/jira/s/en_UK2j9dor-418945332/854/16/3.10.4/_/download/resources/com.atlassian.applinks.applinks-plugin:applinks-public/images/icon_key.png\") no-repeat 0 1px;padding-left:20px;}\nform.aui .issue-link-applinks-authentication-message .aui-message:first-child {\n    margin-top: 10px;\n}\nHTTP/1.1 304 Not Modified\nDate: Tue, 13 Aug 2013 14:50:57 GMT\nConnection: Keep-Alive\nKeep-Alive: timeout=30, max=81\nETag: \"1376079000000\"\nExpires: Wed, 13 Aug 2014 14:51:00 GMT\nCache-Control: max-age=31536000\nCache-Control: public", "id": 169408, "time": "2013-08-13T15:04:12Z", "creator": "dieter.paradeiser@a1telekom.at", "creation_time": "2013-08-13T15:04:12Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "dieter.paradeiser@a1telekom.at", "text": "Created attachment 30730\ntest files\n\n*) install httpd-2.2.25-win32-x86-no_ssl.msi\n*) modify config for port and proxy (attached)\n*) install apache-tomcat-7.0.42.zip\n*) add apache-test.war to webapps (attached)\n*) start tomcat\n*) start httpd\n*) trace communication with Fiddler2 or other tool between apache and browser\n*) open FF or Chrome and call http://localhost:9999/apache-test\n*) refresh with F5\n*) some responses are damaged!", "id": 169429, "time": "2013-08-14T09:20:21Z", "bug_id": 23181, "creation_time": "2013-08-14T09:20:21Z", "is_private": false, "attachment_id": 30730}]