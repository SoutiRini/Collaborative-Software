[{"count": 0, "tags": [], "creator": "archie@dellroad.org", "text": "This is on openSuSE Linux 11.2 with using the tomcat6-6.0.20-24.6.2 RPM.\n\nI updated a WAR file and while tomcat was shutting down the app this exception appeared in the logs:\n\nJul 8, 2010 4:28:24 PM org.apache.catalina.startup.HostConfig checkResources\nWARNING: Error while removing context [/decider]\njava.util.ConcurrentModificationException\n\tat java.util.HashMap$HashIterator.nextEntry(HashMap.java:810)\n\tat java.util.HashMap$EntryIterator.next(HashMap.java:851)\n\tat java.util.HashMap$EntryIterator.next(HashMap.java:849)\n\tat java.util.HashMap.putAllForCreate(HashMap.java:452)\n\tat java.util.HashMap.clone(HashMap.java:686)\n\tat org.apache.catalina.loader.WebappClassLoader.clearReferences(WebappClassLoader.java:1633)\n\tat org.apache.catalina.loader.WebappClassLoader.stop(WebappClassLoader.java:1536)\n\tat org.apache.catalina.loader.WebappLoader.stop(WebappLoader.java:707)\n\tat org.apache.catalina.core.StandardContext.stop(StandardContext.java:4611)\n\tat org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:924)\n\tat org.apache.catalina.startup.HostConfig.checkResources(HostConfig.java:1115)\n\tat org.apache.catalina.startup.HostConfig.check(HostConfig.java:1323)\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:303)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n\tat org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1337)\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1601)\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1610)\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1590)\n\tat java.lang.Thread.run(Thread.java:636)\n\n\nLooks like there is some kind of race condition in tomcat.", "id": 138285, "time": "2010-07-08T17:33:55Z", "bug_id": 49574, "creation_time": "2010-07-08T17:33:55Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 49574, "attachment_id": null, "text": "It is an expected side-effect of having the clear references code enabled by default. If your web application is well-behaved then you can safely disable it.\n\nSee http://tomcat.apache.org/tomcat-6.0-doc/config/systemprops.html and look for org.apache.catalina.loader.WebappClassLoader.ENABLE_CLEAR_REFERENCES", "id": 138286, "time": "2010-07-08T17:44:40Z", "creator": "markt@apache.org", "creation_time": "2010-07-08T17:44:40Z", "is_private": false}]