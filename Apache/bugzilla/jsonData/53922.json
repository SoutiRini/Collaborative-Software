[{"text": "See :\nhttp://stackoverflow.com/questions/12538233/javax-net-ssl-sslpeerunverifiedexception-peer-not-authenticated-when-load-testi\n\n\"So I have JMeter setup to test my SSL-enabled site (I've got a real certificate from Geotrust, not a self-signed cert) and I've been running into problems when I try testing an SSL connection directly from Tomcat. I get:\njavax.net.ssl.SSLPeerUnverifiedException: peer not authenticated\n    at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352)\n    at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)\n    at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:397)\n    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)\n    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:150)\n    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)\n    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:575)\n    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)\n    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)\n    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)\n    at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:277)\n    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)\n    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1060)\n    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1049)\n    at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:442)\n    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:271)\n    at java.lang.Thread.run(Thread.java:680)\n\"\nwhenever I try to connect. This is using JMeter 2.7 with the HttpClient4 implementation. It is a simple GET request to one of my services hosted on Tomcat 7 (7.0.27 for anyone interested).\n\nHere is my Tomcat config for my SSL connector. Note that I have APR/native installed and this is running on an Ubuntu 12.04 server up on EC2.\n\n<Connector port=\"8443\" maxHttpHeaderSize=\"8192\"\n           protocol=\"HTTP/1.1\" \n           URIEncoding=\"UTF-8\" \n           acceptorThreadCount=\"5\"\n           maxThreads=\"400\" \n           scheme=\"https\"\n           secure=\"true\"\n           SSLEnabled=\"true\"\n           SSLCipherSuite=\"ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH\"\n           SSLHonorCipherOrder=\"true\"\n           SSLVerifyClient=\"optional\"\n           SSLCertificateFile=\"/etc/tomcat7/ssl/star.example.com.crt\"\n           SSLCertificateKeyFile=\"/etc/tomcat7/ssl/star.example.com.key\"\n           SSLCertificateChainFile=\"/etc/tomcat7/ssl/geotrust.crt\" />\n\nUser has setup:\nec2-50-17-85-212.compute-1.amazonaws.com:8443/hello \nor ec2-50-17-85-212.compute-1.amazonaws.com:9090/hello \nwhich can be used for testing externally. The SSL certificate is valid, but it won't match the hostname since I don't have a DNS name for it. Regardless, this should help illustrate the issue. The URL is for a simple \"Hello, world!\" REST service that can be accessed via a standard GET. \u2013\n\n\n\n\n\nAfter some investigation issue seems to come from HttpClient, so I opened:\nhttps://issues.apache.org/jira/browse/HTTPCLIENT-1234", "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "count": 0, "id": 162352, "time": "2012-09-23T11:04:59Z", "bug_id": 53922, "creation_time": "2012-09-23T11:04:59Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "text": "Affects 2.6, 2.7 and current trunk r1387986", "id": 162353, "time": "2012-09-23T11:06:51Z", "bug_id": 53922, "creation_time": "2012-09-23T11:06:51Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Created attachment 29408\nSimple Test Plan showing issue", "attachment_id": 29408, "id": 162354, "creation_time": "2012-09-23T11:07:57Z", "time": "2012-09-23T11:07:57Z", "creator": "p.mouawad@ubik-ingenierie.com", "bug_id": 53922, "is_private": false}, {"count": 3, "tags": [], "bug_id": 53922, "attachment_id": 29409, "is_private": false, "id": 162355, "time": "2012-09-23T11:08:53Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-09-23T11:08:53Z", "text": "Created attachment 29409\nTest Case for HTTPCLient"}, {"text": "After feedback from Oleg, test case works with JDK7 but not with JDK6.\n\nSo I tested with JMeter on a JDK7 and I confirm what Oleg says, so issue is in JDK6.\n\nI close bug.", "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "count": 4, "id": 162358, "time": "2012-09-23T18:32:37Z", "bug_id": 53922, "creation_time": "2012-09-23T18:32:37Z", "is_private": false}]