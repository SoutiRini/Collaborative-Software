[{"count": 0, "tags": [], "bug_id": 28716, "attachment_id": null, "id": 56703, "creation_time": "2004-04-30T16:32:20Z", "time": "2004-04-30T16:32:20Z", "creator": "somme@oslo.westerngeco.slb.com", "text": "I have set up a web server that works OK when ldap authentication is not\nenabled. When I enable it, I am prompted for the userid/password but then\nconsistently just gets 'The document contains no data'. Below I have added \na lot of config information that might be useful for understanding the problem\nand hopefully also in helping me make this work:\n\nerror log output:\n[Fri Apr 30 16:04:19 2004] [warn] Init: Session Cache is not configured [hint:\nSSLSessionCache]\n[Fri Apr 30 16:04:19 2004] [notice] LDAP: Built with OpenLDAP LDAP SDK\n[Fri Apr 30 16:04:19 2004] [notice] LDAP: SSL support unavailable\n[Fri Apr 30 16:04:21 2004] [notice] LDAP: Built with OpenLDAP LDAP SDK\n[Fri Apr 30 16:04:21 2004] [notice] LDAP: SSL support unavailable\n[Fri Apr 30 16:04:21 2004] [notice] Apache/2.0.48 (Unix) DAV/2 mod_ssl/2.0.48\nOpenSSL/0.9.7d configured -- resuming normal operations\n[Fri Apr 30 16:07:22 2004] [notice] child pid 4430 exit signal Segmentation\nfault (11)\n[Fri Apr 30 16:08:10 2004] [notice] child pid 4431 exit signal Bus error (10)\n\nxxxx# uname -a\nSunOS xxxx 5.9 Generic_112233-11 sun4u sparc SUNW,Ultra-4\n\nAll recommended Solaris patches added.\n\n\nhttpd output:\n------------\nServer version: Apache/2.0.48\nServer built:   Apr 30 2004 16:14:03\nServer's Module Magic Number: 20020903:4\nArchitecture:   32-bit\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_USE_PROC_PTHREAD_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D HTTPD_ROOT=\"/nett/superv/sv/apache_vsl104/install/httpd-2.0.48\"\n -D SUEXEC_BIN=\"/nett/superv/sv/apache_vsl104/install/httpd-2.0.48/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\nCompiled in modules:\n  core.c\n  mod_access.c\n  mod_auth.c\n  util_ldap.c\n  mod_auth_ldap.c\n  mod_include.c\n  mod_log_config.c\n  mod_env.c\n  mod_setenvif.c\n  mod_ssl.c\n  prefork.c\n  http_core.c\n  mod_mime.c\n  mod_dav.c\n  mod_status.c\n  mod_autoindex.c\n  mod_asis.c\n  mod_cgi.c\n  mod_dav_fs.c\n  mod_negotiation.c\n  mod_dir.c\n  mod_imap.c\n  mod_actions.c\n  mod_userdir.c\n  mod_alias.c\n  mod_so.c\n\nldd output:\n-----------\n        libaprutil-0.so.0 =>    \n/apps/basecamp/3rdParty/apache/httpd-2.0.48/lib/libaprutil-0.so.0\n        libldap.so.2 => \n/apps/basecamp/3rdParty/openldap/openldap-2.1.30/lib/libldap.so.2\n        libgen.so.1 =>   /usr/lib/libgen.so.1\n        libssl.so.0.9.7 =>      \n/apps/basecamp/3rdParty/openssl/openssl-0.9.7d/lib/libssl.so.0.9.7\n        libcrypto.so.0.9.7 =>   \n/apps/basecamp/3rdParty/openssl/openssl-0.9.7d/lib/libcrypto.so.0.9.7\n        liblber.so.2 => \n/apps/basecamp/3rdParty/openldap/openldap-2.1.30/lib/liblber.so.2\n        libexpat.so.0 =>        \n/apps/basecamp/3rdParty/apache/httpd-2.0.48/lib/libexpat.so.0\n        libapr-0.so.0 =>        \n/apps/basecamp/3rdParty/apache/httpd-2.0.48/lib/libapr-0.so.0\n        libsendfile.so.1 =>      /usr/lib/libsendfile.so.1\n        librt.so.1 =>    /usr/lib/librt.so.1\n        libm.so.1 =>     /usr/lib/libm.so.1\n        libsocket.so.1 =>        /usr/lib/libsocket.so.1\n        libnsl.so.1 =>   /usr/lib/libnsl.so.1\n        libresolv.so.2 =>        /usr/lib/libresolv.so.2\n        libpthread.so.1 =>       /usr/lib/libpthread.so.1\n        libc.so.1 =>     /usr/lib/libc.so.1\n        libdl.so.1 =>    /usr/lib/libdl.so.1\n        libaio.so.1 =>   /usr/lib/libaio.so.1\n        libmd5.so.1 =>   /usr/lib/libmd5.so.1\n        libmp.so.2 =>    /usr/lib/libmp.so.2\n        libthread.so.1 =>        /usr/lib/libthread.so.1\n        /usr/platform/SUNW,Ultra-4/lib/libc_psr.so.1\n        /usr/platform/SUNW,Ultra-4/lib/libmd5_psr.so.1\n\n\ntruss outout:\n-------------\nread(9, \"01\\004\\004\\0\", 6)                      = 6\ntime()                                          = 1083337431\ntime()                                          = 1083337431\nwrite(9, \" 0 F020103 ` A02010304 -\".., 72)      = 72\npoll(0xFFBFCB40, 1, -1)                         = 1\nread(9, \" 0\\f020103 a07\\n\", 8)                  = 8\nread(9, \"01\\004\\004\\0\", 6)                      = 6\ntime()                                          = 1083337431\n    Incurred fault #5, FLTACCESS  %pc = 0x0002FD34\n      siginfo: SIGBUS BUS_ADRALN addr=0xFEAA14BC\n    Received signal #10, SIGBUS [caught]\n      siginfo: SIGBUS BUS_ADRALN addr=0xFEAA14BC\n\n\ngdb output:\n-----------\nGNU gdb 4.17\nCopyright 1998 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"sparc-sun-solaris2.6\"...\nCore was generated by `/apps/basecamp/3rdParty/apache/httpd-2.0.48/bin/httpd -k\nstart -d /apps/basecam'.\nProgram terminated with signal 10, Bus Error.\n#0  0x2fd34 in util_ald_cache_insert (cache=0xfeaa01b0, payload=0xffbfd700) at\nutil_ldap_cache_mgr.c:396\n396         node->add_time = apr_time_now();\n(gdb) bt\n#0  0x2fd34 in util_ald_cache_insert (cache=0xfeaa01b0, payload=0xffbfd700) at\nutil_ldap_cache_mgr.c:396\n#1  0x2e9d4 in util_ldap_cache_checkuserid (r=0x17cf88, ldc=0x12bc40, url=0x1\n\"T\", basedn=0x17e5a0 \"somme\", scope=0, \n    attrs=0x164d60, filter=0xffbfd818 \"(&(objectclass=*)(alias=somme))\",\nbindpw=0x17e56e \"Zaiberhaip4mi\", binddn=0xffbfd810, \n    retvals=0xffbfd80c) at util_ldap.c:923\n#2  0x30748 in mod_auth_ldap_check_user_id (r=0x17cf88) at mod_auth_ldap.c:366\n#3  0x8d15c in ap_run_check_user_id (r=0x17cf88) at request.c:112\n#4  0x8daa8 in ap_process_request_internal (r=0x17cf88) at request.c:235\n#5  0x534dc in ap_process_request (r=0x17cf88) at http_request.c:286\n#6  0x4e8e0 in ap_process_http_connection (c=0x179030) at http_core.c:293\n#7  0x81320 in ap_run_process_connection (c=0x179030) at connection.c:85\n#8  0x8160c in ap_process_connection (c=0x179030, csd=0x178f78) at\nconnection.c:211\n#9  0x74418 in child_main (child_num_arg=0) at prefork.c:694\n#10 0x74598 in make_child (s=0xde1c8, slot=0) at prefork.c:788\n#11 0x74614 in startup_children (number_to_start=1) at prefork.c:806\n#12 0x749f4 in ap_mpm_run (_pconf=0x1, plog=0x118db8, s=0xde1c8) at\nprefork.c:1022\n#13 0x7adfc in main (argc=5, argv=0xffbffdf4) at main.c:660", "is_private": false}, {"count": 1, "tags": [], "bug_id": 28716, "text": "the ldap cache has known problems.  One option is to disable caching. \n\nLooking at bug #18756 it has more details, marking this one as a duplicate.\n\n*** This bug has been marked as a duplicate of 18756 ***", "id": 56961, "time": "2004-05-06T23:40:21Z", "creator": "chip@force-elite.com", "creation_time": "2004-05-06T23:40:21Z", "is_private": false, "attachment_id": null}]