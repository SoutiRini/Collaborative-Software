[{"count": 0, "tags": [], "text": "The test code seems to not be running on JDK 1.2.2 on linux. I have made minor\nadaptations to the test to make them work on JDK 1.2.2 again.\n\nThis is what I have done:\n\nremoved funny (\"u)->ue (`e)->e  characters from test source.\n                                                                                \nLet the testcases return 2 instead of -1, some jdk 1.2.2 does wrap -1 to 255 on\njdk 1.2.2 which leads to failing testcases not due to ant.\n                                                                                \nLet the ZipEncoding testcase use UnicodeBig instead of UTF16 (UnicodeBig is\nsupported by rt.jar of 1.2.2 as opposed to UTF16)\nUTF16 is not even listed on\nhttp://java.sun.com/products/jdk/1.2/docs/guide/internat/encoding.doc.html\n                                                                                \nThe ContainsSelector seems not to work on binary files under jdk 1.2.2. \nThis has not been fixed (error not in test code).\nWhen modifying the ContainsSelector to print the exception stacktrace\nbefore throwing the BuildException it prints:\n    [junit] sun.io.MalformedInputException\n    [junit]     at sun.io.ByteToCharUTF8.convert(ByteToCharUTF8.java:87)\n    [junit]     at java.io.InputStreamReader.convertInto(InputStreamReader.java:120)\n    [junit]     at java.io.InputStreamReader.fill(InputStreamReader.java:169)\n    [junit]     at java.io.InputStreamReader.read(InputStreamReader.java:232)\n    [junit]     at java.io.BufferedReader.fill(BufferedReader.java:130)\n    [junit]     at java.io.BufferedReader.readLine(BufferedReader.java:267)\n    [junit]     at java.io.BufferedReader.readLine(BufferedReader.java:322)\n    [junit]     at\norg.apache.tools.ant.types.selectors.ContainsSelector.isSelected(ContainsSelector.java:212)\n    [junit]     at\norg.apache.tools.ant.types.selectors.BaseSelectorTest.selectionString(BaseSelectorTest.java:164)\n    [junit]     at\norg.apache.tools.ant.types.selectors.BaseSelectorTest.selectionString(BaseSelectorTest.java:142)\n    [junit]     at\norg.apache.tools.ant.types.selectors.ContainsSelectorTest.testSelectionBehaviour(ContainsSelectorTest.java:126)\n(stacktrace truncated)\n                                                                                \n    [junit] Testcase: testSelectionBehaviour took 0.271 sec\n    [junit]     Caused an ERROR\n    [junit] Could not read file asf-logo.gif.bz2\n    [junit] Could not read file asf-logo.gif.bz2\n    [junit]     at\norg.apache.tools.ant.types.selectors.ContainsSelector.isSelected(ContainsSelector.java:230)\n    [junit]     at\norg.apache.tools.ant.types.selectors.BaseSelectorTest.selectionString(BaseSelectorTest.java:164)\n    [junit]     at\norg.apache.tools.ant.types.selectors.BaseSelectorTest.selectionString(BaseSelectorTest.java:142)\n    [junit]     at\norg.apache.tools.ant.types.selectors.ContainsSelectorTest.testSelectionBehaviour(ContainsSelectorTest.java:126)\n(stacktrace truncated)\n                                                                                \nSome errors remain in the optional tasks (not investigated, probably due to\nlibrary issues).", "attachment_id": null, "bug_id": 22549, "id": 42980, "time": "2003-08-19T12:03:59Z", "creator": "jkf@apache.org", "creation_time": "2003-08-19T12:03:59Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jkf@apache.org", "attachment_id": 7883, "is_private": false, "id": 42981, "time": "2003-08-19T12:06:15Z", "bug_id": 22549, "creation_time": "2003-08-19T12:06:15Z", "text": "Created attachment 7883\nPatch to make the base testcases work again on jdk 1.2.2"}, {"count": 2, "tags": [], "bug_id": 22549, "is_private": false, "text": "committed change to unzip.xml will have a look at the other changes afterwards", "id": 43110, "time": "2003-08-21T17:49:00Z", "creator": "antoine@apache.org", "creation_time": "2003-08-21T17:49:00Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "antoine@apache.org", "attachment_id": null, "is_private": false, "id": 43113, "time": "2003-08-21T18:04:56Z", "bug_id": 22549, "creation_time": "2003-08-21T18:04:56Z", "text": "java part of the patch also submitted, thanks."}, {"count": 4, "tags": [], "creator": "antoine@apache.org", "attachment_id": null, "id": 43116, "time": "2003-08-21T18:18:11Z", "bug_id": 22549, "creation_time": "2003-08-21T18:18:11Z", "is_private": false, "text": "finished off with StyleTest and HeadTailTest.\nThanks Martijn.\nAntoine"}]