[{"count": 0, "text": "The problem is that when I'm going through the mod_proxy instance, the FIN packets to close the TCP session get sent from a *different* source port than the rest of the TCP transaction.  Thus both hosts gets confused, packets are dropped and I cannot complete a transaction (e.g. submit FORM data).\n\n# cat /etc/redhat-release ; uname -ip\nCentOS release 5 (Final)\ni686 i386\n\n# httpd -v\nServer version: Apache/2.2.3\nServer built:   Jan 15 2008 20:33:30\n\nHere's my test mod_proxy config...\n\n<VirtualHost *>\n   ServerName scmoseman\n   ProxyRequests Off\n   <Proxy *>\n       Order deny,allow\n       Allow from all\n   </Proxy>\n   ProxyPass / http://remotehost:8000/path/\n   ProxyPassReverse / http://remotehost:8000/path/\n   <Location />\n       Order allow,deny\n       Allow from all\n   </Location>\n   RewriteEngine On\n   RewriteCond %{REQUEST_URI} ^/path/(.*)\n   RewriteRule ^/path/(.*) /$1 [R]\n</VirtualHost>\n\nAn example of the problem:  When I attempt to login to the website, the entire transaction is done through the source port 3965.  When it comes time for the FIN ACK to close the connection, it's going out on source port 4476.  remotehost asks for a RST, but since its on a different port its rejected.  And I'm unable to login to the website.  (Just viewing the website in read-only mode works fine.)\n\nWhen I attempt the same thing directly using a local web browser and going to the remotehost URL direct, the entire TCP connection uses a single source port (including the FIN ACK session).\n\nIt does not matter if I use \"remotehost\" or \"remotehost.domain.com\" when referencing the website.  The problem exists either way.\n\nThanks,\nScott", "creator": "scmoseman@gmail.com", "attachment_id": null, "id": 116363, "time": "2008-05-07T13:35:40Z", "bug_id": 44952, "creation_time": "2008-05-07T13:35:40Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 44952, "attachment_id": null, "id": 116364, "time": "2008-05-07T13:50:03Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-07T13:50:03Z", "is_private": false, "text": "Please attach a network sniff (tcpdump) over a whole request cycle that shows this problem."}, {"count": 2, "tags": [], "creator": "scmoseman@gmail.com", "attachment_id": null, "text": "I'm closing the bug report.  Pointing the proxy at a different FORM based auth website worked fine.  So there's something odd with my destination server that I need to resolve.", "id": 116382, "time": "2008-05-08T13:44:45Z", "bug_id": 44952, "creation_time": "2008-05-08T13:44:45Z", "is_private": false}]