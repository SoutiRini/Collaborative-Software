[{"count": 0, "tags": [], "creator": "eric@timebytes.com", "is_private": false, "text": "The p4sync task accepts a 'force=\"foo\"' option that tells Perforce to *always* \nsync the content betweeen the local client and the repository.\n\nOddly enough, the task looks for the *presence* of the force option, *not* the \ncontent of the argument (true or false).\n\nIn other words, \n\n  <p4sync view=\"${syncRepositoryLoc}...\" force=\"no\" />\n\n  <p4sync view=\"${syncRepositoryLoc}...\" force=\"yes\" />\n\ndo the same thing - they force the sync!\n\n\nThis makes it hard to code this functionality cleanly, since I would like \nprefer to do something like this:\n\n  <p4sync view=\"${syncRepositoryLoc}...\" force=\"${doP4Force}\" />\n\nWith 'doP4Force' a property, set appropriately.\n\nSadly, I can't do this.\n\nThe ant/XML syntax rules won't let me do something like this:\n  <property name=\"doP4Force\" value=\"force=yes'\" />\n  <p4sync view=\"${syncRepositoryLoc}...\" ${p4ForceArg}/>\n\nSo I'm left with an ugly workaround like:\nset either\n\n  <property name=\"p4ForceFlag\" value=\"WithForce\" />\n\nor\n\n  <property name=\"p4ForceFlag\" value=\"\" />\n\nthen, \n  <antcall target=\"syncToContent${p4ForceFlag}\" />\n\nwhich either invokes\n\n  <target name=\"syncToContent\">\n        <p4sync view=\"${syncRepositoryLoc}...\" />\n  </target> <!-- syncToContent -->\n\nor\n  <target name=\"syncToContentWithForce\">\n       <p4sync view=\"${syncRepositoryLoc}...\" force=\"yes\" />\n  </target> <!-- syncToContentWithForce -->\n\n\nI recognize this change might break some existing scripts, but if you wanted\nto maintain maximum backward compatibility, you could have it do a force for \nany non-false value, i.e.\n\n       <p4sync view=\"${syncRepositoryLoc}...\" force=\"yes\" />\nand\n       <p4sync view=\"${syncRepositoryLoc}...\" force=\"foo\" />\n\nboth do a force, but\n\n       <p4sync view=\"${syncRepositoryLoc}...\" force=\"no\" />\n\ndoesn't. This would minimize the amount of potential broken code.", "id": 46001, "time": "2003-10-21T18:12:55Z", "bug_id": 23981, "creation_time": "2003-10-21T18:12:55Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 23981, "attachment_id": null, "is_private": false, "id": 46013, "time": "2003-10-21T21:26:47Z", "creator": "antoine@apache.org", "creation_time": "2003-10-21T21:26:47Z", "text": "I agree with you that it would be better to make this option (force for\n<p4sync>) follow the convention for booleans in ant (\"true\", \"false\").\nI do not know whether the introspection rules give precedence to boolean over\nstring. If yes, then it is possible to satisfy your enhancement request without\nviolating our requirement for backward compatibility.\nThis is a change which might go into ant1.7. "}, {"count": 2, "text": "Created attachment 15236\nproposed patch\n\nProposed patch leaves force attribute as string, and avoids setting -f option\nif string is one of \"false\", \"off\", or \"no\" (case insensitive). All other\nvalues for the force attribute, including a zero-length string \"\", invoke -f to\npreserve backward compatibility. Modeled off of Project.toBoolean(String).", "bug_id": 23981, "is_private": false, "id": 75702, "time": "2005-06-01T05:11:08Z", "creator": "drwallingjr@netscape.net", "creation_time": "2005-06-01T05:11:08Z", "tags": [], "attachment_id": 15236}, {"count": 3, "text": "Perforce Ant tasks have been removed in Ant 1.9.0.\nUsers of Perforce Ant Tasks are advised to use the tasks supplied by Perforce Inc.", "creator": "antoine@apache.org", "attachment_id": null, "id": 165921, "time": "2013-03-18T01:44:22Z", "bug_id": 23981, "creation_time": "2013-03-18T01:44:22Z", "tags": [], "is_private": false}]