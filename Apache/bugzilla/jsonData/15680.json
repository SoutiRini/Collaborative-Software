[{"count": 0, "tags": [], "text": "The problem is that session loosed when redirecting with wellcome file redirect\nNext is output from wget that identifies problem (two cases when redirect is\ndone OK is when I manually redirect with a jsp file with \"<%\nresponse.sendRedirect(response.encodeRedirectURL(\"site\")); %>\" like contents):\n\n--11:46:39--  http://www.gtech-ua.com:8080/\n           => `index.html'\nConnecting to www.gtech-ua.com:8080... connected!\nHTTP request sent, awaiting response... 302 Moved Temporarily\nLocation: http://www.gtech-ua.com:8080/index.jsp [following]\n--11:46:39--  http://www.gtech-ua.com:8080/index.jsp\n           => `index.jsp.1'\nConnecting to www.gtech-ua.com:8080... connected!\nHTTP request sent, awaiting response... 302 Moved Temporarily\nLocation:\nhttp://www.gtech-ua.com:8080/site;jsessionid=567C78FE4B64E2967FF2B78141D331DE\n[following]\n--11:46:39-- \nhttp://www.gtech-ua.com:8080/site;jsessionid=567C78FE4B64E2967FF2B78141D331DE\n           => `site;jsessionid=567C78FE4B64E2967FF2B78141D331DE'\nConnecting to www.gtech-ua.com:8080... connected!\nHTTP request sent, awaiting response... 302 Moved Temporarily\nLocation: http://www.gtech-ua.com:8080/site/ [following]\n--11:46:39--  http://www.gtech-ua.com:8080/site/\n           => `index.html'\nConnecting to www.gtech-ua.com:8080... connected!\nHTTP request sent, awaiting response... 302 Moved Temporarily\nLocation: http://www.gtech-ua.com:8080/site/index.jsp [following]\n--11:46:39--  http://www.gtech-ua.com:8080/site/index.jsp\n           => `index.jsp.1'\nConnecting to www.gtech-ua.com:8080... connected!\nHTTP request sent, awaiting response... 302 Moved Temporarily\nLocation:\nhttp://www.gtech-ua.com:8080/site/ru;jsessionid=48724741955CF1972723AEE362DC8BFF\n[following]\n--11:46:39-- \nhttp://www.gtech-ua.com:8080/site/ru;jsessionid=48724741955CF1972723AEE362DC8BFF\n           => `ru;jsessionid=48724741955CF1972723AEE362DC8BFF'\nConnecting to www.gtech-ua.com:8080... connected!\nHTTP request sent, awaiting response... 302 Moved Temporarily\nLocation: http://www.gtech-ua.com:8080/site/ru/ [following]\n--11:46:39--  http://www.gtech-ua.com:8080/site/ru/\n           => `index.html'\nConnecting to www.gtech-ua.com:8080... connected!\nHTTP request sent, awaiting response... 302 Moved Temporarily\nLocation: http://www.gtech-ua.com:8080/site/ru/index.jsp [following]\n--11:46:40--  http://www.gtech-ua.com:8080/site/ru/index.jsp\n           => `index.jsp.1'\nConnecting to www.gtech-ua.com:8080... connected!\nHTTP request sent, awaiting response... 200 OK\nLength: unspecified [text/html]\n\n    0K -> .......... .......\n\n11:46:40 (66.12 KB/s) - `index.jsp.1' saved [17605]", "attachment_id": null, "bug_id": 15680, "id": 28288, "time": "2002-12-27T09:54:08Z", "creator": "tivv@gtech-ua.com", "creation_time": "2002-12-27T09:54:08Z", "is_private": false}, {"count": 1, "tags": [], "creator": "funkman@joedog.org", "text": "*** Bug 22230 has been marked as a duplicate of this bug. ***", "id": 45923, "attachment_id": null, "bug_id": 15680, "creation_time": "2003-10-20T13:06:25Z", "time": "2003-10-20T13:06:25Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 15680, "attachment_id": null, "is_private": false, "id": 46261, "time": "2003-10-24T18:37:11Z", "creator": "apache-bugzilla@ketan.org", "creation_time": "2003-10-24T18:37:11Z", "text": "As far as I can tell, it's a pretty simple fix.  In\norg.apache.catalina.servlets.DefaultServlet, there are two calls like:\n\nresponse.sendRedirect(redirectPath)\n\nin the method:\n\nprotected void serveResource(HttpServletRequest request, HttpServletResponse\nresponse, boolean content)\n\nThey just need to be changed to:\n\nresponse.sendRedirect(response.encodeRedirectURL(redirectPath));\n\nAnd then the redirect will have the session ID included."}, {"count": 3, "tags": [], "bug_id": 15680, "attachment_id": 8728, "is_private": false, "id": 46262, "time": "2003-10-24T18:38:59Z", "creator": "apache-bugzilla@ketan.org", "creation_time": "2003-10-24T18:38:59Z", "text": "Created attachment 8728\nPatch against DefaultServlet.java that properly encodes URLs on redirect."}, {"count": 4, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "id": 47855, "time": "2003-11-21T19:21:45Z", "bug_id": 15680, "creation_time": "2003-11-21T19:21:45Z", "is_private": false, "text": "Fixed in tomcat 4.1. Must add the following init parameter to web.xml: \n<init-param>\n    <param-name>encodeRedirects</param-name>\n    <param-value>true</param-value>\n</init-param>\n\nBy default the bahavior is off since encoding directories or welcome files may\ncause backwards compatibility problems with some tomcat installations."}]