[{"count": 0, "attachment_id": null, "creator": "lee@pear-partnership.co.uk", "is_private": false, "id": 75194, "time": "2005-05-22T12:11:01Z", "bug_id": 35011, "creation_time": "2005-05-22T12:11:01Z", "tags": [], "text": "page moves (up / down) within the site tree fail when lenya is root context\napplication in tomcat.\n\nUser selects a page within the site tree in the site tab of the gui. User\nselects move down from the drop down menu.\n\nLenya reports the following error\n\ncause: org.apache.lenya.cms.publication.SiteTreeException: Node to move:\n/ /default/info-authoring/contact not found\n\nTo a laymans eye this looks like the root context has a hard coded \"/\" which\nis always getting appended even if he context is \"\". \n\nenviroment\n----------\n  a.. tomcat 5.0.28\n  b.. jre version: 1.4.1_01\n  c.. lenya bin 1.2.3\n  d.. Linux , architecture: i386 , version: 2.4.7-10.um.1\n\n\nstack trace follows\n\norg.apache.lenya.cms.task.ExecutionException:\n/web/ROOT/lenya/pubs/default/config/tasks/targets.xml:728:\norg.apache.lenya.cms.publication.SiteTreeException: Node to move: /\n/default/info-authoring/contact not found\nat org.apache.lenya.cms.task.AntTask.executeAntTarget(AntTask.java:129)\nat org.apache.lenya.cms.task.AntTask.execute(AntTask.java:229)\nat org.apache.lenya.cms.task.DefaultTaskWrapper.execute(DefaultTaskWrapper.java:248)\nat org.apache.lenya.cms.cocoon.acting.TaskAction.act(TaskAction.java:62)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.ActTypeNode.invoke(ActTypeNode.java:124)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\nat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\nat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\nat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\nat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\nat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\nat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.ActTypeNode.invoke(ActTypeNode.java:138)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\nat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\nat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\nat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\nat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\nat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\nat org.apache.cocoon.Cocoon.process(Cocoon.java:608)\nat org.apache.cocoon.servlet.CocoonServlet.service(CocoonServlet.java:1123)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\nat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)\nat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)\nat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\nat\norg.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:198)\nat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:152)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\nat\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\nat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\nat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\nat org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)\nat org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:300)\nat org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:374)\nat org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:743)\nat org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:675)\nat org.apache.jk.common.SocketConnection.runIt(ChannelSocket.java:866)\nat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)\nat java.lang.Thread.run(Thread.java:536)\nCaused by: /web/ROOT/lenya/pubs/default/config/tasks/targets.xml:728:\norg.apache.lenya.cms.publication.SiteTreeException: Node to move: /\n/default/info-authoring/contact not found\nat\norg.apache.lenya.cms.ant.MoveSiteTreeNodeTask.execute(MoveSiteTreeNodeTask.java:89)\nat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\nat org.apache.tools.ant.Task.perform(Task.java:364)\nat org.apache.tools.ant.Target.execute(Target.java:341)\nat org.apache.tools.ant.Target.performTasks(Target.java:369)\nat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\nat org.apache.tools.ant.Project.executeTarget(Project.java:1185)\nat org.apache.lenya.cms.task.AntTask.executeAntTarget(AntTask.java:126)\n... 72 more\nCaused by: org.apache.lenya.cms.publication.SiteTreeException: Node to move: /\n/default/info-authoring/contact not found\nat org.apache.lenya.cms.publication.DefaultSiteTree.moveUp(DefaultSiteTree.java:496)\nat\norg.apache.lenya.cms.ant.MoveSiteTreeNodeTask.execute(MoveSiteTreeNodeTask.java:78)\n... 79 more"}]