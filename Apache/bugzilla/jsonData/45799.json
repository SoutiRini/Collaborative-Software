[{"count": 0, "tags": [], "bug_id": 45799, "text": "I have installed mod_deflate on Apache lately, everything seems ok, except there is one issue where some Content-type: application/x-download data are getting compressed, even though I didn't specify it in the deflate configuration. This causes the content-length to be set incorrectly to 0, which causes the loading progress bar to be incorrect.\n\nThis problem started to occur when mod_deflate is enabled. I don't know if this is a mod_deflate issue, or the interaction problems with some other Apache modules.\n\nThe following is the deflate config, as well as the HTTP response header.\n\n<IfModule mod_deflate.c>\n  # Compress contents that of a certain type\n  AddOutputFilterByType DEFLATE text/plain\n  AddOutputFilterByType DEFLATE text/xml\n  AddOutputFilterByType DEFLATE application/xhtml+xml\n  AddOutputFilterByType DEFLATE text/css\n  AddOutputFilterByType DEFLATE application/xml\n  AddOutputFilterByType DEFLATE image/svg+xml\n  AddOutputFilterByType DEFLATE application/rss+xml\n  AddOutputFilterByType DEFLATE application/atom_xml\n  AddOutputFilterByType DEFLATE application/x-javascript\n  AddOutputFilterByType DEFLATE application/x-httpd-php\n  AddOutputFilterByType DEFLATE application/x-httpd-fastphp\n  AddOutputFilterByType DEFLATE application/x-httpd-eruby\n  AddOutputFilterByType DEFLATE text/html\n\n  # properly handle requests coming from behind proxies\n  <IfModule mod_headers.c>\n      Header append Vary User-Agent env=!dont-vary\n  </IfModule>\n\n  # Properly handle old browsers that do not support compression\n  BrowserMatch ^Mozilla/4 gzip-only-text/html\n  BrowserMatch ^Mozilla/4\\.0[678] no-gzip\n  BrowserMatch \\bMSIE !no-gzip !gzip-only-text/html\n</IfModule>\n\n\n==============================================\n\n(Status-Line)\tHTTP/1.1 200 OK\nDate\tSat, 13 Sep 2008 10:04:11 GMT\nServer\tApache\nX-Powered-By\tPHP/5.1.6\nExpires\tThu, 19 Nov 1981 08:52:00 GMT\nCache-Control\tno-store, no-cache, must-revalidate, post-check=0, pre-check=0\nPragma\tno-cache\ncontent-disposition\tattachment; filename=go.go\nContent-Transfer-Encoding\tbinary\nVary\tAccept-Encoding\nContent-Encoding\tgzip\nKeep-Alive\ttimeout=15, max=100\nConnection\tKeep-Alive\nTransfer-Encoding\tchunked\nContent-Type\tapplication/x-download", "id": 120573, "time": "2008-09-13T03:28:09Z", "creator": "charles@goanimate.com", "creation_time": "2008-09-13T03:28:09Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "This is just well-known AddOutputFilterByType brokenness.  The simple fix is to use FilterProvider/FilterChain.\n\n*** This bug has been marked as a duplicate of bug 33499 ***", "is_private": false, "bug_id": 45799, "id": 120575, "time": "2008-09-13T06:06:54Z", "creator": "nick@webthing.com", "creation_time": "2008-09-13T06:06:54Z", "attachment_id": null}]