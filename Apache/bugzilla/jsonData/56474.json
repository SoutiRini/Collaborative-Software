[{"count": 0, "attachment_id": null, "bug_id": 56474, "text": "Hi, \n\nI noticed that for 60k websockets the memory consumption is around 6G. I compared with other Web/EE containers and it's with at least 75% more (same test, just creating 60 thousands persistent connections).\n\nHas to do with default Socket io buffers? \n\n\nMy HTTP configuration:\n<Connector port=\"8080\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\nconnectionTimeout=\"20000\" keepAliveTimeout=\"-1\" redirectPort=\"8443\" \nacceptCount=\"20000\" acceptorThreadCount=\"8\" maxThreads=\"10000\" \nmaxConnections=\"-1\" maxKeepAliveRequests=\"-1\" />\n\n\nThank you,  \nCristian", "id": 174940, "time": "2014-04-30T11:38:45Z", "creator": "veliscu.cristi@gmail.com", "creation_time": "2014-04-30T11:38:45Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 56474, "text": "(In reply to vlcvlc from comment #0)\n\nAt least the following in your configuration is insane:\n10000 threads x 2Mb jvm thread stack each = 20 Gb.\n\nBugzilla is NOT a support forum. The users mailing list is the place to look for help. If people identify that some specific defaults need changing, come back here.\n\nhttp://tomcat.apache.org/bugreport.html#Bugzilla_is_not_a_support_forum", "id": 174942, "time": "2014-04-30T12:20:57Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-04-30T12:20:57Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 56474, "text": "(In reply to Konstantin Kolinko from comment #1)\n> (In reply to vlcvlc from comment #0)\n> \n> At least the following in your configuration is insane:\n> 10000 threads x 2Mb jvm thread stack each = 20 Gb.\n> \n> Bugzilla is NOT a support forum. The users mailing list is the place to look\n> for help. If people identify that some specific defaults need changing, come\n> back here.\n> \n> http://tomcat.apache.org/bugreport.html#Bugzilla_is_not_a_support_forum\n\n2Mb per Thread? Is the default?\n\nThank you\nCristian", "count": 2, "id": 174967, "time": "2014-05-01T20:40:10Z", "creator": "veliscu.cristi@gmail.com", "creation_time": "2014-05-01T20:40:10Z", "is_private": false}]