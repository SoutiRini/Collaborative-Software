[{"count": 0, "attachment_id": null, "creator": "rfrovarp@apache.org", "text": "Going to the site tab throws an error. What I've been able to track down the\nproblem to is that Paste.java gets a null clipboard at line 123. I haven't been\nable to track down what change caused this to stop working.", "id": 105862, "time": "2007-07-23T14:20:45Z", "bug_id": 42960, "creation_time": "2007-07-23T14:20:45Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 42960, "text": "I can't reproduce this with my local working copy.\n\nWould you mind pasting the stack trace? TIA!", "id": 105883, "time": "2007-07-24T05:23:25Z", "creator": "andreas@apache.org", "creation_time": "2007-07-24T05:23:25Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "nettings@apache.org", "attachment_id": null, "is_private": false, "id": 105884, "time": "2007-07-24T05:43:01Z", "bug_id": 42960, "creation_time": "2007-07-24T05:43:01Z", "text": "same here. trunk, default publication, jdk 1.5.0-12 on linux/i386.\n\norg.apache.cocoon.ProcessingException: Sitemap: error calling function\n'executeUsecase'\n\tat <map:call> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:104:45\n\tat <map:mount> -\nfile:///local/lenya-trunk/build/lenya/webapp/lenya/usecase.xmap:55:131\n\tat <map:mount> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:323:105\n\tat <map:mount> - file:///local/lenya-trunk/build/lenya/webapp/sitemap.xmap:670:106\n\tat org.apache.cocoon.ProcessingException.throwLocated(ProcessingException.java:113)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.CallFunctionNode.invoke(CallFunctionNode.java:141)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:47)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MatchNode.invoke(MatchNode.java:108)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:143)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:93)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:177)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:254)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:118)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:47)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MatchNode.invoke(MatchNode.java:108)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:143)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:93)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:177)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:254)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:118)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:47)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MatchNode.invoke(MatchNode.java:108)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:143)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:93)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:177)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:254)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:118)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:47)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.ActTypeNode.invoke(ActTypeNode.java:139)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:47)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MatchNode.invoke(MatchNode.java:108)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:143)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:93)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:177)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:254)\n\tat org.apache.cocoon.Cocoon.process(Cocoon.java:699)\n\tat org.apache.cocoon.servlet.CocoonServlet.service(CocoonServlet.java:1154)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:689)\n\tat org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)\n\tat\norg.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)\n\tat org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)\n\tat org.mortbay.http.HttpContext.handle(HttpContext.java:1565)\n\tat\norg.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)\n\tat org.mortbay.http.HttpContext.handle(HttpContext.java:1517)\n\tat org.mortbay.jetty.plus.PlusWebAppContext.handle(PlusWebAppContext.java:158)\n\tat org.mortbay.http.HttpServer.service(HttpServer.java:954)\n\tat org.mortbay.http.HttpConnection.service(HttpConnection.java:814)\n\tat org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)\n\tat org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)\n\tat org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)\n\tat org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)\n\tat org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)\nCaused by: org.mozilla.javascript.WrappedException: Wrapped\norg.apache.cocoon.ProcessingException: Unable to get transformer handler for\ncocoon://lenya-page/default/authoring/default.xml\n\tat <map:serialize type=\"xhtml\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:93:38\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:92:79\n\tat <map:transform type=\"proxy\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:91:38\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:77:117\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:75:84\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:72:85\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:71:86\n\tat <map:transform type=\"i18n\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:67:36\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:66:57\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:64:54\n\tat <map:transform type=\"usecase-proxy\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:63:46\n\tat <map:transform type=\"forms\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:61:39\n\tat <map:transform type=\"cinclude\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:60:41\n\tat <map:transform type=\"browser-update\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:59:47\n\tat <map:generate type=\"jx\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:58:61\n(resource://org/apache/cocoon/components/flow/javascript/fom/fom_system.js#20)\n\tat org.mozilla.javascript.Context.throwAsScriptRuntimeEx(Context.java:1693)\n\tat org.mozilla.javascript.MemberBox.invoke(MemberBox.java:160)\n\tat org.mozilla.javascript.FunctionObject.call(FunctionObject.java:471)\n\tat org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:3085)\n\tat org.mozilla.javascript.Interpreter.interpret(Interpreter.java:2251)\n\tat org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:161)\n\tat org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:340)\n\tat org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2758)\n\tat org.mozilla.javascript.InterpretedFunction.call(InterpretedFunction.java:159)\n\tat org.mozilla.javascript.ScriptRuntime.call(ScriptRuntime.java:915)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_JavaScriptInterpreter.callFunction(FOM_JavaScriptInterpreter.java:764)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.CallFunctionNode.invoke(CallFunctionNode.java:139)\n\t... 58 more\nCaused by: org.apache.cocoon.ProcessingException: Unable to get transformer\nhandler for cocoon://lenya-page/default/authoring/default.xml\n\tat <map:serialize type=\"xhtml\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:93:38\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:92:79\n\tat <map:transform type=\"proxy\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:91:38\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:77:117\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:75:84\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:72:85\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:71:86\n\tat <map:transform type=\"i18n\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:67:36\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:66:57\n\tat <map:transform> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:64:54\n\tat <map:transform type=\"usecase-proxy\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:63:46\n\tat <map:transform type=\"forms\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:61:39\n\tat <map:transform type=\"cinclude\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:60:41\n\tat <map:transform type=\"browser-update\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:59:47\n\tat <map:generate type=\"jx\"> -\nfile:///local/lenya-trunk/src/modules-core/usecase/usecase.xmap:58:61\n\tat org.apache.cocoon.transformation.TraxTransformer.setup(TraxTransformer.java:339)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.setupPipeline(AbstractProcessingPipeline.java:398)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.preparePipeline(AbstractProcessingPipeline.java:501)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.process(AbstractProcessingPipeline.java:453)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.SerializeNode.invoke(SerializeNode.java:121)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:47)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MatchNode.invoke(MatchNode.java:108)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:143)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:69)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:93)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.handleCocoonRedirect(ConcreteTreeProcessor.java:299)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.access$000(ConcreteTreeProcessor.java:48)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor$TreeProcessorRedirector.cocoonRedirect(ConcreteTreeProcessor.java:340)\n\tat\norg.apache.cocoon.environment.ForwardRedirector.redirect(ForwardRedirector.java:60)\n\tat\norg.apache.cocoon.components.flow.AbstractInterpreter.forwardTo(AbstractInterpreter.java:210)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_JavaScriptInterpreter.forwardTo(FOM_JavaScriptInterpreter.java:865)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_Cocoon.forwardTo(FOM_Cocoon.java:701)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_Cocoon.jsFunction_sendPage(FOM_Cocoon.java:270)\n\tat sun.reflect.GeneratedMethodAccessor258.invoke(Unknown Source)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.mozilla.javascript.MemberBox.invoke(MemberBox.java:145)\n\t... 68 more\nCaused by: org.apache.excalibur.xml.xslt.XSLTProcessorException: Exception when\ncreating Transformer from cocoon://lenya-page/default/authoring/default.xml\n\tat\norg.apache.cocoon.components.xslt.TraxProcessor.getTransformerHandlerAndValidity(TraxProcessor.java:300)\n\tat org.apache.cocoon.transformation.TraxTransformer.setup(TraxTransformer.java:331)\n\t... 91 more\nCaused by: org.apache.cocoon.ProcessingException: Failed to process pipeline\n\tat <map:serialize type=\"xml\"> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:228:36\n\tat <map:transform> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:221:75\n\tat <map:transform type=\"i18n\"> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:43:34\n\tat <map:transform> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:192:76\n\tat <map:transform type=\"usecasemenu\"> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:172:44\n\tat <map:transform> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:167:62\n\tat <map:transform> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:165:63\n\tat\norg.apache.cocoon.components.source.impl.SitemapSource.toSAX(SitemapSource.java:424)\n\tat\norg.apache.cocoon.components.xslt.TraxProcessor.sourceToSAX(TraxProcessor.java:306)\n\tat\norg.apache.cocoon.components.xslt.TraxProcessor.getTransformerHandlerAndValidity(TraxProcessor.java:241)\n\t... 92 more\nCaused by: org.apache.cocoon.ProcessingException: Failed to process pipeline\n\tat <map:serialize type=\"xml\"> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:228:36\n\tat <map:transform> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:221:75\n\tat <map:transform type=\"i18n\"> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:43:34\n\tat <map:transform> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:192:76\n\tat <map:transform type=\"usecasemenu\"> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:172:44\n\tat <map:transform> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:167:62\n\tat <map:transform> -\nfile:///local/lenya-trunk/build/lenya/webapp/global-sitemap.xmap:165:63\n\tat org.apache.cocoon.ProcessingException.throwLocated(ProcessingException.java:145)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.handleException(AbstractProcessingPipeline.java:953)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.processXMLPipeline(AbstractProcessingPipeline.java:583)\n\tat\norg.apache.cocoon.components.pipeline.impl.AbstractCachingProcessingPipeline.processXMLPipeline(AbstractCachingProcessingPipeline.java:280)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.process(AbstractProcessingPipeline.java:780)\n\tat\norg.apache.cocoon.components.source.impl.SitemapSource.toSAX(SitemapSource.java:414)\n\t... 94 more\nCaused by: org.apache.lenya.cms.usecase.UsecaseException:\norg.apache.lenya.cms.usecase.UsecaseException: java.lang.NullPointerException\n\tat\norg.apache.lenya.cms.cocoon.transformation.UsecaseMenuTransformer.startElement(UsecaseMenuTransformer.java:145)\n\tat\norg.apache.xml.serializer.ToXMLSAXHandler.closeStartTag(ToXMLSAXHandler.java:204)\n\tat org.apache.xml.serializer.ToSAXHandler.flushPending(ToSAXHandler.java:277)\n\tat org.apache.xml.serializer.ToXMLSAXHandler.startElement(ToXMLSAXHandler.java:645)\n\tat org.apache.xml.serializer.ToXMLSAXHandler.startElement(ToXMLSAXHandler.java:500)\n\tat\norg.apache.xalan.transformer.ClonerToResultTree.cloneToResultTree(ClonerToResultTree.java:158)\n\tat org.apache.xalan.templates.ElemCopy.execute(ElemCopy.java:107)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.transformSelectedNodes(ElemApplyTemplates.java:393)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.execute(ElemApplyTemplates.java:176)\n\tat\norg.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411)\n\tat org.apache.xalan.templates.ElemCopy.execute(ElemCopy.java:114)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.transformSelectedNodes(ElemApplyTemplates.java:393)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.execute(ElemApplyTemplates.java:176)\n\tat\norg.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411)\n\tat org.apache.xalan.templates.ElemCopy.execute(ElemCopy.java:114)\n\tat\norg.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411)\n\tat org.apache.xalan.templates.ElemIf.execute(ElemIf.java:160)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.transformSelectedNodes(ElemApplyTemplates.java:393)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.execute(ElemApplyTemplates.java:176)\n\tat\norg.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411)\n\tat org.apache.xalan.templates.ElemCopy.execute(ElemCopy.java:114)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.transformSelectedNodes(ElemApplyTemplates.java:393)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.execute(ElemApplyTemplates.java:176)\n\tat\norg.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411)\n\tat org.apache.xalan.templates.ElemCopy.execute(ElemCopy.java:114)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.transformSelectedNodes(ElemApplyTemplates.java:393)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.execute(ElemApplyTemplates.java:176)\n\tat\norg.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411)\n\tat org.apache.xalan.templates.ElemCopy.execute(ElemCopy.java:114)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.transformSelectedNodes(ElemApplyTemplates.java:393)\n\tat\norg.apache.xalan.templates.ElemApplyTemplates.execute(ElemApplyTemplates.java:176)\n\tat\norg.apache.xalan.transformer.TransformerImpl.executeChildTemplates(TransformerImpl.java:2411)\n\tat\norg.apache.xalan.transformer.TransformerImpl.applyTemplateToNode(TransformerImpl.java:2281)\n\tat\norg.apache.xalan.transformer.TransformerImpl.transformNode(TransformerImpl.java:1367)\n\tat org.apache.xalan.transformer.TransformerImpl.run(TransformerImpl.java:3458)\n\tat\norg.apache.xalan.transformer.TransformerHandlerImpl.endDocument(TransformerHandlerImpl.java:406)\n\tat org.apache.cocoon.xml.AbstractXMLPipe.endDocument(AbstractXMLPipe.java:56)\n\tat\norg.apache.cocoon.transformation.TraxTransformer.endDocument(TraxTransformer.java:586)\n\tat org.apache.xml.serializer.ToXMLSAXHandler.endDocument(ToXMLSAXHandler.java:181)\n\tat\norg.apache.xalan.transformer.TransformerImpl.transformNode(TransformerImpl.java:1378)\n\tat org.apache.xalan.transformer.TransformerImpl.run(TransformerImpl.java:3458)\n\tat\norg.apache.xalan.transformer.TransformerHandlerImpl.endDocument(TransformerHandlerImpl.java:406)\n\tat org.apache.cocoon.xml.AbstractXMLPipe.endDocument(AbstractXMLPipe.java:56)\n\tat\norg.apache.cocoon.transformation.TraxTransformer.endDocument(TraxTransformer.java:586)\n\tat org.apache.cocoon.sitemap.ContentAggregator.generate(ContentAggregator.java:133)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.processXMLPipeline(AbstractProcessingPipeline.java:579)\n\t... 97 more\nCaused by: org.apache.lenya.cms.usecase.UsecaseException:\norg.apache.lenya.cms.usecase.UsecaseException: java.lang.NullPointerException\n\tat\norg.apache.lenya.cms.usecase.AbstractUsecase.checkPreconditions(AbstractUsecase.java:250)\n\tat sun.reflect.GeneratedMethodAccessor65.invoke(Unknown Source)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat\norg.apache.avalon.excalibur.component.ComponentProxyGenerator$ComponentInvocationHandler.invoke(ComponentProxyGenerator.java:143)\n\tat $Proxy53.checkPreconditions(Unknown Source)\n\tat\norg.apache.lenya.cms.cocoon.transformation.UsecaseMenuTransformer.startElement(UsecaseMenuTransformer.java:128)\n\t... 142 more\nCaused by: org.apache.lenya.cms.usecase.UsecaseException:\njava.lang.NullPointerException\n\tat org.apache.lenya.cms.site.usecases.Paste.getNodesToLock(Paste.java:139)\n\tat\norg.apache.lenya.cms.usecase.AbstractUsecase.checkPreconditions(AbstractUsecase.java:236)\n\t... 148 more\nCaused by: java.lang.NullPointerException\n\tat org.apache.lenya.cms.site.usecases.Paste.getNodesToLock(Paste.java:126)\n\t... 149 more"}, {"count": 3, "tags": [], "bug_id": 42960, "attachment_id": null, "id": 105885, "time": "2007-07-24T05:50:27Z", "creator": "nettings@apache.org", "creation_time": "2007-07-24T05:50:27Z", "is_private": false, "text": "as richard remarked, it's in Paste.java.\nthere has been a commit in that code back in may\n(http://svn.apache.org/viewvc?view=rev&rev=532646), but it used to work after\nthat...\n\n232822    andreas     protected Node[] getNodesToLock() throws UsecaseException {\n170927    andreas         List nodes = new ArrayList();\n170927    andreas\n170927    andreas         try {\n532656    andreas             Node siteNode =\ngetArea().getSite().getRepositoryNode();\n170927    andreas             nodes.add(siteNode);\n170927    andreas\n170927    andreas             Clipboard clipboard = new\nClipboardHelper().getClipboard(getContext());\n426284    andreas             DocumentFactory map = getDocumentFactory();\n532656    andreas             Publication pub = getPublication();\n264153    andreas             Document clippedDocument =\nclipboard.getDocument(map, pub);\n\nthe last line is causing the NPE.\n"}, {"count": 4, "tags": [], "bug_id": 42960, "attachment_id": null, "id": 105886, "time": "2007-07-24T05:55:33Z", "creator": "andreas@apache.org", "creation_time": "2007-07-24T05:55:33Z", "is_private": false, "text": "The NPE occurs in getNodesToLock().\n\nI guess that the reason for the problem is that getNodesToLock() is now called\nin checkPreconditions() (see bug 42930)."}, {"count": 5, "tags": [], "bug_id": 42960, "attachment_id": null, "text": "why does the paste usecase get triggered at all???", "id": 105887, "time": "2007-07-24T06:00:26Z", "creator": "nettings@apache.org", "creation_time": "2007-07-24T06:00:26Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 42960, "is_private": false, "text": "(In reply to comment #5)\n> why does the paste usecase get triggered at all???\n\nIt's not triggered - the preconditions are checked by the UsecaseMenuTransformer.", "id": 105888, "time": "2007-07-24T06:02:19Z", "creator": "andreas@apache.org", "creation_time": "2007-07-24T06:02:19Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 42960, "attachment_id": null, "text": "I added a null check to getNodesToLock() (rev. 559035).\nWould you mind giving it a try? TIA!", "id": 105889, "time": "2007-07-24T06:06:09Z", "creator": "andreas@apache.org", "creation_time": "2007-07-24T06:06:09Z", "is_private": false}, {"count": 8, "tags": [], "creator": "nettings@apache.org", "attachment_id": null, "is_private": false, "id": 105891, "time": "2007-07-24T06:57:08Z", "bug_id": 42960, "creation_time": "2007-07-24T06:57:08Z", "text": "site tab no longer throws an npe. the language enumeration seems broken, however.\ni get two identical rows of language tabs, and in the overview, each language\nappears twice:\n\nVerf\u00fcgbare Sprachen:  \t en  de  en  de\nFehlende Sprachen\n(Klicken zum Erstellen): \the es fr he es fr\n\n"}, {"count": 9, "attachment_id": null, "bug_id": 42960, "is_private": false, "id": 105893, "time": "2007-07-24T07:04:01Z", "creator": "rfrovarp@apache.org", "creation_time": "2007-07-24T07:04:01Z", "tags": [], "text": "Yeah, there are tons of little fixes that need to happen in here to protect from\nNPE's. I'm working on some of them now."}, {"count": 10, "tags": [], "bug_id": 42960, "attachment_id": null, "text": "(In reply to comment #8)\n> site tab no longer throws an npe. the language enumeration seems broken, however.\n> i get two identical rows of language tabs, and in the overview, each language\n> appears twice:\n> \n> Verf\u00fcgbare Sprachen:  \t en  de  en  de\n> Fehlende Sprachen\n> (Klicken zum Erstellen): \the es fr he es fr\n\nI can't reproduce this, neither with my local working copy nor on the zones ...", "id": 105894, "time": "2007-07-24T07:19:12Z", "creator": "andreas@apache.org", "creation_time": "2007-07-24T07:19:12Z", "is_private": false}, {"count": 11, "tags": [], "creator": "andreas@apache.org", "attachment_id": null, "is_private": false, "id": 105895, "time": "2007-07-24T07:19:35Z", "bug_id": 42960, "creation_time": "2007-07-24T07:19:35Z", "text": "(In reply to comment #10)\n> (In reply to comment #8)\n> > site tab no longer throws an npe. the language enumeration seems broken,\nhowever.\n> > i get two identical rows of language tabs, and in the overview, each language\n> > appears twice:\n> > \n> > Verf\u00fcgbare Sprachen:  \t en  de  en  de\n> > Fehlende Sprachen\n> > (Klicken zum Erstellen): \the es fr he es fr\n> \n> I can't reproduce this, neither with my local working copy nor on the zones ...\n\nBTW, we should open another bug for this."}, {"count": 12, "tags": [], "bug_id": 42960, "is_private": false, "text": "(In reply to comment #1)\n> I can't reproduce this with my local working copy.\n\nFor the record, I had set my log level to WARN and therefore the exceptions were\ncaught and just added as usecase error messages. They were visible as tooltips\nin the menu, but didn't end up as stack traces on the screen.\n", "id": 105896, "time": "2007-07-24T07:29:37Z", "creator": "andreas@apache.org", "creation_time": "2007-07-24T07:29:37Z", "attachment_id": null}, {"count": 13, "text": "I've fixed up the additional NPEs I was able to generate by choosing the\nauthoring node under the tab. ", "bug_id": 42960, "attachment_id": null, "id": 105897, "time": "2007-07-24T07:39:17Z", "creator": "rfrovarp@apache.org", "creation_time": "2007-07-24T07:39:17Z", "tags": [], "is_private": false}, {"count": 14, "tags": [], "bug_id": 42960, "text": "(In reply to comment #8)\n> site tab no longer throws an npe. the language enumeration seems broken, however.\n> i get two identical rows of language tabs, and in the overview, each language\n> appears twice:\n> \n> Verf\u00fcgbare Sprachen:  \t en  de  en  de\n> Fehlende Sprachen\n> (Klicken zum Erstellen): \the es fr he es fr\n> \n> \n\nI am also unable to reproduce.", "id": 105900, "time": "2007-07-24T08:04:13Z", "creator": "rfrovarp@apache.org", "creation_time": "2007-07-24T08:04:13Z", "is_private": false, "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 42960, "attachment_id": null, "text": "(In reply to comment #14)\n> (In reply to comment #8)\n> > site tab no longer throws an npe. the language enumeration seems broken,\nhowever.\n> > i get two identical rows of language tabs, and in the overview, each language\n> > appears twice:\n> > \n> > Verf\u00fcgbare Sprachen:  \t en  de  en  de\n> > Fehlende Sprachen\n> > (Klicken zum Erstellen): \the es fr he es fr\n> > \n> > \n> \n> I am also unable to reproduce.\n\na clean build fixed it for me. sorry for the noise. i guess this issue is\nsolved, then?", "id": 105901, "time": "2007-07-24T08:21:11Z", "creator": "nettings@apache.org", "creation_time": "2007-07-24T08:21:11Z", "is_private": false}]