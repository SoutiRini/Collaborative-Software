[{"count": 0, "tags": [], "bug_id": 55958, "attachment_id": null, "id": 172100, "time": "2014-01-06T09:28:12Z", "creator": "hata.radim@gmail.com", "creation_time": "2014-01-06T09:28:12Z", "is_private": false, "text": "Webapp deployment fails if the dirname ends with .war because it is automatically considered as zip archive."}, {"count": 1, "tags": [], "bug_id": 55958, "attachment_id": null, "id": 172131, "time": "2014-01-06T22:25:24Z", "creator": "chris@christopherschultz.net", "creation_time": "2014-01-06T22:25:24Z", "is_private": false, "text": "Stack trace? It looks like ContextConfig:627 in trunk might allow a directory to be treated as if it were a file."}, {"count": 2, "tags": [], "bug_id": 55958, "attachment_id": null, "id": 172139, "time": "2014-01-07T08:20:58Z", "creator": "hata.radim@gmail.com", "creation_time": "2014-01-07T08:20:58Z", "is_private": false, "text": "This is the relevant output in catalina.out including the stacktrace\n\nINFO: Deploying web application directory /home/rhatlapa/projects/redhat_projects/eap/eap63-development/apache-tomcat-7.0.47/webapps/byteslounge.war\nJan 06, 2014 10:08:48 AM org.apache.catalina.startup.ContextConfig init\nSEVERE: Exception fixing docBase for context [/byteslounge]\njava.io.FileNotFoundException: /home/rhatlapa/projects/redhat_projects/eap/eap63-development/apache-tomcat-7.0.47/webapps/byteslounge.war (Is a directory)\n  at java.util.zip.ZipFile.open(Native Method)\n  at java.util.zip.ZipFile.<init>(ZipFile.java:215)\n  at java.util.zip.ZipFile.<init>(ZipFile.java:145)\n  at java.util.jar.JarFile.<init>(JarFile.java:153)\n  at java.util.jar.JarFile.<init>(JarFile.java:90)\n  at sun.net.www.protocol.jar.URLJarFile.<init>(URLJarFile.java:93)\n  at sun.net.www.protocol.jar.URLJarFile.getJarFile(URLJarFile.java:69)\n  at sun.net.www.protocol.jar.JarFileFactory.get(JarFileFactory.java:99)\n  at sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:122)\n  at sun.net.www.protocol.jar.JarURLConnection.getJarFile(JarURLConnection.java:89)\n  at org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:113)\n  at org.apache.catalina.startup.ContextConfig.fixDocBase(ContextConfig.java:741)\n  at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:843)\n  at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:387)\n  at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n  at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n  at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:402)\n  at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:110)\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)\n  at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n  at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n  at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)\n  at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1120)\n  at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1678)\n  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n  at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n  at java.lang.Thread.run(Thread.java:744)\n\nJan 06, 2014 10:08:48 AM org.apache.catalina.core.StandardContext resourcesStart\nSEVERE: Error starting static Resources\njava.lang.IllegalArgumentException: Document base /home/rhatlapa/projects/redhat_projects/eap/eap63-development/apache-tomcat-7.0.47/webapps/byteslounge does not exist or is not a readable directory\n  at org.apache.naming.resources.FileDirContext.setDocBase(FileDirContext.java:138)\n  at org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:5055)\n  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5235)\n  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n  at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n  at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n  at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)\n  at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1120)\n  at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1678)\n  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n  at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n  at java.lang.Thread.run(Thread.java:744)"}, {"count": 3, "tags": [], "bug_id": 55958, "attachment_id": null, "text": "So you have a directory named \"/home/rhatlapa/projects/redhat_projects/eap/eap63-development/apache-tomcat-7.0.47/webapps/byteslounge.war\"? What else is in your \"/home/rhatlapa/projects/redhat_projects/eap/eap63-development/apache-tomcat-7.0.47/webapps/\" directory before you try to start Tomcat?", "id": 172151, "time": "2014-01-07T18:18:30Z", "creator": "chris@christopherschultz.net", "creation_time": "2014-01-07T18:18:30Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 55958, "attachment_id": null, "id": 172153, "time": "2014-01-07T18:35:21Z", "creator": "hata.radim@gmail.com", "creation_time": "2014-01-07T18:35:21Z", "is_private": false, "text": "Yes, that is right, I have the directory named byteslounge.war, if I remove .war from the name => by renaming it to byteslounge it works just fine.\n\nThe rest of webapps in the webapps directory are only the default ones which are in clean tomact installation.\n\nThe only issue is that if you decide to name the webapp with suffix .war it is automatically treated as zip file instead of being treated as directory."}, {"count": 5, "tags": [], "bug_id": 55958, "attachment_id": null, "id": 172212, "time": "2014-01-09T14:15:19Z", "creator": "markt@apache.org", "creation_time": "2014-01-09T14:15:19Z", "is_private": false, "text": "I don't recommend doing it but Tomcat 8 as of 8.0.0 and Tomcat 7 as of 7.0.51 will let you deploy a directory named foo.war which will have a context path of /foo.war"}]