[{"count": 0, "tags": [], "text": "The methode XMLCipher.removeContent(Node node) should remove all the children of\nthe given Node. However the loop is written so that only only half of the\nchildren are removed.\n\nThis method should be replaced by the removeContent() method of the 1.3 version :\nprivate void removeContent(Node node) {\n      NodeList list = node.getChildNodes();\n      if (list.getLength() > 0) {\n          Node n = list.item(0);\n          if (null != n) {\n              n.getParentNode().removeChild(n);\n          }\n          removeContent(node);\n      }\n    }", "attachment_id": null, "id": 105364, "creator": "julien.taupin@ilex.fr", "time": "2007-07-13T05:37:29Z", "bug_id": 42886, "creation_time": "2007-07-13T05:37:29Z", "is_private": false}, {"count": 1, "tags": [], "text": "Why does the current implementation only remove 1/2? Probably obvious but I\ndon't see it. Also, I believe your suggested fix would reintroduce \nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=41573 so we need\nto come up with a different approach.", "attachment_id": null, "id": 105397, "creator": "sean.mullan@oracle.com", "time": "2007-07-13T13:27:08Z", "bug_id": 42886, "creation_time": "2007-07-13T13:27:08Z", "is_private": false}, {"count": 2, "tags": [], "text": "A better fix which avoids the recursive StackOverflow issue with deeply nested\ndocuments is the following:\n\n    private static void removeContent(Node node) {\n        while (node.hasChildNodes()) {\n            node.removeChild(node.getFirstChild());\n        }\n    }\n\nI'll plan on putting this fix back very soon.", "attachment_id": null, "id": 105728, "creator": "sean.mullan@oracle.com", "time": "2007-07-17T14:35:35Z", "bug_id": 42886, "creation_time": "2007-07-17T14:35:35Z", "is_private": false}, {"count": 3, "tags": [], "text": "*** Bug 41573 has been marked as a duplicate of this bug. ***", "attachment_id": null, "id": 113887, "creator": "sean.mullan@oracle.com", "time": "2008-02-19T07:01:34Z", "bug_id": 42886, "creation_time": "2008-02-19T07:01:34Z", "is_private": false}, {"count": 4, "tags": [], "text": "Error when removing encrypted content in 1.4.1...\n\nno, the plain content is not removed.\n\nThat means, document is encrypted, but the plain text is still in the document.\nAt leas a major bug.", "attachment_id": null, "id": 108928, "creator": "byby123452000@yahoo.com", "time": "2008-02-23T02:39:25Z", "bug_id": 42886, "creation_time": "2008-02-23T02:39:25Z", "is_private": false}, {"count": 5, "tags": [], "text": "This bug doesn't seem to be resolved. The plain text XML is included in the encrypted Document output from XMLCipher.doFinal(). Switching back to 1.4.0 solves the problem for the exact same code.\n\nThe potential impact of this bug is severe since testcases and production code might function perfectly while actually omitting plain text XML.\n\nMy apologies if I've missed out on some vital information regarding this bug.", "attachment_id": null, "id": 116301, "creator": "john.wilander@omegapoint.se", "time": "2008-05-06T08:15:22Z", "bug_id": 42886, "creation_time": "2008-05-06T08:15:22Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 42886, "attachment_id": null, "id": 116311, "time": "2008-05-06T13:57:46Z", "creator": "sean.mullan@oracle.com", "creation_time": "2008-05-06T13:57:46Z", "is_private": false, "text": "(In reply to comment #5)\n> This bug doesn't seem to be resolved. The plain text XML is included in the\n> encrypted Document output from XMLCipher.doFinal(). Switching back to 1.4.0\n> solves the problem for the exact same code.\n> \n> The potential impact of this bug is severe since testcases and production code\n> might function perfectly while actually omitting plain text XML.\n> \n> My apologies if I've missed out on some vital information regarding this bug.\n\n\nHave you tried the 1.4.2 beta 2 jar? It should be fixed. You can download it \nhere: http://people.apache.org/~mullan/dist/xmlsec-1.4.2beta2.jar \n"}, {"count": 7, "tags": [], "bug_id": 42886, "text": "Yes, downloading the 1.4.2 beta 2 solves the problem. But it seems odd not to release a new version of an XML security library that sends encrypted XML i plain text, don't you think? The lib is one year old and the bug was reported ten months ago.\n\nI can't find any notes or \"known issues\" mentioning this serious bug. It might be I'm not into the Apache way of handling such things but imho a note in the Java section under 1.4.1 release would be kind. Perhaps also the link to the beta jar you provided here. My understanding of \"resolved\" in combination with the version number 1.4.1 is that the issue is solved in 1.4.1.\n\nAnyway, thanks for the help with the beta jar!", "id": 116328, "time": "2008-05-07T01:58:05Z", "creator": "john.wilander@omegapoint.se", "creation_time": "2008-05-07T01:58:05Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 42886, "text": "(In reply to comment #7)\n> Yes, downloading the 1.4.2 beta 2 solves the problem. But it seems odd not to\n> release a new version of an XML security library that sends encrypted XML i\n> plain text, don't you think? The lib is one year old and the bug was reported\n> ten months ago.\n> \n> I can't find any notes or \"known issues\" mentioning this serious bug. It might\n> be I'm not into the Apache way of handling such things but imho a note in the\n> Java section under 1.4.1 release would be kind. Perhaps also the link to the\n> beta jar you provided here. My understanding of \"resolved\" in combination with\n> the version number 1.4.1 is that the issue is solved in 1.4.1.\n\nThe version in the bugzilla report is used to indicate which version of the software contains the bug (in this case 1.4.1). There doesn't seem to be a field for indicating which release contains the fix (which is odd for a bug reporting system, but anyway), so the best way to find that information is to check either the CHANGELOG.txt file in the release bundle or http://santuario.apache.org/changes.html\n\n> Anyway, thanks for the help with the beta jar!\n\nThanks for testing. I agree that this issue is serious and I will make a note of that in the documentation and encourage users to use 1.4.2 when it is released (soon).", "id": 116512, "time": "2008-05-12T09:25:49Z", "creator": "sean.mullan@oracle.com", "creation_time": "2008-05-12T09:25:49Z", "is_private": false, "attachment_id": null}]