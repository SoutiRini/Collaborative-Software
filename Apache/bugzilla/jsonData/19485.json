[{"count": 0, "tags": [], "bug_id": 19485, "attachment_id": null, "is_private": false, "id": 36389, "time": "2003-04-30T15:09:21Z", "creator": "klaas.caluwaerts@cropdesign.com", "creation_time": "2003-04-30T15:09:21Z", "text": "I have an xml file with several Java processes. Each of these Java processes \nstarts a differenet server. The problem I have is to start\nthose servers in a certain order. Is there any way to do this?\n\nBelow is the code in my xml file.\n\n<?xml version=\"1.0\" ?>\n  <project name=\"myProject\" default=\"startservers\" basedir=\"../.\">\n  <!--  set global properties for this build -->\n\n    ...\n\n  <target name=\"startservers\">\n  <!--  Run the servers -->\n  <parallel>\n    <java classname=\"www.myCompany.myServer1\" fork=\"yes\">\n      <arg line=\"mod=notryout\" />\n      <arg line=\"rmi=${ip}\" />\n      <arg line=\"xml=${basedir}/xml\" />\n      <jvmarg value=\"-Djava.rmi.server.codebase=http://${ip}:8060/myFolder/\" />\n      <jvmarg value=\"-Djava.security.policy=/myPolicy\" />\n      <jvmarg value=\"-Djava.rmi.server.hostname=${ip}\" />\n      <classpath refid=\"classpath\" />\n    </java>\n    <java classname=\"www.myCompany.myServer2\" fork=\"yes\">\n      <arg line=\"mod=tryout\" />\n      <arg line=\"rmi=${ip}\" />\n      <arg line=\"xml=${basedir}/xml\" />\n      <jvmarg value=\"-Djava.rmi.server.codebase=http://${ip}:8060/myFolder/\" />\n      <jvmarg value=\"-Djava.security.policy=/myPolicy\" />\n      <jvmarg value=\"-Djava.rmi.server.hostname=${ip}\" />\n      <classpath refid=\"classpath\" />\n    </java>\n    <java classname=\"www.myCompany.myServer3\" fork=\"yes\">\n      <arg line=\"mod=tryout\" />\n      <arg line=\"rmi=${ip}\" />\n      <arg line=\"xml=${basedir}/xml\" />\n      <jvmarg value=\"-Djava.rmi.server.codebase=http://${ip}:8060/myFolder/\" />\n      <jvmarg value=\"-Djava.security.policy=/myPolicy\" />\n      <jvmarg value=\"-Djava.rmi.server.hostname=${ip}\" />\n      <classpath refid=\"classpath\" />\n    </java>\n  </parallel>\n  </target>\n  </project>"}, {"count": 1, "tags": [], "creator": "conor@apache.org", "is_private": false, "text": "Currently Ant will start the threads in the order given but the JVM can schedule\nthe threads in a different order once they are started. You have two choices\n\nUse parallel with a group of <sequential> tasks. each sequential is a <sleep>\nfollowed by the <java> task. the delays on the sleeps are increased for each\nsubsequent server. This is not ideal and will depend on server startup times, etc. \n\nA better way is to use <waitfor> and test for some condition which indicates the\nprevious server is up and running. You'll need to have your servers able to do this.\n\n", "id": 41319, "time": "2003-07-24T14:39:46Z", "bug_id": 19485, "creation_time": "2003-07-24T14:39:46Z", "attachment_id": null}]