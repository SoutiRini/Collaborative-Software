[{"count": 0, "attachment_id": null, "bug_id": 23692, "text": "- google sends content-type text/html\n- mod_proxy changes that to content-type text/html; charset=ISO-8859-1\n- google html contains a meta http-equiv tag saying charset is text/html;\ncharset=utf-8\n- mozilla rolls dice and decides to believe the http headers\n\nresult: page gets displayed incorrectly (utf-8 interpreted as latin1).", "id": 45270, "time": "2003-10-09T09:15:48Z", "creator": "erno-apbugs@erno.iki.fi", "creation_time": "2003-10-09T09:15:48Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 23692, "text": "Does `AddDefaultCharset Off' help?", "id": 45273, "time": "2003-10-09T10:21:08Z", "creator": "nd@perlig.de", "creation_time": "2003-10-09T10:21:08Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "erno-apbugs@erno.iki.fi", "is_private": false, "id": 45276, "creation_time": "2003-10-09T11:29:08Z", "time": "2003-10-09T11:29:08Z", "bug_id": 23692, "text": "it does, thank you for pointing out that option. :)\n\nperhaps it should be made the default for proxying?", "attachment_id": null}, {"count": 3, "tags": [], "creator": "nd@perlig.de", "text": "Fine. In fact, it *is* off by default. I guess you didn't install a vanilla\napache rather than a version of your distribution?", "id": 45289, "time": "2003-10-09T14:20:29Z", "bug_id": 23692, "creation_time": "2003-10-09T14:20:29Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "erno-apbugs@erno.iki.fi", "text": "nope, compiled from pristine source:\n\n/tmp/httpd-2.0.47 % grep AddDefault docs/conf/*\ndocs/conf/httpd-std.conf:AddDefaultCharset ISO-8859-1\ndocs/conf/httpd-std.conf.in:AddDefaultCharset ISO-8859-1\ndocs/conf/httpd-win.conf:AddDefaultCharset ISO-8859-1\n\nthere is no mention of this in the proxy docs\n(http://httpd.apache.org/docs-2.0/mod/mod_proxy.html) either, so a lot of people\nusing the proxy module will hit this problem. i don't think it's ok to close the\nissue.", "id": 45303, "time": "2003-10-09T15:13:07Z", "bug_id": 23692, "creation_time": "2003-10-09T15:13:07Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 23692, "attachment_id": null, "is_private": false, "id": 45305, "time": "2003-10-09T16:49:30Z", "creator": "nd@perlig.de", "creation_time": "2003-10-09T16:49:30Z", "text": "Doh, you're right. I've just looked into the compiled in default, not the\ndistributed httpd.conf defaults. We need to rethink this.\n\nThanks!"}, {"attachment_id": null, "tags": [], "bug_id": 23692, "is_private": false, "count": 6, "id": 45308, "time": "2003-10-09T18:16:03Z", "creator": "erik@codefaktor.de", "creation_time": "2003-10-09T18:16:03Z", "text": "There are two other issues in regard to the AddDefaultCharset directive:\n\nbug 14513 http://nagoya.apache.org/bugzilla/show_bug.cgi?id=14513\nbug 23421 http://nagoya.apache.org/bugzilla/show_bug.cgi?id=23421\n\nNot to mention that a change of the AddDefaultCharset directive as shipped in the current default \nhttpd.conf to 'Off' might have some security implications (XSS, etc.)."}, {"count": 7, "attachment_id": null, "bug_id": 23692, "is_private": false, "id": 54602, "time": "2004-03-24T21:38:31Z", "creator": "P@draigBrady.com", "creation_time": "2004-03-24T21:38:31Z", "tags": [], "text": "Ok I think this is quite serious (at least for mozilla/opera\nwhich are correctly honouring the Content-Type in the HTTP-header).\nAt first I thought it was a mozilla bug:\nhttp://bugzilla.mozilla.org/show_bug.cgi?id=238488\nIn there is referenced http://www.cert.org/tech_tips/malicious_code_mitigation.html\nwhich to me suggests that if apache is setting the DefaultCharset\nit should translate characters as appropriate.\n\nPersonally I think what apache should do is to inspect\nthe charset=value in the file and set the HTTP-header to match\niff AddDefaultCharset is set."}, {"count": 8, "tags": [], "creator": "fielding@apache.org", "is_private": false, "id": 68306, "creation_time": "2004-12-11T07:34:25Z", "time": "2004-12-11T07:34:25Z", "bug_id": 23692, "text": "AddDefaultCharset has been removed from the default configuration\nfor future releases.\n", "attachment_id": null}]