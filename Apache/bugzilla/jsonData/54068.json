[{"count": 0, "tags": [], "text": "Created attachment 29522\nTest case implementation\n\nThe implementation of web fragment sorting with relative ordering constraints may detect circular references, even though there is no such circle. \n\nThis occurrence of this bug depends on the iteration order of the input map.\n\nConsider the attached test case, defining a simple chain of three web fragments:\n* web fragments a, b, c, with relative constraints \"b after a\", \"c after b\".\n* expected result: a, b, c\n* actual result: \n\nTestcase: testOrderWebFragmentsRelative4 took 0,002 sec\n        Caused an ERROR\nFragment relative ordering contains circular references. Thsi can be resolved by using absolute ordering in web.xml.\njava.lang.IllegalArgumentException: Fragment relative ordering contains circular references. Thsi can be resolved by using absolute ordering in web.xml.\n        at org.apache.catalina.deploy.WebXml.orderWebFragments(WebXml.java:2190)\n        at org.apache.catalina.deploy.TestWebXmlOrdering.testOrderWebFragmentsRelative4(TestWebXmlOrdering.java:268)\n\nWorkaround: use absolute ordering.\n\nDetails:\n* Java 1.7.0_07", "is_private": false, "bug_id": 54068, "id": 163046, "time": "2012-10-30T05:30:27Z", "creator": "dennis.homann@coremedia.com", "creation_time": "2012-10-30T05:30:27Z", "attachment_id": 29522}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": 29522, "id": 163053, "time": "2012-10-30T08:38:33Z", "bug_id": 54068, "creation_time": "2012-10-30T08:38:33Z", "is_private": false, "text": "Comment on attachment 29522\nTest case implementation\n\nFix MIME type"}, {"count": 2, "tags": [], "bug_id": 54068, "attachment_id": null, "text": "What a lovely can of worms that was. All my own fault since I wrote the broken algorithm in the first place.\n\nI have re-written the sorting algorithm to address the issue identified in this report and a handful of other problems that emerged as I started to look for ways to break the existing algorithm.\n\nThe test cases for relative ordering have be re-written so they test all 720 possible combinations of input order for each test and I have increased the number of test cases including several to cover the ordering highlighted in this test case.\n\nThe fix has been made to trunk and 7.0.x and will be included in 7.0.33 onwards.", "id": 163101, "time": "2012-10-31T22:07:30Z", "creator": "markt@apache.org", "creation_time": "2012-10-31T22:07:30Z", "is_private": false}, {"count": 3, "tags": [], "creator": "dennis.homann@coremedia.com", "attachment_id": null, "text": "Great, thank you!", "id": 163102, "time": "2012-10-31T22:10:43Z", "bug_id": 54068, "creation_time": "2012-10-31T22:10:43Z", "is_private": false}]