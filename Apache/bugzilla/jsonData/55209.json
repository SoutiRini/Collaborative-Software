[{"count": 0, "tags": [], "bug_id": 55209, "text": "Created attachment 30560\nGood and bad requests\n\nAfter about a day of runtime Tomcat randomly starts to return garbage data instead of proper headers (see attachments)\n\nIt happens even on static files with no application at all.\n\nConfigurations are very standard, the only difference is thread pool, but I tried to disable it too.\n\n    <Executor name=\"tomcatThreadPool\" namePrefix=\"catalina-exec-\"\n        maxThreads=\"256\" minSpareThreads=\"4\"/>\n\n    <Connector port=\"8081\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n                executor=\"tomcatThreadPool\"\n               connectionTimeout=\"20000\"\n               redirectPort=\"8443\" />\n\n\nROOT contains only one index file:\n[12:57 root@g3-af /usr/share/tomcat/webapps/ROOT]$ ls -al\ntotal 12\ndrwxr-xr-x 2 tomcat tomcat 4096 Jul  4 13:48 .\ndrwxr-xr-x 5 tomcat tomcat 4096 Jul  4 13:48 ..\n-rw------- 1 tomcat tomcat 1135 Jul  4 13:48 index.html\n\n\nRestarting Tomcat helps for another day then it happens back.\n\nI will leave server running for some days, you can try to get http://g3.af.madsword.com a dozen times to see it for yourself.", "id": 168340, "time": "2013-07-07T10:02:36Z", "creator": "tech@wwc.lv", "creation_time": "2013-07-07T10:02:36Z", "is_private": false, "attachment_id": 30560}, {"attachment_id": null, "tags": [], "bug_id": 55209, "text": "This is the only report (so far) of this problem. Either you've hit a very rare edge case or there is an application and / or environment issue at play. Without some evidence to back up the claim that this is a Tomcat bug, this report will be resolved as invalid. You either need to provide the steps to reproduce this on a clean install of the latest 7.0.x release or an analysis of the Tomcat source code that identifies the issue and explains the output you see.\n\nMy guess, based on the information provided to date is that something (a Filter?) is retaining a reference to a request and/or response object.", "count": 1, "id": 168348, "time": "2013-07-07T14:09:29Z", "creator": "markt@apache.org", "creation_time": "2013-07-07T14:09:29Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "tech@wwc.lv", "text": "This is a static file in an empty \"ROOT\" webapp. \n\nIs there a chance that filters configured in other webapps influence \"ROOT\"?\n\nCould they... somehow globally alter request processing threads? Where to dig?", "count": 2, "id": 168351, "time": "2013-07-07T18:55:28Z", "bug_id": 55209, "creation_time": "2013-07-07T18:55:28Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "markt@apache.org", "is_private": false, "id": 168377, "time": "2013-07-08T09:58:10Z", "bug_id": 55209, "creation_time": "2013-07-08T09:58:10Z", "tags": [], "text": "(In reply to Pavel Veretennikov from comment #2)\n> This is a static file in an empty \"ROOT\" webapp.\n\nI am aware of that.\n \n> Is there a chance that filters configured in other webapps influence \"ROOT\"?\n\nYes.\n\n> Could they... somehow globally alter request processing threads? Where to\n> dig?\n\nA connector's thread pool is shared between all web applications that are part of the same service as the connector.\n\nRequest and response objects are recycled and re-used across all web applications.\n\nI'l look for the app that writes large chunks of whitespace to the response and then for a retained reference to the response or possibly the request."}, {"count": 4, "tags": [], "creator": "tech@wwc.lv", "is_private": false, "text": "Seemed to be a rogue Atmosphere 1.1.0-RC4 or Filter.", "id": 168560, "time": "2013-07-12T12:17:05Z", "bug_id": 55209, "creation_time": "2013-07-12T12:17:05Z", "attachment_id": null}]