[{"count": 0, "tags": [], "creator": "rfrovarp@apache.org", "text": "With templated publications, the first one loaded wins for usecase permission. Furthermore, if one of the base publications has additional permissions not present in the templated publication, these will not show up in the template upone restart.\n\n1) Create templated pub A\n2) Create templated pub B\n3) Change usecase perm in A\n4) Goto B\n5) Change different usecase perm in B\n   - this will save, but the form won't show it\n6) Stop lenya\n7) Start lenya\n8) Go to pub B and view usecases\n   this will show the change in step 5\n9) Go to pub A and view usecases\n   this won't show change in step 3, but will show change in step 5\n\nEven with a straight fallback instead of aggregate-fallback the problem persists with each pub having it's own usecase-policies.xml file.", "id": 114626, "time": "2008-03-14T08:41:57Z", "bug_id": 44604, "creation_time": "2008-03-14T08:41:57Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 44604, "attachment_id": null, "text": "I've tracked the problem to the SourceCache in UsecaseAuthorizerImpl. The key is the URI. The URI for every publication is exactly the same, so the cache returns the same result for every publication. Somehow the publication id needs to be used as part of the cache key.", "id": 114642, "time": "2008-03-14T12:22:50Z", "creator": "rfrovarp@apache.org", "creation_time": "2008-03-14T12:22:50Z", "is_private": false}, {"count": 2, "tags": [], "text": "I'd suggest the following:\n\n- Remove the configuration option, always use config/access-control/usecase-policies.xml.\n\n- Allow to pass the publication ID in aggregate-fallback URIs, like already supported by fallback (aggregate-fallback:pub://path). Actually it is already supported, but with a different syntax (aggregate-fallback://{pubid}//{path}). We should consolidate this.\n\n- Use these URIs in the usecase authorizer.", "attachment_id": null, "bug_id": 44604, "id": 117575, "time": "2008-06-11T07:52:17Z", "creator": "andreas@apache.org", "creation_time": "2008-06-11T07:52:17Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 44604, "text": "(In reply to comment #2)\n> I'd suggest the following:\n> \n> - Remove the configuration option, always use\n> config/access-control/usecase-policies.xml.\n\nBTW, how should we inform the user that the configuration isn't used anymore?\n\na) log a warning\nb) throw an exception, forcing the user to update the configuration\n\n", "id": 117576, "time": "2008-06-11T08:16:37Z", "creator": "andreas@apache.org", "creation_time": "2008-06-11T08:16:37Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "creator": "andreas@apache.org", "text": "Should be fixed in revision 666713. ATM a warning is logged if the configuration option still exists. Please reopen if you want a different behaviour.", "id": 117580, "time": "2008-06-11T08:43:22Z", "bug_id": 44604, "creation_time": "2008-06-11T08:43:22Z", "tags": [], "is_private": false}]