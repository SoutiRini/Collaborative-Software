[{"count": 0, "tags": [], "bug_id": 53496, "text": "I installed a fresh Fedora 17\n\nI compiled in a fine way httpd 2.2.17 with LDAP libs and SSL with OpenSSL shipped with Fedora 17 installation\n\nI decided to install openssl v 1.0.1c\n\nfrom when I compiled and installed it I got in troubles!\n\nI even done     yum reinstall openssl   but nothing\n\nI get configure errors that say that SSL libs are wrong or missing\n\nI tried   export       LIBS=-lidl     but nothing! I got compile errors with old HTTPD v 2.1 or 2.2\n\nI downgraded OPENSSL from www.openssl.org but the same\n\nWith openssl v 1.0.1c and httpd 2.4.2 I get no errors on configure but on make I get\n\nosi/dev/apache/httpd-2.4.2/modules/mappers -prefer-pic -c ssl_util_stapling.c && touch ssl_util_stapling.slo\n/usr/local/apr/build-1/libtool --silent --mode=compile gcc -std=gnu99 -g -O2 -pthread     -D_REENTRANT -D_GNU_SOURCE    -I. -I/home/colosi/dev/apache/httpd-2.4.2/os/unix -I/home/colosi/dev/apache/httpd-2.4.2/include -I/usr/local/apr/include/apr-1 -I/home/colosi/dev/ldap/novell-cldap-devel-2006.02.20-1linux/include/ -I/usr/local/include -I/home/colosi/dev/apache/httpd-2.4.2/modules/aaa -I/home/colosi/dev/apache/httpd-2.4.2/modules/cache -I/home/colosi/dev/apache/httpd-2.4.2/modules/core -I/home/colosi/dev/apache/httpd-2.4.2/modules/database -I/home/colosi/dev/apache/httpd-2.4.2/modules/filters -I/home/colosi/dev/apache/httpd-2.4.2/modules/ldap -I/home/colosi/dev/apache/httpd-2.4.2/server -I/home/colosi/dev/apache/httpd-2.4.2/modules/loggers -I/home/colosi/dev/apache/httpd-2.4.2/modules/lua -I/home/colosi/dev/apache/httpd-2.4.2/modules/proxy -I/home/colosi/dev/apache/httpd-2.4.2/modules/session -I/usr/local/ssl/include -I/home/colosi/dev/apache/httpd-2.4.2/modules/ssl -I/home/colosi/dev/apache/httpd-2.4.2/modules/test -I/home/colosi/dev/apache/httpd-2.4.2/server -I/home/colosi/dev/apache/httpd-2.4.2/modules/arch/unix -I/home/colosi/dev/apache/httpd-2.4.2/modules/dav/main -I/home/colosi/dev/apache/httpd-2.4.2/modules/generators -I/home/colosi/dev/apache/httpd-2.4.2/modules/mappers -prefer-pic -c ssl_util.c && touch ssl_util.slo\n/usr/local/apr/build-1/libtool --silent --mode=compile gcc -std=gnu99 -g -O2 -pthread     -D_REENTRANT -D_GNU_SOURCE    -I. -I/home/colosi/dev/apache/httpd-2.4.2/os/unix -I/home/colosi/dev/apache/httpd-2.4.2/include -I/usr/local/apr/include/apr-1 -I/home/colosi/dev/ldap/novell-cldap-devel-2006.02.20-1linux/include/ -I/usr/local/include -I/home/colosi/dev/apache/httpd-2.4.2/modules/aaa -I/home/colosi/dev/apache/httpd-2.4.2/modules/cache -I/home/colosi/dev/apache/httpd-2.4.2/modules/core -I/home/colosi/dev/apache/httpd-2.4.2/modules/database -I/home/colosi/dev/apache/httpd-2.4.2/modules/filters -I/home/colosi/dev/apache/httpd-2.4.2/modules/ldap -I/home/colosi/dev/apache/httpd-2.4.2/server -I/home/colosi/dev/apache/httpd-2.4.2/modules/loggers -I/home/colosi/dev/apache/httpd-2.4.2/modules/lua -I/home/colosi/dev/apache/httpd-2.4.2/modules/proxy -I/home/colosi/dev/apache/httpd-2.4.2/modules/session -I/usr/local/ssl/include -I/home/colosi/dev/apache/httpd-2.4.2/modules/ssl -I/home/colosi/dev/apache/httpd-2.4.2/modules/test -I/home/colosi/dev/apache/httpd-2.4.2/server -I/home/colosi/dev/apache/httpd-2.4.2/modules/arch/unix -I/home/colosi/dev/apache/httpd-2.4.2/modules/dav/main -I/home/colosi/dev/apache/httpd-2.4.2/modules/generators -I/home/colosi/dev/apache/httpd-2.4.2/modules/mappers -prefer-pic -c ssl_util_ssl.c && touch ssl_util_ssl.slo\n/usr/local/apr/build-1/libtool --silent --mode=compile gcc -std=gnu99 -g -O2 -pthread     -D_REENTRANT -D_GNU_SOURCE    -I. -I/home/colosi/dev/apache/httpd-2.4.2/os/unix -I/home/colosi/dev/apache/httpd-2.4.2/include -I/usr/local/apr/include/apr-1 -I/home/colosi/dev/ldap/novell-cldap-devel-2006.02.20-1linux/include/ -I/usr/local/include -I/home/colosi/dev/apache/httpd-2.4.2/modules/aaa -I/home/colosi/dev/apache/httpd-2.4.2/modules/cache -I/home/colosi/dev/apache/httpd-2.4.2/modules/core -I/home/colosi/dev/apache/httpd-2.4.2/modules/database -I/home/colosi/dev/apache/httpd-2.4.2/modules/filters -I/home/colosi/dev/apache/httpd-2.4.2/modules/ldap -I/home/colosi/dev/apache/httpd-2.4.2/server -I/home/colosi/dev/apache/httpd-2.4.2/modules/loggers -I/home/colosi/dev/apache/httpd-2.4.2/modules/lua -I/home/colosi/dev/apache/httpd-2.4.2/modules/proxy -I/home/colosi/dev/apache/httpd-2.4.2/modules/session -I/usr/local/ssl/include -I/home/colosi/dev/apache/httpd-2.4.2/modules/ssl -I/home/colosi/dev/apache/httpd-2.4.2/modules/test -I/home/colosi/dev/apache/httpd-2.4.2/server -I/home/colosi/dev/apache/httpd-2.4.2/modules/arch/unix -I/home/colosi/dev/apache/httpd-2.4.2/modules/dav/main -I/home/colosi/dev/apache/httpd-2.4.2/modules/generators -I/home/colosi/dev/apache/httpd-2.4.2/modules/mappers -prefer-pic -c ssl_engine_ocsp.c && touch ssl_engine_ocsp.slo\n/usr/local/apr/build-1/libtool --silent --mode=compile gcc -std=gnu99 -g -O2 -pthread     -D_REENTRANT -D_GNU_SOURCE    -I. -I/home/colosi/dev/apache/httpd-2.4.2/os/unix -I/home/colosi/dev/apache/httpd-2.4.2/include -I/usr/local/apr/include/apr-1 -I/home/colosi/dev/ldap/novell-cldap-devel-2006.02.20-1linux/include/ -I/usr/local/include -I/home/colosi/dev/apache/httpd-2.4.2/modules/aaa -I/home/colosi/dev/apache/httpd-2.4.2/modules/cache -I/home/colosi/dev/apache/httpd-2.4.2/modules/core -I/home/colosi/dev/apache/httpd-2.4.2/modules/database -I/home/colosi/dev/apache/httpd-2.4.2/modules/filters -I/home/colosi/dev/apache/httpd-2.4.2/modules/ldap -I/home/colosi/dev/apache/httpd-2.4.2/server -I/home/colosi/dev/apache/httpd-2.4.2/modules/loggers -I/home/colosi/dev/apache/httpd-2.4.2/modules/lua -I/home/colosi/dev/apache/httpd-2.4.2/modules/proxy -I/home/colosi/dev/apache/httpd-2.4.2/modules/session -I/usr/local/ssl/include -I/home/colosi/dev/apache/httpd-2.4.2/modules/ssl -I/home/colosi/dev/apache/httpd-2.4.2/modules/test -I/home/colosi/dev/apache/httpd-2.4.2/server -I/home/colosi/dev/apache/httpd-2.4.2/modules/arch/unix -I/home/colosi/dev/apache/httpd-2.4.2/modules/dav/main -I/home/colosi/dev/apache/httpd-2.4.2/modules/generators -I/home/colosi/dev/apache/httpd-2.4.2/modules/mappers -prefer-pic -c ssl_util_ocsp.c && touch ssl_util_ocsp.slo\n/usr/local/apr/build-1/libtool --silent --mode=link gcc -std=gnu99 -g -O2 -pthread    -L/home/colosi/dev/ldap/novell-cldap-devel-2006.02.20-1linux/lib/      -o mod_ssl.la -rpath /usr/local/apache2/modules -module -avoid-version  mod_ssl.lo ssl_engine_config.lo ssl_engine_dh.lo ssl_engine_init.lo ssl_engine_io.lo ssl_engine_kernel.lo ssl_engine_log.lo ssl_engine_mutex.lo ssl_engine_pphrase.lo ssl_engine_rand.lo ssl_engine_vars.lo ssl_scache.lo ssl_util_stapling.lo ssl_util.lo ssl_util_ssl.lo ssl_engine_ocsp.lo ssl_util_ocsp.lo  -L/usr/local/ssl/lib -lssl -lcrypto -luuid -lrt -lcrypt -lpthread -ldl -export-symbols-regex ssl_module\n/bin/ld: /usr/local/ssl/lib/libssl.a(s3_srvr.o): relocation R_X86_64_32 against `.rodata' can not be used when making a shared object; recompile with -fPIC\n/usr/local/ssl/lib/libssl.a: could not read symbols: Bad value\ncollect2: error: ld returned 1 exit status\nmake[4]: *** [mod_ssl.la] Error 1\nmake[4]: Leaving directory `/home/colosi/dev/apache/httpd-2.4.2/modules/ssl'\nmake[3]: *** [shared-build-recursive] Error 1\nmake[3]: Leaving directory `/home/colosi/dev/apache/httpd-2.4.2/modules/ssl'\nmake[2]: *** [shared-build-recursive] Error 1\nmake[2]: Leaving directory `/home/colosi/dev/apache/httpd-2.4.2/modules'\nmake[1]: *** [shared-build-recursive] Error 1\nmake[1]: Leaving directory `/home/colosi/dev/apache/httpd-2.4.2'\nmake: *** [all-recursive] Error 1\n[root@xxxx httpd-2.4.2]#\n\n\nconfigure line is:\n./configure --enable-deflate --enable-mime-magic --enable-expires --enable-usertrack --enable-unique-id --enable-ssl --with-ssl=/usr/local/ssl --enable-http --enable-mod-info --enable-info --enable-cgi --enable-cgid --enable-spelling --enable-module=all --with-ldap --enable-ldap --enable-auth-ldap --enable-authnz-ldap --with-ldap-include=/home/colosi/dev/ldap/novell-cldap-devel-2006.02.20-1linux/include/ --with-ldap-lib=/home/colosi/dev/ldap/novell-cldap-devel-2006.02.20-1linux/lib/ --enable-substitute --enable-rewrite --disable-userdir --enable-log-forensic", "id": 160401, "time": "2012-07-02T18:25:05Z", "creator": "alcol@hotmail.com", "creation_time": "2012-07-02T18:25:05Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "covener@gmail.com", "is_private": false, "id": 160403, "time": "2012-07-02T20:49:44Z", "bug_id": 53496, "creation_time": "2012-07-02T20:49:44Z", "tags": [], "text": "> /bin/ld: /usr/local/ssl/lib/libssl.a(s3_srvr.o): relocation R_X86_64_32\n> against `.rodata' can not be used when making a shared object; recompile\n> with -fPIC\n\nWhat happens when you recompile openssl with -fPIC like the message says?"}, {"count": 2, "attachment_id": null, "creator": "alcol@hotmail.com", "text": "I don't know how to proceed to compile it so to follow this istruction\n\nif you guide me, I could try", "id": 160406, "time": "2012-07-02T21:50:36Z", "bug_id": 53496, "creation_time": "2012-07-02T21:50:36Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "creator": "alcol@hotmail.com", "text": "I searched a bit on internet! it compiled\n\nfrom history, recompiled openssl and then apache\n\n  435  make clean\n  436  ./config shared\n  437  make\n  438  make install\n  439  cd ..\n  440  cd apache/\n  441  cd httpd-2.\n  442  cd httpd-2.4.2/\n  443  make clean\n  444  ../../conf/conf-apache.sh\n  445  make\n  446  make install\n  447  history\n\nfound ./config fips -fPIC       \ntoo but untried\n\nresult:\n\nServer version: Apache/2.4.2 (Unix)\nServer built:   Jul  3 2012 00:34:45\nServer's Module Magic Number: 20120211:3\nServer loaded:  APR 1.4.2, APR-UTIL 1.3.10\nCompiled using: APR 1.4.2, APR-UTIL 1.3.10\nArchitecture:   64-bit\nServer MPM:     event\n  threaded:     yes (fixed thread count)\n    forked:     yes (variable process count)\nServer compiled with....\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=256\n -D HTTPD_ROOT=\"/usr/local/apache2\"\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\n\nONLY I FIND STRANGE! I ever compile in \"COMPILED IN MODULES\" all inside same executable! not mod to be inserted from conf file\n\nowever from httpd -l it say\n\nCompiled in modules:\n  core.c\n  mod_so.c\n  http_core.c\n  event.c\n\n\nI find mod_ssl.so and other not internally linked ! has been compiled outside as loadable modules!\n\nanything different from apache 2.0 to have modules linked inside httpd?", "id": 160407, "time": "2012-07-02T22:42:32Z", "bug_id": 53496, "creation_time": "2012-07-02T22:42:32Z", "tags": [], "is_private": false}, {"count": 4, "attachment_id": null, "creator": "covener@gmail.com", "text": "Maybe you can find some help on a fedora mailing list or the Apache HTTP Server users mailing list:\n\nhttp://httpd.apache.org/userslist.html\n\nBugzilla is reserved for bug reporting, not support/discussion/assistance.", "id": 160412, "time": "2012-07-02T23:48:12Z", "bug_id": 53496, "creation_time": "2012-07-02T23:48:12Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "text": "As a hint (for the bug monitoring community as well as yourself)... you were\nusing a system openssl package?  You always need to install the corresponding\n-devel (or -dev) packages.  Since it only found openssl.a it refused to link\nagainst openssl.so.n because it was looking for an openssl.so symlink to that\nversion.  Anytime we see modules linking against .a packages, we expect you\nare in pretty bad shape.", "id": 161443, "time": "2012-08-15T21:05:58Z", "bug_id": 53496, "creation_time": "2012-08-15T21:05:58Z", "is_private": false}]