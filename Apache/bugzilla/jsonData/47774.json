[{"count": 0, "tags": [], "creator": "fujino.keiichi@oss.ntt.co.jp", "text": "When HttpSessionListener is executed, illegal class loader is set to the context classLoader.\n\nI think that the problem is in CoyoteAdapter#parseSessionCookiesId method. \nJSESSION COOKIE is parsed in this method, and sessionId is set to the request. \n\nTo check sessionId, Request#isRequestedSessionIdValid method is called in this method. \nAnd, Session#isValid() might be called in Request#isRequestedSessionIdValid method. \nHowever, the context class loader of a current thread is StandardClassLoader. \nIt is not WebappClassLoader. \n\nFor instance,\nWhen the session has already passed session-timeout, \nSession#expire is executed.\nAt this time, the context class loader of the thread that executes HttpSessionListenner#sessionDestroyed is StanderdClassLoader. \nThis is not good. \nThe context class loader of the thread that executes HttpSessionListenner should be WebAppClassLoader. \n\n\nBest regards.", "id": 130095, "time": "2009-09-01T01:58:42Z", "bug_id": 47774, "creation_time": "2009-09-01T01:58:42Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "This has been fixed in trunk and proposed for 6.0.x.\n\nThanks for the report.", "id": 132813, "time": "2009-12-14T15:03:43Z", "bug_id": 47774, "creation_time": "2009-12-14T15:03:43Z", "is_private": false}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "The patch has been applied to 6.0.x and will be included in 6.0.23 onwards.", "id": 133592, "time": "2010-01-14T02:04:05Z", "bug_id": 47774, "creation_time": "2010-01-14T02:04:05Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 47774, "is_private": false, "count": 3, "id": 135849, "time": "2010-04-02T06:14:10Z", "creator": "kfujino@apache.org", "creation_time": "2010-04-02T06:14:10Z", "text": "I reopned this bug.\nThis is not fixed against 5.5.x.\ntherefore, proposed for 5.5.x."}, {"count": 4, "tags": [], "bug_id": 47774, "text": "This fix applied to 5.5, will be in 5.5.30 onwards.", "id": 135981, "time": "2010-04-09T07:50:26Z", "creator": "kfujino@apache.org", "creation_time": "2010-04-09T07:50:26Z", "is_private": false, "attachment_id": null}]