[{"count": 0, "tags": [], "creator": "trymuna2000@yahoo.com", "text": "Whenever we shutdown Tomcat, we get the following error:\n\nStopping service Tomcat-Standalone\nJun 6, 2003 3:01:28 PM org.apache.tomcat.util.net.PoolTcpEndpoint \ncloseServerSocket\nSEVERE: Caught exception trying to unlock accept.\njava.net.ConnectException: Connection refused\n\tat java.net.PlainSocketImpl.socketConnect(Native Method)\n\tat java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:295)\n\tat java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:161)\n\tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:148)\n\tat java.net.Socket.connect(Socket.java:425)\n\tat java.net.Socket.connect(Socket.java:375)\n\tat java.net.Socket.<init>(Socket.java:290)\n\tat java.net.Socket.<init>(Socket.java:118)\n\tat org.apache.tomcat.util.net.PoolTcpEndpoint.closeServerSocket\n(PoolTcpEndpoint.java:326)\n\tat org.apache.tomcat.util.net.PoolTcpEndpoint.acceptSocket\n(PoolTcpEndpoint.java:397)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:529)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:536)\nJun 6, 2003 3:01:28 PM org.apache.tomcat.util.net.PoolTcpEndpoint \ncloseServerSocket\nSEVERE: Caught exception trying to close socket.\njava.lang.NullPointerException\n\tat org.apache.tomcat.util.net.PoolTcpEndpoint.closeServerSocket\n(PoolTcpEndpoint.java:338)\n\tat org.apache.tomcat.util.net.PoolTcpEndpoint.acceptSocket\n(PoolTcpEndpoint.java:397)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:529)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:536)\nJun 6, 2003 3:01:28 PM org.apache.tomcat.util.net.PoolTcpEndpoint acceptSocket\nWARNING: Reinitializing ServerSocket", "id": 38698, "time": "2003-06-10T22:00:35Z", "bug_id": 20663, "creation_time": "2003-06-10T22:00:35Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 20663, "text": "I also get it - right out of the box\n(only changed 8080 to 1080)\n\nThe exceptin happens in PoolTcpEndpoint.\nI attach a truss of the java VM for the whole shutdown, in case\nsomeone is interested. It shows the socket being terminated\nwithout an explicit close() call.\n", "id": 40484, "time": "2003-07-11T16:00:33Z", "creator": "vesely@tana.it", "creation_time": "2003-07-11T16:00:33Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "vesely@tana.it", "attachment_id": 7248, "id": 40486, "time": "2003-07-11T16:02:38Z", "bug_id": 20663, "creation_time": "2003-07-11T16:02:38Z", "is_private": false, "text": "Created attachment 7248\nTruss output of the SHUTDOWN of tomcat process"}, {"count": 3, "attachment_id": null, "bug_id": 20663, "text": "I also am getting this error.  Altough it is sporadic and I can not determine\nunder what conditions I am getting it.  It usually happens after running the\nserver for several hours and then trying to shutdown Tomcat 4.1.24.\n\nAlso, there is a similar defect 17193.  The difference, is that defect the error\noccurs from the CoyoteConnector.stop call..", "id": 40909, "time": "2003-07-17T16:17:11Z", "creator": "chris@itsolut.com", "creation_time": "2003-07-17T16:17:11Z", "tags": [], "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 20663, "is_private": false, "id": 41301, "time": "2003-07-24T13:58:21Z", "creator": "hauser@acm.org", "creation_time": "2003-07-24T13:58:21Z", "tags": [], "text": "we are getting the same here with SuSe 8.1\n\nMinor difference in line numbers:\n... \n        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:305)\n        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:171)\n        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:158)\n        at java.net.Socket.connect(Socket.java:426)\n        at java.net.Socket.connect(Socket.java:376)\n        at java.net.Socket.<init>(Socket.java:291)\n..."}, {"count": 5, "tags": [], "bug_id": 20663, "attachment_id": null, "id": 41326, "time": "2003-07-24T15:13:30Z", "creator": "hauser@acm.org", "creation_time": "2003-07-24T15:13:30Z", "is_private": false, "text": "looking at the mailing list, others seem to have the problem too as per the\nabove url and:\nhttp://marc.theaimsgroup.com/?l=tomcat-user&m=105004880709374&w=2\n==> we use SSL too, but on Suse, it even happens with clientAuth=\"false\"\n<Factory className=\"org.apache.coyote.tomcat4.CoyoteServerSocketFactory\"\nclientAuth=\"false\" protocol=\"TLS\"\nkeystoreFile=\"/root/.keystore\"/>"}, {"attachment_id": null, "tags": [], "creator": "hauser@acm.org", "text": "workaround for those who are not scripting experts like myself: killTomcat.sh\n\n<<#!/bin/sh\nlist=`ps -ef | grep jakarta-tomcat | grep -v grep | awk '{ print $2}'`\n\nfor i in $list\ndo\nkill -9 $i\ndone>>", "count": 6, "id": 41484, "time": "2003-07-25T07:28:51Z", "bug_id": 20663, "creation_time": "2003-07-25T07:28:51Z", "is_private": false}, {"count": 7, "attachment_id": null, "bug_id": 20663, "text": "when using tomcat also with SSL under Port 8443, it now happens also with Redhat 9\n\nalso watch out, if my below script has DOS linefeeds and you try to execute\nunder Linux, you get\n: bad interpreter: No such file or directory", "id": 42637, "time": "2003-08-12T15:33:23Z", "creator": "hauser@acm.org", "creation_time": "2003-08-12T15:33:23Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 59570, "time": "2004-06-19T12:23:59Z", "bug_id": 20663, "creation_time": "2004-06-19T12:23:59Z", "text": "This bug report has been transferred to Tomcat 5 because TC4 and TC5 share the \nconnectors and TC5 is now the focus of development effort"}, {"attachment_id": null, "tags": [], "bug_id": 20663, "text": "Tomcat 5 has a new shutdown procedure for connectors. I don't think it can be\nimproved further, and I am not getting any issues either, so this issue is invalid.", "count": 9, "id": 60014, "time": "2004-06-28T16:32:00Z", "creator": "remm@apache.org", "creation_time": "2004-06-28T16:32:00Z", "is_private": false}]