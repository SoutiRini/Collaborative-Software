[{"count": 0, "attachment_id": null, "bug_id": 27655, "is_private": false, "id": 53987, "time": "2004-03-15T00:48:12Z", "creator": "rob@cataclysm.cx", "creation_time": "2004-03-15T00:48:12Z", "tags": [], "text": "Attached is a patch that adds a function apr_pollset_update(). This\nupdates the list of requested events for the descriptor in the\nunderlying implementation for a descriptor that is already in a pollset.\n\nIt works well enough, but I'm not happy with it because it requires a\nsearch through the pollset (just as apr_pollset_remove() does). On a\nserver with hundreds or thousands of descriptors in the set and changing\nevents often, this might end up being too expensive.\n\nThe optimisation that I'd like to do is to maintain a pointer (by index\nor explicit) for each descriptor that points to the descriptors'\nunderlying pollfd structure, and just use this. This would lose the\nability to enter a socket into the set multiple times with different\nevents, as is currently possible, but would eliminate the search.\n\nThe only problem with this is that such a pointer would really belong in\napr_pollfd_t, except that its specific to the poll() implementation, and\nthat type is not opaque. So I'd appreciate some pointers on how to best\ndo this."}, {"count": 1, "attachment_id": 10777, "bug_id": 27655, "is_private": false, "id": 53988, "time": "2004-03-15T00:49:21Z", "creator": "rob@cataclysm.cx", "creation_time": "2004-03-15T00:49:21Z", "tags": [], "text": "Created attachment 10777\nUpdate requested events for a descriptor that is already in a poll set"}, {"count": 2, "attachment_id": null, "bug_id": 27655, "is_private": false, "id": 54705, "time": "2004-03-26T05:26:13Z", "creator": "rob@cataclysm.cx", "creation_time": "2004-03-26T05:26:13Z", "tags": [], "text": "New patch attached. Does the same job as before, but simpler. Also added the\npointer optimisitation discussed previously."}, {"count": 3, "tags": [], "text": "Created attachment 11002\nUpdate requested events for a descriptor that is already in a poll set (2)", "is_private": false, "id": 54706, "creator": "rob@cataclysm.cx", "time": "2004-03-26T05:27:08Z", "bug_id": 27655, "creation_time": "2004-03-26T05:27:08Z", "attachment_id": 11002}, {"count": 4, "tags": [], "creator": "wrowe@apache.org", "is_private": false, "id": 83526, "creation_time": "2005-12-10T23:26:29Z", "time": "2005-12-10T23:26:29Z", "bug_id": 27655, "text": "\n  Wondering if this is still valuable after the refactoring of the pollset api?", "attachment_id": null}, {"count": 5, "attachment_id": null, "bug_id": 27655, "is_private": false, "id": 86433, "time": "2006-03-03T04:58:35Z", "creator": "wrowe@apache.org", "creation_time": "2006-03-03T04:58:35Z", "tags": [], "text": "\n  Going to stall this bug as WONTFIX.  The shortcomings of 0.9 poll API were\n  well known, and enough incentive to completely refactor the API for APR 1.\n\n  IF this still has value, and can enhance the refactored APR 1.x API, I'd\n  love to hear about it;  please update the attachment and reopen this bug\n  if that's the case."}]