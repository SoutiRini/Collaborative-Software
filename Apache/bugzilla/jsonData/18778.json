[{"count": 0, "tags": [], "bug_id": 18778, "attachment_id": null, "is_private": false, "id": 34640, "time": "2003-04-07T20:23:48Z", "creator": "Ryan.Lubke@Sun.COM", "creation_time": "2003-04-07T20:23:48Z", "text": "Consider the following example:\n\n----------------------------------\n<my:catch var=\"ex\">\n    <c:out value=\"${null}\">\n        <my:throw/>\n    </c:out>\n</my:catch>\n<c:out value=\"${ex}\"/>\n----------------------------------\n\nIn the example above, my:catch is a classic handler\nthat implements the TryCatchFinally interface.\n\nmy:throw will throw an exception when evaluated.\n\nThe problem was first noticed when the second\nc:out element never printed any value.\n\nThe problem lies in the push/popBody logic that is generated.\n\nJasper, in the above case, will generate a method for the my:catch handler.\nIn the method, it defines an int counter to track push/popBody calls.\n\nWith the above example, the method for my:catch calls a generated method for\nthe first c:out and passes in the counter (which is currently 0).  The c:out\nmethod before evaluating its body increments the counter, and then calls the\nmethod for the my:throwit handler.  Since this only throws an exception, the\nhandler is never decremented, nor is popBody called.\n\nWhen control returns to the my:catch method, the counter value never changed as\nonly the value was passed, and popBody never gets called resulting in the\nbehavior described above (no output generated).\n\nI've attached the generated code to this bug report."}, {"count": 1, "tags": [], "text": "Created attachment 5678\nGenerated code", "attachment_id": 5678, "id": 34642, "creator": "Ryan.Lubke@Sun.COM", "time": "2003-04-07T20:24:23Z", "bug_id": 18778, "creation_time": "2003-04-07T20:24:23Z", "is_private": false}, {"count": 2, "tags": [], "creator": "justyna.horwat@sun.com", "attachment_id": null, "id": 59888, "time": "2004-06-25T16:55:14Z", "bug_id": 18778, "creation_time": "2004-06-25T16:55:14Z", "is_private": false, "text": "This bug is present in the latest Tomcat 4 release: Tomcat 4.1.30. I verified that it has been fixed in \nTomcat 5.0.25. Can the Tomcat 5 bug fix be ported to the Tomcat 4.x workspace?\n\nI'm reopening the bug and changing it to be a Tomcat 4 issue."}, {"count": 3, "tags": [], "creator": "jan.luehe@sun.com", "attachment_id": null, "text": "Yes, we could backport the fix to Tomcat 4, but I'm not aware of any Tomcat 4\nreleases being planned, so what good would it do to you?", "id": 59893, "time": "2004-06-25T18:59:11Z", "bug_id": 18778, "creation_time": "2004-06-25T18:59:11Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 18778, "attachment_id": null, "is_private": false, "id": 59911, "time": "2004-06-25T23:38:29Z", "creator": "justyna.horwat@sun.com", "creation_time": "2004-06-25T23:38:29Z", "text": "If there is a Tomcat 4 bug fix release post 4.1.30 then I would like to see this bug ported. A tag \nhandlers ability to process exceptions in a page is severly limited without this fix."}, {"count": 5, "tags": [], "bug_id": 18778, "attachment_id": null, "id": 59913, "time": "2004-06-25T23:52:06Z", "creator": "william.barker@wilshire.com", "creation_time": "2004-06-25T23:52:06Z", "is_private": false, "text": "Urm, last I checked, you were still a Tomcat committer, so....."}, {"count": 6, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 77687, "time": "2005-07-26T22:49:48Z", "bug_id": 18778, "creation_time": "2005-07-26T22:49:48Z", "is_private": false, "text": "*** Bug 26436 has been marked as a duplicate of this bug. ***"}]