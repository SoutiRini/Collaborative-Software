[{"attachment_id": null, "tags": [], "bug_id": 56018, "text": "Atempts to set oversized headers should fail with a nice screen:\n\nHTTP Status 500 - An attempt was made to write more data to the response headers than there was room available in the buffer. Increase maxHttpHeaderSize on the connector or write less data into the response headers.\n\nThat's the case *only* if you explicitly flush response writer:\n\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n\tbyte[] ba = new byte[10000];\n\tArrays.fill(ba, (byte) 1);\n\tresp.addCookie(new Cookie(\"test\", DatatypeConverter.printBase64Binary(ba)));\n\tresp.getWriter().flush();\n}\n\nBut in case there is no flush - it just silently fails with no errors whatsoever (neither in browser nor in the logs).\nThe same story with redirect:\n\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n\tbyte[] ba = new byte[10000];\n\tArrays.fill(ba, (byte) 1);\n\tresp.addCookie(new Cookie(\"test\", DatatypeConverter.printBase64Binary(ba)));\n\tresp.sendRedirect(\"blah\");\n}\n\nit just silently dies\n\nPlease confirm this is a bug, I can provide patch if needed.", "count": 0, "id": 172415, "time": "2014-01-16T10:29:09Z", "creator": "omikheev@gmail.com", "creation_time": "2014-01-16T10:29:09Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 56018, "text": "If there is no explicit flush then the output isn't flushed until after the execution path has exited the ErrorReportingValve. Once past this point there is no opportunity to add a error body.\n\nIn all of the error cases cited in this report, Tomcat will return a 500 response to the user agent. How the user agent chooses to display (or not display) that to the user is up to the user agent. There will also be a 500 entry in the access log.", "count": 1, "id": 172502, "time": "2014-01-19T19:45:38Z", "creator": "markt@apache.org", "creation_time": "2014-01-19T19:45:38Z", "is_private": false}]