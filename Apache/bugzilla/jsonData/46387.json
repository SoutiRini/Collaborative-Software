[{"count": 0, "tags": [], "bug_id": 46387, "text": "To reproduce, use the following source file in source folder \"src\":\n\n---\npackage ch.arrenbrecht.eclipsequirks.inference;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class New\n{\n\n\tpublic static <T, E extends T> List<T> arrayList( E... _elts )\n\t{\n\t\tfinal List<T> c = new ArrayList<T>( _elts.length );\n\t\tfor (E e : _elts)\n\t\t\tc.add( e );\n\t\treturn c;\n\t}\n\n\tpublic static <T, E extends T> List<T> list( E... _elts )\n\t{\n\t\treturn arrayList( _elts );\n\t}\n\t\n}\n---\n\nand the following Ant build.xml:\n\n---\n<project name=\"EclipseQuirks\" default=\"build\">\n\n\t<target name=\"build\">\n\t\t<javac srcdir=\"src\" destdir=\"temp/classes\">\n\t\t\t<include name=\"ch/arrenbrecht/eclipsequirks/inference/**\" />\n\t\t</javac>\n\t</target>\n\t\n</project>\n---\n\nRunning `ant build` will yield:\n\n---\nBuildfile: build.xml\n\nbuild:\n    [javac] Compiling 3 source files to /.../temp/classes\n    [javac] /.../src/ch/arrenbrecht/eclipsequirks/covariant/IBoth.java:3: types ch.arrenbrecht.eclipsequirks.covariant.ITwo and ch.arrenbrecht.eclipsequirks.covariant.IOne are incompatible; both define foo(), but with unrelated return types\n    [javac] public interface IBoth extends IOne, ITwo\n    [javac]        ^\n    [javac] 1 error\n\nBUILD FAILED\n/.../build.xml:9: Compile failed; see the compiler error output for details.\n\nTotal time: 0 seconds\n---\n\nBut a similar compilation using plain javac succeeds:\n\n---\n$ javac -version\njavac 1.6.0_0-internal\n$ javac \\\n\t-d temp/classes \\\n\t-classpath temp/classes \\\n\t-sourcepath src \\\n\t-g:none \\\n\tsrc/ch/arrenbrecht/eclipsequirks/inference/New.java\n---\n\nIt also succeeds if I add all the jars on the classpath reported by `ant -v build`.", "id": 123259, "time": "2008-12-12T06:53:32Z", "creator": "peter.arrenbrecht+apache@gmail.com", "creation_time": "2008-12-12T06:53:32Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "peter.arrenbrecht+apache@gmail.com", "is_private": false, "text": "I just realized I was running an age-old javac from the cmd line. Pointing it at JDK 1.6.0_11 made the problem appear in plain javac as well.", "id": 123260, "time": "2008-12-12T07:32:57Z", "bug_id": 46387, "creation_time": "2008-12-12T07:32:57Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 46387, "is_private": false, "count": 2, "id": 123261, "time": "2008-12-12T07:35:11Z", "creator": "peterreilly@apache.org", "creation_time": "2008-12-12T07:35:11Z", "text": "1) javac -version for sun's java is javac 1.6_05 and not javac 1.6.0-internal\n\nI think that the -internal is ibm's version.\n\nThe New class does not compile for sun's javac - it gives the following\nbizzare error:\n /usr/java/jdk1.6.0_04/bin/javac New.java       \nNew.java:18: incompatible types\nfound   : java.util.List<E>\nrequired: java.util.List<T>\n               return arrayList( _elts );\n                               ^\n1 error\n\n2) the reported errors deals with another class - IBoth.java and not New.java\n\n3) javac (boh sun and ibm) has issues in dealing with generics across classes and java sources - due to erasure.\n\n4) the New.java definition looks a bit odd - I am sure that one needs ? extends T, or something similar.\n\n5) ant does not do anything special to compile classes - it justs calls \nJavac.main() with the relavent command line options.\n"}, {"count": 3, "tags": [], "text": "Argh. So I even pasted the wrong error. Sorry, was investigating another issue (https://bugs.eclipse.org/bugs/show_bug.cgi?id=258658). The real error message was the one you just pasted. And - yes - I just discovered my cmdline javac was not pointing at the jdk I otherwise use. Marked invalid.", "is_private": false, "bug_id": 46387, "id": 123262, "time": "2008-12-12T07:41:44Z", "creator": "peter.arrenbrecht+apache@gmail.com", "creation_time": "2008-12-12T07:41:44Z", "attachment_id": null}]