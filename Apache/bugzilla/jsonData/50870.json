[{"count": 0, "tags": [], "text": "It seems possible to make the apache child to wait until the timeout if the Content-Lenght is specified inside a GET request. I perfectly know that the RFC2616 is not explicitely forbidding to provide a content-lenght to the GET request. The problem is a GET request with a content-lenght just takes some dozens of bytes, and then this makes that easy to produce DDOS. \n\nThis makes possible , expecially in the prefork configuration, to easily make all the childs busy in a server with some KB/s of bandwidth.\n\nThis happens even forbidding to have a Content-Lenght in the GET request with a rewriterules, or to setting mod_security to block this: the listener stays busy until the timeout expires.\n\nThis is an example with 90 secs of timeout. To reproduce it is easy.\n\n\ntime curl -v someserver:80  -H'Content-Length: 59'\n* About to connect() to localhost port 13091\n*   Trying 127.0.0.1... connected\n* Connected to localhost (127.0.0.1) port 13091\n> GET / HTTP/1.1\n> User-Agent: curl/7.15.3 (sparc-sun-solaris2.9) libcurl/7.15.3 OpenSSL/0.9.8a zlib/1.2.3\n> Host: someserver:80\n> Accept: */*\n> Content-Length: 59\n>\n< HTTP/1.1 403 Forbidden\n< Date: Fri, 04 Mar 2011 11:51:26 GMT\n< Content-Length: 202\n< Connection: close\n< Content-Type: text/html; charset=iso-8859-1\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>403 Forbidden</title>\n</head><body>\n<h1>Forbidden</h1>\n<p>You don't have permission to access /\non this server.</p>\n</body></html>\n* Closing connection #0\n\nreal    1m30.862s\nuser    0m0.028s\nsys     0m0.032s", "is_private": false, "bug_id": 50870, "id": 144727, "time": "2011-03-04T07:25:53Z", "creator": "enrico.fusi@gmail.com", "creation_time": "2011-03-04T07:25:53Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 50870, "attachment_id": null, "text": "This seems to be working as designed, Apache waits for the request to complete for as long as you configure it. For more fine grained control, use mod_reqtimeout.  \n\nIn the case of your rewrites, Apache is waiting to drain the body so the client will be sure to read the error.", "id": 144728, "time": "2011-03-04T07:46:28Z", "creator": "covener@gmail.com", "creation_time": "2011-03-04T07:46:28Z", "is_private": false}]