[{"count": 0, "tags": [], "text": "When building apache from sources I perform the following commands as a non-privileged user:\n\n./configure --with-included-apr\n\nmake\n\n\nFor the actual install into my PREFIX (/usr/local/apache2) I execute a privileged command of:\n\nsudo make install\n\n\nThis results in binaries, files, and directories that are NOT owned by root as one might expect.\n\nSome example files (all not owned by root):\n\n\n/usr/local/apache2/bin/apachectl\n/usr/local/apache2/bin/envvars-std\n/usr/local/apache2/bin/dbmmanage\n/usr/local/apache2/bin/envvars\n/usr/local/apache2/bin/apxs\n\n/usr/local/apache2/cgi-bin/printenv\n/usr/local/apache2/cgi-bin/printenv.wsf\n/usr/local/apache2/cgi-bin/printenv.vbs\n/usr/local/apache2/cgi-bin/test-cgi\n\nFiles inside  /usr/local/apache2/icons/\n\n/usr/local/apache2/error/include/\n\n\n\nSuggestion 1:\n\nModify the build scripts so when running make install any files or directories copied/created have the ownership and group membership set to the effective uid running the make install.\n\n\nSuggestion 2:\n\nAt the end of make install echo a comment to remind the admin to check the permissions of all the files and directories in PREFIX or wherever they installed for secure values.\n\n\nSuggestion 3:\n\nConsider automatically setting the file and directory mode to be more restrictive (e.g. chmod -R o-rwx PREFIX) after the make install.\n\nAnother option would be to provide a script or another make command that would optionally set locked down secure ownership and permissions.  \"make install --secure-permissions\" or something similar perhaps.", "is_private": false, "id": 173776, "creator": "business2008+issues.apache.org@rodneybeede.com", "time": "2014-03-12T18:22:53Z", "bug_id": 56252, "creation_time": "2014-03-12T18:22:53Z", "attachment_id": null}]