[{"count": 0, "attachment_id": null, "creator": "raysumpay@hotmail.com", "text": "Environment:\nAIX 5.1\nApache 1.3.27\ngcc version 2.9-aix51-020209\n\nAlthough using Configure 1.463 from CVS helped clear up the \"_nostart\" errors \n(AIX 5.1 ld issue) when using apxs to create a dynamic module, AIX 5.1 ld threw \nup another error due to not exporting global symbols, unreferenced symbols and \nsymbols beginning in an underscore.\n\n# ld -H512 -T512 -bhalt:4 -bM:SRE -bnoentry -\nbI:/sys_apps/apachetest/libexec/httpd.exp -lc -o mod_expires.so mod_expires.o\nld: 0711-244 ERROR: No csects or exported symbols have been saved.\n#\n\nBelow is a diff I generated that adds the -bexpall flag to the AIX 5.1 linker \n(ld), which does allow the exporting of such symbols.\n\n\n--- Configure.aix51     Wed Apr  2 14:04:47 2003\n+++ Configure.463       Wed Apr  2 14:13:36 2003\n@@ -1394,7 +1394,7 @@\n            esac\n            case $PLAT in\n                *-ibm-aix[45678]*)\n-                   LDFLAGS_SHLIB=\"-H512 -T512 -bhalt:4 -bM:SRE -bnoentry -\nbexpall\"\n+                   LDFLAGS_SHLIB=\"-H512 -T512 -bhalt:4 -bM:SRE -bnoentry\"\n                    ;;\n                *-ibm-aix*)\n                    LDFLAGS_SHLIB=\"-H512 -T512 -bhalt:4 -bM:SRE -e _nostart\"\n\nBest Regards,\nRainier G. Sumpay", "id": 34380, "time": "2003-04-02T21:16:59Z", "bug_id": 18627, "creation_time": "2003-04-02T21:16:59Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "creator": "trawick@apache.org", "text": "Symbols get exported by DSOs via the mod_foo.exp file.\n\nHere is a link I just did on AIX 5.1 using unpatched Apache 1.3.27.\n\nld -H512 -T512 -bhalt:4 -bM:SRE -e _nostart -bI:../../support/httpd.exp \n-bE:`echo mod_status.so|sed -e 's:\\.so$:.exp:'` -lc -o mod_status.so mod_status.lo\nld: 0711-327 WARNING: Entry point not found: _nostart\n\n  I configured Apache via\n\n ./configure --enable-module=most --enable-shared=max\n\nAny idea why your link doesn't get the -bE:`gobble` which expands to\n-bE:mod_foo.exp????\n\nThe 0711-327 message is just a warning which is safe to ignore (but which is\nfixed in 1.3.28-dev with the patch you picked up).\n\nWe don't desire -bexpall, so we need to figure out how you are missing the -bE:\nstuff.\n\nThanks,\n\nJeff\n", "id": 34387, "time": "2003-04-02T22:34:05Z", "bug_id": 18627, "creation_time": "2003-04-02T22:34:05Z", "tags": [], "is_private": false}]