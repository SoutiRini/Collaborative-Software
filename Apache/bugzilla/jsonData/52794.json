[{"count": 0, "tags": [], "text": "The log file shows the requests as being on port 443, but I have configured them on a different port. There is nothing listening on 443.\nrunning 2.2.20-1ubuntu1.2\n\nExample :\nwget https://space-station:83\n\n\n[Wed Feb 29 12:12:56 2012] [info] [client 127.0.0.1] Connection to child 4 established (server space-station:443)\n[Wed Feb 29 12:12:56 2012] [info] Seeding PRNG with 648 bytes of entropy\n[Wed Feb 29 12:12:56 2012] [info] Initial (No.1) HTTPS request received for child 4 (server space-station:443)\n\n==> custom_log <==\nspace-station:443 127.0.0.1 - - [29/Feb/2012:12:12:56 +0100] \"GET / HTTP/1.0\" 200 2328 \"-\" \"Wget/1.12 (linux-gnu)\"\n\n==> error_log <==\n[Wed Feb 29 12:12:56 2012] [info] [client 127.0.0.1] (70014)End of file found: SSL input filter read failed.\n[Wed Feb 29 12:12:56 2012] [info] [client 127.0.0.1] Connection closed to child 4 with standard shutdown (server space-station:443)\n\n\nthanks,\nmike", "attachment_id": null, "bug_id": 52794, "id": 154358, "time": "2012-02-29T11:17:20Z", "creator": "jamesmikedupont@gmail.com", "creation_time": "2012-02-29T11:17:20Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 52794, "attachment_id": null, "id": 154363, "time": "2012-02-29T12:25:09Z", "creator": "covener@gmail.com", "creation_time": "2012-02-29T12:25:09Z", "is_private": false, "text": "I think this is expected w/o ServerName example.com:83, but I see that mod_ssl does not consider http://httpd.apache.org/docs/2.2/mod/core.html#usecanonicalphysicalport"}, {"count": 2, "tags": [], "bug_id": 52794, "attachment_id": null, "id": 154470, "time": "2012-03-03T08:38:57Z", "creator": "asfbugz@velox.ch", "creation_time": "2012-03-03T08:38:57Z", "is_private": false, "text": "If the ServerName directive does not include a port number, then that's expected, yes.\n\nWhat is being printed in the error log lines shown above is mod_ssl's \"vhost_id\", which is determined independently of any request_rec (it's basically set at startup).\n\nWe could change the logging statements to use ap_get_server_name()/ap_get_server_port() for those cases where we have a request_rec - i.e. the one with \"Initial (No.1) HTTPS request...\" e.g.\n\nAs for the \"custom_log\", it's not clear to me what the first field is referring to. Can you provide the LogFormat directive you've used for logging this request?"}, {"count": 3, "tags": [], "bug_id": 52794, "attachment_id": null, "id": 154484, "time": "2012-03-04T11:33:24Z", "creator": "jamesmikedupont@gmail.com", "creation_time": "2012-03-04T11:33:24Z", "is_private": false, "text": "LogFormat \"%v:%p %h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" vhost_combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined"}, {"count": 4, "tags": [], "bug_id": 52794, "attachment_id": null, "text": "(In reply to comment #3)\n> LogFormat \"%v:%p %h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\"\n> vhost_combined\n\nOk, this makes clear that it isn't really a mod_ssl specific issue. %p is the canonical port taken from server_rec's \"port\" field, which is populated from the ServerName directive in core.c:server_hostname_port(). (If you want to log the actual port of the current connection, use \"%{local}p\" in your LogFormat string.)\n\nAdding \"ServerName space-station:83\" will solve your issue, and as this is what http://httpd.apache.org/docs/2.2/mod/core.html#servername is recommending (\"For optimal reliability and predictability, ...\"), I'm closing this bug with WONTFIX.", "id": 154604, "time": "2012-03-07T07:27:58Z", "creator": "asfbugz@velox.ch", "creation_time": "2012-03-07T07:27:58Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 52794, "attachment_id": null, "id": 154635, "creation_time": "2012-03-07T14:44:18Z", "time": "2012-03-07T14:44:18Z", "creator": "jamesmikedupont@gmail.com", "text": "Thanks, I learned something. I hope this report might help someone else with the same problem.\nthanks for your help,\nmike", "is_private": false}]