[{"count": 0, "attachment_id": null, "bug_id": 14948, "text": "Christian,\n\nThis was actually discussed as part of Bug 13866 but really should have been \nseparated. Repeated partially here:\n\n==== Start of copy from Bug 13866 ====\n\n------- Additional Comments From Manuel Mall 2002-11-19 01:20 -------\n....\n\nRegarding the resolving of URIs in FopImageFactory you say it works for you \nunder Linux. I can say it doesn't work for me under Linux. Could it be that we \nare using different JDKs (I use IBM 1.3.0) and that the behaviour of the URL \nconstructor \"new URL(context, spec)\" has changed? Any way, what I observe is \nthat if basedir is something like \"file:/...\" and the URL in the external-\ngraphics tag is also \"file:/...\", ie. has the protocol included (which it has \nfor all the FOP examples), then the constructor mentioned above does not \nresolve any relative paths in \"spec\" as it contains a protocol component which \naccording to the URL RFC means it is an absolute URL.\n\n\n------- Additional Comments From Christian Geisert 2002-11-28 14:01 -------\n\nI just had a look a the current source with regards to relative URLs.\n\nThe relative part is done with a URL.getFile() which returns the path\nwithout \"file:\" on the Sun JDK. Is this different with the IBM JDK?\n\n==== End of copy from Bug 13866 ====\n\nI just got the latest maintenance branch CVS build it and then tried to build \nthe doc/examples which returned errors for all images. To explain the error I \nadded one line of debug statement to FopImageFactory. Here is the log for the \nfirst example:\n\n      [fop] /home/mm/fop-dev/xml-fop/docs/examples/fo/bgimage.fo -\n> /home/mm/fop-dev/xml-fop/docs/examples/tests/bgimage.pdf\n      [fop] [INFO] building formatting object tree\n      [fop] [INFO] setting up fonts\n      [fop] baseURL=file:/home/mm/fop-dev/xml-fop/docs/examples/fo/ \nabsoluteURL.getFile()=/graphics/xml_feather_transparent.gif \nabsoluteURL=file:/graphics/xml_feather_transparent.gif\n      [fop] Error creating background image: Error while recovering Image \nInformations \n(file:/graphics/xml_feather_transparent.gif) : /graphics/xml_feather_transparent\n.gif (No such file or directory)\n      [fop] [INFO] [1]\n      [fop] baseURL=file:/home/mm/fop-dev/xml-fop/docs/examples/fo/ \nabsoluteURL.getFile()=/graphics/linux.bmp absoluteURL=file:/graphics/linux.bmp\n      [fop] Error creating background image: Error while recovering Image \nInformations (file:/graphics/linux.bmp) : /graphics/linux.bmp (No such file or \ndirectory)      \n\nThe actual URLs used in bgimage.fo are:\n    \"file:../../graphics/xml_feather_transparent.gif\"\n    \"file:../../graphics/linux.bmp\"\nObviously they are not correctly resolved.\n\nI then reapplied the part of the patch (originally provided with bug 13866) \nwhich deals with these relative URLs and now it works for me.\n\n      [fop] /home/mm/fop-dev/xml-fop/docs/examples/fo/bgimage.fo -\n> /home/mm/fop-dev/xml-fop/docs/examples/tests/bgimage.pdf\n      [fop] [INFO] building formatting object tree\n      [fop] [INFO] setting up fonts\n      [fop] baseURL=file:/home/mm/fop-dev/xml-fop/docs/examples/fo/ \nhref=../../graphics/xml_feather_transparent.gif absoluteURL=file:/home/mm/fop-\ndev/xml-fop/docs/graphics/xml_feather_transparent.gif\n      [fop] [INFO] [1]\n      [fop] baseURL=file:/home/mm/fop-dev/xml-fop/docs/examples/fo/ \nhref=../../graphics/linux.bmp absoluteURL=file:/home/mm/fop-dev/xml-\nfop/docs/graphics/linux.bmp", "id": 27155, "time": "2002-11-29T07:19:38Z", "creator": "mm@arcus.com.au", "creation_time": "2002-11-29T07:19:38Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": 3985, "bug_id": 14948, "is_private": false, "id": 27156, "time": "2002-11-29T07:21:49Z", "creator": "mm@arcus.com.au", "creation_time": "2002-11-29T07:21:49Z", "tags": [], "text": "Created attachment 3985\nDiff of FopImageFactory.java"}, {"count": 2, "tags": [], "creator": "christian.geisert@isu-gmbh.de", "text": "Committed, thanks.", "id": 27531, "attachment_id": null, "bug_id": 14948, "creation_time": "2002-12-09T01:01:17Z", "time": "2002-12-09T01:01:17Z", "is_private": false}, {"count": 3, "tags": [], "creator": "gadams@apache.org", "is_private": false, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155569, "time": "2012-04-01T06:28:10Z", "bug_id": 14948, "creation_time": "2012-04-01T06:28:10Z", "attachment_id": null}]