[{"count": 0, "tags": [], "creator": "johan@stromnet.org", "text": "My setup is a FreeBSD 6.0 box, using LDAP for users (running via lookupd for\nLDAP caching). I got problem with apache2.2.0 and mod_userdir, my user (in ldap)\nwas not found. This has been working fine with apache2.0 before. Might be the\nsame as mentioned in #35742?\n\nI've hunted the bug down:\nUsing APR with Apache 2.2.0, the file\nhttpd-2.2.0/srclib/apr/user/unix/userinfo.c specifies a PWBUF_SIZE of 512 bytes.\nOn FreeBSD 6.0 when using LDAP users, this is not enough. Rising it to 1024\nseems to do the trick, my mod_userdir now works.\nI'm not sure what value is appropriate here, but 512 is not enough, and 1024\nseems to work. getpwnam_r returns error ERANGE when 512 is used.\n\nSo, fix for this problem seems to be to change PWBUF_SIZE in\napr/user/unix/userinfo.c from 512 to 1024.", "id": 87140, "time": "2006-03-23T09:41:03Z", "bug_id": 39075, "creation_time": "2006-03-23T09:41:03Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "text": "Thanks for the report and analysis.  I've bumped it to 2048 for good measure; I\nguess it should really increase the size and loop given an ERANGE error, but\nthat's sounds like a lot of effort.\n\nhttp://svn.apache.org/viewcvs?rev=390410&view=rev\n\nIt would be useful to see whether the userinfo tests work in that configuration:\n\n  $ cd test; make testall\n  $ ./testall -v testuser\n\n", "id": 87473, "time": "2006-03-31T13:45:02Z", "bug_id": 39075, "creation_time": "2006-03-31T13:45:02Z", "is_private": false, "attachment_id": null}]