[{"count": 0, "tags": [], "text": "Created attachment 23100\nGDB-Backtrace\n\nHi everybody, \n\nsince I've upgraded the kernel of my webserver from version 2.6.26.9 to the latest kernel 2.6.28 my apache started to segfault:\n\n[Fri Jan 09 12:39:00 2009] [notice] child pid 11610 exit signal Segmentation fault (11)\n[Fri Jan 09 12:39:00 2009] [notice] child pid 11611 exit signal Segmentation fault (11)\n[Fri Jan 09 12:39:00 2009] [notice] child pid 11612 exit signal Segmentation fault (11)\n[Fri Jan 09 12:39:00 2009] [notice] child pid 11613 exit signal Segmentation fault (11)\n\nI've tried to track down the source of the problem with a coredump, gdb and mod_backtrace. \nIn /var/log/kern.log this shows up as follows: \n\nJan  9 15:00:10 n2 kernel: httpd[3882]: segfault at e264e350 ip 00007f47e2494941 sp 00007fffeb45f4d0 error 4 in libc-2.3.6.so[7f47e2412000+121000]\nJan  9 15:00:10 n2 kernel: httpd[3880]: segfault at e264e350 ip 00007f47e2494941 sp 00007fffeb45f4d0 error 4 in libc-2.3.6.so[7f47e2412000+121000]\n\nI've attached the output of the backtrace to this message for further investigation. As far as I understand the output of the backtrace, the source of the problem might be: \n\n#5  apr_pollset_add (pollset=0x0, descriptor=0x7fff85c4f4f0) at poll/unix/epoll.c:150\n\nline 150 is: \n\nif (pollset->flags & APR_POLLSET_NOCOPY) {\n\nseems like as if a dereferencing of the nullpointer is tried. This is a result of line 520 in prefork.c: \n\n/* ### check the status */\n(void) apr_pollset_create(&pollset, num_listensocks, pchild, 0);\n\nThis obvisiously doesn't work and the error is not correctly handled. Possible reasons: \n- epoll_create or apr_palloc aborts\n                         \nIn the changelog of the kernel I've found something interesting:\n\n commit 7ef9964e6d1b911b78709f144000aacadd0ebc21\n  Author: Davide Libenzi <davidel@xmailserver.org>\n  Date:   Mon Dec 1 13:13:55 2008 -0800\n  \n      epoll: introduce resource usage limits\n\nMaybe this sticks together? Please let me know if you need further information.\n\nbest regards,\nWerner Detter", "attachment_id": 23100, "id": 123899, "creator": "werner@aloah-from-hell.de", "time": "2009-01-09T06:21:21Z", "bug_id": 46501, "creation_time": "2009-01-09T06:21:21Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 46501, "attachment_id": null, "id": 123900, "time": "2009-01-09T06:27:51Z", "creator": "covener@gmail.com", "creation_time": "2009-01-09T06:27:51Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of bug 46467 ***"}]