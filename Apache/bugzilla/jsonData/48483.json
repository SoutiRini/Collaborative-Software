[{"count": 0, "tags": [], "text": "build/apr_hints.m4 currently adds \"-no-cpp-precomp\" to CPPFLAGS unconditionally on Darwin, but this compiler flag is only recognized by Apple's version of gcc. When building APR on OSX with FSF GCC, this results in many \"unrecognized option '-no-cpp-precomp'\" warnings. Similarly, adding \"-no-cpp-precomp\" to the output of `apr-1-config --cppflags` prevents APR from being easily used with FSF GCC on OSX.\n\nAn incremental improvement would be to have configure test for whether $CC accepts \"-no-cpp-precomp\" before adding it to CPPFLAGS. This wouldn't prevent the latter problem (compile APR with Apple GCC and then compile APR-using app with FSF GCC), but it would be slightly better, anyway.\n\nWhy do we need to specify \"-no-cpp-precomp\" in the first place?", "attachment_id": null, "id": 133310, "creator": "nrc@cs.berkeley.edu", "time": "2010-01-04T11:21:22Z", "bug_id": 48483, "creation_time": "2010-01-04T11:21:22Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 48483, "is_private": false, "id": 134064, "time": "2010-01-31T05:24:17Z", "creator": "jorton@redhat.com", "creation_time": "2010-01-31T05:24:17Z", "tags": [], "text": "It was added in:\n\nhttp://svn.apache.org/viewvc?view=revision&revision=63093\n\nIIRC -no-cpp-precomp has historically been needed on OS X since the preprocessor would just break on otherwise valid C.  You might be better off asking about this on dev@apr."}, {"count": 2, "tags": [], "creator": "misty@brew.sh", "text": "I just ran into this as well, when building ant with gcc-4.8 on Darwin.\n\nI'm unable to find -no-cpp-precomp in any of the GCC manpages; it's not documented even in the oldest Apple GCC I have, 3.3. However, I did find this older discussion referencing it: http://trac.wxwidgets.org/ticket/14029\n\nFrom that discussion, it appears that -no-cpp-precomp does nothing, and probably has done nothing for the better part of a decade. At this point removing shouldn't break anything.", "id": 170639, "time": "2013-10-16T15:23:58Z", "bug_id": 48483, "creation_time": "2013-10-16T15:23:58Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "The last release I can find where -cpp-precomp did anything is 2.95.2 (Apple build 937.2), from the December 2002 Xcode, prior to the release of Xcode 1.0 (presumably the one that shipped with it): http://opensource.apple.com/source/gcc/gcc-1640/gcc/gcc.c\n\nIn subsequent releases -cpp-precomp and -no-cpp-precomp were both made no-ops. The last time they were mentioned was in the install.texi from Apple GCC build 1765, from the WWDC 2004 developer tools; it was already a no-op by then.\n\nI think it's safe to say that -no-cpp-precomp can safely be removed.", "is_private": false, "id": 170642, "creator": "misty@brew.sh", "time": "2013-10-17T03:17:19Z", "bug_id": 48483, "creation_time": "2013-10-17T03:17:19Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "misty@brew.sh", "text": "The last release I can find where -cpp-precomp did anything is 2.95.2 (Apple build 937.2), from the December 2002 Xcode, prior to the release of Xcode 1.0 (presumably the one that shipped with it): http://opensource.apple.com/source/gcc/gcc-1640/gcc/gcc.c\n\nIn subsequent releases -cpp-precomp and -no-cpp-precomp were both made no-ops. The last time they were mentioned was in the install.texi from Apple GCC build 1765, from the WWDC 2004 developer tools; it was already a no-op by then.\n\nI think it's safe to say that -no-cpp-precomp can safely be removed.", "id": 170643, "time": "2013-10-17T03:17:49Z", "bug_id": 48483, "creation_time": "2013-10-17T03:17:49Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 48483, "is_private": false, "text": "Is there any chance of progress on this? The unnecessary code is still present in the latest codebase, and latest release.", "id": 179799, "time": "2014-12-16T16:21:45Z", "creator": "dominyktiller@gmail.com", "creation_time": "2014-12-16T16:21:45Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "id": 182249, "time": "2015-04-04T21:29:57Z", "bug_id": 48483, "creation_time": "2015-04-04T21:29:57Z", "is_private": false, "text": "The option has been removed in apr trunk and the 1.5.x and 1.6.x branches."}]