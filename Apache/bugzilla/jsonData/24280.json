[{"count": 0, "tags": [], "creator": "apache@dulfer.fastmail.fm", "text": "The following task:\n<java classname=\"MyClass\" classpath=\"${myclasspath}\">\n  <arg value=\"1\"/>\n  <arg value=\"\"/>\n  <arg value=\"3\"/>\n</java>\n\nwill pass args[] into MyClass#main as follows:\n\nUnix: { \"1\", \"\", \"3\" }\nWindows: { \"1\", \"3\" }\n\nI have found this to be the case comparing builds on WindowsXP and Solaris. I\ndon't know whether the discrepency comes from ANT or the JDKs involved.", "id": 46566, "time": "2003-10-31T05:48:46Z", "bug_id": 24280, "creation_time": "2003-10-31T05:48:46Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 24280, "attachment_id": null, "text": "It's probably due to the JDK and/or the underlying OS - Ant uses the same\nJDK method with the same arguments in both cases.\n\nIf you use <exec> instead of <java> and set vmlauncher to false, is there any\ndifference?", "id": 46674, "time": "2003-11-03T15:07:22Z", "creator": "bodewig@apache.org", "creation_time": "2003-11-03T15:07:22Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 24280, "is_private": false, "id": 46745, "attachment_id": null, "creator": "peter.reilly@corvil.com", "creation_time": "2003-11-04T12:36:45Z", "time": "2003-11-04T12:36:45Z", "text": "I have tested this on windows.\nI can only see this behaviour if one does:\n<java classname=\"MyClass\" classpath=\"${myclasspath}\" fork=\"yes\">\n  <arg value=\"1\"/>\n  <arg value=\"\"/>\n  <arg value=\"3\"/>\n</java>\n\nThe reason for this is the fact that Runtime.exec(String[] ...) is\nplatform specific and for windows J2SE (at least up to 1.4.1) uses\n\nCreateProcess(0, commandline, ....)\n\nWhere the second parameter is a string containing the commandline\nincluding all the arguements.\n\nIn the conversion to a string, the second arguement gets lost.\n\nThe code for the conversion is in the constructor of the class\nW32Process (available under sun's community source license)\nlooking at the code and at \nhttp://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/createprocess.asp\nI cannot see a way to make this work correctly.\nI would be inclined to set this to WONTFIX as in CANTFIX"}, {"count": 3, "tags": [], "bug_id": 24280, "attachment_id": null, "id": 48072, "time": "2003-11-25T09:26:36Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-11-25T09:26:36Z", "is_private": false, "text": "I have figured out how to modify W32Process to\nhandle empty arguments correctly:\n--- java-src/j2se/src/windows/classes/java/lang/Win32Process.java\tThu Sep 11\n02:55:51 2003\n+++ newexec/src/java/lang/Win32Process.java\tMon Nov 24 21:35:36 2003\n@@ -44,6 +44,9 @@\n \t\t    /* Unmatched quote for the argument. */\n \t\t    throw new IllegalArgumentException();\n \t\t}\n+            } else if (\"\".equals(s)) {\n+                // empty argument\n+                cmdbuf.append(\"\\\"\\\"\");\n \t    } else {\n \t        cmdbuf.append(s);\n \t    }\nAnd have filed a bug report with sun.\nAs this is a jdk problem and not an ant problem, i am marking\nthis as WONTFIX as in CANTFIX."}]