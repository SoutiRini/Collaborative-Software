[{"count": 0, "tags": [], "creator": "herve.girod@club-internet.fr", "attachment_id": null, "text": "The Batik WMF conversion library does not handle DIBBITBLT operand. This operand\nfills a Rectangle with a Background Color or an image. The result is that some\nrectangles that should be there are skipped in the resulting SVG image when\nconverting WMF Metafiles.", "id": 94043, "time": "2006-09-24T11:30:13Z", "bug_id": 40594, "creation_time": "2006-09-24T11:30:13Z", "is_private": false}, {"count": 1, "tags": [], "creator": "herve.girod@club-internet.fr", "is_private": false, "id": 94044, "creation_time": "2006-09-24T11:34:28Z", "time": "2006-09-24T11:34:28Z", "bug_id": 40594, "text": "(In reply to comment #0)\n> The Batik WMF conversion library does not handle DIBBITBLT operand. This operand\n> fills a Rectangle with a Background Color or an image. The result is that some\n> rectangles that should be there are skipped in the resulting SVG image when\n> converting WMF Metafiles.\n\nAs commented in Bug 40368, I have a patch that resolves this bug in my local\ncopy of Batik. I will send it as soon as I have performed more tests...\n\nTo antonio Broughton : Bugzilla is not able to import the batiktest2 that shows\nthis bug. Can you provide a smaller test file (with the background rectangle\nunder the \"HAMILTON\" text, which is the part that comes from the DIBBITBLT\noperand). Don't do this with PowerPoint, I tried this and it transforms the\noperand to another which is handled by the library, so it is no more a test case\nfor this bug then... ", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 40594, "attachment_id": null, "id": 94142, "time": "2006-09-26T23:46:25Z", "creator": "antonio@flerwin.net", "creation_time": "2006-09-26T23:46:25Z", "is_private": false, "text": "Hmmm\n\nI am unable to make a smaller image from the one given (crop the appropriate\ninformation).\n\nI will try and modfy the report for the program which actually generated the WMF\nin the first place."}, {"count": 3, "tags": [], "text": "Created attachment 18920\nTest case showing DIBBITBLT oprand\n\nTest case which shows that the words \"HAMILTON\" do not show in the SVG\ncorrectly.", "attachment_id": 18920, "id": 94144, "creator": "antonio@flerwin.net", "time": "2006-09-27T01:25:58Z", "bug_id": 40594, "creation_time": "2006-09-27T01:25:58Z", "is_private": false}, {"count": 4, "tags": [], "creator": "herve.girod@club-internet.fr", "attachment_id": 18924, "text": "Created attachment 18924\nPatch correcting the bug 40594", "id": 94189, "time": "2006-09-27T23:27:26Z", "bug_id": 40594, "creation_time": "2006-09-27T23:27:26Z", "is_private": false}, {"count": 5, "tags": [], "text": "(In reply to comment #3)\n> \n> Test case which shows that the words \"HAMILTON\" do not show in the SVG\n> correctly.\n\nThanks for the smaller test case, it is now possible to use it as an attachment !!\n\n", "is_private": false, "id": 94190, "creator": "herve.girod@club-internet.fr", "time": "2006-09-27T23:28:23Z", "bug_id": 40594, "creation_time": "2006-09-27T23:28:23Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 40594, "attachment_id": null, "id": 97096, "time": "2006-12-19T14:16:22Z", "creator": "trejkaz@trypticon.org", "creation_time": "2006-12-19T14:16:22Z", "is_private": false, "text": "Any chance of getting this committed?  I think I'm seeing symptoms of the same\nissue.\n"}, {"count": 7, "tags": [], "text": "Patch Applied,  many thanks Herve for all your hard work on \nthe WMF code!", "attachment_id": null, "id": 98694, "creator": "deweese@apache.org", "time": "2007-01-29T10:01:47Z", "bug_id": 40594, "creation_time": "2007-01-29T10:01:47Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 40594, "attachment_id": null, "id": 99548, "time": "2007-02-18T16:40:19Z", "creator": "antonio@flerwin.net", "creation_time": "2007-02-18T16:40:19Z", "is_private": false, "text": "It seems that with the latest SVN version (which includes this patch) I get:\n\njava.lang.IndexOutOfBoundsException: Index: 1, Size: 1\n        at java.util.ArrayList.RangeCheck(Unknown Source)\n        at java.util.ArrayList.get(Unknown Source)\n        at\norg.apache.batik.transcoder.wmf.tosvg.MetaRecord.ElementAt(MetaRecord.java:70)\n        at\norg.apache.batik.transcoder.wmf.tosvg.WMFPainter.paint(WMFPainter.java:848)\n        at\norg.apache.batik.transcoder.wmf.tosvg.WMFTranscoder.transcode(WMFTranscoder.java:185)\n\nI added some logging, and found that this code is getting executed twice... on\nthe second execution is when the code fails...\n\nI added the following code for testing at line 847:\n\nSystem.out.println(\"ElementAt(0) :\"+mr.ElementAt( 0 ).intValue()+\":\");\nSystem.out.println(\"ElementAt(1) :\"+mr.ElementAt( 1 ).intValue()+\":\");\nSystem.out.println(\"ElementAt(2) :\"+mr.ElementAt( 2 ).intValue()+\":\");\n\nWhich resulted in the following:\n\nElementAt(0) :0:\nElementAt(1) :320:\nElementAt(2) :768:\nElementAt(0) :0:\njava.lang.IndexOutOfBoundsException: Index: 1, Size: 1\n...\n\nSo, it is on the second call, that ElementAt(1) is failing..."}, {"count": 9, "tags": [], "bug_id": 40594, "attachment_id": null, "id": 99814, "time": "2007-02-26T12:12:26Z", "creator": "antonio@flerwin.net", "creation_time": "2007-02-26T12:12:26Z", "is_private": false, "text": "As a side note...\n\nThe test I did, uses the attached test case on this bug."}, {"text": "I applied the patch to SVN Revision 462363  (dated 2006-09-27)... and this works\nfine :)\n\nHowever, I get the errors discussed above when checking out the latest SVN version.", "tags": [], "creator": "antonio@flerwin.net", "attachment_id": null, "count": 10, "id": 99817, "time": "2007-02-26T13:05:12Z", "bug_id": 40594, "creation_time": "2007-02-26T13:05:12Z", "is_private": false}, {"count": 11, "tags": [], "text": "Created attachment 19795\nfix the newest problem about this bug\n\na break was forgotten when applying the first patch, this new patch just adds\nit, it should work fine now...", "is_private": false, "id": 100941, "creator": "herve.girod@club-internet.fr", "time": "2007-03-25T16:32:42Z", "bug_id": 40594, "creation_time": "2007-03-25T16:32:42Z", "attachment_id": 19795}, {"count": 12, "tags": [], "bug_id": 40594, "attachment_id": null, "is_private": false, "id": 100942, "time": "2007-03-25T17:18:14Z", "creator": "cam@apache.org", "creation_time": "2007-03-25T17:18:14Z", "text": "Applied, thanks!"}]