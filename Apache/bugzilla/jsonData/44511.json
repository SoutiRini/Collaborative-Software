[{"count": 0, "tags": [], "bug_id": 44511, "text": "Created attachment 21603\ntrace between apache and the origin server\n\nHello,\n\nWe use Apache 2.2.6 as a reverse proxy cache with, almong others, mod_cache, mod_disk_cache and mod_proxy (of course).\nApache stores response from the origin server despite header \"Cache-Control : no-cache\", but it does not revalidate it on subsequent requests, so it serves stalled objects.", "id": 114128, "time": "2008-02-29T05:57:47Z", "creator": "esuran@generali.fr", "creation_time": "2008-02-29T05:57:47Z", "is_private": false, "attachment_id": 21603}, {"attachment_id": null, "tags": [], "bug_id": 44511, "is_private": false, "count": 1, "id": 114130, "time": "2008-02-29T07:05:58Z", "creator": "rpluem@apache.org", "creation_time": "2008-02-29T07:05:58Z", "text": "Can you check if the following patch fixes your problem:\n\nIndex: modules/cache/cache_util.c\n===================================================================\n--- modules/cache/cache_util.c  (revision 632318)\n+++ modules/cache/cache_util.c  (working copy)\n@@ -235,6 +235,14 @@\n     cc_cresp = apr_table_get(h->resp_hdrs, \"Cache-Control\");\n     expstr = apr_table_get(h->resp_hdrs, \"Expires\");\n\n+    if (ap_cache_liststr(NULL, cc_cresp, \"no-cache\", NULL)) {\n+        /*\n+         * The cached entity contained Cache-Control: no-cache, so treat as\n+         * stale causing revalidation\n+         */\n+        return 0;\n+    }\n+\n     if ((agestr = apr_table_get(h->resp_hdrs, \"Age\"))) {\n         age_c = apr_atoi64(agestr);\n     }\n"}, {"count": 2, "tags": [], "text": "Created attachment 21604\nPatch against trunk", "is_private": false, "bug_id": 44511, "id": 114132, "time": "2008-02-29T07:08:13Z", "creator": "rpluem@apache.org", "creation_time": "2008-02-29T07:08:13Z", "attachment_id": 21604}, {"count": 3, "tags": [], "creator": "esuran@generali.fr", "attachment_id": null, "id": 114168, "time": "2008-03-02T02:13:21Z", "bug_id": 44511, "creation_time": "2008-03-02T02:13:21Z", "is_private": false, "text": "Hello Ruediger,\n\nYour patch works fine. Thank you.\nRegards,\n\nEric"}, {"count": 4, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "Committed to trunk as r632749 (http://svn.apache.org/viewvc?rev=632749&view=rev).", "id": 114170, "time": "2008-03-02T04:35:34Z", "bug_id": 44511, "creation_time": "2008-03-02T04:35:34Z", "is_private": false}]