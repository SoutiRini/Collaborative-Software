[{"count": 0, "tags": [], "bug_id": 33175, "is_private": false, "id": 69861, "attachment_id": null, "creator": "hayashin@ist.fujitsu.com", "creation_time": "2005-01-20T10:20:34Z", "time": "2005-01-20T10:20:34Z", "text": "On tomcat 4.1.30 sometime ServletRequest#getParameter() method return null,\nthough POST is done from the FORM tag of correct HTML.\nContent-Typte of HTTP header was the following at this time. \n-----------\nPOST ...\n...\nContent-Type: application/x-www-form-urlencoded, application/x-www-form-\nurlencoded\n...\n\nkey=value\n-----------\n\nIt thinks this to be a bug of IE but all browsers cannot be replaced. \nThere cannot be a thing that there are two or more values in Content-Type. \nIt is possible to deal with this problem by selecting the one value. \nIf it is possible, I want you to do as follows. \n\norg.apache.coyote.Request.java getContentType() method.\n-----------\n    public String getContentType() {\n        contentType();\n        if ((contentTypeMB == null) || contentTypeMB.isNull()) \n            return null;\n        // ********** FIX FROM **********\n        String orgContentType=contentTypeMB.toString();\n        java.util.StringTokenizer ts=new java.util.StringTokenizer\n(orgContentType,\",\");\n        String lastContentType=ts.nextToken();\n        while(ts.hasMoreTokens()){\n        \tlastContentType=ts.nextToken();\n        }\n        return lastContentType;\n//      return contentTypeMB.toString();\n        // ********** FIX TO **********\n    }\n-----------\n\nregards,\nNaru Hayashi"}, {"count": 1, "tags": [], "bug_id": 33175, "attachment_id": null, "id": 69884, "time": "2005-01-20T23:54:51Z", "creator": "markt@apache.org", "creation_time": "2005-01-20T23:54:51Z", "is_private": false, "text": "As you point out, the bug isn't with Tomcat. The content-type header you\ndescribe is invalid.\n\nSince it isn't a Tomcat but, I do not propose to change the current Tomact\nbehaviour. I recommend that you use a filter to address this issue. It has the\nadded advantage of being container neutral, so it would work with any spec\ncomplaint servler container.\n\nIf you require advice on how to write such a filter, please ask on the\ntomcat-user mailing list."}]