[{"count": 0, "tags": [], "text": "Here's a build.xml file.  I have two targets, only one of which should be\nexecuted depending on whether the project is named \"thin\".  The same target gets\nexecuted regardless of what the project is:\n\n<?xml version=\"1.0\"?>\n\n<project name=\"apps\" default=\"all\" basedir=\".\">\n\n\t<property name=\"vendor.lib\" value=\"${basedir}/../vendor/vendor-lib\" />\n\t<property name=\"common.lib\" value=\"${basedir}/../components/common-lib\" />\n\t<property name=\"build.file\" value=\"build.xml\" />\n\t<property name=\"thin\" value=\"thin\" />\n\n\t<target name=\"all\">\n\t\t<antcall target=\"check-project\">\n\t\t\t<param name=\"project\" value=\"${thin}\" />\n\t\t</antcall>\n\t\t<antcall target=\"check-project\">\n\t\t\t<param name=\"project\" value=\"not-thin\" />\n\t\t</antcall>\n\t</target>\n\n\t<target name=\"clean\">\n\t\t<antcall target=\"clean-project\">\n\t\t\t<param name=\"project\" value=\"${thin}\" />\n\t\t</antcall>\n\t</target>\n\n\t<target name=\"check-project\">\n\t\t<echo message=\"CHECKING ${project}\" />\n\t\t<uptodate property=\"${project}.buildNotRequired\"\ntargetfile=\"${project}/dist/${project}.jar\">\n\t\t\t<srcfiles dir=\"${project}/src\" includes=\"**/*.java\" />\n\t\t</uptodate>\n\t\t<antcall target=\"build-project\">\n\t\t\t<param name=\"project\" value=\"${project}\" />\n\t\t</antcall>\n\t</target>\n\n\t<target name=\"build-project\" unless=\"${project}.buildNotRequired\">\n\t\t<echo message=\"BUILDING ${project}\" />\n\t\t<echo message=\"thin = ${thin}, project = ${project}\" />\n\t\t<condition property=\"buildingThin\">\n\t\t\t<equals arg1=\"${thin}\" arg2=\"${project}\" />\n\t\t</condition>\n\n\t\t<echo message=\"buildingThin = ${buildingThin}\" />\n\t\t<antcall target=\"build-project-not-thin\">\n\t\t\t<param name=\"project\" value=\"${project}\" />\n\t\t</antcall>\n\t\t<antcall target=\"build-project-thin\">\n\t\t\t<param name=\"project\" value=\"${project}\" />\n\t\t</antcall>\n\t</target>\n\n\t<target name=\"build-project-thin\" if=\"${buildingThin}\">\n\t\t<echo message=\"Building thin\" />\n\t\t<!--\n\t\t<ant antfile=\"${project}/${build.file}\" target=\"ear\" inheritall=\"false\" >\n\t\t\t<property name=\"vendor.lib\" value=\"${vendor.lib}\"/>\n\t\t\t<property name=\"common.lib\" value=\"${common.lib}\"/>\n\t\t</ant>\n\t\t-->\n\t</target>\n\n\t<target name=\"build-project-not-thin\" unless=\"${buildingThin}\">\n\t\t<echo message=\"Building not thin\" />\n\t\t<!--\n\t\t<ant antfile=\"${project}/${build.file}\" target=\"ear\" inheritall=\"false\" >\n\t\t\t<property name=\"vendor.lib\" value=\"${vendor.lib}\"/>\n\t\t\t<property name=\"common.lib\" value=\"${common.lib}\"/>\n\t\t</ant>\n\t\t-->\n\t</target>\n\n\t<target name=\"clean-project\">\n\t\t<echo message=\"CLEANING ${project}\" />\n\t\t<ant antfile=\"${project}/${build.file}\" target=\"clean\" inheritall=\"false\" />\n\t</target>\n\n</project>", "attachment_id": null, "bug_id": 44315, "id": 113233, "time": "2008-01-28T13:50:10Z", "creator": "dean_w_schulze@yahoo.com", "creation_time": "2008-01-28T13:50:10Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 44315, "is_private": false, "text": "You don't use ${} notation inside if/unless attribute values.  These are expected to point to a property \nname which, if set, satisfies the condition.", "id": 113238, "time": "2008-01-28T14:59:54Z", "creator": "mbenson@apache.org", "creation_time": "2008-01-28T14:59:54Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "dean_w_schulze@yahoo.com", "is_private": false, "id": 113249, "time": "2008-01-28T20:25:29Z", "bug_id": 44315, "creation_time": "2008-01-28T20:25:29Z", "tags": [], "text": "Thanks for the pointer on using if / unless.\n\nThe normal way to use properties is throught the ${} notation so if / unless\nexpect a very different use of a property than elsehwere in Ant build files.\n\nAre there other places where I should use property names without ${} notation? \nIs the appropriate use of ${} notation covered in the docs anywhere?\n\nThere are other places in our build.xml files where others have written if /\nunless attributes using ${} notation and we really need to understand how to use\nit correctly.\n"}, {"count": 3, "attachment_id": null, "creator": "mbenson@apache.org", "is_private": false, "id": 113265, "time": "2008-01-29T06:14:20Z", "bug_id": 44315, "creation_time": "2008-01-29T06:14:20Z", "tags": [], "text": "This really is material for the userlist.  However, if/unless are described at http://ant.apache.org/manual/using.html#targets .  The examples there don't show ${} notation, and the \nattributes are described as taking a property name.  Feel free to suggest (on the developer list) any \nadditional wording you feel might make the matter clearer.  Ordinarily, property substitution applies \neverywhere else; i.e. I can't think of any other places where this dichotomy would trip you up."}]