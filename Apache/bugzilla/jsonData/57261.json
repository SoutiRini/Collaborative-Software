[{"count": 0, "tags": [], "text": "ManagerServlet supports the following commands that are not yet documented:\n\nhttp://localhost:8080/manager/text/vminfo\nhttp://localhost:8080/manager/text/threaddump\n\nFor reference see r1476960 (in 8.0.0) and r1578256 (in 8.0.4).\n\nTODO:\n1. It is documented that all Manager commands have output that starts with \"OK\".\nThese commands do not have an \"OK\" line, but start their output with a date. It is wrong and has to be fixed.\n\nThis includes the need to fix VminfoTask and ThreaddumpTask Ant tasks (r1578256).\n\n2. Document them in manager-howto.html\n\n3. Maybe mention them in Javadoc for ManagerServlet class, like other commands are listed there.", "attachment_id": null, "bug_id": 57261, "id": 179288, "time": "2014-11-25T22:38:49Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-11-25T22:38:49Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 57261, "attachment_id": 32231, "text": "Created attachment 32231\nResolve 1 and 2 task item", "id": 179316, "time": "2014-11-27T08:14:53Z", "creator": "otrohov@minsk.ximxim.com", "creation_time": "2014-11-27T08:14:53Z", "is_private": false}, {"count": 2, "tags": [], "creator": "otrohov@minsk.ximxim.com", "attachment_id": null, "text": "1. I added \"OK\" and some short description to responces, but what you mean about \"need to fix VminfoTask and ThreaddumpTask Ant tasks\"?\n2. Added\n3. This comments alredy exist in ManagerServlet class", "id": 179317, "time": "2014-11-27T08:17:50Z", "bug_id": 57261, "creation_time": "2014-11-27T08:17:50Z", "is_private": false}, {"text": "(In reply to Oleg Trokhov from comment #2)\n\nThere exist org.apache.catalina.ant.VminfoTask and ThreaddumpTask classes that are used as tasks in Ant. They call those manager commands via HTTP and parse their response. They should not stop working with the change of the output format.", "tags": [], "bug_id": 57261, "attachment_id": null, "count": 3, "id": 179318, "time": "2014-11-27T08:30:43Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-11-27T08:30:43Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 57261, "attachment_id": null, "text": "I found this classes, they have only these code:\n   \n public void execute() throws BuildException {\n\n        super.execute();\n        execute(\"/threaddump\");\n\n    }\nOutput from manager commands doesn't broken, all work fine. Or I misunderstood  something?", "id": 179319, "time": "2014-11-27T08:37:53Z", "creator": "otrohov@minsk.ximxim.com", "creation_time": "2014-11-27T08:37:53Z", "is_private": false}, {"text": "(In reply to Oleg Trokhov from comment #4)\n\nOK. Thank you.\n\nBefore looking at the source code I thought that there was some built-in change in behaviour. Actually there is an explicit configuration setting available (ignoreResponseConstraint attribute on AbstractCatalinaTask), that allows to turn off parsing of the first line of the response.", "tags": [], "bug_id": 57261, "attachment_id": null, "count": 5, "id": 179320, "time": "2014-11-27T08:46:16Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-11-27T08:46:16Z", "is_private": false}, {"count": 6, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "id": 179605, "time": "2014-12-08T05:16:52Z", "bug_id": 57261, "creation_time": "2014-12-08T05:16:52Z", "is_private": false, "text": "Fixed in trunk and 8.0.x (r1643737) and will be in 8.0.16 onwards."}, {"count": 7, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "id": 179608, "time": "2014-12-08T07:32:58Z", "bug_id": 57261, "creation_time": "2014-12-08T07:32:58Z", "is_private": false, "text": "I ported /vminfo and /threaddump commands to Tomcat 7 (r1643750, r1643754). They will be in 7.0.58 onwards."}]