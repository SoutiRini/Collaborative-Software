[{"count": 0, "tags": [], "bug_id": 54628, "text": "there is something wrong when send binary data by websocket.\n\nsee org.apache.catalina.websocket.WsOutbound.doWriteBytes(ByteBuffer, boolean)\n\nI think \n\n// Write the content\n        upgradeOutbound.write(buffer.array(), 0, buffer.limit());\n        upgradeOutbound.flush();\n\nshould change to :\n\n// Write the content\n        upgradeOutbound.write(buffer.array(), buffer.arrayOffset(), buffer.limit());\n        upgradeOutbound.flush();\n\n\nFor example:\nbyte[] bts = new byte[]{1,2,3,4,5}\nByteBuffer bf = ByteBuffer.wrap(bts, 2, 2);\nout.writeBinaryMessage(bf);\n\nI mean write [3,4] to the client, but in fact [1,2,3,4] be sent;", "id": 165582, "attachment_id": null, "creator": "b.lee@foxmail.com", "creation_time": "2013-03-02T08:37:25Z", "time": "2013-03-02T08:37:25Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "markt@apache.org", "is_private": false, "id": 165698, "time": "2013-03-06T20:55:17Z", "bug_id": 54628, "creation_time": "2013-03-06T20:55:17Z", "tags": [], "text": "Thanks for the report and for the fix.\n\nThis has been fixed in trunk and 7.0.x and will be included in 7.0.38 onwards."}]