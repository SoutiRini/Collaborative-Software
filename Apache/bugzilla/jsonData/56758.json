[{"count": 0, "tags": [], "bug_id": 56758, "attachment_id": null, "is_private": false, "id": 176592, "time": "2014-07-22T12:45:17Z", "creator": "ritesh.prajapati@slscorp.com", "creation_time": "2014-07-22T12:45:17Z", "text": "I have one Custom Linux board on which I want to run apache web server (httpd) to test HTML and other web based pages.\n\nI have configured, compiled and installed httpd 2.4.4 as well as 2.4.9 on my linux custom board. \n\nWhen I checked httpd.pid file in logs folder of apache directory, it contains invalid PID which shows 19 Digit long PID (Ex:- 2983363998394615403).\n\nI have also tried to change httpd.pid file path into some another location but still causes same issue.\n\nPlease find following output of ps and httpd.pid file for more reference.\n\n 1643 root     10936 S    /usr/local/apache2/bin/httpd -k start\n 1644 daemon   16812 S    /usr/local/apache2/bin/httpd -k start\n 1645 daemon   16812 S    /usr/local/apache2/bin/httpd -k start\n 1646 daemon   16812 S    /usr/local/apache2/bin/httpd -k start\n 1730 daemon   16820 S    /usr/local/apache2/bin/httpd -k start\n\n$ cat httpd.pid \n2983363998394615403\n\nPlease let me know if any one has idea about this issue."}, {"count": 1, "tags": [], "bug_id": 56758, "text": "I have also started httpd process using strace utility and found that process itself writing wrong PID into httpd.pid file.\n\nPlease find following logs for more information.\n\n./strace -o /usr/local/strace.out -f ./apache2/bin/apachectl start\n\n3033  stat64(\"/usr/local/apache2/logs/httpd.pid\", 0x7ba1e9b8) = -1 ENOENT (No such file or directory)\n\n3033  open(\"/usr/local/apache2/logs/httpd.pid\", O_WRONLY|O_CREAT|O_TRUNC|O_CLOEXEC, 0644) = 7\n\t\n3033  write(7, \"2983363998394616793\\n\", 20) = 20 ------> This shows grabage PID written in httpd.pid file\n\t\n3033  close(7)                          = 0\n\nSo, Above 19 digit (\"2983363998394616793\") wrong PID is written into httpd.pid file.\n\nPlease let me know if any one has idea about this issue.", "id": 176611, "time": "2014-07-23T06:01:56Z", "creator": "ritesh.prajapati@slscorp.com", "creation_time": "2014-07-23T06:01:56Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 56758, "attachment_id": null, "is_private": false, "id": 176621, "time": "2014-07-23T12:04:34Z", "creator": "ritesh.prajapati@slscorp.com", "creation_time": "2014-07-23T12:04:34Z", "text": "I have debugged code of APR and found that size of pid_t becomes 8 bit instead of 4 bit from configuration of APR.I looked into configuration file of APR and found that ac_cv_sizeof_pid_t becomes 8 bit if you are cross compiling APR.\n\nif test \"$cross_compiling\" = yes; then :\n  ac_cv_sizeof_pid_t=8\n\nso, that size of PID becomes 64 and store Process ID of httpd as garbage in to httpd.pid file.\n\nI have set this option as 4 (32 Bit as per my board configuration) like \n\nac_cv_sizeof_pid_t=4 \n\nand configured, compiled and installed that APR Package with httpd process.\n\nChecked httpd.pid file created valid and contains proper PID of httpd root process after starting httpd process.\n\nSo, Problem is solved from above configuration."}, {"text": "I'm moving this to APR as a doc issue.  We need to have a place to collect hints for those doing cross compilation.", "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "count": 3, "id": 176622, "time": "2014-07-23T12:37:20Z", "bug_id": 56758, "creation_time": "2014-07-23T12:37:20Z", "is_private": false}]