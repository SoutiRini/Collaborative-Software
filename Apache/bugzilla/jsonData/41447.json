[{"count": 0, "tags": [], "creator": "Ajay.Dharna@monsanto.com", "attachment_id": null, "text": "Hi,\n\nI have recently upgrade from tomcat 5.0.28 to 5.5.20 and everything seems to be\nworking fine for most of my apps except for the ones that have context with\nmulti-level path. Also I should mention that I am not unpacking any of my war\nfiles. (unpackWARs=\"false\" autoDeploy=\"true\")\n\nI deployed my app - foo.war which had the following context in\nfoo.war/meta-inf/context.xml \n\n<Context path=\"/some/foo\" docBase=\"foo.war\" debug=\"0\" privileged=\"true\"\nreloadable=\"true\"/> \n\n\nIn the Tomcat Manager Application List, I only see the path /foo and also in the\n<TOMCAT_CONF>/Catalina/hostname there is a file called foo.xml. If I try to hit\nthe url  < <http://localhost:8080/some/foo> http://localhost:8080/some/foo> \n<http://localhost:8080/some/foo> http://localhost:8080/some/foo - it doesn't work.\n\nI did some reach on this issue and found a similar issue in bugzilla ( <\n<http://issues.apache.org/bugzilla/show_bug.cgi?id=38198>\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=38198>\n\n <http://issues.apache.org/bugzilla/show_bug.cgi?id=38198>\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=38198) that mentioned that the\npath element is no longer being used and it mentions that I should rename the\ncontext.xml file to contain the path. According to Bug#:38198 in bugzilla - the\nfix is to rename the foo.xml file to be some#foo.xml and remove the path. So I\nrenamed the file in <TOMCAT_CONF>/Catalina/hostname/foo.xml to\n<TOMCAT_CONF>/Catalina/hostname/some#foo.xml and it now contains the\n\nfollowing: \n\n<Context docBase=\"foo.war\" debug=\"0\" privileged=\"true\" reloadable=\"true\"/> \n\nWhen I do this and start up tomcat, I get the following error: \n\nSEVERE: Error starting static Resources \njava.lang.IllegalArgumentException: Document base\nC:\\www\\tomcat_5.5.20\\webapps\\some\\foo does not exist or is not a readable directory\n\n        at\norg.apache.naming.resources.FileDirContext.setDocBase(FileDirContext.java:14\n\n0) \n        at\norg.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java\n\n:3848) \n        at \norg.apache.catalina.core.StandardContext.start(StandardContext.java:4019) \n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:7\n\n59) \n        at \norg.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739) \n        at \norg.apache.catalina.core.StandardHost.addChild(StandardHost.java:524) \n        at \norg.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:608)\n\n\n        at\norg.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:535\n\n) \n        at \norg.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470) \n        at \norg.apache.catalina.startup.HostConfig.start(HostConfig.java:1122) \n        at \norg.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:310) \n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSuppor\n\nt.java:119) \n        at \norg.apache.catalina.core.ContainerBase.start(ContainerBase.java:1021) \n        at \norg.apache.catalina.core.StandardHost.start(StandardHost.java:718) \n        at \norg.apache.catalina.core.ContainerBase.start(ContainerBase.java:1013) \n        at \norg.apache.catalina.core.StandardEngine.start(StandardEngine.java:442) \n        at \norg.apache.catalina.core.StandardService.start(StandardService.java:450) \n        at \norg.apache.catalina.core.StandardServer.start(StandardServer.java:709) \n        at org.apache.catalina.startup.Catalina.start(Catalina.java:551) \n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39\n\n) \n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl\n\n.java:25) \n        at java.lang.reflect.Method.invoke(Method.java:585) \n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:294) \n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:432) \nJan 19, 2007 3:58:06 PM org.apache.catalina.core.StandardContext start \nSEVERE: Error in resourceStart() \nJan 19, 2007 3:58:06 PM org.apache.catalina.core.StandardContext start \nSEVERE: Error getConfigured \nJan 19, 2007 3:58:06 PM org.apache.catalina.core.StandardContext start \nSEVERE: Context [/some/foo] startup failed due to previous errors \nJan 19, 2007 3:58:06 PM org.apache.catalina.core.StandardContext stop \nINFO: Container\norg.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/some/foo] \nhas not been started \n\n\nI also tried changing the docBase to be the absolute path of the war file: \n\nsome#foo.xml \n<Context docBase=\"C:\\www\\tomcat_5.5.20\\webapps\\foo.war\" debug=\"0\"\nprivileged=\"true\" reloadable=\"true\"/> \n\nBut I get the same result as above. \n\nCould someone please tell me how they are able to get this to work with 5.5 \n- what changes do I need to make so that when I deploy my war - foo.war, it show\nup in the Tomcat Manager Application List with path /some/foo\n\nThanks for your help \nAjay. \n\n\n\n\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=38198", "id": 98431, "time": "2007-01-23T21:13:40Z", "bug_id": 41447, "creation_time": "2007-01-23T21:13:40Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 41447, "attachment_id": null, "id": 98449, "time": "2007-01-24T04:20:44Z", "creator": "bugzilla@schoenhaber.de", "creation_time": "2007-01-24T04:20:44Z", "is_private": false, "text": "Bugzilla is not a support forum. User questions belong to the Tomcat User\nmailing list. Read the comments to your post there."}, {"count": 2, "tags": [], "bug_id": 41447, "text": "As already stated on the Users list, my comment there was wrong. I also couldn't\nfind a way of deploying a WAR file with a multi-level context path.\nProvided there really is no way to achieve this, I'm not sure whether this\nshould be seen as a regression (as it was possible with Tomcat < 5.5) or as an\nenhancement request (since it doesn't seem to be documented that this should be\npossible at all).", "id": 98450, "time": "2007-01-24T05:40:03Z", "creator": "bugzilla@schoenhaber.de", "creation_time": "2007-01-24T05:40:03Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "chris@sourcelabs.com", "attachment_id": null, "text": "Works for me.  When you're deploying webapps via context files (e.g.\nconf/Catalina/localhost/contextname.xml) you need to move your war file (or\nexploded webapp dir) OUTSIDE of the your defined appBase directory or else it\nwon't work properly.\n\nYou should be able to make you app work by doing the following:\n\n- move your war to a location outside of $CATALINA_HOME/webapps (or whatever you\nhave 'appBase' set to)\n- update your context descriptor to point to /path/to/your/war\n- restart", "id": 98455, "time": "2007-01-24T09:03:18Z", "bug_id": 41447, "creation_time": "2007-01-24T09:03:18Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 41447, "is_private": false, "text": "(In reply to comment #3)\n> You should be able to make you app work by doing the following:\n> \n> - move your war to a location outside of $CATALINA_HOME/webapps (or whatever you\n> have 'appBase' set to)\n> - update your context descriptor to point to /path/to/your/war\n> - restart\n\nYou're right. This works.\nThanks for the explanation.", "id": 98462, "time": "2007-01-24T10:18:20Z", "creator": "bugzilla@schoenhaber.de", "creation_time": "2007-01-24T10:18:20Z", "attachment_id": null}]