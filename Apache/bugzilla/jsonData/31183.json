[{"attachment_id": null, "tags": [], "bug_id": 31183, "is_private": false, "count": 0, "id": 63414, "time": "2004-09-12T17:33:14Z", "creator": "julian.reschke@gmx.de", "creation_time": "2004-09-12T17:33:14Z", "text": "Sending a LOCK refresh request to an indirectly locked resource crashes the server.\n\nSteps to reproduce:\n\nMKCOL x\n\nPUT x/y\n\nLOCK x\n\ntry to refresh the lock through x/y, so\n\nLOCK x/y\n\n\n(Test case will be attached separately)."}, {"count": 1, "tags": [], "text": "Created attachment 12710\ntest case (needs JScript/Windows; but can easily rewritten for other environments)", "is_private": false, "bug_id": 31183, "id": 63415, "time": "2004-09-12T17:36:23Z", "creator": "julian.reschke@gmx.de", "creation_time": "2004-09-12T17:36:23Z", "attachment_id": 12710}, {"count": 2, "attachment_id": null, "bug_id": 31183, "is_private": false, "id": 63423, "time": "2004-09-12T20:06:46Z", "creator": "jorton@redhat.com", "creation_time": "2004-09-12T20:06:46Z", "tags": [], "text": "Is it crashing using all three If headers formats? I couldn't reproduce from a\nquick test here (on Unix).  Can you get a backtrace out of the server?"}, {"attachment_id": null, "tags": [], "bug_id": 31183, "is_private": false, "count": 3, "id": 63424, "time": "2004-09-12T20:11:35Z", "creator": "julian.reschke@gmx.de", "creation_time": "2004-09-12T20:11:35Z", "text": "Yes, all of them, it seems.\n\nHow do I get the backtrace?"}, {"count": 4, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 63425, "time": "2004-09-12T20:25:09Z", "bug_id": 31183, "creation_time": "2004-09-12T20:25:09Z", "is_private": false, "text": "Never mind, I've reproduced it.  \n\nIt's a NULL pointer dereference in fs/lock.c:\n\n\t    /* the lock was refreshed. return the lock. */\n\t    newlock = dav_fs_alloc_lock(lockdb, ip->key, dp->locktoken);\n\t    newlock->is_locknull = !resource->exists;\n\ndp is NULL at time of invocation."}, {"count": 5, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 63434, "time": "2004-09-12T22:28:24Z", "bug_id": 31183, "creation_time": "2004-09-12T22:28:24Z", "is_private": false, "text": "Thanks for the report, Julian.  This is what I committed:\n\nhttp://cvs.apache.org/viewcvs.cgi/httpd-2.0/modules/dav/fs/lock.c?r1=1.32&r2=1.33\n\nif you could re-run your tests with that patch applied that would be great.  It\npasses the litmus test I added."}, {"count": 6, "tags": [], "bug_id": 31183, "attachment_id": null, "is_private": false, "id": 63950, "time": "2004-09-21T08:50:01Z", "creator": "jorton@redhat.com", "creation_time": "2004-09-21T08:50:01Z", "text": "This is fixed in 2.0.51, thanks again."}, {"count": 7, "attachment_id": null, "bug_id": 31183, "text": "(In reply to comment #0)\n> Sending a LOCK refresh request to an indirectly locked resource crashes the \nserver.\n> Steps to reproduce:\n> MKCOL x\n> PUT x/y\n> LOCK x\n> try to refresh the lock through x/y, so\n> LOCK x/y\n> (Test case will be attached separately).\n\n", "id": 108304, "time": "2007-09-17T23:34:57Z", "creator": "yangdibit@163.com", "creation_time": "2007-09-17T23:34:57Z", "tags": [], "is_private": false}]