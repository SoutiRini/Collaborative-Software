[{"attachment_id": null, "tags": [], "bug_id": 44096, "is_private": false, "count": 0, "id": 111873, "time": "2007-12-18T17:31:39Z", "creator": "engle_mars@yahoo.com.cn", "creation_time": "2007-12-18T17:31:39Z", "text": "We have deploy two web applications in tomcat. One application deploy as the\nroot path. It mean when user access /, it will in our's first web application.\nWe deploy the second web application in /XXX, it mean when you access all url\nwith prefix /XXX, it will enter the second application. We use cookie to\nremember the JSESSIONID for first application and use the url rewrite for the\nsecond web application's jsessionid. For this second web application in\ntomcat/conf/server.xml. I have set the cookies to false of the element\n<Context>. But I find if I access the first web application, then you access the\nsecond application. The second application always get the first application's\nsession object. The server.xml is:\n\n<Context path=\"/\" reloadable=\"true\" docBase=\"YYY\"></Context>\n<Context path=\"/XXX\" cookies=\"false\" reloadable=\"true\" docBase=\"XXX\"></Context>"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Is this when accessing Tomcat directly or is via the AJP connector?", "id": 112145, "time": "2007-12-23T14:56:18Z", "bug_id": 44096, "creation_time": "2007-12-23T14:56:18Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 44096, "attachment_id": null, "is_private": false, "id": 112152, "time": "2007-12-23T17:18:41Z", "creator": "engle_mars@yahoo.com.cn", "creation_time": "2007-12-23T17:18:41Z", "text": "(In reply to comment #1)\n> Is this when accessing Tomcat directly or is via the AJP connector?\nAccess tomcat directly.\n\n"}, {"count": 3, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "I can't repeat this.\n\nIt could be caused by the way the host appBase and the context docBases are\nconfigured. The users list is the place to bottom out what in your configuration\nis causing this behaviour.", "id": 112163, "time": "2007-12-24T06:48:52Z", "bug_id": 44096, "creation_time": "2007-12-24T06:48:52Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "engle_mars@yahoo.com.cn", "text": "Sorry the test steps wrong. You need run two tomcat at one computer.\n1. Deploy the CookiesBug application to root.\n2. Run a tomcat on computer linsten port 8080 with the context element as \nfollow\n<Context docBase=\"CookiesBug\" path=\"/\" reloadable=\"true\"/>\n3. Run a tomcat on computer linsten port 8081 with the context element as \nfollow\n<Context docBase=\"CookiesBug\" path=\"/\" reloadable=\"true\" cookies=\"false\"/>\n4. Open IE access the first tomcat which linsten at port 8080, refer to \n8080.jpg\n5. Use the same IE window access tomcat which linsten at port 8081, refer to \n8081.jpg\n6. The bug is here. Refer to 8081.jpg, the Iframe with jsessionid, but get a \nincorrectness.\nIf I access 8081 directly in another IE, it can the correct result, refer to \n8081_directly.jpg", "id": 112174, "time": "2007-12-24T18:52:25Z", "bug_id": 44096, "creation_time": "2007-12-24T18:52:25Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "engle_mars@yahoo.com.cn", "text": "Created attachment 21310\nFor step 4", "id": 112175, "time": "2007-12-24T18:53:27Z", "bug_id": 44096, "creation_time": "2007-12-24T18:53:27Z", "is_private": false, "attachment_id": 21310}, {"count": 6, "tags": [], "creator": "engle_mars@yahoo.com.cn", "attachment_id": 21311, "id": 112176, "time": "2007-12-24T18:54:06Z", "bug_id": 44096, "creation_time": "2007-12-24T18:54:06Z", "is_private": false, "text": "Created attachment 21311\nfor step 5"}, {"count": 7, "tags": [], "bug_id": 44096, "attachment_id": 21312, "is_private": false, "id": 112177, "time": "2007-12-24T19:11:49Z", "creator": "engle_mars@yahoo.com.cn", "creation_time": "2007-12-24T19:11:49Z", "text": "Created attachment 21312\nFor step 6"}, {"count": 8, "tags": [], "creator": "engle_mars@yahoo.com.cn", "text": "Created attachment 21313\nThe test project and page, IDE is eclipse", "id": 112178, "time": "2007-12-24T19:13:07Z", "bug_id": 44096, "creation_time": "2007-12-24T19:13:07Z", "is_private": false, "attachment_id": 21313}, {"count": 9, "tags": [], "creator": "engle_mars@yahoo.com.cn", "text": "You can get same result in Both IE and Firefox", "id": 112179, "time": "2007-12-24T19:19:03Z", "bug_id": 44096, "creation_time": "2007-12-24T19:19:03Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 44096, "is_private": false, "count": 10, "id": 112180, "time": "2007-12-25T05:51:01Z", "creator": "markt@apache.org", "creation_time": "2007-12-25T05:51:01Z", "text": "The behaviour you describe is as per the relevant specs.\n\nThe servlet 2.5 spec only supports version 0 (netscape) and version 1 (RFC2109)\ncookies. RFC2965 is not supported.\n\nRFC2109 is clear (section 4.3.4) that port is not used by the user agent when\ndetermining wether or not to send a cookie.\n\nTo get the behaviour you want, you need to use different host names or different\npaths for each application. The users list can help you configure this.\n\nRFC2965 does appear to offer the functionality you want but this is not\nsupported by the 2.5 servlet spec."}, {"count": 11, "tags": [], "creator": "engle_mars@yahoo.com.cn", "is_private": false, "text": "I do as Mark Thomas  suggestion, use difference application in difference path,\nbut it is eunfortunate, this bug still here. Refer to the attatchment\napp_cookie.jpg and app_without_cookie.jpg. The two application in same server\nbut use difference path. I have package the application that is named\nwebapps.zip. The attachment file server.xml is tomcat server config.", "id": 112181, "time": "2007-12-25T17:33:52Z", "bug_id": 44096, "creation_time": "2007-12-25T17:33:52Z", "attachment_id": null}, {"attachment_id": 21314, "tags": [], "bug_id": 44096, "is_private": false, "count": 12, "id": 112182, "time": "2007-12-25T17:38:46Z", "creator": "engle_mars@yahoo.com.cn", "creation_time": "2007-12-25T17:38:46Z", "text": "Created attachment 21314\naccess / and the application as root use cookie to store the session id"}, {"count": 13, "tags": [], "creator": "engle_mars@yahoo.com.cn", "attachment_id": 21315, "id": 112183, "time": "2007-12-25T17:39:40Z", "bug_id": 44096, "creation_time": "2007-12-25T17:39:40Z", "is_private": false, "text": "Created attachment 21315\naccess /cookiebug and the application use urlrewrite to store the session id"}, {"count": 14, "tags": [], "bug_id": 44096, "text": "Created attachment 21316\nThe webapps folder under tomcat/", "id": 112184, "attachment_id": 21316, "creator": "engle_mars@yahoo.com.cn", "creation_time": "2007-12-25T17:40:05Z", "time": "2007-12-25T17:40:05Z", "is_private": false}, {"count": 15, "tags": [], "creator": "engle_mars@yahoo.com.cn", "text": "First access the / then access /cookiebug. You will find the page \nunder /cookiebug show two difference sessionid. Why still find the \nincorrectness session?", "id": 112185, "time": "2007-12-25T17:44:07Z", "bug_id": 44096, "creation_time": "2007-12-25T17:44:07Z", "is_private": false, "attachment_id": null}, {"count": 16, "tags": [], "bug_id": 44096, "text": "Please also note the same bug http://issues.apache.org/bugzilla/show_bug.cgi?\nid=43839", "id": 112186, "attachment_id": null, "creator": "engle_mars@yahoo.com.cn", "creation_time": "2007-12-25T17:45:20Z", "time": "2007-12-25T17:45:20Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 44096, "text": "The behaviour you see is as expected for your index.jsp as written. It appears\nfrom this bug report you want the behaviour obtained from using:\n<iframe src=\"frame.jsp;jsessionid=<%=session.getId() %>\" width=\"100%\">\nrather than\n<iframe src=\"/frame.jsp;jsessionid=<%=session.getId() %>\" width=\"100%\">\n\nI am marking this as INVALID since the issue is caused by an error in the test\ncase rather than Tomcat.\n\nI will look into bug 43839 and comment directly on that bug.\n\n", "count": 17, "id": 112203, "time": "2007-12-26T12:16:14Z", "creator": "markt@apache.org", "creation_time": "2007-12-26T12:16:14Z", "is_private": false}, {"count": 18, "tags": [], "creator": "engle_mars@yahoo.com.cn", "attachment_id": 21321, "id": 112215, "time": "2007-12-26T17:29:10Z", "bug_id": 44096, "creation_time": "2007-12-26T17:29:10Z", "is_private": false, "text": "Created attachment 21321\nchange test case to markt@apache.org suggestion\n\nThis bug still here, even I change the code as markt@apache.org suggestion. I\nhope you can test. Thanks. I think this case is very common, some web\napplication deploy as root. Other web application deploy as sub path. When I\nuse frame in web page, I find the cookies not a thread safe, So I change the\napplication use URL rewrite to store the sssion id. So I meet this bug."}, {"count": 19, "text": "Please check it and bug bug 43839\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=43839", "creator": "engle_mars@yahoo.com.cn", "attachment_id": null, "id": 112271, "time": "2007-12-28T19:26:34Z", "bug_id": 44096, "creation_time": "2007-12-28T19:26:34Z", "tags": [], "is_private": false}, {"count": 20, "tags": [], "creator": "engle_mars@yahoo.com.cn", "is_private": false, "text": "Please check it and bug bug 43839\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=43839", "id": 112272, "time": "2007-12-28T19:28:30Z", "bug_id": 44096, "creation_time": "2007-12-28T19:28:30Z", "attachment_id": null}, {"count": 21, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 112278, "time": "2007-12-29T03:05:49Z", "bug_id": 44096, "creation_time": "2007-12-29T03:05:49Z", "is_private": false, "text": "Your test case is broken - this bug is invalid. Please do not re-open this bug. \nIf you have any further questions as to why your test case isn't behaving as you\nexpect please use the users list.\n\nI have already read issue 43839, investigated issue 43839, confirmed the bug\ndescribed in issue 43839, fixed the bug described in issue 43839 and committed a\nfix for 6.0.x for the bug described in issue 43839. Your comments strongly\nsuggest you haven't looked at 43839 in the last few days.\n\nYou should never, ever add someone else's e-mail address to the cc list without\ntheir permission. It is a form a spam and considered (by me at least) to be\nextremely rude. In this case it is also totally unnecessary. I am subscribed to\nthe dev list where every change to every issue is reported."}, {"count": 22, "tags": [], "bug_id": 44096, "attachment_id": null, "is_private": false, "id": 112413, "time": "2008-01-01T16:56:33Z", "creator": "engle_mars@yahoo.com.cn", "creation_time": "2008-01-01T16:56:33Z", "text": "Sorry, I don't know the bug 43839 is fix already. I don't know add someone\nelse's e-mail address to the cc list without their permission, Sorry a lot.\nThanks for Mark Thomas. I make a lot of trouble to you.\n"}, {"attachment_id": null, "tags": [], "bug_id": 44096, "text": "No problem. Just don't do it again ;)", "count": 23, "id": 112442, "time": "2008-01-02T11:22:17Z", "creator": "markt@apache.org", "creation_time": "2008-01-02T11:22:17Z", "is_private": false}]