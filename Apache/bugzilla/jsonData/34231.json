[{"count": 0, "tags": [], "creator": "daniel.santos@pobox.com", "attachment_id": null, "text": "If compilerarg is used to specify an argument that ant supports within the task\nthen the argument is overridden by that default and no warning is given of this\nbehavior.  In this case, the argument was completely ignored.\n\nHere is my javac task:\n    <javac\n        debug=\"${java.debug.option}\"\n        srcdir=\"${src.dir}\"\n        destdir=\"${classes.dir}\">\n        <classpath>\n            <path refid=\"project.class.path\"/>\n        </classpath>\n        <compilerarg value=\"-Xlint:-unchecked -target 1.4\" compiler=\"java1.5\"/>\n    </javac>\n\nHere is the ant -verbose output:\n\n    [javac] sbc\\text\\parse\\Extractor.java added as\nsbc/text/parse/Extractor.class doesn't exist.\n    [javac] sbc\\text\\parse\\ParseEventListener.java added as\nsbc/text/parse/ParseEventListener.class doesn't exist.\n    [javac] sbc\\text\\parse\\Parser.java added as sbc/text/parse/Parser.class\ndoesn't exist.\n    [javac] sbc\\text\\parse\\TextStreamParser.java added as\nsbc/text/parse/TextStreamParser.class doesn't exist.\n    [javac] Compiling 4 source files to\nC:\\Projects\\LDTOOLS\\tts\\components\\parse\\build\\classes\n    [javac] Using modern compiler\ndropping\nC:\\Projects\\LDTOOLS\\tts\\components\\parse\\ProgramFilesjunit3.8.1junit.jar from\npath as it doesn't exist\ndropping\nc:\\Projects\\LDTOOLS\\tts\\components\\parse\\C:\\Projects\\LDTOOLS\\tts\\components\\parse\\ProgramFilesjunit3.8.1junit.jar\nfrom path as it doesn't exist\n    [javac] Compilation arguments:\n    [javac] '-d'\n    [javac] 'C:\\Projects\\LDTOOLS\\tts\\components\\parse\\build\\classes'\n    [javac] '-classpath'\n    [javac]\n'C:\\Projects\\LDTOOLS\\tts\\components\\parse\\build\\classes;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-launcher.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-antlr.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-apache-bcel.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-apache-bsf.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-apache-log4j.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-apache-oro.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-apache-regexp.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-apache-resolver.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-commons-logging.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-commons-net.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-icontract.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-jai.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-javamail.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-jdepend.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-jmf.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-jsch.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-junit.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-netrexx.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-nodeps.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-starteam.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-stylebook.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-swing.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-trax.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-vaj.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-weblogic.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-xalan1.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant-xslp.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\ant.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\junit.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\xercesImpl.jar;C:\\ProgramFiles\\apache-ant-1.6.2\\lib\\xml-apis.jar;C:\\jdk1.5.0_02\\lib\\tools.jar;C:\\ProgramFiles\\junit3.8.1\\junit.jar;C:\\ProgramFiles\\retroweaver-1.1\\release\\retroweaver.jar'\n    [javac] '-sourcepath'\n    [javac] 'C:\\Projects\\LDTOOLS\\tts\\components\\parse\\src\\java'\n    [javac] '-g'\n    [javac]\n    [javac] The ' characters around the executable and arguments are\n    [javac] not part of the command.\n    [javac] Files to be compiled:\n    [javac]    \nC:\\Projects\\LDTOOLS\\tts\\components\\parse\\src\\java\\sbc\\text\\parse\\Extractor.java\n    [javac]    \nC:\\Projects\\LDTOOLS\\tts\\components\\parse\\src\\java\\sbc\\text\\parse\\ParseEventListener.java\n    [javac]    \nC:\\Projects\\LDTOOLS\\tts\\components\\parse\\src\\java\\sbc\\text\\parse\\Parser.java\n    [javac]    \nC:\\Projects\\LDTOOLS\\tts\\components\\parse\\src\\java\\sbc\\text\\parse\\TextStreamParser.java\n\nJava version:\njava -fullversion\njava full version \"1.5.0_02-b09\"\n\nIf I add target=\"1.4\" to the javac task it will compile it correctly.  I read\nbug#21011 which has some similiarities.  However, this would be a bug because it\nignores your directives (overrides them perhaps) and doesn't tell you that it is\ndoing so, making it not function correctly or as advertised.\n\nThe solution should be to warn when an argument specified in compilerarg (or\nanywhere else for that matter) is ignored, overridden or otherwise not carried\nout or carried out in a manner other than specified.\n\nThis could certainly also be caused by a few other options like the\ncompiler=\"java1.5\" not working correctly or some other artifact causing the\ncompilerarg to be ignored.\n\nDaniel", "id": 73036, "time": "2005-03-30T02:31:24Z", "bug_id": 34231, "creation_time": "2005-03-30T02:31:24Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "stevel@apache.org", "is_private": false, "id": 73059, "time": "2005-03-30T11:42:06Z", "bug_id": 34231, "creation_time": "2005-03-30T11:42:06Z", "tags": [], "text": "I this is probably invalid, \n\nFirst,\n\n<compilerarg value=\"-Xlint:-unchecked -target 1.4\" compiler=\"java1.5\"/>\n\nis wrong. that is setting one single argument to the compiler,\n\"-Xlint:-unchecked -target 1.4\" . Split it into two targets.\n\nSecond, there is no java1.5 compiler. We dont do versioning like that. The\ncompilers that are listed are named in the <javac> docs; something like \"modern\"\nor \"jikes\" are what we expect. \n\nThis means\n1. your option was silently ignored because it wasnt the appropriate compiler\nsetting\n2. if it hadnt been ignored, it would have been an error. \n\nAs with bug #21101, we dont have any plans to do consistency checking of\narguments. Once you start adding manual arguments, you are on your own, I am\nafraid. \n\nWhat we could do is improve diagnostics in -verbose mode, describing which\n<compilerargs> are being dropped as the compiler doesnt match. \n\n"}, {"count": 2, "tags": [], "bug_id": 34231, "text": "that's what I get for tearing through the docs and not reading it better.  The\nvalue is actually \"javac1.5\" and it's only an alias for \"modern\"\n\nquote from ant docs:\n\n    modern (the standard compiler of JDK 1.3/1.4/1.5) \u2013 javac1.3 and javac1.4\nand javac1.5 can be used as aliases.\n\nlooks like what I should be keying off of is ${ant.java.version} which will tell\nme the major and minor version of the jdk (\"1.2\", \"1.3\",etc.)\n\nDaniel", "id": 73547, "time": "2005-04-11T18:30:47Z", "creator": "daniel.santos@pobox.com", "creation_time": "2005-04-11T18:30:47Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 34231, "attachment_id": null, "id": 93312, "time": "2006-09-10T21:57:44Z", "creator": "peterreilly@apache.org", "creation_time": "2006-09-10T21:57:44Z", "is_private": false, "text": "From the discussion, this does not look like a bug\ncloseing, please reopen if there is an issue."}]