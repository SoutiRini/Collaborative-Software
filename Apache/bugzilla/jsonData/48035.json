[{"count": 0, "tags": [], "bug_id": 48035, "attachment_id": null, "text": "When tar task is used to create an archive consisting of one file, it doesn't work under some circumstances. I've used debugger to find the problem. It's in this code in Tar.java (lines 567-572_:\n\n                Vector files = (Vector) basedirToFilesMap.get(base);\n                if (files == null) {\n                    files = new Vector();\n                    basedirToFilesMap.put(base, new Vector());\n                }\n                files.add(r.getName());\n\nHere files var is filled with \"new Vector()\" and then another fresh Vector instance is put into the basedirToFilesMap. Then file name is added to the first Vector instance which is useless as it should ad an entry to the second Vector instance, which is used later.\n\nCorrect code:\n\n                Vector files = (Vector) basedirToFilesMap.get(base);\n                if (files == null) {\n                    files = new Vector();\n                    basedirToFilesMap.put(base, files);\n                }\n                files.add(r.getName());", "id": 131265, "time": "2009-10-21T08:18:20Z", "creator": "aklochkov@griddynamics.com", "creation_time": "2009-10-21T08:18:20Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 48035, "text": "Actually it's worse than that.  Your fix alone is not enough if the resource doesn't have a basedir but its name is not an absolute path - this is the case for the <file> resource, for example.\n\nFixed in svn revision 828141", "id": 131268, "attachment_id": null, "creator": "bodewig@apache.org", "creation_time": "2009-10-21T11:50:45Z", "time": "2009-10-21T11:50:45Z", "is_private": false}]