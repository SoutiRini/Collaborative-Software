[{"count": 0, "tags": [], "creator": "drollo@ets.org", "attachment_id": null, "id": 17338, "time": "2002-06-06T18:50:20Z", "bug_id": 9672, "creation_time": "2002-06-06T18:50:20Z", "is_private": false, "text": "Reporting this defect as per request from Steve Newton:\n\nThe PVCS Optional task in Ant 1.5 beta \n2 fails if the directory tree into\nwhich you are doing a get doesn't already exist when you are \nlaunching PVCS\nPCLI via a mapped network drive. The resulting errors are[ get: error,\n\"<some \ndir>\" is not a directory.] A bug report number: 4346 shows changes to\nthe createFolders() \nmethod that appear to handle this problem (I haven't\nfully testing it yet...). Unfortunately, \nit seems this fix has not been\napplied to the latest beta code. I noticed a \"linestart\" property \nthat might\nallow a workaround, but I have not had any success using a variety of\n\"linestart\" \ncharacters (e.g. linestart=\"&quot;R:\" - ['R' is the mapped drive\nletter] in the build.xml PVCS \ntarget).\n\nCan the above mentioned fix be added to the code?\nIs there some other workaround \nfor using this task with mapped windoze\ndrives?\n\nThanks,\nDan\n\nNOTE: The \"src\" \ndirectory exists on the local machine, the \"src/env\" directory does not exist on the local \nmachine.\n\nAnt target:\n\n    <property name=\"pvcs.executable.path\" \nvalue=\"r:/pvcs_vm/application/VM/Win32/Bin\"/>\n    <property name=\"pvcs.repository\" \nvalue=\"r:/pvcs_vm/buildtest\"/>\n\n    <target name=\"getLatestPVCS\" depends=\"init\"\n            \ndescription=\"Gets the latest version of source code from PVCS VM.\">\n\n        <pvcs \npvcsbin=\"${pvcs.executable.path}\"\n                repository=\"${pvcs.repository}\"\n                \npvcsproject=\"/src/env\"                \n        />\n        <!--\n                userid=\"myid:mypwd\"\n                filenameFormat=\"{0}-\narc({1})\"\n                linestart=\"&quot;R:\"\n                updateonly=\"true\"\n        -->\n\n    </target>\n\nAnt -verbose \noutput from target follows:\n\ngetLatestPVCS:\n     [pvcs] Executing \n'r:\\pvcs_vm\\application\\VM\\Win32\\Bin\\pcli' with arguments:\n     [pvcs] 'lvf'\n     [pvcs] '-z'\n     \n[pvcs] '-aw'\n     [pvcs] '-prr:/pvcs_vm/buildtest'\n     [pvcs] '/src/env'\n     [pvcs] The ' characters \naround the executable and arguments are\n     [pvcs] not part of the command.\n     [pvcs] PVCS Version \nManager (PCLI) v6.8.00 (Build 128.03) for Windows NT/80x86\n     [pvcs] Copyright 1985-2001 \nMERANT.  All rights reserved.\n     [pvcs] Creating folders\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.cpp-\narc(d:\\buildtest\\devarea\\src\\env\\env.cpp)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.cpp-\narc(d:\\buildtest\\devarea\\src\\env\\env.cpp)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.dsp-\narc(d:\\buildtest\\devarea\\src\\env\\env.dsp)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.dsp-\narc(d:\\buildtest\\devarea\\src\\env\\env.dsp)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.dsw-\narc(d:\\buildtest\\devarea\\src\\env\\env.dsw)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.dsw-\narc(d:\\buildtest\\devarea\\src\\env\\env.dsw)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.exe-\narc(d:\\buildtest\\devarea\\src\\env\\env.exe)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.exe-\narc(d:\\buildtest\\devarea\\src\\env\\env.exe)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.ncb-\narc(d:\\buildtest\\devarea\\src\\env\\env.ncb)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.ncb-\narc(d:\\buildtest\\devarea\\src\\env\\env.ncb)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.opt-\narc(d:\\buildtest\\devarea\\src\\env\\env.opt)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.opt-\narc(d:\\buildtest\\devarea\\src\\env\\env.opt)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.plg-\narc(d:\\buildtest\\devarea\\src\\env\\env.plg)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\env.plg-\narc(d:\\buildtest\\devarea\\src\\env\\env.plg)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\mssccprj.scc-\narc(d:\\buildtest\\devarea\\src\\env\\mssccprj.scc)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\mssccprj.scc-\narc(d:\\buildtest\\devarea\\src\\env\\mssccprj.scc)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\ReadMe.txt-\narc(d:\\buildtest\\devarea\\src\\env\\ReadMe.txt)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\ReadMe.txt-\narc(d:\\buildtest\\devarea\\src\\env\\ReadMe.txt)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\StdAfx.cpp-\narc(d:\\buildtest\\devarea\\src\\env\\StdAfx.cpp)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\StdAfx.cpp-\narc(d:\\buildtest\\devarea\\src\\env\\StdAfx.cpp)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\StdAfx.h-\narc(d:\\buildtest\\devarea\\src\\env\\StdAfx.h)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\StdAfx.h-\narc(d:\\buildtest\\devarea\\src\\env\\StdAfx.h)\"\"\n     [pvcs] Considering \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\vssver.scc-\narc(d:\\buildtest\\devarea\\src\\env\\vssver.scc)\"\"\n     [pvcs] Skipped \n\"\"R:\\pvcs_vm\\buildtest\\archives\\src\\env\\vssver.scc-\narc(d:\\buildtest\\devarea\\src\\env\\vssver.scc)\"\"\n     [pvcs] Getting files\n     [pvcs] \nExecuting r:\\pvcs_vm\\application\\VM\\Win32\\Bin\\get -N \n@D:\\buildtest\\devarea\\src\\pvcs_ant_-8019924089517794510.log\n     [pvcs] PVCS Version \nManager (get) v6.8.00 (Build 128.03) for Windows NT/80x86\n     [pvcs] Copyright 1985-2001 MERANT.  \nAll rights reserved.\n     [pvcs] get: error, \"d:/buildtest/devarea/src/env\" is not a \ndirectory.\n     [pvcs] get: error, \"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] \nget: error, \"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] get: error, \n\"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] get: error, \n\"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] get: error, \n\"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] get: error, \n\"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] get: error, \n\"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] get: error, \n\"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] get: error, \n\"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] get: error, \n\"d:/buildtest/devarea/src/env\" is not a directory.\n     [pvcs] get: error, \n\"d:/buildtest/devarea/src/env\" is not a directory."}, {"count": 1, "tags": [], "text": "Just required finding the right combination of settings.  For the record:\n\n<property name=\"pvcs.executable.path\"\n          value=\"r:/pvcs_vm/application/VM/Win32/Bin\"/>\n<property name=\"pvcs.repository\" \n          value=\"r:/pvcs_vm/buildtest\"/>\n\n<pvcs pvcsbin=\"${pvcs.executable.path}\"\n                repository=\"${pvcs.repository}\"\n                pvcsproject=\"/src/env\"  \n                userid=\"myid:mypwd\"\n                filenameFormat=\"{0}-arc({1})\"\n                linestart=\"&quot;R:\"\n        />\n", "is_private": false, "bug_id": 9672, "id": 17420, "time": "2002-06-07T20:04:49Z", "creator": "snewton@io.com", "creation_time": "2002-06-07T20:04:49Z", "attachment_id": null}]