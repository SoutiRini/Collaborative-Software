[{"count": 0, "tags": [], "creator": "martin.grebac@sun.com", "attachment_id": null, "id": 52920, "time": "2004-02-25T12:32:02Z", "bug_id": 27216, "creation_time": "2004-02-25T12:32:02Z", "is_private": false, "text": "I have a webapp in a directory called '/local/arena/with space'. To deploy it, I\nissue a manager command:\nhttp://localhost:8084/manager/deploy?config=file:/local/arena/with%20space/META-INF/context.xml&war=file:/local/arena/with%20space/\n\nFirst try works, but when I restart the server, this context cannot be started\nand I get:\n\norg.apache.catalina.core.StandardContext resourcesStart\nSEVERE: Error starting static Resources\njava.lang.IllegalArgumentException: Document base /local/arena/with%20space does\nnot exist or is not a readable directory\n\norg.apache.naming.resources.FileDirContext.setDocBase(FileDirContext.java:185)\norg.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:3858)\norg.apache.catalina.core.StandardContext.start(StandardContext.java:4085)\n\nThe content of Catalina/localhost/with_space.xml after deployment is:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Context docBase=\"/local/arena/with%20space/\" path=\"/with_space\"/>\n\nIf I change it manually to:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Context docBase=\"/local/arena/with space/\" path=\"/with_space\"/>\n\nit starts working.\n\nSee also:\nhttp://www.netbeans.org/issues/show_bug.cgi?id=40437"}, {"count": 1, "tags": [], "bug_id": 27216, "attachment_id": null, "text": "Don't use the config attribute, it will only cause trouble (Tomcat will use the\none in /META-INF/context.xml fine).", "id": 52963, "time": "2004-02-25T21:45:13Z", "creator": "remm@apache.org", "creation_time": "2004-02-25T21:45:13Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 27216, "attachment_id": null, "text": "Resolving the report.\nYou should read the docs:\n- war is for uploading a .war file\n- you should use localWar instead (and config is not necessary)", "id": 52964, "time": "2004-02-25T21:47:48Z", "creator": "remm@apache.org", "creation_time": "2004-02-25T21:47:48Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 27216, "attachment_id": null, "id": 52987, "creation_time": "2004-02-26T09:10:55Z", "time": "2004-02-26T09:10:55Z", "creator": "martin.grebac@sun.com", "text": "I read the docs:\nhttp://jakarta.apache.org/tomcat/tomcat-5.0-doc/manager-howto.html\n\nand there's no notion about localWar option.\nI assume I'm not looking at the right place. So, what's the right place to look\nfor documentation? Thanks.", "is_private": false}, {"count": 4, "tags": [], "bug_id": 27216, "text": "Yes, bad reading. config is still harmful.", "id": 53014, "attachment_id": null, "creator": "remm@apache.org", "creation_time": "2004-02-26T15:19:32Z", "time": "2004-02-26T15:19:32Z", "is_private": false}, {"count": 5, "tags": [], "creator": "martin.grebac@sun.com", "text": "I tried the deploy command with only path and war parameters, but then\nconfiguration in context.xml is not taken into account, e.g. if I define:\n<Logger className=\"org.apache.catalina.logger.FileLogger\" directory=\"logs\"\nprefix=\"my_log.\" suffix=\".txt\" timestamp=\"true\"/>\nin the META-INF/context.xml, then the 'with space.xml' on server does not\ncontain the parameter. So, this is what we are trying to solve with config\nparameter, but unsuccessfuly - because it doesn't handle spaces correctly.", "id": 53019, "time": "2004-02-26T15:26:32Z", "bug_id": 27216, "creation_time": "2004-02-26T15:26:32Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 27216, "text": "Well, this is not going to be fixed, so you have to stop using config. I'll look\nquickly at the rest of the problem.", "id": 53021, "attachment_id": null, "creator": "remm@apache.org", "creation_time": "2004-02-26T15:38:21Z", "time": "2004-02-26T15:38:21Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 27216, "attachment_id": null, "id": 53039, "time": "2004-02-26T18:14:00Z", "creator": "petr.jiricka@netbeans.com", "creation_time": "2004-02-26T18:14:00Z", "is_private": false, "text": "Remy, Intuitively, I would expect that if I only use the war parameter (without\nconfig and path), and my application contains META-INF/context.xml, then Tomcat\nshould consider this context.xml file, including the 'path' attribute specified\nin it.\n\nAlso, the docBase attribute should not be needed in this case (as it is implied\nby the location of context.xml), but the manager-howto.html file specifies it as\nmandatory. Shouldn't docBase be optional? Thanks."}, {"count": 8, "tags": [], "creator": "remm@apache.org", "text": "No, you have to put the docBase in your context.xml (as simple copying is used,\nrather than saving it again, which is riskier).", "id": 53111, "time": "2004-02-27T10:48:51Z", "bug_id": 27216, "creation_time": "2004-02-27T10:48:51Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 27216, "text": "I have decided to refactor a little bit the deployer to address these issues\n(the check for an existing /META-INF/context.xml will be done in the deployer,\nwhich will also be in charge of saving the XML if needed). This obviously might\nintroduce regressions, but will be cleaner.", "id": 53144, "attachment_id": null, "creator": "remm@apache.org", "creation_time": "2004-02-27T16:03:38Z", "time": "2004-02-27T16:03:38Z", "is_private": false}, {"count": 10, "tags": [], "creator": "petr.jiricka@netbeans.com", "attachment_id": null, "id": 53148, "time": "2004-02-27T17:16:16Z", "bug_id": 27216, "creation_time": "2004-02-27T17:16:16Z", "is_private": false, "text": "Remy, thanks. Will it also fix the case when deploying using the manager\napplication?"}, {"count": 11, "tags": [], "bug_id": 27216, "attachment_id": null, "id": 53223, "time": "2004-02-29T20:34:24Z", "creator": "remm@apache.org", "creation_time": "2004-02-29T20:34:24Z", "is_private": false, "text": "I have decided to not refactor the functionality (the headache was too big, for\nlittle gain).\nI have tested this bug, which is invalid. You are misusing something somewhere.\nBe it the docBase in context.xml or something else similar, I don't know, but\nthis works fine for me. The functionality is indeed not as easy to use as it\ncould be (but the useability enhancement is complex to achieve), but otherwise\nworks fine.\n\nMy test:\n\n/manager/deploy?config=file:/M:/test%202/META-INF/context.xml&war=file:/M:/test%202\n\ncontext.xml:\n<Context path=\"/test 2\" docBase=\"M:/test 2\" debug=\"0\">\n\n  <Logger className=\"org.apache.catalina.logger.FileLogger\" \n   prefix=\"my_log.\" suffix=\".txt\" timestamp=\"true\"/>\n\n</Context>\n"}]