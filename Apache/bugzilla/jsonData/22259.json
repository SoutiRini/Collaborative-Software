[{"count": 0, "tags": [], "creator": "bill@kenyonhill.com", "attachment_id": null, "text": "This bug was orignally reported against mod_perl, but was traced down to a \nproblem in mod_deflate.  \n\nIf a print \"\" is done from a mod_perl script which mod_deflate active, the page \noutput terminates and and error like this produced:\n\n[error] 673: ModPerl::RegistryBB: 20014:Error string not specified yet \nat /var/www/perl/test.pl line 6.\n\nHere is a patch (coded by Stas Bekman stas@stason.org)\n\nIndex: modules/filters/mod_deflate.c\n===================================================================\nRCS file: /home/cvs/httpd-2.0/modules/filters/mod_deflate.c,v\nretrieving revision 1.26.2.5\ndiff -u -r1.26.2.5 mod_deflate.c\n--- modules/filters/mod_deflate.c       17 May 2003 18:27:43 -0000      1.26.2.5\n+++ modules/filters/mod_deflate.c       5 Aug 2003 06:37:59 -0000\n@@ -529,9 +529,11 @@\n\n\n         if (APR_BUCKET_IS_FLUSH(e)) {\n             apr_bucket *bkt;\n-            zRC = deflate(&(ctx->stream), Z_SYNC_FLUSH);\n-            if (zRC != Z_OK) {\n-                return APR_EGENERAL;\n+            if (ctx->stream.avail_in > 0) {\n+                zRC = deflate(&(ctx->stream), Z_SYNC_FLUSH);\n+                if (zRC != Z_OK) {\n+                    return APR_EGENERAL;\n+                }\n             }\n\n             ctx->stream.next_out = ctx->buffer", "id": 42437, "time": "2003-08-08T18:13:31Z", "bug_id": 22259, "creation_time": "2003-08-08T18:13:31Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 22259, "text": "The original patch is now committed, should be in effect with 2.0.48", "id": 42708, "time": "2003-08-13T21:26:27Z", "creator": "stas@apache.org", "creation_time": "2003-08-13T21:26:27Z", "is_private": false, "attachment_id": null}]