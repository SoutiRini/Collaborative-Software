[{"count": 0, "tags": [], "creator": "sadiklis@mail.lt", "attachment_id": null, "is_private": false, "id": 66278, "time": "2004-11-02T11:54:32Z", "bug_id": 32017, "creation_time": "2004-11-02T11:54:32Z", "text": "Manager fails to erase Tomcat\\webapps\\cpath\\WEB-INF\\lib\\struts.lib file (all the\nother stuff is erased from Tomcat\\webapps\\cpath dir as expected) and files from\nTomcat\\work\\Catalina\\localhost\\cpath, yet claims that undeployment was successful.\n\nAfter that it's no longer possible to deploy that app again, because\n\"Application already exists at path /cpath\". SNAFU.\n\nOS: W2000, JVM: 1.5.0-b64, Struts: 1.2.4, Tomcat: 5.5.4.\n\nNote that the same app [un]deploys normally on Tomcat 5.0.28."}, {"count": 1, "tags": [], "bug_id": 32017, "attachment_id": null, "text": "OK, shoot me. I wanted to say \"struts.jar\" not \"struts.lib\".\n", "id": 66279, "time": "2004-11-02T11:56:43Z", "creator": "sadiklis@mail.lt", "creation_time": "2004-11-02T11:56:43Z", "is_private": false}, {"count": 2, "tags": [], "text": "Please look at the antiJARLocking attribute on Context. This was harcoded to\ntrue in 5.0.x, but I figured Unix users shouldn't have to get degraded\nperformance because of some Windows issues.\nYou can set the parameter globally in conf/context.xml.", "attachment_id": null, "bug_id": 32017, "id": 66347, "time": "2004-11-03T15:19:40Z", "creator": "remm@apache.org", "creation_time": "2004-11-03T15:19:40Z", "is_private": false}, {"count": 3, "tags": [], "text": "For future reference, I've added a FAQ entry on file locking to the Windows page:\nhttp://jakarta.apache.org/tomcat/faq/windows.html#lock", "attachment_id": null, "id": 66519, "creation_time": "2004-11-05T12:46:50Z", "time": "2004-11-05T12:46:50Z", "creator": "remm@apache.org", "bug_id": 32017, "is_private": false}, {"count": 4, "tags": [], "creator": "sadiklis@mail.lt", "attachment_id": null, "id": 70829, "time": "2005-02-11T11:28:22Z", "bug_id": 32017, "creation_time": "2005-02-11T11:28:22Z", "is_private": false, "text": "The problem mysteriously disappeared in 5.5.7. See bug 32048, comment 3.\n"}, {"count": 5, "tags": [], "text": "This is bug 32694, fixed in mid december, and integrated in 5.5.7. The submitter\nprovided better information, which allowed finding the issue.\n\nIf reloading Struts web applications, you also need to look into bug 26135 to\navoid leaking memory due to a JVM \"feature\" we did not know about:\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=26135#c6", "attachment_id": null, "id": 70832, "creation_time": "2005-02-11T11:50:00Z", "time": "2005-02-11T11:50:00Z", "creator": "remm@apache.org", "bug_id": 32017, "is_private": false}, {"count": 6, "tags": [], "bug_id": 32017, "is_private": false, "text": "this is NOT fixed!!!!\n\ntomcat 5.5.17, windows server 2003, mail.jar does not go away no matter where i\nput antiJARLocking=\"true\" antiResourceLocking=\"true\", META-INF/context.xml or\nconf/contex.xml\n\nNOT FIXED\n\nI have to shutdown the entire tomcat, get 7 phone calls from users of our other\napps, manually delete mail.jar, and redeploy.  THIS IS A BUG THAT IS NOT FIXED.\n I have read your FAQ and every thing about every bug related to this in here,\nand nothing makes mail.jar go away on undeploy.\n\nInstead of making these HACK attributes (which do nothing), why don't we figure\nout how to properly release these locks on undeploy?", "id": 99293, "time": "2007-02-12T13:42:28Z", "creator": "newmanjw@upmc.edu", "creation_time": "2007-02-12T13:42:28Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 32017, "is_private": false, "text": "To date, the anti-locking attributes have resolved the locking issues identified\nby users. It is possible that you have a use case that these don't work for. It\nis also possible that something you are doing in your web application is causing\nthe problem.\n\nTo get to the root cause of this issue, sufficient information to reproduce it\nis required. At the moment there is not enough information in this report to\nenable the issue to be reproduced. Please provide one of the following:\n- step by step instructions how to reproduce this from a clean Tomcat install\n- a WAR that when deployed on a clean install demonstrates the issue", "id": 99308, "time": "2007-02-12T18:32:21Z", "creator": "markt@apache.org", "creation_time": "2007-02-12T18:32:21Z", "attachment_id": null}, {"count": 8, "tags": [], "text": "No response for over a month so I am closing this as works for me. If you still\nsee this issue on the latest 5.5.x release please provide the information\nrequested in my previous comment.", "is_private": false, "bug_id": 32017, "id": 100886, "time": "2007-03-25T09:09:57Z", "creator": "markt@apache.org", "creation_time": "2007-03-25T09:09:57Z", "attachment_id": null}, {"count": 9, "tags": [], "text": "It appears that the problem remains. I have a similar problem with mail.jar \nthat has to be in .../common/lib, not in my webapps .../WEB-INF/lib. Otherwise, \nafter a mail is sent using javax.mail.Transport.send(msg) the JAR file will \nbecome locked, preventing hot redeploy.\n\nIt does not help to set the following in the\nwebapp's META-INF/context.xml\n\n<Context path=\"/stargate\"\n         antiJARLocking=\"true\"\n         antiResourceLocking=\"true\">\n</Context>\n\nPlatform: Win XP, Tomcat 5.5.15\n\n", "attachment_id": null, "id": 104437, "creation_time": "2007-06-15T08:04:28Z", "time": "2007-06-15T08:04:28Z", "creator": "per.lindberg@implior.com", "bug_id": 32017, "is_private": false}]