[{"count": 0, "tags": [], "bug_id": 52481, "is_private": false, "text": "We found that the rotatelog.exe will crash apache give the following settings under httpd.conf\n\nCustomLog '|\" \"*Apache-Path/bin/rotatelogs.exe\" \"*Apache-Path/logs/backup/internet_access_%d-%m-%y.log\" 86400 256M' combined\n\n\nThe apache hanged after a 15mins stress test with 50 robots.", "id": 152871, "time": "2012-01-18T07:48:19Z", "creator": "jmbenny@gmail.com", "creation_time": "2012-01-18T07:48:19Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "> The apache hanged after a 15mins stress test with 50 robots.\n\nA crash is one thing, a hang is quite another.  Did the error log have anything about a child process exiting and being restarted?\n\nSecondly, what files (and sizes) had been created or written to by rotatelogs at the time the hang was detected?", "attachment_id": null, "id": 152895, "creator": "trawick@apache.org", "time": "2012-01-18T16:36:19Z", "bug_id": 52481, "creation_time": "2012-01-18T16:36:19Z", "is_private": false}, {"count": 2, "tags": [], "text": "Isn't the syntax wrong, it has time and size.  So maybe some buffer gets full trying to write to the piped logger that is never able to init enough to read lines.", "attachment_id": null, "id": 152897, "creator": "covener@gmail.com", "time": "2012-01-18T16:54:04Z", "bug_id": 52481, "creation_time": "2012-01-18T16:54:04Z", "is_private": false}, {"count": 3, "tags": [], "text": "That's right about the syntax; \"256M\" is taken as the UTC offset.\n\nBenny, please fix the syntax (leave only the rotation time OR the rotation size) and see how that works.", "attachment_id": null, "id": 152899, "creator": "trawick@apache.org", "time": "2012-01-18T17:29:28Z", "bug_id": 52481, "creation_time": "2012-01-18T17:29:28Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 52481, "text": "Just in case there is confusion: Apache 2.2 only allows one of the two rotation rules, either size or time based, as stated by Eric and Jeff.\n\nApache 2.4 allows to combine both, i.e. what ever happens first will rotate the file. One of the small nice things coming with 2.4. Though this ticket was opened against 2.2, so yes: please fix your config and try again.\n\nIf the problem happens again, please see the questions of Jeff in Comment #1.\n\nRainer", "id": 152908, "time": "2012-01-18T23:44:15Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2012-01-18T23:44:15Z", "is_private": false, "attachment_id": null}]