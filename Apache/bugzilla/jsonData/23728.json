[{"count": 0, "tags": [], "bug_id": 23728, "attachment_id": null, "text": "Hi,\n\nSummary:\n\nI wish to build Apache 2.0.47 for Red Hat 9 as it contains mod_ldap and\nmod_auth_ldap. I initially tried to simply:\n\nrpmbuild -ta httpd-2.0.47.tar.gz\n\nbut this does not work as db3-devel is required but Red Hat has moved on, it\nseems, and now only db4-devel is available. I edited the httpd.spec to reflect\nthis and it proceeded to build the package with \"rpmbuild -ba httpd.spec\" from\nwithin the source tree. Then when it was putting together the file list the\nfollowing was printed out:\n\nerror: Installed (but unpackaged) file(s) found:\n   /usr/lib/libapr-0.a\n   /usr/lib/libapr-0.la\n   /usr/lib/libaprutil-0.a\n   /usr/lib/libaprutil-0.la\n   /usr/share/man/man8/apachectl.8.gz\n   /usr/share/man/man8/httpd.8.gz\n   /var/www/error/README\n\n\nRPM build errors:\n    File listed twice: /etc/httpd/conf/ssl.conf\n    Installed (but unpackaged) file(s) found:\n   /usr/lib/libapr-0.a\n   /usr/lib/libapr-0.la\n   /usr/lib/libaprutil-0.a\n   /usr/lib/libaprutil-0.la\n   /usr/share/man/man8/apachectl.8.gz\n   /usr/share/man/man8/httpd.8.gz\n   /var/www/error/README\n\nHere is a diff (diff -u) of the changes I had to make to get it to build:\n\n--- httpd.spec  2003-07-07 15:52:14.000000000 +0100\n+++ /tmp/httpd.spec     2003-10-10 14:02:17.000000000 +0100\n@@ -17,7 +17,7 @@\n License: Apache Software License\n Group: System Environment/Daemons\n BuildRoot: %{_tmppath}/%{name}-root\n-BuildPrereq: openldap-devel, db3-devel, expat-devel, findutils, perl, pkgconfig\n+BuildPrereq: openldap-devel, db4-devel, expat-devel, findutils, perl, pkgconfig\n Requires: gawk, /usr/share/magic.mime, /usr/bin/find, openldap\n Prereq: /sbin/chkconfig, /bin/mktemp, /bin/rm, /bin/mv\n Prereq: sh-utils, textutils, /usr/sbin/useradd\n@@ -318,8 +318,8 @@\n %{_sbindir}/rotatelogs\n %attr(4510,root,%{suexec_caller}) %{_sbindir}/suexec\n\n-%{_libdir}/libapr-0.so.*\n-%{_libdir}/libaprutil-0.so.*\n+%{_libdir}/libapr-0*\n+%{_libdir}/libaprutil-0*\n\n %dir %{_libdir}/httpd\n %dir %{_libdir}/httpd/modules\n@@ -333,6 +333,7 @@\n %dir %{contentdir}/html\n %dir %{contentdir}/icons\n %dir %{contentdir}/error\n+%{contentdir}/error/README\n %dir %{contentdir}/error/include\n %{contentdir}/icons/*\n %config(noreplace) %{contentdir}/error/*.var\n@@ -346,6 +347,8 @@\n\n %{_mandir}/man8/rotatelogs*\n %{_mandir}/man8/suexec*\n+%{_mandir}/man8/apachectl*\n+%{_mandir}/man8/httpd*\n\n %files manual\n %defattr(-,root,root)\n\nThe package then built without any problems.  I installed it and tested it\nbriefly (seemed to work) with ssl as well. But, of course, this does not take\ninto account all the module packages that depend on the earlier release so some\nadditional rebuilding of packages will be required in order to use the generated\nRPM.\n\nI modified the actual httpd.spec but one would should really modify\nbuild/rpm/httpd.spec.in and re-run \"buildconf\".\n\nCheers, Fred.", "id": 45377, "time": "2003-10-10T15:24:14Z", "creator": "fred@xinitsystems.com", "creation_time": "2003-10-10T15:24:14Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 23728, "attachment_id": null, "text": "This is fixed in current releases, I think.", "id": 71779, "time": "2005-03-03T16:01:41Z", "creator": "jorton@redhat.com", "creation_time": "2005-03-03T16:01:41Z", "is_private": false}]