[{"count": 0, "tags": [], "bug_id": 16479, "attachment_id": null, "is_private": false, "id": 30149, "time": "2003-01-28T00:12:30Z", "creator": "ruvinsky@yahoo.com", "creation_time": "2003-01-28T00:12:30Z", "text": "class org.apache.jasper.runtime.PageContextImpl has a forward() method that \ninappropriately unwrapps the response wrapper if one exists.  See the code \nbelow to see the suggested fix.  The current behavior appears to violate the \nServlet Specification as the dispatched response object is NOT same one for the \ncurrent page context.  This is verified to be a problem in Tomcat 4.0.5, and \nappears to have the same problem in Tomcat 4.1.12.  However, I have not \nverified if this was fixed in 4.1.18.  The suggest fix is below:\n\npublic void forward(String relativeUrlPath)\nthrows ServletException, IOException\n{\n:\n:\n    /** @todo - REMOVE THE FOLLOW WHILE LOOP */\n    // Make sure that the response object is not the wrapper for include\n    while (response instanceof HttpServletResponseWrapper)\n        response = ((HttpServletResponseWrapper)response).getResponse();\n:\n:\n}\n\nThanks."}, {"count": 1, "tags": [], "text": "It appears that this problem was fixed around 4.1.10.  I'm not sure if this is \na duplicate of another bug, so I'll just mark this as invalid.", "is_private": false, "bug_id": 16479, "id": 30150, "time": "2003-01-28T03:13:38Z", "creator": "ruvinsky@yahoo.com", "creation_time": "2003-01-28T03:13:38Z", "attachment_id": null}]