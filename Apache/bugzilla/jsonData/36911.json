[{"count": 0, "tags": [], "creator": "billy.zophar@gmail.com", "attachment_id": null, "id": 80740, "time": "2005-10-04T15:59:13Z", "bug_id": 36911, "creation_time": "2005-10-04T15:59:13Z", "is_private": false, "text": "Using a binary distribution of jakarta-tomcat-5.5.9 with compat installed on Mac\nOS X Server 10.4 with Developer Tools installed, I was following the directions\nat this document to compile the jsvc binary:\n\nhttp://jakarta.apache.org/tomcat/tomcat-5.5-doc/setup.html\n(See section \"Unix Daemon\").\n\nRather than using startup.sh, I wanted to call jsvc so I could pass the -user\nflag and run tomcat as a non-priveleged user.\n\nSteps followed to build binary:\nsudo tar zxvf jsvc.tar.gz\ncd $CATALINA_HOME/bin/jsvc-src\nsudo autoconf\nsudo chmod u+x configure\nsudo ./configure\nsudo make\n\nThe make output produces the following error:\nmake failed, error:\ndso-dyld.c:54: error: conflicting types for 'dso_init'\ndso.h:24: error: previous declaration of 'dso_init' was here\ndso-dyld.c:76: error: conflicting types for 'dso_unlink'\ndso.h:26: error: previous declaration of 'dso_unlink' was here\ndso-dyld.c: In function 'dso_symbol':\ndso-dyld.c:109: warning: operation on 'x' may be undefined\ndso-dyld.c: At top level:\ndso-dyld.c:127: warning: function declaration isn't a prototype\nmake[1]: *** [dso-dyld.o] Error 1\nmake: *** [native/all] Error 2\n\nThe version of make on this system is:\nGNU Make 3.80\n\nuname -a for my system:\nDarwin localhost 8.2.0 Darwin Kernel Version 8.2.0: Fri Jun 24 17:46:54 PDT\n2005; root:xnu-792.2.4.obj~3/RELEASE_PPC Power Macintosh powerpc\n\nObviously, I can continue to run the service as root using startup.sh, but I\nfigured you should know about this.\n\nI spent some time searching the database and was unable to find a duplicate, but\nif one exists, my apologies.\n\nThanks!\nBilly Gray"}, {"count": 1, "tags": [], "creator": "d.malenicic@gmx.net", "attachment_id": null, "id": 83769, "time": "2005-12-18T11:26:02Z", "bug_id": 36911, "creation_time": "2005-12-18T11:26:02Z", "is_private": false, "text": "Looks like problem is connected with definition of typedef { false, true } bool;.\nSeems that gcc 4.01 that is default compiler on OSX 10.4.x has problem with name\nbool. I have tested two workarrounds:\n- in jsvc.h remove \n    typedef { false, true } bool; \n  and \n    #include <stdbool.h>\n  instead\n- rename \n    typedef { false, true } bool; \n  to \n    typedef { false, true }  t_bool; /* or somethin similar */\n  and replace all references to bool to references on following type.\nProgram than compiles but still doesn't work on Tiger and Java 1.4 or Java 5\nsince it tries to load libappshell.dylib that does exists only for Java 1.3.1.\nBut that's another bug."}, {"count": 2, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "is_private": false, "id": 88084, "time": "2006-04-14T18:36:00Z", "bug_id": 36911, "creation_time": "2006-04-14T18:36:00Z", "text": "Updates?"}, {"count": 3, "tags": [], "bug_id": 36911, "attachment_id": null, "id": 88093, "time": "2006-04-14T19:00:49Z", "creator": "william.barker@wilshire.com", "creation_time": "2006-04-14T19:00:49Z", "is_private": false, "text": "Gump has been building this for awhile on Mac OS X.\nhttp://clarus.apache.org/jakarta-commons/commons-daemon-native/index.html"}, {"count": 4, "tags": [], "creator": "huntc@internode.on.net", "attachment_id": null, "id": 122045, "time": "2008-10-30T16:03:49Z", "bug_id": 36911, "creation_time": "2008-10-30T16:03:49Z", "is_private": false, "text": "This issue is not resolved.\n\nWhile the workaround has been identified there has been no application of it to the distribution.\n\nAdditionally there are now a number of other warnings that I feel should be recognised. Here is the log from my build on Mac OS X. Firstly here is the configure output:\n\n*** Current host ***\nchecking build system type... i386-apple-darwin9.5.0\nchecking host system type... i386-apple-darwin9.5.0\nchecking cached host system type... ok\n*** C-Language compilation tools ***\nchecking for gcc... gcc\nchecking for C compiler default output file name... a.out\nchecking whether the C compiler works... yes\nchecking whether we are cross compiling... no\nchecking for suffix of executables... \nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to accept ANSI C... none needed\nchecking for ranlib... ranlib\n*** Host support ***\nchecking C flags dependant on host system type... ok\n*** Java compilation tools ***\nchecking for javac... /Library/Java/Home/bin/javac\nchecking wether the Java compiler (/Library/Java/Home/bin/javac) works... yes\nchecking for jar... /Library/Java/Home/bin/jar\ngcc flags added\n*** Writing output files ***\nconfigure: creating ./config.status\nconfig.status: creating Makefile\nconfig.status: creating Makedefs\nconfig.status: creating native/Makefile\n*** All done ***\nNow you can issue \"make\"\n\n...and here is the output of make (given the identified bool modification of jsvc.h):\n\nmake -C native all\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c jsvc-unix.c -o jsvc-unix.o\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c arguments.c -o arguments.o\narguments.c: In function \u2018arguments\u2019:\narguments.c:251: warning: unused variable \u2018temp\u2019\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c debug.c -o debug.o\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c dso-dlfcn.c -o dso-dlfcn.o\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c dso-dyld.c -o dso-dyld.o\ndso-dyld.c: In function \u2018multiple\u2019:\ndso-dyld.c:34: warning: \u2018NSNameOfSymbol\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:187)\ndso-dyld.c:34: warning: \u2018NSNameOfModule\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:158)\ndso-dyld.c:34: warning: \u2018NSNameOfModule\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:158)\ndso-dyld.c:35: warning: \u2018NSNameOfModule\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:158)\ndso-dyld.c: In function \u2018dso_init\u2019:\ndso-dyld.c:61: warning: \u2018NSInstallLinkEditErrorHandlers\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:226)\ndso-dyld.c: In function \u2018dso_link\u2019:\ndso-dyld.c:69: warning: \u2018NSAddLibrary\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:228)\ndso-dyld.c: In function \u2018dso_symbol\u2019:\ndso-dyld.c:109: warning: operation on \u2018x\u2019 may be undefined\ndso-dyld.c:113: warning: \u2018NSLookupAndBindSymbol\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:179)\ndso-dyld.c:118: warning: \u2018NSModuleForSymbol\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:189)\ndso-dyld.c:119: warning: \u2018NSAddressOfSymbol\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:188)\ndso-dyld.c:121: warning: \u2018NSNameOfSymbol\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:187)\ndso-dyld.c:121: warning: \u2018NSNameOfModule\u2019 is deprecated (declared at /usr/include/mach-o/dyld.h:158)\ndso-dyld.c: At top level:\ndso-dyld.c:127: warning: function declaration isn\u2019t a prototype\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c help.c -o help.o\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c home.c -o home.o\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c java.c -o java.o\njava.c:49: warning: function declaration isn\u2019t a prototype\njava.c: In function \u2018java_init\u2019:\njava.c:122: warning: implicit declaration of function \u2018dso_error\u2019\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c location.c -o location.o\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c replace.c -o replace.o\ngcc -g -O2 -DOS_DARWIN -DDSO_DYLD -DCPU=\\\"i386\\\" -I/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Headers -Wall -Wstrict-prototypes -c signals.c -o signals.o\nar cr libservice.a arguments.o debug.o dso-dlfcn.o dso-dyld.o help.o home.o java.o location.o replace.o signals.o\nranlib: file: libservice.a(dso-dlfcn.o) has no symbols\nranlib: file: libservice.a(signals.o) has no symbols\nranlib libservice.a\nranlib: file: libservice.a(dso-dlfcn.o) has no symbols\nranlib: file: libservice.a(signals.o) has no symbols\ngcc  jsvc-unix.o libservice.a -o ../jsvc\n\nKind regards,\nChristopher"}, {"count": 5, "tags": [], "text": "jsvc is part of commons daemon so this really belongs in the commons daemon bug tracker. I've taken a quick look and there is already an issue for this along with some patches: https://issues.apache.org/jira/browse/DAEMON-98\n\nThere hasn't been much activity on commons daemon for a while - I'll ping the commons-dev list to see if I can stimulate some / get commit privs on daemon.\n\nI am marking this as INVALID for Tomcat which doesn't mean that this isn't an issue but that it is an issue with a non-Tomcat component and needs to be tracked on that component's bug tracker.", "attachment_id": null, "bug_id": 36911, "id": 123674, "time": "2009-01-01T05:18:35Z", "creator": "markt@apache.org", "creation_time": "2009-01-01T05:18:35Z", "is_private": false}]