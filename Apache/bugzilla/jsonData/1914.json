[{"count": 0, "tags": [], "creator": "mayank.shah@gs.com", "attachment_id": null, "text": "I am using singlesingon with FORM bacsed authentication in my application.  The \nfeature works correctly in Beta 3 but fails with Beta 5 and even in the latest \nnightly build.  The strage thing is that the SingleSignOn example that is \nincluded with Beta 5 and nightly builds works, but the same thing when coppied \nto my local application does not work.  The behavir is that when I go to a URL \nthat is protected with SingleSignOn, I do not get forwarded to the logon \nscreen, instead I get right to the url without any authentication.  Here is a \nsection of the log file:\n\ntyConstraint[Protected Area]\nXmlMapper: pop security-constraint org.apache.catalina.deploy.SecurityConstraint\n: SecurityConstraint[Protected Area]\nXmlMapper: new null org.apache.catalina.deploy.LoginConfig login-config LoginCon\nfig[authMethod=null]\nXmlMapper: org.apache.catalina.deploy.LoginConfig.setAuthMethod( FORM)\nXmlMapper: org.apache.catalina.deploy.LoginConfig.setAuthMethod( )\nXmlMapper: org.apache.catalina.deploy.LoginConfig.setRealmName( \nMyDomainComSecurity\n)\nXmlMapper: org.apache.catalina.deploy.LoginConfig.setRealmName( )\nXmlMapper: org.apache.catalina.deploy.LoginConfig.setLoginPage( /login/login.jsp\n)\nXmlMapper: org.apache.catalina.deploy.LoginConfig.setLoginPage( )\nXmlMapper: org.apache.catalina.deploy.LoginConfig.setErrorPage( /login/login.jsp\n)\nXmlMapper: org.apache.catalina.deploy.LoginConfig.setErrorPage( )\nXmlMapper: Calling org.apache.catalina.core.StandardContext.setLoginConfig Login\nConfig[authMethod=FORM, realmName=MyDomainComSecurity, \nloginPage=/login/login.jsp,\nerrorPage=/login/login.jsp]\nXmlMapper: pop login-config org.apache.catalina.deploy.LoginConfig: LoginConfig[\nauthMethod=FORM, realmName=MyDomainComSecurity, loginPage=/login/login.jsp, \nerrorPa\nge=/login/login.jsp]\nXmlMapper: Debug level: 3\nXmlMapper: Validating = true\n\n...........\n\n2001-05-26 23:45:34 SingleSignOn[www.mydomain.com]: Process request \nfor '/protected/'\n2001-05-26 23:45:34 SingleSignOn[www.mydomain.com]:  Checking for SSO cookie\n2001-05-26 23:45:34 SingleSignOn[www.mydomain.com]:  SSO cookie is not present\n2001-05-26 23:45:34 StandardHost[www.mydomain.com]: Mapping request \nURI '/protected/'\n2001-05-26 23:45:34 StandardHost[www.mydomain.com]:   Trying the longest \ncontext path prefix\n2001-05-26 23:45:34 StandardHost[www.mydomain.com]:  Mapped to context ''\n2001-05-26 23:45:34 Authenticator[]: Security checking request GET /protected/\n2001-05-26 23:45:34 Authenticator[]:   Checking constraint 'SecurityConstraint\n[Protected Area]' against GET /protected/ --> true\n2001-05-26 23:45:34 Authenticator[]:  Subject to constraint SecurityConstraint\n[Protected Area]\n2001-05-26 23:45:34 Authenticator[]:  Calling checkUserData()\n2001-05-26 23:45:34 Authenticator[]:   User data constraint has no restrictions\n2001-05-26 23:45:34 Authenticator[]:  Successfully passed all security \nconstraints\n\n\n\n.......\n\n2001-05-26 23:45:34 Authenticator[]: Security checking request \nGET /protected/index.html\n2001-05-26 23:45:34 Authenticator[]:   Checking constraint 'SecurityConstraint\n[Protected Area]' against GET /protected/index.html --> true\n2001-05-26 23:45:34 Authenticator[]:  Subject to constraint SecurityConstraint\n[Protected Area]\n2001-05-26 23:45:34 Authenticator[]:  Calling checkUserData()\n2001-05-26 23:45:34 Authenticator[]:   User data constraint has no restrictions\n2001-05-26 23:45:34 Authenticator[]:  Successfully passed all security \nconstraints\n2001-05-26 23:45:34 StandardContext[]: Mapping contextPath='' with \nrequestURI='/protected/index.html' and relativeURI='/protected/index.html'", "id": 2666, "time": "2001-05-26T20:56:28Z", "bug_id": 1914, "creation_time": "2001-05-26T20:56:28Z", "is_private": false}, {"count": 1, "tags": [], "text": "Sent mail asking for the configuration files in use when this happens.\n", "attachment_id": null, "id": 2711, "creation_time": "2001-06-01T16:04:57Z", "time": "2001-06-01T16:04:57Z", "creator": "craig.mcclanahan@sun.com", "bug_id": 1914, "is_private": false}, {"count": 2, "tags": [], "bug_id": 1914, "attachment_id": null, "id": 2808, "time": "2001-06-08T09:01:58Z", "creator": "mayank.shah@gs.com", "creation_time": "2001-06-08T09:01:58Z", "is_private": false, "text": "Craig,  Thanks for following up.\n\nI was able to resolve the problem but here is what I found:\n\nI did not have <auth-constraint> section defined in the web.xml file, bu tI did \nhave a <security-constraint> section trying to proctect a url.  Once I added \nthe <auth-constraint> block with some roles then I got the sign on screen.  \nWithout this section, there entire security-constaint section was ignored.  "}, {"attachment_id": null, "tags": [], "bug_id": 1914, "is_private": false, "count": 3, "id": 3228, "time": "2001-06-24T18:57:41Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-06-24T18:57:41Z", "text": "Resolved, per comments from original reporter.\n"}]