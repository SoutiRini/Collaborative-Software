[{"count": 0, "tags": [], "bug_id": 40175, "attachment_id": null, "is_private": false, "id": 91846, "time": "2006-08-03T08:46:29Z", "creator": "luca.distefano@wuerth-phoenix.com", "creation_time": "2006-08-03T08:46:29Z", "text": "if you use \n<fileset dir=\"..\" includesfile=\"includes.txt\"/>\nincludes.txt contains for example:\n\nfile1.xml\nfile4.xml\nfile2.xml\nfile3.xml\n\ngetting the included files they will be returned sorted by name\n\nfile1.xml\nfile2.xml\nfile3.xml\nfile4.xml\n\nthis behaviour is not expected and should be at least switchable.\nthis problem force the use of hardcoded (in the build.xml) list of files when a\nparticular order is needed\n\nthe sorting is performed in \norg.apache.tools.ant.DirectoryScanner.getIncludedFiles() and\n.getIncludedDirectories()\nperforms an Arrays.sort()"}, {"count": 1, "tags": [], "bug_id": 40175, "attachment_id": null, "text": "Luca,\n\nFilesets explicitly say \"no guarantees of ordering\". Which means that you cannot\nexpect filesets to be driven by an includes file to match what you list in the file.\n\nThere is a <filelist> list which is explictly ordered. \n1. I dont know if it can be driven off a file; we could fix that\n2. not that many tasks in ant1.6 use it\n\nAnt1.7 has a broader model of resources, so any ant task uprated to support\nresource collections will take filelists alongside filesets. When the beta comes\nout this month, please pull it down and see if this works for you. if not, then\nfile a bugrep about how the resource stuff doesnt meet your needs.", "id": 91857, "time": "2006-08-03T11:58:17Z", "creator": "stevel@apache.org", "creation_time": "2006-08-03T11:58:17Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 40175, "attachment_id": null, "id": 91874, "time": "2006-08-03T16:02:31Z", "creator": "alexeys@inventigo.com", "creation_time": "2006-08-03T16:02:31Z", "is_private": false, "text": "Actually it makes sense to sort files in some ways, for example, in tar+gzip, to\nachieve better compression."}, {"count": 3, "tags": [], "text": "I understand your comments and is acceptable to keep the default behavior with sort.\nWhat is not smart is that if you give a set of files (not patterns) this set\nwill be reordered.\nThat force to specify the set of files hardcoded in the build xml and not\nconfigurable from outside or dynamically\n\nWhat would be needed is a flag for to say sorted=\"no\"\n\nif you accept this kind of changes I would be glad to submit to you the needed\nchanges\n\nanyway,\n thanks for your help", "attachment_id": null, "id": 91887, "creator": "luca.distefano@wuerth-phoenix.com", "time": "2006-08-04T07:48:24Z", "bug_id": 40175, "creation_time": "2006-08-04T07:48:24Z", "is_private": false}, {"count": 4, "tags": [], "creator": "BBurgess@tiaa-cref.org", "attachment_id": null, "text": "Steve made it clear why this change is a WONTFIX:\n\nA set by definition has no guarentee in order.\n\nA list by definition is an ordered collection.\n\nBringing order to a set makes it stop being a set; it would then be a list.", "id": 91893, "time": "2006-08-04T13:09:54Z", "bug_id": 40175, "creation_time": "2006-08-04T13:09:54Z", "is_private": false}, {"count": 5, "tags": [], "text": "Thinking... we could add an includesfile to filelist for 1.7 .", "attachment_id": null, "bug_id": 40175, "id": 91895, "time": "2006-08-04T13:55:44Z", "creator": "mbenson@apache.org", "creation_time": "2006-08-04T13:55:44Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 40175, "text": "hey man be quiet.\n\nas I said I understand the reasons.\n\nAnyway, there is no reason to be rude, we are professional workers not a street\ngang (nothing against street gangs) and if you will be polemic then:\n\n>A set by definition has no guarentee in order.\n\nwhere are those definitions?\nhere the links to your doc:\nhttp://ant.apache.org/manual/CoreTypes/fileset.html\nhttp://ant.apache.org/manual/CoreTypes/filelist.html\nor looking in java\nhttp://java.sun.com/j2se/1.5.0/docs/api/java/util/Set.html\n\nor maybe you need to find your definition here:\nhttp://java.sun.com/j2se/1.5.0/docs/api/java/util/SortedSet.html\n\nsupposing I use filelist there is no way to use an external file that contains\nthe list of files...\n\nbut I will close this useless discussion here\n\nthanks Steve and Alexey ", "id": 91896, "time": "2006-08-04T13:58:21Z", "creator": "luca.distefano@wuerth-phoenix.com", "creation_time": "2006-08-04T13:58:21Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 40175, "text": "(In reply to comment #6)\n> hey man be quiet.\n> \n\nI assume you were speaking to Ben (Burgess).  He is a valued member of the Ant\nand wider Apache communities and it does your case no good by reacting in such a\nway to him.  No one but yourself, likely, saw his response as rudeness, although\nyour \"hey man be quiet\" could hardly be construed otherwise.\n\n> as I said I understand the reasons.\n> \n> Anyway, there is no reason to be rude, we are professional workers not a street\n> gang (nothing against street gangs) and if you will be polemic then:\n> \n> >A set by definition has no guarentee in order.\n> \n> where are those definitions?\n\nHere is something found by a quick google of the words 'mathematics' and 'set':\n\n    Bolzano was a philosopher and mathematician of great depth of thought.\n    In 1847 he considered sets with the following definition\n\n        an embodiment of the idea or concept which we conceive when we\n        regard the arrangement of its parts as a matter of indifference. \n\nAdditionally, a google of the words 'set' and 'equality' yields such results as\nhttp://www.cs.odu.edu/~toida/nerzic/content/set/basics.html :\n\n    Definition (Equality of sets): Two sets are equal if and only if they have\n    the same elements.  More formally, for any sets A and B,  A = B if and only\n    if x [ x A      x B ] . (ed: mathematics characters lost here)\n\n    Thus for example {1, 2, 3} = {3, 2, 1} , that is the order of elements does\n    not matter\n\nI think these results vindicate Ben's characterization of a set as being\nunordered by definition.\n\n[SNIP]\n> supposing I use filelist there is no way to use an external file that contains\n> the list of files...\n> \n> but I will close this useless discussion here\n>\n\nI said above that we might add an includesfile to filelist for 1.7 (which is to\nbe released in the near future).  Fortunately, this idea has enough merit to\nstand on its own so you will be likely to have it despite your behavior here.\n", "id": 91898, "time": "2006-08-04T14:32:04Z", "creator": "mbenson@apache.org", "creation_time": "2006-08-04T14:32:04Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "text": "It is getting personal. In a perfect world all sets would be unsorted, but in\nthe real world sorted and ordered sets are needed and that is why there are\nLinkedHashSet and TreeSet in Java. The main difference between all these\ncollections is a predictable order of navigation. There is nothing wrong with it.\n\nThere is an example - to achieve the best compression ratio for solid archives\n(for example, tgz), the files should be sorted by extension -> increasing file\nsize -> file name, but not how ANT filesets are sorted. I do not say that it\nwould be better to change resource collections to be sortable (maybe it is), but\nthe original point is valid.", "attachment_id": null, "bug_id": 40175, "id": 91902, "time": "2006-08-04T16:23:59Z", "creator": "alexeys@inventigo.com", "creation_time": "2006-08-04T16:23:59Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 40175, "text": "(In reply to comment #8)\n> It is getting personal.\n\nIf I have presented a negative face here, I apologize, although the only\n\"personal\" thing I feel I possibly brought to the discussion was the \"your\nbehavior\" comment.  It has been pointed out to me that certain statements on\nthis thread may or may not have had rude intent but in the interest of ending\nthis facet of the discussion I'll say no more on the subject.\n\n> In a perfect world all sets would be unsorted, but in\n> the real world sorted and ordered sets are needed and that is why there are\n> LinkedHashSet and TreeSet in Java. The main difference between all these\n> collections is a predictable order of navigation. There is nothing wrong with it.\n> \n> There is an example - to achieve the best compression ratio for solid archives\n> (for example, tgz), the files should be sorted by extension -> increasing file\n> size -> file name, but not how ANT filesets are sorted. I do not say that it\n> would be better to change resource collections to be sortable (maybe it is), but\n> the original point is valid.\n\n1.7's resource collections can do pretty much whatever is needed of them, since\nRC is just an interface and therefore fully open to custom implementations.  Ant\n1.7 will ship with the <sort> collection that allows the use and/or combination\nof a number of included resourceComparators as well as the possibility for\ncustom ResourceComparator implementations.  With this, and the proposed\nincludesfile attribute of <filelist> it seems that all bases would be covered.\n", "id": 91903, "time": "2006-08-04T16:43:37Z", "creator": "mbenson@apache.org", "creation_time": "2006-08-04T16:43:37Z", "is_private": false, "attachment_id": null}]