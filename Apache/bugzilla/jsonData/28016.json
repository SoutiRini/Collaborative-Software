[{"count": 0, "tags": [], "bug_id": 28016, "text": "I downloaded and installed mod_jk2 2.0.4 binary for Apache2/Win32.\nSomehow, the configuration that had been working so far is now broken.\n\n*.jsp files in HTTP virtualhosts are correctly handled by Tomcat, but those that\nare on the SSL virtualhost are served by Apache as text.\n\nI have been using a mod_jk2/2.0.3-dev that I got from Tomcat 4.1.x in late\nOctober and nuilt from sources to match my Apache version.\n\nThe configuration is all in httpd.conf and ssl.conf.\nI added the lb stuff to follow the sample in 2.0.4, it was not there before. I\ntook out the irrelevant (IMHO) Apache conffiguration lines for better clarity (I\nhope).\n\nhttpd.conf:\n\n# Configuration for mod_jk2\n# This is outside the virtual hosts, since it is also used\n# in the ssl.conf part\nJkSet shm.file \"${serverRoot}/logs/shm.file\"\nJkSet shm.size 5242880\nJkSet lb lb:lb\nJkSet channel.socket:localhost:8009.host 192.168.50.1\nJkSet channel.socket:localhost:8009.port 8009\nJkSet ajp13:localhost:8009.channel     channel.socket:localhost:8009\nJkSet ajp13:localhost:8009.group       lb\n\n# That one works\n<virtualhost 192.168.50.1>\n  <Location \"/WorkOrder/*.jsp\">\n    JkUriSet worker ajp13:localhost:8009\n    JkUriSet group  lb\n  </Location>\n</virtualhost>\n\n\n\nssl.conf:\n# That one does not work, serves the JSP files as text\n<VirtualHost 192.168.50.1:443>\n  <Location \"/WorkOrder/\">\n    JkUriSet worker ajp13:localhost:8009\n    JkUriSet group  lb\n  </Location>\n</virtualhost>\n\n\nMaybe it could be related to that other bug?\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=18472", "id": 54815, "attachment_id": null, "creator": "laurent@elanor.org", "creation_time": "2004-03-29T15:28:02Z", "time": "2004-03-29T15:28:02Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 28016, "attachment_id": null, "text": "There was some change in jk2 code commited yesterday.\n\nThanks to check with latest HEAD and close the bug if it's fixed", "id": 55020, "time": "2004-04-01T07:23:16Z", "creator": "hgomez@apache.org", "creation_time": "2004-04-01T07:23:16Z", "is_private": false}, {"text": "I'm behind a restrictive firewall, so I can't access CVS directly.\n\nI downloaded this snapshot:\nhttp://cvs.apache.org/snapshots/jakarta-tomcat-connectors/jakarta-tomcat-connectors_20040401052212.tar.gz\n\nAnd built it successfully with VC98, against Apache 2.0.49, using Ant 1.6.1.\n\nI replaced the working mod_jk2.dll by the one just built, without changing\nanything to the configuration (that is, there was no load balancing stuff, since\nit was not supported with that older mod_jk2).\n\nRestarted Apache (net stop/net start), and the problem is still present, though\nit evolved slightly.\n\nIn those tests, the URLs all should display the same index.jsp file interpreted\nby Tomcat.\n\nmod_jk2 2.0.3-dev (October 2003):\nhttp://URL/           -> works\nhttp://URL/index.jsp  -> works\nhttps://URL/          -> works\nhttps://URL/index.jsp -> works\n\nmod_jk2 2.0.4:\nhttp://URL/           -> works\nhttp://URL/index.jsp  -> works\nhttps://URL/          -> returns the source of index.jsp\nhttps://URL/index.jsp -> returns the source of index.jsp\n\nNow:\n\nhttp://URL/           -> works\nhttp://URL/index.jsp  -> works\nhttps://URL/          -> WORKS!\nhttps://URL/index.jsp -> returns the source of index.jsp\n\nGetting better, not quite there yet, unless there are some more fixes in the CVS\nthat are not yet in the snapshots.", "tags": [], "bug_id": 28016, "attachment_id": null, "count": 2, "id": 55029, "time": "2004-04-01T09:22:30Z", "creator": "laurent@elanor.org", "creation_time": "2004-04-01T09:22:30Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 28016, "attachment_id": null, "text": "Heads up: JK2 is going away.  Switch to mod_jk.", "id": 67094, "time": "2004-11-17T23:06:17Z", "creator": "yoavs@computer.org", "creation_time": "2004-11-17T23:06:17Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 28016, "text": "Thanks for the tip.\nI hope I'm not going to be told in 2 years that mod_jserve is the way to go ;-)\n\nAs a side note, I'd advise you to make this obvious on Tomcat's web site:\nit still points to\nhttp://jakarta.apache.org/tomcat/connectors-doc/jk2/index.html, which says,\namong others, that \"JK2 is a refactoring of JK and is much more powerfull.\"\n\nI've been fooled by that, and spent a long time getting mod_jk2 to work. Would\nbe better to avoid the same mistake to others.\n\nI guess that bug report has no point anymore, and can be closed.", "id": 67115, "time": "2004-11-18T08:57:34Z", "creator": "laurent@elanor.org", "creation_time": "2004-11-18T08:57:34Z", "is_private": false, "attachment_id": null}]