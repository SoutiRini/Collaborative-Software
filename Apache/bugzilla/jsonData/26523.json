[{"count": 0, "tags": [], "bug_id": 26523, "attachment_id": null, "text": "I look deep at source to start a StandardEngine with a conf/tomcat5-mbeans.xml.\nThis feature to integrate easy some service JMX Mbeans is cool.\nAfter some time I see that init() is call twice.\n\nfirst call is at: StandardEngine L595  readEngineMbeans()\n\n           Registry.getRegistry(null, null).registerComponent\n                (mbeansMB, domain + \":type=MbeansFile\", null);\n            mbeansMB.load();\nL595:            mbeansMB.init();\n            mbeansMB.setRegistry(Registry.getRegistry(null, null));\n\n-- please change to\n           Registry.getRegistry(null, null).registerComponent\n                (mbeansMB, domain + \":type=MbeansFile\", null);\n            mbeansMB.load();\n            mbeansMB.setRegistry(Registry.getRegistry(null, null));\n\nsecond call is at 424 init()\n\n       if( mbeans != null ) {\n            try {\n                Registry.getRegistry(null, null).invoke(mbeans, \"init\", false);\n            } catch (Exception e) {\n                log.error(\"Error in init() for \" + mbeansFile, e);\n            }\n        }\n\nAlso see my commons-modeler feature enhancement (MbeansSource):\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=26493\n\nPeter", "id": 51402, "time": "2004-01-29T15:21:31Z", "creator": "pr@webapp.de", "creation_time": "2004-01-29T15:21:31Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "The containers should be tolerant with this kind of behavior. It is likely hard\nto fix given the tight coupling with the standalone mode, and I'm satisfied with\nhow it works right now.\nMore important are possibly missing management operations. You can do plenty of\nthings using JMX, but the question is: can we do everything ?", "id": 51420, "time": "2004-01-29T17:50:38Z", "bug_id": 26523, "creation_time": "2004-01-29T17:50:38Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "pr@webapp.de", "text": "Hmm, you are right! We can't do everything,\n\nbut at StandardEngine the private readEngineMbeans() method is called from \npublic init(). I thing we can drop the mbeansMB.init() without side effect.\n\nLook at StandardEngine.init()\n... L 418\n       if( mbeansFile != null ) {\n            readEngineMbeans();\n        }\n        if( mbeans != null ) {\n            try {\n                Registry.getRegistry(null, null).invoke(mbeans, \"init\", false);\n            } catch (Exception e) {\n                log.error(\"Error in init() for \" + mbeansFile, e);\n            }\n        }\n\nThis report is only a hint!\n\nPeter", "id": 51451, "time": "2004-01-30T06:40:19Z", "bug_id": 26523, "creation_time": "2004-01-30T06:40:19Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "yoavs@computer.org", "text": "Peter, if this is still relevant to CVS HEAD, and you still care about it, \nplease submit a patch.  Thanks.", "id": 61274, "time": "2004-07-28T21:36:56Z", "bug_id": 26523, "creation_time": "2004-07-28T21:36:56Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "yoavs@computer.org", "text": "Alright, it's been 2.5 months since this enhancement was posted.  Peter, if you \nstill want to do it, go ahead, since you're now a committer and have the \nrequired karma ;)  You can also reopen/resolve this issue if you want, but for \nnow I'm closing since it has no impact, and no one cares about it.", "id": 64825, "time": "2004-10-08T12:39:18Z", "bug_id": 26523, "creation_time": "2004-10-08T12:39:18Z", "is_private": false, "attachment_id": null}]