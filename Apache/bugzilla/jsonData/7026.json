[{"count": 0, "tags": [], "creator": "zorro.desbois@wanadoo.fr", "attachment_id": null, "id": 11665, "time": "2002-03-11T14:27:27Z", "bug_id": 7026, "creation_time": "2002-03-11T14:27:27Z", "is_private": false, "text": "My environment :\n Tomcat 3.3a\n (with apache 1.3.22/mok_jk/ajp13 or with tomcat:8080)\n Java HotSpot(TM) Server VM (build 1.3.1_02-b02, mixed mode)\n Linux 2.4.16 i686\nwith AutoDeploy :\n  <AutoDeploy source=\"webapps\" target=\"webapps\" redeploy=\"true\" />\nand \n  <ReloadInterceptor fullReload=\"true\" />\n\nMy application (/AppliTest) works in this context. \nI modify the sources, re-compile them and deploy them in $TOMCAT_HOME/webapps (which is a link on /usr2/webapps).\n\nWithout re-starting tomcat, I see my modifications \nBUT\nthe old native_threads java are still here and new ones are created.\nSo, if I re-start this operation some times, I have more and more native_threads java\nand, at a moment, my system is down (I have to re-boot) because I can't do any fork !!!\n\nSo, this functionality is a little good (?) for developpement (because I can restart server after some modifications and before it is too late),\nbecause it can't be acceptable for production servers .\n\nSo , is there other solution in Tomcat (for production servers)?"}, {"count": 1, "tags": [], "bug_id": 7026, "text": "AutoDeploy doesn't launch any threads.  It is, however, a relatively expensive \ntask.  On a high-volume site, using this regularly would result in a large \nnumber of threads being created (since the deploying threads would be \nunavailable while they where deploying).  However the webmaster has complete \ncontrol over this by setting the \"maxSpareThreads\" (or, at the extreme \nthe \"maxThreads\") attribute on whichever connector is being used.", "id": 11680, "attachment_id": null, "creator": "william.barker@wilshire.com", "creation_time": "2002-03-12T08:09:29Z", "time": "2002-03-12T08:09:29Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 7026, "is_private": false, "id": 11693, "time": "2002-03-12T14:40:22Z", "creator": "zorro.desbois@wanadoo.fr", "creation_time": "2002-03-12T14:40:22Z", "tags": [], "text": "In my configuration file server.xml, I put :\n<Http10Connector port=\"8080\" secure=\"false\" maxThreads=\"100\" maxSpareThreads=\"10\" minSpareThreads=\"4\"/> \n<Ajp13Connector port=\"8009\" maxThreads=\"100\" maxSpareThreads=\"10\" minSpareThreads=\"4\"/>\n\nBut I still have the problem : when I update some times my web application, \nI have more and more native_threads java (corresponding of my application servlets which are loaded on startup).\n(and the maxSpareThreads doesn't change anything)\n\nSo, I think there is a real bug.\n\nBut my question is :\nIs there a solution, in tomcat 3.3, for updating existing web applications (on production servers) without re-starting the entire server ?\n\nI tried with <AutoDeploy> (as described above) or with the Administration tools (remove then add context) \nbut nothing is acceptable...\n\nthanks\n"}, {"count": 3, "attachment_id": null, "creator": "Larry.Isaacs@sas.com", "text": "I'll assume there is a problem the is a restart problem related to Tomcat or\nthe connector, but a test case will be needed to investigate further.  Will\naddress this after Tomcat 3.3.1.", "id": 12037, "time": "2002-03-20T01:42:07Z", "bug_id": 7026, "creation_time": "2002-03-20T01:42:07Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "zorro.desbois@wanadoo.fr", "text": "SORRY : my test case was false :\n\nwhen I said \"the old native_threads java are still here and new ones are created\"\nit was not a problem with Tomcat BUT with my application : \nat the init of my servlet, I create a poolManager (which implements Runnable) but I never destroy it.\nSo, when I reload my application, new poolManagers are created!!\n\nI have updated my application and I don't have this problem anymore :-)\n\nSorry for the disturbance.\n", "id": 13042, "attachment_id": null, "bug_id": 7026, "creation_time": "2002-04-08T15:38:17Z", "time": "2002-04-08T15:38:17Z", "is_private": false}]