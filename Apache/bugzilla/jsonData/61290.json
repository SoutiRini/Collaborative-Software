[{"text": "Created attachment 35126\nZK cfg and log\n\nI'm using Zookeeper 3.4.6\n    \nThe ZK log data folder keeps growing with transaction logs files (log.*).\n    \nI set the following in zoo.cfg:\nautopurge.purgeInterval=1\nautopurge.snapRetainCount=3\ndataDir=..\\\\data\n    \nPer ZK log, it reads those parameters:\n    \n2017-07-13 10:36:21,266 [myid:] - INFO  [main:DatadirCleanupManager@78] - autopurge.snapRetainCount set to 3\n2017-07-13 10:36:21,266 [myid:] - INFO  [main:DatadirCleanupManager@79] - autopurge.purgeInterval set to 1\n    \nIt also says that cleanup process is running:\n    \n2017-07-13 10:36:21,266 [myid:] - INFO  [PurgeTask:DatadirCleanupManager$PurgeTask@138] - Purge task started.\n2017-07-13 10:36:21,297 [myid:] - INFO  [PurgeTask:DatadirCleanupManager$PurgeTask@144] - Purge task completed.\n    \nBut actually nothing is deleted.\nEvery service restart, a new file is created.\n    \nThe only parameter I managed to change is preAllocSize, which means the minimum size per file. The default is 64MB. I changed it to 10KB only for testing, and I swa the effect as expected: new files were created with 10KB.\n\nI also tried to create a batch file that will run the following:\n\njava -cp zookeeper-3.4.6.jar;lib/slf4j-api-1.6.1.jar;lib/slf4j-log4j12-1.6.1.jar;lib/log4j-1.2.16.jar;conf org.apache.zookeeper.server.PurgeTxnLog .\\data -n 3\n\nBut it still doesn't do the job.\n\nSee attached cfg and log files\n\nPlease advise.", "tags": [], "bug_id": 61290, "is_private": false, "count": 0, "id": 199756, "time": "2017-07-13T07:39:31Z", "creator": "asteiner@varonis.com", "creation_time": "2017-07-13T07:39:31Z", "attachment_id": 35126}, {"count": 1, "tags": [], "bug_id": 61290, "is_private": false, "id": 199757, "creation_time": "2017-07-13T08:16:10Z", "time": "2017-07-13T08:16:10Z", "creator": "mgrigorov@apache.org", "text": "This is the bug tracker for Apache Tomcat, not Apache Zookeeper.\nI think you should create this report somewhere else.", "attachment_id": null}]