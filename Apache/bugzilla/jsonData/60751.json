[{"count": 0, "tags": [], "bug_id": 60751, "attachment_id": 34769, "is_private": false, "id": 197165, "time": "2017-02-20T15:28:32Z", "creator": "matthias.winzeler@gmail.com", "creation_time": "2017-02-20T15:28:32Z", "text": "Created attachment 34769\nPatch that adds 100.64/10 to internalProxies for Tomcat 8.0.x trunk\n\nAs a service provider, we use the 100.64/10 range quite often for our private networks.\n\nCurrently Tomcat does not include this range in the default value of internalProxies in the classes RemoteIpValve and RemoteIpFilter. Since our Loadbalancer runs on a 100.64 address, it is not covered by the default private networks in Tomcat and the logic of RemoteIpValve is skipped (i.e. setting the ports and the scheme based on X-Forwarded-Proto).\n\nThis patch adds the 100.64/10 range to the default internalProxies.\n\nAs far as I understand, this subnet should be treated the same as the other private networks:\nhttps://en.wikipedia.org/wiki/Reserved_IP_addresses\n\nI'm aware that this can be fixed in the configuration rather easily. \nBut since we're offering CloudFoundry to our customers where the customers deploy their own Tomcats, we do not own these configurations - and we would like to be interoperable with other CloudFoundries that run in different networks and do not require this fix. \n\nWe think it would be nice if Tomcat supports these networks out-of-the-box."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "The documented use for 100.64/10 is for GCN which means addresses in that range are not all within the control of a single entity and it is not, therefore, safe to trust them all by default.", "id": 197423, "time": "2017-03-03T12:21:19Z", "bug_id": 60751, "creation_time": "2017-03-03T12:21:19Z", "is_private": false}]