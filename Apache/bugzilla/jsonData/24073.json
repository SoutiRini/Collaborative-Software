[{"attachment_id": null, "tags": [], "creator": "building@nap.edu", "text": "Based on some Googling this may be a JDK/JRE problem, rather than a\nCatalina-specific issue, but since I'm not real sure how to read Java thread\ndumps in the first place I figure I'll check here first.\n\nWe've had a recurring hang on our standalone 4.1.24 and 4.1.27 installations\n(the binary distributions thereof), using Sun's 1.4.2 JDK.  The server will sit\nquietly for a few days, handling no requests except our local monitoring\nsoftware's periodic \"GET /\" every ten minutes or so.  Once every day or three,\nit'll wedge hard, and requests to the 8080 socket time out.  Nothing shows up in\nlogs (with every debug parameter I could find set to 99), and it takes a kill -9\nto bring it down.  Unfortunately, I can't seem to produce a system state that'll\ninstantly reproduce the problem, so I just have to sit around and wait for a\ncouple of days before it crops up again. :/\n\nI tossed a -QUIT at the most recent occurence on a 4.1.27 install, and the thing\nmy (very inexpert) eye immediately sees is the interaction between threads 23\nand 18 and the locking on the FileWriter (0x456997c8), which doesn't seem to\ncrop up if I dump threads on a normally functioning server.\n\nI'll put the full thread dump in that little URL box up there, in case that's\nmore helpful than what I've pasted.\n\n\"Thread-23\" daemon prio=1 tid=0x0885f958 nid=0x84f waiting for monitor entry\n[4f26a000..4f26a714]\n        at java.io.PrintWriter.println(PrintWriter.java:515)\n        - waiting to lock <0x456997c8> (a java.io.FileWriter)\n        at org.apache.catalina.logger.FileLogger.log(FileLogger.java:293)\n        at org.apache.catalina.core.ContainerBase.log(ContainerBase.java:1418)\n        at\norg.apache.catalina.core.StandardEngineMapper.map(StandardEngineMapper.java:193)\n        at org.apache.catalina.core.ContainerBase.map(ContainerBase.java:1016)\n        at\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:164)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n        at\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n        at\norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n        at\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:534)\n\n\"Thread-18\" daemon prio=1 tid=0x0872be00 nid=0x84f waiting on condition\n[4efe5000..4efe5714]\n        at java.io.Writer.write(Writer.java:126)\n        at java.io.PrintWriter.newLine(PrintWriter.java:254)\n        - locked <0x456997c8> (a java.io.FileWriter)\n        at java.io.PrintWriter.println(PrintWriter.java:405)\n        at java.io.PrintWriter.println(PrintWriter.java:516)\n        - locked <0x456997c8> (a java.io.FileWriter)\n        at org.apache.catalina.logger.FileLogger.log(FileLogger.java:293)\n        at org.apache.catalina.core.ContainerBase.log(ContainerBase.java:1418)\n        at\norg.apache.catalina.core.StandardEngineMapper.map(StandardEngineMapper.java:221)\n        at org.apache.catalina.core.ContainerBase.map(ContainerBase.java:1016)\n        at\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:164)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n        at\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n        at\norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n        at\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:534)", "count": 0, "id": 46156, "time": "2003-10-23T17:56:47Z", "bug_id": 24073, "creation_time": "2003-10-23T17:56:47Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 24073, "attachment_id": null, "text": "Bugger... got another hang, but it looks someplace different.  Trying to format\na timestamp for the logs, I think.  I jes' don't know what to think.\n\n\nFull thread dump Java HotSpot(TM) Client VM (1.4.2-b28 mixed mode):\n\n\"Thread-19\" daemon prio=1 tid=0x4d774408 nid=0x6fc waiting on condition\n[4f382000..4f382714]\n\tat java.text.SimpleDateFormat.compile(SimpleDateFormat.java:581)\n\tat java.text.SimpleDateFormat.initialize(SimpleDateFormat.java:494)\n\tat java.text.SimpleDateFormat.<init>(SimpleDateFormat.java:443)\n\tat org.apache.coyote.tomcat4.CoyoteRequest.<init>(CoyoteRequest.java:197)\n\tat\norg.apache.coyote.tomcat4.CoyoteConnector.createRequest(CoyoteConnector.java:967)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:203)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-18\" daemon prio=1 tid=0x4d775498 nid=0x6fc waiting for monitor entry\n[4f301000..4f301714]\n\tat\norg.apache.tomcat.util.http.FastHttpDateFormat.getCurrentDate(FastHttpDateFormat.java:150)\n\t- waiting to lock <0x456246b8> (a java.text.SimpleDateFormat)\n\tat\norg.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1202)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:676)\n\tat org.apache.coyote.Response.action(Response.java:220)\n\tat\norg.apache.coyote.http11.InternalOutputBuffer.endRequest(InternalOutputBuffer.java:371)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:714)\n\tat org.apache.coyote.Response.action(Response.java:222)\n\tat org.apache.coyote.Response.finish(Response.java:343)\n\tat org.apache.coyote.tomcat4.OutputBuffer.close(OutputBuffer.java:326)\n\tat org.apache.coyote.tomcat4.CoyoteResponse.finishResponse(CoyoteResponse.java:500)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:224)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-17\" daemon prio=1 tid=0x4d7758e0 nid=0x6fc runnable [4f280000..4f280714]\n\tat java.net.PlainSocketImpl.socketAccept(Native Method)\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:353)\n\t- locked <0x44dedbc0> (a java.net.PlainSocketImpl)\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:448)\n\tat java.net.ServerSocket.accept(ServerSocket.java:419)\n\tat\norg.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(DefaultServerSocketFactory.java:107)\n\tat\norg.apache.tomcat.util.net.PoolTcpEndpoint.acceptSocket(PoolTcpEndpoint.java:356)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:529)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-16\" daemon prio=1 tid=0x4d775780 nid=0x6fc in Object.wait()\n[4f094000..4f094714]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x44930308> (a\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:595)\n\t- locked <0x44930308> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-15\" daemon prio=1 tid=0x080abaf0 nid=0x6fc waiting on condition\n[4f013000..4f013714]\n\tat java.util.Date.getTime(Date.java:826)\n\tat java.util.Calendar.setTime(Calendar.java:902)\n\tat java.text.SimpleDateFormat.format(SimpleDateFormat.java:782)\n\tat java.text.SimpleDateFormat.format(SimpleDateFormat.java:775)\n\tat java.text.DateFormat.format(DateFormat.java:314)\n\tat\norg.apache.tomcat.util.http.FastHttpDateFormat.getCurrentDate(FastHttpDateFormat.java:152)\n\t- locked <0x456246b8> (a java.text.SimpleDateFormat)\n\tat\norg.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1202)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:676)\n\tat org.apache.coyote.Response.action(Response.java:220)\n\tat\norg.apache.coyote.http11.InternalOutputBuffer.endRequest(InternalOutputBuffer.java:371)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:714)\n\tat org.apache.coyote.Response.action(Response.java:222)\n\tat org.apache.coyote.Response.finish(Response.java:343)\n\tat org.apache.coyote.tomcat4.OutputBuffer.close(OutputBuffer.java:326)\n\tat org.apache.coyote.tomcat4.CoyoteResponse.finishResponse(CoyoteResponse.java:500)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:224)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-14\" daemon prio=1 tid=0x080aaf38 nid=0x6fc waiting on condition\n[4e8f9000..4e8f9714]\n\tat java.net.Socket.isClosed(Socket.java:1358)\n\tat java.net.Socket.setSoTimeout(Socket.java:919)\n\t- locked <0x457d5e40> (a java.net.Socket)\n\tat\norg.apache.tomcat.util.net.PoolTcpEndpoint.setSocketOptions(PoolTcpEndpoint.java:470)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:564)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-13\" daemon prio=1 tid=0x080aa380 nid=0x6fc waiting on condition\n[4e878000..4e878714]\n\tat org.apache.tomcat.util.buf.CharChunk.setChars(CharChunk.java:175)\n\tat org.apache.tomcat.util.buf.MessageBytes.setChars(MessageBytes.java:192)\n\tat org.apache.coyote.http11.Http11Processor.parseHost(Http11Processor.java:1037)\n\tat\norg.apache.coyote.http11.Http11Processor.prepareRequest(Http11Processor.java:974)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:587)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-12\" daemon prio=1 tid=0x0859cb78 nid=0x6fc waiting on condition\n[4e28d000..4e28e714]\n\tat java.util.Date.getTimeImpl(Date.java:830)\n\tat java.util.Date.getTime(Date.java:826)\n\tat\norg.apache.catalina.servlets.DefaultServlet$ResourceInfo.set(DefaultServlet.java:2289)\n\tat\norg.apache.catalina.servlets.DefaultServlet$ResourceInfo.<init>(DefaultServlet.java:2219)\n\tat\norg.apache.catalina.servlets.DefaultServlet.serveResource(DefaultServlet.java:921)\n\tat org.apache.catalina.servlets.DefaultServlet.doGet(DefaultServlet.java:506)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2416)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"MonitorRunnable\" daemon prio=1 tid=0x08652298 nid=0x6fc waiting on condition\n[4ef92000..4ef92714]\n\tat\norg.apache.tomcat.util.threads.ThreadPool.checkSpareControllers(ThreadPool.java:366)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$MonitorRunnable.run(ThreadPool.java:513)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-10\" daemon prio=1 tid=0x08651240 nid=0x6fc runnable [4ef11000..4ef11714]\n\tat java.net.PlainSocketImpl.socketAccept(Native Method)\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:353)\n\t- locked <0x45573070> (a java.net.PlainSocketImpl)\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:448)\n\tat java.net.ServerSocket.accept(ServerSocket.java:419)\n\tat org.apache.jk.common.ChannelSocket.accept(ChannelSocket.java:268)\n\tat org.apache.jk.common.ChannelSocket.acceptConnections(ChannelSocket.java:531)\n\tat org.apache.jk.common.SocketAcceptor.runIt(ChannelSocket.java:660)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-9\" daemon prio=1 tid=0x086506a0 nid=0x6fc in Object.wait()\n[4ee90000..4ee90714]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x45573568> (a\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:595)\n\t- locked <0x45573568> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-8\" daemon prio=1 tid=0x0864fbb8 nid=0x6fc in Object.wait()\n[4ee0f000..4ee0f714]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x455733d0> (a\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:595)\n\t- locked <0x455733d0> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-7\" daemon prio=1 tid=0x0864f900 nid=0x6fc in Object.wait()\n[4ed8e000..4ed8e714]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x45573238> (a\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:595)\n\t- locked <0x45573238> (a org.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"MonitorRunnable\" daemon prio=1 tid=0x0864d328 nid=0x6fc in Object.wait()\n[4ed0d000..4ed0d714]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x45579f00> (a\norg.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$MonitorRunnable.run(ThreadPool.java:503)\n\t- locked <0x45579f00> (a org.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-5\" daemon prio=1 tid=0x0864c630 nid=0x6fc waiting on condition\n[4ec8c000..4ec8c714]\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:668)\n\tat org.apache.coyote.Response.action(Response.java:222)\n\tat org.apache.coyote.Response.finish(Response.java:343)\n\tat org.apache.coyote.tomcat4.OutputBuffer.close(OutputBuffer.java:326)\n\tat org.apache.coyote.tomcat4.CoyoteResponse.finishResponse(CoyoteResponse.java:500)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:224)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-4\" daemon prio=1 tid=0x0864ba78 nid=0x6fc waiting on condition\n[4ec0a000..4ec0b714]\n\tat org.apache.coyote.tomcat4.CoyoteResponse.isCommitted(CoyoteResponse.java:627)\n\tat org.apache.coyote.tomcat4.CoyoteResponse.setHeader(CoyoteResponse.java:1155)\n\tat org.apache.coyote.tomcat4.CoyoteResponse.sendRedirect(CoyoteResponse.java:1116)\n\tat\norg.apache.coyote.tomcat4.CoyoteResponseFacade.sendRedirect(CoyoteResponseFacade.java:345)\n\tat\norg.apache.catalina.servlets.DefaultServlet.serveResource(DefaultServlet.java:964)\n\tat org.apache.catalina.servlets.DefaultServlet.doGet(DefaultServlet.java:506)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2416)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-3\" daemon prio=1 tid=0x0864afa0 nid=0x6fc waiting on condition\n[4eb8a000..4eb8a714]\n\tat java.net.PlainSocketImpl.isClosedOrPending(PlainSocketImpl.java:586)\n\tat java.net.PlainSocketImpl.available(PlainSocketImpl.java:396)\n\t- locked <0x456e27c0> (a java.net.PlainSocketImpl)\n\tat java.net.SocketInputStream.available(SocketInputStream.java:217)\n\tat org.apache.tomcat.util.net.TcpConnection.shutdownInput(TcpConnection.java:138)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:406)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-2\" daemon prio=1 tid=0x0864a640 nid=0x6fc waiting on condition\n[4eb09000..4eb09714]\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:636)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"HostConfig[localhost]\" daemon prio=1 tid=0x08649938 nid=0x6fc waiting on\ncondition [4ea88000..4ea88714]\n\tat java.sql.Timestamp.<init>(Timestamp.java:77)\n\tat org.apache.catalina.logger.FileLogger.log(FileLogger.java:275)\n\tat org.apache.catalina.startup.HostConfig.log(HostConfig.java:677)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:392)\n\tat org.apache.catalina.startup.HostConfig.run(HostConfig.java:851)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"StandardManager[]\" daemon prio=1 tid=0x086492d8 nid=0x6fc waiting on condition\n[4ea07000..4ea07714]\n\tat java.lang.Thread.sleep(Native Method)\n\tat\norg.apache.catalina.session.StandardManager.threadSleep(StandardManager.java:810)\n\tat org.apache.catalina.session.StandardManager.run(StandardManager.java:869)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"StandardManager[/xmap]\" daemon prio=1 tid=0x08618888 nid=0x6fc waiting on\ncondition [4e986000..4e986714]\n\tat java.lang.Thread.sleep(Native Method)\n\tat\norg.apache.catalina.session.StandardManager.threadSleep(StandardManager.java:810)\n\tat org.apache.catalina.session.StandardManager.run(StandardManager.java:869)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"StandardManager[/rubicon]\" daemon prio=1 tid=0x084875b0 nid=0x6fc waiting on\ncondition [4e6d2000..4e6d2714]\n\tat java.lang.Thread.sleep(Native Method)\n\tat\norg.apache.catalina.session.StandardManager.threadSleep(StandardManager.java:810)\n\tat org.apache.catalina.session.StandardManager.run(StandardManager.java:869)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"StandardManager[/gateway]\" daemon prio=1 tid=0x08493d90 nid=0x6fc waiting on\ncondition [4e451000..4e451714]\n\tat java.lang.Thread.sleep(Native Method)\n\tat\norg.apache.catalina.session.StandardManager.threadSleep(StandardManager.java:810)\n\tat org.apache.catalina.session.StandardManager.run(StandardManager.java:869)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"StandardManager[/gwp]\" daemon prio=1 tid=0x08167900 nid=0x6fc waiting on\ncondition [4e0d5000..4e0d5714]\n\tat java.lang.Thread.sleep(Native Method)\n\tat\norg.apache.catalina.session.StandardManager.threadSleep(StandardManager.java:810)\n\tat org.apache.catalina.session.StandardManager.run(StandardManager.java:869)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"StandardManager[/skins]\" daemon prio=1 tid=0x083890d0 nid=0x6fc waiting on\ncondition [4dc25000..4dc25714]\n\tat java.lang.Thread.sleep(Native Method)\n\tat\norg.apache.catalina.session.StandardManager.threadSleep(StandardManager.java:810)\n\tat org.apache.catalina.session.StandardManager.run(StandardManager.java:869)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"StandardManager[/manager]\" daemon prio=1 tid=0x083862f8 nid=0x6fc waiting on\ncondition [4dba4000..4dba4714]\n\tat java.lang.Thread.sleep(Native Method)\n\tat\norg.apache.catalina.session.StandardManager.threadSleep(StandardManager.java:810)\n\tat org.apache.catalina.session.StandardManager.run(StandardManager.java:869)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"StandardManager[/admin]\" daemon prio=1 tid=0x0836a090 nid=0x6fc waiting on\ncondition [4db23000..4db23714]\n\tat java.lang.Thread.sleep(Native Method)\n\tat\norg.apache.catalina.session.StandardManager.threadSleep(StandardManager.java:810)\n\tat org.apache.catalina.session.StandardManager.run(StandardManager.java:869)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Signal Dispatcher\" daemon prio=1 tid=0x080a5b80 nid=0x6fc waiting on condition\n[0..0]\n\n\"Finalizer\" daemon prio=1 tid=0x08090d38 nid=0x6fc in Object.wait()\n[4c9f4000..4c9f4714]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x44cf81d8> (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n\t- locked <0x44cf81d8> (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\"Reference Handler\" daemon prio=1 tid=0x08090138 nid=0x6fc in Object.wait()\n[4c973000..4c973714]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0x44cf8240> (a java.lang.ref.Reference$Lock)\n\tat java.lang.Object.wait(Object.java:429)\n\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)\n\t- locked <0x44cf8240> (a java.lang.ref.Reference$Lock)\n\n\"main\" prio=1 tid=0x08052498 nid=0x6fc runnable [bfffc000..bfffd178]\n\tat java.net.PlainSocketImpl.socketAccept(Native Method)\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:353)\n\t- locked <0x455cf9e0> (a java.net.PlainSocketImpl)\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:448)\n\tat java.net.ServerSocket.accept(ServerSocket.java:419)\n\tat org.apache.catalina.core.StandardServer.await(StandardServer.java:527)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:521)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\n\n\"VM Thread\" prio=1 tid=0x0808ee30 nid=0x6fc runnable \n\n\"VM Periodic Task Thread\" prio=1 tid=0x080a8388 nid=0x6fc waiting on condition \n\"Suspend Checker Thread\" prio=1 tid=0x080a51b0 nid=0x6fc runnable \n", "id": 46264, "time": "2003-10-24T19:03:16Z", "creator": "building@nap.edu", "creation_time": "2003-10-24T19:03:16Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 24073, "is_private": false, "text": "Might be worth trying the IBM JDK. There have been some positive experiences \n(RH7 -Remy's comment in bug22151) and some negative (RH9 - \nhttp://marc.theaimsgroup.com/?l=tomcat-dev&m=106633448925371&w=2)\n\nAnother option to try would be to try a 1.3.x JDK.", "id": 47215, "time": "2003-11-11T20:48:21Z", "creator": "medthomas@ntlworld.com", "creation_time": "2003-11-11T20:48:21Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 24073, "is_private": false, "count": 3, "id": 47217, "time": "2003-11-11T20:59:09Z", "creator": "building@nap.edu", "creation_time": "2003-11-11T20:59:09Z", "text": "I actually went and tried the IBM kit.  It took a while, but it eventually\nwedged in the same fashion.\n\nMy current suspect is actually NPTL, since we've tried an identical Tomcat/Java\nsetup on some RH7.x servers and had no issues, and the 1.4 variants I've tried\nall try to use it.  That would seem to be the most glaring difference that would\nbe present as a result of the jump in environments.\n\nI'm running a 4.1.27 with Sun's 1.4.2 and NPTL disabled, which you can\nsupposedly do by setting LD_ASSUME_KERNEL=2.4.1 in your environment before\ninvoking java.  Can't tell whether that's actually in effect, though it's been\nsolid for four days so far."}, {"attachment_id": null, "tags": [], "bug_id": 24073, "is_private": false, "count": 4, "id": 47222, "time": "2003-11-11T21:12:20Z", "creator": "remm@apache.org", "creation_time": "2003-11-11T21:12:20Z", "text": "The problems with the posix threads is now a known issue, with the workaround\nbeing what you describe."}, {"count": 5, "tags": [], "bug_id": 24073, "attachment_id": null, "text": "Closing this as this is not a tomcat issue.", "id": 47231, "time": "2003-11-11T22:31:45Z", "creator": "medthomas@ntlworld.com", "creation_time": "2003-11-11T22:31:45Z", "is_private": false}]