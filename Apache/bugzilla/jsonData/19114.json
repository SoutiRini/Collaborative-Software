[{"count": 0, "tags": [], "bug_id": 19114, "is_private": false, "text": "When a forwarded servlet throws an exception other than ServletException or \nIOException, the thrown exception is lost. This is due to the line:\n\nthrow new ServletException(sm.getString(\"dispatcher.forwardException\", t));\n(found in org/apache/tomcat/facade/RequestDispatcherImpl.java:210)\n\nthe earlier catched t is here not passed into the constructor of \nServletException but into getString.\n\nTo reproduce construct a servlet that throws an Exception (other than \nServletException and IOException) and another servlet that forwards to it. You \nwill get just a forwardException (if you have the proper locale strings \ninstalled!) but the originally thrown exception will get lost forever.\n\nWe use a local patch that replaces the above line with:\n\nTomcat 3.2.3 does NOT fix this problem", "id": 35441, "time": "2003-04-17T16:21:13Z", "creator": "jarekk@axit.pl", "creation_time": "2003-04-17T16:21:13Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 19114, "is_private": false, "text": "This seems fixed in Tomcat 3.3.2\n\nFrom org.apache.tomcat.facade.RequestDispatcherImpl :\n\npublic void forward(ServletRequest request, ServletResponse response)\n\tthrows ServletException, IOException\n    {\n\tif( System.getSecurityManager() != null ) {\n\t    try {\n\t\tforwardAction.prepare( request, response );\n\t\tjdk11Compat.doPrivileged( forwardAction, accessControlContext );\n\t    } catch( Exception e) {\n\t\twrapException( e, null );\n\t    }\n\t} else {\n\t    doForward(request,response);\n\t}\n    }\n\n// Rethrow original error if present \n    private void wrapException(Exception ex, String msg)\n\tthrows IOException, ServletException, RuntimeException\n    {\n\tif ( ex instanceof IOException )\n\t    throw (IOException) ex;\n\tif ( ex instanceof RuntimeException )\n\t    throw (RuntimeException) ex;\n\telse if ( ex instanceof ServletException )\n\t    throw (ServletException) ex;\n\telse\n\t    if( msg==null )\n\t\tthrow new ServletException(ex );\n\t    else\n\t\tthrow new ServletException(msg, ex );\n    }", "id": 93692, "time": "2006-09-17T15:45:50Z", "creator": "sriramnrn@gmail.com", "creation_time": "2006-09-17T15:45:50Z", "attachment_id": null}]