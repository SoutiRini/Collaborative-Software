[{"count": 0, "tags": [], "bug_id": 42617, "text": "I try to apply FOP 0.93 (the stable released version) on the file\nhttp://xmlgraphics.apache.org/fop/dev/fo/embedding.fo to get a PDF result and I\nget a ClassCastException when the DOM tree is built for an embedded SVG graphic:\n\n\nJun 8, 2007 5:50:56 PM org.apache.fop.cli.Main startFOP\nSEVERE: Exception\njavax.xml.transform.TransformerException: java.lang.ClassCastException:\norg.apache.batik.dom.GenericElement cannot be ca\nst to org.w3c.dom.svg.SVGSVGElement\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:168)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:160)\n        at org.apache.fop.cli.Main.main(Main.java:191)\n\n---------\n\njavax.xml.transform.TransformerException: java.lang.ClassCastException:\norg.apache.batik.dom.GenericElement cannot be ca\nst to org.w3c.dom.svg.SVGSVGElement\n        at com.icl.saxon.IdentityTransformer.transform(IdentityTransformer.java:61)\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:165)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:160)\n        at org.apache.fop.cli.Main.main(Main.java:191)\nCaused by: java.lang.ClassCastException: org.apache.batik.dom.GenericElement\ncannot be cast to org.w3c.dom.svg.SVGSVGEle\nment\n        at org.apache.batik.dom.svg.SVGOMDocument.getRootElement(Unknown Source)\n        at\norg.apache.fop.fo.extensions.svg.SVGElement.getDimension(SVGElement.java:107)\n        at\norg.apache.fop.fo.flow.InstreamForeignObject.prepareIntrinsicSize(InstreamForeignObject.java:103)\n        at\norg.apache.fop.fo.flow.InstreamForeignObject.getIntrinsicWidth(InstreamForeignObject.java:115)\n        at\norg.apache.fop.layoutmgr.inline.AbstractGraphicsLayoutManager.getInlineArea(AbstractGraphicsLayoutManager.jav\na:129)\n        at\norg.apache.fop.layoutmgr.inline.AbstractGraphicsLayoutManager.getNextKnuthElements(AbstractGraphicsLayoutMana\nger.java:238)\n        at\norg.apache.fop.layoutmgr.inline.LineLayoutManager.collectInlineKnuthElements(LineLayoutManager.java:658)\n        at\norg.apache.fop.layoutmgr.inline.LineLayoutManager.getNextKnuthElements(LineLayoutManager.java:593)\n        at\norg.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextKnuthElements(BlockStackingLayoutManager.java:284)\n\n        at\norg.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:113)\n        at\norg.apache.fop.layoutmgr.FlowLayoutManager.getNextKnuthElements(FlowLayoutManager.java:106)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager$PageBreaker.getNextKnuthElements(PageSequenceLayoutManager\n.java:272)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.getNextBlockList(AbstractBreaker.java:554)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager$PageBreaker.getNextBlockList(PageSequenceLayoutManager.jav\na:264)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:301)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:263)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:157)\n        at\norg.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:385)\n        at\norg.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:148)\n        at\norg.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:378)\n        at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:194)\n        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)\n        at com.icl.saxon.IdentityTransformer.transform(IdentityTransformer.java:59)\n        ... 4 more\n---------\njava.lang.ClassCastException: org.apache.batik.dom.GenericElement cannot be cast\nto org.w3c.dom.svg.SVGSVGElement\n        at org.apache.batik.dom.svg.SVGOMDocument.getRootElement(Unknown Source)\n        at\norg.apache.fop.fo.extensions.svg.SVGElement.getDimension(SVGElement.java:107)\n        at\norg.apache.fop.fo.flow.InstreamForeignObject.prepareIntrinsicSize(InstreamForeignObject.java:103)\n        at\norg.apache.fop.fo.flow.InstreamForeignObject.getIntrinsicWidth(InstreamForeignObject.java:115)\n        at\norg.apache.fop.layoutmgr.inline.AbstractGraphicsLayoutManager.getInlineArea(AbstractGraphicsLayoutManager.jav\na:129)\n        at\norg.apache.fop.layoutmgr.inline.AbstractGraphicsLayoutManager.getNextKnuthElements(AbstractGraphicsLayoutMana\nger.java:238)\n        at\norg.apache.fop.layoutmgr.inline.LineLayoutManager.collectInlineKnuthElements(LineLayoutManager.java:658)\n        at\norg.apache.fop.layoutmgr.inline.LineLayoutManager.getNextKnuthElements(LineLayoutManager.java:593)\n        at\norg.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextKnuthElements(BlockStackingLayoutManager.java:284)\n\n        at\norg.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:113)\n        at\norg.apache.fop.layoutmgr.FlowLayoutManager.getNextKnuthElements(FlowLayoutManager.java:106)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager$PageBreaker.getNextKnuthElements(PageSequenceLayoutManager\n.java:272)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.getNextBlockList(AbstractBreaker.java:554)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager$PageBreaker.getNextBlockList(PageSequenceLayoutManager.jav\na:264)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:301)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:263)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:157)\n        at\norg.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:385)\n        at\norg.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:148)\n        at\norg.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:378)\n        at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:194)\n        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)\n        at com.icl.saxon.IdentityTransformer.transform(IdentityTransformer.java:59)\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:165)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:160)\n        at org.apache.fop.cli.Main.main(Main.java:191)\n\n\nI have Xerces-J 2.9.0 and Saxon 6.5 in the classpath of the command line which\napplies FOP to embedding.fo and I try to get a PDF result.", "id": 104199, "time": "2007-06-08T07:51:45Z", "creator": "sorin@oxygenxml.com", "creation_time": "2007-06-08T07:51:45Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "sorin@oxygenxml.com", "text": "I should add that it is a valid FO document which is published on the Apache FOP\nwebsite as an example of embedded SVG graphic.", "id": 104202, "time": "2007-06-08T08:12:58Z", "bug_id": 42617, "creation_time": "2007-06-08T08:12:58Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 42617, "attachment_id": null, "id": 104711, "time": "2007-06-25T23:33:39Z", "creator": "avernet@scdi.org", "creation_time": "2007-06-25T23:33:39Z", "is_private": false, "text": "I am hitting the same issue. Any update on this one?"}, {"count": 3, "tags": [], "bug_id": 42617, "attachment_id": null, "id": 157334, "time": "2012-04-07T01:41:36Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:41:36Z", "is_private": false, "text": "resetting P2 open bugs to P3 pending further review"}, {"count": 4, "tags": [], "bug_id": 42617, "text": "this does not happen anymore with 1.0, 1.1rc1 and trunk. in all cases the PDF is correctly generated.", "id": 161384, "time": "2012-08-14T17:17:24Z", "creator": "lmpmbernardo@gmail.com", "creation_time": "2012-08-14T17:17:24Z", "is_private": false, "attachment_id": null}]