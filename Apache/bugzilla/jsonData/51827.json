[{"count": 0, "tags": [], "bug_id": 51827, "attachment_id": 27502, "text": "Created attachment 27502\nTwo jmeter tests that cause the problem and an output log from a run I did\n\nWhen running the a tests with the HTTP Sampler - the first execution the sample takes significantly longer than subsequent ones.\n\nThe two attached test files illustrate the problem using a publicly facing URL.  Both were built using the Jmeter proxy in the GUI.   high_startup.jmx was built with Jmeter 2.4 and high_startup_2_5.jmx was built with Jmeter 2.5\n\nThe log file shows the result of 5 consecutive runs of high_startup.jmx with Jmeter 2.5.  All properties in Jmeter are default.  This was run command line on Linux with:\n\n~/jakarta-jmeter-2.5/bin/jmeter -n -t ./high_startup.jmx -l high_startup.log\n\nSimilar behavior is experienced when running the tests on the GUI on Windows.", "id": 149274, "time": "2011-09-15T13:31:11Z", "creator": "bnicholson@hp.com", "creation_time": "2011-09-15T13:31:11Z", "is_private": false}, {"count": 1, "tags": [], "creator": "sebb@apache.org", "text": "The test plan uses Keep Alive, which is not a fair test, because the second and subsequent samples will re-use the connection.\n\nAlso, Follw Redirects make it harder to establish what is happening.\n\nWith these changes, the overhead of the first request is much reduced, but is still present.\n\nHowever, if the URL is chamnged to https://mail.google.com/ the time for the first sample is very much shorter.\n\nAny overhead in JMeter will not vary between hosts, so the additional time must be due to the server under test.\n\nTry using a protocol analyser such as Wireshark to see what is happening.", "id": 149300, "time": "2011-09-15T23:44:10Z", "bug_id": 51827, "creation_time": "2011-09-15T23:44:10Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "text": "Hello,\nI think startup time in this sampler is related also to SSL.\nBy default with SSL, SSLContext in JMEter is only computed the first time per thread group, that can explain the pb.\n\nQuestions:\n- Did you face this issue initially with an HTTPS URL or not ?\n- Can you try to get Trunk version of JMeter and set in jmeter.properties:\n1) https.use.cached.ssl.context=false\n2) Choose HC4 or HC3.1 implementation\n\nSee if you have same behaviour.\nI tested with this and I have almost same sampler times.\n\nRegards\nPhilippe", "id": 149476, "time": "2011-09-19T07:15:36Z", "bug_id": 51827, "creation_time": "2011-09-19T07:15:36Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 51827, "text": "I've tried it with trunk, using https.use.cached.ssl.context=false with both HC4 and HC3.1 and the results were the same.  High start up time on first request - the rest were normal.", "id": 149848, "time": "2011-09-27T15:31:42Z", "creator": "bnicholson@hp.com", "creation_time": "2011-09-27T15:31:42Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "is_private": false, "id": 149982, "time": "2011-09-30T14:10:10Z", "bug_id": 51827, "creation_time": "2011-09-30T14:10:10Z", "text": "Hello,\nI noticed issue occurs when using HOST instead of IP.\nAnd it also occurs at first run for first sample of a new host but not at consequent runs.\n\nI suspect issue may related to DNS caching inside JVM but couldn't confirm it.\nI Added these 2 JVM options:\n-Dnetworkaddress.cache.ttl=1\n-Dsun.net.inetaddr.ttl=1\n\nAdd a Constant timer of 1.1s to make cache expire.\nBut issue is still here.\n\nIt seems to be increased in HTTPS mode which I explain this time by the init time taken by JavaKeyStore#engineLoad\n\n\nBut I think it is really a minor issue.  \n\nRegards\nPhilippe"}, {"count": 5, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Created attachment 27832\nTest plan with Java Sampler showing no issue in this mode", "id": 150811, "time": "2011-10-20T19:17:28Z", "bug_id": 51827, "creation_time": "2011-10-20T19:17:28Z", "is_private": false, "attachment_id": 27832}, {"count": 6, "tags": [], "bug_id": 51827, "attachment_id": null, "text": "Not sure we can do anything about that.", "id": 151110, "time": "2011-11-01T13:14:52Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-11-01T13:14:52Z", "is_private": false}]