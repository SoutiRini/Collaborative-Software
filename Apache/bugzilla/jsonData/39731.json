[{"count": 0, "tags": [], "bug_id": 39731, "text": "Hi all,\n\nI have two problems that need your help.\n\n1) I have below configure as part of my httpd.conf\n\nThis work fine when i enter \"http://172.18.20.23\", the page will redirect \nto \"https://172.18.20.23/subdir/\". \nBut it doens't redirect to the page when i enter \"https://172.18.20.23\", \ninstead the apache default page is showed.\n\n\n2) When I include the 'RewriteEngine on' in the VirtualHost, the browser will \nkeep looping and never ending. \nut it work fine when after I take out the 'RewriteEngine on' in VirtualHost. \n\nI have this configuration in my previous apache1.3.33 which never has this \nproblem. I doubt the configuration has changed in Apache2.\n\n################\nRewriteEngine on\nRewriteLog \"/opt/apache2.0.58/logs/rewrite.log\"\nRewriteLogLevel 9\n\n\nRewriteCond %{REQUEST_METHOD} ^TRACE\nRewriteRule .* - [F]\n\nRewriteCond %{HTTP_HOST}   ^172.18.20.23\nRewriteRule ^/(.*)         https://%{HTTP_HOST}/subdir/  [R]\n\n\n<IfDefine SSL>\n\t<VirtualHost 172.18.20.23:443>\n\t\tRewriteEngine on\n\t\tRewriteOptions inherit\n\t\t.........\n\t</VirtualHost>\n</IfDefine>\n################", "id": 89807, "time": "2006-06-06T06:27:32Z", "creator": "cc.chen@fsd.com.my", "creation_time": "2006-06-06T06:27:32Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 39731, "text": "This is a configuration issue, not a bug.\n\nYour inherited ruleset is always true, if HTTP_HOST starts with 172.18.20.23\nThat is also true for a request of https://172.18.20.23/subdir/ which would be\nredirected again and again to https://172.18.20.23/subdir/.\n\nYou should see that in your RewriteLog. You might want to use\n\nRewriteCond %{REQUEST_METHOD} =TRACE\nRewriteRule ^ - [F]\n\nRewriteCond %{HTTP_HOST}   ^172.18.20.23\nRewriteRule ^ https://%{HTTP_HOST}/subdir/  [R]\n\n<IfDefine SSL>\n\t<VirtualHost 172.18.20.23:443>\n\t\tRewriteEngine on\n\t\tRewriteCond %{REQUEST_METHOD} =TRACE\n\t\tRewriteRule ^ - [F]\n\n\t\tRewriteCond %{HTTP_HOST}   ^172.18.20.23\n\t\t# exclude everything starting with /subdir/\n\t\tRewriteRule !^/subdir/ https://%{HTTP_HOST}/subdir/  [R]\n\t\t.........\n\t</VirtualHost>\n</IfDefine>", "id": 89823, "time": "2006-06-06T16:54:17Z", "creator": "bobsiegen@googlemail.com", "creation_time": "2006-06-06T16:54:17Z", "is_private": false, "attachment_id": null}]