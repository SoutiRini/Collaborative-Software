[{"count": 0, "tags": [], "bug_id": 53573, "is_private": false, "text": "Created attachment 29082\nThe above text is original FOP output. The below text is CTL enbaled text\n\n1. In order to make Thai glyph substitution work, the language tag must be \"dflt\" instead of \"th\". This is because many popular Thai font use \"dflt\".\n2. Using \"dflt\" language, both GSUB and GPOS are used. The problem is after it used, all glyph are placed further to the right.\n\nNotes:\n1. Many Thai combining glyph have negative alignment. I suspect this is involved in miss alignment calculation.\n2. The ratio of displacement seem irrational. If it shifted to the left by the same ratio, it is still invalid.\n\nQuestion:\nShould \"dflt\" being load by default ?\n\nXML Data for testing:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<data>\u0e01\u0e38\u0e0d\u0e0d\u0e39\u0e10\u0e10\u0e39\u0e0f\u0e0f\u0e39\u0e0e\u0e0e\u0e39\u0e1a\u0e1a\u0e48\u0e1a\u0e35\u0e48\u0e1b\u0e1b\u0e48\u0e1b\u0e35\u0e48\u0e01\u0e33\u0e1b\u0e33\u0e16\u0e4d\u0e49\u0e32</data>\n\nXSLT for testing:\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\n<xsl:stylesheet version=\"1.0\"\n\txmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n\t<xsl:template match=\"/\">\n\t\t<fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\">\n\t\t\t<fo:layout-master-set>\n\t\t\t\t<fo:simple-page-master master-name=\"A4\">\n\t\t\t\t\t<fo:region-body />\n\t\t\t\t</fo:simple-page-master>\n\t\t\t</fo:layout-master-set>\n\n\t\t\t<fo:page-sequence master-reference=\"A4\">\n\t\t\t\t<fo:flow flow-name=\"xsl-region-body\">\n\t\t\t\t\t<fo:block script=\"thai\" language=\"dflt\" font-size=\"32pt\" font-family=\"AngsanaUPC\">\n\t\t\t\t\t\t<xsl:value-of select=\"data\" />\n\t\t\t\t\t</fo:block>\n\t\t\t\t</fo:flow>\n\t\t\t</fo:page-sequence>\n\t\t</fo:root>\n\t</xsl:template>\n\n</xsl:stylesheet>\n\nThe fop.xconf has added font into fonts section of applicaton/pdf renderer:\n<font embed-url=\"file:///c:/windows/fonts/angsau.ttf\" kerning=\"yes\">\n  <font-triplet name=\"AngsanaUPC\" style=\"normal\" weight=\"normal\"/>\n</font>\n\nThe Java code used to reproduce:\n\nFopFactory fopFac = FopFactory.newInstance(new File(\"fop.xconf\"));\nOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(\"c:\\\\temp\\\\fopThai.pdf\"));\n\t\t\t\nFop fop = fopFac.newFop(MimeConstants.MIME_PDF, outputStream);\n\t\t\t\nTransformerFactory transFac = TransformerFactory.newInstance();\nSource xslData = new StreamSource(new File(\"data.xslt\"));\nTransformer trans = transFac.newTransformer(xslData);\nResult res = new SAXResult(fop.getDefaultHandler());\n\nSource xmlData = new StreamSource(new File(\"thaidata.xml\"));\ntrans.transform(xmlData, res);\n\t\t\t\noutputStream.close();", "id": 160739, "time": "2012-07-20T07:22:48Z", "creator": "natta@th.ibm.com", "creation_time": "2012-07-20T07:22:48Z", "attachment_id": 29082}, {"count": 1, "attachment_id": null, "creator": "med1985@gmail.com", "text": "This certainly seems like an interesting issue and you'll have to excuse my ignorance on this matter, but are the GPOS and GSUB absolutely necessary for ALL Thai script? I'm sure we have users working with Thai that used FOP prior to the inclusion of the complex scripts feature (which takes GPOS/GSUB into account.)\n\nIf I've just exposed my ignorance, my apologies, but my suggestion was going to be to try using FOP-1.0 and see if it behaves as expected. You will however have to change your Java slightly due to modifications to the API, but there are plenty of examples and documentation on the website about how to do this.", "id": 160741, "time": "2012-07-20T07:45:38Z", "bug_id": 53573, "creation_time": "2012-07-20T07:45:38Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "natta@th.ibm.com", "attachment_id": null, "id": 160747, "time": "2012-07-20T08:11:18Z", "bug_id": 53573, "creation_time": "2012-07-20T08:11:18Z", "is_private": false, "text": "Thanks for the promptly reply.\nYes, i have tested with FOP 1.0 and it product exactly the same as the first line of the picture i attached.\n\nThere are few Thai fonts that aren't using GSUB and GPOS.\nThose few deploy a default glyph position that will never collide with other glyph. However, it gave a result with problem that call \"floating tone mark\".\nThese few fonts also leave the glyph determination work to LayoutEngine.\nIt expects LayoutEngine to pick correct glyph by itself. In order to accomplish this, it need State Machine. You can take a peek at ICU4C LayoutEngine. There is a ThaiLayoutEngine there. However, ICU4J doesn't have one.\n\nNote:\n1. In order to avoid GSUB and GPOS it require the font to use Unicode PVA.\nAdobe recommends to avoid it as it is non-standard. The best example of problem is ICU4C uses different code point compare to Adobe that assign to Thai glyph.ICU gives more correct result.\n2. All known Thai fonts in MS.Windows use GSUB and GPOS except Arial Unicode.\n3. All known True Type fonts in Linux use GSUB and GPOS."}, {"count": 3, "tags": [], "creator": "gadams@apache.org", "attachment_id": null, "id": 160760, "time": "2012-07-20T14:47:34Z", "bug_id": 53573, "creation_time": "2012-07-20T14:47:34Z", "is_private": false, "text": "Please provide the following:\n\n* input FO file (not XSLT/XML files)\n* output PDF file\n* version of FOP you are using\n* any console output from FOP\n\nAlso, note that you should not specify script=\"thai\" or language=\"dflt\", as doing so may prevent application of correct GSUB/GPOS tables (assuming you are using FOP1.1rc1 or current trunk).\n\nAlso, note that [1] does not yet list thai as supported (by the recent complex scripts addition). In fact, the GSUB/GPOS features of thai fonts will be enabled if you do not specify script or specify script=\"auto\" and if you do not specify language; however, line breaking does not yet take into account legitimate thai break candidates, and I have not yet tested thai to my satisfaction, so I did not list thai as supported yet.\n\nhttp://xmlgraphics.apache.org/fop/1.1rc1/complexscripts.html#supported_scripts"}, {"count": 4, "tags": [], "bug_id": 53573, "attachment_id": 29090, "id": 160763, "time": "2012-07-20T15:39:20Z", "creator": "gadams@apache.org", "creation_time": "2012-07-20T15:39:20Z", "is_private": false, "text": "Created attachment 29090\ntest FO file showing gsub/gpos application\n\nThis FO shows the same data with Angsana UPC with various settings of language and script. Note that with or without language='dflt' and with or without script='thai' does not impact the results. However, specifying language='th' does prevent gsub/gpos application."}, {"count": 5, "tags": [], "text": "Created attachment 29091\ntest PDF file showing gsub/gpos application\n\nThis file shows the output using FOP1.1rc1 with the attachment 29090. Clearly the gsub/gpos features *are* working given acceptable language/script settings.", "is_private": false, "bug_id": 53573, "id": 160764, "time": "2012-07-20T15:41:21Z", "creator": "gadams@apache.org", "creation_time": "2012-07-20T15:41:21Z", "attachment_id": 29091}, {"text": "The first 3 lines of generated PDF from you give a near correct look.\nThe problem is at character 26, Mai-Ek.\nIt ship too far to the left.\n\nI have few questions regarding to your output.\nI changed my fo:block element removing all attribute except font-family.\nMy result is different from what you got.\nIt is look similar to the second line in first jpg attachment.\nWhy the different ?\n\nAnother question is whether the \"dflt\" shall be loaded when specific language is given ?\nMost Thai fonts gsub/gpos information use \"dflt\" language and \"thai\" script.\nPlease correct me if i'm wrong. Per http://www.microsoft.com/typography/otfntdev/standot/appen.aspx, my understanding is when the \"th\" language is missing from font info, it shall fall back to \"dflt\".", "tags": [], "bug_id": 53573, "attachment_id": null, "count": 6, "id": 160804, "time": "2012-07-23T04:15:51Z", "creator": "natta@th.ibm.com", "creation_time": "2012-07-23T04:15:51Z", "is_private": false}, {"count": 7, "tags": [], "text": "Created attachment 29094\nthe xml data used to reproduce a problem", "is_private": false, "bug_id": 53573, "id": 160806, "time": "2012-07-23T05:20:40Z", "creator": "natta@th.ibm.com", "creation_time": "2012-07-23T05:20:40Z", "attachment_id": 29094}, {"count": 8, "tags": [], "bug_id": 53573, "is_private": false, "text": "Created attachment 29095\nthe xslt which transform thaidata.xml into fo", "id": 160807, "time": "2012-07-23T05:25:22Z", "creator": "natta@th.ibm.com", "creation_time": "2012-07-23T05:25:22Z", "attachment_id": 29095}, {"count": 9, "tags": [], "bug_id": 53573, "attachment_id": 29096, "is_private": false, "id": 160808, "time": "2012-07-23T05:26:26Z", "creator": "natta@th.ibm.com", "creation_time": "2012-07-23T05:26:26Z", "text": "Created attachment 29096\nThe generated PDF file."}, {"count": 10, "tags": [], "creator": "gadams@apache.org", "text": "(In reply to comment #6)\n> The first 3 lines of generated PDF from you give a near correct look.\n> The problem is at character 26, Mai-Ek.\n> It ship too far to the left.\n\nI understand. I will investigate this further.\n\n> I have few questions regarding to your output.\n> I changed my fo:block element removing all attribute except font-family.\n> My result is different from what you got.\n> It is look similar to the second line in first jpg attachment.\n> Why the different ?\n\nThat's hard to say. I am using FOP1.1rc1 and Version 5.0 of the AngsanaUPC font (from Windows 7). If you are using different versions, then that could cause the difference.\n\n> \n> Another question is whether the \"dflt\" shall be loaded when specific\n> language is given ?\n> Most Thai fonts gsub/gpos information use \"dflt\" language and \"thai\" script.\n> Please correct me if i'm wrong. Per\n> http://www.microsoft.com/typography/otfntdev/standot/appen.aspx, my\n> understanding is when the \"th\" language is missing from font info, it shall\n> fall back to \"dflt\".\n\nThe current implementation in FOP will use 'dflt' for the OT Language lookup if the value of the language attribute is not specified or is specified as an empty string. Similarly, it will use 'thai' for the OT Script lookup if the dominant characters are Thai, the script attribute is not specified, is specified as the empty string, as 'auto', or as 'thai'.\n\nIf 'th' or 'TH' is specified as the language, then presumably it should also produce a successful lookup. However, this will depend on whether the font designer/creator provides an OT lookup for language = 'th'|'TH' and script = 'thai'. Taking a look at AngsanaUPC (using the Adobe TTX tool), I see that the GSUB table only lists the default language system, and does not include 'TH', so that would explain why specifying language='TH' results in no lookup.\n\n    <ScriptList>\n      <!-- ScriptCount=1 -->\n      <ScriptRecord index=\"0\">\n        <ScriptTag value=\"thai\"/>\n        <Script>\n          <DefaultLangSys>\n            <ReqFeatureIndex value=\"65535\"/>\n            <!-- FeatureCount=1 -->\n            <FeatureIndex index=\"0\" value=\"0\"/>\n          </DefaultLangSys>\n          <!-- LangSysCount=0 -->\n        </Script>\n      </ScriptRecord>\n    </ScriptList>", "id": 160809, "time": "2012-07-23T05:35:14Z", "bug_id": 53573, "creation_time": "2012-07-23T05:35:14Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 53573, "attachment_id": null, "text": "(In reply to comment #8)\n> Created attachment 29095 [details]\n> the xslt which transform thaidata.xml into fo\n\nPlease provide an FO input file. I don't care about XSLT/XML files (they are just noise).", "id": 160810, "time": "2012-07-23T05:36:21Z", "creator": "gadams@apache.org", "creation_time": "2012-07-23T05:36:21Z", "is_private": false}, {"count": 12, "attachment_id": 29097, "creator": "natta@th.ibm.com", "text": "Created attachment 29097\nFO file for reproduce the problem", "id": 160812, "time": "2012-07-23T05:50:31Z", "bug_id": 53573, "creation_time": "2012-07-23T05:50:31Z", "tags": [], "is_private": false}, {"text": "(In reply to comment #10)\n> (In reply to comment #6)\n> > The first 3 lines of generated PDF from you give a near correct look.\n> > The problem is at character 26, Mai-Ek.\n> > It ship too far to the left.\n> \n> I understand. I will investigate this further.\n> \n> > I have few questions regarding to your output.\n> > I changed my fo:block element removing all attribute except font-family.\n> > My result is different from what you got.\n> > It is look similar to the second line in first jpg attachment.\n> > Why the different ?\n> \n> That's hard to say. I am using FOP1.1rc1 and Version 5.0 of the AngsanaUPC\n> font (from Windows 7). If you are using different versions, then that could\n> cause the difference.\n> \nI'm using AngsanaUPC 5.0 from Windows 7 SP1 64 bits [Version 6.1.7601]\nI uses FOP from SVN trunk, checked out today.", "tags": [], "bug_id": 53573, "is_private": false, "count": 13, "id": 160813, "time": "2012-07-23T05:55:10Z", "creator": "natta@th.ibm.com", "creation_time": "2012-07-23T05:55:10Z", "attachment_id": null}, {"count": 14, "tags": [], "text": "(In reply to comment #13)\n> (In reply to comment #10)\n> > (In reply to comment #6)\n> > > The first 3 lines of generated PDF from you give a near correct look.\n> > > The problem is at character 26, Mai-Ek.\n> > > It ship too far to the left.\n> > \n> > I understand. I will investigate this further.\n> > \n> > > I have few questions regarding to your output.\n> > > I changed my fo:block element removing all attribute except font-family.\n> > > My result is different from what you got.\n> > > It is look similar to the second line in first jpg attachment.\n> > > Why the different ?\n> > \n> > That's hard to say. I am using FOP1.1rc1 and Version 5.0 of the AngsanaUPC\n> > font (from Windows 7). If you are using different versions, then that could\n> > cause the difference.\n> > \n> I'm using AngsanaUPC 5.0 from Windows 7 SP1 64 bits [Version 6.1.7601]\n> I uses FOP from SVN trunk, checked out today.\n\nHmmm. Strange. Here is the config I am using (fop.xconf):\n\n<?xml version=\"1.0\"?>\n<fop version=\"1.0\">\n  <use-cache>false</use-cache>\n  <base>./</base>\n  <strict-configuration>true</strict-configuration>\n  <renderers>\n    <renderer mime=\"application/pdf\">\n      <filterList>\n\t<value>flate</value>\n      </filterList>\n      <fonts>\n\t<directory>./fonts</directory>\n      </fonts>\n    </renderer>\n  </renderers>\n</fop>\n\nI placed the angsanu.ttf file in a fonts directory in the directory that contains this config. I turned of the font-cache to make sure it is using that font.\n\nPerhaps you might try this also?", "is_private": false, "bug_id": 53573, "id": 160814, "time": "2012-07-23T06:10:06Z", "creator": "gadams@apache.org", "creation_time": "2012-07-23T06:10:06Z", "attachment_id": null}, {"text": "(In reply to comment #14)\n> (In reply to comment #13)\n> > (In reply to comment #10)\n> > > (In reply to comment #6)\n> > > > The first 3 lines of generated PDF from you give a near correct look.\n> > > > The problem is at character 26, Mai-Ek.\n> > > > It ship too far to the left.\n> > > \n> > > I understand. I will investigate this further.\n> > > \n> > > > I have few questions regarding to your output.\n> > > > I changed my fo:block element removing all attribute except font-family.\n> > > > My result is different from what you got.\n> > > > It is look similar to the second line in first jpg attachment.\n> > > > Why the different ?\n> > > \n> > > That's hard to say. I am using FOP1.1rc1 and Version 5.0 of the AngsanaUPC\n> > > font (from Windows 7). If you are using different versions, then that could\n> > > cause the difference.\n> > > \n> > I'm using AngsanaUPC 5.0 from Windows 7 SP1 64 bits [Version 6.1.7601]\n> > I uses FOP from SVN trunk, checked out today.\n> \n> Hmmm. Strange. Here is the config I am using (fop.xconf):\n> \n> <?xml version=\"1.0\"?>\n> <fop version=\"1.0\">\n>   <use-cache>false</use-cache>\n>   <base>./</base>\n>   <strict-configuration>true</strict-configuration>\n>   <renderers>\n>     <renderer mime=\"application/pdf\">\n>       <filterList>\n> \t<value>flate</value>\n>       </filterList>\n>       <fonts>\n> \t<directory>./fonts</directory>\n>       </fonts>\n>     </renderer>\n>   </renderers>\n> </fop>\n> \n> I placed the angsanu.ttf file in a fonts directory in the directory that\n> contains this config. I turned of the font-cache to make sure it is using\n> that font.\n> \n> Perhaps you might try this also?\n\nTried it. Nothing change. I might forget to mention you that i embed FOP into java application. I copied fop.xconf from FOP 1.0 directory and put it right into my java project. The only section i changed is all those you mention above.\nDo i have to set anything other than that for embedded use ?", "tags": [], "bug_id": 53573, "attachment_id": null, "count": 15, "id": 160815, "time": "2012-07-23T06:24:20Z", "creator": "natta@th.ibm.com", "creation_time": "2012-07-23T06:24:20Z", "is_private": false}, {"text": "(In reply to comment #15)\n> (In reply to comment #14)\n> > (In reply to comment #13)\n> > > (In reply to comment #10)\n> > > > (In reply to comment #6)\n> > > > > The first 3 lines of generated PDF from you give a near correct look.\n> > > > > The problem is at character 26, Mai-Ek.\n> > > > > It ship too far to the left.\n> > > > \n> > > > I understand. I will investigate this further.\n> > > > \n> > > > > I have few questions regarding to your output.\n> > > > > I changed my fo:block element removing all attribute except font-family.\n> > > > > My result is different from what you got.\n> > > > > It is look similar to the second line in first jpg attachment.\n> > > > > Why the different ?\n> > > > \n> > > > That's hard to say. I am using FOP1.1rc1 and Version 5.0 of the AngsanaUPC\n> > > > font (from Windows 7). If you are using different versions, then that could\n> > > > cause the difference.\n> > > > \n> > > I'm using AngsanaUPC 5.0 from Windows 7 SP1 64 bits [Version 6.1.7601]\n> > > I uses FOP from SVN trunk, checked out today.\n> > \n> > Hmmm. Strange. Here is the config I am using (fop.xconf):\n> > \n> > <?xml version=\"1.0\"?>\n> > <fop version=\"1.0\">\n> >   <use-cache>false</use-cache>\n> >   <base>./</base>\n> >   <strict-configuration>true</strict-configuration>\n> >   <renderers>\n> >     <renderer mime=\"application/pdf\">\n> >       <filterList>\n> > \t<value>flate</value>\n> >       </filterList>\n> >       <fonts>\n> > \t<directory>./fonts</directory>\n> >       </fonts>\n> >     </renderer>\n> >   </renderers>\n> > </fop>\n> > \n> > I placed the angsanu.ttf file in a fonts directory in the directory that\n> > contains this config. I turned of the font-cache to make sure it is using\n> > that font.\n> > \n> > Perhaps you might try this also?\n> \n> Tried it. Nothing change. I might forget to mention you that i embed FOP\n> into java application. I copied fop.xconf from FOP 1.0 directory and put it\n> right into my java project. The only section i changed is all those you\n> mention above.\n> Do i have to set anything other than that for embedded use ?\n\nWhat results do you get when running FOP directly from command line using fop script or directly from Java command?\n\nHere is a debug output from my invocation (I'm using Ant to invoke java directly):\n\n     [java] Executing '/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java' with arguments:\n     [java] '-Xms512m'\n     [java] '-Xmx2048m'\n     [java] '-Djava.awt.headless=true'\n     [java] '-Djava.util.logging.config.file=logging.properties'\n     [java] '-ea:org.apache.fop...'\n     [java] '-classpath'\n     [java] '/Users/glenn/work/fop/build/fop.jar:/Users/glenn/work/fop/lib/avalon-framework-4.2.0.jar:/Users/glenn/work/fop/lib/batik-all-1.7.jar:/Users/glenn/work/fop/lib/commons-io-1.3.1.jar:/Users/gl\\\nenn/work/fop/lib/commons-logging-1.0.4.jar:/Users/glenn/work/fop/lib/fop-hyph.jar:/Users/glenn/work/fop/lib/serializer-2.7.0.jar:/Users/glenn/work/fop/lib/servlet-2.2.jar:/Users/glenn/work/fop/lib/xalan\\\n-2.7.0-sources.jar:/Users/glenn/work/fop/lib/xalan-2.7.0.jar:/Users/glenn/work/fop/lib/xercesImpl-2.7.1.jar:/Users/glenn/work/fop/lib/xml-apis-1.3.04.jar:/Users/glenn/work/fop/lib/xml-apis-ext-1.3.04.ja\\\nr:/Users/glenn/work/fop/lib/xmlgraphics-commons-1.5svn.jar'\n     [java] 'org.apache.fop.cli.Main'\n     [java] '-q'\n     [java] '-c'\n     [java] 'fop.xconf'\n     [java] '-fo'\n     [java] './test.fo.xml'\n     [java] '-pdf'\n     [java] './test.pdf'", "tags": [], "bug_id": 53573, "is_private": false, "count": 16, "id": 160840, "time": "2012-07-23T14:50:34Z", "creator": "gadams@apache.org", "creation_time": "2012-07-23T14:50:34Z", "attachment_id": null}, {"count": 17, "tags": [], "text": "Created attachment 29102\nThe debug mode output from fop.bat\n\nThe result of using fop.bat execution is the same as previously upload PDF file.\nI suspect there must be some configuration different or my trunk version is different from yours.\nBTW, i tried fop.bat -version and it return 1.0beta2.", "is_private": false, "bug_id": 53573, "id": 160846, "time": "2012-07-24T03:42:26Z", "creator": "natta@th.ibm.com", "creation_time": "2012-07-24T03:42:26Z", "attachment_id": 29102}, {"count": 18, "tags": [], "creator": "gadams@apache.org", "text": "(In reply to comment #17)\n> Created attachment 29102 [details]\n> The debug mode output from fop.bat\n> \n> The result of using fop.bat execution is the same as previously upload PDF\n> file.\n> I suspect there must be some configuration different or my trunk version is\n> different from yours.\n> BTW, i tried fop.bat -version and it return 1.0beta2.\n\nI can tell already that you aren't using the trunk version, since you should not get 1.0beta2.\n\nPlease do the following (or equivalent) from the root level of what you think is the current trunk HEAD and post a reply here:\n\n$ svn info\nPath: .\nWorking Copy Root Path: /Users/glenn/work/xmlgraphics/fop/trunk\nURL: https://svn.apache.org/repos/asf/xmlgraphics/fop/trunk\nRepository Root: https://svn.apache.org/repos/asf\nRepository UUID: 13f79535-47bb-0310-9956-ffa450edef68\nRevision: 1364879\nNode Kind: directory\nSchedule: normal\nLast Changed Author: mehdi\nLast Changed Rev: 1364567\nLast Changed Date: 2012-07-23 04:21:23 -0600 (Mon, 23 Jul 2012)\n\n$ java -version\njava version \"1.6.0_33\"\nJava(TM) SE Runtime Environment (build 1.6.0_33-b03-424-11M3720)\nJava HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode)\n\n$ java -jar build/fop.jar -version\nFOP Version svn-trunk\n\n$ md5 fonts/angsau.ttf  \nMD5 (fonts/angsau.ttf) = 070f54e1790ee0a495de46729b974b57", "id": 160847, "time": "2012-07-24T04:43:28Z", "bug_id": 53573, "creation_time": "2012-07-24T04:43:28Z", "is_private": false, "attachment_id": null}, {"count": 19, "tags": [], "creator": "natta@th.ibm.com", "attachment_id": null, "id": 160851, "time": "2012-07-24T07:44:37Z", "bug_id": 53573, "creation_time": "2012-07-24T07:44:37Z", "is_private": false, "text": "> I can tell already that you aren't using the trunk version, since you should\n> not get 1.0beta2.\n> \n> Please do the following (or equivalent) from the root level of what you\n> think is the current trunk HEAD and post a reply here:\n> \n> $ svn info\n> Path: .\n> Working Copy Root Path: /Users/glenn/work/xmlgraphics/fop/trunk\n> URL: https://svn.apache.org/repos/asf/xmlgraphics/fop/trunk\n> Repository Root: https://svn.apache.org/repos/asf\n> Repository UUID: 13f79535-47bb-0310-9956-ffa450edef68\n> Revision: 1364879\n> Node Kind: directory\n> Schedule: normal\n> Last Changed Author: mehdi\n> Last Changed Rev: 1364567\n> Last Changed Date: 2012-07-23 04:21:23 -0600 (Mon, 23 Jul 2012)\n> \n> $ java -version\n> java version \"1.6.0_33\"\n> Java(TM) SE Runtime Environment (build 1.6.0_33-b03-424-11M3720)\n> Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode)\n> \n> $ java -jar build/fop.jar -version\n> FOP Version svn-trunk\n> \n> $ md5 fonts/angsau.ttf  \n> MD5 (fonts/angsau.ttf) = 070f54e1790ee0a495de46729b974b57\n\nI'm using subclipse to checkout from trunk. \nThe trunk URL is http://svn.apache.org/repos/asf/xmlgraphics/fop/trunk\nRevision: 1364910\nLast rev: 1364567 by mehdi\n\njava -version return:\nJava(TM) SE Runtime Environment (build 1.7.0-b147)\n\njava -jar build/fop.jar -version\nFOP Version svn-trunk\n\nfop -version\nFOP Version 1.0beta2\n\nI don't install md5"}, {"count": 20, "tags": [], "creator": "psancho.asf@gmail.com", "text": "(In reply to comment #19)\n> fop -version\n> FOP Version 1.0beta2\n\nThere was never been such FOP version between 0.95 final and 1.0 final.\nThe branch 1.0 was used only to prepare the tag 1.0 final, and only that.\ncan you check how the script \"fop\" (one of fop.sh, fop.cmd, fop.bat, fop.js, ...) recovers this info?", "id": 160852, "time": "2012-07-24T08:19:42Z", "bug_id": 53573, "creation_time": "2012-07-24T08:19:42Z", "is_private": false, "attachment_id": null}, {"count": 21, "attachment_id": null, "creator": "natta@th.ibm.com", "text": "(In reply to comment #20)\n> (In reply to comment #19)\n> > fop -version\n> > FOP Version 1.0beta2\n> \n> There was never been such FOP version between 0.95 final and 1.0 final.\n> The branch 1.0 was used only to prepare the tag 1.0 final, and only that.\n> can you check how the script \"fop\" (one of fop.sh, fop.cmd, fop.bat, fop.js,\n> ...) recovers this info?\n\nIn fop.bat, i remove \"rem\" and let it echo the final command.\nIt is:\n\"java\"   -cp \";C:\\svn tempspace\\fop svn\\build\\fop-hyph.jar;C:\\svn tempspace\\fop\nsvn\\build\\fop-sandbox.jar;C:\\svn tempspace\\fop svn\\build\\fop-transcoder-allinone\n.jar;C:\\svn tempspace\\fop svn\\build\\fop-transcoder.jar;C:\\svn tempspace\\fop svn\\\nbuild\\fop.jar;C:\\svn tempspace\\fop svn\\lib\\avalon-framework-4.2.0.jar;C:\\svn tem\npspace\\fop svn\\lib\\batik-all-1.7.jar;C:\\svn tempspace\\fop svn\\lib\\commons-io-1.3\n.1.jar;C:\\svn tempspace\\fop svn\\lib\\commons-logging-1.0.4.jar;C:\\svn tempspace\\f\nop svn\\lib\\serializer-2.7.0.jar;C:\\svn tempspace\\fop svn\\lib\\servlet-2.2.jar;C:\\\nsvn tempspace\\fop svn\\lib\\xalan-2.7.0.jar;C:\\svn tempspace\\fop svn\\lib\\xercesImp\nl-2.7.1.jar;C:\\svn tempspace\\fop svn\\lib\\xml-apis-1.3.04.jar;C:\\svn tempspace\\fo\np svn\\lib\\xml-apis-ext-1.3.04.jar;C:\\svn tempspace\\fop svn\\lib\\xmlgraphics-commo\nns-1.5svn.jar\" org.apache.fop.cli.Main -version\n\n\nIt return:\nFOP Version 1.0beta2\n\n\nHowever, i tried executing following command.\nC:\\svn tempspace\\fop svn\\build>java -cp fop.jar org.apache.fop.cli.Main -version\n\n\nIt return:\nFOP Version svn-trunk", "id": 160857, "time": "2012-07-24T10:02:17Z", "bug_id": 53573, "creation_time": "2012-07-24T10:02:17Z", "tags": [], "is_private": false}, {"text": "(In reply to comment #21)\n> However, i tried executing following command.\n> C:\\svn tempspace\\fop svn\\build>java -cp fop.jar org.apache.fop.cli.Main\n> -version\n> \n> It return:\n> FOP Version svn-trunk\n\nyou should try adding one-by-one other jar, you probably will identify witch overrides fop.", "tags": [], "bug_id": 53573, "is_private": false, "count": 22, "id": 160861, "time": "2012-07-24T12:17:12Z", "creator": "psancho.asf@gmail.com", "creation_time": "2012-07-24T12:17:12Z", "attachment_id": null}, {"count": 23, "tags": [], "text": "(In reply to comment #21)\n> It return:\n> FOP Version 1.0beta2\n> \n> It return:\n> FOP Version svn-trunk\n\nIt is clear you have a local configuration issue to figure out and fix. Your tests appear to be using FOP1.0 or some prior (beta2) version, and not the current trunk version of FOP. This could clearly account for the differences we are seeing.\n\nAlso, I would suggest avoiding the use of directory names containing spaces. I have encountered various problems on WIN bat/cmd files due to this usage in the past.\n\nAt this point, I'm going to investigate the apparent MAI EK problem and will open a new bug against that issue if it turns out to be a code bug as opposed to a font bug.", "is_private": false, "bug_id": 53573, "id": 160865, "time": "2012-07-24T15:32:15Z", "creator": "gadams@apache.org", "creation_time": "2012-07-24T15:32:15Z", "attachment_id": null}, {"count": 24, "tags": [], "creator": "natta@th.ibm.com", "attachment_id": null, "is_private": false, "id": 160885, "time": "2012-07-25T03:39:27Z", "bug_id": 53573, "creation_time": "2012-07-25T03:39:27Z", "text": "(In reply to comment #23)\n> (In reply to comment #21)\n> > It return:\n> > FOP Version 1.0beta2\n> > \n> > It return:\n> > FOP Version svn-trunk\n> \n> It is clear you have a local configuration issue to figure out and fix. Your\n> tests appear to be using FOP1.0 or some prior (beta2) version, and not the\n> current trunk version of FOP. This could clearly account for the differences\n> we are seeing.\n> \n> Also, I would suggest avoiding the use of directory names containing spaces.\n> I have encountered various problems on WIN bat/cmd files due to this usage\n> in the past.\n> \n> At this point, I'm going to investigate the apparent MAI EK problem and will\n> open a new bug against that issue if it turns out to be a code bug as\n> opposed to a font bug.\n\nI agree that it is another problem which shall not be discuss in this PMR because it is unrelated to the original problem.\nPlease notice me when you open a new PMR.\n\nThanks."}]