[{"text": "Created attachment 30122\nUpgrade to Bouncy Castle 1.48\n\nThe recent versions of Bouncy Castle didn't preserve the binary compatibility and JMeter doesn't compile against them (it breaks starting with Bouncy Castle 1.46).\n\nThis is an issue for the Debian project because the Bouncy Castle package has to be updated to 1.48 in order to fix a security issue. This update is going to break the JMeter package.\n\nCould you please update the dependency on Bouncy Castle? Here is the patch with the necessary changes.", "tags": [], "bug_id": 54776, "attachment_id": 30122, "count": 0, "id": 166253, "time": "2013-03-30T21:44:39Z", "creator": "ebourg@apache.org", "creation_time": "2013-03-30T21:44:39Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 54776, "attachment_id": null, "text": "Hello,\nThanks for patch, do you have some test plan that uses SMIMEAssertion to validate it is OK? \n\nThank you\nRegards", "id": 166254, "time": "2013-03-30T22:01:57Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-03-30T22:01:57Z", "is_private": false}, {"id": 166255, "tags": [], "bug_id": 54776, "is_private": false, "count": 2, "text": "I haven't tested it specifically. The JMeter tests worked fine, but I don't know if they cover SMIMEAssertion.\n\nI followed the porting guide posted by Bouncy Castle:\n\nhttp://www.bouncycastle.org/wiki/display/JA1/Porting+from+earlier+BC+releases+to+1.47+and+later\n\nThey recommend the use of the JcaX509CertSelectorConverter class to convert the SignerId.", "time": "2013-03-30T22:09:04Z", "creator": "ebourg@apache.org", "creation_time": "2013-03-30T22:09:04Z", "attachment_id": null}, {"id": 166256, "tags": [], "bug_id": 54776, "is_private": false, "count": 3, "text": "Hello,\n\nPatch works fine with SMIME Assertion and BC 1.48. Thanks.\n\nPhilippe, to test it:\n\nGet a SMIME (SSL) certificat (or create a self-signed):\nhttp://kb.mozillazine.org/Getting_an_SMIME_certificate\n\nI have trying with success with Comodo SSL email with my asf email.\nI have generated the SSL email cert from my Firefox, and my certificate is now in Certificate Manager (FF Preferences, Advanced tab, Encryption, View Certificates, Your Certificates) To extract, select Comodo cert, button Backup to export in a pkcs12 file.\nAfter, I have imported in my email client Thunderbird (same way that firefox, but click on import button)\nNext, go to your email account settings, and select the email SSL certificate in Security pane for digital signing.\n\nYou can write a new email with signing (options > sign) to a another email (or yourself).\n\nWith JMeter (with bc jar), create a simple script :\nTread group\n   |-- Mail Reader Sampler (with Store the message using SMIME (raw) checked) (pointing to a pop3/imap(s) account of the second email)\n   |   |-- SMIME Assertion (check Verify signature, Check values (example Signer email address (the same in SSL cert)\n   |-- View Results Tree\n\n\nRun the test.\nIf all is right, the sampler is success (green) otherwise an error occurs with the assertion.", "time": "2013-03-30T23:58:34Z", "creator": "milamber@apache.org", "creation_time": "2013-03-30T23:58:34Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "milamber@apache.org", "attachment_id": null, "id": 166257, "time": "2013-03-31T00:02:27Z", "bug_id": 54776, "creation_time": "2013-03-31T00:02:27Z", "is_private": false, "text": "For archive a smime email sample.\n\n\nReturn-Path: <milamber@apache.org>\nReceived: from mwinf8503 (mwinf8503 [10.99.54.133])\n\t by mwinb7305 (Cyrus v2.3.13) with LMTPA;\n\t Sun, 31 Mar 2013 00:29:56 +0100\nX-Sieve: CMU Sieve 2.3\nReceived: from mail.apache.org ([140.211.11.3])\n\tby mwinf8503 with ME\n\tid HzVu1l00J03wcJL01zVvGs; Sun, 31 Mar 2013 00:29:56 +0100\nReceived: (qmail 56946 invoked by uid 99); 30 Mar 2013 23:29:54 -0000\nReceived: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)\n    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Mar 2013 23:29:54 +0000\nReceived: from localhost (HELO [X.X.X.X]) (127.0.0.1)\n  (smtp-auth username milamber, mechanism plain)\n  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Sat, 30 Mar 2013 23:29:53 +0000\nMessage-ID: <5157757A.1040901@apache.org>\nDate: Sat, 30 Mar 2013 23:30:02 +0000\nFrom: Milamber <milamber@apache.org>\nMIME-Version: 1.0\nTo: Milamber <milamberspace@gmail.com>\nSubject: Test SMIME email\nContent-Type: multipart/signed; protocol=\"application/pkcs7-signature\"; micalg=sha1; boundary=\"------------ms050107090107070502030102\"\n\nThis is a cryptographically signed message in MIME format.\n\n--------------ms050107090107070502030102\nContent-Type: text/plain; charset=UTF-8\nContent-Transfer-Encoding: quoted-printable\n\nHello,\n\nThis is a test mail with sign.\n\nBye\n\n\n--------------ms050107090107070502030102\nContent-Type: application/pkcs7-signature; name=\"smime.p7s\"\nContent-Transfer-Encoding: base64\nContent-Disposition: attachment; filename=\"smime.p7s\"\nContent-Description: S/MIME Cryptographic Signature\n\nMIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKSjCC\nBRowggQCoAMCAQICEG0Z6qcZT2ozIuYiMnqqcd4wDQYJKoZIhvcNAQEFBQAwga4xCzAJBgNV\n[...]\nyAgnpeY462QvO1hgSjlxtFzVAIJpLLFQJgcHoPgg90abZMn9HLDEgmaxsHQa8d10CvDBvE1J\nhWXJRksRBoU4YLSPddTmn/2j8GftNjDQyNVjWV0oiY7pnNlpqWpHb2QNbFZ9ZNetwtLpHD9w\nnpQ2ATgbVHUkokYsX8mcywAAAAAAAA==\n--------------ms050107090107070502030102--"}, {"count": 5, "tags": [], "bug_id": 54776, "attachment_id": null, "text": "\n\nThe patch needs to add 2 parenthesis around the new JcaX509CertSelectorConverter()\n\nIterator<?> certIt = certs.getCertificates((new JcaX509CertSelectorConverter()).getCertSelector(signer.getSID())).iterator();", "id": 166263, "time": "2013-03-31T08:29:11Z", "creator": "milamber@apache.org", "creation_time": "2013-03-31T08:29:11Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 54776, "attachment_id": null, "text": "Date: Sun Mar 31 22:06:03 2013\nNew Revision: 1463065\n\nURL: http://svn.apache.org/r1463065\nLog:\nBug 54776 - Update the dependency on Bouncy Castle to 1.48\nBugzilla Id: 54776\n\nModified:\n    jmeter/trunk/build.properties\n    jmeter/trunk/build.xml\n    jmeter/trunk/eclipse.classpath\n    jmeter/trunk/lib/api/   (props changed)\n    jmeter/trunk/res/maven/ApacheJMeter_parent.pom\n    jmeter/trunk/src/components/org/apache/jmeter/assertions/SMIMEAssertion.java\n    jmeter/trunk/xdocs/changes.xml", "id": 166280, "time": "2013-03-31T22:06:46Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-03-31T22:06:46Z", "is_private": false}, {"count": 7, "tags": [], "creator": "ebourg@apache.org", "text": "Merci !", "id": 166281, "time": "2013-03-31T22:28:39Z", "bug_id": 54776, "creation_time": "2013-03-31T22:28:39Z", "is_private": false, "attachment_id": null}]