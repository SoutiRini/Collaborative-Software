[{"count": 0, "tags": [], "text": "Created attachment 32250\nPatch for apr_private.h (.\\include\\arch\\win32)\n\napr_atoi64, under Windows 7 64 bits (not sure about other versions), MSVC 2008 64 bits binaries, is truncating the Most significant bit for a large unsigned 64 bits number.\n\ne.g:\n\n...\n\napr_uint64_t\t\tui64;\nchar\t\t\t\tb[512];\n\nui64 = 0xffffffffffffffff;\napr_snprintf(b,sizeof(b),\"%\"APR_UINT64_T_FMT,ui64);\nui64 = (apr_uint64_t) apr_atoi64(b);\n\n// at this point, ui64 is 0x7fffffffffffffff, which is wrong\n\n\nissue seems to be with function: _strtoi64\n\nsnippet from apr_private.h:\n\n/* MSVC 7.0 introduced _strtoi64 */\n#if _MSC_VER >= 1300 && _INTEGRAL_MAX_BITS >= 64 && !defined(_WIN32_WCE)\n#define APR_INT64_STRFN\t      _strtoi64\n#endif\n\nFIX: use _strtoui64 instead.\n\nPatch attached for analysis.", "attachment_id": 32250, "bug_id": 57295, "id": 179439, "time": "2014-12-02T12:21:44Z", "creator": "carlosbar@gmail.com", "creation_time": "2014-12-02T12:21:44Z", "is_private": false}]