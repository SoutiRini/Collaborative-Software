[{"attachment_id": null, "tags": [], "creator": "jboynes@apache.org", "text": "During a HEAD request, when a RequestDispatcher include is handled by the DefaultServlet the content of the static resource is not written to the HttpServletResponse. If the including servlet has wrapped the response before performing the include it will not receive the content of the resource.\n\nThis causes an issue for the JSTL <c:import> tag when a relative url is used in order to retrieve the resource, for example for use with the <x:parse> tag. Bug 37466 describes this case.\n\nIt is also a problem for other requests where the response headers may be affected by this lack of content causing different header values to be returned for GET vs. HEAD methods. For example, the Content-Length header does not account for bytes that are emitted by the included resource.", "count": 0, "id": 181166, "time": "2015-02-19T07:57:32Z", "bug_id": 57601, "creation_time": "2015-02-19T07:57:32Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jboynes@apache.org", "attachment_id": 32497, "text": "Created attachment 32497\nPatch with test case and possible fix\n\nPatch that adds a test cases checking the Content-Length for GET and HEAD requests to a JSP page that includes a static resource.\n\nPossible fix by checking the DispatcherType in DefaultServlet#doHead()", "id": 181167, "time": "2015-02-19T08:05:24Z", "bug_id": 57601, "creation_time": "2015-02-19T08:05:24Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 57601, "is_private": false, "text": "Fixed in trunk, 8.0.x for 8.0.21 onwards and in 7.0.x for 7.0.60 onwards.", "id": 181435, "time": "2015-03-02T11:44:46Z", "creator": "markt@apache.org", "creation_time": "2015-03-02T11:44:46Z", "attachment_id": null}]