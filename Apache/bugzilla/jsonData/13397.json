[{"count": 0, "tags": [], "bug_id": 13397, "attachment_id": null, "id": 24117, "time": "2002-10-08T07:25:41Z", "creator": "starscream_au@yahoo.com", "creation_time": "2002-10-08T07:25:41Z", "is_private": false, "text": "Running ant at the command line results in this error:\n\nException in thread \"main\" java.lang.NoClassDefFoundError: Files\\Java\\j2sdk1/4/1\n\\lib\\tools/jar;C:\\Program Files\\Ant\\lib\\optional/jar;C:\\Program Files\\Ant\\lib\\an\nt/jar;\n\nNote that the tools.jar path is trunicated.\n\nIf I change line 62 of ant.bat from:\n\nif exist \"%JAVA_HOME%\\lib\\tools.jar\" call \"%ANT_HOME%\\bin\\lcp.bat\" \"%JAVA_HOME%\n\\lib\\tools.jar\"\n\nto as it appeared in ant 1.5. ie remove the quots from around the tool.jar path:\n\nif exist \"%JAVA_HOME%\\lib\\tools.jar\" call \"%ANT_HOME%\\bin\\lcp.bat\" %JAVA_HOME%\n\\lib\\tools.jar\n\nthen ant runs normally."}, {"count": 1, "tags": [], "creator": "charles.butterfield@nextcentury.com", "text": "The larger problem is that quoting the LOCALCLASSPATH at the point of execution \n(just after :runAnt label) conflicts with quoting selected path components.  If \nyou do both, the inner quotes will prematurely terminate the quoting.  This \nproblem is also encountered when the external CLASSPATH variable is already \nquoted.\n\nIt would seem that the solution is either:\na) don't quote LOCALCLASSPATH, just quote already unquoted components,\nor\nb) quote entire LOCALCLASSPATH, don't quote components, and unquote already \nquoted components (such as CLASSPATH).\n\nI think (b) would be prettier (just one set of quotes at the end), but don't \nknow how hard it is to strip quotes in DOS.", "id": 26433, "time": "2002-11-17T03:00:41Z", "bug_id": 13397, "creation_time": "2002-11-17T03:00:41Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 13397, "attachment_id": null, "id": 30491, "time": "2003-02-02T06:02:04Z", "creator": "conor@apache.org", "creation_time": "2003-02-02T06:02:04Z", "is_private": false, "text": "Is your CLASSPATH or JAVA_HOME variables quoted? If so this will break the Ant\nscript. \n\nThere is no need to quote environment variables. Windows is able to support\nspaces in environment variables without needing to use quotes. It is better to\nquote at the point of usage so the command line processing works as expected.\n\nThis is how the Ant script is organized.\n"}]