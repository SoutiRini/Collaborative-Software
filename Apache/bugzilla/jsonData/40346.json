[{"count": 0, "tags": [], "creator": "ragaller@apache.org", "attachment_id": null, "text": "After a clean checkout (rev 43802 date 060829) under osx java 1.5 I did the\nfollowing steps in order to convert the default pub to uuid\n\n- ./build.sh\n- ./build.sh --noconfig module.test -Dmodule=org.apache.lenya.modules.migration\n\nThe error(s) I get executing to above command:\n\nCopying 1 file to\n/Users/ragaller/lenya/lenya_14x/build/lenya/modules/org.apache.lenya.modules.migration/java/test\nRunning org.apache.lenya.cms.migration.MigrateUuidsTest\n[WARNING] Assuming non-UUID content because no 'uuid' attribute is set and the\nnode contains links. Returning path [/index] as UUID.\n[WARNING] Node equals OwnerDocument: default:archive:\n[WARNING] Node equals OwnerDocument: default:authoring:\n[WARNING] Assuming non-UUID content because no 'uuid' attribute is set and the\nnode contains links. Returning path [/index] as UUID.\nTests run: 1, Failures: 0, Errors: 1, Time elapsed: 23,643 sec\nTestsuite: org.apache.lenya.cms.migration.MigrateUuidsTest\nTests run: 1, Failures: 0, Errors: 1, Time elapsed: 23,643 sec\n------------- Standard Output ---------------\n[WARNING] Assuming non-UUID content because no 'uuid' attribute is set and the\nnode contains links. Returning path [/index] as UUID.\n[WARNING] Node equals OwnerDocument: default:archive:\n[WARNING] Node equals OwnerDocument: default:authoring:\n[WARNING] Assuming non-UUID content because no 'uuid' attribute is set and the\nnode contains links. Returning path [/index] as UUID.\n------------- ---------------- ---------------\nTestcase: testMigrateUuids took 19,505 sec\n        Caused an ERROR\njavax.xml.transform.TransformerException: java.io.FileNotFoundException:\nfile:/Users/ragaller/lenya/lenya_14x/build/lenya/webapp/lenya/pubs/default/content/rcml/content/authoring/sitetree.xml.rcml\n(No such file or directory)\norg.apache.lenya.cms.repository.RepositoryException:\njavax.xml.transform.TransformerException: java.io.FileNotFoundException:\nfile:/Users/ragaller/lenya/lenya_14x/build/lenya/webapp/lenya/pubs/default/content/rcml/content/authoring/sitetree.xml.rcml\n(No such file or directory)\n        at\norg.apache.lenya.cms.repository.SourceNode.isCheckedOut(SourceNode.java:171)\n        at org.apache.lenya.cms.repository.SourceNode.lock(SourceNode.java:400)\n        at\norg.apache.lenya.cms.migration.MigrateUuidsTest.migrateDocument(MigrateUuidsTest.java:134)\n        at\norg.apache.lenya.cms.migration.MigrateUuidsTest.migrateArea(MigrateUuidsTest.java:91)\n        at\norg.apache.lenya.cms.migration.MigrateUuidsTest.migratePublication(MigrateUuidsTest.java:72)\n        at\norg.apache.lenya.cms.migration.MigrateUuidsTest.testMigrateUuids(MigrateUuidsTest.java:61)\nCaused by: javax.xml.transform.TransformerException:\njava.io.FileNotFoundException:\nfile:/Users/ragaller/lenya/lenya_14x/build/lenya/webapp/lenya/pubs/default/content/rcml/content/authoring/sitetree.xml.rcml\n(No such file or directory)\n        at\norg.apache.xalan.transformer.TransformerIdentityImpl.createResultContentHandler(TransformerIdentityImpl.java:263)\n        at\norg.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:296)\n        at\norg.apache.lenya.xml.DocumentHelper.writeDocument(DocumentHelper.java:198)\n        at org.apache.lenya.cms.rc.RCML.write(RCML.java:154)\n        at org.apache.lenya.cms.rc.RCML.<init>(RCML.java:113)\n        at\norg.apache.lenya.cms.rc.RevisionController.isCheckedOut(RevisionController.java:170)\n        at\norg.apache.lenya.cms.repository.SourceNode.isCheckedOut(SourceNode.java:169)\n        ... 42 more\nCaused by: java.io.FileNotFoundException:\nfile:/Users/ragaller/lenya/lenya_14x/build/lenya/webapp/lenya/pubs/default/content/rcml/content/authoring/sitetree.xml.rcml\n(No such file or directory)\n        at java.io.FileOutputStream.open(Native Method)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:179)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:70)\n        at\norg.apache.xalan.transformer.TransformerIdentityImpl.createResultContentHandler(TransformerIdentityImpl.java:253)\n        ... 48 more\n\nBUILD FAILED\n/Users/ragaller/lenya/lenya_14x/src/targets/modules-build.xml:105: The following\nerror occurred while executing this line:\n/Users/ragaller/lenya/lenya_14x/build/lenya/temp/modules-build.xml:1236: Test\norg.apache.lenya.cms.migration.MigrateUuidsTest failed", "id": 92667, "time": "2006-08-29T12:24:15Z", "bug_id": 40346, "creation_time": "2006-08-29T12:24:15Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 40346, "text": "Does it work with Java 1.4?", "id": 92669, "time": "2006-08-29T12:52:32Z", "creator": "andreas@apache.org", "creation_time": "2006-08-29T12:52:32Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 40346, "is_private": false, "count": 2, "id": 92670, "time": "2006-08-29T12:59:57Z", "creator": "andreas@apache.org", "creation_time": "2006-08-29T12:59:57Z", "text": "BTW, to downgrade you have to set JAVA_HOME to something like\n\n/System/Library/Frameworks/JavaVM.framework/Versions/1.4/Home"}, {"count": 3, "tags": [], "creator": "ragaller@apache.org", "text": "(In reply to comment #2)\n> BTW, to downgrade you have to set JAVA_HOME to something like\n> \n> /System/Library/Frameworks/JavaVM.framework/Versions/1.4/Home\n\nJust did that - and... jep the conversion works fine with java 1.4 (guess the\nWarnings are normal). So clearly a java 1.5 (osx) bug.\n\nThank You for the pointer (and the JAVA_HOME hint)", "id": 92672, "attachment_id": null, "bug_id": 40346, "creation_time": "2006-08-29T14:04:48Z", "time": "2006-08-29T14:04:48Z", "is_private": false}, {"count": 4, "tags": [], "creator": "ragaller@apache.org", "attachment_id": null, "text": "(In reply to comment #3)\n> (In reply to comment #2)\n> > BTW, to downgrade you have to set JAVA_HOME to something like\n> > \n> > /System/Library/Frameworks/JavaVM.framework/Versions/1.4/Home\n> \n> Just did that - and... jep the conversion works fine with java 1.4 (guess the\n> Warnings are normal). So clearly a java 1.5 (osx) bug.\n\ncorrection: java 1.5 related bug.\n\n> \n> Thank You for the pointer (and the JAVA_HOME hint)\n\n", "id": 92673, "time": "2006-08-29T14:06:54Z", "bug_id": 40346, "creation_time": "2006-08-29T14:06:54Z", "is_private": false}, {"count": 5, "tags": [], "creator": "andreas@apache.org", "attachment_id": null, "text": "The UUID migration has been superceded by the \"import example content\"\nfunctionality.", "id": 96803, "time": "2006-12-12T06:56:10Z", "bug_id": 40346, "creation_time": "2006-12-12T06:56:10Z", "is_private": false}]