[{"count": 0, "tags": [], "bug_id": 36637, "text": "When using jakarta-taglibs-standard-1.1.2 in JSP pages where I first declare:\n\n<%@page session=\"false\"%>\n\nI get an exception when using\n\n<x:set>\n\nThe exception is:\n\njava.lang.IllegalStateException: Cannot access session scope in page that does\nnot participate in any session\n        at\norg.apache.jasper.runtime.PageContextImpl.doGetAttributeNamesInScope(PageContextImpl.java:501)\n        at\norg.apache.jasper.runtime.PageContextImpl.getAttributeNamesInScope(PageContextImpl.java:487)\n        at\norg.apache.taglibs.standard.tag.common.xml.XPathUtil.getVariableQNames(XPathUtil.java:100)\n        at\norg.apache.taglibs.standard.tag.common.xml.XPathUtil.fillVarStack(XPathUtil.java:772)\n...\n \nLooks like XPathUtil always assumes a session is available.\n\nMy setup is briefly:\n\njakarta-tomcat-5\n\nweb.xml starts:\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<web-app xmlns=\"http://java.sun.com/xml/ns/j2ee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee\n                             http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd\"\n         version=\"2.4\">\n..\n\n\nand an example page that causes trouble:\n\n<%@ page session=\"false\" %>\n\n<%@ taglib prefix=\"x\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n\n<x:parse var=\"xml\">\n  <test>blah</test>\n</x:parse>\n\n<x:set var=\"test\" select=\"$xml\"/>", "id": 79865, "time": "2005-09-13T14:52:44Z", "creator": "puckman@taglab.com", "creation_time": "2005-09-13T14:52:44Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 36637, "is_private": false, "id": 79866, "attachment_id": 16386, "creator": "puckman@taglab.com", "creation_time": "2005-09-13T14:53:53Z", "time": "2005-09-13T14:53:53Z", "text": "Created attachment 16386\nFix to XPathUtil.java that checks if a session is available before getting the attributes."}, {"count": 2, "tags": [], "creator": "rahul@apache.org", "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of 35216 ***", "id": 79883, "time": "2005-09-13T16:11:48Z", "bug_id": 36637, "creation_time": "2005-09-13T16:11:48Z", "is_private": false}]