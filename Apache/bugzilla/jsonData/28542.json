[{"count": 0, "tags": [], "bug_id": 28542, "attachment_id": null, "is_private": false, "id": 56257, "time": "2004-04-22T15:19:28Z", "creator": "kreiger@imcode.com", "creation_time": "2004-04-22T15:19:28Z", "text": "Forwarding to a JSP with a content Filter causes the output of the\nforwarded-to-JSP to be truncated to a multiple of 8192 bytes.\n\nI will attach a small testcase."}, {"count": 1, "tags": [], "bug_id": 28542, "is_private": false, "text": "Created attachment 11313\nA small project demonstrating the bug. Build with ant to get \"bug.war\".", "id": 56258, "time": "2004-04-22T15:20:34Z", "creator": "kreiger@imcode.com", "creation_time": "2004-04-22T15:20:34Z", "attachment_id": 11313}, {"count": 2, "tags": [], "bug_id": 28542, "is_private": false, "text": "This project contains two JSPs:\n\"test.jsp\", which outputs \"123456789\\n\" 820 times, for a total of 8200 chars/bytes.\n\"testforward.jsp\", which forwards to \"test.jsp\", which is truncated to 8192\nchars/bytes.\n\nWith no Filter the bug goes away. The Filter is a simple thing that collects the\noutput of the JSPs in a byte array and then outputs that byte array, with no\nother processing.\n", "id": 56259, "time": "2004-04-22T15:25:06Z", "creator": "kreiger@imcode.com", "creation_time": "2004-04-22T15:25:06Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "kreiger@imcode.com", "text": "BTW, the attachment is a zip-file, since that isn't obvious.", "id": 56261, "time": "2004-04-22T15:35:33Z", "bug_id": 28542, "creation_time": "2004-04-22T15:35:33Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 28542, "text": "This bug also happens in tomcat 5.0.27. Changing product.", "id": 59981, "time": "2004-06-28T10:22:15Z", "creator": "kreiger@imcode.com", "creation_time": "2004-06-28T10:22:15Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 28542, "attachment_id": null, "is_private": false, "id": 59982, "time": "2004-06-28T10:41:12Z", "creator": "remm@apache.org", "creation_time": "2004-06-28T10:41:12Z", "text": "Sorry, I find this very unconvincing. Your filter is probably bad."}, {"count": 6, "attachment_id": null, "creator": "kreiger@imcode.com", "text": "I'm sorry and disappointed that you find my testcase unconvincing.\n\nThe demonstration filter is a different filter from the one i first discovered\nthe bug with. I wanted to make as small and simple a testcase as possible.\n\nThe demonstration filter simply collects the forward output in a byte array,\nbefore outputting it. I'd be very happy to have any bugs in it pointed out.\n\nAlso, i'm wondering if the problem doesn't have anything to do with the\nhardcoded \"8192\" in generated jsp source?\n---\n      pageContext = _jspxFactory.getPageContext(this, request, response,\n                        null, true, 8192, true);\n---\n\nAgain, sorry for being unconvincing, and i hope you won't close the bug before\ngiving the demonstration filter a closer look.", "id": 59984, "time": "2004-06-28T11:13:56Z", "bug_id": 28542, "creation_time": "2004-06-28T11:13:56Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "bug_id": 28542, "attachment_id": null, "is_private": false, "id": 59985, "time": "2004-06-28T11:36:24Z", "creator": "kreiger@imcode.com", "creation_time": "2004-06-28T11:36:24Z", "text": "I went back and visited the filter code, and of course i found the problem.\n\nIn my HttpServletResponseWrapper i was creating a new PrintWriter for each call\nto getWriter(). Making sure the PrintWriter is only created once fixes the bug.\n\nI'm sorry. Marking INVALID.\n"}]