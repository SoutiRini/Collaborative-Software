[{"count": 0, "tags": [], "bug_id": 39037, "text": "Used nightly build: ant_20060320114020.tar.gz\n\nThis is the exception I received while building:\njava.lang.IllegalArgumentException\n        at java.net.URI.create(URI.java:842)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja\nva:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.tools.ant.launch.Locator.fromURI(Locator.java:160)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:265)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:96)\nCaused by: java.net.URISyntaxException: Illegal character in path at index 16:\nfile:/C:/Program Files/Java/jdk1.5.0_06/lib/tools.jar\n        at java.net.URI$Parser.fail(URI.java:2809)\n        at java.net.URI$Parser.checkChars(URI.java:2982)\n        at java.net.URI$Parser.parseHierarchical(URI.java:3066)\n        at java.net.URI$Parser.parse(URI.java:3014)\n        at java.net.URI.<init>(URI.java:578)\n        at java.net.URI.create(URI.java:840)\n        ... 7 more\n\n-----------------------------------------\nFix:\nChange line 251 in file Launcher.java from\n\njars[jars.length - 1] = toolsJar.toURL();\n\nto\n\njars[jars.length - 1] = toolsJar.toURI().toURL();", "id": 87033, "time": "2006-03-20T16:12:52Z", "creator": "svetozar01@hotmail.com", "creation_time": "2006-03-20T16:12:52Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "william.barker@wilshire.com", "is_private": false, "id": 87271, "time": "2006-03-25T23:43:48Z", "bug_id": 39037, "creation_time": "2006-03-25T23:43:48Z", "tags": [], "text": "I just hit this one as well.  It also occurs if you co Ant into a location \nthat has a ' ' in the path (common enough under Windows :).  To fix this case \nwith the patch in #0, you would also need to apply it to \nLocator.getLocationURLs, and anyplace else that File.toURL is called.  Not \nvery pretty :(.\n\nI can work around it by building Ant with a 1.3.1 JVM.  For a 1.4+ JVM, a \nbetter patch is to in Locator.fromURI(String), simply swallow (or log) the \nIllegalArgumentException, and continue on trying the 1.3 logic.  This builds \nAnt successfully as well."}, {"count": 2, "attachment_id": null, "creator": "william.barker@wilshire.com", "is_private": false, "id": 87272, "time": "2006-03-26T03:06:51Z", "bug_id": 39037, "creation_time": "2006-03-26T03:06:51Z", "tags": [], "text": "(In reply to comment #1)\n> I can work around it by building Ant with a 1.3.1 JVM.  For a 1.4+ JVM, a \n> better patch is to in Locator.fromURI(String), simply swallow (or log) the \n> IllegalArgumentException, and continue on trying the 1.3 logic.  This builds \n> Ant successfully as well.\nOk, I take it back.  To get a working Ant that will work with 1.4+, it isn't \nenough to build with 1.3.1.  The path to Locator.fromURI is needed as well.\n"}, {"count": 3, "tags": [], "bug_id": 39037, "text": "Created attachment 17991\nPatch to fall-back to the 1.3 logic if the URI is invalid\n\nOk, now I'm just being annoying ;-).\n\nThis patch gives you a buildable and working version of Ant, even when using\nWindows with %ANT_HOME% is on a path with a ' ' in it.\n\nStrangely, simply using encodeUri doesn't work, but I wasn't interested enough\nto look into why.", "id": 87302, "time": "2006-03-27T03:08:26Z", "creator": "william.barker@wilshire.com", "creation_time": "2006-03-27T03:08:26Z", "is_private": false, "attachment_id": 17991}, {"count": 4, "tags": [], "bug_id": 39037, "text": "There have been a number of revisions in this area recently.  Can anyone verify\nwhether this works on a build from svn HEAD?", "id": 88763, "time": "2006-05-03T16:38:21Z", "creator": "mbenson@apache.org", "creation_time": "2006-05-03T16:38:21Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "text": "Yep, this is the same bug.\n\n\n*** This bug has been marked as a duplicate of 39295 ***", "id": 88767, "time": "2006-05-03T16:54:40Z", "bug_id": 39037, "creation_time": "2006-05-03T16:54:40Z", "is_private": false}]