[{"count": 0, "tags": [], "bug_id": 48651, "is_private": false, "text": "FreeBSD 7.2-RELEASE-p4 amd64\n\nLatest version of mod_fcgid 2.3.5 fails with this error in httpd-error.log:\n\n[Mon Feb 01 15:55:03 2010] [emerg] (13)Permission denied: mod_fcgid: apr_global_mutex_child_init error\n\nPrevious version 2.3.4 works fine.\n\n\n\nAs I can see, it tries to create mutex in /var/tmp\nOn FreeBSD this dir has theese permissions:\ndrwxrwxrwt   6 root    wheel      3.0K Feb  1 15:55 tmp\n\nVersion 2.3.4 creates file with \"www\" owner:\n-rw-------  1 www  wheel     0B Feb  1 15:55 tmp.2.CMfelr\n\nBut version 2.3.5 creates it with \"root\" owner:\n-rw-------  1 root  wheel     0B Feb  1 16:02 tmp.4.GgLDa9", "id": 134097, "time": "2010-02-01T06:07:05Z", "creator": "pservit@gmail.com", "creation_time": "2010-02-01T06:07:05Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "trawick@apache.org", "text": "Please try this patch:\n\nIndex: modules/fcgid/fcgid_mutex_unix.c\n===================================================================\n--- modules/fcgid/fcgid_mutex_unix.c\t(revision 904780)\n+++ modules/fcgid/fcgid_mutex_unix.c\t(working copy)\n@@ -56,6 +56,10 @@\n \n #include \"ap_mpm.h\"\n \n+#if MODULE_MAGIC_NUMBER_MAJOR < 20051115\n+#define AP_NEED_SET_MUTEX_PERMS\n+#endif\n+\n #if AP_NEED_SET_MUTEX_PERMS\n #include \"unixd.h\"\n #endif", "id": 134099, "time": "2010-02-01T06:27:45Z", "bug_id": 48651, "creation_time": "2010-02-01T06:27:45Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "pservit@gmail.com", "attachment_id": null, "is_private": false, "id": 134100, "time": "2010-02-01T06:55:06Z", "bug_id": 48651, "creation_time": "2010-02-01T06:55:06Z", "text": "(In reply to comment #1)\n> Please try this patch:\n> \n> Index: modules/fcgid/fcgid_mutex_unix.c\n> ===================================================================\n> --- modules/fcgid/fcgid_mutex_unix.c    (revision 904780)\n> +++ modules/fcgid/fcgid_mutex_unix.c    (working copy)\n> @@ -56,6 +56,10 @@\n> \n>  #include \"ap_mpm.h\"\n> \n> +#if MODULE_MAGIC_NUMBER_MAJOR < 20051115\n> +#define AP_NEED_SET_MUTEX_PERMS\n> +#endif\n> +\n>  #if AP_NEED_SET_MUTEX_PERMS\n>  #include \"unixd.h\"\n>  #endif\n\nThank you. It works.\n\nI just change this line in patch to compile:\n#define AP_NEED_SET_MUTEX_PERMS 1"}, {"attachment_id": null, "tags": [], "bug_id": 48651, "text": "Thanks for the quick feedback/fix.  Committed as r905302.", "count": 3, "id": 134102, "time": "2010-02-01T07:21:31Z", "creator": "trawick@apache.org", "creation_time": "2010-02-01T07:21:31Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 48651, "is_private": false, "text": "(In reply to comment #3)\n> Thanks for the quick feedback/fix.  Committed as r905302.\n\nWill you release new version of mod_fcgid soon ?\nI want send PR to update freebsd port to latest version.", "id": 134104, "time": "2010-02-01T07:49:26Z", "creator": "pservit@gmail.com", "creation_time": "2010-02-01T07:49:26Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "is_private": false, "id": 134105, "time": "2010-02-01T07:57:44Z", "bug_id": 48651, "creation_time": "2010-02-01T07:57:44Z", "text": "I'm thinking about rolling 2.3.6 at the end of this week, for potential release sometime next week; that will give us a little more time to get feedback from early adopters without delaying the regression fix too much.\n\nUnfortunately it is always hard to predict when a release will be finalized.  If I were you I'd patch it for now."}]