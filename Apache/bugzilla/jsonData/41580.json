[{"count": 0, "tags": [], "bug_id": 41580, "is_private": false, "id": 99160, "attachment_id": null, "creator": "arvind.srinivasan@sun.com", "creation_time": "2007-02-09T01:58:28Z", "time": "2007-02-09T01:58:28Z", "text": "The NetBeans Profiler indicated that ByteChunk.getLength was being invoked many\nthousands of time during a simple microbenchmark. Profiling a single request to\na simple hello.jsp showed that ByteChunk.getLength was being called 60 times.\nMost of these came from for loops.\n\nThis can be avoided by simply using\nint length = bc.getLength();\nfor (int i = 0; i < length; i++)\ninstead of\nfor (int i =0; i < bc.getLength(); i++)"}, {"count": 1, "tags": [], "creator": "arvind.srinivasan@sun.com", "text": "Created attachment 19557\nReduce ByteChunk.getLength invocations\n\nAfter applying this patch, the number of ByteChunk.getLength invocations for a\nsingle request to hello.jsp reduced from 60 to 12.", "id": 99161, "time": "2007-02-09T02:00:07Z", "bug_id": 41580, "creation_time": "2007-02-09T02:00:07Z", "is_private": false, "attachment_id": 19557}, {"count": 2, "tags": [], "bug_id": 41580, "is_private": false, "id": 99239, "attachment_id": null, "creator": "remm@apache.org", "creation_time": "2007-02-11T06:22:37Z", "time": "2007-02-11T06:22:37Z", "text": "This change does not seem particularly useful to me, but did not seem worth\nrejecting either."}, {"count": 3, "tags": [], "bug_id": 41580, "is_private": false, "text": "This is the sort of stuff we should use the \"-server\" mode VM for.\n\nAnyone who's doing these funky micro-benchmarks: first try running with\nJAVA_OPTS=-server during your profiling, and let the application \"warm up\" for a\nbit before starting the profiling run.", "id": 99299, "time": "2007-02-12T15:06:43Z", "creator": "shankarunni@netscape.net", "creation_time": "2007-02-12T15:06:43Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 41580, "is_private": false, "text": "fwiw, the profiles were collected with the Server VM after a sufficiently long\nwarmup period.\n", "id": 99315, "time": "2007-02-12T23:45:59Z", "creator": "arvind.srinivasan@sun.com", "creation_time": "2007-02-12T23:45:59Z", "attachment_id": null}]