[{"count": 0, "tags": [], "bug_id": 29855, "text": "Hi\nEverytime I send a large POST data alongwith a cgi to be executed, CGIServlet \nthrown an I/O exception viz. broken pipe; which's promptly displayed to the user\n(though the cgi runs just fine, the data is written to the outputstream and the \ncgi gets executed)\nTO prevent the user from seeing this message, I figured out I cud catch the \nexception just after the CGIServlet attempts to write the post data.\n\nAny idea why the write to the Process outputstream throws the BrokenPipe \nException\nThanks !", "id": 60031, "time": "2004-06-29T06:17:40Z", "creator": "email_alert@rediffmail.com", "creation_time": "2004-06-29T06:17:40Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "I'll have a look at this. Answers to the following would help.\n1. What size is 'large'?\n2. Do you have a stack trace? If so please attach.\n3. Are you really using 5.0.0? There have been quite a few changes since this \nrelease.", "id": 60053, "time": "2004-06-29T19:58:44Z", "bug_id": 29855, "creation_time": "2004-06-29T19:58:44Z", "is_private": false}, {"count": 2, "attachment_id": null, "creator": "email_alert@rediffmail.com", "text": "Hi \nSure !\n1. Large as in Post data sent in the range of 50 to 60 kB.\n2. I'm using Tomcat4.0 on a solaris platform\n3. I tried changing the size of the BufferedOutputStream (the point where it \nwrites comes back from getPostInput() , converts the post string to a byte \narray and write it to the Process' ouptut stream); didn't help, inspite of \nsetting it to the exact number of bytes the byte array.\n\n4. here's the stack trace(If i catch the i/o exception at this point, everthng \nworks just fine) [i get a Http 500 exception.]\n\njava.io.IOException: Broken pipe\n\tat java.io.FileOutputStream.writeBytes(Native Method)\n\tat java.io.FileOutputStream.write(FileOutputStream.java:257)\n\tat java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)\n\tat java.io.BufferedOutputStream.write(BufferedOutputStream.java:109)\n\tat java.io.FilterOutputStream.write(FilterOutputStream.java:80)\n\tat com.tekelec.sentinel.webframework.servlet.CGIServlet$CGIRunner.run\n(Unknown Source)\n\tat com.tekelec.sentinel.webframework.servlet.CGIServlet.doGet(Unknown \nSource)\n\tat com.tekelec.sentinel.webframework.servlet.CGIServlet.doPost(Unknown \nSource)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat com.tekelec.sentinel.webframework.filter.CGISessionFilter.doFilter\n(Unknown Source)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:213)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat \ncom.tekelec.sentinel.webframework.filter.ExpiredCredentialsFilter.doFilter\n(Unknown Source)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:213)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(Unknown \nSource)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2415)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:509)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.authenticator.SingleSignOn.invoke(Unknown Source)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:432)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:386)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:534)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:530)\n\tat java.lang.Thread.run(Thread.java:536)\n\n5. I'm not sure if tomcat5 would have made any changes to the CGIServlet.\nThanks\nJon\n", "id": 60062, "time": "2004-06-30T11:49:49Z", "bug_id": 29855, "creation_time": "2004-06-30T11:49:49Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "text": "Tomcat 5 has made changes to the CGI servlet as well as relevant Connector \ncode.  Please re-test on Tomcat 5.0.27 or later.  Thanks.", "id": 61238, "time": "2004-07-28T15:05:34Z", "bug_id": 29855, "creation_time": "2004-07-28T15:05:34Z", "is_private": false}, {"count": 4, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "text": "I'm closing this issue as it's likely been fixed since Tomcat 4.0 and there has \nbeen no response to my request to retest on a more recent stable Tomcat release.", "id": 63601, "time": "2004-09-15T16:12:17Z", "bug_id": 29855, "creation_time": "2004-09-15T16:12:17Z", "is_private": false}, {"count": 5, "tags": [], "creator": "Florian.Kolbe@in-gmbh.de", "attachment_id": null, "text": "For me the problem was the PHP executable with a setting in the php.ini\n'post_max_size' which was exceeded, leeding to the 'Broken Pipe' IOException\nwhile writing the POST data.\n\nA patch could be to catch this, since PHP still executes fine (although the\nupload will fail).\n\nAlso see http://www.php.net/manual/en/features.file-upload.php", "id": 110903, "time": "2007-11-21T00:43:08Z", "bug_id": 29855, "creation_time": "2007-11-21T00:43:08Z", "is_private": false}]