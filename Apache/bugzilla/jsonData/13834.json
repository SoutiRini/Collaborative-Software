[{"count": 0, "tags": [], "text": "I am having problems with a JSP page that reads a bean from the application \nenvironment. The bean is part of a jar file deployed under WEB-INF/lib \ndirectory. The same web page/application will not generate this error if I was \nusing Tomcat 4.0.6. I have a different problem if I was using 4.0.6! \n\nThe error reported as is:\n\"/opt/jakarta/tomcat4.1.12/work/Standalone/localhost/comet/jsp/stat_jsp.java:7: \n'.' expected \nimport SettingsBean;\"\n\nThe class file is part of the beans.jar library stored under comet/WEB-\nINF/lib/beans.jar. Here is a listing of the library contents:\n</opt/jakarta/tomcat/webapps/comet/WEB-INF/lib> lf\n app.jar                 beans.jar               servletUtils.jar\n</opt/jakarta/tomcat/webapps/comet/WEB-INF/lib> jar tvf beans.jar\n  2859 Fri Oct 18 17:43:00 CDT 2002 SettingsBean.class\n\n</opt/jakarta/tomcat/webapps/comet/WEB-INF/lib> jar tvf app.jar\n  1433 Fri Oct 18 17:18:48 CDT 2002 ActiveCall.class\n  3422 Fri Oct 18 17:18:48 CDT 2002 ConfigFile.class\n   977 Fri Oct 18 17:18:48 CDT 2002 Facility.class\n   636 Thu Sep 26 14:45:32 CDT 2002 LinkStates.class\n  1938 Fri Oct 18 17:18:48 CDT 2002 MyFileNameFilter.class\n  1195 Fri Oct 18 17:18:48 CDT 2002 Sdl.class\n  6459 Fri Oct 18 17:18:48 CDT 2002 Syslog.class\n  1500 Fri Oct 18 17:18:48 CDT 2002 UnixCmd.class\n   560 Fri Oct 18 17:18:48 CDT 2002 UnixSignals.class\n  1495 Fri Oct 18 17:18:48 CDT 2002 Link.class\n  1207 Fri Oct 18 17:18:48 CDT 2002 DataEvent.class\n  2507 Fri Oct 11 12:28:32 CDT 2002 ExceptionDialog.class\n   651 Fri Oct 11 12:28:32 CDT 2002 ExceptionDialog$CloseDialog.class\n   989 Fri Oct 11 12:28:32 CDT 2002 ExceptionDialog$CloseWindow.class\n   615 Wed Oct 16 08:59:26 CDT 2002 DialogBox$CloseDialog.class\n   959 Wed Oct 16 08:59:26 CDT 2002 DialogBox$CloseWindow.class\n  2459 Wed Oct 16 08:59:26 CDT 2002 DialogBox.class\n   552 Fri Oct 18 17:18:48 CDT 2002 DataFile.class\n\n</opt/jakarta/tomcat/webapps/comet/WEB-INF/lib> jar tvf servletUtils.jar\n  1358 Fri Oct 18 17:18:56 CDT 2002 FacilityFile.class\n  3884 Mon Oct 21 10:40:02 CDT 2002 SettingsFile.class\n\nThe jar files are loaded as can be seen from the contents of the application \nlogger, \"comet_log.2002-10-21.txt\". The following are the lines showing that \nthe jar files were loaded at init time.\n=====================================================================\nStandardContext[/comet]: Starting\nStandardContext[/comet]: Processing start(), current available=false\nStandardContext[/comet]: Configuring default Resources\nStandardContext[/comet]: Configuring non-privileged default Loader\nStandardContext[/comet]: Configuring default Manager\nStandardContext[/comet]: Processing standard container startup\nWebappLoader[/comet]: Deploying class repositories to work \ndirectory /opt/jakarta/tomcat-4\n.0.6/work/Standalone/localhost/comet\nWebappLoader[/comet]: Deploy JAR /WEB-INF/lib/app.jar to /opt/jakarta/tomcat-\n4.0.6/webapps\n/comet/WEB-INF/lib/app.jar\nWebappLoader[/comet]: Deploy JAR /WEB-INF/lib/beans.jar to /opt/jakarta/tomcat-\n4.0.6/webap\nps/comet/WEB-INF/lib/beans.jar\nWebappLoader[/comet]: Deploy JAR /WEB-INF/lib/servletUtils.jar \nto /opt/jakarta/tomcat-4.0.6/webapps/comet/WEB-INF/lib/servletUtils.jar\nStandardManager[/comet]: Seeding random number generator class \njava.security.SecureRandom\nStandardManager[/comet]: Seeding of random number generator has been completed\nContextConfig[/comet]: ContextConfig: Processing START\nStandardContext[/comet]: Setting deployment descriptor public ID to '-//Sun \nMicrosystems, Inc.//DTD Web Application 2.3//EN'\nStandardContext[/comet]: Setting deployment descriptor public ID to '-//Sun \nMicrosystems, Inc.//DTD Web Application 2.3//EN'\nContextConfig[/comet]: Scanning web.xml tag libraries\nContextConfig[/comet]: Scanning TLD files in /WEB-INF\nContextConfig[/comet]: Scanning library JAR files\nContextConfig[/comet]: Added certificates -> request attribute Valve\nContextConfig[/comet]: Pipline Configuration:\nContextConfig[/comet]:   org.apache.catalina.valves.CertificatesValve/1.0\nContextConfig[/comet]:   org.apache.catalina.core.StandardContextValve/1.0\nContextConfig[/comet]: ======================\nStandardContext[/comet]: Configuring application event listeners\nStandardContext[/comet]: Sending application start events\nStandardContext[/comet]: Starting filters\nStandardContext[/comet]: Posting standard context attributes\nStandardWrapper[/comet:default]: Loading container servlet default\nStandardWrapper[/comet:invoker]: Loading container servlet invoker\nStandardContext[/comet]: Starting completed\n=============================================================================\n\nA servlet called Settings is loaded as part of the startup sequence. This \nservlet uses this bean as well. Contrary to the JSP page the servlet is able to \nuse the bean with no problems. Notice I am loading a total of 3 different jars, \napp.jar, beans.jar and servletUtils.jar. SettingsBean.class is only included in \nbeans.jar as noted above.\n\nI am running Tomcat 4.1.12 on a Sun Solaris 8 using JDK 1.4.0_01.", "is_private": false, "bug_id": 13834, "id": 24967, "time": "2002-10-21T23:21:33Z", "creator": "jmaiz@lucent.com", "creation_time": "2002-10-21T23:21:33Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 13834, "text": "Sorry, I mistakenly added the contents of the log files for Tomcat 4.0.6 \ninstead of Tomcat 4.1.12 to the original bug description. Below is the correct \nlog file output.\n==============================================================================\nStandardContext[/comet]: Starting\nStandardContext[/comet]: Processing start(), current available=false\nStandardContext[/comet]: Configuring default Resources\nStandardContext[/comet]: Configuring privileged default Loader\nStandardContext[/comet]: Configuring default Manager\nStandardContext[/comet]: Processing standard container startup\nWebappLoader[/comet]: Deploying class repositories to work \ndirectory /opt/jakarta/tomcat-4\n.1.12/work/Standalone/localhost/comet\nWebappLoader[/comet]: Deploy class files /WEB-INF/classes \nto /opt/jakarta/tomcat-4.1.12/we\nbapps/comet/WEB-INF/classes\nWebappLoader[/comet]: Deploy JAR /WEB-INF/lib/app.jar \nto /opt/jakarta/tomcat4.1.12/webapps/comet/WEB-INF/lib/app.jar\nWebappLoader[/comet]: Deploy JAR /WEB-INF/lib/beans.jar to /opt/jakarta/tomcat-\n4.1.12/webapps/comet/WEB-INF/lib/beans.jar\nWebappLoader[/comet]: Deploy JAR /WEB-INF/lib/servletUtils.jar \nto /opt/jakarta/tomcat-4.1.12/webapps/comet/WEB-INF/lib/servletUtils.jar\nContextConfig[/comet]: ContextConfig: Processing START\nStandardContext[/comet]: Setting deployment descriptor public ID to '-//Sun \nMicrosystems, Inc.//DTD Web Application 2.3//EN'\nStandardContext[/comet]: Setting deployment descriptor public ID to '-//Sun \nMicrosystems, Inc.//DTD Web Application 2.3//EN'\nContextConfig[/comet]:  Accumulating TLD resource paths\nContextConfig[/comet]:   Scanning <taglib> elements in web.xml\nContextConfig[/comet]:   Scanning TLDs in /WEB-INF subdirectory\nContextConfig[/comet]:   Scanning JARs in /WEB-INF/lib subdirectory\nContextConfig[/comet]:    Adding path '/WEB-INF/lib/app.jar'\nContextConfig[/comet]:    Adding path '/WEB-INF/lib/beans.jar'\nContextConfig[/comet]:    Adding path '/WEB-INF/lib/servletUtils.jar'\nContextConfig[/comet]:  Scanning JAR at resource path '/WEB-INF/lib/app.jar'\nContextConfig[/comet]:  Scanning JAR at resource \npath '/WEBINF/lib/servletUtils.jar'\nContextConfig[/comet]:  Scanning JAR at resource path '/WEB-INF/lib/beans.jar'\nContextConfig[/comet]: Pipline Configuration:\nContextConfig[/comet]:   org.apache.catalina.core.StandardContextValve/1.0\nContextConfig[/comet]: ======================\nNamingContextListener[/Standalone/localhost/comet]: Creating JNDI naming context\nNamingContextListener[/Standalone/localhost/comet]:   Resource parameters for \nUserTransact\nion = null\nStandardManager[/comet]: Seeding random number generator class \njava.security.SecureRandom\nStandardManager[/comet]: Seeding of random number generator has been completed\nStandardContext[/comet]: Posting standard context attributes\nStandardContext[/comet]: Configuring application event listeners\nStandardContext[/comet]: Sending application start events\nStandardContext[/comet]: Starting filters\nSettings: Settings: Read 8 lines of site settings \nSettings: Initial Bean Status \nFacility[0] Name = Lower State = OOS\nFacility[1] Name = Upper State = ACT\nFacility[2] Name = Unknown State = STBY\nFacility[3] Name = Unknown State = INIT\nFacility[4] Name = Unknown State = UNKN\nFacility[5] Name = Unknown State = UNAV\nStandardWrapper[/comet:default]: Loading container servlet default\nStandardWrapper[/comet:invoker]: Loading container servlet invoker\nStandardContext[/comet]: Starting completed\nStandardContext[/comet]: Mapping contextPath='/comet' with \nrequestURI='/comet/jsp/stat.jsp\n' and relativeURI='/jsp/stat.jsp'\nStandardContext[/comet]:   Trying exact match\nStandardContext[/comet]:   Trying prefix match\nStandardContext[/comet]:   Trying extension match\nStandardContext[/comet]:  Mapped to servlet 'jsp' with servlet \npath '/jsp/stat.jsp' and path info 'null' and update=true\nError compiling \nfile: /opt/jakarta/tomcat4.1.12/work/Standalone/localhost/comet/jsp/stat_jsp.jav\na     [javac] Compiling 1 source file\n\n/opt/jakarta/tomcat4.1.12/work/Standalone/localhost/comet/jsp/stat_jsp.java:7: '\n.' expected\nimport SettingsBean;\n                   ^\n/opt/jakarta/tomcat4.1.12/work/Standalone/localhost/comet/jsp/stat_jsp.java:50: \ncannot resolve symbol\nsymbol  : class SettingsBean  \nlocation: class org.apache.jsp.stat_jsp\n      SettingsBean settings = null;\n      ^\n/opt/jakarta/tomcat4.1.12/work/Standalone/localhost/comet/jsp/stat_jsp.java:52: \ncannot resolve symbol\nsymbol  : class SettingsBean  \nlocation: class org.apache.jsp.stat_jsp\n        settings = (SettingsBean) pageContext.getAttribute(\"settings\", \nPageContext.APPLICATION_SCOPE);\n                    ^\n/opt/jakarta/tomcat-\n4.1.12/work/Standalone/localhost/comet/jsp/stat_jsp.java:55: cannot resolve \nsymbol\nsymbol  : class SettingsBean  \nlocation: class org.apache.jsp.stat_jsp\n            settings = (SettingsBean) java.beans.Beans.instantiate(this.getClass\n().getClassLoader(), \"SettingsBean\");\n=============================================================================", "id": 24969, "time": "2002-10-21T23:31:29Z", "creator": "jmaiz@lucent.com", "creation_time": "2002-10-21T23:31:29Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "From the log in 4.1.12, looks like the problem is that you are importing a class\nfrom the unamed package, which is illegal in JDK 1.4.  See #10036.\n\n", "is_private": false, "bug_id": 13834, "id": 24970, "time": "2002-10-22T00:15:04Z", "creator": "kin-man.chung@sun.com", "creation_time": "2002-10-22T00:15:04Z", "attachment_id": null}]