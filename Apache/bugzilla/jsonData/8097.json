[{"count": 0, "tags": [], "bug_id": 8097, "text": "If a RMI registry is started in a servlet by using:\n\n  Registry reg = LocateRegistry.createRegistry (rmiPort);\n\nTomcat is not shutting down with \"shutdown.bat\". The servlet\nis terminated correctly but then Tomcat seems to have a problem\nwith the open port of the Registry.\nNote 1: It is not possible to shut down the RMI registry via the Java API\n        (which would surely solve the problem)\nNote 2: Tomat 3.3 seems to have the same problem but not 3.2", "id": 13612, "time": "2002-04-15T11:52:56Z", "creator": "mossgraber@iitb.fhg.de", "creation_time": "2002-04-15T11:52:56Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 8097, "is_private": false, "id": 13637, "time": "2002-04-15T15:33:02Z", "creator": "remm@apache.org", "creation_time": "2002-04-15T15:33:02Z", "tags": [], "text": "Nothing in the servlet spec allows you to instantiate a RMI registry, and \nexpect the container to handle it gracefully.\nConverting to enhancement (whoever is interested in that functionality is \nencouraged to look into it; I certainly have no interest in making this work)."}, {"count": 2, "tags": [], "creator": "mossgraber@iitb.fhg.de", "attachment_id": null, "is_private": false, "id": 13764, "time": "2002-04-16T14:01:51Z", "bug_id": 8097, "creation_time": "2002-04-16T14:01:51Z", "text": "I did some further investigation and found out that the RMI registry can be \ngracefully shutdown if the RMI object is not only unbound but also unexported.\nSo I found a solution to my problem.\nNevertheless the problem with Tomcat exists that it does not shut down if there \nare still threads running which are blocked (eg. blocking I/O). This could be \nfixed if a \"System.exit(0)\" would be added to the end of the main function in\norg.apache.catalina.startup.Bootstrap"}, {"count": 3, "tags": [], "creator": "remm@apache.org", "text": "The VM will exit if there are only daemon threads running.\nSince Catalina shutdown is asynchronous, you can't add a System.exit at the end \nof bootstrap (well, you can, but in your own Tomcat copy).", "id": 13768, "attachment_id": null, "bug_id": 8097, "creation_time": "2002-04-16T14:20:47Z", "time": "2002-04-16T14:20:47Z", "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 8097, "is_private": false, "id": 13773, "time": "2002-04-16T14:38:53Z", "creator": "mossgraber@iitb.fhg.de", "creation_time": "2002-04-16T14:38:53Z", "tags": [], "text": "Yes, you are absolutely right. I just wanted to point out that there\nis a potential problem with blocking (non daemon) threads. Maybe other users \nstumble over the same problem."}, {"count": 5, "tags": [], "creator": "craig.mcclanahan@sun.com", "attachment_id": null, "text": "Users who start threads are responsible for cleaning them up, since Tomcat does\nnot know anything about them.\n\n", "id": 14157, "time": "2002-04-21T02:33:36Z", "bug_id": 8097, "creation_time": "2002-04-21T02:33:36Z", "is_private": false}, {"count": 6, "tags": [], "creator": "markt@apache.org", "text": "*** Bug 31771 has been marked as a duplicate of this bug. ***", "id": 69129, "attachment_id": null, "bug_id": 8097, "creation_time": "2005-01-01T19:28:58Z", "time": "2005-01-01T19:28:58Z", "is_private": false}]