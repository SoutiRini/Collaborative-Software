[{"count": 0, "tags": [], "creator": "bertrand.lancelot@libertysurf.fr", "attachment_id": null, "text": "The war generated in using \"WAR\" task create a \"web-inf\" repository with files \n(web.xml, *.tld, ...) and a \"WEB-INF\" repository with other repositories and \ntheir files (classes, ...).\n\nNote : My application has a \"WEB-INF\" repository and not a \"web-inf\".\n\nSee below the code :\n\n   \t<target name=\"dist\" if=\"application\" depends=\"splashScreen\">\n\t\t<tstamp/>\n\n\t\t<!-- initialisation variables de distribution -->\n\t\t<property name=\"DestinationArchivage\" value=\"${repArchivage}\n\\build_${num_build}\"/>\n\t\t<property name=\"archive_bin\" value=\"${DestinationArchivage}\n\\${application}_bin_${DSTAMP}.war\"/>\n\t\t<property name=\"archive_src\" value=\"${DestinationArchivage}\n\\${application}_src_${DSTAMP}.zip\"/>\n\t\t<property name=\"build\" value=\"${repertoireSource}\\build\"/>\n\t\t<property name=\"java_doc\" value=\"${DestinationArchivage}\\doc\"/>\n\n\t\t<!-- creation du repertoire source -->\n\t\t<mkdir dir=\"${DestinationArchivage}\"/>\n\n\t\t<!-- Copie des fichiers LibProjet vers Lib -->\n\t\t<copy todir=\"${repertoireSource}\\${application}\\WEB-INF\\lib\">\n\t\t    <fileset dir=\"${repertoireSource}\\${application}\\WEB-\nINF\\LibProjet\">\n\t\t    \t<exclude name=\"*.zip\"/>\n\t\t    </fileset>\n  \t\t</copy>\n\t\t<delete dir=\"${repertoireSource}\\${application}\\WEB-\nINF\\LibProjet\"/>\n\n\t\t<!-- Creation de l'archive WAR: binaires -->\n\t\t<war destfile=\"${archive_bin}\" webxml=\"${repertoireSource}\n\\${application}\\WEB-INF\\web.xml\" update=\"false\">\n\t\t\t<classes dir=\"${build}\"/>\n\t\t\t<lib dir=\"${repertoireSource}\\${application}\\WEB-\nINF\\lib\">\n\t\t\t\t<!-- exclure les services techniques -->\n\t\t\t\t<exclude name=\"at*.jar\"/>\n\t\t\t</lib>\n\t\t\t<fileset dir=\"${repertoireSource}\\${application}\" \ncasesensitive=\"true\">\n\t\t\t\t<include name=\"**\\*\"/>\n\t\t\t\t<!-- exclure web.xml: present dans la \ndefinition du WAR -->\n\t\t\t\t<exclude name=\"**\\web.xml\"/>\n\t\t\t\t<exclude name=\"WEB-INF\\src\\**\\*\"/>\n\t\t\t\t<exclude name=\"WEB-INF\\lib\\*\"/>\n\t\t\t\t<exclude name=\".*\"/>\n\t\t\t\t<exclude name=\"_ccmwaid.inf\"/>\n\t\t\t</fileset>\n\t\t\t\n\t\t\t<zipfileset dir=\"${repertoireSource}\\${application}\\WEB-\nINF\\src\" prefix=\"WEB-INF\\classes\">\n\t\t\t\t<include name=\"*.tld\"/>\n\t\t\t\t<include name=\"*.xml\"/>\n\t\t\t\t<include name=\"*.properties\"/>\n\t\t\t</zipfileset>\n    \t\t</war>\n   </target>\n\nI tested it on 1.5.1, 1.5.3 and the last one 1.6.0 and the is the same for all.", "id": 50645, "time": "2004-01-16T14:25:47Z", "bug_id": 26195, "creation_time": "2004-01-16T14:25:47Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 26195, "text": "I'm not sure I understand what you are describing here.  Let's see\n\n* your archive contains two top-level directories, one named WEB-INF and one\n  named web-inf\n\n* some of the files you expect in WEB-INF are in web-inf\n\n* among the files in web-inf is web.xml as specified by the webxml attribute\n\nCorrect so far?\n\nWhere do the things from your <classes>, <lib> and <zipfileset> end up?\n\nHow do you verify the case of the directory names?  Are you unzipping the archive\non a case-sensitive filesystem or looking into it with some ZIP tool?", "count": 1, "id": 51586, "time": "2004-02-02T14:22:15Z", "creator": "bodewig@apache.org", "creation_time": "2004-02-02T14:22:15Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 26195, "text": "I thought having closed this bug, because the problem comes from the script itself.\n\nIn fact the script use \"\\\" against \"/\" and then the WAR is not correct and it\ncannot be deployed properly under Tomcat on Linux system.\n\nSorry for lost time\n;o(\n\nBest regards,", "id": 51725, "time": "2004-02-04T18:47:00Z", "creator": "bertrand.lancelot@libertysurf.fr", "creation_time": "2004-02-04T18:47:00Z", "is_private": false, "attachment_id": null}]