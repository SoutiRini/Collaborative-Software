[{"count": 0, "tags": [], "creator": "rainer.jung@kippdata.de", "text": "SHELL_PATH for Unix systems is set in include/arch/unix/apr_arch_threadproc.h to\n/bin/sh (APR 0.9 and 1.2). This is only used inside threadproc/unix/proc.c in\nfunction apr_proc_create() to create new processes using the shell argument\n\"-c\". It starts a shell and tells the shell to run the command.\n\nOn Solaris /bin/sh does an additional fork when called with \"-c\". So\napr_proc_create(9 in fact creates two processes that run in parallel, the shell\nand the command coming after \"-c\". This is inefficient, and e.g. when using\nrotatelogs with httpd leads to confusing additional processes in the process\ntable (one shell process + one rotatelogs for each rotating logger).\n\nIf the SHELL_PATH were configurable from the APR configure script, one could\nchoose e.g. /usr/xpg4/bin/sh, an alternative sh that exists inside Solaris for a\nlong time, and which does only exec a \"-c\" command, instead of forking a second\nprocess.\n\nI've got no configure patch at hand, but if it would help resolving the issue, I\ncould produce one.", "id": 108770, "time": "2007-09-28T10:28:05Z", "bug_id": 43507, "creation_time": "2007-09-28T10:28:05Z", "is_private": false, "attachment_id": null}]