[{"count": 0, "tags": [], "creator": "austinjones@avadynehealth.com", "text": "Tomcat 8.0.12 cannot update applications with uppercase context paths if the application is deployed as a compressed WAR file.\n\nFor the bug to occur, two deployments are required (let's call them v1 and v2).\n\nDeployment v1 goes through fine.  Both the WAR and unpacked directory are updated.\n\nDeployment v2 succeeds, but the application continues to serve v1.  The webapps WAR file is updated, but the unpacked app directory is not.\n\nI traced the issue to HostConfig.java line 1226:\n\n1225: String docBase = context.getDocBase();\n1226:   docBase = docBase.toLowerCase(Locale.ENGLISH);\n1227:   if (!docBase.endsWith(\".war\")) {\n...\n1234:     ExpandWar.delete(docBaseFile);\n...\n1237:   }\n1238:   reload(app)\n\nThe lowercase context path is passed to ExpandWar.delete, so the unpacked dir is not deleted on case-sensitive filesystems.  Tomcat reports a successful deployment of v2 in the Manager interface.\n\nThe toLowerCase call should be moved into the if statement, or bound to a separate variable.  The original case-sensitive docBase path must be passed to ExpandWar.delete.", "id": 177688, "attachment_id": null, "bug_id": 56938, "creation_time": "2014-09-09T17:06:40Z", "time": "2014-09-09T17:06:40Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 56938, "is_private": false, "id": 177818, "creation_time": "2014-09-12T16:10:33Z", "time": "2014-09-12T16:10:33Z", "creator": "markt@apache.org", "text": "Fixed in 8.0.x for 8.0.13 onwards and in 7.0.x for 7.0.56 onwards.", "attachment_id": null}, {"count": 2, "tags": [], "creator": "austinjones@avadynehealth.com", "attachment_id": null, "is_private": false, "id": 177837, "time": "2014-09-12T22:05:02Z", "bug_id": 56938, "creation_time": "2014-09-12T22:05:02Z", "text": "(In reply to Mark Thomas from comment #1)\n> Fixed in 8.0.x for 8.0.13 onwards and in 7.0.x for 7.0.56 onwards.\n\nThank you, Mark!"}]