[{"text": "In Apache 2.2.1 (the release candidate) either mod_proxy or mod_rewrite is breaking badly.  Here's \nwhat the trimmed down config file looks like (it still exhibits the same problem):\n\n\tListen 192.168.100.22:80\n\t<VirtualHost 192.168.100.22:80>\n\t        ServerName www.domain.com\n\n\t        RewriteEngine On\n\t        RewriteRule ^/external/(.*)\t\thttp://192.168.100.66:8099/$1 [P]\n\t        RewriteRule  ^/(.*)\t\t\thttp://127.0.0.1:8080/$1 [P]\n\t</VirtualHost>\n\n\nSteps to reproduce the problem:\n\nSCENARIO 1:\n\n1. Restart Apache\n\n2. Access http://www.domain.com/\n-> is proxied to 127.0.0.1:8080 as expected\n\n3. Access http://www.domain.com/external/ (and all subsequent requests)\n-> is still proxied to 127.0.0.1:8080, although rewrite_log shows it matches the /external rule\n\n\nSCENARIO 2:\n\n1. Restart Apache\n\n2. Access http://www.domain.com/external/\n-> is proxied to 192.168.100.66:8099 as expected\n\n3. Access http://www.domain.com/external/ (and all subsequent requests)\n-> is still proxied to 192.168.100.66:8099, although rewrite_log shows it matches the / rule\n\nBtw, I don't have mod_proxy_balancer loaded.", "tags": [], "bug_id": 39253, "is_private": false, "count": 0, "id": 87704, "time": "2006-04-08T13:09:18Z", "creator": "bjorn@exoweb.net", "creation_time": "2006-04-08T13:09:18Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "is_private": false, "id": 87706, "attachment_id": 18045, "bug_id": 39253, "creation_time": "2006-04-08T19:58:08Z", "time": "2006-04-08T19:58:08Z", "text": "Created attachment 18045\nPatch against trunk\n\nCould you please give the attached patch a try and have a look if it fixes your\nproblem?"}, {"count": 2, "tags": [], "text": "Yes, great!  With the patch applied I can no longer reproduce the problem.\n\nThanks a bunch!  What great service, on a Saturday! :)", "attachment_id": null, "id": 87707, "creation_time": "2006-04-08T20:42:49Z", "time": "2006-04-08T20:42:49Z", "creator": "bjorn@exoweb.net", "bug_id": 39253, "is_private": false}, {"attachment_id": null, "tags": [], "creator": "rpluem@apache.org", "is_private": false, "count": 3, "id": 87709, "time": "2006-04-09T11:30:00Z", "bug_id": 39253, "creation_time": "2006-04-09T11:30:00Z", "text": "Patch committed to trunk as r392613\n(http://svn.apache.org/viewcvs?rev=392613&view=rev) and proposed for backport\n2.2.x as r392700 (http://svn.apache.org/viewcvs?rev=392700&view=rev)"}, {"count": 4, "attachment_id": null, "creator": "rpluem@apache.org", "is_private": false, "id": 88383, "time": "2006-04-22T15:32:31Z", "bug_id": 39253, "creation_time": "2006-04-22T15:32:31Z", "tags": [], "text": "Backported to 2.2.x as r393047 (http://svn.apache.org/viewcvs?rev=393047&view=rev)."}, {"count": 5, "tags": [], "creator": "nick@webthing.com", "attachment_id": null, "id": 89993, "time": "2006-06-09T10:36:00Z", "bug_id": 39253, "creation_time": "2006-06-09T10:36:00Z", "is_private": false, "text": "*** Bug 39763 has been marked as a duplicate of this bug. ***"}]