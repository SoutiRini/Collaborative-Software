[{"count": 0, "tags": [], "bug_id": 45153, "is_private": false, "text": "I am using version 6.0.16 of tomcat and the problem may be version dependent. The problem I experienced is, if a bean is not contained within a package, the bean is not accessible from a JSP.\n\nWithout a package specified in the bean class and with the bean class file in the classes folder, the following exceptions occurred. The condition was not resolved until a \"package foo;\" statement was added to the bean class and the class file was placed in the \"classes/foo\" folder. \n\nThis is the error when the useBean standard action was used:\nSEVERE: Servlet.service() for servlet jsp threw exception\norg.apache.jasper.JasperException: /testJSTL3.jsp(12,0) The value for the useBean class attribute TestBean1 is invalid.\n        at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)\n...\n\nThis is the error when a scriptlet was used:\nSEVERE: Servlet.service() for servlet jsp threw exception\norg.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: 7 in the jsp file: /testJSTL3.jsp\nTestBean1 cannot be resolved to a type\n4: <%\n5:     String [] movieList = {\"Amelie\", \"Returrn of the King\", \"Mean Girls\"};\n6:     request.setAttribute(\"movieList\", movieList);\n7:     TestBean1 myBean = new TestBean1();\n\n\nThis is the error when the page directive and import attribute were used in the jsp.\nSEVERE: Servlet.service() for servlet jsp threw exception\norg.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: 6 in the generated java file\nThe import TestBean1 cannot be resolved\n\n\nThe following is a failing version of the code:\n\nTestBean1.java:\n\npublic class TestBean1 {\n    private String prop1;\n    private int prop2;\n\n    public TestBean1() {\n    }\n\n    public String getProp1() {\n        return prop1;\n    }\n\n    public void setProp1(String newProp) {\n        prop1 = newProp;\n    }\n\n    public int getProp2() {\n       return prop2;\n    }\n\n   public void setProp2(int newProp) {\n      prop2 = newProp;\n   }\n}\n\ntestBean.jsp\n\n<%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n<%@ page import=\"TestBean1\" %>\n<html><body>\n<%\n    String [] movieList = {\"Amelie\", \"Returrn of the King\", \"Mean Girls\"};\n    request.setAttribute(\"movieList\", movieList);\n    TestBean1 myBean2 = new TestBean1();\n    myBean2.setProp1(\"This is a String a myBean property\");\n    myBean2.setProp2(87654321);\n    request.setAttribute(\"myBean2\", myBean2);\n%>\n<jsp:useBean id=\"myBean\" class=\"TestBean1\" scope=\"request\" />\n<jsp:setProperty name=\"myBean\" property=\"prop1\" value=\"This is a String property.\" />\n<jsp:setProperty name=\"myBean\" property=\"prop2\" value=\"12345678\" />\n\n<%--  forEach looks through scope maps for attribute specified in items attribute --%>\n<table>\n    <c:forEach var=\"s\" items=\"${movieList}\" varStatus=\"movieNum\">\n        <tr><td>Movie ${movieNum.count}: ${s}</td></tr>\n    </c:forEach>  \n    <tr><td>Prop1: ${myBean.prop1}</td></tr>\n    <tr><td>Prop2: ${myBean.prop2}</td></tr>\n    <tr><td>Last Row</td></tr> \n</table>\n</body></html>\n\n\n\nThe following is a working version of the code:\n\nTestBean1.java:\n\npackage foo;\n\npublic class TestBean1 {\n    private String prop1;\n    private int prop2;\n\n    public TestBean1() {\n    }\n\n    public String getProp1() {\n        return prop1;\n    }\n\n    public void setProp1(String newProp) {\n        prop1 = newProp;\n    }\n\n    public int getProp2() {\n       return prop2;\n    }\n\n   public void setProp2(int newProp) {\n      prop2 = newProp;\n   }\n}\n\ntestBean.jsp:\n\n<%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n<%@ page import=\"foo.TestBean1\" %>\n<html><body>\n<%\n    String [] movieList = {\"Amelie\", \"Returrn of the King\", \"Mean Girls\"};\n    request.setAttribute(\"movieList\", movieList);\n    TestBean1 myBean2 = new foo.TestBean1();\n    myBean2.setProp1(\"This is a String a myBean property\");\n    myBean2.setProp2(87654321);\n    request.setAttribute(\"myBean2\", myBean2);\n%>\n<jsp:useBean id=\"myBean\" class=\"foo.TestBean1\" scope=\"request\" />\n<jsp:setProperty name=\"myBean\" property=\"prop1\" value=\"This is a String property.\" />\n<jsp:setProperty name=\"myBean\" property=\"prop2\" value=\"12345678\" />\n\n<%--  forEach looks through scope maps for attribute specified in items attribute --%>\n<table>\n    <c:forEach var=\"s\" items=\"${movieList}\" varStatus=\"movieNum\">\n        <tr><td>Movie ${movieNum.count}: ${s}</td></tr>\n    </c:forEach>  \n    <tr><td>Prop1: ${myBean.prop1}</td></tr>\n    <tr><td>Prop2: ${myBean.prop2}</td></tr>\n    <tr><td>Last Row</td></tr> \n</table>\n</body></html>", "id": 117448, "time": "2008-06-06T13:51:04Z", "creator": "d.brownjr@juno.com", "creation_time": "2008-06-06T13:51:04Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 45153, "text": "This is as required by the Java language specification. You can't use packageless classes in a JSP.\n\nSee:\nhttp://wiki.apache.org/tomcat/FAQ/Class_Not_Found\nhttp://www.google.co.uk/search?hl=en&q=java+import+packageless", "id": 117552, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2008-06-10T14:37:01Z", "time": "2008-06-10T14:37:01Z", "is_private": false}]