[{"count": 0, "tags": [], "creator": "negachov@gmail.com", "attachment_id": 35064, "id": 199309, "time": "2017-06-21T06:40:48Z", "bug_id": 61204, "creation_time": "2017-06-21T06:40:48Z", "is_private": false, "text": "Created attachment 35064\nfix patch\n\nFix patch that reflects changes in loadfactor when glaceful\n\n* phenomenon\n\n(1) apachectl start\n<Proxy balancer://mycluster/>\n  BalancerMember http://127.0.0.1:8081 loadfactor=10\n  BalancerMember http://127.0.0.1:8082 loadfactor=10\n</Proxy>\n\n(2) http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t0\t0\t0\nhttp://127.0.0.1:8082\t\t\t10\t0\tOk\t0\t0\t0\n\n(3) ab -n 500 -c 5 http://localhost/index.html\n\n(4) http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t250\t49K\t20K\nhttp://127.0.0.1:8082\t\t\t10\t0\tOk\t250\t49K\t20K\n\n(5) apachectl graceful\n<Proxy balancer://mycluster/>\n  BalancerMember http://127.0.0.1:8081 loadfactor=10\n  BalancerMember http://127.0.0.1:8082 loadfactor=5\n  BalancerMember http://127.0.0.1:8083 loadfactor=10\n</Proxy>\n\n(6) http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t250\t49K\t20K\nhttp://127.0.0.1:8082\t\t\t10\t0\tOk\t250\t49K\t20K\nhttp://127.0.0.1:8083\t\t\t10\t0\tOk\t0\t0\t0\n\n(7) ab -n 500 -c 5 http://localhost/index.html\n\n(8) http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t417\t81K\t33K\nhttp://127.0.0.1:8082\t\t\t10\t0\tOk\t417\t81K\t33K\nhttp://127.0.0.1:8083\t\t\t10\t0\tOk\t166\t32K\t13K\n\n* after patch\n\n(1) apachectl start\n<Proxy balancer://mycluster/>\n  BalancerMember http://127.0.0.1:8081 loadfactor=10\n  BalancerMember http://127.0.0.1:8082 loadfactor=10\n</Proxy>\n\n(2) http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t0\t0\t0\nhttp://127.0.0.1:8082\t\t\t10\t0\tOk\t0\t0\t0\n\n(3) ab -n 500 -c 5 http://localhost/index.html\n\n* http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t250\t49K\t20K\nhttp://127.0.0.1:8082\t\t\t10\t0\tOk\t250\t49K\t20K\n\n(4) apachectl graceful\n<Proxy balancer://mycluster/>\n  BalancerMember http://127.0.0.1:8081 loadfactor=10\n  BalancerMember http://127.0.0.1:8082 loadfactor=5\n  BalancerMember http://127.0.0.1:8083 loadfactor=10\n</Proxy>\n\n(5) http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t250\t49K\t20K\nhttp://127.0.0.1:8082\t\t\t5\t0\tOk\t250\t49K\t20K\nhttp://127.0.0.1:8083\t\t\t10\t0\tOk\t0\t0\t0\n\n(6) ab -n 500 -c 5 http://localhost/index.html\n\n* http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t450\t87K\t36K\nhttp://127.0.0.1:8082\t\t\t5\t0\tOk\t350\t68K\t28K\nhttp://127.0.0.1:8083\t\t\t10\t0\tOk\t200\t39K\t16K\n\n(7) apachectl graceful\n<Proxy balancer://mycluster/>\n  BalancerMember http://127.0.0.1:8081 loadfactor=10\n  BalancerMember http://127.0.0.1:8083 loadfactor=10\n</Proxy>\n\n(8) http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t450\t87K\t36K\nhttp://127.0.0.1:8083\t\t\t10\t0\tOk\t200\t39K\t16K\n\n(9) ab -n 500 -c 5 http://localhost/index.html\n\n(10) http://127.0.0.1/balancer-manager\nWorker URL\tRoute\tRouteRedir\tFactor\tSet\tStatus\tElected\tTo\tFrom\nhttp://127.0.0.1:8081\t\t\t10\t0\tOk\t700\t136K\t56K\nhttp://127.0.0.1:8083\t\t\t10\t0\tOk\t450\t87K\t36K"}]