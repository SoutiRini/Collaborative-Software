[{"count": 0, "tags": [], "creator": "mdiianni@gmail.com", "attachment_id": null, "text": "Possibility to manipulate WS-Security parameters for SOAP requests.\n\nIncreasing security levels on Internet exposed services require the use of timestamp, signing and encryption on SOAP Requests/Responses.\n\nSuch elements are not currently available on JMeter 2.13 so the only way to implement them is adding a JSR223 Pre-Processor that reads a JKS keystore, loads the sampler XML content, inject a timestamp, encrypt the content and sign the message with appropriate keys before sending.\n\nRegards,\nMaurizio", "id": 189779, "time": "2016-03-29T13:38:45Z", "bug_id": 59244, "creation_time": "2016-03-29T13:38:45Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 59244, "attachment_id": 33889, "is_private": false, "id": 191256, "time": "2016-05-25T13:11:29Z", "creator": "mdiianni@gmail.com", "creation_time": "2016-05-25T13:11:29Z", "text": "Created attachment 33889\nCustom Java Library for SOAP WS-Security\n\nThis library should be installed on $APACHE_HOME/lib\n\nHow it works:\nOn jmeter test plan\nInclude a Thread Group\nInclude a HTTP Request sampler\nInclude a JSR223 Preprocessor\nThe HTTP request contains the XML to be signed and encrypted on plain text\nThe XML is picked up by the custom java library, which will include the security header with timestamp, signature and body encrypted, to be returned back to the HTTP sampler\nFinally, HTTP sampler sends the request to configured endpoint.\n\nRequirements:\nSOAPSecurity.jar (compiled java class)\nKeystore containing the private keys and certificates\n\n\nExample content of the JSR223 preprocessor:\n\nimport com.example.wss.SOAPSecurity;\nimport org.apache.jmeter.services.FileServer;\n\n// get SOAP message from parent sampler body\nString soapData = sampler.getArguments().getArgument(0).getValue();\n\nString baseDir = FileServer.getFileServer().getBaseDir();\nString pathToKeystore = baseDir + File.separator + \"keystore_files\" + File.separator + vars.get(\"SOAP.Keystore\");\nString keystorePassword = vars.get(\"SOAP.KeystorePass\");\nString pathToTruststore = baseDir + File.separator + \"keystore_files\" + File.separator + vars.get(\"SOAP.Truststore\");\nString trustStorePassword = vars.get(\"SOAP.TruststorePass\");\nint timeToLive = Integer.parseInt(vars.get(\"SOAP.TTL\"));\nString signingAlias = vars.get(\"SOAP.SigningAlias\");\nString encryptAlias = vars.get(\"SOAP.EncryptingAlias\");\nString secureSoap = \"\";\n\ntry {\n\tsecureSoap = SOAPSecurity.secureSoapMessageFromString(soapData, pathToKeystore, keystorePassword, pathToTruststore, trustStorePassword, timeToLive, signingAlias, encryptAlias);\n}\ncatch (Exception ex){\n\tlog.warn(\"Error in script\", ex);\n\tthrow ex;\n}\n\n// replace parent sampler body with secured SOAP message\nsampler.getArguments().getArgument(0).setValue(secureSoap);\nvars.put(\"SoapDataRaw\", soapData);"}, {"count": 2, "attachment_id": null, "bug_id": 59244, "text": "I was compiling the code provided here and I ran into following issue during compilation:\n\nC:\\Program Files\\Java\\jdk1.7.0_67\\bin>javac SOAPSecurity.java\n\n\nSOAPSecurity.java:103: error: ')' expected\n        SOAPDocWriter pathWriter = (s, d) -> {\n                                     ^\nSOAPSecurity.java:103: error: ';' expected\n        SOAPDocWriter pathWriter = (s, d) -> {\n                                        ^\nSOAPSecurity.java:113: error: ')' expected\n        SOAPDocWriter stringWriter = (s, d) -> d.parse(new InputSource(new StringReader(s)));\n                                       ^\nSOAPSecurity.java:113: error: ';' expected\n        SOAPDocWriter stringWriter = (s, d) -> d.parse(new InputSource(new StringReader(s)));\n                                          ^\n4 errors\n\n\n\nAny idea what is causing these errors? I need to make  jar file out of the class file after compiling and running this java bean shell code for JMeter.", "id": 194081, "time": "2016-09-29T11:27:01Z", "creator": "arvind.kumar@fisglobal.com", "creation_time": "2016-09-29T11:27:01Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "The code is using java 8 features, that is why you get those error messages. \n\nNote, that I haven't written nor tried the code.", "is_private": false, "id": 194083, "creator": "felix.schumacher@internetallee.de", "time": "2016-09-29T11:56:49Z", "bug_id": 59244, "creation_time": "2016-09-29T11:56:49Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 59244, "text": "There is a 3rd party plugin supporting this:\n\n- https://github.com/tilln/jmeter-wssecurity\n\nShould we close this ?", "id": 200611, "time": "2017-09-02T20:21:45Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-09-02T20:21:45Z", "is_private": false, "attachment_id": null}]