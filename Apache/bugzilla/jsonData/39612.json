[{"count": 0, "attachment_id": null, "bug_id": 39612, "is_private": false, "id": 89260, "time": "2006-05-18T17:12:56Z", "creator": "silentcrooner@gmail.com", "creation_time": "2006-05-18T17:12:56Z", "tags": [], "text": "After running the Cache Taglib successfully in a JBoss 4.x.x environment for\nmany months, I have suddenly experienced a very nasty NullpointerException on\nthe frontpage of our high volume site, where the tag is used to cache dynamic\nlist contents in session scope. \n\nI have not configured the tag using a CacheUtil class but using the default\nparameters.\n\nThis happened for all users/sessions requesting the front page.\n\nAn immediate restart of JBoss solved the issue - but obviously this is highly\nworrying. \n\nI have scoured bugzilla and tried to Google for something similar from CacheTag\nusers to no avail.\n\nLooking into the LRUCache class and comparing to my stack trace it seems that in\nsame strange scenario the key can be null, but still return valid entries from\nthe cache. A NullPointerException then occurs when trying to update the LRU list\nin the noteUsed method afterwords.\n\n18:12:53,755 ERROR [Engine] StandardWrapperValve[jsp]: Servlet.service() for ser\n                                                                            vlet\njsp threw exception\njava.lang.NullPointerException\n        at java.util.LinkedList.remove(LinkedList.java:220)\n        at org.apache.taglibs.cache.LRUCache.noteUsed(LRUCache.java:199)\n        at org.apache.taglibs.cache.LRUCache.get(LRUCache.java:115)\n        at org.apache.taglibs.cache.CacheTag.doStartTag(CacheTag.java:49)\n        at org.apache.jsp.index_jsp._jspService(index_jsp.java:528)\n\nCould this be a threading issue or what?"}, {"count": 1, "tags": [], "creator": "kschneider@gmail.com", "attachment_id": null, "id": 89299, "time": "2006-05-19T14:50:53Z", "bug_id": 39612, "creation_time": "2006-05-19T14:50:53Z", "is_private": false, "text": "It certainly could be a threading/concurrency issue. I've never used the taglib\nbefore, but I took a quick look through the code. It's a bit disturbing that\nthere's literally no synchronization anywhere in the taglib when it's likely\nthat caches are stored in shared scopes (session and application)."}, {"count": 2, "tags": [], "bug_id": 39612, "attachment_id": null, "id": 132401, "time": "2009-11-29T19:38:06Z", "creator": "bayard@apache.org", "creation_time": "2009-11-29T19:38:06Z", "is_private": false, "text": "Resolving. Taglib has been retired."}]