[{"attachment_id": null, "tags": [], "creator": "knst.kolinko@gmail.com", "is_private": false, "count": 0, "id": 127198, "time": "2009-05-19T21:52:39Z", "bug_id": 47225, "creation_time": "2009-05-19T21:52:39Z", "text": "Found in current trunk and tc6.0.x, and tc5.5.x:\n\nhttp://svn.apache.org/viewvc/tomcat/trunk/java/org/apache/tomcat/util/http/mapper/Mapper.java?annotate=734728&pathrev=770809\n\n730 : \t  \t  \t if(mappingData.wrapper == null && noServletPath) {\n731 : \t  \t  \t// The path is empty, redirect to \"/\"\n732 : \t  \t  \tmappingData.redirectPath.setChars\n733 : \t  \t  \t(path.getBuffer(), pathOffset, pathEnd);\n734 : \t  \t  \tpath.setEnd(pathEnd - 1);\n735 : \t  \t  \treturn;\n736 : \t  \t  \t}\n\nOn line 733 the pathEnd argument is wrong:\nit should be length, not an index.\n\nIt should be\n mappingData.redirectPath.setChars(path.getBuffer(), pathOffset, pathEnd-pathOffset);\n\nDo not know, why there are no complaints. May be pathOffset is always zero?"}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "I'd guess pathOffset is (nearly) always zero. I have fixed it in trunk and proposed it for 6.0.x and 5.5.x", "count": 1, "id": 130463, "time": "2009-09-16T14:24:04Z", "bug_id": 47225, "creation_time": "2009-09-16T14:24:04Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 47225, "text": "This has been fixed in 6.0.x and will be included in 6.0.21 onwards.", "id": 130711, "time": "2009-09-27T10:23:58Z", "creator": "markt@apache.org", "creation_time": "2009-09-27T10:23:58Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "is_private": false, "count": 3, "id": 130846, "time": "2009-10-03T09:24:58Z", "bug_id": 47225, "creation_time": "2009-10-03T09:24:58Z", "text": "This has been fixed in 5.5.x and will be included in 5.5.29 onwards."}]