[{"count": 0, "tags": [], "text": "The JMeter XPath Assertion (classname: \norg.jmeter.components.assertions.XpathAssertion) component does not work for a \nsubset of XPath queries.\n\nCurrent behaviour: The XpathAssertion *only* works for XPath queries which \nreturn a NodeList. For any other queries that return a non-NodeList result, \nXpathAssertion fails with a TransformerException.\n\nEg:\n<response>\n  <code>1</code>\n  <error>Print Error</error>\n  <error>Network Error</error>\n</response>\n\nXpathAssertion works for //*[code=1]\n\nXpathAssertion does not work for count(//*error)=2   {this is valid XPath}\nIt returns a TransformerException.\n\nProposed Solution:\nWe need additional meat in XpathAssertion#getResult(SampleResult):\n1. Use generic XPathAPI.eval, instead of XPathAPI.selectNodeList \n2. Make decision based on the return value of point 1.\n   a. If NodeList, do as earlier.\n   b. If boolean, then fail if false, else pass.\n   c. So on for other types.\n\n\nAfter the fix, the following assertions must be successful,\n\n<response>\n  <code>1</code>\n  <error>Print Error</error>\n  <error>Network Error</error>\n</response>\n\nQuery 1\ncount(//*error)=2\n\nQuery 2\ncount(//*[code=1])=1\n\nThese would be unsuccessful:\n\nQuery 3\ncount(//*error)=1\n\nQuery 4\ncount(//*[code=2])=1\n\n(Further tests can be added, depending on what return values from XPath \nqueries are being supported - boolean, number etc)", "is_private": false, "id": 101576, "creator": "ali_ranalvi@persistent.co.in", "time": "2007-04-11T07:47:22Z", "bug_id": 42088, "creation_time": "2007-04-11T07:47:22Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "sebb@apache.org", "text": "Added to SVN in r529081", "count": 1, "id": 101742, "time": "2007-04-15T15:15:14Z", "bug_id": 42088, "creation_time": "2007-04-15T15:15:14Z", "is_private": false}]