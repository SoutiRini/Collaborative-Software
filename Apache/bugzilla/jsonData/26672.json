[{"count": 0, "tags": [], "bug_id": 26672, "attachment_id": null, "text": "The ifController is not evaluating its condition every time it is called.\nThe first condition that is used when it is first called stays valid.\\\nif you use a counter cnt, beginning at zero  and a conditinon \"${cnt} <2}\nthe first time this will evaluate to 0<2 being true, changes to the counter \nwill not be noticed.\nI have a patch for this, but cannot get the ifController to work 100 % \ncorrectly.\nWhen I call it from within different loops, it will not work the second time \nit is called (see attached testplan)\nany help with this is appreciated", "id": 51733, "time": "2004-02-04T20:05:53Z", "creator": "dolfsmits@zonnet.nl", "creation_time": "2004-02-04T20:05:53Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 26672, "text": "Created attachment 10226\nnew version ifController, not 100%", "id": 51734, "time": "2004-02-04T20:08:26Z", "creator": "dolfsmits@zonnet.nl", "creation_time": "2004-02-04T20:08:26Z", "is_private": false, "attachment_id": 10226}, {"count": 2, "tags": [], "creator": "dolfsmits@zonnet.nl", "attachment_id": 10227, "id": 51735, "time": "2004-02-04T20:09:00Z", "bug_id": 26672, "creation_time": "2004-02-04T20:09:00Z", "is_private": false, "text": "Created attachment 10227\ntesplan showing ifController problem"}, {"count": 3, "tags": [], "creator": "dolfsmits@zonnet.nl", "text": "Forgot some remarks.\n\nThe source as it is attached, is not working properly, even if the condition \nfails, the samplers are launched.\n\nWhen i remove the two lines:\nsetFirst(true);\nresetCurrent();\n\nIt is working correctly, but will not be launched in the second pass (from the \nouter loop in the testplan)", "id": 51754, "time": "2004-02-05T08:49:29Z", "bug_id": 26672, "creation_time": "2004-02-05T08:49:29Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 26672, "attachment_id": null, "id": 54849, "time": "2004-03-30T04:59:43Z", "creator": "geyb@runway.cn.net", "creation_time": "2004-03-30T04:59:43Z", "is_private": false, "text": "In the method nextIsAController of the class GenericController, the method \ncurrentReturnedNull will be called if getting next sampler returns a null. Then \nit will be judged whether the controller is done. If the controller is a \nIfController, it will be treated as done when current evaluation returns false. \nAnd then the IfController will be removed from subControllersAndSamplers.\n\nSo I modified line 177 in the method currentReturnedNull as follows:\n\nprotected void currentReturnedNull(Controller c)\n{\n    if (c.isDone() && !c.getClass().getName().equals\n            (\"org.apache.jmeter.control.IfController\"))\n    {\n        removeCurrentElement();\n    }\n    else\n    {\n        incrementCurrent();\n    }\n}\n\nIf it is a IfController, it will not be removed.\nNow it is working fine."}, {"count": 5, "tags": [], "creator": "thads_id@yahoo.com", "attachment_id": null, "id": 56036, "time": "2004-04-19T18:08:09Z", "bug_id": 26672, "creation_time": "2004-04-19T18:08:09Z", "is_private": false, "text": "There are two issues going on here.\n\nThe first is that the condition wasn't getting reevaluated each iteration. I \njust submitted a fix for that, which should make your test case work properly.\n\nThe second problem is that if an IfController ever gets evaluated to false it \ngets removed from the test tree. The problem is that the condition might get \nevaluated to true the next iteration, which we don't get the opportunity for. \nI'm going to leave this defect open and use this to track the progress."}, {"count": 6, "tags": [], "creator": "thads_id@yahoo.com", "attachment_id": null, "id": 56039, "time": "2004-04-19T19:07:46Z", "bug_id": 26672, "creation_time": "2004-04-19T19:07:46Z", "is_private": false, "text": "Committed a fix for this in IfController."}]