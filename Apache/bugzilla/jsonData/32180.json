[{"count": 0, "tags": [], "creator": "sami.pajunen@almare.com", "attachment_id": null, "id": 66714, "time": "2004-11-11T12:43:33Z", "bug_id": 32180, "creation_time": "2004-11-11T12:43:33Z", "is_private": false, "text": "When tomcat is run with SecurityManager enabled all defined EL functions are\nexecuted in privileged AccessControlContext by\nPageContextImpl.proprietaryEvaluate() method.\n\nThis causes problems when EL functions perform actions that require checking of\npermissions or need to access currently executing Subject."}, {"count": 1, "tags": [], "creator": "yoavs@computer.org", "text": "Feel like suggesting a patch? ;)", "id": 67031, "time": "2004-11-17T16:01:15Z", "bug_id": 32180, "creation_time": "2004-11-17T16:01:15Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 32180, "text": "Why is the privileged block needed anyway? I tried removing it (just\nelExprEval.evaluate() call) and everything worked perfectly - including my own\nEL function that requires permission checks.\n\nI don't have any special permissions defined for JSP pages so if EL would\nrequire some, it should have come up.", "id": 67119, "time": "2004-11-18T10:44:52Z", "creator": "sami.pajunen@almare.com", "creation_time": "2004-11-18T10:44:52Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "id": 67269, "time": "2004-11-19T21:29:30Z", "bug_id": 32180, "creation_time": "2004-11-19T21:29:30Z", "is_private": false, "text": "Did you try removing it and running Tomcat with a SecurityManager? ;)"}, {"count": 4, "attachment_id": null, "bug_id": 32180, "text": "Of course. That was the whole point. Running without SecurityManager would\nremove all java permission checks (with authenticated principals) and I need\nthem in my EL functions.\n\nIs there any specific reason to run EL evaluation as privileged? Is this somehow\nrelated to the fact that EL implementation is separate project?\n\nIn any case, running the EL evaluation as privileged will cause Subject to be\nlost from AccessControlContext and this seems to be incorrect.", "id": 67319, "time": "2004-11-22T08:11:39Z", "creator": "sami.pajunen@almare.com", "creation_time": "2004-11-22T08:11:39Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 93259, "time": "2006-09-09T03:57:05Z", "bug_id": 32180, "creation_time": "2006-09-09T03:57:05Z", "is_private": false, "text": "This is intentional so that the examples execute when a security manage is\nconfigured. See revision 305324 on this page\nhttp://svn.apache.org/viewvc/tomcat/jasper/branches/TOMCAT_5_0/jasper2/src/share/org/apache/jasper/runtime/PageContextImpl.java?view=log&pathrev=306114\n\nYou may also want to take a look at revision 306114 on the same page."}]