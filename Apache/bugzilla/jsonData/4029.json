[{"count": 0, "tags": [], "bug_id": 4029, "attachment_id": null, "text": "I originally used ApplyTag for xml/xslt transformation on VisualAge test \nenvironment and it worked fine.  After I changed to StyleTag, I have to add the \nwhole path, starting from c: drive root, to the file parameters, as \"/Program \nFiles/IBM/VisualAge for Java/ide/project_resources/IBM WebSphere Test \nEnvironment/hosts/default_host/default_app/web/header.xslt\" instead \nof \"header.xslt\", otherwise, it won't find the file.\n\nI tried to change the code like ApplyTag, and it works fine.  So, I wonder why \nyou change the code on StyleTag.  Do you have any reason for the change?\n\nThe change I made on StyleTag is as follows (in StyleTag.getSource(Object):\n/*\t        \n try {\t            \n    URL url = URLHelper.createURL( (String) source, pageContext );\n    //return new StreamSource(url.toExternalForm());\n    return new StreamSource(url.openStream(), url.toExternalForm());\n*/\n\n ServletContext context =pageContext.getServletContext();\n InputStream stream=context.getResourceAsStream((String)source);\n return new StreamSource(stream);\n\n/* \t\t\t\t\n }\n           \n  catch (IOException e) {\n  throw new JspException(\"Bad URL:\"+source + \". Exception: \" + e.getMessage() \n  );\n }\n*/ \n\nThe part I comment out is the original code.\n\nI appreciate if you can take a look and let me know your thoughts.\n\nMargaret", "id": 6476, "time": "2001-10-08T14:30:11Z", "creator": "margaret.lu@safeway.com", "creation_time": "2001-10-08T14:30:11Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 4029, "is_private": false, "id": 6477, "time": "2001-10-08T14:36:41Z", "creator": "jstrachan@apache.org", "creation_time": "2001-10-08T14:36:41Z", "tags": [], "text": "Is ../default_host/default_app/web the directory that contains the WEB-INF \ndirectory and the WEB-INF/web.xml file?\n\nIf so, try changing your XSLT document to \"/header.xslt\". All web-context \nrelative URIs should start with \"/\" if they are meant to be relative to the web \nroot.\n\nLet me know if that fixes it or if there is still a problem.\n\nJames"}, {"count": 2, "tags": [], "creator": "margaret.lu@safeway.com", "is_private": false, "text": "James,\nThanks for the prompt response.  \nI don't have web.xml file and I put xtags.tld file under \n../default_host/default_app/web/jakarta-taglibs/Web-inf/ and I specify \nthe file location as \n<%@taglib uri=\"/jakarta-taglibs/Web-inf/xtags.tld\" prefix=\"xsl\" %> on the first \nline of my jsp file.  I hope the setting is OK.  Actually it runs well, only \nthing is that I need specify the whole physical path.\n \nI run the code as you suggested, I got NullPointerException at \nStyleTag.getSource(java.lang.Object).  It can not find the file specified.\n\nDo you have a reason for changing the code as mentioned earlier?\n\nThanks\nMargaret\n", "id": 6481, "time": "2001-10-08T15:45:00Z", "bug_id": 4029, "creation_time": "2001-10-08T15:45:00Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 4029, "is_private": false, "id": 6487, "time": "2001-10-08T16:45:17Z", "creator": "jstrachan@apache.org", "creation_time": "2001-10-08T16:45:17Z", "tags": [], "text": "Because if your URL starts with a '/' then the code should use\n\npageContext.getServletContext().getResource( uri );.\n\nLook at the implementation of URLHelper.getResourceURL() which is called via \nthe getSource() method;"}, {"text": "I'm assuming that the resolution was to prefix your stylesheet or XML source \nfile with \"/\".\n\n<xtags:style xsl=\"/foo.xsl\">\n\nSo I'm marking this bug as resolved.", "tags": [], "creator": "jstrachan@apache.org", "attachment_id": null, "count": 4, "id": 7730, "time": "2001-11-09T10:23:13Z", "bug_id": 4029, "creation_time": "2001-11-09T10:23:13Z", "is_private": false}]