[{"count": 0, "tags": [], "creator": "pradeep.smani@gmail.com", "attachment_id": null, "id": 67980, "time": "2004-12-06T14:51:20Z", "bug_id": 32542, "creation_time": "2004-12-06T14:51:20Z", "is_private": false, "text": "Apache Versio:2.0.43\nmod_perl version:2.0\nperl version: 5.6\n\nWhen Apache2.0.43 is restarted gracefully multiple times it crashes with a\npanic:pthread_key_create error. \nThe configuration file must include mod_perl. Without the inclusion of mod_perl\nthe problem is not replicated.\n\nThis is how to reproduce the problem. Run this script.\n\n\n#!/usr/bin/sh\n\nCOUNT=1\nwhile true\ndo\nkill -HUP `cat \"/var/opt/apache2/logs/httpd.pid\"`\ndate \"+DATE: %m/%d/%y %H:%M:%S count: $COUNT  return: $?\"\nCOUNT=`expr $COUNT + 1`\nsleep 20\ndone\n\nhttpd stops generally at about count =255. The error_log gives this.\n\n[Fri Dec 03 19:07:24 2004] [notice] Digest: done\n[Fri Dec 03 19:07:24 2004] [notice] Apache Web Server/2.0.43 (Unix) mod\n_perl/1.99_07-dev Perl/v5.6.1 DAV/2 configured -- resuming normal operations\n[Fri Dec 03 19:07:33 2004] [notice] SIGUSR1 received.  Doing graceful restart\n[Fri Dec 03 19:07:34 2004] [notice] Digest: generating secret for digest authent\nication ...\n[Fri Dec 03 19:07:34 2004] [notice] Digest: done\n[Fri Dec 03 19:07:34 2004] [notice] Apache Web Server/2.0.43 (Unix) mod\n_perl/1.99_07-dev Perl/v5.6.1 DAV/2 configured -- resuming normal operations\n[Fri Dec 03 19:07:44 2004] [notice] SIGUSR1 received.  Doing graceful restart\npanic: pthread_key_create\n\nDoing a strings on mod_perl.so and perl gave this.\n\n# strings mod_perl.so |grep \"panic: pthread_key_create\"\npanic: pthread_key_create\n# strings /opt/perl/bin/perl|grep \"panic: pthread_key_create\"\npanic: pthread_key_create"}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 67981, "time": "2004-12-06T15:05:54Z", "bug_id": 32542, "creation_time": "2004-12-06T15:05:54Z", "is_private": false, "text": "This is an internal error from Perl; why do you think it's caused by httpd? \nFirstly I'd try reproducing this with the latest versions of Perl, mod_perl and\nhttpd."}, {"count": 2, "tags": [], "text": ">[notice] Apache Web Server/2.0.43 ...\n\nWhere did you get this web server?  from httpd.apache.org, or from HP?\n\nI thought the string from real Apache httpd would be \"Apache/2.0.43\"\n", "attachment_id": null, "bug_id": 32542, "id": 67982, "time": "2004-12-06T15:26:07Z", "creator": "trawick@apache.org", "creation_time": "2004-12-06T15:26:07Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 32542, "attachment_id": null, "id": 68011, "creation_time": "2004-12-06T23:12:38Z", "time": "2004-12-06T23:12:38Z", "creator": "jorton@redhat.com", "text": "Second that.  There's no point in opening this bug report against httpd.  Keep\nthis on the modperl list until you've tracked it down further.", "is_private": false}]