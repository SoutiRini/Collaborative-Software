[{"count": 0, "tags": [], "creator": "cactus@evalica.com", "attachment_id": null, "text": "My application uses database for storing information, particularly mysql.\n\nDuring it's work it takes 4 connections from the connection pool.\nAt this moment number number of physical connections to database increases by 4.\nThen connection are being closed from inside the application.\nNumber of physical connections does not decrease. As I suspect these connections\nare in pool.\nWhen application takes those 4 connections again number of physical connections\nstays the same, i.e. everything is ok.\nBut when I redeploy application connection pool does not release physical\nconnections, i.e. each time after application is being redeployed, number of\nphysical connections increases by 4 until I get exception: too many opened\nconnections.\n\nThis problem occurs with Tomcat 5.0.9 on WinXP with DBCP 1.1 / 1.2\nand Tomcat 5.0.25 on FreeBSD. Mysql is run on FreeBSD", "id": 59016, "time": "2004-06-10T14:11:17Z", "bug_id": 29497, "creation_time": "2004-06-10T14:11:17Z", "is_private": false}, {"count": 1, "tags": [], "text": "I have the same problem on Tomcat 5.0.28, WinXP and Oracle (different versions).\n\nSteps to reproduce:\n1) set up a datasource under some specific context, \n   setting parameter maxIdle to 1 or more\n2) create an application (servlet) that uses the datasource to open (and close)\na connection\n3) run the servlet once\n4) check that there is a connection created \n   (e.g. by using Oracle query \"select * from v$session\")\n5) reload the application (using Tomcat Manager or automatic reloading)\n6) check that the connection is still open\n   (e.g. by using Oracle query \"select * from v$session\")\n7) run the servlet once\n8) check that there is a NEW connection created \n   (e.g. by using Oracle query \"select * from v$session\")\n\nExpected result: \nwhen reloading the application, the connection pool associated with its context\nshould be closed and all its connections also closed (step 6).\n\nRemarks:\n1) if on step 5 I restart Tomcat server instead of reloading one application,\nthe connection pool's connections are closed as expected\n2) if I set maxIdle to 0 when configuring the datasource (step 1),\nthen connections are closed immediately when the application releases them.\nThis indicates that the application closes the used connections correctly.\n\nSee also:\nhttp://mail-archives.apache.org/mod_mbox/jakarta-commons-user/200307.mbox/%3CODENKBKODJNAIPLEPKHHKEAACDAA.mholly@talisentech.com%3E", "is_private": false, "id": 75046, "creator": "altumano@hot.ee", "time": "2005-05-19T10:44:12Z", "bug_id": 29497, "creation_time": "2005-05-19T10:44:12Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Can you guys test setting this \n<parameter>\n  <name>removeAbandoned</name>\n  <value>true</value>\n</parameter>\n\nin the Resource tag as explained here \nhttp://tomcat.apache.org/tomcat-5.0-doc/jndi-datasource-examples-howto.html\n\nRegards\nVicky", "is_private": false, "id": 90231, "creator": "kakvicky@yahoo.co.in", "time": "2006-06-15T04:51:38Z", "bug_id": 29497, "creation_time": "2006-06-15T04:51:38Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of 37262 ***", "id": 91753, "time": "2006-08-01T02:16:09Z", "bug_id": 29497, "creation_time": "2006-08-01T02:16:09Z", "is_private": false, "attachment_id": null}]