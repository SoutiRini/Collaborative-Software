[{"count": 0, "tags": [], "text": "If your machine is fast enough, ApacheCore.mak won't build test_char.h causing\nthe build to break when it gets to trying to build utils.c:\n\n\tcl.exe /D \"EAPI\" /DMOD_SSL=208109 /nologo /MD /W3 /O2 /I \".\\include\" /I \n\".\\os\\win32\" /I \".\\os\\win32\n\\win9xconhook\" /D \"NDEBUG\" /D \"WIN32\" /D \"_WINDOWS\" /D \"WIN32_LEAN_AND_MEAN\" /Fo\n\".\\Release\\\\\" /Fd\".\\Release\\ApacheCore\" /FD /c .\\os\\win32\\service.c\nservice.c\nNMAKE : fatal error U1073: don't know how to make '\".\\main\\test_char.h\"'\nStop.\nNMAKE : fatal error U1077: 'e:\\sd_tools\\VISUALC.60\\bin\\NMAKE.EXE' : return \ncode '0x2'\nStop.\nNMAKE : fatal error U1077: 'e:\\sd_tools\\VISUALC.60\\bin\\nmake.exe' : return \ncode '0x2'\nStop.\nmake: *** [all] Error 2\nNMAKE : fatal error U1077: 'C:\\WINNT\\system32\\cmd.exe' : return code '2'\nStop.\n\nI think this is because both gen_test_char.mak and gen_uri_delims.mak use\nthe tag file src/main/Release/postbld.dep, and it looks like when the CPU\ngets fast enough, the postbld.dep created by gen_uri_delims.mak has the\nsame timestamp as the gen_test_char.exe created afterwards.  Here's a\nsnippet from my build log:\n\n\tcd ..\\..\n\tcd main\n\tNMAKE -nologo -f gen_uri_delims.mak CFG=\"gen_uri_delims - Win32 \nRelease\" RECURSE=0 \n\tif not exist \".\\Release/nul\" mkdir \".\\Release\"\n\tcl.exe @e:\\TEMP\\nma02268.\ngen_uri_delims.c\n\tlink.exe @e:\\TEMP\\nmb02268.\n\t.\\gen_uri_delims > uri_delims.h\n\techo Helper for Post-build step > \".\\Release\\postbld.dep\"\n\tNMAKE -nologo -f gen_test_char.mak CFG=\"gen_test_char - Win32 Release\" \nRECURSE=0 \n\tcl.exe @e:\\TEMP\\nma02176.\ngen_test_char.c\n\tlink.exe @e:\\TEMP\\nmb02176.\n\tcd ..\n\tdel Release\\buildmark.obj\nThe system cannot find the file specified.\n\tNMAKE -nologo -f ApacheCore.mak CFG=\"ApacheCore - Win32 Release\" \nRECURSE=0 \n\tif not exist \".\\Release/nul\" mkdir \".\\Release\"\n\tcl.exe /D \"EAPI\" /DMOD_SSL=208109 /nologo /MD /W3 /O2 /I \".\\include\" /I \n\".\\os\\win32\" /I \".\\os\\win32\n\\win9xconhook\" /D \"NDEBUG\" /D \"WIN32\" /D \"_WINDOWS\" /D \"WIN32_LEAN_AND_MEAN\" /Fo\n\".\\Release\\\\\" /Fd\".\\Release\\ApacheCore\" /FD /c .\\main\\alloc.c\nalloc.c\n\nIn previous builds, these lines appeared in the above log (one line of context):\n\ngen_test_char.c\n\tlink.exe @e:\\TEMP\\nmb00884.\n\t.\\gen_test_char > test_char.h\n\techo Helper for Post-build step > \".\\Release\\postbld.dep\"\n\tcd ..\n\nThe way to fix this is to choose different INTDIR values for the Visual C++\nprojects gen_uri_delims and gen_test_char.  Or make sure you build on a\nlaptop with speedstep and unplug before you start the build (I think I've\nbeen building in my car since I got the new laptop :-)\n\nI tried to find a note about this in Bugzilla, but I wasn't smart enough\nto get a hit.  If it's already there, my apologies; send me the search\nstring and I'll learn from it.  This is a very minor issue but could cause\nstupid people like myself consternation when they upgrade their equipment.", "attachment_id": null, "id": 22955, "creator": "Peter.H.Smith.84@Alum.Dartmouth.org", "time": "2002-09-16T20:35:08Z", "bug_id": 12706, "creation_time": "2002-09-16T20:35:08Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 12706, "attachment_id": null, "id": 34693, "time": "2003-04-08T07:22:25Z", "creator": "wrowe@apache.org", "creation_time": "2003-04-08T07:22:25Z", "is_private": false, "text": "\n  Invoking the .exe's should be a pre-build step of ApacheCore.dsp, methinks.\n  With a target file of the actual .h and the source being the .exe itself.\n\n  If you feel like authoring a patch - you could also set up a custom cl step\n  to compile buildmark.c as a pre-link step - I did that in httpd-2.0's\n  libhttpd.dsp, but have been to busy to invest much time.  Happy to review\n  your patch if you would like to submit."}, {"count": 2, "tags": [], "bug_id": 12706, "attachment_id": null, "is_private": false, "id": 37948, "time": "2003-05-28T20:47:34Z", "creator": "wrowe@apache.org", "creation_time": "2003-05-28T20:47:34Z", "text": "\n  buildmark.c is now a pre-build step.  Now ApacheCore.dsp builds both of the\n  test_char.h and uri_delims.h files so they should no longer conflict or\n  exhibit the odd behaviors that you observed.\n\n  This will show up in your Apache 1.3.28 source .zip package.  Thanks for the\n  report and your analysis!\n"}]