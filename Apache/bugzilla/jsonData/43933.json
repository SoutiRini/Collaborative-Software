[{"count": 0, "tags": [], "creator": "jann.forrer@id.unizh.ch", "text": "Adding an Image Element with BXE is leading to the following entry in the document: \n<object data=\"lenya-document:a8fa0f90-9878-11dc-bb60-f59cc24ae6a4\" height=\"267\"\ntitle=\"kaschaljpg\" type=\"\" width=\"401\" />\n\nHowever I then get an broken image :-( with the URL: \n\nhttp://localhost:8080/lenya/default/authoring/tutorial/testform/jkl/kaschaljpg.jpg?lenya.module=svg&width=401&height=267\n\nThe image is displayed if I remove the width and height attributes from the\nobject element leading to: \n\nhttp://localhost:8080/lenya/default/authoring/tutorial/testform/jkl/kaschaljpg.jpg", "id": 110956, "time": "2007-11-21T13:43:43Z", "bug_id": 43933, "creation_time": "2007-11-21T13:43:43Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "thats probably not a BXE Bug. The problem also shows up if I added height and\nwidth attributes to the object element by hand :-(", "attachment_id": null, "bug_id": 43933, "id": 110957, "time": "2007-11-21T13:47:53Z", "creator": "jann.forrer@id.unizh.ch", "creation_time": "2007-11-21T13:47:53Z", "is_private": false}, {"count": 2, "tags": [], "creator": "rfrovarp@apache.org", "attachment_id": null, "id": 110958, "time": "2007-11-21T13:54:17Z", "bug_id": 43933, "creation_time": "2007-11-21T13:54:17Z", "is_private": false, "text": "The cause is the svg module doesn't work under a non-root context. Probably\nwouldn't work under a proxied context either. Haven't found the exact cause yet."}, {"count": 3, "tags": [], "creator": "rfrovarp@apache.org", "text": "Context is doubled:\n\n/webapp/webapp/default/authoring/tutorial/test.png HTTP/1.1\" 404 1393 \"-\"\n\"Batik/ batik-1_6\"", "id": 110960, "time": "2007-11-21T13:57:01Z", "bug_id": 43933, "creation_time": "2007-11-21T13:57:01Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "jann.forrer@id.unizh.ch", "attachment_id": null, "id": 110962, "time": "2007-11-21T14:16:50Z", "bug_id": 43933, "creation_time": "2007-11-21T14:16:50Z", "is_private": false, "text": "What are the request parameters good for in the URL? If i remove them the jpg is\ndisplayed: \n\nIndex: image2svg.xsl\n===================================================================\n--- image2svg.xsl       (revision 597176)\n+++ image2svg.xsl       (working copy)\n@@ -33,6 +33,7 @@\n            <xsl:value-of select=\".\"/>\n         </xsl:otherwise>\n       </xsl:choose>\n+<!--\n       <xsl:text>?</xsl:text>\n       <xsl:text>lenya.module=svg&amp;</xsl:text>\n       <xsl:if test=\"string(../@height)\">\n@@ -41,6 +42,7 @@\n       <xsl:if test=\"string(../@width)\">\n         <xsl:text>width=</xsl:text><xsl:value-of select=\"../@width\"/>\n       </xsl:if>         \n+-->\n     </xsl:attribute>\n   </xsl:template>\n   \n@@ -50,4 +52,4 @@\n     </xsl:copy>\n   </xsl:template>\n   \n-</xsl:stylesheet>\n\\ No newline at end of file\n+</xsl:stylesheet>\n"}, {"count": 5, "tags": [], "creator": "rfrovarp@apache.org", "text": "Fixed in r597232. Needs to be tested in proxied environment. Since scaling makes\nthe request via the localhost, the proxy call isn't needed. I think. Test in\nnon-proxied environment in both the root and non-root contexts.", "id": 110963, "time": "2007-11-21T14:26:33Z", "bug_id": 43933, "creation_time": "2007-11-21T14:26:33Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "rfrovarp@apache.org", "text": "Can someone test under a proxied environment? If it works, please close.", "id": 110964, "time": "2007-11-21T14:30:48Z", "bug_id": 43933, "creation_time": "2007-11-21T14:30:48Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "text": "Hmm, the localhost calls get the wrong port (Tomcat on port 8080, Apache as\nproxy on port 80):\n\nhttp://localhost:80/lenyatrunk/default/authoring/index/logo.jpg", "attachment_id": null, "bug_id": 43933, "id": 110969, "time": "2007-11-21T16:54:03Z", "creator": "andreas@apache.org", "creation_time": "2007-11-21T16:54:03Z", "is_private": false}, {"count": 8, "tags": [], "creator": "rfrovarp@apache.org", "text": "That means {request:serverPort} is the wrong value to be using. That will have\nto be changed, not sure to what however.", "id": 110971, "time": "2007-11-21T20:19:00Z", "bug_id": 43933, "creation_time": "2007-11-21T20:19:00Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 43933, "attachment_id": null, "text": "Yesterday I used an action to pass the current source resolver to the\nSourceProtocolHandler from the Batik block, which enabled source resolving. Then\nwe could just use the site:// protocol in the SVG, avoiding the http:// call.\n\nA patch for the protocol handler was necessary, though, to avoid an NPE. I'll\nstart a discussion on cocoon-dev if the SourceProtocolHandler is supposed to work.", "id": 110980, "time": "2007-11-22T02:54:52Z", "creator": "andreas@apache.org", "creation_time": "2007-11-22T02:54:52Z", "is_private": false}, {"count": 10, "tags": [], "creator": "andreas@apache.org", "attachment_id": null, "id": 111007, "time": "2007-11-23T06:50:13Z", "bug_id": 43933, "creation_time": "2007-11-23T06:50:13Z", "is_private": false, "text": "I filed a Cocoon bug:\nhttps://issues.apache.org/jira/browse/COCOON-2148"}, {"count": 11, "tags": [], "bug_id": 43933, "attachment_id": null, "text": "Should be fixed in revision 598318, please test.", "id": 111103, "time": "2007-11-26T07:51:24Z", "creator": "andreas@apache.org", "creation_time": "2007-11-26T07:51:24Z", "is_private": false}]