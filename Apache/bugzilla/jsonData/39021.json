[{"count": 0, "tags": [], "text": "The recent changes in the handling of the <role-name>*</role-name> have broken a \nlong standing ability to specify authentication only access. Although not \nexplicitly supported by the servlet spec(and I think it should be), this is a \nuseful feature that users ask for. It can be achieved in various vendor specific \nways via tomcat customizations, but I would like to see inherent support for it. \nThe simplest approach would be a Realm attribute like \nauthenticationOnlyAllRolesMode=true allowing for an authenticated user access \nregardless of the role(s) they have been granted.", "attachment_id": null, "bug_id": 39021, "id": 86974, "time": "2006-03-17T17:04:13Z", "creator": "starksm@starkinternational.com", "creation_time": "2006-03-17T17:04:13Z", "is_private": false}, {"count": 1, "tags": [], "creator": "starksm@starkinternational.com", "attachment_id": 17916, "is_private": false, "id": 86992, "time": "2006-03-18T18:21:30Z", "bug_id": 39021, "creation_time": "2006-03-18T18:21:30Z", "text": "Created attachment 17916\nExample enum type class for the all roles mode behavior"}, {"count": 2, "tags": [], "creator": "starksm@starkinternational.com", "attachment_id": 17917, "is_private": false, "id": 86993, "time": "2006-03-18T18:23:20Z", "bug_id": 39021, "creation_time": "2006-03-18T18:23:20Z", "text": "Created attachment 17917\nRealm.hasResourcePermission override fragment example"}, {"count": 3, "tags": [], "creator": "starksm@starkinternational.com", "is_private": false, "id": 86994, "attachment_id": null, "bug_id": 39021, "creation_time": "2006-03-18T18:27:48Z", "time": "2006-03-18T18:27:48Z", "text": "The jboss embedded tomcat Realm implementation has added support for the \nfollowing modes of handling the all roles auth-constraint:\n\n+ strict = Use the strict servlet spec interpretation which requires that the \nuser have one of the web-app/security-role/role-name\n+ authOnly = Allow any authenticated user\n+ strictAuthOnly = Allow any authenticated user only if there are no web-app/\nsecurity-roles specified\n\nThe attachements illustrate the logic used in the Realm.hasResourcePermission \noverride.\n"}, {"count": 4, "attachment_id": 17927, "bug_id": 39021, "text": "Created attachment 17927\nTranslated patch\n\nAFAIK, this would translate to this patch (note: I am not doing any work in\nthis part of the code at the moment). You need to grant permission for\ninclusion (one of the sources are LGPL covered).", "id": 87053, "time": "2006-03-20T23:57:18Z", "creator": "remm@apache.org", "creation_time": "2006-03-20T23:57:18Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 39021, "attachment_id": null, "text": "I grant the right to license portions or all of the code under the ASL 2.0. The \ntranslated patch looks correct.", "id": 87154, "time": "2006-03-23T16:32:25Z", "creator": "starksm@starkinternational.com", "creation_time": "2006-03-23T16:32:25Z", "is_private": false}, {"count": 6, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "Cool. So unless someone disagrees, I will commit my patch, as the old behavior\nwas most likely useful in some cases.", "id": 87156, "time": "2006-03-23T17:40:56Z", "bug_id": 39021, "creation_time": "2006-03-23T17:40:56Z", "is_private": false}, {"count": 7, "tags": [], "text": "Ok, I applied the patch, since nobody complained.", "is_private": false, "bug_id": 39021, "id": 87289, "time": "2006-03-26T20:55:48Z", "creator": "remm@apache.org", "creation_time": "2006-03-26T20:55:48Z", "attachment_id": null}]