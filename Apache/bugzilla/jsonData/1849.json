[{"count": 0, "tags": [], "bug_id": 1849, "is_private": false, "text": "The ANT_HOME variable only works if it doesn't end with a slash. If the user \nsets the variable with a slash at the end the ant batch file doesn't let the \nuser know what they did wrong.", "id": 2589, "time": "2001-05-21T18:45:43Z", "creator": "g42@snowball.com", "creation_time": "2001-05-21T18:45:43Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 2932, "time": "2001-06-13T08:05:29Z", "bug_id": 1849, "creation_time": "2001-06-13T08:05:29Z", "is_private": false, "text": "I have no problem with this on Linux, is this a Windows specific problem?"}, {"count": 2, "tags": [], "text": "Yes, that seems to be a problem with windows. In the case reported in this \nerror it helps (on W2K) to replace -Dant.home=\"%ANT_HOME%\" with -Dant.home='%\nANT_HOME%' - but this gives errors if you have a directory with spaces in it. \n\nSeems like we really should have a look at the ant.exe which was posted some \ntime ago... ", "is_private": false, "id": 3385, "creator": "nico@apache.org", "time": "2001-07-04T01:47:26Z", "bug_id": 1849, "creation_time": "2001-07-04T01:47:26Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "Has this been solved with Ant 1.4 or is it still a problem?\n\nThanks,\nMagesh", "is_private": false, "id": 5563, "creator": "umagesh@rediffmail.com", "time": "2001-09-14T13:41:53Z", "bug_id": 1849, "creation_time": "2001-09-14T13:41:53Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "The problem seems to be in the quoting mechanism on Win32.  When a value in \nquotes on the command line ends in a backslash, it escapes the following \ncharacter, which is the trailing quote.  The effect is that the rest of the \nline is considered to be part of the quoted value.\n\nOne way to fix this is to append \"\\.\" to ANT_HOME at the last minute, just \nbefore running the command.\n\nI have verified that this works on Windows NT 4.0 SP6 with Ant 1.4.  It would \nbe good if someone could check it out on Win98.\n\nPatch below:\n\n--- d:/ant/bin/ant.bat\tSat Sep 22 11:51:00 2001\n+++ ant.bat\tSun Sep 23 20:10:17 2001\n@@ -87,6 +87,7 @@\n echo.\n \n :checkJikes\n+set ANT_HOME=%ANT_HOME%\\.\n if not \"%JIKESPATH%\" == \"\" goto runAntWithJikes\n \n :runAnt\n", "is_private": false, "id": 5939, "creator": "phanna@ipass.net", "time": "2001-09-23T17:16:16Z", "bug_id": 1849, "creation_time": "2001-09-23T17:16:16Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "On Win98, there is no setlocal, so the ANT_HOME variable will probably grow, \neventually using up the limited environment space. I haven't actually tried \nthat yet, though.", "attachment_id": null, "id": 5940, "creator": "conor@apache.org", "time": "2001-09-23T17:23:05Z", "bug_id": 1849, "creation_time": "2001-09-23T17:23:05Z", "is_private": false}, {"count": 6, "tags": [], "text": "Phil, the place where you append \\. to ANT_HOME should actually be right after \n:checkJava.  But anyway, if ANT_HOME has double-quotes (as in \nANT_HOME=\"c:\\jakarta-ant-1.4\", your solution will not work :-(\n\ncvs diff -w -u -r1.13 ant.bat \nIndex: ant.bat\n===================================================================\nRCS file: /home/cvspublic/jakarta-ant/src/script/ant.bat,v\nretrieving revision 1.13\ndiff -w -u -r1.13 ant.bat\n--- ant.bat\t2001/07/22 09:56:23\t1.13\n+++ ant.bat\t2001/09/25 00:58:16\n@@ -67,6 +67,7 @@\n goto end\n \n :checkJava\n+set ANT_HOME=%ANT_HOME%\\.\n set _JAVACMD=%JAVACMD%\n set LOCALCLASSPATH=%CLASSPATH%\n for %%i in (\"%ANT_HOME%\\lib\\*.jar\") do call \"%ANT_HOME%\\bin\\lcp.bat\" %%i\n\n\n", "attachment_id": null, "id": 5982, "creator": "umagesh@rediffmail.com", "time": "2001-09-24T18:02:45Z", "bug_id": 1849, "creation_time": "2001-09-24T18:02:45Z", "is_private": false}, {"count": 7, "tags": [], "text": "ANT_HOME should not have quotes anyway - environment variables do not need \nquotes and I think quotes in ANT_HOME will break the scripts anyway.", "attachment_id": null, "id": 5983, "creator": "conor@apache.org", "time": "2001-09-24T18:09:58Z", "bug_id": 1849, "creation_time": "2001-09-24T18:09:58Z", "is_private": false}, {"count": 8, "tags": [], "text": "I agree that there should be no quotes...  But just wanted to bring to \nattention that ant WILL work even with quotes, as it is now.  So we may end up \nbreaking somebody's environment if we change...  Dunno how may users have it \nwith quotes anyway.  Maybe we can document it in a FAQ(?) by specifying the \noptions available and leave it at that?\n", "attachment_id": null, "id": 5984, "creator": "umagesh@rediffmail.com", "time": "2001-09-24T18:50:52Z", "bug_id": 1849, "creation_time": "2001-09-24T18:50:52Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 1849, "attachment_id": null, "text": "Actually when ANT_HOME is \"c:\\jakarta-ant-1.4\" with the double-quotes, adding a \n\\. does work.  However it fails when ANT_HOME is \"c:\\jakarta-ant-1.4\\\" with \ndouble-quotes.  However, if ANT_HOME is plain c:\\jakarta-ant-1.4\\ adding a \\. \nworks.  Oh, the mysteries of Win9x ;-)\n", "id": 5985, "time": "2001-09-24T19:05:05Z", "creator": "umagesh@rediffmail.com", "creation_time": "2001-09-24T19:05:05Z", "is_private": false}, {"count": 10, "tags": [], "text": "The env var needs the quotes when you install it in a directory with spaces in it.", "attachment_id": null, "id": 5986, "creator": "donaldp@apache.org", "time": "2001-09-24T20:19:30Z", "bug_id": 1849, "creation_time": "2001-09-24T20:19:30Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 1849, "is_private": false, "text": "No quotes are required for directories with spaces and will actually break the \nscripts if they are present. Check out WHATSNEW for Ant 1.4", "id": 5987, "time": "2001-09-24T21:10:02Z", "creator": "conor@apache.org", "creation_time": "2001-09-24T21:10:02Z", "attachment_id": null}, {"count": 12, "tags": [], "text": "Maybe there's something else and I may have missed it, but, this is the only \ncomment with regards to env vars containing spaces that I could find in \nWHATSNEW:  \n\n* Ant's wrapper scripts now quote the CLASSPATH environment variable, thus\n  supporting classpaths which refer to directories containing spaces. This means\n  that the CLASSPATH environment variable cannot have quotes. Any quotes should\n  be removed. This will not affect the operation of the CLASSPATH environment\n  variable in other contexts.\n\nAnyway, I tested the patch against Win98 and it works when there are no quotes \nin the ANT_HOME env var.  So, if quotes are not an issue, the fix can go in.\n\nThanks,\nMagesh\n", "attachment_id": null, "id": 5998, "creator": "umagesh@rediffmail.com", "time": "2001-09-25T06:22:32Z", "bug_id": 1849, "creation_time": "2001-09-25T06:22:32Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 1849, "attachment_id": null, "text": "I think all this quoting cruft has been worked out for awhile now, so I'm \nclosing this one.", "id": 12576, "time": "2002-03-31T18:54:42Z", "creator": "holtdl@yahoo.com", "creation_time": "2002-03-31T18:54:42Z", "is_private": false}]