[{"count": 0, "tags": [], "creator": "grossniklaus@inf.ethz.ch", "attachment_id": null, "id": 53061, "time": "2004-02-26T21:35:42Z", "bug_id": 27271, "creation_time": "2004-02-26T21:35:42Z", "is_private": false, "text": "I'm running Apache/2.0.48 (Win32) with mod_ssl/2.0.48 and OpenSSL/0.9.7c on a \nWindows 2000 Advanced Server SP4. I've configured the mod_auth_ldap that came \nwith the Apache distribution to validate user accounts against my ADS.\n\nTherefore I've included the following lines into my httpd.conf:\n\nLoadModule auth_ldap_module modules/mod_auth_ldap.so LoadModule ldap_module \nmodules/util_ldap.so\n\nand\n\n<Directory \"C:/Program Files/Apache Group/Apache2/htdocs\"> Options Indexes \nFollowSymLinks AllowOverride None Order allow,deny Allow from all \nAuthName \"Global Information Systems Domain\"\nAuthType Basic\nAuthLDAPUrl \"ldap://localhost/dc=globis,dc=infk,dc=d,dc=ethz,dc=ch?\nsAMAccountName?sub?(objectCategory=Person)(objectClass=User)\"\nAuthLDAPBindDN \"cn=LDAPUser,cn=Users,dc=globis,dc=infk,dc=d,dc=ethz,dc=ch\"\nAuthLDAPBindPassword \"*********\"\nrequire valid-user\n</Directory>\n\nNow, the problem is REALLY strange! As long as the users enter their \ncredentials correctly, everything works perfectly... But (and it's a big BUT) \nas soon someone enters a wrong user/password, the validation always fails from \nany machine and browser until the Apache service is restarted...\n\nThe following warning is logged in the \"error_log\" file once:\n[Thu Feb 26 21:37:13 2004] [warn] [client 129.132.13.8] [6884] auth_ldap \nauthenticate: user abc authentication failed; URI /\n[ldap_simple_bind_s() to check user credentials failed][Invalid Credentials]\n\nEvery subsequent attempt to log in produces the following error:\n[Thu Feb 26 21:37:37 2004] [warn] [client 129.132.13.8] [6884] auth_ldap \nauthenticate: user abc authentication failed; URI / [User not found][No Such \nObject] [Thu Feb 26 21:38:39 2004] [warn] [client 129.132.13.28] [6884] \nauth_ldap authenticate: user xyz authentication failed; URI / [User not found]\n[No Such Object]"}, {"count": 1, "tags": [], "text": "Created attachment 10575\nApache Configuration File", "is_private": false, "bug_id": 27271, "id": 53062, "time": "2004-02-26T21:39:20Z", "creator": "grossniklaus@inf.ethz.ch", "creation_time": "2004-02-26T21:39:20Z", "attachment_id": 10575}, {"count": 2, "tags": [], "text": "Could it be a caching problem of mod_ldap?", "attachment_id": null, "id": 53098, "creator": "grossniklaus@inf.ethz.ch", "time": "2004-02-27T08:32:27Z", "bug_id": 27271, "creation_time": "2004-02-27T08:32:27Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 27271, "is_private": false, "text": "You have answered the question yourself. When a user enter wrong credentials,\nthe cached connection is seen by the ldap server as an anonymous connection and\nby the  cache of ldap_util as a bind connection to \"cn=LDAPUser...\", so it is\nreused for other authentication connection without success since anonymous\nconnection has no access to an Active Directory users list.\nSee bug 27134 for details and a patch to try.\nLet us known if you succeed with that patch.", "id": 53171, "time": "2004-02-28T00:56:33Z", "creator": "dgl@softec.lu", "creation_time": "2004-02-28T00:56:33Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 27271, "text": "Please try the patch at http://nagoya.apache.org/bugzilla/show_bug.cgi?id=27748\nand tell me if it fixes this problem. This patch has been applied to v2.1.0-dev,\nand awaits backporting to v2.0.50-dev.\n", "id": 57742, "attachment_id": null, "creator": "minfrin@sharp.fm", "creation_time": "2004-05-20T22:51:11Z", "time": "2004-05-20T22:51:11Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 27271, "text": "Is this bug still present, or can I close it?\n", "id": 65244, "time": "2004-10-17T18:21:48Z", "creator": "minfrin@apache.org", "creation_time": "2004-10-17T18:21:48Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "jah@progress.com", "attachment_id": null, "text": "Graham,\n\nI think this was fixed in 2.0.50. I just tested with 2.0.52 and password\nprompting works like it should.", "id": 65647, "time": "2004-10-25T13:41:00Z", "bug_id": 27271, "creation_time": "2004-10-25T13:41:00Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "minfrin@apache.org", "text": "Will close - thanks for confirming this for me!\n", "count": 7, "id": 65648, "time": "2004-10-25T13:50:07Z", "bug_id": 27271, "creation_time": "2004-10-25T13:50:07Z", "is_private": false}]