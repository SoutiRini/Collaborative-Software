[{"count": 0, "tags": [], "bug_id": 8186, "text": "I'd noticed that my 2.0.35 server would, within 15 minutes of starting, stop \nresponding to HTTPS requests -- HTTP requests continue without a problem.  \nThinking this might have been resolved recently, I snagged a copy of the \nsources from CVS, compiled, and am getting the same result.\n\nIn my SSLLog I saw references to mutex-related locking issues, as follows:\n\n--\n[17/Apr/2002 00:30:32 14451] [info]  Connection to child 13 established (server \ntechbox.frognet.net:443, client 216.3.2.38)\n[17/Apr/2002 00:30:32 14451] [info]  Seeding PRNG with 136 bytes of entropy\n[17/Apr/2002 00:30:32 14451] [warn]  Failed to acquire global mutex lock\n[17/Apr/2002 00:30:32 14451] [warn]  Failed to release global mutex lock\n--\n\nI recompiled using the following:\n    EXTRA_CFLAGS=\"-g\" ./configure \\\n    --enable-so \\\n    --enable-ssl \\\n    --disable-charset-lite \\\n    --disable-negotiation && make\n.. set SSLLogLevel to debug, and tried different SSLMutex types, all with the \nsame end result: within a few minutes of starting Apache stops responding to \nHTTPS requests but continues to serve HTTP.\n\nI'm on a Red Hat 7.2 box with OpenSSL 0.9.6b; I'll attach the SSLLog and gdb \nbacktrace..", "id": 13828, "time": "2002-04-17T05:51:20Z", "creator": "thc@frognet.net", "creation_time": "2002-04-17T05:51:20Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 8186, "attachment_id": 1602, "id": 13830, "time": "2002-04-17T05:55:54Z", "creator": "thc@frognet.net", "creation_time": "2002-04-17T05:55:54Z", "is_private": false, "text": "Created attachment 1602\nSSLLog (debug) and backtrace"}, {"count": 2, "tags": [], "text": "Is this really 2.0.35, or is it 2.0.36-dev?  I'm confused, because the \nbacktrace you posted shows:\n\n#5  0x4003b548 in apr_global_mutex_lock () \nfrom /usr/local/apache2/lib/libapr.so.0\n#6  0x08074023 in ssl_mutex_on (s=0x810e7e8) at ssl_engine_mutex.c:101\n\nBut ssl_mutex_on() called apr_lock_acquire() in 2.0.35 -- it wasn't changed to \ncall apr_global_mutex_lock() until ssl_engine_mutex.c revision 1.13, which was \npost-2.0.35.\n\nhttp://cvs.apache.org/viewcvs.cgi/httpd-2.0/modules/ssl/ssl_engine_mutex.c.diff?\nr1=1.12&r2=1.13&sortby=date\n\nAny light you could shed on this would be appreciated...\nThanks!", "attachment_id": null, "id": 14130, "creator": "jwoolley@apache.org", "time": "2002-04-20T05:44:28Z", "bug_id": 8186, "creation_time": "2002-04-20T05:44:28Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 8186, "text": "The backtrace attached, as you'd concluded, is from 2.0.36-dev.  For reasons\nunknown (idiocy?), I'd assumed I was acquiring 2.0.35 via CVS.. my apolgies for\nthe confusion.\n\nI've just compiled 2.0.35 (yes, 35) and cannot replicate the problem.  The\ncompile-time options selected, configuration files, etc. are identical, and I'm\nstill seeing the \"failed to acquire/release global mutex lock\" in the error log,\nbut the server hasn't stopped responding to HTTPS requests.  I intend to perform\nmore exhaustive testing in the morning..\n\nRegards,\nTom Howell-Cintron\nthc@frognet.net", "id": 14134, "time": "2002-04-20T10:24:19Z", "creator": "thc@frognet.net", "creation_time": "2002-04-20T10:24:19Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 8186, "attachment_id": null, "text": "I just noticed there's another PR dealing with this.  A patch will be committed for 2.0.37 \nsoon. \n\n*** This bug has been marked as a duplicate of 8124 ***", "id": 15682, "time": "2002-05-07T22:42:33Z", "creator": "jwoolley@apache.org", "creation_time": "2002-05-07T22:42:33Z", "is_private": false}]