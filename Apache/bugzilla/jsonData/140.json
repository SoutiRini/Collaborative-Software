[{"count": 0, "attachment_id": null, "bug_id": 140, "text": "JSP pages are translated java code containing the following fragments:\r\n\r\n    private static boolean _jspx_inited = false;\r\n\r\n    public final void _jspx_init() throws JasperException {\r\n    }\r\n\r\n    public void _jspService(HttpServletRequest request, HttpServletResponse  re\\\r\nsponse)\r\n        throws IOException, ServletException {\r\n\r\n        try {\r\n            if (_jspx_inited == false) {\r\n                _jspx_init();\r\n                _jspx_inited = true;\r\n            }\r\n\r\nThis is not thread-safe.  The \"if\" block needs to be synchronized to\r\navoid surprising results.  This is true even if the operations\r\nperformed by _jspx_init() are idempotent and create only immutable\r\nobjects.  As is, the code will likely work most of the time on most\r\njava implementations but it won't work right all of the time on all\r\njava implementations.  See the Java Language Specification chapter 17\r\nfor a description of the java memory model and some examples of\r\nsurprising results caused by lack of synchronization.  And keep in\r\nmind that the \"java memory model\" includes code motion performed by\r\nthe java compiler and jit as well as by the hardware.\r\n\r\n", "id": 120, "time": "2000-09-22T18:24:07Z", "creator": "dev@tomcat.apache.org", "creation_time": "2000-09-22T18:24:07Z", "tags": [], "is_private": false}]