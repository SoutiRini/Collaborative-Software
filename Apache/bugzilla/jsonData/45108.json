[{"count": 0, "attachment_id": null, "bug_id": 45108, "is_private": false, "id": 117213, "time": "2008-05-31T11:10:03Z", "creator": "simon.gibbs@cantorva.com", "creation_time": "2008-05-31T11:10:03Z", "tags": [], "text": "I had the JSPX source code in a .tag file:\n\n<jsp:root xmlns:jsp=\"http://java.sun.com/JSP/Page\" version=\"1.2\" \n\txmlns:c=\"http://java.sun.com/jsp/jstl/core\"\n    xmlns=\"http://www.w3.org/1999/xhtml\" \n\t>\n\n\t<c:set var=\"googleKey\" value=\"MYKEY\" />\n\t\n\t<script language=\"javascript\" type=\"text/javascript\" \n\t\tsrc=\"http://maps.google.com/maps?file=api&amp;amp;v=2&amp;amp;key=${googleKey}\"\n\t     >\n\t    <!-- comment to avoid the element being rendered as empty tag -->\n\t</script>\n\n </jsp:root>\n\nWhich outputs the value of \"maps?file=api&v=2&key=\" in the XHTML output, which fails validation (See http://validator.w3.org/ ) since &v is neither syntactically correct or a defined entity.\n\nThe following work around is required (and this will be uploaded shortly).\n\n\t<script language=\"javascript\" type=\"text/javascript\" \n\t\tsrc=\"http://maps.google.com/maps?file=api&amp;amp;v=2&amp;amp;key=${googleKey}\"\n\t     >\n\t    <!-- comment to avoid the element being rendered as empty tag -->\n\t</script>"}, {"count": 1, "attachment_id": null, "bug_id": 45108, "text": "There is a copy/paste gaffe in the first snippet, the value was:\n\nsrc=\"http://maps.google.com/maps?file=api&amp;v=2&amp;key=${googleKey}\"", "id": 117214, "time": "2008-05-31T11:20:33Z", "creator": "simon.gibbs@cantorva.com", "creation_time": "2008-05-31T11:20:33Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "william.barker@wilshire.com", "attachment_id": null, "text": "This is exactly the behavior specified in the spec:\n\n<spec-quote version=\"2.1\" section=\"6.2.3\">\nThe first step in processing a JSP document is to process it as an XML\ndocument, checking for well-formedness, processing entity resolution and, if\napplicable, performing validation as described in Section JSP.6.2.4. \n</spec-quote>", "id": 117217, "time": "2008-05-31T17:59:02Z", "bug_id": 45108, "creation_time": "2008-05-31T17:59:02Z", "is_private": false}, {"count": 3, "tags": [], "creator": "simon.gibbs@cantorva.com", "text": "I agree it is correct on the input side, but when that model is processed and output generated, I believe the output is flawed. The output is also XML afterall!\n\n\"&v\" without a trailing \";\" is simply not valid XML syntax. I don't know what the spec says but I believe the intent should be to output \"&amp;v\".\n\nSimilarly, if I had written &eacute; I would expect &eacute; in the output rather than anything that was invalid.", "id": 117218, "time": "2008-06-01T03:47:46Z", "bug_id": 45108, "creation_time": "2008-06-01T03:47:46Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "bug_id": 45108, "is_private": false, "id": 117245, "time": "2008-06-02T05:09:28Z", "creator": "julian.reschke@gmx.de", "creation_time": "2008-06-02T05:09:28Z", "tags": [], "text": "Ampersands in content need to be escaped, both in HTML and XML.\n\nThis isn't even a validity, but an XML-wellformedness error.\n"}, {"count": 5, "tags": [], "creator": "simon.gibbs@cantorva.com", "text": "I agree with William Barker that the input aspect is probably fine, however, I'd like to reopen this bug for further consideration, in particular, is the output  from the process correctly handled?", "id": 117264, "time": "2008-06-02T13:18:20Z", "bug_id": 45108, "creation_time": "2008-06-02T13:18:20Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 45108, "is_private": false, "id": 117469, "time": "2008-06-07T07:40:36Z", "creator": "markt@apache.org", "creation_time": "2008-06-07T07:40:36Z", "tags": [], "text": "Bill is correct. There is no bug here."}, {"count": 7, "tags": [], "creator": "julian.reschke@gmx.de", "attachment_id": null, "text": "Again: a single, unescaped ampersand character in XML (and thus XHTML) is an error, either in the implemenation, the specification, or both.\n", "id": 117500, "time": "2008-06-09T02:38:56Z", "bug_id": 45108, "creation_time": "2008-06-09T02:38:56Z", "is_private": false}]