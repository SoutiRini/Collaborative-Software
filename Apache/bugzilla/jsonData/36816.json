[{"count": 0, "tags": [], "bug_id": 36816, "is_private": false, "text": "If BalancerMembers are configured with a port number or path, then they are not\neditable in the BalancerManager interface.  Clicking on the worker hostname in\nthe interface brings up the 'Edit balancer settings' form instead of the 'Edit\nworker settings' form.\n\nThese workers won't be editable via the interface:\n\n<Proxy balancer://test1>\n    BalancerMember http://my.server.com:1234\n    BalancerMember http://otner.server.com:1234/myapp\n</Proxy>\n\nbut this is OK:\n\n<Proxy balancer://test1>\n    BalancerMember http://my.server.com\n    BalancerMember http://otner.server.com\n</Proxy>\n\nIn both cases, the actual proxying of requests seems to work fine; it's just the\nbalancer manager that doesn't work right for the first cluster.", "id": 80483, "time": "2005-09-26T16:27:43Z", "creator": "cmurtaugh@yahoo.com", "creation_time": "2005-09-26T16:27:43Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "cmurtaugh@yahoo.com", "attachment_id": 16600, "text": "Created attachment 16600\nidentify workers by worker->name instead of worker->hostname", "id": 80813, "time": "2005-10-05T20:29:20Z", "bug_id": 36816, "creation_time": "2005-10-05T20:29:20Z", "is_private": false}, {"count": 2, "tags": [], "creator": "cmurtaugh@yahoo.com", "attachment_id": null, "text": "Upon further investigation, I see that in the balancer_manager interface, the\nworker->hostname is used to identify each worker.  However, the worker should be\nidentified by worker->name (which includes the port number).  \n\nIn my previous example, if I click on the hostname of the first worker in the\nbalancer manager, the URL should contain: 'w=my.server.com:1234' (instead of\n'w=my.server.com' as it does now).  Also, the value of the 'w' hidden field in\nthe 'Edit worker' form should contain 'my.server.com:1234'. \n\nI've attached a patch to mod_proxy_balancer.c that makes that change, and seems\nto fix the problem.", "id": 80814, "time": "2005-10-05T20:29:55Z", "bug_id": 36816, "creation_time": "2005-10-05T20:29:55Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 36816, "text": "Thanks for the patch.\n\nI have no comment on the functionality change, but this:\n\n( sizeof( wsel->scheme ) + 3 )\n\nlooks odd, do you really want strlen() there rather than sizeof()?  (i.e. length\nof string rather than size of pointer)", "id": 80833, "time": "2005-10-06T11:39:25Z", "creator": "jorton@redhat.com", "creation_time": "2005-10-06T11:39:25Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "The same applies to ( sizeof( worker->scheme ) + 3 ). It needs to be\nstrlen(worker->scheme)+3 here. Otherwise it will only work with the scheme http\non 32 bit platforms :-).\nFrom my personal point of view I do not like the pointer arithmetic in this\nplace and cutting the strings back and forth here. Although it would introduce\nsome overhead here, I would prefer using ap_rprintf here and build things up\nfrom worker->hostname and worker->port. But I acknowledge that the pointer\narithmetic way is already used in the code, so this is debatable.\nWhat worries me more (and this is not the fault or a shortcoming of your patch),\nthat there is a need to discuss, what identifies a worker. Your patch will not\nfix your first example because ap_proxy_get_worker in proxy_util.c cuts off the\npath of the uri / url. So you are not able to access\nhttp://otner.server.com:1234/myapp from your example. And if it is decided that\na worker is identified by its complete URL all parts of the code must follow it\nand the full url should be displayed in the manager then. I guess I should\nforward this discussion to the dev list.", "id": 80835, "time": "2005-10-06T12:29:44Z", "bug_id": 36816, "creation_time": "2005-10-06T12:29:44Z", "is_private": false}, {"count": 5, "attachment_id": null, "creator": "jim@apache.org", "is_private": false, "id": 80838, "time": "2005-10-06T14:44:17Z", "bug_id": 36816, "creation_time": "2005-10-06T14:44:17Z", "tags": [], "text": "The balancer-manager \"application\" should be used to change specific settings of a balancer or worker, \nnot redefine one (imo). The code needs to be changed to more adequately reflect the \"name\" which is \nconstant."}, {"count": 6, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "(In reply to comment #5)\n> The balancer-manager \"application\" should be used to change specific settings\nof a balancer or worker, \n> not redefine one (imo).\n\nAgreed.\n\n> The code needs to be changed to more adequately reflect the \"name\" which is \n> constant.\n\nAnd then it should\n\n1. display this \"name\" in the manager and not only scheme and hostanme\n2. enable the user to edit the specific settings of the worker we want to be\n   changeable by the manager\n\n", "id": 80840, "time": "2005-10-06T15:20:56Z", "bug_id": 36816, "creation_time": "2005-10-06T15:20:56Z", "is_private": false}, {"count": 7, "tags": [], "creator": "cmurtaugh@yahoo.com", "attachment_id": null, "text": "I'll defer to the experts w/r/t the use of sizeof vs. strlen.  A little\ndisclosure: I'm not a C programmer, I'm just feeling around in the dark :-)  \n\nI saw sizeof() used in some nearby lines, and just tried to emulate the\nstyle/approach used in the existing balancer_manager code.  \n\nI agree with the suggestion that the worker name should bbe displayed in the UI\nas opposed to the hostname.  ", "id": 80846, "time": "2005-10-06T16:12:27Z", "bug_id": 36816, "creation_time": "2005-10-06T16:12:27Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 36816, "is_private": false, "text": "Fixed in HEAD. Likely to be in 2.1.9 and later", "id": 81013, "time": "2005-10-11T23:39:45Z", "creator": "jim@apache.org", "creation_time": "2005-10-11T23:39:45Z", "attachment_id": null}, {"count": 9, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "text": "Reclassed to delete a version", "id": 135501, "time": "2010-03-22T05:58:56Z", "bug_id": 36816, "creation_time": "2010-03-22T05:58:56Z", "is_private": false}]