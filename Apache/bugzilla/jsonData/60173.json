[{"count": 0, "tags": [], "creator": "mcmanus@ducksong.com", "is_private": false, "text": "Both firefox 52 (nightly) and Chromium Canary have changed their HTTP/2 stacks to allow the peer to use a 64KB dyanmic HPACK table. (the peer can continue using the default 4KB if it likes, this is just an advertisement that says the client will allow it).\n\nTomcat crashes or at least fails to connect with this SETTING in both browsers.\n\nsee\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1305321", "id": 193986, "time": "2016-09-26T13:46:29Z", "bug_id": 60173, "creation_time": "2016-09-26T13:46:29Z", "attachment_id": null}, {"count": 1, "text": "I don't think you need to create so many BZs in various places about this. I also read elsewhere \"If you've got anybody to reach out to wrt tomcat, that would be helpful.\". This must be avoided at all costs, we do read bug reports just fine when they are accurate, we don't need direct spamming.\n\nSo ...\n\"Tomcat crashes\"\nCan we get the JVM dump ?\n\"or at least fails to connect with this SETTING in both browsers\"\nAh ok, so I guess it doesn't crash then. I guess enabling debug logging was probably not an option :)\n\nReading the Tomcat code looks fine for me, the header size from the client settings frame should be used (indeed 8kb and 16kb are working according to the info in the other bug reports, while 32kb and 64kb would not). Odd at this point.\n\nWe'll look at it eventually.", "creator": "remm@apache.org", "attachment_id": null, "id": 193988, "time": "2016-09-26T14:49:41Z", "bug_id": 60173, "creation_time": "2016-09-26T14:49:41Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "text": "I don't have a repro for you - you'll need to download firefox 52 or canary.\n\nSorry if you don't want reports about your project in your tracker - that's the only way I can track reports for my project. I was trying to be helpful. Feel free to close if you're fine with tomcat not working with chrome or firefox - definitely your call I won't be offended.", "attachment_id": null, "id": 193989, "creator": "mcmanus@ducksong.com", "time": "2016-09-26T14:55:23Z", "bug_id": 60173, "creation_time": "2016-09-26T14:55:23Z", "is_private": false}, {"count": 3, "tags": [], "text": "Here is the right place, I don't see the point of the other two. And the details should be here.", "attachment_id": null, "bug_id": 60173, "id": 193990, "time": "2016-09-26T15:01:44Z", "creator": "remm@apache.org", "creation_time": "2016-09-26T15:01:44Z", "is_private": false}, {"count": 4, "text": "I created the bugzilla report at mozilla.org, not Patrick, because it appeared to me to be a regression in Firefox. I guess looking at who reported it was probably not an option. ;)\n\nI had no reason to believe it was a bug in Tomcat since it was working with all previous versions of Firefox and in released versions of other browsers. I tried rolling Tomcat back to previous versions of 8.5 and got the same behavior. If I hadn't reported it at mozilla.org we wouldn't have discovered the source of the issue, since you probably would have just responded with snark if I reported it here.", "creator": "mattcoz@yahoo.com", "attachment_id": null, "id": 193991, "time": "2016-09-26T15:58:23Z", "bug_id": 60173, "creation_time": "2016-09-26T15:58:23Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 60173, "is_private": false, "text": "Tomcat will now support up to 64kB, it was previously harcoded to 16kB in a slightly hidden fashion.\n\nThis has been fixed in the following branches:\n- 9.0.x for 9.0.0.M11 onwards\n- 8.5.x for 8.5.6 onwards", "id": 194038, "time": "2016-09-27T15:33:36Z", "creator": "remm@apache.org", "creation_time": "2016-09-27T15:33:36Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 60173, "attachment_id": null, "id": 194043, "time": "2016-09-27T16:09:18Z", "creator": "mcmanus@ducksong.com", "creation_time": "2016-09-27T16:09:18Z", "is_private": false, "text": "awesome. thank you. I'll update the firefox bug with the release info so anybody tripping over it will know what they need to update to.\n\ncan I ask what happens if a client advertises >64KB? I'm assuming tomcat just uses 64 and ignores the rest but wanted to ask."}, {"count": 7, "tags": [], "text": "ditto, thanks", "attachment_id": null, "bug_id": 60173, "id": 194044, "time": "2016-09-27T17:18:28Z", "creator": "mattcoz@yahoo.com", "creation_time": "2016-09-27T17:18:28Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 60173, "attachment_id": null, "id": 194049, "time": "2016-09-28T07:27:21Z", "creator": "remm@apache.org", "creation_time": "2016-09-28T07:27:21Z", "is_private": false, "text": "(In reply to patrick mcmanus from comment #6)\n> can I ask what happens if a client advertises >64KB? I'm assuming tomcat\n> just uses 64 and ignores the rest but wanted to ask.\n\n64*1024 is the new size limit."}, {"count": 9, "tags": [], "text": "(In reply to Remy Maucherat from comment #8)\n> (In reply to patrick mcmanus from comment #6)\n> > can I ask what happens if a client advertises >64KB? I'm assuming tomcat\n> > just uses 64 and ignores the rest but wanted to ask.\n> \n> 64*1024 is the new size limit.\n\ncan I ask what happens if a client advertises >64KB?\n\ndoes the connection fail? Afterall the client cannot know what your limit is.", "is_private": false, "id": 194055, "creator": "mcmanus@ducksong.com", "time": "2016-09-28T12:25:36Z", "bug_id": 60173, "creation_time": "2016-09-28T12:25:36Z", "attachment_id": null}]