[{"count": 0, "tags": [], "bug_id": 45196, "attachment_id": 22120, "is_private": false, "id": 117638, "time": "2008-06-12T12:04:18Z", "creator": "nat@gentoobr.org", "creation_time": "2008-06-12T12:04:18Z", "text": "Created attachment 22120\nBacktrace \n\nI'm using an Apache 2.2.8 on Linux 2.6.16.13-4-smp and tried to open a\nLDAP connection using mod_authz_ldap and mod_auth_digest, but I got a\nSegmentation Fault. \n\nThe intereting part of my configuration file follows. Obviously personal\ndata have been changed due to privacy. \n\n========\nNameVirtualHost myhost:80\n\nServerName myhost.myintranet\n\nDavLockDB /tmp/DavLockDB\n<AuthnProviderAlias ldap ldap-alias1>\nAuthLDAPBindDN webdav@myserver.myintranet\nAuthLDAPBindPassword mypass\nAuthLDAPURL\n\"ldap://myserver.myintranet:389/CN=Users,DC=adlab,DC=intranet?sAMAccountName?\"\n</AuthnProviderAlias>\n<VirtualHost myhost:myintranet>\n        ServerName myhost.myintranet\n        ServerAlias localhost\n        ExpiresActive On\n        ExpiresDefault now\n        Header add Pragma no-cache\n        Header add Pragma no-store\n        FileETag none\n\n        DocumentRoot /home/myhost/\n\n<Location />\n\nOptions +Indexes\nDav On\nAuthType Digest\nAuthName LDAP_Protected_Place\nAuthDigestProvider ldap-alias1\nAuthzLDAPAuthoritative on\nAuthLDAPGroupAttributeIsDN on\nOrder deny,allow\nAllow from all\n  require valid-user\n\n</Location>\n<Location /ldap-status>\nSetHandler ldap-status\n</Location>\n</VirtualHost>\n\n \n====\n\n\nThe next file is the strace of the httpd proccess during an\nauthentication and the following crash \n\n===\n\n[pid 29353] <... epoll_wait resumed> {{EPOLLIN, {u32=135864328,\nu64=583532467631759368}}}, 2, -1) = 1\n[pid 29353] accept(4, {sa_family=AF_INET, sin_port=htons(44829),\nsin_addr=inet_addr(\"172.22.33.136\")}, [16]) = 7\n[pid 29353] semop(17956929, 0xb7f0d70e, 1) = 0\n[pid 29353] futex(0x8140af8, 0x5 /* FUTEX_??? */, 1 <unfinished ...>\n[pid 29342] <... futex resumed> )       = 0\n[pid 29353] <... futex resumed> )       = 1\n[pid 29353] semop(17956929, 0xb7f0d708, 1) = 0\n[pid 29353] epoll_wait(6,  <unfinished ...>\n[pid 29342] futex(0x8140ac4, FUTEX_WAKE, 1) = 0\n[pid 29342] gettimeofday({1213294759, 951728}, NULL) = 0\n[pid 29342] fcntl64(7, F_GETFL)         = 0x2 (flags O_RDWR)\n[pid 29342] fcntl64(7, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n[pid 29342] gettimeofday({1213294759, 952080}, NULL) = 0\n[pid 29342] read(7, \"GET / HTTP/1.1\\r\\nHost: im5:8080\\r\\nUser-Agent:\nMozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9) Gecko/2008061015\nFirefox/3.0\\r\\nAccept: text/html,application/xhtml\n+xml,application/xml;q=0.9,*/*;q=0.8\\r\\nAccept-Language: en-us,en;q=0.5\n\\r\\nAccept-Encoding: gzip,deflate\\r\\nAccept-Charset:\nISO-8859-1,utf-8;q=0.7,*;q=0.7\\r\\nKeep-Alive: 300\\r\\nConnection:\nkeep-alive\\r\\nAuthorization: Digest username=\\\"lalala\\\", realm=\n\\\"LDAP_Protected_Place\\\", nonce=\n\\\"Ba4MKHxPBAA=7d90825f04dcd95723aba0abfb0745c7ad3617b5\\\", uri=\\\"/\\\",\nalgorithm=MD5, resp\"..., 8000) = 605\n[pid 29342] gettimeofday({1213294759, 952604}, NULL) = 0\n[pid 29342] gettimeofday({1213294759, 952806}, NULL) = 0\n[pid 29342] gettimeofday({1213294759, 952917}, NULL) = 0\n[pid 29342] stat64(\"/home/myhost/\", {st_mode=S_IFDIR|0755,\nst_size=160, ...}) = 0\n[pid 29342] open(\"/.htaccess\", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No\nsuch file or directory)\n[pid 29342] open(\"/home/myhost/.htaccess\", O_RDONLY|O_LARGEFILE) = -1\nENOENT (No such file or directory)\n[pid 29342] open(\"/home/myhost/.htaccess\", O_RDONLY|O_LARGEFILE) = -1\nENOENT (No such file or directory)\n[pid 29342] open(\"/home/myhost/.htaccess\", O_RDONLY|O_LARGEFILE) = -1\nENOENT (No such file or directory)\n[pid 29342] --- SIGSEGV (Segmentation fault) @ 0 (0) ---\nProcess 29342 detached\n[pid 29325] <... rt_sigtimedwait resumed> 0xbfba83f8) = -1 EINTR\n(Interrupted system call)\n[pid 29339] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29338] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29333] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29335] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29332] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29352] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29351] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29350] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29349] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29337] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29340] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29328] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29330] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29343] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29341] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29329] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29331] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29334] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29336] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29345] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29348] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29347] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29346] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29344] <... futex resumed> )       = -1 EINTR (Interrupted system\ncall)\n[pid 29353] <... epoll_wait resumed> 8191fb8, 2, -1) = -1 EINTR\n(Interrupted system call)\n[pid 29339] +++ killed by SIGSEGV +++\nProcess 29339 detached\n[pid 29338] +++ killed by SIGSEGV +++\nProcess 29338 detached\n[pid 29333] +++ killed by SIGSEGV +++\nProcess 29333 detached\n[pid 29335] +++ killed by SIGSEGV +++\nProcess 29335 detached\n[pid 29332] +++ killed by SIGSEGV +++\nProcess 29332 detached\n[pid 29352] +++ killed by SIGSEGV +++\nProcess 29352 detached\n[pid 29351] +++ killed by SIGSEGV +++\nProcess 29351 detached\n[pid 29350] +++ killed by SIGSEGV +++\nProcess 29350 detached\n[pid 29349] +++ killed by SIGSEGV +++\nProcess 29349 detached\n[pid 29337] +++ killed by SIGSEGV +++\nProcess 29337 detached\n[pid 29340] +++ killed by SIGSEGV +++\nProcess 29340 detached\n[pid 29328] +++ killed by SIGSEGV +++\nProcess 29328 detached\n[pid 29330] +++ killed by SIGSEGV +++\nProcess 29330 detached\n[pid 29343] +++ killed by SIGSEGV +++\nProcess 29343 detached\n[pid 29341] +++ killed by SIGSEGV +++\nProcess 29341 detached\n[pid 29329] +++ killed by SIGSEGV +++\nProcess 29329 detached\n[pid 29331] +++ killed by SIGSEGV +++\nProcess 29331 detached\n[pid 29334] +++ killed by SIGSEGV +++\nProcess 29334 detached\n[pid 29336] +++ killed by SIGSEGV +++\nProcess 29336 detached\n[pid 29345] +++ killed by SIGSEGV +++\nProcess 29345 detached\n[pid 29348] +++ killed by SIGSEGV +++\nProcess 29348 detached\n[pid 29347] +++ killed by SIGSEGV +++\nProcess 29347 detached\n[pid 29346] +++ killed by SIGSEGV +++\nProcess 29346 detached\n[pid 29344] +++ killed by SIGSEGV +++\nProcess 29344 detached\n[pid 29353] +++ killed by SIGSEGV +++\nProcess 29353 detached\n[pid 29325] +++ killed by SIGSEGV +++\nProcess 29325 detached\n\n===\n\n\nThen, I'll add the last lines of the ltrace of the httpd. \n\n===\n\ngeteuid()\n= 0\nsetuid(65534)\n= 0\napr_time_now(5, 11, 20, 39, 24)\n= 0x8e162468\napr_snprintf(0xbfcd84e7, 8165, 0x8096d80, 0x80924c8, 24)\n= 8\napr_snprintf(0xbfcd84ef, 8157, 0x8096d86, 0xb7ad9e64, 1670)\n= 20\napr_vsnprintf(0xbfcd64cc, 8137, 0xb7ad9af0, 0xbfcda538, 1670)\n= 72\napr_file_puts(0xbfcd84cc, 0x80a70d8, 8137, 0xbfcda538, 1670)\n= 0\napr_file_flush(0x80a70d8, 0x80a70d8, 8137, 0xbfcda538, 1670)\n= 0\napr_time_now(0xb7ad9e64, 0xbfcd8503, 0xbfcda4d8, 0x80787bc, 0xb7ad9e64)\n= 0x8e162742\napr_snprintf(0xbfcd84d7, 8165, 0x8096d80, 0x80924c8, 0xb7ad9e64)\n= 8\napr_snprintf(0xbfcd84df, 8157, 0x8096d86, 0xb7ad9e64, 1761)\n= 20\napr_vsnprintf(0xbfcd64bc, 8137, 0xb7ad99f8, 0xbfcda528, 1761)\n= 71\napr_file_puts(0xbfcd84bc, 0x80a70d8, 8137, 0xbfcda528, 1761)\n= 0\napr_file_flush(0x80a70d8, 0x80a70d8, 8137, 0xbfcda528, 1761)\n= 0\napr_setup_signal_thread(0x8140920, 0x80aaf98, 0x8140920, 0x80a3008, 0)\n= 0\ncalloc(1, 100)\n= 0x8188e18\napr_palloc(0x8140920, 16, 0x8140920, 0x80a3008, 0)\n= 0x8140a40\napr_threadattr_create(0xbfcda5e8, 0x8140920, 0x8140920, 0x80a3008, 0)\n= 0\napr_threadattr_detach_set(0x8140a50, 0, 0x8140920, 0x80a3008, 0)\n= 0\napr_thread_create(0xbfcda5e4, 0x8140a50, 0x8087810, 0x8140a40, 0x8140920\n<unfinished ...>\n+++ killed by SIGTRAP +++\n\n===\n\nThe backtrace of the error is attached."}, {"count": 1, "tags": [], "bug_id": 45196, "attachment_id": null, "is_private": false, "id": 117639, "time": "2008-06-12T12:38:06Z", "creator": "covener@gmail.com", "creation_time": "2008-06-12T12:38:06Z", "text": "If you skip mod_vhost_alias, do you see a message saying 'ldap' isn't a valid digest provider?  \n\nIt looks like it's unimplemented, but is only caught when it's referenced directly."}, {"count": 2, "text": "(In reply to comment #1)\n> If you skip mod_vhost_alias, do you see a message saying 'ldap' isn't a valid\n> digest provider?  \n> \n> It looks like it's unimplemented, but is only caught when it's referenced\n> directly.\n> \n\nDo you mean mod_vhost_alias or mod_authn_alias ? I'm using mod_authn_alias. ", "creator": "nat@gentoobr.org", "is_private": false, "id": 117641, "time": "2008-06-12T13:07:12Z", "bug_id": 45196, "creation_time": "2008-06-12T13:07:12Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 45196, "attachment_id": null, "id": 117650, "time": "2008-06-12T15:32:11Z", "creator": "rpluem@apache.org", "creation_time": "2008-06-12T15:32:11Z", "is_private": false, "text": "(In reply to comment #2)\n> (In reply to comment #1)\n> > If you skip mod_vhost_alias, do you see a message saying 'ldap' isn't a valid\n> > digest provider?  \n> > \n> > It looks like it's unimplemented, but is only caught when it's referenced\n> > directly.\n> > \n> \n> Do you mean mod_vhost_alias or mod_authn_alias ? I'm using mod_authn_alias. \n> \n\nThat's what Eric wanted to say :-).\n"}, {"count": 4, "tags": [], "bug_id": 45196, "attachment_id": null, "is_private": false, "id": 117653, "time": "2008-06-12T16:05:00Z", "creator": "nat@gentoobr.org", "creation_time": "2008-06-12T16:05:00Z", "text": "(In reply to comment #3)\n> (In reply to comment #2)\n> > (In reply to comment #1)\n> > > If you skip mod_vhost_alias, do you see a message saying 'ldap' isn't a valid\n> > > digest provider?  \n> > > \n> > > It looks like it's unimplemented, but is only caught when it's referenced\n> > > directly.\n> > > \n> > \n> > Do you mean mod_vhost_alias or mod_authn_alias ? I'm using mod_authn_alias. \n> > \n> \n> That's what Eric wanted to say :-).\n> \n\nExactly. \n\nSyntax error on line 233 of /opt/apache-2.2.8/conf/httpd.conf:\nUnknown Authn provider: ldap-alias1\n\n"}, {"count": 5, "tags": [], "bug_id": 45196, "attachment_id": null, "id": 117661, "time": "2008-06-13T04:30:59Z", "creator": "covener@gmail.com", "creation_time": "2008-06-13T04:30:59Z", "is_private": false, "text": "\n> Exactly. \n> \n> Syntax error on line 233 of /opt/apache-2.2.8/conf/httpd.conf:\n> Unknown Authn provider: ldap-alias1\n> \n\nnot the expected error --  you have to change more in the conf to stop using mod_authn_alias b/c you're still referecing the alias you created."}, {"count": 6, "tags": [], "bug_id": 45196, "attachment_id": null, "is_private": false, "id": 117679, "time": "2008-06-13T13:48:57Z", "creator": "nat@gentoobr.org", "creation_time": "2008-06-13T13:48:57Z", "text": "(In reply to comment #5)\n> > Exactly. \n> > \n> > Syntax error on line 233 of /opt/apache-2.2.8/conf/httpd.conf:\n> > Unknown Authn provider: ldap-alias1\n> > \n> \n> not the expected error --  you have to change more in the conf to stop using\n> mod_authn_alias b/c you're still referecing the alias you created.\n> \n\nI've commented out the mod_authn_alias configuration part and my Location configuration now looks like this\n\n<Location />\nOptions +Indexes\nDav On\nAuthType Digest\nAuthName LDAP_Protected_Place\nAuthzLDAPAuthoritative on\nAuthLDAPGroupAttributeIsDN on\nOrder deny,allow\nAllow from all\n  require valid-user\n</Location>\n\nMy new strace follows. Obviously there's no LDAP configuration now, as I've commented it out. Was that what you wanted? \n\n[pid 31877] fstat64(6, {st_mode=S_IFREG|0755, st_size=42148, ...}) = 0\n[pid 31877] mmap2(NULL, 42852, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 6, 0) = 0xaa157000\n[pid 31877] madvise(0xaa157000, 42852, MADV_SEQUENTIAL|0x1) = 0\n[pid 31877] mmap2(0xaa161000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 6, 0x9) = 0xaa161000\n[pid 31877] close(6)                    = 0\n[pid 31877] munmap(0xb7a0a000, 45727)   = 0\n[pid 31877] futex(0xaa161644, FUTEX_WAKE, 2147483647) = 0\n[pid 31877] _exit(0)                    = ?\nProcess 31877 detached\n[pid 31903] <... epoll_wait resumed> {{EPOLLIN, {u32=135855088, u64=583492782133935088}}}, 2, -1) = 1\n[pid 31903] accept(4, {sa_family=AF_INET, sin_port=htons(44545), sin_addr=inet_addr(\"172.22.33.136\")}, [16]) = 6\n[pid 31903] semop(18874454, 0xb7e7c70e, 1) = 0\n[pid 31903] futex(0x813c330, 0x5 /* FUTEX_??? */, 1 <unfinished ...>\n[pid 31885] <... futex resumed> )       = 0\n[pid 31903] <... futex resumed> )       = 1\n[pid 31903] semop(18874454, 0xb7e7c708, 1) = 0\n[pid 31903] epoll_wait(7,  <unfinished ...>\n[pid 31885] futex(0x813c2fc, FUTEX_WAKE, 1) = 0\n[pid 31885] gettimeofday({1213389275, 335059}, NULL) = 0\n[pid 31885] fcntl64(6, F_GETFL)         = 0x2 (flags O_RDWR)\n[pid 31885] fcntl64(6, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n[pid 31885] gettimeofday({1213389275, 335387}, NULL) = 0\n[pid 31885] read(6, \"GET / HTTP/1.1\\r\\nHost: im5:8080\\r\\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9) Gecko/2008061015 Firefox/3.0\\r\\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\\r\\nAccept-Language: en-us,en;q=0.5\\r\\nAccept-Encoding: gzip,deflate\\r\\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\\r\\nKeep-Alive: 300\\r\\nConnection: keep-alive\\r\\nIf-Modified-Since: Fri, 13 Jun 2008 18:48:30 GMT\\r\\n\\r\\n\", 8000) = 400\n[pid 31885] gettimeofday({1213389275, 335866}, NULL) = 0\n[pid 31885] gettimeofday({1213389275, 336030}, NULL) = 0\n[pid 31885] gettimeofday({1213389275, 336094}, NULL) = 0\n[pid 31885] stat64(\"/export/htdocs/webdav2/\", {st_mode=S_IFDIR|0755, st_size=280, ...}) = 0\n[pid 31885] open(\"/.htaccess\", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)\n[pid 31885] open(\"/home/.htaccess\", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)\n[pid 31885] open(\"/home/myhost/.htaccess\", O_RDONLY|O_LARGEFILE) = 8\n[pid 31885] fstat64(8, {st_mode=S_IFREG|0644, st_size=0, ...}) = 0\n[pid 31885] read(8, \"\", 4096)           = 0\n[pid 31885] close(8)                    = 0\n[pid 31885] writev(6, [{\"HTTP/1.1 401 Authorization Required\\r\\nDate: Fri, 13 Jun 2008 20:34:35 GMT\\r\\nServer: Apache/2.2.8 (Unix) DAV/2\\r\\nWWW-Authenticate: Digest realm=\\\"LDAP_Protected_Place\\\", nonce=\\\"ugy7NJJPBAA=89a6a4fb79ac224c68e78572ed04f3b8145d1c2f\\\", algorithm=MD5, qop=\\\"auth\\\"\\r\\nContent-Length: 475\\r\\nKeep-Alive: timeout=2, max=20\\r\\nConnection: Keep-Alive\\r\\nContent-Type: text/html; charset=iso-8859-1\\r\\n\\r\\n\", 376}, {\"<!DOCTYPE HTML PUBLIC \\\"-//IETF//DTD HTML 2.0//EN\\\">\\n<html><head>\\n<title>401 Authorization Required</title>\\n</head><body>\\n<h1>Authorization Required</h1>\\n<p>This server could not verify that you\\nare authorized to access the document\\nrequested.  Either you supplied the wrong\\ncredentials (e.g., bad password), or your\\nbrowser doesn\\'t understand how to supply\\nthe credentials required.</p>\\n<hr>\\n<address>Apache/2.2.8 (Unix) DAV/2 Server at im5 Port 8080</address>\\n</body></html>\\n\", 475}], 2) = 851\n[pid 31885] read(6, 0x8197fd8, 8000)    = -1 EAGAIN (Resource temporarily unavailable)\n[pid 31885] gettimeofday({1213389275, 337607}, NULL) = 0\n[pid 31885] write(5, \"x.x.x.x - - [13/Jun/2008:17:34:35 -0300] \\\"GET / HTTP/1.1\\\" 401 475\\n\", 72) = 72\n[pid 31885] gettimeofday({1213389275, 337814}, NULL) = 0\n[pid 31885] times({tms_utime=2, tms_stime=1, tms_cutime=0, tms_cstime=0}) = -328335869\n[pid 31885] gettimeofday({1213389275, 337941}, NULL) = 0\n[pid 31885] poll([{fd=6, events=POLLIN}], 1, 2000) = 0\n[pid 31885] gettimeofday({1213389277, 337133}, NULL) = 0\n[pid 31885] gettimeofday({1213389277, 337247}, NULL) = 0\n[pid 31885] shutdown(6, 1 /* send */)   = 0\n[pid 31885] poll([{fd=6, events=POLLIN}], 1, 2000) = 0\n[pid 31885] close(6)                    = 0\n[pid 31885] gettimeofday({1213389279, 337213}, NULL) = 0\n[pid 31885] futex(0x813c330, FUTEX_WAIT, 27, NULL <unfinished ...>\n[pid 31903] <... epoll_wait resumed> {{EPOLLIN, {u32=135855088, u64=583492782133935088}}}, 2, -1) = 1\n[pid 31903] accept(4, {sa_family=AF_INET, sin_port=htons(44546), sin_addr=inet_addr(\"172.22.33.136\")}, [16]) = 6\n[pid 31903] semop(18874454, 0xb7e7c70e, 1) = 0\n[pid 31903] futex(0x813c330, 0x5 /* FUTEX_??? */, 1 <unfinished ...>\n[pid 31879] <... futex resumed> )       = 0\n[pid 31903] <... futex resumed> )       = 1\n[pid 31903] semop(18874454, 0xb7e7c708, 1) = 0\n[pid 31903] epoll_wait(7,  <unfinished ...>\n[pid 31879] futex(0x813c2fc, FUTEX_WAKE, 1) = 0\n[pid 31879] gettimeofday({1213389285, 360183}, NULL) = 0\n[pid 31879] fcntl64(6, F_GETFL)         = 0x2 (flags O_RDWR)\n[pid 31879] fcntl64(6, F_SETFL, O_RDWR|O_NONBLOCK) = 0\n[pid 31879] gettimeofday({1213389285, 360504}, NULL) = 0\n[pid 31879] read(6, \"GET / HTTP/1.1\\r\\nHost: im5:8080\\r\\nUser-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9) Gecko/2008061015 Firefox/3.0\\r\\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\\r\\nAccept-Language: en-us,en;q=0.5\\r\\nAccept-Encoding: gzip,deflate\\r\\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\\r\\nKeep-Alive: 300\\r\\nConnection: keep-alive\\r\\nIf-Modified-Since: Fri, 13 Jun 2008 18:48:30 GMT\\r\\nAuthorization: Digest username=\\\"lalala\\\", realm=\\\"LDAP_Protected_Place\\\", nonce=\\\"ugy7NJJPBAA=89a6a4fb79ac224c68e78\"..., 8000) = 655\n[pid 31879] gettimeofday({1213389285, 360900}, NULL) = 0\n[pid 31879] gettimeofday({1213389285, 361010}, NULL) = 0\n[pid 31879] gettimeofday({1213389285, 361067}, NULL) = 0\n[pid 31879] stat64(\"/home/myhost/\", {st_mode=S_IFDIR|0755, st_size=280, ...}) = 0\n[pid 31879] open(\"/.htaccess\", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)\n[pid 31879] open(\"/home/.htaccess\", O_RDONLY|O_LARGEFILE) = -1 ENOENT (No such file or directory)\n[pid 31879] open(\"/home/myhost/.htaccess\", O_RDONLY|O_LARGEFILE) = 8\n[pid 31879] brk(0x81d0000)              = 0x81d0000\n[pid 31879] fstat64(8, {st_mode=S_IFREG|0644, st_size=0, ...}) = 0\n[pid 31879] read(8, \"\", 4096)           = 0\n[pid 31879] close(8)                    = 0\n[pid 31879] gettimeofday({1213389285, 361941}, NULL) = 0\n[pid 31879] write(2, \"[Fri Jun 13 17:34:45 2008] [error] Internal error: pcfg_openfile() called with NULL filename\\n\", 93) = 93\n[pid 31879] gettimeofday({1213389285, 362138}, NULL) = 0\n[pid 31879] write(2, \"[Fri Jun 13 17:34:45 2008] [error] [client 172.22.33.136] (9)Bad file descriptor: Could not open password file: (null)\\n\", 119) = 119\n[pid 31879] writev(6, [{\"HTTP/1.1 500 Internal Server Error\\r\\nDate: Fri, 13 Jun 2008 20:34:45 GMT\\r\\nServer: Apache/2.2.8 (Unix) DAV/2\\r\\nContent-Length: 608\\r\\nConnection: close\\r\\nContent-Type: text/html; charset=iso-8859-1\\r\\n\\r\\n\", 195}, {\"<!DOCTYPE HTML PUBLIC \\\"-//IETF//DTD HTML 2.0//EN\\\">\\n<html><head>\\n<title>500 Internal Server Error</title>\\n</head><body>\\n<h1>Internal Server Error</h1>\\n<p>The server encountered an internal error or\\nmisconfiguration and was unable to complete\\nyour request.</p>\\n<p>Please contact the server administrator,\\n sos@uol.com.br and inform them of the time the error occurred,\\nand anything you might have done that may have\\ncaused the error.</p>\\n<p>More information about this error may be available\\nin the server error lo\"..., 608}], 2) = 803\n[pid 31879] gettimeofday({1213389285, 362804}, NULL) = 0\n[pid 31879] write(5, \"x.x.x.x - lalala [13/Jun/2008:17:34:45 -0300] \\\"GET / HTTP/1.1\\\" 500 608\\n\", 80) = 80\n[pid 31879] gettimeofday({1213389285, 362985}, NULL) = 0\n[pid 31879] times({tms_utime=2, tms_stime=1, tms_cutime=0, tms_cstime=0}) = -328334866\n[pid 31879] gettimeofday({1213389285, 363105}, NULL) = 0\n[pid 31879] shutdown(6, 1 /* send */)   = 0\n[pid 31879] poll([{fd=6, events=POLLIN, revents=POLLIN|POLLHUP}], 1, 2000) = 1\n[pid 31879] read(6, \"\", 512)            = 0\n[pid 31879] close(6)                    = 0\n[pid 31879] gettimeofday({1213389285, 429749}, NULL) = 0\n[pid 31879] futex(0x813c330, FUTEX_WAIT, 29, NULL\n\n"}, {"count": 7, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "(In reply to comment #6)\n\n> I've commented out the mod_authn_alias configuration part and my Location\n> configuration now looks like this\n> \n> <Location />\n> Options +Indexes\n> Dav On\n> AuthType Digest\n> AuthName LDAP_Protected_Place\n> AuthzLDAPAuthoritative on\n> AuthLDAPGroupAttributeIsDN on\n\nYour config misses\n\nAuthDigestProvider ldap\n\n", "id": 117681, "time": "2008-06-13T14:02:02Z", "bug_id": 45196, "creation_time": "2008-06-13T14:02:02Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 45196, "attachment_id": null, "id": 117684, "time": "2008-06-13T15:15:48Z", "creator": "nat@gentoobr.org", "creation_time": "2008-06-13T15:15:48Z", "is_private": false, "text": "(In reply to comment #7)\n> (In reply to comment #6)\n> \n> > I've commented out the mod_authn_alias configuration part and my Location\n> > configuration now looks like this\n> > \n> > <Location />\n> > Options +Indexes\n> > Dav On\n> > AuthType Digest\n> > AuthName LDAP_Protected_Place\n> > AuthzLDAPAuthoritative on\n> > AuthLDAPGroupAttributeIsDN on\n> \n> Your config misses\n> \n> AuthDigestProvider ldap\n> \n\nAh, I think I got it now\n\nstat64(\"/home/myhost\", {st_mode=S_IFDIR|0755, st_size=280, ...}) = 0\nwrite(2, \"Syntax error on line 233 of /opt/apache-2.2.8/conf/httpd.conf:\\n\", 63Syntax error on line 233 of /opt/apache-2.2.8/conf/httpd.conf:\n) = 63\nwrite(2, \"Unknown Authn provider: ldap-alias1\\n\", 36Unknown Authn provider: ldap-alias1\n) = 36\nmunmap(0xb7a3f000, 58848)               = 0\nmunmap(0xb7a4e000, 12252)               = 0\nmunmap(0xb7a51000, 9244)                = 0\nmunmap(0xb7a54000, 8796)                = 0\nmunmap(0xb7a57000, 4604)                = 0\nmunmap(0xb7a59000, 14620)               = 0\nmunmap(0xb7a5d000, 4604)                = 0\nmunmap(0xb7a5f000, 30204)               = 0\nmunmap(0xb7a67000, 10604)               = 0\nmunmap(0xb7a6a000, 15740)               = 0\nmunmap(0xb7a6e000, 42908)               = 0\nmunmap(0xb7a79000, 30024)               = 0\nmunmap(0xb7a81000, 18636)               = 0\nmunmap(0xb7a86000, 8060)                = 0\nmunmap(0xb7a88000, 32448)               = 0\nmunmap(0xb7a90000, 17076)               = 0\nmunmap(0xb7a95000, 83224)               = 0\nmunmap(0xb7aaa000, 13248)               = 0\nmunmap(0xb7aae000, 23164)               = 0\nmunmap(0xb7ab4000, 33660)               = 0\nmunmap(0xb7abd000, 30048)               = 0\nmunmap(0xb7ac5000, 32156)               = 0\nmunmap(0xb7acd000, 10396)               = 0\nmunmap(0xb7ad0000, 67432)               = 0\nmunmap(0xb7ae1000, 4588)                = 0\nmunmap(0xb7ae3000, 11516)               = 0\nmunmap(0xb7ae6000, 9548)                = 0\nmunmap(0xb7ae9000, 11452)               = 0\nmunmap(0xb7aec000, 9596)                = 0\nmunmap(0xb7aef000, 15172)               = 0\nmunmap(0xb7af3000, 11612)               = 0\nmunmap(0xb7af6000, 9372)                = 0\nmunmap(0xb7af9000, 22284)               = 0\nmunmap(0xb7aff000, 7964)                = 0\nmunmap(0xb7b01000, 8168)                = 0\nmunmap(0xb7b03000, 10112)               = 0\nmunmap(0xb7b06000, 22080)               = 0\nmunmap(0xb7b1f000, 44860)               = 0\nmunmap(0xb7b2a000, 17116)               = 0\nmunmap(0xb7b0c000, 72844)               = 0\nmunmap(0xb7b2f000, 11868)               = 0\nmunmap(0xb7b32000, 15100)               = 0\nmunmap(0xb7b36000, 37736)               = 0\nmunmap(0xb7b40000, 18752)               = 0\nmunmap(0xb7b45000, 9948)                = 0\nmunmap(0xb7b48000, 13060)               = 0\nmunmap(0xb7b4c000, 22112)               = 0\nmunmap(0xb7b52000, 19968)               = 0\nmunmap(0xb7b57000, 31412)               = 0\nmunmap(0xb7b5f000, 11084)               = 0\nmunmap(0xb7b62000, 28368)               = 0\nmunmap(0xb7b69000, 9468)                = 0\nmunmap(0xb7b6c000, 6940)                = 0\nmunmap(0xb7b6e000, 27168)               = 0\nmunmap(0xb7b75000, 4572)                = 0\nmunmap(0xb7b77000, 9532)                = 0\nmunmap(0xb7b7a000, 7484)                = 0\nmunmap(0xb7b7c000, 10076)               = 0\nmunmap(0xb7b7f000, 9344)                = 0\nmunmap(0xb7f46000, 7100)                = 0\nmunmap(0xb7f48000, 9384)                = 0\nmunmap(0xb7f4b000, 7676)                = 0\nmunmap(0xb7f4d000, 7996)                = 0\nmunmap(0xb7f4f000, 7996)                = 0\nclose(4)                                = 0\nclose(3)                                = 0\nexit_group(1)                           = ?\nProcess 32103 detached\n\n"}, {"count": 9, "text": "Now from Apache 2.2.9: \n\nim5:/home/user # gdb /opt/apache-2.2.9/bin/httpd 17190\nGNU gdb 6.4\nCopyright 2005 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain\nconditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"i586-suse-linux\"...Using host libthread_db\nlibrary \"/lib/libthread_db.so.1\".\n\nAttaching to program: /opt/apache-2.2.9/bin/httpd, process 17190\nReading symbols from /lib/libm.so.6...done.\nLoaded symbols for /lib/libm.so.6\nReading symbols from /opt/apache-2.2.9/lib/libaprutil-1.so.0...done.\nLoaded symbols for /opt/apache-2.2.9/lib/libaprutil-1.so.0\nReading symbols from /usr/lib/libexpat.so.1...done.\nLoaded symbols for /usr/lib/libexpat.so.1\nReading symbols from /opt/apache-2.2.9/lib/libapr-1.so.0...done.\nLoaded symbols for /opt/apache-2.2.9/lib/libapr-1.so.0\nReading symbols from /lib/librt.so.1...done.\nLoaded symbols for /lib/librt.so.1\nReading symbols from /lib/libcrypt.so.1...done.\nLoaded symbols for /lib/libcrypt.so.1\nReading symbols from /lib/libpthread.so.0...done.\n[Thread debugging using libthread_db enabled]\n[New Thread -1210636624 (LWP 17190)]\n[New Thread -1432216672 (LWP 17217)]\n[New Thread -1423823968 (LWP 17216)]\n[New Thread -1415431264 (LWP 17215)]\n[New Thread -1407038560 (LWP 17214)]\n[New Thread -1398645856 (LWP 17213)]\n[New Thread -1390253152 (LWP 17212)]\n[New Thread -1381860448 (LWP 17211)]\n[New Thread -1373467744 (LWP 17210)]\n[New Thread -1365075040 (LWP 17209)]\n[New Thread -1356682336 (LWP 17208)]\n[New Thread -1348289632 (LWP 17207)]\n[New Thread -1339896928 (LWP 17206)]\n[New Thread -1331504224 (LWP 17205)]\n[New Thread -1323111520 (LWP 17204)]\n[New Thread -1314718816 (LWP 17203)]\n[New Thread -1306326112 (LWP 17202)]\n[New Thread -1297933408 (LWP 17201)]\n[New Thread -1289540704 (LWP 17200)]\n[New Thread -1281148000 (LWP 17199)]\n[New Thread -1272755296 (LWP 17198)]\n[New Thread -1264362592 (LWP 17197)]\n[New Thread -1255969888 (LWP 17196)]\n[New Thread -1247577184 (LWP 17195)]\n[New Thread -1239184480 (LWP 17194)]\n[New Thread -1230791776 (LWP 17193)]\n[New Thread -1222399072 (LWP 17192)]\nLoaded symbols for /lib/libpthread.so.0\nReading symbols from /lib/libdl.so.2...done.\nLoaded symbols for /lib/libdl.so.2\nReading symbols from /lib/libc.so.6...done.\nLoaded symbols for /lib/libc.so.6\nReading symbols from /lib/ld-linux.so.2...done.\nLoaded symbols for /lib/ld-linux.so.2\nReading symbols from /lib/libresolv.so.2...done.\nLoaded symbols for /lib/libresolv.so.2\nReading symbols from /lib/libnss_files.so.2...done.\nLoaded symbols for /lib/libnss_files.so.2\nReading symbols from /lib/libnss_dns.so.2...done.\nLoaded symbols for /lib/libnss_dns.so.2\nReading symbols from /lib/libnss_compat.so.2...done.\nLoaded symbols for /lib/libnss_compat.so.2\nReading symbols from /lib/libnsl.so.1...done.\nLoaded symbols for /lib/libnsl.so.1\nReading symbols from /lib/libnss_nis.so.2...done.\nLoaded symbols for /lib/libnss_nis.so.2\nReading symbols from /opt/apache-2.2.9/modules/mod_authn_file.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authn_file.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authn_dbm.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authn_dbm.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authn_anon.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authn_anon.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authn_dbd.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authn_dbd.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authn_default.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authn_default.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authn_alias.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authn_alias.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authz_host.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authz_host.so\nReading symbols from\n/opt/apache-2.2.9/modules/mod_authz_groupfile.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authz_groupfile.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authz_user.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authz_user.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authz_dbm.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authz_dbm.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authz_owner.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authz_owner.so\nReading symbols from /opt/apache-2.2.9/modules/mod_authnz_ldap.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authnz_ldap.so\nReading symbols from /usr/lib/libldap-2.3.so.0...done.\nLoaded symbols for /usr/lib/libldap-2.3.so.0\nReading symbols from /usr/lib/liblber-2.3.so.0...done.\nLoaded symbols for /usr/lib/liblber-2.3.so.0\nReading symbols from /usr/lib/libsasl2.so.2...done.\nLoaded symbols for /usr/lib/libsasl2.so.2\nReading symbols from /usr/lib/libssl.so.0.9.8...done.\nLoaded symbols for /usr/lib/libssl.so.0.9.8\nReading symbols from /usr/lib/libcrypto.so.0.9.8...done.\nLoaded symbols for /usr/lib/libcrypto.so.0.9.8\nReading symbols from /opt/apache-2.2.9/modules/mod_authz_default.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_authz_default.so\nReading symbols from /opt/apache-2.2.9/modules/mod_auth_basic.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_auth_basic.so\nReading symbols from /opt/apache-2.2.9/modules/mod_auth_digest.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_auth_digest.so\nReading symbols from /opt/apache-2.2.9/modules/mod_cache.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_cache.so\nReading symbols from /opt/apache-2.2.9/modules/mod_ext_filter.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_ext_filter.so\nReading symbols from /opt/apache-2.2.9/modules/mod_include.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_include.so\nReading symbols from /opt/apache-2.2.9/modules/mod_filter.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_filter.so\nReading symbols from /opt/apache-2.2.9/modules/mod_ldap.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_ldap.so\nReading symbols from /opt/apache-2.2.9/modules/mod_log_config.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_log_config.so\nReading symbols from /opt/apache-2.2.9/modules/mod_env.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_env.so\nReading symbols from /opt/apache-2.2.9/modules/mod_mime_magic.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_mime_magic.so\nReading symbols from /opt/apache-2.2.9/modules/mod_cern_meta.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_cern_meta.so\nReading symbols from /opt/apache-2.2.9/modules/mod_expires.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_expires.so\nReading symbols from /opt/apache-2.2.9/modules/mod_headers.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_headers.so\nReading symbols from /opt/apache-2.2.9/modules/mod_usertrack.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_usertrack.so\nReading symbols from /opt/apache-2.2.9/modules/mod_unique_id.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_unique_id.so\nReading symbols from /opt/apache-2.2.9/modules/mod_setenvif.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_setenvif.so\nReading symbols from /opt/apache-2.2.9/modules/mod_version.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_version.so\nReading symbols from /opt/apache-2.2.9/modules/mod_mime.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_mime.so\nReading symbols from /opt/apache-2.2.9/modules/mod_dav.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_dav.so\nReading symbols from /opt/apache-2.2.9/modules/mod_status.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_status.so\nReading symbols from /opt/apache-2.2.9/modules/mod_autoindex.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_autoindex.so\nReading symbols from /opt/apache-2.2.9/modules/mod_asis.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_asis.so\nReading symbols from /opt/apache-2.2.9/modules/mod_info.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_info.so\nReading symbols from /opt/apache-2.2.9/modules/mod_dav_fs.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_dav_fs.so\nReading symbols from /opt/apache-2.2.9/modules/mod_dav_lock.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_dav_lock.so\nReading symbols from /opt/apache-2.2.9/modules/mod_vhost_alias.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_vhost_alias.so\nReading symbols from /opt/apache-2.2.9/modules/mod_negotiation.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_negotiation.so\nReading symbols from /opt/apache-2.2.9/modules/mod_dir.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_dir.so\nReading symbols from /opt/apache-2.2.9/modules/mod_imagemap.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_imagemap.so\nReading symbols from /opt/apache-2.2.9/modules/mod_actions.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_actions.so\nReading symbols from /opt/apache-2.2.9/modules/mod_speling.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_speling.so\nReading symbols from /opt/apache-2.2.9/modules/mod_userdir.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_userdir.so\nReading symbols from /opt/apache-2.2.9/modules/mod_alias.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_alias.so\nReading symbols from /opt/apache-2.2.9/modules/mod_rewrite.so...done.\nLoaded symbols for /opt/apache-2.2.9/modules/mod_rewrite.so\nReading symbols from /opt/apache-2.2.9/lib/apr-util-1/apr_ldap-1.so...done.\nLoaded symbols for /opt/apache-2.2.9/lib/apr-util-1/apr_ldap-1.so\nReading symbols from /lib/libgcc_s.so.1...done.\nLoaded symbols for /lib/libgcc_s.so.1\n0xffffe410 in __kernel_vsyscall ()\n(gdb) c\nContinuing.\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread -1222399072 (LWP 17192)]\n0x00000000 in ?? ()\n(gdb) bt\n#0  0x00000000 in ?? ()\n#1  0xb7d70cb8 in authn_alias_get_realm_hash (r=0x8183b00, user=0x8185090\n\"lalala\", \n    realm=0x814c5f8 \"LDAP_Protected_Place\", rethash=0xb723a324) at\nmod_authn_alias.c:100\n#2  0xb7d533ce in authenticate_digest_user (r=0x8183b00) at\nmod_auth_digest.c:1352\n#3  0x08071c79 in ap_run_check_user_id (r=0x8183b00) at request.c:70\n#4  0x08073bda in ap_process_request_internal (r=0x8183b00) at request.c:214\n#5  0x08084028 in ap_process_request (r=0x8183b00) at http_request.c:256\n#6  0x080812db in ap_process_http_connection (c=0x817fca0) at\nhttp_core.c:190\n#7  0x0807d439 in ap_run_process_connection (c=0x817fca0) at connection.c:43\n#8  0x080890f4 in worker_thread (thd=0x812e340, dummy=0x8176570) at\nworker.c:544\n#9  0xb7f09046 in dummy_worker (opaque=0x812e340) at\nthreadproc/unix/thread.c:142\n#10 0xb7e9d34b in start_thread () from /lib/libpthread.so.0\n#11 0xb7e3165e in clone () from /lib/libc.so.6\n(gdb) ", "creator": "nat@gentoobr.org", "is_private": false, "id": 118084, "time": "2008-06-27T15:46:06Z", "bug_id": 45196, "creation_time": "2008-06-27T15:46:06Z", "tags": [], "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 45196, "attachment_id": null, "is_private": false, "id": 118088, "time": "2008-06-27T17:53:29Z", "creator": "covener@gmail.com", "creation_time": "2008-06-27T17:53:29Z", "text": "Sorry I was a little unclear before.\n\nmod_authnz_ldap doesn't work with mod_authn_digest, when you configure it directly (without mod_authn_alias in the middle) you'll get an error at initialization time stating such.\n\nI don't think mod_authnz_ldap can be taught to work with digest, becuase generally Apache won't be able to \"retrieve\" your password like other authn modules.  \n\nI do not think that mod_authn_alias can easily detect at startup that you're trying to pair digest and a provider that doesn't support it.  That leaves a 500 or something at runtime as the only option, which we should at least get in to prevent the crash."}, {"count": 11, "tags": [], "bug_id": 45196, "attachment_id": null, "is_private": false, "id": 118124, "time": "2008-06-30T12:56:04Z", "creator": "nat@gentoobr.org", "creation_time": "2008-06-30T12:56:04Z", "text": "(In reply to comment #10)\n> Sorry I was a little unclear before.\n> \n> mod_authnz_ldap doesn't work with mod_authn_digest, when you configure it\n> directly (without mod_authn_alias in the middle) you'll get an error at\n> initialization time stating such.\n> \n> I don't think mod_authnz_ldap can be taught to work with digest, becuase\n> generally Apache won't be able to \"retrieve\" your password like other authn\n> modules.  \n> \n> I do not think that mod_authn_alias can easily detect at startup that you're\n> trying to pair digest and a provider that doesn't support it.  That leaves a\n> 500 or something at runtime as the only option, which we should at least get in\n> to prevent the crash.\n> \n\n\nCould you suggest me any kind of digest auth with ldap? That would be very helpful. \n\nThanks in advance, \n\nRenata "}, {"count": 12, "tags": [], "text": "> Could you suggest me any kind of digest auth with ldap? That would be very\n> helpful. \n> \n\nI don't think it's possible in general, because ldap would need to know the users plaintext password to be able to generate the necessary hash to provide to the digest code.\n\nfor dbm and file auth, you've explicitly stored this hash in a local database.\n\nif you wanted to store this same hash in an ldap attribute, it would require an enhancement in Apache to be able to pull the hash out.\n\n", "is_private": false, "id": 118131, "creator": "covener@gmail.com", "time": "2008-06-30T13:13:21Z", "bug_id": 45196, "creation_time": "2008-06-30T13:13:21Z", "attachment_id": null}, {"count": 13, "tags": [], "text": "(In reply to comment #12)\n> > Could you suggest me any kind of digest auth with ldap? That would be very\n> > helpful. \n> > \n> \n> I don't think it's possible in general, because ldap would need to know the\n> users plaintext password to be able to generate the necessary hash to provide\n> to the digest code.\n> \n> for dbm and file auth, you've explicitly stored this hash in a local database.\n> \n> if you wanted to store this same hash in an ldap attribute, it would require an\n> enhancement in Apache to be able to pull the hash out.\n> \n\nSo, Apache should not start and give me an error message like \"ldap and digest authentication don't work together\" instead of starting up and then giving an SIGSEGV? ", "is_private": false, "id": 118135, "creator": "nat@gentoobr.org", "time": "2008-06-30T13:50:43Z", "bug_id": 45196, "creation_time": "2008-06-30T13:50:43Z", "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 45196, "attachment_id": null, "id": 118136, "time": "2008-06-30T13:52:57Z", "creator": "covener@gmail.com", "creation_time": "2008-06-30T13:52:57Z", "is_private": false, "text": "\n> So, Apache should not start and give me an error message like \"ldap and digest\n> authentication don't work together\" instead of starting up and then giving an\n> SIGSEGV? \n> \n\nYes, this already happens when you use them together directly without AuthnProviderAlias in the middle.  It fools the startup checking ,which I've corrected in trunk."}, {"count": 15, "tags": [], "text": "Backported to 2.2.10", "attachment_id": null, "id": 121562, "creator": "rpluem@apache.org", "time": "2008-10-15T12:55:07Z", "bug_id": 45196, "creation_time": "2008-10-15T12:55:07Z", "is_private": false}, {"count": 16, "tags": [], "creator": "covener@gmail.com", "is_private": false, "text": "*** Bug 44754 has been marked as a duplicate of this bug. ***", "id": 127334, "time": "2009-05-23T14:37:53Z", "bug_id": 45196, "creation_time": "2009-05-23T14:37:53Z", "attachment_id": null}]