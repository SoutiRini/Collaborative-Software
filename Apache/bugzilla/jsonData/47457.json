[{"count": 0, "tags": [], "creator": "jason@plutext.org", "text": "Because the jar indexer skips the META-INF Entries, the classloader fails to load resources from META-INF dirs (in my case, vfs-providers.xml)\n\nSee further http://forums.java.net/jive/thread.jspa?messageID=292293\n\nFrom that link, there is an workaround, which looks like this:\n\n<jar index=\"true\" jarfile=\"main.jar\" basedir=\"classes\">\n<manifest>\n<attribute name=\"Class-Path\" value=\"lib1.jar lib2.jar\"/>\n</manifest>\n<indexjars path=\"${web.home}/applet/lib1.jar\"/>\n<indexjars path=\"${web.home}/applet/lib2.jar\"/>\n<zipfileset src=\"lib1.jar\" excludes=\"*.LIST *.RSA. *.SF\" includes=\"META-INF/**\"/>\n<zipfileset src=\"lib2.jar\" excludes=\"*.LIST *.RSA. *.SF\" includes=\"META-INF/**\"/>\n</jar>\n\nThe trick is to transfer all special META-INF-data to the main.jar's META-INF/", "id": 128435, "time": "2009-06-30T04:53:44Z", "bug_id": 47457, "creation_time": "2009-06-30T04:53:44Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 47457, "is_private": false, "id": 128720, "time": "2009-07-10T06:45:11Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-10T06:45:11Z", "tags": [], "text": "If you look at the code you'll see META-INF is explicitly excluded and the commit hints this may in order to be compatible with Sun's jar command.\n\nIn fact I've performed a few experiments and\n\njar i some.jar\n\nwill not include META-INF when using JDK 1.4.2 but when using JDK 1.5, so Sun's jar has changed behavior and Ant hasn't tracked that.\n\nWe probably should not include META-INF unconditionally since this may very well cause problems for people using the resulting jars on Java 1.4 or earlier.  I'm going to add an option (defaulting to false) that has to be set explicitly in order to include META-INF inside the index."}, {"count": 2, "tags": [], "text": "added with svn revision 792960", "is_private": false, "bug_id": 47457, "id": 128723, "time": "2009-07-10T07:24:54Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-10T07:24:54Z", "attachment_id": null}]