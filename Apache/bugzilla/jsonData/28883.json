[{"count": 0, "tags": [], "creator": "anthony.goubard@wanadoo.nl", "text": "<containsregexp> and <matchesregexp>\n The first one would test a string if it contains a regular exression.\n The second one would test if a string matches a regular expression.\n\n Example:\n <condition propery=\"legal-password\">\n    <containsregexp pattern=\"[1-9]\" value=\"${user-input}\"/>\n </condition>\n <fail message=\"Your password should at least contain one number\"\nunless=\"legal-password\"/>\n \n This feature has been discussed on Ant developer mailing list at\nhttp://marc.theaimsgroup.com/?t=108369006500001&r=1&w=2 and it seems that\nnobody disagreed.\n I'll try to find some time this week or next week to implement them.\n \nAbout the implementation:\n They should be in the optional package (as dependant of a regex library).\n <containsregexp pattern=\"\" value=\"\">\n both condition should also accept the <regexp> sub element.", "id": 57127, "time": "2004-05-10T19:09:19Z", "bug_id": 28883, "creation_time": "2004-05-10T19:09:19Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "anthony.goubard@wanadoo.nl", "is_private": false, "text": "Created attachment 16996\nAdd the matches condition. Test and documentation included.\n\nIf you want to to do something else for this RFE, contact me.", "id": 82681, "time": "2005-11-19T16:36:58Z", "bug_id": 28883, "creation_time": "2005-11-19T16:36:58Z", "attachment_id": 16996}, {"count": 2, "tags": [], "bug_id": 28883, "attachment_id": 18903, "is_private": false, "id": 94039, "time": "2006-09-24T04:57:33Z", "creator": "paulk@asert.com.au", "creation_time": "2006-09-24T04:57:33Z", "text": "Created attachment 18903\nAn alternative implementation\n\nI created a patch for very similar functionality .. and then checked for\nsimilar enhancement requests. Note to self ... Bugzilla is your friend.\n\nThis patch is similar to but different enough that it might be worthy of\nconsideration anyway. It is against the latest HEAD and uses flags as per\nthe other regexp tasks rather than specific attributes.\n\nI have left out a junit test case but will happily supply it or an antunit test\nif there is interest. I did create an acceptance test of sorts by adding the\nfollowing lines to testcases/taskdefs/condition.xml:\n\n    <regexp id=\"myid\" pattern=\"^[a-z]{3,4}$\"/>\n\n    <target name=\"matches-simple\">\n      <condition property=\"matches\">\n\t<matches string=\"abc\">\n\t  <regexp refid=\"myid\"/>\n\t</matches>\n      </condition>\n      <echo>${matches}</echo>\n    </target>\n\n    <target name=\"nomatch\">\n      <condition property=\"nomatch\">\n\t<not>\n\t  <matches string=\"abc\" pattern=\"^b.*\" />\n\t</not>\n      </condition>\n      <echo>${nomatch}</echo>\n    </target>\n\n    <target name=\"matches-date\">\n\t<tstamp>\n\t  <format property=\"today\" pattern=\"dd-MM-yyyy\" locale=\"en\"/>\n\t</tstamp>\n      <echo>${today}</echo>\n      <condition property=\"isValidDate\">\n\t<matches string=\"${today}\">\n\t  <regexp pattern=\"[0123]\\d-[01]\\d-[12]\\d\\d\\d\" />\n\t</matches>\n      </condition>\n      <echo>${isValidDate}</echo>\n    </target>\n\nEven though it relies on the regexp package I didn't place it under optional as\nother things (e.g. TokenFilter) also rely on Regexp and aren't under optional.\n\nThe following would be the extension to AntUnit to make use of this\nfunctionality:\n\n  <macrodef name=\"assertMatches\" backtrace=\"false\">\n    <attribute name=\"string\"/>\n    <attribute name=\"pattern\"/>\n    <attribute name=\"message\"\n      default=\"Expected '@{string}' to match pattern '@{pattern}'\"/>\n    <sequential>\n      <au:assertTrue message=\"@{message}\">\n\t<matches string=\"@{string}\" pattern=\"@{pattern}\"/>\n      </au:assertTrue>\n    </sequential>\n  </macrodef>\n\nI'll add this as a separate patch in due course if there is interest."}, {"count": 3, "tags": [], "creator": "peterreilly@apache.org", "text": "I commited a combination of both patches.\nThanks for the patches, this will be in ant 1.7.", "id": 94094, "time": "2006-09-25T21:39:43Z", "bug_id": 28883, "creation_time": "2006-09-25T21:39:43Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "bug_id": 28883, "text": "Thanks Peter, very much appreciated.", "id": 94109, "time": "2006-09-26T10:07:57Z", "creator": "paulk@asert.com.au", "creation_time": "2006-09-26T10:07:57Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 28883, "is_private": false, "id": 94250, "attachment_id": null, "creator": "peterreilly@apache.org", "creation_time": "2006-09-28T22:10:34Z", "time": "2006-09-28T22:10:34Z", "text": "Added the <assertMatches> macro\nto ant-unit\nthanks for the code."}]