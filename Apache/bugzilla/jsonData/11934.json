[{"count": 0, "tags": [], "creator": "ad553@dcx.com", "attachment_id": null, "is_private": false, "id": 21535, "time": "2002-08-22T14:00:51Z", "bug_id": 11934, "creation_time": "2002-08-22T14:00:51Z", "text": "Here's the definition from 2.3 spec:\n\n<!ELEMENT security-constraint (display-name?, web-resource-collection+,\nauth-constraint?, user-data-constraint?)>\n\nWith the display-name defined we have:\n\nSEVERE: Parse Error at line 84 column -1: Element \"security-constraint\" does not\nallow \"display-name\" here.\norg.xml.sax.SAXParseException: Element \"security-constraint\" does not allow\n\"display-name\" here.\n        at org.apache.crimson.parser.Parser2.error(Parser2.java:3160)\n        at\norg.apache.crimson.parser.ValidatingParser$ChildrenValidator.consume(ValidatingParser.java:349)\n        at org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1317)\n        at org.apache.crimson.parser.Parser2.content(Parser2.java:1779)\n        at org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1507)\n        at org.apache.crimson.parser.Parser2.content(Parser2.java:1779)\n        at org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1507)\n        at org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:500)\n        at org.apache.crimson.parser.Parser2.parse(Parser2.java:305)\n        at org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:442)\n        at org.apache.commons.digester.Digester.parse(Digester.java:1284)\n        at\norg.apache.catalina.startup.ContextConfig.applicationConfig(ContextConfig.java:282)\n              \n        at ..."}, {"count": 1, "attachment_id": null, "bug_id": 11934, "is_private": false, "id": 22496, "time": "2002-09-09T10:45:51Z", "creator": "remm@apache.org", "creation_time": "2002-09-09T10:45:51Z", "tags": [], "text": "I think it's a user error. Double check the order of the elements."}, {"count": 2, "attachment_id": null, "bug_id": 11934, "text": ":-)\nWell, let's see. The definitions from the Servlets 2.3 Deployment Descriptor DTD\nis in my opriginal description. According to the security-constraint ELEMENT\ndefinition the very first element that optionally may be present is a\ndisplay-name. Now the actual example, that I just retested with 4.1.10:\n\n<security-constraint>\n\t<display-name>Constraint Name</display-name>\n\t<web-resource-collection>\n\t\t<web-resource-name>Web Reasource Name</web-resource-name>\n\t\t<url-pattern>/*</url-pattern>\n\t</web-resource-collection>\n\t<auth-constraint>\n\t\t<role-name>role1</role-name>\n\t</auth-constraint>\n</security-constraint>\n\nWith this we have (with 4.1.10 it's slightly different) the exception:\n\nSEVERE: Parse Error at line 92 column 25: The content of element type\n\"security-constraint\" must match\n\"(web-resource-collection+,auth-constraint?,user-data-constraint?)\".\norg.xml.sax.SAXParseException: The content of element type \"security-constraint\"\nmust match \"(web-resource-collection+,auth-constraint?,user-data-constraint?)\".\n\nAs you see 4.1.10 has somewhat different idea about security-constraint than the\nspecification. It does not want to see display-name there at all. So according\nto its internal DTD display-name is out of place, but that is not what 2.3 spec\nis saying.", "id": 22516, "time": "2002-09-09T13:42:22Z", "creator": "ad553@dcx.com", "creation_time": "2002-09-09T13:42:22Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "Larry.Isaacs@sas.com", "attachment_id": null, "is_private": false, "id": 22518, "time": "2002-09-09T14:01:55Z", "bug_id": 11934, "creation_time": "2002-09-09T14:01:55Z", "text": "Please check the DOCTYPE in your web.xml. \"(web-resource-collection+,auth-\nconstraint?,user-data-constraint?)\" matches the Servet 2.2 DTD.\n\nI'm assuming this is the error.  Re-open if not."}, {"count": 4, "tags": [], "text": "Quote from the http://jakarta.apache.org/tomcat/index.html\n\n\"Tomcat 4.x implements a new servlet container (called Catalina) that is based\non completely new architecture. The 4.x releases implement the Servlet __2.3__\nand JSP 1.2 specifications.\" (emphasis mine)\n\nAnd the 2.3 DTD \"wants\" a security-constraint to be optionally named.", "is_private": false, "id": 22533, "creation_time": "2002-09-09T15:08:31Z", "time": "2002-09-09T15:08:31Z", "creator": "ad553@dcx.com", "bug_id": 11934, "attachment_id": null}, {"count": 5, "tags": [], "creator": "ad553@dcx.com", "attachment_id": null, "text": "... Sorry, my fault... It was specified 2.2 in web.xml\n", "id": 22534, "time": "2002-09-09T15:11:52Z", "bug_id": 11934, "creation_time": "2002-09-09T15:11:52Z", "is_private": false}]