[{"count": 0, "tags": [], "creator": "stevi84@gmx.de", "attachment_id": 34035, "text": "Created attachment 34035\n.\\build.xml, used build.xml\n\nThe project I am working on uses external libraries in jar-files which are signed by ant using jarsigner. Creating an indexed jar from the unsigned file works perfectly fine, while creating an indexed jar from the signed file results in an error:\n\njava.lang.RuntimeException: data starting at 0 is in unknown format\n        at org.apache.tools.zip.ZipEntry.setExtra(ZipEntry.java:272)\n        at org.apache.tools.zip.ZipFile.resolveLocalFileHeaderData(ZipFile.java:\n454)\n        at org.apache.tools.zip.ZipFile.<init>(ZipFile.java:153)\n        at org.apache.tools.zip.ZipFile.<init>(ZipFile.java:136)\n        at org.apache.tools.ant.taskdefs.Jar.grabFilesAndDirs(Jar.java:1003)\n        at org.apache.tools.ant.taskdefs.Jar.createIndexList(Jar.java:560)\n        at org.apache.tools.ant.taskdefs.Jar.finalizeZipOutputStream(Jar.java:50\n8)\n        at org.apache.tools.ant.taskdefs.Jar.createEmptyZip(Jar.java:776)\n        at org.apache.tools.ant.taskdefs.Zip.executeMain(Zip.java:471)\n        at org.apache.tools.ant.taskdefs.Zip.execute(Zip.java:416)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav\na:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:357)\n        at org.apache.tools.ant.Target.performTasks(Target.java:385)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1307)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExe\ncutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1191)\n        at org.apache.tools.ant.Main.runBuild(Main.java:758)\n        at org.apache.tools.ant.Main.startAnt(Main.java:218)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\n\nI'm using JRockit JDK 1.6.0_45.\n\nThis bug is probably the same as in https://bz.apache.org/bugzilla/show_bug.cgi?id=37237. There it was not reported that the client.jar was a signed jar-file, which was probably the case.\n\nI've added a test case in the attachment.", "id": 192345, "time": "2016-07-13T16:13:39Z", "bug_id": 59851, "creation_time": "2016-07-13T16:13:39Z", "is_private": false}, {"count": 1, "tags": [], "creator": "stevi84@gmx.de", "attachment_id": 34036, "id": 192346, "time": "2016-07-13T16:14:53Z", "bug_id": 59851, "creation_time": "2016-07-13T16:14:53Z", "is_private": false, "text": "Created attachment 34036\n.\\signed\\jna-4.1.0.jar, used signed jar-file"}, {"count": 2, "tags": [], "bug_id": 59851, "attachment_id": 34037, "text": "Created attachment 34037\n.\\unsigned\\jna-4.1.0.jar, used unsigned jar-file", "id": 192347, "time": "2016-07-13T16:17:01Z", "creator": "stevi84@gmx.de", "creation_time": "2016-07-13T16:17:01Z", "is_private": false}, {"count": 3, "tags": [], "text": "It seems, that this bug appears only in older versions of Apache Ant (I was using version 1.7.1) and has been repaired in newer versions (starting with version 1.8.1).\n\nI also found that this bug does not appear with older version of the JNA library (4.0.0 and older).", "is_private": false, "id": 192568, "creator": "stevi84@gmx.de", "time": "2016-07-22T07:36:53Z", "bug_id": 59851, "creation_time": "2016-07-22T07:36:53Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 59851, "text": "Thank you for investigating further.", "id": 192569, "time": "2016-07-22T10:13:32Z", "creator": "bodewig@apache.org", "creation_time": "2016-07-22T10:13:32Z", "is_private": false, "attachment_id": null}]