[{"count": 0, "tags": [], "creator": "xin.guo@sun.com", "attachment_id": null, "id": 20264, "time": "2002-07-26T16:00:27Z", "bug_id": 11208, "creation_time": "2002-07-26T16:00:27Z", "is_private": false, "text": "For my form-based authentication, with a JNDIRealm, the server displays a \ndefault error page which reports \"HTTP Status 403 - Access to the requested \nresource has been denied\", instead of using the error page I specified. The \nfollowing is my web.xml file for my sample application:\n\n-------------------- start of xml file ----------------------------------\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\n<!DOCTYPE web-app\n    PUBLIC \"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n    \"http://java.sun.com/dtd/web-app_2_3.dtd\">\n\n<web-app>\n    <!-- Modify this context parameter to set a new class to be the default\n         expression language for the application. -->\n    <context-param>\n        <param-name>javax.servlet.jsptl.ExpressionEvaluatorClass</param-name>\n        <param-value>org.apache.taglibs.jsptl.lang.spel.Evaluator</param-value>\n    </context-param>\n\n    <listener>\n      <listener-class>com.iplanet.ldaptl.LDAPTL</listener-class>\n    </listener>\n\n    <taglib>\n        <taglib-uri>http://java.sun.com/jsptl/ea/jx</taglib-uri>\n        <taglib-location>/WEB-INF/jx.tld</taglib-location>\n    </taglib>\n\n    <taglib>\n        <taglib-uri>http://www.iplanet.com/ldaptl</taglib-uri>\n        <taglib-location>/WEB-INF/ldaptl.tld</taglib-location>\n    </taglib>\n\n    <taglib>\n        <taglib-uri>http://www.iplanet.com/util</taglib-uri>\n        <taglib-location>/WEB-INF/util.tld</taglib-location>\n    </taglib>\n\n    <security-constraint>\n      <display-name>LDAP Gateway Security Constraint</display-name>\n      <web-resource-collection>\n         <web-resource-name>LDAP Gateway Application</web-resource-name>\n\t <!-- Define the context-relative URL(s) to be protected -->\n         <url-pattern>/jsp/lookmeup/*</url-pattern>\n\t <!-- If you list http methods, only those methods are protected -->\n      </web-resource-collection>\n      <auth-constraint>\n         <!-- Anyone with one of the listed roles may access this area -->\n         <role-name>Gateway Admin</role-name>\n      </auth-constraint>\n    </security-constraint>\n\n    <!-- Default login configuration uses form-based authentication -->\n    <login-config>\n      <auth-method>FORM</auth-method>\n      <form-login-config>\n        <form-login-page>/jsp/lookmeup/login.jsp</form-login-page>\n        <form-error-page>/jsp/lookmeup/login_error.jsp</form-error-page>\n      </form-login-config>\n    </login-config>\n\n    <!-- Security roles referenced by this web application -->\n    <security-role>\n      <role-name>Gateway Admin</role-name>\n    </security-role>\n\n</web-app>\n\n--------------------------- end of xml file ----------------------------------\nOther than that, the authentication process works ok, though I think there is\nanother bug for which I'll file another report. The example form-based login \ndoes work in my environment. \n\nI've tried my best to see if this is a misconfig with no luck, so please let me \nknow if this is not a bug. This might be some special effect of the JNDIRealm \nobject.\n\nThanks,"}, {"count": 1, "tags": [], "text": "It looks like your error page is under the directory that is protected.\n\njsp/lookmeup/*\n\nand the error page is jsp/lookmeup/login_error.jsp\n\nI'm not familiar with the specification for this part though, so perhaps Tomcat \nshould serve the form-error-page even though it is in a \"protected area\", \nthough that seems a little counter-intuitive and violates the security.", "is_private": false, "bug_id": 11208, "id": 20266, "time": "2002-07-26T16:11:58Z", "creator": "locasto@cs.columbia.edu", "creation_time": "2002-07-26T16:11:58Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 11208, "attachment_id": null, "text": "The form-based auth example from Tomcat also hide the login page and error\npage under the protected directory, but it still works. I'll try if moving \nthose files out of the proteced dir will solve the issue, but still it's a \nmystery.", "id": 20442, "time": "2002-07-30T19:57:28Z", "creator": "xin.guo@sun.com", "creation_time": "2002-07-30T19:57:28Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 11208, "attachment_id": null, "text": "I found this only happens when a user submitted the right username and password,\nbut doesn't have the required role. In all the other cases, the user will be\nbounced back to the error page. I think Tomcat should provide a way to allow \ndevelopers to display a default error page as long as the user is not \nauthenticated. ", "id": 20504, "time": "2002-07-31T22:26:23Z", "creator": "xin.guo@sun.com", "creation_time": "2002-07-31T22:26:23Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 11208, "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of 3865 ***", "id": 49385, "time": "2003-12-18T23:08:53Z", "creator": "medthomas@ntlworld.com", "creation_time": "2003-12-18T23:08:53Z", "is_private": false}]