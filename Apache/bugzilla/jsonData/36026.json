[{"count": 0, "tags": [], "creator": "thomas.bellembois@univ-rennes1.fr", "attachment_id": null, "text": "Hello,\n\nHere is a quota listener developed to manage quotas on Slide.\nI would like to propose this listener to the Slide community.\nThere are probably some improvements to do for example concerning logs and\nexception management.\n\nThis listener is 98% compliant with the WebDAV quota RFC.\n\nWe differ on the following points :\n\n  1. The virtual root notion\n  2. We have implemented a \"soft\" quota management, it means that quota\n     could be exceeded one time and only one time putting a resource on\n     the server. We would like to implement a classic (\"hard\") quota\n     management in a future version.\n     We have decided to choose a \"soft\" quota management for the\n     following reason :\n     We have trust in the content-length HTTP header to check if a\n     storage action can be done, except for a copy or a move action\n     (the resource already exists on the server) we get the resource\n     size directly \"on the disk\". According to the HTTP RFC the\n     content-lenght header is optional. When the content-length header\n     is not filled in (or equals to -1) we had to calculate the size of\n     the resource handling the HTTP input stream. We could not find an\n     easy way to do that. Any idea ?\n\nYou can have more details at the following URL:\nhttp://www.esup-portail.org/consortium/espace/Stockage_2F/serveur/documents/specifications/specifWebDAVQuotas.html\n\nRegards,\n\nThomas", "id": 78109, "time": "2005-08-04T14:32:35Z", "bug_id": 36026, "creation_time": "2005-08-04T14:32:35Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 36026, "attachment_id": 15891, "is_private": false, "id": 78111, "time": "2005-08-04T14:33:37Z", "creator": "thomas.bellembois@univ-rennes1.fr", "creation_time": "2005-08-04T14:33:37Z", "text": "Created attachment 15891\nQuota Listener to manage quota in Slide"}, {"text": "Created attachment 19039\nQuota Listener to manage quota in Slide (new release)", "tags": [], "bug_id": 36026, "attachment_id": 19039, "count": 2, "id": 95080, "time": "2006-10-25T05:56:50Z", "creator": "thomas.bellembois@univ-rennes1.fr", "creation_time": "2006-10-25T05:56:50Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 36026, "attachment_id": null, "is_private": false, "id": 100952, "time": "2007-03-26T02:45:04Z", "creator": "antoine@apache.org", "creation_time": "2007-03-26T02:45:04Z", "text": "Hi,\n\nsorry in the long time to get back to you :(\n\nFollowing remarks.\nI was wondering first where your code fits.\nIt seems to need to be under src/webdav/server, although you gave it the package\nname org.apache.slide.event, which is under src/share. src/share builds before\nsrc/webdav/server, but your code uses classes from src/webdav/server. I suggest\na package name of org.apache.slide.webdav.event.quota for your code.\n\nIn my sandbox, I removed this method \t/**\n\tQuotaConstants.getParentUri (String uri) {\nbecause it was using StringUtils from commons-lang which was not used yet.\n\n\nCan you also replace the constant NAMESPACE_ESUP by a value that would be picked\nup from domain.xml ?\n\nCan you explain where the value of the quota limit is defined. I did not\nunderstand that ?\n\nRegards,\n\nAntoine"}, {"count": 4, "tags": [], "bug_id": 36026, "attachment_id": 19796, "is_private": false, "id": 100953, "time": "2007-03-26T02:53:21Z", "creator": "antoine@apache.org", "creation_time": "2007-03-26T02:53:21Z", "text": "Created attachment 19796\nslightly modified version with a new package name"}, {"count": 5, "tags": [], "text": "Created attachment 20284\nQuota Listener to manage quota in Slide (package org.apache.slide.webdav.event.quota)\n\nHi, \nThe quota code is now in a new package named \norg.apache.slide.webdav.event.quota and the constant NAMESPACE_ESUP is picked\nup from the Domain.xml.\n\nIn order to use the QuotaListener, you must define the listener in the\nDomain.xml.\nSo, add these different lines :\n\n<events>\n...\n<event classname=\"org.apache.slide.webdav.event.DetailedWebdavEvent\"\nenable=\"true\"/>\n<event classname=\"org.apache.slide.webdav.event.WebdavEvent\" enable=\"true\" />\n...\n<listener classname=\"org.apache.slide.webdav.event.quota.QuotaListener\">\n\t    <configuration>\n\t      <path>/files</path>\n\t      <quotaNamespace>QUOTA:</quotaNamespace>\n\t      <appleQuotaMetadata>true</appleQuotaMetadata>\n\t    </configuration>\n</listener>\n...\n</events>\n\n\nDescription of the three parameters of the QuotaListener configuration.\n\npath : this parameter notice where the quota will be apply.\n\nquotaNamespace :  this parameter enable to choose the namespace which will be\nused for the non-DAV metadata.\n\nappleQuotaMetadata : this parameter allow to use or not the apple quota\nmetadatas.\n\n\nRegards,\n\nMiguel", "is_private": false, "id": 103760, "creator": "rui-miguel.valerio@univ-rennes1.fr", "time": "2007-05-29T02:27:18Z", "bug_id": 36026, "creation_time": "2007-05-29T02:27:18Z", "attachment_id": 20284}]