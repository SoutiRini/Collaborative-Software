[{"count": 0, "tags": [], "creator": "sowjanya.paruchuri@verizon.com", "attachment_id": null, "id": 10401, "time": "2002-02-06T18:26:38Z", "bug_id": 6282, "creation_time": "2002-02-06T18:26:38Z", "is_private": false, "text": "The Ant jar task includes unnecessary files in the jar. Here is the example\n\n<jar jarfile=\"app.jar\" basedir=\"${CLASSDIR}\"\" excludes=\"*\">\n   <fileset dir=\"${CLASSDIR}\">\n      <patternset>\n         <include name=\"com/mypackage/Test1.class\"/>\n         <include name=\"com/mypackage/Test2.class\"/>\n      </patternset>\n   </fileset>\n</jar>\n\nIdeally this should include only Test1.class and Test2.class in the jar file \nand exclude any other class file present in ${CLASSDIR}.\n\nBut using ant 1.4.1, this task includes ALL classes under ${CLASSDIR} into the \njar file. This works fine using ant 1.3."}, {"count": 1, "tags": [], "bug_id": 6282, "attachment_id": null, "text": "Change excludes to use **/* and it should work as you expected it to.\n\n<jar jarfile=\"app.jar\" basedir=\"${CLASSDIR}\"\" excludes=\"**/*\">\n   <fileset dir=\"${CLASSDIR}\">\n      <patternset>\n         <include name=\"com/mypackage/Test1.class\"/>\n         <include name=\"com/mypackage/Test2.class\"/>\n      </patternset>\n   </fileset>\n</jar>\n\n", "id": 10402, "time": "2002-02-06T18:40:43Z", "creator": "umagesh@apache.org", "creation_time": "2002-02-06T18:40:43Z", "is_private": false}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 10427, "time": "2002-02-07T06:48:51Z", "bug_id": 6282, "creation_time": "2002-02-07T06:48:51Z", "is_private": false, "text": "I think what you really want it to drop both the basedir and the excludes\nattributes:\n\n<jar jarfile=\"app.jar\">\n  <fileset dir=\"${CLASSDIR}\">\n    <patternset>\n      <include name=\"com/mypackage/Test1.class\"/>\n      <include name=\"com/mypackage/Test2.class\"/>\n    </patternset>\n  </fileset>\n</jar>\n\nbasedir adds another fileset implicitly - and this one is the one that is\nadding all the files you don't want to see."}]