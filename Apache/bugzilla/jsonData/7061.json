[{"count": 0, "tags": [], "creator": "mjmare@webtothemax.com", "attachment_id": null, "id": 11707, "time": "2002-03-12T21:25:20Z", "bug_id": 7061, "creation_time": "2002-03-12T21:25:20Z", "is_private": false, "text": "I have a servlet called ShopInit that has load-on-startup set. In TC 4.0.4B1 the servlet gets loaded \nTWICE (maybe others as well but they don't log anything so I can't see anything).\nCopying this \nwebapp (w/o any modification) to TC 4.0.1 or 4.0.2 doesn't show this behavior.\n\nThis is the \nweb.xml:\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\n<!DOCTYPE web-app\n  PUBLIC \"-\n//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n  \n\"http://java.sun.com/j2ee/dtds/web-app_2_3.dtd\">\n\n<web-app>\n\n  <listener>\n    \n<listener-class>com.webtothemax.shop.admin.SessionCounter</listener-class>\n  \n</listener>\n\n  <servlet>\n    <servlet-name>action</servlet-name>\n    <servlet-\nclass>org.apache.struts.action.ActionServlet</servlet-class>\n    <init-param>\n      <param-\nname>application</param-name>\n      <param-value>ApplicationResources</param-value>\n    \n</init-param>\n    <init-param>\n      <param-name>config</param-name>\n      <param-value>/WEB-\nINF/struts-config.xml</param-value>\n    </init-param>\n    <init-param>\n      <param-\nname>debug</param-name>\n      <param-value>2</param-value>\n    </init-param>\n    <init-param>\n      \n<param-name>detail</param-name>\n      <param-value>2</param-value>\n    </init-param>\n    <init-\nparam>\n      <param-name>validate</param-name>\n      <param-value>true</param-value>\n    </init-\nparam>\n    <load-on-startup>2</load-on-startup>\n  </servlet>\n  <servlet>\n    <servlet-\nname>com.webtothemax.shop.servlets.ShopInit</servlet-name>\n    <display-name>Servlet \nShopInit</display-name>\n    <description>Loads application wide data for \nShopCart.</description>\n    <servlet-\nclass>com.webtothemax.shop.servlets.ShopInit</servlet-class>\n    <init-param>\n      <param-\nname>productslist pathname</param-name>\n      <param-value>/WEB-\nINF/shopdata/xml/prod_catalog.xml</param-value>\n    </init-param>\n    <load-on-\nstartup>10</load-on-startup>\n  </servlet>\n  <servlet>\n    <servlet-\nname>twypReceiver</servlet-name>\n    <display-name>twypReceiver</display-name>\n    \n<description>Waits for Twyp callbacks</description>\n    <servlet-\nclass>com.webtothemax.shop.servlets.twypReceiver</servlet-class>\n  </servlet>\n  \n<servlet>\n    <servlet-name>LogInit</servlet-name>\n    <servlet-\nclass>com.webtothemax.shop.servlets.LogInit</servlet-class>\n    <load-on-startup>1</load-\non-startup>\n  </servlet>\n  <servlet-mapping>\n    <servlet-name>action</servlet-name>\n    <url-\npattern>*.do</url-pattern>\n  </servlet-mapping>\n  <servlet-mapping>\n    <servlet-\nname>twypReceiver</servlet-name>\n    <url-pattern>/servlet/twypReceiver</url-pattern>\n  \n</servlet-mapping>\n  <session-config>\n    <session-timeout>\n        30\n    </session-timeout>\n  \n</session-config>\n  <welcome-file-list>\n    <welcome-file>index.jsp</welcome-file>\n  \n</welcome-file-list>\n  <taglib>\n    <taglib-uri>/WEB-INF/struts-bean.tld</taglib-uri>\n    \n<taglib-location>/WEB-INF/struts-bean.tld</taglib-location>\n  </taglib>\n  <taglib>\n    \n<taglib-uri>/WEB-INF/struts-html.tld</taglib-uri>\n    <taglib-location>/WEB-INF/struts-\nhtml.tld</taglib-location>\n  </taglib>\n  <taglib>\n    <taglib-uri>/WEB-INF/struts-\nlogic.tld</taglib-uri>\n    <taglib-location>/WEB-INF/struts-logic.tld</taglib-location>\n  \n</taglib>\n  \n  <security-constraint>\n\n----snip snip---\n  \n</web-app>"}, {"count": 1, "tags": [], "text": "This has been fixed in CVS already.\n\nThe servlet init method will get called twice. If you look at the Tomcat source,\nit is quite obvious why it happens.", "attachment_id": null, "bug_id": 7061, "id": 11709, "time": "2002-03-12T21:31:32Z", "creator": "remm@apache.org", "creation_time": "2002-03-12T21:31:32Z", "is_private": false}]