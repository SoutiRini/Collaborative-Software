[{"count": 0, "tags": [], "text": "Win2k3\nApache 2.2.4\nPHP 5.2.0 (apache2handler)\nMediawiki 1.9.0\n\nOn every mediawiki URLs containing a \":\" character, I get the following error\nfrom Apache.\n\n[Tue Jan 23 09:18:05 2007] [error] [client xx.xx.xx.xx] (20024)The given path\nmisformatted or contained invalid characters: Cannot map GET\n/wiki/index.php/Special:Recentchanges HTTP/1.1 to file, referer:\nhttp://myserver.com/wiki/index.php?title=Main_Page\n\nIs it normal?", "is_private": false, "id": 98388, "creation_time": "2007-01-23T03:35:15Z", "time": "2007-01-23T03:35:15Z", "creator": "ycombarnous@yahoo.fr", "bug_id": 41441, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 41441, "text": "It's not just Mediawiki that does it, any random page with a colon in it will\ncause the error.  Furthermore, the url does not have to correspond to any file\nor service on the computer.  Error messages are as follows:\n\n[Sat Feb 17 12:55:50 2007] [error] [client 127.0.0.1] (20024)The given path\nmisformatted or contained invalid characters: Cannot map GET\n/wiki/Special:Specialpages HTTP/1.1 to file, referer:\nhttp://127.0.0.1/wiki/Main_Page\n\n[Sat Feb 17 23:39:40 2007] [error] [client 127.0.0.1] (20024)The given path\nmisformatted or contained invalid characters: Cannot map GET\n/testing:colons:and:stuff HTTP/1.1 to file", "id": 99516, "time": "2007-02-17T04:58:29Z", "creator": "cameron.walsh.lists@gmail.com", "creation_time": "2007-02-17T04:58:29Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 41441, "text": "The underlying idea was to prevent people from referencing DOS style device \nnames, e.g. C: which could create havoc\n\nUnfortunately, MediaWiki started out life on Linux / Unix platforms, and they \ndecided to use colons for namespaces.\n\nCan we get an Apache httpd.conf option which allows us to selectively switch \noff this warning, maybe according to regex matching of the URL path (or even \njust the virtual path prefix) ?", "id": 100226, "time": "2007-03-09T11:24:40Z", "creator": "Jason.Armistead@otis.com", "creation_time": "2007-03-09T11:24:40Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 41441, "text": "While device names could be a small problem, the more treacherous problem is\nNTFS data streams - as described in http://support.microsoft.com/kb/105763\n\nThese are prone to misuse.\n\nApache 2.2 (actually the APR test_safe_name() function) intentionally disallows\nthe \":\" character within a URI on Windows. \n\nAlso, the Windows FindFirstFile() function will return ERROR_INVALID_NAME\ninstead of ERROR_FILE_NOT_FOUND for any name attempting data stream access using\nthe \":\" character.\n\nThe choice of the \":\" character as the namespace separator in MediaWiki was an\nunfortunate one for use on Windows.", "id": 108359, "time": "2007-09-18T19:50:35Z", "creator": "Tom.Donovan@acm.org", "creation_time": "2007-09-18T19:50:35Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "endlessoblivion@seznam.cz", "is_private": false, "text": "setup: WinXP, Apache 2.2.4\n\nurl: \"http://localhost/:\" (anything with a colon)\nbrowser: Forbidden You don't have permission to access /: on this server.\nerror.log: (20024)The given path misformatted or contained invalid characters:\nCannot map GET /: HTTP/1.1 to file\n\nthese urls also cause \"Forbidden\":\nurl: \"http://localhost/ /\" (any only-space path segment)\nurl: \"http://localhost/ ?\"\nurl: \"http://localhost/ #\"\n\n.htaccess:\nRewriteEngine On\nRewriteRule ^.*$ index.html [L]\n\n\n..if only the filename safety check didn't come to play before the mod_rewrite..\n", "id": 111858, "time": "2007-12-18T08:05:29Z", "bug_id": 41441, "creation_time": "2007-12-18T08:05:29Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "Crazy question, did you try a [PT] rewrite rule to knock out the offending ':'?", "is_private": false, "bug_id": 41441, "id": 112106, "time": "2007-12-22T12:58:42Z", "creator": "wrowe@apache.org", "creation_time": "2007-12-22T12:58:42Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "hui.jin@quest.com", "is_private": false, "text": "My fixing, recompiled libapr and replaced libarp-1.dll in my apache.\n\nchar tmpname[APR_FILE_MAX * 3 + 1];\nHANDLE hFind;\nif ((rv = test_safe_name(fname)) != APR_SUCCESS) {\n    return APR_FROM_OS_ERROR(ERROR_FILE_NOT_FOUND); //rv;\n}\nhFind = FindFirstFileW(wfname, &FileInfo.w);\nif (hFind == INVALID_HANDLE_VALUE)\n    return APR_FROM_OS_ERROR(ERROR_FILE_NOT_FOUND); //apr_get_os_error();\nFindClose(hFind);\nif (unicode_to_utf8_path(tmpname, sizeof(tmpname), \n                         FileInfo.w.cFileName)) {\n    return APR_ENAMETOOLONG;\n}\nfilename = apr_pstrdup(pool, tmpname);\n", "id": 113025, "time": "2008-01-20T09:58:30Z", "bug_id": 41441, "creation_time": "2008-01-20T09:58:30Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "rustamabd@gmail.com", "is_private": false, "count": 7, "id": 113169, "time": "2008-01-27T16:01:51Z", "bug_id": 41441, "creation_time": "2008-01-27T16:01:51Z", "text": "I think the issue here is that ':' in the original URI always causes the \nwarning, even when the URI is eventually rewritten to another one without \nthe ':'.\nThe warning simply needs to be downgraded to a debug message (which is normally \nsuppressed) or removed altogether. Or there needs to be a flag to turn it off.\n"}, {"count": 8, "tags": [], "bug_id": 41441, "is_private": false, "text": "Windows XP, apache 2.2.4\n\nhttp://host/foo:bar, http://host/foo%3Abar, http://host/%F0%FF -- not working \n((22)Invalid argument: Cannot map GET /%F0%FF HTTP/1.1 to file)\n\nbut\n\nhttp://host/zoo/foo:bar, http://host/zoo/foo%3Abar, http://host/zoo/%F0%FF works\nfine\n\n", "id": 113522, "time": "2008-02-07T05:49:06Z", "creator": "mihailoff@gmail.com", "creation_time": "2008-02-07T05:49:06Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 41441, "text": "Comment 8 has nothing to do with this report; please don't confuse bugs by\nlayering on multiple issues.\n\nTo the commentor - it fails because httpd on win32 requires you to specific\nnon-ASCII filenames in UTF-8, corresponding to the Unicode filesystem of Win32.", "id": 113528, "time": "2008-02-07T07:29:26Z", "creator": "wrowe@apache.org", "creation_time": "2008-02-07T07:29:26Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "text": "Confirming that problem still exists in Apache 2.2.8 (PHP 5.2.5) on Windows 2003 Server.\n\nIt would be great to have some way to turn this off so it doesn't spam the error.log....", "is_private": false, "bug_id": 41441, "id": 115384, "time": "2008-04-07T14:11:39Z", "creator": "bugs@blazemonger.com", "creation_time": "2008-04-07T14:11:39Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "jago@thelearner.net", "is_private": false, "count": 11, "id": 124424, "time": "2009-01-28T04:21:58Z", "bug_id": 41441, "creation_time": "2009-01-28T04:21:58Z", "text": "Confirming that problem still exists in Apache 2.2.11 (PHP 5.2.8) on Windows\n2003 Server.\n\nError log:\n\n[Mon Jan 26 20:53:45 2009] [error] [client 10.x.x.x] (20024)The given path is misformatted or contained invalid characters: Cannot map GET /mwiki/index.php/Special:SpecialPages HTTP/1.1 to file, referer: http://ssdev.student.stanmore.ac.uk/mwiki/index.php/User_talk:WikiSysop"}, {"count": 12, "tags": [], "bug_id": 41441, "is_private": false, "text": "(In reply to comment #4)\n> RewriteEngine On\n> RewriteRule ^.*$ index.html [L]\n> \n> \n> ..if only the filename safety check didn't come to play before the mod_rewrite..\n> \n\nHave you tried without htaccess? It makes your rules run much later, where they can't suppress the \"translate_name\" in the core of apache.", "id": 124425, "time": "2009-01-28T05:01:39Z", "creator": "covener@gmail.com", "creation_time": "2009-01-28T05:01:39Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "fil@travka.org", "is_private": false, "count": 13, "id": 130200, "time": "2009-09-08T01:34:30Z", "bug_id": 41441, "creation_time": "2009-09-08T01:34:30Z", "text": "Windows 7 \nApache 2.2.11\n\nSame problem with \"|\" character.\n\nand it's need a third level to overcome bug:\n\n\nhttp://host/foo|bar          -Forbidden\nhttp://host/soo/foo|bar      -Forbidden\nhttp://host/too/soo/foo|bar  -Norm"}, {"count": 14, "attachment_id": null, "bug_id": 41441, "text": "On Windows Vista Apache 2.2.14, these urls also cause \"Forbidden\":\n\nhttp://localhost/n\\\nhttp://localhost/n\\n\nhttp://localhost/n/n\\\nhttp://localhost/n/n\\n\nhttp://localhost/n/n/n/n/n/n/n\\n", "id": 132538, "time": "2009-12-01T01:52:47Z", "creator": "zefling@yahoo.fr", "creation_time": "2009-12-01T01:52:47Z", "tags": [], "is_private": false}, {"count": 15, "tags": [], "bug_id": 41441, "is_private": false, "text": "Folks, this won't be addressed until httpd learns the concept of \"not a file\"\nresource, al la contextual DocumentRoot per Location/VirtualHost.  E.g. a\nproxy-only namespace, or something run exclusively through a special handler.\n\nCongratulations for choosing Win32 and we are pleased to provide that port.\nHowever, the same porters would strongly encourage you to choose a system with \nfewer potential naming-related security issues if you must work around these\nissues.  httpd is at the mercy of the underlying filesystem.", "id": 132540, "time": "2009-12-01T02:30:31Z", "creator": "wrowe@apache.org", "creation_time": "2009-12-01T02:30:31Z", "attachment_id": null}, {"count": 16, "tags": [], "bug_id": 41441, "text": "WRT comment #14, Z\u00e9fling, see AllowEncodedSlashes and AcceptPathInfo; we suspect\nyours is a simple misconfiguration or unusual assumptions.  However, in httpd\nthe backslash is not a pathname separator, and the file handler will not\naccept it as such.  As an argument to your cgi script, it is accepted.", "id": 132541, "time": "2009-12-01T02:34:16Z", "creator": "wrowe@apache.org", "creation_time": "2009-12-01T02:34:16Z", "is_private": false, "attachment_id": null}]