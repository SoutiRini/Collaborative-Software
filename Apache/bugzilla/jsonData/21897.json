[{"count": 0, "tags": [], "text": "Inside a <VirtualHost>, I had two Alias directives.  The first was:\nAlias / \"/path/to/webapp/directory/for/tomcat\"\n\nThen I had:\nAlias /files \"/path/to/files\"\n\n... but that didn't work until I moved it above the first one.", "is_private": false, "id": 41535, "creator": "jks@selectacast.net", "time": "2003-07-25T20:32:49Z", "bug_id": 21897, "creation_time": "2003-07-25T20:32:49Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 21897, "is_private": false, "id": 41536, "creation_time": "2003-07-25T20:42:54Z", "time": "2003-07-25T20:42:54Z", "creator": "nd@perlig.de", "text": "Yes, that's well known behaviour. It just should be better documented.\nThe 2.1 branch, however, throws a warning in such a case.", "attachment_id": null}, {"count": 2, "tags": [], "text": "Great so, this is known behaviour, but isn't it a bug that the order matters? \nShouldn't the most specific definition of a URL be the one that is used\nregardless of the order?  That's certainly what I would expect to happen.", "is_private": false, "id": 42030, "creator": "jcollins@asgardsrealm.net", "time": "2003-08-03T20:34:59Z", "bug_id": 21897, "creation_time": "2003-08-03T20:34:59Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 21897, "attachment_id": null, "id": 42031, "creation_time": "2003-08-03T20:55:29Z", "time": "2003-08-03T20:55:29Z", "creator": "nd@perlig.de", "text": "No. There are mainly two reasons for this.\n(1) performance\n(2) It's not really possible. Consider, for example, some AliasMatch directives\n(maybe plus some other Aliases). There's no way to rank somehow, which of these\nwould match best.", "is_private": false}, {"count": 4, "tags": [], "bug_id": 21897, "attachment_id": null, "id": 42355, "time": "2003-08-07T19:46:43Z", "creator": "jcollins@asgardsrealm.net", "creation_time": "2003-08-07T19:46:43Z", "is_private": false, "text": "However there is for Alias, and while this seems to be a \"known\" item.  It's not\nclearly documented anywhere that I've found.  If this is the expected behavior\nthen it should probably be documented that way. "}, {"count": 5, "tags": [], "text": "I agree with Andr\u00e9 that you can't really rank an AliasMatch, but when it's not \na match you can - because what you type in either does, or does not, fit the \nconfigured alias.\n\nThe problem I'm having is that in my config I have these two lines:\n\nScriptAlias   /mailman/       /usr/local/mailman/cgi-bin/\nAlias /mailman/icons/ /usr/local/mailman/icons/\n\nThe problem is that when I try and access /mailman/icons/ I get a 404 because \napache has aliased that to /usr/local/mailman/cgi-bin/icons.\n\nIt seems to me as though the second line above is being ignored completely, and \nwhen I refer to /mailman/icons/mailman.jpg, the alias is built \nas /usr/local/mailman/cgi-bin/icons/mailman.jpg.\n\nWhen apache parses the config, /mailman/ and /mailman/icons/ should be seen as \ntwo totally different things.  Both matching their respective paths.\n", "attachment_id": null, "id": 54203, "creator": "duke@spacebox.net", "time": "2004-03-18T06:08:40Z", "bug_id": 21897, "creation_time": "2004-03-18T06:08:40Z", "is_private": false}, {"count": 6, "tags": [], "text": "I have tried to clarify the docs on this issue.\n\nThanks for using Apache!", "is_private": false, "id": 54452, "creator": "slive@apache.org", "time": "2004-03-23T04:25:01Z", "bug_id": 21897, "creation_time": "2004-03-23T04:25:01Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "So this is just going to be a documented bug?\n\nI think this should be fixed.  It's really not a good behaviour, regardless of \nwhether or not it's been documented.\n", "is_private": false, "id": 54459, "creator": "duke@spacebox.net", "time": "2004-03-23T08:58:51Z", "bug_id": 21897, "creation_time": "2004-03-23T08:58:51Z", "attachment_id": null}, {"count": 8, "tags": [], "text": "I'm repeating my earlier comment:\n\n(2) It's not really possible. Consider, for example, some AliasMatch directives\n(maybe plus some other Aliases). There's no way to rank somehow, which of these\nwould match best.", "is_private": false, "id": 54461, "creator": "nd@perlig.de", "time": "2004-03-23T09:39:07Z", "bug_id": 21897, "creation_time": "2004-03-23T09:39:07Z", "attachment_id": null}, {"count": 9, "tags": [], "creator": "duke@spacebox.net", "text": "Why not first go through all the non-matching directives like Alias and \nScriptAlias first, because those would be exact matches.  Then for AliasMatch \nand such, use whichever one matches first, and indicate that behaviour in the \ndocumentation.\n\nI think that'd be a reasonable way of doing things.\n\nAnd as far as ranking a regex match, couldn't you tell which one matched more \ncharacters?  The one that matches most should be ranked first.  Unless this is \nan undesireable behaviour by the principles of matching or something, I would \nconsider that acceptable.\n", "id": 54462, "time": "2004-03-23T09:55:32Z", "bug_id": 21897, "creation_time": "2004-03-23T09:55:32Z", "is_private": false, "attachment_id": null}, {"count": 10, "attachment_id": null, "creator": "nd@perlig.de", "text": "That is not desirable, because it adds \"undefinedness\" to the config. You'll get\na situation, where one *alias* directive depends on others with the result that\nsome alias directives may never match with no way to influence that magic.\n\nAdditionally a 'more characters match' is not always the desired choice.\n\nOr in other words:\nThe order dependence is deterministic, your suggestion is not.", "id": 54464, "time": "2004-03-23T10:32:38Z", "bug_id": 21897, "creation_time": "2004-03-23T10:32:38Z", "tags": [], "is_private": false}, {"count": 11, "tags": [], "creator": "slive@apache.org", "text": "Or, in other words, the current code gives you the ability to easily\nand precisely control the order of matching simply by ordering\nthe directives.  It simply requires you to know that order matters.\n\nYour suggestion tries to guess at what a user intended.  This can often\nbe dangerous, and certainly isn't necessary when a user can easily be\nexplicit by ordering the directives properly.", "id": 54479, "time": "2004-03-23T14:59:26Z", "bug_id": 21897, "creation_time": "2004-03-23T14:59:26Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "text": "Given the original scenario:\n\n  Alias / \"/path/to/webapp/directory/for/tomcat\"\n  Alias /files \"/path/to/files\"\n\nIt seems normal to me that a request such as:\n\n  http://host.com/files/somefile\n\nShould be served from \"/path/to/files\"\n\nI can understand how this becomes a problem when using AliasMatch, but it is not\na problem when using Alias.  When using Alias the most specific match should be\nused regardless of order.  Right now order matters and there's nothing I've seen\n(other than the comments in this bug) to indicate that is how it's currently\nintended to work.", "attachment_id": null, "id": 54501, "creator": "jcollins@asgardsrealm.net", "time": "2004-03-23T20:25:38Z", "bug_id": 21897, "creation_time": "2004-03-23T20:25:38Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 21897, "attachment_id": null, "is_private": false, "id": 54503, "time": "2004-03-23T20:34:13Z", "creator": "nd@perlig.de", "creation_time": "2004-03-23T20:34:13Z", "text": "You're suggesting that all Aliases (and ScriptAliases) should be excuted before\nall AliasMatches (and ScriptAliasMatches). That leads to the same problematic\nbehaviour we've described.\n\nTry mixing some tricky regexps with your both aliases.\n\nThe docs are now updated, and I'm going to backport the warning from 2.1 which\npoints to exactly that problem.\nOkay?"}, {"count": 14, "tags": [], "creator": "duke@spacebox.net", "text": "I think I get it.  If I had an AliasMatch that matched anything with \"foo\" in \nit, but I wanted to override a few specific matches, I could specify a strict \nAlias after the AliasMatch, is that correct?\n\nFor example,\n\nAliasMatch regex /usr/local/bar   (assume \"regex\" matches anything with \"foo\" \nin it)\nAlias      /foo  /usr/local/xyzzy\n\nSo now, anything with \"foo\" in it except for one particular case, will be \ndirected to /usr/local/bar.  Is that the desired behaviour?\n", "id": 54514, "time": "2004-03-23T23:00:35Z", "bug_id": 21897, "creation_time": "2004-03-23T23:00:35Z", "is_private": false, "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 21897, "is_private": false, "text": "IMHO, absolutely!\n\nBased on the configuration you provided, I would say the Admin specific an\nexplicit match for a reason, honor it.  That's what I expected, and why when it\ndidn't happen I added my comment to this bug report.", "id": 54515, "time": "2004-03-23T23:05:23Z", "creator": "jcollins@asgardsrealm.net", "creation_time": "2004-03-23T23:05:23Z", "attachment_id": null}]