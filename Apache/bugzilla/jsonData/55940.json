[{"count": 0, "tags": [], "bug_id": 55940, "attachment_id": null, "id": 171957, "time": "2013-12-30T11:28:09Z", "creator": "bouzas@gmail.com", "creation_time": "2013-12-30T11:28:09Z", "is_private": false, "text": "Wrong year is echoed when format timestamp in a simple task:\n\n<target name=\"Test\">\n    <tstamp>\n          <format property=\"Year\" pattern=\"YYYY\" ></format>\n    </tstamp>\n    <echo>ANTVER ${antversion}  Year ${Year}   ${TODAY}</echo> \n        \n</target>\n\nThe output for this is:\nANTVER 1.9.2  Year 2014   December 30 2013\n\nNotice that the value in property \"Year\" is wrong. This has been working a few days ago. So it has to do with today's date (December 30th) which is very close to 2014.\n\nI use this property as build number."}, {"count": 1, "tags": [], "bug_id": 55940, "attachment_id": null, "id": 171958, "time": "2013-12-30T12:35:56Z", "creator": "bodewig@apache.org", "creation_time": "2013-12-30T12:35:56Z", "is_private": false, "text": "That's because of SimpleDateFormat\n\n  <target name=\"SDF\">\n    <echo file=\"SDF.java\"><![CDATA[\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\npublic class SDF {\n    public static void main(String[] args) throws Exception {\n        SimpleDateFormat f = new SimpleDateFormat(\"YYYY\");\n        System.err.println(\"YYYY => \" + f.format(new Date()));\n        f = new SimpleDateFormat(\"yyyy\");\n        System.err.println(\"yyyy => \" + f.format(new Date()));\n    }\n}]]></echo>\n    <javac srcdir=\".\" destdir=\".\">\n      <include name=\"SDF.java\"/>\n    </javac>\n    <java classname=\"SDF\">\n      <classpath location=\".\"/>\n    </java>\n  </target>\n\nleads to \n\nSDF:\n    [javac] /tmp/date.xml:21: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds\n    [javac] Compiling 1 source file to /tmp\n     [java] YYYY => 2014\n     [java] yyyy => 2013\n\nfor me.\n\nY is the \"week year\", i.e. the year of the calendar week you are in.  Since this Thursday is in 2014 this week's year is 2014."}, {"count": 2, "tags": [], "bug_id": 55940, "attachment_id": null, "id": 171960, "time": "2013-12-30T14:01:25Z", "creator": "bouzas@gmail.com", "creation_time": "2013-12-30T14:01:25Z", "is_private": false, "text": "That explains. Thank you.\n\nGerm\u00e1n.\n\n(In reply to Stefan Bodewig from comment #1)\n> That's because of SimpleDateFormat\n> \n>   <target name=\"SDF\">\n>     <echo file=\"SDF.java\"><![CDATA[\n> import java.text.SimpleDateFormat;\n> import java.util.Date;\n> public class SDF {\n>     public static void main(String[] args) throws Exception {\n>         SimpleDateFormat f = new SimpleDateFormat(\"YYYY\");\n>         System.err.println(\"YYYY => \" + f.format(new Date()));\n>         f = new SimpleDateFormat(\"yyyy\");\n>         System.err.println(\"yyyy => \" + f.format(new Date()));\n>     }\n> }]]></echo>\n>     <javac srcdir=\".\" destdir=\".\">\n>       <include name=\"SDF.java\"/>\n>     </javac>\n>     <java classname=\"SDF\">\n>       <classpath location=\".\"/>\n>     </java>\n>   </target>\n> \n> leads to \n> \n> SDF:\n>     [javac] /tmp/date.xml:21: warning: 'includeantruntime' was not set,\n> defaulting to build.sysclasspath=last; set to false for repeatable builds\n>     [javac] Compiling 1 source file to /tmp\n>      [java] YYYY => 2014\n>      [java] yyyy => 2013\n> \n> for me.\n> \n> Y is the \"week year\", i.e. the year of the calendar week you are in.  Since\n> this Thursday is in 2014 this week's year is 2014."}]