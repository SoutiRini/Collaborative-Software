[{"count": 0, "tags": [], "text": "Using the following war target, I found that my lib directory was not\nloaded in the .war file\n\n  <target name=\"war\" depends=\"compile\" \n     description=\"Creates war file for project\" >\n    <war warfile=\"output/myApp.war\" webxml=\"web/WEB-INF/web.xml\" >\n       <fileset dir=\"web/\" >\n         <include name=\"**/*.jsp\"/>\n         <include name=\"**/*.gif\"/>\n       </fileset>\n       <classes dir=\"web/WEB-INF/classes\">\n         <include name=\"**/*.class\"/>\n       </classes>\n       <lib dir=\"web/WEB-INF/lib\">\n         <include name=\"**/*.jar\"/>\n       </lib>\n    </war>\n  </target>\n  \n\nAfter several ours I noticed that the order of nested attributes\nwas different fron the one in the example of the ant documentation,\nso I changed the order and, to my surprise, it worked fine. \n(follows the working version).\n\n  <target name=\"war\" depends=\"compile\" \n     description=\"Creates war file for project\" >\n    <war warfile=\"output/myApp.war\" webxml=\"web/WEB-INF/web.xml\" >\n       <fileset dir=\"web/\" >\n         <include name=\"**/*.jsp\"/>\n         <include name=\"**/*.gif\"/>\n       </fileset>\n       <lib dir=\"web/WEB-INF/lib\">\n         <include name=\"**/*.jar\"/>\n       </lib>\n       <classes dir=\"web/WEB-INF/classes\">\n         <include name=\"**/*.class\"/>\n       </classes>\n    </war>\n  </target>", "attachment_id": null, "bug_id": 16915, "id": 30963, "time": "2003-02-09T17:00:07Z", "creator": "Ascander@cantv.net", "creation_time": "2003-02-09T17:00:07Z", "is_private": false}, {"count": 1, "text": "Created attachment 4828\ntest build script", "bug_id": 16915, "is_private": false, "id": 31121, "time": "2003-02-12T14:17:46Z", "creator": "bodewig@apache.org", "creation_time": "2003-02-12T14:17:46Z", "tags": [], "attachment_id": 4828}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 31122, "time": "2003-02-12T14:19:11Z", "bug_id": 16915, "creation_time": "2003-02-12T14:19:11Z", "is_private": false, "text": "This is what I get by running the test build script:\n\n[bodewig@bodewig tmp]$ ant -f 16915.xml \nBuildfile: 16915.xml\n\nclean:\n\nprep:\n    [mkdir] Created dir: /tmp/web/WEB-INF/lib\n    [mkdir] Created dir: /tmp/web/WEB-INF/classes\n    [touch] Creating /tmp/web/WEB-INF/web.xml\n    [touch] Creating /tmp/web/foo.gif\n    [touch] Creating /tmp/web/foo.jsp\n    [touch] Creating /tmp/web/WEB-INF/classes/foo.class\n    [touch] Creating /tmp/web/WEB-INF/lib/foo.jar\n    [mkdir] Created dir: /tmp/output\n\nlib-after-classes:\n      [war] Building war: /tmp/output/myApp.war\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n[bodewig@bodewig tmp]$ zip -Tv output/myApp.war \nArchive:  output/myApp.war\n    testing: META-INF/                OK\n    testing: META-INF/MANIFEST.MF     OK\n    testing: foo.gif                  OK\n    testing: foo.jsp                  OK\n    testing: WEB-INF/classes/foo.class   OK\n    testing: WEB-INF/lib/foo.jar      OK\n    testing: WEB-INF/                 OK\n    testing: WEB-INF/web.xml          OK\nNo errors detected in compressed data of output/myApp.war.\ntest of output/myApp.war OK\n[bodewig@bodewig tmp]$ ant -f 16915.xml lib-before-classes\nBuildfile: 16915.xml\n\nclean:\n   [delete] Deleting directory /tmp/web\n   [delete] Deleting directory /tmp/output\n\nprep:\n    [mkdir] Created dir: /tmp/web/WEB-INF/lib\n    [mkdir] Created dir: /tmp/web/WEB-INF/classes\n    [touch] Creating /tmp/web/WEB-INF/web.xml\n    [touch] Creating /tmp/web/foo.gif\n    [touch] Creating /tmp/web/foo.jsp\n    [touch] Creating /tmp/web/WEB-INF/classes/foo.class\n    [touch] Creating /tmp/web/WEB-INF/lib/foo.jar\n    [mkdir] Created dir: /tmp/output\n\nlib-before-classes:\n      [war] Building war: /tmp/output/myApp.war\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds\n[bodewig@bodewig tmp]$ zip -Tv output/myApp.war \nArchive:  output/myApp.war\n    testing: META-INF/                OK\n    testing: META-INF/MANIFEST.MF     OK\n    testing: foo.gif                  OK\n    testing: foo.jsp                  OK\n    testing: WEB-INF/lib/foo.jar      OK\n    testing: WEB-INF/classes/foo.class   OK\n    testing: WEB-INF/                 OK\n    testing: WEB-INF/web.xml          OK\nNo errors detected in compressed data of output/myApp.war.\ntest of output/myApp.war OK\n\nThe archives are identical."}]