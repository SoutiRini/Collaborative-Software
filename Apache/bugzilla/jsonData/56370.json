[{"count": 0, "tags": [], "creator": "Martin.Spamer@gmail.com", "attachment_id": null, "id": 174373, "creation_time": "2014-04-08T16:14:03Z", "time": "2014-04-08T16:14:03Z", "bug_id": 56370, "text": "The configuration file .\\conf\\tomcat-users.xml contains the follow comment which includes a number of legacy usernames and roles.\n\n<!--\n  <role rolename=\"tomcat\"/>\n  <role rolename=\"role1\"/>\n  <user username=\"tomcat\" password=\"tomcat\" roles=\"tomcat\"/>\n  <user username=\"both\" password=\"tomcat\" roles=\"tomcat,role1\"/>\n  <user username=\"role1\" password=\"tomcat\" roles=\"role1\"/>\n-->\n\nThe 401 Unauthorized error page .\\webapps\\manager\\WEB-INF\\jsp\\401.jsp contains a number of new roles.\n\nI propose the examples placed in .\\conf\\tomcat-users.xml should reflect these new roles, e.g. \n\n  <!-- manager-gui - allows access to the HTML GUI and the status pages -->\n  <!-- manager-script - allows access to the text interface and the status pages -->\n  <!-- manager-jmx - allows access to the JMX proxy and the status pages -->\n  <!-- manager-status - allows access to the status pages only -->\n\n<!--\n  <role rolename=\"manager-gui\"/>\n  <role rolename=\"manager-script\"/>\n  <role rolename=\"manager-jmx\"/>\n  <role rolename=\"manager-status\"/>\n\n  <user username=\"manager-gui\" password=\"*****\" roles=\"manager-gui\"/>\n  <user username=\"manager-script\" password=\"*****\" roles=\"manager-script\"/>\n  <user username=\"manager-jmx\" password=\"*****\" roles=\"manager-jmx\"/>\n  <user username=\"manager-status\" password=\"*****\" roles=\"manager-status\"/>\n\n-->", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 174374, "creation_time": "2014-04-08T16:52:07Z", "time": "2014-04-08T16:52:07Z", "bug_id": 56370, "text": "The commented out roles in tomcat-users.xml are not legacy. They are there to support the examples web application.\n\nThe roles for the manager application are explicitly not assigned ot any users in tomcat-users.xml, even in commented out form, to avoid any possibility of a known user with a default password being used for an administrative interface.", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 56370, "text": "How about adding a comment to the file to explain that these entries are intended for use with the examples web app?\n\nAlso, it would help if there was at least a pointer to the documentation for the new manager roles.\n\nI agree that default entries should not be provided, but it would help if the role names were at least documented, for example by including the first part of the OP's suggestion, i.e.\n\n  <!-- manager-gui - allows access to the HTML GUI and the status pages -->\n  <!-- manager-script - allows access to the text interface and the status pages -->\n  <!-- manager-jmx - allows access to the JMX proxy and the status pages -->\n  <!-- manager-status - allows access to the status pages only -->", "id": 174382, "time": "2014-04-08T20:27:22Z", "creator": "sebb@apache.org", "creation_time": "2014-04-08T20:27:22Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 56370, "text": "The required roles are already documented in multiple places. I see no need to replcate that information in this file.", "id": 174386, "time": "2014-04-08T22:00:25Z", "creator": "markt@apache.org", "creation_time": "2014-04-08T22:00:25Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "bug_id": 56370, "is_private": false, "id": 174643, "time": "2014-04-16T15:58:58Z", "creator": "Martin.Spamer@gmail.com", "creation_time": "2014-04-16T15:58:58Z", "tags": [], "text": "\nThis should be re-opened and fixed on the grounds refusal make a very weak argument.\n\n1) The tomcat,both and role1 are NOT used by any of the examples, which only ship in some distro.  The file in error is supplied with all distributions.\n2) The examples already provide access with default password so how is that ground to refuse to correct this bug.\n3) The suggestion uses a blanked out password.\n4) Refusal increases the barriers to use and makes additional work setting up and configuration."}, {"count": 5, "tags": [], "bug_id": 56370, "text": "(In reply to Martin Spamer from comment #4)\n> This should be re-opened and fixed on the grounds refusal make a very weak\n> argument.\n> \n> 1) The tomcat,both and role1 are NOT used by any of the examples, which only\n> ship in some distro.  The file in error is supplied with all distributions.\n\nThose roles are used by the examples app that ships with Tomcat. If a distribution removes the examples it should remove the corresponding users from tomcat-users.xml.\n\n\n> 2) The examples already provide access with default password so how is that\n> ground to refuse to correct this bug.\n\nThe examples are not security sensitive. The Manager app is.\n\n\n> 3) The suggestion uses a blanked out password.\n\nWhich means the end result will be a bunch of Tomcat instances where the Manager password is \"******\" or whatever is used for the \"blanked out\" password. You could set it to \"OnlyAnIdiotWouldNotChangeThis\" and it would still not get changed in a significant proportion of installations.\n\n\n> 4) Refusal increases the barriers to use and makes additional work setting\n> up and configuration.\n\nThe refusal is based solely on past experience that shows that, with any form of commented out password for the Manager app, folks simply uncomment it without engaging their brains first.", "id": 174647, "time": "2014-04-16T17:16:05Z", "creator": "markt@apache.org", "creation_time": "2014-04-16T17:16:05Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 56370, "text": "(In reply to Sebb from comment #2)\n> How about adding a comment to the file...\n\nThere is already a comment there, starting with\n\"NOTE:  The sample user and role entries below \" ...\n\nHow many people here have noted it?\n\n(In reply to Martin Spamer from comment #4)\n> 1) 2) ...\n\nYou are wrong. A quote from the examples app:\n\n    <!-- Security roles referenced by this web application -->\n    <security-role>\n      <role-name>role1</role-name>\n    </security-role>\n    <security-role>\n      <role-name>tomcat</role-name>\n    </security-role>\n\n(In reply to Mark Thomas from comment #5)\n\n+1", "id": 174648, "time": "2014-04-16T17:32:10Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-04-16T17:32:10Z", "is_private": false, "attachment_id": null}]