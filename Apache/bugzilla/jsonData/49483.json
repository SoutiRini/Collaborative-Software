[{"count": 0, "tags": [], "bug_id": 49483, "is_private": false, "text": "Created attachment 25627\nsource code patch\n\nKeyResolver.registerAtStart() adds a String to KeyResolver._resolverVector.\nIn ResolverIterator.next(), we expect the items in _resolverVector to be KeyResolver instances and this causes a ClassCastException.\n\nTo reproduce, run this code:\nKeyResolver.registerAtStart(\"org.apache.xml.security.test.encryption.BobKeyResolver\");\nKeyResolverSpi resolver = (KeyResolverSpi)KeyResolver.iterator().next();\n\nThe solution is to call new KeyResolver(className) just like KeyResolver.register().\nUnfortunately, we cannot add the throws clauses. For backwards compatibility,  we return an unchecked RuntimeException instead. We chose IllegalArgumentException.\n\nWe also modify ResolverIterator.remove() to throw an UnsupportedOperationException.\n\nI did not add a junit for this bug because there is no way to remove a KeyResolver once it is registered. This would affect the subsequent tests.", "id": 137787, "time": "2010-06-21T18:17:37Z", "creator": "Clement_Pellerin@ibi.com", "creation_time": "2010-06-21T18:17:37Z", "attachment_id": 25627}, {"count": 1, "tags": [], "bug_id": 49483, "text": "\nPatch applied, thanks.\n\nColm.", "id": 137853, "time": "2010-06-23T13:41:59Z", "creator": "coheigea@apache.org", "creation_time": "2010-06-23T13:41:59Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 49483, "is_private": false, "text": "\nHi Clement,\n\nA problem with this patch is that it is not compatible with JDK 1.4:\n\n    [javac] symbol  : constructor IllegalArgumentException (java.lang.String,java.lang.Exception)\n    [javac] location: class java.lang.IllegalArgumentException\n    [javac]            throw new IllegalArgumentException(\"Invalid KeyResolver class name\", ex);\n    [javac]                  ^\n    [javac] 1 error\n\nColm.", "id": 138036, "time": "2010-06-30T10:12:28Z", "creator": "coheigea@apache.org", "creation_time": "2010-06-30T10:12:28Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 49483, "attachment_id": null, "is_private": false, "id": 138090, "time": "2010-07-02T09:11:44Z", "creator": "sean.mullan@oracle.com", "creation_time": "2010-07-02T09:11:44Z", "text": "(In reply to comment #2)\n> Hi Clement,\n> \n> A problem with this patch is that it is not compatible with JDK 1.4:\n> \n>     [javac] symbol  : constructor IllegalArgumentException\n> (java.lang.String,java.lang.Exception)\n>     [javac] location: class java.lang.IllegalArgumentException\n>     [javac]            throw new IllegalArgumentException(\"Invalid KeyResolver\n> class name\", ex);\n>     [javac]                  ^\n>     [javac] 1 error\n> \n> Colm.\n\nYou can make that compatible with 1.4 as follows:\n\nthrow (IllegalArgumentException) new \n       IllegalArgumentException(\"Invalid KeyResolver class name\").initCause(ex);"}, {"count": 4, "tags": [], "bug_id": 49483, "text": "\nFix applied thanks Sean!\n\nColm.", "id": 138608, "time": "2010-07-21T13:27:36Z", "creator": "coheigea@apache.org", "creation_time": "2010-07-21T13:27:36Z", "is_private": false, "attachment_id": null}]