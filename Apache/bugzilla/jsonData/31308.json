[{"count": 0, "tags": [], "bug_id": 31308, "attachment_id": null, "text": "I used jasper to precompile JSPs. When the JSP is a in a welcome-file-list, \nTomcat ignores the existing precompiled class file and compiles the JSP \nagain.", "id": 63871, "time": "2004-09-20T13:30:43Z", "creator": "alex14641@yahoo.com", "creation_time": "2004-09-20T13:30:43Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 63872, "time": "2004-09-20T13:38:24Z", "bug_id": 31308, "creation_time": "2004-09-20T13:38:24Z", "is_private": false, "text": "I really doubt this, since this is the root webapp which is set as default after\ninstalling Tomcat uses a index.jsp precompiled JSP."}, {"count": 2, "tags": [], "bug_id": 31308, "text": "More info. \n \nHere's my jspc target definition: \n \n <target name=\"jspc\" description=\"ant:jspc\" depends=\"compile\">  \n    <taskdef classname=\"org.apache.jasper.JspC\" name=\"jasper2\" >  \n      <classpath id=\"jspc.classpath\">  \n        <pathelement location=\"${java.home}/../lib/tools.jar\"/>  \n        <fileset dir=\"${catalina.home}/bin\">  \n          <include name=\"*.jar\"/>  \n        </fileset>  \n        <fileset dir=\"${catalina.home}/server/lib\">  \n          <include name=\"*.jar\"/>  \n        </fileset>  \n        <fileset dir=\"${catalina.home}/common/lib\">  \n          <include name=\"*.jar\"/>  \n        </fileset>  \n      </classpath>  \n    </taskdef>  \n \n    <jasper2  \n             validateXml=\"false\"  \n             uriroot=\"${build.home}\"  \n             webXmlFragment=\"${src.home}/WEB-INF/web_jspc.xml\"  \n             outputDir=\"${src.home}/jspc\" />  \n \n    <javac srcdir=\"${src.home}/jspc\" \n          destdir=\"${build.home}/WEB-INF/classes\" \n           debug=\"${compile.debug}\" \n     deprecation=\"${compile.deprecation}\" \n        optimize=\"${compile.optimize}\"> \n        <classpath refid=\"compile.classpath\"/> \n    </javac> \n  </target> \n \nMy deploy task: \n  <taskdef name=\"deploy\" classname=\"org.apache.catalina.ant.DeployTask\"> \n    <classpath> \n      <pathelement location=\"${catalina.home}/server/lib/catalina-ant.jar\"/> \n    </classpath> \n  </taskdef> \n \n  <target name=\"deploy\" description=\"tomcat:deploy\"> \n    <deploy url=\"${manager.url}\" \n        username=\"${manager.username}\" \n        password=\"${manager.password}\" \n          update=\"true\" \n            path=\"/app.path\" \n        localWar=\"file://${build.home}\"> \n    </deploy> \n  </target> \n \n \nThe xml created by jasper is inserted in the \nappropriawork/Catalina/localhostte place in \nweb.xml ( before the welcome-file-list ). \n \nWhen I access the JSP directly via the browser,  \nTomcat does not create .java or .class files in the  \n$CATALINA_HOME/work/Catalina/localhost/app_path directory; \nif I don't type the JSP file name, the files are created, \nwhich (I think) shouldn't happen. \n \n ", "id": 63894, "time": "2004-09-20T17:37:24Z", "creator": "alex14641@yahoo.com", "creation_time": "2004-09-20T17:37:24Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 63895, "time": "2004-09-20T17:42:50Z", "bug_id": 31308, "creation_time": "2004-09-20T17:42:50Z", "is_private": false, "text": "I still do not see anything which is any different from the root web\napplication, which you don't seem to have looked into at all.\nPlease attach a small test WAR with your precompiled application, exhibiting the\n\"issue\". I recommend you look into the issue more instead of reopening the bug."}, {"attachment_id": 12805, "tags": [], "bug_id": 31308, "text": "Created attachment 12805\nbuild.xml file", "count": 4, "id": 63907, "time": "2004-09-20T19:10:21Z", "creator": "alex14641@yahoo.com", "creation_time": "2004-09-20T19:10:21Z", "is_private": false}, {"attachment_id": 12806, "tags": [], "bug_id": 31308, "text": "Created attachment 12806\nweb.xml file", "count": 5, "id": 63908, "time": "2004-09-20T19:10:53Z", "creator": "alex14641@yahoo.com", "creation_time": "2004-09-20T19:10:53Z", "is_private": false}, {"count": 6, "tags": [], "creator": "alex14641@yahoo.com", "attachment_id": 12807, "id": 63909, "time": "2004-09-20T19:11:58Z", "bug_id": 31308, "creation_time": "2004-09-20T19:11:58Z", "is_private": false, "text": "Created attachment 12807\njspctest.jsp example JSP"}, {"count": 7, "tags": [], "creator": "alex14641@yahoo.com", "attachment_id": null, "id": 63910, "time": "2004-09-20T19:27:07Z", "bug_id": 31308, "creation_time": "2004-09-20T19:27:07Z", "is_private": false, "text": "Please find three file attached:  \nbuild.xml \nweb.xml \njspctest.jsp \n \nHere's how to reproduce the bug; \n1) Create a directory called jspctest. This directory \n   must NOT be under the $CATALINA_HOME directory. \n \n2) Copy the three attached files to jspctest. \n \n3) Edit build.xml and set the properties to suit your environment. \n \n4) type \"ant deploy\" to deploy the app. \n \n5) Open a console window cd to \n$CATALINA_HOME/work/Catalina/localhost/jspctest. \n \n6) Open a web browser and go to http://localhost:8080/jspctest/jspctest.jsp \n \n7) In the console window created in step 5, type \"find .\". The only files \n   which should appear are: \n. \n./tldCache.ser \n \n \n8) Repeat step 6, but change the URL to  \n   ttp://localhost:8080/jspctest/ \n \n9) Repeat step 7. You should now see the additional files \n   ./org/apache/jsp/jspctest_jsp.java \n   ./org/apache/jsp/jspctest_jsp.class \n   which should not be created. \n \n \nI hope this all makes the issue clear. \n \n \n \n "}, {"count": 8, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 63913, "time": "2004-09-20T19:40:04Z", "bug_id": 31308, "creation_time": "2004-09-20T19:40:04Z", "is_private": false, "text": "Crystal clear (<welcome-file> /jspctest.jsp </welcome-file>). You should have\nposted on tomcat-user about this \"bug\" first."}]