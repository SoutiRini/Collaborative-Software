[{"count": 0, "tags": [], "bug_id": 45831, "attachment_id": 22600, "is_private": false, "id": 120733, "time": "2008-09-18T02:52:27Z", "creator": "rmista@excite.com", "creation_time": "2008-09-18T02:52:27Z", "text": "Created attachment 22600\nWebServiceSampler Patch\n\nWebService sampler reports incorrect throughput in Aggregate Report if a creation of any SOAP packets fails (i.e. if the SOAP data contains unencoded invalid characters such as &, <, >). This issue might be related to bug #33940.\n\nThis issue is caused due to the fact that the SampleResult startTime and endTime are not getting set if an error occurs and exception is thrown in WebServiceSampler::sample() method. Leaving the SampleResult's startTime equal to 0 causes the SamplingStatCalculator to set the test start time to 0 which causes incorrect overall throughput calculation.\n\nSteps to recreate:\n1) Set up a Test Plan with a WS Request Sampler (preferably reading the SOAP XML data from a file) and Aggregate Report\n2) Set up the SOAP data so that one packet would include unencoded invalid XML character \n3) Run the test and notice that the throughput in the Aggregate Report is reported as 0.0/hr for the entire the test after incorrect SOAP packet has been processed.\n\nAttached patch adds code to WebServiceSampler::sample() which ensures that result startTime and endTime are always set."}, {"count": 1, "tags": [], "bug_id": 45831, "is_private": false, "text": "Thanks for the report and patch; it has been applied to SVN:\n\nURL: http://svn.apache.org/viewvc?rev=697963&view=rev\nLog:\nBug 45831 - WS Sampler reports incorrect throughput if SOAP packet creation fails\n", "id": 120856, "time": "2008-09-22T12:46:08Z", "creator": "sebb@apache.org", "creation_time": "2008-09-22T12:46:08Z", "attachment_id": null}]