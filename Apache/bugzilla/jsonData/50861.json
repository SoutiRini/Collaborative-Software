[{"count": 0, "tags": [], "bug_id": 50861, "attachment_id": 26725, "id": 144701, "time": "2011-03-03T08:42:57Z", "creator": "torsten.foertsch@gmx.net", "creation_time": "2011-03-03T08:42:57Z", "is_private": false, "text": "Created attachment 26725\nThe Cure\n\nmod_log_config contains these lines\n\nstatic const char *set_buffered_logs_on(cmd_parms *parms, void *dummy, int \nflag)\n{\n    buffered_logs = flag;\n    if (buffered_logs) {\n        ap_log_set_writer_init(ap_buffered_log_writer_init);\n        ap_log_set_writer(ap_buffered_log_writer);\n    }\n    return NULL;\n}\n\nThe buffered_logs global variable reflects the BufferedLogs directive.\n\nNow, if my config file contains the 2 lines\n\n  BufferedLogs On\n  BufferedLogs Off\n\nin that order the first directive turns buffered logs on and sets the writer \nfunctions. The 2nd directive turns the buffered_logs flag off but doesn't \nreset the writer functions. Hence, if your config contains those lines the \nhttpd will segfault at startup.\n\nFurther, when mod_log_config is compiled as a shared module it is unloaded and \nthe global variables buffered_logs, log_writer and log_writer_init are reset \nduring a restart via SIG{HUP,USR1}. But if the module is compiled statically \nthose global variables keep their values and a similar situation as described \nabove can appear.\n\nI have found that in 2.2.17. But I have verified it is also present in trunk.\n\nThe enclosed patch cures the problem."}, {"count": 1, "tags": [], "bug_id": 50861, "text": "Closed in trunk - r1082518", "id": 145062, "time": "2011-03-17T11:04:33Z", "creator": "jim@apache.org", "creation_time": "2011-03-17T11:04:33Z", "is_private": false, "attachment_id": null}]