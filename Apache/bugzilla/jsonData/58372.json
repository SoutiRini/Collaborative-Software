[{"count": 0, "tags": [], "bug_id": 58372, "attachment_id": null, "id": 185129, "time": "2015-09-12T01:28:55Z", "creator": "yilong.li@runtimeverification.com", "creation_time": "2015-09-12T01:28:55Z", "is_private": false, "text": "Reported by RV-Predict (a dynamic race detector) when running the test suite:\nData race on field org.apache.catalina.connector.OutputBuffer.suspended: {{{\n    Concurrent read in thread T115 (locks held: {})\n ---->  at org.apache.catalina.connector.OutputBuffer.isSuspended(OutputBuffer.java:200)\n        at org.apache.catalina.connector.Response.isSuspended(Response.java:400)\n        at org.apache.catalina.connector.Response.isAppCommitted(Response.java:341)\n        at org.apache.catalina.connector.ResponseFacade.isCommitted(ResponseFacade.java:345)\n        at org.apache.catalina.connector.ResponseFacade.setHeader(ResponseFacade.java:542)\n        at org.apache.catalina.core.TestAsyncContextImpl$Bug50753Servlet$1.run(TestAsyncContextImpl.java:1153)\n        at org.apache.catalina.core.AsyncContextImpl$RunnableWrapper.run(AsyncContextImpl.java:562)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    T115 is created by T114\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:1010)\n\n    Concurrent write in thread T114 (locks held: {Monitor@4c031101})\n ---->  at org.apache.catalina.connector.OutputBuffer.setSuspended(OutputBuffer.java:210)\n        at org.apache.catalina.connector.Response.setSuspended(Response.java:392)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:167)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\n        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\n        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:277)\n        - locked Monitor@4c031101 at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:259) \n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    T114 is created by T112\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:1010)\n}}}"}, {"count": 1, "text": "One more report:\n\nData race on field org.apache.catalina.connector.OutputBuffer.suspended: {{{\n    Concurrent write in thread T38 (locks held: {Monitor@c32a9c3})\n ---->  at org.apache.catalina.connector.OutputBuffer.setSuspended(OutputBuffer.java:210)\n        at org.apache.catalina.connector.Response.setSuspended(Response.java:392)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:167)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\n        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\n        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:277)\n        - locked Monitor@c32a9c3 at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:259) \n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    T38 is created by T36\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:1010)\n\n    Concurrent read in thread T39 (locks held: {})\n ---->  at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:402)\n        at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:97)\n        at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:90)\n        at org.apache.catalina.connector.TestCoyoteAdapter$AsyncServlet$1.run(TestCoyoteAdapter.java:387)\n    T39 is created by T38\n        at org.apache.catalina.connector.TestCoyoteAdapter$AsyncServlet.doGet(TestCoyoteAdapter.java:409)\n}}}", "creator": "yilong.li@runtimeverification.com", "is_private": false, "id": 185136, "time": "2015-09-12T07:42:29Z", "bug_id": 58372, "creation_time": "2015-09-12T07:42:29Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 58372, "attachment_id": null, "id": 185144, "time": "2015-09-12T15:59:12Z", "creator": "yilong.li@runtimeverification.com", "creation_time": "2015-09-12T15:59:12Z", "is_private": false, "text": "Another race on OutputBuffer.closed:\nData race on field org.apache.catalina.connector.OutputBuffer.closed: {{{\n    Concurrent write in thread T21 (locks held: {})\n ---->  at org.apache.catalina.connector.OutputBuffer.close(OutputBuffer.java:297)\n        at org.apache.catalina.connector.Response.finishResponse(Response.java:453)\n        at org.apache.catalina.connector.CometEventImpl.close(CometEventImpl.java:96)\n        at org.apache.catalina.comet.TestCometProcessor$AsyncCometCloseThread.run(TestCometProcessor.java:665)\n    T21 is created by T20\n        at org.apache.catalina.comet.TestCometProcessor$AsyncCometCloseValve.invoke(TestCometProcessor.java:648)\n\n    Concurrent read in thread T20 (locks held: {Monitor@78eabf38})\n ---->  at org.apache.catalina.connector.OutputBuffer.isClosed(OutputBuffer.java:220)\n        at org.apache.catalina.connector.Response.isClosed(Response.java:408)\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:521)\n        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\n        at org.apache.tomcat.util.net.Nio2Endpoint$SocketProcessor.doRun(Nio2Endpoint.java:1074)\n        at org.apache.tomcat.util.net.Nio2Endpoint$SocketProcessor.run(Nio2Endpoint.java:1033)\n        - locked Monitor@78eabf38 at org.apache.tomcat.util.net.Nio2Endpoint$SocketProcessor.run(Nio2Endpoint.java:1032)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    T20 is created by T19\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:1010)\n}}}"}, {"count": 3, "tags": [], "bug_id": 58372, "text": "Fixed in trunk and 8.0.x for 8.0.27 onwards.", "id": 185228, "time": "2015-09-14T16:14:24Z", "creator": "markt@apache.org", "creation_time": "2015-09-14T16:14:24Z", "is_private": false, "attachment_id": null}]