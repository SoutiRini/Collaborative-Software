[{"count": 0, "tags": [], "bug_id": 21162, "attachment_id": null, "id": 39570, "creation_time": "2003-06-28T12:10:04Z", "time": "2003-06-28T12:10:04Z", "creator": "st@kino-fahrplan.de", "text": "Testcase: \nDirectory with option multiviews enabled, \"AddOutputFilter INCLUDES .shtml\" and\n\"AddOutputFilterByType DEFLATE text/html\".\nApache 2.0.46 with the mod_deflate patch from\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=19913 applied.\n\ntest.shtml:\n  test.shtml, line 1\n  <!--#include virtual=\"include\" -->\n  test.shtml, line 3\n\ninclude.html:\n  include.html, line 1\n\nIf test.shtml is requested with \"Accept-Encoding: gzip\" Apache returns\n\"Content-Encoding: gzip\" and the uncompressed contents of include.html, followed\nby the compressed content of test.shtml. Notice that the order is \"include.html,\nline 1\", \"test.shtml, line 1\", \"test.shtml, line 3\", so it doesn't even get the\nSSI thing correct on test.shtml.\n\nWorks fine if virtual=\"include\" is replaced with virtual=\"include.html\", i.e.\nwithout content negotiation in the subrequest for include.html.", "is_private": false}, {"count": 1, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of 17629 ***", "attachment_id": null, "bug_id": 21162, "id": 39573, "time": "2003-06-28T14:26:28Z", "creator": "nd@perlig.de", "creation_time": "2003-06-28T14:26:28Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 21162, "attachment_id": null, "is_private": false, "id": 39575, "time": "2003-06-28T14:48:03Z", "creator": "st@kino-fahrplan.de", "creation_time": "2003-06-28T14:48:03Z", "text": "Sorry, mixed up bug numbers. Patch from\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=17629 applied and does not work.\n\nPlease also note that there is no redirect involved as in 17629."}, {"count": 3, "tags": [], "bug_id": 21162, "text": "That is, because the patch is not ready for commit ;-) The Problem is deeper.\nThe patch provided there solves one part, but breaks other things.\n\nTrust me [ ;-) ], it's the same issue; Multiviews causes a (fast) internal\nredirect. That's not a normal redirect, rather than a merge of a subrequest with\nthe actual request, but suffers in this case from the same conceptual problem.\n(it bypasses the resource filter chain and mixes that way the two contents\n\"randomly\").\n\n*** This bug has been marked as a duplicate of 17629 ***", "id": 39577, "time": "2003-06-28T16:16:44Z", "creator": "nd@perlig.de", "creation_time": "2003-06-28T16:16:44Z", "is_private": false, "attachment_id": null}]