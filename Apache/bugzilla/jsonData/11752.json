[{"count": 0, "tags": [], "bug_id": 11752, "attachment_id": null, "text": "If xerces 2 .jar files are included in the WEB-INF/lib directory,\n.jsp pages cannot be successfully dispatched.  Tomcat generates an\ninternal server error with:\n\njava.lang.NoClassDefFoundError: org/w3c/dom/DOMErrorHandler\n\nI found several other similar (but not identical) bug reports that\nhave been closed as fixed (6374 and 6248), but did not find any\nopen bug reports describing this specific problem.\n\nTo demonstrate this problem:\n\n1) Place xerces2 jar files (xerces-xercesImpl.jar, xerces-xmlParserAPIs.jar)\ninto the WEB-APP/lib directory.\n\n2) Place the sample HelloWorld.jsp page (see below) into web app's root\ndirectory.\n\n3) Compile the sample HelloWorld.java servlet (see below), and place the\n.class file into the WEB-INF/classes directory.\n\n4) Set up an appropriate web.xml file, and invoke the HelloWorld servlet from\na web browser.\n\n--Sample HelloWorld.jsp page:\n<html>\n<head>\n<title>Hi</title>\n</head>\n<body>\nHey there\n</body>\n</html>\n\n-- Sample HelloWorld Servlet:\nimport java.io.*;\nimport javax.servlet.*;\nimport javax.servlet.http.*;\npublic class HelloWorld extends HttpServlet {\n    public void doGet(HttpServletRequest request,\n                    HttpServletResponse response)\n      throws ServletException, IOException\n    {                \n        RequestDispatcher requestDispatcher = \n            getServletContext().getRequestDispatcher(\"/HelloWorld.jsp\");\n        requestDispatcher.forward(request, response);        \n    }\n}\n\nSample traceback:\nroot cause \n\njava.lang.NoClassDefFoundError: org/w3c/dom/DOMErrorHandler\n\tat java.lang.ClassLoader.defineClass0(Native Method)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:486)\n\tat \njava.security.SecureClassLoader.defineClass(SecureClassLoader.java:111)\n\tat \norg.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader\n.java:1643)\n\tat \norg.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:93\n7)\n\tat \norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:13\n72)\n\tat \norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:12\n54)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:313)\n\tat org.apache.xerces.dom.CoreDocumentImpl.(CoreDocumentImpl.java:173)\n\tat org.apache.xerces.dom.DocumentImpl.(DocumentImpl.java:173)\n\tat \norg.apache.xerces.dom.DeferredDocumentImpl.(DeferredDocumentImpl.java:194)\n\tat \norg.apache.xerces.dom.DeferredDocumentImpl.(DeferredDocumentImpl.java:189)\n\tat \norg.apache.xerces.parsers.AbstractDOMParser.startDocument(AbstractDOMParser.java\n:712)\n\tat \norg.apache.xerces.impl.XMLNamespaceBinder.startDocument(XMLNamespaceBinder.java:\n444)\n\tat \norg.apache.xerces.impl.dtd.XMLDTDValidator.startDocument(XMLDTDValidator.java:64\n4)\n\tat \norg.apache.xerces.impl.XMLDocumentScannerImpl.startEntity(XMLDocumentScannerImpl\n.java:431)\n\tat \norg.apache.xerces.impl.XMLEntityManager.startEntity(XMLEntityManager.java:878)\n\tat \norg.apache.xerces.impl.XMLEntityManager.startDocumentEntity(XMLEntityManager.jav\na:741)\n\tat \norg.apache.xerces.impl.XMLDocumentScannerImpl.setInputSource(XMLDocumentScannerI\nmpl.java:260)\n\tat \norg.apache.xerces.parsers.DTDConfiguration.parse(DTDConfiguration.java:498)\n\tat \norg.apache.xerces.parsers.DTDConfiguration.parse(DTDConfiguration.java:580)\n\tat org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:152)\n\tat org.apache.xerces.parsers.DOMParser.parse(DOMParser.java:253)\n\tat \norg.apache.xerces.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:201)\n\tat javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:122)\n\tat \norg.apache.jasper.parser.ParserUtils.parseXMLDocument(ParserUtils.java:201)\n\tat \norg.apache.jasper.compiler.TldLocationsCache.processWebDotXml(TldLocationsCache.\njava:165)\n\tat \norg.apache.jasper.compiler.TldLocationsCache.(TldLocationsCache.java:138)\n\tat \norg.apache.jasper.EmbededServletOptions.(EmbededServletOptions.java:350)\n\tat org.apache.jasper.servlet.JspServlet.init(JspServlet.java:265)\n\tat \norg.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:918)\n\tat \norg.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:655)\n\tat \norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java\n:652)\n\tat \norg.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.j\nava:431)\n\tat \norg.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.jav\na:355)\n\tat HelloWorld.doGet(HelloWorld.java:16)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat \norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilt\nerChain.java:247)\n\tat \norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.\njava:193)\n\tat \norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:2\n43)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:1\n90)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.core.StandardContext.invoke(StandardContext.java:2347)\n\tat \norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java\n:170)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat \norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat \norg.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:468)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174\n)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:1027\n)\n\tat \norg.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1125)\n\tat java.lang.Thread.run(Thread.java:484)", "id": 21139, "time": "2002-08-15T23:10:52Z", "creator": "maxhearn@aol.com", "creation_time": "2002-08-15T23:10:52Z", "is_private": false}, {"count": 1, "tags": [], "text": "CL bugs won't be fixed in 4.0.x. Use 4.1.x instead (or consider upgrading).", "is_private": false, "id": 21153, "creator": "remm@apache.org", "time": "2002-08-16T09:05:19Z", "bug_id": 11752, "creation_time": "2002-08-16T09:05:19Z", "attachment_id": null}]