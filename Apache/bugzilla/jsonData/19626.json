[{"count": 0, "tags": [], "creator": "apache@elho.net", "attachment_id": null, "is_private": false, "id": 36626, "time": "2003-05-03T23:28:56Z", "bug_id": 19626, "creation_time": "2003-05-03T23:28:56Z", "text": "On Apache 1.3.27 I successfully use the following to set the MIME-type\nof XHTML files to text/html instead of the default\napplication/xhtml+xml for browsers that can't handle the latter:\n\nRewriteCond %{REQUEST_FILENAME} \"\\.xhtml$\"                      [NC]\nRewriteCond %{HTTP_ACCEPT}      \"!application/xhtml\\+xml\"       [OR]\nRewriteCond %{HTTP_ACCEPT}      \"application/xhtml\\+xml\\s*;\\s*q=0([^.]|$)\"\nRewriteRule .*                  -                               [PT,T=text/html]\n\nOn Apache 2.0.44 and 2.0.45 this however does not work, ie. the XHTML\nfiles are always delivered with a Content-Type of application/xhtml+xml.\nI get the following rewrite log when simply fetching /index.xhtml with\nwget:\n\n::1 - - [08/Apr/2003:23:00:46 +0200]\n[wren.elho.net/sid#811a9d8][rid#846cdd8/initial] (4) RewriteCond:\ninput='/index.xhtml' pattern='\\.xhtml$' => matched\n::1 - - [08/Apr/2003:23:00:46 +0200]\n[wren.elho.net/sid#811a9d8][rid#846cdd8/initial] (4) RewriteCond: input='*/*'\npattern='!application/xhtml\\+xml' => matched\n:1 - - [08/Apr/2003:23:00:46 +0200]\n[wren.elho.net/sid#811a9d8][rid#846cdd8/initial] (2) remember /index.xhtml to\nhave MIME-type 'text/html'\n::1 - - [08/Apr/2003:23:00:46 +0200]\n[wren.elho.net/sid#811a9d8][rid#846cdd8/initial] (1) pass\n through /index.xhtml\n\nThis shows that the conditions work and the RewriteRule gets applied,          \n                    but Apache either seems to \"forget\" to actually set the\nMIME-type to                                text/html or something (some\nfilter?) happening after mod_rewrite set                               it, sets\nit back again.                                                                 \n           As for possibly interfering filters, disabling mod_deflate and      \n                               mod_headers didn't change anything."}, {"count": 1, "tags": [], "bug_id": 19626, "is_private": false, "id": 36631, "creation_time": "2003-05-04T15:54:37Z", "time": "2003-05-04T15:54:37Z", "creator": "nd@perlig.de", "text": "It *may* work if you permute the LoadModule directives of mod_rewrite and\nmod_mime. Final fix is in progress.\n\nThanks for the report and thanks for using Apache.", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 19626, "text": "FYI: The fix has been merged into the stable tree and will be in the next\nrelease (2.0.46).", "id": 37147, "time": "2003-05-13T22:53:10Z", "creator": "nd@perlig.de", "creation_time": "2003-05-13T22:53:10Z", "is_private": false, "attachment_id": null}]