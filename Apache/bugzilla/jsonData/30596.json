[{"count": 0, "tags": [], "bug_id": 30596, "attachment_id": null, "id": 61831, "time": "2004-08-11T14:57:32Z", "creator": "ericmeyer_lenya@quoininc.com", "creation_time": "2004-08-11T14:57:32Z", "is_private": false, "text": "The CopyJavaSourcesTask.java Ant task does not support absolute directory paths\n- only relative to the base dir. When building Lenya as part of a larger\nproject, I wanted to have a different common build destination directory.\n\nThe attached patch removes that limitation.\n\nPatch to CopyJavaSourcesTask.java,v 1.20\n\n---\nsrc/org/apache/lenya/project/src/java/org/apache/lenya/cms/ant/CopyJavaSourcesTask.java\n+++\nsrc/org/apache/lenya/project/src/java/org/apache/lenya/cms/ant/CopyJavaSourcesTask.java\n@@ -45,8 +45,15 @@\n         int numberOfFilesCopied = 0;\n         TwoTuple twoTuple = new TwoTuple(numberOfDirectoriesCreated,\nnumberOfFilesCopied);\n \n-        File absoluteBuildDir = new File(getProject().getBaseDir(),\nProject.translatePath(buildDir));\n-\n+        String translatedBuildDir = Project.translatePath(buildDir);\n+        File absoluteBuildDir = null;\n+        if (translatedBuildDir != null &&\ntranslatedBuildDir.startsWith(File.separator)) {\n+            absoluteBuildDir = new File(translatedBuildDir);\n+        } else {\n+\t    absoluteBuildDir = new File(getProject().getBaseDir(), \n+                    translatedBuildDir);\n+        }\n+       \n         StringTokenizer st = new StringTokenizer(pubsRootDirs.toString(),\nFile.pathSeparator);\n \n         while (st.hasMoreTokens()) {"}, {"count": 1, "tags": [], "bug_id": 30596, "text": "Created attachment 12392\nPatch to CopyJavaSourcesTask.java,v 1.20", "id": 61832, "attachment_id": 12392, "creator": "ericmeyer_lenya@quoininc.com", "creation_time": "2004-08-11T14:58:46Z", "time": "2004-08-11T14:58:46Z", "is_private": false}]