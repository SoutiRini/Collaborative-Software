[{"count": 0, "tags": [], "creator": "erno-apbugs@erno.iki.fi", "attachment_id": null, "id": 45246, "time": "2003-10-08T12:22:25Z", "bug_id": 23673, "creation_time": "2003-10-08T12:22:25Z", "is_private": false, "text": "AllowCONNECT cannot be configured to allow connections to all ports. This\nmakes life difficult if you don't want to restrict use of https (and other\ncreative uses of CONNECT) to non-standard ports.\n\nproxy_connect.c:\n\n   169      /* Check if it is an allowed port */\n   170      if (conf->allowed_connect_ports->nelts == 0) {\n   171          /* Default setting if not overridden by AllowCONNECT */\n   172          switch (uri.port) {\n   173              case APR_URI_HTTPS_DEFAULT_PORT:\n   174              case APR_URI_SNEWS_DEFAULT_PORT:\n   175                  break;\n   176              default:\n   177                  /* XXX can we call ap_proxyerror() here to get a nice lo\ng message? */\n   178                  return HTTP_FORBIDDEN;\n   179          }\n   180      } else if(!allowed_port(conf, uri.port)) {\n   181          /* XXX can we call ap_proxyerror() here to get a nice log messag\ne? */\n   182          return HTTP_FORBIDDEN;\n   183      }\n\n...\n\n    89  static int\n    90  allowed_port(proxy_server_conf *conf, int port)\n    91  {\n    92      int i;\n    93      int *list = (int *) conf->allowed_connect_ports->elts;\n       \n\n    94      for(i = 0; i < conf->allowed_connect_ports->nelts; i++) {\n    95          if(port == list[i])\n    96              return 1;\n    97      }\n    98      return 0;\n    99  }"}, {"count": 1, "tags": [], "creator": "rahul.g.nair@gmail.com", "attachment_id": 19563, "id": 99183, "time": "2007-02-09T08:30:17Z", "bug_id": 23673, "creation_time": "2007-02-09T08:30:17Z", "is_private": false, "text": "Created attachment 19563\npatch for AllowConnect to accept port '0' as meaning all ports\n\nThe port 0 is taken to allow all ports. The reason for choosing '0'\nis that binding to 0 traditionally means bind to any port for servers."}, {"attachment_id": null, "tags": [], "creator": "aph@debian.org", "is_private": false, "count": 2, "id": 109702, "time": "2007-10-24T08:27:42Z", "bug_id": 23673, "creation_time": "2007-10-24T08:27:42Z", "text": "I think this functionality would be quite useful.  My situation is that I have a\nproxy servicing only an internal network on the local interface, so it is pretty\nsecure to begin with.  Having to go through and allow each port I happen across\nis pretty annoying.\n\nAlternatively you could either use '*' for allowing connect to any port, which\nmatches other apache directives such as location. "}, {"count": 3, "tags": [], "bug_id": 23673, "attachment_id": null, "text": "fixed in trunk in r932927 by allowing port ranges", "id": 136009, "time": "2010-04-11T11:55:55Z", "creator": "sf@sfritsch.de", "creation_time": "2010-04-11T11:55:55Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 23673, "attachment_id": null, "text": "*** Bug 50714 has been marked as a duplicate of this bug. ***", "id": 143955, "time": "2011-02-03T06:17:22Z", "creator": "sf@sfritsch.de", "creation_time": "2011-02-03T06:17:22Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 23673, "text": "fixed in 2.4.1", "id": 154169, "time": "2012-02-26T16:29:36Z", "creator": "sf@sfritsch.de", "creation_time": "2012-02-26T16:29:36Z", "is_private": false, "attachment_id": null}]