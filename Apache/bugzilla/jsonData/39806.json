[{"count": 0, "tags": [], "creator": "brectanu@gmail.com", "attachment_id": null, "text": "Hello,\n\nHere is a very simple patch to add some env vars to mod_proxy_balancer.  This\nallows you to figure out where the request was routed from the reverse proxy.  I\nneeded this to add sticky session cookies to the response because I could not\nmodify the backend app.\n\nSo, you can do something like this on the reverse proxy:\n\nSetEnvIf ^Cookie$ \"MYCOOKIE=([^ ;]*)\" MYCOOKIE=$1\nHeader append Set-Cookie \"MYCOOKIE=%{UNIQUE_ID}e.%{BALANCER_WORKER_ROUTE}e;\npath=/\" env=!MYCOOKIE\n\nRewriteRule ^/+(.*) balancer://test/$1 [P]\nProxyPassReverse / balancer://test/\n\n<Proxy balancer://test>\n  BalancerMember http://host1 route=host1\n  BalancerMember http://host2 route=host2\n</Proxy>\nProxySet balancer://test stickysession=MYCOOKIE nofailover=On", "id": 90159, "time": "2006-06-13T21:31:42Z", "bug_id": 39806, "creation_time": "2006-06-13T21:31:42Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 39806, "attachment_id": 18457, "text": "Created attachment 18457\npatch\n\nquick patch to add env vars to mod_proxy_balancer", "id": 90160, "time": "2006-06-13T21:33:19Z", "creator": "brectanu@gmail.com", "creation_time": "2006-06-13T21:33:19Z", "is_private": false}, {"count": 2, "text": "Nice tool.\n\nIf you want to log this, use %{BALANCER_foo}e in the access log.  I don't see\nthe need for the debug-level error log messages.  Other opinions from the crowd?", "bug_id": 39806, "is_private": false, "id": 90200, "time": "2006-06-14T12:51:21Z", "creator": "trawick@apache.org", "creation_time": "2006-06-14T12:51:21Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 39806, "attachment_id": 18467, "text": "Created attachment 18467\nmod_proxy_balancer-trunk.patch\n\nCleaned up patch, added patch to docs, against trunk.", "id": 90215, "time": "2006-06-14T19:14:22Z", "creator": "brectanu@gmail.com", "creation_time": "2006-06-14T19:14:22Z", "is_private": false}, {"attachment_id": 18468, "tags": [], "bug_id": 39806, "is_private": false, "count": 4, "id": 90216, "time": "2006-06-14T19:16:43Z", "creator": "brectanu@gmail.com", "creation_time": "2006-06-14T19:16:43Z", "text": "Created attachment 18468\nmod_proxy_balancer-trunk.patch\n\nLet's try that again w/o the tab characters ;)"}, {"count": 5, "tags": [], "text": "ok, removed the debug stuff (not needed).  I also went against trunk and added a\npatch to the docs as well.", "attachment_id": null, "bug_id": 39806, "id": 90217, "time": "2006-06-14T19:19:34Z", "creator": "brectanu@gmail.com", "creation_time": "2006-06-14T19:19:34Z", "is_private": false}, {"count": 6, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "id": 90621, "time": "2006-06-26T17:09:06Z", "bug_id": 39806, "creation_time": "2006-06-26T17:09:06Z", "is_private": false, "text": "Committed to trunk as r417238\n(http://svn.apache.org/viewvc?rev=417238&view=rev). Thanks."}]