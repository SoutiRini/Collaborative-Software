[{"count": 0, "tags": [], "bug_id": 6942, "text": "This is a problem in implementation of servlet api - \njavax.servlet.http.HttpUtils - getRequestURL (HttpServletRequest req) method. \nThe method only assumes http and https urls. That is, if the request scheme is \nother than http or https then the port number of the server will not be \nincluded in the reconstructed url. \n\nThe following code:\n\n\tif ((scheme.equals (\"http\") && port != 80)\n\t\t|| (scheme.equals (\"https\") && port != 443)) {\n\t    url.append (':');\n\t    url.append (req.getServerPort ());\n\t}\n\nshould be replaced with:\n\nif (! (  (scheme.equals(\"http\") && port == 80) || \n         (scheme.equals(\"https\") && port == 443) ) ) {\n\t    url.append (':');\n\t    url.append (req.getServerPort ());\n\t}", "id": 11528, "attachment_id": null, "creator": "gawor@mcs.anl.gov", "creation_time": "2002-03-07T00:05:59Z", "time": "2002-03-07T00:05:59Z", "is_private": false}, {"count": 1, "tags": [], "creator": "craig.mcclanahan@sun.com", "text": "I'm forwarding this report to the Servlet API feedback address \n(servletapi-feedback@eng.sun.com) because this class is part of the standard \nServlet API.\n\nTwo other things to note:\n\n* This class is deprecated as of Servlet 2.3, in favor of using\n  HttpServletRequest.getRequestURL().\n\n* The Tomcat implementation of HttpServletRequest.getRequestURL()\n  is implemented in the manner you suggest.\n\n", "id": 11555, "time": "2002-03-07T20:01:46Z", "bug_id": 6942, "creation_time": "2002-03-07T20:01:46Z", "is_private": false, "attachment_id": null}]