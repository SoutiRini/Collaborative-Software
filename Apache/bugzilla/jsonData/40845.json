[{"count": 0, "tags": [], "creator": "hunter@tencent.com", "attachment_id": null, "id": 95218, "creation_time": "2006-10-30T17:42:53Z", "time": "2006-10-30T17:42:53Z", "bug_id": 40845, "text": "hi all,\n    I patched two function to apr_tables.c. because the apr_table_get() only \ncan get the first entry in the tables, but apr_table_set() can store multi \nvalue with same key in it. I use these function to modify http header:\n\nint i = 0;\nwhile((result = apr_table_get_all(r->headers_out, \"Set-Cookie\", &i))!=NULL)\n                {\n                        char sBuffer[10240] = {0};\n                        apr_snprintf(sBuffer,  sizeof(sBuffer), \"%s\", result);\n                        reformatstr(sBuffer, sizeof(sBuffer) , cfg-\n>sSourceDomain,cfg->sDestDomain);\n\n                        if (apr_table_set_offset(r->headers_out, \"Set-Cookie\", \nsBuffer, i)!=0)\n                        {\n                              ap_log_rerror(APLOG_MARK, APLOG_ERR, rv, r,  \"set \nnew cookie error:[%s]\", sBuffer);\n                        }\n                        i++;\n                }", "is_private": false}, {"count": 1, "tags": [], "creator": "hunter@tencent.com", "attachment_id": 19053, "text": "Created attachment 19053\napr_tables's patch", "id": 95219, "time": "2006-10-30T17:44:52Z", "bug_id": 40845, "creation_time": "2006-10-30T17:44:52Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 40845, "attachment_id": null, "id": 103065, "time": "2007-05-10T21:12:58Z", "creator": "bojan@rexursive.com", "creation_time": "2007-05-10T21:12:58Z", "is_private": false, "text": "Use apr_table_do() for this."}]