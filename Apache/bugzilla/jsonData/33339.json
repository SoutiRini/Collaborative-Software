[{"count": 0, "tags": [], "text": "After downloading and extracting 5.5.7 and the compat bundles Tomcat starts \nOK, but when attempting to shut it down the following is displayed and the \ntomcat process does not stop;\n\nUsing CATALINA_BASE:   /home/tomcat/jakarta-tomcat-5.5.7\nUsing CATALINA_HOME:   /home/tomcat/jakarta-tomcat-5.5.7\nUsing CATALINA_TMPDIR: /home/tomcat/jakarta-tomcat-5.5.7/temp\nUsing JRE_HOME:       /usr/java/jdk1.4/jre\nCreated MBeanServer with ID: e94e92:101cf9a740b:-8000:TestMachine:1\n\nThis is using the following JVM;\n\njava version \"1.4.2_06\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_06-b03)\nJava HotSpot(TM) Client VM (build 1.4.2_06-b03, mixed mode)", "is_private": false, "bug_id": 33339, "id": 70327, "time": "2005-02-01T21:24:08Z", "creator": "tomcat@alsutton.com", "creation_time": "2005-02-01T21:24:08Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "This is always because your code or libraries used by it start and don't \nterminate non-daemon threads.  I.e., this is not a Tomcat issue.  Use the \nmailing list for discussion/clarification.", "is_private": false, "bug_id": 33339, "id": 70328, "time": "2005-02-01T21:29:29Z", "creator": "yoavs@computer.org", "creation_time": "2005-02-01T21:29:29Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "tomcat@alsutton.com", "is_private": false, "count": 2, "id": 70336, "time": "2005-02-01T21:59:33Z", "bug_id": 33339, "creation_time": "2005-02-01T21:59:33Z", "text": "This was done without any webapps installed.\n\nAs said in the original report, the distribution was extracted, the compat \nlibraries were extracted, tomcat was started, an attempt to shutdown was made \nand failed.\n"}, {"count": 3, "tags": [], "bug_id": 33339, "text": "Well, I just tested it, and wasted my time ;)", "id": 70337, "time": "2005-02-01T22:05:53Z", "creator": "remm@apache.org", "creation_time": "2005-02-01T22:05:53Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "tomcat@alsutton.com", "is_private": false, "count": 4, "id": 70341, "time": "2005-02-01T23:12:08Z", "bug_id": 33339, "creation_time": "2005-02-01T23:12:08Z", "text": "Which version of Linux are you running, this is Fedora Core 2 patched with the \nlatest patches.\n\nHeres the full output from catalina, including stack trace, which seems to \nshow there are a lot of threads waiting on an object;\n\nUsing CATALINA_BASE:   /home/al/jakarta-tomcat-5.5.7\nUsing CATALINA_HOME:   /home/al/jakarta-tomcat-5.5.7\nUsing CATALINA_TMPDIR: /home/al/jakarta-tomcat-5.5.7/temp\nUsing JRE_HOME:       /usr/java/jdk1.4/jre\nCreated MBeanServer with ID: 691f36:101cffce24d:-8000:alsutton.force9.co.uk:1\n01-Feb-2005 22:14:13 org.apache.coyote.http11.Http11Protocol init\nINFO: Initializing Coyote HTTP/1.1 on http-8080\n01-Feb-2005 22:14:13 org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 1597 ms\n01-Feb-2005 22:14:14 org.apache.catalina.core.StandardService start\nINFO: Starting service Catalina\n01-Feb-2005 22:14:14 org.apache.catalina.core.StandardEngine start\nINFO: Starting Servlet Engine: Apache Tomcat/5.5.7\n01-Feb-2005 22:14:14 org.apache.catalina.core.StandardHost start\nINFO: XML validation disabled\n01-Feb-2005 22:14:15 org.apache.catalina.core.ApplicationContext log\nINFO: org.apache.webapp.balancer.BalancerFilter: init(): ruleChain: \n[org.apache.webapp.balancer.RuleChain: \n[org.apache.webapp.balancer.rules.URLStringMatchRule: Target string: News / \nRedirect URL: http://www.cnn.com], \n[org.apache.webapp.balancer.rules.RequestParameterRule: Target param name: \nparamName / Target param value: paramValue / Redirect URL: \nhttp://www.yahoo.com], [org.apache.webapp.balancer.rules.AcceptEverythingRule: \nRedirect URL: http://jakarta.apache.org]]\n01-Feb-2005 22:14:16 org.apache.catalina.core.ApplicationContext log\nINFO: ContextListener: contextInitialized()\n01-Feb-2005 22:14:16 org.apache.catalina.core.ApplicationContext log\nINFO: SessionListener: contextInitialized()\n01-Feb-2005 22:14:16 org.apache.catalina.core.ApplicationContext log\nINFO: ContextListener: contextInitialized()\n01-Feb-2005 22:14:16 org.apache.catalina.core.ApplicationContext log\nINFO: SessionListener: contextInitialized()\n01-Feb-2005 22:14:17 org.apache.coyote.http11.Http11Protocol start\nINFO: Starting Coyote HTTP/1.1 on http-8080\n01-Feb-2005 22:14:18 org.apache.jk.common.ChannelSocket init\nINFO: JK2: ajp13 listening on /0.0.0.0:8009\n01-Feb-2005 22:14:18 org.apache.jk.server.JkMain start\nINFO: Jk running ID=0 time=0/343  config=null\n01-Feb-2005 22:14:18 org.apache.catalina.storeconfig.StoreLoader load\nINFO: Find registry server-registry.xml at classpath resource\n01-Feb-2005 22:14:18 org.apache.catalina.startup.Catalina start\nINFO: Server startup in 4584 ms\n01-Feb-2005 22:14:36 org.apache.coyote.http11.Http11Protocol pause\nINFO: Pausing Coyote HTTP/1.1 on http-8080\nFull thread dump Java HotSpot(TM) Client VM (1.4.2_06-b03 mixed mode):\n\n\"TP-Monitor\" daemon prio=1 tid=0x080ca4e8 nid=0x33b6 in Object.wait() \n[a9ecd000..a9ecd87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xacb1d010> (a \norg.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)\n\tat org.apache.tomcat.util.threads.ThreadPool$MonitorRunnable.run\n(ThreadPool.java:559)\n\t- locked <0xacb1d010> (a \norg.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"TP-Processor4\" daemon prio=1 tid=0x080c97e0 nid=0x33b6 runnable \n[a9f4e000..a9f4e87c]\n\tat java.net.PlainSocketImpl.socketAccept(Native Method)\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:353)\n\t- locked <0xacb1f620> (a java.net.PlainSocketImpl)\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:448)\n\tat java.net.ServerSocket.accept(ServerSocket.java:419)\n\tat org.apache.jk.common.ChannelSocket.accept(ChannelSocket.java:295)\n\tat org.apache.jk.common.ChannelSocket.acceptConnections\n(ChannelSocket.java:638)\n\tat org.apache.jk.common.SocketAcceptor.runIt(ChannelSocket.java:849)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:684)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"TP-Processor3\" daemon prio=1 tid=0x080c8c18 nid=0x33b6 in Object.wait() \n[a9fcf000..a9fcf87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xacb1d108> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xacb1d108> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"TP-Processor2\" daemon prio=1 tid=0x080c8188 nid=0x33b6 in Object.wait() \n[aa050000..aa05087c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xacb1d188> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xacb1d188> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"TP-Processor1\" daemon prio=1 tid=0x080c7b60 nid=0x33b6 in Object.wait() \n[aa0d1000..aa0d187c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xacb1d208> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xacb1d208> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Monitor\" prio=1 tid=0x0820e7c0 nid=0x33b6 in Object.wait() \n[aa152000..aa15287c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5f860> (a \norg.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)\n\tat org.apache.tomcat.util.threads.ThreadPool$MonitorRunnable.run\n(ThreadPool.java:559)\n\t- locked <0xaca5f860> (a \norg.apache.tomcat.util.threads.ThreadPool$MonitorRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor25\" daemon prio=1 tid=0x0820dab8 nid=0x33b6 in Object.wait\n() [aa1d3000..aa1d387c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5f8d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5f8d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor24\" daemon prio=1 tid=0x0820cdb0 nid=0x33b6 waiting on \ncondition [aa254000..aa25487c]\n\tat java.lang.Thread.sleep(Native Method)\n\tat org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt\n(LeaderFollowerWorkerThread.java:61)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:684)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor23\" daemon prio=1 tid=0x0820c0a8 nid=0x33b6 in Object.wait\n() [aa2d5000..aa2d587c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5f9d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5f9d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor22\" daemon prio=1 tid=0x0820b3a0 nid=0x33b6 in Object.wait\n() [aa356000..aa35687c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fa58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fa58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor21\" daemon prio=1 tid=0x0820a698 nid=0x33b6 in Object.wait\n() [aa3d7000..aa3d787c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fad8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fad8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor20\" daemon prio=1 tid=0x08209990 nid=0x33b6 in Object.wait\n() [aa458000..aa45887c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fb58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fb58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor19\" daemon prio=1 tid=0x08208c88 nid=0x33b6 in Object.wait\n() [aa4d9000..aa4d987c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fbd8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fbd8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor18\" daemon prio=1 tid=0x08207f80 nid=0x33b6 in Object.wait\n() [aa55a000..aa55a87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fc58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fc58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor17\" daemon prio=1 tid=0x08207278 nid=0x33b6 in Object.wait\n() [aa5db000..aa5db87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fcd8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fcd8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor16\" daemon prio=1 tid=0x08206570 nid=0x33b6 in Object.wait\n() [aa65c000..aa65c87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fd58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fd58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor15\" daemon prio=1 tid=0x08205868 nid=0x33b6 in Object.wait\n() [aa6dd000..aa6dd87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fdd8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fdd8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor14\" daemon prio=1 tid=0x08204b60 nid=0x33b6 in Object.wait\n() [aa75e000..aa75e87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fe58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fe58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor13\" daemon prio=1 tid=0x08203e58 nid=0x33b6 in Object.wait\n() [aa7df000..aa7df87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5fed8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5fed8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor12\" daemon prio=1 tid=0x08203150 nid=0x33b6 in Object.wait\n() [aa860000..aa86087c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5ff58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5ff58> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor11\" daemon prio=1 tid=0x08202448 nid=0x33b6 in Object.wait\n() [aa8e1000..aa8e187c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca5ffd8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca5ffd8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor10\" daemon prio=1 tid=0x08201740 nid=0x33b6 in Object.wait\n() [aa962000..aa96287c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca60058> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca60058> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor9\" daemon prio=1 tid=0x080ade40 nid=0x33b6 in Object.wait\n() [aa9e3000..aa9e387c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca600d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca600d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor8\" daemon prio=1 tid=0x080ad138 nid=0x33b6 in Object.wait\n() [aaa64000..aaa6487c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca60158> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca60158> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor7\" daemon prio=1 tid=0x080ac430 nid=0x33b6 in Object.wait\n() [aaae5000..aaae587c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca601d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca601d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor6\" daemon prio=1 tid=0x080ab728 nid=0x33b6 in Object.wait\n() [aab66000..aab6687c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca60258> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca60258> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor5\" daemon prio=1 tid=0x080aaa20 nid=0x33b6 in Object.wait\n() [aabe7000..aabe787c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca602d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca602d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor4\" daemon prio=1 tid=0x08462628 nid=0x33b6 in Object.wait\n() [aac68000..aac6887c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca60358> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca60358> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor3\" daemon prio=1 tid=0x084622e0 nid=0x33b6 in Object.wait\n() [aace9000..aace987c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca603d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca603d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor2\" daemon prio=1 tid=0x08462c98 nid=0x33b6 in Object.wait\n() [aad6a000..aad6a87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca60458> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca60458> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"http-8080-Processor1\" daemon prio=1 tid=0x08462978 nid=0x33b6 in Object.wait\n() [aadeb000..aadeb87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xaca604d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Object.wait(Object.java:429)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:656)\n\t- locked <0xaca604d8> (a \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"ContainerBackgroundProcessor[StandardEngine[Catalina]]\" daemon prio=1 \ntid=0x084605f0 nid=0x33b6 waiting on condition [aae6c000..aae6c87c]\n\tat java.lang.Thread.sleep(Native Method)\n\tat \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run\n(ContainerBase.java:1539)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Signal Dispatcher\" daemon prio=1 tid=0x080afb78 nid=0x33b6 waiting on \ncondition [0..0]\n\n\"Finalizer\" daemon prio=1 tid=0x0809b100 nid=0x33b6 in Object.wait() \n[ab7cd000..ab7cd87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xabe39c88> (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n\t- locked <0xabe39c88> (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\"Reference Handler\" daemon prio=1 tid=0x0809a558 nid=0x33b6 in Object.wait() \n[ab84e000..ab84e87c]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <0xabe39cf0> (a java.lang.ref.Reference$Lock)\n\tat java.lang.Object.wait(Object.java:429)\n\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:115)\n\t- locked <0xabe39cf0> (a java.lang.ref.Reference$Lock)\n\n\"main\" prio=1 tid=0x0805bda8 nid=0x33b6 runnable [bfffc000..bfffd618]\n\tat java.net.PlainSocketImpl.socketConnect(Native Method)\n\tat java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:305)\n\t- locked <0xabae0260> (a java.net.PlainSocketImpl)\n\tat java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:171)\n\tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:158)\n\tat java.net.Socket.connect(Socket.java:452)\n\tat java.net.Socket.connect(Socket.java:402)\n\tat java.net.Socket.<init>(Socket.java:309)\n\tat java.net.Socket.<init>(Socket.java:153)\n\tat org.apache.jk.common.ChannelSocket.unLockSocket\n(ChannelSocket.java:460)\n\tat org.apache.jk.common.ChannelSocket.pause(ChannelSocket.java:272)\n\t- locked <0xacb1ee08> (a org.apache.jk.common.ChannelSocket)\n\tat org.apache.jk.server.JkMain.pause(JkMain.java:677)\n\tat org.apache.jk.server.JkCoyoteHandler.pause(JkCoyoteHandler.java:208)\n\tat org.apache.catalina.connector.Connector.pause(Connector.java:933)\n\tat org.apache.catalina.core.StandardService.stop\n(StandardService.java:491)\n\t- locked <0xabefeca8> (a [Lorg.apache.catalina.connector.Connector;)\n\tat org.apache.catalina.core.StandardServer.stop\n(StandardServer.java:717)\n\tat org.apache.catalina.startup.Catalina.stop(Catalina.java:586)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:561)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:271)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:409)\n\n\"VM Thread\" prio=1 tid=0x080992f8 nid=0x33b6 runnable \n\n\"VM Periodic Task Thread\" prio=1 tid=0x080b2378 nid=0x33b6 waiting on \ncondition \n\"Suspend Checker Thread\" prio=1 tid=0x080af190 nid=0x33b6 runnable \n\n\n"}, {"count": 5, "tags": [], "text": "As I said originally, use the mailing list for discussion and to get \nsuggestions from other users.  This is not a discussion forum, especially not \nonce two people (myself being the second) have confirmed that this issue is \nnot reproducible.  Please don't reopen this issue.", "is_private": false, "bug_id": 33339, "id": 70342, "time": "2005-02-01T23:21:07Z", "creator": "yoavs@computer.org", "creation_time": "2005-02-01T23:21:07Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 33339, "is_private": false, "text": "LEAVE THIS OPEN UNTIL IT'S BEEN DISCUSSED THEN.", "id": 70349, "time": "2005-02-02T07:47:53Z", "creator": "tomcat@alsutton.com", "creation_time": "2005-02-02T07:47:53Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 70358, "time": "2005-02-02T12:15:55Z", "bug_id": 33339, "creation_time": "2005-02-02T12:15:55Z", "text": "My post to this bug got lost somehow. The code indicates that shutdown of the JK\nconnector is failing in the unlock accept process. This code has been there\nunchanged (and identical) for years in both JK and HTTP, and hasn't caused any\nproblems. If you're not using JK, you can try disabling it.\n\nBTW, don't write statements like \"which seems to show there are a lot of threads\nwaiting on an object\". This doesn't make any sense, and makes the credibility of\nthe report go down. Stick to reproduceable facts if you are not aware of\nimplementation details. The only thread which matters here is:\n\n\"main\" prio=1 tid=0x0805bda8 nid=0x33b6 runnable [bfffc000..bfffd618]\n\tat java.net.PlainSocketImpl.socketConnect(Native Method)\n\tat java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:305)\n\t- locked <0xabae0260> (a java.net.PlainSocketImpl)\n\tat java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:171)\n\tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:158)\n\tat java.net.Socket.connect(Socket.java:452)\n\tat java.net.Socket.connect(Socket.java:402)\n\tat java.net.Socket.<init>(Socket.java:309)\n\tat java.net.Socket.<init>(Socket.java:153)\n\tat org.apache.jk.common.ChannelSocket.unLockSocket\n(ChannelSocket.java:460)\n\tat org.apache.jk.common.ChannelSocket.pause(ChannelSocket.java:272)\n\t- locked <0xacb1ee08> (a org.apache.jk.common.ChannelSocket)\n\tat org.apache.jk.server.JkMain.pause(JkMain.java:677)\n\tat org.apache.jk.server.JkCoyoteHandler.pause(JkCoyoteHandler.java:208)\n\tat org.apache.catalina.connector.Connector.pause(Connector.java:933)\n\tat org.apache.catalina.core.StandardService.stop\n(StandardService.java:491)\n\t- locked <0xabefeca8> (a [Lorg.apache.catalina.connector.Connector;)\n\tat org.apache.catalina.core.StandardServer.stop\n(StandardServer.java:717)\n\tat org.apache.catalina.startup.Catalina.stop(Catalina.java:586)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:561)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:271)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:409)\n\nI tested this on Cygwin with startup.sh and shutdown.sh, with the default Tomcat\nconfiguration. Honestly, I don't see what it changes. One thing is certain: no\ndeveloper will install the crappy distro you're using just for the sake of\ntesting this. FC 3 is at least decent ... I will eventually install Tomcat on my\nUbuntu.\n\nWhen you file a bug, if developers cannot reproduce it, you need to explain how\nto reproduce it. If it still fails, or there's no possibility of reproducing,\nthen sorry, there's no other way than try to find where the problem comes from,\npost to tomcat-user, or use another product if you think the problem is too\nserious. Given your attitude, I will not miss you ;)"}, {"count": 8, "tags": [], "bug_id": 33339, "text": "I just tested with Ubuntu Hoary and Sun JRE 1.5.0_01. Both startup.sh and\nshutdown.sh work as expected, and Tomcat runs great.", "id": 70370, "time": "2005-02-02T14:03:22Z", "creator": "remm@apache.org", "creation_time": "2005-02-02T14:03:22Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "text": "Disabling the JK connector has no effect on either FC2 or SLES8, the shutdown \nscript does not work on either.\n\nIs there not a state saying \"Unreproducable on our systems\", as the bug \ncertainly isn't resolved, and I can assure you it is valid.", "is_private": false, "bug_id": 33339, "id": 70376, "time": "2005-02-02T16:12:36Z", "creator": "tomcat@alsutton.com", "creation_time": "2005-02-02T16:12:36Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 33339, "is_private": false, "text": "Please use tomcat-user to debug this. There is a much larger pool of people\nthere who are actively ready to help with this sort of issue. From there - if\nits discovered to be a tomcat bug - the tomcat user conversation can easily\ncross-referenced and we'd be more than happy to keep the bug open.", "id": 70378, "time": "2005-02-02T16:22:51Z", "creator": "funkman@joedog.org", "creation_time": "2005-02-02T16:22:51Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "If your network setup has issues and opening a socket on 127.0.0.1 will just\ntimeout, then you can try native integration using jsvc\n(http://jakarta.apache.org/tomcat/tomcat-5.5-doc/setup.html).", "id": 70387, "time": "2005-02-02T17:02:36Z", "bug_id": 33339, "creation_time": "2005-02-02T17:02:36Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 33339, "text": "No issues have are shown by any other program when connecting to 127.0.0.1 on \neither OS on the seperate machines they are installed on", "id": 70408, "time": "2005-02-02T20:42:15Z", "creator": "tomcat@alsutton.com", "creation_time": "2005-02-02T20:42:15Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "bsouther@fwdco.com", "text": "Per discussion on the users list, here is a screen dump of a test with the same\nLinux kernel, JDK, and TC release as the original reporter's.  Everything seems\nto be in order.\n\n                                                                               \n          \n[bsouther@bsouther bin]$ uname -a\nLinux bsouther 2.6.10-1.9_FC2 #1 Thu Jan 13 17:54:57 EST 2005 i686 athlon i386\nGNU/Linux\n[bsouther@bsouther bin]$ export JAVA_HOME=/usr/local/j2sdk1.4.2_06\n[bsouther@bsouther bin]$ ./startup.sh\nUsing CATALINA_BASE:   /home/bsouther/tc_test/jakarta-tomcat-5.5.7\nUsing CATALINA_HOME:   /home/bsouther/tc_test/jakarta-tomcat-5.5.7\nUsing CATALINA_TMPDIR: /home/bsouther/tc_test/jakarta-tomcat-5.5.7/temp\nUsing JRE_HOME:       /usr/local/j2sdk1.4.2_06\n[bsouther@bsouther bin]$ ./shutdown.sh\nUsing CATALINA_BASE:   /home/bsouther/tc_test/jakarta-tomcat-5.5.7\nUsing CATALINA_HOME:   /home/bsouther/tc_test/jakarta-tomcat-5.5.7\nUsing CATALINA_TMPDIR: /home/bsouther/tc_test/jakarta-tomcat-5.5.7/temp\nUsing JRE_HOME:       /usr/local/j2sdk1.4.2_06\nCreated MBeanServer with ID: e94e92:101d55eb6c4:-8000:bsouther:1\n[bsouther@bsouther bin]$ ps -ef | grep java\nbsouther  4714  4595  0 18:19 pts/0    00:00:00 grep java\n[bsouther@bsouther bin]$\n                                                                               \n          \n", "count": 13, "id": 70432, "time": "2005-02-03T00:39:11Z", "bug_id": 33339, "creation_time": "2005-02-03T00:39:11Z", "is_private": false}, {"count": 14, "tags": [], "bug_id": 33339, "is_private": false, "text": "This problem is due to the short hostname not resolving to a local IP address.\n\nThere are two simple fixes for this;\n\n1) Add address=\"127.0.0.1\" to the definition of the JK Connector in server.xml\n\n2) If your machine is called x.y.z.com the name x must resolve to a local IP \naddress.", "id": 70472, "time": "2005-02-03T17:35:40Z", "creator": "tomcat@alsutton.com", "creation_time": "2005-02-03T17:35:40Z", "attachment_id": null}]