[{"attachment_id": null, "tags": [], "bug_id": 58304, "text": "Starting with 2.4.12 and still existing in 2.4.16, when using a Macro definition for virtual hosts, I get repeated warnings to stdout that the macro variables are undefined every time apache is started or during a syntax check: \n\nroot@dedi2:/home/tbrowde# apachectl -t\n[Sun Aug 30 16:39:35.097827 2015] [core:warn] [pid 4101:tid 140105241839360] AH00111: Config variable ${PROJECT} is not defined\n[Sun Aug 30 16:39:35.097911 2015] [core:warn] [pid 4101:tid 140105241839360] AH00111: Config variable ${TLD} is not defined\n[Sun Aug 30 16:39:35.098007 2015] [core:warn] [pid 4101:tid 140105241839360] AH00111: Config variable ${PROJECT} is not defined\n[Sun Aug 30 16:39:35.098021 2015] [core:warn] [pid 4101:tid 140105241839360] AH00111: Config variable ${TLD} is not defined\n[Sun Aug 30 16:39:35.098562 2015] [core:warn] [pid 4101:tid 140105241839360] AH00111: Config variable ${PROJECT} is not defined\n[Sun Aug 30 16:39:35.098575 2015] [core:warn] [pid 4101:tid 140105241839360] AH00111: Config variable ${TLD} is not defined\n[Sun Aug 30 16:39:35.098889 2015] [core:warn] [pid 4101:tid 140105241839360] AH00111: Config variable ${PROJECT} is not defined\n[Sun Aug 30 16:39:35.098904 2015] [core:warn] [pid 4101:tid 140105241839360] AH00111: Config variable ${TLD} is not defined\nSyntax OK\n\nI am using three macros that are defined in the httpd.conf file as follows:\n\n<Macro VHOST_NONTLS ${PROJECT} ${TLD}>\n  <VirtualHost *:80>\n    ServerName  ${PROJECT}.${TLD}\n    ServerAlias *.${PROJECT}.${TLD}\n    DocumentRoot /home/web-server/${PROJECT}.${TLD}/public\n  </VirtualHost>\n</Macro>\nUse VHOST_NONTLS niceville.pm          org\nUndefMacro VHOST_NONTLS\n\n<Macro VHOST_FREE_CERT_TLS ${PROJECT} ${TLD}>\n  <VirtualHost *:80>\n    ServerName  ${PROJECT}.${TLD}\n    ServerAlias *.${PROJECT}.${TLD}\n    # enforce ssl/tls\n    Redirect Permanent / https://${PROJECT}.${TLD}/\n  </VirtualHost>\n</Macro>\nUse VHOST_FREE_CERT_TLS  computertechnwf  org\nUndefMacro VHOST_FREE_CERT_TLS\n\n<Macro VHOST_WILDCARD_TLS ${PROJECT} ${TLD}>\n  <VirtualHost *:80>\n    ServerName  ${PROJECT}.${TLD}\n    ServerAlias *.${PROJECT}.${TLD}\n    # enforce ssl/tls\n    Redirect Permanent / https://${PROJECT}.${TLD}/\n  </VirtualHost>\n  # ...\n</Macro>\nUse VHOST_WILDCARD_TLS highlandsprings61     org\nUndefMacro VHOST_WILDCARD_TLS", "count": 0, "id": 184859, "time": "2015-08-30T17:01:19Z", "creator": "tom.browder@gmail.com", "creation_time": "2015-08-30T17:01:19Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 58304, "is_private": false, "count": 1, "id": 184957, "time": "2015-09-04T06:43:45Z", "creator": "marc.stern@approach.be", "creation_time": "2015-09-04T06:43:45Z", "text": "${VAR} is interpreted as a defined variable (http://httpd.apache.org/docs/2.4/mod/core.html#define). It's equivalent to %{VAR}.\n\nmod_macro uses the syntax $var but also ${var}, which is mandatory if you want the variable to be a part of a string, like in \"${var}abc\".\nThe syntax clashes with the Define directive, so it should be changed. Ans %{var} clashes with mod_rewrite.\n\nThis doe not only give a warning but could lead to a real mismatch between something defined as a local parameter and somebody else defining it at a global level as a defined config variable.\n\nTo make interpolation not clash with another module, we should use another character (instead of an existing one or on top of?) like &{var}."}, {"count": 2, "tags": [], "bug_id": 58304, "is_private": false, "text": "Created attachment 34013\nAdd warning about syntax clash\n\nIn case a macro argument uses the syntax ${...}, adds a warning that it clashes with the 'Define' directive", "id": 192164, "time": "2016-07-06T07:11:15Z", "creator": "marc.stern@approach.be", "creation_time": "2016-07-06T07:11:15Z", "attachment_id": 34013}]