[{"count": 0, "tags": [], "bug_id": 43183, "attachment_id": null, "text": "Both docs in trunk/docs/manual/mod/mod_proxy.xml and comments in\ntrunk/modules/proxy/mod_proxy_http.c state to use:\n\nSetEnv proxy-sendchunked 1\n\nto force chunked T-E to the backend, however, the code tests for\n\"proxy-sendchunks\" (\"s\" not \"ed\").  Code needs changed to match docs.\n\nAlso needs backports.", "id": 106996, "time": "2007-08-21T16:04:03Z", "creator": "Brian.Rectanus@breach.com", "creation_time": "2007-08-21T16:04:03Z", "is_private": false}, {"count": 1, "tags": [], "creator": "Brian.Rectanus@breach.com", "attachment_id": 20686, "id": 106997, "time": "2007-08-21T16:05:09Z", "bug_id": 43183, "creation_time": "2007-08-21T16:05:09Z", "is_private": false, "text": "Created attachment 20686\npatch typo"}, {"count": 2, "tags": [], "creator": "noodl@apache.org", "text": "The attached patch changes the code rather than the docs. Could dev@ confirm that the code rather than \nthe docs are wrong?\n\nIf not I'll fix up the docs.", "id": 107010, "time": "2007-08-22T00:14:24Z", "bug_id": 43183, "creation_time": "2007-08-22T00:14:24Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 43183, "attachment_id": null, "text": "Please fix the docs. Thus we avoid regressions with configurations in the wild\nthat found out this situation and adjusted their config to the code.", "id": 107045, "time": "2007-08-22T12:15:04Z", "creator": "rpluem@apache.org", "creation_time": "2007-08-22T12:15:04Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 43183, "attachment_id": null, "is_private": false, "id": 107049, "time": "2007-08-22T13:28:04Z", "creator": "Brian.Rectanus@breach.com", "creation_time": "2007-08-22T13:28:04Z", "text": "What about all those that have read the docs, have their configs set as such? \nThose people continue to have broken setups if you fix the docs.  Changing the\ncode will at least allow people using the proxy-sendchunked env var to start\nworking in the next release.  I think the chances of someone noticing this in\nthe code and adjusting their configs is much less than someone following the\ndocs and never verifying that it was working.  Look how long this bug has been\nthere as proof of this."}, {"count": 5, "text": "If you do decide to fix the docs, please fix the code comments as well.", "creator": "Brian.Rectanus@breach.com", "is_private": false, "id": 107050, "time": "2007-08-22T13:28:58Z", "bug_id": 43183, "creation_time": "2007-08-22T13:28:58Z", "tags": [], "attachment_id": null}, {"count": 6, "tags": [], "creator": "noodl@apache.org", "attachment_id": null, "id": 107051, "time": "2007-08-22T13:39:16Z", "bug_id": 43183, "creation_time": "2007-08-22T13:39:16Z", "is_private": false, "text": "Grepping the (trunk) sources gives:\n\n./docs/manual/env.html.en:329:   <h3><a name=\"proxy\" id=\"proxy\">force-proxy-request-1.0, proxy-nokeepalive, proxy-\nsendchunked, proxy-sendcl</a></h3>\n./docs/manual/env.html.ja.euc-jp:321:   <h3><a name=\"proxy\" id=\"proxy\">force-proxy-request-1.0, proxy-nokeepalive, \nproxy-sendchunked, proxy-sendcl</a></h3>\n./docs/manual/env.xml:369:   <section id=\"proxy\"><title>force-proxy-request-1.0, proxy-nokeepalive, proxy-sendchunked, \nproxy-sendcl</title>\n./docs/manual/env.xml.ja:356:   <section id=\"proxy\"><title>force-proxy-request-1.0, proxy-nokeepalive, proxy-\nsendchunked, proxy-sendcl</title>\n./docs/manual/mod/mod_proxy.html.en:289:    <code>proxy-sendchunked</code> minimizes resource usage by using\n./docs/manual/mod/mod_proxy.xml:260:    <code>proxy-sendchunked</code> minimizes resource usage by using\n./modules/proxy/mod_proxy_http.c:910:     *   not setenv proxy-sendchunked or has set setenv proxy-sendcl\n./modules/proxy/mod_proxy_http.c:913:     *   setenv proxy-sendcl, and not setenv proxy-sendchunked\n./modules/proxy/mod_proxy_http.c:915:     * If both proxy-sendcl and proxy-sendchunked are set, the\n./modules/proxy/mod_proxy_http.c:921:     * To reduce server resource use,   setenv proxy-sendchunked\n\nSo it's clear that there's some confusion over the variable name. In fact, there's more references to 'proxy-sendchunked' in the \ncode comments than there are in the docs.\n\nI was about to commit a sed-style fix to the trunk docs, but I'm holding off in case send-chunked (which seems to me a better \nphrase) wins out over send-chunks (which at least has comical value to the English :)"}, {"count": 7, "text": "My suggestion:\nDouble-check that all docs say \"chunked\" instead of \"chunks\".\nFor code in 2.0.x and 2.2.x \"stable\" branches, check for \"chunked\" like the docs\nsay now, as well as \"chunks\" which somebody who read the code might use.\nFor code in trunk, check only \"chunked\".\n", "creator": "trawick@apache.org", "is_private": false, "id": 107204, "time": "2007-08-23T16:18:41Z", "bug_id": 43183, "creation_time": "2007-08-23T16:18:41Z", "tags": [], "attachment_id": null}, {"count": 8, "tags": [], "creator": "noodl@apache.org", "attachment_id": 20699, "id": 107224, "time": "2007-08-24T05:50:47Z", "bug_id": 43183, "creation_time": "2007-08-24T05:50:47Z", "is_private": false, "text": "Created attachment 20699\nCheck for both -s and -ed variants in 2.2\n\nCheck for both sendchunks and sendchunked in 2.2 following from Jeff Trawick's\nsuggestion. Brian's original patch for trunk is also valid. No changes required\nfor the 2.2 docs, or any comments in the C code."}, {"count": 9, "text": "Created attachment 20700\nCheck for -s and -ed variants in 2.0\n\nAgain following from Jeff Trawick's suggestion, this time for 2.0. The 2.0 docs\ndon't mention either variant in env.xml, so I guess there's no changes to make\nthere.\n\nPlease review the logic of both patches carefully, as I'm not a C coder and not\nparticularly confident that it's right.", "creator": "noodl@apache.org", "is_private": false, "id": 107225, "time": "2007-08-24T05:52:59Z", "bug_id": 43183, "creation_time": "2007-08-24T05:52:59Z", "tags": [], "attachment_id": 20700}, {"count": 10, "tags": [], "bug_id": 43183, "attachment_id": null, "text": "Sorry, been busy ;)\n\nThe patches in comments #8 and #9 look fine.  I have not tested, though (no\ntime) as I applied my patch to our 2.2.x tree.\n\nThanks Vincent!\n\n-B", "id": 107452, "time": "2007-08-29T20:00:30Z", "creator": "Brian.Rectanus@breach.com", "creation_time": "2007-08-29T20:00:30Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 43183, "attachment_id": null, "is_private": false, "id": 107670, "time": "2007-09-03T14:07:46Z", "creator": "rpluem@apache.org", "creation_time": "2007-09-03T14:07:46Z", "text": "Backported to 2.2.x as r572421 (http://svn.apache.org/viewvc?rev=572421&view=rev)."}]