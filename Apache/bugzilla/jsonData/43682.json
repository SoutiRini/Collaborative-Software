[{"count": 0, "text": "It would be a good to have \"${context}\" placeholder variable in JULI\nlogging.properties file. We could use it in a \".prefix\" attribute to dynamically\nuse webapp's name as a file prefix.\n\nThen if we have a web application, that can be installed 1...n copies to a same\nTomcat, we could use it out-of-the-box and each having separate log files.\n\n  com.outerrim.catalina.logger.FileHandler.prefix = ${context}.\n\n\nAs it stands today, we must duplicate the webappname in a logging properties.\n\nwebapps/mywebapp/WEB-INF/classes/logging.properties\n  handlers = com.outerrim.catalina.logger.FileHandler\n  com.outerrim.catalina.logger.FileHandler.directory = ${catalina.base}/logs\n  com.outerrim.catalina.logger.FileHandler.prefix = mywebapp.\n\nwebapps/my2ndwebapp/WEB-INF/classes/logging.properties\n  handlers = com.outerrim.catalina.logger.FileHandler\n  com.outerrim.catalina.logger.FileHandler.directory = ${catalina.base}/logs  \n  com.outerrim.catalina.logger.FileHandler.prefix = my2ndwebapp.", "creator": "mailmur@yahoo.com", "is_private": false, "id": 109598, "time": "2007-10-23T07:03:49Z", "bug_id": 43682, "creation_time": "2007-10-23T07:03:49Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 43682, "text": "I need this feature as well. In my use case, I don't know what my users are going to name the application, and they could install multiple copies of the application with different names, so hard-coding the application name multiple times isn't a workaround.", "id": 172236, "time": "2014-01-09T19:44:37Z", "creator": "jsb_apache@360works.com", "creation_time": "2014-01-09T19:44:37Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "I think a possible way to go is in two steps:\n\n1. Allow ${jndi:...} properties in WEB-INF/classes/logging.properties file.\n\nE.g. LogBack has similar feature. See 2013-03 thread \"Register static JNDI env entry dynamically\" on users@ for an example.\nhttp://markmail.org/message/6tvf3qiw32die2oc\n\n\n2. Allow ${catalina.context.xxx} substitutions in context.xml files, so that one could use it in an <Environment> element to configure a value for JNDI.\n\nAn open question to me is what kinds of '.xxx' are needed, to get something usable from a context name. Something like '.baseName', '.displayName', '.name', '.path', '.version'.\n\nhttp://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/util/ContextName.html#method_summary\nhttp://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Naming\n\nAnother solution for this step can be a Listener, like shown in above mentioned thread.", "attachment_id": null, "id": 172237, "creator": "knst.kolinko@gmail.com", "time": "2014-01-09T20:11:11Z", "bug_id": 43682, "creation_time": "2014-01-09T20:11:11Z", "is_private": false}, {"count": 3, "tags": [], "text": "For what it's worth, I have writted a Listener for exactly that problem. It works flawlessly with Logback or anything else which is capable of using JNDI. See: http://mo-tomcat-ext.sourceforge.net/user-guide.html#LogbackContextNameListener\n\nI did not write anything for JULI because that system is a dead end (imho).", "attachment_id": null, "id": 172277, "creator": "1983-01-06@gmx.net", "time": "2014-01-10T21:30:49Z", "bug_id": 43682, "creation_time": "2014-01-10T21:30:49Z", "is_private": false}, {"count": 4, "tags": [], "text": "This has been fixed in 8.0.x for 8.0.15 onwards.\n\nI do not intend to propose it for backport to 7.0.x or 6.0.x.", "attachment_id": null, "id": 178321, "creator": "markt@apache.org", "time": "2014-10-07T12:36:52Z", "bug_id": 43682, "creation_time": "2014-10-07T12:36:52Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 43682, "attachment_id": null, "id": 178323, "time": "2014-10-07T15:51:27Z", "creator": "jsb_apache@360works.com", "creation_time": "2014-10-07T15:51:27Z", "is_private": false, "text": "Thank you Mark! That's excellent news."}, {"count": 6, "tags": [], "bug_id": 43682, "attachment_id": null, "is_private": false, "id": 196162, "time": "2017-01-18T20:35:02Z", "creator": "jsb_apache@360works.com", "creation_time": "2017-01-18T20:35:02Z", "text": "Mark, can you outline the expected behavior, or point to the relevant section of the docs?\n\nIn my context 'HelloWorld', I tried adding this to my logging.properties file:\n\n1catalina.org.apache.juli.FileHandler.prefix = ${context}.\n\nI expected that to create a log file named 'HelloWorld.2017-01-18.log'\n\nWhat it actually created was a file named '${context}.2017-01-18.log'\n\nClearly, I'm misunderstanding how this should work. I am running version 8.5.11."}, {"count": 7, "tags": [], "bug_id": 43682, "attachment_id": null, "is_private": false, "id": 196166, "time": "2017-01-18T22:05:48Z", "creator": "jsb_apache@360works.com", "creation_time": "2017-01-18T22:05:48Z", "text": "I found the correct substitution variables to use in the changelog:\n\nAdd support for referring to the current context, host and service name in per Context logging.properties files by using the properties ${classloader.webappName}, ${classloader.hostName} and ${classloader.serviceName}. (markt)\n\nI can't find these variable names anywhere in the logging documentation, it would be great to add these to the docs, for example here:\n\nhttps://tomcat.apache.org/tomcat-8.0-doc/logging.html"}]