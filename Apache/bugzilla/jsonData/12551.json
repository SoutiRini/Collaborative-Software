[{"count": 0, "tags": [], "creator": "noel@burton-krahn.com", "attachment_id": null, "text": "I have Apache-1.3.26 proxying requests to another back-end http server.  If \nthe client cancels a connection while sending the parameters, the proxied \nserver does not see the connection close, and it hangs.\n\n1. start a long file upload request\n2. apache opens a new connection to the back-end\n3. client cancells upload\n4. the connection to apache closes\n5. apache blocks reading the request from the back-end\n6. since apche doesn't call shutdown()  on the socket connected to the back-\nend, the back-end server doesn't know the client broke the connection and \nhangs waiting for more input.\n\nSee modules/proxy_http.c line 426.  I think there should something like this \nshould be inserted on line 433:\n\n    if( i<=0) { \n        shutdown(1);\n    }\n\nWhat do you think?\n\n\nIn the bigger scheme of things, its a bad idea for a proxy server to buffer a \nwhole request before reading the reply.  Could mod_proxy be redone to pipe \nboth sides at once?\n\n--Noel Burton-Krahn", "id": 22710, "time": "2002-09-11T22:39:30Z", "bug_id": 12551, "creation_time": "2002-09-11T22:39:30Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 12551, "attachment_id": null, "id": 25637, "time": "2002-11-04T18:21:45Z", "creator": "harolds@apple.com", "creation_time": "2002-11-04T18:21:45Z", "is_private": false, "text": "I'm also seeing something similar to this bug with the proxy running on Mac OS X using \nthe proxy to buffer some http radio streams.  In this case the proxy runs on forever (since \nradio streams don't terminate).\n\nHarold Stuart\nharolds@apple.com\n"}, {"count": 2, "text": "tested against 1.3.34-dev", "bug_id": 12551, "attachment_id": null, "id": 67849, "time": "2004-12-03T01:41:35Z", "creator": "jim@apache.org", "creation_time": "2004-12-03T01:41:35Z", "tags": [], "is_private": false}]