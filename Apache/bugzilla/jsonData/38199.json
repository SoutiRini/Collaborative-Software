[{"count": 0, "tags": [], "creator": "jhatfiel@yahoo.com", "text": "The second time a symlink line gets called, it fails.  Specificially, I was\nseeing this when a symlink was being created in a dependent target, but you can\nget the same result by calling ant with the same target name twice on the\ncommand line.\n\nRun the (to be attached) build.xml file either way, and it will fail with:\nbuild.xml:14: Must define the resource to symlink to!\n\nOf course, it works the first time through the target.\n\nant taska taskb\nant subtask subtask\n\nBoth fail as described above.", "id": 84377, "time": "2006-01-09T16:37:18Z", "bug_id": 38199, "creation_time": "2006-01-09T16:37:18Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "jhatfiel@yahoo.com", "attachment_id": 17373, "id": 84378, "time": "2006-01-09T16:39:00Z", "bug_id": 38199, "creation_time": "2006-01-09T16:39:00Z", "is_private": false, "text": "Created attachment 17373\nbuild.xml illustrating problem\n\nMust be saved as build.xml as it relies on there being a build.xml to symlink\n\nText included here for convience:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project basedir=\".\" default=\"taska\">\n  <target name=\"taska\" depends=\"subtask\">\n    <echo message=\"Task a\"/>\n  </target>\n\n  <target name=\"taskb\" depends=\"subtask\">\n    <echo message=\"Task b\"/>\n  </target>\n\n  <target name=\"subtask\">\n    <echo message=\"subtask\"/>\n    <symlink overwrite=\"true\" failonerror=\"false\" link=\"temp.xml\"\nresource=\"build.xml\"/>\n  </target>\n</project>"}, {"count": 2, "tags": [], "creator": "fugazi@zyx.net", "attachment_id": null, "text": "I think you need to set the action to recreate (see the docs)", "id": 84379, "time": "2006-01-09T16:41:43Z", "bug_id": 38199, "creation_time": "2006-01-09T16:41:43Z", "is_private": false}, {"count": 3, "tags": [], "creator": "jhatfiel@yahoo.com", "attachment_id": null, "text": "Thanks for the comment.  I tried that, (and did read the docs), and also tried\nputting a delete task in to first delete the link.  The problem is in the\nsymlink task code.  I should have mentioned the other things I had tried.\n\nAlso, I've tried using the symlink task to delete it, instead of the delete\ntask.  Same problem.", "id": 84383, "time": "2006-01-09T16:53:42Z", "bug_id": 38199, "creation_time": "2006-01-09T16:53:42Z", "is_private": false}, {"count": 4, "tags": [], "creator": "jhatfiel@yahoo.com", "attachment_id": null, "id": 84465, "time": "2006-01-11T16:52:37Z", "bug_id": 38199, "creation_time": "2006-01-11T16:52:37Z", "is_private": false, "text": "Additional bug with symlink, adding here.  If you would like for me to open a\nnew bug, I will.  \n\nCalling symlink with overwrite=\"true\" for a link that points to a resource that\ndoesn't exist results in an error:\n\n  [symlink] /bin/ln: `file_link': File exists\n\nAttaching sample build file.\n"}, {"count": 5, "tags": [], "creator": "jhatfiel@yahoo.com", "text": "Created attachment 17381\nbuild2.xml illustrating second problem\n\nCalling symlink on a pre-existing link that points to a non-existant resource\nfails.\n\nbuild2.xml listing:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project basedir=\".\" default=\"main\">\n  <target name=\"main\">\n    <echo message=\"Task a\"/>\n    <symlink overwrite=\"true\" link=\"file_link\" resource=\"not_a_file\"/>\n  </target>\n</project>", "id": 84466, "time": "2006-01-11T16:54:02Z", "bug_id": 38199, "creation_time": "2006-01-11T16:54:02Z", "is_private": false, "attachment_id": 17381}, {"count": 6, "tags": [], "creator": "jhatfiel@yahoo.com", "attachment_id": null, "id": 84467, "time": "2006-01-11T16:55:19Z", "bug_id": 38199, "creation_time": "2006-01-11T16:55:19Z", "is_private": false, "text": "Meant to say, run ant twice with that build file to reproduce the error."}, {"count": 7, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "id": 84482, "time": "2006-01-11T20:00:32Z", "bug_id": 38199, "creation_time": "2006-01-11T20:00:32Z", "is_private": false, "text": "I don't currently have a *nix box available... but I was the last person to\n(drastically) alter the symlink task. :(  IIRC this is by design due to ln's\nnormal behavior, i.e. try to do the equivalent at the command line of what you\nare asking and see what happens.  This is the reason for the overwrite\nattribute, as I seem to remember someone pointing out to you on the list."}, {"text": "Thanks Matt, but if you look at the build2.xml file, you'll see that overwrite\nis set to true.", "tags": [], "bug_id": 38199, "attachment_id": null, "count": 8, "id": 84483, "time": "2006-01-11T20:06:28Z", "creator": "jhatfiel@yahoo.com", "creation_time": "2006-01-11T20:06:28Z", "is_private": false}, {"text": "Created attachment 20626\nanother build.xml illustrating problem!\n\nHere are the results of this build.xml file =>\ntest1:\n  [symlink] ln -s bar foo\n\ntest2:\n  [symlink] ln -s bar foo\n  [symlink] /bin/ln: `foo': File exists\n\nBUILD FAILED\nbuild.xml:6: ln failed with return code 1\n\n------\nIt seems that neither \"overwrite\" and \"failonerror\" is working as expected. (I\nwould expect \"overwrite=true\" to prevent this problem, and \"failonerror=false\"\nto stop the build from failing when the problem does occur.)\n\nWhen I do \"ln -s -f bar foo\" from the command line, it works fine.", "tags": [], "bug_id": 38199, "attachment_id": 20626, "count": 9, "id": 106545, "time": "2007-08-09T12:55:43Z", "creator": "jkeller@berkeley.edu", "creation_time": "2007-08-09T12:55:43Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 38199, "attachment_id": null, "id": 108369, "time": "2007-09-19T05:29:51Z", "creator": "stevel@apache.org", "creation_time": "2007-09-19T05:29:51Z", "is_private": false, "text": "fixed in SVN"}]