[{"count": 0, "tags": [], "bug_id": 46163, "attachment_id": null, "text": "If a plain BasicConfigurator.configure() is called in an application after the HierarchyMBean is instantiated, then an exception is thrown trying to create an ObjectName for the appender based on the Appender's name property, which is initialised to null, and is not allowed.\n\nInstead, the LoggerDynamicMBean class should be defensive when creating a Appender MBean's by detecting a null/empty string name and at least trying to use .toString() to construct a logical display name.", "id": 122263, "time": "2008-11-06T16:17:06Z", "creator": "psmith@apache.org", "creation_time": "2008-11-06T16:17:06Z", "is_private": false}, {"count": 1, "tags": [], "creator": "psmith@apache.org", "text": "I have a simple patch for this that I'm just testing, it basically resorts to defensively using the Appender.toString() in an attempt to get at least a value for the JMX namespace.  If that fails, well, then you're screwed still.", "id": 122325, "time": "2008-11-09T15:16:06Z", "bug_id": 46163, "creation_time": "2008-11-09T15:16:06Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 46163, "attachment_id": null, "text": "You'll find here http://d.cr.free.fr/wswebconsulterfichiers.php?projet=demojava_log4j&mode=res&fichier=org.apache.log4j.jmx.LoggerDynamicMBean.java.res&fichierxsl=\na collection of mistakes and errors. Most are easy to fix.\n\nThe entire log4j project is available here : http://d.cr.free.fr/wswebconsulterfichiers.php?projet=demojava_log4j\n\nIf of interest for you, thanks for your (positive..) feedback.\nComing soon : CWE identification of bugs. ", "id": 122333, "time": "2008-11-10T03:19:36Z", "creator": "qualitychecker@free.fr", "creation_time": "2008-11-10T03:19:36Z", "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 46163, "is_private": false, "id": 124004, "time": "2009-01-13T12:30:28Z", "creator": "carnold@apache.org", "creation_time": "2009-01-13T12:30:28Z", "tags": [], "text": "Paul, do you want to submit your patch?"}, {"count": 4, "tags": [], "creator": "psmith@apache.org", "text": "Created attachment 23112\nPatch that fixes the null appender name\n\nNote: This is a direct diff of my workspace, which also includes a change to test/build.xml to remove the ErrorHandler test that just doesn't pass on my computer for some unknown reason (before and after my change).\n\nWe've been using this change in production for 2 months now with no problems.", "id": 124009, "time": "2009-01-13T13:11:33Z", "bug_id": 46163, "creation_time": "2009-01-13T13:11:33Z", "is_private": false, "attachment_id": 23112}, {"count": 5, "tags": [], "creator": "carnold@apache.org", "text": "Committed changes in rev 734480.\n\nI did a few things different than Paul's patch.  First, Paul's patch used a package visible static method to handle the logic to get a name from the appender.  I moved the function into a common ancestor and made it protected.  Also, Paul's patch removed use of the layout from the AppenderDynamicMBean name.  That may be a desirable change, but it wasn't part of this bug report.", "id": 124039, "time": "2009-01-14T10:56:17Z", "bug_id": 46163, "creation_time": "2009-01-14T10:56:17Z", "is_private": false, "attachment_id": null}]