[{"count": 0, "tags": [], "bug_id": 54393, "attachment_id": null, "id": 164522, "time": "2013-01-09T12:22:31Z", "creator": "jan.stolze@cofely.nl", "creation_time": "2013-01-09T12:22:31Z", "is_private": false, "text": "FixCRLF is not creating unique file names, which gives complication when building several projects at the same time, like we do using Hudson. \n\nProposed fix in FixCRLF file should be:\n\nThe \nprivate void processFile(String file) throws BuildException\nmethod should use the following call on FILE_UTILS.createTempFile:\n\nFile tmpFile = FILE_UTILS.createTempFile(\"fixcrlf\", \"\", null, true, true);\n\nso last argument changed into true here, which causes Java to create a unique temporary file."}, {"count": 1, "tags": [], "bug_id": 54393, "attachment_id": null, "id": 164555, "time": "2013-01-10T08:49:43Z", "creator": "jan.stolze@cofely.nl", "creation_time": "2013-01-10T08:49:43Z", "is_private": false, "text": "Another change has to be made as well in the same method namely the following:\n\nFILE_UTILS.copyFile(srcFile,\n  \t\t    tmpFile,\n\t\t    null,\n\t\t    fcv,\n\t\t    true,\n\t\t    false,\n\t\t    encoding,\n\t\t    outputEncoding == null ? encoding : outputEncoding,\n\t\t    getProject());\n\nhere the first boolean argument has changed from false to true in order to override the temporary file with the contents of the src file."}, {"count": 2, "tags": [], "bug_id": 54393, "attachment_id": null, "text": "By the way actual patches (diff -u format) are preferred to verbal descriptions of what you would change.", "id": 164572, "time": "2013-01-10T16:49:50Z", "creator": "jglick@apache.org", "creation_time": "2013-01-10T16:49:50Z", "is_private": false}, {"count": 3, "tags": [], "creator": "jan.stolze@cofely.nl", "attachment_id": null, "is_private": false, "id": 164579, "time": "2013-01-11T06:33:01Z", "bug_id": 54393, "creation_time": "2013-01-11T06:33:01Z", "text": "Index: FixCRLF.java\n===================================================================\n--- FixCRLF.java\t(revision 1431908)\n+++ FixCRLF.java\t(working copy)\n@@ -352,9 +352,9 @@\n             fcv = new Vector<FilterChain>(1);\n             fcv.add(fc);\n         }\n-        File tmpFile = FILE_UTILS.createTempFile(\"fixcrlf\", \"\", null, true, false);\n+        File tmpFile = FILE_UTILS.createTempFile(\"fixcrlf\", \"\", null, true, true);\n         try {\n-            FILE_UTILS.copyFile(srcFile, tmpFile, null, fcv, false, false,\n+            FILE_UTILS.copyFile(srcFile, tmpFile, null, fcv, true, false,\n                 encoding, outputEncoding == null ? encoding : outputEncoding,\n                 getProject());"}, {"count": 4, "tags": [], "bug_id": 54393, "attachment_id": 29845, "is_private": false, "id": 164580, "time": "2013-01-11T06:36:34Z", "creator": "jan.stolze@cofely.nl", "creation_time": "2013-01-11T06:36:34Z", "text": "Created attachment 29845\nPatched version"}, {"count": 5, "text": "patch applied with svn revision 1525078, thanks", "bug_id": 54393, "is_private": false, "id": 170192, "time": "2013-09-20T18:23:23Z", "creator": "bodewig@apache.org", "creation_time": "2013-09-20T18:23:23Z", "tags": [], "attachment_id": null}]