[{"count": 0, "tags": [], "creator": "jwinshell@bearriver.com", "attachment_id": null, "text": "<project name=\"test\" default=\"test\" basedir=\".\">\n<target name=\"test\">\n        <exec executable=\"ls\">\n                <arg value=\"/usr\"/>\n                <env key=\"FOO\" value=\"BAR\"/>\n        </exec>\n</target>\n</project>\n\nThis simple use of <exec> when an inner <env key=\"name\" value=\"somevalue\"/> throws an IOException on JVM 1.3/Hotspot on Mac OS X.   But then continues to execute the command - then the script terminates abnormally.  The above example works on other 1.3 VMs ( Linux blackdown 1.3/Hotspot, Linux IBM 1.3 JVM )\n\n% java -version\njava version \"1.3.0\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.3)\nJava HotSpot(TM) Client VM (build 1.3.0, mixed mode)\n\nIf the <env> is removed, then no exception is thrown:\n\njava.io.IOException\n        at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:520)\n        at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:329)\n        at org.apache.tools.ant.taskdefs.Execute.getProcEnvironment(Execute.java:159)\n        at org.apache.tools.ant.taskdefs.Execute.patchEnvironment(Execute.java:367)\n        at org.apache.tools.ant.taskdefs.Execute.getEnvironment(Execute.java:281)\n        at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:329)\n        at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:228)\n        at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:162)\n        at org.apache.tools.ant.Target.execute(Target.java:153)\n        at org.apache.tools.ant.Project.runTarget(Project.java:898)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:536)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:510)\n        at org.apache.tools.ant.Main.runBuild(Main.java:421)\n        at org.apache.tools.ant.Main.main(Main.java:149)\n     [exec] Setting TOMCAT_HOME to /Library/WebServer/tomcat/bin/..\n     [exec] Using classpath: /Library/WebServer/tomcat/bin/../classes:/Library/WebServer/tomcat/bin/../lib/ant.jar:/Library/WebServer/tomcat/bin/../lib/jaxp.jar:/Library/WebServer/tomcat/bin/../lib/jcert.jar:/Library/WebServer/tomcat/bin/../lib/jnet.jar:/Library/WebServer/tomcat/bin/../lib/jsse.jar:/Library/WebServer/tomcat/bin/../lib/parser.jar:/Library/WebServer/tomcat/bin/../lib/servlet.jar:/Library/WebServer/tomcat/bin/../lib/test:/Users/jasonw/lbl_stickers/java:/Users/jasonw/lbl_stickers/lib/JimiProClasses.zip:/Users/jasonw/lbl_stickers/lib/pja.jar:/Users/jasonw/brcl_java/java:/Users/jasonw/br_xml/java:/Users/jasonw/web/java:/Users/jasonw/web/lib/jsdk_2_0.jar\n     [exec] /usr/bin/../bin/java -Xbootclasspath/a:/Users/jasonw/lbl_stickers/lib/pja.jar -Dawt.toolkit=com.eteks.awt.PJAToolkit -Dawt.graphicsenv=com.eteks.java2d.PJAGraphicsEnvironment -Djava2d.font.usePlatformFont=false -Djava.awt.fonts=/System/Library/Frameworks/JavaVM.framework/Versions/1.3/Home/jre/lib/font -Dtomcat.home=/Library/WebServer/tomcat/bin/.. org.apache.tomcat.startup.Tomcat -f /Users/jasonw/lbl_stickers/tomcat_config/server.xml\n     [exec] 2001-07-10 09:19:17 - ContextManager: Adding context Ctx(  )\n     [exec] 2001-07-10 09:19:17 - ContextManager: Adding context Ctx( /admin )\n     [exec] Starting tomcat. Check logs/tomcat.log for error messages \n     [exec] 2001-07-10 09:19:19 - PoolTcpConnector: Starting HttpConnectionHandler on 8600\n     [exec] Servlet core startup: StickersApp\n     [exec] init param directory=/home/jasonw/lbl_stickers\n^C\n85 localhost:lbl_stickers% \n85 localhost:lbl_stickers% \n85 localhost:lbl_stickers% \n85 localhost:lbl_stickers% \n85 localhost:lbl_stickers% \n85 localhost:lbl_stickers% \n85 localhost:lbl_stickers% ls\naccess.log        cvsdepend         err.log           libext/           properties/       reloadsync\nant/              dist/             java/             multiserver.conf  public_files/     tomcat_config/\nbuild.xml         doc/              lib/              multiserver.log   public_xml/       xml/\n86 localhost:lbl_stickers% ssh br24.bearriver.com\njasonw@br24.bearriver.com's password: \n1 br24:jasonw% vi build.xml \n\n<project name=\"test\" default=\"test\" basedir=\".\">\n<target name=\"test\">\n        <exec executable=\"ls\">\n                <arg value=\"/usr\"/>\n                <env key=\"FOO\" value=\"BAR\"/>\n        </exec>\n</target>\n</project>\n\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n~\n2 br24:jasonw% \n2 br24:jasonw% \n2 br24:jasonw% \n2 br24:jasonw% \n2 br24:jasonw% logout\nConnection to br24.bearriver.com closed.\n87 localhost:lbl_stickers% ant test\nBuildfile: build.xml\n\ntest:\njava.io.IOException\n        at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:520)\n        at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:329)\n        at org.apache.tools.ant.taskdefs.Execute.getProcEnvironment(Execute.java:159)\n        at org.apache.tools.ant.taskdefs.Execute.patchEnvironment(Execute.java:367)\n        at org.apache.tools.ant.taskdefs.Execute.getEnvironment(Execute.java:281)\n        at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:329)\n        at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:228)\n        at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:162)\n        at org.apache.tools.ant.Target.execute(Target.java:153)\n        at org.apache.tools.ant.Project.runTarget(Project.java:898)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:536)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:510)\n        at org.apache.tools.ant.Main.runBuild(Main.java:421)\n        at org.apache.tools.ant.Main.main(Main.java:149)\n     [exec] X11R6\n     [exec] bin\n     [exec] include\n     [exec] java\n     [exec] lib\n     [exec] libexec\n     [exec] local\n     [exec] logs\n     [exec] man\n     [exec] sbin\n     [exec] servlets\n     [exec] share\n     [exec] standalone\n     [echo] done exec", "id": 3551, "time": "2001-07-10T09:39:50Z", "bug_id": 2542, "creation_time": "2001-07-10T09:39:50Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 2542, "attachment_id": null, "is_private": false, "id": 4132, "time": "2001-07-30T07:17:28Z", "creator": "conor@apache.org", "creation_time": "2001-07-30T07:17:28Z", "text": "It is hard for me to reproduce this without a Mac OS X machine. What I have \ndone is commit some changes to Exec so that more information should be \navailable when this failure occurs.\n\nWhen the nightly build for 2001-08-01 is available, could you please download \nit from\nhttp://jakarta.apache.org/builds/jakarta-ant/nightly/\nand let me know the outcome of running this test again."}, {"count": 2, "tags": [], "bug_id": 2542, "is_private": false, "id": 4378, "attachment_id": null, "creator": "conor@apache.org", "creation_time": "2001-08-08T08:53:22Z", "time": "2001-08-08T08:53:22Z", "text": "Jason reported that the current alpha build works fine. I'm not sure where the \nfix would have happened but I think we can close this for now. We are about to \nbuild 1.4 Beta so please test with that and reopen if there is an issue. Thanks"}]