[{"count": 0, "tags": [], "bug_id": 7906, "text": "Overview Description: \n When the path tag is used in an ant build file and ant is started from the \nTogether 6.0 Antrunner plugin, Ant throws a NoSuchMethodException in \norg.apache.tools.ant.Project -> public Object createDataType(String typeName).\nThis problem does not appear with Together versions prior to 6.0.\n\nSteps to Reproduce: \n1) Create a simple build.xml which contains a path tag below the project tag.\n2) Activate Antrunner in Together 6.0.\n3) Run a target of the build file from within Together with -v flag of ant.\n\nAdditional Information:\nThe Together 6.0 antrunner uses its own Project class which is derived from \norg.apache.tools.ant.Project. The createDataType method in \norg.apache.tools.ant.Project searches for a constructor of the datatype \n(reproducable with Path, may also appear with other datatypes), \ne.g. Path(Project prj) by using reflection. Because the Together plugin uses a \nderived Project class, the line \nctor = c.getConstructor(new Class[] {getClass()}); \nsearches for a constructor Path(TgProject.class) which is not available.\n\nWorkaround:\nreplace\nctor = c.getConstructor(new Class[] {getClass()}); \nwith\nctor = c.getConstructor(new Class[] {Project.class});\n\nFull createDataType() method which resolved the problem:\n    public Object createDataType(String typeName) throws BuildException {\n        Class c = (Class) dataClassDefinitions.get(typeName);\n\n        if (c == null)\n            return null;\n\n        try {\n            java.lang.reflect.Constructor ctor = null;\n            boolean noArg = false;\n            // DataType can have a \"no arg\" constructor or take a single \n            // Project argument.\n            try {\n                ctor = c.getConstructor(new Class[0]);\n                noArg = true;\n            } catch (NoSuchMethodException nse) {\n            \t// BEGIN MEI 09.04.2002 resolves Problem with ant runner in \nTogether 6.0 (they use a derived Project class !)\n//                ctor = c.getConstructor(new Class[] {getClass()});\n                ctor = c.getConstructor(new Class[] {Project.class});\n            \t// END MEI 09.04.2002 resolves Problem with ant runner in \nTogether 6.0 (they use a derived Project class !)\n                \n                noArg = false;\n            }\n\n            Object o = null;\n            if (noArg) {\n                 o = ctor.newInstance(new Object[0]);\n            } else {\n                 o = ctor.newInstance(new Object[] {this});\n            }\n            if (o instanceof ProjectComponent) {\n                ((ProjectComponent)o).setProject(this);\n            }\n            String msg = \"   +DataType: \" + typeName;\n            log (msg, MSG_DEBUG);\n            return o;\n        } catch (java.lang.reflect.InvocationTargetException ite) {\n            Throwable t = ite.getTargetException();\n            String msg = \"Could not create datatype of type: \"\n                 + typeName + \" due to \" + t;\n            throw new BuildException(msg, t);\n        } catch (Throwable t) {\n            String msg = \"Could not create datatype of type: \"\n                 + typeName + \" due to \" + t;\n            throw new BuildException(msg, t);\n        }\n        finally\n        {\n\t\tlog (\"<<< createDataType\", MSG_DEBUG);\n        }\n    }", "id": 13150, "time": "2002-04-10T06:28:37Z", "creator": "mei@isogmbh.de", "creation_time": "2002-04-10T06:28:37Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 7906, "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of 2652 ***", "id": 13154, "time": "2002-04-10T07:39:19Z", "creator": "bodewig@apache.org", "creation_time": "2002-04-10T07:39:19Z", "is_private": false}]