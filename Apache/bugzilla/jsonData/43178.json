[{"attachment_id": null, "tags": [], "bug_id": 43178, "text": "Line 136 of shm.c has the following comparison:\n    if (hMap && err == ERROR_ALREADY_EXISTS) {\n        CloseHandle(hMap);\n        return APR_EEXIST;\n    }\nShould be:\n    if (hMap && APR_STATUS_IS_EEXIST(err)) {\n        CloseHandle(hMap);\n        return APR_EEXIST;\n    }\nSince apr_get_os_error() returns e + APR_OS_START_SYSERR the return of \nERROR_ALREADY_EXISTS changes to, for windows, 720183 which does not equal 183L \nas defined in winerror.h.  The defined macro for IS_EEXIST compares the error \nagainst the correct values.  As the code is now, attempting to create shmem \nthat already exists will return success.", "count": 0, "id": 106966, "time": "2007-08-21T08:00:02Z", "creator": "sobekjunk@gmail.com", "creation_time": "2007-08-21T08:00:02Z", "is_private": false}, {"count": 1, "tags": [], "text": "Fixed in r570289 and backported to 1.2/0.9 for the next release.\n\nGood catch; thanks for the report!", "is_private": false, "bug_id": 43178, "id": 107308, "time": "2007-08-27T18:25:37Z", "creator": "wrowe@apache.org", "creation_time": "2007-08-27T18:25:37Z", "attachment_id": null}]