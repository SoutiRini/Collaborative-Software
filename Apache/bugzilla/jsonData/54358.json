[{"count": 0, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "id": 164278, "time": "2012-12-29T13:00:01Z", "bug_id": 54358, "creation_time": "2012-12-29T13:00:01Z", "is_private": false, "text": "LDAPReferrals is \"On\" by default. So every new LDAP connection calls \n\nuldap_connection_open() ->\nuldap_connection_init() ->\napr_ldap_rebind_add() ->\napr_ldap_rebind_set_callback()\n\nin modules/ldap/util_ldap.c.\n\nBut in apr-util the function apr_ldap_rebind_set_callback() is only implemented if APR_HAS_TIVOLI_LDAPSDK or APR_HAS_OPENLDAP_LDAPSDK or APR_HAS_NOVELL_LDAPSDK, otherwise it just returns APR_ENOTIMPL and Apache errs out with status 500. The following SDKs thus potentially are affected:\n\n- APR_HAS_NETSCAPE_LDAPSDK\n- APR_HAS_SOLARIS_LDAPSDK\n- APR_HAS_MOZILLA_LDAPSDK\n- APR_HAS_MICROSOFT_LDAPSDK\n- APR_HAS_ZOS_LDAPSDK\n- APR_HAS_OTHER_LDAPSDK\n\nPossible fixes:\n\n- set LDAPReferrals to \"Off\" by default on the platforms for which rebind is not implemented (and document it)\n- ignore errors from the rebind calls\n- implement rebind in more platforms\n\nConcerning the last option for Solaris:\n\n- man pages say the feature does exist\n- man pages are unfortunatley not consistent with system headers about the function signature:\n\nFrom man pages:\n\nvoid ldap_set_rebind_proc(LDAP *ld, int (*rebindproc));\n\nand\n\nint rebindproc(LDAP *ld, char **whop, char **credp,\n               int *methodp, int freeit);\n\nFrom header file /usr/include/ldap.h:\n\nLDAP_API(void) LDAP_CALL ldap_set_rebind_proc(LDAP *ld,\n        LDAP_REBINDPROC_CALLBACK *rebindproc, void *arg);\n\nand\n\ntypedef int (LDAP_CALL LDAP_CALLBACK LDAP_REBINDPROC_CALLBACK)(LDAP *ld,\n        char **dnp, char **passwdp, int *authmethodp, int freeit, void *arg);\n\nso header files indicate an additional \"arg\" argument. A short compilation test indicates the header files are right, man pages are wrong."}, {"count": 1, "text": "+1 to flipping the default under those SDKs in 2.4 and turning it off by default altogether in trunk.", "bug_id": 54358, "attachment_id": null, "id": 164279, "time": "2012-12-29T13:40:52Z", "creator": "covener@gmail.com", "creation_time": "2012-12-29T13:40:52Z", "tags": [], "is_private": false}]