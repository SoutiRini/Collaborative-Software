[{"count": 0, "attachment_id": null, "bug_id": 44129, "text": "apr_os_dir_put() does not allocate an entry buffer, this is a bug plain and simple.\n\nIf it were to allocate that buffer, it would subsequently be unable to call apr_stat() on directory entries if \nthe user requests more than name/type/inode because the dirname field is missing.\n\napr_os_dir_put() does not register a cleanup handler, which would be desirable behaviour in an \napplication which aims to pass ownership of a dirhandle to APR.\n\nI have an application which would like to \"break out\" the apr_stat() that apr_dir_read() does for specialty \nreasons. To do this I pass in empty wanted flags, but to be able to call apr_stat() in a similar way myself \nI needed to add apr_dir_name_get() and apr_dir_pool_get().\n\nI have attached a patch against trunk which:\n\na/ adds apr_os_dir_put_ex() which accepts two additional arguments:\n    1/ dirname\n    2/ flags - support for APR_DIR_NOCLEANUP (defined with the same value as APR_FILE_NOCLEANUP)\nb/ re-factor apr_dir_open() and apr_os_dir_put() functions to call apr_os_dir_put_ex() internally.\nc/ adds two new straight-forward functitons:\n    1/ apr_dir_name_get()\n    2/ apr_dir_pool_get()", "id": 112080, "time": "2007-12-21T22:50:51Z", "creator": "iwade@optusnet.com.au", "creation_time": "2007-12-21T22:50:51Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": 21305, "creator": "iwade@optusnet.com.au", "text": "Created attachment 21305\nPatch for unix platforms", "id": 112081, "time": "2007-12-21T22:51:48Z", "bug_id": 44129, "creation_time": "2007-12-21T22:51:48Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": 21307, "bug_id": 44129, "text": "Created attachment 21307\ndoxygen comment stating the limmitations of the 12x API\n\ndoxygen comment stating the limmitations of the 12x API", "id": 112086, "time": "2007-12-22T04:04:46Z", "creator": "Lucian.Grijincu@gmail.com", "creation_time": "2007-12-22T04:04:46Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "Lucian.Grijincu@gmail.com", "is_private": false, "text": "Created attachment 21308\nallocate space for the ->entry on unix plaftforms for 12x HEAD\n\nallocate space for the ->entry on unix plaftforms", "id": 112087, "time": "2007-12-22T04:05:42Z", "bug_id": 44129, "creation_time": "2007-12-22T04:05:42Z", "attachment_id": 21308}]