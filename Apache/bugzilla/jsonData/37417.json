[{"attachment_id": null, "tags": [], "bug_id": 37417, "text": "org.apach.fop.Version line 33 (ver 328820) assumes that \nVersion.class.getPackage() will return the package info of the class however \nit may return null if it was loaded from an incomplete class loader that \ndoesn't implement definePackage correctly by loading the manifest info from \nthe jar file. Whilst the proper solution is to fix these class loaders it \nwould be prudent to gracefully handle this situation.\n\nThe attached patch attempts to do so.\n\n==START PATCH==\n\nIndex: src/java/org/apache/fop/Version.java\n===================================================================\n--- src/java/org/apache/fop/Version.java        (revision 331635)\n+++ src/java/org/apache/fop/Version.java        (working copy)\n@@ -30,7 +30,11 @@\n      * @return the version string\n      */\n     public static String getVersion() {\n-        String version = Version.class.getPackage().getImplementationVersion\n();\n+        String version = null;\n+        Package jarinfo = Version.class.getPackage();\n+        if(jarinfo != null) {\n+            version = jarinfo.getImplementationVersion();\n+        }\n         if (version == null) {\n             //Fallback if FOP is used in a development environment\n             String headURL \n\n\n==END PATCH==", "count": 0, "id": 82265, "time": "2005-11-09T01:09:22Z", "creator": "tgates@xplantechnology.com", "creation_time": "2005-11-09T01:09:22Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jeremias@apache.org", "attachment_id": null, "id": 82270, "time": "2005-11-09T09:12:43Z", "bug_id": 37417, "creation_time": "2005-11-09T09:12:43Z", "is_private": false, "text": "Patch applied: http://svn.apache.org/viewcvs?rev=331991&view=rev\n\nThanks for catching that. One request, though: Please attach patches as a file\nto Bugzilla issues. Bugzilla tends to add additional line breaks to the patch if\nincluded in comments. It was no problem in this case (just one additional line\nbreak), but with bigger patches this will become a problem."}, {"attachment_id": null, "tags": [], "bug_id": 37417, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "count": 2, "id": 155578, "time": "2012-04-01T06:28:37Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:28:37Z", "is_private": false}]