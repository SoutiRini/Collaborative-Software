[{"count": 0, "attachment_id": null, "bug_id": 6048, "text": "I've just encountered a problem with usage of JDBC pool defined in both server.xml and WEB-INF/web.xml while trying to access the application via WARP. When I test it without WARP it works great but after deployment in production env. it cannot get DataSource object from context. I've tried version 1.0 and 1.0.1 of WARP with the same effect.\n\nNow I have changed the code back to use direct JDBC connection so there is no URL to show the error message but it wasn't really helpfull. My application is deployed on one of the virtual hosts and thus the context suffix in URL changes (actually it disappears - the app is available from / of the virtual host).", "id": 9939, "time": "2002-01-26T15:55:38Z", "creator": "noster@venture.org.pl", "creation_time": "2002-01-26T15:55:38Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 6048, "attachment_id": null, "is_private": false, "id": 9940, "time": "2002-01-26T17:06:13Z", "creator": "phlat@mindspring.com", "creation_time": "2002-01-26T17:06:13Z", "text": "This may be related to a quirk that I still don't understand about mod_webapp.  \nmod_webapp appends a trailing slash to all web application names, unless they \nhave one in existence.  This might be the cause of your problem."}, {"count": 2, "attachment_id": null, "bug_id": 6048, "text": "What JDBC pool are you using? Can you send some samples of \nWEB.xml and SERVER.xml?", "id": 15028, "time": "2002-04-29T13:20:48Z", "creator": "pier@betaversion.org", "creation_time": "2002-04-29T13:20:48Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "noster@venture.org.pl", "is_private": false, "text": "Created attachment 1785\ncontext from my server.xml where the problem occurs", "id": 15490, "time": "2002-05-05T09:49:30Z", "bug_id": 6048, "creation_time": "2002-05-05T09:49:30Z", "attachment_id": 1785}, {"count": 4, "tags": [], "creator": "noster@venture.org.pl", "text": "Created attachment 1786\nweb.xml for the application causing problems", "id": 15491, "time": "2002-05-05T09:50:12Z", "bug_id": 6048, "creation_time": "2002-05-05T09:50:12Z", "is_private": false, "attachment_id": 1786}, {"count": 5, "tags": [], "creator": "noster@venture.org.pl", "text": "Forgive me for having you waited that long but I've just returned from my\nholiday :) I've uploaded part of server.xml and web.xml I hope they'll help.\n", "id": 15492, "time": "2002-05-05T09:51:45Z", "bug_id": 6048, "creation_time": "2002-05-05T09:51:45Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 6048, "text": "I have ran into the same problem myself and I'm now trying to find a fix to it.\nI could not find any solutions. David, you said that it might be from mod_webapp\nadding slashes ('/') after the context name. This is probably not the case.\n\nSnippet from my server.xml. \n\n        <DefaultContext>\n          <Resource name=\"jdbc/pool\" auth=\"SERVLET\"\n                    type=\"javax.sql.DataSource\"/>\n          <ResourceParams name=\"jdbc/pool\">\n            <parameter>\n              <name>user</name>\n              <value>XXX</value>\n            </parameter>\n            <parameter>\n              <name>password</name>\n              <value>XXX</value>\n            </parameter>\n            <parameter>\n              <name>driverClassName</name>\n              <value>oracle.jdbc.driver.OracleDriver</value>\n            </parameter>\n            <parameter>\n              <name>driverName</name>\n              <value>jdbc:oracle:thin:@HOST:PORT:SID</value>\n            </parameter>\n          </ResourceParams>\n          <Parameter name=\"Test\" value=\"TestValue\" override=\"true\"/>\n        </DefaultContext> \n\n  (Yes, I've also tried auth=\"Container\")\n\n1. No Oracle pool is created, with 4.0.3 the \n\n\tContext initCtx = new InitialContext();\n   Context envCtx  = (Context)initCtx.lookup(\"java:comp/env\");\n   ds=(DataSource)envCtx.lookup(\"jdbc/pool\");\n\n   ds would be null\n\n   in 4.0.4, this is what I get:\n\njavax.naming.NamingException: Exception creating DataSource: org.hsql.jdbcDriver\n\n   ... something hard-coded in tyrex... Weird...\n\n   And I got the same Exception if I would comment out the whole resource.\n\n2. No parameters were passed.\n\n   getServletContext().getInitParameter(\"Test\") returns false.\n\nIt almost seems as if everything even slightly context-related would be thrown\ninto the trashbin. \n\nSuggestions?", "id": 19112, "time": "2002-07-08T12:40:08Z", "creator": "v2@iki.fi", "creation_time": "2002-07-08T12:40:08Z", "tags": [], "is_private": false}, {"count": 7, "attachment_id": null, "bug_id": 6048, "text": "As webapp uses a different service, it uses separate settings for most things. \nWebapp is now deprecated.", "id": 35235, "time": "2003-04-15T16:22:54Z", "creator": "remm@apache.org", "creation_time": "2003-04-15T16:22:54Z", "tags": [], "is_private": false}]