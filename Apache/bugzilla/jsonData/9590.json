[{"count": 0, "tags": [], "creator": "gman1@enter.net", "is_private": false, "id": 17113, "creation_time": "2002-06-03T21:31:39Z", "time": "2002-06-03T21:31:39Z", "bug_id": 9590, "text": "3 simple cookies/1 nested loop \n \n<res:addCookie name=\"TEST40\" value=\"40\"/> \n    <c:forEach var=\"dupe1\" items=\"${param}\" varStatus=\"status1\"> \n      <c:forEach var=\"dupe2\" items=\"${param}\" varStatus=\"status2\"> \n        <c:if test=\"${(dupe1.value==dupe2.value)&&(status1.count!=status2.count)}\"> \n          <page:setAttribute name=\"errors\"><br>ERROR!: Duplicate Number!<hr></page:setAttribute> \n        </c:if> \n      </c:forEach> \n<res:addCookie name=\"TEST45\" value=\"45\"/> \n    </c:forEach> \n<res:addCookie name=\"TEST50\" value=\"50\"/> \n \n(1)in this examples cookie 'TEST40' gets sent to browser \n(2)next the nested for loops works coorectly \n(3)next cookie 'TEST45' gets sent to browser \n**** problem: cookie TEST50 does not get sent to browser **** \n(5)all code before and after this snipet works fine \nsynopsis: after doing nested loops tomcat stops sending cookies \n \nps.(I have ruled out the custom taglibs RESPONSE, and PAGE) \nThanks in advance, \ngman1@enter.net", "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "Please attach a test webapp.\nI doubt you can reproduce this using servlets (if you manage to, please attach\nthe test case).\n\nDowngrading priority because I doubt the cookie functionality in Tomcat is\nactually responsible for that bug (assuming it is proven to be valid).", "id": 17204, "time": "2002-06-05T17:10:52Z", "bug_id": 9590, "creation_time": "2002-06-05T17:10:52Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9590, "attachment_id": null, "id": 26481, "time": "2002-11-18T15:47:24Z", "creator": "Brian.Ewins@btinternet.com", "creation_time": "2002-11-18T15:47:24Z", "is_private": false, "text": "Try testing if the response is committed before setting that last cookie,\neg <% if (response.isCommitted()) { System.err.println(\"train has left the\nstation\"); } %>\n\nIf you'd managed to push 256 bytes of whitespace (for example) into the JSP\nduring that loop then you'll cause the response to commit, so you can no longer\nset a 'Set-Cookie' header (or any other header). Also, because the second\naddCookie is always adding the same thing, you might not be seeing the real\npoint that cookies fail, its more likely during the loop than afterwards - try\nsetting it to a counter instead. \n\nFinally, if the loop has > 19 iterations, the /browser/ will cause you a\nproblem. See\nhttp://jakarta.apache.org/tomcat/tomcat-4.0-doc/servletapi/javax/servlet/http/Cookie.html,\n - browsers only have to support 20 cookies per server. You'd have created 20\nSet-Cookie headers and the browser would ignore the rest."}, {"count": 3, "tags": [], "creator": "funkman@joedog.org", "text": "Closing based on last comment. reopen if a test case can be made (and attached\nto this report) against 4.1.24\n", "id": 38228, "time": "2003-06-03T01:24:44Z", "bug_id": 9590, "creation_time": "2003-06-03T01:24:44Z", "is_private": false, "attachment_id": null}]