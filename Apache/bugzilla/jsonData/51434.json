[{"count": 0, "tags": [], "creator": "rros@robertros.nl", "is_private": false, "text": "For example the following FilterProvider will cause an internal server error. (\"Bad regexp\" in the error_log)\n\nFilterDeclare  COMPRESS\nFilterProvider COMPRESS DEFLATE resp=Content-Type /text\\/(html|css)/\nFilterChain    COMPRESS\nFilterProtocol COMPRESS change=yes;byteranges=no\n\nAfter looking at the actual code (My c/c++ knowledge is only limited) it seems the second (forward) slash is always the delimiter of the regex, even when it's escaped. Then it tries to parse the regex 'text\\', this is indeed a bad regexp. \nhttp://svn.apache.org/viewvc/httpd/httpd/branches/2.2.x/modules/filters/mod_filter.c?view=markup#l577\n\nSo it seems it's impossible to use a forward slash in a FilterProvider regex.\n\nI found out about this issue while looking at the usage of mod_filter in html5boilerplate. For more information see this issue: https://github.com/paulirish/html5-boilerplate/issues/549#issuecomment-1330675\n\nI tested this using Apache/2.2.17 on Ubuntu 11.04", "id": 147481, "time": "2011-06-25T11:22:13Z", "bug_id": 51434, "creation_time": "2011-06-25T11:22:13Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 51434, "attachment_id": null, "id": 147506, "time": "2011-06-25T18:29:22Z", "creator": "i.galic@brainsware.org", "creation_time": "2011-06-25T18:29:22Z", "is_private": false, "text": "*** Bug 51435 has been marked as a duplicate of this bug. ***"}, {"count": 2, "tags": [], "creator": "adeel.e@gmail.com", "is_private": false, "text": "Just to reply about: https://issues.apache.org/bugzilla/show_bug.cgi?id=51435#c1\n\nAccording the FilterProvider documentation (http://httpd.apache.org/docs/2.2/mod/mod_filter.html#filterprovider), / is \"delimited by a second /\" so, it should be:\n\nFilterProvider COMPRESS DEFLATE resp=Content-Type /text//(html|css)/\n\nBut whatever the case, as Robert pointed out, the function just looks at the first / and ignores the rest.", "id": 147553, "time": "2011-06-28T10:35:41Z", "bug_id": 51434, "creation_time": "2011-06-28T10:35:41Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "(In reply to comment #2)\n> Just to reply about:\n> https://issues.apache.org/bugzilla/show_bug.cgi?id=51435#c1\n> \n> According the FilterProvider documentation\n> (http://httpd.apache.org/docs/2.2/mod/mod_filter.html#filterprovider), / is\n> \"delimited by a second /\" so, it should be:\n> \n> FilterProvider COMPRESS DEFLATE resp=Content-Type /text//(html|css)/\n> \n> But whatever the case, as Robert pointed out, the function just looks at the\n> first / and ignores the rest.\n\nNo.\n\nmod_filter in 2.2 used its own argument parsing.  It's one of many modules to do something similar.\n\nThe trunk version is different: it uses the (new) common expression parser.  More power, less work for developers to do (because it's now shared).  But it means the 2.2 docs you just misinterpreted don't apply (trunk docs differ), and it seems to have led to have led to the introduction of this bug.\n\nI'll take a look ... should be able to fix it :)", "attachment_id": null, "id": 147555, "creator": "nick@webthing.com", "time": "2011-06-28T10:53:49Z", "bug_id": 51434, "creation_time": "2011-06-28T10:53:49Z", "is_private": false}, {"count": 4, "tags": [], "text": "Created attachment 27229\nbugfix patch\n\nSorry, my last comment misread what you were talking about.  I've just had a look, and the fix seems to be as suggested in bug 51435 .\n\nProposing the fix via STATUS.", "attachment_id": 27229, "id": 147624, "creator": "nick@webthing.com", "time": "2011-06-30T00:03:14Z", "bug_id": 51434, "creation_time": "2011-06-30T00:03:14Z", "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 51434, "is_private": false, "id": 150367, "time": "2011-10-08T20:03:55Z", "creator": "sf@sfritsch.de", "creation_time": "2011-10-08T20:03:55Z", "tags": [], "text": "fixed in 2.2.20 / r1165099"}, {"count": 6, "tags": [], "bug_id": 51434, "attachment_id": null, "id": 150368, "time": "2011-10-08T20:06:25Z", "creator": "sf@sfritsch.de", "creation_time": "2011-10-08T20:06:25Z", "is_private": false, "text": "(In reply to comment #5)\n> fixed in 2.2.20 / r1165099\n\nthat should be 2.2.21"}]