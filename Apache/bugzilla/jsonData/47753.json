[{"count": 0, "tags": [], "bug_id": 47753, "attachment_id": null, "text": "It seems that in modules\\generators\\mod_cgi.c, function run_cgi_child(), \"apr_procattr_child_err_set()\" and \"apr_procattr_child_out_set()\" are missing to explicitly pass output and error channels before \"ap_os_create_privileged_process()\".\n\nThis potential bug is similar to revision 602467. The log of this revision is as follows:\n\n\" * core log.c: Work around possible solutions rejected by apr for the old implementation of apr_proc_create(), and explicitly pass the output and error channels to all log processes created. This goes all the way back to piped logs failing to run on win32. Not in or needed at trunk/, as apr 1.3.0 has the proper fix.\"\n\nIt seems that the above log also holds for \"ap_os_create_privileged_process()\". An evidence is the following code in revision 806782 of branch 2.2.x where the two apr_procattr_child_*_set functions *ARE* called before the function:\n\n*************************************************************\nFile: modules\\generators\\mod_cgid.c\nFunction: cgid_server\n\n758              ((rc = apr_procattr_child_err_set(procattr, r->server->error_log, NULL)) != APR_SUCCESS) ||\n...\n760            ((rc = apr_procattr_child_out_set(procattr, inout, NULL)) != APR_SUCCESS) ||\n...\n790                rc = ap_os_create_privileged_process(r, procnew, argv0, argv,\n\n*************************************************************\n\nThe patch I attached is not a bug-fix, but some comments indicating where the two missing functions should be added to better illustrate my point.\n\nAny comment is greatly appreciated.\n\nBoya", "id": 130008, "time": "2009-08-27T12:32:14Z", "creator": "boya.sun@case.edu", "creation_time": "2009-08-27T12:32:14Z", "is_private": false}]