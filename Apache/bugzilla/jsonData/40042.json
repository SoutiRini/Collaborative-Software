[{"count": 0, "tags": [], "text": "Hi,\n\n  I'm doing some test for an HA solution with Tomcat and run into this problem.\n\n\n <Membership\n                        className=\"org.apache.catalina.cluster.mcast.McastService\"\n                        mcastAddr=\"228.0.0.6\" mcastBindAddress=\"onyx.webos2.net\"\n                        mcastPort=\"45564\"\n                        mcastFrequency=\"500\"\n                        mcastDropTime=\"3000\"/>\n\nWhen mcastBindAddress is specified and the network card is disabled/Enabled I get \n\nATTENTION: Unable to send mcast message.\njava.net.BindException: Cannot assign requested address: Datagram send failed\n\tat java.net.PlainDatagramSocketImpl.send(Native Method)\n\tat java.net.DatagramSocket.send(Unknown Source)\n\tat\norg.apache.catalina.cluster.mcast.McastServiceImpl.send(McastServiceImpl.java:238)\n\tat\norg.apache.catalina.cluster.mcast.McastServiceImpl$SenderThread.run(McastServiceImpl.java:274)\n2006-07-13 20:29:00\norg.apache.catalina.cluster.mcast.McastServiceImpl$SenderThread run\nATTENTION: Unable to send mcast message.\njava.net.NoRouteToHostException: No route to host: Datagram send failed\n\tat java.net.PlainDatagramSocketImpl.send(Native Method)\n\tat java.net.DatagramSocket.send(Unknown Source)\n\tat\norg.apache.catalina.cluster.mcast.McastServiceImpl.send(McastServiceImpl.java:238)\n\tat\norg.apache.catalina.cluster.mcast.McastServiceImpl$SenderThread.run(McastServiceImpl.java:274)\n\n\nThe problem is that the NoRouteToHost loop forever.\n\nIf I omit the mcastBindAddress param I will get a NoRouteToHostException and\nTomcat will continue correctly when the interface is up again.\n\nBest Regards\nDavid", "is_private": false, "id": 91293, "creator": "dgagnon@siunik.com", "time": "2006-07-14T00:36:13Z", "bug_id": 40042, "creation_time": "2006-07-14T00:36:13Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "When you enable the route again, does it correct itself, or do you require a\ntomcat restart.\n\nI have a feeling that code needs to better self heal itself, but wanted to get\nyour input first.\n\nFilip", "is_private": false, "id": 91296, "creator": "fhanik@apache.org", "time": "2006-07-14T02:11:27Z", "bug_id": 40042, "creation_time": "2006-07-14T02:11:27Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 40042, "text": "I've added a fix to Tomcat 6.0 and 6.x (in trunk).\nBasically, it does attempt a recovery after such a failure.\nThere are still a few issues to work through, one of them being, what should be\ndone to the existing membership, since we are not receiving mcast packets due to\na local error, then is it really appropriate to expire members?", "id": 106878, "time": "2007-08-17T15:21:37Z", "creator": "fhanik@apache.org", "creation_time": "2007-08-17T15:21:37Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 40042, "text": "I have backport the Filips fix from tomcat 6.0.x.\nIt works for me at my MAC's, but I am not sure that it also work with other OS's.\n\nFeedback is very welcome\nPeter\n\n- At my mac (jdk 1.5.0_07) I see some SocketTimeoutException and IOException after send is going \nwrong. After four failures the kernel create a new multicast route! Strange... After interface is back\nthe old route is recreated. ", "id": 106914, "time": "2007-08-19T14:10:08Z", "creator": "pr@objektpark.de", "creation_time": "2007-08-19T14:10:08Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 40042, "text": "No feedback so assume Peter's backport did indeed work.", "id": 128772, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2009-07-12T14:15:35Z", "time": "2009-07-12T14:15:35Z", "is_private": false}]