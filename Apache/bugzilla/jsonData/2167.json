[{"count": 0, "tags": [], "bug_id": 2167, "attachment_id": null, "text": "I am running from a console in Windows 2000 Professional, and using JDK 1.3.1 \nfrom Sun.\n\nHere is my \nclasspath: .;D:\\Java\\Jars\\log4j.jar;D:\\Java\\Jars\\xerces.jar;D:\\Java\\Jars\\utils.j\nar;D:\\Java\\Jars\\xalan.jar\n\nI am using an XML file for configuration. If I have xalan ANYWHERE in my \nclasspath, (before or after xerces), I get a null pointer exception and can't \nparse the XML file in DOMConfigurator. Here is the output:\n\nWarning: validation was turned on but an org.xml.sax.ErrorHandler was not\nset, which is probably not what is desired.  Parser will use a default\nErrorHandler to print the first 10 errors.  Please call\nthe 'setErrorHandler' method to fix this.\nError: URI=jar:file:/D:/Java/Jars/log4j.jar!/org/apache/log4j/xml/log4j.dtd Line\n=4: Undeclared prefix: \"log4j:configuration\".\nlog4j:ERROR Could not parse input stream \n[java.io.FileInputStream@506411].java.lang.NullPointerException\n        at org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:523)\n        at org.apache.crimson.parser.Parser2.parse(Parser2.java:304)\n        at org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:433)\n\n        at org.apache.crimson.jaxp.DocumentBuilderImpl.parse\n(DocumentBuilderImpl.java:179)\n        at org.apache.log4j.xml.DOMConfigurator.doConfigure\n(DOMConfigurator.java:681)\n        at org.apache.log4j.xml.DOMConfigurator.doConfigure\n(DOMConfigurator.java:597)\n        at org.apache.log4j.xml.DOMConfigurator.configure\n(DOMConfigurator.java:698)\n        at com.peranet.utils.AppLogger.<init>(AppLogger.java:80)\n        at com.peranet.utils.AppLogger.main(AppLogger.java:264)\nlog4j:ERROR No appenders could be found for category \n(com.peranet.utils.AppLogger).\nlog4j:ERROR Please initialize the log4j system properly.\n\nSimply taking xalan out of the classpath, it works fine! However, I need xalan \nelsewhere in the application.\nHere is the output after removing the xalan entry from the classpath:\n\nWarning: validation was turned on but an org.xml.sax.ErrorHandler was not\nset, which is probably not what is desired.  Parser will use a default\nErrorHandler to print the first 10 errors.  Please call\nthe 'setErrorHandler' method to fix this.\nError: URI=jar:file:/D:/Java/Jars/log4j.jar!/org/apache/log4j/xml/log4j.dtd \nLine=37: The content of element type \"log4j:configuration\" must \nmatch \"(renderer*,appender*,category*,root?)\".\n\nThere is still the error with the jar file (which I would like to know what is \ncausing this, as well) but the logger works fine now (logs where I had in the \nconfig file).\n\nHere is my config file:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\">\n\n<log4j:configuration>\n\n\t<appender name=\"ASYNC\" class=\"org.apache.log4j.AsyncAppender\">\n\t\t<appender-ref ref=\"R\" />\n\t</appender>\n\t\n\t<appender name=\"R\" class=\"org.apache.log4j.RollingFileAppender\">\n\t\t<param name=\"File\" value=\"\\\\mmp\\\\log\\\\Develop.log\" />\n\t\t<param name=\"MaxFileSize\" value=\"1024KB\" />\n\t\t<param name=\"MaxBackupIndex\" value=\"1\" />\n\t\t<layout class=\"org.apache.log4j.PatternLayout\">\n\t\t\t<param name=\"ConversionPattern\" value=\"%d %p [%c] - %m%\nn\" />\n\t\t</layout>\n\t</appender>\n\n\t<root>\n\t\t<priority value=\"debug\" />\n\t\t<appender-ref ref=\"R\" />\n\t</root>\n\n\t<category name=\"com.peranet.test\" additivity=\"false\">\n\t\t<priority value=\"debug\" />\n\t\t<appender-ref ref=\"R\" />\n\t</category>\n\t<category name=\"com.peranet.utils\" additivity=\"false\">\n\t\t<priority value=\"debug\" />\n\t\t<appender-ref ref=\"R\" />\n\t</category>\n\t<category name=\"com.peranet.mmp\" additivity=\"false\">\n\t\t<priority value=\"debug\" />\n\t\t<appender-ref ref=\"R\" />\n\t</category>\n\t\n</log4j:configuration>", "id": 2972, "time": "2001-06-13T16:45:39Z", "creator": "johnh@peranet.com", "creation_time": "2001-06-13T16:45:39Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 2167, "text": "\nYou need to write \n\n<log4j:configuration xmlns:log4j=\"http://jakarta.apache.org/log4j\">\n\ninstead of\n\n<log4j:configuration>\n\n", "count": 1, "id": 3033, "time": "2001-06-18T01:32:20Z", "creator": "bugzilla@apache.org", "creation_time": "2001-06-18T01:32:20Z", "is_private": false}]