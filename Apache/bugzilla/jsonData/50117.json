[{"count": 0, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "text": "When I use the new LogLevel syntax in VH context, I see a startup crash:\n\n--\nServerRoot \"/home/covener/SRC/httpd-trunk/built\"\nListen 80\nLoadModule rewrite_module modules/mod_rewrite.so\nLogLevel info\n<virtualhost *:80>\n  ServerName localhost\n  LogLevel debug rewrite:trace1\n</virtualhost>\n--\n\n$ built/bin/apachectl -f conf/test.conf -t\nbuilt/bin/apachectl: line 79:   368 Segmentation fault      (core dumped) $HTTPD \"$@\"\n$ gdb built/bin/httpd core\n...\n\n#0  0x08093918 in ap_find_loaded_module_symbol (s=0x9ae5e10, modname=0x9ae98e0 \"rewrite\") at mod_so.c:342\n342\t    modie = (ap_module_symbol_t *)sconf->loaded_modules->elts;\n(gdb) where\n\n#0  0x080990b9 in ap_find_loaded_module_symbol (s=0x855be10, modname=0x855f8e0 \"rewrite\") at mod_so.c:342\n342\t    modie = (ap_module_symbol_t *)sconf->loaded_modules->elts;\n(gdb) where\n#0  0x080990b9 in ap_find_loaded_module_symbol (s=0x855be10, modname=0x855f8e0 \"rewrite\") at mod_so.c:342\n#1  0x0807d279 in find_module (s=0x855be10, name=0x855f8e0 \"rewrite\") at core.c:2062\n#2  0x0807e224 in set_loglevel (cmd=0xbfeb3e1c, config_=0x855bff0, arg_=0x855c260 \"rewrite:trace1\") at core.c:2628\n#3  0x0808944c in invoke_cmd (cmd=0x80addc8, parms=0xbfeb3e1c, mconfig=0x855bff0, args=0x855bc3c \"\") at config.c:933\n#4  0x08089dd3 in ap_walk_config_sub (current=0x855bc00, parms=0xbfeb3e1c, section_vector=0x855bef0) at config.c:1234\n#5  0x08089e65 in ap_walk_config (current=0x855bc00, parms=0xbfeb3e1c, section_vector=0x855bef0) at config.c:1267\n#6  0x0807d680 in virtualhost_section (cmd=0xbfeb3e1c, dummy=0x854e180, arg=0x855be08 \"*:80\") at core.c:2209\n#7  0x08088d34 in invoke_cmd (cmd=0x80ad9f0, parms=0xbfeb3e1c, mconfig=0x854e180, args=0x855bba0 \"*:80>\") at config.c:828\n#8  0x08089dd3 in ap_walk_config_sub (current=0x855bb78, parms=0xbfeb3e1c, section_vector=0x854df68) at config.c:1234\n#9  0x08089e65 in ap_walk_config (current=0x855bb78, parms=0xbfeb3e1c, section_vector=0x854df68) at config.c:1267\n#10 0x0808b473 in ap_process_config_tree (s=0x854d4a0, conftree=0x855b488, p=0x85150a8, ptemp=0x8553470) at config.c:1940\n#11 0x0806ba83 in main (argc=4, argv=0xbfeb3fe4) at main.c:627", "id": 140839, "time": "2010-10-19T16:57:58Z", "bug_id": 50117, "creation_time": "2010-10-19T16:57:58Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 50117, "text": "(sconf is null)", "id": 140840, "time": "2010-10-19T16:59:03Z", "creator": "covener@gmail.com", "creation_time": "2010-10-19T16:59:03Z", "is_private": false, "attachment_id": null}, {"count": 2, "text": "(In reply to comment #1)\n> (sconf is null)\n\nUhh. The code was taken from <IfModule> but <IfModule> is EXEC_ON_READ and therefore is always executed from the main server context. But for vhosts,\nmod_so's server config is not yet initialized.\n\nFixed in r1025702", "bug_id": 50117, "attachment_id": null, "id": 140866, "time": "2010-10-20T15:57:02Z", "creator": "sf@sfritsch.de", "creation_time": "2010-10-20T15:57:02Z", "tags": [], "is_private": false}]