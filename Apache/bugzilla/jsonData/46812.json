[{"count": 0, "tags": [], "text": "This used to work:\n\n  <target name=\"minimal-tar\" depends=\"ready-to-package\">\n    <tar destFile=\"${minimal.tar}\" longfile=\"gnu\">\n      <tarfileset prefix=\"${prefix}\" refid=\"root.fileset\" />\n    </tar>\n  </target>\n\nNot on Ant SVN_HEAD\n\nminimal-tar:\nClass class org.apache.tools.ant.types.FileSet is not a subclass of class org.apache.tools.ant.taskdefs.Tar$TarFileSet\n\nBUILD FAILED\n/home/slo/Projects/SmartFrog/Forge/core/antbuild/build.xml:266: root.fileset doesn't denote a Tar$TarFileSet\n\tat org.apache.tools.ant.types.DataType.getCheckedRef(DataType.java:254)\n\tat org.apache.tools.ant.types.DataType.getCheckedRef(DataType.java:214)\n\tat org.apache.tools.ant.types.DataType.getCheckedRef(DataType.java:202)\n\tat org.apache.tools.ant.types.ArchiveFileSet.isFilesystemOnly(ArchiveFileSet.java:333)\n\tat org.apache.tools.ant.taskdefs.Tar.isFileFileSet(Tar.java:680)\n\tat org.apache.tools.ant.taskdefs.Tar.check(Tar.java:554)\n\tat org.apache.tools.ant.taskdefs.Tar.execute(Tar.java:269)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n\tat sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n\tat org.apache.tools.ant.Task.perform(Task.java:348)\n\tat org.apache.tools.ant.Target.execute(Target.java:386)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:407)\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1361)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1330)\n\tat org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1213)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:775)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:217)\n\tat org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)\n\tat org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)\n\nBefore, it let me tar up an existing fileset. Now I can't. This is a regression.", "attachment_id": null, "id": 125373, "creator": "stevel@apache.org", "time": "2009-03-06T02:15:49Z", "bug_id": 46812, "creation_time": "2009-03-06T02:15:49Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 46812, "text": "<zipfileset> still works as expected -it takes a reference to the base fileset that <tarfileset> rejects, with prefix\n\n    <zip compress=\"9\" destFile=\"${full.zip}\">\n      <zipfileset prefix=\"${prefix}\" refid=\"root.fileset\" />\n      <zipfileset prefix=\"${prefix}release\" refid=\"release.fileset\"  />\n    </zip>", "id": 125433, "time": "2009-03-09T05:27:30Z", "creator": "stevel@apache.org", "creation_time": "2009-03-09T05:27:30Z", "is_private": false, "attachment_id": null}, {"count": 2, "text": "Fixed this in SVN_HEAD -applied the fix to ArchiveFileSet as Zipfileset would exhibit the same problem -it is only due to differences in how <zip> and <tar> check files for being out of date that the problem shows up in one place and not the other.\n\nadded a new test, which now works.", "bug_id": 46812, "attachment_id": null, "id": 125436, "time": "2009-03-09T07:46:11Z", "creator": "stevel@apache.org", "creation_time": "2009-03-09T07:46:11Z", "tags": [], "is_private": false}]