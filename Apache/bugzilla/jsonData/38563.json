[{"count": 0, "tags": [], "bug_id": 38563, "attachment_id": null, "is_private": false, "id": 85576, "time": "2006-02-08T06:55:04Z", "creator": "sagar.ipte@gmail.com", "creation_time": "2006-02-08T06:55:04Z", "text": "Hello:\n\nWhile adding a file with size > 2GB in tar file using tar task of ant, I am getting exception similar to\n\n\u201crequest to write '1024' bytes exceeds size in header of '-2147483648' bytes\u201d\n\nThis is thrown at line 238 in TarOutputStream.\n\nI looked into the code, and it seems the issue is related to downcasting of long value to int.\n\nTarEntry reads the file size as long which is correct.\nBut when TarEntry is added into TarOutputStream (line 138), TarOutputStream downcasts file size value \nfrom long to int\n\nline 167 in TarOutputStream is as follows\nthis.currSize = (int) entry.getSize();\n\nThis is incorrect, this way it will never allow to add file size > than 2147483647 bytes i.e 2GB.\nTarOutputStream should maintain entry size as long only.\n\n\nThanks\n- Sagar"}, {"count": 1, "tags": [], "bug_id": 38563, "attachment_id": 17621, "text": "Created attachment 17621\nTest case to test this bug", "id": 85577, "time": "2006-02-08T07:01:00Z", "creator": "sagar.ipte@gmail.com", "creation_time": "2006-02-08T07:01:00Z", "is_private": false}, {"count": 2, "tags": [], "text": "Created attachment 17622\nPatch to fix the bug", "attachment_id": 17622, "id": 85578, "creator": "sagar.ipte@gmail.com", "time": "2006-02-08T07:04:42Z", "bug_id": 38563, "creation_time": "2006-02-08T07:04:42Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 38563, "attachment_id": null, "is_private": false, "id": 85583, "time": "2006-02-08T10:30:20Z", "creator": "peterreilly@apache.org", "creation_time": "2006-02-08T10:30:20Z", "text": "Thanks for the report, however\nthis has already been fixed in cvs.\n\nWHATSNEW:\n...\n* <tar> / <untar> now accepts files upto 8GB, <tar> gives an error if larger \n  files are to be included. This is the POSIX size limit.\n...\n\n"}, {"count": 4, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "text": "Opps, I meant svn!\n\n", "id": 85584, "time": "2006-02-08T10:30:53Z", "bug_id": 38563, "creation_time": "2006-02-08T10:30:53Z", "is_private": false}]