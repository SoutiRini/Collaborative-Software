[{"count": 0, "tags": [], "bug_id": 31771, "attachment_id": null, "id": 65304, "time": "2004-10-19T11:38:35Z", "creator": "tran@danet.de", "creation_time": "2004-10-19T11:38:35Z", "is_private": false, "text": "Hello,\nI can not shut down tomcat with the script ${TOMCAT_HOME}/bin/shutdown.sh after\nusing our web application. Obviously the thread (RMI TCP Accept-0) can not be\nterminated. After execution of the shutdown.sh script, I can see with the ps\ncommand that the java process is still running. I have tested with tomcat\n5.0.28, but the problem also exists with this version. \n\nI got the following message with the debugger:\n\nStopping service Tomcat-Standalone\nOct 19, 2004 1:30:39 PM org.apache.tomcat.util.net.PoolTcpEndpoint closeServerSocket\nSEVERE: Caught exception trying to unlock accept.\njava.net.ConnectException: Connection refused\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\n        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:305)\n        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:171)\n        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:158)\n        at java.net.Socket.connect(Socket.java:452)\n        at java.net.Socket.connect(Socket.java:402)\n        at java.net.Socket.<init>(Socket.java:309)\n        at java.net.Socket.<init>(Socket.java:124)\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.closeServerSocket(PoolTcpEndpoint.java:326)\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.acceptSocket(PoolTcpEndpoint.java:397)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:529)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:534)\nOct 19, 2004 1:30:39 PM org.apache.tomcat.util.net.PoolTcpEndpoint closeServerSocket\nSEVERE: Caught exception trying to close socket.\njava.lang.NullPointerException\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.closeServerSocket(PoolTcpEndpoint.java:338)\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.acceptSocket(PoolTcpEndpoint.java:397)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:529)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:534)\nOct 19, 2004 1:30:39 PM org.apache.tomcat.util.net.PoolTcpEndpoint acceptSocket\nWARNING: Reinitializing ServerSocket\n\nBest regards\nMinh Thanh Tran"}, {"count": 1, "tags": [], "bug_id": 31771, "attachment_id": null, "id": 69128, "time": "2005-01-01T19:28:57Z", "creator": "markt@apache.org", "creation_time": "2005-01-01T19:28:57Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 8097 ***"}]