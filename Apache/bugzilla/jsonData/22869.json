[{"text": "With the \"allowLinking\" set to true for example:\n\n<Context path=\"\" docBase=\"../blah\">\n<Resources className=\"org.apache.naming.resources.FileDirContext\"  \nallowLinking=\"true\"/>\n</Context>\n\nThen if the web.xml is touch the subsequest restart of the webapp will\nthrow.\nReason: During the stop the FileDirContext.release() method is called.\nresetting allowLinking to false (via StandardContext.resourcesStop() method)\nOnce restarted any links are not followed and the system startup will fail.\n\nSolution: ? clearer semantics on what \"stopping\" means. Should \nrelease() be split into two methods release() and reset(). Currently\nI've just commented-out the resetting of the allowLinking and caseSesitive\nflags.", "tags": [], "bug_id": 22869, "is_private": false, "count": 0, "id": 43576, "time": "2003-09-02T01:36:07Z", "creator": "ian@perth.wni.com", "creation_time": "2003-09-02T01:36:07Z", "attachment_id": null}, {"text": "I would like to add that I am experiencing this bug as well.  In my case I do\nnot have liveDeploy enabled and that in my case the app manager does not\nindicate any problem when a user stops and starts our web application.  In our\ncase our users receive internal server errors when attempting to access jsp\nfiles that rely on symbolic links to include external files.  The exact message is:\n\nException report\nmessage Internal Server Error\ndescription The server encountered an internal error (Internal Server Error)\nthat prevented it from fulfilling this request.\nexception \norg.apache.jasper.JasperException: /login.jsp(18,133) File\n\"/_vti_templates/topmenu.txt\" not found\n\t\t at\norg.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:94)\n\t\t at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:428)\n\t\t at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:170)\n\t\t at org.apache.jasper.compiler.Parser.processIncludeDirective(Parser.java:305)\n\t\t at org.apache.jasper.compiler.Parser.parseIncludeDirective(Parser.java:340)\n\t\t at org.apache.jasper.compiler.Parser.parseDirective(Parser.java:378)\n\t\t at org.apache.jasper.compiler.Parser.parseElements(Parser.java:795)\n\t\t at org.apache.jasper.compiler.Parser.parse(Parser.java:122)\n\t\t at org.apache.jasper.compiler.ParserController.parse(ParserController.java:199)\n\t\t at org.apache.jasper.compiler.ParserController.parse(ParserController.java:153)\n\t\t at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:227)\n\t\t at org.apache.jasper.compiler.Compiler.compile(Compiler.java:369)\n\t\t at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:473)\n\t\t at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:190)\n\t\t at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295)\n\t\t at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n\t\t at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\t\t at\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)\n\t\t at\norg.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:432)\n\t\t at\norg.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:356)\n\t\t at com.sears.intra.web.login.WebLoginFilter.deny(WebLoginFilter.java:129)\n\t\t at com.sears.intra.web.login.WebLoginFilter.doFilter(WebLoginFilter.java:86)\n\t\t at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:213)\n\t\t at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n\t\t at\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)\n\t\t at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\t\t at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\t\t at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\t\t at\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\t\t at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\t\t at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\t\t at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\t\t at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2408)\n\t\t at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\t\t at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\t\t at\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)\n\t\t at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\t\t at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n\t\t at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\t\t at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\t\t at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\t\t at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\t\t at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\t\t at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\t\t at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\t\t at org.apache.ajp.tomcat4.Ajp13Processor.process(Ajp13Processor.java:466)\n\t\t at org.apache.ajp.tomcat4.Ajp13Processor.run(Ajp13Processor.java:585)\n\t\t at java.lang.Thread.run(Thread.java:536)\n\nThis bug is a show-stopper for us.  Is there anything I can do short of\nrecompiling Tomcat with the changes mentioned to get around this issue?", "tags": [], "bug_id": 22869, "is_private": false, "count": 1, "id": 44695, "time": "2003-09-25T15:58:58Z", "creator": "rmroczk@sears.com", "creation_time": "2003-09-25T15:58:58Z", "attachment_id": null}, {"count": 2, "text": "I built a standalone FileDirContext.class based on the original java file.  In\nthe release method I commented out the resetting of the allowLinking and\ncaseSensitive attributes.  I copied the created class files\nFileDirContext$FileResource.class, FileDirContext.class, and\nFileDirContext$FileResourceAttributes.class to the\nserver/classes/org/apache/naming/resources directory and bounced the container.\n The problem still exists.  Am I missing something?", "bug_id": 22869, "attachment_id": null, "id": 44712, "time": "2003-09-25T18:59:57Z", "creator": "rmroczk@sears.com", "creation_time": "2003-09-25T18:59:57Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 22869, "is_private": false, "count": 3, "id": 44936, "time": "2003-10-01T10:29:00Z", "creator": "ian@perth.wni.com", "creation_time": "2003-10-01T10:29:00Z", "text": "I put the updated FileDirContext.class etc under *common*/classes/... etc.\nsince it needs to be used by webapps also."}, {"count": 4, "text": "\n\n*** This bug has been marked as a duplicate of 21818 ***", "bug_id": 22869, "attachment_id": null, "id": 71640, "time": "2005-02-28T22:02:03Z", "creator": "markt@apache.org", "creation_time": "2005-02-28T22:02:03Z", "tags": [], "is_private": false}]