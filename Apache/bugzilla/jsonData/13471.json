[{"count": 0, "tags": [], "creator": "itojun@itojun.org", "attachment_id": null, "id": 24237, "time": "2002-10-09T20:56:05Z", "bug_id": 13471, "creation_time": "2002-10-09T20:56:05Z", "is_private": false, "text": "on EMFILE (too many open files), httpd would fail to handle requests\nand log error like below:\n\n[Sat Oct 05 10:26:55 2002] [error] [client 218.227.136.140] (24)Too many open files: cannot access type map file: /usr/pkg/share/httpd/error/HTTP_FORBIDDEN.html.var, referer: http://www.itojun.org/digi-cam/dcfaq/dcfaq.html\n\nworkaround is to raise resource limit (\"unlimit openfiles\" in csh), however,\ni believe httpd should cope with this kind of situation better, either by\nauto-detecting connection limitation parameters from resource limit at startup\ntime, or decreasing it dynamically."}, {"count": 1, "tags": [], "bug_id": 13471, "text": "Since 2.0.40, apachectl uses ulimit to raise the file descriptor limit as high\nas possible...  Is that not working for you?  Is apachectl trying to use the\nwrong ulimit command required by /bin/sh on your system?\n\nI don't think Apache can reliably predict the number of descriptors needed for\na given MPM configuration and I suspect that adding logic to scale down the\nnumber of threads per child once we hit EMFILE may not be worth the added\ncomplexity.\n\n\n", "id": 24240, "time": "2002-10-09T21:40:42Z", "creator": "trawick@apache.org", "creation_time": "2002-10-09T21:40:42Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "itojun@itojun.org", "attachment_id": null, "id": 24247, "time": "2002-10-10T06:14:03Z", "bug_id": 13471, "creation_time": "2002-10-10T06:14:03Z", "is_private": false, "text": "is the use of apachectl mandatory?  if so, i was wrong about it and the problem report can be closed (operational mistake). i was invoking /usr/sbin/httpd directly. "}, {"attachment_id": null, "tags": [], "bug_id": 13471, "text": "apachectl is the correct way to start Apache 2.0 on Unix, but the docs\ndon't reflect that.  While starting via httpd will often work, this will\nfail outright for binary builds or not operate correctly on systems where\nspecial environment variable settings are picked up from envvars by\napachectl.\n\nThe doc on starting apache needs to be updated to mention that apachectl\nis the supported way and invoking httpd directly may or may not work\ncorrectly.\n", "count": 3, "id": 24276, "time": "2002-10-10T15:21:36Z", "creator": "trawick@apache.org", "creation_time": "2002-10-10T15:21:36Z", "is_private": false}, {"count": 4, "tags": [], "creator": "slive@apache.org", "text": "The docs issue here has been fixed.  The other issue is probably\nunfixable.", "id": 47651, "time": "2003-11-19T20:52:49Z", "bug_id": 13471, "creation_time": "2003-11-19T20:52:49Z", "is_private": false, "attachment_id": null}]