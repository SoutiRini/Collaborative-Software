[{"count": 0, "tags": [], "text": "Created attachment 24039\nSample test run showing failures\n\nTestConcurrency exhibits occasional failures - about 10% in my tests - which appear to be due to a startup timing issue.\n\nThis can be fixed by replacing:\n\nassertEquals(\"Size comparison:\",10, ds.getPool().getSize());\nby\nassertTrue(\"Size comparison(less than 11):\",ds.getPool().getSize()<=10);\n\nin the testSimple() method (as has been done for the other test methods in the class).\n\nSee attached files for some sample failures.\n\nN.B. the test output indicates either no failures or two failures.\nThis suggests that the failure in testSimple() may be affecting a subsequent test, i.e. there may be a problem with the test cleanup.\nPerhaps Driver.reset(); should be done after ds.close() - or even after super.tearDown()?", "attachment_id": 24039, "bug_id": 47583, "id": 129151, "time": "2009-07-26T06:43:28Z", "creator": "sebb@apache.org", "creation_time": "2009-07-26T06:43:28Z", "is_private": false}, {"count": 1, "tags": [], "text": "A further test shows that the tearDown() code is wrong.\n\nI changed the assertEquals() check in testSimple() to cause a failure every time, and this causes a failure in testBrutal().\n\nDriver.reset() needs to be after ds.close().", "attachment_id": null, "bug_id": 47583, "id": 129152, "time": "2009-07-26T06:55:22Z", "creator": "sebb@apache.org", "creation_time": "2009-07-26T06:55:22Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 47583, "is_private": false, "text": "Fixed in trunk. Thanks for the report.", "id": 129302, "time": "2009-07-30T12:41:15Z", "creator": "markt@apache.org", "creation_time": "2009-07-30T12:41:15Z", "attachment_id": null}]