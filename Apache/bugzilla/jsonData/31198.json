[{"count": 0, "attachment_id": null, "bug_id": 31198, "is_private": false, "id": 63473, "time": "2004-09-13T16:10:50Z", "creator": "jeff.barnes@hp.com", "creation_time": "2004-09-13T16:10:50Z", "tags": [], "text": "Non-ASCII passwords, in both forms and basic interfaces, are converted to UTF-8 \nbytes with each UTF-8 byte in a separate Unicode character in the password \nstring. We are using a custom realm, but we expect this behaviour would be \nconsistent across all the realms. A logical implementation would be to map the \nUTF-8 character to the equivalent Unicode character before presenting the \nUnicode password String in the interface.\n\nThis is similar to Tomcat 5 bug 29091."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 63493, "time": "2004-09-13T19:18:31Z", "bug_id": 31198, "creation_time": "2004-09-13T19:18:31Z", "is_private": false, "text": "As bug 29091 states, this is not an easy fix."}, {"count": 2, "attachment_id": null, "bug_id": 31198, "is_private": false, "id": 69249, "time": "2005-01-05T22:58:51Z", "creator": "markt@apache.org", "creation_time": "2005-01-05T22:58:51Z", "tags": [], "text": "Quick update:\n\nThe fix (using the filter) described in 29091 appears to resolve the issues with\nthe admin app (passwords are saved correctly in UTF-8) but a much trickier\nproblem has emerged in testing.\n\nFor BASIC auth the password is converted to bytes and base 64 encoded. The\nproblem appears to be the different browsers (at least IE and FireFox) make\ndifferent encoding assumptions (and neither seem to assume UTF-8) at this point\nbecause the same username and password results in different Authorization\nheaders. It is looking like another i18n grey area but I will do some more work\nto see if there is anything that can be done to work around this fun and games."}, {"count": 3, "tags": [], "bug_id": 31198, "is_private": false, "text": "Yep. BASIC auth and non-ASCII passwords is a mess before it even gets to Tomcat.\nMozilla definitely (and I suspect IE as well) does a lossy conversion of\nnon-ASCII usernames and passwords before base64 encoding. There is no way I can\nsee of Tomcat supporting BASIC auth for non-ASCII usernames and passwords as\nthings currently stand.\n\nOn to FORM auth...", "id": 69251, "time": "2005-01-05T23:50:31Z", "creator": "markt@apache.org", "creation_time": "2005-01-05T23:50:31Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 31198, "attachment_id": null, "id": 69331, "time": "2005-01-07T11:08:10Z", "creator": "markt@apache.org", "creation_time": "2005-01-07T11:08:10Z", "is_private": false, "text": "FORM and DIGEST required a few small fixes - these have been applied to CVS for\nTC4 and TC5.\n\nRemember that for editing of these to work correctly via the admin app, the\nSetCharacterEncodingFilter must be configured."}, {"count": 5, "tags": [], "creator": "paul.mcculloch@axiossystems.com", "text": "The encoding used to interpret the login request can be forced (in TC5 at least)\nusing the characterEncoding attribute of the\norg.apache.catalina.authenticator.FormAuthenticator valve -\nhttp://tomcat.apache.org/tomcat-5.5-doc/config/valve.html", "id": 110261, "time": "2007-11-06T05:18:21Z", "bug_id": 31198, "creation_time": "2007-11-06T05:18:21Z", "is_private": false, "attachment_id": null}]