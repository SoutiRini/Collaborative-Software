[{"count": 0, "tags": [], "creator": "olsok@pegasystems.com", "text": "If ClassLoader.getResource() is called specifying a .class file that is located \nwithin a jar file, the Tomcat5 WebappClassLoader will return a URL pointing to \na work directory which may not exist and which will never contain the requested \nclass file.\n\nThere is a comment in the method that says \"copy binary content to work \ndirectory if not present\", but there is no copying done -- nor should there be \nfor .class files. findResourceInternal() has already copied all non-class \ncontent from the jar file into the work directory (when the first request for a \nnon-class resource within a given jar is resolved).\n\ngetResource() needs to examine the name of the resource and avoid modifying the \nURL returned if the resource is a .class file (for consistency with logic in \nfindResourceInternal().\n\nThe current behavior is inconsistent with previous versions of Tomcat and the \nJDK classloaders. My application relies on the ability to retrieve a URL for \na .class resource in order to construct a classpath to be used with a Java \ncompiler when compiling dynamically generated Java.", "id": 48306, "time": "2003-11-29T18:46:43Z", "bug_id": 25088, "creation_time": "2003-11-29T18:46:43Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 25088, "is_private": false, "count": 1, "id": 48307, "time": "2003-11-29T18:53:23Z", "creator": "remm@apache.org", "creation_time": "2003-11-29T18:53:23Z", "text": "Did you read what is on the page about filing bugs ? Is looking for the archives\nof the past 24 hours for either tc-dev or tc-user really too much to ask ? Or\nmaybe you looked at the other bug and thought it would be smart to file a\nduplicate ...\n\nBTW, your method is broken. You should either:\n- Use the context param set for Jasper\n- use getURLs since the CL will be a URL CL\n\n*** This bug has been marked as a duplicate of 25079 ***"}]