[{"count": 0, "tags": [], "bug_id": 28735, "text": "Copy and sync report a file out-of-date (and copy it) if the lastModified of the\nsource is higher, even by 1 millisecond. When I sync an NTFS file system with a\nnetwork share services by Samba (Samba 3 going to an ext2 or ext3 linux file\nsystem), the file time returned by the share is always a whole second, and when\nAnt tries to set the lastModified after a copy, the file time gets rounded down,\nso the source again looks newer by a few milliseconds. You should probably allow\nfor at least 1 second fudge, at least as an option to resource-age comparisons.\nHere is a printout from a sync operation; I modified the sources to show the\nfile times and difference; when I run this example, the file gets copied over\nand over again:\n\nC:\\Documents and Settings\\stoledo\\Desktop\\Projects\\workspace3\\myfiles_mirror>ant\n-verbose\nUnable to locate tools.jar. Expected to find it in C:\\Program\nFiles\\Java\\j2re1.4.2_04\\lib\\tools.jar\nApache Ant version 1.6.1 compiled on May 3 2004\nBuildfile: build.xml\nDetected Java version: 1.4 in: C:\\Program Files\\Java\\j2re1.4.2_04\nDetected OS: Windows XP\nparsing buildfile C:\\Documents and\nSettings\\stoledo\\Desktop\\Projects\\workspace3\\myfiles_mirror\\build.xml with URI =\nfile:///C:/Documents%20a\nnd%20Settings/stoledo/Desktop/Projects/workspace3/myfiles_mirror/build.xml\nProject base dir set to: C:\\Documents and\nSettings\\stoledo\\Desktop\\Projects\\workspace3\\myfiles_mirror\nBuild sequence for target `pc-sivan-talks' is [pc-sivan-talks]\nComplete build sequence is [pc-sivan-talks, pc-sivan-tools, pc-sivan-library,\npc-sivan-courses, pc-sivan, pc-sivan-family, netapp-talks, tem\np, ]\n\npc-sivan-talks:\n     [sync] zurich-feb-02.txt added as zurich-feb-02.txt is outdated (sivan;\ndiff=106 milliseconds, source=1075713040106 target=107571304000\n0 milliseconds)\n     [sync] Copying 1 file to \\\\pc-sivan\\localdisk\\home\\stoledo\\swift\\Talks\n     [sync] Copying C:\\pc-sivan\\Talks\\zurich-feb-02.txt to\n\\\\pc-sivan\\localdisk\\home\\stoledo\\swift\\Talks\\zurich-feb-02.txt\n     [sync] NO dangling directory to remove from\n\\\\pc-sivan\\localdisk\\home\\stoledo\\swift\\Talks\n     [sync] NO dangling file to remove from\n\\\\pc-sivan\\localdisk\\home\\stoledo\\swift\\Talks\n     [sync] NO empty directory to remove from\n\\\\pc-sivan\\localdisk\\home\\stoledo\\swift\\Talks\n\nBUILD SUCCESSFUL", "id": 56734, "attachment_id": null, "creator": "stoledo@tau.ac.il", "creation_time": "2004-05-03T06:52:47Z", "time": "2004-05-03T06:52:47Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 28735, "text": "It may not be the greatest you could hope for, but you might be able to work \naround this problem by using selectors <different> and/or <date> to pick your \nfiles.  Each of these selectors has a granularity attribute that could be \nhelpful.  Although on Windows, there should be a 2-second default granularity \nin use, so it strikes me as odd that things are being recopied based on a 106-\nms difference...", "id": 56755, "time": "2004-05-03T14:36:16Z", "creator": "mbenson@apache.org", "creation_time": "2004-05-03T14:36:16Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 28735, "attachment_id": null, "text": "Thanks for the selectors idea. I'll try this out. But I want to clarify the\n2-second rule for Windows: it only affects the \"time in the future\" message, not\nthe up-to-date vs. outdated decision.", "id": 56766, "time": "2004-05-03T18:57:14Z", "creator": "stoledo@tau.ac.il", "creation_time": "2004-05-03T18:57:14Z", "is_private": false}, {"count": 3, "text": "Ant 1.6.2 will have a granularity attribute that gives you more control.\n\n*** This bug has been marked as a duplicate of 22150 ***", "bug_id": 28735, "attachment_id": null, "id": 58044, "time": "2004-05-25T12:16:07Z", "creator": "bodewig@apache.org", "creation_time": "2004-05-25T12:16:07Z", "tags": [], "is_private": false}]