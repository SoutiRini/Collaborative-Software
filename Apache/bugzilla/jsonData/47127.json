[{"count": 0, "tags": [], "creator": "kamil.kurop@ser-solutions.pl", "attachment_id": null, "id": 126642, "time": "2009-04-30T00:55:47Z", "bug_id": 47127, "creation_time": "2009-04-30T00:55:47Z", "is_private": false, "text": "Hi!\n\n   I received an error while trying to run JMeter:\nAn error occurred: Unable to change language to pl_PL\n\nThe cause was in line 325 in class JMeterUtils:\n\n    resBund.getLocale().equals(loc)\n\n    resBund.getLocale()\n\t (java.util.Locale) pl\n    loc\n\t (java.util.Locale) pl_PL\n\nI've modified it to have JMeter run in my language:\n\n   from: resBund.getLocale().equals(loc)\n   to:   resBund.getLocale().getLanguage().equals(loc.getLanguage())\n\n   resBund.getLocale().getLanguage()\n\t (java.lang.String) pl\n\n   loc.getLanguage()\n\t (java.lang.String) pl\n\n\nNow it's equal, no exception is thrown, and I'm happy to see JMeter on my screen. I don't know if it's the best solution of such problem. Maybe some other way of comparing should be used? Something from java.util.Locale? Maybe you'll have a better idea, something more elegant?"}, {"count": 1, "tags": [], "bug_id": 47127, "attachment_id": null, "id": 126649, "time": "2009-04-30T03:39:03Z", "creator": "sebb@apache.org", "creation_time": "2009-04-30T03:39:03Z", "is_private": false, "text": "Why are you setting the Locale to pl_PL and not just pl?\n\nIs that what your JVM is set to or have you defined the JMeter \"language\" property?\n\nUsing \"pl\" works fine in the nightly builds."}, {"count": 2, "tags": [], "creator": "kamil.kurop@ser-solutions.pl", "attachment_id": null, "is_private": false, "id": 126651, "time": "2009-04-30T04:37:42Z", "bug_id": 47127, "creation_time": "2009-04-30T04:37:42Z", "text": "Hi Sebb,\n\n   I'm selecting current locale in Start > Control Panel >  Regional Settings > first tab: Regional Options (and Advanced). I'm not passing JVM options -Duser.language=pl -Duser.region=PL to alter default (polish) locale, which I've set in \n\n   What variable isDefault actually stores is information 'isEnglish' (check line #308). That may puzzle a bit.\n\n   I've checked three computers (two Windows XP PL and one Windows 2000 Server PL) and Locale.getDefault() returns: Default locale: pl_PL.\n\nCordially,\nKamil\n\n\n................................\n// Code used to check for default locale\nimport java.util.Locale;\n\npublic class PrintLoc {\n\tpublic static void main(String[] args) {\n\t\tSystem.out.println(\"Default locale: \" + Locale.getDefault());\n\t}\n}"}, {"count": 3, "tags": [], "bug_id": 47127, "attachment_id": null, "id": 126652, "time": "2009-04-30T04:48:56Z", "creator": "kamil.kurop@ser-solutions.pl", "creation_time": "2009-04-30T04:48:56Z", "is_private": false, "text": "I have this trouble only in Eclipse. When I've downloaded package from your website and saved polish property file in proper place, it works fine."}, {"count": 4, "tags": [], "text": "OK, I see.\n\nWhat I have done is to add a further check.\n\nIf the Locales don't match exactly, then check if they match when getLanguage()\nis used. If so, log a warning (because the requested Locale was not available)\nbut continue.\n\nThis corresponds better with the behaviour of Resource.getBundle().\n\nSee:\n\nURL: http://svn.apache.org/viewvc?rev=770174&view=rev\nLog:\nBug 47127 -  Unable to change language to pl_PL\n\nThis will be in the nightlies from version r770174.\n\nThanks for the report.", "is_private": false, "id": 126653, "creator": "sebb@apache.org", "time": "2009-04-30T04:51:44Z", "bug_id": 47127, "creation_time": "2009-04-30T04:51:44Z", "attachment_id": null}]