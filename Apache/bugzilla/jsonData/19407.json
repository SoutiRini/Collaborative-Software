[{"count": 0, "tags": [], "creator": "lenze@seattleu.edu", "attachment_id": null, "is_private": false, "id": 36254, "time": "2003-04-29T00:22:13Z", "bug_id": 19407, "creation_time": "2003-04-29T00:22:13Z", "text": "build.xml:\n<project default=\"test\">\n  <target name=\"test\">\n    <xslt basedir=\".\" destdir=\"out\" includes=\"in*.xml\" style=\"test.xsl\"/>\n  </target>\n</project>\n\ntest.xsl:\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n  <xsl:variable name=\"var\" select=\"string(/test/value)\"/>\n\n  <xsl:template match=\"/\">\n    The test value is: <xsl:value-of select=\"$var\"/>\n  </xsl:template>\n\n</xsl:stylesheet>\n\nin1.xml:\n<test>\n  <value>from in1.xml</value>\n</test>\n\nin2.xml:\n<test>\n  <value>from in2.xml</value>\n</test>\n\nThe (incorrect) output:\nout/in1.html:\n    The test value is: from in1.xml\n\nout/in2.html:\n    The test value is: from in1.xml\n\n\nin2.html should say \"from in2.xml\". If I remove the variable and just use \nthe \"/test/value\" expression inline, then the correct value is output.\n\nWorse yet, when I keep the top-level variable and remove the string() function \nsurrounding \"/test/value\", I get a NullPointerException when the second file \nis processed."}, {"count": 1, "tags": [], "bug_id": 19407, "text": "What do you get, if you set the reloadstylesheet attribute to true?", "id": 36281, "time": "2003-04-29T12:42:56Z", "creator": "bodewig@apache.org", "creation_time": "2003-04-29T12:42:56Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "lenze@seattleu.edu", "text": "I set reloadstylesheet to \"true\", and the behavior is now correct. But build \ntime increases by over 50% :-(  (Actually, that's not as bad as I thought it \nwould be.)\n\nIs this the \"bug in certain Xalan-J versions\" mentioned under the \nreloadstylesheet attribute description at \nhttp://ant.apache.org/manual/CoreTasks/style.html ?", "id": 36299, "attachment_id": null, "bug_id": 19407, "creation_time": "2003-04-29T16:33:54Z", "time": "2003-04-29T16:33:54Z", "is_private": false}, {"count": 3, "tags": [], "creator": "bodewig@apache.org", "text": "Well, the performance impact is to be expected (I'm glad to hear it's not as\nbad as feared).\n\nI don't think this is the bug we talk about in the documentation - to be sure you'd\nhave to try with a recent Xalan.  The original problem is in the version of\nXalan that ships with JDK 1.4.1 - see bug 13859 for details.", "id": 36399, "attachment_id": null, "bug_id": 19407, "creation_time": "2003-04-30T15:51:35Z", "time": "2003-04-30T15:51:35Z", "is_private": false}, {"count": 4, "tags": [], "text": "I figured out how to make ant use Xalan 2.5.0 and the problem went away. No \nneed for reloadstylesheet=\"true\". Thanks.", "is_private": false, "id": 36405, "creator": "lenze@seattleu.edu", "time": "2003-04-30T17:29:15Z", "bug_id": 19407, "creation_time": "2003-04-30T17:29:15Z", "attachment_id": null}]