[{"count": 0, "tags": [], "bug_id": 41671, "text": "Reported by Gilles Beaugeais on fop-users:\nAt first glance, it seems like this could be a regression due to the UAX#14 linebreaking, but that is a wild \nguess. I'll investigate the attached sample, and run it through the debugger later, if nobody beats me to it.\n\nI've already added the same block without hyphenation, and giving this a quick run, it seems the problem \nwrt dashes being ignored as possible linebreaks is unrelated to hyphenation settings...", "id": 99636, "time": "2007-02-21T12:02:42Z", "creator": "adelmelle@apache.org", "creation_time": "2007-02-21T12:02:42Z", "is_private": false, "attachment_id": null}, {"attachment_id": 19622, "tags": [], "bug_id": 41671, "is_private": false, "count": 1, "id": 99637, "time": "2007-02-21T12:03:47Z", "creator": "adelmelle@apache.org", "creation_time": "2007-02-21T12:03:47Z", "text": "Created attachment 19622\nExample FO demonstrating the problem"}, {"count": 2, "tags": [], "bug_id": 41671, "attachment_id": null, "text": "Yes the changed behaviour is due to the UAX#14 changes but as far as I can tell\nthe new behaviour is in line with the UAX#14 spec\n(http://www.unicode.org/reports/tr14/).\n\nRule 21 says: LB21  Do not break before hyphen-minus,....\nand\nRule 25 prevents a linebreak between a hyphen followed by a digit\n\nThis means the only legal breakpoint in the text in question\n'C-12-188-440/NH-000' is the forward slash which is the one FOP chooses.\n\nYou could surround the hyphen with ZWSP or use an EM DASH instead of the HYPHEN\nto generate a line breaking opportunity.\n\nI have changed the bug to INVALID but feel free to disagree.\n\n", "id": 99644, "time": "2007-02-21T14:19:09Z", "creator": "manuel@apache.org", "creation_time": "2007-02-21T14:19:09Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 41671, "is_private": false, "count": 3, "id": 99668, "time": "2007-02-22T00:32:37Z", "creator": "vhennebert@gmail.com", "creation_time": "2007-02-22T00:32:37Z", "text": "(In reply to comment #2)\n> Yes the changed behaviour is due to the UAX#14 changes but as far as I can tell\n> the new behaviour is in line with the UAX#14 spec\n> (http://www.unicode.org/reports/tr14/).\n> \n> Rule 21 says: LB21  Do not break before hyphen-minus,....\n> and\n> Rule 25 prevents a linebreak between a hyphen followed by a digit\n> \n> This means the only legal breakpoint in the text in question\n> 'C-12-188-440/NH-000' is the forward slash which is the one FOP chooses.\n> \n> You could surround the hyphen with ZWSP or use an EM DASH instead of the HYPHEN\n> to generate a line breaking opportunity.\n> \n> I have changed the bug to INVALID but feel free to disagree.\n\nI think you're right, actually, a hyphen character shouldn't be used in such a\ncase. That just reminds me of something I saw in a book on typographic rules,\nthat the proper character to use here is the en dash (U+2013), like in date\nranges (e.g., 2001-2005). I guess a break would be allowed then.\nNow that UAX#14 is implemented, illegal uses of hyphens will start to strike\nout. Let's get prepared to teach people about the right use of the several dash\ncharacters: hyphen, en dash, em dash, quotation dash, etc. A new time of\nhigh-level typography has risen..."}, {"attachment_id": null, "tags": [], "bug_id": 41671, "is_private": false, "count": 4, "id": 99670, "time": "2007-02-22T01:04:46Z", "creator": "manuel@apache.org", "creation_time": "2007-02-22T01:04:46Z", "text": "Of course 'high-level typography' doesn't really help you much if what you need\nto do is generating invoices, orders, ... or the like from existing datasources,\ne.g. databases, in which for example order numbers or item numbers are stored in\nthe good old ASCII character set using the hyphen.\n\nLets see if this breaking behaviour becomes a trouble spot down the track. There\nis always the option, and the spec explicitly allows that for certain rules, to\nmake this somehow configurable.\n\n"}, {"count": 5, "tags": [], "text": "Thanks for the explanations. I didn't know this rules.\n(The specs appear a little 'strange' to me; the basic space \ncharacter is used as a break, whereas the entity nbsp is used \nto keep words together but basic hyphen character is used to \nkeep when numbers, whereas the entity endash is used to break. \nIt is very confusing !)\n\nIt is very annoying for me, having thousands of XML files \nwritten with hyphens. And it is impossible to ask users to \ninsert endash instead of hyphens, it is time consuming and \nendash display is different from hyphen display (with a font \nlike Arial).\n\nSo could someone tell me if it is easy (and where if possible) \nto modify the source code to make the behavior of hyphen the \nsame as the endash or emdash.\n\nThanks again for your help and your work on FOP,\n\n", "is_private": false, "bug_id": 41671, "id": 99706, "time": "2007-02-22T14:44:56Z", "creator": "gbeaugeais@voila.fr", "creation_time": "2007-02-22T14:44:56Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 41671, "attachment_id": null, "id": 99708, "time": "2007-02-22T15:23:01Z", "creator": "manuel@apache.org", "creation_time": "2007-02-22T15:23:01Z", "is_private": false, "text": "Its just software so anything is possible :-)\n\nHistorcally the hyphen is one of those characters which is vastly overloaded\nwith different meaning in different contexts. The UAX#14 spec has taken one\nparticular approach to its interpretation which admittedly doesn't match well in\nsome legacy situations, i.e. situations in which the hyphen is used in a context\ndifferent to what the Unicode standard expect it to be used in.\n\nThe quick and dirty hack (untested of course) would be to add in\norg.apache.fop.text.linebreak.LineBreakStatus in the method nextChar() at the\nbeginning something like:\n\nif (c == '-') c = '\\u2013';\n\nThat is whenever we give a hyphen to the line breaker convert it into a EN DASH\nbefore the line breaker deals with it.\n\nA probably better solution, but requiring some understanding of the UAX#14 spec,\nwould be to change the actual pair table in\nsrc/codegen/unicode/data/LineBreakPairTable.txt and to regenerate the java code\nusing the codegen-unicode ant target. For example change the cell (row HY / col\n NU) from % (indirect break opportunity) to _ (direct break opportunity). That\nwould allow a break between a hyphen followed directly by a numeric.\n\nHope this helps."}, {"count": 7, "tags": [], "bug_id": 41671, "is_private": false, "text": "Thanks, I will try your ideas.\n\nI prefer the second one too as the hyphen remains an hyphen \ninstead of being converted to an endash in the first one.\nAnd the second one applies only in table cells.", "id": 99711, "time": "2007-02-22T15:51:47Z", "creator": "gbeaugeais@voila.fr", "creation_time": "2007-02-22T15:51:47Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 41671, "attachment_id": null, "id": 99712, "time": "2007-02-22T15:56:24Z", "creator": "manuel@apache.org", "creation_time": "2007-02-22T15:56:24Z", "is_private": false, "text": "No the second one does not only apply in table cells - it will apply everywhere.\nIn the 2nd case you are modifing the 'line breaking pairs table' not line\nbreaking in tables."}, {"attachment_id": null, "tags": [], "bug_id": 41671, "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "count": 9, "id": 156792, "time": "2012-04-01T13:52:56Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T13:52:56Z", "is_private": false}]