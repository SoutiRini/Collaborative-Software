[{"count": 0, "tags": [], "bug_id": 54302, "attachment_id": 29763, "id": 164075, "time": "2012-12-14T21:10:45Z", "creator": "nistor1@illinois.edu", "creation_time": "2012-12-14T21:10:45Z", "is_private": false, "text": "Created attachment 29763\npatch\n\nThe problem appears in version 1.8.4 and in revision 1421898.  I\nattached a one-line patch that fixes it.\n\nIn method \"FTPTaskMirrorImpl.FTPDirectoryScanner.AntFTPFile.getFastRelativePath\",\nthe call \"absPath.indexOf(rootPath + task.getSeparator()) == 0\" should\nbe \"absPath.startsWith(rootPath + task.getSeparator())\".  The intent\nof the call is more explicit with \"startsWith\" than with \"indexOf(..)==0\".\n\"startsWith\" is also more efficient than \"indexOf\", because\n\"startsWith\" tries to match only the start of the string, while\n\"indexOf\" searches until the first occurrence.\n\nThere are many calls to \"String.startsWith\" in Ant (just like in the\nproposed patch), for example, in methods \"AntlibDefinition.setURI\",\n\"AntClassLoader.isParentFirst\", \"ComponentHelper.checkNamespace\",\n\"Execute.getVMSLogicals\", \"ExecTask.isPath\", \"Jar.writeIndexLikeList\",\n\"Definer.makeResourceFromURI\", \"PathTokenizer.nextToken\", etc."}, {"count": 1, "tags": [], "bug_id": 54302, "attachment_id": null, "id": 172034, "time": "2014-01-02T14:40:11Z", "creator": "bodewig@apache.org", "creation_time": "2014-01-02T14:40:11Z", "is_private": false, "text": "svn revision 1554813"}]