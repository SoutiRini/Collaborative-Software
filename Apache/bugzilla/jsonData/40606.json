[{"count": 0, "tags": [], "bug_id": 40606, "attachment_id": null, "id": 94098, "time": "2006-09-26T07:21:32Z", "creator": "gturski@interia.pl", "creation_time": "2006-09-26T07:21:32Z", "is_private": false, "text": "Install tomcat5.5 and APR binaries, apache httpd 2.0 or 2.2 add appropriate \nmod_jk. \n\nAdd following lines to httpd.conf:\n    LoadModule jk_module modules/mod_jk-apache-2.2.3.so\n    JkWorkersFile       conf/workers.properties\n    JkLogFile           logs/mod_jk.log\n    JkLogLevel          error\n    JkLogStampFormat    \"[%a %b %d %H:%M:%S %Y] \"\n    JkOptions           +ForwardKeySize +ForwardURICompat -ForwardDirectories\n    JkRequestLogFormat  \"%w %V %T\"\n    JkShmFile           logs/jk.shm\n    JkMount /*          jvm1\n\nCreate following workers.properties in apache conf directory\n    worker.list=jvm1\n    worker.jvm1.type=ajp13\n    worker.jvm1.host=localhost\n    worker.jvm1.port=8009\n\nIn server.conf modify default engine - add jvmRoute=\"jvm1\" eg.\n    <Engine name=\"Catalina\" defaultHost=\"localhost\" jvmRoute=\" jvm1\">\n\nStart apache, start tomcat. Open browser, enter: http://localhost, then select \nany tomcat context for example jsp-examples. Now you can see on task manager \nconstant 100% CPU usage generated by Tomcat's java. This happens for java \n1.5.0_08 and java 1.4.2_12 both, and for Internet Explorer and Mozilla."}, {"count": 1, "tags": [], "bug_id": 40606, "text": "Created attachment 18913\ntomcat server configuration", "id": 94099, "time": "2006-09-26T07:23:19Z", "creator": "gturski@interia.pl", "creation_time": "2006-09-26T07:23:19Z", "is_private": false, "attachment_id": 18913}, {"attachment_id": 18914, "tags": [], "creator": "gturski@interia.pl", "is_private": false, "count": 2, "id": 94100, "time": "2006-09-26T07:24:06Z", "bug_id": 40606, "creation_time": "2006-09-26T07:24:06Z", "text": "Created attachment 18914\napache 2.2.3 configuration"}, {"count": 3, "tags": [], "bug_id": 40606, "attachment_id": 18915, "text": "Created attachment 18915\napache configuration", "id": 94101, "time": "2006-09-26T07:24:57Z", "creator": "gturski@interia.pl", "creation_time": "2006-09-26T07:24:57Z", "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 40606, "is_private": false, "id": 94111, "time": "2006-09-26T10:28:09Z", "creator": "remm@apache.org", "creation_time": "2006-09-26T10:28:09Z", "tags": [], "text": "\"you can see\": of course, I cannot see it. You could try providing thread dumps,\nfor starters."}, {"count": 5, "tags": [], "bug_id": 40606, "attachment_id": null, "id": 94153, "time": "2006-09-27T09:41:17Z", "creator": "remm@apache.org", "creation_time": "2006-09-27T09:41:17Z", "is_private": false, "text": "We will then wait for someone to report this problem with more details."}, {"count": 6, "tags": [], "bug_id": 40606, "text": "Sorry for delay.\nHere is thread dump. Apache is idle. CPU usage is 100%. \n \n\nFull thread dump Java HotSpot(TM) Client VM (1.5.0_08-b03 mixed mode):\n\n\"ajp-8009-2\" daemon prio=6 tid=0x0b47b038 nid=0x1418 in Object.wait() \n[0x0bd8f000..0x0bd8fc68]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x032643b0> (a \norg.apache.tomcat.util.net.AprEndpoint$Worker)\n        at java.lang.Object.wait(Object.java:474)\n        at org.apache.tomcat.util.net.AprEndpoint$Worker.await\n(AprEndpoint.java:1255)\n        - locked <0x032643b0> (a org.apache.tomcat.util.net.AprEndpoint$Worker)\n        at org.apache.tomcat.util.net.AprEndpoint$Worker.run\n(AprEndpoint.java:1280)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-1\" daemon prio=6 tid=0x0b472b70 nid=0x1238 in Object.wait() \n[0x0bd4f000..0x0bd4fce8]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x03234f00> (a \norg.apache.tomcat.util.net.AprEndpoint$Worker)\n        at java.lang.Object.wait(Object.java:474)\n        at org.apache.tomcat.util.net.AprEndpoint$Worker.await\n(AprEndpoint.java:1255)\n        - locked <0x03234f00> (a org.apache.tomcat.util.net.AprEndpoint$Worker)\n        at org.apache.tomcat.util.net.AprEndpoint$Worker.run\n(AprEndpoint.java:1280)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-Poller-7\" daemon prio=6 tid=0x0b46fca8 nid=0xc14 in Object.wait() \n[0x0bd0f000..0x0bd0fd68]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x03234f80> (a \norg.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Object.wait(Object.java:474)\n        at org.apache.tomcat.util.net.AprEndpoint$Poller.run\n(AprEndpoint.java:1127)\n        - locked <0x03234f80> (a org.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-Poller-6\" daemon prio=6 tid=0x0b44f1b0 nid=0x9fc in Object.wait() \n[0x0bccf000..0x0bccf9e8]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x03235010> (a \norg.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Object.wait(Object.java:474)\n        at org.apache.tomcat.util.net.AprEndpoint$Poller.run\n(AprEndpoint.java:1127)\n        - locked <0x03235010> (a org.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-Poller-5\" daemon prio=6 tid=0x0ad11c28 nid=0x11b8 in Object.wait() \n[0x0bc8f000..0x0bc8fa68]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x032350a0> (a \norg.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Object.wait(Object.java:474)\n        at org.apache.tomcat.util.net.AprEndpoint$Poller.run\n(AprEndpoint.java:1127)\n        - locked <0x032350a0> (a org.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-Poller-4\" daemon prio=6 tid=0x0b27fda8 nid=0x13d4 in Object.wait() \n[0x0bc4f000..0x0bc4fae8]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x03235130> (a \norg.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Object.wait(Object.java:474)\n        at org.apache.tomcat.util.net.AprEndpoint$Poller.run\n(AprEndpoint.java:1127)\n        - locked <0x03235130> (a org.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-Poller-3\" daemon prio=6 tid=0x0ad11a10 nid=0x1190 in Object.wait() \n[0x0bc0f000..0x0bc0fb68]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x032351c0> (a \norg.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Object.wait(Object.java:474)\n        at org.apache.tomcat.util.net.AprEndpoint$Poller.run\n(AprEndpoint.java:1127)\n        - locked <0x032351c0> (a org.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-Poller-2\" daemon prio=6 tid=0x0b0ebe20 nid=0xfa8 in Object.wait() \n[0x0b3cf000..0x0b3cfbe8]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x03235250> (a \norg.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Object.wait(Object.java:474)\n        at org.apache.tomcat.util.net.AprEndpoint$Poller.run\n(AprEndpoint.java:1127)\n        - locked <0x03235250> (a org.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-Poller-1\" daemon prio=6 tid=0x0b1f7d18 nid=0x1580 runnable \n[0x0b38f000..0x0b38fc68]\n        at org.apache.tomcat.jni.Poll.poll(Native Method)\n        at org.apache.tomcat.util.net.AprEndpoint$Poller.run\n(AprEndpoint.java:1153)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-Poller-0\" daemon prio=6 tid=0x0b20dd20 nid=0x12cc in Object.wait() \n[0x0b34f000..0x0b34fce8]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <0x03235370> (a \norg.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Object.wait(Object.java:474)\n        at org.apache.tomcat.util.net.AprEndpoint$Poller.run\n(AprEndpoint.java:1127)\n        - locked <0x03235370> (a org.apache.tomcat.util.net.AprEndpoint$Poller)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ajp-8009-Acceptor-0\" daemon prio=6 tid=0x0b20db98 nid=0x1228 runnable \n[0x0b30f000..0x0b30fd68]\n        at org.apache.tomcat.jni.Socket.accept(Native Method)\n        at org.apache.tomcat.util.net.AprEndpoint$Acceptor.run\n(AprEndpoint.java:999)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"ContainerBackgroundProcessor[StandardEngine[Catalina]]\" daemon prio=6 \ntid=0x0ad83bb8 nid=0xb0 runnable [0x0b2cf000..0x0b2cf9e8]\n        at java.io.WinNTFileSystem.getBooleanAttributes(Native Method)\n        at java.io.File.exists(File.java:702)\n        at org.apache.catalina.startup.HostConfig.checkResources\n(HostConfig.java:1074)\n        - locked <0x02ff1ed0> (a org.apache.catalina.startup.HostConfig)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1187)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent\n(HostConfig.java:292)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent\n(LifecycleSupport.java:119)\n        at org.apache.catalina.core.ContainerBase.backgroundProcess\n(ContainerBase.java:1305)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChil\ndren(ContainerBase.java:1569)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChil\ndren(ContainerBase.java:1578)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run\n(ContainerBase.java:1558)\n        at java.lang.Thread.run(Thread.java:595)\n\n\"Low Memory Detector\" daemon prio=6 tid=0x00970c38 nid=0xecc runnable \n[0x00000000..0x00000000]\n\n\"CompilerThread0\" daemon prio=10 tid=0x0096f808 nid=0xe6c waiting on condition \n[0x00000000..0x0abff8c8]\n", "id": 94165, "time": "2006-09-27T15:15:40Z", "creator": "gturski@interia.pl", "creation_time": "2006-09-27T15:15:40Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 40606, "text": "It seems that everything happens in thread ajp-8009-Poller-1 eg in method \norg.apache.tomcat.jni.Poll.poll. \n\nIt looks like the problem descripted in 40525.\n\ngreg\n", "id": 94167, "time": "2006-09-27T15:20:22Z", "creator": "gturski@interia.pl", "creation_time": "2006-09-27T15:20:22Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 40606, "attachment_id": null, "text": "Ok, I see it now. It does not happen for me, but at least it means there's a\nworkaround. However, I'd like to know why you are filing a bug if you know a\nduplicate exists.\n\n*** This bug has been marked as a duplicate of 40525 ***", "id": 94178, "time": "2006-09-27T20:31:55Z", "creator": "remm@apache.org", "creation_time": "2006-09-27T20:31:55Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 40606, "text": "FYI. I didn't find 40525 before filing this bug. Thread dump and further \nsearch did help.\n\nIn my test environment I have patched native connectors and rebuild them with \nVC2003. It solved my problem.\n\ngreg\n", "count": 9, "id": 94218, "time": "2006-09-28T10:39:33Z", "creator": "gturski@interia.pl", "creation_time": "2006-09-28T10:39:33Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 40606, "attachment_id": null, "text": "Can you try the trunk?", "id": 94221, "time": "2006-09-28T11:09:18Z", "creator": "mturk@apache.org", "creation_time": "2006-09-28T11:09:18Z", "is_private": false}, {"count": 11, "tags": [], "text": "It works OK\n\ngreg", "attachment_id": null, "id": 94230, "creation_time": "2006-09-28T12:57:37Z", "time": "2006-09-28T12:57:37Z", "creator": "gturski@interia.pl", "bug_id": 40606, "is_private": false}, {"count": 12, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "id": 112422, "time": "2008-01-01T20:47:48Z", "bug_id": 40606, "creation_time": "2008-01-01T20:47:48Z", "is_private": false, "text": "Changing component because this is for tcnative."}]