[{"attachment_id": null, "tags": [], "creator": "cas+apache@taz.net.au", "text": "dbmmanage import expects username:password pairs to be already encrypted, when\nit is a trivial patch to enable it to encrypt passwords itself if they are fed\nin as plaintext.\n\nsee patch below.  it supports all the encryption types supported by the\nmanual/command-line input methods because it just calls the same crypting\nfunction that was already in the script:\n\nbtw, if you have pre-crypted passwords to feed it, just use the \"-p\" (plaintext)\non the dbmmanage command line.  might make sense to have a synonym of \"-n\" for\n\"don't crypt\" as well.\n\n\n\n--- dbmmanage.orig\t2007-02-12 16:52:43.000000000 +1100\n+++ dbmmanage\t2007-03-22 14:03:11.231980231 +1100\n@@ -307,7 +307,9 @@\n \n sub dbmc::import {\n     while(defined($_ = <STDIN>) and chomp) {\n-\t($key,$crypted_pwd,$groups,$comment) = split /:/, $_, 4;\n+\tmy $plain_pwd;\n+\t($key,$plain_pwd,$groups,$comment) = split /:/, $_, 4;\n+\t$crypted_pwd = cryptpw($plain_pwd);\n \tdbmc->add;\n     }\n }", "count": 0, "id": 100772, "time": "2007-03-21T20:06:24Z", "bug_id": 41925, "creation_time": "2007-03-21T20:06:24Z", "is_private": false}]