[{"count": 0, "tags": [], "bug_id": 41488, "is_private": false, "text": "A fix for bug 41149. As proposed by Jeremias, ImageIOImage now doesn't call\nloadBitmap() if it has the width and height of the image. I tested the patched\nversion width JPG, GIF and PNG images for PS, PDF and RTF output. So far it\nseems to be OK...", "id": 98669, "time": "2007-01-29T02:05:46Z", "creator": "bruegger@puzzle.ch", "creation_time": "2007-01-29T02:05:46Z", "attachment_id": null}, {"count": 1, "attachment_id": 19474, "creator": "bruegger@puzzle.ch", "text": "Created attachment 19474\nPatch file", "id": 98670, "time": "2007-01-29T02:06:19Z", "bug_id": 41488, "creation_time": "2007-01-29T02:06:19Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 41488, "attachment_id": 19475, "text": "Created attachment 19475\nTest file", "id": 98671, "time": "2007-01-29T02:07:11Z", "creator": "bruegger@puzzle.ch", "creation_time": "2007-01-29T02:07:11Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "jeremias@apache.org", "is_private": false, "id": 98941, "time": "2007-02-03T14:56:55Z", "bug_id": 41488, "creation_time": "2007-02-03T14:56:55Z", "tags": [], "text": "Patch applied. Thanks, Dominic.\nhttp://svn.apache.org/viewvc?view=rev&rev=503326\n\nWhile reviewing I noticed one problem. PNGReader does not read the resolution\nfrom the PNG file. So, if a PNG were used with a resolution other than 72dpi,\nthe intrinsic size of the image will be wrong when processed through the layout\nengine. The problem is that PNG is a format consisting of chunks. The \"pHYs\"\nchunk with the resolution info is optional any doesn't have to be near the\nbeginning of the file so it's not so easy to just extend PNGReader.\n\nI'll have to think about how best to implement this, especially in the light of\nthe image library redesign where I'd like to avoid decoding the whole image just\nto get the resolution. Therefore I'm keeping this issue open. One way or the\nother, we need to fix this before the next release, because the bug fixes one\nthing but essentially breaks another."}, {"count": 4, "attachment_id": null, "creator": "jeremias@apache.org", "text": "As I suspected, the resolution handling got broken that way because PNGReader\ncan't parse the resolution from the PNG. Adding that is not trivial since it's\nnot clear how many bytes have to be read until the pHYs chunk is found. If it's\nmore than 2048 bytes into the file (generally possible due to metadata and\nbecause the order of the chunks is not fixed) the code will break because\nBufferedInputStream.reset() will cause an exception.\n\nAfter trying three different directions, I decided to revert the patch and\ninstead change RTFHandler so it consumes the decoded PNG image and reencodes it\nas a new PNG for RTF output. The nice side-effect is that supporting GIFs is\nthen very easy. This is obviously inefficient and only a temporary measure until\nthe image package is redesigned and those problems will be solved.\n\nhttp://svn.apache.org/viewvc?view=rev&rev=504511", "id": 99056, "time": "2007-02-07T04:55:48Z", "bug_id": 41488, "creation_time": "2007-02-07T04:55:48Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "creator": "gadams@apache.org", "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 156073, "time": "2012-04-01T06:56:45Z", "bug_id": 41488, "creation_time": "2012-04-01T06:56:45Z", "is_private": false, "attachment_id": null}]