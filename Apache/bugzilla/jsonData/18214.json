[{"count": 0, "tags": [], "bug_id": 18214, "attachment_id": null, "text": "On line 293 of org.apache.tools.ant.taskdefs.Replace, the total length of the\nfile is always passed into the read method of the BufferedReader.  That works\nfine if the underlying read implementation manages to read the whole file at\nonce, but you get an IndexOutOfBoundsException if it takes multiple reads to get\nall contents of the file.  I think the solution is to pass in fileLength -\ntotread as the third argument to the read method, but there might be an off by\none error with that (I'm not sure).  That solutions seems to work for me.\n\nNote that I found this bug in the source for version 1.3 of Ant.  I do not know\nif it exists in later versions.\n\nAlso, this is fairly hard to reproduce (except on my machine), since it is\ndependent on a lot of underlying VM/OS/hardware stuff.", "id": 33582, "time": "2003-03-21T03:41:37Z", "creator": "dscholn@yahoo.com", "creation_time": "2003-03-21T03:41:37Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "dscholn@yahoo.com", "is_private": false, "count": 1, "id": 33583, "time": "2003-03-21T03:43:29Z", "bug_id": 18214, "creation_time": "2003-03-21T03:43:29Z", "text": "I should have noted the following in the orignal bug comments:\n\nI am running Redhat Linux 8.0 for x86.  I have reproduced this bug using three VMs:\n\nSun 1.3.1_07\nSun 1.4.1_02\nIBM 1.4.0"}, {"count": 2, "tags": [], "bug_id": 18214, "text": "Hmm, this here\n<http://cvs.apache.org/viewcvs/ant/src/main/org/apache/tools/ant/taskdefs/Replace.java.diff?r1=1.12&r2=1.13>\nlooks as if it was the fix to your problem.\n\nI'll mark this as fixed (in Ant 1.4, BTW) and ask you to simply try a later version\nof Ant.", "id": 33591, "time": "2003-03-21T07:19:30Z", "creator": "bodewig@apache.org", "creation_time": "2003-03-21T07:19:30Z", "is_private": false, "attachment_id": null}]