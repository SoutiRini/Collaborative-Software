[{"text": "Apache should not report that it has stopped if not all the child processes have\nstopped.  The effect of this is restart and graceful restart are completely\nuseless (especially in automated scripts) because it attempts to start and\nthinks it is still running so does not start at all.  Further documentation of\nthis bug can be found at: \n\nhttp://bugs.gentoo.org/show_bug.cgi?id=110556 \n\n\nemerge -pv www-servers/apache:\n\n[ebuild   R   ] www-servers/apache-2.2.8  USE=\"ldap ssl suexec threads -debug\n-doc (-selinux) -sni -static\" APACHE2_MODULES=\"actions alias auth_basic\nauth_digest authn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm\nauthz_default authz_groupfile authz_host authz_owner authz_user autoindex cache\ndav dav_fs dav_lock dbd deflate dir disk_cache env expires ext_filter\nfile_cache filter headers ident imagemap include info log_config logio\nmem_cache mime mime_magic negotiation proxy proxy_ajp proxy_balancer\nproxy_connect proxy_http rewrite setenvif speling status unique_id userdir\nusertrack vhost_alias -asis -authn_alias -cern_meta -charset_lite -dumpio\n-log_forensic -proxy_ftp -version\" APACHE2_MPMS=\"-event -itk -peruser -prefork\n-worker\" 0 kB\n\nemerge --info:\n\nPortage 2.1.4.4 (default-linux/x86/2007.0, gcc-4.1.2, glibc-2.6.1-r0,\n2.6.24-gentoo-r2 i686)\n=================================================================\nSystem uname: 2.6.24-gentoo-r2 i686 Genuine Intel(R) CPU T2300 @ 1.66GHz\nTimestamp of tree: Fri, 15 Feb 2008 14:16:01 +0000\nccache version 2.4 [disabled]\napp-shells/bash:     3.2_p17-r1\ndev-java/java-config: 1.3.7, 2.1.4\ndev-lang/python:     2.4.4-r6\ndev-python/pycrypto: 2.0.1-r6\ndev-util/ccache:     2.4-r7\nsys-apps/baselayout: 1.12.10-r5\nsys-apps/sandbox:    1.2.18.1-r2\nsys-devel/autoconf:  2.13, 2.61-r1\nsys-devel/automake:  1.4_p6, 1.5, 1.6.3, 1.7.9-r1, 1.8.5-r3, 1.9.6-r2, 1.10\nsys-devel/binutils:  2.18-r1\nsys-devel/gcc-config: 1.4.0-r4\nsys-devel/libtool:   1.5.24\nvirtual/os-headers:  2.6.23-r3\nACCEPT_KEYWORDS=\"x86\"\nCBUILD=\"i686-pc-linux-gnu\"\nCFLAGS=\"-march=prescott -O2 -pipe -fomit-frame-pointer\"\nCHOST=\"i686-pc-linux-gnu\"\nCONFIG_PROTECT=\"/etc /usr/kde/3.5/env /usr/kde/3.5/share/config\n/usr/kde/3.5/shutdown /usr/share/config\"\nCONFIG_PROTECT_MASK=\"/etc/env.d /etc/env.d/java/ /etc/fonts/fonts.conf\n/etc/gconf /etc/php/apache2-php5/ext-active/ /etc/php/cgi-php5/ext-active/\n/etc/php/cli-php5/ext-active/ /etc/revdep-rebuild /etc/terminfo\n/etc/udev/rules.d\"\nCXXFLAGS=\"-march=prescott -O2 -pipe -fomit-frame-pointer\"\nDISTDIR=\"/usr/portage/distfiles\"\nFEATURES=\"distlocks metadata-transfer parallel-fetch sandbox sfperms strict\nunmerge-orphans userfetch\"\nGENTOO_MIRRORS=\"http://portage.home http://prometheus.cs.wmich.edu/gentoo\nhttp://mirror.phy.olemiss.edu/mirror/gentoo\nhttp://gentoo.cites.uiuc.edu/pub/gentoo/\nhttp://mirror.utdlug.org/linux/distributions/gentoo/ \"\nLANG=\"en_US.UTF-8\"\nLC_ALL=\"en_US.UTF-8\"\nLINGUAS=\"en ru\"\nMAKEOPTS=\"-j6\"\nPKGDIR=\"/usr/portage/packages\"\nPORTAGE_RSYNC_OPTS=\"--recursive --links --safe-links --perms --times --compress\n--force --whole-file --delete --stats --timeout=180 --exclude=/distfiles\n--exclude=/local --exclude=/packages\"\nPORTAGE_TMPDIR=\"/var/tmp/portage\"\nPORTDIR=\"/usr/portage\"\nPORTDIR_OVERLAY=\"/usr/portage/local/layman/sajinet /usr/local/portage\"\nSYNC=\"rsync://rsync.namerica.gentoo.org/gentoo-portage\"\nUSE=\"X a52 aac acl acpi adns alsa apache2 audiofile avi bcmath bdf berkdb\nbitmap-fonts bzip2 calendar caps cddb cdparanoia cdr cjk clamav cli\ncpudetection cracklib crypt ctype cups curl curlwrappers dbus directfb dri dts\ndvb dvd dvdnav dvdread encode exif fbcon ffmpeg flac foomaticdb fortran ftp gd\ngdbm gif glib gmp gnutls gpm gtk gtk2 hal hash iconv imagemagick imap imlib\ninnodb ipv6 isdnlog java javascript jpeg jpeg2k json kde kson lcms ldap\nldap-sasl live logrotate lzo mad matroska mcal mhash midi mime mjpeg mmap mmx\nmmxext mng mp2 mp3 mp4 mpeg msession msn mssql mudflap mysql mysqli ncurses\nnetwork nls nptl nptlonly nsplugin nss nvidia offensive ogg openal opengl\nopenmp osc oss pam pch pcntl pcre pdf pdo perl php png posix ppds pppd python\nqt3 qt3support qt4 quicktime readline reflection rtc samba sasl sdl seamonkey\nsession simplexml snmp soap sockets spell spl sqlite sse ssl subversion suexec\nsvg tcpd theora threads tidy tiff tokenizer transcode truetype truetype-fonts\ntype1-fonts unicode usb v4l v4l2 vcd vorbis wddx win32codecs wxwindows x264 x86\nxforms xine xml xorg xpm xv xvid zip zlib\" ALSA_CARDS=\"hda-intel\"\nALSA_PCM_PLUGINS=\"adpcm alaw asym copy dmix dshare dsnoop empty extplug file\nhooks iec958 ioplug ladspa lfloat linear meter mulaw multi null plug rate route\nshare shm softvol\" APACHE2_MODULES=\"actions alias auth_basic auth_digest\nauthn_anon authn_dbd authn_dbm authn_default authn_file authz_dbm authz_default\nauthz_groupfile authz_host authz_owner authz_user autoindex cache dav dav_fs\ndav_lock dbd deflate dir disk_cache env expires ext_filter file_cache filter\nheaders ident imagemap include info log_config logio mem_cache mime mime_magic\nnegotiation proxy proxy_ajp proxy_balancer proxy_connect proxy_http rewrite\nsetenvif so speling status unique_id userdir usertrack vhost_alias\"\nELIBC=\"glibc\" INPUT_DEVICES=\"keyboard mouse\" KERNEL=\"linux\" LCD_DEVICES=\"bayrad\ncfontz cfontz633 glk hd44780 lb216 lcdm001 mtxorb ncurses text\" LINGUAS=\"en ru\"\nUSERLAND=\"GNU\" VIDEO_CARDS=\"i810 fbdev vesa\"\nUnset:  CPPFLAGS, CTARGET, EMERGE_DEFAULT_OPTS, INSTALL_MASK, LDFLAGS,\nPORTAGE_COMPRESS, PORTAGE_COMPRESS_FLAGS, PORTAGE_RSYNC_EXTRA_OPTS", "tags": [], "bug_id": 44433, "attachment_id": null, "count": 0, "id": 113801, "time": "2008-02-15T12:04:39Z", "creator": "mattsch@gmail.com", "creation_time": "2008-02-15T12:04:39Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 44433, "attachment_id": null, "id": 114169, "time": "2008-03-02T03:56:30Z", "creator": "brooklinetom@gmail.com", "creation_time": "2008-03-02T03:56:30Z", "is_private": false, "text": "This bug breaks logrotate. The result is that I have to manually restart the httpd service each time it tries to rotate the logs. This is a BAD thing.\n\nWhile the bug is pending, some sort of work-around would be helpful.\n"}, {"count": 2, "tags": [], "creator": "jakub@gentoo.org", "attachment_id": null, "text": "To illustrate the scope of the problem, distros are resorting to absolutely disgusting hacks in their init scripts, Debian being one of examples:\n\nhttp://svn.debian.org/viewsvn/pkg-apache/trunk/apache2/apache2.2-common.apache2.init?rev=613&view=markup\nhttp://bugs.debian.org/cgi-bin/bugreport.cgi?bug=445263\n\nSuch stuff is plain not maintainable, we refuse to do same things on Gentoo and getting flamed by users because of this. :(\n\n", "id": 114857, "time": "2008-03-22T04:32:26Z", "bug_id": 44433, "creation_time": "2008-03-22T04:32:26Z", "is_private": false}, {"text": "Hello? Hello? Is this thing working? Testing 1, 2, 3...\n\nIt doesn't sound it like this was touched in the 2.3.9 release -- it's still a problem.\n\nThe workarounds are still ugly ...\n", "tags": [], "bug_id": 44433, "attachment_id": null, "count": 3, "id": 120897, "time": "2008-09-23T16:42:53Z", "creator": "brooklinetom@gmail.com", "creation_time": "2008-09-23T16:42:53Z", "is_private": false}, {"count": 4, "tags": [], "text": "\"distros are resorting to absolutely disgusting hacks in their init scripts\"\n\nheaven forbid they offer patches to *solve* the bug.\n\n\"Hello? Hello? Is this thing working? Testing 1, 2, 3...\"\n\nNo; this thing is for reporting flaws in the httpd source code distributed\nby the ASF.  If you have a problem with a vendor, complain to the vendor.\nIf you have a solution to some source code flaw, identify the flaw, reopen\nthis bug with an attached patch.\n", "is_private": false, "id": 120903, "creator": "wrowe@apache.org", "time": "2008-09-23T21:02:12Z", "bug_id": 44433, "creation_time": "2008-09-23T21:02:12Z", "attachment_id": null}]