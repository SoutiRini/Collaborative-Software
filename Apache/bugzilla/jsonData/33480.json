[{"count": 0, "tags": [], "bug_id": 33480, "text": "If I run my ant script manually, no problems, but if I schedule it to run via\nthe Windows 'at' command, I get the error:\n\n  [vssget] No VSS database (srcsafe.ini) found. Use the\n  SSDIR environment variable or run netsetup.\n  BUILD FAILED\n\nI was unable to find the solution on the net, so (sigh) I had to debug it\nmyself.  If you could add a hint in the ant doc, I am sure others would\nappreciate it.\n\nThe Reason Why\n--------------\nIf the VSS database is on a remote machine, the ant process needs to access\nnetwork resources.  If you run the script manually, ant (like any other Windows\nuser process) uses your creds to access the network.  But depending on how you\nschedule the job to run, Windows will prevent the ant script from accessing\nnetwork resources.\n\nHow To Fix It\n-------------\nThere's a number of ways.  One way is to add something like this to the ant script:\n\n  <property name=\"vss.share\" value=\"\\\\serverName\\shareName\"/>\n  <property name=\"netcmd.user\"  value=\"domain\\foo\"/>\n  <property name=\"netcmd.pass\"  value=\"bar\"/>\n\n  <target name=\"init\">\n\n    <!-- Get rid of old share, if any.  Tolerate share not being there -->\n    <exec dir=\"${basedir}\" executable=\"cmd.exe\" failonerror=\"false\">\n      <arg line=\"/c net use ${vss.share} /delete\"/>\n    </exec>\n\n    <!-- Map new share -->\n    <exec dir=\"${basedir}\" executable=\"cmd.exe\" failonerror=\"true\">\n      <arg line=\"/c net use ${vss.share} ${netcmd.pass} /U:${netcmd.user}\"/>\n    </exec>\n\n  </target>\n\n  <target name=\"allDone\">\n    <!-- Get rid of old share, if any -->\n    <exec dir=\"${basedir}\" executable=\"cmd.exe\" failonerror=\"true\">\n      <arg line=\"/c net use ${vss.share} /delete\"/>\n    </exec>\n  </target>\n\nAs a minimum, it'd be nice if the doc just noted if you try to run an ant script\nas a background job (hint: daily builds), make sure the process has the ability\nto access network resources, or you'll get the error mentioned above.", "id": 70724, "time": "2005-02-10T01:44:31Z", "creator": "apache_bugzilla@mcnelly.org", "creation_time": "2005-02-10T01:44:31Z", "is_private": false, "attachment_id": null}]