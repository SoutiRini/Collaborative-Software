[{"count": 0, "tags": [], "bug_id": 36118, "attachment_id": null, "text": "This is a php-related bug, but the bug exists only when using the windows\nbinaries for php as a module (phpXapacheX.dll), and so is approriate to report\nhere. It is only reproducable when running php (regardless version) as a module\non apache (regardless version) on Windows (all versions). There is a good chance\nthis being a combined Apache and PHP-issue. As so, I have filed this report here\nand can refer to the report: http://bugs.php.net/bug.php?id=26771\n\nReproduce:\nLoad either of php4apache.dll php4apache2.dll php5apache.dll php5apache2.dll\nRun a php-sript with the following:\n<?\nregister_tick_function(any parameters);\ndeclare(ticks=1);\n?>\n\nThis crashes Apache.exe with the Windows error-report dialogue coming up. No\noutput is made to either error.log or access.log. All there is is an event in\nsystem log \"Application error Apache.exe at address x00000000\". \n\nWhen running on WinXP Pro, PHP 5.0.4, Apache 2.0.54 (latest stable at this\ntime), one will have to Stop and then start the apache-service in order to be\nable to use the webserver again. \n\nSystems reported having this problem through php bugs pages:\nWindows Unspec. - PHP 4.3.6 - Apache Unspec.\nWindows 2000    - PHP 4.0.6 - Apache 1.3.20\nWindows 2000    - PHP 4.1.1 - Apache 1.3.22\nWindows 2000    - PHP 4.2.3 - Apache 1.3.22\nWindows XP Pro  - PHP 4.2.2 - Apache Unspec.\nWindows Unspec. - PHP 4.2.4-dev - Apache Unspec.\nWindows 2000    - PHP 4.2.1 - Apache 1.3.24\nWindows Unspec. - PHP 4.3.4 - Apache 2.0.48\nWindows 2000    - PHP 4.2.2 - Apache 1.3.22\nWindows 2000    - PHP 4.2.3 - Apache 1.3.22\nWindows 2000    - PHP 4.4.0-dev - Apache 1.3.22\nWindows 2000    - PHP 4.4.0-dev - Apache 2.0.43\nWindows XP      - PHP 5.0.0b3  - Apache 2.0.48\nWindows Unspec. - PHP 5.0.0 - Apache 1.3.31\nWindows XP Pro  - PHP 5.0.4 - Apache 2.0.50\nWindows XP Pro  - PHP 5.0.4 - Apache 2.0.54 (The latest stable versions\nas of this comment)\n\nVariant:\nWindows 2000 - PHP 4.0.6 - Apache 1.3.22 - No crash, but internal server\nerror\n\nApache log when crashing:\n\n[Sat Jan 03 01:11:04 2004] [notice] Parent: child process exited with\nstatus 3221225477 -- Restarting.\n[Sat Jan 03 01:11:04 2004] [notice] Parent: Created child process 3036\n[Sat Jan 03 01:11:04 2004] [notice] Child 3036: Child process is\nrunning\n[Sat Jan 03 01:11:04 2004] [notice] Child 3036: Acquired the start\nmutex.\n[Sat Jan 03 01:11:04 2004] [notice] Child 3036: Starting 250 worker\nthreads.\n\nThe Windows XP wants to send to Microsoft includes the following:\n\n<?xml version=\"1.0\" encoding=\"UTF-16\"?>\n<DATABASE>\n<EXE NAME=\"Apache.exe\" FILTER=\"GRABMI_FILTER_PRIVACY\">\n    <MATCHING_FILE NAME=\"Apache.exe\" SIZE=\"20545\" CHECKSUM=\"0xD47235F3\"\nMODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0x0\" LINKER_VERSION=\"0x0\"\nLINK_DATE=\"05/11/2004 17:03:35\" UPTO_LINK_DATE=\"05/11/2004 17:03:35\" />\n    <MATCHING_FILE NAME=\"ApacheCore.dll\" SIZE=\"331845\"\nCHECKSUM=\"0x59DF3602\" MODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0x0\"\nLINKER_VERSION=\"0x0\" LINK_DATE=\"05/11/2004 17:03:34\"\nUPTO_LINK_DATE=\"05/11/2004 17:03:34\" />\n    <MATCHING_FILE NAME=\"Win9xConHook.dll\" SIZE=\"20560\"\nCHECKSUM=\"0x252AB831\" MODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0x0\"\nLINKER_VERSION=\"0x0\" LINK_DATE=\"05/11/2004 17:02:44\"\nUPTO_LINK_DATE=\"05/11/2004 17:02:44\" />\n    <MATCHING_FILE NAME=\"xmlparse.dll\" SIZE=\"36946\"\nCHECKSUM=\"0xE27B203F\" MODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0x0\"\nLINKER_VERSION=\"0x0\" LINK_DATE=\"05/11/2004 17:03:08\"\nUPTO_LINK_DATE=\"05/11/2004 17:03:08\" />\n    <MATCHING_FILE NAME=\"xmltok.dll\" SIZE=\"73808\" CHECKSUM=\"0x2B9F157F\"\nMODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0x0\" LINKER_VERSION=\"0x0\"\nLINK_DATE=\"05/11/2004 17:03:07\" UPTO_LINK_DATE=\"05/11/2004 17:03:07\" />\n    <MATCHING_FILE NAME=\"bin\\htdigest.exe\" SIZE=\"20555\"\nCHECKSUM=\"0x3EE134D3\" MODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0x0\"\nLINKER_VERSION=\"0x0\" LINK_DATE=\"05/11/2004 17:03:02\"\nUPTO_LINK_DATE=\"05/11/2004 17:03:02\" />\n    <MATCHING_FILE NAME=\"bin\\htpasswd.exe\" SIZE=\"36939\"\nCHECKSUM=\"0xD7F4A01C\" MODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0x0\"\nLINKER_VERSION=\"0x0\" LINK_DATE=\"05/11/2004 17:03:01\"\nUPTO_LINK_DATE=\"05/11/2004 17:03:01\" />\n    <MATCHING_FILE NAME=\"bin\\logresolve.exe\" SIZE=\"16461\"\nCHECKSUM=\"0xCEEDE9C6\" MODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0x0\"\nLINKER_VERSION=\"0x0\" LINK_DATE=\"05/11/2004 17:03:02\"\nUPTO_LINK_DATE=\"05/11/2004 17:03:02\" />\n    <MATCHING_FILE NAME=\"bin\\rotatelogs.exe\" SIZE=\"24653\"\nCHECKSUM=\"0x90CD346A\" MODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0x0\"\nLINKER_VERSION=\"0x0\" LINK_DATE=\"05/11/2004 17:03:05\"\nUPTO_LINK_DATE=\"05/11/2004 17:03:05\" />\n</EXE>\n<EXE NAME=\"kernel32.dll\" FILTER=\"GRABMI_FILTER_THISFILEONLY\">\n    <MATCHING_FILE NAME=\"kernel32.dll\" SIZE=\"930304\"\nCHECKSUM=\"0xCBCCF8A9\" BIN_FILE_VERSION=\"5.1.2600.1106\"\nBIN_PRODUCT_VERSION=\"5.1.2600.1106\" PRODUCT_VERSION=\"5.1.2600.1106\"\nFILE_DESCRIPTION=\"Windows NT BASE API Client DLL\"\nCOMPANY_NAME=\"Microsoft Corporation\" PRODUCT_NAME=\"Microsoft\u00ae Windows\u00ae\nOperating System\" FILE_VERSION=\"5.1.2600.1106 (xpsp1.020828-1920)\"\nORIGINAL_FILENAME=\"kernel32\" INTERNAL_NAME=\"kernel32\"\nLEGAL_COPYRIGHT=\"\u00a9\nMicrosoft Corporation. All rights reserved.\" VERFILEDATEHI=\"0x0\"\nVERFILEDATELO=\"0x0\" VERFILEOS=\"0x40004\" VERFILETYPE=\"0x2\"\nMODULE_TYPE=\"WIN32\" PE_CHECKSUM=\"0xE7ED3\" LINKER_VERSION=\"0x50001\"\nUPTO_BIN_FILE_VERSION=\"5.1.2600.1106\"\nUPTO_BIN_PRODUCT_VERSION=\"5.1.2600.1106\" LINK_DATE=\"08/29/2002\n10:40:40\"\nUPTO_LINK_DATE=\"08/29/2002 10:40:40\" VER_LANGUAGE=\"English (United\nStates) [0x409]\" />\n</EXE>\n</DATABASE>\n\nSearch keywords: ticks register_tick_function php crash module", "id": 78338, "time": "2005-08-10T14:01:44Z", "creator": "fredrik@demomusic.nu", "creation_time": "2005-08-10T14:01:44Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 78340, "time": "2005-08-10T14:19:30Z", "bug_id": 36118, "creation_time": "2005-08-10T14:19:30Z", "is_private": false, "text": "It's a PHP thread-safety issue, it's not Windows-specific, it breaks on Unixes\nwith threaded MPMs too."}, {"count": 2, "attachment_id": null, "creator": "fredrik@demomusic.nu", "is_private": false, "id": 78346, "time": "2005-08-10T14:56:11Z", "bug_id": 36118, "creation_time": "2005-08-10T14:56:11Z", "tags": [], "text": "Correct me from wrong, but is not Apache 1.3 NOT a MPM? At least it isn't\nthreaded, is this not required by the definition of MPM?\n\nNot to into the subject of MPM's. \n\nShould I file two different bug-reports? One for Apache 2.0 and one for Apache 1.3?"}, {"count": 3, "tags": [], "text": "It's an issue with PHP, not with Apache, please don't open (or reopen!) any bugs\nat all at apache.org for this.", "attachment_id": null, "id": 78349, "creator": "jorton@redhat.com", "time": "2005-08-10T15:19:48Z", "bug_id": 36118, "creation_time": "2005-08-10T15:19:48Z", "is_private": false}, {"count": 4, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "id": 78353, "time": "2005-08-10T16:03:24Z", "bug_id": 36118, "creation_time": "2005-08-10T16:03:24Z", "is_private": false, "text": "FYI, we forgive your confusion;\n\n  \"Application error Apache.exe at address x00000000\"\n\nmight look like Apache, but notice the address.  Yes; it's php itself\njumping into nowhere.  PHP has platform bugs just like Apache, please\ndon't blame us because there is a Windows-specific bug, any more than\nyou would waste Microsoft's time with this.\n"}, {"count": 5, "tags": [], "text": "That explains it well enough for me to aim this bug-report wholly to the\nphp-side. Thank you!\n\nAt least you will not be bothered with this, for us users confusing, bug at\napache.org, as a search on this matter will lead people here and then redirect\nthem to the correct place for this matter: http://bugs.php.net/bug.php?id=26771", "is_private": false, "bug_id": 36118, "id": 78374, "time": "2005-08-10T19:51:03Z", "creator": "fredrik@demomusic.nu", "creation_time": "2005-08-10T19:51:03Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 36118, "attachment_id": null, "text": "On request, I have posted a comment on work-arounds on this issue at\nhttp://bugs.php.net/bug.php?id=26771\n\nCheers!", "id": 88222, "time": "2006-04-18T19:37:47Z", "creator": "fredrik@demomusic.nu", "creation_time": "2006-04-18T19:37:47Z", "is_private": false}]