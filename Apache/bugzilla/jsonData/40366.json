[{"count": 0, "tags": [], "creator": "apache-bugzilla@deuxchevaux.org", "text": "The sections \"How the sections are merged\" at\nhttp://httpd.apache.org/docs/1.3/sections.html,\nhttp://httpd.apache.org/docs/2.2/sections.html#mergin and\nhttp://httpd.apache.org/docs/2.3/sections.html#mergin describe in which order\nApache parses sections, but they do not mention at all, if the first match or\nthe last match is relevant, or if the restrictions of the matching sections are\nsomehow \"merged\" together.\n\nThe text\n\n\"Apart from <Directory>, each group is processed in the order that they appear\nin the configuration files. So for example, <Directory /var/web/dir> will be\nprocessed before <Directory /var/web/dir/subdir>. If multiple <Directory>\nsections apply to the same directory they are processed in the configuration\nfile order.\"\n\nshould be expanded to something like this:\n\n\"Apart from <Directory>, each group is processed in the order that they appear\nin the configuration files and the last matching section of a group is the one\nbeing used. If multiple <Directory> sections apply to the same directory they\nare processed in the configuration file order and the last matching section will\nbe used. \n\nExamples:\n\n<Directory /var/web/dir>\n  Order allow,deny\n  Allow from all\n</Directory>\n\n<Directory /var/web/dir/subdir>\n  Order allow,deny\n  Deny from all\n</Directory>\n\nwill deny access to e.g. the directory /var/web/dir/subdir/subsubdir for all, as\nwill\n\n<Directory /var/web/dir/subdir>\n  Order allow,deny\n  Deny from all\n</Directory>\n\n<Directory /var/web/dir>\n  Order allow,deny\n  Allow from all\n</Directory>\n\ndo. But while\n\n<Location /dir>\n  Order allow,deny\n  Allow from all\n</Location>\n\n<Location /dir/subdir>\n  Order allow,deny\n  Allow from all\n</Location>\n\nwill also deny access to the location /dir/subdir/subsubdir,\n\n<Location /dir/subdir>\n  Order allow,deny\n  Allow from all\n</Location>\n\n<Location /dir>\n  Order allow,deny\n  Allow from all\n</Location>\n\nwill allow access  to the location /dir/subdir/subsubdir since the last match is\nthe relevant one.\"\n\nAt least it should be noted that everywhere where the \"processed in the order\nthat they appear in the configuration files\" clause appears in regard of\nsections, \"last match wins\" is meant. Without this information the above\nmentioned clause can easily be interpreted the wrong way round, namely as \"first\nmatch wins\" (as for example it's the case with Redirects and Aliases).", "id": 92741, "time": "2006-08-30T16:43:36Z", "bug_id": 40366, "creation_time": "2006-08-30T16:43:36Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 40366, "attachment_id": null, "text": "You seem to have missed the separate paragraph that says \"Later sections\noverride earlier ones.\"\n\nCertainly this whole section could be rewritten to be clearer.  (It is largely\nunchanged since it was originally written.)  But I don't think your suggestion\nis  a big improvement.  It is not accurate that \"the last matching section will\nbe used\", since sections are often merged together, with both applying.  (It\ndepends on the specifics of the config directives involved.)\n\n", "id": 92754, "time": "2006-08-30T20:15:06Z", "creator": "slive@apache.org", "creation_time": "2006-08-30T20:15:06Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 40366, "attachment_id": null, "text": "You're right, I seem to have overseen that later paragraph. Thanks for pointing\nit out.", "id": 92759, "time": "2006-08-30T22:11:47Z", "creator": "apache-bugzilla@deuxchevaux.org", "creation_time": "2006-08-30T22:11:47Z", "is_private": false}]