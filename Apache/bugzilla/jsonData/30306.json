[{"count": 0, "tags": [], "bug_id": 30306, "text": "The source of org.apache.jasper.servlet.JasperLoader contains abug around line#\n179 where it says:\n\nif (System.getSecurityManager() != null) {\n\nwhere it should be:\n\nif (securityManager != null) {\n\nin rare occasions (thay actually do happen!) the instance variable\nsecurityManager is NULL when the class is instantiated, but when a class is\nloaded through this classloader and somehow the System.getSecurityManager() is\nset, an NPE is thrown (wrapped in a java.security.PriveligedActionException).\n\nCould you patch this please for a Tomcat 4.1.31 release? ;-)\n\nI don't know what exactly triggered this bug - basically, that\nSystem.getSecurityManager() is null initially and gets an assignment later. The\nTomcat5 (Jasper2) version does not have this bug, and has this very patch applied.\nWe have a JSP with a JSTL forEach tag, and nested in that tag another (custom)\ntag. When the JSP is executed in the JVM (after it is successfully compiled) the\nNPE is thrown while executing (preparing, actually) the forEach tag.\n\nWe found a workaround by executing our custom tag before the forEach body in\nHTML comment ;-) which seemed to solve the problem. Patching Jasper works\nbetter, of course, but my co-workers don't want a custom patched Tomcat for a\nwebapp to work :-(\n\nThanks in advance for patching Jasper!\n\nBart Guijt", "id": 61081, "time": "2004-07-24T14:12:32Z", "creator": "bguijt@hotmail.com", "creation_time": "2004-07-24T14:12:32Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Fixed in CVS but there is unlikely to be a 4.1.31 release any time soon.", "id": 61108, "time": "2004-07-25T21:04:06Z", "bug_id": 30306, "creation_time": "2004-07-25T21:04:06Z", "is_private": false}]