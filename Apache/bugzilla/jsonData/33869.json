[{"count": 0, "tags": [], "bug_id": 33869, "attachment_id": null, "text": "when I try to deploy blojsom, or jetspeed, on tomcat-5.0.28, I get a strange\nerror about not being able to find some log4j classes.\n\nIt amounts to a classloader problem:\n\nhttp://cvs.apache.org/viewcvs.cgi/jakarta-tomcat-catalina/catalina/src/bin/catalina.sh?rev=1.19&view=markup\n\ncatalina.sh uses \nCLASSPATH=\"$CLASSPATH\":\"$CATALINA_HOME\"/bin/bootstrap.jar:\"$CATALINA_HOME\"/bin/commons-logging-api.jar\n\nwhich means that, due to classloaders, webapps using log4j won't be able to see\nit from the commons-logging-api classes.\n\nIt happens to me with blojsom or jetspeed-2, tomcat-5.0.28 and IBM jdk 1.4.2\n\nsee:\nhttp://bugs.gentoo.org/show_bug.cgi?id=84206\n\nIt can be worked around by either adding log4j.jar to the classpath or removing\ncommons-logging-api (I imagine that the second workaround would limit logging\nuntil the bootstrap process is completed.", "id": 71876, "time": "2005-03-06T13:33:36Z", "creator": "sgala@hisitech.com", "creation_time": "2005-03-06T13:33:36Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 33869, "attachment_id": null, "text": "If you want to use log4j through commons-logging, you have to add the\ncommons-logging wrapper classes next to log4j. The classpath is actually\nconstructed using entries in the bootstrap.jar manifest.\n\nThere's no bug here. BTW, the change you mention has nothing to do with\nclassloading. I recommend you do more research, or post to mailing lists before\nopening a bug.", "id": 71896, "time": "2005-03-07T11:33:44Z", "creator": "remm@apache.org", "creation_time": "2005-03-07T11:33:44Z", "is_private": false}, {"count": 2, "tags": [], "creator": "sgala@hisitech.com", "attachment_id": null, "id": 71900, "time": "2005-03-07T13:27:22Z", "bug_id": 33869, "creation_time": "2005-03-07T13:27:22Z", "is_private": false, "text": "Sorry about the noise, Remy:\n\nI just discovered that the problem is, in fact, due to wrong positioning of the\ncommons-logging, commons-logging-api and log4j jars in the Gentoo distribution.\nThey were missing in the \"right\" ( server/lib, common/lib, shared/lib ) places.\nThey try to keep the distribution using separate packages for dependencies like\nthose. Clarifying dependencies is always a good thing, but it is still not well\nsolved in their packagins.\n\nI was too fast to open the bug. I'll keep the bug there until we solve the issues.\n\nI have unrelated issues, though, one of them being that ant refuses to copy\n.properties files encoded as ISO-8859-1 in UTF-8 filesystems during build.\nAgain, I'll research those issues before filing a bug."}]