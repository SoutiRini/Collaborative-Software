[{"count": 0, "tags": [], "bug_id": 50332, "attachment_id": 26337, "text": "Created attachment 26337\nmod_ssl -> mod_proxy note via conn_rec\n\nIn the event an SSL handshake from the httpd proxy to a backend fails, mod_proxy is not aware until it attempts to pass the request.\n\nTo duplicate, simply stand up an openssl s_server like so:\n/usr/local/openssl/bin/openssl s_server -cert /root/certs/ssl.crt -key /root/certs/ssl.key -www -accept 8001 -Verify 1\n/usr/local/openssl/bin/openssl s_server -cert /root/certs/ssl.crt -key /root/certs/ssl.key -www -accept 8002\n\nAnd set up a balancer like so:\n<Proxy balancer://mycluster>\n   BalancerMember https://127.0.0.1:8001\n   BalancerMember https://127.0.0.1:8002\n</Proxy>\n\nProxyPass /test/ balancer://mycluster/\n\n\n\nYou will find that all requests to /test will attempt to connect, but fail on the first member. Worse yet, since no request ever gets through, the balancer never considers the next member for usage.\n\nThe attached patch utilizes a note on the conn_rec for mod_proxy_httpd to recognize that a failure has occurred. If a failure has been found, it's too late for that request, but the worker used is put in error state.\n\nI am investigating as to whether or not this is needed for 2.3.", "id": 141981, "time": "2010-11-24T17:27:16Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-11-24T17:27:16Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 50332, "attachment_id": 26338, "id": 141986, "time": "2010-11-24T23:33:37Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-11-24T23:33:37Z", "is_private": false, "text": "Created attachment 26338\nFinal"}, {"count": 2, "tags": [], "bug_id": 50332, "text": "Created attachment 26339\nFinal trunk patch", "id": 141987, "time": "2010-11-24T23:33:58Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-11-24T23:33:58Z", "is_private": false, "attachment_id": 26339}, {"count": 3, "tags": [], "creator": "DRuggeri@primary.net", "attachment_id": null, "id": 141988, "time": "2010-11-24T23:35:41Z", "bug_id": 50332, "creation_time": "2010-11-24T23:35:41Z", "is_private": false, "text": "Patch to do the same on httpd-trunk is attached now."}, {"count": 4, "tags": [], "bug_id": 50332, "attachment_id": 26341, "id": 141998, "time": "2010-11-25T09:55:35Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-11-25T09:55:35Z", "is_private": false, "text": "Created attachment 26341\nAdded mod_proxy_http SSL error message"}, {"count": 5, "tags": [], "bug_id": 50332, "text": "Created attachment 26342\nAdded mod_proxy_http SSL error message (trunk)", "id": 141999, "time": "2010-11-25T09:56:18Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-11-25T09:56:18Z", "is_private": false, "attachment_id": 26342}, {"count": 6, "tags": [], "bug_id": 50332, "text": "Created attachment 26343\nAdded mod_proxy_http SSL error message (2.2.x)\n\nObsoleted the wrong patch...", "id": 142000, "time": "2010-11-25T09:57:47Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-11-25T09:57:47Z", "is_private": false, "attachment_id": 26343}, {"count": 7, "tags": [], "bug_id": 50332, "attachment_id": 26344, "text": "Created attachment 26344\nAdded mod_proxy_http SSL error message (trunk)\n\nUploaded the wrong patch", "id": 142001, "time": "2010-11-25T09:58:28Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-11-25T09:58:28Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 50332, "attachment_id": 26345, "id": 142006, "time": "2010-11-25T10:59:50Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-11-25T10:59:50Z", "is_private": false, "text": "Created attachment 26345\n2.2.x patch - using HTTP_INTERNAL_SERVER_ERROR"}, {"count": 9, "tags": [], "bug_id": 50332, "text": "Created attachment 26346\ntrunk patch - using HTTP_INTERNAL_SERVER_ERROR", "id": 142007, "time": "2010-11-25T11:00:10Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-11-25T11:00:10Z", "is_private": false, "attachment_id": 26346}, {"count": 10, "tags": [], "bug_id": 50332, "attachment_id": null, "text": "Committed as r1039304.", "id": 142036, "time": "2010-11-26T05:35:50Z", "creator": "rpluem@apache.org", "creation_time": "2010-11-26T05:35:50Z", "is_private": false}, {"count": 11, "tags": [], "text": "Created attachment 26374\n2.2.x patch - using HTTP_INTERNAL_SERVER_ERROR\n\nRemoved STATUS proposal from this patch - submitting to DEV list separately.", "is_private": false, "id": 142378, "creator": "DRuggeri@primary.net", "time": "2010-12-04T10:49:28Z", "bug_id": 50332, "creation_time": "2010-12-04T10:49:28Z", "attachment_id": 26374}, {"count": 12, "tags": [], "bug_id": 50332, "attachment_id": 26450, "text": "Created attachment 26450\nUpdated patch for 2.2.x based on r1039304 and r1053584.", "id": 142981, "time": "2010-12-29T04:52:26Z", "creator": "rpluem@apache.org", "creation_time": "2010-12-29T04:52:26Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 50332, "text": "Backported to 2.2.x as r1069773.", "id": 144181, "time": "2011-02-11T07:31:21Z", "creator": "rpluem@apache.org", "creation_time": "2011-02-11T07:31:21Z", "is_private": false, "attachment_id": null}]