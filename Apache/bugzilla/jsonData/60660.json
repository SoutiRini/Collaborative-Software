[{"count": 0, "tags": [], "bug_id": 60660, "text": "Hi guys, could be possible implement a MAX MEMORY LIMIT in each WORKER?\nfor example... if one thread/process (thread/worker/etc...) consume more than Xbytes after a request, close the worker and open a new one, it's very usefull to avoid OOM\n\nwhat i'm doing today is a php script executing this, if http apache process memory usage is bigger than X MB execute a KILL command to graceful-restart the process, this save me a lot of nights sleeping well", "id": 196528, "time": "2017-01-28T16:46:17Z", "creator": "roberto@spadim.com.br", "creation_time": "2017-01-28T16:46:17Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "roberto@spadim.com.br", "is_private": false, "count": 1, "id": 196529, "time": "2017-01-28T16:53:59Z", "bug_id": 60660, "creation_time": "2017-01-28T16:53:59Z", "text": "an example of \"bandaid\" solution:\n\nhttp://askubuntu.com/questions/403222/kill-off-apache-processes-when-memory-usage-hits-90"}, {"count": 2, "tags": [], "creator": "roberto@spadim.com.br", "attachment_id": null, "text": "others related comments about memory consume and apache\nhttps://feeding.cloud.geek.nz/posts/putting-limit-on-apache-and-php-memory/", "id": 196530, "time": "2017-01-28T16:56:33Z", "bug_id": 60660, "creation_time": "2017-01-28T16:56:33Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "h.reindl@thelounge.net", "text": "these are mostly memleaks of modules like PHP and your kill command is far away from graceful beause you interrupt the request in a hard way - in other words what you want to see and do is nothing better as OOM killer which would kill the right processes if other services like mysqld are configured with OOMScoreAdjust=-1000\n\n\"MaxRequestsPerChild 50\" would terminate each worker process *really* graceful after it handeled 50 requests and so the memleaks can't grow that far \n\nhttps://bugs.php.net/bug.php?id=73889 is one example of a memleak", "count": 3, "id": 196544, "time": "2017-01-29T12:55:14Z", "bug_id": 60660, "creation_time": "2017-01-29T12:55:14Z", "is_private": false}]