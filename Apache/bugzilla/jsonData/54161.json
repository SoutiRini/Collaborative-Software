[{"count": 0, "tags": [], "bug_id": 54161, "text": "Hi,\n\nHere is my bug/patch proposal :\n- Context : I have an application which do not respect the rules for x-www-form-urlencoded MIME-type. This application puts binary data in x-www-form-urlencoded POST data . \n- Goal : I would like to force Jmeter to use binary Sampler type for those request. \n- Current code : it is impossible as there is a specific case for x-www-form-urlencoded MIME-type\n- Proposal : \n\nIndex: src/protocol/http/org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java\n===================================================================\n--- src/protocol/http/org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java  (revision 1410831)\n+++ src/protocol/http/org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java  (working copy)\n@@ -172,7 +172,7 @@\n             // used when postData is pure xml (eg. an xml-rpc call) or for PUT\n             } else if (postData.trim().startsWith(\"<?\") || HTTPConstants.PUT.equals(sampler.getMethod())) {\n                 sampler.addNonEncodedArgument(\"\", postData, \"\");\n-            } else if (contentType == null || contentType.startsWith(HTTPConstants.APPLICATION_X_WWW_FORM_URLENCODED) ){\n+            } else if ((contentType == null || contentType.startsWith(HTTPConstants.APPLICATION_X_WWW_FORM_URLENCODED)) && (! isBinaryContent(contentType)) ){\n                 // It is the most common post request, with parameter name and values\n                 // We also assume this if no content type is present, to be most backwards compatible,\n                 // but maybe we should only parse arguments if the content type is as expected\n\n\nBest regards,\n\nEtienne Carri\u00e8re", "id": 163502, "time": "2012-11-18T06:55:20Z", "creator": "etienne.carriere@gmail.com", "creation_time": "2012-11-18T06:55:20Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 54161, "is_private": false, "text": "Applied with a change, test on binaryContent is done only if contentType != null.\n\nNote you will have to change property:\n- proxy.binary.types\nto add application/x-www-form-urlencoded in your particular case.\n\nDate: Sun Nov 18 10:06:44 2012\nNew Revision: 1410860\n\nURL: http://svn.apache.org/viewvc?rev=1410860&view=rev\nLog:\nBug 54161 - Proxy : be able to create binary sampler for x-www-form-urlencoded POST request\nBugzilla Id: 54161\n\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java\n    jmeter/trunk/xdocs/changes.xml", "id": 163504, "time": "2012-11-18T10:08:43Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-11-18T10:08:43Z", "attachment_id": null}]