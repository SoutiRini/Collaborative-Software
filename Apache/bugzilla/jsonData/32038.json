[{"text": "Our application fails with an ArrayIndexOutOfBoundsException at\nInternalOutputBuffer.java:688 (see stacktrace below).\nThe problem is a buffer that is too small (4KB - Http11Protocol.java:223) to\nhold all HTTP response headers.\n\nThe problem didn't exist in Tomcat 4.0.6.\n\nIt would be perfect if the buffer was allocated dynamically.\n\n---\njava.lang.ArrayIndexOutOfBoundsException: 4096\n\tat\norg.apache.coyote.http11.InternalOutputBuffer.write(InternalOutputBuffer.java:688)\n\tat\norg.apache.coyote.http11.InternalOutputBuffer.write(InternalOutputBuffer.java:616)\n\tat\norg.apache.coyote.http11.InternalOutputBuffer.sendHeader(InternalOutputBuffer.java:496)\n\tat\norg.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1537)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:892)\n\tat org.apache.coyote.Response.action(Response.java:180)\n\tat\norg.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:562)\n\tat org.apache.coyote.Response.doWrite(Response.java:542)\n\tat org.apache.coyote.tomcat5.OutputBuffer.realWriteBytes(OutputBuffer.java:368)\n\tat org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:294)\n\tat org.apache.tomcat.util.buf.IntermediateOutputStream.write(C2BConverter.java:230)\n...", "tags": [], "bug_id": 32038, "is_private": false, "count": 0, "id": 66342, "time": "2004-11-03T14:53:28Z", "creator": "ndurner@persis.de", "creation_time": "2004-11-03T14:53:28Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "Increase the buffer size to fit the requirements of your webapp. Be careful that\n4 KB is quite large already.\nMaking this dynamic would be overly complex for a minimal gain, so -1.", "id": 66345, "time": "2004-11-03T15:17:51Z", "bug_id": 32038, "creation_time": "2004-11-03T15:17:51Z", "is_private": false}]