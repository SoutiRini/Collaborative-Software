[{"attachment_id": null, "tags": [], "bug_id": 22990, "is_private": false, "count": 0, "id": 43838, "time": "2003-09-08T14:21:50Z", "creator": "anirkko@insel.ch", "creation_time": "2003-09-08T14:21:50Z", "text": "with\nhttpd-2.0.47.tar.gz\nusing\n./configure --prefix=/usr/local/apache2 --enable-ssl\n\nbuild fails under Sparc-Sun-Solaris2.6 when compiling\nsrclib/apr/include/arch/unix/locks/unix/thread_rwlock.c\nbecause in included file srclib/apr/include/arch/unix/apr_arch_thread_rwlock.h\ntype pthread_rwlock_t is not defined, because it is\nnot defined in #include <pthread.h> of Solaris2.6 (and possibly\nearlier, maybe also some later versions?)\n\nworkaround:\nin file apr_private.h, change\n#define HAVE_PTHREAD_RWLOCK_INIT 1\ninto\n#undef HAVE_PTHREAD_RWLOCK_INIT\nafter configure,\nand continue with 'make' which will now complete\nwith no further problems; resulting webserver also\nruns without problems under Solaris2.6 and Solaris2.9"}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "text": "HAVE_PTHREAD_RWLOCK_INIT shouldn't be defined if that function is not present in\npthread.h.  Can you attach the output and the config.log produced from running\nconfigure in srclib/apr?  (preferably from the 2.0.48 release tarball)", "id": 51142, "time": "2004-01-25T16:24:30Z", "bug_id": 22990, "creation_time": "2004-01-25T16:24:30Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "anirkko@insel.ch", "text": "Created attachment 10087\nconfig.log after configure in httpd-2.0.48/srclib/apr", "id": 51186, "time": "2004-01-26T12:08:21Z", "bug_id": 22990, "creation_time": "2004-01-26T12:08:21Z", "is_private": false, "attachment_id": 10087}, {"count": 3, "tags": [], "creator": "anirkko@insel.ch", "text": "Created attachment 10088\noutput of configure in httpd-2.0.48/srclib/apr (gzip'ped)", "id": 51187, "time": "2004-01-26T12:09:28Z", "bug_id": 22990, "creation_time": "2004-01-26T12:09:28Z", "is_private": false, "attachment_id": 10088}, {"count": 4, "tags": [], "creator": "anirkko@insel.ch", "text": "\nHave not found any pthread_rwlock_init when grep'ping\nthrough all .h files in all directories in the include path.\n\nHowever, using dump -c, have found pthread_rwlock_init\nin libpthread.so.1 \n\nMaybe I've got some Solaris patch cluster partially installed\nor something? Anyway, is it possible for configure to check\nthe pthread.h (with doesn't contain pthread_rwlock_init) instead\nof the library itself (which does contain the function - well,\nin my case, obviously)?\n\n\n", "id": 51188, "time": "2004-01-26T12:16:13Z", "bug_id": 22990, "creation_time": "2004-01-26T12:16:13Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 22990, "is_private": false, "count": 5, "id": 51189, "time": "2004-01-26T12:26:03Z", "creator": "jorton@redhat.com", "creation_time": "2004-01-26T12:26:03Z", "text": "Yes, I'd guess you probably have got a partially installed Solaris patch to get\ninto this state.  The configure script does in fact detect that it can't use the\npthread_rwlock_t type but then throws away the result."}, {"count": 6, "tags": [], "bug_id": 22990, "attachment_id": null, "text": "Fixed properly on HEAD, I'll backport it for the next 2.0 release once I've\ntested it a little more.  Thanks for the report.  Simplest workaround in the\nmean-time is to use:\n\nac_cv_func_pthread_rwlock_init=no ./configure --etc --etc\n", "id": 51194, "time": "2004-01-26T16:17:44Z", "creator": "jorton@redhat.com", "creation_time": "2004-01-26T16:17:44Z", "is_private": false}]