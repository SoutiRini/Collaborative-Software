[{"count": 0, "tags": [], "creator": "chrisl+ant@cs.cmu.edu", "attachment_id": null, "text": "If property foo is not set, no substitution is performed on the string \"${foo}\".\nThat is, if I write \"myprogram ${foo}\" and foo is not set, this string is passed\nunmodified so that \"myprogram\" sees \"${foo}\" as its argument, not an empty (or\nno) argument.\n\nWhat I'd like to be able to do is write things like \n\n      <jvmarg value=\"-DALERT_DIR='${env.ALERT_DIR}'\"/>\n\nand if env.ALERT_DIR is not set, for it to expand to an empty string. The fact\nthat ${env.ALERT_DIR} is unmodified if the variable is unset is bizarre to me,\nconsidering it's not how $-style substitution works anywhere else. Because it's\nunlike anything else, I consider it a bug, rather than an RFE.\n\nIf someone knows of a workaround, I'd appreciate it, but I can't figure one out.\nI set its severity because I couldn't figure out a workaround, but that may be\nbecause I don't know ant well enough.\n\nHere's a build.xml file that shows the problem:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<!--\nant build.xml file to show bug in property substitution\n-->\n\n  <project name=\"castellan\" default=\"compile\" basedir=\".\">\n  <target name=\"proptest\" description=\"test ant properties\">\n    <exec executable=\"echo\">\n      <arg line=\"prop='${prop}'\"/>\n    </exec>\n  </target>\n\n  <target name=\"proptest2\" description=\"test ant properties\">\n    <echo message=\"prop='${prop}'\"/>\n  </target>\n\n  </project>", "id": 37503, "time": "2003-05-20T20:28:22Z", "bug_id": 20085, "creation_time": "2003-05-20T20:28:22Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "conor@apache.org", "text": "Workaround is to set the property after the env load\n\n<property name=\"env.ALERT_DIR\" value=\"\"/>\n\nIf it has a value, this has no affect, otherwise it will be set to an empty string. \n\nIs it a bug? Maybe, but it is the way it is and changing it may be difficult\nsince some people may rely on it to catch errors. Think about\n\n<delete dir=\"/${location}\"/>\n\n:-)\n\nAnt 1.6 will probably allow you to plug in a different Property resolution\nsystem which could react differently such as to throw an exception (my\npreference) or to use an empty string, etc.", "count": 1, "id": 37509, "time": "2003-05-21T00:26:35Z", "bug_id": 20085, "creation_time": "2003-05-21T00:26:35Z", "is_private": false}, {"count": 2, "tags": [], "text": "Ok, that's a resonable workaround.  Thanks for the info.\n\nAnd I agree it might be bad to change if people are depending on it.  It still\nseems wierd to me, though.", "is_private": false, "bug_id": 20085, "id": 37548, "time": "2003-05-21T15:08:43Z", "creator": "chrisl+ant@cs.cmu.edu", "creation_time": "2003-05-21T15:08:43Z", "attachment_id": null}]