[{"count": 0, "tags": [], "bug_id": 50626, "attachment_id": 26526, "text": "Created attachment 26526\nSpeedup of adding nodes to the list end\n\nAdding a node as last child (something common in FOP) is implemented by traversing the whole list of child nodes.\n\nSo adding one node is O(n) and therefore adding n Nodes is O(n^2).\n\nCaching a pointer to last element speeds up this process to O(1), so adding n Nodes is only O(n).\n\nWhile processing an document with thousands of page sequences, adding a node to the list tail with the O(n^2) algorithm accounts for a major percentage of the FOP runtime.\n\nThe attached patch eliminates this by caching the last node.", "id": 143530, "time": "2011-01-20T17:12:46Z", "creator": "mkoegler@auto.tuwien.ac.at", "creation_time": "2011-01-20T17:12:46Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 50626, "text": "Thank you for the patch! I guess that optimization makes sense. However, I have to reject the patch in its current state. It introduces regressions in our test suite, namely with tests around markers. Please run \"ant\" (not just \"ant package\") so run the full test suite.\n\nYou can render the subset of unit tests in your IDE by running org.apache.fop.layoutengine.LayoutEngineTestSuite with the system property \"-Dfop.layoutengine.starts-with=marker\".\n\nFurthermore, please change your Java editor's settings so that no tabs are generated. Tabs are evil. ;-)", "id": 143538, "time": "2011-01-21T03:18:34Z", "creator": "jeremias@apache.org", "creation_time": "2011-01-21T03:18:34Z", "is_private": false, "attachment_id": null}, {"text": "Created attachment 26534\nNew version", "tags": [], "bug_id": 50626, "attachment_id": 26534, "count": 2, "id": 143576, "time": "2011-01-22T12:29:33Z", "creator": "mkoegler@auto.tuwien.ac.at", "creation_time": "2011-01-22T12:29:33Z", "is_private": false}, {"text": "Here is a new version: \n\nIt fixes an NullPointerException, when removing from an nearly empty child list.\nAdditionally, this time only spaces.\n\nI hope, that I have caught all regressions: \n\nThe ant output is clobered with known failures, so its difficult to see regressions there (eg. compared to the GCC testsuite).\n\nMaybe there is a better method to find regression, but I only found:\n$ diff -urN <previous test-result-directory> <new test-result-directory>\n\nThe test infrastructure includes variable data in its output (time, when the test was run, run time in ms and so on), so that this means check over 15.000 lines for important changes. I hope, that I have not missed anything.", "tags": [], "bug_id": 50626, "attachment_id": null, "count": 3, "id": 143577, "time": "2011-01-22T12:39:07Z", "creator": "mkoegler@auto.tuwien.ac.at", "creation_time": "2011-01-22T12:39:07Z", "is_private": false}, {"count": 4, "tags": [], "creator": "adelmelle@apache.org", "attachment_id": null, "id": 143580, "time": "2011-01-22T13:34:10Z", "bug_id": 50626, "creation_time": "2011-01-22T13:34:10Z", "is_private": false, "text": "(In reply to comment #3)\n> Here is a new version: \n> \n> It fixes an NullPointerException, when removing from an nearly empty child\n> list. Additionally, this time only spaces.\n\nLooks OK now, so is applied in r1062225 (http://svn.apache.org/viewvc?rev=1062225&view=rev) with a very minor style change (= we use braces around conditionals even if it's only a single statement)\n\nThanks for reporting, and again, for the patch!"}, {"count": 5, "tags": [], "bug_id": 50626, "text": "batch transition to closed; if someone wishes to restore one of these to resolved in order to perform a verification step, then feel free to do so", "id": 155496, "time": "2012-04-01T06:19:08Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:19:08Z", "is_private": false, "attachment_id": null}]