[{"count": 0, "tags": [], "creator": "Alexander_Sergey@mail.ru", "attachment_id": 34242, "id": 193668, "time": "2016-09-13T05:53:56Z", "bug_id": 60124, "creation_time": "2016-09-13T05:53:56Z", "is_private": false, "text": "Created attachment 34242\nLog file when I try to save test plan Default.jmx in my plugin repository with added element in ConnectSampler.recycler collection\n\nJMeter versions: 3.0, 3.1-SNAPSHOT.20160831\n\nI write a plug-in for JMeter and faced the strange problem when saving the my samplers\nMy plug-in: https://bitbucket.org/Mingun/jmeter-atm/, branch `cassettes`\n\nI have tow samplers with autogenerated TestBean GUI. My samplers contains collection properties with TableEditor GUI. When I save test plan with samplers with filled there properties, strange ClassCastException is generated and test plan save go to broken state (because writing XML file just ended when exception raised). See exception at end of this report (in this case I add element in `ConnectSampler.recycler` collection ant try to save test plan).\n\nMy samplers and their collection properties with problem:\n* ConnectSampler\n** recycler (contains class CashUnit)\n** acceptor (contains class CashUnit)\n** dispenser (contains class CashUnit)\n** hoppers (contains class CashUnit)\n* RequestSampler\n** cashin (contains class Deposit)\n\nWhat is stranger, so is that such problem doesn't arise with the `RequestSampler.refines` collection though it contains the class `Refine`, similar on structure, absolutely not different from the class `Deposit`, except name and names of properties.\n\nOne more strangeness is that on Windows I didn't manage to reproduce this bug, only on Ubuntu\n\nThe exception can be avoided, only if to add to the test plan a new sampler (ConnectSampler in this case) with an empty collection property and before saving the plan to select it in a tree.\n\n---------------------------------------------\n2016/09/13 10:46:09 ERROR - jmeter.gui.action.Save: Error saving tree: java.lang.ClassCastException: ru.mingun.jmeter.protocol.xdc.devices.CashUnit cannot be cast to org.apache.jmeter.testelement.property.JMeterProperty\n\tat org.apache.jmeter.testelement.property.PropertyIteratorImpl.next(PropertyIteratorImpl.java:41)\n\tat org.apache.jmeter.testelement.property.PropertyIteratorImpl.next(PropertyIteratorImpl.java:24)\n\tat org.apache.jmeter.save.converters.MultiPropertyConverter.marshal(MultiPropertyConverter.java:57)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.TestElementConverter.marshal(TestElementConverter.java:74)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:53)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:54)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:54)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:54)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat org.apache.jmeter.save.ScriptWrapperConverter.marshal(ScriptWrapperConverter.java:79)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.start(TreeMarshaller.java:82)\n\tat com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.marshal(AbstractTreeMarshallingStrategy.java:37)\n\tat com.thoughtworks.xstream.XStream.marshal(XStream.java:1043)\n\tat com.thoughtworks.xstream.XStream.marshal(XStream.java:1032)\n\tat com.thoughtworks.xstream.XStream.toXML(XStream.java:1005)\n\tat org.apache.jmeter.save.SaveService.saveTree(SaveService.java:304)\n\tat org.apache.jmeter.gui.action.Save.doAction(Save.java:225)\n\tat org.apache.jmeter.gui.action.ActionRouter.performAction(ActionRouter.java:80)\n\tat org.apache.jmeter.gui.action.ActionRouter.access$000(ActionRouter.java:40)\n\tat org.apache.jmeter.gui.action.ActionRouter$1.run(ActionRouter.java:62)\n\tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:726)\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\n\n2016/09/13 10:46:09 ERROR - jmeter.gui.action.ActionRouter: Error processing org.apache.jmeter.gui.action.Save@6d469831 java.lang.ClassCastException: ru.mingun.jmeter.protocol.xdc.devices.CashUnit cannot be cast to org.apache.jmeter.testelement.property.JMeterProperty\n\tat org.apache.jmeter.testelement.property.PropertyIteratorImpl.next(PropertyIteratorImpl.java:41)\n\tat org.apache.jmeter.testelement.property.PropertyIteratorImpl.next(PropertyIteratorImpl.java:24)\n\tat org.apache.jmeter.save.converters.MultiPropertyConverter.marshal(MultiPropertyConverter.java:57)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.TestElementConverter.marshal(TestElementConverter.java:74)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:53)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:54)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:54)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:54)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat org.apache.jmeter.save.ScriptWrapperConverter.marshal(ScriptWrapperConverter.java:79)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.start(TreeMarshaller.java:82)\n\tat com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.marshal(AbstractTreeMarshallingStrategy.java:37)\n\tat com.thoughtworks.xstream.XStream.marshal(XStream.java:1043)\n\tat com.thoughtworks.xstream.XStream.marshal(XStream.java:1032)\n\tat com.thoughtworks.xstream.XStream.toXML(XStream.java:1005)\n\tat org.apache.jmeter.save.SaveService.saveTree(SaveService.java:304)\n\tat org.apache.jmeter.gui.action.Save.doAction(Save.java:225)\n\tat org.apache.jmeter.gui.action.ActionRouter.performAction(ActionRouter.java:80)\n\tat org.apache.jmeter.gui.action.ActionRouter.access$000(ActionRouter.java:40)\n\tat org.apache.jmeter.gui.action.ActionRouter$1.run(ActionRouter.java:62)\n\tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:726)\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)"}, {"count": 1, "tags": [], "bug_id": 60124, "is_private": false, "text": "This should not be a bugzilla as it's related to custom code where we cannot help you.\nPlease ask your question on user mailing list of either JMeter or XStream project.\n\nClosing as INVALID.", "id": 193773, "time": "2016-09-17T11:44:26Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-09-17T11:44:26Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 60124, "text": "Unless it is not the bug tracker of the JMeter project? If it not here, then where? The link (http://jmeter.apache.org/issues.html) from the official site of JMeter carries here.\n\nThe bug in the JMeter code because my class differs in nothing from the similar  JMeter class `org.apache.jmeter.config.Argument`, but with this class there is no such problem for some reason. Anyway, `ClassCastException` arises in JMeter and shall be fixed, not very well what reasons lead to it. If I somehow incorrectly implemented my class, then there shall be or a compilation error (preferably) or at least a distinct message in runtime how to correct implement my class (should I implement some interface? Or add some annotation?).\n\nEarlier I said that with my class `Refine` the problem isn't reproduced. I was mistaken. The problem is reproduced always with any collections in my samplers, but for some reason only on Ubuntu. On Windows I can't reproduce it. Perhaps, a problem in various JDK. On Monday I will look what JDK is used on Ubuntu and create a small demo project with problem demonstration.\n\nOn Windows machine:\n----------------------------------------------------------------\n$ java -version\njava version \"1.8.0_101\"\nJava(TM) SE Runtime Environment (build 1.8.0_101-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 25.101-b13, mixed mode)\n----------------------------------------------------------------", "id": 193775, "time": "2016-09-17T12:47:01Z", "creator": "Alexander_Sergey@mail.ru", "creation_time": "2016-09-17T12:47:01Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "creator": "p.mouawad@ubik-ingenierie.com", "text": "(In reply to Mingun from comment #2)\n> Unless it is not the bug tracker of the JMeter project? If it not here, then\n> where? The link (http://jmeter.apache.org/issues.html) from the official\n> site of JMeter carries here.\n\n\nThe issue is happening with your custom code right ? \nThat's why I was thinking it's not a JMeter issue.\nBesides without the provided code, there's nothing we can do.\n> \n> The bug in the JMeter code because my class differs in nothing from the\n> similar  JMeter class `org.apache.jmeter.config.Argument`, but with this\n> class there is no such problem for some reason. Anyway, `ClassCastException`\n> arises in JMeter and shall be fixed, not very well what reasons lead to it.\n> If I somehow incorrectly implemented my class, then there shall be or a\n> compilation error (preferably) or at least a distinct message in runtime how\n> to correct implement my class (should I implement some interface? Or add\n> some annotation?).\n> \n> Earlier I said that with my class `Refine` the problem isn't reproduced. I\n> was mistaken. The problem is reproduced always with any collections in my\n> samplers, but for some reason only on Ubuntu. On Windows I can't reproduce\n> it. Perhaps, a problem in various JDK. On Monday I will look what JDK is\n> used on Ubuntu and create a small demo project with problem demonstration.\n\nOk in this case:\n- please provide sampler code broken\n- version of jdk\n- user.properties\n- jmeter.properties\n- saveservice.properties\n\n> \n> On Windows machine:\n> ----------------------------------------------------------------\n> $ java -version\n> java version \"1.8.0_101\"\n> Java(TM) SE Runtime Environment (build 1.8.0_101-b13)\n> Java HotSpot(TM) 64-Bit Server VM (build 25.101-b13, mixed mode)\n> ----------------------------------------------------------------", "id": 193776, "time": "2016-09-17T13:00:30Z", "bug_id": 60124, "creation_time": "2016-09-17T13:00:30Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 60124, "attachment_id": null, "is_private": false, "id": 193792, "time": "2016-09-19T05:47:41Z", "creator": "Alexander_Sergey@mail.ru", "creation_time": "2016-09-19T05:47:41Z", "text": "I reproduce bug. Conditions:\n1) at least 2 nodes (samplers) with collection properties\n2) at least one node have non-empty collection -- exception when this node is saved\n\nI create small maven project in https://bitbucket.org/Mingun/jmeter-bug to demonstrate problem. Try load and they save Plan.jmx inside it."}, {"count": 5, "tags": [], "bug_id": 60124, "attachment_id": 34267, "is_private": false, "id": 193793, "time": "2016-09-19T05:52:29Z", "creator": "Alexander_Sergey@mail.ru", "creation_time": "2016-09-19T05:52:29Z", "text": "Created attachment 34267\n<jmeter>/bin/jmeter.properties\n\nReproduce on Ubuntu 16.04:\n---------------------------------------------------------------------\n$ uname -a\nLinux ayanichkin-desktop 4.4.0-36-generic #55-Ubuntu SMP Thu Aug 11 18:01:55 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n\n$ java -version\njava version \"1.8.0_101\"\nJava(TM) SE Runtime Environment (build 1.8.0_101-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 25.101-b13, mixed mode)\n---------------------------------------------------------------------"}, {"count": 6, "tags": [], "bug_id": 60124, "is_private": false, "text": "Created attachment 34268\n<jmeter>/bin/saveservice.properties", "id": 193794, "time": "2016-09-19T05:53:01Z", "creator": "Alexander_Sergey@mail.ru", "creation_time": "2016-09-19T05:53:01Z", "attachment_id": 34268}, {"count": 7, "tags": [], "creator": "Alexander_Sergey@mail.ru", "is_private": false, "text": "Created attachment 34269\n<jmeter>/bin/user.properties", "id": 193795, "time": "2016-09-19T05:54:27Z", "bug_id": 60124, "creation_time": "2016-09-19T05:54:27Z", "attachment_id": 34269}, {"count": 8, "tags": [], "bug_id": 60124, "attachment_id": null, "text": "Hello Serguei,\nThanks for your report.\nUnfortunately we have a lot of work on Core JMeter and I am afraid I won't have time to investigate issue in custom code.\n\nFor completeness maybe you could provide the stack trace related to your github code as the one in this issue relates to code we don't have.\n\nMaybe later I can have some time but I doubt it .\nRegards", "id": 194025, "time": "2016-09-27T09:50:38Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-09-27T09:50:38Z", "is_private": false}, {"count": 9, "attachment_id": null, "bug_id": 60124, "is_private": false, "id": 194352, "time": "2016-10-12T08:40:18Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-10-12T08:40:18Z", "tags": [], "text": "Out of project scope"}, {"count": 10, "tags": [], "bug_id": 60124, "is_private": false, "id": 194374, "attachment_id": null, "creator": "Alexander_Sergey@mail.ru", "creation_time": "2016-10-12T16:49:25Z", "time": "2016-10-12T16:49:25Z", "text": "(In reply to Philippe Mouawad from comment #8)\n> Hello Serguei,\n> Thanks for your report.\n> Unfortunately we have a lot of work on Core JMeter and I am afraid I won't\n> have time to investigate issue in custom code.\n> \n> For completeness maybe you could provide the stack trace related to your\n> github code as the one in this issue relates to code we don't have.\n> \n> Maybe later I can have some time but I doubt it .\n> Regards\n\nSorry, I didn't miss this comment. You tried to reproduce a problem on the demonstration https://bitbucket.org/Mingun/jmeter-bug project? It has no dependences and gathers in any IDE having support of maven and just from command line.\n\nI attach jmeter.log when I load Plan.jmx from jmeter-bug demo project and try to save when first sapler is selected, then select second sampler and save the plan."}, {"count": 11, "tags": [], "creator": "Alexander_Sergey@mail.ru", "attachment_id": 34369, "text": "Created attachment 34369\nOpen plan.jmsx from jmeter-bug, seect first sampler, try save (2 exceptions in log), then select second sapler and save", "id": 194375, "time": "2016-10-12T16:53:03Z", "bug_id": 60124, "creation_time": "2016-10-12T16:53:03Z", "is_private": false}, {"count": 12, "attachment_id": null, "creator": "p.mouawad@ubik-ingenierie.com", "text": "(In reply to Mingun from comment #11)\n> Created attachment 34369 [details]\n> Open plan.jmsx from jmeter-bug, seect first sampler, try save (2 exceptions\n> in log), then select second sapler and save\n\nThanks Serguei for your perseverance.\nThere is indeed a bug in JMeter as I was able to reproduce issue with CompareAssertion.\n\nScenario:\n- Create a Compare Assertion and fill in a row with 2 fields\n- Create another Compare Assertion and keep it empty\n\nSelect last Compare Assertion and save => OK\nSelect first Compare Assertion and save => KO\n\n2016/10/12 22:58:16 ERROR - jmeter.gui.action.ActionRouter: Error processing org.apache.jmeter.gui.action.Save@584f54e6 java.lang.ClassCastException: org.apache.jmeter.assertions.SubstitutionElement cannot be cast to org.apache.jmeter.testelement.property.JMeterProperty\n\tat org.apache.jmeter.testelement.property.PropertyIteratorImpl.next(PropertyIteratorImpl.java:41)\n\tat org.apache.jmeter.testelement.property.PropertyIteratorImpl.next(PropertyIteratorImpl.java:24)\n\tat org.apache.jmeter.save.converters.MultiPropertyConverter.marshal(MultiPropertyConverter.java:57)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:66)\n\tat org.apache.jmeter.save.converters.TestElementConverter.marshal(TestElementConverter.java:74)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:66)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:53)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:66)\n\tat org.apache.jmeter.save.converters.HashTreeConverter.marshal(HashTreeConverter.java:54)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller$1.convertAnother(AbstractReferenceMarshaller.java:88)\n\tat org.apache.jmeter.save.ScriptWrapperConverter.marshal(ScriptWrapperConverter.java:79)\n\tat com.thoughtworks.xstream.core.AbstractReferenceMarshaller.convert(AbstractReferenceMarshaller.java:69)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\tat com.thoughtworks.xstream.core.TreeMarshaller.start(TreeMarshaller.java:82)\n\tat com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.marshal(AbstractTreeMarshallingStrategy.java:37)\n\tat com.thoughtworks.xstream.XStream.marshal(XStream.java:1067)\n\tat com.thoughtworks.xstream.XStream.marshal(XStream.java:1056)\n\tat com.thoughtworks.xstream.XStream.toXML(XStream.java:1029)\n\tat org.apache.jmeter.save.SaveService.saveTree(SaveService.java:304)\n\tat org.apache.jmeter.gui.action.Save.doAction(Save.java:225)\n\tat org.apache.jmeter.gui.action.ActionRouter.performAction(ActionRouter.java:80)\n\tat org.apache.jmeter.gui.action.ActionRouter.access$000(ActionRouter.java:40)\n\tat org.apache.jmeter.gui.action.ActionRouter$1.run(ActionRouter.java:62)\n\tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:726)\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\n\n\n\n\nI'll try to investigate.", "id": 194380, "time": "2016-10-12T21:01:42Z", "bug_id": 60124, "creation_time": "2016-10-12T21:01:42Z", "tags": [], "is_private": false}, {"count": 13, "tags": [], "bug_id": 60124, "is_private": false, "text": "This is the same issue (https://bz.apache.org/bugzilla/show_bug.cgi?id=58743) I reported one year ago.\n\nCompareAssertion provides the same issue in same kind of \"scenario saving\" situation.\n\nYesterday, users, I'm working with, have experienced once again, the same issue and have lost their jmx file content.\nData integrity is compromised by this issue.", "id": 196131, "time": "2017-01-18T09:18:48Z", "creator": "vherilier@gmail.com", "creation_time": "2017-01-18T09:18:48Z", "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 60124, "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of bug 58743 ***", "id": 196293, "time": "2017-01-22T18:40:20Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-01-22T18:40:20Z", "attachment_id": null}]