[{"count": 0, "text": "When compiling Apache 2.2.2 with gcc 4.1.0:\n\nmake[2]: Entering directory `/home/fraga/httpd-2.2.2/server'\n/usr/local/apache2/build/libtool --silent --mode=compile gcc -pthread  -O2\n-march=athlon-xp -pipe -ftree-vectorize  -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE\n-D_LARGEFILE64_SOURCE    -I/home/fraga/httpd-2.2.2/srclib/pcre -I.\n-I/home/fraga/httpd-2.2.2/os/unix -I/home/fraga/httpd-2.2.2/server/mpm/prefork\n-I/home/fraga/httpd-2.2.2/modules/http -I/home/fraga/httpd-2.2.2/modules/filters\n-I/home/fraga/httpd-2.2.2/modules/proxy -I/home/fraga/httpd-2.2.2/include\n-I/home/fraga/httpd-2.2.2/modules/generators\n-I/home/fraga/httpd-2.2.2/modules/mappers\n-I/home/fraga/httpd-2.2.2/modules/database -I/usr/local/apache2/include\n-I/usr/local/BerkeleyDB.4.3/include -I/usr/local/include\n-I/home/fraga/httpd-2.2.2/modules/proxy/../generators -I/usr/local/ssl/include\n-I/home/fraga/httpd-2.2.2/modules/ssl -I/home/fraga/httpd-2.2.2/modules/dav/main\n -prefer-non-pic -static -c exports.c && touch exports.lo\nIn file included from exports.c:73:\n/usr/local/apache2/include/apr_lock.h:83: error: redeclaration of enumerator\n'APR_LOCK_FCNTL'\n/usr/local/apache2/include/apr_proc_mutex.h:45: error: previous definition of\n'APR_LOCK_FCNTL' was here\n/usr/local/apache2/include/apr_lock.h:83: error: redeclaration of enumerator\n'APR_LOCK_FLOCK'\n/usr/local/apache2/include/apr_proc_mutex.h:46: error: previous definition of\n'APR_LOCK_FLOCK' was here\n/usr/local/apache2/include/apr_lock.h:83: error: redeclaration of enumerator\n'APR_LOCK_SYSVSEM'\n/usr/local/apache2/include/apr_proc_mutex.h:47: error: previous definition of\n'APR_LOCK_SYSVSEM' was here\n/usr/local/apache2/include/apr_lock.h:84: error: redeclaration of enumerator\n'APR_LOCK_PROC_PTHREAD'\n/usr/local/apache2/include/apr_proc_mutex.h:48: error: previous definition of\n'APR_LOCK_PROC_PTHREAD' was here\n/usr/local/apache2/include/apr_lock.h:84: error: redeclaration of enumerator\n'APR_LOCK_POSIXSEM'\n/usr/local/apache2/include/apr_proc_mutex.h:49: error: previous definition of\n'APR_LOCK_POSIXSEM' was here\n/usr/local/apache2/include/apr_lock.h:85: error: redeclaration of enumerator\n'APR_LOCK_DEFAULT'\n/usr/local/apache2/include/apr_proc_mutex.h:51: error: previous definition of\n'APR_LOCK_DEFAULT' was here\n/usr/local/apache2/include/apr_lock.h:85: error: conflicting types for\n'apr_lockmech_e'\n/usr/local/apache2/include/apr_proc_mutex.h:51: error: previous declaration of\n'apr_lockmech_e' was here\nmake[2]: *** [exports.lo] Error 1\nmake[2]: Leaving directory `/home/fraga/httpd-2.2.2/server'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/home/fraga/httpd-2.2.2/server'\nmake: *** [all-recursive] Error 1\n\nObs.: Apache 2.2.0 compiles fine.", "bug_id": 39469, "attachment_id": null, "id": 88732, "time": "2006-05-02T20:27:47Z", "creator": "fraga@abusar.org", "creation_time": "2006-05-02T20:27:47Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "text": "What's the output of:\n\n cd server\n rm export*\n make exports.lo\n\nit is picking up an old apr_lock.h from the installed include directory - but\nthat file has not been shipped in an httpd/apr release for a long time.", "attachment_id": null, "id": 88755, "creator": "jorton@redhat.com", "time": "2006-05-03T13:39:16Z", "bug_id": 39469, "creation_time": "2006-05-03T13:39:16Z", "is_private": false}, {"count": 2, "tags": [], "text": "The problem is that it's looking into the /usr/local/apache2/include directory.\nIf I remove this directory, it complains about missing APR... non sense, since\napache comes with apr. I never had to install APR separately.\n\nBelow is the requested output:\n\nfraga@abusar ~/httpd-2.2.2$ cd server/\n\nfraga@abusar ~/httpd-2.2.2/server$ rm export*\nrm: remove regular file `export_files'? y\nrm: remove regular file `exports.c'? y\nrm: remove regular file `exports.loT'? y\n\nfraga@abusar ~/httpd-2.2.2/server$ make exports.lo\ntmp=export_files_unsorted.txt; \\\n        rm -f $tmp && touch $tmp; \\\n        for dir in /home/fraga/httpd-2.2.2/include\n/home/fraga/httpd-2.2.2/os/unix /home/fraga/httpd-2.2.2/modules/http; do \\\n            ls $dir/*.h >> $tmp; \\\n        done; \\\n        for dir in /usr/local/apache2/include /usr/local/apache2/include; do \\\n            (ls $dir/ap[ru].h $dir/ap[ru]_*.h >> $tmp 2>/dev/null); \\\n        done; \\\n        sort -u $tmp > export_files; \\\n        rm -f $tmp\ngawk -f /home/fraga/httpd-2.2.2/build/make_exports.awk `cat export_files` >\nexports.c\n/usr/local/apache2/build/libtool --silent --mode=compile gcc -pthread  -O2\n-march=athlon-xp -pipe -ftree-vectorize  -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE\n-D_LARGEFILE64_SOURCE    -I/home/fraga/httpd-2.2.2/srclib/pcre -I.\n-I/home/fraga/httpd-2.2.2/os/unix -I/home/fraga/httpd-2.2.2/server/mpm/prefork\n-I/home/fraga/httpd-2.2.2/modules/http -I/home/fraga/httpd-2.2.2/modules/filters\n-I/home/fraga/httpd-2.2.2/modules/proxy -I/home/fraga/httpd-2.2.2/include\n-I/home/fraga/httpd-2.2.2/modules/generators\n-I/home/fraga/httpd-2.2.2/modules/mappers\n-I/home/fraga/httpd-2.2.2/modules/database -I/usr/local/apache2/include\n-I/usr/local/BerkeleyDB.4.3/include -I/usr/local/include\n-I/home/fraga/httpd-2.2.2/modules/proxy/../generators -I/usr/local/ssl/include\n-I/home/fraga/httpd-2.2.2/modules/ssl -I/home/fraga/httpd-2.2.2/modules/dav/main\n -prefer-non-pic -static -c exports.c && touch exports.lo\nIn file included from exports.c:73:\n/usr/local/apache2/include/apr_lock.h:83: error: redeclaration of enumerator\n'APR_LOCK_FCNTL'\n/usr/local/apache2/include/apr_proc_mutex.h:45: error: previous definition of\n'APR_LOCK_FCNTL' was here\n/usr/local/apache2/include/apr_lock.h:83: error: redeclaration of enumerator\n'APR_LOCK_FLOCK'\n/usr/local/apache2/include/apr_proc_mutex.h:46: error: previous definition of\n'APR_LOCK_FLOCK' was here\n/usr/local/apache2/include/apr_lock.h:83: error: redeclaration of enumerator\n'APR_LOCK_SYSVSEM'\n/usr/local/apache2/include/apr_proc_mutex.h:47: error: previous definition of\n'APR_LOCK_SYSVSEM' was here\n/usr/local/apache2/include/apr_lock.h:84: error: redeclaration of enumerator\n'APR_LOCK_PROC_PTHREAD'\n/usr/local/apache2/include/apr_proc_mutex.h:48: error: previous definition of\n'APR_LOCK_PROC_PTHREAD' was here\n/usr/local/apache2/include/apr_lock.h:84: error: redeclaration of enumerator\n'APR_LOCK_POSIXSEM'\n/usr/local/apache2/include/apr_proc_mutex.h:49: error: previous definition of\n'APR_LOCK_POSIXSEM' was here\n/usr/local/apache2/include/apr_lock.h:85: error: redeclaration of enumerator\n'APR_LOCK_DEFAULT'\n/usr/local/apache2/include/apr_proc_mutex.h:51: error: previous definition of\n'APR_LOCK_DEFAULT' was here\n/usr/local/apache2/include/apr_lock.h:85: error: conflicting types for\n'apr_lockmech_e'\n/usr/local/apache2/include/apr_proc_mutex.h:51: error: previous declaration of\n'apr_lockmech_e' was here\nmake: *** [exports.lo] Error 1\n", "attachment_id": null, "id": 88756, "creator": "fraga@abusar.org", "time": "2006-05-03T13:46:48Z", "bug_id": 39469, "creation_time": "2006-05-03T13:46:48Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 39469, "attachment_id": null, "is_private": false, "id": 88970, "time": "2006-05-09T19:49:35Z", "creator": "fraga@abusar.org", "creation_time": "2006-05-09T19:49:35Z", "text": "I solved the problem deleting the /usr/local/apache2/include directory, but\nafter that I had to install APR and APR-util separately (I never had to do that\nin previous versions).\n\nI can't understand what changed from 2.2.0 to 2.2.2... because 2.2.0 seems to\nhandle this alone and 2.2.2 no. \n\nAnyway, no problem, I'll keep upgrading apr and apr-util by myself."}]