[{"count": 0, "tags": [], "creator": "ebelisar@ca.ibm.com", "attachment_id": null, "is_private": false, "id": 29893, "time": "2003-01-22T16:40:23Z", "bug_id": 16336, "creation_time": "2003-01-22T16:40:23Z", "text": "CatalogResolver.resolve(String href, String base) needs to set \nEntityResolver to the resulted input source in order entities be resolved in \nthe new XML documents:\n    SAXSource source = new SAXSource();\n    source.setInputSource(new InputSource(result));\n    setEntityResolver(source);\n    return source;\n\n    /**\n     * <p>This is called from the URIResolver to set an EntityResolver\n     * on the SAX parser to be used for new XML documents that are\n     * encountered as a result of the document() function, xsl:import,\n     * or xsl:include.  This is done because the XSLT processor calls\n     * out to the SAXParserFactory itself to create a new SAXParser to\n     * parse the new document.  The new parser does not automatically\n     * inherit the EntityResolver of the original (although arguably\n     * it should).  See below:</p>\n     *\n     * <tt>\"If an application wants to set the ErrorHandler or\n     * EntityResolver for an XMLReader used during a transformation,\n     * it should use a URIResolver to return the SAXSource which\n     * provides (with getXMLReader) a reference to the XMLReader\"</tt>\n     *\n     * <p>...quoted from page 118 of the Java API for XML\n     * Processing 1.1 specification</p>\n     *\n     */\n    private void setEntityResolver(SAXSource source) throws \nTransformerException {\n\n        XMLReader reader = source.getXMLReader();\n        if (reader == null) {\n            SAXParserFactory spFactory = SAXParserFactory.newInstance();\n            spFactory.setNamespaceAware(true);\n            try {\n                reader = spFactory.newSAXParser().getXMLReader();\n            }\n            catch (ParserConfigurationException ex) {\n                throw new TransformerException(ex);\n            }\n            catch (SAXException ex) {\n                throw new TransformerException(ex);\n            }\n        }\n        reader.setEntityResolver(this);\n        source.setXMLReader(reader);\n    }\n\nI'll attach a test case to show that the current CatalogResolver does not \nresolve entity in the xml file which was created with the document() function \nin xsl file"}, {"attachment_id": 4513, "tags": [], "creator": "ebelisar@ca.ibm.com", "text": "Created attachment 4513\nTest case for CatalogResolver, unzip, set class path in runtest.bat and run", "count": 1, "id": 29895, "time": "2003-01-22T16:46:40Z", "bug_id": 16336, "creation_time": "2003-01-22T16:46:40Z", "is_private": false}, {"count": 2, "tags": [], "creator": "apache-bugzilla@nwalsh.com", "attachment_id": null, "is_private": false, "id": 73586, "time": "2005-04-12T23:03:02Z", "bug_id": 16336, "creation_time": "2005-04-12T23:03:02Z", "text": "Thanks!"}]