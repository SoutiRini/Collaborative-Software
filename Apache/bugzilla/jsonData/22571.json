[{"count": 0, "tags": [], "bug_id": 22571, "attachment_id": null, "id": 43027, "creation_time": "2003-08-20T06:06:48Z", "time": "2003-08-20T06:06:48Z", "creator": "william.barker@wilshire.com", "text": "Jasper currently relies on the non-standard methods \"_jspInit\" \nand \"_jspDestroy\".  Since these methods are found nowhere in either the Servlet \nor Jsp specs, there is no reason that a custom \"extends\" class should either \nimplement them or call them.  The result is that all of the tag-pools remain un-\ninitialized, so the first access to a tag causes an NPE.\n\nInitialization is easy to solve (i.e. it could be moved to the constructor, you \ncould have a flag that is checked in _jspService, etc.).  Releasing is the hard \npart.  About all that I can see (without majorly changing the current \nimplementation) is to add a finalize method, which is just too ugly for \nwords :).\n\nThe other solution I can see would be to add code to the JSP page like:\n\n  private Tag getTag(org.apache.jasper.runtime.TagHandlerPool pool, Class tagC){\n    Tag result = null;\n    if(pool == null) {\n      try {\n        result = tagC.newInstance();\n      } catch(Exception ex) {\n      }\n    } else {\n      result = pool.get(tagC);\n    }\n    return result;\n   }\n   private void putTag(org.apache.jasper.runtime.TagHandlerPool pool, Tag tag) {\n    if( pool == null ) {\n      tag.release();\n    } else {\n      pool.reuse(tag);\n    }\n   }", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 7895\nWar file that exibits the bug", "attachment_id": 7895, "bug_id": 22571, "id": 43028, "time": "2003-08-20T06:08:56Z", "creator": "william.barker@wilshire.com", "creation_time": "2003-08-20T06:08:56Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 22571, "attachment_id": null, "text": "All generated servlets will override javax.servlet.Servlet.init(). The overriden\ninit() first calls super.init(), followed by the initialization currently done\nin _jspInit().\n", "id": 43137, "time": "2003-08-21T23:39:59Z", "creator": "jan.luehe@sun.com", "creation_time": "2003-08-21T23:39:59Z", "is_private": false}]