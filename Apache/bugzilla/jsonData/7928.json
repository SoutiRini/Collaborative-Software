[{"count": 0, "tags": [], "creator": "xiaotan.he@sun.com", "attachment_id": null, "text": "The following code works with EA3 version, however, in the beta1, it fails to \nfind the corresponding resource bundle file (Resources_cn_CN.properties)as the \n\"cn_CN\" is not correct country/language code, the resource bundle file has to \nrename to Resources_cn_CN.properties - zh_CN is the correct country/language \ncode to make it work.\n...\n<fmt:locale value=\"cn_CN\"/>\n<fmt:bundle basename=\"com.sun.resources.Resources\">\n...\n\nHowever, enforcing correct country/language code is not expected bahavior for \nfmt tags right now.", "id": 13192, "time": "2002-04-10T17:36:54Z", "bug_id": 7928, "creation_time": "2002-04-10T17:36:54Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "jan.luehe@sun.com", "text": "I noticed the cn_CN resource bundle does get found, but\nfor some reason the keyword \"engineer_name\" gets mapped\nto \"???\".\n\nIf in Resources_cn_CN.properties I replace\n\n  engineer_name=\\u5de5\\u7a0b\\u5e08\n  \nwith\n\n  engineer_name=some test value\n  \nI get the correct result (\"some test value\") on the page.\n\nNote that if the resource bundle weren't found, you'd get\n \n  ???engineer_name???\n  \non the page, instead of just \"???\".\n\nSo I believe JSTL works fine, but I still don't understand\nwhy the message key \"engineer_name\" maps to \"???\" when\nusing cn_CN, and maps to the appropriate localized message\nwhen using zh_CN.\n", "count": 1, "id": 13880, "time": "2002-04-17T17:22:33Z", "bug_id": 7928, "creation_time": "2002-04-17T17:22:33Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 7928, "text": "The behaviour you are seeing is not inherent to JSTL, but the container it is\ndeployed with.\nAs I said in my previous evaluation, the \"???\" in the output does not mean that\nthe requested resource bundle cannot be found. In that case, you would have seen\nan error message of the form \"???engineer_name???\".\n\nThe \"???\" means that the 3 characters your message key gets mapped to cannot be\ndisplayed properly.\n\nNote that in your example, the <fmt:bundle> action sets the response encoding by\ncalling the response's setLocale() method with the resource bundle locale.\n\nWhen you set the page's locale to \"cn_CN\" (using <fmt:locale>), the resource\nbundle (and hence response) locale will be \"cn_CN\". Similarly, when you set the\npage's locale to \"zh_CN\", your resource bundle (and hence response) locale will\nbe \"zh_CN\" (since you provided resource bundles for either locale).\n\nNow it is up to the container to map the response locale to an appropriate\nresponse charset. Tomcat uses the mapping specified in its\n\n  org/apache/catalina/util/CharsetMapperDefault.properties\n\nresource. The mapping contains this entry (among others):\n\n  zh=GB2312\n\nmeaning that any response locale with a language component of \"zh\" will be\nmapped to the GB2312 charset. There is no mapping for \"cn\".\n\nIf you see \"???\" in the page output, it means that the container did not map the\nresponse locale to the appropriate response charset.\n\nJSTL also relies on the container to grant the most recent call to\nServletResponse.setLocale() precendence over any previous calls and\n'contentType' page directive. This requirement on the container will be\npublished as an errata to JSP 1.2. If your container currenly does not implement\nthis requirement, the setLocale() call by your <fmt:bundle> action will be\nignored, resulting in the \"???\" output (unless you explicitly set the response\nencoding to \"GB2312\" via a page directive).\n\n", "id": 15078, "time": "2002-04-29T21:26:10Z", "creator": "jan.luehe@sun.com", "creation_time": "2002-04-29T21:26:10Z", "is_private": false, "attachment_id": null}]