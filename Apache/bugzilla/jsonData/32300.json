[{"count": 0, "tags": [], "bug_id": 32300, "text": "Please change the <ant> task to allow multiple targets to be specified in a \nsingle property, whitespace-separated. \n \nCurrently only one target can be specified in the 'target' attribute. \n \nSuggested implementation alternatives: \n1) allow multiple targets in current 'target' attribute; \n2) add new property 'targets'; \n \nI suggest the first approach is taken, since spaces are not allowed in a \ntarget name anyway, I guess. \n \nI will append an example to explain what approach I'm taking. I have a shell \nscript that calls a first Ant build file, which generates a second Ant build \nfile and then passes control to that build file, with the arguments passed to \nthe shell script :-) \n \nIf you need me to explain this in more detail, let me know.", "id": 67173, "time": "2004-11-18T22:14:44Z", "creator": "wfe.dehaan@gmail.com", "creation_time": "2004-11-18T22:14:44Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "wfe.dehaan@gmail.com", "text": "Created attachment 13494\nFirst build file (a.xml)\n\nDownload a.xml and b.xml and then execute this a.xml as follows:\n\nant -buildfile a.xml -Dargs='target_b_1 target_b_2'", "id": 67174, "time": "2004-11-18T22:16:41Z", "bug_id": 32300, "creation_time": "2004-11-18T22:16:41Z", "is_private": false, "attachment_id": 13494}, {"count": 2, "tags": [], "creator": "wfe.dehaan@gmail.com", "attachment_id": 13495, "id": 67175, "time": "2004-11-18T22:17:55Z", "bug_id": 32300, "creation_time": "2004-11-18T22:17:55Z", "is_private": false, "text": "Created attachment 13495\nSecond build file (b.xml)\n\nDownload a.xml and b.xml and then execute this a.xml as follows:\n\nant -buildfile a.xml -Dargs='target_b_1 target_b_2'"}, {"count": 3, "tags": [], "creator": "wfe.dehaan@gmail.com", "text": "Created attachment 13496\nPatch for the docs/manual/CoreTasks/ant.html (documentation).\n\nPossible change to the docs/manual/CoreTasks/ant.html file.", "id": 67176, "time": "2004-11-18T22:28:33Z", "bug_id": 32300, "creation_time": "2004-11-18T22:28:33Z", "is_private": false, "attachment_id": 13496}, {"count": 4, "tags": [], "bug_id": 32300, "text": "The CVS HEAD versions of <ant> and <subant> allow nested <target> elements to \nbe specified.  A single dependencies analysis is performed so:\n\n<ant><target name=\"foo\" /><target name=\"bar\" /></ant>\n\nbehaves like:\n\n<target name=\"foobar\" depends=\"foo,bar\" />\n<ant target=\"foobar\" />\n\n(this is not how the implementation works, only an illustration of the outcome)\n\n-Matt", "id": 67177, "time": "2004-11-18T22:29:11Z", "creator": "mbenson@apache.org", "creation_time": "2004-11-18T22:29:11Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 32300, "attachment_id": null, "id": 67180, "time": "2004-11-18T22:33:12Z", "creator": "wfe.dehaan@gmail.com", "creation_time": "2004-11-18T22:33:12Z", "is_private": false, "text": "For your information, when I execute the command I proposed, I get the \nfollowing output: \n \n$ ant -buildfile a.xml -Dargs='target_b_1 target_b_2' \nBuildfile: a.xml \n \ntarget_a_1: \n     [echo] Arguments: target_b_1 target_b_2 \n \nBUILD FAILED \n/home/ernst/a.xml:6: Following error occured while executing this line \nTarget `target_b_1 target_b_2' does not exist in this project. \n \nTotal time: 0 seconds \n \n \nNow when I add the -verbose option I get this: \n \n$ ant -verbose -buildfile a.xml -Dargs='target_b_1 target_b_2' \nApache Ant version 1.6.1 compiled on February 12 2004 \nBuildfile: a.xml \nDetected Java version: 1.4 in: /opt/sun-jdk-1.4.2.06/jre \nDetected OS: Linux \nparsing buildfile /home/ernst/a.xml with URI = file:///home/ernst/a.xml \nProject base dir set to: /home/ernst \nBuild sequence for target `target_a_1' is [target_a_1] \nComplete build sequence is [target_a_1, ] \n \ntarget_a_1: \n     [echo] Arguments: target_b_1 target_b_2 \nProject base dir set to: /home/ernst \n      [ant] calling target target_b_1 target_b_2 in build \nfile /home/ernst/b.xml \nparsing buildfile /home/ernst/b.xml with URI = file:///home/ernst/b.xml \nProject base dir set to: /home/ernst \n      [ant] Entering /home/ernst/b.xml... \n      [ant] Exiting /home/ernst/b.xml. \n \nBUILD FAILED \n/home/ernst/a.xml:6: Following error occured while executing this line \nTarget `target_b_1 target_b_2' does not exist in this project. \n        at \norg.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:537) \n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:385) \n        at \norg.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269) \n        at org.apache.tools.ant.Task.perform(Task.java:364) \n        at org.apache.tools.ant.Target.execute(Target.java:301) \n        at org.apache.tools.ant.Target.performTasks(Target.java:328) \n        at org.apache.tools.ant.Project.executeTarget(Project.java:1215) \n        at org.apache.tools.ant.Project.executeTargets(Project.java:1063) \n        at org.apache.tools.ant.Main.runBuild(Main.java:632) \n        at org.apache.tools.ant.Main.startAnt(Main.java:183) \n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:197) \n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:56) \nCaused by: Target `target_b_1 target_b_2' does not exist in this project. \n        at org.apache.tools.ant.Project.tsort(Project.java:1666) \n        at org.apache.tools.ant.Project.topoSort(Project.java:1588) \n        at org.apache.tools.ant.Project.executeTarget(Project.java:1192) \n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:383) \n        ... 10 more \n--- Nested Exception --- \nTarget `target_b_1 target_b_2' does not exist in this project. \n        at org.apache.tools.ant.Project.tsort(Project.java:1666) \n        at org.apache.tools.ant.Project.topoSort(Project.java:1588) \n        at org.apache.tools.ant.Project.executeTarget(Project.java:1192) \n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:383) \n        at \norg.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269) \n        at org.apache.tools.ant.Task.perform(Task.java:364) \n        at org.apache.tools.ant.Target.execute(Target.java:301) \n        at org.apache.tools.ant.Target.performTasks(Target.java:328) \n        at org.apache.tools.ant.Project.executeTarget(Project.java:1215) \n        at org.apache.tools.ant.Project.executeTargets(Project.java:1063) \n        at org.apache.tools.ant.Main.runBuild(Main.java:632) \n        at org.apache.tools.ant.Main.startAnt(Main.java:183) \n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:197) \n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:56) \n \nTotal time: 0 seconds "}, {"count": 6, "tags": [], "bug_id": 32300, "attachment_id": null, "id": 67181, "time": "2004-11-18T22:38:33Z", "creator": "wfe.dehaan@gmail.com", "creation_time": "2004-11-18T22:38:33Z", "is_private": false, "text": "Matt, \n \nI have no possibility of splitting the arguments up so I may pass them to \nseparate <target/> subelements. Is there a way to pass all arguments at once \nusing a single property value? \n \nErnst "}, {"count": 7, "tags": [], "creator": "mbenson@apache.org", "text": "Nothing just yet.  What makes you think spaces are not allowed in target \nnames?  They most certainly are.  Not necessarily recommended, but allowed.\n\nYou could always use <exec> to call Ant with\n-Dant.executor.class=org.apache.tools.ant.helper.SingleCheckExecutor as an \nargument.", "id": 67182, "time": "2004-11-18T22:56:48Z", "bug_id": 32300, "creation_time": "2004-11-18T22:56:48Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 32300, "attachment_id": null, "id": 67196, "time": "2004-11-19T07:28:18Z", "creator": "jan@materne.de", "creation_time": "2004-11-19T07:28:18Z", "is_private": false, "text": "What\u00b4s with Bug 5270?"}, {"count": 9, "tags": [], "bug_id": 32300, "text": "Bug 5270 is not the same. That one uses commas to separate targets, while I need \nto be able to specify the targets whitespace-separated, because that's how they \ncome in on the command line. \n \nTo elaborate, this is the way the targets come in: \n1) passed to shell script \n2) shell script passes it to build file with:  -Dargs=\"$*\" \n3) build file passes them to a second build file with an <ant/> task. ", "id": 67213, "time": "2004-11-19T13:57:24Z", "creator": "ernst.dehaan@nl.wanadoo.com", "creation_time": "2004-11-19T13:57:24Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 32300, "attachment_id": null, "id": 67216, "time": "2004-11-19T14:22:28Z", "creator": "jan@materne.de", "creation_time": "2004-11-19T14:22:28Z", "is_private": false, "text": "Where is the problem? That\u00b4s only another delimiter.\na) live with the comma as delimiter\nb) provide a delimiter attribute like the <for*> tasks from AntContrib\n   <ant target=\"one,two\"/>\n   <ant target=\"one two\" delimiter=\" \"/>\n   <ant>\n       <target name=\"one\"/>\n       <target name=\"two\"/>\n   </ant>"}, {"count": 11, "text": "Not to seem obstinate or insensitive to users' requests, but between this bug, \n5270, 21421 and who knows how many others this is a horse that has been beaten \nto a bloody death too many times.  We -like- to provide functionality that will \nallow people to accomplish the tasks associated with their build and deployment \nprocesses.  But when a means of doing something has been provided and ten users \nstill want ten additional means of doing the same thing I don't find myself to \nbe terribly sympathetic.  As Jan suggests, using ant-contrib's various looping \nmechanisms any delimiter from a target list can be specified.  Further \nflexibility can be gained from calling ant via <exec>.  Ant cannot be expected \nto cater directly to every possible string format, you've got to meet us \nhalfway.  If you can't get the proposed workaround(s) working, send a message \nto the user list and most likely someone will help you.", "bug_id": 32300, "attachment_id": null, "id": 67240, "time": "2004-11-19T18:13:43Z", "creator": "mbenson@apache.org", "creation_time": "2004-11-19T18:13:43Z", "tags": [], "is_private": false}, {"count": 12, "tags": [], "bug_id": 32300, "attachment_id": null, "id": 67285, "time": "2004-11-20T21:09:41Z", "creator": "wfe.dehaan@gmail.com", "creation_time": "2004-11-20T21:09:41Z", "is_private": false, "text": "That sounds reasonable, really. I may have sounded stubborn, but I was really  \nin need of a quick solution, like most other people with a problem :-)  \n  \nIn fact we've solved it by creating our own task:  \nhttp://cvs.sourceforge.net/viewcvs.py/xins/xins/src/java-common/org/xins/common/ant/CallTargetsTask.java?rev=1.3&view=markup  \n  \nThanks for the support, Matt!  "}]