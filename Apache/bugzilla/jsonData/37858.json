[{"count": 0, "attachment_id": null, "creator": "dh@euro-solutions.info", "is_private": false, "id": 83508, "time": "2005-12-10T08:32:47Z", "bug_id": 37858, "creation_time": "2005-12-10T08:32:47Z", "tags": [], "text": "our development server (auto updated once a week, currently 2.0.55) now \ncrashes after any rewrting rules to an ssl connection. \n\ni'm sorry that i can't show you any log. everything i can say, is that such \nrules causes segmentation faults, the current child process will be killed and \nthe requested site will not be displayed.\n\n(sorry for my bad english)"}, {"count": 1, "tags": [], "bug_id": 37858, "text": "We need some more information on the problem:\n\n1. Please select the correct OS in the drop down box of this report.\n2. Please attach the configuration to this report.\n3. Are any third party modules loaded?\n4. Please attach the error logs if you see anything unusual in them.\n5. Please provide a backtrace of the crash (see\nhttp://httpd.apache.org/dev/debugging.html#gdb)", "id": 83509, "time": "2005-12-10T09:41:39Z", "creator": "rpluem@apache.org", "creation_time": "2005-12-10T09:41:39Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "dh@euro-solutions.info", "attachment_id": null, "text": "OS: Linux Suse 9.2, Windows 2003 Server (xampp)\n\nerror_log\n[Fri Dec 09 13:02:20 2005] [error] [client 192.168.99.163] File does not \nexist: /srv/www/htdocs/ssl/shopssl3/images/default.jpg, referer: \nhttps://192.168.99.167/shopssl3/00000000002141973972113412972900000000005770230\n8571134129729ce01de234fb5f132849488beb30bbf3210030/index.html\n[Fri Dec 09 13:02:21 2005] [notice] child pid 21779 exit signal Segmentation \nfault (11)\n\nthe rewrite to the requested site is okay (see the referer url with the file \nnot exist error), but after this the Segmentation fault crashes the child \nprocess\n\nthere are no third party modules, only standard modules such as mod_rewrite. \nas i said the server worked well before the last autoupdate, so the \nconfiguration was okay. \n\nEvery request to the ssl site, after the rewrites causes :\n[Sat Dec 10 15:13:46 2005] [notice] child pid 8218 exit signal Segmentation \nfault (11)\n[Sat Dec 10 15:16:01 2005] [notice] child pid 8196 exit signal Segmentation \nfault (11)\n\ngdb stops at:\n\neading symbols from /usr/local/Zend/lib/Debugger-4.0.0/php-\n4.3.x/ZendDebugger.so...done.\nLoaded symbols for /usr/local/Zend/lib/Debugger-4.0.0/php-4.3.x/ZendDebugger.so\nReading symbols from /usr/local/Zend/lib/SQLite/php-4.3.x/sqlite.so...done.\nLoaded symbols for /usr/local/Zend/lib/SQLite/php-4.3.x/sqlite.so\nReading symbols from /usr/local/Zend/lib/JavaMW-1.0.1/php-4.3.x/java.so...done.\nLoaded symbols for /usr/local/Zend/lib/JavaMW-1.0.1/php-4.3.x/java.so\n#0  0x40599073 in zend_hash_index_update_or_next_insert () \nfrom /usr/lib/apache2-prefork/libphp4.so\n\n\n", "id": 83510, "time": "2005-12-10T15:31:47Z", "bug_id": 37858, "creation_time": "2005-12-10T15:31:47Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 37858, "text": "\n[..cut..]\n\n> \n> there are no third party modules, only standard modules such as mod_rewrite. \n\nThere ARE third party modules there. You use php.\nWhat kind of MPM are using? worker or prefork?\n\n> as i said the server worked well before the last autoupdate, so the \n> configuration was okay. \n> \n> Every request to the ssl site, after the rewrites causes :\n> [Sat Dec 10 15:13:46 2005] [notice] child pid 8218 exit signal Segmentation \n> fault (11)\n> [Sat Dec 10 15:16:01 2005] [notice] child pid 8196 exit signal Segmentation \n> fault (11)\n> \n> gdb stops at:\n\nPlease provide the output of gdb command \n\nthread apply all bt full\n\n[..cut..]\n\n> Loaded symbols for /usr/local/Zend/lib/JavaMW-1.0.1/php-4.3.x/java.so\n> #0  0x40599073 in zend_hash_index_update_or_next_insert () \n> from /usr/lib/apache2-prefork/libphp4.so\n\nLooks like a crash in the php module\n\n", "id": 83515, "time": "2005-12-10T17:16:26Z", "creator": "rpluem@apache.org", "creation_time": "2005-12-10T17:16:26Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 37858, "text": "thread apply all bt full - output\n\nThread 1 (process 8406):\n#0  0x40599073 in zend_hash_index_update_or_next_insert ()\n   from /usr/lib/apache2-prefork/libphp4.so\nNo symbol table info available.\n#1  0x4059a92e in zend_list_insert () from /usr/lib/apache2-prefork/libphp4.so\nNo symbol table info available.\n#2  0x4059a96c in zend_register_resource ()\n   from /usr/lib/apache2-prefork/libphp4.so\nNo symbol table info available.\n#3  0x40572890 in _php_stream_alloc () from /usr/lib/apache2-prefork/libphp4.so\nNo symbol table info available.\n#4  0x40572a7d in _php_stream_fopen_from_fd ()\n   from /usr/lib/apache2-prefork/libphp4.so\nNo symbol table info available.\n#5  0x40572c3c in _php_stream_fopen () from /usr/lib/apache2-prefork/libphp4.so\nNo symbol table info available.\n#6  0x40572dad in _php_stream_fopen_with_path ()\n   from /usr/lib/apache2-prefork/libphp4.so\nNo symbol table info available.\n#7  0x40573213 in php_plain_files_stream_opener ()\n   from /usr/lib/apache2-prefork/libphp4.so\nNo symbol table info available.\n---Type <return> to continue, or q <return> to quit---\n#8  0x40573982 in _php_stream_open_wrapper_ex ()\n   from /usr/lib/apache2-prefork/libphp4.so\nNo symbol table info available.\n#9  0x41aef522 in ?? ()\n   from /usr/local/Zend/lib/Optimizer-2.5.8/php-4.3.x/ZendOptimizer.so\nNo symbol table info available.\n#10 0x082d9f30 in ?? ()\nNo symbol table info available.\n#11 0x41b46bd5 in ?? ()\n   from /usr/local/Zend/lib/Optimizer-2.5.8/php-4.3.x/ZendOptimizer.so\nNo symbol table info available.\n#12 0x000000ad in ?? ()\nNo symbol table info available.\n#13 0xbfffeef8 in ?? ()\nNo symbol table info available.\n#14 0x00000000 in ?? ()\nNo symbol table info available.\n#15 0x00000001 in ?? ()\nNo symbol table info available.\n#16 0xbfffeda8 in ?? ()\nNo symbol table info available.\n#17 0x41aef4f0 in ?? ()\n   from /usr/local/Zend/lib/Optimizer-2.5.8/php-4.3.x/ZendOptimizer.so\nNo symbol table info available.\n#18 0x41b5b9b8 in ?? ()\n   from /usr/local/Zend/lib/Optimizer-2.5.8/php-4.3.x/ZendOptimizer.so\nNo symbol table info available.\n#19 0x41b531e8 in zend_extension_entry ()\n   from /usr/local/Zend/lib/Optimizer-2.5.8/php-4.3.x/ZendOptimizer.so\nNo symbol table info available.\n#20 0xbfffee38 in ?? ()\nNo symbol table info available.\n#21 0xbfffee38 in ?? ()\nNo symbol table info available.\n#22 0xbfffeca8 in ?? ()\nNo symbol table info available.\n#23 0x401ebce0 in pthread_mutex_unlock () from /lib/tls/libpthread.so.0\nNo symbol table info available.\n#24 0x40007edc in _dl_lookup_symbol_x () from /lib/ld-linux.so.2\nNo symbol table info available.\nPrevious frame inner to this frame (corrupt stack?)\n", "id": 83545, "time": "2005-12-12T09:38:11Z", "creator": "dh@euro-solutions.info", "creation_time": "2005-12-12T09:38:11Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 37858, "text": "Upgrade to the php 4.4.x snapshot from http://snaps.php.net/, it's a PHP issue.", "id": 83546, "time": "2005-12-12T10:01:30Z", "creator": "jorton@redhat.com", "creation_time": "2005-12-12T10:01:30Z", "is_private": false, "attachment_id": null}]