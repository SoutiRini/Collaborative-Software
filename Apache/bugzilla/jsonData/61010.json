[{"count": 0, "tags": [], "creator": "gabe@misura.org", "is_private": false, "text": "https://httpd.apache.org/docs/2.4/mod/mod_proxy.html#proxypreservehost\n\nSays:\n\nWhen enabled, this option will pass the Host: line from the incoming request to the proxied host, instead of the hostname specified in the ProxyPass line.\n\nHowever, when I setup a ProxyPass:\n\n  <Location /en_US>\n    ProxyPass \"http://othersite.com\"\n  </Location>\n\nThe othersite.com was receiving mysite.com as the HOST header.\nAdding ProxyPreserveHost Off or ProxyPreserveHost On made no difference.\nWhen I changed the config to\n\n  <Location /en_US>\n    RequestHeader set Host othersite.com\n    ProxyPass \"http://othersite.com\"\n  </Location>\n\nIt worked perfectly.\nSeems like a bug. Am I misunderstanding?\n\n\nhttpd -V\nServer version: Apache/2.4.6 (Red Hat Enterprise Linux)\nServer built:   Sep 17 2015 09:06:30\nServer's Module Magic Number: 20120211:24\nServer loaded:  APR 1.4.8, APR-UTIL 1.5.2\nCompiled using: APR 1.4.8, APR-UTIL 1.5.2\nArchitecture:   64-bit\nServer MPM:     prefork\n  threaded:     no\n    forked:     yes (variable process count)\nServer compiled with....\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=256\n -D HTTPD_ROOT=\"/etc/httpd\"\n -D SUEXEC_BIN=\"/usr/sbin/suexec\"\n -D DEFAULT_PIDLOG=\"/run/httpd/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\nI'll try a newer version to see if that makes any difference.", "id": 198387, "time": "2017-04-19T22:39:19Z", "bug_id": 61010, "creation_time": "2017-04-19T22:39:19Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "jchampion@apache.org", "attachment_id": null, "text": "Doesn't seem to be reproducible with 2.4.25, at the very least. My test config:\n\n  <Location /proxied>\n    # backend sees 'Host: localhost:9090'\n    ProxyPass \"http://localhost:9090\"\n  </Location>\n\nLet us know whether your tests with a newer version work as expected.", "id": 198388, "time": "2017-04-19T23:06:43Z", "bug_id": 61010, "creation_time": "2017-04-19T23:06:43Z", "is_private": false}]