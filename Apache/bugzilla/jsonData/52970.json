[{"attachment_id": null, "tags": [], "bug_id": 52970, "text": "Consider this JSF view snippet:\n\n----------------------------------------------------------------------\n<h:form>\n    <h:commandButton value=\"submit\" action=\"#{bean.submit('FOO')}\" />\n</h:form>\n----------------------------------------------------------------------\n\nAnd this JSF bean snippet:\n\n----------------------------------------------------------------------\n@ManagedBean\n@RequestScoped\npublic class Bean {\n    public enum Type { FOO, BAR }\n\n    public void submit(Type type) {\n        System.out.println(type);\n    }\n}\n----------------------------------------------------------------------\n\nThis results in a javax.el.MethodNotFoundException. It works in Glassfish 3. EL 2.2 spec 1.18.6 tells that a string must be coerced to enum of type T.", "count": 0, "id": 155214, "time": "2012-03-22T12:28:52Z", "creator": "balusc@gmail.com", "creation_time": "2012-03-22T12:28:52Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 52970, "text": "What stacktrace is there in MethodNotFoundException?", "count": 1, "id": 155224, "time": "2012-03-22T14:03:47Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2012-03-22T14:03:47Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 52970, "text": "Here it is:\n\njavax.faces.el.MethodNotFoundException: javax.el.MethodNotFoundException: /index.xhtml @15,58 action=\"#{bean.submit('FOO')}\": Method not found: com.example.Bean@385c1187.submit(java.lang.String)\n\tat javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:92)\n\tat com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)\n\tat javax.faces.component.UICommand.broadcast(UICommand.java:315)\n\tat javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)\n\tat javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)\n\tat com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)\n\tat com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)\n\tat com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)\n\tat javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)\n\tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n\tat java.lang.Thread.run(Thread.java:722)\nCaused by: javax.el.MethodNotFoundException: /index.xhtml @15,58 action=\"#{bean.submit('FOO')}\": Method not found: com.example.Bean@385c1187.submit(java.lang.String)\n\tat com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:109)\n\tat javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)\n\t... 24 more", "count": 2, "id": 155225, "time": "2012-03-22T14:06:13Z", "creator": "balusc@gmail.com", "creation_time": "2012-03-22T14:06:13Z", "is_private": false}, {"count": 3, "tags": [], "creator": "knst.kolinko@gmail.com", "text": "There is nothing in your stacktrace that comes from Tomcat EL implementation. There should be other \"Caused by\" somewhere further.\n\n\nLooking at method selection code in\njavax.el.BeanELResolver#invoke(..)\n\n- The \"paramTypes\" argument there is usually null.\n\nIn that case the method is identified by the count of parameters, not by their types.\n\nIf that were the case, type coercion will happen later and would not result in MethodNotFoundException. So where is it thrown from?\n\n- If the \"paramTypes\" argument is not-null then it will be used to select exact method.  Is it your case?\n\nThe requirements for BeanELResolver#invoke() API are set in EL 2.2 specification (see 2.2.9, page 38). I see no provision to respect EL coercion rules when paramTypes != null.", "id": 155226, "time": "2012-03-22T14:25:10Z", "bug_id": 52970, "creation_time": "2012-03-22T14:25:10Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "bug_id": 52970, "is_private": false, "id": 155227, "time": "2012-03-22T14:31:23Z", "creator": "balusc@gmail.com", "creation_time": "2012-03-22T14:31:23Z", "tags": [], "text": "It's indeed been swallowed/wrapped by Facelets. Here's the stacktrace as it is coming from `invoke()`:\n\njavax.el.MethodNotFoundException: Method not found: com.example.Bean@66a01572.submit(java.lang.String)\n\tat org.apache.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:225)\n\tat org.apache.el.parser.AstValue.invoke(AstValue.java:251)\n\tat org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)\n\tat com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:111)\n\tat javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)\n\tat com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)\n\tat javax.faces.component.UICommand.broadcast(UICommand.java:315)\n\tat javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)\n\tat javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)\n\tat com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)\n\tat com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)\n\tat com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)\n\tat javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)\n\tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n\tat java.lang.Thread.run(Thread.java:722)"}, {"count": 5, "attachment_id": null, "bug_id": 52970, "is_private": false, "id": 155228, "time": "2012-03-22T14:35:56Z", "creator": "balusc@gmail.com", "creation_time": "2012-03-22T14:35:56Z", "tags": [], "text": "Indeed, the params being passed is null in Tomcat 7.0.26 while it contains the right values in Glassfish 3.x."}, {"attachment_id": null, "tags": [], "bug_id": 52970, "is_private": false, "count": 6, "id": 155274, "time": "2012-03-24T21:34:10Z", "creator": "markt@apache.org", "creation_time": "2012-03-24T21:34:10Z", "text": "This has been fixed in trunk and 7.0.x and will be included in 7.0.27 onwards."}]