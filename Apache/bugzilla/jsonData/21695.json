[{"count": 0, "tags": [], "creator": "griswolf@roguewave.com", "text": "If I don't want to alter my PATH envariable, then it makes sense to symbolic\nlink the jmeter startup script to someplace already in my PATH. But `dirname $0`\nfinds the symbol's location.  Here is a fixed script (tested linux, solaris)\n\n#! /bin/sh\n#java -Xincgc -jar `dirname $0`/ApacheJMeter.jar \"$@\"\ntruedirname() {\n  if test -L $0 ; then \n    x=`/bin/ls -l $0`\n    for i in $x ; do\n      :\n    done\n    case \"$i\" in\n     /*) x=`dirname $i` ;;\n     *) x=`dirname $0`/`dirname $i` ;;\n    esac\n  else\n    msg=\"$msgd\"\n    x=`dirname $0`\n  fi\n  here=`pwd`\n  cd $x 2>&1 > /dev/null\n  pwd\n  cd $here 2>&1 > /dev/null\n}\n\njava -Xincgc -jar `truedirname $0`/ApacheJMeter.jar \"$@\"\n\nI don't claim this is elegant... but it works for me.", "id": 40918, "time": "2003-07-17T18:16:48Z", "bug_id": 21695, "creation_time": "2003-07-17T18:16:48Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 21695, "text": "(In reply to comment #0)\n> If I don't want to alter my PATH envariable, then it makes sense to symbolic\n> link the jmeter startup script to someplace already in my PATH. But `dirname $0`\n> finds the symbol's location.  Here is a fixed script (tested linux, solaris)\n> \n> #! /bin/sh\n> #java -Xincgc -jar `dirname $0`/ApacheJMeter.jar \"$@\"\n> truedirname() {\n>   if test -L $0 ; then \n>     x=`/bin/ls -l $0`\n>     for i in $x ; do\n>       :\n>     done\n>     case \"$i\" in\n>      /*) x=`dirname $i` ;;\n>      *) x=`dirname $0`/`dirname $i` ;;\n>     esac\n>   else\n>     msg=\"$msgd\"\n>     x=`dirname $0`\n>   fi\n>   here=`pwd`\n>   cd $x 2>&1 > /dev/null\n>   pwd\n>   cd $here 2>&1 > /dev/null\n> }\n> \n> java -Xincgc -jar `truedirname $0`/ApacheJMeter.jar \"$@\"\n> \n> I don't claim this is elegant... but it works for me.\n\nA better way to do this is to use readlink like so:\n\njava -Xincgc -jar $(dirname $(readlink $0)) \"$@\"\n\nReadlink was originally a BSD utility, but I believe it exists in most, if not\nall, Linux distos. I haven't found one yet that doesn't have it... even some of\nour older RHEL3 servers have it.\n\nP.S. the backticks ` are deprecated in Bash now. The $( ) syntax is preferred\ninstead. ", "id": 108729, "time": "2007-09-27T16:09:09Z", "creator": "mdeeks@ea.com", "creation_time": "2007-09-27T16:09:09Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "sebb@apache.org", "is_private": false, "text": "*** Bug 55994 has been marked as a duplicate of this bug. ***", "id": 172377, "time": "2014-01-14T17:49:48Z", "bug_id": 21695, "creation_time": "2014-01-14T17:49:48Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "sebb@apache.org", "is_private": false, "text": "readlink works OK for absolute soft-links and relative soft-links in the current directory.\n\nHowever if a relative soft-link is accessed via the PATH, then the technique does not work; it will be necessary to convert the relative link to an absolute one.\n\nLooks like readlink -f does what is wanted; however does it exist on all Unix-like systems?\n\nIf it does, then\n\njava $JVM_ARGS $JMETER_OPTS -jar `dirname $0`/ApacheJMeter.jar \"$@\"\n\ncan simply be changed to\n\njava $JVM_ARGS $JMETER_OPTS -jar `dirname readlink -f $0`/ApacheJMeter.jar \"$@\"\n\nTo allow for spaces in path names, one would need:\n\njava $JVM_ARGS $JMETER_OPTS -jar \"`dirname readlink -f $0`/ApacheJMeter.jar\" \"$@\"\n\nIs \"readlink -f\" supported on MacOS?\n\nSeems to work OK on FreeBSD and Ubuntu.", "id": 172384, "time": "2014-01-15T00:50:50Z", "bug_id": 21695, "creation_time": "2014-01-15T00:50:50Z", "attachment_id": null}, {"count": 4, "attachment_id": null, "bug_id": 21695, "text": "readlink is not available on Solaris.\n\nHere's a snippet from Tomcat bin/catalina.sh that is there since more than 7 years and seems to work reliably on many platforms (as we expect Tomcat to be used on almost any platform):\n\n...\n\n# resolve links - $0 may be a softlink\nPRG=\"$0\"\n\nwhile [ -h \"$PRG\" ]; do\n  ls=`ls -ld \"$PRG\"`\n  link=`expr \"$ls\" : '.*-> \\(.*\\)$'`\n  if expr \"$link\" : '/.*' > /dev/null; then\n    PRG=\"$link\"\n  else\n    PRG=`dirname \"$PRG\"`/\"$link\"\n  fi\ndone\n\n# Get standard environment variables\nPRGDIR=`dirname \"$PRG\"`\n\n...\n\nRegards,\n\nRainer", "id": 172419, "time": "2014-01-16T12:55:55Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2014-01-16T12:55:55Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 21695, "text": "(In reply to Rainer Jung from comment #4)\n> readlink is not available on Solaris.\n\nUseful to know.\n\n> Here's a snippet from Tomcat bin/catalina.sh that is there since more than 7\n> years and seems to work reliably on many platforms (as we expect Tomcat to\n> be used on almost any platform):\n\nExcellent.", "id": 172421, "time": "2014-01-16T14:57:42Z", "creator": "sebb@apache.org", "creation_time": "2014-01-16T14:57:42Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 21695, "text": "Fixed:\n\nURL: http://svn.apache.org/r1558834\nLog:\n Unix jmeter start script assumes it is on PATH, not a link\nBugzilla Id: 21695\n\nModified:\n    jmeter/trunk/bin/jmeter.sh\n    jmeter/trunk/xdocs/changes.xml\n\n\nNote that an additional change to the script was needed to allow for spaces in the JMeter installation path (perhaps should have been raised as a separate bug)", "id": 172424, "time": "2014-01-16T15:34:03Z", "creator": "sebb@apache.org", "creation_time": "2014-01-16T15:34:03Z", "tags": [], "is_private": false}]