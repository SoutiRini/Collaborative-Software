[{"count": 0, "tags": [], "bug_id": 25123, "attachment_id": null, "text": "According to W3C spec of 304 response header \n(http://www.w3.org/Protocols/HTTP/HTRESP.html):\n\"Response headers are as if the client had sent a HEAD request, but limited to \nonly those headers which make sense in this context. This means only headers \nthat are relevant to cache managers and which may have changed independently \nof the document's Last-Modified date. Examples include Date , Server and \nExpires . \"\n\n\nThe following example shows the results of a request done to an Apache2 server:\n\n# curl -s -I http://jauvin.com/images/email.gif\nHTTP/1.1 200 OK\nDate: Mon, 01 Dec 2003 20:34:15 GMT\nServer: Apache/2\nVary: Host\nLast-Modified: Fri, 20 Dec 2002 15:49:27 GMT\nETag: \"6cd17-51aa-dab1cfc0\"\nAccept-Ranges: bytes\nContent-Length: 20906\nCache-Control: max-age=7200\nExpires: Mon, 01 Dec 2003 22:34:15 GMT\nContent-Type: image/gif\n\n# curl -s -I http://jauvin.com/images/email.gif -H 'If-Modified-Since: Fri, 30\nNov 2003 08:43:27 GMT'\nHTTP/1.1 304 Not Modified\nDate: Mon, 01 Dec 2003 20:34:16 GMT\nServer: Apache/2\nETag: \"6cd17-51aa-dab1cfc0\"\nVary: Host\n\n\nWe can see from the first request, that the \"Expires/Cache-Control\" headers are\nmissing from the second request (304).\n\nHere is an example on an Apache 1.3.X server:\n\n# curl -s -I http://redhat.com/img/homepg_rh_logo.gif\nHTTP/1.1 200 OK\nDate: Mon, 01 Dec 2003 20:41:00 GMT\nServer: Apache\nSet-Cookie: Apache=65.39.170.200.235271070311260394; path=/; expires=Sat,\n29-Nov-08 20:41:00 GMT\nCache-Control: max-age=86400\nExpires: Tue, 02 Dec 2003 20:41:00 GMT\nLast-Modified: Thu, 07 Jun 2001 13:01:59 GMT\nETag: \"bd440-46c-3b1f7b47\"\nAccept-Ranges: bytes\nContent-Length: 1132\nContent-Type: image/gif\n\n# curl -s -I http://redhat.com/img/homepg_rh_logo.gif -H 'If-Modified-Since:\nFri, 30 Nov 2003 08:43:27 GMT'\nHTTP/1.1 304 Not Modified\nDate: Mon, 01 Dec 2003 20:41:00 GMT\nServer: Apache\nETag: \"bd440-46c-3b1f7b47\"\nExpires: Tue, 02 Dec 2003 20:41:00 GMT\nCache-Control: max-age=86400\n\n\nAs we can see here, both queries contain the \"Expires/Cache-Control\" headers.", "id": 48356, "time": "2003-12-01T20:42:44Z", "creator": "marc@r4l.com", "creation_time": "2003-12-01T20:42:44Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "text": "Both responses look correct to me. From RFC 2616:\n\n10.3.5 304 Not Modified\n\n[...]\n   The response MUST include the following header fields:\n[...]\n      - Expires, Cache-Control, and/or Vary, if the field-value might\n        differ from that sent in any previous response for the same\n        variant\n\nSo if the fields don't differ, they may or may not be sent, right?", "id": 48357, "time": "2003-12-01T20:48:52Z", "bug_id": 25123, "creation_time": "2003-12-01T20:48:52Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 25123, "attachment_id": null, "id": 48358, "time": "2003-12-01T21:05:24Z", "creator": "marc@r4l.com", "creation_time": "2003-12-01T21:05:24Z", "is_private": false, "text": "I guess it depends on what \"previous response for the same variant\" means... but\nwhy is Apache 1.3.X returning those headers?\n"}, {"count": 3, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of 24884 ***", "attachment_id": null, "bug_id": 25123, "id": 48363, "time": "2003-12-01T23:07:22Z", "creator": "slive@apache.org", "creation_time": "2003-12-01T23:07:22Z", "is_private": false}, {"count": 4, "tags": [], "text": "This is a valid bug. Try setting the ExpiresByType to \"access plus 5 minutes\".\nEvery acccess should get a new Expires header but doesn't. Please see\nhttp://marc.theaimsgroup.com/?l=apache-httpd-dev&m=106947094322141&w=2 for a\nsummary of the problem. I'm still looking for the solution.", "attachment_id": null, "bug_id": 25123, "id": 48365, "time": "2003-12-01T23:40:25Z", "creator": "rederpj@remulak.net", "creation_time": "2003-12-01T23:40:25Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 25123, "attachment_id": null, "text": "This PR has been fixed in the 2.1-dev branch and has been suggested for\nbackporting to the 2.0 stable branch. Thank you for using Apache and for\nsubmitting this report.", "id": 48995, "time": "2003-12-12T17:34:24Z", "creator": "rederpj@remulak.net", "creation_time": "2003-12-12T17:34:24Z", "is_private": false}]