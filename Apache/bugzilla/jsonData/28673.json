[{"count": 0, "tags": [], "bug_id": 28673, "attachment_id": null, "text": "i have a compilation error with mod_deflate and zlib 1.2.1\n\nhere is my compilation options :\n./configure \\\n--prefix=/usr/local/apache-2.0.49 \\\n--enable-so \\\n--with-ssl=\"/usr/local/ssl\" \\\n--with-z=\"/usr/local/zlib-1.2.1\" \\\n--enable-proxy=shared \\\n--enable-ssl=shared \\\n--enable-deflate=shared \\\n--with-mpm=worker\n\nhere is the compilation error :\nIn file included from /usr/include/zutil.h:16,\n                 from mod_deflate.c:42:\n/usr/include/zlib.h:68: redefinition of `struct z_stream_s'\n/usr/include/zlib.h:705: conflicting types for `gzwrite'\n/usr/local/zlib-1.2.1/include/zlib.h:982: previous declaration of `gzwrite'\n\nin mod_deflate.c, there is that :\n#include \"zlib.h\"\n\n#ifdef HAVE_ZUTIL_H\n#include \"zutil.h\"\n#else\n(...)\n\ni think #ifdef HAVE_ZUTIL_H should be replaced by #ifndef HAVE_ZUTIL_H\n(it works with #ifndef)", "id": 56580, "time": "2004-04-28T21:40:20Z", "creator": "bugsan666@hotmail.com", "creation_time": "2004-04-28T21:40:20Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 28673, "attachment_id": null, "text": "Confirmed errors building mod_deflate from 2.0.50dev and 2.1dev from May 23 for\nnetware.  Works fine with zlib 1.1.4", "id": 58118, "time": "2004-05-26T09:25:19Z", "creator": "rodc@ravenetcomputers.com", "creation_time": "2004-05-26T09:25:19Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 28673, "attachment_id": null, "text": "Works fine for me with zlib 1.2.1 on Linux, with both 2.0.49 and 2.1.0.\n\nYou used --with-z=\"/usr/local/zlib-1.2.1\" ; I didn't - because 1.2.1 is my\ninstalled zlib.  So I wonder if what you've seen is a config problem?\n\nRegarding the confirmation on netware, we've had some relevant patches recently\nfrom the netware folks.  Perhaps you could check if you[anyone] still have a\nproblem?", "id": 60428, "time": "2004-07-11T08:07:34Z", "creator": "nick@webthing.com", "creation_time": "2004-07-11T08:07:34Z", "is_private": false}, {"count": 3, "tags": [], "text": "I corrected my problem myself by replacing #ifdef HAVE_ZUTIL_H, but if i am \nthe only one with this \"problem\", it doesnt matter.\nmaybe it's a config problem with zlib :)", "attachment_id": null, "id": 60442, "creator": "bugsan666@hotmail.com", "time": "2004-07-11T12:29:24Z", "bug_id": 28673, "creation_time": "2004-07-11T12:29:24Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 28673, "text": "I get the same error with 2.0.52 under the following circumstances:\n\nI have the zlib-devel-1.1.4 package installed on my system (SuSE Linux 8.2).\nThis comes with the file zutil.h installed in /usr/lib. Although this is a\nfile considered internal to zlib, it is obviously used by some applications\n(like apache). This is probably the justification for it being installed.\n\nNow, I want to use a newer zlib with my httpd.\nI installed zlib 1.2.1 myself in $HOME/gnu. The \"make install\" in\nthe zlib sources does not install zutil.h (as the zlib authors consider it\ninternal to zlib)! \n\nNow, if I configure apache with --with-z=$HOME/gnu, the apache configure script\nwill find zlib.h under that path, but will find the preinstalled zutil.h from\nthe old zlib 1.4.1 in /usr/include !!\nThis mix will lead to the compile error.\n\nI am helping myself with manually copying the new zutil.h to\n$HOME/gnu/include.\n\nIf apache really needs zutil.h, the configure script should only look for it\nunder the path given with --with-z, if that has been passed.\n\nThe real solution though is probably not to use zutil.h at all. Some discussion\nabout this seems to have taken place:\nhttp://www.mail-archive.com/dev@httpd.apache.org/msg01883.html", "id": 64418, "time": "2004-09-30T13:46:53Z", "creator": "bb@bernd-becker.de", "creation_time": "2004-09-30T13:46:53Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "text": "Thanks for the report - this is now fixed on HEAD:\n\nhttp://cvs.apache.org/viewcvs.cgi/httpd-2.0/modules/filters/mod_deflate.c?r1=1.58&r2=1.59\n\n", "attachment_id": null, "id": 64976, "creator": "jorton@redhat.com", "time": "2004-10-12T11:43:36Z", "bug_id": 28673, "creation_time": "2004-10-12T11:43:36Z", "is_private": false}]