[{"count": 0, "tags": [], "creator": "rainer-apache@7val.com", "attachment_id": null, "text": "ProxyPassMatch or RewriteRules that reference Unix Domain Sockets do not work if unix: is followed by exactly two slashes. Any other number (including zero, resulting in a path relative to the ServerRoot) appears to work. \n\nIf two slashes are used (as in \"unix://\"), the first path component is removed. For example, the following two methods to specify an FCGI proxy with unix domain sockets\n\nRewriteRule ^\\/\\/?test.fit$ unix://home/canavan/foo/run/php-fpm.sock|fcgi://localhost//home/canavan/foo/htdocs/engine/test.fit [P,L]\n\nProxyPassMatch ^/(.*)$ \"unix://home/canavan/foo/run/php-fpm.sock|fcgi://localhost//home/canavan/foo/testhost/staticwww\"\n\nresult in 503 errors and a message in the error log as follows:\n\n[Mon Jun 01 11:12:45.124529 2015] [proxy:debug] [pid 13534:tid 139897419593472] proxy_util.c(2226): [client 127.0.0.1:47978] AH02545: fcgi: has determined UDS as /canavan/foo/run/php-fpm.sock", "id": 183230, "time": "2015-06-01T09:21:53Z", "bug_id": 57978, "creation_time": "2015-06-01T09:21:53Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 57978, "attachment_id": null, "id": 191296, "time": "2016-05-27T16:24:42Z", "creator": "anrdaemon@yandex.ru", "creation_time": "2016-05-27T16:24:42Z", "is_private": false, "text": "This is not a bug.\nGeneral qualified URI scheme is:\n\n<scheme>:[ \"//\" [ <hostname> ] ] <path>\n\nThus, \n\nprotocol:something - local relative path (implementation-dependent, do NOT rely on this functionality);\nprotocol:/something - local absolute path;\nprotocol://something - unknown path on remote host \"something\" (commonly considered equivalent to \"protocol://something/\", i.e. root path on \"something\" host);\nprotocol:///something - absolute path on unnamed(=local) host (also often seen the more explicit form \"protocol://./something\"; since FQDN name ends in a dot, a lone dot represents an empty name)."}, {"count": 2, "tags": [], "text": "I would argue that the (optional) authority part of the URI is obviously not useful for the unix: scheme, and thus unix:/foo and unix://foo should be equivalent.\n\nAlternatively, apachectl configtest should reject any configuration that references unix: URIs with an authority.", "attachment_id": null, "bug_id": 57978, "id": 192002, "time": "2016-06-28T14:58:43Z", "creator": "rainer-apache@7val.com", "creation_time": "2016-06-28T14:58:43Z", "is_private": false}]