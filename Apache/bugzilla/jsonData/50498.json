[{"count": 0, "tags": [], "creator": "sandals@crustytoothpaste.net", "is_private": false, "id": 142847, "attachment_id": null, "bug_id": 50498, "creation_time": "2010-12-19T16:58:38Z", "time": "2010-12-19T16:58:38Z", "text": "(This is Debian bug #605940.)\n\nXMP permits only rdf:Description elements directly under rdf:RDF. libxmlgraphics-commons-java does not enforce this and produces some odd results in the XMP (it looks like it treats top-level non-Description elements as properties).  These top-level non-rdf:Description elements should either be rejected or turned into rdf:Description elements with rdf:type properties."}, {"count": 1, "tags": [], "creator": "sandals@crustytoothpaste.net", "text": "Created attachment 26423\nPatch to reject top-level typed nodes\n\nThis patch rejects top-level typed nodes with an exception.", "id": 142848, "time": "2010-12-19T16:59:42Z", "bug_id": 50498, "creation_time": "2010-12-19T16:59:42Z", "is_private": false, "attachment_id": 26423}, {"count": 2, "tags": [], "bug_id": 50498, "attachment_id": null, "text": "(In reply to comment #1)\n> Created attachment 26423 [details]\n> Patch to reject top-level typed nodes\n> \n> This patch rejects top-level typed nodes with an exception.\n\n+            String about = attributes.getValue(XMPConstants.RDF_NAMESPACE, \"about\");                                                                                                                     \n+            if (this.contextStack.peek().equals(this.meta) && (about != null)) {                                                                                                                         \n+                //rdf:RDF is the parent, so this is a top-level item that isn't                                                                                                                          \n+                //an rdf:Description, which isn't allowed.                                                                                                                                               \n+                throw new SAXException(\"Top-level element \" + qName + \" not an rdf:Description\");                                                                                                        \n+            }                                                                                             \n\n(1) the check this.contextStack.peek().equals(this.meta) would also return true if xmp:xmpmeta is the parent;\n\n(2) that <!{xmp|rdf}:* rdf:about=\"\"> is the same as 'not an rdf:Description' is not clear to me; aren't there other possibilities for 'not an rdf:Description' that do not have rdf:about?\n\ncould you update patch accordingly, and also provide junit tests that test this new functionality both for absence and presence (see test/java/org/apache/xmlgraphics/xmp/XMPParserTest.java)", "id": 157799, "time": "2012-04-10T19:31:14Z", "creator": "gadams@apache.org", "creation_time": "2012-04-10T19:31:14Z", "is_private": false}]