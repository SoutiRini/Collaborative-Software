[{"attachment_id": null, "tags": [], "bug_id": 7897, "text": "Excerpt from my web.xml file:\n\n  <security-constraint>  \n    <web-resource-collection>\n      <web-resource-name>Accounting</web-resource-name>\n      <url-pattern>/accounting/*</url-pattern>\n    </web-resource-collection>\n    <auth-constraint>\n       <role-name>accounting</role-name>\n       <role-name>admin</role-name>\n    </auth-constraint> \n  </security-constraint>\n\n  <security-constraint>  \n    <web-resource-collection>\n      <web-resource-name>AP</web-resource-name>\n      <url-pattern>/ap/*</url-pattern>\n    </web-resource-collection>\n    <auth-constraint>\n       <role-name>ap</role-name>\n       <role-name>admin</role-name>\n    </auth-constraint>\n  </security-constraint>\n\n  <login-config>\n    <auth-method>BASIC</auth-method>\n    <realm-name>Casey's Secure</realm-name>\n  </login-config>   \n\nExcerpt from my tomcat-users.xml file:\n\n<tomcat-users>\n  <user name=\"admin\"  password=\"admin\"  roles=\"admin\" />\n  <user name=\"accounting\"  password=\"accounting\"  roles=\"accounting\" />\n  <user name=\"ap\"  password=\"ap\" roles=\"ap\" />\n  <user name=\"bookkeeping\" password=\"bookkeeping\"  roles=\"bookkeeping\" />\n</tomcat-users>\n\nLoggin in as \"admin\" gives access correctly to both directories.\nLogging in as \"accounting\" gives access correctly to \"accounting\".\nLogging in as \"ap\" gives access correctly to \"ap\".\n\nHere's the problem.  If I log in as \"accounting\", and try to access \"ap\", \ncatalina has a problem.  On netscape, the message I get is: \"You have tried to \ndownload a file of type httpd/unix-directory.  Click 'More Info' to learn how \nto extend Navigator's capabilities.\"  If I save the file to my desktop and view \nit, it contains the standard blue and white Apache/Tomcat 4.0.3 error page.  If \nI try the same actions in IE, the error message is, \"Internet Explorer cannot \ndownload /ap from...\"\n\nMy guess is that Catalina is not returning the appropriate headers here.  Any \nthoughts?\n\nThanks,\n\nJim", "count": 0, "id": 13141, "time": "2002-04-09T23:16:13Z", "creator": "jim@r5i.com", "creation_time": "2002-04-09T23:16:13Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 7897, "is_private": false, "count": 1, "id": 13343, "time": "2002-04-12T10:00:04Z", "creator": "remm@apache.org", "creation_time": "2002-04-12T10:00:04Z", "text": "There's no \"reauthentication\" for principals. So since the auth principal \ndoesn't have the appropriate role, the client is supposed to get a 403 back. So \nit seems to me that the behavior you describe is normal. You can try to set an \nerror page if you'd like to give some feedback to the user."}, {"count": 2, "tags": [], "creator": "jim@r5i.com", "attachment_id": null, "is_private": false, "id": 13363, "time": "2002-04-12T13:23:31Z", "bug_id": 7897, "creation_time": "2002-04-12T13:23:31Z", "text": "Remy,\n\n  I don't think you entirely understood what I was saying.  True, Tomcat is \nreturning the error page, however, it's returning it without a mime-header.  \nConsequently, IE can't handle it and Netscape prompts you to download it.  This \nis the bug I'm referring to.  It occurs whether you're using JDBC Realms or \nMemoryRealms.  I've setup a test server with directions on how to reproduce the \nerror here: http://dev2.r5i.com/\n\n  Please give it a shot and let me know if you're seeing the same problem."}, {"attachment_id": null, "tags": [], "bug_id": 7897, "is_private": false, "count": 3, "id": 13368, "time": "2002-04-12T14:03:06Z", "creator": "remm@apache.org", "creation_time": "2002-04-12T14:03:06Z", "text": "I tried it. It is a duplicate of bug 6468. It is odd that in that case the \nbrowser doesn't display the page (in many others, it does).\n\n*** This bug has been marked as a duplicate of 6468 ***"}]