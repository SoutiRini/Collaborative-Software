[{"count": 0, "tags": [], "bug_id": 47037, "text": "Whenever I make a request to a path whose content handler is \"cgi-script\", I get a 503 response, and the following in my error_log:\n\n(3)No such process: cgid daemon is gone; is Apache terminating?\n\nI've traced the problem to the following piece of code in mod_cgid.c\n\n    struct sockaddr_un unix_addr;\n    ...\n    ...\n    apr_cpystrn(unix_addr.sun_path, sockname, sizeof unix_addr.sun_path);\n\nwhere sockaddr_un is\n\n/* file sys/un.h */\nstruct sockaddr_un\n  {\n    __SOCKADDR_COMMON (sun_);\n    char sun_path[108];         /* Path name.  */\n  };\n\nSo, effectively it only looks at first 108 characters of sockname. Using longer paths might cause unexpected behavior ( depending on what file first 108 characters resolve to ).\n\nI have a pretty long ServerRoot path. By default, mod_cgid uses ServerRoot/logs/cgid.sock to store cgid.sock file. So I suspect that this is the source of my problem. When I explicitly set ScriptSock to '/tmp/cgid.sock' everything works as expected.", "id": 126266, "time": "2009-04-15T11:00:29Z", "creator": "shah.paritosh@gmail.com", "creation_time": "2009-04-15T11:00:29Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 47037, "text": "FWIW, I'm testing a patch that will improve behavior.", "count": 1, "id": 126286, "time": "2009-04-16T08:09:48Z", "creator": "trawick@apache.org", "creation_time": "2009-04-16T08:09:48Z", "is_private": false}, {"count": 2, "tags": [], "creator": "trawick@apache.org", "text": "Fixed in trunk with r765725.\n\nSince you're using Linux, you will still need to use the ScriptSock directive to specify a shorter pathname.  (For platforms which can handle longer socket pathnames, the new code enables that capability.)\n\nRegardless of the platform limits on socket pathname length, the updated code uses the full, desired path consistently (no truncation) for consistent error reporting, and no longer leaves a truncated socket stranded in the filesystem.", "id": 126296, "time": "2009-04-16T12:29:46Z", "bug_id": 47037, "creation_time": "2009-04-16T12:29:46Z", "is_private": false, "attachment_id": null}]