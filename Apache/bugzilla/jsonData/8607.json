[{"count": 0, "tags": [], "text": "If a valid user, with an invalid role attempts to access a protected area, the \nerror page is NOT produced, instead msg 403 returns to the user. Subsequent \nattempts to login with a VALID user id return:\n\nApache Tomcat/4.0.3 - HTTP Status 404 - /jsp/security/protected/j_security_check\n--------------------------------------------------------------------------------\ntype Status report\nmessage /jsp/security/protected/j_security_check\ndescription The requested resource (/jsp/security/protected/j_security_check) \nis not available.\n\nNote that attempts to access with a user id which is NOT in the tomcat-users \nfile works as expected: the error page is produced.\n\nReproduction scenario:\n\n1. Install Tomcat 4.0.3 right out of the box.\n2. Add a single user:  <user name=\"fred\"   password=\"flint\"  \nroles=\"standard,manager\" /> to tomcat-users.xml\n3. Attempt to access the examples/jsp/security/protected with valid user tomcat.\n  This will work.\n4. Attempt to access the examples/jsp/security/protected with user fred/flint, \nget message 403:\n\nApache Tomcat/4.0.3 - HTTP Status 403 - Access to the requested resource has \nbeen denied\n--------------------------------------------------------------------------------\ntype Status report\nmessage Access to the requested resource has been denied\ndescription Access to the specified resource (Access to the requested resource \nhas been denied) has been forbidden.\n\n5. Attempt access again using tomcat/tomcat, get message 404 as above. Further \nattempts at access fail as well. \n\n\nSee also Tomcat user list emails:\n\nFrom: \"Christopher Pennock\"\nSubject:  FORM login with wrong role gets 404, not error page - bug?\nDate:  Tue, 5 Feb 2002 12:21:49 -0500\n\nFrom: Victoria Einarsson\nSubject:  wrong user role => Error 403 instead of redirecting to\n    Form-Error-Page\nDate:  Thu, 10 Jan 2002 11:34:00 +0100", "attachment_id": null, "bug_id": 8607, "id": 14957, "time": "2002-04-28T19:08:12Z", "creator": "dmfarb@chicagonet.net", "creation_time": "2002-04-28T19:08:12Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 8607, "is_private": false, "id": 49484, "time": "2003-12-20T22:35:14Z", "creator": "medthomas@ntlworld.com", "creation_time": "2003-12-20T22:35:14Z", "tags": [], "text": "This behaviour is as per the spec.\n\nThe 403 is the correct response to a valid user that is not authorised to \naccess the requested resource. Once a valid user has logged in, they stay \nlogged in until the sesison ends (timeout or the browser is closed).\n\nTrying to access the login page directly is not an accepted way of trying to \nchanging the current user (or even to login in the first place) and therefore \nresults in the 404."}, {"count": 2, "tags": [], "text": "Why can't we use the directive <error-code>403 in order to redirect the error \non our own error page", "is_private": false, "id": 63742, "creator": "olivier.teissere@francetelecom.com", "time": "2004-09-17T16:05:21Z", "bug_id": 8607, "creation_time": "2004-09-17T16:05:21Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 8607, "attachment_id": null, "is_private": false, "id": 63775, "time": "2004-09-18T20:47:58Z", "creator": "markt@apache.org", "creation_time": "2004-09-18T20:47:58Z", "text": "Please ask questions like this on the tomcat-user mailing list rather than hi-\njacking bug reports."}]