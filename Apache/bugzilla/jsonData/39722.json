[{"attachment_id": null, "tags": [], "bug_id": 39722, "is_private": false, "count": 0, "id": 89765, "time": "2006-06-05T10:22:58Z", "creator": "apache@bartman.prv.pl", "creation_time": "2006-06-05T10:22:58Z", "text": "Try to set \nDocumentRoot\ndirective to path with nonexistent drive letter, ex.\nDocumentRoot g:\\somepath\n\nDuring httpd start (both command line called and as a service) httpd will crash."}, {"count": 1, "tags": [], "text": "Just a footnote that we need to determine if the fault occurs in apr, or as\na result of a bad call to apr.", "is_private": false, "id": 89797, "creator": "wrowe@apache.org", "time": "2006-06-05T23:26:23Z", "bug_id": 39722, "creation_time": "2006-06-05T23:26:23Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 39722, "is_private": false, "count": 2, "id": 109837, "time": "2007-10-27T09:42:57Z", "creator": "adrian.buckley@ntlworld.com", "creation_time": "2007-10-27T09:42:57Z", "text": "I have traced this to line 1176 in server/core.c:\n\n    arg = ap_server_root_relative(cmd->pool, arg);\n\nwhich returns a NULL if a directory does not exist.\n\nWhen line 1178 in server/core.c is reached, this NULL is passed to\nap_is_directory as a parameter:\n\n    if (apr_filepath_merge((char**)&conf->ap_document_root, NULL, arg,\n                           APR_FILEPATH_TRUENAME, cmd->pool) != APR_SUCCESS\n        || !ap_is_directory(cmd->pool, arg)) {\n\nwhich causes the crash."}, {"count": 3, "tags": [], "creator": "nick@webthing.com", "text": "Looks convincing to me.  Committing an additional check - r589177.  Thanks for\nthe diagnosis.fix possible crash at startup in case of nonexistent DocumentRoot.", "id": 109838, "time": "2007-10-27T11:51:53Z", "bug_id": 39722, "creation_time": "2007-10-27T11:51:53Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 39722, "text": "Fixed in r589618", "count": 4, "id": 109866, "time": "2007-10-29T06:22:01Z", "creator": "nick@webthing.com", "creation_time": "2007-10-29T06:22:01Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 39722, "is_private": false, "text": "Hi All,\n\nAccording to this bugfix, the return value of ap_server_root_relative should be checked to make sure that the directory exists.  So I think that a good programming practice should be to always check its return value. And in fact, the return value check IS preformed at 90% or the time when the function is invoked in the entire project. \n\nHowever, there is a place in server/scoreboard.c, function open_scoreboard(), where the return value check is missing.  Maybe this is because that a constant value \"ap_scoreboard_fname = DEFAULT_SCOREBOARD\" is passed as the second parameter of the function.  But I think it is safe to perform a check anyway.\n\nThe patch attached is against revision 806655.\n\nBoya", "id": 130005, "time": "2009-08-27T11:24:42Z", "creator": "boya.sun@case.edu", "creation_time": "2009-08-27T11:24:42Z", "attachment_id": null}, {"attachment_id": 24182, "tags": [], "bug_id": 39722, "is_private": false, "count": 6, "id": 130006, "time": "2009-08-27T11:27:05Z", "creator": "boya.sun@case.edu", "creation_time": "2009-08-27T11:27:05Z", "text": "Created attachment 24182\nAnother similar bug discovered in server/scoreboard.c"}, {"attachment_id": null, "tags": [], "bug_id": 39722, "is_private": false, "count": 7, "id": 165308, "time": "2013-02-18T17:32:01Z", "creator": "mike.rumph@oracle.com", "creation_time": "2013-02-18T17:32:01Z", "text": "Another instance where a NULL return from the function ap_server_root_relative is ignored is seen in Apache httpd bug 54560:\n\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=54560"}]