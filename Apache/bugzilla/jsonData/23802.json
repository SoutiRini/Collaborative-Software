[{"count": 0, "tags": [], "bug_id": 23802, "text": "This is a bug in JBOSS 3.2.2RC4 (with Tomcat as a servlet engine). It is also a \nbug in Tomcat 4.1.27 which shows up in this JBOSS version.\n\nI have configured custom error pages in my web.xml for each error code as shown \nbelow...\n\n<error-page>\n    <error-code>401</error-code>\n    <location>/errors/401.htm</location>\n</error-page>\n<error-page>\n    <error-code>402</error-code>\n    <location>/errors/402.htm</location>\n</error-page>\n...\n...\n\n\nIn my BASIC authentication servlet, I have code like ...\n\n.....\nprotected void authenticate(HttpServletResponse response)\n{ \n    response.setStatus(HttpServletResponse.SC_UNAUTHORIZED); \n    response.setHeader(\"WWW-Authenticate\", \"Basic realm=\\\"JavaSecrets\\\"\"); \n}\n.....\n\nYou can see the complete code of the example servlet at \nhttp://venus.cs.depaul.edu/se452/web-src/forms_BasicAuthentication_java.html\n\n\nThe \"authenticate\" method gets invoked each time the \"Authorization\" header is \nmissing in the HttpServletRequest.\n\nJBOSS 3.2.2RC4 (with Tomcat as a servlet engine) always returns the \"custom\" \n401 error page if one is configured, and never shows the browser login popup to \nenable entering the login and password.\n\nHowever, if I comment out the \"custom\" 401 error page definition in my web.xml, \nI am able to authenticate myself using the Basic Authentication servlet through \nthe browser login popup.\n\nThis means, one cannot have a \"custom\" 401 error page in the web.xml, if one is \ndoing Basic authentication using a servlet.\n\nThe same behaviour is seen if one configures Basic authentication within the \nweb.xml to have protected domains. So, avoid defining a \"custom\" 401 error page \nto get your Basic authentication working.", "id": 45586, "time": "2003-10-14T10:37:02Z", "creator": "vijayang@boursorama.com", "creation_time": "2003-10-14T10:37:02Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "kcbaltz@yahoo.com", "is_private": false, "id": 47311, "attachment_id": null, "bug_id": 23802, "creation_time": "2003-11-13T19:38:36Z", "time": "2003-11-13T19:38:36Z", "text": "I'll  \"pile on\" this bug and say that I'm having similar trouble with Tomcat\n4.1.24.  I'm not using a custom servlet, simply a custom <error-page> for 401\nerrors and BASIC authentication defined via the web.xml file.  With the custom\npage defined, the login box is never shown and the app immediately displays my\ncustom error page.  "}, {"count": 2, "tags": [], "text": "I' ve got the same problems with Tomcat 4.1.29.\nThe BASIC authentication is confgured in web.xml having only static\nhtml-pages in my webapp. The webapp directly forwards to the location\nof the 401 error-page without giving the chance to authenticate.", "is_private": false, "bug_id": 23802, "id": 48958, "time": "2003-12-12T07:46:04Z", "creator": "blume@conterra.de", "creation_time": "2003-12-12T07:46:04Z", "attachment_id": null}, {"count": 3, "text": "Hi,\n\nI'm having the same problem with JBoss 3.2.2 (with Tomcat 4.1.27).\n\nJulien Dubois.", "bug_id": 23802, "is_private": false, "id": 49356, "time": "2003-12-18T14:48:07Z", "creator": "julien@julien-dubois.com", "creation_time": "2003-12-18T14:48:07Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "creator": "yoavs@computer.org", "attachment_id": 11853, "is_private": false, "id": 59289, "time": "2004-06-16T14:07:48Z", "bug_id": 23802, "creation_time": "2004-06-16T14:07:48Z", "text": "Created attachment 11853\nTrivial test WAR showing custom 401 error page"}, {"count": 5, "tags": [], "bug_id": 23802, "text": "As the WAR shows, custom 401 error pages do work.  Can someone upload a test \nWAR with authentication setup in web.xml so that I can test it?", "id": 59291, "time": "2004-06-16T14:09:44Z", "creator": "yoavs@computer.org", "creation_time": "2004-06-16T14:09:44Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "This bug report has been transferred to Tomcat 5 because TC4 and TC5 share the \nconnectors and TC5 is now the focus of development effort", "is_private": false, "bug_id": 23802, "id": 59573, "time": "2004-06-19T12:24:08Z", "creator": "markt@apache.org", "creation_time": "2004-06-19T12:24:08Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "yoavs@computer.org", "text": "I guess the answer to my question is no, so I'm closing this.", "id": 60920, "attachment_id": null, "bug_id": 23802, "creation_time": "2004-07-21T18:16:18Z", "time": "2004-07-21T18:16:18Z", "is_private": false}]