[{"count": 0, "tags": [], "bug_id": 5066, "attachment_id": null, "id": 8240, "time": "2001-11-25T07:39:09Z", "creator": "esommer@cisco.com", "creation_time": "2001-11-25T07:39:09Z", "is_private": false, "text": "Building with command:\n./configure --with-apxs=/usr/local/apache2/bin/apxs --with-java=/usr/j2se \n--with-tomcat=/usr/local/tomcat\n\nconfigure, line 2278:\n   local_prefix=\"`apxs -q PREFIX`\"\n--Incorrectly uses the literal 'apxs' instead of the env var '${APXS}'\n\nconfigure, line 2505:\n   if ${TEST} i! \"${local_target}\" = \"apr\"\n--Extra 'i' before the '!'\n\nMakefile.in -- missing the entries for apache-2.0-build, apache-2.0-clean\n\napache-2.0/Makefile.in, line 67:\n--Tag 'all:' should be 'build:'\n\napache-2.0/Makefile.in, line 71:\n--Incorrectly uses lib ../lib/libwebapp.la -- should be ../lib/libwebapp.a\n\nHere are the patches for the 3 files:\n\n/////////////////////////////////////////////////////////////////////\n////////              mod_webapp-configure-patch             ////////\n/////////////////////////////////////////////////////////////////////\n*** configure.bad       Sun Nov 25 16:27:08 2001\n--- configure   Sun Nov 25 16:27:39 2001\n***************\n*** 2275,2281 ****\n      then\n  \n                                                              \nMODULE=\"apache-2.0\"\n!       local_prefix=\"`apxs -q PREFIX`\"\n        APR_CFGFLG=\"\"\n        APR_VARFIL=\"${local_prefix}/lib/APRVARS\"\n        APR_LIBDIR=\"${local_prefix}/lib\"\n--- 2275,2281 ----\n      then\n  \n                                                              \nMODULE=\"apache-2.0\"\n!       local_prefix=\"`${APXS} -q PREFIX`\"\n        APR_CFGFLG=\"\"\n        APR_VARFIL=\"${local_prefix}/lib/APRVARS\"\n        APR_LIBDIR=\"${local_prefix}/lib\"\n***************\n*** 2502,2508 ****\n  do\n    TARGET_BUILD=\"${TARGET_BUILD} ${local_target}-build\"\n    TARGET_CLEAN=\"${TARGET_CLEAN} ${local_target}-clean\"\n!   if ${TEST} i! \"${local_target}\" = \"apr\"\n    then\n      TARGET_LBUILD=\"${TARGET_LBUILD} ${local_target}-build\"\n      TARGET_LCLEAN=\"${TARGET_LCLEAN} ${local_target}-clean\"\n--- 2502,2508 ----\n  do\n    TARGET_BUILD=\"${TARGET_BUILD} ${local_target}-build\"\n    TARGET_CLEAN=\"${TARGET_CLEAN} ${local_target}-clean\"\n!   if ${TEST} ! \"${local_target}\" = \"apr\"\n    then\n      TARGET_LBUILD=\"${TARGET_LBUILD} ${local_target}-build\"\n      TARGET_LCLEAN=\"${TARGET_LCLEAN} ${local_target}-clean\"\n\n/////////////////////////////////////////////////////////////////////\n////////              mod_webapp-Makefile.in-patch           ////////\n/////////////////////////////////////////////////////////////////////\n*** Makefile.in.bad     Sun Nov 25 17:03:36 2001\n--- Makefile.in Sun Nov 25 17:04:35 2001\n***************\n*** 107,112 ****\n--- 107,118 ----\n  apache-1.3-clean:\n        @$(MAKE) template MFLG=\"$(MAKEFLAGS)\" MDIR=\"apache-1.3\" MTGT=\"clean\"\n  \n+ apache-2.0-build:\n+       @$(MAKE) template MFLG=\"$(MAKEFLAGS)\" MDIR=\"apache-2.0\" MTGT=\"build\"\n+ \n+ apache-2.0-clean:\n+       @$(MAKE) template MFLG=\"$(MAKEFLAGS)\" MDIR=\"apache-2.0\" MTGT=\"clean\"\n+ \n  template:\n        @ { \\\n            $(ECHO) \"\" ; \\\n\n/////////////////////////////////////////////////////////////////////\n////////         mod_webapp-apache2.0-Makefile.in.patch      ////////\n/////////////////////////////////////////////////////////////////////\n*** Makefile.in.bad     Sun Nov 25 17:03:36 2001\n--- Makefile.in Sun Nov 25 17:04:35 2001\n***************\n*** 107,112 ****\n*** Makefile.in.bad Sun Nov 25 17:13:14 2001\n--- Makefile.in Sun Nov 25 17:14:35 2001\n***************\n*** 64,74 ****\n\n  MODULE = mod_webapp.la\n\n! all: $(MODULE)\n\n  mod_webapp.la: mod_webapp.c\n    @$(ECHO) Compiling and Linking Apache 2.0 WebApp Module\n!   $(APXS) -I../include -c ../lib/libwebapp.la mod_webapp.c\n\n  install: mod_webapp.la\n    $(APXS) -i mod_webapp.la\n--- 64,74 ----\n\n  MODULE = mod_webapp.la\n\n! build: $(MODULE)\n\n  mod_webapp.la: mod_webapp.c\n    @$(ECHO) Compiling and Linking Apache 2.0 WebApp Module\n!   $(APXS) -I../include -c ../lib/libwebapp.a mod_webapp.c\n\n  install: mod_webapp.la\n    $(APXS) -i mod_webapp.la"}]