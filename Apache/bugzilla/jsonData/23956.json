[{"count": 0, "tags": [], "text": "mod_ssl (both 1.3.x and 2.x) currently uses the SSL_LIBRARY_TEXT define instead of the \nSSLeay_version() function to determine the version number of OpenSSL which it is using.\n\nThis is bad because here the mod_ssl binary is carrying the OpenSSL version number instead of \nquerying the version of OpenSSL it's using.  This can lead to confusion (especailly security related), if \nfor example an administrator patches OpenSSL to be 3.4.d instead of 3.4.a, to work around known \nmod_ssl related vulnerabilities in OpenSSL.\n\nEven though the system has been properly patched, it will still report the old (mod_ssl compiled in) \nversion number to Scanning software etc.\n\nOur customers complained, and we have fixed the following in our version of Apache... however I feel \nthis change would make sense up-stream as well.\n\nI've attached a diff against 1.3.28:\n\nThe 2.1.x diff is nearly identical, only different line numbers.  Simply replace the one instance of \n\"SSL_LIBRARY_TEXT\" in ssl_engine_vars.c  with \"SSLeay_version(SSLEAY_VERSION)\".\n\nThanks for your time.\n\nRCS file: /cvs/root/apache_mod_ssl/mod_ssl/pkg.sslmod/ssl_engine_vars.c,v\nretrieving revision 1.1.1.8\ndiff -u -r1.1.1.8 ssl_engine_vars.c\n--- ssl_engine_vars.c   2003/07/25 02:32:10     1.1.1.8\n+++ ssl_engine_vars.c   2003/10/20 20:36:34\n@@ -617,7 +617,7 @@\n         result = ap_psprintf(p, \"mod_ssl/%s\", MOD_SSL_VERSION);\n     }\n     else if (strEQ(var, \"LIBRARY\")) {\n-        result = ap_pstrdup(p, SSL_LIBRARY_TEXT);\n+        result = ap_pstrdup(p, SSLeay_version(SSLEAY_VERSION));\n         if ((cp = strchr(result, ' ')) != NULL) {\n             *cp = '/';\n             if ((cp2 = strchr(cp, ' ')) != NULL)\ncvs server: Diffing mod_ssl/pkg.sslsup", "is_private": false, "id": 45954, "creator": "eseidel@apple.com", "time": "2003-10-20T20:48:06Z", "bug_id": 23956, "creation_time": "2003-10-20T20:48:06Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "id": 45959, "time": "2003-10-20T22:37:22Z", "bug_id": 23956, "creation_time": "2003-10-20T22:37:22Z", "is_private": false, "text": "Thanks for the patch.  Note that to get a change in the independent mod_ssl that\nworks with Apache 1.3, talk to the folks that maintain it (www.modssl.org).  It\nseems clear from your description what we need to do with 2.1 and 2.0.\n"}, {"text": "Committed to HEAD, will propose for backport to 2.0.  Thanks for the patch.\n\nhttp://cvs.apache.org/viewcvs/httpd-2.0/modules/ssl/ssl_engine_vars.c.diff?r1=1.27&r2=1.28", "tags": [], "bug_id": 23956, "is_private": false, "count": 2, "id": 48112, "time": "2003-11-25T21:13:31Z", "creator": "jorton@redhat.com", "creation_time": "2003-11-25T21:13:31Z", "attachment_id": null}]