[{"count": 0, "attachment_id": null, "creator": "yoshihito.fukuyama@gmail.com", "is_private": false, "id": 154348, "time": "2012-02-29T06:08:13Z", "bug_id": 52793, "creation_time": "2012-02-29T06:08:13Z", "tags": [], "text": "I used jenkins and apache httpd and mod_jk 1.2.32.\nJenkins throws NullPointerException.\n\nmod_jk config:\n---- mod_jk.conf\nJkWorkersFile conf/workers.properties\nJkMount /* jenkins\n\n---- workers.properties\nworker.list=jenkins\nworker.jenkins.type=ajp13\nworker.jenkins.host=localhost\nworker.jenkins.port=8009\n----\n\njenkins log:\n----\n:\nFeb 29, 2012 1:11:07 PM hudson.WebAppMain$2 run\nINFO: Jenkins is fully up and running\nFeb 29, 2012 1:26:40 PM winstone.Logger logInternal\nSEVERE: Error within request handler thread\njava.lang.NullPointerException\n        at java.util.Hashtable.put(Hashtable.java:411)\n        at winstone.ajp13.Ajp13IncomingPacket.parsePacket(Ajp13IncomingPacket.java:163)\n        at winstone.ajp13.Ajp13Listener.allocateRequestResponse(Ajp13Listener.java:184)\n        at winstone.RequestHandlerThread.run(RequestHandlerThread.java:79)\n        at java.lang.Thread.run(Thread.java:636)\n:\n----\nThis is bug in the jenkins(winstone)...\n\n\nBut I think due to the initialization of mod_jk 1.2.32.\n\n---- svn diff\nIndex: common/jk_util.c\n===================================================================\n--- common/jk_util.c    (revision 1294951)\n+++ common/jk_util.c    (working copy)\n@@ -2079,7 +2079,7 @@\n     s->attributes_values = NULL;\n     s->num_attributes = 0;\n     s->route = NULL;\n-    s->activation = JK_LB_ACTIVATION_ACTIVE;\n+    s->activation = JK_LB_ACTIVATION_TEXT_ACTIVE;\n     s->secret = NULL;\n     s->reco_buf = NULL;\n     s->reco_status = RECO_NONE;\n----\n\n\nhttp://tomcat.apache.org/connectors-doc/miscellaneous/changelog.html\nChanges between 1.2.31 and 1.2.32\nLB: Forward worker activation state as request attribute \"JK_LB_ACTIVATION\".\nPossible values are \"ACT\" (active), \"DIS\" (disabled) and \"STP\" (stopped)."}, {"count": 1, "tags": [], "text": "Your fix is correct. I applied it as r1296630. It will be part of the next version 1.2.33.\n\nThanks!", "is_private": false, "id": 154477, "creator": "rainer.jung@kippdata.de", "time": "2012-03-03T14:42:36Z", "bug_id": 52793, "creation_time": "2012-03-03T14:42:36Z", "attachment_id": null}]