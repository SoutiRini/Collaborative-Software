[{"count": 0, "tags": [], "bug_id": 5218, "is_private": false, "id": 8479, "attachment_id": null, "creator": "hfrtec@hotmail.com", "creation_time": "2001-11-30T16:53:12Z", "time": "2001-11-30T16:53:12Z", "text": "This error appears when I was testing Cocoon2 (cocoon-2.0rc2.tar) and add a \nmatch in a pipeline section of the file sitemap.xmap with something like this:\n\n  <map:match pattern=\"\">\n    <map:generate type=\"jsp\" src=\"eventos/buscarEventos.jsp\"/>\n    <map:transform src=\"test/Semana.xslt\"/>\n    <map:serialize/>\n   </map:match> \n\nBasically a JSP that responds with some XML data and use a XSLT to process that \nXML data.\n\nWhen I try to used it I got an error like this:\norg.apache.cocoon.ProcessingException: SAXException JspGenerator.generate(): \norg.xml.sax.SAXParseException: The root element is required in a well-formed \ndocument.\n\nthen I start searching for the cause and execute de JSP normally and Tomcat \nresponse was:\n\nIncompatible type for method. Explicit cast needed to convert \njava.lang.Throwable to java.lang.Exception.\n            if (pageContext != null) pageContext.handlePageException(t);\n                                                                     ^\n1 error\n\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:284)\n\tat org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:546)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary\n(JspServlet.java:177)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:189)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:382)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:474)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:201)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2344)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:164)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:462)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:163)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1011)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1106)\n\tat java.lang.Thread.run(Thread.java:484)\n\nI downloaded the source of Tomcat jakarta-tomcat-4.0.1-src.tar and search for \nthat line and I found it .... so I patch it ( File: \norg.apache.jasper.compiler.JspParseEventListener.java ) with:\n\n\twriter.println(\"if (pageContext != null) pageContext.handlePageException\n((Exception)t);\");\n\nI just add the Cast to an Exception Object. Compile the class and the error \ndisappeared.\n\nIf you need more information let me know."}, {"count": 1, "tags": [], "text": "If you look at javax.servlet.jsp.Pagecontext, you'll notice that both\nhandlePageException(Exception) and handlePageException(Throwable) are defined. \nJavac should be able to pick up the second method without the explicit cast. \nEither you have use a bad servelet api package, or there's something wrong with\nyour javac.  The same code has been generated and works for every jsp page.", "is_private": false, "id": 8836, "creator": "kin-man.chung@sun.com", "time": "2001-12-12T10:17:09Z", "bug_id": 5218, "creation_time": "2001-12-12T10:17:09Z", "attachment_id": null}]