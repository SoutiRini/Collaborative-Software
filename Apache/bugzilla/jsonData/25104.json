[{"count": 0, "tags": [], "bug_id": 25104, "attachment_id": null, "text": "Using Apache 2.0.48, Tomcat 4.1.29 and mod_jk 1.2.5 on Solaris.\n\nAll HTTP-requests for directories without index.html\nget served by Tomcat even if \"JkOptions -ForwardDirectories\"\nis used (or ForwardDirectories is removed).\n\nApache has no \"Options Indexes\" set, so requests\nto directories without a proper index file should\nbe rejected with a \"403 Forbidden\". Directories\ncontaining index.html should be served by Apache\nwhereas only requests for directories with index.jsp\nshould be directed to Tomcat via mod_jk.\n\nDocumentRoot in Apache and appBase in Tomcat\npoint to same directory.\n\n\nSteps to Reproduce:\n\n1.) Relevate settings from httpd.conf:\n ...\n DirectoryIndex index.html index.jsp\n ...\n <IfModule mod_jk.c>\n   JkWorkersFile /confdir/workers.properties\n   JkLogFile /logdir/mod_jk.log\n   JkLogLevel info\n   JkLogStampFormat \"[%d.%m.%Y %H:%M:%S] \"\n   JkOptions -ForwardDirectories\n   JkMount /*.jsp ajp13\n </IfModule>\n\n2.) Create a test directory (\"/fortomcat\") with\n    simple index.jsp within and an empty directory\n    (\"/notfortomcat\") as well.\n\n3.) Make HTTP-requests for both directories.\n\n\nExpected Results:\n\n http://host/fortomcat/\n -> 200 OK (Tomcat serving index.jsp) or\n    500 Internal Server Error (Tomcat complaining\n    about \"No context configured...\")\n \n http://host/notfortomcat/\n -> 403 Forbidden (error from Apache)\n\n\nActual Results:\n\n http://host/fortomcat/\n -> 200 OK (Tomcat serving index.jsp) or\n    500 Internal Server Error (Tomcat complaining\n    about \"No context configured...\")\n \n http://host/notfortomcat/\n -> 500 Internal Server Error (Tomcat complaining\n    about \"No context configured...\") WRONG!\n\n\nAdditional Information:\n\nForwardDirectories was broken in mod_jk 1.2.4 too.\nWith 1.2.4, requests for directories where never\nforwarded to Tomcat (\"JkOptions +ForwardDirectories\"\ndid not work). This was \"fixed\" in 1.2.5:\n\nChanges with JK 1.2.5\n    * Fix Apache 2 connector so that DirectoryIndex works for an\n      index.jsp page if JkOptions ForwardDirectories was configured.\n      [hgomez]\n\nNow forwarding works a bit too well. :)", "id": 48331, "time": "2003-12-01T09:57:05Z", "creator": "hannumk@sunpoint.net", "creation_time": "2003-12-01T09:57:05Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "This component is now deprecated. If you still experience this issue, please \nupgrade to the Coyote JK2 connector.\n\nNo further work will take place against this bug report.\n\n", "id": 59496, "time": "2004-06-18T18:42:54Z", "bug_id": 25104, "creation_time": "2004-06-18T18:42:54Z", "is_private": false, "attachment_id": null}]