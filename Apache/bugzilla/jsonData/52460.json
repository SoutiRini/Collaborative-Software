[{"count": 0, "tags": [], "bug_id": 52460, "attachment_id": null, "id": 152725, "time": "2012-01-12T16:42:00Z", "creator": "thomas.toth@oenb.at", "creation_time": "2012-01-12T16:42:00Z", "is_private": false, "text": "Hi,\n\nI stumbled upon an issue when trying to run Tomcat 7.0.23 (presumably all Tomcat versions) with a security manager. \n\nI managed without any problems to create a servlet, pack it into a .war containing a signed .jar file and run it with a security manager.\n\nAccording to the final Java Servlet Specification (November 2009) the application directory structure of a .war the /WEB-INF/classes/ directory shall contain the application's .class files. /WEB-INF/lib/*.jar shall contain servlets, beans, static resources as well as other resources that are useful to the Web application. \n\nSo in my understanding the .war shall contain my application code under /WEB-INF/classes/ while utility code shall be placed under /WEB-INF/lib/.\n\nHere is the problem:\nIf I use this recommended way of files placement, it is impossible to run the application with a security manager properly. As the .class files reside under /WEB-INF/classes I can only sign the .war file. But this signature is not reflected in the security manager. Although the .war file (and also the .class files) is signed, the security manager is not provided with this information, making it impossible to create custom policies in catalina.policy.\n\nIs using signed jars the only way of running servlets with a security manager?\n\nIs this a JVM or a Tomcat bug?\n\nThomas"}, {"count": 1, "tags": [], "text": "Your understanding of the spec is incorrect. You can place application code in JARs in WEB-INF/lib.\n\nPlease use the users mailing list if you have any further questions regarding this matter.", "is_private": false, "id": 152729, "creator": "markt@apache.org", "time": "2012-01-12T19:39:19Z", "bug_id": 52460, "creation_time": "2012-01-12T19:39:19Z", "attachment_id": null}]