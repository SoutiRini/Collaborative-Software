[{"attachment_id": null, "tags": [], "bug_id": 56427, "is_private": false, "count": 0, "id": 174690, "time": "2014-04-18T08:09:26Z", "creator": "sergio@bosoconsulting.it", "creation_time": "2014-04-18T08:09:26Z", "text": "In order to simulate most modern client, it would be useful to have options in the sampler to:\na- read only the headers (inside a mailbox);\nb- read only the last (i.e. most recent) N headers;\nc- read a specific message (using an index returned from previous call;\n\nUsing feature b- I could iterate calling feature c-.\nTIA"}, {"count": 1, "tags": [], "bug_id": 56427, "is_private": false, "id": 174697, "attachment_id": null, "creator": "sebb@apache.org", "creation_time": "2014-04-18T12:47:14Z", "time": "2014-04-18T12:47:14Z", "text": "a) The code already fetches the header separately from the body, so it should be easy enough to suppress fetching the body. Just means adding an option checkbox to the GUI.\n\nb) The code already has the option to fetch N messages - does this not work for you? Or does it fetch the earliest N messages?\n\nc) That should be easy enough to do.\n\nOne possible approach to providing the message ids via the GUI:\n\nThe number field currently expects a positive number.\nThis could be extended to support a negative number, meaning to count back from the highest numbered message. \nSo if there are 100 messges in the folder:\n\n 10 would mean msgs 1-10  (same for +10)\n-10 would mean msgs 91-100\n\nIn both cases, the sampler would return 10 messages, i.e. the absolute value of the number. [This would support option (b) if it does not already]\n\nOne possible way to indicate a single message number would be to prefix the number with '=', for example:\n\n=42\n\nThis would avoid needing to change the GUI, and personally I would find it easier to use than having to enter the numbers in a different field or select an additional check-box. But others may think otherwise!"}, {"count": 2, "tags": [], "text": "a) using a checkbox to avoid downloading the bodies seems ok for me.\n\nb) yes, at the time being, when you set the interface to download N messages it downloads the oldest ones.\nThe point is, we need a way to know how many messages there are in the mailbox:\nwhat happens if I try to download 10 messages, but only 5 are present?\nI think we need an optional field with the name of the variable where to put this info.\n\nc) the solutions you are proposing work well for me. \nThe actual case I'm thinking of is where I am simulating a user reading his mail.\nEvery time  one logs on, he downloads only the new messages, which can be done if one knows how many messages there were previously (with some simple math).", "is_private": false, "id": 174700, "creator": "sergio@bosoconsulting.it", "time": "2014-04-18T14:53:32Z", "bug_id": 56427, "creation_time": "2014-04-18T14:53:32Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 56427, "is_private": false, "text": "(In reply to sergio from comment #2)\n> a) using a checkbox to avoid downloading the bodies seems ok for me.\n\nOK\n\n> b) yes, at the time being, when you set the interface to download N messages\n> it downloads the oldest ones.\n> The point is, we need a way to know how many messages there are in the\n> mailbox:\n> what happens if I try to download 10 messages, but only 5 are present?\n\nIt will only download 5.\n\n> I think we need an optional field with the name of the variable where to put\n> this info.\n\nSorry, put what info?\n \n> c) the solutions you are proposing work well for me. \n> The actual case I'm thinking of is where I am simulating a user reading his\n> mail.\n> Every time  one logs on, he downloads only the new messages, which can be\n> done if one knows how many messages there were previously (with some simple\n> math).\n\nAssuming no messages are removed in the meantime...\n\nI think MUAs normally use some kind of UID to keep track of the last message they read, but I'm not sure this is supported fully by JavaMail for all server types.", "id": 174702, "time": "2014-04-18T15:19:24Z", "creator": "sebb@apache.org", "creation_time": "2014-04-18T15:19:24Z", "attachment_id": null}, {"count": 4, "attachment_id": null, "creator": "sergio@bosoconsulting.it", "text": "(In reply to Sebb from comment #3)\n> (In reply to sergio from comment #2)\n> > a) using a checkbox to avoid downloading the bodies seems ok for me.\n> \n> OK\n> \n> > b) yes, at the time being, when you set the interface to download N messages\n> > it downloads the oldest ones.\n> > The point is, we need a way to know how many messages there are in the\n> > mailbox:\n> > what happens if I try to download 10 messages, but only 5 are present?\n> \n> It will only download 5.\n> \n> > I think we need an optional field with the name of the variable where to put\n> > this info.\n> \n> Sorry, put what info?\nI meaned, the number of messages present i the mailbox.\n\n>  \n> > c) the solutions you are proposing work well for me. \n> > The actual case I'm thinking of is where I am simulating a user reading his\n> > mail.\n> > Every time  one logs on, he downloads only the new messages, which can be\n> > done if one knows how many messages there were previously (with some simple\n> > math).\n> \n> Assuming no messages are removed in the meantime...\nyes, but, for the test purpose, I can safely assume that only one user at a time actually accesses the maibox.\n\nI think that these features can simulate the behaviour of most MUA, for the load testing purpose.\nHowever I will go  deeper into IMAP features in the next few days...", "id": 174704, "time": "2014-04-18T15:30:40Z", "bug_id": 56427, "creation_time": "2014-04-18T15:30:40Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 56427, "text": "(In reply to sergio from comment #4)\n> (In reply to Sebb from comment #3)\n> > (In reply to sergio from comment #2)\n...\n> > > I think we need an optional field with the name of the variable where to put\n> > > this info.\n> > \n> > Sorry, put what info?\n> I meaned, the number of messages present i the mailbox.\n> \n\nYou mean that if a variable name is provided, then the sampler will store the total message count in it?", "id": 174706, "attachment_id": null, "creator": "sebb@apache.org", "creation_time": "2014-04-18T15:44:42Z", "time": "2014-04-18T15:44:42Z", "is_private": false}, {"count": 6, "attachment_id": null, "creator": "sergio@bosoconsulting.it", "text": "(In reply to Sebb from comment #5)\n> (In reply to sergio from comment #4)\n> > (In reply to Sebb from comment #3)\n> > > (In reply to sergio from comment #2)\n> ...\n> > > > I think we need an optional field with the name of the variable where to put\n> > > > this info.\n> > > \n> > > Sorry, put what info?\n> > I meaned, the number of messages present i the mailbox.\n> > \n> \n> You mean that if a variable name is provided, then the sampler will store\n> the total message count in it?\n\nyes", "id": 174707, "time": "2014-04-18T15:46:11Z", "bug_id": 56427, "creation_time": "2014-04-18T15:46:11Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "text": "The code currently uses -1 to mean all messages, so cannot use -N to mean starting from the end, and compatibility concerns mean that the value -1 cannot ever be changed.\n\nHowever, the value is stored as text, so a different prefix could be used, for exampe '~' or '!' or '_'.", "is_private": false, "id": 174710, "creator": "sebb@apache.org", "time": "2014-04-18T17:28:07Z", "bug_id": 56427, "creation_time": "2014-04-18T17:28:07Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 56427, "is_private": false, "text": "Implemented part a)\n\nURL: http://svn.apache.org/r1588596\nLog:\nMailReaderSampler enhancement: read message header only\nBugzilla Id: 56427\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/resources/messages.properties\n    jmeter/trunk/src/core/org/apache/jmeter/resources/messages_fr.properties\n    jmeter/trunk/src/protocol/mail/org/apache/jmeter/protocol/mail/sampler/MailReaderSampler.java\n    jmeter/trunk/src/protocol/mail/org/apache/jmeter/protocol/mail/sampler/gui/MailReaderSamplerGui.java\n    jmeter/trunk/xdocs/changes.xml\n    jmeter/trunk/xdocs/usermanual/component_reference.xml", "id": 174720, "time": "2014-04-19T00:40:11Z", "creator": "sebb@apache.org", "creation_time": "2014-04-19T00:40:11Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 56427, "text": "Hi, I tested new flag on night build r1592138.\nIt works properly.\n\nGiven the way statistics are produced, probably option c) is the most flexible, as it allows to get detailed info on each message.\n\nAs timings are strongly related to message size, a single sample averaging multiple operations  is not meaningful.", "id": 175008, "time": "2014-05-03T22:02:09Z", "creator": "sergio@bosoconsulting.it", "creation_time": "2014-05-03T22:02:09Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 56427, "text": "(In reply to Sebb from comment #7)\n> The code currently uses -1 to mean all messages, so cannot use -N to mean\n> starting from the end, and compatibility concerns mean that the value -1\n> cannot ever be changed.\n> \n> However, the value is stored as text, so a different prefix could be used,\n> for exampe '~' or '!' or '_'.\n\ncoming back again on the issue...\n\nWhat about putting on the UI a flag that selects \"earliest\" or \"most recent\" messages.\nThis way, we do not break compatibility, and it should be easy to implement.\n\nAnother alternative would be to allow the message number in the form:\nm,n\n\nThis would mean:\nread from message m upto n (both included, starting from 1, 1 is the oldest).\nThis is more powerful, but more complex to test (lot of marginal conditions).\n\nAlso, in the end, you will need to know the number of messages in the mailbox.\n\nLet me know.", "id": 175097, "time": "2014-05-07T22:10:18Z", "creator": "sergio@bosoconsulting.it", "creation_time": "2014-05-07T22:10:18Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 56427, "text": "I had no feedback on this thread.\nI checked on several night build and the \"read message header only\" works properly, so the single object of this enhancement is satisfied.\n\nI'm going to create a new enhancement request for a flag thats allows to download most recent file (at the time being it downloads the oldest ones).", "id": 175297, "attachment_id": null, "creator": "sergio@bosoconsulting.it", "creation_time": "2014-05-17T09:11:20Z", "time": "2014-05-17T09:11:20Z", "is_private": false}]