[{"count": 0, "tags": [], "bug_id": 20338, "attachment_id": null, "text": "Installation fails during compilation with the error:\nsignals.c:414: macro `sigwait' used with just one arg\n\nUsing GCC version \"2.9-gnupro-98r2\", but same problem occurs with the Tru64 C \ncompiler.\n\nSteps taken:\n\n./configure --prefix=/var/apache2\nmake\n\nAny advice?  \n\nThanks in advance.  Bill Westphal.", "id": 38000, "time": "2003-05-29T20:34:39Z", "creator": "westphal@rodney.govt.nz", "creation_time": "2003-05-29T20:34:39Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 20338, "text": "Q1. what compiler flags were passed to the compile of signal.c?\n\non Tru64 5.1, this is what the compile looks like:\n\n/bin/sh /home/trawick/regress/httpd-2.0/srclib/apr/libtool  --mode=compile cc -\\\ng  -pthread -DHAVE_CONFIG_H -DOSF1 -D_OSF_SOURCE  -pthread -I../../include -I..\\\n/../include/arch/unix  -c signals.c && touch signals.lo\n\nQ2. what APR hints are getting defined?\n\non Tru64 5.1, I see this stuff getting defined by apr (from stdout of configure):\n\nApplying APR hints file rules for alphaev6-dec-osf5.1\n  adding \"-DOSF1\" to CPPFLAGS\n  adding \"-D_OSF_SOURCE\" to CPPFLAGS\n\nQ3.  What does definition of sigwait() in signal.h look like?\n\nin Tru64 5.1 /usr/include/signal.h, there is\n\n#if defined(_POSIX_C_SOURCE) \\\n        && (_POSIX_C_SOURCE >= 199506L) \\\n        && !defined(_V40_OBJ_COMPAT)\n# ifdef __DECC\n#  pragma extern_prefix \"_P\"\n# else\n#  define sigwait(__a,__b) _Psigwait(__a,__b)\n# endif\nextern int __P_C(sigwait) __((const sigset_t *set, int *sig));\n# ifdef __DECC\n#  pragma extern_prefix \"\"\n# endif\n#else\n# ifdef _OSF_SOURCE\nextern int sigwait __((sigset_t *));\n# endif /* _OSF_SOURCE */\n#endif /* _POSIX_C_SOURCE >= 199506L */\n\nso we should get the one-arg sigwait() unless _POSIX_C_SOURCE somehow got defined\n\ndoes the definition of sigwait() in /usr/include/signal.h look any different on\nTru64 4.0?\n", "id": 38232, "time": "2003-06-03T01:47:30Z", "creator": "trawick@apache.org", "creation_time": "2003-06-03T01:47:30Z", "is_private": false, "attachment_id": null}, {"count": 2, "text": "A1:\n/bin/ksh /usr/users/westphal/utils/httpd-2.0.46/srclib/apr/libtool --silent --\nmode=compile gcc -g -O2   -DHAVE_CONFIG_H -DOSF1   -I../../include -\nI../../include/arch/unix  -c signals.c && touch signals.lo\nsignals.c:414: macro `sigwait' used with just one arg\n\n\nA2:  (from config.log)\nac_cv_env_CPPFLAGS_set=''\nac_cv_env_CPPFLAGS_value=''\nCPPFLAGS=''\nEXTRA_CPPFLAGS=' -DOSF1'\nNOTEST_CPPFLAGS='-DAP_HAVE_DESIGNATED_INITIALIZER'\n\n\nA3:\nMy machine has two C compilers, GCC and \"Digital UNIX Compiler Driver 3.11\nCompaq C V6.1-123 on Digital UNIX V4.0G (Rev. 1530)\"\n\nI set environment vars to use one or the other.  Here are the sections of \nsignal.h that you asked about.  The first is for GCC, the second is the Digital \nCompiler.\n\n./build/gcc/include/signal.h \n---\n#if defined(_REENTRANT) || defined(_THREAD_SAFE)\n# if defined(_POSIX_C_SOURCE) \\\n        && (_POSIX_C_SOURCE >= 199506L) \\\n        && !defined(_LIBC_POLLUTION_H_)\n#  ifdef __DECC\n#   pragma extern_prefix \"_P\"\n#  else\n#define sigwait _Psigwait\n#  endif\nextern int __P_C(sigwait) __((const sigset_t *set, int *sig));\n#  ifdef __DECC\n#   pragma extern_prefix \"\"\n#  endif\n# else\nextern int sigwait __((sigset_t *));\n# endif /* _POSIX_C_SOURCE >= 199506L */\n#endif  /* _REENTRANT || _THREAD_SAFE */\n---\n/usr/include/signal.h\n---\n#if defined(_POSIX_C_SOURCE) \\\n        && (_POSIX_C_SOURCE >= 199506L) \\\n        && !defined(_V40_OBJ_COMPAT)\n# ifdef __DECC\n#  pragma extern_prefix \"_P\"\n# else\n#  define sigwait(__a,__b) _Psigwait(__a,__b)\n# endif\nextern int __P_C(sigwait) __((const sigset_t *set, int *sig));\n# ifdef __DECC\n#  pragma extern_prefix \"\"\n# endif\n#else\n# ifdef _OSF_SOURCE\nextern int sigwait __((sigset_t *));\n# endif /* _OSF_SOURCE */\n#endif /* _POSIX_C_SOURCE >= 199506L */\n---\n", "bug_id": 20338, "is_private": false, "id": 38234, "time": "2003-06-03T03:21:42Z", "creator": "westphal@rodney.govt.nz", "creation_time": "2003-06-03T03:21:42Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 20338, "text": "FYI, still puzzling over this...\n\nI noticed that I have had two patches in my Tru64 tree\n\n1) add -pthread to CPPFLAGS\n\nThis is required now with native compiler on Tru64 5.? in order to compile\npthreads.h.  Without it, APR doesn't detect threads.\n\n2) define _OSF_SOURCE in apr/build/apr_hints.m4\n\nFrom the signal.h header file, it looks like _OSF_SOURCE gets the right\nflavor of sigwait(), but when I remove this it still compiles.\n\nSo I'm still not sure what changes are necessary.\n\nYou could try to define _OSF_SOURCE and see if that fixes the problem.\n\nmake distclean && CPPFLAGS=-DOSF_SOURCE && ./configure --options && make\n", "id": 38347, "time": "2003-06-04T12:45:05Z", "creator": "trawick@apache.org", "creation_time": "2003-06-04T12:45:05Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 20338, "text": "Is this problem still seen with APR 0.9.6 (httpd 2.0.54 tarball)?", "id": 78929, "time": "2005-08-24T17:26:07Z", "creator": "jorton@redhat.com", "creation_time": "2005-08-24T17:26:07Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "wrowe@apache.org", "is_private": false, "count": 5, "id": 85561, "time": "2006-02-07T19:07:07Z", "bug_id": 20338, "creation_time": "2006-02-07T19:07:07Z", "text": "\n  Actually, Jeff has the local patches, it's not that we (the project) need\n  info; we need those committed :-)"}, {"count": 6, "tags": [], "bug_id": 20338, "attachment_id": null, "is_private": false, "id": 87082, "time": "2006-03-21T21:03:50Z", "creator": "wrowe@apache.org", "creation_time": "2006-03-21T21:03:50Z", "text": "Jeff says there are no patches in his tree to be committed, which begs the Q,\nis this still an issue?"}, {"attachment_id": null, "tags": [], "creator": "wrowe@apache.org", "text": "Mass reassign the 44 open apr-bugs to apr bug list", "count": 7, "id": 93837, "time": "2006-09-19T19:54:38Z", "bug_id": 20338, "creation_time": "2006-09-19T19:54:38Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 20338, "attachment_id": null, "text": "No response from submittor; please reopen if there are further details.", "id": 93864, "time": "2006-09-19T20:25:04Z", "creator": "wrowe@apache.org", "creation_time": "2006-09-19T20:25:04Z", "is_private": false}]