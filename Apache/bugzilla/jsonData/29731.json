[{"count": 0, "tags": [], "creator": "fmeschbe@day.com", "text": "Consider the following task:\n\n  <jar destfile=\"${ant.project.name}.jar\" filesetmanifest=\"mergewithoutmain\">\n    <manifest>\n      <attribute name=\"Implementation-Title\" value=\"AntTest\" />\n      <attribute name=\"Implementation-Vendor\" value=\"Day Software AG\" />\n      <attribute name=\"Implementation-Version\" value=\"1.0 (build ${DSTAMP})\" />\n    </manifest>\n    <zipgroupfileset dir=\".\">\n      <include name=\"jar1.jar\"/>\n      <include name=\"jar2.jar\"/>\n    </zipgroupfileset>\n  </jar>\n\nThe expected behaviour according to documentation is that the manifests\ncontained in the jar1.jar and jar2.jar files are merged into the manifest of the\ntarget jar file except for the main section.\n\nGiven the manifest from jar1.jar\n-------------------------------------------------------------\nManifest-Jar1: This is the MAIN part of jar1's Manifest\n\nName: jar1\nSomeProperty: Property of Jar1\n-------------------------------------------------------------\n\nAnd the manifest from jar2.jar\n-------------------------------------------------------------\nManifest-Jar2: This is the MAIN part of jar2's Manifest\n\nName: jar2\nSomeProperty: Property of Jar2\n-------------------------------------------------------------\n\nThe resulting manifest in the target jar file is expected to be\n-------------------------------------------------------------\nManifest-Version: 1.0\nImplementation-Title: AntTest\nImplementation-Vendor: Day Management AG\nImplementation-Version: 1.0 (build ${DSTAMP})\n\nName: jar1\nSomeProperty: Property of Jar1\n\nName: jar2\nSomeProperty: Property of Jar2\n-------------------------------------------------------------\n\nWhile the actual manifest in the target jar file is\n-------------------------------------------------------------\nManifest-Version: 1.0\nAnt-Version: Apache Ant 1.6.1\nCreated-By: 1.4.2_04 (Sun Microsystems Inc.)\nManifest-Jar1: This is the MAIN part of jar1's Manifest\nManifest-Jar2: This is the MAIN part of jar2's Manifest\nImplementation-Title: AntTest\nImplementation-Vendor: Day Management AG\nImplementation-Version: 1.0 (build ${DSTAMP})\n\nName: jar1\nSomeProperty: Property of Jar1\n\nName: jar2\nSomeProperty: Property of Jar2\n-------------------------------------------------------------\n\nOn the other hand, if the target jar file manifest is specified to come from a\nmanifest file instead of a contained <manifest> element, merging works as\nexpected ignoring the Main sections of the jar1.jar and jar2.jar files.\n\nLooking at the source of the manifest creation in the Jar task class (method\ncreateManifest()) reveals, that the configured manifest's main section is merged\ninto the original and zipfileset manifest main sections and only the defined\nmanifest file's main section may overlay the merged Main sections.\n\nI assume this is a problem as the configured manifest Main section should be\ntreated the same as the Main section from a manifest file.", "id": 59707, "time": "2004-06-22T08:59:27Z", "bug_id": 29731, "creation_time": "2004-06-22T08:59:27Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 29731, "text": "Created attachment 11908\nProposed fix patch against the current CVS checkout", "id": 59708, "time": "2004-06-22T09:06:38Z", "creator": "fmeschbe@day.com", "creation_time": "2004-06-22T09:06:38Z", "is_private": false, "attachment_id": 11908}, {"count": 2, "tags": [], "bug_id": 29731, "text": "fixed with svn revsion 793787", "id": 128818, "time": "2009-07-13T21:28:53Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-13T21:28:53Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 29731, "is_private": false, "text": "Thanks", "id": 128821, "time": "2009-07-13T22:36:18Z", "creator": "fmeschbe@day.com", "creation_time": "2009-07-13T22:36:18Z", "attachment_id": null}]