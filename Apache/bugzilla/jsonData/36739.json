[{"count": 0, "text": "I have upgraded  PHP to PHP 5.1.0RC1  and  I get  this nice error whenever I \ntry to put a file into a Webdav folder.\nWindows tells me: \"An error occured copying some or all of the selected files.\"\nAt the same time Apache log shows this: ... child pid 18996 exit signal \nSegmentation fault (11)\n\nI can create new Webdav folders, move files from a folder to another but \ncannot put new files.\nIf I disable the php module in Apache config file everything is back to normal.\nWhat could be a fix for this? I know that there are some conflicts between \nmod_dav and the php module.", "creator": "roso@bellsouth.net", "is_private": false, "id": 80209, "time": "2005-09-20T21:05:21Z", "bug_id": 36739, "creation_time": "2005-09-20T21:05:21Z", "tags": [], "attachment_id": null}, {"count": 1, "text": "Please obtain a backtrace for the crash following these instructions:\n\nhttp://httpd.apache.org/dev/debugging.html#crashes", "creator": "jorton@redhat.com", "is_private": false, "id": 80256, "time": "2005-09-21T10:17:26Z", "bug_id": 36739, "creation_time": "2005-09-21T10:17:26Z", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 36739, "text": "(In reply to comment #1)\n> Please obtain a backtrace for the crash following these instructions:\n> http://httpd.apache.org/dev/debugging.html#crashes\n\nI did, what now?\n\n", "count": 2, "id": 80261, "time": "2005-09-21T12:39:33Z", "creator": "roso@bellsouth.net", "creation_time": "2005-09-21T12:39:33Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 36739, "text": "Post the backtrace here!", "id": 80263, "time": "2005-09-21T12:54:46Z", "creator": "jorton@redhat.com", "creation_time": "2005-09-21T12:54:46Z", "is_private": false, "attachment_id": null}, {"count": 4, "text": "(In reply to comment #3)\n> Post the backtrace here!\n\nThat's a 4MB file in server's /tmp directory called core.19444.\nAnd it seems to have binary data in it.\nNot sure what do do, please advise.\n\n", "creator": "roso@bellsouth.net", "is_private": false, "id": 80273, "time": "2005-09-21T17:47:10Z", "bug_id": 36739, "creation_time": "2005-09-21T17:47:10Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "is_private": false, "id": 80278, "time": "2005-09-21T21:04:27Z", "bug_id": 36739, "creation_time": "2005-09-21T21:04:27Z", "text": "See http://httpd.apache.org/dev/debugging.html for how-to-extract-a-traceback.\n\n"}, {"count": 6, "tags": [], "bug_id": 36739, "text": "        c = 68 'D'\n        configtestonly = 0\n        confname = 0x817a0e0 \"conf/httpd.conf\"\n        def_server_root = 0x817ad38 \"/usr/local/apache2\"\n        temp_error_log = 0x0\n\n        process = (process_rec *) 0x81b7120\n        server_conf = (server_rec *) 0x81be458\n        pglobal = (apr_pool_t *) 0x81b70a0\n        pconf = (apr_pool_t *) 0x81b90a8\n        plog = (apr_pool_t *) 0x82031d0\n        ptemp = (apr_pool_t *) 0x82011c8\n        pcommands = (apr_pool_t *) 0x81bb0b0\n        opt = (apr_getopt_t *) 0x81bb148\n        rv = 0\n        mod = (module **) 0x81be458\n        optarg = 0xbffffad9 \"SSL\"\n        signal_server = (apr_OFN_ap_signal_server_t *) 0x1\n(gdb)\n(gdb)\n(gdb) thread apply all bt full\n\nThread 1 (process 22993):\n#0  0xb7bb3510 in _zend_hash_index_update_or_next_insert (ht=0xb7e67af8, h=0,\n    pData=0xbfffda30, nDataSize=12, pDest=0x0, flag=1)\n    at /tmp/php-5.1.0RC1/Zend/zend_hash.c:354\n        nIndex = 0\n        p = (Bucket *) 0x0\n#1  0xb7bb4d2d in zend_list_insert (ptr=0x0, type=0)\n    at /tmp/php-5.1.0RC1/Zend/zend_list.c:47\n        index = 0\n        le = {ptr = 0x846ef8c, type = 2, refcount = 1}\n#2  0xb7bb4e09 in zend_register_resource (rsrc_result=0x0, \nrsrc_pointer=0x846ef8c,\n    rsrc_type=2) at /tmp/php-5.1.0RC1/Zend/zend_list.c:99\n        rsrc_id = 0\n#3  0xb7b8a698 in _php_stream_alloc (ops=0x0, abstract=0x0, persistent_id=0x0,\n    mode=0xb7cece68 \"rb\") at /tmp/php-5.1.0RC1/main/streams/streams.c:263\n        le = {ptr = 0x11, type = 0, refcount = -1073751384}\n        ret = (php_stream *) 0x846ef8c\n#4  0xb7b8e3e7 in _php_stream_fopen_from_fd (fd=0, mode=0xb7cece68 \"rb\", \npersistent_id=0x0)\n    at /tmp/php-5.1.0RC1/main/streams/plain_wrapper.c:204\n        self = (php_stdio_stream_data *) 0x845ee14\n        stream = (php_stream *) 0x0\n#5  0xb7b8ede4 in _php_stream_fopen \n(filename=0x846c090 \"/www/_error/404/index.php\",\n    mode=0xb7cece68 \"rb\", opened_path=0xbfffeeb8, options=133)\n    at /tmp/php-5.1.0RC1/main/streams/plain_wrapper.c:881\n        realpath = 0x83587e4 \"/www/_error/404/index.php\"\n        open_flags = 0\n        fd = 17\n        ret = (php_stream *) 0x846c090\n        persistent = 17\n        persistent_id = 0x0\n#6  0xb7b8f525 in _php_stream_fopen_with_path (\n\n    filename=0x846c090 \"/www/_error/404/index.php\", mode=0xb7cece68 \"rb\",\n    path=0x8385f60 \".:/www/_php/pear\", opened_path=0xbfffeeb8, options=133)\n    at /tmp/php-5.1.0RC1/main/streams/plain_wrapper.c:1275\n        pathbuf = 0x10 <Address 0x10 out of bounds>\n        ptr = 0x85 <Address 0x85 out of bounds>\n        end = 0x846c090 \"/www/_error/404/index.php\"\n        exec_fname = 0x2 <Address 0x2 out of bounds>\n        trypath = \"eregi\\000\u00ff\u00bf\\002\\000\\000\\000\\020\\000\\000\\000ereg_replace\\000\n\\000\\000\\000ereg\\000\u00ef\u00ff\u00bf\\002\\000\\000\\000\\020\\000\\000\\000is_callable\\000\\020\\000\n\\000\\000is_scalar\\000\\000\\000\\020\\000\\000\\000is_object\\000\\000\\000\\020\\000\\000\n\\000is_array\\000\\000\\000\\000\\020\\000\\000\\000is_string\\000\\000\\000\\020\\000\\000\n\\000is_numeric\\000\\000\\020\\000\\000\\000is_real\\000\\002\\000\\000\\000\\020\\000\\000\n\\000is_double\\000\\000\\000\\020\\000\\000\\000is_integer\\000\\000\\020\\000\\000\n\\000is_int\\000\u00bf\"...\n        sb = {st_dev = 13835039827440987236, __pad1 = 2, st_ino = 16, st_mode \n= 1600942451,\n  st_nlink = 1667720562, st_uid = 6648673, st_gid = 16, st_rdev = \n13835039365436895082,\n  __pad2 = 2, st_size = 16, st_blksize = 1768714355, st_blocks = -1090492044, \nst_atim = {\n    tv_sec = 2, tv_nsec = 16}, st_mtim = {tv_sec = 1768714355, tv_nsec = -\n1073807244},\n  st_ctim = {tv_sec = 2, tv_nsec = 16}, __unused4 = 1734701669, __unused5 = \n1701994345}\n        stream = (php_stream *) 0x8d\n        path_length = 138854544\n        exec_fname_length = 141\n#7  0xb7b8c572 in _php_stream_open_wrapper_ex \n(path=0x846c090 \"/www/_error/404/index.php\",\n    mode=0xb7cece68 \"rb\", options=141, opened_path=0x85, context=0x0)\n    at /tmp/php-5.1.0RC1/main/streams/streams.c:1771\n        stream = (php_stream *) 0x0\n        wrapper = (php_stream_wrapper *) 0xb7e36028\n        path_to_open = 0x846c090 \"/www/_error/404/index.php\"\n        persistent = 0\n        copy_of_path = 0x0\n#8  0xb7b7cf34 in php_stream_open_for_zend \n(filename=0x846c090 \"/www/_error/404/index.php\",\n    handle=0xbfffeeb0) at /tmp/php-5.1.0RC1/main/main.c:852\n        stream = (php_stream *) 0x0\n#9  0xb7bba32b in zend_stream_open \n(filename=0x846c090 \"/www/_error/404/index.php\",\n    handle=0xbfffeeb0) at /tmp/php-5.1.0RC1/Zend/zend_stream.c:47\nNo locals.\n#10 0xb7bba3ec in zend_stream_fixup (file_handle=0xbfffeeb0)\n    at /tmp/php-5.1.0RC1/Zend/zend_stream.c:62\nNo locals.\n#11 0xb7b96c88 in open_file_for_scanning (file_handle=0xbfffeeb0)\n    at Zend/zend_language_scanner.c:3068\n        file_path = 0x0\n#12 0xb7b96d70 in compile_file (file_handle=0xbfffeeb0, type=2)\n    at Zend/zend_language_scanner.c:3154\n        original_lex_state = {buffer_state = 0x0, state = 0, in = 0x0, lineno \n= 0,\n  filename = 0x0}\n        op_array = (zend_op_array *) 0x845ebf4\n        original_active_op_array = (zend_op_array *) 0x0\n        retval = (zend_op_array *) 0xbfffedec\n        compiler_result = -1073746256\n        compilation_successful = 176 '\u00b0'\n        retval_znode = {op_type = 1, u = {constant = {value = {lval = 1,\n        dval = 1.4950491347092096e+93, str = {val = 0x1 <Address 0x1 out of \nbounds>,\n          len = 1397157752}, ht = 0x1, obj = {handle = 1, handlers = \n0x5346ef78}},\n      refcount = 1, type = 1 '\\001', is_ref = 0 '\\0'}, var = 1, opline_num = 1,\n    op_array = 0x1, jmp_addr = 0x1, EA = {var = 1, type = 1397157752}}}\n        original_in_compilation = 0 '\\0'\n#13 0xb7bae117 in zend_execute_scripts (type=2, retval=0x0, file_count=1)\n    at /tmp/php-5.1.0RC1/Zend/zend.c:1070\n        files = 0xbfffedf0 \"\"\n        i = 0\n        file_handle = (zend_file_handle *) 0xbfffeeb0\n        orig_op_array = (zend_op_array *) 0x0\n        local_retval = (zval *) 0x0\n#14 0xb7c0c638 in php_handler (r=0x8468440)\n\n    at /tmp/php-5.1.0RC1/sapi/apache2handler/sapi_apache2.c:564\n        zfd = {type = 0 '\\0', filename = 0x846c090 \"/www/_error/404/index.php\",\n  opened_path = 0x0, handle = {fd = 0, fp = 0x0, stream = {handle = 0x0, \nreader = 0,\n      closer = 0, fteller = 0, interactive = 0}}, free_filename = 0 '\\0'}\n        orig_bailout = {{__jmpbuf = {0, 0, 0, 0, 0, 0}, __mask_was_saved = 0, \n__saved_mask = {\n      __val = {0 <repeats 32 times>}}}}\n        ctx = (php_struct *) 0x8468388\n        conf = (void *) 0x8245268\n        brigade = (apr_bucket_brigade *) 0x0\n        bucket = (apr_bucket *) 0x0\n        rv = 0\n        parent_req = (request_rec *) 0x8468440\n#15 0x080d5206 in ap_run_handler (r=0x8468440) at config.c:152\n        pHook = (ap_LINK_handler_t *) 0x0\n        n = 12\n        rv = 0\n#16 0x080d571a in ap_invoke_handler (r=0x8468440) at config.c:364\n        new_handler = 0x1 <Address 0x1 out of bounds>\n        p2 = 0x0\n        handler = 0x0\n        result = 138839104\n        old_handler = 0x8245250 \"application/x-httpd-php\"\n#17 0x080afe59 in ap_internal_redirect (new_uri=0x82482f8 \"/error/404/?e\", \nr=0x8462fa0)\n    at http_request.c:465\n        new = (request_rec *) 0x8468440\n        access_status = 0\n#18 0x080af906 in ap_process_request (r=0x8462fa0) at http_request.c:262\n        access_status = 1\n#19 0x080aba01 in ap_process_http_connection (c=0x845cd08) at http_core.c:251\n        r = (request_rec *) 0x8462fa0\n        csd_set = 0\n        csd = (apr_socket_t *) 0x0\n#20 0x080de5a6 in ap_run_process_connection (c=0x845cd08) at connection.c:43\n        pHook = (ap_LINK_process_connection_t *) 0x0\n        n = 1\n        rv = 0\n#21 0x080d3da3 in child_main (child_num_arg=0) at prefork.c:610\n        ptrans = (apr_pool_t *) 0x845cbf8\n        allocator = (apr_allocator_t *) 0x845ab68\n        current_conn = (conn_rec *) 0x845cd08\n        status = 138792200\n        i = 1\n        lr = (ap_listen_rec *) 0x845aca8\n        curr_pollfd = 1\n        last_pollfd = 1\n        pollset = (apr_pollfd_t *) 0x845aca8\n        offset = 0\n        csd = (void *) 0x845cc30\n        sbh = (ap_sb_handle_t *) 0x845ac78\n        rv = 0\n        bucket_alloc = (apr_bucket_alloc_t *) 0x8460f60\n#22 0x080d3ebc in make_child (s=0x81be458, slot=1) at prefork.c:704\n        pid = 0\n#23 0x080d3fa3 in startup_children (number_to_start=4) at prefork.c:722\n        i = 1\n#24 0x080d469d in ap_mpm_run (_pconf=0x81b90a8, plog=0x82031d0, s=0x5) at \nprefork.c:941\n        index = 0\n        remaining_children_to_start = 5\n        rv = 0\n#25 0x080d9606 in main (argc=4, argv=0xbffff274) at main.c:618\n        exit_status = 0\n        c = 68 'D'\n        configtestonly = 0\n        confname = 0x817a0e0 \"conf/httpd.conf\"\n        def_server_root = 0x817ad38 \"/usr/local/apache2\"\n        temp_error_log = 0x0\n        process = (process_rec *) 0x81b7120\n        server_conf = (server_rec *) 0x81be458\n        pglobal = (apr_pool_t *) 0x81b70a0\n        pconf = (apr_pool_t *) 0x81b90a8\n        plog = (apr_pool_t *) 0x82031d0\n        ptemp = (apr_pool_t *) 0x82011c8\n        pcommands = (apr_pool_t *) 0x81bb0b0\n        opt = (apr_getopt_t *) 0x81bb148\n        rv = 0\n        mod = (module **) 0x81be458\n        optarg = 0xbffffad9 \"SSL\"\n        signal_server = (apr_OFN_ap_signal_server_t *) 0x1\n", "id": 80298, "time": "2005-09-22T02:46:08Z", "creator": "roso@bellsouth.net", "creation_time": "2005-09-22T02:46:08Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "creator": "roso@bellsouth.net", "attachment_id": null, "is_private": false, "id": 80299, "time": "2005-09-22T02:53:15Z", "bug_id": 36739, "creation_time": "2005-09-22T02:53:15Z", "text": "I just posted the core dump for the process that ended with a Segmentation \nfault after trying to PUT a file in a Webdav folder.\n\nAlso, I just found out that there are many other processes ending with a \nSegmentation fault, all of them after the server looking for a file which is \nnot found is trying to access a 404 custom file which is in PHP. if I change \nthe 404 to a simple HTML everything is back to normal. \nTherefore, it seems that the PHP (5.1.0RC1) is responsible for this."}, {"count": 8, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "is_private": false, "id": 80308, "time": "2005-09-22T11:04:39Z", "bug_id": 36739, "creation_time": "2005-09-22T11:04:39Z", "text": "404 handling in PHP/apache2handler was broken recently; try a 5.1 snapshot from\nsnaps.php.net or try 5.0.5, this isn't an httpd issue."}, {"attachment_id": null, "tags": [], "creator": "roso@bellsouth.net", "is_private": false, "count": 9, "id": 80323, "time": "2005-09-22T16:20:24Z", "bug_id": 36739, "creation_time": "2005-09-22T16:20:24Z", "text": "(In reply to comment #8)\n> 404 handling in PHP/apache2handler was broken recently; try a 5.1 snapshot \nfrom\n> snaps.php.net or try 5.0.5, this isn't an httpd issue.\n\nThank you! Yes, I've posted this bug at http://bugs.php.net/bug.php?id=34568 \nand they ended up to the same conclusion, although nobody told that 5.1.0RC1 \nversion has the apache2 handler broken.\nThanks again for your great work."}]