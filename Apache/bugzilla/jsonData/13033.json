[{"count": 0, "tags": [], "bug_id": 13033, "attachment_id": null, "text": "I have the following jsp:\n\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<jsp:root xmlns:jsp=\"http://java.sun.com/products/jsp/dtd/jsp_1_0.dtd\">\n\t<jsp:directive.page language=\"java\"/>\n\t<html>\n\t\t<head>\n\t\t\t<title>Hello</title>\n\t\t</head>\n\t\t<jsp:scriptlet>\n\t\tString bgcolor = \"red\";\n\t\t</jsp:scriptlet>\n\t\t<body bgcolor=\"%=bgcolor%\"/>\n\t</html>\n</jsp:root>\n\nThe generated java file is (the wrong place marked by '!!!!!!!'):\n\npackage org.apache.jsp;\n\nimport javax.servlet.*;\nimport javax.servlet.http.*;\nimport javax.servlet.jsp.*;\nimport org.apache.jasper.runtime.*;\n\n\npublic class hello$jsp extends HttpJspBase {\n\n\n    static {\n    }\n    public hello$jsp( ) {\n    }\n\n    private static boolean _jspx_inited = false;\n\n    public final void _jspx_init() throws org.apache.jasper.runtime.JspException {\n    }\n\n    public void _jspService(HttpServletRequest request, HttpServletResponse  \nresponse)\n        throws java.io.IOException, ServletException {\n\n        JspFactory _jspxFactory = null;\n        PageContext pageContext = null;\n        HttpSession session = null;\n        ServletContext application = null;\n        ServletConfig config = null;\n        JspWriter out = null;\n        Object page = this;\n        String  _value = null;\n        try {\n\n            if (_jspx_inited == false) {\n                synchronized (this) {\n                    if (_jspx_inited == false) {\n                        _jspx_init();\n                        _jspx_inited = true;\n                    }\n                }\n            }\n            _jspxFactory = JspFactory.getDefaultFactory();\n            response.setContentType(\"text/html;charset=ISO-8859-1\");\n            pageContext = _jspxFactory.getPageContext(this, request, response,\n\t\t\t\"\", true, 8192, true);\n\n            application = pageContext.getServletContext();\n            config = pageContext.getServletConfig();\n            session = pageContext.getSession();\n            out = pageContext.getOut();\n\n            // begin [file=\"/hello.jsp\";from=(5,8);to=(5,8)]\n                out.write(\"<html >\");\n            // end\n            // HTML // begin [file=\"/hello.jsp\";from=(5,8);to=(6,9)]\n                out.write(\"\\r\\n\\t\\t\");\n\n            // end\n            // begin [file=\"/hello.jsp\";from=(6,9);to=(6,9)]\n                out.write(\"<head >\");\n            // end\n            // HTML // begin [file=\"/hello.jsp\";from=(6,9);to=(7,11)]\n                out.write(\"\\r\\n\\t\\t\\t\");\n\n            // end\n            // begin [file=\"/hello.jsp\";from=(7,11);to=(7,11)]\n                out.write(\"<title >\");\n            // end\n            // HTML // begin [file=\"/hello.jsp\";from=(7,24);to=(7,24)]\n                out.write(\"Hello\");\n\n            // end\n            // begin [file=\"/hello.jsp\";from=(7,24);to=(7,24)]\n                out.write(\"</title>\");\n            // end\n            // HTML // begin [file=\"/hello.jsp\";from=(8,10);to=(8,10)]\n                out.write(\"\\r\\n\\t\\t\");\n\n            // end\n            // begin [file=\"/hello.jsp\";from=(8,10);to=(8,10)]\n                out.write(\"</head>\");\n            // end\n            // begin [file=\"/hello.jsp\";from=(9,18);to=(11,19)]\n                \n                \t\tString bgcolor = \"red\";\n                \t\t\n            // end\n            // HTML // begin [file=\"/hello.jsp\";from=(5,8);to=(12,30)]\n                out.write(\"\\r\\n\\t\\t\\r\\n\\t\\t\");\n\n            // end\n            // begin [file=\"/hello.jsp\";from=(12,30);to=(12,30)]\n!!!!!!!                out.write(\"<body   bgcolor=\\\"%=bgcolor%\\\">\");\n            // end\n            // HTML // begin [file=\"/hello.jsp\";from=(13,10);to=(13,10)]\n                out.write(\"\\r\\n\\t\\t\");\n\n            // end\n            // begin [file=\"/hello.jsp\";from=(13,10);to=(13,10)]\n                out.write(\"</body>\");\n            // end\n            // HTML // begin [file=\"/hello.jsp\";from=(14,9);to=(14,9)]\n                out.write(\"\\r\\n\\t\");\n\n            // end\n            // begin [file=\"/hello.jsp\";from=(14,9);to=(14,9)]\n                out.write(\"</html>\");\n            // end\n\n        } catch (Throwable t) {\n            if (out != null && out.getBufferSize() != 0)\n                out.clearBuffer();\n            if (pageContext != null) pageContext.handlePageException(t);\n        } finally {\n            if (_jspxFactory != null) _jspxFactory.releasePageContext(pageContext);\n        }\n    }\n}", "id": 23450, "time": "2002-09-26T13:47:55Z", "creator": "vasml@mail.ru", "creation_time": "2002-09-26T13:47:55Z", "is_private": false}, {"id": 23816, "tags": [], "bug_id": 13033, "is_private": false, "count": 1, "text": "This is a problem with the spec, not with Tomcat (see comments for bug 10683).\n\n*** This bug has been marked as a duplicate of 10683 ***", "time": "2002-10-03T10:10:27Z", "creator": "Andreas.Junghans@fh-karlsruhe.de", "creation_time": "2002-10-03T10:10:27Z", "attachment_id": null}]