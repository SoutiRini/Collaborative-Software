[{"count": 0, "tags": [], "creator": "dnie@d-velop.de", "attachment_id": 34696, "is_private": false, "id": 196582, "time": "2017-01-31T08:29:14Z", "bug_id": 60671, "creation_time": "2017-01-31T08:29:14Z", "text": "Created attachment 34696\nErrorLog\n\nWe are using Apache 2.4.25 (Windows) as a reverse proxy with caching. \n\nI am using the following cache configuration:\n  \n  CacheRoot cache\n  CacheDirLevels 5\n  CacheDirLength 3\n  CacheEnable disk  /\n\nThe cache itself is working correctly. But after a period of time (1-x hours), Apache is crashing/restarting.\nThe log messages in this case are:\n\n[Thu Jan 26 13:58:34.304331 2017] [mpm_winnt:crit] [pid 8824:tid 324] (OS 6)The handle is invalid.  : AH00356: Child: WAIT_FAILED -- shutting down server\n[Thu Jan 26 13:58:34.304331 2017] [mpm_winnt:crit] [pid 8824:tid 324] (OS 6)The handle is invalid.  : AH02644: Child: Event handle #0 (8) is invalid\n[Thu Jan 26 13:59:06.336811 2017] [mpm_winnt:notice] [pid 8824:tid 324] AH00362: Child: Waiting 90 more seconds for 1 worker threads to finish.\n[Thu Jan 26 13:59:36.368238 2017] [mpm_winnt:notice] [pid 8824:tid 324] AH00362: Child: Waiting 60 more seconds for 1 worker threads to finish.\n[Thu Jan 26 14:00:06.396427 2017] [mpm_winnt:notice] [pid 8824:tid 324] AH00362: Child: Waiting 30 more seconds for 1 worker threads to finish.\n[Thu Jan 26 14:00:36.420727 2017] [mpm_winnt:notice] [pid 8824:tid 324] AH00362: Child: Waiting 0 more seconds for 1 worker threads to finish.\n[Thu Jan 26 14:00:36.520808 2017] [mpm_winnt:notice] [pid 8824:tid 324] AH00363: Child: Terminating 1 threads that failed to exit.\n[Thu Jan 26 14:00:36.520808 2017] [mpm_winnt:notice] [pid 8824:tid 324] AH00364: Child: All worker threads have exited.\n[Thu Jan 26 14:00:36.542289 2017] [mpm_winnt:notice] [pid 3636:tid 384] AH00428: Parent: child process 8824 exited with status 0 -- Restarting.\n[Thu Jan 26 14:00:36.831791 2017] [mpm_winnt:notice] [pid 3636:tid 384] AH00455: Apache/2.4.25 (Win64) OpenSSL/1.0.2j configured -- resuming normal operations\n[Thu Jan 26 14:00:36.831791 2017] [mpm_winnt:notice] [pid 3636:tid 384] AH00456: Apache Lounge VC14 Server built: Dec 17 2016 11:15:57\n[Thu Jan 26 14:00:36.831791 2017] [core:notice] [pid 3636:tid 384] AH00094: Command line: 'E:\\\\d3\\\\d.ecs http gateway\\\\webserver\\\\bin\\\\httpd.exe -d E:/d3/d.ecs http gateway/webserver -d E:\\\\d3\\\\d.ecs http gateway\\\\webserver'\n[Thu Jan 26 14:00:36.832768 2017] [mpm_winnt:notice] [pid 3636:tid 384] AH00418: Parent: Created child process 2012\n[Thu Jan 26 14:00:37.525523 2017] [mpm_winnt:notice] [pid 2012:tid 324] AH00354: Child: Starting 250 worker threads.\n\n(complete logfile attached)\n\nWhen deactivating the cache, everything runs perfectly for weeks.\n\nWe made the following additional tests:\n\n- When changing from disk cache to socache/shmcb ==> no crash.\n\n- Since we use Windows, we tried 3 diffrent compilations from 2 distrubutors (ApacheHaus, ApacheLounge VC11/VC14) ==> This makes no diffrence (crash)\n\n- We tried the following config without success (config is recommended on https://www.apachelounge.com/viewtopic.php?p=34683)\n  AcceptFilter http none\n  AcceptFilter https none\n  EnableSendfile off\n  EnableMMAP off\n\n\nLet me know, if you need more information or log files. I always can reproduce this issue in my test environment."}, {"count": 1, "tags": [], "bug_id": 60671, "text": "We are seeing similar behavior on a number of Apache installations we just upgraded from 2.4.23 to 2.4.27.  We enabled the cache feature during the upgrade.\n\nAs these are production systems, we've disabled the cache feature for now, but look forward to a possible fix.", "id": 202136, "time": "2017-11-15T04:17:55Z", "creator": "abrighton@destinysolutions.com", "creation_time": "2017-11-15T04:17:55Z", "is_private": false, "attachment_id": null}]