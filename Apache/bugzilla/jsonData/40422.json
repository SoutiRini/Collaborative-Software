[{"count": 0, "tags": [], "bug_id": 40422, "attachment_id": null, "is_private": false, "id": 93078, "time": "2006-09-06T07:34:17Z", "creator": "martin.veverka@email.cz", "creation_time": "2006-09-06T07:34:17Z", "text": "In the folder calling I wrote\nant -Dsomeproperty=xx\n:::: Buildfile: build.xml\n:::: default:\n::::      [echo] project2: xx\n:::: default:\n::::      [echo] project1: xx\nbyt I expected\n:::: Buildfile: build.xml\n:::: default:\n::::      [echo] project2: xx\n:::: default:\n::::      [echo] project1: replaced_in_project2"}, {"count": 1, "attachment_id": 18825, "bug_id": 40422, "text": "Created attachment 18825\nExample with build files reproducing the problem", "id": 93079, "time": "2006-09-06T07:36:16Z", "creator": "martin.veverka@email.cz", "creation_time": "2006-09-06T07:36:16Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 40422, "is_private": false, "id": 93081, "time": "2006-09-06T07:52:46Z", "creator": "peterreilly@apache.org", "creation_time": "2006-09-06T07:52:46Z", "tags": [], "text": "This is by design - the manual on ant says:\n\"Alternatively, you can set the inheritAll attribute to false and only \"user\"\nproperties (i.e., those passed on the command-line) will be passed to the new\nproject.\"\n(The design may be a bit weird, but that the ant way!)"}, {"count": 3, "tags": [], "text": "But this design make problems. \n\nWe have main project with some subprojects.\nAll subproject uses the \"result.dir\" property. All subprojects save build \nresults in this folder.\nThe main project define \"result.dir\" property too and save its result in this \nfolder and result of subprojects in subfolder of this folder. For example:\n\n<ant dir=\"...project1\" >\n   <proeprty name=\"result.dir\" value=\"${result.dir}/project1\n</ant>\n<ant dir=\"...project2\" >\n   <proeprty name=\"result.dir\" value=\"${result.dir}/project2\n</ant>\n\nWhen I run ant without parameters, it works fine. The result of subprojects are \nin the subfolders. But when somebody set -Dresul.dir=... in order to change the \nresult folder, the structure of the folder tree change. All results from \nsubprojects are in the same folder.\n", "attachment_id": null, "id": 93187, "creator": "martin.veverka@email.cz", "time": "2006-09-08T07:29:49Z", "bug_id": 40422, "creation_time": "2006-09-08T07:29:49Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 40422, "attachment_id": null, "id": 93214, "time": "2006-09-08T11:09:24Z", "creator": "stevel@apache.org", "creation_time": "2006-09-08T11:09:24Z", "is_private": false, "text": "The reason for making -D options on the command line override anything is to\nallow you to override values *even* if the build file uses <ant> to delegate work. \n\nWhat if I want to set -Dresult.dir to get a unified result directory for every\nproject?\n\nincidentally, this is not-not-ever change kind of feature. It is fundamental to\nthings like apache gump successfully building all the OSS apps. If you want the\nroot project to override things, have a file build.properties there, load it in\nwith <property file=\"build.properties\" /> and have per-use options pulled down.\n\n-steve"}]