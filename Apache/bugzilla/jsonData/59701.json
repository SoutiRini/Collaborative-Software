[{"count": 0, "tags": [], "bug_id": 59701, "text": "In HTTP/AJP connector, setting maxPostSize=0 will no longer disable the post limit from 7.0.63 onwards.\n\nThis behavior change is introduced by commit:\nhttps://github.com/apache/tomcat70/commit/26a05bcfefb317f817d88fc9c07f14830b7afb5a#diff-701b4ec867f455fd7f9ebe04b78842bf\n\nWith the configuration maxPostSize=0, an upgrade to 7.0.63 onwards may causing un expected result: A call to getParameter(\"xxx\") may result null.\n\nI think we should clarify this behavior if maxPostSize=0 in documentation.", "id": 191637, "time": "2016-06-14T14:51:52Z", "creator": "huxing.zhang@gmail.com", "creation_time": "2016-06-14T14:51:52Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "huxing.zhang@gmail.com", "text": "Created attachment 33949\npatch against trunk", "id": 191638, "time": "2016-06-14T14:52:41Z", "bug_id": 59701, "creation_time": "2016-06-14T14:52:41Z", "is_private": false, "attachment_id": 33949}, {"count": 2, "tags": [], "creator": "remm@apache.org", "is_private": false, "id": 191639, "attachment_id": null, "bug_id": 59701, "creation_time": "2016-06-14T15:02:44Z", "time": "2016-06-14T15:02:44Z", "text": "Hum, well, I disagree.\nThe documentation says: \"The maximum size in bytes of the POST which will be handled by the container FORM URL parameter parsing. The limit can be disabled by setting this attribute to a value less than zero. If not specified, this attribute is set to 2097152 (2 megabytes).\"\nThis seems right to me (zero means you cannot POST any body that is parsed with the Servlet API, 1 means one byte only - which won't work ;) -, etc). Considerations on version numbers and changes should go into the changelog instead, while the documentation represents the current state."}, {"attachment_id": null, "tags": [], "creator": "huxing.zhang@gmail.com", "is_private": false, "count": 3, "id": 191651, "time": "2016-06-15T01:52:03Z", "bug_id": 59701, "creation_time": "2016-06-15T01:52:03Z", "text": "I've found the changlelog mention this behavior change in [1]:\n\n57938: Correctly handle empty form fields when a form is submitted as multipart/form-data, the maxPostSize attribute of the Connector has been set to a negative value and the Context has been configured with a value of true for allowCasualMultipartParsing. The meaning of the value zero for the maxPostSize has also been changed to mean a limit of zero rather than no limit to align it with maxSavePostSize and to be more intuitive. (markt)\n\nwhich is quite clear about it. \n\nAnd the releated issue:\nhttps://bz.apache.org/bugzilla/show_bug.cgi?id=57938\n\nI still think the above documentation is better, because it clearly says the meaning of value zero.\n\nHopefully it will be useful for people who has the same problem.\n\n[1] http://tomcat.apache.org/tomcat-7.0-doc/changelog.html."}, {"text": "It has always been the case that the docs reflect the current Tomcat version. Changes are listed in the changelog, and where necessary (including this case) in the migration guide.\n\nThe docs will get very cluttered very quickly if we start tracking changes over time in the docs.\n\nI'm with R\u00e9my on this one.", "tags": [], "bug_id": 59701, "is_private": false, "count": 4, "id": 192044, "time": "2016-07-01T11:31:16Z", "creator": "markt@apache.org", "creation_time": "2016-07-01T11:31:16Z", "attachment_id": null}]