[{"count": 0, "tags": [], "creator": "barr.jud@principal.com", "text": "The following code is in the rollOver() method of DailyRollingFileAppender.\n    File file = new File(fileName);\n    file.renameTo(target);    \n    LogLog.debug(fileName +\" -> \"+ scheduledFilename);    \n\nIf the file.renameTo(target) fails it will return 'false.'  I recommend \nchecking it.  If the rename fails then log the error and continue appending to \nthe existing file so that logs are not lost, as in the following code:\n\n    File file = new File(fileName);\n    boolean rc = file.renameTo(target);\n    if (rc = true) {\n        LogLog.debug(fileName + \" -> \" + scheduledFilename);\n    } else {\n \tLogLog.debug(\"Failed to roll:\" + fileName + \" -> \" + scheduledFilename);\n    }\n\n    try {\n        // This will also close the file. This is OK since multiple\n        // close operations are safe.\n        // pass the return code to indicate whether or not to append to the\n        // existing file\n        this.setFile(fileName, rc);\n    } catch (IOException e) {\n        errorHandler.error(\"setFile(\" + fileName + \", false) call failed.\");\n    }\n    scheduledFilename = datedFilename;", "id": 8469, "time": "2001-11-30T09:24:49Z", "bug_id": 5211, "creation_time": "2001-11-30T09:24:49Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "\nWhat is the advantage of checking the result of the rename operation\nand then just outputting a message on the console? Sure you must have\nsomething more substantial in mind...\n", "attachment_id": null, "bug_id": 5211, "id": 15800, "time": "2002-05-09T14:02:08Z", "creator": "ceki@apache.org", "creation_time": "2002-05-09T14:02:08Z", "is_private": false}, {"count": 2, "tags": [], "creator": "barr.jud@principal.com", "attachment_id": null, "id": 15804, "time": "2002-05-09T14:39:04Z", "bug_id": 5211, "creation_time": "2002-05-09T14:39:04Z", "is_private": false, "text": "Note farther down in my sample code that the return code (rc) is passed to \nsetFile(fileName, rc).\n\nWhen I first looked through the code for setFile() it thought that passing the \nreturn code from rename() would cause the appender to continue using the same \nfile. \n\nIn other words if the rollover fails to create a new file, continue appending \nmessages to the current file.  That way you do not lose the previous days logs.\n\nAs I went back through it, it appears that I misunderstood the second parm of \nsetFile().  The parm ends up being passed to the constructor of FileWriter.  \nThe API for FileWriter says that the second parm indicates whether or not the \nFileWriter should append or truncate the file.\n\nMy point is that you should not lose a log file because renameTo() fails.\n\nWe have since starting using the DailyRollingFileAppenderExt.  It seems to \nsatisfy our needs.\n\n\n\n"}, {"count": 3, "tags": [], "creator": "ceki@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of 900 ***", "id": 58338, "time": "2004-05-28T17:38:39Z", "bug_id": 5211, "creation_time": "2004-05-28T17:38:39Z", "is_private": false, "attachment_id": null}]