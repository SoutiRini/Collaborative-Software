[{"count": 0, "tags": [], "creator": "pskopek@gmail.com", "attachment_id": null, "text": "If one create virtual host using /host-manager application all work as\nexpected. Start/Stop/Remove actions.\nBut newly created host is not persistently added to the Tomcat configuration.\nAfter restart of Tomcat there is only localhost host listed.", "id": 134191, "time": "2010-02-03T10:48:37Z", "bug_id": 48674, "creation_time": "2010-02-03T10:48:37Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 48674, "text": "*** Bug 48673 has been marked as a duplicate of this bug. ***", "id": 134196, "time": "2010-02-03T10:51:37Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-02-03T10:51:37Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Patches to enhance the host-manager are always welcome.", "id": 134275, "time": "2010-02-06T13:44:21Z", "bug_id": 48674, "creation_time": "2010-02-06T13:44:21Z", "is_private": false}, {"count": 3, "tags": [], "creator": "wesley.acheson@gmail.com", "is_private": false, "text": "Created attachment 26019\nRough patch to provide persistance to the host manager.\n\nThis needs some cleanup but it is functional.\n\nAt tbe meoment errors are being swallowed. I'm not sure what to do with the though.\n\nShould the manager show success if the runtime addition was successful but the persistent addition wasn't?", "id": 139841, "time": "2010-09-12T14:40:28Z", "bug_id": 48674, "creation_time": "2010-09-12T14:40:28Z", "attachment_id": 26019}, {"count": 4, "tags": [], "creator": "wesley.acheson@gmail.com", "is_private": false, "id": 140145, "attachment_id": null, "bug_id": 48674, "creation_time": "2010-09-24T16:03:43Z", "time": "2010-09-24T16:03:43Z", "text": "Is this worth continuing with?  I know its rough but I'd like to know if its a start again job, or continue from here.\n\nWes"}, {"count": 5, "tags": [], "bug_id": 48674, "is_private": false, "text": "(In reply to comment #4)\n> Is this worth continuing with?  I know its rough but I'd like to know if its a\n> start again job, or continue from here.\n\nI definitely think it's worthwhile.\n\nAs far as the error handling goes, I'm in agreement with another e-mail that as much as possible, it should appear to be an atomic operation.  It might not always be possible to undo an inserted <Host> from the live Tomcat, but you can at least tell the user what the situation is.\n\n - Chuck", "id": 140146, "time": "2010-09-24T16:16:06Z", "creator": "chuck.caldarale@unisys.com", "creation_time": "2010-09-24T16:16:06Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 48674, "text": "*** Bug 59027 has been marked as a duplicate of this bug. ***", "id": 188571, "time": "2016-02-18T15:12:19Z", "creator": "markt@apache.org", "creation_time": "2016-02-18T15:12:19Z", "is_private": false, "attachment_id": null}, {"text": "Patch based on StoreConfig attached to Bug 59027.", "tags": [], "creator": "markt@apache.org", "is_private": false, "count": 7, "id": 188573, "time": "2016-02-18T15:15:17Z", "bug_id": 48674, "creation_time": "2016-02-18T15:15:17Z", "attachment_id": null}, {"count": 8, "attachment_id": null, "bug_id": 48674, "is_private": false, "id": 188575, "time": "2016-02-18T15:35:46Z", "creator": "remm@apache.org", "creation_time": "2016-02-18T15:35:46Z", "tags": [], "text": "I had a request for this item, and since we already have a component responsible for persisting the configuration, I figured it should be used rather than add a lot of specific code which would have similar issues.\n\nThe location of the store config button is open for discussion though, but normally the regular manager doesn't need it."}, {"count": 9, "tags": [], "bug_id": 48674, "text": "This can be a dangerous feature, for a couple of reasons.\n\n1. A bad configuration or vulnerability in the host-manager allows a remote party to write to the filesystem, rather than just trash an in-memory configuration\n2. Important information in the file may be overwritten inadvertently\n3. NOP configuration information in the file (e.g. comments) will likely be lost when the file is saved\n\nI had a look at the StoreConfig-based patch, and I must admit that I got lost in the whole architecture at the point that I started reading code in the o.a.c.storeconfig package. There is very little javadoc explaining what the heck is going on. It looks quite over-engineered and has a lot of code that looks very similar across classes.", "id": 188580, "time": "2016-02-18T18:30:57Z", "creator": "chris@christopherschultz.net", "creation_time": "2016-02-18T18:30:57Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 48674, "text": "(In reply to Christopher Schultz from comment #9)\n> This can be a dangerous feature, for a couple of reasons.\n> \n> 1. A bad configuration or vulnerability in the host-manager allows a remote\n> party to write to the filesystem, rather than just trash an in-memory\n> configuration\n\nThe remote user can almost certainly deploy applications so it is pretty much game over anyway.\n\n> 2. Important information in the file may be overwritten inadvertently\n\nI think Store config saves the old version with a timestamp.\n\n> 3. NOP configuration information in the file (e.g. comments) will likely be\n> lost when the file is saved\n\nPrice you pay...\n\n> I had a look at the StoreConfig-based patch, and I must admit that I got\n> lost in the whole architecture at the point that I started reading code in\n> the o.a.c.storeconfig package. There is very little javadoc explaining what\n> the heck is going on. It looks quite over-engineered and has a lot of code\n> that looks very similar across classes.\n\nSaving configuration is extremely tricky. There might be some clean-up possible but my recollection from the last time if looked at the code was that it was fundamentally sound.\n\nOverall, I think this is the way to go.", "id": 188583, "time": "2016-02-18T19:24:15Z", "creator": "markt@apache.org", "creation_time": "2016-02-18T19:24:15Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 48674, "text": "(In reply to Christopher Schultz from comment #9)\n> This can be a dangerous feature, for a couple of reasons.\n\nThe user has to add the storeconfig listener in his configuration to use this patch. Then all this does is a JMX method call, which is most likely already accessible elsewhere.\n\n> I had a look at the StoreConfig-based patch, and I must admit that I got\n> lost in the whole architecture at the point that I started reading code in\n> the o.a.c.storeconfig package. There is very little javadoc explaining what\n> the heck is going on. It looks quite over-engineered and has a lot of code\n> that looks very similar across classes.\n\nMaybe, but the Catalina structure is built using reflection with a lot of special cases. It's a separate optional module, so feel free to rewrite it :)", "id": 188587, "time": "2016-02-18T22:02:19Z", "creator": "remm@apache.org", "creation_time": "2016-02-18T22:02:19Z", "is_private": false, "attachment_id": null}, {"text": "I've applied a variation of Coty Sutherland's patch to trunk for 9.0.0.M4 onwards. We can tweak that as feedback is received.", "tags": [], "creator": "markt@apache.org", "is_private": false, "count": 12, "id": 188689, "time": "2016-02-22T20:23:23Z", "bug_id": 48674, "creation_time": "2016-02-22T20:23:23Z", "attachment_id": null}]