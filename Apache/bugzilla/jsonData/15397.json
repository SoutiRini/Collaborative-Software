[{"count": 0, "tags": [], "text": "I upgraded from 4.0.6 to 4.1.12 and now java mail throws an \"invalid protocol\"\nerror when trying to get the Transport.  This problem does not occur with 4.0.6.\nIf I include a private copy of mail.jar in the webapp the problem goes away in\n4.1.12, so I assume the problem is related to sharing the one in common/lib.\n\nExample code:\n\n    public static synchronized Session getSession() {\n        if(session == null) {\n            Properties props = new Properties();\n            props.put(\"mail.transport.protocol\", \"smtp\");\n            props.put(\"mail.smtp.host\", \"random smtp host\");\n\n            session = Session.getDefaultInstance(props);\n        }\n        return session;\n    }\n\nThe line that fails:\n                Transport t = getSession().getTransport();", "is_private": false, "bug_id": 15397, "id": 27875, "time": "2002-12-16T14:02:59Z", "creator": "fred@stsci.edu", "creation_time": "2002-12-16T14:02:59Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "The problem appears to be gone in the 4.1.17 release.", "is_private": false, "bug_id": 15397, "id": 28023, "time": "2002-12-18T18:29:22Z", "creator": "fred@stsci.edu", "creation_time": "2002-12-18T18:29:22Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "hi all,\n\ni had exactly the same problem and find the solution:\n\ntomcat 4.1.x use old/changed jar's!\nminimum the following jar's are smaller/older than the original:\n\n* mail.jar\n* activation.jar\n\nto solve this problem copy the originial file \"mail.jar\" from \"javamail 1.3\" to\n\".../[tomcathome]/common/lib\"\n\ncu\noliver scorp\nfinniq gmbh\ngermany", "attachment_id": null, "id": 31078, "creator": "finniq@t-online.de", "time": "2003-02-11T16:58:59Z", "bug_id": 15397, "creation_time": "2003-02-11T16:58:59Z", "is_private": false}, {"count": 3, "tags": [], "text": "additional answer:\n\n> The problem appears to be gone in the 4.1.17 release.\n\nno! we use tomcat 4.1.18 and still have this problem!\n\ncu\noliver scorp\nfinniq gmbh\ngermany\n", "is_private": false, "bug_id": 15397, "id": 31080, "time": "2003-02-11T17:05:46Z", "creator": "finniq@t-online.de", "creation_time": "2003-02-11T17:05:46Z", "attachment_id": null}]