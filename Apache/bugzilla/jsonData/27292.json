[{"count": 0, "tags": [], "bug_id": 27292, "attachment_id": null, "id": 53124, "time": "2004-02-27T13:57:19Z", "creator": "juergen.sandner@baypol.bayern.de", "creation_time": "2004-02-27T13:57:19Z", "is_private": false, "text": "We have PDF-Documents, saved for \"fast web access\", so the client can show a \npart while getting the rest. \nMS Internet Expolrer 5.5 with Acrobat 5 fires an error accessing those files, \nsaying they dont start with %PDF. \nHitting the Reload Button solves the problem in most cases, but that ist too \ndifficult for most of our users ;-) \nIn the access.log i see HTTP-Code 206. \n \nOn Apache 1.3 those Files work just perfect !!!!! \nAfter switching one Server to Apache 2.0.48 we got this problem (just on this \nserver :-). \n \nNo Problem, when using Konqueror or Mozilla as Browser."}, {"count": 1, "tags": [], "bug_id": 27292, "attachment_id": null, "text": "Seems to be an error handling partial content requests! \nI found out the difference between Apache 1.3.x and 2.x in handling partial \ncontent requests: \n \nThe client requests the following (Notice the \"Range\" Header): \n============================================================== \n    GET /applications/leben_im_plus/leben_im_plus.pdf HTTP/1.1\\r\\n \n        Request Method: GET \n    Accept: */*\\r\\n \n    Accept-Encoding: gzip, deflate\\r\\n \n    Range: bytes=8192-\\r\\n \n    Unless-Modified-Since: Fri, 27 Feb 2004 13:51:33 GMT\\r\\n \n    If-Range: \"6fb0-10ca0-403f4b65\"\\r\\n \n    User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 4.0)\\r\\n \n    Host: www2.bpfi.bpp.baypol\\r\\n \n    Connection: Keep-Alive\\r\\n \n    \\r\\n \n \nApache 1.3 answers as follows (Notice the \"Content-Range\": \n=========================================================== \n    HTTP/1.1 206 Partial Content\\r\\n \n    Date: Mon, 01 Mar 2004 10:06:23 GMT\\r\\n \n    Server: Apache/1.3.26 (Unix) Debian GNU/Linux PHP/4.1.2 mod_ssl/2.8.9 \nOpenSSL/0.9.6g mod_perl/1.26\\r\\n \n    Cache-Control: max-age=172800\\r\\n \n    Expires: Wed, 03 Mar 2004 10:06:23 GMT\\r\\n \n    Last-Modified: Fri, 27 Feb 2004 13:51:33 GMT\\r\\n \n    ETag: \"6fb0-10ca0-403f4b65\"\\r\\n \n    Accept-Ranges: bytes\\r\\n \n    Content-Length: 60576\\r\\n \n    Content-Range: bytes 8192-68767/68768\\r\\n \n    Keep-Alive: timeout=15, max=100\\r\\n \n    Connection: Keep-Alive\\r\\n \n    Content-Type: application/pdf\\r\\n \n    \\r\\n \n \nApache 2.0.48 answers with a different \"Content-Range\": \n======================================================== \n    HTTP/1.1 206 Partial Content\\r\\n \n    Date: Mon, 01 Mar 2004 09:57:21 GMT\\r\\n \n    Server: Apache/2.0.48 (Linux/SuSE)\\r\\n \n    Last-Modified: Fri, 27 Feb 2004 13:51:33 GMT\\r\\n \n    ETag: \"8df95-10ca0-cc2de340\"\\r\\n \n    Accept-Ranges: bytes\\r\\n \n    Content-Length: 60576\\r\\n \n    Cache-Control: max-age=172800\\r\\n \n    Expires: Wed, 03 Mar 2004 09:57:21 GMT\\r\\n \n    Content-Range: bytes 8192-0/68767\\r\\n \n    Keep-Alive: timeout=15, max=100\\r\\n \n    Connection: Keep-Alive\\r\\n \n    Content-Type: application/pdf\\r\\n \n    \\r\\n ", "id": 53253, "time": "2004-03-01T10:39:01Z", "creator": "juergen.sandner@baypol.bayern.de", "creation_time": "2004-03-01T10:39:01Z", "is_private": false}, {"count": 2, "tags": [], "text": "Excuse me for resubmitting, but i changed the summary to point out the real \nproblem. ", "attachment_id": null, "bug_id": 27292, "id": 53254, "time": "2004-03-01T10:42:47Z", "creator": "juergen.sandner@baypol.bayern.de", "creation_time": "2004-03-01T10:42:47Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 27292, "text": "That the server produces:\n\n    Content-Range: bytes 8192-0/68767\\r\\n \n\nis clearly buggy.  Is this the same for every request?  Can you reproduce it\nusing the simplest request:\n\n\"\nGET /applications/leben_im_plus/leben_im_plus.pdf HTTP/1.1\nRange: bytes=8192-\nHost: localhost\n\n\"\n\nCan you reproduce this using a stock 2.0.48 release rather than the patched SuSE\none?  I can't here from a quick test.\n\n", "id": 53262, "attachment_id": null, "creator": "jorton@redhat.com", "creation_time": "2004-03-01T11:31:47Z", "time": "2004-03-01T11:31:47Z", "is_private": false}, {"count": 4, "tags": [], "text": "Yes it can be reproduced. Is it possible, it has to do with mod_expires? \n \nI testet the following: \n========================== \n \ncurl -I \\ \n        --header \"Range: bytes=8192-\" \\ \n        --header \"Host: www.bpfi.bpp.baypol\" \\ \n        http://localhost/applications/leben_im_plus/leben_im_plus.pdf \n \nGives me: \n========== \nHTTP/1.1 206 Partial Content \nDate: Mon, 01 Mar 2004 12:09:45 GMT \nServer: Apache/2.0.48 (Linux/SuSE) \nLast-Modified: Fri, 27 Feb 2004 13:51:33 GMT \nETag: \"8df95-10ca0-cc2de340\" \nAccept-Ranges: bytes \nContent-Length: 60576 \nCache-Control: max-age=172800 \nExpires: Wed, 03 Mar 2004 12:09:45 GMT \nContent-Range: bytes 8192-0/68767 \nContent-Type: application/pdf \n ", "attachment_id": null, "id": 53263, "creator": "juergen.sandner@baypol.bayern.de", "time": "2004-03-01T12:15:33Z", "bug_id": 27292, "creation_time": "2004-03-01T12:15:33Z", "is_private": false}, {"count": 5, "tags": [], "text": "Bingo! I tested with an original apache 2.0.48. There it CANT be reproduced. \nWell, I guess I have to open a bug-report on the SuSE (Novell ;-) website ... \n \nThank you so far... ", "attachment_id": null, "id": 53266, "creator": "juergen.sandner@baypol.bayern.de", "time": "2004-03-01T12:42:34Z", "bug_id": 27292, "creation_time": "2004-03-01T12:42:34Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 27292, "text": "It may well be SuSE's somewhat half-arsed attempts to compile with large file\nsupport; please reopen if this is tracked down to a real bug in httpd.", "id": 53267, "time": "2004-03-01T13:11:48Z", "creator": "jorton@redhat.com", "creation_time": "2004-03-01T13:11:48Z", "is_private": false, "attachment_id": null}]