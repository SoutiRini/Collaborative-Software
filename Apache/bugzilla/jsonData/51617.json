[{"count": 0, "tags": [], "bug_id": 51617, "is_private": false, "text": "Hello,\n\nI was trying to understand how FOP is working and I downloaded the latest stable version and created a new project in JDeveloper 10g.  I'm using the binary release 1.0 .  I could do run succesfully the examples using the command line.  But when I'm trying to call it from any application, I always stumble on the same error which is the following (It's almost the same with all the example I tried) :\n\nXML-22900: (Fatal Error) An internal error condition occurred.\n\njavax.xml.transform.TransformerException: XML-22900: (Fatal Error) An internal error condition occurred.\n\n\tat oracle.xml.jaxp.JXTransformer.reportException(JXTransformer.java:775)\n\n\tat oracle.xml.jaxp.JXTransformer.transform(JXTransformer.java:374)\n\n\tat mypackage3.ExampleXML2PDF.main(ExampleXML2PDF.java:80)\n\nCaused by: java.lang.NullPointerException\n\n\tat org.apache.fop.fo.FOTreeBuilder.startElement(FOTreeBuilder.java:171)\n\n\tat oracle.xml.parser.v2.XSLEventHandler.reportStartElement(XSLEventHandler.java:230)\n\n\tat oracle.xml.parser.v2.XSLEventHandler.startElement(XSLEventHandler.java:296)\n\n\tat oracle.xml.parser.v2.XSLResultElement.processAction(XSLResultElement.java:142)\n\n\tat oracle.xml.parser.v2.XSLNode.processChildren(XSLNode.java:417)\n\n\tat oracle.xml.parser.v2.XSLResultElement.processAction(XSLResultElement.java:180)\n\n\tat oracle.xml.parser.v2.XSLNode.processChildren(XSLNode.java:417)\n\n\tat oracle.xml.parser.v2.XSLTemplate.processAction(XSLTemplate.java:191)\n\n\tat oracle.xml.parser.v2.XSLApplyTemplates.processAction(XSLApplyTemplates.java:210)\n\n\tat oracle.xml.parser.v2.XSLApplyTemplates.processAction(XSLApplyTemplates.java:123)\n\n\tat oracle.xml.parser.v2.XSLNode.processChildren(XSLNode.java:417)\n\n\tat oracle.xml.parser.v2.XSLTemplate.processAction(XSLTemplate.java:191)\n\n\tat oracle.xml.parser.v2.XSLStylesheet.execute(XSLStylesheet.java:509)\n\n\tat oracle.xml.parser.v2.XSLProcessor.processXSL(XSLProcessor.java:265)\n\n\tat oracle.xml.jaxp.JXTransformer.transform(JXTransformer.java:358)\n\n\t... 1 more\n\n---------\n\njava.lang.NullPointerException\n\n\tat org.apache.fop.fo.FOTreeBuilder.startElement(FOTreeBuilder.java:171)\n\n\tat oracle.xml.parser.v2.XSLEventHandler.reportStartElement(XSLEventHandler.java:230)\n\n\tat oracle.xml.parser.v2.XSLEventHandler.startElement(XSLEventHandler.java:296)\n\n\tat oracle.xml.parser.v2.XSLResultElement.processAction(XSLResultElement.java:142)\n\n\tat oracle.xml.parser.v2.XSLNode.processChildren(XSLNode.java:417)\n\n\tat oracle.xml.parser.v2.XSLResultElement.processAction(XSLResultElement.java:180)\n\n\tat oracle.xml.parser.v2.XSLNode.processChildren(XSLNode.java:417)\n\n\tat oracle.xml.parser.v2.XSLTemplate.processAction(XSLTemplate.java:191)\n\n\tat oracle.xml.parser.v2.XSLApplyTemplates.processAction(XSLApplyTemplates.java:210)\n\n\tat oracle.xml.parser.v2.XSLApplyTemplates.processAction(XSLApplyTemplates.java:123)\n\n\tat oracle.xml.parser.v2.XSLNode.processChildren(XSLNode.java:417)\n\n\tat oracle.xml.parser.v2.XSLTemplate.processAction(XSLTemplate.java:191)\n\n\tat oracle.xml.parser.v2.XSLStylesheet.execute(XSLStylesheet.java:509)\n\n\tat oracle.xml.parser.v2.XSLProcessor.processXSL(XSLProcessor.java:265)\n\n\tat oracle.xml.jaxp.JXTransformer.transform(JXTransformer.java:358)\n\n\tat mypackage3.ExampleXML2PDF.main(ExampleXML2PDF.java:80)\n\nDebugger disconnected from local process.\nProcess exited.\n\nAfter analysing the error, I found that the attribute \"delegate\" is always null after running : transformer.transform(src, res);\n\nSince those are your examples, they should work and have no errors.  Just for fun I did edited the FOTreeBuilder class in the FOP.jar, adding if (delegate == null) {this.startDocument()}\n\nSo it began to work without errors, thought it's not correct since the PDF file is unreadable.  I've tried the following examples :\n\nExampleFO2.java\nExampleXML2PDF.java\nand the example in the user guide.\n\nThe only difference between your files and mine is that I created my own package in JDev, but I did copy/paste all the rest of your code.\n\nI'll continue to search a way to correct the error.", "id": 148392, "time": "2011-08-04T19:38:51Z", "creator": "daniel.gagnon@mdeie.gouv.qc.ca", "creation_time": "2011-08-04T19:38:51Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 51617, "attachment_id": null, "text": "resetting P2 open bugs to P3 pending further review", "id": 157582, "time": "2012-04-07T01:44:53Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:44:53Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 51617, "attachment_id": null, "text": "lowering priority as this does not affect features or performance", "id": 157681, "time": "2012-04-08T09:09:26Z", "creator": "gadams@apache.org", "creation_time": "2012-04-08T09:09:26Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 51617, "text": "unable to reproduce in 1.1dev (trunk); see console.log.txt attachment; see also http://svn.apache.org/viewvc?rev=1326166&view=rev for minor change to add 'run' target, etc.\n\nn.b. from the backtrace in comment 0, i can see that your JDev environment is making use of a different implementation of javax.xml.transform.Transformer than is normally used by FOP:\n\nyou used:\n\noracle.xml.jaxp.JXTransformer\n\nwhile FOP normally uses:\n\norg.apache.xalan.transformer.Transform\n\nso I think the problem is that you aren't using xalan-2.7.0.jar as found in $FOP_HOME/lib", "id": 158083, "time": "2012-04-14T18:12:31Z", "creator": "gadams@apache.org", "creation_time": "2012-04-14T18:12:31Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "gadams@apache.org", "text": "Created attachment 28608\nconsole output", "id": 158084, "attachment_id": 28608, "bug_id": 51617, "creation_time": "2012-04-14T18:13:21Z", "time": "2012-04-14T18:13:21Z", "is_private": false}, {"count": 5, "tags": [], "creator": "gadams@apache.org", "text": "batch transition resolved+worksforme to closed+worksforme; if you believe this\nremains a bug and can demonstrate it with appropriate input FO file and output\nPDF file (as applicable), then you may reopen", "id": 158633, "attachment_id": null, "bug_id": 51617, "creation_time": "2012-04-30T00:19:38Z", "time": "2012-04-30T00:19:38Z", "is_private": false}]