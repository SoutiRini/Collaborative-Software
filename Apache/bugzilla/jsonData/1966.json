[{"text": "Hi,\n\nI've found that if I set unpackWARs to \"false\" in server.xml, then the\n\"foundation\" taglib from jakarta-taglibs fails. If it is \"true\", then the same\ntaglib works.\n\nA Servlet Exception Has Occurred\n\norg.apache.jasper.JasperException: Unable to compile class for\nJSP/home/jeff/tc4/bin/../work/localhost/foundation-examples/_0002frequest_jsp.java:68:\nClass org.apache.ta927 Sat Jun 02 12:46:38 GMT+00:00 2001\norg/apache/taglibs/foundation/request/RequestTag.classglibs.foundation.reque 927\nSat Jun 02 12:46:38 GMT+00:00 2001\norg/apache/taglibs/foundation/request/RequestTag.classst.RequestTag not found.\n                org.apache.taglibs.foundation.request.RequestTag\n_jspx_th_fnd_request_0 = new org.apache.taglibs.foundation.request.RequestTag();\n                                                     ^\n/home/jeff/tc4/bin/../work/localhost/foundation-examples/_0002frequest_jsp.java:68:\nClass org.apache.taglibs.foundation.request.RequestTag not found.\n                org.apache.taglibs.foundation.request.RequestTag\n_jspx_th_fnd_request_0 = new org.apache.taglibs.foundation.request.RequestTag();\n                                                                               \n                                                   ^\n/home/jeff/tc4/bin/../work/localhost/foundation-examples/_0002frequest_jsp.java:94:\nClass org.apache.taglibs.foundation.request.RequestTag not found.\n                org.apache.taglibs.foundation.request.RequestTag\n_jspx_th_fnd_request_1 = new org.apache.taglibs.foundation.request.RequestTag();\n                                                     ^\n/home/jeff/tc4/bin/../work/localhost/foundation-examples/_0002frequest_jsp.java:94:\nClass org.apache.taglibs.foundation.request.RequestTag not found.\n                org.apache.taglibs.foundation.request.RequestTag\n_jspx_th_fnd_request_1 = new org.apache.taglibs.foundation.request.RequestTag();\n                                                                               \n                                                   ^\n/home/jeff/tc4/bin/../work/localhost/foundation-examples/_0002frequest_jsp.java:120:\nClass org.apache.taglibs.foundation.print.PrintTag not found.\n                org.apache.taglibs.foundation.print.PrintTag\n_jspx_th_fnd_print_0 = new org.apache.taglibs.foundation.print.PrintTag();\n                                                   ^\n/home/jeff/tc4/bin/../work/localhost/foundation-examples/_0002frequest_jsp.java:120:\nClass org.apache.taglibs.foundation.print.PrintTag not found.\n                org.apache.taglibs.foundation.print.PrintTag\n_jspx_th_fnd_print_0 = new org.apache.taglibs.foundation.print.PrintTag();\n                                                                               \n                                           ^\n\n\nThere's a lot more, much the same.\n\nTo replicate:\n\n1) Download jakarta-taglibs\n2) do an \"ant dist\" for foundation\n3) copy foundation-examples.war to $CATALINA_HOME/webapps\n4) delete $CATALINA_HOME/work/ (or it might use classes from a run with\nunpackWARs=\"true\").\n5) restart tomcat\n6) request /foundation-examples/request.jsp\n\n\nSeems like the WEB-INF/lib/foundation.jar file isn't known to the classloader of\nthe jasper compiler. I've verified (\"jar tvf\") that both the war file and\nfoundation.jar file are valid, and foundation.jar does contain the missing class.\n\n\n--Jeff", "tags": [], "bug_id": 1966, "is_private": false, "count": 0, "id": 2720, "time": "2001-06-01T22:39:40Z", "creator": "jeff@socialchange.net.au", "creation_time": "2001-06-01T22:39:40Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 2721, "time": "2001-06-01T23:47:50Z", "bug_id": 1966, "creation_time": "2001-06-01T23:47:50Z", "text": "It's an error when compiling the generated source, so it can't be a classloader \nissue.\nCompilation in Java requires physical files. To get around this, the JARs \ncontained in the WAR file should have been copied in the work directory.\nApparently there's a problem with that.\n\nNote that there is still one part of Jasper (10 lines of code, and yes, it's \ntaglibs related) which still needs to be rewritten to fully support running \nfrom a WAR."}, {"count": 2, "tags": [], "text": "This particular problem should be fixed : the JARs are now copied to the work \ndirectory, so compilation will succeed. I found other \"regressions\" in the \nprocess of testing that bug (I put some quotes around regressions since they \nare caused by removing bad hacks which caused a lot of problems).", "is_private": false, "bug_id": 1966, "id": 2722, "time": "2001-06-02T00:36:35Z", "creator": "remm@apache.org", "creation_time": "2001-06-02T00:36:35Z", "attachment_id": null}]