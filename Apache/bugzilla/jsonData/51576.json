[{"count": 0, "tags": [], "bug_id": 51576, "text": "I recently updated Apache 2.2.6 > 2.2.17 (latest ubuntu server apt-get release), and a rewrite rule stopped working.\n\nVirtual host config:\n\nRewriteRule ^/(images|javascripts|css|ssp|media)/(.*\\.)v[0-9.]+\\.(css|js|gif|png|jpg|swf)$ /$1/$2$3 [L]\n\n\nURL accessed:\n\nhttp://media.mysite.com/media/crotw/2011/2011-07-28_crotw_car.v6.30.jpg\n\n\nThe rewrite log shows the (correct) information:\n\n\n0.0.0.0 - - [28/Jul/2011:11:54:35 --0500] [media.mysite.com/sid#7fccf376d8c8][rid#7fccf422ece0/initial] (3) applying pattern '^/(images|javascripts|css|ssp|media)/(.*\\.)v[0-9.]+\\.(css|js|gif|png|jpg|swf)$' to uri '/media/crotw/2011/2011-07-28_crotw_car.v6.30.jpg'\n0.0.0.0 - - [28/Jul/2011:11:54:35 --0500] [media.mysite.com/sid#7fccf376d8c8][rid#7fccf422ece0/initial] (2) rewrite '/media/crotw/2011/2011-07-28_crotw_car.v6.30.jpg' -> '/media/crotw/2011/2011-07-28_crotw_car.jpg'\n0.0.0.0 - - [28/Jul/2011:11:54:35 --0500] [media.mysite.com/sid#7fccf376d8c8][rid#7fccf422ece0/initial] (2) local path result: /media/crotw/2011/2011-07-28_crotw_car.jpg\n0.0.0.0 - - [28/Jul/2011:11:54:35 --0500] [media.mysite.com/sid#7fccf376d8c8][rid#7fccf422ece0/initial] (1) go-ahead with /media/crotw/2011/2011-07-28_crotw_car.jpg [OK]\n\n\nHowever, I get a 404 error, and the error log shows:\n\n[Thu Jul 28 12:07:57 2011] [error] [client 0.0.0.0] File does not exist: /var/www/httpd/www.mysite.com/docs/media/crotw\n\n\nNotice everything missing past the crotw part.\n\nFile permissions are OK, and I can copy/paste the go-ahead address in the browser address bar and the image shows just fine. So, it appears that the internal rewrite is not working in Apache any more, as it did in 2.2.6.", "id": 148254, "time": "2011-07-28T17:12:55Z", "creator": "monte@ohrt.com", "creation_time": "2011-07-28T17:12:55Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 51576, "is_private": false, "id": 149412, "time": "2011-09-17T17:29:54Z", "creator": "covener@gmail.com", "creation_time": "2011-09-17T17:29:54Z", "tags": [], "text": "This implies \"crotw\" is the first directory found to be missing under the docroot. Maybe you used to have a /media in the filesystem and it was served a different way?  Rewrite will interpret it differntly whether the first path component really exists in filesystem (or treated as URL with docroot prepended)"}]