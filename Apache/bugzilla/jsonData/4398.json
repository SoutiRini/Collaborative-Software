[{"count": 0, "tags": [], "creator": "mlegault@cplane.com", "attachment_id": null, "text": "The start method of the org.apache.tools.ant.Main object instantiates a Main \nobject, calls runBuild, then calls System.exit(0).  Now, the JavaDoc of the \nmethod says \"Entry point allowing for more options from other front ends\", \nwhich is exactly what I want to do.  It all works fine, except that if anything \ngoes wrong with the build it exits (arguably ok), and worse if everything works \nfine it exits too.\n\nThere might be a reason for the exit there, I'm not familiar enough with the \ncode to know.\n\nThanks,\nMatt", "id": 7104, "time": "2001-10-24T08:53:02Z", "bug_id": 4398, "creation_time": "2001-10-24T08:53:02Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jesse.glick@netbeans.com", "attachment_id": null, "is_private": false, "id": 7141, "time": "2001-10-25T03:53:19Z", "bug_id": 4398, "creation_time": "2001-10-25T03:53:19Z", "text": "It also exits with 1 if there is a problem, which is useful. Probably the\nJavadoc for this class should discourage attempts to reuse it for other\nfront-ends. It is not necessary to do so at all. You can do everything you need\nwith BuildLogger and Project.\n\nOr else start() should return an int which main() should exit with, for people\nwishing to exactly mimic the command-line options behavior."}, {"count": 2, "tags": [], "bug_id": 4398, "text": "If you look at the class javadoc you will see\n\n * If you integrating Ant into some other tool, this is not the class\n * to use as an entry point. Please see the source code of this\n * class to see how it manipulates the Ant project classes.\n\nI have removed the misleading javadoc comment indicating you should use the \nstart method from other frontends.\n", "id": 7187, "time": "2001-10-26T03:27:38Z", "creator": "donaldp@apache.org", "creation_time": "2001-10-26T03:27:38Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 4398, "attachment_id": null, "text": "Blech - what I meant to say is that I removed the javadoc comment from start \nmethod. You should just use project/listener directly as Jesse indicated.\n", "id": 7188, "time": "2001-10-26T03:29:24Z", "creator": "donaldp@apache.org", "creation_time": "2001-10-26T03:29:24Z", "is_private": false}, {"count": 4, "attachment_id": null, "creator": "johnsm@wrq.com", "is_private": false, "id": 36404, "time": "2003-04-30T17:24:44Z", "bug_id": 4398, "creation_time": "2003-04-30T17:24:44Z", "tags": [], "text": "My problem is that I want to functional test my custom Ant task using JUnit. \nBut alas I cannot, as the System.exit call kills my TestCase.  Couldn't\nSystem.exit be  optional?  Maybe via a System property?"}, {"count": 5, "tags": [], "bug_id": 4398, "text": "you should make a download of the sources of ant, and have a look at the way \nJUnit testcases are done in ant. The Main class is not used.\nLook for instance at the base class of most test cases \nsrc/testcases/org/apache/tools/ant/BuildFileTest.java which you can see under\nhttp://cvs.apache.\norg/viewcvs/ant/src/testcases/org/apache/tools/ant/BuildFileTest.java?rev=1.\n22&content-type=text/vnd.viewcvs-markup\nIf you look for instance at this one : http://cvs.apache.\norg/viewcvs/ant/src/testcases/org/apache/tools/ant/taskdefs/ZipTest.java?\nrev=HEAD&content-type=text/vnd.viewcvs-markup you will see how it is used \nconcretely. There is a corresponding build file called zip.xml under \nsrc/etc/testcases/taskdefs/zip.xml (http://cvs.apache.\norg/viewcvs/ant/src/etc/testcases/taskdefs/zip.xml?\nrev=HEAD&content-type=text/vnd.viewcvs-markup).\nFinally if you look at the build.xml of ant, you will see how the test cases are \nrun.", "id": 36411, "time": "2003-04-30T21:18:54Z", "creator": "levylambert@tiscali-dsl.de", "creation_time": "2003-04-30T21:18:54Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 4398, "attachment_id": null, "is_private": false, "id": 61609, "time": "2004-08-05T20:54:53Z", "creator": "mbenson@apache.org", "creation_time": "2004-08-05T20:54:53Z", "text": "*** Bug 30501 has been marked as a duplicate of this bug. ***"}]