[{"count": 0, "tags": [], "text": "When logging events to the NT System log, the Event Category\nis not displayed (only the numeric value of the category id).\n\nThis problem exists in the latest release and the problematic\ncode exists in the most current code.\n\nThe problem is that the getCategory() method in nteventlog.cpp\nis returning a category id that is not found in the message (.MC)\nfile.\n\nThis method uses the priority to get the category, category = priority + 1.\nSince the priorities range from 10000 to 50000 and we have\ncategory ids (in the .MC file) that range from 1 to 8, this is\nnot the proper mapping.\n\nOne possible solution is to update the getCategory() method with\nthe following code which maps the categories to the proper message\nids.\n\nWORD getCategory(jint priority) {\n  WORD ret_val;\n  \n  // Use Priority to obtain the message id for the category\n  switch (priority) {\n  case org_apache_log4j_Priority_FATAL_INT:\n      ret_val = 3;\n  case org_apache_log4j_Priority_ERROR_INT:\n    ret_val = 4;\n    break;\n  case org_apache_log4j_Priority_WARN_INT:\n    ret_val = 5;\n    break;\n  case org_apache_log4j_Priority_INFO_INT:\n      ret_val = 6;\n      break;\n  case org_apache_log4j_Priority_DEBUG_INT:\n  default:\n    ret_val = 8;\n    break;\n  }\n  return ret_val;\n}\n\n\n** However, I am not sure if this is the best solution.\nThe information is a bit redundant since the same information\ncan be obtained from the NT Event Type.  Perhaps a better\nuse of the Category would be to use the org.apache.log4j.Category\nname as the name of the NT Event category.", "is_private": false, "bug_id": 657, "id": 787, "time": "2001-02-20T13:31:10Z", "creator": "kkocan@isolutionscorp.com", "creation_time": "2001-02-20T13:31:10Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "bugzilla@apache.org", "attachment_id": null, "is_private": false, "id": 1997, "time": "2001-04-22T07:27:35Z", "bug_id": 657, "creation_time": "2001-04-22T07:27:35Z", "text": "This has been corrected in the recent release. Correct?"}]