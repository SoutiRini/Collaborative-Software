[{"count": 0, "tags": [], "text": "I've been trying to get the data from an XMLResource out of the xindice XML \nimplementation, and into a different one (in this case electric XML, which \nimplements the org.w3c classes as well).  So what I did was get the \nXMLResource as a org.w3c.dom.Node, get the first child of that node, and try \nto import that node into a Document.  I kept getting NullPointerExceptions \ninside the importNode call, and I've traced it to the cloneNode() that happens \non the NodeImpl node (hopefully the source will make this clearer).  This may \nbe an error on my part, but I think that it should work, and the cloneNode \nshould certainly work in any case (unless I'm missing something).\n\nIn the source, the importNode call internally calls cloneNode, and that's \nwhere the error is.  The call that I make to cloneNode is just to show that \nthe cloneNode call is in fact what generates the error.\n\n--Source (I'm using fully qualified names for clarity)--\nXMLResource document = (XMLResource) col.createResource(null, \"XMLResource\");\ndocument.setContent(data);\norg.w3c.dom.Node nde = (org.w3c.dom.Node) document.getContentAsDOM();\n//nde.getNodeType() returns DOCUMENT_TYPE, so document.importNode won't work.\n//Get the nodes first child, and import that.\norg.w3c.dom.Node ndeRoot = (org.w3c.dom.Node) nde.getFirstChild();\n\n//Causes error\norg.w3c.dom.Node cloneNode = ndeRoot.cloneNode(true);\n\nelectric.xml.Document doc = new electric.xml.Document();\n//causes error\norg.w3c.dom.Node newNode = doc.importNode(ndeRoot, true);\ndoc.setRoot((electric.xml.Element) newNode);\n\n--Stack Trace--\nDEBUG>\njava.lang.NullPointerException\n        at java.io.ByteArrayInputStream.<init>(Unknown Source)\n        at org.apache.xindice.util.ByteArrayInput.<init>\n(ByteArrayInput.java:77)\n        at org.apache.xindice.xml.dom.ElementImpl.loadAttributes\n(ElementImpl.java:170)\n        at org.apache.xindice.xml.dom.ElementImpl.<init>(ElementImpl.java:93)\n        at org.apache.xindice.xml.dom.NodeImpl.cloneNode(NodeImpl.java:539)\n        at com.eds.TDP.impl.xml.TDPserve.intCreate(TDPserve.java:778)\n        at com.eds.TDP.impl.xml.TDPserve.create(TDPserve.java:928)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at electric.util.reflect.Invocation.execute(Unknown Source)\n        at electric.util.reflect.Invocation.invoke(Unknown Source)\n        at electric.service.object.ObjectService.invoke(Unknown Source)\n        at electric.net.soap.SOAPMessage.invoke(Unknown Source)\n        at electric.net.soap.SOAPMessage.invoke(Unknown Source)\n        at electric.net.soap.http.SOAPHTTPHandler.service(Unknown Source)\n        at electric.server.http.ServletServer.service(Unknown Source)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at electric.net.servlet.Config.service(Unknown Source)\n        at electric.net.http.HTTPContext.service(Unknown Source)\n        at electric.net.servlet.ServletContainer.service(Unknown Source)\n        at electric.net.http.WebServer.service(Unknown Source)\n        at electric.net.socket.SocketServer.run(Unknown Source)\n        at electric.net.socket.SocketRequest.run(Unknown Source)\n        at electric.util.thread.ThreadPool.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nDEBUG>\njava.lang.NullPointerException\n        at java.io.ByteArrayInputStream.<init>(Unknown Source)\n        at org.apache.xindice.util.ByteArrayInput.<init>\n(ByteArrayInput.java:77)\n        at org.apache.xindice.xml.dom.ElementImpl.loadAttributes\n(ElementImpl.java:170)\n        at org.apache.xindice.xml.dom.ElementImpl.<init>(ElementImpl.java:93)\n        at org.apache.xindice.xml.dom.NodeImpl.cloneNode(NodeImpl.java:539)\n        at electric.xml.Document.importNode(Unknown Source)\n        at com.eds.TDP.impl.xml.TDPserve.intCreate(TDPserve.java:780)\n        at com.eds.TDP.impl.xml.TDPserve.create(TDPserve.java:928)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at electric.util.reflect.Invocation.execute(Unknown Source)\n        at electric.util.reflect.Invocation.invoke(Unknown Source)\n        at electric.service.object.ObjectService.invoke(Unknown Source)\n        at electric.net.soap.SOAPMessage.invoke(Unknown Source)\n        at electric.net.soap.SOAPMessage.invoke(Unknown Source)\n        at electric.net.soap.http.SOAPHTTPHandler.service(Unknown Source)\n        at electric.server.http.ServletServer.service(Unknown Source)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at electric.net.servlet.Config.service(Unknown Source)\n        at electric.net.http.HTTPContext.service(Unknown Source)\n        at electric.net.servlet.ServletContainer.service(Unknown Source)\n        at electric.net.http.WebServer.service(Unknown Source)\n        at electric.net.socket.SocketServer.run(Unknown Source)\n        at electric.net.socket.SocketRequest.run(Unknown Source)\n        at electric.util.thread.ThreadPool.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)", "attachment_id": null, "bug_id": 18282, "id": 33705, "time": "2003-03-24T17:24:48Z", "creator": "matt.mcminn@eds.com", "creation_time": "2003-03-24T17:24:48Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 18282, "attachment_id": null, "id": 38107, "time": "2003-05-31T00:21:42Z", "creator": "Kevin.Ross@iVerticalLeap.com", "creation_time": "2003-05-31T00:21:42Z", "is_private": false, "text": "would you be able to try with 1.1 and submit a test case?  this might still \nexist and I don't want to close this out as 1.0 is obsolete, but the core \nstill exists."}, {"count": 2, "tags": [], "text": "Please provide a junit test proving the error in xindice 1.1, and set the \nstatus to 'reopened'.  Unfortunately, without a test case, we don't have the \nresources to attempt to duplicate your problem.", "is_private": false, "id": 38948, "creator": "Kevin.Ross@iVerticalLeap.com", "time": "2003-06-17T04:02:48Z", "bug_id": 18282, "creation_time": "2003-06-17T04:02:48Z", "attachment_id": null}]