[{"count": 0, "tags": [], "bug_id": 9865, "is_private": false, "text": "When connected to Apache that is set up to do port based virtual hosting (i.e. \nSame host name, but on a different port) there is no way to configure Tomcat \nto have different webapps for each virtual host.\n\nhttpd.conf:\nNameVirtualHost *:80\nNameVirtualHost *:443\n<VirtualHost *:80>\nServerName www.host.com:80\nJkMount / ajp13\nJkMount /* ajp13\n</VirtualHost>\n<VirtualHost *:443>\nServerName www.host.com:443\nJkMount / ajp13\nJkMount /* ajp13\n</VirtualHost>\n\nserver.xml (Doens't work, but is how I need it to work): \n<Host name=\"www.host.com:80\" appBase=\"/var/sites/webapps/www.host.co.uk:80\">\n.....\n</Host>\n<Host name=\"www.host.com:443\" appBase=\"/var/sites/webapps/www.host.co.uk:443\">\n.....\n</Host>\n\nserver.xml (Does work, but gives same webapps for each virtual host):\n<Host name=\"www.host.com\" appBase=\"/var/sites/webapps/www.host.co.uk\">\n.....\n</Host>", "id": 17790, "time": "2002-06-14T12:19:41Z", "creator": "Dave@Staffplanner.co.uk", "creation_time": "2002-06-14T12:19:41Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 9865, "is_private": false, "id": 17793, "time": "2002-06-14T14:01:45Z", "creator": "glenn@apache.org", "creation_time": "2002-06-14T14:01:45Z", "tags": [], "text": "This is not a bug in Tomcat. It is a problem in your config.\nI do the exact same thing, have the same domain configured on two\ndifferent ports.  You need to configure to workers in your workers.properties\nand two connectors in server.xml. One for port 80 and one for port 443.\nYou might also consider setting secure=true for the Connector you configure\nfor port 443."}, {"count": 2, "tags": [], "bug_id": 9865, "attachment_id": null, "id": 17806, "time": "2002-06-14T15:43:18Z", "creator": "Dave@Staffplanner.co.uk", "creation_time": "2002-06-14T15:43:18Z", "is_private": false, "text": "Thanks for your help, but surely this would mean I would need a <Service> node \nfor each port number. I'm reopening this and changing to enhancement, because \nI feel configuring virtual ports should be as easy as configuring virtual \nhosts."}, {"count": 3, "tags": [], "bug_id": 9865, "attachment_id": null, "text": "This is not an enhancement either, Tomcat with mod_jk can already do this.\nI do it myself.  Yes, you need two Engines defined.  One with a Connector\nfor port 80, one with a Connector for port 443.  Please read the docs and\nconfigure Tomcat for your needs.  This is not a bug or enhancement, Tomcat\nwith mod_jk can already do what you need.", "id": 17812, "time": "2002-06-14T16:29:21Z", "creator": "glenn@apache.org", "creation_time": "2002-06-14T16:29:21Z", "is_private": false}]