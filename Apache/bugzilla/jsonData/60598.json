[{"count": 0, "tags": [], "bug_id": 60598, "text": "With multiple graceful restarts apache do not spawn the specified number of processes as indicated by the mpm_prefork MaxRequestWorkers parameter.\n\nTo reproduce the bug take the following steps:\n\n1) start apache with following mpm_prefork.conf file\n<IfModule mpm_prefork_module>\n        MaxRequestWorkers   6\n        MaxRequestsPerChild 0\n</IfModule>\n\nthen the 6 children processes are spawned as expected\n\n2) change the mpm_prefork.conf and restart apache gracefully \n(sudo apache2ctl -k graceful)\n<IfModule mpm_prefork_module>\n        MaxRequestWorkers   2\n        MaxRequestsPerChild 0\n</IfModule>\n\nthe number of children process is reduced to 2 as expected\n\n3) change the mpm_prefork.conf and restart apache gracefully\n(sudo apache2ctl -k graceful)\n<IfModule mpm_prefork_module>\n        MaxRequestWorkers   6\n        MaxRequestsPerChild 0\n</IfModule>\n\nthe number of children processes still remain fixed to 2 (observed with (heavy/soft/zero) load on the server). Generally what we saw is that this behavior happens after a chain of graceful restart when MaxRequestWorkers is  decreased then increased.", "id": 196120, "time": "2017-01-17T17:41:07Z", "creator": "bistrulli@gmail.com", "creation_time": "2017-01-17T17:41:07Z", "is_private": false, "attachment_id": null}]