[{"count": 0, "tags": [], "bug_id": 24832, "is_private": false, "text": "The JDBCAccessLogValve not working after Database restart.\nI have ported the JDBCRealm connection handling. (s. patch)\nI added the also the user,password attributes to get it working with hsql \n1.7.1, 1.7.2 alpha and mysql 3.23.52\n\nwith hsql I used following table layout:\n\ndrop ts column \ndelete not null column to support common log pattern.\n\ndrop table tomcat_access IF EXISTS;\n-- drop INDEX i_access_ts ; \n-- drop INDEX i_access_remoteHost ; \n-- drop INDEX i_access_virtualHost  ; \n-- drop INDEX i_access_query  ; \n-- drop INDEX i_access_userAgent  ; \n\n\nCREATE TABLE tomcat_access (\n id INTEGER IDENTITY,\n remoteHost VARCHAR(60) ,\n user VARCHAR(30),\n timestamp TIMESTAMP NOT NULL,\n virtualHost VARCHAR(64),\n method VARCHAR(8),\n query VARCHAR(255) NOT NULL,\n status SMALLINT  NOT NULL,\n bytes INTEGER NOT NULL,\n referer VARCHAR(128),\n userAgent VARCHAR(128)\n );\nCREATE INDEX i_access_timestamp ON  tomcat_access (timestamp) ; \nCREATE INDEX i_access_remoteHost ON  tomcat_access (remoteHost) ; \nCREATE INDEX i_access_virtualHost ON  tomcat_access (virtualHost) ; \nCREATE INDEX i_access_query ON  tomcat_access (query) ; \nCREATE INDEX i_access_userAgent ON  tomcat_access (userAgent) ; \n\nMore ToDO:\nError handling is not really good . Log all Exceptions after Database gone.\nWith a datasouce support we can have parallel insert handling.\n\nPeter", "id": 47640, "time": "2003-11-19T18:18:08Z", "creator": "pr@webapp.de", "creation_time": "2003-11-19T18:18:08Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "pr@webapp.de", "attachment_id": 9193, "text": "Created attachment 9193\nPatch to JDBCAccessLogValve connection restart handling", "id": 47641, "time": "2003-11-19T18:19:08Z", "bug_id": 24832, "creation_time": "2003-11-19T18:19:08Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "remm@apache.org", "text": "Since there's basically nobody to maintain this component, I will apply your\npatch (it seems ok).", "count": 2, "id": 47661, "time": "2003-11-19T23:56:24Z", "bug_id": 24832, "creation_time": "2003-11-19T23:56:24Z", "is_private": false}]