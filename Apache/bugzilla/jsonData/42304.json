[{"count": 0, "tags": [], "bug_id": 42304, "is_private": false, "id": 102688, "attachment_id": null, "creator": "brian.hartin@gmail.com", "creation_time": "2007-04-30T12:11:33Z", "time": "2007-04-30T12:11:33Z", "text": "Perforce now allows labels to include a revision specifier, which allows the\nlabel to refer to all files under a certain view, as of a specific revision,\nwithout actually attaching files to the label.  This saves a lot of space in the\nPerforce metadata tables, so it is highly desirable.  The P4Label task has no\nsuch 'revision' attribute, so we have to use <exec> to get this feature.  I have\nwritten a patch to address this, and will attempt to contribute such.\n\nSupporting this feature would be as simple as adding this (optional) attribute\nand adding it to the 'label' command when present, e.g. \n\n// If revision provided\nnewLabel = newLabel + \"\\nRevision: \" + revision;\n\nand skipping the 'labelsync -l' operation, e.g.\n\n// Only if no revision provided\nexecP4Command(\"labelsync -l \" ..."}, {"count": 1, "tags": [], "text": "Created attachment 20077\nAn update P4Label.java which fixes this bug.\n\nThis is a replacement P4Label.java file, modified from version 1.7.0.", "is_private": false, "id": 102690, "creator": "brian.hartin@gmail.com", "time": "2007-04-30T12:21:32Z", "bug_id": 42304, "creation_time": "2007-04-30T12:21:32Z", "attachment_id": 20077}, {"count": 2, "tags": [], "text": "Comment on attachment 20077\nAn update P4Label.java which fixes this bug.\n\nCompare: (<)C:\\temp\\Document1.txt (5730 bytes)\n   with: (>)C:\\temp\\Document2.txt (6161 bytes)\n\n51a51\n>     protected String revision;\n78a79,86\n>      * Sets the optional revision field.\n>      * @param revision The optional revision\n>      */\n>     public void setRevision(String revision) {\n>         this.revision = revision;\n>     }\n> \n>     /**\n110d119\n< \n115,116c123,129\n<\t\t  + \"\\nOptions: unlocked\"\n<\t\t  + \"\\nView: \\n\\t\" + P4View;\n---\n>                 + \"\\nOptions: unlocked\";\n> \n>         if (revision != null && revision.length() >= 1) {\n> \t\t    newLabel = newLabel + \"\\nRevision: \" + revision;\n> \t\t}\n> \n>         newLabel = newLabel + \"\\nView: \\n\\t\" + P4View;\n128,133c141,147\n<\t  execP4Command(\"labelsync -l \" + name, new P4HandlerAdapter() {\n<\t      public void process(String line) {\n<\t\t  log(line, Project.MSG_VERBOSE);\n<\t      }\n<\t  });\n< \n---\n>         if(revision == null || revision.length() < 1) {\n> \t        execP4Command(\"labelsync -l \" + name, new P4HandlerAdapter() {\n> \t            public void process(String line) {\n> \t                log(line, Project.MSG_VERBOSE);\n> \t            }\n>         \t});\n>  \t\t}", "attachment_id": 20077, "bug_id": 42304, "id": 102781, "time": "2007-05-02T14:15:42Z", "creator": "brian.hartin@gmail.com", "creation_time": "2007-05-02T14:15:42Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 42304, "attachment_id": 20112, "id": 102782, "time": "2007-05-02T14:17:09Z", "creator": "brian.hartin@gmail.com", "creation_time": "2007-05-02T14:17:09Z", "is_private": false, "text": "Created attachment 20112\nThe changed lines which fix the problem"}, {"count": 4, "tags": [], "text": "Reset assignee so mails go to list.", "is_private": false, "id": 127820, "creator": "markt@apache.org", "time": "2009-06-10T13:20:57Z", "bug_id": 42304, "creation_time": "2009-06-10T13:20:57Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 42304, "attachment_id": null, "id": 165926, "time": "2013-03-18T01:44:25Z", "creator": "antoine@apache.org", "creation_time": "2013-03-18T01:44:25Z", "is_private": false, "text": "Perforce Ant tasks have been removed in Ant 1.9.0.\nUsers of Perforce Ant Tasks are advised to use the tasks supplied by Perforce Inc."}]