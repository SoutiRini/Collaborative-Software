[{"count": 0, "text": "If the stored document uses src as it's namespace prefix then this is over\nwritten by the query result generator.\n\nI've added testConflictingPrefix to the XPathQueryTest to expose this issue.\n\nThe simple work around is not to use 'src' as a prefix for documents you store.", "bug_id": 22122, "is_private": false, "id": 42111, "time": "2003-08-04T23:32:35Z", "creator": "kevin@rocketred.com.au", "creation_time": "2003-08-04T23:32:35Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 22122, "attachment_id": null, "is_private": false, "id": 42116, "time": "2003-08-05T00:03:17Z", "creator": "kevin@rocketred.com.au", "creation_time": "2003-08-05T00:03:17Z", "text": "A test has been added to the XPath test suite."}, {"count": 2, "tags": [], "creator": "kevin@rocketred.com.au", "text": "Will now check to see if the src prefix has been used. If it has it will try src\n+ timestamp until it finds one that isn't used.", "id": 42449, "attachment_id": null, "bug_id": 22122, "creation_time": "2003-08-09T03:37:03Z", "time": "2003-08-09T03:37:03Z", "is_private": false}, {"count": 3, "tags": [], "creator": "Terry.Rosenbaum@gmail.com", "text": "Created attachment 8352\nElementImpl.expandSource will reuse namespace definitions", "id": 44704, "attachment_id": 8352, "bug_id": 22122, "creation_time": "2003-09-25T17:18:59Z", "time": "2003-09-25T17:18:59Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 22122, "text": "The fix for this bug can produce undesirable\nresults. Sometimes the \"src\" prefix could be\ndefined with the exact same namespace value.\nsourcePrefix should check to see if the namespace\nvalue is the same when trying to make the \"src\"\nprefix unique. Sometimes can get result like:\n\n<bar foo=\"bar\" bar=\"bar\"\nxmlns:src1064505904532=\"http://xml.apache.org/xindice/Query\"\nsrc1064505904532:col=\"/db/testing/current\" src1064505904532:key=\"doc3\"\nxmlns:src=\"http://xml.apache.org/xindice/Query\"/>\n\nWhen expecting:\n\n<bar foo=\"bar\" bar=\"bar\"\nsrc:col=\"/db/testing/current\" src:key=\"doc3\"\nxmlns:src=\"http://xml.apache.org/xindice/Query\"/>\n\nPatch attached above requires that the namespace\nas well as the prefix be passed to ElementImpl.sourcePrefix.\nBefore trying to make a unique name for the prefix,\nit checks to see if the namespace of the existing\nprefix matches the namespace of the proposed\nprefix. If it does, it returns the prefix unaltered.\n\n\n", "id": 44705, "time": "2003-09-25T17:24:00Z", "creator": "Terry.Rosenbaum@gmail.com", "creation_time": "2003-09-25T17:24:00Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 22122, "text": "Seems reasonable to me. I'll patch it over the weekend.\n\nBTW: why is the current solution a problem. The XML produced is symatically the\nsame with the unpatched version.", "id": 44722, "time": "2003-09-25T21:21:44Z", "creator": "kevin@rocketred.com.au", "creation_time": "2003-09-25T21:21:44Z", "is_private": false, "attachment_id": null}, {"count": 6, "text": "We should to be free to change the namespace prefixes as long makes no\ndifference to the resulting XML. By no differences I mean being able to run the\nsame xpath or other XML query over both the source and result document (this is\nthe same criteria a xmlunit applies for equals). The resulting text\nrepresentation may not be the same though.\n\nIt is a nice enhancement to use the same prefix as supplied if possible, though\nit shouldn't be required.", "bug_id": 22122, "is_private": false, "id": 44759, "time": "2003-09-26T23:45:55Z", "creator": "kevin@rocketred.com.au", "creation_time": "2003-09-26T23:45:55Z", "tags": [], "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 22122, "text": "This will only happen if you use the http://xml.apache.org/xindice/Query\nnamespace in your query. The prefix must to be changed if the src prefix is used\nwith any other namespace. \n\nGiven this for xindice not to do the correct thing you would have to store a\ndocument with elements containing the internal xindice namespace used for query\nparameters which you shouldn't be doing.", "id": 44761, "time": "2003-09-27T06:14:36Z", "creator": "kevin@rocketred.com.au", "creation_time": "2003-09-27T06:14:36Z", "is_private": false, "attachment_id": null}]