[{"count": 0, "tags": [], "text": "Setting AuthLDAPRemoteUserIsDN causes require user to behave like require dn\nand need\nrequire user <dn1> <dn2> ...\nrather than\nrequire user <uid1> <uid2> ...\n\nI'm looking at the code, It seems mod_auth_ldap.c sets r->user = req->dn around\nline 360 and commenting it out fixes the problem.\n\nI guess, somewhere the REMOTE_USER to be passed as an environment variable is\nbeing confused with the UID provided by the remote user.\n\nCheers,\n      Duncan", "is_private": false, "id": 67536, "creator": "dbb@st-andrews.ac.uk", "time": "2004-11-29T12:24:50Z", "bug_id": 32426, "creation_time": "2004-11-29T12:24:50Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "dbb@st-andrews.ac.uk", "is_private": false, "id": 67537, "time": "2004-11-29T12:40:32Z", "bug_id": 32426, "creation_time": "2004-11-29T12:40:32Z", "tags": [], "text": "\nThis 'fix' breaks AuthLDAPRemoteUserisDN so is only useful in my case where\nusers have it set without actually needing to."}, {"count": 2, "tags": [], "text": "\nThis may be related to the fact that the require user check is being done in\nmod_auth.c even though there is require user code in mod_auth_ldap.c  Both\nutile_script.c (for setting REMOTE_USER) and mod_auth.c for checking require user\nuse the value in r->user which is set within mod_auth_ldap.  Is there possibly a\nway to get mod_auth use mod_auth_ldap for checking the required user as it does\nfor require group?", "attachment_id": null, "id": 67617, "creator": "dbb@st-andrews.ac.uk", "time": "2004-11-30T13:12:36Z", "bug_id": 32426, "creation_time": "2004-11-30T13:12:36Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 32426, "is_private": false, "text": "\nFixed in 2.1 / 2.2\n\nComments from Brad Nicholes on dev list\n\nThe short answer is that it is already fixed in Apache 2.1/2.2. \nUnfortunately you have hit on one of the limitations of the Apache 2.0\nauthentication module structure.  The problem is that authorization\ntypes are replicated through multiple authentication modules. \nFortunately this has all been taken care of in Apache 2.1/2.2.  For\nexample, in the Apache 2.1/2.2 version of mod_authnz_ldap, the\nauthorization types are no longer user, group, etc., they are ldap-user,\nldap-group, etc.  You can also mix and match different types of\nauthorization with authentication.  The quick fix for Apache 2.0 is to\nset \"AuthAuthoritative off\" so that if the mod_auth authorization fails,\nit will defer to mod_auth_ldap which will work.", "id": 67761, "time": "2004-12-02T10:27:35Z", "creator": "dbb@st-andrews.ac.uk", "creation_time": "2004-12-02T10:27:35Z", "attachment_id": null}]