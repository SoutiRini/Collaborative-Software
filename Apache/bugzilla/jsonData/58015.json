[{"count": 0, "tags": [], "creator": "jasonmcintosh@carfax.com", "attachment_id": null, "text": "tomcat.util.scan.StandardJarScanFilter.jarsToSkip\nhas the servlet-api and servlet-api* files in the list.\n\nDeploy a war where an \"idiot developer\" included \"servlet-api-2.5.jar\" in the WEB-INF/lib folder.  Try and hit a JSP page, and it fails, due to the \"The method getDispatcherType() is undefined for the type HttpServletRequest\" error.\n\nThen, rather than redeploying, stop tomcat, go into the $CATALINA_HOME/webapps/war/WEB-INF/lib/\nand remove servlet-api-2.5.jar and start tomcat\n\nYou can then hit the JSP pages.  Note, to re-verify, delete the work folder, remove the unpacked war, and try again to recreate the issue.  Off hand, it appears that the jarsToSkip SHOULD be excluding servlet-api-2.5.jar from wars loaded into it, but it doesn't appear to be behaving.  \n\nNote, this isn't related to Bug 57020 - this is entirely on the server side with a war that worked fine on Tomcat 6 & Tomcat 7.  The same war is failing on tomcat 8 with the above for JSP pages.", "id": 183405, "time": "2015-06-09T19:49:13Z", "bug_id": 58015, "creation_time": "2015-06-09T19:49:13Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "I haven't tested this (yet) but the code to prevent loading of Servlet API classes from the web app is still present.\n\njarsToSkip is completely unrelated to this feature.", "id": 183406, "time": "2015-06-09T20:07:36Z", "bug_id": 58015, "creation_time": "2015-06-09T20:07:36Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "That was fun.\n\nI found a bunch of edge case bugs in the web application class loader in this area that should all now be fixed in trunk.\n\nIt is getting late here so I'll back-port the fixes to earlier versions tomorrow.", "count": 2, "id": 183408, "time": "2015-06-09T22:43:47Z", "bug_id": 58015, "creation_time": "2015-06-09T22:43:47Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 58015, "attachment_id": null, "id": 183424, "time": "2015-06-10T08:03:02Z", "creator": "markt@apache.org", "creation_time": "2015-06-10T08:03:02Z", "is_private": false, "text": "I've back-ported the various edge cases fixes as well as the specific fix for this bug. It will be included 8.0.24 onwards."}]