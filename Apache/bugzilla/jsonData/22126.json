[{"count": 0, "tags": [], "text": "Using MySQL connector-J instead of mm.mysql jdbc driver.\nIf the database \"goes away\" DBCP throws an exception (below) and fails to\nauthenticate, at the second attempt a new connection is established and\nauthentication succeeds.\n\nI've noticed that Connector J exhibits at least two radically different\nbehaviours that the old mm.mysql driver, throwing this exception is one of them.\n\nIf the tomcat code calls Connection.isClosed() connector J doesn't ping the\nserver, mm.mysql did.\n\nException performing authentication\njava.sql.SQLException: Communication link failure: java.io.IOException\n        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:1675)\n        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1083)\n        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1142)\n        at com.mysql.jdbc.Connection.execSQL(Connection.java:1876)\n        at\ncom.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1590)\n        at\ncom.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1463)\n        at org.apache.catalina.realm.JDBCRealm.authenticate(JDBCRealm.java:445)", "attachment_id": null, "bug_id": 22126, "id": 42134, "time": "2003-08-05T09:31:19Z", "creator": "danny@apache.org", "creation_time": "2003-08-05T09:31:19Z", "is_private": false}, {"count": 1, "tags": [], "creator": "funkman@joedog.org", "is_private": false, "id": 43294, "attachment_id": null, "bug_id": 22126, "creation_time": "2003-08-26T01:08:33Z", "time": "2003-08-26T01:08:33Z", "text": "\n\n*** This bug has been marked as a duplicate of 11929 ***"}]