[{"count": 0, "tags": [], "bug_id": 60928, "attachment_id": null, "text": "Doing a load test with embedded resources I faced the following issue:\n\n    I have a GET (https://www.foo.com/fragment/ajax/get/identifier/dynamic/) that returns JSON with wrong Content Type (text/html instead of json)\n    HTML Parser parses the response that contains escaped html inside JSON so it succeeds extracting links and builds 2 links:\n        https://www.foo.com/fragment/ajax/get/identifier/dynamic/%5C%22https:%5C/%5C/www.foo.com%5C/mediap%5C/62%5C/6%5C/3%5C/a%5C/9%5C/10110954_fo_01_web.jpg%5C%22\n        https://www.foo.com/fragment/ajax/get/identifier/dynamic/%5C%22https:%5C/%5C/www.foo.com%5C/mediap%5C/62%5C/c%5C/4%5C/9%5C/d%5C/10361071_fo_01_web.jpg%5C%22\n    Response to this new request will return the same response so we end up being recursive\n\nNow here is the problem:\n\n    For some recursive processing I end up having this which seems ok:\n        java.lang.Exception: Maximum frame/iframe nesting depth exceeded.\n    But for some of the requests I end up having :\n        Response message: Non HTTP response message: Timeout waiting for connection from pool\n        Meaning the Http4 pool has reached the max number of connections, its size is set to the value of \"Parallel downloads. Number\" which is 6\n\n\nI have another case, where I have 1 page that returns 1 html page with many links.\nThe 10th link download also fails with \"Timeout waiting for connection from pool\".", "id": 198038, "time": "2017-03-28T10:11:18Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-03-28T10:11:18Z", "is_private": false}, {"count": 1, "tags": [], "text": "Author: pmouawad\nDate: Tue Mar 28 10:14:49 2017\nNew Revision: 1789082\n\nURL: http://svn.apache.org/viewvc?rev=1789082&view=rev\nLog:\nBug 60928 - Http Request : Connection Leak when keepalive is used with Embedded Resources\nBugzilla Id: 60928\n\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java\n    jmeter/trunk/xdocs/changes.xml", "is_private": false, "bug_id": 60928, "id": 198039, "time": "2017-03-28T10:15:15Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-03-28T10:15:15Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 198043, "time": "2017-03-28T11:30:44Z", "bug_id": 60928, "creation_time": "2017-03-28T11:30:44Z", "is_private": false, "text": "Author: pmouawad\nDate: Tue Mar 28 11:30:13 2017\nNew Revision: 1789097\n\nURL: http://svn.apache.org/viewvc?rev=1789097&view=rev\nLog:\nFix code smell\n\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java"}]