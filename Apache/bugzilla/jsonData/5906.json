[{"count": 0, "tags": [], "creator": "eschalburg@venetica.com", "attachment_id": null, "id": 9707, "time": "2002-01-17T10:36:25Z", "bug_id": 5906, "creation_time": "2002-01-17T10:36:25Z", "is_private": false, "text": "If you try to pass an argument as follows:\n\n<arg line=\"&quot;&quote;\"/>\n\nwhitespace will be passed instead.  I wrote a simple java class that does \nnothing other than echo the number of arguments passed into main.  I then made \na build.xml with the following task in it:\n\n<java classname=\"test.EchoArgNumber\">\n   <classpath refid=\"classpath\" />\n   <arg line=\"This is a valid argument\" />\n   <arg line=\"&quote;&quote;\" />\n</java>\n\nExecuting this task results in a output of 5 for the number of arguments (the \nnumber of words in the first arg line).  It should be six if double quotes were \npassed.  I have my test case zipped up if; anyone needs it just email me."}, {"attachment_id": 1026, "tags": [], "creator": "eschalburg@venetica.com", "is_private": false, "count": 1, "id": 9708, "time": "2002-01-17T10:48:45Z", "bug_id": 5906, "creation_time": "2002-01-17T10:48:45Z", "text": "Created attachment 1026\nSimple example to demonstrate the problem"}, {"count": 2, "tags": [], "bug_id": 5906, "attachment_id": null, "id": 10150, "time": "2002-02-01T03:46:24Z", "creator": "umagesh@apache.org", "creation_time": "2002-02-01T03:46:24Z", "is_private": false, "text": "The 'problem' lies in Commandline.java.  The method translateCommandline does\nsome checks which need to go away.  I feel these checks are misplaced.\n\nif (current.length() != 0) {  //REMOVE\n    v.addElement(current.toString());\n} //REMOVE\n\nif (state == inQuote || state == inDoubleQuote) { //REMOVE\n    throw new BuildException(\"unbalanced quotes in \" + to_process);//REMOVE\n}//REMOVE\n\nRemoving this will affect testcases which check to see if single quotes are\nended properly, etc.  So, I wish to get inputs on why this check is being made \n*here*, before I go fixing it.\n\nI also noticed that the exact same code for translateCommandLine is repeated\nin FileUtils.java.  Why?  Can't we make one call the other?  I know you cannot\ndo away with the method completely because it is a public API....\n\nCheers,\nMagesh\n"}, {"count": 3, "tags": [], "bug_id": 5906, "attachment_id": null, "id": 10238, "time": "2002-02-02T18:43:03Z", "creator": "umagesh@apache.org", "creation_time": "2002-02-02T18:43:03Z", "is_private": false, "text": "*** Bug 622 has been marked as a duplicate of this bug. ***"}, {"count": 4, "tags": [], "bug_id": 5906, "is_private": false, "text": "> I also noticed that the exact same code for translateCommandLine is repeated\n> in FileUtils.java.  Why?  \n\nAargh!  I confused the main tree with myrmidon in which this method has been\nmoved to FileUtils.  Sorry!  The main tree has only one translatecommandline \nmethod and that is in commandline.java\n", "id": 10481, "time": "2002-02-08T02:05:32Z", "creator": "umagesh@apache.org", "creation_time": "2002-02-08T02:05:32Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 17597, "time": "2002-06-11T15:01:09Z", "bug_id": 5906, "creation_time": "2002-06-11T15:01:09Z", "is_private": false, "text": "If you change the second <arg> to read <arg value=\"&quot;&quot;\" /> you get 6.\nSame is true for <arg value=\"\" />, which probably is what Erik wants.\n\nThe code you are talking about is there to perform command line parsing in a way\nsimilar to the shell - it has been written by a person with a very Unix-centric\nworld-view (and several artifacts like the special treatment of backslashes had\nto be pulled already).\n\nI think the check for balanced quotes is perfectly valid here, if you need a\nquote, you'd use something like &quot;&apos;&quot; in the line case or simply\nuse the value attribute which is the recommended way.\n\nWhat remains is that this code simply drops the empty string between quotes\nthat immediately follow each other - I'll put it on my TODO list but recommend\nto avoid the line attribute whereever it is possible.\n"}, {"count": 6, "tags": [], "text": "I forgot to say why simply removing current.length() != 0 condition won't work.\n\n<arg line=\"a  b\" />\n\nwould lead to three arguments that way: a, empty string, b which is very different\nfrom what a Unix shell does (dunno about Windows).", "is_private": false, "id": 17598, "creator": "bodewig@apache.org", "time": "2002-06-11T15:02:51Z", "bug_id": 5906, "creation_time": "2002-06-11T15:02:51Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "count": 7, "id": 20831, "time": "2002-08-09T08:50:25Z", "bug_id": 5906, "creation_time": "2002-08-09T08:50:25Z", "text": "Fixed the special case of \"\" and documented that <arg line> should be avoided.\n\nFixed in CVS HEAD as well as the 1.5 branch, which means it will be fixed in\n1.5.1 and 1.6."}, {"count": 8, "tags": [], "text": "*** Bug 8359 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 20833, "creator": "bodewig@apache.org", "time": "2002-08-09T08:54:22Z", "bug_id": 5906, "creation_time": "2002-08-09T08:54:22Z", "attachment_id": null}]