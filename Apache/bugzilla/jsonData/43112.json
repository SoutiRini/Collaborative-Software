[{"count": 0, "tags": [], "bug_id": 43112, "attachment_id": null, "is_private": false, "id": 106705, "time": "2007-08-13T10:19:02Z", "creator": "rfrovarp@apache.org", "creation_time": "2007-08-13T10:19:02Z", "text": "I have no idea what effect these errors are having on production systems. I am\nalso not sure how to fix the bugs, which is why I'm posting here.\n\nsrc/modules/sitetree/java/src/org/apache/lenya/cms/cocoon/transformation/DocumentIndexTransformer.java\nIn setup(), envelope is set to null, never changed, and then referenced. This\nshould throw a NPE every time.\n\nsrc/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/TreeSiteManager.java\nIn add() node is set to a value under the 2nd if, but never used. The if under\nthe following else perhaps needs to be moved out from the else.\n\nsrc/modules/sitetree/java/src/org/apache/lenya/cms/site/tree2/TreeSiteManager.java\nIn copy() destNode is set, checked, and reset, but never used."}, {"count": 1, "tags": [], "creator": "nettings@apache.org", "text": "(In reply to comment #0)\ni'm not familiar with this code, but anyways...\n\n>src/modules/sitetree/java/src/org/apache/lenya/cms/cocoon/transformation/DocumentIndexTransformer.java\n> In setup(), envelope is set to null, never changed, and then referenced. This\n> should throw a NPE every time.\n\nlooks like dead code to me. grep -ri \"transform.*index\" coughs up just one match\n- the original component declaration in the global sitemap. unless i'm\noverlooking something, this is unused. can anyone confirm this? if so, let's\nchuck it out.\n\n>src/modules/sitetree/java/src/org/apache/lenya/cms/site/tree/TreeSiteManager.java\n> In add() node is set to a value under the 2nd if, but never used. The if under\n> the following else perhaps needs to be moved out from the else.\n\nno idea. but the node assignment is probably there for its side effects in \"tree\".\n\nsrc/modules/sitetree/java/src/org/apache/lenya/cms/site/tree2/TreeSiteManager.java\n> In copy() destNode is set, checked, and reset, but never used.\n\nyuck. \"tree\", \"tree2\" - some people really hate programming, it seems. again,\nthe assignment seems to be there for its side effects.\n\nthis module makes me wonder why a simple site tree needs to be rocket science...\ni guess i'll leave the maintenance to the rocket scientists :(\n", "id": 106714, "time": "2007-08-13T13:05:14Z", "bug_id": 43112, "creation_time": "2007-08-13T13:05:14Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 43112, "is_private": false, "text": "First one does look like dead code. I see your point on the other two. However,\nwouldn't it just be cleaner to not store the return result? They are dead\nstores, which is confusing to me. We have the problem at two other locations in\nour code as well. Those other two locations are getters and should have no side\neffects and are probably errors. ", "id": 106758, "time": "2007-08-14T09:10:43Z", "creator": "rfrovarp@apache.org", "creation_time": "2007-08-14T09:10:43Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "rfrovarp@apache.org", "attachment_id": null, "id": 109669, "time": "2007-10-23T12:44:43Z", "bug_id": 43112, "creation_time": "2007-10-23T12:44:43Z", "is_private": false, "text": "Removed dead code (r587622), added comments for confusing code (r587614)"}]