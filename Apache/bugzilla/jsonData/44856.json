[{"count": 0, "attachment_id": null, "creator": "andrew@site9.net", "is_private": false, "id": 115779, "time": "2008-04-22T13:07:41Z", "bug_id": 44856, "creation_time": "2008-04-22T13:07:41Z", "tags": [], "text": "Part of the problem is that Mapper.java will not properly update aliases for a Host that already exists.  Potential fix in Mapper.java: (Note -- code originally posted by Luke Kirby, inelegantly re-written)\n\n    public synchronized void addHost(String name, String[] aliases,\n                                     Object host) {\n        Host[] newHosts = new Host[hosts.length + 1];\n        Host newHost = new Host();\n        ContextList contextList = new ContextList();\n        newHost.name = name;\n        newHost.contextList = contextList;\n        newHost.object = host;\n        if (insertMap(hosts, newHosts, newHost)) {\n            hosts = newHosts;\n        \n        for (int i = 0; i < aliases.length; i++) {\n            newHosts = new Host[hosts.length + 1];\n            newHost = new Host();\n            newHost.name = aliases[i];\n            newHost.contextList = contextList;\n            newHost.object = host;\n            if (insertMap(hosts, newHosts, newHost)) {\n                hosts = newHosts;\n            }\n        }\n        }\n        else {\n        \tHost aliasedHost;\n        \t// insert failed because the host already exists; grab it\n        \tint hostPos = find(hosts, name);\n        \tif (hostPos >= 0) {\n        \t\taliasedHost = hosts[hostPos];\n                for (int i = 0; i < aliases.length; i++) {\n                    newHosts = new Host[hosts.length + 1];\n                    newHost = new Host();\n                    newHost.name = aliases[i];\n                    newHost.contextList = aliasedHost.contextList;\n                    newHost.object = aliasedHost.object;\n                    if (insertMap(hosts, newHosts, newHost)) {\n                        hosts = newHosts;\n                    }\n                }\n        \t} else {\n        \t\t// I can't imagine why this would happen..\n        \t\tSystem.out.println(\"huh?\");\n        \t}\n\n        }\n    }"}, {"count": 1, "tags": [], "text": "I'll add a note to 42707 to port the fix to TC5.\n\n*** This bug has been marked as a duplicate of bug 42707 ***", "is_private": false, "bug_id": 44856, "id": 115823, "time": "2008-04-23T14:56:22Z", "creator": "markt@apache.org", "creation_time": "2008-04-23T14:56:22Z", "attachment_id": null}]