[{"count": 0, "tags": [], "text": "Tag URL is buggy for context \"/\".\n\n<c:url context=\"/\" value=\"/something.jsp\"/>\nproduce\n\"//something.jsp\"\nthis is interpreted by browser (Galleion 1.3.5) as host name, not as absolute path .\n\nCorrect result is \"/something.jsp\"", "is_private": false, "bug_id": 22860, "id": 43554, "time": "2003-09-01T14:36:05Z", "creator": "sochor@ksvi.mff.cuni.cz", "creation_time": "2003-09-01T14:36:05Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 22860, "is_private": false, "id": 43991, "time": "2003-09-10T20:33:41Z", "creator": "pierre.delisle@sun.com", "creation_time": "2003-09-10T20:33:41Z", "tags": [], "text": "Hummm,\nThe 'context' attribute is to be used to specify\na *foreign* context.\n\nFrom the spec:\n  Name of the context when specifying a relative URL\n  resource that belongs to a foreign context.\n\nSpecifying '/' does not represent a valid foreign context,\nand therefore leads to the problem you're having.\n\nIf a resource belongs to the current context, attribute\ncontext should not be used."}, {"count": 2, "tags": [], "bug_id": 22860, "text": "I hope that '/' is valid foreign context, if context-root element in\napplication.xml is '/'.\nFor example, this is my application.xml:\n<application>\n  <module>\n    <web>\n\t<web-uri>hyperion-frontend.war</web-uri>\n\t<context-root>/</context-root>\n    </web>\n  </module>\n    <web>\n\t<web-uri>hyperion-backend.war</web-uri>\n\t<context-root>hyperion-admin</context-root>\n    </web>\n  </module>\n</application>\n\nI need generate link from backend application to frontend application.\nApplications have diferent contex, attribute 'context' of tag 'c:url' must be\nsupplied\nThere is some.jsp in hyperion-backand.war with this tag:\n<c:url var=\"frontendLinkURL\" value=\"/main.jsp\" context=\"/\"/>\nIt generate <a href=\"//main.jsp\"/> :-(\n\nIt's bad result, because many browsers interpret this as host name, not\nas absolute path at same host. Correct result is <a href=\"/main.jsp\"/>\n\nThere is my patch:\n\nIndex: UrlSupport.java\n===================================================================\nRCS file:\n/home/cvspublic/jakarta-taglibs/standard/src/org/apache/taglibs/standard/tag/common/core/UrlSupport.java,v\nretrieving revision 1.6\ndiff -u -r1.6 UrlSupport.java\n--- UrlSupport.java     4 Aug 2003 17:44:37 -0000       1.6\n+++ UrlSupport.java     2 Sep 2003 13:51:17 -0000\n@@ -189,7 +189,12 @@\n             if (!context.startsWith(\"/\") || !url.startsWith(\"/\"))\n                 throw new JspTagException(\n                     Resources.getMessage(\"IMPORT_BAD_RELATIVE\"));\n-            return (context + url);\n+            if (context.equals(\"/\")) {\n+               // don't produce string starting with \"//\", many\nbrowsers\ninterpreting this url as host name, not as absolute path on same host\n+                               return url;\n+            } else {\n+                               return (context + url);\n+            }\n         }\n     }\n\n", "id": 44268, "time": "2003-09-17T12:17:50Z", "creator": "sochor@ksvi.mff.cuni.cz", "creation_time": "2003-09-17T12:17:50Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 22860, "text": "My bad, apologies... Just committed the fix for JSTL 1.1.\nThanks for the bug report Cyril.", "id": 49035, "time": "2003-12-12T23:39:06Z", "creator": "pierre.delisle@sun.com", "creation_time": "2003-12-12T23:39:06Z", "is_private": false, "attachment_id": null}]