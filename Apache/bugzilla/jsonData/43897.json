[{"count": 0, "text": "Using Apache 2.2.6 with mod_proxy, mod_proxy_balancer enabled to load balance \nhttp requests I observe huge memory consumption of http.exe child process. \nChanging config parameters has no effect. Memory is constantly growing after \nserving new requests. Memory grows to 1.5GB and more on Windows 2003 SP2 \nServer. This behaviour is not acceptable in production environment of our \ncustomer.\n\nDo you have workaroud, patch,..?\n\nSimon", "bug_id": 43897, "is_private": false, "id": 110695, "time": "2007-11-18T23:26:05Z", "creator": "simon.drnovsek@infotehna.si", "creation_time": "2007-11-18T23:26:05Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 43897, "text": "Does the huge memory growth occur only if balancer is used?\n", "id": 110705, "time": "2007-11-19T04:09:31Z", "creator": "trawick@apache.org", "creation_time": "2007-11-19T04:09:31Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 43897, "text": "After removing balancer configuration (parameters and modules), memory \nconsumption is ok.", "id": 110715, "time": "2007-11-19T05:09:24Z", "creator": "simon.drnovsek@infotehna.si", "creation_time": "2007-11-19T05:09:24Z", "is_private": false, "attachment_id": null}, {"count": 3, "text": "If you are eager to re-enable the balancer, try this fix (which will be in\n2.2.7) with balancer:\n\nhttp://svn.apache.org/viewvc/httpd/httpd/branches/2.2.x/modules/proxy/proxy_util.c?r1=576910&r2=582620&diff_format=h\n\nThat fixes keepalive for backend connections.  I think the management of the\nmemory for backend connections is broken -- no way to recycle the memory when\neventually the backend connection dies.  Without keepalive working, memory usage\ngrows at a fantastic rate.  You'll probably still need \"MaxRequestsPerChild\nhigh-number\" to keep it from growing high enough to hurt.\n", "bug_id": 43897, "is_private": false, "id": 111216, "time": "2007-11-28T12:52:20Z", "creator": "trawick@apache.org", "creation_time": "2007-11-28T12:52:20Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 43897, "text": "I wonder if PR 11427 doesn't also interact with this case (specific to win32)?", "id": 112108, "attachment_id": null, "creator": "wrowe@apache.org", "creation_time": "2007-12-22T13:02:53Z", "time": "2007-12-22T13:02:53Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "rpluem@apache.org", "is_private": false, "count": 5, "id": 112118, "time": "2007-12-22T13:44:47Z", "bug_id": 43897, "creation_time": "2007-12-22T13:44:47Z", "text": "Maybe PR44026 is another similar case. It has a patch attached. Does this patch\nhelp?"}, {"count": 6, "tags": [], "bug_id": 43897, "text": "I had a similar problem with 2.2.6, using reverse proxy with persistent connections on windows. I traced it to:\n\nap_proxy_connect_backend(...)\n        if (!(connected = is_socket_connected(conn->sock))) {\n             apr_socket_close(conn->sock);\n                .....\n\n\nis_socket_connected() returns 0 on the 'connected/persistent' socket (problem 1)\n\nThe sequence that then 'reopens' the socket doesn't clear the memory pool in  proxy_conn_rec so memory assigned (from the apr_socket_create) to the pool just accumulates (about 16k/req) until it gets an error (problem 2). \n", "id": 115270, "time": "2008-04-02T16:53:24Z", "creator": "rstilmar@novell.com", "creation_time": "2008-04-02T16:53:24Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 43897, "text": "Please try if the following patch fixes your problem:\nhttp://people.apache.org/~jim/patches/proxy-ssl-44026-patch.txt", "id": 115274, "time": "2008-04-02T23:00:23Z", "creator": "rpluem@apache.org", "creation_time": "2008-04-02T23:00:23Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 43897, "text": "httpd 2.2.x is now EOL and this task has not been updated in years, closing. Please re-open if you encounter the same issue with 2.4.x\n\nThanks!", "id": 202251, "attachment_id": null, "creator": "toscano.luca@gmail.com", "creation_time": "2017-11-19T10:05:29Z", "time": "2017-11-19T10:05:29Z", "is_private": false}]