[{"attachment_id": null, "tags": [], "bug_id": 2808, "text": "Using fop-0.18.1-DEV on SuSE Linux 6.4 (kernel 2.2.14 SMP)\nWhen the rotate() function appears in a single transform() along with a\ntranslate(), the rotate function is executed twice.  First, the figure is\nrotated, then after translation, the rotation is performed again.\nAttached is an fo file which exhibits the bug reliably on my machine.\nIn the resulting pdf file, one figure is incorrectly offset from the Y axis\n(i.e. rotated -15deg about the origin) because the  rotation was applied a\nsecond time to the figure.\n\n************************************* i.fo ****************************\n\n<?xml version=\"1.0\"?>\n \n<!--*****************************************\n    **************** i.fo ******************\n    *****************************************-->\n \n    <fo:root\n        xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n        xmlns:svg=\"http://www.w3.org/2000/svg\"\n        >\n        <fo:layout-master-set>\n            <fo:simple-page-master      master-name=\"Images\"\n                page-width=\"610pt\"    page-height=\"792pt\"\n                margin-left=\"70pt\"      margin-top=\"54pt\"\n                margin-right=\"40pt\"  margin-bottom=\"38pt\"\n                orphans=\"3\"        widows=\"3\"\n                >\n                <fo:region-body\n                    margin-left=\"70pt\"      margin-top=\"54pt\"\n                    margin-right=\"40pt\"  margin-bottom=\"38pt\"\n                    />\n                </fo:simple-page-master>\n            </fo:layout-master-set>\n        <fo:page-sequence master-name=\"Images\">\n            <fo:flow   flow-name=\"xsl-region-body\">\n \n                <fo:block\n                    keep-together.within-page=\"always\"\n                    background-color=\"white\"\n                    vertical-align=\"middle\"\n                    text-align=\"center\"\n                    border-style=\"none\"\n                    border-width=\"1px\"\n                    border-color=\"black\"\n                    > \n                    <fo:instream-foreign-object>\n        <svg:svg  width=\"465pt\" height=\"600pt\" viewBox=\"0 0 465 600\">\n        <svg:defs>\n            <svg:g id=\"siteMaster\" width=\"104pt\" height=\"77pt\" viewBox=\"0 0 104\n77\">\n                <svg:rect  style=\"stroke:black; stroke-width:2; fill:white\"\nx=\"0\" y=\"0\" width=\"104\" height=\"77\"/>\n                <svg:g transform=\"translate(5,60)\">\n                    <svg:polygon  style=\"stroke:red; stroke-width:0.5; fill:red\"\npoints=\" 10,10   8.5,5  11.5,5 \"\n                    <svg:text style=\"font-size:3pt\" x=\"9.0\"\ny=\"13.5\">N</svg:text>\n                    </svg:g>\n                <svg:g  style=\"stroke:gray; stroke-width:0.5; fill:gray\">\n                    <svg:rect x=\"27\" y=\"26.5\" width=\"15\" height=\"35\"/>\n                    <svg:rect x=\"42\" y=\"36.5\" width=\"30\" height=\"20\"/>\n                    <svg:rect x=\"42\" y=\"33.5\" width=\"10\" height=\"3\"/>\n                    <svg:rect x=\"72\" y=\"40.5\" width=\"13\" height=\"16\"/>\n                    <svg:rect x=\"85\" y=\"40.5\" width=\"14.25\" height=\"23\"/>\n                    </svg:g>\n                <svg:g  style=\"stroke:black; stroke-width:0.5; fill:lightGray\">\n                    <svg:polyline  style=\"stroke:black; stroke-width:0.5;\nfill:none; \" points=\" 43.5,20   44.5,20\n                    <svg:rect x=\"95\" y=\"25.5\" width=\"8\" height=\"10\"/>\n                    <svg:rect x=\"88\" y=\"4\" width=\"14\" height=\"12\"/>\n                    </svg:g>\n                </svg:g>\n            <svg:use id=\"tf1\" xlink:href=\"#siteMaster\" transform=\"rotate(-15) \"\n/>\n            <svg:use id=\"tf2\" xlink:href=\"#tf1\" transform=\"scale(3) \" />\n            <svg:use id=\"tfA\" xlink:href=\"#tf2\" transform=\"translate(0,150)\" />\n            <svg:use id=\"tfB\" xlink:href=\"#siteMaster\" transform=\"rotate(-15)\nscale(3) translate(0,150)\" />\n \n            <svg:line id=\"yaxis\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"600\"\nstyle=\"stroke:black; stroke-width:1\" />\n            </svg:defs>\n \n        <svg:use xlink:href=\"#yaxis\" />\n        <svg:use xlink:href=\"#yaxis\" transform=\"rotate(-15)\" />\n        <svg:use xlink:href=\"#tfA\" />\n        <svg:use xlink:href=\"#tfB\" />\n \n        </svg:svg>\n                        </fo:instream-foreign-object>\n                    </fo:block>\n \n                </fo:flow>\n            </fo:page-sequence>\n \n        </fo:root>       \n************************** @EoF ***********\n\n\n************************* i.fo follows ******************", "count": 0, "id": 4021, "time": "2001-07-25T15:53:44Z", "creator": "marvw@best.com", "creation_time": "2001-07-25T15:53:44Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 2808, "attachment_id": null, "text": "This should be fixed in the current version.\nI get the same results from batik and fop for the svg rendering.", "id": 4432, "time": "2001-08-10T00:40:17Z", "creator": "keiron@aftexsw.com", "creation_time": "2001-08-10T00:40:17Z", "is_private": false}, {"count": 2, "tags": [], "creator": "j3322ptm@yahoo.de", "text": "An interesting point is that the testcase works without a definition of the\nxlink prefix.", "id": 15540, "time": "2002-05-06T13:26:45Z", "bug_id": 2808, "creation_time": "2002-05-06T13:26:45Z", "is_private": false, "attachment_id": null}]