[{"count": 0, "tags": [], "text": "With a WebDAV client when I use ACL method mod_proxy_ajp says to me :\n\n[Wed Dec 06 10:49:47 2006] [error] ajp_marshal_into_msgb - No such method ACL\n[Wed Dec 06 10:49:47 2006] [error] ajp_send_header: ajp_marshal_into_msgb failed\n[Wed Dec 06 10:49:47 2006] [error] (120010)APR does not understand this error\ncode: proxy: AJP: request failed to 129.20.999.999:9596 (host.domain.fr)\n\nThanks\n\nFYI: I correct this with a patch on ajp_header.c :\n\n--- ajp_header.c.ori\t2006-12-06 10:54:59.000000000 +0100\n+++ ajp_header.c\t2006-12-06 11:14:04.000000000 +0100\n@@ -159,7 +159,7 @@\n     SC_M_MKACTIVITY,\n     SC_M_BASELINE_CONTROL,\n     SC_M_MERGE,\n-    0                       /* M_INVALID */\n+    SC_M_ACL\n };\n \n static int sc_for_req_method_by_id(int method_id)", "attachment_id": null, "bug_id": 41114, "id": 96557, "time": "2006-12-06T03:51:24Z", "creator": "raymond.bourges@univ-rennes1.fr", "creation_time": "2006-12-06T03:51:24Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 41114, "is_private": false, "count": 1, "id": 116347, "time": "2008-05-07T09:52:54Z", "creator": "eiki@idega.com", "creation_time": "2008-05-07T09:52:54Z", "text": "This is still a problem in apache 2.2.8 !\n\nAlso missing is webdav SEARCH so basic webdav is broken.\n\nbest regards\nEirikur Hrafnsson\nChief Software Engineer \nIdega Software"}, {"count": 2, "tags": [], "creator": "eiki@idega.com", "attachment_id": null, "id": 116353, "time": "2008-05-07T12:16:08Z", "bug_id": 41114, "creation_time": "2008-05-07T12:16:08Z", "is_private": false, "text": "We found out why SEARCH method does not work and know how to fix it for now.\n\nThe problem is that M_INVALID that is used to limit which methods are allowed is defined in httpd.h and has the value 26, SEARCH HTTP METHOD gives the value 28 into the method sc_for_req_method_by_id(..) so it won't work. Comparing method_id to positions in an array is at best dubious coding. mod_jk uses some other way to do this and mod_dav obviously since they do work.\n\nThe fix:\nEdit ajp_header.c under modules/proxy\n\nline 161 in Apache 2.2.8\nfind:\n     SC_M_MKACTIVITY,\n     SC_M_BASELINE_CONTROL,\n     SC_M_MERGE,\n     0                       /* M_INVALID */\n\nremove that last 0 /* M_INVALID */ line\nand add instead:\n    SC_M_ACL,\n    0,\n    SC_M_SEARCH /* needs to be the 28 in the array...*/\n\nand in the method:\nstatic int sc_for_req_method_by_id(request_rec *r)\n\nchange:\n if (method_id < 0 || method_id > M_INVALID) {\n\nto:\n    if (method_id < 0 || method_id > 28) {\n\nWhere 28 is the size of the methods array we just added to in the beginning.\n\nThen compile apache again using for example:\n> ./configure --prefix=/usr/local/apache2 --enable-mods-shared=\"all proxy proxy-ajp proxy-balancer filter deflate expires ssl rewrite mime-magic mem-cache info disk-cache dav dav-fs dav-lock\" --with-mpm=worker \n> make \n> make install\n\n\nCheers\nEirikur S. Hrafnsson and Pall Helgason\nIdega Software\nhttp://www.idega.com\n\n"}, {"count": 3, "tags": [], "creator": "jstaka@gmail.com", "text": "Created attachment 23567\npatch against 2.2.11\n\nI think this is still a problem in apache 2.2.11.\nThis patch assigns a id to ACL method.\n\nthanks.", "id": 126663, "time": "2009-04-30T22:49:52Z", "bug_id": 41114, "creation_time": "2009-04-30T22:49:52Z", "is_private": false, "attachment_id": 23567}, {"count": 4, "tags": [], "bug_id": 41114, "text": "6 years passed, but this bug is still relevant, even with 2.2.22.\n\nIt forces us to use mod_jk to access apache jackrabbit based webDAV, due invalid  ACL and SEARCH method handling.\n\nGregory", "id": 158164, "time": "2012-04-18T09:58:50Z", "creator": "gturski@gmail.com", "creation_time": "2012-04-18T09:58:50Z", "is_private": false, "attachment_id": null}, {"id": 158189, "tags": [], "bug_id": 41114, "is_private": false, "count": 5, "text": "Same thing here ! bug is still present.\n\nWe now use mod_proxy_http", "time": "2012-04-19T08:06:41Z", "creator": "raymond.bourges@univ-rennes1.fr", "creation_time": "2012-04-19T08:06:41Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "The patches in this PR are unfortunately not correct:\n\nSEARCH is registered using ap_method_register() by mod_dav. This means the actual number assigned to SEARCH depends on the module loading order. Adding SEARCH and ACL to httpd itself is a good idea, but in stable releases like 2.2.x and 2.4.x, the M_INVALID number must not change.", "attachment_id": null, "bug_id": 41114, "id": 158223, "time": "2012-04-20T12:06:42Z", "creator": "sf@sfritsch.de", "creation_time": "2012-04-20T12:06:42Z", "is_private": false}]