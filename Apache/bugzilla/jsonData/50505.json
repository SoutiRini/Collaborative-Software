[{"count": 0, "tags": [], "bug_id": 50505, "attachment_id": null, "id": 142881, "time": "2010-12-21T04:57:31Z", "creator": "knight@nhn.com", "creation_time": "2010-12-21T04:57:31Z", "is_private": false, "text": "My Service used CometProcessor, using tomcat 6.0.29 server.\n505 HTTP Version Not Supported error happened.\nSo, I changed to tomcat 6.0.20 server instead of 6.0.29. There is no error. \n\nI did not change any configuration and just changed tomcat server.\n\nin server.xml\n\n    <Connector acceptorThreadCount=\"4\" socket.tcpNoDelay=\"true\" connectionTimeout=\"20000\"\n     port=\"10129\" maxThreads=\"512\" backlog=\"1000\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n     useComet=\"true\" redirectPort=\"8443\" />\n\n\nI saw the HTTP11NioProtocol source(java\\org\\apache\\coyote\\http11\\Http11NioProtocol.java) and found difference of Http11NioProtocol.java between tomcat 6.0.20 and 6.0.29. \n\nin Http11NioProtocol.java\n\npublic SocketState process(NioChannel socket) {\n..\n if (processor.comet) {\n                        NioEndpoint.KeyAttachment att = (NioEndpoint.KeyAttachment)socket.getAttachment(false);\n                        socket.getPoller().add(socket,att.getCometOps());\n                    } else {\n                    \trelease(socket);  <== 6.0.29 added \n                        socket.getPoller().add(socket);\n                    }\n..\n}\n\nis it possible to 505 error when releasing socket???"}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of bug 50072 ***", "count": 1, "id": 143076, "time": "2011-01-04T18:05:36Z", "bug_id": 50505, "creation_time": "2011-01-04T18:05:36Z", "is_private": false}]