[{"count": 0, "tags": [], "bug_id": 56944, "attachment_id": 31985, "id": 177705, "time": "2014-09-10T18:38:25Z", "creator": "tc+asf@travislists.com", "creation_time": "2014-09-10T18:38:25Z", "is_private": false, "text": "Created attachment 31985\nPrevent endless loop on pool cleanup\n\nGreetings,\n\nThe attached patch, which applies cleanly to APR HEAD, addresses an issue we experienced in using APR with the FreeSWITCH project.  We've been running this patch in FreeSWITCH's version of APR for years and would like to see it included upstream if possible.  Please let us know your thoughts and if any changes are appropriate we'll be happy to make them and propose a revised patch.\n\nThe patch series being proposed here is also available on the master branch of this repository:\n\n  https://github.com/traviscross/apr/\n\nAuthor: Anthony Minessale <anthm@freeswitch.org>\nDate:   Thu Mar 13 04:01:01 2014 +0500\n\n    Prevent endless loop on pool cleanup\n    \n    When APR_POOL_DEBUG is set, we check up to three levels deep for a\n    kind of corruption of the cleanup lists where a node is duplicated\n    causing an endless loop and abort.\n    \n    If we hit this class of corruption when not debugging, however, we'd\n    prefer to just ignore it in preference to looping infinitely or\n    aborting.\n    \n    With this change, we check for immediate duplicates and simply stop\n    processing the cleanup list at that point potentially leaking\n    resources.\n    \n    Signed-off-by: Anthony Minessale <anthm@freeswitch.org>\n    Signed-off-by: Travis Cross <tc@traviscross.com>"}]