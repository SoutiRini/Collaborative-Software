[{"count": 0, "tags": [], "creator": "schnake.michael@t-online.de", "attachment_id": null, "id": 131622, "time": "2009-11-03T07:09:58Z", "bug_id": 48112, "creation_time": "2009-11-03T07:09:58Z", "is_private": false, "text": "On tomcat 6.0.20 something like the following line in a JSP causes a exception:\n\n<c:out value=\"${fn:trim('{world}')}\"/>\n\nAfter removing the closing curly brace from the literal ('{world}' -> '{world') the JSP works. This behaviour seems specific to 6.0.20, as on 6.0.18 and 6.0.16 the line above works fine.\n\nExample of exception:\n=====================\norg.apache.jasper.JasperException: An exception occurred processing JSP page /test.jsp at line 11\n\n8: <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n9: </head>\n10: <body>\n11: <c:out value=\"${fn:trim('{world}')}\"/>\n12: </body>\n13: </html>\n\n\nStacktrace:\n\torg.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:505)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:416)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nroot cause\n\njavax.el.ELException: Error Parsing: ${fn:trim('{world}\n\torg.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:125)\n\torg.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:150)\n\torg.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:194)\n\torg.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:68)\n\torg.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:934)\n\torg.apache.jsp.test_jsp._jspx_meth_c_005fout_005f0(test_jsp.java:98)\n\torg.apache.jsp.test_jsp._jspService(test_jsp.java:72)\n\torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nroot cause\n\norg.apache.el.parser.ParseException: Encountered \" <ILLEGAL_CHARACTER> \"\\' \"\" at line 1, column 11.\nWas expecting one of:\n    <INTEGER_LITERAL> ...\n    <FLOATING_POINT_LITERAL> ...\n    <STRING_LITERAL> ...\n    \"true\" ...\n    \"false\" ...\n    \"null\" ...\n    \"(\" ...\n    \")\" ...\n    \"!\" ...\n    \"not\" ...\n    \"empty\" ...\n    \"-\" ...\n    <IDENTIFIER> ...\n    \n\torg.apache.el.parser.ELParser.generateParseException(ELParser.java:2142)\n\torg.apache.el.parser.ELParser.jj_consume_token(ELParser.java:2024)\n\torg.apache.el.parser.ELParser.Function(ELParser.java:1207)\n\torg.apache.el.parser.ELParser.NonLiteral(ELParser.java:1114)\n\torg.apache.el.parser.ELParser.ValuePrefix(ELParser.java:1016)\n\torg.apache.el.parser.ELParser.Value(ELParser.java:965)\n\torg.apache.el.parser.ELParser.Unary(ELParser.java:947)\n\torg.apache.el.parser.ELParser.Multiplication(ELParser.java:711)\n\torg.apache.el.parser.ELParser.Math(ELParser.java:631)\n\torg.apache.el.parser.ELParser.Compare(ELParser.java:443)\n\torg.apache.el.parser.ELParser.Equality(ELParser.java:337)\n\torg.apache.el.parser.ELParser.And(ELParser.java:281)\n\torg.apache.el.parser.ELParser.Or(ELParser.java:225)\n\torg.apache.el.parser.ELParser.Choice(ELParser.java:182)\n\torg.apache.el.parser.ELParser.Expression(ELParser.java:174)\n\torg.apache.el.parser.ELParser.DynamicExpression(ELParser.java:146)\n\torg.apache.el.parser.ELParser.CompositeExpression(ELParser.java:43)\n\torg.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:93)\n\torg.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:150)\n\torg.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:194)\n\torg.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:68)\n\torg.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:934)\n\torg.apache.jsp.test_jsp._jspx_meth_c_005fout_005f0(test_jsp.java:98)\n\torg.apache.jsp.test_jsp._jspService(test_jsp.java:72)\n\torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:717)"}, {"count": 1, "attachment_id": null, "bug_id": 48112, "text": "This has been fixed in trunk and will be proposed for 6.0.x after further testing.", "id": 133479, "time": "2010-01-10T03:14:49Z", "creator": "markt@apache.org", "creation_time": "2010-01-10T03:14:49Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 133595, "time": "2010-01-14T02:29:16Z", "bug_id": 48112, "creation_time": "2010-01-14T02:29:16Z", "is_private": false, "text": "This has been fixed in 6.0.x and will be included in 6.0.23 onwards."}]