[{"count": 0, "tags": [], "bug_id": 43799, "attachment_id": null, "text": "The touch task gives the error \"Specify at least one source--a file or resource\ncollection.\" when the nested fileset yields no files to touch.\n\nIt's a problem because I want to be able to touch files only on certain\nconditions. This build.xml snippet has been working fine in ant 1.6.4:\n\n        <touch>\n            <fileset dir=\"web/WEB-INF\"\n                includesfile=\"conf/filteredConfigFiles\">\n                <not>\n                    <depend targetdir=\".\">\n                        <mapper type=\"merge\" to=\"build.properties\"/>\n                    </depend>\n                </not>\n            </fileset>\n        </touch>\n\n\nThis bug appears to have been introduced in revision 277936, Mon Mar 14 11:45:29\n2005 UTC. See the diff here (line 224):\n\nhttp://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/taskdefs/Touch.java?r1=277936&r2=349637&diff_format=h\n\nI can get it working using this change:\n\n$ svn diff src/main/org/apache/tools/ant/taskdefs/Touch.java \nIndex: src/main/org/apache/tools/ant/taskdefs/Touch.java\n===================================================================\n--- src/main/org/apache/tools/ant/taskdefs/Touch.java   (revision 592480)\n+++ src/main/org/apache/tools/ant/taskdefs/Touch.java   (working copy)\n@@ -222,7 +222,7 @@\n      * @since Ant 1.6.3\n      */\n     protected synchronized void checkConfiguration() throws BuildException {\n-        if (file == null && resources.size() == 0) {\n+        if (file == null && resources==null) {\n             throw new BuildException(\"Specify at least one source\"\n                                    + \"--a file or resource collection.\");\n         }\n\n\nI'm not sure this is 100% appropriate, but it works for me.", "id": 110272, "time": "2007-11-06T09:23:23Z", "creator": "chris.lear@laculine.com", "creation_time": "2007-11-06T09:23:23Z", "is_private": false}, {"count": 1, "tags": [], "text": "Yes, occasionally we have had to add checks to differentiate between \"nothing specified\" and \"nothing \nmatched.\"  Thanks for the report!", "attachment_id": null, "id": 110273, "creator": "mbenson@apache.org", "time": "2007-11-06T09:25:19Z", "bug_id": 43799, "creation_time": "2007-11-06T09:25:19Z", "is_private": false}, {"count": 2, "tags": [], "creator": "mbenson@apache.org", "text": "Fixed in trunk and merged for 1.7.1.  Thanks again!", "id": 110274, "time": "2007-11-06T10:35:56Z", "bug_id": 43799, "creation_time": "2007-11-06T10:35:56Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "chris.lear@laculine.com", "text": "Thanks. That was quick!", "id": 110297, "time": "2007-11-07T03:42:51Z", "bug_id": 43799, "creation_time": "2007-11-07T03:42:51Z", "is_private": false, "attachment_id": null}]