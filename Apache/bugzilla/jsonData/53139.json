[{"count": 0, "tags": [], "bug_id": 53139, "attachment_id": 28667, "text": "Created attachment 28667\nJConsole view of a freshly installed Tomcat 7, with SSL enabled in server.xml\n\nIssue:\nI've noticed that Tomcat 7.0.27 exposes the keystore and truststore passwords  via JMX in cleartext (in the bean JIoEndpoint).\nThis was not the case in Tomcat 6, for example the JIoEndpoint bean which\nwas exposed had much fewer attributes.\nI have specified the passwords as attributes in the HTTPS connector\ntag in server.xml.\n\nSolution:\nMy quick solution was to add mbeans-descriptors.xml to the package org.apache.tomcat.util.net (where JIOEndpoint lies) with this content:\n\n<mbeans-descriptors>\n   <mbean name=\"ThreadPool\"\n         description=\"JIoEndpoint\"\n         domain=\"Catalina\"\n         group=\"Connector\"\n         type=\"org.apache.tomcat.util.net.JIoEndpoint\">\n   </mbean>\n</mbeans-descriptors>\n\nWith this, no attributes from JIoEndpoint are exposed anymore.\n\nA better solution would be to add a more meaningful mbeans-descriptors.xml, only filtering out critical keystore/truststore information.\n\nAlso see here:\nhttp://www.mail-archive.com/users@tomcat.apache.org/msg98216.html\n\nThanks", "id": 158377, "time": "2012-04-24T14:04:40Z", "creator": "randy.very.gray@gmail.com", "creation_time": "2012-04-24T14:04:40Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 158469, "time": "2012-04-27T11:46:29Z", "bug_id": 53139, "creation_time": "2012-04-27T11:46:29Z", "text": "I not convinced that there is a security problem to solve here. JMX access is equivalent to full admin access and admins would be able to read those values in server.xml anyway."}, {"count": 2, "tags": [], "bug_id": 53139, "text": "But there are cases when developers also have access to JMX but aren't supposed to see such security details.", "id": 158870, "time": "2012-05-07T08:00:21Z", "creator": "randy.very.gray@gmail.com", "creation_time": "2012-05-07T08:00:21Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 53139, "attachment_id": null, "text": "As I stated before, JMX is an administration interface and as such has access to all sorts of internal details. This particular internal detail is of use when remotely administering instances via JMX.\n\nUnfortunately, JMX does not support fine-grained access controls. You are limited to users having read access or read/write access to everything (as an aside, fine grained JMX access control could be an interesting project).\n\nThe Tomcat code is not going to be changed to remove this attribute. The work-around you have adopted seems perfectly reasonable to me.", "id": 159402, "time": "2012-05-28T17:42:23Z", "creator": "markt@apache.org", "creation_time": "2012-05-28T17:42:23Z", "is_private": false}]