[{"count": 0, "tags": [], "bug_id": 13673, "text": "Hi,\n\nI am trying to write my own session manager and am having limited success.  I \nhave written my session manager and get a NullPointerException inside \nsetAttribute (see stack trace below).  Looking at the code, I don't the \nStandardSession objects serialize themselves properly.  The read/writeObject \nmethods document they do not serialize the manager and it must be set \nexplicitly.  I'm guessing it is not set after the the StandardSession is\nrecovered from the stream.  I am assuming that my session manager does not need \nto reset the manager as that's internal to catalina and the facade blocks \nassess to the get/set manager methods.\n\nI would be glad to send code that reproduce this problem or try patches to help \nresolve the problem.\n\nMany thanks,\nHarry.\n\njava.lang.NullPointerException\n\tat org.apache.catalina.session.StandardSession.setAttribute\n(StandardSession.java:1268)\n\tat org.apache.catalina.session.StandardSessionFacade.setAttribute\n(StandardSessionFacade.java:191)\n\tat org.apache.catalina.session.StandardSessionFacade.setAttribute\n(StandardSessionFacade.java:191)\n\tat Session1.doGet(Unknown Source)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2396)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:405)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:380)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:508)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:533)\n\tat java.lang.Thread.run(Thread.java:536)", "id": 24596, "time": "2002-10-16T00:38:33Z", "creator": "hek@asu.edu", "creation_time": "2002-10-16T00:38:33Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 13673, "is_private": false, "id": 24877, "creation_time": "2002-10-18T18:51:25Z", "time": "2002-10-18T18:51:25Z", "creator": "hek@asu.edu", "text": "Pilot error.  RTFM.  Sorry for the wasted bandwidth.", "attachment_id": null}]