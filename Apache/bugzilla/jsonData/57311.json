[{"count": 0, "tags": [], "bug_id": 57311, "attachment_id": null, "id": 179517, "time": "2014-12-04T17:10:35Z", "creator": "spyridon.gouliarmis@rcdevs.com", "creation_time": "2014-12-04T17:10:35Z", "is_private": false, "text": "When the following code is in httpd.conf:\n\n<VirtualHost *:${SOAP_PORT_STD}>\n    ErrorLog ${ROOT}/logs/soapd.log\n\n    SSLEngine Off\n\n    KeepAlive Off\n    \n    ProxyPass / balancer://cluster:8080/\n    ProxyPassReverse / balancer://cluster:8080/\n    \n    <Proxy balancer://cluster>\n        BalancerMember http://${SERVER_ADDR1}:8080/ timeout=55 retry=10 max=250\n\t<If \"osenv('SERVER_ADDR2') != ''\">\n\t    <If \"osenv('SERVER_MODE') =~ /^ordered$/\">\n\t    \tBalancerMember http://${SERVER_ADDR2}:8080/ status=+H timeout=55 retry=10 max=250\n\t    </If>\n\t    <Else>\n\t\tBalancerMember http://${SERVER_ADDR2}:8080/ timeout=55 retry=10 max=250\n\t    </Else>\t\n\t</If>\n    </Proxy>\n</VirtualHost>\n\nI get the following error:\n\nAH00526: Syntax error on line 456 of /opt/gobbledygook/lib/httpd.conf:\nBalancerMember Bad syntax for a balancer name\n\nLine 456 refers to the following:\n\nBalancerMember http://${SERVER_ADDR2}:8080/ status=+H timeout=55 retry=10 max=250\n\nI tried replacing the line with simpler ones, such as:\n\nBalancerMember http://10.0.0.1/\n\nbut still the same error. A line such as:\n\nSetOutputFilter INCLUDES\n\ninstead will raise no error, though."}, {"count": 1, "tags": [], "text": "(I mean I get the error on Apache startup.)", "attachment_id": null, "id": 179518, "creator": "spyridon.gouliarmis@rcdevs.com", "time": "2014-12-04T17:13:18Z", "bug_id": 57311, "creation_time": "2014-12-04T17:13:18Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "covener@gmail.com", "is_private": false, "count": 2, "id": 179519, "time": "2014-12-04T17:16:29Z", "bug_id": 57311, "creation_time": "2014-12-04T17:16:29Z", "text": "I don't think BalancerMember is designed to be used outside of (plain) Location and <Proxy> configuration sections.  Will leave PR open a few days."}, {"count": 3, "tags": [], "bug_id": 57311, "attachment_id": null, "id": 183028, "time": "2015-05-19T06:28:10Z", "creator": "christophe.jaillet@wanadoo.fr", "creation_time": "2015-05-19T06:28:10Z", "is_private": false, "text": "Confirmed.\n\nThis is because of:\n    /*\n     * Set a dummy value so that other directives notice that they are inside\n     * a config section.\n     */\n    cmd->path = \"*If\";\naround line 2485 in core.c\n\nThis breaks the processing of BalancerMember.\n\nWhat is the goal of this?"}, {"attachment_id": null, "tags": [], "creator": "spyridon.gouliarmis@rcdevs.com", "is_private": false, "count": 4, "id": 183031, "time": "2015-05-19T08:46:29Z", "bug_id": 57311, "creation_time": "2015-05-19T08:46:29Z", "text": "The original goal was to make a configurable reverse proxy. We figured Apache's configuration could be adapted at launch through environment variables and <If> blocks.\n\nWe just worked around the issue by building the right Apache configuration in a launcher script and including it whole through an environment variable in Apache's configuration."}, {"count": 5, "tags": [], "text": "> What is the goal of this?\n\nYour goal is clear.\n\nMy question was not explicit enought.\nI meant: \"what is the goal of such a behaviour in <if > processing (i.e. cmd->path = \"*If\";)\"\n\nIn other words: \"could ifsection() be modified to allow the kind of construction you tried to use?\"", "attachment_id": null, "id": 183033, "creator": "christophe.jaillet@wanadoo.fr", "time": "2015-05-19T09:40:30Z", "bug_id": 57311, "creation_time": "2015-05-19T09:40:30Z", "is_private": false}, {"count": 6, "tags": [], "text": "I just ran into this as well.  What is the current status on the issue.", "is_private": false, "bug_id": 57311, "id": 185830, "time": "2015-10-21T18:51:40Z", "creator": "keithdwilliams@gmail.com", "creation_time": "2015-10-21T18:51:40Z", "attachment_id": null}]