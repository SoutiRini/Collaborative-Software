[{"count": 0, "tags": [], "creator": "richard.choi@na.whiteclarkegroup.com", "is_private": false, "id": 66678, "attachment_id": null, "bug_id": 32163, "creation_time": "2004-11-10T17:47:29Z", "time": "2004-11-10T17:47:29Z", "text": "When I run the ant task in XP and connect to Solaris, it works. However, if I \nrun the same script from Solaris, it doesn't do anything.\nHere is the script\n<target name=\"execute_load\" >\n    <echo> Running sql loader tool </echo>\n    <telnet server=\"${UnixServer}\" userid=\"${UnixUserID}\" \npassword=\"${UnixUserPasswd}\">\n     <read>${WaitFor}</read>\n        <write>echo $WL_HOME > abc</write>\n   </telnet>\n  </target>\n\nHere is the output\n$ lps_load.sh\nexec \"/usr/java1.3.1/bin/java\" -\nclasspath \"/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-\nlauncher.jar\" -Dant.home=\"/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2\" -Dant.library.dir=\"/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2/lib\" org.apache.tools.ant.launch.Launcher -lib \"\" \"-version\"\nApache Ant version 1.6.2 compiled on July 16 2004\njava version \"1.3.1_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.3.1_01)\nJava HotSpot(TM) Client VM (build 1.3.1_01, mixed mode)\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/commons-net-\n1.2.2.jar:/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-apache-\noro.jar:/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2/lib/optional.jar:./jsch-0.1.15.jar\nexec \"/usr/java1.3.1/bin/java\" -\nclasspath \"/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-\nlauncher.jar\" -Dant.home=\"/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2\" -Dant.library.dir=\"/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2/lib\" org.apache.tools.ant.launch.Launcher -\nlib \"/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/commons-net-\n1.2.2.jar:/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-apache-\noro.jar:/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2/lib/optional.jar:./jsch-0.1.15.jar\" \"-f\" \"load_lps.xml\" \"execute_load\"\nBuildfile: load_lps.xml\n\nexecute_load:\n     [echo]  Running sql loader tool\n   [telnet]\n   [telnet]\n   [telnet] SunOS 5.7\n   [telnet]\n   [telnet]\n   [telnet] login:\n   [telnet] richard.choi\n   [telnet]  Password:\n   [telnet]\n   [telnet] Last login: Wed Nov 10 12:13:57 from wcna-p4lap008.na\n   [telnet] Sun Microsystems Inc.   SunOS 5.7       Generic October 1998\n   [telnet] You have mail.\n   [telnet] Hi, Richard\n   [telnet] echo $WL_HOME > abc\n\nBUILD SUCCESSFUL\nTotal time: 1 second"}, {"text": ">doesn't do anything.\n\nWell, it must do *something* like throw a null pointer or issue some error message?\n\nAnyway, task \"Telnet\" seems to work okay on my Solaris 9 machine.", "tags": [], "bug_id": 32163, "is_private": false, "count": 1, "id": 66680, "time": "2004-11-10T18:46:47Z", "creator": "jax@well.com", "creation_time": "2004-11-10T18:46:47Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 32163, "attachment_id": null, "id": 66681, "time": "2004-11-10T18:47:51Z", "creator": "jax@well.com", "creation_time": "2004-11-10T18:47:51Z", "is_private": false, "text": "Are you sure you built Ant on the Solaris machine with the pre-req's, e.g.,\njakarta-oro and apache-commons-net ?"}, {"count": 3, "tags": [], "bug_id": 32163, "attachment_id": null, "is_private": false, "id": 66683, "time": "2004-11-10T19:12:56Z", "creator": "richard.choi@na.whiteclarkegroup.com", "creation_time": "2004-11-10T19:12:56Z", "text": "I added the jakarta-oro-2.0.8.jar to the path, same result.\n\n$ lps_load.sh\nexec \"/usr/java1.3.1/bin/java\" -\nclasspath \"/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-\nlauncher.jar\" -Dant.home=\"/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2\" -Dant.library.dir=\"/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2/lib\" org.apache.tools.ant.launch.Launcher -lib \"\" \"-version\"\nApache Ant version 1.6.2 compiled on July 16 2004\njava version \"1.3.1_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.3.1_01)\nJava HotSpot(TM) Client VM (build 1.3.1_01, mixed mode)\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/commons-net-\n1.2.2.jar:/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/jakarta-oro-\n2.0.8.jar:/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2/lib/optional.jar:./jsch-0.1.15.jar\nexec \"/usr/java1.3.1/bin/java\" -\nclasspath \"/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-\nlauncher.jar\" -Dant.home=\"/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2\" -Dant.library.dir=\"/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2/lib\" org.apache.tools.ant.launch.Launcher -\nlib \"/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/commons-net-\n1.2.2.jar:/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/jakarta-oro-\n2.0.8.jar:/lsnrs/richard.choi/migrationTools/apache-ant-\n1.6.2/lib/optional.jar:./jsch-0.1.15.jar\" \"-f\" \"load_lps.xml\" \"execute_load\"\nBuildfile: load_lps.xml\n\nexecute_load:\n     [echo]  Running sql loader tool\n   [telnet]\n   [telnet]\n   [telnet] SunOS 5.7\n   [telnet]\n   [telnet]\n   [telnet] login:\n   [telnet] richard.choi\n   [telnet]  Password:\n   [telnet]\n   [telnet] Last login: Wed Nov 10 13:59:24 from mfweb1.na.whitec\n   [telnet] Sun Microsystems Inc.   SunOS 5.7       Generic October 1998\n   [telnet] You have mail.\n   [telnet] Hi, Richard\n   [telnet] echo $WL_HOME > abc\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n$ telnet 10.0.101.200\nTrying 10.0.101.200...\nConnected to 10.0.101.200.\nEscape character is '^]'.\n\n\nSunOS 5.7\n\nlogin: richard.choi\nPassword:\nLast login: Wed Nov 10 14:02:37 from mfweb1.na.whitec\nSun Microsystems Inc.   SunOS 5.7       Generic October 1998\nYou have mail.\nHi, Richard\n$ ls -l abc\nabc: No such file or directory\n$ exit\nConnection closed by foreign host.\n$ ls $ANT_HOME/lib/*.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-antlr.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-apache-bcel.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-apache-bsf.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-apache-log4j.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-apache-oro.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-apache-regexp.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-apache-resolver.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-commons-logging.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-commons-net.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-icontract.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-jai.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-javamail.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-jdepend.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-jmf.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-jsch.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-junit.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-launcher.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-netrexx.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-nodeps.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-starteam.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-stylebook.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-swing.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-trax.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-vaj.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-weblogic.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-xalan1.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant-xslp.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/ant.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/commons-net-1.2.2.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/jakarta-oro-2.0.8.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/xercesImpl.jar\n/lsnrs/richard.choi/migrationTools/apache-ant-1.6.2/lib/xml-apis.jar\n$\n"}, {"count": 4, "tags": [], "bug_id": 32163, "attachment_id": null, "text": "Okay, I created this file:\n\n==========================\n<?xml version=\"1.0\" standalone=\"yes\"?>\n<project name=\"TelnetTest\" default=\"runtest\" basedir=\".\">\n  <target name=\"runtest\" >\n    <property name=\"pswd\" value=\"******\"/>\n    <echo> Running telnet test.</echo>\n    <telnet timeout=\"2\" server=\"localhost\" userid=\"jax\" password=\"${pswd}\">\n      <read timeout=\"2\">@mitra</read>\n      <write>echo foo>bar</write>\n      <read timeout=\"2\"/>\n     </telnet>\n  </target>\n</project>\n==========================\n\nThen I ran it like so:\n\n==========================\nBuildfile: ant-test-telnet.xml\n\nruntest:\n     [echo]  Running telnet test.\n   [telnet] \n   [telnet] \n   [telnet] SunOS 5.9\n   [telnet] \n   [telnet] \n   [telnet] login:\n   [telnet] jax\n   [telnet]  Password:\n   [telnet]  \n   [telnet] Last login: Wed Nov 10 12:45:02 from localhost\n   [telnet] Sun Microsystems Inc.   SunOS 5.9       Generic May 2002\n   [telnet] [12:47:29 jax@mitra\n   [telnet] echo foo>bar\n==========================\n\nThen I checked the results:\n\n==========================\n[12:52:42 jax@mitra:~]$ uname -a\nSunOS mitra 5.9 Generic_112233-08 sun4u sparc SUNW,Sun-Blade-100 Solaris\n[12:52:47 jax@mitra:~]$ ls -l bar\n-rw-r--r--    1 jax      other           4 Nov 10 12:47 bar\n[12:52:51 jax@mitra:~]$ cat bar\nfoo\n==========================\n\nSo it works just fine for me. Possibly the problem is that you have not\nconformed to the recommendations which accompany the Telnet task entry in the\nAnt manual: \"Always declare an opening and closing <read> element to ensure that\nstatements are not sent before the connection is ready, and that the connection\nis not broken before the final command has completed.\" You have no closing\n<read> element.\n\n", "id": 66684, "time": "2004-11-10T19:59:28Z", "creator": "jax@well.com", "creation_time": "2004-11-10T19:59:28Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 32163, "attachment_id": null, "text": "It works now, thanks. I modified to run a shell script on the remote machine. \nIs it proper to write an empty string after?\n\n<read>${WaitFor}</read>\n<write>cd ftptest</write>\n<read timeout=\"1\"/>\n<write>./test.sh</write>\n<read timeout=\"2\"></read>\n<write></write>\n<read timeout=\"2\"></read>\n", "id": 66687, "time": "2004-11-10T21:43:02Z", "creator": "richard.choi@na.whiteclarkegroup.com", "creation_time": "2004-11-10T21:43:02Z", "is_private": false}, {"count": 6, "tags": [], "text": ">Is it proper to write an empty string after?\n\nI don't see offhand how it could do any harm, though I haven't read the source.\nProbably just sends a linefeed.", "is_private": false, "id": 66690, "creator": "jax@well.com", "time": "2004-11-10T22:22:57Z", "bug_id": 32163, "creation_time": "2004-11-10T22:22:57Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "Just a note - SSH is much easier to live with and it is also secure. Why not to use it?", "attachment_id": null, "id": 66692, "creator": "alexeys@inventigo.com", "time": "2004-11-10T22:56:41Z", "bug_id": 32163, "creation_time": "2004-11-10T22:56:41Z", "is_private": false}, {"count": 8, "tags": [], "text": "I tried the SSH and it worked under JDK1.4.2. I had problem setting the \nenvironment to run under JDK1.3.1.", "attachment_id": null, "bug_id": 32163, "id": 66693, "time": "2004-11-10T23:18:14Z", "creator": "richard.choi@na.whiteclarkegroup.com", "creation_time": "2004-11-10T23:18:14Z", "is_private": false}, {"count": 9, "tags": [], "creator": "riznob@hotmail.com", "is_private": false, "id": 66694, "attachment_id": null, "bug_id": 32163, "creation_time": "2004-11-10T23:32:26Z", "time": "2004-11-10T23:32:26Z", "text": "JDK 1.4 comes with the JCE (Java Cryptography Extension). JDK 1.3 does not. You \ncan download and install it into you JDK 1.3. That would allow you to use the \nsshexec and scp tasks with JDK 1.3."}]