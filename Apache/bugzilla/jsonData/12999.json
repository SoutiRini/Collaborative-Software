[{"count": 0, "tags": [], "creator": "cmcfarland@onebox.com", "attachment_id": null, "text": "I'm copying files using Copy task with a Fileset to copy directory structure \nfrom one location to another. I have Copy task failonerror=\"false\" because I \ndon't want the copy failure to crash the build. The problem is that when I have \nread-only privileges for destination location the copy fails and so does the \nbuild. Here is the copy portion of my target:\n\n        <!-- copy local javadoc to shared dir -->\n        <copy todir=\"${shared.javadoc.dir}\" overwrite=\"true\" \n            failonerror=\"false\" preservelastmodified=\"no\">\n            <fileset dir=\"${local.javadoc.dir}\">\n                <include name=\"**/*\"/>\n            </fileset>\n        </copy>\n\nEarlier inside the same <target> is a <delete> task w/ fileset to delete the \ndestination directory (which is unsuccessful due to read-only) followed by a \n<mkdir> to then create the top-level of the destination directory (which does \nnothing because the directory is present). I have pasted the failure output \nbelow:\n\n     [copy] Copying 114 files to \\\\Twcsrv13\\rdata\\Inet_Global\\Standards & \nTemplates\\GASS\\Development\\API\n     [copy] Copying \nC:\\ChrisFiles\\projects\\twc\\GASS\\antbuild\\javadoc\\twc\\security\\operation\\DataOper\nationFactory.html to \\\\Twcsrv13\\rdata\\Inet_Global\\Standards & \nTemplates\\GASS\\Development\\API\\twc\\security\\operation\\DataOperationFactory.html\n\nBUILD FAILED\nfile:C:/ChrisFiles/projects/twc/GASS/antbuild/build.xml:225: Failed to copy \nC:\\ChrisFiles\\projects\\twc\\GASS\\antbuild\\javadoc\\twc\\security\\operation\\DataOper\nationFactory.html to \\\\Twcsrv13\\rdata\\Inet_Global\\Standards & \nTemplates\\GASS\\Development\\API\\twc\\security\\operation\\DataOperationFactory.html \ndue to \\\\Twcsrv13\\rdata\\Inet_Global\\Standards & \nTemplates\\GASS\\Development\\API\\twc\\security\\operation\\DataOperationFactory.html \n(The system cannot find the path specified)\n\tat org.apache.tools.ant.taskdefs.Copy.doFileOperations(Copy.java:534)\n\tat org.apache.tools.ant.taskdefs.Copy.execute(Copy.java:368)\n\tat org.apache.tools.ant.Task.perform(Task.java:317)\n\tat org.apache.tools.ant.Target.execute(Target.java:309)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:334)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1250)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:610)\n\tat org.apache.tools.ant.Main.start(Main.java:196)\n\tat org.apache.tools.ant.Main.main(Main.java:235)\n--- Nested Exception ---\njava.io.FileNotFoundException: \\\\Twcsrv13\\rdata\\Inet_Global\\Standards & \nTemplates\\GASS\\Development\\API\\twc\\security\\operation\\DataOperationFactory.html \n(The system cannot find the path specified)\n\tat java.io.FileOutputStream.open(Native Method)\n\tat java.io.FileOutputStream.<init>(FileOutputStream.java:176)\n\tat java.io.FileOutputStream.<init>(FileOutputStream.java:131)\n\tat org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:395)\n\tat org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:225)\n\tat org.apache.tools.ant.taskdefs.Copy.doFileOperations(Copy.java:527)\n\tat org.apache.tools.ant.taskdefs.Copy.execute(Copy.java:368)\n\tat org.apache.tools.ant.Task.perform(Task.java:317)\n\tat org.apache.tools.ant.Target.execute(Target.java:309)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:334)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1250)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:610)\n\tat org.apache.tools.ant.Main.start(Main.java:196)\n\tat org.apache.tools.ant.Main.main(Main.java:235)", "id": 23380, "time": "2002-09-25T18:01:42Z", "bug_id": 12999, "creation_time": "2002-09-25T18:01:42Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 12999, "attachment_id": null, "id": 23382, "time": "2002-09-25T18:42:03Z", "creator": "cmcfarland@onebox.com", "creation_time": "2002-09-25T18:42:03Z", "is_private": false, "text": "Here is the error output for copying just one file to the same restricted \ndirectory structure. At least the stacktrace states \"Access Denied\", which is \nmore straightforward than the original stacktrace I sent you.\n\n     [copy] Copying 1 file to \\\\Twcsrv13\\rdata\\Inet_Global\\Standards & \nTemplates\\GASS\\Builds\n     [copy] Copying C:\\ChrisFiles\\projects\\twc\\GASS\\antbuild\\versions\\GASS-\n1.8.5.1.jar to \\\\Twcsrv13\\rdata\\Inet_Global\\Standards & \nTemplates\\GASS\\Builds\\GASS.jar\n\nBUILD FAILED\nfile:C:/ChrisFiles/projects/twc/GASS/antbuild/build.xml:319: Failed to copy \nC:\\ChrisFiles\\projects\\twc\\GASS\\antbuild\\versions\\GASS-1.8.5.1.jar to \\\\Twcsrv13\n\\rdata\\Inet_Global\\Standards & Templates\\GASS\\Builds\\GASS.jar due to \\\\Twcsrv13\n\\rdata\\Inet_Global\\Standards & Templates\\GASS\\Builds\\GASS.jar (Access is denied)\n\tat org.apache.tools.ant.taskdefs.Copy.doFileOperations(Copy.java:534)\n\tat org.apache.tools.ant.taskdefs.Copy.execute(Copy.java:368)\n\tat org.apache.tools.ant.Task.perform(Task.java:317)\n\tat org.apache.tools.ant.Target.execute(Target.java:309)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:334)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1250)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:610)\n\tat org.apache.tools.ant.Main.start(Main.java:196)\n\tat org.apache.tools.ant.Main.main(Main.java:235)\n--- Nested Exception ---\njava.io.FileNotFoundException: \\\\Twcsrv13\\rdata\\Inet_Global\\Standards & \nTemplates\\GASS\\Builds\\GASS.jar (Access is denied)\n\tat java.io.FileOutputStream.open(Native Method)\n\tat java.io.FileOutputStream.<init>(FileOutputStream.java:176)\n\tat java.io.FileOutputStream.<init>(FileOutputStream.java:131)\n\tat org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:395)\n\tat org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:225)\n\tat org.apache.tools.ant.taskdefs.Copy.doFileOperations(Copy.java:527)\n\tat org.apache.tools.ant.taskdefs.Copy.execute(Copy.java:368)\n\tat org.apache.tools.ant.Task.perform(Task.java:317)\n\tat org.apache.tools.ant.Target.execute(Target.java:309)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:334)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1250)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:610)\n\tat org.apache.tools.ant.Main.start(Main.java:196)\n\tat org.apache.tools.ant.Main.main(Main.java:235)\n"}, {"text": "This is not what the failonerror attribute has been designed for.  From the docs:\n\n> Log a warning message, but do not stop the build, when the file to copy does not\n> exist. Only meaningful when copying a single file.\n\nSo it is not supposed to help in your situation.\n\nI'm degrading this to Enhancement, as you are really asking for an additional\nmeaning of that attribute.", "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "count": 2, "id": 23410, "time": "2002-09-26T08:00:39Z", "bug_id": 12999, "creation_time": "2002-09-26T08:00:39Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 12999, "text": "Yes, this is a blocker for me. Add my strong request to the enhancement, then. \nOur build wants to copy docs over as well, and some docs may not have been \ncreated for a given build step--but the copy must not fail the build, it \nshould just give error output and continue if failonerror=\"false\". \nCode: \n    <mkdir dir=\"${{archivedir}}/doc/{./@name}\"/>\n    <copy todir=\"${{archivedir}}/doc/{./@name}\" failonerror=\"no\">\n            <fileset dir=\"${{projectroot}}/{./@name}/docs/\">\n                    <include name=\"**/*\"/>\n            </fileset>\n    </copy>\nIt is clear that failonerror applies only when copying a singleton file, but \nwhat we really all want is a failonerror=false when copying a fileset *:-)\n--Chris", "id": 28155, "time": "2002-12-22T01:16:23Z", "creator": "cjohnson@betweenmarkets.com", "creation_time": "2002-12-22T01:16:23Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 12999, "text": "I also strongly vote for adding functionality to the failonerror attribute.\n\nIn my situation, if I set it to false, I would like it not to fail in the case\nwhere a file was locked open for editing, and therefore could not be copied.  I\nwould just like a warning message.", "id": 29587, "time": "2003-01-17T05:36:19Z", "creator": "daniel.armbrust@mayo.edu", "creation_time": "2003-01-17T05:36:19Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 12999, "text": "fixed with nightly build 2003-05-20.", "id": 37436, "time": "2003-05-19T15:39:46Z", "creator": "bodewig@apache.org", "creation_time": "2003-05-19T15:39:46Z", "is_private": false, "attachment_id": null}]