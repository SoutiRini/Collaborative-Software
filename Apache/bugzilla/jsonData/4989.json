[{"count": 0, "tags": [], "creator": "se_johnson@yahoo.com", "is_private": false, "id": 8110, "attachment_id": null, "bug_id": 4989, "creation_time": "2001-11-20T15:25:57Z", "time": "2001-11-20T15:25:57Z", "text": "If jaxp.properties is present in JAVA_HOME/jre/lib and it does not\ncontain a javax.xml.transform.TransformerFactory property,\nwhen issuing TransformerFactory.newInstance, you get the following \nexceptions:\njavax.xml.transform.TransformerFactoryConfigurationError: Provider null could no\nt be instantiated: java.lang.NullPointerException\n        at javax.xml.transform.TransformerFactory.newInstance(TransformerFactory\n.java:145)\n        at testtrans.main(testtrans.java:13)\n\nCause Exception:\njava.lang.NullPointerException\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:279)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:253)\n        at javax.xml.transform.FactoryFinder.newInstance(FactoryFinder.java:132)\n\n        at javax.xml.transform.FactoryFinder.find(FactoryFinder.java:188)\n        at javax.xml.transform.TransformerFactory.newInstance(TransformerFactory\n.java:139)\n        at testtrans.main(testtrans.java:13) \n\n\nTest program for above:\nimport javax.xml.transform.*;\n\n// Test program to product null pointer in TransformerFactory.newInstance().\n// JAVA_HOME/jre/lib must contain a jaxp.properties file.\n// The jaxp.properties must not contain a javax.xml.transform.TransformerFactory\n// property.  An empty jaxp.properties file will do.\npublic class testtrans\n{\n    public static void main (String [] args)\n    {\n        try\n        {\n            TransformerFactory tFactory = TransformerFactory.newInstance();\n        }\n        catch (TransformerFactoryConfigurationError e)\n        {\n            e.printStackTrace();\n\n            Exception ee = e.getException();\n            if (ee != null)\n            {\n                System.out.println(\"\");\n                System.out.println(\"Cause Exception:\");\n                ee.printStackTrace();\n            }\n        }\n        catch (Throwable t)\n        {\n            t.printStackTrace();\n        }\n    }\n}\n\n\njavax.xml.transform.FactoryFinder.find() is not checking for a null \nproperty value.  (line 186 in 2.2.D13) and is passing null to \nFactoryFinder.newInstance.\nThe find() code does have a catch for Exception, but newInstance() converts\nthe null pointer exception to a ConfigurationError which is derived\nfrom Error not Exception.  ConfigurationError is not caught by find() and\nError is ultimately returned to user.\n\nError was discovered when trying to use jaxp.properties to set other\nproperties."}, {"count": 1, "tags": [], "bug_id": 4989, "attachment_id": null, "id": 9696, "time": "2002-01-16T19:04:01Z", "creator": "edwingo@apache.org", "creation_time": "2002-01-16T19:04:01Z", "is_private": false, "text": "Yup, it needs to be fixed.  But I believe there is a workaround so I will fix it \nlater.  Thanks for the detailed bug report and simple program.\n\n-Edwin"}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 127833, "time": "2009-06-10T13:26:23Z", "bug_id": 4989, "creation_time": "2009-06-10T13:26:23Z", "is_private": false, "text": "Reset assignee so mails go to list."}]