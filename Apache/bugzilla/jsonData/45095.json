[{"count": 0, "tags": [], "text": "xmlsec sources in svn and xmlsec builds in official maven repositories and alss in http://xml.apache.org/security/dist/java-library/ contain an unusable log4j.properties for production.\n\nNot only it is a bad practice to redefine a root logger in log4j.properties, but it is redefined to accept DEBUG level. This can cause a production environnement to flow alot of debug data in log files.\n\nEvery single projet having a log4j config MUST :\n - choose a unique name for its log4j.properties (or .xml) to avoid classloader to take instead of another log4j.properties/.xml. The log4j config file should be called explicitely with the *Configurator. This allow multiple jars in the same classloader to append their log4j config instead of having only oneloaded  at random.\n - never redefine the root logger. The root logger may be called by anyone so if you redfine it, side effects occur (as having another software logging in \"your\" root logger). The root logger should be defined at a WAR or EAR level as a default logger.\n - never define root logger with DEBUG level : this should be the choice of the user to increase verbosity level.\n\nxmlsec have a bad log4j config :  it redefines a root logger at DEBUG level.\n\nThis issue \n - forces developper to re-build xmlsec-*.jar with a custom log4j.properties in order to lower the verbosity for production\n - forces developper to avoid using maven or apache repositories\n\nThe bigest problem is that even with a correct log4j.properties, this file may interact with other bad designed software using the same default config name. So one library among them will have its logger loaded, the other will fail silently !\n\nI'm reporting this because xmlsec-1.3.1 was the cause for another component to log a lot of DEBUG infos on sysout. But 1.4.1 has the same problem.\n\nThe correct way to correct this is : \n - removing the root logger config from org/apache/xml/security/resource/log4j.properties\n - set other logger at ERROR level\n\nOnly the user can decide if the verbosity should be increased", "is_private": false, "id": 117120, "creator": "syrion.com@club-internet.fr", "time": "2008-05-29T07:40:21Z", "bug_id": 45095, "creation_time": "2008-05-29T07:40:21Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "sean.mullan@oracle.com", "attachment_id": null, "text": "Fixed as suggested.", "id": 118075, "time": "2008-06-27T13:28:44Z", "bug_id": 45095, "creation_time": "2008-06-27T13:28:44Z", "is_private": false}, {"count": 2, "tags": [], "text": "Did this fix go into any releases?  xmlsec-1.4.3.jar seems to be the latest and it has the problem described.", "attachment_id": null, "bug_id": 45095, "id": 133518, "time": "2010-01-11T11:57:05Z", "creator": "Adrian.B.Robert@gmail.com", "creation_time": "2010-01-11T11:57:05Z", "is_private": false}, {"count": 3, "tags": [], "text": "(In reply to comment #2)\n> Did this fix go into any releases?  xmlsec-1.4.3.jar seems to be the latest and\n> it has the problem described.\n\nHere are the diffs for the fix that went into 1.4.3. Did you expect something different?\n\n$ svn diff -r350676 log4j.properties\nIndex: log4j.properties\n===================================================================\n--- log4j.properties    (revision 350676)\n+++ log4j.properties    (working copy)\n@@ -4,14 +4,13 @@\n #\n # ------------------------------------------------------------------------\n #\n-log4j.rootLogger=DEBUG, LOGTXT\n\n ########################################################################\n #\n # Logging based on packages\n #\n ########################################################################\n-log4j.logger.org.apache.xml.security=DEBUG, LOGTXT\n+log4j.logger.org.apache.xml.security=ERROR, LOGTXT\n log4j.logger.org.apache.xml.security.test.AllTests=DEBUG, LOGTXT\n\n ########################################################################", "is_private": false, "bug_id": 45095, "id": 133522, "time": "2010-01-11T13:46:13Z", "creator": "sean.mullan@oracle.com", "creation_time": "2010-01-11T13:46:13Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 45095, "attachment_id": null, "id": 133852, "time": "2010-01-23T18:15:29Z", "creator": "syrion.com@club-internet.fr", "creation_time": "2010-01-23T18:15:29Z", "is_private": false, "text": "xmlsec 1.4.3 is OK, as its log4j config follows recommandations\n - no more root logger overriding\n - no more DEBUG level\n\nAs an effect, xmlsec is not flooding production logs anymore. It works as expected. xmlsec 1.4.3 doesn't have the issue anymore. \n\n(In reply to comment #3)\n> (In reply to comment #2)\n> > Did this fix go into any releases?  xmlsec-1.4.3.jar seems to be the latest and\n> > it has the problem described."}]