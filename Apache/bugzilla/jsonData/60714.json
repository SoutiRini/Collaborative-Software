[{"count": 0, "tags": [], "creator": "youri.andropov@gmail.com", "text": "Created attachment 34739\njmeter's exception\n\nWhen doing a simple HTTP GET with the HTTP sampler :\n\nGET https://xxx/usr-gateway/oauth/authorize?client_id=whatever&response_type=code\n\nNo request is sent, I only get a jmeter exception. See attached log.\n\nWhen doing the same thing with jmeter 3.0, it works fine.", "id": 196868, "time": "2017-02-09T09:40:54Z", "bug_id": 60714, "creation_time": "2017-02-09T09:40:54Z", "is_private": false, "attachment_id": 34739}, {"count": 1, "tags": [], "bug_id": 60714, "attachment_id": null, "is_private": false, "id": 196920, "time": "2017-02-10T20:58:19Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-10T20:58:19Z", "text": "Hello,\nCould you check with nightly build please ?\nhttp://jmeter.apache.org/nightly.html\n\nIf issue persists, using nightly build set in log4j2.xml, uncomment :\n    <Logger name=\"org.apache.http\" level=\"debug\" />\n    <Logger name=\"org.apache.http.wire\" level=\"debug\" />\n\nRun your test and attach logs here.\nThanks"}, {"count": 2, "attachment_id": null, "bug_id": 60714, "is_private": false, "id": 196958, "time": "2017-02-13T14:44:14Z", "creator": "youri.andropov@gmail.com", "creation_time": "2017-02-13T14:44:14Z", "tags": [], "text": "Latest nightly (r1782718) fails to start with the following message :\n\nAn error occurred: class org.apache.log4j.spi.NOPLogger overrides final method getEffectiveLevel.()Lorg/apache/log4j/Level"}, {"count": 3, "tags": [], "bug_id": 60714, "attachment_id": null, "text": "(In reply to Frederic Girard from comment #2)\n> Latest nightly (r1782718) fails to start with the following message :\n> \n> An error occurred: class org.apache.log4j.spi.NOPLogger overrides final\n> method getEffectiveLevel.()Lorg/apache/log4j/Level\n\nHi,\nAre you sure you don't have incompatible 3rd party plugins ?\nCan you attach jmeter.log ?\nThanks", "id": 196959, "time": "2017-02-13T14:52:24Z", "creator": "support@ubikloadpack.com", "creation_time": "2017-02-13T14:52:24Z", "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 60714, "text": "(In reply to Frederic Girard from comment #2)\n> Latest nightly (r1782718) fails to start with the following message :\n> \n> An error occurred: class org.apache.log4j.spi.NOPLogger overrides final\n> method getEffectiveLevel.()Lorg/apache/log4j/Level\n\nI confirm I face no issue with nightly build", "id": 196980, "time": "2017-02-13T21:18:30Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-13T21:18:30Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 60714, "attachment_id": null, "is_private": false, "id": 197014, "time": "2017-02-14T20:34:51Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-14T20:34:51Z", "text": "Any feedback ? \nDid you try again nightly build ?\nThanks"}, {"count": 6, "tags": [], "bug_id": 60714, "attachment_id": null, "is_private": false, "id": 197040, "time": "2017-02-15T16:08:20Z", "creator": "youri.andropov@gmail.com", "creation_time": "2017-02-15T16:08:20Z", "text": "Hello, I can start jmeter without any plugin, but my script won't load without some of them.\nSo you're probably right, some plugins seems no more compatible with v3.1, and I can't use it anyway."}, {"count": 7, "tags": [], "text": "Can you tell us, which 3rd party plugins you are using?", "is_private": false, "id": 197041, "creator": "felix.schumacher@internetallee.de", "time": "2017-02-15T16:31:52Z", "bug_id": 60714, "creation_time": "2017-02-15T16:31:52Z", "attachment_id": null}, {"count": 8, "tags": [], "text": "Ok, I'm using the standard, extras and extralibs plugins, the CMDrunner, hazelcast client, HTTPraw, functions and a custom one.\n\nBut it seems it was quite a mess in the ext folder, with many versions of the same plugins. I couldn't find which one was causing this error message.\n\nI did some cleanup and it seems it works better. I couldn't retry the oauth HTTP request, I'll do it ASAP.", "is_private": false, "bug_id": 60714, "id": 197076, "time": "2017-02-16T16:32:32Z", "creator": "youri.andropov@gmail.com", "creation_time": "2017-02-16T16:32:32Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 60714, "attachment_id": null, "text": "Hello everyone,\n\nAfter many tests, it appears that I still have the \"java.nio.charset.MalformedInputException: Input length = 1\" exception with jmeter 3.1 on a simple http request, whereas jmeter 3.0 works fine.", "id": 198363, "time": "2017-04-19T14:31:17Z", "creator": "youri.andropov@gmail.com", "creation_time": "2017-04-19T14:31:17Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 60714, "attachment_id": null, "text": "We were not able to reproduce your problem. So please give us more information, that enables us to understand the problem.\n\nIf the request can be made with JMeter version 3.0, it might help to attach the headers, that have to be parsed by JMeter.", "id": 198369, "time": "2017-04-19T18:47:52Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2017-04-19T18:47:52Z", "is_private": false}, {"count": 11, "tags": [], "text": "jmeter 3.1 :\n\nGET https://falcon-usr-rest.lotsys.corp/usr-gateway/oauth/authorize?client_id=xxx&response_type=code\n\nGET data:\n\n\n[no cookies]\n\nRequest Headers:\nConnection: keep-alive\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64; Trident/7.0; rv:11.0) like Gecko\nAccept-Language: fr-FR\nAccept: text/html, application/xhtml+xml, */*\nAccept-Encoding: gzip, deflate\nContent-Length: 0\nContent-Type: text/plain; charset=UTF-8\nHost: falcon-usr-rest.lotsys.corp\n\nResponse :\n\njava.nio.charset.MalformedInputException: Input length = 1\n\tat java.nio.charset.CoderResult.throwException(CoderResult.java:281)\n\tat org.apache.http.impl.io.AbstractSessionInputBuffer.handleDecodingResult(AbstractSessionInputBuffer.java:374)\n\tat org.apache.http.impl.io.AbstractSessionInputBuffer.appendDecoded(AbstractSessionInputBuffer.java:361)\n\tat org.apache.http.impl.io.AbstractSessionInputBuffer.lineFromReadBuffer(AbstractSessionInputBuffer.java:339)\n\tat org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:258)\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)\n\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)\n\tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)\n\tat org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:281)\n\tat org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:259)\n\tat org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:209)\n\tat org.apache.jmeter.protocol.http.sampler.MeasuringConnectionManager$MeasuredConnection.receiveResponseHeader(MeasuringConnectionManager.java:212)\n\tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)\n\tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)\n\tat org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:686)\n\tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:488)\n\tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:884)\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.executeRequest(HTTPHC4Impl.java:654)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:413)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:74)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1166)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1155)\n\tat org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:475)\n\tat org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:418)\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:249)\n\tat java.lang.Thread.run(Thread.java:745)\n\n\nThread Name: ITF thread group 2-1\nSample Start: 2017-04-20 10:55:43 CEST\nLoad time: 384\nConnect Time: 12\nLatency: 0\nSize in bytes: 2730\nSent bytes:0\nHeaders size in bytes: 0\nBody size in bytes: 2730\nSample Count: 1\nError Count: 1\nData type (\"text\"|\"bin\"|\"\"): text\nResponse code: Non HTTP response code: java.nio.charset.MalformedInputException\nResponse message: Non HTTP response message: Input length = 1\n\nResponse headers:\n\n\nHTTPSampleResult fields:\nContentType: \nDataEncoding: null\n\n\n\n\njmeter 3.0 :\n\nGET https://falcon-usr-rest.lotsys.corp/usr-gateway/oauth/authorize?client_id=xxx&response_type=code\n\n[no cookies]\n\nRequest Headers:\nConnection: keep-alive\nUser-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64; Trident/7.0; rv:11.0) like Gecko\nAccept-Language: fr-FR\nAccept: text/html, application/xhtml+xml, */*\nAccept-Encoding: gzip, deflate\nHost: falcon-usr-rest.lotsys.corp\n\nNo response, but a redirection :\n\nResponse headers:\nHTTP/1.1 302 D\u00e9plac\u00e9 Temporairement\nServer: Apache-Coyote/1.1\nCache-Control: no-store\nLocation: https://vip-falcon-gtw-itf.lotsys.corp/itf-gateway/rest/itf/session?lottery=falcon-usr&code=XXX\nContent-Language: fr-FR\nContent-Length: 0\nDate: Thu, 20 Apr 2017 08:48:25 GMT\n\n\nHTTPSampleResult fields:\nContentType: \nDataEncoding: null\n\n\nI can hardly be more explicite.", "is_private": false, "bug_id": 60714, "id": 198401, "time": "2017-04-20T08:56:47Z", "creator": "youri.andropov@gmail.com", "creation_time": "2017-04-20T08:56:47Z", "attachment_id": null}, {"count": 12, "attachment_id": null, "bug_id": 60714, "is_private": false, "id": 198403, "time": "2017-04-20T09:05:02Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2017-04-20T09:05:02Z", "tags": [], "text": "The first line in the response contains non asci characters. I am pretty sure, that this is not allowed and the cause of the error message.\n\nI think we can look into this in more detail now."}, {"count": 13, "tags": [], "bug_id": 60714, "text": "I think no request is sent. I couldn't find any trace of this request in my tomcat access log.\nAnd even if a request was sent, the response has a content-length of zero.", "id": 198430, "time": "2017-04-20T19:08:34Z", "creator": "youri.andropov@gmail.com", "creation_time": "2017-04-20T19:08:34Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 60714, "is_private": false, "id": 198431, "creation_time": "2017-04-20T19:29:29Z", "time": "2017-04-20T19:29:29Z", "creator": "youri.andropov@gmail.com", "text": "Since the first request specifies 'charset=UTF-8', I see no reason the header couldn't be read even with non-ASCII characters.", "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 60714, "attachment_id": null, "text": "Maybe you could debug the network connection by setting  -Djavax.net.debug=all\n\nThat way you can see, what JMeter is sending and what the server is sending.", "id": 198432, "time": "2017-04-20T19:44:51Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2017-04-20T19:44:51Z", "is_private": false}, {"count": 16, "tags": [], "text": "(In reply to Felix Schumacher from comment #15)\n> Maybe you could debug the network connection by setting \n> -Djavax.net.debug=all\n> \n> That way you can see, what JMeter is sending and what the server is sending.\n\nWould it be possible to uncomment in log4j2.xml:\n    <!-- # Enable full wire + context logging -->\n    <Logger name=\"org.apache.http\" level=\"debug\" />\n\n\nAnd run the failing request then attach jmeter.log\nThanks", "is_private": false, "id": 198922, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2017-05-27T22:36:35Z", "bug_id": 60714, "creation_time": "2017-05-27T22:36:35Z", "attachment_id": null}, {"count": 17, "tags": [], "bug_id": 60714, "attachment_id": null, "is_private": false, "id": 200484, "time": "2017-08-27T18:15:32Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-08-27T18:15:32Z", "text": "Hello,\nI am pretty sure as per Felix answer that problem comes from this line:\nHTTP/1.1 302 D\u00e9plac\u00e9 Temporairement\n\nSee:\n\nhttps://stackoverflow.com/questions/4400678/what-character-encoding-should-i-use-for-a-http-header"}, {"count": 18, "tags": [], "bug_id": 60714, "text": "I cannot test it any more (I moved), but this is quite likely, I agree.\nThis would mean it is a real bug.", "id": 200487, "time": "2017-08-28T06:25:30Z", "creator": "youri.andropov@gmail.com", "creation_time": "2017-08-28T06:25:30Z", "is_private": false, "attachment_id": null}]