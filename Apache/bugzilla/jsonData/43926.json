[{"count": 0, "text": "When doing a search several exceptions are logged. The search works fine, but we\nshouldn't be cluttering up the logs. The most likely cause is that the doctype\nisn't set.\n\nCaused by: org.apache.lenya.ac.AccessControlException: Request\n[org.apache.cocoon.environment.wrapper.RequestWrapper@19f6e39] does not contain\nroles: \n    URI: [/default/authoring/css/usecase.css]\n    Parameter: [doctype] = []\n\n        at org.apache.lenya.cms.ac.PolicyUtil.getRoles(PolicyUtil.java:64)\n        at\norg.apache.lenya.cms.cocoon.transformation.UsecaseMenuTransformer.setup(UsecaseMenuTransformer.java:245)", "creator": "rfrovarp@apache.org", "attachment_id": null, "id": 110925, "time": "2007-11-21T07:56:26Z", "bug_id": 43926, "creation_time": "2007-11-21T07:56:26Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "andreas@apache.org", "text": "I guess the reason is that the resource-type specific CSS \"usecase.css\" doesn't\nexist. This request should just return a 404 instead of throwing exceptions. But\nsince the resource sitemaps don't find it, it is treated as a document.", "id": 110928, "time": "2007-11-21T08:21:55Z", "bug_id": 43926, "creation_time": "2007-11-21T08:21:55Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 43926, "text": "I guess the access controller doesn't attach the roles to the request because\nthe .css URLs are bypassable:\n\n    <public-extensions>css,jpg,gif,png,rng,xsl</public-extensions>\n", "count": 2, "id": 110930, "time": "2007-11-21T08:28:02Z", "creator": "andreas@apache.org", "creation_time": "2007-11-21T08:28:02Z", "is_private": false}, {"count": 3, "tags": [], "creator": "andreas@apache.org", "text": "The BypassableAccessController sets up the roles properly now, but this makes\nthe bypassed requests more expensive. There are two options to improve this:\n\na) PolicyUtil.getRoles(Request) doesn't throw an exception if the roles are not\nset (would probably be the most robust solution, but bugs might be harder to find)\n\nb) BypassableAccessController attaches an empty role list to the request", "id": 110932, "time": "2007-11-21T08:45:36Z", "bug_id": 43926, "creation_time": "2007-11-21T08:45:36Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 43926, "is_private": false, "count": 4, "id": 110933, "time": "2007-11-21T08:50:26Z", "creator": "rfrovarp@apache.org", "creation_time": "2007-11-21T08:50:26Z", "text": "It happens with resource.css and a kupu css file that isn't being referenced\nproperly. So it is further ranging than just searching."}, {"count": 5, "tags": [], "bug_id": 43926, "attachment_id": null, "text": "(In reply to comment #3)\n> \n> b) BypassableAccessController attaches an empty role list to the request\n\nThis makes sense to me.", "id": 110935, "time": "2007-11-21T08:55:14Z", "creator": "rfrovarp@apache.org", "creation_time": "2007-11-21T08:55:14Z", "is_private": false}, {"count": 6, "text": "This appears to have been fixed at some point. ", "creator": "rfrovarp@apache.org", "attachment_id": null, "id": 114597, "time": "2008-03-13T09:57:58Z", "bug_id": 43926, "creation_time": "2008-03-13T09:57:58Z", "tags": [], "is_private": false}]