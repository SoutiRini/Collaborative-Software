[{"count": 0, "tags": [], "creator": "torsten.foertsch@gmx.net", "attachment_id": 27332, "text": "Created attachment 27332\na fix\n\nThe DEFLATE output filter contains this piece of code (as of server magic number 20110724)\n\n    if (!ctx) {\n        char *token;\n        const char *encoding;\n\n        /* Delay initialization until we have seen some data */\n        e = APR_BRIGADE_FIRST(bb);\n        while (1) {\n            apr_status_t rc;\n            if (e == APR_BRIGADE_SENTINEL(bb))\n                return ap_pass_brigade(f->next, bb);\n            if (APR_BUCKET_IS_EOS(e)) {\n                ap_remove_output_filter(f);\n                return ap_pass_brigade(f->next, bb);\n            }\n            if (APR_BUCKET_IS_METADATA(e))\n                continue;\n\nIf there is no filter context yet and the passed brigade contains only a metadata bucket (a flush bucket for example) the \"continue\" statement is hit without changing \"e\". Hence, it enters an infinite loop.\n\nThe last \"if\" statement should read as follows to fix the problem:\n\n            if (APR_BUCKET_IS_METADATA(e)) {\n                e = APR_BUCKET_NEXT(e);\n                continue;\n            }", "id": 148289, "time": "2011-07-30T15:22:42Z", "bug_id": 51590, "creation_time": "2011-07-30T15:22:42Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 51590, "is_private": false, "id": 148328, "time": "2011-08-01T21:52:42Z", "creator": "sf@sfritsch.de", "creation_time": "2011-08-01T21:52:42Z", "tags": [], "text": "Good catch. Fixed in r1152943. Added a test in r1152942.\n\nHow common is the situation that there are (non-EOS) metadata buckets before any data buckets? In your opinion, is this bug a showstopper for the 2.3.14 beta release?"}, {"count": 2, "attachment_id": null, "creator": "sf@sfritsch.de", "is_private": false, "id": 154255, "time": "2012-02-26T17:12:51Z", "bug_id": 51590, "creation_time": "2012-02-26T17:12:51Z", "tags": [], "text": "fixed in 2.4.1"}]