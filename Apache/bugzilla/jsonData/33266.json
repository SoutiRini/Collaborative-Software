[{"count": 0, "tags": [], "text": "Since it is possible to place a DS definition in a web applications context.xml\nfile, it would be also nice if tomcat was able to create such a datasource\nwithout having any jars placed in common/lib. Therefore the webapp classloader\nshould be consulted for driver's classes first. This would provide truly\nself-contained war archives.", "attachment_id": null, "bug_id": 33266, "id": 70157, "time": "2005-01-27T10:21:32Z", "creator": "drzewo@post.pl", "creation_time": "2005-01-27T10:21:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 33266, "attachment_id": null, "is_private": false, "id": 70329, "time": "2005-02-01T21:30:27Z", "creator": "yoavs@computer.org", "creation_time": "2005-02-01T21:30:27Z", "text": "If you want those, don't use container-managed datasources, but define your \nown."}, {"count": 2, "tags": [], "text": "Sure, I get it, its not a discomfort for me to place the driver in common/lib or\ndefine my own DS. But condider the following: \n\n<Context reloadable=\"true\" override=\"true\" >\n\n    <Resource name=\"jdbc/postgres\" auth=\"Container\"\n        type=\"javax.sql.DataSource\" ... />\n\n    <Realm className=\"org.apache.catalina.realm.DataSourceRealm\"\n        dataSourceName=\"jdbc/postgres\" ... localDataSource=\"true\" />\n\n</Context>\n\nWhat I am trying to say, is that it *would be* nice that the context realm and\napplication could share the same DS. Provided that there is a localDataSource\nattribute in the realm, means that it is possible to use a local datasource,\nwhich in turn renders unusable due to NoClassDefFoundError. I consider this a\nslight inconsistency. \n\nStill, I consider this issue as a low priority enhancement rather than a bug.", "is_private": false, "id": 70352, "creator": "drzewo@post.pl", "time": "2005-02-02T09:41:35Z", "bug_id": 33266, "creation_time": "2005-02-02T09:41:35Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "drzewo@post.pl", "attachment_id": null, "id": 72712, "time": "2005-03-20T02:17:16Z", "bug_id": 33266, "creation_time": "2005-03-20T02:17:16Z", "is_private": false, "text": "I noticed that there's at least one more person out there that would appreciate\nloading driver classes from the webapp classloader (provided that it is possible\nwith the current tomcat architecture) - see bug\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=34081. This bug has been\nclosed without having explained why. A \"As designed\" comment is self explanatory\nindeed, but what prevents developers from reconsidering the design. I feel that\nthe example provided as a comment #2 is a good rationale. Therefore, i decided\nto reopen the issue and change the severity to normal rather than the enhancement."}, {"count": 4, "tags": [], "creator": "drzewo@post.pl", "attachment_id": null, "id": 53949, "time": "2005-03-21T08:41:45Z", "bug_id": 33266, "creation_time": "2005-03-21T08:41:45Z", "is_private": false, "text": "Any comment why this won't be fixed would be nice. Maybe the one that is\nperfectly obvious to *you* but not to me and the others? I see pros only, give\nme at least one example of cons. Reopening the issue as this will make somebody\ntake a look at it and hopefully comment it. I'm not whining ;)"}, {"count": 5, "tags": [], "text": "This is a container service. Please do not reopen the report. If you disagree,\nit's easy to implement and use your own factory to do what you want.", "is_private": false, "id": 53141, "creator": "remm@apache.org", "time": "2005-03-21T09:46:23Z", "bug_id": 33266, "creation_time": "2005-03-21T09:46:23Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "(In reply to comment #5)\n> This is a container service. \n??? It is. So what? \n\n> Please do not reopen the report. If you disagree,\n> it's easy to implement and use your own factory to do what you want.\nI won't reopen (though I'm tempted to, as this comment will be left unanswered)\nand I disagree.\nWhy wouldn't you like everyone to benefit from the change?\nIs there any performance impact related with this? Any enormous effort on\ncoding? Any fundamental change in the architecture? Any violation of servlet\nspecs? I don't think so.\n\nMy proposal is the natural continuation of the works made on context.xml files \nplaced in WAR'S META-INF subdir. It is possible to define a DataSource and\nreferring DataSourceRealm in such a file, but they all render *useless* without\napropriate JDBC driver. Please reconsider your rejection. And be more\ndescriptive in your comments if you want people be less persistent in their whining.\n\n", "attachment_id": null, "id": 52391, "creation_time": "2005-03-21T11:31:39Z", "time": "2005-03-21T11:31:39Z", "creator": "drzewo@post.pl", "bug_id": 33266, "is_private": false}]