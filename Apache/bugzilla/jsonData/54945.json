[{"count": 0, "tags": [], "bug_id": 54945, "text": "Necessary to avoid losing test data if kill or CTRL+C are called with the following setting (available since JMETER 2.10)\njmeter.save.saveservice.autoflush=false", "id": 167115, "time": "2013-05-09T14:36:29Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-05-09T14:36:29Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 54945, "attachment_id": 30267, "is_private": false, "id": 167116, "time": "2013-05-09T14:56:01Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-05-09T14:56:01Z", "text": "Created attachment 30267\nDraft of patch\n\nHello,\nAttached is a first proposal of Shutdown Hook implementation.\nI had to add a join on StopThread otherwise it can happen exit occurs before thread is started.\n\nAnyway there is still an issue as if shutodwn of threads takes more than jmeterengine.threadstop.wait (ThreadGroup#WAIT_TO_DIE) then it can happen that close will not be called on PrintWriter."}, {"count": 2, "tags": [], "bug_id": 54945, "attachment_id": null, "is_private": false, "id": 167117, "time": "2013-05-09T15:36:32Z", "creator": "sebb@apache.org", "creation_time": "2013-05-09T15:36:32Z", "text": "Note: the code in 2.9 and before used autoflush = true"}, {"count": 3, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "is_private": false, "id": 167118, "time": "2013-05-09T16:13:30Z", "bug_id": 54945, "creation_time": "2013-05-09T16:13:30Z", "text": "Note that the shutdown hook is run even if JMeter shuts down normally.\nIn which case it should not call engine.stop(true).\n\nI wonder if it would be better to implement the shutdown hook in ResultCollector instead.\n\nThat might avoid some of the problems?"}, {"count": 4, "attachment_id": null, "bug_id": 54945, "text": "Nice idea sebb.\nI commited this way.\n\nDate: Thu May  9 20:32:55 2013\nNew Revision: 1480762\n\nURL: http://svn.apache.org/r1480762\nLog:\nBug 54945 - Add Shutdown Hook to enable trapping kill or CTRL+C signals\nBugzilla Id: 54945\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/reporters/ResultCollector.java\n    jmeter/trunk/xdocs/changes.xml", "id": 167123, "time": "2013-05-09T20:33:44Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-05-09T20:33:44Z", "tags": [], "is_private": false}]