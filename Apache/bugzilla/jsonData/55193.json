[{"count": 0, "tags": [], "bug_id": 55193, "text": "Created attachment 30532\nFall back to ap_server_conf for ErrorLogFormat\n\nModules that do not provide s->module_config (such as mod_cgid) completely bypass any ErrorLogFormat directives and get the default error log format applied to all error messages generated by them.\n\nPossible solution is to drop back to ap_server_conf->module_config where available (patch enclosed)", "id": 168259, "attachment_id": 30532, "creator": "apache-b6e@deemzed.uk", "creation_time": "2013-07-03T14:02:09Z", "time": "2013-07-03T14:02:09Z", "is_private": false}, {"count": 1, "tags": [], "creator": "apache-b6e@deemzed.uk", "attachment_id": null, "text": "Update to report: the bug applies to all logging that uses ap_log_perror().\n\nErrorLogFormat is not applied when using ap_log_perror(): no server_rec is passed to log_error_core(), meaning sconf is never set and therefore sconf->error_log_format not used.\n\nMuch more elegant solution than proposed patch is simply to supply ap_server_core inside ap_log_perror_() in server/log.c:\n\n-    log_error_core(file, line, module_index, level, status, NULL, NULL, NULL,\n+    log_error_core(file, line, module_index, level, status, ap_server_core, NULL, NULL,\n\n(fixes for me)", "id": 168314, "time": "2013-07-05T19:39:14Z", "bug_id": 55193, "creation_time": "2013-07-05T19:39:14Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 55193, "text": "Created attachment 30551\nFix ErrorLogFormat in ap_log_perror()", "id": 168317, "attachment_id": 30551, "creator": "apache-b6e@deemzed.uk", "creation_time": "2013-07-05T19:58:50Z", "time": "2013-07-05T19:58:50Z", "is_private": false}]