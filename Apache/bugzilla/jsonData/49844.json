[{"count": 0, "tags": [], "creator": "p.org@gmx.at", "is_private": false, "text": "I could not find any OFFICIAL (=within Apache domains) documentation/explanation of the logging format generated through the directive \"RewriteLog\", nor useful INOFFICIAL (=external) resources.\n\nThe first place where I would expected it:\nhttp://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritelog\n\nNeither was I lucky at:\nhttp://wiki.apache.org/httpd/Logs\nhttp://httpd.apache.org/docs/2.2/mod/mod_log_config.html\n\nAnd googling for various combinations of these key words:\nFormat understand explained Apache RewriteLog rewrite log\nalso did not deliver useful results! Only unanswered forum questions such as:\nhttp://stackoverflow.com/questions/2023959/understanding-apache-rewritelog\n\nPlease add OFFICIAL documentation, and please meanwhile point me to an INOFFICIAL ressource, if you know any. Thanks!", "id": 139554, "time": "2010-08-30T08:12:02Z", "bug_id": 49844, "creation_time": "2010-08-30T08:12:02Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "ww.galen@gmail.com", "attachment_id": null, "text": "As a start, here's the printf format and description of the fields, extracted from mod_rewrite (http://svn.apache.org/viewvc/httpd/httpd/trunk/modules/mappers/mod_rewrite.c?view=markup#l437):\n\n\"%s %s %s [%s/sid#%pp][rid#%pp/%s%s%s] %s%s%s%s\"\n\n  remote host,\n  remote login name,\n  HTTP user,\n\n  HTTP host,\n  virtual host ID (a memory address),\n\n  request ID (a memory address),\n  subrequest or initial request,\n  count of internal redirects,\n\n  directory (if from a per-directory rewrite),\n  text\n\nI'm not sure how best to write that up, since custom log formatting doesn't support some of those fields. It's approximately:\n\n  %h %l %u [%V/sid#$sid][rid#$rid/(initial|subreq){/redir#$rcount}] {[perdir $dir]} $msg\n\n\"()\" indicates grouping, \"{}\" indicates a field that may not be present, and \"$\" starts a field that doesn't have a custom log format specifier.", "id": 140003, "time": "2010-09-21T04:44:18Z", "bug_id": 49844, "creation_time": "2010-09-21T04:44:18Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 49844, "text": "PROPOSAL FOR HOW TO WRITE UP THE DOCUMENTATION:\n(How I, from the user perspective, would like to have it)\n\n1) Log line format (as you wrote it)\n2) Syntax annotations for (1) (as you wrote it)\n3) A table which describes all the variable names, like at:\nhttp://httpd.apache.org/docs/current/mod/mod_log_config.html#formats\n4) Some sample lines, as examples are always good for understanding!\n\n\nFURTHER QUESTIONS:\n\nQ.1) My log lines, as generated by httpd 2.0.63, look a bit different than yours. I try to show you its syntax, using pseudo variables for the observed differences:\n\n%h %l %u [$date] [%V/sid#$sid][rid#$rid/(initial|subreq)] {\\($rcount\\)} {[perdir\n$dir]} $msg\n\n[$date] A date with a formatting like [30/Aug/2010:16:14:34 +0200]\n{\\($rcount\\)} The optional counter comes AFTER the square brackets which enclose the request ID group, within LITERAL round brackets, i.e. (3).\n\nQ.2) How shall I interpret $rcount?\nIf I see this counter in a log line, does it mean:\na) This log line represents the N-th cycle of an internal redirect?\nor\nb) In the process logged in this line, httpd has used N internal redirects?\n\nI ain't sure, as my subsequent log lines show $rcount numerical series like:\n2,3,5,4,4,5,4,2,2,1,1,2,3,1,...\nwhich are more logically explained by (b) as (a) would create numerical series, which steadily increase, and at the end fall back to 1, like:\n1,2,3,1,2,3,4,1,2,1,2,3,...\n\n\nTHANKS for answers in advance!", "id": 140013, "time": "2010-09-21T07:33:09Z", "creator": "p.org@gmx.at", "creation_time": "2010-09-21T07:33:09Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "rbowen@apache.org", "text": "Moving docs bugs to docs@httpd.a.o ownership.", "id": 141211, "time": "2010-10-29T11:06:57Z", "bug_id": 49844, "creation_time": "2010-10-29T11:06:57Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "rbowen@apache.org", "is_private": false, "id": 141289, "creation_time": "2010-10-31T18:49:49Z", "time": "2010-10-31T18:49:49Z", "bug_id": 49844, "text": "Now that RewriteLog has gone away, this should probably go into the Logging section of the mod_rewrite docs. But we should probably add something in the 2.2 docs.", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 49844, "attachment_id": null, "is_private": false, "id": 141290, "time": "2010-10-31T19:04:07Z", "creator": "rbowen@apache.org", "creation_time": "2010-10-31T19:04:07Z", "text": "Added in r1029508 for 2.2. Still trying to figure out what we need to do for trunk."}, {"count": 6, "tags": [], "text": "(In reply to comment #5)\nDear Richard: I had a look at the referenced documentation HTML file, and have to say that's an improvement to the old doc. It might need some overlooking as your format explanations partially differ/contradict with those of ww.galen (from comment #1)\n\n1) \"Virtual host ID\" suffixed with \"(a memory address)\" in brackets, as this is a good extra information (if in deed true).\n2) \"Log entry severity level\" contrary to ww.galen's \"count of internal redirects\"\n3) \"Directory (if from a per-directory rewrite)\" missing before \"Text error message\"", "is_private": false, "id": 141298, "creator": "p.org@gmx.at", "time": "2010-11-01T10:15:10Z", "bug_id": 49844, "creation_time": "2010-11-01T10:15:10Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "(In reply to comment #6)\n> (In reply to comment #5)\n> Dear Richard: I had a look at the referenced documentation HTML file, and have\n> to say that's an improvement to the old doc. It might need some overlooking as\n> your format explanations partially differ/contradict with those of ww.galen\n> (from comment #1)\n\nThanks. I'll take another look at that.\n\n> 1) \"Virtual host ID\" suffixed with \"(a memory address)\" in brackets, as this is\n> a good extra information (if in deed true).\n\nI don't think it is, but I'll investigate further. I left it out specifically because I don't think it's true.\n\n> 2) \"Log entry severity level\" contrary to ww.galen's \"count of internal\n> redirects\"\n\nIt's the log entry severity level. It corresponds to the value set in RewriteLogLevel. It is not a count of internal redirects.\n\n> 3) \"Directory (if from a per-directory rewrite)\" missing before \"Text error\n> message\"\n\nYeah. Things do look a little different in a per-directory rewrite. I'll try to clarify that.", "is_private": false, "id": 141299, "creator": "rbowen@apache.org", "time": "2010-11-01T10:30:22Z", "bug_id": 49844, "creation_time": "2010-11-01T10:30:22Z", "attachment_id": null}, {"count": 8, "attachment_id": null, "bug_id": 49844, "text": "having looked at the code, I think that what we have is correct and complete. The log message is free-form text, and as such I'm not sure we want to document all possible permutations in this page.", "id": 141402, "time": "2010-11-04T11:17:32Z", "creator": "rbowen@apache.org", "creation_time": "2010-11-04T11:17:32Z", "tags": [], "is_private": false}]