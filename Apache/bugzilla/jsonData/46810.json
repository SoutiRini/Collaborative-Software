[{"count": 0, "tags": [], "creator": "kristen.glynn@virginblue.com.au", "attachment_id": 23345, "id": 125361, "time": "2009-03-05T21:40:10Z", "bug_id": 46810, "creation_time": "2009-03-05T21:40:10Z", "is_private": false, "text": "Created attachment 23345\nhttpd-2.2.11 config.log\n\nOverview:\nBuilding/compiling/installing httpd-2.2.11 completes 100% but executing \"apache/bin/apu-1-config --includes\" displays incorrect details.\n\nSteps to Reproduce:\n\nhttpd-2.2.11 configure options:\n\nenv CPPFLAGS=\"-I/data/wwwmgmt3/apache/include -I/data/wwwmgmt3/apache/include/openssl\" LDFLAGS=\"-L/data/wwwmgmt3/apache/lib -R/data/wwwmgmt3/apache/lib\" ./configure --prefix=/data/wwwmgmt3/apache --enable-so --enable-deflate --enable-proxy --enable-authn-anon --enable-authn-dbm --enable-auth-digest --enable-ldap --enable-authnz-ldap  --enable-ssl --enable-dav --enable-dav-fs --enable-rewrite --enable-so --with-ssl=/data/wwwmgmt3/apache --with-z=/data/wwwmgmt3/apache --enable-mods-shared=all --with-ldap --with-berkeley-db=/data/wwwmgmt3/apache/lib --with-included-apr\n\nThen run - \"/data/wwwmgmt3/apache/bin/apu-1-config --includes\"\n\nActual Results:\n\n-I/data/wwwmgmt3/apache/include /include\n\nExpected Results:\n\n-I/data/wwwmgmt3/apache/include\n\nBuild Date & Platform:\n\nFri Mar 6 15:11:06 EST 2009\nCentOS release 3.8 (Final)\nLinux 2.4.21-47.0.1.ELsmp #1 SMP Thu Oct 19 11:33:45 EDT 2006 i686 i686 i386 GNU/Linux\n\nAdditional Information:\n\nThe incorrect results of apu-1-config causes 3rd party modules to build incorrectly since it is passing the following in my instance to 3rd party modules Makefiles via apxs\n\nExample 1. - mod_ntlm2\n\n[mod_ntlm2]# make\n/data/wwwmgmt3/apache/bin/apxs -c -o mod_ntlm.so -Wc,-shared mod_ntlm.c\n/data/wwwmgmt3/apache/build/libtool --silent --mode=compile gcc -prefer-pic   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -g -O2 -pthread -I/data/wwwmgmt3/apache/include  -I/data/wwwmgmt3/apache/include   -I/data/wwwmgmt3/apache/include /include -shared  -c -o mod_ntlm.lo mod_ntlm.c && touch mod_ntlm.slo\ngcc: cannot specify -o with -c or -S and multiple compilations\napxs:Error: Command failed with rc=65536\n.\nmake: *** [mod_ntlm.so] Error 1\n\nExample 2. - php-5.2.9\n\n/bin/sh /home/glynnk/workdir/my_web/php-5.2.9/libtool --silent --preserve-dup-deps --mode=compile gcc  -I/data/wwwmgmt3/apache/include   -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/data/wwwmgmt3/apache/include   -I/data/wwwmgmt3/apache/include /include -Isapi/apache2handler/ -I/home/glynnk/workdir/my_web/php-5.2.9/sapi/apache2handler/ -DPHP_ATOM_INC -I/home/glynnk/workdir/my_web/php-5.2.9/include -I/home/glynnk/workdir/my_web/php-5.2.9/main -I/home/glynnk/workdir/my_web/php-5.2.9 -I/data/wwwmgmt3/apache/include/libxml2 -I/data/wwwmgmt3/apache/include -I/home/glynnk/workdir/my_web/php-5.2.9/ext/date/lib -I/usr/X11R6//include -I/data/wwwmgmt3/apache/include/freetype2 -I/data/wwwmgmt3/apache/include/mysql -I/usr/include/oracle/10.2.0.3/client -I/home/glynnk/workdir/my_web/php-5.2.9/TSRM -I/home/glynnk/workdir/my_web/php-5.2.9/Zend    -I/usr/include -g -O2  -prefer-non-pic -c /home/glynnk/workdir/my_web/php-5.2.9/sapi/apache2handler/mod_php5.c -o sapi/apache2handler/mod_php5.lo \n\n\nAs you can see in the examples above /include appears which it shouldn't (as I don't even have a /include dir and never passed options to include it) and it is also lacking a -I proceeding it anyway which obviously causes gcc to fail since \"/include\" does not exist and because it is not proceeded with -I\n\nmake --version\nGNU Make 3.80\n\ngcc --version\ngcc (GCC) 3.2.3 20030502 (Red Hat Linux 3.2.3-56)\n\nhttpd-2.2.11 config.log attached.\n\nInterestingly apr-1-config (not apu-1-config) outputs correct results..\n\nCommand: /data/wwwmgmt3/apache/bin/apr-1-config --includes\nOutput: -I/data/wwwmgmt3/apache/include"}]