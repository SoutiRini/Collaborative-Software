[{"count": 0, "tags": [], "creator": "johan.vromans@nl.compuware.com", "is_private": false, "text": "To increase the usefulness of the import task, I propose to add an optional\nboolean attribute \"float\" with the following semantics, if set: if the named\nfile to be imported cannot be found, retry one level higher in the file\nhierarchy, and so on. This makes it possible to put common files (with common\nproperties, taskdefs etc.) somewhere higher in the file tree, so that all build\nscripts can load them without actually knowing the exact path to the file.\n\nThis is quite similar to the --find command line option, although in this case\nthe complete name of the file is used instead of just the final part. For\nexample, when the following import\n\n    <import file=\"x/common.xml\" float=\"true\"/>\n\nwere used from /a/b/c/d/build.xml, the following file names would be tried:\n\n    /a/b/c/d/x/common.xml\n    /a/b/c/x/common.xml\n    /a/b/x/common.xml\n    ...\n\nIf a file is find, the search is terminated.\n\nAn example implementation (diff to the 1.6.1. source tree) is attached.", "id": 55809, "time": "2004-04-15T08:13:09Z", "bug_id": 28403, "creation_time": "2004-04-15T08:13:09Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 28403, "attachment_id": 11246, "text": "Created attachment 11246\nExample implementation", "id": 55810, "time": "2004-04-15T08:15:50Z", "creator": "johan.vromans@nl.compuware.com", "creation_time": "2004-04-15T08:15:50Z", "is_private": false}, {"count": 2, "tags": [], "creator": "stevel@apache.org", "is_private": false, "text": "It's an interesting idea, but one that worries me as it could be confusing.\n\nI'd be happier with the option of giving a path to import, with the first one\nfound in the path being picked up. \n\nWhat do you think of that option?", "id": 55812, "time": "2004-04-15T09:23:08Z", "bug_id": 28403, "creation_time": "2004-04-15T09:23:08Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "johan.vromans@nl.compuware.com", "text": "That would be nice as well, but it would require fixed locations (hard-wired\npath names) which is what we try to avoid. However, in most cases, an import\npath of \".:..:../..:../../..:../../../..\" would be sufficient to emulate the\n\"float\" behaviour to the extent needed.\n\nDo you envision the path setting as an import task attribute, or as a property\nsetting?", "id": 55816, "time": "2004-04-15T10:44:41Z", "bug_id": 28403, "creation_time": "2004-04-15T10:44:41Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "j_a_fernandez@yahoo.com", "text": "If we add a search-path for imports, please make sure it is not an attribute\nbut a <path/> element (and of course a corresponding \"pathref\" attribute).\n\nThis would be not only for consistence, but it will also allow writing custom\nPath implementation that does what the original user wanted (i.e., it will\nreport path elements that go all the way back to the root of the filesystem).\n\nSo could easily get the best of both worlds. :-)\n", "id": 55821, "time": "2004-04-15T11:48:36Z", "bug_id": 28403, "creation_time": "2004-04-15T11:48:36Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 28403, "attachment_id": null, "text": "I'd go for a path/pathref. My use case for it would be in smartfrog.org's build,\nwhere we have separate components that we want to redist (with source), but\nwhich all depend on ..\\..\\common.xml that they import. So I'd have the release\nscript copy that file into the base dir of the archive, then have \n<import file=\"common.xml\">\n<path path=\"../..;.\" />\n</import>\nand have it picked up in the parent dir first. This is why it would be more\npowerful than a simple 'float' attr; it would be more like the include path used\nin C/C++ inclusion.", "id": 55830, "time": "2004-04-15T14:22:10Z", "creator": "stevel@apache.org", "creation_time": "2004-04-15T14:22:10Z", "is_private": false}, {"count": 6, "tags": [], "creator": "peter.reilly@corvil.com", "is_private": false, "text": "The path nested element is pretty powerful, it also\ncovers my use-case:\n<import file=\"common.xml\">\n  <path path=\".:${user.home}/.ant/importfiles:${ant.home}/importfile\"/>\n</import>\n\nThis could be a (standard) presetdef\n<presetdef name=\"findimport\">\n  <import>\n     <path>\n       <pathelement path=\".:..:../..:../../..:../../../..\"/>\n       <pathelement path=\"${user.home}/.ant/importfiles\"/>\n       <pathelement path=\"${ant.home}/.ant/importfiles\"/>\n     </path>\n   </import>\n<presetdef>\n\n<findimport file=\"common.xml\"/>\n", "id": 55835, "time": "2004-04-15T15:36:04Z", "bug_id": 28403, "creation_time": "2004-04-15T15:36:04Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 28403, "attachment_id": null, "text": "Check out 'bug' 22269.  It proposes adding '<fileset/>' to the import task.", "id": 56585, "time": "2004-04-28T22:38:56Z", "creator": "Spindizzy_Wizard@yahoo.com", "creation_time": "2004-04-28T22:38:56Z", "is_private": false}, {"count": 8, "tags": [], "creator": "johan.vromans@nl.compuware.com", "text": "http://marc.theaimsgroup.com/?l=ant-user&m=108246877104481&w=2", "id": 56611, "time": "2004-04-29T07:20:40Z", "bug_id": 28403, "creation_time": "2004-04-29T07:20:40Z", "is_private": false, "attachment_id": null}]