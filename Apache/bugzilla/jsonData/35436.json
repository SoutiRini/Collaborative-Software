[{"count": 0, "attachment_id": null, "creator": "rainer@noacks.net", "text": "Calling getParent() on oata.AntClassLoader doesn't return the - expected - \nactual parent classloader but allways the SystemClassLoader.\n\nThe Reason is simple:\nParent-Property is immutuable in java.lang.ClassLoader and getParent() is \nfinal.\nAntClassLoader has a local, mutuable parent property that can be set via \nsetParent(ClassLoader).\n\nHowever, there should be a way to get AntClassLoader's real parent loader.\n\nI see two solutions:\n1. Remove the local property and it's setter-method. Allow setting of the\n   parent only in the constructors. Use ClassLoader's parent property.\n   Advantages: IMHO, the cleanest solution.\n   Disadvantages: Many build brakes.\n   Fazit: Not usable\n2. Provide a \"special\" getter like getRealParent()\n   Advantages: works with existing environments.\n   Disadvantages: such a shame\n   Fazit: No better way !?\n\nAny other idea?\n\nRegards\n\nRainer", "id": 76564, "time": "2005-06-20T21:59:42Z", "bug_id": 35436, "creation_time": "2005-06-20T21:59:42Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 35436, "is_private": false, "id": 92946, "time": "2006-09-03T16:44:27Z", "creator": "peterreilly@apache.org", "creation_time": "2006-09-03T16:44:27Z", "tags": [], "text": "This will be fixed in ant 1.7.\nI have added a new constructor to set the parent\nclassloader and made all the other constructors\ndeprecated.\n\nI have not converted all uses to use the new constructor\n(since some of them do strange things), however I have\nmodifed the setParent() to use reflection to\nattempt to set the private field of the super class to \nthe new parent."}, {"count": 2, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "text": "The change had to be reverted as it did work\nfor java 1.4 and lower.\n\nIn java 5, ClassLoader.getResources() is protected,\nin java 1.4, it is private.\n", "id": 93038, "time": "2006-09-05T13:15:46Z", "bug_id": 35436, "creation_time": "2006-09-05T13:15:46Z", "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 35436, "text": "(In reply to comment #2)\n> The change had to be reverted as it did work\n> for java 1.4 and lower.\n> \n> In java 5, ClassLoader.getResources() is protected,\n> in java 1.4, it is private.\n> \n\nCan Dale Anson's \"object rape\" technique (see ac Variable task) be used here?", "id": 93045, "time": "2006-09-05T14:01:33Z", "creator": "mbenson@apache.org", "creation_time": "2006-09-05T14:01:33Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 35436, "text": "No, one would have to change the class itself, not\nthe use of the class. Well.., we could do this, but\nit would mess up the JDK rt.jar file.....\n\nUsers call classloader.getResources() to get the resources.\nAs ClassLoader.getResources() is final in java 1.4 (but not\nin java 5), AntClassLoader cannot have a getResources() method.\nIt has to fake the getResources by not having a parent as seen\nby ClassLoader.getResources(). ", "id": 93048, "time": "2006-09-05T14:34:45Z", "creator": "peterreilly@apache.org", "creation_time": "2006-09-05T14:34:45Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "id": 93049, "time": "2006-09-05T14:36:17Z", "bug_id": 35436, "creation_time": "2006-09-05T14:36:17Z", "is_private": false, "text": "Opps, hit the wrong button... reopen"}, {"count": 6, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of bug 46759 ***", "attachment_id": null, "id": 125085, "creation_time": "2009-02-23T05:18:36Z", "time": "2009-02-23T05:18:36Z", "creator": "bodewig@apache.org", "bug_id": 35436, "is_private": false}, {"id": 129039, "tags": [], "bug_id": 35436, "attachment_id": null, "count": 7, "text": "the getResources issue is fixed in the Java5 case now.\n\nI don't think we would achieve much by setting ClassLoader.parent since we'd still have to deal with parentFirst and setIsolated in a way incompatible with the base implementation.\n\nIn order to close this issue I've simply added a getConfiguredParent method in svn revision 796649", "time": "2009-07-22T02:51:53Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-22T02:51:53Z", "is_private": false}]