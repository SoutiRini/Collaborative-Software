[{"count": 0, "tags": [], "bug_id": 56483, "attachment_id": null, "id": 174986, "time": "2014-05-02T15:49:20Z", "creator": "brett.okken.os@gmail.com", "creation_time": "2014-05-02T15:49:20Z", "is_private": false, "text": "The tomcat7 http connector[1] has a configuration for disableKeepAlivePercentage which will stop allowing keep alive when a certain percentage of the available connections are in use. This would be a nice feature for httpd to allow for managing keep alive also.\n\n[1] - https://tomcat.apache.org/tomcat-7.0-doc/config/http.html"}, {"count": 1, "tags": [], "bug_id": 56483, "attachment_id": null, "id": 174988, "time": "2014-05-02T16:15:47Z", "creator": "covener@gmail.com", "creation_time": "2014-05-02T16:15:47Z", "is_private": false, "text": "Probably only useful on non-event MPM, I am surprised tomcat ties up a thread w/ each keepalive connection. Am I misunderstanding the feature?"}, {"count": 2, "tags": [], "text": "The goal (at least from my perspective) is more about protecting from running out of available connections during a spike in requests because of connections being held open by keep alive.", "attachment_id": null, "id": 174994, "creator": "brett.okken.os@gmail.com", "time": "2014-05-02T18:10:54Z", "bug_id": 56483, "creation_time": "2014-05-02T18:10:54Z", "is_private": false}, {"count": 3, "tags": [], "text": "Tomcat has three connectors, Blocking I/O (BIO) which uses one thread per connection, NIO which maps active connections to threads and APR which uses the native APR libs to achieve the same goal.\n\nOnly the first connector has a problem with HTTP Keep-Alive and thread use and only the first connector implements disableKeepAlivePercentage. Default value is 75 (%) meaning that if 75% of the threads are tied to connections any new connection has Keep-Alive set to off.\n\nCould be interesting for any MPM except event(opt).", "is_private": false, "bug_id": 56483, "id": 175004, "time": "2014-05-03T03:03:57Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2014-05-03T03:03:57Z", "attachment_id": null}]