[{"count": 0, "tags": [], "bug_id": 43705, "attachment_id": null, "id": 109789, "time": "2007-10-26T06:42:56Z", "creator": "mad@wol.de", "creation_time": "2007-10-26T06:42:56Z", "is_private": false, "text": "Hello,\n\ni think fop should parse and initialize <fo:declarations> before\n<fo:layout-master-set> to fix this issue.\n\nI'll attach the fo-document.\n\nI havn't tested trunk on this so this might be fixed already.\nIs there a binary snapshot anywhere?\n\nSteps to reproduce:\n\nfop demo.fo demo.pdf\n\nOutputs on my System:\n\nOct 26, 2007 3:17:46 PM org.apache.fop.cli.Main startFOP\nSEVERE: Exception\njava.lang.NullPointerException\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:168)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:166)\n        at org.apache.fop.cli.Main.main(Main.java:197)\n\n---------\n\njava.lang.NullPointerException\n        at org.apache.fop.fo.expr.ICCColorFunction.eval(ICCColorFunction.java:49)\n        at\norg.apache.fop.fo.expr.PropertyParser.parsePrimaryExpr(PropertyParser.java:319)\n        at\norg.apache.fop.fo.expr.PropertyParser.parseUnaryExpr(PropertyParser.java:211)\n        at\norg.apache.fop.fo.expr.PropertyParser.parseMultiplicativeExpr(PropertyParser.java:176)\n        at\norg.apache.fop.fo.expr.PropertyParser.parseAdditiveExpr(PropertyParser.java:150)\n        at\norg.apache.fop.fo.expr.PropertyParser.parseProperty(PropertyParser.java:124)\n        at org.apache.fop.fo.expr.PropertyParser.parse(PropertyParser.java:90)\n        at org.apache.fop.fo.properties.PropertyMaker.make(PropertyMaker.java:437)\n        at\norg.apache.fop.fo.PropertyList.convertAttributeToProperty(PropertyList.java:411)\n        at org.apache.fop.fo.PropertyList.addAttributesToList(PropertyList.java:313)\n        at org.apache.fop.fo.FObj.processNode(FObj.java:121)\n        at\norg.apache.fop.fo.FOTreeBuilder$MainFOHandler.startElement(FOTreeBuilder.java:320)\n        at org.apache.fop.fo.FOTreeBuilder.startElement(FOTreeBuilder.java:185)\n        at\norg.apache.xalan.transformer.TransformerIdentityImpl.startElement(TransformerIdentityImpl.java:1072)\n        at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)\n        at\norg.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at\norg.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:484)\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:165)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:166)\n        at org.apache.fop.cli.Main.main(Main.java:197)"}, {"count": 1, "tags": [], "bug_id": 43705, "attachment_id": 21050, "id": 109790, "time": "2007-10-26T06:45:42Z", "creator": "mad@wol.de", "creation_time": "2007-10-26T06:45:42Z", "is_private": false, "text": "Created attachment 21050\nMy test fo-document\n\nThe icc-profile used can be downloaded here:\n\nhttp://www.eci.org/eci/downloads/ECI-de/iccprofile_der_eci/ECI_Offset_2007.zip"}, {"count": 2, "text": "(In reply to comment #0)\n\nSorry for the late reply.\n> \n> i think fop should parse and initialize <fo:declarations> before\n> <fo:layout-master-set> to fix this issue.\n\nNot really that simple, I'm afraid.\n\n> \n> I'll attach the fo-document.\n> \n> I havn't tested trunk on this so this might be fixed already.\n\nThe issue still exists (or rather: existed) in FOP Trunk, but has now been 'fixed', in the sense that I \ninterpret this case to be one where 'the color-profile is not available', and so the processor should \nrevert to the sRGB fallback specified by the first three arguments.\nsee: http://www.w3.org/TR/xsl11/#fo_color-profile\n\n> Is there a binary snapshot anywhere?\n\nUnfortunately not, but downloading the trunk source code and building with Ant is really very simple.\nSee: http://xmlgraphics.apache.org/fop/trunk/compiling.html\n\nand for the fix: http://svn.apache.org/viewvc?rev=617989&view=rev\n\nThanks for reporting!", "bug_id": 43705, "attachment_id": null, "id": 113394, "time": "2008-02-03T06:13:21Z", "creator": "adelmelle@apache.org", "creation_time": "2008-02-03T06:13:21Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 43705, "attachment_id": null, "id": 155971, "time": "2012-04-01T06:51:01Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:51:01Z", "is_private": false, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed"}]