[{"count": 0, "tags": [], "creator": "chuha.billi@gmail.com", "is_private": false, "text": "while trying to use the DurationAssertion as follows, I am getting a crash, looking into code and debugging it looks like the ResourceBundle object in method  private static String getResStringDefault(String key, String defaultValue, Locale forcedLocale) \n\nis null and hence crashing with null pointer exception. \n\nfollowing is the code that I am using\n\n\t\t// Create a JMeter \n\t\tThreadGroup threadGroup = jmeterTreeManager.createThreadGroup(\"TestCase1_Rest\", 1, 1);\n\t\tHashTree threadGroupHashTree = jmeterTreeManager.addThreadGroupToRootTree(testPlan, threadGroup);\n\n\t\t// Create HTTP Sampler \n\t\tHTTPSamplerProxy httpSampler = new HTTPSamplerProxy();\n\t\thttpSampler.setDomain(testConfigs.getDomain());\n\t\thttpSampler.setPort(Integer.parseInt(HTTPConstants.DEFAULT_HTTPS_PORT_STRING));\n\t\thttpSampler.setProtocol(HTTPConstants.PROTOCOL_HTTPS); \n\t\thttpSampler.setPath(\"api/\");\n\t\thttpSampler.setMethod(HTTPConstants.POST);\n\t\thttpSampler.addArgument(\"apikey\", testConfigs.getApiKey());\n\t\thttpSampler.setName(\"FixureRequest\");\n\t\thttpSampler.setProperty(TestElement.TEST_CLASS, HTTPSamplerProxy.class.getName());\n\t\thttpSampler.setProperty(TestElement.GUI_CLASS, HttpTestSampleGui.class.getName());\n\n\t\t// Get result from sampler\n\t\tHTTPSampleResult samplerResult = (HTTPSampleResult) httpSampler.sample();  \n\t\t\n\t\t// Create Response Assertion\n\t\tResponseAssertion responseAssertion = new ResponseAssertion();\n\t\tresponseAssertion.setName(\"ResponseAssertionForRest\");\n\t\t//responseAssertion.setTestFieldRequestHeaders();\n\t\tresponseAssertion.setTestFieldResponseData();\n\t\t\n\t\t/**note : Contains, Matches: Perl5-style regular expressions\n\t\t  *       Equals, Substring: plain text, case-sensitive\n\t\t*/\n\t\t\n\t\tresponseAssertion.setToSubstringType();\n\t\tresponseAssertion.addTestString(\"\\\"started\\\":false\");\n\t\tresponseAssertion.setEnabled(true);\n\t\t\n\n\t\t\n\t\t// Create Duration Assertion\n\t\tDurationAssertion durationAssertion = new DurationAssertion();\n\t\tdurationAssertion.setName(\"DurationAssertionForRest\");\n\t\tdurationAssertion.setScopeAll();\n\t\tdurationAssertion.setAllowedDuration(1);\n\t\tdurationAssertion.setEnabled(true);\n\n\t\t// Get assertion result from received response\n\t\tAssertionResult assertionResult = responseAssertion.getResult(samplerResult);\n\t\tAssertionResult durationAsserRes = durationAssertion.getResult(samplerResult);\n\nfollowing is the crash stack\n\njava.lang.NullPointerException\n\tat org.apache.jmeter.util.JMeterUtils.getResStringDefault(JMeterUtils.java:515)\n\tat org.apache.jmeter.util.JMeterUtils.getResStringDefault(JMeterUtils.java:496)\n\tat org.apache.jmeter.util.JMeterUtils.getResString(JMeterUtils.java:451)\n\tat org.apache.jmeter.assertions.DurationAssertion.getResult(DurationAssertion.java:57)\n\tat com.incontact.test.testsuite.jmeter.TestSuite_RestApiAccess.RestApi_TestCase1(TestSuite_RestApiAccess.java:100)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:108)\n\tat org.testng.internal.Invoker.invokeMethod(Invoker.java:661)\n\tat org.testng.internal.Invoker.invokeTestMethod(Invoker.java:869)\n\tat org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1193)\n\tat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:126)\n\tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)\n\tat org.testng.TestRunner.privateRun(TestRunner.java:744)\n\tat org.testng.TestRunner.run(TestRunner.java:602)\n\tat org.testng.SuiteRunner.runTest(SuiteRunner.java:380)\n\tat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:375)\n\tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:340)\n\tat org.testng.SuiteRunner.run(SuiteRunner.java:289)\n\tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\n\tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)\n\tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1301)\n\tat org.testng.TestNG.runSuitesLocally(TestNG.java:1226)\n\tat org.testng.TestNG.runSuites(TestNG.java:1144)\n\tat org.testng.TestNG.run(TestNG.java:1115)\n\tat org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:132)\n\tat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:230)\n\tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:76)", "id": 198567, "time": "2017-04-27T07:18:58Z", "bug_id": 61050, "creation_time": "2017-04-27T07:18:58Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Please ask such questions on user mailing lists.\n\nBugzilla is not a support forum.\nRegards", "attachment_id": null, "id": 198572, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2017-04-27T18:07:53Z", "bug_id": 61050, "creation_time": "2017-04-27T18:07:53Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 61050, "text": "Hi Phillippe,\n\nI understand the sentiment, but while digging up in the JMeter code I found out that in in Class JMeterUtils and method getResStringDefault the bundle is assigned the reference of resources object as ResourceBundle bundle = resources;, now the resources object is initialized only if the locale is set, if not set then the bundle is null and that then before accessing the bundle the check of it being not null is not checked. which causes the crash.\n\nnow if this is designed like this then setting locale is mandatory but if not then I think won't it be a good option to do a null check before using the object and if found null then setting locale using system default values.?? This was the query in my mind with which I raised the bug.", "id": 198580, "time": "2017-04-28T05:57:21Z", "creator": "chuha.billi@gmail.com", "creation_time": "2017-04-28T05:57:21Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "Thanks for feedback and analysis.\nReopening for fix.", "is_private": false, "id": 198581, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2017-04-28T06:16:10Z", "bug_id": 61050, "creation_time": "2017-04-28T06:16:10Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "felix.schumacher@internetallee.de", "attachment_id": 34966, "text": "Created attachment 34966\nGet a ResourceBundle, even if it hasn't been initialized, yet\n\nGet a ResourceBundle before we use it. If it has been initialized and no forcedLocal is given, use that. If it is forced, try to use the forced one, or use a fall back.", "id": 198611, "time": "2017-05-01T15:34:41Z", "bug_id": 61050, "creation_time": "2017-05-01T15:34:41Z", "is_private": false}, {"attachment_id": 34966, "tags": [], "bug_id": 61050, "is_private": false, "count": 5, "id": 198612, "time": "2017-05-01T15:40:45Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-05-01T15:40:45Z", "text": "Comment on attachment 34966\nGet a ResourceBundle, even if it hasn't been initialized, yet\n\nlooks good to me.\nThanks"}, {"count": 6, "tags": [], "creator": "felix.schumacher@internetallee.de", "attachment_id": null, "text": "Thanks for the report. Feel free to reopen this, if it is not fixed for you.\n\nThis will be included in JMeter version 3.3.\n\nDate: Sat May 20 14:21:26 2017\nNew Revision: 1795657\n\nURL: http://svn.apache.org/viewvc?rev=1795657&view=rev\nLog:\nHandle uninitialized RessourceBundle more gracefully.\n\nBugzilla Id: 61050\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/util/JMeterUtils.java\n    jmeter/trunk/test/src/org/apache/jmeter/util/TestJMeterUtils.java\n\nDate: Sat May 20 14:24:29 2017\nNew Revision: 1795658\n\nURL: http://svn.apache.org/viewvc?rev=1795658&view=rev\nLog:\nAdd changelog entry for: Handle uninitialized RessourceBundle more gracefully.\n\nBugzilla Id: 61050\n\nModified:\n    jmeter/trunk/xdocs/changes.xml", "id": 198832, "time": "2017-05-20T14:26:15Z", "bug_id": 61050, "creation_time": "2017-05-20T14:26:15Z", "is_private": false}]