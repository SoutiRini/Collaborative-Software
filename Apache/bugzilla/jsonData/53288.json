[{"count": 0, "tags": [], "creator": "anand.rashinkar@gmail.com", "attachment_id": null, "text": "OS : Windows 2008 R2 (64 bit)\nJRE : 1.6.10 (32 bit)\nTomcat 6.0.14 (32 bit)\nAlso tested with Tomcat version 6.0.35 (32 bit)\n\nTomcat intermittently doesn't start as a windows service and goes to Starting state instead.\n\nFollowing are log excerpts during startup for this issue.\n\n\n[2012-05-24 09:24:33] [debug] ( javajni.c:206 ) loading jvm 'C:\\Program Files (x86)\\Tomcat_Install\\IC72\\Java\\bin\\server\\jvm.dll'\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[0] -Dcatalina.base=C:\\Program Files (x86)\\Tomcat_Install\\IC72\\tomcat\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[1] -Dcatalina.home=C:\\Program Files (x86)\\Tomcat_Install\\IC72\\tomcat\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[2] -Djava.endorsed.dirs=C:\\Program Files (x86)\\Avaya\\IC72\\tomcat\\common\\endorsed\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[3] -Djava.io.tmpdir=C:\\Program Files (x86)\\Tomcat_Install\\IC72\\tomcat\\temp\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[4] -Xbootclasspath/a:C:\\Program Files (x86)\\Tomcat_Install\\IC72\\tomcat\\common\\lib\\mail.jar\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[5] -Dlog4j.configuration=log4j.xml\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[6] -Dlog4j.debug=true\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[7] -Dhome=C:\\Program Files (x86)\\Tomcat_Install\\IC72\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[8] -Djava.security.auth.login.config=C:\\Program Files (x86)\\Avaya\\IC72\\sdk\\cup.security\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[9] -Djava.class.path=C:\\Program Files (x86)\\Tomcat_Install\\IC72\\tomcat\\bin\\bootstrap.jar;.\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[10] -Xms256m\n[2012-05-24 09:24:33] [debug] ( javajni.c:660 ) Jvm Option[11] -Xmx768m\n[2012-05-24 09:24:34] [debug] ( javajni.c:844 ) argv[0] = -config\n[2012-05-24 09:24:34] [debug] ( javajni.c:844 ) argv[1] = C:\\Program Files (x86)\\Tomcat_Install\\IC72\\tomcat\\conf\\server.sdk.xml\n[2012-05-24 09:24:34] [debug] ( javajni.c:844 ) argv[2] = start\n\nAs one can see from above logs , tomcat accepts the application specific arguments and is about to start Java (Worker thread) , but somehow it gets stuck at this point after parsing the variable arguments to Tomcat process , and hence the tomcat windows service goes in Starting state.\n\nBut it sometimes runs cleanly and goes ahead and starts the worker thread.\n\nAre there any specific settings needed for Tomcat 32 bit/JRE 32 bit and Win 2k8 64 combination ? \n\nI face this issue 6 out of 10 times. \n\nInstalled tomcat as a service using the service.bat tomcat utility.\n\nI face no issues on WIndows 2003 32 bit OS with same tomcat 6.0.14 (32 bit) and JRE 1.6.10 (32 bit) \n\nAfter a clean startup , following trailing tomcat logs are produced (DEBUG MODE).\n\n[2012-05-24 09:32:41] [debug] ( javajni.c:844 ) argv[0] = -config\n[2012-05-24 09:32:41] [debug] ( javajni.c:844 ) argv[1] = C:\\Program Files (x86)\\Tomcat_Install\\IC72\\tomcat\\conf\\server.icsdk.xml\n[2012-05-24 09:32:41] [debug] ( javajni.c:844 ) argv[2] = start\n[2012-05-24 09:32:41] [debug] ( javajni.c:896 ) Java Worker thread started org/apache/catalina/startup/Bootstrap:main\n[2012-05-24 09:32:42] [debug] ( prunsrv.c:1067) Java started org/apache/catalina/startup/Bootstrap\n[2012-05-24 09:32:43] [info]  (          :0   ) Service started in 3744 ms.\n[2012-05-24 09:32:43] [debug] ( prunsrv.c:1394) Waiting for worker to finish...", "id": 159286, "time": "2012-05-24T11:05:50Z", "bug_id": 53288, "creation_time": "2012-05-24T11:05:50Z", "is_private": false}, {"count": 1, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "id": 159287, "time": "2012-05-24T11:28:58Z", "bug_id": 53288, "creation_time": "2012-05-24T11:28:58Z", "is_private": false, "text": "1. Bugzilla is not a support forum. Configuration questions should be asked on the users@ mailing list.\n\nhttp://tomcat.apache.org/bugreport.html#Bugzilla_is_not_a_support_forum\n\nRegarding your configuration, I do not see any apparent problems. The only one is that installing into \"Program Files\" on Vista and later has known problems with permissions. It is mentioned on the \"Windows\" page of the FAQ. You'd better install it somewhere else and without whitespace in the folder name.\n\n2. The service runner comes from the Apache Commons Daemon project. If there is a bug in it, it is for that project to track and fix it.\n\nhttp://tomcat.apache.org/bugreport.html#Third_party_components"}, {"count": 2, "tags": [], "bug_id": 53288, "text": "Thank you for that information.\n\nYour clarification proved helpful to me.\n\nLooks like Tomcat being installed in Program Files (x86) was causing the issues. But not sure Tomcat as a service is able to run smoothly and sometimes hangs with memory and CPU going up if installed under Program Files (x86).\n\nI did following changes to resolve this issue .\n\nInstead of the long form path name i.e. Program Files (x86) , I replaced all the occurrence with Progra~2 and that has resolved my hang issues. Tomcat now starts and stops smoothly.\n\nThanks once again for providing me with that crucial hint of folders with spaces.", "id": 159372, "time": "2012-05-28T05:15:41Z", "creator": "anand.rashinkar@gmail.com", "creation_time": "2012-05-28T05:15:41Z", "is_private": false, "attachment_id": null}]