[{"count": 0, "tags": [], "bug_id": 9038, "attachment_id": null, "id": 16013, "time": "2002-05-13T15:21:37Z", "creator": "abatko@cs.mcgill.ca", "creation_time": "2002-05-13T15:21:37Z", "is_private": false, "text": "suexec is NOT being called by Apache 2.0.36.\n\nI've built apache both from /usr/ports on FreeBSD (4.5-RELEASE-p4)\nand from the latest source downloaded from the apache website.\n\nIn both cases, upon start of apache, the following notice arrives\nin apache's error logfile, indicating that suexec has been loaded:\n[notice] suEXEC mechanism enabled (wrapper: /usr/local/sbin)\n\nHowever in both cases, the suexec logfile is never modified.\n\nJust to try figure out what's going on,\n\nI modified suexec's main() function by adding the following\nfunction call to send a message to suexec's logfile:\nlog_err(\"testing... entered suexec\\n\");\nThis message never arrives when a cgi script is called; however\nit does arrive if suexec is called manually from the shell.\n\nI have also temporarily replaced the suexec program with the\nfollowing shell script to see if there would be any difference:\n\n#!/bin/sh\nDATE=`/bin/date`\ncat >> /tmp/fake_suexec << EOF\n$DATE\n$*\nEOF\n\nAgain, when a cgi script is called from a web browser, suexec is\nnot executed because in this case, /tmp/fake_suexec is not modified.\nOn the other hand, when this shell script is executed from the\ncommand line, it of course works.\n\nThe compiled-in modules are:\n  core.c\n  prefork.c\n  http_core.c\n  mod_so.c\n\nAnd the additional loaded modules are:\n  mod_access.so\n  mod_alias.so\n  mod_autoindex.so\n  mod_cgi.so\n  mod_cgid.so\n  mod_dir.so\n  mod_include.so\n  mod_log_config.so\n  mod_mime.so\n  mod_negotiation.so\n  mod_setenvif.so\n  mod_status.so\n  mod_suexec.so\n  mod_userdir.so\n\nThe suexec-related bugs i found in the apache bug database are\nnot related to what i'm reporting:\n\n7810 suexec + userdir non-functional in httpd 2.0.35\n7992 Core dump when restarting daemon with mod_suexec \n8291 mod_include + mod_suexec has bug \n7862 suexec never log a group name\n7791 mod_suexec problem \n8789 SuExec Log File does not get created by default when suexec\n\nRunning apache with 'LogLevel debug' did not reveal anything insightful.\n\nI have no idea where to even begin looking through the apache source\ncode to try to resolve this problem, so i'm wondering if someone else\ncan please take a look.  If you need any more information, please let\nme know.  Thank you very much for you time, and for the Apache server!!!"}, {"count": 1, "tags": [], "bug_id": 9038, "is_private": false, "text": "You know that suexec does not affect the main server, only virtual hosts\nand user directories, right?\n\nAre you using the new SuexecUserGroup directive in your virtual hosts?", "id": 16178, "time": "2002-05-15T17:19:24Z", "creator": "slive@apache.org", "creation_time": "2002-05-15T17:19:24Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "To answer your question, I know that suexec only affects virtual hosts\nand user directories.\n\nIn my case, I want suexec to work in user directories, so I enabled\ncgi explicitly with \"Options ExecCGI\".\n\nI'm not using virtual hosts; and I don't really understand the\npurpose of the directive SuexecUserGroup.  Why specify a user and group\nfor cgi programs to run as, when the point of suexec, from what i've read\nis to run cgi programs as their respective owners ?  I hope my lack of\nunderstanding this point won't hinder you from investigating the problem.", "is_private": false, "id": 16193, "creator": "abatko@cs.mcgill.ca", "time": "2002-05-15T19:50:07Z", "bug_id": 9038, "creation_time": "2002-05-15T19:50:07Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "OK.  You don't need SuexecUserGroup unless you are using virtual hosts.\n\nBut just to make sure this isn't a configuration problem, can you please confirm\nthat you are using http://example.com/~user/ type requests?\n", "attachment_id": null, "bug_id": 9038, "id": 16196, "time": "2002-05-15T19:55:36Z", "creator": "slive@apache.org", "creation_time": "2002-05-15T19:55:36Z", "is_private": false}, {"count": 4, "tags": [], "text": "To confirm, yes I am using a ~user type request, namely\nhttp://web/~devil/cgi-bin/test.cgi\nand getting the following error in httpd-error:\nPremature end of script headers:\n/usr/tmp/home/devil/public_html/cgi-bin/test.cgi\n\nWhich seems good - at least it's NOT an error of the form\n\"Options ExecCGI is off in this directory\".\n\nHere's the related user directory configuration:\n\n<Directory ~ \"^/(u[0-9]+|course|home|usr)/.*/public_html\">\n    Options ExecCGI FollowSymLinks IncludesNoExec Indexes\n    AllowOverride All\n    Order allow,deny\n    Allow from all\n    XBitHack on\n</Directory>", "attachment_id": null, "bug_id": 9038, "id": 16197, "time": "2002-05-15T20:13:55Z", "creator": "abatko@cs.mcgill.ca", "creation_time": "2002-05-15T20:13:55Z", "is_private": false}, {"count": 5, "tags": [], "text": "Hello.  The problem has been somewhat resolved.  TERAMOTO Masahiro from\nthe FreeBSD bugs list pointed out that the suexec wrapper is installed as\n/usr/local/sbin/suexec, meanwhile, mod_suexec.c assumes this wrapper is\ninstalled as /usr/local/bin/suexec.  Now, I already knew that as a result\nof some debugging prior to sending the original report, and this is why\nI used the undocumented configuration option --with-suexec-bin.\n\nBut unfortunately, I had set it to /usr/local/sbin, as opposed to the\nfull path /usr/local/sbin/suexec.  I have now installed apache again,\nusing --with-suexec-bin=/usr/local/sbin/suexec and suexec is called\nupon the request of a cgi script in a userdir.\n\nHowever now suexec complains\n\"command not in docroot (/usr/tmp/home/devil/public_html/cgi-bin/test.cgi)\".\nI will try to figure this out on my own, and if I can't then I'll get back to\nyou.. so please don't close this bug just yet.\n\nAlso, as a side note, it would be worthwhile to document --with-suexec-bin\nat http://httpd.apache.org/docs-2.0/suexec.html and stress that it requires\nthe full path to the binary, not just to the directory where it sits.\n\nFinaly, a note about the fact that FreeBSD's port of apache installs suexec\nin an unexpected location may be worth documenting as well.", "attachment_id": null, "id": 16328, "creator": "abatko@cs.mcgill.ca", "time": "2002-05-17T15:41:03Z", "bug_id": 9038, "creation_time": "2002-05-17T15:41:03Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 9038, "attachment_id": null, "id": 16329, "time": "2002-05-17T15:55:22Z", "creator": "aaron@apache.org", "creation_time": "2002-05-17T15:55:22Z", "is_private": false, "text": "I added these configure flags, so I'll document them. Sorry for the confusion.\nHere's the summary:\n\nThe suexec binary must live at an absolute path, as must the docroot under\nwhich all suexec scripts must reside. Hard-wiring these into the suexec\nbinary is a security precaution. These flags simply let you override\nthe defaults.\n\n\nNo hard feelings if another more word-smithy person beats me to documenting\nthese features. :)"}, {"count": 7, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "id": 16331, "time": "2002-05-17T15:58:39Z", "bug_id": 9038, "creation_time": "2002-05-17T15:58:39Z", "is_private": false, "text": "Also note the message reported earlier:\n[notice] suEXEC mechanism enabled (wrapper: /usr/local/sbin)\n\nThis is clearly bogus.  We shouldn't be reporting suexec enabled unless\nwe can execute a proper suexec binary.\n"}, {"count": 8, "tags": [], "bug_id": 9038, "attachment_id": null, "id": 16347, "time": "2002-05-17T21:03:27Z", "creator": "abatko@cs.mcgill.ca", "creation_time": "2002-05-17T21:03:27Z", "is_private": false, "text": "I've added the following line to suexec.c:\nlog_err(\"arg1: %s, arg2: %s, arg3: %s\\n\", argv[1], argv[2], argv[3]);\n\nI get the following error from httpd-error.log:\n[Fri May 17 15:58:48 2002] [error] [client 132.206.2.99] Premature end of script\nheaders: /usr/tmp/home/devil/public_html/cgi-bin/test.cgi, referer:\nhttp://web/~devil/cgi-bin/\n\nI get the following error from httpd-suexec.log:\n[2002-05-17 16:05:51]: arg1: 666, arg2: 666, arg3: test.cgi\n[2002-05-17 15:58:48]: uid: (666/devil) gid: (666/666) cmd: test.cgi\n[2002-05-17 15:58:48]: command not in docroot\n(/usr/tmp/home/devil/public_html/cgi-bin/test.cgi)\n\n\nAre the arguments being passed correct ?\nIt's clear to see that ~ is nolonger part of the uid.  The cgi script\nworks if I add the ~ manually by hardcoding it into the code with the\nfollowing line, just before the check to see if it is a ~userdir request.\ntarget_uname=\"~666\";\n\n\nSomething must be wrong in a place out of my jurisdiction.\n"}, {"count": 9, "tags": [], "text": "This behaviour is consistent with bug 7810, the problem is\nthat mod_cgid + suexec does not work for mod_userdir requests\nin exactly the way you describe (not in docroot). \n\nThis behaviour with mod_cgi was patched prior to 2.0.36, and I\nhave a patch which fixes mod_cgid. It follows. So either compile\nwithout mod_cgid, or apply the patch.", "attachment_id": null, "id": 16450, "creator": "colmmacc@redbrick.dcu.ie", "time": "2002-05-21T00:49:53Z", "bug_id": 9038, "creation_time": "2002-05-21T00:49:53Z", "is_private": false}, {"count": 10, "attachment_id": 1897, "creator": "colmmacc@redbrick.dcu.ie", "is_private": false, "id": 16451, "time": "2002-05-21T00:51:40Z", "bug_id": 9038, "creation_time": "2002-05-21T00:51:40Z", "tags": [], "text": "Created attachment 1897\nPatch for mod_cgid.c to make suexec work"}, {"count": 11, "tags": [], "text": "I'm sorry, I should have mentioned that a few days ago when I came upon\nbug 7810. I believe I have diabled mod_cgid by commenting out all\nreferences to it in httpd.conf.\nIn particular, \"LoadModule cgid_module libexec/apache2/mod_cgid.so\"\nis commented out, and the server has been stopped and started again.\n\nPlease let me know if that is not enough to disable a module; and if it\nis absolutely necessary to remove cgid from the list of SHARED_MODULES\nbefore compiling the server.  It is my understanding that a module can\nbe loaded or not loaded simply based on the presents or absence of the\ncorresponding LoadModule directive in the httpd configuration file.\n\nSimilarly, I am under the impression that if I were to comment out the\nLoadModule directive for suexec_module, I still could run cgi scripts\nwithout the invokation of the suexec wrapper.  But suexec is invoked\nregardless of whether I have the corresponding LoadModule line commented\nor not.\n\nPlease clarify this point for me.  I'm sorry to be bothering you with\nthese basics, but I assure you that I have done a lot of RTFM'ing and\nI either must have missed this major point, or there is a problem.", "attachment_id": null, "bug_id": 9038, "id": 16481, "time": "2002-05-21T13:33:37Z", "creator": "abatko@cs.mcgill.ca", "creation_time": "2002-05-21T13:33:37Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 9038, "attachment_id": null, "id": 16533, "time": "2002-05-22T09:24:18Z", "creator": "colmmacc@redbrick.dcu.ie", "creation_time": "2002-05-22T09:24:18Z", "is_private": false, "text": "If you are strictly using DSO for mod_cgid then yes, not using\nLoadModule should fix it. Simple not specifying --enable-cgid and\nenureing you don't use a threaded mpm on one of the cgid preferred\nplatforms is also enough.\n\nmod_suexec is a different matter. mod_suexec is the module which\nhandles the SuexecUserGroup directive, it also spits out the\ninitial \"Suexec mechanism enabled\" line in error_log, but that's\nall it does. If you built with --enable-suexec then mod_userdir will\nstill have an id_doer hook. This means that when the cgi is executed\nsuexec will still be used, regardless of mod_suexec being loaded or\nnot. Personally I don't consider it a bug, since you specify \n--enable-suexec at configure time .. but it could do with being documented. \n\nThe surefire way to stop this behaviour is to delete the suexec binary.\nWithout the binary suexec_enabled will not be set by the unix specific\ncode and mod_userdir will not try to use it.\n\nYou don't say wether you are experiencing the bug with mod_cgi, you\nshouldnt be with 2.0.36, I can't replicate it. I can't replicate with\nthe patch applied either with mod_cgid. What's the current status of\nthis ? Are you experiencing the bug ?\n\n"}, {"count": 13, "tags": [], "bug_id": 9038, "is_private": false, "text": "Could you also make sure to remove any SuexecUserGroup Directives ? ", "id": 16541, "time": "2002-05-22T11:13:14Z", "creator": "colmmacc@redbrick.dcu.ie", "creation_time": "2002-05-22T11:13:14Z", "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 9038, "attachment_id": null, "id": 16566, "time": "2002-05-22T19:51:21Z", "creator": "abatko@cs.mcgill.ca", "creation_time": "2002-05-22T19:51:21Z", "is_private": false, "text": "To answer your question, I'm not using SuexecUserGroup directives.\n\nAs you suggested, I recompiled apache after having removed cgid from\nthe list of shared modules. cgi scripts via suexec now work as\nexpected for the ~devil account that I've cited several times in our\ncorrespondence; so thank you very much for your assistance.\n\nI want you to know that the freebsd apache2 port sets the following\ndefault shared modules:\n               all cgid case_filter case_filter_in \\\n               ext_filter charset_lite deflate bucketeer\n\nI don't know what 'all', 'case_filter', and 'case_filter_in' are.\nIf 'all' means all modules, then it wouldn't make sense to explicitly\nindicate the other few modules.  Clarification here would be nice.\nSecondly, typing 'case_filter' into the search text box at\nhttp://httpd.apache.org/docs-2.0/ produced nothing suggesting a module of\nthat name.  Can anyone explain what 'case_filter' and 'case_filter_in' are\nfor ?\n\nAnd do you think that the freebsd porters should be made aware of the\nconflict between cgid and suexec ?  It may save people a lot of debugging\ntime if the freebsd porters changed the default module from cgid to cgi.\nIf you think this would be a good idea, then please let me know and i'll\nsend them a note.\n\nLastly, I just want to know if the issues surfaced during this discussion\nwill be taken care of by someone.  To relieve you the pain of tracing them,\nI'm listing them now:\n\n2002-05-17 15:41 / 15:55 (Aaron Bannert) document --with-suexec-bin option\n2002-05-17 15:58 (Joshua Slive) don't report suexec enabled unless can execute\n2002-05-22 09:24 (Colm) document loading of mod_suexec"}, {"count": 15, "tags": [], "text": "How about to define mod_suexec/mod_userdir hook order as below:\n(This will ensure suexec+userdir would work fine,\n regardless of definition of SuexecUserGroup directives.)\n\n--- httpd-2.0.36/modules/mappers/mod_userdir.c.org      Mon Apr 29 16:45:43 2002\n+++ httpd-2.0.36/modules/mappers/mod_userdir.c  Thu May 23 22:32:50 2002\n@@ -393,10 +393,13 @@\n static void register_hooks(apr_pool_t *p)\n {\n     static const char * const aszSucc[]={ \"mod_alias.c\",NULL };\n+#ifdef HAVE_UNIX_SUEXEC\n+    static const char * const suexSucc[]={ \"mod_suexec.c\",NULL };\n+#endif\n \n     ap_hook_translate_name(translate_userdir,NULL,aszSucc,APR_HOOK_MIDDLE);\n #ifdef HAVE_UNIX_SUEXEC\n-    ap_hook_get_suexec_identity(get_suexec_id_doer,NULL,NULL,APR_HOOK_MIDDLE);\n+    ap_hook_get_suexec_identity(get_suexec_id_doer,NULL,suexSucc,APR_HOOK_MIDDLE);\n #endif\n }\n \n--- httpd-2.0.36/modules/generators/mod_suexec.c.org    Thu Apr 25 16:18:39 2002\n+++ httpd-2.0.36/modules/generators/mod_suexec.c        Fri May 24 22:15:49 2002\n@@ -164,7 +164,9 @@\n \n static void suexec_hooks(apr_pool_t *p)\n {\n-    ap_hook_get_suexec_identity(get_suexec_id_doer,NULL,NULL,APR_HOOK_MIDDLE);\n+    static const char * const suexPre[]={ \"mod_userdir.c\",NULL };\n+\n+    ap_hook_get_suexec_identity(get_suexec_id_doer,suexPre,NULL,APR_HOOK_MIDDLE);\n     ap_hook_post_config(suexec_post_config,NULL,NULL,APR_HOOK_MIDDLE);\n }\n ", "is_private": false, "bug_id": 9038, "id": 16663, "time": "2002-05-24T14:54:54Z", "creator": "nazonazo@miobox.jp", "creation_time": "2002-05-24T14:54:54Z", "attachment_id": null}, {"count": 16, "tags": [], "text": "Specifying the order is a good idea ... but shouldnt be the other\nway around ? .. ie, if the site admin wants to be able to force a particular\nuser directory to be a different UserGroup ID shouldnt they be able to ?\n\nAll they need do is make sure user directories are within the suexec \ndocroot .. which is easily done.", "attachment_id": null, "id": 16668, "creator": "colmmacc@redbrick.dcu.ie", "time": "2002-05-24T15:00:34Z", "bug_id": 9038, "creation_time": "2002-05-24T15:00:34Z", "is_private": false}, {"count": 17, "tags": [], "text": "Yes. If we could use SuexecUserGroup directives in <Directory> directives,\nSuexecUserGroup should have priority over userdir. But now, SuexecUserGroup\nis not allowed in <Directory>. Can this limitation be modified as below?\n\n--- httpd-2.0.36/modules/mappers/mod_userdir.c.org      Mon Apr 29 16:45:43 2002\n+++ httpd-2.0.36/modules/mappers/mod_userdir.c  Sat May 25 13:30:00 2002\n@@ -393,10 +393,13 @@\n static void register_hooks(apr_pool_t *p)\n {\n     static const char * const aszSucc[]={ \"mod_alias.c\",NULL };\n+#ifdef HAVE_UNIX_SUEXEC\n+    static const char * const suexPre[]={ \"mod_suexec.c\",NULL };\n+#endif\n \n     ap_hook_translate_name(translate_userdir,NULL,aszSucc,APR_HOOK_MIDDLE);\n #ifdef HAVE_UNIX_SUEXEC\n-    ap_hook_get_suexec_identity(get_suexec_id_doer,NULL,NULL,APR_HOOK_MIDDLE);\n+    ap_hook_get_suexec_identity(get_suexec_id_doer,suexPre,NULL,APR_HOOK_MIDDLE);\n #endif\n }\n \n--- httpd-2.0.36/modules/generators/mod_suexec.c.org    Thu Apr 25 16:18:39 2002\n+++ httpd-2.0.36/modules/generators/mod_suexec.c        Sat May 25 13:56:59 2002\n@@ -102,7 +102,7 @@\n                                    const char *uid, const char *gid)\n {\n     suexec_config_t *cfg = (suexec_config_t *) mconfig;\n-    const char *err = ap_check_cmd_context(cmd, NOT_IN_DIR_LOC_FILE|NOT_IN_LIMIT);\n+    const char *err = ap_check_cmd_context(cmd, NOT_IN_LOCATION|NOT_IN_FILES|NOT_IN_LIMIT);\n \n     if (err != NULL) {\n         return err;\n@@ -157,14 +157,16 @@\n {\n     /* XXX - Another important reason not to allow this in .htaccess is that\n      * the ap_[ug]name2id() is not thread-safe */\n-    AP_INIT_TAKE2(\"SuexecUserGroup\", set_suexec_ugid, NULL, RSRC_CONF,\n+    AP_INIT_TAKE2(\"SuexecUserGroup\", set_suexec_ugid, NULL, ACCESS_CONF,\n       \"User and group for spawned processes\"),\n     { NULL }\n };\n \n static void suexec_hooks(apr_pool_t *p)\n {\n-    ap_hook_get_suexec_identity(get_suexec_id_doer,NULL,NULL,APR_HOOK_MIDDLE);\n+    static const char * const suexSucc[]={ \"mod_userdir.c\",NULL };\n+\n+    ap_hook_get_suexec_identity(get_suexec_id_doer,NULL,suexSucc,APR_HOOK_MIDDLE);\n     ap_hook_post_config(suexec_post_config,NULL,NULL,APR_HOOK_MIDDLE);\n }\n ", "is_private": false, "bug_id": 9038, "id": 16698, "time": "2002-05-25T07:55:51Z", "creator": "nazonazo@miobox.jp", "creation_time": "2002-05-25T07:55:51Z", "attachment_id": null}, {"count": 18, "tags": [], "text": "Changing the SuexecUserGroup Directive to be an AP_INIT_TAKE12 and\nhandling smethingn like \"SuexecUserGroup off\" in directory contexts would \nprobably need to be a neccessity for that aswell.", "attachment_id": null, "bug_id": 9038, "id": 16713, "time": "2002-05-26T00:06:15Z", "creator": "colmmacc@redbrick.dcu.ie", "creation_time": "2002-05-26T00:06:15Z", "is_private": false}, {"count": 19, "tags": [], "text": "I've got the same behavior as Alex, but my error log contains the following \nline:\n\n[Sun Jul 21 02:02:44 2002] [notice] suEXEC mechanism enabled \n(wrapper: /usr/local/apache2/bin/suexec)\n\nWhich is exactly where the suexec binary is located with permissions and \nownership set to:\n\n-rwsr-xr-x    1 root     root        61091 Jul 21 00:46 suexec*\n\nI'm using the source dist httpd-2.0.39.tar.gz. Without modifying any file \ninside the tarball, I use the following configure command, as per the \"--help\"\n from the configure script, INSTALL doc, and various Apache 2 docs including \nhttp://httpd.apache.org/docs-2.0/suexec.html:\n\n./configure\\\n --enable-auth-dbm=shared\\\n --enable-cern-meta=shared\\\n --enable-deflate=shared\\\n --enable-expires\\\n --enable-ext-filter=shared\\\n --enable-headers\\\n --enable-mime-magic=shared\\\n --enable-rewrite=shared\\\n --enable-so\\\n --enable-ssl\\\n --enable-suexec=shared\\\n --enable-unique-id\\\n --enable-vhost-alias=shared\\\n --with-suexec-caller=webuser\\\n --with-suexec-docroot=/usr/local/apache2/htdocs\\\n --with-suexec-logfile=/usr/local/apache2/logs/suexec_log\n\nBTW, I get the same results whether the suexec mod is shared or static. I've \ncommented the LoadModule for all the extension and experimental shared modules \nin httpd.conf, except for suexec. I've tried to force the suexec to fail by \ncalling it directly on the command line and found that it couldn't write to \nit's log file. (An error would appear on STDERR.) That's why I've explicitly \nspecified the --with-suexec-logfile parameter, which I've set to the default \naccording to the suexec.html doc. Now the suexec_log file contains the \nfollowing, when I try calling suexec from command line:\n\n[2002-07-21 02:30:36]: too few arguments\n\nI'm attempting to run a script from a user directory, my own, but it's being \nexecuted, properly I might add, as though no suexec were running. I've tried \nchanging the permissions on the script to violate the suexec rules, but no \noutput is every written to the suexec_log. My suexec module is the only one \nthat's being loaded in the httpd.conf:\n\n#LoadModule auth_dbm_module modules/mod_auth_dbm.so\n#LoadModule ext_filter_module modules/mod_ext_filter.so\n#LoadModule deflate_module modules/mod_deflate.so\n#LoadModule mime_magic_module modules/mod_mime_magic.so\n#LoadModule cern_meta_module modules/mod_cern_meta.so\n#LoadModule vhost_alias_module modules/mod_vhost_alias.so\n#LoadModule rewrite_module modules/mod_rewrite.so\nLoadModule suexec_module modules/mod_suexec.so\n\nAnd I've confirmed that when I start the server with the LoadModule uncommented \nthe suexec mech enabled appears and if it's commented, it doesn't appear.\n\nWhen I run my CGI from the cgi-bin dir (http://pinky/~sean/cgi-bin/env), which \nis ScriptAliasMatch(ed) so I don't need extensions for cgi, I get the following \nabbreviated results:\n\n<env stuff>\n-------------\nuid=666(www) gid=666(www) groups=666(www)  COMMENT: id command\nwww                                        COMMENT: whoami command\n\nRunning the strings command on httpd grepping on suexec, I get quite a few \nresults, hooks mainly; however, the following would indicate that the server \nknows where to reach the suexec binary:\n\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n/usr/local/apache2/bin/suexec\n\nThe one peculiar item that I've noticed when reading one comment was that the \nsuexec mod appeared with the httpd -l command, as mod_suexec.so, but my list \nlooks as follows:\n\nroot@pinky# ../bin/httpd -l\nCompiled in modules:\n  core.c\n  mod_access.c\n  mod_auth.c\n  mod_include.c\n  mod_log_config.c\n  mod_env.c\n  mod_expires.c\n  mod_headers.c\n  mod_unique_id.c\n  mod_setenvif.c\n  mod_ssl.c\n  prefork.c\n  http_core.c\n  mod_mime.c\n  mod_status.c\n  mod_autoindex.c\n  mod_asis.c\n  mod_cgi.c\n  mod_negotiation.c\n  mod_dir.c\n  mod_imap.c\n  mod_actions.c\n  mod_userdir.c\n  mod_alias.c\n  mod_so.c\n\nHopefully, this might be a clue to solving the problem. The module seemed to be \ninclude in the configure and make of the build process, and as I've already \nmentioned, things are being installed where they belong, namely suexec binary, \nand the server's config had a LoadModule directive for it without my assistance.\n\nThat's all I could think to include in this plea for help. If more info is \nneeded, I'd be glad to fork it over. I'm uploading files through CGI (to my \ngiant storage area) and I really need suid functionality to save them as myself \nrather than the web user; otherwise, where else would all my junk go?", "attachment_id": null, "bug_id": 9038, "id": 19916, "time": "2002-07-21T08:07:49Z", "creator": "seanpublic@attbi.com", "creation_time": "2002-07-21T08:07:49Z", "is_private": false}, {"count": 20, "attachment_id": null, "creator": "seanpublic@attbi.com", "is_private": false, "id": 19918, "time": "2002-07-21T10:16:15Z", "bug_id": 9038, "creation_time": "2002-07-21T10:16:15Z", "tags": [], "text": "Sorry, in my previous comment where I've included my configure parameters, I \nused an older version, so it says \"webuser\" for the suexec caller, but it's \nproperly set to \"www\". The problem still exists. Here's what it should look \nlike:\n\n./configure\\\n --enable-auth-dbm=shared\\\n --enable-cern-meta=shared\\\n --enable-deflate=shared\\\n --enable-expires\\\n --enable-ext-filter=shared\\\n --enable-headers\\\n --enable-mime-magic=shared\\\n --enable-rewrite=shared\\\n --enable-so\\\n --enable-ssl\\\n --enable-suexec=shared\\\n --enable-unique-id\\\n --enable-vhost-alias=shared\\\n --with-suexec-caller=www\\\n --with-suexec-docroot=/usr/local/apache2/htdocs\\\n --with-suexec-logfile=/usr/local/apache2/logs/suexec_log\n"}, {"count": 21, "tags": [], "bug_id": 9038, "is_private": false, "text": "[This is a mass bug update.]\nThis bug reports a problem in an older version of Apache 2.\nCould you please update to the most recent version and see\nif you can reproduce this problem.  If the bug still exists,\nplease update the bug with the latest version number.  If \nthe bug no longer exists, please close the bug report.\n\nSorry for this impersonal response, but we get many more bug\nreports than our volunteers can keep up with.\nThanks for using Apache!", "id": 24715, "time": "2002-10-17T02:34:44Z", "creator": "slive@apache.org", "creation_time": "2002-10-17T02:34:44Z", "attachment_id": null}, {"count": 22, "tags": [], "text": "[This is a mass bug update.] [Resolve-20021102]\nNo response from submitter; assuming issue is resolved.\nIf the problem still exists in the lastest version,\nplease reopen this report and update appropriately.", "is_private": false, "bug_id": 9038, "id": 25541, "time": "2002-11-02T20:18:23Z", "creator": "slive@apache.org", "creation_time": "2002-11-02T20:18:23Z", "attachment_id": null}]