[{"count": 0, "tags": [], "bug_id": 61418, "is_private": false, "text": "httpd does exactly the same as apr-util (https://bz.apache.org/bugzilla/show_bug.cgi?id=61417)\n\nconfigure: Configuring Apache Portable Runtime library...\nconfigure: \nchecking for APR... yes\n setting CPP to \"gcc -m64 -O2 -g0 -mfpmath=sse -mavx -msse2avx -march=sandybridge -mtune=sandybridge -fopenmp -pipe -fno-strict-aliasing -fomit-frame-pointer -fexceptions -fstack-protector-strong --param=ssp-buffer-size=6 -D_FORTIFY_SOURCE=2 -Wstack-protector -Wformat -Werror=format-security -march=native -mtune=native -O3 -fno-strict-aliasing -fno-gcse-after-reload -fno-inline-functions -fno-ipa-cp -fno-ipa-cp-clone -fno-peel-loops -fno-predictive-commoning -fno-tree-loop-distribute-patterns -fno-unswitch-loops -fPIC -flto -ffat-lto-objects -fuse-ld=gold -fuse-linker-plugin -E\"\n setting CPPFLAGS to \" -DLINUX -D_REENTRANT -D_GNU_SOURCE\"", "id": 200310, "time": "2017-08-15T11:58:40Z", "creator": "h.reindl@thelounge.net", "creation_time": "2017-08-15T11:58:40Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "h.reindl@thelounge.net", "attachment_id": null, "id": 201763, "time": "2017-10-29T14:02:22Z", "bug_id": 61418, "creation_time": "2017-10-29T14:02:22Z", "is_private": false, "text": "well, and finally you can't use LTO for apr/apr-util because httpd don't build with the inherited -fno-fat-lto-objects even when you use -fno-fat-lto-objects in the httpd build itself\n\nCCFLAGS/LDFLAGS are *not* your business when supplied in the environment\n\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'core_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'authn_file_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'authn_core_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'authz_host_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'authz_groupfile_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'authz_user_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'authz_core_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'auth_basic_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'auth_digest_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'allowmethods_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'socache_shmcb_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'so_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'ratelimit_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'reqtimeout_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'filter_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'deflate_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'http_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'mime_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'log_config_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'env_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'expires_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'headers_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'unique_id_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'setenvif_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'version_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'remoteip_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'mpm_prefork_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'unixd_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'autoindex_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'dir_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'alias_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_modules: error: undefined reference to 'rewrite_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'core_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'authn_file_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'authn_core_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'authz_host_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'authz_groupfile_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'authz_user_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'authz_core_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'auth_basic_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'auth_digest_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'allowmethods_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'socache_shmcb_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'so_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'ratelimit_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'reqtimeout_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'filter_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'deflate_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'http_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'mime_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'log_config_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'env_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'expires_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'headers_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'unique_id_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'setenvif_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'version_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'remoteip_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'mpm_prefork_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'unixd_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'autoindex_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'dir_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'alias_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_prelinked_module_symbols: error: undefined reference to 'rewrite_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'core_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'authn_file_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'authn_core_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'authz_host_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'authz_groupfile_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'authz_user_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'authz_core_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'auth_basic_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'auth_digest_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'allowmethods_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'socache_shmcb_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'so_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'ratelimit_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'reqtimeout_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'filter_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'deflate_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'http_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'mime_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'log_config_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'env_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'expires_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'headers_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'unique_id_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'setenvif_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'version_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'remoteip_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'mpm_prefork_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'unixd_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'autoindex_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'dir_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'alias_module'\n/tmp/ccBJ2nch.ltrans0.ltrans.o:<artificial>:ap_preloaded_modules: error: undefined reference to 'rewrite_module'"}, {"id": 201764, "tags": [], "bug_id": 61418, "is_private": false, "count": 2, "text": "Working as designed. If you want more control, build httpd w/ an included apr as the manual already describes.  If you re-open, please try to avoid all of the hysterics and editorializing and report something more concrete.", "time": "2017-10-29T14:40:47Z", "creator": "covener@gmail.com", "creation_time": "2017-10-29T14:40:47Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "h.reindl@thelounge.net", "attachment_id": null, "id": 201769, "time": "2017-10-29T15:28:32Z", "bug_id": 61418, "creation_time": "2017-10-29T15:28:32Z", "is_private": false, "text": "> report something more concrete\n\nwhat more concrete than setting CPP to \"gcc -m64 -O2 -g0 -mfpmath=sse -mavx -msse2avx -march=sandybridge -mtune=sandybridge...\" is plain wrong because you override explicit configuration in the spec file below\n\n# optimized compiler flags\nexport CFLAGS=\"%{optflags} %{O3_flags} -flto -ffat-lto-objects -fuse-ld=gold -fuse-linker-plugin -Wa,--noexecstack\"\nexport CXXFLAGS=\"$CFLAGS\"\nexport CC=\"gcc $CFLAGS\"\nexport SH_LDFLAGS=\"-Wl,--as-needed -Wl,-z,now -Wl,-z,relro -Wl,-z,noexecstack -Wl,-z,nodump %{optflags} %{O3_flags} -flto -ffat-lto-objects -fuse-ld=gold -fuse-linker-plugin -Wa,--noexecstack\"\nexport LDFLAGS=\"$SH_LDFLAGS -pie -fPIE\""}]