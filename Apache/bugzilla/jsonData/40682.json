[{"count": 0, "attachment_id": null, "creator": "j_cumps@yahoo.com", "is_private": false, "id": 94497, "time": "2006-10-04T14:23:54Z", "bug_id": 40682, "creation_time": "2006-10-04T14:23:54Z", "tags": [], "text": "Since this nights svn checkout (4-OCT-2006), junit 4-style tests fail.\n\n    [junit] No runnable methods\n    [junit] java.lang.Exception: No runnable methods\n\nTested from fresh svn build on Windows XP and Linux, both running java 1.5.0_06"}, {"count": 1, "tags": [], "text": "Checking when it started failing.\nI've got a successful run with a checkout of  --revision '{2006-09-15}'\nNow proceeding...", "is_private": false, "id": 94505, "creator": "j_cumps@yahoo.com", "time": "2006-10-04T15:07:06Z", "bug_id": 40682, "creation_time": "2006-10-04T15:07:06Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 40682, "attachment_id": null, "is_private": false, "id": 94506, "time": "2006-10-04T15:23:46Z", "creator": "j_cumps@yahoo.com", "creation_time": "2006-10-04T15:23:46Z", "text": "ok for --revision '{2006-09-20}'\nok for --revision '{2006-09-25}'\nok for --revision '{2006-09-26}'\nok for --revision '{2006-09-27}'\nok for --revision '{2006-09-28}' (revision 450591)\n\nnot ok for --revision '{2006-09-29}' (revision 451034)\n\nSo, the bug must be introducedin one of these files:\n\nC:\\sandbox_ant\\ant>svn checkout --revision '{2006-09-29}' \nhttp://svn.apache.org/\nrepos/asf/ant/core/trunk/ ant-trunk\nU    ant-trunk/src/tests/antunit/types/conditions/matches-test.xml\nA    ant-trunk/src/tests/antunit/types/resources/tokens-test.xml\nA    ant-trunk/src/tests/antunit/types/resources/utf-16.in\nU    ant-trunk/src/tests/junit/org/apache/tools/ant/LocationTest.java\nU    ant-\ntrunk/src/tests/junit/org/apache/tools/ant/AntClassLoaderDelegationTest\n.java\nU    ant-trunk/src/main/org/apache/tools/ant/AntClassLoader.java\nU    ant-trunk/src/main/org/apache/tools/ant/UnknownElement.java\nU    ant-trunk/src/main/org/apache/tools/ant/filters/TokenFilter.java\nU    ant-trunk/src/main/org/apache/tools/ant/RuntimeConfigurable.java\nU    ant-\ntrunk/src/main/org/apache/tools/ant/taskdefs/condition/ConditionBase.ja\nva\nU    ant-trunk/src/main/org/apache/tools/ant/taskdefs/WaitFor.java\nU    ant-trunk/src/main/org/apache/tools/ant/taskdefs/Concat.java\nU    ant-trunk/src/main/org/apache/tools/ant/taskdefs/ConditionTask.java\nU    ant-trunk/src/main/org/apache/tools/ant/types/defaults.properties\nA    ant-trunk/src/main/org/apache/tools/ant/types/resources/Tokens.java\nU    ant-trunk/src/main/org/apache/tools/ant/types/resources/URLResource.java\nA    ant-trunk/src/main/org/apache/tools/ant/util/StringTokenizer.java\nU    ant-trunk/src/main/org/apache/tools/ant/util/StringUtils.java\nA    ant-trunk/src/main/org/apache/tools/ant/util/FileTokenizer.java\nU    ant-trunk/src/main/org/apache/tools/ant/util/Tokenizer.java\nU    ant-\ntrunk/src/main/org/apache/tools/ant/util/ConcatResourceInputStream.java\n\nU    ant-trunk/docs/manual/CoreTypes/resources.html\nU    ant-trunk/CONTRIBUTORS\nU    ant-trunk/contributors.xml\nU    ant-trunk/WHATSNEW\nChecked out revision 451034.\n"}, {"count": 3, "tags": [], "text": "Closing the issue, as I can't replicate it with a completely fresh checkout of \nthe trunk.\n\nI did a complete fresh checkout today of revision 453112.\nBuilt it from scratch.\nPointed my ANT_HOME and PATH to it.\nThe issue does not re-occur.", "is_private": false, "id": 94510, "creator": "j_cumps@yahoo.com", "time": "2006-10-04T23:50:44Z", "bug_id": 40682, "creation_time": "2006-10-04T23:50:44Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 40682, "attachment_id": null, "id": 94511, "time": "2006-10-05T01:23:02Z", "creator": "j_cumps@yahoo.com", "creation_time": "2006-10-05T01:23:02Z", "is_private": false, "text": "I have more background on this.\n\nBefore 2006-09-29, junit task worked with junit4 jar in ./lib or CLASSPATH\nSince 2006-09-29, junit task fails with junit4 jar in ./lib or CLASSPATH, and \nsucceeds when junit 4 jar is not in ./lib or CLASSPATH."}, {"count": 5, "attachment_id": null, "creator": "antoine@apache.org", "is_private": false, "id": 94512, "time": "2006-10-05T04:37:54Z", "bug_id": 40682, "creation_time": "2006-10-05T04:37:54Z", "tags": [], "text": "Hello Jan,\n\nFrom what you wrote, it looks like this issue is a classloading issue.\n\nPeter Reilly changed AntClassLoader.java again yesterday.\n\nHe had changed AntClassLoader.java on Wed Sep 27 22:46:57 2006 UTC, revision 450614.\n\nCould you update again your SVN sandbox, I suspect this usecase will work again now.\n\nRegards,\n\nAntoine"}, {"count": 6, "tags": [], "text": "It would be nice to have a test for this.\nA small project with a simple test, and a small\nbuild file.\n", "is_private": false, "id": 94513, "creator": "peterreilly@apache.org", "time": "2006-10-05T04:48:42Z", "bug_id": 40682, "creation_time": "2006-10-05T04:48:42Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 40682, "attachment_id": null, "text": "Reply to Comment #5\n\nClean build ANT from svn...\nSame behaviour as reported in Comment #4\n\njunit task fails with junit4 jar in ./lib or CLASSPATH,\nwith or without junit4 jar in the classpath of ant's junit task.\n\njunit task succeeds when \n- junit 4 jar is not in ./lib or CLASSPATH, *AND*\n- the classpath in the junit task includes the junit4 jar\n\nReply to Comment #6\nWorking on that.", "id": 94514, "time": "2006-10-05T05:56:46Z", "creator": "j_cumps@yahoo.com", "creation_time": "2006-10-05T05:56:46Z", "is_private": false}, {"count": 8, "tags": [], "text": "Created attachment 18965\nexample ant project exposing the bug\n\n1. Extract the attached zipped project.\n2. edit build.properties to reflect the location of junit4 jar file.\n\n-------------------------------------------------------------------\n\nclear junit4 from your classpath, remove junit 4 jar from ant/lib,\nif applicable.\n\nrun the project\n> ant all\n\n=> Success\n\n-------------------------------------------------------------------\n\nput junit4 jar in classpath, or in ant/lib\n\nrun the project\n> ant all\n\n=> error", "is_private": false, "id": 94528, "creator": "j_cumps@yahoo.com", "time": "2006-10-05T07:55:00Z", "bug_id": 40682, "creation_time": "2006-10-05T07:55:00Z", "attachment_id": 18965}, {"count": 9, "tags": [], "bug_id": 40682, "attachment_id": null, "is_private": false, "id": 94532, "time": "2006-10-05T09:24:28Z", "creator": "peterreilly@apache.org", "creation_time": "2006-10-05T09:24:28Z", "text": "Thanks for the test case - it was a *big* help.\nI have tracked down the problem.\nThe problem is due to\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=40682\n(Order of addX and addConfiguredX), the order\nof setting attributes and elements was changed from\n\naddX\nsetY\naddConfiguredZ\nexecute()\n\nto\n\nsetY\naddX, addConfiguredZ (in order of the build file)\nexecute()\n\nHowever junittask depends on the first order.\nIt is easy to fix JUnitTask for this, (I will\napply patch when I reach my svn machine), however\n 1) I wonder if we need to rollback 40621\n 2) why does junit only work for fork=\"yes\" for junit4?\n\n"}, {"count": 10, "attachment_id": null, "creator": "peterreilly@apache.org", "is_private": false, "id": 94552, "time": "2006-10-05T13:14:36Z", "bug_id": 40682, "creation_time": "2006-10-05T13:14:36Z", "tags": [], "text": "I have committed a fix for this.\nThanks again for the report and help in tracking the problem."}, {"count": 11, "tags": [], "bug_id": 40682, "is_private": false, "text": "Verified from fresh checkout...\nIt's fixed. Thank you.", "id": 94553, "time": "2006-10-05T13:30:46Z", "creator": "j_cumps@yahoo.com", "creation_time": "2006-10-05T13:30:46Z", "attachment_id": null}]