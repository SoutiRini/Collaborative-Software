[{"count": 0, "tags": [], "creator": "ozgilat@gmail.com", "attachment_id": 34428, "id": 194871, "time": "2016-11-08T14:22:07Z", "bug_id": 60353, "creation_time": "2016-11-08T14:22:07Z", "is_private": false, "text": "Created attachment 34428\nupload script\n\nHi,\n\nWhen i'm uploading a large file (~270 MB) using the attached script (upload.php), mod_fcgid tries to send it to the PHP process and causes a crash in httpd.exe.\nThe proc_write_ipc function gets the apr_bucket_brigade list and sends the buckets one by one to the PHP process and is using a lot of memory until a point where 'malloc' returns NULL (through allocator_alloc ) and httpd immediately crashes.\n\nI've attached a suggestion for a patch to this function where the httpd is using significantly less memory and the crash is gone. It basically frees each apr_bucket after it is sent to the php process. \n\nthanks!"}, {"count": 1, "tags": [], "creator": "ozgilat@gmail.com", "attachment_id": 34429, "id": 194872, "time": "2016-11-08T14:22:50Z", "bug_id": 60353, "creation_time": "2016-11-08T14:22:50Z", "is_private": false, "text": "Created attachment 34429\nproposed patch"}]