[{"count": 0, "tags": [], "bug_id": 50685, "attachment_id": null, "id": 143787, "time": "2011-01-29T03:49:04Z", "creator": "tnik_28@mail.ru", "creation_time": "2011-01-29T03:49:04Z", "is_private": false, "text": "1) Download apache-tomcat-7.0.6-windows-x86.zip and unzip to C:\\apache-tomcat-7.0.6 . But this bug with all tomcat versions.\n2) Create simple jsp C:\\apache-tomcat-7.0.6\\webapps\\ROOT\\test.jsp :\nAAA<%=7+8%>\n3) Add SET JAVA_HOME=C:\\Program Files\\Java\\jdk1.6.0_23\\ to C:\\apache-tomcat-7.0.6\\bin\\startup.bat  and run startup.bat\n4) Open http://localhost:8080/test.jsp in browser - it works and shows AAA15.\n5) Do 100000 requests to http://localhost:8080/test.jsp. Create new c# windows forms app. Put one button with code:\n\nprivate void button1_Click(object sender, EventArgs e)\n{\n  StringBuilder sb = new StringBuilder();\n  byte[] buf = new byte[8192];\n  for (int i = 0; i < 100000; i++)\n  {\n    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(\"http://localhost:8080/test.jsp\");\n    using(HttpWebResponse response = (HttpWebResponse)request.GetResponse())\n    using (Stream resStream = response.GetResponseStream())\n    {\n      string tempString = null; int count = 0;\n      count = resStream.Read(buf, 0, buf.Length);\n      if (count != 0) tempString = Encoding.ASCII.GetString(buf, 0, count);\n    }\n  }\n}\n\n6) It takes 15 seconds - test success. But tomcat process java.exe used 5mb memory before test, after test 270mb. If run test again java.exe take 286mb and crashed: Exception in thread \"\"http-apr-8080\"-exec-2\" java.lang.OutOfMemoryError: Java heap space ....\n\n7) run MemoryAnalyzer. It shows 2 problem:\nOne instance of \"org.apache.catalina.session.StandardManager\" loaded by \"org.apache.catalina.loader.StandardClassLoader @ 0x7f00638\" occupies 3,112,280 (56.61%) bytes. The memory is accumulated in one instance of \"java.util.concurrent.ConcurrentHashMap$HashEntry[]\" loaded by \"<system class loader>\".\n\nThe classloader/component \"org.apache.catalina.loader.StandardClassLoader @ 0x7f00638\" occupies 637,728 (11.60%) bytes. The memory is accumulated in one instance of \"java.lang.Object[]\" loaded by \"<system class loader>\"."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 143788, "time": "2011-01-29T07:09:45Z", "bug_id": 50685, "creation_time": "2011-01-29T07:09:45Z", "is_private": false, "text": "Please use the users mailing list if you require further advice."}, {"count": 2, "tags": [], "bug_id": 50685, "attachment_id": null, "id": 172898, "creation_time": "2014-02-05T08:43:01Z", "time": "2014-02-05T08:43:01Z", "creator": "zlelik2000@gmail.com", "text": "(In reply to Mark Thomas from comment #1)\n> Please use the users mailing list if you require further advice.\n\nHello,\nCould you please explain why this bug is resolved or maybe it was moved to another place? If so, please give me a link to correct one.", "is_private": false}, {"count": 3, "tags": [], "bug_id": 50685, "attachment_id": null, "id": 172899, "time": "2014-02-05T09:13:58Z", "creator": "markt@apache.org", "creation_time": "2014-02-05T09:13:58Z", "is_private": false, "text": "The bug was resolved as invalid because there is no bug here. If you do not understand why this bug is invalid, please ask on the users mailing list."}, {"count": 4, "tags": [], "creator": "zlelik2000@gmail.com", "attachment_id": null, "text": "(In reply to Mark Thomas from comment #3)\n> The bug was resolved as invalid because there is no bug here. If you do not\n> understand why this bug is invalid, please ask on the users mailing list.\nHello,\nHow can I ask on the users mailing list? If I send email to dev@tomcat.apache.org system answer me that email cannot be delivered. I send it from email, which I used for registration on the issues.apache.org. I could not found on this website, how to subscribe on the users mailing list.", "id": 172904, "time": "2014-02-05T10:37:20Z", "bug_id": 50685, "creation_time": "2014-02-05T10:37:20Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 50685, "attachment_id": null, "text": "@Z, you should send email to users-subscribe@tomcat.apache.org to subscribe.", "id": 172908, "time": "2014-02-05T15:10:21Z", "creator": "dbaktiar@gmail.com", "creation_time": "2014-02-05T15:10:21Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 50685, "attachment_id": null, "text": "1. This page has links:\nhttp://tomcat.apache.org/bugreport.html#Bugzilla_is_not_a_support_forum\n\n2. I added a comment on the original issue to the FAQ page here:\nhttp://wiki.apache.org/tomcat/OutOfMemory", "id": 172909, "time": "2014-02-05T15:14:23Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-02-05T15:14:23Z", "is_private": false}]