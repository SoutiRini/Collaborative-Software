[{"count": 0, "tags": [], "bug_id": 5314, "text": "Hi,\n\nthe following patch fixes an NPE in org.apache.tomcat.util.xml.XmlMapper\nthat occurs when an Exception is thrown outside of the root element.\nThis applies in particular, if the web.xml doesn't contain a DOCTYPE\ndeclaration, because in that case an Exception is thrown for warning\npurposes.\n\n--- org\\apache\\tomcat\\util\\xml\\XmlMapper.java.orig      Fri Dec  7 13:29:12 2001\n\n+++ org\\apache\\tomcat\\util\\xml\\XmlMapper.java   Fri Dec  7 13:29:58 2001\n@@ -98,12 +98,14 @@\n        sb.append(\"/\");\n        for( int i=0; i< sp ; i++ ) sb.append( tagStack[i] ).append( \"/\" );\n        sb.append(\" \");\n+       if (sp > 0) {\n        AttributeList attributes=(AttributeList) attributeStack[sp-1];\n        if( attributes!=null)\n            for (int i = 0; i < attributes.getLength (); i++) {\n                sb.append(attributes.getName(i)).append( \"=\" ).append(attributes\n.getValue(i));\n                sb.append(\" \");\n            }\n+       }\n\n        return sb.toString();\n     }", "id": 8685, "time": "2001-12-07T05:42:03Z", "creator": "jochen.wiedmann@softwareag.com", "creation_time": "2001-12-07T05:42:03Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "bojan@binarix.com", "attachment_id": null, "text": "Thanks. Applied.\n\nBojan", "id": 9030, "time": "2001-12-18T16:03:06Z", "bug_id": 5314, "creation_time": "2001-12-18T16:03:06Z", "is_private": false}]