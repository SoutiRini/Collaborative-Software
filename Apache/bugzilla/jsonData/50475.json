[{"count": 0, "tags": [], "creator": "ansoni@gmail.com", "text": "Created attachment 26403\ntestFragment Patch of MenuFactory, TestPlan and IncludeController to support this enhancement\n\nThe Include and Module controller logic currently has some bad user flows.  Here is the main one I see:\n\nUser Flow: Update Include File\n\n1.  Open Existing Include File\n    -- Contained Element is automatically added to WorkBench\n2.  Edit File\n3.  Click on desired Node\n4.  File->Save Selection As\n5.  Rename file if needed(it takes the name of the Node()\n6.  Overwrite Existing?  -> Yes\n\nThis overly complicated flow is introduced because Include-type JMX files are second-rate citizens.  They are not part of a Test Plan so they cannot be automatically saved with Ctrl+S.  Also, since they cannot contain any save-able Thread Groups, they have to be debugged with another Test Plan that imports it.  This is another bad user-flow.\n\nEnhancement:  Introduce a sub-TestPlan Test Element named Test Fragment that can be used for holding non-executing trees.\n\nThis element behaves like the Thread Group except that it doesn't execute during a Run->Start.  Since it exists underneath the Test Plan element, it can be saved in the more natural flow preventing users from accidentally over-writing their include file with a blank Test Plan.  The IncludeController would be enhanced to support importing these Test Fragments while maintaining support for the non-Test Plan JMX files that already exist.\n\nA side-affect of this change is that a user could also create a Thread Group for the Include File that can Regress the Test Fragment logic by simply using the ModuleController to run the Test Fragment Tree.", "id": 142696, "time": "2010-12-14T15:39:01Z", "bug_id": 50475, "creation_time": "2010-12-14T15:39:01Z", "is_private": false, "attachment_id": 26403}, {"count": 1, "tags": [], "creator": "ansoni@gmail.com", "text": "Created attachment 26404\nTestFragmentController.java", "id": 142697, "time": "2010-12-14T15:40:08Z", "bug_id": 50475, "creation_time": "2010-12-14T15:40:08Z", "is_private": false, "attachment_id": 26404}, {"count": 2, "tags": [], "bug_id": 50475, "attachment_id": 26405, "text": "Created attachment 26405\nTestFragmentControllerGUI.java", "id": 142698, "time": "2010-12-14T15:40:50Z", "creator": "ansoni@gmail.com", "creation_time": "2010-12-14T15:40:50Z", "is_private": false}, {"attachment_id": 26406, "tags": [], "bug_id": 50475, "text": "Created attachment 26406\nScreenshot showing how this would exist in the Test Plan Tree", "count": 3, "id": 142699, "time": "2010-12-14T15:41:54Z", "creator": "ansoni@gmail.com", "creation_time": "2010-12-14T15:41:54Z", "is_private": false}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "text": "I've had a look at the patch. It seems to work well, and does not appear to affect existing test plans.\n\nHowever, there are some odd bits of code that don't appear to do anything in the TestFragmentControllerGui class:\n\n        if (element instanceof TestFragmentController) {\n            TestFragmentController testFragmentController = (TestFragmentController) element;\n        }\n\nand\n\n        if (controller instanceof TestFragmentController) {\n        }\n\nIs there some code missing here? Or should these code snippets be removed?", "id": 142748, "time": "2010-12-15T12:47:15Z", "bug_id": 50475, "creation_time": "2010-12-15T12:47:15Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "sebb@apache.org", "text": "Forgot to mention - it would be useful to have a documentation patch for component_reference.xml if at all possible.", "id": 142749, "time": "2010-12-15T12:49:54Z", "bug_id": 50475, "creation_time": "2010-12-15T12:49:54Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "ansoni@gmail.com", "text": "The instanceof portions were left-over from the re-use of an existing component.  No missing code... they can just be removed.\n\nI will update the component_reference.xml and attach shortly.", "id": 142753, "time": "2010-12-15T14:20:02Z", "bug_id": 50475, "creation_time": "2010-12-15T14:20:02Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 50475, "attachment_id": 26412, "text": "Created attachment 26412\nuser_manual patches for test_plan and component_reference", "id": 142755, "time": "2010-12-15T15:08:50Z", "creator": "ansoni@gmail.com", "creation_time": "2010-12-15T15:08:50Z", "is_private": false}, {"count": 8, "attachment_id": null, "creator": "ansoni@gmail.com", "text": "Document patch attached.  New Section added in the test_plan.xml to give an overview of the Test Fragment Element and the Include Controller section updated to reflect the new flow.", "id": 142756, "time": "2010-12-15T15:11:53Z", "bug_id": 50475, "creation_time": "2010-12-15T15:11:53Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "bug_id": 50475, "text": "Thanks very much. Patches applied with a few minor tweaks:\n\nURL: http://svn.apache.org/viewvc?rev=1049771&view=rev\nLog:\nBug 50475 - Introduction of a Test Fragment Test Element for a better Include flow\n\nAdded:\n   jakarta/jmeter/trunk/docs/images/screenshots/test_fragment.png   (with props)\n   jakarta/jmeter/trunk/src/components/org/apache/jmeter/control/TestFragmentController.java   (with props)\n   jakarta/jmeter/trunk/src/components/org/apache/jmeter/control/gui/TestFragmentControllerGui.java   (with props)\n   jakarta/jmeter/trunk/xdocs/images/screenshots/test_fragment.png   (with props)\nModified:\n   jakarta/jmeter/trunk/bin/saveservice.properties\n   jakarta/jmeter/trunk/src/components/org/apache/jmeter/control/IncludeController.java\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/control/gui/TestPlanGui.java\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/gui/util/MenuFactory.java\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/resources/messages.properties\n   jakarta/jmeter/trunk/xdocs/changes.xml\n   jakarta/jmeter/trunk/xdocs/usermanual/component_reference.xml\n   jakarta/jmeter/trunk/xdocs/usermanual/test_plan.xml\n\nCode will be in nightly builds from r1049771", "id": 142763, "time": "2010-12-15T22:10:35Z", "creator": "sebb@apache.org", "creation_time": "2010-12-15T22:10:35Z", "is_private": false, "attachment_id": null}]