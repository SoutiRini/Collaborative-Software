[{"count": 0, "text": "Will post an example tomorrow but I haev been playing offline with you applet example and if you click on any element with xlink:href=\"{url}\" it crashes the browser rather than navigates to the url.\n\nThis may be 'expected' behavior as clearly the applet demo is of the simplest form - if this is the case a couple of pointers as to the 'correct' way of correcting it would be really helpful (I'm a relative newcomer to Java from an XML/XSLT/XHTML/Javascript background so aplogies)", "bug_id": 48561, "attachment_id": null, "id": 133662, "time": "2010-01-17T12:51:46Z", "creator": "chris@bodar.com", "creation_time": "2010-01-17T12:51:46Z", "tags": [], "is_private": false}, {"count": 1, "text": "This does not occur on every machine I've tested with but quite a few (firefox and IW when it occurs)  . However importing the batik-gui-util.jar seem to prevent the crash so presumably it's that error that causes the problem rather than the security problem. Not ideal to have the error popup is it possible to handle the error console exception by checking for the classes presence?\n\nJava Plug-in 1.6.0_18\nUsing JRE version 1.6.0_18-b07 Java HotSpot(TM) Client VM\nUser home directory = C:\\Documents and Settings\\chrisbod\n----------------------------------------------------\nc:   clear console window\nf:   finalize objects on finalization queue\ng:   garbage collect\nh:   display this help message\nl:   dump classloader list\nm:   print memory usage\no:   trigger logging\nq:   hide console\nr:   reload policy configuration\ns:   dump system and deployment properties\nt:   dump thread list\nv:   dump thread stack\nx:   clear classloader cache\n0-5: set trace level to <n>\n----------------------------------------------------\n\n\njava.lang.NoClassDefFoundError: org/apache/batik/util/gui/JErrorPane\n\tat org.apache.batik.swing.JSVGCanvas$CanvasUserAgent.displayError(JSVGCanvas.java:1124)\n\tat org.apache.batik.swing.svg.AbstractJSVGComponent$BridgeUserAgentWrapper.displayError(AbstractJSVGComponent.java:2347)\n\tat org.apache.batik.swing.svg.AbstractJSVGComponent$SVGListener.documentLoadingFailed(AbstractJSVGComponent.java:1486)\n\tat org.apache.batik.swing.svg.SVGDocumentLoader$4.dispatch(SVGDocumentLoader.java:161)\n\tat org.apache.batik.util.EventDispatcher.dispatchEvent(EventDispatcher.java:103)\n\tat org.apache.batik.util.EventDispatcher.fireEvent(EventDispatcher.java:87)\n\tat org.apache.batik.util.EventDispatcher$1.run(EventDispatcher.java:46)\n\tat java.awt.event.InvocationEvent.dispatch(Unknown Source)\n\tat java.awt.EventQueue.dispatchEvent(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\n\tat java.awt.EventDispatchThread.run(Unknown Source)\nCaused by: java.lang.ClassNotFoundException: org.apache.batik.util.gui.JErrorPane\n\tat sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)\n\tat java.lang.ClassLoader.loadClass(Unknown Source)\n\tat java.lang.ClassLoader.loadClass(Unknown Source)\n\t... 15 more\nCaused by: java.io.FileNotFoundException: E:\\AndAgain\\batik\\org\\apache\\batik\\util\\gui\\JErrorPane.class (The system cannot find the path specified)\n\tat java.io.FileInputStream.open(Native Method)\n\tat java.io.FileInputStream.<init>(Unknown Source)\n\tat java.io.FileInputStream.<init>(Unknown Source)\n\tat sun.net.www.protocol.file.FileURLConnection.connect(Unknown Source)\n\tat sun.net.www.protocol.file.FileURLConnection.getInputStream(Unknown Source)\n\tat sun.plugin2.applet.Applet2ClassLoader.getBytes(Unknown Source)\n\tat sun.plugin2.applet.Applet2ClassLoader.access$000(Unknown Source)\n\tat sun.plugin2.applet.Applet2ClassLoader$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\t... 18 more", "bug_id": 48561, "is_private": false, "id": 133679, "time": "2010-01-18T04:21:15Z", "creator": "chris@bodar.com", "creation_time": "2010-01-18T04:21:15Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 48561, "attachment_id": null, "text": "(In reply to comment #1)\n> This does not occur on every machine I've tested with but quite a few (firefox\n> and IW when it occurs)  . However importing the batik-gui-util.jar seem to\n> prevent the crash so presumably it's that error that causes the problem rather\n> than the security problem.\n\nI'm not sure how it was assumed that the jar could be left out. It's even used in the demo [1]... ;-)\n\n\n> Not ideal to have the error popup is it possible to\n> handle the error console exception by checking for the classes presence?\n\nI guess not that way, but you probably can reimplement code so that the error pop-up is displayed differently. Note that the error pop-up is used for displaying... Errors! :-) So you probably don't want (in most cases, that is) simply discard them. You (and/or your users) will want to be informed so the erroneous content can be fixed.\n\n\nNote that I'm having extreme difficulty in trying to imagine a bug from this report. I'm much more inclined to marking it \"invalid\", but I'm marking it as \"need info\" so that more information is added which can then turn this into a bug report [2]. Please update with more info or close the issue accordingly! :-)\n\n\nFinally, the most updated sources [3] contains a fix which solved a security problem which forced applets to be signed. In the mean time, my current guess goes to security policy issues, not related to Batik...\n\n\n[1] http://xmlgraphics.apache.org/batik/demo.html\n[2] http://www.chiark.greenend.org.uk/~sgtatham/bugs.html\n[3] http://xmlgraphics.apache.org/batik/download.cgi#Subversion+repository", "id": 133708, "time": "2010-01-19T15:40:00Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2010-01-19T15:40:00Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 48561, "attachment_id": null, "id": 133886, "time": "2010-01-25T08:24:55Z", "creator": "chris@bodar.com", "creation_time": "2010-01-25T08:24:55Z", "is_private": false, "text": "Not sure what you mean by the demo containing the batik-gui-util - certainly not the one in my cache!!! 8-)\n\n<applet archive=\"batik-awt-util.jar,                            batik-bridge.jar,                            batik-css.jar,                            batik-dom.jar,                            batik-ext.jar,                            batik-gvt.jar,                            batik-parser.jar,                            batik-svg-dom.jar,                            batik-script.jar,                            batik-swing.jar,                            batik-util.jar,                            batik-xml.jar,                            xml-apis-dom3.jar\" code=\"AppletDemo.class\" codebase=\"demo/\" height=\"300\" mayscript=\"mayscript\" width=\"400\" id=\"chart\">\n\nBut I take your point.\n\nI'm capturing the event, changing the host page's location and stopping the applet to prevent the error wherever possible (it still seems to cause the odd exception on disposal but hey) So I guess it should be ruled out as a bug - surely though there should be a silent/console only error reporting flag or similar - my users would think they had a virus if they saw exceptions like that.\n\nSo I guess the bug is simply the absence of the jar in the demo page!\n\n\nThanks for your time"}, {"count": 4, "tags": [], "bug_id": 48561, "attachment_id": null, "text": "(In reply to comment #3)\n> Not sure what you mean by the demo containing the batik-gui-util - certainly\n> not the one in my cache!!! 8-)\n\nYup, you are right. My bad. I guess the demo wasn't made to handle errors but more towards being simple and download friendly. ;-)\n\n\n> But I take your point.\n> \n> I'm capturing the event, changing the host page's location and stopping the\n> applet to prevent the error wherever possible (it still seems to cause the odd\n> exception on disposal but hey) So I guess it should be ruled out as a bug -\n> surely though there should be a silent/console only error reporting flag or\n> similar - my users would think they had a virus if they saw exceptions like\n> that.\n\nThing is, SVG's error processing [1] states that the object should stop rendering whenever an error occurs and stuff like that, which makes it necessary to warn the author/user whenever bad content is detected; else the user might be tricked into a situation where he feels that everything is as expected when it may not even have completely loaded! (Imagine a broken script, for example).\n\nSo the errors in your case are probably just content errors. I'd ask (again) that you'd confirm that and, if the errors are unexpected, to attach test cases to this bug.\n\n\n> So I guess the bug is simply the absence of the jar in the demo page!\n\nI'm not sure, given that it's a demo (i.e., \"batik-gui-util.jar\" is not even there). I'm considering building a wiki page with more information on how to assemble a standard Batik-based applet, though... ;-)\n\n\nDoes keeping this issue open still makes sense?\n\n\n[1] http://www.w3.org/TR/SVG/implnote.html#ErrorProcessing", "id": 133911, "time": "2010-01-25T16:15:13Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2010-01-25T16:15:13Z", "is_private": false}, {"count": 5, "text": "No, I guess not the behaviour is correct.\n\nPS\nIf you are thinking of creating an applet wiki page - ive been playing with making an applet duplicate Mozilla's implementation and ASV.\n\nI've come across the following problems so far:\n\nRight-clicking (popuptriggering) a link fires a link activation event and loads the link into the applet (if it's from the right domain ) - I can't seem to overrride this behaviour pleasantly (and find it an odd behaviour TBH) . Hooking into the actual document Events is no good as there are too many edge cases with scripting to guarantee correct behaviour (although maybe right click detection might be safe)\n\nSince I can't detect popupTrigger in the linkactivation event I guess I'll have to look elsewhere to intercept the event (i'm currently trying to glasspane the applet to introduce a context menu but this seesm to be failing for me - despite not routing the event beyond the glasspane the SVGCanvas seems to be picking up the right click - I guess the layering is more interesting than I bargained or I'm just stupid)\n\nFinally there's no meaningful way of implementing getSVGDocument/providing Mozilla/ASV style DOM scripting from the host page as it looks like scripting Rhino wrapped objects in applets from a browser won't work and obviously returning the Java SVOGDocument provides a different interface to the document anyway\n\nPS I am a stupid noob to Java so I often speak nonsense \n\nChristian", "bug_id": 48561, "is_private": false, "id": 133929, "time": "2010-01-26T03:37:45Z", "creator": "chris@bodar.com", "creation_time": "2010-01-26T03:37:45Z", "tags": [], "attachment_id": null}]