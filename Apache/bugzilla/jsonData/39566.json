[{"count": 0, "attachment_id": null, "bug_id": 39566, "text": "Hi, \n\nhandles or win32 pipes get exhausted to 7000 handles on the jboss-tomcat.\nthe servlet deployed in tomcat 5.0.28 works in tomcat 4.04 standalone.\nthe same old .war file.\n\nThe problem is that each time the page get accessed, it will open a new\nhandle without recycling \"Win32pipe\", while in tomcat 4.04 standalone,\nproblem does not exist.\n\nI double check the code and it close stream in/output and process destroy\nproperly. In jboss-tomcat.log with full debug mode. I get the following\nafter 800 hits on the page.\n\nPlease investigate further, it is not an OS issue, because I monitor \nthe handles with taskinfo and OH.exe. It is growing inside tomcat.\n\nthanks and regards\n\nhoward\n=======\n\nHTTP Status 500 - \n\n--------------------------------------------------------------------------------\n\ntype Exception report\n\nmessage \n\ndescription The server encountered an internal error () that prevented it from \nfulfilling this request.\n\nexception \n\njava.io.IOException: Too many open files\n\tjava.io.FileInputStream.open(Native Method)\n\tjava.io.FileInputStream.<init>(FileInputStream.java:106)\n\torg.apache.naming.resources.FileDirContext$FileResource.streamContent\n(FileDirContext.java:955)\n\torg.apache.catalina.servlets.DefaultServlet$ResourceInfo.getStream\n(DefaultServlet.java:2436)\n\torg.apache.catalina.servlets.DefaultServlet.copy\n(DefaultServlet.java:1866)\n\torg.apache.catalina.servlets.DefaultServlet.serveResource\n(DefaultServlet.java:985)\n\torg.apache.catalina.servlets.DefaultServlet.doGet\n(DefaultServlet.java:448)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:697)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:810)\n\tcom.mercury.j2f.j2eeutils.GZipSetCharacterEncodingFilter.doFilter\n(GZipSetCharacterEncodingFilter.java:189)\n\torg.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter\n(ReplyHeaderFilter.java:75)\n\n\nnote The full stack trace of the root cause is available in the Apache \nTomcat/5.0.28 logs.", "id": 89065, "time": "2006-05-12T03:48:47Z", "creator": "hliu@mercury.com", "creation_time": "2006-05-12T03:48:47Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 39566, "text": "If it works on Tomcat stand-alone but not tomcat embedded in jboss this is a an\nissue for the jboss team rather than the tomcat team. Please follow this up with\nthem.", "id": 90070, "time": "2006-06-11T22:18:48Z", "creator": "markt@apache.org", "creation_time": "2006-06-11T22:18:48Z", "tags": [], "is_private": false}]