[{"count": 0, "tags": [], "creator": "rcolmegna@tiscali.it", "attachment_id": null, "id": 74300, "time": "2005-05-01T08:52:21Z", "bug_id": 34693, "creation_time": "2005-05-01T08:52:21Z", "is_private": false, "text": "Environment condition:\n- noised ethernet connection (10Mbit/sec - real speed due to interference: \n  80Kbyte/sec)\n\nProblem:\n- tomcat-app stop to reply http request after some reply (3 / 5)\n\nNetwork analisys:\n- server connection-state presentes some cli->srv TCP connection in\n  timing-out state (LAST_ACK / CLOSE_WAIT)\n- client has all connections in established/full-closed states\n\nEvidence:\n- some network close-connection packets have been lost. This condition\n  hang tomcat-web-application"}, {"count": 1, "tags": [], "bug_id": 34693, "attachment_id": null, "id": 74384, "time": "2005-05-03T16:31:15Z", "creator": "yoavs@computer.org", "creation_time": "2005-05-03T16:31:15Z", "is_private": false, "text": "We need more information to reproduce this condition.  I haven't been able to\nreproduce it, so I'm closing this issue for now.  Any advice on setting this up\nwould be good.  Alternatively, feel free to bring up your situation on the\ntomcat-user and tomcat-dev mailing lists, and we can try to help there, as it's\na better discussion forum than Bugzilla."}, {"count": 2, "tags": [], "text": "> We need more information to reproduce this condition.  \n\nPlease, can you inform be about whats info do you need?\n\nFor now I can tell to you that:\n\n- the same web-app works perfectly from another PC which is connected\n  to the same server without noised cable\n\n- when the web-app hangs the other web-apps already works (but not the same-one)\n\nI traced network traffic and I have noticed that, with the sever-side TCP/IP\nconnection state at CLOSE_WAIT, Tomcat use this connection to try to send\nHTTP-reply-fragment to client.", "is_private": false, "bug_id": 34693, "id": 74424, "time": "2005-05-04T11:36:13Z", "creator": "rcolmegna@tiscali.it", "creation_time": "2005-05-04T11:36:13Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 34693, "attachment_id": null, "text": "Roberto,\nplease could you provide us more detail about:\n- the version of Tomcat and jvm you are running\n- OS and hw platform\n- network config and appliances\n\nYour issue seems strongly related to Bug #28727", "id": 74513, "time": "2005-05-06T10:51:02Z", "creator": "aquilino@dreamteam.it", "creation_time": "2005-05-06T10:51:02Z", "is_private": false}, {"count": 4, "tags": [], "creator": "rcolmegna@tiscali.it", "text": "> - the version of Tomcat and jvm you are running\njava version \"1.5.0_02\"\n\n> - OS and hw platform\nLinux k900 2.6.8.1-10mdk #1 Wed Sep 8 17:00:52 CEST 2004 i686 AMD Athlon(tm) 64 \nunknown GNU/Linux (Mandrake 10.1)\n\nProcessor: Athlon 64 3000+\nRAM: 512MByte (kingmax)\nHD: 160Gbyte (maxtor)\nLan card: realtek\nMotherboard: ASUS A8V\n\n\n> - network config and appliances\n\nA \"classic\" SOHO switch who has connected:\n- LINUX server (with tomcat)\n- a WinME client (on a short unnoised ethernet cable)\n- a WinXP client (on a long noised ethernet cable)\n\nIf I use WinME my web-app works correctly. \nIf I use WinXP (with a short cable) my web-app works correctly. \nIf I use WinXP (with the long noised cable) my web-app hangs after 3 HTTP reqs\n\nNote: the hang is systematically reproduceable\n\n\n> Your issue seems strongly related to Bug #28727\nI don't know\n", "id": 74519, "time": "2005-05-06T12:05:49Z", "bug_id": 34693, "creation_time": "2005-05-06T12:05:49Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "text": "Hi,\n\nI have un update about my bug. I have thied to build a workaround.\nI have executed this command (on linux srv):\nredir --lport=8081  --cport=8080\n\nThis command listen on port 8081 and redir every single connection to\nport 8080 (tomcat).\n\nIf I connect to 8081 from the noised client my web-app works perfectly\nwithout hang-up.\n\n\"redir\" isolating tomcat from the noised connections. In fact if I\nexecute a \"netstat -n\" I can see pending connection from redir and\nclient BUT I don't see pending connection between tomcat and redir.\n\nNote: \"redir\" is an internet downloadable utility \n[http://dag.wieers.com/packages/redir/]\n\nTIA\nRoberto Colmegna\n\n\n", "is_private": false, "bug_id": 34693, "id": 74575, "time": "2005-05-08T09:01:13Z", "creator": "rcolmegna@tiscali.it", "creation_time": "2005-05-08T09:01:13Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "If you cannot point out any defect inside Tomcat, then we'll have to assume this\nis caused by a bad configuration of your network stack.\n-> INVALID", "is_private": false, "bug_id": 34693, "id": 74785, "time": "2005-05-12T12:27:33Z", "creator": "remm@apache.org", "creation_time": "2005-05-12T12:27:33Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 34693, "attachment_id": null, "id": 74877, "time": "2005-05-14T09:58:15Z", "creator": "rcolmegna@tiscali.it", "creation_time": "2005-05-14T09:58:15Z", "is_private": false, "text": "This isn't plausibile: the same wrong behaviour appear \nwith tomcat on WinXP in the same noised-network."}, {"count": 8, "tags": [], "bug_id": 34693, "attachment_id": null, "id": 74879, "time": "2005-05-14T10:58:48Z", "creator": "remm@apache.org", "creation_time": "2005-05-14T10:58:48Z", "is_private": false, "text": "This is simply wasting time. Please do not reopen the report until you can point\nout a specific defect in Tomcat."}, {"count": 9, "tags": [], "bug_id": 34693, "attachment_id": null, "text": "Reply to a private email:\n\nAt the moment, I am certain that the socket is closed properly by Tomcat at the\nend of the processing of the connection (input is shutdown, and then the socket\nis closed). So this is done properly (if you can find a case where this is not\ndone properly, you can report it), then there's no explanation for the problem.\n\nWe are working to have Tomcat use APR for the network stack (also used as the\nnetwork stack in Apache httpd 2.x, so hopefully it is really robust and reliable\n;) ) instead of the JVM's network stack. We'll be recommending that as the\n\"production\" stack to use after testing, and this could address your issue (that\nhas been reported quite a few times, I have to admit).\n", "id": 74889, "time": "2005-05-15T10:25:51Z", "creator": "remm@apache.org", "creation_time": "2005-05-15T10:25:51Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 34693, "attachment_id": null, "text": "Hi Remy,\n\nI have executed some other test and I have discovered that if I force\nthe client-side (ie the internet browser) to use ONLY HTTP 1.0 \n(and NOT use HTTP 1.1) the problem disappears at all!\n\nIn my opinion this is the evidence that the problem isn't in network-stack \n(excluding both of OS or java.net.*) .\n\nRegards,\nRoberto Colmegna", "id": 74971, "time": "2005-05-17T19:05:09Z", "creator": "rcolmegna@tiscali.it", "creation_time": "2005-05-17T19:05:09Z", "is_private": false}, {"count": 11, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 74985, "time": "2005-05-18T09:13:41Z", "bug_id": 34693, "creation_time": "2005-05-18T09:13:41Z", "is_private": false, "text": "Ok, I give up trying to close this report, but I won't look into it either."}, {"count": 12, "tags": [], "bug_id": 34693, "is_private": false, "id": 74986, "creation_time": "2005-05-18T09:37:23Z", "time": "2005-05-18T09:37:23Z", "creator": "rcolmegna@tiscali.it", "text": "Marked as invalid as requested from Remy via private email\n\n... but this does not mean that the problem is solved!\n\n\n\n", "attachment_id": null}, {"count": 13, "tags": [], "text": "in \"conf/server.xml\", in the node:\n\n<Connector port=\"8080\" maxHttpHeaderSize=\"8192\" ...>\n\nadd the attribute connectionLinger=\"60000\" seem to solve/alleviate the \nproblem.\n", "is_private": false, "bug_id": 34693, "id": 76423, "time": "2005-06-15T10:40:24Z", "creator": "rcolmegna@tiscali.it", "creation_time": "2005-06-15T10:40:24Z", "attachment_id": null}]