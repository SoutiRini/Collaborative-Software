[{"count": 0, "tags": [], "bug_id": 38158, "is_private": false, "id": 84295, "attachment_id": null, "creator": "stutzinho@yahoo.com", "creation_time": "2006-01-06T08:28:37Z", "time": "2006-01-06T08:28:37Z", "text": "Greetings...\n\nFirst of all, i would like to make clear that this problem DOESN'T occur with\nUPPERCASE LETTERS.\nI noticed a bug when displaying some special characters (\u00e1, \u00e9, \u00ed, \u00ea...) when\nthey are in lower case (I used both JSVGCanvas and Squiggle - batik's browser).\nThe bug is: if these characters are at the beginning of the line, i.e., if they\nare the first letter of the line, everthing works fine, but if these characters\nare the second character or greater, the following error occurs:\n\njava.lang.ArrayIndexOutOfBoundsException: 23\n\tat org.apache.batik.gvt.flow.TextLineBreaks.findLineBrk(Unknown Source)\n\tat\norg.apache.batik.bridge.svg12.SVGFlowRootElementBridge.buildAttributedString(Unknown\nSource)\n\tat org.apache.batik.bridge.SVGTextElementBridge.computeLaidoutText(Unknown Source)\n\tat\norg.apache.batik.bridge.svg12.SVGFlowRootElementBridge.computeLaidoutText(Unknown\nSource)\n\tat org.apache.batik.bridge.SVGTextElementBridge.buildGraphicsNode(Unknown Source)\n\tat org.apache.batik.bridge.GVTBuilder.buildGraphicsNode(Unknown Source)\n\tat org.apache.batik.bridge.GVTBuilder.buildComposite(Unknown Source)\n\tat org.apache.batik.bridge.GVTBuilder.buildGraphicsNode(Unknown Source)\n\tat org.apache.batik.bridge.GVTBuilder.buildComposite(Unknown Source)\n\tat org.apache.batik.bridge.GVTBuilder.build(Unknown Source)\n\tat org.apache.batik.swing.svg.GVTTreeBuilder.run(Unknown Source)\n\n\nThe characters I noticed that had problems are:\n\u00e1, \u00e9, \u00ed, \u00f3, \u00fa, \u00ea, \u00e0, \u00fc\n\nThe others that I tested and worked fine are:\n\u00e3, \u00f5, \u00e2, \u00f4 and ALL characters in uppercase\n\n==== To illustrate the situation I made some tests. \n     The text that CAUSES ERROR is:\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\" standalone=\"no\"?>\n<svg\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   version=\"1.2\"\n   width=\"450\"\n   height=\"500\"  \n   id=\"body\">\n  <defs id=\"defs16\" />\n  <g\n     id=\"content\">\n    <flowRoot style=\"font-size:20px\" id=\"flowRoot6\">\n      <flowRegion id=\"flowRegion8\">\n        <rect width=\"780\" height=\"580\" x=\"10\" y=\"10\" id=\"rect10\" />\n      </flowRegion>\n      <flowDiv id=\"flowDiv12\">\n        <flowPara id=\"bug-test\" style=\"font-family:Courier New\">\n\t\tD\u00e1vio\n\t  </flowPara>\n      </flowDiv>\n    </flowRoot>\n  </g>\n</svg>\n\n\n\nThe text that WORKS FINE is:\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\" standalone=\"no\"?>\n<svg\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\n   xmlns=\"http://www.w3.org/2000/svg\"\n   version=\"1.2\"\n   width=\"450\"\n   height=\"500\"  \n   id=\"body\">\n  <defs id=\"defs16\" />\n  <g\n     id=\"content\">\n    <flowRoot style=\"font-size:20px\" id=\"flowRoot6\">\n      <flowRegion id=\"flowRegion8\">\n        <rect width=\"780\" height=\"580\" x=\"10\" y=\"10\" id=\"rect10\" />\n      </flowRegion>\n      <flowDiv id=\"flowDiv12\">\n        <flowPara id=\"bug-test\" style=\"font-family:Courier New\">\n\t\t\u00e1vio\n\t  </flowPara>\n      </flowDiv>\n    </flowRoot>\n  </g>\n</svg>\n\nSome other tests can be made by replacing the text inside the \"flowPara\" tag by\nwords like \"\u00e9veni\", \"f\u00e9veo\", \"toe\u00f5\u00e3\u00e2u\", \"s\u00c0\u00c9op\", ...\n\n\nWell, that's it... I hope you don't have problems understanding the explanation\nas well as fixing the bug...\n\nThanks in advance!\n\n Bye!\n\nTiago de Oliveira Stutz"}, {"count": 1, "attachment_id": null, "creator": "deweese@apache.org", "is_private": false, "id": 84366, "time": "2006-01-09T13:10:14Z", "bug_id": 38158, "creation_time": "2006-01-09T13:10:14Z", "tags": [], "text": "This should be fixed in SVN now (trunk and svg11)."}, {"count": 2, "attachment_id": null, "bug_id": 38158, "is_private": false, "id": 84375, "time": "2006-01-09T16:15:20Z", "creator": "stutzinho@yahoo.com", "creation_time": "2006-01-09T16:15:20Z", "tags": [], "text": "(In reply to comment #1)\n> This should be fixed in SVN now (trunk and svg11).\n\n\nOh right!! Thanks in advance for your help!!"}]