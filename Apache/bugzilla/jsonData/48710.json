[{"count": 0, "attachment_id": null, "creator": "gerbra@gotadsl.co.uk", "is_private": false, "id": 134357, "time": "2010-02-09T03:07:04Z", "bug_id": 48710, "creation_time": "2010-02-09T03:07:04Z", "tags": [], "text": "Hi,\n\nI would like to open a Bug report for a 2.2.14 Apache2 installation.\nTried to search for the problem here, but couldn't find anything which looks like my issue. \n\nI got several vhosts configured on my machine. They were all working fine until I updated to 2.2.14 (Debian). For some unknown (for me) reason, one of the vhosts is not working anymore in the way, that it will not use the DocumentRoot configured within the vhosts configuration file, and tried to look for the htdocs in the compiled default location, which is /etc/apache2/htdocs\n\n[Tue Feb 09 10:59:42 2010] [error] [client x.x.x.x] File does not exist: /etc/apache2/htdocs\n\nWhere this is the vhost config:\n\n<Directory /var/www/derchris.eu/htdocs/>\nAddHandler fcgid-script .php\nFCGIWrapper /usr/lib/cgi-bin/php5 .php\n</Directory>\n\n<VirtualHost derchris.eu:80>\n        ServerAdmin derchris@derchris.eu\n        ServerName derchris.eu\n        ServerAlias www.derchris.eu derchris.net *.derchris.eu *.derchris.net\n        DocumentRoot /var/www/derchris.eu/htdocs/\n        <Directory /var/www/derchris.eu/htdocs/>\n                Options ExecCGI Indexes +FollowSymLinks MultiViews\n                AllowOverride all\n                Order allow,deny\n                allow from all\n                #RedirectMatch ^/$ /redirect.html\n        </Directory>\n        ScriptAlias /cgi-bin/ /var/www/derchris.eu/cgi-bin/\n        <Directory \"/var/www/derchris.eu/cgi-bin/\">\n                AllowOverride None\n                Options ExecCGI -MultiViews +SymLinksIfOwnerMatch\n                Order allow,deny\n                Allow from all\n        </Directory>\n        RewriteLog /var/www/derchris.eu/logs/apache2/rewrite.log\n        RewriteLogLevel 6\n\n        ErrorLog /var/www/derchris.eu/logs/apache2/error.log\n        CustomLog /var/www/derchris.eu/logs/apache2/access.log combined\n        LogLevel warn\n        ServerSignature On\n</VirtualHost>\n\n<VirtualHost derchris.eu:443>\n        ServerAdmin derchris@derchris.eu\n        ServerName derchris.eu\n        ServerAlias www.derchris.eu derchris.net *.derchris.eu *.derchris.net\n        DocumentRoot /var/www/derchris.eu/htdocs/\n        <Directory /var/www/derchris.eu/htdocs/>\n                Options ExecCGI Indexes +FollowSymLinks MultiViews\n                AllowOverride all\n                Order allow,deny\n                allow from all\n                #RedirectMatch ^/$ /redirect.html\n        </Directory>\n        ScriptAlias /cgi-bin/ /var/www/derchris.eu/cgi-bin/\n        <Directory \"/var/www/derchris.eu/cgi-bin/\">\n                AllowOverride None\n                Options ExecCGI -MultiViews +SymLinksIfOwnerMatch\n                Order allow,deny\n                Allow from all\n        </Directory>\n        RewriteLog /var/www/derchris.eu/logs/apache2/rewrite.log\n        RewriteLogLevel 6\n\n        ErrorLog /var/www/derchris.eu/logs/apache2/error_ssl.log\n        CustomLog /var/www/derchris.eu/logs/apache2/access_ssl.log combined\n        LogLevel warn\n        ServerSignature On\n\n        SSLEngine on\n        SSLProtocol all -SSLv2\n        SSLCipherSuite ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM\n        SSLCertificateFile /etc/apache2/cert/derchris.eu/ssl.crt\n        SSLCertificateKeyFile /etc/apache2/cert/derchris.eu/ssl.key\n        SSLCertificateChainFile /etc/apache2/cert/derchris.eu/sub.class2.server.ca.pem\n        SSLCACertificateFile /etc/apache2/cert/derchris.eu/ca.pem\n        SetEnvIf User-Agent \".*MSIE.*\" nokeepalive ssl-unclean-shutdown\n        CustomLog /var/www/derchris.eu/logs/apache2/ssl.log \"%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\"%r\\\" %b\"\n</VirtualHost>\n\nAll vhosts are using the same structure, and only differ in the FS location.\nI don't see any error with the other vhosts, but just this one.\nAs you can see, DocumentRoot is configured within the vhost config, but Apache ignores this, and tries to look for /etc/apache2/htdocs\n\nHere is a apache2ctl -V\n\nServer version: Apache/2.2.14 (Debian)\nServer built:   Feb  7 2010 17:24:02\nServer's Module Magic Number: 20051115:23\nServer loaded:  APR 1.4.2, APR-Util 1.3.9\nCompiled using: APR 1.4.2, APR-Util 1.3.9\nArchitecture:   64-bit\nServer MPM:     Worker\n  threaded:     yes (fixed thread count)\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/worker\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=128\n -D HTTPD_ROOT=\"/etc/apache2\"\n -D SUEXEC_BIN=\"/usr/lib/apache2/suexec\"\n -D DEFAULT_PIDLOG=\"/var/run/apache2.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"mime.types\"\n -D SERVER_CONFIG_FILE=\"apache2.conf\"\n\nPlease let me know if you think this is a bug, and what else you would need from me in order to investigate this.\n\nKind regards,\nChristian"}, {"count": 1, "attachment_id": null, "creator": "rpluem@apache.org", "text": "This looks like a Debian specific issue please open a bug report at their bugzilla and come back if it really turns out to be an httpd bug.", "id": 134358, "time": "2010-02-09T03:37:58Z", "bug_id": 48710, "creation_time": "2010-02-09T03:37:58Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 134360, "time": "2010-02-09T04:27:26Z", "bug_id": 48710, "creation_time": "2010-02-09T04:27:26Z", "is_private": false, "text": "> <VirtualHost derchris.eu:80>\n> <VirtualHost derchris.eu:443>\n\nYou likely:\n\na) are receiving requests on an inerface that derchris.eu doesn't resolve to\nb) you don't have a catch-all vhost ofr (e.g. *:80)\nc) You either don't have a DocumentRoot in the base server config or it simply\n   matches what's in the compiled-in default."}, {"count": 3, "tags": [], "creator": "gerbra@gotadsl.co.uk", "attachment_id": null, "id": 134421, "time": "2010-02-11T10:59:55Z", "bug_id": 48710, "creation_time": "2010-02-11T10:59:55Z", "is_private": false, "text": "Thanks,\n\nI opened a Bug report with Debian.\n\nRegards,\nChristian"}]