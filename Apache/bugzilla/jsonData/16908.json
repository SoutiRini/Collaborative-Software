[{"count": 0, "attachment_id": null, "bug_id": 16908, "is_private": false, "id": 30937, "time": "2003-02-08T20:27:52Z", "creator": "agapon@telcordia.com", "creation_time": "2003-02-08T20:27:52Z", "tags": [], "text": "there is a bug in mod_mime_magic, due to which mod_mime_magic sets content type\nfor a file, that it can not actually recognize, to text/plain and returns\nsuccessful status. This happens because ascmagic() sets type to 'text/plain'\nand reurns success even if all magic check have failed. In addition to that,\neven if ascmagic() would behave correctly, module would anyway set content type\nto application/octet-stream and returned success.\nSuch a behaviour (1) overrides DefaultType parameter and makes it useless in\nthe presense of mod_mime_magic and (2) puts too much intelegence in \nmod_mime_magic by making a decision about 'last resort' content type, instead\nof honestly returning an error."}, {"count": 1, "tags": [], "bug_id": 16908, "attachment_id": 4791, "is_private": false, "id": 30938, "time": "2003-02-08T20:29:13Z", "creator": "agapon@telcordia.com", "creation_time": "2003-02-08T20:29:13Z", "text": "Created attachment 4791\nproposed patch"}, {"attachment_id": null, "tags": [], "bug_id": 16908, "text": "How-To-Repeat\n\n1. enable mod_mime_magic in apache\n2. set DefaultType to anything but text/plain\n3. create a file that is not of any known type and does not have any known \nextension, (in my case it was export of Windows2000 security console settings -\n*.msc file)\n4. make the file accessible via apache via http\n5. get the file from http client\n6. observe that apache returns content type as text/plain\n\n\n", "count": 2, "id": 30939, "time": "2003-02-08T20:30:15Z", "creator": "agapon@telcordia.com", "creation_time": "2003-02-08T20:30:15Z", "is_private": false}, {"count": 3, "tags": [], "text": "This has been fixed in httpd-2.0: modules/metadata/mod_mime_magic.c r1.61.\n\nI'm not entirely sure this will be backported to 1.3 or 2.0.  It could be, but this is esoteric enough that I think it can wait until 2.2.", "is_private": false, "id": 31571, "creator": "jerenkrantz@apache.org", "time": "2003-02-19T06:00:54Z", "bug_id": 16908, "creation_time": "2003-02-19T06:00:54Z", "attachment_id": null}]