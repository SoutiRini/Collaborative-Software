[{"count": 0, "tags": [], "creator": "rrussell@officemax.com", "attachment_id": null, "is_private": false, "id": 37269, "time": "2003-05-15T18:22:46Z", "bug_id": 19965, "creation_time": "2003-05-15T18:22:46Z", "text": "When trying to connect to tomcat's \"/examples\" with a minimalist configuration,\nmod_jk2 on Apache2 fails. The following is the entire restart-to-error stack\nfrom Apache's error_log:\n\n[Thu May 15 14:02:51 2003] [error] shm.init(): No file\n[Thu May 15 14:02:51 2003] [error] shm.init(): No file\n[Thu May 15 14:02:51 2003] [error] mod_jk child init 1 0\n[Thu May 15 14:02:51 2003] [error] shm.init(): No file\n[Thu May 15 14:02:51 2003] [error] shm.init(): No file\n[Thu May 15 14:02:51 2003] [notice] Apache/2.0.45 (Unix) DAV/2 mod_jk2/2.0.2\nconfigured -- resuming normal operations\n[Thu May 15 14:02:51 2003] [error] shm.init(): No file\n[Thu May 15 14:02:51 2003] [error] shm.init(): No file\n[Thu May 15 14:03:22 2003] [error] workerEnv.init() create slot epStat.0 failed\n[Thu May 15 14:03:22 2003] [error] lb.service() worker failed 120000 for\najp13:localhost:8009\n[Thu May 15 14:03:22 2003] [error] lb.service() unrecoverable error...\n[Thu May 15 14:03:22 2003] [error] mod_jk.handler() Error connecting to tomcat\n120000\n\nThis generates a 500 server error:\n10.0.103.20 - - [15/May/2003:14:03:22 -0400] \"GET /examples HTTP/1.1\" 500 628\n\n\nNothing is written to the logs on the Tomcat side.\n\n\nworkers2.properties: (standard issue)\n\n> # Define the communication channel \n> [channel.socket:localhost:8009]\n> info=Ajp13 forwarding over socket\n> tomcatId=localhost:8009\n> debug=10\n> \n> # Map the Tomcat examples webapp to the Web server uri space\n> [uri:/examples/*]\n> info=Map the whole webapp\n\n\nI suspect (but cannot confirm) that this may be a configuration or environment\nissue. I can install and perform this test on other different but similar\nmachines running the same OS. But, even if I copy over the entire Apache /\nTomcat installation from a working machine, it still creates this error. Even if\nthis is technically not a bug, I would still greatly appreciate any help with this. \n\nusing Apache 2.0.45 -> mod_jk2-2.0.43.so -> tomcat 4.1.24, on Solaris 8"}, {"count": 1, "tags": [], "text": "I'm having the same problem with close to exactly the same setup. I think it \nmay have something to do with having to specify a shared memory file although \nI'm not sure why it would use a shared memory file if it's using TCP/IP \nsockets for communication.\n\nJon\n", "attachment_id": null, "id": 37565, "creator": "jemiller@uchicago.edu", "time": "2003-05-21T20:54:02Z", "bug_id": 19965, "creation_time": "2003-05-21T20:54:02Z", "is_private": false}, {"count": 2, "tags": [], "creator": "tdonovan@macromedia.com", "attachment_id": null, "id": 39377, "time": "2003-06-24T22:47:51Z", "bug_id": 19965, "creation_time": "2003-06-24T22:47:51Z", "is_private": false, "text": "Exactly the same with apache 2.0.46 on Solaris 8.\n\nA quick workaround is to edit /jk/native2/common/jk_shm.c to supply a default \nname when shm->fname is blank.   This shared memory filename should probably \ncome from some config file - but I just can't find it either.\n\njk_shm.c\n332      if( shm->fname==NULL ) {\n333  /*      env->l->jkLog(env, env->l, JK_LOG_ERROR, \"shm.init(): No file\\n\");\n334          return JK_ERR;\n335  */\n336          shm->fname=\"/tmp/jk.shm\";\n337      }\n\n-tom-"}, {"count": 3, "tags": [], "text": "I don't weather this is related but I did a similiar setup ie apache \ncommunication with JBOSS/Tomcat (default configuartaion). I didn't specify any \nshared file. The configuration worked but on loading an Internal Sever error \noccured. Once I've put the shm file in place thsi error did not occur any \nmore   ", "is_private": false, "bug_id": 19965, "id": 40045, "time": "2003-07-07T08:51:57Z", "creator": "dmuscat@vodafonemalta.com", "creation_time": "2003-07-07T08:51:57Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "Maybe it helps to add the following to the workers2.properties file:\n\n[shm]\nfile=/programme/net/apache/logs/shm.file\nsize=1048576\n\nDaniel Frey", "is_private": false, "id": 42782, "creator": "daniel.frey@switzerland.org", "time": "2003-08-14T22:45:42Z", "bug_id": 19965, "creation_time": "2003-08-14T22:45:42Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "Daniel Excellent Recommendations!\n\nIt works.\n\nNow to should someone fix the fact that the worker2.properties files should\nreally be back in the $TOMCAT_HOME/conf directory.\n\nIt is a bit confusing that the worker2.properties file *should* be in the apache\nConf directory, but in reality needs to be in the SERVER_ROOT/conf directory -\nwhich aren't necessarily the same thing \u2013 I followed the instructions on\nhttp://jakarta.apache.org/tomcat/tomcat-4.1-doc/jk2/jk2/vhosthowto.html\n\nwhich state:  ./configure -prefix=/usr/local/apache2.0.43\n--sysconfdir=/etc/apache --localstatedir=/var --enable-so ", "attachment_id": null, "id": 43492, "creation_time": "2003-08-30T01:03:10Z", "time": "2003-08-30T01:03:10Z", "creator": "sai@dibacanada.com", "bug_id": 19965, "is_private": false}, {"count": 6, "tags": [], "text": "I had the same problem.  A review of the JK2 code revealed that the epStat slot \nobjects are created in the shared memory area.  Setting up a shared memory file \nshould resolve this issue.", "attachment_id": null, "id": 45798, "creation_time": "2003-10-16T18:48:53Z", "time": "2003-10-16T18:48:53Z", "creator": "chrisn@capitalstream.com", "bug_id": 19965, "is_private": false}, {"count": 7, "tags": [], "creator": "webmaster@swstrings.com", "attachment_id": null, "id": 47578, "time": "2003-11-18T22:00:48Z", "bug_id": 19965, "creation_time": "2003-11-18T22:00:48Z", "is_private": false, "text": "I had nothing but trouble with JK2, constantly getting the same error message \nin the JK2 debug log \"workerEnv.init() create slot epStat.0 failed\".  Then I \nran across this bug report.  Once I turned SHM on, the problem was fixed, just \nas the former person reported.  I think that this should get into the docs, \nbecause this is probably about 50% of the problems that people have with JK2.  \nIt is not clear from the docs that SHM is required, it seems like an option.  \nBut it also doesn't seem to work without it."}, {"count": 8, "tags": [], "text": "I got the same problem, but when i try to correct it with the following lines \nin workers2.properties :\n\n[shm]\nfile=${serverRoot}/logs/shm.file\nsize=1048576\ndebug=0\n\nthen i got the following error message in jk2.log :\n\n[Mon Nov 24 15:45:54 2003]  (error) [jk_shm.c (358)]: shm.create(): error \nmmapping c:/program files/apache group/apache/logs/shm.file\n\n????\n\nI'm using apache 1.3.29 on Windows XP", "is_private": false, "bug_id": 19965, "id": 48015, "time": "2003-11-24T16:13:41Z", "creator": "sbrunot@octo.com", "creation_time": "2003-11-24T16:13:41Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 19965, "attachment_id": null, "id": 67679, "time": "2004-12-01T03:00:19Z", "creator": "funkman@joedog.org", "creation_time": "2004-12-01T03:00:19Z", "is_private": false, "text": "As of November 15, 2004, JK2 is no longer supported. All bugs related to JK2 \nwill be marked as WONTFIX. In its place, some of its features have been \nbackported to jk1. Most of those features will be seen in 1.2.7, which is \nslated for release on November 30th, 2004.\n\nAnother alternative is the ajp addition to mod_proxy which will be part of \napache 2.\n\nFor more information on the Tomat connectors docs at\nhttp://jakarta.apache.org/tomcat/connectors-doc/"}]