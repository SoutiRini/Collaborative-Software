[{"count": 0, "tags": [], "creator": "hipo@design.bg", "is_private": false, "text": "As I said, After a compilation of apache 2.0.53 on fedora core 1 ( with all\npossible security upgrades ). The builded apache binary is linked for no reason\nto a libiconv library and the httpd binary searches for the library in the same\ndirectory where it is located. Here is a sample.\n[root@design.bg httpd-2.0.53]# ldd .libs/httpd\n        libz.so.1 => /usr/lib/libz.so.1 (0x002d0000)\n        libaprutil-0.so.0 => /usr/local/apache2/lib/libaprutil-0.so.0 (0x0060a000)\n        libgdbm.so.2 => /usr/lib/libgdbm.so.2 (0x00570000)\n        libdb-4.1.so => /lib/tls/libdb-4.1.so (0x00d97000)\n        libexpat.so.0 => /usr/lib/libexpat.so.0 (0x00b00000)\n        libiconv.so.2 => not found\n        libapr-0.so.0 => /usr/local/apache2/lib/libapr-0.so.0 (0x00eb0000)\n        librt.so.1 => /lib/tls/librt.so.1 (0x00662000)\n        libm.so.6 => /lib/tls/libm.so.6 (0x00923000)\n        libcrypt.so.1 => /lib/libcrypt.so.1 (0x00aa8000)\n        libnsl.so.1 => /lib/libnsl.so.1 (0x008e6000)\n        libpthread.so.0 => /lib/tls/libpthread.so.0 (0x00747000)\n        libdl.so.2 => /lib/libdl.so.2 (0x00876000)\n        libc.so.6 => /lib/tls/libc.so.6 (0x00111000)\n        /lib/ld-linux.so.2 (0x00f55000)\n[root@design.bg httpd-2.0.53]#\n\nYes it's true that i have a libiconv on the machine but i don't see any option i\nhave to configure it to use the libiconv library. Here is my configure.nice file\ni use for the compilation.\n\n[root@design.bg httpd-2.0.53]# cat httpd-config.nice\n#! /bin/sh\n#\n# Created by configure\n\n\"./configure\" \\\n\"--disable-autoindex\" \\\n\"--disable-negotiation\" \\\n\"--disable-userdir\" \\\n\"--with-mpm=worker\" \\\n\"--disable-ssl\" \\\n\"--enable-include\" \\\n\"--enable-auth\" \\\n\"--enable-auth-digest\" \\\n\"--enable-vhost-alias\" \\\n\"--enable-access\" \\\n\"--enable-asis\" \\\n\"--enable-imap\" \\\n\"--enable-actions\" \\\n\"--disable-autoindex\" \\\n\"--enable-env\" \\\n\"--enable-setenvif\" \\\n\"--enable-mime\" \\\n\"--disable-charset-lite\" \\\n\"--enable-auth-digest\" \\\n\"--enable-log-config\" \\\n\"--enable-deflate\" \\\n\"--enable-http\" \\\n\"--enable-rewrite\" \\\n\"--enable-so\" \\\n\"--enable-dir\" \\\n\"--enable-nonportable-atomics=yes\" \\\n\"--sysconfdir=/usr/local/apache2/conf\" \\\n\"--sbindir=/usr/local/apache2/sbin\" \\\n\"--bindir=/usr/local/apache2/bin\" \\\n\"--enable-status\" \\\n\"$@\"\n[root@design.bg httpd-2.0.53]#\nI think this is a bug in the new configure system that comes with apache 2.0.53\nthe same config.ini file works perfectly for me on a previous 2.0.52 version.\nReally sorry if the mistake is mine and i'm loosing of your time.", "id": 70749, "time": "2005-02-10T12:35:12Z", "bug_id": 33488, "creation_time": "2005-02-10T12:35:12Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 33488, "attachment_id": null, "is_private": false, "id": 71775, "time": "2005-03-03T15:38:38Z", "creator": "jah@progress.com", "creation_time": "2005-03-03T15:38:38Z", "text": "Not sure if this is the same thing but something similar happens to me on a\nSolaris 8 (SPARC) system with GCC 3.3.2.\n\nI have succesfully built previous Apache 2 versions up to 2.0.52 on the same\nsystem. Now building 2.0.53 links the executables to libgcc_s.so.1 and as a\nresult the binary doesn't run without tinkering with LD_LIBRARY_PATH. Previous\nversions up to 2.0.52 did not have this problem.\n"}, {"count": 2, "tags": [], "text": "For the build which picked up a libiconv, please attach the output of the\nconfigure script and the generated srclib/apr-util/config.log file.\n\nFor the build which picked up a libgcc_s.so.1, that can happen for a number of\nreasons none of which anyone can do much about in httpd.  Build your gcc with\n--disable-shared if you don't want that, or set LD_RUN_PATH etc such that an\nRPATH to the directory containing libgcc gets added to build binraries.", "attachment_id": null, "id": 71776, "creator": "jorton@redhat.com", "time": "2005-03-03T15:50:00Z", "bug_id": 33488, "creation_time": "2005-03-03T15:50:00Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 33488, "text": "I actually worked around the problem by specifying --libdir=/usr/local/lib\nwhere is the libiconv located anyway i can send the log output if you still need it?\nShall i send it?", "id": 71796, "time": "2005-03-03T21:32:33Z", "creator": "hipo@design.bg", "creation_time": "2005-03-03T21:32:33Z", "is_private": false, "attachment_id": null}]