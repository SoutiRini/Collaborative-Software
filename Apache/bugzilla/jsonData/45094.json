[{"count": 0, "tags": [], "text": "One of my targets is doing a copy, with a re-name and token substitution, with the code below.\n\n\n        <copy  todir=\"${build.dir}\" >\n            <fileset  dir=\".\" />\n            <mapper  type=\"regexp\"\n                     from=\"(.*)\\.IN\"\n                     to=\"\\1\" />\n            <filterset  begintoken=\"${TOKEN}\"\n                        endtoken=\"${TOKEN}\" >\n                <filtersfile  file=\"token.values\" />\n            </filterset>\n        </copy>\n       \n       \nI have TOKEN defined in a property file.\nInitially I used '@', but I would prefer to use '@@'\n\nIn one of the files that get copied, I need a line ending up like this :\n    username@hostname\ni.e it has a literal character @ which isn't part of a tokenized value.\n\nSo in its' tokenized form, I have\nEITHER\n    @USER@@@HOST@           .... if I use a single @ for the token delimiters\nOR\n    @@USER@@@@@HOST@@       .... if I use a double @@ for the token delimiters\n\nThe token substitution works OK for the single '@' delimiter\nBut when using the '@@' delimiter it fails. The copied file ends up with :\n    username@@@HOST@@\n   \nStrangely, if I needed the result   username@@hostname   then use of either a single @ or double @@\ndelimiter works correctly!", "attachment_id": null, "bug_id": 45094, "id": 117108, "time": "2008-05-29T03:25:50Z", "creator": "stuart@henderson-web.co.uk", "creation_time": "2008-05-29T03:25:50Z", "is_private": false}, {"count": 1, "tags": [], "text": "I can see the reason.\n\nwhen looking for the begin token in username@@@HOST@@ ant will stop at the first\ntwo @ and determine that it doesn't have a replacement for \"@HOST\" and \ncontinues looking for a begin token after the last candidate begin token\n- while your real begin token actually starts inside the first candidate token.\n\nfixed in svn rev 699002.", "attachment_id": null, "bug_id": 45094, "id": 120993, "time": "2008-09-25T08:28:31Z", "creator": "bodewig@apache.org", "creation_time": "2008-09-25T08:28:31Z", "is_private": false}]