[{"count": 0, "tags": [], "creator": "cbook@rim.net", "text": "I get the following crash dump in catalina.out.  I can reproduce this with java \n1.4.0, 1.4.1, and 1.4.2.  My site (fairly high traffic) runs for about 2-4 \nhours before crashing with this error.  My configuration is at the bottom.\n\nI'm using the jk2 connector compiled from the 4.1.24 source distribution.  I've \ntried to reproduce this from cvs but I get 404 not found errors for all my \nrequests.\n\nAn unexpected exception has been detected in native code outside the VM.\nUnexpected Signal : 11 occurred at PC=0x8A516D17\nFunction=apr_palloc+0xB\nLibrary=/usr/lib/libapr-0.so.0\n\nCurrent Java thread:\n        at org.apache.jk.apr.AprImpl.createJkHandler(Native Method)\n        at org.apache.jk.common.JniHandler.setNativeEndpoint\n(JniHandler.java:234)\n        at org.apache.jk.common.JniHandler.nativeDispatch(JniHandler.java:266)\n        at org.apache.jk.common.ChannelUn.open(ChannelUn.java:179)\n        at org.apache.jk.common.ChannelUn.acceptConnections(ChannelUn.java:225)\n        at org.apache.jk.common.AprAcceptor.runIt(ChannelUn.java:295)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:536)\n\nDynamic libraries:\n08048000-0804e000 r-xp 00000000 03:03 \n2801711    /usr/java/j2sdk1.4.1_02/bin/java\n0804e000-0804f000 rw-p 00005000 03:03 \n2801711    /usr/java/j2sdk1.4.1_02/bin/java\n40000000-40012000 r-xp 00000000 03:03 3604482    /lib/ld-2.2.93.so\n40012000-40013000 rw-p 00012000 03:03 3604482    /lib/ld-2.2.93.so\n40013000-40016000 r--s 00000000 03:03 \n1294398    /usr/java/j2sdk1.4.1_02/jre/lib/ext/dnsns.jar\n40016000-40019000 r--s 00000000 03:03 9355334    /opt/jakarta-tomcat-\n4.1.24/bin/commons-daemon.jar\n40019000-40026000 r-xp 00000000 03:03 4718598    /lib/i686/libpthread-0.10.so\n40026000-40029000 rw-p 0000d000 03:03 4718598    /lib/i686/libpthread-0.10.so\n4004a000-4004c000 r-xp 00000000 03:03 3604495    /lib/libdl-2.2.93.so\n4004c000-4004d000 rw-p 00001000 03:03 3604495    /lib/libdl-2.2.93.so\n4004d000-40365000 r-xp 00000000 03:03 \n3948605    /usr/java/j2sdk1.4.1_02/jre/lib/i386/client/libjvm.so\n40365000-40549000 rw-p 00317000 03:03 \n3948605    /usr/java/j2sdk1.4.1_02/jre/lib/i386/client/libjvm.so\n4055a000-4056c000 r-xp 00000000 03:03 3604499    /lib/libnsl-2.2.93.so\n4056c000-4056d000 rw-p 00012000 03:03 3604499    /lib/libnsl-2.2.93.so\n4056f000-40590000 r-xp 00000000 03:03 4718596    /lib/i686/libm-2.2.93.so\n40590000-40591000 rw-p 00021000 03:03 4718596    /lib/i686/libm-2.2.93.so\n40591000-4059a000 r-xp 00000000 03:03 \n4358224    /usr/java/j2sdk1.4.1_02/jre/lib/i386/native_threads/libhpi.so\n4059a000-4059b000 rw-p 00008000 03:03 \n4358224    /usr/java/j2sdk1.4.1_02/jre/lib/i386/native_threads/libhpi.so\n4059c000-405ac000 r-xp 00000000 03:03 \n3211357    /usr/java/j2sdk1.4.1_02/jre/lib/i386/libverify.so\n405ac000-405ae000 rw-p 0000f000 03:03 \n3211357    /usr/java/j2sdk1.4.1_02/jre/lib/i386/libverify.so\n405ae000-405cf000 r-xp 00000000 03:03 \n3211345    /usr/java/j2sdk1.4.1_02/jre/lib/i386/libjava.so\n405cf000-405d1000 rw-p 00020000 03:03 \n3211345    /usr/java/j2sdk1.4.1_02/jre/lib/i386/libjava.so\n405d1000-405e6000 r-xp 00000000 03:03 \n3211358    /usr/java/j2sdk1.4.1_02/jre/lib/i386/libzip.so\n405e6000-405e8000 rw-p 00014000 03:03 \n3211358    /usr/java/j2sdk1.4.1_02/jre/lib/i386/libzip.so\n405e8000-406c1000 r--s 00000000 03:03 3063921    /opt/jakarta-tomcat-\n4.1.24/common/endorsed/xercesImpl.jar\n406c1000-406e0000 r--s 00000000 03:03 3063922    /opt/jakarta-tomcat-\n4.1.24/common/endorsed/xmlParserAPIs.jar\n406e0000-41daf000 r--s 00000000 03:03 \n5734499    /usr/java/j2sdk1.4.1_02/jre/lib/rt.jar\n41df2000-41e09000 r--s 00000000 03:03 \n5734500    /usr/java/j2sdk1.4.1_02/jre/lib/sunrsasign.jar\n41e09000-41e7a000 r--s 00000000 03:03 \n5734493    /usr/java/j2sdk1.4.1_02/jre/lib/jsse.jar\n41e7a000-41e8d000 r--s 00000000 03:03 \n5734492    /usr/java/j2sdk1.4.1_02/jre/lib/jce.jar\n41fd7000-41fe0000 r-xp 00000000 03:03 3604515    /lib/libnss_files-2.2.93.so\n41fe0000-41fe1000 rw-p 00008000 03:03 3604515    /lib/libnss_files-2.2.93.so\n41fe1000-41fef000 r--s 00000000 03:03 \n1294399    /usr/java/j2sdk1.4.1_02/jre/lib/ext/ldapsec.jar\n41fef000-41ff6000 r--s 00000000 03:03 9355335    /opt/jakarta-tomcat-\n4.1.24/bin/bootstrap.jar\n41ff6000-41ffb000 r--s 00000000 03:03 2998345    /opt/jakarta-tomcat-\n4.1.24/common/lib/commons-logging-api.jar\n41ffb000-42000000 r--s 00000000 03:03 2998350    /opt/jakarta-tomcat-\n4.1.24/common/lib/naming-factory.jar\n42000000-42126000 r-xp 00000000 03:03 4718594    /lib/i686/libc-2.2.93.so\n42126000-4212b000 rw-p 00126000 03:03 4718594    /lib/i686/libc-2.2.93.so\n4212f000-423eb000 r--s 00000000 03:03 \n5734480    /usr/java/j2sdk1.4.1_02/jre/lib/charsets.jar\n443eb000-443ee000 r--s 00000000 03:03 2998358    /opt/jakarta-tomcat-\n4.1.24/common/lib/jta.jar\n443ee000-443f0000 r--s 00000000 03:03 2539654    /opt/jakarta-tomcat-\n4.1.24/server/lib/servlets-invoker.jar\n888ec000-88aab000 r--p 00000000 03:03 475138     /usr/lib/locale/locale-archive\n88caf000-88d4e000 r--s 00000000 03:03 \n1294400    /usr/java/j2sdk1.4.1_02/jre/lib/ext/localedata.jar\n88d4e000-88d6b000 r--s 00000000 03:03 \n1294401    /usr/java/j2sdk1.4.1_02/jre/lib/ext/sunjce_provider.jar\n88d6b000-8921f000 r--s 00000000 03:03 \n7864413    /usr/java/j2sdk1.4.1_02/lib/tools.jar\n8921f000-89233000 r--s 00000000 03:03 2998343    /opt/jakarta-tomcat-\n4.1.24/common/lib/servlet.jar\n89233000-89278000 r--s 00000000 03:03 2998344    /opt/jakarta-tomcat-\n4.1.24/common/lib/mail.jar\n89278000-892a1000 r--s 00000000 03:03 2998346    /opt/jakarta-tomcat-\n4.1.24/common/lib/commons-collections.jar\n892a1000-892b6000 r--s 00000000 03:03 2998347    /opt/jakarta-tomcat-\n4.1.24/common/lib/jdbc2_0-stdext.jar\n892b6000-892be000 r--s 00000000 03:03 2998348    /opt/jakarta-tomcat-\n4.1.24/common/lib/commons-pool.jar\n892be000-892eb000 r--s 00000000 03:03 2998349    /opt/jakarta-tomcat-\n4.1.24/common/lib/jasper-compiler.jar\n892eb000-89304000 r--s 00000000 03:03 2998351    /opt/jakarta-tomcat-\n4.1.24/common/lib/jndi.jar\n89304000-89310000 r--s 00000000 03:03 2998352    /opt/jakarta-tomcat-\n4.1.24/common/lib/activation.jar\n89310000-89322000 r--s 00000000 03:03 2998353    /opt/jakarta-tomcat-\n4.1.24/common/lib/jasper-runtime.jar\n89322000-8932c000 r--s 00000000 03:03 2998354    /opt/jakarta-tomcat-\n4.1.24/common/lib/naming-resources.jar\n8932c000-89333000 r--s 00000000 03:03 2998355    /opt/jakarta-tomcat-\n4.1.24/common/lib/naming-common.jar\n89333000-89343000 r--s 00000000 03:03 2998356    /opt/jakarta-tomcat-\n4.1.24/common/lib/commons-dbcp.jar\n89343000-893f3000 r--s 00000000 03:03 2998357    /opt/jakarta-tomcat-\n4.1.24/common/lib/ant.jar\n893f3000-89447000 r--s 00000000 03:03 2539650    /opt/jakarta-tomcat-\n4.1.24/server/lib/mx4j-jmx.jar\n89447000-8944e000 r--s 00000000 03:03 2539651    /opt/jakarta-tomcat-\n4.1.24/server/lib/commons-logging.jar\n8944e000-89467000 r--s 00000000 03:03 2539652    /opt/jakarta-tomcat-\n4.1.24/server/lib/commons-digester.jar\n89467000-8946c000 r--s 00000000 03:03 2539655    /opt/jakarta-tomcat-\n4.1.24/server/lib/servlets-manager.jar\n8946c000-89474000 r--s 00000000 03:03 2539656    /opt/jakarta-tomcat-\n4.1.24/server/lib/commons-modeler.jar\n89474000-89479000 r--s 00000000 03:03 2539657    /opt/jakarta-tomcat-\n4.1.24/server/lib/servlets-default.jar\n89479000-89483000 r--s 00000000 03:03 2539658    /opt/jakarta-tomcat-\n4.1.24/server/lib/tomcat-http11.jar\n89483000-89487000 r--s 00000000 03:03 2539660    /opt/jakarta-tomcat-\n4.1.24/server/lib/commons-fileupload-1.0-beta-1.jar\n89487000-894ae000 r--s 00000000 03:03 2539661    /opt/jakarta-tomcat-\n4.1.24/server/lib/tomcat-util.jar\n894ae000-89564000 r--s 00000000 03:03 2539662    /opt/jakarta-tomcat-\n4.1.24/server/lib/catalina.jar\n89564000-89581000 r--s 00000000 03:03 2539663    /opt/jakarta-tomcat-\n4.1.24/server/lib/commons-beanutils.jar\n89581000-89591000 r--s 00000000 03:03 2539664    /opt/jakarta-tomcat-\n4.1.24/server/lib/tomcat-coyote.jar\n89591000-895ab000 r--s 00000000 03:03 2539665    /opt/jakarta-tomcat-\n4.1.24/server/lib/jaas.jar\n895ab000-895ad000 r--s 00000000 03:03 2539667    /opt/jakarta-tomcat-\n4.1.24/server/lib/servlets-common.jar\n895ad000-895b3000 r--s 00000000 03:03 2539668    /opt/jakarta-tomcat-\n4.1.24/server/lib/servlets-webdav.jar\n895b3000-895b9000 r--s 00000000 03:03 2539669    /opt/jakarta-tomcat-\n4.1.24/server/lib/tomcat-warp.jar\n895b9000-895bd000 r--s 00000000 03:03 2539670    /opt/jakarta-tomcat-\n4.1.24/server/lib/catalina-ant.jar\n895bd000-895d1000 r--s 00000000 03:03 2539671    /opt/jakarta-tomcat-\n4.1.24/server/lib/tomcat-jk2.jar\n895d1000-895d9000 r--s 00000000 03:03 2539672    /opt/jakarta-tomcat-\n4.1.24/server/lib/jakarta-regexp-1.2.jar\n895d9000-895e9000 r--s 00000000 03:03 2539673    /opt/jakarta-tomcat-\n4.1.24/server/lib/tomcat-jk.jar\n895e9000-895f9000 r-xp 00000000 03:03 \n3211354    /usr/java/j2sdk1.4.1_02/jre/lib/i386/libnet.so\n895f9000-895fb000 rw-p 0000f000 03:03 \n3211354    /usr/java/j2sdk1.4.1_02/jre/lib/i386/libnet.so\n896fd000-8970b000 r--s 00000000 03:03 8847461    /opt/jakarta-tomcat-\n4.1.24/webapps/leoslyrics/WEB-INF/lib/activation.jar\n8970b000-89729000 r--s 00000000 03:03 8847462    /opt/jakarta-tomcat-\n4.1.24/webapps/leoslyrics/WEB-INF/lib/commons-beanutils.jar\n89729000-89772000 r--s 00000000 03:03 8847478    /opt/jakarta-tomcat-\n4.1.24/webapps/leoslyrics/WEB-INF/lib/commons-collections.jar\n89772000-89787000 r--s 00000000 03:03 8847465    /opt/jakarta-tomcat-\n4.1.24/webapps/leoslyrics/WEB-INF/lib/commons-dbcp.jar\n89787000-897a0000 r--s 00000000 03:03 8847475    /opt/jakarta-tomcat-\n4.1.24/webapps/leoslyrics/WEB-INF/lib/commons-digester.jar\n897a0000-897a4000 r--s 00000000 03:03 8847472    /opt/jakarta-tomcat-\n4.1.24/webapps/leoslyrics/WEB-INF/lib/commons-fileupload.jar\n897a4000-897d0000 r--s 00000000 03:03 8847463    /opt/jakarta-tomcat-\n4.1.24/webapps/leoslyrics/WEB-INF/lib/commons-httpclient-2.0-alpha2.jar\n897d0000-89800000 r--s 00000000 03:03 8847470    /opt/jakarta-tomcat-\n4.1.24/webapps/leoslyrics/WEB-INF/lib/commons-lang.jar\n\njk2.properties:\nhandler.list=apr,channelUnix,request\nchannelUnix.file=/opt/jakarta-tomcat/work/jk2.socket\nserverRoot=/usr/local/apache2\napr.NativeSo=/usr/local/apache2/modules/libjkjni.so\n\nworkers2.properties:\n[logger]\nlevel=ERROR\n\n[shm]\nfile=/usr/local/apache2/logs/shm.file\nsize=1048576\ndebug=0\n\n[channel.socket:localhost:8009]\nport=8009\nhost=127.0.0.1\ndebug=0\n\n[channel.un:/opt/jakarta-tomcat/work/jk2.socket]\ntomcatId=localhost:8009\ndebug=0\n\n[ajp13:localhost:8009]\nchannel=channel.un:/opt/jakarta-tomcat/work/jk2.socket\ndebug=0\n\n[uri:/*]\nworker=ajp13:/opt/jakarta-tomcat/work/jk2.socket\ndebug=0", "id": 36154, "time": "2003-04-25T19:59:54Z", "bug_id": 19336, "creation_time": "2003-04-25T19:59:54Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 19336, "is_private": false, "id": 36219, "attachment_id": null, "creator": "remm@apache.org", "creation_time": "2003-04-28T10:30:35Z", "time": "2003-04-28T10:30:35Z", "text": "- double check your kernel version (I don't think those JDKs will run good\nwithout a recent kernel)\n- try IBM JDK 1.4.0\n\nAnyway, VM crashes are not VM bugs (well, unless you can identify a flaw in\nTomcat which would cause the crash, but I see no such thing here)."}, {"count": 2, "tags": [], "creator": "remm@apache.org", "text": "You should remove \"not\" in the last sentence, obviously. Please don't reopen the\nreport unless you can point out a Tomcat problem.", "id": 36220, "time": "2003-04-28T10:31:54Z", "bug_id": 19336, "creation_time": "2003-04-28T10:31:54Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 19336, "text": "I'm using version 2.4.18-14smp of the Kernel.\nI've tried using the IBM JDK but it doesn't work with my database driver.\n\nHow can this be a jvm error if the crash is occuring outside the VM?  \nSpecifically in apr_palloc from the libapr library?", "id": 36242, "time": "2003-04-28T16:06:48Z", "creator": "cbook@rim.net", "creation_time": "2003-04-28T16:06:48Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 19336, "is_private": false, "id": 36244, "attachment_id": null, "creator": "funkman@joedog.org", "creation_time": "2003-04-28T16:17:41Z", "time": "2003-04-28T16:17:41Z", "text": "I found it interesting that \"org.apache.jk.apr.AprImpl.createJkHandler(Native\nMethod)\" caused the error (according to the trace) and createJkHandler is part\nof the JNI connector code. (jk_jni_aprImpl.c??) Which sounds like a jk issue,\nnot a JVM issue.\n\nSince I don't know enough about JK2 - I can't offer debug advice, or any kind of\npatch :(  and I won't reopen the bug. (Since I'd be part more of a problem, and\nnot a solution just ranting like a nut) My 0.02."}, {"count": 5, "tags": [], "bug_id": 19336, "is_private": false, "id": 36251, "attachment_id": null, "creator": "cbook@rim.net", "creation_time": "2003-04-28T18:59:02Z", "time": "2003-04-28T18:59:02Z", "text": "Yeah I agree... but if reopening this isn't the solution, perhaps the documents \nshould be updated to indicate that mod_jk2 will crash every 2 hours because of \ncertain (supported) jvms or because of standard kernel versions."}]