[{"count": 0, "text": "In version 6.0.26 org.apache.catalina.users.MemoryUserDatabase sets readonly = true. In version 5.5.29 org.apache.catalina.users.MemoryUserDatabase sets readonly = false. This means that the save method will default to logging an error message rather than saving the user database file.\n\n    public void save()\n        throws Exception\n    {\n        if(getReadonly())\n        {\n            log.error(sm.getString(\"memoryUserDatabase.readOnly\"));\n            return;\n        }\n\nThe message that is displayed in 6.0.26 is:\nmemoryUserDatabase.readOnly=User database has been configured to be read only. Changes cannot be saved\n\nI cannot find any documentation or a JMX management bean to set readonly = false.\nHence the save method I was using in Tomcat 5.0.28 and tomcat 5.5.29 no longer works.\n\nDavid Tugby", "bug_id": 49436, "attachment_id": null, "id": 137631, "time": "2010-06-14T14:03:54Z", "creator": "david.tugby@sky.com", "creation_time": "2010-06-14T14:03:54Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 49436, "text": "Tomcat home page...\n  http://tomcat.apache.org/\n\n...which links to the Tomcat 6 docs...\n  http://tomcat.apache.org/tomcat-6.0-doc/index.html\n\n...which has a link for configuration...\n  http://tomcat.apache.org/tomcat-6.0-doc/config/index.html\n\n...which documents Realms...\n  http://tomcat.apache.org/tomcat-6.0-doc/config/realm.html\n\n...including the UserDatabaseRealm which in turn links to the JNDI how-to...\n  http://tomcat.apache.org/tomcat-6.0-doc/jndi-resources-howto.html#UserDatabase%20Resources\n\n...which describes how to set the readonly attribute.", "id": 137635, "time": "2010-06-14T16:32:13Z", "creator": "markt@apache.org", "creation_time": "2010-06-14T16:32:13Z", "is_private": false, "attachment_id": null}, {"count": 2, "text": "Thanks. \n\nGot this working by pasting the entire entry from http://tomcat.apache.org/tomcat-6.0-doc/jndi-resources-howto.html#UserDatabase%20Resources into my server.xml file. So I must have entered a typo when I tried earlier.\n\nThe documentation is not quite correct however.\ntomcat-6.0-doc/jndi-resources-howto.html states\n\"The readonly attribute is optional and defaults to false if not supplied.\"\n\nIn my humble opionion this should be changed to:\n\"The readonly attribute is optional and defaults to true if not supplied.\"\n\nThanks again for the prompt response.\n\nDavid Tugby", "bug_id": 49436, "attachment_id": null, "id": 137655, "time": "2010-06-15T07:39:48Z", "creator": "david.tugby@sky.com", "creation_time": "2010-06-15T07:39:48Z", "tags": [], "is_private": false}, {"count": 3, "text": "Docs updated for 7.0.x and 6.0.x. Fix will be included in 7.0.1 and 6.0.28 onwards.", "bug_id": 49436, "attachment_id": null, "id": 137735, "time": "2010-06-18T06:43:28Z", "creator": "markt@apache.org", "creation_time": "2010-06-18T06:43:28Z", "tags": [], "is_private": false}]