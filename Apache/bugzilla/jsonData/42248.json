[{"count": 0, "tags": [], "bug_id": 42248, "is_private": false, "text": "Hi !\n\nI am very happy with JMeter, which is very useful and powerful ! So, I decided\nto contribute in my way by pointing those little annoying things which the users\nhad to put up with but didn't notice or didn't take the time to report.\n\nMy thought are that a Undo/Redo feature is required while editing a test plan as\nit is well known that user _do_ mistakes and don't want to be punished simply\nfor being human.\n\nAt first, I would argue that adding such a framework to JMeter would imply some\nwork, refactoring some things and implementing Command Pattern to ensure proper\nefficiency and power. When I think a little bit more about it, I feel it to be\nlike an \"internal XML patching system\", as the problem is to apply modifications\nto the plan test tree (which can be represented as an XML tree) and add more\nmodifications or revert some others.\n\nI hope this won't be too hard to implement in JMeter. I simply don't know as\nI've only _thought_ about it but not designed code to do it (which I am not able\nto write at this time).", "id": 102354, "time": "2007-04-25T08:22:52Z", "creator": "michel.nolard@gmail.com", "creation_time": "2007-04-25T08:22:52Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "The classic UNDO shortcut 'CTRL-Z' has been assigned to [Launch > Remote start\nall] which is not very consistent in a GUI point of view.\n\nIf the undo-redo support is not implemented/finalized/integrated to the next\nrelease, the shortcut should be removed/changed even though : I can't count the\nnumber of times JMeter lagged for 2 seconds before throwing me an ironical \"Bad\ncall to remote host\". By the way, that error message should be improved by, for\nexample, showing what's the actual \"remote host\" and maybe what's the actual\n\"bad call\" (i.e command name or something else).", "is_private": false, "bug_id": 42248, "id": 103770, "time": "2007-05-29T07:21:42Z", "creator": "michel.nolard@gmail.com", "creation_time": "2007-05-29T07:21:42Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "sebb@apache.org", "text": "I agree that Control-Z is confusing.\n\nSince Control-R is used for a normal run, I've changed Run Remote to Control-\nShift-R.\n\nThis is in SVN r542707.\n\nAlso fixed the confusing \"Bad call\" messages in r542633.", "id": 103795, "attachment_id": null, "bug_id": 42248, "creation_time": "2007-05-29T17:43:02Z", "time": "2007-05-29T17:43:02Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 42248, "attachment_id": null, "id": 129788, "time": "2009-08-19T07:21:57Z", "creator": "taimo.peelo@gmail.com", "creation_time": "2009-08-19T07:21:57Z", "is_private": false, "text": "It has been more than two years since this enhancement request was opened. \n\nLacking undo/redo is bad and frustrating nuisance. Just one bad edit, forgetting the previous contents of some obscure request parameter... what then?"}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "text": "Yes, it would be a useful enhancement, but as far as I can tell, implementing undo/redo would involve a lot of code changes.\n\nIf anyone can provide a patch, then of course it will be evaluated and applied if appropriate.", "id": 129789, "attachment_id": null, "bug_id": 42248, "creation_time": "2009-08-19T07:28:29Z", "time": "2009-08-19T07:28:29Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 42248, "text": "*** Bug 51404 has been marked as a duplicate of this bug. ***", "id": 147514, "time": "2011-06-26T17:37:45Z", "creator": "milamber@apache.org", "creation_time": "2011-06-26T17:37:45Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 149356, "time": "2011-09-17T00:49:54Z", "bug_id": 42248, "creation_time": "2011-09-17T00:49:54Z", "is_private": false, "text": "*** Bug 51819 has been marked as a duplicate of this bug. ***"}, {"count": 7, "tags": [], "text": "Hi!\n\nJust wanted to express my support for addressing this issue. I would love to see undo/redo support for two independent areas:\n\n1) text areas (it would be more-than-sufficient to just have that information while working in the textarea, no need to get sophisticated with having this work in multiple textareas at the same time or shit like that), it is just really annoying to accidentally delete something and then having to do it all again.\n\n2) the element tree on the left side (probably more complicated?)\n\nMany thanks for listening :)\nImm", "is_private": false, "bug_id": 42248, "id": 153055, "time": "2012-01-23T15:36:47Z", "creator": "immanuel.hayden@gmail.com", "creation_time": "2012-01-23T15:36:47Z", "attachment_id": null}, {"count": 8, "tags": [], "text": "Created attachment 28217\nproposed patch\n\nHere's my current progress patch.\nNotes:\n 1) I failed to make it select recorded tree selection path properly, tree shows no nodes selected. Tree selection is commented out and after each undo/redo Workbench becomes selected\n 2) I didn't use undo action hints like for action labeling like \"Undo (Add Thread Group)\" but it would be nice to have it. There is \"comment\" field in history items to have it.", "is_private": false, "bug_id": 42248, "id": 153207, "time": "2012-01-27T09:10:07Z", "creator": "apc4@ya.ru", "creation_time": "2012-01-27T09:10:07Z", "attachment_id": 28217}, {"count": 9, "tags": [], "text": "Thanks very much. Looks good but not tried the code yet.\n\nJust a couple of minor points:\n\nWe release code under the Apache License and each file has to have the standard AL header. These are missing from the new files you have provided.\n\nAlso, we don't use @author tags in code. This is mainly because the ASF is about community rather than individuals; also the tags are impossible to maintain accurately as code is further developed. Instead, we credit contributors in the changes list and elsewhere (e.g. Wiki)\n\nSo please could you either confirm that it is OK for us to add AL headers and remove @author tags, or provide an updated patch? Thanks!", "is_private": false, "bug_id": 42248, "id": 153211, "time": "2012-01-27T11:22:20Z", "creator": "sebb@apache.org", "creation_time": "2012-01-27T11:22:20Z", "attachment_id": null}, {"count": 10, "tags": [], "text": "Hi, \nI understand that ASF has its rules for code formatting and meta-info (and JMeter has its rules for unit tests, too). So feel free to reformat code. I believe you can make Undo working much better with your experience, starting with my patch.\n\nOf course it would be nice to be mentioned in changelog or somewhere else, it is left for your choice. I just glad to be reason for closing 5-year old issue :)", "is_private": false, "bug_id": 42248, "id": 153212, "time": "2012-01-27T11:28:04Z", "creator": "apc4@ya.ru", "creation_time": "2012-01-27T11:28:04Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Hello Andrey,\nI made some tests and I see the following issues:\n- Limitation : Using CTRL+Z in text fields has some really disturbing behaviour\n- I have tried to load a consequent Test Plan ( around 6.6 Mo on disk), it ends with OOM and analysing dump, it shows UndoHistory occupates 336 MO, it contains 301 item where each one has a size > 2.3Mo,\n\n\nSo I think patch need more work.\n\n\nThanks for it anyway and we will try to find some solutions.\nRegards\nPhilippe", "id": 153228, "time": "2012-01-27T22:13:05Z", "bug_id": 42248, "creation_time": "2012-01-27T22:13:05Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "creator": "apc4@ya.ru", "attachment_id": null, "text": "Philippe,\nIf it cause problems, Ctrl+Z can be replaced with any other shortcut, or even left  without shortcut.\nTo lower memory usage you can limit history size, it is trivial task, I suppose.", "id": 153232, "time": "2012-01-28T07:50:43Z", "bug_id": 42248, "creation_time": "2012-01-28T07:50:43Z", "is_private": false}, {"count": 13, "tags": [], "text": "Created attachment 28222\nUpdated Patch\n\nHello,\nHere is a modified version with the following changes:\n- Added a limit on the history (25 it should be configurable), to avoid OutOfMemoryError when Test Plan is big\n- Added Pause/Resume methods that are used during loading , closing and merging of Tree, cause if we don't add it (at least for close and loading):\n1) It does not seem useful to be able to undo elements that were added during load phase\n2) Performance are really bad , a big test plan (6 Mo) takes more than 30 seconds to load\n- Added javadocs\n\nRegards\nPhilippe\nhttp://www.ubik-ingenierie.com", "is_private": false, "bug_id": 42248, "id": 153234, "time": "2012-01-28T17:41:49Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-01-28T17:41:49Z", "attachment_id": 28222}, {"count": 14, "tags": [], "bug_id": 42248, "attachment_id": null, "id": 153235, "time": "2012-01-28T17:47:15Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-01-28T17:47:15Z", "is_private": false, "text": "- There is one drawback to previous change, it's that we won't be able to undo merged part (right click>merge)\n - Added javadocs\n\nAlso note that patch is on  r1231672"}, {"count": 15, "tags": [], "creator": "apc4@ya.ru", "attachment_id": null, "is_private": false, "id": 153236, "time": "2012-01-28T18:45:23Z", "bug_id": 42248, "creation_time": "2012-01-28T18:45:23Z", "text": "Philippe, you made everything much better with your changes!\n\nOne question: have youn noticed my notes on selecting historical path in tree? Is it possible in JMeter?"}, {"count": 16, "tags": [], "bug_id": 42248, "is_private": false, "text": "I think the problem is due to the following:\n- You record a TreePath pointing to the node after modification\n- When you undo, a full JTree with new nodes JMeterTreeNodes is rebuilt\n- If you try to call tree.setSelectionPath(path), then it uses the content before undo.", "id": 153250, "time": "2012-01-29T13:49:32Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-01-29T13:49:32Z", "attachment_id": null}, {"count": 17, "tags": [], "text": "Philippe, dou you see any other (working) solution to have historical tree selection paths?", "is_private": false, "bug_id": 42248, "id": 153252, "time": "2012-01-29T14:45:12Z", "creator": "apc4@ya.ru", "creation_time": "2012-01-29T14:45:12Z", "attachment_id": null}, {"count": 18, "tags": [], "text": "I managed to fix the issue with non-undoable merge. Now will work on historical selection path.", "attachment_id": null, "bug_id": 42248, "id": 177055, "time": "2014-08-10T16:43:38Z", "creator": "apc4@ya.ru", "creation_time": "2014-08-10T16:43:38Z", "is_private": false}, {"count": 19, "tags": [], "creator": "apc4@ya.ru", "attachment_id": 31899, "id": 177071, "time": "2014-08-11T13:18:28Z", "bug_id": 42248, "creation_time": "2014-08-11T13:18:28Z", "is_private": false, "text": "Created attachment 31899\nPatch for next attempt of undo\n\nFixed most of the earlier problems."}, {"count": 20, "tags": [], "creator": "apc4@ya.ru", "attachment_id": 31900, "id": 177072, "time": "2014-08-11T13:20:21Z", "bug_id": 42248, "creation_time": "2014-08-11T13:20:21Z", "is_private": false, "text": "Created attachment 31900\nnew files pack"}, {"count": 21, "tags": [], "text": "Hello Andrei,\nI only reviewed patch. no pack file as I only have smartphone currently.\nI didn't see any change to undo/redo of inout fields.\n\nDo you confirm that patch only adresses undo-redo on test tree ?\nThanks", "is_private": false, "bug_id": 42248, "id": 177073, "time": "2014-08-11T13:23:00Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-11T13:23:00Z", "attachment_id": null}, {"count": 22, "tags": [], "text": "Yes, I carefully checked that there is no side changes. I cleared any formatting changes that were produced by IDE.", "is_private": false, "bug_id": 42248, "id": 177074, "time": "2014-08-11T13:33:16Z", "creator": "apc4@ya.ru", "creation_time": "2014-08-11T13:33:16Z", "attachment_id": null}, {"count": 23, "tags": [], "bug_id": 42248, "attachment_id": null, "text": "Thanks Andrey.\nAs I understand you made on patch file for files that differ but already exist and 1 zip that contains new files.\n\nIs it possible to only create 1 patch file containing everything ?\nThanks", "id": 177079, "time": "2014-08-11T19:05:30Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-11T19:05:30Z", "is_private": false}, {"count": 24, "tags": [], "creator": "apc4@ya.ru", "text": "Philippe, I don't know how to do that using 'svn diff' command. If I could just send a pull request into GitHub repository, then it could be very easy.", "id": 177081, "attachment_id": null, "bug_id": 42248, "creation_time": "2014-08-11T19:55:44Z", "time": "2014-08-11T19:55:44Z", "is_private": false}, {"count": 25, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "If you use Eclipse:\nRight click on jmeter project> Team > create patch and select all files to include.\n\nIf you want you can also provide a pull request It will allow me to review it and give you feedback very soon, otherwise you will have to wait for 21th august.\nAs you're working on it now, I would br sorry to give you feedback once you don't have time to work on it snymore :)\n\nRegards", "id": 177083, "time": "2014-08-11T20:10:10Z", "bug_id": 42248, "creation_time": "2014-08-11T20:10:10Z", "is_private": false, "attachment_id": null}, {"count": 26, "tags": [], "bug_id": 42248, "attachment_id": null, "text": "Otherwise have a look at this:\n- http://stackoverflow.com/questions/4248768/including-new-files-in-svn-diff", "id": 177084, "time": "2014-08-11T20:12:04Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-11T20:12:04Z", "is_private": false}, {"count": 27, "tags": [], "bug_id": 42248, "attachment_id": 31901, "text": "Created attachment 31901\npatch with added files\n\nThanks! I completely forgot how to use svn. Added new patch, icon files will follow.", "id": 177085, "time": "2014-08-11T20:23:09Z", "creator": "apc4@ya.ru", "creation_time": "2014-08-11T20:23:09Z", "is_private": false}, {"count": 28, "tags": [], "text": "Created attachment 31902\nundo toolbar icon", "is_private": false, "bug_id": 42248, "id": 177086, "time": "2014-08-11T20:23:48Z", "creator": "apc4@ya.ru", "creation_time": "2014-08-11T20:23:48Z", "attachment_id": 31902}, {"count": 29, "tags": [], "text": "Created attachment 31903\nredo toolbar icon", "is_private": false, "bug_id": 42248, "id": 177087, "time": "2014-08-11T20:24:09Z", "creator": "apc4@ya.ru", "creation_time": "2014-08-11T20:24:09Z", "attachment_id": 31903}, {"count": 30, "tags": [], "text": "Thanks for update Andrei.\nFirst review looks good, some notes:\n- you should remove import x.y.* from code, only import the classes needed\n- I suggest we add an option to enable/disable history (undo/redo), we will decide later if we enable/disable it by default\n- undo/redo looks a bit confusing, as user may think he can also undo changes in text fields or other properties of test element. We need to find a better name although for now I am not inspired\n- implementing also undo/redo on test element properties would make this feature complete but it is more impacting", "is_private": false, "bug_id": 42248, "id": 177089, "time": "2014-08-11T20:56:25Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-11T20:56:25Z", "attachment_id": null}, {"count": 31, "tags": [], "bug_id": 42248, "text": "Created attachment 31906\nproposed patch with more changes\n\nPhilippe, thanks for reviewing the patch. I made some changes:\n- removed wildcard import\n- added some comments and JavaDocs\n- added undo.size property to manipulate history length, default is 25\n\nThe undo for TestElement property change already works. History is recorded once changes applied to TestPlan.\n\nI think disabling the undo is unnecessary, since it is vital feature for JMeter users. The option to limit history size helps protecting from too much memory consumption. \n\nThe choice seems to be to provide people undo without in-fields undo, or not provide ability to revert the actions at all. I believe the value for this feature is too high to block it for more years waiting to implement in-fields undo...\n\nHope this makes sense.", "id": 177100, "time": "2014-08-12T11:32:53Z", "creator": "apc4@ya.ru", "creation_time": "2014-08-12T11:32:53Z", "is_private": false, "attachment_id": 31906}, {"count": 32, "tags": [], "creator": "shmulikk@gmail.com", "attachment_id": null, "text": "Is there a build already with this feature?\nI'd like to give that a try...", "id": 177103, "time": "2014-08-12T12:25:48Z", "bug_id": 42248, "creation_time": "2014-08-12T12:25:48Z", "is_private": false}, {"count": 33, "tags": [], "text": "@Andrei, thanks, I get your point.\n\n@Shmullik, see @jmeter_plugins twitter account for info on this. Note that once we integrate this in nightly build, we will require test help from users community, so your tests will be welcome.", "is_private": false, "bug_id": 42248, "id": 177104, "time": "2014-08-12T12:32:55Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-12T12:32:55Z", "attachment_id": null}, {"count": 34, "tags": [], "creator": "apc4@ya.ru", "attachment_id": null, "text": "Here's the link for build to try the feature: http://jmeter-plugins.org/downloads/file/nightly/jmeter-2.11-undo.tgz", "id": 177173, "time": "2014-08-14T20:52:06Z", "bug_id": 42248, "creation_time": "2014-08-14T20:52:06Z", "is_private": false}, {"count": 35, "tags": [], "bug_id": 42248, "attachment_id": null, "id": 177568, "time": "2014-09-06T08:12:41Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-09-06T08:12:41Z", "is_private": false, "text": "Hello Andrei,\nCould you generate the patch in Unified format ?\nI am not able to integrate it with the current format.\nTo do this use Eclipse, select jmeter project and then Team > Create Patch.\n\nThanks"}, {"count": 36, "tags": [], "creator": "apc4@ya.ru", "text": "Sorry, I don't use Eclipse. I generated the patch using \"svn diff\" command, it usually applies OK using \"patch\" command-line utility.", "id": 177585, "time": "2014-09-06T15:25:08Z", "bug_id": 42248, "creation_time": "2014-09-06T15:25:08Z", "is_private": false, "attachment_id": null}, {"count": 37, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 177589, "time": "2014-09-06T16:05:43Z", "bug_id": 42248, "creation_time": "2014-09-06T16:05:43Z", "is_private": false, "text": "(In reply to Andrey Pohilko from comment #36)\n> Sorry, I don't use Eclipse. I generated the patch using \"svn diff\" command,\n> it usually applies OK using \"patch\" command-line utility.\n\nLooks like this is a Bugzilla issue.\nEclipse expects headers for each patch, but these are dropped when using\n\nDiff / Raw Unified\n\nYou need to click on the attachment name, or use Details."}, {"count": 38, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "text": "Date: Sat Sep  6 21:14:49 2014\nNew Revision: 1622936\n\nURL: http://svn.apache.org/r1622936\nLog:\nBug 42248 - Undo-redo support on Test Plan tree modification\nBugzilla Id: 42248\n\nAdded:\n    jmeter/trunk/src/core/org/apache/jmeter/gui/UndoHistory.java   (with props)\n    jmeter/trunk/src/core/org/apache/jmeter/gui/UndoHistoryItem.java   (with props)\n    jmeter/trunk/src/core/org/apache/jmeter/gui/action/UndoCommand.java   (with props)\n    jmeter/trunk/src/core/org/apache/jmeter/images/toolbar/redo.png   (with props)\n    jmeter/trunk/src/core/org/apache/jmeter/images/toolbar/undo.png   (with props)\nModified:\n    jmeter/trunk/bin/jmeter.properties\n    jmeter/trunk/src/core/org/apache/jmeter/gui/GuiPackage.java\n    jmeter/trunk/src/core/org/apache/jmeter/gui/action/ActionNames.java\n    jmeter/trunk/src/core/org/apache/jmeter/gui/util/MenuFactory.java\n    jmeter/trunk/src/core/org/apache/jmeter/images/toolbar/icons-toolbar.properties\n    jmeter/trunk/src/core/org/apache/jmeter/resources/messages.properties\n    jmeter/trunk/src/core/org/apache/jmeter/resources/messages_fr.properties\n    jmeter/trunk/xdocs/changes.xml", "id": 177592, "time": "2014-09-06T21:17:39Z", "bug_id": 42248, "creation_time": "2014-09-06T21:17:39Z", "is_private": false}, {"count": 39, "tags": [], "text": "Date: Sat Sep  6 21:21:41 2014\nNew Revision: 1622938\n\nURL: http://svn.apache.org/r1622938\nLog:\nBug 42248 - Undo-redo support on Test Plan tree modification\nsvn:eol\nBugzilla Id: 42248\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/gui/UndoHistory.java   (props changed)\n    jmeter/trunk/src/core/org/apache/jmeter/gui/UndoHistoryItem.java   (props changed)\n    jmeter/trunk/src/core/org/apache/jmeter/gui/action/UndoCommand.java   (props changed)\n\n\nDate: Sat Sep  6 21:23:48 2014\nNew Revision: 1622939\n\nURL: http://svn.apache.org/r1622939\nLog:\nBug 42248 - Undo-redo support on Test Plan tree modification\nsvn:mime-type\nBugzilla Id: 42248\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/images/toolbar/redo.png   (props changed)\n    jmeter/trunk/src/core/org/apache/jmeter/images/toolbar/undo.png   (props changed)\n\nDate: Sat Sep  6 21:34:45 2014\nNew Revision: 1622941\n\nURL: http://svn.apache.org/r1622941\nLog:\nBug 42248 - Undo-redo support on Test Plan tree modification\nChanged icons to use open_icon_library-CC and have a different color for undo and redo\nBugzilla Id: 42248\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/images/toolbar/redo.png\n    jmeter/trunk/src/core/org/apache/jmeter/images/toolbar/undo.png", "is_private": false, "bug_id": 42248, "id": 177593, "time": "2014-09-06T21:35:31Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-09-06T21:35:31Z", "attachment_id": null}, {"count": 40, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "id": 177594, "attachment_id": null, "bug_id": 42248, "creation_time": "2014-09-06T21:37:35Z", "time": "2014-09-06T21:37:35Z", "text": "@Andrei, few questions:\n- Testing feature, I see icon is not disabled when undo or redo cannot be done\n- Where do the icon come from , we need to know the license of icons. For now I replaced them by open_icon_library used in JMeter\n\n\nMany thanks for this contribution !"}, {"count": 41, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "is_private": false, "id": 177595, "time": "2014-09-06T22:01:09Z", "bug_id": 42248, "creation_time": "2014-09-06T22:01:09Z", "text": "Date: Sat Sep  6 21:59:18 2014\nNew Revision: 1622945\n\nURL: http://svn.apache.org/r1622945\nLog:\nBug 42248 - Undo-redo support on Test Plan tree modification\nUpdate icons state on redo/undo\nBugzilla Id: 42248\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/gui/action/UndoCommand.java\n    jmeter/trunk/src/core/org/apache/jmeter/gui/util/JMeterToolBar.java"}, {"count": 42, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "is_private": false, "id": 177596, "time": "2014-09-06T22:01:44Z", "bug_id": 42248, "creation_time": "2014-09-06T22:01:44Z", "text": "@Andrei, icon update issue fixed now.\nSo only icons license question remains."}, {"count": 43, "tags": [], "bug_id": 42248, "attachment_id": null, "id": 177597, "time": "2014-09-06T22:07:12Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-09-06T22:07:12Z", "is_private": false, "text": "Date: Sat Sep  6 22:04:42 2014\nNew Revision: 1622947\n\nURL: http://svn.apache.org/r1622947\nLog:\nBug 42248 - Undo-redo support on Test Plan tree modification\nUpdate icons state on redo/undo\nOups missed 1 class\nBugzilla Id: 42248\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/gui/MainFrame.java"}, {"count": 44, "tags": [], "bug_id": 42248, "attachment_id": null, "text": "Regarding icons license you did everything right. Using the same icons collection for whole toolbar is better than using different. Initial icons were taken from the Internet, I did not know their license.\n\nRegarding toolbar buttons enabling-disabling there is a problem, since JMeter code does not offer interface for enabling/disabling icons easily, at leas I did not find one. So I left it enabled and put a TODO comment for this. \n\nI have dowloaded latest code and now toolbar buttons are always disabled. I suppose this was not your intention. From what I've seen in the code, implementing the interface for proper buttons enabling/disabling would require some work, that's why I did not try to solve it together with Undo, just don't want to link two big problems.", "id": 177598, "time": "2014-09-07T06:58:14Z", "creator": "apc4@ya.ru", "creation_time": "2014-09-07T06:58:14Z", "is_private": false}, {"count": 45, "tags": [], "bug_id": 42248, "attachment_id": null, "text": "Hello Andrei, \nI made a mistake in the place where I update toolbar, so they are only updated in undo/redo calls instead of being so every time history changes.\n\nI will fix this this afternook hopefully, I disabled it temporarily in trunk.\n\nThanks for noticing and reporting it.", "id": 177599, "time": "2014-09-07T09:41:22Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-09-07T09:41:22Z", "is_private": false}, {"count": 46, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "text": "Date: Sun Sep  7 08:31:46 2014\nNew Revision: 1622984\n\nURL: http://svn.apache.org/r1622984\nLog:\nBug 42248 - Undo-redo support on Test Plan tree modification\nTemporary disable as I missed the right place to call it\nBugzilla Id: 42248\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/gui/action/UndoCommand.java\n\nDate: Sun Sep  7 14:04:34 2014\nNew Revision: 1623019\n\nURL: http://svn.apache.org/r1623019\nLog:\nBug 42248 - Undo-redo support on Test Plan tree modification\nCorrect toolbar undo/redo buttons disable/enable\nBugzilla Id: 42248\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/gui/GuiPackage.java\n    jmeter/trunk/src/core/org/apache/jmeter/gui/MainFrame.java\n    jmeter/trunk/src/core/org/apache/jmeter/gui/UndoHistory.java\n    jmeter/trunk/src/core/org/apache/jmeter/gui/action/UndoCommand.java", "id": 177605, "time": "2014-09-07T14:05:17Z", "bug_id": 42248, "creation_time": "2014-09-07T14:05:17Z", "is_private": false}, {"count": 47, "tags": [], "bug_id": 42248, "attachment_id": null, "id": 177911, "time": "2014-09-16T19:36:18Z", "creator": "support@ubikloadpack.com", "creation_time": "2014-09-16T19:36:18Z", "is_private": false, "text": "Hello JMeter Team,\nWe started testing the nightly build recently and we wanted to report some issues we noticed related to this great feature:\n- When you have a \"realistic \" Test Plan of 2.4 mb, feature makes JMeter unusable. Whenever you change something, it takes 60 seconds to do it and UI is completely blocked (during clone), this happens with -Xms2g -Xmx under 2.7 Ghz Intel Core I7 Mac Book with 16 Gb of RAM with Java 8u20 Mac OSX Mavericks\n\n- Undo/Redo is called \"abusively\" when for example you:\n1) Search for a node by name\n2) In Module Controller GUI, when you expand a node\n\nAnalysing it, is it due to JMeterTreeNode#setMarkedBySearch calling treeModel.nodeChanged(this).\n\nRegards\nUbik Load Pack Team"}, {"count": 48, "tags": [], "bug_id": 42248, "is_private": false, "text": "Created attachment 32026\nPatch that disables Undo/Redo feature if undo.history.size is set to 0\n\nHello,\nFind attached a patch that disables effectively feature if \"undo.history.size\" property is set to 0.\nCurrently (before patch) if it is set to 0, all the work related to it is done but no history is stored, so for a medium to big Test Plan you get big slowdowns without any benefit.\n\nRegards\nUbik Load Pack", "id": 177912, "time": "2014-09-16T19:42:38Z", "creator": "support@ubikloadpack.com", "creation_time": "2014-09-16T19:42:38Z", "attachment_id": 32026}, {"count": 49, "tags": [], "text": "Hi Andrey / Philippe,\nI've reported on couple of issues that I've found with the most recent nightly build:\n\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=57039\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=57040\n\nI think that this undo-redo is a major milestone and it will require some more effort to make it public due to the current quality, which is not enough.\n\nIt might make sense to close this ticket/bug - and have all follow-ups in separate bugs.\nThis will allow to at least make this feature part of the next release, but disabled with the default configuration, so it will not affect the reputation of JMeter from one hand, but on the other - will allow more users to further test it and report on bugs.", "is_private": false, "bug_id": 42248, "id": 178172, "time": "2014-09-29T13:22:44Z", "creator": "shmulikk@gmail.com", "creation_time": "2014-09-29T13:22:44Z", "attachment_id": null}, {"count": 50, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "URL: http://svn.apache.org/r1628260\nLog:\nBug 42248 - Undo-redo support on Test Plan tree modification\nDisable feature by default as it is still in ALPHA MODE\nMention this in changes.xml\nBugzilla Id: 42248\n\nModified:\n    jmeter/trunk/bin/jmeter.properties\n    jmeter/trunk/src/core/org/apache/jmeter/gui/UndoHistory.java\n    jmeter/trunk/xdocs/changes.xml", "id": 178181, "attachment_id": null, "bug_id": 42248, "creation_time": "2014-09-29T19:14:38Z", "time": "2014-09-29T19:14:38Z", "is_private": false}, {"count": 51, "tags": [], "bug_id": 42248, "is_private": false, "text": "(In reply to UbikLoadPack support from comment #47)\n> Hello JMeter Team,\n> We started testing the nightly build recently and we wanted to report some\n> issues we noticed related to this great feature:\n> - When you have a \"realistic \" Test Plan of 2.4 mb, feature makes JMeter\n> unusable. Whenever you change something, it takes 60 seconds to do it and UI\n> is completely blocked (during clone), this happens with -Xms2g -Xmx under\n> 2.7 Ghz Intel Core I7 Mac Book with 16 Gb of RAM with Java 8u20 Mac OSX\n> Mavericks\n> \n> - Undo/Redo is called \"abusively\" when for example you:\n> 1) Search for a node by name\n> 2) In Module Controller GUI, when you expand a node\n> \n> Analysing it, is it due to JMeterTreeNode#setMarkedBySearch calling\n> treeModel.nodeChanged(this).\n> \n> Regards\n> Ubik Load Pack Team\n\nIt does not look like  JMeterTreeNode#setMarkedBySearch gets called when the project is loaded. So the 60 second delay in loading a 2MB project does not appear to be caused by setMarkedBySearch function.  \nI made this determination by putting a breakpoint on the function:\n public void setMarkedBySearch(boolean tagged) {\n       this.markedBySearch = tagged;\n       treeModel.nodeChanged(this);\n    }\n\nI am working on finding the root cause for the delay during the project loading phase.", "id": 186922, "time": "2015-12-13T21:05:05Z", "creator": "bhatt.chaitanya@gmail.com", "creation_time": "2015-12-13T21:05:05Z", "attachment_id": null}, {"count": 52, "tags": [], "text": "(In reply to Philippe Mouawad from comment #50)\n> URL: http://svn.apache.org/r1628260\n> Log:\n> Bug 42248 - Undo-redo support on Test Plan tree modification\n> Disable feature by default as it is still in ALPHA MODE\n> Mention this in changes.xml\n> Bugzilla Id: 42248\n> \n> Modified:\n>     jmeter/trunk/bin/jmeter.properties\n>     jmeter/trunk/src/core/org/apache/jmeter/gui/UndoHistory.java\n>     jmeter/trunk/xdocs/changes.xml\n\nPhilippe,\n\nIt looks like Save#convertSubTree is the culprit for slowing down the clone operation. Any idea why this blow code is slow?\n\n void convertSubTree(HashTree tree) {\n        Iterator<Object> iter = new LinkedList<>(tree.list()).iterator();\n        while (iter.hasNext()) {\n            JMeterTreeNode item = (JMeterTreeNode) iter.next();\n            convertSubTree(tree.getTree(item));\n            TestElement testElement = item.getTestElement(); // requires JMeterTreeNode\n            tree.replaceKey(item, testElement);\n        }\n    }", "is_private": false, "bug_id": 42248, "id": 186925, "time": "2015-12-14T00:04:19Z", "creator": "bhatt.chaitanya@gmail.com", "creation_time": "2015-12-14T00:04:19Z", "attachment_id": null}]