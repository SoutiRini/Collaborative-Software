[{"count": 0, "tags": [], "creator": "alex-pub.apache-ant@reflexion.net", "attachment_id": null, "id": 131160, "time": "2009-10-15T16:34:16Z", "bug_id": 48008, "creation_time": "2009-10-15T16:34:16Z", "is_private": false, "text": "When I use a touch task with a mapper\n<touch\n  mkdirs=\"true\"\n  verbose=\"${TALK}\"\n>\n  <fileset dir=\"${orig-dir}\"/>\n  <globmapper from=\"*\" to=\"${shadow-dir}/*\"/>\n</touch>\n\nProduces empty files that are OLDER than sources.\nAfter running this task and using ls --time-style=full-iso, I get the following timestamp for source:\n   2009-09-30 07:44:26.290894100 -0400\n\nAnd this timestamp for target\n   2009-09-30 07:44:26.290000000 -0400\n\nNotice that target now is older than source.\n\nThis breaks <ant-contrib:outofdate> task later on."}, {"count": 1, "tags": [], "bug_id": 48008, "attachment_id": null, "text": "Ant uses the lastModified and setLastModified methods in java.io.File http://java.sun.com/j2se/1.4.2/docs/api/java/io/File.html which doesn't allow a granularity smaller than millisecond.\n\nI don't understand why outofdate seems to be rounding up here but as far as I can see there isn't anything touch could do differently as it set the last modified time to the one read from the source file.\n\nCANTFIX rather than WONTFIX.", "id": 131256, "time": "2009-10-20T23:22:48Z", "creator": "bodewig@apache.org", "creation_time": "2009-10-20T23:22:48Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 48008, "attachment_id": null, "text": "(In reply to comment #1)\n> Ant uses the lastModified and setLastModified methods in java.io.File\n> http://java.sun.com/j2se/1.4.2/docs/api/java/io/File.html which doesn't allow a\n> granularity smaller than millisecond.\n> \n> I don't understand why outofdate seems to be rounding up here but as far as I\n> can see there isn't anything touch could do differently as it set the last\n> modified time to the one read from the source file.\n> \n> CANTFIX rather than WONTFIX.\n\nHow about setting it to\nnewFile.setLastModified( origFile.lastModified() + 1 )\n\nThis will definitely round it in the right direction.  Plus it would probably integrate better with the tools external to ant (e.g. make), that could have used the newly created file.", "id": 131262, "time": "2009-10-21T04:57:09Z", "creator": "alex-pub.apache-ant@reflexion.net", "creation_time": "2009-10-21T04:57:09Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 48008, "attachment_id": null, "id": 132045, "creation_time": "2009-11-17T10:54:22Z", "time": "2009-11-17T10:54:22Z", "creator": "alex-pub.apache-ant@reflexion.net", "text": "Is it possible to add \"roundup\" attribute to Touch task, similar in concept to one in Zip task.\n\nThen if the attribute is set, you can do \n\nnewFile.setLastModified( origFile.lastModified() + 1 ) as proposed in Comment 2", "is_private": false}]