[{"count": 0, "tags": [], "creator": "timothy.hepner.ctr@metnet.navy.mil", "is_private": false, "text": "using Java 1.5.0_4\nCookie data does not get sent in the request over https while running the test\nfrom a linux machine.  The exact same test works when run on Windows XP. \nLooking at a result tree from each you can see on the request tab that the test\nfrom the windows machine contains the Cookie Data at the bottom.  The test from\nthe linux machine does not.\n\nI turned on Debugging for protocol.http.  Right after the cookie gets added to\nstore, I see a NullPointerException in the logs..see below.  This exception does\nnot happen in the windows jmeter logs.\n\n2006/02/17 22:06:27 DEBUG - jmeter.protocol.http.control.CookieManager: New\nCookie = .portal-alpha.fnmoc.navy.mil       TRUE    /       FALSE   0      \narpt9   QNJWUNS192.168.232.121CKOYJ removing matching Cookie\n.portal-alpha.fnmoc.navy.mil      TRUE     /       FALSE   0       arpt9  \nQNJWUNS192.168.232.120CKOYQ\n2006/02/17 22:06:27 DEBUG - jmeter.protocol.http.control.CookieManager: Add\ncookie to store .portal-alpha.fnmoc.navy.mil        TRUE    /       FALSE   0  \n    arpt9   QNJWUNS192.168.232.121CKOYJ\n2006/02/17 22:06:27 DEBUG - jmeter.protocol.http.control.CookieManager: Received\nCookie: arpt9=QNJWUNS192.168.232.120CKOYQ; path=/\nFrom:https://portal-alpha.fnmoc.navy.mil:443/metoc/p?action=NessoLogoutUser\n2006/02/17 22:06:27 DEBUG - jmeter.protocol.http.control.CookieManager: New\nCookie = .portal-alpha.fnmoc.navy.mil       TRUE    /       FALSE   0      \narpt9   QNJWUNS192.168.232.120CKOYQ removing matching Cookie\n.portal-alpha.fnmoc.navy.mil      TRUE     /       FALSE   0       arpt9  \nQNJWUNS192.168.232.121CKOYJ\n2006/02/17 22:06:27 DEBUG - jmeter.protocol.http.control.CookieManager: Add\ncookie to store .portal-alpha.fnmoc.navy.mil        TRUE    /       FALSE   0  \n    arpt9   QNJWUNS192.168.232.120CKOYQ\n2006/02/17 22:06:27 ERROR - jmeter.reporters.ResultCollector: \njava.lang.NullPointerException\n        at\ncom.thoughtworks.xstream.io.xml.PrettyPrintWriter.writeAttributeValue(PrettyPrintWriter.java:85)\n        at\ncom.thoughtworks.xstream.io.xml.PrettyPrintWriter.addAttribute(PrettyPrintWriter.java:80)\n        at\ncom.thoughtworks.xstream.io.WriterWrapper.addAttribute(WriterWrapper.java:25)\n        at\norg.apache.jmeter.save.converters.SampleResultConverter.setAttributes(SampleResultConverter.java:225)\n        at\norg.apache.jmeter.protocol.http.util.HTTPResultConverter.marshal(HTTPResultConverter.java:76)\n        at\ncom.thoughtworks.xstream.core.ReferenceByXPathMarshaller.convertAnother(ReferenceByXPathMarshaller.java:36)\n        at\ncom.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:68)\n        at\norg.apache.jmeter.save.converters.SampleResultConverter.saveSubResults(SampleResultConverter.java:180)\n        at\norg.apache.jmeter.protocol.http.util.HTTPResultConverter.marshal(HTTPResultConverter.java:78)\n        at\ncom.thoughtworks.xstream.core.ReferenceByXPathMarshaller.convertAnother(ReferenceByXPathMarshaller.java:36)\n        at\ncom.thoughtworks.xstream.core.TreeMarshaller.start(TreeMarshaller.java:46)\n        at\ncom.thoughtworks.xstream.core.ReferenceByXPathMarshallingStrategy.marshal(ReferenceByXPathMarshallingStrategy.java:17)\n        at com.thoughtworks.xstream.XStream.marshal(XStream.java:461)\n        at com.thoughtworks.xstream.XStream.marshal(XStream.java:451)\n        at com.thoughtworks.xstream.XStream.toXML(XStream.java:443)\n        at org.apache.jmeter.save.SaveService.saveSampleResult(SaveService.java:230)\n        at\norg.apache.jmeter.reporters.ResultCollector.recordResult(ResultCollector.java:412)\n        at\norg.apache.jmeter.reporters.ResultCollector.sampleOccurred(ResultCollector.java:390)\n        at\norg.apache.jmeter.threads.ListenerNotifier.notifyListeners(ListenerNotifier.java:225)\n        at\norg.apache.jmeter.threads.JMeterThread.notifyListeners(JMeterThread.java:467)\n        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:258)\n        at java.lang.Thread.run(Thread.java:595)\n\n2006/02/17 22:06:27 INFO  - jmeter.threads.JMeterThread: Thread Test Thread\nGroup 1-1 is done\n2006/02/17 22:06:27 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread 0\n2006/02/17 22:06:27 INFO  - jmeter.engine.StandardJMeterEngine: Stopping test\n2006/02/17 22:06:27 INFO  - jmeter.engine.StandardJMeterEngine: Notifying test\nlisteners of end of test\n2006/02/17 22:06:27 INFO  - jmeter.gui.util.JMeterMenuBar: setRunning(false,local)\n2006/02/17 22:06:27 INFO  - jmeter.engine.StandardJMeterEngine: Test has ended", "id": 85903, "time": "2006-02-17T23:11:27Z", "bug_id": 38702, "creation_time": "2006-02-17T23:11:27Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Created attachment 17735\ntest run on windows and linux.\n\nThis test when run on windows worked fine.  When run on linux it didn't send\nthe cookie information in the request.", "attachment_id": 17735, "id": 85904, "creator": "timothy.hepner.ctr@metnet.navy.mil", "time": "2006-02-17T23:32:39Z", "bug_id": 38702, "creation_time": "2006-02-17T23:32:39Z", "is_private": false}, {"count": 2, "tags": [], "creator": "timothy.hepner.ctr@metnet.navy.mil", "is_private": false, "text": "Created attachment 17736\njmeter.log from windows test session\n\nthis test doesn't have the NullPointerException that the next one does.  This\nis run with protocol.http logging set to debug", "id": 85905, "time": "2006-02-17T23:34:08Z", "bug_id": 38702, "creation_time": "2006-02-17T23:34:08Z", "attachment_id": 17736}, {"count": 3, "tags": [], "creator": "timothy.hepner.ctr@metnet.navy.mil", "is_private": false, "text": "Created attachment 17737\njmeter.log from linux  test session\n\nthis test shows the NullPointerException after cookies are added.", "id": 85906, "time": "2006-02-17T23:34:59Z", "bug_id": 38702, "creation_time": "2006-02-17T23:34:59Z", "attachment_id": 17737}, {"count": 4, "attachment_id": null, "bug_id": 38702, "text": "You seem to be using a different version of JMeter on Linux - 2-1.20060126\nrather than 2.1.1.\n\nAlso, on Linux JMeter complains:\njmeter.reporters.ResultCollector: Unexpected EOF trying to find XML end marker\nin ../output/logout.jtl \njmeter.reporters.ResultCollector: Unexpected EOF trying to find XML end marker\nin ../output/main.jtl\n\nThis may be because these files were previously written as CSV files. \n\nI suspect the EOF problem is causing the ResultCollector NPEs later.\n\nPlease can you try re-running the test with 2.1.1 on Linux having first renamed\nor deleted the jtl files?\n\nThere is also a problem with the Keystore, but that seems to be the same for\nboth runs, so is hopefully irrelevant,", "id": 85908, "time": "2006-02-18T16:33:04Z", "creator": "sebb@apache.org", "creation_time": "2006-02-18T16:33:04Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 38702, "attachment_id": null, "is_private": false, "id": 86041, "time": "2006-02-21T22:03:33Z", "creator": "timothy.hepner.ctr@metnet.navy.mil", "creation_time": "2006-02-21T22:03:33Z", "text": "My mistake.  I didn't realize I was running the nightly build.  So the problem\nexists on both windows and linux.  I can duplicate the problem on both\njmeter-2-1.20060126 and jmeter-2-1.20060221.  jmeter-2.1.1 works fine.  I did\nnotice that in the https request for jmeter-2-1.20060221 it said \"[no cookies]\".\n I'll paste the requests below in case you need them.  I'll just use 2.1.1 from\nher on out.\n  thanks for the help,\n       Tim\n\n*******jmeter-2-1.20060221 https request with cookie *******\n\nGET https://hepners.net:443/\n\n[no cookies]\n\nRequest Headers:\nIf-None-Match: \"2c2bc-7ef-a0c9f640\"\nHost: hepners.net\nAccept-Language: en-us\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR\n1.1.4322)\nIf-Modified-Since: Sat, 07 Jan 2006 01:24:33 GMT\nAccept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg,\napplication/x-shockwave-flash, application/vnd.ms-excel,\napplication/vnd.ms-powerpoint, application/msword, */*\n\n\n\n*******exact same request using jmeter-2-1.20060126  *******\nGET https://hepners.net:443/\n\nIf-None-Match: \"2c2bc-7ef-a0c9f640\"\nHost: hepners.net\nAccept-Language: en-us\nUser-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR\n1.1.4322)\nIf-Modified-Since: Sat, 07 Jan 2006 01:24:33 GMT\nAccept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg,\napplication/x-shockwave-flash, application/vnd.ms-excel,\napplication/vnd.ms-powerpoint, application/msword, */*\n\n"}, {"count": 6, "tags": [], "text": "Thanks for the extra info. The [no cookies] text is something I added very\nrecently to make the contents clearer (hopefully!).\n\nI'm concerned that the neither of the nightly builds seem to work on Linux,\nwhereas 2.1.1 does. We are hoping to make a new release shortly, so that needs\nto be sorted out.\n\nWhat version of Linux are you using?", "is_private": false, "id": 86057, "creator": "sebb@apache.org", "time": "2006-02-22T00:00:14Z", "bug_id": 38702, "creation_time": "2006-02-22T00:00:14Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 38702, "attachment_id": null, "id": 86058, "time": "2006-02-22T00:37:31Z", "creator": "timothy.hepner.ctr@metnet.navy.mil", "creation_time": "2006-02-22T00:37:31Z", "is_private": false, "text": "The nightly builds don't send cookies on either linux or windows.  There is no\ndifference between the two operating systems.  The reason I originally entered\nit as a linux problem was because I was runnning a nightly build on linux and\n2.1.1 on windows.  Sorry about the confusion.\n"}, {"count": 8, "tags": [], "bug_id": 38702, "attachment_id": null, "is_private": false, "id": 86063, "time": "2006-02-22T01:36:17Z", "creator": "sebb@apache.org", "creation_time": "2006-02-22T01:36:17Z", "text": "OK, I see. \n\nCookies work fine for me using http: on the nightlies; I've not tested https: -\nbut I'm a bit surprised that one works and the other doesn't.\n\nI still wonder if the NPE errors are anything to do with it. As these are\nrelated to saving sample results to a file, it would be interesting to know if\nthe cookie problem still occurs if there is no output file. Likewise, if the\ncookie problem occurs without the NPE."}, {"count": 9, "tags": [], "creator": "sebb@apache.org", "is_private": false, "text": "Looks like this is the same as bug 38764, for which I've just committed a fix.\n\nI'll generate a new build a bit later.\n\nThe NPE in the Result Collector now looks to be a different problem.", "id": 86151, "time": "2006-02-23T19:28:58Z", "bug_id": 38702, "creation_time": "2006-02-23T19:28:58Z", "attachment_id": null}, {"count": 10, "tags": [], "text": "Nightly build 2-1.20060301 contains the fix.\n\nDoes this solve the problem?", "is_private": false, "id": 86331, "creator": "sebb@apache.org", "time": "2006-03-01T12:52:13Z", "bug_id": 38702, "creation_time": "2006-03-01T12:52:13Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "timothy.hepner.ctr@metnet.navy.mil", "attachment_id": null, "text": "Yes! This build solves the problem.  Thanks for all your hard work on this.  I\nmay have another one for you soon!", "id": 86346, "time": "2006-03-01T18:21:11Z", "bug_id": 38702, "creation_time": "2006-03-01T18:21:11Z", "is_private": false}, {"count": 12, "attachment_id": null, "bug_id": 38702, "text": "OK, closing bug", "id": 86351, "time": "2006-03-01T19:29:42Z", "creator": "sebb@apache.org", "creation_time": "2006-03-01T19:29:42Z", "tags": [], "is_private": false}]