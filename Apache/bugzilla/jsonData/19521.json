[{"count": 0, "tags": [], "creator": "dclarke@rim.net", "attachment_id": null, "is_private": false, "id": 36455, "time": "2003-05-01T17:25:14Z", "bug_id": 19521, "creation_time": "2003-05-01T17:25:14Z", "text": "In order to set the character encoding for a particular request, \nRequest.setCharacterEncoding must be called before any calls to the other \nRequest methods are made.\n\nWhen RequestDumperValve is active, it intercepts requests before they get to \nthe servlet.  When it calls methods on the request object to gather up \ninformation for logging, it has the side affect of setting the character \nencoding to the platform default.\n\nThis may be considered as designed behavior, however it is not obvious that \nthis is what is happening.  For developers writing Internationalized code, this \ncan cause a lot of cycles to be wasted.\n\nSome possible alternatives (probably more than just these):\n* Have RequestDumperValve wait until after the Servlet has been invoked before \ngathering information for logging.\n* Have Request.setCharacterEncoding throw an exception or log some highly \nvisible information when it detects that the new encoding will have no affect.  \nThis log information should say something about RequestDumperValve so the user \nis pointed in the right direction for a fix.\n* other better ideas???"}, {"count": 1, "tags": [], "bug_id": 19521, "is_private": false, "id": 55856, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2004-04-15T21:01:34Z", "time": "2004-04-15T21:01:34Z", "text": "I think the simplest solution is to improve the request dumper valve \ndocumentation. I'll add a large warning of the side effects to the docs."}, {"count": 2, "tags": [], "bug_id": 19521, "text": "This has been fixed in CVS for TC4 and TC5.", "id": 55864, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2004-04-15T21:36:46Z", "time": "2004-04-15T21:36:46Z", "is_private": false}]