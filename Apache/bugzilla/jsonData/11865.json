[{"count": 0, "tags": [], "bug_id": 11865, "attachment_id": null, "is_private": false, "id": 21392, "time": "2002-08-20T15:20:12Z", "creator": "hmm_@yoyomail.com", "creation_time": "2002-08-20T15:20:12Z", "text": "Attempting to forward from the root context to another context always fails\n\nHere are the steps to replicate this problem:\n\n1. Modify server.xml by adding the following:\n <Context path=\"\" docBase=\"ROOT\" debug=\"0\" crossContext=\"true\"/>\n <Context path=\"/context1\" docBase=\"context1\" debug=\"0\" crossContext=\"true\"/>\n <Context path=\"/context2\" docBase=\"context2\" debug=\"0\" crossContext=\"true\"/>\n\n2. Create the following jsp files:\n  /index.jsp and /context1/context1.jsp:\n    <%\n      getServletContext().getContext(\"/context2\").getRequestDispatcher\n(\"/context2.jsp\").forward(request, response);\n    %>\n\n  /context2/context2.jsp:\n    This is context2.jsp\n\n3. Try to access http://localhost:8080/context1/context1.jsp and notice that \nthis successfully forwards to /context2/context2.jsp\n\n4. Try to access http://localhost:8080 or http://localhost:8080/index.jsp and \nnotice that this fails even though /index.jsp contains the same code \nas /context1/context1.jsp\n\nI believe (although I have not tested this) that the error lies in the \nfile /catalina/src/share/org/apache/catalina/core/ApplicationContext.java lines \n440-448:\n\n 440               \n 441                       // Return the current context if requested\n 442                       String contextPath = context.getPath();\n\n \n 443 remm     1.37         if (!contextPath.endsWith(\"/\"))\n 444                           contextPath = contextPath + \"/\";\n 445                       if ((contextPath.length() > 0) && (uri.startsWith\n(contextPath))) {\n\n \n 446 pier     1.29             return (this);\n 447                       }\n 448               \n \nIt seems like the above code will always return the current context of / when \nforwarding from / since all uri's start with /\n\nI believe this may have been working in version 1.36 of the file \nApplicationContext.java but stopped working in version 1.37 (the test used to \nbe uri.equals instead of uri.startsWith)."}, {"count": 1, "tags": [], "creator": "rsmith@soe.sony.com", "text": "\n\n*** This bug has been marked as a duplicate of 13040 ***", "id": 23464, "time": "2002-09-26T18:21:01Z", "bug_id": 11865, "creation_time": "2002-09-26T18:21:01Z", "is_private": false, "attachment_id": null}]