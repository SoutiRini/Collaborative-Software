[{"count": 0, "text": "If a jsp or a servlet uses char read() on its JspReader, the call is eventually\npassed to CharChunk (or ByteChunk) substract() method. The method body needs\nfixing to be functional, see:\n    public int substract()\n        throws IOException {\n\n        if ((end - start) == 0) {\n            if (in == null)\n                return -1;\n            int n = in.realReadChars(buff, 0, buff.length);\n            if (n < 0)\n                return -1;\n        }\n\n        return (buff[start++]);\n\n    }\n\nShould set end=start=0 after reading chars from in. The same for ByteChunk.\n\nThe next method, substract(CharChunk) does it... more or less.\n\nActually, I'd love to straighten up this code a little bit - but it would be\nbetter to exchange opinions with the current author, Remy, regarding certain\nmethods and functionality, before doing anything.\n\nThanks,\nVlad Patryshev\nvpatryshev@borland.com", "bug_id": 30340, "is_private": false, "id": 61167, "time": "2004-07-27T03:25:30Z", "creator": "vpatryshev@borland.com", "creation_time": "2004-07-27T03:25:30Z", "tags": [], "attachment_id": null}, {"text": "This does not sound convincing to me (you have to know the realReadChars doesn't\ndo what you think it is doing). I think you should be using the latest TC\nrelease, and see if you still have problems.", "tags": [], "bug_id": 30340, "is_private": false, "count": 1, "id": 61174, "time": "2004-07-27T07:05:30Z", "creator": "remm@apache.org", "creation_time": "2004-07-27T07:05:30Z", "attachment_id": null}]