[{"count": 0, "tags": [], "text": "When using HttpClient4 the HTTP Cookie Manager \"Clear cookies each iteration?\" setting has no effect. Even with this setting enabled, cookies are not being cleared between iterations on the same thread.\n\nThis affects both HTTP and HTTPS protocol.\n\nThe same exact setup using the Implementation HttpClient3.1 or Java have not got the problem.\n\nJMeter, however, does not report this on the Request tab of the \"View Results Tree\" listener. Here it shows \"[no cookies]\". But using WireShark it is possible to see that the same request has been sent using the Cookies set on the previous request (which was on the previous iteration).\n\n\nSystem settings:\nOS: Mac OS 10.7.2 (Lion)\nApache JMeter Version 2.5.1 r1177103\njava -version\njava version \"1.6.0_26\"\nJava(TM) SE Runtime Environment (build 1.6.0_26-b03-383-11A511)\nJava HotSpot(TM) 64-Bit Server VM (build 20.1-b02-383, mixed mode)", "attachment_id": null, "bug_id": 52126, "id": 151136, "time": "2011-11-02T22:18:09Z", "creator": "mail@skyhorse.org", "creation_time": "2011-11-02T22:18:09Z", "is_private": false}, {"count": 1, "tags": [], "text": "Thanks for the report.\n\nForgot to disable automatic cookie handling in HC4 - oops!\n\nNow fixed:\n\nURL: http://svn.apache.org/viewvc?rev=1197164&view=rev\nLog:\nBug 52126 - HttpClient4 does not clear cookies between iterations\n\nModified:\n   jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java\n   jmeter/trunk/xdocs/changes.xml", "is_private": false, "id": 151147, "creator": "sebb@apache.org", "time": "2011-11-03T14:49:07Z", "bug_id": 52126, "creation_time": "2011-11-03T14:49:07Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 52126, "text": "Hi there,\n\nThe issue has been fixed for domain cookies (cookie with a domain).\n\nFor host cookies, the issue still persists even in the latest version JMeter 2.7. It does not clear host cookies (cookie without a domain) between loop iterations. It happens in all http client implementations: Java, HttpClient3.1 and 4.\n\nPlease have a look.\n\nThanks,\nBryce", "id": 159741, "time": "2012-06-06T03:52:34Z", "creator": "brycelin@hotmail.com", "creation_time": "2012-06-06T03:52:34Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "Hi,\n\nTo avoid any confusion, we used Cookie Manager with a Loop Controller. It does not clear any cookies unless cookies are explicitly expired in a http response.\n\nIt works fine with Thread Group - cookies are cleared properly for each loop iteration.\n\nThanks,\nBryce", "is_private": false, "id": 159758, "creator": "brycelin@hotmail.com", "time": "2012-06-06T15:31:03Z", "bug_id": 52126, "creation_time": "2012-06-06T15:31:03Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 159759, "time": "2012-06-06T17:13:05Z", "bug_id": 52126, "creation_time": "2012-06-06T17:13:05Z", "is_private": false, "text": "Hello,\nCAN you attach \u00e0 simple test plan showing issue ?\nThanks\nRegards\nPhilippe"}, {"count": 5, "tags": [], "text": "(In reply to comment #3)\n> Hi,\n> \n> To avoid any confusion, we used Cookie Manager with a Loop Controller. It\n> does not clear any cookies unless cookies are explicitly expired in a http\n> response.\n> \n> It works fine with Thread Group - cookies are cleared properly for each loop\n> iteration.\n> \n> Thanks,\n> Bryce\n\nSo I close issue as it is not related.\nI suggest you open a new issue as Enhancement saying:\n\"CookieManager: Cookies are not cleared on iteration of LoopController\"\n\nI made some tests and cookies are correctly cleared with or without domain when placed at Thread Group level and within iteration of Thread Group (as you say)\nIndeed they are not for iterations of LoopController which is not a bug request but an enhancement request that will or will not be implemented.", "is_private": false, "id": 159773, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2012-06-06T19:42:14Z", "bug_id": 52126, "creation_time": "2012-06-06T19:42:14Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "beluczak@gazeta.pl", "attachment_id": null, "id": 162433, "time": "2012-09-27T11:20:54Z", "bug_id": 52126, "creation_time": "2012-09-27T11:20:54Z", "is_private": false, "text": "I believe such 'enchancement' has been already present in the 2.3.4, be it bug or a feature - if there arrived new cookie named the same as existing one, it was overwritten. \n\nSo I suppose downgrading is a solution for those intrested in it as a feature."}, {"count": 7, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 163121, "time": "2012-11-01T15:27:20Z", "bug_id": 52126, "creation_time": "2012-11-01T15:27:20Z", "is_private": false, "text": "(In reply to comment #6)\n> I believe such 'enchancement' has been already present in the 2.3.4, be it\n> bug or a feature - if there arrived new cookie named the same as existing\n> one, it was overwritten. \n\nIf that is true, then it is a different issue.\n\nNew cookies with the same name should replace existing ones.\nIf that is *not* the case, please open a new Bugzilla with the details."}]