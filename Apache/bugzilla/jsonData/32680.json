[{"count": 0, "tags": [], "bug_id": 32680, "attachment_id": null, "is_private": false, "id": 68453, "time": "2004-12-14T03:29:09Z", "creator": "dims@yahoo.com", "creation_time": "2004-12-14T03:29:09Z", "text": "For example,\njakarta-tomcat-connectors/util/java/org/apache/tomcat/util/net/jsse/JSSE13SocketFactory.java\n\nhas the following lines:\n69: Security.addProvider (new sun.security.provider.Sun());\n70: Security.addProvider (new com.sun.net.ssl.internal.ssl.Provider());\n\nCan we please do this via reflection? Folks using Kaffe are facing problems.\nThis problem was uncovered by Kaffe/Gump:\nhttp://brutus.apache.org/gump/kaffe/jakarta-tomcat-connectors/jakarta-tomcat-util/gump_work/build_jakarta-tomcat-connectors_jakarta-tomcat-util.html\n\nThanks,\ndims"}, {"count": 1, "tags": [], "creator": "robilad@yahoo.com", "attachment_id": null, "id": 68457, "time": "2004-12-14T03:36:27Z", "bug_id": 32680, "creation_time": "2004-12-14T03:36:27Z", "is_private": false, "text": "*** Bug 32679 has been marked as a duplicate of this bug. ***"}, {"count": 2, "attachment_id": null, "bug_id": 32680, "text": "To compile with a non-Sun JVM, you need to have the JSSE 1.0.x jars \navailable.  These are in the CLASSPATH on the Gump page, and in the \n<classpath> entry under the <javac> in the build.xml file.  This points to the \nproblem being with Kaffe, or with ant's integration with Kaffe.", "id": 68460, "time": "2004-12-14T05:56:56Z", "creator": "william.barker@wilshire.com", "creation_time": "2004-12-14T05:56:56Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 32680, "attachment_id": null, "text": "Actually ... it is a bug in tomcat-connector because the class that jikes\ncomplains about, sun.security.provider.Sun is *not* part of JSSE, afaict.\n\nSee the log at\nhttp://brutus.apache.org/gump/kaffe/jakarta-tomcat-connectors/jakarta-tomcat-util/gump_work/build_jakarta-tomcat-connectors_jakarta-tomcat-util.html\n\nFor your convenience, I'll provide the relevant excerpt here:\n\n    [javac]     69.             Security.addProvider (new\nsun.security.provider.Sun());\n    [javac]                                               ^-^\n    [javac] *** Semantic Error: You need to modify your classpath, sourcepath,\nbootclasspath, and/or extdirs setup. Jikes could not find package \"sun\" in: \n    [javac]                \n/usr/local/gump/kaffe/workspace/xml-xerces2/java/build/xercesImpl.jar\n    [javac]                 /usr/local/gump-kaffe/jre/lib/rt.jar\n    [javac]                 /usr/local/gump-kaffe/lib/kjc.jar\n    [javac]                 /usr/local/gump-kaffe/lib/gjdoc.jar\n    [javac]                \n/home/gump/workspaces2/kaffe/workspace/jakarta-tomcat-connectors/util/build/classes\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-stylebook.jar\n    [javac]                 /usr/local/gump/kaffe/workspace/ant/dist/lib/ant-jmf.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-swing.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-trax.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-junit.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-launcher.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-nodeps.jar\n    [javac]                 /usr/local/gump/kaffe/workspace/ant/dist/lib/ant.jar\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jcert.jar\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jnet.jar\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jsse.jar\n    [javac]                 /usr/local/gump/packages/jmx-1_2-ri/lib/jmxri.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/jakarta-commons/logging/dist/commons-logging.jar\n    [javac]                \n/home/gump/workspaces2/kaffe/workspace/jakarta-tomcat-connectors/util/java\n    [javac]                \n/usr/local/gump/kaffe/workspace/xml-xerces2/java/tools/resolver.jar\n    [javac]                 .\n\n\n\n    [javac]     69.             Security.addProvider (new\nsun.security.provider.Sun());\n    [javac]                                                   ^------^\n    [javac] *** Semantic Error: You need to modify your classpath, sourcepath,\nbootclasspath, and/or extdirs setup. Jikes could not find package \"sun.security\"\nin: \n    [javac]                \n/usr/local/gump/kaffe/workspace/xml-xerces2/java/build/xercesImpl.jar\n    [javac]                 /usr/local/gump-kaffe/jre/lib/rt.jar\n    [javac]                 /usr/local/gump-kaffe/lib/kjc.jar\n    [javac]                 /usr/local/gump-kaffe/lib/gjdoc.jar\n    [javac]                \n/home/gump/workspaces2/kaffe/workspace/jakarta-tomcat-connectors/util/build/classes\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-stylebook.jar\n    [javac]                 /usr/local/gump/kaffe/workspace/ant/dist/lib/ant-jmf.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-swing.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-trax.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-junit.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-launcher.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-nodeps.jar\n    [javac]                 /usr/local/gump/kaffe/workspace/ant/dist/lib/ant.jar\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jcert.jar\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jnet.jar\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jsse.jar\n    [javac]                 /usr/local/gump/packages/jmx-1_2-ri/lib/jmxri.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/jakarta-commons/logging/dist/commons-logging.jar\n    [javac]                \n/home/gump/workspaces2/kaffe/workspace/jakarta-tomcat-connectors/util/java\n    [javac]                \n/usr/local/gump/kaffe/workspace/xml-xerces2/java/tools/resolver.jar\n    [javac]                 .\n\n\n\n    [javac]     69.             Security.addProvider (new\nsun.security.provider.Sun());\n    [javac]                                                            ^------^\n    [javac] *** Semantic Error: You need to modify your classpath, sourcepath,\nbootclasspath, and/or extdirs setup. Jikes could not find package\n\"sun.security.provider\" in: \n    [javac]                \n/usr/local/gump/kaffe/workspace/xml-xerces2/java/build/xercesImpl.jar\n    [javac]                 /usr/local/gump-kaffe/jre/lib/rt.jar\n    [javac]                 /usr/local/gump-kaffe/lib/kjc.jar\n    [javac]                 /usr/local/gump-kaffe/lib/gjdoc.jar\n    [javac]                \n/home/gump/workspaces2/kaffe/workspace/jakarta-tomcat-connectors/util/build/classes\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-stylebook.jar\n    [javac]                 /usr/local/gump/kaffe/workspace/ant/dist/lib/ant-jmf.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-swing.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-trax.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-junit.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-launcher.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/ant/dist/lib/ant-nodeps.jar\n    [javac]                 /usr/local/gump/kaffe/workspace/ant/dist/lib/ant.jar\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jcert.jar\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jnet.jar\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jsse.jar\n    [javac]                 /usr/local/gump/packages/jmx-1_2-ri/lib/jmxri.jar\n    [javac]                \n/usr/local/gump/kaffe/workspace/jakarta-commons/logging/dist/commons-logging.jar\n    [javac]                \n/home/gump/workspaces2/kaffe/workspace/jakarta-tomcat-connectors/util/java\n    [javac]                \n/usr/local/gump/kaffe/workspace/xml-xerces2/java/tools/resolver.jar\n    [javac]                 .\n\n\n\n    [javac]     69.             Security.addProvider (new\nsun.security.provider.Sun());\n    [javac]                                                                     ^-^\n    [javac] *** Semantic Error: Type \"sun.security.provider.Sun\" was not found.\n\n\nIt only complains about the \"sun.security.provider.Sun\" class and not about the\ncom.sun.net.ssl.internal.ssl.Provider (which it finds on the classpath, as you\ncan see in the \n\n    [javac]                 /usr/local/gump/packages/jsse1.0.3/lib/jsse.jar\n\nline).\n\nI'd suggest using \n\nProvider default = Security.getProvider(\"Sun\");\nif (null == sun) {\n  default = Security.getProviders()[0];\n}\nSecurity.addProvider(default); \n\nif you specifically need Sun's crypto provider (or whetever Sun's provider's\nname is), and want to have a fallback when it's not available. \n\nKaffe comes with its own implementation of JSSE from JESSIE [1], on a side note.\n\ncheers,\ndalibor topic\n\n[1] http://www.nongnu.org/jessie/", "id": 68464, "time": "2004-12-14T07:44:06Z", "creator": "robilad@yahoo.com", "creation_time": "2004-12-14T07:44:06Z", "is_private": false}, {"count": 4, "tags": [], "creator": "william.barker@wilshire.com", "text": "Fixed in CVS", "id": 68468, "time": "2004-12-14T08:58:23Z", "bug_id": 32680, "creation_time": "2004-12-14T08:58:23Z", "is_private": false, "attachment_id": null}]