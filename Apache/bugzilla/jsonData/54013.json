[{"count": 0, "tags": [], "bug_id": 54013, "text": "Created attachment 29490\nPatch for changes to catalina.sh to wait till process dies completely\n\nIn Tomcat 7, when the container is stopped using catalina.sh stop force, the catalina.sh script uses the CATALINA_PID environment variable to send a kill -9 to the pid of the currently running container process. However, this doesn't kill the process instantaneously - say for e.g. when the process is in the middle of a system call or is in the UNINTERRUPTIBLE state. In this case, why cant we use the kill -0 ``cat \"$CATALINA_PID\"`` >/dev/null 2>&1 trick of checking the liveness of the process before removing the PID file that is used with stop in the non-force mode? This would ensure that the stop force is somewhat synchronous. Just wanted to know if there are good reasons why this was not done. If we don't see any issue with this, I am attaching a patch (to catalina.sh) that is intended to do this. Let me know if there are any questions.\n\nThanks in advance!", "id": 162781, "time": "2012-10-16T09:21:49Z", "creator": "mukarram.baig@gmail.com", "creation_time": "2012-10-16T09:21:49Z", "is_private": false, "attachment_id": 29490}, {"count": 1, "text": "Comment on attachment 29490\nPatch for changes to catalina.sh to wait till process dies completely\n\nFix MIME type", "bug_id": 54013, "attachment_id": 29490, "id": 162974, "time": "2012-10-26T19:37:52Z", "creator": "markt@apache.org", "creation_time": "2012-10-26T19:37:52Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 54013, "is_private": false, "count": 2, "id": 168189, "time": "2013-07-01T14:38:32Z", "creator": "markt@apache.org", "creation_time": "2013-07-01T14:38:32Z", "text": "Thanks for the patch. It has been applied to trunk and 7.0.x and will be included in 7.0.42 onwards."}]