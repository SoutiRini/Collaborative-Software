[{"attachment_id": null, "tags": [], "bug_id": 8780, "text": "The following xml code throws a NullPointerException:\n  \n<propertyfile file=\"buildversion.properties\" comment=\"Date, time and build\nnumber of most recent build\"> \n<entry key=\"buildnum\" type=\"int\" default=\"0000\" operation=\"+\" pattern=\"0000\" /> \n<entry key=\"builddate\" type=\"date\" default=\"now\" pattern=\"yyyyMMdda\" /> \n<entry key=\"buildlabel\" value=\"${builddate}_${buildnum}\" /> \n</propertyfile> \n<property file=\"buildversion.properties\" /> \n<echo message=\"Buildlabel is ${buildlabel}\" /> \n<echo message=\"Builddate is ${builddate}\" /> \n<echo message=\"Buildnum is ${buildnum}\" /> \n\nOutput:\n\n[propertyfile] Updating property file: /webapp/neo-gate/buildversion.properties\n[propertyfile] java.lang.NullPointerException\n[propertyfile] \tat java.text.DecimalFormat.parse(DecimalFormat.java:797)\n[propertyfile] \tat java.text.NumberFormat.parse(NumberFormat.java:282)\n[propertyfile] \tat \norg.apache.tools.ant.taskdefs.optional.PropertyFile$Entry.executeInteger\n(PropertyFile.java:441)\n[propertyfile] \tat \norg.apache.tools.ant.taskdefs.optional.PropertyFile$Entry.executeOn\n(PropertyFile.java:344)\n[propertyfile] \tat \norg.apache.tools.ant.taskdefs.optional.PropertyFile.executeOperation\n(PropertyFile.java:198)\n[propertyfile] \tat org.apache.tools.ant.taskdefs.optional.PropertyFile.execute\n(PropertyFile.java:185)\n[propertyfile] \tat org.apache.tools.ant.Task.perform(Task.java:313)\n[propertyfile] \tat org.apache.tools.ant.Target.execute(Target.java:309)\n[propertyfile] \tat org.apache.tools.ant.Target.performTasks(Target.java:334)\n[propertyfile] \tat org.apache.tools.ant.Project.executeTarget(Project.java:1216)\n[propertyfile] \tat org.apache.tools.ant.Project.executeTargets\n(Project.java:1160)\n[propertyfile] \tat org.apache.tools.ant.Main.runBuild(Main.java:605)\n[propertyfile] \tat org.apache.tools.ant.Main.start(Main.java:195)\n[propertyfile] \tat org.apache.tools.ant.Main.main(Main.java:234)\n     [echo] Buildlabel is 20020503AM_\n     [echo] Builddate is 20020503AM\n     [echo] Buildnum is", "count": 0, "id": 15436, "time": "2002-05-03T16:39:27Z", "creator": "nolan.ring@sun.com", "creation_time": "2002-05-03T16:39:27Z", "is_private": false}, {"count": 1, "attachment_id": 1823, "creator": "roxspring@yahoo.com", "is_private": false, "id": 15802, "time": "2002-05-09T14:15:43Z", "bug_id": 8780, "creation_time": "2002-05-09T14:15:43Z", "tags": [], "text": "Created attachment 1823\nStops the NullPointerException but..."}, {"count": 2, "attachment_id": null, "creator": "holtdl@yahoo.com", "text": "Yes, that's essentially what I did as well, but also had reservations about it\n(see http://marc.theaimsgroup.com/?l=ant-user&m=102047004412575&w=2). It fixes \nthe problem, but does it really fix the bug -- ie., should value ever be null \nat that point, or is the bug that it's not getting set where it \"should be\"?\n", "id": 15803, "time": "2002-05-09T14:28:13Z", "bug_id": 8780, "creation_time": "2002-05-09T14:28:13Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 8780, "attachment_id": null, "is_private": false, "id": 15805, "time": "2002-05-09T14:42:57Z", "creator": "roxspring@yahoo.com", "creation_time": "2002-05-09T14:42:57Z", "text": "Hadn't seen the ant-dev discusssion - just bumped into the problem myself and \nstarted investigating.\n\nIt does seem silly to be testing for value==null when there is already one at \nline 359. I suspect that everything would be rosey by just moving that block up \nto 340 or so but went for a minimum impact fix as I haven't the time to test \nfor knock on effects right now.\n\nRob\n\n(the but... thing was just because I thought it was broken elsewhere but I was \nseeing things)"}, {"count": 4, "tags": [], "bug_id": 8780, "is_private": false, "text": "Committed a fix for this bug.", "id": 16836, "time": "2002-05-28T20:45:13Z", "creator": "jakarta@ehatchersolutions.com", "creation_time": "2002-05-28T20:45:13Z", "attachment_id": null}]