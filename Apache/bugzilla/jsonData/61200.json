[{"count": 0, "tags": [], "creator": "santhanapreethi28@gmail.com", "text": "Created attachment 35061\nEncoded space test case\n\nAfter update to tomcat 8.0.44, there are some behaviour differences in URL Rewrite. \n\nURL encoded space (+) gets re-encoded as %2B after rewrite and param value gets modified to + instead of space.\n\nFrom the changelog, seems like below change related to encoding seems to be the cause. \n\n\"Review those places where Tomcat re-encodes a URI or URI component and ensure that that correct encoding (path differs from query string) is applied and that the encoding is applied consistently.\"\n\nAttached test case which passes in 8.0.43 but fails in 8.0.44", "id": 199274, "time": "2017-06-19T10:11:23Z", "bug_id": 61200, "creation_time": "2017-06-19T10:11:23Z", "is_private": false, "attachment_id": 35061}, {"count": 1, "attachment_id": null, "bug_id": 61200, "is_private": false, "id": 199278, "time": "2017-06-19T16:38:05Z", "creator": "markt@apache.org", "creation_time": "2017-06-19T16:38:05Z", "tags": [], "text": "Thanks for the test case. It makes it much, much easier to work with a bug report that includes a test case.\n\nThis particular report is invalid.\n\nThe test set-up does this:\nString url = \"/a/\" + URLEncoder.encode(\"Test Query\", \"UTF-8\");\n\nThis results in a value for url of \"/a/Test+query\". And there lies the problem. It is only valid to encode a ' ' with '+' in a query string so in this test case the '+' gets treated as a literal '+' and is correctly encoded to %2B.\n\nIf the test is modified so url is correctly encoded:\nString url = \"/a/Test%20Query\";\n\nthe test passes as expected."}, {"count": 2, "tags": [], "bug_id": 61200, "attachment_id": null, "id": 199286, "time": "2017-06-20T04:44:35Z", "creator": "santhanapreethi28@gmail.com", "creation_time": "2017-06-20T04:44:35Z", "is_private": false, "text": "(In reply to Mark Thomas from comment #1)\n> Thanks for the test case. It makes it much, much easier to work with a bug\n> report that includes a test case.\n> \n> This particular report is invalid.\n> \n> The test set-up does this:\n> String url = \"/a/\" + URLEncoder.encode(\"Test Query\", \"UTF-8\");\n> \n> This results in a value for url of \"/a/Test+query\". And there lies the\n> problem. It is only valid to encode a ' ' with '+' in a query string so in\n> this test case the '+' gets treated as a literal '+' and is correctly\n> encoded to %2B.\n> \n> If the test is modified so url is correctly encoded:\n> String url = \"/a/Test%20Query\";\n> \n> the test passes as expected.\n\nThanks for the clarification."}]