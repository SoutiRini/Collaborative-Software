[{"count": 0, "tags": [], "bug_id": 325, "is_private": false, "id": 302, "creation_time": "2000-12-13T14:53:50Z", "time": "2000-12-13T14:53:50Z", "creator": "dev@tomcat.apache.org", "text": "I am using a third party software package by a company \r\ncalled Tom Sawyer. It is a topology engine, and can be used\r\nin a servlet environment. It works in the following way. You\r\ncreate a graph that represents a network, which is composed\r\nof nodes (such as servers and storage devices) and edges\r\n(connections between the nodes). You can then apply different\r\nlayouts to the graph, such as circular or hierarchical. \r\n\r\nI installed and configured jakarta-tomcat-3.2, as well\r\nas the Tom Sawyer software on my system, and it works\r\ncorrectly. However, when I try it with jakarta-tomcat-4.0-m4,\r\nI get get several errors, as shown below in the output\r\nfrom catalina.out, localhost_log.2000-12-12.txt, and \r\nfrom the Tom Sawyer program as well, which is called\r\nTomahawk. I made sure that environment for both the 3.2\r\nand 4.0 was set up correctly, as shown under Additional\r\nEnvironment Description. The reason we want to use 4.0 is \r\nbecause it has struts, while 3.2 does not. If you have any \r\nideas on how to solve this problem, or when 4.1 might be\r\navailable, please let me know. Thanks Eric Jamison\r\n\r\neirc.jamison@sun.com\r\n\r\noutput from catalina.out:\r\n--------------------------\r\n\r\nwiseguy 331 =>!328\r\ncat catalina.out\r\nApache Tomcat/4.0-dev\r\njava.lang.NullPointerException\r\n        at java.io.ObjectInputStream.read(ObjectInputStream.java, Compiled Code)\r\n        at java.io.DataInputStream.readShort(DataInputStream.java, Compiled \r\nCode)\r\n        at java.io.ObjectInputStream.readShort(ObjectInputStream.java, Compiled \r\nCode)\r\n        at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java, \r\nCompiled Code)\r\n        at java.io.ObjectInputStream.<init>(ObjectInputStream.java, Compiled \r\nCode)\r\n        at tomsawyer.layout.TSServletHelper.fetchGraphData(Unknown Source)\r\n        at tomsawyer.layout.TSServletHelper.run(Unknown Source)\r\n        at tomsawyer.layout.TSServletLayoutServer.doPost(Unknown Source)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at \r\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java\r\n, Compiled Code)\r\n        at \r\norg.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.jav\r\na, Compiled Code)\r\n        at \r\norg.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java, Compiled \r\nCode)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at \r\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.\r\njava, Compiled Code)\r\n        at \r\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.StandardContext.invoke(StandardContext.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.valves.ValveBase.invokeNext(ValveBase.java, \r\nCompiled Code)\r\n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java, \r\nCompiled Code)\r\n        at java.lang.Thread.run(Thread.java, Compiled Code)\r\n\r\n\r\noutput from localhost_access_log.2000-12-12.txt:\r\n------------------------------------------------\r\n\r\nwiseguy 333 =>!325\r\ncat localhost_access_log.2000-12-12.txt\r\nwiseguy - - [12/Dec/2000:12:21:41 -0800] \"POST /getj/servlet/LayoutServer \r\nHTTP/1.0\" 200 -\r\n\r\noutput from localhost_log.2000-12-12.txt:\r\n-----------------------------------------\r\n\r\nwiseguy 337 =>cat localhost_log.2000-12-12.txt\r\n2000-12-12 12:20:08 StandardHost[localhost]: Deploying web application at \r\ncontext path  from URL file:/files/jakarta-tomcat-4.0-m4/webapps/ROOT\r\n2000-12-12 12:20:11 StandardWrapper[:default]: Loading container servlet default\r\n2000-12-12 12:20:11 default: init\r\n2000-12-12 12:20:11 StandardWrapper[:invoker]: Loading container servlet invoker\r\n2000-12-12 12:20:11 invoker: init\r\n2000-12-12 12:20:11 jsp: init\r\n2000-12-12 12:20:15 StandardHost[localhost]: Deploying web application at \r\ncontext path /manager from URL file:/files/jakarta-tomcat-4.0-m4/webapps/manager\r\n2000-12-12 12:20:15 ContextConfig[/manager]: Configured an authenticator for \r\nmethod BASIC\r\n2000-12-12 12:20:15 StandardWrapper[/manager:default]: Loading container servlet \r\ndefault\r\n2000-12-12 12:20:15 default: init\r\n2000-12-12 12:20:15 StandardWrapper[/manager:invoker]: Loading container servlet \r\ninvoker\r\n2000-12-12 12:20:15 invoker: init\r\n2000-12-12 12:20:15 jsp: init\r\n2000-12-12 12:20:15 StandardHost[localhost]: Deploying web application at \r\ncontext path /webdav from URL file:/files/jakarta-tomcat-4.0-m4/webapps/webdav\r\n2000-12-12 12:20:15 StandardWrapper[/webdav:default]: Loading container servlet \r\ndefault\r\n2000-12-12 12:20:15 default: init\r\n2000-12-12 12:20:15 StandardWrapper[/webdav:invoker]: Loading container servlet \r\ninvoker\r\n2000-12-12 12:20:15 invoker: init\r\n2000-12-12 12:20:15 jsp: init\r\n2000-12-12 12:20:15 StandardHost[localhost]: Deploying web application at \r\ncontext path /getj from URL file:/files/jakarta-tomcat-4.0-m4/webapps/getj\r\n2000-12-12 12:20:16 StandardWrapper[/getj:default]: Loading container servlet \r\ndefault\r\n2000-12-12 12:20:16 default: init\r\n2000-12-12 12:20:16 StandardWrapper[/getj:invoker]: Loading container servlet \r\ninvoker\r\n2000-12-12 12:20:16 invoker: init\r\n2000-12-12 12:20:16 jsp: init\r\n2000-12-12 12:21:41 LayoutServer: init\r\n2000-12-12 12:21:41 ApplicationDispatcher[/getj] Servlet.service() for servlet \r\nLayoutServer threw exception\r\njava.io.IOException\r\n        at tomsawyer.layout.TSServletHelper.fetchGraphData(Unknown Source)\r\n        at tomsawyer.layout.TSServletHelper.run(Unknown Source)\r\n        at tomsawyer.layout.TSServletLayoutServer.doPost(Unknown Source)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at \r\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java\r\n, Compiled Code)\r\n        at \r\norg.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.jav\r\na, Compiled Code)\r\n        at \r\norg.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java, Compiled \r\nCode)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at \r\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.\r\njava, Compiled Code)\r\n        at \r\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.StandardContext.invoke(StandardContext.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.valves.ValveBase.invokeNext(ValveBase.java, \r\nCompiled Code)\r\n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java, \r\nCompiled Code)\r\n        at java.lang.Thread.run(Thread.java, Compiled Code)\r\n\r\n2000-12-12 12:21:41 StandardWrapperValve[invoker]: Servlet.service() for servlet \r\ninvoker threw exception\r\njava.io.IOException\r\n        at tomsawyer.layout.TSServletHelper.fetchGraphData(Unknown Source)\r\n        at tomsawyer.layout.TSServletHelper.run(Unknown Source)\r\n        at tomsawyer.layout.TSServletLayoutServer.doPost(Unknown Source)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at \r\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java\r\n, Compiled Code)\r\n        at \r\norg.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.jav\r\na, Compiled Code)\r\n        at \r\norg.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java, Compiled \r\nCode)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java, Compiled \r\nCode)\r\n        at \r\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.\r\njava, Compiled Code)\r\n        at \r\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.StandardContext.invoke(StandardContext.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.valves.ValveBase.invokeNext(ValveBase.java, \r\nCompiled Code)\r\n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java, \r\nCompiled Code)\r\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java, \r\nCompiled Code)\r\n        at \r\norg.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java, \r\nCompiled Code)\r\n        at java.lang.Thread.run(Thread.java, Compiled Code)\r\n\r\nstack trace from Tomahawk:\r\n--------------------------\r\n\r\nwiseguy 137 =>java Tomahawk layout.server.type=servlet\r\njava.io.StreamCorruptedException: Caught EOFException while reading the stream \r\nheader\r\n        at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java, \r\nCompiled Code)\r\n        at java.io.ObjectInputStream.<init>(ObjectInputStream.java, Compiled \r\nCode)\r\n        at tomsawyer.layout.TSServletLayoutProxy.layout(Unknown Source)\r\n        at command.ExLayoutCommand.doAction(ExLayoutCommand.java, Compiled Code)\r\n        at tomsawyer.util.command.TSCommand.execute(Unknown Source)\r\n        at tomsawyer.editor.TSEGraphWindow.listen(Unknown Source)\r\n        at tomsawyer.editor.TSEGraphWindow.transmit(Unknown Source)\r\n        at Tomahawk.onApplyLayout(Tomahawk.java, Compiled Code)\r\n        at Tomahawk.actionPerformed(Tomahawk.java, Compiled Code)\r\n        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java, \r\nCompiled Code)\r\n        at \r\njavax.swing.AbstractButton$ForwardActionEvents.actionPerformed(AbstractButton.ja\r\nva, Compiled Code)\r\n        at \r\njavax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java, \r\nCompiled Code)\r\n        at \r\njavax.swing.JToggleButton$ToggleButtonModel.setPressed(JToggleButton.java, \r\nCompiled Code)\r\n        at javax.swing.AbstractButton.doClick(AbstractButton.java, Compiled \r\nCode)\r\n        at \r\njavax.swing.plaf.basic.BasicMenuItemUI$MouseInputHandler.mouseReleased(BasicMenu\r\nItemUI.java, Compiled Code)\r\n        at java.awt.Component.processMouseEvent(Component.java, Compiled Code)\r\n        at java.awt.Component.processEvent(Component.java, Compiled Code)\r\n        at java.awt.Container.processEvent(Container.java, Compiled Code)\r\n        at java.awt.Component.dispatchEventImpl(Component.java, Compiled Code)\r\n        at java.awt.Container.dispatchEventImpl(Container.java, Compiled Code)\r\n        at java.awt.Component.dispatchEvent(Component.java, Compiled Code)\r\n        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java, \r\nCompiled Code)\r\n        at java.awt.LightweightDispatcher.processMouseEvent(Container.java, \r\nCompiled Code)\r\n        at java.awt.LightweightDispatcher.dispatchEvent(Container.java, Compiled \r\nCode)\r\n        at java.awt.Container.dispatchEventImpl(Container.java, Compiled Code)\r\n        at java.awt.Component.dispatchEvent(Component.java, Compiled Code)\r\n        at java.awt.EventQueue.dispatchEvent(EventQueue.java, Compiled Code)\r\n        at \r\njava.awt.EventDispatchThread.pumpOneEventForComponent(EventDispatchThread.java, \r\nCompiled Code)\r\n        at \r\njava.awt.EventDispatchThread.pumpEventsForComponent(EventDispatchThread.java, \r\nCompiled Code)\r\n        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java, \r\nCompiled Code)\r\n        at java.awt.EventDispatchThread.run(EventDispatchThread.java, Compiled \r\nCode)\r\n", "attachment_id": null}, {"text": "Exception is occurring in user code (method fetchGraphData() of class\n\"tomsawyer.layout.TSServletHelper\"), not in Tomcat.  Impossible to debug any\nfurther without a reproducible test case.\n", "tags": [], "bug_id": 325, "attachment_id": null, "count": 1, "id": 3587, "time": "2001-07-10T16:34:44Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-07-10T16:34:44Z", "is_private": false}]