[{"count": 0, "tags": [], "bug_id": 26554, "attachment_id": null, "id": 51486, "creation_time": "2004-01-30T16:41:33Z", "time": "2004-01-30T16:41:33Z", "creator": "peterw@tux.org", "text": "I need to benchmark a site that sends different versions of content depending on\nthe User-Agent presented by the HTTP client. In order to benchmark the site's\nperformance for the different \"browser variations\", I need the ability to send\nbenchmark requests with different User-Agent request header values. I have put\ntogether a patch for ab.c that adds a \"-U\" command line argument for overrriding\nthe default value. Also my patch modifies the \"-h\" behavior so that it not only\nexplains the -U option, but shows the default User-Agent that is compiled into\nab, e.g. \n    -U attribute    User-Agent value to send instead of \"ApacheBench/2.0.40-dev\"\n\nI hope this patch (to be attached after this ticket is created) will be\nconsidered for inclusion into the project.\n\nThank you.", "is_private": false}, {"count": 1, "tags": [], "bug_id": 26554, "attachment_id": 10162, "id": 51487, "time": "2004-01-30T16:42:51Z", "creator": "peterw@tux.org", "creation_time": "2004-01-30T16:42:51Z", "is_private": false, "text": "Created attachment 10162\npatch for support/ab.c to provide requested capability"}, {"count": 2, "tags": [], "bug_id": 26554, "attachment_id": null, "id": 51581, "time": "2004-02-02T13:30:14Z", "creator": "trawick@apache.org", "creation_time": "2004-02-02T13:30:14Z", "is_private": false, "text": "An alternate design: Don't build default User-Agent header field if User-Agent\nwas specified via the existing command-line option -H.\n"}, {"count": 3, "tags": [], "creator": "peterw@tux.org", "attachment_id": 10188, "text": "Created attachment 10188\nJeff Trawick's alternate logic (use -H)", "id": 51608, "time": "2004-02-02T18:26:42Z", "bug_id": 26554, "creation_time": "2004-02-02T18:26:42Z", "is_private": false}, {"count": 4, "tags": [], "creator": "peterw@tux.org", "attachment_id": null, "id": 51610, "time": "2004-02-02T18:38:31Z", "bug_id": 26554, "creation_time": "2004-02-02T18:38:31Z", "is_private": false, "text": "Jeff, that certainly works (a quick read of RFC 1945 suggests that the\nUser-Agent header can come later in the request message, so moving the\nUser-Agent to after the Accept request header appears to be RFC-compliant), and\nI've attached another patch implementing this. \n\nI think I prefer the -U plan though, as\n * it's less fragile (strstr() is case-sensitive & the more users type, the\ngreater chance of error) \n * this general idea, whether implemented as -U or special handling of -H,\nrequires the -h usage() information to be updated, and requires about the same\namount of code changes (so there's not much \"economy\" argument against -U)\n * [weak argument] adding -U is backwards-compatible (doesn't alter the order of\nheaders or change the behavior of -H in any situations)\n\nBut I'd be happy either way, as either approach gives users more flexibility.\n\nThanks.\n"}, {"count": 5, "tags": [], "creator": "trawick@apache.org", "text": "comments/opinions from other developers would of course be appreciated ;)\n", "id": 51656, "attachment_id": null, "bug_id": 26554, "creation_time": "2004-02-03T13:22:46Z", "time": "2004-02-03T13:22:46Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 26554, "text": "I believe that my revised patch for \nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=31268\nincorporates the fix this bug as well.", "count": 6, "id": 99843, "time": "2007-02-27T04:18:49Z", "creator": "arvind.srinivasan@sun.com", "creation_time": "2007-02-27T04:18:49Z", "is_private": false}, {"count": 7, "tags": [], "text": "Fixed in r526872. I went with Arvind's patch as a general fix for -H command-line switch behaviour. \nSpecify -H \"User-Agent: foobar/1.0\" to ab to override the default User-Agent setting. ", "attachment_id": null, "id": 101538, "creation_time": "2007-04-09T11:55:18Z", "time": "2007-04-09T11:55:18Z", "creator": "sander@temme.net", "bug_id": 26554, "is_private": false}, {"count": 8, "tags": [], "bug_id": 26554, "attachment_id": null, "id": 117055, "time": "2008-05-27T15:13:28Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-27T15:13:28Z", "is_private": false, "text": "Backported to 2.2.x as r660576 (http://svn.apache.org/viewvc?rev=660576&view=rev)."}]