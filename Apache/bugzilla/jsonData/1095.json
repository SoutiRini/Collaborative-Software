[{"count": 0, "tags": [], "text": "Dozens of people are/have struggled with this problem in the last few weeks...\n\nXerces J 1.3.1 has the following problems when run with SOAP 2.1 (Xerces 1.2.3 \ndoes not exhibit these problems).  Xerces/SOAP client reports the following\n\nSOAPException=SOAP-ENV:Client, A\n''http://schemas.xmlsoap.org/soap/envelope/:Fault\" element must contain a\n: \"faultcode\" element.\n\nThe SOAP Request:\n\nPOST /soap/servlet/rpcrouter HTTP/1.0\nHost: localhost:8070\nContent-Type: text/xml; charset=utf-8\nContent-Length: 501\nSOAPAction: \"\"\n\n<?xml version='1.0' encoding='UTF-8'?>\n<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" \nxmlns:xsi=\"http://www.w3.org/1999/XMLSchema-instance\" \nxmlns:xsd=\"http://www.w3.org/1999/XMLSchema\">\n<SOAP-ENV:Body>\n<ns1:getRate xmlns:ns1=\"urn:demo1:exchange\" \nSOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\">\n<country1 xsi:type=\"xsd:string\">USA</country1>\n<country2 xsi:type=\"xsd:string\">japan</country2>\n</ns1:getRate>\n</SOAP-ENV:Body>\n</SOAP-ENV:Envelope>\n\nThe SOAP Repsonse:\n\nHTTP/1.0 400 Bad Request\nContent-Type: text/xml; charset=utf-8\nContent-Length: 472\nSet-Cookie2: JSESSIONID=2np2a3c101;Version=1;Discard;Path=\"/soap\"\nSet-Cookie: JSESSIONID=2np2a3c101;Path=/soap Servlet-Engine: Tomcat Web \nServer/3.2.1 (JSP 1.1; Servlet 2.2; Java 1.3.0_02; Windows NT 4.0 x86; \njava.vendor=Sun Microsystems Inc.)\n\n<?xml version='1.0' encoding='UTF-8'?>\n<SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" \nxmlns:xsi=\"http://www.w3.org/1999/XMLSchema-instance\" \nxmlns:xsd=\"http://www.w3.org/1999/XMLSchema\">\n<SOAP-ENV:Body>\n<SOAP-ENV:Fault>\n<faultcode>SOAP-ENV:Client</faultcode>\n<faultstring>Unable to resolve namespace URI for 'xsd'.</faultstring>\n<faultactor>/soap/servlet/rpcrouter</faultactor>\n</SOAP-ENV:Fault>\n</SOAP-ENV:Body>\n</SOAP-ENV:Envelope>\n\nTwo questions...\n\n1. Why can't xerces resolve the xsd namespace URI.\n2. Why can't xerces parse the response's faultcode.\n\nRunning\n\nJ2SDK 1.3.0.02\nTomcat 3.2.1\nSoap 2.1\nXerces 1.3.1\nJaf 1.0.1\nJavamail 1.2", "is_private": false, "id": 1573, "creation_time": "2001-03-23T07:31:30Z", "time": "2001-03-23T07:31:30Z", "creator": "paduffy@cisco.com", "bug_id": 1095, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 1095, "attachment_id": null, "text": "Xerces-J 1.3.0 and 1.3.1 support a subset of the W3C XML Schema Language as \nspecified in the 24 October 2000 Candidate Recommendations for Structures [1] \nand Datatypes [2].  The schema vocabulary specified by [1] is identified by [3] \nand the namespace URI is [4]; that's what Xerces-J 1.3.0 and 1.3.1 support.\n\nThe URI's shown in the SOAP request and response were those supported by \nXerces-J 1.2.3, and that's why it works with these documents but Xerces-J 1.3.0 \nand 1.3.1 do not.\n\nThe XML Schema for SOAP might need to be brought up-to-date; I haven't looked \ninto it.\n\nI hope that helps.\n\n[1] http://www.w3.org/TR/2000/CR-xmlschema-1-20001024/\n[2] http://www.w3.org/TR/2000/CR-xmlschema-2-20001024/\n[3] http://www.w3.org/2000/10/XMLSchema\n[4] http://www.w3.org/2000/10/XMLSchema-instance", "id": 1581, "time": "2001-03-23T14:07:02Z", "creator": "zongaro@ca.ibm.com", "creation_time": "2001-03-23T14:07:02Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 1095, "attachment_id": null, "id": 1582, "time": "2001-03-23T14:40:24Z", "creator": "neilg@ca.ibm.com", "creation_time": "2001-03-23T14:40:24Z", "is_private": false, "text": "Xerces 1.3.0 and 1.3.1 no longer support the Working Draft version of W3C \nSchemas; they support W3C schema candidate recommendation."}, {"count": 3, "tags": [], "bug_id": 1095, "is_private": false, "text": "I don't think the particular problem reported is due to schema support issues.\n\nThe first problem \"Why can't xerces resolve the xsd namespace URI.\" is due to \nbug 1028 (or 1131 which is the same), which has been fixed in post-1.3.1 cvs.  \n\nThe second problem \"Why can't xerces parse the response's faultcode\" is due to \nbug 1164.  Before that bug is fixed you can modify soap 2.1 to cope with it.  \nIn org.apache.soap.Fault class unmarshall() method, change the two lines\n\n\t\t\t\tif (namespaceURI == null \n\t\t\t\t\t\t|| namespaceURI.equals\n(Constants.NS_URI_SOAP_ENV))\n\nto \n\n\t\t\t\tif (namespaceURI == null || namespaceURI.length\n() == 0\n\t\t\t\t\t\t|| namespaceURI.equals\n(Constants.NS_URI_SOAP_ENV))\n\nAfter I applied these two fixes I was able to run the addressbook and \ncalculator examples.", "id": 1704, "time": "2001-04-03T07:49:02Z", "creator": "czhao@commonvision.com", "creation_time": "2001-04-03T07:49:02Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 1095, "attachment_id": null, "id": 3716, "time": "2001-07-13T08:50:32Z", "creator": "czhao@commonvision.com", "creation_time": "2001-07-13T08:50:32Z", "is_private": false, "text": "*** Bug 1594 has been marked as a duplicate of this bug. ***"}]