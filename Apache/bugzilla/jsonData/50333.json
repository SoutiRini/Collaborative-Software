[{"count": 0, "tags": [], "text": "Created attachment 26340\npatch\n\nIllegalArgumentException occurs when setting maxActive to smaller than 1.\n\n-----\njava.lang.IllegalArgumentException\n        at java.util.concurrent.ArrayBlockingQueue.<init>(ArrayBlockingQueue.java:164)\n        at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:365)\n        at org.apache.tomcat.jdbc.pool.ConnectionPool.<init>(ConnectionPool.java:130)\n        at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:93)\n        at org.apache.tomcat.jdbc.pool.DataSourceFactory.createDataSource(DataSourceFactory.java:490)\n        at org.apache.tomcat.jdbc.pool.DataSourceFactory.getObjectInstance(DataSourceFactory.java:219)\n        at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:142)\n        at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)\n        at org.apache.naming.NamingContext.lookup(NamingContext.java:826)\n        at org.apache.naming.NamingContext.lookup(NamingContext.java:145)\n        at org.apache.naming.NamingContext.lookup(NamingContext.java:814)\n        at org.apache.naming.NamingContext.lookup(NamingContext.java:159)\n        at org.apache.catalina.core.NamingContextListener.addResource(NamingContextListener.java:1020)\n        at org.apache.catalina.core.NamingContextListener.createNamingContext(NamingContextListener.java:631)\n        at org.apache.catalina.core.NamingContextListener.lifecycleEvent(NamingContextListener.java:237)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:668)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:596)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431)\n---\n\nIn DBCP, if the negative value is set to maxActive, the pool size is unlimited.\nHowever, because ArrayBlockingQueue is used in JDBC-Pool, values that are smaller than 1 cannot be set to maxActive.  \n\nIn my patch, if maxActive is smaller than 1, default value (100) is set to maxActive. \n\nRegards.", "attachment_id": 26340, "id": 141990, "creator": "mashmk02@gmail.com", "time": "2010-11-25T00:22:29Z", "bug_id": 50333, "creation_time": "2010-11-25T00:22:29Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 50333, "text": "svn r 1057268", "count": 1, "id": 143235, "time": "2011-01-10T11:41:53Z", "creator": "fhanik@apache.org", "creation_time": "2011-01-10T11:41:53Z", "is_private": false}]