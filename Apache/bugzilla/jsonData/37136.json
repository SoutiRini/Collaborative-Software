[{"count": 0, "attachment_id": null, "creator": "apache_fop@hotmail.com", "is_private": false, "id": 81292, "time": "2005-10-18T09:23:33Z", "bug_id": 37136, "creation_time": "2005-10-18T09:23:33Z", "tags": [], "text": "==========================================================================\nSample1: The image will not be sized to the specified dimensions\n==========================================================================\n\n<fo:block-container position=\"absolute\" left=\"66.00mm\" top=\"72.00mm\" \nwidth=\"100.00mm\" height=\"75.00mm\">\n  <fo:block>\n    <fo:external-graphic src=\"file:your_image.jpg\" width=\"100.00mm\" \nheight=\"75.00mm\"/>\n  </fo:block>\n</fo:block-container>\n\n==========================================================================\nSample2: The rendered PDF file fails to load, and fop reports exceptions\n\njava.lang.RuntimeException: Some content could not fit into a line/page after \n50 attempts. Giving up to avoid an endless loop.\nException\njavax.xml.transform.TransformerException: java.lang.RuntimeException: Some \ncontent could not fit into a line/page after 50 attempts. Giving up to avoid an \nendless loop.\n\n==========================================================================\n\n<fo:block height=\"75.00mm\">\n  <fo:external-graphic src=\"file:your_image.jpg\" width=\"100.00mm\"/>\n</fo:block>"}, {"count": 1, "tags": [], "bug_id": 37136, "attachment_id": null, "text": "Have you tried to use the content-height=\"scale-to-fit\" and content-\nwidth=\"scale-to-fit\" on the fo:external-graphic?\n\nFOP 1.0dev is attempting to be much more strict in applying the spec and will \nonly scale if told to do so.", "id": 81293, "time": "2005-10-18T09:35:07Z", "creator": "manuel@apache.org", "creation_time": "2005-10-18T09:35:07Z", "is_private": false}, {"count": 2, "attachment_id": null, "creator": "jeremias@apache.org", "text": "(In reply to comment #0)\n> ==========================================================================\n> Sample1: The image will not be sized to the specified dimensions\n> ==========================================================================\n> \n> <fo:block-container position=\"absolute\" left=\"66.00mm\" top=\"72.00mm\" \n> width=\"100.00mm\" height=\"75.00mm\">\n>   <fo:block>\n>     <fo:external-graphic src=\"file:your_image.jpg\" width=\"100.00mm\" \n> height=\"75.00mm\"/>\n>   </fo:block>\n> </fo:block-container>\n\nThis is something we've had a number of times now. The new FOP is much more\nstrict about the interpretation of the XSL specification and has much less wrong\nbehaviour than FOP 0.20.5. Under 0.20.5 the above probably did what you expected\nit to do but it was a faulty interpretation of the specification. width and\nheight only specify the size of the box for the image, not the size of the\nimage. If you want to scale the image so that it fits into the prepared box you\nwill now have to add content-width=\"scale-to-fit\". Otherwise, the image will be\npainted in its intrinsic size. It is no bug in FOP.\n\n> ==========================================================================\n> Sample2: The rendered PDF file fails to load, and fop reports exceptions\n> \n> java.lang.RuntimeException: Some content could not fit into a line/page after \n> 50 attempts. Giving up to avoid an endless loop.\n> Exception\n> javax.xml.transform.TransformerException: java.lang.RuntimeException: Some \n> content could not fit into a line/page after 50 attempts. Giving up to avoid an \n> endless loop.\n> \n> ==========================================================================\n> \n> <fo:block height=\"75.00mm\">\n>   <fo:external-graphic src=\"file:your_image.jpg\" width=\"100.00mm\"/>\n> </fo:block>\n\nYou get the above error message if an element on a page (in your case the image)\ndoesn't fit onto a page. The layout engine is then trying to put the element on\nthe next page and if it still doesn't fit on the next and so on. After 50\nattempts it gives up and reports this. You will have to make sure that FOP is\nable to fit the image into a page. Without a complete example to run it myself\nit's difficult for me to tell you exactly what needs to be done. Try making the\nimage smaller to begin with.\n\nBTW, the height property does not apply to the fo:block element. Your height\nthere will be ignored! Better specify the height on the external-graphic and use\ncontent-width=\"scale-to-fit\" as shown above.\n\nIf you don't manage with this information please reopen the bug and attach a\ncomplete example file.", "id": 81294, "time": "2005-10-18T09:38:34Z", "bug_id": 37136, "creation_time": "2005-10-18T09:38:34Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "creator": "mhilpert@gmx.de", "text": "Even though I added this content-width=\"scale-to-fit\" to our external-grpahic:\n\n      <fo:block padding-bottom=\"5mm\">\n         <fo:external-graphic content-width=\"scale-to-fit\" \nheight=\"{$LogoHeightValue}\" src=\"{$Logo}\"/>\n      </fo:block>\n\nthe error still occurs (FOP 1.0dev from 01.11.2005):\n\njavax.xml.transform.TransformerException: java.lang.RuntimeException: Some \ncontent could not fit into a line/page after 50 attempts. Giving up to avoid an \nendless loop.\n\n\nAnyway: what does \"50 attempts\" mean? Running my example 50 times also doesn't \nhelp anyfurther ... ;-)", "id": 82041, "time": "2005-11-02T14:30:57Z", "bug_id": 37136, "creation_time": "2005-11-02T14:30:57Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 37136, "attachment_id": null, "text": "I noticed that we also have svg images imported and that code is causing this \n(same) error message:\n\n\n    <fo:instream-foreign-object >\n        <svg:svg width=\"120mm\" height=\"130mm\" \nxmlns:xlink=\"http://www.w3.org/2000/svg\">\n            <svg:image width=\"120mm\" height=\"130mm\" \nxlink:href=\"{$chart_C_AssetSectorStructure2_H}\"/>\n        </svg:svg>\n        </fo:instream-foreign-object>\n\n\nleads to:\n\njavax.xml.transform.TransformerException: java.lang.RuntimeException: Some \ncontent could not fit into a line/page after 50 attempts. Giving up to avoid an \nendless loop.\n\nI checked it when I removed just this section of code, the message disappeard \n(and also the SVG ;-). Repasting it back reproduces the error message. \nUnfortunately,   content-width=\"scale-to-fit\"    doesn't work with <svg:svg> \nand <svg:image>.\n", "id": 82044, "time": "2005-11-02T14:45:53Z", "creator": "mhilpert@gmx.de", "creation_time": "2005-11-02T14:45:53Z", "is_private": false}, {"count": 5, "attachment_id": null, "creator": "manuel@apache.org", "is_private": false, "id": 82045, "time": "2005-11-02T14:58:45Z", "bug_id": 37136, "creation_time": "2005-11-02T14:58:45Z", "tags": [], "text": "<fo:external-graphic content-width=\"scale-to-fit\" \nheight=\"{$LogoHeightValue}\" src=\"{$Logo}\"/>\n\nThis will scale such that the logo fits into the width provided by the \nenclosing element. The error is more likely to be caused by the height not \nfitting into the area available. Have you tried using 'content-height=\"scale-to-\nfit\"'? If that fixes your problem please close the bug. If not please attach a \nsmall sample fo and image which exhibits the problem."}, {"count": 6, "tags": [], "bug_id": 37136, "attachment_id": null, "text": "Please see response #4 for the SVG example.", "id": 82047, "time": "2005-11-02T15:11:12Z", "creator": "mhilpert@gmx.de", "creation_time": "2005-11-02T15:11:12Z", "is_private": false}, {"count": 7, "attachment_id": null, "creator": "manuel@apache.org", "text": "Comment #4 is not a working example showing the problem. It is just a snippet \nfrom your XML file. For us to investigate this we need the XSL-FO file (as \nsmall as possible just enough to show the problem) together with any related \nfiles (svg, jpeg, ...)", "id": 82049, "time": "2005-11-02T15:15:42Z", "bug_id": 37136, "creation_time": "2005-11-02T15:15:42Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "creator": "manuel@apache.org", "attachment_id": null, "text": "Forgot to add:\nIf you don't know how to just generate the XSL-FO file from the XML see here: \nhttp://xmlgraphics.apache.org/fop/trunk/running.html#check-input\n", "id": 82050, "time": "2005-11-02T15:18:55Z", "bug_id": 37136, "creation_time": "2005-11-02T15:18:55Z", "is_private": false}, {"count": 9, "attachment_id": null, "creator": "adelmelle@apache.org", "text": "In reply to comment #4:\n\nSee recent post on fop-users: specify content-height and content-width on the fo:instream-foreign-\nobject, not on the svg element.", "id": 82064, "time": "2005-11-02T19:40:49Z", "bug_id": 37136, "creation_time": "2005-11-02T19:40:49Z", "tags": [], "is_private": false}, {"count": 10, "tags": [], "bug_id": 37136, "attachment_id": 17794, "id": 86192, "time": "2006-02-24T14:49:34Z", "creator": "ninouffff@yahoo.fr", "creation_time": "2006-02-24T14:49:34Z", "is_private": false, "text": "Created attachment 17794\nshows size problems with bmp and rendering differences with the same svg"}, {"count": 11, "tags": [], "creator": "surikoya@yahoo.com", "attachment_id": null, "text": "Specifying the content-width and content-height in a FO document does not render\nthe image with the proper dimensions:\n<fo:external-graphic content-height=\"82px\" content-width=\"294px\"\n                 src=\"http://onjava.com/images/onjava/onjava_logo.jpg\"/>\n", "id": 89463, "time": "2006-05-25T03:56:50Z", "bug_id": 37136, "creation_time": "2006-05-25T03:56:50Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 37136, "text": "(In reply to comment #11)\n> Specifying the content-width and content-height in a FO document does not render\n> the image with the proper dimensions:\n> <fo:external-graphic content-height=\"82px\" content-width=\"294px\"\n>                  src=\"http://onjava.com/images/onjava/onjava_logo.jpg\"/>\n> \n\nSpecifying sizes in pixels is generally bad practice in documents to be printed.\nThe width of a pixel depends on the resolution used by the interpreting\napplication. Some use 72dpi, some use 96 dpi as a default. FOP uses 72dpi by\ndefault but that can be changed in the configuration file or on the FopFactory.\nIf you leave out content-height and content-width the image will be painted at\nits natural size.", "id": 90092, "time": "2006-06-12T09:02:38Z", "creator": "jeremias@apache.org", "creation_time": "2006-06-12T09:02:38Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "creator": "gadams@apache.org", "attachment_id": null, "is_private": false, "id": 157021, "time": "2012-04-01T19:02:20Z", "bug_id": 37136, "creation_time": "2012-04-01T19:02:20Z", "text": "the attached test file does not contain the referenced external graphics or referenced setup.svg file; please provide in order to keep this bug open; otherwise, it will be moved to resolved+wontfix"}, {"count": 14, "attachment_id": null, "creator": "gadams@apache.org", "text": "resetting P2 open bugs to P3 pending further review", "id": 157480, "time": "2012-04-07T01:43:37Z", "bug_id": 37136, "creation_time": "2012-04-07T01:43:37Z", "tags": [], "is_private": false}]