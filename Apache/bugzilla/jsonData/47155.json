[{"count": 0, "tags": [], "bug_id": 47155, "attachment_id": null, "is_private": false, "id": 126791, "time": "2009-05-05T07:49:54Z", "creator": "yerenkow@uct.ua", "creation_time": "2009-05-05T07:49:54Z", "text": "I'm trying to use ant to replace some values in XML file.\nSo I need to specify tags >, < in replacetoken.\nIt's behavior not good.\n\n1. Code \n        <replace dir=\"${my.dir}\">\n            <replacetoken><![CDATA[<name>Name</name>]]></replacetoken>\n            <replacevalue><![CDATA[<name>${name}</name>]]></replacevalue>\n            <include name=\"${what}.xml\"/>\n        </replace>\nProduces this in xml:\n<name>${name}</name>\nInstead of real property value;\n\n\n2. Code \n        <replace dir=\"${my.dir}\" >\n            <replacetoken>&lt;name&gt;Name&lt;/name&gt;</replacetoken>\n            <replacevalue>&lt;name&gt;${name}&lt;/name&gt;</replacevalue>\n            <include name=\"${what}.xml\"/>\n        </replace>\nProduces the same in xml:\n<name>${name}</name>\nInstead of real property value;\n\n3. A little trick here, make invalid token and replace value like this:\n        <replace dir=\"${hn.dir}\" >\n            <replacetoken>&lt;name&gt;Name&lt;/name&gt;></replacetoken>\n            <replacevalue>&lt;name&gt;${name}&lt;/name&gt;></replacevalue>\n            <include name=\"${what}.xml\"/>\n        </replace>\nProduces the wanted result:\n<name>Replaced here with property Value</name>\n\nIf you didn't see the difference - it's additional \">\" before closing tags replacetoken and replacevalue.\n\n\nI see here two bugs:\n1. The correct (well-formed) token didn't parsed for properties if there are tags (and in XML files thea are)\n2. The incorrect token, which isn't in file however parsed (!) for properties, then trailing symbols are dropped, and all replaced as needed.\n\nThat's not very well behaviour, I had to find this bug to replace something in XML files :)"}, {"count": 1, "tags": [], "creator": "yerenkow@uct.ua", "text": "\nPoint 3. Is invalid, sorry, I looked in other file.\n\nSo, anyway, Code\n<property name=\"fullName\" value=\"&lt;name&gt;${name}&lt;/name&gt;\" />\n<replace dir=\"${hn.dir}\" token=\"&lt;name&gt;Name&lt;/name&gt;\" value=\"${fullName}\">\n<include name=\"${what}.xml\"/>\n</replace>\n\nWorks, while\nwith nested tags replacetoken and replacevalue didn't.", "id": 126793, "time": "2009-05-05T07:58:02Z", "bug_id": 47155, "creation_time": "2009-05-05T07:58:02Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of bug 11585 ***", "id": 126832, "time": "2009-05-07T01:30:53Z", "bug_id": 47155, "creation_time": "2009-05-07T01:30:53Z", "is_private": false, "attachment_id": null}]