[{"count": 0, "tags": [], "creator": "moreira@privasphere.com", "attachment_id": null, "text": "Similar to bug 49622 I have created a patch to send messages without a body. The patch enhances the functionality of the SMTP Sampler in JMeter.\n\nThis patch is attached, and consists of a simple check box to determine if the body should be empty or not.", "id": 139198, "time": "2010-08-18T09:02:21Z", "bug_id": 49775, "creation_time": "2010-08-18T09:02:21Z", "is_private": false}, {"count": 1, "tags": [], "creator": "moreira@privasphere.com", "text": "Created attachment 25905\npatch that allows sending messages without a body", "id": 139199, "time": "2010-08-18T09:04:43Z", "bug_id": 49775, "creation_time": "2010-08-18T09:04:43Z", "is_private": false, "attachment_id": 25905}, {"count": 2, "tags": [], "text": "Why is the following change needed?\n\n- attach.setDataHandler(new DataHandler(new FileDataSource(f)));\n+ attach.setDataHandler(new DataHandler(new FileDataSource(f.getAbsolutePath())));", "is_private": false, "id": 139267, "creation_time": "2010-08-19T19:14:29Z", "time": "2010-08-19T19:14:29Z", "creator": "sebb@apache.org", "bug_id": 49775, "attachment_id": null}, {"count": 3, "tags": [], "text": "Also, I get\n\njava.io.IOException: No content\n\nif the message body is suppressed and there are no attached files.\n\nPerhaps the checkbox should only be enabled if there is at least one file?", "is_private": false, "id": 139283, "creator": "sebb@apache.org", "time": "2010-08-20T11:30:19Z", "bug_id": 49775, "creation_time": "2010-08-20T11:30:19Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 49775, "text": "If there is no body and no files, it looks like the code needs to do the following to avoid the error:\n\nmessage.setText(\"\");\n\nThis results in an empty body, with the headers:\n\nMIME-Version: 1.0\nContent-Type: text/plain; charset=us-ascii\nContent-Transfer-Encoding: 7bit\n\nI assume that this is what you were aiming for?\n\n==\n\nGiven that it might be useful to send SMTP messages which are not multipart/mixed, maybe it would be better to change the code so that if the flag is set then the code uses:\n\n   message.setText(mailBody)\n\nThis would only make sense if there were no files.\n\nThough if the mailBody was emtpy, perhaps one could allow a single file and send that as the body.\n\nIf you think this makes sense, I'm happy to make the changes (i.e. no need for you to redo the patch).", "count": 4, "id": 139296, "time": "2010-08-20T15:14:34Z", "creator": "sebb@apache.org", "creation_time": "2010-08-20T15:14:34Z", "is_private": false}, {"count": 5, "tags": [], "text": "Sebb this week I am quite busy, but I will do my best to get back to you on these topics next week.\n\nGood to see that you are looking into it ;)", "is_private": false, "bug_id": 49775, "id": 139432, "time": "2010-08-25T05:46:12Z", "creator": "moreira@privasphere.com", "creation_time": "2010-08-25T05:46:12Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "sebb@apache.org", "text": "Applied patch to SVN with some changes as described:\n\n\nURL: http://svn.apache.org/viewvc?rev=991510&view=rev\nLog:\nBug 49775 - Allow sending messages without a body\n\nModified:\n   jakarta/jmeter/trunk/docs/images/screenshots/smtp_sampler.png\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/resources/messages.properties\n   jakarta/jmeter/trunk/src/protocol/mail/org/apache/jmeter/protocol/smtp/sampler/SmtpSampler.java\n   jakarta/jmeter/trunk/src/protocol/mail/org/apache/jmeter/protocol/smtp/sampler/gui/SmtpPanel.java\n   jakarta/jmeter/trunk/src/protocol/mail/org/apache/jmeter/protocol/smtp/sampler/gui/SmtpSamplerGui.java\n   jakarta/jmeter/trunk/src/protocol/mail/org/apache/jmeter/protocol/smtp/sampler/protocol/SendMailCommand.java\n   jakarta/jmeter/trunk/xdocs/changes.xml\n   jakarta/jmeter/trunk/xdocs/images/screenshots/smtp_sampler.png\n   jakarta/jmeter/trunk/xdocs/usermanual/component_reference.xml\n\n\n\nPlease re-open the bug if there are any issues with the changes.", "id": 139596, "time": "2010-09-01T08:15:48Z", "bug_id": 49775, "creation_time": "2010-09-01T08:15:48Z", "is_private": false, "attachment_id": null}]