[{"count": 0, "tags": [], "text": "Created attachment 34360\nmod_jk config file from /etc/httpd/conf.modules.d\n\nI have mod_jk working fine with apache httpd, but I noticed the following duplicate entries in mod_jk.log during startup:\n\n[Tue Oct 11 12:14:53.621 2016] [7005:140099906832576] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n[Tue Oct 11 12:14:53.679 2016] [7005:140099906832576] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n\nJust concerned the initialization might be happening twice, causing extra resources to be allocated.\n\nApache HTTPD version: Apache/2.4.23 (Fedora)\nmod_jk version: 1.2.42", "is_private": false, "id": 194339, "creator": "mkiss@nauticom.net", "time": "2016-10-11T23:00:40Z", "bug_id": 60240, "creation_time": "2016-10-11T23:00:40Z", "attachment_id": 34360}, {"count": 1, "text": "Created attachment 34361\nmod_jk worker config file from /etc/httpd/conf", "bug_id": 60240, "is_private": false, "id": 194340, "time": "2016-10-11T23:11:16Z", "creator": "mkiss@nauticom.net", "creation_time": "2016-10-11T23:11:16Z", "tags": [], "attachment_id": 34361}, {"count": 2, "tags": [], "creator": "mkiss@nauticom.net", "text": "Created attachment 34362\nApache httpd config file from /etc/httpd/conf", "id": 194341, "time": "2016-10-11T23:12:13Z", "bug_id": 60240, "creation_time": "2016-10-11T23:12:13Z", "is_private": false, "attachment_id": 34362}, {"count": 3, "text": "> I have mod_jk working fine with apache httpd, but I noticed the following\n> duplicate entries in mod_jk.log during startup:\n> \n> [Tue Oct 11 12:14:53.621 2016] [7005:140099906832576] [info]\n> init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n> [Tue Oct 11 12:14:53.679 2016] [7005:140099906832576] [info]\n> init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n> \n> Just concerned the initialization might be happening twice, causing extra\n> resources to be allocated.\n> \n> Apache HTTPD version: Apache/2.4.23 (Fedora)\n> mod_jk version: 1.2.42\n\nThis behavior is almost normal and hasn't changed during the last releases.\n\nWhat is strange, is that both lines show the same pid (process id). A normal startup should show different pids. During Apache startup there's first a temporary process that will go away and then a second process will stay as the mother process of all children. One should see first the pid of the temporary process which will no longer exist after startup, and then the pid of the mother process that wil stay. In your case we see two times the pid \"7005\". Can you double check, whether the numbers are the real ones? The pid is the first of the two numbers in the square brackets after the timestamp.\n\nIs there anything special about your startup/test? Using \"-X\" or some exotic MPM?\n\nRegards,\n\nRainer", "creator": "rainer.jung@kippdata.de", "is_private": false, "id": 194360, "time": "2016-10-12T11:29:20Z", "bug_id": 60240, "creation_time": "2016-10-12T11:29:20Z", "tags": [], "attachment_id": null}, {"count": 4, "text": "I'm running httpd as installed by fedora workstation 23 with latest updates and no custom cmd-line options like -X. I enabled server-status in apache and restarted everything. Here's the new mod_jk.log output:\n\n[Wed Oct 12 08:46:41.207 2016] [10560:139963972110528] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n[Wed Oct 12 08:46:41.265 2016] [10560:139963972110528] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n\nHere is the ps output:\n\nroot      10560      1  0 08:46 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\napache    10562  10560  0 08:46 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\napache    10563  10560  0 08:46 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\napache    10564  10560  0 08:46 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\napache    10583  10560  0 08:46 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\napache    10585  10560  0 08:46 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\napache    10586  10560  0 08:46 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\n\nHere is the apachectl status output:\n\n\u25cf httpd.service - The Apache HTTP Server\n   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)\n   Active: active (running) since Wed 2016-10-12 08:46:41 EDT; 6min ago\n Main PID: 10560 (httpd)\n   Status: \"Total requests: 3; Idle/Busy workers 100/0;Requests/sec: 0.00752; Bytes served/sec:  35 B/sec\"\n   CGroup: /system.slice/httpd.service\n           \u251c\u250010560 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u250010562 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u250010563 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u250010564 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u250010583 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u250010585 /usr/sbin/httpd -DFOREGROUND\n           \u2514\u250010586 /usr/sbin/httpd -DFOREGROUND\n\nI will upload an attachment for 'apachectl fullstatus' shortly.", "bug_id": 60240, "is_private": false, "id": 194364, "time": "2016-10-12T13:04:49Z", "creator": "mkiss@nauticom.net", "creation_time": "2016-10-12T13:04:49Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "creator": "mkiss@nauticom.net", "text": "Created attachment 34366\nOutput from 'apachectl fullstatus'", "id": 194365, "time": "2016-10-12T13:06:58Z", "bug_id": 60240, "creation_time": "2016-10-12T13:06:58Z", "is_private": false, "attachment_id": 34366}, {"count": 6, "tags": [], "text": "Created attachment 34367\nOutput from 'apachectl fullstatus'", "is_private": false, "id": 194366, "creator": "mkiss@nauticom.net", "time": "2016-10-12T13:07:44Z", "bug_id": 60240, "creation_time": "2016-10-12T13:07:44Z", "attachment_id": 34367}, {"attachment_id": null, "tags": [], "bug_id": 60240, "text": "(In reply to Matthew Kiss from comment #6)\n> Created attachment 34367 [details]\n> Output from 'apachectl fullstatus'\n\nSorry, this is a duplicate upload.", "count": 7, "id": 194367, "time": "2016-10-12T13:10:39Z", "creator": "mkiss@nauticom.net", "creation_time": "2016-10-12T13:10:39Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 60240, "attachment_id": null, "is_private": false, "id": 194378, "time": "2016-10-12T19:04:32Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2016-10-12T19:04:32Z", "text": "Aha, maybe the Apache gets started by systemd?\n\nIf so, any chance you can start it manually using apachectl and check, whether the output changes then. This would be very helpful. We could then likely focus on startup changes coming from systemd."}, {"count": 9, "tags": [], "creator": "mkiss@nauticom.net", "is_private": false, "text": "(In reply to Rainer Jung from comment #8)\n> Aha, maybe the Apache gets started by systemd?\n> \n> If so, any chance you can start it manually using apachectl and check,\n> whether the output changes then. This would be very helpful. We could then\n> likely focus on startup changes coming from systemd.\n\n[root@localhost httpd]# systemctl disable httpd\nRemoved symlink /etc/systemd/system/multi-user.target.wants/httpd.service.\n\n<reboot>\n\n[root@localhost ~]# ps -ef | grep httpd\nroot       2551   2509  0 21:30 pts/0    00:00:00 grep --color=auto httpd\n\n[root@localhost ~]# apachectl status\n? httpd.service - The Apache HTTP Server\n   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)\n   Active: inactive (dead)\n\n[root@localhost ~]# apachectl start\n\n[root@localhost ~]# apachectl status\n? httpd.service - The Apache HTTP Server\n   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)\n   Active: active (running) since Wed 2016-10-12 21:31:51 EDT; 10s ago\n Main PID: 2570 (httpd)\n   Status: \"Total requests: 0; Idle/Busy workers 100/0;Requests/sec: 0; Bytes served/sec:   0 B/sec\"\n   CGroup: /system.slice/httpd.service\n           +-2570 /usr/sbin/httpd -DFOREGROUND\n           +-2617 /usr/sbin/httpd -DFOREGROUND\n           +-2618 /usr/sbin/httpd -DFOREGROUND\n           +-2639 /usr/sbin/httpd -DFOREGROUND\n           +-2644 /usr/sbin/httpd -DFOREGROUND\n           +-2648 /usr/sbin/httpd -DFOREGROUND\n           +-2653 /usr/sbin/httpd -DFOREGROUND\n\nOct 12 21:31:51 localhost.localdomain systemd[1]: Starting The Apache HTTP Server...\nOct 12 21:31:51 localhost.localdomain systemd[1]: Started The Apache HTTP Server.\n\n[root@localhost ~]# tail -10 /etc/httpd/logs/mod_jk.log\n[Tue Oct 11 12:14:11.030 2016] [6704:140664125495488] [warn] service::jk_status.c (4840): Status worker 'jk-manager' service denied for user 'jkadmin' [Basic] from 192.168.0.4 [(null)]\n[Tue Oct 11 12:14:11.031 2016] [6704:140664125495488] [warn] service::jk_status.c (5200): Status worker 'jk-manager': Access denied.\n[Tue Oct 11 12:14:53.621 2016] [7005:140099906832576] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n[Tue Oct 11 12:14:53.679 2016] [7005:140099906832576] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n[Wed Oct 12 08:42:17.630 2016] [10247:139872252934336] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n[Wed Oct 12 08:42:17.689 2016] [10247:139872252934336] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n[Wed Oct 12 08:46:41.207 2016] [10560:139963972110528] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n[Wed Oct 12 08:46:41.265 2016] [10560:139963972110528] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n[Wed Oct 12 21:31:51.604 2016] [2570:139932261046464] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized\n[Wed Oct 12 21:31:51.775 2016] [2570:139932261046464] [info] init_jk::mod_jk.c (3595): mod_jk/1.2.42 initialized", "id": 194388, "time": "2016-10-13T01:35:19Z", "bug_id": 60240, "creation_time": "2016-10-13T01:35:19Z", "attachment_id": null}]