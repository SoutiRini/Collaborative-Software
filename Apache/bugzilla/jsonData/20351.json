[{"count": 0, "tags": [], "bug_id": 20351, "is_private": false, "id": 38029, "creation_time": "2003-05-30T09:11:15Z", "time": "2003-05-30T09:11:15Z", "creator": "andries@independentsms.com", "text": "Jasper was not able to compile ANY jsp page after i installed tomcat as a \"NT\" \nservice. After that I started up tomcat as console process which fixed the \nproblem. After inspecting the tomcat server error log i discovered that jasper \nactually makes a native call to java.exe windows which failed. \n\nThe logs are not clear as to WHY the call failed. For my next effort I tried \nthe hit-the-enemy-in-the-dark method by assuming that createprocess could not \nlocate the java.exe (what usually happens) file by appending java's bin path \nto my environment. But the bug persisted, and culminated in this very same bug-\nreport. \n\n\nHere is the log:\n\nCreated catalinaLoader in: d:\\tomcat4\\server\\lib\nMay 30, 2003 10:42:29 AM org.apache.commons.modeler.Registry loadRegistry\nINFO: Loading registry information\nMay 30, 2003 10:42:29 AM org.apache.commons.modeler.Registry getRegistry\nINFO: Creating new Registry instance\nMay 30, 2003 10:42:30 AM org.apache.commons.modeler.Registry getServer\nINFO: Creating MBeanServer\nMay 30, 2003 10:42:31 AM org.apache.coyote.http11.Http11Protocol init\nINFO: Initializing Coyote HTTP/1.1 on port 8081\nMay 30, 2003 10:42:36 AM org.apache.coyote.http11.Http11Protocol start\nINFO: Starting Coyote HTTP/1.1 on port 8081\nMay 30, 2003 10:42:36 AM org.apache.jk.common.ChannelSocket init\nINFO: JK2: ajp13 listening on /0.0.0.0:8009\nMay 30, 2003 10:42:36 AM org.apache.jk.server.JkMain start\nINFO: Jk running ID=0 time=31/78  config=d:\\tomcat4\\conf\\jk2.properties\nError running javac.exe compiler\n\tat \norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalC\nompile(DefaultCompilerAdapter.java:455)\n\tat org.apache.tools.ant.taskdefs.compilers.JavacExternal.execute\n(JavacExternal.java:81)\n\tat org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:840)\n\tat org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:682)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:317)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:370)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:473)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:190)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2415)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:594)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:565)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:536)\nCaused by: java.io.IOException: CreateProcess: javac.exe -classpath D:\\tomcat4\n\\bin\\bootstrap.jar;D:\\tomcat4\\shared\\classes;D:\\tomcat4\n\\common\\classes;D:\\tomcat4\\common\\lib\\ant.jar;D:\\tomcat4\\common\\lib\\commons-\ncollections.jar;D:\\tomcat4\\common\\lib\\commons-logging-api.jar;D:\\tomcat4\n\\common\\lib\\jasper-compiler.jar;D:\\tomcat4\\common\\lib\\jasper-\nruntime.jar;D:\\tomcat4\\common\\lib\\naming-common.jar;D:\\tomcat4\n\\common\\lib\\naming-factory.jar;D:\\tomcat4\\common\\lib\\naming-\nresources.jar;D:\\tomcat4\\common\\lib\\servlet.jar;D:\\tomcat4\n\\common\\lib\\tools.jar -sourcepath D:\\tomcat4\\work\\Standalone\\localhost\\_ -\nencoding UTF8 -g D:\\tomcat4\\work\\Standalone\\localhost\\_\\index_jsp.java error=2\n\tat java.lang.Win32Process.create(Native Method)\n\tat java.lang.Win32Process.<init>(Win32Process.java:63)\n\tat java.lang.Runtime.execInternal(Native Method)\n\tat java.lang.Runtime.exec(Runtime.java:566)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec\n(Execute.java:647)\n\tat org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:417)\n\tat org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:428)\n\tat \norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalC\nompile(DefaultCompilerAdapter.java:452)\n\t... 39 more\n--- Nested Exception ---\njava.io.IOException: CreateProcess: javac.exe -classpath D:\\tomcat4\n\\bin\\bootstrap.jar;D:\\tomcat4\\shared\\classes;D:\\tomcat4\n\\common\\classes;D:\\tomcat4\\common\\lib\\ant.jar;D:\\tomcat4\\common\\lib\\commons-\ncollections.jar;D:\\tomcat4\\common\\lib\\commons-logging-api.jar;D:\\tomcat4\n\\common\\lib\\jasper-compiler.jar;D:\\tomcat4\\common\\lib\\jasper-\nruntime.jar;D:\\tomcat4\\common\\lib\\naming-common.jar;D:\\tomcat4\n\\common\\lib\\naming-factory.jar;D:\\tomcat4\\common\\lib\\naming-\nresources.jar;D:\\tomcat4\\common\\lib\\servlet.jar;D:\\tomcat4\n\\common\\lib\\tools.jar -sourcepath D:\\tomcat4\\work\\Standalone\\localhost\\_ -\nencoding UTF8 -g D:\\tomcat4\\work\\Standalone\\localhost\\_\\index_jsp.java error=2\n\tat java.lang.Win32Process.create(Native Method)\n\tat java.lang.Win32Process.<init>(Win32Process.java:63)\n\tat java.lang.Runtime.execInternal(Native Method)\n\tat java.lang.Runtime.exec(Runtime.java:566)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec\n(Execute.java:647)\n\tat org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:417)\n\tat org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:428)\n\tat \norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalC\nompile(DefaultCompilerAdapter.java:452)\n\tat org.apache.tools.ant.taskdefs.compilers.JavacExternal.execute\n(JavacExternal.java:81)\n\tat org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:840)\n\tat org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:682)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:317)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:370)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:473)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:190)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2415)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:594)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:565)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:536)", "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "This is a duplicate of many other bugs. To summarize, this cannot be made\nfoolproof, and thanks to Sun's unwillingness to proporly expose the Java\ncompiler, or interact with the Windows registry in a predictable fashion, the\ninstaller cannot always find what it needs (thankfully, it works most of the time).\n\nAs a workaround, copy tools.jar to common/lib.", "id": 38030, "attachment_id": null, "bug_id": 20351, "creation_time": "2003-05-30T09:31:00Z", "time": "2003-05-30T09:31:00Z", "is_private": false}]