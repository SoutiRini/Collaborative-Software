[{"count": 0, "tags": [], "creator": "mksjoshi@yahoo.com", "attachment_id": null, "is_private": false, "id": 54129, "time": "2004-03-17T05:36:19Z", "bug_id": 27727, "creation_time": "2004-03-17T05:36:19Z", "text": "I have a problem while rendering XML containing unicode characters into japanese\ncharacters.\n\n   I am working on Weblogic 8.1 on NT OS. When the font\nfile(Msmincho.ttf) is placed in c:/winnt/fonts\ndirectory the rendering works fine and pdf is\ngenerated with Japanese Characters. But when the ttf\nfile is place in a different folder I get the\nfollowing exception even though I have made an entry in basedir element of\nuserconfig file.\n\njava.lang.NullPointerException\n        at\norg.apache.fop.render.pdf.fonts.LazyFont.getAscender(LazyFont.java:82)\n        at\norg.apache.fop.layout.FontState.getAscender(FontState.java:56)\n        at\norg.apache.fop.layout.LineArea.<init>(LineArea.java:111)\n        at\norg.apache.fop.layout.BlockArea.start(BlockArea.java:181)\n        at\norg.apache.fop.fo.flow.Block.layout(Block.java:251)\n        at\norg.apache.fop.fo.flow.TableCell.layout(TableCell.java:269)\n        at\norg.apache.fop.fo.flow.TableRow.layout(TableRow.java:344)\n        at\norg.apache.fop.fo.flow.TableBody.layout(TableBody.java:172)\n        at\norg.apache.fop.fo.flow.Table.layout(Table.java:247)\n        at\norg.apache.fop.fo.flow.Flow.layout(Flow.java:156)\n        at\norg.apache.fop.fo.flow.Flow.layout(Flow.java:113)\n        at\norg.apache.fop.fo.pagination.PageSequence.format(PageSequence.java:296)\n        at\norg.apache.fop.apps.StreamRenderer.render(StreamRenderer.java:200)\n        at\norg.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:182)\n        at\norg.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown\nSource)\n        at\norg.apache.xerces.parsers.DTDConfiguration.parse(Unknown\nSource)\n        at\norg.apache.xerces.parsers.DTDConfiguration.parse(Unknown\nSource)\n        at\norg.apache.xerces.parsers.XMLParser.parse(Unknown\nSource)\n        at\norg.apache.xerces.parsers.AbstractSAXParser.parse(Unknown\nSource)\n        at\norg.apache.fop.apps.Driver.render(Driver.java:481)\n        at\norg.apache.fop.apps.Driver.run(Driver.java:554)\n        at\ncom.db.eqr.ger.ui.web.company.pdf.GenerateMYPDF.createPDF(GenerateMYPDF.java:150)\n        at\ncom.db.eqr.ger.ui.web.company.pdf.CompanyPDFAction.execute(CompanyPDFAction.java:146)\n        at\norg.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:465)\n        at\norg.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)\n        at\norg.apache.struts.action.ActionServlet.process(ActionServlet.java:1422)\n        at\norg.apache.struts.action.ActionServlet.doPost(ActionServlet.java:523)\n        at\njavax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n        at\njavax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at\nweblogic.servlet.internal.ServletStubImpl$ServletInvocationAction.run(ServletStubImpl.java:1053)\n        at\nweblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java:387)\n        at\nweblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:28)\n        at\nweblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:27)\n\n\nCan anyone help me out and let me know what could be the problem here.\n\n I have used the following userconfig file.\n\n<!--<!DOCTYPE configuration SYSTEM \"config.dtd\">-->\n<!-- \n     this file contains templates which allow an user\neasy \n     configuration of Fop. Actually normally you don't\nneed this configuration \n     file, but if you need to change configuration,\nyou should\n     always use this file and *not* config.xml. \n     Usage: java org.apache.fop.apps.Fop -c\nuserconfig.xml -fo fo-file -pdf pdf-file\n-->\n\n\n<configuration>\n\n<!--  NOT IMPLEMENTED\nbasedir: normally the base directory is the directory\nwhere the fo file is \n         located. if you want to specify your own,\nuncomment this entry\n-->\n  <entry>\n    <key>baseDir</key>\n    <value>c:/shyamajoshi/conf/fop</value>\n  </entry>\n\n<!--\n************************************************************************\n                        HYPHENATION \n************************************************************************\n-->\n  \n<!--\n   hyphenation directory \n   if you want to specify your own directory with\nhyphenation pattern\n   then uncomment the next entry and add the directory\nname\n-->\n\n<!--\n  <entry>\n    <key>hyphenation-dir</key>\n    <value>/java/xml-fop/hyph</value>\n  </entry>\n-->\n\n<!--\n************************************************************************\n  Add fonts here\n************************************************************************\n-->\n\n<fonts>\n <!-- example -->\n <!--\n <font metrics-file=\"arial.xml\" kerning=\"yes\"\nembed-file=\"arial.ttf\">\n    <font-triplet name=\"Arial\" style=\"normal\"\nweight=\"normal\"/>\n    <font-triplet name=\"ArialMT\" style=\"normal\"\nweight=\"normal\"/>\n </font>\n <font metrics-file=\"arialb.xml\" kerning=\"yes\"\nembed-file=\"arialb.ttf\">\n    <font-triplet name=\"Arial\" style=\"normal\"\nweight=\"bold\"/>\n    <font-triplet name=\"ArialMT\" style=\"normal\"\nweight=\"bold\"/>\n </font>\n <font metrics-file=\"ariali.xml\" kerning=\"yes\"\nembed-file=\"ariali.ttf\">\n    <font-triplet name=\"Arial\" style=\"italic\"\nweight=\"normal\"/>\n    <font-triplet name=\"ArialMT\" style=\"italic\"\nweight=\"normal\"/>\n </font>\n <font metrics-file=\"arialbi.xml\" kerning=\"yes\"\nembed-file=\"arialbi.ttf\">\n    <font-triplet name=\"Arial\" style=\"italic\"\nweight=\"bold\"/>\n    <font-triplet name=\"ArialMT\" style=\"italic\"\nweight=\"bold\"/>\n </font>\n -->\n <!-- Example Japanese fonts\n <font metrics-file=\"msgothic.xml\"\nembed-file=\"D:\\winnt\\font\\msgothic.ttc\" kerning=\"yes\">\n    <font-triplet name=\"Gothic\" style=\"normal\"\nweight=\"normal\"/>\n    <font-triplet name=\"Gothic\" style=\"normal\"\nweight=\"bold\"/>\n    <font-triplet name=\"Gothic\" style=\"italic\"\nweight=\"normal\"/>\n    <font-triplet name=\"Gothic\" style=\"italic\"\nweight=\"bold\"/>\n </font>\n <font metrics-file=\"msmincho.xml\"\nembed-file=\"Cyberbit.ttf\" kerning=\"yes\">\n    <font-triplet name=\"Mincho\" style=\"normal\"\nweight=\"normal\"/>\n    <font-triplet name=\"Mincho\" style=\"normal\"\nweight=\"bold\"/>\n    <font-triplet name=\"Mincho\" style=\"italic\"\nweight=\"normal\"/>\n    <font-triplet name=\"Mincho\" style=\"italic\"\nweight=\"bold\"/>\n   </font>\n  -->\n   <font metrics-file=\"msmincho.xml\"\nembed-file=\"msmincho.ttf\" kerning=\"yes\">\n      <font-triplet name=\"MSMincho\" style=\"normal\"\nweight=\"normal\"/>\n      <font-triplet name=\"MSMincho\" style=\"normal\"\nweight=\"bold\"/>\n      <font-triplet name=\"MSMincho\" style=\"italic\"\nweight=\"normal\"/>\n      <font-triplet name=\"MSMincho\" style=\"italic\"\nweight=\"bold\"/>\n   </font>\n\n  \n</fonts>\n\n\n</configuration>\n\n\n\n\nRegards,\nShyama"}, {"count": 1, "tags": [], "creator": "gadams@apache.org", "attachment_id": null, "is_private": false, "id": 157262, "time": "2012-04-07T01:37:05Z", "bug_id": 27727, "creation_time": "2012-04-07T01:37:05Z", "text": "resetting severity from major to normal pending further review"}]