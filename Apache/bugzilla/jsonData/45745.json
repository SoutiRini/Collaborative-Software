[{"count": 0, "tags": [], "bug_id": 45745, "attachment_id": null, "text": "Configure an invalid Context - e.g. with InvokerServlet yet unprivileged.\n\nThis generates the following exception:\nSep 2, 2008 5:26:57 PM org.apache.catalina.startup.HostConfig deployDescriptor\nSEVERE: Error deploying configuration descriptor vOacisHelp.xml\njava.lang.SecurityException: Servlet of class org.apache.catalina.servlets.InvokerServlet is privileged and cannot be loaded by this web application\n        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1134)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:981)\n        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4058)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4364)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)\n        at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:626)\n        at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:553)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:488)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1147)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:516)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:578)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\n\n\nResult:  memory leak by repeated attempts to to deploy the Context.\n\nJprofiler clearly shows that the ContextBindings hold on to all the repeatedly created ApplicationContexts even though the Context wasn't successfully deployed.\n\nYou might argue that this is an avoidable scenario, but I suspect that the Exception handling isn't quite right here.", "id": 120362, "time": "2008-09-04T08:02:58Z", "creator": "martin.schulz@emergis.com", "creation_time": "2008-09-04T08:02:58Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "I can't repeat this. With a simple test app that just uses the invoker in web.xml I can't get it to start at all with 6.0.x and with trunk whilst I do see the number of WebappClassLoader instances increasing (usually a sure sign of a memory leak) a full GC removes the extra instances.\n\nIf you still see this with 6.0.18 please attach your test web application to this bug report for further investigation.", "id": 120528, "time": "2008-09-10T13:25:33Z", "bug_id": 45745, "creation_time": "2008-09-10T13:25:33Z", "attachment_id": null}]