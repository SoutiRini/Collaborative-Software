[{"count": 0, "tags": [], "bug_id": 47357, "is_private": false, "text": "While looking into a production issue, I recently uncovered the following inconsistency.\n\nIn log4j.properties, if you declare a logger twice:\n\nlog4j.rootCategory=FATAL, console\n\nlog4j.logger.ReproduceLog4jProblem=INFO,console\nlog4j.logger.ReproduceLog4jProblem=INFO,console\n\nlog4j.appender.console=org.apache.log4j.ConsoleAppender\nlog4j.appender.console.layout=org.apache.log4j.PatternLayout\nlog4j.appender.console.layout.ConversionPattern=%p [(%c{3})] %m%n\n\nThere is no warning or strange behavior.  If you declare a logger and a category (in either order) with the same name like this:\n\nlog4j.rootCategory=FATAL, console\n\nlog4j.category.ReproduceLog4jProblem=INFO,console\nlog4j.logger.ReproduceLog4jProblem=INFO,console\n\nlog4j.appender.console=org.apache.log4j.ConsoleAppender\nlog4j.appender.console.layout=org.apache.log4j.PatternLayout\nlog4j.appender.console.layout.ConversionPattern=%p [(%c{3})] %m%n\n\nThen when you try to write to that log, the following error appears:\n\nlog4j:ERROR Attempted to append to closed appender named [console].\n\nI understand that this is really a configuration error, but I believe that the behavior should be the same in either case.  But maybe an improvement would be to display a warning when redefining any loggers or categories.  Failing either of those, is there a way to show a better error rather than closed appender?  Googling for that error message did not show anything related to duplicate mixed logger and category configuration.\n\n\nFYI this is the simple class I used to test this:\n\npublic class ReproduceLog4jProblem {\n\n\tprivate static final org.apache.log4j.Logger LOG = org.apache.log4j.Logger\n\t\t\t.getLogger(ReproduceLog4jProblem.class);\n\t\n\tpublic static void main(String[] args) {\n\t\tLOG.info(\"Log!\");\n\t}\n\n}", "id": 127895, "time": "2009-06-11T11:04:42Z", "creator": "bill.dephillips@gmail.com", "creation_time": "2009-06-11T11:04:42Z", "attachment_id": null}]