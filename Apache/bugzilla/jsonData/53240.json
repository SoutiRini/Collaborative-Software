[{"count": 0, "tags": [], "text": "Problem:\n\ntomcat open 'x' times database sessions than configured. 'X' equals the number of subfolders/applications under tomcat webapps/ folder.\n\nTo reproduce this problem, plz follow the steps below  (I tested this case both on oracle 10g and oracle 10g express , and i guess it works with all databases)\n\nstep 1.\nconfigure a jdbc data source by adding the following text to tomcat conf/context.xml, and don'nt forget to add proper jdbc jar[s] to tomcat lib/\n(using the new 'tomcat jdbc connection pool' that came with tomcat 7. And notice that we set the pram maxActive=maxIdle=2 )\n\n\t\t<Resource name=\"jdbc/myoracle\" auth=\"Container\"\n              type=\"javax.sql.DataSource\" driverClassName=\"oracle.jdbc.OracleDriver\"\n              url=\"jdbc:oracle:thin:@127.0.0.1:1521:XE\"\n              username=\"xe\" password=\"xe\" maxActive=\"2\" maxIdle=\"2\" maxWait=\"1000\" \n              factory=\"org.apache.tomcat.jdbc.pool.DataSourceFactory\" /> \n\nstep 2. start tomcat\n\nstep 3. loggin to oracle, and execute the following  sql :\n\nselect SID, USERNAME from v$session  where USERNAME='XE';\n\nthe sql returns 10 instead of 2(5 times than expected. And the number of subfolders of tomcat/webapps/ is just 5 ).\n\nFor further test, we can remove a foler from webapps/, let's say 'docs', and stop tomcat and repeat step 2 and 3. After step 3, the sql will return 8 because there are 4 subfolers left in webapps/.\n\n---\nI don't think it's a feature because the sessions in a database will increase by 100 (if the params 'maxActive/maxIdle' were set to 100) in case I just simply create a foler under webapps/. If something like that happend, my boss could kill me.", "attachment_id": null, "id": 159089, "creator": "fangtianying@hexun.com", "time": "2012-05-16T10:48:33Z", "bug_id": 53240, "creation_time": "2012-05-16T10:48:33Z", "is_private": false}, {"count": 1, "tags": [], "creator": "chuck.caldarale@unisys.com", "attachment_id": null, "id": 159092, "time": "2012-05-16T12:57:23Z", "bug_id": 53240, "creation_time": "2012-05-16T12:57:23Z", "is_private": false, "text": "Bugzilla is not a support forum.  Please post your query on the Tomcat users mailing list so people can help correct your configuration error."}, {"count": 2, "tags": [], "bug_id": 53240, "attachment_id": null, "is_private": false, "id": 159165, "time": "2012-05-18T15:07:55Z", "creator": "fhanik@apache.org", "creation_time": "2012-05-18T15:07:55Z", "text": "misconfiguration. conf/context.xml will create one pool per webapp.\nglobal pools are configured in server.xml"}]