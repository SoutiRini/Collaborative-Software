[{"count": 0, "attachment_id": null, "creator": "azink@eharmony.com", "is_private": false, "id": 71370, "time": "2005-02-22T21:47:06Z", "bug_id": 33699, "creation_time": "2005-02-22T21:47:06Z", "tags": [], "text": "Environment:\n- Red Hat Linux Advanced Server release 2.1AS (Pensacola)\n2.4.9-e.40enterprise #1 SMP i686 unknown\n- no compile (./configure) flags aside from --prefix\n- default httpd.conf\n\nDescription:\nWhen serving images (jpg and gif were tested), images are majorly corrupted.  \nThe file size of the image served is correct, but it is missing large chunks of \ndata (replaced with NULs).  This can occur in any part of the file, including \nthe header.  If the file is moved, copied, or deleted and replaced, the \ncorruption changes, but it still exists.  The file on the disk is fine.\n\nWorkaround:\nRyan Bloom suggested that we try compiling with the --without-sendfile option.  \nThis fixed the problem, so the problem is most likely in sendfile optimization.\n\nPlease let me know if I can provide any additional information."}, {"count": 1, "tags": [], "bug_id": 33699, "text": "This looks like a problem with the sendfile implementation on Linux and\nthreading.  We had a similar problem a _long_ time ago on FreeBSD.", "id": 71371, "time": "2005-02-22T21:51:28Z", "creator": "rbb@apache.org", "creation_time": "2005-02-22T21:51:28Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 33699, "text": "Using what filesystem?", "id": 71385, "time": "2005-02-23T12:02:25Z", "creator": "jorton@redhat.com", "creation_time": "2005-02-23T12:02:25Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 33699, "text": "(In reply to comment #2)\n> Using what filesystem?\n\next3", "id": 71407, "attachment_id": null, "creator": "azink@eharmony.com", "creation_time": "2005-02-23T18:07:53Z", "time": "2005-02-23T18:07:53Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 33699, "attachment_id": null, "is_private": false, "id": 71463, "time": "2005-02-24T16:36:58Z", "creator": "nick@webthing.com", "creation_time": "2005-02-24T16:36:58Z", "text": "(In reply to comment #3)\n> (In reply to comment #2)\n> > Using what filesystem?\n> \n> ext3\n\nI think perhaps Joe meant to ask whether it was mounted locally or networked\n(e.g. NFS, samba).  That would affect sendfile."}, {"count": 5, "tags": [], "bug_id": 33699, "attachment_id": null, "is_private": false, "id": 71480, "time": "2005-02-24T18:16:29Z", "creator": "azink@eharmony.com", "creation_time": "2005-02-24T18:16:29Z", "text": "(In reply to comment #4)\n> \n> I think perhaps Joe meant to ask whether it was mounted locally or networked\n> (e.g. NFS, samba).  That would affect sendfile.\n\nGot ya.  It's a local filesystem.\n"}, {"count": 6, "attachment_id": null, "bug_id": 33699, "is_private": false, "id": 77426, "time": "2005-07-19T11:24:40Z", "creator": "chip@force-elite.com", "creation_time": "2005-07-19T11:24:40Z", "tags": [], "text": "I haven't seen this happen on more modern RHEL releases, is this a bug specific\nto their old version/kernel perhaps?"}, {"count": 7, "tags": [], "creator": "wrowe@apache.org", "text": "\n  We've seen no further reports on this; one must assume that kernel 2.4.9 was\n  busted at least in -this- specific distribution.  But noting we can't do much\n  about a broken os.", "id": 85545, "attachment_id": null, "bug_id": 33699, "creation_time": "2006-02-07T18:16:32Z", "time": "2006-02-07T18:16:32Z", "is_private": false}]