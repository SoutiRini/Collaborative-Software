[{"count": 0, "tags": [], "bug_id": 21768, "attachment_id": null, "is_private": false, "id": 41078, "time": "2003-07-21T14:23:33Z", "creator": "simon.pabst@web.de", "creation_time": "2003-07-21T14:23:33Z", "text": "Setup:\nOne Apache with mod_jk load balancer (sticky sessions on) in front\nEight Tomcats in back\n\nRound Robin doesn't work, but instead the Users are distributed on the Tomcats\nlike this:\n\nTomcat No.| User Count (approx. daily)\nT1              70\nT2              30\nT3              15\nT4              6\nT5              1\nT6              0\nT7              0\nT8              0\n\nThis occurs both with Apache1.3.27/mod_jk1.2.x and Apache2.0.45/mod_jk2.x\n(mpm=prefork (default))\n(mod_jk 1 and 2 built from source of jakarta-tomcat-connectors-4.1.24-src and\nlater also of tomcat-connectors-1.1M1-src).\n\nWith Apache2 and --with-mpm=worker round robin works fine.\n\n\nUnless this is fixed, at least please put a big warning in the JK docs.\n(spent lots of hours on this because i thought the fault is somewhere in my\nconfiguration)\n\n\nSee also this thread:\nhttp://www.mail-archive.com/tomcat-user@jakarta.apache.org/msg97638.html"}, {"count": 1, "text": "Strangely .. thats the way its supposed to work.  There are emails in the\ntomcat-dev (or tomcat-user) archives about this someone IIRC.", "bug_id": 21768, "is_private": false, "id": 51952, "time": "2004-02-09T00:33:20Z", "creator": "funkman@joedog.org", "creation_time": "2004-02-09T00:33:20Z", "tags": [], "attachment_id": null}, {"count": 2, "text": "As far as I recall the loadbalancer counter is initialized with zero, therefore\nevery worker has the tendency to transfer its first session to tomcat1 -- but\nthis will be smoother the longer your apache runs. \n\nAnd I found that if you have all tomcats declared als \"local\" workers, all\nsessions end up at tomcat1 - but this is definitely a user's configuration\nproblem  - as far as I know.", "bug_id": 21768, "is_private": false, "id": 51974, "time": "2004-02-09T06:34:47Z", "creator": "alexander.schwartz@gmx.net", "creation_time": "2004-02-09T06:34:47Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "text": "Err well, i don't know, true round robin as it works with a non-prefork Apache\ndoes distribute different Users on the tomcat instances like this:\n\nT1              20\nT2              20\nT3              20\nT4              19\nT5              19\nT6              19\nT7              19\nT8              19\n\nSo each tomcat gets a roughly equal share of the workload.\nIt was quite a big problem for as because we had a very memory-consuming\nApplication and the Heapspace of the first three tomcats was fully stuffed and\nthe others were just sitting ducks...\n\nNow it's workin fine as we're using Apache 2 with mpm, but its still a bug IMO.", "attachment_id": null, "bug_id": 21768, "id": 52000, "time": "2004-02-09T17:29:46Z", "creator": "simon.pabst@web.de", "creation_time": "2004-02-09T17:29:46Z", "is_private": false}]