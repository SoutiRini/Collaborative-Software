[{"count": 0, "tags": [], "bug_id": 27162, "attachment_id": null, "is_private": false, "id": 52806, "time": "2004-02-23T15:49:07Z", "creator": "bohuslavroztocil@email.cz", "creation_time": "2004-02-23T15:49:07Z", "text": "Any SQL statement I try to execute using <sql> task fails reporting\n\n  C:\\x\\veve\\build.xml:12: java.sql.SQLException: Method can be called only once.\n\nPrior ant 1.6.0 everything worked fine. Now we cannot move from 1.5.4 to 1.6.x.\n\nI guess it's due to the following broken code in\norg.apache.tools.ant.taskdefs.SQLExec.execSql() method:\n\n    ...\n    ret = statement.getMoreResults();\n    updateCount = statement.getUpdateCount();\n    resultSet = statement.getResultSet();\n  } while (ret);\n\nThe Informix JDBC driver refuses to perform getUpdateCount() method if the 'ret'\nis false.\n\nThe fix is very simple - just to test 'ret' before calling updateCount():\n\n    ...\n    ret = statement.getMoreResults();\n    if (ret) {\n      updateCount = statement.getUpdateCount();\n      resultSet = statement.getResultSet();\n    }\n  } while (ret);"}, {"count": 1, "tags": [], "text": "Created attachment 10495\nPatch fixing the bug.", "attachment_id": 10495, "id": 52808, "creator": "bohuslavroztocil@email.cz", "time": "2004-02-23T16:02:44Z", "bug_id": 27162, "creation_time": "2004-02-23T16:02:44Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 27162, "attachment_id": null, "id": 52823, "time": "2004-02-23T19:33:46Z", "creator": "peter.reilly@corvil.com", "creation_time": "2004-02-23T19:33:46Z", "is_private": false, "text": "Applied patch, thanks.\nIt should be in ant 1.6.2."}, {"attachment_id": null, "tags": [], "bug_id": 27162, "is_private": false, "count": 3, "id": 60744, "time": "2004-07-17T13:19:24Z", "creator": "antoine@apache.org", "creation_time": "2004-07-17T13:19:24Z", "text": "*** Bug 30069 has been marked as a duplicate of this bug. ***"}, {"count": 4, "tags": [], "text": "Bug still exits in ant 1.6.2.\nProblem is when print=\"true\".\nI suggest that function printResults should by change to\nprotected void printResults(ResultSet rs,PrintStream out).\n", "attachment_id": null, "id": 61117, "creator": "dariusz.dudek@pentacomp.com.pl", "time": "2004-07-26T08:13:46Z", "bug_id": 27162, "creation_time": "2004-07-26T08:13:46Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 27162, "attachment_id": null, "id": 66747, "creation_time": "2004-11-11T18:48:07Z", "time": "2004-11-11T18:48:07Z", "creator": "sbailliez@apache.org", "text": "I made the change as was requested in CVS HEAD, but please test it as you \ndon't give much information here about what is wrong.\n\nPlease test and give feedback.", "is_private": false}, {"count": 6, "attachment_id": null, "bug_id": 27162, "is_private": false, "id": 66906, "time": "2004-11-15T09:28:31Z", "creator": "dariusz.dudek@pentacomp.com.pl", "creation_time": "2004-11-15T09:28:31Z", "tags": [], "text": "It works correct."}, {"attachment_id": null, "tags": [], "bug_id": 27162, "is_private": false, "count": 7, "id": 66931, "time": "2004-11-15T14:31:33Z", "creator": "sbailliez@apache.org", "creation_time": "2004-11-15T14:31:33Z", "text": "Many thanks."}]