[{"count": 0, "tags": [], "creator": "codetester11@hotmail.com", "attachment_id": null, "id": 59256, "time": "2004-06-15T20:43:15Z", "bug_id": 29585, "creation_time": "2004-06-15T20:43:15Z", "is_private": false, "text": "Filelists are supposed to be list of files which may or maynot exist as apposed \nto filesets which compose of files which must exist. When I pass a filelist to \na apply task it skips the files if they dont exist. The target definition is as \nfollows...\n\n<target name=\"test\">\n\t<apply dir=\".\" executable=\"something.exe\">\n\t\t<arg value=\"param1\"/>\n\t\t<srcfile/>\n\t\t<filelist id=\"test.me\" dir=\".\" files=\"test2.tst test1.tst\"/>\n\t</apply>\n</target>\n\nThe problem seems to reside in this section of the code in \norg.apache.tools.ant.taskdefs ...\n\nFile f = new File(base, names[j]);\nif ((f.isFile() && !\"dir\".equals(type))\n    || (f.isDirectory() && !\"file\".equals(type))) {\n\n     if (f.isFile()) {\n        totalFiles++;\n     } else {\n         totalDirs++;\n     }\n     \nWhen I comment out this code the files are added as desired."}, {"attachment_id": null, "tags": [], "bug_id": 29585, "text": "I see, you want <apply> to be able to pass\nfilenames to the executable for files that\ndo not exist.\n\nI think this may be an enchancement request.\n\nI think you are reading too much into the statement\nin the filelist documentation.\nThe filelist type/class allows files that do not\nexist to be specified. It is up to the task the\nuses this type to process this file path as it sees fit.\nThe <apply> task ignores them, the <concat> task ignores\nthem (but issues a warning).\nChanging the behaviour of the <apply> task may be backwardly\nincompatible - some build scripts may depend on the current behaviour.\nA fix could be an attribute to allow not present files to be passed\nto the executable.\nAs a workaround, you could use the <for> task from\nant-contrib:\n\n    <ac:for param=\"file\">\n      <ac:path>\n        <ac:filelist dir=\".\" files=\"a.x,build.xml\"/>\n      </ac:path>\n      <ac:sequential>\n        <exec dir=\".\" executable=\"echo\">\n          <arg value=\"param1\"/>\n          <arg value=\"@{file}\"/>\n        </exec>\n      </ac:sequential>\n    </ac:for>\n", "count": 1, "id": 59267, "time": "2004-06-16T08:30:08Z", "creator": "peter.reilly@corvil.com", "creation_time": "2004-06-16T08:30:08Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 29585, "attachment_id": null, "id": 59315, "time": "2004-06-16T15:21:30Z", "creator": "mbenson@apache.org", "creation_time": "2004-06-16T15:21:30Z", "is_private": false, "text": "I agree and think that we probably should add the described attribute to \n<apply> for inclusion in a future release.  Hmmm... attribute \nname \"ignoremissing\", default value=\"true\" ?  Will that work for all concerned \nparties?"}, {"count": 3, "tags": [], "bug_id": 29585, "attachment_id": null, "is_private": false, "id": 59330, "time": "2004-06-16T16:35:57Z", "creator": "codetester11@hotmail.com", "creation_time": "2004-06-16T16:35:57Z", "text": "Firstly, thanks for the responses. The additional parameter to apply with \ndefault behaviour to preserve backward compatibility would work for me. \nHowever, I also feel the documentation should include something like what Peter \nhas mentioned in his reponse. This will prevent any further confusion. "}, {"attachment_id": null, "tags": [], "bug_id": 29585, "text": "This is fixed in CVS HEAD.  The manual page has of course been updated to \ndocument the new attribute; if you feel clarification beyond this is desirable, \nplease feel free to modify apply.html and attach a unified diff patch to this \nreport.\n\nThanks", "count": 4, "id": 59331, "time": "2004-06-16T16:44:43Z", "creator": "mbenson@apache.org", "creation_time": "2004-06-16T16:44:43Z", "is_private": false}]