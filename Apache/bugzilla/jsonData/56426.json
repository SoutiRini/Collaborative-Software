[{"count": 0, "tags": [], "bug_id": 56426, "is_private": false, "text": "/*\n * To change this template, choose Tools | Templates\n * and open the template in the editor.\n */\npackage com.ace2three.adminportal.web;\n\nimport com.ace2three.web.dao.CommonDAO;\nimport com.ace2three.platform.server.impl.ApplicationContext;\nimport com.ace2three.pool.DAOFactory;\nimport com.ace2three.utils.LeaderBoardThread;\nimport com.ace2three.web.dao.AdminToolDAO;\nimport javax.servlet.ServletConfig;\nimport javax.servlet.ServletContext;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport org.apache.log4j.Logger;\n\n/**\n *\n * @author sridhar\n */\npublic class LoadConfig extends HttpServlet {\n     private static Logger log = Logger.getLogger(LoadConfig.class);\n     private boolean alreadyInitialized = true;\n    public void init(ServletContext context) throws ServletException {\n  // TODO Auto-generated method stub \n        ServletConfig config = null;\n        super.init(config);\n  //-Dlog4j.configuration=file:D:\\acc_config\\log4j.xml\n        if (this.alreadyInitialized)\n        {\n        try {\n\n                new LeaderBoardThread().start();\n           \n        } catch (Exception e) {\n             log.info(\"Exception in loadConfig :: \"+e);\n            e.printStackTrace();\n        }\n        this.alreadyInitialized = false;\n        }\n  \n }\n    @Override\n\tpublic void destroy() {\n        log.info( \"Destroy called\", new Throwable() );\n\t\tsuper.destroy();\n        this.alreadyInitialized = false;\n\t}\n    /*@Override\n    public void init( ServletConfig config )\n        throws ServletException\n    {\n        log.info( \"Init called, config=\"+config, new Throwable() );\n        super.init( config );\n        if (this.alreadyInitialized)\n        {\n            log.error( \"Already initialized\");\n            throw new IllegalStateException( \"Already initialized\" );\n        }\n        this.alreadyInitialized = true;\n    }*/\n}\n\nLeaderBoardThread: ******** Calling leader board Therad ****************** 708770251\nLeaderBoardThread: ******** Calling leader board Therad ****************** 1200582472\n\nhere am getting two thread process for every tomcat restart please check\nhash codes also here for therad process", "id": 174689, "time": "2014-04-18T07:54:48Z", "creator": "sridhar.a@headinfotech.com", "creation_time": "2014-04-18T07:54:48Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 56426, "text": "Bugzilla is not a support forum.\n\nJudging from quality of your code (typos, inverted meaning of 'already', etc.) I guess that you are doing something stupid. If you need help with troubleshooting, see\nhttp://tomcat.apache.org/findhelp.html\n\nIf you want something to be initialized once, you should use a listener, not a servlet.", "count": 1, "id": 174696, "time": "2014-04-18T11:56:21Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-04-18T11:56:21Z", "is_private": false}]