[{"text": "If the InputStream has less than 4 (OOXML less than 8) bytes and is wrapped into a PushbackInputStream, the data in this PushbackInputStream gets corrupted.\n\nBackground:\nBoth methods try to read 4 (OOXML 8) bytes from the stream into a buffer and then push back this buffer. But these methods always push back the entire buffer, no matter how many bytes have actually been read from the stream. In the case that the stream contains less than 4 (OOXML 8) bytes, the PushbackInputStream is now extended to 4 (8) bytes with 0x00s.\n\nThis patch records the actual nember of bytes read from the stream only only pushes back this ammount of bytes.", "tags": [], "bug_id": 58156, "attachment_id": null, "count": 0, "id": 184083, "time": "2015-07-20T10:48:29Z", "creator": "stefan.kopf@alfresco.com", "creation_time": "2015-07-20T10:48:29Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 58156, "attachment_id": 32915, "text": "Created attachment 32915\nPatch for Bug 58156", "id": 184084, "time": "2015-07-20T10:54:52Z", "creator": "stefan.kopf@alfresco.com", "creation_time": "2015-07-20T10:54:52Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 58156, "attachment_id": null, "text": "Thanks for the patch, I don't think these happen usually as the files are always bigger than the few bytes header which is usually located at the beginning of the file, but these methods should \"work as advertised\" in all cases nevertheless naturally. \n\nI have applied the changes at r1691948, I found one more case in IOUtils.", "id": 184087, "time": "2015-07-20T14:06:15Z", "creator": "dominik.stadler@gmx.at", "creation_time": "2015-07-20T14:06:15Z", "is_private": false}]