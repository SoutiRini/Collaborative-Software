[{"count": 0, "tags": [], "text": "When using EJB Statefull session bean (I'm using JBoss, if this info can \nhelp), when re-deploying WAR, stoping tomcat and re-starting (I need to do, \nbecause just deploying new WAR does not overwrite old expanded files) I get \nfollowing error (the class is in the WEB-\nINF/classes/br/com/econet/project/session/MyOwnService.class):\n\n2001-11-30 13:24:20 StandardManager[/portalHIV] ClassNotFoundException while \nloading persisted sessions: java.lang.ClassNotFoundException: \nbr.com.econet.project.session.MyOwnService\njava.lang.ClassNotFoundException: br.com.econet.project.session.MyOwnService\n        at \norg.apache.catalina.loader.StandardClassLoader.loadClassStandardClassLoader.jav\na:1124)\n        at \norg.apache.catalina.loader.StandardClassLoader.loadClassStandardClassLoader.jav\na:989)\n        at java.lang.ClassLoader.loadClassInternal(Unknown Source)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Unknown Source)\n        at java.io.ObjectInputStream.resolveProxyClass(Unknown Source)\n        at java.io.ObjectInputStream.inputProxyClassDescriptor(Unknown Source)\n        at java.io.ObjectInputStream.readObject(Unknown Source)\n        at java.io.ObjectInputStream.readObject(Unknown Source)\n        at java.io.ObjectInputStream.inputObject(Unknown Source)\n        at java.io.ObjectInputStream.readObject(Unknown Source)\n        at java.io.ObjectInputStream.readObject(Unknown Source)\n        at \norg.apache.catalina.session.StandardSession.readObjectStandardSession.java:1268\n)\n        at \norg.apache.catalina.session.StandardSession.readObjectDataStandardSession.java:\n810)\n        at \norg.apache.catalina.session.StandardManager.loadStandardManager.java:411)\n        at \norg.apache.catalina.session.StandardManager.startStandardManager.java:617)\n        at org.apache.catalina.core.ContainerBase.startContainerBase.java:1104)\n        at \norg.apache.catalina.core.StandardContext.startStandardContext.java:3352)\n        at \norg.apache.catalina.core.ContainerBase.addChildContainerBase.java:785)\n        at org.apache.catalina.core.StandardHost.addChildStandardHost.java:415)\n        at org.apache.catalina.core.StandardHost.install(StandardHost.java:643)\n        at \norg.apache.catalina.startup.HostConfig.deployAppsHostConfig.java:647)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:777)\n        at \norg.apache.catalina.startup.HostConfig.lifecycleEventHostConfig.java:463)\n        at \norg.apache.catalina.util.LifecycleSupport.fireLifecycleEventLifecycleSupport.ja\nva:155)\n        at org.apache.catalina.core.ContainerBase.startContainerBase.java:1131)\n        at org.apache.catalina.core.ContainerBase.startContainerBase.java:1123)\n        at \norg.apache.catalina.core.StandardEngine.startStandardEngine.java:307)\n        at \norg.apache.catalina.core.StandardService.startStandardService.java:388)\n        at \norg.apache.catalina.core.StandardServer.startStandardServer.java:505)\n        at \norg.apache.catalina.startup.CatalinaService.startCatalinaService.java:261)\n        at \norg.apache.catalina.startup.CatalinaService.executeCatalinaService.java:172)\n\nand so on.", "is_private": false, "bug_id": 5201, "id": 8462, "time": "2001-11-30T06:42:15Z", "creator": "edson.richter@econet-sw.com.br", "creation_time": "2001-11-30T06:42:15Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 5201, "text": "After investigating the probelm, it seems the context class loader is not\nproperly set when reading the sessions (the class loading is done by the\nCatalina loader, which is bad), which could cause the problem described. It\nshould be fixed before 4.0.2, and is very similar to 5330.", "id": 9857, "time": "2002-01-24T15:54:37Z", "creator": "remm@apache.org", "creation_time": "2002-01-24T15:54:37Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 5201, "attachment_id": null, "id": 10235, "time": "2002-02-02T17:55:58Z", "creator": "remm@apache.org", "creation_time": "2002-02-02T17:55:58Z", "is_private": false, "text": "Just to be 100% sure, I tried (successfully) with a simple bean. So the simple\ncase works.\n\nI've looked at the OIS source, and it's a bit unclear why it fails (it depends\non the result of a native method). I suppose it retrieves the context CL\nsomehow, since after that the stack trace is not correct (it should try loading\nthe class with a WebappClassLoader instance).\n\nI've added a patch which fixes the CCL binding in the HEAD branch, but I don't\nthink it will be ported to the main branch at the moment. The nightly for 02/03\nwill have the fix.\n\nPlease confirm it does fix the problem if you can, as I have no means to test it."}]