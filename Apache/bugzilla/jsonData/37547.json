[{"count": 0, "tags": [], "creator": "g.hueller@gmx.at", "attachment_id": null, "is_private": false, "id": 82615, "time": "2005-11-17T12:31:20Z", "bug_id": 37547, "creation_time": "2005-11-17T12:31:20Z", "text": "I wanted to use the \"mail\" core task, and in my configuration there must be \nsome problem with the mail server.\nHowever I have no chance to find out, even when I tried running with \"ant -\ndebug\", because EmailTask eats the true cause and only writes a generic warning \nmessage, even at the highest trace level.\n\nthus my enhancement suggestions:\n1. in EmailTask it says\n        } catch (BuildException e) {\n            log(\"Failed to send email\", Project.MSG_WARN);\nhere it would be nice to have \n            log(\"Failed to send email, reason: \"+e.getMessage(), \nProject.MSG_WARN);\nor better yet an additional line with the stack trace of e.getCause()\nand two lines down same thing.\n\n2. in MimeMailer there is also such a catch block:\n        } catch (MessagingException e) {\n            throw new BuildException(\"Problem while sending mime mail:\", e);\n        } catch (IOException e) {\n            throw new BuildException(\"Problem while sending mime mail:\", e);\n        }\nperhaps you could make this a new BuildException(\"Problem while sending mime \nmail: \"+e.getMessage(), e);\n\n\n3. IF Ant's global log level is set to DEBUG, I would love to see the debug \nmessages of java mail as well, i.e. in MimeMailer (and perhaps somewhere else) \nadd \n        props.put(\"mail.debug\", \"true\");\n(no idea where JavaMail debug output goes to, sorry)\n\n\nThanks from Vienna,\n     Gernot"}, {"count": 1, "tags": [], "bug_id": 37547, "attachment_id": null, "id": 82628, "time": "2005-11-17T21:39:43Z", "creator": "antoine@apache.org", "creation_time": "2005-11-17T21:39:43Z", "is_private": false, "text": "Hello Gernot,\nthanks for the suggestions concerning the code.\n\nNow concerning your problem :\n- do you have mail.jar and activation.jar in the classpath ?\nif you have them, then ant will use them rather than the lightweight mail\nimplementation that ant has\n- can you telnet to your smtp server on port 25 ? is there a problem of proxy ?\nCheers,\nAntoine"}, {"count": 2, "tags": [], "bug_id": 37547, "attachment_id": null, "id": 82781, "time": "2005-11-23T21:15:56Z", "creator": "antoine@apache.org", "creation_time": "2005-11-23T21:15:56Z", "is_private": false, "text": "Hello Gernot,\nI implemented your first suggestion concerning EmailTask. I am not sure if we\nneed to do a change in MimeMailer, I did a test sending email through a phony\nSMTP server and I got this error message :\n\n     [mail] Sending email: Test build\n     [mail] Failed to send email: Sending failed;\n     [mail]   nested exception is:\n     [mail] \tclass javax.mail.MessagingException: Unknown SMTP host:\nsomehost@xyz.com;\n     [mail]   nested exception is:\n     [mail] \tjava.net.UnknownHostException: somehost@xyz.com\n\nThis sounds good enough for me.\n\nThe suggestion to add this line : \n        props.put(\"mail.debug\", \"true\");\nwhen ant runs in debug mode, cannot be implemented easily.\n\nAnt does not have a notion of a global debug level, because ant can run with\ndifferent loggers/listeners which have each their logic concerning which\nmessages they log and which they ignore. "}]