[{"count": 0, "tags": [], "creator": "bpm@ec-group.com", "attachment_id": null, "text": "Inside of a JSP file using the struts-logic.tld, the use of jsp:include tag\ninside of a logic:present tag causes a compiler error.\n\nCODE:\n\n  <logic:present name=\"prospectForm\" property=\"prospectid\">\n       <jsp:include page=\"/prospectmenu.jsp\" flush=\"true\"/>\n  </logic:present>\n\nThe error is:\nGenerated servlet error:\n    [javac] Compiling 1 source file\n/opt2/jakarta-tomcat-4.1.7-LE-jdk14/work/Standalone/localhost/helpdesk/content/p\nrospectform$jsp.java:371:\ninclude(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse,java.lang.String,javax.servlet.jsp.JspWriter,bool\nean) in org.apache.jasper.runtime.JspRuntimeLibrary cannot be applied to\n(javax.servlet.http.HttpServletRequest,javax.servlet.ServletResponse,java.lang.String,j\navax.servlet.jsp.JspWriter,boolean)\n          JspRuntimeLibrary.include(request, response,\"/prospectmenu.jsp\", out,\n true);\n                           ^\n1 error\n\nThe code generated is in correct.  JspRuntimeLibrary.include signature wants\n(HttpServletRequest,HttpServletResponse,String,JspWriter,boolean)\n\nWhat is generated is (HttpServletRequest,ServletResponse,String,JspWriter,boolean)\n\nCODE GENERATED:\nprivate boolean _jspx_meth_logic_present_0(javax.servlet.jsp.tagext.Tag\n                                           _jspx_th_html_form_0,\n                                           javax.servlet.jsp.PageContext\n                                           pageContext)\n          throws Throwable {\n    JspWriter out = pageContext.getOut();\n    HttpServletRequest request =\n(HttpServletRequest)pageContext.getRequest();\n    ServletResponse response = pageContext.getResponse();\n    /* ----  logic:present ---- */\n    {\n\n      [SNIP]\n\n       JspRuntimeLibrary.include(request,response,\"/prospectmenu.jsp\",out,true);\n\n\nThe pageContext.getResponse() needs to be cast to a HttpServletResponse.\nPATCH:\n diff -wruN /var/tmp/bpm/Generator.java.~1~\nsrc/share/org/apache/jasper/compiler/Generator.java \n--- /var/tmp/bpm/Generator.java.~1~     Thu Jun 27 12:32:17 2002\n+++ src/share/org/apache/jasper/compiler/Generator.java Tue Jul 16\n10:46:17 2002\n@@ -1155,7 +1155,7 @@\n                    out.println(\"HttpServletRequest request =\n(HttpServletRequest)pageContext.getRequest();\");\n                }\n                if (n.isHasIncludeAction()) {\n-                   out.println(\"ServletResponse response =\npageContext.getResponse();\");\n+                    out.println(\"HttpServletResponse response =\n(HttpServletResponse)pageContext.getResponse();\");\n                }\n            }", "id": 19779, "time": "2002-07-18T15:21:32Z", "bug_id": 10949, "creation_time": "2002-07-18T15:21:32Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bpm@ec-group.com", "attachment_id": 2396, "text": "Created attachment 2396\npatch to Generator to cast ServletResponse to HttpServletResponse", "id": 19780, "time": "2002-07-18T15:23:10Z", "bug_id": 10949, "creation_time": "2002-07-18T15:23:10Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 10949, "text": "I've also been bit by this bug, on both 4.1.7 and 4.1.8 (july 23rd testrelease).\n\nIs this patch going into the three?", "id": 20351, "time": "2002-07-29T09:12:34Z", "creator": "torgeir@vertech.no", "creation_time": "2002-07-29T09:12:34Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "Fixed, thanks for the patch (and being patient). 4.1.9 will have the fix.", "id": 20776, "time": "2002-08-08T11:01:49Z", "bug_id": 10949, "creation_time": "2002-08-08T11:01:49Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 10949, "attachment_id": null, "id": 20800, "time": "2002-08-08T14:42:30Z", "creator": "remm@apache.org", "creation_time": "2002-08-08T14:42:30Z", "is_private": false, "text": "*** Bug 11490 has been marked as a duplicate of this bug. ***"}]