[{"count": 0, "tags": [], "creator": "christoph.schragen@gmx.at", "attachment_id": null, "id": 108135, "time": "2007-09-13T06:27:26Z", "bug_id": 43384, "creation_time": "2007-09-13T06:27:26Z", "is_private": false, "text": "hi, \n\nin our testplans, we needed a sort of \"semaphore\" mechanism, e.g.: \n- we have problems if more than 10 parallel logins to our webapp exists\n- we have a lot of threads that create, rename and delete channels. one thread \ncan delete a channel that another thread tries to rename.\n\nthese are only 2 examples, but since we implemented this controller, we use it \nvery often.\n\nfor this improvement, JMeterUtils.java has methods for acquiring and releasing \nsemaphores. StandardJMeterEngine.java was patched to clear all semaphores when \nstarting a test (if someone stops the test and there exists a sempaphore that \nwas not released). Moreover, JMeterThread.java was patched, that all semaphores \nin a threadgroup are released if the scheduler stops the test (before releasing \nthe semaphore with a sampler).\n\nacquiring and releasing a semaphore can be either done by calling the 2 methods \nacquireSemaphore and releaseSemaphore, or by using the 2 samplers that come \nwith the patch (Java Request). If you are interested in this Feature, i would \nimplement a SemaphoreSampler with a nice GUI :)\n\nThe sampler works like this: \nWith the \"AcquireSemaphore\" sampler, you can define the begin of the critical \nregion by calling the acquireSemaphore-function. It acquires the given number \nof permits (count-parameter) from this semaphore, blocking until all are \navailable. When leaving the critical region, use the ReleaseSemaphore sampler \nwith the unique semaphore name as parameter. \nsetting the \"count\" parameter to \"1\" would cause this sampler to work like \na \"mutex\". \n\nSemaphores are supported since Java 1.5, so the build script has to be updated \nto build JMeter with Java Version 1.5.\n\ngreets,\n  chris"}, {"count": 1, "text": "Created attachment 20817\nsemaphore addon", "bug_id": 43384, "is_private": false, "id": 108136, "time": "2007-09-13T06:27:58Z", "creator": "christoph.schragen@gmx.at", "creation_time": "2007-09-13T06:27:58Z", "tags": [], "attachment_id": 20817}, {"count": 2, "tags": [], "bug_id": 43384, "attachment_id": null, "is_private": false, "id": 108153, "time": "2007-09-13T07:58:23Z", "creator": "sebb@apache.org", "creation_time": "2007-09-13T07:58:23Z", "text": "JMeter currently requires a minimum of Java 1.4.\nWe don't have plans to require Java 1.5 at present.\n\nHowever the functionality would be useful.\n\nI believe there is a library containing semaphores which runs on 1.4. Provided \nthat the license is compatible, we could use that."}, {"count": 3, "tags": [], "bug_id": 43384, "is_private": false, "text": "See also bug 36227", "id": 111474, "time": "2007-12-05T17:27:48Z", "creator": "sebb@apache.org", "creation_time": "2007-12-05T17:27:48Z", "attachment_id": null}, {"count": 4, "text": "*** Bug 36227 has been marked as a duplicate of this bug. ***", "bug_id": 43384, "attachment_id": null, "id": 126882, "time": "2009-05-08T17:54:39Z", "creator": "sebb@apache.org", "creation_time": "2009-05-08T17:54:39Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 43384, "is_private": false, "text": "(In reply to comment #0)\n> hi, \n> \n> in our testplans, we needed a sort of \"semaphore\" mechanism, e.g.: \n> - we have problems if more than 10 parallel logins to our webapp exists\n\nThat's a bug in the web-app ...\n\n> - we have a lot of threads that create, rename and delete channels. one thread \n> can delete a channel that another thread tries to rename.\n\nAgain that's something that independent users may encounter normally.\n\nSo I don't think these use cases are typical.\n\nAFAICT, in your case, the semaphores are being used to avoid triggering the errors.\n\nHowever, it may still be useful as a way of configuring a test.\n\nI'm not sure that a sampler is the correct test element to use; that needs to be given more thought. Would a Timer be better? After all, that's the effect of the semaphore.", "id": 152637, "time": "2012-01-09T16:38:20Z", "creator": "sebb@apache.org", "creation_time": "2012-01-09T16:38:20Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 43384, "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of bug 56728 ***", "id": 178826, "time": "2014-10-29T13:39:28Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-10-29T13:39:28Z", "attachment_id": null}]