[{"count": 0, "tags": [], "bug_id": 22087, "is_private": false, "id": 42011, "creation_time": "2003-08-03T07:42:38Z", "time": "2003-08-03T07:42:38Z", "creator": "aroe@cybertek-systems.com", "text": "Using Tomcat V 4.1.27 or V5.05alpha on a windows 2003 advanced server running \nIIS v6.0 The ISAPI_Redirector quits after processing URI map.  The \nHTTPEXTENSION process does not start. here my entire log (as you can see it \njsut quits)\n\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (1018)]: Using registry.\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (1020)]: Using log file \nD:\\tcat4127\\logs\\jk_iis.log.\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (1021)]: Using log level 0.\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (1022)]: Using extension \nuri /tomcat/isapi_redirector.dll.\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (1023)]: Using worker file \nD:\\tcat4127\\conf\\workers.properties.\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (1024)]: Using worker mount file \nD:\\tcat4127\\conf\\uriworkermap.properties.\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (1025)]: Using uri select 0.\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (172)]: Into \njk_uri_worker_map_t::uri_worker_map_alloc\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (375)]: Into \njk_uri_worker_map_t::uri_worker_map_open\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (396)]: \njk_uri_worker_map_t::uri_worker_map_open, rule map size is 6\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (321)]: Into \njk_uri_worker_map_t::uri_worker_map_open, match \nrule /extranet/contents/=testWorker was added\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (299)]: Into \njk_uri_worker_map_t::uri_worker_map_open, suffix \nrule /extranet/contents/.html=testWorker was added\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (299)]: Into \njk_uri_worker_map_t::uri_worker_map_open, suffix \nrule /extranet/contents/.jsp=testWorker was added\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (321)]: Into \njk_uri_worker_map_t::uri_worker_map_open, match \nrule /www.cyberteksystems.biz/extranet/flashservices/=testWorker was added\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (321)]: Into \njk_uri_worker_map_t::uri_worker_map_open, match \nrule /www.cyberteksystems.biz/extranet/contents/=testWorker was added\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (299)]: Into \njk_uri_worker_map_t::uri_worker_map_open, suffix \nrule /www.cyberteksystems.biz/extranet/contents/.html=testWorker was added\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (408)]: Into \njk_uri_worker_map_t::uri_worker_map_open, there are 6 rules\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (422)]: \njk_uri_worker_map_t::uri_worker_map_open, done\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (88)]: Into wc_open\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (224)]: Into build_worker_map, \ncreating 1 workers\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (230)]: build_worker_map, creating \nworker testWorker\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (148)]: Into wc_create_worker\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (260)]: Factory :ajp12\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (260)]: Factory :ajp13\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (164)]: wc_create_worker, about to \ncreate instance testWorker of ajp13\n[Sun Aug 03 03:23:30 2003]  [jk_ajp13_worker.c (108)]: Into ajp13_worker_factory\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (173)]: wc_create_worker, about to \nvalidate and init testWorker\n[Sun Aug 03 03:23:30 2003]  [jk_ajp_common.c (1206)]: Into jk_worker_t::validate\n[Sun Aug 03 03:23:30 2003]  [jk_ajp_common.c (1226)]: In jk_worker_t::validate \nfor worker testWorker contact is localhost:8009\n[Sun Aug 03 03:23:30 2003]  [jk_ajp_common.c (1254)]: Into jk_worker_t::init\n[Sun Aug 03 03:23:30 2003]  [jk_ajp_common.c (1274)]: In jk_worker_t::init, \nsetting socket timeout to 0\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (189)]: wc_create_worker, done\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (240)]: build_worker_map, removing old \ntestWorker worker \n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (252)]: build_worker_map, done\n[Sun Aug 03 03:23:30 2003]  [jk_worker.c (111)]: wc_open, done 1\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (655)]: Detected IIS >= 5.0\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (696)]: HttpFilterProc started\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (759)]: In HttpFilterProc \nVirtual Host redirection \nof /192.168.123.5/extranet/contents/CybertekSystems3.html\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (460)]: Into \njk_uri_worker_map_t::map_uri_to_worker\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (477)]: Attempting to map \nURI '/192.168.123.5/extranet/contents/CybertekSystems3.html'\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (599)]: \njk_uri_worker_map_t::map_uri_to_worker, done without a match\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (765)]: In HttpFilterProc test \nDefault redirection of /extranet/contents/CybertekSystems3.html\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (460)]: Into \njk_uri_worker_map_t::map_uri_to_worker\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (477)]: Attempting to map \nURI '/extranet/contents/CybertekSystems3.html'\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (502)]: \njk_uri_worker_map_t::map_uri_to_worker, Found a context match testWorker -\n> /extranet/contents/\n[Sun Aug 03 03:23:30 2003]  [jk_uri_worker_map.c (558)]: \njk_uri_worker_map_t::map_uri_to_worker, Found a suffix match testWorker -> \n*.html\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (775)]: HttpFilterProc \n[/extranet/contents/CybertekSystems3.html] is a servlet url - should redirect \nto testWorker\n[Sun Aug 03 03:23:30 2003]  [jk_isapi_plugin.c (838)]: HttpFilterProc check if \n[/extranet/contents/CybertekSystems3.html] is points to the web-inf directory\n\nI would appreciate it if any of you could help resolve this I have a very big \nproject to work on that must run on windows 2003.  Thanks", "attachment_id": null}, {"count": 1, "tags": [], "text": "We are experiencing similar issues.\nTomcat works ok on http://localhost:8080 however there is no connection between\nIIS and Tomcat. \nIIS can serve static HTML pages but does not redirect JSP pages to Tomcat.", "attachment_id": null, "id": 43238, "creator": "tmg@cnicorp.com", "time": "2003-08-25T14:09:02Z", "bug_id": 22087, "creation_time": "2003-08-25T14:09:02Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 22087, "attachment_id": null, "text": "After Reading Microsoft website about IIS 6 I came across this:\nHOW TO: Enable and Disable ISAPI Extensions and CGI Applications in IIS 6.0\nhttp://support.microsoft.com/default.aspx?scid=kb;en-us;328360\n\n\nThey explain how set up IIS to enable ISAPI Extensions via command line. \nHowever I found that you can use the IIS Manager GUI to achieve the same\nresults. (and it's much easier)\n\n\nNOTE: Before you can enable or disable a Web service extension, you must add it\nto the Web Service Extension Restriction List. \nFor additional information, read the article in the Microsoft Knowledge Base: \nhttp://support.microsoft.com/default.aspx?scid=kb;EN-US;328419\n\n\nGood Luck!\nTim\n\n\n\n\n\n", "id": 43249, "time": "2003-08-25T17:06:57Z", "creator": "tmg@cnicorp.com", "creation_time": "2003-08-25T17:06:57Z", "is_private": false}, {"count": 3, "tags": [], "text": "I was able to setup the ISAPI extensions just fine. IIS works it's just that \nTomcat will not initiate the \"HTTP Extension\" process after it receives the \nredirect... it just dies out.....  thanks for the input though I appreciate \nthe ideas and the help", "attachment_id": null, "id": 43251, "creator": "aroe@cybertek-systems.com", "time": "2003-08-25T17:20:21Z", "bug_id": 22087, "creation_time": "2003-08-25T17:20:21Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 22087, "is_private": false, "id": 43252, "creation_time": "2003-08-25T17:40:43Z", "time": "2003-08-25T17:40:43Z", "creator": "tmg@cnicorp.com", "text": "How is your server.xml setup?\n\nThis is the connector we are using:\n\n<!-- Define a non-SSL Coyote HTTP/1.1 Connector on port 8080 -->\n<Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\nport=\"8080\" minProcessors=\"5\" maxProcessors=\"75\"\nenableLookups=\"true\" redirectPort=\"8443\"\nacceptCount=\"10\" debug=\"0\" connectionTimeout=\"20000\"\nuseURIValidationHack=\"false\" />\n\n<!-- Define a Coyote/JK2 AJP 1.3 Connector on port 8009 -->\n<Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\nport=\"8009\" minProcessors=\"5\" maxProcessors=\"75\"\nenableLookups=\"true\" redirectPort=\"8443\"\nacceptCount=\"10\" debug=\"0\" connectionTimeout=\"20000\"\nuseURIValidationHack=\"false\"\nprotocolHandlerClassName=\"org.apache.jk.server.JkCoyoteHandler\"/>\n\n**********\nOur Doc Root for IIS is:\nC:\\WebRoot\\Website\nWhile the Context is:\n\n<Context path=\"/Website\" docBase=\"C:\\WebRoot\\Website\" debug=\"9\" \n  reloadable=\"false\" crossContext=\"false\">\n  <Logger className=\"org.apache.catalina.logger.FileLogger\" prefix=\"Website_log\"\n   suffix=\".txt\" timestamp=\"true\" verbosityLevel=\"DEBUG\"/>\n</Context>\n\n\n\n\n##################  Our uriworkermap.properties ########\n# Default worker to be used through our mappings\n  default.worker=ajp13\n# Root context mounts for Tomcat\n  /*.jsp=$(default.worker)\n  j_security_check=$(default.worker)\n#######################################################\n# Configuration for the Website context starts.\n#######################################################\n# The following line mounts all JSP file and the /servlet/ uri to tomcat\n  /Website/Servlets/*=$(default.worker)\n  /Website/*.jsp=$(default.worker)\n  /Website/*.do=$(default.worker)\n  /Website/LoginFunctions/j_security_check=$(default.worker)\n##################  END uriworkermap.properties ########\n\n\n# workers.properties -\n#\n# This file provides jk derived plugins with with the needed information to\n# connect to the different tomcat workers.\n#\nworkers.tomcat_home=C:\\Program Files\\Apache Group\\Tomcat 4.1\nps=\\\nworker.list=ajp13\nworker.ajp13.port=8009\nworker.ajp13.host=localhost\nworker.ajp13.type=ajp13\nworker.ajp13.lbfactor=1\n#------ END DEFAULT ajp13 WORKER DEFINITION --------------------------\n\n\n\nHope this helps,\nTim\n\n\n\n", "attachment_id": null}, {"count": 5, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "id": 51953, "time": "2004-02-09T00:34:23Z", "bug_id": 22087, "creation_time": "2004-02-09T00:34:23Z", "is_private": false, "text": "Please use the tomcat-user list to refine how to reproduce the problem."}]