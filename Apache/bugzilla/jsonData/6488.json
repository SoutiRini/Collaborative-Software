[{"count": 0, "tags": [], "bug_id": 6488, "attachment_id": null, "text": "I just stumbled upon a show-stopper problem with Tomcat 3.3a and Apache\nmod_jk. When refreshing JSPs that referenced static resources (i.e. a CSS\nstylesheet or images), from time to time junk would appear at the top\nof the page, saying \"Error: 304... Location: <page address>\". The said\nstatic resources would not load and the browser would appear to hang\nindefinitely.\n\nI tracked the problem to the method StatusHandler.doService\ndefined in share/org/apache/tomcat/modules/generators/ErrorHandler.java\nWhen the 304 (Not Modified) condition is encountered, this method \ngenerates a message body with the above mentioned \"junk\" and returns\nit to mod_jk.\n\nRFC 2068 states:\n\n   \"If the client has performed a conditional GET request and access is\n   allowed, but the document has not been modified, the server SHOULD\n   respond with this status code. The response MUST NOT contain a\n   message-body.\"\n\nReplacing Tomcat's vanilla ErrorHandler with my own clone with the\nwhole message body generating block omitted if sc == 304 eliminated\nthe problem.\n\nInterestingly, the bug could only be demonstrated with mod_jk + Tomcat,\nbut not when I was using Tomcat alone as a web server.", "id": 10757, "time": "2002-02-15T13:10:54Z", "creator": "jpl@remotejava.com", "creation_time": "2002-02-15T13:10:54Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 6488, "attachment_id": null, "text": "Please give Tomcat 3.3.1 Beta 1 a try.  I believe it contains a fix for this.", "id": 10758, "time": "2002-02-15T13:22:31Z", "creator": "Larry.Isaacs@sas.com", "creation_time": "2002-02-15T13:22:31Z", "is_private": false}, {"count": 2, "text": "I just checked, this bug indeed does not appear in 3.3.1-b1. Thanks.", "bug_id": 6488, "is_private": false, "id": 10759, "time": "2002-02-15T13:45:11Z", "creator": "jpl@remotejava.com", "creation_time": "2002-02-15T13:45:11Z", "tags": [], "attachment_id": null}]