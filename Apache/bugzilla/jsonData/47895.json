[{"count": 0, "attachment_id": null, "bug_id": 47895, "is_private": false, "id": 130631, "time": "2009-09-24T03:49:06Z", "creator": "colin@colin.net.pl", "creation_time": "2009-09-24T03:49:06Z", "tags": [], "text": "Apache incorrectly sends the file content after sending 413 error message, for example:\n\nPOST /robots.txt HTTP/1.0\nContent-Length: -75000000\n\nHTTP/1.1 413 Request Entity Too Large\nDate: Thu, 24 Sep 2009 10:42:30 GMT\nServer: Apache/2.2.11 (Unix)\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>413 Request Entity Too Large</title>\n</head><body>\n<h1>Request Entity Too Large</h1>\nThe requested resource<br />/robots.txt<br />\ndoes not allow request data with POST requests, or the amount of data provided in\nthe request exceeds the capacity limit.\n</body></html>\nUser-agent: *\nDisallow: /d2/\nCrawl-delay: 1\n\nApache should close the connection after sending </html> but it doesn't.\n\nIt's a big problem when PHP scripts are requested with a wrong Content-Length because the source code is sent to a client after the error message:\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>413 Request Entity Too Large</title>\n</head><body>\n<h1>Request Entity Too Large</h1>\nThe requested resource<br />/test.php<br />\ndoes not allow request data with POST requests, or the amount of data\nprovided in\nthe request exceeds the capacity limit.\n</body></html>\n<?php\n$dblogin = 'admin';\n$dbpass = 'secret';\nmysql_connect('localhost', $dblogin, $dbpass);\necho 'some output';\n?>"}, {"count": 1, "tags": [], "bug_id": 47895, "is_private": false, "text": "I can't reproduce this, which leads me to suspect something in your configuration, or PHP.  What happens without mod_php loaded?  Do you have mod_cache loaded?\n\nIf you can reproduce it with no third-party modules loaded, please upload a minimal config to demonstrate it.", "id": 131529, "time": "2009-11-01T11:03:30Z", "creator": "nick@webthing.com", "creation_time": "2009-11-01T11:03:30Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 47895, "is_private": false, "id": 133644, "time": "2010-01-16T02:33:05Z", "creator": "colin@colin.net.pl", "creation_time": "2010-01-16T02:33:05Z", "tags": [], "text": "Without mod_php, the error message is also incorrect:\n\nPOST /forum/index.php HTTP/1.0\nHost: centrump2p.com\nContent-Length: -5000\n\nHTTP/1.1 413 Request Entity Too Large\nDate: Sat, 16 Jan 2010 10:25:44 GMT\nServer: Apache\nVary: Accept-Encoding\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>413 Request Entity Too Large</title>\n</head><body>\n<h1>Request Entity Too Large</h1>\nThe requested resource<br />/php5-cgi/forum/index.php<br />\ndoes not allow request data with POST requests, or the amount of data provided in\nthe request exceeds the capacity limit.\n</body></html>\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>413 Request Entity Too Large</title>\n</head><body>\n<h1>Request Entity Too Large</h1>\n<p>The server encountered an internal error or\nmisconfiguration and was unable to complete\nyour request.</p>\n<p>Please contact the server administrator,\n michkol@gmail.com and inform them of the time the error occurred,\nand anything you might have done that may have\ncaused the error.</p>\n<p>More information about this error may be available\nin the server error log.</p>\n<p>Additionally, a 500 Internal Server Error\nerror was encountered while trying to use an ErrorDocument to handle the request.</p>\n</body></html>\n\nServer configuration: http://colin.az.pl/config.html. No third-party modules are loaded."}, {"count": 3, "attachment_id": null, "bug_id": 47895, "is_private": false, "id": 133864, "time": "2010-01-24T13:32:26Z", "creator": "nick@webthing.com", "creation_time": "2010-01-24T13:32:26Z", "tags": [], "text": "(In reply to comment #2)\n> Without mod_php, the error message is also incorrect:\n\nAre you sure that's without mod_php?  You've got mod_php configured (though using AddType, which lives on in undeath since it ceased to be the right thing with Apache 1.1.0 back in about 1996).\n\n> <!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n> <html><head>\n> <title>413 Request Entity Too Large</title>\n> </head><body>\n> <h1>Request Entity Too Large</h1>\n> The requested resource<br />/php5-cgi/forum/index.php<br />\n> does not allow request data with POST requests, or the amount of data provided\n> in\n> the request exceeds the capacity limit.\n> </body></html>\n\nWhere does that come from?  Apache's canned 413 response should have slightly different body text:\n\n    The <!--#echo var=\"REDIRECT_REQUEST_METHOD\" -->\n    method does not allow the data transmitted, or the data volume\n    exceeds the capacity limit.\n\nYours seems to me the better text, if we ignore the continuation (which rings a bell: I thought the double-errordocument was a bug we'd fixed).\n\n> Server configuration: http://colin.az.pl/config.html. No third-party modules\n> are loaded."}, {"count": 4, "attachment_id": null, "bug_id": 47895, "is_private": false, "id": 133865, "time": "2010-01-24T13:50:29Z", "creator": "colin@colin.net.pl", "creation_time": "2010-01-24T13:50:29Z", "tags": [], "text": "mod_php is not loaded. I use AddType because the Action directive requires it.\n\nLoaded modules:\nactions alias auth_basic authn_file authz_default authz_host authz_user autoindex cgi deflate dir headers mime rewrite setenvif status\n\nThe 413 response comes from:\nhttpd-2.2.9/modules/http/http_protocol.c:983:                           \" requests, or the amount of data provided in\\n\""}, {"count": 5, "tags": [], "bug_id": 47895, "text": "I can reproduce this bug on your server:\nPOST / HTTP/1.0\nHost: webthing.com\nContent-Length: -10000000\n\nHTTP/1.1 413 Request Entity Too Large\nDate: Sun, 24 Jan 2010 22:41:50 GMT\nServer: Apache/2.2.9 (Unix) DAV/2 SVN/1.4.6\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>413 Request Entity Too Large</title>\n</head><body>\n<h1>Request Entity Too Large</h1>\nThe requested resource<br />/index.html<br />\ndoes not allow request data with POST requests, or the amount of data provided in\nthe request exceeds the capacity limit.\n<hr>\n<address>Apache/2.2.9 (Unix) DAV/2 SVN/1.4.6 Server at webthing.com Port 80</address>\n</body></html>\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>413 Request Entity Too Large</title>\n</head><body>\n<h1>Request Entity Too Large</h1>\n<p>The server encountered an internal error or\nmisconfiguration and was unable to complete\nyour request.</p>\n<p>Please contact the server administrator,\n webthing@webthing.com and inform them of the time the error occurred,\nand anything you might have done that may have\ncaused the error.</p>\n<p>More information about this error may be available\nin the server error log.</p>\n<hr>\n<address>Apache/2.2.9 (Unix) DAV/2 SVN/1.4.6 Server at webthing.com Port 80</address>\n</body></html>", "id": 133867, "time": "2010-01-24T14:47:26Z", "creator": "colin@colin.net.pl", "creation_time": "2010-01-24T14:47:26Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 47895, "is_private": false, "id": 133870, "time": "2010-01-24T18:58:42Z", "creator": "nick@webthing.com", "creation_time": "2010-01-24T18:58:42Z", "tags": [], "text": "It's a fair cop, guv.\n\nI'm sure we fixed a similar bug a while back, but you seem to have found another.  Bug me if I let this drop now you've provided the reproducible test case!"}, {"count": 7, "tags": [], "bug_id": 47895, "attachment_id": null, "text": "I am facing this bug now.Has the reason for this bug is found?\nphp53u-5.3.21\nhttpd-2.2.26", "id": 172540, "time": "2014-01-20T12:47:44Z", "creator": "kalyanceg@gmail.com", "creation_time": "2014-01-20T12:47:44Z", "is_private": false}]