[{"count": 0, "tags": [], "creator": "mdnteo@gmail.com", "text": "I'm working with mod_authnz_ldap, mod_ssl authenticating with certificates and I've got some questions. This is my situation (some directives are omitted)\n ------------------------------------------------------------------------------------------------\nSSLVerifyClient require\nSSLOptions +ExportCertData +StdEnvVars +StrictRequire +FakeBasicAuth\n \n<Location /private>\n        SSLRequireSSL\n        AuthType basic\n        AuthName \"private area\"\n        AuthzLDAPAuthoritative off\n        AuthBasicProvider       ldap\n        AuthLDAPBindDN          uid=myuser,dc=example,dc=com\n        AuthLDAPBindPassword    mypassword\n        AuthLDAPUrl             \"ldap://myldaphost:389/ou=users,dc=example,dc=com?subjectDN?sub?(objectclass=*)\"\n        Require ldap-attribute employeeType=active\n</Location>\n------------------------------------------------------------------------------------------------\n \nThis configuration is working, the user in found in LDAP searching for his \"subjectDN\", as set by the option \"+FakeBasicAuth\", but I want to make the LDAP SEARCH not with the subjectDN, but other fields of the certificate. As described in the documentation, I can do it with \"SSLUSERNAME\"\n \nIf I use these options:\n------------------------------------------------------------------------------------------------\nSSLVerifyClient require\nSSLUserName SSL_CLIENT_S_DN_CN \nSSLOptions +ExportCertData +StdEnvVars +StrictRequire -FakeBasicAuth\n \n<Location /private>\n        SSLRequireSSL\n        AuthType basic\n        AuthName \"private area\"\n        AuthzLDAPAuthoritative off\n        AuthBasicProvider       ldap\n        AuthLDAPBindDN          uid=myuser,dc=example,dc=com\n        AuthLDAPBindPassword    mypassword\n        AuthLDAPUrl             \"ldap://myldaphost:389/ou=users,dc=example,dc=com?cn?sub?(objectclass=*)\"\n        Require ldap-attribute employeeType=active\n</Location>\n------------------------------------------------------------------------------------------------\n \nThe mod_ssl does his work, as in my log files I see the \"CN\" as \"%u\", but as soon as I call \"/private\", the \"%u\" becomes an empty variable and I can't use it in the next authentication module. The mod_authnz_ldap does a ldap query (I check it in my ldap logs) with an empty CN, or any other parameter I try to set (usercertificate, email...)", "id": 118188, "time": "2008-07-02T02:27:37Z", "bug_id": 45325, "creation_time": "2008-07-02T02:27:37Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 118190, "time": "2008-07-02T04:17:12Z", "bug_id": 45325, "creation_time": "2008-07-02T04:17:12Z", "is_private": false, "text": "See discussion here:\n\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=31418\n\nSSLUserName does not appear to be designed to interoperate with any other authn/authz. It's meant for logging/CGI.\n\nIMO I believe there is a need for a standalone module that does authn/authz on certificates. It would behave midway between SSLFakeBasicAuth and SSLUsername.\n"}, {"count": 2, "tags": [], "creator": "sf@sfritsch.de", "text": "\n\n*** This bug has been marked as a duplicate of bug 31418 ***", "id": 147618, "time": "2011-06-29T18:38:05Z", "bug_id": 45325, "creation_time": "2011-06-29T18:38:05Z", "is_private": false, "attachment_id": null}]