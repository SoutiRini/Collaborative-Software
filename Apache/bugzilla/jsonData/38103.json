[{"count": 0, "tags": [], "bug_id": 38103, "text": "HTTPSampler2 sets cookies using\n\nmethod.setRequestHeader(\"Cookie\", cookieHeader);\n\nunfortunately \"Cookie\" parameter is replaced with different content before\nrequest is sent. It is done somewhere in httpclient. If we replace above line\nwith something like this:\n\nhttpState.addCookie(cookie);\n\nit seems that it helps.\n\nIn addition I think that cookies having the same name and domain should be\nreplaced with new ones instead of being added to the list of current ones.\n\nMoreover HTTPSampler2 is not able to use cookies saved by HTTPSampler, so it is\nnot possible to mix HTTPSampler with HTTPSampler2.\n\nQuery data are incorrectly saved in 'View results in tree' listener - it looks\ndifferently than in HTTPSampler.\n\nRequest are not repeated if there have been socket creation exceptions - I guess\nthat after such exception request should be resent instead of throwing exception.", "id": 84140, "time": "2006-01-02T21:39:14Z", "creator": "joanna@ais.pl", "creation_time": "2006-01-02T21:39:14Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "joanna@ais.pl", "attachment_id": 17309, "id": 84141, "time": "2006-01-02T21:43:27Z", "bug_id": 38103, "creation_time": "2006-01-02T21:43:27Z", "is_private": false, "text": "Created attachment 17309\nSimple work-around\n\nThis is a simple work-around I believe that there is a better solution (it\nworks for me)"}, {"count": 2, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 84156, "time": "2006-01-03T13:53:59Z", "bug_id": 38103, "creation_time": "2006-01-03T13:53:59Z", "is_private": false, "text": "I made some changes to HTTP2 cookie handling since 2.1.1 - these are in the \nnightly builds.\n\nPlease could you check if the problem still applies?"}, {"count": 3, "tags": [], "bug_id": 38103, "is_private": false, "text": "It looks much better now, but it is not resolved yet.\n\nHTTPSampler2 still cannot be mixed with HTTPSampler. Currently it is not\npossible to post one request using HTTPSampler then another one using\nHTTPSampler2 and have the same session be used.\n\nIn addtion, every exception during socket creation is treated as error. Please,\nnote, that when there are many threads working in the system it may not be\npossible to create another socket - there simply may not be enough available\nfree ports in the system. IMHO sampler should try to bind to a socket several\ntimes before exception is rised.\n", "id": 84348, "time": "2006-01-08T22:26:49Z", "creator": "joanna@ais.pl", "creation_time": "2006-01-08T22:26:49Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 38103, "attachment_id": null, "id": 84371, "creation_time": "2006-01-09T14:32:52Z", "time": "2006-01-09T14:32:52Z", "creator": "sebb@apache.org", "text": "(In reply to comment #3)\n> It looks much better now, but it is not resolved yet.\n\nIs the original problem solved by the nightly build?\n\n> HTTPSampler2 still cannot be mixed with HTTPSampler. Currently it is not\n> possible to post one request using HTTPSampler then another one using\n> HTTPSampler2 and have the same session be used.\n\nThis is impossible - there is no access to the sockets used by HTTPSampler.\n\n> In addtion, every exception during socket creation is treated as error. \nPlease,\n> note, that when there are many threads working in the system it may not be\n> possible to create another socket - there simply may not be enough available\n> free ports in the system. IMHO sampler should try to bind to a socket several\n> times before exception is rised.\n\nPlease raise this as a separate enhancement request.\n", "is_private": false}, {"count": 5, "tags": [], "bug_id": 38103, "text": "(In reply to comment #4)\n> (In reply to comment #3)\n> > It looks much better now, but it is not resolved yet.\n> Is the original problem solved by the nightly build?\n\nyes\n\n> > HTTPSampler2 still cannot be mixed with HTTPSampler. Currently it is not\n> > possible to post one request using HTTPSampler then another one using\n> > HTTPSampler2 and have the same session be used.\n> This is impossible - there is no access to the sockets used by HTTPSampler.\n\nI'm not talking about using the same sockets. I'm talking about reusing by \nHTTPSampler2 cookies saved by HTTPSampler - currently it is not working. If I \ncreate a test plan which consists of HTTPSampler, HTTPSampler2 and a \nHTTPCookieManager it will not be possible for HTTPSampler2 to 'continue' flow \nstarted by HTTPSampler - it will simply 'forget' about SESSIONID parameter. In \na result request sent by HTTPSampler2 will be treated as a new one not related \nto request sent by HTTPSampler before.\n\n> > In addtion, every exception during socket creation is treated as error. \n> Please,\n> > note, that when there are many threads working in the system it may not be\n> > possible to create another socket - there simply may not be enough \navailable\n> > free ports in the system. IMHO sampler should try to bind to a socket \nseveral\n> > times before exception is rised.\n> Please raise this as a separate enhancement request.\n\nwill do\n", "id": 84489, "time": "2006-01-11T21:53:13Z", "creator": "joanna@ais.pl", "creation_time": "2006-01-11T21:53:13Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 38103, "text": "(In reply to comment #5)\n> (In reply to comment #4)\n> > (In reply to comment #3)\n\n...\n\n> I'm not talking about using the same sockets. I'm talking about reusing by \n> HTTPSampler2 cookies saved by HTTPSampler - currently it is not working. If I \n> create a test plan which consists of HTTPSampler, HTTPSampler2 and a \n> HTTPCookieManager it will not be possible for HTTPSampler2 to 'continue' flow \n> started by HTTPSampler - it will simply 'forget' about SESSIONID parameter. In \n> a result request sent by HTTPSampler2 will be treated as a new one not related \n> to request sent by HTTPSampler before.\n\nSorry, I confused session with connection.\n\nPlease raise a new bug for this, and attach a sample plan to it.\n\nClosing the original bug as it is fixed.", "count": 6, "id": 84501, "time": "2006-01-12T02:04:11Z", "creator": "sebb@apache.org", "creation_time": "2006-01-12T02:04:11Z", "is_private": false}]