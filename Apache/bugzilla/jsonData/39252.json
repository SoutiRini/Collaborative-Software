[{"count": 0, "tags": [], "bug_id": 39252, "attachment_id": null, "id": 87696, "time": "2006-04-08T02:08:26Z", "creator": "shahs@yahoo-inc.com", "creation_time": "2006-04-08T02:08:26Z", "is_private": false, "text": "Would it be possible to modify SoapSampler.java to set the Sampler Data of the\nSampleResult to XmlData provided by the GUI?  This would involve changing the\nlast few lines of th e\npublic SampleResult sample(Entry e) method to :\n\n\tpublic SampleResult sample(Entry e) {\n    URL url = null;\n    try {\n\t\t\turl = new URL(getURLData());\n\t\t\tsetDomain(url.getHost());\n\t\t\tsetPort(url.getPort());\n\t\t\tsetProtocol(url.getProtocol());\n\t\t\tsetMethod(POST);\n\t\t\tif (url.getQuery() != null && url.getQuery().compareTo(\"\") != 0) {\n\t\t\t\tsetPath(url.getPath() + \"?\" + url.getQuery());\n\t\t\t} else {\n\t\t\t\tsetPath(url.getPath());\n\t\t\t}\n\t\t\t// make sure the Post header is set\n\t\t\tURLConnection conn = url.openConnection();\n\t\t\tsetPostHeaders(conn);\n\t\t} catch (MalformedURLException e1) {\n\t\t\tlog.error(\"Bad url: \" + getURLData(), e1);\n\t\t} catch (IOException e1) {\n\t\t\tlog.error(\"Bad url: \" + getURLData(), e1);\n\t\t}\n\t\tHTTPSampleResult result = (HTTPSampleResult)super.sample(e);\n    result.setDataType(SampleResult.TEXT);\n    if(url != null) {\n      result.setSamplerData(\"\\n\" + getXmlData());\n    }\n    return result;\n  }"}, {"count": 1, "tags": [], "bug_id": 39252, "attachment_id": null, "id": 87715, "time": "2006-04-10T01:47:56Z", "creator": "sebb@apache.org", "creation_time": "2006-04-10T01:47:56Z", "is_private": false, "text": "Thanks for the suggestion - it has been included in the 2.1 branch code, and\nwill be included in JMeter 2.1.2.\n\nIf you want to give it a try, the nightly 2-1.20060410 has the fix included."}, {"count": 2, "tags": [], "bug_id": 39252, "attachment_id": null, "is_private": false, "id": 87917, "time": "2006-04-13T15:25:16Z", "creator": "shahs@yahoo-inc.com", "creation_time": "2006-04-13T15:25:16Z", "text": "Hi, Thanks for applying the patch, but it seems like it the patch I submitted\ndoes not work against the current nightly builds.  I had tested it against 2.1.1\nrelease.  The following fix I think in the  public SampleResult sample(Entry e)\nshould be changed to:\n\n// Bug 39252 set SoapSampler sample result from XML data\n/*\nSampleResult sampleResult = super.sample(e);\nsampleResult.setDataType(SampleResult.TEXT);\nsampleResult.setSamplerData(getXmlData());\nreturn sampleResult;\n*/\nHTTPSampleResult result = (HTTPSampleResult)super.sample(e);\nresult.setDataType(SampleResult.TEXT);\nresult.setSamplerData(\"\\n\" + getXmlData());\nresult.setQueryString(\"\\n\" + getXmlData());\nreturn result;"}, {"count": 3, "tags": [], "bug_id": 39252, "attachment_id": null, "id": 87920, "time": "2006-04-13T16:08:26Z", "creator": "sebb@apache.org", "creation_time": "2006-04-13T16:08:26Z", "is_private": false, "text": "(In reply to comment #2)\n> Hi, Thanks for applying the patch, but it seems like it the patch I submitted\n> does not work against the current nightly builds.  I had tested it against \n2.1.1\n> release.  The following fix I think in the  public SampleResult sample(Entry \ne)\n> should be changed to:\n> // Bug 39252 set SoapSampler sample result from XML data\n> /*\n> SampleResult sampleResult = super.sample(e);\n> sampleResult.setDataType(SampleResult.TEXT);\n> sampleResult.setSamplerData(getXmlData());\n> return sampleResult;\n> */\n> HTTPSampleResult result = (HTTPSampleResult)super.sample(e);\n> result.setDataType(SampleResult.TEXT);\n> result.setSamplerData(\"\\n\" + getXmlData());\n\nThe above has been done (but I removed the \\n prefix)\n\n> result.setQueryString(\"\\n\" + getXmlData());\n\nThis was not done, as it was not asked for - see your original posting.\n\nWhy do you need both set to the same value?\n\n> return result;"}, {"count": 4, "text": "(In reply to comment #3)\n> (In reply to comment #2)\n> > HTTPSampleResult result = (HTTPSampleResult)super.sampe(e);\n> > result.setDataType(SampleResult.TEXT);\n> > result.setSamplerData(\"\\n\" + getXmlData());\n> \n> The above has been done (but I removed the \\n prefix)\n> \n> > result.setQueryString(\"\\n\" + getXmlData());\n> \n> This was not done, as it was not asked for - see your original posting.\n> \n> Why do you need both set to the same value?\n> \n\nI'm not sure, but it only worked in the nightlies when I coded it as above.\n\nThanks", "creator": "shahs@yahoo-inc.com", "is_private": false, "id": 87922, "time": "2006-04-13T16:13:55Z", "bug_id": 39252, "creation_time": "2006-04-13T16:13:55Z", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "sebb@apache.org", "is_private": false, "count": 5, "id": 87940, "time": "2006-04-13T18:37:33Z", "bug_id": 39252, "creation_time": "2006-04-13T18:37:33Z", "text": "OK, I've found the problem.\n\nThe HTTPSample assumes that POST data is stored in the QueryString (dunno \nwhy); and when it overrides getSampleData it ignores samplerData entirely, so \nthe information is not shown in the Tree View pane.\n\nThis probably needs tidying up a bit; in the meanwhile, I've saved the data to \nthe query string as well.\n\nPerhaps you could now try the new nightly?\nAlso, please check that the correct information is being written to the JTL \nfiles"}, {"attachment_id": null, "tags": [], "bug_id": 39252, "is_private": false, "count": 6, "id": 88104, "time": "2006-04-14T21:37:41Z", "creator": "shahs@yahoo-inc.com", "creation_time": "2006-04-14T21:37:41Z", "text": "(In reply to comment #5)\n> OK, I've found the problem.\n> \n> The HTTPSample assumes that POST data is stored in the QueryString (dunno \n> why); and when it overrides getSampleData it ignores samplerData entirely, so \n> the information is not shown in the Tree View pane.\n> \n> This probably needs tidying up a bit; in the meanwhile, I've saved the data to \n> the query string as well.\n> \n> Perhaps you could now try the new nightly?\n> Also, please check that the correct information is being written to the JTL \n> files\n\nI tried out the new nightly it looks correct.  Thanks a lot!\n"}]