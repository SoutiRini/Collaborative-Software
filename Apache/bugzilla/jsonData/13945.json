[{"count": 0, "tags": [], "text": "Target:  ibm-http-server (apache 1.3.xx) \nFlow:\n1- Browser sends request to proxy\n2- Proxy passes request for PDF doc to IBM\n3- IBM ws starts returning the data to the proxy using content-length headers \n(HTTP/1.1)\n4- When the complete document is retrieved to the proxy (this is also a bit \nconfusing but never mind) the 200 OK reply from the proxy to the browser is \nreturned with the following headers:\nHTTP/1.1 200 OK\\r\\n\nDate: (correct date)\nServer: IBM_HTTP_SERVER/1.3.19.2 Apache/1.3.20 (Unix)\\r\\n\nLast-Modified: (last modified date)\nETag: \"21aca-49.........\"\\r\\n\nAccept-Ranges: bytes\\r\\n\nContent-Type: application/pdf\\r\\n\nConnection: close\\r\\n\n\\r\\n\ndata\n....\n\nNow IE either closes the connection and re-tries (user still dont have the \ndocument) the get, or sends a (reset) On TCP level and retries the get.\n\nMy guess is that IE 5 does not understand that it is a chuncked encoding apache \nwants to perform because the Transfer-Encoding: chunked header is missing.\n\nI will send the complete sniffer file in \"any\" format (ethereal / tcpdump \nsnoop ..) on request for further analysis.\nRegards,\nDario.", "is_private": false, "bug_id": 13945, "id": 25147, "time": "2002-10-24T19:15:17Z", "creator": "dario.franceschi.k@nordea.se", "creation_time": "2002-10-24T19:15:17Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Some more details.\nThe missing Transfer-Encoding header is not the real/ only problem here.\n(tryed my luck by adding it with mod_headers with no success)\n\nForcing my browser to 1.0 with the BrowserMatch directive did not help either.\n(Sends same reply (should not the 1.0 conversation use content-length?? Don\u00b4t \nthink chunked is allowed in 1.0 ...)).\n\nThe \"body\" does not contain the chunked headers or trailers length\\r\\n, which \nleads me to suspect that chunked encoding is not implemented in mod_proxy (if \nit at all should be?) but the content-length headers are taken away for some \nreason.\n\nSame problem in 2.0.42. Reverting back to 2.0.40 where content-length is passed.\nThe \"only\" problem there is the \"long\" wait (only when the complete file is \nbuffered at the proxy, does the client get the 200 ok reply with content-length)\nfor big files.\n\nShould I go back to V1.3 if I want to run a production proxy?\n\nRegards,\nDario.", "attachment_id": null, "bug_id": 13945, "id": 25156, "time": "2002-10-24T22:13:34Z", "creator": "dario.franceschi.k@nordea.se", "creation_time": "2002-10-24T22:13:34Z", "is_private": false}, {"count": 2, "tags": [], "creator": "minfrin@sharp.fm", "attachment_id": null, "is_private": false, "id": 29790, "time": "2003-01-21T15:30:24Z", "bug_id": 13945, "creation_time": "2003-01-21T15:30:24Z", "text": "Proxy previously stripped the Content-Length header from responses - this has\nbeen changed.\n\nPlease check if this bug still exists in v2.0.45-dev, and reopen this bug if it\ndoes.\n"}]