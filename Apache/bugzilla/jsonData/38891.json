[{"count": 0, "tags": [], "bug_id": 38891, "attachment_id": null, "id": 86600, "time": "2006-03-08T11:10:26Z", "creator": "ullenboom@gmail.com", "creation_time": "2006-03-08T11:10:26Z", "is_private": false, "text": "While transforming a wmf file -- which is exported from a MS ppt -- squiggle \nand Adobe isn't able to load and render is properly. The loading can be fixed \neasy, because both readers do not accept the encoding Cp1252. After deleting \nencoding=\"Cp1252\" in the svg file Adobe and squiggle will show \u201csomething\u201d but \nbroken:\n\n- The text has strange positions\n- No font information is kept\n- No graphics are embedded or linked\n- No transparency of elements\n\nI placed the examples here:\n\nhttp://www.java-tutor.com/docs/p.ppt\nhttp://www.java-tutor.com/docs/p.wmf\nhttp://www.java-tutor.com/docs/p.svg\n\nI'm using WMFTranscoder form 1.6. I tried version batik-src-06-03-08.zip too, \nbut got a\n\nProcessing : p.wmf...Exception in thread \"main\" java.lang.NullPointerException\n\tat org.apache.batik.svggen.ImageHandlerBase64Encoder.encodeImage\n(ImageHandlerBase64Encoder.java:156)\n\tat org.apache.batik.svggen.ImageHandlerBase64Encoder.handleHREF\n(ImageHandlerBase64Encoder.java:132)\n\tat org.apache.batik.svggen.DefaultImageHandler.handleImage\n(DefaultImageHandler.java:95)\n\tat org.apache.batik.svggen.SimpleImageHandler.handleImage\n(SimpleImageHandler.java:125)\n\tat org.apache.batik.svggen.SVGTexturePaint.toSVG\n(SVGTexturePaint.java:135)\n\tat org.apache.batik.svggen.SVGPaint.toSVG(SVGPaint.java:133)\n\tat org.apache.batik.svggen.SVGPaint.toSVG(SVGPaint.java:115)\n\tat org.apache.batik.svggen.SVGGraphicContextConverter.toSVG\n(SVGGraphicContextConverter.java:100)\n\tat org.apache.batik.svggen.DOMGroupManager.addElement\n(DOMGroupManager.java:168)\n\tat org.apache.batik.svggen.SVGGraphics2D.fill(SVGGraphics2D.java:1395)\n\tat org.apache.batik.transcoder.wmf.tosvg.WMFPainter.paint\n(WMFPainter.java:1070)\n\tat org.apache.batik.transcoder.wmf.tosvg.WMFPainter.paint\n(WMFPainter.java:448)\n\tat org.apache.batik.transcoder.wmf.tosvg.WMFTranscoder.transcode\n(WMFTranscoder.java:200)\n\tat org.apache.batik.transcoder.wmf.tosvg.WMFTranscoder.main\n(WMFTranscoder.java:277)\n\tat T.main(T.java:10)\n\n Christian"}, {"count": 1, "tags": [], "bug_id": 38891, "text": "Behavior for Batik 1.6 is expected (Cp1252 stuff and problem with the resulting\nimage after correcting the encoding). A lot of enhancements of the WMF\ntranscoding process where introduced since in SVN repository.\nAs I submitted a huge patch for these enhancements, I consider my duty to look\nat the SVN snapshot behavior...\nIt seems to be a problem with the texture loading from the WMF file, may be with\nthe cloud. I don't think that the transparency is corrected in SVN, too.\nI will try to look at your examples this week-end. May be you could delete the\ncloud from the image and try again, if the result is OK (apart from the\ntransparency), this is a \"texture loading\" problem in the WMF transcoding code.\n", "id": 86615, "time": "2006-03-08T20:42:47Z", "creator": "herve.girod@club-internet.fr", "creation_time": "2006-03-08T20:42:47Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 38891, "attachment_id": null, "text": "(In reply to comment #1)\n\n> I will try to look at your examples this week-end. May be you could delete the\n> cloud from the image and try again, if the result is OK (apart from the\n> transparency), this is a \"texture loading\" problem in the WMF transcoding code.\n\n   It looked to me like an issue with the new ImageWriter stuff.\n", "id": 86637, "time": "2006-03-09T11:50:30Z", "creator": "deweese@apache.org", "creation_time": "2006-03-09T11:50:30Z", "is_private": false}, {"count": 3, "tags": [], "creator": "herve.girod@club-internet.fr", "is_private": false, "id": 86653, "attachment_id": null, "bug_id": 38891, "creation_time": "2006-03-09T23:38:40Z", "time": "2006-03-09T23:38:40Z", "text": "> \n>    It looked to me like an issue with the new ImageWriter stuff.\n> \n\nYou are right, The transcoding of the WMF goes on without any problem with an\nearlier SVN version (earlier than the ImageWriter modifications, but later than\nthe WMF transcoder modifications). The only (known) problem was that\ntransparency was not handled."}, {"count": 4, "tags": [], "bug_id": 38891, "is_private": false, "text": "(In reply to comment #3)\n> >    It looked to me like an issue with the new ImageWriter stuff.\n\n> You are right, The transcoding of the WMF goes on without any problem with an\n> earlier SVN version (earlier than the ImageWriter modifications, but later \n> than the WMF transcoder modifications).\n\n   Interesting this worked just fine for me.  I was basing my statement\non the stack trace.  Does the code fail for you as well then?  How are\nyou running the transcoder?  Do you include the 'resources' directory\non the class path?\n", "id": 86730, "time": "2006-03-12T01:48:38Z", "creator": "deweese@apache.org", "creation_time": "2006-03-12T01:48:38Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "jeremias@apache.org", "text": "(In reply to comment #4)\n> (In reply to comment #3)\n> > >    It looked to me like an issue with the new ImageWriter stuff.\n> \n> > You are right, The transcoding of the WMF goes on without any problem with an\n> > earlier SVN version (earlier than the ImageWriter modifications, but later \n> > than the WMF transcoder modifications).\n> \n>    Interesting this worked just fine for me.  I was basing my statement\n> on the stack trace.  Does the code fail for you as well then?  How are\n> you running the transcoder?  Do you include the 'resources' directory\n> on the class path?\n\nI guess it's the ImageWriterRegistry reporting null because it can't find any\nImageWriter implementation (just as your questions suggests). Should we throw an\nexception if no ImageWriter implementation can be reported? I think that would\nmake sense.", "id": 87496, "attachment_id": null, "bug_id": 38891, "creation_time": "2006-04-01T13:23:31Z", "time": "2006-04-01T13:23:31Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 38891, "text": "I wonder if Cameron's recent fix for data url images when running\nfrom jars will fix this problem as well.  Can you retest with latest SVN?", "id": 88183, "time": "2006-04-18T00:02:48Z", "creator": "deweese@apache.org", "creation_time": "2006-04-18T00:02:48Z", "is_private": false, "attachment_id": null}]