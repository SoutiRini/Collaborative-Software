[{"count": 0, "attachment_id": null, "creator": "ybh_6336@yahoo.com", "is_private": false, "id": 69543, "time": "2005-01-11T20:24:52Z", "bug_id": 33051, "creation_time": "2005-01-11T20:24:52Z", "tags": [], "text": "Hello all\n\nI would not term these as Jakarta issues straightaway, but please do take a look\nat these, our application is severely being hampered because of these. I\napologize I cannot give direct steps to reproduce these issues, but I would\nreally appreciate any help if any of the developers is aware of anything like\nthis from the top of their heads.\n\nThis is a B2B application that I am talking about, and I came across these\nissues while validating the XML response against certain regular expressions.\n\n1) StringIndexOutOfBoundsException: Following is the sequence of steps my code\nfollows:\n...\n(AlphaLength3to3.java)\nJakartaRegExpEvaluator regExp = new JakartaRegExpEvaluator();\nregExp.setExpression(\"[a-zA-Z]{3}\");\n...\n...\n(JakartaRegExpEvaluator.java: setExpression(String s))\nregexp = new RE(\"^\" + s + \"$\");\n...\nI get the following stack trace:\nNESTED EXCEPTION #1:java.lang.StringIndexOutOfBoundsException: String index out\nof range: 14\n/atg/dynamo/server/DrpServer            at java.lang.String.charAt(String.java:444)\n/atg/dynamo/server/DrpServer            at\norg.apache.regexp.RECompiler.compile(RECompiler.java:1286)\n/atg/dynamo/server/DrpServer            at org.apache.regexp.RE.<init>(RE.java:490)\n/atg/dynamo/server/DrpServer            at org.apache.regexp.RE.<init>(RE.java:475)\n\n2) RESyntaxException: Following is the piece of code:\n\ntry\n{\n  JakartaRegExpEvaluator regExp = new JakartaRegExpEvaluator();\n  regExp.setExpression(\"[0-9A-Z]{1,3}\");\n  if(!regExp.matches(tempPatternString))\n     throw new\nValidationException(\"org.opentravel.schemas.OTA.n2002.n11.types.OTA_CodeType::validate:\nValue \" + val + \" did not conform to the pattern facet constraint of\n[0-9A-Z]{1,3}.\");\n}\ncatch(RegExpException re)\n{\n  throw new\nValidationException(\"org.opentravel.schemas.OTA.n2002.n11.types.OTA_CodeType::validate:\nSerious problem constructing regular expression from pattern \\\"[0-9A-Z]{1,3}\\\":\n\" + re.getMessage());\n}\n\n\"setExpression()\" then calls:\nregexp = new RE(\"^\" + s + \"$\");\n\nFollowing is the stack trace that I get:\ncom.commerceone.xdk.castor.excp.ConstraintValidationException:\nOTA_CodeType::set(String): The value 10 was not a valid value for this\nsimpleType: org.opentravel.schemas.OTA.n2002.n11.types.OTA_CodeType::validate:\nSerious problem constructing regular expression from pattern \"[0-9A-Z]{1,3}\":\nRegExp Syntax error: Syntax error: Bad range ; error occured with the following\nregular expression: [0-9A-Z]{1,3}\n\nSo, I presume, for some reason, RE.java is throwing RESyntaxException.\n\nThe most weird thing is, that the above 2 issues work perfectly fine most of the\ntimes for the SAME EXACT regular expression, but sometimes throw these\nexceptions. I understand this might not be sufficient information, but that is\nall I have, please let me know what other information might be helpful in\nsolving this. Any ideas would be appreciated.\n\nThanks\n-Yogesh"}, {"count": 1, "tags": [], "text": "You forgot to specify - or I don't see it - what regexp version you are using.", "is_private": false, "id": 69557, "creator": "vgritsenko@apache.org", "time": "2005-01-11T21:59:36Z", "bug_id": 33051, "creation_time": "2005-01-11T21:59:36Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 33051, "text": "(In reply to comment #1)\n> You forgot to specify - or I don't see it - what regexp version you are using.\n\nSorry, my bad, 1.1\n\nThanks\n-Yogesh", "id": 69558, "time": "2005-01-11T22:06:32Z", "creator": "ybh_6336@yahoo.com", "creation_time": "2005-01-11T22:06:32Z", "is_private": false, "attachment_id": null}, {"count": 3, "text": "Fixed 2 years ago.\n\n*** This bug has been marked as a duplicate of 3877 ***", "bug_id": 33051, "is_private": false, "id": 69566, "time": "2005-01-11T22:34:19Z", "creator": "vgritsenko@apache.org", "creation_time": "2005-01-11T22:34:19Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "text": "(In reply to comment #3)\n> Fixed 2 years ago.\n> *** This bug has been marked as a duplicate of 3877 ***\n\nThanks Vadim, which version of regexp should I use?", "attachment_id": null, "id": 69568, "creator": "ybh_6336@yahoo.com", "time": "2005-01-11T22:41:34Z", "bug_id": 33051, "creation_time": "2005-01-11T22:41:34Z", "is_private": false}, {"count": 5, "tags": [], "creator": "vgritsenko@apache.org", "attachment_id": null, "id": 69569, "time": "2005-01-11T22:50:30Z", "bug_id": 33051, "creation_time": "2005-01-11T22:50:30Z", "is_private": false, "text": "Latest, of course :)"}]