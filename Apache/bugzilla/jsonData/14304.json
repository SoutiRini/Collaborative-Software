[{"count": 0, "tags": [], "text": "In the following circumstances:\n\n1. a Filter is assigned to a URL in a webapp\n2. that Filter calls\nrequest.getRequestDispatcher(OTHER_RESOURCE).forward(request, response)\n3. OTHER_RESOURCE is larger than the resource at the URL\n\nthe OTHER_RESOURCE is truncated.\n\nExpected Behavior: OTHER_RESOURCE is returned to the HTTP client\nActual Behavior: OTHER_RESOURCE is returned truncated to the HTTP client.\n\nI haven't confirmed this yet, but I think OTHER_RESOURCE is being truncated to\nthe Content-Length of the requested resource.", "is_private": false, "id": 25800, "creator": "rhoegg@isisnetworks.net", "time": "2002-11-06T18:03:49Z", "bug_id": 14304, "creation_time": "2002-11-06T18:03:49Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 14304, "attachment_id": 3757, "is_private": false, "id": 25801, "time": "2002-11-06T18:05:20Z", "creator": "rhoegg@isisnetworks.net", "creation_time": "2002-11-06T18:05:20Z", "text": "Created attachment 3757\nUnzip this to $CATALINA_HOME/webapps.  The source to the filter is with the class in /WEB-INF/classes"}, {"attachment_id": null, "tags": [], "bug_id": 14304, "text": "More information about this:\n\nI have tested this on 4.1.12 and 4.1.14, and the behavior is the same.\n\nOn 4.1.14, I tested this with the following 4 statements:\n\nrequest.getRequestDispatcher(OTHER_RESOURCE).forward(request, response);\nrequest.getRequestDispatcher(OTHER_RESOURCE).include(request, response);\ngetFilterConfig().getServletContext().getRequestDispatcher(OTHER_RESOURCE).forward(request,\nresponse);\ngetFilterConfig().getServletContext().getRequestDispatcher(OTHER_RESOURCE).include(request,\nresponse);\n\nEach with the same actual behavior.\n", "count": 2, "id": 25802, "time": "2002-11-06T18:14:07Z", "creator": "rhoegg@isisnetworks.net", "creation_time": "2002-11-06T18:14:07Z", "is_private": false}, {"count": 3, "tags": [], "text": "Reproduced behavior with jakarta-tomcat-4.0.6", "is_private": false, "id": 25828, "creator": "rhoegg@isisnetworks.net", "time": "2002-11-06T23:06:11Z", "bug_id": 14304, "creation_time": "2002-11-06T23:06:11Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "Ryan, there's an error in your filter. You call\nrequestDispatcher.forward(longerfile) in doBeforeProcessing. This commits the\nrequest (ie sets headers etc) but you then don't return immediately from\ndoFilter() - since the request has already been forwarded and handled you *must*\ndo this.\n\nAs a result, it seems pretty clear that an exception is being thrown when you\nattempt to handle the request /a second time/ when you call chain.doFilter().\n\nThe result is this: when trying to view the shorter file with a forward to the\nlonger file, you see the /buffer/ of the longer file (this is the length you see\n- not the length of the short file), then no more output because an exception\nhas been thrown.", "is_private": false, "id": 26075, "creator": "Brian.Ewins@btinternet.com", "time": "2002-11-11T17:07:25Z", "bug_id": 14304, "creation_time": "2002-11-11T17:07:25Z", "attachment_id": null}]