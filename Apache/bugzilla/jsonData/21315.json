[{"count": 0, "tags": [], "bug_id": 21315, "is_private": false, "text": "When I do a jar update to the existing jar, I am getting an error \" Unable to \nrename old file to temporary file\". Here is how my target looks like:\n\n<target name=\"Update_JAR\" depends=\"compile_java\">\n\t<jar jarfile=\"${dist.dir}/${jar.name}.jar\" compress=\"no\" update=\"true\" >\n\t\t    <fileset dir=\"${release.dir_root}/${release.dir_name}\"\n\t\t    \tincludes=\"com/carreker/**\"/>\n\t\t    \n\t</jar>    \t     \n                \n    </target>", "id": 39938, "time": "2003-07-03T16:07:22Z", "creator": "jvarghese@carreker.com", "creation_time": "2003-07-03T16:07:22Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "antoine@apache.org", "is_private": false, "id": 39943, "time": "2003-07-03T17:00:05Z", "bug_id": 21315, "creation_time": "2003-07-03T17:00:05Z", "tags": [], "text": "You should upgrade to ant 1.5.3, where a number of bugs related to jar file \nupdating have been solved.\n"}, {"count": 2, "attachment_id": null, "creator": "jvarghese@carreker.com", "is_private": false, "id": 39948, "time": "2003-07-03T17:57:57Z", "bug_id": 21315, "creation_time": "2003-07-03T17:57:57Z", "tags": [], "text": "Even after updating to 1.5.3, i am getting the same error."}, {"count": 3, "attachment_id": null, "creator": "bodewig@apache.org", "is_private": false, "id": 39969, "time": "2003-07-04T06:49:19Z", "bug_id": 21315, "creation_time": "2003-07-04T06:49:19Z", "tags": [], "text": "Hmm, is ${dist.dir}/${jar.name}.jar on a different file system than your current\nworking directory (one of the reasons File.renameTo could fail).\n\nCould you please try a current nightly build?  We've changed the tasks that try\nto rename file to recover from this problem, maybe this also fixes your\nsituation."}, {"count": 4, "tags": [], "creator": "xtrnjot@hotmail.com", "attachment_id": null, "text": "\nIf the OS is NT/2000 and ${dist.dir}/${jar.name}.jar is used in the classpath \nof the current target *or* of a target depending on the current target it seems \nlike the OS will lock it during the primary target scope and not enable any \nupdates while the primary target is running. Have not tried the latest build in \norder to confirm if this still holds tru, but it does in 1.5.", "id": 40009, "time": "2003-07-05T09:29:59Z", "bug_id": 21315, "creation_time": "2003-07-05T09:29:59Z", "is_private": false}, {"count": 5, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "text": "Well, that means that the jar isnt unloaded yet. If it is a <java> task ,set\nfork=true to run it in a JVM. Otherwise, unless you can track down some defect\nin the CVS_HEAD version of Ant's classpath loader that isnt properly releasing\nJARs when classpaths fall out of scope, we are not going to be able to fix his.\n\n\nRenaming error to be more descriptive. ", "id": 40013, "time": "2003-07-05T20:43:15Z", "bug_id": 21315, "creation_time": "2003-07-05T20:43:15Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 21315, "is_private": false, "text": "maybe the problem here is javac -it is the most likely thing to hold on to a file. \n\nWhat version of java are you running, and can you set fork=true in the <javac> task?", "id": 41931, "time": "2003-08-01T06:36:46Z", "creator": "stevel@apache.org", "creation_time": "2003-08-01T06:36:46Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 21315, "is_private": false, "text": "So, presumably jar is in use by VM and on Windows that means jar cannot be deleted.", "id": 42375, "time": "2003-08-08T02:37:24Z", "creator": "conor@apache.org", "creation_time": "2003-08-08T02:37:24Z", "attachment_id": null}]