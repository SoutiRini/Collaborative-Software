[{"attachment_id": null, "tags": [], "bug_id": 29804, "is_private": false, "count": 0, "id": 59871, "time": "2004-06-25T13:50:35Z", "creator": "b.armintor@its.utexas.edu", "creation_time": "2004-06-25T13:50:35Z", "text": "I'm subclassing the WebappClassLoader to add permissions at runtime.  Because\nthe JSP class loader does not delegate to its parent for permissions before\nadding its own, these permissions are not assigned to JSP-derived servlets.  The\nproblem comes from org.apache.jasper.compiler.JspRuntimeContext, which gets a\npermissions collection from the Policy directly, instead of delegating to the\nParentClassLoader#getPermissions() method when assigning its\npermissionCollection member's values in JspRuntimeContext#initSecurity().  This\nproblem also exists in the TC5.0.25 codebase."}, {"count": 1, "tags": [], "bug_id": 29804, "attachment_id": null, "id": 59873, "time": "2004-06-25T13:55:46Z", "creator": "remm@apache.org", "creation_time": "2004-06-25T13:55:46Z", "is_private": false, "text": "I am not in favor of supporting this use case, sorry.\nYou should use the standard policy file and precompilation."}, {"count": 2, "tags": [], "bug_id": 29804, "attachment_id": null, "id": 59875, "time": "2004-06-25T14:04:17Z", "creator": "b.armintor@its.utexas.edu", "creation_time": "2004-06-25T14:04:17Z", "is_private": false, "text": "I understand your hesitancy, but neither of these options will really work.  I'm\nhosting many other developers' apps, and I cannot require precompilation.  The\npolicy file syntax is pretty restrictive, and using a custom classloader gives\nme  a significantly better way to give context-based permissions in an\nenvironment where the applications that are being developed and the context\npaths they are being deployed to change frequently. "}, {"count": 3, "tags": [], "text": "I'm happy that you found a solution which fits your needs. I hate your solution\nhowever, which takes a very heavy handed approach. So everyone's happy, but your\nway of doing things will not be included in the official Tomcat.\nThe syntax of the policy file is very adequate and flexible enough.", "attachment_id": null, "id": 59876, "creator": "remm@apache.org", "time": "2004-06-25T14:12:04Z", "bug_id": 29804, "creation_time": "2004-06-25T14:12:04Z", "is_private": false}, {"count": 4, "tags": [], "creator": "b.armintor@its.utexas.edu", "attachment_id": null, "text": "Well, thanks for hearing me out.  I'd like to think that it's my situation that\ndeserves the hate, and not my solution per se, but that's another issue.  I have\nan academic interest in discussing this further, but this is obviously not the\nforum for that.\n\nregards-", "id": 59878, "time": "2004-06-25T14:29:07Z", "bug_id": 29804, "creation_time": "2004-06-25T14:29:07Z", "is_private": false}]