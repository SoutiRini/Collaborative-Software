[{"count": 0, "tags": [], "creator": "michael.bu@gmail.com", "attachment_id": null, "is_private": false, "id": 153090, "time": "2012-01-24T08:29:09Z", "bug_id": 52512, "creation_time": "2012-01-24T08:29:09Z", "text": "Hi, \n\nI just encountered a problem with CrawlerSessionManagerValve when used with clustering after I upgraded from 7.0.14 to 7.0.25 today. It appears to be a serialization problem when the valve trying to set itself as an attribute to the session.\n\nHere's the stack: \n\nSEVERE: Error processing request \njava.lang.IllegalArgumentException: setAttribute: Non-serializable attribute org.apache.catalina.valves.CrawlerSessionManagerValve \n        at org.apache.catalina.session.StandardSession.setAttribute(StandardSession.java:1451) \n        at org.apache.catalina.ha.session.DeltaSession.setAttribute(DeltaSession.java:654) \n        at org.apache.catalina.ha.session.DeltaSession.setAttribute(DeltaSession.java:638) \n        at org.apache.catalina.session.StandardSessionFacade.setAttribute(StandardSessionFacade.java:156) \n        at org.apache.catalina.valves.CrawlerSessionManagerValve.invoke(CrawlerSessionManagerValve.java:190) \n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) \n        at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:680) \n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) \n        at org.apache.catalina.ha.session.JvmRouteBinderValve.invoke(JvmRouteBinderValve.java:219) \n        at org.apache.catalina.ha.tcp.ReplicationValve.invoke(ReplicationValve.java:333) \n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) \n        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987) \n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) \n        at org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(AprEndpoint.java:1763) \n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) \n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) \n        at java.lang.Thread.run(Thread.java:662)"}, {"count": 1, "tags": [], "bug_id": 52512, "attachment_id": null, "id": 153229, "time": "2012-01-27T22:23:06Z", "creator": "markt@apache.org", "creation_time": "2012-01-27T22:23:06Z", "is_private": false, "text": "You'll need to specify a sessionAttributeFilter for your session manager to exclude that attribute (the attribute name is the fully-qualifed class name) from replication."}]