[{"count": 0, "tags": [], "bug_id": 5551, "attachment_id": null, "id": 9114, "time": "2001-12-21T03:50:28Z", "creator": "hans.schlenker@first.fraunhofer.de", "creation_time": "2001-12-21T03:50:28Z", "is_private": false, "text": "In order to remotely install a new web app using the great Manager tool, it\nwould be very handy to be able to query the system, the server is running on.\nThus, we could for example automatically detect the OS and copy/install\nappropriate third party native libraries.\n\nThe suggestion is to extend ManagerServlet.doGet(), add a test whether\ncommand.equals(\"/system.properties\"), and write System.getProperties().store()\nto the Servlet's response. This could be used very easily by the remote client\nto extract all information it needs from the server (using Properties.load()),\ne.g. OS type, JVM version, etc.\n\nWhy this should be part of the Manager: I think, this could be very handy for a\nlot of Manager-users, could be realized very easily, and should have some\nsecurity protection which the manager already provides.\n \nImplementation detail wrt. 4.0.1/ManagerServlet.java/doGet(): Since\nSystem.getProperties().store() needs an OutputStream and this can't easily be\ngenerated from the existing response.getWriter(), it could be easier (though not\nso well fitting into the existing code) to use\nout=response.getOutputStream();System.getProperties.store(\"\",out); in case\ncommand.equals(\"/system.properties\"), i.e. outside the current \"Process the\nrequested command\" construct."}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "That's a good idea. If you could submit a patch which would implement that, I'll\ncommit it.", "id": 10611, "time": "2002-02-12T23:18:09Z", "bug_id": 5551, "creation_time": "2002-02-12T23:18:09Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Created attachment 1239\npatch to ManagerServlet.java that implements proposed Enhancement", "is_private": false, "id": 11219, "creator": "hans.schlenker@first.fraunhofer.de", "time": "2002-02-27T15:30:20Z", "bug_id": 5551, "creation_time": "2002-02-27T15:30:20Z", "attachment_id": 1239}, {"count": 3, "tags": [], "creator": "glenn@apache.org", "attachment_id": null, "text": "Thanks for the patch, but I couldn't use it.  It would display all system\nproperties which coud be a security risk if you have untrusted users when\nvirtual hosting multiple sites..  A /serverinfo command has been added which \nwill list just the Tomcat version, OS properties, and JVM properties.\n", "id": 29325, "time": "2003-01-14T02:56:42Z", "bug_id": 5551, "creation_time": "2003-01-14T02:56:42Z", "is_private": false}]