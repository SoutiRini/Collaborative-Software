[{"count": 0, "tags": [], "bug_id": 61368, "text": "APR dll libapr-1.dll abends with access violation issue causing IIS  to crash\n\n\nVersion of APR being used:  1.4.5\nOn windows 2012R2 servers 64 bit\nIIS version 8.5\n\nThis is being used as part of Oracle product  Weblogic IIS Plugin 12.1.3 for use with PeopleSoft Financials ALPOGL/ PeopleTools 8.55.\n\nDo you think Oracle should be using a newer version of APR with their Weblogic IIS Plugin 12.1.3 product which geared for win 2012R2 64 bit.\n\n\n\nHere are the details from dump logs that I provided to Microsoft support and Oracle support:\n\nDUMP:\nw3wp__PsftFIN__PID__8128__Date__03_15_2017__Time_01_21_50AM__788__Second_Chance_Exception_C0000005.dmp\n\n\nAnalysis:\nAccess violation is thrown from libapr-1.dll while it is trying to read the memory location 0x00000020. \n\nException Information\nLIBAPR_1+2F106WARNING - DebugDiag was not able to locate debug symbols for \\libapr-1.dll, so the information below may be incomplete.\n\nIn w3wp__PsftFIN__PID__8128__Date__03_15_2017__Time_01_21_50AM__788__Second_Chance_Exception_C0000005.dmp the assembly instruction at libapr_1+2f106 in \\\\?\\D:\\inetpub\\PsftFIN\\lib\\libapr-1.dll from Apache Software Foundation has caused an access violation exception (0xC0000005) when trying to read from memory location 0x00000020 on thread 4\n\nDumping the stack for Thread 4:\nEntry point\t  w3tp!THREAD_MANAGER::ThreadManagerThread\nCreate time\t  3/9/2017 10:48:45 AM\nTime spent in user mode\t  0 Days 00:00:00.093\nTime spent in kernel mode\t  0 Days 00:00:00.343\n\n\nThis thread is calling an ISAPI Extension iisproxy\n\nlibapr_1+2f106\niisproxy+1f74a\niisproxy+15bdf\niisproxy+264c8\niisproxy+1715f\niisproxy!HttpExtensionProc+16ec\nisapi!ProcessIsapiRequest+13d\nisapi!W3_ISAPI_HANDLER::DoWork+509\nisapi!RequestDoWork+3f1\nisapi!CIISHttpModule::OnExecuteRequestHandler+1a\niiscore!NOTIFICATION_CONTEXT::RequestDoWork+224\niiscore!NOTIFICATION_CONTEXT::CallModulesInternal+198\niiscore!NOTIFICATION_CONTEXT::CallModules+36\niiscore!NOTIFICATION_MAIN::DoWork+4b4\niiscore!W3_MAIN_CONTEXT::OnNewRequest+243\nw3dt!WP_CONTEXT::OnCompletion+c3\nw3tp!THREAD_POOL_DATA::ThreadPoolThread+82\nw3tp!THREAD_POOL_DATA::ThreadPoolThread+33\nw3tp!THREAD_MANAGER::ThreadManagerThread+3e\nkernel32!BaseThreadInitThunk+22\nntdll!RtlUserThreadStart+34\n\n\nModule Information\nImage Name:\t\\\\?\\D:\\inetpub\\PsftFIN\\lib\\libapr-1.dll\n  Symbol Type: \tNone\nBase address:\t0x00000003`00905a4d\t  Time Stamp: \tWed Apr 23 08:39:24 2014 \nChecksum:\t0x00000000`00000000\t  Comments: \tLicensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to You under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\nCOM DLL:\tFalse\t  Company Name: \tApache Software Foundation\nISAPIExtension:\tFalse\t  File Description: \tApache Portable Runtime Library\nISAPIFilter:\tFalse\t  File Version: \t1.4.5\nManaged DLL:\tFalse\t  Internal Name: \tlibapr-1\nVB DLL:\tFalse\t  Legal Copyright: \tCopyright (c) 2011 The Apache Software Foundation or its licensors, as applicable.\nLoaded Image Name: \tlibapr-1.dll\t  Legal Trademarks: \t\nMapped Image Name: \t\t  Original filename: \tlibapr-1.dll\nModule name: \tlibapr_1\t  Private Build: \t\nSingle Threaded: \tFalse\t  Product Name: \tApache Portable Runtime Project\nModule Size: \t300 KBytes\t  Product Version: \t1.4.5\nSymbol File Name: \tlibapr-1.dll\t  Special Build: \t&\n\n\nAction Plan:\nSince this is third party component(Apache Software Foundation), They need to look into libapr-1.dll.\nAs  you mentioned you have already contacted Apache team and they think it needs to look upon by Microsoft, so you can schedule a call with Apache team and then we will discuss over this.\n\nOn a side note I can see that this module is 3 year old (   Time Stamp : Wed Apr 23 08:39:24 2014), so can you update the dll with recent version. So that if there is some known issue then it might get resolved.", "id": 200137, "time": "2017-08-01T22:37:10Z", "creator": "fred.riederer@cunamutual.com", "creation_time": "2017-08-01T22:37:10Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 61368, "attachment_id": null, "is_private": false, "id": 200139, "time": "2017-08-02T00:40:12Z", "creator": "covener@gmail.com", "creation_time": "2017-08-02T00:40:12Z", "text": "1.4.5 was released in 2011.  Whoever did the basic analysis of that dump didn't have symbols (*.pdb) for iisproxy or apr so it gives nearly no usable information.\n\nThis needs to be debugged by someone responsible for iisproxy, which is presumably\npart of a the commercial product you reference below, built on top of APR.  I think it is completely unreasonable for them to ask you to take it up with Microsoft and Apache without any meaningful analysis."}]