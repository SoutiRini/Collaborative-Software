[{"count": 0, "tags": [], "bug_id": 16520, "attachment_id": null, "is_private": false, "id": 30219, "time": "2003-01-28T23:54:25Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-01-28T23:54:25Z", "text": "Looks like a possible RFC 2616 MUST violation.\nMod_cache caches responses to requests containing\nunusual Authorization header. The bug seems to be in\nthe HTTP header parser (or internal header\nrepresentation) because it is triggered by\nadding white space after the header name (which is\nlegal per RFC 2616 \"implied *LWS\" rule).\n\nHigher-than-default severity was chosen because\nthis bug may affect user privacy and might lead\nto unauthorized access to protected resources\nif some UAs send compliant (but not common)\nAuthorization headers. It is also likely that the\nsame [parsing/representation] bug may affect\nhandling of other headers (Connection?), but there\nare no test cases to prove that speculation\nat this time.\n\nSee attached trace(s) for details and ways to reproduce\nthe violation mentioned above.\n\nTest case IDs in the trace link to human-oriented test case\ndescription and RFC quotes, if available."}, {"count": 1, "tags": [], "bug_id": 16520, "attachment_id": 4608, "is_private": false, "id": 30220, "time": "2003-01-28T23:55:22Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-01-28T23:55:22Z", "text": "Created attachment 4608\ntest case with spaced Authorization header (violation)"}, {"count": 2, "tags": [], "bug_id": 16520, "text": "Created attachment 4609\ntest case with plain Authorization header (success)", "id": 30221, "time": "2003-01-28T23:57:06Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-01-28T23:57:06Z", "is_private": false, "attachment_id": 4609}, {"count": 3, "tags": [], "bug_id": 16520, "text": "Created attachment 7017\nFix in ap_get_mime_headers_core() in server\\protocol.c to remove the whitespace from the end of the headerkey till ':'", "id": 39547, "time": "2003-06-27T14:14:04Z", "creator": "mnicel@yahoo.com", "creation_time": "2003-06-27T14:14:04Z", "is_private": false, "attachment_id": 7017}, {"count": 4, "attachment_id": null, "bug_id": 16520, "is_private": false, "id": 39548, "time": "2003-06-27T14:31:43Z", "creator": "mnicel@yahoo.com", "creation_time": "2003-06-27T14:31:43Z", "tags": [], "text": "Issue was in parsing the headers and forming the r->headers_in structure. the \nHeader key was not trimmed for whitespaces from the end of the key till ':'\nFix in server/protocol.c in ap_get_mime_headers_core. Modified protocol.c \n(2.0.46 source)file is attached.\n\n"}, {"count": 5, "tags": [], "bug_id": 16520, "text": "We've been instructed to always test against HEAD\nand there were some changes to ap_get_mime_headers_core\nsince 2.0.46 that make it non-obvious how to merge your\nchanges. If it is not too much trouble, could you please\npost a diff/patch against the current HEAD version so \nthat we can verify the fix?\n\nThank you.\n", "id": 40082, "time": "2003-07-07T16:34:55Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-07-07T16:34:55Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 16520, "text": "Since HEAD is not stable at the moment, we did\ntest against 2.0.46 (CVS tag APACHE_2_0_46).\nThe bug appears to be fixed. A trace from a\nsuccessful test case will be attached.\n\nLeaving this bug as unresolved since the fix\nhas not been committed to the Apache tree.\n", "id": 40091, "time": "2003-07-07T19:42:36Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-07-07T19:42:36Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 16520, "is_private": false, "text": "Created attachment 7126\ntest case with spaced Authorization header (success)", "id": 40092, "time": "2003-07-07T19:43:26Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-07-07T19:43:26Z", "attachment_id": 7126}, {"count": 8, "tags": [], "bug_id": 16520, "attachment_id": null, "is_private": false, "id": 40097, "time": "2003-07-07T20:17:47Z", "creator": "rederpj@remulak.net", "creation_time": "2003-07-07T20:17:47Z", "text": "Nicel KM, could you (or the measurement factory folks) please append the tested\npatch as a unified diff. This would make it much easier to commit patch.\n\nThank you for your work and thank you to the Co-advisor folks for testing the patch."}, {"attachment_id": 7136, "tags": [], "creator": "coad@measurement-factory.com", "text": "Created attachment 7136\nhopefully same changes, now in unified diff format", "count": 9, "id": 40107, "time": "2003-07-07T20:49:32Z", "bug_id": 16520, "creation_time": "2003-07-07T20:49:32Z", "is_private": false}, {"count": 10, "tags": [], "text": "Sorry about not attaching the fix in unified diff format. The diff attached \nfrom Measurement Factory is correct.\nThanks to Measurement Factory folks for validating the fix and to you Paul, for \nconsidering this.\n\n(Also, attaching the patch in unified diff format from my side.)", "is_private": false, "bug_id": 16520, "id": 40140, "time": "2003-07-08T04:23:43Z", "creator": "mnicel@novell.com", "creation_time": "2003-07-08T04:23:43Z", "attachment_id": null}, {"count": 11, "attachment_id": 7147, "creator": "mnicel@novell.com", "is_private": false, "id": 40141, "time": "2003-07-08T04:32:11Z", "bug_id": 16520, "creation_time": "2003-07-08T04:32:11Z", "tags": [], "text": "Created attachment 7147\nPatch in unified diff format."}, {"count": 12, "tags": [], "bug_id": 16520, "attachment_id": null, "text": "Some time ago I submitted a similar patch to the Apache-DEV mailing list.  As a\nresponse to my patch the question was raised whether the whitespace should be\nstripped or whether a 'bad request' error should be triggered (depending on how\nyou interpret the RFC).  Just thought I'd let you know.\n\nThe response mail can be found at:\nhttp://marc.theaimsgroup.com/?l=apache-httpd-dev&m=105517236015392&w=2", "id": 40152, "time": "2003-07-08T07:06:56Z", "creator": "kris.verbeeck@advalvas.be", "creation_time": "2003-07-08T07:06:56Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "coad@measurement-factory.com", "is_private": false, "count": 13, "id": 40194, "time": "2003-07-08T17:23:21Z", "bug_id": 16520, "creation_time": "2003-07-08T17:23:21Z", "text": "Kris,\n\nNd's answer was probably incorrect. As you correctly pointed out\nLWS is allowed between adjacent words and separators. A word is\na token or quited string. In our case, field-name is a token and\n\":\" is a separator. Perhaps nd did not read to the end of the\nquoted requirement (the part about separators) before responding?\n"}, {"count": 14, "attachment_id": null, "bug_id": 16520, "is_private": false, "id": 40201, "time": "2003-07-08T18:27:37Z", "creator": "rederpj@remulak.net", "creation_time": "2003-07-08T18:27:37Z", "tags": [], "text": "I'd have to agree with Kris and Co-Advisor's interpretation. I'll go ahead and\ncommit this to the 2.1-dev branch and suggest back-porting to the 2.0 branch."}, {"count": 15, "tags": [], "creator": "rederpj@remulak.net", "text": "I have now committed this code to the 2.1-dev branch. Thank you for your efforts\nto identify and resolve this issue.", "id": 40227, "time": "2003-07-08T21:52:17Z", "bug_id": 16520, "creation_time": "2003-07-08T21:52:17Z", "is_private": false, "attachment_id": null}]