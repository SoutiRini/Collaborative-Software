[{"count": 0, "tags": [], "bug_id": 36767, "is_private": false, "text": "I implemented two tags, one to display a navigation bar and another to display a\nlist of news items.  Both tags received their data from a DAO which returned a\nCollection of appropriate objects.  When I switched over to using generics the\nerror below appeared for *both* tags.\n\nI found two different fixes.  If I avoided creating a local variable to hold\neither the Collection<NewsItem> or Iterator<NewsItem>, then everything worked\nfine.  For example:\nfor(NewsItem n : newsItemDao.getAll()) { ... }\nsolved the problem.  The other approach was simply not to use the generic\napproach in the tag, even though the DAO was still returning a generified\ncollection.\n\nHere's one of the stacktraces, the other was the same:\n\nSep 21, 2005 9:43:57 PM org.apache.jasper.compiler.Compiler generateClass\nSEVERE: Error compiling file:\n/var/lib/tomcat-5/default/work/Catalina/localhost/javacms//org/apache/jsp/WEB_002dINF/jsp/news_jsp.java\n    [javac] Compiling 1 source file\n    [javac]\n/var/lib/tomcat-5/default/work/Catalina/localhost/javacms/org/apache/jsp/WEB_002dINF/jsp/news_jsp.java:95:29:95:35:\nSemantic Error: The class file \"NewsTag.class\" in\n\"/var/lib/tomcat-5/default/webapps/javacms/WEB-INF/classes/com/snoyman/jcms/taglib\"\nhas an invalid format (duplicate local variable type table).\n    [javac]\n/var/lib/tomcat-5/default/work/Catalina/localhost/javacms/org/apache/jsp/WEB_002dINF/jsp/news_jsp.java:95:61:95:91:\nSemantic Error: Type \"NewsTag\" was not found.\n    [javac]\n/var/lib/tomcat-5/default/work/Catalina/localhost/javacms/org/apache/jsp/WEB_002dINF/jsp/news_jsp.java:95:129:95:159:\nSemantic Error: Type \"NewsTag\" was not found.\n\n\nSep 21, 2005 9:43:57 PM org.springframework.web.servlet.FrameworkServlet\nserviceWrapper\nSEVERE: Could not complete request\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: 8 in the jsp file: /WEB-INF/jsp/news.jsp\nGenerated servlet error:\n    [javac]\n/var/lib/tomcat-5/default/work/Catalina/localhost/javacms/org/apache/jsp/WEB_002dINF/jsp/news_jsp.java:95:29:95:35:\nSemantic Error: The class file \"NewsTag.class\" in\n\"/var/lib/tomcat-5/default/webapps/javacms/WEB-INF/classes/com/snoyman/jcms/taglib\"\nhas an invalid format (duplicate local variable type table).\n\n\nAn error occurred at line: 8 in the jsp file: /WEB-INF/jsp/news.jsp\nGenerated servlet error:\n    [javac]\n/var/lib/tomcat-5/default/work/Catalina/localhost/javacms/org/apache/jsp/WEB_002dINF/jsp/news_jsp.java:95:61:95:91:\nSemantic Error: Type \"NewsTag\" was not found.\n\n\nAn error occurred at line: 8 in the jsp file: /WEB-INF/jsp/news.jsp\nGenerated servlet error:\n    [javac]\n/var/lib/tomcat-5/default/work/Catalina/localhost/javacms/org/apache/jsp/WEB_002dINF/jsp/news_jsp.java:95:129:95:159:\nSemantic Error: Type \"NewsTag\" was not found.\n\n\n\n\n\tat\norg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:84)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:332)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:412)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:472)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:451)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:439)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:511)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:295)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)\n\tat com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:39)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:186)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:704)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:474)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:409)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:312)\n\tat\norg.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:97)\n\tat org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)\n\tat\norg.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:928)\n\tat\norg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:705)\n\tat\norg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:625)\n\tat\norg.springframework.web.servlet.FrameworkServlet.serviceWrapper(FrameworkServlet.java:386)\n\tat\norg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:346)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:743)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)\n\tat\ncom.opensymphony.module.sitemesh.filter.PageFilter.parsePage(PageFilter.java:118)\n\tat com.opensymphony.module.sitemesh.filter.PageFilter.doFilter(PageFilter.java:52)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:186)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat\norg.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:198)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:152)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:705)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)\n\tat java.lang.Thread.run(Thread.java:595)", "id": 80304, "time": "2005-09-22T07:03:53Z", "creator": "snoyberg@gamebox.net", "creation_time": "2005-09-22T07:03:53Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 36767, "is_private": false, "id": 83784, "time": "2005-12-19T02:59:06Z", "creator": "william.barker@wilshire.com", "creation_time": "2005-12-19T02:59:06Z", "tags": [], "text": "Tomcat 5.5 has support for JDK 1.5 features already.\n\nAs a work-around, you can try removing the JTD jar from common/lib and use the \nAnt compiler."}]