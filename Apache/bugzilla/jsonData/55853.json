[{"count": 0, "tags": [], "creator": "areese@yahoo-inc.com", "attachment_id": null, "id": 171613, "time": "2013-12-06T18:27:08Z", "bug_id": 55853, "creation_time": "2013-12-06T18:27:08Z", "is_private": false, "text": "We ran into a bug with apache 2.2.24, where content-length wasn't be set correctly because it's set as a header instead of using the struct.\n\n394     else if (!strcasecmp(header_names[h], \"Content-Length\")) {\n395         apr_table_set(r->headers_out, header_names[h], header_values[h]);\n396     }\n397     else if (!strcasecmp(header_names[h], \"Transfer-Encoding\")) {\n\n\n\nThis is a bug and needs to be something like:\n\nelse if (!strcasecmp(header_names[h], \"Content-Length\")) {\n    ap_set_content_length(r, apr_atoi64(header_values[h]));\n}\n\nThe problem is that mod_jk is setting the headers out, but not setting the\nr->clength value.  Calling ap_set_content_length sets both."}, {"count": 1, "tags": [], "creator": "rainer.jung@kippdata.de", "text": "Thanks for the patch. Extended for the httpd 1.3 branch and committed to mod_jk in r1549202. Will be part of version 1.2.38.", "id": 171652, "time": "2013-12-08T20:12:46Z", "bug_id": 55853, "creation_time": "2013-12-08T20:12:46Z", "is_private": false, "attachment_id": null}]