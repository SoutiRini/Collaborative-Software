[{"count": 0, "attachment_id": null, "bug_id": 37829, "text": "Hi,\n\nIf I try to run, thru tomcat, a correct perl script, Tomcat writes always a \nline on log saying that an error ocurred. The file stderr.log is always empty, \nwhich is not in accordance with what the main log says.\n\nThanks \nArmindo Correia", "id": 83398, "time": "2005-12-08T00:05:41Z", "creator": "acorreia@dbait.de", "creation_time": "2005-12-08T00:05:41Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "is_private": false, "count": 1, "id": 83402, "time": "2005-12-08T00:34:59Z", "bug_id": 37829, "creation_time": "2005-12-08T00:34:59Z", "text": "This works for me without an error message with the latest source.\n\nThe last change that might have any effect was over 12 months ago.\n\nIf you re-open this bug report, please provide the smallest possible test war\nthat demonstrates this issue. Also please include:\n- JVM version\n- CGI config and mapping from web.xml"}, {"count": 2, "tags": [], "bug_id": 37829, "attachment_id": null, "id": 83553, "creation_time": "2005-12-12T13:44:57Z", "time": "2005-12-12T13:44:57Z", "creator": "acorreia@dbait.de", "text": "Hi Mark,\n\nI found what caused this problem in class \"CGIServlet\", method \"sendToLog\". \n\nUntil the version 5.0.30, the variable linecount was wrongly incremented after \nthe loop and not inside it. \n\nThat means it has always the value 1, even though there was no errors or many \nlines of message\n\n            try {\n                while ((line = rdr.readLine()) != null) {\n                    log(\"runCGI (stderr):\" +  line) ;\n                }\n                lineCount++ ;\n            } catch (IOException e) {\n\n\nI checked now the source code in the beta version 5.5.12 and 14, and this \nproblem was solved. As you tested with the last version, the bug was no more \nthere:\n\n            try {\n                while ((line = rdr.readLine()) != null) {\n                    log(\"runCGI (stderr):\" +  line) ;\n                    lineCount++ ;\n                }\n            } catch (IOException e) {\n\n\nAs I didn't find any bug relating this problem, I created this bug before \ntesting with the latest version. \n\nThank for the attention, sorry if it took your time ;P\n\nArmindo Correia\n", "is_private": false}]