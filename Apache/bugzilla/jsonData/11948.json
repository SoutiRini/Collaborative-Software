[{"count": 0, "tags": [], "creator": "trox@grizella.com", "attachment_id": null, "id": 21560, "time": "2002-08-22T20:56:54Z", "bug_id": 11948, "creation_time": "2002-08-22T20:56:54Z", "is_private": false, "text": "When using the jsp:include tag with parameters, the param settings are not \nevaluated in the included page\n// Including file:\n<jsp:include page=\"/NASTCHeader.jsp\" flush=\"true\">\n    <jsp:param name=\"pageTitle\" value=\"Create Invoice?\" />\n    <jsp:param name=\"pageWidth\" value=\"100%\" />\n</jsp:include>\n\n//Included file\n<html>\n<head>\n  \t<title>NASTC TPP Admin--<%= request.getParameter(\"pageTitle\")%></title>\n</head>\n<body bgcolor=\"#FFFFFF\" text=\"#000000\" link=\"#0000FF\" vlink=\"#FF0000\">\n<!-- Header -->\n\n<table width=<%= request.getParameter(\"pageWidth\")%> cellspacing=\"0\" \ncellpadding=\"2\" border=\"0\">"}, {"count": 1, "tags": [], "bug_id": 11948, "text": "can you send a test case where this fails?", "id": 21598, "attachment_id": null, "creator": "jakarta@trollingers.com", "creation_time": "2002-08-23T13:49:09Z", "time": "2002-08-23T13:49:09Z", "is_private": false}, {"count": 2, "tags": [], "creator": "jakarta@trollingers.com", "attachment_id": null, "text": "sorry.. works for me in 4.1.9\n\n", "id": 21599, "time": "2002-08-23T13:50:12Z", "bug_id": 11948, "creation_time": "2002-08-23T13:50:12Z", "is_private": false}, {"count": 3, "tags": [], "creator": "serg_main@yahoo.com", "text": "in simple test all work fine(ExampleN1). But in my engine, jsp:param not work.\nI can't make small test and send some part of may file and part of log4j log. \n(Example 2)\nURL used in example 2: http://me.askmore/index.jsp?mill.lang=ru_RU&m=8&\n\nExample N1 ---------------------------------------------\nmain jsp file:\n<%@page \ncontentType=\"text/html; charset=utf-8\"\nlanguage=\"java\"\n\n%>\n<jsp:include page=\"test_include_3.jsp\">\n\t<jsp:param name=\"test_value\" value=\"russian_string\"/>\n</jsp:include>\n\n\ntest_include_3.jsp:\n<%@page \ncontentType=\"text/html; charset=utf-8\"\nlanguage=\"java\"\nimport=\"java.util.Enumeration\"\n\n%><%\n\nout.println(\"Start list<br>\");\nEnumeration e = request.getParameterNames();\nfor (; e.hasMoreElements() ;)\n{\n\tString n = (String)e.nextElement();\n\tString[] s = request.getParameterValues( n );\n\tfor (int i=0; i<s.length; i++)\n\t\tout.print(n+\" = \"+s[i]+\"<br>\");\n}\nout.println(\"End list<br>\");\n\n%>\n\n\n\nPart example 2 -----------------------------------------\n\nindex.jsp:\n<%@page\ncontentType=\"text/html; charset=utf-8\"\nlanguage=\"java\"\nimport=\"mill.main.Constants,\n        mill.tools.ServletTools,\n        mill.db.DBconnect,\n        mill.port.InitPage,\n        java.util.Enumeration\"\n%><%\n\n    if (request.getParameter(Constants.NAME_ADMIN_PARAM)!=null)\n    {\n        DBconnect db_ = DBconnect.getInstance( false );\n\n        InitPage  jspPage =  new InitPage(db_, request, response,\n        Constants.URI_START_PAGE, null,\n        Constants.NAME_LANG_PARAM, null, null);\n        response.sendRedirect(\n            response.encodeURL( Constants.URI_LOGIN_PAGE+'?'+jspPage.addURL)\n        );\n        return;\n    }\n%>\n<jsp:include page=\"/share/logic/main_shop_logic.jsp\"/>\n<jsp:include page=\"/include/contbox11.jsp\"/>\n<%\n\tsession.setAttribute(Constants.NAME_PORTLET_PARAM, \"news_block\");\n%>\n<jsp:include page=\"/share/ctx/portlet.jsp\">\n\t<jsp:param name=\"<%= Constants.NAME_PORTLET_PARAM %>\" \nvalue=\"news_block\"/>\n</jsp:include>\n<%\n\tsession.removeAttribute(Constants.NAME_PORTLET_PARAM);\n%>\n\n<!-- </jsp:include page=\"/share/ctx/news_block.jsp\"/\\>-->\n<jsp:include page=\"/include/contbox12.jsp\"/>\n\n\npart of /share/ctx/portlet.jsp:\n<%@page\npageEncoding=\"utf-8\"\nlanguage=\"java\"\nimport=\"java.util.Calendar,\n        java.util.Enumeration,\n        java.io.StringReader,\n        java.io.File,\n        java.io.FileOutputStream,\n        javax.xml.transform.TransformerFactory,\n        javax.xml.transform.Transformer,\n        javax.xml.transform.Source,\n        javax.xml.transform.stream.StreamSource,\n        javax.xml.transform.stream.StreamResult,\n        mill.db.DBconnect,\n        mill.port.*,\n        mill.tools.*,\n        mill.main.* ,\n        mill.portlet.NewsItem,\n        mill.portlet.NewsItemXML,\n        org.exolab.castor.mapping.Mapping,\n        org.apache.log4j.Category,\n        java.io.StringWriter,\n        mill.startup.InitParam,\n        mill.portlet.PortletDescription,\n        java.lang.reflect.Method,\n        mill.portlet.PortletClassXML,\n        mill.portlet.PortletClassBase,\n        java.lang.reflect.Constructor\"\n\n%><%!\n\n    private  static Category cat =  Category.getInstance( \"share-ctx-\nportlet.jsp\");\n\n    %><%\n\n        InitPage.setContentType(response);\n\n        cat.debug(\"Start execute portlet\");\n\n        for (Enumeration e = request.getParameterNames(); e.hasMoreElements\n() ;) {\n            cat.debug(\"Parameter: \"+e.nextElement());\n        }\n\n\n// xxxx if type of portlet not specified, redirect to index page.\n// Session ID if cookie disabled, will be lost.\n        String type__ = (String)session.getAttribute\n(Constants.NAME_PORTLET_PARAM);\n        if (ServletTools.isNotInit(request, response,\n                Constants.NAME_PORTLET_PARAM,Constants.URI_START_PAGE) &&\n                (type__== null || type__.length() ==0))\n            return;\n\n        cat.debug(\"#1.00\");\n\n        String typePortlet = ServletTools.getString(request, \nConstants.NAME_PORTLET_PARAM);\n        if (typePortlet == null || typePortlet.length()==0)\n        {\n            cat.debug(\"Parameter jsp:param not initialized. Using param from \nsession - \"+type__);\n            typePortlet = type__;\n        }\n\n\npart of log4j:\n70261 INFO  mill.db.DBconnect  - Success create static object mill.db.ORAconnect\n79164 INFO  mill.startup.InitParam  - #2.05 start unmarshal portlet list\n79254 DEBUG share-ctx-portlet.jsp  - Start execute portlet\n79254 DEBUG share-ctx-portlet.jsp  - Parameter: m\n79254 DEBUG share-ctx-portlet.jsp  - Parameter: mill.lang\n79254 DEBUG share-ctx-portlet.jsp  - #1.00\n79274 DEBUG share-ctx-portlet.jsp  - Parameter jsp:param not initialized. Using \nparam from session - news_block\n79555 DEBUG share-ctx-portlet.jsp  - #12.12.005  constructor is public \nmill.portlet.NewsBlock\n(mill.db.DBconnect,javax.servlet.http.HttpServletRequest,javax.servlet.http.Http\nServletResponse,mill.port.InitPage) throws mill.main.NewsException\n\n", "id": 21606, "time": "2002-08-23T14:56:53Z", "bug_id": 11948, "creation_time": "2002-08-23T14:56:53Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "Created attachment 2816\nFiles for test case and configuration", "attachment_id": 2816, "bug_id": 11948, "id": 21627, "time": "2002-08-23T16:55:47Z", "creator": "trox@grizella.com", "creation_time": "2002-08-23T16:55:47Z", "is_private": false}, {"count": 5, "tags": [], "creator": "trox@grizella.com", "text": "Duplicated in 4.1.9B, also.  Attached are test cases and config files.  This \nbug occurs on three machines:  2000 Server, XP, and linix.", "id": 21628, "time": "2002-08-23T16:57:45Z", "bug_id": 11948, "creation_time": "2002-08-23T16:57:45Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "serg_main@yahoo.com", "text": "Where in prev test case <jsp:param>?", "id": 21630, "time": "2002-08-23T17:13:58Z", "bug_id": 11948, "creation_time": "2002-08-23T17:13:58Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 11948, "attachment_id": null, "id": 21633, "time": "2002-08-23T17:24:08Z", "creator": "jakarta@trollingers.com", "creation_time": "2002-08-23T17:24:08Z", "is_private": false, "text": "test case is missing a file NASTCFooter.jsp"}, {"count": 8, "tags": [], "bug_id": 11948, "attachment_id": null, "text": "Test case also does not have a jsp:include with a param??", "id": 21634, "time": "2002-08-23T17:28:01Z", "creator": "jakarta@trollingers.com", "creation_time": "2002-08-23T17:28:01Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 11948, "attachment_id": 2817, "id": 21637, "time": "2002-08-23T17:40:07Z", "creator": "trox@grizella.com", "creation_time": "2002-08-23T17:40:07Z", "is_private": false, "text": "Created attachment 2817\nClient file of include, with jsp:params"}, {"count": 10, "tags": [], "bug_id": 11948, "attachment_id": null, "id": 21638, "time": "2002-08-23T17:42:10Z", "creator": "trox@grizella.com", "creation_time": "2002-08-23T17:42:10Z", "is_private": false, "text": "I included the wrong example in the first attachment.  CreateInvoice.jsp has \nthe jsp:params.\n\nThe problem is that the jsp:param values are not set as far as the HEADER is \nconcerned.  So the html from the include is included, but the table width and \npage title are both null.\n\nThe footer is not necessary to see if it works or not, you could just remove \nthat include if you want."}, {"count": 11, "tags": [], "text": "In my case i use variable for define name of param.\nwrong: <jsp:param name=\"<%= someVariable %>\" value=\"123\"/>\nright: <jsp:param name=\"\\\"+ someVariable +\\\"\" value=\"123\"/>\n\nIn your case, John, you use reserved char in value - '?' and '%'. Remove this \nchar from value and all will work.\n\n\n", "attachment_id": null, "bug_id": 11948, "id": 21640, "time": "2002-08-23T18:19:09Z", "creator": "serg_main@yahoo.com", "creation_time": "2002-08-23T18:19:09Z", "is_private": false}, {"count": 12, "attachment_id": null, "bug_id": 11948, "text": "in the file you sent you had getAttribute(\"pageTitle\")\n\nit should be\n\n\n<head>\n  \t<title>NASTC TPP Admin--<%= request.getParameter(\"pageTitle\")%></title>\n</head>\n\nthis all works for me fine.", "id": 21641, "time": "2002-08-23T18:20:10Z", "creator": "jakarta@trollingers.com", "creation_time": "2002-08-23T18:20:10Z", "tags": [], "is_private": false}, {"count": 13, "tags": [], "bug_id": 11948, "attachment_id": null, "id": 21643, "time": "2002-08-23T18:36:07Z", "creator": "jakarta@trollingers.com", "creation_time": "2002-08-23T18:36:07Z", "is_private": false, "text": "\nSerg,\nYou lost me on this one\n> wrong: <jsp:param name=\"<%= someVariable %>\" value=\"123\"/>\n> right: <jsp:param name=\"\\\"+ someVariable +\\\"\" value=\"123\"/>\n\nif someVariable is a java var then your \"right\" will not compile\nthe \"wrong\" example works fine, so I realy dont know where you were going with \nthis??"}, {"count": 14, "tags": [], "bug_id": 11948, "attachment_id": null, "text": "Serg Maslyukov was partially right, thanks.  Apparently, the values passed must \nbe in a valid URL encoded format.  The \"%\" caused the problem, which resulted \nin niether params getting set.  The \"?\" does not seem to cause any problems.  \nThe following code works:\n\n<jsp:include page=\"/NASTCHeader.jsp\">\n    <jsp:param name=\"pageTitle\" value=\"Create Invoice?\" />\n    <jsp:param name=\"pageWidth\" value=\"100%25\" />\n</jsp:include>\n", "id": 21811, "time": "2002-08-27T15:29:03Z", "creator": "trox@grizella.com", "creation_time": "2002-08-27T15:29:03Z", "is_private": false}]