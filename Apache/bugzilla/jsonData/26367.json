[{"text": "Problem Summary:\n\nAdding the 'satisfy any' argument to a .htaccess file exposes otherwise\nrestricted file types\n\nBody:\n\nThe webserver has the following configuration which limits access to .htaccess,\n.users, etc by default:\n\n<FilesMatch \"^\\.(ht|users$|groups$)\">\n    Order deny,allow\n    Deny from all\n</FilesMatch>\n\nThe above works fine with the following exception - If I create a subdirectory\nthat has a .htaccess file using the 'satisfy any' directive, any of the valid\nusers can now view the .htaccess or .users files (if they're below the server\nroot).  Here is a sample .htaccess file:\n\nAuthName \"Restricted Area\"\nAuthType Basic\nAuthUserFile /path/to/.users\nAuthGroupFile /dev/null\norder deny,allow\ndeny from all\nallow from .domain1.com .domain2.com\nrequire valid-user\nsatisfy any\n\nIf I remove the 'satisfy any' argument or remove the .htaccess file, the .users\nfile is properly shielded from public eyes.  Adding the above quoted 'Files'\ndeclarations to the .htaccess file does not change anything.\n\nAnother experience of the same problem is linked to below from year 2000:\n\nhttp://groups.google.com/groups?hl=en&lr=&ie=UTF-8&oe=utf-8&threadm=8vYn4.1679%24Tc.101070%40typhoon-la.pbi.net&rnum=3&prev=/groups%3Fq%3Dhtaccess%2Bsatisfy%2Bbug%26btnG%3DGoogle%2BSearch%26hl%3Den%26lr%3D%26ie%3DUTF-8%26oe%3Dutf-8", "tags": [], "creator": "nocrapo@hotmail.com", "attachment_id": null, "count": 0, "id": 51015, "time": "2004-01-22T23:32:09Z", "bug_id": 26367, "creation_time": "2004-01-22T23:32:09Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nd@perlig.de", "text": "Sure. That's what satisfy any is supposed for. Since I don't see a bug here,\nmarking the report as invalid.", "id": 51017, "time": "2004-01-22T23:58:15Z", "bug_id": 26367, "creation_time": "2004-01-22T23:58:15Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 26367, "attachment_id": null, "is_private": false, "id": 51019, "time": "2004-01-23T00:13:13Z", "creator": "nocrapo@hotmail.com", "creation_time": "2004-01-23T00:13:13Z", "text": "Is there a \"proper\" way to work around this?  If there isn't, I don't see how\nthis can't be considered a bug since it directly overrides the Files setting in\nthe server configuration and provides no way to turn that \"functionality\" off.\n\nMy understanding is that \"satisfy any\" should satisfy both the hostname and\nvalid-user requirements, leaving other security precautions in place and\nunchanged (unless specifically told to do so).\n\nIs this incorrect?"}, {"count": 3, "tags": [], "bug_id": 26367, "text": "Ah, the meaning is the other way 'round. Any of the access restrictions has to\nbe satisfied to *fullfill the request*. You want satisfy all, where all\nrestrictions must be satisfied. Makes sense?", "id": 51020, "attachment_id": null, "creator": "nd@perlig.de", "creation_time": "2004-01-23T00:18:34Z", "time": "2004-01-23T00:18:34Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 26367, "is_private": false, "text": "Apologies for the brain fart on my part :)  I meant to say \"My understanding is\nthat \"satisfy any\" should satisfy EITHER the hostname OR\nvalid-user requirements...\".\n\nBut either way, is it the intent of the \"satisfy any\" argument to completely\noverride \"Files\" configurations?  Even if I specify the below statement in the\n.htaccess file, the problem remains:\n\n<Files .htaccess>\n    Order deny,allow\n    Deny from all\n</Files>\n\nAny ideas how to get apache to NOT override the httpd.conf's configuration\ndenying access to .ht,.users,.groups file, etc?  It seems to me that having no\nway to disable viewing of these files when using the \"satisfy any\" parameter is\na bit of a security risk?\n\nThank you :)", "id": 51023, "time": "2004-01-23T00:25:38Z", "creator": "nocrapo@hotmail.com", "creation_time": "2004-01-23T00:25:38Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 26367, "attachment_id": null, "is_private": false, "id": 51303, "time": "2004-01-28T18:29:04Z", "creator": "nd@perlig.de", "creation_time": "2004-01-28T18:29:04Z", "text": "Just put a Satisfy All into the files container. For more information please see\n<http://httpd.apache.org/docs-2.0/sections.html#mergin> and/or ask in a user\nsupport forum."}]