[{"count": 0, "tags": [], "bug_id": 32066, "attachment_id": null, "id": 66476, "time": "2004-11-04T21:00:49Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2004-11-04T21:00:49Z", "is_private": false, "text": "There is a bug in the <exec> command under WinXP. Invoking exec on \"devenv\"\ninvokes \"devenv.exe\" even though it should invoke \"devenv.com\". This is why when\none invokes devenv commands from cmd.exe you see the output but from ant you see\nnothing. The reason being that one *must* invoke devenv.com in order to see any\nsort of output to stdout or stderr."}, {"count": 1, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "id": 66477, "time": "2004-11-04T21:36:47Z", "bug_id": 32066, "creation_time": "2004-11-04T21:36:47Z", "is_private": false, "text": "Could you add some supporting debug output, perhaps?  At first glance I don't \nsee how this is possible from Ant's source code.  Can you verify the problem \nexists with the latest Ant release, or whether it exists only on WinXP?"}, {"count": 2, "attachment_id": null, "creator": "cowwoc@bbs.darktech.org", "is_private": false, "id": 66481, "time": "2004-11-04T22:07:00Z", "bug_id": 32066, "creation_time": "2004-11-04T22:07:00Z", "tags": [], "text": "Matt,\n\nI can't test under anything other than WinXP since I don't have anything else.\nYou can find more information on the issue here:\n\nhttp://www.google.ca/search?q=cache:gpHR5UnC_NwJ:www.mail-archive.com/user%40ant.apache.org/msg11390.html+ant+devenv&hl=en\n\nor\n\nhttp://groups.google.ca/groups?hl=en&lr=&threadm=estP9.67050%24Nz5.1996252%40twister.austin.rr.com&rnum=1&prev=/groups%3Fhl%3Den%26lr%3D%26q%3Dant%2Bdevenv%26btnG%3DSearch\n\nThese are links to discussions of other people on the same issue. I think the\nbest way for you to reproduce the problem is to try it on your end. The code\nsniplet I am using in ANT is:\n\n\t<target name=\"compile.native.debug\" depends=\"generate.native.proxy\"\ndescription=\"Compiles native components\">\n\t\t<exec executable=\"devenv.com\" failonerror=\"true\">\n\t\t\t<arg line=\"/build debug\"/>\n\t\t\t<arg file=\"c++/vc++7.1/vc++7.1.sln\"/>\n\t\t</exec>\n\t</target>\n\n  If you rename \"devenv.com\" to simply \"devenv\" you will not you get no output.\nThe only thing you need to run devenv is some sample VC++ project/solution (I\nuse vc++7.1.sln in my case)."}, {"count": 3, "tags": [], "text": "It seems minor - one can just put \"devenv.com\".", "is_private": false, "id": 66482, "creator": "alexeys@inventigo.com", "time": "2004-11-04T22:13:30Z", "bug_id": 32066, "creation_time": "2004-11-04T22:13:30Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "Alexy,\n\nYes, it is functionally minor, but not from a usability point of view. As you\ncan see by the links I promided, some people sent days trying to figure out why\nAnt wasn't behavior like cmd.exe and they eventually just gave up. This issue\nshould be fixed before it bites more people in the ass :) I just got lucky and\nit still took me an hour to figure out.", "is_private": false, "id": 66484, "creator": "cowwoc@bbs.darktech.org", "time": "2004-11-04T22:19:07Z", "bug_id": 32066, "creation_time": "2004-11-04T22:19:07Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "mbenson@apache.org", "text": "If you can't test anything other than XP, what version of Java are you using \nand can you test with another version?\n\nI can't access either of those links, for some reason.", "id": 66488, "time": "2004-11-04T23:05:18Z", "bug_id": 32066, "creation_time": "2004-11-04T23:05:18Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 32066, "attachment_id": null, "id": 66495, "time": "2004-11-05T03:28:55Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2004-11-05T03:28:55Z", "is_private": false, "text": "Matt,\n\nI am using JDK 1.5. More specifically:\n\njava version \"1.5.0\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0-b64)\nJava HotSpot(TM) Client VM (build 1.5.0-b64, mixed mode)\n\nI think the key is to get you guys to reproduce the problem on your end so you\ncan track the problem back to the source. Me experimenting on my end is\npointless unless it is to help you reproduce the problem.\n\nFirst question, does any of you have VC++ 2003 on your end? If not I guess we\ncan try with some other .com/.exe combination. If you have VC++ 2003, just try\ncomparing what happens when you invoke \"devenv /build debug\" in cmd.exe versus\ninside a <exec> task in Ant. You will notice that when run under Ant, you get no\noutput unless you explicitly refer to the .com extension."}, {"count": 7, "tags": [], "bug_id": 32066, "is_private": false, "id": 66510, "creation_time": "2004-11-05T08:58:16Z", "time": "2004-11-05T08:58:16Z", "creator": "stevel@apache.org", "text": "This is not part of ant, this is the documented behaviour of the Win32 API call \n::CreateProcess\n\n\"If the file name does not contain an extension, .exe is appended. Therefore, if\nthe file name extension is .com, this parameter must include the .com extension.\"\n\nWe are just calling exec() in the Java runtime, clearly the runtime itself is\ncalling ::CreateProcess underneath. \n\nhttp://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/createprocess.asp\n\nI therefore do not believe it is a bug, either in Ant or Java. \n\nThe fact that the shell behaves differently is because it (presumably) looks\nthrough the value of %PATHEXT%, which on my XP box is .COM;.EXE;.BAT;.CMD;.PL;\n(note I deletes all the WSH scripting junk and added perl). If you type in a\ncommand on the command line, it will search through the list in that order till\nit gets a match.\n\n<exec> does *not* go through the shell, nor does Runtime.exec() that we use -so\nwe get the direct semantics of ::CreateProcess(). \n\nMarking as invalid, because it isnt a bug. We may want to clarify this fact in\nthe docs", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 32066, "attachment_id": null, "id": 66522, "time": "2004-11-05T13:28:41Z", "creator": "conor@apache.org", "creation_time": "2004-11-05T13:28:41Z", "is_private": false, "text": "Agree with Steve but just wanted to add that if you set vmlauncher=\"false\" you\n*do* go through the shell and get the output in the log (I do have devenv installed)\n"}]