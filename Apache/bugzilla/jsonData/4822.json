[{"count": 0, "tags": [], "bug_id": 4822, "text": "Get below crash when trying to use ejbjar.  When I use basejarname attribute, \nit works.  Getting rid of basejarname and using the naming attribute (and \nsetting it to \"directory\"), it bombs.\n\nSample Ant code:\n  <target name=\"ejbjar-calculator\" depends=\"compile\">\n    <echo message=\"Creating calculator-ejb.jar file...\"/>\n\n    <ejbjar srcdir=\"${build.dir}/classes\"\n            destdir=\"${staging.dir}\"\n            descriptordir=\"${dd.dir}/calculator\"\n            naming=\"directory\"\n            flatdestdir=\"true\">\n      <classpath>\n        <pathelement location=\"${build.dir}/classes\"/>\n      </classpath>\n      <include name=\"ejb-jar.xml\"/>\n      <exclude name=\"weblogic*.xml\"/>\n      <weblogic destdir=\"${staging.dir}\"\n                compiler=\"${build.compiler.exec}\"\n                keepgenerated=\"${debug}\"\n                newCMP=\"true\">\n        <wlclasspath refid=\"wl.classpath\"/>\n      </weblogic>\n    </ejbjar>\n  </target>\n\nException trace:\n\njava.lang.StringIndexOutOfBoundsException: String index out of range: -1\n        at java.lang.String.substring(String.java:1525)\n        at org.apache.tools.ant.taskdefs.optional.ejb.GenericDeploymentTool.getJ\narBaseName(GenericDeploymentTool.java:512)\n        at org.apache.tools.ant.taskdefs.optional.ejb.GenericDeploymentTool.proc\nessDescriptor(GenericDeploymentTool.java:317)\n        at org.apache.tools.ant.taskdefs.optional.ejb.EjbJar.execute(EjbJar.java\n:525)\n        at org.apache.tools.ant.Task.perform(Task.java:217)\n        at org.apache.tools.ant.Target.execute(Target.java:184)\n        at org.apache.tools.ant.Target.performTasks(Target.java:202)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:601)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:560)\n        at org.apache.tools.ant.Main.runBuild(Main.java:454)\n        at org.apache.tools.ant.Main.start(Main.java:153)\n        at org.apache.tools.ant.Main.main(Main.java:176)", "id": 7816, "time": "2001-11-12T18:50:07Z", "creator": "jdfagan@hotmail.com", "creation_time": "2001-11-12T18:50:07Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "conor@apache.org", "text": "Fixed in CVS - Thanks.\nPlease try next nightly build.", "id": 12071, "time": "2002-03-20T13:35:29Z", "bug_id": 4822, "creation_time": "2002-03-20T13:35:29Z", "is_private": false, "attachment_id": null}]