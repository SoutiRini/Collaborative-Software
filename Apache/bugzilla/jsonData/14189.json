[{"count": 0, "tags": [], "bug_id": 14189, "attachment_id": null, "id": 25506, "time": "2002-11-02T13:30:48Z", "creator": "Robert.Dahlem@gmx.net", "creation_time": "2002-11-02T13:30:48Z", "is_private": false, "text": "Under ReliantUNIX 5.43 (formerly SINIX) dlopen() is located in libc.so but\ndlsym() is in libdl.so (ok, that's wierd but fact).\n\nsrclib/apr/configure.in first checks for dlopen() without any additional libs,\nthen with APR_ADDTO(LIBS,-ldl). As the first test succeeds it wont try to use\n-ldl and will fail in the link phase with \"unresolved symbol dlsym\".\n\nSuggested workaround is to check for dlsym() too, first without additional libs,\nafterwards with -ldl"}, {"count": 1, "tags": [], "bug_id": 14189, "attachment_id": null, "id": 25674, "time": "2002-11-05T11:48:47Z", "creator": "trawick@apache.org", "creation_time": "2002-11-05T11:48:47Z", "is_private": false, "text": "Yes, this is weird!  \n\nPlease try the patch below.\n\nBy the way, I'm changing the product to \"APR\" since that is the package\nwhich handles most of these system-dependent issues for Apache.\n\nIndex: srclib/apr/configure.in\n===================================================================\nRCS file: /home/cvs/apr/configure.in,v\nretrieving revision 1.495\ndiff -u -r1.495 configure.in\n--- srclib/apr/configure.in     24 Oct 2002 00:09:35 -0000      1.495\n+++ srclib/apr/configure.in     5 Nov 2002 11:45:34 -0000\n@@ -1283,6 +1283,17 @@\n       AC_CHECK_LIB(dl, dlopen, [ tempdso=\"dlfcn\" APR_ADDTO(LIBS,-ldl) ],\n                    tempdso=\"no\")\n     fi\n+    if test \"$tempdso\" = \"dlfcn\"; then\n+        # ReliantUnix has dlopen() in libc but dlsym() in libdl :(\n+        AC_CHECK_FUNCS(dlsym, [ tempdso=\"dlfcn\" ], [ tempdso=\"no\" ])\n+        if test \"$tempdso\" = \"no\"; then\n+            AC_CHECK_LIB(dl, dlsym, [ tempdso=\"dlfcn\" APR_ADDTO(LIBS, -ldl) ],\n+                         tempdso=\"no\")\n+        fi\n+        if test \"$tempdso\" = \"no\"; then\n+            echo \"Weird: dlopen() was found but dlsym() was not found!\"\n+        fi\n+    fi\n     if test \"$tempdso\" = \"no\"; then\n       AC_CHECK_LIB(root, load_image, tempdso=\"yes\", tempdso=\"no\")\n     fi\n"}, {"count": 2, "tags": [], "bug_id": 14189, "attachment_id": null, "text": "Ok, configure now reports:\n\nchecking for dlopen... yes       \nchecking for dlsym... no         \nchecking for dlsym in -ldl... yes\n  adding \"-ldl\" to LIBS          \n\nand it compiles cleanly.\n\nThank you!", "id": 25697, "time": "2002-11-05T15:43:41Z", "creator": "Robert.Dahlem@gmx.net", "creation_time": "2002-11-05T15:43:41Z", "is_private": false}, {"count": 3, "tags": [], "creator": "trawick@apache.org", "text": "The fix has been committed to APR.  Thanks for testing it so quickly!\n\nThanks for your report, and thanks for using Apache 2.0+APR!\n", "id": 25700, "attachment_id": null, "bug_id": 14189, "creation_time": "2002-11-05T16:05:01Z", "time": "2002-11-05T16:05:01Z", "is_private": false}]