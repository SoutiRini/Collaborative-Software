[{"attachment_id": null, "tags": [], "bug_id": 21927, "is_private": false, "count": 0, "id": 41629, "time": "2003-07-28T10:19:53Z", "creator": "cougar@random.ee", "creation_time": "2003-07-28T10:19:53Z", "text": "I have systemwide php binary and use it for php scripts. Also I use suexec to\nrun each php script in right user permissions. The configuration is following:\n\nScriptAlias /cgi-sbin/ /www/cgi-sbin/\nAction application/x-httpd-php /cgi-sbin/php-4.3.2\nAddType application/x-httpd-php .php\n\nI have test.php file in directory /customer. This directory is protected with\nuser authentications.\n\nNow I access to www.customer.com/test.php and browser asks me username. I enter\nit and after that php script will be run. And here is the problem. mod_action\nrewrites url and does internal_redirect(). After that server cheks /www/cgi-sbin\ndirectory permissions and because there are no protection, it run php binary.\nBut, because there was no authentication, php script don't get $REMOTE_USER\nvariable.\n\nI solved this with following patch:\n\ndiff -urd httpd-2.0.46.orig/modules/http/http_request.c\nhttpd-2.0.46/modules/http/http_request.c\n--- httpd-2.0.46.orig/modules/http/http_request.c       2003-05-19\n18:24:05.000000000 +0300\n+++ httpd-2.0.46/modules/http/http_request.c    2003-07-24 21:47:27.000000000 +0300\n@@ -385,6 +385,7 @@\n     new->allowed_methods = ap_make_method_list(new->pool, 2);\n \n     new->htaccess        = r->htaccess;\n+    new->user            = r->user;\n     new->no_cache        = r->no_cache;\n     new->expecting_100   = r->expecting_100;\n     new->no_local_copy   = r->no_local_copy;\n\n---\nCougar"}, {"count": 1, "tags": [], "bug_id": 21927, "is_private": false, "id": 41633, "attachment_id": null, "creator": "nd@perlig.de", "creation_time": "2003-07-28T10:40:21Z", "time": "2003-07-28T10:40:21Z", "text": "\n\n*** This bug has been marked as a duplicate of 10678 ***"}]