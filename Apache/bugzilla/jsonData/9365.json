[{"count": 0, "text": "I recently tried to upgrade from 1.3.23 to 1.3.24.  My application stopped \nworking correctly so I downgraded.\n\nI have a secure apache server using mod_ssl running on an external machine.  \nexternal.mydomain.com\nI have an application server running on an interal machine. \ninternal.mydomain.com\n\nI configured Apache to pass requests through so people can access the \napplication on the internal machine from the open internet using mod_proxy.  It \nworks great.\n\nAfter upgrading it works for GET requests but the first POST request passes the \ninternal URL back.  Instead of https://external.mydomain.com/myapp/foo.jsp the \nurl changes to http://internal.mydomain.com:8888/myapp/foo.jsp\n\nHere is my configuration.  Inside my virtual_host section for SSL\n\nProxyPass /myapp/ http://interal.mydomain.com:8888/myapp/\nProxyPassReverse /myapp/ http://interal.mydomain.com:8888/myapp/", "creator": "rtoub@eudoramail.com", "is_private": false, "id": 16606, "time": "2002-05-23T19:35:58Z", "bug_id": 9365, "creation_time": "2002-05-23T19:35:58Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "creator": "minfrin@sharp.fm", "is_private": false, "text": "ProxyPassReverse will only change the internal URL if there is an exact string\nmatch. From the config you have posted, you are trying to hide \"interal\" instead\nof \"internal\".\n", "id": 16736, "time": "2002-05-26T19:11:00Z", "bug_id": 9365, "creation_time": "2002-05-26T19:11:00Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9365, "attachment_id": null, "is_private": false, "id": 16841, "time": "2002-05-28T23:00:34Z", "creator": "rtoub@eudoramail.com", "creation_time": "2002-05-28T23:00:34Z", "text": "Sorry about that.  I am trying to hide my actual host names for security \nreasons.\n\nThe names are the same in my actual config file.  I misspelled internal in my \ndescription.\n\nI did not change the config file during the upgrade."}, {"count": 3, "tags": [], "bug_id": 9365, "text": "Can you use a tool like tcpflow to sniff the network to determine what is sent\nas a request to the backend in the POST, and what the POST sends back in reply?\nI basically need the headers of the request and response, not the body.\n\nThis will help determine what proxy is matching / is no longer matching, and\nwhat the problem is. So far, proxy works fine for me - need to know what's\ndifferent between my setup and yours.\n", "id": 17065, "time": "2002-06-03T10:07:42Z", "creator": "minfrin@sharp.fm", "creation_time": "2002-06-03T10:07:42Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 9365, "attachment_id": null, "is_private": false, "id": 17358, "time": "2002-06-06T21:50:56Z", "creator": "rtoub@eudoramail.com", "creation_time": "2002-06-06T21:50:56Z", "text": "HTTP/1.1 302 Moved Temporarily\nDate: Thu, 06 Jun 2002 21:22:34 GMT\nServer: Oracle9iAS (1.0.2.2.1) Containers for J2EE\nContent-Length: 417\nConnection: Close\nContent-Type: text/html; charset=ISO-8859-1\nLocation: \nhttp://internal.mydomain.com:8888/myapp/messageofday.jsp;jsessionid=2a642a749896\n4\n\n\nI think I may understand what is going on.  It has to do with how \nresponse.sendRedirect is handled in jsp.  It sends a redirect to the browser so \nit loads the page.  It has nothing to do with GET or POST.  The new behavior ( \nsupport for HTTP/1.1?) in the new version of mod_proxy causes this.\n\nI POST the login information to the same page and if it validates I use a \nresponse.sendRedirect command to go the the next page.\n\nI don't know enough about the standerds to know if this is a desired behaviour \nof mod_proxy or a bug.  If it isn't a bug I will have to find another way to \nimplement my security because my application uses sendRedirect on most pages."}, {"count": 5, "tags": [], "bug_id": 9365, "text": "Could anybody help me with this?  I need to know if there is a bug in my jsp or \nit is a bug with mod rewrite and the HTTP/1.1 standard.\n\nI am stuck at 1.3.23 untill this is resolved.", "id": 17997, "time": "2002-06-18T15:30:19Z", "creator": "rtoub@eudoramail.com", "creation_time": "2002-06-18T15:30:19Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "I'm seeing a similar problem with version 1.3.26.  It seems to happen when the \nproxied server issues a redirect.\n\nMy Proxy configuration is:\n   ProxyVia On\n   ProxyPass / http://server:5081/\n   ProxyPassReverse / http://server:5081/\n\nWhat's happening is that mod_proxy is not replacing the original Location \nheader (the one that references the proxied server).  Rather, its adding \nmultiple instances of the new Location header (the one that references the \nproxy server).\n\nGET /webworldtravel HTTP/1.0\n\nHTTP/1.1 302 Object Moved\nDate: Thu, 27 Jun 2002 18:17:39 GMT\nServer: Microsoft-IIS/5.0\nLocation: http://server:5081/webworldtravel/\nContent-Type: text/html\nContent-Length: 183\nVia: 1.1 server\nLocation: http://server/webworldtravel/\nContent-Length: 183\nVia: 1.1 server\nContent-Length: 183\nVia: 1.1 server\nX-Cache: MISS from server\nConnection: close\n\nWith version 1.3.19, there'd be only one Location header, the one that \nreferences the proxy server. ", "is_private": false, "id": 18673, "creator": "jeff_melnick@securecomputing.com", "time": "2002-06-27T18:24:46Z", "bug_id": 9365, "creation_time": "2002-06-27T18:24:46Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "Disregard my previous comment.  I was mistaken in what I was seeing.  Sorry for \nthe inconvienice.", "is_private": false, "id": 18676, "creator": "jeff_melnick@securecomputing.com", "time": "2002-06-27T20:05:12Z", "bug_id": 9365, "creation_time": "2002-06-27T20:05:12Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 9365, "attachment_id": null, "is_private": false, "id": 19195, "time": "2002-07-09T19:26:16Z", "creator": "rtoub@eudoramail.com", "creation_time": "2002-07-09T19:26:16Z", "text": "I installed 1.3.26 and it is working perfectly.  Whatever it was something in \n1.3.26 fixed the problem."}]