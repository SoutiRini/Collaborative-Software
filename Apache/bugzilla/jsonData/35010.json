[{"count": 0, "tags": [], "creator": "lee@pear-partnership.co.uk", "attachment_id": null, "is_private": false, "id": 75193, "time": "2005-05-22T11:59:51Z", "bug_id": 35010, "creation_time": "2005-05-22T11:59:51Z", "text": "scheduler fails to restore jobs at tomcat start up. Reported error is:\n\n[Fatal Error] jobs.xml:5:12: The prefix \"task\" for element \"task:task\" is \nnot bound.\n\nThis also prevents scheduling tasks (publish) in the gui. This fails with the\nsame error.\n\nEnvironment \n-----------\n  a.. tomcat 5.0.28\n  b.. jre version: 1.4.1_01\n  c.. lenya bin 1.2.3\n  d.. Linux , architecture: i386 , version: 2.4.7-10.um.1\n(note: 1.2.2 developed publications)\n\nStack traces for two scenarios follow.\n\nscheduling a task\n@tomcat startup\n\n---------------------------------------------------------------------\nscheduling a task\n\ncause: org.xml.sax.SAXParseException: The prefix \"task\" for element \"task:task\"\nis not bound.\n\nlocation: null\n\nfull exception chain stacktrace[hide]\n\norg.apache.cocoon.ProcessingException: Unable to get transformer handler for\ncocoon://scheduler/default/authoring/index.html.xsl?pipelinehash=-3612361032354639137:\norg.apache.excalibur.xml.xslt.XSLTProcessorException: Exception in creating\nTransform Handler\n\tat org.apache.cocoon.transformation.TraxTransformer.setup(TraxTransformer.java:318)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.setupPipeline(AbstractProcessingPipeline.java:398)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.preparePipeline(AbstractProcessingPipeline.java:503)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.process(AbstractProcessingPipeline.java:455)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.SerializeNode.invoke(SerializeNode.java:120)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.ContainerNode.invoke(ContainerNode.java:31)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.CallNode.invoke(CallNode.java:93)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.ActTypeNode.invoke(ActTypeNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat org.apache.cocoon.Cocoon.process(Cocoon.java:608)\n\tat org.apache.cocoon.servlet.CocoonServlet.service(CocoonServlet.java:1123)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat\norg.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:198)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:152)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)\n\tat org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:300)\n\tat org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:374)\n\tat org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:743)\n\tat org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:675)\n\tat org.apache.jk.common.SocketConnection.runIt(ChannelSocket.java:866)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)\n\tat java.lang.Thread.run(Thread.java:536)\nCaused by: org.apache.excalibur.xml.xslt.XSLTProcessorException: Exception in\ncreating Transform Handler\n\tat\norg.apache.excalibur.xml.xslt.XSLTProcessorImpl.getTransformerHandlerAndValidity(XSLTProcessorImpl.java:336)\n\tat org.apache.cocoon.transformation.TraxTransformer.setup(TraxTransformer.java:310)\n\t... 75 more\nCaused by: org.apache.cocoon.ProcessingException: Error executing pipeline.:\norg.apache.cocoon.ProcessingException: Failed to execute pipeline.:\norg.xml.sax.SAXParseException: The prefix \"task\" for element \"task:task\" is not\nbound.\n\tat\norg.apache.cocoon.components.source.impl.SitemapSource.toSAX(SitemapSource.java:423)\n\tat\norg.apache.excalibur.xml.xslt.XSLTProcessorImpl.sourceToSAX(XSLTProcessorImpl.java:359)\n\tat\norg.apache.excalibur.xml.xslt.XSLTProcessorImpl.getTransformerHandlerAndValidity(XSLTProcessorImpl.java:276)\n\t... 76 more\norg.apache.excalibur.xml.xslt.XSLTProcessorException: Exception in creating\nTransform Handler\n\tat\norg.apache.excalibur.xml.xslt.XSLTProcessorImpl.getTransformerHandlerAndValidity(XSLTProcessorImpl.java:336)\n\tat org.apache.cocoon.transformation.TraxTransformer.setup(TraxTransformer.java:310)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.setupPipeline(AbstractProcessingPipeline.java:398)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.preparePipeline(AbstractProcessingPipeline.java:503)\n\tat\norg.apache.cocoon.components.pipeline.AbstractProcessingPipeline.process(AbstractProcessingPipeline.java:455)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.SerializeNode.invoke(SerializeNode.java:120)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.ContainerNode.invoke(ContainerNode.java:31)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.CallNode.invoke(CallNode.java:93)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.ActTypeNode.invoke(ActTypeNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat org.apache.cocoon.Cocoon.process(Cocoon.java:608)\n\tat org.apache.cocoon.servlet.CocoonServlet.service(CocoonServlet.java:1123)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat\norg.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:198)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:152)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)\n\tat org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:300)\n\tat org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:374)\n\tat org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:743)\n\tat org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:675)\n\tat org.apache.jk.common.SocketConnection.runIt(ChannelSocket.java:866)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:683)\n\tat java.lang.Thread.run(Thread.java:536)\nCaused by: org.apache.cocoon.ProcessingException: Error executing pipeline.:\norg.apache.cocoon.ProcessingException: Failed to execute pipeline.:\norg.xml.sax.SAXParseException: The prefix \"task\" for element \"task:task\" is not\nbound.\n\tat\norg.apache.cocoon.components.source.impl.SitemapSource.toSAX(SitemapSource.java:423)\n\tat\norg.apache.excalibur.xml.xslt.XSLTProcessorImpl.sourceToSAX(XSLTProcessorImpl.java:359)\n\tat\norg.apache.excalibur.xml.xslt.XSLTProcessorImpl.getTransformerHandlerAndValidity(XSLTProcessorImpl.java:276)\n\t... 76 more\n\n---------------------------------------------------------------------\n\n@tomcat startup\n\n[Fatal Error] jobs.xml:5:12: The prefix \"task\" for element \"task:task\" is \nnot bound.\nERROR [main] (SchedulerWrapper.java:459) - Restoring jobs failed:\norg.quartz.SchedulerException: org.xml.sax.SAXParseException: The prefix \n\"task\" for element \"task:task\" is not bound. [See nested exception: \norg.xml.sax.SAXParseException: The prefix \"task\" for element \"task:task\" is \nnot bound.]\n        at \norg.apache.lenya.cms.scheduler.SchedulerStore.getJobElements(SchedulerStore.java:302)\n        at \norg.apache.lenya.cms.scheduler.SchedulerStore.restoreJobs(SchedulerStore.java:192)\n        at \norg.apache.lenya.cms.scheduler.SchedulerWrapper.restoreJobs(SchedulerWrapper.java:444)\n        at \norg.apache.lenya.cms.scheduler.LoadQuartzServlet.restoreJobs(LoadQuartzServlet.java:369)\n        at \norg.apache.lenya.cms.scheduler.LoadQuartzServlet.process(LoadQuartzServlet.java:135)\n\n\n-------------------------------------------------------------------"}, {"count": 1, "attachment_id": null, "creator": "jwkaltz@apache.org", "is_private": false, "id": 75198, "time": "2005-05-22T18:46:07Z", "bug_id": 35010, "creation_time": "2005-05-22T18:46:07Z", "tags": [], "text": "this error can not be reproduced in binary release running with built-in servlet\ncontainer (Jetty). It is either a specific user setup problem (XML libary\nincompatibility), or a problem with Tomcat. Try deleting\nlenya/pubs/<pub-name>/config/scheduler/jobs.xml (existing jobs file) and testing\nagain."}]