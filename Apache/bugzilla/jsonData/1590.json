[{"count": 0, "tags": [], "bug_id": 1590, "attachment_id": null, "id": 2190, "time": "2001-05-01T10:34:21Z", "creator": "yzhao71@yahoo.com", "creation_time": "2001-05-01T10:34:21Z", "is_private": false, "text": "*********************schema****************************************************\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsd:schema xmlns:xsd=\"http://www.w3.org/2000/10/XMLSchema\" \nelementFormDefault=\"qualified\">\n\t<xsd:element name=\"XUnitTest\">\n\t\t<xsd:complexType>\n\t\t\t<xsd:sequence>\n\t\t\t\t<xsd:element ref=\"test\" maxOccurs=\"unbounded\"/>\n\t\t\t</xsd:sequence>\n\t\t</xsd:complexType>\n\t</xsd:element>\n\t<!--\n\n\n-->\n\t<xsd:attribute name=\"name\" type=\"xsd:string\"/>\n\t<!--\n\n\n-->\n\t<xsd:element name=\"test\">\n\t\t<xsd:complexType>\n\t\t\t<xsd:sequence>\n\t\t\t\t<xsd:element name=\"instanciate\">\n\t\t\t\t\t<xsd:complexType>\n\t\t\t\t\t\t<xsd:sequence>\n\t\t\t\t\t\t\t<xsd:element \nref=\"class\" maxOccurs=\"unbounded\"/>\n\t\t\t\t\t\t</xsd:sequence>\n\t\t\t\t\t</xsd:complexType>\n\t\t\t\t\t<xsd:unique name=\"class_id_unique\">\n\t\t\t\t\t\t<xsd:selector xpath=\"class\"/>\n\t\t\t\t\t\t<xsd:field xpath=\"@id\"/>\n\t\t\t\t\t</xsd:unique>\n\t\t\t\t</xsd:element>\n\t\t\t\t<xsd:choice maxOccurs=\"unbounded\">\n\t\t\t\t\t<xsd:element ref=\"action\" \nmaxOccurs=\"unbounded\"/>\n\t\t\t\t</xsd:choice>\n\t\t\t</xsd:sequence>\n\t\t\t<xsd:attribute ref=\"name\"/>\n\t\t</xsd:complexType>\n\t</xsd:element>\n\t<!--\n\n\n-->\n\t<xsd:element name=\"method\">\n\t\t<xsd:complexType>\n\t\t\t<xsd:sequence>\n\t\t\t\t<xsd:element ref=\"parameter\" minOccurs=\"0\"/>\n\t\t\t</xsd:sequence>\n\t\t\t<xsd:attribute ref=\"name\"/>\n\t\t\t<xsd:attribute name=\"class-id\" type=\"xsd:string\" \nuse=\"default\"/>\n\t\t</xsd:complexType>\n\t</xsd:element>\n\t<!--\n\n\n-->\n\t<xsd:element name=\"action\">\n\t\t<xsd:complexType>\n\t\t\t<xsd:sequence>\n\t\t\t\t<xsd:element ref=\"method\"/>\n\t\t\t\t<xsd:element name=\"pass\" minOccurs=\"0\">\n\t\t\t\t\t<xsd:complexType>\n\t\t\t\t\t\t<xsd:choice>\n\t\t\t\t\t\t\t<xsd:element \nref=\"primitive\"/>\n\t\t\t\t\t\t\t<xsd:element \nref=\"object\"/>\n\t\t\t\t\t\t\t<xsd:element \nref=\"method\"/>\n\t\t\t\t\t\t</xsd:choice>\n\t\t\t\t\t</xsd:complexType>\n\t\t\t\t</xsd:element>\n\t\t\t</xsd:sequence>\n\t\t\t<xsd:attribute name=\"type\" use=\"required\">\n\t\t\t\t<xsd:simpleType>\n\t\t\t\t\t<xsd:restriction base=\"xsd:string\">\n\t\t\t\t\t\t<xsd:enumeration \nvalue=\"prepare\"/>\n\t\t\t\t\t\t<xsd:enumeration \nvalue=\"execution-time\"/>\n\t\t\t\t\t\t<xsd:enumeration value=\"equal\">\n\t\t\t\t\t\t\t<xsd:annotation>\n\t\t\t\t\t\t\t\n\t<xsd:documentation>performs a java.lang.Object.equals() method \ncall</xsd:documentation>\n\t\t\t\t\t\t\t</xsd:annotation>\n\t\t\t\t\t\t</xsd:enumeration>\n\t\t\t\t\t\t<xsd:enumeration \nvalue=\"compare\">\n\t\t\t\t\t\t\t<xsd:annotation>\n\t\t\t\t\t\t\t\n\t<xsd:documentation>performs a '=='comparison on objects and/or \nprimitives </xsd:documentation>\n\t\t\t\t\t\t\t</xsd:annotation>\n\t\t\t\t\t\t</xsd:enumeration>\n\t\t\t\t\t</xsd:restriction>\n\t\t\t\t</xsd:simpleType>\n\t\t\t</xsd:attribute>\n\t\t\t<xsd:attribute name=\"iteration\" type=\"xsd:integer\" \nuse=\"default\" value=\"1\"/>\n\t\t</xsd:complexType>\n\t</xsd:element>\n\t<!--\n\n\n-->\n\t<xsd:element name=\"primitive\">\n\t\t<xsd:complexType>\n\t\t\t<xsd:attribute name=\"type\" use=\"default\">\n\t\t\t\t<xsd:simpleType>\n\t\t\t\t\t<xsd:restriction base=\"xsd:string\">\n\t\t\t\t\t\t<xsd:enumeration value=\"byte\"/>\n\t\t\t\t\t\t<xsd:enumeration \nvalue=\"boolean\"/>\n\t\t\t\t\t\t<xsd:enumeration value=\"short\"/>\n\t\t\t\t\t\t<xsd:enumeration value=\"int\"/>\n\t\t\t\t\t\t<xsd:enumeration value=\"char\"/>\n\t\t\t\t\t\t<xsd:enumeration value=\"float\"/>\n\t\t\t\t\t\t<xsd:enumeration value=\"long\"/>\n\t\t\t\t\t\t<xsd:enumeration \nvalue=\"double\"/>\n\t\t\t\t\t\t<xsd:enumeration \nvalue=\"string\"/>\n\t\t\t\t\t</xsd:restriction>\n\t\t\t\t</xsd:simpleType>\n\t\t\t</xsd:attribute>\n\t\t\t<xsd:attribute name=\"value\" type=\"xsd:string\" \nuse=\"default\"/>\n\t\t\t<xsd:attribute name=\"id\" type=\"xsd:string\" \nuse=\"default\"/>\n\t\t</xsd:complexType>\n\t</xsd:element>\n\t<!--\n\n\n-->\n\t<xsd:element name=\"object\">\n\t\t<xsd:complexType>\n\t\t\t<xsd:attribute name=\"id\" type=\"xsd:string\" \nuse=\"default\"/>\n\t\t</xsd:complexType>\n\t</xsd:element>\n\t<!--\n\n\n-->\n\t<xsd:element name=\"parameter\">\n\t\t<xsd:complexType>\n\t\t\t<xsd:choice maxOccurs=\"unbounded\">\n\t\t\t\t<xsd:element ref=\"primitive\"/>\n\t\t\t\t<xsd:element ref=\"object\"/>\n\t\t\t</xsd:choice>\n\t\t</xsd:complexType>\n\t</xsd:element>\n\t<!--\n\n\n-->\n\t<xsd:element name=\"constructor\">\n\t\t<xsd:complexType>\n\t\t\t<xsd:sequence>\n\t\t\t\t<xsd:element ref=\"parameter\"/>\n\t\t\t</xsd:sequence>\n\t\t</xsd:complexType>\n\t</xsd:element>\n\t<!--\n\n\n-->\n\t<xsd:element name=\"class\">\n\t\t<xsd:complexType>\n\t\t\t<xsd:sequence>\n\t\t\t\t<xsd:element ref=\"constructor\" minOccurs=\"0\"/>\n\t\t\t</xsd:sequence>\n\t\t\t<xsd:attribute name=\"name\" type=\"xsd:string\" \nuse=\"default\"/>\n\t\t\t<xsd:attribute name=\"id\" type=\"xsd:string\" \nuse=\"default\"/>\n\t\t\t<xsd:attribute name=\"array\" use=\"optional\">\n\t\t\t\t<xsd:simpleType>\n\t\t\t\t\t<xsd:restriction base=\"xsd:boolean\">\n\t\t\t\t\t\t<xsd:enumeration value=\"true\"/>\n\t\t\t\t\t</xsd:restriction>\n\t\t\t\t</xsd:simpleType>\n\t\t\t</xsd:attribute>\n\t\t</xsd:complexType>\n\t</xsd:element>\n\t<!--\n\n\n-->\n</xsd:schema>\n\n*********************************xml file **************************************\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<XUnitTest xmlns:xsi=\"http://www.w3.org/2000/10/XMLSchema-instance\" \nxsi:noNamespaceSchemaLocation=\"C:\\model\\javatest\\testsuite\\XML\\UnitTest.xsd\">\n\t<test name=\"test1\">\n\t\t<instanciate>\n\t\t\t<class name=\"RTFOutput\" id=\"1\">\n\t\t\t\t<constructor>\n\t\t\t\t\t<parameter>\n\t\t\t\t\t\t<object id=\"11\"/>\n\t\t\t\t\t</parameter>\n\t\t\t\t</constructor>\n\t\t\t</class>\n\t\t\t<class name=\"javax.swing.text.DefaultStyledDocument\" \nid=\"11\"/>\n\t\t\t<class name=\"java.io.FileReader\" id=\"12\">\n\t\t\t\t<constructor>\n\t\t\t\t\t<parameter>\n\t\t\t\t\t\t<primitive type=\"string\" \nvalue=\"c:\\model\\test\\kong.rtf\"/>\n\t\t\t\t\t</parameter>\n\t\t\t\t</constructor>\n\t\t\t</class>\n\t\t\t<class name=\"java.io.BufferedReader\" id=\"13\">\n\t\t\t\t<constructor>\n\t\t\t\t\t<parameter>\n\t\t\t\t\t\t<object id=\"12\"/>\n\t\t\t\t\t</parameter>\n\t\t\t\t</constructor>\n\t\t\t</class>\n\t\t</instanciate>\n\t\t<action type=\"execution-time\" iteration=\"2\">\n\t\t\t<method name=\"readFromReader\" class-id=\"1\">\n\t\t\t\t<parameter>\n\t\t\t\t\t<object id=\"13\"/>\n\t\t\t\t</parameter>\n\t\t\t</method>\n\t\t\t<pass>\n\t\t\t\t<primitive type=\"long\" value=\"500\"/>\n\t\t\t</pass>\n\t\t</action>\n\t\t<action type=\"prepare\" iteration=\"1\">\n\t\t\t<method name=\"setCharacterSet\" class-id=\"1\">\n\t\t\t\t<parameter>\n\t\t\t\t\t<primitive type=\"string\" value=\"ansi\"/>\n\t\t\t\t</parameter>\n\t\t\t</method>\n\t\t</action>\n\t\t<action type=\"compare\" iteration=\"1\">\n\t\t\t<method name=\"handleKeyword\" class-id=\"1\">\n\t\t\t\t<parameter>\n\t\t\t\t\t<primitive type=\"string\" value=\"rtf\"/>\n\t\t\t\t\t<primitive type=\"int\" value=\"1\"/>\n\t\t\t\t</parameter>\n\t\t\t</method>\n\t\t\t<pass>\n\t\t\t\t<primitive type=\"boolean\" value=\"true\"/>\n\t\t\t</pass>\n\t\t</action>\n\t</test>\n</XUnitTest>\n\n\n************************error information*************************************\n\norg.xml.sax.SAXParseException: Datatype error: Only constraining facet in \nboolean datatype is PATTERN.\n\n\tat org.apache.xerces.framework.XMLParser.reportError\n(XMLParser.java:1068)\n\n\tat org.apache.xerces.validators.schema.TraverseSchema.reportSchemaError\n(TraverseSchema.java:5020)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.traverseSimpleTypeDecl\n(TraverseSchema.java:1128)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.traverseAttributeDecl\n(TraverseSchema.java:2787)\n\n\tat org.apache.xerces.validators.schema.TraverseSchema.processAttributes\n(TraverseSchema.java:2354)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.processComplexContent\n(TraverseSchema.java:2323)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.traverseComplexTypeDecl\n(TraverseSchema.java:1528)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.traverseElementDecl\n(TraverseSchema.java:3476)\n\n\tat org.apache.xerces.validators.schema.TraverseSchema.doTraverseSchema\n(TraverseSchema.java:411)\n\n\tat org.apache.xerces.validators.schema.TraverseSchema.<init>\n(TraverseSchema.java:261)\n\n\tat org.apache.xerces.validators.common.XMLValidator.resolveSchemaGrammar\n(XMLValidator.java:2477)\n\n\tat \norg.apache.xerces.validators.common.XMLValidator.bindNamespacesToElementAndAttri\nbutes(XMLValidator.java:2325)\n\n\tat org.apache.xerces.validators.common.XMLValidator.callStartElement\n(XMLValidator.java:921)\n\n\tat org.apache.xerces.framework.XMLDocumentScanner.scanElement\n(XMLDocumentScanner.java:1858)\n\n\tat \norg.apache.xerces.framework.XMLDocumentScanner$ContentDispatcher.dispatch\n(XMLDocumentScanner.java:1001)\n\n\tat org.apache.xerces.framework.XMLDocumentScanner.parseSome\n(XMLDocumentScanner.java:381)\n\n\tat org.apache.xerces.framework.XMLParser.parse(XMLParser.java:952)\n\n\tat UnitTest.doTest(UnitTest.java:621)\n\n\tat UnitTest.main(UnitTest.java:691)\n\nError: Line 2, Column 146\n\norg.xml.sax.SAXParseException: Schema error: could not resolve the type or get \na null validator for datatype : #S#2.\n\n\tat org.apache.xerces.framework.XMLParser.reportError\n(XMLParser.java:1068)\n\n\tat org.apache.xerces.validators.schema.TraverseSchema.reportSchemaError\n(TraverseSchema.java:5020)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.reportGenericSchemaError\n(TraverseSchema.java:5007)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.traverseAttributeDecl\n(TraverseSchema.java:2880)\n\n\tat org.apache.xerces.validators.schema.TraverseSchema.processAttributes\n(TraverseSchema.java:2354)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.processComplexContent\n(TraverseSchema.java:2323)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.traverseComplexTypeDecl\n(TraverseSchema.java:1528)\n\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.traverseElementDecl\n(TraverseSchema.java:3476)\n\n\tat org.apache.xerces.validators.schema.TraverseSchema.doTraverseSchema\n(TraverseSchema.java:411)\n\n\tat org.apache.xerces.validators.schema.TraverseSchema.<init>\n(TraverseSchema.java:261)\n\n\tat org.apache.xerces.validators.common.XMLValidator.resolveSchemaGrammar\n(XMLValidator.java:2477)\n\n\tat \norg.apache.xerces.validators.common.XMLValidator.bindNamespacesToElementAndAttri\nbutes(XMLValidator.java:2325)\n\n\tat org.apache.xerces.validators.common.XMLValidator.callStartElement\n(XMLValidator.java:921)\n\n\tat org.apache.xerces.framework.XMLDocumentScanner.scanElement\n(XMLDocumentScanner.java:1858)\n\n\tat \norg.apache.xerces.framework.XMLDocumentScanner$ContentDispatcher.dispatch\n(XMLDocumentScanner.java:1001)\n\n\tat org.apache.xerces.framework.XMLDocumentScanner.parseSome\n(XMLDocumentScanner.java:381)\n\n\tat org.apache.xerces.framework.XMLParser.parse(XMLParser.java:952)\n\n\tat UnitTest.doTest(UnitTest.java:621)\n\n\tat UnitTest.main(UnitTest.java:691)"}, {"attachment_id": null, "tags": [], "bug_id": 1590, "text": "The schema has an error where the attribute \"array\" is declared as \ntype \"xsd:boolean\". Facet \"enumeration\" cannot be used for <simpleType> \ndefinitions that restrict \"xsd:boolean\".\n\nChange \n<xsd:restriction base=\"xsd:boolean\">\nto\n<xsd:restriction base=\"xsd:string\">\nin your \"array\" attribute declaration and it works fine under Xerces-J 1.3.0 \nand 1.3.1.\n\nFURTHER NOTE:\n=============\nYour schema also has other errors in it which were not properly reported by \nXerces-J 1.3.0 and 1.3.1.  When you have use=\"default\" in an attribute \ndeclaration you MUST also specify value=\"...\" where \"...\" is the default value \nyou want.  You did it in 1 place but did not do it in the others.\n\nIn Xerces-J 1.4.0 this error is caught and reported, however the syntax has \nchanged from [use=\"default\" value=\"1\"] to [default=\"1\"] and you will have to \nmodify your schema accordingly.  Also note the schema namespace needs to change \nunder 1.4.0 from ...www.w3.org/2000/10/XML... to ...www.w3.org/2001/XML...\n\nHope this helps.\n\nMark Huffman, XML Parsers, IBM Canada - 2001/06/05.", "count": 1, "id": 2746, "time": "2001-06-05T08:55:59Z", "creator": "mhuffman@ca.ibm.com", "creation_time": "2001-06-05T08:55:59Z", "is_private": false}]