[{"count": 0, "tags": [], "bug_id": 41024, "attachment_id": null, "is_private": false, "id": 96114, "time": "2006-11-23T04:34:03Z", "creator": "rmulvaney@curamsoftware.com", "creation_time": "2006-11-23T04:34:03Z", "text": "I am having a problem with the input task where it doesn't seem to validate the \narguments being passed and just sits there awaiting input.\nI have narrowed this down to a small test case that shows when a forked java \nprocess is called before the input task it does this...! Without the java task \nthere or being forked it behaves fine.\n\nThe build.xml looks like:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project name=\"builds_scripts\" default=\"compile\">\n  <target name=\"compile\">\n    <javac\n      srcdir=\"C:/Temp\"\n      destdir=\"C:/Temp\"\n      includes=\"TestCase.java\"\n    />\n    <java\n      classname=\"TestCase\"\n      classpath=\"C:/Temp\"\n      fork=\"yes\"\n    >\n    </java>\n    <input\n     message=\"Input?\"\n     validargs=\"y,n\"\n     addproperty=\"do.tag\"\n    />    \n  </target>\n</project>\n\nThe TestCase.java looks like:\n\npublic class TestCase{\n  public static void main(final String[] arguments) {\n    System.out.println(\"Testing\");\n  }\n}\n\nCheers."}, {"count": 1, "tags": [], "text": "What's probably happening is that the input is being routed to the forked java\nprogram, which is ignoring it. \n\nIf you dont want this behaviour, add inputstring=\"\" to the <java> task.\n\nNow, the interesting question is why is this happening after the forked java\nprogram has terminated. ", "attachment_id": null, "bug_id": 41024, "id": 96115, "time": "2006-11-23T05:00:42Z", "creator": "stevel@apache.org", "creation_time": "2006-11-23T05:00:42Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 41024, "attachment_id": null, "id": 96142, "time": "2006-11-24T01:06:33Z", "creator": "rmulvaney@curamsoftware.com", "creation_time": "2006-11-24T01:06:33Z", "is_private": false, "text": "I can confirm that works around the issue.\nThat said, we have a fairly large number of forked <java> tasks in our scripts \nand others not under our control that we import to make this change in.\nHow likely would it be to see a fix for this issue in the final release?"}, {"count": 3, "attachment_id": null, "bug_id": 41024, "is_private": false, "id": 106094, "time": "2007-07-31T06:49:16Z", "creator": "richard.ward@jacobsrimell.com", "creation_time": "2007-07-31T06:49:16Z", "tags": [], "text": "I've encountered similar behaviour in version 1.6.5 and 1.7.0 (1.6.2 is ok). It\nseems the input has to pass through the hierarchy of forked java calls before\nthe input is accepted. So \n\n    <target name=\"test-forked-inputs\">\n        <input>Not called java so assuming 1 return to continue.</input>\n        <echo>Calling java </echo>\n        <java classname=\"Hello\" classpath=\".\" fork=\"true\"/>\n        <echo>Calling java for the second time</echo>\n        <java classname=\"Hello\" classpath=\".\" fork=\"true\"/>\n        <echo>Calling java for the third time</echo>\n        <java classname=\"Hello\" classpath=\".\" fork=\"true\"/>\n        <echo>Calling java for the fourth time</echo>\n        <java classname=\"Hello\" classpath=\".\" fork=\"true\"/>\n        <input>Called java 4 times since last input, so assuming 5 returns to\ncontinue (4 for each forked java, plus 1 for the input).</input>\n    </target>\n\nrequires the return key to be pressed once initially, then 5 times (as the\nmessage says, 4 times for the number of forked java instances, plus one for the\ninput task itself). Doing either of a) removing the forked attribute or b)\nsetting inputstring=\"\" in the java call gets around the problem.\n\nIMHO the problem is as likely to be in the java task as in the input task. Ant\n1.6.3 saw a fix to the java task [Programs run with <java fork=\"true\"> can now\naccept standard input from the Ant console. (Programs run with <java\nfork=\"false\"> could already do so.) Bugzilla 24918.]"}, {"count": 4, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of bug 34461 ***", "attachment_id": null, "id": 119980, "creator": "bodewig@apache.org", "time": "2008-08-21T05:29:15Z", "bug_id": 41024, "creation_time": "2008-08-21T05:29:15Z", "is_private": false}]