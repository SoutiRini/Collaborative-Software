[{"count": 0, "attachment_id": null, "bug_id": 44971, "text": "On HP-UX, linux and Solaris (NOT Aix or Tru64 though) getservbyname doesnt set an errno when a lookup fails.  The apr_getservbyname function returns APR_SUCCESS if the lookup succeeds, and errno if it doesnt.  Because the errno is zero (the same as APR_SUCCESS), calling functions think that the apr_getservbyname has succeeded, when it has actually failed.  \n\nI would suggest setting errno to ENOENT if the lookup failed and errno is zero,\nand changing the return value to \"errno + APR_OS_START_SYSERR\" to be consistant with other apr api calls in this area.", "id": 116495, "time": "2008-05-12T03:27:43Z", "creator": "ctaylor@wadeford.plus.com", "creation_time": "2008-05-12T03:27:43Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 44971, "attachment_id": null, "text": "Would this work for you:\n\n===================================================================\n--- network_io/unix/sockaddr.c  (revision 659691)\n+++ network_io/unix/sockaddr.c  (working copy)\n@@ -716,7 +716,7 @@\n         sockaddr->sa.sin.sin_port = se->s_port;\n         return APR_SUCCESS;\n     }\n-    return errno;\n+    return APR_ENOENT;\n }\n \n #define V4MAPPED_EQUAL(a,b)                                   \\\n===================================================================\n\nThis is what we normally do - just return the error code.", "id": 116962, "time": "2008-05-25T23:33:45Z", "creator": "bojan@rexursive.com", "creation_time": "2008-05-25T23:33:45Z", "is_private": false}, {"count": 2, "tags": [], "text": "Fixed in r660405.", "attachment_id": null, "bug_id": 44971, "id": 116987, "time": "2008-05-26T23:54:30Z", "creator": "bojan@rexursive.com", "creation_time": "2008-05-26T23:54:30Z", "is_private": false}]