[{"count": 0, "tags": [], "creator": "Brian.Sweeney@sas.com", "attachment_id": 24229, "text": "Created attachment 24229\nSupport for junit annotated test cases\n\nThe current version of jmeter doesn't recognize test cases specified by the\n@Test annotation for junit 4.x+.  Support should be easy to support since junit\n3 is already supported.  Basically, an annotated test case sampler should look\nfor the @Test annotation instead of classes that extend TestCase.\n\nThat's what I've done in the attached patch.  The annotated sampler is an\nextension of the 3.x sampler.  I've overridden the sample method and a couple\nof support methods to work with the new style tests.  That causes a difference\nin behavior between instances of the 3.x and annotated samplers.  I initially\nwanted to share the UI code and have it intelligently switch between 3.x and\nannotated instances, but the methods available didn't easily permit that.  The\nchoice was between adding a very limited new UI type or hiding the actual junit\nsampler instance behind a facade.  It seemed more in keeping with other\npatterns to just make another UI class.  That seems like a reasonable choice\ngiven that I expect users will know what they're trying to test (and which\nversion of junit they depend on) before they start writing test plans.\n\nThere are 2 remaining details where I could use some help.  First, I've added a\nresource key (junit_4_request=JUnit Annotated Request) that needs to be\ntranslated. I'm not sure what the process for that is.  Second, in the saved\ntest plan files, saves of my added class use the fully qualified name.  Other\nclasses seem to use short names.  Everything seems to work okay for me, but\nthere's probably a reason it looks different. I imagine that should be fixed.", "id": 130217, "time": "2009-09-08T10:39:13Z", "bug_id": 47803, "creation_time": "2009-09-08T10:39:13Z", "is_private": false}, {"count": 1, "tags": [], "text": "I forgot to mention that for this to all work, you'll need to be using a version of junit 4 instead of the junit 3.8.2 that normally comes with the current release of jmeter.", "attachment_id": null, "id": 130219, "creator": "Brian.Sweeney@sas.com", "time": "2009-09-08T10:45:13Z", "bug_id": 47803, "creation_time": "2009-09-08T10:45:13Z", "is_private": false}, {"count": 2, "tags": [], "text": "Thanks for the patch; I'll take a look at adding it soon.\n\nWould it be possible to provide some example tests as well?", "attachment_id": null, "id": 130311, "creator": "sebb@apache.org", "time": "2009-09-11T06:58:41Z", "bug_id": 47803, "creation_time": "2009-09-11T06:58:41Z", "is_private": false}, {"count": 3, "tags": [], "creator": "Brian.Sweeney@sas.com", "text": "Yes - working on that.  But in doing so I realized that some of the changes that I made busted things for new test plans (I think my saved test plans that I was using to make sure I didn't break things were working - leading me astray).  So I'm going to fix those issues today and re-submit.  I'll tack a test case on there.", "id": 130319, "attachment_id": null, "bug_id": 47803, "creation_time": "2009-09-11T10:07:05Z", "time": "2009-09-11T10:07:05Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 47803, "attachment_id": 24250, "id": 130320, "time": "2009-09-11T11:52:00Z", "creator": "Brian.Sweeney@sas.com", "creation_time": "2009-09-11T11:52:00Z", "is_private": false, "text": "Created attachment 24250\nupdated annotations patch\n\nMy previous test included the prefix \"test\" on methods, which is why I didn't notice things were a bit broken.  This includes a fix that allows arbitrarily named methods.\n\n@Suite, @BeforeClass and @AfterClass aren't currently supported.  It doesn't really seem to fit in with the framework of 1 test per sampler."}, {"count": 5, "tags": [], "bug_id": 47803, "attachment_id": 24251, "id": 130321, "time": "2009-09-11T11:54:39Z", "creator": "Brian.Sweeney@sas.com", "creation_time": "2009-09-11T11:54:39Z", "is_private": false, "text": "Created attachment 24251\ntest case using JUnit 4.x annotations\n\nAnnotated test to exercise the new code.  If you don't run setup/teardown on the add() test, it should fail.  If you do run setup/teardown, it should work."}, {"count": 6, "tags": [], "text": "Thanks very much!\n\nTwo minor problems:\n- there's no AL header in the test case file\n- we don't use @author tags.\n\nWould you mind fixing those please?\n\nAlso, if you get a chance, perhaps you could add some more Test annotations, e.g. expectedException and timeout, since these are handled by the code?", "attachment_id": null, "id": 130326, "creator": "sebb@apache.org", "time": "2009-09-12T04:31:10Z", "bug_id": 47803, "creation_time": "2009-09-12T04:31:10Z", "is_private": false}, {"count": 7, "tags": [], "text": "Created attachment 24257\nannotated test cases\n\nShould flex the abilities of the patch that adds support for junit 4.x style tests", "attachment_id": 24257, "id": 130372, "creator": "Brian.Sweeney@sas.com", "time": "2009-09-14T07:03:27Z", "bug_id": 47803, "creation_time": "2009-09-14T07:03:27Z", "is_private": false}, {"count": 8, "tags": [], "creator": "Brian.Sweeney@sas.com", "text": "Created attachment 24259\nupdated annotations patch\n\nFixes a timeout bug.", "id": 130374, "attachment_id": 24259, "bug_id": 47803, "creation_time": "2009-09-14T07:04:35Z", "time": "2009-09-14T07:04:35Z", "is_private": false}, {"count": 9, "tags": [], "creator": "Brian.Sweeney@sas.com", "text": "Created attachment 24260\npatch to support junit 4.x style annotated tests\n\nAdded the apache license to another file where I'd left it off.", "id": 130375, "attachment_id": 24260, "bug_id": 47803, "creation_time": "2009-09-14T07:08:54Z", "time": "2009-09-14T07:08:54Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 47803, "attachment_id": null, "id": 130376, "time": "2009-09-14T07:32:20Z", "creator": "Brian.Sweeney@sas.com", "creation_time": "2009-09-14T07:32:20Z", "is_private": false, "text": "* Added AL headers to 2 files\n* removed @author tags\n* added a timeout test & fixed the sampler to be more consistent/correct\n* There was already an expected exception test case\n\nThanks for looking the patch over."}, {"count": 11, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "Thanks very much for the patches.\n\nIt was reasonably easy to merge the JUnit4 code with the existing JUnit3 code, so I just added a checkbox to the GUI to allow users to select JUnit4 rather than JUnit3 test cases. I think this is easier than having two separate samplers.\n\nSVN checkins:\n\nBugzilla 47803 - Support for JUnit 4.x tests defined by annotations\nMerge code from JUnitAnnotatedSampler.java\n\nURL: http://svn.apache.org/viewvc?rev=817404&view=rev\nLog:\nBugzilla 47803 - Support for JUnit 4.x tests defined by annotations\nFix bug: test element not updated if method/classname not defined\n\nURL: http://svn.apache.org/viewvc?rev=817397&view=rev\nLog:\nBugzilla 47803 - Support for JUnit 4.x tests defined by annotations\nSample test cases\n\nURL: http://svn.apache.org/viewvc?rev=816976&view=rev\nLog:\nTidy up.\nAdd hooks for JUnit4 GUI support", "id": 130565, "time": "2009-09-21T13:59:15Z", "bug_id": 47803, "creation_time": "2009-09-21T13:59:15Z", "is_private": false}]