[{"count": 0, "tags": [], "bug_id": 37560, "attachment_id": null, "text": "Chainsaw would not parse a file that had xml embedded in an NDC. Here are the\nerror messages :\n\nParsing error on line 345 and column 418\nThe element type \"log4j:NDC\" must be terminated by the matching end-tag\n</log4j:NDC>\".\n\nHere is the event:\n\n<log4j:event logger=\"com.tlr.bis.online.charges.jaxprc.trmr.StandardTRMRHandler\"\ntimestamp=\"1132342098624\" level=\"DEBUG\" thread=\"WebContainer : 0\">\n<log4j:message><![CDATA[handleFault]]></log4j:message>\n<log4j:NDC><![CDATA[<soapenv:Envelope\nxmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"\nxmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"\nxmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"><soapenv:Header/><soapenv:Body><soapenv:Fault><faultcode>Client</faultcode><faultstring><![CDATA[The\nvalue \"12-31-2005\" has an invalid format for\nEffectiveDate]]></faultstring><faultactor/><detail\nencodingStyle=\"\"><olc:DataFormatException\nxmlns:olc=\"http://thomson.com/tlr/bis/online/charges/\"><severity>error</severity><dateTime>2005-11-18T13:28:18.173</dateTime><transactionId></transactionId><EffectiveDate>12-31-2005</EffectiveDate></olc:DataFormatException></detail></soapenv:Fault></soapenv:Body></soapenv:Envelope>]]></log4j:NDC>\n</log4j:event>", "id": 82672, "time": "2005-11-18T20:58:28Z", "creator": "richard.hansen@westgroup.com", "creation_time": "2005-11-18T20:58:28Z", "is_private": false}, {"count": 1, "text": "Not Chainsaw's fault.  The serializer (I assume that log4j's XMLLayout) used to write the sample document \nis naive and just dropped the NDC content into a CDATA section.  Unfortunately, the termination of the \nCDATA section within the NDC content (the ]]>) prematurely ended the CDATA section added by the \nserialization.  You can't nest CDATA sections.\n\nSolutions would be to use a real XML serializer (like that provided by Xerces) or to make the log4j \nserializer smarter and not depend on CDATA sections (that is, it would convert <, > and & to &lt;, &gt; and \n&amp; and likely convert characters with code points greater than 127 to &#NNN; ", "bug_id": 37560, "is_private": false, "id": 92824, "time": "2006-08-31T21:03:53Z", "creator": "carnold@apache.org", "creation_time": "2006-08-31T21:03:53Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 37560, "attachment_id": null, "text": "I believe that XMLLayout has been modified to detect embedded CDATA sections.  If not, you can use \nXSLTLayout in the extras companion.  Marking as fixed.  Reopen if you still see the problem in 1.2.15.", "id": 107083, "time": "2007-08-22T16:24:26Z", "creator": "carnold@apache.org", "creation_time": "2007-08-22T16:24:26Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 37560, "attachment_id": null, "text": "Spoke too soon.  XMLLayout did not call appendEscapingCDATA on NDC or throwable content.  Added new \nunit tests and fixed XMLLayout in rev 568774.  XSLTLayout handled situation properly, but added same \ntests to its test suite in 568775.", "id": 107087, "time": "2007-08-22T16:56:30Z", "creator": "carnold@apache.org", "creation_time": "2007-08-22T16:56:30Z", "is_private": false}]