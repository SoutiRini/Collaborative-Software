[{"count": 0, "tags": [], "bug_id": 1164, "attachment_id": null, "text": "When an element name does not have namespace, ElementNSImpl.getNamespaceURI() \nreturns null in 1.2.3, but it returns \"\" in 1.3.1.  Test case:\n\ndummy.xml:\n----------------------\n<?xml version='1.0'?>\n<x:foo xmlns:x='http://foo.com'>\n\t<bar> blar </bar>\n</x:foo>\n\nTestNamespace.java:\n----------------------\nimport org.apache.xerces.parsers.*;\nimport org.apache.xerces.dom.*;\nimport org.w3c.dom.*;\nimport org.xml.sax.*;\n\npublic class TestNamespace {\n\tpublic static void main(String[] argv) {\n\t\ttry {\n\t\t\tDOMParser parser = new DOMParser();\n\t\t\tparser.setFeature\n(\"http://xml.org/sax/features/namespaces\", true);\n\t\t\tparser.parse(new InputSource(new java.io.FileReader\n(\"d:/test/soap/dummy.xml\")));\n\t\t\tDocument doc = parser.getDocument();\n\t\t\tElementNSImpl foo = (ElementNSImpl) \ndoc.getDocumentElement();\n\t\t\tNode node  = foo.getFirstChild();\n\t\t\twhile (node.getNodeType() != Node.ELEMENT_NODE) {\n\t\t\t\tnode = node.getNextSibling();\n\t\t\t}\n\t\t\tElementNSImpl bar = (ElementNSImpl) node;\n\t\t\tSystem.out.println(\"foo NamespaceURI: \n*\"+foo.getNamespaceURI()+\"*\");\n\t\t\tSystem.out.println(\"foo LocalName: *\"+foo.getLocalName()\n+\"*\");\n\t\t\tSystem.out.println(\"bar NamespaceURI: \n*\"+bar.getNamespaceURI()+\"*\");\n\t\t\tSystem.out.println(\"bar LocalName: *\"+bar.getLocalName()\n+\"*\");\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n}\n\n1.2.3 returns:\nbar NamespaceURI: *null*\n\n1.3.1 returns:\nbar NamespaceURI: **\n\nThis behavior breaks codes in Soap 2.1 that only test namespaceURI for null but \ndoes not test it for \"\".", "id": 1655, "time": "2001-03-30T14:43:48Z", "creator": "czhao@commonvision.com", "creation_time": "2001-03-30T14:43:48Z", "is_private": false}, {"count": 1, "tags": [], "creator": "lehors@apache.org", "attachment_id": null, "id": 2391, "time": "2001-05-10T11:16:44Z", "bug_id": 1164, "creation_time": "2001-05-10T11:16:44Z", "is_private": false, "text": "You're right, this change came from an internal change to the parser which now \nuses accross the board an empty string for elements and attributes with no \nnamespace. I changed the way we build our DOM to turn these empty strings into \nnulls. That solves your problem.\n"}, {"count": 2, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 98813, "creation_time": "2007-01-30T18:31:15Z", "time": "2007-01-30T18:31:15Z", "bug_id": 1164, "text": "Sorry for the noise. Undoing previous change resulting from random cybertagging.", "attachment_id": null}]