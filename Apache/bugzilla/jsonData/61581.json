[{"count": 0, "tags": [], "bug_id": 61581, "text": "Created attachment 35393\ncatalina.2017-10-02.log\n\nSmoke-testing release candidate of Tomcat 7.0.82.\n\nJava 8u144, Windows, running with APR connector\n\nSteps to reproduce:\n1. Start Tomcat\n2. Access\nhttp://localhost:8080/examples/websocket/drawboard.xhtml\n3. Actual result:\n- At client: the page fails to complete loading. It displays some parts of the page, but no drawboard area.\n- At server: java.security.AccessControlException is logged\n\n[[[\nSEVERE: Unexpected exception: java.security.AccessControlException: access denied (\"java.lang.RuntimePermission\" \"accessClassInPackage.org.apache.tomcat.jni\")\njava.security.AccessControlException: access denied (\"java.lang.RuntimePermission\" \"accessClassInPackage.org.apache.tomcat.jni\")\n\tat java.security.AccessControlContext.checkPermission(AccessControlContext.java:472)\n\tat java.security.AccessController.checkPermission(AccessController.java:884)\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\n\tat java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1564)\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:315)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:411)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n\tat org.apache.coyote.http11.upgrade.AprServletOutputStream.doWriteInternal(AprServletOutputStream.java:135)\n]]]\n\nI am attaching catalina.2017-10-02.log file.", "id": 201260, "time": "2017-10-02T11:40:05Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2017-10-02T11:40:05Z", "is_private": false, "attachment_id": 35393}, {"count": 1, "tags": [], "bug_id": 61581, "attachment_id": null, "id": 201270, "time": "2017-10-03T11:51:06Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2017-10-03T11:51:06Z", "is_private": false, "text": "AprServletOutputStream.java:135 is\n\n  if (Status.APR_STATUS_IS_EAGAIN(-written)) {\n\nAPR_STATUS_IS_EAGAIN is a method, not a constant, and thus Java tries to load the class.\n\nIf I preload the Status class the issue does not happen.\n\n\nThis is: to work-around this issue, add the following attribute to JreMemoryLeakPreventionListener configured in conf/server.xml:\n\n[[[\n    classesToInitialize=\"org.apache.tomcat.jni.Status\"\n]]]"}, {"count": 2, "tags": [], "bug_id": 61581, "text": "Fixed in 7.0.x for 7.0.83 onwards.", "id": 201321, "time": "2017-10-06T12:00:00Z", "creator": "markt@apache.org", "creation_time": "2017-10-06T12:00:00Z", "is_private": false, "attachment_id": null}]