[{"count": 0, "tags": [], "bug_id": 37064, "attachment_id": null, "text": "Dear all,\n\nI found the value of timestamp in UNIQUE_ID is always wrong in my environment. \nI decoded the value and confirmed that the value was be completely different \nfrom real one, it didn't has continuousness for requested time, and it looked \nlike random numbers.\n\nThe reason comes from the difference from variable type. i.e. the variable \ntype of unique_id_rec.stamp is a 'unsigned int' but a type of \nrequest_rec.request_time is 'apr_time_t', which is apr_int64_t. So, timestamp \nresults in the value set mainly microsecond part.\n\nThe following change will be needed to use correct timestamp.\n\n307c307\n<     new_unique_id.stamp = htonl((unsigned int)r->request_time);\n---\n>     new_unique_id.stamp = htonl((unsigned int)(r-\n>request_time/APR_USEC_PER_SEC));\n\n(*one line respectively*)\n\n\nThank you.\n\n\n**FYI:  'requested_time' is set as follows\n--in httpd-2.0.52/srclib/apr/time/unix/time.c---\nAPR_DECLARE(apr_time_t) apr_time_now(void)\n{\n    struct timeval tv;\n    gettimeofday(&tv, NULL);\n    return tv.tv_sec * APR_USEC_PER_SEC + tv.tv_usec;\n}", "id": 81100, "time": "2005-10-13T09:17:13Z", "creator": "kobayashi@firstserver.co.jp", "creation_time": "2005-10-13T09:17:13Z", "is_private": false}, {"count": 1, "tags": [], "text": "This Bug still exists in 2.2.6 and 2.0.61\n\nTimestamp wraps around in 4292 seconds, \nso in worst case you will get the same \n\"unique_id\" after 72 minutes.\n\nThe correct handling will allow easier\nextraction of the timestamp and better debugging \nbecause you need to look at forensic_log only\n", "attachment_id": null, "id": 110730, "creator": "matthias.lehr@siemens.com", "time": "2007-11-19T08:04:09Z", "bug_id": 37064, "creation_time": "2007-11-19T08:04:09Z", "is_private": false}, {"count": 2, "tags": [], "text": "This Bug still exists in 2.2.6 and 2.0.61\n\nTimestamp wraps around in 4292 seconds, \nso in worst case you will get the same \n\"unique_id\" after 72 minutes.\n\nThe correct handling will allow easier\nextraction of the timestamp and better debugging \nbecause you need to look at forensic_log only\n", "is_private": false, "id": 110731, "creator": "matthias.lehr@siemens.com", "time": "2007-11-19T08:04:29Z", "bug_id": 37064, "creation_time": "2007-11-19T08:04:29Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 37064, "attachment_id": null, "text": "Committed to trunk as r596448\n(http://svn.apache.org/viewvc?rev=596448&view=rev). Thanks for the reminder.", "id": 110738, "time": "2007-11-19T13:09:28Z", "creator": "rpluem@apache.org", "creation_time": "2007-11-19T13:09:28Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 37064, "text": "Please consider backporting.\nThis is low hanging fruit.", "id": 117198, "time": "2008-05-31T01:37:12Z", "creator": "takashi.asfbugzilla@tks.st", "creation_time": "2008-05-31T01:37:12Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 37064, "attachment_id": null, "id": 117199, "time": "2008-05-31T02:22:48Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-31T02:22:48Z", "is_private": false, "text": "Proposed for backport to 2.2.x as r661991 (http://svn.apache.org/viewvc?view=rev&revision=661991)."}, {"attachment_id": null, "tags": [], "creator": "rpluem@apache.org", "text": "Backported as r662575 (http://svn.apache.org/viewvc?rev=662575&view=rev).", "count": 6, "id": 117269, "time": "2008-06-02T14:27:26Z", "bug_id": 37064, "creation_time": "2008-06-02T14:27:26Z", "is_private": false}]