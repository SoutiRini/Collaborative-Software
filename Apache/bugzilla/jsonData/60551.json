[{"count": 0, "tags": [], "bug_id": 60551, "is_private": false, "text": "Upgrading from apache 2.4.20 to 23 or 25.\nEven when the services are idle, only receiving a healthcheck request every 2 seconds from a loadbalancer, the server reports it is initializing  a new worker every half hour to 45 minutes for about 2 days and the number of apache processes slowly creeps up until it hits one of the ulimits\n\nError Log output\nAH00925: initializing worker https://<server>/ shared\n[Sat Dec 24 21:05:58.371791 2016] [proxy:debug] [pid 33423390:tid 1] proxy_util.c(1821): AH00927: initializing worker https://t<server>/ local\n[Sat Dec 24 21:05:58.371859 2016] [proxy:debug] [pid 33423390:tid 1] proxy_util.c(1856): AH00930: initialized pool in child 33423390 for <server>\n[mpm_worker:error] [pid 19398908:tid 1] (11)Resource temporarily unavailable:\nAH00283: fork: Unable to fork new process\n\nOS AIX 6.1SP9\nCompile parameters\nexport LIBPATH=\"/opt/freeware/lib:/usr/lib:/usr/openssl_101s_64/lib:/usr/local/lib:/usr/local/pcre_64/lib\"\nexport LDFLAGS=\"-L/opt/freeware/lib -L/usr/openssl_101s_64/lib -L/usr/local/pcre_64/lib -Wl,-bbigtoc\"\nexport CC=\"gcc\"\nexport CFLAGS=\"-maix64 -O2 -pthread\"\nexport OBJECT_MODE=64\n\n\n./configure --prefix=%{prefix} \\\n        --enable-so \\\n        --enable-static-support \\\n        --enable-deflate \\\n        --enable-mods-static='few ratelimit include sed mime log_debug headers setenvif watchdog proxy proxy_connect proxy_http proxy_ftp proxy_ajp proxy_balancer session session_cookie vhost_alias alias rewrite slotmem_shm socache_dbm' \\\n        --with-included-apr \\\n        --with-included-apr-util \\\n        --with-z=/usr/local/zlib_64 \\\n        --enable-nonportable-atomics=yes \\\n        --with-libxml2=/usr/local/lib \\\n        --enable-ssl \\\n        --enable-ssl-staticlib-deps \\\n        --with-ssl=/usr/openssl_101s_64 \\\n        --with-pcre=/usr/local/pcre_64", "id": 195845, "time": "2017-01-04T17:01:22Z", "creator": "ian.eggleton@dvla.gsi.gov.uk", "creation_time": "2017-01-04T17:01:22Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "text": "what mpm config do you have?", "id": 195847, "time": "2017-01-04T18:03:14Z", "bug_id": 60551, "creation_time": "2017-01-04T18:03:14Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 60551, "text": "(In reply to Eric Covener from comment #1)\n> what mpm config do you have?\n\nGood point, should have included that, although it's not changed from 2.20\nTimeout 300\nKeepAlive On\nMaxKeepAliveRequests 600\nKeepAliveTimeout 5\nUseCanonicalName Off\nHostnameLookups Off\n\nThreadsPerChild 25\nStartServers 10\nMinSpareThreads 250\nMaxSpareThreads 300\nServerLimit 25\nMaxClients 50\nListenBacklog 100\nMaxRequestsPerChild 1000\n\n\nand the compile details are\n\nServer version: Apache/2.4.25 (Unix)\nServer built:   Dec 22 2016 10:37:12\nServer's Module Magic Number: 20120211:67\nServer loaded:  APR 1.5.2, APR-UTIL 1.5.4\nCompiled using: APR 1.5.2, APR-UTIL 1.5.4\nArchitecture:   64-bit\nServer MPM:     worker\n  threaded:     yes (fixed thread count)\n    forked:     yes (variable process count)\n\nCompiled in modules:\n  core.c\n  mod_authn_file.c\n  mod_authn_core.c\n  mod_authz_host.c\n  mod_authz_groupfile.c\n  mod_authz_user.c\n  mod_authz_core.c\n  mod_access_compat.c\n  mod_auth_basic.c\n  mod_socache_dbm.c\n  mod_so.c\n  mod_watchdog.c\n  mod_ratelimit.c\n  mod_reqtimeout.c\n  mod_include.c\n  mod_filter.c\n  mod_sed.c\n  mod_deflate.c\n  http_core.c\n  mod_mime.c\n  mod_log_config.c\n  mod_log_debug.c\n  mod_env.c\n  mod_headers.c\n  mod_setenvif.c\n  mod_version.c\n  mod_proxy.c\n  mod_proxy_connect.c\n  mod_proxy_ftp.c\n  mod_proxy_http.c\n  mod_proxy_fcgi.c\n  mod_proxy_scgi.c\n  mod_proxy_fdpass.c\n  mod_proxy_wstunnel.c\n  mod_proxy_ajp.c\n  mod_proxy_balancer.c\n  mod_proxy_express.c\n  mod_proxy_hcheck.c\n  mod_session.c\n  mod_session_cookie.c\n  mod_session_dbd.c\n  mod_slotmem_shm.c\n  mod_ssl.c\n  mod_lbmethod_byrequests.c\n  mod_lbmethod_bytraffic.c\n  mod_lbmethod_bybusyness.c\n  mod_lbmethod_heartbeat.c\n  worker.c\n  mod_unixd.c\n  mod_status.c\n  mod_autoindex.c\n  mod_vhost_alias.c\n  mod_dir.c\n  mod_alias.c\n  mod_rewrite.c", "id": 195870, "time": "2017-01-05T10:28:29Z", "creator": "ian.eggleton@dvla.gsi.gov.uk", "creation_time": "2017-01-05T10:28:29Z", "is_private": false, "attachment_id": null}]