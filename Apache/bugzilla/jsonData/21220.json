[{"count": 0, "tags": [], "bug_id": 21220, "is_private": false, "text": "java.util.zip.ZipException: No such file or directory\n        at java.util.zip.ZipFile.open(Native Method)\n        at java.util.zip.ZipFile.<init>(ZipFile.java:112)Bootstrap: Class loader\ncreation threw exception\n\n        at java.util.jar.JarFile.<init>(JarFile.java:117)\n        at java.util.jar.JarFile.<init>(JarFile.java:55)\n        at\norg.apache.catalina.loader.StandardClassLoader.addRepositoryInternal(StandardClassLoader.java:1082)\n        at\norg.apache.catalina.loader.StandardClassLoader.<init>(StandardClassLoader.java:200)\n        at\norg.apache.catalina.startup.ClassLoaderFactory.createClassLoader(ClassLoaderFactory.java:202)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:141)\nIt sometimes happens that we get a ZipException during Tomcat boot,like so:\n\njava.lang.IllegalArgumentException: addRepositoryInternal:\njava.util.zip.ZipException: No such file or directory\n        at\norg.apache.catalina.loader.StandardClassLoader.addRepositoryInternal(StandardClassLoader.java:1110)\n        at\norg.apache.catalina.loader.StandardClassLoader.<init>(StandardClassLoader.java:200)\n        at\norg.apache.catalina.startup.ClassLoaderFactory.createClassLoader(ClassLoaderFactory.java:202)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:141)\n\nThis means that a jar is corrupted or a symlink to a jar has gone stale etc.\n\nIt would be helpful to make Tomcat say exactly *what* jar it just tried to load.\nPatching Tomcat helped me find a bad jar in no time...", "id": 39736, "time": "2003-07-01T12:37:52Z", "creator": "bughunt@gluino.name", "creation_time": "2003-07-01T12:37:52Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "bughunt@gluino.name", "attachment_id": null, "id": 71723, "time": "2005-03-02T18:03:22Z", "bug_id": 21220, "creation_time": "2005-03-02T18:03:22Z", "is_private": false, "text": "Here we go again, this time in Tomcat 5.5.\n\nHere is a little patch (diff --unified) for this badness:\n\n---\n./jakarta-tomcat-catalina/catalina/src/share/org/apache/catalina/loader/WebappClassLoader.java.bak\n 2005-03-02 17:53:50.136472408 +0100\n+++\n./jakarta-tomcat-catalina/catalina/src/share/org/apache/catalina/loader/WebappClassLoader.java\n     2005-03-02 17:57:14.185452248 +0100\n@@ -1540,7 +1540,7 @@\n                        try {\n                                jarFiles[i] = new JarFile(jarRealFiles[i]);\n                        } catch (IOException e) {\n-                               log.warn(\"Failed to open JAR\", e);\n+                               log.warn(\"Failed to open JAR file '\" +\njarRealFiles[i] + \"'\", e);\n                        }\n                 }\n             }\n@@ -2040,7 +2040,12 @@\n\n         if (triggers == null)\n             return (true);\n-        JarFile jarFile = new JarFile(jarfile);\n+        try {\n+           JarFile jarFile = new JarFile(jarfile);\n+        } catch (IOException e) {\n+           log.warn(\"Failed to open JAR file '\" + jarfile + \"'\", e);\n+           throw e;\n+        }\n         for (int i = 0; i < triggers.length; i++) {\n             Class clazz = null;\n             try {\n\n\n"}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 143399, "time": "2011-01-16T16:53:00Z", "bug_id": 21220, "creation_time": "2011-01-16T16:53:00Z", "is_private": false, "text": "This was addressed for 5.5.x onwards in r345264. See the commit comment for the explanation of the approach."}]