[{"count": 0, "tags": [], "creator": "josh@apache.org", "attachment_id": null, "is_private": false, "id": 128207, "time": "2009-06-23T10:57:58Z", "bug_id": 47412, "creation_time": "2009-06-23T10:57:58Z", "text": "The field 'properties' on class EscherProperties is initialised lazily but there is nothing stopping a second thread reading the map while it is still being populated.  To be absolutely correct, some sort of synchronization is necessary.  Since this map initialisation is relatively simple and light-weight, there should be no problem with performing it in the class static initialiser."}, {"count": 1, "tags": [], "creator": "josh@apache.org", "attachment_id": null, "text": "Fixed in svn r787771\n\nNo junit added :( It's hard to write a deterministic tests that expose concurrency bugs. Hopefully the problem in the old version of the code is clear enough that the fix makes sense by itself.", "id": 128208, "time": "2009-06-23T11:12:57Z", "bug_id": 47412, "creation_time": "2009-06-23T11:12:57Z", "is_private": false}]