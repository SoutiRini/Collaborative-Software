[{"count": 0, "tags": [], "bug_id": 58338, "attachment_id": null, "text": "According to the Tomcat 7 \"JNDI Resources HOW-TO\" part \"JDBC resources\" documentation one or more initial SQL statement(s) for each created connection can be specified using \"connectionInitSqls\" attribute on the Resource element.\n\nLooking at class BasicDataSource this property is indeed there (field \"connectionInitSqls\")\n\nHowever, the class BasicDataSourceFactory, the JNDI factory used by Tomcat to create a BasicDataSource instance, uses another attribute-name for this property:\n\n...\nprivate final static String PROP_INITCONNECTIONSQLS = \"initConnectionSqls\";\n...\n\t\t\n...\nvalue = properties.getProperty(PROP_INITCONNECTIONSQLS);\nif (value != null) {\n  StringTokenizer tokenizer = new StringTokenizer(value, \";\");\n  dataSource.setConnectionInitSqls(Collections.list(tokenizer));\n}\n...\n\nMy suggestion is to keep the documentation as is and update the class BasicDataSourceFactory. For example like this (of course field name may also be updated too, to reflect the property name) :\n\n...\nprivate final static String PROP_INITCONNECTIONSQLS = \"connectionInitSqls\";\n...", "id": 185002, "time": "2015-09-07T11:01:38Z", "creator": "hoof@fixion.nl", "creation_time": "2015-09-07T11:01:38Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 58338, "attachment_id": null, "id": 185009, "time": "2015-09-07T12:50:51Z", "creator": "markt@apache.org", "creation_time": "2015-09-07T12:50:51Z", "is_private": false, "text": "This is https://issues.apache.org/jira/browse/DBCP-348\n\nWe need a Commons DBCP 1.4.1 release in order to fix this."}]