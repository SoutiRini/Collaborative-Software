[{"count": 0, "tags": [], "bug_id": 33843, "attachment_id": null, "text": "The jk/native/apache-2.0/Makefile from the jakarta-tomcat-connectors-1.2.8\npackage does ignore the LDFLAGS from the configure script and from the apache apxs.\n\nWe need to pass some special linker flags, when we build httpd and the\njakarta-tomcat-connectors (-L/opt/sfw/lib -XCClinker -static-libgcc).\nWhen we build the native Apache2 jk connector from the jakarta-tomcat-connectors\npackge, there is no way to pass theese flags to the linker.\nWhen we pass these options as LDFLAGS to the configure script from the\njakarta-tomcat-connectors, the flags are silently ignored, because the mod_jk.lo\nfile is linked with the following command (where LDFLAGS is not taken into account):\n-----------------\n$(LIBTOOL) --mode=link ${COMPILE} -o $@ -module -rpath ${libexecdir}\n-avoid-version mod_jk.lo $(APACHE_OBJECTS)\n-----------------\nWe have used theese LDFLAGS also when compiling the httpd, thus apxs is aware of\nthe LDFLAGS:\n---------------\n/usr/local/apache_2.0.53/bin/apxs  -q LDFLAGS\n-L/opt/sfw/lib -XCClinker -static-libgcc\n---------------\nBut also the apxs flags are ignored.\n\nIn the main Makefile, the following libtool is defined:\nLIBTOOL = /bin/bash /usr/local/apache_2.0.53/build/libtool --silent\n\nI have attached a small Patch for the Makefile.in which the LDFLAGS are\nrequested through the apxs interface.\nI have added a `${APXS} -q LDFLAGS` statement to the line which is linking the\nmod_jk.lo file.\n\nI'm not sure if this is the right way to fix the problem, or the httpd libtool\nwhich is called by the makefile should be fixed.\n\nWe are using the following environment:\n- Solaris 9\n- gcc-3.3.2\n- httpd-2.0.53\n- jakarta-tomcat-connectors-1.2.8\n\nPatch:\n--- jk/native/apache-2.0/Makefile.in    Fri Mar  4 12:16:40 2005\n+++ jk/native/apache-2.0/Makefile.in.fix        Fri Mar  4 12:27:17 2005\n@@ -63,7 +63,7 @@\n # APXS will compile every file, this is derived from apxs\n \n mod_jk.la: mod_jk.lo $(APACHE_OBJECTS)\n-       $(LIBTOOL) --mode=link ${COMPILE} -o $@ -module -rpath ${libexecdir}\n-avoid-version mod_jk.lo $(APACHE_OBJECTS)\n+       $(LIBTOOL) --mode=link ${COMPILE} `${APXS} -q LDFLAGS` -o $@ -module\n-rpath ${libexecdir} -avoid-version mod_jk.lo $(APACHE_OBJECTS)\n \n mod_jk.so: mod_jk.la\n        $(LIBTOOL) --mode=install cp $< `pwd`/$@", "id": 71824, "time": "2005-03-04T14:16:25Z", "creator": "beat.kneubuehl@visana.ch", "creation_time": "2005-03-04T14:16:25Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 33843, "attachment_id": null, "text": "Fixed in the CVS.\nThanks.", "id": 71915, "time": "2005-03-07T19:39:11Z", "creator": "mturk@apache.org", "creation_time": "2005-03-07T19:39:11Z", "is_private": false}]