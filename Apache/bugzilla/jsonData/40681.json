[{"count": 0, "text": "Randomly and rarely I see this exception trace:\n\n     [java] Exception in thread \"AWT-EventQueue-0\"\njava.lang.IllegalStateException: RunnableQueue not started or has exited\n     [java]     at org.apache.batik.util.RunnableQueue.preemptLater(Unknown Source)\n     [java]     at org.apache.batik.bridge.UpdateManager.interrupt(Unknown Source)\n     [java]     at\norg.apache.batik.swing.svg.JSVGComponent.stopProcessing(Unknown Source)\n     [java]     at org.apache.batik.swing.svg.JSVGComponent.stopThenRun(Unknown\nSource)\n     [java]     at\norg.apache.batik.swing.svg.JSVGComponent.setSVGDocument(Unknown Source)\n     [java]     at org.apache.batik.swing.svg.JSVGComponent.dispose(Unknown Source)\n     [java]     at\ncom.awarix.trak.client.svg.KeylessJSVGCanvas.dispose(KeylessJSVGCanvas.java:37)\n     [java]     at\ncom.awarix.trak.client.svg.SVGLoadManager$1.run(SVGLoadManager.java:317)\n     [java]     at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)\n     [java]     at java.awt.EventQueue.dispatchEvent(EventQueue.java:461)\n     [java]     at\njava.awt.EventDispatchThread.pumpOneEventForHierarchy(EventDispatchThread.java:242)\n     [java]     at\njava.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:163)\n     [java]     at\njava.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:157)\n     [java]     at\njava.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:149)\n     [java]     at java.awt.EventDispatchThread.run(EventDispatchThread.java:110)\n\nThis appears to be caused by a race condition in UpdateManager.java. It checks\nfor updateRunnableQueue.getThread() == null, and if not, then calls\nupdateRunnableQueue.preemptLater(). But in between these two calls, the\nRunnableQueue thread could have exited. This appears to be the only possible way\nfor this exception to occur.\n\nThe attached patch \"should\" fix this bug. However, I have not verified that this\npatch doesn't introduce a possible deadlock (I don't think it would but have not\nanalyzed the code for that possibility; someone more familiar may be able to\nquickly check this).", "creator": "archie@dellroad.org", "is_private": false, "id": 94483, "time": "2006-10-04T11:29:31Z", "bug_id": 40681, "creation_time": "2006-10-04T11:29:31Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 40681, "text": "Created attachment 18963\nPatch that should fix this bug", "id": 94484, "time": "2006-10-04T11:30:07Z", "creator": "archie@dellroad.org", "creation_time": "2006-10-04T11:30:07Z", "is_private": false, "attachment_id": 18963}, {"count": 2, "tags": [], "bug_id": 40681, "attachment_id": null, "id": 98692, "time": "2007-01-29T10:00:14Z", "creator": "deweese@apache.org", "creation_time": "2007-01-29T10:00:14Z", "is_private": false, "text": "I agree with your patch, and I have applied it. Thanks!"}]