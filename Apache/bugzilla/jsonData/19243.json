[{"count": 0, "tags": [], "creator": "g-freeman@adfa.edu.au", "attachment_id": null, "text": "I have successfully installed Tomcat 4.1.24 on port 80 on a Linux box, with it\nprocessing JSP and servlets without error.  I have set up a simple CGI\ndemonstration and enabled CGI in a container.  I am observing unpredictable\nbehaviour.  Sometimes (30% of the time) the CGI program generates a successful\nresponse.  On all other occasions, the web page generated is\n\nHTTP Status 500\nException report\nThe server encountered an internal error () that prevented it from fulfilling\nthis request.\njava.io.IOException: Broken pipe\n   at java.io.FileOutputStream.writeBytes(Native Method)\n   at java.io.FileOutputStream.write(FileOutputStream.java:257)\n   at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:69)\n   at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:127)\n   at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:128)\n   at org.apache.catalina.servlets.CGIServlet$CGIRunner.run(CGIServlet.java:1683)\n   at org.apache.catalina.servlets.CGIServlet.doGet(CGIServlet.java:635)\n   at org.apache.catalina.servlets.CGIServlet.doPost(CGIServlet.java:597)\n\n   at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n   at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n   at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n   at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n   at\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)\n   at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n   at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n   at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n   at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2415)\n   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n   at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n   at\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)\n   at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n   at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n   at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n   at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n   at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n   at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:594)\n   at\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n   at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n   at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n   at java.lang.Thread.run(Thread.java:536)\n\n\nI understand that messages like this reported in a log file indicate that\nconnection to the client was lost.  This does not seem to be the case here; the\nclient also receives this \"broken pipe\" message.\n\nThe only connector I am using is the tomcat4.CoyoteConnector.\nThe CGI servlet is org.apache.catalina.servlets.CGIServlet.\nThe CGI program is a 4-line shell script.\n  #!/bin/sh\n  echo Content-type: text/html\n  echo\n  echo CGI is working fine", "id": 35846, "time": "2003-04-23T07:04:04Z", "bug_id": 19243, "creation_time": "2003-04-23T07:04:04Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 55724, "time": "2004-04-13T22:13:18Z", "bug_id": 19243, "creation_time": "2004-04-13T22:13:18Z", "is_private": false, "text": "I do not see this behaviour. I am not aware of other users seeing a 70% \nfailure rate with cgi scripts."}]