[{"count": 0, "tags": [], "bug_id": 12989, "text": "JSTL \"c:out\" uses body-default, even if value is not NULL or \"\".\n\nthe error is easy to test:\ncopy the standard-examples.war from \nhttp://jakarta.apache.org/taglibs/doc/standard-doc/intro.html into your webapps-\ndirectory, and open this url: http://127.0.0.1:8080/standard-\nexamples/elsupport/Out.jsp\n\nyou can see the source-code here: http://127.0.0.1:8080/standard-\nexamples/ShowSource.jsp?filename=/elsupport/Out.jsp\n\n\"Howe\" has a cell-phone-number and the string \"no cell phone specified\"... \nthats the bug.\n\nthe error doesn't occur in bea weblogic 6.1\n\nthanks for your help!!\ngreeting,\nnathanael", "id": 23347, "time": "2002-09-25T07:43:26Z", "creator": "nathob@gmx.net", "creation_time": "2002-09-25T07:43:26Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "tivv@gtech-ua.com", "attachment_id": null, "is_private": false, "id": 30796, "time": "2003-02-06T09:34:15Z", "bug_id": 12989, "creation_time": "2003-02-06T09:34:15Z", "text": "Actually there are two problems here:\n1) Jasper one - if tag implements body tag support and sometimes body is empty\nand sometimes not, then we may have next problem:\na)Tag uses body (bodyContent set)\nb)Tag sent to pool (bodyContent set)\nb)Tag uses empty body (old bodyContent set).\nI've resolved this by setting bodyContent attribute to null before sending tag\nto pool:\nGenerator.java, line 1440:\n            if (ctxt.getOptions().isPoolingEnabled()) {\n                //We must reset body before sending to pool if it was set before\n                if (n.implementsBodyTag() && n.getBody() != null)\n                {\n                    out.printin(tagHandlerVar);\n                    out.println(\".setBodyContent(null);\");\n                }\n                out.printin(n.getTagHandlerPoolName());\n                out.print(\".reuse(\");\n                out.print(tagHandlerVar);\n                out.println(\");\");\n            }"}, {"count": 2, "tags": [], "bug_id": 12989, "text": "Second problem is with standart taglib: it uses needBody variable, but do not\nresets it to false in StartTag ( and we may be NOT called release between uses)\nFix is: OutSupport.java, line 122:\n    public int doStartTag() throws JspException {\n      try {\n        needBody = false;\n        // print value if available; otherwise, try 'default'\n        if (value != null) {\n            out(pageContext, escapeXml, value.toString());\n            return SKIP_BODY;\n        } else {", "id": 30797, "time": "2003-02-06T09:36:29Z", "creator": "tivv@gtech-ua.com", "creation_time": "2003-02-06T09:36:29Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "pierre.delisle@sun.com", "attachment_id": null, "text": "This has been fixed for JSTL 1.0.3, currently available \nvia the nightly builds.\n\n*** This bug has been marked as a duplicate of 16069 ***", "id": 30836, "time": "2003-02-06T18:36:55Z", "bug_id": 12989, "creation_time": "2003-02-06T18:36:55Z", "is_private": false}]