[{"count": 0, "tags": [], "creator": "sr@myarm.com", "text": "Created attachment 26137\nExample code to reproduce behavior under Windows\n\nI ran into the following problem. I use the apr_file_lock() function in conjunction with the APR_FOPEN_APPEND flag under Windwos and Linux. Under Linux everything is fine.\n\nUnder Windows any attempt to write to the opened and locked file I get a deadlock. This is due the fact that apr_file_write() creates an own lock with apr_file_lock() if the file was opened with the APR_FOPEN_APPEND flag.\n\nIMHO this is inconsistent through different operating systems Unix does not lock, Windows does lock the file in append mode. However, I think the locking in the Windows implementation is wrong. The user has to choose if he wants to lock the file or not!\n\nTo reproduce the behavior please compile and test the attached example!", "id": 140582, "time": "2010-10-08T07:25:10Z", "bug_id": 50058, "creation_time": "2010-10-08T07:25:10Z", "is_private": false, "attachment_id": 26137}, {"count": 1, "tags": [], "bug_id": 50058, "is_private": false, "text": "Created attachment 26138\nRemove calls to apr_file_lock() and apr_file_unlock()\n\nRemoved the calls to lock and unlock the file. This have to be done by the application which calls apr_file_write() in append mode!", "id": 140586, "time": "2010-10-08T08:12:44Z", "creator": "sr@myarm.com", "creation_time": "2010-10-08T08:12:44Z", "attachment_id": 26138}, {"count": 2, "tags": [], "creator": "ivan@apache.org", "attachment_id": null, "id": 200508, "time": "2017-08-29T15:23:49Z", "bug_id": 50058, "creation_time": "2017-08-29T15:23:49Z", "is_private": false, "text": "Fixed in r1806608."}]