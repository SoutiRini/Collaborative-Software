[{"count": 0, "tags": [], "bug_id": 49267, "attachment_id": null, "id": 136756, "time": "2010-05-10T11:02:23Z", "creator": "nschulz@canto.com", "creation_time": "2010-05-10T11:02:23Z", "is_private": false, "text": "When sending mail with SSL, then the standard port for SMTP over SSL will be used always (465). Any specified port (by:  mailport=\"xxx\")  will be ignored.\n\nExample:\n\n<target name=\"mailtest\">\n   <mail   from=\"antbuild@company.com\"\n                tolist=\"developer@company.com\"\n                subject=\"Test 1\"\n                message=\"mail test\"\n                mailhost=\"smtp.company.com\" \n                user=\"theusername\" password=\"thepassword\"\n\n                mailport=\"646\" ssl=\"yes\" \n\n                enableStartTLS=\"no\"\n                failonerror=\"true\">\n        </mail>\n</target>\n\nDebug output:\n\nmailtest:\n     [mail] Using MIME mail\n     [mail] Sending email: Test 1\n     [mail] From antbuild@company.com\n     [mail] ReplyTo []\n     [mail] To [developer@company.com]\n     [mail] Cc []\n     [mail] Bcc []\n     [mail] Failed to send email: Could not connect to SMTP host: smtp.company.com, port: 465\n  [antcall] Exiting X:\\build.xml.\n\nReproducable on Solaris, Linux, Windows \nwith Ant 1.7.1, 1.8.0, 1.8.1"}, {"count": 1, "tags": [], "bug_id": 49267, "attachment_id": null, "id": 136773, "time": "2010-05-11T06:28:03Z", "creator": "bodewig@apache.org", "creation_time": "2010-05-11T06:28:03Z", "is_private": false, "text": "The javadocs of javamail can be read as if the way Ant works in 1.8.1 is correct, but there are other possible interpretations.  In particular the documentation of the mail.smtp.socketFactory.port says \"Specifies the port to connect to when using the specified socket factory. If not set, the default port will be used. \" - the question is what \"the default port\" will be.  Looks as if it was a hardcoded value of 465 rather than the value given in the mail.smtp.port property.\n\nI think this is fixed with svn revision 943074 of ant's svn trunk but I lack the environment to actually test this.  Is there any chance you could build Ant from sources to verify it has been fixed?"}, {"count": 2, "tags": [], "bug_id": 49267, "text": "for now I assume it is fixed.  Please reopen if the problem persists after you\nhad time to evaluate the new code.", "id": 137729, "time": "2010-06-18T05:13:35Z", "creator": "bodewig@apache.org", "creation_time": "2010-06-18T05:13:35Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 49267, "attachment_id": null, "id": 170190, "time": "2013-09-20T12:08:39Z", "creator": "tolik873@googlemail.com", "creation_time": "2013-09-20T12:08:39Z", "is_private": false, "text": "Still having this issue on version 1.8.3.v201301120609.\n\nIn Javamail source code the port property is read as:\nport = PropUtil.getIntSessionProperty(session, \"mail.\" + name + \".port\", -1);\nwith name=smtp or other.\n\nhence the line in MimeMailer.java should probably be\nprops.put(\"mail.smtp.port\", String.valueOf(port));\ninstead of\nprops.put(\"mail.smtp.socketFactory.port\", String.valueOf(port));"}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "text": "Three years ago I wrote I lacked the environment to test it.\n\nSince then I had to use JavaMail at work (not a pleasant expirience at all) and can confirm \"mail.smtps.port\" is the way to go.\n\nFixed with svn revision 1525227\n\nThanks for bringing this up again.", "id": 170201, "time": "2013-09-21T12:37:16Z", "bug_id": 49267, "creation_time": "2013-09-21T12:37:16Z", "is_private": false, "attachment_id": null}]