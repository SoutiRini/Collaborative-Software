[{"count": 0, "tags": [], "creator": "michael_furman@hotmail.com", "attachment_id": 27075, "id": 146675, "time": "2011-05-27T12:04:07Z", "bug_id": 51277, "creation_time": "2011-05-27T12:04:07Z", "is_private": false, "text": "Created attachment 27075\nLog from a browser\n\nHi!\nThere is NPE during the form authentication when form-login-config is missed\n\nI missed form-login-config by mistake (converted it from the BASIC):\n\n  <login-config>\n    <auth-method>FORM</auth-method>\n    <realm-name>Tomcat Manager Application</realm-name>\n  </login-config>\nUnfortunately I get NPE (see below and attached).\nI do understand that Form authentication can not work, but I think NPE is bad output.\nI think better is HTTP 500.\n\nBest regards,\n   Michael\n\n\njava.lang.NullPointerException\n\torg.apache.catalina.authenticator.FormAuthenticator.forwardToLoginPage(FormAuthenticator.java:373)\n\torg.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthenticator.java:267)\n\torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:539)\n\torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\n\torg.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)\n\torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)\n\torg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)\n\torg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)\n\torg.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)\n\tjava.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tjava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tjava.lang.Thread.run(Thread.java:662)"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 146764, "time": "2011-05-31T13:06:04Z", "bug_id": 51277, "creation_time": "2011-05-31T13:06:04Z", "text": "Check the response again. You do get a 500 response.\n\nI agree that the stack traced is not ideal. I have modified this to provide a more useful error message.\n\nThe fix has been made to 7.0.x and will be included in 7.0.15 onwards."}]