[{"count": 0, "tags": [], "creator": "albanard@hotmail.com", "attachment_id": null, "text": "----------------------\nVERSIONS:\n----------------------\nOS: Gentoo 1.4 (plus updates)\n\nlibtool --version \nltmain.sh (GNU libtool) 1.4.3 (1.922.2.111 2002/10/23 02:54:36) \n(also tried: 1.4.1)\n\nhttp://apache.mirrors.pair.\ncom/jakarta/tomcat-connectors/jk2/jakarta-tomcat-connectors-jk2-src-current.tar.\ngz\n\n----------------------\nPROBLEM:\n----------------------\n\nWhen trying to compile the mod_jk modules, this message appears:\n\nlibtool: install: error: cannot install `../../../build/jk2/apache2/jkjni.la' to \na directory not ending in /usr/lib/apache2\n\n----------------------\nREPRODUCIBLE: Always\n----------------------\n\nTO REPRODUCE:\n# download and untar latest connectors file (link shown above in VERSIONS \nsection)\ncd jakarta-tomcat-connectors-jk2-2.0.2-src/jk/native2/\nchmod 0777 buildconf.sh\n./buildconf.sh\n./configure  --with-apxs2=/usr/sbin/apxs2\nmake clean build\nlibtool --finish /usr/lib/apache2\n\n----------------------\nEXPECTED OUTCOME:\n----------------------\n\n1. make finishes with no errors.\n2. ../build/jk2/apache2/jkjni.so and ../build/jk2/apache2/mod_jk2.so are \ngenerated\n\n----------------------\nACTUAL OUTCOME:\n----------------------\n...\n\n/usr/build/libtool  --mode=install  cp ../../../build/jk2/apache2/jkjni.la \n`pwd`/../../../build/jk2/apache2\nlibtool: install: error: cannot install `../../../build/jk2/apache2/jkjni.la' to \na directory not ending in /usr/lib/apache2\nmake[1]: *** [../../../build/jk2/apache2/jkjni.so] Error 1\nmake[1]: Leaving directory `/test/jakarta-tomcat-connectors-jk2-2.0.\n2-src/jk/native2/server/apache2'\nmake: *** [jk2-build] Error 1\nPATH=\"$PATH:/sbin\" ldconfig -n /usr/lib/apache2\n----------------------------------------------------------------------\nLibraries have been installed in:\n   /usr/lib/apache2\n\nIf you ever happen to want to link against installed libraries\nin a given directory, LIBDIR, you must either use libtool, and\nspecify the full pathname of the library, or use the `-LLIBDIR'\nflag during linking and do at least one of the following:\n   - add LIBDIR to the `LD_LIBRARY_PATH' environment variable\n     during execution\n   - add LIBDIR to the `LD_RUN_PATH' environment variable\n     during linking\n   - use the `-Wl,--rpath -Wl,LIBDIR' linker flag\n   - have your system administrator add LIBDIR to `/etc/ld.so.conf'\n\nSee any operating system documentation about shared libraries for\nmore information, such as the ld(1) and ld.so(8) manual pages.\n----------------------------------------------------------------------\n\nOnly ../build/jk2/apache2/mod_jk2.so is generated, not ..\n/build/jk2/apache2/jkjni.so", "id": 52420, "time": "2004-02-17T13:54:24Z", "bug_id": 27006, "creation_time": "2004-02-17T13:54:24Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 27006, "is_private": false, "text": "Did you specify JAVA_HOME ?", "id": 52841, "time": "2004-02-24T09:57:20Z", "creator": "hgomez@apache.org", "creation_time": "2004-02-24T09:57:20Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 27006, "is_private": false, "text": "I tried:\n\nenv | grep JAVA_HOME\nJAVA_HOME=/opt/sun-jdk-1.4.2.03\n\n./configure --with-java-home=/opt/sun-jdk-1.4.2.03 --with-apxs2=/usr/sbin/apxs2 \n--with-tomcat41=/usr/local/tomcat\n\nAnd I still get the same error.\n\nWhat version of libtool did you use so that it worked for you? I read somewhere \nthat this kind of problem is caused by a stricter checking of installed paths by \nlibtool", "id": 52850, "time": "2004-02-24T13:18:18Z", "creator": "albanard@hotmail.com", "creation_time": "2004-02-24T13:18:18Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 27006, "is_private": false, "count": 3, "id": 52851, "time": "2004-02-24T13:22:01Z", "creator": "hgomez@apache.org", "creation_time": "2004-02-24T13:22:01Z", "text": "I'm using libtool which came from apr build 2.0.48, ie 1.5.\n\nAnd it works"}, {"count": 4, "tags": [], "bug_id": 27006, "text": "I just tried libtool 1.5.2-r3 and I still get the same error. Can you think of \nanything else (program versions / configure options / steps) I might be doing \ndifferently to you? Here is a recap of my steps:\n\ncd jakarta-tomcat-connectors-jk2-2.0.2-src/jk/native2/\nchmod 0777 buildconf.sh\n./buildconf.sh\n./configure --with-java-home=/opt/sun-jdk-1.4.2.03 --with-apxs2=/usr/sbin/apxs2 \n--with-tomcat41=/usr/local/tomcat\nmake clean build\nlibtool --finish /usr/lib/apache2", "id": 52853, "time": "2004-02-24T13:53:44Z", "creator": "albanard@hotmail.com", "creation_time": "2004-02-24T13:53:44Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 27006, "text": "It is now fixed.", "id": 53910, "time": "2004-03-12T08:27:11Z", "creator": "jfclere@gmail.com", "creation_time": "2004-03-12T08:27:11Z", "is_private": false, "attachment_id": null}]