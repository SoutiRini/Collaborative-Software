[{"count": 0, "tags": [], "bug_id": 44368, "text": "I am experiencing this error in some of my projects:\n\njava.lang.NullPointerException\n        at org.apache.tools.ant.types.resources.Sort$SortedBag$MutableInt.access$100(Sort.java:44)\n        at org.apache.tools.ant.types.resources.Sort$SortedBag$MyIterator.next(Sort.java:60)\n        at org.apache.tools.ant.types.resources.FailFast.next(FailFast.java:115)\n        at org.apache.tools.ant.taskdefs.DependSet.uptodate(DependSet.java:233)\n        at org.apache.tools.ant.taskdefs.DependSet.execute(DependSet.java:202)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n        at sun.reflect...\n\nThe exception is thrown when some specific jars are included in a <dependset> task, but only at\ncertain positions. If I move those jars up or down in the list, the error disappears.\n\nLooking at the source code, it looks like a case of concurrent modification in Sort$SortedBag, but I\nhave been unable to find out why or where.", "id": 113476, "time": "2008-02-06T04:27:47Z", "creator": "rruiz@gridsystems.com", "creation_time": "2008-02-06T04:27:47Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 44368, "text": "Created attachment 21486\nWorkaround patch\n\nThis patch is a workaround that solves the problem in my computer.", "id": 113482, "time": "2008-02-06T06:38:57Z", "creator": "rruiz@gridsystems.com", "creation_time": "2008-02-06T06:38:57Z", "is_private": false, "attachment_id": 21486}, {"count": 2, "tags": [], "bug_id": 44368, "text": "This bug is really ellusive. I have been unable to create a testcase for it.\n\nI am not allowed to submit the real case, because of IPR issues.", "id": 113483, "time": "2008-02-06T06:40:53Z", "creator": "rruiz@gridsystems.com", "creation_time": "2008-02-06T06:40:53Z", "is_private": false, "attachment_id": null}, {"count": 3, "text": "Weird--looks like the MutableInt is null.  Maybe I can eyeball it and add adequate guards.  Thanks for the \nreport.", "bug_id": 44368, "is_private": false, "id": 113491, "time": "2008-02-06T11:32:23Z", "creator": "mbenson@apache.org", "creation_time": "2008-02-06T11:32:23Z", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "mbenson@apache.org", "is_private": false, "count": 4, "id": 113493, "time": "2008-02-06T11:45:44Z", "bug_id": 44368, "creation_time": "2008-02-06T11:45:44Z", "text": "Your patch looks okay to me.  Is it still working for you, and do you give permission for its inclusion in \nAnt?"}, {"count": 5, "tags": [], "bug_id": 44368, "text": "Yes, it's working without problems.\nAnd yes, of course. I updated it to be used  :-) \nSorry for not making it clear  ;-) \n\nBTW, I have more information about this error. If I make \"ant clean all\",\nthe project compiles. It looks like the iteration failure is in the list\nof files to delete, and not in the list of dependencies.\n\nIt now looks to me a race condition even more than ever. I have had this\nerror since I updated to ant 1.7.0, some months ago, but I never paid\nattention to it  :( \n\nThe error only occurs with very strict conditions. If I move the project\nto another location in my file-system, the error disappears. If I change\nthe order of the dependset files, the error disappears. Even if I remove a\nsingle file in the target directory of the dependset, the error\ndisappears! Well, I think you will get the idea by now  :-D \n\nI don't consider my patch a real solution to the problem. I feel the error\nactually is in a very different location. My suspect is that it is in the\ndependset task, maybe in the portion of code that deletes the target\nfiles.\n\nHope this helps,\nRodrigo\n", "id": 113561, "time": "2008-02-08T00:09:58Z", "creator": "rruiz@gridsystems.com", "creation_time": "2008-02-08T00:09:58Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 44368, "is_private": false, "text": "I already fixed this problem last year\n\n*** This bug has been marked as a duplicate of 41284 ***", "id": 113574, "time": "2008-02-08T10:33:19Z", "creator": "jkf@apache.org", "creation_time": "2008-02-08T10:33:19Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "mbenson@apache.org", "text": "Ah... well maybe we should just wrap things up better so that they bubble up through the iterator methods \nand look like Concurrent blah exceptions?  Does that sound appropriate; we'd give a better indication of \nthe nature of the underlying problem?", "id": 113576, "attachment_id": null, "bug_id": 44368, "creation_time": "2008-02-08T10:50:35Z", "time": "2008-02-08T10:50:35Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "jkf@apache.org", "is_private": false, "count": 8, "id": 113577, "time": "2008-02-08T13:34:26Z", "bug_id": 44368, "creation_time": "2008-02-08T13:34:26Z", "text": "That would be hard, as it is not the collection that is changed. It is an object\ninside the collection that is being changed."}, {"count": 9, "tags": [], "creator": "mbenson@apache.org", "text": "All right, what if use an entry iterator instead of a key iterator, so I don't have to do the <get> anymore?", "id": 113578, "attachment_id": null, "bug_id": 44368, "creation_time": "2008-02-08T13:41:37Z", "time": "2008-02-08T13:41:37Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "jkf@apache.org", "is_private": false, "count": 10, "id": 113579, "time": "2008-02-08T14:11:13Z", "bug_id": 44368, "creation_time": "2008-02-08T14:11:13Z", "text": "The TreeSet will still get confused by items changing their ordering after these\nhave been added.\nFurthermore the objects actually stored are the keys. the \"value\" is only a\ncounter on how many times an equal object was added to the set (yuck).\n"}, {"count": 11, "tags": [], "bug_id": 44368, "text": "It still seems like we can do better than an NPE.  Maybe just a good old BuildException then.", "id": 113580, "time": "2008-02-08T14:17:12Z", "creator": "mbenson@apache.org", "creation_time": "2008-02-08T14:17:12Z", "is_private": false, "attachment_id": null}]