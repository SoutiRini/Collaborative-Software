[{"attachment_id": null, "tags": [], "creator": "jrupp@rtlogic.com", "is_private": false, "count": 0, "id": 24356, "time": "2002-10-11T14:33:55Z", "bug_id": 13540, "creation_time": "2002-10-11T14:33:55Z", "text": "The problem is that if you have no logs being displayed ( or a few very rarely \nseen logs) but you are getting logs for other things, the system can\nrun out of memory.  This is due to lf5 not bothering to check the max number of \nrecords if it didn't display a record, the result is that the\nnon-displayed records were being constantly added to a Vector, but that Vector \nwas never being checked to see if its size exceeded the max number of\nrecords you had specified.\n\nTo fix change org.apache.log4j.lf5.viewer.FilteredLogTableModel.java:\n\n  public synchronized boolean addLogRecord(LogRecord record) {\n\n    _allRecords.add(record);\n\n    // moved to always check if it needs trimming \n    trimRecords();\n    if (_filter.passes(record) == false) {\n      return false;\n    }\n    getFilteredRecords().add(record);\n    fireTableRowsInserted(getRowCount(), getRowCount());\n    return true;\n  }\n\n\n  public synchronized void fastRefresh() {\n      // added to always check if it needs trimming \n      if(_filteredRecords.size() >= _maxNumberOfLogRecords)\n      {\n          _filteredRecords.remove(0);\n          fireTableRowsDeleted(0, 0);\n      }\n  }"}, {"attachment_id": null, "tags": [], "creator": "yoavs@computer.org", "text": "LF5 is no longer in development.", "count": 1, "id": 68282, "time": "2004-12-10T19:40:53Z", "bug_id": 13540, "creation_time": "2004-12-10T19:40:53Z", "is_private": false}]