[{"count": 0, "tags": [], "creator": "mark.russo@broadbeam.com", "attachment_id": null, "id": 1795, "time": "2001-04-09T13:16:20Z", "bug_id": 1276, "creation_time": "2001-04-09T13:16:20Z", "is_private": false, "text": "It appears that the jar files that I have placed in my webapp's WEB-INF/lib \ndirectory are not being added to the classpath as promised by the 2.2 spec.\n\nFor example, I placed activation.jar in WEB-INF/lib and my servlet throws the \nfollowing exception:\n    java.lang.NoClassDefFoundError: javax/activation/DataSource\n\nAlso, when I examine my classpath by calling...\n\nSystem.getProperty(\"java.class.path\");\n\n...nothing from WEB-INF/lib is shown.\n\nHowever, just to confuse things a bit, when I did the following, I was able to \nget my app working:\n\n1- Put my classes in a jar and specified the following classpath in the \nmanifest: Class-Path: html-parser.jar activation.jar mail.jar\n\n2- Put all needed jars (including my own) in WEB-INF/lib\n\nAny help with this would be greatly appreciated.\nThanks."}, {"count": 1, "attachment_id": null, "bug_id": 1276, "is_private": false, "id": 1913, "time": "2001-04-18T16:00:04Z", "creator": "cmanolache@yahoo.com", "creation_time": "2001-04-18T16:00:04Z", "tags": [], "text": "Java.class.path can't be set ( each webapp has a different one ). Jar files are \nadded and should work. We need more data - it may be something wrong with the \nsetup. The only way we can reproduce this is if you can attach a small WAR \ncontaining a simple servlet and a jar file so we can reproduce it.\n( please don't include too many files - just the minimal stuff )"}, {"count": 2, "tags": [], "bug_id": 1276, "attachment_id": 152, "id": 2425, "time": "2001-05-14T02:02:22Z", "creator": "jalpert@3path.com", "creation_time": "2001-05-14T02:02:22Z", "is_private": false, "text": "Created attachment 152\nThis is a war file with *.jar files in the web-inf/lib"}, {"count": 3, "tags": [], "bug_id": 1276, "attachment_id": null, "id": 2426, "time": "2001-05-14T02:04:05Z", "creator": "jalpert@3path.com", "creation_time": "2001-05-14T02:04:05Z", "is_private": false, "text": "This happens for me too.\nI attached a simple servlet which uses xml, the xml package is placed in the lib \ndir. \nwar file was packeged using j2ee deployment tool."}, {"count": 4, "tags": [], "creator": "cmanolache@yahoo.com", "attachment_id": null, "is_private": false, "id": 2515, "time": "2001-05-17T13:09:04Z", "bug_id": 1276, "creation_time": "2001-05-17T13:09:04Z", "text": "This seems like a bug in jaxp/crimson. The problem is that jaxp is supposed to\nuse the thread class loader ( same thing is done by jndi ). You'll also need\nto add the Jdk12Interceptor to server.xml ( starting with 3.3 JDK1.2 will be\ndetected and the interceptor added automatically ).\n\nFor other libraries - it is essential that they use Thread.getContextClassLoader when loading a class, not Class.forName - otherwise it can't work. \n\nPlease try with a recent JAXP (1.1) and/or with tomcat3.3 or 3.2.2 + Jdk12Interceptor set up.\n\nBTW, the \"tick\" that you use is very interesting - it'll affect URLClassLoader and make it behave in a special way when using Class.forName.\n I'm not sure if we can use it to solve this programmatically - but it's may be a good idea. "}]