[{"count": 0, "tags": [], "bug_id": 10047, "text": "Hi,\n\nI'm using JBOSS (2.4.4), Tomcat (3.2.3) and Struts (1.0.2) for my\nweb applications. I have a problem with endless IllegalStateException's\nwhen I interrupt a Struts action with the browser back button. To be\nsure that I haven't done anything wrong with redirects, error pages and\nalready commited buffers I've set up a simple test case:\n\n- a \"start\" JSP with a link to a Struts action\n- a Struts action, that writes a line to the logfile, waits some seconds\n  and then forwards to the \"success\" page\n- a simple \"success\" JSP\n\n\nTo reproduce the IllegalStateException's I first go to the start JSP page,\nclick on the action link and while the browser and the Struts action are \nwaiting I hit the browser's back button. The result is that I'm on the \npreceding page again and the log gets filled with endless exception messages\n(the logfile from JBOSS in this case):\n\nINFO  Default: JBoss-2.4.4 Started in 0m:23s.505\nINFO  Default: IllegalAction entered... <-- my action\nINFO  Default: IllegalAction continue...\nDEBUG EmbeddedTomcatServiceSX: 2002-06-19 12:00:47 - Ctx( /demo ): IOException\nin: R( /demo + /illegal1.jsp + null) Socket closed\nDEBUG EmbeddedTomcatServiceSX: 2002-06-19 12:00:47 - Ctx( /demo ):\nIllegalStateException in: R( /demo + /illegal1.jsp + null) Current state =\nFLUSHED, new state = CODING_END\nDEBUG EmbeddedTomcatServiceSX: 2002-06-19 12:00:47 - Ctx( /demo ):\nIllegalStateException in: R( /demo + /illegal1.jsp + null) Current state =\nFLUSHED, new state = CODING\nDEBUG EmbeddedTomcatServiceSX: 2002-06-19 12:00:47 - Ctx( /demo ):\nIllegalStateException in: R( /demo + /illegal1.jsp + null) Current state =\nFLUSHED, new state = CODING\n... ad infinitum ...\n\n\nThe same happens when I deploy the example in a standalone Tomcat:\n\nIllegalAction entered... <-- my action again\nIllegalAction continue...\n2002-06-20 09:34:31 - Ctx( /struts-test ): IOException in: R( /struts-test +\n/illegal1.jsp + null) Socket closed\n2002-06-20 09:34:31 - Ctx( /struts-test ): IllegalStateException in: R(\n/struts-test + /illegal1.jsp + null) Current state = FLUSHED, new state = CODING_END\n2002-06-20 09:34:31 - Ctx( /struts-test ): IllegalStateException in: R(\n/struts-test + /illegal1.jsp + null) Current state = FLUSHED, new state = CODING\n2002-06-20 09:34:31 - Ctx( /struts-test ): IllegalStateException in: R(\n/struts-test + /illegal1.jsp + null) Current state = FLUSHED, new state = CODING\n...\n\n\nThe exceptions never stop and I have to restart Tomcat.", "id": 18134, "time": "2002-06-20T08:54:48Z", "creator": "js@cataloom.com", "creation_time": "2002-06-20T08:54:48Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 10047, "attachment_id": 2135, "id": 18143, "time": "2002-06-20T09:17:10Z", "creator": "js@cataloom.com", "creation_time": "2002-06-20T09:17:10Z", "is_private": false, "text": "Created attachment 2135\nTestcase source (JSP pages, Struts action, build.xml etc.) as .tgz file"}, {"count": 2, "tags": [], "bug_id": 10047, "attachment_id": null, "id": 18151, "time": "2002-06-20T09:35:05Z", "creator": "js@cataloom.com", "creation_time": "2002-06-20T09:35:05Z", "is_private": false, "text": "The exceptions don't occur when I use Tomcat 3.3.1."}, {"count": 3, "tags": [], "creator": "william.barker@wilshire.com", "attachment_id": null, "text": "*** Bug 16150 has been marked as a duplicate of this bug. ***", "id": 29491, "time": "2003-01-16T02:03:44Z", "bug_id": 10047, "creation_time": "2003-01-16T02:03:44Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 10047, "attachment_id": null, "id": 114109, "time": "2008-02-28T11:46:16Z", "creator": "markt@apache.org", "creation_time": "2008-02-28T11:46:16Z", "is_private": false, "text": "Tomcat 3 is no longer the focus of development.\n\nIt is almost certain there will be no development work on versions prior to 3.3.x and it is highly unlikely that further development will take place on 3.3.x\n\nAll open Tomcat 3 bugs are therefore being closed as WONTFIX.\n\nIf any of these issues is still a problem for you, please test the latest stable release of a supported version (http://wiki.apache.org/tomcat/TomcatVersions). If you still have the issue with the latest stable release of a supported version, please re-open this bug and change the version to the one you tested."}]