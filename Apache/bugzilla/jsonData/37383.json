[{"count": 0, "tags": [], "bug_id": 37383, "attachment_id": null, "id": 82181, "time": "2005-11-07T14:19:54Z", "creator": "Terry.Rosenbaum@gmail.com", "creation_time": "2005-11-07T14:19:54Z", "is_private": false, "text": "If you look at the code, it will be obvious.\nA ClassCastException will occur when doing operations like:\naLocatorSet = (TreeSet) ((Map.Entry) aValueIterator.next()).getValue();\n\nThat is because the Iterator being used is from a Collection, not a map.\nThe change is to get the Iterator from the entrySet() of the TreeMap instead\nof the values(). e.g.\naValueIterator = itsValues.entrySet().iterator();\ninstead of\naValueIterator = itsValues.values().iterator();\n\nIf you run the buggy version, everything appears OK (poor error handling) but\nindexes are not used.\n\nPatch for org.apache.xindice.core.indexer.MemValueIndexer is attached."}, {"count": 1, "tags": [], "bug_id": 37383, "text": "Created attachment 16892\nPatch for MemValueIndexer.java\n\nFixed silent failure with ClassCastException. The MemValueIndexer did not work\nas originally written but poor error handling caused tests to think everything\nwas OK.", "id": 82182, "time": "2005-11-07T14:22:06Z", "creator": "Terry.Rosenbaum@gmail.com", "creation_time": "2005-11-07T14:22:06Z", "is_private": false, "attachment_id": 16892}, {"count": 2, "tags": [], "creator": "vgritsenko@apache.org", "attachment_id": null, "id": 83710, "time": "2005-12-15T23:12:36Z", "bug_id": 37383, "creation_time": "2005-12-15T23:12:36Z", "is_private": false, "text": "Patch applied. Thanks!"}]