[{"count": 0, "tags": [], "creator": "aleimbacher@tetrade.ch", "attachment_id": null, "text": "Scenario:\n- Client sends POST data\n- Access checker (my custom module) returns 403\n\nFor 1.3.29 ap_die() calls ap_discard_request_body(), 1.3.31 does not.\n\nThis causes the start of POST data to be interpreted as next\nvalid request line!\n\nCode details below\n\n1.3.31 main/http_request.c:1057\n\n    if ((r->status != HTTP_NOT_MODIFIED) && (r->status != HTTP_NO_CONTENT)\n        && !ap_status_drops_connection(r->status)\n        && r->connection && (r->connection->keepalive > 0 )) {\n\n        (void) ap_discard_request_body(r);\n    }\n\n\n1.3.29 main/http_request.c:1110\n\n    if ((r->status != HTTP_NOT_MODIFIED) && (r->status != HTTP_NO_CONTENT)\n        && !ap_status_drops_connection(r->status)\n        && r->connection && (r->connection->keepalive != -1)) {\n\n        (void) ap_discard_request_body(r);\n    }\n\n\nI changed the this code back to 1.2.29 and everything works fine for me", "id": 59227, "time": "2004-06-15T14:40:48Z", "bug_id": 29577, "creation_time": "2004-06-15T14:40:48Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 29577, "text": "Some more info:\n\nThe second request re-uses the connection of the first denied POST request.", "id": 59230, "time": "2004-06-15T15:01:54Z", "creator": "aleimbacher@tetrade.ch", "creation_time": "2004-06-15T15:01:54Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "aleimbacher@tetrade.ch", "attachment_id": null, "text": "I have checked the current snapshot apache-1.3_20040615104126.tar.gz and\nI've seen that this bug has been already fixed!\n\nSorry for the hassling", "id": 59231, "time": "2004-06-15T15:09:31Z", "bug_id": 29577, "creation_time": "2004-06-15T15:09:31Z", "is_private": false}]