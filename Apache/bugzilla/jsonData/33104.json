[{"count": 0, "attachment_id": null, "bug_id": 33104, "is_private": false, "id": 69702, "time": "2005-01-14T20:17:57Z", "creator": "tomcatlist@tkz.net", "creation_time": "2005-01-14T20:17:57Z", "tags": [], "text": "I get deprecation errors when trying a filter with Tomcat 5.5.4 and JDK 1.5 and\nto minimize the variables, I've limited it down to the smallest possible\nCLASSPATH and use case, using only the command line:\n\n$ printenv CLASSPATH\n.:/usr/java/jakarta-tomcat-5.5.4/common/lib/servlet-api.jar\n\n$ java -version\njava version \"1.5.0_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_01-b08)\nJava HotSpot(TM) Client VM (build 1.5.0_01-b08, mixed mode, sharing)\n\n$ javac -Xlint:deprecation net/tkz/web/filter/TestWrapper.java\nnet/tkz/web/filter/TestWrapper.java:16: warning: [deprecation]\nsetStatus(int,java.lang.String) in javax.servlet.http.HttpServletResponse has\nbeen deprecatedpublic class TestWrapper extends HttpServletResponseWrapper {\n       ^\nnet/tkz/web/filter/TestWrapper.java:16: warning: [deprecation]\nencodeRedirectUrl(java.lang.String) in javax.servlet.http.HttpServletResponse\nhas been deprecated\npublic class TestWrapper extends HttpServletResponseWrapper {\n       ^\nnet/tkz/web/filter/TestWrapper.java:16: warning: [deprecation]\nencodeUrl(java.lang.String) in javax.servlet.http.HttpServletResponse has been\ndeprecated\npublic class TestWrapper extends HttpServletResponseWrapper {\n       ^\n3 warnings\n\nSo after some detective work I did indeed come across the source code which\nincluded the deprecated methods.  I downloaded source for both 5.5.4 and 5.5.6\nand the latest version is unchanged.  The file in question is:\n \njakarta-tomcat-5.5.4-src/jakarta-servletapi-5/jsr154/src/share/javax/servlet/http/HttpServletResponseWrapper.java\n\nI see from\nhttp://cvs.apache.org/viewcvs.cgi/jakarta-servletapi-5/jsr154/src/share/javax/servlet/http/HttpServletResponseWrapper.java?rev=1.3&view=markup\nthat the deprecated code is still there.\n\nIt's my understanding that the tomcat 5.5 branch is a JDK 1.5 branch, so I\nwanted to inquire about removing the deprecated methods from\nHttpServletResponseWrapper and HttpServletResponse.  I'm willing to submit a\npatch, if it would be useful.\n\nMy code used to work with tomcat4 and JDK 1.4.  I'll attach the simple test case\nabove that demonstrates the errors."}, {"count": 1, "tags": [], "creator": "tomcatlist@tkz.net", "is_private": false, "text": "Created attachment 14001\nTest Case\n\nThis is a minimal wrapper to demonstrate the problem described.", "id": 69703, "time": "2005-01-14T20:21:42Z", "bug_id": 33104, "creation_time": "2005-01-14T20:21:42Z", "attachment_id": 14001}, {"count": 2, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "The javax.servlet.* pacakges must be written to J2SE 1.3 as per the 2.4 servlet\nspec. Therefore you will get deprecation warnings with later versions of J2SE.", "id": 69706, "time": "2005-01-14T20:53:12Z", "bug_id": 33104, "creation_time": "2005-01-14T20:53:12Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "(In reply to comment #2)\n> The javax.servlet.* pacakges must be written to J2SE 1.3 as per the 2.4 \nservlet\n> spec. Therefore you will get deprecation warnings with later versions of \nJ2SE.\n\nI'm reopening this.\n\nPer the 2.4 spec, J2SE 1.3 is the <i>minimum</i> version of the underlying \nJava Platform with which servlet containers must be built. \n\nSince the JDK Tomcat 5.5 requires is 1.5, it should be written to it.", "attachment_id": null, "id": 89265, "creator": "jhertz@speakeasy.net", "time": "2006-05-18T20:02:49Z", "bug_id": 33104, "creation_time": "2006-05-18T20:02:49Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 33104, "attachment_id": null, "id": 89267, "time": "2006-05-18T20:44:28Z", "creator": "jhertz@speakeasy.net", "creation_time": "2006-05-18T20:44:28Z", "is_private": false, "text": "Remy, May I PLEASE have an answer rather as to why it is invalid, than simply \nmarking this as invalid without comment.\n\nI cannot be that the spec requires you to implement javax.servlet.* code to \nthe 1.3 JDK, when methods you call are deprecated in the 1.5 JDK your code \nrequires.\n\nPresumably those deprecated methods won't exist in the next JDK, so Tomcat 5.5 \ncannot possibly even compile under it. \n\nIs that what youre claiming to be the case? Say it ain't so. Please."}, {"count": 5, "tags": [], "bug_id": 33104, "attachment_id": null, "id": 89268, "time": "2006-05-18T20:50:49Z", "creator": "yoavs@computer.org", "creation_time": "2006-05-18T20:50:49Z", "is_private": false, "text": "First, Tomcat 5.5 does not require J2SE 5, it works with J2SE 1.4 as well.\n\nSecond, Tomcat 5.x as an implementation of the Servlet Spec v2.4 is required to\nbe compilable under JDK 1.3, which it is, so these methods must be kept in.\n\nWith Tomcat 6 it will be a different story, these methods will be removed.\n\nAnd even if you were right, this would be at best an enhancement request, not a\nbug, because they're warnings and not errors.\n\nFinally, please don't reopen this item without discussing it on tomcat-dev\nfirst.  The mailing list is a much better forum for talk and explanations than\nBugzilla.  Thanks."}, {"count": 6, "tags": [], "creator": "jhertz@speakeasy.net", "is_private": false, "text": "Fair enough. Not reopening. Will follow up on dev list after subscribing.\n\nPlease note this was asked on tomcat-user and struts-user, and no answers came.", "id": 89269, "time": "2006-05-18T21:05:04Z", "bug_id": 33104, "creation_time": "2006-05-18T21:05:04Z", "attachment_id": null}]