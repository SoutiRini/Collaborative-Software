[{"count": 0, "tags": [], "creator": "terencek@etechfocus.com", "attachment_id": null, "text": "save the following as r1.jsp. The r1_jsp.java will create some very strange \noutput see below when it hits %%.\n\nTomcat 4.0.4 is okay\nTomcat 4.1.12 is not okay\nJDK 1.4.0_01\n\nSystem: Windows NT 2000.\n----------------\n<%!\n   public void tableHeader(JspWriter out, String sTitle, String sSubtitle)\n   {\n      String sHeight=\"15\";\n      String sWidth=\"14\";\n      String sColor=\"088000\";\n\t/*\n\tout.println(\"<tr><td bgcolor=#808080 height=\"+sHeight+\" rowspan=2 \nnowrap><table width=140 cellpadding=0 cellspacing=0 border=0><tr><td \nwidth=140></td></tr></table><font \ncolor=white>&nbsp;&nbsp;<b>\"+sTitle+\"</b></font></td><td bgcolor=#808080 \nvalign=top><img src=../images/tri.gif width=\"+sWidth+\" \nheight=\"+sHeight+\"></td><td align=right width=90%%><table><tr><td \nnowrap>\"+sSubtitle+\"</td></tr></table></td></tr>\");\n\t*/\n   }\n%>\n----------\nOutput result in r1_jsp.java\n--------\npackage org.apache.jsp;\n\nimport javax.servlet.*;\nimport javax.servlet.http.*;\nimport javax.servlet.jsp.*;\nimport org.apache.jasper.runtime.*;\n\npublic class r1_jsp extends HttpJspBase {\n\n\n   public void tableHeader(JspWriter out, String sTitle, String sSubtitle)\n   {\n      String sHeight=\"15\";\n      String sWidth=\"14\";\n      String sColor=\"088000\";\n        /*\n        out.println(\"<tr><td bgcolor=#808080 height=\"+sHeight+\" rowspan=2 nowrap\n><table width=140 cellpadding=0 cellspacing=0 border=0><tr><td width=140></td></\ntr></table><font color=white>&nbsp;&nbsp;<b>\"+sTitle+\"</b></font></td><td bgcolo\nr=#808080 valign=top><img src=../images/tri.gif width=\"+sWidth+\" height=\"+sHeigh\nt+\"></td><td align=right width=90%\n  private static java.util.Vector _jspx_includes;\n\n  public java.util.List getIncludes() {\n    return _jspx_includes;\n  }\n\n  public void _jspService(HttpServletRequest request, HttpServletResponse respon\nse)\n        throws java.io.IOException, ServletException {\n\n    JspFactory _jspxFactory = null;\n    javax.servlet.jsp.PageContext pageContext = null;\n    HttpSession session = null;\n    ServletContext application = null;\n    ServletConfig config = null;\n    JspWriter out = null;\n    Object page = this;\n    JspWriter _jspx_out = null;\n\n\n    try {\n      _jspxFactory = JspFactory.getDefaultFactory();\n      response.setContentType(\"text/html;charset=ISO-8859-1\");\n      pageContext = _jspxFactory.getPageContext(this, request, response,\n                        null, true, 8192, true);\n      application = pageContext.getServletContext();\n      config = pageContext.getServletConfig();\n      session = pageContext.getSession();\n      out = pageContext.getOut();\n      _jspx_out = out;\n\n      out.write(\"<table>\");\n      out.write(\"<tr>\");\n      out.write(\"<td nowrap>\\\"+sSubtitle+\\\"\");\n      out.write(\"</td>\");\n      out.write(\"</tr>\");\n      out.write(\"</table>\");\n      out.write(\"</td>\");\n      out.write(\"</tr>\\\");\\r\\n\\t*/\\r\\n   }\\r\\n%>\\r\\n\\r\\n\");\n    } catch (Throwable t) {\n      out = _jspx_out;\n      if (out != null && out.getBufferSize() != 0)\n        out.clearBuffer();\n      if (pageContext != null) pageContext.handlePageException(t);\n    } finally {\n      if (_jspxFactory != null) _jspxFactory.releasePageContext(pageContext);\n    }\n  }\n}", "id": 25360, "time": "2002-10-30T03:21:03Z", "bug_id": 14080, "creation_time": "2002-10-30T03:21:03Z", "is_private": false}, {"count": 1, "tags": [], "creator": "kin-man.chung@sun.com", "text": "The problem is not '%%', but '%>'.  You'll need to escape '%>' as '%\\>'.  See\nJSP.2.6.", "id": 25380, "attachment_id": null, "bug_id": 14080, "creation_time": "2002-10-30T17:06:13Z", "time": "2002-10-30T17:06:13Z", "is_private": false}]