[{"attachment_id": null, "tags": [], "bug_id": 8599, "is_private": false, "count": 0, "id": 14936, "time": "2002-04-28T05:06:43Z", "creator": "prasad.subramanian@sun.com", "creation_time": "2002-04-28T05:06:43Z", "text": "Case:\nI have a xsl file (Status.xsl) that includes another xsl file using <xsl \ninclude href=\"xsl/Attribute.xsl>\n\nI pass the Status.xsl as a  value for the attribute xslt for an x:transform tag \nwith a xsltSystemId attribute.\n\nI get a NPE\njavax.servlet.jsp.JspException: \njavax.xml.transform.TransformerConfigurationException: \njavax.xml.transform.TransformerException: java.lang.NullPointerException\n\tat \norg.apache.taglibs.standard.tag.common.xml.TransformSupport.doStartTag\n(TransformSupport.java:163)\n\tat org.apache.taglibs.standard.tag.el.xml.TransformTag.doStartTag\n(TransformTag.java:104)\n\n==============================================================================\nThe JSP Looks like:\n<%@taglib uri=\"http://java.sun.com/jstl/core\" prefix=\"c\" %>\n<%@taglib uri=\"http://java.sun.com/jstl/xml\" prefix=\"x\" %>\n\n<c:import url=\"/xml/listing.xml\" var=\"xml\" />\n<x:parse xml=\"${xml}\" var=\"xmlView\" \nsystemId=\"http://localhost:8080/JSTLActTrack/xml\" />\n<b> This JSP lists all the activities that are ... </b>\n\n<c:import url=\"/xml/Status.xsl\" var=\"xsl\" />\n<x:transform xml=\"${xmlView}\" xslt=\"${xsl}\" \nxsltSystemId=\"http://localhost:8080/JSTLActTrack/xsl\">\n\t<x:param name=\"status\" value=\"${param.actstat}\" />\n</x:transform>\n\n===========================================================\nStatus.xsl \n<?xml version=\"1.0\"?>\n<xsl:stylesheet  xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" \nversion=\"1.0\">   \n<xsl:include href=\"xsl/Attribute.xsl\" />\n<xsl:param name =\"status\" select=\"default\" />\n<xsl:template match=\"/\">\n\n<table border=\"1\"  >\n\n<tr><th>Activity id</th><th>Resp Engr</th><th>Status</th><th>Start \nDate</th><th>End Date</th><th>Description</th></tr>\n<xsl:for-each select=\"//activities/activity\">\n\t<xsl:if test=\"status/text()=$status\" >\n\t\t<tr>\n                <td><xsl:value-of select=\"@id\"/></td>\t\t\n                <td><xsl:value-of select=\"resp_engr\"/></td>\n                <td><xsl:value-of select=\"status\"/></td>\n                <td><xsl:value-of select=\"start_dt\"/></td>\n                <td><xsl:value-of select=\"end_dt\"/></td>\n                <td><xsl:value-of select=\"description\"/></td>\n                </tr>\n          </xsl:if>\n     </xsl:for-each>\n</table>   \n</xsl:template>\n</xsl:stylesheet>\n\n==========================================================\n\nAnd Attribute .xsl looks like :\n<?xml version=\"1.0\"?>\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3c.org/1999/XSL/Transform\">\n<xsl:attribute-set name=\"color-attributes\" >\n\t<xsl:attribute name=\"bgcolor\" >cyan</xsl:attribute>\n</xsl:attribute-set>\n</xsl:stylesheet>"}, {"count": 1, "tags": [], "bug_id": 8599, "attachment_id": null, "text": "Apparently not a bug; I've tested and can replicated, but the RI is in\ncompliance:\n\n - It's not an NPE but a JspException that's thrown.\n - The error is legitimate since the file included in the XSLT stylesheet\n   via <xsl:include> isn't found; it's pointing to an \"xsl\" directory that\n   doesn't exist, and the system IDs are off by a level in the directory\n   hierarchy since they point to directories and not files.\n\nI've made the error message clearer; it now includes the offending file path,\nand it's a direct TransformerException instead of one that wraps a\nNullPointerException (since the latter scares people!).  But this isn't a bug.", "id": 15054, "time": "2002-04-29T16:02:25Z", "creator": "bayern@essentially.net", "creation_time": "2002-04-29T16:02:25Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 8599, "text": "I have a file Status.xsl that refrences the file Attribute.xsl\nthe syntax is \n<xsl:include href=\"xsl/Attribute.xsl\" />\n\nStatus.xsl exists under <Context-Home>/xml/\nAttribute.xsl exists under <Context-Home>/xsl/\n\nIn the JSP the code looks like :\n<x:transform xml=\"${xml}\" xslt=\"${xslt}\" \nxsltSystemId=\"http://localhost:8080/JSTLActTrack/xml\" />\ntaking the system id one level up as is the case we resolve to\n\n http://localhost:8080/JSTLActTrack \nwhich should be fine\n\nI get this error :\n=======================================================================\n\njavax.servlet.jsp.JspException: \njavax.xml.transform.TransformerConfigurationException: \njavax.xml.transform.TransformerException: \njavax.xml.transform.TransformerException: Had IO Exception with stylesheet \nfile: xsl/Attribute.xsl\n\tat \norg.apache.taglibs.standard.tag.common.xml.TransformSupport.doStartTag\n(TransformSupport.java:163)\n\tat org.apache.taglibs.standard.tag.el.xml.TransformTag.doStartTag\n(TransformTag.java:104)\n\tat org.apache.jsp.review_0005fproj_0005fxml_0005fsysid$jsp._jspService\n(review_0005fproj_0005fxml_0005fsysid$jsp.java:144)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:201)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:381)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:473)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:633)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:470)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:633)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:631)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:470)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2349)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:633)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:631)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:631)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:470)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:633)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:469)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:631)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:470)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:405)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:358)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:495)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:518)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\n\n--------------------------------------------------------------------------------\n\n", "count": 2, "id": 15198, "time": "2002-04-30T21:49:28Z", "creator": "prasad.subramanian@sun.com", "creation_time": "2002-04-30T21:49:28Z", "is_private": false}, {"count": 3, "tags": [], "text": "Okay, I've tracked down the underlying bug.  The present code for \nTransformSupport is now a masterpiece of case analysis :-) -- if there are \nstill cases that aren't accounted for, I'll be disappointed!", "is_private": false, "id": 15218, "creation_time": "2002-05-01T04:59:29Z", "time": "2002-05-01T04:59:29Z", "creator": "bayern@essentially.net", "bug_id": 8599, "attachment_id": null}]