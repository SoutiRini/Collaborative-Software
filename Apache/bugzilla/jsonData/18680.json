[{"count": 0, "tags": [], "text": "Hi,\n\nWhile deploying a web app containing Static and Dynamic Japanese data, I found \nthat the japanese data fetched from database is not displayed correctly.\n\nAfter drilling down I came to know its a encoding related issue.\nHence accordingly I made following changes in the listed components.\n\nChanged Jar --- jakarta-tomcat-4.1.12\\common\\lib\\jasper-compiler.jar\n--------------------------------------------------------------------------------\n1. Class file  --- Validator.java\n   Changes     --- validate()\n               --- I changed the charset encoding to SHIFT_JIS \n                   instead of ISO8859-1\n\n2. Class file  --- ParserController.java\n   Changes     --- figureOutJspDocument()\n               --- I changed the newEncoding value to SHIFT_JIS \n                   instead of ISO8859-1 \n\nIts working fine for both charset data.(English and Japanese)\n\nRegards,\nSushil Jadhav", "attachment_id": null, "id": 34479, "creator": "sushilvj@hotmail.com", "time": "2003-04-04T01:41:18Z", "bug_id": 18680, "creation_time": "2003-04-04T01:41:18Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 18680, "is_private": false, "id": 34639, "time": "2003-04-07T19:54:05Z", "creator": "kin-man.chung@sun.com", "creation_time": "2003-04-07T19:54:05Z", "tags": [], "text": "The JSP spec specifies that the default charset is iso-8859-1.  Changing the\ndefault to SHIFT_JIS is not correct.  Instead, make sure that the pages contain\na page directive with contentType set to \"text/html;charset=SHIFT_JIS\""}, {"count": 2, "tags": [], "bug_id": 18680, "text": "Hi,\n\n>>The JSP spec specifies that the default charset is iso-8859-1.  Changing the\n>>default to SHIFT_JIS is not correct.  Instead, make sure that the pages \n>>contain\n>>a page directive with contentType set to \"text/html;charset=SHIFT_JIS\"\n\nWe have used the charset as SHIFT_JIS in jsps but the problem is still there \nbut when we change the charset in jasper compiler from iso-8859-1 to SHIFT_JIS\nthe data is not corrupted.\n\n\n\n", "id": 34661, "time": "2003-04-08T00:48:05Z", "creator": "sushilvj@hotmail.com", "creation_time": "2003-04-08T00:48:05Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": 12241, "bug_id": 18680, "is_private": false, "id": 61187, "time": "2004-07-27T17:15:33Z", "creator": "jogoussard@hotmail.com", "creation_time": "2004-07-27T17:15:33Z", "tags": [], "text": "Created attachment 12241\nCompiler patch - grep for 'jog'"}, {"attachment_id": null, "tags": [], "bug_id": 18680, "text": "Jasper does not honour <jsp:directive.page pageEncoding> or\neven the <?xml encoding=... value.\nThe servlet writer is set up BEFORE the parsing of the JSP\npage, and always uses the ISO-8859-1 default encoding.\n", "count": 4, "id": 61188, "time": "2004-07-27T17:16:30Z", "creator": "jogoussard@hotmail.com", "creation_time": "2004-07-27T17:16:30Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 18680, "attachment_id": null, "is_private": false, "id": 61189, "time": "2004-07-27T17:17:43Z", "creator": "jogoussard@hotmail.com", "creation_time": "2004-07-27T17:17:43Z", "text": "re-open this bug: this is really a bug in the Compiler class."}, {"count": 6, "text": "Please test this on Tomcat 5.0.27, as relevant fixes have been done.", "bug_id": 18680, "attachment_id": null, "id": 61190, "time": "2004-07-27T17:29:45Z", "creator": "yoavs@computer.org", "creation_time": "2004-07-27T17:29:45Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "ranlevy@yahoo.com", "attachment_id": null, "id": 67797, "time": "2004-12-02T18:09:16Z", "bug_id": 18680, "creation_time": "2004-12-02T18:09:16Z", "is_private": false, "text": "All dynamically generated text in JSP pages is displyes in the wrong encoding.\nTomcat 5.X crashes on my web-app, while Tomcat 4.X runs it properly, so it would\nbe nice to have a fix for this in 4.X as well.\n"}, {"count": 8, "tags": [], "bug_id": 18680, "attachment_id": null, "text": "There have been relevant additional fixes/enhancements recently, such as the \njavaEncoding jasper param and others.  You might want to try a later release.\n\nAs for having it fixed in Tomcat 4.x: don't hold your breath.", "id": 67799, "time": "2004-12-02T18:10:52Z", "creator": "yoavs@computer.org", "creation_time": "2004-12-02T18:10:52Z", "is_private": false}, {"count": 9, "tags": [], "text": "Tested and found that problem persists in 5.5.4 as well; I'll post a bug report\nfor that version as well (unless one already exists). Both versions cannot\nhandle non-default encoding for dynamically generated text in JSPs.", "attachment_id": null, "bug_id": 18680, "id": 67812, "time": "2004-12-02T19:56:28Z", "creator": "ranlevy@yahoo.com", "creation_time": "2004-12-02T19:56:28Z", "is_private": false}, {"count": 10, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 67836, "time": "2004-12-02T23:52:05Z", "bug_id": 18680, "creation_time": "2004-12-02T23:52:05Z", "is_private": false, "text": "There have been many fixes for this since 4.1.12 and for a single JSP page I \nam surprised that this doesn't work. Please provide a test WAR or JSP that \ndemonstrates this bug and I will quite happily apply any necessary fixes to \nTC4 and TC5. Without a test case this bug report will be closed as invalid."}, {"attachment_id": null, "tags": [], "bug_id": 18680, "text": "As I said 5 years ago.", "count": 11, "id": 134241, "time": "2010-02-04T12:28:15Z", "creator": "markt@apache.org", "creation_time": "2010-02-04T12:28:15Z", "is_private": false}]