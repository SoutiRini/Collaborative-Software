[{"count": 0, "tags": [], "creator": "trejkaz@trypticon.org", "attachment_id": null, "text": "A WMF image which we found in a PowerPoint document had an APM header with\nheight 0.  Windows is able to display the image correctly, however Batik's\nWMFPainter doesn't paint anything.", "id": 97056, "time": "2006-12-18T17:17:36Z", "bug_id": 41205, "creation_time": "2006-12-18T17:17:36Z", "is_private": false}, {"count": 1, "tags": [], "creator": "trejkaz@trypticon.org", "attachment_id": 19285, "text": "Created attachment 19285\nTest WMF 1", "id": 97057, "time": "2006-12-18T17:18:43Z", "bug_id": 41205, "creation_time": "2006-12-18T17:18:43Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 41205, "attachment_id": 19286, "id": 97058, "time": "2006-12-18T17:18:52Z", "creator": "trejkaz@trypticon.org", "creation_time": "2006-12-18T17:18:52Z", "is_private": false, "text": "Created attachment 19286\nTest WMF 2"}, {"count": 3, "tags": [], "bug_id": 41205, "attachment_id": null, "id": 97104, "time": "2006-12-19T16:41:58Z", "creator": "herve.girod@club-internet.fr", "creation_time": "2006-12-19T16:41:58Z", "is_private": false, "text": "(In reply to comment #0)\n> A WMF image which we found in a PowerPoint document had an APM header with\n> height 0.  Windows is able to display the image correctly, however Batik's\n> WMFPainter doesn't paint anything.\n\nThis is corrected in my local copy. I will propose a patch soon. It is not\nsufficient to inverse width and height in APM header. It should also be done\nwhen encountering VIEWPORT in the WMF operands, and the signs of width and\nheight must be stored to be used for each next width / height / x / y\ncoordinates encountered.  "}, {"count": 4, "tags": [], "bug_id": 41205, "attachment_id": null, "id": 97106, "time": "2006-12-20T00:31:05Z", "creator": "trejkaz@trypticon.org", "creation_time": "2006-12-20T00:31:05Z", "is_private": false, "text": "While this is fresh in my mind, what about WMF files which lack the APM \nheader?  I've noticed that in all the test cases I have available, the \nviewport size is usable as the canvas size (so I'm able to work around the \nlack of support for non-APM files by pulling out the viewport size and \nprepending a false APM header.)"}, {"count": 5, "tags": [], "creator": "herve.girod@club-internet.fr", "attachment_id": 19300, "text": "Created attachment 19300\nPatch correcting the bug", "id": 97176, "time": "2006-12-21T16:06:22Z", "bug_id": 41205, "creation_time": "2006-12-21T16:06:22Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 41205, "attachment_id": null, "id": 97177, "time": "2006-12-21T16:07:51Z", "creator": "herve.girod@club-internet.fr", "creation_time": "2006-12-21T16:07:51Z", "is_private": false, "text": "(In reply to comment #4)\n> While this is fresh in my mind, what about WMF files which lack the APM \n> header?  I've noticed that in all the test cases I have available, the \n> viewport size is usable as the canvas size (so I'm able to work around the \n> lack of support for non-APM files by pulling out the viewport size and \n> prepending a false APM header.)\n\nThe attached patch fix this problem. As it is a bit more difficult to transcode\nwithout the APM header, I suggest you to file another bug. But I would need to\nhave a file without APM..."}, {"count": 7, "tags": [], "creator": "deweese@apache.org", "attachment_id": 19476, "text": "Created attachment 19476\nResultant SVG after applying patch\n\nWhen I run the Test WMF's after applying this patch I don't\nget the same thing I get when I view the WMF file. In particular\nthe Clipping seems to be off.\n\nIs this expected?", "id": 98678, "time": "2007-01-29T06:06:29Z", "bug_id": 41205, "creation_time": "2007-01-29T06:06:29Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 41205, "text": "Created attachment 19481\nsecond version of the patch\n\nfixed processing of text clippings (bug was before the previous patch)", "id": 98721, "time": "2007-01-29T16:27:35Z", "creator": "herve.girod@club-internet.fr", "creation_time": "2007-01-29T16:27:35Z", "is_private": false, "attachment_id": 19481}, {"count": 9, "tags": [], "creator": "herve.girod@club-internet.fr", "attachment_id": null, "id": 98722, "creation_time": "2007-01-29T16:29:10Z", "time": "2007-01-29T16:29:10Z", "bug_id": 41205, "text": "(In reply to comment #8)\n> Created an attachment (id=19481) [edit]\n> second version of the patch\n> \n> fixed processing of text clippings (bug was before the previous patch)\n\nStatus of texts was incorrect before this patch, I don't know were it was\nintroduced at first (surely it was me...). It was a typo in retrieving the\nclipping coordinates in WMFPainter... ", "is_private": false}, {"count": 10, "tags": [], "creator": "cam@apache.org", "attachment_id": null, "text": "This patch was applied in January (r501290).", "id": 108554, "time": "2007-09-24T19:39:58Z", "bug_id": 41205, "creation_time": "2007-09-24T19:39:58Z", "is_private": false}]