[{"count": 0, "attachment_id": null, "bug_id": 47437, "text": "There are many Tomcat users that disable the shutdown port by setting it to '-1'. \nWhen I do so, I am not allowed to run shutdown.bat|sh anymore because there is no port anymore for shutodown.\nIn that case, I've got an exception message which is difficult to understand. It would be nice to provide a message such as \"you might have disabled the shutdown port. In that case you should kill the tomcat process or close the Tomcat shell/dos window.\"\n\nHere is the exception I had:\n\nE:\\tomcat\\bin>if not \"\" == \"\" goto doSecurity\n\nE:\\tomcat\\bin>\"D:\\Java\\JDK1.6\\bin\\java\" -server -Xmx2\n56m -Xms128m -Xss128k   -Djava.endorsed.dirs=\"E:\\tomcat\\ho\nme\\endorsed\" -classpath \"D:\\Java\\JDK1.6\\lib\\tools.jar;E:\\tomcat\\home\\bin\\bootstrap.jar\" -Dcatalina.base=\"E:\\tomcat\\b\nase1\" -Dcatalina.home=\"E:\\tomcat\" -Djava.io.tmpdir=\"E\n:\\tomcat\\base1\\temp\" org.apache.catalina.startup.Bootstrap\n  stop\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:337)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:415)\nCaused by: java.lang.IllegalArgumentException: port out of range:-1\n        at java.net.InetSocketAddress.<init>(InetSocketAddress.java:118)\n        at java.net.Socket.<init>(Socket.java:180)\n        at org.apache.catalina.startup.Catalina.stopServer(Catalina.java:421)\n        ... 6 more\n\nE:\\tomcat\\bin>goto end", "id": 128333, "time": "2009-06-27T01:19:45Z", "creator": "michael.isvy@gmail.com", "creation_time": "2009-06-27T01:19:45Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 47437, "text": "I don't know what you were testing with but it wasn't Tomcat 6.0.20 as that already provides a user friendly error message rather than the exception:\n\nD:\\apache-tomcat-6.0.20\\bin>catalina.bat stop\nUsing CATALINA_BASE:   D:\\apache-tomcat-6.0.20\nUsing CATALINA_HOME:   D:\\apache-tomcat-6.0.20\nUsing CATALINA_TMPDIR: D:\\apache-tomcat-6.0.20\\temp\nUsing JRE_HOME:        C:\\java\\jdk1.6.0_14_x64\n30-Jun-2009 13:26:59 org.apache.catalina.startup.Catalina stopServer\nSEVERE: No shutdown port configured in server.xml. Please shut down server through OS signal. Server not shut down by external JVM.", "id": 128436, "time": "2009-06-30T05:28:26Z", "creator": "markt@apache.org", "creation_time": "2009-06-30T05:28:26Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 47437, "text": "Sorry, I used the wrong tomcat instance when doing my testing. This indeed was a 6.0.17.\nI have just tried on 6.0.20 and it works like a charm as you said.", "id": 128441, "time": "2009-06-30T07:56:22Z", "creator": "michael.isvy@gmail.com", "creation_time": "2009-06-30T07:56:22Z", "tags": [], "is_private": false}]