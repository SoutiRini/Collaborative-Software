[{"count": 0, "tags": [], "bug_id": 823, "attachment_id": null, "id": 946, "time": "2001-03-02T14:26:46Z", "creator": "matt@avolent.com", "creation_time": "2001-03-02T14:26:46Z", "is_private": false, "text": "It seems that default namespace declarations are not inherited by child \nelements.\n\n-----------------------------------------------------------------\nMessage.xml:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Message \n    xmlns=\"depo://MetaInfo/Components/Transport/Message\"\n    xmlns:xsi=\"http://www.w3.org/2000/10/XMLSchema-instance\" \n    xsi:schemaLocation=\"depo://MetaInfo/Components/Transport/Message \n                        Message.xsd\n                        depo://MetaInfo/Components/PaymentMessageBody \n                        PaymentMessageBody.xsd\">\n    <Header>\n        <Version>1</Version>\n        <UniqueId>123123</UniqueId>\n        <MessageContext>fooContext</MessageContext>\n        <MessageId>4534634</MessageId>\n        <AddressStack>xxx</AddressStack>\n        <ReplyTo>yyy</ReplyTo>\n        <Throwable>zzz</Throwable>\n        <Timestamp>aTimestamp</Timestamp>\n    </Header>\n    <Body xmlns=\"depo://MetaInfo/Components/PaymentMessageBody\">\n        <PaymentID>234234</PaymentID>\n        <ConsumerID>345345</ConsumerID>\n        <PaymentInfo>\n            <PaymentDate>345</PaymentDate>\n            <PaymentAmount>345345</PaymentAmount>\n            <FundingAccountID>345</FundingAccountID>\n        </PaymentInfo>\n    </Body>\n</Message>\n\n-----------------------------------------------------------------\nMessage.xsd:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsd:schema\n    targetNamespace=\"depo://MetaInfo/Components/Transport/Message\"\n    xmlns=\"depo://MetaInfo/Components/Transport/Message\"\n    xmlns:xsd=\"http://www.w3.org/2000/10/XMLSchema\"\n    elementFormDefault=\"unqualified\"\n    attributeFormDefault=\"unqualified\">\n    <xsd:complexType name=\"MessageBodyType\">\n        <xsd:sequence minOccurs=\"0\">\n            <xsd:any processContents=\"strict\" \n                     minOccurs=\"0\" maxOccurs=\"unbounded\"/>\n        </xsd:sequence>\n    </xsd:complexType>\n    <xsd:complexType name=\"MessageHeaderType\">\n        <xsd:sequence>\n            <xsd:element name=\"Version\" type=\"xsd:string\"/>\n            <xsd:element name=\"UniqueId\" type=\"xsd:string\"/>\n            <xsd:element name=\"MessageContext\" type=\"xsd:string\"/>\n            <xsd:element name=\"MessageId\" type=\"xsd:string\"/>\n            <xsd:element name=\"AddressStack\" type=\"xsd:string\"/>\n            <xsd:element name=\"ReplyTo\" type=\"xsd:string\"/>\n            <xsd:element name=\"Throwable\" type=\"xsd:string\"/>\n            <xsd:element name=\"Timestamp\" type=\"xsd:string\"/>\n        </xsd:sequence>\n    </xsd:complexType>\n    <xsd:complexType name=\"MessageType\">\n        <xsd:sequence>\n            <xsd:element name=\"Header\" type=\"MessageHeaderType\"/>\n            <xsd:element name=\"Body\" type=\"MessageBodyType\"/>\n        </xsd:sequence>\n    </xsd:complexType>\n    <xsd:element name=\"Message\" type=\"MessageType\"/>\n</xsd:schema>\n\n-----------------------------------------------------------------\nPaymentMessageBody.xsd:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsd:schema\n    xmlns:xsd=\"http://www.w3.org/2000/10/XMLSchema\"\n    xmlns=\"depo://MetaInfo/Components/PaymentMessageBody\"\n    targetNamespace=\"depo://MetaInfo/Components/PaymentMessageBody\"\n    elementFormDefault=\"unqualified\"\n    attributeFormDefault=\"unqualified\">\n    <xsd:element name=\"PaymentID\" type=\"xsd:string\"/>\n    <xsd:element name=\"ConsumerID\" type=\"xsd:string\"/>\n    <xsd:element name=\"PaymentInfo\">\n        <xsd:complexType>\n            <xsd:sequence>\n                <xsd:element name=\"PaymentDate\" type=\"xsd:string\"/>\n                <xsd:element name=\"PaymentAmount\" type=\"xsd:string\"/>\n                <xsd:element name=\"FundingAccountID\" type=\"xsd:string\"/>\n            </xsd:sequence>\n        </xsd:complexType>\n    </xsd:element>\n</xsd:schema>\n-----------------------------------------------------------------\n\nI use this java to parse the Message.xml:\n\n-----------------------------------------------------------------\nDocumentBuilderFactory factory = DocumentBuilderFactoryImpl.newInstance();\nfactory.setValidating( true );\nfactory.setNamespaceAware( true );\nDocumentBuilder builder = factory.newDocumentBuilder();\nbuilder.parse( new InputSource( aReader ) );\n-----------------------------------------------------------------\n\nXerces reports these errors:\n\n-----------------------------------------------------------------\nElement type \"Header\" must be declared.\nElement type \"Version\" must be declared.\nElement type \"UniqueId\" must be declared.\nElement type \"MessageContext\" must be declared.\nElement type \"MessageId\" must be declared.\nElement type \"AddressStack\" must be declared.\nElement type \"ReplyTo\" must be declared.\nElement type \"Throwable\" must be declared.\nElement type \"Timestamp\" must be declared.\nElement type \"Body\" must be declared.\nElement type \"PaymentDate\" must be declared.\nElement type \"PaymentAmount\" must be declared.\nElement type \"FundingAccountID\" must be declared.\nThe content of element type \"PaymentInfo\" must match \n    \"(PaymentDate,PaymentAmount,FundingAccountID)\".\nThe content of element type \"Message\" must match \"(Header,Body)\".\n-----------------------------------------------------------------\n\nAs I understand namespaces, the namespace of all child elements should \nbe inherited from the xmlns attribute in the parent element.\n\nIt does not appear to work in Xerces 1.3.0.\n\nThanks,\nmatt"}, {"count": 1, "tags": [], "bug_id": 823, "attachment_id": null, "is_private": false, "id": 1047, "time": "2001-03-07T14:59:31Z", "creator": "neilg@ca.ibm.com", "creation_time": "2001-03-07T14:59:31Z", "text": "There is a bug in Xerces here, but the XML is buggy too.  Because you've set \nelementFormDefault to \"unqualified\", <Header> is in the null namespace.  Yet \nyou've bound the default namespace in the instance doc to \"depot://...\", which \ndoes not contain <Header>.  You need to use elementFormDefault=\"qualified\" to \nachieve this effect.  But even then it probably won't work because Xerces \ndoesn't support more than one pair of schemaLocation values in the instance \ndoc; as a workaround, perhaps you could <include> or <import> one schema into \nthe other."}]