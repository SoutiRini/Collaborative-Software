[{"count": 0, "tags": [], "bug_id": 48575, "attachment_id": null, "text": "org.apache.fop.render.ps.EPSTranscoder produces EPS file from SVG DOM, and image content doesn't fit image borders (so that picture is croped), though viewBox parameter in svg file covers all content.\n\nIf specify area of interest (by EPSTranscoder.KEY_AOI hint) aproximately 1.38 times larger then actual viewBox then content fit borders well.\n\nVersions 0.93 and 0.94 generate EPS file well, image content fits borders as it should.\n\nBatik 1.7 was used to create SVG DOM.\n\nCode being used for conversion:\n\npublic static byte[] serialize2EPS(Document document){\n     ByteArrayOutputStream baos = new ByteArrayOutputStream();\n     EPSTranscoder tr = new EPSTranscoder();\n        \n     try {\n         tr.transcode(new TranscoderInput(document),new TranscoderOutput(baos));\n     } catch (TranscoderException e) {        \n         e.printStackTrace();\n     }       \n     return baos.toByteArray();\n}\n\nSVG file being processed:\n\n<?xml version=\"1.0\"?>\n<svg transform=\"scale(1.0)\" \nwidth=\"100.0mm\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"100.0mm\" viewBox=\"0.0 0.0 100.0 100.0\" xmlns=\"http://www.w3.org/2000/svg\">\n<rect fill=\"#ffffff\" x=\"0\" width=\"100.0\" height=\"100.0\" y=\"0\" style=\"stroke:#ffffff\"/>\n<path stroke-linecap=\"square\" fill-opacity=\"1.0\" fill=\"none\" fill-rule=\"nonzero\" stroke-linejoin=\"miter\" style=\"stroke:#000\" \nd=\"M48.913043478260875,13.539282990083906 C64.97395582555245,13.539282990083906 77.99389778794813,20.881676490189015 77.99389778794813,29.938977879481314 C77.99389778794813,38.99627926877361 64.97395582555245,46.33867276887872 48.913043478260875,46.33867276887872 C32.852131130969305,46.33867276887872 19.83218916857361,38.99627926877361 19.83218916857361,29.938977879481314 C19.83218916857361,20.881676490189015 32.852131130969305,13.539282990083906 48.913043478260875,13.539282990083906Z\"\n stroke-width=\"0.1\" stroke-opacity=\"1.0\" stroke-miterlimit=\"1.0\"/>\n<path stroke-linecap=\"square\" fill-opacity=\"1.0\" fill=\"none\" fill-rule=\"nonzero\" stroke-linejoin=\"miter\" style=\"stroke:#000\" \nd=\"M1.0526315789473684,1.4736842105263157 C1.0526315789473684,1.4736842105263157 98.73684210526316,1.4736842105263157 98.73684210526316,1.4736842105263157 C98.73684210526316,1.4736842105263157 98.73684210526316,98.52631578947368 98.73684210526316,98.52631578947368 C98.73684210526316,98.52631578947368 1.0526315789473684,98.52631578947368 1.0526315789473684,98.52631578947368 C1.0526315789473684,98.52631578947368 1.0526315789473684,1.4736842105263157 1.0526315789473684,1.4736842105263157Z\"\nstroke-width=\"0.1\" stroke-opacity=\"1.0\" stroke-miterlimit=\"1.0\"/><path stroke-linecap=\"square\" fill-opacity=\"1.0\" fill=\"none\" fill-rule=\"nonzero\" stroke-linejoin=\"miter\" style=\"stroke:#000\" \nd=\"M5.684210526315789,5.473684210526316 C5.684210526315789,5.473684210526316 86.52631578947368,90.52631578947368 86.52631578947368,90.52631578947368\" \nstroke-width=\"0.1\" stroke-opacity=\"1.0\" stroke-miterlimit=\"1.0\"/><path stroke-linecap=\"square\" fill-opacity=\"1.0\" fill=\"none\" fill-rule=\"nonzero\" stroke-linejoin=\"miter\" style=\"stroke:#000\" \nd=\"M6.105263157894737,89.6842105263158 C6.105263157894737,89.6842105263158 93.89473684210526,6.736842105263165 93.89473684210526,6.736842105263165\" \nstroke-width=\"0.1\" stroke-opacity=\"1.0\" stroke-miterlimit=\"1.0\"/></svg>", "id": 133706, "time": "2010-01-19T12:39:40Z", "creator": "paul.lysak@gmail.com", "creation_time": "2010-01-19T12:39:40Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 48575, "attachment_id": 24863, "id": 133718, "time": "2010-01-20T03:23:07Z", "creator": "peter.hancock@gmail.com", "creation_time": "2010-01-20T03:23:07Z", "is_private": false, "text": "Created attachment 24863\nrenedered eps"}, {"count": 2, "tags": [], "bug_id": 48575, "attachment_id": 24864, "text": "Created attachment 24864\nRendered pdf", "id": 133719, "time": "2010-01-20T03:23:32Z", "creator": "peter.hancock@gmail.com", "creation_time": "2010-01-20T03:23:32Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "peter.hancock@gmail.com", "text": "Hi Paul,\n\nI am a little unclear what the problem is here.  I rendered your svg and produced the attached eps an pdf to compare.  They both look the same to me.  Can you elaborate on the problem with reference to my attached images, please?\n\nPeter", "count": 3, "id": 133720, "time": "2010-01-20T03:23:50Z", "bug_id": 48575, "creation_time": "2010-01-20T03:23:50Z", "is_private": false}, {"count": 4, "tags": [], "text": "Hi Peter\n\nAfter some more investigation I've been able to render correct picture and it looks like the problem was not in FOP itself. I've been using Maven to add FOP to my project. With this configuration code the picture was wrong:\n\n<dependency>\n    <groupId>org.apache.xmlgraphics</groupId>\n    <artifactId>fop</artifactId>\n    <version>0.95</version>\n</dependency>\n\nAfter your comment I tried to use this configuration code and \n\n<dependency>\n    <groupId>org.apache.xmlgraphics</groupId>\n    <artifactId>fop</artifactId>\n    <version>0.95-1</version>\n</dependency>\n\nStrangle, but they both use the same jar file with FOP. Only difference is that 0.95-1 version (and, by the way, 0.93 and 0.94 versions too) in Maven repository declares dependencies on both avalon api and avalon impl:\n<dependency>\n  <groupId>org.apache.avalon.framework</groupId>\n  <artifactId>avalon-framework-api</artifactId>\n  <version>4.3.1</version>\n</dependency>\n<dependency>\n  <groupId>org.apache.avalon.framework</groupId>\n  <artifactId>avalon-framework-impl</artifactId>\n  <version>4.3.1</version>\n</dependency>\n\nand version 0.95 only declares dependency on avalon api (no dependency on avalon impl).\nBut when i've been using version 0.95 there were no complains about missing classes - picture has rendered, but not correctly. So I wonder: can the problems with 0.95 be caused by incorrect packaging of some parts of xmlgraphics - something like old versions of classes which get overriden by including avalon impl jar? This question is the only remaining issue.\n\nRegards,\nPaul.", "attachment_id": null, "id": 133800, "creator": "paul.lysak@gmail.com", "time": "2010-01-21T14:31:21Z", "bug_id": 48575, "creation_time": "2010-01-21T14:31:21Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 48575, "attachment_id": null, "text": "resetting P2 open bugs to P3 pending further review", "id": 157560, "time": "2012-04-07T01:44:39Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:44:39Z", "is_private": false}]