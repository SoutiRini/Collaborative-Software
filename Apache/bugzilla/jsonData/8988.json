[{"count": 0, "text": "I'd like to have a target define a global property.  Right now if I'm running my\nbuild script and perform an antcall I can't get the variables defined in the\nsubtask back to the main project.  Is this possible?\nThanks,\nJason", "bug_id": 8988, "attachment_id": null, "id": 15915, "time": "2002-05-10T20:06:12Z", "creator": "jcorley@togethersoft.com", "creation_time": "2002-05-10T20:06:12Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "nicolaken@apache.org", "text": "or even better make a special non-reentrant antcall or ant, maybe?", "id": 15918, "time": "2002-05-10T21:10:15Z", "bug_id": 8988, "creation_time": "2002-05-10T21:10:15Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 8988, "attachment_id": null, "text": "You can do it indirectly, by writing the property(s) set by the subproject out \nto a properties file, then reading that file in (<property file=.../>) in the \nmain project. (I'm tempted to close this ER, since it wasn't so much a request \nas a question. Jason, do you want to close it?)", "id": 15920, "time": "2002-05-10T21:23:37Z", "creator": "holtdl@yahoo.com", "creation_time": "2002-05-10T21:23:37Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 8988, "attachment_id": null, "text": "Right, I'd thought about the indirect method you describe, but it seemed sort of\nkludgey (no offense! :-).  Basically I just wanted to file an RFE letting you\nall know that at least one person would like this feature without having to deal\nwith the overhead -- and all associated possible problems -- of writing to a\nfile and then reading from it.  I'd sort of envisioned an additional parameter\nto the property task (global=\"true\" or something).  I wouldn't mind the bug\nbeing closed if there was a better mechanism in the planning, but if the only\nway to solve this dillemma is with writing to a file and then reading from it\nI'd prefer to leave this RFE open.\nThanks,\nJason", "id": 15921, "time": "2002-05-10T21:41:19Z", "creator": "jcorley@togethersoft.com", "creation_time": "2002-05-10T21:41:19Z", "is_private": false}, {"count": 4, "tags": [], "text": "kludgey? Maybe, but with <tempfile> you can even dynamically create the name \nof the file to use so do >1 build in parallel and not have race conditions", "attachment_id": null, "bug_id": 8988, "id": 15922, "time": "2002-05-10T21:51:30Z", "creator": "steve_l@iseran.com", "creation_time": "2002-05-10T21:51:30Z", "is_private": false}, {"count": 5, "tags": [], "text": "I just checked, and it's in the \"Rejected\" block of the \"Workspace/sub-build \nissues\" section of:\n  http://jakarta.apache.org/ant/ant2/requested-features.html\n\nSo I'm gonna guess that it'd be equally rejected for Ant1. Of course, you're \nstill welcome to campaign for it and see if you can change people's minds.", "attachment_id": null, "bug_id": 8988, "id": 15924, "time": "2002-05-10T22:10:29Z", "creator": "holtdl@yahoo.com", "creation_time": "2002-05-10T22:10:29Z", "is_private": false}, {"count": 6, "tags": [], "text": "I think the functionality would be nice (ie, being able to pass values back) \nbut I hate the proposed means. I would suggest a different way of specifying it.\n\n<ant ......>\n  <returns property='subProjectProperty'/>\n  <returns prefix='propSet.'/>\n</ant>\n\nSame for <antcall>. Here the caller expresses which properties from\nthe subproject it wants to be passed back into its own properties. \nThe prefix attribute allows returning all properties with a particular pattern.\n\nMaybe we should allow an optional \"as\" attribute:\n\n  <returns property='subProjectProperty' as='mypropname'/>\n\nwhich would allow you to rename the property on the way back (in case\nyou use the same <ant(call)> several times. \n\nImplementation wise these would only affect <ant>/<antcall> no need\nto touch anything else. I could prototype the change and submit it\nfor consideration if there is a glimer of hope on being accepted :-)\n", "attachment_id": null, "id": 15942, "creator": "j_a_fernandez@yahoo.com", "time": "2002-05-11T14:16:11Z", "bug_id": 8988, "creation_time": "2002-05-11T14:16:11Z", "is_private": false}, {"count": 7, "tags": [], "creator": "jcorley@togethersoft.com", "attachment_id": null, "id": 16019, "time": "2002-05-13T17:00:29Z", "bug_id": 8988, "creation_time": "2002-05-13T17:00:29Z", "is_private": false, "text": "I think the proposed return would solve my particular problem (assuming that the\nreturn could be used elsewhere, i.e. for other targets).  I'm interested if\nnoone else is, Jose. :-)\nJason"}, {"count": 8, "tags": [], "creator": "j_a_fernandez@yahoo.com", "text": "Ok, attached is a patch for <ant> and <antcall> that implement\nthe <returns> functionality. If anyone wants to use it there it is.\n\nIf committers in all their wisdom accept this submission for core ANT (which I \nthink they should :-) ) then I will made the documentation changes and test \ncases necessary. Hope it is useful to anyone.\n", "id": 16379, "time": "2002-05-19T12:00:13Z", "bug_id": 8988, "creation_time": "2002-05-19T12:00:13Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 8988, "attachment_id": 1891, "text": "Created attachment 1891\nImplementation of <returns> element for <ant> and <antcall>", "id": 16380, "time": "2002-05-19T12:02:37Z", "creator": "j_a_fernandez@yahoo.com", "creation_time": "2002-05-19T12:02:37Z", "is_private": false}, {"count": 10, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "id": 66634, "time": "2004-11-09T18:50:52Z", "bug_id": 8988, "creation_time": "2004-11-09T18:50:52Z", "is_private": false, "text": "ping.\nShould this be implemented (or has it been rejected on ant-dev?)\n"}, {"count": 11, "tags": [], "bug_id": 8988, "text": "Doesn't ant-contrib provide tasks that provide this?", "id": 66637, "time": "2004-11-09T19:11:41Z", "creator": "mbenson@apache.org", "creation_time": "2004-11-09T19:11:41Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "creator": "ddevienne@lgc.com", "attachment_id": null, "id": 66638, "time": "2004-11-09T19:13:33Z", "bug_id": 8988, "creation_time": "2004-11-09T19:13:33Z", "is_private": false, "text": "I'd say we close this bug, pointing to Ant-Contrib. Global variables could be \nachieved by setting JVM's system properties, so what we may need is simply a \n<sysproperty> task that sets a Java System Property (and doesn't care of \nimmutability). --DD"}, {"count": 13, "tags": [], "creator": "mbenson@apache.org", "text": "I concur.  Closing, use ant-contrib for return values.", "id": 67244, "time": "2004-11-19T18:35:58Z", "bug_id": 8988, "creation_time": "2004-11-19T18:35:58Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "id": 67247, "time": "2004-11-19T18:39:23Z", "bug_id": 8988, "creation_time": "2004-11-19T18:39:23Z", "is_private": false, "text": "*** Bug 19847 has been marked as a duplicate of this bug. ***"}, {"count": 15, "tags": [], "bug_id": 8988, "attachment_id": null, "text": "Actually, I've been thinking of something global, but not some hack to current\nproperties. \n\nImagine a 'store' which is a read/write hashmap; you can put/get strings.\n\n<store-put name=\"storename\" key=\"user\" value=\"${myprop}\" />\n<store-get name=\"storename\" key=\"user\" property=\"mynewprop\" />\n\nClearly it wouldnt be cross process, but it would persist, and it wouldnt need\nchanges to ant. Just a large static repository. I worry about IDE hosting and\nleakage though. At the end of a build (but not an ant call), we'd need to\ndestroy everything. ", "id": 67248, "time": "2004-11-19T18:48:38Z", "creator": "stevel@apache.org", "creation_time": "2004-11-19T18:48:38Z", "is_private": false}]