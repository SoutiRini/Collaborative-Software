[{"count": 0, "tags": [], "bug_id": 38433, "attachment_id": null, "is_private": false, "id": 85176, "time": "2006-01-29T18:51:30Z", "creator": "vblecic@hotmail.com", "creation_time": "2006-01-29T18:51:30Z", "text": "Direct transformation (xml -> xsl -> fo -> pdf) produce different result than\nindirect (xml -> xsl -> fo) + (fo -> pdf)\n\nExample:\nxml:\n<labels>\n <empty no=\"2\"/>\n <label3>\n\t <line>text</line>\n\t <line>2text</line>\n\t <line>3text</line>\n</label3>\n <label4>\n\t <line>4text</line>\n\t <line>42text</line>\n\t <line>43text</line>\n\t <line>44text</line>\n </label4>\n<label3>\n\t <line>text</line>\n\t <line>2text</line>\n\t <line>3text</line>\n</label3>\n <label4>\n\t <line>4text</line>\n\t <line>42text</line>\n\t <line>43text</line>\n\t <line>44text</line>\n </label4>\n<label3>\n\t <line>text</line>\n\t <line>2text</line>\n\t <line>3text</line>\n</label3>\n <label4>\n\t <line>4text</line>\n\t <line>42text</line>\n\t <line>43text</line>\n\t <line>44text</line>\n </label4>\n <empty no=\"2\"/>\n<label3>\n\t <line>text</line>\n\t <line>2text</line>\n\t <line>3text</line>\n</label3>\n <label4>\n\t <line>4text</line>\n\t <line>42text</line>\n\t <line>43text</line>\n\t <line>44text</line>\n </label4>\n<label3>\n\t <line>text</line>\n\t <line>2text</line>\n\t <line>3text</line>\n</label3>\n <label4>\n\t <line>4text</line>\n\t <line>42text</line>\n\t <line>43text</line>\n\t <line>44text</line>\n </label4>\n</labels>\n\nxslt:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsl:stylesheet version=\"1.1\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\nxmlns:fo=\"http://www.w3.org/1999/XSL/Format\" exclude-result-prefixes=\"fo\">\n  <xsl:output method=\"xml\" version=\"1.0\" omit-xml-declaration=\"no\" indent=\"yes\"/>\n  <xsl:template match=\"labels\">\n<fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\">\n  <fo:layout-master-set>\n    <fo:simple-page-master \n\tmargin-right=\"1in div 4\"\n\tmargin-left=\"1in div 4\"\n\tmargin-bottom=\"1in div 4\"\n\tmargin-top=\"1in div 4\"\n\tmaster-name=\"first\">\n    <fo:region-body column-count=\"3\" column-gap=\"1in div 16\"/>\n      <fo:region-after extent=\"1.5cm\"/>\n    </fo:simple-page-master>\n  </fo:layout-master-set>\n  \n  <fo:page-sequence master-reference=\"first\"> \n    <fo:flow flow-name=\"xsl-region-body\" column-count=\"3\">\n        <xsl:apply-templates/>\n    </fo:flow>\n  </fo:page-sequence>\n</fo:root>\n  </xsl:template>\n  <xsl:template match=\"empty\">\n  \t<xsl:call-template name=\"empty-one\">\n  \t\t<xsl:with-param name=\"to\" select=\"@no\"/>\n  \t</xsl:call-template>\n  </xsl:template>\n  \n  <xsl:template match=\"label4\">\n      <fo:block>\n\t<fo:table border-collapse=\"separate\" table-layout=\"fixed\" border-top-width=\"1in\ndiv 8\" height=\"21in div 20\" width=\"2.4in\" >\n\t<fo:table-column column-width=\"2.4in\"/>\n\t<fo:table-body font-size=\"14pt\">\n\t  <xsl:apply-templates />\n\t</fo:table-body>\n        </fo:table>\t \t\n      </fo:block>\n  </xsl:template>\n\n  <xsl:template match=\"label3\">\n      <fo:block>\n      <fo:table border-collapse=\"separate\" table-layout=\"fixed\"\nborder-top-width=\"1in div 8\" height=\"21in div 20\" >\n\t<fo:table-column column-width=\"2.4in\"/>\n        <fo:table-body  font-size=\"16pt\">\n\t  <xsl:apply-templates select=\"line\" />\n\t</fo:table-body>\n      </fo:table>        \n      </fo:block>\n  </xsl:template>\n\n  <xsl:template match=\"label3/line\">\n  \t  <fo:table-row height=\"21in div 60\" >\n  \t  <xsl:choose>\n\t  \t  <xsl:when test=\"position() = 1\">\n\t    <fo:table-cell     border-top-width=\"3pt\"    border-top-style=\"solid\"\nborder-top-color=\"white\">\n\t    <fo:block-container height=\"1in div 3\" width=\"2.37in\" overflow=\"hidden\">\n\t      <fo:block>\n\t\t<xsl:value-of select=\"text()\" />\n\t      </fo:block>\n            </fo:block-container>\t    \n\t    </fo:table-cell>\n\t  \t  </xsl:when>\n\t  \t  <xsl:otherwise>\n\t    <fo:table-cell>\n\t    <fo:block-container height=\"1in div 3\" width=\"2.37in\" overflow=\"hidden\">\n\t      <fo:block>\n\t\t<xsl:value-of select=\"text()\" />\n\t      </fo:block>\n            </fo:block-container>\t    \n\t    </fo:table-cell>\n\t  \t  </xsl:otherwise>\n  \t  </xsl:choose>\n\t  </fo:table-row>\n  </xsl:template>\n    \n  <xsl:template match=\"label4/line\">\n \t  <fo:table-row height=\"21in div 80\" >\n   \t  <xsl:choose>\n\t  \t  <xsl:when test=\"position() = 1\">\n\t\t    <fo:table-cell     border-top-width=\"3pt\"    border-top-style=\"solid\"\nborder-top-color=\"white\">\n\t\t\t<fo:block-container height=\"1in div 4\" width=\"2.37in\" overflow=\"hidden\">\n\t\t\t      <fo:block>\n\t\t\t      <xsl:value-of select=\"text()\"/>\n\t\t\t      </fo:block>\n\t\t\t</fo:block-container>\t    \n\t    \t    </fo:table-cell>\n\t  \t  </xsl:when>\n\t  \t<xsl:otherwise>\n\t         <fo:table-cell>\n\t\t   <fo:block-container height=\"1in div 4\" width=\"2.37in\" overflow=\"hidden\">\n\t\t      <fo:block>\n\t\t\t      <xsl:value-of select=\"text()\"/>\n\t\t      </fo:block>\n\t           </fo:block-container>\t    \n\t\t </fo:table-cell>\n\t \t</xsl:otherwise>\n  \t  </xsl:choose>\n\t  </fo:table-row>\n </xsl:template>\n \n <xsl:template name=\"empty-one\">\n  <xsl:param name=\"to\"/>\n\t  <xsl:if test=\"$to &gt; 1\">\n\t\t  <xsl:call-template name=\"empty-one\">\n\t\t  \t<xsl:with-param name=\"to\" select=\"$to - 1\"/>\n\t\t  </xsl:call-template>\n\t  </xsl:if>\n\t      <fo:block>\n\t        <fo:table border-collapse=\"separate\" table-layout=\"fixed\"\nborder-top-width=\"1in div 8\" height=\"21in div 20\" width=\"2.4in\"/>\n\t      </fo:block>\t  \n </xsl:template>\n</xsl:stylesheet>"}, {"count": 1, "tags": [], "bug_id": 38433, "attachment_id": null, "is_private": false, "id": 85350, "time": "2006-02-02T16:09:44Z", "creator": "jeremias@apache.org", "creation_time": "2006-02-02T16:09:44Z", "text": "I remember effects like this from my time when I worked with FOP 0.20.5,\nalthough I didn't experience such drastic differences. In my example that was\nalmost always due to some whitespace. Without wasting a lot of time debugging in\na branch that is not maintained anymore I can't tell you what's wrong. One part\ncould be the XSL-FO that you generate. In the \"empty-one\" template you create\nempty fo:table elements which is illegal. Maybe FOP 0.20.5 doesn't like that.\n\nI'd recommend you upgrade to the latest release (0.91beta). You will have to\nclean up your stylesheet to make it work with that version (especially that\nempty fo:table, use a block-container instead, place an empty fo:block in the\nblock-container). With FOP 0.91beta, I don't see any visual differences between\nthe direct approach and the way over a temporary FO file.\n\nGood luck and sorry for the delay."}, {"text": "Dear Jeremias,\nThank you for all afford that you have done.\nMy problem resolution was not to use direct transformation.\nIt is little annoying but simplest.\n\nTemplate \"empty-one\" is not a problem because when I change the source XML in a\nway that I have avoid \"empty\" nodes problem persist.\n\nNext things that I have tried is to delete all unnecessary white spaces, and\nwhen nothing has been changed, I was every open and close node convert to open\nnode and close node (<node/> -> <node></node>). After that I give up, so it is\nsomething serious and I have conclude that problem does not depend on format of\ninput xml or xslt.\n\nAs I understand 0.20.5 is stable production version, and I need fop for\nproduction version of software, so my question is: \"Is it risky to put 0.91 in\nproduction\", and when can we expected that 0.91 will start to be stable\n(production) version of FOP (april, may, jun)?\n\nIt's look like that delay is unavoidable. Thanks again.\n\n\n", "tags": [], "creator": "vblecic@hotmail.com", "is_private": false, "count": 2, "id": 85622, "time": "2006-02-09T05:54:17Z", "bug_id": 38433, "creation_time": "2006-02-09T05:54:17Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 38433, "attachment_id": null, "is_private": false, "id": 85623, "time": "2006-02-09T08:24:30Z", "creator": "jeremias@apache.org", "creation_time": "2006-02-09T08:24:30Z", "text": "(In reply to comment #2)\n> As I understand 0.20.5 is stable production version, and I need fop for\n> production version of software, so my question is: \"Is it risky to put 0.91 in\n> production\", and when can we expected that 0.91 will start to be stable\n> (production) version of FOP (april, may, jun)?\n\nFrom my point of view, it's ok to use FOP 0.91beta in production if everything\nis very carefully tested. It's still a beta because this release may not yet\nwork for every kind of document. \n\nSee also:\nhttp://xmlgraphics.apache.org/fop/relnotes.html#FOP+0.91+beta\n\nIt's expected that the next release will still be a beta-level release as there\nare important areas that are currently worked on. It's difficult to predict a\nrelease date for a full release. It depends a lot on the amount of time the core\ndevelopers can allocate, what they allocate their time on and how much help we\nget from the community. But it's probably reasonable to expect a production\ngrade pre-1.0 release around May/June. No guarantees though. An open source\nproject lives on the attention it gets by its community."}, {"count": 4, "tags": [], "creator": "gadams@apache.org", "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "id": 156974, "attachment_id": null, "bug_id": 38433, "creation_time": "2012-04-01T13:55:44Z", "time": "2012-04-01T13:55:44Z", "is_private": false}]