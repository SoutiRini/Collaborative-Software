[{"count": 0, "tags": [], "bug_id": 60696, "text": "At:\n\nhttps://github.com/apache/jmeter/blob/c616f4f84d11812febbf442806b90b02c306fe0c/src/protocol/http/org/apache/jmeter/protocol/http/control/AuthManager.java#L474\n\nSPNegoSchemeFactory is created like:\n\nnew SPNegoSchemeFactory(isStripPort(url)));\n\nthe scheme factory has an alternate constructor (https://github.com/apache/httpclient/blob/4.5.x/httpclient/src/main/java/org/apache/http/impl/auth/SPNegoSchemeFactory.java#L53) that allows to pick canonicalization behavior for the host name:\n\n   /**\n     * @since 4.4\n     */\n    public SPNegoSchemeFactory(final boolean stripPort, final boolean useCanonicalHostname) {\n\nUnfortunately for certain use cases where we have a load balancer serving multiple names mapped to the same IP address the canonicalization breaks authentication for us by generating a incorrect SPN.\n\nIt would be helpful to be able to control this behavior in JMeter either via UI or config.", "id": 196787, "time": "2017-02-06T20:55:38Z", "creator": "zolyfarkas@yahoo.com", "creation_time": "2017-02-06T20:55:38Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "For what it is worth, see my tickets for HttpClient in JIRA. This code is severely broken.", "attachment_id": null, "id": 196805, "creator": "1983-01-06@gmx.net", "time": "2017-02-07T10:42:50Z", "bug_id": 60696, "creation_time": "2017-02-07T10:42:50Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 60696, "text": "Maybe apache HTTP client instead of defaulting to useCanonicalHostname = true should default to whatever is configured in krb5.conf [libdefaults] canonicalize = ?\n\nhttp://web.mit.edu/kerberos/krb5-devel/doc/admin/conf_files/krb5_conf.html", "id": 196823, "time": "2017-02-07T18:18:23Z", "creator": "zolyfarkas@yahoo.com", "creation_time": "2017-02-07T18:18:23Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 60696, "text": "(In reply to Michael Osipov from comment #1)\n> For what it is worth, see my tickets for HttpClient in JIRA. This code is\n> severely broken.\n\nHi,\nWhich one ?\nThanks", "id": 196828, "time": "2017-02-07T21:54:55Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-07T21:54:55Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 60696, "text": "(In reply to Philippe Mouawad from comment #3)\n> (In reply to Michael Osipov from comment #1)\n> > For what it is worth, see my tickets for HttpClient in JIRA. This code is\n> > severely broken.\n> \n> Hi,\n> Which one ?\n> Thanks\n\nI suppose those are the tickets:\nhttps://issues.apache.org/jira/browse/HTTPCLIENT-1625\nhttps://issues.apache.org/jira/browse/HTTPCLIENT-1570", "id": 201908, "time": "2017-11-04T16:58:33Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-11-04T16:58:33Z", "is_private": false, "attachment_id": null}]