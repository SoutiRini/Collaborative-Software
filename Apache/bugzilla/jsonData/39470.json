[{"count": 0, "tags": [], "text": "Our application has a session timeout of one hour. When this is reached and a \nlink is hit an http 500 error is reported with a NullPointerException root \ncause. However the root cause is not showing an associated stack trace with \nthe component throwing the NPE. I therefore cannot troubleshoot whether this \nis a development related problem or a tomcat internal session issue. The \napplication in question is supplied by a 3rd party and they currently only \nsupport up to Tomcat 4.0.30 (an upgrade to the latest version is therefore not \npossible). The browser and logs show the same stack trace which I have added \nbelow:-\n\ntype Exception report\n\nmessage\n\ndescription The server encountered an internal error () that prevented it from \nfulfilling this request.\n\nexception\n\norg.apache.jasper.JasperException\n        at org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:254)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2422)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:163)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n        at org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:577)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n        at org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:199)\n        at org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:828)\n        at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:700)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:584)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:683)\n        at java.lang.Thread.run(Thread.java:534)\n\n\nroot cause\n\njava.lang.NullPointerException\n\nWhy is there no further detail with the page that threw the NPE? Are there any \nsession related issues in 4.0.30 that could cause this. I cannot really find \nanything in the current bug list (open or closed) that helps me. Any help \nwould me much appreciated. This is occuring in a major, live application and \nmany users are complaining. Unfortunatly this issue seems to be intermitent \nand cannot be consistently reproduced.\n\nRegards,\nPaul", "is_private": false, "bug_id": 39470, "id": 88742, "time": "2006-05-03T09:51:10Z", "creator": "paul.webster@gmx.net", "creation_time": "2006-05-03T09:51:10Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Many apols. All refs to 4.0.30 are meant to be 4.1.30.", "is_private": false, "bug_id": 39470, "id": 88750, "time": "2006-05-03T12:25:59Z", "creator": "paul.webster@gmx.net", "creation_time": "2006-05-03T12:25:59Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 39470, "attachment_id": null, "id": 88751, "time": "2006-05-03T12:54:35Z", "creator": "paul.webster@gmx.net", "creation_time": "2006-05-03T12:54:35Z", "is_private": false, "text": "updated version in drop down."}, {"count": 3, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Bug 19238 is likely masking the problem.\n\nGiven you are having problems it might be worth updating to 4.1.31 even if it\nisn't officially supported to see if any more information is reported when the\nerror occurs.\n\nBased on the limited information, this looks like an application problem to me.\nWithout the root cause info, there is very little that can be done. I'll leave\nthis open for now but without additional root cause information or a way to\nreproduce this will eventually get closed as invalid. ", "id": 88793, "time": "2006-05-04T00:38:45Z", "bug_id": 39470, "creation_time": "2006-05-04T00:38:45Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "Mark,\n\nThanks for your response. I will try this out but apparently there are issues \nwith the app (OOTB documentum webapp only supported to .30) on .31. I will at \nleast see if i can reproduce and get a better root cause. Incidently with bug \n19238 at least there was a root cause stack trace (even though it's wrapped) - \nthis is what's really hindering me - hopefully .31 will reveal all but any \nideas why he got one and i didn't? it certainly wouldn't suprise me if this is \napp related.", "attachment_id": null, "bug_id": 39470, "id": 88799, "time": "2006-05-04T07:43:26Z", "creator": "paul.webster@gmx.net", "creation_time": "2006-05-04T07:43:26Z", "is_private": false}, {"count": 5, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 89061, "attachment_id": null, "bug_id": 39470, "creation_time": "2006-05-12T01:22:07Z", "time": "2006-05-12T01:22:07Z", "text": "A google search for \"npe no stack trace\" suggests that there is a JVM bug that\nmight be the root cause of this.\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5098422\n\nWhat version of the JVM are you using?"}, {"count": 6, "tags": [], "creator": "paul.webster@gmx.net", "attachment_id": null, "text": "we're using 1.4.2_05 (latest version supported by documentum with this version \nof the product)\n\nthis bug implies we have a flag set that isn't portable from tiger or 1.3.1. \nas far as i am aware we do not use these flags. do u know the 'default' \nbehaviour? (i would expect full stack traces to be reported). it looks like \nthis flag 'HAD' to be set prior to 1.4.2_05 to STOP full stack traces. i will \nverify we DO NOT have the -XX:+FullSpeedJVMDI flag set.\n\nMany thanks for ur help,\nPaul", "id": 89196, "time": "2006-05-17T10:52:52Z", "bug_id": 39470, "creation_time": "2006-05-17T10:52:52Z", "is_private": false}, {"count": 7, "tags": [], "text": "The related issues (eg\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4292742) are worth a look\ntoo. It appears there are a number of bugs most with workarounds of one form or\nanother.\n\nAs far as I can tell this is a JVM issue (which one it is is a different\nquestion and one I don't have a definitive answer for) so I am going to resolve\nthis as invalid.\n\nIn the unlikely event that this does turn out to be a Tomcat issue, please feel\nfree to re-open the bug (ideally with a test case) and I'll take a look.", "attachment_id": null, "bug_id": 39470, "id": 89370, "time": "2006-05-23T00:05:22Z", "creator": "markt@apache.org", "creation_time": "2006-05-23T00:05:22Z", "is_private": false}]