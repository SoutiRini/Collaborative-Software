[{"count": 0, "attachment_id": null, "creator": "Dick.Snippe@tech.omroep.nl", "text": "We run apache-2.2.0 as a reverse, caching proxy.\n(mod_proxy, mod_proxy_http, mod_cache, mod_disk_cache, prefork mpm)\nNow and then (once every million uncached hits or so) we see origin servers\nreceive proxied requests meant for other origin servers.\n\nThis only happens in setups where earlier proxypass rules shadow latter rules, as in\nProxyPass /foo http://fooserver/foo\nProxyPass / http://defaultserver/\n\nNow and the accesslogs for defaultserver show requests for /foo/...\nThis should not be possible, and is somewhat annoying because these incorrect\nanswers from defaultserver might be cached and so be served to many people\ninstead of just one.", "id": 88528, "time": "2006-04-26T22:00:29Z", "bug_id": 39419, "creation_time": "2006-04-26T22:00:29Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 39419, "attachment_id": null, "id": 88549, "time": "2006-04-27T09:55:41Z", "creator": "rpluem@apache.org", "creation_time": "2006-04-27T09:55:41Z", "is_private": false, "text": "As stated in the documentation\n(http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass) order of\nProxyPass directives is important. From what I can see now in the documentation\nthe wrong order is described. You need to put the most specific pathes last. So\nthis is a documentation bug."}, {"count": 2, "tags": [], "creator": "Dick.Snippe@tech.omroep.nl", "text": "(In reply to comment #1)\n> You need to put the most specific pathes last. So this is a documentation bug.\n\nI tried reversing the order, but that did not work (all requests go to the least\nspecific path i.e. the first entry \"wins\".)\n\nMind you: the strange behaviour I reported only happens once in a million hits.", "id": 88556, "time": "2006-04-27T13:04:57Z", "bug_id": 39419, "creation_time": "2006-04-27T13:04:57Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "Ahh, sorry. I now had a look in the apr sources and found out that I\nmissunderstood the apr documentation. The httpd documentation is correct.\nAlso your order of ProxyPass directives is correct.\nFurthermore I missed the point that your configuration works in general, but\nonly has problems in some rare cases.\nThe upcoming release 2.2.2 has many fixes to mod_proxy. Some are somewhat\nsimilar to your problem. So I would suggest the following:\n\n1. Wait until 2.2.2 is released and test again.\n2. For the impatient: You can already download the 2.2.2 tar ball that is\ncurrently in discussion for being released on the dev list. Its here:\n\nhttp://httpd.apache.org/dev/dist/httpd-2.2.2.tar.gz\n\n   Please give it a try and let me know if the problem is still there.", "attachment_id": null, "id": 88567, "creator": "rpluem@apache.org", "time": "2006-04-27T15:53:46Z", "bug_id": 39419, "creation_time": "2006-04-27T15:53:46Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 39419, "attachment_id": null, "text": "No reply to Ruediger - assuming fixed.", "id": 107588, "time": "2007-09-01T10:10:15Z", "creator": "nick@webthing.com", "creation_time": "2007-09-01T10:10:15Z", "is_private": false}]