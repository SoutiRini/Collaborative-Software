[{"count": 0, "text": "This configuration worked fine with 1.3.24 \nbut upgrading to 1.3.27 broke it.\n\nThe $1 in the proxying rewrite rule is not added for some reason\n\n    RewriteCond %{REQUEST_FILENAME} -d\n    RewriteCond %{REQUEST_FILENAME}/index.html !-f\n    RewriteRule ^(.*/)?$ http://myhost.com:1005/$1 [P]\n\nThe relevant rewrite.log bits:\n\n$ diff rewrite.1*\n12,14c12,14\n<  rewrite admin/ -> http://learn.icoachacademy.com:1005/admin/\n<  forcing proxy-throughput with http://learn.icoachacademy.com:1005/admin/\n<  go-ahead with proxy request proxy:http://learn.icoachacademy.com:1005/admin/ [OK]\n---\n>  rewrite admin/ -> http://learn.icoachacademy.com:1005/\n>  forcing proxy-throughput with http://learn.icoachacademy.com:1005/\n>  go-ahead with proxy request proxy:http://learn.icoachacademy.com:1005/ [OK]\n26,28c26,28\n<  rewrite admin/ -> http://learn.icoachacademy.com:1005/admin/\n<  forcing proxy-throughput with http://learn.icoachacademy.com:1005/admin/\n<  go-ahead with proxy request proxy:http://learn.icoachacademy.com:1005/admin/ [OK]\n---\n>  rewrite admin/ -> http://learn.icoachacademy.com:1005/\n>  forcing proxy-throughput with http://learn.icoachacademy.com:1005/\n>  go-ahead with proxy request proxy:http://learn.icoachacademy.com:1005/ [OK]", "creator": "apache-bug@bowman.bs", "is_private": false, "id": 34218, "time": "2003-04-01T04:33:47Z", "bug_id": 18546, "creation_time": "2003-04-01T04:33:47Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "text": "I don't really know what I'm doing here, be warned.\n\nIt seems like the ap_regexec for the RewriteRule is\nreturning different regmatch structure causing the\nproblem.  The debug code follows.  I can't see why this\nwould be though.\n\n1.3.24\n (2) bsb n1 $1(0-6) $2(0-6) $3(135281828-135281828) uri(admin/)\n1.3.27\n (2) bsb n1 $1(0-0) $2(6-0) $3(0-0) uri(admin/)\n\n    rc = (ap_regexec(regexp, uri, regexp->re_nsub+1, regmatch, 0) == 0);\n    if (! (( rc && !(p->flags & RULEFLAG_NOTMATCH)) ||\n           (!rc &&  (p->flags & RULEFLAG_NOTMATCH))   ) ) {\n        return 0;\n    }\n\n/* BSB */\nif(regexp->re_nsub > 0 ) {\n    rewritelog(r, 2, \"bsb n%d $1(%d-%d) $2(%d-%d) $3(%d-%d) uri(%s)\",\n        regexp->re_nsub,\n        regmatch[0].rm_so,\n        regmatch[0].rm_eo,\n        regmatch[1].rm_so,\n        regmatch[1].rm_eo,\n        regmatch[2].rm_so,\n        regmatch[2].rm_eo,\n        uri);\n} else {\n    rewritelog(r, 2, \"bsb rexep empty\");\n}   \n", "is_private": false, "id": 34296, "creator": "apache-bug@bowman.bs", "time": "2003-04-02T06:43:03Z", "bug_id": 18546, "creation_time": "2003-04-02T06:43:03Z", "attachment_id": null}]