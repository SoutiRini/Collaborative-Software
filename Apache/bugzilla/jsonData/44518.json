[{"count": 0, "tags": [], "creator": "real.human@mrmachine.net", "attachment_id": null, "id": 114177, "creation_time": "2008-03-02T14:52:48Z", "time": "2008-03-02T14:52:48Z", "bug_id": 44518, "text": "I have one Apache2 server setup at the front on port 80 serving static content with ExpiresDefault \"access plus 1 week\". This server is configured to proxy any requests that don't map to files in the document root to a second Apache2 server, for dynamic content (Django).\n\nThis works fine except for when my dynamic application generates a HTTP redirect. On redirect to dynamic content, the first Apache2 server adds an expires header which causes all the major browsers to pull the dynamic page from their cache.\n\n09:34:33 tailee@tetsuo ~$ curl -I http://nicabate.yebisu.3030.com.au/accounts/myaccount\nHTTP/1.1 302 Found\nDate: Sun, 02 Mar 2008 22:34:54 GMT\nServer: Apache/2.2.4 (Ubuntu) mod_python/3.3.1 Python/2.5.1\nVary: Cookie,Accept-Encoding\nETag: d41d8cd98f00b204e9800998ecf8427e\nLocation: http://nicabate.yebisu.3030.com.au/accounts/login?next=/accounts/myaccount\nContent-Type: text/html; charset=utf-8\nCache-Control: max-age=604800\nExpires: Sun, 09 Mar 2008 22:34:54 GMT\n\nIf I change my httpd.conf to ExpiresDefault \"modification plus 1 week\" the expires header is NOT set, but this doesn't allow me to always keep static content cached for 1 week from access.\n\nIdeally, Apache2 should not set an expires header on redirects, or at least there should be an option for httpd.conf to disable this behaviour.", "is_private": false}, {"count": 1, "tags": [], "bug_id": 44518, "text": "Marking as an enhancement request.  An application such as yours that may return different HTTP statuses should traditionally be taking care of its own Expires headers.  But you have a point: this could work as a configuration option.", "id": 114179, "time": "2008-03-02T16:06:10Z", "creator": "nick@webthing.com", "creation_time": "2008-03-02T16:06:10Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "jerome.renard@gmail.com", "attachment_id": 24271, "text": "Created attachment 24271\npatch attempt for issue 4451\n\nGood evening.\n\nPlease find attached a patch which implement this enhancement request.\n\nA new configuration directive has been added : ExpiresIgnoreRedirect\n\nI tested with the following configuration : \n\n<Directory /Users/jerome/work/www/perso/apache/issues/44518/>\n    <IfModule mod_expires.c>\n        ExpiresActive On\n        # When set to Yes an Expires header will be sent\n        # even if a Location header is present\n        # Posible values : 'Yes' or 'No'\n        # Default value : No\n        ExpiresIgnoreRedirect Yes\n        ExpiresDefault \"access plus 1 year\"\n        # ExpiresByType text/html M604800\n    </IfModule>\n</Directory>\n\nTested with ExpiresDefault and ExpiresByType and it seems to work fine.\n\nThe patch has been generated against SVN trunk.\n\nAny comment/feedback welcome.\n\nBest Regards.", "id": 130428, "time": "2009-09-15T14:16:50Z", "bug_id": 44518, "creation_time": "2009-09-15T14:16:50Z", "is_private": false}, {"count": 3, "tags": [], "text": "*** Bug 52523 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 184180, "creator": "christophe.jaillet@wanadoo.fr", "time": "2015-07-27T05:57:08Z", "bug_id": 44518, "creation_time": "2015-07-27T05:57:08Z", "attachment_id": null}]