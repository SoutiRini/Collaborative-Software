[{"count": 0, "text": "According to RFC6455 Section 4.3. the handling of subprotocol requests is not correct.\nIt must be checked for \"Sec-WebSocket-Protocol\" instead of \"Sec-WebSocket-Protocol-Client\" in WebSocketServlet class.", "bug_id": 53641, "is_private": false, "id": 161059, "time": "2012-08-02T12:52:08Z", "creator": "wolfst@in.tum.de", "creation_time": "2012-08-02T12:52:08Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 53641, "attachment_id": null, "id": 161163, "time": "2012-08-07T21:54:56Z", "creator": "markt@apache.org", "creation_time": "2012-08-07T21:54:56Z", "is_private": false, "text": "Fixed in trunk and 7.0.x and will be included in 7.0.30 onwards.\n\nThanks for the report."}, {"count": 2, "tags": [], "bug_id": 53641, "text": "Thanks a lot!\n\nBy the way, here is workaround for those who can't wait:\nJust add the following code into your WebsocketServlet:\n\n@Override\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp)\nthrows ServletException, IOException {\n  HttpServletRequestWrapper wrapper = new HttpServletRequestWrapper(req){\n    @Override\n    public Enumeration<String>  getHeaders(String name) {\n      if(name.equals(\"Sec-WebSocket-Protocol-Client\")){\n       return super.getHeaders(\"Sec-Websocket-Protocol\");\n      }\n      return super.getHeaders(name);\n    }\n  };\n  super.doGet(wrapper, resp);\n}", "id": 161360, "time": "2012-08-14T10:30:45Z", "creator": "wolfst@in.tum.de", "creation_time": "2012-08-14T10:30:45Z", "is_private": false, "attachment_id": null}]