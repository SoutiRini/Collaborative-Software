[{"count": 0, "tags": [], "creator": "rui.damas@gmail.com", "text": "I have a local server that i use for testing named like \"yaw\".\nRequests under a url that starts with \"http://yaw/yaw/\" will return a 404 error, without ever invoking the servlet.\nI tried with diferent server/folder names, and believe that the cause is that the server name equals the first folder in path, since other paths work fine...\n\nAt first i thought it also had to do with the undotted name,\nsince this one works: http://alphabit.org/alphabit.org/ddd.css\nor this one: http://www.alphabit.org/www.alphabit.org/dss.css\n\nBut then i found that this one does not:\nhttp://under-construction.homeunix.net/under-construction.homeunix.net/ddd\nshould return something like this: http://under-construction.homeunix.net/under-\nconstruction.unix.net/ddd\nor this one: http://thai.homeunix.net/thai.homeunix.net/sdsd.css\nshould return something like this: http://thai.homeunix.net/thai.home.net/sdsd.css\n\n@ server.xml ...\n<Host name=\"nameWithNoDot\" unpackWARs=\"false\" appBase=\"/http/webapp\">\n  <Context allowLinking=\"true\" path=\"\" docBase=\"\"/>\n</Host>\n\n@ web.xml\n<servlet-mapping>\n  <servlet-name>KISSLet</servlet-name>\n  <url-pattern>/*</url-pattern>\n</servlet-mapping>\n\nat least since version 7.0.8\n\n[]r.", "id": 148405, "time": "2011-08-05T13:29:24Z", "bug_id": 51624, "creation_time": "2011-08-05T13:29:24Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 51624, "attachment_id": null, "text": "Bugzilla is not a support forum; post your queries on the Tomcat user's list.\n\nBTW, your configuration is invalid.", "id": 148406, "time": "2011-08-05T13:39:34Z", "creator": "chuck.caldarale@unisys.com", "creation_time": "2011-08-05T13:39:34Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 51624, "attachment_id": null, "text": "(In reply to comment #1)\n> Bugzilla is not a support forum; post your queries on the Tomcat user's list.\nty, i know :)\n\n> BTW, your configuration is invalid.\nmy configuration has been working fine for years without ever complaining.\nso, btw, should't tomcat complain about such an invalid configuration?\n\nanyway... thanks and sorry.\n\ni'll reread the configuration docs then.", "id": 148407, "time": "2011-08-05T14:04:02Z", "creator": "rui.damas@gmail.com", "creation_time": "2011-08-05T14:04:02Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 51624, "attachment_id": null, "id": 148411, "time": "2011-08-05T14:47:30Z", "creator": "rui.damas@gmail.com", "creation_time": "2011-08-05T14:47:30Z", "is_private": false, "text": "(In reply to comment #2)\n> (In reply to comment #1)\n> > Bugzilla is not a support forum; post your queries on the Tomcat user's list.\n> ty, i know :)\n> \n> > BTW, your configuration is invalid.\n> my configuration has been working fine for years without ever complaining.\n> so, btw, should't tomcat complain about such an invalid configuration?\n> \n> anyway... thanks and sorry.\n> \n> i'll reread the configuration docs then.\n\ni read the docs...\n\n@ server.xml ... replaced:\n<Host name=\"nameWithNoDot\" unpackWARs=\"false\" appBase=\"/http/webapp\">\n  <Context allowLinking=\"true\" path=\"\" docBase=\"\"/>\n</Host>\n\nby:\n<Host name=\"nameWithNoDot\" unpackWARs=\"false\" appBase=\"/http\">\n  <Context allowLinking=\"true\" path=\"\" docBase=\"webapp\"/>\n</Host>\n\nand it worked :)\n\n... the one bellow did not:\n<Host name=\"nameWithNoDot\" unpackWARs=\"false\" appBase=\"/http/webapp\">\n  <Context allowLinking=\"true\" path=\"\" docBase=\".\"/>\n</Host>\n\nthe documentation says for docBase: \"or a pathname that is relative to the appBase directory of the owning Host.\", which is the case of \"\" and \".\", both valid paths denoting the \"current\" directory.\n\nty... and btw, makes sense that my config should be valid (and it actually has been working fine, apart of this bug), otherwise an error would be nice ;P\n\n... and btw, change the docs to: 'or a pathname that is relative to the appBase directory of the owning Host (except for \"\" and \".\").'\n\nit is a bug, like it or not."}, {"count": 4, "tags": [], "bug_id": 51624, "attachment_id": null, "id": 148414, "time": "2011-08-05T15:23:58Z", "creator": "bugzilla@pidster.com", "creation_time": "2011-08-05T15:23:58Z", "is_private": false, "text": "Setting docBase == appBase is not valid.\nJoin the Tomcat Users mailing list, if you wish to discuss it further."}, {"count": 5, "tags": [], "bug_id": 51624, "attachment_id": null, "text": "\"docBase == appBase\"!?\n\nwhere did i do that!?...\nsure you read what i write?\n\ni don't discuss bugs with users...\ni don't necessarily wish further discussion, gee, my \"problem\" i solved... in a way that it seams that i could not make the root of a file system the root of the context and access a directory with server name... where you would have to appBase=\"/\" and docBase=\"\", since there are no parent directories... your bug prevents that, for example.\n\ni just think, considering your \"docBase == appBase\" comment, that you are missing the point and ignoring a real bug or having a weak documentation.\n\nmy \"problem\" should not even exist, my original config complies with the documentation (just read it) since \"\" and \".\" are valid relative paths... and, it actually works fine except if the first directory in path equal the name of the server... odd enough to be a bug... no?\n\ni'm sorry if it seams to you that i'm bothering you...\nbut your comment... \"docBase == appBase\", what are you talking about? lol", "id": 148418, "time": "2011-08-05T16:44:07Z", "creator": "rui.damas@gmail.com", "creation_time": "2011-08-05T16:44:07Z", "is_private": false}, {"count": 6, "tags": [], "creator": "chuck.caldarale@unisys.com", "attachment_id": null, "id": 148420, "time": "2011-08-05T16:53:33Z", "bug_id": 51624, "creation_time": "2011-08-05T16:53:33Z", "is_private": false, "text": "Once more: bugzilla is not a support forum.  Bring your questions to the Tomcat users' list.  (Or better yet, search the users' list archives to find the answers.)"}, {"attachment_id": null, "tags": [], "bug_id": 51624, "text": "or just wait 1 year, and if the bug still exists, report it again in the hope of someone that actually talks sense, answers something rather than a senseless: \"Setting docBase == appBase is not valid.\"\n\n... or if ever get the time and patience... fix the bug my self and slap it @ u like a big large trout :D\n\nonce more: this is not a support question, my problem i already solved without support at all other than intuition and guessing since not even the documentation mentions any problem with my original config... actually supports it.\n\nthis is bug report, and it's fine with me that you don't want to solve or consider it... the solution i found is working and i don't actually publish roots of file systems (but someone might, if using windows... that has several roots).\n\ni don't see the point in talking in a users forum about something that should be changed at the source or brought to attention in the documentation of these issues.\n\nbb, sad talking to u... get replaced, plz", "count": 7, "id": 148425, "time": "2011-08-05T17:15:43Z", "creator": "rui.damas@gmail.com", "creation_time": "2011-08-05T17:15:43Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 51624, "text": "(In reply to comment #5)\n> \"docBase == appBase\"!?\n> \n> where did i do that!?...\n\nRight here:\n\n<Host name=\"nameWithNoDot\" unpackWARs=\"false\" appBase=\"/http/webapp\">\n  <Context allowLinking=\"true\" path=\"\" docBase=\".\"/>\n</Host>\n\ndocBase is relative to appBase. Setting docBase = \".\" means that appBase = docBase.\n\n> i just think, considering your \"docBase == appBase\" comment, that you are\n> missing the point and ignoring a real bug or having a weak documentation.\n\nDocs look fine to me: http://tomcat.apache.org/tomcat-7.0-doc/config/context.html\n\nDoesn't say anything about using \"\" or \".\" for appBase. Happy to fix any documentation bugs... if you find one.", "id": 148488, "time": "2011-08-08T16:42:42Z", "creator": "chris@christopherschultz.net", "creation_time": "2011-08-08T16:42:42Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "creator": "rui.damas@gmail.com", "attachment_id": null, "id": 148489, "time": "2011-08-08T17:43:20Z", "bug_id": 51624, "creation_time": "2011-08-08T17:43:20Z", "is_private": false, "text": "> docBase is relative to appBase. Setting docBase = \".\" means that appBase =\n> docBase.\nno, it means that they denote the same file path. :P \nok... that's an \"internal\" implication...\ni did not write that... i don't know about that.\nand i don't see whats the problem... it has been working fine for ages now (until this odd bug).\n\n> Doesn't say anything about using \"\" or \".\" for appBase. Happy to fix any\n> documentation bugs... if you find one.\n... i'll just repeat my self...\n\nthe documentation says for docBase: \"or a pathname that is relative to the\nappBase directory of the owning Host.\"\n\n...as i see it, a relative path is one that is resolvable generally against an URI or File, which is the case of \"\" and \".\", both valid paths denoting the \"current\" directory."}, {"count": 10, "tags": [], "creator": "bugzilla@pidster.com", "text": "> ...as i see it, a relative path is one that is resolvable generally against an\n> URI or File, which is the case of \"\" and \".\", both valid paths denoting the\n> \"current\" directory.\n\nIf \".\" is valid, Tomcat would deploy \".\" and it will also detect every directory in \".\" (because it's the same as appBase) and separately, deploy them as applications - each of those dirs is presumably missing a WEB-INF/web.xml, which means that no security constraints are applied. The extra applications take priority over the ROOT application (as they have a longer context path), so any requests to resources in them would be unprotected.\n\nNow please, join to the Tomcat Users list (not because I'm user, but because *you* are) and we'll explain all of this to you, if you still don't understand why you are wrong.", "id": 148500, "time": "2011-08-09T08:10:54Z", "bug_id": 51624, "creation_time": "2011-08-09T08:10:54Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 51624, "text": "> If \".\" is valid, Tomcat would deploy \".\" and it will also detect every\n> directory in \".\" (because it's the same as appBase) and separately, deploy them\n> as applications -\nwell in practice, i don't know if \".\" is valid, cause i never tried.\ni do know that \"\" works nice.\nunderstand that i'm not saying that what i have been doing is good practice...\nbut has never given any problems either (until the odd bug).\n\n> each of those dirs is presumably missing a WEB-INF/web.xml,\nsorry, got lost here... my web.xml works fine.\n\n> which means that no security constraints are applied.\nmaybe... so how come no warning or error is reported.\ni only use one.\n\n> The extra applications\n> take priority over the ROOT application (as they have a longer context path),\n> so any requests to resources in them would be unprotected.\n... i've only been using my single app, maybe that's why i got away with my old config ;) \n\n> Now please, join to the Tomcat Users list (not because I'm user, but because\n> *you* are) and we'll explain all of this to you, if you still don't understand\n> why you are wrong.\ni will not do that, because i don't like having lots of accounts, so i will refuse your suggestion (like most others in the past month only, or the 100's in the past years).\ni was just trying to help you, tomcat developers, since i use tomcat since version 3 or less, and think is nice that we have open source available to use... and the bug, still quite real to me... not that tomcat should accept my \"\" or \".\", but that, if is not supposed to accept than it is to deny or complain about miss configurations... either way you have a bug and you documentation should have one line more... come on... is less harder to write (or just copy the one bellow) than writing all these emails or making user accounts.\n\ni did solve my problem (mails ago), and not because you told me what it was (initially you only said it was wrong) neither because the documentation explains it... i just kind of guessed.\n\ni still say that tomcat should report an error or warning, and the documentation should explain this further, or at least say:\n\n   you should not use \"\" or \".\", but rather a path to a subdirectory, even if deploying a single application, which may lead to broken security constraints or the odd bug :P\n\n... and thank you for this last much better reply.\n\n[] r.", "count": 11, "id": 148519, "time": "2011-08-10T08:57:18Z", "creator": "rui.damas@gmail.com", "creation_time": "2011-08-10T08:57:18Z", "is_private": false}]