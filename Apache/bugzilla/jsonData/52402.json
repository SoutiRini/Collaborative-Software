[{"count": 0, "tags": [], "bug_id": 52402, "attachment_id": null, "id": 152479, "time": "2011-12-30T20:16:47Z", "creator": "JBlond@gmail.com", "creation_time": "2011-12-30T20:16:47Z", "is_private": false, "text": "Apache crashes during startup. httpd -S fails /shows nothing, also httpd -M fails shows nothing. apache installed as service. version 2.3.16 beta (VC9 x64)\nOS: win7 ultimate x64\n\nerror log:\nStarting the Apache2.4 service\nThe Apache2.4 service is running.\n[proxy:debug] [pid 3632:tid 428] mod_proxy.c(1932): AH01147: Defining worker 'http://servera:80' for balancer 'balancer://mycluster'\n[Fri Dec 30 20:55:42.972797 2011] [proxy:debug] [pid 3632:tid 428] mod_proxy.c(1937): AH01148: Defined worker 'http://servera' for balancer 'balancer://mycluster'\n[Fri Dec 30 20:55:42.972797 2011] [proxy:debug] [pid 3632:tid 428] mod_proxy.c(1932): AH01147: Defining worker 'http://serverb:80' for balancer 'balancer://mycluster'\n[Fri Dec 30 20:55:42.972797 2011] [proxy:debug] [pid 3632:tid 428] mod_proxy.c(1937): AH01148: Defined worker 'http://serverb' for balancer 'balancer://mycluster'\n[Fri Dec 30 20:55:42.972797 2011] [proxy:debug] [pid 3632:tid 428] mod_proxy.c(1932): AH01147: Defining worker 'http://serverc:80' for balancer 'balancer://mycluster'\n[Fri Dec 30 20:55:42.972797 2011] [proxy:debug] [pid 3632:tid 428] mod_proxy.c(1937): AH01148: Defined worker 'http://serverc' for balancer 'balancer://mycluster'\n[Fri Dec 30 20:55:42.972797 2011] [proxy:debug] [pid 3632:tid 428] mod_proxy.c(1932): AH01147: Defining worker 'http://serverd:80' for balancer 'balancer://mycluster'\n[Fri Dec 30 20:55:42.972797 2011] [proxy:debug] [pid 3632:tid 428] mod_proxy.c(1937): AH01148: Defined worker 'http://serverd' for balancer 'balancer://mycluster'\n[Fri Dec 30 20:55:42.987797 2011] [proxy_balancer:debug] [pid 3632:tid 428] mod_proxy_balancer.c(742): AH01178: Doing balancers create: 544, 1 (6)\n[Fri Dec 30 20:55:42.988797 2011] [proxy_balancer:debug] [pid 3632:tid 428] mod_proxy_balancer.c(796): AH01184: Doing workers create: balancer://mycluster (s96f9938e_mycluster), 512, 4\n[Fri Dec 30 20:55:43.003798 2011] [proxy_balancer:debug] [pid 3632:tid 428] mod_proxy_balancer.c(742): AH01178: Doing balancers create: 544, 1 (6)\n[Fri Dec 30 20:55:43.003798 2011] [proxy_balancer:debug] [pid 3632:tid 428] mod_proxy_balancer.c(796): AH01184: Doing workers create: balancer://mycluster (s96f9938e_mycluster), 512, 4\n[Fri Dec 30 20:55:43.004798 2011] [proxy_balancer:emerg] [pid 3632:tid 428] (22)Invalid argument: AH01186: worker slotmem_grab failed\nAH00020: Configuration Failed\n\n\nloaded modules:\nmod_alias\nmod_auth_basic\nmod_authn_core\nmod_authn_file\nmod_authz_core\nmod_authz_groupfile\nmod_authz_host\nmod_authz_user\nmod_autoindex\nmod_cgi\nmod_deflate\nmod_dir\nmod_env\nmod_filter\nmod_headers\nmod_include\nmod_lbmethod_bybusyness\nmod_lbmethod_byrequests\nmod_lbmethod_bytraffic\nmod_log_config\nmod_mime\nmod_negotiation\nmod_proxy\nmod_proxy_balancer\nmod_proxy_express\nmod_proxy_http\nmod_setenvif\nmod_slotmem_plain\nmod_slotmem_shm\nmod_socache_memcache\nmod_socache_shmcb\nmod_vhost_alias\n\ntest setup\n\n<VirtualHost *:80>\n    ServerAdmin info@localhost\n    ServerName localhost\n    ServerAlias servera serverb serverc serverd\n    DocumentRoot \"/Apache23/htdocs\"\n</VirtualHost>\n\n\n\n<Proxy balancer://mycluster>\n\tBalancerMember http://servera:80\n\tBalancerMember http://serverb:80\n\tBalancerMember http://serverc:80\n\tBalancerMember http://serverd:80\n</Proxy>\n\tProxyPass / balancer://mycluster\n\tProxyPassReverse / balancer://mycluster \n\n<Location /balancer-manager>\n\tSetHandler balancer-manager\n</Location> \n\n\nsee also http://old.nabble.com/Notice%3A-Intent-to-T-R-httpd-2.3.15-this-week.-td32590965.html"}, {"count": 1, "tags": [], "bug_id": 52402, "attachment_id": null, "id": 152509, "time": "2012-01-01T18:00:30Z", "creator": "JBlond@gmail.com", "creation_time": "2012-01-01T18:00:30Z", "is_private": false, "text": "Commenting out all BalancerMember http://... let apache run again, and I can see than the Load Balancer Manager page. Clicking on the balancer://mycluster link (http://localhost/balancer-manager?b=mycluster) crashes the connection, but apache keeps running.\n\nin the windows event log\nProtokollname: Application\nQuelle:        Application Error\nDatum:         01.01.2012 18:58:15\nEreignis-ID:   1000\nAufgabenkategorie:(100)\nEbene:         Fehler\nSchl\u00fcsselw\u00f6rter:Klassisch\nBenutzer:      Nicht zutreffend\nComputer:      zengarden\nBeschreibung:\nName der fehlerhaften Anwendung: httpd.exe, Version: 2.3.16.0, Zeitstempel: 0x4eebe6cb\nName des fehlerhaften Moduls: mod_proxy_balancer.so, Version: 2.3.16.0, Zeitstempel: 0x4eebe6a6\nAusnahmecode: 0xc0000005\nFehleroffset: 0x0000000000002db0\nID des fehlerhaften Prozesses: 0x86c\nStartzeit der fehlerhaften Anwendung: 0x01ccc8aee7051bb9\nPfad der fehlerhaften Anwendung: C:\\Apache23\\bin\\httpd.exe\nPfad des fehlerhaften Moduls: C:\\Apache23\\modules\\mod_proxy_balancer.so\nBerichtskennung: 2d7508eb-34a2-11e1-90ed-f0def11c30f7\nEreignis-XML:\n<Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\">\n  <System>\n    <Provider Name=\"Application Error\" />\n    <EventID Qualifiers=\"0\">1000</EventID>\n    <Level>2</Level>\n    <Task>100</Task>\n    <Keywords>0x80000000000000</Keywords>\n    <TimeCreated SystemTime=\"2012-01-01T17:58:15.000000000Z\" />\n    <EventRecordID>1259</EventRecordID>\n    <Channel>Application</Channel>\n    <Computer>zengarden</Computer>\n    <Security />\n  </System>\n  <EventData>\n    <Data>httpd.exe</Data>\n    <Data>2.3.16.0</Data>\n    <Data>4eebe6cb</Data>\n    <Data>mod_proxy_balancer.so</Data>\n    <Data>2.3.16.0</Data>\n    <Data>4eebe6a6</Data>\n    <Data>c0000005</Data>\n    <Data>0000000000002db0</Data>\n    <Data>86c</Data>\n    <Data>01ccc8aee7051bb9</Data>\n    <Data>C:\\Apache23\\bin\\httpd.exe</Data>\n    <Data>C:\\Apache23\\modules\\mod_proxy_balancer.so</Data>\n    <Data>2d7508eb-34a2-11e1-90ed-f0def11c30f7</Data>\n  </EventData>\n</Event>"}, {"count": 2, "tags": [], "creator": "minfrin@sharp.fm", "is_private": false, "text": "This isn't a crash, but rather a configuration error:\n\n[Fri Dec 30 20:55:43.004798 2011] [proxy_balancer:emerg] [pid 3632:tid 428]\n(22)Invalid argument: AH01186: worker slotmem_grab failed\nAH00020: Configuration Failed", "id": 152510, "time": "2012-01-01T18:34:59Z", "bug_id": 52402, "creation_time": "2012-01-01T18:34:59Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "mturk@apache.org", "attachment_id": null, "text": "Hmm, I remember I once wrote experimental module that used provider logic and it crashed on windows. Think this has to do something with dso logic and which pool has been used. Let me see if I can find that code and see how I fixed that. Might be this is the same cause.", "id": 152518, "time": "2012-01-02T08:16:18Z", "bug_id": 52402, "creation_time": "2012-01-02T08:16:18Z", "is_private": false}, {"count": 4, "tags": [], "creator": "JBlond@gmail.com", "is_private": false, "text": "Just saying it is a crash. The pid file still exist. Also there is a popup from windows telling me there is a crash and there is the event log entry.", "id": 152853, "time": "2012-01-17T18:53:17Z", "bug_id": 52402, "creation_time": "2012-01-17T18:53:17Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "mturk@apache.org", "is_private": false, "text": "OK, so the reason is mod_slotmem_shm\n\nI added some debugging and the reason is that win32 calls config twice.\nThat cause mod_slotmem_shm to try to allocate shared storage twice, and\nthe second avocation fails because it already reached limit in first call.", "id": 153392, "time": "2012-02-03T08:47:03Z", "bug_id": 52402, "creation_time": "2012-02-03T08:47:03Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 52402, "is_private": false, "count": 6, "id": 153403, "time": "2012-02-03T14:17:13Z", "creator": "mturk@apache.org", "creation_time": "2012-02-03T14:17:13Z", "text": "Fixed both in the trunk and 2.4.x\nCould you check if r1240170 fixes the issue on your side?"}, {"count": 7, "tags": [], "text": "Now lbmethod_bybusyness_module nor lbmethod_byrequests_module nor lbmethod_bytraffic_module. No issue while building.\nWithout that modules I get\n\nC:\\Apache2x\\bin>httpd -S\nAH00526: Syntax error on line 209 of C:/Apache2x/conf/httpd.conf:\nBalancerMember Can't find 'byrequests' lb method\n\nThan I tried to load each module single, but they don't load at all.\n\nC:\\Apache2x\\bin>httpd -S\nhttpd: Syntax error on line 121 of C:/Apache2x/conf/httpd.conf: Cannot load C:/Apache2x/mod_lbmethod_bybusyness.so into server: Das angegebene Modul wurde\nnicht gefunden.\n\n\nC:\\Apache2x\\bin>httpd -S\nhttpd: Syntax error on line 122 of C:/Apache2x/conf/httpd.conf: Cannot load C:/Apache2x/mod_lbmethod_byrequests.so into server: Das angegebene Modul wurde\nnicht gefunden.\n\n\nC:\\Apache2x\\bin>httpd -S\nhttpd: Syntax error on line 123 of C:/Apache2x/conf/httpd.conf: Cannot load C:/Apache2x/mod_lbmethod_bytraffic.so into server: Das angegebene Modul wurde n\nicht gefunden.\n\n\n\nPositive I can say that the module itself now load without apache crashing", "is_private": false, "bug_id": 52402, "id": 153558, "time": "2012-02-07T22:15:55Z", "creator": "JBlond@gmail.com", "creation_time": "2012-02-07T22:15:55Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 52402, "attachment_id": null, "id": 153701, "time": "2012-02-12T18:11:02Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2012-02-12T18:11:02Z", "is_private": false, "text": "(In reply to comment #7)\n> Now lbmethod_bybusyness_module nor lbmethod_byrequests_module nor\n> lbmethod_bytraffic_module. No issue while building.\n> Without that modules I get\n> \n> C:\\Apache2x\\bin>httpd -S\n> AH00526: Syntax error on line 209 of C:/Apache2x/conf/httpd.conf:\n> BalancerMember Can't find 'byrequests' lb method\n\nIt is expected, that using method \"byrequests\" without having lbmethod_byrequests_module does not work.\n\n> Than I tried to load each module single, but they don't load at all.\n> \n> C:\\Apache2x\\bin>httpd -S\n> httpd: Syntax error on line 121 of C:/Apache2x/conf/httpd.conf: Cannot load\n> C:/Apache2x/mod_lbmethod_bybusyness.so into server: Das angegebene Modul wurde\n> nicht gefunden.\n\n> C:\\Apache2x\\bin>httpd -S\n> httpd: Syntax error on line 122 of C:/Apache2x/conf/httpd.conf: Cannot load\n> C:/Apache2x/mod_lbmethod_byrequests.so into server: Das angegebene Modul wurde\n> nicht gefunden.\n> \n> C:\\Apache2x\\bin>httpd -S\n> httpd: Syntax error on line 123 of C:/Apache2x/conf/httpd.conf: Cannot load\n> C:/Apache2x/mod_lbmethod_bytraffic.so into server: Das angegebene Modul wurde n\n> icht gefunden.\n\nFpr non-Germans \"The given module has not been found\".\n\nMario: did you notice the strange path? Modules usually go to a \"modules\" directory. It seems your httpd.conf doesn't have the LoadModule lines correct. Can you please double check, how the LoadModule lines for those modules look like, and whether the installed modules files actually are in the correct directories?\n\nRegards,\n\nRainer"}, {"count": 9, "tags": [], "text": "I'm to blame on this. I see the problem in installwinconf.awk. \n\nFixed Trunk: r1243404\n2.4: r1243405", "attachment_id": null, "id": 153711, "creator": "gls@gknw.net", "time": "2012-02-13T03:26:50Z", "bug_id": 52402, "creation_time": "2012-02-13T03:26:50Z", "is_private": false}, {"count": 10, "tags": [], "text": "Works on non localhost. Thanks for the hint with the paths and the fix svn.\nWith external servers works fine now. \n\nWith the original setup on only localhost I have now\n\n--- snip ---\nBad Request\n\nYour browser sent a request that this server could not understand.\nSize of a request header field exceeds server limit.\n\nX-Forwarded-Server\n--- /snip ---", "is_private": false, "id": 153724, "creator": "JBlond@gmail.com", "time": "2012-02-13T10:32:31Z", "bug_id": 52402, "creation_time": "2012-02-13T10:32:31Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 52402, "is_private": false, "count": 11, "id": 153725, "time": "2012-02-13T10:40:16Z", "creator": "JBlond@gmail.com", "creation_time": "2012-02-13T10:40:16Z", "text": "I changed \n\nLimitRequestFields      0\nLimitRequestFieldsize\t12392\n\nBut than I get \n[Mon Feb 13 11:38:37.294511 2012] [proxy_balancer:emerg] [pid 9324:tid 376] (22)Invalid argument: AH01186: worker slotmem_grab failed\n[Mon Feb 13 11:38:37.295511 2012] [:emerg] [pid 9324:tid 376] AH00020: Configuration Failed, exiting\n[Mon Feb 13 11:38:37.308512 2012] [mpm_winnt:crit] [pid 5980:tid 528] AH00419: master_main: create child process failed. Exiting.\n[Mon Feb 13 11:38:38.202563 2012] [mpm_winnt:notice] [pid 9712:tid 452] AH00364: Child: All worker threads have exited."}, {"count": 12, "tags": [], "creator": "JBlond@gmail.com", "is_private": false, "text": "With apache 2.4.1 it works if I change the balancer root to /test\n\ne.g.\nProxyPass /test/ balancer://mycluster\nProxyPassReverse /test/ balancer://mycluster\n\nHaving the the old way \nProxyPass / balancer://mycluster\nProxyPassReverse / balancer://mycluster\n\nI get a 502. Any idea how to fix this?", "id": 154296, "time": "2012-02-27T21:25:59Z", "bug_id": 52402, "creation_time": "2012-02-27T21:25:59Z", "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 52402, "text": "Unable to start the apache webserver (httpd). Getting terminated in between.\nHow to start the webserver?\n\nLinux: Ubuntu 11.10 i386 x32 bit\nApache2: 2.4.1\n\nApache2 source got compiled and installed, when try to start, failed due to:\n\n[proxy_balancer:emerg] [pid 2325] AH01177: Failed to lookup provider 'shm' for 'slotmem': is mod_slotmem_shm loaded??\n[:emerg] [pid 2325] AH00020: Configuration Failed, exiting\n\nResults on running: \n./httpd -S\n\nVirtualHost configuration:\nServerRoot: \"/usr/local/apache-2.4.1\"\nMain DocumentRoot: \"/usr/local/apache-2.4.1/htdocs\"\nMain ErrorLog: \"/usr/local/apache-2.4.1/logs/error_log\"\nMutex default: dir=\"/usr/local/apache-2.4.1/logs\" mechanism=default\nMutex mpm-accept: using_defaults\nMutex proxy-balancer-shm: using_defaults\nPidFile: \"/usr/local/apache-2.4.1/logs/httpd.pid\"\nDefine: DUMP_VHOSTS\nDefine: DUMP_RUN_CFG\nUser: name=\"daemon\" id=1\nGroup: name=\"daemon\" id=1\n\nerror_log:\n[proxy_balancer:emerg] [pid 2705] AH01177: Failed to lookup provider 'shm' for 'slotmem': is mod_slotmem_shm loaded??\n[:emerg] [pid 2705] AH00020: Configuration Failed, exiting", "id": 154576, "attachment_id": null, "creator": "m_subbareddy@hotmail.com", "creation_time": "2012-03-06T16:26:45Z", "time": "2012-03-06T16:26:45Z", "is_private": false}, {"count": 14, "tags": [], "text": "Server is runnable, upon compiling without --enable-proxy --enable-proxy-balancer --enable-proxy-http options.", "is_private": false, "bug_id": 52402, "id": 154587, "time": "2012-03-06T22:18:54Z", "creator": "m_subbareddy@hotmail.com", "creation_time": "2012-03-06T22:18:54Z", "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 52402, "text": "Got it, this is no issue with proxy enabled option.\nIts basically required to enable the corresponding required module!\n\n[proxy_balancer:emerg] [pid 29584] AH01177: Failed to lookup provider 'shm' for 'slotmem': is mod_slotmem_shm loaded??\n\nby uncommenting the below entry, server has ran without any issue by using 2.4.1 without any additional patches.\n\nLoadModule slotmem_shm_module modules/mod_slotmem_shm.so", "id": 154597, "time": "2012-03-07T02:03:10Z", "creator": "m_subbareddy@hotmail.com", "creation_time": "2012-03-07T02:03:10Z", "is_private": false, "attachment_id": null}, {"count": 16, "tags": [], "bug_id": 52402, "attachment_id": null, "is_private": false, "id": 154602, "time": "2012-03-07T02:33:59Z", "creator": "covener@gmail.com", "creation_time": "2012-03-07T02:33:59Z", "text": "msubbareddy: don't hijack,much less close, existing bug reports opened by other users."}, {"count": 17, "tags": [], "creator": "s9flschr@stud.uni-saarland.de", "attachment_id": null, "text": "It looks like each balancer creates the SHM for its number of workers (1\nin my case) using its unique ->sname. After that, each worker grabs a\nslot from this.\n\nI have several virtual hosts pointing to the same balancer (by rewrite\n[P]). So, the second time, the balancer calls shm's slotmem_create again\nwith its name, that already exists -> kind-of noop.\n\nNow, the SHM under the balancer's name has still only 1 slot (that is\nalready occupied).\n\nWhen the worker now wants to (re-)grab its slot, I get:\n\n[slotmem_shm:debug] mod_slotmem_shm.c(575): AH02293: slotmem(...) grab\nfailed. Num 1/num_free 0 [proxy_balancer:emerg] (22)Invalid argument:\nAH01186: worker slotmem_grab failed\n\nDoes anybody know the intention behind this?", "id": 154743, "time": "2012-03-09T12:22:08Z", "bug_id": 52402, "creation_time": "2012-03-09T12:22:08Z", "is_private": false}, {"count": 18, "tags": [], "bug_id": 52402, "text": "I also encounter such issue. The virtual hosts configuration is as below:\n\n<VirtualHost *:80>\n   ServerAdmin webmaster@www.mydomain.sites\n   ServerName www.mydomain.sites\n   ProxyPass /google http://www.google.com/\n   ErrorLog \"logs/www.mydomain.sites-error_log\"\n   CustomLog \"logs/www.mydomain.sites-access_log\" common\n</VirtualHost>\n<Proxy balancer://testBalancer>\nBalancerMember http://www.app03.v2/\nBalancerMember http://www.app03.v22/\n</Proxy>\n\nLinux: Ubuntu 10.10 i686 x32 bit\nApache2: 2.4.1\n\nBy above configuration, it crash apache during start.\nerror log:\n[proxy_balancer:emerg] [pid 11746:tid 3077961472] (22)Invalid argument: AH01186: worker slotmem_grab failed\n\n\nAny help is appreciated.", "id": 155080, "time": "2012-03-20T01:49:57Z", "creator": "paulzhou2004@gmail.com", "creation_time": "2012-03-20T01:49:57Z", "is_private": false, "attachment_id": null}, {"count": 19, "tags": [], "bug_id": 52402, "text": "All,\n\nI had similar error when the balancer included outside from Virtual host, for testing I did include the balancer file inside the virtual host and it did work and nolonger getting the error.\n\n\n\n<VirtualHost abc.com:80>\n\nInclude conf/abc.com.conf\n\nInclude conf/balancer_ab.conf\nInclude conf/balancer_xyz.conf\n\n</VirtualHost>", "id": 155285, "time": "2012-03-26T14:40:24Z", "creator": "arunkumar.webadmin@gmail.com", "creation_time": "2012-03-26T14:40:24Z", "is_private": false, "attachment_id": null}, {"count": 20, "tags": [], "creator": "micha@lenk.info", "is_private": false, "text": "This issue still isn't fixed.\n\nWhat about applying the patch proposed on the mailinglist some time ago?\nhttp://mail-archives.apache.org/mod_mbox/httpd-dev/201204.mbox/%3C1334306253.1695.50.camel%40florian-desktop%3E", "id": 159217, "time": "2012-05-22T13:44:52Z", "bug_id": 52402, "creation_time": "2012-05-22T13:44:52Z", "attachment_id": null}, {"count": 21, "tags": [], "text": "I also stumbled across this issue today in httpd-2.4.2...\n\nSee http://www.mail-archive.com/dev%40httpd.apache.org/msg54912.html", "attachment_id": null, "id": 159964, "creator": "zl@consol.de", "time": "2012-06-13T15:53:22Z", "bug_id": 52402, "creation_time": "2012-06-13T15:53:22Z", "is_private": false}, {"count": 22, "tags": [], "creator": "zl@consol.de", "attachment_id": null, "text": "Just tested the patch against my httpd-2.4.2 installation and it resolves the issue.\n\nPatch:\nhttp://mail-archives.apache.org/mod_mbox/httpd-dev/201204.mbox/%3C1334306253.1695.50.camel%40florian-desktop%3E\n\n\nMaybe some commiter can have a look on this?", "id": 159972, "time": "2012-06-13T16:38:06Z", "bug_id": 52402, "creation_time": "2012-06-13T16:38:06Z", "is_private": false}, {"count": 23, "tags": [], "text": "Created attachment 28934\nproposed patch for httpd-2.4.2", "is_private": false, "id": 159973, "creator": "zl@consol.de", "time": "2012-06-13T16:46:12Z", "bug_id": 52402, "creation_time": "2012-06-13T16:46:12Z", "attachment_id": 28934}, {"count": 24, "tags": [], "text": "The patch works for me, too!", "attachment_id": null, "id": 160078, "creator": "JBlond@gmail.com", "time": "2012-06-18T13:51:30Z", "bug_id": 52402, "creation_time": "2012-06-18T13:51:30Z", "is_private": false}, {"count": 25, "tags": [], "text": "The nice folks over at Apache Lounge built the patched module for me ( http://www.apachelounge.com/viewtopic.php?t=4805 ) but the error persists:\n\n[proxy_balancer:emerg] [pid 6496:tid 620] (22)Invalid argument: AH01186: worker slotmem_grab failed\n\nDoes anything obvious appear wrong with my configuration?\n\n<VirtualHost _default_:9000> \n\n  ProxyTimeout 900 \n  SSLProxyEngine On \n  ProxyPreserveHost On \n\n  <Proxy balancer://my_cluster> \n    BalancerMember https://paz:9000 route=nA \n    BalancerMember https://baz:9000 route=nB \n    ProxySet lbmethod=byrequests stickysession=FOO_STICKY nofailover=Off \n  </Proxy> \n\n  ProxyPass /foo/   balancer://my_cluster/foo/ \n  Header add Set-Cookie \"FOO_STICKY=s.%{BALANCER_WORKER_ROUTE}e;path=/;secure\" env=BALANCER_ROUTE_CHANGED \n\n</VirtualHost>", "attachment_id": null, "id": 160533, "creator": "james.s.herrmann@gmail.com", "time": "2012-07-09T14:34:43Z", "bug_id": 52402, "creation_time": "2012-07-09T14:34:43Z", "is_private": false}, {"count": 26, "tags": [], "text": "This seems to be still present in Apache 2.4.3.\nIs there any news on this issue?\nWhat can I do to help resolving this issue?", "is_private": false, "id": 162673, "creator": "micha@lenk.info", "time": "2012-10-10T16:44:28Z", "bug_id": 52402, "creation_time": "2012-10-10T16:44:28Z", "attachment_id": null}, {"count": 27, "tags": [], "bug_id": 52402, "text": "Trunk handles this differently and that code path is projected to be backported. Can you check that trunk works for you?", "id": 163116, "time": "2012-11-01T14:43:13Z", "creator": "jim@apache.org", "creation_time": "2012-11-01T14:43:13Z", "is_private": false, "attachment_id": null}, {"count": 28, "tags": [], "creator": "micha@lenk.info", "is_private": false, "text": "Jim, I haven't tested yet with trunk. But do you know which commit fixed the issue in trunk?", "id": 163140, "time": "2012-11-02T11:16:33Z", "bug_id": 52402, "creation_time": "2012-11-02T11:16:33Z", "attachment_id": null}, {"count": 29, "tags": [], "creator": "zl@consol.de", "is_private": false, "text": "(In reply to comment #27)\n> Trunk handles this differently and that code path is projected to be\n> backported. Can you check that trunk works for you?\n\nJim, just tested httpd-trunk (r1406270) and I can confirm that the issue is fixed now.", "id": 163243, "time": "2012-11-06T18:55:38Z", "bug_id": 52402, "creation_time": "2012-11-06T18:55:38Z", "attachment_id": null}, {"count": 30, "tags": [], "creator": "colinpauladams@gmail.com", "attachment_id": null, "text": "I am getting just this problem (AH01186: worker slotmem_grab failed) with 2.4.3 on Windows XP (64-bit).\n\nThe last comment seems to say that there is a fix, but I infer that it will require compiling from source. Is that correct?", "id": 164184, "time": "2012-12-20T16:48:38Z", "bug_id": 52402, "creation_time": "2012-12-20T16:48:38Z", "is_private": false}, {"count": 31, "tags": [], "creator": "zl@consol.de", "is_private": false, "text": "That's right - you can build from sources to get this fixed or wait for the 2.4.4 release, which will fix the issue, see:\nhttp://svn.apache.org/viewvc/httpd/httpd/branches/2.4.x/CHANGES?revision=1422877&view=markup", "id": 164229, "time": "2012-12-24T11:44:24Z", "bug_id": 52402, "creation_time": "2012-12-24T11:44:24Z", "attachment_id": null}, {"count": 32, "tags": [], "bug_id": 52402, "text": "fixed in 2.4.4", "id": 165609, "time": "2013-03-03T16:48:42Z", "creator": "sf@sfritsch.de", "creation_time": "2013-03-03T16:48:42Z", "is_private": false, "attachment_id": null}, {"count": 33, "tags": [], "bug_id": 52402, "attachment_id": null, "is_private": false, "id": 198690, "time": "2017-05-05T09:29:10Z", "creator": "vgerris@gmail.com", "creation_time": "2017-05-05T09:29:10Z", "text": "Has this regressed somehow into 2.4.25 ?\nI needed to change the config to have BalancerMember directives included within the VirtualHost.\nWhen it is not done, on OSx I get \n\n[Thu May 04 16:54:49.918766 2017] [slotmem_shm:error] [pid 63687:tid 140736233759680] (24)Too many open files: AH02611: create: apr_shm_create(/somedir/logs/slotmem-shm-p3e3cb24c.shm) failed\n[Thu May 04 16:54:49.918794 2017] [proxy_balancer:emerg] [pid 63687:tid 140736233759680] (24)Too many open files: AH01179: balancer slotmem_create failed"}]