[{"count": 0, "tags": [], "bug_id": 29170, "attachment_id": null, "text": "AIX 4.1, not sure what compiler version but can supply if someone tells me how\nto get it.\nAPR coming with subversion 1.0.4.\napr/configure sets LDFLAGS to -Wl,-brtl and adds -Wl,-brtl to apr_addto_bugger.\nThis causes one of the tests to see if anonymous shared memory is possible to\nfail to compile and hence configure thinks you cannot use shared memory -\nconfigure errors out at this point.\n\nI did:\n\n--- configure   Fri May 21 22:25:48 2004\n+++ x   Mon May 24 11:20:07 2004\n@@ -3486,10 +3486,10 @@\n \n \n   if test \"x$LDFLAGS\" = \"x\"; then\n-    echo \"  setting LDFLAGS to \\\"-Wl,-brtl\\\"\"\n-    LDFLAGS=\"-Wl,-brtl\"\n+    echo \"  setting LDFLAGS to \\\"\\\"\"\n+    LDFLAGS=\"\"\n   else\n-    apr_addto_bugger=\"-Wl,-brtl\"\n+    apr_addto_bugger=\"\"\n     for i in $apr_addto_bugger; do\n       apr_addto_duplicate=\"0\"\n       for j in $LDFLAGS; do\n\nto get past this.", "id": 57953, "time": "2004-05-24T10:33:03Z", "creator": "martin@easysoft.com", "creation_time": "2004-05-24T10:33:03Z", "is_private": false}, {"count": 1, "tags": [], "text": "Thanks for the report.  -Wl,-brtl should only be done by default on AIX 4.3 and\nlater AFAIK.  Jeff?", "is_private": false, "id": 57979, "creator": "jorton@redhat.com", "time": "2004-05-24T19:04:56Z", "bug_id": 29170, "creation_time": "2004-05-24T19:04:56Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 29170, "attachment_id": null, "text": "-Wl,-brtl is for aix >= 4.2 as far as I can tell...\n\nMartin, can you try this patch?  You'll need to run apr buildconf to regenerate\nconfigure from the updated m4 file.\n\nIndex: build/apr_hints.m4\n===================================================================\nRCS file: /home/cvs/apr/build/apr_hints.m4,v\nretrieving revision 1.53.2.6\ndiff -u -r1.53.2.6 apr_hints.m4\n--- build/apr_hints.m4\t19 May 2004 19:32:08 -0000\t1.53.2.6\n+++ build/apr_hints.m4\t24 May 2004 20:36:07 -0000\n@@ -63,7 +63,13 @@\n         fi\n \tAPR_SETIFNULL(apr_sysvsem_is_global, [yes])\n \tAPR_SETIFNULL(apr_lock_method, [USE_SYSVSEM_SERIALIZE])\n-\tAPR_ADDTO(LDFLAGS, [-Wl,-brtl])\n+        case $host in\n+            *-ibm-aix3* | *-ibm-aix4.1.*)\n+                ;;\n+            *)\n+                APR_ADDTO(LDFLAGS, [-Wl,-brtl])\n+                ;;\n+\tesac\n         ;;\n     *-apollo-*)\n \tAPR_ADDTO(CPPFLAGS, [-DAPOLLO])\n", "id": 57987, "time": "2004-05-24T20:41:56Z", "creator": "trawick@apache.org", "creation_time": "2004-05-24T20:41:56Z", "is_private": false}, {"count": 3, "tags": [], "creator": "martin@easysoft.com", "text": "I need to install autoconf and automake before I can run buildconf. I'll do that\ntoday.", "id": 58014, "time": "2004-05-25T07:58:14Z", "bug_id": 29170, "creation_time": "2004-05-25T07:58:14Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "martin@easysoft.com", "text": "I am really sorry but to get autoconf installed I need GNU m4. GNU M4 did not\nbuild out of the box due to use of -Xc which I changed to -Xa. Then autoconf\nneeded perl and I just don't have enough disk space on this machine to install\nperl. Our sinix machine is rather old. I tried regenerating configure on a\ndifferent machine (autoconf 2.57) but it seemed to generate a vastly different\nconfigure script with some substantial differences - that worried me a bit\nespecially stuff like:\n\n> if test \"${ac_cv_file__dev_zero+set}\" = set; then\n27115c16506\n<    ac_cv_file__dev_zer=yes\n---\n>    ac_cv_file__dev_zero=yes\n27117c16508\n<    ac_cv_file__dev_zer=no\n---\n>    ac_cv_file__dev_zero=no\n\nHaving said that it ran to completion and correctly identified IPC shmget which\nit didn't before:\n\ndecision on anonymous shared memory allocation method... SysV IPC shmget()\ndecision on namebased memory allocation method... SysV IPC shmget()\n\nSo I'd guess patch is good.\n", "id": 58023, "time": "2004-05-25T08:49:52Z", "bug_id": 29170, "creation_time": "2004-05-25T08:49:52Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "trawick@apache.org", "text": "Thanks, I'll sanity check on 4.3 and 5.x and then commit.\n", "id": 58052, "time": "2004-05-25T13:06:10Z", "bug_id": 29170, "creation_time": "2004-05-25T13:06:10Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 29170, "attachment_id": null, "text": "God knows why I said sinix in the last comment I made, I meant AIX of course.", "id": 58054, "time": "2004-05-25T14:37:39Z", "creator": "martin@easysoft.com", "creation_time": "2004-05-25T14:37:39Z", "is_private": false}, {"count": 7, "tags": [], "text": "Fix to not enable run-time linking finally committed to both APR branches...\n\nThanks so much for your report/testing!", "is_private": false, "id": 59111, "creator": "trawick@apache.org", "time": "2004-06-11T15:06:18Z", "bug_id": 29170, "creation_time": "2004-06-11T15:06:18Z", "attachment_id": null}]