[{"count": 0, "tags": [], "bug_id": 60829, "attachment_id": null, "text": "I use a groovy script to add Vuser on the fly with the new addNewTread API like this :\n\nGroovy code : \n\nif ( ctx.getThreadGroup().getNumThreads() <  vuser ) {\n\tif ( !isValidating ) {\n\t\t// Start new Vuser \n\t\tctx.getThreadGroup().addNewThread( ramp_time, ctx.getEngine() )\n\t}\n}\n\nOn a local test, no problem, it work !\nBut when I start it in a remote test mode, a NPE occur with this stack trace on the slave node :\n\n\njavax.script.ScriptException: java.lang.NullPointerException\n        at org.codehaus.groovy.jsr223.GroovyScriptEngineImpl.eval(GroovyScriptEngineImpl.java:320) ~[groovy-all-2.4.9.jar:2.4.9]\n        at org.codehaus.groovy.jsr223.GroovyCompiledScript.eval(GroovyCompiledScript.java:72) ~[groovy-all-2.4.9.jar:2.4.9]\n        at javax.script.CompiledScript.eval(CompiledScript.java:92) ~[?:1.8.0_111]\n        at org.apache.jmeter.util.JSR223TestElement.processFileOrScript(JSR223TestElement.java:192) ~[ApacheJMeter_core.jar:3.2-SNAPSHOT.20170302]\n        at org.apache.jmeter.protocol.java.sampler.JSR223Sampler.sample(JSR223Sampler.java:69) [ApacheJMeter_java.jar:3.2-SNAPSHOT.20170302]\n        at org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:486) [ApacheJMeter_core.jar:3.2-SNAPSHOT.20170302]\n        at org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:425) [ApacheJMeter_core.jar:3.2-SNAPSHOT.20170302]\n        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:254) [ApacheJMeter_core.jar:3.2-SNAPSHOT.20170302]\n        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_111]\nCaused by: java.lang.NullPointerException\n        at org.apache.jmeter.threads.ThreadGroup.addNewThread(ThreadGroup.java:373) ~[ApacheJMeter_core.jar:3.2-SNAPSHOT.20170302]\n        at org.apache.jmeter.threads.ThreadGroup$addNewThread$0.call(Unknown Source) ~[?:?]\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48) ~[groovy-all-2.4.9.jar:2.4.9]\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113) ~[groovy-all-2.4.9.jar:2.4.9]\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:133) ~[groovy-all-2.4.9.jar:2.4.9]\n        at Script98.run(Script98.groovy:147) ~[?:?]\n        at org.codehaus.groovy.jsr223.GroovyScriptEngineImpl.eval(GroovyScriptEngineImpl.java:317) ~[groovy-all-2.4.9.jar:2.4.9]", "id": 197511, "time": "2017-03-07T17:24:42Z", "creator": "mchassagneux@apache.org", "creation_time": "2017-03-07T17:24:42Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 60829, "attachment_id": null, "text": "Fix with the SVN commit :\n\nhttp://svn.apache.org/viewvc?view=revision&sortby=date&revision=1786026", "id": 197545, "time": "2017-03-08T17:06:20Z", "creator": "mchassagneux@apache.org", "creation_time": "2017-03-08T17:06:20Z", "is_private": false}]