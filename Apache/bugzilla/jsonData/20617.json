[{"count": 0, "tags": [], "creator": "jsp@pkc.com", "attachment_id": null, "is_private": false, "id": 38599, "time": "2003-06-09T17:38:47Z", "bug_id": 20617, "creation_time": "2003-06-09T17:38:47Z", "text": "Line 586 adds two bytes to the length of each header string to allow for\ncharacters that will be added when the string is formatted:\n\n            len += strlen(elts[i].key) + strlen(elts[i].val) + 2;\n\nThis is consistent with the commentary that precedes it, however, line 598- 602\nactually add three bytes to the header string:\n\n            *(((char*)buf_data)++) = ':';\n            *(((char*)buf_data)++) = ' ';\n            strcpy(buf_data, elts[i].val);\n            ((char*)buf_data) += strlen(elts[i].val);\n            *(((char*)buf_data)++) = '\\n';\n\nNet result: buf_size is one byte per row too small.  GetServerVariable() is\ntypically called once with a NULL buffer to establish the required buffer size,\nthen called again with a newly allocated buffer of the appropriate size.  This\nisn't possible if the first call returns too small a size.\n\nThe fix is simple: change '2' to '3' in line 586."}, {"count": 1, "tags": [], "bug_id": 20617, "text": "Forgot to mention the file: this is in mod_isapi.c.", "id": 38602, "time": "2003-06-09T17:46:29Z", "creator": "jsp@pkc.com", "creation_time": "2003-06-09T17:46:29Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 20617, "attachment_id": 6740, "id": 38689, "time": "2003-06-10T19:27:30Z", "creator": "jsp@pkc.com", "creation_time": "2003-06-10T19:27:30Z", "is_private": false, "text": "Created attachment 6740\nTrivial patch"}, {"count": 3, "tags": [], "bug_id": 20617, "text": "Note that the patch is not needed if the patch for bug 20656 is applied.", "id": 38692, "time": "2003-06-10T19:30:58Z", "creator": "jsp@pkc.com", "creation_time": "2003-06-10T19:30:58Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 20617, "text": "enabling the PatchAvailable keyword\nupdated doc on submitting patches is at http://httpd.apache.org/dev/patches.html\n", "id": 47883, "time": "2003-11-21T22:18:48Z", "creator": "trawick@apache.org", "creation_time": "2003-11-21T22:18:48Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 20617, "text": "patch committed to Apache 2.1-dev, will propose for backport to stable branch soon\n\nthanks!\n", "id": 52369, "time": "2004-02-16T17:40:29Z", "creator": "trawick@apache.org", "creation_time": "2004-02-16T17:40:29Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 20617, "attachment_id": null, "id": 52453, "time": "2004-02-17T20:00:05Z", "creator": "wrowe@apache.org", "creation_time": "2004-02-17T20:00:05Z", "is_private": false, "text": "  +1 here to backport, thanks Jesse."}]