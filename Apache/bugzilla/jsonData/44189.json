[{"count": 0, "tags": [], "bug_id": 44189, "is_private": false, "text": "I have set up an apache reverse proxy in my windows machine to load balance 2 \nbackend servers. The server host some web application on tomcat 4 and 5. \nThis web application is basically a servlet and is accessed as follows\nhttp://<servername>:<port>/webapp/MyServlet without a trailing \"/\" at the end.\n\nI have the following load balancer set up in my httpd.conf -\n\nProxyPass /app balancer://mycluster\nProxyPassreverse /app balancer://mycluster\nProxyPassreverse /app http://server1/webapp/MyServlet\nProxyPassreverse /app http://server2/webapp/MyServlet\n\n<Proxy balancer://mycluster>\n\nBalancerMember http://server1/webapp/Myservlet loadfactor=1\nBalancerMember http://server2/webapp/MyServlet loadfactor=1\n\nproxySet lbmethod=byrequests\n\n</Proxy>\n\nSince mod_proxy rewrites the URL as http://server1/webapp/Myservlet/,\nI am getting \"HTTP Status 403 - directory listings are not allowed\" error.\n\nAs per mod_proxy documentation, I tried the followin option to stop \ncanonicalisation\n\nProxyPass /app balancer://mycluster nocanon\n\nbut the httpd doesn't recognize the option -\n\nD:\\apache\\Apache2\\bin>httpd.exe\nSyntax error on line 513 of D:/apache/Apache2/conf/httpd.conf:\nInvalid ProxyPass|ProxyPassMatch parameter. Parameter must be in the \nform 'key=value'.\n\nLater on I checked the 2.2.6 source code and found that there is no code to \nrecognize the \"nocanon\" keyword.\n\nSince I am not able to acces my application via the load balancer is there any \nquick workaround? mod-rewrite ?", "id": 112669, "time": "2008-01-09T00:12:36Z", "creator": "chatterjeed@lycos.com", "creation_time": "2008-01-09T00:12:36Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 44189, "attachment_id": null, "is_private": false, "id": 112689, "time": "2008-01-09T04:18:45Z", "creator": "nick@webthing.com", "creation_time": "2008-01-09T04:18:45Z", "text": "nocanon is available in 2.2.7 and later.  I guess you were reading the\n2.2-current documentation."}, {"count": 2, "tags": [], "bug_id": 44189, "attachment_id": null, "is_private": false, "id": 112699, "time": "2008-01-09T06:53:13Z", "creator": "chatterjeed@lycos.com", "creation_time": "2008-01-09T06:53:13Z", "text": "(In reply to comment #1)\n> nocanon is available in 2.2.7 and later.  I guess you were reading the\n> 2.2-current documentation.\n\nHi Nick,\n\nI have installed the 2.2.7 windiws binary (download from www.apachelounge.com).\n\nHowever, my problem is still not resolved.\n\nIf I use the nocanon keyword as follows\nProxyPass /app balancer://mycluster nocanon\n\nit is accepting the syntax unlike 2.2.6. But that doesn't solve the problem\nas \"/\" is appended to the worker URL.\n\nAnd if I give\n\n<Proxy balancer://mycluster>\n\nBalancerMember http://server1/webapp/Myservlet loadfactor=1 nocanon\nBalancerMember http://server2/webapp/MyServlet loadfactor=1\n\nproxySet lbmethod=byrequests\n\n</Proxy>\n\nI get the following error\nD:\\apache\\apache2.2.7\\bin>httpd.exe\nSyntax error on line 513 of D:/apache/apache2.2.7/conf/httpd.conf:\nBalancerMember can not have a balancer name when defined in a location.\n\nI set the loglevel to debug and it shows mod_proxy_balancer \nrewites my url from http://server1/webapp/Myservlet\nto http://server1/webapp/Myservlet/.\n\nAny solution to this problem?\n\nThanks for your help.\n\n\n\n\n"}, {"count": 3, "tags": [], "bug_id": 44189, "attachment_id": null, "id": 112759, "time": "2008-01-11T00:45:31Z", "creator": "chatterjeed@lycos.com", "creation_time": "2008-01-11T00:45:31Z", "is_private": false, "text": "I am reopening the bug since the fix for nocanon doesn't solve the problem, \nwhen backend server URLs are used in BalancerMember directive.\n"}, {"text": "Fixed in 2.2.9", "tags": [], "bug_id": 44189, "attachment_id": null, "count": 4, "id": 117380, "time": "2008-06-05T07:50:18Z", "creator": "jim@apache.org", "creation_time": "2008-06-05T07:50:18Z", "is_private": false}, {"text": "What is the status of this bug?\nI'm getting the same error \"BalancerMember can not have a balancer name when defined in a location\" when using nocanon like this:\n\n<Proxy balancer://cluster1>\nBalancerMember http://server-000:8080/jfs nocanon\nBalancerMember http://server-001:8080/jfs nocanon\n</Proxy>\n\nWe are using Apache/2.2.11.\n\nSeems like this bug is not fixed?\n\nRegards\nMorten Svan\u00e6s", "tags": [], "bug_id": 44189, "attachment_id": null, "count": 5, "id": 147401, "time": "2011-06-23T13:17:23Z", "creator": "netroms@gmail.com", "creation_time": "2011-06-23T13:17:23Z", "is_private": false}, {"count": 6, "text": "(In reply to comment #5)\n> What is the status of this bug?\n> I'm getting the same error \"BalancerMember can not have a balancer name when\n> defined in a location\" when using nocanon like this:\n> \n> <Proxy balancer://cluster1>\n> BalancerMember http://server-000:8080/jfs nocanon\n> BalancerMember http://server-001:8080/jfs nocanon\n> </Proxy>\n> \n> We are using Apache/2.2.11.\n\nYour configuration is wrong. nocanon can only be used with ProxyPass not with\nBalancerMember.", "bug_id": 44189, "attachment_id": null, "id": 147421, "time": "2011-06-24T06:38:31Z", "creator": "rpluem@apache.org", "creation_time": "2011-06-24T06:38:31Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "bug_id": 44189, "attachment_id": null, "is_private": false, "id": 148449, "time": "2011-08-07T00:14:21Z", "creator": "covener@gmail.com", "creation_time": "2011-08-07T00:14:21Z", "text": "closing, User Error per Ruedigers latest comment"}]