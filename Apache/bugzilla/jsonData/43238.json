[{"count": 0, "tags": [], "bug_id": 43238, "attachment_id": null, "is_private": false, "id": 107392, "time": "2007-08-29T05:44:20Z", "creator": "yair.lenga@citi.com", "creation_time": "2007-08-29T05:44:20Z", "text": "I'm using Apache as a reverse proxy. The request contain important information\nthat can not be passed in clear text between machines. I tried to use the\nconnect to the backend server using https.\n\n<virtualHost _default:443>\n\nSSLProxyEngine on\nProxyPass /proxy-s/ https://realserver/app/ max=5\n</virtual>\n\nWe benchmarked the performance, and found noticable slowness on the proxy-s\npath, compared with accessing the \"realserver\" app over HTTPS. The delay is ~0.1\nseconds/request. It turned out that regardless of any setting, Apache does not\nuse KeepAlive connections to connect to https backends. Each request require an\nHTTPS connection setup.\n\nWhen using HTTP to connect to the real server, the cost of running the requests\nthrough the proxy was < 0.01 second/request, and significantly less with\nKeep-Alive & connection pooling.\n\nFor my application, direct https connection (with Keep-Alive) takes ~1.5\nseconds/per 100 requests (including ~0.1 seconds for the inital SSL setup). The\n10 seconds delay (0.1*100) prevent high-load applications from using Apache, if\nthe proxied connection must be secured.\n\nThe code in mod_proxy_http.c (2.2.4) states:\n\n    /*\n     * TODO: Currently we cannot handle persistent SSL backend connections,\n     * because we recreate backend->connection for each request and thus\n     * try to initialize an already existing SSL connection. This does\n     * not work.\n     */\n    if (is_ssl)\n        backend->close_on_recycle = 1;\n\n\nIS IT POSSIBLE TO REMOVE THIS LIMIT ?"}, {"count": 1, "tags": [], "creator": "asmorgrav@yahoo.no", "is_private": false, "id": 112667, "attachment_id": null, "bug_id": 43238, "creation_time": "2008-01-09T00:08:49Z", "time": "2008-01-09T00:08:49Z", "text": "\n\n*** This bug has been marked as a duplicate of 38602 ***"}, {"count": 2, "tags": [], "bug_id": 43238, "text": "Can you review the status of this bug. I believe 30602 applies to keep-alive \nfor http connections (which have been resolved). The current bug applied to \nhttps (http+SSL) connection, for which no keep-alive is supported.\n\nI checked the code for 2.2.6, and the limit is still coded in mod_proxy_http.c\n\nYair", "id": 112697, "time": "2008-01-09T06:04:10Z", "creator": "yair.lenga@citi.com", "creation_time": "2008-01-09T06:04:10Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 43238, "text": "It can do SSL keepalives to backend in trunk. But this codes needs to settle a\nbit until backported to the 2.2.x branch.", "id": 112706, "time": "2008-01-09T11:54:00Z", "creator": "rpluem@apache.org", "creation_time": "2008-01-09T11:54:00Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "jim@apache.org", "is_private": false, "text": "This is likely to be proposed for backport for 2.2.9", "id": 114076, "time": "2008-02-27T13:28:10Z", "bug_id": 43238, "creation_time": "2008-02-27T13:28:10Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 43238, "attachment_id": null, "id": 123314, "time": "2008-12-15T06:31:37Z", "creator": "rpluem@apache.org", "creation_time": "2008-12-15T06:31:37Z", "is_private": false, "text": "Backported to 2.2.x"}]