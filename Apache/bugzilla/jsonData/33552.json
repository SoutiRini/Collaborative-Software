[{"count": 0, "tags": [], "text": "libtool passes the compiler's arguments on to the linker and the linker chokes\non it as unknown flags, namely -pthread\nI have replaced ltmain.sh in the 4 locations in the distribution with the one\nfrom the 1.5.14 version of libtool (for testing) and the problem goes away.\nAfter make succeeds though, the make install fails to install all the modules,\nprobably because changing only ltmain.sh isn't enough to upgrade the whole\nlibtool setup in the distribution.\nuntil a new distribution comes out, is there anything I can do to make this work\nproperly?", "attachment_id": null, "id": 70915, "creator": "dg@orbhost.net", "time": "2005-02-14T07:02:43Z", "bug_id": 33552, "creation_time": "2005-02-14T07:02:43Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 33552, "attachment_id": null, "is_private": false, "id": 70918, "time": "2005-02-14T11:45:31Z", "creator": "trawick@apache.org", "creation_time": "2005-02-14T11:45:31Z", "text": "Yes, install your own libtool, autoconf, and possibly GNU m4, and run\n./buildconf before ./configure.  This is standard operating procedure for\nplatforms where a different libtool version has to be used."}, {"count": 2, "tags": [], "bug_id": 33552, "attachment_id": null, "id": 70967, "time": "2005-02-14T23:07:28Z", "creator": "dg@orbhost.net", "creation_time": "2005-02-14T23:07:28Z", "is_private": false, "text": "(In reply to comment #1)\n> Yes, install your own libtool, autoconf, and possibly GNU m4, and run\n> ./buildconf before ./configure.  This is standard operating procedure for\n> platforms where a different libtool version has to be used.\n\nOk, that does fix the unknown flag problem, so configure goes all the way\nthrough and the make finishes as well, but there's something happening during\nthe make which causes a problem during make install.\nSuch as:\n\n*** Warning: Linking the executable httpd against the loadable module\n*** mod_so.so is not portable!\n\nduring make, and then:\n\n/pkg/build/apache/srclib/apr/libtool --silent --mode=install cp mod_rewrite.la\n/usr/local/apache/modules/\nlibtool: install: warning: remember to run `libtool --finish\n/usr/local/BerkeleyDB.4.3/lib'\n\nand:\n\nlibtool: install: warning: `modules/mappers/mod_so.la' has not been installed in\n`/usr/local/BerkeleyDB.4.3/lib'\n\nThose are just examples, as there are over 2 dozens of such lines about the modules.\n\nI had some modules defined as static and the rest as shared in my configure\nline, so I tried setting them all to shared (except for thread, http and so),\nbut that doesn't change anything.\n\nWhy is there even an attempt to install something in\n/usr/local/BerkeleyDB.4.3/lib ???\nWhat does \"not protable\" mean?\nWhy aren't those modules being installed?"}, {"count": 3, "tags": [], "bug_id": 33552, "attachment_id": null, "is_private": false, "id": 71471, "time": "2005-02-24T17:13:19Z", "creator": "jorton@redhat.com", "creation_time": "2005-02-24T17:13:19Z", "text": "Did you pass --prefix=/usr/local/BerkeleyDB.4.3 to configure?  That's perhaps\nnot what you intended.  (check the config.nice file to see exactly how configure\nwas invoked)\n\nBut generally you can ignore these libtool warnings - the key question is; does\nit work?"}, {"count": 4, "tags": [], "bug_id": 33552, "attachment_id": null, "id": 71483, "time": "2005-02-24T18:42:21Z", "creator": "dg@orbhost.net", "creation_time": "2005-02-24T18:42:21Z", "is_private": false, "text": "I did try to compile with BerkeleyDB.4.3 and it never worked. Although the\nwarnings didn't prevent make from succeeding, the install wouldn't install most\nof the modules.\nI ended up not using 4.3 and went back to 4.1 and that worked fine.\nHere's the complete configure line I've used to get a successful build and\ninstall that works:\n\nCC=\"cc\" CFLAGS=\"-O4 -DNO_SLACK\" \\\nLIBS=\"-L/usr/local/lib\" \\\nINCLUDES=\"-I/usr/local/include\" \\\n./configure --prefix=/usr/local/apache \\\n--enable-threads \\\n--enable-http \\\n--enable-so \\\n--enable-info \\\n--enable-logio \\\n--enable-cgi=shared \\\n--enable-cgid=shared \\\n--enable-cache=shared \\\n--enable-disk-cache=shared \\\n--enable-file-cache=shared \\\n--enable-mem-cache=shared \\\n--enable-headers=shared \\\n--enable-usertrack=shared \\\n--enable-unique-id \\\n--enable-echo=shared \\\n--enable-dav=shared \\\n--enable-dav-fs=shared \\\n--enable-vhost-alias \\\n--enable-speling \\\n--enable-rewrite \\\n--enable-auth-anon \\\n--enable-auth-dbm \\\n--enable-auth-digest \\\n--enable-charset-lite=shared \\\n--enable-ext-filter=shared \\\n--enable-deflate \\\n--enable-mime-magic \\\n--enable-cern-meta \\\n--enable-expires \\\n--enable-mbstring \\\n--enable-ftp \\\n--enable-wddx \\\n--enable-exif \\\n--enable-trans-sid \\\n--enable-dbase \\\n--enable-dbx \\\n--enable-sockets \\\n--enable-xslt \\\n--enable-suexec \\\n--enable-static-htpasswd \\\n--enable-static-htdigest \\\n--enable-static-support \\\n--enable-static-rotatelogs \\\n--enable-static-logresolve \\\n--enable-static-htdbm \\\n--enable-static-ab \\\n--enable-static-checkgid \\\n--enable-ssl \\\n--enable-v4-mapped \\\n--with-suexec-caller=httpd \\\n--with-suexec-userdir=/srv \\\n--with-suexec-docroot=/srv \\\n--with-suexec-uidmin=100 \\\n--with-suexec-gidmin=100 \\\n--with-suexec-logfile=/usr/local/apache/logs/su \\\n--with-suexec-umask=027 \\\n--with-mcrypt \\\n--with-ndbm \\\n--with-gd \\\n--with-xml \\\n--with-xmlrpc \\\n--with-iconv=/usr/local \\\n--with-berkeley-db=/usr/local/BerkeleyDB.4.1 \\\n--with-mpm=worker \\\n--with-ssl=/usr/ssl \\\n--verbose"}, {"count": 5, "text": "If the only bug here was a libtool one, it'll get fixed when a new tarball is\nreleased using a newer version of libtool; in the meantime you have the\nworkaround as Jeff indicates.  Thanks for the report.", "creator": "jorton@redhat.com", "is_private": false, "id": 71782, "time": "2005-03-03T16:15:01Z", "bug_id": 33552, "creation_time": "2005-03-03T16:15:01Z", "tags": [], "attachment_id": null}]