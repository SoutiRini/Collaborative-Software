[{"count": 0, "tags": [], "bug_id": 4996, "attachment_id": null, "text": "For version 1.4.4 (also in 1.3.3)\n\nthe follwoing code produces the following results (relevant lines are marked)\n\nprivate void writeElements(Collection collection, Node root, Document doc) {\n\tEnumeration e = collection.elements();\n\twhile (e.hasMoreElements()) {\n\t\tNakedInterface elementObject = (NakedInterface) e.nextElement();\n\t\tif (elementObject != null) {\n\t\t\tElement attribute = doc.createElement(\"element\");\n\t\t\tattribute.setAttribute(\"type\", elementObject.getClass().getName());\n\t\t\tNakedInterface attObject = ((NakedInterface) elementObject);\n\t\t\tattribute.setAttribute(\"oid\", String.valueOf(((SimpleOid)\nattObject.getOid()).getSerialNo()));\n\t->\t\tString value =\"\u00a3200\";;\n\t->\t\tattribute.setAttribute(\"value\", value);\n\t->\t\troot.appendChild(doc.createComment(value));\n\t->\t\troot.appendChild(attribute);\n\t\t}\n\t}\n}\n\noutput to a file gives\n\n<?xml version=\"1.0\"?>\n<!DOCTYPE expressive-object SYSTEM \"eot.dtd\">\n<!--Collection: 5 InvoiceItems-->\n<expressive-object type=\"org.nakedobjects.toolkit.object.Collection\" oid=\"190\">\n<!--\u00a3200-->\n<element type=\"org.nakedobjects.test.enterprise1.InvoiceItem\" oid=\"193\"\nvalue=\"&#xa3;200\"/>\n<!--\u00a3200-->\n<element type=\"org.nakedobjects.test.enterprise1.InvoiceItem\" oid=\"194\"\nvalue=\"&#xa3;200\"/>\n<!--\u00a3200-->\n<element type=\"org.nakedobjects.test.enterprise1.InvoiceItem\" oid=\"197\"\nvalue=\"&#xa3;200\"/>\n<!--\u00a3200-->\n<element type=\"org.nakedobjects.test.enterprise1.InvoiceItem\" oid=\"198\"\nvalue=\"&#xa3;200\"/>\n<!--\u00a3200-->\n<element type=\"org.nakedobjects.test.enterprise1.InvoiceItem\" oid=\"104\"\nvalue=\"&#xa3;200\"/>\n</expressive-object>\n\n\nNote that each comment has a pound sign - which causes a parse failure when\nlater parsing this file - whereas the attributes get encoded.", "id": 8140, "time": "2001-11-21T04:51:13Z", "creator": "rmatthews@expressive-systems.org", "creation_time": "2001-11-21T04:51:13Z", "is_private": false}]