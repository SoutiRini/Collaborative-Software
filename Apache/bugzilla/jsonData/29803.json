[{"count": 0, "tags": [], "creator": "rodot@credm.com", "text": "I tried to batch svg rasterization on a FreeBSD host without X11 server, and\nwithout used an external X11 server.\n\nFor test, when i used a external X11 server (set DISPLAY to my X11 server),\nrasterization work well, and didn't open windows. So rasterization seem don't\nneed a X11 server.\n\nBut without DISPLAY set, batik tried to used \":0.0\" DISPLAY, and as it don't\nfound X11 server, thrown an exception.\n\nHost is an FreeBSD 4.10-RELEASE #0.\nI use freebsd port for java.\nI use a downloaded version for batik (version 1.5.1)\n\nI also tried an CVS version, and I get the same problems\n\nJAVA VERSION\n$ java -version\njava version \"1.4.2-p6\"\nJava(TM) 2 Runtime Environment, Standard Edition (build\n1.4.2-p6-root_15_jun_2004_17_12)\nJava HotSpot(TM) Client VM (build 1.4.2-p6-root_15_jun_2004_17_12, mixed mode)\n\n\n\nBATICK CVS VERSION\n$ cvs -d :pserver:anoncvs@cvs.apache.org:/home/cvspublic checkout xml-batik\n$ unset DISPLAY\n$ ./build.sh svgrasterizer somewhere/_image_d50840e109.svg -d .\nBuildfile: build.xml\n\ninit-args:\n\ninit:\n\ncompile:\ndebug off, optimize on, deprecation on\nWarning: org/apache/batik/bridge/BridgeContext.java modified in the future.\nWarning: org/apache/batik/bridge/CursorManager.java modified in the future.\nWarning: org/apache/batik/bridge/DocumentLoader.java modified in the future.\nWarning: org/apache/batik/bridge/PaintServer.java modified in the future.\nWarning: org/apache/batik/bridge/SVGDecoratedShapeElementBridge.java modified in\nthe future.\nWarning: org/apache/batik/bridge/SVGImageElementBridge.java modified in the future.\nWarning: org/apache/batik/bridge/SVGLineElementBridge.java modified in the future.\nWarning: org/apache/batik/bridge/SVGTextElementBridge.java modified in the future.\nWarning: org/apache/batik/bridge/SVGUseElementBridge.java modified in the future.\nWarning: org/apache/batik/css/engine/CSSContext.java modified in the future.\nWarning: org/apache/batik/css/engine/CSSEngine.java modified in the future.\nWarning: org/apache/batik/css/parser/Scanner.java modified in the future.\nWarning: org/apache/batik/ext/awt/LinearGradientPaintContext.java modified in\nthe future.\nWarning: org/apache/batik/gvt/text/GlyphLayout.java modified in the future.\nWarning: org/apache/batik/swing/JSVGScrollPane.java modified in the future.\nWarning: org/apache/batik/transcoder/SVGAbstractTranscoder.java modified in the\nfuture.\nWarning: org/apache/batik/transcoder/print/PrintTranscoder.java modified in the\nfuture.\nCompiling 17 source files to /home/sebastien/tests/xml-batik/classes\n\nsvgrasterizer:\nAbout to transcode 1 SVG file(s)\n\nException in thread \"main\" java.lang.InternalError: Can't connect to X11 window\nserver using ':0.0' as the value of the DISPLAY variable.\n        at sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)\n        at sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:134)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:141)\n        at\njava.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:62)\n        at java.awt.image.BufferedImage.createGraphics(BufferedImage.java:1041)\n        at org.apache.batik.ext.awt.image.GraphicsUtil.createGraphics(Unknown\nSource)\n        at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(Unknown Source)\n        at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(Unknown Source)\n        at org.apache.batik.ext.awt.image.rendered.TileCacheRed.genRect(Unknown\nSource)\n        at\norg.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlockInPlace(Unknown\nSource)\n        at\norg.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlock(Unknown Source)\n        at\norg.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyToRasterByBlocks(Unknown\nSource)\n        at\norg.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyData(Unknown Source)\n        at org.apache.batik.ext.awt.image.rendered.TranslateRed.copyData(Unknown\nSource)\n        at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(Unknown Source)\n        at org.apache.batik.gvt.renderer.StaticRenderer.repaint(Unknown Source)\n        at org.apache.batik.gvt.renderer.StaticRenderer.repaint(Unknown Source)\n        at org.apache.batik.transcoder.image.ImageTranscoder.transcode(Unknown\nSource)\n        at org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(Unknown\nSource)\n        at org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(Unknown\nSource)\n        at org.apache.batik.apps.rasterizer.SVGConverter.transcode(Unknown Source)\n        at org.apache.batik.apps.rasterizer.SVGConverter.execute(Unknown Source)\n        at org.apache.batik.apps.rasterizer.Main.execute(Unknown Source)\n        at org.apache.batik.apps.rasterizer.Main.main(Unknown Source)\nConverting _image_d50840e109.svg to ./_image_d50840e109.png ... \nJava Result: 1\n\nBUILD SUCCESSFUL\n\nTotal time: 11 seconds\n\n\nBATIK DOWNLOADED VERSION:\n$ java -classpath batik-rasterizer.jar org.apache.batik.apps.rasterizer.Main\nsomewhere/_image_d50840e109.svg -d .\nAbout to transcode 1 SVG file(s)\n\nConverting _image_d50840e109.svg to ./_image_d50840e109.png ... Exception in\nthread \"main\" java.lang.InternalError: Can't connect to X11 window server using\n':0.0' as the value of the DISPLAY variable.\n        at sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)\n        at sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:134)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:141)\n        at\njava.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:62)\n        at java.awt.image.BufferedImage.createGraphics(BufferedImage.java:1041)\n        at org.apache.batik.ext.awt.image.GraphicsUtil.createGraphics(Unknown\nSource)\n        at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(Unknown Source)\n        at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(Unknown Source)\n        at org.apache.batik.ext.awt.image.rendered.TileCacheRed.genRect(Unknown\nSource)\n        at\norg.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlockInPlace(Unknown\nSource)\n        at\norg.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlock(Unknown Source)\n        at\norg.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyToRasterByBlocks(Unknown\nSource)\n        at\norg.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyData(Unknown Source)\n        at org.apache.batik.ext.awt.image.rendered.TranslateRed.copyData(Unknown\nSource)\n        at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(Unknown Source)\n        at org.apache.batik.gvt.renderer.StaticRenderer.repaint(Unknown Source)\n        at org.apache.batik.gvt.renderer.StaticRenderer.repaint(Unknown Source)\n        at org.apache.batik.transcoder.image.ImageTranscoder.transcode(Unknown\nSource)\n        at org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(Unknown\nSource)\n        at org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(Unknown\nSource)\n        at org.apache.batik.apps.rasterizer.SVGConverter.transcode(Unknown Source)\n        at org.apache.batik.apps.rasterizer.SVGConverter.execute(Unknown Source)\n        at org.apache.batik.apps.rasterizer.Main.execute(Unknown Source)\n        at org.apache.batik.apps.rasterizer.Main.main(Unknown Source)", "id": 59868, "time": "2004-06-25T10:20:09Z", "bug_id": 29803, "creation_time": "2004-06-25T10:20:09Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "rodot@credm.com", "attachment_id": null, "id": 59869, "time": "2004-06-25T13:27:48Z", "bug_id": 29803, "creation_time": "2004-06-25T13:27:48Z", "is_private": false, "text": "I need to pass \"-Djava.awt.headless=true\" to the java virtual machine in order\nto inform java we needn't X connection\n\nYou should add System.setProperty(\"java.awt.headless\", \"true\"); if rasterization\nnever need X11 server..."}, {"count": 2, "tags": [], "bug_id": 29803, "attachment_id": null, "id": 61784, "time": "2004-08-10T22:51:25Z", "creator": "deweese@apache.org", "creation_time": "2004-08-10T22:51:25Z", "is_private": false, "text": " rodot@credm.com is correct.  It will work in headless mode for JDK 1.4"}]