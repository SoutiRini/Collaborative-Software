[{"count": 0, "tags": [], "bug_id": 47295, "attachment_id": 23739, "id": 127543, "time": "2009-06-01T23:21:03Z", "creator": "kaigai@ak.jp.nec.com", "creation_time": "2009-06-01T23:21:03Z", "is_private": false, "text": "Created attachment 23739\nA patch to allow discretionary parameter order in mod_authn_dbd\n\nThis patch adds a two new directives (AuthDBDUserPWQueryFmt, AuthDBDUserRealmQueryFmt) on mod_authn_dbd.\n\nThese options allow to deploy various kind of query parameters (not only username, password and realm) in discretionary order.\nNeedless to say, you can use the existing directives, if here is no concerns.\n\nThis patch enables to apply mod_authn_dbd on the following cases also.\n\n1. Hardwired parameter order is not suitable for the database.\n\nSELECT md5(uname || ':' || %s || ':' upass) FROM uaccount WHERE uname = %s;\n\nIf we want to execute the query (the 1st %s should be realm, and the 2nd %s\nshould be username) for digest authentication, the hardwired parameter order\nis not suitable for the current AuthDBDUserRealmQuery option.\n\nThe new AuthDBDUserRealmQueryFmt allows to specify the order as follows:\n\nAuthDBDUserRealmQueryFmt \\\n    \"SELECT md5(uname || ':' || $(realm) || ':' upass) \\\n         FROM uaccount WHERE uname = $(username)\"\n\n2. Additional conditions more than username/password.\n\nWhen we want to restrict available users depending on remote address or\nother factors, the current directive does not support it.\n\nThis patch allows to put $(remote_addr) other than username, password and\nrealm, as a proof of the concept. It can be used to implement a user who\nis available only from local networks, for example."}]