[{"count": 0, "tags": [], "bug_id": 47928, "attachment_id": null, "id": 130787, "creation_time": "2009-10-01T15:31:39Z", "time": "2009-10-01T15:31:39Z", "creator": "billz@consultla.com", "text": "When mod_rewrite proxies a CONNECT request, it fully qualifies the substitution string.  The result is a failed connection to the originally requested server instead of the proxy server.\n\nTEST CASE:\ncurl -x http://myproxyserver.com:9080 https://mysslserver.com\n\nEXAMPLE APACHE CONFIG:\nListen 9080\nNameVirtualHost *:9080\n<VirtualHost *:9080>\n    ServerName myproxyserver.com\n    AllowCONNECT 8888\n    RewriteEngine On\n\n    RewriteCond %{REQUEST_METHOD} ^CONNECT$ [NC]\n    RewriteCond %{HTTP_HOST} ^mysslserver.com:443$\n    RewriteRule ^(.*)$ myqasslserver.com:8888 [P]\n</VirtualHost>\n\nRESULT:\nThe method fully_qualify_uri changes the substitution string from: \nmyqasslserver.com:8888\nto: \nhttp://mysslserver.com:443/myqasslserver.com:8888", "is_private": false}, {"count": 1, "tags": [], "bug_id": 47928, "is_private": false, "id": 130789, "attachment_id": 24329, "creator": "billz@consultla.com", "creation_time": "2009-10-01T15:44:19Z", "time": "2009-10-01T15:44:19Z", "text": "Created attachment 24329\nDo not fully qualify the substitution string for CONNECT method"}, {"count": 2, "tags": [], "bug_id": 47928, "is_private": false, "id": 130892, "attachment_id": null, "creator": "minfrin@sharp.fm", "creation_time": "2009-10-05T14:22:10Z", "time": "2009-10-05T14:22:10Z", "text": "Applied to httpd-trunk in r822004."}, {"count": 3, "tags": [], "creator": "billz@consultla.com", "attachment_id": null, "id": 131390, "time": "2009-10-26T09:56:11Z", "bug_id": 47928, "creation_time": "2009-10-26T09:56:11Z", "is_private": false, "text": "Is there a way to get this committed to the 2.2.x branch also?\n\nThat's what the patch was created against.\n\n(In reply to comment #2)\n> Applied to httpd-trunk in r822004."}, {"count": 4, "tags": [], "bug_id": 47928, "attachment_id": null, "id": 131393, "creation_time": "2009-10-26T13:19:13Z", "time": "2009-10-26T13:19:13Z", "creator": "rpluem@apache.org", "text": "(In reply to comment #3)\n> Is there a way to get this committed to the 2.2.x branch also?\n> \n\nSee http://svn.apache.org/viewvc?rev=829677&view=rev", "is_private": false}, {"count": 5, "tags": [], "bug_id": 47928, "attachment_id": null, "is_private": false, "id": 131595, "time": "2009-11-02T14:06:43Z", "creator": "sf@sfritsch.de", "creation_time": "2009-11-02T14:06:43Z", "text": "backported to 2.2.x in r832124, will be in 2.2.15"}]