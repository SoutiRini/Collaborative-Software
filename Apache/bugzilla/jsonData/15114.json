[{"count": 0, "tags": [], "text": "This is basically the same bug as #14648 for Apache 1.3. It is also in the old\nbug DB as PR#2074. \n\nThree things have to change:\n\n1) mod_rewrite has to run proxy rules in subrequests. This allows mod_include to\nwork with the proxy rules.\n2) mod_dir has to use ap_sub_req_lookup_file instead of ap_sub_req_lookup_uri.\nThe mod_rewrite change, will break mod_dir with out this change. Basically,\nusing _file instead of _uri avoids the rewrite rule entirely, allowing mod_dir\nto find the index file.\n3) But mod_dir still doesn't do the entirely right thing, because of bug #15112.\nSo apply that patch and it everything will work properly.", "is_private": false, "id": 27469, "creator": "cramer@webkist.com", "time": "2002-12-05T16:46:40Z", "bug_id": 15114, "creation_time": "2002-12-05T16:46:40Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 15114, "attachment_id": 4060, "id": 27470, "time": "2002-12-05T16:47:33Z", "creator": "cramer@webkist.com", "creation_time": "2002-12-05T16:47:33Z", "is_private": false, "text": "Created attachment 4060\nFix mod_rewrite proxy bug for mod_include"}, {"count": 2, "tags": [], "bug_id": 15114, "text": "Oh yea...and the code that adds the args to the subrequest when checking each\nfile has to go again if it's changed to use ap_sub_req_lookup_file. Otherwise a\nrequest like http://domain.org/foo/?bar=1 will fail. Granted, the original logic\n-- that the args could be relevant to decision of which index file to use -- is\ngood, but this seems like the lesser of two evils.", "id": 27471, "time": "2002-12-05T16:54:11Z", "creator": "cramer@webkist.com", "creation_time": "2002-12-05T16:54:11Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "text": "I'm going through the bug db to make sure patches are findable.  Please see \nhttp://httpd.apache.org/dev/patches.html\n", "id": 47798, "time": "2003-11-21T17:10:25Z", "bug_id": 15114, "creation_time": "2003-11-21T17:10:25Z", "is_private": false}, {"count": 4, "tags": [], "text": "Another solution to this problem is to utilize the proxy: moniker instead of \n[P} to invoke the proxy client.\n\n[P] as you have pointed out invokes the proxy client but does not continue with \nadditional includes on the invoked page.\n\nWheras the proxy: moniker is invoked in the file mapping handler which contiues \nwith additional ssi requests.\n\nExample:\nRewriteRule ^(.*) proxy:http://host/$1\n\nThis assumes that mod_proxy is installed and configured correctly!\n\nThe other benefit is that additional SSI requests will continue to be processed \non the calling page.\n\n", "attachment_id": null, "id": 48399, "creator": "jeremy.brown@rbc.com", "time": "2003-12-02T19:47:23Z", "bug_id": 15114, "creation_time": "2003-12-02T19:47:23Z", "is_private": false}, {"count": 5, "tags": [], "text": "Fixed in 2.1.\n\nThanks for the report and thanks for using Apache.", "attachment_id": null, "id": 50507, "creator": "nd@perlig.de", "time": "2004-01-14T00:37:52Z", "bug_id": 15114, "creation_time": "2004-01-14T00:37:52Z", "is_private": false}]