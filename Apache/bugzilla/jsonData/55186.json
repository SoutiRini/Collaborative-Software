[{"count": 0, "tags": [], "bug_id": 55186, "attachment_id": null, "text": "I configured useIPVHosts=true.\n&set up two hosts :\n<Host name=\"localhost\" appBase=\"webapps\" />\n<Host name=\"www.jm.com\" appBase=\"webapps2\" />\n&my pc has two ip: 10.10.4.48 and 192.168.56.1\n&HOSTS file is:\n~~~~~~~~~~~~~~~~~~\n127.0.0.1 localhost\n192.168.56.1 www.jm.com\n~~~~~~~~~~~~~~~~~~\n& the Host localhost has a app named examples. the other Host www.jm.com has a app named examples2.\n\nstart Tomcat,\nvisit http://www.jm.com:8080/examples2/test/ is ok. but i changed to visit \nhttp://localhost:8080/examples/test without restart tc, it didn't work.\nthen i traced the codes,i found that :\n~~~~~~~~~~~~~~~~~~~~~~~\n        if (connector.getUseIPVHosts()) {\n            serverName = req.localName(); //line 624\n            if (serverName.isNull()) {\n                // well, they did ask for it\n                res.action(ActionCode.REQ_LOCAL_NAME_ATTRIBUTE, null);\n            }\n        } else {\n            serverName = req.serverName();\n        }\n~~~~~~~~~~~~~~~~~~~~~~~\nat line 624 the value of serverName is still \"www.jm.com\" . it will still find  the Host www.jm.com to handle with the request.but this host doesn't have the examples app, so it can't make it.\n\nif i annotate the \"if condition\" , it works.\n~~~~~~~~~~~~~~~~~~~~~\nif (connector.getUseIPVHosts()) {\n            serverName = req.localName(); //line 624\n            //if (serverName.isNull()) { \n//annotate if , execute action every time.\n                // well, they did ask for it\n                res.action(ActionCode.REQ_LOCAL_NAME_ATTRIBUTE, null);\n            //}\n        } else {\n            serverName = req.serverName();\n        }\n~~~~~~~~~~~~~~~~~~~~", "id": 168242, "time": "2013-07-03T00:54:24Z", "creator": "jmwmj208@163.com", "creation_time": "2013-07-03T00:54:24Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "markt@apache.org", "is_private": false, "id": 168291, "time": "2013-07-05T13:39:35Z", "bug_id": 55186, "creation_time": "2013-07-05T13:39:35Z", "tags": [], "text": "Thanks for the report. This has been fixed in trunk and 7.0.x and will be included in 7.0.43 onwards."}]