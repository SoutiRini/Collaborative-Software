[{"count": 0, "tags": [], "text": "When encrypt xml documents large then 5MB \nusing org.apache.xml.security.encryption.XMLCipher \n\nException in thread \"main\" java.lang.StackOverflowError\n>         at org.apache.xerces.dom.ParentNode.internalRemoveChild(Unknown Source)\n>         at org.apache.xerces.dom.ParentNode.removeChild(Unknown Source)\n>         at org.apache.xml.security.encryption.XMLCipher.removeContent(Unknown So\n> urce)\n>         at org.apache.xml.security.encryption.XMLCipher.removeContent(Unknown So\n\nthen bag is in implementation : (recursive invocation)\n\n    private void removeContent(Node node) {\n        NodeList list = node.getChildNodes();\n        if (list.getLength() > 0) {\n            Node n = list.item(0);\n            if (null != n) {\n                n.getParentNode().removeChild(n);\n            }\n            removeContent(node);\n        }\n    }\n\n\nI'm sugesting change it, for example:\n\n    private void removeContent(Node node) {\n        NodeList list = node.getChildNodes();\n        while(list.getLength() > 0) {\n            Node n = list.item(0);\n            if (null != n) {\n                n.getParentNode().removeChild(n);\n            }\n        }\n    }", "is_private": false, "id": 99129, "creator": "mjablon@wp.pl", "time": "2007-02-08T11:48:38Z", "bug_id": 41573, "creation_time": "2007-02-08T11:48:38Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Fixed.", "is_private": false, "id": 99289, "creator": "sean.mullan@oracle.com", "time": "2007-02-12T11:27:14Z", "bug_id": 41573, "creation_time": "2007-02-12T11:27:14Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Closing old bugs. Fixed in 1.4.1", "is_private": false, "id": 108411, "creator": "sean.mullan@oracle.com", "time": "2007-09-19T12:29:44Z", "bug_id": 41573, "creation_time": "2007-09-19T12:29:44Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 41573, "attachment_id": null, "id": 113829, "creation_time": "2008-02-16T14:41:46Z", "time": "2008-02-16T14:41:46Z", "creator": "byby123452000@yahoo.com", "text": "removeContent doesn't work reliably in 1.4.1\nit does not remove all children.\n\nthe loop finishes to early\n\nI've found this buggy code\nprivate void removeContent(Node node) {\n        NodeList list = node.getChildNodes();\n        for (int i=0; i<list.getLength(); i++) {\n            Node n = list.item(i);\n            if (n != null) {\n                n.getParentNode().removeChild(n);\n            }\n        }\n    }\nexample: if you have two childs, the first is removed, getLength is changed, the\nsecond child isn't removed\n\nTry the suggestion from the first poster", "is_private": false}, {"count": 4, "tags": [], "creator": "sean.mullan@oracle.com", "attachment_id": null, "id": 113886, "time": "2008-02-19T07:01:33Z", "bug_id": 41573, "creation_time": "2008-02-19T07:01:33Z", "is_private": false, "text": "(In reply to comment #3)\n> removeContent doesn't work reliably in 1.4.1\n> it does not remove all children.\n\nThis is a dup of bug #42886, which will be fixed in 1.4.2.\n\n*** This bug has been marked as a duplicate of 42886 ***"}]