[{"count": 0, "tags": [], "creator": "ilyabo@gmail.com", "attachment_id": 25792, "id": 138589, "time": "2010-07-21T08:50:44Z", "bug_id": 49628, "creation_time": "2010-07-21T08:50:44Z", "is_private": false, "text": "Created attachment 25792\nThe simplest possible example project for which the exception can be reproduced\n\nWhen used within the simple applet below log4j throws a NoClassDefFoundException and can even prevent the applet from working in the browser _when opened from a website_ (it seems to work with no errors locally). See the attachment for the whole project:\n\npublic class MyApplet extends JApplet {\n\n  public static Logger logger = Logger.getLogger(MyApplet.class);\n\n  public MyApplet() {\n    logger.debug(\"MyApplet::constructor() start\");\n    JButton button = new JButton(\"Hello, world!\");\n    button.addActionListener(new ActionListener() {\n      @Override\n      public void actionPerformed(ActionEvent e) {\n        JOptionPane.showMessageDialog(MyApplet.this, \"Hi there!\");\n      }\n    });\n    add(button);\n    logger.debug(\"MyApplet::constructor() end\");\n  }\n\n  @Override\n  public void init() {\n    logger.debug(\"MyApplet.init()\");\n  }\n\n}\n\n\nlog4j:WARN Error during default initialization\njava.lang.NoClassDefFoundError: IllegalName: <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n\tat java.lang.ClassLoader.preDefineClass(Unknown Source)\n\tat java.lang.ClassLoader.defineClass(Unknown Source)\n\tat java.security.SecureClassLoader.defineClass(Unknown Source)\n\tat sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)\n\tat java.lang.ClassLoader.loadClass(Unknown Source)\n\tat java.lang.ClassLoader.loadClass(Unknown Source)\n\tat javax.xml.parsers.FactoryFinder.getProviderClass(Unknown Source)\n\tat javax.xml.parsers.FactoryFinder.newInstance(Unknown Source)\n\tat javax.xml.parsers.FactoryFinder.findJarServiceProvider(Unknown Source)\n\tat javax.xml.parsers.FactoryFinder.find(Unknown Source)\n\tat javax.xml.parsers.DocumentBuilderFactory.newInstance(Unknown Source)\n\tat org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:849)\n\tat org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:773)\n\tat org.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:483)\n\tat org.apache.log4j.LogManager.<clinit>(LogManager.java:127)\n\tat org.apache.log4j.Logger.getLogger(Logger.java:117)\n\tat MyApplet.<clinit>(MyApplet.java:12)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n\tat java.lang.reflect.Constructor.newInstance(Unknown Source)\n\tat java.lang.Class.newInstance0(Unknown Source)\n\tat java.lang.Class.newInstance(Unknown Source)\n\tat sun.plugin2.applet.Plugin2Manager$12.run(Unknown Source)\n\tat java.awt.event.InvocationEvent.dispatch(Unknown Source)\n\tat java.awt.EventQueue.dispatchEvent(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\n\tat java.awt.EventDispatchThread.run(Unknown Source)\nlog4j:WARN No appenders could be found for logger (MyApplet).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info."}, {"count": 1, "text": "I am closing the bug, because I realized that this problem is not log4j's fault and it's not only occurring when using log4j. There is a bug submitted for the JVM for the problem: http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6506467", "bug_id": 49628, "attachment_id": null, "id": 138590, "time": "2010-07-21T09:23:08Z", "creator": "ilyabo@gmail.com", "creation_time": "2010-07-21T09:23:08Z", "tags": [], "is_private": false}]