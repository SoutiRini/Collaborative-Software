[{"count": 0, "tags": [], "creator": "simon.litwan@wyona.com", "attachment_id": null, "id": 85202, "time": "2006-01-30T16:35:43Z", "bug_id": 38450, "creation_time": "2006-01-30T16:35:43Z", "is_private": false, "text": "if you create a document it gets its lastmodified entry. now if you call\nfor editing in the same second as it was created the last modified entry\nwon't get updated because the lastmodified entry just uses seconds and\nnot milliseconds. so for the cache the the fresh created document is\nstill the one with the newest lastmodified entry so the cache won't look\nfor some changes and delivers the outdated document.\n\na possible way to get around this would be to add\n\nPackages.java.lang.Thread.currentThread().sleep(1000);\n\nin the editDocument function of edit-document.js.\n\ndoes anyone have a better idea?\n\n\ncache           |     new    |     |    still    |      |   still   |   \n                |   doc 000  |--\u00ac  |   doc 000   |      |  doc 000  |\n----------------------------------------------------------------------   \ntimeline 000    |     010    |   | |     020     |      |   030     |\n----------------------------------------------------------------------\naction           create new doc  | request for edit       save doc\n                                 |\n                                 |\n                                 |\n                                 |\n                                 ------------------------ \n                                                         |\n                                                         V            \n                                               request some time later."}, {"count": 1, "tags": [], "creator": "simon.litwan@wyona.com", "attachment_id": 17547, "text": "Created attachment 17547\nworkaround fot this bug\n\nwaits before saving the doc untill it's in the next second.", "id": 85252, "time": "2006-01-31T14:05:58Z", "bug_id": 38450, "creation_time": "2006-01-31T14:05:58Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 38450, "text": "Thanks for the patch.\nI have one question: the patch uses \"active waiting\", that means the cpu load\nwill be high during the waiting period. Is there nothing like sleep() in flowscript?\n(Maybe an easier workaround would be to wait 1 second in your test before you\nclick the save button.)\n", "id": 85287, "time": "2006-02-01T09:36:39Z", "creator": "josias.thoeny@wyona.org", "creation_time": "2006-02-01T09:36:39Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "andreas@apache.org", "text": "(In reply to comment #2)\n> Thanks for the patch.\n> I have one question: the patch uses \"active waiting\", that means the cpu load\n> will be high during the waiting period. Is there nothing like sleep() in\nflowscript?\n\nI guess you can just create an object and invoke sleep() on it ...\n\n> (Maybe an easier workaround would be to wait 1 second in your test before you\n> click the save button.)\n \n+1, since the patch is also just a workaround.\n", "id": 85288, "time": "2006-02-01T09:43:46Z", "bug_id": 38450, "creation_time": "2006-02-01T09:43:46Z", "is_private": false, "attachment_id": null}]