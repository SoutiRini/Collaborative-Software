[{"count": 0, "tags": [], "bug_id": 48855, "attachment_id": null, "text": "We have a big problem in different tomcat 5, 6 \nJava servlet application invoked via apache mod_proxy return http 502 error, after a large number of request. \nIn this occasion the first crash signal a double stack, I think this arrives from a 2 different threads, \nsee \u201cFIRST STACK\u201d. After this error most of the request signal the error 502 and in the same moment in the catalina.out we find the second error see \u201cSECOND STACK\u201d.\nIf we try to call directly the tomcat that error don\u2019t appear, if we call the apache this appear.\nWe have synchronized the request.setHeader(\u2026) but nothing change, this error random comeback.\nthanks \nAristide Di Lauro\n\nMod_proxy configuration : \nProxyPass /BH/ http://machine:8081/BH/\nProxyPassReverse /BH/ http:// machine:8081/BH/\n\n-------------------------------\nFIRST STACK:\n-------------------------------\n\n\njava.lang.ArrayIndexOutOfBoundsException\njava.lang.ArrayIndexOutOfBoundsException\n\tat org.apache.tomcat.util.http.MimeHeaders.setValue(MimeHeaders.java:269)\n\tat org.apache.tomcat.util.http.MimeHeaders.getName(MimeHeaders.java:164)\n\tat org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1578)\n\tat org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1609)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:944)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:944)\n\tat org.apache.coyote.Response.action(Response.java:183)\n\tat org.apache.coyote.Response.action(Response.java:183)\n\tat org.apache.coyote.Response.sendHeaders(Response.java:379)\n\tat org.apache.coyote.Response.sendHeaders(Response.java:379)\n\tat org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:305)\n\tat org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:305)\n\tat org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:288)\n\tat org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:288)\n\tat org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:98)\n\tat org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:98)\n\tat sun.nio.cs.StreamEncoder$ConverterSE.implFlush(StreamEncoder.java:292)\n\tat sun.nio.cs.StreamEncoder$ConverterSE.implFlush(StreamEncoder.java:292)\n\tat sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:202)\n\tat sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:202)\n\tat java.io.OutputStreamWriter.flush(OutputStreamWriter.java:236)\n\tat java.io.OutputStreamWriter.flush(OutputStreamWriter.java:236)\n\tat java.io.PrintWriter.flush(PrintWriter.java:291)\n\tat java.io.PrintWriter.flush(PrintWriter.java:291)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.write(JS2Pckj.java:1194)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.write(JS2Pckj.java:1194)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.gestioneVisualizzazioneWAIT(JS2Pckj.java:216)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.gestioneVisualizzazioneWAIT(JS2Pckj.java:216)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.gestioneTemplateXML(JS2Pckj.java:192)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.gestioneTemplateXML(JS2Pckj.java:192)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.trattamentoStandard(JS2Pckj.java:295)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.trattamentoStandard(JS2Pckj.java:295)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.esegui(JS2Pckj.java:137)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.esegui(JS2Pckj.java:137)\n\tat bytesh.jsipert2.server.framework.BHJS2GestioneDellaRichiesta.eseguiRichiesta(BHJS2GestioneDellaRichiesta.java:290)\n\tat bytesh.jsipert2.server.framework.BHJS2GestioneDellaRichiesta.eseguiRichiesta(BHJS2GestioneDellaRichiesta.java:290)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScriptingJS2(JS2OrchestratorBus.java:123)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScriptingJS2(JS2OrchestratorBus.java:123)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScripting(JS2OrchestratorBus.java:40)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScripting(JS2OrchestratorBus.java:40)\n\tat bytesh.bh.framework.server.orchBus.ByteOrchestratorBus.eseguiRichiesta(ByteOrchestratorBus.java:83)\n\tat bytesh.bh.framework.server.orchBus.ByteOrchestratorBus.eseguiRichiesta(ByteOrchestratorBus.java:83)\n\tat bytesh.bh.framework.server.ExecuteRequest.startACTION(ExecuteRequest.java:584)\n\tat bytesh.bh.framework.server.ExecuteRequest.startACTION(ExecuteRequest.java:584)\n\tat bytesh.bh.framework.server.ExecuteRequest.gestioneACTION(ExecuteRequest.java:254)\n\tat bytesh.bh.framework.server.ExecuteRequest.gestioneACTION(ExecuteRequest.java:254)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:172)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:172)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:96)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:96)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:85)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:85)\n\tat bytesh.bh.framework.server.WebSipertServletBH.esecuzione(WebSipertServletBH.java:193)\n\tat bytesh.bh.framework.server.WebSipertServletBH.esecuzione(WebSipertServletBH.java:193)\n\tat bytesh.jsipert2.server.framework.WebSipertServletJSipert2.doGet(WebSipertServletJSipert2.java:87)\n\tat bytesh.jsipert2.server.framework.WebSipertServletJSipert2.doGet(WebSipertServletJSipert2.java:87)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat java.lang.Thread.run(Thread.java:811)\n\tat java.lang.Thread.run(Thread.java:811)\njava.lang.ArrayIndexOutOfBoundsException\njava.lang.ArrayIndexOutOfBoundsException\n\tat org.apache.tomcat.util.http.MimeHeaders.setValue(MimeHeaders.java:269)\n\tat org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1531)\n\tat org.apache.tomcat.util.http.MimeHeaders.setValue(MimeHeaders.java:269)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:944)\n\tat org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1531)\n\tat org.apache.coyote.Response.action(Response.java:181)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:944)\n\tat org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:566)\n\tat org.apache.coyote.Response.action(Response.java:181)\n\tat org.apache.coyote.Response.doWrite(Response.java:560)\n\tat org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:566)\n\tat org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:353)\n\tat org.apache.coyote.Response.doWrite(Response.java:560)\n\tat org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:434)\n\tat org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:353)\n\tat org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:387)\n\tat org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:434)\n\tat org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:370)\n\tat org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:387)\n\tat org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)\n\tat org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:370)\n\tat sun.nio.cs.StreamEncoder$ConverterSE.implClose(StreamEncoder.java:306)\n\tat org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)\n\tat sun.nio.cs.StreamEncoder.close(StreamEncoder.java:210)\n\tat sun.nio.cs.StreamEncoder$ConverterSE.implClose(StreamEncoder.java:306)\n\tat java.io.OutputStreamWriter.close(OutputStreamWriter.java:245)\n\tat sun.nio.cs.StreamEncoder.close(StreamEncoder.java:210)\n\tat java.io.PrintWriter.close(PrintWriter.java:308)\n\tat java.io.OutputStreamWriter.close(OutputStreamWriter.java:245)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.writeXml(JS2Pckj.java:1259)\n\tat java.io.PrintWriter.close(PrintWriter.java:308)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.esegui(JS2Pckj.java:172)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.writeXml(JS2Pckj.java:1259)\n\tat bytesh.jsipert2.server.framework.BHJS2GestioneDellaRichiesta.eseguiRichiesta(BHJS2GestioneDellaRichiesta.java:290)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.esegui(JS2Pckj.java:172)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScriptingJS2(JS2OrchestratorBus.java:123)\n\tat bytesh.jsipert2.server.framework.BHJS2GestioneDellaRichiesta.eseguiRichiesta(BHJS2GestioneDellaRichiesta.java:290)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScripting(JS2OrchestratorBus.java:40)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScriptingJS2(JS2OrchestratorBus.java:123)\n\tat bytesh.bh.framework.server.orchBus.ByteOrchestratorBus.eseguiRichiesta(ByteOrchestratorBus.java:83)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScripting(JS2OrchestratorBus.java:40)\n\tat bytesh.bh.framework.server.ExecuteRequest.startACTION(ExecuteRequest.java:584)\n\tat bytesh.bh.framework.server.orchBus.ByteOrchestratorBus.eseguiRichiesta(ByteOrchestratorBus.java:83)\n\tat bytesh.bh.framework.server.ExecuteRequest.gestioneACTION(ExecuteRequest.java:254)\n\tat bytesh.bh.framework.server.ExecuteRequest.startACTION(ExecuteRequest.java:584)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:172)\n\tat bytesh.bh.framework.server.ExecuteRequest.gestioneACTION(ExecuteRequest.java:254)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:96)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:172)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:85)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:96)\n\tat bytesh.bh.framework.server.WebSipertServletBH.esecuzione(WebSipertServletBH.java:193)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:85)\n\tat bytesh.jsipert2.server.framework.WebSipertServletJSipert2.doGet(WebSipertServletJSipert2.java:87)\n\tat bytesh.bh.framework.server.WebSipertServletBH.esecuzione(WebSipertServletBH.java:193)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n\tat bytesh.jsipert2.server.framework.WebSipertServletJSipert2.doGet(WebSipertServletJSipert2.java:87)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat java.lang.Thread.run(Thread.java:811)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat java.lang.Thread.run(Thread.java:811)\njava.lang.ArrayIndexOutOfBoundsException\n\tat org.apache.tomcat.util.http.MimeHeaders.setValue(MimeHeaders.java:269)\n\tat org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1531)\njava.lang.ArrayIndexOutOfBoundsException\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:944)\n\tat org.apache.tomcat.util.http.MimeHeaders.setValue(MimeHeaders.java:269)\n\tat org.apache.coyote.Response.action(Response.java:181)\n\tat org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1531)\n\tat org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:566)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:944)\n\tat org.apache.coyote.Response.doWrite(Response.java:560)\n\tat org.apache.coyote.Response.action(Response.java:181)\n\tat org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:353)\n\tat org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:566)\n\tat org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:434)\n\tat org.apache.coyote.Response.doWrite(Response.java:560)\n\tat org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:387)\n\tat org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:353)\n\tat org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:370)\n\tat org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:434)\n\tat org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)\n\tat org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:387)\n\tat sun.nio.cs.StreamEncoder$ConverterSE.implClose(StreamEncoder.java:306)\n\tat org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:370)\n\tat sun.nio.cs.StreamEncoder.close(StreamEncoder.java:210)\n\tat org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)\n\tat java.io.OutputStreamWriter.close(OutputStreamWriter.java:245)\n\tat sun.nio.cs.StreamEncoder$ConverterSE.implClose(StreamEncoder.java:306)\n\tat java.io.PrintWriter.close(PrintWriter.java:308)\n\tat sun.nio.cs.StreamEncoder.close(StreamEncoder.java:210)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.writeXml(JS2Pckj.java:1259)\n\tat java.io.OutputStreamWriter.close(OutputStreamWriter.java:245)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.esegui(JS2Pckj.java:172)\n\tat java.io.PrintWriter.close(PrintWriter.java:308)\n\tat bytesh.jsipert2.server.framework.BHJS2GestioneDellaRichiesta.eseguiRichiesta(BHJS2GestioneDellaRichiesta.java:290)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.writeXml(JS2Pckj.java:1259)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScriptingJS2(JS2OrchestratorBus.java:123)\n\tat bytesh.jsipert2.server.framework.pckj.JS2Pckj.esegui(JS2Pckj.java:172)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScripting(JS2OrchestratorBus.java:40)\n\tat bytesh.jsipert2.server.framework.BHJS2GestioneDellaRichiesta.eseguiRichiesta(BHJS2GestioneDellaRichiesta.java:290)\n\tat bytesh.bh.framework.server.orchBus.ByteOrchestratorBus.eseguiRichiesta(ByteOrchestratorBus.java:83)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScriptingJS2(JS2OrchestratorBus.java:123)\n\tat bytesh.bh.framework.server.ExecuteRequest.startACTION(ExecuteRequest.java:584)\n\tat bytesh.bh.framework.server.orchBus.action.JS2OrchestratorBus.startScripting(JS2OrchestratorBus.java:40)\n\tat bytesh.bh.framework.server.ExecuteRequest.gestioneACTION(ExecuteRequest.java:254)\n\tat bytesh.bh.framework.server.orchBus.ByteOrchestratorBus.eseguiRichiesta(ByteOrchestratorBus.java:83)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:172)\n\tat bytesh.bh.framework.server.ExecuteRequest.startACTION(ExecuteRequest.java:584)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:96)\n\tat bytesh.bh.framework.server.ExecuteRequest.gestioneACTION(ExecuteRequest.java:254)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:85)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:172)\n\tat bytesh.bh.framework.server.WebSipertServletBH.esecuzione(WebSipertServletBH.java:193)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:96)\n\tat bytesh.jsipert2.server.framework.WebSipertServletJSipert2.doGet(WebSipertServletJSipert2.java:87)\n\tat bytesh.bh.framework.server.ExecuteRequest.execute(ExecuteRequest.java:85)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n\tat bytesh.bh.framework.server.WebSipertServletBH.esecuzione(WebSipertServletBH.java:193)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat bytesh.jsipert2.server.framework.WebSipertServletJSipert2.doGet(WebSipertServletJSipert2.java:87)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)\n\tat java.lang.Thread.run(Thread.java:811)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat java.lang.Thread.run(Thread.java:811)\n\n-------------------------------\nSECOND STACK:\n-------------------------------\nMar 4, 2010 10:57:05 AM org.apache.catalina.connector.CoyoteAdapter service\nSEVERE: An exception or error occurred in the container during the request processing\njava.lang.ArrayIndexOutOfBoundsException\n\tat org.apache.tomcat.util.http.MimeHeaders.clear(MimeHeaders.java:130)\n\tat org.apache.coyote.Response.reset(Response.java:289)\n\tat org.apache.catalina.connector.Response.reset(Response.java:658)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat java.lang.Thread.run(Thread.java:811)\nMar 4, 2010 10:57:05 AM org.apache.coyote.http11.Http11Processor process\nSEVERE: Error finishing response\njava.lang.NullPointerException\n\tat org.apache.tomcat.util.http.MimeHeaders.setValue(MimeHeaders.java:267)\n\tat org.apache.coyote.http11.Http11Processor.prepareResponse(Http11Processor.java:1578)\n\tat org.apache.coyote.http11.Http11Processor.action(Http11Processor.java:944)\n\tat org.apache.coyote.Response.action(Response.java:181)\n\tat org.apache.coyote.http11.InternalOutputBuffer.endRequest(InternalOutputBuffer.java:379)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:889)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat java.lang.Thread.run(Thread.java:811)\nMar 4, 2010 10:57:05 AM org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler process\nSEVERE: Error reading request, ignored\njava.lang.NullPointerException\n\tat org.apache.tomcat.util.http.MimeHeaders.clear(MimeHeaders.java:130)\n\tat org.apache.coyote.Response.recycle(Response.java:579)\n\tat org.apache.coyote.http11.InternalOutputBuffer.nextRequest(InternalOutputBuffer.java:349)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:911)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\n\tat java.lang.Thread.run(Thread.java:811)", "id": 135041, "time": "2010-03-04T11:05:54Z", "creator": "a.dilauro@bytesh.com", "creation_time": "2010-03-04T11:05:54Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 48855, "attachment_id": null, "text": "Bugzilla is not a support forum. Please use the Tomcat users mailing list.\n\n> We have synchronized the request.setHeader(\u2026)\nA lot depends on how you did that and what the actual code is. In general, you must not access \"response\" object from several threads, or keep references to it beyond the request processing cycle, regardless of what methods of the request/response you are calling. E.g. your stacktraces are triggered by response.getWriter().write() and by response.reset() respectively. (reset() here is called to discard preceding output before showing an error page).\n\nThus far, there were several similar reports on users@, but the error was always in the application code, not in Tomcat. See e.g.\nhttp://marc.info/?t=126658414500001&r=1&w=2\nand other similar threads.\n\nIf you can provide some valid sample application that reproduces the issue, feel free to reopen it.", "id": 135043, "time": "2010-03-04T11:58:31Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-03-04T11:58:31Z", "is_private": false}]