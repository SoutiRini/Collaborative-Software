[{"count": 0, "attachment_id": null, "bug_id": 55561, "text": "Good evening,\n\nWhile migrating Sun Identity Manager 8.1 to Tomcat 7 found the next error when trying to access login page:\n\n---\n\nJul 3, 2013 12:53:24 PM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Servlet.service() for servlet [jsp] in context with path [/gdi] threw exception [Unable to compile class for JSP:\n\nAn error occurred at line: 68 in the jsp file: /includes/getLocale.jsp\nThe final local variable request cannot be assigned. It must be blank and not using a compound assignment\n65: }\n66: // Create a new \"request\" parameter to allow forms to properly handle\n67: // utf-8 characters\n68: request = BufferedRequest.wrap(request);\n69:\n70:\n71: // Defined here but used in getStyleSheet.jsp and userHeader.jsp to setup the\n\n---\n\nFinally, I realized that previous Tomcat versions had this signature for _jspService:\n\npublic void _jspService(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response) throws java.io.IOException, javax.servlet.ServletException;\n\nbut Tomcat 7 declares parameters as final:\n\npublic void _jspService(final javax.servlet.http.HttpServletRequest request,final javax.servlet.http.HttpServletResponse response) throws java.io.IOException, javax.servlet.ServletException\n\nI've been reading JSP 2.2 Maintenance Release 2 (http://download.oracle.com/otndocs/jcp/jsp-2.2-mrel-eval-oth-JSpec/), and at page 271 I've found than the method signature must be :\n\npublic void _jspService(javax.servlet.http.HttpServletRequest request,\njavax.servlet.http.HttpServletResponse response)\nthrows ServletException, IOException\n\nIs this a bug?, should it be corrected?\n\nCheers,\n\nPau.", "id": 170124, "time": "2013-09-16T14:22:44Z", "creator": "paudeveras@gmail.com", "creation_time": "2013-09-16T14:22:44Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 55561, "attachment_id": null, "id": 170128, "time": "2013-09-16T16:06:55Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2013-09-16T16:06:55Z", "is_private": false, "text": "\"request\", \"response\" etc. are provided by container, per chapter \"JSP.1.8.3 Implicit Objects\". You should not change the values of those.\n\nTrying to replace a \"request\" is short-sighted. You are overriding one place, but the same object is available through other APIs, e.g. PageContext.getRequest().\n\nIf you want to wrap a request, configure a Filter.\n\nFor a record, this change in Jasper was implemented in r1058102.\n\n> at page 271 I've found than the method signature must be :\n\nI do not see the fragment that you are citing at that page. I see it in chapter \"JSP.9.1.3 Implementation Flexibility\" page \"1-194\" (232 of 594).\n\nI read the code in that chapter as non-normative. It explicitly says \"An implementation may implement things differently\"."}]