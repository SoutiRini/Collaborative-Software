[{"count": 0, "attachment_id": null, "creator": "knst.kolinko@gmail.com", "is_private": false, "id": 175583, "time": "2014-06-01T23:59:27Z", "bug_id": 56582, "creation_time": "2014-06-01T23:59:27Z", "tags": [], "text": "As of now,\nAbstractHttp11Processor.action(ActionCode, Object)\nAbstractAjpProcessor.action(ActionCode, Object)\n\nare implemented as a chain of if/elseif going through every defined ActionCode.\n\nAs ActionCode is an enum starting with Tomcat 7, I think it would be better to reorganize the code to use switch(enum) construct."}, {"count": 1, "tags": [], "bug_id": 56582, "text": "Done for Tomcat 8 (r1599385 r1599393 r1599395), will be in 8.0.9.\n\nI plan to backport this change to Tomcat 7, as I think switch() behaves better for performance.\n\nOne possible error spotted thanks to IDE warning:\nDISPATCH_EXECUTE action code is not processed by AbstractAjpProcessor.\nI placed a FIXME comment there.\n\nThe fix is likely to copy the code from AbstractHttp11Processor.action():\n        case DISPATCH_EXECUTE: {\n            getEndpoint().executeNonBlockingDispatches(socketWrapper);\n            break;\n        }", "id": 175612, "time": "2014-06-03T00:22:32Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-03T00:22:32Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Done for Tomcat 7 (r1599505 r1599711) and will be in 7.0.55.\n\nI am ready to close this issue, but  DISPATCH_EXECUTE + AJP question for Tomcat 8 from Comment 1 is pending.", "is_private": false, "id": 175620, "creator": "knst.kolinko@gmail.com", "time": "2014-06-03T18:16:00Z", "bug_id": 56582, "creation_time": "2014-06-03T18:16:00Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 56582, "attachment_id": null, "id": 175621, "time": "2014-06-03T19:20:23Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-03T19:20:23Z", "is_private": false, "text": "(In reply to Konstantin Kolinko from comment #1)\n\nImplemented DISPATCH_EXECUTE action code for AJP connectors in Tomcat 8 by r1599752, will be in 8.0.9."}, {"count": 4, "tags": [], "bug_id": 56582, "text": "(In reply to Konstantin Kolinko from comment #1)\n> I plan to backport this change to Tomcat 7, as I think switch() behaves\n> better for performance.\n\n+1\n\nA tableswitch will be faster than a series of comparisons and jumps. If the set of cases is sufficiently sparse, it will degrade to a lookupswitch which is no slower than the old if/elseif implementation and may be a bit faster as lookupswitch is likely to be a highly-optimized JVM operation not requiring any JIT trickery.", "id": 175644, "time": "2014-06-05T00:56:19Z", "creator": "chris@christopherschultz.net", "creation_time": "2014-06-05T00:56:19Z", "is_private": false, "attachment_id": null}]