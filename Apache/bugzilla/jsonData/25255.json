[{"count": 0, "tags": [], "bug_id": 25255, "attachment_id": null, "id": 48599, "time": "2003-12-05T22:41:45Z", "creator": "caron@unidata.ucar.edu", "creation_time": "2003-12-05T22:41:45Z", "is_private": false, "text": "this is broken in 1.5.1, 1.5.4 and 1.6beta3\n\nif i use ant's <jar> task to create a manifest (internal or external), then \njava 1.4.2 (probably others) doesnt allow java -jar my.jar\n\ni get this error\n\n+ java -Xmx512m -jar netcdfAll.jar\nException in thread \"main\" java.lang.NoClassDefFoundError: \nucar/util/prefs/XMLStore\nat ucar.nc2.ui.ToolsUI.main(ToolsUI.java:761)\n\nbut with no other changes this works:\n\n+ java -Xmx512m -classpath \nnetcdfAll.jar;prefsAll.jar;units.jar;HTTPClient.jar;jdom.jar \nucar.nc2.ui.ToolsUI\n\ni can use the <exec> command with jdk's jar to get around this, so this works: \n\n<exec dir=\"${build.classes.dir}\" executable=\"jar\" output=\"dir.txt\">\n  <arg line=\"cfm ${dist.dir}/${jarAll.library} ${root.dir}/manifest.txt *\"/>\n</exec>\n\nbut this doesnt:\n\t\t\n<jar jarfile=\"${dist.dir}/${jarAll.library}\" index=\"true\" \nmanifest=\"${root.dir}/manifest.txt\">\n  <fileset dir=\"${build.classes.dir}\" />\n  <fileset dir=\"${build.dir}\" includes=\"README \"/>\n</jar>\n\nthe only thing i can see different is where the Created-By: line gets placed \nin the manifest, which seems to be rearranged by <jar> (ive extracted the \nmanifests from the jars):\n\n$ cat manifest.bad\nManifest-Version: 1.0\nCreated-By: Apache Ant 1.5.1\nMain-Class: ucar.nc2.ui.ToolsUI\nClass-Path: prefsAll.jar HTTPClient.jar units.jar jdom.jar\n\n$ cat manifest.good\nManifest-Version: 1.0\nClass-Path: prefsAll.jar HTTPClient.jar units.jar jdom.jar\nCreated-By: Apache Ant 1.5.1\nMain-Class: ucar.nc2.ui.ToolsUI"}, {"count": 1, "tags": [], "bug_id": 25255, "text": "Can you try without setting the index attribute to true.\nThis may be a duplicate of bug 14255", "id": 48731, "time": "2003-12-09T13:02:46Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-12-09T13:02:46Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "caron@unidata.ucar.edu", "text": "yes, the problem only happens when index=true.\n\nboth the jdk.exe and <jar> reorders for obscure reasons, but not obviously\neffect anything. the manifset spec doesnt seem to imply any ordering required.\n\nthanks.", "id": 63481, "attachment_id": null, "bug_id": 25255, "creation_time": "2004-09-13T17:13:08Z", "time": "2004-09-13T17:13:08Z", "is_private": false}, {"count": 3, "tags": [], "creator": "caron@unidata.ucar.edu", "text": "\n\n*** This bug has been marked as a duplicate of 14255 ***", "id": 63486, "attachment_id": null, "bug_id": 25255, "creation_time": "2004-09-13T18:30:42Z", "time": "2004-09-13T18:30:42Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 25255, "attachment_id": null, "id": 63489, "time": "2004-09-13T18:42:31Z", "creator": "caron@unidata.ucar.edu", "creation_time": "2004-09-13T18:42:31Z", "is_private": false, "text": "<indexjars> solves the problem (doc a little sparse though)\n\ndouble thanks!"}]