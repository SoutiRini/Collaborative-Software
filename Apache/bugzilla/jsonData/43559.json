[{"count": 0, "tags": [], "bug_id": 43559, "attachment_id": null, "text": "I try to use the ftp task accessing an AIX 5.3 FTP server.\nThe server is in french language.\nWhen I use the recentDateFormatConfig attribute, a NullPointerException is \nraised.\nIf I dont use it, nothing happens.\nHere is the task I execute :\n\t<target name=\"listp114p06e\">\n\t\t<ftp action=\"list\"\n\t\t\tserver=\"yyyyyy\"\n\t\t\tuserid=\"xxxxxx\"\n\t\t\tpassword=\"zzzzzz\"\n\t\t\tremotedir=\"Websphere/Envts/prod2/LogApps/Today\"\n\t\t\tdefaultDateFormatConfig=\"dd MMM yyyy\"\n\t\t\trecentDateFormatConfig=\"dd MMM HH:mm\"\n\t\t\tserverLanguageCodeConfig=\"fr\"\t\t             \n\t\t\tlisting=\"list.txt\">\n\t\t\t<fileset>\n\t\t\t\t<include name=\"**/*\"/>\n\t\t\t</fileset>\n\t\t</ftp>\n\t</target>\nHere the output in debug mode :\n\nApache Ant version 1.7.0 compiled on December 13 2006\nBuildfile: ..\\ant\\build.xml\nAdding reference: ant.PropertyHelper\nDetected Java version: 1.4 in: C:\\j2sdk1.4.2_06\\jre\nDetected OS: Windows XP\nAdding reference: ant.ComponentHelper\nSetting ro project property: ant.file -> C:\\apache-ant-1.7.0\n\\bin\\..\\ant\\build.xml\nAdding reference: ant.projectHelper\nAdding reference: ant.parsing.context\nAdding reference: ant.targets\nparsing buildfile C:\\apache-ant-1.7.0\\ant\\build.xml with URI = file:/C:/apache-\nant-1.7.0/ant/build.xml\nSetting ro project property: ant.project.name -> TestAntFTP\nAdding reference: TestAntFTP\nSetting ro project property: ant.file.TestAntFTP -> C:\\apache-ant-1.7.0\n\\ant\\build.xml\nProject base dir set to: C:\\apache-ant-1.7.0\\ant\n +Target:\n +Target: getp114p06e\n +Target: listp114p06e\nAttempting to create object of type org.apache.tools.ant.helper.DefaultExecutor\nAdding reference: ant.executor\nBuild sequence for target(s) `listp114p06e' is [listp114p06e]\nComplete build sequence is [listp114p06e, getp114p06e, ]\n\nlistp114p06e:\n[antlib:org.apache.tools.ant] Could not load definitions from resource \norg/apache/tools/ant/antlib.xml. It could not be found.\n      [ftp] Opening FTP connection to yyyyyy\n      [ftp] custom configuration\n      [ftp] custom config: system key = default (UNIX)\n      [ftp] custom config: default date format = dd MMM yyyy\n      [ftp] custom config: recent date format = dd MMM HH:mm\n      [ftp] custom config: server language code = fr\n      [ftp] connected\n      [ftp] logging in to FTP server\n      [ftp] login succeeded\n      [ftp] changing the remote directory\n      [ftp] listing files\nfileset: Setup scanner in dir null with patternSet{ includes: [**/*] excludes: \n[] }\nwill try to cd to IDS where a directory called ids exists\n      [ftp] disconnecting\n\nBUILD FAILED\nC:\\apache-ant-1.7.0\\ant\\build.xml:38: java.lang.NullPointerException\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute\n(DispatchUtils.java:115)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:357)\n        at org.apache.tools.ant.Target.performTasks(Target.java:385)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1329)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1298)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets\n(DefaultExecutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1181)\n        at org.apache.tools.ant.Main.runBuild(Main.java:698)\n        at org.apache.tools.ant.Main.startAnt(Main.java:199)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\nCaused by: java.lang.NullPointerException\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.checkRemoteSe\nnsitivity(FTP.java:583)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.forceRemoteSe\nnsitivityCheck(FTP.java:552)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.scan\n(FTP.java:231)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles\n(FTP.java:1570)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles\n(FTP.java:1683)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.execute(FTP.java:2373)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute\n(DispatchUtils.java:105)\n        ... 11 more\n--- Nested Exception ---\njava.lang.NullPointerException\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.checkRemoteSe\nnsitivity(FTP.java:583)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.forceRemoteSe\nnsitivityCheck(FTP.java:552)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.scan\n(FTP.java:231)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles\n(FTP.java:1570)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles\n(FTP.java:1683)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.execute(FTP.java:2373)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute\n(DispatchUtils.java:105)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:357)\n        at org.apache.tools.ant.Target.performTasks(Target.java:385)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1329)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1298)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets\n(DefaultExecutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1181)\n        at org.apache.tools.ant.Main.runBuild(Main.java:698)\n        at org.apache.tools.ant.Main.startAnt(Main.java:199)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\n\nTotal time: 1 second\n\nI installed the libraries commons-net-1.4.1.jar and jakarta-oro-2.0.8.jar in \nANT_HOME/lib.\n\nHere is what I get when I use the FTP commands :\nftp> cd Websphere/Envts/prod2/LogApps/Today\n250 Commande CWD r\u00daussie.\nftp> pwd\n257 \"/appli2/was/Websphere/Envts/prod2/LogApps/Today\" est un r\u00dapertoire en cours\n.\nftp> ls -l\n200 Commande PORT r\u00daussie.\n150 Ouverture de la connexion de donn\u00daes pour /bin/ls.\n8 total\ndrwxr-xr-x   2 wasadmin wasadmin       4096 05 oct 09:30 ids\ndrwxr-xr-x   2 wasadmin wasadmin        256 04 oct 10:35 isu\ndrwxr-xr-x   3 wasadmin wasadmin        256 26 sep 09:50 nci\ndrwxr-xr-x   3 wasadmin wasadmin        256 12 sep 15:50 nco\ndrwxr-xr-x   2 wasadmin wasadmin        256 01 oct 09:02 nhb\ndrwxr-xr-x   2 wasadmin wasadmin        256 26 jul 07:35 niw\ndrwxr-xr-x   3 wasadmin wasadmin        256 25 jun 20:58 nsp\n226 Transfert termin\u00da.\nftp : 443 octets re\u00e7us en 0,00 secondes \u00e0 443000,00 Ko/sec.\n\nAs you can see the date format is \"dd MMM HH:mm\".\n\nThanks.", "id": 109012, "time": "2007-10-05T01:37:22Z", "creator": "franck_perrin14@yahoo.fr", "creation_time": "2007-10-05T01:37:22Z", "is_private": false}, {"count": 1, "tags": [], "creator": "franck_perrin14@yahoo.fr", "text": "Actually, there is no bug.\nThe problem was the month abbreviations used on the server in file timestamp dates.\nI resolved the problem, setting the shortMonthNamesConfig attribute to\n\"jan|f\\u00e9v|mar|avr|mai|jun|jul|ao\\u00fb|sep|oct|nov|d\\u00e9c\".", "id": 109177, "time": "2007-10-09T14:04:53Z", "bug_id": 43559, "creation_time": "2007-10-09T14:04:53Z", "is_private": false, "attachment_id": null}]