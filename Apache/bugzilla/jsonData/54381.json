[{"count": 0, "tags": [], "bug_id": 54381, "attachment_id": null, "id": 164444, "time": "2013-01-07T19:44:37Z", "creator": "david.berkman@grenadefish.net", "creation_time": "2013-01-07T19:44:37Z", "is_private": false, "text": "The tomcat websocket api now allows the send of a Ping frame by the server (as of 7.0.33), via WsOutbound, but never reports the receipt of a Pong. See StreamInbound in the onData() method...\n\n                } else if (opCode == Constants.OPCODE_PONG) {\n                    // NO-OP\n                }\n\nAs the intended use of Pings is for heartbeat messages, allowing a Ping without informing the server extension of the returned Pong leaves out half the utility.\n\nI would suggest these changes to StreamInbound as a fix...\n\n1) In the onData() method...\n\n                } else if (opCode == Constants.OPCODE_PONG) {\n                    onPong(frame.getPayLoad());\n                }\n\n2) Add a method onPong (ByteBuffer buffer)...\n\n    protected void onPong(ByteBuffer buffer) {\n        // NO-OP\n    }\n\n...which implementations may now override to handle Pong receipt and heartbeat logic. This is necessary as onData() is marked final, so there's no alternate workaround."}, {"count": 1, "text": "Thanks for the report. Fixed in trunk and 7.0.x and will be included in 7.0.35 onwards.\n\nThe patch was a little more complex to take account of the class loader issues fixed since 7.0.33.", "bug_id": 54381, "attachment_id": null, "id": 164499, "time": "2013-01-08T21:11:13Z", "creator": "markt@apache.org", "creation_time": "2013-01-08T21:11:13Z", "tags": [], "is_private": false}]