[{"count": 0, "tags": [], "creator": "clwatson@Celestica.com", "attachment_id": null, "id": 9533, "time": "2002-01-10T13:42:49Z", "bug_id": 5795, "creation_time": "2002-01-10T13:42:49Z", "is_private": false, "text": "I am using Tomcat in a clustered Sun E10000 (E10K). I run an Apache/Tomcat \ninstance on each logical server with one or more logical servers running on a \ngiven node on the E10K. As a result, a node will be associated with a number of \nIP addresses, with a subset of those IPs associated with a logical server. I \nneed to be able to bind the Tomcat Startup / Shutdown with a given IP or set of \nIPs. I was able to exploit an undocumented 'inet' parameter in the earlier \nTomcat 3 code and hack org.apache.tomcat.task.StopTomcat.java to achieve this, \nbut the structure is completely different for Catalina.\n\nThe modifications to Catalina for this enhancement would include:\n---------------\n1) Add an 'inet' (or equivalent) parameter to the Server tag in server.xml\n\n<Server inet=\"myserver.com\" port=\"8005\" shutdown=\"SHUTDOWN\" debug=\"0\">\n\n2) Change org.apache.catalina.core.StandardServer.java line 276-8\n\n            serverSocket =\n                new ServerSocket(port, 1,\n                                 InetAddress.getByName(\"127.0.0.1\"));\n\nto incorporate the inet address defined in the Server tag from server.xml and \nuse \"127.0.0.1\" as the default value if it is not defined.\n\n3) Change org.apache.catalina.startup.Catalina.java line 826\n\n          Socket socket = new Socket(\"127.0.0.1\", server.getPort());\n\nto incorporate the inet address define in the Server tag from server.xml and \nuse \"127.0.0.1\" as the default value if it is not defined.\n\n---------\n\nIdeally, I would like to be able to bind a set of IPs to Tomcat 4, but the \nSocket I/O implementation in java lacks the accept() method available in C to \ndo this. Since I use an Apache front end, all communication to Catalina is over \none IP anyway."}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "This sounds like a good idea. I'll add it to the 4.0.2-todo.", "id": 9874, "time": "2002-01-24T18:47:32Z", "bug_id": 5795, "creation_time": "2002-01-24T18:47:32Z", "is_private": false}, {"count": 2, "tags": [], "text": "This was implemented in 7.0.x.", "is_private": false, "id": 142655, "creation_time": "2010-12-13T14:33:42Z", "time": "2010-12-13T14:33:42Z", "creator": "markt@apache.org", "bug_id": 5795, "attachment_id": null}]