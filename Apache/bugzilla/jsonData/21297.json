[{"count": 0, "tags": [], "creator": "PeterMayne@ap.spherion.com", "attachment_id": null, "id": 39904, "time": "2003-07-03T01:37:00Z", "bug_id": 21297, "creation_time": "2003-07-03T01:37:00Z", "is_private": false, "text": "If an HTTP request containing a header that is continued on more than one line\nusing leading whitespace is received by isapi_redirector2.dll via IIS, the\nheaders are parsed incorrectly. This has also been tested using HTTP/1.1 and on\nWindows XP.\n\nSample JSP:\n\n<html>\n<body>\n<pre>\n<%\nfor(java.util.Enumeration names = request.getHeaderNames();\nnames.hasMoreElements();)\n{\n\tString name = (String)names.nextElement();\n\tout.write(\"[\" + name + \"] = [\" + request.getHeader(name) + \"]\");\n\tout.write(\"\\n\");\n}\n%>\n</pre>\n</body>\n</html>\n\nSample HHTP request:\n\nGET /examples/bug.jsp HTTP/1.0\nHost: localhost\nSOAPAction: \"ebXML\"\nContent-Type: multipart/related; type=\"text/xml\"; start=\"<24480816.1056342917752>\"; \n\tboundary=28258744.1056342917762\nMessage-ID: 3736219.105634291777\nConnection: close\n\n\nSample correct output when sent direct to Tomcat:\n\n[host] = [localhost]\n[soapaction] = [\"ebXML\"]\n[content-type] = [multipart/related; type=\"text/xml\";\nstart=\"<24480816.1056342917752>\"; boundary=28258744.1056342917762]\n[message-id] = [3736219.105634291777]\n[connection] = [close]\n\nSample incorrect output when sent to IIS/isapi_redirector2.dll:\n\n[connection] = [close]\n[host] = [localhost]\n[content-type] = [multipart/related; type=\"text/xml\";\nstart=\"<24480816.1056342917752>\"; ]\n[soapaction] = [\"ebXML\"]\n[       boundary=28258744.1056342917762\nmessage-id] = [3736219.105634291777]\n[content-length] = [0]"}, {"count": 1, "tags": [], "creator": "PeterMayne@ap.spherion.com", "attachment_id": null, "id": 39905, "time": "2003-07-03T01:42:42Z", "bug_id": 21297, "creation_time": "2003-07-03T01:42:42Z", "is_private": false, "text": "Note that the displayed value of \"content-type\" in each sample output is wrapped\ndue to the input textarea size. The header name of the continued header in the\nincorrect sample output contains a newline."}, {"count": 2, "tags": [], "creator": "william.barker@wilshire.com", "text": "Your example works perfectly with Apache & mod_jk on Solaris.  I don't \n(personally) have access to an IIS server to continue investigating.  If it was \non one of my systems, the first thing I would try is to write a simple ASP page \nthat does the same thing, to see if the problem is with IIS's ability to parse \nheaders.  If the ASP page works as expected, then you may have to get the \nsource, and add extra logging statements to resolve it.  If the ASP page \ndoesn't work as expected, then you can either complain to MS, or use Apache \ninstead.", "id": 39907, "time": "2003-07-03T04:30:51Z", "bug_id": 21297, "creation_time": "2003-07-03T04:30:51Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "PeterMayne@ap.spherion.com", "attachment_id": null, "id": 39908, "time": "2003-07-03T05:47:19Z", "bug_id": 21297, "creation_time": "2003-07-03T05:47:19Z", "is_private": false, "text": "You're right, I should have tried that. I wrote an ASP that does the same thing,\nsent the same HTTP request to the ASP, and the ASP output shows the same\nproblem, so it appears to be an IIS problem. Sigh."}]