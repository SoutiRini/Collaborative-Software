[{"count": 0, "tags": [], "bug_id": 37048, "text": "The error resulted from the space not being found so end = -1.\nFILE: pubs/default/lenya/content/search/search-and-results.xsp\nLINE# 515\nADD: the bounds checking code\n\n                          if(slfield.length() &gt; excerptOffset){\n                             int start = 0;\n                             int end = excerptOffset;\n                             int half = excerptOffset/2;\n                             if(first &lt; half){\n                                end = tmphtmlbody.indexOf(' ', excerptOffset);\n                             }else{\n                                start = tmphtmlbody.indexOf(' ', first - half);\n                                end = tmphtmlbody.indexOf(' ', start +\nexcerptOffset);\n                             }\n//BEGIN: bounds checking (prevents StringIndexOutOfBounds if end = -1)\n                            int tmphtmlbodylength = tmphtmlbody.length();\n                            if(start &gt; tmphtmlbodylength) start =\ntmphtmlbodylength - excerptOffset;\n                            if(start &lt; 0) start = 0;\n                            if(end &lt; start) end = start + excerptOffset;\n                            if(end &gt; tmphtmlbodylength) end = tmphtmlbodylength;\n//END: bounds checking\n                             tmphtmlbody = tmphtmlbody.substring(start, end);\n                          }", "id": 81048, "time": "2005-10-12T16:40:49Z", "creator": "solprovider@gmail.com", "creation_time": "2005-10-12T16:40:49Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 37048, "attachment_id": null, "id": 100779, "time": "2007-03-21T22:06:10Z", "creator": "agallardo@agsoftware.dnsalias.com", "creation_time": "2007-03-21T22:06:10Z", "is_private": false, "text": "Would you provide a patch?"}]