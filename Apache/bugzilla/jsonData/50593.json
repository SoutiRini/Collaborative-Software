[{"count": 0, "tags": [], "bug_id": 50593, "attachment_id": 26492, "id": 143363, "time": "2011-01-15T17:20:02Z", "creator": "adelmelle@apache.org", "creation_time": "2011-01-15T17:20:02Z", "is_private": false, "text": "Created attachment 26492\ndiff of the affected classes\n\nAttached patch mostly adds type safety to all Collections used in the area package internally, simplifies some for-loops, eliminates redundant casts and (un)boxing...\n\nReason why it's posted as a patch is that it concerns en entire package. If I judge correctly, the only effect should be that after the patch, most of the 'unsafe operation' warnings shift to other packages. The ones remaining are due to operations on external 'unsafe' Collections.\n\nMost significant impact is likely the change in method signature for the Resolvable interface. Not sure if that is being used by extensions...(?)"}, {"count": 1, "tags": [], "text": "\nNo objections, I assumed, so I went ahead and committed in r1062901 ( http://svn.apache.org/viewvc?rev=1062901&view=rev ).", "attachment_id": null, "id": 143597, "creator": "adelmelle@apache.org", "time": "2011-01-24T13:14:19Z", "bug_id": 50593, "creation_time": "2011-01-24T13:14:19Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 50593, "attachment_id": null, "text": "Andreas,\n\nthis commit causes a IndexOutOfBoundsException, when there are unresolved bookmark references:\n\njava.lang.IndexOutOfBoundsException: Index: 0\n\tat java.util.Collections$EmptyList.get(Collections.java:2970)\n\tat org.apache.fop.area.BookmarkData.resolveIDRef(BookmarkData.java:225)\n\tat org.apache.fop.area.BookmarkData.resolveIDRef(BookmarkData.java:233)\n\tat org.apache.fop.area.AreaTreeHandler.addOffDocumentItem(AreaTreeHandler.java:340)\n\tat org.apache.fop.area.AreaTreeHandler.endDocument(AreaTreeHandler.java:311)\n\tat org.apache.fop.fo.FOTreeBuilder.endDocument(FOTreeBuilder.java:164)\n\tat org.apache.xalan.transformer.TransformerIdentityImpl.endDocument(TransformerIdentityImpl.java:963)\n\tat org.apache.xml.serializer.TreeWalker.traverse(TreeWalker.java:176)\n\tat org.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:390)\n\nBefore your commit, a simple warning was displayed in console: \"WARNUNG: Bookmarks: Unresolved ID reference 'xyz' found.\"\n\nI'm attaching a simple test case which reproduces the error.", "id": 145219, "time": "2011-03-23T17:06:24Z", "creator": "matthias8283@gmx.at", "creation_time": "2011-03-23T17:06:24Z", "is_private": false}, {"count": 3, "tags": [], "text": "Created attachment 26794\nTestcase\n\nTestcase for reproducing the previously mentioned exception.", "attachment_id": 26794, "id": 145220, "creator": "matthias8283@gmx.at", "time": "2011-03-23T17:07:40Z", "bug_id": 50593, "creation_time": "2011-03-23T17:07:40Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 50593, "attachment_id": null, "is_private": false, "id": 145224, "time": "2011-03-23T17:36:57Z", "creator": "adelmelle@apache.org", "creation_time": "2011-03-23T17:36:57Z", "text": "(In reply to comment #2)\n> \n> this commit causes a IndexOutOfBoundsException, when there are unresolved\n> bookmark references:\n> \n> java.lang.IndexOutOfBoundsException: Index: 0\n<snip /> \n> Before your commit, a simple warning was displayed in console: \"WARNUNG:\n> Bookmarks: Unresolved ID reference 'xyz' found.\"\n\nA small oversight: since IDTracker.getPageViewportsContaining... now returns an empty list instead of null when an ID reference is not found, AreaTreeHandler needs an addition to the not-null check on line 339. Add '&& !pageVPList.isEmpty()' for an immediate fix. I will commit this to trunk soon, including the testcase."}, {"count": 5, "tags": [], "text": "\nNote: adding this test to our layoutengine test suite, I noticed that a corresponding update was required in the IFSerializer, which before did not got tested with a bookmark pointing to a non-existing location.\n\nAt any rate, fixed in r1085824 (see: http://svn.apache.org/viewvc?rev=1085824&view=rev)\n\nThanks for reporting!", "attachment_id": null, "id": 145302, "creator": "adelmelle@apache.org", "time": "2011-03-26T19:10:43Z", "bug_id": 50593, "creation_time": "2011-03-26T19:10:43Z", "is_private": false}, {"count": 6, "tags": [], "text": "batch transition to closed; if someone wishes to restore one of these to resolved in order to perform a verification step, then feel free to do so", "attachment_id": null, "id": 155494, "creator": "gadams@apache.org", "time": "2012-04-01T06:19:04Z", "bug_id": 50593, "creation_time": "2012-04-01T06:19:04Z", "is_private": false}]