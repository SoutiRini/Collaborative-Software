[{"count": 0, "tags": [], "bug_id": 60682, "attachment_id": null, "id": 196670, "time": "2017-02-02T16:59:57Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-02T16:59:57Z", "is_private": false, "text": "My script is working absolutely fine on 2.13 but doesn't work on 3.1 Its not doing the re-directs correctly during authorization and subsequent requests are failing with 401 errors. Let me know the debug information you need to help fix this issue."}, {"count": 1, "tags": [], "bug_id": 60682, "text": "Created attachment 34712\nresults and other debug information", "id": 196685, "time": "2017-02-03T15:07:51Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-03T15:07:51Z", "is_private": false, "attachment_id": 34712}, {"count": 2, "text": "Could you show the errors in more details ?\nShow every tab of the red query.\nAre the URLs of your test plan accessible from anybody on Internet ?\n\n\nLogs show nothing useful, maybe you can add to user.properties:\nlog_level.org.apache.http=DEBUG\n\nRun your plan again for both versions and provide jmeter.log for each ?\nThanks", "bug_id": 60682, "attachment_id": null, "id": 196686, "time": "2017-02-03T16:06:52Z", "creator": "support@ubikloadpack.com", "creation_time": "2017-02-03T16:06:52Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "amar.darisa@gmail.com", "is_private": false, "id": 196689, "attachment_id": 34713, "bug_id": 60682, "creation_time": "2017-02-03T16:25:58Z", "time": "2017-02-03T16:25:58Z", "text": "Created attachment 34713\nwith DEBUG enabled\n\nUnfortunately those servers are not accessible on the public internet. I can show the scenario on a screen share session or i can take a video of my screen with all the tabs and post it later, if required. I have attached logs with DEBUG turned on. Please have a look and see if there is anything else i could add to make this debugging faster. Thank you !"}, {"count": 4, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Hello\nI think your bug is a duplicate of Bug 60575.\n\nI see an additional header for redirected gzt is sent (\"Content-Length: 134\").\n\nCould you try nightly build ?:\n\nhttp://jmeter.apache.org/nightly.html\n\nIf issue persists ,please reopen . Otherwise give us your feedback on this one.\n\nThank you\n\n*** This bug has been marked as a duplicate of bug 60575 ***", "id": 196725, "time": "2017-02-04T20:52:50Z", "bug_id": 60682, "creation_time": "2017-02-04T20:52:50Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 60682, "attachment_id": null, "id": 196751, "time": "2017-02-06T11:43:49Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-06T11:43:49Z", "is_private": false, "text": "I have tried it again with nightly build, but the request is still failing. I still see the \"Content-Length: 134\" in the redirected request."}, {"count": 6, "tags": [], "creator": "felix.schumacher@internetallee.de", "attachment_id": 34718, "text": "Created attachment 34718\nDon't use a body on a GET request, that is send on redirect\n\nCould you test the patch and see, if it helps?", "id": 196757, "time": "2017-02-06T14:23:09Z", "bug_id": 60682, "creation_time": "2017-02-06T14:23:09Z", "is_private": false}, {"count": 7, "tags": [], "text": "Could you please explain how to apply the patch please. I have looked for HTTPHC4Impl.java file but couldn't find it.", "is_private": false, "id": 196761, "creator": "amar.darisa@gmail.com", "time": "2017-02-06T14:54:54Z", "bug_id": 60682, "creation_time": "2017-02-06T14:54:54Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "support@ubikloadpack.com", "is_private": false, "id": 196767, "attachment_id": null, "bug_id": 60682, "creation_time": "2017-02-06T16:17:34Z", "time": "2017-02-06T16:17:34Z", "text": "(In reply to Amar from comment #7)\n> Could you please explain how to apply the patch please. I have looked for\n> HTTPHC4Impl.java file but couldn't find it.\n\nA new version is available in nightly build:\nhttps://builds.apache.org/job/JMeter-trunk/5804/\n\nCan you test it and give your feedback ?\nThanks"}, {"count": 9, "tags": [], "creator": "amar.darisa@gmail.com", "text": "There is definitely a change in behaviour in this new nightly build but its didn't seem to fix the full problem yet. It somehow not doing the further redirect(3rd redirect) successfully like in 2.13 version.\n\nPlease check the attachment and suggest next steps.", "id": 196769, "time": "2017-02-06T16:53:22Z", "bug_id": 60682, "creation_time": "2017-02-06T16:53:22Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "creator": "amar.darisa@gmail.com", "text": "Created attachment 34721\nlast redirect missing compared to 2.13 version", "id": 196770, "time": "2017-02-06T16:54:28Z", "bug_id": 60682, "creation_time": "2017-02-06T16:54:28Z", "is_private": false, "attachment_id": 34721}, {"count": 11, "tags": [], "creator": "support@ubikloadpack.com", "text": "(In reply to Amar from comment #10)\n> Created attachment 34721 [details]\n> last redirect missing compared to 2.13 version\n\nHello,\nPlease put both JMeter in debug as explained earlier (log_level.org.apache.http=DEBUG) and provide the log files for both runs 2.13 and 3.2-nightly\nScreenshot are incomplete and hard to use.\nThank you", "id": 196771, "time": "2017-02-06T16:56:31Z", "bug_id": 60682, "creation_time": "2017-02-06T16:56:31Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 60682, "attachment_id": 34722, "id": 196772, "time": "2017-02-06T17:11:43Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-06T17:11:43Z", "is_private": false, "text": "Created attachment 34722\nlog file from 2.13 version\n\nI don't see jmeter.log in the nightly version. Most likely another bug or something but i am attaching log file from 2.13 version now"}, {"count": 13, "attachment_id": null, "creator": "support@ubikloadpack.com", "text": "(In reply to Amar from comment #12)\n> Created attachment 34722 [details]\n> log file from 2.13 version\n> \n> I don't see jmeter.log in the nightly version. Most likely another bug or\n> something but i am attaching log file from 2.13 version now\n\nIt's not a bug, logging management has changed yesterday (JMeter migrated to log4j2 and slf4j).\n\nCan you edit log4j2.xml and uncomment:\n<!-- <Logger name=\"org.apache.http\" level=\"debug\" /> -->\n\nRegards", "id": 196773, "time": "2017-02-06T17:19:19Z", "bug_id": 60682, "creation_time": "2017-02-06T17:19:19Z", "tags": [], "is_private": false}, {"count": 14, "text": "Created attachment 34723\nstill log not getting generated.\n\nPlease check if i enabled the logging right.", "bug_id": 60682, "attachment_id": 34723, "id": 196774, "time": "2017-02-06T17:42:22Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-06T17:42:22Z", "tags": [], "is_private": false}, {"count": 15, "tags": [], "bug_id": 60682, "is_private": false, "text": "(In reply to Amar from comment #14)\n> Created attachment 34723 [details]\n> still log not getting generated.\n> \n> Please check if i enabled the logging right.\n\nRemove the line with error level please", "id": 196775, "time": "2017-02-06T17:54:05Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-06T17:54:05Z", "attachment_id": null}, {"count": 16, "tags": [], "bug_id": 60682, "attachment_id": 34724, "id": 196781, "time": "2017-02-06T19:31:43Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-06T19:31:43Z", "is_private": false, "text": "Created attachment 34724\nI removed that line but still no log file getting created"}, {"count": 17, "attachment_id": 34724, "creator": "support@ubikloadpack.com", "is_private": false, "id": 196782, "time": "2017-02-06T19:42:33Z", "bug_id": 60682, "creation_time": "2017-02-06T19:42:33Z", "tags": [], "text": "Comment on attachment 34724\nI removed that line but still no log file getting created\n\nI don't understand , I've just tested now and it works for me\nHow do you start JMeter ?"}, {"count": 18, "text": "I double click ApacheJMeter.jar file to start jMeter", "bug_id": 60682, "attachment_id": null, "id": 196783, "time": "2017-02-06T19:57:29Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-06T19:57:29Z", "tags": [], "is_private": false}, {"count": 19, "tags": [], "creator": "support@ubikloadpack.com", "attachment_id": null, "is_private": false, "id": 196784, "time": "2017-02-06T20:06:56Z", "bug_id": 60682, "creation_time": "2017-02-06T20:06:56Z", "text": "(In reply to Amar from comment #18)\n> I double click ApacheJMeter.jar file to start jMeter\n\nIt's not the correct way to run it.\nRun either jmeter.sh if you're on Linux or jmeter.bat if you're on windows"}, {"count": 20, "tags": [], "bug_id": 60682, "is_private": false, "text": "It shows me this when i started it with jmeter.sh . Something related to loading class\n\n\nMacBook-Pro-2:bin Amar$ ./jmeter.sh \nSLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\n================================================================================\nDon't use GUI mode for load testing, only for Test creation and Test debugging !\nFor load testing, use NON GUI Mode:\n   jmeter -n -t [jmx file] -l [results file] -e -o [Path to output folder])\n& adapt Java Heap to your test requirements:\n   Modify HEAP=\"-Xms512m -Xmx512m\" in the JMeter batch file\n==========================================", "id": 196785, "time": "2017-02-06T20:12:32Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-06T20:12:32Z", "attachment_id": null}, {"count": 21, "attachment_id": null, "creator": "support@ubikloadpack.com", "text": "(In reply to Amar from comment #20)\n> It shows me this when i started it with jmeter.sh . Something related to\n> loading class\n> \n> \n> MacBook-Pro-2:bin Amar$ ./jmeter.sh \n> SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\n> SLF4J: Defaulting to no-operation (NOP) logger implementation\n> SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further\n> details.\n> =============================================================================\n> ===\n> Don't use GUI mode for load testing, only for Test creation and Test\n> debugging !\n> For load testing, use NON GUI Mode:\n>    jmeter -n -t [jmx file] -l [results file] -e -o [Path to output folder])\n> & adapt Java Heap to your test requirements:\n>    Modify HEAP=\"-Xms512m -Xmx512m\" in the JMeter batch file\n> ==========================================\nThere a packaging issue in nightly build.\nFollowing jars are missing:\nlog4j-1.2-api-2.7.jar\nlog4j-core-2.7.jar\nlog4j-slf4j-impl-2.7.jar\n\nCan you download them and add them to lib folder:\nhttps://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-1.2-api/2.7/\nhttps://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-core/2.7/\nhttps://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-slf4j-impl/2.7/\n\nTeam will fix issue for next nightly.\nThanks", "id": 196786, "time": "2017-02-06T20:35:50Z", "bug_id": 60682, "creation_time": "2017-02-06T20:35:50Z", "tags": [], "is_private": false}, {"count": 22, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "id": 196788, "attachment_id": null, "bug_id": 60682, "creation_time": "2017-02-06T21:11:48Z", "time": "2017-02-06T21:11:48Z", "text": "Hello,\nIssue with logs is now fixed in nightly available on jenkins if you want to test.\n\nRegards"}, {"count": 23, "tags": [], "creator": "amar.darisa@gmail.com", "is_private": false, "id": 196789, "attachment_id": 34725, "bug_id": 60682, "creation_time": "2017-02-06T21:16:08Z", "time": "2017-02-06T21:16:08Z", "text": "Created attachment 34725\nlog from nightly build\n\nI am able to get the log now on the nightly build. I see some errors saying something about unable to add the cookie\n\n\n2017-02-06 21:13:15,469 ERROR o.a.j.p.h.c.HC4CookieHandler: Unable to add the cookie\norg.apache.http.cookie.MalformedCookieException: Invalid 'expires' attribute: Tue, 07 Feb 2017 09:13:14 GMT\n\tat org.apache.http.impl.cookie.BasicExpiresHandler.parse(BasicExpiresHandler.java:64) ~[httpclient-4.5.3.jar:4.5.3]\n\tat org.apache.http.impl.cookie.CookieSpecBase.parse(CookieSpecBase.java:113) ~[httpclient-4.5.3.jar:4.5.3]\n\tat org.apache.http.impl.cookie.DefaultCookieSpec.parse(DefaultCookieSpec.java:140) ~[httpclient-4.5.3.jar:4.5.3]\n\tat org.apache.jmeter.protocol.http.control.HC4CookieHandler.addCookieFromHeader(HC4CookieHandler.java:125) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.control.CookieManager.addCookieFromHeader(CookieManager.java:375) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.saveConnectionCookies(HTTPHC4Impl.java:1526) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:486) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:74) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.followRedirects(HTTPSamplerBase.java:1526) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.resultProcessing(HTTPSamplerBase.java:1620) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPAbstractImpl.resultProcessing(HTTPAbstractImpl.java:519) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:494) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:74) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1176) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1165) [ApacheJMeter_http.jar:r1781918]\n\tat org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:473) [ApacheJMeter_core.jar:r1781918]\n\tat org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:416) [ApacheJMeter_core.jar:r1781918]\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:252) [ApacheJMeter_core.jar:r1781918]\n\tat java.lang.Thread.run(Thread.java:745) [?:1.8.0_112]"}, {"count": 24, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Thanks.\nCould you show your CookieManager configuration please ?\nThanks", "id": 196790, "attachment_id": null, "bug_id": 60682, "creation_time": "2017-02-06T21:22:36Z", "time": "2017-02-06T21:22:36Z", "is_private": false}, {"count": 25, "attachment_id": 34726, "bug_id": 60682, "is_private": false, "id": 196791, "time": "2017-02-06T21:25:36Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-06T21:25:36Z", "tags": [], "text": "Created attachment 34726\nMy cookie manager"}, {"count": 26, "attachment_id": 34726, "bug_id": 60682, "is_private": false, "id": 196792, "time": "2017-02-06T21:27:48Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-06T21:27:48Z", "tags": [], "text": "Comment on attachment 34726\nMy cookie manager\n\nCan you switch it to Standard as per this:\n\n- http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Cookie_Manager\n\nCookie Policy\nThe cookie policy that will be used to manage the cookies. \"standard\" is the default since 3.0, and should work in most cases."}, {"count": 27, "text": "Created attachment 34727\nits working now\n\nThats perfect... Its working now !\n\nShall i keep working on the nightly build or shall i take the official build tomorrow ? I am not quite familiar with the process. Please suggest. Thank you !", "bug_id": 60682, "attachment_id": 34727, "id": 196793, "time": "2017-02-06T21:35:54Z", "creator": "amar.darisa@gmail.com", "creation_time": "2017-02-06T21:35:54Z", "tags": [], "is_private": false}, {"count": 28, "tags": [], "creator": "amar.darisa@gmail.com", "text": "Could you also give me a high level view of what was the root cause of this problem and what was fixed to get it working ? Its for my own understanding of jMeter issues", "id": 196794, "time": "2017-02-06T21:38:17Z", "bug_id": 60682, "creation_time": "2017-02-06T21:38:17Z", "is_private": false, "attachment_id": null}, {"count": 29, "tags": [], "text": "(In reply to Amar from comment #27)\n> Created attachment 34727 [details]\n> its working now\n> \n> Thats perfect... Its working now !\n> \n> Shall i keep working on the nightly build or shall i take the official build\n> tomorrow ? I am not quite familiar with the process. Please suggest. Thank\n> you !\n\nNightly build is usually not an official release and may be broken as you have seen.\nWe are currently working on full migration to slf4j + log4j2 and then we may release a version if a consensus on this is reached.\n\nIf you're willing to work on nightly and can report any bug you face it will help us a lot and ensure 3.2 does not contain those bugs, but otherwise wait for next version.\n\nRegards", "is_private": false, "id": 196795, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2017-02-06T21:40:46Z", "bug_id": 60682, "creation_time": "2017-02-06T21:40:46Z", "attachment_id": null}, {"count": 30, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "is_private": false, "id": 196796, "time": "2017-02-06T21:51:10Z", "bug_id": 60682, "creation_time": "2017-02-06T21:51:10Z", "text": "(In reply to Amar from comment #28)\n> Could you also give me a high level view of what was the root cause of this\n> problem and what was fixed to get it working ? Its for my own understanding\n> of jMeter issues\n\nIssue was introduced by enhancement (Bug 60358) of 3.1 version."}, {"count": 31, "tags": [], "creator": "amar.darisa@gmail.com", "text": "When is the release date for 3.2 ?", "id": 196801, "time": "2017-02-07T10:22:52Z", "bug_id": 60682, "creation_time": "2017-02-07T10:22:52Z", "is_private": false, "attachment_id": null}, {"count": 32, "tags": [], "bug_id": 60682, "text": "Date: Mon Feb  6 15:46:29 2017\nNew Revision: 1781918\n\nURL: http://svn.apache.org/viewvc?rev=1781918&view=rev\nLog:\nBug 60575 - HTTP request: Even if there are no Parameters, a Body is sent for GET method\nHandle redirect , patch by Felix Schumacher for testing (may be rollbacked)\nBugzilla Id: 60575\n\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java\n\n\nRevision: 1781918\nModified property: svn:log\n\nModified: svn:log at Tue Feb  7 21:05:43 2017\n------------------------------------------------------------------------------\n--- svn:log (original)\n+++ svn:log Tue Feb  7 21:05:43 2017\n@@ -1,3 +1,3 @@\n-Bug 60575 - HTTP request: Even if there are no Parameters, a Body is sent for GET method\n+Bug 60682 - HTTP Request : Get method may fail on redirect due to Content-Length header being set\n Handle redirect , patch by Felix Schumacher for testing (may be rollbacked)\n-Bugzilla Id: 60575\n+Bugzilla Id: 60682", "id": 196826, "time": "2017-02-07T21:06:34Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-07T21:06:34Z", "is_private": false, "attachment_id": null}]