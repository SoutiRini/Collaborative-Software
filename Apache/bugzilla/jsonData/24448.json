[{"count": 0, "tags": [], "creator": "advax@triumf.ca", "attachment_id": null, "is_private": false, "id": 46898, "time": "2003-11-05T23:38:54Z", "bug_id": 24448, "creation_time": "2003-11-05T23:38:54Z", "text": "We are using Apache 2.0 to proxy an ELMO visual presenter HV-8000SX\n(http://www.elmocanada.com/presentation/) which has a builtin webserver.\nThe proxy adds access control and some rewrites.\nAfter some time, expecially if the \"Live\" feature is used (a Java applet),\nan httpd process is found which steadily consumes more and more CPU\neventually (after a couple of hours) causing the system to become sluggish.\nThis process shows up  in \"ps ax\" but not in /server-status\nSending a SIGHUP to httpd fixes the problem but remote users\nmust then close and restart the applet, which is disruptive to a meeting.\n\nThis problem showed under httpd-2.0.40-21.5 on RedHat 9.0\nand is present on 2.0.48 built today"}, {"count": 1, "tags": [], "text": "what is this high-CPU process doing?\n\nattach with gdb and get backtrace\n\nsometimes for high-CPU problems it is useful to\na) attach with gdb, get backtrace, detach\nb) wait 10 secs (1 Mississippi, 2 Mississippi, ...)\nc) attach again with gdb, get backtrace, detach\n\nThe two backtraces can help show whether or not it is in a tight loop.\n\nrun strace against it for a while\n\nPlease use 2.0.48 for diagnosis.", "attachment_id": null, "bug_id": 24448, "id": 46925, "time": "2003-11-06T13:19:58Z", "creator": "trawick@apache.org", "creation_time": "2003-11-06T13:19:58Z", "is_private": false}, {"count": 2, "tags": [], "text": "It sounds like something is leaking during the lifetime of the long lived\ndownload stream, this could be in mod_proxy, or any other filters that have been\ninstalled along the way.\n\nCan you try this with a minimal Apache configuration, in other words no more\nmodules enabled than absolutely necessary, then start switching in modules until\nyou start seeing the leak. This will help narrow it down to the module that is\ncausing all the trouble.\n\n", "attachment_id": null, "bug_id": 24448, "id": 57876, "time": "2004-05-21T21:41:03Z", "creator": "minfrin@sharp.fm", "creation_time": "2004-05-21T21:41:03Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 24448, "text": "(didn't get mail from Bugzilla last year, or thought it was my confirmation\nor something stupid, and forgot about it  ...)\n\nThe high-cpu process seems to the the parent according to ls -alxf. A backtrace\nshows no change over time:\n#0  0xffffe002 in ?? ()\n#1  0x08097ee5 in ap_wait_or_timeout ()\n#2  0x0808b138 in ap_mpm_run ()\n#3  0x08091941 in main ()\n#4  0x42015704 in __libc_start_main () from /lib/tls/libc.so.6\n\na strace shows it looping\nwait4(-1, 0xbfffe5e0, WNOHANG|WUNTRACED, NULL) = 0\nselect(0, NULL, NULL, NULL, {1, 0})                                  = 0 (Timeout)\n\nthere are not many modules loaded AFAIK in the test version, cf. the production\nserver\n\nThe Java client is pulling something like 1000 packets/second to update a\nreal-time document image (spec.d at 7 frames/second)", "id": 57892, "time": "2004-05-22T01:55:35Z", "creator": "advax@triumf.ca", "creation_time": "2004-05-22T01:55:35Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 24448, "is_private": false, "count": 4, "id": 75893, "time": "2005-06-03T02:08:04Z", "creator": "chip@force-elite.com", "creation_time": "2005-06-03T02:08:04Z", "text": "Does this still happen in 2.0.54?  I am wondering if the core_input_filter\nchanges fixed it."}, {"count": 5, "tags": [], "bug_id": 24448, "attachment_id": null, "is_private": false, "id": 92060, "time": "2006-08-08T20:30:41Z", "creator": "nick@webthing.com", "creation_time": "2006-08-08T20:30:41Z", "text": "No activity after a very long time in NEEDINFO; assuming expired (hey, I even \nrecollect the fix to something that looks like this one)."}]