[{"attachment_id": null, "tags": [], "bug_id": 32821, "is_private": false, "count": 0, "id": 68897, "time": "2004-12-23T08:06:32Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2004-12-23T08:06:32Z", "text": "Hi,\n\nI've got a JSP tag (.tagx to be exact) that invoke a JavaBean and that bean\nthrows a SAXParseException. Below is the stack-trace. Anyway, what happens is\nthat a portion of the page gets sent to the client, the exception is thrown on\nthe server and the communication is severed. This is unlike the typical tomcat\nbehavior I am used to seeing where any exception that is thrown causes the an\nerror page to get displayed to the user. I suspect this is a bug because the\nonly way to find out that anything went wrong is to examine Tomcat's stdout log.\nIf an exception where to occur near the end of a page, it would like go\nunnoticed. Expected: error page should display or some other more explicit\nindication of the exception. Stack-trace follows:\n\norg.xml.sax.SAXParseException: Content is not allowed in prolog.\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n\tat org.dom4j.io.SAXReader.read(SAXReader.java:334)\n\tat org.dom4j.io.SAXReader.read(SAXReader.java:274)\n\tat com.be.desktopbeautifier.servlet.HTML2XHTML.documentWrite(HTML2XHTML.java:32)\n\tat\norg.apache.jsp.tag.web.blueeye.webstart_002dinstalled_tagx.doTag(org.apache.jsp.tag.web.blueeye.webstart_002dinstalled_tagx:61)\n\tat\norg.apache.jsp.index_jspx._jspx_meth_be_webstart$1installed_0(org.apache.jsp.index_jspx:543)\n\tat org.apache.jsp.index_jspx.access$0(org.apache.jsp.index_jspx:534)\n\tat\norg.apache.jsp.index_jspx$index_jspxHelper.invoke0(org.apache.jsp.index_jspx:646)\n\tat org.apache.jsp.index_jspx$index_jspxHelper.invoke(org.apache.jsp.index_jspx:686)\n\tat\norg.apache.jsp.tag.web.blueeye.detect_002dwebstart_tagx.doTag(org.apache.jsp.tag.web.blueeye.detect_002dwebstart_tagx:86)\n\tat\norg.apache.jsp.index_jspx._jspx_meth_be_detect$1webstart_0(org.apache.jsp.index_jspx:530)\n\tat org.apache.jsp.index_jspx._jspService(org.apache.jsp.index_jspx:149)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:99)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:325)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:245)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:526)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:825)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:731)\n\tat\norg.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:526)\n\tat\norg.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)\n\tat java.lang.Thread.run(Unknown Source)"}, {"count": 1, "tags": [], "bug_id": 32821, "is_private": false, "text": "If only part of the page is sent to the client. That means the buffers have been\nfilled and a response is sent to the client. This commits the headers. Once the\nheaders are committed - any comunication of errors back to the client is\nindeterminate.", "id": 68922, "time": "2004-12-23T12:31:43Z", "creator": "funkman@joedog.org", "creation_time": "2004-12-23T12:31:43Z", "attachment_id": null}]