[{"count": 0, "tags": [], "creator": "knst.kolinko@gmail.com", "text": "Reviewing o.a.c.connector.Response after comments in\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=50747#c3\n\nIn o.a.c.connector.Response there is a feature that Response#setContentLength(int) ignores the call if usingWriter flag is true.\n\n\nMy comments are:\n\n1) It concerns only multi-byte charsets such as UTF-8. There is nothing wrong with calling setContentLength() if it is a single-byte charset.\n\n2) There is no such protection in Response#setHeader(), #setIntHeader(), #addHeader(), #addIntHeader() methods. Calling them will bypass the protection.\n\nSee how o.a.coyote.Response implements those methods and o.a.coyote.Response#checkSpecialHeader() for comparison.", "id": 144112, "time": "2011-02-09T16:48:03Z", "bug_id": 50748, "creation_time": "2011-02-09T16:48:03Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 50748, "text": "*** Bug 50747 has been marked as a duplicate of this bug. ***", "id": 144115, "time": "2011-02-09T17:19:52Z", "creator": "markt@apache.org", "creation_time": "2011-02-09T17:19:52Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 144116, "time": "2011-02-09T17:40:44Z", "bug_id": 50748, "creation_time": "2011-02-09T17:40:44Z", "is_private": false, "text": "This fixed in 7.0.x and will be included in 7.0.9 onwards.\n\nBoth single and multi-byte encodings are handled since OutputBuffer.close() sets the content-length to the number of bytes, not the number of characters.\n\nI suspect the test in the response dates from a time when content length was set using characters although I haven't done the code archeology to be sure of that."}]