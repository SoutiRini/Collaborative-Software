[{"count": 0, "tags": [], "text": "Created attachment 25266\nPatch to fix issue\n\norg.apache.tomcat.util.net.AprEndpoint.unlockAccept does not wakeup accepts with deferred accept or BSD filters. This is because it only connects to its connector for causing the accept call to return. This is not enough in the case of a deferred accept / BSD filters as the accept call only returns from the kernel if data was sent / a HTTP request was sent. The attached patch fixes that by sending and OPTIONS * in this case.", "attachment_id": 25266, "id": 136050, "creator": "rpluem@apache.org", "time": "2010-04-12T08:16:23Z", "bug_id": 49095, "creation_time": "2010-04-12T08:16:23Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 49095, "attachment_id": null, "id": 137110, "creation_time": "2010-05-25T09:56:53Z", "time": "2010-05-25T09:56:53Z", "creator": "markt@apache.org", "text": "Fixed in trunk and proposed for 6.0.x.\nThanks for the patch.", "is_private": false}, {"count": 2, "tags": [], "bug_id": 49095, "attachment_id": 25510, "id": 137286, "time": "2010-06-02T14:11:48Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-06-02T14:11:48Z", "is_private": false, "text": "Created attachment 25510\n2010-06-02_tc6_bug49095.patch\n\nUpdated the tc6.0.x patch to explicitly specify the encoding used by the Writer. That is r950682 of trunk."}, {"count": 3, "tags": [], "text": "Fixed in 6.0 in r952090 and will be in 6.0.27 onwards.\n\n\n\nNote, that all the affected lines are guarded by if(deferAccept) clauses.\nIt is easy to remove that clause and extend this implementation of unlockAccept() that sends a valid \"OPTIONS\" request upon other connector implementations. Is it worth doing?\n\n\nRegarding the 'BSD filters': apparently the documentation on them is here: [1], [2]\n\n[1] http://www.freebsd.org/cgi/man.cgi?query=accept_filter&sektion=9\n[2] http://www.freebsd.org/cgi/man.cgi?query=setsockopt&sektion=2  (see SO_ACCEPTFILTER)", "attachment_id": null, "id": 137405, "creator": "knst.kolinko@gmail.com", "time": "2010-06-07T01:11:05Z", "bug_id": 49095, "creation_time": "2010-06-07T01:11:05Z", "is_private": false}]