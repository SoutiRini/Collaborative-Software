[{"count": 0, "tags": [], "bug_id": 51243, "text": "We have an Ant build file which calls maven-ant-tasks's dependencies to copy a bunch of dependencies.\nSince we need to exclude some of those jars, we used Ant's resource selectors to restrict the fileset produced by maven-ant-tasks.\n\nA small snippet from our build.xml:\n\n<artifact:pom file=\"common-core/pom.xml\" id=\"pom.core\" />\n<target name=\"deploy-core-jar\" depends=\"package-core-jar\">\n\t<artifact:dependencies scopes=\"compile,runtime\" pomrefid=\"pom.core\" filesetid=\"dependencies.core\" />\n\t<copy todir=\"${clientlib.dir}\" flatten=\"true\">\n\t\t<restrict>\n\t\t\t<fileset refid=\"dependencies.core\" />\n\t\t\t<rsel:not>\n\t\t\t\t<rsel:or>\n\t\t\t\t\t<!-- remove maven-ant-tasks and yuicompressor and their dependencies -->\n\t\t\t\t\t<rsel:name name=\"**/yui*.jar\" />\n\t\t\t\t\t<rsel:name name=\"**/plexus*.jar\" />\n\t\t\t\t\t<rsel:name name=\"**/maven*.jar\" />\n\t\t\t\t\t<rsel:name name=\"**/wagon*.jar\" />\n\t\t\t\t\t<rsel:name name=\"**/ant*.jar\" />\n\t\t\t\t\t<rsel:name name=\"**/classworlds*.jar\" />\n\t\t\t\t\t<rsel:name name=\"**/backport*.jar\" />\n\t\t\t\t</rsel:or>\n\t\t\t</rsel:not>\n\t\t</restrict>\n\t</copy>\n</target>\n\nBut when we ran the target, no files at all were copied. After a long time searching, we stumbled on the fact that it worked when we left out the line\n\n<rsel:name name=\"**/maven*.jar\" />\n\nOur local Maven repository was located in /home/user/maven-repository. As it seems the pattern given doesn't respect the standard Ant patterns and also matches the directories in between (as maven* matches maven-repository).\n\nAs a workaround, we renamed the directory containing the Maven repository to something that doesn't match any of the used patterns.\n\nReported bug at http://jira.codehaus.org/browse/MANTTASKS-219 as well.", "id": 146535, "time": "2011-05-23T08:25:23Z", "creator": "wim.symons@gmail.com", "creation_time": "2011-05-23T08:25:23Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 51243, "attachment_id": null, "id": 146543, "time": "2011-05-23T13:21:46Z", "creator": "mbenson@apache.org", "creation_time": "2011-05-23T13:21:46Z", "is_private": false, "text": "You are correct:  the \"name\" resource selector applies only to a file's basename.  You are trying to use simple fileset excludes."}]