[{"count": 0, "text": "Created attachment 30886\nPatch to add websocket protocols to is_absolute_uri(...)\n\nGiven the following rewrite rule:\n\nRewriteRule    ^/ws(.*)$  ws://localhost:9000/ws  [P]\n\nmod_rewrite treats this a filepath so the access log shows:\n\n[26/Sep/2013:09:46:07 -0400] \"GET /ws://localhost:9000/ws HTTP/1.1\" 400 317\n\nThis problem is that is_absolute_uri(...) is returning 0 for URIs starting with ws:// or wss://.\n\nI have attached a patch against HEAD that add a case to is_absolute_uri(...) to match the websocket protocols. This allow websocket traffic to be proxied using mod_rewrite.", "bug_id": 55598, "attachment_id": 30886, "id": 170285, "time": "2013-09-26T14:36:15Z", "creator": "chris.harris@kitware.com", "creation_time": "2013-09-26T14:36:15Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "jim@apache.org", "attachment_id": null, "id": 170395, "time": "2013-10-02T16:39:18Z", "bug_id": 55598, "creation_time": "2013-10-02T16:39:18Z", "is_private": false, "text": "Committed revision 1528556 in trunk. Will propose for 2.4 backport"}, {"text": "Getting this backported to 2.4 would be great.", "tags": [], "bug_id": 55598, "is_private": false, "count": 2, "id": 170620, "time": "2013-10-15T17:23:57Z", "creator": "chris.harris@kitware.com", "creation_time": "2013-10-15T17:23:57Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "lexxsmith@gmail.com", "attachment_id": null, "id": 188468, "time": "2016-02-16T13:14:41Z", "bug_id": 55598, "creation_time": "2016-02-16T13:14:41Z", "is_private": false, "text": "Hey there, is it realistic to expect backport on 2.2\n\nhttpd-2.2.15-47.el6.centos.3.x86_64\n\nI have tested your patch and it works perfectly. Thank you very much.\nI just wonder if custom or official mod_rewrite.so can be approved."}, {"count": 4, "tags": [], "creator": "chris.harris@kitware.com", "attachment_id": null, "id": 188469, "time": "2016-02-16T13:50:24Z", "bug_id": 55598, "creation_time": "2016-02-16T13:50:24Z", "is_private": false, "text": "Not sure what the process for backport to 2.2 is, but it seem unlikely I think."}, {"count": 5, "tags": [], "creator": "lexxsmith@gmail.com", "attachment_id": null, "id": 188472, "time": "2016-02-16T14:57:03Z", "bug_id": 55598, "creation_time": "2016-02-16T14:57:03Z", "is_private": false, "text": "(In reply to Chris Harris from comment #4)\n> Not sure what the process for backport to 2.2 is, but it seem unlikely I\n> think.\nOk, thank you,\n\nJust wonder, will this broke current mod_rewrite in any case?\n\n    case 'w':\n    case 'W':\n        if (!strncasecmp(uri, \"s://\", 4)) {        /* ws://     */\n            return 5;\n        }\n        else if (!strncasecmp(uri, \"ss://\", 5)) {  /* wss://    */\n            return 6;\n        }\n        break;\n    }\n\nI suppose not and want to build mod_rewrite.rpm just for that needs. (proxy-ing websockets dynamically )\n\n# simply and easy rule like would work ( i checked it, and any variations )\nRewriteRule ^websockify/([^/]+)/([^/]+) wss://$1:$2/websockify [P]"}]