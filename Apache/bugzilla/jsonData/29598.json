[{"count": 0, "tags": [], "creator": "julien@julien-dubois.com", "attachment_id": null, "id": 59276, "time": "2004-06-16T11:47:47Z", "bug_id": 29598, "creation_time": "2004-06-16T11:47:47Z", "is_private": false, "text": "Custom 401 pages cannot be used in Tomcat, which is critical from my point of view.\n\nThis is in fact Bug 23802 from Tomcat 4.1 which was promoted to Tomcat 5. The\ndescription in Bug 23802 is accurate and still valid for Tomcat 5.\n\nJulien Dubois."}, {"count": 1, "tags": [], "bug_id": 29598, "attachment_id": 11854, "id": 59295, "time": "2004-06-16T14:25:55Z", "creator": "yoavs@computer.org", "creation_time": "2004-06-16T14:25:55Z", "is_private": false, "text": "Created attachment 11854\nTest WAR"}, {"count": 2, "attachment_id": null, "bug_id": 29598, "is_private": false, "id": 59296, "time": "2004-06-16T14:26:06Z", "creator": "yoavs@computer.org", "creation_time": "2004-06-16T14:26:06Z", "tags": [], "text": "Works for me."}, {"count": 3, "tags": [], "bug_id": 29598, "text": "Created attachment 11863\ntest war", "id": 59369, "time": "2004-06-16T22:36:20Z", "creator": "julien@julien-dubois.com", "creation_time": "2004-06-16T22:36:20Z", "is_private": false, "attachment_id": 11863}, {"count": 4, "tags": [], "bug_id": 29598, "text": "Come'on, you have no <security-constraint/> and no <login-config/> on your test\nfile, of course it works.\n\nI've uploaded a test file which will fail: go to\nhttp://127.0.0.1:8080/test/secure/index.jsp\n\nYou will end up on the 401 file straight away, and you will be left there.\n\nIf you comment out the 401 file in the web.xml, you will be able to login as\nnormal (note: as the role I put doesn't exist, it might be a little clumsy).\n\nJulien Dubois.", "id": 59370, "time": "2004-06-16T22:40:20Z", "creator": "julien@julien-dubois.com", "creation_time": "2004-06-16T22:40:20Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 29598, "text": "There's a workaround.\nLeave the 401 code in web.xml as normal, and add at the beginning of the 401 JSP:\n\n<%\n response.addHeader(\"WWW-Authenticate\", \"BASIC realm=\\\"my_realm\\\"\");\n response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n%>\n\nIt then seems to work normally.\n\nHTH,\n\nJulien Dubois.", "id": 59371, "time": "2004-06-16T22:45:01Z", "creator": "julien@julien-dubois.com", "creation_time": "2004-06-16T22:45:01Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "I'm aware of the difference between the simple 401 case and the security-\nconstraint one: but your bug for this issue was filed simply as \"Custom 401 \npages cannot be used in Tomcat, which is critical from my point of view.\" and \nsince that worked for me, I closed it.\n\nTomcat 4.1 was not directly promoted to tomcat 5.  There were significant code \nchanges made in relevant areas.  But since you've verified it as the same as \nbug 23802, why open a new one?\n\nThanks for posting the workaround.\n", "attachment_id": null, "id": 59420, "creator": "yoavs@computer.org", "time": "2004-06-17T14:41:14Z", "bug_id": 29598, "creation_time": "2004-06-17T14:41:14Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 29598, "text": "Please don't waste your time reopening this report. You can refer to lots of\nWOTFIX \"bugs\" from TC 4.x land.", "id": 59427, "time": "2004-06-17T15:55:16Z", "creator": "remm@apache.org", "creation_time": "2004-06-17T15:55:16Z", "is_private": false, "attachment_id": null}]