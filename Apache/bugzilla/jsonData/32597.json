[{"count": 0, "tags": [], "creator": "y3x1-wwm9@spamex.com", "attachment_id": null, "id": 68160, "creation_time": "2004-12-09T08:06:25Z", "time": "2004-12-09T08:06:25Z", "bug_id": 32597, "text": "I have a target for copying updated javascript and jsp files\nfrom my workspace to my server deployment location.\nSince I run ant with -quiet inside IDEA Intellji Java IDE,\nI do not see any output from copy task  even though I have verbose\nset.\nTo get around that before I do the copy, I print out the\nmodified filesets.  Here I used the update=\"false\" attribute\nwhich is supposed to not update the cache, so that I can check\nmodified again in the copy task.  According to ant documentation\nupdate attribute means \"Should the cache be updated when values differ?\".\nWell, when I tried this, my <echo> taks will print out the file that\nwas changed, but the copy task does nothing.  If I remove my echo\ntasks between the debugging comments, then the copy taks does copy the\nfiles I have changed.\n\nCould you please clarify what \"update=false\" is supposed to do? Am\nI misunderstanding this or is it a bug?\nThanks,\n-Alex\n\n  <target name=\"copy_changed_web_resources\" depends=\"init\">\n        <!--begin debugging-->\n        <!--the update=\"false\" doesn't seem to work -->\n        <fileset id=\"scripts\" dir=\"${TOP}/web/html/scripts\">\n            <type type=\"file\"/>\n            <modified update=\"false\"/>\n        </fileset>\n        <property name=\"scripts_p\" refid=\"scripts\"/>\n        <echo>scripts = ${scripts_p}</echo>\n        <fileset id=\"jsp\" dir=\"${TOP}/web/html/jsp\">\n            <type type=\"file\"/>\n            <modified update=\"false\"/>\n        </fileset>\n        <property name=\"jsp_p\" refid=\"jsp\"/>\n        <echo>jsp = ${jsp_p}</echo>\n        <!--end debugging-->\n\n        <copy todir=\"${WEB_DEPLOYED_ROOT}/scripts\" preservelastmodified=\"true\"\nverbose=\"true\">\n            <fileset dir=\"${TOP}/web/html/scripts\">\n                <type type=\"file\"/>\n                <modified/>\n            </fileset>\n        </copy>\n        <copy todir=\"${WEB_DEPLOYED_ROOT}/jsp\"  preservelastmodified=\"true\"\nverbose=\"true\">\n            <fileset dir=\"${TOP}/web/html/jsp\">\n                <type type=\"file\"/>\n                <modified/>\n            </fileset>\n        </copy>\n    </target>", "is_private": false}, {"count": 1, "tags": [], "creator": "jan@materne.de", "attachment_id": null, "id": 68161, "creation_time": "2004-12-09T09:00:06Z", "time": "2004-12-09T09:00:06Z", "bug_id": 32597, "text": "I could verify that.\n\n1. update=\"false\" should not change the cache file. That is the intention.\n2. A very small testcase\n   <fileset dir=\".\"><modified update=\"false\"/></fileset>\n   has created the cache file, but shouldnt.\n   A first quick view into the source [1] has shown\n\npublic boolean isSelected(...) {\n    ...\n    // Maybe update the cache\n    if (update && rv) {\n        cache.put(f.getAbsolutePath(), newValue);\n        setModified(getModified() + 1);\n        if (!getDelayUpdate()) {\n            saveCache();\n        }\n    }\n    ...\n}\n\nBut maybe the error is somewhere deeper. I have to have a deeper look into that \n(and prepare a JUnit testcase of course :)\n\n\n\n[1] \nhttp://cvs.apache.org/viewcvs.cgi/ant/src/main/org/apache/tools/ant/types/select\nors/modifiedselector/ModifiedSelector.java?rev=1.14&view=markup", "is_private": false}, {"count": 2, "tags": [], "bug_id": 32597, "text": "fixed in svn revision 805463\n\nYou may be able to work around this by using a nested\n\n          <param name=\"update\" value=\"false\"/>\n\ninstead of the update attribute.\n\nTo Jan, the error is (or was) in configure where update was set to true unconditionally overwriting any value previously set via attributes.", "id": 129774, "time": "2009-08-18T08:44:42Z", "creator": "bodewig@apache.org", "creation_time": "2009-08-18T08:44:42Z", "is_private": false, "attachment_id": null}]