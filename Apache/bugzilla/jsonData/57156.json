[{"count": 0, "tags": [], "creator": "hotterd@gmail.com", "is_private": false, "id": 178784, "attachment_id": 32154, "bug_id": 57156, "creation_time": "2014-10-28T05:16:51Z", "time": "2014-10-28T05:16:51Z", "text": "Created attachment 32154\nthe build xml file\n\nPer the doc, the junit task setting with haltonfailure should halt the build process if any of failures or errors happens. Similarly, haltonerror should halt the build process if any of errors happens.  While this is true for JUnit 3 style test classes, it is not working for JUnit 4 style test classes.\n\nTested with ant 1.9.2 and junit 4.11.\n\nReproduce steps:\n====\n\n1. download attached build file and junit files, placed them into the same dir\n\n2. modify the location of junit jar as needed in junit.xml at line 6\n\n3. ant -f junit.xml build\n   // this builds the junit 3 style class HellowWorldTest.java and junit 4 style class HellowWorldJUnit4.java\n\n4. ant -f junit.xml runJUnit3\n   // you can see the junit run halts as expected as soon as the first failure occurs.\n\n5. ant -f junit.xml runJUnit4\n   // you can see it does not halt after the failure occurs."}, {"count": 1, "tags": [], "bug_id": 57156, "is_private": false, "id": 178785, "attachment_id": 32155, "creator": "hotterd@gmail.com", "creation_time": "2014-10-28T05:17:44Z", "time": "2014-10-28T05:17:44Z", "text": "Created attachment 32155\nJUnit 3 style class"}, {"count": 2, "tags": [], "bug_id": 57156, "attachment_id": 32156, "id": 178786, "time": "2014-10-28T05:18:18Z", "creator": "hotterd@gmail.com", "creation_time": "2014-10-28T05:18:18Z", "is_private": false, "text": "Created attachment 32156\nJUnit 4 style class"}, {"count": 3, "tags": [], "text": "I've not tried running this yet, but can you give more detail:\n1. Is the issue that JUnit runs the rest of the test class, or the rest of the suite instead of halting (i.e. how much further does JUnit go than was expected)?\n2. Is JUnit 4 haltonerror something that has worked for you previously, has it never worked for JUnit 4, or have you not tried it it any other version of Ant?", "is_private": false, "id": 179129, "creator": "mclarke@apache.org", "time": "2014-11-16T08:03:35Z", "bug_id": 57156, "creation_time": "2014-11-16T08:03:35Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 57156, "attachment_id": null, "id": 179165, "time": "2014-11-18T02:25:39Z", "creator": "hotterd@gmail.com", "creation_time": "2014-11-18T02:25:39Z", "is_private": false, "text": "Thanks for looking into this.\n\nReplied inline:\n\n(In reply to Michael Clarke from comment #3)\n> I've not tried running this yet, but can you give more detail:\n> 1. Is the issue that JUnit runs the rest of the test class, or the rest of\n> the suite instead of halting (i.e. how much further does JUnit go than was\n> expected)?\n\nIt does not stop until the end of the run (i.e. All the rest of the test class and suite are going to run). It only changes the result status from \"BUILD SUCCESSFUL\" to \"BUILD FAILED\".\n\n> 2. Is JUnit 4 haltonerror something that has worked for you previously, has\n> it never worked for JUnit 4, or have you not tried it it any other version\n> of Ant?\n\nNo, I think it never worked for JUnit 4 as I went through the ant code and junit code. I haven't try older versions of ant, but I don't think that'll make a difference.\n\n\n\nThanks,\nGan"}]