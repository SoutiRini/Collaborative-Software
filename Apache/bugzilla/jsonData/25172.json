[{"attachment_id": null, "tags": [], "bug_id": 25172, "is_private": false, "count": 0, "id": 48430, "time": "2003-12-03T17:59:19Z", "creator": "jraty@cc.hut.fi", "creation_time": "2003-12-03T17:59:19Z", "text": "When transforming alpha-value into string format, SVGGeneratorContext -class fails in \nmethod doubleString, throwing NullPointerException.\n\nIn the code below, should decimalFormat variable assignment be done after the \ninitialization of decimalFormats[] array, or initialization block declared static? \n(tested with initialization block declared static and it seems to work)\n\n-----From org.apache.batik.svggen.SVGGeneratorContext.java---------\n\n  /**\n     * Converts the input double value to a string with a number of \n     * decimal places controlled by the precision attribute.\n     */\n    final public String doubleString(double value) {\n        double absvalue = Math.abs(value);\n        // above 10e7 we do not output decimals as anyway\n        // in scientific notation they were not available\n        if (absvalue >= 10e7 || (int)value == value) {\n            return Integer.toString((int)value);\n        }\n        // under 10e-3 we have to put decimals\n        else {\n            return decimalFormat.format(value);\n        } \n    }\n\n    /**\n     * Current double value formatter\n     */\n    protected DecimalFormat decimalFormat = decimalFormats[3];\n\n    protected static DecimalFormatSymbols dsf \n        = new DecimalFormatSymbols(Locale.US);\n\n    protected static DecimalFormat decimalFormats[] = new DecimalFormat[13];\n\n    {\n        decimalFormats[0] = new DecimalFormat(\"#\", dsf);\n\n        String format = \"#.\";\n        for (int i=0; i<=12; i++) {\n            format += \"#\";\n            decimalFormats[i] = new DecimalFormat(format, dsf);\n        }\n    }\n-------------------------------------------------------------"}, {"count": 1, "tags": [], "bug_id": 25172, "attachment_id": null, "is_private": false, "id": 61880, "time": "2004-08-12T12:05:55Z", "creator": "deweese@apache.org", "creation_time": "2004-08-12T12:05:55Z", "text": "I think this bug was fixed a while ago.\nAnyway the initializer block is currently static (as you\nguessed it was intended to be)."}]