[{"count": 0, "tags": [], "bug_id": 5362, "text": "Since because of DOM2 the empty namespace is coded as null in DOM (but \"\" in \nSAX) getNamespaceURI().compareTo() should be called directly.\n\nThe following code reproduces the problem:\n\n        Element root = doc.getDocumentElement();\n        Attr attr = root.getAttributeNodeNS(null /*any value*/, \"test\");\n        System.out.println( \"Attribute test is \" + (attr == null ? \" 'not \nfound'\" : attr.getValue()) );\n\n<root xmlns=\"something\" test=\"some-value\"/>\n\nA fix is having a private static boolean equalStrings(String a, String b) as \nfollows:\n\nRCS file: /home/cvspublic/xml-\ncrimson/src/org/apache/crimson/tree/ElementNode2.java,v\nretrieving revision 1.11\ndiff -C3 -r1.11 ElementNode2.java\n*** ElementNode2.java\t2001/04/11 02:52:37\t1.11\n--- ElementNode2.java\t2001/12/11 18:48:34\n***************\n*** 430,442 ****\n                  return null;\n              }\n              if (localName.equals(attr.getLocalName())\n!                 && (attr.getNamespaceURI() == namespaceURI\n!                     || attr.getNamespaceURI().equals(namespaceURI))) {\n                  return attr;\n              }\n          }\n      }\n      \n      /**\n       * <b>DOM:</b> Assigns or modifies the value of the specified attribute.\n       */\n--- 430,451 ----\n                  return null;\n              }\n              if (localName.equals(attr.getLocalName())\n!                 && equalStrings(attr.getNamespaceURI(), (namespaceURI))) {\n                  return attr;\n              }\n          }\n      }\n      \n+     private static boolean equalStrings( String a, String b ) {\n+         if (a == b) {\n+             return true;\n+         } else if ( a == null) {\n+             return b == null;\n+         } else {\n+             return a.equals( b );\n+         }\n+     }\n+ \n      /**\n       * <b>DOM:</b> Assigns or modifies the value of the specified attribute.\n       */", "id": 8781, "time": "2001-12-11T10:54:39Z", "creator": "ashundi@extensibility.com", "creation_time": "2001-12-11T10:54:39Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": 885, "creator": "ashundi@extensibility.com", "is_private": false, "id": 8782, "time": "2001-12-11T10:58:38Z", "bug_id": 5362, "creation_time": "2001-12-11T10:58:38Z", "tags": [], "text": "Created attachment 885\nbugfix diff"}, {"count": 2, "tags": [], "bug_id": 5362, "is_private": false, "text": "Ancient bug report against Crimson. Not an XML Commons issue.\n\nNote that Crimson which has had no activity in years will likely soon be retired to the Apache Attic. It's unlikely that any problems reported against it will ever be fixed.", "id": 135146, "time": "2010-03-07T15:31:40Z", "creator": "mrglavas@ca.ibm.com", "creation_time": "2010-03-07T15:31:40Z", "attachment_id": null}]