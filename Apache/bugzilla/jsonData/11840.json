[{"count": 0, "tags": [], "bug_id": 11840, "attachment_id": null, "text": "My xsd file is\n\n<xsd:schema xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" > \n\n  <xsd:element name=\"root\">\n    <xsd:complexType> \n      <xsd:sequence minOccurs=\"1\" maxOccurs=\"1\"> \n        <xsd:element name=\"AAA\" type=\"myAAA\"/> \n        <xsd:element name=\"BBB\" type=\"myBBB\"/> \n      </xsd:sequence> \n    </xsd:complexType> \n    <xsd:key name=\"myId\">\n      <xsd:selector xpath=\"./AAA/a\"/> \n      <xsd:field xpath=\"@id\"/> \n    </xsd:key> \n    <xsd:keyref name=\"myIdref\" refer=\"myId\"> \n      <xsd:selector xpath=\"./BBB/b\"/> \n      <xsd:field xpath=\"@idref\"/> \n    </xsd:keyref>\n  </xsd:element> \n\n  <xsd:complexType name=\"myAAA\"> \n    <xsd:sequence minOccurs=\"1\"> \n      <xsd:element name=\"a\" minOccurs=\"1\" maxOccurs=\"unbounded\"> \n        <xsd:complexType> \n          <xsd:attribute name=\"id\" type=\"xsd:NCName\" use=\"required\"/> \n        </xsd:complexType> \n      </xsd:element> \n    </xsd:sequence> \n  </xsd:complexType> \n\n  <xsd:complexType name=\"myBBB\"> \n    <xsd:sequence minOccurs=\"1\"> \n      <xsd:element name=\"b\" minOccurs=\"1\" maxOccurs=\"unbounded\"> \n        <xsd:complexType> \n          <xsd:attribute name=\"idref\" type=\"xsd:NCName\" use=\"required\"/> \n        </xsd:complexType> \n      </xsd:element> \n    </xsd:sequence> \n  </xsd:complexType> \n</xsd:schema> \n\nMy xml file is\n<root xsi:noNamespaceSchemaLocation=\"correct_0.xsd\" xmlns=\"\" \nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" > \n  <AAA> \n    <a id=\"x\"/> \n    <a id=\"y\"/> \n  </AAA> \n\n  <BBB> \n    <b idref=\"x\"/> \n    <b idref=\"y\"/> \n    <b idref=\"z\"/> \n  </BBB> \n</root>\n\nThe result \nKey with value [ID Value:  z] not found for identity constraint of \nelement \"root\".\n\nThe desired result\nKey[myIdref] with value [ID Value:  z] not found for identity constraint of \nelement \"root\".\n\nNeed to edit \nXMLValidator.java line# 5214\n                ......\n                   reportSchemaError(code, new Object[]{\n                      fIdentityConstraint.getIdentityConstraintName(),\n                      value,element});\n                }\nand SchemaMessage.java line#107 to\n        { \"KeyNotFound\", \"Key[{0}] with value [{1}] not found for identity \nconstraint of element \\\"{2}\\\".\" },\n\n\nIt's import to make this change otherwise it's impossible to figure out\nwhich xml entry casues the problem.", "id": 21349, "time": "2002-08-20T02:19:20Z", "creator": "lzhou@guidewire.com", "creation_time": "2002-08-20T02:19:20Z", "is_private": false}, {"count": 1, "tags": [], "text": "Thanks for reporting this and providing the fix.  It's fixed in CVS, and will \nalso be part of the forthcoming -J2.1.0.", "attachment_id": null, "id": 21840, "creation_time": "2002-08-27T20:25:14Z", "time": "2002-08-27T20:25:14Z", "creator": "neilg@ca.ibm.com", "bug_id": 11840, "is_private": false}]