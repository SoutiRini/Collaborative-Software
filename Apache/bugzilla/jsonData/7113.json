[{"count": 0, "tags": [], "text": "We extended Priority to introduce a TRACE-LEVEL.\n\nWhen we want to activate it (using properties-file and \"prio#className\"\nlog4J could not load the class.\n\nWhen we analysed the problem we found out the cause:\n\nlog4j.jar was in JDK/lib/ext so that it will be loaded with every vm but our \ncustom priority-class was in the \"normal\" classpath.\n\nBecause OptionConverter uses a simple \"Class.forName\" the ClassLoader only looks \nin lib/ext. (It was hard work to find out this problem!)\n\nEvery \"Class.forName\" should be replaced by \n\"ClassLoader.getSystemClassLoader().loadClass\" so that the class will also be \nsearched in the normal classpath (I think custom-classes will not often be in \nlib/ext)\n\nAdditionally this behavior should be documented as soon as possible (until this \nis fixed).\n\nTo reproduce it do the following:\n- create a custom priority / category /soemthing else\n- put log4j.jar in lib/ext \n- put the custom-priority somewhere in the classpath of the app (not in \nlib/ext!)\n- try to log something with the custom-priority\n\nlog4J brings a message like \"custom priority class [xy] not found.\"\n\nnow remove log4j.jar from lib/ext and put it in the app-classpath\n-> it should work now", "attachment_id": null, "id": 11782, "creator": "michael.wenig@wuestenrot.de", "time": "2002-03-14T09:03:00Z", "bug_id": 7113, "creation_time": "2002-03-14T09:03:00Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 7113, "attachment_id": null, "is_private": false, "id": 14733, "time": "2002-04-25T14:27:39Z", "creator": "ceki@apache.org", "creation_time": "2002-04-25T14:27:39Z", "text": "\nThis is a classical classloader problem. It is an important issue that must and \nwill be documented. However, unless we resort to ugly hacks it can't be solved.\nAs such, there is not intention to fix this bug, at least not in the form you \nsuggest. Sorry for the inconvenience.  "}]