[{"count": 0, "tags": [], "text": "When running JMeter through an Ant task, and another instance of JMeter (non-GUI) is running, the failureproperty value is not set to true. This should be set to true since the test failed to even run.\n\nMethod:\n1. Start a long test plan in non-gui mode\n2. Using Ant, start another test plan\n<jmeter jmeterhome=\"${jmeter-home}\" resultlogdir=\"${logs.dir}\" failureproperty=\"jmeter.failed\" testplan=\"@{f}\">\n\t<property name=\"user.dir\" value=\"${basedir}\" />\n\t<jvmarg value=\"-Dlog_file=${basedir}/jmeter.log\"/>\n</jmeter>\n<!-- The property will be null if it didn't fail, so making it more human readable. -->\n<if>\n\t<not><istrue value=\"${jmeter.failed}\" /></not>\n\t<then>\n\t\t<var name=\"jmeter.failed\" value=\"false\"/>\n\t</then>\n</if>\n<echo>JMeter Failed? :: ${jmeter.failed}</echo>\n\nResults (from Ant):\n[jmeter] Executing test plan: /Users/me/Desktop/test.jmx ==> /Users/me/Desktop/logs/test.jtl\n   [jmeter] Created the tree successfully using /Users/me/Desktop/test.jmx\n   [jmeter] Starting the test @ Thu Feb 10 10:00:57 PST 2011 (1297360857582)\n   [jmeter] Waiting for possible shutdown message on port 4445\n   [jmeter] java.net.BindException: Address already in use\n   [jmeter] \tat java.net.PlainDatagramSocketImpl.bind0(Native Method)\n   [jmeter] \tat java.net.PlainDatagramSocketImpl.bind(PlainDatagramSocketImpl.java:82)\n   [jmeter] \tat java.net.DatagramSocket.bind(DatagramSocket.java:372)\n   [jmeter] \tat java.net.DatagramSocket.<init>(DatagramSocket.java:211)\n   [jmeter] \tat java.net.DatagramSocket.<init>(DatagramSocket.java:262)\n   [jmeter] \tat java.net.DatagramSocket.<init>(DatagramSocket.java:235)\n   [jmeter] \tat org.apache.jmeter.engine.StandardJMeterEngine.waitForSignals(StandardJMeterEngine.java:228)\n   [jmeter] \tat org.apache.jmeter.engine.StandardJMeterEngine.access$100(StandardJMeterEngine.java:57)\n   [jmeter] \tat org.apache.jmeter.engine.StandardJMeterEngine$1.run(StandardJMeterEngine.java:208)\n   [jmeter] Tidying up ...    @ Thu Feb 10 10:00:59 PST 2011 (1297360859764)\n   [jmeter] ... end of run\n     [echo] JMeter Failed? :: false\n\nExpected:\njmeter.failed should be true", "is_private": false, "id": 144154, "creator": "stephenash@gmail.com", "time": "2011-02-10T14:37:14Z", "bug_id": 50757, "creation_time": "2011-02-10T14:37:14Z", "attachment_id": null}, {"count": 1, "text": "I think this has been fixed in the current trunk - can you try that please?", "creator": "sebb@apache.org", "attachment_id": null, "id": 144155, "time": "2011-02-10T14:41:12Z", "bug_id": 50757, "creation_time": "2011-02-10T14:41:12Z", "tags": [], "is_private": false}, {"count": 2, "text": "Tried again with r1067038 from the nightly builds page with the same results. The ant-jmeter.jar file in the extras folder has not been updated for a long time, which I assume is where the fix needs to take place.", "creator": "stephenash@gmail.com", "is_private": false, "id": 144157, "time": "2011-02-10T15:00:59Z", "bug_id": 50757, "creation_time": "2011-02-10T15:00:59Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "text": "OK sorry, misunderstood the problem.\n\nThe JMeter Ant task is not actually maintained by the JMeter project; you'll have to report this via:\n\nhttp://www.programmerplanet.org/pages/projects/jmeter-ant-task.php\n\nAlternatively, it's pretty easy to use a plain Ant <java> task to run JMeter - that is how we run some of our unit tests.\n\nHave a look at the <java> part of the batchtest target in the main build.xml.", "attachment_id": null, "id": 144159, "creator": "sebb@apache.org", "time": "2011-02-10T15:20:05Z", "bug_id": 50757, "creation_time": "2011-02-10T15:20:05Z", "is_private": false}, {"count": 4, "tags": [], "creator": "stephenash@gmail.com", "attachment_id": null, "text": "Thanks for the pointer to that library's developer. I'll close this bug.", "id": 144160, "time": "2011-02-10T15:48:46Z", "bug_id": 50757, "creation_time": "2011-02-10T15:48:46Z", "is_private": false}]