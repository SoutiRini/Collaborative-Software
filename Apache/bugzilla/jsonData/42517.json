[{"count": 0, "tags": [], "text": "Hello,\n\nThis is my first bug report for Tomcat, so please go easy. We've noticed a\nproblem with Filter url-pattern matching. Our application maps a Filter to the\nURL pattern \"*.pcms.xml\" which fails to match URLs such as\n\"/test/productdata.pcms.xml\"\n\nPerhaps you don't like the above, but I feel it ought to be permitted. So, I\ndownloaded the 6.0.13 code and believe the problem is in:\n  org.apache.catalina.core.ApplicationFilterFactory.matchFiltersURL(String\ntestPath, String requestPath) \n\nI've like to suggest a change something like this at line 292:\n\n// Case 3 - Extension Match\nif (testPath.startsWith(\"*.\")) {\n    int slash = requestPath.lastIndexOf('/');\n    int periodAfterSlash = requestPath.indexOf('.', slash);\n    if ((slash >= 0) && (periodAfterSlash > slash)\n        && (periodAfterSlash != requestPath.length() - 1) ) {\n\n            return requestPath.endsWith(testPath.substring(2);\n            // Is regionMatches quicker than endsWith?\n            // return requestPath.regionMatches(requestPath.length() -\n(testPath.length() - 2), testPath, 2, testPath.length() - 2);\n    }\n}\n\nThanks for listening. I hope you consider this change.\n\nDan", "attachment_id": null, "id": 103668, "creator": "daniel.leong@tribalddb.co.uk", "time": "2007-05-25T03:43:59Z", "bug_id": 42517, "creation_time": "2007-05-25T03:43:59Z", "is_private": false}, {"count": 1, "tags": [], "text": "(In reply to comment #0)\n> Is regionMatches quicker than endsWith?\n\nNo, but substring is forbidden.\n\n> I hope you consider this change\n\nMost likely, no.", "attachment_id": null, "id": 103684, "creator": "remm@apache.org", "time": "2007-05-25T09:55:12Z", "bug_id": 42517, "creation_time": "2007-05-25T09:55:12Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 42517, "attachment_id": null, "id": 103686, "time": "2007-05-25T10:33:17Z", "creator": "funkman@joedog.org", "creation_time": "2007-05-25T10:33:17Z", "is_private": false, "text": "[From the 2.4 spec]\n\nSRV.11.1 Use of URL Paths\n\n3. If the last segment in the URL path contains an extension (e.g. .jsp), the \nservlet container will try to match a servlet that handles requests for the \nextension. *An extension is defined as the part of the last segment after the \nlast '.' character.*"}]