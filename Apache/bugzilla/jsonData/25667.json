[{"count": 0, "tags": [], "text": "A leak of 148 bytes happens everytime the function ssl_scache_dbm_retrieve() \ncalls d2i_SSL_SESSION() because the buffer pointed to by ucpData, which is \nlocally malloced in ssl_scache_dbm_retrieve is never freed.  This really adds \nup over time.\n\nAlso, since d2i_SSL_SESSION() changes the address pointed to by ucpData we \nneed to save off a copy of the address in a temporary pointer so that we can \nactually free it.\n\nThere are other source files that do the same thing but I want to get input on \nthis one which is causing me problems.  Attached is a patch file.", "attachment_id": null, "id": 49457, "creator": "dblake@hp.com", "time": "2003-12-19T21:49:54Z", "bug_id": 25667, "creation_time": "2003-12-19T21:49:54Z", "is_private": false}, {"count": 1, "attachment_id": 9649, "creator": "dblake@hp.com", "text": "Created attachment 9649\nPatch containing fix for memory leak in ssl_scache_dbm_retrieve.", "id": 49458, "time": "2003-12-19T21:51:00Z", "bug_id": 25667, "creation_time": "2003-12-19T21:51:00Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 25667, "attachment_id": null, "id": 49459, "time": "2003-12-19T21:51:20Z", "creator": "dblake@hp.com", "creation_time": "2003-12-19T21:51:20Z", "is_private": false, "text": "PatchAvailable"}, {"count": 3, "tags": [], "text": "*** Bug 21376 has been marked as a duplicate of this bug. ***", "attachment_id": null, "id": 55058, "creator": "jorton@redhat.com", "time": "2004-04-01T14:00:50Z", "bug_id": 25667, "creation_time": "2004-04-01T14:00:50Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 25667, "attachment_id": null, "text": "it seems we're affected by this bug too.\nwe are running Apache/2.0.52 (Win32) mod_ssl/2.0.52 OpenSSL/0.9.7d on a NT box.\napache is acting as SSL frontend and reverse proxy for a bunch of applications.\n\nthe child process is starting at around 14M, rapidly growing to 30M and then\nconstantly leaking memory. after 30k accesses, memory usage is at around 50M.\n\nas workaround, we set MaxRequestsPerChild 30000. ", "id": 66292, "time": "2004-11-02T16:28:49Z", "creator": "michael.straessle@bk.admin.ch", "creation_time": "2004-11-02T16:28:49Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 25667, "attachment_id": null, "text": "Switching to shmcb is the best workaround.", "id": 66293, "time": "2004-11-02T16:33:35Z", "creator": "jorton@redhat.com", "creation_time": "2004-11-02T16:33:35Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 25667, "attachment_id": null, "text": "Thanks. Somehow I was convinced that only dbm would work for SSLSessionCache on\nwin32 platforms. This was the case in 1.3, IIRC.", "id": 66332, "time": "2004-11-03T08:52:20Z", "creator": "michael.straessle@bk.admin.ch", "creation_time": "2004-11-03T08:52:20Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 25667, "attachment_id": null, "text": "use of shmcb prevents memory leak as described in comment #4. I would have\nproposed to make shmcb the default for SSLSessionCache, but this has already\nbeen done in HEAD:\nhttp://cvs.apache.org/viewcvs.cgi/httpd-2.0/docs/conf/ssl-std.conf.in?r1=1.6&r2=1.7\n\nIt would be great to see this backported to APACHE_2_0_BRANCH, eventualy with\nsome update to docs (httpd.apache.org/docs-2.0/mod/mod_ssl.html#sslsessioncache)", "id": 66999, "time": "2004-11-17T10:14:50Z", "creator": "michael.straessle@bk.admin.ch", "creation_time": "2004-11-17T10:14:50Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 25667, "attachment_id": null, "text": "*** Bug 34039 has been marked as a duplicate of this bug. ***", "id": 81698, "time": "2005-10-25T12:36:32Z", "creator": "jorton@redhat.com", "creation_time": "2005-10-25T12:36:32Z", "is_private": false}, {"count": 9, "attachment_id": null, "creator": "wrowe@apache.org", "text": "See also notes in Bug 25667", "id": 124289, "time": "2009-01-22T07:17:40Z", "bug_id": 25667, "creation_time": "2009-01-22T07:17:40Z", "tags": [], "is_private": false}, {"count": 10, "tags": [], "creator": "wrowe@apache.org", "text": "Sorry to anyone stuck in an infinite loop, see also Bug 44795 (mixed up bug,\ntwo issues, scroll to Michael's comments).", "id": 124290, "time": "2009-01-22T07:18:22Z", "bug_id": 25667, "creation_time": "2009-01-22T07:18:22Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 25667, "attachment_id": null, "text": "(In reply to comment #10)\n> Sorry to anyone stuck in an infinite loop, see also Bug 44795 (mixed up bug,\n> two issues, scroll to Michael's comments).\n\nIt is actually Bug 44975 intead of 44795.", "id": 124292, "time": "2009-01-22T07:54:14Z", "creator": "mchen@interwoven.com", "creation_time": "2009-01-22T07:54:14Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 25667, "text": "Fixed in trunk by makeing the the ssl session cache use mod_slotmem*", "id": 147073, "time": "2011-06-13T20:38:19Z", "creator": "sf@sfritsch.de", "creation_time": "2011-06-13T20:38:19Z", "is_private": false, "attachment_id": null}]