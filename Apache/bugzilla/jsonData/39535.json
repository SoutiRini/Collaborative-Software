[{"count": 0, "tags": [], "creator": "steffen.bechtel@web.de", "attachment_id": null, "id": 88972, "time": "2006-05-09T20:03:16Z", "bug_id": 39535, "creation_time": "2006-05-09T20:03:16Z", "is_private": false, "text": "I am POSTING proper login data to a url which results in a redirect (302) with\nthe created application cookies. HttpSampler2 does not supply the cookies to the\nresulting HTTP GET request.\n\nCould someone please have a look at the methods \"setConnectionCookie\" and\n\"saveConnectionCookies\"?\n\nAs a dirty hack I added the following source to the method \"setupConnection\"\nright  after the line \"String cookies = setConnectionCookie(httpMethod, u,\ngetCookieManager());\":\n\nif (getCookieManager() != null) {\n    for (PropertyIterator iter = getCookieManager().getCookies().iterator();\niter.hasNext();) {\n        Cookie cookie = (Cookie) iter.next().getObjectValue();\n        org.apache.commons.httpclient.Cookie httpCookie = new\norg.apache.commons.httpclient.Cookie();\n        httpCookie.setDomain(cookie.getDomain());\n        httpCookie.setDomainAttributeSpecified(true);\n        httpCookie.setName(cookie.getName());\n        httpCookie.setPath(cookie.getPath());\n        httpCookie.setPathAttributeSpecified(true);\n        httpCookie.setValue(cookie.getValue());\n       \thttpState.addCookie(httpCookie);\n    }\n}\n\nIt fixes my problem but I know that this is not the correct browser behaviour\n(no URL, Path, expiration, etc. checks). Therefore I called this a \"dirty hack\"."}, {"count": 1, "tags": [], "creator": "olivere@datacom.co.nz", "attachment_id": null, "id": 89156, "time": "2006-05-16T02:06:55Z", "bug_id": 39535, "creation_time": "2006-05-16T02:06:55Z", "is_private": false, "text": "Can confirm this on nightly build 2.1.2 from the 15.05.2006. Makes Sampler2\nunusable on sites with redirect and cookies.\n\n"}, {"count": 2, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 89166, "time": "2006-05-16T16:51:16Z", "bug_id": 39535, "creation_time": "2006-05-16T16:51:16Z", "is_private": false, "text": "Unless you need to see the redirects, try selecting \"Redirect Automatically\".\n\nThis should work - if not, please let us know.\n\nOf course, the follow redirects should also work, but that may take longer to fix."}, {"count": 3, "attachment_id": null, "bug_id": 39535, "text": "I enabled \"Redirect Automatically\" as well with no change (even compiled with\nhttpclient 2.0.2). Therefore I added my dirty hack code which finally helped\nout. Didn't have the time to look at the issue in depth and I won't for quite\nsome time. Otherwise I would come up with the \"real solution\" instead of a hack.\n\nEthereal proved the issue. You can easyly reconstruct the scenario by posting\nlogin data to the standard BEA WLS admin console following the redirects.\n\nURL: http://localhost:7001/console/j_security_check\nPOST Data:\nj_username = weblogic\nj_password = weblogic\n\nI would appreciate your investigation of this issue very much.", "id": 89179, "time": "2006-05-16T22:35:40Z", "creator": "steffen.bechtel@web.de", "creation_time": "2006-05-16T22:35:40Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "text": "HTTPSampler2 is ignoring \"Redirect automatically\", and is treating \"Follow\nredirects\" as if it was Redirect Automatically - so no wonder it made no difference.\n\nI need to fix these bugs, and find out why the cookies are not being propagated.", "id": 89183, "time": "2006-05-16T23:18:59Z", "bug_id": 39535, "creation_time": "2006-05-16T23:18:59Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "text": "I've updated the sampler so that Auto Redirect is handled correctly.\nAs far as I can make out, redirects do now work OK.\nHowever, you cannot Autoredirect on a POST - HTTPClient does not allow it.\n\nI could not find any problems with the cookie handling, so I've added some debug\nlogging - just enable debug for the sampler. You can do this with the new Help\nMenu item - just select the Gui test element, click the appropriate Help item.\n\nThe nightly build 2-1.20060517 includes the redirect fix.\n\nPlease report any further problems...", "attachment_id": null, "id": 89226, "creation_time": "2006-05-17T22:18:25Z", "time": "2006-05-17T22:18:25Z", "creator": "sebb@apache.org", "bug_id": 39535, "is_private": false}, {"count": 6, "tags": [], "bug_id": 39535, "attachment_id": null, "text": "I assume this is now fixed. If not (and if the current nightly also has the\nproblem) please reopen with details", "id": 89739, "time": "2006-06-04T01:22:15Z", "creator": "sebb@apache.org", "creation_time": "2006-06-04T01:22:15Z", "is_private": false}]