[{"count": 0, "tags": [], "bug_id": 57936, "text": "According to https://svn.apache.org/repos/asf/tomcat/trunk/java/org/apache/tomcat/util/net/Nio2Endpoint.java there is a statement saying that if the acceptorThreadCount is 0, it is being set to 1 since NIO2 does not allow any form of IO concurrency.\n\nSetting the acceptorThreadCount to 2 in server.xml will throw an error (\"Socket accept failed\"). Wouldn't it be better to change the code\n\n        // Initialize thread count defaults for acceptor, poller\n        if (acceptorThreadCount == 0) {\n            // NIO2 does not allow any form of IO concurrency\n            acceptorThreadCount = 1;\n        }\n\ninto\n\n        // Initialize thread count defaults for acceptor, poller\n        if (acceptorThreadCount != 1) {\n            // NIO2 does not allow any form of IO concurrency\n            acceptorThreadCount = 1;\n        }\n\nto avoid this behaviour?\n\nThanks,\nOliver", "id": 183040, "time": "2015-05-19T14:24:07Z", "creator": "oliver@kant.net", "creation_time": "2015-05-19T14:24:07Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "is_private": false, "id": 183053, "attachment_id": null, "bug_id": 57936, "creation_time": "2015-05-20T07:31:43Z", "time": "2015-05-20T07:31:43Z", "text": "This looks like a good idea, and it will be included in 8.0.24."}]