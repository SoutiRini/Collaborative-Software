[{"count": 0, "tags": [], "text": "In the documentation for XSLT task and Library Dependencies, please word more strongly the recommendation to use Xalan library when using Sun JDK 1.5+.\n\nCan you also mention that out-of-the-box JDK 1.5+ will add excessive namespaces during identity transformation?  It leads to poor resulting documents readability and in many cases failure to process these documents.  I first encountered this problem trying to transform default web.xml file that comes with Tomcat.  After this transformation the Tomcat would not start at all.\n\nI had spent many hours before finding the real culprit: com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl shipped as default XSLT transformer in 1.5+.\n\nOne other good thing to mention is that you need both xalan.jar and serializer.jar from the xalan distribution.  I mention it here because it was a source of confusion in discussion of workaround for bug 43981.\n\nMy current environment:\nOS : Fedora-Core linux: kernel-2.6.23.1-42.fc8\nJava: Java(TM) SE Runtime Environment (build 1.6.0_06-b02)\nAnt: 1.7.0\nXalan: 2.7.1\n\nAttached are build.xml, test-style.xslt and test.xml that should be copied into the same directory in order to reproduce this problem:\n\nBelow is the output of identity transformation example:\n\nHere is an original test.xml document:\n\n<?xml version = \"1.0\" encoding = \"UTF-8\" ?>\n<test xmlns=\"urn:test\">\n  <element1>\n    <with-text>text</with-text>\n  </element1>\n  <element2>\n    <with-text>text</with-text>\n  </element2>\n</test>\n\nAfter XSLT identity transformation:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?><ns0:test xmlns:ns0=\"urn:test\" xmlns=\"urn:test\">\n  <ns1:element1 xmlns:ns1=\"urn:test\">\n    <ns2:with-text xmlns:ns2=\"urn:test\">text</ns2:with-text>\n  </ns1:element1>\n  <ns3:element2 xmlns:ns3=\"urn:test\">\n    <ns4:with-text xmlns:ns4=\"urn:test\">text</ns4:with-text>\n  </ns3:element2>\n</ns0:test>\n\nNow XSLT transformation after you add xalan.jar and serializer.jar from the Xalan-J distribution to ${ANT_HOME}/lib\n<?xml version=\"1.0\" encoding=\"UTF-8\"?><test xmlns=\"urn:test\">\n  <element1>\n    <with-text>text</with-text>\n  </element1>\n  <element2>\n    <with-text>text</with-text>\n  </element2>\n</test>", "attachment_id": null, "id": 116660, "creation_time": "2008-05-15T10:04:15Z", "time": "2008-05-15T10:04:15Z", "creator": "alex-pub.apache-ant@reflexion.net", "bug_id": 45011, "is_private": false}, {"count": 1, "tags": [], "creator": "alex-pub.apache-ant@reflexion.net", "attachment_id": 21971, "is_private": false, "id": 116663, "time": "2008-05-15T10:08:32Z", "bug_id": 45011, "creation_time": "2008-05-15T10:08:32Z", "text": "Created attachment 21971\nbuild.xml"}, {"count": 2, "tags": [], "bug_id": 45011, "is_private": false, "id": 116664, "creation_time": "2008-05-15T10:10:08Z", "time": "2008-05-15T10:10:08Z", "creator": "alex-pub.apache-ant@reflexion.net", "text": "Created attachment 21972\ntest.xml", "attachment_id": 21972}, {"count": 3, "tags": [], "creator": "alex-pub.apache-ant@reflexion.net", "text": "Created attachment 21973\ntest-style.xslt", "id": 116665, "time": "2008-05-15T10:10:40Z", "bug_id": 45011, "creation_time": "2008-05-15T10:10:40Z", "is_private": false, "attachment_id": 21973}, {"count": 4, "tags": [], "text": "svn revision 805374", "is_private": false, "id": 129765, "creation_time": "2009-08-18T04:45:36Z", "time": "2009-08-18T04:45:36Z", "creator": "bodewig@apache.org", "bug_id": 45011, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 45011, "is_private": false, "id": 129780, "creation_time": "2009-08-18T10:13:06Z", "time": "2009-08-18T10:13:06Z", "creator": "jglick@apache.org", "text": "The reporter should file an issue on bugs.sun.com to get the problem fixed at the source. BTW the simpler identity transformation\n\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n    <xsl:output method=\"xml\" indent=\"yes\"/>\n    <xsl:template match=\"@*|node()\">\n        <xsl:copy>\n            <xsl:apply-templates select=\"@*|node()\"/>\n        </xsl:copy>\n    </xsl:template>\n</xsl:stylesheet>\n\nworks fine.", "attachment_id": null}]