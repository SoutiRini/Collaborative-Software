[{"count": 0, "tags": [], "creator": "fop-dev@cumiskey.com", "text": "From: Sean.Mullan@Sun.COM [mailto:Sean.Mullan@Sun.COM]\nSent: 24 January 2007 14:54\nTo: security-dev@xml.apache.org\nSubject: Re: BufferOverflowException when encrypting large documents\n\nChris Harris wrote:\n> Hi all,\n> \n>  \n> \n> We have a requirement to encrypt large xml documents and our \n> experiencing the following error:\n> \n>  \n> \n> Caused by: java.nio.BufferOverflowException\n> \n>             at\n> java.nio.charset.CoderResult.throwException(CoderResult.java:259)\n> \n>             at\n> java.lang.StringCoding$CharsetSE.encode(StringCoding.java:340)\n> \n>             at java.lang.StringCoding.encode(StringCoding.java:374)\n> \n>             at java.lang.StringCoding.encode(StringCoding.java:380)\n> \n>             at java.lang.String.getBytes(String.java:590)\n> \n>             at\n> org.apache.xml.security.encryption.XMLCipher.encryptData(Unknown \n> Source)\n> \n>             at\n> org.apache.xml.security.encryption.XMLCipher.encryptElementContent(Unk\n> nown\n> Source)\n> \n>             at\n> org.apache.xml.security.encryption.XMLCipher.doFinal(Unknown Source)\n> \n>             at\n> org.apache.ws.security.message.WSSecEncrypt.doEncryption(WSSecEncrypt.\n> java:455)\n> \n>  \n> \n>  \n> \n> After doing some research, I discovered that this is actually being \n> caused by a bug in the JVM:\n> \n>  \n> \n> http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4949631\n> \n>  \n> \n> The sun bug log contains a number of workarounds however to get around \n> this issue the XMLCipher class would need to change the String before \n> it calls getBytes. I have attached a patch version of XMLCipher along \n> with a String utility class.", "id": 98742, "time": "2007-01-30T01:49:12Z", "bug_id": 41494, "creation_time": "2007-01-30T01:49:12Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "fop-dev@cumiskey.com", "attachment_id": 19484, "id": 98761, "time": "2007-01-30T08:46:04Z", "bug_id": 41494, "creation_time": "2007-01-30T08:46:04Z", "is_private": false, "text": "Created attachment 19484\nFixes BufferOverflowException when encrypting large documents"}, {"count": 2, "tags": [], "bug_id": 41494, "text": "The bug that causes this problem\n(http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4949631)\nhas since been fixed in JDK 6, JDK 5 (update 3), and JDK 1.4.2_08. Please\nupdate your JDK and the problem should be fixed.", "id": 99335, "attachment_id": null, "creator": "sean.mullan@oracle.com", "creation_time": "2007-02-13T08:49:07Z", "time": "2007-02-13T08:49:07Z", "is_private": false}, {"count": 3, "tags": [], "creator": "sean.mullan@oracle.com", "is_private": false, "text": "Closing old bugs.", "id": 108405, "time": "2007-09-19T12:26:23Z", "bug_id": 41494, "creation_time": "2007-09-19T12:26:23Z", "attachment_id": null}]