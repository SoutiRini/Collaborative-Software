[{"count": 0, "tags": [], "creator": "davidw@gpsoft.co.uk", "attachment_id": null, "text": "Start the tomcat web server with jsvc and then run at least two simultaneous \nclient web sessions with some (complex) java processing. The JVM soon crashes \nwith what looks like a glibc incompatibility. This crash never happens when \nrunning without jsvc.\n\nNotes:\n\nThe same behaviour happens with Server port 80 or client port 8080 (port 80 \nwithout jsvc is not possible).\n\nThe same behaviour happens with (Tomcat4 and Tomcat5) \norg.apache.catalina.connector.http.HttpConnector and with\norg.apache.coyote.tomcat4.CoyoteConnector and with\norg.apache.coyote.tomcat5.CoyoteConnector\n\nThe same behaviour happens with Redhat Linux versions 7, 8 and Fedora\n\nThe same behaviour happens on two different (Compaq) server machines\n\nThis bug is a blocker because it prevents production use where server security \nis vital.", "id": 60476, "time": "2004-07-12T14:05:58Z", "bug_id": 30052, "creation_time": "2004-07-12T14:05:58Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 30052, "text": "Additionally, the same behaviour happens with downloaded commons-daemon CVS \nbranches HEAD, TOMCAT-5.0.19 and Ver 1.0", "id": 60478, "time": "2004-07-12T14:39:50Z", "creator": "davidw@gpsoft.co.uk", "creation_time": "2004-07-12T14:39:50Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "I've also run this test under windows with the standard procrun 2.0 \ninstallation, which runs OK without error.\n\nThe problem only occurs when using jsvc. It's not a problem with detecting the \nconfiguration, or if it is, then there is no error message on two different \nhardware platforms.\n\nIt could be some sort of memory leak (a fair amount of web server work happens \nfor the test), but the actual crash seems to be some re-entrant (thread safe) \nissue with glibc, because it requires (at least) TWO web sessions.\n\nThere is no error at all if TOMCAT is started from the shell script, no matter \nhow many web sessions or how long the test is run for.", "attachment_id": null, "id": 61392, "creator": "davidw@gpsoft.co.uk", "time": "2004-07-30T17:24:33Z", "bug_id": 30052, "creation_time": "2004-07-30T17:24:33Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 30052, "attachment_id": null, "text": "Does it happen with 5.0.28?", "id": 66119, "time": "2004-10-29T18:14:53Z", "creator": "yoavs@computer.org", "creation_time": "2004-10-29T18:14:53Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 30052, "text": "\nTest carried out with Tomcat 5.0.28 \nusing JDK 1.5, \nfedora core 1 on \nold intel celeron 440 server\n\nThis test and the previous tests show that the problem does not depend\non any of:-\n1)\tThe version of Linux\n2)\tThe JDK version, or\n3)\tThe server hardware\n\nThe crash happens whan a new web session begins processing some complex\n(lots of exception handling) java code that is already\nbeing executed by an existing web session.\n\nBut there is no error when not using jsvc (by calling java from a shell script).\n\nOnly when using jsvc, this (possibly related) error message appears at the\nstart of Catalina.out:-\n\n\tJava HotSpot(TM) Client VM warning: Can't detect initial thread stack \nlocation - find_vma failed\n\nI can't find much information on this. I think it only happens with JDK 1.5\n", "id": 66281, "time": "2004-11-02T12:18:26Z", "creator": "davidw@gpsoft.co.uk", "creation_time": "2004-11-02T12:18:26Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 30052, "text": "AFAIK, Java 5 is designed for recent glibc and kernels. This means Linux 2.6,\nand FC 3 rather than FC 1 (or even 2, which from what I understood was not very\nstable).\nAlso, you should report the issue for commons-daemon (if it still exists), not\nTomcat.", "id": 69200, "time": "2005-01-04T10:47:52Z", "creator": "remm@apache.org", "creation_time": "2005-01-04T10:47:52Z", "is_private": false, "attachment_id": null}]