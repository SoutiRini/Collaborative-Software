[{"count": 0, "tags": [], "text": "I'm trying to run Cactus 13-1.4.1 [1] with the Tomcat 5 nightly from 20030424.\n\nMy build-tests.xml file, which works fine when running with Tomcat 4.x, has this\ntaskdef:\n\n        <taskdef name=\"runservertests\"\n            classname=\"org.apache.cactus.ant.RunServerTestsTask\">\n            <classpath>\n                <pathelement location=\"${cactus.ant.jar}\"/>\n                <pathelement path=\"${java.class.path}\"/>\n            </classpath>\n        </taskdef>\n\nWhich is used from this target:\n\n    <target name=\"test.tomcat.50\" depends=\"prepare.test.tomcat.50\">\n\n        <!-- Start the servlet engine, wait for it to be started, run the\n             unit tests, stop the servlet engine, wait for it to be stopped.\n             The servlet engine is automatically stopped if the tests fail for\n             any reason.-->\n\n        <runservertests testURL=\"http://localhost:8080/test\"\n            startTarget=\"start.tomcat.50\"\n            stopTarget=\"stop.tomcat.50\"\n            testTarget=\"run.cactus.test\"/>\n\n    </target>\n\nWhich calls this target\n\n    <target name=\"start.tomcat.50\">\n\n        <echo message=\"${out.tomcat.50.dir}\"/>\n\n        <java classname=\"org.apache.catalina.startup.Bootstrap\" fork=\"yes\">\n            <jvmarg value=\"-Dcatalina.home=${tomcat.home.50}\"/>\n            <jvmarg value=\"-Dcatalina.base=${tomcat.home.50}\"/>\n            <jvmarg value=\"-Djava.endorsed.dirs=${tomcat.home.50}\"/>\n            <jvmarg value=\"-Djava.io.tmpdir=${tomcat.home.50}/temp\"/>\n            <arg value=\"-config\"/>\n            <arg value=\"${out.tomcat.50.dir}/conf/server.xml\"/>\n            <!-- uncomment this to attach the debugger to the tomcat vm -->\n            <jvmarg line=\"${debug.jvm.args}\"/>\n\n\n<!--            <arg value=\"-config\"/>\n            <arg value=\"${out.tomcat.50.dir}/conf/server.xml\"/> -->\n            <arg value=\"start\"/>\n            <classpath refid=\"tomcat.50.classpath\"/>\n        </java>\n\n    </target>\n\nNow, the \"start.tomcat.50\" target should start and return, so the \"testTarget\"\ncan run, but it doesn't return.  \n\nUsing ant -verbose reveals that the java VM invocation line for starting tomcat\nis as in the first attachment to this bug.  And indeed, when I run this java vm\ninvocation line from the command line, it does not return.\n\nI think this is a bug.\n\n\n\n\n\n\n\n[1]\nhttp://jakarta.apache.org/builds/jakarta-cactus/release/v1.4.1/jakarta-cactus-13-1.4.1.zip", "attachment_id": null, "id": 36426, "creator": "edburns@acm.org", "time": "2003-04-30T23:33:58Z", "bug_id": 19506, "creation_time": "2003-04-30T23:33:58Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 19506, "attachment_id": 6112, "id": 36427, "time": "2003-04-30T23:34:58Z", "creator": "edburns@acm.org", "creation_time": "2003-04-30T23:34:58Z", "is_private": false, "text": "Created attachment 6112\nBatch file equivalent to java vm invocation that starts tomcat from built-tests.xml"}, {"count": 2, "attachment_id": null, "creator": "remm@apache.org", "text": "If you want that to return, you should use startd.", "id": 36428, "time": "2003-04-30T23:44:07Z", "bug_id": 19506, "creation_time": "2003-04-30T23:44:07Z", "tags": [], "is_private": false}]