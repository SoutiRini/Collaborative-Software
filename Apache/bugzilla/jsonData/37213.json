[{"count": 0, "tags": [], "bug_id": 37213, "is_private": false, "text": "Hi all,\n\nI got problem when running tomcat with -security option.\n\nThis is output\nD:\\Tomcat 5.5.12\\bin>tomcat5 -security\n[2005-10-24 15:10:09] [402  prunsrv.c] [error]\nThe operation completed successfully.\n[2005-10-24 15:10:09] [1246 prunsrv.c] [error]\nLoad configuration failed\n\nIf i start tomcat without -security option it work fine.\nWhat happen with me?", "id": 81597, "time": "2005-10-24T10:11:53Z", "creator": "banv2000@yahoo.com", "creation_time": "2005-10-24T10:11:53Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 37213, "text": "Does it happen with stand-alone Tomcat?  Or only with the Windows service?  Does\nit happen out of the box?", "id": 82934, "time": "2005-11-28T21:29:28Z", "creator": "yoavs@computer.org", "creation_time": "2005-11-28T21:29:28Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": 17509, "bug_id": 37213, "is_private": false, "id": 85047, "time": "2006-01-26T11:02:54Z", "creator": "g.kreutzer@web.de", "creation_time": "2006-01-26T11:02:54Z", "tags": [], "text": "Created attachment 17509\nlog messages"}, {"count": 3, "attachment_id": null, "bug_id": 37213, "is_private": false, "id": 85048, "time": "2006-01-26T11:05:37Z", "creator": "g.kreutzer@web.de", "creation_time": "2006-01-26T11:05:37Z", "tags": [], "text": "Hi,\ni have the same problems since Tomcat 5.5.x. The latest test with stand-alone\nTomcat 5.5.15 on W2K generates the folowing log messages: (full log as attachment)\n\nc:\\tomcat5\\bin>catalina run -security\nUsing CATALINA_BASE:   c:\\tomcat5\nUsing CATALINA_HOME:   c:\\tomcat5\nUsing CATALINA_TMPDIR: c:\\tomcat5\\temp\nUsing JRE_HOME:        c:\\jdk1.5\nUsing Security Manager\n26.01.2006 10:42:36 org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: The Apache Tomcat Native library which allows optimal performance in\nproduction environments was not found on the\njava.library.path:\nc:\\jdk1.5\\bin;.;C:\\WINNT\\system32;C:\\WINNT;C:\\WINNT\\system32;C:\\WINNT;C:\\WINNT\\System32\\Wbem;E:\\MySQL\n4.1\\bin;c:\\_training\\bin;c:\\jdk1.5\\bin;\n26.01.2006 10:42:36 org.apache.coyote.http11.Http11BaseProtocol init\nINFO: Initializing Coyote HTTP/1.1 on http-8080\n26.01.2006 10:42:36 org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 1344 ms\n26.01.2006 10:42:37 org.apache.catalina.core.StandardService start\nINFO: Starting service Catalina\n26.01.2006 10:42:37 org.apache.catalina.core.StandardEngine start\nINFO: Starting Servlet Engine: Apache Tomcat/5.5.15\n26.01.2006 10:42:37 org.apache.catalina.core.StandardHost start\nINFO: XML validation disabled\n26.01.2006 10:42:38 org.apache.catalina.core.StandardPipeline registerValve\nINFO: Can't register valve org.apache.catalina.core.StandardContextValve[/ear5]\norg.apache.commons.logging.LogConfigurationException:\njava.lang.ExceptionInInitializerError (Caused by java.lang.Excepti\nonInInitializerError)\n        at\norg.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:538)\n        at\norg.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)\n        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)\n        at org.apache.catalina.core.ContainerBase.getLogger(ContainerBase.java:380)\n        at org.apache.catalina.valves.ValveBase.createObjectName(ValveBase.java:256)\n        at\norg.apache.catalina.core.StandardPipeline.registerValve(StandardPipeline.java:296)\n        at\norg.apache.catalina.core.StandardPipeline.start(StandardPipeline.java:233)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4103)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)\n        at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:121)\n        at\norg.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:143)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:737)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)\n        at\norg.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:603)\n        at\norg.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:535)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1118)\n        at\norg.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:310)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1020)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:718)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1012)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:442)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:450)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:551)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:275)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nCaused by: java.lang.ExceptionInInitializerError\n        at org.apache.log4j.Logger.getLogger(Logger.java:85)\n        at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:102)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at\nsun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)\n        at\norg.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)\n        ... 32 more\nCaused by: java.security.AccessControlException: access denied\n(java.io.FilePermission \\ear5.log write)\n        at\njava.security.AccessControlContext.checkPermission(AccessControlContext.java:264)\n        at java.security.AccessController.checkPermission(AccessController.java:427)\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)\n        at java.lang.SecurityManager.checkWrite(SecurityManager.java:962)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:169)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:102)\n        at org.apache.log4j.FileAppender.setFile(FileAppender.java:272)\n        at\norg.apache.log4j.RollingFileAppender.setFile(RollingFileAppender.java:156)\n        at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:151)\n        at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:247)\n        at\norg.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:123)\n        at\norg.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:87)\n        at\norg.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:645)\n        at\norg.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:603)\n        at\norg.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:500)\n        at\norg.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:406)\n        at\norg.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:432)\n        at\norg.apache.log4j.helpers.OptionConverter.selectAndConfigure(OptionConverter.java:460)\n        at org.apache.log4j.LogManager.<clinit>(LogManager.java:113)\n        ... 39 more\n[ERROR] Digester - End event threw exception\n<java.lang.reflect.InvocationTargetException>java.lang.reflect.InvocationTa\nrgetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at\norg.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:898)\n        at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:192)\n        at org.apache.tomcat.util.digester.Rule.end(Rule.java:228)\n        at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1057)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:633)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScan\nnerImpl.java:1241)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XML\nDocumentFragmentScannerImpl.java:1685)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScanne\nrImpl.java:368)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:834)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:148)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1242)\n        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1561)\n        at\norg.apache.catalina.startup.ContextConfig.processDefaultWebConfig(ContextConfig.java:697)\n        at\norg.apache.catalina.startup.ContextConfig.defaultWebConfig(ContextConfig.java:634)\n        at org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:1054)\n        at\norg.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:261)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4111)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)\n        at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:121)\n        at\norg.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:143)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:737)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)\n        at\norg.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:603)\n        at\norg.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:535)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1118)\n        at\norg.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:310)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1020)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:718)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1012)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:442)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:450)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:551)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:275)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nCaused by: org.apache.commons.logging.LogConfigurationException:\njava.lang.NoClassDefFoundError (Caused by java.lang.NoC\nlassDefFoundError)\n        at\norg.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:538)\n        at\norg.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)\n        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)\n        at org.apache.catalina.core.ContainerBase.getLogger(ContainerBase.java:380)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:996)\n        at org.apache.catalina.core.StandardWrapper.start(StandardWrapper.java:1625)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)\n        at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:121)\n        at\norg.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:143)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:737)\n        at\norg.apache.catalina.core.StandardContext.addChild(StandardContext.java:1942)\n        ... 48 more\nCaused by: java.lang.NoClassDefFoundError\n        at org.apache.log4j.Logger.getLogger(Logger.java:85)\n        at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:102)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at\nsun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)\n        at\norg.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)\n        ... 59 more\n\n26.01.2006 10:42:38 org.apache.catalina.startup.ContextConfig\nprocessDefaultWebConfig\nSCHWERWIEGEND: Parse error in default web.xml\norg.apache.commons.logging.LogConfigurationException:\njava.lang.NoClassDefFoundError (Caused by java.lang.NoClassDefFoun\ndError)\n        at\norg.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2719)\n        at\norg.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2745)\n        at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1060)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:633)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScan\nnerImpl.java:1241)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XML\nDocumentFragmentScannerImpl.java:1685)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScanne\nrImpl.java:368)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:834)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:148)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1242)\n        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1561)\n        at\norg.apache.catalina.startup.ContextConfig.processDefaultWebConfig(ContextConfig.java:697)\n        at\norg.apache.catalina.startup.ContextConfig.defaultWebConfig(ContextConfig.java:634)\n        at org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:1054)\n        at\norg.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:261)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4111)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)\n        at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:121)\n        at\norg.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:143)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:737)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)\n        at\norg.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:603)\n        at\norg.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:535)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1118)\n        at\norg.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:310)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1020)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:718)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1012)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:442)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:450)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:551)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:275)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\n26.01.2006 10:42:38 org.apache.catalina.startup.ContextConfig\nprocessDefaultWebConfig\nSCHWERWIEGEND: Occurred at line 83 column 15\n[ERROR] Digester - End event threw exception\n<java.lang.reflect.InvocationTargetException>java.lang.reflect.InvocationTa\nrgetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at\norg.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:898)\n        at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:192)\n        at org.apache.tomcat.util.digester.Rule.end(Rule.java:228)\n        at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1057)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:633)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScan\nnerImpl.java:1241)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XML\nDocumentFragmentScannerImpl.java:1685)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScanne\nrImpl.java:368)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:834)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:148)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1242)\n        at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1561)\n        at\norg.apache.catalina.startup.ContextConfig.applicationWebConfig(ContextConfig.java:350)\n        at org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:1055)\n        at\norg.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:261)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4111)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)\n        at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:121)\n        at\norg.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:143)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:737)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)\n        at\norg.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:603)\n        at\norg.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:535)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1118)\n        at\norg.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:310)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1020)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:718)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1012)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:442)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:450)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:700)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:551)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:275)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nCaused by: org.apache.commons.logging.LogConfigurationException:\njava.lang.NoClassDefFoundError (Caused by java.lang.NoC\nlassDefFoundError)\n        at\norg.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:538)\n        at\norg.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)\n        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:370)\n        at org.apache.catalina.core.ContainerBase.getLogger(ContainerBase.java:380)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:996)\n        at org.apache.catalina.core.StandardWrapper.start(StandardWrapper.java:1625)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)\n        at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:121)\n        at\norg.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:143)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:737)\n        at\norg.apache.catalina.core.StandardContext.addChild(StandardContext.java:1942)\n        ... 47 more\nCaused by: java.lang.NoClassDefFoundError\n        at org.apache.log4j.Logger.getLogger(Logger.java:85)\n        at org.apache.commons.logging.impl.Log4JLogger.<init>(Log4JLogger.java:102)\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at\nsun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:494)\n        at\norg.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:529)\n        ... 58 more\n\n26.01.2006 10:42:38 org.apache.catalina.startup.ContextConfig applicationWebConfig\nSCHWERWIEGEND: Parse error in application web.xml file at\njndi:/localhost/ear5/WEB-INF/web.xml\norg.apache.commons.logging.LogConfigurationException:         ... 15 more\nBatchvorgang abbrechen (J/N)? j\n\n"}, {"count": 4, "tags": [], "creator": "pr@objektpark.de", "attachment_id": null, "is_private": false, "id": 85049, "time": "2006-01-26T11:25:49Z", "bug_id": 37213, "creation_time": "2006-01-26T11:25:49Z", "text": "You not allow you app to write the log file.\n\nCaused by: java.security.AccessControlException: access denied\n(java.io.FilePermission \\ear5.log write)\n        at\n\nAdd a grant to to you conf/catalina.policy:\n\nexample (not tested):\n\ngrant codeBase \"file:${catalina.base}/webapps/<your app>/-\" {\n   permission java.lang.FilePermission \"${catalina.base}${/}ear5.log\", \"read,write,delete\" ;\n};\n\nBetter use at your log4j.properties ${catalina.base}/logs/ear5.log as file.\nFor log rotation you need more permissions!\n\nHope you have bundle the commons-logging.jar (1.0.4) at WEB-INF/lib.\n\nPeter\n"}, {"count": 5, "tags": [], "bug_id": 37213, "text": "Sorry,\n\nCorrect Permission is java.io.FilePermission\n\ngrant codeBase \"file:${catalina.base}/webapps/<your app>/-\" {\n   permission java.io.FilePermission \"${catalina.base}${/}ear5.log\", \"read,write,delete\" ;\n};\n", "id": 85051, "time": "2006-01-26T11:39:16Z", "creator": "pr@objektpark.de", "creation_time": "2006-01-26T11:39:16Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "I got the same problem.\n\nThe problem occurs if log4j is configured to write to a file where log4j th\nwebapp does not have permission to write to.\n\nthe original exception\njava.security.AccessControlException: access denied (java.io.FilePermission\n\\_training\\webapps\\fear\\WebRoot\\l\nog.html write)\n\ngets some how converted (log4j??) to a \nCaused by: java.lang.NoClassDefFoundError\n\nand than converted by commons-logging to a :\njava.lang.reflect.InvocationTargetException\n\nEach time the a static initialization of logger is done a\njava.lang.ExceptionInInitializerError is thrown.\n\nThis makes tomcat loop trying to clean up the webapplication:\n...\nGRAVE: Context [/max64] startup failed due to previous errors\n24-feb-2006 17.16.09 org.apache.catalina.core.StandardContext start\nGRAVE: Exception during cleanup after start failed\n...\n24-feb-2006 17.16.31 org.apache.catalina.startup.ContextConfig applicationWebConfig\nGRAVE: Context [/max64] startup failed due to previous errors\n24-feb-2006 17.16.31 org.apache.catalina.core.StandardContext start\nGRAVE: Exception during cleanup after start failed", "is_private": false, "id": 86203, "creator": "luigi.zanderighi@glz.it", "time": "2006-02-24T18:57:52Z", "bug_id": 37213, "creation_time": "2006-02-24T18:57:52Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 37213, "attachment_id": null, "is_private": false, "id": 94995, "time": "2006-10-19T16:03:30Z", "creator": "markt@apache.org", "creation_time": "2006-10-19T16:03:30Z", "text": "Having to add the necessary permissions to catalina.policy to enable your\nlogging configuration is a question for the users list."}]