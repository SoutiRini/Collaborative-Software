[{"count": 0, "tags": [], "bug_id": 53335, "text": "I have a target that calls a java class that does some output. That output is redirected into a file.\nHowever redirection only works, if the target is called by antcall directly, but not if that antcall is created by some script.\nTestcase is below.\nBoth outputs should be redirected...\n\n\n\n<project name=\"specification\">\n\n\t<target name=\"testcase-echo\">\n\t\t<java classname=\"C\" classpath=\".\" output=\"output.txt\" />\n\t</target> \n\t\t\n\t<target name=\"testcase\">\n\t\t\n\t\t<echo>${ant.version}</echo>\n\t\t<!-- prepare -->\n    <echo file=\"C.java\">public class C {public static void main(String[] x) {System.out.println(\"Hello\");}}</echo>\n    <javac srcdir=\".\" destdir=\".\" includes=\"C.java\"/>\n\n\t\t<!-- manually -->\n\t\t<property name=\"output\" value=\"not loaded\" />\n\t\t<delete file=\"output.txt\" failonerror=\"no\" />\n    <antcall target=\"testcase-echo\" />\n\t\t<loadfile property=\"manually\" srcFile=\"output.txt\" />\n\t\t<echo>manual call: ${manually}</echo>\n\n\t\t<!-- scripted -->\n\t\t<property name=\"output\" value=\"not loaded\" />\n\t\t<delete file=\"output.txt\" failonerror=\"no\" />\n\t\t<script language=\"javascript\"> <![CDATA[ \n      var call = specification.createTask( \"antcall\" );         \n\t\t\tcall.setTarget( \"testcase-echo\" );\n\t\t\tcall.execute(); \n\t\t]]></script>\n\t\t<loadfile property=\"scripted\" srcFile=\"output.txt\" />\n\t\t<echo>script call: ${scripted}</echo>\n\t\t\n  </target>\n\n</project>", "id": 159557, "time": "2012-05-31T11:42:13Z", "creator": "issues.apache.org@steffen-heil.de", "creation_time": "2012-05-31T11:42:13Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "Anything sent to System.out is passed to the task's handleOutput method.  <antcall> forwards it to the task it executes explicitly.\n\nIn the case of your scripted task, System.out's output never reaches the antcall, much less the java task and thus cannot be handled by the outputproperty.  You have to forward it explicitly.  See the handleOutput/Input/ErrorOutput/Flush/ErrorFlush methods in CallTarget.", "attachment_id": null, "id": 160058, "creator": "bodewig@apache.org", "time": "2012-06-17T05:52:31Z", "bug_id": 53335, "creation_time": "2012-06-17T05:52:31Z", "is_private": false}]