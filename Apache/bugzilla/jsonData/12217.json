[{"count": 0, "tags": [], "bug_id": 12217, "attachment_id": null, "id": 22078, "time": "2002-09-01T12:45:23Z", "creator": "nicolaken@apache.org", "creation_time": "2002-09-01T12:45:23Z", "is_private": false, "text": "Adds a property\n\n ant.file.[projectname]\n\nproperty for every imported project file.\n\nIn this way a file that is imported is informed of his absolute location and can\nresolve the path for his resources."}, {"count": 1, "tags": [], "text": "Created attachment 2883\nProjectHelperImpl2.java.diff", "is_private": false, "id": 22079, "creator": "nicolaken@apache.org", "time": "2002-09-01T12:47:15Z", "bug_id": 12217, "creation_time": "2002-09-01T12:47:15Z", "attachment_id": 2883}, {"count": 2, "tags": [], "text": "Can this patch be applied?\nOk, the files have changed I think, but the patch is really trivial and adds\nlots of flexibility; in Centipede (a real-life example that uses embed) we\ncannot basically do without anymore, since each imported antfile needs to know\nwhere the files are relative to its location.\n\n             if( context.ignoreProjectTag ) {\n+                project.setUserProperty(\"ant.file.\"+context.currentProjectName,\ncontext.buildFile.toString());   \n                 // no further processing\n                 return;\n             }", "is_private": false, "id": 27324, "creator": "nicolaken@apache.org", "time": "2002-12-03T14:29:49Z", "bug_id": 12217, "creation_time": "2002-12-03T14:29:49Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "j_a_fernandez@yahoo.com", "attachment_id": null, "is_private": false, "id": 27335, "time": "2002-12-03T16:39:01Z", "bug_id": 12217, "creation_time": "2002-12-03T16:39:01Z", "text": "If we go with something like this (which looks fine) we should also\nset the property for the top-level project file.\n\nOtherwise there is no way to write a buildfile which can work as top\nlevel and also when it is included by another buildfile.\n\nA more consistent idea (I think) would be to define instead of \"ant.file.X\"\nproperties, \"basedir.X\" properties. Which would take into account not only the\nlocation of the file but any relative displacement as specified in the\nproject's basedir attribute of the included file. Ex:\n\nFile: /proj/A.xml\n<project name=\"A\" basedir=\".\">\n  <include \"sub1/b.xml\" />\n  <include \"sub1/c.xml\" />\n\n  <echo message=\"In A: ${basedir.A}\" />\n  <echo message=\"In A: ${basedir}\" />\n</project>\n\nFile: /proj/sub1/b.xml\n<project name=\"b\">\n\n  <echo message=\"In b: ${basedir.b}\"/>\n  <echo message=\"In b: ${basedir}\" />\n</project>\n\nFile: /proj/sub1/c.xml\n<project name=\"c\" basedir=\"..\">\n  <echo message=\"In c: ${basedir.c}\" />\n  <echo message=\"In c: ${basedir}\" />\n</project>\n\nThe output would be:\nIn b: /proj/sub1\nIn b: /proj\nIn c: /proj\nIn c: /proj\nIn A: /proj\nIn A: /proj\n\nThis allows for much more consistency in the buildfile code.\nStill you could offer both basedir.XX and ant.file.XX\n"}, {"count": 4, "tags": [], "creator": "nicolaken@apache.org", "attachment_id": null, "id": 28198, "time": "2002-12-23T08:36:47Z", "bug_id": 12217, "creation_time": "2002-12-23T08:36:47Z", "is_private": false, "text": "I'm trying to make Centipede work with Gump, but since this patch hasn't been\napplied to embed, it fails.\n\nAs Jose Alberto Fernandez has pointed out, it would be nice also to have a\nbasedir setting, but this doesn't rule out the ant.file.xxx property.\n\nThis property is fundamental for *any* kind of import usage.\nIf I import a file and that file needs to get a resource *relative to himself*\nhe cannot, because it's treated as part of the original file.\n\nThus e need this property to be able to reference resources that are relative to\nthe imported file."}, {"count": 5, "tags": [], "bug_id": 12217, "attachment_id": null, "id": 29010, "time": "2003-01-08T13:40:42Z", "creator": "nicolaken@apache.org", "creation_time": "2003-01-08T13:40:42Z", "is_private": false, "text": "[embed] has been moved into main branch (mostly) and this is included.\nWorks for me."}, {"count": 6, "text": "Yes, it does work.", "bug_id": 12217, "attachment_id": null, "id": 29011, "time": "2003-01-08T13:41:19Z", "creator": "nicolaken@apache.org", "creation_time": "2003-01-08T13:41:19Z", "tags": [], "is_private": false}]