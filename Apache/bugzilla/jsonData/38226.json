[{"count": 0, "tags": [], "bug_id": 38226, "attachment_id": null, "text": "Symptom:\n\nThe Directive UserDir \"//servername/*/public_html will resolve the URL\nhttp://localhost/~user -> \"C:/DocumentRoot/~user\" and not \n\"//servername/user/public_html\" as it should.\n\nHow to Reproduce:\n\nInstall httpd 2.2.0 on a win32 machine connected to a win32 network \nshare a directory to another machine on that network (\\\\OtherMachine\\MyUser)\nplace a folder in that directory called \\public_html and include a test\nindex.html file.\n\nadd \nUserDir \"//othermachine/*/public_html\" \nto the configuration file\n\ncheck the error.log file to the the directory it is TRYING to look for. \n\nLine 183 of module_userdir.c seems to be the place to look", "id": 84470, "time": "2006-01-11T17:38:32Z", "creator": "achesser@hotmail.com", "creation_time": "2006-01-11T17:38:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 38226, "attachment_id": null, "is_private": false, "id": 99130, "time": "2007-02-08T12:28:12Z", "creator": "basant.kukreja@sun.com", "creation_time": "2007-02-08T12:28:12Z", "text": "I think, Apache's behaviour is correct. Here are my experiements :\n\n<Directory \"//myhost.mydomain/pubshare/users/\">\n    Options Indexes FollowSymLinks\n    AllowOverride None\n    Order deny,allow\n    Allow from all\n</Directory>\nUserDir \"//myhost.mydomain/pubshare/users/*/public_html\">\n\n\nIn myhost.mydomain machine, I created a public share named pubshare\n\nF:\\apache>dir \\\\myhost.mydomain\\pubshare\\users\\basantk\n Volume in drive \\\\myhost.mydomain\\pubshare is pubshare\n Volume Serial Number is 12E4-262A\n\n Directory of \\\\myhost.mydomain\\pubshare\\users\\basantk\n\n02/08/2007  11:55a      <DIR>          .\n02/08/2007  11:29a      <DIR>          ..\n02/08/2007  11:53a      <DIR>          public_html\n               0 File(s)              0 bytes\n               3 Dir(s)   2,555,269,120 bytes free\n\nNow when I send the request :\n/~basantk/index.html --> This returns the index.html located in\n\\\\myhost.mydomain\\pubshare\\users\\basantk\\public_html directory\n\nHowever if I send a request for a user which doesn't exist e.g\n/~nonuser/index.html then the request resolved to <DocRoot/~nonuser/index.html.\n\nApache by default chains the handler. If a directory is not found or not\naccessible then mod_userdir returns DECLINED and then apache looks the URI into\nthe docroot if it is found then apache serves the request.\n\n\nHere are the information which I need from you :\n* Have you specified Directory directive to give explicit permission? Apache\nwon't allow\n  reading any directory other than docroot by default.\n* Apache runs as a service so does Sysadmin have access to the directory and\n  file which is required by Apache. In your case does administrator have\n  access to \"//othermachine/*/public_html\" files. You can check that by\n  logging to Administrator or by following steps\n  (a) runas /user:Administrator cmd.exe\n     <provide password>\n  (b) In new command promote verify if following works:\n      net use \\\\othermachine\\<user_name>\n      dir \\\\othermachine\\<user_name>\\public_html\\\n\nIn my opinion this bug is invalid. I will wait for your response before\nmarking the bug as Invalid.\n"}, {"attachment_id": null, "tags": [], "bug_id": 38226, "is_private": false, "count": 2, "id": 99784, "time": "2007-02-26T01:29:42Z", "creator": "wrowe@apache.org", "creation_time": "2007-02-26T01:29:42Z", "text": "There is no way for security reasons that we would permit the machine or\nshare name to map to a user name :)\n\nApache in this case treats //foo/bar as a root that isn't subject to any\nuser * substitution.  Consider it a feature, feel free to hack around it.\n\nIt's the UserDir directive, neither foo or bar from //foo/bar are actually\ndirectories."}]