[{"count": 0, "tags": [], "bug_id": 19725, "attachment_id": null, "text": "On a windows OS, a long path in a docbase for a context configured in \nserver.xml results in the following error when trying to compile a jsp file:\n\nERROR: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n    [javac] Since fork is true, ignoring compiler setting.\n    [javac] Compiling 1 source file\n    [javac] Since fork is true, ignoring compiler setting.\n    [javac] javac: invalid flag: C:\\Documents\n    [javac] Usage: javac  \n    [javac] where possible options include:\n    [javac]   -g                        Generate all debugging info\n    [javac]   -g:none                   Generate no debugging info\n    [javac]   -g:{lines,vars,source}    Generate only some debugging info\n    [javac]   -nowarn                   Generate no warnings\n    [javac]   -verbose                  Output messages about what the compiler \nis doing\n    [javac]   -deprecation              Output source locations where \ndeprecated APIs are used\n    [javac]   -classpath          Specify where to find user class files\n    [javac]   -sourcepath         Specify where to find input source files\n    [javac]   -bootclasspath      Override location of bootstrap class files\n    [javac]   -extdirs            Override location of installed extensions\n    [javac]   -d             Specify where to place generated class files\n    [javac]   -encoding       Specify character encoding used by source files\n    [javac]   -source          Provide source compatibility with specified \nrelease\n    [javac]   -target          Generate class files for specific VM version\n    [javac]   -help                     Print a synopsis of standard options\n\n\n\nHere is my config that causes the error:\n\n<Context path=\"/vendir\" docBase=\"C:\\Documents and Settings\\Pablo Casado\\My \nDocuments\\Projects\\vendir\\head\\build-home\" workDir=\"C:\\Documents and \nSettings\\Pablo Casado\\My Documents\\Projects\\vendir\\head\\work\\org\\apache\\jsp\" />\n\nHere is one that works for the same app:\n\n<Context path=\"/vendir\" docBase=\"C:\\Documents and Settings\\vendir\" \nworkDir=\"C:\\Documents and Settings\\work\" />\n\nSo my guess is that large path length for the docBase/workDir is the cause for \nthe error. The problem does not occur on my suse linux box with a similarly \nlong path name.\n\nNote that this error does not occur in Tomcat version 4.0.x, so it was \nintroduced in 4.1.x", "id": 36816, "time": "2003-05-07T12:58:15Z", "creator": "pcasado@absamail.co.za", "creation_time": "2003-05-07T12:58:15Z", "is_private": false}, {"count": 1, "tags": [], "text": "I assume it happens when the command line sent to the compiler gets too long.\nYou could try switching to the in process compiler mode (see the fork init-param\nof Jasper). In any case, it a limitation introduced by either Ant (which is used\nas the Java compiler), the OS, or javac, so it cannot be fixed by Tomcat.", "attachment_id": null, "bug_id": 19725, "id": 36818, "time": "2003-05-07T13:31:00Z", "creator": "remm@apache.org", "creation_time": "2003-05-07T13:31:00Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 19725, "attachment_id": null, "is_private": false, "id": 38262, "time": "2003-06-03T14:39:34Z", "creator": "joe.boon@cdcsolutions.com", "creation_time": "2003-06-03T14:39:34Z", "text": "I can confirm that this is a problem with long paths. I have experienced this \nand have tracked it down to a problem in Ant. It is triggered by (a) a long \njavac command line, usually caused by long paths to a lib directory with lots \nof jars in it, combined with (b) spaces in the path to the Tomcat directory \n(more specifically to the work directory within the Tomcat directory).\n\nThe problem is documented in Ant bug 10499."}, {"count": 3, "tags": [], "text": "As Joe Boon said, this might in fact be caused by the bug 10499 in ant.\nthe next ant nightly build (http://cvs.apache.org/builds/ant/nightly/2003-06-04) \ncontains a fix for the bug 10499\nsee http://nagoya.apache.org/bugzilla/show_bug.cgi?id=10499 \nThis might solve this issue too.\nIndividual users might want to patch their ant.jar or replace it with the one of \nthe nightly build if they are affected by this problem.", "is_private": false, "id": 38312, "creator": "levylambert@tiscali-dsl.de", "time": "2003-06-04T06:31:46Z", "bug_id": 19725, "creation_time": "2003-06-04T06:31:46Z", "attachment_id": null}]