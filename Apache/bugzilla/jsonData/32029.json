[{"count": 0, "tags": [], "bug_id": 32029, "attachment_id": null, "text": "02 Nov 2004 19:27:07 - org.apache.slide.store.impl.rdbms.StandardRDBMSAdapter - WARNING - \njava.sql.SQLException: Already closed\njava.sql.SQLException: Already closed\n        at org.apache.commons.dbcp.PoolablePreparedStatement.close(PoolablePreparedStateme\nnt.java:75)\n        at org.apache.commons.dbcp.DelegatingStatement.close(DelegatingStatement.java:165)\n        at org.apache.slide.store.impl.rdbms.StandardRDBMSAdapter.close(Unknown Source)\n        at org.apache.slide.store.impl.rdbms.StandardRDBMSAdapter.retrieveRevisionContent(\nUnknown Source)\n        at org.apache.slide.store.impl.rdbms.AbstractRDBMSStore.retrieveRevisionContent(Un\nknown Source)\n        at org.apache.slide.store.AbstractStore.retrieveRevisionContent(Unknown Source)\n        at org.apache.slide.store.ExtendedStore.retrieveRevisionContent(Unknown Source)\n        at org.apache.slide.content.ContentImpl.retrieve(Unknown Source)\n        at org.apache.slide.content.ContentImpl.retrieve(Unknown Source)\n        at org.apache.slide.webdav.method.GetMethod.executeRequest(Unknown Source)\n        at org.apache.slide.webdav.method.AbstractWebdavMethod.run(Unknown Source)\n        at org.apache.slide.webdav.WebdavServlet.service(Unknown Source)", "id": 66303, "time": "2004-11-02T18:42:33Z", "creator": "gblock@ctoforaday.com", "creation_time": "2004-11-02T18:42:33Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 32029, "attachment_id": 13324, "text": "Created attachment 13324\nPatch to fix; ensures we close connection after statement when compression is enabled, and sets statement to null in close to ensure we don't use a statement that's been previously closed.", "id": 66373, "time": "2004-11-03T18:39:24Z", "creator": "gblock@ctoforaday.com", "creation_time": "2004-11-03T18:39:24Z", "is_private": false}, {"count": 2, "tags": [], "creator": "gblock@ctoforaday.com", "attachment_id": null, "id": 66374, "time": "2004-11-03T18:40:29Z", "bug_id": 32029, "creation_time": "2004-11-03T18:40:29Z", "is_private": false, "text": "Happens if you've got compression enabled, as we close the temporary connection and then close the \nstatement afterwards.  Users of DBCP pooling will probably, like me, receive the error below, when the \nprepared statement was closed in the background by the closing of the connection.\n\nChanging the order cleans up the problem."}, {"count": 3, "tags": [], "text": "No reason for this exception not to get fixed, folks.  :)  Set compression = true on the database, where \nDBCP connection pooling is provided by JNDI name lookup configuration for that connection, and dbcp \nis configured to pool prepared statements, and you're buggered.\n\nThe patch works.  It's safe.  All you have to do is close the result set before closing the connection, and \nbob's your uncle.\n\nPlease make sure it gets into the codebase before release, so I don't have to keep building top-of-tree \nonce 2.1 is released.", "attachment_id": null, "bug_id": 32029, "id": 66667, "time": "2004-11-10T12:17:22Z", "creator": "gblock@ctoforaday.com", "creation_time": "2004-11-10T12:17:22Z", "is_private": false}, {"count": 4, "tags": [], "creator": "ozeigermann@apache.org", "attachment_id": null, "text": "Patch applied to both release and head branch", "id": 66688, "time": "2004-11-10T22:09:47Z", "bug_id": 32029, "creation_time": "2004-11-10T22:09:47Z", "is_private": false}, {"count": 5, "tags": [], "creator": "ozeigermann@apache.org", "attachment_id": null, "text": "Oh, and by the way, this issue certainly wasn't a major one. I beware of the \ninflationary use of severity levels. Thanks :)", "id": 66689, "time": "2004-11-10T22:12:56Z", "bug_id": 32029, "creation_time": "2004-11-10T22:12:56Z", "is_private": false}, {"count": 6, "tags": [], "text": "Thanks.  :)  Without the fix, my logs drive will fill, and be full of things that aren't as interesting as I'd \nlike them to be, so it's important to me.  :)\n\nClosing.", "attachment_id": null, "bug_id": 32029, "id": 66728, "time": "2004-11-11T16:43:53Z", "creator": "gblock@ctoforaday.com", "creation_time": "2004-11-11T16:43:53Z", "is_private": false}]