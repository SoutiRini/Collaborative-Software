[{"count": 0, "attachment_id": null, "bug_id": 16332, "is_private": false, "id": 29883, "time": "2003-01-22T14:55:14Z", "creator": "shuang@xperient.net", "creation_time": "2003-01-22T14:55:14Z", "tags": [], "text": "The following example shows that I can use the inner svg element to clip the \nrectangle in (0,0,300,200)\n\n<?xml version=\"1.0\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\"\n\"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" \nxmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"100%\" height=\"100%\" \nviewBox=\"0 0 800 500\">\n\n\t<svg id=\"scrollContainer\" x=\"250\" y=\"50\" width=\"500\" height=\"420\" \nzoomAndPan=\"disable\">\n\t<svg x=\"0\" y=\"0\" width=\"300\" height=\"200\">\n\t<g id=\"scrollImg\">\n\t<rect x=\"0\" y=\"0\" width=\"741\" height=\"660\" fill=\"blue\"/>\n\t</g>\n\t</svg>\n\t</svg>\n</svg>\n\n\n\nWhen I use ecmascript to manipulate the DOM tree for this functionality, \nhowever, the inner svg element can't do clipping. The rectangle is restricted \nto the area of the outer svg element (width=500, height=420) instead of the \ninner svg element. Is there a workaround for this problem? Thank you very much.\n\n<?xml version=\"1.0\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\"\n\"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" \nxmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"100%\" height=\"100%\" \nviewBox=\"0 0 800 500\">\n<script type=\"text/ecmascript\">\n    function init() {\n    \tvar svgNs   = \"http://www.w3.org/2000/svg\";\n    \tvar xlinkNs = \"http://www.w3.org/1999/xlink\";\n\n\tvar conElement = document.getElementById(\"scrollContainer\");\n    \tvar newconElement = document.createElementNS(svgNs, \"svg\");\n\tnewconElement.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n\tnewconElement.setAttributeNS(xlinkNs, \"xlink\", xlinkNs);\n\tnewconElement.setAttribute(\"x\", 0);\n\tnewconElement.setAttribute(\"y\", 0);\n\tnewconElement.setAttribute(\"width\", 300);\n\tnewconElement.setAttribute(\"height\", 200);\n\n\tvar paneElement = document.createElementNS(svgNs, \"g\");\n\tpaneElement.setAttribute(\"id\", \"scrollPane\");\n\tnewconElement.appendChild(paneElement);\n\tconElement.appendChild(newconElement);\n\n\tvar imgElement = document.getElementById(\"scrollImg\");\n\tvar newImg = imgElement.cloneNode(true);\n\tconElement.removeChild(imgElement);\n\tpaneElement.appendChild(newImg);\n   }\n</script>\n\t<svg id=\"scrollContainer\" x=\"250\" y=\"50\" width=\"500\" height=\"420\" \nzoomAndPan=\"disable\" onload=\"init()\">\n\t<g id=\"scrollImg\">\n\t<rect x=\"0\" y=\"0\" width=\"741\" height=\"660\" fill=\"blue\"/>\n\t</g>\n\t</svg>\n</svg>"}, {"count": 1, "tags": [], "creator": "vincent.hardy@sun.com", "attachment_id": null, "is_private": false, "id": 39637, "time": "2003-06-30T10:09:33Z", "bug_id": 16332, "creation_time": "2003-06-30T10:09:33Z", "text": "This bug report is invalid as there is a problem in the test cases. In the\nexample that 'works', there is an additional <svg> element which is absent in\nthe example that does not work. This additional <svg> element does the clipping\nrequired (0,0,300,200). If you modify the second example with:\n\n<?xml version=\"1.0\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\"\n\"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" \nxmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"100%\" height=\"100%\" \nviewBox=\"0 0 800 500\">\n<script type=\"text/ecmascript\">\n    function init() {\n    \tvar svgNs   = \"http://www.w3.org/2000/svg\";\n    \tvar xlinkNs = \"http://www.w3.org/1999/xlink\";\n\n\tvar conElement = document.getElementById(\"scrollContainer\");\n    \tvar newconElement = document.createElementNS(svgNs, \"svg\");\n\t// newconElement.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n\t// newconElement.setAttributeNS(xlinkNs, \"xlink\", xlinkNs);\n\tnewconElement.setAttribute(\"x\", 0);\n\tnewconElement.setAttribute(\"y\", 0);\n\tnewconElement.setAttribute(\"width\", 300);\n\tnewconElement.setAttribute(\"height\", 200);\n\n\tvar paneElement = document.createElementNS(svgNs, \"g\");\n\tpaneElement.setAttribute(\"id\", \"scrollPane\");\n\tnewconElement.appendChild(paneElement);\n\tconElement.appendChild(newconElement);\n\n\tvar imgElement = document.getElementById(\"scrollImg\");\n\tpaneElement.appendChild(imgElement);\n   }\n</script>\n\t<svg id=\"scrollContainer\" x=\"250\" y=\"50\" width=\"500\" height=\"420\"\nzoomAndPan=\"disable\" onload=\"init()\">\n\t<svg x=\"0\" y=\"0\" width=\"300\" height=\"200\">\n\t<g id=\"scrollImg\">\n\t<rect x=\"0\" y=\"0\" width=\"741\" height=\"660\" fill=\"blue\"/>\n\t</g>\n        </svg>\n\t</svg>\n</svg>\n\nYou'll see that clipping works."}]