[{"count": 0, "tags": [], "bug_id": 43677, "attachment_id": null, "id": 109585, "time": "2007-10-23T04:28:32Z", "creator": "spauka@gmail.com", "creation_time": "2007-10-23T04:28:32Z", "is_private": false, "text": "On startup as a service, freshly installed, with default configuration files,\ninstalled as a service using \"httpd -k install\", when attempting to start httpd,\nit crashes without output to the logs or console. \n\nThis error occurs with all modules disabled, and with the default configuration.\nOn a start through the command line, i.e. directly running httpd.exe, there is a\nnormal start. \n\nUsing Visual Studio, the exception that occurs is:\"\nUnhandled exception at 0x6eec1e21 (libapr-1.dll) in httpd.exe:\n0xC0000005: Access violation when reading localtion 0x00000004\"\nThis error occurs in filedup.c in apr, specifically line 86.\n\"    if (new_file->filehand == GetStdHandle(STD_ERROR_HANDLE)) {\n        stdhandle |= stderr_handle;\"\n\n    }\"\nwhere as far as i can see new_file doesnt exist.\n\nThe apache revision was 587460 using the released apr, apr-utils and apr-iconv\nlibraries."}, {"count": 1, "tags": [], "bug_id": 43677, "attachment_id": null, "is_private": false, "id": 109587, "time": "2007-10-23T05:25:58Z", "creator": "spauka@gmail.com", "creation_time": "2007-10-23T05:25:58Z", "text": "NOTE:\nHere is a copy of the call stack from VS\n\n>       libapr-1.dll!apr_file_dup2(apr_file_t * new_file=0x00000000, apr_file_t\n* old_file=0x006b1b90, apr_pool_t * p=0x006b1b18)\n>       libhttpd.dll!ap_open_logs(apr_pool_t * pconf=0x003fa690, apr_pool_t *\np=0x00644568, apr_pool_t * ptemp=0x00646570, server_rec * s_main=0x00613a78)\n>\tlibhttpd.dll!ap_run_open_logs(apr_pool_t * pconf=0x003fa690, apr_pool_t *\nplog=0x00644568, apr_pool_t * ptemp=0x00646570, server_rec * s=0x00613a78)\n> \thttpd.exe!main(int argc=3, const char * const * argv=0x003f2c10)\n>\thttpd.exe!__tmainCRTStartup()\netc... to Kernel32.dll\n\nHope it helps\n"}, {"count": 2, "tags": [], "creator": "wrowe@apache.org", "is_private": false, "id": 109660, "creation_time": "2007-10-23T09:17:09Z", "time": "2007-10-23T09:17:09Z", "bug_id": 43677, "text": "Backtraces ALWAYS help, thank you.  Can you confirm how old both your trunk\nof HTTPD *and* APR are?  At least r580486?\n\nI'm in there the next 2 days finalizing win32 proc creation logic for pipes,\nhopefully we observe the same.  Thanks for your report.", "attachment_id": null}, {"count": 3, "tags": [], "text": "Sorry about the late reply. As i said revision was 587460, but i am using the\napr, apr-util and apr-iconv that were released, or rather APR 1.2.11 APR-util\n1.2.10 and APR-iconv 1.2.0. I am going to upgrade to the SVN release copy of\nthese and see if it still has the problem, as it may just be some of the older\nlibraries being incompatible with the trunk release.\n\nSeb", "is_private": false, "id": 109861, "creator": "spauka@gmail.com", "time": "2007-10-29T04:17:54Z", "bug_id": 43677, "creation_time": "2007-10-29T04:17:54Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "spauka@gmail.com", "attachment_id": null, "id": 109936, "creation_time": "2007-10-29T23:22:43Z", "time": "2007-10-29T23:22:43Z", "bug_id": 43677, "text": "The error does NOT reappear using the trunk versions of the APR libraries.\nThanks for your help.", "is_private": false}, {"count": 5, "tags": [], "text": "Yup - this particular one is a dup bug, but I'm simply closing it as fixed.\n\nThe 2.2.7 release will contain the fixes.", "is_private": false, "id": 109941, "creator": "wrowe@apache.org", "time": "2007-10-30T01:54:20Z", "bug_id": 43677, "creation_time": "2007-10-30T01:54:20Z", "attachment_id": null}]