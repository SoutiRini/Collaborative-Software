[{"count": 0, "text": "Hi,\nI'm using CruiseControl for our build process. Sometimes ant hangs for some\nreason which is annoying. I'm forced to use the XMLLogger (that is how CC\ncommunicates with ant).\nAnyway when Ant hangs I have no log because the xmllogger has finished the build.\nI therefore has written a shuttdown hook that finishes the build.\nI now have to register it as a task to add it. I do think though that if you\nfinish the process the xmllogger should flush.\n\nRegisterTask has line\nRuntime.getRuntime().addShutdownHook(shutdownObj); \n\nThe shutdown class looks like:\n\npublic class BuildLoggerFlushShutdownHook extends Thread \n{\n    Project project;\n    \n    public BuildLoggerFlushShutdownHook(Project project) {\n        super();\n        this.project=project;\n    }\n\n    public void run() {\n                BuildEvent buildEvent=new BuildEvent(project);\n                buildEvent.setException(new BuildException(\"The build was\nshutdown, this stop was made by the shutdown hook \"+\n                    this.getClass().getName()));\n                listener.buildFinished(buildEvent);\n     }\n}\n\nThat is my suggestion to add something similar if a logger is used that doesn't\nflush\nRegards\nErik Romson", "bug_id": 30380, "attachment_id": null, "id": 61300, "time": "2004-07-29T12:03:06Z", "creator": "erik@zenior.no", "creation_time": "2004-07-29T12:03:06Z", "tags": [], "is_private": false}]