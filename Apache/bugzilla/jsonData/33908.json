[{"count": 0, "tags": [], "bug_id": 33908, "attachment_id": null, "is_private": false, "id": 71983, "time": "2005-03-08T18:05:58Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-03-08T18:05:58Z", "text": "On line #181 a NPE is thrown if a node doesn't have any childs."}, {"count": 1, "tags": [], "bug_id": 33908, "is_private": false, "id": 71984, "creation_time": "2005-03-08T18:11:53Z", "time": "2005-03-08T18:11:53Z", "creator": "andreas@apache.org", "text": "Hmm, which line is it (in current SVN there is no line 181).\n\nIf this is caused by NodeList nodes being null, that's strange:\n\nhttp://java.sun.com/j2se/1.4.2/docs/api/org/w3c/dom/Node.html\n\npublic NodeList getChildNodes()\n\n    A NodeList that contains all children of this node. If there are no\nchildren, this is a NodeList containing no nodes.", "attachment_id": null}, {"count": 2, "tags": [], "creator": "andreas@apache.org", "attachment_id": null, "id": 71985, "time": "2005-03-08T18:12:23Z", "bug_id": 33908, "creation_time": "2005-03-08T18:12:23Z", "is_private": false, "text": "Maybe the node argument is null?"}, {"count": 3, "tags": [], "creator": "felix.roethenbacher@wyona.com", "attachment_id": null, "id": 71986, "time": "2005-03-08T18:16:10Z", "bug_id": 33908, "creation_time": "2005-03-08T18:16:10Z", "is_private": false, "text": "Sorry, it's line # 183.\n\nThats the triggering stack trace:\n\nCaused by: java.lang.NullPointerException\n        at\norg.apache.lenya.cms.publication.DefaultSiteTree.findNode(DefaultSiteTree.java:183)\n        at\norg.apache.lenya.cms.publication.DefaultSiteTree.findNode(DefaultSiteTree.java:191)\n        at\norg.apache.lenya.cms.publication.DefaultSiteTree.findNode(DefaultSiteTree.java:191)\n        at\norg.apache.lenya.cms.publication.DefaultSiteTree.getNodeInternal(DefaultSiteTree.java:438)\n        at\norg.apache.lenya.cms.publication.DefaultSiteTree.getNode(DefaultSiteTree.java:450)\n        at\norg.apache.lenya.cms.publication.DefaultDocument.existsInAnyLanguage(DefaultDocument.java:342)\n        at\norg.apache.lenya.cms.ac.DocumentPolicyManagerWrapper.getPolicyURL(DocumentPolicyManagerWrapper.java:85)\n        ... 84 more\n"}, {"attachment_id": null, "tags": [], "bug_id": 33908, "text": "Strange ... that means that nodes.item(i) is null, which means that the node\nlist contains null items or the length is wrong. NodeList.item(...) returns null\nfor invalid indizes. I could only imagine that the node list got screwed up\nduring processing.", "count": 4, "id": 71988, "time": "2005-03-08T18:21:39Z", "creator": "andreas@apache.org", "creation_time": "2005-03-08T18:21:39Z", "is_private": false}, {"count": 5, "text": "This bug may be related to http://issues.apache.org/bugzilla/show_bug.cgi?id=11125", "bug_id": 33908, "attachment_id": null, "id": 71997, "time": "2005-03-08T19:16:27Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-03-08T19:16:27Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 33908, "text": "I think all methods accessing the DOM have to be synchronized because Xerces\nseems not to be thread safe. I did a load test with a synchronized version of\nDefaultSiteTree and it did not throw any exceptions whereas there have been\nthousands of them with the unsynchronized version after a short time. Plus, it\nseems to be faster ...", "id": 72000, "time": "2005-03-08T19:44:11Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-03-08T19:44:11Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 33908, "is_private": false, "id": 72044, "creation_time": "2005-03-09T09:26:50Z", "time": "2005-03-09T09:26:50Z", "creator": "felix.roethenbacher@wyona.com", "text": "Created attachment 14437\nPatch for  src/java/org/apache/lenya/cms/publication/DefaultSiteTree.java\n\nAdds synchronized statements to each method accessing the DOM.", "attachment_id": 14437}, {"count": 8, "tags": [], "bug_id": 33908, "attachment_id": null, "id": 72546, "time": "2005-03-17T04:13:21Z", "creator": "gregor@apache.org", "creation_time": "2005-03-17T04:13:21Z", "is_private": false, "text": "i applied this to 1.4 as well. had already been applied to 1.2"}]