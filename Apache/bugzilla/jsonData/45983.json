[{"count": 0, "tags": [], "text": "JRE: Sun 1.6.0_10\n\nUpon upgrading from 6.0.13 to 6.0.18 I couldn't get my Tomcat instances to start.\n\nI run 11 separate Tomcat instances on the same server all from the same CATALINA_HOME by specifying different a different CATALINA_BASE for each. After upgrading to 6.0.18 I could only get the following:\n\nException in thread \"main\" java.lang.NoClassDefFoundError: \nCaused by: java.lang.ClassNotFoundException: \n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:307)\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:252)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)\nCould not find the main class: .  Program will exit.\n\nI discovered that it was because I don't have logging.properties in CATALINA_BASE/conf/ and by putting one there (or simply creating a blank one) it would start OK.\n\nWithout logging.properties, catalina.sh builds the start command to be (obtained by substituting echo for exec inside the \"run\" section, edited for bugzilla):\n\n<jre dir>/bin/java -Djava.endorsed.dirs=<home dir>/endorsed -classpath :<home dir>/bin/bootstrap.jar -Dcatalina.base=<base dir> -Dcatalina.home=<home dir> -Djava.io.tmpdir=<base dir>/temp org.apache.catalina.startup.Bootstrap start\n\nAnd with logging.properties the start command becomes:\n\n<jre dir>/bin/java -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=<base dir>/conf/logging.properties -Djava.endorsed.dirs=<home dir>/endorsed -classpath :<home dir>/bin/bootstrap.jar -Dcatalina.base=<base dir> -Dcatalina.home=<home dir> -Djava.io.tmpdir=<base dir>/temp org.apache.catalina.startup.Bootstrap start\n\nI can't suggest why this causes the JVM to have ClassLoader issues and the interesting thing is that if I copy and paste the exact start command of the no-logging.properties version (above) straight into the command-line then it starts so it's only when doing the exec inside catalina.sh that it fails.", "is_private": false, "bug_id": 45983, "id": 121387, "time": "2008-10-09T21:56:17Z", "creator": "rod@vagg.org", "creation_time": "2008-10-09T21:56:17Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 45983, "text": "\n\n*** This bug has been marked as a duplicate of bug 45585 ***", "id": 121389, "time": "2008-10-10T00:02:58Z", "creator": "markt@apache.org", "creation_time": "2008-10-10T00:02:58Z", "is_private": false, "attachment_id": null}]