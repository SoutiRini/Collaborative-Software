[{"count": 0, "attachment_id": null, "bug_id": 34135, "text": "ResolvingXMLReader uses JAXP to create a SAXParser and then forgets to make it\nnamespace aware. That is,\n\n  public ResolvingXMLReader() {\n    super();\n    SAXParserFactory spf = SAXParserFactory.newInstance();\n    try {\n      SAXParser parser = spf.newSAXParser();\n      setParent(parser.getXMLReader());\n    } catch (Exception ex) {\n      ex.printStackTrace();\n    }\n  }\n\n  /**\n   * Construct a new reader from the JAXP factory.\n   *\n   * <p>In order to do its job, a ResolvingXMLReader must in fact be\n   * a filter. So the only difference between this code and the filter\n   * code is that the constructor builds a new reader.</p>\n   */\n  public ResolvingXMLReader(CatalogManager manager) {\n    super(manager);\n    SAXParserFactory spf = SAXParserFactory.newInstance();\n    try {\n      SAXParser parser = spf.newSAXParser();\n      setParent(parser.getXMLReader());\n    } catch (Exception ex) {\n      ex.printStackTrace();\n    }\n  }\n\n\nshould be\n\n  public ResolvingXMLReader() {\n    super();\n    SAXParserFactory spf = SAXParserFactory.newInstance();\n    spf.setNamespaceAware(true);\n    try {\n      SAXParser parser = spf.newSAXParser();\n      setParent(parser.getXMLReader());\n    } catch (Exception ex) {\n      ex.printStackTrace();\n    }\n  }\n\n  /**\n   * Construct a new reader from the JAXP factory.\n   *\n   * <p>In order to do its job, a ResolvingXMLReader must in fact be\n   * a filter. So the only difference between this code and the filter\n   * code is that the constructor builds a new reader.</p>\n   */\n  public ResolvingXMLReader(CatalogManager manager) {\n    super(manager);\n    SAXParserFactory spf = SAXParserFactory.newInstance();\n    spf.setNamespaceAware(true);\n     try {\n      SAXParser parser = spf.newSAXParser();\n      setParent(parser.getXMLReader());\n     } catch (Exception ex) {\n      ex.printStackTrace();\n     }\n  }\n\n\nBetter yet: eliminate SAXParser and SAXParserFactory from this class entirely\nand use XMLReaderFactory and XMLReader instead.", "id": 21460, "time": "2005-03-22T20:32:36Z", "creator": "elharo@metalab.unc.edu", "creation_time": "2005-03-22T20:32:36Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "apache-bugzilla@nwalsh.com", "attachment_id": null, "id": 73584, "time": "2005-04-12T22:36:28Z", "bug_id": 34135, "creation_time": "2005-04-12T22:36:28Z", "is_private": false, "text": "Alas, the Catalog API exposes the SAXParserFactory directly so it's not obvious\nhow to make the switch to XMLReader without making backwards-incompatible changes\nto the public API.\n\nI may yet do that, but for the moment, I've fixed the bug by making sure the\nparser is namespace aware."}]