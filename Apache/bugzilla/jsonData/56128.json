[{"count": 0, "tags": [], "bug_id": 56128, "attachment_id": null, "id": 172992, "time": "2014-02-11T15:00:15Z", "creator": "Chaosed0@gmail.com", "creation_time": "2014-02-11T15:00:15Z", "is_private": false, "text": "When handling a request in a lua script, request:setcookie() is provided to add cookies to the response. The cookie's expiry can be set, but there doesn't seem to be any way to add other attributes to the cookie, i.e. Path, Domain, HTTPOnly, and Secure."}, {"count": 1, "tags": [], "creator": "humbedooh@apache.org", "attachment_id": null, "id": 172993, "time": "2014-02-11T15:09:17Z", "bug_id": 56128, "creation_time": "2014-02-11T15:09:17Z", "is_private": false, "text": "secure can be set using a boolean value (as documented).\nAs for the rest, we're looking into adding these things to 2.4.8.\nPatches are welcome :)"}, {"count": 2, "tags": [], "creator": "humbedooh@apache.org", "attachment_id": null, "id": 172996, "creation_time": "2014-02-11T17:03:34Z", "time": "2014-02-11T17:03:34Z", "bug_id": 56128, "text": "Alternately, we could make mod_lua accept a table with values:\n\nr:setcookie{\n  key = \"foo\",\n  value = \"bar\",\n  secure = true,\n  expires = os.time() + 86400,\n  path = \"/\"\n  httponly = false,\n  domain = \"foobar.com\"\n}\n\nAnd default to nothing if the table element isn't present", "is_private": false}, {"count": 3, "tags": [], "bug_id": 56128, "attachment_id": null, "id": 172998, "time": "2014-02-11T18:14:04Z", "creator": "Chaosed0@gmail.com", "creation_time": "2014-02-11T18:14:04Z", "is_private": false, "text": "Whoops, I missed the Secure flag - probably because I was just running through all the cookie attributes and listing them in my comment :)\n\nI think the table solution would be the way to go. Having that many arguments would be a bit cumbersome. I'll try to write a patch up sometime, but I'm actually not too familiar with Lua."}, {"count": 4, "attachment_id": null, "bug_id": 56128, "is_private": false, "id": 173001, "time": "2014-02-11T23:34:51Z", "creator": "humbedooh@apache.org", "creation_time": "2014-02-11T23:34:51Z", "tags": [], "text": "Fixed/Upgraded in trunk, thanks for the input!\nI've put you down as the author, as this was basically your idea - I just contributed the code in a slightly manic frenzy."}, {"count": 5, "tags": [], "text": "Backported to 2.4.x in r1570162.", "is_private": false, "bug_id": 56128, "id": 173395, "time": "2014-02-20T11:55:31Z", "creator": "humbedooh@apache.org", "creation_time": "2014-02-20T11:55:31Z", "attachment_id": null}]