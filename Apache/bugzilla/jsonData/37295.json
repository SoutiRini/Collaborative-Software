[{"text": "On a Windows XP machine, when the copy task is asked to copy a file from a\nmounted Unix drive, it only copies 12,999 bytes and leaves the rest.\n\n<copy file=\"//my/mounted/drive/filename.jar\" todir=\"mylocaldir\"/>\n\nfilename.jar is 33MB. mylocaldir gets a file that is 12,999 bytes in size.\nOccurs in ant 1.6.2 and 1.6.5 (those were the two versions tested). Java 1.4.2_06", "tags": [], "creator": "silvershards@gmail.com", "is_private": false, "count": 0, "id": 81911, "time": "2005-10-28T19:39:19Z", "bug_id": 37295, "creation_time": "2005-10-28T19:39:19Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 37295, "attachment_id": null, "is_private": false, "id": 81912, "time": "2005-10-28T19:58:04Z", "creator": "silvershards@gmail.com", "creation_time": "2005-10-28T19:58:04Z", "text": "Oddly enough, with JDK1.5.0_04 this problem disappears."}, {"count": 2, "tags": [], "creator": "jan@materne.de", "text": "Additional info (works for me)\n\n<project>\n    <property name=\"from\" value=\"J:/mit/tmp\"/>\n    <property name=\"file\" value=\"test.zip\"/>\n    <copy file=\"${from}/${file}\" tofile=\"${java.version}_${file}\"/>\n</project>\n\ntest.zip from the network drive has 30.945.630 Byte.\nAnd works for JDK 1.2.1, 1.3.0, 1.4.2_05, 1.5.0.", "id": 81973, "time": "2005-10-31T08:15:50Z", "bug_id": 37295, "creation_time": "2005-10-31T08:15:50Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 37295, "attachment_id": null, "is_private": false, "id": 81982, "time": "2005-10-31T10:26:52Z", "creator": "stevel@apache.org", "creation_time": "2005-10-31T10:26:52Z", "text": "This has to be some JVM/network IO quirk. Unless you have any filtering turned\non,  <copy> just reads in blocks of 8192 bytes and writes it out, using\niostreams, breaking the moment that the read fails.\n\nIt also has to be pretty obscure, as it would have been reported before.\n\n1. try using a drive letter path and not a //machine/path, as that is one\ndifference between your use and Jan's.\n\n2. How far away is the network drive? This feels like network problems. Maybe\nthe issue is that the read() is failing but not reporting a network error, the\nway it should.\n\nWe may want to think about reading the length of the file when we start the copy\nand verifying that at least that many bytes came in, but that will probably\nbreak things that copy live resources.\n\n"}]