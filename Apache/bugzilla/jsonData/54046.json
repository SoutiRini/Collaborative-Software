[{"attachment_id": 29507, "tags": [], "creator": "cristian.vulpe@siemens.com", "text": "Created attachment 29507\nJVM crash log\n\nUnfortunately I was not able to reproduce this problem yet (I happened once on our systems).\n\nI have attached the error log generated by the JVM when it crashed.\n\nMore details about the environment (although this information is also available in the log):\n\nOS: Windows 2008 R2 64 bit\n\nJVM:\n# JRE version: 6.0_30-b12\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.5-b03 mixed mode windows-amd64 compressed oops)\n\nTomcat: 7.0.32 windows 64 bit\n\nWeb server: Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/0.9.8r mod_jk/1.2.32 \n\nOne important note is that this problem appeared after we upgraded from Tomcat 7.0.23 to 7.0.32.\n\nPlease let me know if more symptoms are needed.", "count": 0, "id": 162903, "time": "2012-10-23T16:29:54Z", "bug_id": 54046, "creation_time": "2012-10-23T16:29:54Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 54046, "is_private": false, "count": 1, "id": 162973, "time": "2012-10-26T19:36:19Z", "creator": "markt@apache.org", "creation_time": "2012-10-26T19:36:19Z", "text": "A review of the stack trace suggests strongly that this an application bug. It looks very much like the stream is being flushed after the connection has already been closed and/or recycled.\n\nIf you are able to develop a reproducible test case that demonstrates a Tomcat bug then feel free to re-open this issue."}, {"attachment_id": null, "tags": [], "bug_id": 54046, "is_private": false, "count": 2, "id": 162976, "time": "2012-10-26T20:10:40Z", "creator": "cristian.vulpe@siemens.com", "creation_time": "2012-10-26T20:10:40Z", "text": "Thank you very much for the investigation. I will revise the code and check if there is a potential issue with the ordering of the events (application trying to flush the data on the stream and the stream being already closed)."}, {"attachment_id": 30631, "tags": [], "creator": "pierreyves.beaudouin@gmail.com", "is_private": false, "count": 3, "id": 168811, "time": "2013-07-26T13:11:22Z", "bug_id": 54046, "creation_time": "2013-07-26T13:11:22Z", "text": "Created attachment 30631\nJRE 6.0_38-b05 crash - tcnative-1.dll+0x57d0\n\nI know this bug is closed, but in case you want to dig it up, here are some info about a similar crash:\n\nOS: Windows 7 64 bit\nJRE: Oracle Java 6.0_38-b05 64 bit\nTomcat: 7.0.21 + tcnative 1.1.24 (the compiled dll available for download)\n\nThe log file mentions that the tcnative dll that was used was in the Tomcat 7.0.8 folder. It may sound confusing but that is correct.\n\nWhen the crash occured I was developing in Eclipse (www.eclipse.org). I suspect the Eclipse settings might be involved.\n\nSome (maybe) relevant Eclipse settings for the Tomcat:\n\nPublishing\n(*) Automatically publish when resources change\n\nServer Options\n[ ] Serve modules without publishing\n[x] Publish module contexts to separate XML files\n[ ] Modules auto reload by default\n[ ] Enable security\n\nModules tab\nAuto Reload: disabled."}, {"attachment_id": null, "tags": [], "creator": "rainer.jung@kippdata.de", "is_private": false, "count": 4, "id": 168816, "time": "2013-07-26T13:48:55Z", "bug_id": 54046, "creation_time": "2013-07-26T13:48:55Z", "text": "The second crash shows a different reason: it is triggered by Java ImageIO calling a flush duriung the finalizer run.\n\nSee\n\nhttp://wiki.apache.org/tomcat/FAQ/KnownIssues#ImageIOIssues\n\nfor an explanation why this is primarily a bug in ImageIO (though native should check better against NULL pointer use to prevent against crashes). The wiki article also explains a workaround."}]