[{"count": 0, "attachment_id": null, "creator": "elkner@linofee.org", "text": "<taskdef name=\"makepdf\"\n\tclassname=\"org.apache.fop.tools.anttasks.Fop\">\n\t<classpath>\n\t\t<path refid=\"classpath.extensions\"/>\n\t\t<pathelement path=\"${build.class.dir}\"/>\n\t\t<pathelement path=\"${classpath.main}\"/>  <!-- ant stuff -->\n\t</classpath>\n</taskdef>\n\nso classpath contains definitely fop.jar.\n\nBut when running the task, all \nThread.currentThread().getContextClassLoader().getResourceAsStream(RES_PATH + file)\ne.g. with RES_PATH = \"org/apache/fop/conf/\";\nand file = \"config.xml\";\n\nreturn null!\n\nfop.jar definitely contains org/apache/fop/conf/config.xml ...\n\n\nDigging around, I found, that \nThread.currentThread().getContextClassLoader() resolves to the system \nclassloader and not to the antclassloader:\n\nFinding class org.apache.fop.layout.hyphenation.Hyphenator\nClass org.apache.fop.layout.hyphenation.Hyphenator loaded from ant loader\n  [makepdf] 09:54:56,021 [main] DEBUG (Hyphenator.java:84) - ClassLoader:\nsun.misc.Launcher$AppClassLoader@1a457b6\n  [makepdf] 09:54:56,028 [main] DEBUG (Hyphenator.java:86) - ClassLoader2:\norg.apache.tools.ant.AntClassLoader@166afb3\n\n\nproduced by:\n\ncl = Thread.currentThread().getContextClassLoader();\n\t\t\tlog.debug(\"ClassLoader: \" + (cl != null ? cl.toString() : \"null\"));\n\t\t\tcl = Hyphenator.class.getClassLoader();\n\t\t\tlog.debug(\"ClassLoader2: \" + (cl != null ? cl.toString() : \"null\"));", "id": 27312, "time": "2002-12-03T09:01:36Z", "bug_id": 15017, "creation_time": "2002-12-03T09:01:36Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 15017, "attachment_id": null, "id": 27316, "time": "2002-12-03T09:29:29Z", "creator": "elkner@linofee.org", "creation_time": "2002-12-03T09:29:29Z", "is_private": false, "text": "incomplete description (Mozilla was to fast :() - see 15018 for complete bug report"}]