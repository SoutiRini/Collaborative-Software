[{"count": 0, "tags": [], "text": "I have an extension of the Ant task that needs access to the \"newProject\"\nmember; unfortunately this member is private and no getter is provided.\n\nI am requesting that a getter be provided for the \"newProject\" member.", "is_private": false, "id": 96616, "creation_time": "2006-12-07T10:12:15Z", "time": "2006-12-07T10:12:15Z", "creator": "carej@us.ibm.com", "bug_id": 41127, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 41127, "text": "Created attachment 19225\nsuggested patch", "id": 96617, "time": "2006-12-07T10:18:23Z", "creator": "carej@us.ibm.com", "creation_time": "2006-12-07T10:18:23Z", "is_private": false, "attachment_id": 19225}, {"count": 2, "tags": [], "text": "Jeff, I've made this small change in svn HEAD with a little more internal\nrefactoring.", "is_private": false, "id": 96618, "creation_time": "2006-12-07T10:25:22Z", "time": "2006-12-07T10:25:22Z", "creator": "mbenson@apache.org", "bug_id": 41127, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 41127, "text": "Looks great Matt; thanks a lot - this will make my life a little easier when Ant\n1.7 goes GA.", "id": 96619, "time": "2006-12-07T10:37:13Z", "creator": "carej@us.ibm.com", "creation_time": "2006-12-07T10:37:13Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 41127, "attachment_id": null, "id": 96620, "time": "2006-12-07T11:18:39Z", "creator": "ddevienne@gmail.com", "creation_time": "2006-12-07T11:18:39Z", "is_private": false, "text": "Note that I faked this change a long time ago, for a task that extends Ant,\nusing the code below. You'd need an accessor or reflection if you can't derive\nfrom the Ant task/class. --DD\n\n  /**\n   * Creates a new nested property element.\n   * <p>\n   * This call is used to catch the new project thru the created property...\n   * Since the nested project is normally not accessible: Wicked!\n   *\n   * @return the created (unconfigured) property.\n   */\n  public Property createProperty() {\n    Property p = super.createProperty();\n    _newProject = p.getProject();\n    return p;\n  }"}, {"attachment_id": null, "tags": [], "creator": "ddevienne@gmail.com", "is_private": false, "count": 5, "id": 96621, "time": "2006-12-07T11:21:30Z", "bug_id": 41127, "creation_time": "2006-12-07T11:21:30Z", "text": "Oh yeah, and I had code like this in the task's init() method:\n\n      // Create dummy property to get at nested project\n      Property p = createProperty();\n      p.setName(\"sdliugyhspuygh.asdjhriawu120983472$376asdbfandbfa7347\");\n      p.setValue(\"\");\n\n      // Now use _newProject..."}, {"count": 6, "tags": [], "text": "I had tried overriding the init method, but unfortunately that wasn't enough for\nmy use case.\n\nI'll spare you the gory details, but basically I needed to inject certain things\ninto the new project's reference table *before* the build.xml for the new\nproject is parsed (and the implicit target is run). I tried using addReference\nto do the injection, but the references are actually copied to the new project\ntoo late for the scenario I'm in.", "is_private": false, "id": 96623, "creation_time": "2006-12-07T11:35:46Z", "time": "2006-12-07T11:35:46Z", "creator": "carej@us.ibm.com", "bug_id": 41127, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 41127, "attachment_id": null, "id": 96627, "time": "2006-12-07T12:12:02Z", "creator": "ddevienne@gmail.com", "creation_time": "2006-12-07T12:12:02Z", "is_private": false, "text": "I believe that I hack I've presented would suffise, but not knowing the\nspecifics of what you are doing, I could be wrong, especially since I was\nwritting an AntReturn task, that got access to properties and references from\nthe sub-project, to inject them back into the parent project (Ant-Contrib has\nthe same thing, but as a copy-paste of Ant, unlike my version).\n\nThe _newProject is populated by the call to createProperty with the subproject\nbefore it is run, so you could have done your reference injection at this point.\nBut in any case, having a protected getNewProject() is cleaner, although I\nwonder what kind of \"hacks\" you'll be using it ;-) What I was doing was not\nexactly kosher either ;-))) --DD"}, {"count": 8, "tags": [], "bug_id": 41127, "attachment_id": null, "is_private": false, "id": 96630, "time": "2006-12-07T12:38:26Z", "creator": "carej@us.ibm.com", "creation_time": "2006-12-07T12:38:26Z", "text": "(In reply to comment #7)\n\nTaking a closer look at your hack, I think you're right - we probably could have\nused that or something similar. At first inspection I was just assuming that you\nwere trying to add implicit nested elements - an approach that I had tried and\nnot had any luck with. That's what I get for reading quickly...\n\nFortunately we distribute Ant (1.6.5) with our add-on antlibs as a complete\nbundle, so I'm able to replace the oata.taskdefs.Ant class with a patched\nversion (from SVN trunk) - not an ideal solution but we've had to do this for\nother bug fixes so it's a well established pattern."}]