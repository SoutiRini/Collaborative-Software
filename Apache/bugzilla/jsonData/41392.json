[{"count": 0, "tags": [], "creator": "eric.jain@gmail.com", "is_private": false, "id": 98180, "attachment_id": null, "bug_id": 41392, "creation_time": "2007-01-17T08:18:50Z", "time": "2007-01-17T08:18:50Z", "text": "Would be useful to have a logger that outputs the elapsed time not just for the\nentire build, but for each task that is run."}, {"count": 1, "tags": [], "creator": "eric.jain@gmail.com", "is_private": false, "id": 98181, "attachment_id": null, "bug_id": 41392, "creation_time": "2007-01-17T08:24:05Z", "time": "2007-01-17T08:24:05Z", "text": "I've tried to subclass DefaultLogger, but ran into this problem:\n\nUnless I call setOutputPrintStream(System.out) in the constructor of the\notherwise still empty subclass, I get this:\n\nBuildfile: build.xml\n\n...\n\nBUILD SUCCESSFUL\nTotal time: 1 second\njava.lang.NullPointerException: \n        at org.apache.tools.ant.DefaultLogger.printMessage(DefaultLogger.java:321)\n        at org.apache.tools.ant.DefaultLogger.buildFinished(DefaultLogger.java:162)\n        at org.apache.tools.ant.Project.fireBuildFinished(Project.java:2008)\n        at org.apache.tools.ant.Main.runBuild(Main.java:718)\n        at org.apache.tools.ant.Main.startAnt(Main.java:199)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\n\nIf I do set \"out\", I get a duplicate \"BUILD SUCCESSFUL\" message:\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n\nShould I open a separate issue for this, or is this behavior intended?\n"}, {"attachment_id": null, "tags": [], "bug_id": 41392, "text": "You need to be VERY careful here.\n\nThis seems straightforward, but it gets complicated real fast when you start to\nconsider parallel execution of tasks.\n\nThis idea has been discussed on the dev. list before - check the archives.", "count": 2, "id": 98182, "time": "2007-01-17T08:25:59Z", "creator": "carej@us.ibm.com", "creation_time": "2007-01-17T08:25:59Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 41392, "attachment_id": 19420, "id": 98184, "time": "2007-01-17T08:59:35Z", "creator": "eric.jain@gmail.com", "creation_time": "2007-01-17T08:59:35Z", "is_private": false, "text": "Created attachment 19420\nLogger that outputs the elapsed time for each task"}, {"count": 4, "tags": [], "creator": "eric.jain@gmail.com", "is_private": false, "id": 98185, "attachment_id": null, "bug_id": 41392, "creation_time": "2007-01-17T09:00:37Z", "time": "2007-01-17T09:00:37Z", "text": "Please disregard my problem above -- I was using -listener instead of -logger...\n"}, {"count": 5, "tags": [], "creator": "eric.jain@gmail.com", "is_private": false, "id": 98186, "attachment_id": null, "bug_id": 41392, "creation_time": "2007-01-17T09:06:08Z", "time": "2007-01-17T09:06:08Z", "text": "The proposed logger should handle parallel execution of tasks fine, except that\nyou may not be able to associate times with specific tasks, but I think that is\na general problem with Ant and output of parallel tasks?\n\nThe principal concern in the mailing list discussion was about modifying the\nDefaultLogger, but this wouldn't preclude having a separate logger that can be\nused when you want to do some simple profiling.\n"}, {"count": 6, "tags": [], "bug_id": 41392, "attachment_id": null, "id": 98187, "time": "2007-01-17T09:48:37Z", "creator": "carej@us.ibm.com", "creation_time": "2007-01-17T09:48:37Z", "is_private": false, "text": "The proposed patch is still going to have issues with tasks that delegate work\nto helper tasks."}, {"count": 7, "tags": [], "creator": "carej@us.ibm.com", "attachment_id": null, "id": 98188, "time": "2007-01-17T09:49:20Z", "bug_id": 41392, "creation_time": "2007-01-17T09:49:20Z", "is_private": false, "text": "Also, the proposed patch seems to require JDK 5 language features, which is not\nallowed in Ant."}, {"count": 8, "tags": [], "bug_id": 41392, "is_private": false, "text": "Created attachment 19422\nRemoved Java 5 language features", "id": 98191, "time": "2007-01-17T09:58:52Z", "creator": "eric.jain@gmail.com", "creation_time": "2007-01-17T09:58:52Z", "attachment_id": 19422}, {"count": 9, "tags": [], "creator": "eric.jain@gmail.com", "is_private": false, "id": 98192, "attachment_id": null, "bug_id": 41392, "creation_time": "2007-01-17T10:06:13Z", "time": "2007-01-17T10:06:13Z", "text": "If calls to taskStarted can be called multiple times before taskFinished is\ncalled, I guess we could use a Stack... Are there examples of tasks that\n\"delegate\", somewhere?"}, {"count": 10, "tags": [], "creator": "carej@us.ibm.com", "is_private": false, "id": 98194, "attachment_id": null, "bug_id": 41392, "creation_time": "2007-01-17T10:27:06Z", "time": "2007-01-17T10:27:06Z", "text": "Herein lies the problem of trying to include something into the official\ndistribution: even if you can't find any examples, it can be done. If it can be\ndone then you have to account for the fact that it's possible, even if it's\nunlikely."}, {"count": 11, "tags": [], "text": "OK, I give up :-) If someone comes across this and wants to invest some time to\nmake this solution foolproof, feel free to reopen...\n", "attachment_id": null, "id": 98195, "creator": "eric.jain@gmail.com", "time": "2007-01-17T10:50:12Z", "bug_id": 41392, "creation_time": "2007-01-17T10:50:12Z", "is_private": false}, {"count": 12, "tags": [], "text": "There are lots of examples of tasks that delegate in Ant's codebase. Some of the tasks which delegate to \nother tasks use the API org.apache.tools.ant.Task#bindToOwner . Displaying in an IDE the usages of this \nmethod gives you  a choice. junitreport is a task which delegates a lot.", "is_private": false, "id": 98209, "creator": "antoine@apache.org", "time": "2007-01-17T21:12:41Z", "bug_id": 41392, "creation_time": "2007-01-17T21:12:41Z", "attachment_id": null}, {"count": 13, "tags": [], "text": "You could always log target times. That would be a lot simpler. \n\nWhile you are at it, I'd like the logger to extend what we added for printing\nout wall time when a build finished, and \n\n-when a sub project is entered\nEntering project \"something\"\n\n-when it is exited, and how long that took\nExiting project \"something.xml\" elapsed time 3m 4s\n\nthat would give me the diags I need to track down problems across big builds.\nWhen you use ivy and subant to order 30 projects, the order they run in varies,\nand there is nothing in a standard logger to trace flow across projects.\n\nMarking as open as it is something that would be nice, even at the target level\n(which is tractable, probably)", "is_private": false, "id": 98211, "creator": "stevel@apache.org", "time": "2007-01-18T02:43:17Z", "bug_id": 41392, "creation_time": "2007-01-18T02:43:17Z", "attachment_id": null}, {"count": 14, "tags": [], "creator": "eric.jain@gmail.com", "attachment_id": null, "id": 100180, "time": "2007-03-08T02:29:38Z", "bug_id": 41392, "creation_time": "2007-03-08T02:29:38Z", "is_private": false, "text": "Just found the Antomology project [http://antomology.codehaus.org/], which\nprovides a listener that prints out the invocation count, time, average time and\npercent of total time for both tasks and targets at the end of the build. Really\nnice, and way better than anything I had proposed here!"}, {"count": 15, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of bug 35158 ***", "attachment_id": null, "id": 129337, "creator": "bodewig@apache.org", "time": "2009-07-31T06:59:57Z", "bug_id": 41392, "creation_time": "2009-07-31T06:59:57Z", "is_private": false}]