[{"count": 0, "tags": [], "creator": "bjakob@de.ibm.com", "attachment_id": null, "text": "On Red Hat Enterprise Linux V9.3 (JRE 1.4) I run a GUI application, when \nperforming Finish, the following code will run:\n\n   DOMImplementation domImpl = GenericDOMImplementation.getDOMImplementation();\n   Document document = domImpl.createDocument(null, \"svg\", null);\n   svgGraphics = new SVGGraphics2D(document);\n\nSVGGraphics2D throws the following exception:\n\njava.lang.NoClassDefFoundError: sun.awt.X11GraphicsEnvironment\n        at java.lang.Class.initialize(Class.java:318)\n        at java.lang.Class.forNameImpl(Native Method)\n        at java.lang.Class.forName(Class.java:116)\n        at java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment   \n(GraphicsEnvironment.java:91)\n        at java.awt.image.BufferedImage.createGraphics(BufferedImage.java:1073)\n        at org.apache.batik.svggen.SVGGraphics2D.<init>(Unknown Source)\n        at org.apache.batik.svggen.SVGGraphics2D.<init>(Unknown Source)\n        at com.ibm.wbit.reporting.imageutility.BToolsDraw2dSvgGraphics.<init>\n(Unknown Source)\n\n\nNote: the X11 window server is running and I can start a GUI application, so \nthe DISPLAY variable is set fine and the authorization is correct.\n\nMy application runs without problems on Windoxs XP and Suse Linux Enterprise \nServer.\n\nIf I set java.awt.headless=\"true\", then all works fine -> no Error/Exception \nwill be thrown. But I really do not know why it works with this JVM setting, \nbecause I do not have headless Java -> I have a GUI application. So I think, \nthis could not be the solution - propably a workaround, but hen I need a \ndescription for this.", "id": 79814, "time": "2005-09-12T16:43:18Z", "bug_id": 36613, "creation_time": "2005-09-12T16:43:18Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 36613, "text": "*** Bug 36614 has been marked as a duplicate of this bug. ***", "id": 79970, "time": "2005-09-15T02:55:36Z", "creator": "deweese@apache.org", "creation_time": "2005-09-15T02:55:36Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "deweese@apache.org", "text": "*** Bug 36615 has been marked as a duplicate of this bug. ***", "count": 2, "id": 79972, "time": "2005-09-15T02:56:07Z", "bug_id": 36613, "creation_time": "2005-09-15T02:56:07Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 36613, "text": "I've done some searching on the net (google \"Can't connect X11 RedHat Java\")\n\nApparently the 'java.lang.NoClassDefFoundError: sun.awt.X11GraphicsEnvironment'\nhappens after the first time java can't connect to the X11 server.  So I \nsuspect that someplace you have another error that might have some more\ninfo about the DISPLAY it is trying to connect to.\n\nSecondly if you have headless mode set then java _will_ not create a\njava.awt Frame:\n\n% java -Djava.awt.headless=true -jar batik-squiggle.jar\njava.awt.HeadlessException\n        at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:121)\n        at java.awt.Window.<init>(Window.java:274)\n        at java.awt.Frame.<init>(Frame.java:401)\n\nBased on this I strongly suspect that you have multiple java VM's running\nand the one that Batik is running in does not have proper access to the\nDISPLAY (and it may not need it).\n", "id": 79978, "time": "2005-09-15T12:09:38Z", "creator": "deweese@apache.org", "creation_time": "2005-09-15T12:09:38Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "bjakob@de.ibm.com", "attachment_id": null, "text": "No, I have one java VM only running and I have one process only. This process \nis a GUI application (Eclipse Application) and Batik is running within this \nprocess.\n", "id": 80097, "time": "2005-09-19T11:06:05Z", "bug_id": 36613, "creation_time": "2005-09-19T11:06:05Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 36613, "text": "So I don't know much about the SWT(?) that eclipse uses, is it possible\nthat SWT is picking up the X11 Server that it should connect to through\nsome other means and Batik is the first to try and start AWT?\n\nAlso did you try and track down the inital \"can't connect\" error message?\nIt has additional information about what X Server it is trying to contact.\n\nFinally can you try 'replicating' the just the JDK code without Batik?\nI suspect that this has nothing to do with Batik other than we happen\nto use AWT.\n\n---\n\nimport java.awt.image.BufferedImage;\nimport java.awt.Graphics2D;\n\nBufferedImage bi;\nbi = new BufferedImage(1, 1, BufferedImage.TYPE_INT_ARGB);\nGraphics2D fmg;\nfmg = bi.createGraphics();\n", "id": 80101, "time": "2005-09-19T12:03:30Z", "creator": "deweese@apache.org", "creation_time": "2005-09-19T12:03:30Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 36613, "text": "I have developed a very small test plug-in which just executes the \nfollowing statement: \"java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment\n()\" -> the error occurs. So it is definitly no batik problem. I would suggest \nto close this bug. Thank you for your help.\n\nThere is another bug, I opened against Eclipse: \nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id=109716", "id": 80155, "time": "2005-09-20T09:41:55Z", "creator": "bjakob@de.ibm.com", "creation_time": "2005-09-20T09:41:55Z", "is_private": false, "attachment_id": null}, {"count": 7, "text": "I have developed a very small test plug-in which just executes the \nfollowing statement: \"java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment\n()\" -> the error occurs. So it is definitly no batik problem. I would suggest \nto close this bug. Thank you for your help.\n\nThere is another bug, I opened against Eclipse: \nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id=109716", "creator": "bjakob@de.ibm.com", "attachment_id": null, "id": 80156, "time": "2005-09-20T09:42:41Z", "bug_id": 36613, "creation_time": "2005-09-20T09:42:41Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "bug_id": 36613, "attachment_id": null, "id": 80268, "time": "2005-09-21T14:17:00Z", "creator": "deweese@apache.org", "creation_time": "2005-09-21T14:17:00Z", "is_private": false, "text": "Not a bug in Batik."}]