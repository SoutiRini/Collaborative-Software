[{"count": 0, "tags": [], "bug_id": 18712, "attachment_id": null, "text": "Using openldap 2.0.27.\nWith ldap there are three possiblities: no (plain), tls, ssl security\n\nUsing apache 2.0.45 only plain and ssl are usable.\n\nIf AuthLDAPURL has \"ldap://...\" uri then plain is used (and my ldap server \nnotifies that binding is not allowed because no encryption is used)\n\nIf AuthLDAPURL has \"ldaps://...\" uri there are no problems.\n\n[Fri Apr 04 18:04:56 2003] [notice] LDAP: Built with OpenLDAP LDAP SDK\n[Fri Apr 04 16:06:15 2003] [notice] LDAP: SSL support available\n[Fri Apr 04 16:06:15 2003] [notice] Apache/2.0.45 (Gentoo/Linux) configured -- \nresuming normal operations\n[Fri Apr 04 16:26:08 2003] [warn] [client 194.211.112.6] [13271] auth_ldap \nauthenticate: user tero authentication failed; URI /~tpeland/x/ \n[ldap_simple_bind_s() to check user credentials failed][Insufficient access]\n\n\"Insufficient access\" is due to bind requiring a minimum encryption level.\n\n---/etc/openldap/slapd.conf---\naccess to attr=userPassword,shadowFlag\n        by ssf=128 anonymous auth\n        by ssf=128 self write\n        by * none\n\naccess to *\n        by * read", "id": 34535, "time": "2003-04-04T15:42:40Z", "creator": "tpeland@tkukoulu.fi", "creation_time": "2003-04-04T15:42:40Z", "is_private": false}, {"count": 1, "tags": [], "text": "I had the same problem configuring apache 2.0.46, the auth code properly \nsupports LDAP over SSL, but needs to support an AuthLDAPStartTLS directive \nthat can be used to indicate when TLS is to be used over non-SSL LDAP.  The \nlack of working TLS support for LDAP authentication is the only reason we have \nto use 1.3.x for most of our services.  \n\nI'd love to be able to take advantage of 2.0.x universally, the newer code, \nintegrated support for SSL and WebDAV are all great, but without working TLS \nsupport, we can't use our campus LDAP servers, and will continue to stick with \n1.3.x.", "attachment_id": null, "id": 38806, "creator": "anthony.atkins@vt.edu", "time": "2003-06-13T18:29:04Z", "bug_id": 18712, "creation_time": "2003-06-13T18:29:04Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 18712, "text": "Please test this with v2.0.49 - setting LDAPTrustedCA and LDAPTrustedCAType\nshould cause it to work with TLS using openldap.\n", "id": 57820, "time": "2004-05-21T15:44:39Z", "creator": "minfrin@sharp.fm", "creation_time": "2004-05-21T15:44:39Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 18712, "attachment_id": null, "text": "Please reopen this bug if LDAPTrustedCA doesn't solve your problem.\n", "id": 57838, "time": "2004-05-21T16:38:33Z", "creator": "minfrin@sharp.fm", "creation_time": "2004-05-21T16:38:33Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 18712, "attachment_id": null, "text": "Hello:\n\nI've been testing 2.0.49 with our LDAP server.  I can use LDAP over SSL with\nopenSSL, which is great.  TLS support still doesn't work though, even with the\nappropriate LDAPTrustedCA directive.  I get the same \"Confidentiality required\"\nmessages as before.\n\nMost of the LDAP authentication modules I've tried that have worked with TLS\nhave included a directive to force the start of TLS for non-SSL connections.  I\nwas hoping that a similar directive would make it in to a newer version of\napache, but now that LDAP over SSL is working for me, I really don't have the\nneed to use TLS any more.  I'd be happy to test it again, though, just let me\nknow when more changes are made.", "id": 57854, "time": "2004-05-21T18:33:59Z", "creator": "anthony.atkins@vt.edu", "creation_time": "2004-05-21T18:33:59Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 18712, "attachment_id": null, "text": "Still not working in 2.0.49. I'm reopening the bug.\n\nI did try setting LDAPTrustedCA and LDAPTrustedCAType.\n\n\nldap://ldap.mydomain:389/...\n=>[ldap_simple_bind_s() to check user credentials failed][Confidentiality required]\nThis means that ldap server doesn't allow connections without minimum encryption\nlevel. That means no tls connection was tried.\n\nldaps://ldap.mydomain:389/...\n=>[LDAP: ldap_simple_bind_s() failed][Can't contact LDAP server]\nObviously this isn't a way to get apache to try to use tls connection.\n\nldaps://ldap.mydomain/...\nThis one works but it is using SSL instead of START_TLS and that isn't enough to\nmy needs.\n\n\nI too vote for a separate TLS flag. That seems to be the only good solution.", "id": 58110, "time": "2004-05-26T06:46:07Z", "creator": "tpeland@tkukoulu.fi", "creation_time": "2004-05-26T06:46:07Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 18712, "text": "Support for SSL and TLS/STARTTLS has been added to the SVN trunk of httpd v2.1 /\napr v1.1, please can you test this and get back to me if it works?\n\nNote that some LDAP toolkits, notably some versions of OpenLDAP, don't support\nSTARTTLS. You'll get an error message explaining this in the error log if so.\nAny crashes are bugs in APR, if you find any please reopen this bug.\n", "id": 69947, "time": "2005-01-21T22:46:08Z", "creator": "minfrin@apache.org", "creation_time": "2005-01-21T22:46:08Z", "is_private": false, "attachment_id": null}]