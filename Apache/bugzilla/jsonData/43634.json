[{"count": 0, "tags": [], "bug_id": 43634, "is_private": false, "text": "if you specify:\nprotocol=\"org.apache.coyote.http11.Http11NioProtocol\"\nand\nkeystoreType=\"PKCS12\"\nin the server.xml file for an HTTPS connector based on NIO, you get the\nfollowing exception:\n16 oct. 2007 11:45:16 org.apache.coyote.http11.Http11NioProtocol init\nGRAVE: Erreur \u00e0 l'initialisation du point de contact\njava.io.IOException: Invalid keystore format\n\tat sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:633)\n\tat sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:38)\n\tat java.security.KeyStore.load(KeyStore.java:1185)\n\tat org.apache.tomcat.util.net.NioEndpoint.init(NioEndpoint.java:740)\n\tat org.apache.coyote.http11.Http11NioProtocol.init(Http11NioProtocol.java:135)\n\tat org.apache.catalina.connector.Connector.initialize(Connector.java:1059)\n\tat org.apache.catalina.core.StandardService.initialize(StandardService.java:677)\n\tat org.apache.catalina.core.StandardServer.initialize(StandardServer.java:792)\n\tat org.apache.catalina.startup.Catalina.load(Catalina.java:518)\n\tat org.apache.catalina.startup.Catalina.load(Catalina.java:538)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:260)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:412)\n\nDebugging tomcat shows that keystoreType attribute value for\norg.apache.tomcat.util.net.NioEndpoint is \"JKS\" instead of \"PKCS12\".\nFurther investigation shows that the keystoreType attribute is substituted by\nkeytype (see Connector.java:  replacements.put(\"keystoreType\", \"keytype\"); )\nA possible fix would be to add the following methods in\norg.apache.coyote.http11.Http11NioProtocol:\n\n    public String getKeytype() { return getKeystoreType();}\n    public void setKeytype(String s ) { setKeystoreType(s);}", "id": 109383, "time": "2007-10-16T03:23:07Z", "creator": "cpierret@sparus-software.com", "creation_time": "2007-10-16T03:23:07Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 43634, "attachment_id": 20990, "is_private": false, "id": 109395, "time": "2007-10-16T07:11:31Z", "creator": "cpierret@sparus-software.com", "creation_time": "2007-10-16T07:11:31Z", "text": "Created attachment 20990\nA patch for defect 43634\n\nPatch against trunk for 6.0.x"}, {"count": 2, "tags": [], "bug_id": 43634, "attachment_id": null, "text": "The patch for this was applied back in October 2007. It is included in 6.0.16 onwards.", "id": 115748, "time": "2008-04-21T10:10:11Z", "creator": "markt@apache.org", "creation_time": "2008-04-21T10:10:11Z", "is_private": false}]