[{"count": 0, "attachment_id": null, "bug_id": 55741, "is_private": false, "id": 171027, "time": "2013-11-04T15:52:35Z", "creator": "djc@apache.org", "creation_time": "2013-11-04T15:52:35Z", "tags": [], "text": "In Firefox 27.0a2, this page is interpreted incorrectly:\n\nhttp://httpd.apache.org/docs/current/mod/mod_authz_user.html\n\nI.e., despite the XML prolog, Firefox seems to assume the page is encoded in UTF-8, while it's actually in ISO-8859-1. I looked up what seems to be relevant documentation from the W3C:\n\nhttp://www.w3.org/International/questions/qa-html-encoding-declarations#quicklookup\n\nGiven that table, it seems like the XML prolog declaration is only effective when the document is served as text/xml. Since this one is served as text/html, the XHTML form of inline character encoding should be used:\n\n<meta http-equiv=\"Content-type\" content=\"text/html;charset=ISO-8859-1\" />"}, {"count": 1, "tags": [], "bug_id": 55741, "attachment_id": null, "id": 171028, "time": "2013-11-04T16:32:50Z", "creator": "nick@webthing.com", "creation_time": "2013-11-04T16:32:50Z", "is_private": false, "text": "I guess this must be the French language page you're seeing?\n\nIt looks to me as if the better fix would be to use the French language XSLT stylesheet to generate all HTML pages in utf-8.  Unless our .fr folks have some compelling reason to do otherwise?"}, {"count": 2, "tags": [], "text": "Nope, I'm getting mod_authz_user.html.en.\n\nInterestingly, I don't see any issues when requesting the page with Firefox for Android (26.0).", "is_private": false, "bug_id": 55741, "id": 171029, "time": "2013-11-04T16:49:43Z", "creator": "djc@apache.org", "creation_time": "2013-11-04T16:49:43Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "I specifically installed Firefox nightly (for Mac OS X, version 28.0a1 (2013-11-04)) to check this, and I can *NOT* confirm this. I also tested Firefox 24 and 25.\n\nThe encoding is actually windows-1252, says my copies of Firefox. \n\nIt is true, however, that Firefox does not use the \n\n  <?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\nSo, what happens is that Firefox falls back to the browser\u2019s default encoding.\n\nWhat the default encoding is, depends (on an unmodified version of Firefox) of the locale. So, if I was browsing that page from a Russian locale, Firefox would probably fall back to Windows-1251 - the legacy encoding for Russian.\n\nMy conclusion is that Dirkjan is right with regard to how the encoding has to be declared. \n\nBut I agree with Nick that generating all pages as UTF-8 would be the best.", "is_private": false, "bug_id": 55741, "id": 171044, "time": "2013-11-04T23:39:57Z", "creator": "xn--mlform-iua@xn--mlform-iua.no", "creation_time": "2013-11-04T23:39:57Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "(In reply to Dirkjan Ochtman from comment #2)\n> Nope, I'm getting mod_authz_user.html.en.\n\nIn that case, can you explain wtf you're talking about?  I can't see anything non-ASCII in that page!\n\nIn any case, it looks like a firefox issue (or a local issue).  I haven't checked it in the latest update, but when I first worked on charset issues, the HTTP spec *explicitly* made iso-9958-1 a default if no explicit content-type was indicated.  Hence a browser needs, at a minimum, to accept it.", "is_private": false, "id": 171047, "creator": "nick@webthing.com", "time": "2013-11-05T09:35:28Z", "bug_id": 55741, "creation_time": "2013-11-05T09:35:28Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 55741, "is_private": false, "text": "(In reply to Nick Kew from comment #4)\n\n> In that case, can you explain wtf you're talking about?  I can't see\n> anything non-ASCII in that page!\n\nSorry, scrap that.  It's those spaces, and the title Fran", "id": 171048, "time": "2013-11-05T09:41:26Z", "creator": "nick@webthing.com", "creation_time": "2013-11-05T09:41:26Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "djc@apache.org", "attachment_id": null, "is_private": false, "id": 171051, "time": "2013-11-05T10:19:04Z", "bug_id": 55741, "creation_time": "2013-11-05T10:19:04Z", "text": "(In reply to Nick Kew from comment #4)\n> In any case, it looks like a firefox issue (or a local issue).  I haven't\n> checked it in the latest update, but when I first worked on charset issues,\n> the HTTP spec *explicitly* made iso-9958-1 a default if no explicit\n> content-type was indicated.  Hence a browser needs, at a minimum, to accept\n> it.\n\nThat may be so, but I think a bunch of this changed with HTML5 and new-found enthusiasm for standardizing actual browser behavior. Please check the W3C table I linked to in the description."}, {"count": 7, "tags": [], "bug_id": 55741, "attachment_id": null, "is_private": false, "id": 171059, "time": "2013-11-05T15:43:33Z", "creator": "xn--mlform-iua@xn--mlform-iua.no", "creation_time": "2013-11-05T15:43:33Z", "text": "(In reply to Dirkjan Ochtman from comment #6)\n> (In reply to Nick Kew from comment #4)\n> > In any case, it looks like a firefox issue (or a local issue).  I haven't\n> > checked it in the latest update, but when I first worked on charset issues,\n> > the HTTP spec *explicitly* made iso-9958-1 a default if no explicit\n> > content-type was indicated.  Hence a browser needs, at a minimum, to accept\n> > it.\n> \n> That may be so, but I think a bunch of this changed with HTML5 and new-found\n> enthusiasm for standardizing actual browser behavior. Please check the W3C\n> table I linked to in the description.\n\n\n\u201cA bunch\u201c is very unspecific. And HTTP is almost irrelevant to the issue.\n\nAs a HTML WG invited expert, pointing to the latest draft, I can say that most Firefox locales default to WINDOWS-1252/ISO-8859-1: http://www.w3.org/html/wg/drafts/html/master/syntax.html#determining-the-character-encoding\n\nSo, if  your alpha version of Firefox 27 parses that page as UTF-8, then it must be because something causes your browser to default to UTF-8. \n\nAll this being said: If the page *had* declared the encoding properly, we would not have been having this discussion. Because, as is, the page does *not* declare any encoding in a HTML conforming way - HTML5 conformance, these days, is regulated by HTML5.\n\nWhen the browsers fails to find a encoding definition, HTML5.x instructs the parser to default to some encoding - usually a locale default, but it could also be a another default.\n\nSo, to Nick Kew: It is wrong to say that this is local issue. More correct is that HTML5.x *requires* the browser to fallback to a local encoding when the page - as is the the case here - fails to declare the encoding."}, {"count": 8, "tags": [], "creator": "djc@apache.org", "attachment_id": null, "is_private": false, "id": 171060, "time": "2013-11-05T15:49:47Z", "bug_id": 55741, "creation_time": "2013-11-05T15:49:47Z", "text": "(In reply to Leif Halvard Silli from comment #7)\n> \u201cA bunch\u201c is very unspecific.\n\nYes, I'm not a HTML WG invited expert. ;)\n\n> As a HTML WG invited expert, pointing to the latest draft, I can say that\n> most Firefox locales default to WINDOWS-1252/ISO-8859-1:\n> http://www.w3.org/html/wg/drafts/html/master/syntax.html#determining-the-\n> character-encoding\n> \n> So, if  your alpha version of Firefox 27 parses that page as UTF-8, then it\n> must be because something causes your browser to default to UTF-8. \n\nOkay, I did find that I had forced the default to UTF-8, and I've now removed that to prevent this kind of problems in the future."}, {"count": 9, "tags": [], "bug_id": 55741, "is_private": false, "text": "BTW, even without forcing the UTF-8 default, I still see the unknown-character glyph for the space character in \"Module Identifier and \"Source File\".", "id": 171061, "time": "2013-11-05T15:58:49Z", "creator": "djc@apache.org", "creation_time": "2013-11-05T15:58:49Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "xn--mlform-iua@xn--mlform-iua.no", "is_private": false, "count": 10, "id": 171076, "time": "2013-11-06T00:13:56Z", "bug_id": 55741, "creation_time": "2013-11-06T00:13:56Z", "text": "(In reply to Dirkjan Ochtman from comment #9)\n> BTW, even without forcing the UTF-8 default, I still see the\n> unknown-character glyph for the space character in \"Module Identifier and\n> \"Source File\".\n\nMay be it remembers the encoding.  You need to clear all history and cache etc from your copy of Firefox, then you Firefox will not remember the encoding."}, {"count": 11, "tags": [], "bug_id": 55741, "attachment_id": null, "id": 182443, "time": "2015-04-16T20:13:08Z", "creator": "rbowen@apache.org", "creation_time": "2015-04-16T20:13:08Z", "is_private": false, "text": "Is this still an issue?"}, {"count": 12, "tags": [], "text": "Insofar as I can see, the documentation still don't set the character encoding in the HTML 5-approved way, so IMO there is still something to be solved.", "is_private": false, "id": 182455, "creator": "djc@apache.org", "time": "2015-04-17T13:48:17Z", "bug_id": 55741, "creation_time": "2015-04-17T13:48:17Z", "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 55741, "attachment_id": null, "id": 182465, "time": "2015-04-18T06:10:43Z", "creator": "christophe.jaillet@wanadoo.fr", "creation_time": "2015-04-18T06:10:43Z", "is_private": false, "text": "Fixed in r1674382\nBackported in 2.4, 2.2 and 2.0"}]