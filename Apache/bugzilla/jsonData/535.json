[{"count": 0, "tags": [], "creator": "pwinkler@smartbasket.com", "text": "We have been using Tomcat 3.1 in our environment. We have\nrecently switched over to using Tomcat 3.2.1 with Apache\n1.3.12, using mod_jserv as the connector.\n\nAfter running the system for a while, we are seeing a number of\nthe connection handlers end up in a deadlock situation. The problem\nis not deterministic (some servers have it, some don't), nor reproducable.\nAny light that can be shed on this situation would be appreciated.\nWe searched the bug database and the newsgroup, and could not find\nany reports on this type of problem.\n\nThe CPU usage on these machines will go to 100% at this point, and the\nthread dump will show a number of threads in the following state:\n\n\"Thread-15\" prio=1 tid=0x816d920 nid=0x22e0 waiting for monitor entry \n[0xbadff000..0xbadffb28]\n        at java.util.Hashtable.get(Hashtable.java:319)\n        at org.apache.tomcat.util.PrefixMapper.getLongestPrefixMatch\n(PrefixMapper.java:220)\n        at org.apache.tomcat.request.SimpleMapper1.contextMap\n(SimpleMapper1.java:258)\n        at org.apache.tomcat.core.ContextManager.processRequest\n(ContextManager.java:814)\n        at org.apache.tomcat.core.ContextManager.internalService\n(ContextManager.java:771)\n        at org.apache.tomcat.core.ContextManager.service\n(ContextManager.java:743)\n        at \norg.apache.tomcat.service.connector.Ajp12ConnectionHandler.processConnection\n(Ajp12Connect\nionHandler.java:166)\n        at org.apache.tomcat.service.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:416)\n        at org.apache.tomcat.util.ThreadPool$ControlRunnable.run\n(ThreadPool.java:498)\n        at java.lang.Thread.run(Thread.java:484)", "id": 578, "time": "2001-02-06T08:51:50Z", "bug_id": 535, "creation_time": "2001-02-06T08:51:50Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "For query purposes, mark as fixed in Tomcat 3.2.2 and Tomcat 3.3:\nFixed in Tomcat 3.2.2\nFixed in Tomcat 3.3\n\n*** This bug has been marked as a duplicate of 136 ***", "is_private": false, "id": 839, "creator": "Larry.Isaacs@sas.com", "time": "2001-02-23T12:12:34Z", "bug_id": 535, "creation_time": "2001-02-23T12:12:34Z", "attachment_id": null}]