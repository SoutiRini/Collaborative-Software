[{"count": 0, "tags": [], "text": "Hi,\n\nI wrote custom ObjectFactoryBuilder which throws my custom exception in case of invalid configuration. That exception is caught inside org.apache.naming.NamingContext lookup logged with WARNING msg and throws new NamingException without chaining the root exception. I see it is possible to set up the cause with calling the method initCause.\n\nI would like ask you for advice if it is possible to chain the root cause exception, it will helps me log it on error and analysis it by AppDynamics.\nIf you think that it could be implemented to return the root cause exception I can contribute.\n\nJan 15, 2018 8:34:06 AM org.apache.naming.NamingContext lookup\nWARNING: Unexpected exception resolving reference\ncore.dbcp.exception.EncryptionFailedException: Failed to decrypt string\n        at core.dbcp.EncryptedUcpPoolDataSourceImpl.getObjectInstance(EncryptedUcpPoolDataSourceImpl.java:26)\n        at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:141)\n        at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:321)\n        at org.apache.naming.NamingContext.lookup(NamingContext.java:848)\n        at org.apache.naming.NamingContext.lookup(NamingContext.java:159)\n        at org.apache.naming.NamingContextBindingsEnumeration.nextElementInternal(NamingContextBindingsEnumeration.java:117)\n        at org.apache.naming.NamingContextBindingsEnumeration.next(NamingContextBindingsEnumeration.java:71)\n        at org.apache.naming.NamingContextBindingsEnumeration.next(NamingContextBindingsEnumeration.java:34)\n        at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:138)\n        at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:145)\n        at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:110)\n        at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.lifecycleEvent(GlobalResourcesLifecycleListener.java:82)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:388)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:333)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:751)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:694)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:294)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:428)\nCaused by: org.jasypt.exceptions.EncryptionOperationNotPossibleException\n        at org.jasypt.encryption.pbe.StandardPBEByteEncryptor.decrypt(StandardPBEByteEncryptor.java:801)\n        at org.jasypt.encryption.pbe.StandardPBEStringEncryptor.decrypt(StandardPBEStringEncryptor.java:639)\n        at core.dbcp.crypto.CipherEncrypter.decrypt(CipherEncrypter.java:35)\n        ... 27 more\n\nJan 15, 2018 8:34:06 AM org.apache.catalina.mbeans.GlobalResourcesLifecycleListener createMBeans\nSEVERE: Exception processing Global JNDI Resources\njavax.naming.NamingException: Failed to decrypt string\n        at org.apache.naming.NamingContext.lookup(NamingContext.java:865)\n        at org.apache.naming.NamingContext.lookup(NamingContext.java:159)\n        at org.apache.naming.NamingContextBindingsEnumeration.nextElementInternal(NamingContextBindingsEnumeration.java:117)\n        at org.apache.naming.NamingContextBindingsEnumeration.next(NamingContextBindingsEnumeration.java:71)\n        at org.apache.naming.NamingContextBindingsEnumeration.next(NamingContextBindingsEnumeration.java:34)\n        at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:138)\n        at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:145)\n        at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.createMBeans(GlobalResourcesLifecycleListener.java:110)\n        at org.apache.catalina.mbeans.GlobalResourcesLifecycleListener.lifecycleEvent(GlobalResourcesLifecycleListener.java:82)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:388)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:333)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:751)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:694)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:294)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:428)\n\n\nRegards,\nDamian", "is_private": false, "id": 203276, "creator": "galka.damian.91@gmail.com", "time": "2018-01-15T15:16:25Z", "bug_id": 62000, "creation_time": "2018-01-15T15:16:25Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 62000, "attachment_id": 35679, "id": 203277, "time": "2018-01-15T15:19:16Z", "creator": "galka.damian.91@gmail.com", "creation_time": "2018-01-15T15:19:16Z", "is_private": false, "text": "Created attachment 35679\nAdd log with an exception"}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 203280, "time": "2018-01-15T21:13:51Z", "bug_id": 62000, "creation_time": "2018-01-15T21:13:51Z", "is_private": false, "text": "Seems perfectly reasonable to me.\n\nIf you provide a patch or pull-request against trunk (9.0.x) it will get back-ported to the other versions as well."}, {"count": 3, "text": "Fixed in:\n- trunk for 9.0.5 onwards\n- 8.5.x for 8.5.28 onwards\n- 8.0.x for 8.0.50 onwards\n- 7.0.x for 7.0.85 onwards", "bug_id": 62000, "is_private": false, "id": 203495, "time": "2018-01-25T22:47:13Z", "creator": "markt@apache.org", "creation_time": "2018-01-25T22:47:13Z", "tags": [], "attachment_id": null}]