[{"count": 0, "tags": [], "creator": "jwoehr@absolute-performance.com", "attachment_id": null, "text": "This code at line 475 of taskdefs/SQLExec.java appears to be incorrect:\n\n            // SQL defines \"--\" as a comment to EOL\n            // and in Oracle it may contain a hint\n            // so we cannot just remove it, instead we must end it\n            if (!keepformat) {\n                if (line.indexOf(\"--\") >= 0) {\n                    sql.append(\"\\n\");\n                }\n            }\n\nsince apparently it should cause the following SQL statement inserting character\nvalues to fail:\n\n\tINSERT INTO Foo (Bar, Woof,) VALUES ('Abcd', '--');\n\nby mistaking the '--' for a comment introducer when !keepformat.", "id": 56759, "time": "2004-05-03T14:52:09Z", "bug_id": 28745, "creation_time": "2004-05-03T14:52:09Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "jwoehr@absolute-performance.com", "is_private": false, "count": 1, "id": 56760, "time": "2004-05-03T14:53:28Z", "bug_id": 28745, "creation_time": "2004-05-03T14:53:28Z", "text": "Also see bug #28394 for more on comment introducer handling deficiencies in\nSQLExec.java."}, {"count": 2, "tags": [], "bug_id": 28745, "text": "The problem with comments is more complex than people think.\nSQLServer (at least older releases) does not allow new lines on the SQL \nstatement passed by JDBC and it does not allow comments either.\n\nSo, for that DB you need to clean all this things up.\nOracle has a different set of behaviours. What was implemented was what was\nconsidered safer for most of them.\n\nI see that now people are asking for more DBspecific behaviour. Maybe we need \nto start thinking on a pluggable architecture for <sql/> that would allow\nuser access to the special features of a particular DB.\n\nTo start with, it could define the correct default values for the different \nsettings that make the best way to send the SQL to the particular DB.\n\nDoes it make sense? The pluggins could autodetect based of the driver being \nused.", "id": 56789, "time": "2004-05-04T09:59:23Z", "creator": "j_a_fernandez@yahoo.com", "creation_time": "2004-05-04T09:59:23Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 28745, "attachment_id": null, "id": 56813, "time": "2004-05-04T14:49:25Z", "creator": "jwoehr@absolute-performance.com", "creation_time": "2004-05-04T14:49:25Z", "is_private": false, "text": "Some features of specific DB's might need some plugin support (as long as it\ndoesn't get overly complex ... Ant tends to bewilder users with the plethora of\noptions and features) ... but some details, such as comment character handling\n(and possibly newline handling? stripemptylines=\"true\"?) could be vastly\nimproved in a practical sense with little coding effort. E.g., the change\nattached to bug #28394 ."}, {"attachment_id": null, "tags": [], "creator": "lgehrken@intersoft.de", "text": "\n\n*** This bug has been marked as a duplicate of 27739 ***", "count": 4, "id": 61452, "time": "2004-08-02T12:49:22Z", "bug_id": 28745, "creation_time": "2004-08-02T12:49:22Z", "is_private": false}]