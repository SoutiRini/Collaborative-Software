[{"count": 0, "tags": [], "creator": "ravindra_38@yahoo.com", "is_private": false, "text": "When a non-existing resource is locked, server response is 201 with a \nlockDiscovery property in XML response body. WebDAV client always expects a 200 \nor 207 response and does not handle 201. If we modify parseResponse() method of \nLockMethod class as follows everything works fine:\n\n==============================\npublic void parseResponse(InputStream input)\n        throws IOException, HttpException {\nif (status == HttpStatus.SC_OK ||\n-            status == HttpStatus.SC_MULTI_STATUS ) {\n+            status == HttpStatus.SC_MULTI_STATUS ||\n+            status == HttpStatus.SC_CREATED ) {\n            parseXMLResponse(input);\n-           if ( (status == HttpStatus.SC_OK) &&\n+           if ( (status != HttpStatus.SC_MULTI_STATUS) &&\n-              (this.state instanceof WebdavState)) {\n                String prefix = DOMUtils.findDavPrefix(\n===================================\nI have tested this patch with IIS.\n\nThanks\n-ravi", "id": 20955, "time": "2002-08-13T12:22:39Z", "bug_id": 11658, "creation_time": "2002-08-13T12:22:39Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "sorry, summary was not correct. Now its correct.", "is_private": false, "id": 20956, "creator": "ravindra_38@yahoo.com", "time": "2002-08-13T12:26:38Z", "bug_id": 11658, "creation_time": "2002-08-13T12:26:38Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 11658, "attachment_id": null, "text": "We need to verify the instanceof state also, mistakenly removed that line :(\nNow patch is fine.\n==============================\npublic void parseResponse(InputStream input)\n        throws IOException, HttpException {\nif (status == HttpStatus.SC_OK ||\n-            status == HttpStatus.SC_MULTI_STATUS ) {\n+            status == HttpStatus.SC_MULTI_STATUS ||\n+            status == HttpStatus.SC_CREATED ) {\n            parseXMLResponse(input);\n-           if ( (status == HttpStatus.SC_OK) &&\n+           if ( (status != HttpStatus.SC_MULTI_STATUS) &&\n               (this.state instanceof WebdavState)) {\n                String prefix = DOMUtils.findDavPrefix(\n===================================\n", "id": 20957, "time": "2002-08-13T12:31:37Z", "creator": "ravindra_38@yahoo.com", "creation_time": "2002-08-13T12:31:37Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 11658, "attachment_id": null, "text": "This seems to be fixed in current trunk as well (at least first part of the\npatch is the same as in source, although code is quite different after the\nparseXmlResponse(input). Please reopen if you disagree.", "id": 101173, "time": "2007-03-29T12:35:28Z", "creator": "mvdb@apache.org", "creation_time": "2007-03-29T12:35:28Z", "is_private": false}]