[{"count": 0, "tags": [], "creator": "c.barton@uea.ac.uk", "is_private": false, "id": 59236, "attachment_id": null, "bug_id": 29579, "creation_time": "2004-06-15T16:05:46Z", "time": "2004-06-15T16:05:46Z", "text": "If one writes code targeting J2SE 1.5.0 then if it uses classes from the\npackages org.w3c.dom.* then it will not always work when run in Tomcat.\n\nBasically there are version conflicts between the XML Dom Parser which comes\nwith J2SE 1.5.0 beta 2 and $TOMCAT_HOME/common/endorsed/xmlParserAPIs.jar:\n\nSolution is to delete $TOMCAT_HOME/common/endorsed/xmlParserAPIs.jar"}, {"count": 1, "tags": [], "bug_id": 29579, "attachment_id": null, "id": 59247, "time": "2004-06-15T18:13:11Z", "creator": "yoavs@computer.org", "creation_time": "2004-06-15T18:13:11Z", "is_private": false, "text": "This is not a bug.  Tomcat 5.0.x doesn't claim to support J2SE 1.5.x (although \nin practice it mostly does), and needing to overwrite the endorsed classes is \nnot only a known option, it's detailed in the release notes."}, {"count": 2, "tags": [], "text": "Then, if it's possible to make it work on both, one should update the bundled\njsp examples so that they work both on 1.4 and 1.5, I believe.", "attachment_id": null, "bug_id": 29579, "id": 60068, "time": "2004-06-30T16:01:17Z", "creator": "martin.grebac@sun.com", "creation_time": "2004-06-30T16:01:17Z", "is_private": false}, {"count": 3, "tags": [], "creator": "petr.jiricka@netbeans.com", "attachment_id": null, "text": "Well, at one point Tomcat will want to support JDK 1.5, won't it? How will it be\nsolved then?\n\nWould it be possible to fix this by not loading\n$TOMCAT_HOME/common/endorsed/xmlParserAPIs.jar in Tomcat classloader, if Tomcat\nis running on JDK 1.5? This file would only be used on JDKK 1.4.x.", "id": 60232, "time": "2004-07-07T13:04:41Z", "bug_id": 29579, "creation_time": "2004-07-07T13:04:41Z", "is_private": false}, {"count": 4, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "is_private": false, "id": 60932, "time": "2004-07-21T19:40:27Z", "bug_id": 29579, "creation_time": "2004-07-21T19:40:27Z", "text": "I'd be hesitant to solve this in code.  Rather, follow the established \nmechanism as documented in the release notes: if you'd like to swap the parser \nimplementation, simply replace the jars in common/endorsed with the ones you \nwant.  You may remove the ones from common/endorsed altogether if you wish.  We \ndon't make you use the parsers that ship with tomcat, and we use the standard \njava endorsed classloading mechanism to allow you to configure your \ninstallation any which way you want.\n\nModifying the JSP examples is a separate issue and if you want that done, open \na separate item for it."}, {"text": "Standard Java way how to work with these apis is to set an env property, so setting \n\n(this one for xslt, others for dom, sax, ...)\njavax.xml.transform.TransformerFactory=com.sun.org.apache.xalan.internal.xsltc.trax.TransformFactoryImpl\n\nshould help on 1.5 I'd say. But it does not.", "tags": [], "bug_id": 29579, "is_private": false, "count": 5, "id": 61050, "time": "2004-07-23T13:35:00Z", "creator": "martin.grebac@sun.com", "creation_time": "2004-07-23T13:35:00Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "text": "Follow the steps in the release notes, they work for me and a couple of other \ntomcat developers.  Keep in mind also that JDK 1.5 is beta and Tomcat 5 does \nNOT officially support it, so in principle you shouldn't file bugs against it \nuntil we say we support it.  Finally, if you do file bugs, please be more \nspecific than saying something \"should help on 1.5 I'd say. But it does not.\"  \nYou will need to include the specific steps you took and errors you encountered.", "id": 61052, "time": "2004-07-23T13:46:28Z", "bug_id": 29579, "creation_time": "2004-07-23T13:46:28Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 29579, "text": "One additional consideration related to this issue: Tomcat supports a multiuser\nmode, when multiple users can share the same installation of Tomcat\n(CATALINA_HOME) and run it with different setting directories (CATALINA_BASE).\nBy recommending users to remove files from the installation, Tomcat can no\nlonger be used in the multiuser scenario, since different users may have a\ndifferent version of the JDK.", "id": 61595, "time": "2004-08-05T16:45:19Z", "creator": "petr.jiricka@netbeans.com", "creation_time": "2004-08-05T16:45:19Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "text": "xmlParserAPIs.jar is not in the TOMCAT distribution any more (5.0.27)\n\nxercesImpl.jar is instead but I had problems with the version used and had to \nreplace it with the latest release in order to get my code working with JDK 5.0\n\nI  don't think this is a problem though", "attachment_id": null, "bug_id": 29579, "id": 61665, "time": "2004-08-07T10:10:22Z", "creator": "jtopher@yahoo.com", "creation_time": "2004-08-07T10:10:22Z", "is_private": false}, {"count": 9, "tags": [], "creator": "petr.jiricka@netbeans.com", "attachment_id": null, "is_private": false, "id": 61724, "time": "2004-08-09T16:39:37Z", "bug_id": 29579, "creation_time": "2004-08-09T16:39:37Z", "text": "Well, in Tomcat 5.0.27, xmlParserAPIs.jar was renamed to xml-apis.jar, but the\nnature of the issue remains the same."}, {"count": 10, "tags": [], "text": "To use the same Tomcat home for users with different JDK requirements, users \ncan always create their own Tomcat startup scripts to set a different \njava.endorsed.dirs env setting.  One doesn't have to modified the \ncommon/endorsed directory.", "attachment_id": null, "bug_id": 29579, "id": 61737, "time": "2004-08-10T03:47:16Z", "creator": "mdang@interwoven.com", "creation_time": "2004-08-10T03:47:16Z", "is_private": false}]