[{"count": 0, "text": "buildconf fails to build a valid configure. Instead configure ends with\nconfigure: error: APR-util not found.\n\nreplication:\n\ndownload apr, apr-util and httpd-trunk using svn\n\nin httpd-trunk run\n\n# ./buildconf\nfound apr source: ../apr\ncopying build files\nrebuilding include/ap_config_auto.h.in\nrebuilding configure\nrebuilding rpm spec file\nfixing timestamps for ap_expr sources\nroot@x103:[/data/prj/TEST/httpd-trunk]build/aix/buildaix.ksh                                                               \n+ ./configure \n                --enable-layout=AIX \n                --with-apr=/opt/bin/apr-1-config \n                --with-apr-util=/opt/bin/apu-1-config \n                --enable-mpms-shared=all \n                --enable-mods-shared=all \n                --disable-lua > build/aix/configure.out\nconfigure: error: APR-util not found.  Please read the documentation.\n./configure returned an error\nroot@x103:[/data/prj/TEST/httpd-trunk]\n========================================\n\ncompare with:\n\nroot@x103:[/data/prj/TEST/httpd-trunk]./buildconf --with-apr=/data/prj/apr-1.4.6 --with-apr-util=/data/prj/apr-util-1.4.1\nfound apr source: /data/prj/apr-1.4.6\nfound apr-util source: /data/prj/apr-util-1.4.1\ncopying build files\nrebuilding include/ap_config_auto.h.in\nrebuilding configure\nrebuilding rpm spec file\nfixing timestamps for ap_expr sources\nroot@x103:[/data/prj/TEST/httpd-trunk]build/aix/buildaix.ksh                                                             \n+ ./configure \n                --enable-layout=AIX \n                --with-apr=/opt/bin/apr-1-config \n                --with-apr-util=/opt/bin/apu-1-config \n                --enable-mpms-shared=all \n                --enable-mods-shared=all \n                --disable-lua > build/aix/configure.out\nconfigure: WARNING: apr/apr-util is compiled without ldap support\nconfigure: WARNING: apr/apr-util is compiled without ldap support\n+ make > build/aix/make.out\n==============================\n\nNote: to replicate you need to know ALL the files that a successful buildconf creates (and/or a successful ./configure) because to repeat/verify this I had download the httpd-trunk again\n\ni.e. mv httpd-trunk httpd-x\nsvn checkout http://svn.apache.org/repos/asf/httpd/httpd/trunk httpd-trunk\ncd httpd-trunk\n./buildconf\n\nOnce successful, the error does not occur!", "bug_id": 52813, "is_private": false, "id": 154445, "time": "2012-03-02T17:07:45Z", "creator": "mamfelt@gmail.com", "creation_time": "2012-03-02T17:07:45Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 52813, "attachment_id": null, "id": 154446, "time": "2012-03-02T17:23:13Z", "creator": "covener@gmail.com", "creation_time": "2012-03-02T17:23:13Z", "is_private": false, "text": "Can you simplify the report a little by determining what goes wrong at configure time?   Are you providing conflicting info at buildconf and configure as it seems?\n\nIt doesn't look like buildconf is expected to find anything other than \"apr\" or \"apr-util\" without you telling it the full paths."}, {"count": 2, "tags": [], "bug_id": 52813, "attachment_id": null, "id": 154447, "time": "2012-03-02T17:27:38Z", "creator": "trawick@apache.org", "creation_time": "2012-03-02T17:27:38Z", "is_private": false, "text": "what is a terse recipe for reproducing the problem?\n  which apr and apr-util?  (1.4.x branches I hope)\n  what commands (in terms of buildconf, configure, make instead of your aix\nbuild scripts) put them in /opt?\n  I see the httpd buildconf and configure invocations\n\n\"make extraclean\" cleans up from buildconf/configure\njust as\n\"make clean\" cleans up from make\n\nyou're potentially using a different major level of apr for httpd buildconf vs.\nhttpd configure...   I don't know what could happen there\n\nthis journey towards open source building and packaging isn't good fodder for\nthe bugdb\n\nsomehow we need to get to the point where your various travails building apr,\napr-util, and httpd are converted into a few clarifications for other people...\n but we'll have to rely on you to help identify that; I don't know what the\nmissteps were so far"}, {"count": 3, "text": ">\"make extraclean\" cleans up from buildconf/configure\n>just as\n>\"make clean\" cleans up from make\n\nidiot alert :)\n\n\"make extraclean\" cleans up from buildconf\n\"make distclean\" cleans up from configure", "bug_id": 52813, "is_private": false, "id": 154449, "time": "2012-03-02T19:02:09Z", "creator": "trawick@apache.org", "creation_time": "2012-03-02T19:02:09Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "creator": "mamfelt@gmail.com", "attachment_id": null, "is_private": false, "id": 154455, "time": "2012-03-02T23:16:14Z", "bug_id": 52813, "creation_time": "2012-03-02T23:16:14Z", "text": "ksh -x ./getall.ksh\n+ ./svn/bin/jsvn checkout http://svn.apache.org/repos/asf/perl/Apache-Test/trunk Apache-Test\nChecked out revision 1296503.\n+ ./svn/bin/jsvn co http://svn.apache.org/repos/asf/apr/apr/trunk/ apr\nChecked out revision 1296503.\n+ ./svn/bin/jsvn co http://svn.apache.org/repos/asf/apr/apr-util/trunk/ apr-util\nChecked out revision 1296503.\n+ ./svn/bin/jsvn co http://svn.apache.org/repos/asf/apr/apr-iconv/trunk/ apr-iconv\nChecked out revision 1296503.\n+ ./svn/bin/jsvn checkout http://svn.apache.org/repos/asf/httpd/httpd/branches/2.2.22 httpd-2.2.22\nsvn: URL 'http://svn.apache.org/repos/asf/httpd/httpd/branches/2.2.22' doesn't exist\n+ ./svn/bin/jsvn checkout http://svn.apache.org/repos/asf/httpd/httpd/trunk httpd-trunk\nA    httpd-trunk/config.layout\nA    httpd-trunk/os\nA    httpd-trunk/os/Makefile.in\nA    httpd-trunk/os/win32\n\nA    httpd-trunk/support/rotatelogs.dsp\nA    httpd-trunk/support/NWGNUlogres\nA    httpd-trunk/support/suexec.c\nA    httpd-trunk/support/htpasswd.c\nA    httpd-trunk/BuildAll.dsp\n U   httpd-trunk\nChecked out revision 1296503.\ncp -r httpd-trunk trunk\ncd httpd-trunk\n\n./configure \\\n                --enable-layout=AIX \\\n                --with-apr=/opt/bin/apr-1-config \\\n                --with-apr-util=/opt/bin/apu-1-config \\\n                --enable-mpms-shared=all \\\n                --enable-mods-shared=all \\\n                --disable-lua > build/aix/configure.out\nconfigure: error: APR-util not found.  Please read the documentation.\nroot@x103:[/data/prj/TEST/httpd-trunk]\n\nNow I am guessing, from your comments before, that I cannot use the \"old\" apr-util, but must \"configure\" using the two \"new\" ones...\n\n./configure \\\n                --enable-layout=AIX \\\n                --with-apr=../apr \\\n                --with-apr-util=../apr-util \\\n                --enable-mpms-shared=all \\\n                --enable-mods-shared=all \\\n                --disable-lua > build/aix/configure.out\nconfigure: error: the --with-apr parameter is incorrect. It must specify an install prefix, a build directory, or an apr-config file.\nroot@x103:[/data/prj/TEST/httpd-trunk]\n\nAs that does not work either, I suspect I am just a packager, however, I am learning the ASF way. Just a slightly steeper learning curve.\n\nSays change status to . -- I am guessing that means New."}, {"count": 5, "text": "p.s. i had tried extraclean, was not clean enough.", "bug_id": 52813, "is_private": false, "id": 154456, "time": "2012-03-02T23:17:36Z", "creator": "mamfelt@gmail.com", "creation_time": "2012-03-02T23:17:36Z", "tags": [], "attachment_id": null}, {"count": 6, "text": "I don't think you can point to an unbuilt source checkout, only the things in the error message.  Further discussion needs to be moved to http://httpd.apache.org/lists.html#http-users", "bug_id": 52813, "attachment_id": null, "id": 154459, "time": "2012-03-03T00:25:45Z", "creator": "covener@gmail.com", "creation_time": "2012-03-03T00:25:45Z", "tags": [], "is_private": false}]