[{"count": 0, "tags": [], "bug_id": 33577, "is_private": false, "text": "The version of lenya I'm using is actually the 1.2.x branch checked out today.\nHowever, the same js bug (for me) would be there in the 1.2.1 release.\n\nWhile inserting an image from the asset library with kupu the servlet echoed\nthis error on stdout:\n\"file:/usr/local/lenya-1.2.x/build/lenya/webapp/lenya/usecases/kupu/usecase-kupu.js\",\nline 82: uncaught JavaScript exception: \n## at publication_image_library\n(file:/usr/local/lenya-1.2.x/build/lenya/webapp/lenya/usecases/kupu/usecase-kupu.js,\nLine 82):\n## Implicit declaration of global variable 'title' forbidden. Please ensure all\nvariables are explicitely declared with the 'var' keyword\n\nSo I declared the variable in usecase-kupu.js and it worked fine.  Thus:\n$ pwd\n/usr/local/lenya/build/lenya/webapp/lenya/usecases/kupu\n$ diff usecase-kupu.js usecase-kupu.js.orig\n82c82\n<             var title =\nmetaDoc.getElementsByTagNameNS(\"http://purl.org/dc/elements/1.1/\",\n\"title\").item(0).getChildNodes().item(0).getNodeValue();\n---\n>             title =\nmetaDoc.getElementsByTagNameNS(\"http://purl.org/dc/elements/1.1/\",\n\"title\").item(0).getChildNodes().item(0).getNodeValue();\n94c94\n\nI'm using mozilla 1.7.3", "id": 70982, "time": "2005-02-15T03:32:38Z", "creator": "deatrich@gmail.com", "creation_time": "2005-02-15T03:32:38Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "gregor@apache.org", "is_private": false, "id": 70983, "time": "2005-02-15T04:47:53Z", "bug_id": 33577, "creation_time": "2005-02-15T04:47:53Z", "tags": [], "text": "thanks, good catch."}]