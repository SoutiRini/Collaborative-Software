[{"count": 0, "tags": [], "bug_id": 60886, "text": "Building and testing JMeter in a corporate environment is hard if your are locked down and have outbound access via HTTP proxy only. See bug 60883.\n\n1. Building: build.xml requires direct, outbound access to the Internet. You can fiddle around it by applying following patch:\n> diff --git a/build.xml b/build.xml\n> index 4ddd4513f..08c2fdf83 100644\n> --- a/build.xml\n> +++ b/build.xml\n> @@ -3052,7 +3052,8 @@ run JMeter unless all the JMeter jars are added.\n>    <!-- Download a jar file and check its hash; if correct, move to correct directory -->\n>    <target name=\"_get_jarfile\" if=\"_get_jarfile\" unless=\"file.exists\">\n>      <echo message=\"Fetching: ${path}/${jar}\" level=\"info\"/>\n> -    <get src=\"${loc}/${jar}\"\n> +    <setproxy proxyhost=\"${proxy.host}\" proxyport=\"${proxy.port}\"/>\n> +       <get src=\"${loc}/${jar}\"\n>           dest=\"${build.dir}/${jar}\"\n>           usetimestamp=\"false\" ignoreerrors=\"false\"/>\n>      <antcall target=\"_checkMD5\">\n> \nValues are in build-local.properties. Username/password for proxy can be supplied optionally.\n2. Testing: several tests require hard outbound connection to 8.8.8.8 (DNS) or proxy sampler test to jmeter.apache.org. Impossible to pass tests.\n\nDocument both issues in README.md and building.html.\n\nPeople should be aware that this is problematic before wasting time to figure out what's wrong.", "id": 197774, "time": "2017-03-17T20:59:07Z", "creator": "1983-01-06@gmx.net", "creation_time": "2017-03-17T20:59:07Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 60886, "text": "I have added the usage of ANT_OPTS. Is the patch really needed, when that environment entry is set?\n\nDate: Fri Mar 17 21:20:45 2017\nNew Revision: 1787505\n\nURL: http://svn.apache.org/viewvc?rev=1787505&view=rev\nLog:\nMention the usage of ANT_OPTS to use a proxy in the building instructions.\n\nBugzilla Id: 60886\n\nModified:\n    jmeter/trunk/README.md\n    jmeter/trunk/xdocs/building.xml", "id": 197777, "time": "2017-03-17T21:22:58Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2017-03-17T21:22:58Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 60886, "attachment_id": null, "is_private": false, "id": 197780, "time": "2017-03-17T21:29:04Z", "creator": "1983-01-06@gmx.net", "creation_time": "2017-03-17T21:29:04Z", "text": "While it looks OK, it recommends a bad practice: -Dhttp.pass=xxxxx\nYou expose your password to everyone running top. Very bad idea."}, {"count": 3, "tags": [], "bug_id": 60886, "attachment_id": 34842, "id": 197782, "time": "2017-03-17T21:35:18Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2017-03-17T21:35:18Z", "is_private": false, "text": "Created attachment 34842\nAdd proxy settings to ant download tasks\n\nAdd proxy settings to the download_tasks, so that the environment entries are not repeated in something like top or ps."}, {"count": 4, "tags": [], "creator": "felix.schumacher@internetallee.de", "text": "*** Bug 53709 has been marked as a duplicate of this bug. ***", "id": 197784, "time": "2017-03-17T21:38:45Z", "bug_id": 60886, "creation_time": "2017-03-17T21:38:45Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 60886, "text": "Created attachment 34843\nAdd proxy settings to ant download tasks\n\nShould stop coding for today. Now the complete patch (hopefully).", "id": 197786, "time": "2017-03-17T21:42:03Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2017-03-17T21:42:03Z", "is_private": false, "attachment_id": 34843}, {"count": 6, "tags": [], "bug_id": 60886, "text": "(In reply to Felix Schumacher from comment #5)\n> Created attachment 34843 [details]\n> Add proxy settings to ant download tasks\n> \n> Should stop coding for today. Now the complete patch (hopefully).\n\nLooks good to me. I will test tomorrow and let you know.", "id": 197788, "time": "2017-03-18T10:26:49Z", "creator": "1983-01-06@gmx.net", "creation_time": "2017-03-18T10:26:49Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 60886, "attachment_id": null, "text": "Tested the patch. Works like a chimp.\n\nPlease revert r1787505, it contains obsolete information.\n\nThe following PR contains necessary information to make tests pass w/o Internet access: https://github.com/apache/jmeter/pull/284\n\nThis is not the best solution, but it does its job now and everyone can contribute. The best solution would either be to pass proxy to the testplans or run an embedded Jetty to mimic necessary behavior. This is what we do in Maven Wagon.\n\nSome README.md updates for the PR are necessary too.\n\nWDYT?", "id": 197814, "time": "2017-03-19T22:04:14Z", "creator": "1983-01-06@gmx.net", "creation_time": "2017-03-19T22:04:14Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 60886, "text": "Command line: ant test -Dskip.bug52310=true -Dskip.bug60607=true -Dskip.batchtest_Http4ImplPreemptiveBasicAuth=true -Dskip.batchtest_SlowCharsFeature=true -Dskip.batchtest_TestKeepAlive=true -Dskip.test_http=true -Dskip.test_TestDNSCacheManager.testWithCustomResolverAnd1Server=true", "id": 197815, "time": "2017-03-19T22:07:48Z", "creator": "1983-01-06@gmx.net", "creation_time": "2017-03-19T22:07:48Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 60886, "attachment_id": null, "text": "Date: Thu Mar 23 20:44:50 2017\nNew Revision: 1788319\n\nURL: http://svn.apache.org/viewvc?rev=1788319&view=rev\nLog:\nBuild improvements to better enable builds in environments that are behind a proxy.\n\nBugzilla Id: 60886\n\nModified:\n    jmeter/trunk/README.md\n    jmeter/trunk/build.xml\n    jmeter/trunk/xdocs/building.xml\n    jmeter/trunk/xdocs/changes.xml", "id": 197950, "time": "2017-03-23T20:57:23Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2017-03-23T20:57:23Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 60886, "attachment_id": null, "id": 197951, "time": "2017-03-23T21:08:32Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2017-03-23T21:08:32Z", "is_private": false, "text": "Date: Thu Mar 23 21:07:53 2017\nNew Revision: 1788325\n\nURL: http://svn.apache.org/viewvc?rev=1788325&view=rev\nLog:\nAdd properties to skip tests, that fail in environments without proper internet access, ie. are behind\na proxy. Contributed by Michael Osipov.\n\nBugzilla Id: 60886\n\nModified:\n    jmeter/trunk/README.md\n    jmeter/trunk/build.xml\n    jmeter/trunk/test/src/org/apache/jmeter/protocol/http/control/TestDNSCacheManager.java\n    jmeter/trunk/xdocs/building.xml\n    jmeter/trunk/xdocs/changes.xml"}, {"attachment_id": null, "tags": [], "creator": "felix.schumacher@internetallee.de", "is_private": false, "count": 11, "id": 197953, "time": "2017-03-23T21:13:10Z", "bug_id": 60886, "creation_time": "2017-03-23T21:13:10Z", "text": "Thanks for your patches and feedback and I hope this enables your builds in your environment."}, {"attachment_id": null, "tags": [], "creator": "1983-01-06@gmx.net", "is_private": false, "count": 12, "id": 197962, "time": "2017-03-24T09:28:42Z", "bug_id": 60886, "creation_time": "2017-03-24T09:28:42Z", "text": "Way better now. You forgot to document the proxy.use=true property in the RADME.md file."}, {"count": 13, "tags": [], "text": "Date: Fri Mar 24 18:58:07 2017\nNew Revision: 1788530\n\nURL: http://svn.apache.org/viewvc?rev=1788530&view=rev\nLog:\nAdd docs for property proxy.use and change Michael's email.\n\nBugzilla Id: 60886\n\nModified:\n    jmeter/trunk/README.md\n    jmeter/trunk/xdocs/building.xml\n    jmeter/trunk/xdocs/changes.xml", "is_private": false, "id": 197977, "creator": "felix.schumacher@internetallee.de", "time": "2017-03-24T19:03:30Z", "bug_id": 60886, "creation_time": "2017-03-24T19:03:30Z", "attachment_id": null}, {"count": 14, "tags": [], "text": "*** Bug 60435 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 200609, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2017-09-02T19:40:20Z", "bug_id": 60886, "creation_time": "2017-09-02T19:40:20Z", "attachment_id": null}]