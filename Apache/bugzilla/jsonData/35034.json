[{"count": 0, "tags": [], "creator": "gernot.pfingstl@stmk.gv.at", "attachment_id": null, "is_private": false, "id": 75262, "time": "2005-05-24T07:38:42Z", "bug_id": 35034, "creation_time": "2005-05-24T07:38:42Z", "text": "Running tomcat with security manager: To get a datasource (with jndi) and to use\nstatements you have to grant several accessClassInPackage Permissions to tomcat\ninternal packages to the webapp:\n      permission java.lang.RuntimePermission\n\"accessClassInPackage.org.apache.tomcat.dbcp.collections\";\n      permission java.lang.RuntimePermission\n\"accessClassInPackage.org.apache.tomcat.dbcp.pool.impl\";\n      permission java.lang.RuntimePermission\n\"accessClassInPackage.org.apache.tomcat.dbcp.dbcp\";\n      permission java.lang.RuntimePermission\n\"accessClassInPackage.org.apache.tomcat.dbcp.pool\";\n\nAdditionally dbcp needs a permission java.lang.RuntimePermission\n\"getClassLoader\"; permission to load the jdbc driver.\n\nAnd in most cases you need some socket permissions.\n\nDatasources will be made available by the container (with JNDI). So the app\ndoesn't matter where the database resides nor how the container makes the\nconnection. The app is not interested in the details how the container will get\nthe connection - it is only interested to have a connection. \nThere is no need to give the whole app a permission to connect to some server\nonly because the container wants to make some connection to this server. The\npermission if a app should be able to make a connection is given by a\nresource-link entry in context.xml.\nThe permission to connect to the database server should be given at the\ncontainer level and only there.\nWhy should the whole app have permission to access tomcat internal packages\n(org.apache.tomcat.*)?"}, {"count": 1, "tags": [], "bug_id": 35034, "is_private": false, "id": 75265, "creation_time": "2005-05-24T09:58:33Z", "time": "2005-05-24T09:58:33Z", "creator": "remm@apache.org", "text": "The commons-dbcp library would need to be written with the security manager in\nmind (ie, it needs to have PAs). Not a Tomcat bug, and you should be able to use\nalternate datasource providers.", "attachment_id": null}]