[{"count": 0, "tags": [], "creator": "vonnahme.paul@principal.com", "attachment_id": null, "id": 130997, "time": "2009-10-08T13:18:19Z", "bug_id": 47967, "creation_time": "2009-10-08T13:18:19Z", "is_private": false, "text": "We have log4j at the extension class loader level as well as at the application class loader level, and each have their own log4j.properties file.  This worked fine until we upgraded to a version of log4j that searches the Thread Context Classloader for log4j.properties.  Log4j at the extension classloader level started picking up our application's log4j.properties.  We have log4j.ignoreTCL=true coded, but this did not help.  Looking at the code, it looks like the loadClass method obeys this setting, but getResource does not.  To fix this, the section of getResource in org.apache.log4j.helpers.Loader should be changed from:\n...\n  \tif(!java1) {\n  \t  classLoader = getTCL();\n  \t  if(classLoader != null) {\n  \t    LogLog.debug(\"Trying to find [\"+resource+\"] using context classloader \"\n  \t\t\t +classLoader+\".\");\n...\n\nto this (change is in first line only):\n\n...\n  \tif(!java1 && !ignoreTCL) {\n  \t  classLoader = getTCL();\n  \t  if(classLoader != null) {\n  \t    LogLog.debug(\"Trying to find [\"+resource+\"] using context classloader \"\n  \t\t\t +classLoader+\".\");\n...\n\nThis way setting log4j.ignoreTCL=true would make log4j only load properties from its current classloader and then also only load classes from the current classloader."}, {"count": 1, "tags": [], "bug_id": 47967, "text": "Committed rev 823403.", "id": 131011, "time": "2009-10-08T21:23:03Z", "creator": "carnold@apache.org", "creation_time": "2009-10-08T21:23:03Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 47967, "attachment_id": null, "id": 131799, "time": "2009-11-08T13:00:54Z", "creator": "carnold@apache.org", "creation_time": "2009-11-08T13:00:54Z", "is_private": false, "text": "*** Bug 48012 has been marked as a duplicate of this bug. ***"}]