[{"count": 0, "tags": [], "creator": "david.hubbard@agenor.co.uk", "text": "Created attachment 34102\nSample HTML response file\n\nHi\n\nI'm writing a PostProcessor in Java for JMeter - using HtmlParsingUtils.getDOM() to access the HTML response data.\n\nIn this I'm trying to pick out the Form fields from a response so that - when JMeter submits the form back - I can process the manage setting some of the posted param data.\n\nMy problem is the site I am trying to test returns some slightly wacky HTML, whereby several (showing one here) input field is included in a <table> element\n\n<input name=\"1\">\n<input name=\"2\" />\n   <table><tr><td><input name=\"3\"></td>\n<input name=\"4\"></tr>  \n</table>\n\nWhen fields get posted back by the browser they send them (form params) in-order (1+2+3+4) as expected.\n\nHowever when using HtmlParsingUtils.getDOM() the node tree for the <table> seems to get included only when the </table> is parsed.\n\nSo the tree returned has 3 and 4 swapped\n(input 1}\n(input 2}\n(input 4}\n(table\n    (tr\n      (td\n        (input 3}\n      )\n    )\n)\n\n\nIs this a bug? I confess I'm not sure - it depends if the start tag <table> or end tag </table> are the trigger for adding, however, from my reading \"input 4 is within the table node.\n\nIn this I can only assume that \"input\" fields are handled specially in the parser (since in html they don't need to include a closing tag or \"/>\" ? \n\nWhat it means for me is that I order I post params from JMeter is affected and the app dosesn't like this.  You might think that the app should handle params based on name even in wrong order, but the reality is that the input field names are not unique on the page - the app is using a framework with we can't change, \n\nI have attached an example html file which show this.", "id": 192878, "time": "2016-08-04T12:52:18Z", "bug_id": 59943, "creation_time": "2016-08-04T12:52:18Z", "is_private": false, "attachment_id": 34102}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Hello,\nThanks for report.\n\nYou're using here internal APIs of JMeter. Besides, this part of the API uses an old library jtidy (which makes cleanup of html) which may explain your issue.\n\nI suggest you rather rely on jsoup or jodd-lagarto which are embedded in JMeter , so you can use them in your custom code.\n\n\nRegarding your report, it appears it could affect one Element in JMeter \"HTML Link Parser\" which I would advise not to use either because of limitations in terms of performance and distributed testing not working for it.\n\n\nIf you solve your issue by following the above comments, it would be nice to ping us for feedback.\nRegards", "id": 192930, "time": "2016-08-05T20:19:36Z", "bug_id": 59943, "creation_time": "2016-08-05T20:19:36Z", "is_private": false, "attachment_id": null}, {"text": "(In reply to Philippe Mouawad from comment #1)\n> Hello,\n> Thanks for report.\n> \n> You're using here internal APIs of JMeter. Besides, this part of the API\n> uses an old library jtidy (which makes cleanup of html) which may explain\n> your issue.\n> \n> I suggest you rather rely on jsoup or jodd-lagarto which are embedded in\n> JMeter , so you can use them in your custom code.\n> \n> \n> Regarding your report, it appears it could affect one Element in JMeter\n> \"HTML Link Parser\" which I would advise not to use either because of\n> limitations in terms of performance and distributed testing not working for\n> it.\n> \n> \n> If you solve your issue by following the above comments, it would be nice to\n> ping us for feedback.\n> Regards\n\nPhillepe hi \n\nThanks for the feedback - I have successfully switched to jsoup, which handles my scenario.  \n\nRegards\nDavid", "tags": [], "bug_id": 59943, "attachment_id": null, "count": 2, "id": 193171, "time": "2016-08-18T12:57:44Z", "creator": "david.hubbard@agenor.co.uk", "creation_time": "2016-08-18T12:57:44Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 59943, "attachment_id": null, "text": "(In reply to David Hubbard from comment #2)\n> (In reply to Philippe Mouawad from comment #1)\n> > Hello,\n> > Thanks for report.\n> > \n> > You're using here internal APIs of JMeter. Besides, this part of the API\n> > uses an old library jtidy (which makes cleanup of html) which may explain\n> > your issue.\n> > \n> > I suggest you rather rely on jsoup or jodd-lagarto which are embedded in\n> > JMeter , so you can use them in your custom code.\n> > \n> > \n> > Regarding your report, it appears it could affect one Element in JMeter\n> > \"HTML Link Parser\" which I would advise not to use either because of\n> > limitations in terms of performance and distributed testing not working for\n> > it.\n> > \n> > \n> > If you solve your issue by following the above comments, it would be nice to\n> > ping us for feedback.\n> > Regards\n> \n> Phillepe hi \n> \n> Thanks for the feedback - I have successfully switched to jsoup, which\n> handles my scenario.  \n> \n> Regards\n> David\n\nThanks for your feedback.\nI will reopen the bug, as it affects a component of JMeter", "id": 193189, "time": "2016-08-18T19:42:29Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-08-18T19:42:29Z", "is_private": false}, {"count": 4, "tags": [], "creator": "david.hubbard@agenor.co.uk", "text": "(In reply to Philippe Mouawad from comment #3)\n> \n> Thanks for your feedback.\n> I will reopen the bug, as it affects a component of JMeter\n\nOk\n\nA couple of observations in passing: \n1) as you are bundling jsoup would you also consider adding xsoup (for xpath support on top of jsoup) <https://github.com/code4craft/xsoup> ?\n2) should HtmlParsingUtils be marked @Deprecated in code <https://bz.apache.org/bugzilla/show_bug.cgi?id=59036>?\n\nThanks\nDavid", "id": 193213, "time": "2016-08-19T07:40:16Z", "bug_id": 59943, "creation_time": "2016-08-19T07:40:16Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "(In reply to David Hubbard from comment #4)\n> (In reply to Philippe Mouawad from comment #3)\n> > \n> > Thanks for your feedback.\n> > I will reopen the bug, as it affects a component of JMeter\n> \n> Ok\n> \n> A couple of observations in passing: \n> 1) as you are bundling jsoup would you also consider adding xsoup (for xpath\n> support on top of jsoup) <https://github.com/code4craft/xsoup> ?\n\nInteresting, XPath performances in JMeter are not that great.\nWould you mind raising the subject on dev mailing list ?\n\n> 2) should HtmlParsingUtils be marked @Deprecated in code\n> <https://bz.apache.org/bugzilla/show_bug.cgi?id=59036>?\n> \nSame answer.\n> Thanks\n> David", "id": 193214, "time": "2016-08-19T07:46:40Z", "bug_id": 59943, "creation_time": "2016-08-19T07:46:40Z", "is_private": false, "attachment_id": null}]