[{"count": 0, "attachment_id": 24807, "bug_id": 48497, "is_private": false, "id": 133397, "time": "2010-01-06T16:39:02Z", "creator": "dole@blekko.com", "creation_time": "2010-01-06T16:39:02Z", "tags": [], "text": "Created attachment 24807\npatch to fix ab.c ton only send the correct number of requests for keepalive sessions\n\nab -k -n 1 http://www.example.com/\n\nwill send more than one GET request. The problem is worse for higher concurrency levels.  The issue is how the started connections is counted.\n\nI first discovered this watching a tcp dump of ab at work. It would consistently send one extra GET request per connection and then close the tcp session before the reply would return. Resulting in a TCP RST packet. \n\nI'm attaching a patch that actually simplifies the accounting of started requests and prevents apachebench from starting more requests than it should."}, {"count": 1, "tags": [], "creator": "poirier@pobox.com", "attachment_id": null, "id": 136606, "creation_time": "2010-05-03T13:34:40Z", "time": "2010-05-03T13:34:40Z", "bug_id": 48497, "text": "Fix committed to trunk as r940526.  Thanks for the patch.", "is_private": false}]