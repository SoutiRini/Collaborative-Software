[{"count": 0, "tags": [], "creator": "nb@nikolay.bg", "attachment_id": 22085, "id": 117427, "time": "2008-06-06T03:02:30Z", "bug_id": 45148, "creation_time": "2008-06-06T03:02:30Z", "is_private": false, "text": "Created attachment 22085\nPatch, which uses the Host header where present and server name otherwise.\n\nActual Results:\nmod_status shows the virtual host (server name) of each request.\n\nExpected Results:\nIt can show the value of the Host header, where it is present. The real host will be more helpful for administrators, than just the virtual host.\n\nAdditional Information:\nThanks to Barry Abrahamson, who inspired me to patch this."}, {"count": 1, "tags": [], "text": "*** Bug 50555 has been marked as a duplicate of this bug. ***", "is_private": false, "bug_id": 45148, "id": 147248, "time": "2011-06-18T13:36:38Z", "creator": "sf@sfritsch.de", "creation_time": "2011-06-18T13:36:38Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "manu@gandi.net", "attachment_id": null, "id": 148246, "time": "2011-07-28T12:58:28Z", "bug_id": 45148, "creation_time": "2011-07-28T12:58:28Z", "is_private": false, "text": "\nin 2.3-head this patch work well for me.\nap_get_server_name reflect the real virtualhost configuration\n\n--- apache2.3-trunk.orig/server/scoreboard.c    2011-07-21 11:13:55 +0000\n+++ apache2.3-trunk/server/scoreboard.c    2011-07-27 10:12:13 +0000\n@@ -492,7 +492,7 @@\n                         REMOTE_NOLOOKUP, NULL), sizeof(ws->client));\n             copy_request(ws->request, sizeof(ws->request), r);\n             if (r->server) {\n-                apr_cpystrn(ws->vhost, r->server->server_hostname,\n+                apr_cpystrn(ws->vhost, ap_get_server_name(r),\n                             sizeof(ws->vhost));\n             }\n         }"}]