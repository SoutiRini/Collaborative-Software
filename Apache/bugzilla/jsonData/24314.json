[{"count": 0, "tags": [], "bug_id": 24314, "attachment_id": null, "id": 46602, "time": "2003-11-01T02:10:41Z", "creator": "kylev@yaga.com", "creation_time": "2003-11-01T02:10:41Z", "is_private": false, "text": "I saw this under LastReq a couple of times in my jkstatus page (built from the\n2.0.2 tarball):\n\n/cnetcd/aiListTransactions.do;jsessionid=3C39F41641B7CA3405B45D0\u00a2<\u00d9?\n\nWhich seems really scary.  Sure enough, in jk_worker_ajp13.c we see that this\nstruct field (struct jk_stat's active is char[64]) is populated by a strncpy on\nline 472:\n\n    /* XXX configurable ? */\n    strncpy( e->stats->active, s->req_uri, 64);\n\nIn jk_worker_status.c, the utility function jk2_worker_status_displayStat(...)\ndoesn't pay attention to this size, using jkprintf:\n\n    s->jkprintf(env, s, \"<td>%s</td>\\n\",  JK_CHECK_NULL(stat->active) );\n\njkprintf is a void* to jk2_requtil_printf, which does expects a NULL terminated\nstring!  It will occasionally wander off into oblivion until it hits a null.  Icky."}, {"count": 1, "tags": [], "creator": "kylev@yaga.com", "attachment_id": 8968, "id": 46962, "time": "2003-11-07T00:19:33Z", "bug_id": 24314, "creation_time": "2003-11-07T00:19:33Z", "is_private": false, "text": "Created attachment 8968\nMake sure to null terminate what is treated as a string"}]