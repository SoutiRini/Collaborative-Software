[{"count": 0, "tags": [], "bug_id": 16165, "attachment_id": null, "text": "I have problems using setHeader after calling doFilter in a ServletFilter with \nResponse-Wrapper:\n\npublic void doFilter(ServletRequest request, ServletResponse response, \n\t\tFilterChain chain )\tthrows IOException, ServletException {\n\t\t\tHttpServletRequest hreq=(HttpServletRequest)request;\n\t\t\tHttpServletResponse hres=(HttpServletResponse)response;\n\t\t\t\n\t\t\tLocalResponseWrapper lrw=new LocalResponseWrapper(hres);\n\t\t\tPrintWriter w=response.getWriter();\n\t\t\thres.setHeader(\"1\",\"1\");\n\t\t\tchain.doFilter(hreq,lrw);\n\t\t\thres.setHeader(\"2\",\"2\");\n\t\t\tString result=lrw.toString();\n\t\t\tw.println(result);\n\t\t\tw.close();\t\n\t}\nHeader \"1\" will be set, header \"2\" not...\nWith tomcat 4.1.18 this works. Is this a bug or a feature???", "id": 29527, "time": "2003-01-16T12:29:50Z", "creator": "cml@mobileview.de", "creation_time": "2003-01-16T12:29:50Z", "is_private": false}, {"count": 1, "tags": [], "creator": "cml@mobileview.de", "attachment_id": null, "text": "Addition:\n\nI have that problem only when I want to access a JSP through the filter. When I \naccess a static wml/html page it works...", "id": 29529, "time": "2003-01-16T13:04:53Z", "bug_id": 16165, "creation_time": "2003-01-16T13:04:53Z", "is_private": false}, {"count": 2, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "text": "The next chain in the filter is committing the response. Once the response is\ncommitted, then no more headers may be set.\n ", "id": 53232, "time": "2004-02-29T21:20:53Z", "bug_id": 16165, "creation_time": "2004-02-29T21:20:53Z", "is_private": false}]