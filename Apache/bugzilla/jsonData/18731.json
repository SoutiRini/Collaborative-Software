[{"count": 0, "tags": [], "bug_id": 18731, "text": "The implementation of InstructionList.copy() works on the internal targets\nfields of the select instructions:\n\n(InstructionList.java line 1110)\n\t  InstructionHandle[] itargets = ((Select)bi).getTargets();\n\t  InstructionHandle[] ctargets = ((Select)bc).getTargets();\n\nBut because bc is created from bi by cloning bi, both refer to the same target\narray.\n\nChanging ctargets also changes itargets. \n\nThe reason for this is, that Select does not override clone. \n\nThe following patch fixes this problem:\n\nIndex: Select.java\n===================================================================\nRCS file:\n/home/cvspublic/jakarta-bcel/src/java/org/apache/bcel/generic/Select.java,v\nretrieving revision 1.2\ndiff -u -r1.2 Select.java\n--- Select.java 26 Apr 2002 09:30:11 -0000      1.2\n+++ Select.java 5 Apr 2003 13:37:54 -0000\n@@ -227,6 +227,16 @@\n     return false;\n   }\n\n+  protected Object clone() throws CloneNotSupportedException {\n+      Select result = (Select) super.clone();\n+\n+      result.match   = (int[]) result.match.clone();\n+      result.indices = (int[]) result.indices.clone();\n+      result.targets = (InstructionHandle[]) result.targets.clone();\n+\n+      return result;\n+  }\n+\n   /**\n    * Inform targets that they're not targeted anymore.\n    */", "id": 34574, "time": "2003-04-05T13:48:07Z", "creator": "wombat@uni.de", "creation_time": "2003-04-05T13:48:07Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 18731, "attachment_id": null, "id": 71335, "time": "2005-02-22T07:21:38Z", "creator": "dbrosius@mebigfatguy.com", "creation_time": "2005-02-22T07:21:38Z", "is_private": false, "text": "Applied to SVN, thanks."}]