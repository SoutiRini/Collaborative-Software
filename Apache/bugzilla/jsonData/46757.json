[{"attachment_id": 23298, "tags": [], "creator": "andrew.barnham@gmail.com", "is_private": false, "count": 0, "id": 125076, "time": "2009-02-22T20:36:54Z", "bug_id": 46757, "creation_time": "2009-02-22T20:36:54Z", "text": "Created attachment 23298\nProblematic .wmf resultant .svg with and without patches.\n\nHi Had a few problems with some wmf's I am trying to convert into svg.\n\nSee attached .zip file. It contains 3 items:\n\nOriginal WMF\nResultant SVG that Batik 1.8pre emits (with clipping removed, I hacked dom to remove it because causes me troubles)\nResultant SVG after I patched in some hacks into code.\n\nI hacked in some fixes so not a critical issue for me, but would be nice for a fix to appear so that I don't have to maintain a patched version for my own needs.\n\nHack #1 - org.apache.batik.transcoder.wmf.tosvg.WMFRecordStore\n---\n253c\n                    } else {\n                        ySign = 1;\n                    }\n.\n249c\n                    } else {\n                        xSign= 1;\n                    }\n.\n---\nThis one definitly looks like a bug to me. If I have a view port/window thingo that sets up a port with -ve numbers then a second one with +ve numbers then xSign/ySign do not get reset. Looks like to me that they should.\n\nHack #2 - VpX/VpY settings. Image was not aligned/offset correctly.\n---\n183,184c\n                    currentStore.setVpX( vpX = (float)mr.elementAt( 0 ) );\n                    currentStore.setVpY( vpY = (float)mr.elementAt( 1 ) );\n.\n---\n\nOriginal code havd -ves in there. Dunno why but when I removed them my .wmf to .svg came good (almost) - it is not aligned quite the way I'd like it but it's close enough for my purposes."}]