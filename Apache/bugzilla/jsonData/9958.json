[{"id": 17989, "tags": [], "creator": "jesse@noitatieto.fi", "attachment_id": null, "count": 0, "text": "Setting:\n- a JSTL page using only jstl-c (el version), <c:out>.\n- JSTL version is the 1.0 (copied from jwsdp-1.0).\n- SunOS host 5.8 Generic_108528-13 sun4u sparc SUNW,UltraSPARC-IIi-cEngine\n- java version \"1.4.0\"\n  Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.0-b92)\n  Java HotSpot(TM) Client VM (build 1.4.0-b92, mixed mode)\n- JAVA_OPTS=-mx256m\n- W2k/tomcat-4.0.3/sun java 1.4.0 has the same problem -> probably\n  cross-platform\n- Sample page below below\n\nProblem:\n Adding one more <c:out>-tag causes the exception below. By removing a <c:out>\nfrom the crashing jsp -> the jsp compiles correctly. There is the same\nproblem with tomcat 4.0.3, but the needed amount of JSTL tags is somewhat lower\nThe problem seems to be gone in 4.1.5, but it has other issues (alongside not\nbeing 'release').\n\n The line of code referenced by the exception is generated from the line of jsp\nwith the second-last <c:out> tag (if the comment lines are to be trusted in the\ngenerated .java).\n\n Below is also the part from the generated .java, and I can't see the problem.\nThe file also compiles manually like it should (javac -classpath world:and:dog\na$jsp.java).\n\nthe exception:\n---8<---\norg.apache.jasper.JasperException: Unable to compile class for JSPNote:\nsun.tools.javac.Main has been deprecated.\n\n\nAn error occurred at line: 56 in the jsp file: /a.jsp\n\nGenerated servlet error:\n/mnt/project/jakarta-tomcat-4.0.4/work/Standalone/localhost/jesse/a$jsp.java:1813:\nVariable _jspx_th_c_out_51 may not have been initialized.\n                          } while (_jspx_th_c_out_51.doAfterBody() ==\njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN);\n                                   ^\n\n\nAn error occurred at line: 56 in the jsp file: /a.jsp\n\nGenerated servlet error:\n/mnt/project/jakarta-tomcat-4.0.4/work/Standalone/localhost/jesse/a$jsp.java:1819:\nVariable _jspx_th_c_out_51 may not have been initialized.\n                  if (_jspx_th_c_out_51.doEndTag() ==\njavax.servlet.jsp.tagext.Tag.SKIP_PAGE)\n                      ^\n2 errors, 1 warning\n\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:285)\n\tat org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:548)\n\tat\norg.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary(JspServlet.java:176)\n\tat\norg.apache.jasper.servlet.JspServlet$JspServletWrapper.service(JspServlet.java:188)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:381)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:473)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n-snip-\n---8<---\n\npart of the generated code:\n---8<---\n                  int _jspx_eval_c_out_51 = _jspx_th_c_out_51.doStartTag();\n                  if (_jspx_eval_c_out_51 !=\njavax.servlet.jsp.tagext.Tag.SKIP_BODY) {\n                      try {\n                          if (_jspx_eval_c_out_51 !=\njavax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {\n                              out = pageContext.pushBody();\n                             \n_jspx_th_c_out_51.setBodyContent((javax.servlet.jsp.tagext.BodyContent) out);\n                              _jspx_th_c_out_51.doInitBody();\n                          }\n                          do {\n                          // end\n                          // begin [file=\"/a.jsp\";from=(55,0);to=(55,21)]\n                          } while (_jspx_th_c_out_51.doAfterBody() ==\njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGA\nIN);    \n                      } finally {  \n                          if (_jspx_eval_c_out_51 !=\njavax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE)\n                              out = pageContext.popBody();\n                      } \n---8<---\n\nsample page:\n---8<---\n<html>\n<%@ taglib uri=\"/jstl-c\" prefix=\"c\" %>\n<head><title> a </title></head>\n<body>\n<c:out value=\"TEST\"/><br>\n...repeat the line above for 51 more times...\n</body>\n</html>\n---8<---\n\nsample web.xml:\n---8<---\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<!DOCTYPE web-app\n    PUBLIC \"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n    \"http://java.sun.com/dtd/web-app_2_3.dtd\">\n<web-app>\n  <taglib> \n    <taglib-uri>/jstl-c</taglib-uri>\n    <taglib-location>/WEB-INF/jstl/c.tld</taglib-location>\n  </taglib>\n</web-app>\n---8<---", "time": "2002-06-18T14:30:32Z", "bug_id": 9958, "creation_time": "2002-06-18T14:30:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 9958, "is_private": false, "text": "This problem likely does not exist when running with JDK 1.3 and the classic \ncompiler.", "id": 17996, "time": "2002-06-18T15:26:54Z", "creator": "remm@apache.org", "creation_time": "2002-06-18T15:26:54Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9958, "attachment_id": null, "is_private": false, "id": 18048, "time": "2002-06-19T11:06:14Z", "creator": "jesse@noitatieto.fi", "creation_time": "2002-06-19T11:06:14Z", "text": " Verified, does work when the jdk used is changed to\njava version \"1.3.1_03\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.3.1_03-b03)\nJava HotSpot(TM) Client VM (build 1.3.1_03-b03, mixed mode)"}, {"count": 3, "tags": [], "bug_id": 9958, "is_private": false, "text": "To web application's WEB-INF/lib directory,\ndo you have deployed JAR files which are included in the JSTL 1.0 RI ???", "id": 18051, "time": "2002-06-19T11:20:30Z", "creator": "super-creek@jcom.home.ne.jp", "creation_time": "2002-06-19T11:20:30Z", "attachment_id": null}, {"text": "The jar files in my WEB-APP/lib:\n\n191881 Jun 17 10:31 jaxen-full.jar\n 20801 Jun 17 10:30 jstl.jar\n 23563 Jun 17 10:31 saxpath.jar\n498612 Jun 17 10:31 standard.jar\n\nthe files are from jwsdp-1.0, which claimed to have JSTL 1.0 final. (just\nchecked what the jakarta.apache.org distribution directory\n(http://jakarta.apache.org/builds/jakarta-taglibs/releases/standard/) has, and\nit only has *-rc1 files, aren't those supposed to be release candidate 1?", "tags": [], "bug_id": 9958, "is_private": false, "count": 4, "id": 18057, "time": "2002-06-19T11:49:05Z", "creator": "jesse@noitatieto.fi", "creation_time": "2002-06-19T11:49:05Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 9958, "attachment_id": null, "id": 18713, "time": "2002-06-28T12:36:25Z", "creator": "petr.pisl@sun.com", "creation_time": "2002-06-28T12:36:25Z", "is_private": false, "text": "Hi,\n\nI have the same problem on the Solaris, Tomcat 4.0.4 or 4.0.3 and jdk1.4, but I\nuse struts no jstl. When I want to see a jsp in the browser in the first time,\nthen I get the same error. The java file for the jsp is created in the working\ndirectory but there is not class file. When I restart Tomcat, then it's OK. But\nI have to do for every longer page, which used struts in my app. "}, {"count": 6, "tags": [], "bug_id": 9958, "attachment_id": null, "is_private": false, "id": 35562, "time": "2003-04-18T15:43:40Z", "creator": "funkman@joedog.org", "creation_time": "2003-04-18T15:43:40Z", "text": "This is a problem with jasper. Use jasper2. (4.1.X)"}]