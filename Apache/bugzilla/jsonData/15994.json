[{"count": 0, "tags": [], "creator": "tony@bci.gb.com", "text": "When I use the <cvstagdiff> taskdef and supply a startdate and enddate interval \nin which no commits have occurred in CVS, the cvstagdiff taskdef stack dumps \nand quits the build. See the ant log excerpt below.\n\nI have writen a small fix for this and rebuilt Ant 1.5.1 locally and the fix \ncures the problem. The problem is that the method 'parseRDiff' (in \nCvsTagDiff.java line 354) assumes the CVS supplied rdiff file contains at least \none line when it may contain none. I have changed line 354 from:\n\n  int headerLength = getHeaderLength(line);\n\nto:\n\n  int headerLength = (line == null) ? 0 : getHeaderLength(line);\n\n\n------------------------ Ant's log.xml ----------------\n<task location=\"file:C:/CruiseControl/bcitoolkitbuild/build.xml:126: \" \nname=\"cvstagdiff\" time=\"2 seconds\">\n <message priority=\"debug\"><![CDATA[Cvs command is rdiff -s -D '2003-01-10 \n12:15:19' -D '2003-01-10 14:50:31' bt_toolkit]]></message>\n <message priority=\"debug\"><![CDATA[Execute:Java13CommandLauncher: \nExecuting 'cvs' with arguments:\n'-d:ext:tony@xxxxx:/cvs/bcisource'\n'rdiff'\n'-s'\n'-D'\n'2003-01-10 12:15:19'\n'-D'\n'2003-01-10 14:50:31'\n'bt_toolkit'\n\nThe ' characters around the executable and arguments are\nnot part of the command.\n]]></message>\n <message priority=\"debug\"><![CDATA[retCode=0]]></message>\n </task>\n</target>\n<stacktrace><![CDATA[java.lang.NullPointerException\nat org.apache.tools.ant.taskdefs.cvslib.CvsTagDiff.getHeaderLength\n(CvsTagDiff.java:428)\nat org.apache.tools.ant.taskdefs.cvslib.CvsTagDiff.parseRDiff\n(CvsTagDiff.java:354)\nat org.apache.tools.ant.taskdefs.cvslib.CvsTagDiff.execute(CvsTagDiff.java:326)\nat org.apache.tools.ant.Task.perform(Task.java:319)\nat org.apache.tools.ant.Target.execute(Target.java:309)\nat org.apache.tools.ant.Target.performTasks(Target.java:336)\nat org.apache.tools.ant.Project.executeTarget(Project.java:1306)\nat org.apache.tools.ant.Project.executeTargets(Project.java:1250)\nat org.apache.tools.ant.Main.runBuild(Main.java:610)\nat org.apache.tools.ant.Main.start(Main.java:196)\nat org.apache.tools.ant.Main.main(Main.java:235)\n]]></stacktrace>\n-----------------------", "id": 29185, "time": "2003-01-11T13:16:49Z", "bug_id": 15994, "creation_time": "2003-01-11T13:16:49Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 15994, "is_private": false, "count": 1, "id": 29245, "time": "2003-01-13T13:18:14Z", "creator": "bodewig@apache.org", "creation_time": "2003-01-13T13:18:14Z", "text": "\n\n*** This bug has been marked as a duplicate of 13514 ***"}]