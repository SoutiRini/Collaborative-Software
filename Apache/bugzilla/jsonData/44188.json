[{"count": 0, "tags": [], "text": "I'm seeing sporadically empty and/or incomplete HTTP responses when requesting\ncertain pages. There is a  Zlib: Validation bytes not present message in the\nerror_log for the failing request. \n\nThe URL http://httpd.apache.org/docs/1.3/programs/apxs.html\n\ncan be used to provoke this strange behavior. Filters are setup as follows:\n\nAddOutputFilterByType INFLATE text/html text/plain text/xml\nAddOutputFilterByType DEFLATE text/html text/plain text/xml\n\nThis bug is similar to earlier resolved issue:\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=43512", "attachment_id": null, "id": 112664, "creator": "pbelau1@yahoo.com", "time": "2008-01-08T18:20:53Z", "bug_id": 44188, "creation_time": "2008-01-08T18:20:53Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "rahul.g.nair@gmail.com", "text": "reproducable in trunk, (tested on solaris 11 sparc machine)\nThe configuration was\n\nProxyRequests On\nProxyVia On\n\n<Proxy *>\nAllow from all\n</Proxy>\nLoadModule deflate_module modules/mod_deflate.so\n\nAddOutputFilterByType INFLATE text/html text/plain text/xml\nAddOutputFilterByType DEFLATE text/html text/plain text/xml\n\nSee the sporadic truncated lengths in access log (given below)\nthe length of the page is 14004\n\n127.0.0.1 - - [26/May/2008:15:54:28 +0530] \"GET http://httpd.apache.org/docs/1.3/programs/apxs.html HTTP/1.0\" 200 14004\n.....\n127.0.0.1 - - [26/May/2008:15:54:47 +0530] \"GET http://httpd.apache.org/docs/1.3/programs/apxs.html HTTP/1.0\" 200 3881\n127.0.0.1 - - [26/May/2008:15:55:09 +0530] \"GET http://httpd.apache.org/docs/1.3/programs/apxs.html HTTP/1.0\" 200 14004\n.....\n127.0.0.1 - - [26/May/2008:15:55:26 +0530] \"GET http://httpd.apache.org/docs/1.3/programs/apxs.html HTTP/1.0\" 200 10781\n.....\n127.0.0.1 - - [26/May/2008:15:57:54 +0530] \"GET http://httpd.apache.org/docs/1.3/programs/apxs.html HTTP/1.0\" 200 14004\n127.0.0.1 - - [26/May/2008:15:58:00 +0530] \"GET http://httpd.apache.org/docs/1.3/programs/apxs.html HTTP/1.0\" 200 10781\n127.0.0.1 - - [26/May/2008:15:58:08 +0530] \"GET http://httpd.apache.org/docs/1.3/programs/apxs.html HTTP/1.0\" 200 14004\n127.0.0.1 - - [26/May/2008:15:58:14 +0530] \"GET http://httpd.apache.org/docs/1.3/programs/apxs.html HTTP/1.0\" 200 14004\n", "count": 1, "id": 116965, "time": "2008-05-26T03:46:27Z", "bug_id": 44188, "creation_time": "2008-05-26T03:46:27Z", "is_private": false}, {"count": 2, "tags": [], "text": "Please provide the according error_log output to these truncations at loglevel debug.", "attachment_id": null, "id": 116974, "creator": "rpluem@apache.org", "time": "2008-05-26T06:34:38Z", "bug_id": 44188, "creation_time": "2008-05-26T06:34:38Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 44188, "text": "Created attachment 22006\nhttpd conf of the testcase\n\nhttpd conf of the testcase", "id": 116988, "time": "2008-05-27T00:06:29Z", "creator": "rahul.g.nair@gmail.com", "creation_time": "2008-05-27T00:06:29Z", "is_private": false, "attachment_id": 22006}, {"count": 4, "tags": [], "bug_id": 44188, "text": "Created attachment 22007\naccess log of testcase\n\naccess log of testcase", "id": 116989, "time": "2008-05-27T00:07:18Z", "creator": "rahul.g.nair@gmail.com", "creation_time": "2008-05-27T00:07:18Z", "is_private": false, "attachment_id": 22007}, {"count": 5, "attachment_id": 22008, "bug_id": 44188, "is_private": false, "id": 116990, "time": "2008-05-27T00:07:55Z", "creator": "rahul.g.nair@gmail.com", "creation_time": "2008-05-27T00:07:55Z", "tags": [], "text": "Created attachment 22008\ncorresponding error log at debug level\n\ncorresponding error log at debug level"}, {"count": 6, "tags": [], "bug_id": 44188, "attachment_id": null, "id": 116992, "time": "2008-05-27T00:24:23Z", "creator": "pbelau1@yahoo.com", "creation_time": "2008-05-27T00:24:23Z", "is_private": false, "text": "(In reply to comment #5)\n> Created an attachment (id=22008) [details]\n> corresponding error log at debug level\n> \n> corresponding error log at debug level\n> \n\n\n\nI believe that I have a patch for this in my own branch of Apache. It's a one-liner in mod_deflate AIRC. If anyone else needs it, I'll paste it in."}, {"count": 7, "tags": [], "bug_id": 44188, "text": "(In reply to comment #3)\n> Created an attachment (id=22006) [details]\n> httpd conf of the testcase\n> \n> httpd conf of the testcase\n> \n\nDoes this configuration really makes sense?\nPlease try what happens if you remove the INFLATE filter.\n", "id": 116994, "time": "2008-05-27T01:59:48Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-27T01:59:48Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 44188, "attachment_id": null, "id": 116995, "time": "2008-05-27T02:00:47Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-27T02:00:47Z", "is_private": false, "text": "(In reply to comment #6)\n> (In reply to comment #5)\n> > Created an attachment (id=22008) [details] [details]\n> > corresponding error log at debug level\n> > \n> > corresponding error log at debug level\n> > \n> \n> \n> \n> I believe that I have a patch for this in my own branch of Apache. It's a\n> one-liner in mod_deflate AIRC. If anyone else needs it, I'll paste it in.\n> \n\nPlease let us know your patch. So we can test it and check if it is related to this problem."}, {"count": 9, "tags": [], "bug_id": 44188, "text": "Please do a network sniff to the proxied backend to be sure that all data arrives from the proxied backend.", "id": 116996, "time": "2008-05-27T02:12:30Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-27T02:12:30Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "creator": "rahul.g.nair@gmail.com", "attachment_id": null, "text": "Sorry for the spurious confirmation. After checking the upstream data, the upstream data is also getting truncated. so what I experience is not what is mentioned in this bug.\n", "id": 116998, "time": "2008-05-27T04:12:38Z", "bug_id": 44188, "creation_time": "2008-05-27T04:12:38Z", "is_private": false}]