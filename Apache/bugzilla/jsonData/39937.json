[{"count": 0, "text": "This bug is also mentioned in bug #21372. When the file README.html is gzipped\nor compressed the content of that file is showed after the directory listing.\nThe problem is that the content of the README file is gzipped or compressed and\nis showed verbatim.\n\nIt seems that the bug is on the function emit_tail in mod_autoindex.c. The\nsolution consists in examining if the content-encoding header is set and\navoiding to show the content of the README file if the content-encoding is\neither \"x-gzip\" or \"x-compressed\" (as stated in\nhttp://www.w3.org/Protocols/HTTP/Object_Headers.html#content-encoding)\n\nHow to reproduce:\n1. make a directory accessible through httpd\n2. create a dummy README.html file and some other files on the\n   recently created directory\n3. browse that directory using $favourite_browser and you will see\n   the content of the directory (except README.html) and at the\n   bottom the content of README.html\n4. compress or gzip README.html on that directory\n5. browse the same directory and you will see\n   the content of the directory (except README.html) and at the\n   bottom the content of README.html.Z or README.html.gz\n   as binary.\n\n$ mkdir -p public_html/readme ; cd public_html/readme\n$ cat \\ \n  \"<html><head><title>README.html</title></head><body>README.html</body></html>\" \\\n  > README.html\n$ lynx -dump -nolist http://localhost/~user/readme/ > ~/readmeNotGzipped.html\n$ gzip README.html\n$ lynx -dump -nolist http://localhost/~user/readme/ > readmeGzipped.html\n$ gunzip README.html.gz && compress README.html\n$ lynx -dump -nolist http://localhost/~user/readme/ > readmeCompressed.html", "bug_id": 39937, "is_private": false, "id": 90775, "time": "2006-06-30T00:10:25Z", "creator": "miguel.pagano@gmail.com", "creation_time": "2006-06-30T00:10:25Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "creator": "miguel.pagano@gmail.com", "attachment_id": 18547, "is_private": false, "id": 90776, "time": "2006-06-30T00:51:24Z", "bug_id": 39937, "creation_time": "2006-06-30T00:51:24Z", "text": "Created attachment 18547\nResolvs this bug checking wheter the README file is compressed \n\nThis patch only modifies the emit_tail function. The modification consists in\nchecking wheter the header of the (sub)requested README.html file is gzipped or\ncompressed. In either case it silently ignores the content of the file. I think\nthat the file should be shown on the directory listing, but this behaviour (of\nnot showing the file content nor the file in the directory listing) is also\npresent when there is a README.txt file."}, {"count": 2, "tags": [], "bug_id": 39937, "is_private": false, "id": 90777, "creation_time": "2006-06-30T01:03:12Z", "time": "2006-06-30T01:03:12Z", "creator": "miguel.pagano@gmail.com", "text": "It seems that this patch is also applicable to the httpd-trunk's version of\nmod_autoindex.c", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 39937, "attachment_id": null, "id": 145139, "time": "2011-03-21T10:43:23Z", "creator": "mss@apache.org", "creation_time": "2011-03-21T10:43:23Z", "is_private": false, "text": "Apache HTTP Server 1.3.x is not supported anymore and no bugs will be fixed in the old codebase (cf. <http://mail-archives.apache.org/mod_mbox/httpd-announce/201002.mbox/%3C20100203000334.GA19021@infiltrator.stdlib.net%3E>). Since this bug seems to affect only 1.3.x, I'm closing it as WONTFIX.\n\nIf this bug still affects you in a recent version (version 2.2.x or the upcoming version 2.4), please open a new bug.\n\nThank you for reporting the bug."}]