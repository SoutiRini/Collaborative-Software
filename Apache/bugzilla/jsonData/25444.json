[{"count": 0, "tags": [], "bug_id": 25444, "attachment_id": null, "is_private": false, "id": 48904, "time": "2003-12-11T14:25:51Z", "creator": "manfred.duchrow@daedalos.com", "creation_time": "2003-12-11T14:25:51Z", "text": "When Apache/mod_proxy is used as a reverse proxy and directed with \nProxyPassReverse to alter the Location header of a redirect, it always \nreplaces the URL's scheme with that of the initial request. \nThis happens because ap_proxy_location_reverse_map() \nin 'proxy_http.c' calls ap_construct_url() from 'core.c' to build \nthe URL after changing the hostname and path, and ap_construct_url() gets \nthe scheme from the ap_http_method macro.\n\nThis prevents, in the most likely example, redirection from an insecure \nto a secure URL.\n\nBTW: This bug was posted for Apache 1.3.22 a long time ago.\nSee http://archive.apache.org/gnats/8696\nIt also contains a suggestion for a fix."}, {"text": "This is the right default behaviour; what you need is some new directive like:\n\n  ProxyPassReverse /some/path/ !\n\nwhich will *prevent* the rewriting of Location headers for a particular\nlocation, allowing the https:->http: redirect to work.", "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "count": 1, "id": 73240, "time": "2005-04-04T12:50:41Z", "bug_id": 25444, "creation_time": "2005-04-04T12:50:41Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 25444, "attachment_id": null, "is_private": false, "id": 73242, "time": "2005-04-04T13:05:30Z", "creator": "jorton@redhat.com", "creation_time": "2005-04-04T13:05:30Z", "text": "Ah, this is essentially the same as bug 21272, which has a patch to enable such\na syntax.\n\n*** This bug has been marked as a duplicate of 21272 ***"}]