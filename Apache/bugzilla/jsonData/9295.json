[{"count": 0, "attachment_id": null, "bug_id": 9295, "is_private": false, "id": 16506, "time": "2002-05-21T21:53:21Z", "creator": "apachebugs@louisiana.edu", "creation_time": "2002-05-21T21:53:21Z", "tags": [], "text": "I've tried using configure with both gcc 2.95.2 and Sun's Forte cc 6.2\ncompilers, and I\nget this sort of compilation failure under Solaris 8 (ultraSparc):\n\nMaking all in experimental/perchild\n/bin/ksh /extra/httpd-2.0.36/srclib/apr/libtool --silent --mode=compile cc  -g -\nmt -DNO_DBM_REWRITEMAP    -DSOLARIS2=8 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT  \n  -I. -I/extra/httpd-2.0.36/os/unix -I/extra/httpd-2.0.36/server/mpm/experimenta\nl/perchild -I/extra/httpd-2.0.36/modules/http -I/extra/httpd-2.0.36/modules/prox\ny -I/extra/httpd-2.0.36/include -I/extra/httpd-2.0.36/srclib/apr/include -I/extr\na/httpd-2.0.36/srclib/apr-util/include -I/opt/usl/openssl-0.9.6c/include/openssl\n -I/opt/usl/openssl-0.9.6c/include -I/extra/httpd-2.0.36/modules/dav/main -I/ext\nra/httpd-2.0.36/srclib/apr-util/xml/expat/lib -prefer-non-pic -static -c perchil\nd.c && touch perchild.lo\n\"perchild.c\", line 668: undefined struct/union member: msg_control\n\"perchild.c\", line 668: warning: improper pointer/integer combination: op \"=\"\n\"perchild.c\", line 669: undefined struct/union member: msg_controllen\n\"perchild.c\", line 670: undefined struct/union member: msg_flags\n\"perchild.c\", line 674: warning: improper pointer/integer combination: arg #2\n\"perchild.c\", line 849: cannot recover from previous errors\ncc: acomp failed for perchild.c\n*** Error code 1\n\n\n\nThe problem seems to be caused by this Solaris 8 include: sys/socket.h\nwhich contains the following for the msghdr structure:\n/*\n * Message header for recvmsg and sendmsg calls.\n */\nstruct msghdr {\n        void            *msg_name;              /* optional address */\n        socklen_t       msg_namelen;            /* size of address */\n        struct iovec    *msg_iov;               /* scatter/gather array */\n        int             msg_iovlen;             /* # elements in msg_iov */\n\n#if defined(_XPG4_2) || defined(_KERNEL)\n        void            *msg_control;           /* ancillary data */\n        socklen_t       msg_controllen;         /* ancillary data buffer len */\n        int             msg_flags;              /* flags on received message */\n#else\n        caddr_t         msg_accrights;  /* access rights sent/received */\n        int             msg_accrightslen;\n#endif  /* defined(_XPG4_2) || defined(_KERNEL) */\n};\n\n\n\nObviously the posix flag wasn't ever set.  This is an area I don't understand\nin Solaris...man standards(5) talks about 6 different levels of posix standards.\nHeck, I even retried with the c89 workshop 6.2 compiler, and it barfed over\nnot recognizing a 64 bit integer could be a long long.  If configure would\nproduce the proper #define, and include the proper link libs and options to\ngo with posix compatibility, we could then use gcc or cc (presumably) for the\nperchild MPM building...where do I go from here?"}, {"count": 1, "tags": [], "bug_id": 9295, "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 8452 ***", "id": 16516, "time": "2002-05-22T04:05:30Z", "creator": "apachebugs@louisiana.edu", "creation_time": "2002-05-22T04:05:30Z", "attachment_id": null}]