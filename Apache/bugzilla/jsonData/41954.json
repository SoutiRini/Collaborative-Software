[{"count": 0, "tags": [], "bug_id": 41954, "text": "The attached code fails with the following trace on the AWT Renderer. All the\nother pieces of code execute and produce the correct output (PDF etc). However,\nthe AWT Renderer displays the print preview window, with 'Generating' in the\nstatus bar at the bottom, and then the following exception is reported.\n\n27-Mar-2007 00:43:55 org.apache.fop.render.java2d.Java2DRenderer getPageImage\nINFO: Rendering Page 1 (pageWidth 595, pageHeight 842)\nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n\tat java.awt.image.DataBufferInt.<init>(DataBufferInt.java:41)\n\tat java.awt.image.Raster.createPackedRaster(Raster.java:458)\n\tat\njava.awt.image.DirectColorModel.createCompatibleWritableRaster(DirectColorModel.java:1015)\n\tat java.awt.image.BufferedImage.<init>(BufferedImage.java:321)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getBufferedImage(Java2DRenderer.java:376)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getPageImage(Java2DRenderer.java:317)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getPageImage(Java2DRenderer.java:404)\n\tat\norg.apache.fop.render.awt.viewer.ImageProxyPanel.paintComponent(ImageProxyPanel.java:124)\n\tat javax.swing.JComponent.paint(JComponent.java:1022)\n\tat javax.swing.JComponent.paintChildren(JComponent.java:859)\n\tat javax.swing.JComponent.paint(JComponent.java:1031)\n\tat javax.swing.JComponent.paintChildren(JComponent.java:859)\n\tat javax.swing.JComponent.paint(JComponent.java:1031)\n\tat javax.swing.JViewport.paint(JViewport.java:747)\n\tat javax.swing.JComponent.paintChildren(JComponent.java:859)\n\tat javax.swing.JComponent.paint(JComponent.java:1031)\n\tat javax.swing.JComponent.paintToOffscreen(JComponent.java:5104)\n\tat\njavax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:285)\n\tat javax.swing.RepaintManager.paint(RepaintManager.java:1132)\n\tat javax.swing.JComponent._paintImmediately(JComponent.java:5052)\n\tat javax.swing.JComponent.paintImmediately(JComponent.java:4862)\n\tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:727)\n\tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:683)\n\tat javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:663)\n\tat\njavax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:128)\n\tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:597)\n\tat\njava.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:273)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:183)\n\tat\njava.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:173)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:168)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:160)\njava.lang.IllegalArgumentException: Printing cancelled by operator\n\tat\norg.apache.fop.render.print.PrintRenderer.initializePrinterJob(PrintRenderer.java:91)\n\tat org.apache.fop.render.print.PrintRenderer.<init>(PrintRenderer.java:63)\n\tat\norg.apache.fop.render.print.PrintRendererMaker.makeRenderer(PrintRendererMaker.java:37)\n\tat org.apache.fop.render.RendererFactory.createRenderer(RendererFactory.java:186)\n\tat org.apache.fop.area.RenderPagesModel.<init>(RenderPagesModel.java:70)\n\tat org.apache.fop.area.AreaTreeHandler.setupModel(AreaTreeHandler.java:146)\n\tat org.apache.fop.area.AreaTreeHandler.<init>(AreaTreeHandler.java:123)\n\tat\norg.apache.fop.render.RendererFactory.createFOEventHandler(RendererFactory.java:236)\n\tat org.apache.fop.fo.FOTreeBuilder.<init>(FOTreeBuilder.java:98)\n\tat org.apache.fop.apps.Fop.createDefaultHandler(Fop.java:147)\n\tat org.apache.fop.apps.Fop.<init>(Fop.java:82)\n\tat org.apache.fop.apps.FopFactory.newFop(FopFactory.java:227)\n\tat TestFOP.FOPIt(TestFOP.java:123)\n\tat TestFOP.main(TestFOP.java:78)\n27-Mar-2007 00:44:09 org.apache.fop.render.java2d.Java2DRenderer getPageImage\nINFO: Rendering Page 1 (pageWidth 595, pageHeight 842)\nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n\tat java.awt.image.DataBufferInt.<init>(DataBufferInt.java:41)\n\tat java.awt.image.Raster.createPackedRaster(Raster.java:458)\n\tat\njava.awt.image.DirectColorModel.createCompatibleWritableRaster(DirectColorModel.java:1015)\n\tat java.awt.image.BufferedImage.<init>(BufferedImage.java:321)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getBufferedImage(Java2DRenderer.java:376)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getPageImage(Java2DRenderer.java:317)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getPageImage(Java2DRenderer.java:404)\n\tat\norg.apache.fop.render.awt.viewer.ImageProxyPanel.paintComponent(ImageProxyPanel.java:124)\n\tat javax.swing.JComponent.paint(JComponent.java:1022)\n\tat javax.swing.JComponent.paintChildren(JComponent.java:859)\n\tat javax.swing.JComponent.paint(JComponent.java:1031)\n\tat javax.swing.JComponent.paintToOffscreen(JComponent.java:5104)\n\tat\njavax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:285)\n\tat javax.swing.RepaintManager.paint(RepaintManager.java:1132)\n\tat javax.swing.JComponent.paintForceDoubleBuffered(JComponent.java:1058)\n\tat javax.swing.JViewport.blitDoubleBuffered(JViewport.java:1612)\n\tat javax.swing.JViewport.windowBlitPaint(JViewport.java:1573)\n\tat javax.swing.JViewport.setViewPosition(JViewport.java:1118)\n\tat\njavax.swing.plaf.basic.BasicScrollPaneUI$Handler.hsbStateChanged(BasicScrollPaneUI.java:1060)\n\tat\njavax.swing.plaf.basic.BasicScrollPaneUI$Handler.stateChanged(BasicScrollPaneUI.java:1011)\n\tat\njavax.swing.DefaultBoundedRangeModel.fireStateChanged(DefaultBoundedRangeModel.java:348)\n\tat\njavax.swing.DefaultBoundedRangeModel.setRangeProperties(DefaultBoundedRangeModel.java:285)\n\tat javax.swing.DefaultBoundedRangeModel.setValue(DefaultBoundedRangeModel.java:151)\n\tat javax.swing.JScrollBar.setValue(JScrollBar.java:446)\n\tat\njavax.swing.plaf.basic.BasicScrollBarUI$TrackListener.setValueFrom(BasicScrollBarUI.java:1169)\n\tat\njavax.swing.plaf.basic.BasicScrollBarUI$TrackListener.mouseDragged(BasicScrollBarUI.java:1106)\n\tat java.awt.Component.processMouseMotionEvent(Component.java:6086)\n\tat javax.swing.JComponent.processMouseMotionEvent(JComponent.java:3278)\n\tat java.awt.Component.processEvent(Component.java:5807)\n\tat java.awt.Container.processEvent(Container.java:2058)\n\tat java.awt.Component.dispatchEventImpl(Component.java:4410)\n\tat java.awt.Container.dispatchEventImpl(Container.java:2116)\n27-Mar-2007 00:44:09 org.apache.fop.render.java2d.Java2DRenderer getPageImage\nINFO: Rendering Page 1 (pageWidth 595, pageHeight 842)\nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n\tat java.awt.image.DataBufferInt.<init>(DataBufferInt.java:41)\n\tat java.awt.image.Raster.createPackedRaster(Raster.java:458)\n\tat\njava.awt.image.DirectColorModel.createCompatibleWritableRaster(DirectColorModel.java:1015)\n\tat java.awt.image.BufferedImage.<init>(BufferedImage.java:321)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getBufferedImage(Java2DRenderer.java:376)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getPageImage(Java2DRenderer.java:317)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getPageImage(Java2DRenderer.java:404)\n\tat\norg.apache.fop.render.awt.viewer.ImageProxyPanel.paintComponent(ImageProxyPanel.java:124)\n\tat javax.swing.JComponent.paint(JComponent.java:1022)\n\tat javax.swing.JComponent.paintChildren(JComponent.java:859)\n\tat javax.swing.JComponent.paint(JComponent.java:1031)\n\tat javax.swing.JComponent.paintChildren(JComponent.java:859)\n\tat javax.swing.JComponent.paint(JComponent.java:1031)\n\tat javax.swing.JViewport.paint(JViewport.java:747)\n\tat javax.swing.JComponent.paintChildren(JComponent.java:859)\n\tat javax.swing.JComponent.paint(JComponent.java:1031)\n\tat javax.swing.JComponent.paintToOffscreen(JComponent.java:5104)\n\tat\njavax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:285)\n\tat javax.swing.RepaintManager.paint(RepaintManager.java:1132)\n\tat javax.swing.JComponent._paintImmediately(JComponent.java:5052)\n\tat javax.swing.JComponent.paintImmediately(JComponent.java:4862)\n\tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:727)\n\tat javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:683)\n\tat javax.swing.RepaintManager.seqPaintDirtyRegions(RepaintManager.java:663)\n\tat\njavax.swing.SystemEventQueueUtilities$ComponentWorkRequest.run(SystemEventQueueUtilities.java:128)\n\tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:597)\n\tat\njava.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:273)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:183)\n\tat\njava.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:173)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:168)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:160)\n27-Mar-2007 00:44:10 org.apache.fop.render.java2d.Java2DRenderer getPageImage\nINFO: Rendering Page 1 (pageWidth 595, pageHeight 842)\nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n\tat java.awt.image.DataBufferInt.<init>(DataBufferInt.java:41)\n\tat java.awt.image.Raster.createPackedRaster(Raster.java:458)\n\tat\njava.awt.image.DirectColorModel.createCompatibleWritableRaster(DirectColorModel.java:1015)\n\tat java.awt.image.BufferedImage.<init>(BufferedImage.java:321)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getBufferedImage(Java2DRenderer.java:376)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getPageImage(Java2DRenderer.java:317)\n\tat\norg.apache.fop.render.java2d.Java2DRenderer.getPageImage(Java2DRenderer.java:404)\n\tat\norg.apache.fop.render.awt.viewer.ImageProxyPanel.paintComponent(ImageProxyPanel.java:124)\n\tat javax.swing.JComponent.paint(JComponent.java:1022)\n\tat javax.swing.JComponent.paintChildren(JComponent.java:859)\n\tat javax.swing.JComponent.paint(JComponent.java:1031)\n\tat javax.swing.JComponent.paintToOffscreen(JComponent.java:5104)\n\tat\njavax.swing.BufferStrategyPaintManager.paint(BufferStrategyPaintManager.java:285)\n\tat javax.swing.RepaintManager.paint(RepaintManager.java:1132)\n\tat javax.swing.JComponent.paintForceDoubleBuffered(JComponent.java:1058)\n\tat javax.swing.JViewport.blitDoubleBuffered(JViewport.java:1612)\n\tat javax.swing.JViewport.windowBlitPaint(JViewport.java:1573)\n\tat javax.swing.JViewport.setViewPosition(JViewport.java:1118)\n\tat\njavax.swing.plaf.basic.BasicScrollPaneUI$Handler.hsbStateChanged(BasicScrollPaneUI.java:1060)\n\tat\njavax.swing.plaf.basic.BasicScrollPaneUI$Handler.stateChanged(BasicScrollPaneUI.java:1011)\n\tat\njavax.swing.DefaultBoundedRangeModel.fireStateChanged(DefaultBoundedRangeModel.java:348)\n\tat\njavax.swing.DefaultBoundedRangeModel.setRangeProperties(DefaultBoundedRangeModel.java:285)\n\tat javax.swing.DefaultBoundedRangeModel.setValue(DefaultBoundedRangeModel.java:151)\n\tat javax.swing.JScrollBar.setValue(JScrollBar.java:446)\n\tat\njavax.swing.plaf.basic.BasicScrollBarUI$TrackListener.setValueFrom(BasicScrollBarUI.java:1169)\n\tat\njavax.swing.plaf.basic.BasicScrollBarUI$TrackListener.mouseDragged(BasicScrollBarUI.java:1106)\n\tat java.awt.Component.processMouseMotionEvent(Component.java:6086)\n\tat javax.swing.JComponent.processMouseMotionEvent(JComponent.java:3278)\n\tat java.awt.Component.processEvent(Component.java:5807)\n\tat java.awt.Container.processEvent(Container.java:2058)\n\tat java.awt.Component.dispatchEventImpl(Component.java:4410)\n\tat java.awt.Container.dispatchEventImpl(Container.java:2116)\n27-Mar-2007 00:44:10 org.apache.fop.render.java2d.Java2DRenderer getPageImage\nINFO: Rendering Page 1 (pageWidth 595, pageHeight 842)\nException in thread \"AWT-EventQueue-0\" java.lang.OutOfMemoryError: Java heap space\n\n(This is under Java 1.6)", "id": 100987, "time": "2007-03-26T16:45:09Z", "creator": "barry.pearce@copyrightwitness.net", "creation_time": "2007-03-26T16:45:09Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "barry.pearce@copyrightwitness.net", "text": "Created attachment 19805\nExample PDF output produced from the code.", "id": 100988, "time": "2007-03-26T16:45:37Z", "bug_id": 41954, "creation_time": "2007-03-26T16:45:37Z", "is_private": false, "attachment_id": 19805}, {"count": 2, "tags": [], "creator": "barry.pearce@copyrightwitness.net", "text": "Created attachment 19806\nXSL-FO which formats the page.", "id": 100989, "time": "2007-03-26T16:46:04Z", "bug_id": 41954, "creation_time": "2007-03-26T16:46:04Z", "is_private": false, "attachment_id": 19806}, {"count": 3, "attachment_id": 19807, "bug_id": 41954, "is_private": false, "id": 100990, "time": "2007-03-26T16:46:35Z", "creator": "barry.pearce@copyrightwitness.net", "creation_time": "2007-03-26T16:46:35Z", "tags": [], "text": "Created attachment 19807\nXML input data."}, {"count": 4, "tags": [], "bug_id": 41954, "text": "Created attachment 19808\nImage included in the test", "id": 100991, "time": "2007-03-26T16:47:05Z", "creator": "barry.pearce@copyrightwitness.net", "creation_time": "2007-03-26T16:47:05Z", "is_private": false, "attachment_id": 19808}, {"count": 5, "tags": [], "bug_id": 41954, "attachment_id": 19809, "is_private": false, "id": 100992, "time": "2007-03-26T16:47:30Z", "creator": "barry.pearce@copyrightwitness.net", "creation_time": "2007-03-26T16:47:30Z", "text": "Created attachment 19809\nComplete test source code."}, {"count": 6, "attachment_id": null, "bug_id": 41954, "is_private": false, "id": 101071, "time": "2007-03-27T16:08:01Z", "creator": "barry.pearce@copyrightwitness.net", "creation_time": "2007-03-27T16:08:01Z", "tags": [], "text": "This is not a fault. This is caused by my stupidity!!!\n\nIve set the resolution on the user agent to 600 for the rendering to PS, PDF and\nprint....but left it at this resolution for the AWT preview as well...given most\nscreens are at 72-96 dpi this leads to a rather interesting increase in\nsize...thus it fails....no great surprise!"}, {"count": 7, "tags": [], "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "is_private": false, "id": 156571, "creator": "gadams@apache.org", "time": "2012-04-01T13:49:55Z", "bug_id": 41954, "creation_time": "2012-04-01T13:49:55Z", "attachment_id": null}]