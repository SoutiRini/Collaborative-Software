[{"count": 0, "tags": [], "creator": "drodriguez@divisait.com", "attachment_id": null, "id": 37342, "time": "2003-05-16T17:25:46Z", "bug_id": 19991, "creation_time": "2003-05-16T17:25:46Z", "is_private": false, "text": "After applying \"crude patch\" for <a \nhref=\"http://nagoya.apache.org/bugzilla/show_bug.cgi?id=15790\">Bug #15790<a>, \napparently all application works properly.\n\nBut there is a problem, apparently an incorrect share of memory. The test case \nlooks like follows:\n\n1. Configure Apache2 with optional client certificate\n2. Enter in application (only a JSP) with a client certificate.\n3. Launch another Navigator from another PC\n4. Access to application from this PC. When navigator prompts you for a \ncertificate, issue \"Cancel\".\n5. Recover certificate, Voila!!! You get the certificate from the user (1) in a \nPC different than mine.\n\nWe have to downgrade to Apache 1.3, Tomcat 4.1.12 and mod_webapp in order to \nobtain a compliant version"}, {"text": "First of all, excuse me for my poor english, I wrote the previous message very \nquickly, so... I hope that you could understand it better now.\n\nSeveral time ago, I reported a bug, that was a duplicate of #15790. This bug \n(resolved), states that if you are using Apache2 as an SSL frontend for Tomcat \n4.1 with mod_jk2, you couldn't recover client certificates (you receive an \nIOException). In this bug we are suggested to apply a patch for \nJkCoyoteHandler.java.\n\nAfter applying this bug, I'm able to recover the client certificate from the \napplication, with no annoying exception.\n\nBut, as we have tested in our application, this behavior isn't still correct. I \npropose you to follow this test case:\n\n1. Create a Web Application (just a JSP) that recovers client certificate from \nrequest.\n\n2. Use Apache2 (with SSL) and mod_jk2 as a frontend from this application. \nConfigure SSL in order to support client certificates but in a optional way.\n\n3. From PC #1 launch a IExplore (e.g). Go to the application \n(https://.../myApp/myPage.jsp), you will be asked for a client certificate. \nSuppose that you give your certificate #C1.\n\n4. From PC #2 launch another IExplore. Go to the application, and when you are \nasked for a certificate, click on Cancel. Your JSP application should be \nexpected to print a null for client certificate, the surprise arrives when the \ncertificate printed is #C1.\n\nI hope this could be understanded better. I'll try to prepare a test-case and \npublish as an attachment.", "tags": [], "bug_id": 19991, "attachment_id": null, "count": 1, "id": 37355, "time": "2003-05-16T18:40:32Z", "creator": "drodriguez@divisait.com", "creation_time": "2003-05-16T18:40:32Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 19991, "attachment_id": null, "text": "Ok. Well, I don't quite see how it happens (I just checked the code). The certs\nare stored in a request attribute, and the attributes are properly cleared at\nthe end of the processing of the request. I think you should try to debug this\nfurther if you can.", "id": 37360, "time": "2003-05-16T19:39:46Z", "creator": "remm@apache.org", "creation_time": "2003-05-16T19:39:46Z", "is_private": false}, {"count": 3, "tags": [], "text": "Fixed now in the CVS, and will appear in 4.1.25.", "is_private": false, "bug_id": 19991, "id": 37376, "time": "2003-05-17T03:30:25Z", "creator": "william.barker@wilshire.com", "creation_time": "2003-05-17T03:30:25Z", "attachment_id": null}]