[{"count": 0, "tags": [], "bug_id": 43593, "attachment_id": null, "text": "When WebdavResource.propfindMethod( String ) is called with a namespaced\nproperty such as 'http://example.com/ns:customproperty', incorrect XML is sent\nover the wire (note the extra colon at the end of the namespace):\n\n<D:propfind xmlns:D=\"DAV:\">\n   <D:prop>\n      <ZZ:customproperty xmlns:ZZ=\"http://example.com/ns:\">\n      </ZZ:customproperty>\n   </D:prop>\n</D:propfind>\n\nPassing the property in as a Vector containing a PropertyName, the correct XML\nis sent over the wire.\n\nIt seems like there is an off-by-one error in\nPropFindMethod.setPropertyNames(Enumeration):\n\nIndex: clientlib/src/java/org/apache/webdav/lib/methods/PropFindMethod.java\n===================================================================\n--- clientlib/src/java/org/apache/webdav/lib/methods/PropFindMethod.java       \n(revision 583601)\n+++ clientlib/src/java/org/apache/webdav/lib/methods/PropFindMethod.java       \n(working copy)\n@@ -284,7 +284,7 @@\n                 if ((i == 1) || (i >= length)) {\n                     list.add(new PropertyName(\"DAV:\",propertyName));\n                 } else {\n-                    String namespace = propertyName.substring(0, length + 1 - i);\n+                    String namespace = propertyName.substring(0, length - i);\n                     String localName = propertyName.substring(length + 1 - i);\n                     list.add(new PropertyName(namespace,localName));\n                 }\n\nThis patch seems to fix the issue, although it seems like this bit of code is\nmeant to deal nicely with multi-byte characters?", "id": 109208, "time": "2007-10-10T14:04:55Z", "creator": "esm@apache.org", "creation_time": "2007-10-10T14:04:55Z", "is_private": false}, {"attachment_id": 20952, "tags": [], "bug_id": 43593, "text": "Created attachment 20952\nFixes off-by-one error\n\nThis is the same patch that is in the body of the bug description.", "count": 1, "id": 109210, "time": "2007-10-10T14:24:50Z", "creator": "esm@apache.org", "creation_time": "2007-10-10T14:24:50Z", "is_private": false}]