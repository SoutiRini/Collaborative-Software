[{"count": 0, "tags": [], "bug_id": 45913, "attachment_id": null, "is_private": false, "id": 121073, "time": "2008-09-30T00:38:58Z", "creator": "svkirans@gmail.com", "creation_time": "2008-09-30T00:38:58Z", "text": "Hi,\n\n         Iam using tomcat connection pooling to maintain db connections.\nThe following configurations were made in context.xml.\n\n<Resource name=\"jdbc/testdb\" auth=\"Container\"\ntype=\"javax.sql.DataSource\" \nusername=\"root\" password=\"root123\"\ndriverClassName=\"com.mysql.jdbc.Driver\" \nurl=\"jdbc:mysql://localhost:3306/test35_dev\"\nmaxActive=\"-1\" \nmaxIdle=\"10\" \nminIdle=\"6\" \nmaxwait=\"5000\" \nminEvictableIdleTimeMillis=\"30000\"\nnumTestsPerEvictionRun = \"25\"\ntimeBetweenEvictionRunsMillis=\"30000\"\nremoveAbandoned=\"true\"\nremoveAbandonedTimeout=\"60\"\n/>\n\nI used the following code to look up and get the data base connections\n\nContext initCtx = new InitialContext();\nContext envCtx = (Context) initCtx.lookup(\"java:comp/env\");\n// Look up our data source\nDataSource ds = (DataSource) envCtx.lookup(\"jdbc/testdb\");\n// Allocate and use a connection from the pool\nConnection connection = ds.getConnection();\n\n\nAfter this the application is creating 50 connections and it is not  closing the connections after using.Will removeAbandoned step in and return the connections to the pool and remove the excess connections greater than maxIdle parameter.But when the application needs the next set of connections it is creating new connections instead of using the existing ones and as a result the MySql server is running out of connections.Why is removeAbandoned not handling the unclosed connections even after 1 minute even though it is configured to do so.\n\nThanks"}, {"count": 1, "attachment_id": null, "bug_id": 45913, "is_private": false, "id": 121121, "time": "2008-10-01T07:57:08Z", "creator": "markt@apache.org", "creation_time": "2008-10-01T07:57:08Z", "tags": [], "text": "This is a question for the users list."}]