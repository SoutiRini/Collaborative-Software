[{"count": 0, "text": "The SetEnv configuration directive does not appear to be working according to\nthe documentation. Attempting to perform an \"allow from env=<ENV VARIABLE>\" does\nnot work with SetEnv but does work with SetEnvIf. The configurations below\nfurther describe the problem.\n\nThe test script used simply printed the environment to STDOUT. In configuration\n2, if the allow directive is changed to \"Allow from all\" then we confirmed that\nthe environment variable AUTH_CLIENT is being printed by the script.\n\n1. Configuration 1 - Access Denied\n-----------------------------------\n<Directory \"/usr/local/www/cgi-bin\">\n    AllowOverride None\n    Options None\n\n    SetEnv AUTH_CLIENT 1\n    Order deny,allow\n    Deny from all\n    Allow from env=AUTH_CLIENT\n</Directory>\n\n2. Configuration 2 - Access Granted\n-----------------------------------\n<Directory \"/usr/local/www/cgi-bin\">\n    AllowOverride None\n    Options None\n\n    SetEnvIf Remote_Addr \".*\" AUTH_CLIENT=1\n    Order deny,allow\n    Deny from all\n    Allow from env=AUTH_CLIENT\n</Directory>\n\n---------------------------------------------------------\n\n# /usr/local/apache2/bin/httpd -V\nServer version: Apache/2.0.54\nServer built:   Jun 19 2005 02:31:01\nServer's Module Magic Number: 20020903:9\nArchitecture:   32-bit\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_FCNTL_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D HTTPD_ROOT=\"/usr/local/apache2\"\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"", "bug_id": 35611, "is_private": false, "id": 76997, "time": "2005-07-05T13:36:55Z", "creator": "cwmerrigan@gmail.com", "creation_time": "2005-07-05T13:36:55Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 35611, "is_private": false, "text": "mod_setenvif can set values earlier in request processing (e.g., right after the\nrequest is read).\n\nmod_env runs after much of the request setup has been performed, right before\nthe response has been generated.\n\nThis affects their functionality, as you can see.\n", "id": 77024, "time": "2005-07-06T02:11:44Z", "creator": "trawick@apache.org", "creation_time": "2005-07-06T02:11:44Z", "attachment_id": null}]