[{"count": 0, "tags": [], "creator": "tdeverdiere@scort.com", "text": "When i have a tag defining scripting variables in my Jsp. If i choose to declare\nwith TagExtraInfo class this variable always this way :\n\npublic class FunctionTEI extends TagExtraInfo {\n\n    public VariableInfo[] getVariableInfo(TagData data) {\n        if (data.getId() != null)\n            return new VariableInfo[] {\n                new VariableInfo(\n                    data.getId(),\n                    \"String\",\n                    true, // ALWAYS TRUE !! SO IT SHOULD ALWAYS BE DECLARED ?!\n                    VariableInfo.AT_BEGIN\n                )\n            };\n        \n        return null;\n    }\n}\nSuppose we associate it with the function tag :\nThen i suppose that two calls of the tag will declare twice my variables !\nBut this is not true.\nex1:\n-----------\n<pref:mytag id=\"var\" value=\"ok\" />\n<pref:mytag id=\"var\" value=\"nok\" />\n<%= var %>\n------------\nThis makes no compilation error and returns this result :\nnok\n\n\nex2:\n-------------------\n<% int i = 0;\nif (i = 0) { %>\n<pref:mytag id=\"var\" value=\"ok\" />\n<%= var %>\n<% } else { %>\n<pref:mytag id=\"var\" value=\"nok\" />\n<%= var %> This generate the error.\n<% } %>\n---------------------\nThis makes a compilation error !\ncannot resolve symbol var\nThis is due to the fact that var is not being declared in the else condition\nwhereas it is in the first condition.\nFor me example 1 should throws an error because 'var' has been already declared,\nwhereas example 2 should work because i declared in separate scope of the code\nmy 'var'.\n\nHowever the behaviour is not well defined in JSP 1.2 but\n<jsp:useBean id=\"var\" class=\"String\" />\n<jsp:useBean id=\"var\" class=\"String\" />\nGenerates an error !) so i think custom tags defining scripting varibales should\nbe consistent with this behaviour.\n\nThe error is during translation not compilation.", "id": 41715, "time": "2003-07-29T14:28:07Z", "bug_id": 21967, "creation_time": "2003-07-29T14:28:07Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 21967, "attachment_id": null, "id": 43575, "creation_time": "2003-09-02T00:05:26Z", "time": "2003-09-02T00:05:26Z", "creator": "ecarmich@alumni.rice.edu", "text": "This is very likely the same issue raised against Tomcat 5 in Bugzilla Bug \n21390.  It's currently under consideration by the spec team (for JSP 2.0, at \nleast; I don't know if JSP 1.2 or Tomcat 4 will be changed).  See that \nBugzilla ticket for an excellent update from Kin-Man on the current thinking.\n\nIf you have thoughts you'd like to share with the spec team, you can send them \nto jsp-spec-comments@eng.sun.com (JSP 1.2) or jsr-152-comments@jcp.org (JSP \n2.0).", "is_private": false}, {"count": 2, "tags": [], "creator": "markt@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of 19491 ***", "id": 77623, "time": "2005-07-25T18:48:46Z", "bug_id": 21967, "creation_time": "2005-07-25T18:48:46Z", "is_private": false, "attachment_id": null}]