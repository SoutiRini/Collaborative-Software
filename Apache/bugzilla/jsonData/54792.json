[{"count": 0, "tags": [], "bug_id": 54792, "attachment_id": null, "id": 166343, "time": "2013-04-02T20:54:28Z", "creator": "rstoyanchev@yahoo.com", "creation_time": "2013-04-02T20:54:28Z", "is_private": false, "text": "This looks related to 54659 and 54724 but possibly a new issue. To reproduce, open the chat sample page, send a message or two, and then close the browser tab. The following exception appears in the log and it doesn't seem to step from anything done in the application:\n\njava.lang.IllegalStateException: The WebSocket session has been closed and no method (apart from close()) may be called on a closed session\n        at org.apache.tomcat.websocket.WsSession.checkState(WsSession.java:516)\n        at org.apache.tomcat.websocket.WsSession.getMessageHandlers(WsSession.java:191)\n        at org.apache.tomcat.websocket.pojo.PojoEndpointBase.onClose(PojoEndpointBase.java:113)\n        at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:392)\n        at org.apache.tomcat.websocket.WsSession.onClose(WsSession.java:370)\n        at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.close(WsHttpUpgradeHandler.java:166)\n        at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.access$200(WsHttpUpgradeHandler.java:44)\n        at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler$WsReadListener.onDataAvailable(WsHttpUpgradeHandler.java:192)\n        at org.apache.coyote.http11.upgrade.AbstractServletInputStream.onDataAvailable(AbstractServletInputStream.java:169)\n        at org.apache.coyote.http11.upgrade.AbstractProcessor.upgradeDispatch(AbstractProcessor.java:94)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:618)\n        at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:223)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1581)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1537)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n        at java.lang.Thread.run(Thread.java:722)"}, {"count": 1, "tags": [], "bug_id": 54792, "attachment_id": null, "text": "Thanks for the report. This has been fixed. It was an application issue.", "id": 166793, "time": "2013-04-23T16:34:21Z", "creator": "markt@apache.org", "creation_time": "2013-04-23T16:34:21Z", "is_private": false}]