[{"count": 0, "tags": [], "bug_id": 42475, "attachment_id": null, "id": 103429, "time": "2007-05-21T11:00:05Z", "creator": "mcleving@hotmail.com", "creation_time": "2007-05-21T11:00:05Z", "is_private": false, "text": "Overview:\n\nI have a JSP page (forward.jsp) that <@includes file> a JSP page (two.jsp) and\nthen performs a <jsp:forward page...>.  The <@include ..> (two.jsp) attempts to\nget request parameter and assign them to a variable name org.  In Tomcat 5.5 the\npage will compile sporadically (3 out of 5 times, you may have to refresh the\npage a couple of times to see the error) and Tomcat 6.x the JSP page will never\ncompile.  If I rename the variable org to test in two.jsp the page compiles\nevery time in Tomcat 5.5.x and Tomcat 6.0.x.  Also this code works in Tomcat\n4.1.x w/o any modifications.\n\nCode example:\n/************************** forward.jsp ***************************************/\n<html>\n\n<%@ include file=\"two.jsp\" %>\n\n<jsp:forward page=\"one.jsp\" >\n    <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n</jsp:forward>\n</html>\n/************************** end forward.jsp ***********************************/\n\n/************************** two.jsp ***************************************/\n<%\n\t//String test = (request.getParameter(\"forwardedFrom\")==null) ? \"\" :\nrequest.getParameter(\"forwardedFrom\");\n\t//String\ttest = (request.getParameter(\"forwardedFrom\")==null) ? \"jto\" :\nrequest.getParameter(\"forwardedFrom\");\n\tString\torg = (request.getParameter(\"org\")==null) ? \"jto\" :\nrequest.getParameter(\"org\");\n\t\n\n%>\n/************************ end two.jsp ***************************************/\n\n\n/************************** one.jsp ***************************************/\n<%\n\t//String test = (request.getParameter(\"forwardedFrom\")==null) ? \"\" :\nrequest.getParameter(\"forwardedFrom\");\n\t//String\ttest = (request.getParameter(\"forwardedFrom\")==null) ? \"jto\" :\nrequest.getParameter(\"forwardedFrom\");\n\tString\torg = (request.getParameter(\"org\")==null) ? \"jto\" :\nrequest.getParameter(\"org\");\n%>\n/************************** end one.jsp ***************************************/\n\n\n\nTomcat 5.5 errors\nOutput to the Browser:\n\nmessage\n\ndescription The server encountered an internal error () that prevented it from\nfulfilling this request.\n\nexception\n\norg.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nStacktrace:\n\torg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:85)\n\torg.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)\n\torg.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:435)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:298)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:277)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:265)\n\torg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:564)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:299)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:315)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\nnote The full stack trace of the root cause is available in the Apache\nTomcat/5.5.23 logs.\n\nlocahostlog:\norg.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nStacktrace:\n\tat\norg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:85)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)\n\tat org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:435)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:298)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:277)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:265)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:564)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:299)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:315)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:210)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:174)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:870)\n\tat\norg.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\n\tat\norg.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\n\tat\norg.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:685)\n\tat java.lang.Thread.run(Thread.java:595)\n\n\n\n\nTomcat 6.0 errors\n\nOutput to the browser:\ntype Exception report\n\nmessage\n\ndescription The server encountered an internal error () that prevented it from\nfulfilling this request.\n\nexception\n\norg.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nStacktrace:\n\torg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)\n\torg.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)\n\torg.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:423)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:308)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:286)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:273)\n\torg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:566)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\nnote The full stack trace of the root cause is available in the Apache\nTomcat/6.0.13 logs.\n\n\n\ntype Exception report\n\nmessage\n\ndescription The server encountered an internal error () that prevented it from\nfulfilling this request.\n\nexception\n\norg.apache.jasper.JasperException: org.apache.jasper.JasperException: Unable to\nload class for JSP\n\torg.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:156)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:329)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\nroot cause\n\norg.apache.jasper.JasperException: Unable to load class for JSP\n\torg.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:600)\n\torg.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:144)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:329)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\nroot cause\n\njava.lang.ClassNotFoundException: org.apache.jsp.forward_jsp\n\tjava.net.URLClassLoader$1.run(URLClassLoader.java:200)\n\tjava.security.AccessController.doPrivileged(Native Method)\n\tjava.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\torg.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:134)\n\torg.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:66)\n\torg.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:598)\n\torg.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:144)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:329)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\nnote The full stack trace of the root cause is available in the Apache\nTomcat/6.0.13 logs.\n\nlocalhost log\n\nMay 21, 2007 1:32:52 PM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Servlet.service() for servlet jsp threw exception\norg.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nStacktrace:\n\tat\norg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)\n\tat org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:423)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:308)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:286)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:273)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:566)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)\n\tat java.lang.Thread.run(Thread.java:595)\nMay 21, 2007 1:33:16 PM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Servlet.service() for servlet jsp threw exception\norg.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nAn error occurred at line: 9 in the jsp file: /forward.jsp\norg.apache cannot be resolved or is not a field\n6: \n7: <%@ include file=\"two.jsp\" %>\n8: \n9: <jsp:forward page=\"one.jsp\" >\n10:     <jsp:param name=\"forwardedFrom\" value=\"this.jsp\" />\n11: </jsp:forward>\n12: </html>\n\n\nStacktrace:\n\tat\norg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)\n\tat org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:423)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:308)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:286)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:273)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:566)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)\n\tat java.lang.Thread.run(Thread.java:595)\nMay 21, 2007 1:33:16 PM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Servlet.service() for servlet jsp threw exception\njava.lang.ClassNotFoundException: org.apache.jsp.forward_jsp\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:200)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\tat org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:134)\n\tat org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:66)\n\tat org.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:598)\n\tat\norg.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:144)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:329)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)\n\tat java.lang.Thread.run(Thread.java:595)"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "*** Bug 42489 has been marked as a duplicate of this bug. ***", "id": 103527, "time": "2007-05-22T16:59:05Z", "bug_id": 42475, "creation_time": "2007-05-22T16:59:05Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 42475, "text": "The code works in TC4 because the generated code is much simpler - it ignores a\nnumber of possible error conditions. The fix for these issues in TC5 and TC6\nincludes a fully qualified reference to\norg.apache.jasper.runtime.JspRuntimeLibrary.URLEncode()\n\nThe complier is interpreting this as a reference to the field apache of object org.\n\nWhen you have generated code, there is always going to be the possibility of a\nnaming clash. I can't see an easy way around this.\n\nI am going to mark this as WONTFIX. More generally, avoiding the use of widely\nused package prefixes (org, com, etc) as variable names will reduce your risk of\nhitting this issue.\n\nAs an aside, a quick Google suggests you might also want to avoid 2 letter\nvariable names that clash with top level domains.", "id": 103529, "time": "2007-05-22T19:31:50Z", "creator": "markt@apache.org", "creation_time": "2007-05-22T19:31:50Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "*** Bug 46126 has been marked as a duplicate of this bug. ***", "id": 122043, "time": "2008-10-30T15:46:10Z", "bug_id": 42475, "creation_time": "2008-10-30T15:46:10Z", "is_private": false}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "*** Bug 51706 has been marked as a duplicate of this bug. ***", "id": 148828, "time": "2011-08-25T17:56:48Z", "bug_id": 42475, "creation_time": "2011-08-25T17:56:48Z", "is_private": false}]