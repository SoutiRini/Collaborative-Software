[{"count": 0, "tags": [], "bug_id": 7013, "attachment_id": null, "id": 11631, "time": "2002-03-10T19:30:16Z", "creator": "wms@igoweb.org", "creation_time": "2002-03-10T19:30:16Z", "is_private": false, "text": "My JSP server has one page that takes an input field, and plugs that input field\ninto the path information of a servlet. This works great, but when somebody\nenters a non-ISO8859-1 character in the field, Tomcat goes into an infinite\nloop, eventually runs out of memory and dies. Here's the error log:\n\n2002-03-10 05:53:26 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Bogus path info \"/,?,?,?E?Es-ja_JP.png\"\n2002-03-10 05:53:26 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n2002-03-10 05:53:26 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?2002-03-10 06:03:10 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n2002-03-10 06:03:19 - Ctx( /jsp ): Exception in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) - java.lang.OutOfMemoryError\n\n... thousands of identical copies of above error follow ...\n\n2002-03-10 06:03:19 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n2002-03-10 06:03:30 - Ctx( /jsp ): Exception in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) - java.lang.OutOfMemoryError\n,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n2002-03-10 05:53:26 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n\nAs you can see, even after the out of memory error tomcat stays in this\nunstoppable loop. One time that this happened the JVM crashed, another time\neverything just hung and I had to kill it myself.\n\nThis is using Sun's java 1.4 JVM and Tomcat 3.2.4 (I know I put in 3.2.3 in the\nform, but 3.2.4 wasn't an option). I don't see a way I can work around this\nbecause it seems to happen before my servlet is even called...in other words, as\nsoon as somebody tries again to type an unacceptable character, *boom* my JSP\nengine will die again until I go in and repair. Anybody know a quick fix for it?\nThanks."}, {"count": 1, "tags": [], "bug_id": 7013, "attachment_id": null, "id": 11632, "time": "2002-03-10T19:35:08Z", "creator": "wms@igoweb.org", "creation_time": "2002-03-10T19:35:08Z", "is_private": false, "text": "Somehow the error log I put in got mangled. Here's what it looks like:\n\n2002-03-10 05:53:26 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Bogus path info \"/,?,?,?E?Es-ja_JP.png\"\n2002-03-10 05:53:26 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n2002-03-10 05:53:26 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n2002-03-10 05:53:26 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n\n... thousands of identical copies of above error ...\n\n2002-03-10 06:03:10 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n2002-03-10 06:03:19 - Ctx( /jsp ): Exception in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) - java.lang.OutOfMemoryError\n\n2002-03-10 06:03:19 - Ctx( /jsp ): IOException in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) Not an ISO 8859_1 character:?\n2002-03-10 06:03:30 - Ctx( /jsp ): Exception in: R( /jsp + /servlet/graph +\n/,?,?,?E?Es-ja_JP.png) - java.lang.OutOfMemoryError\n\n... hundreds of copies of above invalid character/out of memory errors ...\n\njava.lang.OutOfMemoryError\njava.lang.OutOfMemoryError\njava.lang.IllegalStateException: failed initialize JspWriter\n\tat org.apache.jasper.runtime.PageContextImpl._initialize(PageContextImpl.java:186)\n\tat org.apache.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:149)\n\tat org.apache.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:99)\njava.lang.OutOfMemoryError\nInternal error java.lang.OutOfMemoryError\njava.lang.OutOfMemoryError\n\nHere Tomcat just sat, ignoring all incoming requests.\n"}, {"count": 2, "tags": [], "bug_id": 7013, "text": "Marking as INVALID. In the event that you're still facing thie problem, please\ntest with the latest version of Tomcat. See\nhttp://tomcat.apache.org/whichversion.html for more information.", "id": 93415, "time": "2006-09-12T16:09:46Z", "creator": "sriramnrn@gmail.com", "creation_time": "2006-09-12T16:09:46Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 7013, "attachment_id": null, "text": "This is old but I see no reason to mark it as invalid. It might be fixed in\n3.3.x but that should be confirmed before closing the bug.", "id": 93469, "time": "2006-09-12T22:06:58Z", "creator": "markt@apache.org", "creation_time": "2006-09-12T22:06:58Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 7013, "text": "I'm the original reporter. I've been using tomcat 5.5 and have not seen the\nproblem for several years, so I'm pretty sure that it has been fixed in the\nlater releases.\n\nI don't have a 3.3 tomcat handy to test against, but if you do, then it is easy\nto check: Just request a URL to a servlet that includes Japanese characters in\nthe path. For example, if the servlet is at http://foo.com/path/to/servlet, then\ntype http://foo.com/path/to/servlet/<japanese charaters> in your web browser,\nand see whether or not the whole tomcat server dies.", "id": 93479, "time": "2006-09-12T22:52:15Z", "creator": "wms@igoweb.org", "creation_time": "2006-09-12T22:52:15Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "sriramnrn@gmail.com", "attachment_id": null, "text": "Test system Tomcat 3.3.2, WindowsXP, JDK 1.5.0_08, Firefox 1.5.0.6.\nAccess URL http://sriraml:8080/examples/servlet/RequestInfoExample/%E3%82%8F\n\nThat's actually the Unicode character U+308F (Hirangana letter Wa) pasted into\nFireFox's URL.\n\nMethod: \tGET\nRequest URI: \t/examples/servlet/RequestInfoExample/%e3%82%8f\nProtocol: \tHTTP/1.1\nPath Info: \t/\u308f\nRemote Address: \t10.7.5.167 \t10.7.5.167\n\nIs this the correct way to test this bug ? Would you say that Tomcat 3.3.2 works\ncorrectly ?", "id": 93491, "time": "2006-09-13T04:53:53Z", "bug_id": 7013, "creation_time": "2006-09-13T04:53:53Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 7013, "attachment_id": null, "id": 93687, "time": "2006-09-17T13:39:48Z", "creator": "sriramnrn@gmail.com", "creation_time": "2006-09-17T13:39:48Z", "is_private": false, "text": "Marking as FIXED, since this works fine as reported above."}]