[{"attachment_id": null, "tags": [], "creator": "matt@editme.com", "is_private": false, "count": 0, "id": 123326, "time": "2008-12-15T13:46:47Z", "bug_id": 46403, "creation_time": "2008-12-15T13:46:47Z", "text": "This blog post shows up in Google when searching for this problem, and is a better explanation that I can give here:\n\nhttp://cephas.net/blog/2008/11/18/tomcat-6018-version-1-cookies-acegi-remember-me-and-ie/\n\nTo summarize, in 6.0.18, the way Tomcat writes persistent cookie headers was changed from:\n\nSet-Cookie: yankeessuck=YWFyb246MTIyODI0ODEwMjk5NjoyOGM5ODc4YzExOGZiOGZjZTBkZDE0ZTA1ZWRhZTM3Nw==; Expires=Thu, 19-Nov-2009 02:29:29 GMT;\n\nto:\n\nSet-Cookie: yankeessuck=\"YWFyb246MTIyODI0ODEwMjk5NjoyOGM5ODc4YzExOGZiOGZjZTBkZDE0ZTA1ZWRhZTM3Nw==\"; Version=1; Max-Age=31536000;\n\nThe value was enclosed in quotes, a \"Version=1\" parameter was added, and the Expires parameter was replaced with a Max-Age parameter.\n\nThough cookies are written correctly to specification, Internet Explorer (6 and 7) and Safari do not support the Max-Age parameter. As a result, an application writing persistent cookies in this version of Tomcat won't work for Internet Explorer or Safari."}, {"count": 1, "tags": [], "bug_id": 46403, "text": "Created attachment 23027\nSimple JSP that reproduces the behavior.", "id": 123330, "time": "2008-12-15T17:52:34Z", "creator": "matt@editme.com", "creation_time": "2008-12-15T17:52:34Z", "is_private": false, "attachment_id": 23027}, {"count": 2, "tags": [], "text": "Created attachment 23028\nPatch to always include Expires parameter regardless of version\n\nThis patch adds the Expires cookie parameter in addition to the Max-Age parameter. Though not technically to the cookies spec, it works. Tested in Google Chrome, Firefox 3.0 and IE7.", "is_private": false, "bug_id": 46403, "id": 123331, "time": "2008-12-15T19:26:41Z", "creator": "matt@editme.com", "creation_time": "2008-12-15T19:26:41Z", "attachment_id": 23028}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "For completeness, the cookie parsing changes were required to correct various security vulnerabilities.\n\nI really don't like the idea of adding work arounds to Tomcat for bugs in other software but I don't see a choice here.\n\nI have applied a variation of your patch to trunk and proposed it for 6.0.x. The variation is making the addition of the expires header optional.\n\nThere are occassional ASF/MS get togethers where issues like this can be raised (and hopefully fixed). I have a list of things to raise at the next one and I've added this to it. As far as I am aware there are no dates set for the next get together so don't expect an IE fix any time soon.", "count": 3, "id": 123498, "time": "2008-12-23T05:19:48Z", "bug_id": 46403, "creation_time": "2008-12-23T05:19:48Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 46403, "text": "This has been fixed in 6.0.x and will be included in 6.0.19 onwards.", "id": 123555, "time": "2008-12-27T11:52:36Z", "creator": "markt@apache.org", "creation_time": "2008-12-27T11:52:36Z", "is_private": false, "attachment_id": null}, {"count": 5, "text": "The problem is also with Firefox 3.6.3 and Tomcat 6.0.26. When reading Cookie via Firefox API:\n\nfunction getCookie(name, host) {\n        var cookieManager = Cc[\"@mozilla.org/cookiemanager;1\"].getService(Ci.nsICookieManager);\n        var iter = cookieManager.enumerator, {\n        nsICookie\n    }\n    = Ci;\n    while (iter.hasMoreElements()) {\n        var cookie = iter.getNext();\n        if (cookie instanceof nsICookie && cookie.name == name && cookie.host == host) {\n            return cookie.value;\n        }\n    }\n    return null;\n}\n\nIt reads quoted values with quotes around them - which is obviously wrong. Seems, that only Tomcat respects the RFC :(.", "bug_id": 46403, "is_private": false, "id": 137149, "time": "2010-05-26T10:59:30Z", "creator": "novotnaci@gmail.com", "creation_time": "2010-05-26T10:59:30Z", "tags": [], "attachment_id": null}]