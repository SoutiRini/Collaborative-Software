[{"count": 0, "tags": [], "bug_id": 44006, "attachment_id": null, "id": 111330, "time": "2007-12-01T21:28:25Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2007-12-01T21:28:25Z", "is_private": false, "text": "JDK 1.7.0-b23 (32-bit build)\nQuad-core 64-bit CPUs\nWindows Vista 64-bit\n\nTomcat seems to hang randomly (approximately 10% of the time) on shutdown if I run:\n\nnet start tomcat6\nnet stop tomcat6 (this fails)\n\nI have the following clues for you:\n\n1) This is not reproducible using startup.bat/shutdown.bat scripts.\n2) This is not reproducible without APR.\n3) I didn't run into this problem back when I was running Tomcat 6.0.13, single\ncore 32-bit CPU, same JDK build, with APR installed. Unfortunately, I can't go\nback to this hardware because it's gone.\n4) The last line in the log reads: \"INFO: Stopping Coyote HTTP/1.1 on http-80\"\nso it looks like it was in the middle of shutting down but something caused it\nto hang.\n\nI wanted to debug this further unfortunately I'm not sure how to get you guys a\nstack-trace or thread-dump when running Tomcat as a service.\n\nI suspect that something in the native libraries (APR) is at fault. Consider the\nfact that I moved to a multi-core CPU, perhaps the APR code has some sort of\nrace condition that is triggering this. Can you please suggest how I can\ngenerate more debug information for you to investigate? Ideally I'd like to get\na thread-dump at the time of the hang."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "This issue needs further debugging to identify where the root cause is. The best\nplace for you to get help with this is on the users mailing list. Please feel\nfree to re-open this issue if you track down the root cause to a Tomcat issue.", "id": 111966, "time": "2007-12-20T14:23:10Z", "bug_id": 44006, "creation_time": "2007-12-20T14:23:10Z", "is_private": false}]