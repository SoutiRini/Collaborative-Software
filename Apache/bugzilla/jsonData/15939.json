[{"count": 0, "tags": [], "creator": "smactaggart@1300Ttimes.com", "is_private": false, "id": 29095, "attachment_id": null, "bug_id": 15939, "creation_time": "2003-01-10T00:40:55Z", "time": "2003-01-10T00:40:55Z", "text": "When using the SMTPAppender to print stack traces there are not imbedded new-\nlines to break the stack trace up correctly.\n\nExample:\norg.apache.tomcat.core.Handler.invoke(Handler.java:322)\tat \norg.apache.tomcat.core.Handler.service(Handler.java:235)\tat \norg.apache.tomcat.facade.ServletHandler.service(ServletHandler.java:485)\n\tat org.apache.tomcat.core.ContextManager.internalService\n(ContextManager.java:917)\tat org.apache.tomcat.core.ContextManager.service\n(ContextManager.java:833)\tat \norg.apache.tomcat.modules.server.Http10Interceptor.processConnection\n(Http10Interceptor.java:176)\tat \norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:494)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:516)\tat java.lang.Thread.run(Thread.java:484)\n\nWhich should look like:\n        at org.apache.tomcat.core.Handler.invoke(Handler.java:322)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:235)\n\tat org.apache.tomcat.facade.ServletHandler.service\n(ServletHandler.java:485)\n\tat org.apache.tomcat.core.ContextManager.internalService\n(ContextManager.java:917)\n\tat org.apache.tomcat.core.ContextManager.service\n(ContextManager.java:833)\n\tat org.apache.tomcat.modules.server.Http10Interceptor.processConnection\n(Http10Interceptor.java:176)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:494)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:516)\n\tat java.lang.Thread.run(Thread.java:484)\n\nA Fix for this is to change the code in the sendBuffer() method from\n\n                        for (int j = 0; j < s.length; j++)\n                        {\n                            sbuf.append(s[j]);\n                        }\nto\n                        for (int j = 0; j < s.length; j++)\n                        {\n                            sbuf.append(s[j]);\n                            sbuf.append('\\n');\n                        }"}, {"count": 1, "tags": [], "bug_id": 15939, "text": "Make that System.getProperty(\"line.separator\"), probably extracted as a\nconstant, instead of \"\\n\".", "id": 43579, "time": "2003-09-02T06:58:17Z", "creator": "j.c.yip@computer.org", "creation_time": "2003-09-02T06:58:17Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "skivisaa@cc.hut.fi", "attachment_id": null, "is_private": false, "id": 44266, "time": "2003-09-17T11:47:03Z", "bug_id": 15939, "creation_time": "2003-09-17T11:47:03Z", "text": "The line separator is already prefetched in Layout-object. So, rather make that:\n\nsbuf.append(Layout.LINE_SEP);\n"}, {"attachment_id": null, "tags": [], "bug_id": 15939, "text": "Applied patch provided by James Manning to add line separator to smtpappender\nand ntappender - see issue 23221", "count": 3, "id": 47917, "time": "2003-11-22T06:33:03Z", "creator": "sdeboy@iname.com", "creation_time": "2003-11-22T06:33:03Z", "is_private": false}]