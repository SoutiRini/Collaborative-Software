[{"count": 0, "tags": [], "creator": "nakamura.kyohei.lab@gmail.com", "attachment_id": null, "is_private": false, "id": 191371, "time": "2016-06-02T08:35:19Z", "bug_id": 59655, "creation_time": "2016-06-02T08:35:19Z", "text": "The javax.servlet.http.CookieNameValidator has multiple implementations.\nIf the org.apache.tomcat.util.http.ServerCookie.STRICT_NAMING system property is not specified, the javax.servlet.http.NetscapeValidator will be used in default.\n\nThe NetscapeValidator allows HTTP separators (excluding semi-colon, comma and white space) in the cookie name.\nHowever, the Rfc6265CookieProcessor and the LegacyCookieProcessor do not allow HTTP separators in the cookie name.\nAs a result, although Tomcat sends cookie header that include HTTP separators in the cookie name, the Tomcat can not receive the cookie header.\nI think that it lacks consistency.\nThe CookieNameValidator and the CookieProcessor should be the consistency.\n\nOn the other hand, the implementation of CookieNameValidator to use can be switched by the org.apache.tomcat.util.http.ServerCookie.STRICT_NAMING system property, but can not be switched per Context, like the CookieProcessor.\nI think that setting of the CookieNameValidator per Context is more useful."}, {"count": 1, "tags": [], "bug_id": 59655, "attachment_id": null, "text": "The CookieNameValidator can not be set per web application since it is set in the specification implementation and can, therefore, only be set globally. I have changed the default to the RFC6265 validator and restored the section of the docs that describe the STRICT_NAMING property.\n\nThe fix has been applied to 9.0.x for 9.0.0.M7 onwards and 8.5.x for 8.5.3. onwards.", "id": 191422, "time": "2016-06-06T14:22:20Z", "creator": "markt@apache.org", "creation_time": "2016-06-06T14:22:20Z", "is_private": false}, {"count": 2, "tags": [], "creator": "nakamura.kyohei.lab@gmail.com", "attachment_id": 33955, "id": 191713, "time": "2016-06-16T11:10:25Z", "bug_id": 59655, "creation_time": "2016-06-16T11:10:25Z", "is_private": false, "text": "Created attachment 33955\npatch against trunk\n\nHi Mark,\n\nThank you for the fix.\nI think this fix of changing the default to the RFC6265Validator and restoring the description of STRICT_NAMING system property is correct, but the Javadoc of javax.servlet.http.Cookie and the description of STRICT_NAMING system property have not been updated.\nI have attached the patch."}, {"count": 3, "attachment_id": null, "creator": "markt@apache.org", "text": "Thanks. Docs update for 9.0.x and 8.5.x. The patch will be in 9.0.0.M9 and 8.5.4 onwards.", "id": 191834, "time": "2016-06-20T10:45:09Z", "bug_id": 59655, "creation_time": "2016-06-20T10:45:09Z", "tags": [], "is_private": false}]