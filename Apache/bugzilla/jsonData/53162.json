[{"attachment_id": null, "tags": [], "bug_id": 53162, "is_private": false, "count": 0, "id": 158654, "time": "2012-04-30T05:16:37Z", "creator": "dontripp@gmail.com", "creation_time": "2012-04-30T05:16:37Z", "text": "Linux RHEL 5.8 2.6.18-308.el5xen #1 SMP Fri Jan 27 17:26:57 EST 2012 x86_64 x86_64 x86_64 GNU/Linux\n\nWhile building 2.2.22, compile fails with following error. I have not been able to find anything on the internet relevant to this. Compiling with gcc version 4.1.2 20080704 (Red Hat 4.1.2-52)\n\n\n/usr/lib64/apr-1/build/libtool --silent --mode=link gcc -pthread    -L/usr/kerberos/lib64      -o mod_dir.la -rpath /usr/lib64/httpd/modules -module -avoid-version  mod_dir.lo\n/usr/lib64/apr-1/build/libtool --silent --mode=link gcc -pthread    -L/usr/kerberos/lib64      -o mod_actions.la -rpath /usr/lib64/httpd/modules -module -avoid-version  mod_actions.lo\n/usr/lib64/apr-1/build/libtool --silent --mode=link gcc -pthread    -L/usr/kerberos/lib64      -o mod_speling.la -rpath /usr/lib64/httpd/modules -module -avoid-version  mod_speling.lo\n/usr/lib64/apr-1/build/libtool --silent --mode=link gcc -pthread    -L/usr/kerberos/lib64      -o mod_userdir.la -rpath /usr/lib64/httpd/modules -module -avoid-version  mod_userdir.lo\n/usr/lib64/apr-1/build/libtool --silent --mode=link gcc -pthread    -L/usr/kerberos/lib64      -o mod_alias.la -rpath /usr/lib64/httpd/modules -module -avoid-version  mod_alias.lo\n/usr/lib64/apr-1/build/libtool --silent --mode=link gcc -pthread    -L/usr/kerberos/lib64      -o mod_rewrite.la -rpath /usr/lib64/httpd/modules -module -avoid-version  mod_rewrite.lo\nmake[4]: Leaving directory `/usr/src/redhat/BUILD/httpd-2.2.22/prefork/modules/mappers'\nmake[3]: Leaving directory `/usr/src/redhat/BUILD/httpd-2.2.22/prefork/modules/mappers'\nmake[2]: Leaving directory `/usr/src/redhat/BUILD/httpd-2.2.22/prefork/modules'\nmake[2]: Entering directory `/usr/src/redhat/BUILD/httpd-2.2.22/prefork/support'\nmake[2]: Leaving directory `/usr/src/redhat/BUILD/httpd-2.2.22/prefork/support'\n\nmake[1]: Leaving directory `/usr/src/redhat/BUILD/httpd-2.2.22/prefork'\nmake: *** [all-recursive] Error 1\nerror: Bad exit status from /var/tmp/rpm-tmp.97040 (%build)\n\n\nRPM build errors:\n    Bad exit status from /var/tmp/rpm-tmp.97040 (%build)"}, {"count": 1, "tags": [], "bug_id": 53162, "is_private": false, "text": "modules/http/.libs/libmod_http.a(byterange_filter.o): In function `ap_set_byterange':\nbyterange_filter.c:(.text+0x130d): undefined reference to `apr_array_clear'\ncollect2: ld returned 1 exit status", "id": 158655, "time": "2012-04-30T05:21:15Z", "creator": "dontripp@gmail.com", "creation_time": "2012-04-30T05:21:15Z", "attachment_id": null}, {"attachment_id": 28695, "tags": [], "bug_id": 53162, "is_private": false, "count": 2, "id": 158656, "time": "2012-04-30T05:25:46Z", "creator": "dontripp@gmail.com", "creation_time": "2012-04-30T05:25:46Z", "text": "Created attachment 28695\nBuild output"}, {"attachment_id": null, "tags": [], "bug_id": 53162, "text": "As a test, I was just able to build 2.2.21 fine.", "count": 3, "id": 158657, "time": "2012-04-30T05:48:10Z", "creator": "dontripp@gmail.com", "creation_time": "2012-04-30T05:48:10Z", "is_private": false}, {"count": 4, "tags": [], "creator": "dontripp@gmail.com", "attachment_id": null, "id": 158658, "time": "2012-04-30T06:00:53Z", "bug_id": 53162, "creation_time": "2012-04-30T06:00:53Z", "is_private": false, "text": "I applied the CVE-2011-3368.patch patch to the 2.2.21 source and compiled and it compiled fine."}, {"count": 5, "tags": [], "creator": "sergek@lokitech.com", "is_private": false, "text": "I have the same issue on CentOS 5.8.  I've been building apache by hand for a while... I can compile 2.2.21 and earlier, but 2.2.22 introduces this bug.  Exact same issue... modules/http/.libs/libmod_http.a(byterange_filter.o): In function `ap_set_byterange': byterange_filter.c:(.text+0x12c1): undefined reference to `apr_array_clear'", "id": 159695, "time": "2012-06-05T01:00:31Z", "bug_id": 53162, "creation_time": "2012-06-05T01:00:31Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 53162, "is_private": false, "text": "It seems apr_array_clear has been introduced in apr 1.3.x. I guess you are trying to compile with apr 1.2.x. You can use --with-included-apr as a work-around.\n\nNot sure if we should just document the apr 1.3 dependency or try to restore apr 1.2 compatibility in 2.2.23.", "id": 159783, "time": "2012-06-06T21:04:55Z", "creator": "sf@sfritsch.de", "creation_time": "2012-06-06T21:04:55Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 53162, "text": "Awesome Stefan, that worked!  I guess I thought that was the default since APR was bundled with the download.", "count": 7, "id": 159784, "time": "2012-06-06T21:09:08Z", "creator": "sergek@lokitech.com", "creation_time": "2012-06-06T21:09:08Z", "is_private": false}, {"count": 8, "tags": [], "creator": "ksimp@ksimp.org", "attachment_id": null, "text": "Created an account just to say thanks on this.  worked for me 2.  I should add that I had a yum installed httpd which no doubt was where the compile was looked for the apr.", "id": 164945, "time": "2013-01-30T15:37:54Z", "bug_id": 53162, "creation_time": "2013-01-30T15:37:54Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 53162, "text": "this dep was removed in 2.2.24", "count": 9, "id": 172518, "time": "2014-01-20T00:08:29Z", "creator": "covener@gmail.com", "creation_time": "2014-01-20T00:08:29Z", "is_private": false}]