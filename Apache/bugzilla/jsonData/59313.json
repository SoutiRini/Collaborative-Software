[{"count": 0, "tags": [], "creator": "software+httpd@kd6lvw.ampr.org", "attachment_id": null, "is_private": false, "id": 190195, "time": "2016-04-12T17:56:27Z", "bug_id": 59313, "creation_time": "2016-04-12T17:56:27Z", "text": "RFC 3875 defines the HTTP version number as \"<major>.<minor>\" for the purposes of the CGI variable \"SERVER_PROTOCOL\".  This implementation simply has \"HTTP/2\", which has no minor number.\n\nChange line 408 of file modules/http2/h2_request.c to read \"HTTP/2.0\".\n\n     ap_parse_uri(r, req->path);\n-    r->protocol = (char*)\"HTTP/2\";\n+    r->protocol = (char*)\"HTTP/2.0\";\n     r->proto_num = HTTP_VERSION(2, 0);\n\nRFC 7540 did NOT override RFC 3875 but claims backward compatibility.  Granted that RFC 7540 refers to the second, binary implementation of HTTP as \"HTTP/2\", that was insufficient to override the ABNF syntax for the CGI interface in the absence of an affirmation of such an override.\n\nRFC 3875, Section 4.1.16 ABNF:\n\n    HTTP-Version      = \"HTTP\" \"/\" 1*digit \".\" 1*digit\n\nThe \"minor\" number is not optional."}, {"count": 1, "tags": [], "creator": "stefan@eissing.org", "attachment_id": null, "id": 190204, "time": "2016-04-13T07:56:05Z", "bug_id": 59313, "creation_time": "2016-04-13T07:56:05Z", "is_private": false, "text": "Since you already triggered the discussion on the http wg mailing, let's see what the outcome of that will be.\n\nIn the meantime, if you have incompatibilities with existing CGI deployments, have you tried\n\n  H2SerializeHeaders on\n\nfor those? This is the mod_http2 backward compatibility switch that runs all requests as if there had been come via HTTP/1.1."}, {"count": 2, "tags": [], "creator": "micha@lenk.info", "attachment_id": null, "text": "Just for the records, also the HTTP protocol should include the minor version in the HTTP version. This is defined in RFC 7230, section 2.6.\nhttps://tools.ietf.org/html/rfc7230#section-2.6", "id": 190283, "time": "2016-04-15T06:56:52Z", "bug_id": 59313, "creation_time": "2016-04-15T06:56:52Z", "is_private": false}, {"count": 3, "tags": [], "creator": "micha@lenk.info", "attachment_id": null, "is_private": false, "id": 190284, "time": "2016-04-15T07:00:04Z", "bug_id": 59313, "creation_time": "2016-04-15T07:00:04Z", "text": "RFC 7230 is only relevant for HTTP/1.1 I guess. Sorry for the noise."}, {"count": 4, "attachment_id": null, "creator": "stefan@eissing.org", "is_private": false, "id": 190406, "time": "2016-04-20T11:15:12Z", "bug_id": 59313, "creation_time": "2016-04-20T11:15:12Z", "tags": [], "text": "Changed in trunk with r1740108, 2.4.x with r1740112."}]