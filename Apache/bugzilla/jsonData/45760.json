[{"count": 0, "tags": [], "creator": "rafael.orteu.ext@juntadeandalucia.es", "attachment_id": null, "text": "Tomcat version 6.0.18\nJava version jdk1.6.0_07\n\nWe have an application that fills PSOldGen space and Full GC's does not free memory in PSoldGen space, the same application does not have this issue with jdk1.5.\n\nThanks.\n\n\nHeap after GC invocations=90 (full 17):\n PSYoungGen      total 80832K, used 28649K [0x0000002aa94e0000, 0x0000002aaea30000, 0x0000002aaea30000)\n  eden space 74304K, 38% used [0x0000002aa94e0000,0x0000002aab0da640,0x0000002aadd70000)\n  from space 6528K, 0% used [0x0000002aadd70000,0x0000002aadd70000,0x0000002aae3d0000)\n  to   space 6464K, 0% used [0x0000002aae3e0000,0x0000002aae3e0000,0x0000002aaea30000)\n PSOldGen        total 174784K, used 174784K [0x0000002a9ea30000, 0x0000002aa94e0000, 0x0000002aa94e0000)\n  object space 174784K, 100% used [0x0000002a9ea30000,0x0000002aa94e0000,0x0000002aa94e0000)\n PSPermGen       total 65792K, used 38544K [0x0000002a99630000, 0x0000002a9d670000, 0x0000002a9ea30000)\n  object space 65792K, 58% used [0x0000002a99630000,0x0000002a9bbd42f8,0x0000002a9d670000)\n}\n{Heap before GC invocations=91 (full 18):\n PSYoungGen      total 80832K, used 74304K [0x0000002aa94e0000, 0x0000002aaea30000, 0x0000002aaea30000)\n  eden space 74304K, 100% used [0x0000002aa94e0000,0x0000002aadd70000,0x0000002aadd70000)\n  from space 6528K, 0% used [0x0000002aadd70000,0x0000002aadd70000,0x0000002aae3d0000)\n  to   space 6464K, 0% used [0x0000002aae3e0000,0x0000002aae3e0000,0x0000002aaea30000)\n PSOldGen        total 174784K, used 174784K [0x0000002a9ea30000, 0x0000002aa94e0000, 0x0000002aa94e0000)\n  object space 174784K, 100% used [0x0000002a9ea30000,0x0000002aa94e0000,0x0000002aa94e0000)\n PSPermGen       total 65792K, used 38596K [0x0000002a99630000, 0x0000002a9d670000, 0x0000002a9ea30000)\n  object space 65792K, 58% used [0x0000002a99630000,0x0000002a9bbe12c0,0x0000002a9d670000)\n5263.913: [Full GC [PSYoungGen: 74304K->30306K(80832K)] [PSOldGen: 174784K->174784K(174784K)] 249088K->205090K(255616K) [PSPermGen: 38596K->38596K(65792K)], 0.5541860 secs] [Times: user=0.56 sys=0.00, real=0.55 secs] \nHeap after GC invocations=91 (full 18):\n PSYoungGen      total 80832K, used 30306K [0x0000002aa94e0000, 0x0000002aaea30000, 0x0000002aaea30000)\n  eden space 74304K, 40% used [0x0000002aa94e0000,0x0000002aab278b28,0x0000002aadd70000)\n  from space 6528K, 0% used [0x0000002aadd70000,0x0000002aadd70000,0x0000002aae3d0000)\n  to   space 6464K, 0% used [0x0000002aae3e0000,0x0000002aae3e0000,0x0000002aaea30000)\n PSOldGen        total 174784K, used 174784K [0x0000002a9ea30000, 0x0000002aa94e0000, 0x0000002aa94e0000)\n  object space 174784K, 100% used [0x0000002a9ea30000,0x0000002aa94e0000,0x0000002aa94e0000)\n PSPermGen       total 65792K, used 38596K [0x0000002a99630000, 0x0000002a9d670000, 0x0000002a9ea30000)\n  object space 65792K, 58% used [0x0000002a99630000,0x0000002a9bbe12c0,0x0000002a9d670000)\n}\n{Heap before GC invocations=92 (full 19):\n PSYoungGen      total 80832K, used 74304K [0x0000002aa94e0000, 0x0000002aaea30000, 0x0000002aaea30000)\n  eden space 74304K, 100% used [0x0000002aa94e0000,0x0000002aadd70000,0x0000002aadd70000)\n  from space 6528K, 0% used [0x0000002aadd70000,0x0000002aadd70000,0x0000002aae3d0000)\n  to   space 6464K, 0% used [0x0000002aae3e0000,0x0000002aae3e0000,0x0000002aaea30000)\n PSOldGen        total 174784K, used 174784K [0x0000002a9ea30000, 0x0000002aa94e0000, 0x0000002aa94e0000)\n  object space 174784K, 100% used [0x0000002a9ea30000,0x0000002aa94e0000,0x0000002aa94e0000)\n PSPermGen       total 65792K, used 38652K [0x0000002a99630000, 0x0000002a9d670000, 0x0000002a9ea30000)\n  object space 65792K, 58% used [0x0000002a99630000,0x0000002a9bbef390,0x0000002a9d670000)\n5605.847: [Full GC [PSYoungGen: 74304K->29768K(80832K)] [PSOldGen: 174784K->174784K(174784K)] 249088K->204552K(255616K) [PSPermGen: 38652K->38652K(65792K)],", "id": 120438, "time": "2008-09-08T02:31:00Z", "bug_id": 45760, "creation_time": "2008-09-08T02:31:00Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Something that works with one JDK but not another points to a JDK bug rather than a Tomcat one, hence I am closing this as invalid.\n\nThat said, if you have output from a profiler that shows that a Tomcat class is holding on to references that it shouldn't feel free to re-open. Some idea of how to reproduce the issue would also be required.", "id": 120439, "time": "2008-09-08T02:53:59Z", "bug_id": 45760, "creation_time": "2008-09-08T02:53:59Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 45760, "attachment_id": null, "id": 120442, "time": "2008-09-08T04:23:15Z", "creator": "rafael.orteu.ext@juntadeandalucia.es", "creation_time": "2008-09-08T04:23:15Z", "is_private": false, "text": "I have been doing more test and I have the following:\n\nTomcat 6.0.18 -> Java 6u7 = Failed\nTomcat 6.0.18 -> Java 5u15 = Failed\nTomcat 5.5.26 -> Java 6u7 = Failed\nTomcat 5.5.26 -> Java 5u15 = Failed\n\nIt seems that it occurs in different Tomcat and Java configurations, the finally message in catalina.out is:\n\nERROR [ - http-10.228.10.166-8080-Processor18]: Servlet.service() para servlet action lanz\ufffd excepci\njava.lang.OutOfMemoryError: Java heap space\n        at java.util.LinkedHashMap.createEntry(LinkedHashMap.java:416)\n        at java.util.HashMap.putForCreate(HashMap.java:476)\n        at java.util.HashMap.putAllForCreate(HashMap.java:482)\n        at java.util.HashMap.<init>(HashMap.java:219)\n        at java.util.LinkedHashMap.<init>(LinkedHashMap.java:192)\n        at sun.reflect.annotation.AnnotationParser.parseAnnotation(AnnotationParser.java:209)\n        at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:69)\n        at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:52)\n        at java.lang.reflect.Method.declaredAnnotations(Method.java:676)\n        at java.lang.reflect.Method.getAnnotation(Method.java:663)\n        at java.lang.reflect.AccessibleObject.isAnnotationPresent(AccessibleObject.java:175)\n        at org.hibernate.annotations.common.reflection.java.JavaAnnotationReader.isAnnotationPresent(JavaAnnotationReader.java:27)\n        at org.hibernate.annotations.common.reflection.java.JavaXAnnotatedElement.isAnnotationPresent(JavaXAnnotatedElement.java:43)\n        at org.hibernate.cfg.AnnotationBinder.mustBeSkipped(AnnotationBinder.java:1063)\n        at org.hibernate.cfg.AnnotationBinder.addProperty(AnnotationBinder.java:1043)\n        at org.hibernate.cfg.AnnotationBinder.addElementsOfAClass(AnnotationBinder.java:999)\n        at org.hibernate.cfg.AnnotationBinder.getElementsToProcess(AnnotationBinder.java:833)\n        at org.hibernate.cfg.AnnotationBinder.bindClass(AnnotationBinder.java:645)\n        at org.hibernate.cfg.AnnotationConfiguration.processArtifactsOfType(AnnotationConfiguration.java:498)\n        at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:277)\n        at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1115)\n        at org.hibernate.ejb.Ejb3Configuration.buildMappings(Ejb3Configuration.java:1269)\n        at org.hibernate.ejb.EventListenerConfigurator.configure(EventListenerConfigurator.java:150)\n        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:888)\n        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:186)\n        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:246)\n        at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:120)\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:60)\n        at org.ja.cgob.comp.framework.data.dao.jpa.JpaDBAccessManagerDAO.openConnection(JpaDBAccessManagerDAO.java:41)\n        at org.ja.cgob.comp.framework.data.dao.jpa.JpaDBAccessManagerDAO.findByQuery(JpaDBAccessManagerDAO.java:302)\n        at org.ja.cgob.comp.framework.data.dao.OracleGenericDAOImpl.getComboBySQL(OracleGenericDAOImpl.java:61)\n"}, {"count": 3, "tags": [], "creator": "rafael.orteu.ext@juntadeandalucia.es", "attachment_id": null, "text": "Which profiler do you recommend?", "id": 120443, "time": "2008-09-08T04:27:50Z", "bug_id": 45760, "creation_time": "2008-09-08T04:27:50Z", "is_private": false}, {"count": 4, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "That would be a question for the users list.", "id": 120475, "time": "2008-09-08T13:13:37Z", "bug_id": 45760, "creation_time": "2008-09-08T13:13:37Z", "attachment_id": null}]