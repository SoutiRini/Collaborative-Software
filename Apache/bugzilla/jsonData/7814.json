[{"count": 0, "tags": [], "bug_id": 7814, "attachment_id": null, "is_private": false, "id": 12954, "time": "2002-04-07T15:02:48Z", "creator": "erich.prchal@siemens.at", "creation_time": "2002-04-07T15:02:48Z", "text": "I got errors \"child pid 19410 exit signal Segmentation fault (11)\"\nwhen running mod_jk with ajp13 in a multithreaded worker.\nThe problem only occurs if the cachesize of the ajp13 worker\nis less than the threads opened (or the default 1)\nand (therefore) I have traced from jk_endpoint_t::ajp_close_endpoint.\n\nI believe the solution is in jk_mt.h lines 91-108:\n    #else /* Unix pthreads */\n        #define JK_INIT_CS(x, rc)\\\n            if(pthread_mutex_init(x, NULL)) rc = JK_FALSE; else rc = JK_TRUE;\n\n        #define JK_DELETE_CS(x, rc)\\\n            if(pthread_mutex_lock(x)) rc = JK_FALSE; else rc = JK_TRUE;\n\n        #define JK_ENTER_CS(x, rc)\\\n            if(pthread_mutex_unlock(x)) rc = JK_FALSE; else rc = JK_TRUE;\n\n        #define JK_LEAVE_CS(x, rc)\\\n            if(pthread_mutex_destroy(x)) rc = JK_FALSE; else rc = JK_TRUE;\n    #endif /* Unix pthreads */\n\nlock,unlock and destroy seem to be exchanged (it is still the same in native2).\nAt least on Solaris 8 I no longer have the problem since I changed the\nabove lines to what would intuitivly be correct."}, {"count": 1, "tags": [], "text": "Fixed as of <http://cvs.apache.org/viewcvs/jakarta-tomcat-\nconnectors/jk/native/common/jk_mt.h.diff?r1=1.2&r2=1.3> please review\n\nThanks", "attachment_id": null, "id": 17847, "creator": "nacho@apache.org", "time": "2002-06-15T01:58:05Z", "bug_id": 7814, "creation_time": "2002-06-15T01:58:05Z", "is_private": false}]