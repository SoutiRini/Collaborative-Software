[{"count": 0, "tags": [], "creator": "apache@hitechman.com", "text": "I am not exactly sure whether this belongs under Catalina or Connectors but \nconnectors seem as a better choice:\n\nApache web server:\nStock RH7.1 install\nServer version: Apache/1.3.19 (Unix)  (Red-Hat/Linux)\nServer built:   Mar 29 2001 12:52:37\n\nWith mod_webapp.so compiled from sources for 4.0.1 release of tomcat:\n\nWebAppConnection catalina1 warp localhost:8008\nWebAppDeploy portal catalina1 /portal\n\nWhen trying to access /portal through apache it inifinatly tries to connect to \nportal application.\n\nApache's log file gets filled with many lines of the following text:\n[Thu Oct 25 10:54:36 2001] [error] Cannot deploy application portal\n\nAnd tomcat's log for Warp connector is being filled with many lines like: \n\n2001-10-25 10:54:36 \n[org.apache.catalina.connector.warp.WarpConfigurationHandler] Cannot \nfind \"/usr/local/tomcat/production/webapps/portal\" for appl. \"portal\" \nhost \"edas1\"\n2001-10-25 10:54:36 \n[org.apache.catalina.connector.warp.WarpConfigurationHandler] Error deploying \nweb application \"portal\" under <http://edas1:80/portal/>\n2001-10-25 10:54:36 [org.apache.catalina.connector.warp.WarpConnection] \nException on socket\njava.io.IOException: Broken pipe\n\tat java.net.SocketOutputStream.socketWrite(Native Method)\n\tat java.net.SocketOutputStream.write(SocketOutputStream.java:62)\n\tat org.apache.catalina.connector.warp.WarpConnection.send\n(WarpConnection.java:220)\n\tat org.apache.catalina.connector.warp.WarpConfigurationHandler.handle\n(WarpConfigurationHandler.java:127)\n\tat org.apache.catalina.connector.warp.WarpConnection.run\n(WarpConnection.java:189)\n\tat java.lang.Thread.run(Thread.java:484)\n\nAlthough this is caused by user configuration error, I still think it can be \nhandled more gracefully.\n\nThank you,\nVlad B.", "id": 7152, "time": "2001-10-25T08:25:53Z", "bug_id": 4422, "creation_time": "2001-10-25T08:25:53Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "polivka@virtual-media.com", "text": "I too have experienced this. I believe the problem is in\nc_configure(pr_warp_config.c).\n\nIf Tomcat/Warp is unable to deploy an application, it sends back a packet of\ntype TYPE_ERROR. Upon reciept of this packet, the warp module logs an error\nmessage and immediately tries to deploy the same application again, which will\nalso fail, thus creating an endless loop.\n\nI'm not sure if this is the proper way to solve the problem, but it works.\n\n--- pr_warp_config.c.orig       Thu Oct 25 15:32:43 2001\n+++ pr_warp_config.c    Thu Oct 25 15:33:05 2001\n@@ -142,6 +142,7 @@\n         }\n         if (pack->type==TYPE_ERROR) {\n             wa_log(WA_MARK,\"Cannot deploy application %s\",appl->name);\n+            elem=elem->next;\n             continue;\n         }\n         if (pack->type!=TYPE_CONF_APPLIC) {\n\nThanks,\nBrett Polivka\npolivka@virtual-media.com\n\n", "id": 7170, "attachment_id": null, "bug_id": 4422, "creation_time": "2001-10-25T13:49:28Z", "time": "2001-10-25T13:49:28Z", "is_private": false}, {"count": 2, "tags": [], "creator": "pier@betaversion.org", "attachment_id": null, "id": 7200, "time": "2001-10-26T08:19:40Z", "bug_id": 4422, "creation_time": "2001-10-26T08:19:40Z", "is_private": false, "text": "Indeed it is. The patch is good, and in CVS :)\nThanks to Brett Polivka <polivka@virtual-media.com>\n"}]