[{"count": 0, "tags": [], "bug_id": 46958, "is_private": false, "id": 125961, "attachment_id": null, "creator": "photodeus@gmail.com", "creation_time": "2009-04-02T16:55:36Z", "time": "2009-04-02T16:55:36Z", "text": "The manager XML-interface cannot be used if it's installed under any other path than /manager, failing to find the xform.xsl file needed for XSL transformation.\n\nFails:\nhttp://example.com/mymanager/status?XML=true\n\nWorks:\nhttp://example.com/manager/status?XML=true\n\nReason for error, in Tomcat sources\norg.apache.catalina.manager.Constants\nXML_STYLE returns the constant value \n\"<?xml-stylesheet type=\\\"text/xsl\\\" href=\\\"/manager/xform.xsl\\\" ?>\";\n\nThe /manager part needs to be modified to match webapp path.\n\nCaller:\norg.apache.catalina.util.RequestUtil.StatusTransformer\npublic static void writeHeader(PrintWriter writer, final String contextPath, int mode) {\n  //...\n  // TODO needs current virtual webapp path as parameter\n  writer.write(Constants.XML_STYLE);\n\n}\n\nOn a sidenote, in org.apache.catalina.manager.host.Constants there is a similar hard-coded value, which might cause similar problems in the future. It seems to be unreferenced in the current sources right now (unused value)."}, {"count": 1, "tags": [], "creator": "vputtewar@gmail.com", "text": "Created attachment 23442\nPatch to fix this bug.", "id": 126006, "time": "2009-04-05T05:06:28Z", "bug_id": 46958, "creation_time": "2009-04-05T05:06:28Z", "is_private": false, "attachment_id": 23442}, {"count": 2, "tags": [], "text": "Thanks for the report.\n\nSince it is only used in the one place I took the simpler option of using a relative path rather than an absolute one. It also saves having to handle the unlikely case of the manager app being deployed as ROOT in which case request.getContextPath() would return \"\"\n\nI also removed the unused constants from the host manager.\n\nThe fix has been applied to trunk and proposed for 6.0.x", "is_private": false, "id": 126081, "creator": "markt@apache.org", "time": "2009-04-08T04:41:17Z", "bug_id": 46958, "creation_time": "2009-04-08T04:41:17Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 46958, "attachment_id": null, "text": "This has been fixed in 6.0.x and will be in 6.0.20 onwards.", "id": 126586, "time": "2009-04-28T06:19:15Z", "creator": "markt@apache.org", "creation_time": "2009-04-28T06:19:15Z", "is_private": false}]