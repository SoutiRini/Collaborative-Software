[{"count": 0, "tags": [], "text": "Our company is behind a proxy server (named \"proxy\", running on port 8080).\nIf I run the attached test plan using the command line invocation\n\nbin\\jmeter -t RCTestPlan.jmx -n -H proxy -P 8080\n\nthe log file (also attached) will contain a null pointer exception", "attachment_id": null, "id": 105093, "creator": "jens@voss-ahrensburg.de", "time": "2007-07-05T06:51:51Z", "bug_id": 42819, "creation_time": "2007-07-05T06:51:51Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 42819, "attachment_id": 20453, "is_private": false, "id": 105094, "time": "2007-07-05T06:52:41Z", "creator": "jens@voss-ahrensburg.de", "creation_time": "2007-07-05T06:52:41Z", "text": "Created attachment 20453\nSample test plan"}, {"count": 2, "text": "Created attachment 20454\nsample test plan log file", "creator": "jens@voss-ahrensburg.de", "is_private": false, "id": 105095, "time": "2007-07-05T06:53:20Z", "bug_id": 42819, "creation_time": "2007-07-05T06:53:20Z", "tags": [], "attachment_id": 20454}, {"count": 3, "attachment_id": null, "creator": "sebb@apache.org", "is_private": false, "id": 105124, "time": "2007-07-05T17:37:14Z", "bug_id": 42819, "creation_time": "2007-07-05T17:37:14Z", "tags": [], "text": "This is a problem with the password handling in non-GUI mode, and happens \nregardless of the proxy settings.\n\nTry setting the system property:\n\njavax.net.ssl.keyStorePassword\n\nto an empty string - the NPE should disappear.\n\nDoes this fix the NPE for you?\n\nAlternatively, delete the keystore file (unless you need it).\n\n[Obviously the bug needs to be fixed, but it would be useful to know if I have \nfound the problem]"}, {"count": 4, "tags": [], "bug_id": 42819, "attachment_id": null, "id": 105125, "time": "2007-07-05T17:41:04Z", "creator": "sebb@apache.org", "creation_time": "2007-07-05T17:41:04Z", "is_private": false, "text": "The problem also occurs on JMeter 2.2, so the bug has been lurking for a \nlittle while ..."}, {"count": 5, "tags": [], "text": "Hi Sebastian\n\nThanks for your various suggestions and comments. I \ntried them out and came up with the following results:\n\n> You can try defining the jmeter property:\n> https.sessioncontext.shared=true\n> to revert to the previous behaviour.\n> What happens if you try that?\n\nI can see no difference, the NPE is still there.\n\n> Try setting the system property:\n> javax.net.ssl.keyStorePassword\n> to an empty string - the NPE should disappear.\n> Does this fix the NPE for you?\n\nNo, unfortunately it doesn't either.\n\n> Alternatively, delete the keystore file (unless you need it).\n\nNow this does seem to work; the NPE is no longer showing in the\nlog file, and the problematic test plan is running faster by\nabout the factor 6. On the other hand, I do need the file for\nother purposes, but for the time being, I can use this workaround.\n\n> The problem also occurs on JMeter 2.2, so the bug has been\n> lurking for a little while ...\n\nIf this is the case, then there must be some other difference\nin the code preventing the NPE to be thrown in version 2.2\nbecause I am not getting any stack trace in the 2.2 log file\n(Or the NPE is sensibly handled or simply not logged).\n", "attachment_id": null, "id": 105132, "creator": "jens@voss-ahrensburg.de", "time": "2007-07-06T01:06:09Z", "bug_id": 42819, "creation_time": "2007-07-06T01:06:09Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 42819, "attachment_id": null, "id": 105134, "time": "2007-07-06T04:50:26Z", "creator": "sebb@apache.org", "creation_time": "2007-07-06T04:50:26Z", "is_private": false, "text": "(In reply to comment #5)\n> Hi Sebastian\n> Thanks for your various suggestions and comments. I \n> tried them out and came up with the following results:\n> > You can try defining the jmeter property:\n> > https.sessioncontext.shared=true\n> > to revert to the previous behaviour.\n> > What happens if you try that?\n> I can see no difference, the NPE is still there.\n\nYes, that was intended as a fix for reverting to the original SSL behaviour, \nnot the NPE.\n\n> > Try setting the system property:\n> > javax.net.ssl.keyStorePassword\n> > to an empty string - the NPE should disappear.\n> > Does this fix the NPE for you?\n> No, unfortunately it doesn't either.\n\nYou need to set the property in system.properties or otherwise ensure that it \nis defined very early on.\n\n> > Alternatively, delete the keystore file (unless you need it).\n> Now this does seem to work; the NPE is no longer showing in the\n> log file, and the problematic test plan is running faster by\n> about the factor 6. On the other hand, I do need the file for\n> other purposes, but for the time being, I can use this workaround.\n\nRather than use the keystore from the default location, use the \nsystem.properties entry:\n\njavax.net.ssl.keyStore\n\nto define the appropriate location, and make sure the password is also defined.\n\n> > The problem also occurs on JMeter 2.2, so the bug has been\n> > lurking for a little while ...\n> If this is the case, then there must be some other difference\n> in the code preventing the NPE to be thrown in version 2.2\n> because I am not getting any stack trace in the 2.2 log file\n> (Or the NPE is sensibly handled or simply not logged).\n\nThat's odd. For it to occur, the following needs to be true:\n* using SSL\n* keystore file is found\n* no password provided\n* non-GUI mode\n\nPerhaps your 2.2 setup provides a password?\n\nWhat happens if you run the SSL test in GUI mode in 2.2?\nDo you get a password prompt?\n\nI do (if there is a keystore but no password defined), and pressing cancel or \nX rather than OK also produces the NPE."}, {"count": 7, "tags": [], "text": "(In reply to comment #6)\n\n> [...]\n> > > The problem also occurs on JMeter 2.2, so the bug has been\n> > > lurking for a little while ...\n> > If this is the case, then there must be some other difference\n> > in the code preventing the NPE to be thrown in version 2.2\n> > because I am not getting any stack trace in the 2.2 log file\n> > (Or the NPE is sensibly handled or simply not logged).\n> That's odd. For it to occur, the following needs to be true:\n> * using SSL\n> * keystore file is found\n> * no password provided\n> * non-GUI mode\n> Perhaps your 2.2 setup provides a password?\n\nYes, that is the case. However, I was providing the password in 2.3\nas well - WITH the exception.\n\n> What happens if you run the SSL test in GUI mode in 2.2?\n> Do you get a password prompt?\n> I do (if there is a keystore but no password defined), and pressing cancel or \n> X rather than OK also produces the NPE.\n\nConfirmed.\n", "attachment_id": null, "id": 105141, "creator": "jens@voss-ahrensburg.de", "time": "2007-07-06T06:28:14Z", "bug_id": 42819, "creation_time": "2007-07-06T06:28:14Z", "is_private": false}, {"count": 8, "text": "(In reply to comment #7)\n> (In reply to comment #6)\n> > [...]\n> > > > The problem also occurs on JMeter 2.2, so the bug has been\n> > > > lurking for a little while ...\n> > > If this is the case, then there must be some other difference\n> > > in the code preventing the NPE to be thrown in version 2.2\n> > > because I am not getting any stack trace in the 2.2 log file\n> > > (Or the NPE is sensibly handled or simply not logged).\n> > That's odd. For it to occur, the following needs to be true:\n> > * using SSL\n> > * keystore file is found\n> > * no password provided\n> > * non-GUI mode\n> > Perhaps your 2.2 setup provides a password?\n> Yes, that is the case. However, I was providing the password in 2.3\n> as well - WITH the exception.\n\nHow did you provide the password?\nIt no longer works in jmeter.properties - it has to be defined in \nsystem.properties or on the command-line.\n\n> > What happens if you run the SSL test in GUI mode in 2.2?\n> > Do you get a password prompt?\n> > I do (if there is a keystore but no password defined), and pressing cancel \nor \n> > X rather than OK also produces the NPE.\n> Confirmed.\n\nOK", "bug_id": 42819, "is_private": false, "id": 105143, "time": "2007-07-06T07:26:03Z", "creator": "sebb@apache.org", "creation_time": "2007-07-06T07:26:03Z", "tags": [], "attachment_id": null}, {"count": 9, "tags": [], "text": "The code has been fixed to avoid the NPE - revision 554102", "attachment_id": null, "id": 105176, "creator": "sebb@apache.org", "time": "2007-07-07T12:19:03Z", "bug_id": 42819, "creation_time": "2007-07-07T12:19:03Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 42819, "attachment_id": null, "id": 105196, "time": "2007-07-09T00:04:33Z", "creator": "jens@voss-ahrensburg.de", "creation_time": "2007-07-09T00:04:33Z", "is_private": false, "text": "(In reply to comment #8)\n\n> [...]\n> How did you provide the password?\n> It no longer works in jmeter.properties - it has to be defined in \n> system.properties or on the command-line.\n\nAhhh! Now who would have thought of that!\n\nOf course I did provide it via the jmeter.properties file - if I\nchange that to specification on the command line, it works without\nNPE and without lag.\n\nI think this change in behaviour should be worth a remark in the\nchanges.html file."}, {"count": 11, "text": "Good point.\n\nIt has now been added to the changes file, but I need to make it more obvious.\n\nIt was already mentioned in jmeter.properties, but I agree that is not enough.\n\nThanks for confirming that the problem has gone.", "creator": "sebb@apache.org", "is_private": false, "id": 105203, "time": "2007-07-09T04:01:24Z", "bug_id": 42819, "creation_time": "2007-07-09T04:01:24Z", "tags": [], "attachment_id": null}]