[{"count": 0, "tags": [], "creator": "hourihanep@yahoo.co.uk", "text": "The optional task PropertyFile currently loads a regular java properties file, \nusing java.util.Properties, makes changes according to the build script's \ninstructions, and writes the properties out again. Since it uses a \njava.util.Properties object for this purpose, all comments and layout are \nlost. The task could be modified to retain the layout and comments in the \noriginal properties file.", "id": 80720, "time": "2005-10-03T21:55:51Z", "bug_id": 36901, "creation_time": "2005-10-03T21:55:51Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 36901, "attachment_id": 16575, "id": 80721, "time": "2005-10-03T21:58:59Z", "creator": "hourihanep@yahoo.co.uk", "creation_time": "2005-10-03T21:58:59Z", "is_private": false, "text": "Created attachment 16575\npatch for changes to PropertyFile.java and associated html docs"}, {"count": 2, "tags": [], "creator": "hourihanep@yahoo.co.uk", "text": "Created attachment 16576\nsubclass of java.util.Propeties that retains layout of input stream", "id": 80722, "time": "2005-10-03T22:00:32Z", "bug_id": 36901, "creation_time": "2005-10-03T22:00:32Z", "is_private": false, "attachment_id": 16576}, {"count": 3, "tags": [], "text": "Created attachment 16577\nunit tests for LayoutPreservingProperties", "is_private": false, "id": 80723, "creator": "hourihanep@yahoo.co.uk", "time": "2005-10-03T22:01:34Z", "bug_id": 36901, "creation_time": "2005-10-03T22:01:34Z", "attachment_id": 16577}, {"count": 4, "tags": [], "bug_id": 36901, "attachment_id": 16578, "id": 80724, "time": "2005-10-03T22:02:32Z", "creator": "hourihanep@yahoo.co.uk", "creation_time": "2005-10-03T22:02:32Z", "is_private": false, "text": "Created attachment 16578\nsimple.properties (for unit tests)"}, {"count": 5, "tags": [], "creator": "hourihanep@yahoo.co.uk", "attachment_id": 16579, "id": 80725, "time": "2005-10-03T22:03:17Z", "bug_id": 36901, "creation_time": "2005-10-03T22:03:17Z", "is_private": false, "text": "Created attachment 16579\nunusual.properties (for unit tests)"}, {"count": 6, "tags": [], "creator": "hourihanep@yahoo.co.uk", "is_private": false, "text": "I posted the following to dev@ant.apache.org, not realising that\nthe mailing list normally strip attachments and this may not have\nbeen the best channel to go through. I was advised to create an\nenhancement here instead, and submit the material that way.\n\n- - - - - -\n\nHi folks,\n\nA little while ago I posted that I had code to grant\nwhich would allow the PropertyFile task to retain the\nlayout of the properties file that it was editing\n(mail subject was also \"enhancement for PropertyFile,\nhave a patch\").\n\nI was busy for a while, so didn't get around to\nposting the changes, but here they are. There are\nchanges to two files (java source for the task, and\nthe associated documentation), and a few associated\nand test classes.\n\nThe changes listed below are contained in the patch\nfile. The other files are attached individually.\n\nAny feedback or comments welcome. This is my first\nsubmission, so I hope I am doing this right. Feel free\nto point it out if I am not.\n\nChanges:\n========\n\nsrc/main/org/apache/tools/ant/taskdefs/optional/PropertyFile.java\n\tThe task now makes use of the\nLayoutPreservingProperties (see below). Also, a new\nattribute allows the user to select using a regular\njava.util.Properties file instead, if they so choose.\n\ndocs/manual/OptionalTasks/propertyfile.html\n\tDocumentation changes to follow the task changes.\n\nNew files:\n==========\n\nsrc/main/org/apache/tools/ant/util/LayoutPreservingProperties.java\n\tA subclass of java.util.Properties that preserves the\nlayout of the input stream(s) from which properties\nwere loaded (if applicable)\n\t\nsrc/testcases/org/apache/tools/ant/util/LayoutPreservingPropertiesTest.java\n\tUnit tests for the new class.\n\nsrc/etc/testcases/util/simple.properties\nsrc/etc/testcases/util/unusual.properties\n\tTest data for the unit tests.\n", "id": 80726, "time": "2005-10-03T22:06:10Z", "bug_id": 36901, "creation_time": "2005-10-03T22:06:10Z", "attachment_id": null}, {"count": 7, "attachment_id": null, "bug_id": 36901, "is_private": false, "id": 87533, "time": "2006-04-03T15:34:06Z", "creator": "mbenson@apache.org", "creation_time": "2006-04-03T15:34:06Z", "tags": [], "text": "hmm... why RESOLVED FIXED?  I don't recall anyone having applied this patch...\n(I could have missed it though)."}, {"count": 8, "attachment_id": null, "bug_id": 36901, "text": "(In reply to comment #7)\n> hmm... why RESOLVED FIXED?  I don't recall anyone having applied this \npatch...\n> (I could have missed it though).\n\nThis is my misunderstanding of the status/resolution fields. I had looked at \nthe bug recently, and noticed that I had not moved it on from 'new'. I moved \nit on to 'resolved' to communicate that the patch is complete. I did not mean \nto suggest that it has been applied.\n\nI'm guessing that the correct action then is to 'reopen' it, which I have now \ndone.\n\nSorry about this.\n\n", "id": 87539, "time": "2006-04-03T19:29:10Z", "creator": "hourihanep@yahoo.co.uk", "creation_time": "2006-04-03T19:29:10Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "creator": "mbenson@apache.org", "is_private": false, "text": "Not a problem... it's your report, so it only hurts you if it gets lost... ;)", "id": 87542, "time": "2006-04-03T20:01:16Z", "bug_id": 36901, "creation_time": "2006-04-03T20:01:16Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "jglick@apache.org", "text": "FYI: there is a mature implementation of formatting-safe *.properties writing:\n\nhttp://hg.netbeans.org/main/raw-file/tip/project.ant/src/org/netbeans/spi/project/support/ant/EditableProperties.java\n\nUnfortunately it is available under either CDDL or GPL but not APL. Not sure if it would be useful in any case.", "id": 119214, "time": "2008-07-31T16:43:52Z", "bug_id": 36901, "creation_time": "2008-07-31T16:43:52Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "creator": "foamdino@gmail.com", "text": "Just committed in svn trunk (sorry for the delay).\n\nThanks,\nKev", "id": 119955, "time": "2008-08-20T11:15:14Z", "bug_id": 36901, "creation_time": "2008-08-20T11:15:14Z", "is_private": false, "attachment_id": null}]