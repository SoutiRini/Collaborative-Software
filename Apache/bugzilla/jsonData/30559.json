[{"count": 0, "tags": [], "text": "When building additional Apache modules, it would be very useful if 'apxs'\ncould report the value of 'datadir' to the caller.\nCurrently our multi-platform automated build system has to hardcode this on\na per-platform basis.", "is_private": false, "bug_id": 30559, "id": 61752, "time": "2004-08-10T15:00:35Z", "creator": "andrew.benham@thus.net", "creation_time": "2004-08-10T15:00:35Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 30559, "attachment_id": null, "id": 61762, "time": "2004-08-10T16:48:35Z", "creator": "chip@force-elite.com", "creation_time": "2004-08-10T16:48:35Z", "is_private": false, "text": "You mean the DocumentRoot?\n\nThat does not make it more portable really -- most people will change the\nDocument Root, and you can have multiple doc roots(vhosts..)."}, {"count": 2, "tags": [], "creator": "chip@force-elite.com", "attachment_id": null, "id": 63701, "time": "2004-09-17T04:44:09Z", "bug_id": 30559, "creation_time": "2004-09-17T04:44:09Z", "is_private": false, "text": "Going for a Won't Fix.  This really isn't possible because of local user configs\nand virtual hosts.  Also, APXS currently does not read the configuration file at\nall for this type of info to be available."}, {"count": 3, "tags": [], "text": "I didn't mean DocumentRoot, I meant what the Apache configure script calls\n'datadir'.\n\n./configure --help\n....\n    --datadir=DIR      read-only architecture-independent data [PREFIX/share]\n....\n\n\nSome Apache modules call this \"top_builddir\" in their Makefiles - so the\nmodule's Makefile can do:\n\ninclude ${top_builddir}/build/special.mk\n\n\nI can script the automatic build of such modules:\n\n    INCLUDES=`${APXS} -q INCLUDEDIR`\n\n    $MAKE top_dir=${APACHE2DIR} top_builddir=${DATADIR} INCLUDES=-I${INCLUDES} \n  APXS=${APXS}\n\nbut I have to hard-code DATADIR.\n\nIt struck me that apxs knows exactly where \"datadir\" is - because line 35 reads:\n\n     my $datadir        = get_vars(\"datadir\");\n\nbut there's no switch to report back to the user on its value.\n\nIt would just have saved me hard-coding the value on a per-platform basis.", "is_private": false, "bug_id": 30559, "id": 63725, "time": "2004-09-17T13:59:18Z", "creator": "andrew.benham@thus.net", "creation_time": "2004-09-17T13:59:18Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 30559, "is_private": false, "text": "Andrew, can you propose a patch? If so please attach and reopen.", "id": 71523, "time": "2005-02-25T17:33:45Z", "creator": "sander@temme.net", "creation_time": "2005-02-25T17:33:45Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 30559, "is_private": false, "text": "In retrospect, don't fix this. Although, as per the last line of this text, it\nlooks like it already has been...\n\nSome modules' Makefiles need to find the directory which *contains* the\ndirectory specified by the \"installbuilddir\" configuration variable.\nE.g. if the contents of the \"installbuilddir\" config variable is\n\"/usr/local/share/apache2/build\", then the module's Makefile needs to be told\nabout \"/usr/local/share/apache2\".\n\nBut I'm wrong to suggest that this directory is \"datadir\". It is on many of the\nsuggested config.layouts, but not on all of them. The only 100% correct way of\nfinding the directory is by going up one level from \"installbuilddir\".\n\nAnd it is possible to do \"apxs -q installbuilddir\".\n\nIn fact, it's also possible to do \"apxs -q datadir\" - which is strange, because\nthat was what I was asking for in the ticket....", "id": 71623, "time": "2005-02-28T18:06:57Z", "creator": "andrew.benham@thus.net", "creation_time": "2005-02-28T18:06:57Z", "attachment_id": null}]