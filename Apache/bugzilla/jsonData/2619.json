[{"count": 0, "tags": [], "bug_id": 2619, "attachment_id": null, "is_private": false, "id": 3719, "time": "2001-07-13T10:02:48Z", "creator": "gregm@bea.com", "creation_time": "2001-07-13T10:02:48Z", "text": "Please excuse this if it is a dup.\n\nI'm running with:  1.3 ant\n                   1.3.1 jdk\n                   NT 4.0 SP6 (2 1.0 ghz cpu's)\n\nWhat I think is happening is the jar command before the ejbc command\nstill has the c:\\weblogic\\src_131sj\\tempdir\\META-INF\\MANIFEST.MF\nfile opened.  Here's a snipet of the ant script:\n\n  <jar jarfile=\"${tempdir}/PRE_${bean}.jar\"\n       basedir=\"${tempdir}\" includes=\"META-INF/**, weblogic/**\" />\n  <echo message=\"building ${deploymentdir}/${bean}.jar\"/>\n  <java classname=\"weblogic.ejbc\">\n     <sysproperty key=\"bea.home\" value=\"${src} \"/>\n     <arg line=\"-noexit -keepgenerated -compiler ${JAVACOMPILER}\"/>\n     <arg line=\"${tempdir}/PRE_${bean}.jar ${tempdir}\"/>\n  </java>\n\nI can only reproduce on a 2 cpu (1.0 ghz each) NT box, I can't for example\nreproduce on a single 800mhz NT box.  And even on the 2 cpu box it happens\nonly every other run.  Here's the error, the error is thrown by the ejbc \ncompiler when it tries to overwrite the manifest file:\n\n      [jar] Building jar: \nC:\\weblogic\\src_131sj\\tempdir\\PRE_RobinHomeRobinIdemStateless.jar\n      [jar] Warning: selected jar files include a META-INF/MANIFEST.MF which \nwill be ignored (please use manifest attribute to jar task)\n     \nBUILD FAILED\n\nC:\\weblogic\\dev\\src\\tools\\build-cluster.xml:432: \nweblogic.utils.compiler.ToolFailureException: Failed to create working \ndirectory: java.io.IOException: Unable to overwrite file: \nc:\\weblogic\\src_131sj\\tempdir\\META-INF\\MANIFEST.MF\n--- Nested Exception ---\nweblogic.utils.compiler.ToolFailureException: Failed to create working \ndirectory: java.io.IOException: Unable to overwrite file: \nc:\\weblogic\\src_131sj\\tempdir\\META-INF\\MANIFEST.MF\n\tat weblogic.ejbc20.runBody(ejbc20.java:345)\n\tat weblogic.utils.compiler.Tool.run(Tool.java:79)\n\tat weblogic.ejbc.main(ejbc.java:20)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.apache.tools.ant.taskdefs.ExecuteJava.execute\n(ExecuteJava.java:127)\n\tat org.apache.tools.ant.taskdefs.Java.run(Java.java:260)\n\tat org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:123)\n\tat org.apache.tools.ant.taskdefs.Java.execute(Java.java:87)\n\tat org.apache.tools.ant.Target.execute(Target.java:153)\n\tat org.apache.tools.ant.Project.runTarget(Project.java:898)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:536)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:213)\n\tat org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:103)\n\tat org.apache.tools.ant.Target.execute(Target.java:153)\n\tat org.apache.tools.ant.Project.runTarget(Project.java:898)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:536)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:213)\n\tat org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:103)\n\tat org.apache.tools.ant.Target.execute(Target.java:153)\n\tat org.apache.tools.ant.Project.runTarget(Project.java:898)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:536)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:213)\n\tat org.apache.tools.ant.Target.execute(Target.java:153)\n\tat org.apache.tools.ant.Project.runTarget(Project.java:898)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:536)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:213)\n\tat org.apache.tools.ant.Target.execute(Target.java:153)\n\tat org.apache.tools.ant.Project.runTarget(Project.java:898)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:536)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:510)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:421)\n\tat org.apache.tools.ant.Main.main(Main.java:149)\n\nthanks for any help\nGreg"}, {"count": 1, "attachment_id": null, "creator": "conor@apache.org", "text": "I had a look though the code and it appeared that all the files get closed \ncorrectly. It could be an OS level issue. Can you please try a few things\n\n1. Upgrade to the latest nightly version of Ant and see if the problem persists\n\n2. Try forking the <java> call (fork=\"yes\") to see if that makes a difference.\n\n3. Give us a debug trace of the failure. I don't mean the stack trace but the \noutput of ant -debug around the <jar> call and the <java> call.\n\nOh, and when will you document the -noexit option of ejbc :-)", "id": 3769, "time": "2001-07-17T06:25:41Z", "bug_id": 2619, "creation_time": "2001-07-17T06:25:41Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 2619, "text": "Did Conor's comment solve the issue for you?  Let us know if we can close this\ncase.\n", "id": 6978, "time": "2001-10-22T08:07:44Z", "creator": "umagesh@rediffmail.com", "creation_time": "2001-10-22T08:07:44Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "gregm@bea.com", "is_private": false, "id": 6980, "time": "2001-10-22T08:14:36Z", "bug_id": 2619, "creation_time": "2001-10-22T08:14:36Z", "tags": [], "text": "Sure, close it.  Not sure what fixed the problem.\nthanks\nGreg"}]