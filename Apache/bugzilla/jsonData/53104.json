[{"count": 0, "tags": [], "creator": "jralbert@uvic.ca", "attachment_id": null, "id": 158186, "time": "2012-04-18T23:43:17Z", "bug_id": 53104, "creation_time": "2012-04-18T23:43:17Z", "is_private": false, "text": "When using the '%{xyz}C' syntax to include the content of a specific named cookie in a LogFormat definition, log lines describing requests in which the cookie's content contains an '=' (equals sign) character will truncate the printed cookie content at the first '=' character. A conversation with sfritsch on #httpd-dev suggests that this may have cropped up as an unintended consequence of changes that were made to resolve PR 28037. Details follow; please let me know if there's anything else I can do to help clarify this issue.\n\n------------------\nSteps to Reproduce\n------------------\n\nhttpd.conf (excerpt):\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\" \\\"__utma=%{__utma}C; __utmb=%{__utmb}C; __utmc=%{__utmc}C; __utmk=%{__utmk}C; __utmx=%{__utmx}C; __utmz=%{__utmz}C;\\\"\" cookie_combined\n\nRequest Cookie header (excerpt):\n__utmz='153100668.1330388151.35.11.utmccn=(referral)|utmcsr=somedomain.net|utmcct=/src/login.php|utmcmd=referral'\n\n--------------\nActual Results\n--------------\n\nAccess log (excerpt):\n10.0.0.1 - - [18/Apr/2012:10:12:56 -0700] \"GET / HTTP/1.1\" 200 32440 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1096.1 Safari/536.6\" \"__utma=153100668.1659089300.1323803112.1334623621.1334626164.51; __utmb=-; __utmc=-; __utmk=-; __utmx=-; __utmz=153100668.1330388151.35.11.utmccn;\"\n\n----------------\nExpected Results\n----------------\n\nAccess log (excerpt):\n10.0.0.1 - - [18/Apr/2012:10:12:56 -0700] \"GET / HTTP/1.1\" 200 32440 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/536.6 (KHTML, like Gecko) Chrome/20.0.1096.1 Safari/536.6\" \"__utma=153100668.1659089300.1323803112.1334623621.1334626164.51; __utmb=-; __utmc=-; __utmk=-; __utmx=-; __utmz=153100668.1330388151.35.11.utmccn=(referral)|utmcsr=somedomain.net|utmcct=/src/login.php|utmcmd=referral;\""}, {"count": 1, "tags": [], "text": "Created attachment 28642\nmod_log_config cookie logging 2.2 patch\n\nThe attached patch fixes it for me.  Can you give it a try?", "is_private": false, "id": 158205, "creator": "gregames@apache.org", "time": "2012-04-19T17:41:50Z", "bug_id": 53104, "creation_time": "2012-04-19T17:41:50Z", "attachment_id": 28642}, {"count": 2, "attachment_id": null, "bug_id": 53104, "is_private": false, "id": 158208, "time": "2012-04-19T22:05:04Z", "creator": "jralbert@uvic.ca", "creation_time": "2012-04-19T22:05:04Z", "tags": [], "text": "Yes, that patch appears to solve the issue in my test environment.\n\n(In reply to comment #1)\n> Created attachment 28642 [details]\n> mod_log_config cookie logging 2.2 patch\n> \n> The attached patch fixes it for me.  Can you give it a try?"}, {"count": 3, "tags": [], "creator": "gregames@apache.org", "attachment_id": null, "text": "committed to httpd trunk - r1328133", "id": 158209, "time": "2012-04-19T22:22:10Z", "bug_id": 53104, "creation_time": "2012-04-19T22:22:10Z", "is_private": false}, {"count": 4, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "id": 161588, "time": "2012-08-21T16:26:44Z", "bug_id": 53104, "creation_time": "2012-08-21T16:26:44Z", "is_private": false, "text": "Applied to 2.4.x in r1359690.\nReleased with 2.4.3.\nApplied to 2.2.x in r1374538."}]