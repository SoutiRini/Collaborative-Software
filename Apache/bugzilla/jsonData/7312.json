[{"count": 0, "tags": [], "bug_id": 7312, "is_private": false, "id": 12119, "attachment_id": null, "creator": "vojta@idoox.com", "creation_time": "2002-03-21T10:10:34Z", "time": "2002-03-21T10:10:34Z", "text": "file B.java:\n\npackage pkg;\n\npublic class B {\n\n    public static String b(String s) {\n        return s;\n    }\n}\n\n\nfile C.java:\n\npackage pkg;\n\npublic class C {\n\n    public static void main(String[] argv) {\n        System.out.println(\"Hello\");\n    }\n}\n\n\nclass My {\n\n    String nic(String s) {\n        return B.b(s);\n    }\n}\n\nfile build.xml:\n\n<project name=\"p\" default=\"p\">\n  <target name=\"p\">\n    <depend cache=\"deps\" closure=\"yes\"\n            destdir=\"classes\"\n            srcdir=\"src\"\n            />\n    <javac srcdir=\"src\"\n           destdir=\"classes\">\n    </javac>\n  </target>\n</project>\n\n\nIf I change B.java depend task remove My.class file but javac do not compile it\nagain."}, {"count": 1, "tags": [], "bug_id": 7312, "attachment_id": null, "id": 12741, "time": "2002-04-03T12:38:21Z", "creator": "bodewig@apache.org", "creation_time": "2002-04-03T12:38:21Z", "is_private": false, "text": "It is a problem with <depend> as it should remove C.class as well.\n\nChanging the subject."}, {"count": 2, "tags": [], "text": "It is a problem with <depend> but depend cannot remove C.java because, in\ngeneral, there may be nothing which relates My.class to C.java. \n\nIt affects <javac> since both tasks use the same mechansim to associate a class\nfile with its source file - the filename. So <depend> will delete a class which\n <javac> will not re-compile since it does not see it as \"missing\".\n\nI have added a message to <depend> which will warn when it discovers a class\nfile which is out of date but for which it cannot determine the source file. In\nthis case the class file will not be deleted. \n\nPlease try the next nightly build.\n\nI am considering to extensions to <depend>. One would allow you to specify the\nsource file that corresponds to a non-public class. The other would allow you to\nset up explicit dependencies to cope with dependencies which the compiler has\noptimised away. Thoughts?\n\nIt also may be possible to recover the source file info when debugging info is\nincluded in the class file.", "is_private": false, "bug_id": 7312, "id": 13088, "time": "2002-04-09T13:25:20Z", "creator": "conor@apache.org", "creation_time": "2002-04-09T13:25:20Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "Re: your extension ideas for <depend>\n\nThis is what <dependset> is for, no need to duplicate it IMHO.", "id": 13091, "time": "2002-04-09T13:51:56Z", "bug_id": 7312, "creation_time": "2002-04-09T13:51:56Z", "is_private": false}, {"count": 4, "tags": [], "text": "Created attachment 2175\nfix that gets the SourceFile attribute from the classfile", "attachment_id": 2175, "id": 18499, "creator": "pkrause@soundbite.com", "time": "2002-06-24T20:57:20Z", "bug_id": 7312, "creation_time": "2002-06-24T20:57:20Z", "is_private": false}]