[{"count": 0, "tags": [], "creator": "vmassol@apache.org", "attachment_id": null, "text": "Hi,\n\nIf I put log4j.jar (I'm using version 1.2 alpha 5) in my webapp WEB-INF/lib \ndirectory (which I need for my application), I get the error below with Tomcat \n4.1dev builds of 20020214, 20020223 and 2002028 (I've only tried with these). \nIt works with Tomcat 4.0.2.\n\nIf I don't log4j.jar at all in WEB-INF/lib, it works.\n\nI suspect this is an issue due to the introduction of commons-logging.\n\n2002-02-28 18:51:15 HttpConnector Opening server socket on all host IP \naddresses\n2002-02-28 18:51:15 HttpConnector[8080] Sarting background thread\n2002-02-28 18:51:15 HostConfig[localhost]: Deploying web application archive \ntest.war\n2002-02-28 18:51:15 StandardHost[localhost]: Installing web application at \ncontext path /test from URL jar:file:E:\\Dev\\jakarta-cactus\\target\\servlet23\n\\dist\\sample\\target\\test\\tomcat40\\webapps\\test.war!/\n2002-02-28 18:51:15 HttpProcessor[8080][0] Starting background thread\n2002-02-28 18:51:15 HttpProcessor[8080][1] Starting background thread\n2002-02-28 18:51:15 HttpProcessor[8080][2] Starting background thread\n2002-02-28 18:51:15 HttpProcessor[8080][3] Starting background thread\n2002-02-28 18:51:15 HttpProcessor[8080][4] Starting background thread\n2002-02-28 18:51:16 StandardHost[localhost]: MAPPING configuration error for \nrequest URI \n2002-02-28 18:51:16 StandardContext[/test]: Cannot find message associated \nwith key standardContext.namingInitFailed\n2002-02-28 18:51:16 WebappLoader[/test]: Deploying class repositories to work \ndirectory E:\\Dev\\jakarta-cactus\\target\\servlet23\n\\dist\\sample\\target\\test\\tomcat40\\work\\localhost\\test\n2002-02-28 18:51:16 WebappLoader[/test]: Deploy class files /WEB-INF/classes \nto E:\\Dev\\jakarta-cactus\\target\\servlet23\\dist\\sample\\target\\test\\tomcat40\n\\webapps\\test\\WEB-INF\\classes\n2002-02-28 18:51:16 WebappLoader[/test]: Deploy JAR /WEB-INF/lib/aspectjrt.jar \nto E:\\Dev\\jakarta-cactus\\target\\servlet23\\dist\\sample\\target\\test\\tomcat40\n\\webapps\\test\\WEB-INF\\lib\\aspectjrt.jar\n2002-02-28 18:51:16 WebappLoader[/test]: Deploy JAR /WEB-INF/lib/cactus.jar to \nE:\\Dev\\jakarta-cactus\\target\\servlet23\\dist\\sample\\target\\test\\tomcat40\n\\webapps\\test\\WEB-INF\\lib\\cactus.jar\n2002-02-28 18:51:16 WebappLoader[/test]: Deploy JAR /WEB-\nINF/lib/httpclient.jar to E:\\Dev\\jakarta-cactus\\target\\servlet23\n\\dist\\sample\\target\\test\\tomcat40\\webapps\\test\\WEB-INF\\lib\\httpclient.jar\n2002-02-28 18:51:16 WebappLoader[/test]: Deploy JAR /WEB-INF/lib/junit.jar to \nE:\\Dev\\jakarta-cactus\\target\\servlet23\\dist\\sample\\target\\test\\tomcat40\n\\webapps\\test\\WEB-INF\\lib\\junit.jar\n2002-02-28 18:51:16 WebappLoader[/test]: Deploy JAR /WEB-INF/lib/log4j.jar to \nE:\\Dev\\jakarta-cactus\\target\\servlet23\\dist\\sample\\target\\test\\tomcat40\n\\webapps\\test\\WEB-INF\\lib\\log4j.jar\n2002-02-28 18:51:16 StandardManager[/test]: Seeding random number generator \nclass java.security.SecureRandom\n2002-02-28 18:51:16 StandardManager[/test]: Seeding of random number generator \nhas been completed\n2002-02-28 18:51:16 ContextConfig[/test] Parse error in default web.xml\norg.apache.commons.logging.LogConfigurationException: \njava.lang.reflect.InvocationTargetException\n\tat org.apache.commons.logging.impl.LogFactoryImpl.newInstance\n(LogFactoryImpl.java:464)\n\tat org.apache.commons.logging.impl.LogFactoryImpl.getInstance\n(LogFactoryImpl.java:273)\n\tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:338)\n\tat org.apache.commons.digester.Digester.<init>(Digester.java:309)\n\tat org.apache.catalina.startup.ContextConfig.createWebDigester(Unknown \nSource)\n\tat org.apache.catalina.startup.ContextConfig.defaultConfig(Unknown \nSource)\n\tat org.apache.catalina.startup.ContextConfig.start(Unknown Source)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(Unknown \nSource)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent\n(Unknown Source)\n\nAny idea ?\n\nThanks\n-Vincent", "id": 11319, "time": "2002-02-28T19:23:55Z", "bug_id": 6764, "creation_time": "2002-02-28T19:23:55Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "I tried putting log4j in a webapp some time ago, and it appeared to work fine. \nMaybe there was some problem in the earlier versions of commons-logging.", "id": 13389, "time": "2002-04-12T15:36:24Z", "bug_id": 6764, "creation_time": "2002-04-12T15:36:24Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 6764, "is_private": false, "text": "Getting this error while trying to execute test cases through cactus.\n\norg.apache.commons.logging.LogConfigurationException: \njava.lang.ClassCastException: org.apache.commons.logging.impl.LogFactoryImpl\n\tat org.apache.commons.logging.LogFactory.newFactory\n(LogFactory.java:506)\n\tat org.apache.commons.logging.LogFactory.getFactory\n(LogFactory.java:350)\n\tat org.apache.commons.logging.LogFactory.getLog(LogFactory.java:381)\n\tat org.apache.cactus.server.runner.ServletTestRunner.around91_doGet\n(ServletTestRunner.java;org/apache/cactus/util/log/LogAspect.aj(1k):1142)\n\tat org.apache.cactus.server.runner.ServletTestRunner.doGet\n(ServletTestRunner.java;org/apache/cactus/util/log/LogAspect.aj(1k):101)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1012)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1107)\n\tat java.lang.Thread.run(Thread.java:536)\nCaused by: java.lang.ClassCastException: \norg.apache.commons.logging.impl.LogFactoryImpl\n\tat org.apache.commons.logging.LogFactory.newFactory\n(LogFactory.java:504)\n\t... 36 more\n\n", "id": 23345, "time": "2002-09-25T06:39:01Z", "creator": "vidyad@bsil.com", "creation_time": "2002-09-25T06:39:01Z", "attachment_id": null}]