[{"count": 0, "attachment_id": null, "bug_id": 36889, "text": "Changing the text content of a flowPara causes an NPE when relaying out the text.\n\nSteps to reproduce:\n1. Open http://mcc.id.au/temp/2005/flowtext-change-bug.svg .\n2. Click the black rect to change the flowPara's text content.\n\nWhen the text is relaid out, the new ACI doesn't have the LINE_HEIGHT attribute\nset, which causes the NPE.  The attribute map returned by the getAttributeMap\ncall in SVGFlowRootBridge.fillAttributedStringBuffer does contain the attribute.\n But by the end of the function, the AttributedStringBuffer does not contain the\nattribute.  I checked this with:\n\n  System.err.println(\"asb has LINE_HEIGHT \" +\nasb.toAttributedString().getIterator().getAttribute(org.apache.batik\n.gvt.text.GVTAttributedCharacterIterator.TextAttribute.LINE_HEIGHT));\n\nWhen the text is laid out the first time, on document load, this line does\nreport the expected line height.", "id": 80675, "time": "2005-10-02T05:30:13Z", "creator": "cam@apache.org", "creation_time": "2005-10-02T05:30:13Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 36889, "is_private": false, "text": "In fact, the problem stems from AbstractNode.setTextContent removing the text\nnode before adding a new one, resulting in a time when the flowPara has no\nchildren.  This seems to be handled incorrectly by the flow text code.", "id": 80679, "time": "2005-10-02T13:55:32Z", "creator": "cam@apache.org", "creation_time": "2005-10-02T13:55:32Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 36889, "is_private": false, "text": "This bug is believed fixed in SVN (in trunk not SVG11).", "id": 81239, "time": "2005-10-17T14:38:35Z", "creator": "deweese@apache.org", "creation_time": "2005-10-17T14:38:35Z", "attachment_id": null}]