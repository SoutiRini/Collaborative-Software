[{"count": 0, "tags": [], "bug_id": 35775, "text": "GET links in form of: \n\nhttp://www.host.net/help/search.html?action=search&query=+Verkn%C3%BCpfung\n\nwill bring a parameter value for key \"query\": Verkn\\u20\\uc3pfung\n\nAn UrlDecoder should decode the encoded url parts \\u20\\uc3 to '\u00fc' on the server\nside. java.net.UrlDecoder does this correctly. \n\nAs soon as the first parameter is requested from a\nCoyoteRequestFacade->CoyoteRequest->org.apache.coyote.Request, \nthe internal Parameters instance of the Request instance changes: It's internal\nmember paramHashStringArray is filled with the parameters that have been\nmodified in this wrong way: \"%3C\" is interpreted to be a \"unicode literal\": the\nleading '%' is removed and the trailing parts are treated like a literal for a\ncode point and transformed (here: LATIN CAPITAL LETTER A WITH TILDE). \n\nPerhaps the org.apache.tomcat.util.buf.UDecoder is the reason? Why not taking\nthe std. java solution?", "id": 77376, "time": "2005-07-18T12:55:49Z", "creator": "a.westermann@alkacon.com", "creation_time": "2005-07-18T12:55:49Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "oliver@siegmar.de", "attachment_id": null, "text": "Problem reproduced with Tomcat 5.5.9 on Linux.", "id": 77379, "time": "2005-07-18T14:08:46Z", "bug_id": 35775, "creation_time": "2005-07-18T14:08:46Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 35775, "attachment_id": null, "is_private": false, "id": 77394, "time": "2005-07-18T18:48:12Z", "creator": "a.westermann@alkacon.com", "creation_time": "2005-07-18T18:48:12Z", "text": "This bug will not be a problem, if all url are encoded and decoded by the tomcat\nencoders / decoders. But if some urls are encoded by some function that works\nlike the java.net.UrlEncoder with a charset argument, it will fail whenever the\ncharset for encoding was not ISO-8859-1, windows-1252,... (more not verified\nyet) but a multi-byte charset (MBCs). \n\nThe following method may be added to a junit TestCase (import\norg.apache.util.buf.* from the <tomcat>/server/lib/tomcat-util.jar). \n\n\n    /**\n     * Tests decoding german \"umlaute\" with apache tomcat UDecoder.<p>\n     *\n     */\n    public void testDecodeUmlautsTomcat() {\n\n        String param = \"%C3%BC\"; // \u00dc\n        UDecoder decoder = new UDecoder();\n        String decoded = decoder.convert(param);\n        assertEquals(\"\u00fc\", decoded);\n    }\n\n    "}, {"count": 3, "tags": [], "bug_id": 35775, "attachment_id": null, "is_private": false, "id": 77397, "time": "2005-07-18T19:17:09Z", "creator": "remm@apache.org", "creation_time": "2005-07-18T19:17:09Z", "text": "http://jakarta.apache.org/tomcat/faq/misc.html#tomcat5CharEncoding\n\n*** This bug has been marked as a duplicate of 34662 ***"}]