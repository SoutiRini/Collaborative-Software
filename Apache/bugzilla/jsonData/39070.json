[{"attachment_id": null, "tags": [], "bug_id": 39070, "is_private": false, "count": 0, "id": 87128, "time": "2006-03-23T02:09:43Z", "creator": "jyonosh@fcg.com", "creation_time": "2006-03-23T02:09:43Z", "text": "Adding \"/Type /Info\" as an info dictionary entry produces an entry in the info\ndict whose value is a name(pdf data type). This is invalid (as names are not\nallows as values within the info dict), and causes some PDF Libraries the throw\nerrors when reading the information. \n\nIn my case i have an application using the Adobe PDF Library 7.0 that throws an\nerror(\"Could not create internal representation of XMP metadata\") when calling\nPDDocGetXAPMetadataProperty. When i remove the invalid entry from the info dict,\neverything works properly.\n\nI did look in the svn repository and it appears that the Trunk code should still\nhave the same issue.\n\nThe following is what i updated in 0.20.5 to work around the issue\n\nFrom org.apache.fop.pdf.PDFInfo\n\n    public byte[] toPDF() {\n        String p = this.number + \" \" + this.generation\n                   + \" obj\\n<< /Type /Info\\n/Producer (\" + this.producer\n                   + \") >>\\nendobj\\n\";\n        try {\n            return p.getBytes(PDFDocument.ENCODING);\n        } catch (UnsupportedEncodingException ue) {\n            return p.getBytes();\n        }       \n    }\n\nshould be changed to(just removing the \"/Type /Info\")\n    public byte[] toPDF() {\n        String p = this.number + \" \" + this.generation\n                   + \" obj\\n<< \\n/Producer (\" + this.producer\n                   + \") >>\\nendobj\\n\";\n        try {\n            return p.getBytes(PDFDocument.ENCODING);\n        } catch (UnsupportedEncodingException ue) {\n            return p.getBytes();\n        }       \n    }\n\nThanks,\njohn"}, {"attachment_id": null, "tags": [], "bug_id": 39070, "text": "Bug fixed in FOP Trunk: http://svn.apache.org/viewcvs?rev=388092&view=rev\nThank you, John! You are right, of course. Surprising this bug went undetected\nfor so long.", "count": 1, "id": 87132, "time": "2006-03-23T07:59:25Z", "creator": "jeremias@apache.org", "creation_time": "2006-03-23T07:59:25Z", "is_private": false}, {"count": 2, "tags": [], "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "is_private": false, "bug_id": 39070, "id": 155678, "time": "2012-04-01T06:35:22Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:35:22Z", "attachment_id": null}]