[{"count": 0, "attachment_id": null, "creator": "carnold@houston.rr.com", "text": "This fragment modifies the writers Vector while walking an enumeration on the Vector:\n\n       if (writer.checkError()) {\n          // The client has closed the connection, remove it from our list:\n          connections.remove(sock);\n          writers.remove(writer);\n        }\n\nIf it was an JDK 1.2 iteration, the call to next might have thrown an exception.  I think the behavior \nis undefined for Enumeration.  Any modification to writers should occur outside the loop, at least \nfor clarity.", "id": 42653, "time": "2003-08-13T05:02:36Z", "bug_id": 22369, "creation_time": "2003-08-13T05:02:36Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 22369, "attachment_id": null, "id": 68725, "time": "2004-12-20T12:39:00Z", "creator": "ceki@apache.org", "creation_time": "2004-12-20T12:39:00Z", "is_private": false, "text": "\nLog4j 1.3 requires JDK 1.2. so enumerations could be replaced by iterators. However, \nin this particular case, I think a simple for(int i = 0; i < writers.size(); i++) \niteration would avoid building an Enumeration object for each event.\n\nIf a connection needs to be removed as a result of a failure, then that could be \ndone outside the loop as you suggested. "}, {"count": 2, "attachment_id": null, "creator": "carnold@apache.org", "is_private": false, "id": 68742, "time": "2004-12-21T02:52:09Z", "bug_id": 22369, "creation_time": "2004-12-21T02:52:09Z", "tags": [], "text": "It appears that the previous code would remove the first socket no matter which writer failed.  I know \nthere are other TelnetAppender bugs in Bugzilla out there and the code doesn't look thread-safe.  \nShould review the whole thing, but this bug should be fixed."}, {"count": 3, "attachment_id": null, "creator": "carnold@houston.rr.com", "text": "Forget the comment about removing the first socket, misread the code.", "id": 68744, "time": "2004-12-21T04:00:16Z", "bug_id": 22369, "creation_time": "2004-12-21T04:00:16Z", "tags": [], "is_private": false}]