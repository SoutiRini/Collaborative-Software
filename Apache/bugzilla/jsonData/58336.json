[{"count": 0, "tags": [], "text": "Created attachment 33070\nReproducing race condition with java and exec\n\nThere is a race condition when using presetdef with parallel.\n\nUsing presetdef to set an environment variable for java/exec tasks used in parallel will sometimes raise\n\"key and value must be specified for environment variables.\"\n\n     [java] key and value must be specified for environment variables.\n     [java] \tat org.apache.tools.ant.types.Environment$Variable.validate(Environment.java:128)\n     [java] \tat org.apache.tools.ant.types.Environment$Variable.getContent(Environment.java:116)\n     [java] \tat org.apache.tools.ant.types.Environment.getVariables(Environment.java:162)\n     [java] \tat org.apache.tools.ant.taskdefs.Java.setupEnvironment(Java.java:835)\n     [java] \tat org.apache.tools.ant.taskdefs.Java.setupExecutable(Java.java:826)\n     [java] \tat org.apache.tools.ant.taskdefs.Java.fork(Java.java:788)\n     [java] \tat org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:214)\n     [java] \tat org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)\n     [java] \tat org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)\n     [java] \tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n     [java] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n     [java] \tat java.lang.reflect.Method.invoke(Method.java:497)\n     [java] \tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n     [java] \tat org.apache.tools.ant.Task.perform(Task.java:348)\n     [java] \tat org.apache.tools.ant.taskdefs.Parallel$TaskRunnable.run(Parallel.java:453)\n     [java] \tat java.lang.Thread.run(Thread.java:745)", "attachment_id": 33070, "id": 184995, "creation_time": "2015-09-07T08:23:18Z", "time": "2015-09-07T08:23:18Z", "creator": "frank.wagner@fr.ibm.com", "bug_id": 58336, "is_private": false}, {"count": 1, "tags": [], "bug_id": 58336, "attachment_id": 33071, "id": 184996, "time": "2015-09-07T08:30:56Z", "creator": "frank.wagner@fr.ibm.com", "creation_time": "2015-09-07T08:30:56Z", "is_private": false, "text": "Created attachment 33071\nA possible fix it is to 'clone' runtime configurables when applying preset."}]