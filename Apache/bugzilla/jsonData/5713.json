[{"count": 0, "tags": [], "text": "Filter.response.getCharacterEncoding() return wrong value\n\nFilter, file CheckEncoding.java :\n\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletContext;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\n\npublic final class CheckEncoding implements Filter \n{\n    public void doFilter(ServletRequest request, ServletResponse response,\n                         FilterChain chain)\n\tthrows ServletException, java.io.IOException\n   {\n\tSystem.out.println(\"Encoding: \"+response.getCharacterEncoding());\n        chain.doFilter(request, response);\n   }\n\n    public void init(FilterConfig filterConfig) \n\tthrows ServletException \n    {}\n    public void destroy() \n    {}\n}\n\nin web.xml\n    <filter>\n        <filter-name>CheckEncoding</filter-name>\n        <filter-class>CheckEncoding</filter-class>\n    </filter>\n    <filter-mapping>\n        <filter-name>CheckEncoding</filter-name>\n        <url-pattern>/encode.jsp</url-pattern>\n    </filter-mapping>\n\nfile encode.jsp:\n<%@page \ncontentType=\"text/html; charset=utf-8\"\nlanguage=\"java\"\n%>\n<%= response.getCharacterEncoding() %>", "attachment_id": null, "id": 9388, "creator": "serg_main@yahoo.com", "time": "2002-01-06T23:59:25Z", "bug_id": 5713, "creation_time": "2002-01-06T23:59:25Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 5713, "is_private": false, "count": 1, "id": 9430, "time": "2002-01-07T14:01:06Z", "creator": "remm@apache.org", "creation_time": "2002-01-07T14:01:06Z", "text": "If I read the code well, it looks like the sys.out would occur before going into\nthe JSP, so the content type would not have been set (or did I miss something ?)."}]