[{"count": 0, "tags": [], "text": "Jar task adds extra lines at the end of MANIFEST.MF files. This leads to\nClassNotFoundException while executing java -jar <jarfile>.jar", "is_private": false, "bug_id": 30601, "id": 61843, "time": "2004-08-11T17:10:41Z", "creator": "viral_kamdar@yahoo.com", "creation_time": "2004-08-11T17:10:41Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 30601, "is_private": false, "text": "Can you attach an example of such a jar (or the manifest file)? I'm not sure\nwhat these extra lines are and it is not clear to me how they could cause any\nproblems in any case.", "id": 61891, "time": "2004-08-12T14:54:58Z", "creator": "conor@apache.org", "creation_time": "2004-08-12T14:54:58Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "chris@xoom.com", "attachment_id": null, "is_private": false, "id": 62501, "time": "2004-08-25T18:42:44Z", "bug_id": 30601, "creation_time": "2004-08-25T18:42:44Z", "text": "I'm having a similiar problem where the \"Class-Path\" line within MANIFEST.MF is\nbeing \"wrapped\" by the <Jar> task onto multiple lines at a 70 character line\nbreak.   My goal has been to include a series of jars within my jar for easy\ndistribution. \n\n********after unpacking my jar I see :\nManifest-Version: 1.0\nAnt-Version: Apache Ant 1.6.2\nCreated-By: 1.4.2_04-b05 (Sun Microsystems Inc.)\nMain-Class: com.xoom.config.XoomEnv\nClass-Path: activation-1.0.2.jar commons-httpclient-2.0.jar commons-ne\n t-1.2.2.jar jython-2.1.jar lucene-1.4-rc3.jar mysql-connector-java-3.\n 0.14-production-bin.jar BlowfishJ.jar commons-logging.jar jline.jar .\n /log4j-1.2.8.jar mail-1.3.1.jar xmlrpc-1.2-b1.jar\n\n\n\n*********  but before packing the jar.. the MANIFEST.MF reads:\nManifest-Version: 1.0\nAnt-Version: Apache Ant 1.6.2\nCreated-By: 1.4.2_04-b05 (Sun Microsystems Inc.)\nMain-Class: com.xoom.config.XoomEnv\nClass-Path: activation-1.0.2.jar commons-httpclient-2.0.jar\ncommons-net-1.2.2.jar jython-2.1.jar lucene-1.4-rc3.jar\nmysql-connector-java-3.0.14-production-bin.jar BlowfishJ.jar commons-logging.jar\njline.jar ./log4j-1.2.8.jar mail-1.3.1.jar xmlrpc-1.2-b1.jar\n \n\n"}, {"count": 3, "tags": [], "creator": "ddevienne@lgc.com", "attachment_id": null, "text": "This is normal, and as defined by the spec. The JDK jar command does the same \nthing. The Manifest as you type it or as a file outside a jar is different than \nthe Manifest inside the JAR file, the latter following the Jar spec. --DD", "id": 62502, "time": "2004-08-25T18:50:23Z", "bug_id": 30601, "creation_time": "2004-08-25T18:50:23Z", "is_private": false}, {"count": 4, "tags": [], "text": "It's clear that the MANIFEST spec says that lines cannot be longer than 72\nchars. ( I won't try to speculate on the reason ).  However, the problem lies in\nManifest.java where the code which arbirarily wraps lines to no more than 70\ncharacters does not attempt to wrap on white space.  Instead it'll just chop a\nword into two pieces.   This is roughly line 300 in the method writeValue.\nI would recommend changing this so that in addition to chopping it to no more\nthan 70 chars, it will only do so on white space.  ", "attachment_id": null, "bug_id": 30601, "id": 62507, "time": "2004-08-25T21:37:55Z", "creator": "chris@xoom.com", "creation_time": "2004-08-25T21:37:55Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 30601, "is_private": false, "text": "No need for that. The spec also says that continuation lines begin with a \nsingle space, and are merged with the space removed, so all the lines end up \nput together just fine.\n\nThere are no known issues with the manifest format, and I and others use it \nwith very long classpaths. So far all people claiming there was a bug there \nhave been mistaken, and the problem lied either with faulty app servers not \ncorrectly reading JAR manifest, or an issue with the classpath itself (as \nopposed to the way it's formatted inside the JAR). --DD", "id": 62508, "time": "2004-08-25T21:44:06Z", "creator": "ddevienne@lgc.com", "creation_time": "2004-08-25T21:44:06Z", "attachment_id": null}]