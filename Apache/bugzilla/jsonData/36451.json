[{"count": 0, "attachment_id": null, "bug_id": 36451, "is_private": false, "id": 79253, "time": "2005-09-01T00:19:49Z", "creator": "vitaliy.okulov@gmail.com", "creation_time": "2005-09-01T00:19:49Z", "tags": [], "text": "Hi all. I think i found some little bug.\n1 of my client use midlet program to comunicate with some php script at my \nserver by POST method. \nThis Java program connect to my Apache 1.3.33 web server & get 411 error.\nIn my logs I get \"chunked Transfer-Encoding forbidden\" & thats all.\nWhen i dump tcp packets to 80 port from IP of my client i see that there is no \nContent-Length field in request. Thats why, i think, my client get 411 error.\nBut the same php script & java client program perfectly work at apache 2.0.50 \nserver.\nThere is phpinfo from my server:\nhttp://mms2u.ru/a.php\nAnd from my client ex-server:\nhttp://mms2you.ru/a.php\n\nAlso i try to test same java program at my homebox. With default apache 2.0.54 \nthere is no problem and with apache 1.3.33 problem still exist.\nThere is acess & error logs:\n\nmy test homebox apache 2.0.54 server:\n10.0.15.8 - - [01/Sep/2005:02:08:30 +0400] \"POST http://test/chat/index.php \nHTTP/1.1\" 200 35536 \"-\" \"Chat Reader 0.38\"\n\nmy test homebox apache 1.3.33 server:\n[Thu Sep 01 01:53:02 2005] [error] [client 10.0.15.8] chunked Transfer-Encoding \nforbidden: /chat/index.php\n10.0.15.8 - - [01/Sep/2005:01:53:02 +0400] \"POST http://test/chat/index.php \nHTTP/1.1\" 411 357"}, {"count": 1, "tags": [], "creator": "vitaliy.okulov@gmail.com", "text": "There is dump of request to apache 1.3.33 server:\n\n12:04:42.683077 IP 82.204.131.186.1076 > 83.222.15.195.http: S 4171925538:\n4171925538(0) win 65535 <mss 1460,nop,nop,sackOK>\n        0x0000:  4500 0030 04ae 4000 7606 c5f2 52cc 83ba  E..0..@.v...R...\n        0x0010:  53de 0fc3 0434 0050 f8aa 8822 0000 0000  S....4.P...\"....\n        0x0020:  7002 ffff c3a6 0000 0204 05b4 0101 0402  p...............\n12:04:42.683260 IP 83.222.15.195.http > 82.204.131.186.1076: S 1224834130:\n1224834130(0) ack 4171925539 win 5840 <mss\n1460,nop,nop,sackOK>\n        0x0000:  4500 0030 0000 4000 4006 00a1 53de 0fc3  E..0..@.@...S...\n        0x0010:  52cc 83ba 0050 0434 4901 7c52 f8aa 8823  R....P.4I.|R...#\n        0x0020:  7012 16d0 e771 0000 0204 05b4 0101 0402  p....q..........\n12:04:42.706476 IP 82.204.131.186.1076 > 83.222.15.195.http: . ack 1 win 65535\n        0x0000:  4500 0028 04af 4000 7606 c5f9 52cc 83ba  E..(..@.v...R...\n        0x0010:  53de 0fc3 0434 0050 f8aa 8823 4901 7c53  S....4.P...#I.|S\n        0x0020:  5010 ffff 2b06 0000 0000 0000 0000       P...+.........\n12:04:42.713347 IP 82.204.131.186.1076 > 83.222.15.195.http: P 1:285(284) ack 1 \nwin 65535\n        0x0000:  4500 0144 04b0 4000 7606 c4dc 52cc 83ba  E..D..@.v...R...\n        0x0010:  53de 0fc3 0434 0050 f8aa 8823 4901 7c53  S....4.P...#I.|S\n        0x0020:  5018 ffff 8bcd 0000 504f 5354 2068 7474  P.......POST.htt\n        0x0030:  703a 2f2f 6d6d 7332 752e 7275 2f63 6861  p://mms2u.ru/cha\n        0x0040:  742f 696e 6465 782e 7068 7020 4854 5450  t/index.php.HTTP\n        0x0050:  2f31 2e31 0d0a 486f 7374 3a6d 6d73 3275  /1.1..Host:mms2u\n        0x0060:  2e72 750d 0a43 6f6e 6e65 6374 696f 6e3a  .ru..Connection:\n        0x0070:  636c 6f73 650d 0a43 6f6e 7465 6e74 2d54  close..Content-T\n        0x0080:  7970 653a 7465 7874 2f68 746d 6c3b 2063  ype:text/html;.c\n        0x0090:  6861 7273 6574 3d77 696e 646f 7773 2d31  harset=windows-1\n        0x00a0:  3235 310d 0a55 7365 722d 4167 656e 743a  251..User-Agent:\n        0x00b0:  4368 6174 2052 6561 6465 7220 302e 3338  Chat.Reader.0.38\n        0x00c0:  0d0a 4361 6368 652d 436f 6e74 726f 6c3a  ..Cache-Control:\n        0x00d0:  6e6f 2d63 6163 6865 0d0a 7472 616e 7366  no-cache..transf\n        0x00e0:  6572 2d65 6e63 6f64 696e 673a 6368 756e  er-encoding:chun\n        0x00f0:  6b65 640d 0a0d 0a34 370d 0a6d 6964 6c65  ked....47..midle\n        0x0100:  743d 302e 3338 266d 6f64 653d 3126 7573  t=0.38&mode=1&us\n        0x0110:  6572 6e61 6d65 3d64 656d 6f26 7061 7373  ername=demo&pass\n        0x0120:  776f 7264 3d64 656d 6f26 706d 5f61 6c6c  word=demo&pm_all\n        0x0130:  3d31 266c 613d 3126 706d 3d31 2675 6f6c  =1&la=1&pm=1&uol\n        0x0140:  3d31 0d0a                                =1..\n12:04:42.713390 IP 83.222.15.195.http > 82.204.131.186.1076: . ack 285 win 6432\n        0x0000:  4500 0028 12ae 4000 4006 edfa 53de 0fc3  E..(..@.@...S...\n        0x0010:  52cc 83ba 0050 0434 4901 7c53 f8aa 893f  R....P.4I.|S...?\n        0x0020:  5010 1920 10ca 0000                      P.......\n12:04:42.714023 IP 83.222.15.195.http > 82.204.131.186.1076: P 1:474(473) ack \n285 win 6432\n        0x0000:  4500 0201 12b0 4000 4006 ec1f 53de 0fc3  E.....@.@...S...\n        0x0010:  52cc 83ba 0050 0434 4901 7c53 f8aa 893f  R....P.4I.|S...?\n        0x0020:  5018 1920 c41e 0000 4854 5450 2f31 2e31  P.......HTTP/1.1\n        0x0030:  2034 3131 204c 656e 6774 6820 5265 7175  .411.Length.Requ\n        0x0040:  6972 6564 0d0a 4461 7465 3a20 5468 752c  ired..Date:.Thu,\n        0x0050:  2030 3120 5365 7020 3230 3035 2030 383a  .01.Sep.2005.08:\n        0x0060:  3034 3a34 3220 474d 540d 0a53 6572 7665  04:42.GMT..Serve\n        0x0070:  723a 2041 7061 6368 650d 0a43 6f6e 6e65  r:.Apache..Conne\n        0x0080:  6374 696f 6e3a 2063 6c6f 7365 0d0a 5472  ction:.close..Tr\n        0x0090:  616e 7366 6572 2d45 6e63 6f64 696e 673a  ansfer-Encoding:\n        0x00a0:  2063 6875 6e6b 6564 0d0a 436f 6e74 656e  .chunked..Conten\n        0x00b0:  742d 5479 7065 3a20 7465 7874 2f68 746d  t-Type:.text/htm\n        0x00c0:  6c3b 2063 6861 7273 6574 3d69 736f 2d38  l;.charset=iso-8\n        0x00d0:  3835 392d 310d 0a0d 0a31 3163 0d0a 3c21  859-1....11c..<!\n        0x00e0:  444f 4354 5950 4520 4854 4d4c 2050 5542  DOCTYPE.HTML.PUB\n        0x00f0:  4c49 4320 222d 2f2f 4945 5446 2f2f 4454  LIC.\"-//IETF//DT\n        0x0100:  4420 4854 4d4c 2032 2e30 2f2f 454e 223e  D.HTML.2.0//EN\">\n        0x0110:  0a3c 4854 4d4c 3e3c 4845 4144 3e0a 3c54  .<HTML><HEAD>.<T\n        0x0120:  4954 4c45 3e34 3131 204c 656e 6774 6820  ITLE>411.Length.\n        0x0130:  5265 7175 6972 6564 3c2f 5449 544c 453e  Required</TITLE>\n        0x0140:  0a3c 2f48 4541 443e 3c42 4f44 593e 0a3c  .</HEAD><BODY>.<\n        0x0150:  4831 3e4c 656e 6774 6820 5265 7175 6972  H1>Length.Requir\n        0x0160:  6564 3c2f 4831 3e0a 4120 7265 7175 6573  ed</H1>.A.reques\n        0x0170:  7420 6f66 2074 6865 2072 6571 7565 7374  t.of.the.request\n        0x0180:  6564 206d 6574 686f 6420 504f 5354 2072  ed.method.POST.r\n        0x0190:  6571 7569 7265 7320 6120 7661 6c69 6420  equires.a.valid.\n        0x01a0:  436f 6e74 656e 742d 6c65 6e67 7468 2e3c  Content-length.<\n        0x01b0:  503e 0a63 6875 6e6b 6564 2054 7261 6e73  P>.chunked.Trans\n        0x01c0:  6665 722d 456e 636f 6469 6e67 2066 6f72  fer-Encoding.for\n        0x01d0:  6269 6464 656e 3a20 2f63 6861 742f 696e  bidden:./chat/in\n        0x01e0:  6465 782e 7068 703c 503e 0a3c 2f42 4f44  dex.php<P>.</BOD\n        0x01f0:  593e 3c2f 4854 4d4c 3e0a 0d0a 300d 0a0d  Y></HTML>...0...\n        0x0200:  0a                                       .\n12:04:42.714106 IP 83.222.15.195.http > 82.204.131.186.1076: F 474:474(0) ack \n285 win 6432\n        0x0000:  4500 0028 12b2 4000 4006 edf6 53de 0fc3  E..(..@.@...S...\n        0x0010:  52cc 83ba 0050 0434 4901 7e2c f8aa 893f  R....P.4I.~,...?\n        0x0020:  5011 1920 0ef0 0000                      P.......\n12:04:42.738956 IP 82.204.131.186.1076 > 83.222.15.195.http: P 285:290(5) ack 1 \nwin 65535\n        0x0000:  4500 002d 04b2 4000 7606 c5f1 52cc 83ba  E..-..@.v...R...\n        0x0010:  53de 0fc3 0434 0050 f8aa 893f 4901 7c53  S....4.P...?I.|S\n        0x0020:  5018 ffff e5c2 0000 300d 0a0d 0a00       P.......0.....\n12:04:42.740955 IP 82.204.131.186.1076 > 83.222.15.195.http: . ack 475 win 65062\n        0x0000:  4500 0028 04b3 4000 7606 c5f5 52cc 83ba  E..(..@.v...R...\n        0x0010:  53de 0fc3 0434 0050 f8aa 8944 4901 7e2d  S....4.P...DI.~-\n        0x0020:  5010 fe26 29e4 0000 0000 0000 0000       P..&).........\n12:04:42.779569 IP 83.222.15.195.http > 82.204.131.186.1076: . ack 290 win 6432\n        0x0000:  4500 0028 12b4 4000 4006 edf4 53de 0fc3  E..(..@.@...S...\n        0x0010:  52cc 83ba 0050 0434 4901 7e2d f8aa 8944  R....P.4I.~-...D\n        0x0020:  5010 1920 0eeb 0000                      P.......\n12:04:49.071098 IP 82.204.131.186.1076 > 83.222.15.195.http: F 290:290(0) ack \n475 win 65062\n        0x0000:  4500 0028 04b8 4000 7606 c5f0 52cc 83ba  E..(..@.v...R...\n        0x0010:  53de 0fc3 0434 0050 f8aa 8944 4901 7e2d  S....4.P...DI.~-\n        0x0020:  5011 fe26 29e3 0000 0000 0000 0000       P..&).........\n12:04:49.071131 IP 83.222.15.195.http > 82.204.131.186.1076: . ack 291 win 6432\n        0x0000:  4500 0028 0cc8 4000 4006 f3e0 53de 0fc3  E..(..@.@...S...\n        0x0010:  52cc 83ba 0050 0434 4901 7e2d f8aa 8945  R....P.4I.~-...E\n        0x0020:  5010 1920 0eea 0000                      P.......\n\n12 packets captured\n15 packets received by filter\n0 packets dropped by kernel", "id": 79263, "time": "2005-09-01T10:24:53Z", "bug_id": 36451, "creation_time": "2005-09-01T10:24:53Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 36451, "text": "My understanding is that the php module for httpd-1.3 explicitly forbids chunked\ninput encoding, while the version for httpd-2.0 does not.  See the use of\nsetup_client_block(r, REQUEST_CHUNKED_ERROR) in\nhttp://cvs.php.net/co.php/php-src/sapi/apache/mod_php5.c?r=1.21\n\nSo this is a php issue, not an httpd issue.", "id": 79289, "time": "2005-09-01T15:29:14Z", "creator": "slive@apache.org", "creation_time": "2005-09-01T15:29:14Z", "tags": [], "is_private": false}]