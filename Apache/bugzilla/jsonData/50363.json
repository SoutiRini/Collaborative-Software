[{"count": 0, "tags": [], "creator": "timw@apache.org", "attachment_id": null, "text": "When the ISAPI redirector processes a response to a 304 (or 204/205) response with chunked encoding enabled, and a Content-Length is not specified, chunked encoding is applied to the empty body, which created an invalid response.\n\nUnder normal operation (e.g. DefaultServlet responses), the closing of the output buffer writes a Content-Length: 0 to the response, which the AJP connectors don't try to remove for 304 etc. responses (the HTTP connectors do). This results in 304 responses with Content-Length: 0 headers, which is valid (if quirky).\n\nThis issue can be reproduced by setting a 304 response status and explicitly calling response.flushBuffer() to commit the response prior to closing the output buffer.\n\nThe ISAPI Redirector also isn't handling a similar case for HEAD requests.", "id": 142107, "time": "2010-11-29T05:42:00Z", "bug_id": 50363, "creation_time": "2010-11-29T05:42:00Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 50363, "attachment_id": null, "text": "Fixed in trunk - will be released in 1.2.32.", "id": 142108, "time": "2010-11-29T05:45:33Z", "creator": "timw@apache.org", "creation_time": "2010-11-29T05:45:33Z", "is_private": false}]