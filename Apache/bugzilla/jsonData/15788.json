[{"count": 0, "attachment_id": null, "creator": "shuang@xperient.net", "is_private": false, "id": 28856, "time": "2003-01-03T19:02:40Z", "bug_id": 15788, "creation_time": "2003-01-03T19:02:40Z", "tags": [], "text": "I have a simple SVG file to simulate HTML linked text. It's strange that if I\nput the adding circle event listener sentence before the two\ntext event sentence, then the text event won't be fired. And the underline won't\nbe displayed except\nthat I have another sentence such as <text x=\"40\" y=\"300\">nolink</text> as in\nthe following example.\n\nThe SVG file that does not work is as follows:\n\n<?xml version=\"1.0\" standalone=\"no\" ?>\n<svg width=\"500\" height=\"500\">\n<defs>\n<script type=\"text/ecmascript\">\nvar svgdoc;\nfunction init(evt) {\n    svgdoc=evt.getTarget().getOwnerDocument();\n    svgdoc.getElementById(\"c\").addEventListener(\"mousemove\", showMouse, false);\n    svgdoc.getElementById(\"t\").addEventListener(\"mouseover\", changeColor, false);\n    svgdoc.getElementById(\"t\").addEventListener(\"mouseout\", changeColorBack, false);\n}\nfunction showMouse(evt) {\n    var info = \"\";\n    info += \"altKey: \"+evt.getAltKey() +\";\";\n    info += \"button: \"+evt.getButton() +\";\";\n    info += \"clientX: \"+evt.getClientX() +\";\";\n    info += \"screenX: \"+evt.getScreenX() +\";\";\n    alert(info);\n}\nfunction changeColor(evt) {\n    evt.getTarget().setAttribute(\"fill\",\"#FF0000\");\n}\nfunction changeColorBack(evt) {\n    evt.getTarget().setAttribute(\"fill\",\"#000099\");\n}\n</script>\n</defs>\n<circle id=\"c\" cx=\"50\" cy=\"50\" r=\"40\" fill=\"rgb(128,0,0)\" onclick=\"init(evt)\"/>\n<text id=\"t\" x=\"20\" y=\"200\" text-decoration=\"underline\" fill=\"#000099\"\nfont-size=\"20\" font-family=\"Arial\">Link text</text> \n</svg>\nBy changing the sequence of the adding event sentences and adding another text\nsentence, the working example is as follows:\n\n<?xml version=\"1.0\" standalone=\"no\" ?>\n<svg width=\"500\" height=\"500\">\n<defs>\n<script type=\"text/ecmascript\">\nvar svgdoc;\nfunction init(evt) {\n    svgdoc=evt.getTarget().getOwnerDocument();\n    svgdoc.getElementById(\"t\").addEventListener(\"mouseover\", changeColor, false);\n    svgdoc.getElementById(\"t\").addEventListener(\"mouseout\", changeColorBack, false);\n    svgdoc.getElementById(\"c\").addEventListener(\"mousemove\", showMouse, false);\n}\nfunction showMouse(evt) {\n    var info = \"\";\n    info += \"altKey: \"+evt.getAltKey() +\";\";\n    info += \"button: \"+evt.getButton() +\";\";\n    info += \"clientX: \"+evt.getClientX() +\";\";\n    info += \"screenX: \"+evt.getScreenX() +\";\";\n    alert(info);\n}\nfunction changeColor(evt) {\n    evt.getTarget().setAttribute(\"fill\",\"#FF0000\");\n}\nfunction changeColorBack(evt) {\n    evt.getTarget().setAttribute(\"fill\",\"#000099\");\n}\n</script>\n</defs>\n<circle id=\"c\" cx=\"50\" cy=\"50\" r=\"40\" fill=\"rgb(128,0,0)\" onclick=\"init(evt)\"/>\n<text x=\"40\" y=\"300\">nolink</text>\n<text id=\"t\" x=\"20\" y=\"200\" text-decoration=\"underline\" fill=\"#000099\"\nfont-size=\"20\" font-family=\"Arial\">Link text</text> \n</svg>"}, {"count": 1, "tags": [], "text": "I think I get all the events fired when I test it for both files:\n  Once I click on the circle, if I move the cursor over the circle I get an\nalert.  And the link text highlights red when I cursor over it.\n\nAs for the underline, the problem is that the decoration isn't being included\nin the bounds calculation for the SVG document so because 'link test' does not\nhave any decenders it is clipped.  The easiest (and best way) to fix this is to\nprovide a viewbox for the outermost svg element (such as viewbox=\"0 0 500 500\").\n", "is_private": false, "bug_id": 15788, "id": 28858, "time": "2003-01-03T19:23:26Z", "creator": "deweese@apache.org", "creation_time": "2003-01-03T19:23:26Z", "attachment_id": null}]