[{"count": 0, "tags": [], "creator": "stefan.fleiter@web.de", "text": "When I register the same class implementing ServletContextListener twice or more\nits' contextInitialized methods only gets called once.\n\nThe servlet specifications (2.4 and 2.5) say the conforming container has to \ncall the listeners in the same order they are registered in the deployment\ndescriptor.\nThe case that one listener class is registered twice is not mentioned\nexplicitly in the specification, though.\n\nExample:\n<listener>\n  <listener-class>test.ServletContextListener1</listener-class>\n</listener>\n<listener>\n  <listener-class>test.ServletContextListener2</listener-class>\n</listener>\n<listener>\n  <listener-class>test.ServletContextListener1</listener-class>\n</listener>\n\ntest.ServletContextListener1 and test.ServletContextListener2 get called,\nbut test.ServletContextListener1 does not get called again.\n\nApache Tomcat 5.5.25 has the same bug.", "id": 112993, "time": "2008-01-18T08:42:18Z", "bug_id": 44268, "creation_time": "2008-01-18T08:42:18Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "This is explicitly not allowed as a fix for\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=3770\n\nThe change is here http://svn.apache.org/viewvc?view=rev&revision=287588\n\nThe problem is that it is hard to distinguish between when multiple listeners is\na bug (ie 3770) and when it is intentional (this issue).\n\nThere are a few places where the spec could be read as only expecting one\ninstance of each listener class per webapp but it is far from clear.\n\nI am going to resolve this as WONTFIX since working around this issue is easier\nthan trying working around 3770.", "id": 112996, "time": "2008-01-18T12:11:49Z", "bug_id": 44268, "creation_time": "2008-01-18T12:11:49Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "stefan.fleiter@web.de", "text": "Thanks a lot for your fast reply.\n\nYes I already recognized the spec is not that clear on this issue.\nCould you at least print a warning log message if a listener is registered more\nthan once?\n", "id": 113032, "time": "2008-01-21T01:15:49Z", "bug_id": 44268, "creation_time": "2008-01-21T01:15:49Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 113043, "time": "2008-01-21T13:17:38Z", "bug_id": 44268, "creation_time": "2008-01-21T13:17:38Z", "is_private": false, "text": "A warning seems reasonable. Re-opening and changing this to an enhancement.\n\nI've committed a fix to trunk and proposed it for 6.0.x. It probably won't make\nthe 6.0.16 release but should make the following one."}, {"attachment_id": null, "tags": [], "bug_id": 44268, "text": "This did make it into 6.0.16.", "count": 4, "id": 113231, "time": "2008-01-28T13:26:33Z", "creator": "markt@apache.org", "creation_time": "2008-01-28T13:26:33Z", "is_private": false}, {"count": 5, "tags": [], "text": "Thanks a lot Mark!\nThis will definitely help the next one running into this.", "attachment_id": null, "bug_id": 44268, "id": 113255, "time": "2008-01-29T01:07:53Z", "creator": "stefan.fleiter@web.de", "creation_time": "2008-01-29T01:07:53Z", "is_private": false}, {"count": 6, "tags": [], "creator": "tom@tharrisx.homedns.org", "attachment_id": null, "id": 113924, "time": "2008-02-20T10:43:19Z", "bug_id": 44268, "creation_time": "2008-02-20T10:43:19Z", "is_private": false, "text": "When upgrading our developer boxes to tomcat 6.0.16, the following message is\nnow appearing for many of the listeners that we use. Each of our webapps has one\nand only one listener defined of each class, but we are now getting the \"The\nlistener {0} is already configured for this context. The duplicate definition\nhas been ignored.\"\n \nSo, what's going on here? Should I just ignore these messages? Why are they\nshowing up when it's clear that there are no duplicate definitions? Where else\ncould these listener definitions be besides in the webapp's web.xml? Should I\nopen a new ticket in Bugzilla? Or should this ticket be reopened?\n"}, {"count": 7, "tags": [], "bug_id": 44268, "attachment_id": null, "id": 113932, "creation_time": "2008-02-20T14:23:11Z", "time": "2008-02-20T14:23:11Z", "creator": "markt@apache.org", "text": "This enhancement uncovered a bug where all listeners in web.xml were registered\ntwice. See bug 44423.", "is_private": false}]