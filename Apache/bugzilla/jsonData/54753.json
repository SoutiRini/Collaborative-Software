[{"count": 0, "tags": [], "bug_id": 54753, "attachment_id": null, "id": 166151, "time": "2013-03-26T09:32:02Z", "creator": "dlade@web.de", "creation_time": "2013-03-26T09:32:02Z", "is_private": false, "text": "Using the StatisticalSampleSender produced always a StringIndexOutOfBoundsException at SampleResult.getSampleLabel().\nI found out that the \"threadName\" is not set if the parameter \"keyOnThreadName\" at StatisticalSampleResult is false, therefore it is empty and a space can't be found.\n\nIMHO the problem is more based on architecture but on the simple checking if \"threadName\" is empty (which is in short terms a workaround). Because the current implementation is based on the (hidden) knowledge that the \"threadGroup\" is part of the \"threadName\". But this is not always the case, especially on customized sample results.\n\nEither the \"treadGroup\" should be part of the SampleResult or the sample label should be resolved via SampleEvent instead of SampleResult, if needed."}, {"count": 1, "tags": [], "text": "Please can you show the full stack trace?", "is_private": false, "id": 166153, "creator": "sebb@apache.org", "time": "2013-03-26T11:11:10Z", "bug_id": 54753, "creation_time": "2013-03-26T11:11:10Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 54753, "attachment_id": null, "id": 166157, "time": "2013-03-26T14:19:28Z", "creator": "dlade@web.de", "creation_time": "2013-03-26T14:19:28Z", "is_private": false, "text": "It is rather easy to reproduce - just set following at jmeter.properties:\n\nmode=Statistical\n#key_on_threadname=false\n\nHere is the exception:\n\n2013/03/26 15:17:05 ERROR - jmeter.threads.ListenerNotifier: Detected problem in Listener:  java.lang.StringIndexOutOfBoundsException: String index out of range: -1\n\tat java.lang.String.substring(Unknown Source)\n\tat org.apache.jmeter.samplers.SampleResult.getSampleLabel(SampleResult.java:530)\n\tat org.apache.jmeter.visualizers.SummaryReport.add(SummaryReport.java:165)\n\tat org.apache.jmeter.reporters.ResultCollector.sendToVisualizer(ResultCollector.java:525)\n\tat org.apache.jmeter.reporters.ResultCollector.sampleOccurred(ResultCollector.java:501)\n\tat org.apache.jmeter.samplers.RemoteSampleListenerImpl.processBatch(RemoteSampleListenerImpl.java:96)\n\tat sun.reflect.GeneratedMethodAccessor37.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)\n\tat sun.rmi.transport.Transport$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.rmi.transport.Transport.serviceCall(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n\tat java.lang.Thread.run(Unknown Source)\n\tat sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknown Source)\n\tat sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)\n\tat sun.rmi.server.UnicastRef.invoke(Unknown Source)\n\tat org.apache.jmeter.samplers.RemoteSampleListenerImpl_Stub.processBatch(Unknown Source)\n\tat org.apache.jmeter.samplers.StatisticalSampleSender.sendBatch(StatisticalSampleSender.java:197)\n\tat org.apache.jmeter.samplers.StatisticalSampleSender.sampleOccurred(StatisticalSampleSender.java:184)\n\tat org.apache.jmeter.samplers.RemoteListenerWrapper.sampleOccurred(RemoteListenerWrapper.java:104)\n\tat org.apache.jmeter.threads.ListenerNotifier.notifyListeners(ListenerNotifier.java:84)\n\tat org.apache.jmeter.threads.JMeterThread.notifyListeners(JMeterThread.java:783)\n\tat org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:442)\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:256)\n\tat java.lang.Thread.run(Unknown Source)"}, {"count": 3, "tags": [], "bug_id": 54753, "attachment_id": null, "id": 166174, "time": "2013-03-27T00:51:06Z", "creator": "sebb@apache.org", "creation_time": "2013-03-27T00:51:06Z", "is_private": false, "text": "Thanks for the report.\n\nFor some reason, the thread name was not being populated in the StatisticalSampleResult if key_on_threadname was false. That has been fixed.\n\nURL: http://svn.apache.org/r1461380\nLog:\nStringIndexOutOfBoundsException at SampleResult.getSampleLabel() if key_on_threadname=false when using Statistical mode\nBugzilla Id: 5473\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/samplers/StatisticalSampleResult.java\n    jmeter/trunk/src/core/org/apache/jmeter/samplers/StatisticalSampleSender.java\n    jmeter/trunk/xdocs/changes.xml"}]