[{"count": 0, "tags": [], "bug_id": 41594, "attachment_id": null, "is_private": false, "id": 99281, "time": "2007-02-12T09:06:39Z", "creator": "robertdw@twasink.net", "creation_time": "2007-02-12T09:06:39Z", "text": "As Ant gets picked up and used embedded in other projects, it needs to have\nbetter defensive checks. Currently, configuring a new Project instance fails\nmiserably if a System property is set to null (e.g. through bad code elsewhere).\n\nTo fix this, PropertyHelper.setProperty() needs a defensive null check for the\nvalue parameter.\n\n(PropertyHelper.setNewProperty() already has this check!)"}, {"count": 1, "tags": [], "creator": "robertdw@twasink.net", "is_private": false, "text": "This issue was observed in a web project deployed in Glassfish. Glassfish uses\nJasper from Tomcat, and Jasper uses Ant to set up the classloader for JSP\ncompilation.\n\nhttps://glassfish.dev.java.net/issues/show_bug.cgi?id=2286\n", "id": 99282, "time": "2007-02-12T09:08:17Z", "bug_id": 41594, "creation_time": "2007-02-12T09:08:17Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 41594, "attachment_id": null, "is_private": false, "id": 99284, "time": "2007-02-12T09:43:55Z", "creator": "peterreilly@apache.org", "creation_time": "2007-02-12T09:43:55Z", "text": "Added the check from setNewProperty\nThanks for the report\n"}, {"count": 3, "tags": [], "bug_id": 41594, "attachment_id": null, "id": 99317, "time": "2007-02-13T01:11:12Z", "creator": "stevel@apache.org", "creation_time": "2007-02-13T01:11:12Z", "is_private": false, "text": "Looking at the (long) stack trace, it would seem wise for Project.init() to\nthrow a buildexception if it is given null properties, as clearly the caller is\nsetting us up wrong.\n\n-steve"}, {"count": 4, "tags": [], "text": "Well, the setup code is from Tomcat, so it's available to be checked. See\nhttp://svn.apache.org/repos/asf/tomcat/tc6.0.x/tags/TOMCAT_6_0_9/java/org/apache/jasper/compiler/AntCompiler.java\nor\nhttp://fisheye5.cenqua.com/browse/glassfish/appserv-webtier/src/java/org/apache/jasper/compiler/Compiler.java?r=1.10\nfor the version in Glassfish v1ur1.\n\nAs I noted in the bug report in Glassfish, this isn't really a bug in Ant, per\nse; it's incredibly unlikely that there would be null System properties under\nnormal Ant usage. It's just that when other tools, such as Jasper, use Ant\nembedded, the rules can change.\n\nI used the \"enhancement\" priority precisely because this wasn't a bug in Ant.\n\nIf the Tomcat/Glassfish guys are doing something wrong, I'd appreciate it if you\ncan tell them what (or tell me, and I'll tell them). However, throwing an\nexception in the init method isn't much more helpful than the NullPointerException.\n\n(The long stack trace, BTW, is mostly due to the large number of web filters we\nuse, plus the Webwork stack trace. It can be reproduced without all the extra guff)", "attachment_id": null, "id": 99322, "creator": "robertdw@twasink.net", "time": "2007-02-13T02:42:52Z", "bug_id": 41594, "creation_time": "2007-02-13T02:42:52Z", "is_private": false}]