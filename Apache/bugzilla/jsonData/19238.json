[{"count": 0, "tags": [], "creator": "pkrishnaswami@dynix.com", "attachment_id": null, "id": 35835, "time": "2003-04-22T23:39:37Z", "bug_id": 19238, "creation_time": "2003-04-22T23:39:37Z", "is_private": false, "text": "I am testing the enterprise techtips from Sun(Jan 2003)(with some minor \nmodifications) on JBoss 3.04 which has tomcat 4.1.12 bundled with it. A JSP \nthrows an exception but the exception is supposed to be caught by the servlet \ncontainer because it is declared in the web.xml. On catching the exception,an \nhtml page is to be displayed. Here is the snippet of the web.xml:\n\n<error-page>\n    <exception-type>test.AppException1a</exception-type>\n    <location>/AE1Aerror.html</location>\n  </error-page>\n\nTHe contents of the JSP is as below:\n\n<%@page import=\"test.AppException1a\" %>\n\n<%\n        if (true) {\n         Exception ex = new AppException1a();\n         System.out.println(\"------------Type of exception is \"+ex.getClass\n().getName());\n          throw new AppException1a();\n        }\n%>\n\nBut this exception is not caught and instead the exception is displayed on the \nbrowser:\n\ntype Exception report\n\nmessage Internal Server Error\n\ndescription The server encountered an internal error (Internal Server Error) \nthat prevented it from fulfilling this request.\n\nexception \n\norg.apache.jasper.JasperException: AppException1a\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:248)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:289)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2396)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:469)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1040)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1151)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\nroot cause \n\njavax.servlet.ServletException: AppException1a\n\tat org.apache.jasper.runtime.PageContextImpl.handlePageException\n(PageContextImpl.java:497)\n\tat org.apache.jsp.ThrowAppException1a_jsp._jspService\n(ThrowAppException1a_jsp.java:54)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:136)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:204)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:289)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2396)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:469)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNe\nxt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:995)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1040)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1151)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\nAny help will be helpful"}, {"count": 1, "tags": [], "bug_id": 19238, "attachment_id": null, "id": 35848, "time": "2003-04-23T07:24:47Z", "creator": "remm@apache.org", "creation_time": "2003-04-23T07:24:47Z", "is_private": false, "text": "I think Tomcat 4.1.24 was not handling exceptions coming out from Jasper because\nthey are actually wrapped by Jasper. Later releases are supposed to have fixed\nthat, and unwrap exceptions. I think both 4.1.18 and 4.1.24 fix this issue."}, {"count": 2, "tags": [], "creator": "pkrishnaswami@dynix.com", "text": "I tried this example in both Jboss 3.0.7 bundled with tomcat 4.1.18 and Jboss \n3.2.0 bundled with 4.1.24. In both cases, user-defined exception was not \ncaught by the container and stack trace appeared on the browser. Further, \nJboss 3.0.4 bundled with tomcat 4.1.12 was able to catch NullPointerException \nbut this does not work in either Jboss 3.0.7 bundled with tomcat 4.1.18 or \nJboss 3.2.0 bundled with 4.1.24.", "id": 35903, "time": "2003-04-23T15:28:29Z", "bug_id": 19238, "creation_time": "2003-04-23T15:28:29Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 19238, "attachment_id": null, "text": "This is already fixed in TC5. I have committed a patch to CVS for TC4.", "id": 55781, "time": "2004-04-14T19:22:50Z", "creator": "markt@apache.org", "creation_time": "2004-04-14T19:22:50Z", "is_private": false}]