[{"count": 0, "tags": [], "bug_id": 44452, "text": "I have many application using fop 0.20.5 and work fine rendering on the fly PDF\nfiles in WEB application starting from XML data.\n\nRecently I upgrade to 0.94 and application don't work more.\nI try fop 0.93 too whit same bad result.\n\n19-feb-2008 13.03.21 org.apache.fop.cli.Main startFOP\nGRAVE: Exception\njava.lang.IllegalStateException: subsequences exhausted in page-sequence-master\n'all', cannot recover\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:168)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:166)\n        at org.apache.fop.cli.Main.main(Main.java:197)\n\n---------\n\njava.lang.IllegalStateException: subsequences exhausted in page-sequence-master\n'all', cannot recover\n        at\norg.apache.fop.layoutmgr.PageProvider.cacheNextPage(PageProvider.java:275)\n        at org.apache.fop.layoutmgr.PageProvider.getPage(PageProvider.java:221)\n        at org.apache.fop.layoutmgr.PageProvider.getPage(PageProvider.java:189)\n        at\norg.apache.fop.layoutmgr.PageProvider.getAvailableBPD(PageProvider.java:135)\n        at\norg.apache.fop.layoutmgr.PageBreakingAlgorithm.getLineWidth(PageBreakingAlgorithm.java:851)\n        at\norg.apache.fop.layoutmgr.PageBreakingAlgorithm.computeDifference(PageBreakingAlgorithm.java:367)\n        at\norg.apache.fop.layoutmgr.BreakingAlgorithm.considerLegalBreak(BreakingAlgorithm.java:696)\n        at\norg.apache.fop.layoutmgr.PageBreakingAlgorithm.considerLegalBreak(PageBreakingAlgorithm.java:309)\n        at\norg.apache.fop.layoutmgr.BreakingAlgorithm.findBreakingPoints(BreakingAlgorithm.java:485)\n        at\norg.apache.fop.layoutmgr.BreakingAlgorithm.findBreakingPoints(BreakingAlgorithm.java:403)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:338)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:263)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:144)\n        at\norg.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:233)\n        at\norg.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:145)\n        at\norg.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:378)\n        at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:194)\n        at\norg.apache.xalan.transformer.TransformerIdentityImpl.endElement(TransformerIdentityImpl.java:1101)\n        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at\norg.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:484)\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:165)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:166)\n        at org.apache.fop.cli.Main.main(Main.java:197)", "id": 113876, "time": "2008-02-19T05:07:24Z", "creator": "nicola.denisco@hotmail.it", "creation_time": "2008-02-19T05:07:24Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 44452, "text": "Created attachment 21559\nexplain and test bug\n\nthis xml-fop file work fine on fop 0.20.5 and dont work on fop 0.94\nuse this to test the error", "id": 113877, "time": "2008-02-19T05:11:33Z", "creator": "nicola.denisco@hotmail.it", "creation_time": "2008-02-19T05:11:33Z", "is_private": false, "attachment_id": 21559}, {"count": 2, "tags": [], "bug_id": 44452, "text": "I would argue that 0.20.5 didn't behave correctly. Your only\nconditional-page-master-reference has a restriction on page-position=\"first\" so\nit isn't eligible for anything but the first page. I don't think it would be\ncorrect to fallback to \"any\" page-master regardless of its conditions. If I were\nyou I'd just remove the page-position property.\n\nI'd mark this issue as \"invalid\" but I'd like a second opinion from the team.", "id": 113879, "time": "2008-02-19T05:25:18Z", "creator": "jeremias@apache.org", "creation_time": "2008-02-19T05:25:18Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 44452, "text": "Created attachment 21561\nold fop render pdf\n\nthis is the oldest PDF (fop 0.20.5) with the data XML attached", "id": 113881, "time": "2008-02-19T06:32:33Z", "creator": "nicola.denisco@hotmail.it", "creation_time": "2008-02-19T06:32:33Z", "is_private": false, "attachment_id": 21561}, {"count": 4, "tags": [], "bug_id": 44452, "is_private": false, "id": 113882, "creation_time": "2008-02-19T06:33:48Z", "time": "2008-02-19T06:33:48Z", "creator": "nicola.denisco@hotmail.it", "text": "Created attachment 21562\nnew fop render pdf\n\nthis is the new PDF (fop 0.94)", "attachment_id": 21562}, {"count": 5, "attachment_id": null, "creator": "nicola.denisco@hotmail.it", "is_private": false, "id": 113883, "time": "2008-02-19T06:35:51Z", "bug_id": 44452, "creation_time": "2008-02-19T06:35:51Z", "tags": [], "text": "ok removing page-position=\"first\" the rendering process dont throw exception.\nBut the result is very different from previus PDF.\n\nYou can view the two attached PDF to see the difference.\nthanks\n"}, {"count": 6, "tags": [], "creator": "jeremias@apache.org", "attachment_id": null, "is_private": false, "id": 113888, "time": "2008-02-19T07:13:05Z", "bug_id": 44452, "creation_time": "2008-02-19T07:13:05Z", "text": "That the table is broken early is a known regression in 0.94. It does not happen\nin 0.93 or FOP Trunk. It will be fixed in 0.95 when it is released in about two\nweeks."}, {"count": 7, "tags": [], "bug_id": 44452, "attachment_id": null, "id": 157249, "time": "2012-04-07T01:09:06Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:09:06Z", "is_private": false, "text": "example FO does not specify adequate page sequence and also uses unsupported features (table-layout='auto')"}, {"count": 8, "tags": [], "bug_id": 44452, "is_private": false, "id": 158520, "creation_time": "2012-04-30T00:11:21Z", "time": "2012-04-30T00:11:21Z", "creator": "gadams@apache.org", "text": "batch transition resolved+invalid to closed+invalid", "attachment_id": null}]