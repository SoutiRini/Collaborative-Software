[{"count": 0, "tags": [], "bug_id": 28559, "text": "I've successfully compiled the 2.0.4 mod_jk2 connector for use w/ the RPM\nversion of Apache 2.0.46/Tomcat 4.1.29/30 on Redhat Enterprise Linux 3.0 (ES and\nWS) as well as the RPM version of Apache on Fedora Core 1, so I'm a bit stumped\nby this one.  This works on one machine, but doesn't on two others.  All three\nare RHEL 3.0 and running the following:\n\nSun JDK 1.4.2 (j2sdk-1.4.2-fcs)\nhttpd-devel-2.0.46-26.ent\nhttpd-2.0.46-26.ent\nTomcat 4.1.29\n\nI've untarred the 2.0.4 jk2 connector, and get the following when I run make:\n\n==============================\n[cegolf@goatweed native2]$ pwd\n/usr/local/jakarta/jakarta-tomcat-connectors-jk2-2.0.4-src/jk/native2\n[cegolf@goatweed native2]$ ./buildconfig\n[cegolf@goatweed native2]$ ./configure --with-apxs2=/usr/sbin/apxs\n[cegolf@goatweed native2]$ make\nlist=' server/apache2'; \\\nfor i in $list; do \\\n        echo \"Making $target in $i\"; \\\n        if test \"$i\" != \".\"; then \\\n        (cd $i && make) || exit 1; \\\nfi; \\\ndone;\nMaking  in server/apache2\nmake[1]: Entering directory\n`/usr/local/jakarta/jakarta-tomcat-connectors-jk2-2.0.4-src/jk/native2/server/apache2'\nmkdir -p ../../../build/jk2/apache2/usr/lib/httpd/modules\n/bin/sh /usr/bin/libtool --silent  --mode=compile gcc  -O2 -g -pipe -march=i386\n-mcpu=i686 -DSSL_EXPERIMENTAL_ENGINE -I/usr/kerberos/include -pthread -DLINUX=2\n-D_REENTRANT -D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE \n-I../../include -I/usr/include/httpd\n-I/usr/src/build/324798-i386/BUILD/httpd-2.0.46/prefork/srclib/apr-util/include\n/usr/src/build/324798-i386/BUILD/httpd-2.0.46/srclib/apr-util/include\n-I/usr/src/build/324798-i386/BUILD/httpd-2.0.46/prefork/srclib/apr/include\n/usr/src/build/324798-i386/BUILD/httpd-2.0.46/srclib/apr/include\n-DCHUNK_SIZE=4096 -DUSE_APACHE_MD5   -c ../../common/jk_channel_apr_socket.c -o\n../../../build/jk2/apache2/jk_channel_apr_socket.lo\ngcc: cannot specify -o with -c or -S and multiple compilations\nmake[1]: *** [../../../build/jk2/apache2/jk_channel_apr_socket.lo] Error 1\nmake[1]: Leaving directory\n`/usr/local/jakarta/jakarta-tomcat-connectors-jk2-2.0.4-src/jk/native2/server/apache2'\nmake: *** [jk2-build] Error 1\n\n=================================\n\n\nAny ideas what this 'gcc: cannot specify -o with -c or -S and multiple\ncompilations' means and how to fix it?  All three machines have been upgraded to\nRHEL 3.0 from various versions of Redhat (7.3 - 9.0) over time, so I suspect\nit's some legacy junk hanging around that's causing the grief.  Any help would\nbe appreciated.\n\nThanks.", "id": 56309, "time": "2004-04-23T17:11:09Z", "creator": "cegolf@transmontaigne.com", "creation_time": "2004-04-23T17:11:09Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "Hi Chris,\n\nI've just had the same problem on the same platform although I was rebuilding\nthe jpackage.org mod_jk2 package with newer sources. I've gotten the build to\nwork with the attached small patch. It seems the variables that the patch\nremoves are expanded to bare directory names, when they *should* at least be\nprefixed each with '-I', you can see some of the */include directories in your\noutput are missing them and that's what's confusing GCC.\n\nThere's possibly a better way of fixing this, but this quick patch worked for me.\n\nMatt", "attachment_id": null, "bug_id": 28559, "id": 57637, "time": "2004-05-19T11:32:41Z", "creator": "matt@xrefer.com", "creation_time": "2004-05-19T11:32:41Z", "is_private": false}, {"count": 2, "tags": [], "creator": "matt@xrefer.com", "text": "Created attachment 11595\nPatch to fix mod_jk2 build", "id": 57640, "time": "2004-05-19T11:35:24Z", "bug_id": 28559, "creation_time": "2004-05-19T11:35:24Z", "is_private": false, "attachment_id": 11595}, {"attachment_id": null, "tags": [], "creator": "hgomez@apache.org", "text": "Fixed in latest jpackage build.", "count": 3, "id": 60536, "time": "2004-07-13T10:17:44Z", "bug_id": 28559, "creation_time": "2004-07-13T10:17:44Z", "is_private": false}]