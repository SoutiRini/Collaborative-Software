[{"count": 0, "tags": [], "text": "if you try to round trip encode then decode something using the batik encoders, \nyou get exta characters at the end. Attached code demonstrates.\n\nimport java.io.*;\nimport org.apache.batik.util.Base64Encoder;\nimport org.apache.batik.util.Base64Decoder;\n\n\npublic class TestEncoders {\n\n\tpublic static byte[] loadFile(String filename)\n\t\t\t throws IOException {\n\n\t\tFile file = new File(filename);\n\t\tbyte buffer[];\n\t\tint size = (int) file.length();\n\t\tbuffer = new byte[size];\n\t\tFileInputStream reader = new FileInputStream(file);\n\t\tint bytesread = reader.read(buffer);\n\t\treader.close();\n\t\treturn buffer;\n\t}\n\n\n\t/**\n\t *  test the batik encoder\n\t *\n\t * @param  filename       file to use as test\n\t * @exception  Exception  whatever went wrong\n\t */\n\n\tpublic static void TestBatikEncoder(String filename) throws Exception {\n\t\tbyte[] buffer = loadFile(filename);\n\t\tBase64Encoder encoder = new Base64Encoder();\n\t\tString encodedData = encoder.encodeBuffer(buffer);\n\t\tBase64Decoder base64 = new Base64Decoder();\n\t\tbyte[] decoded;\n\t\tdecoded = base64.decodeBuffer(encodedData);\n\t\tif (decoded.length != buffer.length) {\n\t\t\tthrow new Exception(\"decode considered broken: length \ndifferent. Expected \"+ buffer.length+\" got \"+decoded.length );\n\t\t}\n\t\t//we get here, verify the results\n\t\tfor (int i = 0; i < buffer.length; i++) {\n\t\t\tif (buffer[i] != decoded[i]) {\n\t\t\t\tthrow new Exception(\"decode doesn't match \noriginal at element \" + i);\n\t\t\t}\n\t\t}\n\t}\n}", "is_private": false, "id": 1297, "creator": "steve_l@iseran.com", "time": "2001-03-15T11:33:08Z", "bug_id": 987, "creation_time": "2001-03-15T11:33:08Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 987, "text": "The new Base64[ED][ne]coderStream classes fix this.\nTests have been added to verify the integrity of the Base64 codec.\n(org/apache/batik/util/regBase64.xml).", "id": 3427, "time": "2001-07-05T11:23:39Z", "creator": "deweese@apache.org", "creation_time": "2001-07-05T11:23:39Z", "is_private": false, "attachment_id": null}]