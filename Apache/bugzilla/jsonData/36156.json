[{"count": 0, "tags": [], "text": "Increased heap size in .bash_profile \n\nexport ANT_OPTS=\"-Xms2548m -Xmx2548m\"\n\nBeen a AS/400 guy, into linux/ant build stuff now. Going crazy. The build is \nhuge application and has multiple XMLs.\n\nVerbose log\n\n      [jar] adding entry \ncom/yantra/ycp/customdb/YFS_Agent_Criteria_TemplateImpl.class\n      [jar] adding entry \ncom/yantra/ycp/customdb/YFS_Answer_Capacity_ImpactImpl.class\n      [jar] adding entry com/yantra/ycp/customdb/YFS_Answer_MasterImpl.class\n      [ant] Exiting /app/yandev00/NOMSbuild/deploy/script/yantraBuild.xml.\njava.lang.OutOfMemoryError: ZIP004:OutOfMemoryError, MEM_ERROR in inflateInit2\n        at java.util.zip.Inflater.init(Native Method)\n        at java.util.zip.Inflater.<init>(Inflater.java(Compiled Code))\n        at java.util.zip.ZipFile.getInflater(ZipFile.java:284)\n        at java.util.zip.ZipFile.getInputStream(ZipFile.java:228)\n        at java.util.zip.ZipFile.getInputStream(ZipFile.java:207)\n        at java.util.jar.JarFile.getInputStream(JarFile.java:420)\n        at sun.misc.URLClassPath$5.getInputStream(URLClassPath.java:678)\n        at sun.misc.Resource.getBytes(Resource.java:75)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:471)\n        at java.net.URLClassLoader.access$500(URLClassLoader.java(Inlined \nCompiled Code))\n        at java.net.URLClassLoader$ClassFinder.run(URLClassLoader.java\n(Compiled Code))\n        at java.security.AccessController.doPrivileged1(Native Method)\n        at java.security.AccessController.doPrivileged(AccessController.java\n(Compiled Code))\n        at java.net.URLClassLoader.findClass(URLClassLoader.java(Compiled \nCode))\n        at java.lang.ClassLoader.loadClass(ClassLoader.java(Compiled Code))\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:494)\n        at org.apache.tools.ant.DefaultLogger.formatTime\n(DefaultLogger.java:276)\n        at org.apache.tools.ant.DefaultLogger.buildFinished\n(DefaultLogger.java:156)\n        at org.apache.tools.ant.Project.fireBuildFinished(Project.java:1796)\n        at org.apache.tools.ant.Main.runBuild(Main.java:693)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nZIP004:OutOfMemoryError, MEM_ERROR in inflateInit2", "is_private": false, "id": 78435, "creator": "lakshmioffice@yahoo.com", "time": "2005-08-12T05:34:49Z", "bug_id": 36156, "creation_time": "2005-08-12T05:34:49Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 36156, "text": "Do you use XML logger?", "id": 78436, "attachment_id": null, "creator": "alexeys@inventigo.com", "creation_time": "2005-08-12T06:20:55Z", "time": "2005-08-12T06:20:55Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 36156, "text": "(In reply to comment #1)\n> Do you use XML logger?\n\nNo, I am not familiar with XML logger. Is it something I can download into a \nuser directory in Linux and use for debugging purpose?\nThanks for replying.", "count": 2, "id": 78437, "time": "2005-08-12T06:26:35Z", "creator": "lakshmioffice@yahoo.com", "creation_time": "2005-08-12T06:26:35Z", "is_private": false}, {"count": 3, "tags": [], "creator": "alexeys@inventigo.com", "text": "ANT can output its result in XML format. Can you isolate the target(s) that\nrequire a lot of memory? The target that finally crashes is not always the\nreason for the crash. Do you use scripts and/or third party tasks?\n\nWhat ANT version are you using on Linux?", "id": 78438, "time": "2005-08-12T06:37:36Z", "bug_id": 36156, "creation_time": "2005-08-12T06:37:36Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 36156, "is_private": false, "count": 4, "id": 78439, "time": "2005-08-12T06:47:00Z", "creator": "lakshmioffice@yahoo.com", "creation_time": "2005-08-12T06:47:00Z", "text": "(In reply to comment #3)\n> ANT can output its result in XML format. Can you isolate the target(s) that\n> require a lot of memory? The target that finally crashes is not always the\n> reason for the crash. Do you use scripts and/or third party tasks?\n> What ANT version are you using on Linux?\n\nI am using apache-ant-1.6.2 Most of the Ant script was written by me using a \ndifferent project ANT script as template. \n\nHere is what happend in the last few minutes:\nChanged .bash_profile to export ANT_OPTS=\"-Xmx1536m -Xms256m\" based on input \nfrom ASF Bugzilla Bug 28261. It helped to get over the OutOfMemoryError and \nended in SCP error \"pipe closed\". I have listed the output below, ,but I am \nstill worried about the OutOfMemoryError. I am suspicious that it will come \nagain.\n\nThanks\n\n   [untar] expanding yantraClusterDeploy.jacl \nto /app/yandev00/NOMSbuild/artifacts/temp/yantraClusterDeploy.jacl\n    [untar] expand complete\n      [scp] Connecting to fralnxnmsapp4:22\n      [scp] Sending: yantraDeploy.jacl : 9332\n      [scp] File transfer time: 0.07 Average Rate: 137,235.29 B/s\n      [scp] done.\n      [scp] Connecting to fralnxnmsapp4:22\n      [scp] Sending: yantra.ear : 144780871\n      [scp] File transfer time: 187.65 Average Rate: 771,535.07 B/s\n      [scp] done.\n      [scp] Connecting to fralnxnmsapp4:22\n      [scp] Sending: yantraFiles.tar : 1285427200\n      [scp] KEXINIT\n      [scp] File transfer time: 1,182.28 Average Rate: 906,975.61 B/s\n      [ant] Exiting /app/yandev00/NOMSbuild/deploy/script/yantraBuild.xml.\n\nBUILD FAILED\n/app/yandev00/NOMSbuild/build1.xml:145: The following error occurred while \nexecuting this line:\n/app/yandev00/NOMSbuild/deploy/script/yantraBuild.xml:474: \njava.io.IOException: Pipe closed\n        at org.apache.tools.ant.ProjectHelper.addLocationToBuildException\n(ProjectHelper.java:539)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:388)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nCaused by: /app/yandev00/NOMSbuild/deploy/script/yantraBuild.xml:474: \njava.io.IOException: Pipe closed\n        at org.apache.tools.ant.taskdefs.optional.ssh.Scp.execute(Scp.java:187)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n                                                                               \n                         \n"}, {"count": 5, "tags": [], "text": "if something is causing you to run out of that much memory, you have a serious\nproblem.\n\n1. are there any <java> things you run, especially your own/custom apps that run\nwith fork=false. Fork them into new JVMs\n\n2. are there any custom tasks you use? XDoclet?\n\n3. Java 1.5 has fancy stuff for monitoring the memory consumption of a running\napp; the jconsole stuff. If you are running java1.5, look at the jconsole docs\nand configure Ant to run in a monitorable state...then look at where memory is\ngoing.", "is_private": false, "id": 78443, "creator": "stevel@apache.org", "time": "2005-08-12T12:14:13Z", "bug_id": 36156, "creation_time": "2005-08-12T12:14:13Z", "attachment_id": null}, {"count": 6, "text": "Raj,\n\nHave you made any progress on finding the cause of this problem? Did you try our\nsuggestions?", "creator": "stevel@apache.org", "is_private": false, "id": 90869, "time": "2006-07-04T20:37:44Z", "bug_id": 36156, "creation_time": "2006-07-04T20:37:44Z", "tags": [], "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 36156, "attachment_id": null, "is_private": false, "id": 93704, "time": "2006-09-17T22:27:44Z", "creator": "peterreilly@apache.org", "creation_time": "2006-09-17T22:27:44Z", "text": "Either a configuration problem, complex script orlarge\ncode base. Marking as invalid - insufficient info"}, {"attachment_id": null, "tags": [], "bug_id": 36156, "text": "Team,\n\nI am able to reproduce this bug.\n\nI am trying to compile a huge application(build takes 3 hours!!!!) with ANT.1.6.5 and with a XMLLogger in verbose mode. This is error occurs at the end of my build.so i my guess is that it is happening when you try to write the XMLLogger output.\n\nI tried to do the same activity without verbose mode and its completes successfully.\n\nSize of my xml log output(with verbose) :11.1 MB\nSize of my xml log output(without verbose) :592 KB\n\nI am running my build in window 2003 server\n\n\nBUILD FAILED\n\njava.lang.OutOfMemoryError: ZIP004:OutOfMemoryError, MEM_ERROR in inflateInit2\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1225)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1185)\n\tat org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:40)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:668)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:187)\n\tat org.apache.tools.ant.Main.start(Main.java:150)\n\tat org.apache.tools.ant.Main.main(Main.java:240)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat com.ibm.ws.bootstrap.WSLauncher.main(WSLauncher.java:263)\nCaused by: java.lang.OutOfMemoryError: ZIP004:OutOfMemoryError, MEM_ERROR in inflateInit2\n\tat java.util.zip.Inflater.init(Native Method)\n\tat java.util.zip.Inflater.<init>(Inflater.java:95)\n\tat org.apache.tools.zip.ZipFile.getInputStream(ZipFile.java:208)\n\tat org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:121)\n\tat org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:92)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n\tat org.apache.tools.ant.Task.perform(Task.java:364)\n\tat org.apache.tools.ant.Target.execute(Target.java:341)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:369)\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n\t... 12 more\n--- Nested Exception ---\njava.lang.OutOfMemoryError: ZIP004:OutOfMemoryError, MEM_ERROR in inflateInit2\n\tat java.util.zip.Inflater.init(Native Method)\n\tat java.util.zip.Inflater.<init>(Inflater.java:95)\n\tat org.apache.tools.zip.ZipFile.getInputStream(ZipFile.java:208)\n\tat org.apache.tools.ant.taskdefs.Expand.expandFile(Expand.java:121)\n\tat org.apache.tools.ant.taskdefs.Expand.execute(Expand.java:92)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n\tat org.apache.tools.ant.Task.perform(Task.java:364)\n\tat org.apache.tools.ant.Target.execute(Target.java:341)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:369)\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1185)\n\tat org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:40)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:668)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:187)\n\tat org.apache.tools.ant.Main.start(Main.java:150)\n\tat org.apache.tools.ant.Main.main(Main.java:240)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:615)\n\tat com.ibm.ws.bootstrap.WSLauncher.main(WSLauncher.java:263)\n", "count": 8, "id": 116331, "time": "2008-05-07T03:46:58Z", "creator": "praveen12bnitt@gmail.com", "creation_time": "2008-05-07T03:46:58Z", "is_private": false}, {"count": 9, "tags": [], "creator": "bodewig@apache.org", "text": "(In reply to comment #8)\n> Team,\n> \n> I am able to reproduce this bug.\n\nNo, you are reproducing bug 35476\n\nThe original post didn't talk about XMLLogger at all, so it must be (have been) a different issue.\n\n", "id": 120206, "time": "2008-08-29T08:03:27Z", "bug_id": 36156, "creation_time": "2008-08-29T08:03:27Z", "is_private": false, "attachment_id": null}]