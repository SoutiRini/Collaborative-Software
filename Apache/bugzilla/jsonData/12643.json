[{"count": 0, "tags": [], "creator": "ben.rometsch@blueyonder.co.uk", "attachment_id": null, "id": 22861, "time": "2002-09-14T11:37:35Z", "bug_id": 12643, "creation_time": "2002-09-14T11:37:35Z", "is_private": false, "text": "Whenever I attempt to use the manager app to undeploy an existing web application by browsing to the following URL:\n\nhttp://localhost:8080/manager/undeploy?path=/outreach\n\nI receive the following message:\n\nFAIL - Cannot remove document base for path /outreach\n\nand no work is done\n\nThis occurs both in Linux (gentoo 2) and Windows XP."}, {"attachment_id": null, "tags": [], "bug_id": 12643, "is_private": false, "count": 1, "id": 29531, "time": "2003-01-16T13:38:57Z", "creator": "glenn@apache.org", "creation_time": "2003-01-16T13:38:57Z", "text": "Are there any stacktraces in the logs?  \n\nDoes this application use struts?\n\nWas the application installed using /manager/deploy?  \n\nDoes this still fail with the latest Tomcat 4.1.19 release?  \n\nPlease provide more information."}, {"count": 2, "tags": [], "bug_id": 12643, "text": "Personally, I recommend resolving that kind of report with a WORKSFORME (no test\ncase, and no instructions on how to reproduce).\nAt least before your change, you can't undeploy an application which wasn't\ndeployed with the manager.", "id": 29533, "time": "2003-01-16T13:44:10Z", "creator": "remm@apache.org", "creation_time": "2003-01-16T13:44:10Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 12643, "is_private": false, "text": "I have witnessed this behavior on Windows 2000 Professional running Tomcat \n4.1.24 standalone.", "id": 36172, "time": "2003-04-26T18:18:10Z", "creator": "bugzilla@sbdconsultants.com", "creation_time": "2003-04-26T18:18:10Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 12643, "is_private": false, "text": "Here is an excerpt from my Command Prompt window wherein I was running Ant.\n\nC:\\Projects\\J2EE_Rocks\\hw2a>ant clean\nBuildfile: build.xml\n\nclean:\n   [delete] Deleting directory C:\\Projects\\J2EE_Rocks\\hw2a\\build\n   [delete] Deleting directory C:\\Projects\\J2EE_Rocks\\hw2a\\dist\n\nBUILD SUCCESSFUL\nTotal time: 1 second\nC:\\Projects\\J2EE_Rocks\\hw2a>ant dist\nBuildfile: build.xml\n\nprepare:\n    [mkdir] Created dir: C:\\Projects\\J2EE_Rocks\\hw2a\\build\n    [mkdir] Created dir: C:\\Projects\\J2EE_Rocks\\hw2a\\build\\WEB-INF\n    [mkdir] Created dir: C:\\Projects\\J2EE_Rocks\\hw2a\\build\\WEB-INF\\classes\n     [copy] Copying 2 files to C:\\Projects\\J2EE_Rocks\\hw2a\\build\n    [mkdir] Created dir: C:\\Projects\\J2EE_Rocks\\hw2a\\build\\WEB-INF\\lib\n\ncompile:\n    [javac] Compiling 2 source files to C:\\Projects\\J2EE_Rocks\\hw2a\\build\\WEB-IN\nF\\classes\n\njavadoc:\n    [mkdir] Created dir: C:\\Projects\\J2EE_Rocks\\hw2a\\dist\\docs\\api\n  [javadoc] Generating Javadoc\n  [javadoc] Javadoc execution\n  [javadoc] Loading source files for package greeting...\n  [javadoc] Constructing Javadoc information...\n  [javadoc] Standard Doclet version 1.4.1\n\n  [javadoc] Building tree for all the packages and classes...\n  [javadoc] Building index for all the packages and classes...\n  [javadoc] Building index for all classes...\n\ndist:\n      [jar] Building jar: C:\\Projects\\J2EE_Rocks\\hw2a\\dist\\hello1.war\n\nBUILD SUCCESSFUL\nTotal time: 3 seconds\nC:\\Projects\\J2EE_Rocks\\hw2a>ant deploy\nBuildfile: build.xml\n\nprepare:\n\ncompile:\n\njavadoc:\n  [javadoc] Generating Javadoc\n  [javadoc] Javadoc execution\n  [javadoc] Loading source files for package greeting...\n  [javadoc] Constructing Javadoc information...\n  [javadoc] Standard Doclet version 1.4.1\n\n  [javadoc] Building tree for all the packages and classes...\n  [javadoc] Building index for all the packages and classes...\n  [javadoc] Building index for all classes...\n\ndist:\n\ndeploy:\n   [deploy] OK - Installed application at context path /hello1\n\n\nBUILD SUCCESSFUL\nTotal time: 3 seconds\nC:\\Projects\\J2EE_Rocks\\hw2a>ant undeploy\nBuildfile: build.xml\n\nundeploy:\n [undeploy] FAIL - Cannot remove document base for path /hello1\n\n\nBUILD FAILED\nfile:C:/Projects/J2EE_Rocks/hw2a/build.xml:559: FAIL - Cannot remove document ba\nse for path /hello1\n\nTotal time: 1 second\nC:\\Projects\\J2EE_Rocks\\hw2a>ant deploy\nBuildfile: build.xml\n\nprepare:\n\ncompile:\n\njavadoc:\n  [javadoc] Generating Javadoc\n  [javadoc] Javadoc execution\n  [javadoc] Loading source files for package greeting...\n  [javadoc] Constructing Javadoc information...\n  [javadoc] Standard Doclet version 1.4.1\n\n  [javadoc] Building tree for all the packages and classes...\n  [javadoc] Building index for all the packages and classes...\n  [javadoc] Building index for all classes...\n\ndist:\n\ndeploy:\n   [deploy] OK - Installed application at context path /hello1\n\n\nBUILD SUCCESSFUL\nTotal time: 3 seconds\nC:\\Projects\\J2EE_Rocks\\hw2a>ant undeploy\nBuildfile: build.xml\n\nundeploy:\n [undeploy] FAIL - Cannot remove document base for path /hello1\n\n\nBUILD FAILED\nfile:C:/Projects/J2EE_Rocks/hw2a/build.xml:559: FAIL - Cannot remove document ba\nse for path /hello1\n\nTotal time: 1 second\nC:\\Projects\\J2EE_Rocks\\hw2a>\n\n", "id": 36173, "time": "2003-04-26T18:20:56Z", "creator": "bugzilla@sbdconsultants.com", "creation_time": "2003-04-26T18:20:56Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 12643, "text": "I end up having to edit conf/server.xml manually to remove the hello1 context, \nremove the webapps/hello1 and work/Standalone/localhost/hello1 folders.\n\nChanged OS to All and Version to 4.1.24.  I am running Tomcat over J2SDK SE \n1.4.01.b.\n\nI've tried restarting Tomcat between the deploy/undeploy tasks.\n\nRestarting Tomcat after I \"undeploy\" it, the manager app shows the context as \nstopped and refused to start it.\n\nThe only entry in my localhost log is the following...\n2003-04-26 12:07:34 Manager: undeploy: Undeploying web application at '/hello1'\nThere are no other lines in the log.\n", "count": 5, "id": 36174, "time": "2003-04-26T18:26:37Z", "creator": "bugzilla@sbdconsultants.com", "creation_time": "2003-04-26T18:26:37Z", "is_private": false}, {"count": 6, "tags": [], "creator": "bugzilla@sbdconsultants.com", "attachment_id": null, "text": "Neglected to mention: Ant 1.5.3...  Copied catalina-ant.jar into ant.../lib \nfolder.\n\nHere is my ant -v undeploy (after manual removal of context from Tomcat config \nand folders, ant clean, ant deploy).  Might give more clues...\n\nC:\\Projects\\J2EE_Rocks\\hw2a>ant -v undeploy\nApache Ant version 1.5.3 compiled on April 16 2003\nBuildfile: build.xml\nDetected Java version: 1.4 in: C:\\j2sdk1.4.1_02\\jre\nDetected OS: Windows 2000\nparsing buildfile build.xml with URI = file:C:/Projects/J2EE_Rocks/hw2a/build.xm\nl\nProject base dir set to: C:\\Projects\\J2EE_Rocks\\hw2a\n [property] Loading C:\\Projects\\J2EE_Rocks\\hw2a\\build.properties\n [property] Loading C:\\Documents and Settings\\sdockery\\build.properties\n [property] Unable to find property file: C:\\Documents and Settings\\sdockery\\bui\nld.properties\nBuild sequence for target `undeploy' is [undeploy]\nComplete build sequence is [undeploy, prepare, compile, reload, start, install,\njavadoc, dist, deploy, remove, list, clean, stop, all]\n\nundeploy:\n [undeploy] FAIL - Cannot remove document base for path /hello1\n\n\nBUILD FAILED\nfile:C:/Projects/J2EE_Rocks/hw2a/build.xml:559: FAIL - Cannot remove document ba\nse for path /hello1\n        at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalina\nTask.java:278)\n        at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalina\nTask.java:171)\n        at org.apache.catalina.ant.UndeployTask.execute(UndeployTask.java:113)\n        at org.apache.tools.ant.Task.perform(Task.java:341)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1339)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1255)\n        at org.apache.tools.ant.Main.runBuild(Main.java:609)\n        at org.apache.tools.ant.Main.start(Main.java:196)\n        at org.apache.tools.ant.Main.main(Main.java:235)\nCaused by: FAIL - Cannot remove document base for path /hello1\n        at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalina\nTask.java:274)\n        ... 10 more\n--- Nested Exception ---\nFAIL - Cannot remove document base for path /hello1\n        at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalina\nTask.java:274)\n        at org.apache.catalina.ant.AbstractCatalinaTask.execute(AbstractCatalina\nTask.java:171)\n        at org.apache.catalina.ant.UndeployTask.execute(UndeployTask.java:113)\n        at org.apache.tools.ant.Task.perform(Task.java:341)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1339)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1255)\n        at org.apache.tools.ant.Main.runBuild(Main.java:609)\n        at org.apache.tools.ant.Main.start(Main.java:196)\n        at org.apache.tools.ant.Main.main(Main.java:235)\n\nTotal time: 1 second\nC:\\Projects\\J2EE_Rocks\\hw2a>\n\nHTH", "id": 36175, "time": "2003-04-26T18:38:45Z", "bug_id": 12643, "creation_time": "2003-04-26T18:38:45Z", "is_private": false}, {"count": 7, "tags": [], "creator": "smcrae@pharmanet.com", "attachment_id": null, "text": "I experience the same problem using Ant 1.5.1 and Tomcat 4.1.24 running ant \nboth standalone and through Eclipse 2.1. I can use the remove/deploy \ncombination with no problem but undeploy (instead of remove) always fails.\n\nApplication was originally deployed using Ant task.", "id": 36914, "time": "2003-05-08T18:26:12Z", "bug_id": 12643, "creation_time": "2003-05-08T18:26:12Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 12643, "is_private": false, "count": 8, "id": 36927, "time": "2003-05-08T20:05:28Z", "creator": "smcrae@pharmanet.com", "creation_time": "2003-05-08T20:05:28Z", "text": "Upon further investigation I was able to fix this problem, though I believe it \nis only a workaround:\n\n1. Updated JDK to JDK1.4.1_02 (from _01) - not related as after reinstalling \nTomcat problem still appeared, I just wanted to include this step for \ncompleteness.\n\n2. In server.xml changed unpackWARS from \"true\" to \"false\" - at first this \ndidn't appear to correct the issue even after restarting Tomcat. Had to shut \ndown Tomcat, manually remove context for my app from server.xml, remove webapps \ndir for application and remove application dir from localhost and remove app \nWAR file from manager directory. After restarting Tomcat everything works as \nexpected.\n\nFYI: I am using Win2k for OS.\n\nI think that undeploy should support unpackWARS=\"true\", but apparently doesn't \nright now. Being somewhat new to Tomcat, do most users run with \nunpackWARS=\"false\" even though that is not default?\n\nFWIW, I was also getting the same error through the manager interface before \nthe changes above and now it works also.\n"}, {"count": 9, "tags": [], "bug_id": 12643, "text": "If you want to use unpacked, please use install/remove rather than \ndeploy/undeploy.\n\nQuestions of this nature are best asked (and will be answered) on the tomcat-\nuser mailing list.", "id": 55981, "time": "2004-04-18T16:54:54Z", "creator": "markt@apache.org", "creation_time": "2004-04-18T16:54:54Z", "is_private": false, "attachment_id": null}]