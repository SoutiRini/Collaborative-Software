[{"count": 0, "tags": [], "creator": "davidm@attachmate.com", "attachment_id": null, "is_private": false, "id": 127676, "time": "2009-06-05T08:37:24Z", "bug_id": 47320, "creation_time": "2009-06-05T08:37:24Z", "text": "If you receive a rewritten URL on z/os with uss (unix on a mainframe), Tomcat\ndoes not properly decode the jsessionid portion of the URL.\n\nThe problem is in org.apache.catalina.connector.CoyoteAdapter in the parseSessionId method.\n\nThe two instantiations of a String object do not specify the encdoding to use.\n\ne.g. String sid = new String(uriBC.getBuffer(), start + sessionIdStart,\n                            semicolon2 - sessionIdStart); \n\n...as well as the second String instantiation in this method.\n\nConsequently z/os uses its default encoding which (I think) is EBCDIC.\n\nIf I recompile with a hardcoded \"UTF-8\" for the encoding then the jsessionid decodes properly.  Not that I am suggesting this literally for the official fix.\n\ne.g. String sid = new String(uriBC.getBuffer(), start + sessionIdStart,\n                            semicolon2 - sessionIdStart, \"UTF-8\");"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 130710, "time": "2009-09-27T09:50:21Z", "bug_id": 47320, "creation_time": "2009-09-27T09:50:21Z", "text": "I have commited a fix to trunk (r819339) and proposed it for 6.0.x. Any feedback you can provide on the success, or not, of this patch on z/os would be appreciated."}, {"count": 2, "tags": [], "text": "This has been fixed in 6.0.x and will be included in 6.0.21 onwards.", "is_private": false, "bug_id": 47320, "id": 130853, "time": "2009-10-03T11:20:13Z", "creator": "markt@apache.org", "creation_time": "2009-10-03T11:20:13Z", "attachment_id": null}]