[{"count": 0, "tags": [], "creator": "lpv@texas.net", "is_private": false, "text": "Having a frameset with 2 JSP's causes class duplicate definition.\nSometimes I get this error with the JSP in the first frame, sometimes,\nthe second frame. In either case, the problem occurs randomly. Here is \nan example dump (copy and paste from the log file).\n\n2001-11-29 10:58:45 StandardWrapperValve[jsp]: Servlet.service() for servlet jsp \nthrew exception\njavax.servlet.ServletException: duplicate class definition: \norg/apache/jasper/runtime/JspRuntimeLibrary\n\tat \norg.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.ja\nva:457)\n\tat org.apache.jsp.search$jsp._jspService(search$jsp.java:191)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.service(JspServlet.java:1\n99)\n\tat \norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:382)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:474)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat \norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilt\nerChain.java:247)\n\tat \norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.\njava:193)\n\tat \norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:2\n43)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:2\n01)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.core.StandardContext.invoke(StandardContext.java:2344)\n\tat \norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java\n:170)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat \norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat \norg.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:462)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:163\n)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:1011\n)\n\tat \norg.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1106)\n\tat java.lang.Thread.run(Unknown Source)\n----- Root Cause -----\njava.lang.LinkageError: duplicate class definition: \norg/apache/jasper/runtime/JspRuntimeLibrary\n\tat java.lang.ClassLoader.defineClass0(Native Method)\n\tat java.lang.ClassLoader.defineClass(Unknown Source)\n\tat java.security.SecureClassLoader.defineClass(Unknown Source)\n\tat java.net.URLClassLoader.defineClass(Unknown Source)\n\tat java.net.URLClassLoader.access$100(Unknown Source)\n\tat java.net.URLClassLoader$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(Unknown Source)\n\tat \norg.apache.catalina.loader.StandardClassLoader.findClass(StandardClassLoader.jav\na:671)\n\tat \norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLoader.jav\na:1090)\n\tat \norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLoader.jav\na:989)\n\tat \norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:12\n93)\n\tat \norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:11\n56)\n\tat \norg.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:198)\n\tat \norg.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:132)\n\tat java.lang.ClassLoader.loadClassInternal(Unknown Source)\n\tat org.apache.jsp.search$jsp._jspService(search$jsp.java:130)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.service(JspServlet.java:1\n99)\n\tat \norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:382)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:474)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat \norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilt\nerChain.java:247)\n\tat \norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.\njava:193)\n\tat \norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:2\n43)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:2\n01)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.core.StandardContext.invoke(StandardContext.java:2344)\n\tat \norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java\n:170)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat \norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat \norg.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:462)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:163\n)\n\tat \norg.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat \norg.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:1011\n)\n\tat \norg.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1106)\n\tat java.lang.Thread.run(Unknown Source)", "id": 8463, "time": "2001-11-30T07:41:25Z", "bug_id": 5203, "creation_time": "2001-11-30T07:41:25Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 5203, "is_private": false, "count": 1, "id": 8467, "time": "2001-11-30T09:08:08Z", "creator": "remm@apache.org", "creation_time": "2001-11-30T09:08:08Z", "text": "There was a race condition in the StandardClassLoader which is very likely to \nbe the root cause of the problem.\nIt has been fixed some time ago in the CVS. The nightly builds have the fix, \nwhich will also be in the upcoming Tomcat 4.0.2 beta release."}, {"count": 2, "tags": [], "creator": "remm@apache.org", "is_private": false, "text": "*** Bug 5792 has been marked as a duplicate of this bug. ***", "id": 9531, "time": "2002-01-10T12:40:02Z", "bug_id": 5203, "creation_time": "2002-01-10T12:40:02Z", "attachment_id": null}]