[{"count": 0, "tags": [], "bug_id": 42395, "attachment_id": null, "text": "text decorations (underline, line-through, overline) of text in tspan elements\nappear even though the element is hidden.", "id": 103089, "time": "2007-05-11T05:05:07Z", "creator": "donotuse@lummert.net", "creation_time": "2007-05-11T05:05:07Z", "is_private": false}, {"count": 1, "tags": [], "creator": "cam@apache.org", "text": "*** Bug 43076 has been marked as a duplicate of this bug. ***", "id": 112365, "time": "2007-12-31T15:43:54Z", "bug_id": 42395, "creation_time": "2007-12-31T15:43:54Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Created attachment 23734\nReduced test case adapted from report's URL", "is_private": false, "bug_id": 42395, "id": 127521, "time": "2009-05-31T03:06:32Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2009-05-31T03:06:32Z", "attachment_id": 23734}, {"count": 3, "tags": [], "bug_id": 42395, "attachment_id": null, "text": "(In reply to comment #0)\n> text decorations (underline, line-through, overline) of text in tspan elements\n> appear even though the element is hidden.\n\nI've reduced the test case from the report's URL (and made slight improvements) and seems like this issue applies to \"text\" elements also. This hints towards \"tspan\" wrapping not being a requirement, and the report's summary was updated in accordance. ;-)\n\nThis issue is somehow related to bug 44531 and one may review it at the same time.", "id": 127522, "time": "2009-05-31T04:11:27Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2009-05-31T04:11:27Z", "is_private": false}, {"attachment_id": 29265, "tags": [], "creator": "m.s.ganzeboom@rug.nl", "text": "Created attachment 29265\nPatch to fix the painting of underline, overline and strikethrough while visibility=\"false\"", "count": 4, "id": 161637, "time": "2012-08-23T09:04:33Z", "bug_id": 42395, "creation_time": "2012-08-23T09:04:33Z", "is_private": false}, {"count": 5, "tags": [], "creator": "m.s.ganzeboom@rug.nl", "attachment_id": null, "id": 161638, "time": "2012-08-23T09:08:46Z", "bug_id": 42395, "creation_time": "2012-08-23T09:08:46Z", "is_private": false, "text": "Still found this to be true in the latest sources from SVN (i.e. 1.8pre). With a little digging I found that the paintDecorations(List, Graphics2D, int) in the StrokingTextPainter class did not check the TextPaintInfo.visible property at all. The paintDecorations method takes care of painting the underline, overline and strikethrough decorations. The TextPaintInfo instance is retrieved from the AttributedCharacterIterator instance from every TextRun object (i.e. basically 'chunks' of consecutive characters sharing the same style).\nI placed a check on the TextPaintInfo.visible property (relating to the SVG visibility property) before the decoration is finally painted.\nAs far as I can see it that solved this bug. I tried the test case provided in the attachments as wel as several tests of my own via the Squiggle browser and they all passed.\n\nI've attached the patch for StrokingTextPainter.java.\n\nI'd be happy to commit the source to the repository, but I don't know what the policy is for this project? I assume that not any random individual with a bugtracker account can commit? ;)\n\nI would say with the attached patch status of this bug is: 'WORKSFORME'."}, {"count": 6, "tags": [], "creator": "helder.magalhaes@gmail.com", "attachment_id": null, "id": 161674, "time": "2012-08-24T15:25:48Z", "bug_id": 42395, "creation_time": "2012-08-24T15:25:48Z", "is_private": false, "text": "(In reply to comment #5)\n> I placed a check on the TextPaintInfo.visible property (relating to the SVG\n> visibility property) before the decoration is finally painted.\n> As far as I can see it that solved this bug. I tried the test case provided\n> in the attachments as wel as several tests of my own via the Squiggle\n> browser and they all passed.\n> \n> I've attached the patch for StrokingTextPainter.java.\n\nThanks for your contribution! :-)\n\nI've taken a quick look and it seems fine, although I'd ask someone more familiar with that code to take a look if possible. Thomas?\n\n\n> I'd be happy to commit the source to the repository, but I don't know what\n> the policy is for this project? I assume that not any random individual with\n> a bugtracker account can commit? ;)\n\nThe policy is public [1] and, basically, meritocracy-based (the Apache way) and things a done in the open. Basically this means that if the changes were many, you'd have to sign a document (ICLA [2]) in order for us to be able to accept the patch. As in this case the changes are small, any team member can commit once sure it won't break anything.\n\n\n> I would say with the attached patch status of this bug is: 'WORKSFORME'.\n\nNope. \"Works for me\" [3] means the problem can't be reproduced, and there's not enough information to provide a fix based on the facts. Please take a look at the different issue states and their meaning before changing them. ;-)\n\n\n[1] http://www.apache.org/foundation/getinvolved.html\n[2] http://www.apache.org/dev/new-committers-guide.html\n[3] https://issues.apache.org/bugzilla/page.cgi?id=fields.html#status"}, {"count": 7, "tags": [], "creator": "deweese@apache.org", "attachment_id": null, "is_private": false, "id": 161698, "time": "2012-08-25T14:45:16Z", "bug_id": 42395, "creation_time": "2012-08-25T14:45:16Z", "text": "I've fixed the bug based on the rough outline of your patch, I think the new version is a bit safer.\nsee rev: 1377305"}, {"count": 8, "tags": [], "creator": "m.s.ganzeboom@rug.nl", "attachment_id": null, "id": 162045, "time": "2012-09-10T09:01:05Z", "bug_id": 42395, "creation_time": "2012-09-10T09:01:05Z", "is_private": false, "text": "Helder, thank you for your reply and the direct links to Apache's policy on project related matters.\nThomans, thanks for committing and fixing the bug. I just tested it. Perfectly fine."}]