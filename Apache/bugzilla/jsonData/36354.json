[{"count": 0, "tags": [], "creator": "Anthony.Marendy@suncorp.com.au", "attachment_id": null, "is_private": false, "id": 78977, "time": "2005-08-25T12:38:38Z", "bug_id": 36354, "creation_time": "2005-08-25T12:38:38Z", "text": "The server seems to have a bug in the code which checks to see if a version \nalready exists in a workspace.  In the following example, I add the \nhref /slide/history/4/1.0 after the href\n/slide/history/40/1.0.\n\n(Note history/4 vs history/40)\n\nHere is a copy of a WebDav client session where I create a brand new\nworkspace, and then add the two hrefs.\n\n[LOCALHOST:/slide/workspace/] C:\\ $ mkws test\nMaking '/slide/workspace/test' workspace: succeeded.\n[LOCALHOST:/slide/workspace/] C:\\ $ cd test\n[LOCALHOST:/slide/workspace/test/] C:\\ $ versioncontrol\n/slide/history/40/1.0 href_40\ncreating versioncontroled Resource '/slide/history/40/1.0' based on\n'/slide/workspace/test/href_40' : succeeded.\n[LOCALHOST:/slide/workspace/test/] C:\\ $ set debug on\n[LOCALHOST:/slide/workspace/test/] C:\\ $ The debug flag is on.\n[LOCALHOST:/slide/workspace/test/] C:\\ $ versioncontrol /slide/history/4/1.0\nhref_4\ncreating versioncontroled Resource '/slide/history/4/1.0' based on\n'/slide/workspace/test/href_4' :\n>>>>>>>  to  server  ---------------------------------------------------\nVERSION-CONTROL /slide/workspace/test/href_4 HTTP/1.1\nAuthorization: Basic cm9vdDpyb290\nContent-Type: text/xml; charset=utf-8\nUser-Agent: Jakarta Commons-HttpClient/2.0final\nHost: localhost:8081\nCookie: $Version=0; JSESSIONID=52CE7E03E879703D9644AD51C8599034;\n$Path=/slide\nContent-Length: 153\nDepth: 0\n\n<D:version-control xmlns:D=\"DAV:\">\n   <D:version>\n      <D:href>\n            /slide/history/4/1.0\n      </D:href>\n   </D:version>\n</D:version-control>\n------------------------------------------------------------------------\n\n<<<<<<< from server  ---------------------------------------------------\nHTTP/1.1 409 Conflict\nPragma: No-cache\nCache-Control: no-cache\nExpires: Thu, 01 Jan 1970 10:00:00 EST\nContent-Type: text/xml;charset=UTF-8\nTransfer-Encoding: chunked\nDate: Thu, 18 Aug 2005 21:28:57 GMT\nServer: Apache-Coyote/1.1\n\n<D:error xmlns:D=\"DAV:\">\n   <D:one-version-controlled-resource-per-history-per-workspace>\n   </D:one-version-controlled-resource-per-history-per-workspace>\n</D:error>\n------------------------------------------------------------------------\nfailed.\nConflict (409)\n[LOCALHOST:/slide/workspace/test/] C:\\ $\n\n\n\nThe operation works just fine if I add href /slide/history/4/1.0 before \nhref /slide/history/40/1.0.\n\n\nRegards,\nAnthony."}]