[{"count": 0, "text": "Users are returned 404-errors when browsing URIs with special characters \nthrough an apache forward-proxy (mod_proxy). Etherreal-dump of the conversation \nshows that the URIs are encoded somewhat strange by Apache.\n\nI.e. when a client requests the URI \n   http://hostname/Kursp%C3%A5logg.html\nApache is trying to get \n   http://hostname/Kursp\\303%A5logg.html\nfrom the source web-server.\n\nThis occurs whenever there is norwegian characters in the URI.\n\nHere is a snippet from my config:\n\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_connect_module modules/mod_proxy_connect.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\n\n<Virtualhost *:8080>\nDocumentroot \"c:\\apache\\apache2\\proxy\"\nProxyRequests On\nProxyRemote * http://x.x.x.x:8080\nProxyDomain .sshf.no\nProxyVia On\n\t<proxy http://>\n\tdeny from all\n\t</proxy>\n\t<proxy http://www.domain.com/>\n\tallow from all\n\t</proxy>\n</virtualhost>", "bug_id": 38980, "attachment_id": null, "id": 86853, "time": "2006-03-15T12:50:08Z", "creator": "john.fredrik.olstorn@sshf.no", "creation_time": "2006-03-15T12:50:08Z", "tags": [], "is_private": false}, {"count": 1, "text": "Created attachment 17899\nEtherreal-dump of proxy conversation", "bug_id": 38980, "is_private": false, "id": 86854, "time": "2006-03-15T12:52:12Z", "creator": "john.fredrik.olstorn@sshf.no", "creation_time": "2006-03-15T12:52:12Z", "tags": [], "attachment_id": 17899}, {"count": 2, "text": "Created attachment 17900\nApache config", "bug_id": 38980, "is_private": false, "id": 86855, "time": "2006-03-15T12:57:02Z", "creator": "john.fredrik.olstorn@sshf.no", "creation_time": "2006-03-15T12:57:02Z", "tags": [], "attachment_id": 17900}, {"count": 3, "tags": [], "bug_id": 38980, "text": "Unable to reproduce it in 2.3 Head\nUsing the same conf as described in bugreport, with\nProxyPass /http http://vayavyam.india.sun.com:8000\n\nThe ssltap trasnscipt is below.\nAs you can see, the URL that is passed on is not munged.\n\n\nFrom Browser to Apache\n=========================\n--> [\nGET /http/Kursp%C3%A5logg.html HTTP/1.1\nUser-Agent: Opera/9.23 (Windows NT 5.0; U; en)\nHost: vayavyam.india.sun.com:8081\nAccept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, \nimage/jpeg, image/gif, image/x-xbitmap, */*;q=0.1\nAccept-Language: en-US,en;q=0.9\nAccept-Charset: iso-8859-1, utf-8, utf-16, *;q=0.1\nAccept-Encoding: deflate, gzip, x-gzip, identity, *;q=0\nCookie: nfSettings=11210111%7C%7Cen_US%7C%7C0%7C60%7C-1%7C%7Cweek%7C-1; \nnfTimeStamps=19700101000000%7C19700101000000%7C19700101000000; \nonestopunique=11.1.106.15.21.19; onestopfiles=/x64/sfx4100/index.shtml%26/%26/\nsunone/s1ws.shtml%26/sunone/s1proxy.shtml; onestopbadge=nocookie; \nSUN_ID=129.147.158.20:437561120635865; SessionCredentials=8900939782656680756; \ns_cc=true; s_sq=\nCookie2: $Version=1\nPragma: no-cache\nCache-Control: no-cache\nConnection: Keep-Alive\n\n]\n\nFrom Apache to backend server.\n=========================\n--> [\nGET /Kursp%C3%A5logg.html HTTP/1.1\nHost: vayavyam.india.sun.com:8000\nUser-Agent: Opera/9.23 (Windows NT 5.0; U; en)\nAccept: text/html, application/xml;q=0.9, application/xhtml+xml, image/png, \nimage/jpeg, image/gif, image/x-xbitmap, */*;q=0.1\nAccept-Language: en-US,en;q=0.9\nAccept-Charset: iso-8859-1, utf-8, utf-16, *;q=0.1\nAccept-Encoding: deflate, gzip, x-gzip, identity, *;q=0\nCookie: nfSettings=11210111%7C%7Cen_US%7C%7C0%7C60%7C-1%7C%7Cweek%7C-1; \nnfTimeStamps=19700101000000%7C19700101000000%7C19700101000000; \nonestopunique=11.1.106.15.21.19; onestopfiles=/x64/sfx4100/index.shtml%26/%26/\nsunone/s1ws.shtml%26/sunone/s1proxy.shtml; onestopbadge=nocookie; \nSUN_ID=129.147.158.20:437561120635865; SessionCredentials=8900939782656680756; \ns_cc=true; s_sq=\nCookie2: $Version=1\nPragma: no-cache\nCache-Control: no-cache\nMax-Forwards: 10\nVia: 1.1 agneyam:8081\nX-Forwarded-For: 129.158.224.78\nX-Forwarded-Host: vayavyam.india.sun.com:8081\nX-Forwarded-Server: agneyam\nConnection: Keep-Alive\n\n]\n\nFrom backend server to apache\n=========================\n<-- [\nHTTP/1.1 404 Not found\nDate: Fri, 31 Aug 2007 13:22:09 GMT\nServer: Sun-Java-System-Web-Proxy-Server/4.0.4\nContent-length: 292\nContent-type: text/html\nVia: 1.1 agneyam:8081\nKeep-Alive: timeout=5, max=100\nConnection: Keep-Alive\n\n]\n\nFrom Apache to browser\n=========================\n<-- [\nHTTP/1.1 404 Not found\nServer: Sun-Java-System-Web-Proxy-Server/4.0.4\nDate: Fri, 31 Aug 2007 13:22:09 GMT\nContent-length: 292\nContent-type: text/html\n\n<HEAD><META HTTP-EQUIV=\"Content-Type\" CONTENT=\"text/html;charset=ISO-8859-\n1\"><TITLE>Not Found</TITLE></HEAD>\n<H1>Not Found</H1> The requested object does not exist on this server. The link \nyou followed is either outdated, inaccurate, or the server has been instructed \nnot to let you have it.\n\n] \n", "id": 107547, "time": "2007-08-31T07:03:13Z", "creator": "rahul.g.nair@gmail.com", "creation_time": "2007-08-31T07:03:13Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 38980, "attachment_id": null, "id": 107857, "time": "2007-09-08T07:24:47Z", "creator": "nick@webthing.com", "creation_time": "2007-09-08T07:24:47Z", "is_private": false, "text": "I've just tested it as forward-proxy, and the backend gets exactly\n\"/Kursp%C3%A5logg.html\".  That's with 2.2.5.\n\nPlease repoen if you still have the problem with 2.2.6."}]