[{"count": 0, "tags": [], "creator": "jan.m.danielsson@gmail.com", "text": "My web application uses mod_lua and mod_dbd (with sqlite3).  If I use DBDInitSQL to set foreign_keys=ON for the connection objects, I start getting \"schema has changed\" errors when using the prepared statements.  According to the sqlite3 documentation this can happen under the circumstance that sqlite3_prepare() is used instead of sqlite3_prepare_v2() and PRAGMA foreign_keys=ON is set *after* statement has been prepared with sqlite3_prepare().\n\nFor some more details, see https://bz.apache.org/bugzilla/show_bug.cgi?id=58668.\n\nI took a quick glance at mdm_dbd.c but it's not immediately obvious to me in which order these statements will be processed.  I assumed that DBDInitSQL is always executed before any DBDPrepareSQL statements, or at the very least that placing DBDInitSQL before any DBDPrepareSQL statements would cause it to be executed first, but the error I'm getting suggests that this isn't true.", "id": 186644, "time": "2015-11-30T01:30:05Z", "bug_id": 58669, "creation_time": "2015-11-30T01:30:05Z", "is_private": false, "attachment_id": null}]