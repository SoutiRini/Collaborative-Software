[{"count": 0, "tags": [], "bug_id": 40728, "attachment_id": null, "id": 94729, "time": "2006-10-11T12:15:10Z", "creator": "nc-heuelhe@netcologne.de", "creation_time": "2006-10-11T12:15:10Z", "is_private": false, "text": "Some MBeans use non-serializable classes, the attributes cannot be accessed by \na JMX console like jconsole.\nIn particular this are:\nAttribute managedResource of MBean Catalina:type=Engine is not available:\njava.io.NotSerializableException: org.apache.catalina.util.LifecycleSupport\nAttribute realm of MBean Catalina:type=Engine is not available:\njava.io.NotSerializableException: org.apache.catalina.realm.UserDatabaseRealm\nAttribute managedResource of MBean Catalina:type=Host,host=localhost is not \navailable:\njava.io.NotSerializableException: org.apache.catalina.util.LifecycleSupport\nAttribute saveProperties of MBean Catalina:type=JkMain is not available:\njavax.management.AttributeNotFoundException: Cannot find attribute \nsaveProperties get method name\nttribute workerEnv of MBean Catalina:type=JkMain is not available:\njava.io.NotSerializableException: org.apache.jk.core.WorkerEnv\nAttribute globalProcessor of MBean Catalina:type=RequestProcessor,worker=http-\n8080,name=HttpRequest0 is not available:\njava.io.NotSerializableException: org.apache.coyote.RequestGroupInfo\nAttribute managedResource of MBean Catalina:type=Server is not available:\njava.io.NotSerializableException: org.apache.catalina.core.StandardServer\nAttribute jkMain of MBean \nCatalina:type=protocolHandler,className=org.apache.jk.server.JkCoyoteHandler is \nnot available:\njava.io.NotSerializableException: org.apache.jk.server.JkMain\nAttribute workerEnv of MBean \nCatalina:type=protocolHandler,className=org.apache.jk.server.JkCoyoteHandler is \nnot available:\njavax.management.AttributeNotFoundException: Cannot find attribute workerEnv \nget method name"}, {"count": 1, "tags": [], "bug_id": 40728, "attachment_id": null, "is_private": false, "id": 96698, "time": "2006-12-09T21:40:48Z", "creator": "markt@apache.org", "creation_time": "2006-12-09T21:40:48Z", "text": "Updating attributes and marking as an enhancement request."}, {"count": 2, "tags": [], "text": "Mmm, it's tempting to just add \"extends Serializable\" to the Lifecycle and\nLifecycleListener interfaces, and \"implements Serializable\" to the\nLifecycleSupport class.  However, that's a bit risky as we might have all sorts\nof things that implement LifecycleListener and Lifecycle, and some of them may\nbe custom user classes, and some may not be Serializable.\n\nOTOH, I wonder if that would really cause any damage.\n\nWhat specific Tomcat version were you working with?  I'd like to replace nightly\nwith an exact value.", "attachment_id": null, "id": 97350, "creator": "yoavs@computer.org", "time": "2006-12-26T16:34:56Z", "bug_id": 40728, "creation_time": "2006-12-26T16:34:56Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "ondra@dynawest.cz", "is_private": false, "id": 145544, "time": "2011-04-04T12:56:52Z", "bug_id": 40728, "creation_time": "2011-04-04T12:56:52Z", "tags": [], "text": "Added Bug 51018 for Tomcat 6 since BZ doesn't support marking it for multiple versions / projects.\n\nBTW why this is an \"enhancement\" if it's normal bug which breaks functionality of JMX methodss of which it's solely purpose?"}, {"count": 4, "attachment_id": null, "bug_id": 40728, "is_private": false, "id": 145546, "time": "2011-04-04T13:00:42Z", "creator": "markt@apache.org", "creation_time": "2011-04-04T13:00:42Z", "tags": [], "text": "*** Bug 51018 has been marked as a duplicate of this bug. ***"}, {"count": 5, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 145548, "creation_time": "2011-04-04T13:05:36Z", "time": "2011-04-04T13:05:36Z", "bug_id": 40728, "text": "Restoring the setting of enhancement.\n\nThere are a number of attributes that were exposed for use by by in-process tools (such as the old admin app). Since they were not for remote management, they are not serializable. Cleaning that up and removing them / making them serializable is an enhancement.\n\nI'm guessing that the NEEDINFO status was related to the question about verions. I don't think a version is needed to address this so I'm not restoring that status.", "attachment_id": null}, {"count": 6, "tags": [], "creator": "jessh@ptc.com", "attachment_id": null, "id": 146056, "time": "2011-05-01T13:51:58Z", "bug_id": 40728, "creation_time": "2011-05-01T13:51:58Z", "is_private": false, "text": "I believe it is important to be able to get to data that would be of interest from jconsole/VisualVM.  This means more than just being Serializable.  It also means sticking to classes that are built into the JDK and classes that jconsole/VisualVM do a decent job of displaying.  *Ideally* this means sticking to so called \"open\" MBean types (primitives [and object versions thereof], Strings, Dates, ObjectNames, CompositeData, TabularData, and arrays of any dimension of any of these).  In Java 6 and higher if you use MXBeans then one can have CompositeData automatically produced for other classes automatically if your classes follow certain rules.\n\nAll that said, there are inevitably some attributes that are useful in-process or even by specialized remote clients that one wishes to convey with other types.  Unless the MXBean trick works for you in the case in question, this means breaking the rules with some attributes.  That's fine as long as those attributes aren't really interesting in jconsole/VisualVM *or* you provide alternative attribute(s) for use by jconsole/VisualVM.\n\nI'm commenting here based on Mark's request for review and votes where appropriate.  I'm tempted to vote on this -- but would not do so if the resulting action was merely to remove MBean attributes that are not serializable.  I also do not have a sense for how many attributes that would be of interest in jconsole/VisualVM currently have no useful representation there."}, {"count": 7, "tags": [], "text": "(In reply to comment #6)\n> I'm commenting here based on Mark's request for review and votes where\n> appropriate.  I'm tempted to vote on this -- but would not do so if the\n> resulting action was merely to remove MBean attributes that are not\n> serializable.  I also do not have a sense for how many attributes that would be\n> of interest in jconsole/VisualVM currently have no useful representation there.\n\nI'm all for improving what is available in JMX. Some progress has been made (https://blogs.apache.org/tomcat/entry/tomcat_7_trunk_and_jmx) but it isn't clear to me what needs to be next. A list of things folks would like to access but currently can't would be a big help. There is still scope to add to the API for Tomcat 7 but note that anything that changes the existing API is likely going to have to wait until Tomcat 8.", "attachment_id": null, "bug_id": 40728, "id": 146059, "time": "2011-05-01T18:12:44Z", "creator": "markt@apache.org", "creation_time": "2011-05-01T18:12:44Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 40728, "attachment_id": null, "text": "Implementing MXBeans would be the better solution IMO, but this would mean starting API changes.\n\nIt looks like JMX is getting some attention in the next version(s) of Java.  If Tomcat 8 implements a spec which mandates Java 7, there maybe other beneficial features of JMX to incorporate.", "id": 146070, "time": "2011-05-02T20:06:34Z", "creator": "bugzilla@pidster.com", "creation_time": "2011-05-02T20:06:34Z", "is_private": false}, {"count": 9, "tags": [], "text": "I'd be glad to have more info about classloaders. From what I see now in Tomcat 6 there's only few traits about WebClassLoader and ServletLoader, no info about loaded classes etc.", "attachment_id": null, "bug_id": 40728, "id": 146174, "time": "2011-05-06T19:30:12Z", "creator": "ondra@dynawest.cz", "creation_time": "2011-05-06T19:30:12Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 40728, "attachment_id": null, "id": 146175, "time": "2011-05-06T19:31:38Z", "creator": "ondra@dynawest.cz", "creation_time": "2011-05-06T19:31:38Z", "is_private": false, "text": "Afterall - where would you like to gather these suggestions for JMX enhancements?"}, {"count": 11, "tags": [], "creator": "jessh@ptc.com", "attachment_id": null, "is_private": false, "id": 146176, "time": "2011-05-06T19:36:41Z", "bug_id": 40728, "creation_time": "2011-05-06T19:36:41Z", "text": "As best I can tell there are almost no JMX enhancements whatsoever in Java 7. Requiring Java 6 is sufficient to get MXBeans, etc.\n\n[I'm still using CompositeData and TabularData despite being on Java 6 -- simply to provide descriptions for each field and type.  Perhaps there's a nice facility to specify these for MXBeans via annotations that I'm missing...]"}, {"count": 12, "tags": [], "bug_id": 40728, "is_private": false, "id": 152333, "creation_time": "2011-12-20T20:32:40Z", "time": "2011-12-20T20:32:40Z", "creator": "markt@apache.org", "text": "This Tomcat 5 enhancement request has been moved to Tomcat 7 (the latest version) since Tomcat 5 development is limited and focussed on bugs and security issues whereas Tomcat 7 is still seeing new feature development.", "attachment_id": null}, {"count": 13, "tags": [], "text": "Them current scope of this issue is too broad for there to be meaningful progress. What would help enormously is a prioritised list (as long or as short as you like) of attributes that you would like to see accessible that aren't currently.\n\nI'd be happy to see lists from multiple folks.\n\nWithout some form of priority there are so many attributes that aren't accessible, I don't see anyone just starting to work through them all.", "attachment_id": null, "bug_id": 40728, "id": 152812, "time": "2012-01-15T21:47:58Z", "creator": "markt@apache.org", "creation_time": "2012-01-15T21:47:58Z", "is_private": false}, {"count": 14, "attachment_id": null, "creator": "markt@apache.org", "is_private": false, "id": 170156, "time": "2013-09-18T12:58:15Z", "bug_id": 40728, "creation_time": "2013-09-18T12:58:15Z", "tags": [], "text": "No list has been forthcoming in well over 18 months."}]