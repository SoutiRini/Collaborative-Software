[{"count": 0, "attachment_id": null, "creator": "steve.morrison@labs.gte.com", "text": " ", "id": 35006, "time": "2003-04-11T17:48:46Z", "bug_id": 18964, "creation_time": "2003-04-11T17:48:46Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "text": "<str:encodeUrl>desayu\u00f1o</str:encodeUrl> should return desayu%F1o.  Instead it\nreturns desayu%3Fo which is desayu?o.  All accents are converted to ?.", "attachment_id": null, "id": 35008, "creator": "steve.morrison@labs.gte.com", "time": "2003-04-11T17:51:32Z", "bug_id": 18964, "creation_time": "2003-04-11T17:51:32Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 18964, "attachment_id": null, "id": 53785, "time": "2004-03-10T05:21:39Z", "creator": "nagoya@felipeal.net", "creation_time": "2004-03-10T05:21:39Z", "is_private": false, "text": "Steve,\n\n<str:encodeUrl> calls java.net.EncodeURL.encode(text) to encode the text.\n\nThe solution for your problem would be calling\njava.net.EncodeURL.encode(text,encoding), but that method is only available on\nJ2SE 1.4.\n\nWe could add an attribute encoding for this tag and check the J2SE version at\nruntime:\n\n\n    public String changeString(String text) throws JspException {\n\n      String result = null;\n      if ( this.encoding != null ) {\n        try {\n          result = URLEncoder.encode( text, this.encoding );\n        } catch( NoSuchMethodError exc ) {\n          System.err.println( \"WARNING: attribute encoding on tag encodeUrl\nshould be used only in  a \" +\n                            \"J2SE 1.4 compatible web container. Using default\ncontainer.\");\n        } catch( UnsupportedEncodingException exc2 ) {\n          System.err.println( \"WARNING: unsupported encoding used on tag\nencodeUrl: \" + this.encoding );\n        }\n      }\n      if ( result == null ) {\n        result = URLEncoder.encode(text);\n      }\n      return result;\n      \n    }\n\n\nSo, Hen, what do you think about it? If you give me an ok, I will commit these\nchanges on CVS. Otherwise, we should mark it as WON'T FIX.\n\nFelipe\n\n"}, {"count": 3, "tags": [], "bug_id": 18964, "attachment_id": null, "id": 53851, "time": "2004-03-11T05:20:39Z", "creator": "bayard@apache.org", "creation_time": "2004-03-11T05:20:39Z", "is_private": false, "text": "Sounds good to me. Feel free to go ahead with the change."}, {"count": 4, "tags": [], "bug_id": 18964, "attachment_id": null, "id": 53862, "time": "2004-03-11T12:19:46Z", "creator": "nagoya@felipeal.net", "creation_time": "2004-03-11T12:19:46Z", "is_private": false, "text": "I committed the changes on CVS, but I won't mark it as fixed yet as I couldn't\ntest it - my Linux setup is still messing with encoding.\n\nI'm pretty sure the code is fine because the same code worked standalone (i.e.,\noutside Tomcat). Anyway, I'll be attaching a test case."}, {"count": 5, "tags": [], "bug_id": 18964, "attachment_id": 10756, "id": 53863, "time": "2004-03-11T12:21:47Z", "creator": "nagoya@felipeal.net", "creation_time": "2004-03-11T12:21:47Z", "is_private": false, "text": "Created attachment 10756\nTest case (JSP page)"}, {"count": 6, "tags": [], "creator": "nagoya@felipeal.net", "attachment_id": null, "text": "I rolled back the changes because it broke the build: in order to fix it, the\nwhole project should be compiled against J2SE 1.4, which is not a good idea.\n\nAnyway, I'm attaching my changes as a patch.", "id": 53944, "time": "2004-03-13T01:06:10Z", "bug_id": 18964, "creation_time": "2004-03-13T01:06:10Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 18964, "attachment_id": 10772, "id": 53945, "time": "2004-03-13T01:06:51Z", "creator": "nagoya@felipeal.net", "creation_time": "2004-03-13T01:06:51Z", "is_private": false, "text": "Created attachment 10772\nZip file with the changed files"}]