[{"count": 0, "tags": [], "creator": "mario@ops.co.at", "attachment_id": null, "is_private": false, "id": 57393, "time": "2004-05-14T09:33:15Z", "bug_id": 28971, "creation_time": "2004-05-14T09:33:15Z", "text": "I am not sure if this is a new bug (i have used tomcat4 for now and the .24\nrelease is my first try to move to tomcat5).\n\nTomcat (now) sets two cookies - one for the root-context and one for the\napplication context - say (/opsjs).\n\nNow on every request two cookies are sent to tomcat - one session-id for the\nroot context and one for the application-context. But it looks like tomcat cant\nhandle this case - maybe only the first cookie is processed and this do not\nmatch to the cookie-list for the application-context (just an idea) - so a new\nsession is started and a new cookie sent to the browser.\n\nI have had to disable the cookies on the root context.\n<Context path=\"\" docBase=\"ROOT\" debug=\"0\" cookies=\"false\"/> \n\nThen the application works like expected - only one cookie is sent.\n\nThe definition of the application context is:\n<Context path=\"/opsjs\"\n        docBase=\"/u/opsj\"\n        crossContext=\"false\"\n        debug=\"0\"\n        reloadable=\"false\"\n        trusted=\"false\" >\n...\n\nSince another user experienced the same problem i decided to enter this (new)\nbehaviour as critical."}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 57402, "time": "2004-05-14T11:20:41Z", "bug_id": 28971, "creation_time": "2004-05-14T11:20:41Z", "text": "This is now fixed."}, {"count": 2, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 57403, "time": "2004-05-14T11:22:28Z", "bug_id": 28971, "creation_time": "2004-05-14T11:22:28Z", "text": "  Index: CoyoteAdapter.java\n  ===================================================================\n  RCS file:\n/home/cvs/jakarta-tomcat-catalina/catalina/src/share/org/apache/coyote/tomcat5/CoyoteAdapter.java,v\n  retrieving revision 1.25\n  retrieving revision 1.26\n  diff -u -r1.25 -r1.26\n  --- CoyoteAdapter.java\t28 Apr 2004 22:05:10 -0000\t1.25\n  +++ CoyoteAdapter.java\t14 May 2004 11:00:25 -0000\t1.26\n  @@ -295,6 +295,9 @@\n               return false;\n           }\n   \n  +        // Parse session Id\n  +        parseSessionCookiesId(req, request);\n  +\n           return true;\n       }\n   \n  @@ -352,6 +355,14 @@\n               request.setRequestedSessionId(null);\n               request.setRequestedSessionURL(false);\n           }\n  +\n  +    }\n  +\n  +\n  +    /**\n  +     * Parse session id in URL.\n  +     */\n  +    protected void parseSessionCookiesId(Request req, CoyoteRequest request) {\n   \n           // Parse session id from cookies\n           Cookies serverCookies = req.getCookies();\n"}, {"count": 3, "attachment_id": 11548, "creator": "remm@apache.org", "text": "Created attachment 11548\nExtract the package in the Tomcat installation folder", "id": 57415, "time": "2004-05-14T14:43:28Z", "bug_id": 28971, "creation_time": "2004-05-14T14:43:28Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "text": "Created attachment 11549\nExtract the package in the Tomcat installation folder (zip format)", "is_private": false, "bug_id": 28971, "id": 57416, "time": "2004-05-14T14:44:07Z", "creator": "remm@apache.org", "creation_time": "2004-05-14T14:44:07Z", "attachment_id": 11549}]