[{"count": 0, "tags": [], "bug_id": 5461, "attachment_id": null, "text": "I'm seeing a problem where javax.xml.transform.sax.SAXSource, getSystemId() is retuning \"\", \nwhere the Sun JAXP 1.1 CTS tests are expecting a null return. I'm opening this bug against xerces, \nbut I could easily be convinced that xalan is at fault.\n\nI'm using:\nxerces-J 1.4.4\nxalan ?? \n(it's the version that comes with Sun's 1.1.3 xml-java pack)\nWindows 2k, Intel\n\nHere's a \nbottom-up description of what is \nhappening.\n\norg/apache/xerces/readers/DefaultEntityHandler.java, in \nexpandSystemId(), returns the empty string (\"\") when passed a null systemId. The comment here \nlooks like somebody was concerned about this \nchange.\n\norg/apache/xerces/parsers/SAXParser.java, in startDocument(), calls \nsetDocumentLocator() on the content handler, passing in a DefaultEntityHandler instance as \nthe sole argument.\n\nIn xalan (org/apache/xalan/processor/StylesheelHandler.java, in \nsetDocumentLocator()), the DefaultEntityHandler (which implements Locator) is used when \nconstructing a new SAXSourceLocator().\n\nIn xalan's \norg/apache/xml/utils/SAXSourceLocator ctor, it sets its systemId member varibale from \nLocator.getSystemId().\n\nSAXSourceLocator's super-interface, \njavax.xml.transform.sax.SourceLocator, is spec'ed to return null from getSystemId(). It's \nirritating that javax.xml.transform.Source is spec'ed to return null if setSystemId has not \nbeen called. It would be really nice if the two interfaces agreed.\n\nA potential fix to this \nindividual problem is to have the SAXSourceLocator ctor check to see if \n(\"\".equals(locator.getSystemId()) and set the systemId to null. \nI'm just concerned that the \n\"\" return expandSystemId() back up in the DefaultEntityHandler will cause problems in other \nareas.\n\nSorry to have marked this as a blocker, but for any J2EE 1.3 vendor that wants to use \nxerces instead of crimson as the JAXP 1.1 compliant parser, this problem needs to be fixed.", "id": 8975, "time": "2001-12-17T11:21:54Z", "creator": "jrr@silverstream.com", "creation_time": "2001-12-17T11:21:54Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 5461, "is_private": false, "text": "You might want to try this under Xerces2 beta 3 (or beta 4, which should be out \ntoday).  This parser is already being used in other environments that are \nmoving towards J2EE 1.3 certification.", "id": 8979, "time": "2001-12-17T13:55:43Z", "creator": "neilg@ca.ibm.com", "creation_time": "2001-12-17T13:55:43Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "jrr@silverstream.com", "text": "We need to pass the CTS using the parser that we plan to ship to our customers. With xerces Java 2 \nstill being in beta, we don't feel comfortable shipping it as the default parser for our products.", "id": 8980, "time": "2001-12-17T14:54:17Z", "bug_id": 5461, "creation_time": "2001-12-17T14:54:17Z", "tags": [], "is_private": false}]