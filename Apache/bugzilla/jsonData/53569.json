[{"attachment_id": 29078, "tags": [], "creator": "nick.heyworth@altova.com", "is_private": false, "count": 0, "id": 160728, "time": "2012-07-19T08:17:22Z", "bug_id": 53569, "creation_time": "2012-07-19T08:17:22Z", "text": "Created attachment 29078\nAttempts to draw a line\n\nThere are multiple issues with SVG. See the attached FO files, that attempt to draw a line and display an image.\n\nBoth work with FOP 0.95; both fail with FOP 1.1 RC (20120718 build)."}, {"attachment_id": 29079, "tags": [], "creator": "nick.heyworth@altova.com", "is_private": false, "count": 1, "id": 160729, "time": "2012-07-19T08:18:01Z", "bug_id": 53569, "creation_time": "2012-07-19T08:18:01Z", "text": "Created attachment 29079\nAttempts to display an image"}, {"count": 2, "tags": [], "bug_id": 53569, "attachment_id": 29080, "text": "Created attachment 29080\nThe image used by image.fo", "id": 160730, "time": "2012-07-19T08:18:29Z", "creator": "nick.heyworth@altova.com", "creation_time": "2012-07-19T08:18:29Z", "is_private": false}, {"count": 3, "tags": [], "creator": "psancho.asf@gmail.com", "attachment_id": null, "id": 160740, "time": "2012-07-20T07:26:53Z", "bug_id": 53569, "creation_time": "2012-07-20T07:26:53Z", "is_private": false, "text": "For me, the whole test case works as expected against *all* FOP versions, including trunk.\n\nNote that there is no build number in FOP release process, as you refer to the build 20120718.\nPerhaps that build is made by a third party, and perhaps there is something wrong in it.\n\nFor further investigation, you should dive into, or give, more info:\n - platform (OS + JVM)\n - how did you get the FOP 1.1RC1 release\n - how do you run it\n - trace log\n - pdf output\n - etc.\n\nFeel free to reopen if you have further info that allow somebody to reproduce this issue."}, {"count": 4, "tags": [], "text": "I downloaded the build from here:\n\nhttp://ci.apache.org/projects/xmlgraphics/fop/snapshots/\n\nWith \"20120718 build\" I was referring to the file I downloaded (fop-20120718-bin.zip).\n\nI just tested with fop-20120719-bin.zip, and using SVG still results in the same problem: When opening the PDF file, Acrobat Reader displays \"An error exists on this page. Acrobat Reader may not display the page correctly [...]\", and the image is not present nithe PDF file.\n\nMy platform is Windows 7 Enterprise SP1; I run it as \"fop.bat -fo image.fo -pdf out.pdf\".\n\nI will attach the resulting PDF file.", "attachment_id": null, "bug_id": 53569, "id": 160742, "time": "2012-07-20T07:50:41Z", "creator": "nick.heyworth@altova.com", "creation_time": "2012-07-20T07:50:41Z", "is_private": false}, {"count": 5, "tags": [], "text": "Created attachment 29083\nThe resulting PDF document", "attachment_id": 29083, "bug_id": 53569, "id": 160743, "time": "2012-07-20T07:51:39Z", "creator": "nick.heyworth@altova.com", "creation_time": "2012-07-20T07:51:39Z", "is_private": false}, {"count": 6, "attachment_id": null, "bug_id": 53569, "is_private": false, "id": 160744, "time": "2012-07-20T07:58:44Z", "creator": "psancho.asf@gmail.com", "creation_time": "2012-07-20T07:58:44Z", "tags": [], "text": "always not reproducible for me.\nWhat java version/vendor do you use?\nCan you provide a trace log?"}, {"count": 7, "tags": [], "text": "- java -version gives\n\njava version \"1.6.0_31\"\nJava(TM) SE Runtime Environment (build 1.6.0_31-b05)\nJava HotSpot(TM) 64-Bit Server VM (build 20.6-b01, mixed mode)\n\n- Calling fop.bat with -d gives the trace attached as trace.txt.", "attachment_id": null, "id": 160745, "creator": "nick.heyworth@altova.com", "time": "2012-07-20T08:04:46Z", "bug_id": 53569, "creation_time": "2012-07-20T08:04:46Z", "is_private": false}, {"count": 8, "tags": [], "text": "Created attachment 29084\nOutput from fop.bat -d", "is_private": false, "id": 160746, "creator": "nick.heyworth@altova.com", "time": "2012-07-20T08:05:20Z", "bug_id": 53569, "creation_time": "2012-07-20T08:05:20Z", "attachment_id": 29084}, {"count": 9, "tags": [], "bug_id": 53569, "attachment_id": null, "id": 160748, "time": "2012-07-20T08:45:18Z", "creator": "psancho.asf@gmail.com", "creation_time": "2012-07-20T08:45:18Z", "is_private": false, "text": "(In reply to comment #8)\n> Created attachment 29084 [details]\n> Output from fop.bat -d\n\nI found something wrong in your trace:\n\"target-resolution set to: 0.0dpi (px2mm=Infinity)\nuserconfig is null\nuserconfig is null\"\n\ntarget-resolution defaults to 72.0dpi, so you have something wrong in your config file, can you check that point?"}, {"count": 10, "tags": [], "text": "Thanks, some progress made. I just realized that FOP 1.1 doesn't use a config file by default. In my FOP 0.95 installation I had (long ago) added\n\n-c \"%LOCAL_FOP_HOME%conf/fop.xconf\"\n\nWhen I add this to my FOP 1.1 installation, Acrobat reader no longer displays an error message. However, for the image to be rendered,\nI need to take additional steps:\n\n- In the FOP 0.95 config file, I had commented out <base>.</base> after observing it prevented URLs being resolved relative to the FO file\n  (our images are usually stored relative to the FO file). But doing the same in the FOP 1.1 config file doesn't help. Has anything changed here?\n  What configuration is required for an image URL to be resolved relative to the FO file?\n\n- Since I currently can't get relative URLs to work, I tried an absolute URL. FOP 1.1 seems to be stricter about URL syntax than FOP 0.95.\n  E.g. FOP 0.95 accepts url(C:\\Temp\\Boxes.svg), but with FOP 1.1 I need to write url(file:///C:/Temp/Boxes.svg). Has anything changed here?", "is_private": false, "id": 160750, "creator": "nick.heyworth@altova.com", "time": "2012-07-20T09:59:06Z", "bug_id": 53569, "creation_time": "2012-07-20T09:59:06Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "psancho.asf@gmail.com", "attachment_id": null, "id": 160756, "time": "2012-07-20T11:55:47Z", "bug_id": 53569, "creation_time": "2012-07-20T11:55:47Z", "is_private": false, "text": "(In reply to comment #10)\n> Thanks, some progress made. I just realized that FOP 1.1 doesn't use a\n> config file by default. In my FOP 0.95 installation I had (long ago) added\n> \n> -c \"%LOCAL_FOP_HOME%conf/fop.xconf\"\n> \n> When I add this to my FOP 1.1 installation, Acrobat reader no longer\n> displays an error message. However, for the image to be rendered,\n> I need to take additional steps:\n> \n> - In the FOP 0.95 config file, I had commented out <base>.</base> after\n> observing it prevented URLs being resolved relative to the FO file\n>   (our images are usually stored relative to the FO file). But doing the\n> same in the FOP 1.1 config file doesn't help. Has anything changed here?\n>   What configuration is required for an image URL to be resolved relative to\n> the FO file?\n> \n> - Since I currently can't get relative URLs to work, I tried an absolute\n> URL. FOP 1.1 seems to be stricter about URL syntax than FOP 0.95.\n>   E.g. FOP 0.95 accepts url(C:\\Temp\\Boxes.svg), but with FOP 1.1 I need to\n> write url(file:///C:/Temp/Boxes.svg). Has anything changed here?\n\nHmm,\nthe discussion becomes now off topic here, and should be continued on fop-user list.\nThat said, \"C:\\Temp\\Boxes.svg\" is not a regular URL; FOP aims to be compliant with all used standards, this ensure to be more consistant."}]