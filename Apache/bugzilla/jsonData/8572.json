[{"count": 0, "tags": [], "bug_id": 8572, "text": "This is the session contextid too long problem which apparently has already \nbeen fixed by the mod_ssl folks.  I'm fixing it temporarily by summarily \ntruncating the name since my understanding is that the key just needs to be \nunique and does not have to match the name of the website.  mod_ssl has a more \nelegant solution using an md5 hash.  I'm requesting that you incorporate their \ncurrent version of mod_ssl with apache 2.0.35 or 2.0.36 or whatever or please \nexplain why it isn't there already.\n\nThanks!", "id": 14881, "time": "2002-04-26T22:26:14Z", "creator": "bernard.l.dubreuil@erdc.usace.army.mil", "creation_time": "2002-04-26T22:26:14Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 8572, "text": "Apache 2.0.35 was already mostly up-to-date with respect to mod_ssl 2.8.8-1.3.24.  Apache \n2.0.36 will contain the remaining changes.  Is the patch you refer to present in 2.8.8?  \nIf so, this should be fixed now in Apache 2.0.36.  If not, where is this patch? ", "id": 15080, "attachment_id": null, "creator": "jwoolley@apache.org", "creation_time": "2002-04-29T23:02:12Z", "time": "2002-04-29T23:02:12Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 8572, "attachment_id": null, "text": "If I look at the source code for mod_ssl 2.8.8-1.3.24 it does look like the md5 \nchange is in ssl_engine_kernel.c.  This ssl_engine_kernel.c was last changed on \nMarch 27, 2002 which is over a month ago.  So I'll accept your assertion that \nthe fix will be in Apache 2.0.36.  Thanks!\n", "id": 15131, "time": "2002-04-30T14:50:35Z", "creator": "bernard.l.dubreuil@erdc.usace.army.mil", "creation_time": "2002-04-30T14:50:35Z", "is_private": false}, {"count": 3, "text": "Can you give me a specific line number?  I still can't find the change you're talking \nabout in modssl 2.8.8 to be sure it's in Apache 2.0.36. \nThanks! ", "creator": "jwoolley@apache.org", "attachment_id": null, "id": 15150, "time": "2002-04-30T16:31:23Z", "bug_id": 8572, "creation_time": "2002-04-30T16:31:23Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "jwoolley@apache.org", "is_private": false, "id": 15152, "attachment_id": null, "bug_id": 8572, "creation_time": "2002-04-30T16:39:32Z", "time": "2002-04-30T16:39:32Z", "text": "AHA!  Found it.  And it's not in yet for some strange reason.  Hmph.  Okay, well, I'll get \nthe change committed today and *hopefully* it will be in 2.0.36, but the schedule is \npretty tight on that. "}, {"count": 5, "tags": [], "bug_id": 8572, "attachment_id": null, "id": 15155, "time": "2002-04-30T17:10:46Z", "creator": "jwoolley@apache.org", "creation_time": "2002-04-30T17:10:46Z", "is_private": false, "text": "So apparently this is not NEW functionality in modssl 2.8.8, which is why I didn't find  \nit before.  It's functionality that was removed between Apache 2.0.33 and 2.0.34 as a  \n\"minor performance improvement\", obviously unaware of this unintended side-effect.  The  \nfollowing patch reverts to the MD5 behavior.  That change has been reverted.  Thanks for \nusing Apache! "}, {"count": 6, "tags": [], "bug_id": 8572, "text": "===================================================================  \nRCS file: /home/cvspublic/httpd-2.0/modules/ssl/mod_ssl.c,v  \nretrieving revision 1.63  \nretrieving revision 1.64  \ndiff -u -r1.63 -r1.64  \n--- httpd-2.0/modules/ssl/mod_ssl.c\t2002/04/07 03:37:35\t1.63  \n+++ httpd-2.0/modules/ssl/mod_ssl.c\t2002/04/30 17:10:12\t1.64  \n@@ -279,6 +279,7 @@  \n     SSLSrvConfigRec *sc = mySrvConfig(c->base_server);  \n     SSL *ssl;  \n     SSLConnRec *sslconn = myConnConfig(c);  \n+    char *vhost_md5;  \n     modssl_ctx_t *mctx;  \n  \n     /*  \n@@ -334,12 +335,13 @@  \n         return DECLINED; /* XXX */  \n     }  \n  \n-    if (!SSL_set_session_id_context(ssl,  \n-                                    (unsigned char *)sc->vhost_id,  \n-                                    sc->vhost_id_len))  \n+    vhost_md5 = ap_md5_binary(c->pool, sc->vhost_id, sc->vhost_id_len);  \n+  \n+    if (!SSL_set_session_id_context(ssl, (unsigned char *)vhost_md5,  \n+                                    MD5_DIGESTSIZE*2))  \n     {  \n         ssl_log(c->base_server, SSL_LOG_ERROR|SSL_ADD_SSLERR,  \n-                \"Unable to set session id context to `%s'\", sc->vhost_id);  \n+                \"Unable to set session id context to `%s'\", vhost_md5);  \n  \n         c->aborted = 1;  \n  \n  ", "id": 15156, "time": "2002-04-30T17:12:21Z", "creator": "jwoolley@apache.org", "creation_time": "2002-04-30T17:12:21Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "text": "Well, at least I know what to do if it is not in 2.0.36.\nThanks!", "is_private": false, "bug_id": 8572, "id": 15259, "time": "2002-05-01T17:45:02Z", "creator": "bernard.l.dubreuil@erdc.usace.army.mil", "creation_time": "2002-05-01T17:45:02Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "jwoolley@apache.org", "text": "It got tagged in to 2.0.36 today, so it _will_ be a part of that release. ", "id": 15261, "time": "2002-05-01T18:01:43Z", "bug_id": 8572, "creation_time": "2002-05-01T18:01:43Z", "is_private": false, "attachment_id": null}]