[{"count": 0, "tags": [], "text": "Env:\nTomcat Version 5.5.25\nPlatform\nOS Linux xxx 2.6.9-67.ELsmp #1 SMP Wed Nov 7 13:56:44 EST 2007 x86_64 x86_64\nx86_64 GNU/Linux\nJVM :\njava version \"1.5.0_12\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_12-b04)\nBEA JRockit(R) (build R27.4.0-90-89592-1.5.0_12-20070928-1715-linux-x86_64,\ncompiled mode)\nWeb Server Apache 2.0.59 and  mod_jk-1.2.25\n\nApache jk/worker conf:\n----------------------\nworker.list=balancer\n\nworker.balancer.type=lb\nworker.balancer.balance_workers=asur,asmar\nworker.balancer.sticky_session=1\n\nworker.asur.host=xxxxxxxxx\nworker.asur.port=8009\nworker.asur.type=ajp13\nworker.asur.lbfactor=1\nworker.asur.activation=disabled\n\nworker.asmar.host=xxxxxxx\nworker.asmar.port=8009\nworker.asmar.type=ajp13\nworker.asmar.lbfactor=1\nworker.asmar.redirect=asur\n\nCluster configuration:\n----------------------\n        <Cluster className=\"org.apache.catalina.cluster.tcp.SimpleTcpCluster\"\n                 doClusterLog=\"true\"\n                 clusterLogName=\"clusterlog\"\n                \nmanagerClassName=\"org.apache.catalina.cluster.session.SimpleTcpReplicationManager\"\n                 expireSessionsOnShutdown=\"false\"\n                 replicationMode=\"pooled\"\n                 notifyListenersOnReplication=\"true\">\n\n            <Membership\n                className=\"org.apache.catalina.cluster.mcast.McastService\"\n                mcastAddr=\"228.0.0.4\"\n                mcastPort=\"45564\"\n                mcastFrequency=\"500\"\n                mcastDropTime=\"3000\"/>\n\n            <Receiver\n                className=\"org.apache.catalina.cluster.tcp.ReplicationListener\"\n                tcpListenAddress=\"xxxxxx\"\n                tcpListenPort=\"4001\"\n                tcpSelectorTimeout=\"100\"\n                tcpThreadCount=\"6\"/>\n\n            <Sender\n                className=\"org.apache.catalina.cluster.tcp.ReplicationTransmitter\"\n                replicationMode=\"pooled\"\n                ackTimeout=\"15000\"\n                waitForAck=\"true\"/>\n\n            <Valve className=\"org.apache.catalina.cluster.tcp.ReplicationValve\"\n                  \nfilter=\".*\\.gif;.*\\.js;.*\\.jpg;.*\\.png;.*\\.htm;.*\\.html;.*\\.css;.*\\.txt;\"/>\n\n            <Deployer className=\"org.apache.catalina.cluster.deploy.FarmWarDeployer\"\n                      tempDir=\"/tmp/war-temp/\"\n                      deployDir=\"/tmp/war-deploy/\"\n                      watchDir=\"/tmp/war-listen/\"\n                      watchEnabled=\"false\"/>\n\n            <ClusterListener\nclassName=\"org.apache.catalina.cluster.session.ClusterSessionListener\"/>\n        </Cluster>\n\nProblem:\n--------\n\nTomcat server logs this exception.\nCould you explain us what's hapenning. Thanks.\n\nSEVERE: Failed to serialize the session!\njava.util.ConcurrentModificationException\n        at\norg.apache.commons.collections.SequencedHashMap$OrderedIterator.next(SequencedHashMap.java:757)\n        at org.apache.commons.collections.LRUMap.writeExternal(LRUMap.java:174)\n        at\njava.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1310)\n        at\njava.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1288)\n        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)\n        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302)\n        at\norg.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1478)\n        at\norg.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:948)\n        at\norg.apache.catalina.cluster.session.ReplicatedSession.writeObjectData(ReplicatedSession.java:189)\n        at\norg.apache.catalina.cluster.session.SimpleTcpReplicationManager.writeSession(SimpleTcpReplicationM\nanager.java:353)\n        at\norg.apache.catalina.cluster.session.SimpleTcpReplicationManager.requestCompleted(SimpleTcpReplicat\nionManager.java:317)\n        at\norg.apache.catalina.cluster.tcp.ReplicationValve.send(ReplicationValve.java:549)\n        at\norg.apache.catalina.cluster.tcp.ReplicationValve.sendMessage(ReplicationValve.java:536)\n        at\norg.apache.catalina.cluster.tcp.ReplicationValve.sendSessionReplicationMessage(ReplicationValve.ja\nva:518)\n        at\norg.apache.catalina.cluster.tcp.ReplicationValve.sendReplicationMessage(ReplicationValve.java:428)\n        at\norg.apache.catalina.cluster.tcp.ReplicationValve.invoke(ReplicationValve.java:362)\n        at\norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n        at\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\n        at\norg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)\n        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:200)\n        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:283)\n        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:773)\n        at\norg.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:703)\n        at\norg.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:895)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\n        at java.lang.Thread.run(Thread.java:595)", "is_private": false, "id": 112880, "creator": "jlerbsc@hotmail.com", "time": "2008-01-15T09:59:26Z", "bug_id": 44245, "creation_time": "2008-01-15T09:59:26Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 44245, "attachment_id": null, "text": "Post your question on the Tomcat User mailing list, someone may help you there. \nUnfortunately we can't use bugzilla as a support forum.", "id": 112882, "time": "2008-01-15T10:25:11Z", "creator": "fhanik@apache.org", "creation_time": "2008-01-15T10:25:11Z", "is_private": false}]