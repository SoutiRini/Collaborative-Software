[{"count": 0, "tags": [], "bug_id": 51847, "attachment_id": 27539, "is_private": false, "id": 149507, "time": "2011-09-19T22:27:59Z", "creator": "benoit.wiart@gmail.com", "creation_time": "2011-09-19T22:27:59Z", "text": "Created attachment 27539\nFix the bug\n\nDate format in org.apache.jmeter.protocol.http.control.TestCacheManager depends on the jvm default locale.\n\nThe patch reuse the httpclient dateutil to format the dates, it's already used for parsing.\n\nBenoit WIART"}, {"count": 1, "tags": [], "bug_id": 51847, "attachment_id": null, "id": 149510, "creation_time": "2011-09-19T23:13:46Z", "time": "2011-09-19T23:13:46Z", "creator": "sebb@apache.org", "text": "What Locale does it fail on?\n\nI don't use Locale.US and I've not seen any failures.", "is_private": false}, {"count": 2, "tags": [], "creator": "benoit.wiart@gmail.com", "attachment_id": null, "id": 149512, "time": "2011-09-20T06:43:43Z", "bug_id": 51847, "creation_time": "2011-09-20T06:43:43Z", "is_private": false, "text": "It should also work with other english languages not only US\n\nExpires date is formatted with the jvm default locale (in makeDate) but is parsed with Locale.US in DateUtil in CacheManager\nthe expires date should follow rfc 1123\n\nFor example with Locale fr_FR\nExpires is mar., 20 sept. 2011 06:39:16 GMT\nWhere it should be Tue, 20 Sep 2011 06:39:16 GMT\n\nBelow are the failures\n\n1) testExpiresJava(org.apache.jmeter.protocol.http.control.TestCacheManager)junit.framework.AssertionFailedError: Should find valid entry\n     [java] \tat org.apache.jmeter.protocol.http.control.TestCacheManager.testExpiresJava(TestCacheManager.java:191)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n     [java] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:233)\n     [java] 2) testExpiresHttpClient(org.apache.jmeter.protocol.http.control.TestCacheManager)junit.framework.AssertionFailedError: Should find valid entry\n     [java] \tat org.apache.jmeter.protocol.http.control.TestCacheManager.testExpiresHttpClient(TestCacheManager.java:213)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n     [java] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:233)\n     [java] FAILURES!!!"}, {"count": 3, "tags": [], "bug_id": 51847, "attachment_id": null, "id": 149515, "creation_time": "2011-09-20T08:21:11Z", "time": "2011-09-20T08:21:11Z", "creator": "p.mouawad@ubik-ingenierie.com", "text": "Hello,\nI confirm these failures in French Locale.\nFix works for me.\n\nRegards\nPhilippe", "is_private": false}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 149517, "time": "2011-09-20T09:21:40Z", "bug_id": 51847, "creation_time": "2011-09-20T09:21:40Z", "is_private": false, "text": "Thanks for the report and patch.\n\nI was using an English Locale, which is why I did not see the problem.\n\nFixed, but without using DateUtil.\n\nURL: http://svn.apache.org/viewvc?rev=1173042&view=rev\nLog:\nBug 51847 - Some Junit tests are Locale sensitive and fail if Locale is different from US\n\nModified:\n   jakarta/jmeter/trunk/test/src/org/apache/jmeter/protocol/http/control/TestCacheManager.java\n   jakarta/jmeter/trunk/xdocs/changes.xml"}]