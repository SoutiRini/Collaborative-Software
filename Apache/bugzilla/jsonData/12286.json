[{"count": 0, "tags": [], "bug_id": 12286, "attachment_id": null, "id": 22238, "time": "2002-09-04T08:29:00Z", "creator": "ronald@klop.yi.org", "creation_time": "2002-09-04T08:29:00Z", "is_private": false, "text": "I get a NullPointerException in the cleanup code of org.apache.catalina.session.JDBCStore \nusing Tomcat 4.0.4.\nThis happens while reloading the context.\nAfter the exception tomcat \nhangs until you reload the context again.\n\nI think it can be solved with the following \n'patch'.\n\n--- org/apache/catalina/session/JDBCStore-old.java  Wed Sep  4 02:13:53 2002\n+++ \norg/apache/catalina/session/JDBCStore.java      Wed Sep  4 02:18:12 2002\n@@ -759,37 +759,43 @@\n             \n}\n\n             try {\n-                preparedSizeSql.close();\n+                if (preparedSizeSql != null)\n+                    \npreparedSizeSql.close();\n             } catch (SQLException e) {\n                 ;\n             }\n\n             try {\n-                \npreparedKeysSql.close();\n+                if (preparedKeysSql != null)\n+                    preparedKeysSql.close();\n             } \ncatch (SQLException e) {\n                 ;\n             }\n\n             try {\n-                preparedSaveSql.close();\n+                if (preparedSaveSql \n!= null)\n+                    preparedSaveSql.close();\n             } catch (SQLException e) {\n                 ;\n             }\n\n             try {\n-                \npreparedClearSql.close();\n+                if (preparedClearSql != null)\n+                    \npreparedClearSql.close();\n             } catch (SQLException e) {\n                 ;\n             }\n\n             try {\n-                \npreparedRemoveSql.close();\n+                if (preparedRemoveSql != null)\n+                    \npreparedRemoveSql.close();\n             } catch (SQLException e) {\n                 ;\n             }\n\n             try {\n-                \npreparedLoadSql.close();\n+                if (preparedLoadSql != null)\n+                    preparedLoadSql.close();\n             } \ncatch (SQLException e) {\n                 ;\n             }"}, {"count": 1, "tags": [], "bug_id": 12286, "text": "I've seen this bug in 4.0.4 and also in 4.1.10.\nIt's a trivial fix. Can it be included in 4.1.11?", "id": 23146, "time": "2002-09-20T11:22:59Z", "creator": "ronald@klop.yi.org", "creation_time": "2002-09-20T11:22:59Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 12286, "is_private": false, "text": "I have committed a patch for this to CVS. Tomcat 4.1.11 has already been\nreleased but this bug fix will be available in the next nightly build.\nOr you can wait for the Tomcat 4.1.12 release.", "id": 23154, "time": "2002-09-20T14:07:47Z", "creator": "glenn@apache.org", "creation_time": "2002-09-20T14:07:47Z", "attachment_id": null}]