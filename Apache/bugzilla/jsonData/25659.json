[{"count": 0, "tags": [], "creator": "dblake@hp.com", "attachment_id": null, "id": 49449, "time": "2003-12-19T17:47:08Z", "bug_id": 25659, "creation_time": "2003-12-19T17:47:08Z", "is_private": false, "text": "The function ssl_util_algotypeof(X509 *pCert, EVP_PKEY *pKey) allows being \ncalled with the parameter pKey == NULL.  The parameter pKey is allocated with \nX509_get_pubkey() which needs a matching call to EVP_PKEY_free(pKey) somewhere.\n\nSince the parameter for pKey was pass in as NULL the calling function doesn't \nhave a way of freeing it so a conditional check is needed for this case.  The \npatch I have provided checks the pKey parameter for NULL and sets a boolean so \nthat before exiting the function we can conditionally free pKey."}, {"count": 1, "tags": [], "creator": "dblake@hp.com", "is_private": false, "id": 49450, "attachment_id": 9646, "bug_id": 25659, "creation_time": "2003-12-19T17:49:07Z", "time": "2003-12-19T17:49:07Z", "text": "Created attachment 9646\nPatch to fix memory leak in ssl_util_algotypeof()."}, {"attachment_id": null, "tags": [], "bug_id": 25659, "is_private": false, "count": 2, "id": 49451, "time": "2003-12-19T17:49:50Z", "creator": "dblake@hp.com", "creation_time": "2003-12-19T17:49:50Z", "text": "PatchAvailable"}, {"count": 3, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "is_private": false, "id": 49467, "time": "2003-12-20T16:10:57Z", "bug_id": 25659, "creation_time": "2003-12-20T16:10:57Z", "text": "Thanks for your patch submission!\n\nAren't BOOL, TRUE, and FALSE Windows-only features?  I believe that this should\nuse int, 1, and 0 for portability.\n"}, {"count": 4, "tags": [], "bug_id": 25659, "text": "ugg, ignore last comment :)  I didn't realize until looking at your next patch\nthat mod_ssl defines these odd types when the platform doesn't define it...\n", "id": 49469, "time": "2003-12-20T16:13:23Z", "creator": "trawick@apache.org", "creation_time": "2003-12-20T16:13:23Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 25659, "text": "This patch does exactly what the OpenSSL applications code does: free the pubkey after use. The check on \nthe incoming parameter is necessary because the other time this function gets  called, it is fed a key that \nis used after the function call. \n\n+1 on this patch. ", "id": 78516, "time": "2005-08-15T17:24:38Z", "creator": "sander@temme.net", "creation_time": "2005-08-15T17:24:38Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 25659, "is_private": false, "count": 6, "id": 80192, "time": "2005-09-20T16:42:57Z", "creator": "martin@apache.org", "creation_time": "2005-09-20T16:42:57Z", "text": "+1 on this patch too. I committed a slightly modified patch."}]