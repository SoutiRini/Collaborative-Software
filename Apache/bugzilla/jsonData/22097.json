[{"count": 0, "tags": [], "bug_id": 22097, "attachment_id": null, "is_private": false, "id": 42033, "time": "2003-08-04T02:39:34Z", "creator": "HeartBit@runeconsulting.com", "creation_time": "2003-08-04T02:39:34Z", "text": "Catalina build.xml dependency problem\n\nThe Ant build script of Catalina (Jakarta-tomcat-catalina/Catalina/build.xml) \nhas a problem. \n\nIf you run Ant with target <all>, it fails in the middle of <build-catalina-\ncore>.\n\nIt\u2019s because the <clean> has deleted the \u201ctomcat-coyote.jar\u201d which <build-\ncatalina-core> requires. \n\n(<all> is <build-clean> + <build-main>. <clean> = <build-clean> + <dist-\nclean>. and <build-clean> do ${tomcat-coyote.home}\u2019s <clean>. \n\n<build-clean> depends only <build-static>, <build-tomcat-util>, <build-\ncatalina>. \n\nThere is no <build-tomcat-coyote> which actually <build-catalina>\u2019s javac has \nclasspath to do with.)\n\nSo, I think <build-tomcat-coyote> should have dependency relation not to \n<deploy> but to <build-main>\n\n\n---\nIndex: build.xml\n===================================================================\nRCS file: /home/cvspublic/jakarta-tomcat-catalina/catalina/build.xml,v\nretrieving revision 1.53\ndiff -u -r1.53 build.xml\n--- build.xml\t14 Jul 2003 16:30:12 -0000\t1.53\n+++ build.xml\t4 Aug 2003 02:29:01 -0000\n@@ -8,6 +8,7 @@\n   <!--property file=\"build.properties\"/>\n   <property file=\"../build.properties\"/>\n   <property file=\"${user.home}/build.properties\"/-->\n+  <property file=\"../build.properties\"/>\n \n   <!-- Build Defaults -->\n   <property name=\"catalina.home\"     location=\"..\"/>\n@@ -707,7 +708,7 @@\n \n \n   <!-- ================= BUILD: Compile All Server Components ============= --\n>\n-  <target name=\"build-main\" depends=\"build-static,build-tomcat-util,build-\ncatalina\">\n+  <target name=\"build-main\" depends=\"build-static,build-tomcat-util,build-\ntomcat-coyote,build-catalina\">\n   </target>\n \n \n@@ -1092,7 +1093,7 @@\n \n \n   <!-- ====================== DEPLOY: Create Catalina JARs ================ --\n>\n-  <target name=\"deploy\" depends=\"deploy-catalina,build-tomcat-coyote,build-\ntomcat-jk,build-tomcat-http11\"\n+  <target name=\"deploy\" depends=\"deploy-catalina,build-tomcat-jk,build-tomcat-\nhttp11\"\n    description=\"Build and deploy Catalina\">\n   </target>"}, {"count": 1, "tags": [], "bug_id": 22097, "attachment_id": null, "is_private": false, "id": 42037, "time": "2003-08-04T06:43:22Z", "creator": "remm@apache.org", "creation_time": "2003-08-04T06:43:22Z", "text": "Use the main build script (from the jakarta-tomcat-5 repository)."}]