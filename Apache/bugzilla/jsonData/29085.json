[{"count": 0, "tags": [], "creator": "daniel.estermann@adnovum.ch", "attachment_id": null, "is_private": false, "id": 57645, "time": "2004-05-19T12:22:46Z", "bug_id": 29085, "creation_time": "2004-05-19T12:22:46Z", "text": "Currently, a jar-file is updated if one of the manifest entries changes.\nIf an entry contains the build-time, I don't want the jar to be rewritten every\ntime i build the project. The build-time entry should just be updated if\nanything else in the jar changed.\n\nI propose to introduce a new flag (named 'forceupdate' or similar) for a\nmanifest attribute. That flag tells wether the entry must be compared with the\nold state or if a possible change should be ignored. \n\n<manifest>\n  <attribute\n    name=\"Build-Stamp\"\n    value=\"${DSTAMP}${TSTAMP}\"\n    forceupdate=\"false\"/>\n</manifest>\n\nImplementation: \nA logical and simple solution is to change the Manifest.equals method to ignore\nthe selected entries. However, i do not know if this affects other tasks."}, {"count": 1, "tags": [], "creator": "jglick@apache.org", "attachment_id": null, "is_private": false, "id": 58806, "time": "2004-06-05T19:50:16Z", "bug_id": 29085, "creation_time": "2004-06-05T19:50:16Z", "text": "This would be useful. netbeans.org has a generic script that uses something like\n\n<tstamp>\n  <format property=\"buildnumber\" .../>\n</tstamp>\n<jar jarfile=\"...\" manifest=\"${some-basic-manifest}\">\n  <manifest>\n  <!-- various important fixed attributes... then: -->\n    <attribute name=\"Impl-Version\" value=\"${buildnumber}\"/>\n  </manifest>\n  <fileset .../>\n</jar>\n\nCurrently the JAR is always rebuilt, which is annoying and slows down the build.\nPossible workaround would be to create a temporary manifest somewhere using\n<manifest> with everything but the Impl-Version set to \"@BUILD-NUMBER@\", then\n<copy> with a filter, then make the JAR; cumbersome.\n\nI could probably supply a patch for this if committers would be interested in\napplying it."}, {"count": 2, "tags": [], "bug_id": 29085, "attachment_id": null, "text": "*** Bug 31410 has been marked as a duplicate of this bug. ***", "id": 129329, "time": "2009-07-31T05:42:30Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-31T05:42:30Z", "is_private": false}]