[{"count": 0, "tags": [], "creator": "dave@jetcafe.org", "text": "Consider the following configuration:\n\n <LocationMatch \".\">\n  <LimitExcept GET POST>\n     Order deny,allow\n     Deny from all\n  </LimitExcept>\n </LocationMatch>\n\nUsing the above configuration renders all other mod_access host/IP control statements silently inoperative (i.e. Order/Deny/Allow). \n\nMy test case was a stock Apache 1.3.41 with the following configure target:\n\n./configure --with-layout=Apache --prefix=/some/prefix --enable-shared=max \\\n  --enable-module=most\n\nBesides two production sites this was discovered on, I tested the simple case above with a directory section like so (modulo the directory name which can be anything):\n\n <Directory /foo>\n  Order deny,allow\n  Allow from 127.0.0.1\n  Deny from all\n </Directory>\n\nthen we start apache normally as a non-root user:\n\n apache/bin/apachectl start\n\nput a simple foo.html file in /foo, then:\n\n lynx -dump http://my.host.name:8080/alias/to/foo\n\ntests the IP based access from the host name and\n \n lynx -dump http://127.0.0.1:8080/alias/to/foo\n\ntests the localhost access.\n\nI can provide more information on request. I believe the LocationMatch directive to be correctly constructed, and such a block should not silently remove all your other access controls.", "id": 126204, "time": "2009-04-13T18:01:09Z", "bug_id": 47019, "creation_time": "2009-04-13T18:01:09Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 47019, "attachment_id": null, "text": "I confirm the same behavior, using the <Location> block instead of <LocationMatch>.", "id": 130885, "time": "2009-10-05T08:53:59Z", "creator": "ricky.egeland@cern.ch", "creation_time": "2009-10-05T08:53:59Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 47019, "attachment_id": null, "text": "Yea, limit and limitexcept are scary beasts which I proposed to eliminate/\nreplace with more thorough functionality (and was shot down on the proposal).\n\nBut you have to understand the order of operations which were CLEARLY documented\n\n  process <Location... (depth order)\n  process <LocationMatch... (conf order)\n  process <Directory... (depth order)\n  process <DirectoryMatch... (conf order)\n  process <Files... (conf order?)\n  process <FilesMatch... (conf order)\n  process <Location... (depth order)\n  process <LocationMatch... (conf order)\n\nSo locationmatch overrides EVERYTHING by design", "id": 145324, "time": "2011-03-27T17:56:06Z", "creator": "wrowe@apache.org", "creation_time": "2011-03-27T17:56:06Z", "is_private": false}]