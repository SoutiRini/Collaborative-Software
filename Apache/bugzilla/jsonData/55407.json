[{"count": 0, "tags": [], "bug_id": 55407, "attachment_id": null, "id": 169386, "time": "2013-08-13T01:10:35Z", "creator": "calestyo@scientia.net", "creation_time": "2013-08-13T01:10:35Z", "is_private": false, "text": "Hi.\n\nAdmittedly I'm not even sure whether this is an issue or not... at least I couldn't find it documented, though.\n\nIt seems that when using SNI with vhosts that have the SAME ServerName but DIFFERENT ServerAlias(es)... mod_ssl simply ignores the later defined vhosts.\n\nE.g. consider the following:\n<VirtualHost 127.0.0.1>\n        ServerName a.foo.example.org\n        ServerAlias *.pool.example.org\n\n        #using some cert #1 for the above names\n</VirtualHos>\n<VirtualHost 127.0.0.1>\n        ServerName a.foo.example.org\n        ServerAlias foo.example.org\n\n        #using some other cert #2 for the above names\n</VirtualHos>\n\n\nSuch things can easily happen, e.g. you have pools and round robin DNS names... and want them to just use different certs (usually from different CAs), e.g. one from \"public\" CAs like VeriStrange\u2122 and Thawto\u2122 ;) ... and for the other names your organisation's own CA, which is however not globally recognised.\n\nWith the above setup I'd have expected the following to happen:\nIf a.foo.example.org is used,... the first defined vhost wins (as in default vhosts).... and cert #1 is used.\n\nFor *.pool.example.org cert #1 is used as well, while for foo.example.org cert #2 is used.\n\n\nBut Apache _always_ goes into the first vhost and gives me cert #1.\n\n\nNow a obvious workaround is to simply make the 2nd vhost like this:\n<VirtualHost 127.0.0.1>\n        ServerName foo.example.org\n\n        #using some other cert #2 for the above names\n</VirtualHos>\ni.e. changing the ServerName.\n\nThis however has the drawback, that the other name is also used in all places like error pages, etc.\nSo while I might offer people to use another certificate... I may still want them to see the \"canonical\" server name for that other certificate as well, which in the example above was intended to be a.foo.example.org.\n\n\nCheers,\nChris."}, {"count": 1, "tags": [], "bug_id": 55407, "attachment_id": null, "id": 169388, "time": "2013-08-13T02:13:13Z", "creator": "covener@gmail.com", "creation_time": "2013-08-13T02:13:13Z", "is_private": false, "text": "A test config chases the alias for me\n\n*** This bug has been marked as a duplicate of bug 43218 ***"}, {"count": 2, "tags": [], "bug_id": 55407, "attachment_id": null, "id": 169390, "time": "2013-08-13T02:13:42Z", "creator": "covener@gmail.com", "creation_time": "2013-08-13T02:13:42Z", "is_private": false, "text": "(In reply to Eric Covener from comment #1)\n> A test config chases the alias for me\n> \n> *** This bug has been marked as a duplicate of bug 43218 ***\n\nIgnore the half of a comment, found the dup and lost that part of my screen"}, {"count": 3, "tags": [], "creator": "calestyo@scientia.net", "text": "Uhm... what?", "id": 169530, "time": "2013-08-17T01:30:45Z", "bug_id": 55407, "creation_time": "2013-08-17T01:30:45Z", "is_private": false, "attachment_id": null}]