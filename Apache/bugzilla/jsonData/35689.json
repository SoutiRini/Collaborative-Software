[{"count": 0, "tags": [], "bug_id": 35689, "is_private": false, "id": 77186, "attachment_id": null, "creator": "dhc4z@virginia.edu", "creation_time": "2005-07-11T18:09:16Z", "time": "2005-07-11T18:09:16Z", "text": "In the default pub, attempt to edit the homepage results in the error at bottom.\nThis seems to be caused by the include of xhtml.rng in the homepage.rng schema.\n fallback:// protocol doesn't seem to be supported with\norg.apache.lenya.xml.RelaxNG.  Temp fix is to copy contents of\n/lenya/resources/schemas/ (lenya core) into your publications (or default pub)\nlenya/resources/schemas/ directory.\n\nCould not load schema! java.io.FileNotFoundException:\nC:\\src\\lenya-1.4.x.WEBDAV\\build\\lenya\\webapp\\lenya\\pubs\\default\\lenya\\resources\\schemas\\xhtml.rng\n(The system cannot find the file specified)\n\norg.apache.avalon.framework.CascadingRuntimeException:\n\"file:/C:/src/lenya-1.4.x.WEBDAV/build/lenya/webapp/lenya/usecases/usecases.js\",\nline 168: uncaught JavaScript exception: at executeUsecase\n(file:/C:/src/lenya-1.4.x.WEBDAV/build/lenya/webapp/lenya/usecases/usecases.js,\nLine 168): org.apache.lenya.cms.usecase.UsecaseException: java.io.IOException:\nCould not load schema! java.io.FileNotFoundException:\nC:\\src\\lenya-1.4.x.WEBDAV\\build\\lenya\\webapp\\lenya\\pubs\\default\\lenya\\resources\\schemas\\xhtml.rng\n(The system cannot find the file specified)\n\ncause: java.io.IOException: Could not load schema!\njava.io.FileNotFoundException:\nC:\\src\\lenya-1.4.x.WEBDAV\\build\\lenya\\webapp\\lenya\\pubs\\default\\lenya\\resources\\schemas\\xhtml.rng\n(The system cannot find the file specified)\n\nfull exception chain stacktrace[Show]\n\norg.apache.avalon.framework.CascadingRuntimeException:\n\"file:/C:/src/lenya-1.4.x.WEBDAV/build/lenya/webapp/lenya/usecases/usecases.js\",\nline 168: uncaught JavaScript exception: \nat executeUsecase\n(file:/C:/src/lenya-1.4.x.WEBDAV/build/lenya/webapp/lenya/usecases/usecases.js,\nLine 168):\norg.apache.lenya.cms.usecase.UsecaseException: java.io.IOException: Could not\nload schema!\njava.io.FileNotFoundException:\nC:\\src\\lenya-1.4.x.WEBDAV\\build\\lenya\\webapp\\lenya\\pubs\\default\\lenya\\resources\\schemas\\xhtml.rng\n(The system cannot find the file specified)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_JavaScriptInterpreter.handleContinuation(FOM_JavaScriptInterpreter.java:853)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.CallFunctionNode.invoke(CallFunctionNode.java:123)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MatchNode.invoke(MatchNode.java:107)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MatchNode.invoke(MatchNode.java:107)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.ActTypeNode.invoke(ActTypeNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.SelectNode.invoke(SelectNode.java:102)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:234)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:243)\n\tat org.apache.cocoon.Cocoon.process(Cocoon.java:608)\n\tat org.apache.cocoon.servlet.CocoonServlet.service(CocoonServlet.java:1123)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:358)\n\tat\norg.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:294)\n\tat org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)\n\tat org.mortbay.http.HttpContext.handle(HttpContext.java:1807)\n\tat\norg.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:525)\n\tat org.mortbay.http.HttpContext.handle(HttpContext.java:1757)\n\tat org.mortbay.http.HttpServer.service(HttpServer.java:879)\n\tat org.mortbay.http.HttpConnection.service(HttpConnection.java:789)\n\tat org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:960)\n\tat org.mortbay.http.HttpConnection.handle(HttpConnection.java:806)\n\tat org.mortbay.http.SocketListener.handleConnection(SocketListener.java:218)\n\tat org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:300)\n\tat org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:511)\nCaused by: org.apache.lenya.cms.usecase.UsecaseException: java.io.IOException:\nCould not load schema!\njava.io.FileNotFoundException:\nC:\\src\\lenya-1.4.x.WEBDAV\\build\\lenya\\webapp\\lenya\\pubs\\default\\lenya\\resources\\schemas\\xhtml.rng\n(The system cannot find the file specified)\n\tat org.apache.lenya.cms.usecase.AbstractUsecase.execute(AbstractUsecase.java:260)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat\norg.apache.avalon.excalibur.component.ComponentProxyGenerator$ComponentInvocationHandler.invoke(ComponentProxyGenerator.java:143)\n\tat $Proxy16.execute(Unknown Source)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:230)\n\tat org.mozilla.javascript.ScriptRuntime.call(ScriptRuntime.java:1244)\n\tat\norg.mozilla.javascript.continuations.ContinuationInterpreter.interpret(ContinuationInterpreter.java:1134)\n\tat\norg.mozilla.javascript.continuations.ContinuationInterpreter.interpret(ContinuationInterpreter.java:190)\n\tat\norg.mozilla.javascript.continuations.ContinuationInterpreter.interpret(ContinuationInterpreter.java:138)\n\tat\norg.mozilla.javascript.continuations.InterpretedFunctionImpl.call(InterpretedFunctionImpl.java:121)\n\tat org.mozilla.javascript.ScriptRuntime.call(ScriptRuntime.java:1244)\n\tat org.mozilla.javascript.ScriptableObject.callMethod(ScriptableObject.java:1591)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_JavaScriptInterpreter.handleContinuation(FOM_JavaScriptInterpreter.java:843)\n\t... 60 more\nCaused by: java.io.IOException: Could not load schema!\njava.io.FileNotFoundException:\nC:\\src\\lenya-1.4.x.WEBDAV\\build\\lenya\\webapp\\lenya\\pubs\\default\\lenya\\resources\\schemas\\xhtml.rng\n(The system cannot find the file specified)\n\tat org.apache.lenya.xml.RelaxNG.validate(RelaxNG.java:116)\n\tat\norg.apache.lenya.cms.editors.forms.OneFormEditor.doExecute(OneFormEditor.java:106)\n\tat org.apache.lenya.cms.usecase.AbstractUsecase.execute(AbstractUsecase.java:251)\n\t... 79 more\n\nstacktrace[Show]"}, {"count": 1, "tags": [], "creator": "andreas@apache.org", "is_private": false, "text": "I tried to provide the Excalibur entity resolver to the Jing ValidationDriver,\nbut it wasn't used. I'll try the debugger on the code.", "id": 77373, "time": "2005-07-18T09:57:07Z", "bug_id": 35689, "creation_time": "2005-07-18T09:57:07Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 35689, "attachment_id": null, "text": "I examined the code of Jing and JARV. The easiest way seems to be to copy the\nschemas to a single location ...", "id": 77458, "time": "2005-07-20T09:45:56Z", "creator": "andreas@apache.org", "creation_time": "2005-07-20T09:45:56Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 35689, "attachment_id": null, "is_private": false, "id": 77459, "time": "2005-07-20T10:12:05Z", "creator": "andreas@apache.org", "creation_time": "2005-07-20T10:12:05Z", "text": "I managed to pass an EntityResolver to the validator (by patching Jing), now the\nfallback:// protocol is supported. But now a problem occurs when the schema\nwhich is included using fallback:// has relative references to other schemas ...\n\nI guess it doesn't make sense to use fallback:// in schema includes, unless we\nwant to use it in *all* include statements."}, {"count": 4, "text": "Pier Fumagalli implemented a JingTransformer that supports protocols in includes:\n\nhttp://marc.theaimsgroup.com/?l=xml-cocoon-dev&m=112557535814761&w=2", "bug_id": 35689, "is_private": false, "id": 79285, "time": "2005-09-01T14:06:47Z", "creator": "andreas@apache.org", "creation_time": "2005-09-01T14:06:47Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 35689, "is_private": false, "id": 79406, "attachment_id": null, "creator": "andreas@apache.org", "creation_time": "2005-09-05T16:22:54Z", "time": "2005-09-05T16:22:54Z", "text": "The JingValidator resolves the issue."}]