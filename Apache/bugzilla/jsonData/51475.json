[{"count": 0, "text": "Created attachment 27254\nPatch file f\u00fcr GzipInterceptor\n\nWhile testing the GzipInterceptor I was wondering about the strange errors: \"Unable to decompress byte contents\". At first I thougt, I was using the interceptor in wrong order. But taking a look the source shows a TODO at method decompress: \"Fix to create an automatically growing buffer.\"\n\nBecause we have session properties which are compressed larger than 2048 bytes, the interceptor didn't work, in our case.\n\nI've created a patch. See my attachement.", "bug_id": 51475, "attachment_id": 27254, "id": 147741, "time": "2011-07-05T09:58:12Z", "creator": "cstoeber@amaris.de", "creation_time": "2011-07-05T09:58:12Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 51475, "attachment_id": null, "text": "There are a number of issues with the patch as currently proposed.\n- It uses tabs rather than spaces\n- In includes whitespace changes that add noise\n- Tests should be provided as JUnit tests in the separate tests directory in the source tree", "id": 147744, "time": "2011-07-05T10:29:53Z", "creator": "markt@apache.org", "creation_time": "2011-07-05T10:29:53Z", "is_private": false}, {"count": 2, "tags": [], "creator": "cstoeber@amaris.de", "attachment_id": 27256, "id": 147749, "time": "2011-07-05T12:08:55Z", "bug_id": 51475, "creation_time": "2011-07-05T12:08:55Z", "is_private": false, "text": "Created attachment 27256\nPatch file for GzipInterceptor, TestGzipInterceptor and TribesTestSuite\n\nOkay. I've checked out Tomcat 6.0.x from subversion in my ecplise and created a new patch through eclipse. For me the patch looks better now.\nI've also removed the test code from GzipInterceptor and have written a small JUnit test case."}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 147760, "time": "2011-07-05T16:48:34Z", "bug_id": 51475, "creation_time": "2011-07-05T16:48:34Z", "is_private": false, "text": "Thanks for the updated patch. There are still some unnecessary changes in that patch that distract from the changes that fix the problem. Also, new files need to include a license header.\n\nI have fixed 7.0.x based on your patch and the fix will be included in 7.0.18 onwards.\n\nI have also proposed the fix for 6.0.x."}, {"count": 4, "tags": [], "text": "Mark,\n\nbecause it's not desirable and efficient to compress small packages, I've modified the code that it compress only packages with a size greater than 2048 bytes.\n\nShould I file a new bug? Or should I send you an new patch?", "attachment_id": null, "bug_id": 51475, "id": 147933, "time": "2011-07-15T09:55:47Z", "creator": "cstoeber@amaris.de", "creation_time": "2011-07-15T09:55:47Z", "is_private": false}, {"count": 5, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 147934, "time": "2011-07-15T10:16:52Z", "bug_id": 51475, "creation_time": "2011-07-15T10:16:52Z", "is_private": false, "text": "New bug please. This should be user configurable. I'd suggest an attribute name of minCompressionSize"}, {"count": 6, "tags": [], "creator": "cstoeber@amaris.de", "attachment_id": null, "id": 147935, "time": "2011-07-15T10:25:18Z", "bug_id": 51475, "creation_time": "2011-07-15T10:25:18Z", "is_private": false, "text": "Ok, I'll will file a bug.\n\nIt is user configurable. Based on the compression option in org.apache.coyote.http11.Http11Protocoll I called it compressionMinSize. ;)"}, {"count": 7, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 148069, "time": "2011-07-21T17:09:14Z", "bug_id": 51475, "creation_time": "2011-07-21T17:09:14Z", "is_private": false, "text": "Fixed in 6.0.x and will be included in 6.0.33 onwards."}]