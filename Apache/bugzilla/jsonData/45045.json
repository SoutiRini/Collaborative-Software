[{"count": 0, "tags": [], "bug_id": 45045, "attachment_id": null, "text": "I have configures mod mem cache as follows:\n\n        ExpiresActive On\n        ExpiresDefault \"access plus 1 days\"\n\n        CacheEnable mem /\n        MCacheSize 409600\n        MCacheMaxObjectSize 150000\n\nEverything seems fine but when I look at the debug log for repeat request to the same file I see:\n\n[debug] mod_cache.c(131): Adding CACHE_SAVE filter for /jessicasimpson1.jpg\n[debug] mod_cache.c(138): Adding CACHE_REMOVE_URL filter or /jessicasimpson1.jpg\n[debug] mod_cache.c(633): cache: Caching url: /jessicasimpson1.jpg\n[debug] mod_cache.c(639): cache: Removing CACHE_REMOVE_URL filter.\n[info] mem_cache: Cached url: ttp://proxy.starlounge.com:80/jessicasimpson1.jpg?\n[debug] mod_cache.c(131): Adding CACHE_SAVE filter for /jessicasimpson1.jpg\n[debug] mod_cache.c(138): Adding CACHE_REMOVE_URL filter or /jessicasimpson1.jpg\n[debug] mod_cache.c(633): cache: Caching url: /jessicasimpson1.jpg\n[debug] mod_cache.c(639): cache: Removing CACHE_REMOVE_URL filter.\n[info] mem_cache: Cached url: ttp://proxy.starlounge.com:80/jessicasimpson1.jpg?\n\nThe ? at the end seems to be the issue. The key gets mangled somewhere because if I make a request with ? on the end that too is cached and subsequent requests are served from cache.\n\nrequest for jpg? gives: (note no apparent difference)\n\n[debug] mod_cache.c(131): Adding CACHE_SAVE filter for /jessicasimpson1.jpg\n[debug] mod_cache.c(138): Adding CACHE_REMOVE_URL filter or /jessicasimpson1.jpg\n[debug] mod_cache.c(633): cache: Caching url: /jessicasimpson1.jpg?\n[debug] mod_cache.c(639): cache: Removing CACHE_REMOVE_URL filter.\n[info] mem_cache: Cached url: ttp://proxy.starlounge.com:80/jessicasimpson1.jpg?\n\nnow request for both jpg and jpg? gives:\n\n[debug] mod_cache.c(282): cache: running CACHE_OUT filter\n[debug] mod_cache.c(296): cache: serving /jessicasimpson1.jpg\n\nSeems this could be just a miss in a string parse.", "id": 116846, "time": "2008-05-20T08:16:28Z", "creator": "anders@emunityedge.se", "creation_time": "2008-05-20T08:16:28Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 45045, "text": "This has nothing to do with the key of cached object. Although the debug messages might be confusing everything is ok and the real key is http://proxy.starlounge.com:80/jessicasimpson1.jpg?.\nThe problem is that mod_mem_cache holds a *PER* process cache. So your second request was handled by a process that did not have http://proxy.starlounge.com:80/jessicasimpson1.jpg? cached. Use mod_disk_cache if you want to share the cache between multiple processes.", "id": 116861, "time": "2008-05-20T12:08:44Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-20T12:08:44Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 45045, "attachment_id": null, "text": "(In reply to comment #1)\n> This has nothing to do with the key of cached object. Although the debug\n> messages might be confusing everything is ok and the real key is\n> http://proxy.starlounge.com:80/jessicasimpson1.jpg?.\n> The problem is that mod_mem_cache holds a *PER* process cache. So your second\n> request was handled by a process that did not have\n> http://proxy.starlounge.com:80/jessicasimpson1.jpg? cached. Use mod_disk_cache\n> if you want to share the cache between multiple processes.\n\nMakes perfect sense. The debug is slightly confusing.\n\nPerhaps \"mod_mem_cache holds a *PER* process cache. Use mod_disk_cache if you want to share the cache between multiple processes.\" could be added to the documentation. There is already a section under mod_cache that explains the difference between disk/mem cache.\n\n", "id": 116872, "time": "2008-05-21T01:09:31Z", "creator": "anders@emunityedge.se", "creation_time": "2008-05-21T01:09:31Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 45045, "attachment_id": null, "text": "Done already - see\nhttp://svn.apache.org/viewvc/httpd/httpd/trunk/docs/manual/mod/mod_mem_cache.xml?r1=656733&r2=656732&pathrev=656733\nand give it time to propagate.", "id": 116880, "time": "2008-05-21T05:21:51Z", "creator": "nick@webthing.com", "creation_time": "2008-05-21T05:21:51Z", "is_private": false}]