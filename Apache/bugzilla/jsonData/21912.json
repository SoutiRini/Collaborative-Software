[{"count": 0, "tags": [], "creator": "pwc@mcm-tech.com", "attachment_id": null, "id": 41590, "time": "2003-07-27T16:48:01Z", "bug_id": 21912, "creation_time": "2003-07-27T16:48:01Z", "is_private": false, "text": "Dear,\n\n\tI will required to setup the Apache SSL using Apache 2.0 and OpenSSL \nrunning at Sun Solaris 2.8. After I follow the Apache documentation to generate \nthe SSL certificate key, I encounter the problem of my Certificate Signing \nRequest (CSR) is not self-signed. Could you please advise us on this issue?\n\n\tI will using the openssl to generate the private key and CSR with the \nfollowing steps:-\n\n\t1) Create a RSA private key:\n\n\t\t$ openssl genrsa -des3 -out server.key 1024\n\n\t2) Create a Certificate Signing Request (CSR) with the server RSA \nprivate key:\n\n\t\t$ openssl req -new -key server.key -out server.csr\n\n\tBut after i submit this CSR to Thawte (https://www.thawte.com) for \nsigning, it give me the 'Your CSR is not self-signed.' error message. May i \nknow why my CSR is not self signed?\n  \n   \tAfter that, I found that Apache documentation also mentioned it can \nusing own CA to sign the CSR. So, i will signed the CSR with the following \nadditional steps :-\n \n\t1) Create a RSA private key for my own CA:\n\n\t\t$ openssl genrsa -des3 -out ca.key 1024\n\n\t2) Create a self-signed CA Certificate (X509 structure) with the RSA \nkey of the CA:\n\n\t\t$ openssl req -new -x509 -days 365 -key ca.key -out ca.crt\n\n\t3) Use the sign.sh (see details at attachment) script for signing.\n\n\t\t$ ./sign.sh server.csr\n\t\n\t   I get the following error message during the execution of the \nsign.sh script:-\n\n      \t# echo # ./sign.sh server.csr\n\t\tCA signing: server.csr -> server.crt:\n\t\tUsing configuration from ca.config\n\t\tEnter PEM pass phrase:\n\t\tCheck that the request matches the signature\n\t\tSignature did not match the certificate request\n\t\tCA verifying: server.crt <-> CA cert\n\t\tserver.crt: unable to load certificate file\n\t\t1680:error:0906D06C:PEM routines:PEM_read_bio:no start \nline:pem_lib.c:666:Expecting: CERTIFICATE\n  \n\tThanks in advance.\n\n Thanks and Regards  \n\nPang Wei Chen"}, {"count": 1, "tags": [], "creator": "erik@codefaktor.de", "text": "You're right, the described method should work and produce a valid CSR, but all in all this is not \nan Apache problem. I'm marking this bug as invalid now and I'd suggest you try to contact Thawte \nor openssl.org and describe your problem there. Perhaps the extensions in your openssl.cnf/\nca.config are somewhat busted, but a CSR should definitely be self-signed (regardless of the \nformat (DER or PEM format)).\n\nBTW, you can try the following line, but it's just a short form of step 1) & 2):\nopenssl req -config CONFFILE -newkey rsa:2048 -keyout cert.key.pem -out cert.csr.pem", "id": 41593, "time": "2003-07-27T17:22:10Z", "bug_id": 21912, "creation_time": "2003-07-27T17:22:10Z", "is_private": false, "attachment_id": null}]