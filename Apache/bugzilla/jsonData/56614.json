[{"count": 0, "tags": [], "creator": "xshao@ebay.com", "text": "Created attachment 31708\nPerformance issue\n\nTagHandler instances are created in each jsp request.\nIf there are many tags in a jsp, it is very expensive to detect annotations for each instance's construction,\neven DefaultInstanceManager has the annotation caches.\n\nFor almost all the tags, annotations shouldn't be presented.\nSo we need to provide a way to disable the annotation detection on tags.", "id": 175779, "time": "2014-06-12T09:02:24Z", "bug_id": 56614, "creation_time": "2014-06-12T09:02:24Z", "is_private": false, "attachment_id": 31708}, {"count": 1, "tags": [], "bug_id": 56614, "attachment_id": 31709, "text": "Created attachment 31709\nPerformance comparison between base and after patched", "id": 175780, "time": "2014-06-12T09:03:24Z", "creator": "xshao@ebay.com", "creation_time": "2014-06-12T09:03:24Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 56614, "attachment_id": 31710, "text": "Created attachment 31710\nPatch", "id": 175781, "time": "2014-06-12T09:03:57Z", "creator": "xshao@ebay.com", "creation_time": "2014-06-12T09:03:57Z", "is_private": false}, {"count": 3, "tags": [], "creator": "manoj.ks@fisglobal.com", "text": "Is this patch included in any of the tomcat build?", "id": 176973, "time": "2014-08-07T11:37:22Z", "bug_id": 56614, "creation_time": "2014-08-07T11:37:22Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 56614, "text": "Restore this back to an enhancement", "count": 4, "id": 177150, "time": "2014-08-13T20:19:52Z", "creator": "markt@apache.org", "creation_time": "2014-08-13T20:19:52Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 56614, "attachment_id": null, "id": 177252, "creation_time": "2014-08-18T15:13:02Z", "time": "2014-08-18T15:13:02Z", "creator": "markt@apache.org", "text": "Are these performance figures obtained with tag handler pooling enabled or disabled? If disabled, why was pooling disabled?", "is_private": false}, {"count": 6, "tags": [], "bug_id": 56614, "text": "Does the (apparrently undocumented) Context attribute ignoreAnnotations help? That disables annotation scanning for @PreDestroy and @PostConstruct for all components - not just tag handlers.", "id": 177253, "time": "2014-08-18T15:19:32Z", "creator": "markt@apache.org", "creation_time": "2014-08-18T15:19:32Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 56614, "text": "If the patch is applied then a few changes will be required:\n- config option needs to be documented\n- new option doesn't just disabled @PreDestroy and @PostConstruct, it disables ot for JSPs as well\n- a few renames are in order to reflect the previous point", "count": 7, "id": 177254, "time": "2014-08-18T15:21:00Z", "creator": "markt@apache.org", "creation_time": "2014-08-18T15:21:00Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 56614, "text": "Created attachment 32032\nDocument for this issue", "id": 177950, "time": "2014-09-18T08:38:42Z", "creator": "hzhang9@ebay.com", "creation_time": "2014-09-18T08:38:42Z", "is_private": false, "attachment_id": 32032}, {"count": 9, "tags": [], "bug_id": 56614, "attachment_id": null, "id": 177951, "creation_time": "2014-09-18T08:46:53Z", "time": "2014-09-18T08:46:53Z", "creator": "hzhang9@ebay.com", "text": "I just find that a \"SimpleInstanceManager\" has been integrated on the TRUNK. It seems that it has solved the problem. Would you please back-port it to 7.0.x?", "is_private": false}, {"count": 10, "tags": [], "bug_id": 56614, "text": "Can we have the fix backported to 7.0.x?", "id": 180092, "time": "2014-12-31T08:14:42Z", "creator": "manoj.ks@fisglobal.com", "creation_time": "2014-12-31T08:14:42Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 56614, "attachment_id": null, "text": "I have submitted a fix to this issue via a pull request on the github copy of the source for both Tomcat 7 and Tomcat 8.  Please merged these into the main Tomcat source repositories.\n\nLock contention alleviated via concurrent maps, while still maintaining the necessary weak keys.\n\nhttps://github.com/apache/tomcat70/pull/11\n\nhttps://github.com/apache/tomcat85/pull/5\n\nPlease also check if the Tomcat 9 in development has the same implementation based on WeakHashMap.  It is a serious point of lock contention under heavy concurrency.", "id": 193962, "time": "2016-09-24T04:22:27Z", "creator": "support@aoindustries.com", "creation_time": "2016-09-24T04:22:27Z", "is_private": false}]