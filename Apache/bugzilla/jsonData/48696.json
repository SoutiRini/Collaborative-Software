[{"count": 0, "tags": [], "creator": "peter.hancock@gmail.com", "text": "This bug manifests when printing.\n\nAttached are afps generated at rev 829021 (ok) and rev 829061 (broken).\nThe jpgs show scans of the printed output and an error message printed for rev 829061.\n\nThe resources used to generate the documents are also attached.\n\nNote that changes were made to the Xml Graphics Commons library at the same time.", "id": 134309, "time": "2010-02-08T04:02:56Z", "bug_id": 48696, "creation_time": "2010-02-08T04:02:56Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 48696, "attachment_id": 24938, "text": "Created attachment 24938\nexample of bug", "id": 134310, "time": "2010-02-08T04:11:35Z", "creator": "peter.hancock@gmail.com", "creation_time": "2010-02-08T04:11:35Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 48696, "attachment_id": null, "text": "Hi,\n\nthere is only a small diff between 829021 and 829061\nand the resuling print out depends on some printer characteristic.\n\n                   |829021   |829061\n-------------------+---------+-------------------------------------------+\nIBM Infoprint IP70 | OK      | 0420-486 either not valid or not supported|\nOCE printer        | OK      | OK                                        | \n                   |         |                                           | \nIBM workbench      | OK      | OK                                        | ver 2.05.04.01\nBTB Afp Browser    | no image| OK                                        | ver 1.30\nISIS plugin        | no image| no image                                  | ISIS Papyrus AFP Viewer V.7.01/w3\n\nBoth writes out a IOCA function set 11 image and 829061 write out an\nadditional 0x9B IDE Structure parameter. \n\n        0x9B: IDE Structure parameter [6]\n              Flags:    0x00 (- Additive)\n                             (- Gray Coding: off)\n              Format:   0x01 (RGB)\n              Reserved: 00 00 00 \n              Size1:    0x08 (8)\n              \nAccouding to ioca_S550-1142-00.pdf the only valid format bytes for\nIDESZ=8 is \n   X'02' YCrCb (see Note 2) \n   X'12' YCbCr (see Note 2)\nNote 2:\n   Notes on parameters used when IDESZ=4 or IDESZ=8:\n   Grayscale images only. Grayscale IDEs are composed of the Y component only of the YCrCb or YCbCr color model.\n   \n\n--\ndump of revison 829061:\n  0xD3A8CE: BR Begin Resource [20] (Offset ???)\n            \"RES00002\"\n            Reserved: 00 00 \n            T21: Resource Object Type (R) [8]\n                 ObjType:    0x06 (Image (IOCA) object (retired))\n                 ConData:    00 00 00 00 00 00 00 \n    {\n    0xD3A8FB: BIM Begin Image Object [8] (Offset ???)\n              \"IMG00002\"\n      {\n      0xD3A8C7: BOG Begin Object Environment Group [8] (Offset ???)\n                \"OEG00002\"\n        {\n        0xD3A66B: OBD Object Area Descriptor [20] (Offset ???)\n                  T43: Descriptor Position [1]\n                       DesPosID:   0x01 (1)\n                  T4B: Object Area Measurement Units [6]\n                       XoaBase:    0x00 (10 inches)\n                       YoaBase:    0x00 (10 inches)\n                       XoaUnits:   0x0960 (2400)\n                       YoaUnits:   0x0960 (2400)\n                  T4C: Object Area Size [7]\n                       SizeType:   0x02 (2)\n                       XoaSize:    0x0001E0 (480)\n                       YoaSize:    0x0001E0 (480)\n        0xD3AC6B: OBP Object Area Position [24] (Offset ???)\n                  OAPosID:    0x01 (1)\n                  RGLength:   0x17 (23)\n                  XoaOSet:    0x000000 (0)\n                  YoaOSet:    0x000000 (0)\n                  XoaOrent:   0x0000 (0 degree)\n                  YoaOrent:   0x2D00 (90 degree)\n                  Reserved:   00 \n                  XocaOSet:   0x000000 (0)\n                  YocaOSet:   0x000000 (0)\n                  XocaOrent:  0x0000 (0 degree)\n                  YocaOrent:  0x2D00 (90 degree)\n                  RefCSys:    0x00 (origin defined by IPS)\n        0xD3ABFB: MIO Map IO Image Object [5] (Offset ???)\n                  000 RGLength: 0x0005 (5)\n                      T04: Mapping Option [1]\n                           MapValue:   0x60 (Scale to Fill)\n        0xD3A6FB: IDD Image Data Descriptor IO [13] (Offset ???)\n                  UnitBase:   0x00 (10 inches)\n                  XResol:     0x02D0 (720)\n                  YResol:     0x02D0 (720)\n                  XSize:      0x0258 (600)\n                  YSize:      0x0258 (600)\n                  0xF7: IOCA Function Set Identification [2]\n                        Category:   0x01 (Function Set identifier)\n                        FcnSet:     0x0B (11)\n        }\n      0xD3A9C7: EOG End Object Environment Group [8] (Offset ???)\n                \"OEG00002\"\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [8192] (Offset ???)\n      0xD3EEFB: IPD Image Picture Data IO [7803] (Offset ???)\n                IPD Image Picture Data IO [360059] (44 combined records)\n        {\n        0x70: Begin Segment [0]\n        0x91: Begin Image Content [1]\n              ObjType:  0xFF (IOCA Image Object)\n        0x94: Image Size parameter [9]\n              UnitBase: 0x00 (10 inches)\n              HResol:   0x02D0 (720)\n              VResol:   0x02D0 (720)\n              HSize:    0x0258 (600)\n              VSize:    0x0258 (600)\n        0x95: Image Encoding parameter [2]\n              CompID:   0x03 (No compression)\n              RecID:    0x01 (RIDIC (Recording Image Data Inline Coding))\n        0x96: IDE Size parameter [1]\n              IDESize:  0x08 (8)\n        0x9B: IDE Structure parameter [6]\n              Flags:    0x00 (- Additive)\n                             (- Gray Coding: off)\n              Format:   0x01 (RGB)\n              Reserved: 00 00 00 \n              Size1:    0x08 (8)\n        0x92: Image Data [65535]\n              00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n              00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n              00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n              00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 \n              ...\n        0x92: Image Data [65535]\n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              ...\n        0x92: Image Data [65535]\n              77 77 77 77 77 77 77 77 77 77 77 77 77 77 77 77 \n              77 77 77 77 77 77 77 77 77 77 77 77 77 77 77 77 \n              77 8B AC FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              ...\n        0x92: Image Data [65535]\n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              ...\n        0x92: Image Data [65535]\n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF 80 D0 D0 \n              D0 D0 D0 D0 D0 D0 D0 D0 D0 D0 D0 D0 D0 D0 D0 D0 \n              D0 D0 D0 D0 D0 D0 D0 D0 D0 D0 D0 00 00 D0 D0 D0 \n              ...\n        0x92: Image Data [32325]\n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF \n              FF FF FF FF FF FF 77 77 77 77 77 77 77 77 77 77 \n              ...\n        0x93: End Image Content [0]\n        0x71: End Segment [0]\n        }\n      }\n    0xD3A9FB: EIM End Image Object [8] (Offset ???)\n              \"IMG00002\"\n    }\n  0xD3A9CE: ER End Resource [8] (Offset ???)\n            \"RES00002\"", "id": 134324, "time": "2010-02-08T06:04:25Z", "creator": "afputils@web.de", "creation_time": "2010-02-08T06:04:25Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "afputils@web.de", "text": "sorry the table was messed up:\n\nprinter and viewer test\n\n                   |829021   |829061\n-------------------+---------+-------------------------------------------+\nIBM Infoprint IP70 | OK      | 0420-486 either not valid or not supported|\nOCE printer        | OK      | OK                                        |\n                   |         |                                           |\nIBM workbench      | OK      | OK                                        |\nBTB Afp Browser    | no image| OK                                        |\nISIS plugin        | no image| no image                                  |\n\nIBM workbench ver 2.05.04.01\nBTB Afp Browser v 1.30\nISIS Papyrus AFP Viewer V.7.01/w3", "id": 134325, "time": "2010-02-08T06:07:07Z", "bug_id": 48696, "creation_time": "2010-02-08T06:07:07Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 48696, "text": "Function Set 20 allows using FORMAT X'01' RGB, but my printtest \nwith a IBM Infoprint IP70 results in the same error:\n\n0420-486: ERROR The actual destiantion reported an OCA self-defining field\n          code taht is either not valid or not supported.\n          \nUnfortunately i do not have a list of all supported 'Function Sets'\nof my IP70 or any other printer. Maybe someone of the mailing list\nafp-l@topica.com have such information.", "count": 4, "id": 134326, "time": "2010-02-08T06:29:43Z", "creator": "afputils@web.de", "creation_time": "2010-02-08T06:29:43Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 48696, "text": "Thanks for your input, Harald.\n\nChaging the Format field of the IDE Structure parameter to YCrCb, produced a desirable printed output.  The IDEStructureParameter class defaults this property to RGB, and it is not set by the process for b+w color images.", "id": 134336, "time": "2010-02-08T08:34:50Z", "creator": "peter.hancock@gmail.com", "creation_time": "2010-02-08T08:34:50Z", "is_private": false, "attachment_id": null}, {"attachment_id": 24951, "tags": [], "bug_id": 48696, "text": "Created attachment 24951\nQuick fix", "count": 6, "id": 134359, "time": "2010-02-09T03:52:18Z", "creator": "peter.hancock@gmail.com", "creation_time": "2010-02-09T03:52:18Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 48696, "attachment_id": null, "text": "Verified and commited. Thanks, Peter.\nhttp://svn.apache.org/viewvc?rev=908394&view=rev\n\nBTW, while testing I found that the JPG in the demo ZIP, when encoded in RGB mode, comes out wrong (PNG is fine). I don't have time to look more closely at this right now.", "id": 134388, "time": "2010-02-10T00:55:31Z", "creator": "jeremias@apache.org", "creation_time": "2010-02-10T00:55:31Z", "is_private": false}, {"count": 8, "tags": [], "creator": "peter.hancock@gmail.com", "text": "The commited fix breaks other functionality", "id": 134422, "time": "2010-02-11T11:35:53Z", "bug_id": 48696, "creation_time": "2010-02-11T11:35:53Z", "is_private": false, "attachment_id": null}, {"count": 9, "attachment_id": 24970, "creator": "peter.hancock@gmail.com", "text": "Created attachment 24970\nA fix\n\nThe previous commited fix broke the printing of color images.", "id": 134423, "time": "2010-02-11T11:45:50Z", "bug_id": 48696, "creation_time": "2010-02-11T11:45:50Z", "tags": [], "is_private": false}, {"count": 10, "tags": [], "bug_id": 48696, "attachment_id": null, "text": "Could a commiter please review the proposed amendments  to commit 908394 in attachment  24970.  Commit 24970 introduced a bug.", "id": 135525, "time": "2010-03-22T10:54:17Z", "creator": "peter.hancock@gmail.com", "creation_time": "2010-03-22T10:54:17Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 48696, "attachment_id": 25308, "text": "Created attachment 25308\nA revised fix", "id": 136198, "time": "2010-04-16T10:05:53Z", "creator": "peter.hancock@gmail.com", "creation_time": "2010-04-16T10:05:53Z", "is_private": false}, {"count": 12, "tags": [], "creator": "peter.hancock@gmail.com", "text": "Created attachment 26443\npatch against trunk@1051874\n\nDifferences fro mprevious patch:\nNo IDEStructureParameter for a YCBCR color model is required for 1 bit/pixel b+w images\nThe Subtactive IDEStructureParameter should only be set on subtractive images with bit/pixel > 1", "id": 142927, "time": "2010-12-23T05:39:49Z", "bug_id": 48696, "creation_time": "2010-12-23T05:39:49Z", "is_private": false, "attachment_id": 26443}, {"count": 13, "tags": [], "creator": "peter.hancock@gmail.com", "text": "Final patch committed in http://svn.apache.org/viewvc?rev=1175808&view=rev", "id": 149890, "time": "2011-09-28T09:16:04Z", "bug_id": 48696, "creation_time": "2011-09-28T09:16:04Z", "is_private": false, "attachment_id": null}]