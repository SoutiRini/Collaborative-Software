[{"count": 0, "tags": [], "bug_id": 44662, "attachment_id": null, "is_private": false, "id": 114894, "time": "2008-03-23T06:12:42Z", "creator": "gustav_weber75@yahoo.com", "creation_time": "2008-03-23T06:12:42Z", "text": "Task 'get' should handle the checking of the downloaded file (using available checksum files from the download server) automatically and transparent for the user."}, {"count": 1, "tags": [], "bug_id": 44662, "attachment_id": null, "text": "something like \n\n  <macrodef name=\"get-and-checksum\">\n    <attribute name=\"url\"/>\n    <attribute name=\"dest\"/>\n    <sequential>\n      <get src=\"@{url}\" dest=\"@{dest}\"/>\n      <get src=\"@{url}.sha1\" dest=\"@{dest}.sha\"/>\n      <local name=\"checksum.matches\"/>\n      <local name=\"checksum.matches.fail\"/>\n      <checksum file=\"@{dest}\" algorithm=\"sha\" fileext=\".sha\"\n                verifyproperty=\"checksum.matches\"/>\n      <condition property=\"checksum.matches.fail\">\n        <equals arg1=\"${checksum.matches}\" arg2=\"false\"/>\n      </condition>\n      <fail if=\"checksum.matches.fail\">Checksum error</fail>\n    </sequential>\n  </macrodef>\n\nor its Ant 1.7.1 compatible variant\n\n  <macrodef name=\"get-and-checksum\">\n    <attribute name=\"url\"/>\n    <attribute name=\"dest\"/>\n    <sequential>\n      <get src=\"@{url}\" dest=\"@{dest}\"/>\n      <get src=\"@{url}.sha1\" dest=\"@{dest}.sha\"/>\n      <checksum file=\"@{dest}\" algorithm=\"sha\" fileext=\".sha\"\n                verifyproperty=\"checksum.matches.@{dest}\"/>\n      <condition property=\"checksum.matches.fail.@{dest}\">\n        <equals arg1=\"${checksum.matches.@{dest}}\" arg2=\"false\"/>\n      </condition>\n      <fail if=\"checksum.matches.fail.@{dest}\">Checksum error</fail>\n    </sequential>\n  </macrodef>\n\nwill do, no need to augment <get>.\n\nsvn revision 807950 contains the first incarnation in the <get> manual page.", "id": 129940, "time": "2009-08-26T03:05:21Z", "creator": "bodewig@apache.org", "creation_time": "2009-08-26T03:05:21Z", "is_private": false}]