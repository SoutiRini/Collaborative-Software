[{"count": 0, "tags": [], "text": "Now, JspcServletContext\n\n    @Override\n    public ClassLoader getClassLoader() {\n        return null;\n    }\ni.e. no classloader is set.\n\nThis maybe throw NPE.\nActually, by rev. 1431228, \n\n    private void init(ErrorDispatcher err) throws JasperException {\n        if (initialized)\n            return;\n\n        tagPlugins = new HashMap<String, TagPlugin>();\n\n        Enumeration<URL> urls = null;\n        try {\n            urls = ctxt.getClassLoader().getResources(\n                    META_INF_JASPER_TAG_PLUGINS_XML);\n        } catch (IOException ioe) {\n            throw new JasperException(ioe);\n        }\n\n        ....\n    }\n\nthrew NPE, because ctxt.getClassLoader() is null.\n\nSo, we need to set the classloader in JspServletContext.\nI resolved this issue by adding setter of classloader in JspServletContext and setting classloader in JspC like below.\n\n\n    protected void processFile(String file)\n        throws JasperException\n    {\n\n            ....\n            originalClassLoader = Thread.currentThread().getContextClassLoader();\n            if( loader==null ) {\n                initClassLoader( clctxt );\n                context.setClassLoader(loader); <-- set classloader\n            }\n\n   }", "attachment_id": null, "id": 164818, "creator": "aceofmoon@gmail.com", "time": "2013-01-23T06:33:00Z", "bug_id": 54472, "creation_time": "2013-01-23T06:33:00Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 54472, "attachment_id": null, "id": 164819, "time": "2013-01-23T09:07:47Z", "creator": "markt@apache.org", "creation_time": "2013-01-23T09:07:47Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of bug 54440 ***"}]