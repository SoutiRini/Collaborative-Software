[{"count": 0, "tags": [], "creator": "apachebugzilla@waltersson.com", "is_private": false, "id": 74017, "attachment_id": null, "bug_id": 34587, "creation_time": "2005-04-22T23:16:34Z", "time": "2005-04-22T23:16:34Z", "text": "The following JSP page will not compile:\n\n<%@page import=\"org.Foo\"%>\n<%@page import=\"org.foo.Bar\"%>\n<html>\n</html>\n\nError page says:\n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nGenerated servlet error:\nThe import com.foo cannot be resolved\n\n\n\torg.apache.jasper.compiler.DefaultErrorHandler.javacError\n(DefaultErrorHandler.java:84)\n\torg.apache.jasper.compiler.ErrorDispatcher.javacError\n(ErrorDispatcher.java:328)\n\torg.apache.jasper.compiler.JDTCompiler.generateClass\n(JDTCompiler.java:397)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:288)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:267)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:255)\n\torg.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:556)\n\torg.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:293)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:291)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\nTo me, the problem root seems to be this method from JDTCompiler.java:\n\nprivate boolean isPackage(String result) {\n    if (result.equals(targetClassName)) {\n        return false;\n    }\n    String resourceName = result.replace('.', '/') + \".class\";\n    InputStream is = \n        classLoader.getResourceAsStream(resourceName);\n    return is == null;\n}\n\nThis code obviously will return false for the org.foo package although it does \nexist just because there is a class named Foo in the org package."}, {"count": 1, "tags": [], "bug_id": 34587, "attachment_id": null, "text": "On second thought, the real culprit might be the classLoader used (in\nisPackage). Case-insentive on some platforms?", "id": 74082, "time": "2005-04-25T12:54:27Z", "creator": "apachebugzilla@waltersson.com", "creation_time": "2005-04-25T12:54:27Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 34587, "attachment_id": null, "text": "The Tomcat webapp classloader classloader is always case sensitive on all\nplatforms. The URL classloader which is its parent might not be (it's the\nregular one from the JVM, and I don't really know how it works). You're going to\nhave to provide more details.\n\nDo you have any ideas for improving the isPackage method ? (otherwise, since I\ndon't, the bug will end up as wontfix)", "id": 74083, "time": "2005-04-25T13:01:56Z", "creator": "remm@apache.org", "creation_time": "2005-04-25T13:01:56Z", "is_private": false}, {"count": 3, "tags": [], "creator": "apachebugzilla@waltersson.com", "text": "(In reply to comment #2)\n> The Tomcat webapp classloader classloader is always case sensitive on all\n> platforms. The URL classloader which is its parent might not be (it's the\n> regular one from the JVM, and I don't really know how it works). You're going to\n> have to provide more details.\nBlaming the classloader was maybe not such a good idea. After some debugging I\nam not so sure that the isPackage method is the real source of this bug. Anyway,\nI'm no expert in compilers and will refrain from further guessing.\nWhat I do know is that this bug was found when running Tomcat 5.5.9 with Java\n1.5 in Eclipse 3.0.1. What kind of details do you need to know?\n", "id": 74109, "attachment_id": null, "bug_id": 34587, "creation_time": "2005-04-26T07:22:36Z", "time": "2005-04-26T07:22:36Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 34587, "attachment_id": null, "text": "Please reopen a new bug report when you have concrete details, rather than\nguessing and then withdrawing the guess ;)", "id": 74378, "time": "2005-05-03T16:21:21Z", "creator": "yoavs@computer.org", "creation_time": "2005-05-03T16:21:21Z", "is_private": false}]