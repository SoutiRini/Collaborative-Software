[{"count": 0, "tags": [], "bug_id": 46238, "attachment_id": null, "is_private": false, "id": 122616, "time": "2008-11-18T22:13:59Z", "creator": "tonys@turnkey.com.au", "creation_time": "2008-11-18T22:13:59Z", "text": "The following causes a null pointer exception in FontFace.createFontFace:\n\n  <defs>\n    <style type=\"text/css\"><![CDATA[\n      @font-face { font-family:Arial}\n      .fnt {font-weight:normal;font-size:42;font-family:Arial}\n    ]]></style>\n  </defs>\n\nI'm not sure what the intention is, or if this is valid CSS.\n\nThe following patch allows the SVG to be displayed, but I'm not claiming that it's a proper fix:\n\n    protected FontFace(String familyName) {\n        super(familyName);\n\tsrcs = new ArrayList();  // added\n    }"}, {"count": 1, "attachment_id": null, "bug_id": 46238, "text": "Make that new LinkedList() instead of ArrayList();", "id": 122617, "time": "2008-11-18T22:18:57Z", "creator": "tonys@turnkey.com.au", "creation_time": "2008-11-18T22:18:57Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 46238, "is_private": false, "text": "(In reply to comment #0)\nThe mailing list seems more appropriate for general troubleshooting of things which are not certain to be bugs... ;-)\n\n\n\n>       @font-face { font-family:Arial}\n[...]\n> I'm not sure what the intention is, or if this is valid CSS.\n\nBy reading the applicable specification [1], it sounds like (it's not clear to me) that font face should always need a \"src\" attribute. So for your sample, as it seems that you are intending a locally available font, a \"local\" URL seemed reasonable. This should make the NPE go away, although I haven't tested for sure.\n\n\n\n> The following patch allows the SVG to be displayed, but I'm not claiming that\n> it's a proper fix:\n\nI'm not sure if the developers want to proceed with the fix: while I believe that Batik shouldn't break with invalid content, it seems that Batik is standards compliant so it should avoid rendering invalid content - maybe throwing an exception would be more coherent?\n\n\n\n[1] http://www.w3.org/TR/CSS2/fonts.html#font-descriptions", "id": 122634, "time": "2008-11-19T07:13:47Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2008-11-19T07:13:47Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "tonys@turnkey.com.au", "text": "Where I come from no one would dare suggest that throwing an NPE does not indicate a bug :-)\n\nAs I said, I'm not suggesting a particular fix. Perhaps I should have been clearer that by ignoring the @font-face the document is rendered correctly. In general, the philosophy of CSS is to ignore anything invalid and continue (see http://www.w3.org/TR/CSS2/syndata.html#parsing-errors for example), but I agree that throwing a meaningful exception may be more appropriate.\n\nJust for the record, it's not my SVG, so I can't make the change you suggest to \"make the NPE go away\".", "id": 122647, "time": "2008-11-19T12:00:19Z", "bug_id": 46238, "creation_time": "2008-11-19T12:00:19Z", "is_private": false, "attachment_id": null}]