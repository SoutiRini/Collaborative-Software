[{"count": 0, "tags": [], "bug_id": 57965, "attachment_id": null, "text": "This is a real example which hit us in a build but I condensed it down to the following:\n\n    <?xml version=\"1.0\"?>\n    <project name=\"release\" default=\"test\">\n        <target name=\"test\">\n            <mkdir dir=\"build\"/>\n            <copy todir=\"build\">\n                <union>\n                    <fileset dir=\"src\" includes=\"config/log4j.properties\" />\n                    <fileset dir=\"src/config\" includes=\"log4j.properties\"/>\n                </union>\n            </copy>\n        </target>\n\n        <target name=\"clean\">\n            <delete dir=\"build\"/>\n        </target>\n    </project>\n\nSo the two resources have different paths:\n    config/log4j.properties\n    log4j.properties\n\nBut despite their paths being different, the second of these seems to be deduplicated away by the <union>.\n\nI looked at the code in Union and decided that it was probably using the default equals() on FileResource, which does indeed only look at the full file path. Perhaps that should be taking into account the base directory instead.", "id": 183152, "time": "2015-05-28T06:42:39Z", "creator": "trejkaz@trypticon.org", "creation_time": "2015-05-28T06:42:39Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "thanks for the analysis.\n\nfixed with git commit 592aa74", "id": 188265, "time": "2016-02-07T15:40:38Z", "bug_id": 57965, "creation_time": "2016-02-07T15:40:38Z", "is_private": false}]