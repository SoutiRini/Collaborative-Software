[{"count": 0, "tags": [], "bug_id": 20778, "is_private": false, "text": "(tried only on OSX 10.2.6 with tomcat 4.1.24 and jdk 1.4.1)\n\n Setting the locale with <fmt:setLocale> works only once in application. Below is a modified \nversion of standard-examples/format/GermanLocale.jsp to reproduce the problem. The first \nloading of the page sets the locale, and it cannot be changed anymore (regardless of browser and \nmachine used to loca the page). The both urls below will output the german version of greeting.\n\nhttp://localhost:8080/standard-examples/format/testlocale.jsp?tl=de\nhttp://localhost:8080/standard-examples/format/testlocale.jsp?tl=it_IT\n\ntestlocale.jsp:\n---\n<%@ taglib prefix=\"fmt\" uri=\"http://java.sun.com/jstl/fmt\" %>\n\n<html>\n<head>\n  <title>JSTL: Formatting/I18N Support -- German Locale Example</title>\n</head>\n<body bgcolor=\"#FFFFFF\">\n<h3>German Locale</h3>\n\n<fmt:setLocale value=\"${param.tl}\"/>\n<fmt:bundle basename=\"org.apache.taglibs.standard.examples.i18n.Resources\">\n <fmt:message>\n  greetingMorning\n </fmt:message>\n</fmt:bundle>\n\n</body>\n</html>\n---", "id": 38863, "time": "2003-06-14T17:21:40Z", "creator": "apache-bugzilla@jesse.iki.fi", "creation_time": "2003-06-14T17:21:40Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 20778, "attachment_id": null, "id": 39131, "time": "2003-06-20T00:02:17Z", "creator": "pierre.delisle@sun.com", "creation_time": "2003-06-20T00:02:17Z", "is_private": false, "text": "Please give it a try with JSTL 1.0.3 (or the standard-1.0 nightly). \nIt works for me."}, {"attachment_id": null, "tags": [], "creator": "apache-bugzilla@jesse.iki.fi", "text": "I did some more testing with the 1.0 and servlets, too, and the bug is definitely there - the first \nuser that loads a JSP page will set the locale for every download after the first one - all users will \nget the first user's locale with no way to change it, not even through \njavax.servlet.jsp.jstl.core.Config.\n\n I could not verify it with nightly. I tried several but none of them would even install the webapp to \ntomcat. I tried to use the nightly instead of the 1.0 (my ant-script copies the c.tld, fmt.tld, jstl.jar, \nand standard.jar to proper places). I just get many exceptions, with \nthe first two below (jEdit won't let me cut'n'paste from the tomcat output window, apparently, so \nhere is manually written head of the exception, typos are all mine.) These are speficially from \njakarta-taglibs-standard-20030626.\n\n---\nJun 26, 2003 10:13:15 PM org.apache.commons.digester.Digester error\nSEVERE: Parse Error at line 6 column 19: Document root element \"taglib\" must match DOCTYPE \nroot \"null\".\norg.xml.sax.SAXParseException: Document root element \"taglib\", must match DOCTYPE root \"null\".\n        at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)\n...\nJun 26, 2003 10:13:15 PM org.apache.commons.digester.Digester error\nSEVERE: Parse Error at line 6 column 19: Document is invalid: no grammar found.\norg.xml.sax.SAXParseException: Document is invalid: no grammar found.\n        at org.apache.xerces.util.ErrorhandlerWrapper.createSAXParseException(Unknown Source)\n...\n---\n", "count": 2, "id": 39523, "time": "2003-06-26T19:44:07Z", "bug_id": 20778, "creation_time": "2003-06-26T19:44:07Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 20778, "attachment_id": null, "id": 43957, "time": "2003-09-10T17:23:24Z", "creator": "pierre.delisle@sun.com", "creation_time": "2003-09-10T17:23:24Z", "is_private": false, "text": "As I mentioned previously, it all works fine for me.\nI am therefore attaching a war file to help us understand \nwhy it does not for you.\n\nSo, please use the following configuration:\n  - tomcat 4.1.27 running under J2SE 1.4.2\n\nDrop the attached war file (i18ntest.war) in the webapps directory \nof tomcat 4.1.27, start tomcat, and access the following URL:\n\n http://localhost:8080/i18ntest/test.jsp\n\nSelect the various locales, and see if the message is displayed\nin the proper locale.\n\nI'd appreciate if you could tell us whether it works or not \nas soon as possible so we can take care of this bug report.\n\n(by the way the standard taglib used in this war file is the nightly\nbuild of standard-1.0 of 20030910)"}, {"count": 4, "tags": [], "bug_id": 20778, "attachment_id": 8131, "id": 43958, "time": "2003-09-10T17:25:07Z", "creator": "pierre.delisle@sun.com", "creation_time": "2003-09-10T17:25:07Z", "is_private": false, "text": "Created attachment 8131\nWar file to test under tomcat 4.1.27 running under J2SE 1.4.2"}, {"count": 5, "tags": [], "bug_id": 20778, "is_private": false, "text": "Pierre Delisle's package works: tested with Mac OS X 10.2.6 with java 1.4.1 Update 1, with Tomcat \n4.1.24 and 4.1.27.\n\n I also tested with the previously non-working JSP and it did still not work. With the jars from Pierre \nDelisle's package it worked, so the bug must have been fixed in the later builds.\n\n The standard taglib nightly build of standard-1.0 of 20030910 is verified to work correctly in the \nconfiguration mentioned above.\n", "id": 43980, "time": "2003-09-10T20:06:30Z", "creator": "apache-bugzilla@jesse.iki.fi", "creation_time": "2003-09-10T20:06:30Z", "attachment_id": null}]