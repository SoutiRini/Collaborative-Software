[{"count": 0, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "text": "Testing 9.0.0.M26 release candidate on a fast PC,\non Windows 10 with Tomcat Native dll in bin/native/.\n\nI see the following failure in\nTEST-org.apache.tomcat.jni.TestSocketServer.APR.txt\n\n(The same result for NIO, NIO2 connectors as well, as this is a jni test - regardless of connector).\n\n[[[\nTestcase: testBlockingReadFromClientWithTimeout took 1,015 sec\n\tFAILED\nSocket.timeoutSet failed (<1s) [985435824]\njunit.framework.AssertionFailedError: Socket.timeoutSet failed (<1s) [985435824]\n\tat org.apache.tomcat.jni.TestSocketServer.testBlockingReadFromClientWithTimeout(TestSocketServer.java:99)\n]]]\n\n\nThe value [985435824] is marginally smaller than expected 1000000000.\n\nI wonder whether timeout is calculated from some earlier moment (that is - move \"long start = System.nanoTime();\" line earlier), or some arithmetic error is allowed here (introduce an error margin).\n\nAll other tests completed successfully.", "id": 200238, "time": "2017-08-08T17:44:48Z", "bug_id": 61393, "creation_time": "2017-08-08T17:44:48Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Fixed in trunk for 9.0.0.M27 onwards.\n\nIt appears the the root cause was that the resolution of System.nanoTime() is usually much greater than 1ns, particularly on Windows.", "id": 200538, "time": "2017-08-31T08:52:00Z", "bug_id": 61393, "creation_time": "2017-08-31T08:52:00Z", "is_private": false}]