[{"count": 0, "tags": [], "bug_id": 42681, "text": "I'm using org.apache.catalina.ha.deploy.FarmWarDeployer to deploy my application\nacross cluster nodes.\nIt copying the application to other cluster members but when my .war application\narrives to cluster node it appears 2Mb less then origin. If you need anything\nmore, please msg me and I'll provide all necessary info.\n\n\nTomcat version: 6.0.13\nOS: RedHat Linux ES4 (2.6.9-42.0.2.ELsmp)\nException on cluster node that received .war file:\nMay 30, 2007 12:03:46 AM org.apache.catalina.startup.ContextConfig init\nSEVERE: Exception fixing docBase: {0}\njava.util.zip.ZipException: invalid END header (bad central directory offset)\n        at java.util.zip.ZipFile.open(Native Method)\n        at java.util.zip.ZipFile.<init>(Unknown Source)\n        at java.util.jar.JarFile.<init>(Unknown Source)\n        at java.util.jar.JarFile.<init>(Unknown Source)\n        at sun.net.www.protocol.jar.URLJarFile.<init>(Unknown Source)\n        at sun.net.www.protocol.jar.URLJarFile.getJarFile(Unknown Source)\n        at sun.net.www.protocol.jar.JarFileFactory.get(Unknown Source)\n        at sun.net.www.protocol.jar.JarURLConnection.connect(Unknown Source)\n        at sun.net.www.protocol.jar.JarURLConnection.getJarFile(Unknown Source)\n        at org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:141)\n        at\norg.apache.catalina.startup.ContextConfig.fixDocBase(ContextConfig.java:890)\n        at org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:1008)\n        at\norg.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:279)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)\n        at org.apache.catalina.core.StandardContext.init(StandardContext.java:5297)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4070)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:825)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:515)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1220)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at\norg.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)\n        at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(Unknown Source)\n        at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(Unknown Source)\n        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown\nSource)\n        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source)\n        at\norg.apache.catalina.ha.deploy.FarmWarDeployer.check(FarmWarDeployer.java:613)\n        at\norg.apache.catalina.ha.deploy.FarmWarDeployer.messageReceived(FarmWarDeployer.java:236)\n        at\norg.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:916)\n        at\norg.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:897)\n        at\norg.apache.catalina.tribes.group.GroupChannel.messageReceived(GroupChannel.java:264)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.interceptors.TcpFailureDetector.messageReceived(TcpFailureDetector.java:110)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.ChannelCoordinator.messageReceived(ChannelCoordinator.java:241)\n        at\norg.apache.catalina.tribes.transport.ReceiverBase.messageDataReceived(ReceiverBase.java:225)\n        at\norg.apache.catalina.tribes.transport.nio.NioReplicationTask.drainChannel(NioReplicationTask.java:185)\n        at\norg.apache.catalina.tribes.transport.nio.NioReplicationTask.run(NioReplicationTask.java:88)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nMay 30, 2007 12:03:46 AM org.apache.catalina.core.StandardContext resourcesStart\nSEVERE: Error starting static Resources\njava.lang.IllegalArgumentException: Invalid or unreadable WAR file : invalid END\nheader (bad central directory offset)\n        at\norg.apache.naming.resources.WARDirContext.setDocBase(WARDirContext.java:135)\n        at\norg.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:3941)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4110)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:825)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:515)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1220)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at\norg.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)\n        at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(Unknown Source)\n        at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(Unknown Source)\n        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown\nSource)\n        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source)\n        at\norg.apache.catalina.ha.deploy.FarmWarDeployer.check(FarmWarDeployer.java:613)\n        at\norg.apache.catalina.ha.deploy.FarmWarDeployer.messageReceived(FarmWarDeployer.java:236)\n        at\norg.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:916)\n        at\norg.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:897)\n        at\norg.apache.catalina.tribes.group.GroupChannel.messageReceived(GroupChannel.java:264)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.interceptors.TcpFailureDetector.messageReceived(TcpFailureDetector.java:110)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.ChannelCoordinator.messageReceived(ChannelCoordinator.java:241)\n        at\norg.apache.catalina.tribes.transport.ReceiverBase.messageDataReceived(ReceiverBase.java:225)\n        at\norg.apache.catalina.tribes.transport.nio.NioReplicationTask.drainChannel(NioReplicationTask.java:185)\n        at\norg.apache.catalina.tribes.transport.nio.NioReplicationTask.run(NioReplicationTask.java:88)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nMay 30, 2007 12:03:46 AM org.apache.catalina.core.StandardContext resourcesStart\nSEVERE: Error starting static Resources\njava.lang.IllegalArgumentException: Invalid or unreadable WAR file : invalid END\nheader (bad central directory offset)\n        at\norg.apache.naming.resources.WARDirContext.setDocBase(WARDirContext.java:135)\n        at\norg.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:3941)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4110)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:825)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:515)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1220)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at\norg.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)\n        at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(Unknown Source)\n        at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(Unknown Source)\n        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown\nSource)\n        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source)\n        at\norg.apache.catalina.ha.deploy.FarmWarDeployer.check(FarmWarDeployer.java:613)\n        at\norg.apache.catalina.ha.deploy.FarmWarDeployer.messageReceived(FarmWarDeployer.java:236)\n        at\norg.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:916)\n        at\norg.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:897)\n        at\norg.apache.catalina.tribes.group.GroupChannel.messageReceived(GroupChannel.java:264)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.interceptors.TcpFailureDetector.messageReceived(TcpFailureDetector.java:110)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.ChannelCoordinator.messageReceived(ChannelCoordinator.java:241)\n        at\norg.apache.catalina.tribes.transport.ReceiverBase.messageDataReceived(ReceiverBase.java:225)\n        at\norg.apache.catalina.tribes.transport.nio.NioReplicationTask.drainChannel(NioReplicationTask.java:185)\n        at\norg.apache.catalina.tribes.transport.nio.NioReplicationTask.run(NioReplicationTask.java:88)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nMay 30, 2007 12:03:46 AM org.apache.catalina.core.StandardContext resourcesStart\nSEVERE: Error starting static Resources\njava.lang.IllegalArgumentException: Invalid or unreadable WAR file : invalid END\nheader (bad central directory offset)\n        at\norg.apache.naming.resources.WARDirContext.setDocBase(WARDirContext.java:135)\n        at\norg.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:3941)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4110)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:825)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:515)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1220)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at\norg.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)\n        at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(Unknown Source)\n        at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(Unknown Source)\n        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown\nSource)\n        at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source)\n        at\norg.apache.catalina.ha.deploy.FarmWarDeployer.check(FarmWarDeployer.java:613)\n        at\norg.apache.catalina.ha.deploy.FarmWarDeployer.messageReceived(FarmWarDeployer.java:236)\n        at\norg.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:916)\n        at\norg.apache.catalina.ha.tcp.SimpleTcpCluster.messageReceived(SimpleTcpCluster.java:897)\n        at\norg.apache.catalina.tribes.group.GroupChannel.messageReceived(GroupChannel.java:264)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.interceptors.TcpFailureDetector.messageReceived(TcpFailureDetector.java:110)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.ChannelInterceptorBase.messageReceived(ChannelInterceptorBase.java:79)\n        at\norg.apache.catalina.tribes.group.ChannelCoordinator.messageReceived(ChannelCoordinator.java:241)\n        at\norg.apache.catalina.tribes.transport.ReceiverBase.messageDataReceived(ReceiverBase.java:225)\n        at\norg.apache.catalina.tribes.transport.nio.NioReplicationTask.drainChannel(NioReplicationTask.java:185)\n        at\norg.apache.catalina.tribes.transport.nio.NioReplicationTask.run(NioReplicationTask.java:88)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)", "id": 104470, "time": "2007-06-17T03:26:20Z", "creator": "finger@dj.ua", "creation_time": "2007-06-17T03:26:20Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 42681, "is_private": false, "id": 121240, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2008-10-06T10:36:21Z", "time": "2008-10-06T10:36:21Z", "text": "This is probably has the same root cause as 45851.\n\n*** This bug has been marked as a duplicate of bug 45851 ***"}]