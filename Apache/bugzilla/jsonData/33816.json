[{"count": 0, "tags": [], "bug_id": 33816, "attachment_id": null, "id": 71728, "time": "2005-03-02T20:50:19Z", "creator": "bughunt@gluino.name", "creation_time": "2005-03-02T20:50:19Z", "is_private": false, "text": "Looks like jakarta-tomcat-5.5.7-src/jakarta-tomcat-5/build.xml\nspecifies a parameter called 'destfile' for target 'downloadgz'.\n\nHowever, the definition of 'downloadgz' is such that said parameter is never used:\n\n  <target name=\"downloadgz\" unless=\"exist\" depends=\"setproxy,testexist\">\n    <!-- Download and extract the package -->\n    <get src=\"${sourcefile}\" dest=\"${base.path}/file.tar.gz\" />\n    <gunzip src=\"${base.path}/file.tar.gz\" dest=\"${base.path}/file.tar\"/>\n    <untar src=\"${base.path}/file.tar\" dest=\"${base.path}\"/>\n    <delete file=\"${base.path}/file.tar\"/>\n    <delete file=\"${base.path}/file.tar.gz\"/>\n  </target>\n\nSo we can rip out the 'destfiles':\n\n--- /usr/local/tarballs/jakarta-tomcat-5.5.7-src/jakarta-tomcat-5/build.xml.bak\n2005-03-02 20:42:30.009017936 +0100\n+++ /usr/local/tarballs/jakarta-tomcat-5.5.7-src/jakarta-tomcat-5/build.xml    \n2005-03-02 20:47:08.198726672 +0100\n@@ -601,17 +601,14 @@\n     <!-- <antcall target=\"build-commons-modeler\" /> -->\n     <!-- <antcall target=\"build-commons-daemon\"  /> -->\n\n-       <antcall target=\"downloadgz\">\n+    <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-collections-src.loc}\"/>\n-      <param name=\"destfile\" value=\"${tomcat-dbcp.jar}\" />\n     </antcall>\n-       <antcall target=\"downloadgz\">\n+    <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-pool-src.loc}\"/>\n-      <param name=\"destfile\" value=\"${tomcat-dbcp.jar}\" />\n     </antcall>\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-dbcp-src.loc}\"/>\n-      <param name=\"destfile\" value=\"${tomcat-dbcp.jar}\" />\n     </antcall>\n\n     <antcall target=\"build-tomcat-dbcp\" />\n@@ -1714,48 +1711,39 @@\n     <!-- Downdown any sub package or tools needed. -->\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-beanutils.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-beanutils.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-collections.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-collections.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-el.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-el.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-logging.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-logging.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-modeler.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-modeler.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${log4j.loc}\"/>\n-      <param name=\"destfile\" value=\"${log4j.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-digester.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-digester.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-fileupload.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-fileupload.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <!-- xerces2 brings 2 files, test for one of them -->\n       <param name=\"sourcefile\" value=\"${xerces.loc}\"/>\n-      <param name=\"destfile\" value=\"${xml-apis.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadzip\">\n@@ -1772,25 +1760,20 @@\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-launcher.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-launcher.jar}\"/>\n     </antcall>\n\n        <!--\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-pool.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-pool.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-dbcp.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-dbcp.jar}\"/>\n-      <param name=\"destdir\" value=\"${base.path}\"/>\n     </antcall>\n     -->\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-httpclient.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-httpclient.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadfile\">\n@@ -1801,22 +1784,18 @@\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${struts.loc}\"/>\n-      <param name=\"destfile\" value=\"${struts.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${commons-daemon.loc}\"/>\n-      <param name=\"destfile\" value=\"${commons-daemon.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${jaxen.loc}\"/>\n-      <param name=\"destfile\" value=\"${jaxen.jar}\"/>\n     </antcall>\n\n     <antcall target=\"downloadgz\">\n       <param name=\"sourcefile\" value=\"${saxpath.loc}\"/>\n-      <param name=\"destfile\" value=\"${saxpath.jar}\"/>\n     </antcall>\n\n     <!-- Build the dependencies that are not yet released -->"}, {"count": 1, "tags": [], "creator": "william.barker@wilshire.com", "attachment_id": null, "id": 71729, "time": "2005-03-02T21:01:15Z", "bug_id": 33816, "creation_time": "2005-03-02T21:01:15Z", "is_private": false, "text": "The destfile is used by the testexist target"}]