[{"count": 0, "tags": [], "creator": "kevin@kogz.com", "text": "First off, is this feature deprecated? I can find NO REFERENCE for the life of \nme in the 4.1 docs for variable substitution, so there is a chance this was \nchanged and not documented anywhere.\n\nAccording to the 3.3 manual, variable substitution SHOULD work:\n\nhttp://jakarta.apache.org/tomcat/tomcat-3.3-doc/serverxml.html\n\nThere is no correspnding page in the 4.1 manual (oversight?) so I can not tell \nif that data is accurate. In order to pass in an environment variable (in my \ncase the bind IP for a developer instance), it would appear one should do:\n\ntomcat.sh start -bind.ip=1.2.3.4\n\nHowever, since 3.3:\n\ntomcat.sh is now catalina.sh?\nthere is no support for options past the start argument\nit appears JAVA_OPTS is now preferred.\n\nSo I set JAVA_OPTS=\"-Dbind.ip=1.2.3.4\", and verified that declaration was \npassed to the JVM. No problem there. However, catalina does not respect my \nserver.xml reference to the property:\n\n    <!-- HTTP 1.1 Listener on port 8080 -->\n    <Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\n               address=\"${bind.ip}\"\n               port=\"8080\"\n\nAnd reports the following in the error log:\n\nVM Started:\n> IntrospectionUtils: Unable to resolve host name:${bind.ip}\nAug 7, 2003 8:35:26 AM org.apache.coyote.http11.Http11Protocol init\n\nThis is at the very least a break in documentation since there is no general \nserver.xml reference documnent, and appears to be a bug in the app as well.\n\nThis is a major pain since now I need to customize each server.xml for each \ndeveloper and then all are out of sync with CVS. Please Fix!!!", "id": 42007, "time": "2003-08-02T18:48:22Z", "bug_id": 22082, "creation_time": "2003-08-02T18:48:22Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 22082, "attachment_id": null, "text": "Tomcat 3.3 and Tomcat 4.x differ significantly, not only architecturally, but in\nXML parser used to parse server.xml.  Tomcat 3.3 uses an internal\nimplementation, which supports \"substitution\".  Tomcat 4.x uses commons-\ndigester, which currently does not support \"substitution\".\n\nYou are welcome to file a feature request for this on commons-digester.\n\nMarking as INVALID since a lot of Tomcat 3.3's documentation doesn't apply at \nall to Tomcat 4.\n\nFor now, maybe you can generate customized server.xmls from a single source XML \nusing some technology, for example Ant's <copy> task (with filtering) or <xslt> \ntask. ", "id": 42118, "time": "2003-08-05T00:51:06Z", "creator": "Larry.Isaacs@sas.com", "creation_time": "2003-08-05T00:51:06Z", "is_private": false}]