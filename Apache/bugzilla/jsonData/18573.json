[{"count": 0, "tags": [], "bug_id": 18573, "text": "yahoogroups return response lines as\n\n  HTTP/1.1 200\n\nthat make the proxy fail, the patch below fakes a reason phrase\n\nBye,\n\n  - Salva\n\n\n--- proxy_http.c~       Fri Nov  8 10:24:00 2002\n+++ proxy_http.c        Tue Apr  1 18:10:14 2003\n@@ -766,7 +766,13 @@\n             r->status = atoi(&buffer[9]);\n \n             buffer[12] = keepchar;\n-            r->status_line = apr_pstrdup(p, &buffer[9]);\n+            \n+            if (keepchar) {\n+               r->status_line = apr_pstrdup(p, &buffer[9]);\n+            }\n+            else {\n+               r->status_line = apr_pstrcat(p, &buffer[9], \" Unknow reason\", NULL);\n+            }\n             \n \n             /* read the headers. */", "id": 34259, "time": "2003-04-01T16:50:50Z", "creator": "sfandino@yahoo.com", "creation_time": "2003-04-01T16:50:50Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 18573, "text": "According to strict interpretation of RFC2616, response codes must have at least\none space after the OK part. However, not supporting this means we are not\n\"lenient in what we accept\".\n", "id": 35334, "time": "2003-04-16T15:23:06Z", "creator": "minfrin@sharp.fm", "creation_time": "2003-04-16T15:23:06Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 18573, "text": "Actually, since ap_getline trims off trailing whitespace, the remote server\ncould have sent a perfectly valid response that includes the space after the\nstatus code and then nothing else.  (In fact, this is exactly what many java\nservlet containers acting as web servers do)\n\nIn this case, not only is apache issuing a spurious warning message (line 739),\nbut it is taking perfectly RFC-compliant input and failing.  Bad.\n\nIn my opinion, version 1.159 of proxy_util.c fixed the bug it claimed to fix\nincorrectly - I much prefer a patch similar to the one created for bug 11668\n(that bug's for apache 1.3).  The blank space after the numeric status code\nwhich ap_getline stripped needs to be placed back in.  A simple:\n\n    if ('\\0' == buffer[12]) buffer[13] = '\\0';\n\nbefore the manipulation of buffer[12] would have been the correct thing to do -\nthe current mucking about with keepchar does not undo the damage that ap_getline\ncan do to the status line.", "id": 36699, "time": "2003-05-05T14:55:30Z", "creator": "martin@snowplow.org", "creation_time": "2003-05-05T14:55:30Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "trawick@apache.org", "text": "Isn't this PR fixed by this commit to proxy_http.c?  It has been proposed for\nbackport to stable branch and will likely be in next 2.0.x.  If this fix looks\nlike it solves your problem, please let us know so we can doc this PR in CHANGES\nand close the PR.\n\nRevision 1.172 / (view) - annotate - [select for diffs] , Wed Oct 22 15:09:58\n2003 UTC (4 weeks, 2 days ago) by jorton\nBranch: MAIN\nCVS Tags: HEAD\nChanges since 1.171: +9 -7 lines\nDiff to previous 1.171 (colored)\n\n* proxy_http.c (ap_proxy_http_process_response): Send a valid\nstatus-line even if the parsed status-line had no trailing spaces.\nRemove the warning for this case as triggers for valid status-lines\ntoo.\n\nPR: 23998\n", "count": 3, "id": 47813, "time": "2003-11-21T17:28:49Z", "bug_id": 18573, "creation_time": "2003-11-21T17:28:49Z", "is_private": false}, {"count": 4, "tags": [], "text": "yes, you are right, that change has also solved this bug\n\nCheers\n", "is_private": false, "id": 47833, "creator": "sfandino@yahoo.com", "time": "2003-11-21T18:11:11Z", "bug_id": 18573, "creation_time": "2003-11-21T18:11:11Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "text": "currently fixed in 2.1-dev, approved already for merging into next 2.0.* release\n", "id": 47850, "time": "2003-11-21T18:33:19Z", "bug_id": 18573, "creation_time": "2003-11-21T18:33:19Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "jorton@redhat.com", "text": "Note that this is a dupe of bug 23998, though both are already closed.", "count": 6, "id": 48385, "time": "2003-12-02T14:33:27Z", "bug_id": 18573, "creation_time": "2003-12-02T14:33:27Z", "is_private": false}]