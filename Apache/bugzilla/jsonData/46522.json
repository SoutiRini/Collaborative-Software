[{"count": 0, "tags": [], "bug_id": 46522, "text": "My DB is \"MSSQL Server 2005\"\nI'm using \"sqljdbs4.jar\" as ODBC driver.\n\nMy table has a few field and a few data lines.\n\nWhen I am using a simple select - ResponseData are shown correctly in a JDBC sample, for instance,\n\n#1>SELECT visittypeid, visitname, version from storeshop.visittypes;\n\"Response data\" tab is showing correct data as expected:\n\nvisittypeid\ttypename\tversion\n1\t      Secret Shop\t   1\n2\t      Blitz (Jun-Nov)      1\n3\t      Training\t           1\n4\t      Casual Visit         1\n5\t      Blitz (2008 Holiday) 1\n\nWhen I'm using little bit \"fancy\" SELECT, the ResponseData are incorrect, for instance,\n\n#2>SELECT 'visittypeid=' + CAST(visittypeid AS VARCHAR), 'typename='  + typename, 'version=' + CAST(version AS VARCHAR) from storeshop.visittypes;\n\t\t\nversion=1\tversion=1\tversion=1\nversion=1\tversion=1\tversion=1\nversion=1\tversion=1\tversion=1\nversion=1\tversion=1\tversion=1\nversion=1\tversion=1\tversion=1\n\nER(ExpectedResult):\n\nvisittypeid=1   typename=Secret Shop        version=1\nvisittypeid=2   typename=Blitz (Jun-Nov)    version=1\n...\n\nI used to use a similar \"technique\" with MySql - I didn't have any problem there.\nThe #2 SELECT inside MSSQL is working fine, as expected.\n\nSo, I do not exactly, is it Jmeter \"display\" issue or \"sqljdbs4.jar\" issue.\nWould you provide me \"mssql\" ODBC driver which you are using to verify the \"issue\" again.\nYou can attach the jar-file to this report - I guess it is ~0.5MB, if it is OK for you Or send directly to my email Or let me know when I can get \"correct\" one.", "id": 124001, "time": "2009-01-13T11:18:27Z", "creator": "slavko_h@yahoo.com", "creation_time": "2009-01-13T11:18:27Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "I've tried another JDBC driver from Microsoft - \"sqljdbc_1.2.2828.100_enu.exe\" - there is same incorrect result.\n", "is_private": false, "id": 124010, "creator": "slavko_h@yahoo.com", "time": "2009-01-13T13:38:08Z", "bug_id": 46522, "creation_time": "2009-01-13T13:38:08Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 46522, "is_private": false, "id": 124013, "time": "2009-01-13T14:58:33Z", "creator": "sebb@apache.org", "creation_time": "2009-01-13T14:58:33Z", "tags": [], "text": "Since JMeter works fine with MySQL (and with Apache Derby where I tried a similar SQL statement), the problem seems to be related purely to the MS JDBC drivers - i.e. it is not a problem with JMeter.\n\nIf you can show that the select statement works OK with a stand-alone JDBC program, please re-open and attach details."}, {"count": 3, "tags": [], "creator": "slavko_h@yahoo.com", "is_private": false, "text": "Sorry, I'm not a JAVA developer and don't have Java standalone environment. I will try to use a Beanshell sample for it, but for know I've tried couple more drivers - from JNETDirect.com and INETSoftware.de.\n\nResults are the same as for native Microsoft JDBC (as in Description).\n\nSo, 99.99% looks like - it is a Jmeter problem (if those guys don't use a source-code from MS).\n\nReopened\n", "id": 124015, "time": "2009-01-13T16:57:55Z", "bug_id": 46522, "creation_time": "2009-01-13T16:57:55Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 46522, "text": "Hi Sebb2,\nAs you asked I did some research.\n\nI've found some tricky staff to get an expected result - need to use a \"field's alias\" - so, the next statement will be working as expected:\n\n#3>select 'visittypeid=' + CAST(visittypeid AS VARCHAR) AS a, ('typename='  + typename) as b, ('version=' + CAST(version AS VARCHAR)) AS c from storeshop.visittypes;\n\nSorry, I was wrong about the result in MySql (see Description) - I'm using there fields' aliases.\n\nBut I've also found another fanny staff - if I'm using in my java code field-numbers (because fields' aliases are not defined in SQL statement) then it works!!!, so the next Beanshell code shows it:\n-------\nimport java.sql.*;\n\nClass.forName(\"com...\");\nConnection conn = DriverManager.getConnection (\"jdbc:....\" );\n\nString sql=\"select 'visittypeid=' + CAST(visittypeid AS VARCHAR), 'typename='  + typename, 'version=' + CAST(version AS VARCHAR) from storeshop.visittypes\";\n\nStatement db_statement = conn.createStatement();\nResultSet result = db_statement.executeQuery (sql);\nwhile (result.next() )\n{\n\tSystem.out.println (\"by filed's # ===>  \" + result.getString(1) + \"   \" + result.getString(2) + \"    \" + result.getString(3));\n}\n-------\nresult:\nby filed's # ===>  visittypeid=1   typename=Secret Shop    version=1\nby filed's # ===>  visittypeid=2   typename=Blitz (Jun-Nov)    version=1\nby filed's # ===>  visittypeid=3   typename=Training    version=1\nby filed's # ===>  visittypeid=4   typename=Casual Visit    version=1\nby filed's # ===>  visittypeid=5   typename=Blitz (2008 Holiday)    version=1\n\nSo, we have a case when SQL statement does not provide fields' aliases in positions where expression are used - then we have the problem.\nBut using fields' numbers in Jmeter would fix the problem. ;)\n\nI think that the \"dedicated\" restriction (using aliases' names in SQL statement) should be placed in Jmeter manual if the \"issue\" will not be fixed in Jmeter soon.\n", "id": 124037, "time": "2009-01-14T09:35:01Z", "creator": "slavko_h@yahoo.com", "creation_time": "2009-01-14T09:35:01Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 46522, "is_private": false, "id": 124095, "creation_time": "2009-01-15T08:45:47Z", "time": "2009-01-15T08:45:47Z", "creator": "sebb@apache.org", "text": "Thanks for the extra info - that has confirmed it is a bug in JMeter.\n\nThe problem is that the column name is being used to store and look up the data, so if the name is non-unique (e.g. all blanks, as happens for the expressions) then the wrong data may be displayed.\n\nNote that using aliases is not guaranteed to work either ... \n\nJust try using duplicate aliases - e.g. a,b,a instead of a,b,c - and some of the wrong information will be displayed.", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 46522, "is_private": false, "text": "Fixed in SVN:\n\nURL: http://svn.apache.org/viewvc?rev=735548&view=rev\nLog:\nBug 46522 - Incorrect \"Response data\" in JDBC sample when column names are missing", "id": 124150, "time": "2009-01-18T13:13:45Z", "creator": "sebb@apache.org", "creation_time": "2009-01-18T13:13:45Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 46522, "text": "Would you provide svn# when a fix is done. I could test it.", "id": 124326, "time": "2009-01-23T11:53:46Z", "creator": "slavko_h@yahoo.com", "creation_time": "2009-01-23T11:53:46Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 46522, "text": "SVN number is included in the URL:\n\n...rev=735548...\n\nand the currently nightly build includes the fix", "id": 124339, "time": "2009-01-24T05:00:48Z", "creator": "sebb@apache.org", "creation_time": "2009-01-24T05:00:48Z", "is_private": false, "attachment_id": null}]