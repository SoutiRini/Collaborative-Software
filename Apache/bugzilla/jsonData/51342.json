[{"count": 0, "tags": [], "text": "When going through the SSL docs to use APR for native OpenSSL I found an inconsistency in the docs.\n\nin http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html#Edit_the_Tomcat_Configuration_File it suggests that a correct connector in the server.xml should look like:\n\n<-- Define a SSL Coyote HTTP/1.1 Connector on port 8443 -->\n<!--\n<Connector \n           port=\"8443\" maxThreads=\"200\"\n           scheme=\"https\" secure=\"true\" SSLEnabled=\"true\"\n           SSLCertificateFile=\"/usr/local/ssl/server.crt\" \n           SSLCertificateKeyFile=\"/usr/local/ssl/server.pem\"\n           clientAuth=\"optional\" SSLProtocol=\"TLSv1\"/>\n-->\n\nthis however didn't work and resulted in:\n\nWARNING: [SetAllPropertiesRule]{Server/Service/Connector} Setting property 'clientAuth' to 'true' did not find a matching property.\n\nAn actual working config can be found in http://tomcat.apache.org/tomcat-6.0-doc/apr.html#HTTPS . I propose copying the example section:\n\n<Connector port=\"443\" maxHttpHeaderSize=\"8192\"\n               maxThreads=\"150\"\n               enableLookups=\"false\" disableUploadTimeout=\"true\"\n               acceptCount=\"100\" scheme=\"https\" secure=\"true\"\n               SSLEnabled=\"true\" \n               SSLCertificateFile=\"${catalina.base}/conf/localhost.crt\"\n               SSLCertificateKeyFile=\"${catalina.base}/conf/localhost.key\" />\n\nTo replace the, what I believe to be false, example in the ssl-howto.", "attachment_id": null, "id": 146965, "creator": "ivolation@gmail.com", "time": "2011-06-08T17:33:00Z", "bug_id": 51342, "creation_time": "2011-06-08T17:33:00Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 27133\npatching docs/ssl-howto.xml to use same example as apr.xml tc6.0.x\n\nI copied the example from the apr.xml and added SSLVerifyClient=\"optional\" as that seems a regularly used property.", "is_private": false, "id": 146966, "creator": "ivolation@gmail.com", "time": "2011-06-08T17:38:14Z", "bug_id": 51342, "creation_time": "2011-06-08T17:38:14Z", "attachment_id": 27133}, {"count": 2, "tags": [], "bug_id": 51342, "attachment_id": null, "id": 146971, "time": "2011-06-08T18:40:56Z", "creator": "markt@apache.org", "creation_time": "2011-06-08T18:40:56Z", "is_private": false, "text": "*** Bug 51343 has been marked as a duplicate of this bug. ***"}, {"count": 3, "tags": [], "bug_id": 51342, "text": "That example works for me once the file paths are fixed.\n\nFurther, the configuration reported as erroneous and the error message are not consistent.", "id": 146972, "time": "2011-06-08T19:19:52Z", "creator": "markt@apache.org", "creation_time": "2011-06-08T19:19:52Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": ">> That example works for me once the file paths are fixed.\nI have tested this on 6.0.29 and it definitely doesn't. Are you sure you are using this with libnative APR? I know the property works with a JSSE connector, but the patch is not changing the JSSE example but only the APR and that certainly didn't work with 6.0.29. \n\n>>Further, the configuration reported as erroneous and the error message are not consistent.\n\nI am sorry seems I accidentally pasted the wrong log line. I have tested a hand full of cases to make sure it is definitely the issue. The error code provided still shows the existence of the issue, simply not with the correct matching case.\n\nI am fairly certain clientAuth is not a valid property when an SSL connector via libnative with APR.", "is_private": false, "id": 146977, "creator": "ivolation@gmail.com", "time": "2011-06-09T00:32:50Z", "bug_id": 51342, "creation_time": "2011-06-09T00:32:50Z", "attachment_id": null}, {"count": 5, "attachment_id": null, "creator": "ivolation@gmail.com", "is_private": false, "id": 146978, "time": "2011-06-09T00:42:51Z", "bug_id": 51342, "creation_time": "2011-06-09T00:42:51Z", "tags": [], "text": "as you say it works for you, I'd rather have it closed as WORKS FOR ME than INVALID."}]