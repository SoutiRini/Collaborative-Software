[{"count": 0, "tags": [], "text": "> SimpleFileStore.java\n> =============================\n>   /**\n>    * Set resourceType to \"<collection/>\" for folders and set \n> the contentLength for files.\n>    * Also set created and modified dates.\n>    */\n>   public NodeRevisionDescriptor retrieveRevisionDescriptor(Uri uri,\n>  \n> NodeRevisionNumber revisionNumber)\n>     throws ServiceAccessException, RevisionDescriptorNotFoundException\n>   {\n>     log(\"retrieveRevisionDescriptor(\" + uri + \")\");\n>     File file = getFile(uri);\n>     if (!file.exists()) throw new\n> RevisionDescriptorNotFoundException(uri.toString());\n> \n>     NodeRevisionDescriptor descriptor = new \n> NodeRevisionDescriptor(new NodeRevisionNumber(1, 0),\n>  \n> NodeRevisionDescriptors.MAIN_BRANCH);\n>     descriptor.setCreationDate(new Date(file.lastModified()));\n>     descriptor.setLastModified(descriptor.getCreationDateAsDate());\n>     \n> descriptor.setModificationDate(descriptor.getCreationDateAsDate());\n>     if (file.isDirectory())\n>     {\n>       descriptor.setResourceType(COLLECTION_TYPE);\n>     }\n>     else\n>     {\n> /*************** 10/26/2006 DRH  setResourceType null if not directory */\n>       descriptor.setResourceType(null);\n> /***************  end fix */\n>       descriptor.setContentLength(file.length());\n>     }\n>     return descriptor;\n>   }\n> ==============", "is_private": false, "id": 81815, "creator": "dhartford@ghsinc.com", "time": "2005-10-27T14:46:08Z", "bug_id": 37266, "creation_time": "2005-10-27T14:46:08Z", "attachment_id": null}]