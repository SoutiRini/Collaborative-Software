[{"count": 0, "tags": [], "text": "When checking out the files of a CVS module for a given tag, files that do not have the requested tag are checked out (not sure which revision of the file as in my test I had a single revision of those files).\n\nExamples :\n\nWe start with an empty CVS Module called CVSBug.\nThe, through the command line, we add a file, commit it, tag the module, add another file, commit it and tag the module:\n\ncvs add file1.txt\ncvs commit file1.txt\ncvs tag V1-0\ncvs add file2.txt\ncvs commit file2.txt\ncvs tag V1-1\n\nNow, we delete the directy. If checking out using direct CVS commands we get:\ncvs -r V1-1 checkout CVSBug  #This retrieves both file1.txt and file2.txt\ncvs -r V1-0 checkout CVSBug  #This retrieves only file1.txt\n\nThis behaviour is the expected behaviour.\n\nWith the following ant bellow we get the same result for V1-1 but for V1-0 we also get both files which is incorrect.\n\nThe script used for the test is:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project default=\"UpdateSourceTree\" name=\"UpdateSourceTree\">\n    <target name=\"Init\">\n    </target>\n    <target name=\"UpdateSource\">\n        <cvspass cvsroot=\":pserver:casec@chmsjavadev:/Ilfotec\" password=\"gocasec\"/>\n        <cvs command=\"checkout -f\" cvsRoot=\":pserver:casec@chmsjavadev:/Ilfotec\" dest=\"c:/temp/CVSTest\" tag=\"V1-0\" package=\"${modulename}\" quiet=\"false\" />\n    </target>\n\n    <target depends=\"Init\" name=\"UpdateSourceTree\">\n      <antcall target=\"UpdateSource\"> <param name=\"modulename\" value=\"CVSBug\"/> </antcall>\n    </target>\n</project> \n\nIf this is not a misunderstanding of how to use the cvs-task, then this is a major bug.\n\nMany thanks for looking into this.\nChris", "attachment_id": null, "id": 147153, "creator": "ck1234@ilford.com", "time": "2011-06-15T16:58:40Z", "bug_id": 51381, "creation_time": "2011-06-15T16:58:40Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 51381, "attachment_id": null, "id": 147154, "time": "2011-06-15T17:58:11Z", "creator": "ck1234@ilford.com", "creation_time": "2011-06-15T17:58:11Z", "is_private": false, "text": "The problem has been tested and reproduced consitently with the following configuration:\n- CVS Server : CVSNT 2.5.03 (2005) running Windows Server 2003\n- CVS Client : Concurrent Versions System (CVS) 1.11.22 (client)\n- Ant version 1.8.2, 1.8.1, 1.6.2 : all show the same problem\n- CVS connection string: =:pserver:casec@chmsjavadev:/Ilfotec\n\nNote: Eclipse's standard CVS Plug-in is working as expected (does not exhiit the problem)."}, {"text": "If found that the problem comes from the fact that ant uses the -f option on the checkout comment of cvs which has precisely the effect I observe.\n\nIs it possible to control this -f flag? Why is it set?", "tags": [], "creator": "ck1234@ilford.com", "is_private": false, "count": 2, "id": 147156, "time": "2011-06-15T19:15:33Z", "bug_id": 51381, "creation_time": "2011-06-15T19:15:33Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 51381, "is_private": false, "id": 147158, "time": "2011-06-15T19:32:06Z", "creator": "ck1234@ilford.com", "creation_time": "2011-06-15T19:32:06Z", "tags": [], "text": "Sorry, this is not a bug. The solution is in the problem desction: the -f flag was present in the ant-script.\n\nWe can close this (which I had never opened it!) :-)"}, {"count": 4, "tags": [], "bug_id": 51381, "attachment_id": null, "id": 147161, "time": "2011-06-15T20:42:46Z", "creator": "ck1234@ilford.com", "creation_time": "2011-06-15T20:42:46Z", "is_private": false, "text": "It could even be completely deleted as it is not relevant at all."}]