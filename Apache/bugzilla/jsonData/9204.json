[{"count": 0, "tags": [], "text": "Catalina won't run on any IBM JREs from 1.3.1 and beyond. This is because the \nIBM JREs throw a ZIPException when you try to create a ZipFile pointing to an \ninvalid location, while earlier IBM JREs and Sun's JREs do not. This occurs \nduring the bootstrapping, when a /classes directory is added to the \nclassloader's path. Since the exception is not caught, the server fails to \nstart. See the stack trace below.\n\nThis exception does seem fairly reasonable, since it is not pointing to a zip \nfile. Can the StandardClassLoader catch the exception as it tries to add each \npath to the repository, or verify that it is a zip file before it tried to load \nit?\n\njava.util.zip.ZipException: Access is denied\n       at java.util.zip.ZipFile.open(Native Method)\n       at java.util.zip.ZipFile.<init>(ZipFile.java:127)\n       at java.util.jar.JarFile.<init>(JarFile.java:138)\n       at java.util.jar.JarFile.<init>(JarFile.java:80)\n       at org.apache.catalina.loader.StandardClassLoader.addRepositoryInternal\n(StandardClassLoader.java:1216)\n       at org.apache.catalina.loader.StandardClassLoader.<init>\n(StandardClassLoader.java:200)\n       at org.apache.catalina.startup.ClassLoaderFactory.createClassLoader\n(ClassLoaderFactory.java:261)\n       at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:138)\nBootstrap: Class loader creation threw exception\njava.lang.IllegalArgumentException: addRepositoryInternal: \njava.util.zip.ZipException: Access is denied\n       at org.apache.catalina.loader.StandardClassLoader.addRepositoryInternal\n(StandardClassLoader.java:1246)\n       at org.apache.catalina.loader.StandardClassLoader.<init>\n(StandardClassLoader.java:200)\n       at org.apache.catalina.startup.ClassLoaderFactory.createClassLoader\n(ClassLoaderFactory.java:261)\n       at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:138)", "attachment_id": null, "id": 16332, "creator": "deboer@ca.ibm.com", "time": "2002-05-17T16:17:13Z", "bug_id": 9204, "creation_time": "2002-05-17T16:17:13Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 9204, "attachment_id": 1923, "text": "Created attachment 1923\nAdd try/catch blocks around addRepositoryInternal() calls", "id": 16611, "time": "2002-05-23T21:15:15Z", "creator": "deboer@ca.ibm.com", "creation_time": "2002-05-23T21:15:15Z", "is_private": false}, {"count": 2, "tags": [], "text": "I'm bumping up the severity of this defect since Tomcat will not even start.\n\nThe easiest fix is to wrap the calls to addRepositoryInternal() within the \nStandardClassLoader constructor in a try/catch block. I've patched the 05/23 \nsource download with this fix and have attached it to this bug.", "attachment_id": null, "id": 16612, "creator": "deboer@ca.ibm.com", "time": "2002-05-23T21:16:31Z", "bug_id": 9204, "creation_time": "2002-05-23T21:16:31Z", "is_private": false}, {"count": 3, "tags": [], "creator": "bob@jadn.com", "attachment_id": null, "id": 17219, "time": "2002-06-05T20:45:01Z", "bug_id": 9204, "creation_time": "2002-06-05T20:45:01Z", "is_private": false, "text": "FYI, this doesnt appear to be the case on 4.1.3\n\nIn 4.1.3, \"/classes\" is never passed to addRepositoryInternal, only \"/classes/\"\nis passed and the trailing '/' keeps it from being interpreted as a jarfile.\n"}, {"count": 4, "tags": [], "creator": "remm@apache.org", "is_private": false, "id": 35775, "attachment_id": null, "bug_id": 9204, "creation_time": "2003-04-22T12:06:41Z", "time": "2003-04-22T12:06:41Z", "text": "Tomcat 4.1.x and 5.0.x worked fine for me on IBM 1.4.0 on Linux and Windows.\nApparently 4.1.x won't have the issue on IBM 1.3.1 either."}]