[{"attachment_id": null, "tags": [], "creator": "suvarov454@users.sourceforge.net", "is_private": false, "count": 0, "id": 37088, "time": "2003-05-12T20:01:49Z", "bug_id": 19865, "creation_time": "2003-05-12T20:01:49Z", "text": "I want to use SVG to scale a bunch of PNG files in batch mode, but I thought \nthat I'd experiment to prove that I can do the actions that I wanted.  As such \nI took \"samples/tests/spec/structure/image.svg\" (which runs fine) and pared it \ndown.  Every time I run the Rasterizer for one of my PNG files, however, it \nblows up.  \n\nI added a simple printStackTrace to the ImageTranscoder#transcode(Document, \nString, TranscoderOutput) method, ran it in debug mode, and I got the output \nbelow.  The \"mithras.png\" file can be downloaded at the following \nwebsite: \"http://cvs.sourceforge.net/cgi-\nbin/viewcvs.cgi/megamek/megamek/data/mex/mithras.png\".  The file is part of the \nMegaMek project, which is distributed under the GNU GPL, so use it as you will. \nThe text of the \"image.svg\" file (less comments) is as follows:\n\n<?xml version=\"1.0\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\"\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" \nxmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"84\" height=\"72\" viewBox=\"0 0 \n84 72\">\n<title>Image element references a PNG file</title>\n\n        <image xlink:href=\"./mithras.png\" width=\"84\" height=\"72\" />\n\n</svg>\n\nDebug output:\n\nsvgrasterizer:\nAbout to transcode 1 SVG file(s)\n\njava.lang.ArrayIndexOutOfBoundsException\n        at sun.awt.image.ByteInterleavedRaster.setSample(ByteInterleavedRaster.j\nava:763)\n        at sun.awt.color.ICC_Transform.fixDestAlpha(ICC_Transform.java:368)\n        at sun.awt.color.ICC_Transform.colorConvert(ICC_Transform.java:323)\n        at java.awt.image.ColorConvertOp.ICCBIFilter(ColorConvertOp.java:367)\n        at java.awt.image.ColorConvertOp.filter(ColorConvertOp.java:251)\n        at org.apache.batik.ext.awt.image.rendered.Any2sRGBRed.copyData(Any2sRGB\nRed.java:237)\n        at org.apache.batik.ext.awt.image.rendered.AbstractRed.getData(AbstractR\ned.java:519)\n        at org.apache.batik.ext.awt.image.rendered.AffineRed.genRect(AffineRed.j\nava:143)\n        at org.apache.batik.ext.awt.image.rendered.AffineRed.copyData(AffineRed.\njava:106)\n        at org.apache.batik.ext.awt.image.rendered.FormatRed.copyData(FormatRed.\njava:112)\n        at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.ja\nva:310)\n        at org.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.ja\nva:497)\n        at org.apache.batik.gvt.RasterImageNode.primitivePaint(RasterImageNode.j\nava:94)\n        at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.\njava:495)\n        at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGr\naphicsNode.java:130)\n        at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.\njava:495)\n        at org.apache.batik.gvt.ImageNode.paint(ImageNode.java:37)\n        at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGr\naphicsNode.java:130)\n        at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.\njava:495)\n        at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGr\naphicsNode.java:130)\n        at org.apache.batik.gvt.CanvasGraphicsNode.primitivePaint(CanvasGraphics\nNode.java:151)\n        at org.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.\njava:495)\n        at org.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGr\naphicsNode.java:130)\n        at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.genRect(GraphicsNodeR\ned8Bit.java:132)\n        at org.apache.batik.gvt.filter.GraphicsNodeRed8Bit.copyData(GraphicsNode\nRed8Bit.java:108)\n        at org.apache.batik.ext.awt.image.rendered.TileCacheRed.genRect(TileCach\neRed.java:53)\n        at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlockInP\nlace(AbstractTiledRed.java:594)\n        at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.drawBlock(Ab\nstractTiledRed.java:527)\n        at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyToRaster\nByBlocks(AbstractTiledRed.java:420)\n        at org.apache.batik.ext.awt.image.rendered.AbstractTiledRed.copyData(Abs\ntractTiledRed.java:287)\n        at org.apache.batik.ext.awt.image.rendered.TranslateRed.copyData(Transla\nteRed.java:97)\n        at org.apache.batik.ext.awt.image.rendered.PadRed.copyData(PadRed.java:8\n7)\n        at org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.j\nava:390)\n        at org.apache.batik.gvt.renderer.StaticRenderer.repaint(StaticRenderer.j\nava:340)\n        at org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTran\nscoder.java:105)\n        at org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstra\nctTranscoder.java:132)\n        at org.apache.batik.apps.rasterizer.SVGConverter.transcode(SVGConverter.\njava:961)\n        at org.apache.batik.apps.rasterizer.SVGConverter.execute(SVGConverter.ja\nva:687)\n        at org.apache.batik.apps.rasterizer.Main.execute(Main.java:881)\n        at org.apache.batik.apps.rasterizer.Main.main(Main.java:934)\norg.apache.batik.transcoder.TranscoderException: null\nEnclosed Exception:\nnull\n        at org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTran\nscoder.java:129)\nConverting image.svg to image.png ... ... error (SVGConverter.error.while.raster\nizing.file)\n        at org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstra\nctTranscoder.java:132)\n        at org.apache.batik.apps.rasterizer.SVGConverter.transcode(SVGConverter.\njava:961)\n        at org.apache.batik.apps.rasterizer.SVGConverter.execute(SVGConverter.ja\nva:687)\n        at org.apache.batik.apps.rasterizer.Main.execute(Main.java:881)\n        at org.apache.batik.apps.rasterizer.Main.main(Main.java:934)"}, {"count": 1, "tags": [], "creator": "suvarov454@users.sourceforge.net", "attachment_id": 6330, "text": "Created attachment 6330\nI didn't realize that I could attach the source image file.", "id": 37089, "time": "2003-05-12T20:03:14Z", "bug_id": 19865, "creation_time": "2003-05-12T20:03:14Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 19865, "text": "This appears to be a bug in JDK 1.3.x.\nIt also appears to be fixed in 1.4.1", "id": 39695, "time": "2003-06-30T20:50:27Z", "creator": "deweese@apache.org", "creation_time": "2003-06-30T20:50:27Z", "is_private": false, "attachment_id": null}]