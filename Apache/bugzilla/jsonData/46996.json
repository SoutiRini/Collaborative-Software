[{"count": 0, "tags": [], "bug_id": 46996, "attachment_id": 23462, "id": 126098, "time": "2009-04-08T09:54:34Z", "creator": "poirier@pobox.com", "creation_time": "2009-04-08T09:54:34Z", "is_private": false, "text": "Created attachment 23462\nPatch to delay the message and issue a different one earlier\n\nThe \"MaxClients reached\" message occurs as soon as the number of idle threads drops below MinSpareThreads.  If MinSpareThreads is set large for some reason, there could still be a lot of idle threads so the message is misleading.\n\nThe attached patch saves the \"MaxClients reached\" message until there are no idle threads, which seems more accurate.  It issues a new message when the number of idle threads drops below MinSpareThreads.  Neither message will be issued more than once per child."}, {"count": 1, "tags": [], "creator": "sean.thorne@gmail.com", "attachment_id": null, "is_private": false, "id": 133732, "time": "2010-01-20T09:57:44Z", "bug_id": 46996, "creation_time": "2010-01-20T09:57:44Z", "text": "This issue also exists in 2.2.14.  It's incredibly misleading to have it print MaxClients has been reached when it's really just below the MinSpareThreads.  Especially if you run a config with a high MinSpareThreads number.  I would recommend that it say something like \"the number of idle threads has dropped below the min spare thread number\".  That would make it easier for people not 100% familar (like myself :) ) with the code capable of tracking down issues."}, {"count": 2, "tags": [], "creator": "sf@sfritsch.de", "is_private": false, "text": "(In reply to comment #0)\n> The attached patch saves the \"MaxClients reached\" message until there are no\n> idle threads, which seems more accurate.  It issues a new message when the\n> number of idle threads drops below MinSpareThreads.  Neither message will be\n> issued more than once per child.\n\nDan, is there a reason why you haven't commited that patch, yet?", "id": 134204, "time": "2010-02-03T14:01:44Z", "bug_id": 46996, "creation_time": "2010-02-03T14:01:44Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 46996, "attachment_id": null, "id": 134226, "time": "2010-02-04T08:02:57Z", "creator": "poirier@pobox.com", "creation_time": "2010-02-04T08:02:57Z", "is_private": false, "text": "Just forgot about it since getting committer.\n\nCommitted to trunk, r906535\n\nAs I recall, fixing it in 2.2.x looked a little more complicated.\nI'll take a look at that next."}, {"count": 4, "tags": [], "text": "Backported to 2.2.x as r910320", "attachment_id": null, "id": 134693, "creation_time": "2010-02-19T12:55:18Z", "time": "2010-02-19T12:55:18Z", "creator": "poirier@pobox.com", "bug_id": 46996, "is_private": false}]