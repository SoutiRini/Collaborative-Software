[{"count": 0, "tags": [], "bug_id": 40497, "attachment_id": null, "id": 93511, "time": "2006-09-13T13:49:33Z", "creator": "hanno.borns@hp.com", "creation_time": "2006-09-13T13:49:33Z", "is_private": false, "text": "Hi,\n\nServer version: Apache/2.2.3\nServer built:   Aug 31 2006 17:33:21\n\nVery interesting effect: When a particular string appears inside an html file,\nApache returns nothing and closes the connection.\n\nWithout this particular string the page gets delivered.\nOnly the string inside an html file gets delivered as well.\n\nData ...\n\nindex_only_tag.html:\n---\n<script language=\"javascript\" type=\"text/javascript\"\nsrc=\"http://portal.hp.com/lib/navigation/header.js\"></script>\n---\n\n-> Result: Tag appears in output\n\nindex_works.html:\n---\n<html>\n  <head>\n    <title>Batchnet Gateway</title>\n    <link rel=\"stylesheet\" type=\"text/css\"\nhref=\"http://portal.hp.com/lib/navigation/css/homepages-v5.css\"/>\n  </head>\n  <body>\n    \n  </body>\n</html>\n---\n\n-> Result: Content is sent\n\nindex_fails.html:\n---\n<html>\n  <head>\n    <title>Batchnet Gateway</title>\n    <link rel=\"stylesheet\" type=\"text/css\"\nhref=\"http://portal.hp.com/lib/navigation/css/homepages-v5.css\"/>\n  </head>\n  <body>\n    <script language=\"javascript\" type=\"text/javascript\"\nsrc=\"http://portal.hp.com/lib/navigation/header.js\"></script>\n  </body>\n</html>\n---\n\n-> Result: Nothing sent, connection closed.\n\nI am more than clueless what else to check, so considering this a potential bug.\n\nThe Apache installation on that this appears cannot be exposed to the internet.\nIf you want to see it, please drop me an email and I can share a screen to see it."}, {"count": 1, "tags": [], "bug_id": 40497, "attachment_id": null, "id": 93515, "time": "2006-09-13T14:30:00Z", "creator": "rpluem@apache.org", "creation_time": "2006-09-13T14:30:00Z", "is_private": false, "text": "Have you tried this only with a browser or also with a plain telnet connection?\nThe only thing I could think of that this could have something to do with Apache\nitself is a problem with sendfile or mmap on HP-UX. Please add the following\ndirectives to your httpd.conf and have a look if the problem is still there once\nyou restarted the apache:\n\nEnableMMAP Off\nEnableSendfile Off"}, {"count": 2, "tags": [], "bug_id": 40497, "attachment_id": null, "id": 93516, "time": "2006-09-13T14:44:50Z", "creator": "hanno.borns@hp.com", "creation_time": "2006-09-13T14:44:50Z", "is_private": false, "text": "I had tried to get the page using wget which resulted in the same problem.\n\nWhen trying with telnet, the behavior was the same odd thing.\n\nHowever, your proposal with the directives EnableMMAP Off\nand EnableSendfile Off in the httpd.conf helped; - the problem is resolved.\n\nThe drives serving these files are directly attached to the system, not \nmounted over the network or so.\n\nIn case the configure command would need to be adjusted, the OS this problem \nappeared on is \"HP-UX isoit666 B.11.11 U 9000/800 601319351 unlimited-user \nlicense\".\n\nIn case you need any other information like patch level or compiler versions \nplease let me know and I will try to supply.\n\nThanks for the very fast response!"}, {"count": 3, "tags": [], "bug_id": 40497, "text": "- is this a 32-bit build?\n- did you have this problem with 2.0.x? \n\nThe large file support in 2.2 means that different code paths are being exercised.", "id": 93519, "time": "2006-09-13T14:56:33Z", "creator": "jorton@redhat.com", "creation_time": "2006-09-13T14:56:33Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "I am not sure if it is a 32 bit build but reading the debugger line (ILP32) \nI'd guess it is 32 bit.\n\n[isoit666]apache/bin $ what httpd\nhttpd:\n        $Revision: 92453-07 linker linker crt0.o B.11.30 010914 $\n        HP92453-02A.11.00 HP-UX SYMBOLIC DEBUGGER (END.O ILP32) $Revision: \n75.04 $\n\nIf you have any other command that I should execute to determine this, please \nlet me know.\n\nI never compiled 2.0 on this machine, 2.2.3 was the very first build here. If \nI should compile 2.0 please let me know, I can give it a try if that would \nhelp to tackle a problem.", "attachment_id": null, "id": 93522, "creation_time": "2006-09-13T15:06:26Z", "time": "2006-09-13T15:06:26Z", "creator": "hanno.borns@hp.com", "bug_id": 40497, "is_private": false}, {"count": 5, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "I assume that you added both directives at once as I suggested. Could you please\nretry with only one of them used (so only EnableMMAP Off or EnableSendfile Off\nadded to the httpd.conf). This would help to discover if the problem is with\nsendfile or MMAP or both.", "id": 93538, "time": "2006-09-13T19:21:55Z", "bug_id": 40497, "creation_time": "2006-09-13T19:21:55Z", "is_private": false}, {"count": 6, "tags": [], "creator": "hanno.borns@hp.com", "attachment_id": null, "text": "Yes, I added both at a time.\n\nWith the following setting it works:\n\n---\n#EnableMMAP off\nEnableSendfile off\n---\n\nThe same thing toggled like this doesn't work:\n\n---\nEnableMMAP off\n#EnableSendfile off\n---\n\nSo it appears not MMAP is the problem but Sendfile.", "id": 93566, "time": "2006-09-14T08:50:51Z", "bug_id": 40497, "creation_time": "2006-09-14T08:50:51Z", "is_private": false}, {"count": 7, "tags": [], "text": "OP has answered all the relevant questions.  Updating summary in case it crosses\nanyone's radar.", "attachment_id": null, "id": 109101, "creation_time": "2007-10-07T18:04:46Z", "time": "2007-10-07T18:04:46Z", "creator": "nick@webthing.com", "bug_id": 40497, "is_private": false}, {"count": 8, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "id": 109116, "time": "2007-10-08T03:36:35Z", "bug_id": 40497, "creation_time": "2007-10-08T03:36:35Z", "is_private": false, "text": "fixed in current 2.2.x tarballs (since fixed in current apr 1.2.x)\n\n\n*** This bug has been marked as a duplicate of 42261 ***"}]