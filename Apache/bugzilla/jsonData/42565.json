[{"count": 0, "tags": [], "creator": "thomas.wiesel@zuv.uni-bamberg.de", "attachment_id": null, "id": 103967, "time": "2007-06-01T08:43:44Z", "bug_id": 42565, "creation_time": "2007-06-01T08:43:44Z", "is_private": false, "text": "the following jspx works fine in tomcat 5.5.23 but fails in 6.0.13\n\n<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<html\n\txmlns=\"http://www.w3.org/1999/xhtml\"\n\txmlns:jsp=\"http://java.sun.com/JSP/Page\">\n\t\n<jsp:output omit-xml-declaration=\"true\"\n\tdoctype-root-element=\"html\"\n\tdoctype-public=\"-//W3C//DTD XHTML 1.0 Strict//EN\" \n\tdoctype-system=\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\" />\t\n\n\t<head>\n\t\t<title>error!!!</title>\n\t</head>\n\t<body>\n\t\t\t<p>${true? (false?true:false):false}</p>\n\t</body>\n</html>\n\norg.apache.jasper.JasperException: An exception occurred processing JSP page\n/test.jspx at line 15\n\n12: \t\t<title>error!!!</title>\n13: \t</head>\n14: \t<body>\n15: \t\t\t<p>${true? (false?true:false):false}</p>\n16: \t</body>\n17: </html>\n\n\nStacktrace:\n\torg.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:524)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:435)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\nroot cause\n\njavax.el.ELException: Error Parsing: ${true? (false?true:false):false}\n\torg.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:125)\n\torg.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:146)\n\torg.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:190)\n\torg.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:68)\n\torg.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:922)\n\torg.apache.jsp.test_jspx._jspService(test_jspx.java:62)\n\torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\nroot cause\n\norg.apache.el.parser.ParseException: Encountered \"true: false\" at line 1, column 16.\nWas expecting one of:\n    \"(\" ...\n    <IDENTIFIER> ...\n    <NAMESPACE> <IDENTIFIER> ...\n    \n\torg.apache.el.parser.ELParser.generateParseException(ELParser.java:1874)\n\torg.apache.el.parser.ELParser.jj_consume_token(ELParser.java:1754)\n\torg.apache.el.parser.ELParser.NonLiteral(ELParser.java:1136)\n\torg.apache.el.parser.ELParser.ValuePrefix(ELParser.java:1030)\n\torg.apache.el.parser.ELParser.Value(ELParser.java:978)\n\torg.apache.el.parser.ELParser.Unary(ELParser.java:960)\n\torg.apache.el.parser.ELParser.Multiplication(ELParser.java:723)\n\torg.apache.el.parser.ELParser.Math(ELParser.java:643)\n\torg.apache.el.parser.ELParser.Compare(ELParser.java:455)\n\torg.apache.el.parser.ELParser.Equality(ELParser.java:349)\n\torg.apache.el.parser.ELParser.And(ELParser.java:293)\n\torg.apache.el.parser.ELParser.Or(ELParser.java:237)\n\torg.apache.el.parser.ELParser.Choice(ELParser.java:203)\n\torg.apache.el.parser.ELParser.Expression(ELParser.java:183)\n\torg.apache.el.parser.ELParser.NonLiteral(ELParser.java:1122)\n\torg.apache.el.parser.ELParser.ValuePrefix(ELParser.java:1030)\n\torg.apache.el.parser.ELParser.Value(ELParser.java:978)\n\torg.apache.el.parser.ELParser.Unary(ELParser.java:960)\n\torg.apache.el.parser.ELParser.Multiplication(ELParser.java:723)\n\torg.apache.el.parser.ELParser.Math(ELParser.java:643)\n\torg.apache.el.parser.ELParser.Compare(ELParser.java:455)\n\torg.apache.el.parser.ELParser.Equality(ELParser.java:349)\n\torg.apache.el.parser.ELParser.And(ELParser.java:293)\n\torg.apache.el.parser.ELParser.Or(ELParser.java:237)\n\torg.apache.el.parser.ELParser.Choice(ELParser.java:203)\n\torg.apache.el.parser.ELParser.Expression(ELParser.java:183)\n\torg.apache.el.parser.ELParser.DynamicExpression(ELParser.java:155)\n\torg.apache.el.parser.ELParser.CompositeExpression(ELParser.java:52)\n\torg.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:93)\n\torg.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:146)\n\torg.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:190)\n\torg.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:68)\n\torg.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:922)\n\torg.apache.jsp.test_jspx._jspService(test_jspx.java:62)\n\torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:393)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:803)"}, {"count": 1, "tags": [], "creator": "niallp@apache.org", "attachment_id": null, "id": 104434, "time": "2007-06-15T06:45:41Z", "bug_id": 42565, "creation_time": "2007-06-15T06:45:41Z", "is_private": false, "text": "The problem seems to be with the \"false?true:false\" part of the expression (the\nsame excepion is thrown specifying just \"${false?true:false}\".\n\nAs a workaround, adding a space before the colon seems to resolve it - both the\nfollowing work OK:\n\n${false?true :false}\n${true? (false?true :false):false}\n\nNow to understand JavaCC/JJTree to work out why..."}, {"count": 2, "tags": [], "text": "I confirm the same problem! I am trying to keep up to date and want to move to\nTomcat 6, too.\n\nAlso, it is not a Windows specific problem... Same goes for Tomcat 6 in Linux1\n\nIt is a very annoying problem for people who have the - good - habit of using EL\nexpressions. Anybody knows if it is truly considered a bug and if it is going to\nbe fixed?", "attachment_id": null, "bug_id": 42565, "id": 104624, "time": "2007-06-22T02:46:29Z", "creator": "takis@mail.daedalus.gr", "creation_time": "2007-06-22T02:46:29Z", "is_private": false}, {"count": 3, "tags": [], "creator": "mkmelin+apache@iki.fi", "attachment_id": null, "id": 104997, "time": "2007-07-02T06:10:29Z", "bug_id": 42565, "creation_time": "2007-07-02T06:10:29Z", "is_private": false, "text": "I can confirm this too. If the ternary expression doesn't have space before the\ncolon it doesn't work, as pointed out in comment 1."}, {"count": 4, "tags": [], "creator": "mkmelin+apache@iki.fi", "text": "This is really blocking me from upgrading to tomcat6.", "id": 108880, "time": "2007-10-02T01:54:47Z", "bug_id": 42565, "creation_time": "2007-10-02T01:54:47Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "lgalfaso@gmail.com", "text": "Created attachment 20913\nPatch for this bug\n\nThis patch fixes this bug (possible incorrect presumption that the presence of\na \":\" involves a function call when a value was specified) and another minor\nbug (valid namespaces names are not detected as such.) I was not able to find\nthis bug, but checking the grammar and checking the specification makes this\nvery simple to detect. The fix for this second bug does not follow the standard\nguidelines but it is closer to doing so than the previous grammar.", "id": 108959, "time": "2007-10-03T17:13:21Z", "bug_id": 42565, "creation_time": "2007-10-03T17:13:21Z", "is_private": false, "attachment_id": 20913}, {"count": 6, "tags": [], "creator": "lgalfaso@gmail.com", "attachment_id": 20975, "id": 109334, "time": "2007-10-14T11:53:39Z", "bug_id": 42565, "creation_time": "2007-10-14T11:53:39Z", "is_private": false, "text": "Created attachment 20975\nCleaner patch\n\nCleaner patch"}, {"count": 7, "tags": [], "creator": "lgalfaso@gmail.com", "text": "The only real modification is on the .jjt file, everything else was auto\ngenerated by jjtree.", "id": 109335, "time": "2007-10-14T11:54:48Z", "bug_id": 42565, "creation_time": "2007-10-14T11:54:48Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "text": "*** Bug 43714 has been marked as a duplicate of this bug. ***", "attachment_id": null, "bug_id": 42565, "id": 109842, "time": "2007-10-28T08:39:21Z", "creator": "lgalfaso@gmail.com", "creation_time": "2007-10-28T08:39:21Z", "is_private": false}, {"count": 9, "tags": [], "creator": "kuehn@mediaworx.com", "attachment_id": null, "id": 110478, "time": "2007-11-13T07:43:30Z", "bug_id": 42565, "creation_time": "2007-11-13T07:43:30Z", "is_private": false, "text": "I can reproduce the bug only if the operand left of the colon is *NOT* a string\nliteral or a numeric literal."}, {"attachment_id": null, "tags": [], "bug_id": 42565, "is_private": false, "count": 10, "id": 110509, "time": "2007-11-13T17:58:47Z", "creator": "lgalfaso@gmail.com", "creation_time": "2007-11-13T17:58:47Z", "text": "(In reply to comment #9)\n\n> I can reproduce the bug only if the operand left of the colon is *NOT* a string\n> literal or a numeric literal.\n\nCan you reproduce the bug with the test case you are using is you apply the patch?\n"}, {"count": 11, "tags": [], "creator": "mkmelin+apache@iki.fi", "text": "So can the patch be checked in? Would like to move to tc6...", "id": 116695, "time": "2008-05-16T00:58:52Z", "bug_id": 42565, "creation_time": "2008-05-16T00:58:52Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 42565, "text": "(In reply to comment #11)\n> So can the patch be checked in? Would like to move to tc6...\n> \n\nthe patch works fine for us, please check in, thanks a lot!", "id": 118006, "attachment_id": null, "creator": "thomas.wiesel@zuv.uni-bamberg.de", "creation_time": "2008-06-26T07:22:17Z", "time": "2008-06-26T07:22:17Z", "is_private": false}, {"count": 13, "tags": [], "creator": "markt@apache.org", "text": "Many thanks for the patch.\n\nIt has been applied to trunk and proposed for 6.0.x", "id": 118493, "time": "2008-07-10T14:00:15Z", "bug_id": 42565, "creation_time": "2008-07-10T14:00:15Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "creator": "markt@apache.org", "text": "This was applied to 6.0.x and included in 6.0.18 onwards.\n\nHowever, this patch caused a regression: bug 45511", "id": 119183, "time": "2008-07-31T07:13:16Z", "bug_id": 42565, "creation_time": "2008-07-31T07:13:16Z", "is_private": false, "attachment_id": null}]