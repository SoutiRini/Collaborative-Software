[{"attachment_id": null, "tags": [], "bug_id": 41232, "text": "When running buildconf on a new freshly extracted apache 2.2.3 archive, the\nconfigure script ignores --prefix and other directory location options such as\n--libdir --sysconfdir and so on.\n\nTo reproduce :\n- extract the archive\n- run ./configure --prefix=/not/default/path\n- looking at build/config_vars.mk shows a correct prefix set (verified when\nrunning make and make install after)\n\n- clean up the directory, and re-extract the archive\n- run ./buildconf\n- run ./configure --prefix=/not/default/path\n- build/config_vars.mk shows the default prefix from the Aapche layout\n(/usr/local/apache2)\n\nRemarks:\n- using --enable-layout=AnotherLayout works (tried GNU as layout), changing the\nprefix and others variables from the Apache layout defaults to the AnotherLayout\ndefaults (ex with GNU layout : /usr/local/apache2 becomes /usr/local), but still\nignores any path customisations with --prefix style options.\n\n- This only happens once ./buildconf is run, not with the stock configure script\n\nMy build tools :\n- Autoconf 2.61\n- Libtool 1.5.22\n\n- You may ask why I need to rebuild the configure script, because I want to add\na module statically compiled inside httpd (module is provided with the in and m4\nfiles)\n- The bug happens without adding anything in the source tree (just run buildconf\nafter extracting the archive)", "count": 0, "id": 97183, "time": "2006-12-22T02:07:03Z", "creator": "gabriel@oxeva.fr", "creation_time": "2006-12-22T02:07:03Z", "is_private": false}, {"count": 1, "text": "*** Bug 41233 has been marked as a duplicate of this bug. ***", "bug_id": 41232, "is_private": false, "id": 97189, "time": "2006-12-22T05:58:32Z", "creator": "trawick@apache.org", "creation_time": "2006-12-22T05:58:32Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 41232, "attachment_id": null, "text": "Sorry for the duplicate, maybe it has occured when I sent the form. But the\nbug's still real :)", "id": 97330, "time": "2006-12-26T07:12:07Z", "creator": "gabriel@oxeva.fr", "creation_time": "2006-12-26T07:12:07Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 41232, "text": "This could be due to the ac_configure_args abuse; can you try applying this patch:\n\nhttp://svn.apache.org/viewvc/apr/apr/trunk/build/apr_common.m4?r1=423435&r2=423434&pathrev=423435&view=patch\n\nto srclib/apr/build/apr_common.m4 before running buildconf?", "count": 3, "id": 97397, "time": "2006-12-28T01:49:25Z", "creator": "jorton@redhat.com", "creation_time": "2006-12-28T01:49:25Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 41232, "is_private": false, "count": 4, "id": 97401, "time": "2006-12-28T03:14:14Z", "creator": "gabriel@oxeva.fr", "creation_time": "2006-12-28T03:14:14Z", "text": "OK, it works ! I tried different cases, with and without added external modules,\nbuilding configure with the patch added correct the path problems in all cases.\n\nAs this patch comes from SVN, is it already applied for the next stable release ?"}]