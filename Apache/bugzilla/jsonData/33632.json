[{"count": 0, "tags": [], "text": "When I want to forbidden some robort to access my website, \nI wrote somecode to extends the org.apache.catalina.valves.RequestFilterValve  \nclass.  I think this is an enhancement for Tomcat if this code is added to \nTomcat's Source next version:\n\npackage org.apache.catalina.valves; \n\n\nimport java.io.*; \nimport javax.servlet.*; \n\n\nimport org.apache.catalina.connector.*; \n\n\n/** \n * <p>Title: Request Header Filter For Tomcat</p> \n * <p>Description: \n * eg: set follow coment in ${catalina.home}/conf/server.xml: \n * <Valve className=\"org.apache.catalina.valves.RequestHeaderValve\" \n *   header=\"User-Agent\"          deny=\"*httunit*\"/> \n * then you can forbidden someone use httpunit to Access the Engine \n,Host or Context \n * or: \n * <Valve className=\"org.apache.catalina.valves.RequestHeaderValve\" \nheader=\"Referer\" \n         deny=\"*.mydomain.com, *localhost*\"/> \n * then you can forbidden someone open the link from *.mydomain.com or \nlocalhost \n * </p> \n * <p>Copyright: Apache License Version 2.0  </p> \n * <p>Company: lizongbo</p> \n * @author lizongbo @ gmail.com \n * @version 1.0 \n */ \npublic final class RequestHeaderValve \n    extends RequestFilterValve { \n  private String header = \"\"; \n  public void invoke(Request request, Response response) throws \nIOException, \n      ServletException { \n    String headervalue = request.getRequest().getHeader(getHeader()); \n    headervalue = headervalue != null ? headervalue : \"\"; \n    process(headervalue, request, response); \n  } \n\n\n  public String getHeader() { \n    return header; \n  } \n\n\n  public void setHeader(String header) { \n    this.header = header; \n  }", "is_private": false, "id": 71172, "creator": "lizongbo@gmail.com", "time": "2005-02-18T13:54:37Z", "bug_id": 33632, "creation_time": "2005-02-18T13:54:37Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "lizongbo@gmail.com", "text": "Created attachment 14313\nRequestHeaderValve\n\nthis is the src file.", "id": 71173, "time": "2005-02-18T13:57:07Z", "bug_id": 33632, "creation_time": "2005-02-18T13:57:07Z", "is_private": false, "attachment_id": 14313}, {"count": 2, "tags": [], "creator": "yoavs@computer.org", "text": "Thank you for the contribution.\n\nThere's not much point for doing this in a Valve, it can be done in a Filter, \nand then it would be portable.  And the Balancer webapp includes a rule that \ndoes this in a Filter already.\n\nSo thanks again, but no need.", "id": 71183, "time": "2005-02-18T14:53:40Z", "bug_id": 33632, "creation_time": "2005-02-18T14:53:40Z", "is_private": false, "attachment_id": null}]