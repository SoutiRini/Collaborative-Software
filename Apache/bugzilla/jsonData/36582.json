[{"count": 0, "tags": [], "text": "The latest IBM Eclipse JDT compiler that handles Java 5 and is included with\nTomcat 5.5.11 behaves differently than Sun's compiler. It doesn't seem to\nimplement autoboxing correctly with the conditional operator.  \n\nmethod call in example code:  int getMinAge() //returns an int.\n\nThis line in a jsp\n<%= type.getMinAge() < 0 ? \"\" : type.getMinAge() %>\n\nbecomes this line in the servlet version\nout.print( type.getMinAge() < 0 ? \"\" : type.getMinAge() );\n\n\nSun's Java 5 compiler will compile the code above, IBM's won't.\n\nCompile error:\nAn error occurred at line: 184 in the jsp file: /jsp/createConstraint.jsp\nGenerated servlet error:\nIncompatible conditional operand types String and int\n\n\n\nThe following test class compiles and runs with Sun's 1.5. \nautoboxing converts the int to Integer \n==========\n\nimport java.io.*;\n\npublic class TernaryTest{\n\n   static int getInt(){return 0;}\n\n   public static void main(String[] args) throws Exception{\n      PrintStream ps = new PrintStream(\"test.out\");\n      ps.println(\"\");\n      ps.println(getInt() < 0 ? \"x\" : getInt());\n      ps.close();\n\n      Object obj = (getInt() < 0 ? \"x\" : getInt());\n      System.out.println(\"obj = \" + obj);\n   }\n}\n\n==========", "is_private": false, "id": 79743, "creator": "dloren@bigfoot.com", "time": "2005-09-09T22:23:28Z", "bug_id": 36582, "creation_time": "2005-09-09T22:23:28Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 36582, "text": "Don't use autoboxing then.", "id": 79745, "time": "2005-09-09T22:41:46Z", "creator": "remm@apache.org", "creation_time": "2005-09-09T22:41:46Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 36582, "text": "INVALID?  What do you mean invalid?  Are you saying this is not a compiler bug?\nIt is not a bug in the Jasper code, but you ship that compiler with Tomcat and\nit does not compile Java 5 corectly. ", "id": 79748, "time": "2005-09-09T23:02:10Z", "creator": "dloren@bigfoot.com", "creation_time": "2005-09-09T23:02:10Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 36582, "attachment_id": null, "text": "New releases of JDT will be integrated as they are released. We only accept bug\nreports on Tomcat in Tomcat's bugzilla.", "id": 79750, "time": "2005-09-09T23:28:58Z", "creator": "remm@apache.org", "creation_time": "2005-09-09T23:28:58Z", "is_private": false}]