[{"count": 0, "tags": [], "bug_id": 13504, "attachment_id": null, "id": 24300, "time": "2002-10-10T17:45:53Z", "creator": "ruettimac@mac.com", "creation_time": "2002-10-10T17:45:53Z", "is_private": false, "text": "I tried the examples in Professional Apache Tomcat from wrox to install/deploy\napplications with ant. The following script fails if I try to install the\napplication:\n\n<target name=\"install\" description=\"Install web application\">\n    <install url=\"${url}\" username=\"${username}\" password=\"${password}\" \n             path=\"${path}\" war=\"file:${build}/hello.war\"/>\n</target>\n\n\n<target name=\"deploy\" description=\"Deploy web application\" depends=\"build\">\n    <deploy url=\"${url}\" username=\"${username}\" password=\"${password}\" \n            path=\"${path}\" war=\"file:${build}/hello.war\"/>\n</target>\n\n\n[arenal:Tomcat/wrox/hello] cyrill% ant install\nBuildfile: build.xml\n\ninstall:\n  [install] FAIL - Encountered exception java.io.IOException:\njava.lang.IllegalArgumentException: Doc base must point to a WAR file\n\nBUILD FAILED\nfile:/Users/cyrill/Documents/Tomcat/wrox/hello/build.xml:48: FAIL - Encountered\nexception java.io.IOException: java.lang.IllegalArgumentException: Doc base must\npoint to a WAR file\n\nTotal time: 2 seconds\n\n\nIn the logs, I found the following output:\n\n2002-10-10 14:30:16 Manager: install: Installing web application at '/hello'\nfrom 'file:/Users/cyrill/Documents/Tomcat/wrox/hello/build/hello'\n2002-10-10 14:30:16 StandardHost[localhost]: Installing web application at\ncontext path /hello from URL\nfile:/Users/cyrill/Documents/Tomcat/wrox/hello/build/hello\n2002-10-10 14:30:16 StandardHost[localhost]: Error deploying application at\ncontext path /hello\njava.lang.IllegalArgumentException: Document base\n/Users/cyrill/Documents/Tomcat/wrox/hello/build/hello does not exist or is not a\nreadable directory\n        at\norg.apache.naming.resources.FileDirContext.setDocBase(FileDirContext.java:193)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3397)\n        at\norg.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:821)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:807)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:579)\n        at\norg.apache.catalina.core.StandardHostDeployer.install(StandardHostDeployer.java:257)\n        at org.apache.catalina.core.StandardHost.install(StandardHost.java:772)\n        at\norg.apache.catalina.servlets.ManagerServlet.install(ManagerServlet.java:650)\n        at\norg.apache.catalina.servlets.ManagerServlet.doGet(ManagerServlet.java:342)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n        at\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n        at\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:260)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n        at\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n        at\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:527)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n        at\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at\norg.apache.catalina.core.StandardContext.invoke(StandardContext.java:2396)\n        at\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n        at\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:170)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n        at\norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n        at\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n        at\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n        at\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n        at\norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:405)\n        at\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:380)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:508)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:533)\n        at java.lang.Thread.run(Thread.java:491)\n\n\nThe directory exists, it is readable to tomcat and the DeployTask succeeds and\ndoes slightly the same regarding calling the manager.\n\n\nRegards,\n\nCyrill"}, {"count": 1, "tags": [], "bug_id": 13504, "attachment_id": null, "id": 24301, "time": "2002-10-10T17:51:27Z", "creator": "remm@apache.org", "creation_time": "2002-10-10T17:51:27Z", "is_private": false, "text": "You should read the docs (manager app howto). Install, unlike deploy, uses\njar:...!/ URLs."}]