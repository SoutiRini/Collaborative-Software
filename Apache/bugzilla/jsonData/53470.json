[{"count": 0, "tags": [], "bug_id": 53470, "attachment_id": null, "id": 160264, "creation_time": "2012-06-26T14:19:11Z", "time": "2012-06-26T14:19:11Z", "creator": "submax@tiscalinet.it", "text": "I have a request for control delete of temp files that SXSSF create automatically.\n\nes.:\n\npoi-sxssf-sheet-xml127328075585779261.gz\n\nwhen compress is active or\n\npoi-sxssf-sheet127328075585779261\n\nThere are two alternatives:\n\n1) add delete method to SXSSFWorkbook\n2) add new Constructor to SXSSFWorkbook with this signature: SXSSFWorkbook(File tmpDir, int rowAccessWindowSize)  \n\nFor you what is the best solution?\n\nI can write a patch for this...", "is_private": false}, {"count": 1, "tags": [], "creator": "submax@tiscalinet.it", "text": "Created attachment 29004\nsmall patch to add delete temp files inside wb.write method", "id": 160319, "time": "2012-06-28T13:35:38Z", "bug_id": 53470, "creation_time": "2012-06-28T13:35:38Z", "is_private": false, "attachment_id": 29004}, {"count": 2, "tags": [], "creator": "submax@tiscalinet.it", "attachment_id": 29004, "id": 160320, "time": "2012-06-28T13:38:08Z", "bug_id": 53470, "creation_time": "2012-06-28T13:38:08Z", "is_private": false, "text": "Comment on attachment 29004\nsmall patch to add delete temp files inside wb.write method\n\npatch for org/apache/poi/xssf/streaming"}, {"count": 3, "tags": [], "creator": "submax@tiscalinet.it", "text": "Comment on attachment 29004\nsmall patch to add delete temp files inside wb.write method\n\nThis is very rudimental patch, this is an example.\nI don't know the structure of SXSSF classes.\n\nThis is a different way than two alternatives that i have described.\n\nI think to insert code for delete temp files in Workbook.write method because when this is call, the temp files is unuseful.", "id": 160321, "time": "2012-06-28T14:17:28Z", "bug_id": 53470, "creation_time": "2012-06-28T14:17:28Z", "is_private": false, "attachment_id": 29004}, {"count": 4, "tags": [], "creator": "apache@gagravarr.org", "attachment_id": null, "text": "What's wrong with just supplying a different value to the java.io.tmpdir property?\n\nOnce you're done with a SXSSF file, the temp files should be being cleaned up. If they're not, that'd be a bug", "id": 160325, "time": "2012-06-28T16:49:32Z", "bug_id": 53470, "creation_time": "2012-06-28T16:49:32Z", "is_private": false}, {"count": 5, "tags": [], "text": "ok, java.io.tmpdir property is useful but i tell of Custructor with File for control temp files, but after i have choose a different way in my patch.\n\nYes, in poi's source there is deleteOnExit() on temp files but with this way, when i write a workbook, files persist if i don't exit from JVM.\nTherefore if you try my patch, resolve this issue.\nIn conclusion this is a BUG.", "attachment_id": null, "id": 160338, "creator": "submax@tiscalinet.it", "time": "2012-06-29T07:48:56Z", "bug_id": 53470, "creation_time": "2012-06-29T07:48:56Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 53470, "text": "(In reply to comment #4)\n> What's wrong with just supplying a different value to the java.io.tmpdir\n> property?\n> \n\n\nok, java.io.tmpdir property is useful but i tell of Custructor with File for control temp files, but after i have choose a different way in my patch.\n\n> Once you're done with a SXSSF file, the temp files should be being cleaned\n> up. If they're not, that'd be a bug\n\nYes, in poi's source there is deleteOnExit() on temp files but with this way, when i write a workbook, files persist if i don't exit from JVM.\nTherefore if you try my patch, resolve this issue.\nIn conclusion this is a BUG.", "id": 160339, "time": "2012-06-29T07:50:40Z", "creator": "submax@tiscalinet.it", "creation_time": "2012-06-29T07:50:40Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "creator": "apache@gagravarr.org", "text": "I would have expected that SXSSF would tidy up after itself once it's done with the file. Are you trying to tidy up part way through processing a file for some reason, or are you finding that the temp files are left around once SXSSF has completed its work?", "id": 160372, "time": "2012-06-30T13:24:35Z", "bug_id": 53470, "creation_time": "2012-06-30T13:24:35Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "creator": "submax@tiscalinet.it", "attachment_id": null, "id": 160379, "time": "2012-07-01T10:55:45Z", "bug_id": 53470, "creation_time": "2012-07-01T10:55:45Z", "is_private": false, "text": "The the temp files not deleted when call write method.\n\nIn the SXSSF code there is not a part for this purpose.\n\nThere is only _fd.deleteOnExit() in SheetDataWriter class, but is not enough if the program that use POI not exit from jvm and these files remain on file system.\n\nFor confirm this, in the method write in SXSSFWorkbook class, there is already tmplFile.delete() for another tmp file.\n\nIn conclusion in write method missing the delete on xml's temporary files."}, {"count": 9, "tags": [], "bug_id": 53470, "attachment_id": null, "text": "I would suggest you open a new bug against SXSSF then - I believe the correct solution is to have SXSSF tidy up when it's done with files, rather than requiring users to do that via explicit temp directory controls.", "id": 160381, "time": "2012-07-01T14:49:31Z", "creator": "apache@gagravarr.org", "creation_time": "2012-07-01T14:49:31Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 53470, "attachment_id": null, "id": 160382, "time": "2012-07-01T15:03:46Z", "creator": "submax@tiscalinet.it", "creation_time": "2012-07-01T15:03:46Z", "is_private": false, "text": "i not understand... i must open a new bug?!"}, {"count": 11, "tags": [], "text": "i open new bug \n\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=53493", "attachment_id": null, "id": 160384, "creator": "submax@tiscalinet.it", "time": "2012-07-01T15:20:27Z", "bug_id": 53470, "creation_time": "2012-07-01T15:20:27Z", "is_private": false}]