[{"count": 0, "tags": [], "bug_id": 55671, "text": "Hi,\n In the 6.x branch of Tomcat an inconsistent naming of the JSP compiler key name for using char array type instead of String causes the compiler feature to not work. I first noticed this when looking at the generated Servlet source then using a debugger to double check.\n The code has been patched in the 7.x branch in rev 889966. It corrects the key name from \"genStrAsCharArray\" to \"genStringAsCharArray\" in a couple of files.\n\nhttp://svn.apache.org/viewvc?view=revision&revision=889966\n\n Is it possible this individual revision can be back-ported to Tomcat 6 ?\n\nRegards,\nJeremy", "id": 170677, "time": "2013-10-18T16:18:54Z", "creator": "jwhiting@redhat.com", "creation_time": "2013-10-18T16:18:54Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 55671, "text": "Steps to reproduce = ?\nWhere and how do you configure the JSP compiler? What does not work?\n\n\nThe correct init-parameter name in Tomcat 6 is \"genStrAsCharArray\"\nand that is documented in\nhttp://tomcat.apache.org/tomcat-6.0-doc/jasper-howto.html\n\n(Though the second mention of it in \"Production Configuration\" section says \"genStringAsCharArray\", a typo.)\n\nIf you use it with Ant then yes, there is an inconsistency and you would have to use <jasper genStringAsCharArray=\"true\"/> as the setter in JspC.java is setGenStringAsCharArray(...) with no matching getter.\n\n\nI think backporting r889966 as is is wrong. I think EmbeddedServletOptions should ask both the old and the new init-param name, for compatibility.\nIt also needs r1556725 and update to jasper-howto.html.", "id": 172200, "time": "2014-01-09T05:52:28Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-01-09T05:52:28Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "jeremy.whiting@hushmail.com", "attachment_id": null, "text": "(In reply to Konstantin Kolinko from comment #1)\n> Steps to reproduce = ?\n> Where and how do you configure the JSP compiler? What does not work?\n Take a look at a BZ for a downstream project. It details a reproducer.\n\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1022634\n\n> \n> \n> The correct init-parameter name in Tomcat 6 is \"genStrAsCharArray\"\n> and that is documented in\n> http://tomcat.apache.org/tomcat-6.0-doc/jasper-howto.html\n> \n> (Though the second mention of it in \"Production Configuration\" section says\n> \"genStringAsCharArray\", a typo.)\n> \n> If you use it with Ant then yes, there is an inconsistency and you would\n> have to use <jasper genStringAsCharArray=\"true\"/> as the setter in JspC.java\n> is setGenStringAsCharArray(...) with no matching getter.\nas a java dev using Tomact I would use the web deployment descriptor to configure the option. jsp-configuration/@generate-strings-as-char-arrays\n> \n> \n> I think backporting r889966 as is is wrong. I think EmbeddedServletOptions\n> should ask both the old and the new init-param name, for compatibility.\ntrue.\n> It also needs r1556725 and update to jasper-howto.html.\nyes.", "id": 172201, "time": "2014-01-09T08:42:06Z", "bug_id": 55671, "creation_time": "2014-01-09T08:42:06Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 55671, "text": "Created attachment 31187\nProposed patch v1\n\nThe proposed patch uses the new name of genStringAsCharArray but retains support for using genStrAsCharArray as the init param name.", "id": 172204, "time": "2014-01-09T10:23:22Z", "creator": "markt@apache.org", "creation_time": "2014-01-09T10:23:22Z", "is_private": false, "attachment_id": 31187}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "The proposed patch has been applied to 6.0.x and will be included in 6.0.38 onwards.", "id": 172354, "time": "2014-01-14T09:35:31Z", "bug_id": 55671, "creation_time": "2014-01-14T09:35:31Z", "is_private": false}]