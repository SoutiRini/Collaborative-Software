[{"count": 0, "tags": [], "creator": "twp@rnktel.com", "attachment_id": null, "text": "[Note: this is actually a bug report for mod_authnz_ldap, which is not listed in\nthe available components.]\n\nI am running httpd 2.2.3, built via the FreeBSD ports tree on an up-to-date\nFreeBSD 6.1 system using the following flags:\n\n    make WITH_LDAP_MODULES=yes WITH_AUTH_MODULES=yes WITH_MISC_MODULES=yes\nWITH_SSL_MODULES=yes\n\nThe documentation for mod_authnz_ldap says that multiple servers may be listed\nby separating them with spaces.  This feature worked on a 2.2.2 system but I\nhave not been able to make it work in 2.2.3.\n\nThis setting:\nAuthLDAPURL ldaps://ldap0.foo.com ldap1.foo.com/ou=people,dc=foo,dc=com\n\ngenerates this error:\n[Mon Sep 25 14:08:40 2006] [alert] [client xxx.xxx.xxx.xxx] /foo/.htaccess:\nInvalid LDAP connection mode setting: must be one of NONE, SSL, or TLS/STARTTLS,\nreferer: ...\n\nThis setting:\nAuthLDAPURL \"ldaps://ldap0.foo.com ldap1.foo.com/ou=people,dc=foo,dc=com\"\n\ngenerates this error:\n[Mon Sep 25 14:12:46 2006] [warn] [client xxx.xxx.xxx.xxx] [94852] auth_ldap\nauthenticate: user bar authentication failed; URI /foo/uri [LDAP:\nldap_simple_bind_s() failed][Can't contact LDAP server], referer: ...\n\nThis setting:\nAuthLDAPURL ldaps://ldap0.foo.com ldap1.foo.com/ou=people,dc=foo,dc=com SSL\n\ngenerates this error:\n[Mon Sep 25 14:13:02 2006] [alert] [client xxx.xxx.xxx.xxx] /foo/uri:\nAuthLDAPURL takes 1-2 arguments, URL to define LDAP connection. This should be\nan RFC 2255 complaint\\nURL of the form\nldap://host[:port]/basedn[?attrib[?scope[?filter]]].\\n<ul>\\n<li>Host is the name\nof the LDAP server. Use a space separated list of hosts \\nto specify redundant\nservers.\\n<li>Port is optional, and specifies the port to connect\nto.\\n<li>basedn specifies the base DN to start searches from\\n<li>Attrib\nspecifies what attribute to search for in the directory. If not provided, it\ndefaults to <b>uid</b>.\\n<li>Scope is the scope of the search, and can be either\n<b>sub</b> or <b>one</b>. If not provided, the default is\n<b>sub</b>.\\n<li>Filter is a filter to use in the search. If not provided,\ndefaults to <b>(objectClass=*)</b>.\\n</ul>\\nSearches are performed using the\nattribute and the filter combined. For example, assume that the\\nLDAP URL is\n<b>ldap://ldap.airius.com/ou=People, o=Airius?uid?sub?(posixid=*)</b>. Searches\nwill\\nbe done using the filter <b>(&((posixid=*))(uid=<i>username</i>))</b>,\nwhere <i>username</i>\\nis the user name passed by the HTTP client. The search\nwill be a subtree search on the branch <b>ou=People, o=Airius</b>., referer: ...", "id": 94090, "time": "2006-09-25T18:50:16Z", "bug_id": 40603, "creation_time": "2006-09-25T18:50:16Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bnicholes@apache.org", "attachment_id": null, "text": "  If multiple ldap hosts are included in the LDAPUrl, the entire url must be \nencapsulated in \"\" (double quotes).  Otherwise, the configuration file parser \nwill interprete the LDAPUrl directive as having multiple values which is \ninvalid.  \n  In your second example which includes the \"\", Apache appears to load and \nstart up correctly.  The error that you are getting has more to do with your \nLDAP SSL connection to the primary and/or secondary LDAP hosts, than it does \nwith mod_authnz_ldap.  Most likely a certificate issue.\n   The only thing that changed between 2.2.2 and 2.2.3 is that way that an \nerror that is returned by the util_ldap_cache_checkuserid() function is \nevaluated within mod_authnz_ldap.  This change would not have any affect on \nwhether the request suceeded or failed.", "id": 94132, "time": "2006-09-26T18:09:46Z", "bug_id": 40603, "creation_time": "2006-09-26T18:09:46Z", "is_private": false}, {"count": 2, "tags": [], "text": "CC myself on FreeBSD related bugs", "attachment_id": null, "id": 124173, "creator": "pgollucci@apache.org", "time": "2009-01-18T16:19:19Z", "bug_id": 40603, "creation_time": "2009-01-18T16:19:19Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "covener@gmail.com", "text": "2.5 years since update and no sign that the hostnames weren't passed to the SDK properly in the 2nd example (the only sytactically valid one).  Doc has been updated in interim to expand on  multi-host example.", "id": 127337, "time": "2009-05-23T14:51:08Z", "bug_id": 40603, "creation_time": "2009-05-23T14:51:08Z", "tags": [], "is_private": false}]