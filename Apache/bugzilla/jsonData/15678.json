[{"count": 0, "tags": [], "bug_id": 15678, "is_private": false, "text": "The configure script is broken if the selected layout begins on the first\nline of config.layout.\n\nTo reproduce:\n\ncd httpd-2.0.43\nmv config.layout config.layout.orig\nsed -n '13,34p' config.layout.orig | tee config.layout\n./configure\n# the result is an exceedingly unobvious error from the APR sub configure\n# script which complains about \"--bindir: NONE/bin\"\nsed -n '12,34p' config.layout.orig | tee config.layout\n./configure\n# works\n\nThis is with GNU Sed 4.0.4 which is relevent because the problem is with the\nsed program that configure uses to parse config.layout.\n\nThe following patch (which i will also attach, if the system lets me) fixes\nthe problem for me.\n\n--- acinclude.m4.orig\t2002-12-27 01:26:56.000000000 -0500\n+++ acinclude.m4\t2002-12-27 01:27:28.000000000 -0500\n@@ -275,7 +275,7 @@\n   fi\n   pldconf=./config.pld\n   changequote({,})\n-  sed -e \"1,/[ \t]*<[lL]ayout[ \t]*$2[ \t]*>[ \t]*/d\" \\\n+  sed -e \"0,/[ \t]*<[lL]ayout[ \t]*$2[ \t]*>[ \t]*/d\" \\\n       -e '/[ \t]*<\\/Layout>[ \t]*/,$d' \\\n       -e \"s/^[ \t]*//g\" \\\n       -e \"s/:[ \t]*/=\\'/g\" \\\n\nI am tempted to indulge in a rant about the wisdom of using configure args\ninstead of weird config files in this situation but this bug report is hardly\nthe place.\n\nI will however indulge in a suggestion. Something like:\nif [ ! -s \"$pldconf\" ];then", "id": 28284, "time": "2002-12-27T07:31:06Z", "creator": "sk@sethwklein.net", "creation_time": "2002-12-27T07:31:06Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 15678, "attachment_id": null, "text": "#15679 has a patch attachment, so keep that one alive\n\n*** This bug has been marked as a duplicate of 15679 ***", "id": 31022, "time": "2003-02-10T17:34:03Z", "creator": "trawick@apache.org", "creation_time": "2003-02-10T17:34:03Z", "is_private": false}]