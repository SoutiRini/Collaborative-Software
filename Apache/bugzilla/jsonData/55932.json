[{"attachment_id": 31154, "tags": [], "bug_id": 55932, "is_private": false, "count": 0, "id": 171927, "time": "2013-12-25T23:14:14Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-12-25T23:14:14Z", "text": "Created attachment 31154\nGraphite Dashboard for cumulated data\n\nGraphite is an interesting way to have graphs rendered live and on demand:\nhttp://graphite.readthedocs.org/en/latest/overview.html\n\nWith this Bugzilla I propose to create the following:\nA new listener that will send the following metrics\n\n1) Per second:\n- min response time\n- max response time\n- percentile 90 for response time rolling over last 100 values\n- percentile 95 for response time rolling over last 100 values\n- successful req\n- failed req\n- total req\n\n2) Listener will also send the following metrics which are not based on a variation per second:\n- ActiveThreads\n- Stopped Threads\n- Started Threads\n\nI suggest to use commons-math for percentile computations (which by the way could be useful in other parts of JMeter).\n\nI also suggest using Pickle protocol as it seems to be the most efficient as per Graphite docs:\nhttp://graphite.readthedocs.org/en/latest/feeding-carbon.html\n\nReviewing existing libraries, I didn't find a reference for Graphite client in Java but my final implementation is partly based on this:\n- https://github.com/BrightcoveOS/metrics-graphite-pickle/blob/master/src/main/java/com/brightcove/metrics/reporting/GraphitePickleReporter.java \n\nOnly using the pickle protocol part and adding:\n- Socket Pooling based on commons-pool2 to avoid overcreating sockets\n\n\nAdditional dependencies:\n- Apache commons-pool2\n- Apache commons-math3\n\n\nSee attached example of a generated Dashboard"}, {"count": 1, "attachment_id": 31155, "bug_id": 55932, "is_private": false, "id": 171928, "time": "2013-12-25T23:18:49Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-12-25T23:18:49Z", "tags": [], "text": "Created attachment 31155\nImplementation"}, {"count": 2, "tags": [], "creator": "milamber@apache.org", "attachment_id": null, "text": "\n\nI've tested the listener with a Graphite server on a virtual machine on my machine.\nSeems works fine, but I don't find the response time graph in elements list (see screenshot).\n\nI've following this tutorial to install the graphite server (on debian 7)\nhttps://www.digitalocean.com/community/articles/installing-and-configuring-graphite-and-statsd-on-an-ubuntu-12-04-vps\n\nPerhaps I missing something?\n\n\nNote, the ant tests task don't work. I put the trace in another comment.", "id": 171968, "time": "2013-12-31T05:36:41Z", "bug_id": 55932, "creation_time": "2013-12-31T05:36:41Z", "is_private": false}, {"count": 3, "tags": [], "creator": "milamber@apache.org", "attachment_id": null, "text": "\n(missing doc reference, saveservice, ...)\n\n\n     [java] Created: 89 tests including 8 suites\n     [java] Starting test run, test count = 2530\n     [java] .......................................F..\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........F................................\n     [java] .........................................\n     [java] ..F.......................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] ........................E.E..E.E.E.E.E.E.E.E.E......\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .........................................\n     [java] .............................\n     [java] Time: 77.02\n     [java] There were 11 errors:\n     [java] 1) org.apache.jmeter.reporters.graphite.GraphiteListener - en - (org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 2) org.apache.jmeter.reporters.graphite.GraphiteListener - en - (org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 3) org.apache.jmeter.reporters.graphite.GraphiteListener - de - (org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 4) org.apache.jmeter.reporters.graphite.GraphiteListener - no - (org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 5) org.apache.jmeter.reporters.graphite.GraphiteListener - pl - (org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 6) org.apache.jmeter.reporters.graphite.GraphiteListener - pt - BR(org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 7) org.apache.jmeter.reporters.graphite.GraphiteListener - es - (org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 8) org.apache.jmeter.reporters.graphite.GraphiteListener - tr - (org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 9) org.apache.jmeter.reporters.graphite.GraphiteListener - ja - (org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 10) org.apache.jmeter.reporters.graphite.GraphiteListener - zh - CN(org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 11) org.apache.jmeter.reporters.graphite.GraphiteListener - zh - TW(org.apache.jmeter.testbeans.gui.PackageTest)java.util.MissingResourceException: Can't find resource for bundle java.util.PropertyResourceBundle, key graphiteHost.displayName\n     [java] \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n     [java] \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.checkAllNecessaryKeysPresent(PackageTest.java:157)\n     [java] \tat org.apache.jmeter.testbeans.gui.PackageTest.runTest(PackageTest.java:112)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] There were 3 failures:\n     [java] 1) testMaven(org.apache.jmeter.JMeterVersionTest)junit.framework.AssertionFailedError: Should have no names left: [commons-pool2, commons-math3]. Check ApacheJMeter_parent.pom\n     [java] \tat org.apache.jmeter.JMeterVersionTest.testMaven(JMeterVersionTest.java:167)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n     [java] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n     [java] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 2) runTestElement(org.apache.jmeter.junit.JMeterTest)junit.framework.AssertionFailedError: SaveService nameMap (saveservice.properties) should contain org.apache.jmeter.reporters.graphite.GraphiteListener\n     [java] \tat org.apache.jmeter.junit.JMeterTest.checkElementAlias(JMeterTest.java:553)\n     [java] \tat org.apache.jmeter.junit.JMeterTest.runTestElement(JMeterTest.java:540)\n     [java] \tat sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)\n     [java] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] 3) runGUITitle(org.apache.jmeter.junit.JMeterTest)junit.framework.AssertionFailedError: component_reference.xml needs 'Graphite_Listener' anchor for org.apache.jmeter.testbeans.gui.TestBeanGUI\n     [java] \tat org.apache.jmeter.junit.JMeterTest.runGUITitle(JMeterTest.java:368)\n     [java] \tat sun.reflect.GeneratedMethodAccessor29.invoke(Unknown Source)\n     [java] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n     [java] FAILURES!!!\n     [java] Tests run: 2530,  Failures: 3,  Errors: 11\n\nBUILD FAILED\n/home/milamber/W-workspaces/Workspaces-JMeter/Jmeter/build.xml:2677: Java returned: 1\n\nTotal time: 3 minutes 12 seconds", "id": 171969, "time": "2013-12-31T05:37:48Z", "bug_id": 55932, "creation_time": "2013-12-31T05:37:48Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 55932, "attachment_id": 31166, "id": 171970, "time": "2013-12-31T05:38:43Z", "creator": "milamber@apache.org", "creation_time": "2013-12-31T05:38:43Z", "is_private": false, "text": "Created attachment 31166\nElements list with my test"}, {"count": 5, "tags": [], "bug_id": 55932, "attachment_id": null, "is_private": false, "id": 171979, "time": "2013-12-31T13:40:17Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-12-31T13:40:17Z", "text": "Hello Milamber,\nThanks for tests, there is no response time, just percentile95 and percentile90.\n\nRegarding tests failure, I was planning to fix this if we agree to commit patch.\n\nIs it ok for commiting it ?"}, {"count": 6, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "I have been having a look at the implementation.\n\nI don't really see that it needs Commons Math; we aleady have StatCalculator which handles percentiles and more.\n\nLikewise, does it really need Commons Pool?\nIt seems wrong to have to have 2 separate pools of SocketOutputStream instances.\nHow many of these would there be?\n\nAlso, DescriptiveStatistics is not thread-safe (nor is StatCalculator).\n\nIf we do implement something like this, I think the data processing needs either to be carefully synchronised, or the raw data should be sent to a separate singleton background thread.\n\nFollow-ups to the dev list please.", "id": 172059, "time": "2014-01-03T12:57:20Z", "bug_id": 55932, "creation_time": "2014-01-03T12:57:20Z", "is_private": false}, {"count": 7, "tags": [], "text": "See:\nSee:\nhttp://mail-archives.apache.org/mod_mbox/jmeter-dev/201401.mbox/%3CCAH9fUpbt-_x1fFcYCTn9fVEqFL68E_N9YLkkhYs4RnpiRSx+Og@mail.gmail.com%3E", "is_private": false, "bug_id": 55932, "id": 176604, "time": "2014-07-22T20:52:46Z", "creator": "support@ubikloadpack.com", "creation_time": "2014-07-22T20:52:46Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 55932, "attachment_id": null, "is_private": false, "id": 179231, "time": "2014-11-22T15:41:54Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-11-22T15:41:54Z", "text": "Date: Sat Nov 22 15:36:37 2014\nNew Revision: 1641081\n\nURL: http://svn.apache.org/r1641081\nLog:\nBug 55932 - Create a Async BackendListener to allow easy plug of new listener (Graphite, JDBC, Console,...)\nBugzilla Id: 55932\n\nAdded:\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/AbstractBackendListenerClient.java   (with props)\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/BackendListener.java   (with props)\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/BackendListenerClient.java   (with props)\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/BackendListenerContext.java   (with props)\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/BackendListenerGui.java   (with props)\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/SamplerMetric.java   (with props)\nModified:\n    jmeter/trunk/bin/saveservice.properties\n    jmeter/trunk/build.properties\n    jmeter/trunk/build.xml\n    jmeter/trunk/eclipse.classpath\n    jmeter/trunk/res/maven/ApacheJMeter_parent.pom\n    jmeter/trunk/src/core/org/apache/jmeter/resources/messages.properties\n    jmeter/trunk/src/core/org/apache/jmeter/resources/messages_fr.properties\n    jmeter/trunk/src/core/org/apache/jmeter/samplers/SampleResult.java\n    jmeter/trunk/src/core/org/apache/jmeter/save/SaveService.java\n    jmeter/trunk/xdocs/changes.xml\n    jmeter/trunk/xdocs/usermanual/component_reference.xml"}, {"count": 9, "tags": [], "bug_id": 55932, "text": "Date: Sat Nov 22 15:55:27 2014\nNew Revision: 1641086\n\nURL: http://svn.apache.org/r1641086\nLog:\nBug 55932 - Create a Async BackendListener to allow easy plug of new listener (Graphite, JDBC, Console,...)\nFix mistake in imports\nBugzilla Id: 55932\n\nModified:\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/BackendListener.java", "id": 179234, "time": "2014-11-22T15:59:21Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-11-22T15:59:21Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 55932, "attachment_id": null, "id": 179236, "time": "2014-11-22T20:03:25Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-11-22T20:03:25Z", "is_private": false, "text": "Date: Sat Nov 22 20:01:50 2014\nNew Revision: 1641118\n\nURL: http://svn.apache.org/r1641118\nLog:\nBug 55932 - Create a Async BackendListener to allow easy plug of new listener (Graphite, JDBC, Console,...)\nFix javadocs , naming\nBut more importantly fix multi-threading issues on instance variables as there is only 1 BackendListener shared by all threads\nBugzilla Id: 55932\n\nModified:\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/BackendListener.java"}, {"count": 11, "tags": [], "creator": "milamber@apache.org", "attachment_id": null, "id": 179262, "time": "2014-11-25T07:38:45Z", "bug_id": 55932, "creation_time": "2014-11-25T07:38:45Z", "is_private": false, "text": "\n\nWhen I run the ant distribution task, I have this error:\n\n     [java] There was 1 error:\n     [java] 1) GUIComponents2(org.apache.jmeter.junit.JMeterTest)java.lang.NumberFormatException: For input string: \"\"\n     [java] \tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\n     [java] \tat java.lang.Integer.parseInt(Integer.java:470)\n     [java] \tat java.lang.Integer.parseInt(Integer.java:499)\n     [java] \tat org.apache.jmeter.visualizers.backend.BackendListenerGui.modifyTestElement(BackendListenerGui.java:268)\n     [java] \tat org.apache.jmeter.visualizers.backend.BackendListenerGui.createTestElement(BackendListenerGui.java:257)\n     [java] \tat org.apache.jmeter.junit.JMeterTest.GUIComponents2(JMeterTest.java:445)\n     [java] \tat sun.reflect.GeneratedMethodAccessor27.invoke(Unknown Source)\n     [java] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n     [java] \tat org.apache.jorphan.test.AllTests.main(AllTests.java:236)\n\n\n\nIf the queueSize is empty, the NFE occurs.\nSeveral solutions (in my mind):\n1/ add a try catch block (and ignore the NFE or set a default value)\n2/ use a if/then/else block (set a default value if null or emtpy)\n\nand change the docs (not require, indicate the default value)"}, {"count": 12, "tags": [], "text": "Date: Sun Nov 30 19:35:07 2014\nNew Revision: 1642600\n\nURL: http://svn.apache.org/r1642600\nLog:\nStore queue size as a String (allows use of variables etc)\n\nModified:\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/BackendListener.java\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/BackendListenerGui.java", "attachment_id": null, "bug_id": 55932, "id": 180034, "time": "2014-12-27T15:07:09Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-12-27T15:07:09Z", "is_private": false}]