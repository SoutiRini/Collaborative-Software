[{"count": 0, "tags": [], "bug_id": 52149, "text": "The server starts to serve random contents suddenly. By 'random' I mean that request of the home page can returns images, css, javascript or the page of another user.\n\nOur Apache has many site configurations enabled but only one of these had the load balancer:\n\nHeader add Set-Cookie \"ROUTEID=.%{BALANCER_WORKER_ROUTE}e; path=/\" env=BALANCER_ROUTE_CHANGED\n<Proxy balancer://mycluster>\n  BalancerMember http://127.0.0.1:8081 route=8081\n  BalancerMember http://127.0.0.1:8181 route=8181\n  BalancerMember http://127.0.0.1:8281 route=8281\n  ProxySet stickysession=ROUTEID\n</Proxy>\n\nand some rewrite rule to Zope servers.\nThe only site showing the strange behavior was the one with the balancer.\n\nApache is patched with the last security updates available for Ubuntu Lucid (the last was apache2-mpm-worker on 2011-09-02).\n\nFriday 4 November 2011 we begin to experience the strange behavior, after a restart the site went right but starting over after some time (to few minutes to hours).\n\nSunday we decide to remove the balancer and the behavior disappear. I check the logs to spot an attack but without success.", "id": 151276, "attachment_id": null, "creator": "riccardo@reflab.com", "creation_time": "2011-11-07T18:33:48Z", "time": "2011-11-07T18:33:48Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 52149, "text": "The problem seems to be due to a Zope bug with sessions in a specific enviroment setup. The use of three instances with mod_proxy_balancer enhances the probability that the strange behavior happen.", "id": 151586, "time": "2011-11-17T10:47:05Z", "creator": "riccardo@reflab.com", "creation_time": "2011-11-17T10:47:05Z", "tags": [], "is_private": false}]