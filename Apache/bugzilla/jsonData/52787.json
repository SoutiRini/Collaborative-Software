[{"count": 0, "text": "Created attachment 28397\nApacheJMeter_components.jar\n\nI search for a prettyFormat xml response and I cant't find any renderer. Now I have changed the class \"RenderAsText\". This is a quick hack. \n\nHere is my solution:\n\npackage org.apache.jmeter.visualizers;\n\nimport javax.swing.JEditorPane;\nimport javax.swing.JScrollPane;\nimport org.apache.jmeter.samplers.SampleResult;\nimport org.apache.jmeter.util.JMeterUtils;\n\nimport javax.xml.transform.OutputKeys;\nimport javax.xml.transform.Source;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.TransformerFactory;\nimport javax.xml.transform.stream.StreamResult;\nimport javax.xml.transform.stream.StreamSource;\nimport java.io.StringReader;\nimport java.io.StringWriter;\n\n// Referenced classes of package org.apache.jmeter.visualizers:\n//            SamplerResultTab, ResultRenderer, ViewResultsFullVisualizer\n\npublic class RenderAsText extends SamplerResultTab\n    implements ResultRenderer\n{\n\n    public RenderAsText()\n    {\n    }\n\n    public void renderResult(SampleResult sampleResult)\n    {\n        String response = ViewResultsFullVisualizer.getResponseAsString(sampleResult);\n        showTextResponse(response);\n    }\n\n// formate response xml\n  public static String prettyFormat(String input, int indent) {\n    try {\n      Source xmlInput = new StreamSource(new StringReader(input));\n      StringWriter stringWriter = new StringWriter();\n      StreamResult xmlOutput = new StreamResult(stringWriter);\n      Transformer transformer = TransformerFactory.newInstance().newTransformer();\n      transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n      transformer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", String.valueOf(indent));\n      transformer.transform(xmlInput, xmlOutput);\n      return xmlOutput.getWriter().toString();\n    } catch (Exception e) {\n      throw new RuntimeException(e); // simple exception handling, please review it\n    }\n  }\n\n  public static String prettyFormat(String input) {\n    return prettyFormat(input, 2);\n  }\n\n    private void showTextResponse(String response)\n    {\n        results.setContentType(\"text/plain\");\n        if(response != null){\n            if(response.startsWith(\"<?xml version=\")){\n                results.setText(prettyFormat(response));\n            }else{\n                results.setText(response);\n            }\n\t}else{\t\t\n\t\tresults.setText(\"\");        \n\t}\n        //results.setText(response != null ? response : \"\");\n        results.setCaretPosition(0);\n        resultsScrollPane.setViewportView(results);\n\n    }\n\n    public String toString()\n    {\n        return JMeterUtils.getResString(\"view_results_render_text\");\n    }\n}\n\nIf you like you can try it. (see attachment)", "bug_id": 52787, "attachment_id": 28397, "id": 154321, "time": "2012-02-28T12:33:20Z", "creator": "f.mellentin@gmx.com", "creation_time": "2012-02-28T12:33:20Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "f.mellentin@gmx.com", "attachment_id": null, "is_private": false, "id": 154323, "time": "2012-02-28T12:46:41Z", "bug_id": 52787, "creation_time": "2012-02-28T12:46:41Z", "text": "I'm searching for a \"prettyFormat\" response (for xml) and I can't find any renderer. Now I\nhave changed the class \"RenderAsText\". This is a quick hack. \n\nHere is my solution:\n\npackage org.apache.jmeter.visualizers;\n\nimport javax.swing.JEditorPane;\nimport javax.swing.JScrollPane;\nimport org.apache.jmeter.samplers.SampleResult;\nimport org.apache.jmeter.util.JMeterUtils;\n\nimport javax.xml.transform.OutputKeys;\nimport javax.xml.transform.Source;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.TransformerFactory;\nimport javax.xml.transform.stream.StreamResult;\nimport javax.xml.transform.stream.StreamSource;\nimport java.io.StringReader;\nimport java.io.StringWriter;\n\n// Referenced classes of package org.apache.jmeter.visualizers:\n//            SamplerResultTab, ResultRenderer, ViewResultsFullVisualizer\n\npublic class RenderAsText extends SamplerResultTab\n    implements ResultRenderer\n{\n\n    public RenderAsText()\n    {\n    }\n\n    public void renderResult(SampleResult sampleResult)\n    {\n        String response =\nViewResultsFullVisualizer.getResponseAsString(sampleResult);\n        showTextResponse(response);\n    }\n\n// formate response xml\n  public static String prettyFormat(String input, int indent) {\n    try {\n      Source xmlInput = new StreamSource(new StringReader(input));\n      StringWriter stringWriter = new StringWriter();\n      StreamResult xmlOutput = new StreamResult(stringWriter);\n      Transformer transformer =\nTransformerFactory.newInstance().newTransformer();\n      transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n     \ntransformer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\",\nString.valueOf(indent));\n      transformer.transform(xmlInput, xmlOutput);\n      return xmlOutput.getWriter().toString();\n    } catch (Exception e) {\n      throw new RuntimeException(e); // simple exception handling, please\nreview it\n    }\n  }\n\n  public static String prettyFormat(String input) {\n    return prettyFormat(input, 2);\n  }\n\n    private void showTextResponse(String response)\n    {\n        results.setContentType(\"text/plain\");\n        if(response != null){\n            if(response.startsWith(\"<?xml version=\")){\n                results.setText(prettyFormat(response));\n            }else{\n                results.setText(response);\n            }\n    }else{        \n        results.setText(\"\");        \n    }\n        //results.setText(response != null ? response : \"\");\n        results.setCaretPosition(0);\n        resultsScrollPane.setViewportView(results);\n\n    }\n\n    public String toString()\n    {\n        return JMeterUtils.getResString(\"view_results_render_text\");\n    }\n}\n\nIf you like you can try it. (see attachment)"}, {"count": 2, "text": "Render as XML already exists:\nsrc/components/org/apache/jmeter/visualizers/RenderAsXML.java\n\nIf you want improve this xml renderer, please open a new bugzilla, with traditional diff patch file.", "bug_id": 52787, "attachment_id": null, "id": 154347, "time": "2012-02-28T20:38:01Z", "creator": "milamber@apache.org", "creation_time": "2012-02-28T20:38:01Z", "tags": [], "is_private": false}]