[{"count": 0, "tags": [], "bug_id": 48209, "text": "Created attachment 24547\nWASlog\n\nWe have configured log4j for ERRORs to go to the file-appender and FATALs to go\nto the console-appender (the ConsoleAppender, or System.out, in the Websphere\nenvironment ultimately writes to a file called SYSPRINT):\n---\nlog4j.threshold=ERROR\nlog4j.rootLogger=ERROR, ConsoleAppender, SUBAppender\n#\n# Geen interne logging voor log4j\n#\nlog4j.debug=false\n\n#\n# Console Appender\n#\nlog4j.appender.ConsoleAppender=org.apache.log4j.ConsoleAppender\nlog4j.appender.ConsoleAppender.threshold=FATAL\nlog4j.appender.ConsoleAppender.immediateFlush=true\nlog4j.appender.ConsoleAppender.Target=System.out\nlog4j.appender.ConsoleAppender.layout=org.apache.log4j.PatternLayout\nlog4j.appender.ConsoleAppender.layout.ConversionPattern=%d{ISO8601} %-4.4d{z}\nSUB2009.03.19 %-5p %m %C %M %X{userId} %X{hostname}%n\n\n#\n# Default appender voor applicatieve logging\n#\nlog4j.appender.SUBAppender=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.SUBAppender.threshold=ERROR\nlog4j.appender.SUBAppender.DatePattern='.'yyyy-MM-dd\nlog4j.appender.SUBAppender.immediateFlush=true\nlog4j.appender.SUBAppender.File=/wasconfig/V6R0/wpe1logs/applogs/SUB/HLPVOA.log\nlog4j.appender.SUBAppender.BufferedIO=false\nlog4j.appender.SUBAppender.layout=org.apache.log4j.PatternLayout\nlog4j.appender.SUBAppender.layout.ConversionPattern=%d{ISO8601} %-4.4d{z}\nSUB2009.03.19 %-5p %m %C %M %X{userId} %X{hostname}%n\n---\n\nIn the production environment we see a couple of remarkable things:\n- The logging statements are sent to the SUBAppender (file-appender) without\nany problem. The output file is correct.\n- ERROR logging statements appear in the SYSPRINT (console-appender) where\nthere should only be FATALs (see threshold)\n- logging into the SYSPRINT starts everyday randomly (the server is restarted\neveryday)\n- there are days that there is no logging into the SYSPRINT\n- If we remove the (ConsoleAppender) reference from the root-logger there is no\nchange in behaviour: the logging statements still appear in the SYSPRINT\n- The logging statements in the SYSPRINT start repeating (from 2 to 1000 times)\n- See attachment (WASlog) for the SYSPRINT that contains logging statements\nthat do not seem to follow the formatting according to the log4j-config file.\nThe labels PROFILING_LOGGING and OPDRACHT_LOGGING have a level higher than\nERROR but lower than FATAL\n- We have contacted IBM and they say it is a log4j problem\n\nCan anybody explain what goes wrong here?\n\nRegards,\nFrits Walraven", "id": 132029, "time": "2009-11-17T00:48:49Z", "creator": "fj.walraven@belastingdienst.nl", "creation_time": "2009-11-17T00:48:49Z", "is_private": false, "attachment_id": 24547}]