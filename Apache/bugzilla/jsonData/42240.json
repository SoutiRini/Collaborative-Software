[{"count": 0, "tags": [], "creator": "nettings@apache.org", "text": "i just realized that module.xml description files are validated before they are\nbuilt:\n   <target name=\"validate-module-{$id}\">\n      <jing rngfile=\"{$module-schema}\" file=\"{$src}{$configFile}\"/>\n    </target>\n\nwhich is a great idea imho. since we have\nsrc/webapp/lenya/resources/schemas/publication.rng, it would be cool if our\npublication.xconf files were also validated. unfortunately, i found only\n\"bulk-copy\" code in the targets, whereas for validation it would be necessary to\niterate over the publications in ${pubs.root.dirs}. anyone familiar enough with\nant to do that?\n\nit would be great to have that one in for 1.4-RC2 so that we can catch\npublication configs in the old format.", "id": 102323, "time": "2007-04-25T06:39:11Z", "bug_id": 42240, "creation_time": "2007-04-25T06:39:11Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "andreas@apache.org", "text": "The publication.xml files are now validated after the publications are deployed.\nValidating them before deploying would be quite complicated, and I'd rather\ndefer it until the publication deployment process is sequentialized (similar to\nthe modules).\n\nDo you consider this sufficient to close the bug?", "id": 102665, "time": "2007-04-30T08:35:38Z", "bug_id": 42240, "creation_time": "2007-04-30T08:35:38Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "absolutely. the important thing is that incorrect config files create obvious\nerrors rather than subtle malfunctioning. thanks for doing this! it's an\nimportant usability issue given the many changes we have require from our beta\ntesters lately.", "is_private": false, "id": 102672, "creator": "nettings@apache.org", "time": "2007-04-30T09:06:45Z", "bug_id": 42240, "creation_time": "2007-04-30T09:06:45Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 42240, "text": "ugh. i just removed the <name/> element from default's publication.xml to see\nwhat will happen, and the error message is:\n\n/build/lenya-trunk/build/lenya/webapp/lenya/pubs/default/config/publication.xml:114:15:\nerror: unfinished element\n\nwhile there may not be much we can do about it, it's a little unsatisfactory.. :(\n", "id": 102682, "time": "2007-04-30T10:10:08Z", "creator": "nettings@apache.org", "creation_time": "2007-04-30T10:10:08Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "Well, any ideas how to improve the situation? It would be nice if Jing could\nlist the missing elements, maybe there's an option to set?", "is_private": false, "id": 102799, "creator": "andreas@apache.org", "time": "2007-05-03T01:34:40Z", "bug_id": 42240, "creation_time": "2007-05-03T01:34:40Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "it seems to be a limitation of jing.\nthe problem is <interleave/>. if we got rid of it, the error messages improve\n(you get an exact location of the problem). but then the configuration file gets\nharder to write by hand...\n", "is_private": false, "bug_id": 42240, "id": 102801, "time": "2007-05-03T02:36:38Z", "creator": "nettings@apache.org", "creation_time": "2007-05-03T02:36:38Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "nettings@apache.org", "text": "i'm closing this bug. i don't see any obvious way to get better error messages\nother than removing \"interleave\", which means the order of configuration\nelements would become fixed... but that means it's almost impossible to write or\nmodify a configuration by hand without reading the rng as you go.\n", "id": 103364, "time": "2007-05-19T01:15:03Z", "bug_id": 42240, "creation_time": "2007-05-19T01:15:03Z", "is_private": false, "attachment_id": null}]