[{"count": 0, "tags": [], "creator": "jgreffe@yahoo.fr", "attachment_id": null, "text": "When setting accessibility with :\n\nA. userAgent.setAccessibility(true)\n\nand then generating PDF, an exception occurs :\n\n-----\nERROR org.apache.fop.area.AreaTreeModel - Error while rendering page 1\njava.lang.NullPointerException\n\tat org.apache.fop.render.pdf.PDFPainter.prepareImageMCID(PDFPainter.java:152)\n-----\n\n\nIt seems that logicalStructureHandler of PDFPainter is null.\n\nThe cause is that the logicalStructureHandler is set when calling :\n\nB. FopFactory.newFop(String outputFormat, FOUserAgent userAgent, OutputStream stream)\n\nwhich calls :\n\nPDFDocumentHandler.startDocument()\nwhere it tests accessibility of the attached FOUserAgent.\n\nIssue is due to the fact that at the moment calling \"B\", we couldn't have correctly set \"A\" so, the logicalStructureHandler of PDFPainter remains null.\n\n\n\n\nA solution is to change method FopFactory.setAccessibility() to public, so that we can set accessibility before calling \"B\".", "id": 139371, "time": "2010-08-23T08:44:41Z", "bug_id": 49808, "creation_time": "2010-08-23T08:44:41Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jgreffe@yahoo.fr", "attachment_id": null, "text": "My mistake, this has already been managed :\n\nFOUserAgent fopUserAgent = FopFactory.newFOUserAgent();\nfopUserAgent.setAccessbility(true);\nFop fop = FopFactory.newFop(String outputFormat, fopUserAgent, OutputStream stream)", "id": 139377, "time": "2010-08-23T10:33:30Z", "bug_id": 49808, "creation_time": "2010-08-23T10:33:30Z", "is_private": false}]