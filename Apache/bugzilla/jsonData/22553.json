[{"count": 0, "tags": [], "bug_id": 22553, "text": "Hi,\n\n(this may be a duplicate Enhancement request, but i was unable to master the \nquery interface... :().\n\nI was wondering if it would be possible to make the java task return (by some \noption e.g. service=\"true\"), if i start a java service thread (e.g. tomcat).\n\nMost of the runtime scripts suplied with tomcat do determin the classpath setup \nVariables and start a javacomand with certain argements. I belief all of them \ncould live inside a single build.xml file.\n\nI tried to acomplish this, which did almost work, but the <java> task never \nreturned and kept waiting until the server was actually shut down. I belief (!)\nit would be easy to add this option to further releases of ant.\n\n--------------- sample build.xml file for tomcat --------------\n<project name=\"tomcat\" default=\"usage\" basedir=\".\">\n    <description>\n        Tomcat startup and shut script for ant\n    </description>\n    <!--\n    (c) 2003 Jens Skripczynski\n\n    This script must be placed in the root directory of the tomcat\n    installation. To run this script type 'ant -f tomcat.xml option' where\n    option can be one of the following value 'start', 'stop' and 'restart'.\n\n    -->\n\n   <!-- set global properties for this script -->\n\n   <!-- assume the file is in the root directory of tomcat -->\n  <property name=\"catalina-base\" location=\".\"/>\n  <property name=\"catalina-home\" location=\".\"/>\n  <property name=\"catalina-temp\" location=\"./temp\"/>\n  <property name=\"java.endorsed.dirs\" location=\"common/endorsed\"/>\n\n  <property name=\"tomcat-bootstrap\"\n            value=\"org.apache.catalina.startup.Bootstrap\"/>\n\n   <path id=\"tomcat-4.1-cp\">\n      <pathelement path=\"${java.class.path}\"/>\n      <pathelement path=\"${JAVA_HOME}/lib/tools.jar\"/>\n      <pathelement path=\"bin/bootstrap.jar\"/>\n   </path>\n\n  <target name=\"usage\"\n        description=\"displays script usage\" >\n        <echo> Usage: ant -f tomcat.xml start|stop|restart </echo>\n    </target>\n\n    <target name=\"tomcat\" description=\"executes tomcat with ${param}\" >\n       <echo> Executing tomcat with: ${param} </echo>\n     <java fork=\"yes\"\n        classname=\"${tomcat-bootstrap}\">\n           <arg value=\"${param}\" />\n       <sysproperty key=\"catalina.base\"      value=\"${catalina-home}\" />\n       <sysproperty key=\"catalina.home\"      value=\"${catalina-home}\" />\n       <sysproperty key=\"java.io.tmpdir\"     value=\"${catalina-temp}\" />\n       <sysproperty key=\"java.endorsed.dirs\" value=\"${java.endorsed.dirs}\" />\n       <classpath refid=\"tomcat-4.1-cp\" />\n    </java>\n </target>\n\n  <target name=\"start\"\n     description=\"starts the tomcat server\" >\n     <antcall target=\"tomcat\">\n        <param name=\"param\" value=\"start\"/>\n     </antcall>\n    <echo> Started tomcat server </echo>\n  </target>\n\n  <target name=\"stop\"\n        description=\"starts the tomcat server\" >\n     <antcall target=\"tomcat\">\n        <param name=\"param\" value=\"stop\"/>\n     </antcall>\n    <echo> Stopped tomcat server. </echo>\n  </target>\n  <target name=\"stop\"\n        description=\"starts the tomcat server\" >\n     <antcall target=\"tomcat\">\n        <param name=\"param\" value=\"stop\"/>\n     </antcall>\n    <echo> Stopped tomcat server. </echo>\n  </target>\n</project>", "id": 42991, "attachment_id": null, "creator": "skripi@mail2003.shadowbyte.net", "creation_time": "2003-08-19T13:14:53Z", "time": "2003-08-19T13:14:53Z", "is_private": false}, {"count": 1, "tags": [], "creator": "antoine@apache.org", "text": "fixed with new attribute spawn in ant 1.6\n\n*** This bug has been marked as a duplicate of 5907 ***", "id": 43012, "time": "2003-08-19T19:07:55Z", "bug_id": 22553, "creation_time": "2003-08-19T19:07:55Z", "is_private": false, "attachment_id": null}]