[{"count": 0, "tags": [], "bug_id": 43446, "text": "I am busy creating SVG based components, and I am encountering problems with\ncrashing animations. When that happens the animation stops, the memory usage\nskyrockets, and after a few seconds I get an Out of Heap space error.\n\nI narrowed it down to the following situation:\n\nI have a box with a focusin/focusout animation\nWhen I move the mouse in and out of the box the animation runs fine.\n\nHowever when I move the mouse pointer straight from the box outside the\nJSVGCanvas component, it will hang and cause an out of memory exception.\n\nAs long as the mouse pointer 'touches' an empty part of the SVG before exiting\nthe canvas, there is no problem.", "id": 108474, "attachment_id": null, "creator": "flyaruu@dexels.com", "creation_time": "2007-09-21T06:55:06Z", "time": "2007-09-21T06:55:06Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 20864\nAn SVG file causing the bug\n\nOne of the files for the testcase causing this bug", "is_private": false, "id": 108475, "creator": "flyaruu@dexels.com", "time": "2007-09-21T06:57:11Z", "bug_id": 43446, "creation_time": "2007-09-21T06:57:11Z", "attachment_id": 20864}, {"count": 2, "tags": [], "creator": "flyaruu@dexels.com", "attachment_id": 20865, "text": "Created attachment 20865\nThe java file for the test case\n\nThis java file creates a JFrame with a JSVGCanvas component, the layout is a\nbit silly on purpose, to illustrate the mouse exit behavior.", "id": 108476, "time": "2007-09-21T06:59:20Z", "bug_id": 43446, "creation_time": "2007-09-21T06:59:20Z", "is_private": false}, {"count": 3, "tags": [], "text": "I noticed that the crash occurs when there are identical instanceTimes in the\nTimedElement class.\nI can prevent the crash by preventing this from happening. I am not familiar\nenough with the codebase to understand whether this is a fix or a dirty hack,\nbut I think it will point you guys in the right direction and save some time\nanalyzing.\n\n\n\nIf I add the following lines to TimedElement:282, before instanceTimes.add(..) \n\nif(instanceTimes.contains(time)) {\n   \treturn Float.POSITIVE_INFINITY;\n}\n\nAnd this method to InstanceTime:\n\n   public boolean equals(Object o) {\n        InstanceTime it = (InstanceTime)o;\n        if (time == it.time) return true;\n        return false;\n    }", "is_private": false, "id": 108707, "creator": "flyaruu@dexels.com", "time": "2007-09-27T02:09:01Z", "bug_id": 43446, "creation_time": "2007-09-27T02:09:01Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 43446, "attachment_id": null, "text": "Thanks for the analysis Frank.  You're right in that multiple identical begin\ninstance times are causing the problem.  Simply ignoring duplicates won't work\nthough, since instance times can change if their dependent Interval is updated.\n I've changed the Interval searching code to skip over duplicate instance times,\nwhich avoids the problem.  I'm not sure if this behaviour is exactly correct\n(whether a zero time Interval should be created before the proper one), it's a\nbit difficult to tell from the SMIL spec.", "id": 108755, "time": "2007-09-28T07:38:44Z", "creator": "cam@apache.org", "creation_time": "2007-09-28T07:38:44Z", "is_private": false}, {"count": 5, "tags": [], "creator": "adamlego20@hotmail.com", "attachment_id": null, "text": "(In reply to comment #4)\n> Thanks for the analysis Frank.  You're right in that multiple identical begin\n> instance times are causing the problem.  Simply ignoring duplicates won't work\n> though, since instance times can change if their dependent Interval is updated.\n>  I've changed the Interval searching code to skip over duplicate instance times,\n> which avoids the problem.  I'm not sure if this behaviour is exactly correct\n> (whether a zero time Interval should be created before the proper one), it's a\n> bit difficult to tell from the SMIL spec.\n\nCould you perhaps post the patched files that fixed the bug for you? I am having\nthis bug in a Batik program that I'm making, and the fix in comment #3 didn't\nhelp at all. I don't know enough about the Batik codebase to find the problem\ncode and fix it myself.", "id": 113814, "time": "2008-02-15T18:01:15Z", "bug_id": 43446, "creation_time": "2008-02-15T18:01:15Z", "is_private": false}, {"count": 6, "text": "(In reply to comment #5)\n\nHi Adam, as far as I know, Cameron fixed that bug when he made this comment.\nI just updated to the latest version, threw away my hack, and everything worked\nfine. I later checked it on de 1.7 release version, it also worked.\n\nSo, if you still got problems, and you are using the latest version, I am afraid\nit is a different bug. In that case, I suggest you create a new bug report. If\nyou supply an easy way of reproducing your problem, usually somebody can help\nyou pretty quickly.\n\nregards Frank\n", "creator": "flyaruu@dexels.com", "attachment_id": null, "id": 113825, "time": "2008-02-16T02:25:07Z", "bug_id": 43446, "creation_time": "2008-02-16T02:25:07Z", "tags": [], "is_private": false}]