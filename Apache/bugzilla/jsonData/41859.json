[{"count": 0, "tags": [], "bug_id": 41859, "attachment_id": null, "text": "When I'm compiling 'mod_fastcgi-2.4.2' in any Apache v2.2+, I'm getting error\nmessages in 'mod_fastcgi.c' like this -> 'mod_fastcgi.c:270: error\n`ap_null_cleanup' undeclared (first use in this function)'.\n\nI know, this isn't an Apache problem, but I can write solution only here,\nbecause many people can get this trouble. I believe it is suitable for inclusion\nin the official code base. Restore definitions, I guess is a most suitable way\nto do this.\n\nSolution.\n=========\nAs I see, in Apache 2.2 and later, previously (in 2.0) deprecated definitions\nwas dropped. But, in the same time, 'mod_fastcgi-2.4.2' still need it. \nI solved a problem bay adding following lines in 'fcgi.h' in source code of\n'mod_fastcgi'. You should paste this lines from line 75, after '#define\nap_unblock_alarms()' in the block of obsolete function definitions. \n------------ cut here --------------\n#ifndef ap_copy_table\n#define ap_copy_table apr_table_copy\n#define ap_cpystrn apr_cpystrn\n#define ap_destroy_pool apr_pool_destroy\n#define ap_isspace apr_isspace\n#define ap_make_array apr_array_make\n#define ap_make_table apr_table_make\n#define ap_null_cleanup apr_pool_cleanup_null \n#define ap_palloc apr_palloc\n#define ap_pcalloc apr_pcalloc\n#define ap_psprintf apr_psprintf\n#define ap_pstrcat apr_pstrcat\n#define ap_pstrdup apr_pstrdup\n#define ap_pstrndup apr_pstrndup\n#define ap_push_array apr_array_push\n#define ap_register_cleanup apr_pool_cleanup_register\n#define ap_snprintf apr_snprintf\n#define ap_table_add apr_table_add\n#define ap_table_do apr_table_do\n#define ap_table_get apr_table_get\n#define ap_table_set apr_table_set\n#define ap_table_setn apr_table_setn\n#define ap_table_unset apr_table_unset\n#endif\n------------ cut here -------------", "id": 100460, "time": "2007-03-16T01:59:12Z", "creator": "thes@mail.ru", "creation_time": "2007-03-16T01:59:12Z", "is_private": false}, {"count": 1, "tags": [], "text": "I'll leave this report open, because it's a popular module, and it doesn't hurt\nto have this documented in one more place.  But it demonstrates that mod_fastcgi\nhas issues with maintenance and support, and we should also mention the other\nfastcgi implementations:\n\nmod_fcgid - in widespread use, and more up-to-date\nmod_proxy_fcgi - in development within Apache.\n\nA perverse part of me wants to praise mod_fastcgi for taking a stand against\ngratuitous breakage of the API.  This report should have been called \"ap_compat\nlost\".  And a good fix for that would be a perl script to update all the\n\"compat\" functions in an old module.", "attachment_id": null, "id": 100461, "creator": "nick@webthing.com", "time": "2007-03-16T02:57:55Z", "bug_id": 41859, "creation_time": "2007-03-16T02:57:55Z", "is_private": false}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 100462, "time": "2007-03-16T03:10:48Z", "bug_id": 41859, "creation_time": "2007-03-16T03:10:48Z", "is_private": false, "text": "Those macros were never defined in httpd, they were defined in APR 0.9.x, and\nAPR 1.x/httpd 2.2 deliberately dropped any pretence at source-backwards-compat\nwith 1.3; this isn't a bug."}]