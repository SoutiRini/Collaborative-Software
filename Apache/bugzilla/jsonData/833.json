[{"count": 0, "text": "I'm using Tomcat 3.2.1 with JDK1.3, Xalan 2.0 and Cocoon 1.8.\nI've noticed that I can't get XSL extension namespaces to load from WEB-\nINF/classes, because Tomcat doesn't appear to include WEB-INF/classes in the \nclasspath for the classloader that gets assigned to ContextClassLoader for the \nexecution thread.\n\nI included a test jsp page that illustrates my point:\n\n--------------------------------------------------------------------------\n\n<%@page import=\"java.lang.*;\"%>\n<%\n// Set this variable to be a class in the WEB-INF/classes folder classpath\nString sClassName = \"net.substancemusic.xml.tags.XSLTagset\";\nClass clsTest1 = null;\ntry\n{\n  ClassLoader CCL = Thread.currentThread().getContextClassLoader();\n  clsTest1 = CCL.loadClass(sClassName);\n}\ncatch (ClassNotFoundException cnfe) {clsTest1 = null;}\n%>\nUsing ContextClassLoader:\n<% if (clsTest1 != null) { %>\n<%=clsTest1.toString()%>\n<% } else { %>\nnot found\n<% } %>\n<br/><br/>\n<%\nClass clsTest2 = null;\ntry {clsTest2 = Class.forName(sClassName);}\ncatch (ClassNotFoundException cnfe) {clsTest2 = null;}\n%>\nUsing Class.forName: \n<% if (clsTest2 != null) { %>\n<%=clsTest2.toString()%>\n<% } else { %>\nnull\n<% } %>\n\n-----------------------------------------------------------------------\n\nThe output of this page (on my setup) shows a not found for test 1 and a class \nname for test 2.\n\nPlease contact me if you need any further info.\n\nRegards,\n\nRick Knowles\nemail: rick_knowles@hotmail.com", "bug_id": 833, "is_private": false, "id": 960, "time": "2001-03-04T07:27:37Z", "creator": "rick_knowles@hotmail.com", "creation_time": "2001-03-04T07:27:37Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 833, "attachment_id": null, "text": "In Tomcat3.2.x you need to manually add the Jdk12Interceptor, \nin order to set the thread contextClassLoader ( the default config\nshould work on JDK1.1, where this method doesn't exists ).\n\nIn Tomcat3.3 we use a compat which detects the VM and sets it if 1.2 \npresent.\n\n", "id": 1042, "time": "2001-03-07T12:47:44Z", "creator": "cmanolache@yahoo.com", "creation_time": "2001-03-07T12:47:44Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 833, "attachment_id": null, "text": "I can't find any documentation on the use of the Jdk12Interceptor. Could you \npoint me in the direction of any useful reading on configuration (even \nparticular source classes) ? Thanks.", "id": 1086, "time": "2001-03-08T18:04:41Z", "creator": "rick_knowles@hotmail.com", "creation_time": "2001-03-08T18:04:41Z", "is_private": false}, {"count": 3, "tags": [], "creator": "rick_knowles@hotmail.com", "attachment_id": null, "id": 1087, "time": "2001-03-08T18:21:13Z", "bug_id": 833, "creation_time": "2001-03-08T18:21:13Z", "is_private": false, "text": "Sorry - it was really easy. The syntax is ....\n\n<RequestInterceptor className=\"org.apache.tomcat.request.Jdk12Interceptor\" \ndebug=\"0\" />\n\nfor those others of you who are in my position.\nPut this tag inside your <ContextManager> tags along with all the other \nRequestInterceptors.\n\nThanks Costin.\n"}]