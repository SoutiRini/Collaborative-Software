[{"count": 0, "tags": [], "bug_id": 45862, "text": "while executing a simple pdf generation from a servlet context, there is a problem of Stack oveflow, but if i do call the same transformation commands (the same as FOP site examples, but using saxon fo having xslt2 features) a standalone application it doesn't crash:\n\n\nStarting Helma in directory /home/kraken/REPOSITORY\nStarting HTTP server on port 8090\nStarting AJP13 listener on port 8009\nAdding to classpath: /home/kraken/REPOSITORY/lib/ext/saxon9sa.jar\nAdding to classpath: /home/kraken/REPOSITORY/lib/ext/xmlgraphics-commons.jar\nAdding to classpath: /home/kraken/REPOSITORY/lib/ext/fop.jar\nAdding to classpath: /home/kraken/REPOSITORY/lib/ext/avalon-framework.jar\nStarting Helma 1.6.2 (September 23 2008) on Java 1.5.0_13\n[2008/09/23 11:12:28] [INFO] Starting Helma 1.6.2 (September 23 2008) on Java 1.5.0_13\n[2008/09/23 11:12:28] [INFO] Setting Helma Home to /home/kororaa/REPOSITORY\n[2008/09/23 11:12:28] [INFO] Starting AJP13-Listener on port 0.0.0.0:8009\n[2008/09/23 11:12:28] [INFO] Version Jetty/5.1.14\n...\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.pdf.PDFRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.ps.PSRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.txt.TXTRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.bitmap.PNGRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.bitmap.TIFFRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.xml.XMLRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.awt.AWTRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.print.PrintRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.afp.AFPRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for Renderer: org.apache.fop.render.pcl.PCLRendererMaker\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding maker for FOEventHandler: org.apache.fop.render.rtf.RTFFOEventHandlerMaker\n[2008/09/23 12:03:11] [DEBUG] target-resolution set to: 72.0dpi (px2mm=0.35277778)\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding PDFImageHandler: org.apache.fop.render.pdf.PDFImageHandlerRawJPEG\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding PDFImageHandler: org.apache.fop.render.pdf.PDFImageHandlerRawCCITTFax\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding PDFImageHandler: org.apache.fop.render.pdf.PDFImageHandlerGraphics2D\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding PDFImageHandler: org.apache.fop.render.pdf.PDFImageHandlerRenderedImage\n[2008/09/23 12:03:11] [DEBUG] Dynamically adding PDFImageHandler: org.apache.fop.render.pdf.PDFImageHandlerXML\n[2008/09/23 12:03:11] [DEBUG] userconfig is null\n[2008/09/23 12:03:11] [DEBUG] Registering: any,normal,400 under F5\n[2008/09/23 12:03:11] [DEBUG] Registering: any,italic,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: any,oblique,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: any,normal,700 under F7\n[2008/09/23 12:03:11] [DEBUG] Registering: any,italic,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: any,oblique,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: sans-serif,normal,400 under F1\n[2008/09/23 12:03:11] [DEBUG] Registering: sans-serif,oblique,400 under F2\n[2008/09/23 12:03:11] [DEBUG] Registering: sans-serif,italic,400 under F2\n[2008/09/23 12:03:11] [DEBUG] Registering: sans-serif,normal,700 under F3\n[2008/09/23 12:03:11] [DEBUG] Registering: sans-serif,oblique,700 under F4\n[2008/09/23 12:03:11] [DEBUG] Registering: sans-serif,italic,700 under F4\n[2008/09/23 12:03:11] [DEBUG] Registering: SansSerif,normal,400 under F1\n[2008/09/23 12:03:11] [DEBUG] Registering: SansSerif,oblique,400 under F2\n[2008/09/23 12:03:11] [DEBUG] Registering: SansSerif,italic,400 under F2\n[2008/09/23 12:03:11] [DEBUG] Registering: SansSerif,normal,700 under F3\n[2008/09/23 12:03:11] [DEBUG] Registering: SansSerif,oblique,700 under F4\n[2008/09/23 12:03:11] [DEBUG] Registering: SansSerif,italic,700 under F4\n[2008/09/23 12:03:11] [DEBUG] Registering: serif,normal,400 under F5\n[2008/09/23 12:03:11] [DEBUG] Registering: serif,oblique,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: serif,italic,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: serif,normal,700 under F7\n[2008/09/23 12:03:11] [DEBUG] Registering: serif,oblique,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: serif,italic,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: monospace,normal,400 under F9\n[2008/09/23 12:03:11] [DEBUG] Registering: monospace,oblique,400 under F10\n[2008/09/23 12:03:11] [DEBUG] Registering: monospace,italic,400 under F10\n[2008/09/23 12:03:11] [DEBUG] Registering: monospace,normal,700 under F11\n[2008/09/23 12:03:11] [DEBUG] Registering: monospace,oblique,700 under F12\n[2008/09/23 12:03:11] [DEBUG] Registering: monospace,italic,700 under F12\n[2008/09/23 12:03:11] [DEBUG] Registering: Monospaced,normal,400 under F9\n[2008/09/23 12:03:11] [DEBUG] Registering: Monospaced,oblique,400 under F10\n[2008/09/23 12:03:11] [DEBUG] Registering: Monospaced,italic,400 under F10\n[2008/09/23 12:03:11] [DEBUG] Registering: Monospaced,normal,700 under F11\n[2008/09/23 12:03:11] [DEBUG] Registering: Monospaced,oblique,700 under F12\n[2008/09/23 12:03:11] [DEBUG] Registering: Monospaced,italic,700 under F12\n[2008/09/23 12:03:11] [DEBUG] Registering: Helvetica,normal,400 under F1\n[2008/09/23 12:03:11] [DEBUG] Registering: Helvetica,oblique,400 under F2\n[2008/09/23 12:03:11] [DEBUG] Registering: Helvetica,italic,400 under F2\n[2008/09/23 12:03:11] [DEBUG] Registering: Helvetica,normal,700 under F3\n[2008/09/23 12:03:11] [DEBUG] Registering: Helvetica,oblique,700 under F4\n[2008/09/23 12:03:11] [DEBUG] Registering: Helvetica,italic,700 under F4\n[2008/09/23 12:03:11] [DEBUG] Registering: Times,normal,400 under F5\n[2008/09/23 12:03:11] [DEBUG] Registering: Times,oblique,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: Times,italic,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: Times,normal,700 under F7\n[2008/09/23 12:03:11] [DEBUG] Registering: Times,oblique,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: Times,italic,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: Courier,normal,400 under F9\n[2008/09/23 12:03:11] [DEBUG] Registering: Courier,oblique,400 under F10\n[2008/09/23 12:03:11] [DEBUG] Registering: Courier,italic,400 under F10\n[2008/09/23 12:03:11] [DEBUG] Registering: Courier,normal,700 under F11\n[2008/09/23 12:03:11] [DEBUG] Registering: Courier,oblique,700 under F12\n[2008/09/23 12:03:11] [DEBUG] Registering: Courier,italic,700 under F12\n[2008/09/23 12:03:11] [DEBUG] Registering: Symbol,normal,400 under F13\n[2008/09/23 12:03:11] [DEBUG] Registering: ZapfDingbats,normal,400 under F14\n[2008/09/23 12:03:11] [DEBUG] Registering: Times-Roman,normal,400 under F5\n[2008/09/23 12:03:11] [DEBUG] Registering: Times-Roman,oblique,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: Times-Roman,italic,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: Times-Roman,normal,700 under F7\n[2008/09/23 12:03:11] [DEBUG] Registering: Times-Roman,oblique,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: Times-Roman,italic,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: Times Roman,normal,400 under F5\n[2008/09/23 12:03:11] [DEBUG] Registering: Times Roman,oblique,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: Times Roman,italic,400 under F6\n[2008/09/23 12:03:11] [DEBUG] Registering: Times Roman,normal,700 under F7\n[2008/09/23 12:03:11] [DEBUG] Registering: Times Roman,oblique,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: Times Roman,italic,700 under F8\n[2008/09/23 12:03:11] [DEBUG] Registering: Computer-Modern-Typewriter,normal,400 under F9\n[2008/09/23 12:03:11] [DEBUG] Building formatting object tree\n[2008/09/23 12:03:11] [DEBUG] Current heap size: 7229KB\n[2008/09/23 12:03:11] [DEBUG] Starting layout\n[2008/09/23 12:03:11] [DEBUG] [1]\n[2008/09/23 12:03:11] [DEBUG] PLM> flow BPD =792870\n[2008/09/23 12:03:11] [DEBUG] start of the next element list is: page=1 col=0\n[2008/09/23 12:03:11] [ERROR] null: java.lang.StackOverflowError\njava.lang.StackOverflowError\n\tat java.lang.ThreadLocal.get(ThreadLocal.java:125)\n\tat sun.misc.FloatingDecimal.developLongDigits(FloatingDecimal.java:312)\n\tat sun.misc.FloatingDecimal.dtoa(FloatingDecimal.java:549)\n\tat sun.misc.FloatingDecimal.(FloatingDecimal.java:442)\n\tat java.lang.StringBuffer.append(StringBuffer.java:365)\n\tat org.apache.fop.fo.properties.PercentLength.toString(PercentLength.java:121)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.fo.flow.table.TableColumn.toString(TableColumn.java:233)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.datatypes.LengthBase.toString(LengthBase.java:135)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.fo.properties.PercentLength.toString(PercentLength.java:121)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.fo.flow.table.TableColumn.toString(TableColumn.java:233)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.datatypes.LengthBase.toString(LengthBase.java:135)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.fo.properties.PercentLength.toString(PercentLength.java:121)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.fo.flow.table.TableColumn.toString(TableColumn.java:233)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.datatypes.LengthBase.toString(LengthBase.java:135)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.fo.properties.PercentLength.toString(PercentLength.java:121)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.fo.flow.table.TableColumn.toString(TableColumn.java:233)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.datatypes.LengthBase.toString(LengthBase.java:135)\n\tat java.lang.String.valueOf(String.java:2615)\n\tat java.lang.StringBuffer.append(StringBuffer.java:220)\n\tat org.apache.fop.fo.properties.PercentLength.toString(PercentLength.java:121)\n\tat java.lang.String.valueOf(String.java:2615)\n\t...\n\n\nIt seems a problem in the FOP library, or maybe a clash of some java classe in path.", "id": 120867, "attachment_id": null, "creator": "kunitoki@gmail.com", "creation_time": "2008-09-23T03:15:38Z", "time": "2008-09-23T03:15:38Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 45862, "attachment_id": null, "is_private": false, "id": 121037, "time": "2008-09-27T10:04:59Z", "creator": "adelmelle@apache.org", "creation_time": "2008-09-27T10:04:59Z", "text": "\nFWIW: This issue has already been fixed in FOP Trunk, see: \nhttp://svn.apache.org/viewvc?rev=670335&view=rev\n\nThe workaround in your case is to disable FOP's debug output, which will lead to TableColumn.toString() never being called (and is not meant to be set active in a production environment anyway)"}, {"count": 2, "tags": [], "bug_id": 45862, "attachment_id": null, "is_private": false, "id": 121043, "time": "2008-09-28T04:12:07Z", "creator": "kunitoki@gmail.com", "creation_time": "2008-09-28T04:12:07Z", "text": "how can i disable FOP debug output only without affecting the other libraries or the containers (for which i need the debug output) ?\n\nand anyway, disabling debug is sure meant in a production environment, but i usually work in development environment..."}, {"count": 3, "tags": [], "creator": "adelmelle@apache.org", "is_private": false, "id": 121044, "attachment_id": null, "bug_id": 45862, "creation_time": "2008-09-28T04:47:37Z", "time": "2008-09-28T04:47:37Z", "text": "(In reply to comment #2)\n> how can i disable FOP debug output only without affecting the other libraries\n> or the containers (for which i need the debug output) ?\n> \n\nDepends on what the concrete logging framework is that is used in your environment. FOP uses Jakarta Commons Logging, which by default uses standard JDK Logging (where you can definitely set the log-level on a per-package basis, i.e. level = INFO for everything in org.apache.fop and descendants)\n\nsee: http://xmlgraphics.apache.org/fop/0.95/embedding.html#basic-logging\n"}, {"count": 4, "tags": [], "bug_id": 45862, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155806, "time": "2012-04-01T06:41:53Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:41:53Z", "is_private": false, "attachment_id": null}]