[{"attachment_id": null, "tags": [], "creator": "dpo@delogix.de", "is_private": false, "count": 0, "id": 2753, "time": "2001-06-06T00:42:59Z", "bug_id": 2018, "creation_time": "2001-06-06T00:42:59Z", "text": "In server.xml we use another port numbers to startup and shutdown the server.\n\n<Server port=\"4705\" shutdown=\"SHUTDOWN\" debug=\"0\">\n...\n<Connector className=\"org.apache.catalina.connector.http.HttpConnector\"\n          port=\"4780\" minProcessors=\"5\" maxProcessors=\"75\"\n          enableLookups=\"true\" redirectPort=\"8443\"\n          acceptCount=\"10\" debug=\"0\" connectionTimeout=\"60000\"/>\n...\n\nWhen we shutdown the server, all the proceses goes down except one (the \nshutdown process - port 4705).\n\nTo restart the server we have to firts manually kill this process, and then \nrestart the server."}, {"count": 1, "tags": [], "creator": "craig.mcclanahan@sun.com", "text": "Cannot reproduce on RedHat 7.1.  Immediately after shutdown, all of the Java \nlines go away, and \"netstat\" shows a TIME_WAIT on port 4705, which eventually \ngoes away.  This is all normal behavior.\n\nDoes \"netstat\" show someone listening on port 4705 after the shutdown?  If so, \ntry using \"lsof\" or other tools to determine if it is really Tomcat.\n\nNOTE:  The \"java\" lines that ps shows under Linux are *not* processes; they are \nthreads.  Are you sure that you do not have some other Java process running, \nand/or some other process listening on the same port?\n", "id": 3226, "time": "2001-06-24T17:53:59Z", "bug_id": 2018, "creation_time": "2001-06-24T17:53:59Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Created attachment 252\nprocesses and netstat information", "attachment_id": 252, "bug_id": 2018, "id": 3234, "time": "2001-06-25T05:23:40Z", "creator": "dpo@delogix.de", "creation_time": "2001-06-25T05:23:40Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 2018, "text": "Hi Craig,\n\nI found out the is not always the shutdown port, it also happens with the \nstartup port.\nI tested the server with just 1 new context (one jsp and no libraries) and \nstill happening.\n\nI'm attaching some information, i hope this will help you debug the problem.\n", "id": 3235, "time": "2001-06-25T05:33:33Z", "creator": "dpo@delogix.de", "creation_time": "2001-06-25T05:33:33Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 2018, "attachment_id": null, "text": "Hi, \n\ni'm reopening the bug so you can read the attachment.", "id": 3311, "time": "2001-06-28T00:40:02Z", "creator": "dpo@delogix.de", "creation_time": "2001-06-28T00:40:02Z", "is_private": false}, {"count": 5, "tags": [], "creator": "craig.mcclanahan@sun.com", "attachment_id": null, "id": 3600, "time": "2001-07-10T17:21:59Z", "bug_id": 2018, "creation_time": "2001-07-10T17:21:59Z", "is_private": false, "text": "I note on your LSOF report that there is a TCP connection to port 4780 in state\nCLOSE.  This circumstance would cause the server socket to remain allocated,\nuntil the CLOSE is completed.  Thus, it's probably something wierd going on in\nthe operating system's TCP stack.\n\nOne potential cause for this is if the *server* side has closed the connection,\nbut the *client* side has not yet acknowledged it.\n"}, {"count": 6, "tags": [], "bug_id": 2018, "text": "Hi, \n\nI was using java version \"1.2.2\", Classic VM (build Linux_JDK_1.2.2_FCS, native \nthreads, sunwjit).\n\nI upgraded to the java version 1.3.1 and the problem is gone.\nI'm closing the case.\n\nThanks Craig.\n", "id": 3730, "time": "2001-07-16T01:02:33Z", "creator": "dpo@delogix.de", "creation_time": "2001-07-16T01:02:33Z", "is_private": false, "attachment_id": null}]