[{"attachment_id": null, "tags": [], "bug_id": 60699, "is_private": false, "count": 0, "id": 196799, "time": "2017-02-07T09:09:33Z", "creator": "egil@wp.pl", "creation_time": "2017-02-07T09:09:33Z", "text": "So below is a log line that was recorded recently by our Apache that serves a proxy for Tomcat. The third number is %D (\"The time taken to serve the request, in microseconds\").\n\n123.123.123.123 0 -656931 [01/Feb/2017:08:33:04 +0100] \"GET /api/reader?_dc=1485934382427&page=1&start=0&limit=25&sort=lastName&filter=... HTTP/1.1\" 200 681 \"Mozilla/5.0 (Windows NT 6.3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.111 Safari/537.36\"\n\nThere is another one from a different browser:\n\n123.123.123.124 0 -192246 - - [01/Feb/2017:07:59:27 +0100] \"GET /auth/... HTTP/2\" 302 - \"Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36\"\n\nSimilar time (date), but communication is to different servers (our proxy connects with AJP to several Tomcat servers).\n\nP.S.: Obviously I modified IP in the log, I also removed parts of URL."}, {"count": 1, "tags": [], "creator": "toscano.luca@gmail.com", "attachment_id": null, "text": "Hi Maciej,\n\ndoes it happens all the times for a particular request or once in a while? Have you found a way to reliable reproduce the issue?\n\nThanks!", "id": 198908, "time": "2017-05-27T07:27:58Z", "bug_id": 60699, "creation_time": "2017-05-27T07:27:58Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 60699, "is_private": false, "count": 2, "id": 198931, "time": "2017-05-28T12:14:35Z", "creator": "egil@wp.pl", "creation_time": "2017-05-28T12:14:35Z", "text": "No, unfortunately I don't know how to reproduce this. It just happens from time to time and is rare.\n\nI'm guessing this happens when the request is not completed and is in some weird state. But that's a pure guess. Would explain why it is rare thought."}, {"count": 3, "tags": [], "bug_id": 60699, "is_private": false, "text": "Is there anything relevant in the error log around the time of the log with negative %D? Can you add the full log format that you are using? I'd like to check what is the \"0\" value right after the IP address.\n\nAs far as I can see the issue seems present for both HTTP/2 and HTTP1.1, can you confirm ?", "id": 199045, "time": "2017-06-04T08:20:10Z", "creator": "toscano.luca@gmail.com", "creation_time": "2017-06-04T08:20:10Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "egil@wp.pl", "attachment_id": null, "text": "> Is there anything relevant in the error log \n> around the time of the log with negative %D?\n\nHaven't found any errors in logs.\n\nThere are also more requests from the same IP within seconds before and after the incident which show correct number for `%D`.\n\nSame is true for the second incident described.\n\n> Can you add the full log format that you are using?\n> I'd like to check what is the \"0\" value right after the IP address.\n\n0 is for time in seconds.\n\nFull config for the format:\nLogFormat \"%h %T %D %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n\n> As far as I can see the issue seems present for both HTTP/2 and HTTP1.1, \n> can you confirm ?\n\nYes, that's correct. And one is a static response (redirect) and another is after an AJAX request to API.", "id": 200391, "time": "2017-08-21T09:52:48Z", "bug_id": 60699, "creation_time": "2017-08-21T09:52:48Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 60699, "text": "Do you have an ntp daemon or chrony running? Or do you use a virtual machine with some virtual machine tools installed? I think it is possible that your clock got adjusted during the processing of your request.", "id": 200394, "time": "2017-08-21T10:49:30Z", "creator": "rpluem@apache.org", "creation_time": "2017-08-21T10:49:30Z", "is_private": false, "attachment_id": null}]