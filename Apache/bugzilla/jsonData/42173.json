[{"count": 0, "tags": [], "bug_id": 42173, "attachment_id": null, "id": 101938, "time": "2007-04-19T06:55:56Z", "creator": "alf@i100.no", "creation_time": "2007-04-19T06:55:56Z", "is_private": false, "text": "Currently, the HTTP Proxy does not take the encoding for the request it parses\ninto consideration. It just does a \"postData = line.toString()\", which uses the\ndefault JRE encoding.\n\nI suggest that the HTTP Proxy should keep track of the encoding of the pages and\nforms that it sees, and then use that encoding when decoding request to pages or\nforms, and set the content encoding on the sampler it creates.\n\nWhen the HTTP Proxy knows about the encoding, it can also decode parameter\nvalues which has been URL encoded by the browser, for example in HTTP GET and in\nHTTP Post application/x-www-form-urlencoded requests."}, {"count": 1, "tags": [], "text": "Created attachment 20003\nSuggested patch\n\nThis suggested patch adds two maps to the proxy Deamon class, so that the proxy\nserver can keep the page and form encodings it finds in a request, so it can be\nused in requests the proxy will see in the future. The access to these two maps\nare synchronized, since the deamon kicks off a Proxy on a separate thread for\neach incoming request.\n\nThe patch makes the HttpRequestHdr uses the encoding for the request / page /\nform, and then decodes the request body using that encoding, and then adds\nparameters undecoded where appriopriate to the sampler.", "attachment_id": 20003, "id": 101942, "creator": "alf@i100.no", "time": "2007-04-19T07:09:18Z", "bug_id": 42173, "creation_time": "2007-04-19T07:09:18Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 42173, "attachment_id": null, "id": 101959, "time": "2007-04-19T15:54:36Z", "creator": "sebb@apache.org", "creation_time": "2007-04-19T15:54:36Z", "is_private": false, "text": "Tried applying the patch, and it causes serveral NPEs and some other test \nfailures..."}, {"count": 3, "tags": [], "bug_id": 42173, "text": "(In reply to comment #2)\n> Tried applying the patch, and it causes serveral NPEs and some other test \n> failures...\n\nThanks for the comments. I will look into improving this patch. And I will try\nto convince myself that this patch is really needed, I am currently a bit\nskeptical if the functionality we gain is worth the extra complexity of the code.", "id": 102031, "time": "2007-04-22T08:36:16Z", "creator": "alf@i100.no", "creation_time": "2007-04-22T08:36:16Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 42173, "attachment_id": 20160, "is_private": false, "id": 103026, "time": "2007-05-10T03:15:46Z", "creator": "alf@i100.no", "creation_time": "2007-05-10T03:15:46Z", "text": "Created attachment 20160\nUpdated suggested patch\n\nPatch is now updated, fixed a couple of bugs, which caused unit tests to fail.\n\nThe patch is needed to support posting of forms with encoding UTF-8, when\nentering UTF-8 characters. Without this patch, you see only garbage in the test\nplan, and the data recieved from browser is then sent garbled from proxy to web\nserver.\n\nThe patch is nice to have, in that you get the values unencoded into the test\nplan, so it is easier to read for the test plan user."}, {"count": 5, "tags": [], "bug_id": 42173, "attachment_id": null, "id": 105036, "time": "2007-07-03T12:41:34Z", "creator": "sebb@apache.org", "creation_time": "2007-07-03T12:41:34Z", "is_private": false, "text": "Thanks - added to SVN in r552959/r552960"}]