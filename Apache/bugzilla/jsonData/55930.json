[{"count": 0, "tags": [], "creator": "chainhou@gmail.com", "attachment_id": 31153, "text": "Created attachment 31153\nin war file ,the servlet named indextest will sleep 60s\n\nHi,\nI find a bug of http bio connector,you will find it in flowing steps:\n\n1.set tomcat connector like this:\n    <Connector port=\"8080\" protocol=\"HTTP/1.1\" \n               connectionTimeout=\"20000\"\n               redirectPort=\"8443\" acceptCount=\"1\" maxThreads=\"1\" minSpareThreads=\"1\"/>\n\n2. deploy attach war file:test.war\n\n3. use LR or JMeter send 3 requests: http://localhost:8080/test/indextest \n\n4. use command jstack print current thread stack\n\nNOTE: now the main thread stack like this:\n\"main\" prio=6 tid=0x002aac00 nid=0x2e08 runnable [0x0025f000]\n   java.lang.Thread.State: RUNNABLE\n\tat java.net.PlainSocketImpl.socketAccept(Native Method)\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)\n\t- locked <0x242cbaa8> (a java.net.SocksSocketImpl)\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:462)\n\tat java.net.ServerSocket.accept(ServerSocket.java:430)\n\tat org.apache.catalina.core.StandardServer.await(StandardServer.java:452)\n\tat org.apache.catalina.startup.Catalina.await(Catalina.java:779)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:725)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)\n\nIt state is  RUNNABLE, not like xxxPark, it's not waiting for condition.\n\nIn another words, the main thread should not entering the ServerSoccket.accept() method when the backlog works. It must reject the request.", "id": 171923, "time": "2013-12-25T10:02:36Z", "bug_id": 55930, "creation_time": "2013-12-25T10:02:36Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 55930, "attachment_id": null, "is_private": false, "id": 171926, "time": "2013-12-25T15:42:02Z", "creator": "markt@apache.org", "creation_time": "2013-12-25T15:42:02Z", "text": "That thread has nothing to do with request handling.\n\nIf you require further explanations, please use the users mailing list."}]