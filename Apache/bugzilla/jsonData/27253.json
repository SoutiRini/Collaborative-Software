[{"count": 0, "tags": [], "bug_id": 27253, "attachment_id": null, "id": 53010, "time": "2004-02-26T14:23:57Z", "creator": "filippo.munafo@kion.it", "creation_time": "2004-02-26T14:23:57Z", "is_private": false, "text": "It seems that the ant jar (1.6) bundled with this version of tomcat (4.1.30) \ncreates a conflict that causes a strange exception calling the following method \nof Xalan (tested with Xalan 2.4D1 and latest 2.5.2):\n\norg.apache.xalan.xslt.EnvironmentCheck.checkEnvironment\n\nHere it is the stack trace (where XalanEnvCheck.java is our test class):\n\njava.lang.NoClassDefFoundError: org/apache/tools/ant/launch/AntMain\n\tat java.lang.ClassLoader.defineClass0(Native Method)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:488)\n\tat java.security.SecureClassLoader.defineClass\n(SecureClassLoader.java:106)\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:243)\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:51)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:190)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:183)\n\tat org.apache.catalina.loader.StandardClassLoader.findClass\n(StandardClassLoader.java:621)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:958)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:857)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:941)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:857)\n\tat org.apache.catalina.loader.WebappClassLoader.loadClass\n(WebappClassLoader.java:1429)\n\tat org.apache.catalina.loader.WebappClassLoader.loadClass\n(WebappClassLoader.java:1289)\n\tat org.apache.xml.utils.ObjectFactory.findProviderClass\n(ObjectFactory.java:387)\n\tat org.apache.xalan.xslt.EnvironmentCheck.checkAntVersion\n(EnvironmentCheck.java:1033)\n\tat org.apache.xalan.xslt.EnvironmentCheck.getEnvironmentHash\n(EnvironmentCheck.java:264)\n\tat org.apache.xalan.xslt.EnvironmentCheck.checkEnvironment\n(EnvironmentCheck.java:207)\n\tat webapp.XalanEnvCheck.doGet(XalanEnvCheck.java:26)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2422)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:163)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:199)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:828)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:700)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:584)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:683)\n\tat java.lang.Thread.run(Thread.java:479)"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "You need to add ant-launcher.jar to common/lib\n\nThe launcher classes have been placed in a separate jar from ant 1.6 onwards.\n\nI have patched the TC4 build scripts to copy this new file.", "id": 60380, "time": "2004-07-09T19:10:27Z", "bug_id": 27253, "creation_time": "2004-07-09T19:10:27Z", "is_private": false, "attachment_id": null}]