[{"count": 0, "tags": [], "creator": "vishy.kasar@borland.com", "text": "Oor QA engineer reported this against Tomcat embedded in Borland Enterprise \nServer. I am not sure if this is a dup or not. A bugzilla query did not show \nthe same bug. \n\nThere are two jsp files with same content but slightly differet XML syntax.  \none works correctly, the other one doesn't. The difference of those two files  \nis: \n\n<easy:myTag number=\"2\" power=\"3\">\n</easy:myTag>\n\n\nvs\n\n<easy:myTag number=\"2\" power=\"3\" />\n  \n\nThe first one works. \n\n\n\nBasically if the \"Bad\" one is being used, the function doAfterBody() is not \nbeing called even if the \"doStartTag()\" is returning  \"EVEL_BODY_INCLUDE\" \nvalue. \n\n\n\nA test case is attached, you can try by invoking:\nhttp://localhost:8080/Power/Good.jsp, or http://localhost:8080/Power/Bad.jsp", "id": 65212, "time": "2004-10-15T22:46:32Z", "bug_id": 31738, "creation_time": "2004-10-15T22:46:32Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "vishy.kasar@borland.com", "attachment_id": 13108, "id": 65213, "time": "2004-10-15T22:47:45Z", "bug_id": 31738, "creation_time": "2004-10-15T22:47:45Z", "is_private": false, "text": "Created attachment 13108\nThe Test.war file that shows the problem"}, {"count": 2, "tags": [], "bug_id": 31738, "attachment_id": null, "id": 65214, "creation_time": "2004-10-15T22:52:27Z", "time": "2004-10-15T22:52:27Z", "creator": "vishy.kasar@borland.com", "text": "\nOne quick way I could find to resolve the problem was to add a empty body like:\n\nif (reader.matches(\"/>\")) {\n\t    // EmptyElemTag ::= '<' Name ( S Attribute )* S? '/>'#\n\t    Node tagNode = new Node.CustomTag(attrs, start, tagName, prefix, \nshortTagName,\n\t\t\t       tagInfo, tagHandlerClass, parent);\n            // Changed code\n            tagNode.body = new Node.Nodes();\n\t    return true;\n\t}\n\n\nin  private boolean parseCustomTag(Node parent) of o.a.j.c.Parser.java.  There \ncould be other better ways.\n", "is_private": false}, {"count": 3, "tags": [], "bug_id": 31738, "attachment_id": null, "text": "DoAfterBody will not be called for actions with empty bodies.  For your first\ncase, the body contains a '\\n' and is considered non-empty, therefore\nDoAfterBody will be called.\n\nThis was not clearly stated in JSP 1.2 spec, though it was hinted at a couple of\nplaces.  This was clarified in JSP 2.0 spec.\n\n", "id": 65215, "time": "2004-10-15T23:42:59Z", "creator": "kin-man.chung@sun.com", "creation_time": "2004-10-15T23:42:59Z", "is_private": false}]