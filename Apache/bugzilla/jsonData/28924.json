[{"count": 0, "tags": [], "bug_id": 28924, "text": "Further to discussions on lenya-user, I would like to propose changes to the management of \nstylesheets, such that they can be edited and managed by Lenya just like any other resource.\n\nCSS resources must be edited using the single-form editor, unless custom CSS editor integrations are \nenvisaged. However, XSLT resources can be edited using the existing XML editor integrations and a \nsuitable Relax NG grammar for XSLT. James Clark's XSLT 1.0 RNG grammar from\n\n  http://www.thaiopensource.com/relaxng/xslt.rng\n\nis attached to this issue.", "id": 57277, "attachment_id": null, "creator": "chris@runtime-collective.com", "creation_time": "2004-05-12T11:25:43Z", "time": "2004-05-12T11:25:43Z", "is_private": false}, {"attachment_id": 11520, "tags": [], "creator": "chris@runtime-collective.com", "text": "Created attachment 11520\nXSLT 1.0 Relax NG grammar", "count": 1, "id": 57278, "time": "2004-05-12T11:26:38Z", "bug_id": 28924, "creation_time": "2004-05-12T11:26:38Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 28924, "attachment_id": null, "id": 57304, "time": "2004-05-12T21:54:06Z", "creator": "A.Kuckartz@ping.de", "creation_time": "2004-05-12T21:54:06Z", "is_private": false, "text": "The application of the appended patch should be considered for 1.2"}, {"count": 3, "tags": [], "bug_id": 28924, "text": "Need some more reflexions; go to 1.4", "id": 57413, "time": "2004-05-14T13:17:44Z", "creator": "edith@apache.org", "creation_time": "2004-05-14T13:17:44Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 28924, "text": "chris:\n\nare you still interested in this? if yes i would like to give this a shot soonish.", "id": 66005, "time": "2004-10-29T03:15:19Z", "creator": "gregor@apache.org", "creation_time": "2004-10-29T03:15:19Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 28924, "attachment_id": null, "id": 66028, "time": "2004-10-29T08:18:50Z", "creator": "chris@runtime-collective.com", "creation_time": "2004-10-29T08:18:50Z", "is_private": false, "text": "I don't actually have a requirement for this myself. I was just commenting on the architecture."}, {"count": 6, "tags": [], "bug_id": 28924, "text": "solprovider wrote on the mailing list:\n\n> All configuration files should be editable through the GUI.  Implement\n> security so content editors cannot ruin the site structure, but add\n> the ability to edit CSS, XSLTs, and maybe even XMAPs.  Try to remove\n> reasons anyone would need access to the file system.\n\n", "id": 75781, "attachment_id": null, "creator": "gregor@apache.org", "creation_time": "2005-06-02T04:54:04Z", "time": "2005-06-02T04:54:04Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 28924, "attachment_id": null, "id": 97635, "time": "2007-01-04T05:30:13Z", "creator": "nettings@apache.org", "creation_time": "2007-01-04T05:30:13Z", "is_private": false, "text": "i have implemented user-editable stylesheets recently for a customer project,\nand it worked out nicely.\nhaven't looked at edith's patch, but basically what i did was:\n* create an xslt doctype with the relax ng grammer edith pointed to\n* add a custom metadata field \"stylesheet\" to allow other doctypes to reference\na custom stylesheet\n* make it editable using DAV up/download.\n* tweak the sitemaps of the \"real document\" doctypes to look up custom xslts if\nspecified and use them."}, {"attachment_id": null, "tags": [], "creator": "nettings@apache.org", "text": "you can look at the module here:\nhttp://people.apache.org/~nettings/lenya-1.4-modules/xslt/\n\nin the sitemap of the document type that is to use editable xslts, i add this:\n\n      <map:match pattern=\"xmldb/*/*/*/*\">\n        <map:generate src=\"lenyadoc://{1}/{2}/{4}/{3}\"/>\n        <map:call resource=\"xmldb\"/>\n\n        <map:select type=\"parameter\">\n          <map:parameter name=\"parameter-selector-test\"\nvalue=\"{stylesheet:stylesheet}\"/>\n          <map:when test=\"\"/>\n          <map:otherwise>\n            <map:transform src=\"lenyadoc:/de/{stylesheet:stylesheet}\">\n              <map:parameter name=\"area\" value=\"{2}\"/>\n              <map:parameter name=\"pub-id\" value=\"{1}\"/>\n            </map:transform>\n          </map:otherwise>\n        </map:select>\n\nas you can see, i'm using a custom metadata field. it is declared in an xconf\npatchfile in my publication:\n\n<xconf\n    xpath=\"/cocoon/meta-data\"\n    remove=\"/cocoon/meta-data/component-instance[@name =\n'http://whatever.org/meta']\"\n>\n  <component-instance name=\"http://stackingdwarves.net/meta\"\n    class=\"org.apache.lenya.cms.metadata.ConfigurableElementSet\">\n    <element editable=\"true\" name=\"stylesheet\" multiple=\"false\"/>\n  </component-instance>\n</xconf>\n\nthis could also be done by the module, but i felt uneasy about a module patching\na publication's metadata setup. but on second thought, it's probably ok and it\nkeeps everything in one place.\n\n", "count": 8, "id": 97636, "time": "2007-01-04T06:15:37Z", "bug_id": 28924, "creation_time": "2007-01-04T06:15:37Z", "is_private": false}]