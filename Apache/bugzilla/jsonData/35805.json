[{"count": 0, "tags": [], "creator": "admin@premiere-heure.fr", "attachment_id": null, "text": "I thought something was missing in mod_auth_ldap to authenticate users based\nfully on ldap without having to wrote a directory context for each user.\n\nIt's based on the require statement :\n\nrequire directory-attribute <name-of-attribute>\n\nThe value of this attribute will be compare to the directory that is requested,\nso we can have something like this :\n\nAlias /private /home/www/private\n<Directory /home/www/private>\n    Options MultiViews Indexes\n\n    AuthAuthoritative Off\n    AuthType Basic\n    AuthName \"Private Zone\"\n    AuthLDAPUrl ldap://127.0.0.1:389/ou=goodou,dc=com?uid?sub?\n    AuthLDAPBindDN uid=gooduid,dc=com\n    AuthLDAPBindPassword secret\n    require directory-attribute homeDirectory\n\n    <Limit GET>\n            Order Deny,Allow\n            Allow from All\n    </Limit>\n</Directory>\n\n\nAnd have private access per directory and per users without changing the\nhttpd.conf, everything we need is in the ldap tree.", "id": 77467, "time": "2005-07-20T18:35:21Z", "bug_id": 35805, "creation_time": "2005-07-20T18:35:21Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 35805, "attachment_id": 15720, "text": "Created attachment 15720\nPatch for require directory-attribute\n\nNot a big deal, mainly some copy/paste from the require statement upward\n(require ldap-attribute), but I'm a casual coder so I certainly made some\nmistake, etc...\n\nThis patch work pretty good for me, tell me if it can go live with some more\ntests and if you consider this of any interest :)", "id": 77468, "time": "2005-07-20T18:40:20Z", "creator": "admin@premiere-heure.fr", "creation_time": "2005-07-20T18:40:20Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 35805, "attachment_id": null, "text": "Can't you already do the same thing with \"require ldap-filter (<attr-name>=*)\"?", "id": 77469, "time": "2005-07-20T19:50:09Z", "creator": "bnicholes@apache.org", "creation_time": "2005-07-20T19:50:09Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 35805, "attachment_id": null, "id": 77486, "time": "2005-07-21T09:54:51Z", "creator": "admin@premiere-heure.fr", "creation_time": "2005-07-21T09:54:51Z", "is_private": false, "text": "(In reply to comment #2)\n> Can't you already do the same thing with \"require ldap-filter (<attr-name>=*)\"?\n\nWell perhaps I missed something but for me you can't have some dynamic value for\nthe attribute in this case.\n\nI mean you can have \"require ldap-filter (homeDirectory=/home/myhome)\" but in\nthis case you need one entry in the httpd.conf for each user OR every user can\nenter every home with something like \"require ldap-filter (homeDirectory=/home/*)\".\n\nWhat I propose is something more dynamic, you don't specify a directory but just\nthe name of the attribute you want to compare the directory to, then the value\nof the attribute from LDAP is compare with the value from the request that is\ndependant on the uri, etc...\n"}, {"count": 4, "tags": [], "bug_id": 35805, "text": "I think we could make something more generic based on some environment variable\nfor the ldap filter, but I'm not good enough for that...\n\n\nAs an exemple just like this for LDAP filter ->\n\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=31332\n\nSomething where we can put ->\nrequire ldap-filter homeDirectory=%{directory}\nor directly in the AuthLdapURL filter.\n\nBy the way do we have access to some variable in the httpd.conf like for exemple\nthe authentification name, the directory, the uri or anything else from the\nrequest ??", "id": 77487, "time": "2005-07-21T10:07:58Z", "creator": "admin@premiere-heure.fr", "creation_time": "2005-07-21T10:07:58Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 35805, "attachment_id": null, "id": 80157, "time": "2005-09-20T10:19:35Z", "creator": "admin@premiere-heure.fr", "creation_time": "2005-09-20T10:19:35Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 31352 ***"}]