[{"count": 0, "tags": [], "bug_id": 48625, "text": "Due to Catalina startup logic, server startup in illegal state is possible.\nFor expamle, the concurrent process takes the socket in use, because of sysadmin error, or something else.\nWe started server, the server ignored the socket binding error, startup succes,\nbut isn't working yet.\nIn my opinion, the \"system errors\" (sockets, filesystems,...etc) should\nabort the startup process, to ensure the server was started in right state.\nIf server silently ignores the errors, the sysadmin can miss the error,\nand production system can be broken.\n\nSocket binding error example:\n....\n[2010-01-26 19:09:26] [main ERROR coyote.http11.Http11Protocol] - Error starting endpoint\njava.net.BindException: Address already in use: JVM_Bind /0.0.0.0:8001\n\tat org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:511)\n\tat org.apache.tomcat.util.net.JIoEndpoint.start(JIoEndpoint.java:526)\n\tat org.apache.coyote.http11.Http11Protocol.start(Http11Protocol.java:203)\n....\n\n\nSee Catalina.java:585\n\n    public void start() {\n....\n        if (server instanceof Lifecycle) {\n            try {\n                ((Lifecycle) server).start();\n            } catch (LifecycleException e) {\n                log.error(\"Catalina.start: \", e);\n                // !!!! exception ignored !!!!!!, server continued to start in broken state\n            }\n        }\n....\n            log.info(\"Server startup in \" + ((t2 - t1) / 1000000) + \" ms\");\n}", "id": 133955, "time": "2010-01-26T08:30:09Z", "creator": "romanvt@inbox.ru", "creation_time": "2010-01-26T08:30:09Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 48625, "text": "This was feature was implemented in Tomcat 7 some time ago. I have proposed back porting it to 6.0.x", "count": 1, "id": 134056, "time": "2010-01-31T03:00:27Z", "creator": "markt@apache.org", "creation_time": "2010-01-31T03:00:27Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 48625, "attachment_id": null, "is_private": false, "id": 134635, "time": "2010-02-18T10:04:42Z", "creator": "markt@apache.org", "creation_time": "2010-02-18T10:04:42Z", "text": "The patch has been applied to trunk and will be included in 6.0.25 onwards."}]