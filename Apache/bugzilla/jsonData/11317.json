[{"count": 0, "tags": [], "bug_id": 11317, "text": "Hello,\n \nBinaries & the source code has been picked up from the following site: \nhttp://xml.apache.org/security/dist/  dated 15 July 2002.\n \nThe samples for soap security that has been provided for signing & verifying \nthe digital signatures are not correct.There is a possible problem in the \nApache Axis implementation for SOAP Security.\n \nIs there any new version of the same available. ??????\n \nJustification for the same is as Under:\n \nFollowing is the output of the code \norg.apache.xml.security.samples.signature.CreateSignature  when  Run.\n________________________________\n \nStart signing\n<SignatureMethod xmlns=\"http://www.w3.org/2000/09/xmldsig#\" xmlns:SOAP-\nSEC=\"http://schemas.xmlsoap.org/soap/security/2000-12\"        \n                            xmlns:env=\"http://www.w3.org/2001/12/soap-envelope\" \nAlgorithm=\"http://www.w3.org/2000/09/xmldsig#dsa-sha1\">\n</SignatureMethod>\n\nData for calculating digest >: \n \n<env:Envelope xmlns:env=\"http://www.w3.org/2001/12/soap-envelope\" \nenv:mustUnderstand=\"1\" env:actor=\"some-uri\">\n        <env:Header xmlns:SOAP-\nSEC=\"http://schemas.xmlsoap.org/soap/security/2000-12\" \nxmlns:env=\"http://www.w3.org/2001/12/soap-envelope\">\n                <SOAP-SEC:Signature></SOAP-SEC:Signature>\n        </env:Header>\n        <env:Body xmlns:SOAP-SEC=\"http://schemas.xmlsoap.org/soap/security/2000-\n12\" xmlns:env=\"http://www.w3.org/2001/12/soap-envelope\" SOAP-SEC:id=\"Body\">\n                This is signed together with it's Body ancestor\n        </env:Body>\n</env:Envelope>\n\nSigned octects ==>\n \n<SignedInfo xmlns=\"http://www.w3.org/2000/09/xmldsig#\" xmlns:SOAP-\nSEC=\"http://schemas.xmlsoap.org/soap/security/2000-12\" \nxmlns:env=\"http://www.w3.org/2001/12/soap-envelope\">\n          <CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-\nc14n-20010315\"></CanonicalizationMethod>\n          <SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#dsa-\nsha1\">\n</SignatureMethod>\n\n<Reference URI=\"\">\n<Transforms>\n            <Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-\nsignature\"></Transform>\n            <Transform Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-\n20010315#WithComments\"></Transform>\n</Transforms>\n<DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\">  \n</DigestMethod>\n<DigestValue>74lJQoR33H+5SXJIgcytgKmsdl0=</DigestValue>\n</Reference>\n</SignedInfo>\n\nFinished signing\nWrote signature to file:/D:/jbuilderproject/projects/xmlsecurity/signatureY.xml\n \nFollowing is the output of the code \norg.apache.xml.security.samples.signature.VerifySignature  when  Run.\n________________________________\n \norg.apache.xml.security.samples.signature.VerifySignature \nTry to verify file:/D:/jbuilderproject/projects/xmlsecurity/signatureY.xml\nCould find a X509Data element in the KeyInfo\nI try to verify the signature using the X509 Certificate: [\n[\n  Version: V1\n  Subject: CN=Christian Geuer-Pollmann, OU=FB12NUE, O=University of Siegen, C=DE\n  Signature Algorithm: SHA1withDSA, OID = 1.2.840.10040.4.3\n \n  Key:  Sun DSA Public Key\n    Parameters:DSA\n p:     fd7f5381 1d751229 52df4a9c 2eece4e7 f611b752 3cef4400 c31e3f80 b6512669\n    455d4022 51fb593d 8d58fabf c5f5ba30 f6cb9b55 6cd7813b 801d346f f26660b7\n    6b9950a5 a49f9fe8 047b1022 c24fbba9 d7feb7c6 1bf83b57 e7c6a8a6 150f04fb\n    83f6d3c5 1ec30235 54135a16 9132f675 f3ae2b61 d72aeff2 2203199d d14801c7\n q:     9760508f 15230bcc b292b982 a2eb840b f0581cf5 \n g:     f7e1a085 d69b3dde cbbcab5c 36b857b9 7994afbb fa3aea82 f9574c0b 3d078267\n    5159578e bad4594f e6710710 8180b449 167123e8 4c281613 b7cf0932 8cc8a6e1\n    3c167a8b 547c8d28 e0a3ae1e 2bb3a675 916ea37f 0bfa2135 62f1fb62 7a01243b\n    cca4f1be a8519089 a883dfe1 5ae59f06 928b665e 807b5525 64014c3b fecf492a\n \n  y:\n    1259f9fe 1b593f9d 69ed8fd8 d7ecd939 24a6a22d 9f412d1d 7a789271 a9f7f7dd\n    31cb7dd1 acf7c5e6 876a1159 9561f4f3 15f284cf de1a5171 18a98d95 1954422a\n    b0194e19 354b0a0e 07e5327c d4958e8a 9ae1fa69 210a536a 52bf25e4 7bbb1414\n    af401ea2 9ebc9ebd aee3d1a2 8d888bca f2f7c74e 2519a67c 8d46192f 78194cd2\n \n  Validity: [From: Tue May 01 08:20:58 EDT 2001,\n               To: Sun Oct 22 08:20:58 EDT 2006]\n  Issuer: CN=Christian Geuer-Pollmann, OU=FB12NUE, O=University of Siegen, C=DE\n  SerialNumber: [    3aeeaa2a ]\n \n]\n  Algorithm: [SHA1withDSA]\n  Signature:\n0000: 30 2C 02 14 3C 37 7F 52   60 7D 19 E1 EA BC 68 E7  0,..<7.R`.....h.\n0010: CB 7D 01 BE 3B 74 02 45   02 14 0F 5A 6F BD A4 2A  ....;t.E...Zo..*\n0020: E0 79 81 E6 06 79 C9 1B   06 B7 20 3E 76 64        .y...y.... >vd\n \n]\n\nDigest values ==> \n \n<DigestValue xmlns=\"http://www.w3.org/2000/09/xmldsig#\" xmlns:SOAP-\nSEC=\"http://schemas.xmlsoap.org/soap/security/2000-12\" \n                    xmlns:env=\"http://www.w3.org/2001/12/soap-\nenvelope\">74lJQoR33H+5SXJIgcytgKmsdl0=</DigestValue>\n\nElem Dig ==> \u00ef\u2030IB\u201ew\u00dc\u007f\u00b9IrH?\u00cc\u00ad\u20ac\u00a9\u00acv]\n\nData for calculating digest >: \n \n<env:Envelope xmlns:SOAP-SEC=\"http://schemas.xmlsoap.org/soap/security/2000-12\" \nxmlns:env=\"http://www.w3.org/2001/12/soap-envelope\" env:actor=\"some-uri\" \nenv:mustUnderstand=\"1\">\n        <env:Header><SOAP-SEC:Signature></SOAP-SEC:Signature></env:Header>\n        <env:Body SOAP-SEC:id=\"Body\">This is signed together with it's Body \nancestor</env:Body>\n</env:Envelope>\n\nCalcDig ==> \n \n\u0153\u00d7b\u00a4\u00ae\u00db\u201a'S\u0160(\u00a1k\u00c7L\u00a9\u00bc\u0017\u00e77\nThe XML signature in file \nfile:/D:/jbuilderproject/projects/xmlsecurity/signatureY.xml is invalid !!!!! \n(bad)\n \nFormat of the Message Digest:\n \nData for calculating digest >:\n \n<env:Envelope xmlns:env=\"http://www.w3.org/2001/12/soap-envelope\" \nenv:mustUnderstand=\"1\" env:actor=\"some-uri\">\n            <env:Header xmlns:SOAP-\nSEC=\"http://schemas.xmlsoap.org/soap/security/2000-12\" \nxmlns:env=\"http://www.w3.org/2001/12/soap-envelope\">\n                    <SOAP-SEC:Signature></SOAP-SEC:Signature>\n            </env:Header>\n            <env:Body xmlns:SOAP-\nSEC=\"http://schemas.xmlsoap.org/soap/security/2000-12\" \nxmlns:env=\"http://www.w3.org/2001/12/soap-envelope\" SOAP-SEC:id=\"Body\">\n                    This is signed together with it's Body ancestor\n            </env:Body>\n</env:Envelope>\n\nFormat of the Message Digest:\n \nData for calculating digest >: \n \n<env:Envelope xmlns:SOAP-SEC=\"http://schemas.xmlsoap.org/soap/security/2000-12\" \nxmlns:env=\"http://www.w3.org/2001/12/soap-envelope\" env:actor=\"some-uri\" \nenv:mustUnderstand=\"1\">\n            <env:Header>\n                    <SOAP-SEC:Signature></SOAP-SEC:Signature>\n            </env:Header>\n            <env:Body SOAP-SEC:id=\"Body\">\n                    This is signed together with it's Body ancestor\n            </env:Body>\n</env:Envelope>\n \nFrom the above 2 formats we can make out that the 2 formats for the message \ndigest are completely different signature created will never be verified.\n \nI hope I have been clear in explaining the problem.\nAny help will be greatly appreciated.\n \nThanks,\nChetan.", "id": 20457, "time": "2002-07-31T06:40:27Z", "creator": "cjain75@rediffmail.com", "creation_time": "2002-07-31T06:40:27Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 11317, "is_private": false, "count": 1, "id": 20460, "time": "2002-07-31T07:26:12Z", "creator": "geuer-pollmann@nue.et-inf.uni-siegen.de", "creation_time": "2002-07-31T07:26:12Z", "text": "This is not the xml-axis project but the xml-security project. I found this bug \nreport only by accident.\n\nChristian"}, {"count": 2, "tags": [], "creator": "geuer-pollmann@nue.et-inf.uni-siegen.de", "is_private": false, "id": 20461, "creation_time": "2002-07-31T07:32:59Z", "time": "2002-07-31T07:32:59Z", "bug_id": 11317, "text": "Under <http://xml.apache.org/security/dist/> is version v1.0.4 of the package. \nIt's the latest version of the package. Both \n\nsamples.signature.CreateSignature \nsamples.signature.VerifySignature \n\ndo their job. Did you mess around in the source? utput is the following:\n\n----------------------\n\norg.apache.xml.security.samples.signature.CreateSignature \nStart signing\nFinished signing\nWrote signature to file:/C:/Dokumente und \nEinstellungen/Administrator/EigeneDateien/WEBSIG/java/lib/xml-\nsecurity/signature.xml\n\n----------------------\n\norg.apache.xml.security.samples.signature.VerifySignature \nTry to verify file:/C:/Dokumente und \nEinstellungen/Administrator/EigeneDateien/WEBSIG/java/lib/xml-\nsecurity/signature.xml\nCould find a X509Data element in the KeyInfo\nThe XML signature in file file:/C:/Dokumente und \nEinstellungen/Administrator/EigeneDateien/WEBSIG/java/lib/xml-\nsecurity/signature.xml is valid (good)\n\n----------------------\n\nThe SOAP stuff which you mention is not in these samples....\n\n\nChristian", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 11317, "attachment_id": null, "id": 20474, "time": "2002-07-31T12:34:49Z", "creator": "geuer-pollmann@nue.et-inf.uni-siegen.de", "creation_time": "2002-07-31T12:34:49Z", "is_private": false, "text": "Uuh, I was in DOM1 hell ;-)) and did not practise what I preached. The examples \nlike AxisSigner did use the non-namespace-aware createElement() calls from DOM1 \nand not the one-and-only DOM2 calls with namespace awarness. \n\nFixed in CVS now, AxisSigner and AxisVerifier work now, thanks for your hint, \nChetan.\n\nPlease note that I called them Axis..., which is a little bit misleading, \nbecause they do not use Axis. They were small snippets for the axis team to \nshow how the software can be used. The *real* axis code is in the \nsamples/security directory on the axis distro.\n\n\nChristian"}, {"count": 4, "tags": [], "text": "As said by u that the bug for AxisVerifier & AxisSigner has been fixed & \nuploaded in the CVS, but I could not find any updates done to the CVS \nrepository. I guess I am checking at the correct link which is    \n                 http://xml.apache.org/security/dist/ \nIf not then pls specify me the link wherein I can find the same.\nThanks for UR prompt reply Christian, I do appreciate that.\n\nChetan.\n", "is_private": false, "id": 20510, "creator": "cjain75@rediffmail.com", "time": "2002-08-01T05:40:39Z", "bug_id": 11317, "creation_time": "2002-08-01T05:40:39Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 11317, "is_private": false, "count": 5, "id": 20518, "time": "2002-08-01T07:46:46Z", "creator": "geuer-pollmann@nue.et-inf.uni-siegen.de", "creation_time": "2002-08-01T07:46:46Z", "text": "No, the link you mention is the dist/ directory where you can get packed \ndistributions (which have version numbers).\n\nWhen people refer to currentCVS, this is - well, CVS ;-)) The directory is here \n[1], the contents of the file is here [2], and the manual for CVS is here [3].\n\n\n[1] <http://cvs.apache.org/viewcvs.cgi/xml-\nsecurity/src_samples/org/apache/xml/security/samples/>\n\n[2] <http://cvs.apache.org/viewcvs.cgi/xml-\nsecurity/src_samples/org/apache/xml/security/samples/AxisSigner.java?\nrev=1.4&content-type=text/vnd.viewcvs-markup>\n\n[3] <http://xml.apache.org/cvs.html>"}, {"attachment_id": null, "tags": [], "bug_id": 11317, "is_private": false, "count": 6, "id": 91933, "time": "2006-08-06T17:11:04Z", "creator": "raul-info@r-bg.com", "creation_time": "2006-08-06T17:11:04Z", "text": "Closing all bugs."}]