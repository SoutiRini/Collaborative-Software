[{"count": 0, "tags": [], "bug_id": 42644, "attachment_id": null, "is_private": false, "id": 104345, "time": "2007-06-12T08:40:11Z", "creator": "kevin.troy@digitary.net", "creation_time": "2007-06-12T08:40:11Z", "text": "We're migrating a working web application from Java 1.4.2 to Java 1.5.\nOur 1.4.2 application used xmlsec-1.2.1 and worked fine. We've upgraded\nto xmlsec-1.4.1 in the process and we have encountered a problem that\noccurs when we try to sign/verify multiple documents with the same key\npair:\n\nConsider a scenario when multiple XML documents need to be signed and\nverified with the same key pair. (The verification is just to confirm\nthat signing worked). Therefore, for a given KeyPair instance, we do the\nfollowing on each iteration:\n\n1. XMLSignature sig = new XMLSignature(....);\n2. Sign XML document with PrivateKey\n3. Verify XML document with PublicKey (sanity check)\n\nThe problem occurs on the second iteration. It appears that, because we\nare using the same PrivateKey to sign on each iteration, the code\nremains initialised for verification (a result of step 3 above), and is\nnot re-initialised for signing as it is using a cached Private Key.\n\nWe were unable to find an API call to resolve this. We made changes to\nSignatureAlgorithm::initSign(Key) and\nSignatureAlgorithm::initVerify(Key) so that cached keys were no longer\nused. We are therefore always calling the engineInitSign(Key) and\nengineInitVerify(Key) on the SignatureAlgorithm implementation."}, {"count": 1, "tags": [], "bug_id": 42644, "is_private": false, "text": "Created attachment 20334\nClass highlighting problem when signing/verify a doc and then signing new doc\n\nThis file copies the format used in \"CreateSignature.java\" which is part of the\nxmlsec1.4.1-src, dir -> src_samples\\org\\apache\\xml\\security\\samples\\signature", "id": 104346, "time": "2007-06-12T08:48:55Z", "creator": "kevin.troy@digitary.net", "creation_time": "2007-06-12T08:48:55Z", "attachment_id": 20334}, {"count": 2, "tags": [], "creator": "raul-info@r-bg.com", "text": "Please, for your own safety not use a object created for signing to verify it.\nIt should work or not. We still inherit a lot of code from the old times where\nthe objects create for signing cannot use to verify. If you want to test the\nverification, serialize it and deserialize it.", "id": 109387, "time": "2007-10-16T03:57:55Z", "bug_id": 42644, "creation_time": "2007-10-16T03:57:55Z", "is_private": false, "attachment_id": null}]