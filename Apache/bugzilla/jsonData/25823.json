[{"count": 0, "tags": [], "bug_id": 25823, "attachment_id": null, "id": 49849, "time": "2003-12-30T15:51:16Z", "creator": "ufferoenne@hotmail.com", "creation_time": "2003-12-30T15:51:16Z", "is_private": false, "text": "Hi all\n\nI have a major problem persisting sessions (HttpSession) on the mentioned \nplatform. Here is an example:\n\nsession.setAttribute(\"Test\",\"Test\");\n\nWhen I reload the browser the \"Test\" attribute is gone.\n\nThis problem arose when I put on Service Pack 1 for Win XP.\n\nHere is a short introduction to my webapp architecture:\n\n- I have an apache 1.3 installed, with mod_jk.\n- I have implemented a frontcontroller pattern. One servlet receives all \nrequests and forwards them, depending on a set of rules, to a jsp page.\n\nAs mentioned earlier. It all works fine in other browsers for example Mozilla. \nBut not in Explorer 6.0 on WinXP sp1.\n\nFrom server.xml:\n\n      <Host name=\"ny_kww\" debug=\"0\" appBase=\"webapps\" unpackWARs=\"true\">\n        <Logger className=\"org.apache.catalina.logger.FileLogger\"\n          directory=\"logs\" prefix=\"uffe_kww.\" suffix=\".log\" timestamp=\"true\"/>\n\n\n\n\n        <Context path=\"\" docBase=\"kww\" debug=\"0\" reloadable=\"true\" \ncrossContext=\"true\">\n\n          <Resource name=\"jdbc/KWW\" auth=\"Container\" \ntype=\"javax.sql.DataSource\"/>\n\n          <ResourceParams name=\"jdbc/KWW\">\n          <parameter>\n          <name>factory</name>\n          <value>org.apache.commons.dbcp.BasicDataSourceFactory</value>\n          </parameter>\n\n          <!-- Maximum number of dB connections in pool. Make sure you\n          configure your mysqld max_connections large enough to handle\n          all of your db connections. Set to 0 for no limit.\n          -->\n          <parameter>\n          <name>maxActive</name>\n          <value>100</value>\n          </parameter>\n\n          <!-- Maximum number of idle dB connections to retain in pool.\n          Set to 0 for no limit.\n          -->\n          <parameter>\n          <name>maxIdle</name>\n          <value>30</value>\n          </parameter>\n\n          <!-- Maximum time to wait for a dB connection to become available\n          in ms, in this example 10 seconds. An Exception is thrown if\n          this timeout is exceeded.  Set to -1 to wait indefinitely.\n          -->\n          <parameter>\n          <name>maxWait</name>\n          <value>10000</value>\n          </parameter>\n\n          <!-- MySQL dB username and password for dB connections  -->\n          <parameter>\n          <name>username</name>\n          <value>scott</value>\n          </parameter>\n          <parameter>\n          <name>password</name>\n          <value>tiger</value>\n          </parameter>\n          <!-- Class name for mm.mysql JDBC driver -->\n          <parameter>\n          <name>driverClassName</name>\n          <value>org.gjt.mm.mysql.Driver</value>\n          </parameter>\n\n          <!-- The JDBC connection url for connecting to your MySQL dB.\n          The autoReconnect=true argument to the url makes sure that the\n          mm.mysql JDBC Driver will automatically reconnect if mysqld closed the\n          connection.  mysqld by default closes idle connections after 8 hours.\n          -->\n          <parameter>\n          <name>url</name>\n          <value>jdbc:mysql://localhost:3306/database?autoReconnect=true</value>\n          </parameter>\n          </ResourceParams>\n\n\n\n        </Context>\n      </Host>\n\nFrom web.xml:\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\n<!DOCTYPE web-app\n    PUBLIC \"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n    \"http://java.sun.com/dtd/web-app_2_3.dtd\">\n\n<web-app>\n  <servlet>\n    <servlet-name>front</servlet-name>\n    <servlet-class>FrontController</servlet-class>\n  </servlet>\n  <servlet-mapping>\n  \t<servlet-name>front</servlet-name>\n    <url-pattern>/request/*</url-pattern>\n  </servlet-mapping>\n  \n  \n  <taglib>\n    <taglib-uri>/render-taglib</taglib-uri>\n    <taglib-location>/WEB-INF/tlds/render-taglib.tld</taglib-location>\n  </taglib>  \n  <taglib>\n    <taglib-uri>/navigation-taglib</taglib-uri>\n    <taglib-location>/WEB-INF/tlds/navigation-taglib.tld</taglib-location>\n  </taglib>    \n  <taglib>\n    <taglib-uri>/channel-taglib</taglib-uri>\n    <taglib-location>/WEB-INF/tlds/channel-taglib.tld</taglib-location>\n  </taglib>      \n  <resource-ref>\n\t <description>My SQL Datasource for kww</description>\n\t <res-ref-name>jdbc/KWW</res-ref-name>\n\t <res-type>javax.sql.DataSource</res-type>\n\t <res-auth>Container</res-auth>\n  </resource-ref>  \n  \n</web-app>"}, {"count": 1, "tags": [], "bug_id": 25823, "text": "IE is probably blocking cookies. (Or broke)", "id": 49851, "time": "2003-12-30T16:30:02Z", "creator": "funkman@joedog.org", "creation_time": "2003-12-30T16:30:02Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 25823, "text": "It probably is, but the funny thing is that it doesn't block cookies from other \nsites. If I set up a dummy webapp, without apache and the frontcontroller \npattern, the session handling works fine. \n\nWhat could be wrong with the IE setup then?", "id": 49864, "time": "2003-12-30T20:47:09Z", "creator": "ufferoenne@hotmail.com", "creation_time": "2003-12-30T20:47:09Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "text": "You'll need to debug where tomcat seems to be failing. (sniffing the headers and\nsuch) It could be that apache is mangling the cookie in some manner that tomcat\nstandalone isn't. (Which I doubt)\n\nPlease use the tomcat-user group for assistance for furthur debugging. Reopen\nonce a concrete reason as to why it is not working with IE.", "id": 49868, "time": "2003-12-30T21:06:32Z", "bug_id": 25823, "creation_time": "2003-12-30T21:06:32Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 25823, "text": "Hi,\nwe have also the problem, but only on our Dev-Env. In Prod.Env it works. On IE\n6.0 we could not hold a Session cookie. \nA workaround is installing the actual JRE on the client were the IE is runing !!!?\n\nHere are the diff between Dev. and Prod. Env:\n\nbr>sun.boot.library.path=/opt/j2sdk1.4.2/jre/lib/i386 \n<br>java.vm.version=1.4.2-b28\n\n<br>sun.boot.library.path=/usr/java/j2sdk1.4.1_02/jre/lib/i386 \n<br>java.vm.version=1.4.1_02-b06 \n\n<br>java.vm.name=Java HotSpot(TM) Client VM\n<br>java.vm.name=Java HotSpot(TM) Server VM \n", "id": 52573, "time": "2004-02-19T15:23:44Z", "creator": "mlh@utanet.at", "creation_time": "2004-02-19T15:23:44Z", "is_private": false, "attachment_id": null}]