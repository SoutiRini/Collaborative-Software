[{"count": 0, "tags": [], "creator": "andi.eades@artworks.co.uk", "attachment_id": null, "id": 44049, "time": "2003-09-11T15:46:23Z", "bug_id": 23107, "creation_time": "2003-09-11T15:46:23Z", "is_private": false, "text": "Create a couple of .txt files and run this ant script:\n\n<project name=\"testChecksum\" default=\"test\" basedir=\".\">\n\n\t<fileset dir=\".\">\n\t\t<patternset id=\"files\">\n\t\t\t<include name=\"*.txt\"/>\n\t\t</patternset>\n\t</fileset>\n\n\t<target name=\"test\">\t\n\t\t<checksum fileext=\".checksum\">\n\t\t\t<fileset dir=\".\">\n\t\t\t\t<patternset refid=\"files\"/>\n\t\t\t</fileset>\n\t\t</checksum>\n\n\t\t<condition property=\"isSame\">\n\t\t\t<checksum fileext=\".checksum\">\n\t\t\t\t<fileset dir=\".\">\n\t\t\t\t\t<patternset refid=\"files\"/>\n\t\t\t\t</fileset>\n\t\t\t</checksum>\n\t\t</condition>\n\n\t\t<echo message=\"isSame = ${isSame}\"/>\n\t</target>\n\n</project>\n\nisSame property is always set to true regardless of whether the files have\nchanged or not."}, {"count": 1, "tags": [], "bug_id": 23107, "attachment_id": null, "id": 44052, "time": "2003-09-11T16:45:11Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-09-11T16:45:11Z", "is_private": false, "text": "This is not a bug.\nThe build script sets the checksums with the \nchecksum task, and then uses the condition\nto see if they are the same.\n\nsee following script for example of\nchanging the file after working out\nthe checksum\n\n<project name=\"testChecksum\" default=\"test\" basedir=\".\">\n  <fileset dir=\".\">\n    <patternset id=\"files\">\n      <include name=\"*.txt\"/>\n    </patternset>\n  </fileset>\n\n  <target name=\"init\">\n    <delete quiet=\"yes\" file=\"1.txt\"/>\n    <delete quiet=\"yes\" file=\"2.txt\"/>\n    <concat destfile=\"1.txt\">\n      this is file 1\n    </concat>\n    <concat destfile=\"2.txt\">\n      this is file 2\n    </concat>\n  </target>\n\n  <fileset dir=\".\">\n    <patternset id=\"files\">\n      <include name=\"*.txt\"/>\n    </patternset>\n  </fileset>\n\n  <target name=\"test\" depends=\"init\">\n    <checksum fileext=\".checksum\">\n      <fileset dir=\".\">\n        <patternset refid=\"files\"/>\n      </fileset>\n    </checksum>\n\n    <concat destfile=\"2.txt\">\n      this is file 2 changed\n    </concat>\n    \n    <condition property=\"isSame\">\n      <checksum fileext=\".checksum\">\n        <fileset dir=\".\">\n          <patternset refid=\"files\"/>\n        </fileset>\n      </checksum>\n    </condition>\n\n    <echo message=\"isSame = ${isSame}\"/>\n  </target>\n\n</project>\n\n"}]