[{"attachment_id": null, "tags": [], "bug_id": 34540, "text": "well iam using whm/cpanel and i activate mod userdir protection which add this \nto httpd.conf\n\nNameVirtualHost X.X.X.X:80\n\n<VirtualHost X.X.X.X>\nServerAdmin webmaster@domain.com\nDocumentRoot /home/domain/public_html\nBytesLog domlogs/domain.com-bytes_log  \nUser sintigr\nGroup sintigr\n<IfModule mod_php4.c>\nphp_admin_value \nopen_basedir \"/home/domain/:/usr/lib/php:/usr/local/lib/php:/tmp\"\n</IfModule>\n<IfModule mod_userdir.c>\nUserDir disabled\nUserDir enabled sintigr\n</IfModule>\nServerName www.domain.com\nScriptAlias /cgi-bin/ /home/domain/public_html/cgi-bin/\nUser sintigr\nGroup sintigr\nCustomLog domlogs/domain.com combined\n</VirtualHost>\n\n\n<VirtualHost X.X.X.X>\nServerAlias www.anotherdomain.com anotherdomain.com\nServerAdmin webmaster@anotherdomain.com\nDocumentRoot /home/anotherdomain/public_html\nBytesLog domlogs/anotherdomain.com-bytes_log\nUser vtavenir\nGroup vtavenir\n<IfModule mod_php4.c>\nphp_admin_value \nopen_basedir \"/home/anotherdomain/:/usr/lib/php:/usr/local/lib/php:/tmp\"\n</IfModule>\n<IfModule mod_userdir.c>\nUserDir disabled\nUserDir enabled vtavenir\n</IfModule>\nServerName www.anotherdomain.com\nScriptAlias /cgi-bin/ /home/anotherdomain/public_html/cgi-bin/\nUser vtavenir\nGroup vtavenir\nCustomLog domlogs/anotherdomain.com combined\n</VirtualHost>\n\n\nbut this causes calls to http://X.X.X.X/~anotherdomain\n\nto go to  http://X.X.X.X/domain/public_html/~anotherdomain\n\nofcourse the first virtual host is the first one using that ip\nso why is every account on this ip mapped to the public_html dir of the first \nvirtual host in httpd.conf?? how can i set it correctly?", "count": 0, "id": 73856, "time": "2005-04-20T13:03:30Z", "creator": "kre80r@gmail.com", "creation_time": "2005-04-20T13:03:30Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "is_private": false, "id": 73882, "time": "2005-04-21T08:32:45Z", "bug_id": 34540, "creation_time": "2005-04-21T08:32:45Z", "text": "NameVirtualHost foo and <VirtualHost foo> must match foo *exactly*. I'd guess,\nthat could be the problem - totally independent from mod_userdir.\n(Further I dunno whm/cpanel ;-)"}, {"count": 2, "tags": [], "bug_id": 34540, "text": "namevirtualhost adn virtual host match using domain.com works perfectly\nthe strange thing is whatever the first domain in httpd.conf is i mean taking \nthis ip it is used first", "id": 73888, "time": "2005-04-21T10:29:17Z", "creator": "kre80r@gmail.com", "creation_time": "2005-04-21T10:29:17Z", "is_private": false, "attachment_id": null}, {"count": 3, "text": "I'd guess, if you'd repeat it with some interpunction chars, someone would\nunderstand, what you're saying. I do not, sorry.", "bug_id": 34540, "attachment_id": null, "id": 73902, "time": "2005-04-21T15:17:30Z", "creator": "nd@perlig.de", "creation_time": "2005-04-21T15:17:30Z", "tags": [], "is_private": false}, {"count": 4, "text": "ok here is the problem again in simple words am running a name based apache \nserver  and my httpd.conf looks like this :\n\nNameVirtualHost 11.22.33.44:80\n\n<VirtualHost 11.22.33.44>\nServerAdmin webmaster@domain.com\nDocumentRoot /home/domain/public_html\nBytesLog domlogs/domain.com-bytes_log  \nUser sintigr\nGroup sintigr\n<IfModule mod_php4.c>\nphp_admin_value \nopen_basedir \"/home/domain/:/usr/lib/php:/usr/local/lib/php:/tmp\"\n</IfModule>\n<IfModule mod_userdir.c>\nUserDir disabled\nUserDir enabled sintigr\n</IfModule>\nServerName www.domain.com\nScriptAlias /cgi-bin/ /home/domain/public_html/cgi-bin/\nUser sintigr\nGroup sintigr\nCustomLog domlogs/domain.com combined\n</VirtualHost>\n\n\n\nand then i added another virtualhost on the same ip \n\n<VirtualHost 11.22.33.44>\nServerAlias www.anotherdomain.com anotherdomain.com\nServerAdmin webmaster@anotherdomain.com\nDocumentRoot /home/anotherdomain/public_html\nBytesLog domlogs/anotherdomain.com-bytes_log\nUser vtavenir\nGroup vtavenir\n<IfModule mod_php4.c>\nphp_admin_value \nopen_basedir \"/home/anotherdomain/:/usr/lib/php:/usr/local/lib/php:/tmp\"\n</IfModule>\n<IfModule mod_userdir.c>\nUserDir disabled\nUserDir enabled vtavenir\n</IfModule>\nServerName www.anotherdomain.com\nScriptAlias /cgi-bin/ /home/anotherdomain/public_html/cgi-bin/\nUser vtavenir\nGroup vtavenir\nCustomLog domlogs/anotherdomain.com combined\n</VirtualHost>\n\n\nas recommended in apche httpd document of user dir protection i added this \nlines in each virtualhost directive:\n\nUserDir disabled\nUserDir enabled USER\n\n\nbut this causes the following error \nwhenever i try logging to http://11.22.33.44/~first-user\neverything works ok (first user here is the first user assigned to this ip in \nthe httpd.conf)\n\nbut if i try logging to http://11.22.33.44/~second-user\n\n(which is ofcourse the second user assigned to this ip in the httpd.conf) \n\ni cant login and i get the following line from error_log :\n\n[Wed Apr 20 20:03:30 2005] [error] [client 81.10.18.244] File does not \nexist: /home/user1/public_html/~user2/\n\n\nas you see thats wrong it should go to /home/user2/public_html\n\nwhat could cause this mis-direction ??\n\n\n\n\n", "creator": "kre80r@gmail.com", "is_private": false, "id": 73916, "time": "2005-04-21T20:40:48Z", "bug_id": 34540, "creation_time": "2005-04-21T20:40:48Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 34540, "attachment_id": null, "id": 73930, "time": "2005-04-22T03:43:59Z", "creator": "slive@apache.org", "creation_time": "2005-04-22T03:43:59Z", "is_private": false, "text": "It looks like you don't understand what UserDir enabled/disabled do.  They \nallow only the specified users to be accessed as http://host/~user/.  So it \nlooks like you want to allow all users to access their user directories, \nmeaning you should replace both UserDir directives by simply\nUserDir public_html\n\nFurther discussion should go to the users@httpd.apache.org list.\n"}]