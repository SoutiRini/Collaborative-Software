[{"count": 0, "tags": [], "creator": "Matej.Spiller@siol.net", "attachment_id": null, "is_private": false, "id": 116549, "time": "2008-05-13T00:30:42Z", "bug_id": 44984, "creation_time": "2008-05-13T00:30:42Z", "text": "DSIGTransformBase64.cpp function appendTransformer does not extract text() nodes if input is xpath transformation\n\nif (input->getLastTxfm()->getNodeType() != TXFMBase::DOM_NODE_XPATH_NODESET) then it adds self::text() xpath transformation.\n\nHowever even if input is already xpath_nodeset it should have self::text() transformation applied.\n\nfrom standard:\nThis transform requires an octet stream for input. If an XPath node-set (or sufficiently functional alternative) is given as input, then it is converted to an octet stream by performing operations logically equivalent to 1) applying an XPath transform with expression self::text(), then 2) taking the string-value of the node-set. Thus, if an XML element is identified by a barename XPointer in the Reference URI, and its content consists solely of base64 encoded character data, then this transform automatically strips away the start and end tags of the identified element and any of its descendant elements as well as any descendant comments and processing instructions. The output of this transform is an octet stream."}, {"count": 1, "tags": [], "creator": "cantor.2@osu.edu", "text": "Just looking at this, and my suspicion is that the check is in there because the code provided to add the self::text() transform would break or not do the right thing if the input is XPath.\n\nHave you tested with the change of removing the getNodeType check altogether?", "id": 136795, "attachment_id": null, "bug_id": 44984, "creation_time": "2010-05-11T17:25:49Z", "time": "2010-05-11T17:25:49Z", "is_private": false}]