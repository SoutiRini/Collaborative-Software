[{"count": 0, "tags": [], "creator": "scohen@apache.org", "attachment_id": null, "text": "Please see\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=29650\n\nThat bug was originally about a defect that had already been addressed in\ncommons-net and so it was marked as a duplicate of another bug.  However, in the\nprocess of discussion, a different issue was raised for which I am creating a\nseparate bug.\n\nThis ant script\n\nAnt script:\n \t\t<ftp\n \t\t\taction=\"list\" \n \t\t\tserver=\"${ftp.host}\" \n \t\t\tuserid=\"${ftp.login}\" \n \t\t\tpassword=\"${ftp.password}\" \n \t\t\tverbose=\"yes\"\n \t\t\tlisting=\"xsl/listing.txt\"\n \t\t>\n \t\t\n \t\t\t<fileset>\n \t\t\t\t<include name=\"**/*\"/>\n\n \t\t\t</fileset>\n \t\t\n    \t</ftp>\n\nproduces this output:\n\nBUILD FAILED\njava.lang.ArrayIndexOutOfBoundsException: 0\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.listFile(FTP.java:1856\n)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles(FTP.java\n:1345)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles(FTP.java\n:1388)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.execute(FTP.java:2016)\n\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:301)\n        at org.apache.tools.ant.Target.performTasks(Target.java:328)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1063)\n        at org.apache.tools.ant.Main.runBuild(Main.java:632)\n        at org.apache.tools.ant.Main.startAnt(Main.java:183)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:197)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:56)\n\nTotal time: 1 minute 16 seconds\njava.lang.ArrayIndexOutOfBoundsException: 0\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.listFile(FTP.java:1856\n)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles(FTP.java\n:1345)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles(FTP.java\n:1388)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.execute(FTP.java:2016)\n\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:301)\n        at org.apache.tools.ant.Target.performTasks(Target.java:328)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1063)\n        at org.apache.tools.ant.Main.runBuild(Main.java:632)\n        at org.apache.tools.ant.Main.startAnt(Main.java:183)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:197)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:56)\n\nWhat I think is happening is that there are some empty directories to be found\nunder the tree when **/* is the specified filelist.  Since commons-net list\nfiles does not handle recursive listings, ant must be processing each directory\nfound under the root of this tree separately.  The Ant code \n\n        FTPFile ftpfile = ftp.listFiles(resolveFile(filename))[0]; \n\nseems to be making an assumption that an array with a length of at least 1 will\nbe returned, but in actuality it is quite possible for a 0-length array to be\nreturned by listFiles().", "id": 59626, "time": "2004-06-20T18:38:20Z", "bug_id": 29699, "creation_time": "2004-06-20T18:38:20Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of 28797 ***", "id": 66547, "time": "2004-11-05T16:32:09Z", "bug_id": 29699, "creation_time": "2004-11-05T16:32:09Z", "is_private": false}]