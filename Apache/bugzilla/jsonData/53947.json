[{"count": 0, "tags": [], "text": "Hi\n- ProxyPreserveHost is a server conf directive only, and in my opinion, a must have feature for in all cluster & lb related proxy configuration.\n- RewriteRule [P] is a very usefull directive for migrating a specific part of an application to another server\n\n- There should be very little depency between a cluster IP and a service name (domain name) - that's the whole purpose  of ProxyPreserveHost\n\nIn massive name base virtualhost environnement, i have only ONE virtualhost\n<Virtualhost>\n  ServerAlias allalloweddomains.tld\n  VirtualDocumentRoot /etc/httpd/redirector/%0\n</VirtualHost>\n\nI cannot enable ProxyPreserveHost on the whole Virtualhost (location /services/ is irrelevant).\n\nI'm asking for \n* enabling ProxyPreserveHost in .htaccess ? [OR]\n* creating an inline ProxyPreserveHost RewriteRule flag\n\nTherefore, the\nRewriteCond %QUERY_STRING ClassName=SpecificSOAPWSClass\nRewriteCond (.*)  http:// [cluster ip with upcomming architecture evolution]/$1 [P,PPH]\n\nWould work as supposed.\nNew apache extensions mod_remoteip are (kindeof) around same kind of proxy/lb transparency issue.\n\n\nIn the same spirit, ProxyImposeHost might also be usefull\nRewriteCond (.*)  http:// [cluster ip with upcomming architecture evolution]/$1 [P,PIH=newfeature.domain.com]\n\nI hope you'll agree with this new feature.\n\nBest Regards.", "attachment_id": null, "id": 162464, "creator": "131.apache@cloudyks.org", "time": "2012-09-29T17:39:27Z", "bug_id": 53947, "creation_time": "2012-09-29T17:39:27Z", "is_private": false}]