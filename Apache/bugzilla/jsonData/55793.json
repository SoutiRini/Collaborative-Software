[{"count": 0, "tags": [], "bug_id": 55793, "attachment_id": 31051, "text": "Created attachment 31051\nPatch to support DTrace/SystemTap for Apache 2.4.6\n\nHi!\n\nDTrace support were implemented in Apache 2.3.0, but it never been buildable.\nThere is a patch to fix that: http://people.apache.org/~trawick/httpd-trunk-dtrace.html but it is a bit out-of-date\n\nI've upgraded patch to stable apache version (2.4.6) + added SystemTap (Linux) support and tested build with and without --enable-dtrace on Solaris 11 and CentOS Linux 6.4. \n\nHowever, I have some concerns about original patch:\n1. It's a bit tricky: needs to create a lot of intermediate files if building with DTrace/SystemTap support\n2. Hook probes are actually useless because they do not provide hook function arguments to DTrace/SystemTap\n\nBR, Sergey.", "id": 171288, "time": "2013-11-18T14:41:44Z", "creator": "Sergey.Klyaus@Tune-IT.Ru", "creation_time": "2013-11-18T14:41:44Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 55793, "attachment_id": 31665, "text": "Created attachment 31665\nModified version for 2.4.9\n\nModified for version 2.4.9 and for building outside of source directory.", "id": 175497, "time": "2014-05-27T13:14:36Z", "creator": "petr.sumbera@oracle.com", "creation_time": "2014-05-27T13:14:36Z", "is_private": false}, {"count": 2, "tags": [], "creator": "Sergey.Klyaus@Tune-IT.Ru", "attachment_id": null, "is_private": false, "id": 183616, "time": "2015-06-17T21:30:06Z", "bug_id": 55793, "creation_time": "2015-06-17T21:30:06Z", "text": "It seems that original patch is a bit incorrect, it didn't exclude apache_noprobes.h from export files. And in some cases (observed at CentOS 7, which is probably has newer GCC), apache_noprobes.h redefined probes and ruined SystemTap USDT probes. \n\nThis small command fixes this:\n\n   $ sed -i 's/apache_probes.h/\"apache_.*probes.h\"/' server/Makefile.in\n\nSorry that I'm too lazy to create a new patch."}]