[{"count": 0, "tags": [], "creator": "viola.lu@gmail.com", "attachment_id": null, "id": 139862, "time": "2010-09-14T07:14:09Z", "bug_id": 49925, "creation_time": "2010-09-14T07:14:09Z", "is_private": false, "text": "1. Create a managed bean ,define an int field\npackage coreservlets;\n\nimport javax.faces.bean.*;\n\n@ManagedBean\npublic class SpanishColorMapper extends ColorMapper {\n    private int age;\n  public SpanishColorMapper() {\n    super(\"Spanish\", \"rojo\", \"anaranjado\", \"amarillo\",\n          \"verde\", \"negro\", \"blanco\");\n  }\n  public int calYear(int x) {\n      return age + x;\n  }\n  public int getAge() {\n      return age;\n  }\n  public void setAge(int x) {\n      age = x;\n  }\n}\n\n2.Direclty call calYear method in xhtml like:\n<td>#{spanishColorMapper.calYear(5)}</td>\nbut  it's reported that :\njava.lang.NoSuchMethodException: coreservlets.SpanishColorMapper.calYear(java.lang.Long)\n\nCaused by:\njava.lang.NoSuchMethodException - coreservlets.SpanishColorMapper.calYear(java.lang.Long)\n\njavax.faces.FacesException: java.lang.NoSuchMethodException: coreservlets.SpanishColorMapper.calYear(java.lang.Long)\n\tat org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.wrap(ExceptionHandlerImpl.java:241)\n\n\n\tat org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:156)\n\tat org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:258)\n\tat javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)\n\n\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:303)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:208)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:243)\n\n\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:201)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:163)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:108)\n\n\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:556)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:401)\n\n\n\tat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:281)\n\tat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1568)\n\n\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:619)\n\n\nCaused by: java.lang.NoSuchMethodException: coreservlets.SpanishColorMapper.calYear(java.lang.Long)\n\tat java.lang.Class.getMethod(Class.java:1605)\n\tat javax.el.BeanELResolver.invoke(BeanELResolver.java:377)\n\tat javax.el.CompositeELResolver.invoke(CompositeELResolver.java:137)\n\n\n\tat org.apache.el.parser.AstValue.getValue(AstValue.java:159)\n\tat org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:192)\n\tat org.apache.myfaces.view.facelets.el.ELText$ELTextVariable.writeText(ELText.java:213)\n\n\n\tat org.apache.myfaces.view.facelets.compiler.TextInstruction.write(TextInstruction.java:48)\n\tat org.apache.myfaces.view.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:46)\n\tat org.apache.myfaces.view.facelets.compiler.UILeaf.encodeAll(UILeaf.java:214)\n\n\n\tat javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)\n\tat javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)\n\tat org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1155)\n\n\n\tat org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:263)\n\tat org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85)\n\tat org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)\n\n\n\t... 16 more\n\n\nSeems by default managedbean calYear(5) parse 5  as Long, not int."}, {"attachment_id": null, "tags": [], "bug_id": 49925, "text": "Having re-read the spec, I'm reasonably sure that this is not a bug. The EL spec makes clear (in section 1.19) that integer literals are longs not ints so the behaviour you see is expected.\n\nDuring testing, I noticed that Tomcat doesn't handle longs properly either. I have a patch for that and will be applying it shortly.", "count": 1, "id": 140411, "time": "2010-10-03T15:11:19Z", "creator": "markt@apache.org", "creation_time": "2010-10-03T15:11:19Z", "is_private": false}]