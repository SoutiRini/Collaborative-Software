[{"count": 0, "tags": [], "text": "In java/org/apache/catalina/authenticator/SpnegoAuthenticator.java problems are logged with an exception. The exception does not show up in the logging. The exception only shows up if I hack java/org/apache/catalina/authenticator/LocalStrings.properties in catalina.jar, and add a placeholder.\n\n\nREPRODUCE:\n- Configure SP-NEGO with Kerberos.\n- Mess up your principal in com.sun.security.jgss.krb5.accept in jaas.config.\n- Try to login. \n- See that you get something like:\nFINE [org.apache.catalina.authenticator.SpnegoAuthenticator authenticate] Failed to validate client supplied ticket \n\nFIX:\nIn java/org/apache/catalina/authenticator/LocalStrings.properties please add [{0}] to the following lines:\nspnegoAuthenticator.ticketValidateFail=Failed to validate client supplied ticket\nspnegoAuthenticator.serviceLoginFail=Unable to login as the service principal\nIn SpnegoAuthenticator.java you can verify that exceptions are indeed passed to the log.\n\nVALIDATE:\n- Reproduce again\n- See that you now get\nFailed to validate client supplied ticket [GSSException: Failure unspecified at GSS-API level (Mechanism level: Invalid argument (400) - Cannot find key of appropriate type to decrypt AP REP - RC4 with HMAC)] \n\nThe exception is not super-helpful, but at least it's something.", "attachment_id": null, "id": 170172, "creator": "sanderkerel@gmail.com", "time": "2013-09-19T12:48:43Z", "bug_id": 55570, "creation_time": "2013-09-19T12:48:43Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 55570, "attachment_id": null, "id": 170173, "time": "2013-09-19T15:03:53Z", "creator": "markt@apache.org", "creation_time": "2013-09-19T15:03:53Z", "is_private": false, "text": "The problem is not that the message is missing the placeholder but that the exception argument is in the wrong place. It should be being passed to the log.xxxx method so the full strack trace appears in the logs.\n\nThis has been fixed in 8.0.x for 8.0.0-RC3 onwards and 7.0.x for 7.0.43 onwards."}, {"count": 2, "tags": [], "text": "thanks!", "attachment_id": null, "id": 170243, "creator": "sanderkerel@gmail.com", "time": "2013-09-24T06:27:38Z", "bug_id": 55570, "creation_time": "2013-09-24T06:27:38Z", "is_private": false}]