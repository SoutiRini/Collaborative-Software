[{"count": 0, "attachment_id": 34283, "creator": "star.shravan@gmail.com", "is_private": false, "id": 193862, "time": "2016-09-20T22:22:26Z", "bug_id": 60159, "creation_time": "2016-09-20T22:22:26Z", "tags": [], "text": "Created attachment 34283\nconf\n\n[First post, advise where needed.]\n\nI have a server with the following structure:\n\n- root/\n    - api/\n        - products/\n            - index.php\n    - include/\n        ...\n    - index.php\n\nThe server is setup to use a virtual host which \"Include\"s a seaparate .conf file attached below. I can confirm that the conf file is read. But when the url is http://example.com/api/products, it 404s. The log contains just these 2 lines:\n\n[Tue Sep 20 22:19:13.066519 2016] [rewrite:trace2] [pid 6024:tid 1016] mod_rewrite.c(476): [client x.x.x.x:28438] x.x.x.x - - [example.com/sid#6595032cc8][rid#65958b8330/initial] init rewrite engine with requested uri /api/products\n[Tue Sep 20 22:19:13.066519 2016] [rewrite:trace1] [pid 6024:tid 1016] mod_rewrite.c(476): [client x.x.x.x:28438] x.x.x.x - - [example.com/sid#6595032cc8][rid#65958b8330/initial] pass through /api/products\n\ni.e. the RewriteRules set for /api/products aren't even run.\n\nThe following questions were from a few days back when I was trying to get this to work via .htaccess files. They might provide more clues to the issue.\n\nhttps://stackoverflow.com/questions/39402343/mod-rewrites-in-nested-htaccess-causing-strange-404\nhttps://serverfault.com/questions/802301/mod-rewrites-in-nested-htaccess-causing-strange-404 (A user here believes this is a bug with DirectorySlash)"}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 193864, "time": "2016-09-21T00:35:16Z", "bug_id": 60159, "creation_time": "2016-09-21T00:35:16Z", "is_private": false, "text": "Convince me those <Directory> sections match at all."}, {"count": 2, "tags": [], "creator": "star.shravan@gmail.com", "attachment_id": null, "is_private": false, "id": 193866, "time": "2016-09-21T01:38:18Z", "bug_id": 60159, "creation_time": "2016-09-21T01:38:18Z", "text": "Eric, calling an actually non-existant URL like \"/api/produc\" instead of \"/api/products\" still gives me a 404, but a completely different log output (below).\n\nFurther, removing the directory directive causes the index.php page to load instead of 404'ing. \n\n[Wed Sep 21 01:28:33.978593 2016] [rewrite:trace2] [pid 6024:tid 1012] mod_rewrite.c(476): [client x.x.x.x:31018] x.x.x.x - - [example.com/sid#6595032cc8][rid#65958aa2c0/initial] init rewrite engine with requested uri /api/produc\n[Wed Sep 21 01:28:33.978593 2016] [rewrite:trace1] [pid 6024:tid 1012] mod_rewrite.c(476): [client x.x.x.x:31018] x.x.x.x - - [example.com/sid#6595032cc8][rid#65958aa2c0/initial] pass through /api/produc\n[Wed Sep 21 01:28:33.978593 2016] [rewrite:trace3] [pid 6024:tid 1012] mod_rewrite.c(476): [client x.x.x.x:31018] x.x.x.x - - [example.com/sid#6595032cc8][rid#65958aa2c0/initial] [perdir C:/Workbench/Webserver/example.com/api/] strip per-dir prefix: C:/Workbench/Webserver/example.com/api/produc -> produc\n[Wed Sep 21 01:28:33.978593 2016] [rewrite:trace3] [pid 6024:tid 1012] mod_rewrite.c(476): [client x.x.x.x:31018] x.x.x.x - - [example.com/sid#6595032cc8][rid#65958aa2c0/initial] [perdir C:/Workbench/Webserver/example.com/api/] applying pattern '^(.+)(?<!/)$' to uri 'produc'\n[Wed Sep 21 01:28:33.978593 2016] [rewrite:trace4] [pid 6024:tid 1012] mod_rewrite.c(476): [client x.x.x.x:31018] x.x.x.x - - [example.com/sid#6595032cc8][rid#65958aa2c0/initial] [perdir C:/Workbench/Webserver/example.com/api/] RewriteCond: input='C:/Workbench/Webserver/example.com/api/produc/' pattern='-d' => not-matched\n[Wed Sep 21 01:28:33.978593 2016] [rewrite:trace1] [pid 6024:tid 1012] mod_rewrite.c(476): [client x.x.x.x:31018] x.x.x.x - - [example.com/sid#6595032cc8][rid#65958aa2c0/initial] [perdir C:/Workbench/Webserver/example.com/api/] pass through C:/Workbench/Webserver/example.com/api/produc"}, {"count": 3, "attachment_id": null, "creator": "covener@gmail.com", "is_private": false, "id": 193867, "time": "2016-09-21T02:19:08Z", "bug_id": 60159, "creation_time": "2016-09-21T02:19:08Z", "tags": [], "text": "Will need a complete, minimal self-contained test case to get anywhere with this as a bug report."}, {"count": 4, "tags": [], "bug_id": 60159, "is_private": false, "text": "What would that include? Just the config files and server root? (Sure, I can get this to you soon, but really, everything is already here.)", "id": 193869, "time": "2016-09-21T02:41:39Z", "creator": "star.shravan@gmail.com", "creation_time": "2016-09-21T02:41:39Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "(In reply to Shravan Rajinikanth from comment #4)\n> What would that include? Just the config files and server root? (Sure, I can\n> get this to you soon, but really, everything is already here.)\n\nA single, minimal config file you can pass to apachectl -f that demonstrates the problem +  small zip of the documentroot it references.  \n\nI'm not doubting that it fails for you, but I won't be able to keep trying different permutations of all the unspecified stuff to do anything here without it.", "attachment_id": null, "bug_id": 60159, "id": 193870, "time": "2016-09-21T02:44:19Z", "creator": "covener@gmail.com", "creation_time": "2016-09-21T02:44:19Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 60159, "is_private": false, "text": "Created attachment 34285\ntestcase", "id": 193873, "time": "2016-09-21T04:34:29Z", "creator": "star.shravan@gmail.com", "creation_time": "2016-09-21T04:34:29Z", "attachment_id": 34285}, {"count": 7, "tags": [], "text": "I have posted the test case after cleaning up as much as I could. I was able to isolate that the \"RewriteEngine On\" line is causing the issue and indicated it. You can see this by commenting out the one line.", "attachment_id": null, "bug_id": 60159, "id": 193874, "time": "2016-09-21T04:36:32Z", "creator": "star.shravan@gmail.com", "creation_time": "2016-09-21T04:36:32Z", "is_private": false}]