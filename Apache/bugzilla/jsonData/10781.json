[{"count": 0, "tags": [], "creator": "steve@stevefruitt.com", "text": "I was using Apache 2.0.39 with virtual hosts.  It was fresh load of NT with \nservice pack 6a and this apache and Cerberus FTP server. This page has worked \nin the past with 2.0.36.  The pdf files come up as a blank page.  Tried \neverything thinking that it was not the Apache doing it.  Then unistalled \n2.0.39 and installed 1.3.26 and it worked under windows.  But when the 2.0.39 \nwas running and I went into Mandrake 8.1 then it would only download to my home \nfile.  In windows I was using IE 6.0.  My server is a PII 233 with Intel 815EEA \nboard hooked to a cable modem.  My phone number is 541-882-7653 or 541-891-8998\n(cell phone).  The other web pages run fine except for this little clich.", "id": 19490, "time": "2002-07-13T22:05:48Z", "bug_id": 10781, "creation_time": "2002-07-13T22:05:48Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "ellisteer_box8003@sitepen.com", "attachment_id": null, "id": 19583, "time": "2002-07-16T02:24:17Z", "bug_id": 10781, "creation_time": "2002-07-16T02:24:17Z", "is_private": false, "text": "Apache 2.0.39 Win2K\n\nSame problem.  Many but not all .pdf links served display as blank page in IE\nbrowser.  Occasional browser crashes also reported.\n\n-Ellis"}, {"count": 2, "tags": [], "creator": "slive@apache.org", "text": "I don't know whether this is a client or server problem, but the following\nworkaround will probably help.  Add this to httpd.conf:\nSetEnvIf Request_URI \"\\.pdf$\" no-keepalive\n", "id": 19603, "time": "2002-07-16T14:11:08Z", "bug_id": 10781, "creation_time": "2002-07-16T14:11:08Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "phillip.ulberg@wsrb.com", "attachment_id": null, "id": 19697, "time": "2002-07-17T17:01:07Z", "bug_id": 10781, "creation_time": "2002-07-17T17:01:07Z", "is_private": false, "text": "I added the \"SetEnvIf Request_URI \"\\.pdf$\" no-keepalive\" to httpd.conf and am \nstill having problems. Very intermitent, and is not specific to any \nindividual .pdf\n\nThis is really killing me when I'm currently serving over 15,000 pdf files.\n\nIs this an issue in 1.3.22 and up? "}, {"count": 4, "tags": [], "bug_id": 10781, "attachment_id": null, "text": "Didn't work for me either.\n\nSame with the intermittent.\n\nIt is also causing a lot of problems.  I am considering downgrading on an\nisolated machine and taking my chances with the security bug 2.0.39 fixed.", "id": 19712, "time": "2002-07-17T19:52:44Z", "creator": "ellisteer_box8003@sitepen.com", "creation_time": "2002-07-17T19:52:44Z", "is_private": false}, {"count": 5, "tags": [], "creator": "steve@stevefruitt.com", "text": "I have found that 1.3.26 works with PDFs.  The platform somehow got changed to \nalpha and it should be \"all\".  I think that the severity may have to be changed \nto Critical.\n\n\n", "id": 19733, "time": "2002-07-18T00:43:53Z", "bug_id": 10781, "creation_time": "2002-07-18T00:43:53Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "I noticed this behaviour as well. Only in 2.0.39.\n\nMy observations were that it occurred sporadically when acrobat was requesting \nthe PDF and was the pdf was being byte-served. you can see consecutive requests \nfor the same file with sunbsequent requests having an http error code of 206.\n\nthis problem is absent in 2.0.36. and 1.3.24.", "attachment_id": null, "bug_id": 10781, "id": 19826, "time": "2002-07-18T23:55:15Z", "creator": "siddarth_raghunathan@amat.com", "creation_time": "2002-07-18T23:55:15Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 10781, "is_private": false, "count": 7, "id": 20026, "time": "2002-07-23T03:30:55Z", "creator": "ajs@tnrealestate.com", "creation_time": "2002-07-23T03:30:55Z", "text": "I also ran into this on 2.0.39 on Win2K.  Went back to 1.3.26 and the problem \nwent away.  The problem only appears for me when attempting to view a multi-\npage pdf (2+ pages).  The same pdf can be downloaded via \"Save As...\" and then\nopened and viewed fine.  Because of this, I suspect that Sid is correct in that \nthe problem has something to do with Acrobat making byte range requests that \naren't being handled properly.  I've tried both Acrobat 4.0 and 5.0 with \nidentical results."}, {"attachment_id": null, "tags": [], "bug_id": 10781, "is_private": false, "count": 8, "id": 20137, "time": "2002-07-24T16:55:18Z", "creator": "phillip.ulberg@wsrb.com", "creation_time": "2002-07-24T16:55:18Z", "text": "I have done some additional testing on my site with the offending .pdf files, \nand found that this behavior does not occur when I am opening any of the .pdf \nfiles on my site from my linux box using either xpdf v1.00, or Acrobat Reader \nv5.0.5, mu linux box is - \n\nRedHat 7.3/2.4.18-5, Mozilla 1.1b browser\n\nI left everything the same on the server - \n\nWin2K Server, Apache 2.0.39, Sun ONE ASP(Chilisoft ASP)\n\nI will do this same testing now on MacOS9/MAcOS X and see what happens.\n\nPhillip"}, {"count": 9, "tags": [], "creator": "sims@princeton.edu", "attachment_id": null, "id": 20139, "time": "2002-07-24T17:11:43Z", "bug_id": 10781, "creation_time": "2002-07-24T17:11:43Z", "is_private": false, "text": "My experience matches that of Andrew J. Smith, except that my server was on NT, SP6a.  Also, I noted \nthat the problem does not appear with the Acrobat plugin used in the Opera 6.04 browser, but does \nappear in Netscape 4.x, IE 5.5, and Mozilla 1.0."}, {"count": 10, "tags": [], "bug_id": 10781, "attachment_id": null, "text": "I ran into this same problem a couple days ago.\n\nI agree that the issue is related to the Acrobat \ndocument being byte-served. I've tried adding \"SetEnvIfNoCase Request_URI \"\\.pdf$\" \nnokeepalive\" to my config, but still have the same problem. I also tried all the following \nsimultaneously, and still experience the problem:\n\nSetEnv nokeepalive\nSetEnv \ndowngrade-1.0\nSetEnv force-response-1.0\n\nIn order to get around this issue I had to switch to \nusing a backup server which has 2.0.36 . I use the exact same config file on the 2.0.36 machine as \nthe 2.0.39.\n\nHere is the HTTP conversation I observed (on the server) when the PDF didn't \ntransfer properly:\n\n\nGET /DP/documents/deliverables.pdf HTTP/1.1\nAccept: \napplication/vnd.ms-excel, application/msword, application/vnd.ms-powerpoint, \nimage/gif, image/x-xbitmap, image/jpeg, image/pjpeg, */*\nReferer: \nhttp://test.statst.org/DP/documents/deliverables.htm\nAccept-Language: en-us\nAccept-\nEncoding: gzip, deflate\nUser-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows 95)\nHost: \ntest.statst.org\nConnection: Keep-Alive\n\n\nHTTP/1.1 200 OK\nDate: Fri, 26 Jul 2002 \n16:40:12 GMT\nServer: Apache/2.0.39 (Win32)\nLast-Modified: Wed, 12 Jun 2002 18:49:47 \nGMT\nETag: \"25b-2019c-1bf5992b\"\nAccept-Ranges: bytes\nContent-Length: \n131484\nConnection: close\nContent-Type: application/pdf\nX-Pad: avoid browser \nbug\n\n\nGET /DP/documents/deliverables.pdf HTTP/1.1\nAccept: */*\nAccept-Encoding: \ngzip, deflate\nRange: bytes=8192-\nUnless-Modified-Since: Wed, 12 Jun 2002 18:49:47 GMT\nIf-\nRange: \"25b-2019c-1bf5992b\"\nUser-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows \n95)\nHost: test.statst.org\nConnection: Keep-Alive\n\n\nHTTP/1.1 206 Partial \nContent\nDate: Fri, 26 Jul 2002 16:40:19 GMT\nServer: Apache/2.0.39 (Win32)\nLast-\nModified: Wed, 12 Jun 2002 18:49:47 GMT\nETag: \"25b-2019c-1bf5992b\"\nAccept-Ranges: \nbytes\nContent-Length: 123292\nContent-Range: bytes 8192-131483/131484\nConnection: \nclose\nContent-Type: application/pdf\n\n\nGET /DP/documents/deliverables.pdf \nHTTP/1.1\nAccept: */*\nRange: bytes=25401-31023, 31024-61023, 61024-91023, 91024-121023, \n121024-126940\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/4.0 (compatible; MSIE \n5.5; Windows 95)\nHost: test.statst.org\nConnection: Keep-Alive\nCache-Control: no-\ncache\n\n\nGET /DP/documents/deliverables.pdf HTTP/1.1\nAccept: */*\nRange: \nbytes=130646-131483\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/4.0 \n(compatible; MSIE 5.5; Windows 95)\nHost: test.statst.org\nConnection: Keep-Alive\nCache-\nControl: no-cache\n\n\nHTTP/1.1 206 Partial Content\nDate: Fri, 26 Jul 2002 16:40:19 \nGMT\nServer: Apache/2.0.39 (Win32)\nLast-Modified: Wed, 12 Jun 2002 18:49:47 GMT\nETag: \n\"25b-2019c-1bf5992b\"\nAccept-Ranges: bytes\nContent-Length: 838\nContent-Range: bytes \n130646-131483/131484\nConnection: close\nContent-Type: application/pdf\n\n\nGET \n/DP/documents/deliverables.pdf HTTP/1.1\nAccept: */*\nRange: bytes=127823-\n128846\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/4.0 (compatible; MSIE 5.5; \nWindows 95)\nHost: test.statst.org\nConnection: Keep-Alive\nCache-Control: no-\ncache\n\n\nHTTP/1.1 206 Partial Content\nDate: Fri, 26 Jul 2002 16:40:19 GMT\nServer: \nApache/2.0.39 (Win32)\nLast-Modified: Wed, 12 Jun 2002 18:49:47 GMT\nETag: \"25b-2019c-\n1bf5992b\"\nAccept-Ranges: bytes\nContent-Length: 1024\nContent-Range: bytes 127823-\n128846/131484\nConnection: close\nContent-Type: application/pdf\n\n", "id": 20271, "time": "2002-07-26T17:24:43Z", "creator": "nxg9@yahoo.com", "creation_time": "2002-07-26T17:24:43Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 10781, "attachment_id": null, "text": "no problems with small pdf's; under 15 kb", "id": 20540, "time": "2002-08-01T15:04:46Z", "creator": "hardenbol@iss.nl", "creation_time": "2002-08-01T15:04:46Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 10781, "text": "\n  Yup.  That was a bug.  Fixed in CVS HEAD, and with luck, it will make\n  it into 2.0.40 in the works this week.\n\n  Prior to any sendfile if we had any tailing text buffer, we clobbered any \n  header text buffer that was constructed.\n", "count": 12, "id": 20679, "time": "2002-08-06T06:52:27Z", "creator": "wrowe@apache.org", "creation_time": "2002-08-06T06:52:27Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 10781, "text": "I'm currently seeing a similiar issue, and wondering if there's any fix for \nthis currently out for Linux.  I've tested this on 2.0.36, 2.0.39 and 2.0.40 \nand each time we're receiving blank pages when accessing PDFs from clients \nrunning IE with Acrobat Reader 4.x.   We're running Linux 7.3.\n\nI've tried the KeepAlive and SetEnvIf suggestions from below and they don't fix \nthe problem.  \n\nThe PDF files are actually being served off of a Win2K box that's running IIS, \nhowever the requests are proxied through the Apache servers (ProxyPass).  When \ngoing to a URL directly on the Win2K box, they load fine.\n\n-Richard", "count": 13, "id": 21548, "time": "2002-08-22T17:48:01Z", "creator": "rfreilich@rim.net", "creation_time": "2002-08-22T17:48:01Z", "is_private": false}, {"count": 14, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "id": 21552, "time": "2002-08-22T18:23:58Z", "bug_id": 10781, "creation_time": "2002-08-22T18:23:58Z", "is_private": false, "text": "\n>  \"We're running Linux 7.3.  The PDF files are actually being served off of \n>   a Win2K box that's running IIS, however the requests are proxied through \n>   the Apache servers (ProxyPass).  When going to a URL directly on the \n>   Win2K box, they load fine.\"\n\nIf you serve the .pdf's directly from the Linux 7.3/Apache 2.0.40 box, what is\nthe result?  I'm guessing that we somehow corrupt the byteranges through the\nproxy, which doesn't fall under the scope of this bug.\n\nIf you cannot serve the .pdf's directly from your 7.3/2.0.40 server, please\nreopen this bug and update the OS version.  If it turns out that this is a\nproxy bug only, please start a new incident for \"mod_proxy/http_proxy cannot \nforward byterange requests.\"\n"}, {"count": 15, "tags": [], "bug_id": 10781, "attachment_id": null, "text": "> If you cannot serve the .pdf's directly from your 7.3/2.0.40 server, please\n> reopen this bug and update the OS version.  If it turns out that this is a\n> proxy bug only, please start a new incident for \"mod_proxy/http_proxy cannot \n> forward byterange requests.\"\n\nI ran into problems with 2.0.40 on Solaris 2.6 (sparc) serving .pdf's.\nI just tried again with 2.0.43, and still it won't work.\n\nI did a quick and dirty workaround:\n\nAction cat-pdf /cgi-bin/cat-pdf.sh\nAddHandler cat-pdf .pdf\n\ncat-pdf.sh is a simple shell script:\n\n#!/bin/sh\n\necho \"Content-Type: application/pdf\\r\";\necho \"\\r\";\nexec /bin/cat \"$PATH_TRANSLATED\"\n\n\nApparently as now no timestamp info is passed, acrobat is convinced into\nnot requesting byte ranges. However, this is just a workaround and the\nbug in Apache is real.\n\nApart from this, no big problems with 2.0.40 + PHP4.2.2, perhaps apart from\nthe fact that \"apachectl restart\" sometimes leaves the server inoperative for\nup to 20 minutes(!), apparently some child process hangs around too long.\n\"apachectl graceful\" works fine.", "id": 24765, "time": "2002-10-17T08:19:58Z", "creator": "paul@domain-registry.nl", "creation_time": "2002-10-17T08:19:58Z", "is_private": false}, {"count": 16, "tags": [], "bug_id": 10781, "attachment_id": null, "id": 28758, "creation_time": "2002-12-30T18:14:20Z", "time": "2002-12-30T18:14:20Z", "creator": "wrowe@apache.org", "text": "\n  Reclosing this bug ... the problem with *local* pdf transmissions was gone.\n\n  r.e.  Richard 2002-08-22 17:48  ...  See bug 11993 where we are tracking\n  that specific problem.\n", "is_private": false}]