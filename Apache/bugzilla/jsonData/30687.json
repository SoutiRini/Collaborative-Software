[{"count": 0, "tags": [], "creator": "josephlam@quotepower.com", "text": "My replication config worked fine with Sun's JDK but not with IBM's. I'm running\ntwo Tomcat 5 instances on one machine replicating with each other.\nUpon start-up, catalina.out keeps dumping out exception like crazy:\n\nJava version:\n# /usr/IBMJava2/bin/java -version\njava version \"1.4.2\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2)\nClassic VM (build 1.4.2, J2RE 1.4.2 IBM build cxia321420-20040626 (JIT enabled:\njitc))\n\nError in Catalina.out:\nAug 16, 2004 11:56:14 AM org.apache.catalina.cluster.tcp.SimpleTcpCluster start\nINFO: Cluster is about to start\nAug 16, 2004 11:56:14 AM org.apache.catalina.cluster.tcp.ReplicationListener start\nSEVERE: Unable to start cluster receiver\njava.net.UnknownHostException: 172.16.168.97: 172.16.168.97\n    at java.net.InetAddress.getLocalHost(InetAddress.java:1214)\n    at\norg.apache.catalina.cluster.tcp.ReplicationListener.start(ReplicationListener.java:63)\n    at\norg.apache.catalina.cluster.tcp.SimpleTcpCluster.start(SimpleTcpCluster.java:405)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1073)\n    at org.apache.catalina.core.StandardHost.start(StandardHost.java:789)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1083)\n    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:478)\n    at org.apache.catalina.core.StandardService.start(StandardService.java:480)\n    at org.apache.catalina.core.StandardServer.start(StandardServer.java:2313)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:556)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n    at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java(Compiled\nCode))\n    at java.lang.reflect.Method.invoke(Method.java(Compiled Code))\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:284)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:422)\nAug 16, 2004 11:56:14 AM org.apache.catalina.cluster.mcast.McastService start\nINFO: Sleeping for 2000 secs to establish cluster membership\nAug 16, 2004 11:56:14 AM org.apache.catalina.cluster.tcp.SimpleTcpCluster\nmemberAdded\nINFO: Replication member\nadded:org.apache.catalina.cluster.mcast.McastMember[tcp://172.16.168.97:4002,172.16.168.97,4002,\nalive=251561983]\nAug 16, 2004 11:56:16 AM org.apache.catalina.core.StandardHost getDeployer\nINFO: Create Host deployer for direct deployment ( non-jmx )\nAug 16, 2004 11:56:16 AM org.apache.catalina.cluster.deploy.FarmWarDeployer start\nINFO: Cluster FarmWarDeployer started.\nAug 16, 2004 11:56:16 AM\norg.apache.catalina.cluster.mcast.McastServiceImpl$SenderThread run\nWARNING: Unable to send mcast message.\njava.net.UnknownHostException: auto: auto\n    at java.net.InetAddress.getAllByName0(InetAddress.java:1034)\n    at java.net.InetAddress.getAllByName0(InetAddress.java:1004)\n    at java.net.InetAddress.getAllByName(InetAddress.java:998)\n    at java.net.InetAddress.getByName(InetAddress.java:912)\n    at org.apache.catalina.cluster.mcast.McastMember.getData(McastMember.java:122)\n    at\norg.apache.catalina.cluster.mcast.McastServiceImpl.send(McastServiceImpl.java:221)\n    at\norg.apache.catalina.cluster.mcast.McastServiceImpl$SenderThread.run(McastServiceImpl.java:259)\nAug 16, 2004 11:56:16 AM\norg.apache.catalina.cluster.mcast.McastServiceImpl$SenderThread run\nWARNING: Unable to send mcast message.\njava.net.UnknownHostException: auto\n    at java.net.InetAddress.getAllByName0(InetAddress.java:1039)\n    at java.net.InetAddress.getAllByName0(InetAddress.java:1004)\n    at java.net.InetAddress.getAllByName(InetAddress.java:998)\n    at java.net.InetAddress.getByName(InetAddress.java:912)\n    at org.apache.catalina.cluster.mcast.McastMember.getData(McastMember.java:122)\n    at\norg.apache.catalina.cluster.mcast.McastServiceImpl.send(McastServiceImpl.java:221)\n    at\norg.apache.catalina.cluster.mcast.McastServiceImpl$SenderThread.run(McastServiceImpl.java:259)\nAug 16, 2004 11:56:16 AM\norg.apache.catalina.cluster.mcast.McastServiceImpl$SenderThread run\nWARNING: Unable to send mcast message.\njava.net.UnknownHostException: auto\n    at java.net.InetAddress.getAllByName0(InetAddress.java:1039)\n    at java.net.InetAddress.getAllByName0(InetAddress.java:1004)\n    at java.net.InetAddress.getAllByName(InetAddress.java:998)\n    at java.net.InetAddress.getByName(InetAddress.java:912)\n    at org.apache.catalina.cluster.mcast.McastMember.getData(McastMember.java:122)\n    at\norg.apache.catalina.cluster.mcast.McastServiceImpl.send(McastServiceImpl.java:221)\n    at\norg.apache.catalina.cluster.mcast.McastServiceImpl$SenderThread.run(McastServiceImpl.java:259)", "id": 62020, "time": "2004-08-16T04:11:59Z", "bug_id": 30687, "creation_time": "2004-08-16T04:11:59Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "josephlam@quotepower.com", "text": "Found that tcpListenAddress=\"auto\" caused the problem.\nSpecifying an explicit addres (e.g. tcpListenAddress=\"172.16.168.97\") cured the\nproblem. Seems that under \"auto\" its trying to resolve \"172.16.168.97\" as\nhostname (or reverse lookup, I'm not sure) which would obviously fail.", "id": 62021, "time": "2004-08-16T04:25:51Z", "bug_id": 30687, "creation_time": "2004-08-16T04:25:51Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 30687, "is_private": false, "id": 62022, "time": "2004-08-16T06:57:00Z", "creator": "josephlam@quotepower.com", "creation_time": "2004-08-16T06:57:00Z", "tags": [], "text": "Start up OK but I still get errors when I shutdown Tomcat:\n\nAug 16, 2004 2:53:05 PM org.apache.coyote.http11.Http11Protocol pause\nINFO: Pausing Coyote HTTP/1.1 on http-9080\nAug 16, 2004 2:53:05 PM org.apache.coyote.tomcat5.CoyoteConnector pause\nSEVERE: Protocol handler pause failed\njava.net.UnknownHostException: 172.16.168.97: 172.16.168.97\n        at java.net.InetAddress.getLocalHost(InetAddress.java:1214)\n        at org.apache.jk.common.ChannelSocket.unLockSocket(ChannelSocket.java:458)\n        at org.apache.jk.common.ChannelSocket.pause(ChannelSocket.java:272)\n        at org.apache.jk.server.JkMain.pause(JkMain.java:657)\n        at org.apache.jk.server.JkCoyoteHandler.pause(JkCoyoteHandler.java:202)\n        at\norg.apache.coyote.tomcat5.CoyoteConnector.pause(CoyoteConnector.java:1444)\n        at org.apache.catalina.core.StandardService.stop(StandardService.java:521)\n        at org.apache.catalina.core.StandardServer.stop(StandardServer.java:2347)\n        at org.apache.catalina.startup.Catalina.stop(Catalina.java:605)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:580)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java(Compiled\nCode))\n        at java.lang.reflect.Method.invoke(Method.java(Compiled Code))\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:284)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:422)\nAug 16, 2004 2:53:06 PM org.apache.catalina.core.StandardService stop\nINFO: Stopping service Catalina\n"}, {"attachment_id": null, "tags": [], "creator": "yoavs@computer.org", "is_private": false, "count": 3, "id": 66115, "time": "2004-10-29T18:09:21Z", "bug_id": 30687, "creation_time": "2004-10-29T18:09:21Z", "text": "As you noted, the problem is with IBM's JDK.  This is not a Tomcat bug."}, {"count": 4, "tags": [], "bug_id": 30687, "is_private": false, "text": "If you pause a moment, read the first error and go from there\n\nSEVERE: Unable to start cluster receiver\njava.net.UnknownHostException: 172.16.168.97: 172.16.168.97\n    at java.net.InetAddress.getLocalHost(InetAddress.java:1214)\n\n\nLooks like the problem with your host config. Solve the UnknownHostException \nand the rest will go away\n\nFilip\n", "id": 66120, "time": "2004-10-29T18:16:54Z", "creator": "fhanik@apache.org", "creation_time": "2004-10-29T18:16:54Z", "attachment_id": null}]