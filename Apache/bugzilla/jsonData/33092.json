[{"text": "URL manipulation filters do not differ between http://localhost/ and http://\n[HOST]\nI have tested the RewriteRule and redirectMatch with all possible variations\n\nExample:\nRewriteRule ^/directory/file.html$  /other.html  [L,NE]\nRedirects all calls from \nhttp://www.mydomain.com/directory/file.html to \nhttp://www.mydomain.com/other.html\n\nbut it also redirects \nhttp://localhost/directory/file.html to \nhttp://localhost/other.html\n\nThis is really, really something that not only nobody needs it, it also \nprevents us to keep secured files for example administration files, which could \nbe accessed only through localhost and the option of testing the redirections \nby comparing the result through the browser.\n\nI have thought that I\u2019m the only one who has problems with it or maybe doing a \nmistake but I have found about 5 other articles about it on net.", "tags": [], "bug_id": 33092, "is_private": false, "count": 0, "id": 69663, "time": "2005-01-14T06:34:21Z", "creator": "sambukkaa@hotmail.com", "creation_time": "2005-01-14T06:34:21Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 33092, "attachment_id": null, "is_private": false, "id": 69670, "time": "2005-01-14T12:30:06Z", "creator": "nd@perlig.de", "creation_time": "2005-01-14T12:30:06Z", "text": "Well, use RewriteCond, VirtualHosts, whatever. This is a configuration error."}, {"count": 2, "tags": [], "creator": "sambukkaa@hotmail.com", "is_private": false, "id": 69696, "attachment_id": null, "bug_id": 33092, "creation_time": "2005-01-14T17:22:42Z", "time": "2005-01-14T17:22:42Z", "text": "I didn't paste the whole .conf file here since it was obvious for me that the \nrest is pretty known for whom reads this.\nThe server has around 50000 hits a day with no errors or crashes\n"}, {"count": 3, "tags": [], "bug_id": 33092, "attachment_id": null, "text": "I guess, you've posted to the wrong report?", "id": 69697, "time": "2005-01-14T19:08:11Z", "creator": "nd@perlig.de", "creation_time": "2005-01-14T19:08:11Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 33092, "text": "Ok, It seems that I haven\u2019t express myself  or better to say the problem well.\n\nI will try to explain it again.\n\nMy intension is to extract a string from a php file that could only be called \nfrom another php file residing in the same directory.\nThe files would look something like this:\n\nThis is the content of the caller file :\n<?\n\u2026. Bla bla bla\u2026\n$str=include \"http://localhost/secured.php\";\n?>\n\nthe hidden file: [secured.php] contains this:\n\n<? return (\"This should be hidden and could be called only from caller.php\");?>\n\n\nnow, Knowing that it is an internal file, the server actually should recognize \nit\nand the URL manipulation functions should not alter this URL: \nhttp://localhost/secured.php\nsince it is an internal inclusion has nothing to do with external visitors.\nTherefore, whoever would call this file from outside, would have to access the \nsecured.php file by calling the URL to it, something like this: http://\n[HOST]/secured.php\n\nNow the next step would be to manipulate the  http://[HOST]/secured.php in \nsomething else in order to prevent external calls to it.\n\nI have tried to use the apache URL manipulation options. \nThey all work but they also manipulate the  http://localhost/secured.php URL \nwhich must stay the way it was.\nThis shouldn\u2019t happen and I believe that it is a bug or the concept is simply \nwrong.\n", "id": 69700, "time": "2005-01-14T20:06:17Z", "creator": "sambukkaa@hotmail.com", "creation_time": "2005-01-14T20:06:17Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 33092, "attachment_id": null, "text": "Hmm, it's more a logical error. PHP doesn't use an \"internal\" request. It issues\na http request to your webserver. Note that anyone could get your \"secured\" file\nby supplying the proper Host header  (localhost). The host name is not different\nfrom any other in that situtation.", "id": 69704, "time": "2005-01-14T20:25:43Z", "creator": "nd@perlig.de", "creation_time": "2005-01-14T20:25:43Z", "is_private": false}, {"count": 6, "tags": [], "creator": "sambukkaa@hotmail.com", "text": "Being frankly, I didn\u2019t expect that someone would understand the picture \ncompletely.\n\nThat is why thatfrom the beginning, I have omitted many other things.\nThe answer to this specific question is as followed:\n\nStart a session in the caller.php \n\nThe \"caller.php\" file would look now something like this:\n<?\nif(!session_id()){session_start();}\n$_SESSION['session'] = \"1\";\nsession_write_close();\n$str=include \"http://localhost/secured.php\";\n?>\n\nand the \"secured.php\" now would look like this:\n\n<?\nif(!session_id()){session_start();}\nif($_SESSION['session'] = \"1\")\n{\n$_SESSION['session'] = \"0\";\nsession_write_close();\nreturn (\"This should be hidden and could be called only from caller.php\");\n}\n?>\n\nnow one can manipulate the headers as much as he likes.\n\nDo you have any other arguments why the URL manipulation functions should also \nmanipulate the localhost URLs?\n", "id": 69708, "attachment_id": null, "bug_id": 33092, "creation_time": "2005-01-14T21:15:44Z", "time": "2005-01-14T21:15:44Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 33092, "attachment_id": null, "is_private": false, "id": 69709, "time": "2005-01-14T21:29:28Z", "creator": "nd@perlig.de", "creation_time": "2005-01-14T21:29:28Z", "text": "As said: \"localhost URLs\" *are* *not* *different* from any other URLs. If you\ndon't want the RewriteRules to be processed when the Host header is \"localhost\",\nuse RewriteCond to control it. If you don't know how this is possible, ask at a\nuser list. This is a bug database.\n\n*sigh*."}, {"count": 8, "tags": [], "creator": "sambukkaa@hotmail.com", "text": "O' sorry, You are right...I didn't think of that RewriteCond function\nsilly of me :( \n\n", "id": 69710, "attachment_id": null, "bug_id": 33092, "creation_time": "2005-01-14T21:50:41Z", "time": "2005-01-14T21:50:41Z", "is_private": false}]