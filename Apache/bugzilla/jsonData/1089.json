[{"attachment_id": null, "tags": [], "creator": "kr@it-practice.dk", "is_private": false, "count": 0, "id": 1570, "time": "2001-03-23T02:33:44Z", "bug_id": 1089, "creation_time": "2001-03-23T02:33:44Z", "text": "The LocationInfo class has a small performance-related bug:\n\nThe code in the initializer looks like this:\n\n // Check if we are running in IBM's visual age.\n  static boolean inVisualAge = false;\n  {\n\ttry {\n\t  Class dummy = Class.forName(\"com.ibm.uvm.tools.DebugSupport\");\n\t  inVisualAge = true;\n\t  LogLog.debug(\"Detected IBM VisualAge environment.\");\n\t} catch(Throwable e) { \n\t  // nothing to do\n\t}\n  }\n\nIt should have been\n\n // Check if we are running in IBM's visual age.\n  static boolean inVisualAge = false;\n  static {\n\ttry {\n\t  Class dummy = Class.forName(\"com.ibm.uvm.tools.DebugSupport\");\n\t  inVisualAge = true;\n\t  LogLog.debug(\"Detected IBM VisualAge environment.\");\n\t} catch(Throwable e) { \n\t  // nothing to do\n\t}\n  }\n\nThe problem is that while the boolean inVisualAge is static, the code \ninitializing it is not, so it is run on every new instance of the LocationInfo \nclass, generating a lot of unneeded calls to the classloader, and thus a lot of \nunneeded String objects."}, {"count": 1, "tags": [], "bug_id": 1089, "text": "Fixed in log4j 1.1. Thanks for the report!", "id": 1987, "time": "2001-04-22T06:26:46Z", "creator": "pathos@pandora.be", "creation_time": "2001-04-22T06:26:46Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Thanks a bunch. How did you find the bug?", "is_private": false, "id": 2004, "creator": "bugzilla@apache.org", "time": "2001-04-22T08:05:02Z", "bug_id": 1089, "creation_time": "2001-04-22T08:05:02Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 1089, "text": "No problem :)\nI ran my application in JProbe, and I discovered a lot of calls to Class.forName\n() that should't have been there, and when I backtraced it, it I quickly found \nthe class with the problem, but it did take a while before I figured out that \nit was just lacking the static keyword, since the code looks ok :)", "id": 2017, "time": "2001-04-22T10:32:40Z", "creator": "kr@it-practice.dk", "creation_time": "2001-04-22T10:32:40Z", "is_private": false, "attachment_id": null}]