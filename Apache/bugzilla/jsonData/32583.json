[{"count": 0, "tags": [], "text": "We encountered with the NullPointerException in using cvschangelog task.\n\nThe full exception stack trace is below. In debugging we found that the problem \nin parsing dates. The pattern is \"yyyy/MM/dd HH:mm:ss\" (see c_inputDate field \nin org.apache.tools.ant.taskdefs.cvslib.ChangeLogParser).\n\nThe CVS server we used logs dates in another format. Here is cites from command\ncvs log -d \">=2004/11/08\" :\n\n<....>\nrevision 1.46\ndate: 2004-12-07 10:38:04 +0000;  author: user1;  state: Exp;  lines: +23 -21\ncomment1\n----------------------------\nrevision 1.45\ndate: 2004-12-02 23:01:05 +0000;  author: user2;  state: Exp;  lines: +5 -2\ncommment2\n----------------------------\n<....>\n\nI think the cvschangelog task should try to parse date with several formats.\n\nHere is full exception stack trace:\nD:\\project\\cvschangelog_ant.xml:3: java.lang.NullPointerException\n        at org.apache.tools.ant.Task.perform(Task.java:373)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nCaused by: java.lang.NullPointerException\n        at java.util.Date.after(Date.java:871)\n        at org.apache.tools.ant.taskdefs.cvslib.ChangeLogTask.filterEntrySet(Cha\nngeLogTask.java:333)\n        at org.apache.tools.ant.taskdefs.cvslib.ChangeLogTask.execute(ChangeLogT\nask.java:262)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        ... 8 more\n--- Nested Exception ---\njava.lang.NullPointerException\n        at java.util.Date.after(Date.java:871)\n        at org.apache.tools.ant.taskdefs.cvslib.ChangeLogTask.filterEntrySet(Cha\nngeLogTask.java:333)\n        at org.apache.tools.ant.taskdefs.cvslib.ChangeLogTask.execute(ChangeLogT\nask.java:262)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)", "is_private": false, "id": 68101, "creator": "zakharov@scph.mipt.ru", "time": "2004-12-08T12:07:02Z", "bug_id": 32583, "creation_time": "2004-12-08T12:07:02Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 32583, "attachment_id": null, "is_private": false, "id": 68129, "time": "2004-12-08T19:30:51Z", "creator": "sbailliez@apache.org", "creation_time": "2004-12-08T19:30:51Z", "text": "Just curious. How do you have that date format ?\nDid you patch your cvs server to have ISO8601 date ?"}, {"count": 2, "tags": [], "bug_id": 32583, "attachment_id": null, "is_private": false, "id": 68133, "time": "2004-12-08T20:07:08Z", "creator": "zakharov@scph.mipt.ru", "creation_time": "2004-12-08T20:07:08Z", "text": "The cvs server was installed by our customer. So I don't know about the patach mentioned. \n\nAlso I'd like to add that the date which is tried to parse doesn't contain timezone information. I mean that our cvs server returns 2004-12-07 10:38:04 +0000, but only String 2004-12-07 10:38:04 is passed to parse into SimpleDateFormat. I think SimpleDateFormat will use default client time zone, which is not +0000 in our case."}, {"count": 3, "tags": [], "text": "We encountered this also after moveing from an old CVS server to a new one.  New\nCVS versions supply ISO date format, eg from\nhttp://jira.public.thoughtworks.org/browse/CC-38\n\nIn cvs 1.12.9, the output format of the cvs log command was changed. In\nparticular, the date: line now uses \"-\" as a date separator instead of \"/\", and\nadds a new field (\"+0000\").\n\nThe code at issue is \nhttp://cvs.apache.org/viewcvs.cgi/ant/src/main/org/apache/tools/ant/taskdefs/cvslib/ChangeLogParser.java?rev=1.29&view=markup\n\nclass ChangeLogParser {\n...\n/** input format for dates read in from cvs log */\n    private static final SimpleDateFormat INPUT_DATE\n        = new SimpleDateFormat(\"yyyy/MM/dd HH:mm:ss\");\n...\n}", "attachment_id": null, "id": 75483, "creator": "imadam@circadiant.com", "time": "2005-05-27T04:03:08Z", "bug_id": 32583, "creation_time": "2005-05-27T04:03:08Z", "is_private": false}, {"count": 4, "attachment_id": null, "creator": "imadam@circadiant.com", "is_private": false, "id": 75484, "time": "2005-05-27T04:09:51Z", "bug_id": 32583, "creation_time": "2005-05-27T04:09:51Z", "tags": [], "text": "Also BUG 30576 looks like a duplicate of this one (or vice versa.)"}, {"count": 5, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of 30576 ***", "attachment_id": null, "id": 75520, "creation_time": "2005-05-27T15:39:09Z", "time": "2005-05-27T15:39:09Z", "creator": "mbenson@apache.org", "bug_id": 32583, "is_private": false}]