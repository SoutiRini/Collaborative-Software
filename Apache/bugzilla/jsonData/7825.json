[{"attachment_id": null, "tags": [], "bug_id": 7825, "text": "XML declaration from build file:\n\n<?xml version=\"1.0\" encoding=\"Shift-JIS\" ?>\n\n(The encoding should have been \"Shift_JIS\".)\n\nGave me this error message:\n\n-------------------\nBuildfile: build.xml\n\nBUILD FAILED\n\nError reading project file\n-------------------\n\nIt would have been more help if the message could have at least said, \"Error \nprocessing XML declaration\" or some such. A better message would be \n\"unrecognized encoding in XML declaration.\"\n\n(I note that the declaration seems not to have been required in previous \nversions, as the Japanese magazine I was referring to did not show a \ndeclaration at all.)", "count": 0, "id": 12978, "time": "2002-04-08T02:27:45Z", "creator": "joel@alpsgiken.gr.jp", "creation_time": "2002-04-08T02:27:45Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 7825, "attachment_id": null, "id": 12980, "time": "2002-04-08T04:10:11Z", "creator": "steve_l@iseran.com", "creation_time": "2002-04-08T04:10:11Z", "is_private": false, "text": "We can always do with more helpful messages; if you can come up with a patch \nwhich is consistent then it will be considered for inclusion.\n\nNow, can I take exception to your comment that ant changed its behavior from \nthe past, based on some magazine article. Ant hands off XML file parsing to \nXML parsers, all of which implement the XML spec hosted at the w3c. This spec \nsays explicitly that the default file format is UTF-8 unless otherwise stated \n(or it detects that the file is stored in UTF-16 format by looking at the \nfirst few characters). Knowing this fact will not only let you work with ant, \nit will let you use XML properly.\n\nThat means ant has always parsed UTF-8 encoded content correctly, and always \nwill; anything else would violate the XML specification. If the article you \nread showed Japanese characters in the file, then they saved the file in UTF-8 \nformat. "}, {"text": "fixed in nightly build 2002-04-10", "tags": [], "bug_id": 7825, "attachment_id": null, "count": 2, "id": 13098, "time": "2002-04-09T14:43:42Z", "creator": "bodewig@apache.org", "creation_time": "2002-04-09T14:43:42Z", "is_private": false}, {"count": 3, "tags": [], "creator": "joel@alpsgiken.gr.jp", "text": "Created attachment 1535\ntest case: build file with bad xml declaration and shift-jis comments", "id": 13359, "time": "2002-04-12T13:09:53Z", "bug_id": 7825, "creation_time": "2002-04-12T13:09:53Z", "is_private": false, "attachment_id": 1535}, {"count": 4, "tags": [], "bug_id": 7825, "attachment_id": 1536, "text": "Created attachment 1536\ntest case: build file with good xml declaration and shift-jis comments", "id": 13360, "time": "2002-04-12T13:10:34Z", "creator": "joel@alpsgiken.gr.jp", "creation_time": "2002-04-12T13:10:34Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 7825, "attachment_id": 1537, "text": "Created attachment 1537\ntest case: build file with no xml declaration but with shift-jis comments", "id": 13361, "time": "2002-04-12T13:11:08Z", "creator": "joel@alpsgiken.gr.jp", "creation_time": "2002-04-12T13:11:08Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 7825, "attachment_id": 1538, "id": 13362, "time": "2002-04-12T13:11:39Z", "creator": "joel@alpsgiken.gr.jp", "creation_time": "2002-04-12T13:11:39Z", "is_private": false, "text": "Created attachment 1538\ntest case: build file with no xml declaration and no shift-jis comments"}, {"count": 7, "tags": [], "creator": "bodewig@apache.org", "text": "Whow, I didn't know I'd have the correct fonts on my machine and that Mozilla'd\nbe able to display the 8-)\n\nOK, this is what you get with current Ant\n\nFirst attachment:\nBUILD FAILED\nEncoding of project file is invalid.\n\nSecond attachment:\nBUILD FAILED\n/tmp/att2.xml:2: Basedir /tmp/src does not exist\n\nso Ant works on the file\n\nThird attachment:\nBUILD FAILED\n/tmp/att3.xml:1: Character conversion error: \"Unconvertible UTF-8 character\nbeginning with 0x83\" (line number may be too low).\n\ni.e. the XML parser assumes UTF-8.\n\nFouth attachment:\nBUILD FAILED\n/tmp/att4.xml:2: Basedir /tmp/src does not exist\n\nI think we can close this entry.", "id": 13383, "time": "2002-04-12T15:23:51Z", "bug_id": 7825, "creation_time": "2002-04-12T15:23:51Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 7825, "attachment_id": null, "text": "Not sure if this is necessary, but, just for the record concerning Steve \nLoughran's comment about my inferring that ant's behavior must have changed: \n\nI asked a co-worker if he had ever run ant without using an XML header. He said \nhe hadn't. \n\nI'm not motivated to find out if there was an actual change. If someone else \nis, I suppose they could check JavaWorld (Japan) for errata, or contact them to \nsee if they tested the sample listing after translating the comments, and, if \nso, on what version.", "id": 13810, "time": "2002-04-17T02:17:42Z", "creator": "joel@alpsgiken.gr.jp", "creation_time": "2002-04-17T02:17:42Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 7825, "attachment_id": null, "text": "well, ant didnt change; that stuff is XML parser layer details. By the time we \nsee it is all unicode. So maybe your colleague used an 'illegal' parser. \n\n\nI am reopening this to remind me to put in the test cases...we should add a \nturkish one too as that *has* caught us out.", "id": 13822, "time": "2002-04-17T04:30:53Z", "creator": "steve_l@iseran.com", "creation_time": "2002-04-17T04:30:53Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 7825, "attachment_id": null, "id": 13824, "time": "2002-04-17T04:49:41Z", "creator": "joel@alpsgiken.gr.jp", "creation_time": "2002-04-17T04:49:41Z", "is_private": false, "text": "I've checked the build files I've uploaded in my dev environment on \"Apache Ant \nversion 1.5alpha compiled on April 16 2002\" and they give the indicated \nmessages.\n\nI have some suggestions for the wording:\n\n    Invalid encoding specification in project's XML declaration.\n\n    [/tmp/att3.xml:1: Character conversion error: \"Unconvertible \n    UTF-8 character beginning with 0x83\" (line number may be too \n    low], check encoding specification in XML declaration[).]\n\nI don't know what other errors these messages are used for, but I'm guessing \nthat being so specific won't be misleading."}, {"count": 11, "tags": [], "creator": "joel@alpsgiken.gr.jp", "text": "ACK:\n\nI did not make that clear -- Because my colleague has always used a valid XML \ndeclaration, he has never seen the error message in question at all. Ergo, no \nreal evidence that there has been a change in relation to handling multi-byte \ncharacters. All in my fevered imagination. \n\n(BTW, I didn't really intend to claim that there was a change, just offering \nwhat I thought might be relevant information.)  \n", "id": 13826, "time": "2002-04-17T05:04:19Z", "bug_id": 7825, "creation_time": "2002-04-17T05:04:19Z", "is_private": false, "attachment_id": null}]