[{"count": 0, "tags": [], "bug_id": 28931, "is_private": false, "text": "Hi,\n\nIn Apache 1.3 I was able to use\n...\nAddHandler htmlhandler .html\nAction htmlhandler /cgi/myhandler.perl\n...\n<VirtualHost *>\n  ServerName a.com\n  DirectoryIndex index.html?host=a\n</VirtualHost>\n<VirtualHost *>\n  ServerName b.com\n  DirectoryIndex index.html?host=b\n</VirtualHost>\n...\nIn Apache 2, it seems that everything after (and including) the '?' is dropped.", "id": 57289, "time": "2004-05-12T16:21:15Z", "creator": "andrew.miehs@friendscout24.de", "creation_time": "2004-05-12T16:21:15Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 28931, "text": "At best I would consider this an enhancement request.", "id": 66421, "time": "2004-11-04T03:41:24Z", "creator": "chip@force-elite.com", "creation_time": "2004-11-04T03:41:24Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 28931, "text": "I was not able to reproduce the issue for http 2.2.x.\n\nFor me, behavior is identical in 2.2.x and 1.3.x. Here are the details :\n\nHere is apache 1.3.x configuration :\n\n----------------------------------------------\nNameVirtualHost *:4014\nAddHandler htmlhandler .html\nAction htmlhandler /cgi-bin/htmlhandler.pl\n\n<VirtualHost *:4014>\n  ServerName a.com\n  DirectoryIndex index.html?host=a\n</VirtualHost>\n\n<VirtualHost *:4014>\n  ServerName b.com\n  DirectoryIndex index.html?host=b\n</VirtualHost>\n----------------------------------------------\n\nHere is the htmlhandler.pl . It basically dumps the environment variable\n( helpful to show the query string etc.)\n#!/usr/bin/perl\n\nprint \"Content-Type: text/html\\r\\n\";\nprint \"\\r\\n\";\n\nforeach $var (sort(keys(%ENV))) {\n    $val = $ENV{$var};\n    $val =~ s|\\n|\\\\n|g;\n    $val =~ s|\"|\\\\\"|g;\n    print \"${var}=\\\"${val}\\\"\\n\";\n}\n----------------------------------------------\n\nFor a request /tmp/req1.txt\nGET / HTTP/1.1\nHost: a.com\nConnection: close\n\nResponse :\n\nDate: Tue, 27 Mar 2007 23:56:58 GMT\nServer: Apache/1.3.38-dev (Unix)\nContent-Location: index.html.en\nTCN: choice\nVary: negotiate,accept-language,accept-charset\nConnection: close\nTransfer-Encoding: chunked\nContent-Type: text/html\n\n420\nDOCUMENT_ROOT=\"/disk/apache/apache13/htdocs\"\nGATEWAY_INTERFACE=\"CGI/1.1\"\nHTTP_CONNECTION=\"close\"\nHTTP_HOST=\"a.com\"\nPATH=...\nPATH_INFO=\"/index.html\"\nPATH_TRANSLATED=\"/disk/apache/apache13/htdocs/index.html.en\"\nQUERY_STRING=\"host=a\"\nREDIRECT_QUERY_STRING=\"host=a\"\nREDIRECT_REDIRECT_STATUS=\"200\"\nREDIRECT_STATUS=\"200\"\nREDIRECT_URL=\"/index.html\"\nREMOTE_PORT=\"37073\"\nREQUEST_METHOD=\"GET\"\nREQUEST_URI=\"/\"\nSCRIPT_FILENAME=\"/disk/apache/apache13/cgi-bin/htmlhandler.pl\"\nSCRIPT_NAME=\"/cgi-bin/htmlhandler.pl\"\nSERVER_ADMIN=\"basantk@lbasantk3.mydomain\"\nSERVER_NAME=\"a.com\"\nSERVER_PORT=\"4014\"\nSERVER_PROTOCOL=\"HTTP/1.1\"\nSERVER_SIGNATURE=\"<ADDRESS>Apache/1.3.38-dev Server at a.com Port 4014</ADDRESS>\\n\"\nSERVER_SOFTWARE=\"Apache/1.3.38-dev (Unix)\"\n\n0\n\n----------------------------------------------\n\nFor a request /tmp/req2.txt\nGET / HTTP/1.1\nHost: b.com\nConnection: close\n\n\nResponse :\nDate: Tue, 27 Mar 2007 23:57:02 GMT\nServer: Apache/1.3.38-dev (Unix)\nContent-Location: index.html.en\nTCN: choice\nVary: negotiate,accept-language,accept-charset\nConnection: close\nTransfer-Encoding: chunked\nContent-Type: text/html\n\n420\nDOCUMENT_ROOT=\"/disk/apache/apache13/htdocs\"\nGATEWAY_INTERFACE=\"CGI/1.1\"\nHTTP_CONNECTION=\"close\"\nHTTP_HOST=\"b.com\"\nPATH=...\nPATH_INFO=\"/index.html\"\nPATH_TRANSLATED=\"/disk/apache/apache13/htdocs/index.html.en\"\nQUERY_STRING=\"host=b\"\nREDIRECT_QUERY_STRING=\"host=b\"\nREDIRECT_REDIRECT_STATUS=\"200\"\nREDIRECT_STATUS=\"200\"\nREDIRECT_URL=\"/index.html\"\nREMOTE_PORT=\"37074\"\nREQUEST_METHOD=\"GET\"\nREQUEST_URI=\"/\"\nSCRIPT_FILENAME=\"/disk/apache/apache13/cgi-bin/htmlhandler.pl\"\nSCRIPT_NAME=\"/cgi-bin/htmlhandler.pl\"\nSERVER_ADMIN=\"basantk@lbasantk3.mydomain\"\nSERVER_NAME=\"b.com\"\nSERVER_PORT=\"4014\"\nSERVER_PROTOCOL=\"HTTP/1.1\"\nSERVER_SIGNATURE=\"<ADDRESS>Apache/1.3.38-dev Server at b.com Port 4014</ADDRESS>\\n\"\nSERVER_SOFTWARE=\"Apache/1.3.38-dev (Unix)\"\n\n0\n----------------------------------------------\n\nNot the query string is different for a.com and b.com\n----------------------------------------------\n\nNow the same thing for httpd 2.2.x\n\nNameVirtualHost *:4004\nAddHandler htmlhandler .html\nAction htmlhandler /cgi-bin/htmlhandler.pl\n\n<VirtualHost *:4004>\n  ServerName a.com\n  DirectoryIndex index.html?host=a\n</VirtualHost>\n\n<VirtualHost *:4004>\n  ServerName b.com\n  DirectoryIndex index.html?host=b\n</VirtualHost>\n----------------------------------------------\n\nFor req1.txt \n\nDate: Wed, 28 Mar 2007 00:01:20 GMT\nServer: Apache/2.2.5-dev (Unix) mod_ssl/2.2.5-dev OpenSSL/0.9.8a DAV/2\nConnection: close\nTransfer-Encoding: chunked\nContent-Type: text/html\n\n417\nDOCUMENT_ROOT=\"/disk/apache/apache2/htdocs\"\nGATEWAY_INTERFACE=\"CGI/1.1\"\nHTTP_CONNECTION=\"close\"\nHTTP_HOST=\"a.com\"\nLANG=\"en_US\"\nPATH=...\nPATH_INFO=\"/index.html\"\nPATH_TRANSLATED=\"/disk/apache/apache2/htdocs/index.html\"\nQUERY_STRING=\"host=a\"\nREDIRECT_HANDLER=\"htmlhandler\"\nREDIRECT_QUERY_STRING=\"host=a\"\nREDIRECT_STATUS=\"200\"\nREDIRECT_URL=\"/index.html\"\nREMOTE_PORT=\"58361\"\nREQUEST_METHOD=\"GET\"\nREQUEST_URI=\"/\"\nSCRIPT_FILENAME=\"/disk/apache/apache2/cgi-bin/htmlhandler.pl\"\nSCRIPT_NAME=\"/cgi-bin/htmlhandler.pl\"\nSERVER_ADMIN=\"you@example.com\"\nSERVER_NAME=\"a.com\"\nSERVER_PORT=\"80\"\nSERVER_PROTOCOL=\"HTTP/1.1\"\nSERVER_SIGNATURE=\"\"\nSERVER_SOFTWARE=\"Apache/2.2.5-dev (Unix) mod_ssl/2.2.5-dev OpenSSL/0.9.8a DAV/2\"\n\n0\n\n----------------------------------------------\nFor req2.txt  :\n\nDate: Wed, 28 Mar 2007 00:01:26 GMT\nServer: Apache/2.2.5-dev (Unix) mod_ssl/2.2.5-dev OpenSSL/0.9.8a DAV/2\nConnection: close\nTransfer-Encoding: chunked\nContent-Type: text/html\n\n417\nDOCUMENT_ROOT=\"/disk/apache/apache2/htdocs\"\nGATEWAY_INTERFACE=\"CGI/1.1\"\nHTTP_CONNECTION=\"close\"\nHTTP_HOST=\"b.com\"\nLANG=\"en_US\"\nPATH=...\nPATH_INFO=\"/index.html\"\nPATH_TRANSLATED=\"/disk/apache/apache2/htdocs/index.html\"\nQUERY_STRING=\"host=b\"\nREDIRECT_HANDLER=\"htmlhandler\"\nREDIRECT_QUERY_STRING=\"host=b\"\nREDIRECT_STATUS=\"200\"\nREDIRECT_URL=\"/index.html\"\nREMOTE_PORT=\"58362\"\nREQUEST_METHOD=\"GET\"\nREQUEST_URI=\"/\"\nSCRIPT_FILENAME=\"/disk/apache/apache2/cgi-bin/htmlhandler.pl\"\nSCRIPT_NAME=\"/cgi-bin/htmlhandler.pl\"\nSERVER_ADMIN=\"you@example.com\"\nSERVER_NAME=\"b.com\"\nSERVER_PORT=\"80\"\nSERVER_PROTOCOL=\"HTTP/1.1\"\nSERVER_SIGNATURE=\"\"\nSERVER_SOFTWARE=\"Apache/2.2.5-dev (Unix) mod_ssl/2.2.5-dev OpenSSL/0.9.8a DAV/2\"\n\n0\n----------------------------------------------\nNote that for various host query strings are different.\n\nI believe the bug is invalid.\n", "id": 101072, "time": "2007-03-27T17:11:16Z", "creator": "basant.kukreja@sun.com", "creation_time": "2007-03-27T17:11:16Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 28931, "text": "Since, the bug is not reproducible in 2.2.x so I am closing the bug as Invalid.", "id": 101120, "time": "2007-03-28T11:25:42Z", "creator": "basant.kukreja@sun.com", "creation_time": "2007-03-28T11:25:42Z", "is_private": false, "attachment_id": null}]