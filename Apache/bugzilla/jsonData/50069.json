[{"count": 0, "tags": [], "creator": "MaassG@web.de", "attachment_id": 26152, "id": 140639, "time": "2010-10-10T13:17:46Z", "bug_id": 50069, "creation_time": "2010-10-10T13:17:46Z", "is_private": false, "text": "Created attachment 26152\npatch to fix the reported bug\n\n----------------------------------------------------------------------------------\nPleading for a simpler and more flexible Context Configuration scheme with Tomcat.\n----------------------------------------------------------------------------------\nWith every major upgrade of Tomcat multi-level context paths do not work any more \nas is currently the case with version 6.0.29 and version 7.0.2.\nAs internet search statistics show there is much confusion of ideas and\napplication of the context configuration attributes \"docBase\" and \"path\".\nSometimes they have to specified, sometimes they are ignored. \n\n--------------------------------------------------------------------------------\nCurrent status\n--------------------------------------------------------------------------------\n  http://tomcat.apache.org/tomcat-6.0-doc/config/host.html#Automatic%20Application%20Deployment\n \n  Context attributes - http://tomcat.apache.org/tomcat-6.0-doc/config/context.html\n  path:\n  The value of this field must not be set except when statically defining a Context\n  in server.xml, as it will be inferred from the filenames used for either the .xml\n  context file or the docBase.\n  \n  docBase:\n  The Document Base (also known as the Context Root) directory for this web application,\n  or the pathname to the web application archive file (if this web application is being\n  executed directly from the WAR file). You may specify an absolute pathname for this\n  directory or WAR file, or a pathname that is relative to the appBase directory\n  of the owning Host.\n    \n  WARNUNG: A docBase \"...\" inside the host appBase has been specified, and will be\n           ignored\n\n  Multi-Level context paths:\n  Multi-level context paths may be defined using #, e.g. foo#bar.xml for a\n  context path of /foo/bar.     \n\n  \n- Automatic Application Deployment without an application specific\n  context XML descriptor file in $CATALINA_BASE/conf/[engine_name]/[host_name] \n    \n  docBase  | path      | context XML descriptor |\n  ---------+-----------+------------------------+\n  /foo#bar | /foo/bar  |                        |\n\n\n- Automatic Application Delployment with an application specific \n  context XML descriptor file in $CATALINA_BASE/conf/[engine_name]/[host_name]\n\n  docBase  | path      | context XML descriptor |\n  ---------+-----------+------------------------+\n  /foo/bar | /foo/bar  | foo#bar.xml            |\n  /foo#bar | /foo/bar  | xyz.xml -> foo#bar.xml | does not work after rebooting\n  \n  Deployment with Tomcat Web Application Manager:\n  Context Path (required)   : /foo/bar  \t\n  XML Configuration file URL: foo-bar.xml     \t\n  WAR or Directory URL      : .../foo/bar\n  ===> results in\n  context XML descriptor - path       - docBase\n  foo#bar.xml              /foo/bar     /foo#bar  \n  ===> should?! result in\n  context XML descriptor - path       - docBase\n  foo#bar.xml              /foo/bar     /foo/bar  \n  \n--------------------------------------------------------------------------------  \nPlea\n--------------------------------------------------------------------------------\n - Abondon linking of docBase and path to the context XML descriptor file name.\n - Deprecate usage of the '#' character to define multi-level context paths\n - Allow for unrestricted freedom to combine docBase with path settings in \n   accordance with the user's needs.\n   \n Sometimes less is more!"}, {"count": 1, "tags": [], "bug_id": 50069, "attachment_id": null, "is_private": false, "id": 140640, "time": "2010-10-10T13:28:35Z", "creator": "markt@apache.org", "creation_time": "2010-10-10T13:28:35Z", "text": "I have read this report multiple times and I still don't understand it.\n\nMulti-level contexts work for me with the latest 6.0.x and 7.0.x code.\n\nThe link between contextPath and docBase will not be broken. It is a deliberate design designed that was made to simplify the auto-deployment process.\n\nIf there are areas of the documentation that you think could be improved then patches suggestions for changes to the wording are welcome."}, {"count": 2, "tags": [], "bug_id": 50069, "attachment_id": null, "is_private": false, "id": 140644, "time": "2010-10-10T15:04:31Z", "creator": "MaassG@web.de", "creation_time": "2010-10-10T15:04:31Z", "text": "Dear Mark Thomas,\n\nI think I'm now understanding the facts.\nYou're right saying multi-level paths still work.\nThe point of confusion here is that from version 6.x.x on\nmulti-level docBases are'nt supported any further with the\nexception of docBases being outside of the appBase of the host.\n\n\n   docBase          |  path     | context XML descriptor file\n--------------------+-----------+----------------------------\n1. webapps/foo#bar  |  /foo/bar | \n2. webapps/foo/bar  |  /foo/bar | \n\nwith version 5.x.x both 1. and 2. does work.\nfrom version 6.x.x, 7.x.x on only case 1. works.\n\nbest regards\ngm"}, {"count": 3, "tags": [], "bug_id": 50069, "attachment_id": null, "is_private": false, "id": 140645, "time": "2010-10-10T15:07:39Z", "creator": "markt@apache.org", "creation_time": "2010-10-10T15:07:39Z", "text": "OK. That's clearer. This is not going to change.\n\n2. Was never intended to work and if it does it is pure luck."}]