[{"count": 0, "attachment_id": null, "bug_id": 5855, "is_private": false, "id": 9641, "time": "2002-01-14T23:44:42Z", "creator": "patrick.luby@planamesa.com", "creation_time": "2002-01-14T23:44:42Z", "tags": [], "text": "While working with the current admin webapp development, I noticed that when the \n\"reload\" option in the manager webapp is used (e.g.\nhttp://localhost:8080/manager/reload?path=/admin), no LifecycleListener events \nare fired.\n\nHowever, if I use either the \"start\" or \"stop\" options, a LifecycleListener event \nis fired.\n\nI would expect that a reload would fire a \"stop\" event and then a \"start\" event \nto the any LifecycleListener objects in the \norg.apache.catalina.core.StandardContext class."}, {"count": 1, "tags": [], "bug_id": 5855, "text": "We can't fire \"start\" or \"stop\" here since it would trigger a lot of things we\ndon't want to trigger (the naming listener, the context config, etc etc). We\ncould consider throwing a new lifecycle event type (\"reload\" for example) at the\nend of the reload.", "id": 9876, "time": "2002-01-24T19:13:16Z", "creator": "remm@apache.org", "creation_time": "2002-01-24T19:13:16Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 5855, "text": "I did some more debugging on this problem and I think the issue is a bit more \nsolvable. The problem, I believe, is that the reload() method is not sending \n\"RemoveChild\" and \"AddChild\" events to LifecycleListeners.\n\nWould this cause any problems?\n", "id": 9877, "time": "2002-01-24T19:18:11Z", "creator": "patrick.luby@planamesa.com", "creation_time": "2002-01-24T19:18:11Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 5855, "is_private": false, "id": 9878, "time": "2002-01-24T19:23:18Z", "creator": "remm@apache.org", "creation_time": "2002-01-24T19:23:18Z", "tags": [], "text": "A reload doesn't add or remove anything, so it shouldn't send those events\n(which would, as I mentioned, end up triggering a lot of other events which we\ndon't want to trigger here).\nSince we're doing a different action, we should notify it differently (if, of\ncourse, we think it's an event worthy enough of a notification).\nOtherwise, you're correct that it's the ContainerBase which sends the events."}, {"count": 4, "tags": [], "creator": "patrick.luby@planamesa.com", "attachment_id": null, "is_private": false, "id": 9883, "time": "2002-01-24T19:54:40Z", "bug_id": 5855, "creation_time": "2002-01-24T19:54:40Z", "text": "Hmmm. The problem I am seeing is that the manager webapp's reload action removes \nthe context's attributes. However, the ServerLifecycleListener uses an attribute \nto make catalina's MBeans server accessible to webapps.\n\nMaybe this problem can be worked around by making the MBeans server accessible \nvia a static method in Globals.java or some similar means?\n"}, {"count": 5, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "A reload will now generate a \"reload\" lifecycle event. The event will be\ngenerated after the reload is complete.\nSorry, we really can't generate a \"start\" or a \"stop\", unless we choose to\nchange what a reload currently does (right now, reload != stop + start).", "id": 9946, "time": "2002-01-27T01:20:18Z", "bug_id": 5855, "creation_time": "2002-01-27T01:20:18Z", "is_private": false}, {"count": 6, "attachment_id": null, "bug_id": 5855, "is_private": false, "id": 9970, "time": "2002-01-28T04:46:20Z", "creator": "patrick.luby@planamesa.com", "creation_time": "2002-01-28T04:46:20Z", "tags": [], "text": "Added handling of Lifecycle.RELOAD_EVENTS in ServerLifecycleListener class to fix \nthis bug in regards to the Admin webapp.\n"}]