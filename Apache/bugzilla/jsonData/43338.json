[{"count": 0, "tags": [], "text": "SRV 6.2.5 says supporting for '*' as the servlet-name in filter-mapping.\nI set following filter-mapping.\n    <filter-mapping>\n        <filter-name>SampleFilter</filter-name>\n        <servlet-name>*</servlet-name>\n    </filter-mapping>\n\nHowever, InvocationTargetException occurred in Digester. \nIt is as follows.\n\nSep 10, 2007 7:16:56 PM org.apache.tomcat.util.digester.Digester endElement\nSEVERE: End event threw exception\njava.lang.reflect.InvocationTargetException\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.apache.tomcat.util.IntrospectionUtils.callMethod1\n(IntrospectionUtils.java:899)\n\tat org.apache.tomcat.util.digester.SetNextRule.end\n(SetNextRule.java:193)\n\tat org.apache.tomcat.util.digester.Rule.end(Rule.java:229)\n\tat org.apache.tomcat.util.digester.Digester.endElement\n(Digester.java:1058)\n\tomit...\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nCaused by: java.lang.IllegalArgumentException: Filter mapping must specify \neither a <url-pattern> or a <servlet-name>\n\tat org.apache.catalina.core.StandardContext.addFilterMap\n(StandardContext.java:2160)\n\t... 44 more\n   omit...\n\n\nI made a StandardContext's patch.\n\nIndex:/tomcat6-trunk/java/org/apache/catalina/core/StandardContext.java\n===================================================================\n--- /tomcat6-trunk/java/org/apache/catalina/core/StandardContext.java\n\t(revision 574195)\n+++ /tomcat6-trunk/java/org/apache/catalina/core/StandardContext.java\n\t(working copy)\n@@ -2156,7 +2156,9 @@\n         if (findFilterDef(filterName) == null)\n             throw new IllegalArgumentException\n                 (sm.getString(\"standardContext.filterMap.name\", filterName));\n-        if ((servletNames.length == 0) && (urlPatterns.length == 0))\n+        if (!filterMap.getMatchAllServletNames() && \n+        \t\t!filterMap.getMatchAllUrlPatterns() && \n+                (servletNames.length == 0) && (urlPatterns.length == 0))\n             throw new IllegalArgumentException\n                 (sm.getString(\"standardContext.filterMap.either\"));\n         // FIXME: Older spec revisions may still check this\n\nI made a StandardContext's patch.\n\nRegards.", "attachment_id": null, "id": 107953, "creator": "keiichi.fujino@gmail.com", "time": "2007-09-10T03:45:11Z", "bug_id": 43338, "creation_time": "2007-09-10T03:45:11Z", "is_private": false}, {"count": 1, "tags": [], "text": "OK!\n\nI check you fix later today\n\nPeter\n", "attachment_id": null, "id": 108220, "creator": "pr@objektpark.de", "time": "2007-09-14T23:53:05Z", "bug_id": 43338, "creation_time": "2007-09-14T23:53:05Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 43338, "attachment_id": null, "is_private": false, "id": 108221, "time": "2007-09-15T00:56:16Z", "creator": "pr@objektpark.de", "creation_time": "2007-09-15T00:56:16Z", "text": "Many thanks to report this bug\nPeter\n"}, {"count": 3, "tags": [], "bug_id": 43338, "attachment_id": null, "is_private": false, "id": 122139, "time": "2008-11-03T06:29:12Z", "creator": "markt@apache.org", "creation_time": "2008-11-03T06:29:12Z", "text": "*** Bug 42683 has been marked as a duplicate of this bug. ***"}]