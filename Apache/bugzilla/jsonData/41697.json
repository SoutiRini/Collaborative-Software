[{"count": 0, "text": "currently, if the browser uses \"application/x-www-form-urlencoded\" and the\nfile.encoding system parameter is on \"UTF-8\"\n- the GET method treats it as ISO-8859-1\n- the POST method interprets it as UTF-8 while\n\nso, \"field=gr%FCsse\" will result in either\n\"gr\u00fcsse\" (or rather the distorted 2 characters for \"\u00fc\") with GET\nwhile with POST, you'll only get \"gr.\" (%FC becomes a byte with value 252 that\nin org.apache.tomcat.util.buf.ByteChunk.toStringInternal(), \n   strValue = new String( buff, start, end-start, enc );\ngets truncated).\n\nif I add to the connector tag in the server.xml the attribute\nURIEncoding=\"UTF-8\"  now POST and GET behave the same way (both truncating).\n\nEnhancement suggestions:\n1) align the config of GET and POST, i.e. drive the default for both by the\nfile.encoding System parameter or both by URIEncoding\n(http://tomcat.apache.org/tomcat-5.5-doc/config/http.html)\n2) allow the browser to specify the charset like for many other content types,\ne.g. 'application/x-www-form-urlencoded; charset=\"ISO8859-1\"' will also use\nISO-8859-1 even if the file.encoding is different\n\nsee also: Bug 34445, http://tomcat.apache.org/faq/connectors.html#utf8 and\nbottom of http://wiki.apache.org/tomcat/Tomcat/UTF-8", "bug_id": 41697, "is_private": false, "id": 99750, "time": "2007-02-25T05:03:57Z", "creator": "hauser@acm.org", "creation_time": "2007-02-25T05:03:57Z", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "hauser@acm.org", "is_private": false, "count": 1, "id": 99752, "time": "2007-02-25T05:20:30Z", "bug_id": 41697, "creation_time": "2007-02-25T05:20:30Z", "text": "having a charset apparently once was supported: Bug 10674\n\nsome browsers appear to expect charset to be supported:\nhttp://www.gossamer-threads.com/lists/modperl/asp/89156"}, {"attachment_id": null, "tags": [], "bug_id": 41697, "is_private": false, "count": 2, "id": 99757, "time": "2007-02-25T07:31:29Z", "creator": "remm@apache.org", "creation_time": "2007-02-25T07:31:29Z", "text": "This bug report makes claims which are fundamentally wrong. The default for\nparsing a POST body is never file.encoding (!) and ;charset= is of course\nsupported. If you do not believe me, feel free to look at\nRequest.parseParameters. Unless you can point out problems in the method, this\nreport is invalid."}, {"count": 3, "tags": [], "creator": "hauser@acm.org", "attachment_id": 19636, "text": "Created attachment 19636\nRequest.patch\n\nRemy, you are right. The problem was on our side.\nDuring the migration of our app to UTF-8 a developer had in a StrutsForm's\nreset() done a \n   request.setCharacterEncoding(\"UTF-8\");\n\nThe following patch might alert people with similar problems about\nirregularities in their own code...", "id": 99794, "time": "2007-02-26T04:15:25Z", "bug_id": 41697, "creation_time": "2007-02-26T04:15:25Z", "is_private": false}, {"count": 4, "text": "The warning message seems reasonable.", "bug_id": 41697, "is_private": false, "id": 99808, "time": "2007-02-26T10:21:59Z", "creator": "remm@apache.org", "creation_time": "2007-02-26T10:21:59Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 41697, "text": "Marked as closed rather than verified since verified indicates an open, confirmed bug. This will remove this issue from the weekly bug reports.", "id": 152617, "time": "2012-01-08T12:55:56Z", "creator": "markt@apache.org", "creation_time": "2012-01-08T12:55:56Z", "is_private": false, "attachment_id": null}]