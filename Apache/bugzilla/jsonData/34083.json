[{"count": 0, "tags": [], "bug_id": 34083, "is_private": false, "text": "In my opinion this code enabled by default is a little bit too much. First - \nif it's to protect security it should use just Cache-control: private. \nThat's what \"private\" is designed for. However this form adds numerous problems\nfor first-time Tomcat users. It is not well documented feature, and is enabled\nby default. It's incompatible with regular webserver behaviour. It's a bad\nprogramming design. It's not authenticator's responsibility to deal with\ncaching. Authenticator should just deal with authentication. Authenticator\nshould be fully transparent to other layers.\n\nResults are:\n\n* extensive server load - in our case javascript code put on a page caused the\npage being refreshed in every rollover element resulting in bad user experience,\n\n* problems with opening dynamically generated files - for both Mozilla and IE\nthis notion makes problems - the file is already expired when downloaded to the\nuser, which results in problems hard to debug, usually such a file will appear\nempty in mozilla, and IE will just say it can't open it\n\n\n        // Make sure that constrained resources are not cached by web proxies\n        // or browsers as caching can provide a security hole\n        if (disableProxyCaching && \n            // FIXME: Disabled for Mozilla FORM support over SSL \n            // (improper caching issue)\n            //!request.isSecure() &&\n            !\"POST\".equalsIgnoreCase(request.getMethod())) {\n            response.setHeader(\"Pragma\", \"No-cache\");\n            response.setHeader(\"Cache-Control\", \"no-cache\");\n            response.setHeader(\"Expires\", DATE_ONE);\n        }\n\nI would replace this code with just:\n\n        // or browsers as caching can provide a security hole\n        if (disableProxyCaching && \n            // FIXME: Disabled for Mozilla FORM support over SSL \n            // (improper caching issue)\n            //!request.isSecure() &&\n            !\"POST\".equalsIgnoreCase(request.getMethod())) {\n            response.setHeader(\"Cache-Control\", \"private\");\n        }", "id": 72690, "time": "2005-03-19T09:34:42Z", "creator": "mimo@proinet.pl", "creation_time": "2005-03-19T09:34:42Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "I disagree with this.", "is_private": false, "id": 72691, "creator": "remm@apache.org", "time": "2005-03-19T09:43:42Z", "bug_id": 34083, "creation_time": "2005-03-19T09:43:42Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 34083, "text": "Why we can't made the AuthenticatorBase mode configureable?", "id": 72716, "time": "2005-03-20T11:55:55Z", "creator": "pr@objektpark.de", "creation_time": "2005-03-20T11:55:55Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 34083, "attachment_id": null, "is_private": false, "id": 72723, "time": "2005-03-20T19:41:38Z", "creator": "william.barker@wilshire.com", "creation_time": "2005-03-20T19:41:38Z", "text": "(In reply to comment #2)\n> Why we can't made the AuthenticatorBase mode configureable?\n\nUrm, that's what 'disableProxyCaching' is for ;-).  Some of us got tired of \nremoving this stupid 'feature' everytime there was a new Tomcat release. See \n27122."}, {"count": 4, "attachment_id": null, "bug_id": 34083, "text": ">[...]\n> Urm, that's what 'disableProxyCaching' is for ;-).  Some of us got tired of \n> removing this stupid 'feature' everytime there was a new Tomcat release. See \n> 27122.\n\nI stand in position that such features should be at least disabled by default. I\nhaven't found out that this problem was noticed earlier. Is this kind of\n\"we-will-take-care-of-your-headers\" behaviour implemented in any other product?\nIs this forced by some specs? Is there some previous bug report that could\nsupport this concept?\n\n \n", "id": 72726, "time": "2005-03-20T20:53:15Z", "creator": "mimo@proinet.pl", "creation_time": "2005-03-20T20:53:15Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 34083, "attachment_id": null, "text": "*** Bug 34895 has been marked as a duplicate of this bug. ***", "id": 75743, "time": "2005-06-01T17:59:37Z", "creator": "Keith@Apache.org", "creation_time": "2005-06-01T17:59:37Z", "is_private": false}]