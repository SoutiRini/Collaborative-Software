[{"count": 0, "tags": [], "bug_id": 53849, "attachment_id": null, "text": "With ant 1.6.5 we used a javadoc task with sourcepathref and a packageList where packageList contains a list of packages which should only be used.\n\nNow with 1.8.4 the javadoc command is called (by Java13CommandLauncher) with all package names instead of only the package names from the packageList.\nThe filename from packageList is still added at the end of the javadoc command line option.\n\n\n <property name=\"packagefile\" value=\"${J_ROOT}/doc/package.lst\"/>\n <path id=\"src.dirs\">\n   <dirset dir=\"${J_ROOT}/projects\">\n    <include name=\"**/src/main/java\"/>\n   </dirset>\n </path>\n\n <javadoc sourcepathref=\"src.dirs\" destdir=\"${htmldestdir}\"\n  packageList=\"${packagefile}\"\n  Windowtitle=\"${windowtitle}\" Doctitle=\"${doctitle}\" Use=\"true\"\n  Splitindex=\"true\" maxmemory=\"512M\"\n  overview=\"${overviewfile}\" classpathref=\"classpath.extra\"\n  Version=\"${version}\" Author=\"${author}\">\n </javadoc>", "id": 162066, "time": "2012-09-11T13:14:36Z", "creator": "bernd.ernesti@oracle.com", "creation_time": "2012-09-11T13:14:36Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 53849, "text": "You are correct but I'm tempted to say it is by design:\n\n> NOTE: the packagelist attribute allows you to specify the list of packages to document outside of the Ant file. It's a much better practice to include everything inside the build.xml file. This option was added in order to make it easier to migrate from regular makefiles, where you would use this option of javadoc. The packages listed in packagelist are not checked, so the task performs even if some packages are missing or broken. Use this option if you wish to convert from an existing makefile. Once things are running you should then switch to the regular notation.", "id": 172078, "time": "2014-01-05T10:35:04Z", "creator": "bodewig@apache.org", "creation_time": "2014-01-05T10:35:04Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 53849, "attachment_id": null, "text": "Seems pretty clear it is not by design.  Debugging through the 1.9.8 code, on line 1787 of Javadoc.java, you'll see:\n        if (packageList != null) {\n            toExecute.createArgument().setValue(\"@\" + packageList);\n        }\n        log(toExecute.describeCommand(), Project.MSG_VERBOSE);\nThe command line after this point does not have the \"@packageListFile\" specified, but rather all packages found in the sources.  This is a bug.", "id": 203488, "time": "2018-01-25T17:30:37Z", "creator": "jim.gish@oracle.com", "creation_time": "2018-01-25T17:30:37Z", "is_private": false}]