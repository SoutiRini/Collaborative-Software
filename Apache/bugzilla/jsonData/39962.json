[{"count": 0, "tags": [], "creator": "ibegtin@yandex.ru", "text": "I have configuration with Apache 2.2.2 web server (win32)  and 3 Tomcat 4.1.31\nservers\nApache configured with mod_balancer to balance requests between these Tomcat\nservers.\n\nBalancer configuration below\n---\n<Location / >\nProxyPass balancer://app/ stickysession=JSESSIONID \nProxyPassReverse balancer://app/\n</Location>\n\n<Proxy balancer://app/>\n  # cluster member 1\n  BalancerMember http://192.168.1.110:8080/\n  # cluster member 2, the fastest machine so double the load\n  BalancerMember http://192.168.1.121:8080/\n  # cluster member 3\n  BalancerMember http://192.168.1.123:8089/\n</Proxy>\n---\nWhen I connect to the url \nhttp://localhost/index.html - Everything works well and this requests is handled\nby the balancer, but when I connect to the url http://localhost or\nhttp://localhost/ then I see following messages in log error.log and I am\nredirected directly to the url of one of the balanced members,\nhttp://192.168.1.110:8080 for example\n---\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy_balancer.c(41): proxy: BALANCER:\ncanonicalising URL //app/\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy_balancer.c(198): proxy: BALANCER:\nFound value 431BE460A707A293CED6C83763E66083.tomcat1 for stickysession JSESSIONID\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy_balancer.c(208): proxy: BALANCER:\nFound route tomcat1\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy_balancer.c(803): proxy: Entering\nbyrequests for BALANCER (balancer://app)\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy_balancer.c(396): proxy: BALANCER\n(balancer://app) worker (http://192.168.1.110:8080/) rewritten to\nhttp://192.168.1.110:8080//\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy.c(756): Running scheme balancer\nhandler (attempt 0)\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy_http.c(1662): proxy: HTTP: serving\nURL http://192.168.1.110:8080//\n[Tue Jul 04 11:30:59 2006] [debug] proxy_util.c(1798): proxy: HTTP: has acquired\nconnection for (192.168.1.110)\n[Tue Jul 04 11:30:59 2006] [debug] proxy_util.c(1858): proxy: connecting\nhttp://192.168.1.110:8080// to 192.168.1.110:8080\n[Tue Jul 04 11:30:59 2006] [debug] proxy_util.c(1951): proxy: connected // to\n192.168.1.110:8080\n[Tue Jul 04 11:30:59 2006] [debug] proxy_util.c(2045): proxy: HTTP: fam 2 socket\ncreated to connect to 192.168.1.110\n[Tue Jul 04 11:30:59 2006] [debug] proxy_util.c(2141): proxy: HTTP: connection\ncomplete to 192.168.1.110:8080 (192.168.1.110)\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy_http.c(1448): proxy: start body send\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy_http.c(1537): proxy: end body send\n[Tue Jul 04 11:30:59 2006] [debug] proxy_util.c(1816): proxy: HTTP: has released\nconnection for (192.168.1.110)\n[Tue Jul 04 11:30:59 2006] [debug] mod_proxy_balancer.c(424):\nproxy_balancer_post_request for (balancer://app)\n---\nAttempts removing trailing slashes were unsuccessfull, without them balancing\njust do not work at all.\n\nIn same time, balancing via AJP module works well and do not suffer from this\nproblem.", "id": 90882, "time": "2006-07-05T07:33:06Z", "bug_id": 39962, "creation_time": "2006-07-05T07:33:06Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 39962, "is_private": false, "text": "This is not a bug, but a misconfiguration on your side. Instead of\n\nProxyPassReverse balancer://app/\n\nIt must be\n\nProxyPassReverse http://192.168.1.110:8080/\nProxyPassReverse http://192.168.1.121:8080/\nProxyPassReverse http://192.168.1.123:8089/\n\nI admit that the documentation is not very clear about this.", "id": 90920, "time": "2006-07-05T19:58:09Z", "creator": "rpluem@apache.org", "creation_time": "2006-07-05T19:58:09Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "FWIW this was fixed in later 2.2 versions.", "attachment_id": null, "bug_id": 39962, "id": 127180, "time": "2009-05-19T10:56:17Z", "creator": "wrowe@apache.org", "creation_time": "2009-05-19T10:56:17Z", "is_private": false}]