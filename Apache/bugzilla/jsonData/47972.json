[{"count": 0, "tags": [], "bug_id": 47972, "attachment_id": null, "id": 131028, "time": "2009-10-09T06:10:54Z", "creator": "apache@wardbrook.com", "creation_time": "2009-10-09T06:10:54Z", "is_private": false, "text": "If you try creating a valve that wraps the response object and pass your response wrapper to the invoke call, eg\n\ngetNext().invoke(request, wrappedResponse);\n\nit will be ignored. The invoke method appears to use the response object stored within the request object instead of using the (2nd) response parameter in the invoke call.\n\nIn order to get my wrapper to be used, I had to add the following\n\nrequest.setResponse(wrappedResponse);\n\nbefore calling the invoke method eg\n\nrequest.setResponse(wrappedResponse);\ngetNext().invoke(request, wrappedResponse);"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Valves aren't intended to be used with wrappers although the idea is not an uncommon one - see bug 45014.\n\nI had a look at the standard Valves and the only place I could see where you might run into this was when using Comet.\n\nIf you could provide a simple test case with source code that demonstrated the issue that would help enormously.", "id": 132942, "time": "2009-12-18T11:10:09Z", "bug_id": 47972, "creation_time": "2009-12-18T11:10:09Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Closing due to inactivity.", "attachment_id": null, "id": 134107, "creator": "markt@apache.org", "time": "2010-02-01T09:12:40Z", "bug_id": 47972, "creation_time": "2010-02-01T09:12:40Z", "is_private": false}]