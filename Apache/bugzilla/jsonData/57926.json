[{"count": 0, "tags": [], "text": "After processing the request, the RemoteIPValve resets the RemoteAddr to its original value. The Header Fields X-Forwarded-By and X-Forwarded-For, that may have also been changed will not be reset to their original values.\n\nThis leads to an inconsistent state of the request after processing:\nBefore:\nRemoteAddr: 192.168.1.1\nX-Forwarded-For: 88.77.66.55\n\nAfter:\nRemoteAddr: 192.168.1.1\nX-Forwarded-For: null\n\nSo, the information that is probably most valuable to me is now neither in the RemoteAddr, nor in the X-Forwarded-For header. This may cause problems, because Access Logging is done after request processing. Depending on your logging config, the True Client IP will be completly lost from the logs.\n\nA workaround may be to set requestAttributesEnabled=true and log those attributes.", "attachment_id": null, "id": 182976, "creator": "bz.apache.org@gehrels.info", "time": "2015-05-13T16:13:58Z", "bug_id": 57926, "creation_time": "2015-05-13T16:13:58Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 57926, "attachment_id": null, "is_private": false, "id": 183010, "time": "2015-05-18T13:57:46Z", "creator": "markt@apache.org", "creation_time": "2015-05-18T13:57:46Z", "text": "Fixed in trunk for 9.0.x and in 8.0.x for 8.0.23 onwards."}]