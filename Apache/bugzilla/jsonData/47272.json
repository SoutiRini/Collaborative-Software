[{"count": 0, "tags": [], "text": "Created attachment 23718\ndon't segfault when crypt() fails\n\napr_password_validate() in apr-util doesn't verify that crypt() succeeded. It's very, very uncommon for crypt() to fail but it's possible.\n\nglibc 2.10.1 is able to use nss functions as backend for crypt(). nss library is \"smart\" enough to verify itself via special \"chk\" file. If chk file doesn't exist or is not readable (due to apparmor/selinux) then crypt() in glibc will simply return NULL.\n\nI also have man page which says:\n\"RETURN VALUE\n       A pointer to the encrypted password is returned.  On error, NULL is returned.\n\"\n\nOn my setup chk file from nss was not readable thus making mod_authn_xxx module segfault.\n\nAttached simple patch prevents segfault from happening.", "attachment_id": 23718, "id": 127438, "creator": "arekm@maven.pl", "time": "2009-05-27T03:15:48Z", "bug_id": 47272, "creation_time": "2009-05-27T03:15:48Z", "is_private": false}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "text": "Committed a slightly modified version of your patch (you missed one other location) in r779396. Thanks for the patch.", "id": 127460, "time": "2009-05-27T19:07:03Z", "bug_id": 47272, "creation_time": "2009-05-27T19:07:03Z", "is_private": false, "attachment_id": null}]