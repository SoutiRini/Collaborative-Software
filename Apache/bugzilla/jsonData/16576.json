[{"count": 0, "tags": [], "bug_id": 16576, "attachment_id": null, "is_private": false, "id": 30318, "time": "2003-01-30T01:50:28Z", "creator": "dave.whitla@ocean.net.au", "creation_time": "2003-01-30T01:50:28Z", "text": "The Catalina servlet container does not call the doAfterBody() method of a \nBodyTag handler if the BodyTag's corresponding XML tag in the JSP is empty.  \nWhile this may seem sensible, it is required by the JSP spec that \nsetBodyContent(), initBody() and doAfterBody() are called if the return value \nfrom doStartTag() is EVAL_BODY_BUFFERED.  In such a case the container should \npush an empty BodyContent object onto the pageContext BodyContent stack.  This \nmay break (has broken) web apps implementing custom tag handlers that conform \nto the standard."}, {"count": 1, "tags": [], "creator": "dave.whitla@ocean.net.au", "attachment_id": null, "is_private": false, "id": 30319, "time": "2003-01-30T02:07:30Z", "bug_id": 16576, "creation_time": "2003-01-30T02:07:30Z", "text": "Correction to the above: setBodyContent() should not be called for empty tags -\n however the description of doAfterBody() implies that this method should be \ncalled - the spec doc also seems to contradict itself here when comparing the \ntext to the state transition diagram of the same section which would seem to \nsuggest that setBodyContent() is a prerequisite of doInitBody() and doAfterBody\n() - some clarification of the spec perhaps?"}, {"count": 2, "tags": [], "bug_id": 16576, "attachment_id": null, "is_private": false, "id": 36352, "time": "2003-04-30T00:53:06Z", "creator": "kin-man.chung@sun.com", "creation_time": "2003-04-30T00:53:06Z", "text": "The javadoc for setBodyCountent says:\n\n\"This method is invoked by the JSP jage implementation object at most once per\naction invocation.  This method will be invoked before doInitBody.  This method\nwill not be invoked for empty tags or for non-empty tags whose doStartTag()\nmethod returns SKIP_BODY or EVAL_BODY_INCLUDE.\"\n\nThe spec is clear on this, I don't see how you can conclude that it is invoked\nafter doAfterBody.  Note the line from \"AFTER doAfterBody\" to \"AttSet is\ninitialized\" is for tag reuse."}]