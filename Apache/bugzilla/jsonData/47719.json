[{"text": "When a symbolic link is broken (points to a non-existent file), the ErrorDocument specified in the VirtualHost section is returned instead of the ErrorDocument specified in the Directory section.\n\nUsing out-of-the-box Unbutnu 8.04 server running Apache httpd 2.2.8.  Did not touch anything but Virtual Host config.  Here is the complete Virtual Host config:\n\nNameVirtualHost *\n<VirtualHost *>\n        ErrorDocument 403 \"Vhost 403\"\n        DocumentRoot /var/www/\n        <Directory />\n                ErrorDocument 403 \"root 403\"\n                Options FollowSymLinks\n                AllowOverride All\n        </Directory>\n        <Directory /var/www/>\n                ErrorDocument 403 \"/var/www 403\"\n                Options Indexes FollowSymLinks MultiViews\n                AllowOverride None\n        </Directory>\n</VirtualHost>\n\nI then went to /var/www which already had an index.html file in it and ran the following commands:\n\ncp index.html noperm.html\nchmod a-r noperm.html\nln -s noperm.html goodlink.html\nln -s broken badlink.html\n\n\nThis means:\n* index.html is a valid, readable file\n* noperm.html is a valid file but httpd does not have permission to read it\n* goodlink.html is a valid symbolic link to noperm.html\n* badlink.html is a symbolic link to a non-existent file in the same directory\n\n\nExpected result:\n\nhttp://localhost/index.html returns the contents of index.html\nhttp://localhost/noperm.html returns \"/var/www 403\" and status code 403\nhttp://localhost/goodlink.html returns \"/var/www 403\" and status code 403\nhttp://localhost/badlink.html returns \"/var/www 403\" and status code 403\n(I would actually prefer that badlink returns status code 404, but that is a battle I am not going to fight right now.)\n\n\nActual result:\nIndex, noperm, and goodlink work as expected.\nhttp://localhost/badlink.html returns \"Vhost 403\" and status code 403\n\n\nNote: setting EnableSendfile off does not change the results.", "tags": [], "bug_id": 47719, "attachment_id": null, "count": 0, "id": 129829, "time": "2009-08-20T17:37:38Z", "creator": "asfbugzilla@nuru.net", "creation_time": "2009-08-20T17:37:38Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 47719, "is_private": false, "id": 129830, "time": "2009-08-20T17:58:44Z", "creator": "asfbugzilla@nuru.net", "creation_time": "2009-08-20T17:58:44Z", "tags": [], "text": "I forgot to mention this may be related to Bug 28515"}, {"text": "IIUC The inaccessible link target stops the server from associating any file with the current request, so the per-directory config is not applicable to the error response.", "tags": [], "bug_id": 47719, "attachment_id": null, "count": 2, "id": 149731, "time": "2011-09-25T18:12:43Z", "creator": "covener@gmail.com", "creation_time": "2011-09-25T18:12:43Z", "is_private": false}, {"text": "Could you perhaps make this a feature request rather than \"wontfix\"?  I think the proper error handling of a broken symbolic link should be to handle it as a missing file in the same directory and with the same name as the symbolic link itself.    It should return a 404 as configured for that directory.", "tags": [], "bug_id": 47719, "attachment_id": null, "count": 3, "id": 149735, "time": "2011-09-25T19:30:48Z", "creator": "asfbugzilla@nuru.net", "creation_time": "2011-09-25T19:30:48Z", "is_private": false}]