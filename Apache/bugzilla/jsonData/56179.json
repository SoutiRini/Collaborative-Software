[{"count": 0, "tags": [], "bug_id": 56179, "is_private": false, "text": "I have the following JSP (test) file:\n\n<html>\n  <body>\n    ${((test == true))}\n  </body>\n</html>\n\nIn Tomcat 7.0.52 this works fine but in Tomcat 8.0.3 the contained EL expression throws the following ParseException:\n\norg.apache.catalina.core.StandardWrapperValve.invoke Servlet.service() for servlet [jsp] in context with path [/test] threw exception [An exception occurred processing JSP page /test.jsp at line 3\n\n1: <html>\n2:   <body>\n3:     ${((test == true))}\n4:   </body>\n5: </html>\n\n\nStacktrace:] with root cause\n org.apache.el.parser.ParseException: Encountered \" \"==\" \"== \"\" at line 1, column 10.\nWas expecting one of:\n    \")\" ...\n    \",\" ...\n    \n\tat org.apache.el.parser.ELParser.generateParseException(ELParser.java:3068)\n\tat org.apache.el.parser.ELParser.jj_consume_token(ELParser.java:2950)\n\tat org.apache.el.parser.ELParser.LambdaParameters(ELParser.java:380)\n\tat org.apache.el.parser.ELParser.LambdaExpressionOrInvocation(ELParser.java:419)\n\tat org.apache.el.parser.ELParser.NonLiteral(ELParser.java:1533)\n\tat org.apache.el.parser.ELParser.ValuePrefix(ELParser.java:1369)\n\tat org.apache.el.parser.ELParser.Value(ELParser.java:1316)\n\tat org.apache.el.parser.ELParser.Unary(ELParser.java:1298)\n\tat org.apache.el.parser.ELParser.Multiplication(ELParser.java:1060)\n\tat org.apache.el.parser.ELParser.Math(ELParser.java:980)\n\tat org.apache.el.parser.ELParser.Concatenation(ELParser.java:936)\n\tat org.apache.el.parser.ELParser.Compare(ELParser.java:747)\n\tat org.apache.el.parser.ELParser.Equality(ELParser.java:641)\n\tat org.apache.el.parser.ELParser.And(ELParser.java:585)\n\tat org.apache.el.parser.ELParser.Or(ELParser.java:529)\n\tat org.apache.el.parser.ELParser.Choice(ELParser.java:486)\n\tat org.apache.el.parser.ELParser.Assignment(ELParser.java:243)\n\tat org.apache.el.parser.ELParser.Semicolon(ELParser.java:182)\n\tat org.apache.el.parser.ELParser.Expression(ELParser.java:175)\n\tat org.apache.el.parser.ELParser.DynamicExpression(ELParser.java:147)\n\tat org.apache.el.parser.ELParser.CompositeExpression(ELParser.java:44)\n\tat org.apache.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java:111)\n\tat org.apache.el.lang.ExpressionBuilder.build(ExpressionBuilder.java:168)\n\tat org.apache.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:230)\n\tat org.apache.el.ExpressionFactoryImpl.createValueExpression(ExpressionFactoryImpl.java:67)\n\tat org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:955)\n\tat org.apache.jsp.test_jsp._jspService(test_jsp.java:65)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:725)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:403)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:347)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:725)", "id": 173435, "time": "2014-02-22T19:57:02Z", "creator": "holger.stenzhorn@gmail.com", "creation_time": "2014-02-22T19:57:02Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 56179, "attachment_id": null, "text": "Thanks for the report. The parser was getting confused by the unnecessary brackets and thought it was looking at a lambda expression. I have updated the parser to fix this and an additional related issue as well as adding some test cases to confirm the fix.\n\nThe fix will be included in 8.0.4 onwards.", "id": 173446, "time": "2014-02-24T11:19:54Z", "creator": "markt@apache.org", "creation_time": "2014-02-24T11:19:54Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 56179, "text": "Great! Thanks for the quick fix.", "id": 173449, "time": "2014-02-24T11:44:07Z", "creator": "holger.stenzhorn@gmail.com", "creation_time": "2014-02-24T11:44:07Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 56179, "attachment_id": null, "is_private": false, "id": 173471, "time": "2014-02-25T15:35:53Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-02-25T15:35:53Z", "text": "*** Bug 56185 has been marked as a duplicate of this bug. ***"}]