[{"count": 0, "tags": [], "text": "If there are two adjacent lines which should be matched by a <linecontains> \nfilter, the second line is missed.  This bug occurs in version 1.5Beta2 but not \nin version 1.5Beta1.\n\nYou can duplicate this bug with the following files:\n---------- begin build.xml ----------\n<project name=\"bug\" default=\"test\">\n\t<target name=\"test\">\n\t\t<loadproperties srcfile=\"test.props\">\n\t\t\t<filterchain>\n\t\t\t\t<linecontains>\n\t\t\t\t\t<contains value=\"foo.\"/>\n\t\t\t\t</linecontains>\n\t\t\t</filterchain>\n\t\t</loadproperties>\n\t\t<echo message=\"foo.bar = ${foo.bar}\"/>\n\t\t<echo message=\"foo.baz = ${foo.baz}\"/>\n\t</target>\n</project>\n---------- end build.xml ----------\n\n---------- begin test.props ----------\nfoo.bar=1\nfoo.baz=2\nbaz.bletch=3\n---------- end test.props ----------\n\nThis example should load the properties foo.bar and foo.baz, but it does not \nload foo.baz.\n\nI looked at the source code for LineContains.java and found the following code \nin the read() method.  This snippet is executed when looking for the next \nmatching line.  The comments are mine.\n\nline = readLine();\nwhile((line != null) && (goodLine == null)) {\n    // [code which sets goodLine to null if line doesn't match]\n    line = readLine(); // if we matched a line, this readLine() will be lost!\n}\nif (goodLine != null) {\n    line = goodLine;\n    return read();\n};\n\na quick fix is to change the while loop like this:\n\nwhile((line != null) && (goodLine == null)) {\n    // [code which sets goodLine to null if line doesn't match]\n    if (goodLine == null) {\n        line = readLine(); \n    }\n}", "attachment_id": null, "bug_id": 9762, "id": 17542, "time": "2002-06-11T00:22:37Z", "creator": "clingenp@aros.net", "creation_time": "2002-06-11T00:22:37Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "text": "Supposed to be fixed in the 1.5 branch, please try with the latest build\nfrom <http://cvs.apache.org/~bodewig/gump/ant1.5beta/>.\n", "id": 17644, "time": "2002-06-12T09:23:28Z", "bug_id": 9762, "creation_time": "2002-06-12T09:23:28Z", "is_private": false, "attachment_id": null}]