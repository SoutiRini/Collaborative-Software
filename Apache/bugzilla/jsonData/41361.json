[{"count": 0, "tags": [], "creator": "c.varney@alchemy.co.nz", "attachment_id": null, "text": "Given the following servlet:\n\npublic class GreetingServlet extends HttpServlet\n{\n  public void doGet(HttpServletRequest request, HttpServletResponse response)\n      throws ServletException, IOException\n  {\n    PrintWriter printWriter = response.getWriter();\n\n    for (int i = 0; i < 10000; i++)\n    {\n      printWriter.println(\"Servlet test................ Line: \" + i);\n\n      if (printWriter.checkError())  // this causes a flush\n      {\n        System.err.println(\"An error occurred, \" + i + \" lines written.\");\n      }\n    }\n\n    printWriter.close();\n  }\n}\n\n\n\nOnly the first 4328 rows are available for the following client to read:\n\n  public void testHTTPRead() throws Exception\n  {\n\n    URL url = new URL(\"http://localhost:/servlettest/test\");\n    URLConnection conn = url.openConnection();\n    InputStream inputStream = conn.getInputStream();\n\n    // Note these timings are sensitive - invoking inputStream.available()\n    // each second for 50 times and all the content can be read.\n    for (int i = 0; i < 5; i++)\n    {\n      System.out.println(inputStream.available());\n      Thread.sleep(10000);\n    }\n\n    InputStreamReader inputStreamReader = new InputStreamReader(inputStream);\n    BufferedReader in = new BufferedReader(inputStreamReader);\n\n    String str;\n    while ((str = in.readLine()) != null)\n    {\n      System.out.println(inputStream.available() + \" \" + str);\n    }\n\n  }\n\n\nThis may be related to bug 37627.", "id": 98041, "time": "2007-01-14T12:10:00Z", "bug_id": 41361, "creation_time": "2007-01-14T12:10:00Z", "is_private": false}, {"count": 1, "tags": [], "text": "Can you clarify the specifics of this issue a bit?  Are you seeing this issue\nwith just Tomcat standalone, or Tomcat in conjunction with Apache (or IIS)?\n\nI'm not able to repro this using plain Tomcat 5.5.20 on JDK 1.5 running on both\nLinux and Mac.  I used delay periods of 5, 10, 15, 20 and 30 seconds with total\ndelays of up to 120 seconds, and each test received the full output as expected.\n Sorry, I don't have a WinXP system to test on.", "is_private": false, "bug_id": 41361, "id": 98161, "time": "2007-01-16T16:29:50Z", "creator": "chris@sourcelabs.com", "creation_time": "2007-01-16T16:29:50Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "c.varney@alchemy.co.nz", "attachment_id": null, "is_private": false, "id": 98163, "time": "2007-01-16T17:52:53Z", "bug_id": 41361, "creation_time": "2007-01-16T17:52:53Z", "text": "Tomcat standalone.\n\nServer Information in the Tomcat manager reports:\n\nTomcat Version:  Apache Tomcat/5.5.20\nJVM Version:     1.5.0_04-b05\nJVM Vendor:      Sun Microsystems Inc.\nOS Name:         Windows XP\nOS Version:      5.1\nOS Architecture: x86\n\nThe problem also exists on our staging server:\n\nTomcat Version:  Apache Tomcat/5.5.20\nJVM Version:     1.5.0_09-b03\nJVM Vendor:      Sun Microsystems Inc.\nOS Name:         Windows 2003\nOS Version:      5.2\nOS Architecture: x86\n\nBoth are vanilla installs of Tomcat.\n\nNo problems are encountered when deploying to Sun Java System Application Server\nPlatform Edition 9.0_01\n\nAny other info I can provide?"}, {"count": 3, "tags": [], "text": "No content lost when testing against Tomcat without native support suggesting a\nproblem in tcnative-1.dll.", "is_private": false, "bug_id": 41361, "id": 98197, "time": "2007-01-17T11:17:28Z", "creator": "c.varney@alchemy.co.nz", "creation_time": "2007-01-17T11:17:28Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "chris@sourcelabs.com", "attachment_id": null, "is_private": false, "id": 98202, "time": "2007-01-17T12:49:57Z", "bug_id": 41361, "creation_time": "2007-01-17T12:49:57Z", "text": "RE #3 - that would certainly explain why I can't repro the issue on Linux or\nMacOS...;-)\n\nI'll see if I can get some time on a WinXP box to confirm the issue."}, {"count": 5, "tags": [], "bug_id": 41361, "attachment_id": null, "id": 100892, "time": "2007-03-25T09:26:47Z", "creator": "yoavs@computer.org", "creation_time": "2007-03-25T09:26:47Z", "is_private": false, "text": "I also can't reproduce this on standalone Tomcat using default HTTP/1.1\nconnector on Windows XP.  "}]