[{"count": 0, "tags": [], "bug_id": 8493, "is_private": false, "text": "My DOCUMENT_ROOT/.htaccess file looks like this:\n\nRewriteEngine on\nRewriteBase /\nRewriteCond %{DOCUMENT_ROOT}/wt/$1.py -f\nRewriteRule ^(.*)$ /wt/$1.py\n\nUnder Apache 1.3, when you try the URL http://www.example.com/ then mod_rewrite \nwill try running \"index.html\" through the rewrite rules. Under Apache 2.0, it \ndoes not, it just tries \"\". How do I get the old behaviour?", "id": 14670, "time": "2002-04-25T00:01:23Z", "creator": "jon+apache-bugzilla@unequivocal.co.uk", "creation_time": "2002-04-25T00:01:23Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 8493, "text": "Is there any danger of this bug report ever being addressed?", "id": 23314, "time": "2002-09-24T17:40:45Z", "creator": "jon+apache-bugzilla@unequivocal.co.uk", "creation_time": "2002-09-24T17:40:45Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 8493, "is_private": false, "text": "\n  Try using rewritelog and rewriteloglevel 9 \n\n  http://httpd.apache.org/docs-2.0/mod/mod_rewrite.html#rewritelog\n\n  to create a snapshot of the rewrite parsing of this request, and then\n  attach that to this bug.  Only then might we be able to determine what\n  mod_rewrite is doing (correctly or incorrectly.)", "id": 26008, "time": "2002-11-09T17:41:44Z", "creator": "wrowe@apache.org", "creation_time": "2002-11-09T17:41:44Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "jon+apache-bugzilla@unequivocal.co.uk", "attachment_id": 3792, "id": 26015, "time": "2002-11-09T19:52:39Z", "bug_id": 8493, "creation_time": "2002-11-09T19:52:39Z", "is_private": false, "text": "Created attachment 3792\nRewriteLog file showing problem"}, {"count": 4, "attachment_id": null, "bug_id": 8493, "text": "OK I have attached a log file showing this, I'm not sure how it helps since it \ndoesn't really show anything not described in my original report, but here it \nis ;-)", "id": 26016, "time": "2002-11-09T19:53:57Z", "creator": "jon+apache-bugzilla@unequivocal.co.uk", "creation_time": "2002-11-09T19:53:57Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 8493, "attachment_id": null, "id": 26021, "time": "2002-11-10T04:47:27Z", "creator": "wrowe@apache.org", "creation_time": "2002-11-10T04:47:27Z", "is_private": false, "text": "It showed one -very- interesting thing, an empty URI.\n\nThe only way to get an empty URI is a file redirect (as opposed to\na uri redirect.)  I'll ponder this and throw you more questions later.\n\nAny 'interesting' (non-standard) modules loaded?  Any interesting\nthings you've done in the corresponding <Location > or <Directory >\nblocks, or the core config?"}, {"count": 6, "tags": [], "bug_id": 8493, "attachment_id": null, "id": 26033, "time": "2002-11-10T13:09:16Z", "creator": "jon+apache-bugzilla@unequivocal.co.uk", "creation_time": "2002-11-10T13:09:16Z", "is_private": false, "text": "The configuration was completely standard. I downloaded a brand new copy of \napache 2.0.43 for this test. It was configured and installed with ./configure --\nprefix=/tmp --enable-rewrite and the httpd.conf was unchanged from the \ndistribution except for changing the listen port, adding \"AllowOverride all\" so \nthe .htaccess file would work, and adding the RewriteLog[Level] lines.\n\nThe htdocs directory was unchanged from the distribution except for adding a \ntrivial index.html file, creating a 'wt' directory under the htdocs directory, \ncreating an empty file 'wt/index.html.py', and creating a '.htaccess' file in \nthe htdocs directory whose contents were identical to that shown in the \noriginal bug report."}, {"count": 7, "attachment_id": null, "bug_id": 8493, "is_private": false, "id": 27343, "time": "2002-12-03T18:38:00Z", "creator": "dchee@uci.edu", "creation_time": "2002-12-03T18:38:00Z", "tags": [], "text": "I've seen this problem, too, with 2.0.40 (RH Linux 8.0 distribution).  I checked an old copy \nof 1.3.26 for comparison.\n\nI made a simple rule for testing:\nRewriteRule ^index\\.html$ rewritten.html\n\nThe internal redirects do not appear to be going through mod_rewrite.  See attachment \nfor a comparison of the rewrite_log between 2.0.40 and 1.3.26"}, {"count": 8, "tags": [], "creator": "dchee@uci.edu", "attachment_id": 4024, "text": "Created attachment 4024\nrewrite_log comparison between 1.3.26 and 2.0.40", "id": 27344, "time": "2002-12-03T18:39:11Z", "bug_id": 8493, "creation_time": "2002-12-03T18:39:11Z", "is_private": false}, {"count": 9, "tags": [], "creator": "yaktgz8k02@sneakemail.com", "attachment_id": null, "text": "I also ran in to this problem when migrating from 1.3.27 to 2.0.40-11 (Red Hat 8\nRPM). When ever / is requested (ie: http://www/example.com/ or\nhttp://www.example.com/foobar/) mod_rewrite doesn't resolve it to a\nDirectoryIndex file. This happens with REQUEST_FILENAME as well as SCRIPT_FILENAME.\n\nRewriteEngine On\n\nRewriteCond %{REQUEST_FILENAME} -f\nRewriteRule /* /cgi-bin/script.cgi [T=application/x-httpd-cgi,L]", "id": 30616, "time": "2003-02-04T07:31:40Z", "bug_id": 8493, "creation_time": "2003-02-04T07:31:40Z", "is_private": false}, {"count": 10, "attachment_id": 4708, "bug_id": 8493, "is_private": false, "id": 30617, "time": "2003-02-04T07:35:26Z", "creator": "yaktgz8k02@sneakemail.com", "creation_time": "2003-02-04T07:35:26Z", "tags": [], "text": "Created attachment 4708\nrewrite_log file illustrating the problem."}, {"count": 11, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "text": "> RewriteEngine On\n\n> RewriteCond %{REQUEST_FILENAME} -f\n> RewriteRule /* /cgi-bin/script.cgi [T=application/x-httpd-cgi,L]\n\nThis cannot work. /* matches only slashes. You probably want something like /.*\n\nThe other problem (DirectoryIndex doesn't apply):\nIMHO, This is not a mod_rewrite bug.\nIt seems, that we have more and more issues, comin' up with the new 2.0\ninternal_fast_redirect stuff, used, for example, by mod_dir.\nThat means especially that there is no longer a real internal redirect from / to\n/index.html, so it cannot apply.\n\nJon, you may try\nRewriteCond %{LA-U:REQUEST_FILENAME} -f\n...\n\nBug 13211 suffers from the same function (fast_redirect).\n\nEither we have to document it, or we should change it back to a normal internal\nredirect (or spend some time in reworking and rethinking that fast_redirect\nfunction). Opinions?", "id": 30639, "time": "2003-02-04T13:04:23Z", "bug_id": 8493, "creation_time": "2003-02-04T13:04:23Z", "is_private": false}, {"count": 12, "attachment_id": null, "bug_id": 8493, "text": "What does internal_fast_redirect exactly do/mean (since it is not documented, I \nhave to ask).\n\nMy personal opinion is that the rewrite-stuff should be better documented. I \nuse Apache (2) for quite a while now, but I simply cannot get certain rewrite-\nrules to work. Not because they aren't correct, but I always have problems \ngetting mod_rewrite to work at the right time (in comparison to other \ndirectives).\nBut I'm not sure if this related?", "id": 30659, "time": "2003-02-04T15:29:45Z", "creator": "info@orangexl.com", "creation_time": "2003-02-04T15:29:45Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 8493, "text": "the fast internal redirect doesn't do a real internal redirect (which would\nrepeat most of the request handling for the new url) instead of only merging the\ndata from a previous subrequest with the current request data at the point of\ncalling.\nmod_dir uses that for redirecting / to /index.html (or whatever).\n\nThe relation to this bug is:\nin 1.3 mod_dir causes an internal redirect, which processes all the api phases\nagain, so mod_rewrite gets a chance to match the new stuff. In 2.0 there's no\nredirect, so no chance for mod_rewrite (simple, eh? ;-)\n\nYour rewrite problems... perhaps you should look in the bug database for similar\nbugs or create a new entry?", "count": 13, "id": 30721, "time": "2003-02-05T10:41:57Z", "creator": "nd@perlig.de", "creation_time": "2003-02-05T10:41:57Z", "is_private": false}, {"count": 14, "tags": [], "creator": "dmxhin602@sneakemail.com", "attachment_id": null, "text": "I was wondering if there was any update for this bug report? I've been watching\nthe version changelog and the status of this page, but haven't seen anything.\n\nThanks much!", "id": 37368, "time": "2003-05-16T22:39:32Z", "bug_id": 8493, "creation_time": "2003-05-16T22:39:32Z", "is_private": false}, {"count": 15, "attachment_id": null, "bug_id": 8493, "text": "Please try the LA-U flag as already suggested.\n\nI'm changing the component to docs, since the new behaviour simply needs to be\ndocumented.", "id": 37369, "time": "2003-05-16T22:47:22Z", "creator": "nd@perlig.de", "creation_time": "2003-05-16T22:47:22Z", "tags": [], "is_private": false}, {"count": 16, "tags": [], "creator": "rj3jh2b02@sneakemail.com", "attachment_id": null, "id": 37374, "time": "2003-05-17T03:19:55Z", "bug_id": 8493, "creation_time": "2003-05-17T03:19:55Z", "is_private": false, "text": "I wish I could Andr\u00e9, but LA-F doesn't work and LA-U returns strange results.\nI'm using Red Hat's build (httpd-2.0.40-11.3) so I don't know off hand if this\nwould be an issue with the virgin distribution or not.\n\nIs this really a \"feature\" and not a bug in 2.x?"}, {"count": 17, "attachment_id": 6393, "bug_id": 8493, "text": "Created attachment 6393\nrewrite_log file for LA-F/LA-U.", "id": 37375, "time": "2003-05-17T03:21:00Z", "creator": "rj3jh2b02@sneakemail.com", "creation_time": "2003-05-17T03:21:00Z", "tags": [], "is_private": false}, {"count": 18, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "text": "Boomer, you are absolutely right. I was convinced it worked for me sometime, but\nthere was mod_negotiation involved...\n\nHowever, mod_rewrite has a bug, that LA-U in directory context doesn't work.\nJust fixed it in HEAD (and proposed for backporting to the stable trees).\n\nAfter fixing it, %{LA-U:REQUEST_URI) results in the actual delivered URI (e.g.\n/index.html) and %{LA-U:REQUEST_FILENAME} in the resulting /path/to/filename.\n\nIf you want to test it, the patch is here (the line numbers will differ for the\n2.0 branch, but that shouldn't be a problem):\n<http://cvs.apache.org/viewcvs.cgi/httpd-2.0/modules/mappers/mod_rewrite.c.diff?r1=1.150&r2=1.151>.\n\n(leaving in documentation category, because it's still new behaviour)", "id": 37389, "time": "2003-05-17T22:40:12Z", "bug_id": 8493, "creation_time": "2003-05-17T22:40:12Z", "is_private": false}, {"count": 19, "tags": [], "bug_id": 8493, "is_private": false, "text": "In 2.1 it's fixed, since rewrite rules work also in subrequests there.\n\nUnfortunately it's not likely to be backported, because it may lead to\nunexpected results in existing configurations.", "id": 50508, "time": "2004-01-14T00:39:38Z", "creator": "nd@perlig.de", "creation_time": "2004-01-14T00:39:38Z", "attachment_id": null}]