[{"count": 0, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "text": "In 8.0.9, 7.0.54: [1]\nReviewing the loop that finds correct web application version by a sessionid.\n\nLooking at [1], there shall be a \"break;\" after line 921.\n\nThis matters in the following rare scenario:\n1. There are several versions of the same web application that are deployed in parallel.\n2. The same sessionid is valid both for the latest version and for some older one.\n3. Expected result: map request to the latest version of the webapp.\nActual result: the latest version will be skipped and the request will be mapped to an older version.\n\n\n[1] http://svn.apache.org/viewvc/tomcat/tc8.0.x/tags/TOMCAT_8_0_9/java/org/apache/catalina/connector/CoyoteAdapter.java?view=markup#l916", "id": 175974, "time": "2014-06-22T16:25:15Z", "bug_id": 56657, "creation_time": "2014-06-22T16:25:15Z", "is_private": false}, {"count": 1, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "text": "Fixed by r1604605 r1604607 and will be in 7.0.55, 8.0.10 onwards.\n\nTomcat 6 is not affected, it does not implement parallel deployment.", "id": 175975, "time": "2014-06-22T16:39:55Z", "bug_id": 56657, "creation_time": "2014-06-22T16:39:55Z", "is_private": false}, {"count": 2, "text": "Additional minor issue in the same place.\n\nThere is no check that on the second mapping loop the \"version\" was applied to the same path as on the first loop.\n\nIf there is the following configuration:\nROOT#0\nROOT#latest\nbar#0\nbar#1\n\nConsider that a request for \"bar#0\" comes in. It performs a remapping loop to select the \"0\" version. Consider that bar#0 is paused and third remapping loop is required.\n\nIf both \"bar#0\" and \"bar#1\" are undeployed before remapping, the version variable remains \"0\", but it is being applied to a different path. So it may select ROOT#0 instead of expected ROOT#latest.\n\nGiven the complexity of configuration to observe this, it is kind of a theoretical issue.", "bug_id": 56657, "attachment_id": null, "id": 175977, "time": "2014-06-22T22:15:21Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-22T22:15:21Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 56657, "attachment_id": null, "text": "(In reply to Konstantin Kolinko from comment #2)\n\nFixed by r1604661 r1604662 and will be in 7.0.55, 8.0.10 onwards.", "id": 175978, "time": "2014-06-22T22:25:35Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-22T22:25:35Z", "is_private": false}]