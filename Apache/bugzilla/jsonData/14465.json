[{"count": 0, "tags": [], "creator": "jlewis36@sprintspectrum.com", "attachment_id": null, "text": "The expressions last() and position() both return 0 in every iteration of a \nforEach tag.  It is real hard to develop a JSTL app without these expressions \nworking.  When will this be fixed?  Below is a simple example that will \ndemonstrate the problem:\n\n<%@ taglib uri=\"http://java.sun.com/jstl/xml\" prefix=\"x\" %>\n<%@ taglib uri=\"http://java.sun.com/jstl/core\" prefix=\"c\" %>\n\n<html>\n\n<head>\n<title>Test</title>\n</head>\n\n<body>\n\n<x:parse var=\"xml\">\n\t<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\t<root>\n\t\t<name>\n\t\t\t<first>James</first>\n\t\t</name>\n\t\t<name>\n\t\t\t<first>Jose</first>\n\t\t</name>\n\t\t<name>\n\t\t\t<first>Jen</first>\n\t\t</name>\n\t</root>\n</x:parse>\n\n<x:forEach select=\"$xml/root/name\">\n\t<x:out select=\"first\"/>\n\t<x:out select=\"position()\"/>\n</x:forEach>\n</body>\n<html>\n\nIn this example the position() returns '0' every time.", "id": 26120, "time": "2002-11-12T04:51:38Z", "bug_id": 14465, "creation_time": "2002-11-12T04:51:38Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 14465, "attachment_id": null, "text": "This isn't a bug in the implementation; I believe it requires additional \nsupport from the JSTL specification before being implemented.  In particular, \nthe following definitions would need to be added:\n\nI believe it would involve adding definitions to the\nspec along the following lines:\n\n Inside the body of the <x:forEach> tag, the context for XPath expression\n evaluations is obtained as follows:\n\n  * variable, function, and namespace bindings operate as in the rest of\n    JSTL\n  * the context node is the node whose representation would be exposed by\n    'var' (whether or not the 'var' attribute is specified)\n  * the context position is the iteration 'count' (with the same meaning\n    as in <c:forEach>)\n  * the context size is equal to the number of nodes in the node-set\n    over which <x:forEach> is presently iterating.\n\nWe're also considering adding varStatus, which would provide an alternative \nmechanism for achieving the same result.\n\nJust because I'm marking this \"INVALID\" here doesn't mean it's not important; \nI'm just noting that it's not an implementation issue.  (This bug-tracking \nsystem is just for implementation issues.)", "id": 26131, "time": "2002-11-12T12:32:48Z", "creator": "bayern@essentially.net", "creation_time": "2002-11-12T12:32:48Z", "is_private": false}, {"text": "*** Bug 14687 has been marked as a duplicate of this bug. ***", "tags": [], "creator": "pierre.delisle@sun.com", "attachment_id": null, "count": 2, "id": 27373, "time": "2002-12-04T01:11:59Z", "bug_id": 14465, "creation_time": "2002-12-04T01:11:59Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 14465, "attachment_id": null, "id": 28007, "time": "2002-12-18T14:49:37Z", "creator": "pierre.delisle@sun.com", "creation_time": "2002-12-18T14:49:37Z", "is_private": false, "text": "*** Bug 15483 has been marked as a duplicate of this bug. ***"}, {"count": 4, "tags": [], "bug_id": 14465, "attachment_id": null, "id": 143021, "time": "2010-12-31T18:23:10Z", "creator": "jboynes@apache.org", "creation_time": "2010-12-31T18:23:10Z", "is_private": false, "text": "Fixed with XPath refactoring in r1054175"}, {"text": "*** Bug 22765 has been marked as a duplicate of this bug. ***", "tags": [], "creator": "jboynes@apache.org", "attachment_id": null, "count": 5, "id": 143023, "time": "2010-12-31T18:24:00Z", "bug_id": 14465, "creation_time": "2010-12-31T18:24:00Z", "is_private": false}]