[{"count": 0, "tags": [], "bug_id": 32186, "text": "Try this small script:\n\n<?php\n    error_log( \"Hei\" );\n\t$fh = fopen( \"c:/temp/x3.iso\", \"rb\" );\n\t\n\twhile ( !feof($fh) )\n\t\tfpassthru( $fh );\n?>\n\nThe File may be of a size a 20 MB or so. I used an iso-Image of something. But \ncontent doesn't matter.\nIf the file-Transfer is interrupted by the client (IE closed f.e.) the worker \ncrashes.\nIch you eleminate the \"while\" everything is ok.\n\nThis is only a simplified Script. Everytime when sending data throug an php \nscript, the worker crashes when connection is lost.\n\nI'm using XP SP2, i tried the 3 config lines:\n\nEnableSendfile Off\nEnableMMAP Off\nWin32DisableAcceptEx \n\nNo difference. Worker crashes.\n[Thu Nov 11 17:17:02 2004] [notice] Parent: child process exited with status \n4294967295 -- Restarting.\n[Thu Nov 11 17:17:03 2004] [notice] Parent: Created child process 4968\n[Thu Nov 11 17:17:03 2004] [notice] Disabled use of AcceptEx() WinSock2 API\n[Thu Nov 11 17:17:03 2004] [notice] Child 4968: Child process is running\n[Thu Nov 11 17:17:03 2004] [notice] Child 4968: Acquired the start mutex.\n[Thu Nov 11 17:17:03 2004] [notice] Child 4968: Starting 250 worker threads.\n[Thu Nov 11 17:17:03 2004] [notice] Child 4968: Listening on port 8001.\n\n\nWe can't continue developing our php-Application (Alternativ User Interface \nfor Multimedia Home-Devices), Subproject: Streaming Video-Content, if we can't \nfix this bug.\n\nHelp would be great.\n\nsorry for my english ;)\nYours\nAndreas", "id": 66726, "time": "2004-11-11T16:31:20Z", "creator": "stolle@web.de", "creation_time": "2004-11-11T16:31:20Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 32186, "is_private": false, "id": 66886, "time": "2004-11-15T00:08:53Z", "creator": "chip@force-elite.com", "creation_time": "2004-11-15T00:08:53Z", "tags": [], "text": "PHP + Worker MPM == broken.\n\nPlease use the Prefork MPM with PHP.\n\nFor mod_php issues, please use the PHP Bug System: http://bugs.php.net/"}, {"count": 2, "tags": [], "bug_id": 32186, "attachment_id": null, "id": 66887, "time": "2004-11-15T00:10:01Z", "creator": "chip@force-elite.com", "creation_time": "2004-11-15T00:10:01Z", "is_private": false, "text": "err. Sorry, this is the Winnt MPM. doh\n\nRegardless, you should report this to the PHP Bug system.  Thanks."}]