[{"count": 0, "tags": [], "text": "While using the <%@ include file=\"\" %> a Jasper exception for file not found is\ngenerated when the target file is in a parent|top location. (Current and\nsubordinate directory file references are successfull.)\n\njdk 1.5.0_07\ntomcat 5.5.17\n\nserver.xml appBase=\"/topdir/webapp\" docBase=\"\" path=\"\"\n\ntopdir -\n   webapp -\n      parenttarget.jsp\n      dir1 -\n         inc.jsp\n         peertarget.jsp\n         subdir -\n            subtarget.jsp\n\n      \ninc.jsp eg.\n<%@ include file=\"../parnenttarget.jsp\" %> FAILS file not found for\n\"/../parenttarget.sjp\"\n<%@ include file=\"/parenttarget.jsp\" %> FAILS file not found for \"/parenttarget.sjp\"\n<%@ include file=\"peertarget.jsp\" %> OK\n<%@ include file=\"subdir/subtarget.jsp\" %> OK", "is_private": false, "bug_id": 39817, "id": 90255, "time": "2006-06-15T18:45:10Z", "creator": "james.crocker@menasha.com", "creation_time": "2006-06-15T18:45:10Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 90343, "time": "2006-06-18T23:27:28Z", "bug_id": 39817, "creation_time": "2006-06-18T23:27:28Z", "is_private": false, "text": "I have just tested this with the latest 5.5.x source and everything works as\nexpected.\n\nI assumed the parenttarget.sjp was a typo in the bug report but could it be a\ntypo in your test case as well?"}, {"count": 2, "tags": [], "bug_id": 39817, "is_private": false, "text": "I have just upgraded from 5.5.7 to 5.5.17 and I immediately found a problem\nsimilar to the one described above.\n\nThose web applications which have include statements similar to\n\n<%@ include file=\"/_jspf/global.jspf\" %>\n\nin files contained within a sub directory of the appBase throw the following\nerror when the page is accessed:\n\norg.apache.jasper.JasperException: /index.jsp(2,0) File \"/_jspf/global.jspf\" not\nfound\n\nThe same line works perfectly in files contained within the appBase itself.\n\nThis has happened across the board with every one of my web applications, none\nof which displayed a problem 5 minutes before, when running within Tomcat 5.5.7.\n\nI have tried substituting the include line for the following:\n\n<%@ include file=\"../_jspf/global.jspf\" %>\n\nwhich merely changes the error description string to the following:\n\norg.apache.jasper.JasperException: /index.jsp(2,0) File \"/../_jspf/global.jspf\"\nnot found\n\nI am convinced this problem in not related to a typo or other such developer\nmistake due to the blanket effect on all my applications and the abscenece of\nany problem during build in Netbeans IDE 5.0 which helpfully checks all include\nfile references on compile.\n\nTomcat is running as a service on my Windows XP machine, is using jre1.5.0_07,\nand is connected to Apache HTTP Server 2.0.58 using the appropriate build of \nmod_jk.", "id": 91470, "time": "2006-07-21T17:56:40Z", "creator": "email@michaeljohnston.co.uk", "creation_time": "2006-07-21T17:56:40Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 39817, "attachment_id": null, "text": "Given I cannot re-reproduce this, please attach a minimal test war that\ndemonstrates this issue.", "id": 91476, "time": "2006-07-21T22:38:26Z", "creator": "markt@apache.org", "creation_time": "2006-07-21T22:38:26Z", "is_private": false}, {"count": 4, "tags": [], "text": "Created attachment 18625\nA minimal test war to demonstrate the issue\n\nWhen accessing /index.jsp the HTML contained within /_jspf/global.jspf is\ndisplayed without error. When accessing /subdir/index.jsp, which is idential to\n/index.jsp, the following error is thrown:\n\norg.apache.jasper.JasperException: /index.jsp(1,1) File \"/_jspf/global.jspf\"\nnot found\n\nThe web application \"test\" is running on a Virtual Host www.test.com on\nlocalhost with the following mod_jk lines in httpd.conf\n\nJkAutoAlias \"<insertpathhere>/test\"\nJkMount /*.jsp ajp13w\nJkMount /subdir/* ajp13w\n\nand the following Host tag in server.xml\n\n<Host name=\"test.com\" appBase=\"<insertpathhere>/test\" >\n  <Alias>www.test.com</Alias>\n  <Context path=\"\" docBase=\"\" debug=\"1\"/>\n</Host>", "is_private": false, "bug_id": 39817, "id": 91483, "time": "2006-07-22T09:34:52Z", "creator": "email@michaeljohnston.co.uk", "creation_time": "2006-07-22T09:34:52Z", "attachment_id": 18625}, {"count": 5, "tags": [], "creator": "markt@apache.org", "text": "I can now reproduce this. Note that httpd and JK are not part of this, I\nreproduced it on Tomcat standalone.\n\nThis report is invalid as it is caused by a configuration error. That it worked\nin earlier versions was luck and due to how Tomcat handled dirs in the appbase.\n\nThe current behaviour is:\nAny directory in an appbase gets deployed as a webapp. Therefore _jspf and\nsubdir get deployed as webapps (as well as the appbase itself due tot he context\nwith docBase=\"\"). The relative paths don't work across contexts, hence the failure.\n\nA possible untested workaround is to turn off autodeployment for the appbase.\n\nThe correct approach is to:\n- remove the context declaration with docBase=\"\" from server.xml\n- place the root context for the host in a directory called ROOT\n\nFurther assistance on configuration is available from the online docs and the\nusers mailing list.", "id": 91495, "time": "2006-07-22T18:16:45Z", "bug_id": 39817, "creation_time": "2006-07-22T18:16:45Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "The above approach, together with ammending the include line in\nROOT/subdir/index.jsp to\n\n<%@ include file=\"../_jspf/global.jspf\" %>\n\ndoes indeed solve the problem.\n\nMany thanks and apologies for the misconfiguration on my part.", "attachment_id": null, "bug_id": 39817, "id": 91496, "time": "2006-07-22T19:26:17Z", "creator": "email@michaeljohnston.co.uk", "creation_time": "2006-07-22T19:26:17Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "*** Bug 40130 has been marked as a duplicate of this bug. ***", "count": 7, "id": 91669, "time": "2006-07-27T21:07:26Z", "bug_id": 39817, "creation_time": "2006-07-27T21:07:26Z", "is_private": false}, {"count": 8, "tags": [], "creator": "esandusky@configureone.com", "attachment_id": null, "text": "(In reply to comment #7)\n> *** Bug 40130 has been marked as a duplicate of this bug. ***\n\nCan you please expand on how to alter the Tomcat configuration, as the online \ndocs do not explain this?  Changing all of my \"include file=\" is not an \noption.  I find it strange how a sub-release of Tomcat (5.5.12 to 5.5.17) \nrequires not only changes to Tomcat setup, but also changes to my code.\n\nMy setup is as follows:\n\nserver.xml\n<host name=\"concept\" appBase=\"D:\\webapps\\Concept\"/>\n\nROOT.xml (under Catalina/concept folder)\n<context path=\"\" docBase=\"\"/>\n\nCode structure\n\nd:\\webapps\\Concept\\catalog (contains jsps)\nd:\\webapps\\Concept\\core (contains jsps)\nd:\\webapps\\Concept\\WEB-INF (contains compiled classes/libs)\n\n/core/*.jsp are included properly\n/catalog/*.jsp are NOT included properly\n\nWhat is the difference between those 2 folders?\n\nTomcat Manager shows a \"context\" for each JSP folder (catalog, core, etc).  \nWhy is this changed from previous versions?\n\n", "id": 91699, "time": "2006-07-28T15:47:23Z", "bug_id": 39817, "creation_time": "2006-07-28T15:47:23Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 39817, "attachment_id": null, "id": 91781, "time": "2006-08-01T19:27:15Z", "creator": "william.barker@wilshire.com", "creation_time": "2006-08-01T19:27:15Z", "is_private": false, "text": "*** Bug 40155 has been marked as a duplicate of this bug. ***"}]