[{"count": 0, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "id": 153779, "time": "2012-02-14T12:55:34Z", "bug_id": 52666, "creation_time": "2012-02-14T12:55:34Z", "is_private": false, "text": "This issue was reported on the users@ list, thread:\n\"EL String -> int coercion stopped working after TC 5.5 -> 7.0 upgrade?\"\n\nhttp://tomcat.markmail.org/thread/a7l45meiakblxcvz\nhttp://marc.info/?t=132918931400002&r=1&w=2\n\nOriginal reporter used <c:out> tag, but it is not necessary to reproduce the issue.\n\nThe issue is reproducible in current 7.0 and 6.0. It works correctly in 5.5.35.\n\nTo reproduce,\n1. save the following JSP page as ROOT/test.jsp\n[[[\n${param['foo'] == 1}<br>\n${1 == param['foo']}<br>\n${1 == (0+param['foo'])}<br>\n]]]\n\n2. go to http://localhost:8080/test.jsp?foo=01\n\nExpected result:\ntrue\ntrue\ntrue\n\nActual result:\nfalse\nfalse\ntrue\n\nThis happens for foo=01, 001 etc. The equals result happens only when foo=1\n\n\nAccording to EL 2.2 specification chapter 1.8.2 the ==,!= operators have the following step: \"If A or B is Byte, Short, Character, Integer, or Long coerce both A and B to Long, apply operator\". This step should happen earlier than coercion to String."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "Fixed in trunk and 7.0.x and will be included in 7.0.26 onwards.\n\nthe fix has been proposed for 6.0.x.", "id": 153812, "time": "2012-02-15T17:13:27Z", "bug_id": 52666, "creation_time": "2012-02-15T17:13:27Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 52666, "attachment_id": null, "text": "Fixed in 6.0.x and will be included in 6.0.36 onwards.", "id": 153884, "time": "2012-02-17T18:06:15Z", "creator": "markt@apache.org", "creation_time": "2012-02-17T18:06:15Z", "is_private": false}]