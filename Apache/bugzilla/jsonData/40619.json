[{"count": 0, "tags": [], "text": "An http task that worked fine in ANT 1.6.5,  times out in Ant 1.7.1 with http \nerror 504.\nSee below\n[ I have tried using IP address instead of name but still same result ]\n\nScript:\n\n\n       <!-- the application server -->\n \t<target name=\"test2\">\n  \n            <echo message=\"checking application server URL 10.35.1.1:7778\"/>\n            <condition property=\"appserverup\">\n               <http url=\"http://10.35.1.1:7778\"/>\n            </condition>\n                        \n            <echo message=\"appserverup is ${appserverup}\"/>\n \n         </target>\n\nError output:\n\nC:\\Administrator\\install>ant -f sue.xml test2 -v\nApache Ant version 1.7.0Beta2 compiled on September 17 2006\nBuildfile: sue.xml\nDetected Java version: 1.5 in: C:\\Program Files\\Java\\jdk1.5.0_08\\jre\nDetected OS: Windows XP\nparsing buildfile C:\\Administrator\\install\\sue.xml with URI = \nfile:/C:/Administrator/install/sue.xml\nProject base dir set to: C:\\Administrator\\install\n[antlib:org.apache.tools.ant] Could not load definitions from resource \norg/apache/tools/ant/antlib.xml. It could not be found.\nBuild sequence for target(s) `test2' is [test2]\nComplete build sequence is [test2, test, ]\n\ntest2:\n     [echo] checking application server URL 10.35.1.1:7778\nChecking for http://10.35.1.1:7778\nResult code for http://10.35.1.1:7778 was 504\nProperty \"appserverup\" has not been set\n     [echo] appserverup is ${appserverup}\n\nBUILD SUCCESSFUL\nTotal time: 2 minutes 0 seconds", "attachment_id": null, "id": 94164, "creator": "sue.pharoah@aquilauk.co.uk", "time": "2006-09-27T15:02:39Z", "bug_id": 40619, "creation_time": "2006-09-27T15:02:39Z", "is_private": false}, {"count": 1, "tags": [], "text": "There has been changes in ant 1.7 dealing with http proxy\nWHATSNEW\n* On Java1.5+, Ant automatically sets the system property\n  java.net.useSystemProxies to true, which gives it automatic use of the local\n  IE (Windows) or Gnome2 (Unix/Linux) proxy settings. This may break any build\n  file that somehow relied on content outside the firewall being unreachable:\n  use the -noproxy command-line option to disable this new feature.\n  Note that the Java1.5 proxy configuration system still does not\n  appear to work reliably on Windows or Linux.\n\n504 is:\n10.5.5 504 Gateway Timeout\n\nThe server, while acting as a gateway or proxy, did not receive a timely\nresponse from the upstream server specified by the URI (e.g. HTTP, FTP, LDAP) or\nsome other auxiliary server (e.g. DNS) it needed to access in attempting to\ncomplete the request.\n\n      Note: Note to implementors: some deployed proxies are known to\n      return 400 or 500 when DNS lookups time out.\n\nThe address used (10.35.1.1) is a private address and should\nnot go to the proxy server, so there is a configuration issue.\n\nTry using ant -noproxy and also check the ie settings:\n\nie->tools->internet options->connections->local area network(lan) settings\nand ensure that the \"bypass proxy for local addresses\" is set\n\n", "is_private": false, "id": 94166, "creator": "peterreilly@apache.org", "time": "2006-09-27T15:18:47Z", "bug_id": 40619, "creation_time": "2006-09-27T15:18:47Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 40619, "attachment_id": null, "text": "*** Bug 40617 has been marked as a duplicate of this bug. ***", "id": 94169, "time": "2006-09-27T15:20:56Z", "creator": "peterreilly@apache.org", "creation_time": "2006-09-27T15:20:56Z", "is_private": false}, {"count": 3, "tags": [], "text": "Using ant -noproxy solved this problem and both the http task and the sql task \nnow work as before.\n[ I didn't realise the inplications of the useproxy settings in the WHATSNEW ]", "attachment_id": null, "id": 94171, "creator": "sue.pharoah@aquilauk.co.uk", "time": "2006-09-27T15:37:02Z", "bug_id": 40619, "creation_time": "2006-09-27T15:37:02Z", "is_private": false}, {"count": 4, "tags": [], "text": "sue. we didnt expect the proxy stuff to break things. It was added to make\nthings work, to have the JVM pick up the current proxy information, on the\nassumption that that is what people want. So far, you are the first person to\nencounter problems in the beta phase, and we need to understand more about the\nproblem.\n\n1. what does ant -diagnostics say at the end about proxies?\n\n2. what are your proxy settings @work? Password protected? \n\n3. Is your proxy designed to not work with in-building connections?\n\nI can foresee trouble if the proxy server cant connect to either your app server\nor the database. Can you bring up http://10.35.1.1:7778 in IE? \n\n", "attachment_id": null, "id": 94172, "creator": "stevel@apache.org", "time": "2006-09-27T15:43:35Z", "bug_id": 40619, "creation_time": "2006-09-27T15:43:35Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 40619, "attachment_id": null, "text": "1. \n-------------------------------------------\n Proxy information\n-------------------------------------------\nhttp.proxyHost = [undefined]\nhttp.proxyPort = [undefined]\nhttp.proxyUser = [undefined]\nhttp.proxyPassword = [undefined]\nhttp.nonProxyHosts = [undefined]\nhttps.proxyHost = [undefined]\nhttps.proxyPort = [undefined]\nhttps.nonProxyHosts = [undefined]\nftp.proxyHost = [undefined]\nftp.proxyPort = [undefined]\nftp.nonProxyHosts = [undefined]\nsocksProxyHost = [undefined]\nsocksProxyPort = [undefined]\njava.net.socks.username = [undefined]\njava.net.socks.password = [undefined]\njava.net.useSystemProxies = [undefined]\nJava1.5+ proxy settings\nDirect connection\n\n2 & 3 I dont think we use proxies for intranet connections only for \nconnections outside the firewall\n\n4. Yes I can bring up http://10.35.1.1:7778 in IE [ no userid/password \nrequired ]", "id": 94174, "time": "2006-09-27T16:05:22Z", "creator": "sue.pharoah@aquilauk.co.uk", "creation_time": "2006-09-27T16:05:22Z", "is_private": false}, {"count": 6, "tags": [], "text": "-noproxy is the default with 1.7.0 final, so this should work out of the box again.\n", "attachment_id": null, "id": 121961, "creator": "bodewig@apache.org", "time": "2008-10-28T09:48:28Z", "bug_id": 40619, "creation_time": "2008-10-28T09:48:28Z", "is_private": false}]