[{"count": 0, "tags": [], "bug_id": 42457, "is_private": false, "text": " ", "id": 103366, "time": "2007-05-19T05:26:10Z", "creator": "nettings@apache.org", "creation_time": "2007-05-19T05:26:10Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "nettings@apache.org", "attachment_id": null, "id": 103367, "time": "2007-05-19T05:38:51Z", "bug_id": 42457, "creation_time": "2007-05-19T05:38:51Z", "is_private": false, "text": "look at this snippet:\n\n<!-- Lenya GUI screen -->\n<map:match pattern=\"lenya-screen.xsl\">\n  <map:generate src=\"fallback://lenya/xslt/util/page2xhtml.xsl\"/>\n  <map:transform src=\"lenya/xslt/util/page2xslt.xsl\">\n    <map:parameter name=\"contextprefix\" value=\"{request:contextPath}\"/>\n  </map:transform>\n  <map:serialize type=\"xml\"/>\n</map:match>\n\npage2xhtml.xsl is a stylesheet that renders a page:page to xhtml.\npage2xslt.xsl is an identity stylesheet with one exception:\nit matches <xsl:param name=\"contextprefix\"/>, and replaces it with <xsl:param\nname=\"contextprefix\" select=\"$contextprefix\"/>.\n\ncan i suggest a new bug severity level \"howler\"?\n\ni don't know what the original intention of this was, but i can't think of\nanything that could possibly justify such a baroque extravaganza :P\n\nunless i'm very much mistaken, this whole shebang could be replaced by\n  <map:transform  src=\"fallback://lenya/xslt/util/page2xhtml.xsl\"/>\n    <map:parameter name=\"contextprefix\" value=\"{request:contextPath}\"/>\n  </map:transform>\nwherever src=\"cocoon://lenya-screen.xsl\" is used...\n"}, {"count": 2, "attachment_id": 20219, "creator": "nettings@apache.org", "text": "Created attachment 20219\ngets rid of the lenya-screen.xsl stuff altogether\n\nremoves lenya-screen.xsl from pipelines.xmap, and replaces all occurences by\ndirect calls to webapp/lenya/xslt/util/page2xhtml.xsl.", "id": 103368, "time": "2007-05-19T06:09:28Z", "bug_id": 42457, "creation_time": "2007-05-19T06:09:28Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "nettings@apache.org", "attachment_id": null, "text": "please review. this patch should not go in before 1.4, as it does not address a\nbug and might break stuff for users.\n\nnow we have two remaining ways of styling a cms page: a direct call to\nwebapp/lenya/util/page2xhtml.xsl, and a call to a local resource\n\"style-cms-page\" that is declared in many sitemaps (redundantly). this resource\nadditionally does an 1i8n transform and strips namespace nodes.\n\nthe best solution would be to figure out a way to build a global resource\n(currently, you can't use resources defined in other sitemaps unfortunately),\nand to use that everywhere.\n", "id": 103369, "time": "2007-05-19T06:12:50Z", "bug_id": 42457, "creation_time": "2007-05-19T06:12:50Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 42457, "attachment_id": null, "text": "(In reply to comment #1)\n\n[...]\n\n> unless i'm very much mistaken, this whole shebang could be replaced by\n>   <map:transform  src=\"fallback://lenya/xslt/util/page2xhtml.xsl\"/>\n>     <map:parameter name=\"contextprefix\" value=\"{request:contextPath}\"/>\n>   </map:transform>\n> wherever src=\"cocoon://lenya-screen.xsl\" is used...\n\nThat approach doesn't scale well. Whenever you change the parameter set of the\npage2xhtml.xsl stylesheet, you'd have to update each call to the stylesheet.\n", "id": 103471, "time": "2007-05-22T00:17:49Z", "creator": "andreas@apache.org", "creation_time": "2007-05-22T00:17:49Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 42457, "is_private": false, "text": "Renaming Lenya 1.4 to 2.0", "id": 105650, "time": "2007-07-16T02:03:36Z", "creator": "thorsten@apache.org", "creation_time": "2007-07-16T02:03:36Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 42457, "attachment_id": null, "text": "just as a todo note: this issue could be resolved if we introduced one global\npost-processing chain for documentes requested via publication urls. it would\nalso get rid of the style-cms-page resource which is being duplicated all over\nthe place. implies that publications must serialize to xml and the global\nsitemap must do the post-processing. wdyt?\n", "id": 106222, "time": "2007-08-02T14:30:55Z", "creator": "nettings@apache.org", "creation_time": "2007-08-02T14:30:55Z", "is_private": false}]