[{"count": 0, "tags": [], "bug_id": 29125, "attachment_id": null, "id": 57718, "time": "2004-05-20T15:44:34Z", "creator": "macenka@email.cz", "creation_time": "2004-05-20T15:44:34Z", "is_private": false, "text": "[note:]\nIt would be much easier to submit some bugs including this one if i was able to \nsubmit a file\n[/note]\n\n[bug description:]\n(files description at the bottom)\n[jspc] task partially fails each time a try to compile several jsp pages in a \ndirectory tree. It does compile files in every subdirectory, but fails to \ncompile files in the \"srcdir\" directory. Error is this\n\nBuildfile: build.xml\n\njspcoo:\n    [mkdir] Created dir: D:\\majkl\\bug\\out\n     [jspc] Compiling 2 source filesD:\\majkl\\bug\\out\n  [jasperc] java.util.EmptyStackException\n  [jasperc] \tat java.util.Stack.peek(Stack.java:79)\n  [jasperc] \tat org.apache.jasper.compiler.ParserController.\nresolveFileName(ParserController.java:419)\n  [jasperc] \tat org.apache.jasper.compiler.ParserController.\nparse(ParserController.java:187)\n  [jasperc] \tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:\n210)\n  [jasperc] \tat org.apache.jasper.JspC.parseFile(JspC.java:407)\n  [jasperc] \tat org.apache.jasper.JspC.parseFiles(JspC.java:727)\n  [jasperc] \tat org.apache.jasper.JspC.main(JspC.java:742)\n     [jspc] deleting empty output file D:\\majkl\\bug\\out\\index.java\n\nBUILD FAILED\nfile:D:/majkl/bug/build.xml:7: Java returned: 9\n\nTotal time: 1 second\n\nInteresting is that if you run same task second time without any other action it \nDOES compile the rest of files (e.g. the ones in the srcdir directory itself).\n\nBut what the most ridiculous is this (I am not kidding you, I am experiencing \nit): I've got srcdir \".\" and a subdir \"foo\". First call of task jspc compiles \nfoo/**/*.jsp. Second call compiles ./*.jsp as well as described above. But when \nI rename the \"foo\" subdir to anything what begins with 's' (e.g.\"sfoo\") jspc \ntask starts to compile everything at first call (as it should from the \nbeginning) !!! I wonder whether this is windows' fault/feature or ant's.\n\nfiles to easily reproduce the bug (best try to several times run ant in the \ndirectory of these files and see what happens):\n[build.xml]\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project name=\"antBug\" default=\"jspcoo\" basedir=\".\">\n\t<target name=\"jspcoo\">\n\t\t<mkdir dir=\"out\"/>\n\t\t<jspc srcdir=\".\"\n\t\t      destdir=\"out\">\n\t\t\t<include name=\"**/*.jsp\"/>\n\t\t</jspc>\n            <delete dir=\"out\"/> <!-- for better view of results -->\n\t</target>\n</project>\n\n[index.jsp]\n<html><body>hello</body></html>\n\n[foo/bug.jsp]\n<%= 5+5 %>"}, {"count": 1, "tags": [], "bug_id": 29125, "attachment_id": 11613, "is_private": false, "id": 57719, "time": "2004-05-20T15:46:49Z", "creator": "macenka@email.cz", "creation_time": "2004-05-20T15:46:49Z", "text": "Created attachment 11613\nzip file with files to easy demonstrate the bug"}, {"count": 2, "tags": [], "text": "i have just come to an idea that this bug may not be ant's but Tomcat's instead. \nI call jspc which calls some class from jasper or tomcat\n\nSubmitter", "attachment_id": null, "id": 57731, "creator": "macenka@email.cz", "time": "2004-05-20T20:17:18Z", "bug_id": 29125, "creation_time": "2004-05-20T20:17:18Z", "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 29125, "is_private": false, "id": 90660, "time": "2006-06-27T18:21:24Z", "creator": "stevel@apache.org", "creation_time": "2006-06-27T18:21:24Z", "tags": [], "text": "Jspc is unmaintable and now deprecated. Please upgrade to the version that \nships with tomcat 5 or later. Marking as WONTFIX."}]