[{"count": 0, "tags": [], "bug_id": 18219, "attachment_id": null, "text": "Tomcat can't compile the java classes that have been generated from JSP pages \n(*.java --> *.class). However, it works if I explicitly add '%JAVA_HOME%\\bin' \nto the path variable prior to starting Tomcat.", "id": 33597, "time": "2003-03-21T11:27:26Z", "creator": "marc.lehmann@infineon.com", "creation_time": "2003-03-21T11:27:26Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 33599, "time": "2003-03-21T12:28:27Z", "bug_id": 18219, "creation_time": "2003-03-21T12:28:27Z", "text": "Your JDK must be badly installed if you used the installer (which seems to be\nthe case according to your other bug report)."}, {"count": 2, "tags": [], "bug_id": 18219, "attachment_id": null, "text": "I have j2sdk 1.3.1_07 and 1.4.1_02 installed. Eclipse (2.0.2, 2.1RC2), Tomcat \n4.1.x, etc. all work perfectly well. Is there anything (debugging, tracing, \netc.) I can do to pin down the cause?", "id": 33603, "time": "2003-03-21T15:27:22Z", "creator": "marc.lehmann@infineon.com", "creation_time": "2003-03-21T15:27:22Z", "is_private": false}, {"count": 3, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 35267, "time": "2003-04-15T22:04:41Z", "bug_id": 18219, "creation_time": "2003-04-15T22:04:41Z", "is_private": false, "text": "This is a user error. Set JAVA_HOME correctly *before* running the installer.\n%JAVA_HOME%/lib/tools.jar must exist. Please do not reopen this."}, {"count": 4, "tags": [], "creator": "john@status6.com", "attachment_id": null, "is_private": false, "id": 40320, "time": "2003-07-10T10:39:47Z", "bug_id": 18219, "creation_time": "2003-07-10T10:39:47Z", "text": "I'm going to try to make a case for reopening this bug.  I just lost 2 days to\nthis problem, so I'm hoping a minor change to the installation program (or\ndocumentation, at least) could prevent the same fate for others.\n\nFrom what I can determine, if you're going to run Tomcat 5.0.3 as a Windows\nService, there are no environment variables required whatsoever, nor any PATH\nchanges, except for one small catch:  you must have JAVA_HOME defined *during*\nthe Tomcat installation (and only then) if you want your JSP pages to compile.\n\nYou don't need it defined /after/ installation, and you don't need it defined\nfor anything else I've been using for development or production Java tools in\nthe past 7 years.  In fact, after installation, you don't need anything added to\nyour PATH at all, and you don't need CATALINA_HOME, ANT_HOME, nor JAVA_HOME defined.\n\nWhy have this extra little gotcha in there when Tomcat already knows quite well\nwhere the JDK is installed from the Registry settings?  Furthermore, the\nrecovery is a bit tough to figure out -- you have to actually uninstall Tomcat,\ndefine JAVA_HOME, and then re-install Tomcat.  Then you can undefine JAVA_HOME\nand you're set.  Most of my time lost was because I thought I could recover by\nsimply defining JAVA_HOME and restarting the Tomcat service.  I didn't imagine\nthat this environment variable was absolutely critical during the installation\nitself.  The rest of the time lost was spent trying all the combinations of the\nother environment variables, none of which are required nor helped.\n\nSo if the bug won't be reopened, can this message:\n\n  Unable to find a javac compiler;\n  com.sun.tools.javac.Main is not on the classpath.\n  Perhaps JAVA_HOME does not point to the JDK \n\nbe changed to the following instead?\n\n  Unable to find a javac compiler;\n  com.sun.tools.javac.Main is not on the classpath.\n  Perhaps you need to define JAVA_HOME and reinstall Tomcat.\n\nOr at least put a big warning in the future Tomcat 5.0 Setup page that says it's\ncritical for JAVA_HOME to be defined *during* installation when you plan to run\nTomcat 5.0.3 as a Windows Service, but no such Java/Tomcat/Ant environment\nvariables or PATH changes are required afterwards.\n\nThanks,\nJohn Neffenger\n"}, {"count": 5, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 40329, "time": "2003-07-10T11:45:36Z", "bug_id": 18219, "creation_time": "2003-07-10T11:45:36Z", "is_private": false, "text": "Do not reopen it, a better error message is now displayed."}, {"count": 6, "tags": [], "bug_id": 18219, "attachment_id": null, "text": "For the assistance of anyone else reading this report:\n\nIf you have not used the Windows installed, but simply unzipped Tomcat; or if \nhave installed Tomcat without JAVA_HOME and you want a workaround that avoids \nhaving to deinstall the whole of Tomacat, then this is a workaround:\n\nIt applies equally to Tomcat v4.\n\n1. You need to setup the JAVA_HOME variable:\n* In Control Panel, System, Advanced Tab, Environment Variables button\n* choose New button\n* Enter\t   JAVA_HOME\n\t   C:\\jdk  (or the path to the root of your JDK)\n\n2. Shutdown the Tomcat service from the Windows Service Manager.  \nShudown the Service Manager.  This is very important as the SM will hold locks \non the service definition.\n\n3. Deinstall the Apache Tomcat service:\n(replacing the path names and the Service name as seem in the Windows Service \nManager if they differ from these):\nc: \ncd \\jakarta-tomcat\\bin \ntomcat.exe -uninstall \"Apache Tomcat\"\n\n4. Now re-install the Tomcat service.  \nYou will need to change the paths etc that I have given here:\nThe third statement starting \"tomcat...\" is a SINGLE LINE\n\nc: \ncd \\jakarta-tomcat\\bin \ntomcat -install \"Apache Tomcat\" \"C:\\jdk\\jre\\bin\\client\\jvm.dll\" -\nDjava.class.path=\"C:\\jdk\\lib\\tools.jar;C:\\jakarta-tomcat\\bin\\bootstrap.jar\" -\nDcatalina.home=\"C:\\jakarta-tomcat\" -start \norg.apache.catalina.startup.BootstrapService -params start -stop \norg.apache.catalina.startup.BootstrapService -params stop -out \"c:\\jakarta-\ntomcat\\logs\\stdout.log\" -err \"c:\\jakarta-tomcat\\logs\\stderr.log\"\n\nMore info on the Tomcat executable by entering\ntomcat --help\nor this: \nhttp://www.reynir.net/tomcat/tomcat_service.html\n\n", "id": 44026, "time": "2003-09-11T10:44:47Z", "creator": "andrew.liles@starfishzone.com", "creation_time": "2003-09-11T10:44:47Z", "is_private": false}]