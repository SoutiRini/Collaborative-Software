[{"count": 0, "tags": [], "bug_id": 32427, "attachment_id": null, "is_private": false, "id": 67539, "time": "2004-11-29T14:44:58Z", "creator": "mig@1984.cz", "creation_time": "2004-11-29T14:44:58Z", "text": "After some time (probably when loaded), apache generates Moved permanently \nerror, hangs or begin to return wrong content (random pages requested some time \nbefore).\n\nI tried apache 2.0.50, .51 and .52, my distro is Gentoo. It's independent on \nconfiguration (I've tried several settings, now using default) and CFLAGS. There \nis at least 50% of memory free.\n\n<IfModule worker.c>\nStartServers         2\nMaxClients         150\nMinSpareThreads     25\nMaxSpareThreads     75\nThreadsPerChild     25\nMaxRequestsPerChild  0\n</IfModule>\n\nI think the problem is in worker, because well working apache looks like this in \nmemory:\n  |   |   |-apache2,21592 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,21721 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,569 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,1081 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2134 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2248 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2282 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2394 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2624 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2636 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2658 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2695 -D NO_DETACH -D PHP5\n  |   |   |   |-(apache2,2765)\n  |   |   |   |-apache2,2811 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2839 -D NO_DETACH -D PHP5\n  |   |   |   |-apache2,2847 -D NO_DETACH -D PHP5\n  |   |   |   `-apache2,2848 -D NO_DETACH -D PHP5\n\nand bad working:\n  |       |-apache2,2889 -D NO_DETACH -D PHP5\n  |       |   |-apache2,2992 -D NO_DETACH -D PHP5\n  |       |   |-apache2,2995 -D NO_DETACH -D PHP5\n  |       |   |   `-apache2,2996 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3000 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3003 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3004 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3005 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3008 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3009 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3010 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3011 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3012 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3013 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3014 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3022 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3023 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3024 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3025 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3026 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3027 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3028 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3036 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3037 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3038 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3039 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3040 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3041 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3042 -D NO_DETACH -D PHP5\n  |       |   |       `-apache2,3050 -D NO_DETACH -D PHP5\n  |       |   |-apache2,2997 -D NO_DETACH -D PHP5\n  |       |   |   `-apache2,2998 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3002 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3006 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3007 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3015 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3016 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3017 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3018 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3019 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3020 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3021 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3029 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3030 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3031 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3032 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3033 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3034 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3035 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3043 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3044 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3045 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3046 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3047 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3048 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3049 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,3051 -D NO_DETACH -D PHP5\n  |       |   |       `-apache2,3052 -D NO_DETACH -D PHP5\n\nThere is nothing bad in log.\n\nI've runned both versions which should serve the same content.\nWell working is on port 80 and bad working on 81. You can use these addresses to \ntest them (but I think it will be working well due to no load; the error looks \nlike wrong pictures, wrong html content, etc.):\nhttp://www.estetica.cz\nhttp://www.levneporno.cz\nhttp://www.rodinnedomky.com\nhttp://www.futsalpm.cz"}, {"count": 1, "tags": [], "text": "Now, after several \n> wget -m http://futsalpm.cz:81\n\nthis happened:\n\n-------------------------------------------------------------------\nHTTP po&#382;adavek odesl\u00e1n, program &#269;ek\u00e1 na odpov&#283;&#271; ... 302 Found\nP&#345;esm&#283;rov\u00e1no na: http://futsalpm.cz:81/ [n\u00e1sleduji]\n--15:02:17--  http://futsalpm.cz:81/\n           => `futsalpm.cz:81/index.html'\nConnecting to futsalpm.cz[82.208.29.44]:81... connected.\nHTTP po&#382;adavek odesl\u00e1n, program &#269;ek\u00e1 na odpov&#283;&#271; ... 200 OK\n-------------------------------------------------------------------\n\nbut the OK document is 404 error. After it, apache returns 404 error page only, \nthis is in memory (looks as normal):\n\n |       |-apache2,2889 -D NO_DETACH -D PHP5\n  |       |   |-apache2,2992 -D NO_DETACH -D PHP5\n  |       |   |-apache2,24733 -D NO_DETACH -D PHP5\n  |       |   |   `-apache2,24734 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24739 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24745 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24746 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24747 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24748 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24749 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24750 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24751 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24759 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24760 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24761 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24762 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24763 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24764 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24765 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24773 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24774 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24775 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24776 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24777 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24778 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24779 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24787 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24788 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24789 -D NO_DETACH -D PHP5\n  |       |   |       `-apache2,24790 -D NO_DETACH -D PHP5\n  |       |   |-apache2,24735 -D NO_DETACH -D PHP5\n  |       |   |   `-apache2,24736 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24740 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24741 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24742 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24743 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24744 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24752 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24753 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24754 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24755 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24756 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24757 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24758 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24766 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24767 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24768 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24769 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24770 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24771 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24772 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24780 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24781 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24782 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24783 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24784 -D NO_DETACH -D PHP5\n  |       |   |       |-apache2,24785 -D NO_DETACH -D PHP5\n  |       |   |       `-apache2,24786 -D NO_DETACH -D PHP5\n", "attachment_id": null, "id": 67542, "creator": "mig@1984.cz", "time": "2004-11-29T15:10:31Z", "bug_id": 32427, "creation_time": "2004-11-29T15:10:31Z", "is_private": false}, {"count": 2, "tags": [], "text": "Sorry, I can't parse this as an Apache bug, and your server is reticent about\ntelling us what else it's using.\n\n(1) Remove PHP and any other non-thread-safe code or use Prefork.\n\n(2) This looks from here like it's doing exactly what you configured it to do.\n\n(3) If, having done (1), you can describe how to reproduce your problem, and\nasking in a user support forum doesn't help, reopen it.", "is_private": false, "id": 67618, "creator": "nick@webthing.com", "time": "2004-11-30T13:13:55Z", "bug_id": 32427, "creation_time": "2004-11-30T13:13:55Z", "attachment_id": null}]