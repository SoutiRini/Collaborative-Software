[{"count": 0, "tags": [], "creator": "koen@sapo.pt", "is_private": false, "text": "Hello\n\nI have provided a sample encoding.war, proving that:\n\n1/ on unpredictable times the default character encoding UTF-8 is switched to \nISO-8859-1\n\n2/ a response is sometimes committed before the invocation of the _jspService \nmethod\n\nThis small sample application does the following. The index.jsp contains 400 \nframes. The uneven frames request a \n\nJSP that produces html with the (\u20ac) euro character (UTF-8 hex code E282AC). The \neven frames request a Servlet \n\nthat produces an image/png with the euro character. 400 requests are thus \nreceived by Tomcat. The html is served \n\nby a JSP Document. The image/png is served by a Servlet test.ImageSender, which \nmakes use of javax.imageio. \n\nSource is provided in WEB-INF/classes/test.\n\nYou will notice (check the log files) that \n\n1/ When Tomcat sends the html with the euro character, the character encoding \nis sometimes ISO-8859-1 instead of \n\nUTF-8.\n\n2/ Sometimes response.isCommitted() returns true before the invocation of the \nservice method (the container might \n\ntherefore throw IllegalStateException if we'ld use sendRedirect() or forward()).\n\nMy system info:\n\nMicrosoft Windows Server 2003 Entreprise Edition\nJava 1.4.2_02\nTomcat 5.0.19\n\nThanks for your reply.\n\nKoen Heene\nContracted trainer at Sun Microsystems Educational Services Belgium", "id": 55646, "time": "2004-04-12T10:43:14Z", "bug_id": 28347, "creation_time": "2004-04-12T10:43:14Z", "attachment_id": null}, {"attachment_id": 11216, "tags": [], "bug_id": 28347, "is_private": false, "count": 1, "id": 55647, "time": "2004-04-12T10:44:56Z", "creator": "koen@sapo.pt", "creation_time": "2004-04-12T10:44:56Z", "text": "Created attachment 11216\nApplication /encoding proving early charset switch and too early response commit"}, {"count": 2, "tags": [], "creator": "koen@sapo.pt", "text": "The attachment should be saved as encoding.war", "id": 55648, "time": "2004-04-12T10:46:21Z", "bug_id": 28347, "creation_time": "2004-04-12T10:46:21Z", "is_private": false, "attachment_id": null}, {"count": 3, "text": "The test is *extremely* bad, and will most likely screw up any server.\nI am not willing to spend the time investigating this. You should debug this\nyourself if you're interested.", "creator": "remm@apache.org", "is_private": false, "id": 55649, "time": "2004-04-12T11:00:42Z", "bug_id": 28347, "creation_time": "2004-04-12T11:00:42Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "creator": "koen@sapo.pt", "text": "I would appreciate why you think it's so dangerous. The Resin engine 3.0.7 \n(supporting JSP 2.0 and Servlet 2.4) does this very nicely.", "id": 55654, "time": "2004-04-12T14:48:39Z", "bug_id": 28347, "creation_time": "2004-04-12T14:48:39Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "remm@apache.org", "is_private": false, "text": "Use it then ;)", "id": 55655, "time": "2004-04-12T15:10:09Z", "bug_id": 28347, "creation_time": "2004-04-12T15:10:09Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 28347, "attachment_id": null, "text": "You are *extremely* helpful.", "id": 55673, "time": "2004-04-12T21:27:52Z", "creator": "koen@sapo.pt", "creation_time": "2004-04-12T21:27:52Z", "is_private": false}, {"count": 7, "tags": [], "creator": "remm@apache.org", "is_private": false, "text": "Well, I don't know, you're the one who suggested resin was working, so ... ;)", "id": 55675, "time": "2004-04-12T21:42:16Z", "bug_id": 28347, "creation_time": "2004-04-12T21:42:16Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 28347, "attachment_id": null, "text": "I did a search on the internet to see how such an arrogant person looks like. \nYour name is all over. Your picture fortunately not.\n\nhttp://www.jboss.org/images/mugshots/remy.jpg", "id": 55679, "time": "2004-04-12T22:02:48Z", "creator": "koen@sapo.pt", "creation_time": "2004-04-12T22:02:48Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 28347, "is_private": false, "count": 9, "id": 55680, "time": "2004-04-12T22:05:03Z", "creator": "remm@apache.org", "creation_time": "2004-04-12T22:05:03Z", "text": "Lol ;)"}]