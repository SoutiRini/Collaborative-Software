[{"count": 0, "tags": [], "text": "This issue is very similar to 56052 which deals with expired sessions. If a session fails to decode (such as a changed key for mod_session_crypto), mod_session will automatically create a new one to return from ap_load_session.\n\nThe problem is the session sub-module, such as mod_session_cookie, has already cached the original session in the request notes. The next time ap_load_session is called (such as during ap_save_session), the old session struct is retrieved, which still fails to decode, and another new session is created. Any data written to the first new session is now gone, and the empty session gets saved.\n\nIt is likely the fix for this will be the same as for 56052, but I didn't want this one to be missed when the expiry one is fixed.\n\nSteps to Reproduce:\n\n1. Configure the server using mod_auth_form, mod_session, mod_session_cookie, and mod_session_crypto.\n2. Start the server.\n3. Log in via mod_auth_form. This creates a session saved in a cookie.\n4. Change the SessionCryptoPassphrase and reload the server config.\n5. Try to log in again. The existing session cookie will fail to decode and it fails to log in.", "attachment_id": null, "bug_id": 58171, "id": 184127, "time": "2015-07-22T14:30:55Z", "creator": "paul.spangler@ni.com", "creation_time": "2015-07-22T14:30:55Z", "is_private": false}]