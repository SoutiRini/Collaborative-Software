[{"count": 0, "tags": [], "bug_id": 42556, "attachment_id": null, "text": "Apache 2.2.4 is compiled with OpenSSL 0.9.8e and OpenLDAP 2.3.32 using GCC 3.4.1\non a Solaris 9 system with latest patch level. The Solaris 9 host is configured\nas a native LDAP over SSL client. LDAP is usesd for user authentication on the\nsystem.\n\nEntries in /etc/nsswitch.conf:\n\npasswd:     files ldap\ngroup:      files ldap\n\nIn this setup the Apache causes segmentation faults when starting. See the\noutput from error_log below. When disabling ldap in the group lookup in\n/etc/nsswitch.conf then Apache works fine. \n\nThis must have something to do in the way Solaris handles dynamic loading of\nlibraries. None of the compiled Apache/OpenLDAP/OpenSSL Binaries/Modules is\nlinked against Solaris native LDAP libraries. They all use the OpenLDAP libraries. \n\n\n\nApache Error Log\n----------------\n\n[Thu May 31 15:37:08 2007] [info] Init: Seeding PRNG with 136 bytes of entropy\n[Thu May 31 15:37:08 2007] [info] Init: Generating temporary RSA private keys\n(512/1024 bits)\n[Thu May 31 15:37:10 2007] [info] Init: Generating temporary DH parameters\n(512/1024 bits)\n[Thu May 31 15:37:10 2007] [warn] Init: Session Cache is not configured [hint:\nSSLSessionCache]\n[Thu May 31 15:37:10 2007] [info] Init: Initializing (virtual) servers for SSL\n[Thu May 31 15:37:10 2007] [info] Server: Apache/2.2.4, Interface:\nmod_ssl/2.2.4, Library: OpenSSL/0.9.8e\n[Thu May 31 15:37:10 2007] [info] Init: Seeding PRNG with 136 bytes of entropy\n[Thu May 31 15:37:10 2007] [info] Init: Generating temporary RSA private keys\n(512/1024 bits)\n[Thu May 31 15:37:12 2007] [info] Init: Generating temporary DH parameters\n(512/1024 bits)\n[Thu May 31 15:37:12 2007] [info] Init: Initializing (virtual) servers for SSL\n[Thu May 31 15:37:12 2007] [info] Server: Apache/2.2.4, Interface:\nmod_ssl/2.2.4, Library: OpenSSL/0.9.8e\n[Thu May 31 15:37:12 2007] [notice] Digest: generating secret for digest\nauthentication ...\n[Thu May 31 15:37:12 2007] [notice] Digest: done\n[Thu May 31 15:37:12 2007] [info] APR LDAP: Built with OpenLDAP LDAP SDK\n[Thu May 31 15:37:12 2007] [info] LDAP: SSL support available\n[Thu May 31 15:37:12 2007] [notice] Apache/2.2.4 (Unix) DAV/2 mod_ssl/2.2.4\nOpenSSL/0.9.8e PHP/5.2.2 configured -- resuming normal operations\n[Thu May 31 15:37:12 2007] [info] Server built: May 24 2007 08:34:22\n[Thu May 31 15:37:12 2007] [debug] prefork.c(991): AcceptMutex: fcntl (default:\nfcntl)\n[Thu May 31 15:37:12 2007] [notice] child pid 6466 exit signal Segmentation\nfault (11)\n[Thu May 31 15:37:13 2007] [notice] child pid 6465 exit signal Segmentation\nfault (11)\n[Thu May 31 15:37:13 2007] [notice] child pid 6464 exit signal Segmentation\nfault (11)\n[Thu May 31 15:37:13 2007] [notice] child pid 6463 exit signal Segmentation\nfault (11)\n[Thu May 31 15:37:13 2007] [notice] child pid 6462 exit signal Segmentation\nfault (11)\n\n\n\nTruss Output of httpd Master Process\n------------------------------------\n\n29835:  brk(0x002F5138)                                 = 0\n29835:  brk(0x002F7138)                                 = 0\n29835:  getuid()                                        = 0 [0]\n29835:  setgid(58000)                                   = 0\n29835:  sysconfig(_CONFIG_NGROUPS)                      = 16\n29835:  open(\"/etc/default/nss\", O_RDONLY|O_LARGEFILE)  = 14\n29835:  fcntl(14, F_DUPFD, 0x00000100)                  = 256\n29835:  close(14)                                       = 0\n29835:  read(256, \" #   i d e n t\\t \" @ ( #\".., 1024)   = 749\n29835:  read(256, 0x002F5550, 1024)                     = 0\n29835:  close(256)                                      = 0\n29835:  open(\"/etc/nsswitch.conf\", O_RDONLY|O_LARGEFILE) = 14\n29835:  fcntl(14, F_DUPFD, 0x00000100)                  = 256\n29835:  close(14)                                       = 0\n29835:  read(256, \" #   m o r e   n s s w i\".., 1024)   = 811\n29835:  read(256, 0x002F55B0, 1024)                     = 0\n29835:  close(256)                                      = 0\n29835:  stat(\"/opt/adnapache/lib/nss_files.so.1\", 0xFFBFEC40) Err#2 ENOENT\n29835:  stat(\"/usr/lib/nss_files.so.1\", 0xFFBFEC40)     = 0\n29835:  resolvepath(\"/usr/lib/nss_files.so.1\", \"/usr/lib/nss_files.so.1\", 1023) = 23\n29835:  open(\"/usr/lib/nss_files.so.1\", O_RDONLY)       = 14\n29835:  mmap(0x00010000, 8192, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_ALIGN, 14,\n0) = 0xFEC80000\n29835:  mmap(0x00010000, 98304, PROT_NONE,\nMAP_PRIVATE|MAP_NORESERVE|MAP_ANON|MAP_ALIGN, -1, 0) = 0xFE840000\n29835:  mmap(0xFE840000, 19054, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 14,\n0) = 0xFE840000\n29835:  mmap(0xFE856000, 1736, PROT_READ|PROT_WRITE|PROT_EXEC,\nMAP_PRIVATE|MAP_FIXED, 14, 24576) = 0xFE856000\n29835:  munmap(0xFE846000, 65536)                       = 0\n29835:  memcntl(0xFE840000, 6232, MC_ADVISE, MADV_WILLNEED, 0, 0) = 0\n29835:  close(14)                                       = 0\n29835:  stat(\"/opt/adnapache/lib/libc.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libnsl.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  munmap(0xFEC80000, 8192)                        = 0\n29835:  brk(0x002F7138)                                 = 0\n29835:  brk(0x002F9138)                                 = 0\n29835:  open(\"/etc/group\", O_RDONLY|O_LARGEFILE)        = 14\n29835:  fcntl(14, F_DUPFD, 0x00000100)                  = 256\n29835:  close(14)                                       = 0\n29835:  read(256, \" r o o t : : 0 : r o o t\".., 1024)   = 305\n29835:  brk(0x002F9138)                                 = 0\n29835:  brk(0x002FB138)                                 = 0\n29835:  read(256, 0x002F5628, 1024)                     = 0\n29835:  close(256)                                      = 0\n29835:  stat(\"/opt/adnapache/lib/nss_ldap.so.1\", 0xFFBFEC40) Err#2 ENOENT\n29835:  stat(\"/usr/lib/nss_ldap.so.1\", 0xFFBFEC40)      = 0\n29835:  resolvepath(\"/usr/lib/nss_ldap.so.1\", \"/usr/lib/nss_ldap.so.1\", 1023) = 22\n29835:  open(\"/usr/lib/nss_ldap.so.1\", O_RDONLY)        = 14\n29835:  mmap(0x00010000, 8192, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_ALIGN, 14,\n0) = 0xFEC80000\n29835:  mmap(0x00010000, 131072, PROT_NONE,\nMAP_PRIVATE|MAP_NORESERVE|MAP_ANON|MAP_ALIGN, -1, 0) = 0xFE6D0000\n29835:  mmap(0xFE6D0000, 50326, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 14,\n0) = 0xFE6D0000\n29835:  mmap(0xFE6EE000, 4317, PROT_READ|PROT_WRITE|PROT_EXEC,\nMAP_PRIVATE|MAP_FIXED, 14, 57344) = 0xFE6EE000\n29835:  munmap(0xFE6DE000, 65536)                       = 0\n29835:  memcntl(0xFE6D0000, 11088, MC_ADVISE, MADV_WILLNEED, 0, 0) = 0\n29835:  close(14)                                       = 0\n29835:  stat(\"/opt/adnapache/lib/libc.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libsldap.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/usr/lib/libsldap.so.1\", 0xFFBFEB68)      = 0\n29835:  resolvepath(\"/usr/lib/libsldap.so.1\", \"/usr/lib/libsldap.so.1\", 1023) = 22\n29835:  open(\"/usr/lib/libsldap.so.1\", O_RDONLY)        = 14\n29835:  mmap(0xFEC80000, 8192, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 14,\n0) = 0xFEC80000\n29835:  mmap(0x00010000, 221184, PROT_NONE,\nMAP_PRIVATE|MAP_NORESERVE|MAP_ANON|MAP_ALIGN, -1, 0) = 0xFE4C0000\n29835:  mmap(0xFE4C0000, 137456, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 14,\n0) = 0xFE4C0000\n29835:  mmap(0xFE4F2000, 11033, PROT_READ|PROT_WRITE|PROT_EXEC,\nMAP_PRIVATE|MAP_FIXED, 14, 139264) = 0xFE4F2000\n29835:  munmap(0xFE4E2000, 65536)                       = 0\n29835:  mmap(0x00000000, 8192, PROT_READ|PROT_WRITE|PROT_EXEC,\nMAP_PRIVATE|MAP_ANON, -1, 0) = 0xFE930000\n29835:  memcntl(0xFE4C0000, 20952, MC_ADVISE, MADV_WILLNEED, 0, 0) = 0\n29835:  close(14)                                       = 0\n29835:  stat(\"/opt/adnapache/lib/libnsl.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libsocket.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libldap.so.5\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/usr/lib/libldap.so.5\", 0xFFBFEB68)       = 0\n29835:  resolvepath(\"/usr/lib/libldap.so.5\", \"/usr/lib/libldap.so.5\", 1023) = 21\n29835:  open(\"/usr/lib/libldap.so.5\", O_RDONLY)         = 14\n29835:  mmap(0xFEC80000, 8192, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 14,\n0) = 0xFEC80000\n29835:  mmap(0x00010000, 983040, PROT_NONE,\nMAP_PRIVATE|MAP_NORESERVE|MAP_ANON|MAP_ALIGN, -1, 0) = 0xFE280000\n29835:  mmap(0xFE280000, 911095, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 14,\n0) = 0xFE280000\n29835:  mmap(0xFE360000, 40948, PROT_READ|PROT_WRITE|PROT_EXEC,\nMAP_PRIVATE|MAP_FIXED, 14, 917504) = 0xFE360000\n29835:  mmap(0xFE36A000, 20328, PROT_READ|PROT_WRITE|PROT_EXEC,\nMAP_PRIVATE|MAP_FIXED|MAP_ANON, -1, 0) = 0xFE36A000\n29835:  memcntl(0xFE280000, 54844, MC_ADVISE, MADV_WILLNEED, 0, 0) = 0\n29835:  close(14)                                       = 0\n29835:  stat(\"/opt/adnapache/lib/libnsl.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libldap.so.5\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libc.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libdoor.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/usr/lib/libdoor.so.1\", 0xFFBFEB68)       = 0\n29835:  resolvepath(\"/usr/lib/libdoor.so.1\", \"/usr/lib/libdoor.so.1\", 1023) = 21\n29835:  open(\"/usr/lib/libdoor.so.1\", O_RDONLY)         = 14\n29835:  mmap(0xFEC80000, 8192, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 14,\n0) = 0xFEC80000\n29835:  mmap(0x00010000, 81920, PROT_NONE,\nMAP_PRIVATE|MAP_NORESERVE|MAP_ANON|MAP_ALIGN, -1, 0) = 0xFE4A0000\n29835:  mmap(0xFE4A0000, 3655, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_FIXED, 14,\n0) = 0xFE4A0000\n29835:  mmap(0xFE4B2000, 616, PROT_READ|PROT_WRITE|PROT_EXEC,\nMAP_PRIVATE|MAP_FIXED, 14, 8192) = 0xFE4B2000\n29835:  munmap(0xFE4A2000, 65536)                       = 0\n29835:  memcntl(0xFE4A0000, 2528, MC_ADVISE, MADV_WILLNEED, 0, 0) = 0\n29835:  close(14)                                       = 0\n29835:  stat(\"/opt/adnapache/lib/librt.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libsocket.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libnsl.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libdl.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libc.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libmd5.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  stat(\"/opt/adnapache/lib/libc.so.1\", 0xFFBFEB68) Err#2 ENOENT\n29835:  munmap(0xFEC80000, 8192)                        = 0\n29835:  sysinfo(SI_SRPC_DOMAIN, \"adnovum.ch\", 256)      = 11\n29835:  open(\"/var/run/ldap_cache_door\", O_RDONLY)      = 14\n29835:  fcntl(14, F_SETFD, 0x00000001)                  = 0\n29835:  door_info(14, 0xFE4F4B20)                       = 0\n29835:  door_call(14, 0xFFBFE4B8)                       = 0\n29835:  sysinfo(SI_SRPC_DOMAIN, \"adnovum.ch\", 256)      = 11\n29835:  time()                                          = 1180620482\n29835:  door_info(14, 0xFFBFAC50)                       = 0\n29835:  door_call(14, 0xFFBFAC38)                       = 0\n29835:  mmap(0x00000000, 16384, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANON, -1,\n0) = 0xFEC80000\n29835:  so_socket(PF_INET6, SOCK_STREAM, IPPROTO_IP, \"\", 1) = 15\n29835:  close(15)                                       = 0\n29835:  sigaction(SIGPIPE, 0xFFBFCA78, 0x00000000)      = 0\n29835:  open(\"/dev/urandom\", O_RDONLY)                  = 15\n29835:  read(15, \" `B2D2D4 ^\\0 D } -E699A3\".., 120)     = 120\n29835:  close(15)                                       = 0\n29835:  open(\"/dev/urandom\", O_RDONLY)                  = 15\n29835:  read(15, \"8DB1A2 6F3D4 A11E3DB1C9C\".., 1024)    = 1024\n29835:  close(15)                                       = 0\n29835:  stat(\"/var/ldap\", 0xFFBFCA68)                   = 0\n29835:  brk(0x002FB138)                                 = 0\n29835:  brk(0x002FD138)                                 = 0\n29835:  stat(\"/var/ldap/\", 0xFFBFC9A8)                  = 0\n29835:  stat(\"/var/ldap/cert7.db\", 0xFFBFC9A8)          = 0\n29835:  open(\"/var/ldap/cert7.db\", O_RDONLY)            = 15\n29835:  fcntl(15, F_SETFD, 0x00000001)                  = 0\n29835:  read(15, \"\\00615 a\\0\\0\\002\\0\\010E1\".., 260)     = 260\n29835:  brk(0x002FD138)                                 = 0\n29835:  brk(0x002FF138)                                 = 0\n29835:  brk(0x002FF138)                                 = 0\n29835:  brk(0x00301138)                                 = 0\n29835:  fstat(15, 0xFFBFC738)                           = 0\n29835:  stat(\"/var/ldap/cert7.db\", 0xFFBFC6B0)          = 0\n29835:  lseek(15, 73728, SEEK_SET)                      = 73728\n29835:  read(15, \"\\01C1FF71FF41F821D1F1CD2\".., 8192)    = 8192\n29835:  stat(\"/var/ldap\", 0xFFBFCA68)                   = 0\n29835:  stat(\"/var/ldap/\", 0xFFBFC9F8)                  = 0\n29835:  stat(\"/var/ldap/key3.db\", 0xFFBFC9F8)           = 0\n29835:  open(\"/var/ldap/key3.db\", O_RDONLY)             = 16\n29835:  fcntl(16, F_SETFD, 0x00000001)                  = 0\n29835:  read(16, \"\\00615 a\\0\\0\\002\\0\\010E1\".., 260)     = 260\n29835:  brk(0x00301138)                                 = 0\n29835:  brk(0x00303138)                                 = 0\n29835:  fstat(16, 0xFFBFC8D0)                           = 0\n29835:  stat(\"/var/ldap/key3.db\", 0xFFBFC848)           = 0\n29835:  lseek(16, 8192, SEEK_SET)                       = 8192\n29835:  read(16, \"\\0041FF91FF81FED1FDD1FCF\".., 8192)    = 8192\n29835:  stat(\"/var/ldap\", 0xFFBFCA68)                   = 0\n29835:  stat(\"/var/ldap/secmod.db\", 0xFFBFC938)         = 0\n29835:  open(\"/var/ldap/secmod.db\", O_RDONLY)           = 17\n29835:  fcntl(17, F_SETFD, 0x00000001)                  = 0\n29835:  read(17, \"\\00615 a\\0\\0\\002\\0\\010E1\".., 260)     = 260\n29835:  brk(0x00303138)                                 = 0\n29835:  brk(0x00305138)                                 = 0\n29835:  fstat(17, 0xFFBFC8D8)                           = 0\n29835:  stat(\"/var/ldap/secmod.db\", 0xFFBFC850)         = 0\n29835:  lseek(17, 8192, SEEK_SET)                       = 8192\n29835:  read(17, \"\\0021FDF1F881F ~1F88\\0\\0\".., 8192)    = 8192\n29835:  brk(0x00305138)                                 = 0\n29835:  brk(0x00307138)                                 = 0\n29835:  fstat(17, 0xFFBFC8D8)                           = 0\n29835:  stat(\"/var/ldap/secmod.db\", 0xFFBFC850)         = 0\n29835:  lseek(17, 16384, SEEK_SET)                      = 16384\n29835:  read(17, \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\".., 8192)    = 8192\n29835:  close(17)                                       = 0\n29835:  stat(\"/var/ldap/roots.dll\", 0xFFBFC388)         Err#2 ENOENT\n29835:  stat(\"/var/ldap/libroots.so\", 0xFFBFC388)       Err#2 ENOENT\n29835:  stat(\"/var/ldap/libroots.sl\", 0xFFBFC388)       Err#2 ENOENT\n29835:  stat(\"/var/ldap/Root Certs\", 0xFFBFC388)        Err#2 ENOENT\n29835:  stat(\"/var/ldap/roots.dll\", 0xFFBFC388)         Err#2 ENOENT\n29835:  stat(\"/var/ldap/libroots.so\", 0xFFBFC388)       Err#2 ENOENT\n29835:  stat(\"/var/ldap/libroots.sl\", 0xFFBFC388)       Err#2 ENOENT\n29835:  stat(\"/var/ldap/Root Certs\", 0xFFBFC388)        Err#2 ENOENT\n29835:  stat(\"/var/ldap/nssckbi.dll\", 0xFFBFC388)       Err#2 ENOENT\n29835:  stat(\"/var/ldap/libnssckbi.so\", 0xFFBFC388)     Err#2 ENOENT\n29835:  stat(\"/var/ldap/libnssckbi.sl\", 0xFFBFC388)     Err#2 ENOENT\n29835:  stat(\"/var/ldap/NSS Builtin Root Certs\", 0xFFBFC388) Err#2 ENOENT\n29835:  stat(\"/var/ldap/mozckbi.dll\", 0xFFBFC388)       Err#2 ENOENT\n29835:  stat(\"/var/ldap/libmozckbi.so\", 0xFFBFC388)     Err#2 ENOENT\n29835:  stat(\"/var/ldap/libmozckbi.sl\", 0xFFBFC388)     Err#2 ENOENT\n29835:  stat(\"/var/ldap/Mozilla Builtin Root Certs\", 0xFFBFC388) Err#2 ENOENT\n29835:  stat(\"/var/ldap/netckbi.dll\", 0xFFBFC388)       Err#2 ENOENT\n29835:  stat(\"/var/ldap/libnetckbi.so\", 0xFFBFC388)     Err#2 ENOENT\n29835:  stat(\"/var/ldap/libnetckbi.sl\", 0xFFBFC388)     Err#2 ENOENT\n29835:  stat(\"/var/ldap/Netscape Builtin Root Certs\", 0xFFBFC388) Err#2 ENOENT\n29835:  uname(0xFFBFC3F8)                               = 1\n29835:  door_info(5, 0xFFBFA6C0)                        = 0\n29835:  door_call(5, 0xFFBFA6A8)                        = 0\n29835:  open(\"/etc/opt/adnapache/openldap/ldap.conf\", O_RDONLY) = 17\n29835:  fstat64(17, 0xFFBFC138)                         = 0\n29835:  fstat64(17, 0xFFBFBFE0)                         = 0\n29835:  ioctl(17, TCGETA, 0xFFBFC0C4)                   Err#25 ENOTTY\n29835:  read(17, \" #\\n #   L D A P   D e f\".., 8192)    = 246\n29835:  read(17, 0x00303E74, 8192)                      = 0\n29835:  llseek(17, 0, SEEK_CUR)                         = 246\n29835:  close(17)                                       = 0\n29835:  open(\"/root/ldaprc\", O_RDONLY)                  Err#2 ENOENT\n29835:  open(\"/root/.ldaprc\", O_RDONLY)                 Err#2 ENOENT\n29835:  open(\"ldaprc\", O_RDONLY)                        Err#2 ENOENT\n29835:  brk(0x00307138)                                 = 0\n29835:  brk(0x0030D138)                                 = 0\n29835:      Incurred fault #6, FLTBOUNDS  %pc = 0x00000130\n29835:        siginfo: SIGSEGV SEGV_MAPERR addr=0x00000130\n29835:      Received signal #11, SIGSEGV [caught]\n29835:        siginfo: SIGSEGV SEGV_MAPERR addr=0x00000130\n29835:  sigprocmask(SIG_SETMASK, 0xFFBFC7EC, 0x00000000) = 0\n29835:  chdir(\"/var/opt/adnapache\")                     = 0\n29835:  sigaction(SIGSEGV, 0xFFBFC530, 0xFFBFC650)      = 0\n29835:  getpid()                                        = 29835 [6448]\n29835:  getpid()                                        = 29835 [6448]\n29835:  kill(29835, SIGSEGV)                            = 0\n29835:  sigprocmask(SIG_SETMASK, 0xFECEA094, 0xFFBFC5A0) = 0\n29835:  lwp_unpark(1, 1)                                = 0\n29835:  setcontext(0xFFBFC5B0)\n29835:      Received signal #11, SIGSEGV [default]\n29835:        siginfo: SIGSEGV pid=29835 uid=0\n6448:   sigprocmask(SIG_SETMASK, 0xFFBFF800, 0x00000000) = 0\n6448:   lwp_schedctl(SC_STATE|SC_PREEMPT, 0, 0xFFBFF6D4) = 0\n6448:   sigprocmask(SIG_SETMASK, 0xFECEA094, 0xFFBFF800) = 0\n6448:   fork1()                                         = 29837\n29837:  fork1()         (returning as child ...)        = 6448\n29837:  getpid()                                        = 29837 [6448]\n29837:  sigprocmask(SIG_SETMASK, 0xFFBFF800, 0x00000000) = 0\n29837:  lwp_schedctl(SC_STATE|SC_PREEMPT, 0, 0xFFBFF654) = 0\n29837:  sigaction(SIGHUP, 0xFFBFF718, 0xFFBFF838)       = 0\n29837:  sigaction(SIGTERM, 0xFFBFF718, 0xFFBFF838)      = 0\n29837:  sigaction(SIGUSR1, 0xFFBFF718, 0xFFBFF838)      = 0\n\n\n\nCompile Instructions\n--------------------\n\nPATH=\"/share/app/gnu/gcc/3.4.1/bin:/share/app/gnu/bin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/ccs/bin\"\nCC=\"gcc\"\nCFLAGS=\"-O3 -fPIC -Wall\"\nCXX=\"g++\"\nCXXFLAGS=\"-O3 -fPIC -Wall\"\nCPPFLAGS=\"-I/opt/adnapache/include\"\nLDFLAGS=\"-R/opt/adnapache/lib -L/opt/adnapache/lib\"\nLD_OPTIONS=\"$LDFLAGS\"\n\nunset LD_LIBRARY_PATH\nexport PATH CC CFLAGS CXX CXXFLAGS LDFLAGS CPPFLAGS LD_OPTIONS\nalias make=gmake\n\ngtar -C /tmp -xvpzf openssl-0.9.8e.tar.gz \ncd /tmp/openssl-0.9.8e\n./config --prefix=/opt/adnapache \\\n         --openssldir=/opt/adnapache/openssl shared \\\n         -R/opt/adnapache/lib -L/opt/adnapache/lib\ngmake\ngmake install\ncd -\n\ngtar -C /tmp -xvpzf openldap-2.3.32.tgz\ncd /tmp/openldap-2.3.32\n./configure --prefix=/opt/adnapache \\\n            --sysconfdir=/etc/opt/adnapache \\\n            --disable-slapd --disable-slurpd \\\n            --localstatedir=/var/opt/adnapache \\\n            --with-tls\ngmake depend \ngmake\ngmake install\ncd -\n\ngtar -C /tmp -xvzf httpd-2.2.4.tar.gz\ncd /tmp/httpd-2.2.4/srclib/apr\n./configure --prefix=/var/opt/adnapache \\\n            --exec-prefix=/opt/adnapache \\\n            --includedir=/opt/adnapache/include \\\n            --infodir=/opt/adnapache/info \\\n            --mandir=/opt/adnapache/man \\\n            --sysconfdir=/etc/opt/adnapache \\\n            --datadir=/var/opt/adnapache\ngmake\ngmake install\n\ncd ../apr-util\n./configure --prefix=/var/opt/adnapache \\\n            --exec-prefix=/opt/adnapache \\\n            --includedir=/opt/adnapache/include \\\n            --infodir=/opt/adnapache/info \\\n            --mandir=/opt/adnapache/man \\\n            --sysconfdir=/etc/opt/adnapache \\\n            --datadir=/var/opt/adnapache \\\n            --with-apr=/opt/adnapache \\\n            --with-ldap=ldap \\\n            --with-ldap-include=/opt/adnapache/include \\\n            --with-ldap-lib=/opt/adnapache/lib\ngmake\ngmake install\n\ncd /tmp/httpd-2.2.4 \n./configure --prefix=/var/opt/adnapache \\\n            --exec-prefix=/opt/adnapache \\\n            --includedir=/opt/adnapache/include \\\n            --infodir=/opt/adnapache/info \\\n            --mandir=/opt/adnapache/man \\\n            --sysconfdir=/etc/opt/adnapache \\\n            --datadir=/var/opt/adnapache \\\n            --enable-ssl \\\n            --with-ssl=/opt/adnapache \\\n            --with-ldap=ldap \\\n            --with-ldap-include=/opt/adnapache/include \\\n            --with-ldap-lib=/opt/adnapache/lib \\\n            --with-apr=/opt/adnapache \\\n            --with-apr-util=/opt/adnapache \\\n            --enable-authnz-ldap \\\n            --enable-ldap \\\n            --enable-dav \\\n            --enable-dav-fs \\\n            --enable-dav-lock \\\n            --enable-auth-digest \\\n            --enable-so\ngmake\ngmake install", "id": 103878, "time": "2007-05-31T07:11:30Z", "creator": "deepblue2007@bluewin.ch", "creation_time": "2007-05-31T07:11:30Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 42556, "is_private": false, "text": "Please provide a backtrace of a crashed process (see\nhttp://httpd.apache.org/dev/debugging.html)", "id": 103896, "time": "2007-05-31T13:34:05Z", "creator": "rpluem@apache.org", "creation_time": "2007-05-31T13:34:05Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 42556, "text": "Here the pstack of a core file:\n\npstack core.httpd.16320.0\ncore 'core.httpd.16320.0' of 16320:     /opt/adnapache/bin/httpd -k start\n fea95c7c ldap_get_lderrno (0, 0, 0, 0, 0, 1df290) + 5c\n feab33a0 ldapssl_install_routines (1e74f0, 27c, 0, feb60000, 0, 0) + 18\n feab2db4 ldapssl_init (1df290, 27c, 1, 0, 0, 342e3400) + 2c\n febc37c0 openConnection (1, 0, 0, a, 1d0a74, 1) + 49c\n febc2a14 makeConnection (0, 0, 1, 0, febe45e8, 1d0a74) + 264\n febc49ec __s_api_getConnection (0, 1, ffbfe540, 1dc070, 0, 1) + 4cc\n febb9f30 get_current_session (1d0a30, febba9b4, 1df188, 4, febba9b4, ff00) + 38\n febbab7c search_state_machine (1, febe2000, 0, 1, 3, 12) + 174\n febbb8a0 __ns_ldap_list (1d0a30, 3, febfadd8, fec0e940, 0, 0) + 23c\n febfa6f0 _nss_ldap_nocb_lookup (1dc190, ffbff160, fec0ece0, ffbff060, 0,\nfebfadd8) + 3c\n febf4764 getbymember (1dc190, ffbff66c, 30, 1d7010, 72000000, 72000000) + 100\n fedce960 nss_search (2, febf4664, 1d6fb8, ffbff66c, 4e455449, fee3f084) + 1d8\n fee195b0 _getgroupsbymember (18af28, 17c630, 10, 1, 0, 17c679) + a4\n fedc32d8 initgroups (18af28, e290, 1919c8, 1d9dd0, fefd2410, 1010fc) + 6c\n 000b4ef0 unixd_setup_child (18af28, 1919c8, 0, 0, 3988, 3958) + 60\n 000b2ad8 child_main (3c00, 101088, 3800, 3800, 3c00, 3800) + 128\n 000b32d0 make_child (b2860, 2, 6, 3c00, 114f30, e2390) + 120\n 000b4598 ap_mpm_run (3800, 3800, 3800, 3c00, 3d08, 101034) + 125c\n 00032d68 main     (10a978, 10c8f8, ffbffae4, 144, 144, 144) + 574\n 000322ac _start   (0, 0, 0, 0, 0, 0) + 5c\n\n\nAnd the shared libraries used by httpd:\n\nldd /opt/adnapache/bin/httpd\n        libm.so.1 =>     /usr/lib/libm.so.1\n        libaprutil-1.so.0 =>     /opt/adnapache/lib/libaprutil-1.so.0\n        libldap-2.3.so.0 =>      /opt/adnapache/lib/libldap-2.3.so.0\n        liblber-2.3.so.0 =>      /opt/adnapache/lib/liblber-2.3.so.0\n        libresolv.so.2 =>        /usr/lib/libresolv.so.2\n        libgen.so.1 =>   /usr/lib/libgen.so.1\n        libssl.so.0.9.8 =>       /opt/adnapache/lib/libssl.so.0.9.8\n        libcrypto.so.0.9.8 =>    /opt/adnapache/lib/libcrypto.so.0.9.8\n        libexpat.so.0 =>         /opt/adnapache/lib/libexpat.so.0\n        libapr-1.so.0 =>         /opt/adnapache/lib/libapr-1.so.0\n        libuuid.so.1 =>  /usr/lib/libuuid.so.1\n        libsendfile.so.1 =>      /usr/lib/libsendfile.so.1\n        librt.so.1 =>    /usr/lib/librt.so.1\n        libsocket.so.1 =>        /usr/lib/libsocket.so.1\n        libnsl.so.1 =>   /usr/lib/libnsl.so.1\n        libpthread.so.1 =>       /usr/lib/libpthread.so.1\n        libdl.so.1 =>    /usr/lib/libdl.so.1\n        libc.so.1 =>     /usr/lib/libc.so.1\n        libgcc_s.so.1 =>         /opt/adnapache/lib/libgcc_s.so.1\n        libaio.so.1 =>   /usr/lib/libaio.so.1\n        libmd5.so.1 =>   /usr/lib/libmd5.so.1\n        libmp.so.2 =>    /usr/lib/libmp.so.2\n        libthread.so.1 =>        /usr/lib/libthread.so.1\n        /usr/platform/SUNW,UltraAX-i2/lib/libc_psr.so.1\n        /usr/platform/SUNW,UltraAX-i2/lib/libmd5_psr.so.1\n\nBye\nBernd", "id": 103941, "time": "2007-05-31T22:43:45Z", "creator": "deepblue2007@bluewin.ch", "creation_time": "2007-05-31T22:43:45Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "deepblue2007@bluewin.ch", "attachment_id": null, "is_private": false, "id": 103942, "time": "2007-05-31T22:46:03Z", "bug_id": 42556, "creation_time": "2007-05-31T22:46:03Z", "text": "/opt/adnapache/bin/httpd -V\nServer version: Apache/2.2.4 (Unix)\nServer built:   May 24 2007 08:34:22\nServer's Module Magic Number: 20051115:4\nServer loaded:  APR 1.2.8, APR-Util 1.2.8\nCompiled using: APR 1.2.8, APR-Util 1.2.8\nArchitecture:   32-bit\nServer MPM:     Prefork\n  threaded:     no\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_FCNTL_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=128\n -D HTTPD_ROOT=\"/var/opt/adnapache\"\n -D SUEXEC_BIN=\"/var/opt/adnapache/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"/etc/opt/adnapache/mime.types\"\n -D SERVER_CONFIG_FILE=\"/etc/opt/adnapache/httpd.conf\"\n\n/opt/adnapache/bin/httpd -l\nCompiled in modules:\n  core.c\n  mod_authn_file.c\n  mod_authn_default.c\n  mod_authz_host.c\n  mod_authz_groupfile.c\n  mod_authz_user.c\n  mod_authnz_ldap.c\n  mod_authz_default.c\n  mod_auth_basic.c\n  mod_auth_digest.c\n  mod_include.c\n  mod_filter.c\n  util_ldap.c\n  mod_log_config.c\n  mod_env.c\n  mod_setenvif.c\n  mod_ssl.c\n  prefork.c\n  http_core.c\n  mod_mime.c\n  mod_dav.c\n  mod_status.c\n  mod_autoindex.c\n  mod_asis.c\n  mod_cgi.c\n  mod_dav_fs.c\n  mod_dav_lock.c\n  mod_negotiation.c\n  mod_dir.c\n  mod_actions.c\n  mod_userdir.c\n  mod_alias.c\n  mod_so.c\n"}, {"count": 4, "tags": [], "creator": "deepblue2007@bluewin.ch", "attachment_id": null, "text": "Pstack of the initial running process:\n\npstack 16435\n16435:  /opt/adnapache/bin/httpd -k start\n fee1e590 poll     (ffbff730, 0, 3e8)\n fedd2618 _select  (3e8, fee3f310, 0, fee3f310, fee3f310, 0) + 2ec\n fecce1c4 select   (0, 0, 0, 0, ffbff800, 0) + 6c\n fefdf01c apr_sleep (0, f4240, 11175, 11000, 10c8f8, 11176) + 4c\n 00050fb0 ap_wait_or_timeout (ffbff90c, ffbff908, ffbff990, 10c8f8, 0, 3800) + 74\n 000b38c0 ap_mpm_run (3800, 3800, 3800, 3c00, 10107c, 101034) + 584\n 00032d68 main     (10a978, 10c8f8, ffbffae4, 144, 144, 144) + 574\n 000322ac _start   (0, 0, 0, 0, 0, 0) + 5c\n", "id": 103943, "time": "2007-05-31T22:54:24Z", "bug_id": 42556, "creation_time": "2007-05-31T22:54:24Z", "is_private": false}, {"count": 5, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "is_private": false, "id": 103954, "time": "2007-06-01T03:04:23Z", "bug_id": 42556, "creation_time": "2007-06-01T03:04:23Z", "text": "Can you please also provide a gdb backtrace (thread apply all bt full) and use\nself compiled binaries (including openldap) that are compiled with -O2 -g\ninstead of -O3?"}, {"count": 6, "tags": [], "bug_id": 42556, "attachment_id": null, "id": 103962, "time": "2007-06-01T06:33:11Z", "creator": "covener@gmail.com", "creation_time": "2007-06-01T06:33:11Z", "is_private": false, "text": "pldd, as opposed to ldd on the binaries, might show you that nss has loaded\nsun-provided LDAP library alongside your openldap lib.\n\nI've seen conflicts in other pairs of SDKs that didn't break until ldaps:// was\nused, although earlier breakage is also pretty likely, since apr-util doesn't\ntake any efforts to hide the LDAP symbols (available directly to e.g. mod_ldap\nwithout\nany kind of optional fn) and structure definitions may differ.\n"}, {"count": 7, "tags": [], "bug_id": 42556, "attachment_id": null, "is_private": false, "id": 104018, "time": "2007-06-03T23:15:39Z", "creator": "deepblue2007@bluewin.ch", "creation_time": "2007-06-03T23:15:39Z", "text": "Here's the pldd of a core file:\n\npldd core.httpd.19712.0\ncore 'core.httpd.19712.0' of 19712:     /opt/adnapache/bin/httpd -k start\n/usr/lib/libm.so.1\n/opt/adnapache/lib/libaprutil-1.so.0.2.8\n/opt/adnapache/lib/libldap-2.3.so.0.2.20\n/opt/adnapache/lib/liblber-2.3.so.0.2.20\n/usr/lib/libresolv.so.2\n/usr/lib/libgen.so.1\n/opt/adnapache/lib/libssl.so.0.9.8\n/opt/adnapache/lib/libcrypto.so.0.9.8\n/opt/adnapache/lib/libexpat.so.0.1.0\n/opt/adnapache/lib/libapr-1.so.0.2.8\n/usr/lib/libuuid.so.1\n/usr/lib/libsendfile.so.1\n/usr/lib/librt.so.1\n/usr/lib/libsocket.so.1\n/usr/lib/libnsl.so.1\n/usr/lib/libpthread.so.1\n/usr/lib/libdl.so.1\n/usr/lib/libc.so.1\n/opt/adnapache/lib/libgcc_s.so.1\n/usr/lib/libaio.so.1\n/usr/lib/libmd5.so.1\n/usr/lib/libmp.so.2\n/usr/platform/sun4u/lib/libc_psr.so.1\n/usr/lib/libthread.so.1\n/usr/lib/nss_files.so.1\n/usr/lib/nss_ldap.so.1\n/usr/lib/libsldap.so.1\n/usr/lib/libldap.so.5\n/usr/lib/libdoor.so.1\n\nI created a SysV package of apache and installed it also on a Solaris 8 and 10\nhost which is configured as an LDAP client. On these two system it works fine.\nMight it be that there is a bug in the way Solaris 9 handles dynamic loading of\nlibraries?\n\nBye,\nBernd\n"}, {"count": 8, "tags": [], "creator": "deepblue2007@bluewin.ch", "attachment_id": null, "text": "I compiled Apache and OpenLDAP with options -O2 -g. Here is the gdb and pstack\noutput of a core file. There is not much output am I doing it right?\n\n/usr/local/bin/gdb --core=core.httpd.25265.0\nGNU gdb 6.0\nCopyright 2003 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"sparc-sun-solaris2.9\".\nCore was generated by `/opt/adnapache/bin/httpd -k start'.\nProgram terminated with signal 10, Bus error.\n#0  0xfea95c7c in ?? ()\n(gdb) thread apply all bt full\n\nThread 1 (process 90801    ):\n#0  0xfea95c7c in ?? ()\nNo symbol table info available.\n#1  0xfeab33a8 in ?? ()\nNo symbol table info available.\n#2  0xfeab2dbc in ?? ()\nNo symbol table info available.\n\n\n\npstack core.httpd.25265.0\ncore 'core.httpd.25265.0' of 25265:     /opt/adnapache/bin/httpd -k start\n fea95c7c ldap_get_lderrno (0, 0, 0, 0, 2, 1d1760) + 5c\n feab33a0 ldapssl_install_routines (1d99c0, 27c, 0, feb60000, 0, 0) + 18\n feab2db4 ldapssl_init (1d1760, 27c, 1, 0, 0, 342e3400) + 2c\n febd37c0 openConnection (1, 0, 0, a, 1c2f44, 1) + 49c\n febd2a14 makeConnection (0, 0, 1, 0, febf45e8, 1c2f44) + 264\n febd49ec __s_api_getConnection (0, 1, ffbfe538, 1ce540, 0, 1) + 4cc\n febc9f30 get_current_session (1c2f00, febca9b4, 1d1658, 4, febca9b4, ff00) + 38\n febcab7c search_state_machine (1, febf2000, 0, 1, 3, 12) + 174\n febcb8a0 __ns_ldap_list (1c2f00, 3, fec0add8, fec1e940, 0, 0) + 23c\n fec0a6f0 _nss_ldap_nocb_lookup (1ce660, ffbff158, fec1ece0, ffbff058, 0,\nfec0add8) + 3c\n fec04764 getbymember (1ce660, ffbff664, 30, 1c94e0, 72000000, 72000000) + 100\n fedce960 nss_search (2, fec04664, 1c9488, ffbff664, 4e455449, fee3f084) + 1d8\n fee195b0 _getgroupsbymember (17d3f8, 16eb00, 10, 1, 0, 16eb49) + a4\n fedc32d8 initgroups (17d3f8, e290, 183e98, fffffff8, fefd1a40, f35cc) + 6c\n 000a8f78 unixd_setup_child (17d3f8, 183e98, 1ca260, 0, 3974, 3944) + 60\n 000a6d40 child_main (0, a6b34, 3800, 0, 3c00, 3800) + 128\n 000a73d4 make_child (107400, 0, 100, 3800, 2, 5) + 120\n 000a8064 ap_mpm_run (3800, 3c00, 3c00, 3800, 3940, ec520) + b70\n 00033050 main     (fedc8, 3b4c, 144, 144, 3c7c, 12c) + 840\n 000322ac _start   (0, 0, 0, 0, 0, 0) + 5c\n", "id": 104021, "time": "2007-06-04T00:28:49Z", "bug_id": 42556, "creation_time": "2007-06-04T00:28:49Z", "is_private": false}, {"count": 9, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "(In reply to comment #8)\n> I compiled Apache and OpenLDAP with options -O2 -g. Here is the gdb and pstack\n> output of a core file. There is not much output am I doing it right?\n\nNo. Instead of\n\n> \n> /usr/local/bin/gdb --core=core.httpd.25265.0\n\nYou need to do\n\n/usr/local/bin/gdb /opt/adnapache/bin/httpd core.httpd.25265.0", "id": 104049, "time": "2007-06-04T13:07:33Z", "bug_id": 42556, "creation_time": "2007-06-04T13:07:33Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 42556, "is_private": false, "text": "(In reply to comment #7)\n> Here's the pldd of a core file:\n> \n> pldd core.httpd.19712.0\n> core 'core.httpd.19712.0' of 19712:     /opt/adnapache/bin/httpd -k start\n\n\n> /opt/adnapache/lib/libaprutil-1.so.0.2.8\n> /opt/adnapache/lib/libldap-2.3.so.0.2.20\n> /opt/adnapache/lib/liblber-2.3.so.0.2.20\n\n> /usr/lib/libsldap.so.1\n> /usr/lib/libldap.so.5\n\n> I created a SysV package of apache and installed it also on a Solaris 8 and 10\n> host which is configured as an LDAP client. On these two system it works fine.\n> Might it be that there is a bug in the way Solaris 9 handles dynamic loading of\n> libraries?\n\nMaybe. But in general I agree with Eric that having one binary linked against\ntwo different ldap SDKs is waiting for an accident to happen. So it might make\nsense to compile httpd against SUN's ldap SDK (to be honest I am not sure if\nthis is possible as I am not an ldap guru)", "id": 104050, "time": "2007-06-04T13:37:24Z", "creator": "rpluem@apache.org", "creation_time": "2007-06-04T13:37:24Z", "attachment_id": null}, {"id": 104060, "tags": [], "bug_id": 42556, "attachment_id": null, "count": 11, "text": "Hi Ruediger,\n\nThe ldd of the httpd binary (comment #2) shows that it is only linked against\nthe OpenLDAP library. But the pldd of the core file (comment #7) shows that\nsomehow the Solaris native LDAP and NSS libraries also get loaded.\n\nHere a list of all linked libraries of all used components:\n\nfind /opt/adnapache -type f -exec ldd \"{}\" \\; 2>&1 |grep /usr/lib |sort -u\n        libICE.so.6 =>   /usr/lib/libICE.so.6\n        libSM.so.6 =>    /usr/lib/libSM.so.6\n        libX11.so.4 =>   /usr/lib/libX11.so.4\n        libXext.so.0 =>  /usr/lib/libXext.so.0\n        libXpm.so.4 =>   /usr/lib/libXpm.so.4\n        libXt.so.4 =>    /usr/lib/libXt.so.4\n        libaio.so.1 =>   /usr/lib/libaio.so.1\n        libc.so.1 =>     /usr/lib/64/libc.so.1\n        libc.so.1 =>     /usr/lib/libc.so.1\n        libcmd.so.1 =>   /usr/lib/libcmd.so.1\n        libcrypt_i.so.1 =>       /usr/lib/libcrypt_i.so.1\n        libcurses.so.1 =>        /usr/lib/libcurses.so.1\n        libdl.so.1 =>    /usr/lib/64/libdl.so.1\n        libdl.so.1 =>    /usr/lib/libdl.so.1\n        libgen.so.1 =>   /usr/lib/libgen.so.1\n        libm.so.1 =>     /usr/lib/64/libm.so.1\n        libm.so.1 =>     /usr/lib/libm.so.1\n        libmd5.so.1 =>   /usr/lib/libmd5.so.1\n        libmp.so.2 =>    /usr/lib/libmp.so.2\n        libnsl.so.1 =>   /usr/lib/libnsl.so.1\n        libpam.so.1 =>   /usr/lib/libpam.so.1\n        libpthread.so.1 =>       /usr/lib/libpthread.so.1\n        libresolv.so.2 =>        /usr/lib/libresolv.so.2\n        librt.so.1 =>    /usr/lib/librt.so.1\n        libsendfile.so.1 =>      /usr/lib/libsendfile.so.1\n        libsocket.so.1 =>        /usr/lib/libsocket.so.1\n        libthread.so.1 =>        /usr/lib/libthread.so.1\n        libuuid.so.1 =>  /usr/lib/libuuid.so.1\n        libxml2.so.2 =>  /usr/lib/libxml2.so.2\n        libz.so.1 =>     /usr/lib/libz.so.1\n\nIt is not linked against Sun's LDAP libraries.\n\n\nGNU debugger backtrace:\n\n/usr/local/bin/gdb /opt/adnapache/bin/httpd core.httpd.14168.0\nGNU gdb 6.0\nCopyright 2003 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"sparc-sun-solaris2.9\"...\nCore was generated by `/opt/adnapache/bin/httpd -k start'.\nProgram terminated with signal 10, Bus error.\nReading symbols from /usr/lib/libm.so.1...done.\nLoaded symbols for /usr/lib/libm.so.1\nReading symbols from /opt/adnapache/lib/libaprutil-1.so.0...done.\nLoaded symbols for /opt/adnapache/lib/libaprutil-1.so.0\nReading symbols from /opt/adnapache/lib/libldap-2.3.so.0...done.\nLoaded symbols for /opt/adnapache/lib/libldap-2.3.so.0\nReading symbols from /opt/adnapache/lib/liblber-2.3.so.0...done.\nLoaded symbols for /opt/adnapache/lib/liblber-2.3.so.0\nReading symbols from /usr/lib/libresolv.so.2...done.\nLoaded symbols for /usr/lib/libresolv.so.2\nReading symbols from /usr/lib/libgen.so.1...done.\nLoaded symbols for /usr/lib/libgen.so.1\nReading symbols from /opt/adnapache/lib/libssl.so.0.9.8...done.\nLoaded symbols for /opt/adnapache/lib/libssl.so.0.9.8\nReading symbols from /opt/adnapache/lib/libcrypto.so.0.9.8...done.\nLoaded symbols for /opt/adnapache/lib/libcrypto.so.0.9.8\nReading symbols from /opt/adnapache/lib/libexpat.so.0...done.\nLoaded symbols for /opt/adnapache/lib/libexpat.so.0\nReading symbols from /opt/adnapache/lib/libapr-1.so.0...done.\nLoaded symbols for /opt/adnapache/lib/libapr-1.so.0\nReading symbols from /usr/lib/libuuid.so.1...done.\nLoaded symbols for /usr/lib/libuuid.so.1\nReading symbols from /usr/lib/libsendfile.so.1...done.\nLoaded symbols for /usr/lib/libsendfile.so.1\nReading symbols from /usr/lib/librt.so.1...done.\nLoaded symbols for /usr/lib/librt.so.1\nReading symbols from /usr/lib/libsocket.so.1...done.\nLoaded symbols for /usr/lib/libsocket.so.1\nReading symbols from /usr/lib/libnsl.so.1...done.\nLoaded symbols for /usr/lib/libnsl.so.1\nReading symbols from /usr/lib/libpthread.so.1...done.\nLoaded symbols for /usr/lib/libpthread.so.1\nReading symbols from /usr/lib/libdl.so.1...done.\nLoaded symbols for /usr/lib/libdl.so.1\nReading symbols from /usr/lib/libc.so.1...done.\nLoaded symbols for /usr/lib/libc.so.1\nReading symbols from /opt/adnapache/lib/libgcc_s.so.1...done.\nLoaded symbols for /opt/adnapache/lib/libgcc_s.so.1\nReading symbols from /usr/lib/libaio.so.1...done.\nLoaded symbols for /usr/lib/libaio.so.1\nReading symbols from /usr/lib/libmd5.so.1...done.\nLoaded symbols for /usr/lib/libmd5.so.1\nReading symbols from /usr/lib/libmp.so.2...done.\nLoaded symbols for /usr/lib/libmp.so.2\nReading symbols from /usr/platform/SUNW,UltraAX-i2/lib/libc_psr.so.1...done.\nLoaded symbols for /usr/platform/SUNW,UltraAX-i2/lib/libc_psr.so.1\nReading symbols from /usr/lib/libthread.so.1...done.\nLoaded symbols for /usr/lib/libthread.so.1\nReading symbols from /usr/lib/nss_files.so.1...done.\nLoaded symbols for /usr/lib/nss_files.so.1\nReading symbols from /usr/lib/nss_ldap.so.1...done.\nLoaded symbols for /usr/lib/nss_ldap.so.1\nReading symbols from /usr/lib/libsldap.so.1...done.\nLoaded symbols for /usr/lib/libsldap.so.1\nReading symbols from /usr/lib/libldap.so.5...done.\nLoaded symbols for /usr/lib/libldap.so.5\nReading symbols from /usr/lib/libdoor.so.1...done.\nLoaded symbols for /usr/lib/libdoor.so.1\n#0  0xfea95c7c in ldap_get_lderrno () from /usr/lib/libldap.so.5\n(gdb) thread apply all bt full\n\nThread 1 (process 79704    ):\n#0  0xfea95c7c in ldap_get_lderrno () from /usr/lib/libldap.so.5\nNo symbol table info available.\n#1  0xfeab33a8 in ldapssl_install_routines () from /usr/lib/libldap.so.5\nNo symbol table info available.\n#2  0xfeab2dbc in ldapssl_init () from /usr/lib/libldap.so.5\nNo symbol table info available.\n", "time": "2007-06-05T01:58:24Z", "creator": "deepblue2007@bluewin.ch", "creation_time": "2007-06-05T01:58:24Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 42556, "attachment_id": null, "is_private": false, "id": 104095, "time": "2007-06-05T13:08:46Z", "creator": "rpluem@apache.org", "creation_time": "2007-06-05T13:08:46Z", "text": "(In reply to comment #11)\n> \n> It is not linked against Sun's LDAP libraries.\n\nI see. Maybe thats the problem :-). Seriously, I think SUN's LDAP libaries get\nloaded by the nss_ldap libraries (try ldd nss_ldap) because nss_ldap gets loaded\nvia dlopen by the nss library which tries to resolve the groupnames as\nconfigured in nsswitch.conf via ldap. Furthermore it seems that Openldap and\nSUN's ldap libaries on Solaris 9 clash together. So I fear that this combination\ndoes not work. So currently I see only two approaches to solve this:\n\n1. As it works with Solaris 8 / 10 (comment #7), there might be a patch for\nSolaris 9 to solve this. So you would need to try your luck with SUN's bug database.\n2. You try to get httpd's / apr-util's ldap support working with SUN's ldap\nlibraries.\n\n\n> (gdb) thread apply all bt full\n> \n> Thread 1 (process 79704    ):\n> #0  0xfea95c7c in ldap_get_lderrno () from /usr/lib/libldap.so.5\n> No symbol table info available.\n> #1  0xfeab33a8 in ldapssl_install_routines () from /usr/lib/libldap.so.5\n> No symbol table info available.\n> #2  0xfeab2dbc in ldapssl_init () from /usr/lib/libldap.so.5\n> No symbol table info available.\n> \n\nIt really stops after 3 levels?"}, {"id": 104133, "tags": [], "bug_id": 42556, "attachment_id": null, "count": 13, "text": "Hi Ruediger,\n\nThanks for your investigations. The system's patch level is the most recent. I\nam going to bug Sun about this case now that I'm sure that it's a Solaris bug.\n\n> It really stops after 3 levels?\n\nYes, there is nothing more that gdb printed out.\n\nBye\nBernd\n\n", "time": "2007-06-06T06:14:12Z", "creator": "deepblue2007@bluewin.ch", "creation_time": "2007-06-06T06:14:12Z", "is_private": false}, {"count": 14, "tags": [], "bug_id": 42556, "attachment_id": null, "id": 104151, "time": "2007-06-06T13:33:27Z", "creator": "rpluem@apache.org", "creation_time": "2007-06-06T13:33:27Z", "is_private": false, "text": "As this does not seem to be fixable within httpd I mark it as invalid. Feel free\nto reopen it if further investigations indicate otherwise."}]