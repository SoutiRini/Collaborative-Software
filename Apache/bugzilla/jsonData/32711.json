[{"count": 0, "tags": [], "bug_id": 32711, "text": "while updating a bigger application to apache2/php4.3 and then php5.0, we\nnoticed, that the crypt function in php refused to handle MD5 salts. this always\nresulted in DES crypted strings instead of the proper detection. doing tests\nwith cli-php and some test.c's showed, that the problem only persists within the\nhttpd.\n\nafter some tests it turned out, that the problem is the load order of the\nlibraries in httpd to be the culprit. a ``ldd httpd'' showed libcrypto beeing\nloaded before libcrypt. after changing the Makefile.in (placing EXTRA_LIBS after\nAB_LIBS) the order has changed and the problem is gone now (AB_LIBS contained\nthe -lcrypt and EXTRA_LIBS contained -lcrypto).\n\nwe are not running SSL with this test-server so i can not tell, if there are any\nproblems resulting on this change (assuming -lcrypto is primarily needed for\nopenssl).", "id": 68543, "time": "2004-12-15T00:51:53Z", "creator": "frick@sc-networks.com", "creation_time": "2004-12-15T00:51:53Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "is_private": false, "text": "What version of OpenSSL?  It looks like at least OpenSSL 0.9.7a's libcrypto does\nnot define a crypt() function any more so the library link order should not\nmatter.  If you have some OpenSSL version which does define crypt() that's an\nOpenSSL bug.", "id": 68563, "time": "2004-12-15T13:09:42Z", "bug_id": 32711, "creation_time": "2004-12-15T13:09:42Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 32711, "text": "the version is 0.96m - i would not consider this something special for a\nproduction system. searching for crypt gets a hit:\n\n$ nm libcrypto.so.0.9.6 | grep \" crypt\\$\"\n000309a0 T crypt\n\nwell on the othere hand the fix is simple - changing the order of the .*_LIBS\nreplacements in the Makefile.in and so assuring that the SSL stuff is at the end.", "id": 68564, "time": "2004-12-15T13:47:35Z", "creator": "frick@sc-networks.com", "creation_time": "2004-12-15T13:47:35Z", "tags": [], "is_private": false}]