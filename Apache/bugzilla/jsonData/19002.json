[{"count": 0, "tags": [], "creator": "jihh@neusoft.com", "attachment_id": null, "text": "A very very simple servlet or JSP, only one statement like\nout.println(\"Hello World!\");\n\nand use your browser request this page, and, hold on refresh.\nConsole will repeat report like below\n\n2003-04-15 00:17:03 - Ctx( /daji ): IllegalStateException in: R( /daji + /WEB-\nINF/test.jsp + null) Current state = FLUSHED, new state = CODING\n2003-04-15 00:17:03 - Ctx( /daji ): IllegalStateException in: R( /daji + /WEB-\nINF/test.jsp + null) Current state = FLUSHED, new state = CODING\n2003-04-15 00:17:03 - Ctx( /daji ): IOException in: R( /daji + /WEB-\nINF/test.jsp + null) Connection reset by peer: socket write error\n2003-04-15 00:17:03 - Ctx( /daji ): IOException in: R( /daji + /WEB-\nINF/test.jsp + null) Connection reset by peer: socket write error\n2003-04-15 00:17:03 - Ctx( /daji ): IOException in: R( /daji + /WEB-\nINF/test.jsp + null) Connection reset by peer: socket write error\n2003-04-15 00:17:03 - Ctx( /daji ): IllegalStateException in: R( /daji + /WEB-\nINF/test.jsp + null) Current state = FLUSHED, new state = CODING\n2003-04-15 00:17:03 - Ctx( /daji ): IllegalStateException in: R( /daji + /WEB-\nINF/test.jsp + null) Current state = FLUSHED, new state = CODING\n............\nrepeat repeat\n\nthen stop tomcat \"shutdown.bat\" or \"shutdown.sh\", you will see these:\n2003-04-15 00:17:31 - Ctx( /daji ): Exception in: R( /daji + /WEB-INF/test.jsp \n+ null) - java.lang.NullPointerException\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.handleError\n(ContextManager.java:1177)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:312)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.internalService\n(ContextManager.java:806)\n\tat org.apache.tomcat.core.ContextManager.service\n(ContextManager.java:752)\n\tat \norg.apache.tomcat.service.http.HttpConnectionHandler.processConnection\n(HttpConnectionHandler.java:213)\n\tat org.apache.tomcat.service.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:416)\n\tat org.apache.tomcat.util.ThreadPool$ControlRunnable.run\n(ThreadPool.java:501)\n\tat java.lang.Thread.run(Thread.java:534)\n\nif I replace JDK from 1.4 to 1.3, it's OK!", "id": 35123, "time": "2003-04-14T16:23:42Z", "bug_id": 19002, "creation_time": "2003-04-14T16:23:42Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "jihh@neusoft.com", "is_private": false, "id": 35124, "time": "2003-04-14T16:27:35Z", "bug_id": 19002, "creation_time": "2003-04-14T16:27:35Z", "tags": [], "text": "I check source, handleError check loop error, and continue call another \nservlet,\nand exception continue loop ........\n\nso I fix this.\n\nIndex: ./src/share/org/apache/tomcat/core/ContextManager.java\n===================================================================\nRCS file: /home/cvspublic/jakarta-\ntomcat/src/share/org/apache/tomcat/core/ContextManager.java,v\nretrieving revision 1.100.2.27\ndiff -r1.100.2.27 ContextManager.java\n1161c1161,1164\n< \t    errorServlet = ctx.getServletByName(\"tomcat.exceptionHandler\");\n---\n> \t{\n> \t\tlog(\"Error loop for \" + req);\n> \t\treturn;\n> \t}\n\n==========================================================================\n\nyes, it's work."}, {"count": 2, "tags": [], "creator": "jihh@neusoft.com", "attachment_id": null, "text": "btw, it's jakarta-tomcat branch tomcat_32", "id": 35125, "time": "2003-04-14T16:28:40Z", "bug_id": 19002, "creation_time": "2003-04-14T16:28:40Z", "is_private": false}, {"count": 3, "tags": [], "creator": "wiley_jacobs@hotmail.com", "attachment_id": null, "id": 38598, "time": "2003-06-09T17:36:49Z", "bug_id": 19002, "creation_time": "2003-06-09T17:36:49Z", "is_private": false, "text": "This does the same thing on 4.1 with JDK 1.4. Looks like the popular solution \nis to go to JDK 1.3 or use IBM's JDK. This doesn't work if you have to use JDK \n1.4. Does Jakarta have a solution to this? "}, {"count": 4, "tags": [], "creator": "medthomas@ntlworld.com", "attachment_id": null, "id": 43456, "time": "2003-08-28T20:34:27Z", "bug_id": 19002, "creation_time": "2003-08-28T20:34:27Z", "is_private": false, "text": "This works for me without any problems using j2sdk 1.4.1_02, Win XP and Tomcat \n4.1 HEAD.\n\nIf you are still experiencing this problem, you need to be much more specific \nabout your configuration. It would also be helpful if you could provide more \ninformation regarding your test webapp. For now, I am resolving this as \nWORKSFORME."}]