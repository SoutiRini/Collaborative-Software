[{"count": 0, "tags": [], "bug_id": 51357, "attachment_id": 27144, "text": "Created attachment 27144\nProposed patch\n\nHi,\n\nfunction apr_table_(set|add|merge) have some variants that do *not* duplicate strings. It can be safely used if you can \"ensure that the values will not change after they have been added.\"\n\nWhen usable, it saves some memory allocation.\n\nThese variants are apr_table_(set|add|merge)n functions.\n\n\nThe proposed patch is trivial. It only modifies the function calls when both the key and the value are constant strings. This is always safe to do the transformation in this case.\n\nOther patches will be proposed when 1 or both strings are already duplicated in a memory pool and *not* used for another purpose. These other patches will require more careful checking. \n\n\nFor now modified files are :\n   - modules/http/http_filters.c\n   - modules/proxy/proxy_util.c\n   - modules/ssl/ssl_engine_io.c\n   - modules/cache/cache_util.c\n   - modules/arch/netware/mod_netware.c\n   - modules/arch/netware/mod_nw_ssl.c\n\nBest regards.", "id": 147028, "time": "2011-06-11T04:36:48Z", "creator": "christophe.jaillet@wanadoo.fr", "creation_time": "2011-06-11T04:36:48Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "sf@sfritsch.de", "text": "r1135083", "id": 147053, "time": "2011-06-13T10:58:26Z", "bug_id": 51357, "creation_time": "2011-06-13T10:58:26Z", "tags": [], "is_private": false}]