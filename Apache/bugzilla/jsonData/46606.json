[{"count": 0, "tags": [], "creator": "robert.jakob@uniklinik-freiburg.de", "attachment_id": null, "is_private": false, "id": 124369, "time": "2009-01-26T07:18:21Z", "bug_id": 46606, "creation_time": "2009-01-26T07:18:21Z", "text": "In the Webdav standard, there is a header option named \"depth\".\nThis header must be given when running a propfind webdav request.\nThe value may be greater 0 or the constant \"infinity\", i.e. the\nwhole file tree is requested.\n\nIn the WebdavServlet, INFINITY is set to 3, which unfortunately\ndoes not correspond to the standard.\n\n>>> CODE >>>\n/**\n * Default depth is infite.\n */\nprivate static final int INFINITY = 3; // To limit tree browsing a bit\n<<< END OF CODE <<<\n\nPerhaps this could be changed to a much higher value (e.g. maxint).\n\nBelow, there is a method named propfind, where the following code\ncan be found:\n\n>>> CODE >>>\nString depthStr = req.getHeader(\"Depth\");\n\nif (depthStr == null) {\n  depth = INFINITY;\n} else {\n  if (depthStr.equals(\"0\")) {\n  depth = 0;\n   } else if (depthStr.equals(\"1\")) {\n      depth = 1;\n   } else if (depthStr.equals(\"infinity\")) {\n    depth = INFINITY;\n  }\n}\n<<< END OF CODE <<<\n\nPerhaps one should use an integer conversion function and in case\nof an exception one could use infinity.\n\nHope this describes the problem good enough.\nThe same problem occurs in Tomcat 5.x, as well."}, {"count": 1, "text": "The limit is in place to prevent what could be an expensive operation.\n\nI have made this configurable with the default still set to 3.\n\nThis change has been made to trunk and proposed for 6.0.x and 5.5.x", "bug_id": 46606, "attachment_id": null, "id": 124643, "time": "2009-02-03T23:06:46Z", "creator": "markt@apache.org", "creation_time": "2009-02-03T23:06:46Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 46606, "is_private": false, "id": 124810, "creation_time": "2009-02-12T06:57:24Z", "time": "2009-02-12T06:57:24Z", "creator": "markt@apache.org", "text": "This has been fixed in 6.0.x and will be included in 6.0.19 onwards.", "attachment_id": null}]