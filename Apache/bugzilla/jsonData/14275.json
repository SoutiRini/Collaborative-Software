[{"attachment_id": null, "tags": [], "bug_id": 14275, "is_private": false, "count": 0, "id": 25724, "time": "2002-11-05T21:06:39Z", "creator": "pkrishna@learnframe.com", "creation_time": "2002-11-05T21:06:39Z", "text": "The following exception is thrown by BasicDataSource while adding an entry to \nthe MSSQL database.\n\nHere is the stack trace:\n\njava.sql.SQLException: Cannot load JDBC driver class 'null'\n        at org.apache.commons.dbcp.BasicDataSource.createDataSource\n(BasicDataSource.java:529)\n        at org.apache.commons.dbcp.BasicDataSource.getConnection\n(BasicDataSource.java:312)\n        at administration.FaqRepository.<init>(Unknown Source)\n        at administration.FaqRepository.getInstance(Unknown Source)\n        at administration.AddCommand.execute(Unknown Source)\n        at administration.FaqAdminServlet.service(Unknown Source)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2396)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n        at org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:405)\n        at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:380)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:508)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:533)\n        at java.lang.Thread.run(Thread.java:484)\n\nThis happens when an entry is added to the database; Here is the section that \npertains resource name jdbc/Questions:\n\n    <Resource name=\"jdbc/Questions\" scope=\"Shareable\" \ntype=\"javax.sql.DataSource\"/>\n    <Resource name=\"UserDatabase\" scope=\"Shareable\" \ntype=\"org.apache.catalina.UserDatabase\" auth=\"Container\" description=\"User \ndatabase that can be updated and saved\"/>\n    <ResourceParams name=\"jdbc/Questions\">\n      <parameter>\n        <name>validationQuery</name>\n        <value></value>\n      </parameter>\n      <parameter>\n        <name>maxWait</name>\n        <value>5000</value>\n      </parameter>\n      <parameter>\n        <name>maxActive</name>\n        <value>4</value>\n      </parameter>\n      <parameter>\n        <name>password</name>\n        <value></value>\n      </parameter>\n      <parameter>\n        <name>url</name>\n        <value>jdbc:weblogic:mssqlserver4:Questions@localhost</value>\n      </parameter>\n      <parameter>\n        <name>driverClassName</name>\n        <value>weblogic.jdbc.mssqlserver4.Driver</value>\n      </parameter>\n      <parameter>\n        <name>maxIdle</name>\n        <value>2</value>\n      </parameter>\n      <parameter>\n        <name>username</name>\n        <value>sa</value>\n      </parameter>\n    </ResourceParams>\n    <ResourceParams name=\"UserDatabase\">\n      <parameter>\n        <name>factory</name>\n        <value>org.apache.catalina.users.MemoryUserDatabaseFactory</value>\n      </parameter>\n      <parameter>\n        <name>pathname</name>\n        <value>conf/tomcat-users.xml</value>\n      </parameter>\n    </ResourceParams>\n  </GlobalNamingResources>\n\nThe Corresponding section in web.xml is as below:\n\n <resource-ref>\n             <res-ref-name>jdbc/Questions</res-ref-name>\n              <res-type>javax.sql.DataSource</res-type>\n\t\t\t  <res-auth>Container</res-auth>\n</resource-ref>\n\nThe same web application works fine in Weblogic server 6.1"}, {"count": 1, "tags": [], "text": "You also need a resource link definition in your server.xml. Otherwise, your\nlookup is picking up the blank resource ref.", "is_private": false, "id": 25748, "creator": "remm@apache.org", "time": "2002-11-06T07:57:11Z", "bug_id": 14275, "creation_time": "2002-11-06T07:57:11Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 14275, "attachment_id": null, "is_private": false, "id": 25796, "time": "2002-11-06T17:02:27Z", "creator": "pkrishna@learnframe.com", "creation_time": "2002-11-06T17:02:27Z", "text": "I looked at a documentation, it said add an entry like the one below:\n\n<ResourceLink name=\"linkToGlobalResource\"\n            global=\"simpleValue\"\n            type=\"java.lang.Integer\"/>\n\nShould this element be part of <GlobalNamingResources>?  Could you show me or \npoint me to an example of how I would incorporate this in the server.xml\n  \n\n"}, {"count": 3, "tags": [], "bug_id": 14275, "attachment_id": null, "id": 25807, "time": "2002-11-06T18:51:17Z", "creator": "pkrishna@learnframe.com", "creation_time": "2002-11-06T18:51:17Z", "is_private": false, "text": "On further examining the problem, I found the driverClassName is not \ninitialized in method createDataSource() in the class BasicDataSource. I do a \nJNDI lookup of jdbc\\Questions in the context java:comp/env. While the call \nsucceeds, the DriverName is not initialized when the DataSource is returned on \nthe JNDI lookup call."}, {"count": 4, "tags": [], "text": "No, this should be part of the Context element.", "attachment_id": null, "bug_id": 14275, "id": 25808, "time": "2002-11-06T18:59:29Z", "creator": "remm@apache.org", "creation_time": "2002-11-06T18:59:29Z", "is_private": false}, {"count": 5, "tags": [], "text": "I am seeing the same problem in bug 14261. Adding the link does not resolve the \nproblem ", "is_private": false, "id": 25812, "creator": "mmangino@acm.org", "time": "2002-11-06T19:48:47Z", "bug_id": 14275, "creation_time": "2002-11-06T19:48:47Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "Ah, yes, this is a duplicate.\n\n*** This bug has been marked as a duplicate of 14261 ***", "attachment_id": null, "bug_id": 14275, "id": 25813, "time": "2002-11-06T19:53:57Z", "creator": "remm@apache.org", "creation_time": "2002-11-06T19:53:57Z", "is_private": false}]