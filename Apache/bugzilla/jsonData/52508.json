[{"count": 0, "tags": [], "bug_id": 52508, "attachment_id": null, "text": "Hello,\nXSD Schema assertion is a very interesting feature.\nThe problem is that it fails with special characters in the XML response to test, saying \"fatal: line=1 col=1 Content is not allowed in prolog.\". My XML sample is below.\nInside jakarta-jmeter-2.5.1:org.apache.jmeter.assertions.XMLSchemaAssertion.getResult(SampleResult response) I can see: \"// TODO - charset?\".\nDo you think the charset management could be improved in a future release?\nThank you.\nLionel\n\nXML sample producing the error:\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<response>\n[...]\n<longDescription>\nDiff\u00e9rents caract\u00e8res du monde entier :\n- latins modifi\u00e9s\nVoyelles\n\u0103 \u01ce \u00e3 \u0101 \u0105 \u1eb5 a \u00e6 \u00e5 \u01fb a\u0324\u0310 \u0115 \u011b \u1ebd \u0113 \u0117 \u0119 \u1e17 \u01dd\n\u01dd\u0304 \u012d \u01d0 \u0129 \u012b \u012f \u1e2d \u014f \u01d2 \u00f5 \u014d \u01eb \u1e4f \u016d \u01d4 \u0169 \u016b \u0173 u\u032f \u016f \u1ef9 y\u02de\nConsonnes\nb\u02b1 \u010d \u0107 \u00e7 \u1e0d \u00f0 \u01f5 \u0123 \u0127 \u1e25 \u1e2b \u0195 \u01f0 \u1e31 \u1e35 \u0137 l\u0325 \u013c \u1e47 \u0144 \u1e45\n\u0146 \u0148 \u00f1 \u014b \u0142 \u1e41 m\u0325 n\u0325 p\u02c0 r\u0325 \u0159 \u0155 \u1e59 \u1e63 \u0161 \u015b \u1e6d \u00fe \u1e8b \u017a \u017c \u017e\n\n-\n</longDescription>\n[...]\n</response>", "id": 153066, "time": "2012-01-23T17:32:13Z", "creator": "letsjunk@gmail.com", "creation_time": "2012-01-23T17:32:13Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "sebb@apache.org", "is_private": false, "id": 153067, "time": "2012-01-23T17:41:25Z", "bug_id": 52508, "creation_time": "2012-01-23T17:41:25Z", "tags": [], "text": "Can you attach the sample as a file please?"}, {"count": 2, "tags": [], "bug_id": 52508, "is_private": false, "text": "While trying to provide you a servlet sample reproducing the bug, I realized that it occured only when getting data from my DB (the same data pasted into a string was alright with the XSD assertion).\nI'm affraid I'll have to figure this out myself...\nSorry for disturbing...\nIf you have any idea thought...", "id": 153111, "time": "2012-01-24T16:55:54Z", "creator": "letsjunk@gmail.com", "creation_time": "2012-01-24T16:55:54Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "sebb@apache.org", "is_private": false, "id": 153113, "time": "2012-01-24T17:05:09Z", "bug_id": 52508, "creation_time": "2012-01-24T17:05:09Z", "tags": [], "text": "If you are using e.g. the JDBC sampler to get the data, try adding a Save Responses to File Listener; this should save the exact contents of the sample as would be seen by the Assertion.\n\nIf this shows a bug / missing feature in another sampler please open a new issue and attach the test script, sample, and jmeter log file."}, {"count": 4, "tags": [], "bug_id": 52508, "is_private": false, "text": "Can you attach your XSD file ? and simplified Test Plan ?", "id": 153118, "time": "2012-01-24T18:23:38Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-01-24T18:23:38Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 52508, "is_private": false, "text": "Basically it's a servlet returning XML filled with information got from DB. In the JMeter test plan, the XSD schema assertion inside the HTTP Request fails only if the data from DB has special characters:\n\n\"- latins modifi\u00e9sVoyelles\u0103 \u01ce \u00e3 \u0101 \u0105 \u1eb5 a \u00e6 \u00e5 \u01fb a\u0324\u0310 \u0115 \u011b \u1ebd \u0113 \u0117 \u0119 \u1e17 \u01dd\u01dd\u0304 \u012d \u01d0 \u0129 \u012b \u012f \u1e2d \u014f \u01d2 \u00f5 \u014d \u01eb \u1e4f \u016d \u01d4 \u0169  \u0173 u\u032f \u016f \u1ef9 y\u02de\"\n\n...is alright with XSD schema assertion.\n\nBut:\n\"- latins modifi\u00e9sVoyelles\u0103 \u01ce \u00e3 \u0101 \u0105 \u1eb5 a \u00e6 \u00e5 \u01fb a\u0324\u0310 \u0115 \u011b \u1ebd \u0113 \u0117 \u0119 \u1e17 \u01dd\u01dd\u0304 \u012d \u01d0 \u0129 \u012b \u012f \u1e2d \u014f \u01d2 \u00f5 \u014d \u01eb \u1e4f \u016d \u01d4 \u0169  \u0173 u\u032f \u016f \u1ef9 y\u02deConsonnesb\u02b1 \u010d \u0107 \u00e7 \u1e0d \u00f0 \u01f5 \u0123 \u0127 \u1e25 \u1e2b \u0195 \u01f0 \u1e31 \u1e35 \u0137 l\u0325 \u013c \u1e47 \u0144 \u1e45\u0146 \u0148 \u00f1 \u014b \u0142 \u1e41 n\u0325 p\u02c0 r\u0325 \u0159 \u0155 \u1e59 \u1e63 \u0161 \u015b \u1e6d \u00fe \u1e8b \u017a \u017c \u017e- japonaishiragana:\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3000\u304c\u304e\u3050\u3052\u3054\tkatakana:\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u3000\u30ac\u30ae\u30b0\u30b2\u30b4- h\u00e9breu\u0e27\u0e34\u0e01\u0e34\u0e1e\u0e35\u0e40\u0e14\u0e35\u0e22\u0e2a\u0e32\u0e23\u0e32\u0e19\u0e38\u0e01\u0e23\u0e21\u0e40\u0e2a\u0e23\u0e35- tib\u00e9tain\u0f10\u0f00\u0f0b\u0f58\u0f0b\u0f4e\u0f72\u0f0b\t- cor\u00e9en\ud55c\uad6d\uc5b4\u1112\u1161\u11ab\u1100\u116e\u11a8\u110b\u1165- chinois\u5c11\u5c0f\u96e2\u5bb6\u8001\u5927\u56de\u3001\u9109\u97f3\u7121\u6539\u9b22\u6bdb\u6467\u3002\"\n\n...is not alright with XSD schema assertion.\nIf I have enough time, I'll try to get you interesting JMeter/Servlet related to this.", "id": 153135, "time": "2012-01-25T09:04:49Z", "creator": "letsjunk@gmail.com", "creation_time": "2012-01-25T09:04:49Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 52508, "text": "Hello,\nCan you check with nightly build, issue 52508 that was fixed yesterday seems to be a duplicate of this one.\nI tested with the characters you gave and nightly build works.\n\nRegards\nPhilippe", "id": 153164, "time": "2012-01-25T22:05:11Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-01-25T22:05:11Z", "is_private": false, "attachment_id": null}]