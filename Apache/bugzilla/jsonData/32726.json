[{"count": 0, "attachment_id": null, "bug_id": 32726, "is_private": false, "id": 68603, "time": "2004-12-16T02:28:59Z", "creator": "david.logan@hp.com", "creation_time": "2004-12-16T02:28:59Z", "tags": [], "text": "Hi,\n\nSetEnv seems to work when it is in the main config (see example below for\nvariables LCS_DB and LCS_HOSTNAME). This is output from my CGI perl script using \n\nforeach $key (keys %ENV) {\n        cluck \"$key --> $ENV{$key}<br>\";\n}\n\nI use cluck to put the Environment out to the error_log.\n\nWhen the variables are placed in the main configuration ie. Not in a Directory\ndirective, they are passed through as below.\n\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: HTTP_ACCEPT -->\ntext/xml,application/xml,application/xhtml+xml,text/html;q=0.9,t\next/plain;q=0.8,image/png,*/*;q=0.5<br> at list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: SCRIPT_FILENAME -->\n/u2/lcscreative/cgi/list_contacts.pl<br> at list_contacts.pl\n line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: LCS_DB --> lcscreative<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: SERVER_SOFTWARE --> Apache/2.0.50\n(Unix) mod_perl/1.99_09 Perl/v5.8.0 PHP/4.3.3\nDAV/2<br> at list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: HTTP_ACCEPT_CHARSET -->\nISO-8859-1,utf-8;q=0.7,*;q=0.7<br> at list_contacts.pl l\nine 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: TZ --> Australia/South<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: QUERY_STRING --> alphabet=A<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: REMOTE_PORT --> 8645<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: HTTP_USER_AGENT --> Mozilla/5.0\n(Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Ge\ncko/20041107 Firefox/1.0<br> at list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: SERVER_PORT --> 80<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: SERVER_SIGNATURE -->\n<address>Apache/2.0.50 (Unix) mod_perl/1.99_09 Perl/v5.8.0\nPHP/4.3.3 DAV/2 Server at edgewing.homeunix.net Port 80</address>\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: <br> at list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: HTTP_ACCEPT_LANGUAGE -->\nen-us,en;q=0.5<br> at list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: HTTP_COOKIE -->\nsessionid=CRmJKeZSTeDclqlfVxU<br> at list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: REMOTE_ADDR --> 161.114.228.150<br>\nat list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: LCS_HOST --> porkchop<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: HTTP_KEEP_ALIVE --> 300<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: SERVER_PROTOCOL --> HTTP/1.0<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: PATH -->\n/usr/local/samba/bin:/opt/sfw/bin:/usr/local/mysql/bin:/usr/local/sbin:\n/usr/local/sbin/:/usr/local/bin:/usr/bin:<br> at list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: REQUEST_URI -->\n/intscripts/list_contacts.pl?alphabet=A<br> at list_contacts.pl\nline 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: GATEWAY_INTERFACE --> CGI/1.1<br>\nat list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: SERVER_ADDR --> 192.168.0.6<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: DOCUMENT_ROOT --> /u2/www<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: HTTP_VIA --> 1.1 AU-GEMINI-01<br>\nat list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: HTTP_HOST -->\nedgewing.homeunix.net<br> at list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] list_contacts.pl: UNIQUE_ID -->\nBWdjIsCoAAYAABHQFCgAAAAA<br> at list_contacts.pl line 84\n[Thu Dec 16 11:19:06 2004] [error] Optional hook test said: GET\n/intscripts/list_contacts.pl?alphabet=A HTTP/1.0\n[Thu Dec 16 11:19:06 2004] [error] Optional function test said: GET\n/intscripts/list_contacts.pl?alphabet=A HTTP/1.0\n\n\nWhen they are placed in a directory directive (see below) :\n\n ScriptAlias /intscripts/ \"/u2/lcscreative/cgi/\"\n\n    Alias /internal \"/u2/lcscreative/html/\"\n\n    <Directory \"/u2/lcscreative/html/\">\n\n        Options Indexes FollowSymlinks MultiViews\n\n        AuthType     Basic\n        AuthName     \"lcscreative\"\n        AuthUserFile /u2/lcscreative/conf/userpass\n        Require      valid-user\n\n        Order allow,deny\n        Allow from all\n\n        SetEnv LCS_DB \"lcscreative\"\n        SetEnv LCS_HOST \"porkchop\"\n\n    </Directory>\n\nThe 2 variables that I have set are not passed through, output from error_log\nshown below :\n\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: SCRIPT_NAME -->\n/intscripts/list_contacts.pl<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: SERVER_NAME -->\nedgewing.homeunix.net<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_REFERER -->\nhttp://edgewing.homeunix.net/internal/menu.html<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: SERVER_ADMIN -->\nedgewing@bigpond.net.au<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_ACCEPT_ENCODING -->\ngzip,deflate<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_CONNECTION --> Keep-Alive<br>\nat list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: REQUEST_METHOD --> GET<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_ACCEPT -->\ntext/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5<br>\nat list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: SCRIPT_FILENAME -->\n/u2/lcscreative/cgi/list_contacts.pl<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: SERVER_SOFTWARE --> Apache/2.0.50\n(Unix) mod_perl/1.99_09 Perl/v5.8.0 PHP/4.3.3 DAV/2<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_ACCEPT_CHARSET -->\nISO-8859-1,utf-8;q=0.7,*;q=0.7<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: TZ --> Australia/South<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: QUERY_STRING --> alphabet=A<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: REMOTE_PORT --> 38067<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_USER_AGENT --> Mozilla/5.0\n(Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: SERVER_PORT --> 80<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: SERVER_SIGNATURE -->\n<address>Apache/2.0.50 (Unix) mod_perl/1.99_09 Perl/v5.8.0 PHP/4.3.3 DAV/2\nServer at edgewing.homeunix.net Port 80</address>\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: <br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_ACCEPT_LANGUAGE -->\nen-us,en;q=0.5<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_COOKIE -->\nsessionid=CRmJKeZSTeDclqlfVxU<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: REMOTE_ADDR --> 161.114.228.150<br>\nat list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_KEEP_ALIVE --> 300<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: SERVER_PROTOCOL --> HTTP/1.0<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: PATH -->\n/usr/local/samba/bin:/opt/sfw/bin:/usr/local/mysql/bin:/usr/local/sbin:/usr/local/sbin/:/usr/local/bin:/usr/bin:<br>\nat list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: REQUEST_URI -->\n/intscripts/list_contacts.pl?alphabet=A<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: GATEWAY_INTERFACE --> CGI/1.1<br>\nat list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: SERVER_ADDR --> 192.168.0.6<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: DOCUMENT_ROOT --> /u2/www<br> at\nlist_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_VIA --> 1.1 AU-GEMINI-01<br>\nat list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: HTTP_HOST -->\nedgewing.homeunix.net<br> at list_contacts.pl line 84\n[Thu Dec 16 11:35:47 2004] list_contacts.pl: UNIQUE_ID -->\nQRDkmcCoAAYAABIXiSUAAAAF<br> at list_contacts.pl line 84\n\nMy platform is Sun UltraSPARC 30 and OS is Solaris 8\n\nporkribs /u2/lcscreative/cgi $ uname -a\nSunOS porkribs 5.8 Generic_108528-27 sun4u sparc SUNW,Ultra-30\n\nApache version is 2.0.50 - httpd -l =\n\nporkribs /u2/lcscreative/cgi $ /usr/local/apache2/bin/httpd -l\nCompiled in modules:\n  core.c\n  mod_access.c\n  mod_auth.c\n  mod_auth_dbm.c\n  mod_file_cache.c\n  mod_echo.c\n  mod_charset_lite.c\n  mod_cache.c\n  mod_disk_cache.c\n  mod_mem_cache.c\n  mod_ext_filter.c\n  mod_include.c\n  mod_deflate.c\n  mod_log_config.c\n  mod_logio.c\n  mod_env.c\n  mod_mime_magic.c\n  mod_expires.c\n  mod_headers.c\n  mod_usertrack.c\n  mod_unique_id.c\n  mod_setenvif.c\n  mod_proxy.c\n  proxy_connect.c\n  proxy_ftp.c\n  proxy_http.c\n  mod_optional_hook_export.c\n  mod_optional_hook_import.c\n  mod_optional_fn_import.c\n  mod_optional_fn_export.c\n  mod_bucketeer.c\n  prefork.c\n  http_core.c\n  mod_mime.c\n  mod_dav.c\n  mod_status.c\n  mod_autoindex.c\n  mod_asis.c\n  mod_info.c\n  mod_cgi.c\n  mod_cgid.c\n  mod_dav_fs.c\n  mod_vhost_alias.c\n  mod_dir.c\n  mod_actions.c\n  mod_speling.c\n  mod_alias.c\n  mod_rewrite.c\n  mod_so.c\n\nporkribs /u2/lcscreative/cgi $ /usr/local/apache2/bin/httpd -V\nServer version: Apache/2.0.50\nServer built:   Sep  5 2004 21:51:13\nServer's Module Magic Number: 20020903:8\nArchitecture:   32-bit\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_PROC_PTHREAD_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D HTTPD_ROOT=\"/usr/local/apache2\"\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\nporkribs /u2/lcscreative/cgi $ /usr/local/apache2/bin/httpd -L | grep SetEnv\nSetEnv (mod_env.c)\nSetEnvIf (mod_setenvif.c)\nSetEnvIfNoCase (mod_setenvif.c)\n\nPlease let me know if you need any more information or if I have made an error\nin my usage.\n\nMany thanks"}, {"count": 1, "tags": [], "creator": "chip@force-elite.com", "is_private": false, "text": "Your SetEnv is inside the <Directory block for your HTML directory, not the CGI\ndirectory. -> Invalid.", "id": 75839, "time": "2005-06-03T00:26:50Z", "bug_id": 32726, "creation_time": "2005-06-03T00:26:50Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 32726, "text": "Many thanks for that Paul. I'll make the appropriate changes. Could this be made\nclearer in the doco perhaps as I have reread it and still wouldn't have made\nthis connection.\n\nThanks and regards", "id": 75845, "attachment_id": null, "creator": "david.logan@hp.com", "creation_time": "2005-06-03T00:35:46Z", "time": "2005-06-03T00:35:46Z", "is_private": false}]