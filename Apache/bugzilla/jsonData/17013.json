[{"attachment_id": null, "tags": [], "bug_id": 17013, "text": "Hello,\n\nFOP aborts with a NullPointerException when a table consisting of rows each \nhaving an id spans more than one page. The exception does not happen when the \ntable fits on one page or when the id is put on the first cell instead of the \nrow.\n\nexample fo file: \n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\">\n<fo:layout-master-set>\n<fo:simple-page-master margin-right=\"2.5cm\" margin-left=\"2.5cm\" margin-\nbottom=\"3cm\" margin-top=\"3cm\" page-width=\"21cm\" page-height=\"29.7cm\" master-\nname=\"my-master\">\n<fo:region-body margin-bottom=\"1.5cm\" margin-top=\"1.5cm\"/>\n<fo:region-before extent=\"1.5cm\"/>\n<fo:region-after extent=\"1.5cm\"/>\n</fo:simple-page-master>\n</fo:layout-master-set>\n\n<fo:page-sequence master-reference=\"my-master\">\n<fo:flow flow-name=\"xsl-region-body\">\n<fo:table table-layout=\"fixed\" font-size=\"24pt\">\n<fo:table-column column-width=\"16cm\"/>\n<fo:table-body>\n<fo:table-row id=\"1\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"2\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"3\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"4\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"5\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"6\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"7\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"8\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"9\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"10\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"11\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"12\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"13\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"14\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"15\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"16\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"17\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"18\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"19\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"20\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n<fo:table-row id=\"21\">\n<fo:table-cell border-style=\"solid\">\n<fo:block>1</fo:block>\n</fo:table-cell>\n</fo:table-row>\n</fo:table-body>\n</fo:table>\n</fo:flow>\n</fo:page-sequence>\n</fo:root>\n\nFOP output:\n\nfop -d -fo bug.fo bug.pdf\n[DEBUG] Input mode: \n[DEBUG] FO \n[DEBUG] fo input file: bug.fo\n[DEBUG] Output mode: \n[DEBUG] pdf\n[DEBUG] output file: bug.pdf\n[DEBUG] OPTIONS\n[DEBUG] no user configuration file is used [default]\n[DEBUG] debug mode on\n[DEBUG] dump configuration\n[DEBUG] quiet mode on\n[DEBUG] Using org.apache.xerces.parsers.SAXParser as SAX2 Parser\n[DEBUG] base directory: file:/d:/catalog/Rammax/\n[INFO] FOP 0.20.4\n[DEBUG] Using org.apache.xerces.parsers.SAXParser as SAX2 Parser\n[INFO] building formatting object tree\n[DEBUG] setting up fonts\n[INFO] [1]\n[INFO] [2]\n[ERROR] null\norg.apache.fop.apps.FOPException\n\tat org.apache.fop.apps.CommandLineStarter.run(Unknown Source)\n\tat org.apache.fop.apps.Fop.main(Unknown Source)\n\n---------\n\njava.lang.NullPointerException\n\tat org.apache.fop.datatypes.IDReferences.setPosition(Unknown Source)\n\tat org.apache.fop.datatypes.IDReferences.configureID(Unknown Source)\n\tat org.apache.fop.fo.flow.TableRow.layout(Unknown Source)\n\tat org.apache.fop.fo.flow.TableBody.layout(Unknown Source)\n\tat org.apache.fop.fo.flow.Table.layout(Unknown Source)\n\tat org.apache.fop.fo.flow.Flow.layout(Unknown Source)\n\tat org.apache.fop.fo.flow.Flow.layout(Unknown Source)\n\tat org.apache.fop.fo.pagination.PageSequence.format(Unknown Source)\n\tat org.apache.fop.apps.StreamRenderer.render(Unknown Source)\n\tat org.apache.fop.fo.FOTreeBuilder.endElement(Unknown Source)\n\tat org.apache.xerces.parsers.AbstractSAXParser.endElement\n(AbstractSAXParser.java:559)\n\tat org.apache.xerces.impl.XMLNamespaceBinder.handleEndElement\n(XMLNamespaceBinder.java:853)\n\tat org.apache.xerces.impl.XMLNamespaceBinder.endElement\n(XMLNamespaceBinder.java:643)\n\tat org.apache.xerces.impl.dtd.XMLDTDValidator.handleEndElement\n(XMLDTDValidator.java:2978)\n\tat org.apache.xerces.impl.dtd.XMLDTDValidator.endElement\n(XMLDTDValidator.java:918)\n\tat \norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.handleEndElement\n(XMLDocumentFragmentScannerImpl.java:1145)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement\n(XMLDocumentFragmentScannerImpl.java:988)\n\tat \norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.\ndispatch(XMLDocumentFragmentScannerImpl.java:1446)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument\n(XMLDocumentFragmentScannerImpl.java:333)\n\tat org.apache.xerces.parsers.StandardParserConfiguration.parse\n(StandardParserConfiguration.java:529)\n\tat org.apache.xerces.parsers.StandardParserConfiguration.parse\n(StandardParserConfiguration.java:585)\n\tat org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:147)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse\n(AbstractSAXParser.java:1148)\n\tat org.apache.fop.apps.Driver.render(Unknown Source)\n\tat org.apache.fop.apps.CommandLineStarter.run(Unknown Source)\n\tat org.apache.fop.apps.Fop.main(Unknown Source)\n\n\nwith best regards,\n\nFrank Herrmann", "count": 0, "id": 31159, "time": "2003-02-12T18:02:31Z", "creator": "fherrmann@idegmbh.de", "creation_time": "2003-02-12T18:02:31Z", "is_private": false}, {"count": 1, "tags": [], "creator": "j3322ptm@yahoo.de", "attachment_id": null, "id": 31165, "time": "2003-02-12T20:15:58Z", "bug_id": 17013, "creation_time": "2003-02-12T20:15:58Z", "is_private": false, "text": "This is a duplicate of some other report which I'm too lazy to look up.\nFixed in 0.20.5rc."}, {"attachment_id": null, "tags": [], "bug_id": 17013, "is_private": false, "count": 2, "id": 156002, "time": "2012-04-01T06:52:26Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:52:26Z", "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed"}]