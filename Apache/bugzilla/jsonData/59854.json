[{"count": 0, "tags": [], "bug_id": 59854, "attachment_id": null, "is_private": false, "id": 192357, "time": "2016-07-13T22:26:38Z", "creator": "sarathjohn@google.com", "creation_time": "2016-07-13T22:26:38Z", "text": "Hi,\n\nWe are on Apache 2.4.10 on Ubuntu Machine and with ModSecurity Enabled.\nWe are using apache to proxy pass our request to backend server. But \n We are getting Segmentation Error. Could you please check what is the issue here ?\n\n AH00052: child pid 26861 exit signal Segmentation fault (11)\n[Wed Jul 13 18:02:57.120992 2016] [core:notice] [pid 26794:tid 139648044341120] AH00052: child pid 26890 exit signal Segmentation fault (11)"}, {"count": 1, "attachment_id": null, "creator": "covener@gmail.com", "is_private": false, "id": 192358, "time": "2016-07-13T22:27:33Z", "bug_id": 59854, "creation_time": "2016-07-13T22:27:33Z", "tags": [], "text": "https://httpd.apache.org/dev/debugging.html"}, {"count": 2, "tags": [], "bug_id": 59854, "attachment_id": null, "text": "gdb /usr/sbin/apache2 /var/cache/apache2/core\nGNU gdb (GDB) 7.9-gg19\nCopyright (C) 2015 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-grtev4-linux-gnu\".\nType \"show configuration\" for configuration details.\n\n<http://go/gdb-home FAQ: http://go/gdb-faq Email: c-toolchain-team IRC: gdb>\nFind the GDB manual and other documentation resources online at:\n<http://www.gnu.org/software/gdb/documentation/>.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\".\nReading symbols from /usr/sbin/apache2...Reading symbols from /usr/lib/debug//usr/sbin/apache2...done.\nUnable to determine compiler version.\nSkipping loading of libstdc++ pretty-printers for now.\ndone.\nNon-google3 binary detected.\n[New LWP 2323]\n[New LWP 2293]\n[New LWP 2334]\n[New LWP 2330]\n[New LWP 2335]\n[New LWP 2336]\n[New LWP 2337]\n[New LWP 2351]\n[New LWP 2329]\n[New LWP 2338]\n[New LWP 2328]\n[New LWP 2349]\n[New LWP 2339]\n[New LWP 2327]\n[New LWP 2350]\n[New LWP 2340]\n[New LWP 2326]\n[New LWP 2331]\n[New LWP 2347]\n[New LWP 2325]\n[New LWP 2348]\n[New LWP 2332]\n[New LWP 2324]\n[New LWP 2352]\n[New LWP 2333]\n[New LWP 2354]\n[New LWP 2353]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/grte/v4/lib64/libthread_db.so.1\".\nCore was generated by `/usr/sbin/apache2 -k start'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  0x00007fdc58fac080 in ?? () from /usr/lib/apache2/modules/mod_ssl.so\n(gdb)", "id": 192362, "time": "2016-07-13T22:41:53Z", "creator": "sarathjohn@google.com", "creation_time": "2016-07-13T22:41:53Z", "is_private": false}, {"count": 3, "tags": [], "text": "Is that all that gdb gives you? If you issue a `backtrace` command at the gdb prompt, does it give you more than one line?\n\nAlso, installing the apache2-dbg package may help resolve the \"??\" lines in the backtrace output.", "is_private": false, "id": 192363, "creator": "jchampion@apache.org", "time": "2016-07-13T22:58:17Z", "bug_id": 59854, "creation_time": "2016-07-13T22:58:17Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 59854, "attachment_id": null, "is_private": false, "id": 192366, "time": "2016-07-13T23:20:44Z", "creator": "sarathjohn@google.com", "creation_time": "2016-07-13T23:20:44Z", "text": "(gdb) backtrace\n#0  0x00007fdc58fac080 in ?? () from /usr/lib/apache2/modules/mod_ssl.so\n#1  0x00007fdc5b87a826 in ?? () from /lib/x86_64-linux-gnu/libcrypto.so.1.0.0\n#2  0x00007fdc5b91bf51 in ?? () from /lib/x86_64-linux-gnu/libcrypto.so.1.0.0\n#3  0x00007fdc5b91ff1a in ?? () from /lib/x86_64-linux-gnu/libcrypto.so.1.0.0\n#4  0x00007fdc5b9200f5 in ASN1_item_free () from /lib/x86_64-linux-gnu/libcrypto.so.1.0.0\n#5  0x00007fdc5bc0a19d in ExtractKey(request_rec const*, com::google::security::corplogin::rp::CertChain const&, apr_pool_t*, evp_pkey_st**) ()\n   from /usr/lib/apache2/modules/mod_google_sso.so\n#6  0x00007fdc5bc09f0b in LoadKeys(request_rec const*, mode_v2_keys*) () from /usr/lib/apache2/modules/mod_google_sso.so\n#7  0x00007fdc5bc09b49 in CheckKeys(request_rec const*) () from /usr/lib/apache2/modules/mod_google_sso.so\n#8  0x00007fdc5bc0b08b in VerifySigKeys(request_rec*, char const*, int, char const*, char const*) () from /usr/lib/apache2/modules/mod_google_sso.so\n#9  0x00007fdc5bc0bdca in ParseAndVerifyProtoTicket(request_rec*, char const*, login_ticket*) () from /usr/lib/apache2/modules/mod_google_sso.so\n#10 0x00007fdc5bc0bf57 in ParseTicket(request_rec*, char const*, login_ticket*) () from /usr/lib/apache2/modules/mod_google_sso.so\n#11 0x00007fdc5bc0e5d1 in GssoUser(request_rec*) () from /usr/lib/apache2/modules/mod_google_sso.so\n#12 0x00007fdc5f1d28e0 in ap_run_check_user_id (r=0x7fdc58c470a0) at request.c:80\n#13 0x00007fdc5f1d5cc7 in ap_process_request_internal (r=r@entry=0x7fdc58c470a0) at request.c:244\n#14 0x00007fdc5f1f20b8 in ap_process_async_request (r=0x7fdc58c470a0) at http_request.c:315\n#15 0x00007fdc5f1eef10 in ap_process_http_async_connection (c=0x7fdc58c4e330) at http_core.c:143\n#16 ap_process_http_connection (c=0x7fdc58c4e330) at http_core.c:228\n#17 0x00007fdc5f1e5bf0 in ap_run_process_connection (c=0x7fdc58c4e330) at connection.c:41\n#18 0x00007fdc5a68ab07 in process_socket (my_thread_num=0, my_child_num=<optimized out>, cs=0x7fdc58c4e2a8, sock=<optimized out>, p=<optimized out>, thd=<optimized out>) at event.c:1035\n#19 worker_thread (thd=<optimized out>, dummy=<optimized out>) at event.c:1875\n#20 0x00007fdc5e6b4184 in start_thread () from /lib/x86_64-linux-gnu/libpthread.so.0\n#21 0x00007fdc5e3e137d in clone () from /lib/x86_64-linux-gnu/libc.so.6"}, {"count": 5, "tags": [], "bug_id": 59854, "attachment_id": null, "is_private": false, "id": 192367, "time": "2016-07-13T23:26:18Z", "creator": "sarathjohn@google.com", "creation_time": "2016-07-13T23:26:18Z", "text": "apache2-dbg is already there\n\nsudo apt-get install apache2-dbg\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\napache2-dbg is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded."}, {"count": 6, "tags": [], "text": "apache2-dbg is already there\n\nsudo apt-get install apache2-dbg\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\napache2-dbg is already the newest version.\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.", "is_private": false, "id": 192368, "creator": "sarathjohn@google.com", "time": "2016-07-14T00:16:04Z", "bug_id": 59854, "creation_time": "2016-07-14T00:16:04Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 59854, "text": "Thanks for the stack trace.\n\nIt looks like the crash is within a third-party module called mod_google_sso, which we don't maintain. That doesn't necessarily mean that the crash is that module's fault, but you'll need to consult with its authors for further investigation and analysis. We can't really help much with third-party code.", "id": 192384, "time": "2016-07-14T18:09:18Z", "creator": "jchampion@apache.org", "creation_time": "2016-07-14T18:09:18Z", "is_private": false, "attachment_id": null}]