[{"count": 0, "tags": [], "text": "The sample listener (provided with servlet-examples and jsp-examples) are not \nnotified on shutdown if TC has been started via proc runner. Starting and \nstopping via startup.bat and shutdown.bat works as expected.", "is_private": false, "bug_id": 21279, "id": 39860, "time": "2003-07-02T15:08:18Z", "creator": "marc.lehmann@infineon.com", "creation_time": "2003-07-02T15:08:18Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 21279, "attachment_id": null, "text": "Ok, I can reproduce that. I find it odd that the shutdown hook of the VM isn't\ngetting invoked. Maybe the process is abruptly killed at some point.\n\nThere are alternative ways to start Tomcat if you need a workaround for now\n(including the Java launcher from the Commons, and the plain old .bat scripts).\nI hope you like the new .exe wrapper (assuming the bugs are fixed, of course).", "id": 39867, "time": "2003-07-02T15:23:51Z", "creator": "remm@apache.org", "creation_time": "2003-07-02T15:23:51Z", "is_private": false}, {"count": 2, "tags": [], "creator": "marc.lehmann@infineon.com", "attachment_id": null, "id": 39868, "time": "2003-07-02T15:38:13Z", "bug_id": 21279, "creation_time": "2003-07-02T15:38:13Z", "is_private": false, "text": "Proc runner now comes with the Java Option -Xrs preconfigured (as of TC 5.0.3). \nHowever, leaving the option out doesn't make a difference.\n\nI do like the new .exe wrapper. It's a very handy tool. "}, {"count": 3, "tags": [], "creator": "marc.lehmann@infineon.com", "attachment_id": null, "id": 39917, "time": "2003-07-03T10:12:34Z", "bug_id": 21279, "creation_time": "2003-07-03T10:12:34Z", "is_private": false, "text": "Some more observation - hope it helps to pin down the problem:\nIf I start TC via proc runner and stop TC via shutdown.bat the method \ncontextDestroyed() is properly called.\n\nWindows Task-Manager:\nStopping TC via proc runner gives a peak CPU utilization of approx. 6%, the \nextra CPU utilization lasts for approx. 5 seconds.\nStopping TC via shutdown.bat gives a peak CPU utilization of 100%, the extra \nCPU utilization lasts from 15 to 35 seconds."}, {"text": "I have added some logging to org.apache.catalina.startup.Bootstrap: main() is \nnever reached on shutdown via procrun. Looks like procrun just kills the JVM. \nWhat strikes me here is that no shutdown hook gets activated. If I shutdown TC \nvia telnet (port 8005) SessionListener and ContextListener are properly \nnotified. I have no tools available to actually look what procrun does on \nshutdown. Any help is much appreciated.", "tags": [], "bug_id": 21279, "attachment_id": null, "count": 4, "id": 41967, "time": "2003-08-01T16:50:52Z", "creator": "marc.lehmann@infineon.com", "creation_time": "2003-08-01T16:50:52Z", "is_private": false}, {"count": 5, "attachment_id": null, "creator": "william.barker@wilshire.com", "is_private": false, "id": 42447, "time": "2003-08-09T02:35:36Z", "bug_id": 21279, "creation_time": "2003-08-09T02:35:36Z", "tags": [], "text": "Fixed now in the CVS, and should appear in 5.0.7."}]