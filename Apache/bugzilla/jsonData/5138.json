[{"count": 0, "tags": [], "creator": "stevec@ignitesports.com", "attachment_id": null, "is_private": false, "id": 8342, "time": "2001-11-27T10:33:18Z", "bug_id": 5138, "creation_time": "2001-11-27T10:33:18Z", "text": "The following tasks are defined in build.xml:\n\n<target name=\"checkouttest\">\n   <antcall target=\"checkout\">\n      <param name=\"projectroot\" value=\"/temp/golfserv/v2.0\"/>\n      <param name=\"ST.proj\" value = \"GolfServ\" />\n      <param name=\"ST.view\" value = \"Version 2.0\" />\n      <param name=\"ST.folder\" value = \"golfserv\" />\n\t\t\t\n   </antcall>\n</target>\n\t\n<target name=\"checkout\">\n   <mkdir dir=\"${projectroot}\"/>\n   <starteam servername=\"${ST.server}\" \n             serverport=\"${ST.port}\"\n             projectname=\"${ST.proj}\" \n             viewname=\"${ST.view}\"\n             foldername=\"${ST.folder}\"\n             username=\"${ST.username}\"\n             password=\"{ST.password}\"\n             targetfolder=\"${projectroot}\"\n             force=\"true\"\n             verbose=\"true\"\n   />\n</target>\n\nwhere \nGolfServ is a root-level project on the server\nVersion 2.0 is a view in this project\ngolfserv is the name of a folder at the root of this view.ST.server is a\nproperty defined with the correct name of the server\nST.port is a property defined with the correct port number to access this server\nST.username is a property containing a valid username on the server\nST.password is a property containing ST.username's password\n\nThe following output is produced when this task is executed in verbose mode\n(i.e. ant -verbose checkouttest):\n\ncheckouttest:\nProject base dir set to: E:\\_home\\dev\\buildmeister\\dev\nparsing buildfile E:\\_home\\dev\\buildmeister\\dev\\build.xml with URI =\nfile:E:/_home/dev/buildmeister/dev/build.xml\nOverride ignored for user property basedir\nProject base dir set to: E:\\_home\\dev\\buildmeister\\dev\nOverride ignored for root\nOverride ignored for pf\nLoading E:\\_home\\dev\\buildmeister\\dev\\Appw01.properties\nOverride ignored for java.path\nOverride ignored for bin.drive\nOverride ignored for bin.drive\nOverride ignored for java.path\nOverride ignored for debugging\nOverride ignored for ST.server\nOverride ignored for ST.port\nBuild sequence for target `checkout' is [checkout]\nComplete build sequence is [checkout, clean, main, buildproj, all, checkouttest]\n\ncheckout:\nCreated dir: E:\\temp\\golfserv\\v2.0\nFound GolfServ\\\nFound GolfServ\\Version 2.0\\\nFound GolfServ\\Version 2.0\\golfserv\\\n\n    null\n\nBUILD SUCCESSFUL\n\n\nThis indicates to me that\n1) ant successfully logs onto the starteam server\n2) the project, view and folder names are all valid\n3) something is throwing a null pointer exception which is being caught at line\n359 of AntStarTeamCheckOut.java\n4) the exception is then ignored except for printing null and returns a\n\"success\" value to the caller."}, {"count": 1, "tags": [], "bug_id": 5138, "attachment_id": null, "is_private": false, "id": 8356, "time": "2001-11-27T14:19:48Z", "creator": "stevec@ignitesports.com", "creation_time": "2001-11-27T14:19:48Z", "text": "Ah the beauty of open source.  A few judicious System.out.printlns and stack\ntraces revealed the nature of the problem.  In my example \"golfserv\" is the root\nfolder of the Version 2.0 view.  The task was then looking for a golfserv\nsubdirectory of that.  No such path existed, hence the null.\n\nHowever, the task should still be rewritten with an informative error message if\nthe user does this.  This error handling is very poor.  This type of user error\nwill not be that uncommon, especially with StarTeam's ability to create views\nrooted at different folders.  Something like\n/Golfserv/Version2.0/golfserv/golfserv does not exist.\" would be appropriate.\n\nAlso, the documentation should be amplified to explain how the root folder\nshould be indicated in the task parameters."}, {"count": 2, "tags": [], "bug_id": 5138, "attachment_id": null, "id": 8481, "time": "2001-11-30T16:57:45Z", "creator": "sbailliez@apache.org", "creation_time": "2001-11-30T16:57:45Z", "is_private": false, "text": "Would you mind sending a patch for the code and the documentation ?\n(Use of cvs diff -u would be great)\n\nThe problem we have about COT related tasks is that committers do not \nnecessarily have the product in their hands to test the tasks or even \nunderstand the concepts behind it. So once the tasks are submitted and accepted \nit is extremely difficult to make changes blindly when you have no way to \nfigure out what you really did but probably wait for the next release.\n\n"}, {"count": 3, "tags": [], "bug_id": 5138, "attachment_id": null, "is_private": false, "id": 8540, "time": "2001-12-03T13:17:52Z", "creator": "stevec@ignitesports.com", "creation_time": "2001-12-03T13:17:52Z", "text": "I will be happy to do this but first I have a question.\nIs there an \"approved style\" of error message formatting in Ant when throwing\nexceptions?  My message above would be better than what is there now, but if\nthere's a \"right\" way, I might as well do it that way. \n\nAlso, the more I look at it, I think the real root cause of my example is\nprobably the same as bug 5187, which was also logged by me.  That is not to say\nthat this should not be fixed independently, since the error handling is bad anyway.\n\nAlso, what's COT?\nAlso, I assume I should make the fix against the latest sources.  If that is\nwrong, please tell me.  I've not participated here before."}, {"text": "See proposed fix attachments for bug 5187 which will fix this bug.", "tags": [], "bug_id": 5138, "is_private": false, "count": 4, "id": 8622, "time": "2001-12-05T12:44:47Z", "creator": "stevec@ignitesports.com", "creation_time": "2001-12-05T12:44:47Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "sbailliez@apache.org", "attachment_id": null, "id": 8626, "time": "2001-12-05T13:28:07Z", "bug_id": 5138, "creation_time": "2001-12-05T13:28:07Z", "is_private": false, "text": "Sorry about not replying to you I did not follow closely the mailing list these \nlast days.\n\nI will try to commit this ASAP so that you can check out the source and build \nthem (You can't rely on the nightly build since we don't have the interface to \nbuild them). It should of course be against CVS HEAD but that should not be too \nproblematic here since I doubt very much about the code being volatile for \nthese tasks :-)\n\nAbout COT I forgot the S it's COTS. :-)\nCommercial-Off-The-Shelf aka Third Party but I wanted to underline \nthe \"commercial\".\n\n"}, {"count": 6, "tags": [], "bug_id": 5138, "attachment_id": null, "text": "Fixed in CVS.\nThanks a lot for the patch and for helping in the refactoring.", "id": 8707, "time": "2001-12-07T14:15:52Z", "creator": "sbailliez@apache.org", "creation_time": "2001-12-07T14:15:52Z", "is_private": false}]