[{"count": 0, "tags": [], "bug_id": 37224, "attachment_id": null, "text": "A NullPointerExceptin is thrown after a session timeout occurs:\n\nCaused by: java.lang.NullPointerException\n        at org.mortbay.http.HttpRequest.isConfidential(HttpRequest.java:431)\n        at\norg.mortbay.jetty.servlet.ServletHttpRequest.isSecure(ServletHttpRequest.java:260)\n        at\norg.mortbay.jetty.servlet.ServletHttpRequest.getSession(ServletHttpRequest.java:509)\n        at\norg.apache.cocoon.environment.http.HttpRequest.getSession(HttpRequest.java:230)\n        at\norg.apache.cocoon.environment.http.HttpRequest.getSession(HttpRequest.java:250)\n        at\norg.apache.lenya.cms.repository.RepositoryUtil.getSession(RepositoryUtil.java:29)\n        at\norg.apache.lenya.cms.ac.DocumentPolicyManagerWrapper.getPolicyURL(DocumentPolicyManagerWrapper.java:84)\n        ... 37 more\n\n(See the attachment for a full stacktrace)\n\nIt seems that the origin of the NPE lies in Jetty\n(org.mortbay.http.HttpRequest.isConfidential).", "id": 81643, "time": "2005-10-24T17:35:34Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-10-24T17:35:34Z", "is_private": false}, {"count": 1, "tags": [], "creator": "felix.roethenbacher@wyona.com", "attachment_id": 16791, "text": "Created attachment 16791\nFull stacktrace of exception.", "id": 81644, "time": "2005-10-24T17:37:04Z", "bug_id": 37224, "creation_time": "2005-10-24T17:37:04Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 37224, "attachment_id": null, "text": "The bug still exists despite the update to jetty 5.1.4.", "id": 81775, "time": "2005-10-26T16:25:12Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-10-26T16:25:12Z", "is_private": false}, {"count": 3, "text": "Created attachment 16852\nFull stacktrace on JBoss\n\nHere's the stacktrace from the same error on JBoss 4.0.3,which bundles Tomcat", "bug_id": 37224, "attachment_id": 16852, "id": 82037, "time": "2005-11-02T12:23:17Z", "creator": "manos_lists@geekologue.com", "creation_time": "2005-11-02T12:23:17Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "felix.roethenbacher@wyona.com", "attachment_id": null, "text": "It seems that we are fighting with the same problem as in bug 36494. Here is the\nanswer of Greg Wilkins <gregw at mortbay.com> to my question on the\njetty-discuss mailing list re this bug:\n\nGreg Wilkins wrote:\n> Felix,\n> \n> to tell you really what is happening I need to see the 37 more lines of\n> the stack trace.\n> \n> I suspect that somebody is holding onto a request object and calling methods\n> on it outside of the scope of a call to Servlet.service.   This is illegal and\n> will always cause problems.     \n> \n> Can you confirm if this exception is cause by an incoming request or does it\n> just happen when the session times out?\n> \n> cheers\n> \n> NB. I'll probably put NPE protection in, but would like to know why first....\n> \n> \n> Felix R\u00f6thenbacher wrote:\n> \n>>Hi\n>>\n>>What does the following stacktrace mean?\n>>\n>>Caused by: java.lang.NullPointerException\n>>        at\n>>org.mortbay.http.HttpRequest.isConfidential(HttpRequest.java:431)\n>>        at\n>>org.mortbay.jetty.servlet.ServletHttpRequest.isSecure(ServletHttpRequest.java:260)\n>>\n>>        at\n>>org.mortbay.jetty.servlet.ServletHttpRequest.getSession(ServletHttpRequest.java:509)\n>>\n>>        at\n>>org.apache.cocoon.environment.http.HttpRequest.getSession(HttpRequest.java:230)\n>>\n>>        at\n>>org.apache.cocoon.environment.http.HttpRequest.getSession(HttpRequest.java:250)\n>>\n>>        at\n>>org.apache.lenya.cms.repository.RepositoryUtil.getSession(RepositoryUtil.java:29)\n>>\n>>        at\n>>org.apache.lenya.cms.ac.DocumentPolicyManagerWrapper.getPolicyURL(DocumentPolicyManagerWrapper.java:84)\n>>\n>>        ... 37 more\n>>\n>>\n>>It seems that either the _connection object is null or that there is no\n>>listener object in\n>>\n>>\n>>    /* ------------------------------------------------------------ */\n>>    /**\n>>     * @return True if this request came over an integral channel such\n>>as SSL\n>>     */\n>>    public boolean isIntegral()\n>>    {\n>>        return _connection.getListener().isIntegral(_connection);\n>>    }\n>>\n>>\n>>The exception seems to be thrown after a session timeout only.\n>>\n>>Any help appreciated.\n>>\n>>- Felix\n>>\n> \n> \n\n*** This bug has been marked as a duplicate of 36494 ***", "id": 82085, "time": "2005-11-03T11:13:03Z", "bug_id": 37224, "creation_time": "2005-11-03T11:13:03Z", "is_private": false}]