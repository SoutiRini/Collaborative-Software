[{"count": 0, "tags": [], "bug_id": 25674, "text": "While trying to write a failing test case reflecting bug 25181 I stumbled on to\nthis behavior. \n\nThis works when ${tdir} doesn't exist\n  <target name=\"setup\">\n      <delete dir=\"${tdir}\"/>\n      <mkdir dir=\"${tdir}\"/>\n  </target>\n\nThis doesn't work when ${tdir} doesn't exist\n  <target name=\"setup\">\n      <delete dir=\"${tdir}\" followSymlinks=\"false\"/>\n      <mkdir dir=\"${tdir}\"/>\n  </target>\n\nIn the latter case I get:\n\n    [junit] Testcase: testSingle took 0.141 sec\n    [junit]     Caused an ERROR\n    [junit]\n/home/gus/projects/ant/src/etc/testcases/taskdefs/optional/unix/test-working not\nfound.\n    [junit]\n/home/gus/projects/ant/src/etc/testcases/taskdefs/optional/unix/symlink.xml:36:\n/home/gus/projects/ant/src/etc/testcases/taskdefs/optional/unix/test-working not\nfound.\n    [junit]     at\norg.apache.tools.ant.types.AbstractFileSet.getDirectoryScanner(AbstractFileSet.java:387)\n    [junit]     at\norg.apache.tools.ant.taskdefs.MatchingTask.getDirectoryScanner(MatchingTask.java:231)\n    [junit]     at org.apache.tools.ant.taskdefs.Delete.execute(Delete.java:555)\n    [junit]     at\norg.apache.tools.ant.UnknownElement.execute(UnknownElement.java:306)\n    [junit]     at org.apache.tools.ant.Task.perform(Task.java:401)\n    [junit]     at org.apache.tools.ant.Target.execute(Target.java:338)\n    [junit]     at org.apache.tools.ant.Target.performTasks(Target.java:365)\n    [junit]     at org.apache.tools.ant.Project.executeTarget(Project.java:1237)\n    [junit]     at\norg.apache.tools.ant.BuildFileTest.executeTarget(BuildFileTest.java:269)\n    [junit]     at\norg.apache.tools.ant.taskdefs.optional.unix.SymlinkTest.setUp(SymlinkTest.java:97)\n    [junit]     at junit.framework.TestCase.runBare(TestCase.java:125)\n    [junit]     at junit.framework.TestResult$1.protect(TestResult.java:106)\n    [junit]     at junit.framework.TestResult.runProtected(TestResult.java:124)\n    [junit]     at junit.framework.TestResult.run(TestResult.java:109)\n    [junit]     at junit.framework.TestCase.run(TestCase.java:118)\n    [junit]     at junit.framework.TestSuite.runTest(TestSuite.java:208)\n    [junit]     at junit.framework.TestSuite.run(TestSuite.java:203)\n    [junit]     at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:326)\n    [junit]     at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTask.executeInVM(JUnitTask.java:1004)\n    [junit]     at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:676)\n    [junit]     at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:650)\n    [junit]     at\norg.apache.tools.ant.UnknownElement.execute(UnknownElement.java:306)\n    [junit]     at org.apache.tools.ant.Task.perform(Task.java:401)\n    [junit]     at org.apache.tools.ant.Target.execute(Target.java:338)\n    [junit]     at org.apache.tools.ant.Target.performTasks(Target.java:365)\n    [junit]     at org.apache.tools.ant.Project.executeTarget(Project.java:1237)\n    [junit]     at org.apache.tools.ant.Project.executeTargets(Project.java:1094)\n    [junit]     at org.apache.tools.ant.Main.runBuild(Main.java:705)\n    [junit]     at org.apache.tools.ant.Main.startAnt(Main.java:225)\n    [junit]     at org.apache.tools.ant.launch.Launcher.run(Launcher.java:215)\n    [junit]     at org.apache.tools.ant.launch.Launcher.main(Launcher.java:90)", "id": 49479, "time": "2003-12-20T19:19:18Z", "creator": "gus.heck@olin.edu", "creation_time": "2003-12-20T19:19:18Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 25674, "text": "<delete dir=\"${tdir}\"/> always fails for me, no matter which value I give to\nthe followsymlinks attribute - if ${tdir} doesn't exist, that is.\n\nIf I set quiet to true in addition, it passes in either case.\n", "id": 52049, "time": "2004-02-10T12:32:34Z", "creator": "bodewig@apache.org", "creation_time": "2004-02-10T12:32:34Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 25674, "attachment_id": 10297, "id": 52061, "time": "2004-02-10T16:17:37Z", "creator": "gus.heck@olin.edu", "creation_time": "2004-02-10T16:17:37Z", "is_private": false, "text": "Created attachment 10297\nbuild deomonstrating the problem."}, {"count": 3, "tags": [], "bug_id": 25674, "attachment_id": null, "id": 52062, "time": "2004-02-10T16:20:28Z", "creator": "gus.heck@olin.edu", "creation_time": "2004-02-10T16:20:28Z", "is_private": false, "text": "Oops I trusted the error message too much... the error message says it doesn't\nexist, but in fact the failure occurs when the directory DOES exist and\nfollowsymlinks=\"false\". Just attached a file that demonstrates this on \n\nApache Ant version 1.7alpha compiled on December 22 2003\n\nA little out of date, but probably still relevant."}, {"count": 4, "tags": [], "bug_id": 25674, "attachment_id": null, "id": 58734, "time": "2004-06-04T11:11:51Z", "creator": "bodewig@apache.org", "creation_time": "2004-06-04T11:11:51Z", "is_private": false, "text": "There is a typo in your example build file (your create testexits without an s\nin front of the last t).\n"}]