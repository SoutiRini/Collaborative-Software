[{"count": 0, "tags": [], "text": "On Windows 98, the following .bat file statement should work,\nbut it doesn't:\nfor %%i in (\"%ANT_HOME%\\lib\\*.jar\") do call \"%ANT_HOME%\\bin\\lcp.bat\"\nThe problem being that the buggy and not very smart MS-DOS shell\nof Win98SE can not compute the set (\"%ANT_HOME%\\lib\\*.jar\") because\nit has a full path name. There might be some settings that make\nthis work, but these are not the default settings, at least not in\nour Win98SE machines here. On the other hand, if you \"cd\" to\n%ANT_HOME%\\lib, and then build the set (*.jar) in the current\ndirectory, the set is built correctly. Now the problem becomes how\nto \"cd\" to this directory, build the set of jars with the full path\nthen \"cd\" back. This last part is not very trivial in MS-DOS\n\nHere is a batch file segment that does that. Not very pretty, but\nnothing can be in MS-DOS ..., and it works:\n\nrem    define the drive where Ant installation exists -- this needs to\nrem    be computed, rather than hard-coded, from the ANT_HOME variable.\nrem    I don't remember how to do this ...\nSET ANTDRIVE=C:\n\nrem    getting current directory and drive letter so that I can \"cd\" back\nrem    -- standard MS-DOS trick: creates a batch file that sets the WORKING_DIR\nrem       variable to its 2nd parameter\necho set WORKING_DIR=%%2> directory.bat\nrem    -- likewise a \"volume\" batch file, 3rd parameter\necho set DRIVELETTER=%%3> volume.bat\nrem    -- create a batch file that invokes the \"directory.bat\" created above\nrem       this uses the text produced by the \"dir\" command as the invocation\ndir | find /I \"Directory of\" > invoke1.bat\nrem    -- likewise for the \"volume.bat\"\ndir | find /I \"Volume in\" > invoke2.bat\ncall invoke1.bat\ncall invoke2.bat\ndel invoke1.bat >NUL\ndel invoke2.bat >NUL\ndel directory.bat >NUL\ndel volume.bat >NUL\n\nYes, this code creates four files to produce what in any 30-years-old\nUNIX shell you can do in one line, in memory: WORKING_DIR=`pwd` but\nI don't know of other ways to do this in MS-DOS so that it works in\nall Windoze OSs. This code was tested on Win2K as well.\nThen we can do:\ncd %ANT_HOME%\\lib\n%ANTDRIVE%\nfor %%i in ( *.jar ) do call \"%ANT_HOME%\\bin\\lcp.bat\" %ANT_HOME%\\lib\\%%i\ncd %WORKING_DIR%\n%DRIVELETTER%:", "is_private": false, "id": 24145, "creation_time": "2002-10-08T17:40:02Z", "time": "2002-10-08T17:40:02Z", "creator": "polo_talnir@hotmail.com", "bug_id": 13413, "attachment_id": null}, {"count": 1, "tags": [], "text": "May I add that this solution works only for english language Windows versions.\n\nThe string \"Directory of\" becomes localized on other versions and your find /I\nfails there.", "attachment_id": null, "bug_id": 13413, "id": 24147, "time": "2002-10-08T17:56:43Z", "creator": "jens.lorenz@interface-business.de", "creation_time": "2002-10-08T17:56:43Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 13413, "is_private": false, "text": "Good point from Jenz...if there is a batch wizard hanging around that knows \nhow to make a simple batch that works in Win9x, WinNT, WinME, Win2K and WinXP, \nwelcome.", "id": 25084, "time": "2002-10-23T22:55:12Z", "creator": "sbailliez@apache.org", "creation_time": "2002-10-23T22:55:12Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "conor@apache.org", "attachment_id": null, "id": 30490, "time": "2003-02-02T05:58:29Z", "bug_id": 13413, "creation_time": "2003-02-02T05:58:29Z", "is_private": false, "text": "I have updated the ant.bat file's existence check. This works for me under Win98.\n\nHave you read the installation notes About Win98 stating that you should install\nAnt in a short filename directory (i.e. a 8.3 format name such as C:\\Ant)? The\nreason for this is that Win98 does not handle long filenames in the for statement\n\nSee this entry from Microsoft \nhttp://support.microsoft.com/default.aspx?scid=kb;en-us;138154\n\nNote that the LFNFOR option as suggested in the article does not work well\nenough to be useful (We've tried).\n"}]