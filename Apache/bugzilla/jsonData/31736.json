[{"count": 0, "tags": [], "bug_id": 31736, "attachment_id": null, "id": 65206, "time": "2004-10-15T20:05:09Z", "creator": "michaely007@yahoo.ca", "creation_time": "2004-10-15T20:05:09Z", "is_private": false, "text": "I'm using Log4j (version 1.2.8) with DailyRollingFileAppender (set daily) in a \nweb application On Redhat 9 / tomcat / j2sdk1.4.2_04.\n\nDailyRollingFileAppender only roll out part of message and record date is wrong.\n\n\nHere are console output:\n\nOct 14,2004 23:50:02 DEBUG - Elapsed time: (ms) 24\nOct 14,2004 23:50:02 INFO  - ===================================================\nlog4j: /usr/local/tomcat/webapps/mss/logs/MSSDebug.log -\n> /usr/local/tomcat/webapps/mss/logs/MSSDebug.log.2004-10-14\nlog4j: setFile called: /usr/local/tomcat/webapps/mss/logs/MSSDebug.log, false\nlog4j: setFile ended\nlog4j: /usr/local/tomcat/webapps/mss/logs/MSSInfo.log -\n> /usr/local/tomcat/webapps/mss/logs/MSSInfo.log.2004-10-14\nlog4j: setFile called: /usr/local/tomcat/webapps/mss/logs/MSSInfo.log, false\nlog4j: setFile ended\nOct 15,2004 00:10:01 INFO  - ===================================================\n\n\n\nHere are my backuped log files:\n\nMSSDebug.log.2004-10-13 <backuped works with large size 500 MB, hammering by \njmeter>\nOct 13,2004 00:10:01 INFO  - ===================================================\nOct 13,2004 00:10:01 DEBUG - Entering Controller: (ms) 1097554201671\nOct 13,2004 00:10:01 DEBUG - Headers:\nOct 13,2004 00:10:01 DEBUG - \tcache-control: no-cache\n......\n\n\nMSSDebug.log.2004-10-14 <bad file update wrong date (should Oct 14,2004) and \nonly 2.61 KB 42 lines message. It should be over 10MB>\nOct 15,2004 00:10:01 DEBUG - Remote Host: loads03yyz.rim.net:80\nOct 15,2004 00:10:01 DEBUG - Protocol: http\nOct 15,2004 00:10:01 DEBUG - Query String: service=weather&action=new\nOct 15,2004 00:10:01 DEBUG - File: push\nOct 15,2004 00:10:01 DEBUG - MIME Type: null\n......\n\nMSSDebug.log <continu \nOct 15,2004 00:10:01 INFO  - ===================================================\nOct 15,2004 00:10:02 DEBUG - Entering Controller: (ms) 1097813401185\nOct 15,2004 00:10:02 DEBUG - Headers:\nOct 15,2004 00:10:02 DEBUG - \tcache-control: no-cache\nOct 15,2004 00:10:02 DEBUG - \tpragma: no-cache\nOct 15,2004 00:10:02 DEBUG - \tuser-agent: Java/1.4.2_04\n......\n\nWhat's problems here using DailyRollingFileAppender. \n\nI have to backup log files based on daily or hourly.\n\n\nHere are part of my log4j.xml.\n  <!-- DEBUG log file setup -->\n  <appender name=\"DEBUG\" class=\"org.apache.log4j.DailyRollingFileAppender\">\n    <param name=\"Threshold\" value=\"DEBUG\"/>\n\t\t<param name=\"DatePattern\" value=\"'.'yyyy-MM-dd\"/>    \n    <param name=\"Append\" value=\"true\"/>\n    <param name=\"File\"   \nvalue=\"/usr/local/tomcat/webapps/mss/logs/MSSDebug.log\"/>\n    <param name=\"ImmediateFlush\" value=\"true\"/>\n    <layout class=\"org.apache.log4j.PatternLayout\">\n      <param name=\"ConversionPattern\" value=\"%d{MMM dd,yyyy HH:mm:ss} %-5p - %m%\nn\"/>\n    </layout>\n  </appender>\n\n  <!-- INFO log file setup -->\n  <appender name=\"INFO\" class=\"org.apache.log4j.DailyRollingFileAppender\">\n    <param name=\"Threshold\" value=\"INFO\"/>\n\t\t<param name=\"DatePattern\" value=\"'.'yyyy-MM-dd\"/>        \n    <param name=\"Append\" value=\"true\"/>    \n    <param name=\"File\"   \nvalue=\"/usr/local/tomcat/webapps/mss/logs/MSSInfo.log\"/>\n    <param name=\"ImmediateFlush\" value=\"true\"/>\n    <layout class=\"org.apache.log4j.PatternLayout\">\n      <param name=\"ConversionPattern\" value=\"%d{MMM dd,yyyy HH:mm:ss} %-5p - %m%\nn\"/>\n    </layout>\n    <filter class=\"org.apache.log4j.varia.LevelRangeFilter\">\n      <!-- only INFO level message will save to MSSInfo.log file -->\n      <param name=\"LevelMin\" value=\"INFO\"/>\n      <param name=\"LevelMax\" value=\"INFO\"/>\n      <param name=\"AcceptOnMatch\" value=\"true\"/>\n    </filter>\n  </appender>\n\n\nPlease help,\n\n\nMichael"}, {"count": 1, "tags": [], "text": "actually, it is a duplicate of bug #17201. multi-instances lose data.\n\n\n*** This bug has been marked as a duplicate of 17201 ***", "is_private": false, "id": 65300, "creator": "michaely007@yahoo.ca", "time": "2004-10-19T04:22:37Z", "bug_id": 31736, "creation_time": "2004-10-19T04:22:37Z", "attachment_id": null}]