[{"count": 0, "tags": [], "bug_id": 42586, "attachment_id": null, "is_private": false, "id": 104073, "time": "2007-06-05T05:57:29Z", "creator": "saigenono@outerspace-game.de", "creation_time": "2007-06-05T05:57:29Z", "text": "Sometimes the POST Data is lost sporadically. After one ore more Reloads\n(Browser-Function) it worked fine. The Problem occurs a lot of times in a\nspecific period (normally only a few minutes) and then all worked fine for a lot\nof hours.\nHere a part of the access.log. The first line is when the error occurs, the\nsecond line is after the Reload (Browser-Function) where all worked fine.\n\n84.134.203.79 - - [03/Jun/2007:14:41:38 +0200] \"POST\n/cgi-bin/games/game_planet.pl HTTP/1.1\" 200 26463\n\"http://www.outerspace-game.de/cgi-bin/games/game_planet.pl\" \"Mozilla/5.0\n(Windows; U; Win98; en-US; rv:1.5) Gecko/20031007\"\n\n84.134.203.79 - - [03/Jun/2007:14:41:58 +0200] \"POST\n/cgi-bin/games/game_planet.pl HTTP/1.1\" 200 26463\n\"http://www.outerspace-game.de/cgi-bin/games/game_planet.pl?xyd=5009x5004x&session_id=1524564026&user_id=1009&game_id=126\"\n\"Mozilla/5.0 (Windows; U; Win98; en-US; rv:1.5) Gecko/20031007\"\n\n_________\nSaigenOno"}, {"attachment_id": null, "tags": [], "bug_id": 42586, "text": "Now the same or equivalent problem occures, but in this case in the apache-log\nthe POST Data is present, but is empty in CGI/Perl.\n\nAfter two Reloads all worked fine, but the first two tires had the problem.\n\nHere the Logfile of the application. It shows that no user_id (CGI-Post-Data) is\ngiven:\n06.06.2007 11:55:34 88.198.15.75     game_research.pl          Keine User-ID\n\u00fcbergeben (sessionid=)\n06.06.2007 11:55:39 88.198.15.75     game_research.pl          Keine User-ID\n\u00fcbergeben (sessionid=)\n\nHere the access.log from apache. the first two lines is just the page before\nform information only. the 3. and 4. line shows the tries with the problem, the\nlast line is after the second reload, where all worked fine.\n88.198.15.75 - - [06/Jun/2007:11:55:21 +0200] \"GET\n/cgi-bin/games/game_info_statistics.pl?user_id=1009&session_id=3443718856&game_id=125&showme=no&showwhom1=4&showwhom2=0&showwhom3=1&showwhom4=5&showwhom5=0&showwhom6=2&showwhom7=0&showwhom8=0&showvalues=10&showwhat=1\nHTTP/1.1\" 200 40712\n\"http://www.outerspace-game.de/cgi-bin/games/game_info_statistics.pl\"\n\"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.4) Gecko/20070515\nFirefox/2.0.0.4\"\n88.198.15.75 - - [06/Jun/2007:11:55:22 +0200] \"GET\n/os/stats/1009/3443718856/125/u101030400010500020000.png HTTP/1.1\" 200 214451\n\"http://www.outerspace-game.de/cgi-bin/games/game_info_statistics.pl?user_id=1009&session_id=3443718856&game_id=125&showme=no&showwhom1=4&showwhom2=0&showwhom3=1&showwhom4=5&showwhom5=0&showwhom6=2&showwhom7=0&showwhom8=0&showvalues=10&showwhat=1\"\n\"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.4) Gecko/20070515\nFirefox/2.0.0.4\"\n88.198.15.75 - - [06/Jun/2007:11:55:34 +0200] \"POST\n/cgi-bin/games/game_research.pl HTTP/1.1\" 200 3341\n\"http://www.outerspace-game.de/cgi-bin/games/game_info_statistics.pl?user_id=1009&session_id=3443718856&game_id=125&showme=no&showwhom1=4&showwhom2=0&showwhom3=1&showwhom4=5&showwhom5=0&showwhom6=2&showwhom7=0&showwhom8=0&showvalues=10&showwhat=1\"\n\"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.4) Gecko/20070515\nFirefox/2.0.0.4\"\n88.198.15.75 - - [06/Jun/2007:11:55:39 +0200] \"POST\n/cgi-bin/games/game_research.pl HTTP/1.1\" 200 3341\n\"http://www.outerspace-game.de/cgi-bin/games/game_info_statistics.pl?user_id=1009&session_id=3443718856&game_id=125&showme=no&showwhom1=4&showwhom2=0&showwhom3=1&showwhom4=5&showwhom5=0&showwhom6=2&showwhom7=0&showwhom8=0&showvalues=10&showwhat=1\"\n\"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.4) Gecko/20070515\nFirefox/2.0.0.4\"\n88.198.15.75 - - [06/Jun/2007:11:55:43 +0200] \"POST\n/cgi-bin/games/game_research.pl HTTP/1.1\" 200 12894\n\"http://www.outerspace-game.de/cgi-bin/games/game_info_statistics.pl?user_id=1009&session_id=3443718856&game_id=125&showme=no&showwhom1=4&showwhom2=0&showwhom3=1&showwhom4=5&showwhom5=0&showwhom6=2&showwhom7=0&showwhom8=0&showvalues=10&showwhat=1\"\n\"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.4) Gecko/20070515\nFirefox/2.0.0.4\"\n\nHere the apache suexec.log:\n[2007-06-06 11:55:21]: uid: (1027/www.outerspace-game.de) gid: (1009/1009) cmd:\ngame_info_statistics.pl\n[2007-06-06 11:55:34]: uid: (1027/www.outerspace-game.de) gid: (1009/1009) cmd:\ngame_research.pl\n[2007-06-06 11:55:39]: uid: (1027/www.outerspace-game.de) gid: (1009/1009) cmd:\ngame_research.pl\n[2007-06-06 11:55:43]: uid: (1027/www.outerspace-game.de) gid: (1009/1009) cmd:\ngame_research.pl\n\nAnd at least the apache prozesses:\ndebian32m:/var/log/apache2# ps -ef | grep apache\nroot       506     1  0 Jun03 ?        00:00:00 /usr/sbin/apache2 -k start\nwww-data  5248   506  0 00:08 ?        00:00:04 /usr/sbin/apache2 -k start\nwww-data  9002   506  0 00:32 ?        00:00:04 /usr/sbin/apache2 -k start\nwww-data  2172   506  0 08:11 ?        00:00:02 /usr/sbin/apache2 -k start\nwww-data  2845   506  0 08:39 ?        00:00:02 /usr/sbin/apache2 -k start\nwww-data  3132   506  0 08:42 ?        00:00:02 /usr/sbin/apache2 -k start\nwww-data  5852   506  0 09:48 ?        00:00:01 /usr/sbin/apache2 -k start\nwww-data  6156   506  0 09:58 ?        00:00:01 /usr/sbin/apache2 -k start\nwww-data  6260   506  0 10:01 ?        00:00:01 /usr/sbin/apache2 -k start\nwww-data  7075   506  0 10:25 ?        00:00:00 /usr/sbin/apache2 -k start\nwww-data  7178   506  0 10:34 ?        00:00:00 /usr/sbin/apache2 -k start\n", "count": 1, "id": 104130, "time": "2007-06-06T06:05:44Z", "creator": "saigenono@outerspace-game.de", "creation_time": "2007-06-06T06:05:44Z", "is_private": false}, {"count": 2, "tags": [], "creator": "loic.etienne@tech.swisssign.com", "is_private": false, "text": "I observed exactly the same problem: after some reloads, it works.\n\nWith mod_perl apache2: $r-read() returns 0 (no byte read) although the content-length header is not null. With tcpdump I observed that the browser sends the expected post-body.\n\nFurthermore, I observed that on failure (post data lost), the web server needs a sensible time to respond, while on success (post data read correctly), the response is almost immediate. Maybe some timeout problem (various mod_xxx set timeouts)?\n\nI also observed that failures tend to occur in a row.", "id": 159924, "time": "2012-06-12T16:11:11Z", "bug_id": 42586, "creation_time": "2012-06-12T16:11:11Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "loic.etienne@tech.swisssign.com", "text": "We could solve this problem in our case.\n\nAlthough we use mainly mod_perl, some older modules still use the CGI.pm.\nOver indirections we did not think of, CGI->new() was called, and consumed the post body before the function we expected to do so.\n\nHowever I have no explanation for the undeterministic behaviour. It seems that some modules are not always included (which are not used anyway, a case for refactoring our includes, which are quite messed up). It probably happen in a process specific manner, which could explain the 'failure in a row' behaviour.\n\nThus Apache worked flawlessly.", "id": 159943, "time": "2012-06-13T12:34:09Z", "bug_id": 42586, "creation_time": "2012-06-13T12:34:09Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 42586, "attachment_id": null, "is_private": false, "id": 160002, "time": "2012-06-14T09:47:04Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2012-06-14T09:47:04Z", "text": "To the original reporter SaigenOno: does that explain it for you too?\n\nPlease respond, otherwise we will close this as INVALID."}, {"count": 5, "tags": [], "creator": "saigenono@outerspace-game.de", "text": "The Problem doesn\u00b4t appear again the last years. So I think it is fixed by one of the updates after 2007.", "id": 160026, "time": "2012-06-15T07:53:00Z", "bug_id": 42586, "creation_time": "2012-06-15T07:53:00Z", "is_private": false, "attachment_id": null}]