[{"attachment_id": null, "tags": [], "bug_id": 52150, "is_private": false, "count": 0, "id": 151280, "time": "2011-11-08T01:23:43Z", "creator": "sebb@apache.org", "creation_time": "2011-11-08T01:23:43Z", "text": "The FileServer class has 3 different methods to set the base.\n\n1) setBase(File jmxBase), which does:\n   files.clear();\n   base = jmxBase;\n\n2) setBaseDir(String basedir):\n   files.clear();\n   if (basedir != null) {\n       if (basedir is a directory) {\n           base = basedir\n       } else {\n           base = basedir.parent\n       }\n   }\n\n3) setBaseForScriptFile(File scriptPath)\n   files.clear();\n   base = scriptPath.parent\n\n1) is only called by RemoteJMeterEngineImpl.rconfigure(), which needs to set the relative path for use with CSV files.\n\nIt's not clear if 2) and 3) are both really needed.\n\nNeeds more study to see if the code can be simplified."}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "text": "Date: Fri Nov 11 22:09:06 2011\nNew Revision: 1201070\n\nURL: http://svn.apache.org/viewvc?rev=1201070&view=rev\nLog:\nBug 52150 - FileServer has 3 confusingly similar methods to set the file base\n\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/services/FileServer.java\n   jmeter/trunk/test/src/org/apache/jmeter/services/TestFileServer.java\n   jmeter/trunk/xdocs/changes.xml", "id": 151425, "time": "2011-11-11T22:10:19Z", "bug_id": 52150, "creation_time": "2011-11-11T22:10:19Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "text": "Date: Sat Nov 12 10:10:18 2011\nNew Revision: 1201238\n\nURL: http://svn.apache.org/viewvc?rev=1201238&view=rev\nLog:\nBug 52150 - FileServer has 3 confusingly similar methods to set the file base\n\nStep 1, make all methods use same exception for same cause (replace IOException by IllegalStateException) and impact callers.\n\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/gui/GuiPackage.java\n   jmeter/trunk/src/core/org/apache/jmeter/services/FileServer.java\n   jmeter/trunk/src/core/org/apache/jmeter/testelement/TestPlan.java\n   jmeter/trunk/src/reports/org/apache/jmeter/gui/ReportGuiPackage.java\n   jmeter/trunk/src/reports/org/apache/jmeter/testelement/ReportPlan.java\n   jmeter/trunk/test/src/org/apache/jmeter/services/TestFileServer.java\n\nDate: Sat Nov 12 10:14:21 2011\nNew Revision: 1201240\n\nURL: http://svn.apache.org/viewvc?rev=1201240&view=rev\nLog:\nBug 52150 - FileServer has 3 confusingly similar methods to set the file base\n\nStep 2, facctor common check code\n\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/services/FileServer.java\n\n\nDate: Sat Nov 12 11:05:29 2011\nNew Revision: 1201245\n\nURL: http://svn.apache.org/viewvc?rev=1201245&view=rev\nLog:\nBug 52150 - FileServer has 3 confusingly similar methods to set the file base\n\nStep 3, factor setBase when no null is sure\n\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/services/FileServer.java", "id": 151427, "time": "2011-11-12T11:15:04Z", "bug_id": 52150, "creation_time": "2011-11-12T11:15:04Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 52150, "attachment_id": null, "id": 151757, "time": "2011-11-23T22:54:57Z", "creator": "sebb@apache.org", "creation_time": "2011-11-23T22:54:57Z", "is_private": false, "text": "The checkForOpenFiles() method does more than its name suggests.\n\nEither we rename the method, or we pull up the files.clear() method into the calling methods. I think having a separate call to files.clear() would be better."}, {"count": 4, "tags": [], "bug_id": 52150, "attachment_id": null, "id": 151816, "time": "2011-11-27T12:05:01Z", "creator": "sebb@apache.org", "creation_time": "2011-11-27T12:05:01Z", "is_private": false, "text": "On reflection, files.clear() should only tidy up the hash, so the name is OK.\n\nAdded some documentation"}]