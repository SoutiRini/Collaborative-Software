[{"count": 0, "tags": [], "creator": "oam@arcadia.it", "is_private": false, "text": "I have an ear task defined like this: \n\n  <target name=\"make_app_ear\" depends=\"deploy_ejbs, make_app_war\" description=\"-\n-> makes the application ear\">\n<!--this task generates the application.xml deployment descriptor in \n${ear.dir}/META-INF/application.xml -->\n    <java classname=\"weblogic.ant.taskdefs.ear.DDInit\" \nclasspathref=\"project.class.path\">\n      <arg line=\"${ear.dir}\"/>\n    </java>\n    <ear basedir=\"${ear.dir}\" excludes=\"${ear.dir}/META-INF/application.xml\" \nearfile=\"${BEA.DEPLOY.HOME}/SFA_Promotori.ear\" appxml=\"${ear.dir}/META-\nINF/application.xml\">\n    </ear>\n</target>\n\n\nThe problem is that even if I exclude the application.xml file it gets added \ntwice on the archive ( under the same directory ! ) \nHere's what my. ear file contains: \nC:\\bea\\wlserver6.1\\config\\wksmi100domain\\applications>jar tvf SFA_Promotori.ear\n     0 Mon Mar 04 10:09:44 CET 2002 META-INF/\n    48 Mon Mar 04 10:09:44 CET 2002 META-INF/MANIFEST.MF\n     0 Mon Mar 04 10:09:44 CET 2002 config/\n     0 Mon Mar 04 10:09:44 CET 2002 lib/\n  5382 Mon Mar 04 10:09:44 CET 2002 config/log4j.dtd\n    28 Mon Mar 04 10:09:44 CET 2002 config/SFA.properties\n  1440 Mon Mar 04 10:09:44 CET 2002 config/SFAlogConfig.xml\n158892 Mon Mar 04 10:09:44 CET 2002 lib/log4j.jar\n   432 Mon Mar 04 10:09:44 CET 2002 META-INF/application.xml\n431010 Mon Mar 04 10:09:40 CET 2002 SFA_entitys.jar\n 20889 Mon Mar 04 10:09:42 CET 2002 SFA_WEB.war\n   432 Mon Mar 04 10:09:44 CET 2002 META-INF/application.xml\n\nand here's ant's output when runned with -debug\n\nFileSet: Setup file scanner in dir \nC:\\Marius\\Work\\SFA_Promotori\\work_dir\\ear_to_deploy\\META-INF with patternSet{ \nincludes: [application.xml] excludes: [] }\n      [ear] config\\log4j.dtd added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] config\\SFA.properties added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] config\\SFAlogConfig.xml added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] lib\\log4j.jar added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] META-INF\\application.xml added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] SFA_entitys.jar added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] SFA_WEB.war added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear]  added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] config added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] lib added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] META-INF added as C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear is outdated.\n      [ear] Building ear: C:\\bea\\wlserver6.1\n\\config\\wksmi100domain\\applications\\SFA_Promotori.ear\nFileSet: Setup file scanner in dir \nC:\\Marius\\Work\\SFA_Promotori\\work_dir\\ear_to_deploy with patternSet{ includes: \n[] excludes: [../work_dir/ear_to_deploy/META-INF/application.xml] }\nFileSet: Setup file scanner in dir \nC:\\Marius\\Work\\SFA_Promotori\\work_dir\\ear_to_deploy\\META-INF with patternSet{ \nincludes: [application.xml] excludes: [] }\n\nall:\n\nBUILD SUCCESSFUL\n\nTotal time: 26 seconds\n\n\nBest regards, \nMarius", "id": 11423, "time": "2002-03-04T09:11:01Z", "bug_id": 6836, "creation_time": "2002-03-04T09:11:01Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "first of all, your excludes doesn't work as the pattern is supposed to be relative\nto basedir, not an absolute path.  Make that excludes=\"META-INF/application.xml\".\n\nIf I try what you are doing with a current CVS version of Ant I get\n\n      [ear] Warning: selected ear files include a META-INF/application.xml which\nwill be ignored (please use appxml attribute to ear task)\n\nand the resulting archive doesn't contain two entries, only one.\n\nThere has been a typo in the ear task of Ant 1.4.1, this has been fixed with\nnightly build 2002-01-08.", "id": 12747, "time": "2002-04-03T13:46:08Z", "bug_id": 6836, "creation_time": "2002-04-03T13:46:08Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 6836, "attachment_id": null, "id": 134367, "time": "2010-02-09T10:24:17Z", "creator": "edbrannin@gmail.com", "creation_time": "2010-02-09T10:24:17Z", "is_private": false, "text": "This bug is back in 1.8.0rc1.\n\nRunning with 1.7:\near-test:\n      [ear] Building ear: Z:\\dev\\ctaf-merge\\dist\\TEST\\CTAFTEST.ear\n      [ear] Warning: selected ear files include a META-INF/application.xml which\n will be ignored (please use appxml attribute to ear task)\n   [delete] Deleting directory Z:\\dev\\ctaf-merge\\wartemp\n\nWith 1.8.0RC1:\near-test:\n      [ear] Building ear: Z:\\dev\\ctaf-merge\\dist\\TEST\\CTAFTEST.ear\n   [delete] Deleting directory Z:\\dev\\ctaf-merge\\wartemp\n\n(As a workaround, I've finally added an exclude pattern for application.xml and killed the warning in 1.7 too)."}, {"count": 3, "tags": [], "bug_id": 6836, "text": "the problem was re-introduced with svn revision 531603 and fixed (again) with svn revision 908464", "id": 134395, "time": "2010-02-10T04:09:24Z", "creator": "bodewig@apache.org", "creation_time": "2010-02-10T04:09:24Z", "is_private": false, "attachment_id": null}]