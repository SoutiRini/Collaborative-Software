[{"count": 0, "tags": [], "bug_id": 48457, "attachment_id": null, "is_private": false, "id": 133180, "time": "2009-12-29T08:51:51Z", "creator": "david.oliveira@inventive.pt", "creation_time": "2009-12-29T08:51:51Z", "text": "-> Apache/2.2.11 (Unix) mod_ssl/2.2.11 OpenSSL/0.9.8k\n-> SunOS xxxxxxxxxxxx 5.10 Generic_138888-06 sun4u sparc SUNW, Sun-Fire-V440\n-> MPM worker / all modules are shared.\n\nAfter an apachectl restart the error.log splits the following content:\n.\n.\n.\n[Mon Dec 28 11:30:26 2009] [warn] child process 23595 still did not exit, sending a SIGTERM\n[Mon Dec 28 11:30:28 2009] [warn] child process 23595 still did not exit, sending a SIGTERM\n[Mon Dec 28 11:30:30 2009] [error] child process 23595 still did not exit, sending a SIGKILL\n[Mon Dec 28 11:30:31 2009] [notice] SIGHUP received.  Attempting to restart\nWARNING: ThreadsPerChild of 128 exceeds ThreadLimit value of 64\nthreads, lowering ThreadsPerChild to 64. To increase, please see the\n ThreadLimit directive.\nWARNING: MaxClients of 2560 would require 40 servers,\n and would exceed the ServerLimit value of 20.\n Automatically lowering MaxClients to 1280.  To increase,\n please see the ServerLimit directive.\n[Mon Dec 28 11:30:32 2009] [warn] worker http://xxxxxxxxx already used by another worker\n[Mon Dec 28 11:30:32 2009] [warn] worker http://xxxxxxxxx already used by another worker\n[Mon Dec 28 11:30:32 2009] [warn] worker http://xxxxxxxxx already used by another worker\n[Mon Dec 28 11:30:32 2009] [warn] worker http://xxxxxxxxx already used by another worker\n[Mon Dec 28 11:30:32 2009] [notice] Digest: generating secret for digest authentication ...\n[Mon Dec 28 11:30:32 2009] [notice] Digest: done\n[Mon Dec 28 11:30:32 2009] [warn] WARNING: Attempt to change ServerLimit or ThreadLimit ignored during restart\n[Mon Dec 28 11:30:32 2009] [notice] Apache/2.2.11 (Unix) mod_ssl/2.2.11 OpenSSL/0.9.8k configured -- resuming normal operations\n\nAt this point the ThreadLimit was already changed to 128 limit as below (in this order):\n\nServerLimit         40\nThreadLimit        128\nThreadsPerChild    128\nMaxClients        2560\nStartServers         4\n\nWith the same configuration after a stop/start via apachectl it loads the configurations without sending any warnings (and assumed the new ThreadLimit).\n\nbelow the error.log afert stop/start:\n\n.\n.\n[Mon Dec 28 11:56:32 2009] [warn] child process 26941 still did not exit, sending a SIGTERM\n[Mon Dec 28 11:56:32 2009] [warn] child process 26942 still did not exit, sending a SIGTERM\n[Mon Dec 28 11:56:32 2009] [warn] child process 26943 still did not exit, sending a SIGTERM\n[Mon Dec 28 11:56:34 2009] [notice] caught SIGTERM, shutting down\n[Mon Dec 28 11:56:52 2009] [notice] Digest: generating secret for digest authentication ...\n[Mon Dec 28 11:56:52 2009] [notice] Digest: done\n[Mon Dec 28 11:56:52 2009] [notice] Apache/2.2.11 (Unix) mod_ssl/2.2.11 OpenSSL/0.9.8k configured -- resuming normal operations\n\nCan you please advise if this behavior is normal?\n\nIn http 2.2 documentation I read:\n\nSending the HUP or restart signal to the parent causes it to kill off its children like in TERM, but the parent doesn't exit. It re-reads its configuration files, and re-opens any log files. Then it spawns a new set of children and continues serving hits.\n\n---\n\nRegards,"}, {"count": 1, "tags": [], "bug_id": 48457, "attachment_id": null, "text": "\"This directive sets the maximum configured value for ThreadsPerChild for the lifetime of the Apache process. Any attempts to change this directive during a restart will be ignored, but ThreadsPerChild can be modified during a restart up to the value of this directive.\"", "id": 133181, "time": "2009-12-29T09:21:12Z", "creator": "covener@gmail.com", "creation_time": "2009-12-29T09:21:12Z", "is_private": false}]