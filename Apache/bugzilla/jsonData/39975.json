[{"count": 0, "tags": [], "bug_id": 39975, "attachment_id": null, "is_private": false, "id": 90928, "time": "2006-07-06T08:44:19Z", "creator": "taras.tielkes@gmail.com", "creation_time": "2006-07-06T08:44:19Z", "text": "When the first JSP renderd (since startup) is from a webapp that contains\ncommons-logging and log4j, classes from the 'jasper.runtime' package create a\nmemory leak.\n\nHere's a description in more detail\n1) User deploys war with commons-logging + log4j jars (quite common)\n2) First page is rendered, causing loading and initialization of classes in the\n'jasper.runtime' package.\n3) Some of these classes (for instance PageContextImpl) contain static\ncommons-logging 'log' fields.\n4) In the scenario described, these fields get intialized to a Log4JLogger\ninstance that is loaded from the webapp classloader.\n\nThe effective result is that code and data in this webapp will never be unloaded."}, {"count": 1, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "text": "I see your point.  I've removed the static Log fields in favor of non-static\nones for Jasper in Tomcat 5.5 (should be in time for the 5.5.21 release).  I\nguess this still needs to be done in 5.0.", "id": 97326, "time": "2006-12-26T07:03:27Z", "bug_id": 39975, "creation_time": "2006-12-26T07:03:27Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 39975, "text": "Done for Tomcat 5.0 as well.", "id": 97331, "time": "2006-12-26T07:25:43Z", "creator": "yoavs@computer.org", "creation_time": "2006-12-26T07:25:43Z", "is_private": false, "attachment_id": null}]