[{"text": "Created attachment 27712\nFO File for reproducing problem\n\nI used complex script from the following location:\n\nhttp://people.apache.org/~spepping/\n\nI ran the command to generate an FO as follows:\n\nc:\\fop-ComplexScripts\\fop.cmd -c c:\\fop-ComplexScripts\\conf\\fop.xconf -fo Arabic.fo -pdf Arabic.pdf\n\nI attach the fo file and the fop.xconf file.\n\nThe FOP code seems to go into an infinite loop.\n\nHere is the output before FOP seemingly hangs forever.\n\nC:\\InterSystems\\cache121\\MGR\\Temp>c:\\fop-ComplexScripts\\fop.cmd -c c:\\fop-Comple\nxScripts\\conf\\fop.xconf -fo Arabic.fo -pdf Arabic.pdf\nOct 6, 2011 6:49:16 PM org.apache.fop.apps.FopFactoryConfigurator configure\nINFO: Default page-height set to: 11in\nOct 6, 2011 6:49:16 PM org.apache.fop.apps.FopFactoryConfigurator configure\nINFO: Default page-width set to: 8.26in\nOct 6, 2011 6:49:18 PM org.apache.fop.layoutmgr.table.ColumnSetup computeTableUn\nit\nWARNING: No space remaining to distribute over columns.", "tags": [], "bug_id": 51984, "attachment_id": 27712, "count": 0, "id": 150272, "time": "2011-10-06T23:00:19Z", "creator": "levinson@intersystems.com", "creation_time": "2011-10-06T23:00:19Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 51984, "attachment_id": 27713, "text": "Created attachment 27713\nfop.xconf used in reproducing problem\n\nThis is the fop.xconf I used in what looks like an infinite loop problem.", "id": 150273, "time": "2011-10-06T23:01:30Z", "creator": "levinson@intersystems.com", "creation_time": "2011-10-06T23:01:30Z", "is_private": false}, {"count": 2, "tags": [], "creator": "gadams@apache.org", "attachment_id": null, "text": "The supplied input FO file WORKSFORME without any loop behavior, execution time 3 secs (mostly startup). I'm attaching the output PDF file.\n\nI did not use the XCONF file. For the most part, you do not need to use XCONF to configure fonts in FOP 1.0 and later,  unless you wish to subset your system installed fonts. My XCONF file has the following PDF renderer configuration:\n\n    <renderer mime=\"application/pdf\">\n      <filterList>\n        <value>flate</value>\n      </filterList>\n      <fonts>\n        <auto-detect/>\n      </fonts>\n    </renderer>\n\nI'm using my current dev work branch at [1]. I can't say whether the build you tried works or not, as that is not one of my builds.\n\nAlso, please note the following:\n\n(1) in general, you should use fonts designed for Arabic and indicated to be supported at [2], e.g., Simplified Arabic, Traditional Arabic, etc.; other OpenType fonts that contain Arabic glyphs and OpenType AAT (GSUB/GPOS) tables may work, but haven't been verified; [apparently Arial on my Mac does happen to have Arabic glyphs and OTF AAT tables, so it happens to work]\n\n(2) you should use the writing-mode attribute on fo:page-sequence (or on fo:block-container) to specify the writing mode of the generated reference areas; for example, specifying writing-mode=\"rl\" on fo:page-sequence will automatically make the first column in a multi-column page the right-most column, and make the first column in a table the right-most column, and will align the start edge with the right edge, so you don't need to explicitly specify right alignment; note that text-align=\"start|end\" is now resolved according to writing mode;\n\n[1] http://github.com/skynavga/fop\n[2] http://skynav.trac.cvsdude.com/fop/wiki/SupportedFonts", "id": 150373, "time": "2011-10-09T03:00:22Z", "bug_id": 51984, "creation_time": "2011-10-09T03:00:22Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 51984, "attachment_id": 27743, "text": "Created attachment 27743\ngenerated PDF using arial with current dev branch code", "id": 150374, "time": "2011-10-09T03:02:29Z", "creator": "gadams@apache.org", "creation_time": "2011-10-09T03:02:29Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 51984, "text": "This could be related to:\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=51282\nwhich was actually a bug introduced in trunk. Probably you are using an older version of the complex script branch, where the fix hasn't been merged yet.", "id": 150416, "time": "2011-10-10T15:01:09Z", "creator": "matthias8283@gmx.at", "creation_time": "2011-10-10T15:01:09Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "text": "(In reply to comment #2)\n> (2) you should use the writing-mode attribute on fo:page-sequence (or on\n> fo:block-container) to specify the writing mode of the generated reference\n> areas; for example, specifying writing-mode=\"rl\" on fo:page-sequence will\n> automatically make the first column in a multi-column page the right-most\n> column, and make the first column in a table the right-most column, and will\n> align the start edge with the right edge, so you don't need to explicitly\n> specify right alignment; note that text-align=\"start|end\" is now resolved\n> according to writing mode;\n\nI should also add that an important effect of using writing-mode=\"rl\" on fo:page-sequence is that this makes the default bidirectional level right-to-left on blocks (e.g., paragraphs). If you then need to have certain blocks use left-to-right as their default bidi level, then you can use one of the following:\n\n(1) wrap the block's content with fo:bidi-override, e.g.,\n\n<fo:block><fo:bidi-override unicode-bidi=\"embed\" direction=\"ltr\">...</fo:bidi-override></block>\n\n(2) wrap the block's content with explicit Unicode bidi control characters (i.e., RLE and PDF):\n\n<fo:block>&#x202A;...&#x202C;</block>\n\n(3) wrap the block with a relative block-container with a left-to-right writing mode, e.g.,\n\n<fo:block-container writing-mode=\"lr\"><fo:block>...</fo:block></fo:block-container>\n\nThese techniques actually produce slightly different treatment at the bidi level. The first and second above keep the block at the same default bidi level prescribed by the page-sequence's writing mode, namely right-to-left, but inserts a new left-to-right embedding level into which the block's content is scoped. In contrast, the third technique actually changes the default bidi level of the blocks contained in the block-container to left-to-right.", "attachment_id": null, "id": 150450, "creator": "gadams@apache.org", "time": "2011-10-10T23:23:43Z", "bug_id": 51984, "creation_time": "2011-10-10T23:23:43Z", "is_private": false}, {"count": 6, "tags": [], "text": "batch transition to closed for remaining resolved bugs", "attachment_id": null, "id": 156394, "creator": "gadams@apache.org", "time": "2012-04-01T13:42:57Z", "bug_id": 51984, "creation_time": "2012-04-01T13:42:57Z", "is_private": false}]