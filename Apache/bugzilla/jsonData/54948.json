[{"count": 0, "tags": [], "text": "Created attachment 30269\nproposed patch\n\nHi,\n\nattached patch fixes bug when httpd shows namevhosts in \"httpd -S\" output twice:\n\n         port 80 namevhost hans.tests113.de (/etc/httpd/sites/vhosts:112)\n                 wild alias *.hans.tests113.de\n         port 80 namevhost hans.tests113.de (/etc/httpd/sites/vhosts:112)\n                 wild alias *.hans.tests113.de\n         port 80 namevhost tests113.de (/etc/httpd/sites/vhosts:123)\n                 wild alias *.tests113.de\n         port 80 namevhost tests113.de (/etc/httpd/sites/vhosts:123)\n                 wild alias *.tests113.de\n         port 80 namevhost test1.de (/etc/httpd/sites/vhosts:159)\n                 wild alias *.test1.de\n         port 80 namevhost test1.de (/etc/httpd/sites/vhosts:159)\n                 wild alias *.test1.de\n         port 80 namevhost test2.de (/etc/httpd/sites/vhosts:196)\n                 wild alias *.test2.de\n         port 80 namevhost test2.de (/etc/httpd/sites/vhosts:196)\n                 wild alias *.test2.de\n         port 80 namevhost test3.de (/etc/httpd/sites/vhosts:233)\n                 wild alias *.test3.de\n         port 80 namevhost test3.de (/etc/httpd/sites/vhosts:233)\n                 wild alias *.test3.de", "is_private": false, "id": 167129, "creator": "jkaluza@redhat.com", "time": "2013-05-10T06:51:24Z", "bug_id": 54948, "creation_time": "2013-05-10T06:51:24Z", "attachment_id": 30269}, {"count": 1, "tags": [], "text": "I think the guts of this is related to how 0.0.0.0 is counted as a \"default server\" (this is bogus), but <VH *:80 has two addresses that will both add an NVH config to the same ip chain in the \"default list\".\n\nIn 2.2, add_name_vhost_config is skipped when a new IP chain is created.I think this (inadvertently?) prevents the  * addresses from doubling up, and it works because the first entry in the chain is the default anyway.", "attachment_id": null, "bug_id": 54948, "id": 167135, "time": "2013-05-10T12:43:09Z", "creator": "covener@gmail.com", "creation_time": "2013-05-10T12:43:09Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 54948, "attachment_id": null, "text": "here is my attempt to fix this while the (default/wildcard) vhosts are being created\n\nhttp://people.apache.org/~covener/patches/nvh-defaultservers-duplicated.diff\n\nI will open another bug for the bizarre issue even in 2.2 where 0.0.0.0 is treated as a \"default\" and will apply instead of the base server config for ipv6.", "id": 167136, "time": "2013-05-10T13:17:53Z", "creator": "covener@gmail.com", "creation_time": "2013-05-10T13:17:53Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 54948, "attachment_id": null, "id": 167142, "time": "2013-05-11T05:48:15Z", "creator": "jkaluza@redhat.com", "creation_time": "2013-05-11T05:48:15Z", "is_private": false, "text": "I had your way in my mind too, but I wasn't sure I won't break anything with this change, so I went with my patch. I don't mind which one gets applied :)."}, {"count": 4, "tags": [], "bug_id": 54948, "is_private": false, "text": "Thanks again for the report, committed to trunk in http://svn.apache.org/r1481306. and proposed for backport.", "id": 167144, "time": "2013-05-11T12:07:35Z", "creator": "covener@gmail.com", "creation_time": "2013-05-11T12:07:35Z", "attachment_id": null}]