[{"count": 0, "tags": [], "bug_id": 2436, "text": "When using the rmic task on an inner class, the task generates errors\nthe first time it is run.  If run a second time when the generated files from\nthe first attempt are present, it succeeds.  Using rmic from a batch file is\nsuccessful every time.\nThis happens with jdk 1.2.2 on Windows NT 4.0 SP6.  Other platforms not tested.\n\nThe errors do not halt the build; it will continue on to the next task if there \nis one, or will report BUILD SUCCESSFUL if it is the last task.\n\nThe errors come from an improperly generated *_Skel.java file, in which the name \nof the inner class is of the form \"OuterClass. InnerClass\" (note the space) \ninstead of \"OuterClass$InnerClass\".  This error doesn't happen on the second or\nsubsequent runs when generated files from the first attempt are present.\nI would attribute this to a bug in rmic, except that it works fine from a batch \nfile.  (Of course, it could still be a bug in rmic that only shows up when \ninvoked as ant does it.)\n\nA workaround is to specify stubversion=\"1.2\" which avoids generation of the Skel \nclass in the first place.\n\nThe rmic task runs every time because it looks for the file \nOuterClass\\InnerClass_Stub.class instead of OuterClass$InnerClass_Stub.class,\neven when the classname attribute is \"OuterClass\\$InnerClass\" instead of\n\"OuterClass.InnerClass\".", "id": 3370, "time": "2001-07-03T05:40:04Z", "creator": "joseph.d.bronkema@lmco.com", "creation_time": "2001-07-03T05:40:04Z", "is_private": false, "attachment_id": null}, {"count": 1, "text": "I'll attach a very simply testcase I've created for this.  Using the very latest\nAnt I don't get any errors on Linux - could you please check whether you still\nhave problem with this (in which case the first part of your report is platform\nspecific - which is good to know).\n\nThe second part (Ant always rmics the class) needs to be addressed and I'll be\nlooking into it.", "bug_id": 2436, "attachment_id": null, "id": 3810, "time": "2001-07-18T08:00:22Z", "creator": "bodewig@apache.org", "creation_time": "2001-07-18T08:00:22Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 2436, "attachment_id": 336, "is_private": false, "id": 3811, "time": "2001-07-18T08:02:09Z", "creator": "bodewig@apache.org", "creation_time": "2001-07-18T08:02:09Z", "text": "Created attachment 336\ntestcase as simple as can be"}, {"count": 3, "tags": [], "bug_id": 2436, "attachment_id": null, "is_private": false, "id": 3812, "time": "2001-07-18T08:04:38Z", "creator": "bodewig@apache.org", "creation_time": "2001-07-18T08:04:38Z", "text": "Using Outer$$Inner as the classname should do the trick (note that $ has to be\nescaped by another $, not \\) - I'm not sure whether I want to try to make\nOuter.Inner work as well."}, {"count": 4, "tags": [], "bug_id": 2436, "attachment_id": null, "is_private": false, "id": 3948, "time": "2001-07-24T01:22:53Z", "creator": "bodewig@apache.org", "creation_time": "2001-07-24T01:22:53Z", "text": "Part one is in state WORKSFORME.\n\n<rmic> handles inner classes reasonably well if you use it in directory scanning\nmode or specify the classname as Outer$$Inner - I've changed the documentation\nof the task to reflect this."}]