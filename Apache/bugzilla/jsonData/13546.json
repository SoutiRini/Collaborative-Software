[{"count": 0, "tags": [], "bug_id": 13546, "attachment_id": null, "id": 24365, "time": "2002-10-11T19:17:54Z", "creator": "newsham@hotu.com", "creation_time": "2002-10-11T19:17:54Z", "is_private": false, "text": "Creating a cab in non-Windows environment uses an external tool called listcab.\n Listcab requires the list of files to be archived to be passed through stdin,\nand not on the command line.  In cases where this list is very large, the Cab\ntask just hangs.\n\nI have looked at the 1.5.1 source for Cab, and the problem appears to be that\nthe entire list of files is written to the exec'ed listcab process before any\noutput is read.\n\nThis is what I believe happens.  Listcab prints some output for every file in\nthe list, and with nothing reading this output, the stdout buffer soon becomes\nfull, and listcab blocks on write.  Then, with listcab no longer reading stdin,\nthe stdin buffer becomes full and the Cab task blocks on write.\n\nThe fix which works for me, is to start the process' stdin/stderr reader threads\nbefore writing the filelist to the process."}, {"count": 1, "tags": [], "bug_id": 13546, "attachment_id": 3431, "id": 24366, "time": "2002-10-11T19:22:46Z", "creator": "newsham@hotu.com", "creation_time": "2002-10-11T19:22:46Z", "is_private": false, "text": "Created attachment 3431\npatch of Cab task which contains the described fix"}, {"count": 2, "tags": [], "bug_id": 13546, "attachment_id": null, "id": 24847, "time": "2002-10-18T07:02:48Z", "creator": "bodewig@apache.org", "creation_time": "2002-10-18T07:02:48Z", "is_private": false, "text": "patch is in CVS HEAD, thanks.\n\nBased on user feedback it may be merged into the 1.5 branch (and therefore into\na potential 1.5.2) as well."}]