[{"count": 0, "attachment_id": null, "bug_id": 54262, "text": "The use of an <absolute-ordering> element does disable ServletContainerInitializer classpath scanning as discussed also in issue 53619. However, it does seem to require having at least one web-fragment name to be listed. In other words I would this:\n\n<absolute-ordering />\n\nTo turn off all web-fragments since none are named. A workaround is to list a web-fragment even if it doesn't exist but that shouldn't be necessary.", "id": 163960, "time": "2012-12-07T22:00:09Z", "creator": "rstoyanchev@yahoo.com", "creation_time": "2012-12-07T22:00:09Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": 29736, "bug_id": 54262, "text": "Created attachment 29736\nresources1.jar\n\nConfirming.\n\nSteps to reproduce with 7.0.34:\n1. Download attached resources1.jar and put it into webapps/examples/WEB-INF/lib\n\nThe file is based on test/webapp-3.0-fragments/WEB-INF/lib/resources.jar from Tomcat sources. I\na) removed all resources except \"resourceA.jsp\" and\nb) declared an instance of HelloWorldServlet in web-fragment.xml.\n\n2. Edit webapps/examples/WEB-INF/web.xml:\na) change metadata-complete attribute s/true/false/\nb) add <absolute-ordering />\n\n3. Start Tomcat.\n4. Actual result: The following two URLs work:\n[1] http://localhost:8080/examples/resourceA.jsp\n[2] http://localhost:8080/examples/resources1/HelloWorldExample\n\nExpected result: [2] should return 404 as web-fragment.xml should be ignored and the servlet mapping declared there should be ignored.\n\n<quote from=\"Servet Spec 3.0 Rev a - page #67 (89/230)\">\n1.d. (..) If the\n <absolute-ordering> element does not contain an <others/> element,\n any web-fragment not specifically mentioned within <name /> elements\n MUST be ignored. (...)\n</quote>\n\nRegarding [1], I do not see any specific reference that such exclusion affects static resources in META-INF/resources. Thus I think that the expected behaviour of [1] is to display resourcesA.jsp page. 7.0.34 behaves correctly here.", "id": 163993, "time": "2012-12-09T20:27:10Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2012-12-09T20:27:10Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 54262, "is_private": false, "count": 2, "id": 164364, "time": "2013-01-03T18:02:02Z", "creator": "violetagg@apache.org", "creation_time": "2013-01-03T18:02:02Z", "text": "Hi,\n\nI'm going to work on this.\n\nRegards\nVioleta"}, {"count": 3, "tags": [], "text": "Created attachment 29811\nPatch proposal", "attachment_id": 29811, "bug_id": 54262, "id": 164372, "time": "2013-01-04T09:34:10Z", "creator": "violetagg@apache.org", "creation_time": "2013-01-04T09:34:10Z", "is_private": false}, {"count": 4, "tags": [], "creator": "violetagg@apache.org", "attachment_id": 29812, "text": "Created attachment 29812\nTest case", "id": 164373, "time": "2013-01-04T09:34:52Z", "bug_id": 54262, "creation_time": "2013-01-04T09:34:52Z", "is_private": false}, {"count": 5, "tags": [], "creator": "violetagg@apache.org", "attachment_id": null, "text": "Please find attached a patch proposal and a test case for it.\n\nAny comments will be appreciated.\n\nRegards\nVioleta", "id": 164374, "time": "2013-01-04T09:36:40Z", "bug_id": 54262, "creation_time": "2013-01-04T09:36:40Z", "is_private": false}, {"count": 6, "attachment_id": 29813, "bug_id": 54262, "text": "Created attachment 29813\nresources.jar\n\nresources.jar should be placed in <TC7-Trunk>/test/webapp-3.0-fragments-empty-absolute-ordering/WEB-INF/lib", "id": 164375, "time": "2013-01-04T09:42:15Z", "creator": "violetagg@apache.org", "creation_time": "2013-01-04T09:42:15Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "bug_id": 54262, "attachment_id": null, "id": 164442, "time": "2013-01-07T18:50:06Z", "creator": "markt@apache.org", "creation_time": "2013-01-07T18:50:06Z", "is_private": false, "text": "Thanks for the patch. It has been applied - with some minor changes to trunk and 7.0.x and will be included in 7.0.35 onwards."}, {"attachment_id": null, "tags": [], "creator": "useyour.mind@gmail.com", "text": "And what about {tomcat.dist}/lib dir? Because those services are loaded anyway.\n\nDebugging and watching the code of \"WebappServiceLoader\" and a google search with \"containerSciFilter\", I see that I can use a Pattern to exclude that classes. Is the only way?\n\nThanks.", "count": 8, "id": 175893, "time": "2014-06-19T09:18:32Z", "bug_id": 54262, "creation_time": "2014-06-19T09:18:32Z", "is_private": false}]