[{"count": 0, "tags": [], "bug_id": 53042, "attachment_id": null, "is_private": false, "id": 157228, "time": "2012-04-05T21:32:16Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-04-05T21:32:16Z", "text": "r1293562 > JMeter 2.6\n\nEnhancement based on Sebb idea on mailing list:\n\n\nPhilippe Mouawad wrote:\nI agree, although reading again my sentence I see it's not clear.\n\nIf a new ConfigElement is added then there is not need that existing sampler accept it,while the reverse is true.\nSo the master if the sampler not the config element.\n\n\n\n\n\nOn Sun, Feb 26, 2012 at 1:52 PM, sebb  wrote:\n\n    On 26 February 2012 10:01, Philippe Mouawad  wrote:\n    > Very good idea.\n    > I would rather go for a method to determine if a config element applies to\n    > Sampler.\n\n    Thinking further about this:\n\n    A single config element applies to many samplers; add a new sampler\n    and it may re-use the same config element (with different GUI).\n    So I think it must be the sampler that has a method to check if the\n    config element applies or not, based on the config class and GUI\n    class.\n\n    We need to ensure that any change does not stop 3rd party samplers\n    (and config elements) from working.\n\n    One way might be to add a new interface to define the method; samplers\n    that want to restrict which config elements apply to them would need\n    to implement the method.\n\n    There could be a default implementation in AbstractSampler that\n    accepted all config elements (to retain backward compat).\n\n    I think this would be OK for 3rd party samplers, except for the case\n    where a sampler extended an existing JMeter sampler, and also had its\n    own config element.\n\n    Or are there any other cases that might be affected?\n\n    Another possible approach might be for samplers to register which\n    config elements apply to them; this would be a bit harder to code -\n    and might not be efficient enough - but would potentially allow for\n    customisation (e.g. using properties) when starting JMeter. This would\n    allow overrides for 3rd party samplers.\n\n    Or maybe somehow combine the two: before finally rejecting the config\n    element, a sampler checks for any overrides that have been registered.\n\n    As a fallback, we could/should use a property to disable the config\n    element filtering, in case it turns out to have unwanted side-effects.\n\n    > Regards\n    > Philippe\n    >\n    > On Thu, Feb 23, 2012 at 11:48 PM, sebb  wrote:\n    >\n    >> The proposed patch works by skipping CSVDataSet when merging in the\n    >> configuration elements.\n    >>\n    >> ConfigTestElements have to be merged into samplers, in order that the\n    >> samplers can pick up the configuration elements that apply to them.\n    >>\n    >> This means that all samplers are provided with all the data from every\n    >> config element in scope. This was perhaps OK initially, when there\n    >> weren't many samplers, but now there are lots of samplers and lots of\n    >> config elements.\n    >>\n    >> Duplication of names is now more difficult to avoid, and there is more\n    >> wasted space; each sampler only needs the settings from some of the\n    >> config elements.\n    >>\n    >> It would be nice if there were a method on the config element that\n    >> specified which samplers it applied to - or equally, if samplers had a\n    >> method to determine if a config element applied to them.\n    >>\n    >> However, I don't know if there is an easy way to determine which\n    >> config elements apply to which samplers.\n    >>\n    >> Some specific configs are obvious, such as CSVDataSet, which is not\n    >> directly associated with any Sampler. The same probably applies to\n    >> RandomVariableConfig.\n    >>\n    >> AuthManager, CookieManager etc only apply to HTTP samplers.\n    >>\n    >> But there are a lot of sampler configurations that use the basic\n    >> ConfigTestElement; I suppose it might be possible to use the\n    >> TestElement.gui_class String property.\n    >>\n    >> This needs a bit more thought...\n    >>\n    >\n    >"}, {"count": 1, "tags": [], "text": "Date: Thu Apr  5 21:35:32 2012\nNew Revision: 1310078\n\nURL: http://svn.apache.org/viewvc?rev=1310078&view=rev\nLog:\nBug 53042 - Introduce a new method in Sampler interface to allow Sampler to decide wether a config element applies to Sampler\n\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/samplers/AbstractSampler.java\n   jmeter/trunk/src/core/org/apache/jmeter/samplers/Sampler.java\n   jmeter/trunk/src/core/org/apache/jmeter/threads/TestCompiler.java\n   jmeter/trunk/src/protocol/java/org/apache/jmeter/protocol/java/sampler/BSFSampler.java\n   jmeter/trunk/src/protocol/java/org/apache/jmeter/protocol/java/sampler/BeanShellSampler.java\n   jmeter/trunk/src/protocol/java/org/apache/jmeter/protocol/java/sampler/JSR223Sampler.java\n   jmeter/trunk/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/JDBCSampler.java\n   jmeter/trunk/xdocs/changes.xml", "is_private": false, "id": 157229, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2012-04-05T21:36:21Z", "bug_id": 53042, "creation_time": "2012-04-05T21:36:21Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 53042, "is_private": false, "count": 2, "id": 157627, "time": "2012-04-07T12:20:05Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-04-07T12:20:05Z", "text": "Date: Sat Apr  7 12:19:19 2012\nNew Revision: 1310745\n\nURL: http://svn.apache.org/viewvc?rev=1310745&view=rev\nLog:\nBug 53042 - Introduce a new Interface to be implemented by AbstractSampler to allow Sampler to decide wether a config element applies to Sampler\n\nAlso made ConfigTestElement that have SimpleConfigGui as GUI_CLASS be applied where they returned false before\n\nAdded:\n   jmeter/trunk/src/core/org/apache/jmeter/engine/util/ConfigMergabilityIndicator.java   (with props)\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/samplers/AbstractSampler.java\n   jmeter/trunk/src/core/org/apache/jmeter/samplers/Sampler.java\n   jmeter/trunk/src/core/org/apache/jmeter/threads/TestCompiler.java\n   jmeter/trunk/src/protocol/java/org/apache/jmeter/protocol/java/sampler/BSFSampler.java\n   jmeter/trunk/src/protocol/java/org/apache/jmeter/protocol/java/sampler/BeanShellSampler.java\n   jmeter/trunk/src/protocol/java/org/apache/jmeter/protocol/java/sampler/JSR223Sampler.java\n   jmeter/trunk/src/protocol/jdbc/org/apache/jmeter/protocol/jdbc/sampler/JDBCSampler.java\n   jmeter/trunk/src/protocol/mail/org/apache/jmeter/protocol/smtp/sampler/SmtpSampler.java\n   jmeter/trunk/xdocs/changes.xml"}]