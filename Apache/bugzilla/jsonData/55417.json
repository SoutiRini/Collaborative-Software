[{"count": 0, "tags": [], "bug_id": 55417, "text": "I am building APR-util 1.5.1 as a dependency of Subversion 1.8.1. In the course of configuring the library, I see this:\n\n[...]\nconfigure: checking for openssl in /nfs/freeport/arch/sunos_x86_64\nchecking openssl/x509.h usability... yes\nchecking openssl/x509.h presence... yes\nchecking for openssl/x509.h... yes\nchecking for BN_init in -lcrypto... yes\nchecking for SSL_accept in -lssl... no\nchecking for openssl/x509.h... (cached) yes\nchecking for BN_init in -lcrypto... (cached) yes\nchecking for SSL_accept in -lssl... (cached) no\nchecking whether EVP_PKEY_CTX_new is declared... yes\nconfigure: error: Crypto was requested but no crypto library was enabled\n\n\nExcerpt from config.log for that -lssl check:\n\nconfigure:4960: checking for SSL_accept in -lssl\nconfigure:4985: cc -o conftest -Xa -v -xstrconst -i -mt -xtarget=opteron -xarch=amd64 -xbuiltin -xO5 -D__EXTENSIONS__ -D_REENTRANT  -DSOLARIS2=10 -D_POSIX_PTHREAD_SEMANTICS -I/nfs/freeport/arch/sunos_x86_64/include -L/nfs/freeport/arch/sunos_x86_64/lib  conftest.c -lssl -lcrypto -lrt  >&5\n\"conftest.c\", line 32: warning: statement not reached\nUndefined                       first referenced\n symbol                             in file\nsocket                              /nfs/freeport/arch/sunos_x86_64/lib/libcrypto.a(rand_egd.o)\nconnect                             /nfs/freeport/arch/sunos_x86_64/lib/libcrypto.a(rand_egd.o)\nshutdown                            /nfs/freeport/arch/sunos_x86_64/lib/libcrypto.a(bss_sock.o)\nld: fatal: Symbol referencing errors. No output written to conftest\nconfigure:4985: $? = 1\n\n\nThese functions are defined in the Solaris socket libraries, usually specified as \"-lsocket -lnsl\". And in fact, the compiled OpenSSL libraries that I'm using here have pkg-config files that include the line\n\n    Libs.private: -lsocket -lnsl -ldl\n\nSo it seems that unless APR-util's configure script gains specific knowledge of this Solaris requirement, it should be using pkg-config to pick up OpenSSL so that these system-specific dependencies are accounted for.\n\nAs a workaround, specifying LIBS=\"-lsocket -lnsl\" in the environment before configuring allows OpenSSL to be found and the build to proceed.", "id": 169446, "time": "2013-08-14T20:06:29Z", "creator": "skunk@iSKUNK.ORG", "creation_time": "2013-08-14T20:06:29Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 55417, "text": "Also worth noting is that even on Linux, it is necessary to specify LIBS=-ldl in order for the OpenSSL check to succeed. I've thus generalized the title of this bug.", "id": 169576, "time": "2013-08-19T18:26:37Z", "creator": "skunk@iSKUNK.ORG", "creation_time": "2013-08-19T18:26:37Z", "is_private": false, "attachment_id": null}]