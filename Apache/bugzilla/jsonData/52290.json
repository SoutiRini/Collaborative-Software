[{"count": 0, "tags": [], "bug_id": 52290, "attachment_id": null, "id": 151990, "time": "2011-12-06T03:35:43Z", "creator": "ringerc@ringerc.id.au", "creation_time": "2011-12-06T03:35:43Z", "is_private": false, "text": "If one has a collection of faces for a font, some of which are condensed and some which are not, fop doesn't offer any way to select between them.\n\nAccording to the XSL-FO standard it appears that the \"font-stretch\" property should be used to pick between condensed/expanded/regular faces of a font. font-stretch is documented as unimplemented in fop. The only questions about on the mailing list have referred to using font-stretch to artificially condense or expand a regular face, which is *not* what I need to do, and an idea that was rejected anyway.\n\nIt looks like Fop stores font info as (family, style, weight) triplets, where \"style\" here refers to oblique/regular. It doesn't seem to have to track any additional style attributes like small-caps or whether the face is a condensed or expanded face.\n\nTo support font-stretch, fop will need to:\n\n- Identify whether a font face is condensed/expanded/regular when examining it\n- Track additional font metadata, not just the basic font-triplet, treating \n  condensed and non-condensed faces as different fonts.\n- Consider the value of font-stretch when matching fonts.\n\nThere are some free condensed fonts, including http://dejavu-fonts.org/ which has a variety of condensed faces, so this isn't something that requires commercial fonts (though it'll be mostly useful with them)."}, {"count": 1, "tags": [], "bug_id": 52290, "text": "It appears that the issue can be worked around - albeit clumsily - by registering each font manually in the config file, specifying a different family name for condensed and non-condensed variants. I can then select the condensed face by asking for \"Helvetica Neue LT Condensed\" as the family. It's clunky and clumsy to set up, but it does work. See the generated config file snippet below for an example.\n\nHere's the config file snippet I'm using to get my fonts to work in the mean time. In reality there are plenty more fonts, but here's how it works:\n\n      <fonts>\n        <font embed-url=\"file:/opt/jboss/classads/fonts/HelveticaNeueLTStd-Roman.ttf\">\n          <font-triplet name=\"Helvetica Neue LT\" style=\"normal\" weight=\"400\"/>\n        </font>\n        <font embed-url=\"file:/opt/jboss/classads/fonts/HelveticaNeueLTStd-Cn.ttf\">\n          <font-triplet name=\"Helvetica Neue LT Condensed\" style=\"normal\" weight=\"400\"/>\n        </font>\n        <font embed-url=\"file:/opt/jboss/classads/fonts/HelveticaNeueLTStd-BdCn.ttf\">\n          <font-triplet name=\"Helvetica Neue LT Condensed\" style=\"normal\" weight=\"700\"/>\n        </font>\n        <font embed-url=\"file:/opt/jboss/classads/fonts/HelveticaNeueLTStd-BlkCn.ttf\">\n          <font-triplet name=\"Helvetica Neue LT Condensed\" style=\"normal\" weight=\"900\"/>\n        </font>\n      </fonts>", "id": 151991, "time": "2011-12-06T03:37:55Z", "creator": "ringerc@ringerc.id.au", "creation_time": "2011-12-06T03:37:55Z", "is_private": false, "attachment_id": null}, {"text": "See also https://issues.apache.org/bugzilla/show_bug.cgi?id=52290, which\nrelates to misclassification of some condensed faces. Since fop seems to be\nhaving trouble detecting the font weights too, this might not really be\nrelated, but it's worth seeing.", "tags": [], "creator": "ringerc@ringerc.id.au", "is_private": false, "count": 2, "id": 151992, "time": "2011-12-06T03:40:58Z", "bug_id": 52290, "creation_time": "2011-12-06T03:40:58Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 52290, "text": "Whoops, that should've been https://issues.apache.org/bugzilla/show_bug.cgi?id=52289, re the inability to select between condensed and non-condensed faces.", "id": 151994, "time": "2011-12-06T03:45:14Z", "creator": "ringerc@ringerc.id.au", "creation_time": "2011-12-06T03:45:14Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 52290, "attachment_id": null, "is_private": false, "id": 152179, "time": "2011-12-15T07:20:48Z", "creator": "ringerc@ringerc.id.au", "creation_time": "2011-12-15T07:20:48Z", "text": "It turns out that the manual font definitions are not required. A regular directory scan for fonts will add the fully qualified face name as a fake family automatically, so if you have the font:\n\n  MyriadPro-BlackCondIt.ttf\n\nthen presuming the file name is the same as the internal full face name, you can reference it in fop with:\n\n  font-family=\"MyriadPro-BlackCondIt\" font-weight=\"normal\" font-style=\"normal\"\n\nNote the use of \"normal\" weight and slant, even though this is a black condensed oblique face. Fop appears to always register these fully-qualified font faces as normal/normal, so if you want to specify an exact face you need to give a normal weight and slant.\n\nThis is really only a workaround for the inability to properly use font-stretch, however it'll be useful for people who have small-capitals or other specialized font faces they want to be able to explicitly name.\n\nIf you're not sure what fop expects your font to be called, turn on trace logging in fop and search the log for \"registering\" (case insensitive) to find font names."}, {"count": 5, "tags": [], "text": "Please flag as importance: Enhancement", "attachment_id": null, "id": 152181, "creator": "ringerc@ringerc.id.au", "time": "2011-12-15T07:25:44Z", "bug_id": 52290, "creation_time": "2011-12-15T07:25:44Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 52290, "attachment_id": null, "is_private": false, "id": 157419, "time": "2012-04-07T01:42:40Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:42:40Z", "text": "resetting P2 open bugs to P3 pending further review"}, {"count": 7, "tags": [], "bug_id": 52290, "text": "use explicit font configuration to specify distinct font family names; if a patch is provided that supports a more general solution, then it will be considered for application;", "id": 157625, "time": "2012-04-07T09:49:13Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T09:49:13Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "text": "batch transition resolved+wontfix to closed+wontfix", "attachment_id": null, "id": 158563, "creator": "gadams@apache.org", "time": "2012-04-30T00:14:41Z", "bug_id": 52290, "creation_time": "2012-04-30T00:14:41Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 52290, "text": "batch transition resolved+wontfix to closed+wontfix; if you believe this remains a bug and can demonstrate it with appropriate input FO file and output PDF file (as applicable), then you may reopen", "id": 158608, "time": "2012-04-30T00:17:13Z", "creator": "gadams@apache.org", "creation_time": "2012-04-30T00:17:13Z", "is_private": false, "attachment_id": null}]