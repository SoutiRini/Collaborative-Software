[{"count": 0, "tags": [], "bug_id": 19144, "text": "I configured Apache 2.0.45 with following commandline:\n\n./configure --enable-layout=Edelmann --enable-mods-shared=all --enable-ssl\n--enable-proxy --enable-proxy-http -enable-proxy-ftp --enable-proxy-connect\n--enable-suexec\n\nthen I compiled the source and did install the binaries. I did not get any\nerrors so far.\n\nstarting apache with ./apachectl start works with out problems.\nstarting apache with ./apachectl startssl I get a segmentation fault.\n\nDoing the same with Apache 2.0.44 source everything works.", "id": 35489, "time": "2003-04-18T09:45:14Z", "creator": "oliver.edelmann@web.de", "creation_time": "2003-04-18T09:45:14Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 19144, "attachment_id": null, "id": 35613, "time": "2003-04-18T22:35:57Z", "creator": "trawick@apache.org", "creation_time": "2003-04-18T22:35:57Z", "is_private": false, "text": "please post a backtrace for the segmentation fault and, if you can determine,\nwhich aspect of your SSL configuration is required for reproducing\nthe segfault"}, {"count": 2, "attachment_id": null, "bug_id": 19144, "text": "Same here.\nI have a http/ssl config ok with 2.0.44. I've updated to 2.0.45 and I get a\nsegfault too.", "id": 35644, "time": "2003-04-19T23:14:41Z", "creator": "mlubrano@sourcemage.org", "creation_time": "2003-04-19T23:14:41Z", "tags": [], "is_private": false}, {"attachment_id": 5908, "tags": [], "creator": "mlubrano@sourcemage.org", "text": "Created attachment 5908\nstrace output", "count": 3, "id": 35645, "time": "2003-04-19T23:17:35Z", "bug_id": 19144, "creation_time": "2003-04-19T23:17:35Z", "is_private": false}, {"count": 4, "tags": [], "text": "Mat, thanks for the strace.  Unfortunately, it is an strace of apachectl only\nand not of httpd.\n\nAdding -f to the strace invocation (as in \"strace -f apachectl args\") should do\nthe trick.\n\nThe strace output is definitely useful, but a backtrace from the segfault (i.e.,\ngdb's display of the sequence of function calls up until the point of the\nsegfault) is usually the most valuable piece of information until the specific\nproblem area is identified.\n\ne.g.,\n\ngdb /path/to/installed/httpd\n(gdb) r -DONE_PROCESS\n\n[now it runs for a while and you see a gdb message saying it got SIGSEGV]\n\n(gdb) where\n\n[here is the key backtrace output]\n\n(gdb) quit\n\nYou can also get the backtrace if Apache is dumping core:\n\ngdb /path/to/installed/httpd /path/to/core\n(gdb) where\n\n[here is the key backtrace output]\n\n(gdb) quit\n\n", "is_private": false, "id": 35658, "creator": "trawick@apache.org", "time": "2003-04-20T13:08:57Z", "bug_id": 19144, "creation_time": "2003-04-20T13:08:57Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 19144, "attachment_id": null, "id": 35659, "time": "2003-04-20T13:09:57Z", "creator": "trawick@apache.org", "creation_time": "2003-04-20T13:09:57Z", "is_private": false, "text": "oops, since you're using \"apachectl startssl\" the way to start it in gdb would be\n\nr -DONE_PROCESS -DSSL\n"}, {"count": 6, "tags": [], "bug_id": 19144, "attachment_id": null, "text": "Ok, here you are.", "id": 35660, "time": "2003-04-20T13:44:00Z", "creator": "mlubrano@sourcemage.org", "creation_time": "2003-04-20T13:44:00Z", "is_private": false}, {"count": 7, "attachment_id": 5909, "bug_id": 19144, "text": "Created attachment 5909\nstrace_-f_aapchectl_start.log", "id": 35661, "time": "2003-04-20T13:44:30Z", "creator": "mlubrano@sourcemage.org", "creation_time": "2003-04-20T13:44:30Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "bug_id": 19144, "attachment_id": 5910, "text": "Created attachment 5910\nstrace_-f_aapchectl_startssl.log", "id": 35662, "time": "2003-04-20T13:44:56Z", "creator": "mlubrano@sourcemage.org", "creation_time": "2003-04-20T13:44:56Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 19144, "text": "Created attachment 5911\ngdb.log", "id": 35663, "time": "2003-04-20T13:45:13Z", "creator": "mlubrano@sourcemage.org", "creation_time": "2003-04-20T13:45:13Z", "is_private": false, "attachment_id": 5911}, {"count": 10, "tags": [], "bug_id": 19144, "attachment_id": 5912, "text": "Created attachment 5912\ncompile log", "id": 35664, "time": "2003-04-20T13:46:02Z", "creator": "mlubrano@sourcemage.org", "creation_time": "2003-04-20T13:46:02Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "mlubrano@sourcemage.org", "is_private": false, "count": 11, "id": 35665, "time": "2003-04-20T14:01:31Z", "bug_id": 19144, "creation_time": "2003-04-20T14:01:31Z", "text": "FYI this bug may be related to http://bugs.sourcemage.org/show_bug.cgi?id=3165"}, {"count": 12, "tags": [], "bug_id": 19144, "attachment_id": null, "id": 35666, "time": "2003-04-20T15:03:58Z", "creator": "trawick@apache.org", "creation_time": "2003-04-20T15:03:58Z", "is_private": false, "text": "For the problem we now have doc for:\n\nHere's the crucial line from your strace -f output:\n\n[pid  4443] open(\"/usr/logs/ssl_mutex.4443\", O_WRONLY|O_CREAT|O_EXCL, 0644) = -1\nENOENT (No such file or directory)\n\n(And the gdb output points at the same problem.)\n\n/usr/logs doesn't exist, and there was an APR bug I fixed in the last couple of\ndays that led to a segfault when an attempt was made to create a file-based\nmutex in a directory that did not exist.\n\nThe solution for your config is to change SSLMutex directive to specify a\ndirectory which does not exist.\n\nThe related APR code is now fixed so that an appropriate message is displayed.\n\nThanks for your report, and thanks for using Apache!\n\nFor oliver.edelmann@web.de (Oliver Edelmann):\n\nIt is possible that you are experiencing a different problem.  If fixing your\nSSLMutex directive doesn't work around the segfault, then please submit the same\ntype of doc and re-open the PR.\n\nThanks!\n\n\n*** This bug has been marked as a duplicate of 19036 ***"}]