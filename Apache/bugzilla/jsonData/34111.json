[{"count": 0, "tags": [], "bug_id": 34111, "attachment_id": null, "id": 46937, "time": "2005-03-21T19:37:09Z", "creator": "sean.foreman@ebenx.com", "creation_time": "2005-03-21T19:37:09Z", "is_private": false, "text": "I looked everywhere. No one appears to be using this feature and it appears to\nnot be working as advertised. If I put a environment element in the\nglobalnamingresources, it doesn't show up in a webapp. \n\nI shouldn't need to use a ResourceLink. \n\nUsing the environment variable given in the server.xml:\n\n<Environment name=\"simpleValue\" type=\"java.lang.Integer\" value=\"30\"/>\n\nCode snippet to access it:\n\n  public void service(HttpServletRequest req, HttpServletResponse res)\n  //  public void secureService(HttpServletRequest req, HttpServletResponse res,\nUser user)\n\n  \tthrows ServletException ,IOException{\n  \t\n  \tContext x = null;\n  \tContext x2 = null;\n  \tInteger env = null;\n  \ttry {\n  \t\tx = new InitialContext();\n  \t} catch (Exception ex) {System.out.println(\"error on x\");}\n  \ttry {\n  \t\tx2 = (Context) x.lookup(\"java:comp/env\");\n  \t\tNamingEnumeration enum = x.list(\"java:comp/env\");\n                // simpleValue should show up here, but it doesn't\n  \t\twhile (enum.hasMore()) {\n  \t\t\tSystem.out.println(\"env var: \" + enum.next().toString());\n  \t\t}\n  \t} catch (Exception ex) {System.out.println(\"error on x2\");}\n  \ttry {\n  \t  \tenv = (Integer) x2.lookup(\"simpleValue\");\n  \t  \ttry {\n  \t  \t\tSystem.out.println(\"env var:\" + env.toString());\n  \t  \t} catch (Exception ex) {System.out.println(\"error on env print\");}\n  \t} catch (Exception ex) {System.out.println(\"error on env\" + ex.toString());}\n\nTomcat Error:\n\nerror on envjavax.naming.NameNotFoundException: Name simpleValue is not bound in\n this Context"}, {"count": 1, "text": "The 4.1.31 docs are not as clear as they should be on this. The docs have\nalready been updated to include the following statement at the beginning of the\nGlobalNamingResources page:\n\n<quote>\nThese resources are listed in the server's global JNDI resource context. This\ncontext is distinct from the per-web-application JNDI contexts described in the\nJNDI Resources HOW-TO. The resources defined in this element are not visible in\nthe per-web-application contexts unless you explicitly link them with\n<ResourceLink> elements.\n</quote>\n\nIn short, you *do* need to use a ResourceLink.\n\n*** This bug has been marked as a duplicate of 27158 ***", "creator": "markt@apache.org", "attachment_id": null, "id": 17002, "time": "2005-03-23T00:04:21Z", "bug_id": 34111, "creation_time": "2005-03-23T00:04:21Z", "tags": [], "is_private": false}]