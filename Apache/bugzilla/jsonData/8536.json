[{"count": 0, "tags": [], "bug_id": 8536, "attachment_id": null, "text": "Hi, I had a problem building the worker MPM with gcc 3.0.3 on Tru64 5.1A.\nI specified\n\n\t./configure --with-mpm=worker\n\nbut each time it would default to prefork instead. I got around this by adding\n\"-pthreads\" to the CPPFLAGS in front of the configure\n\n\tCPPFLAGS=\"-pthread\" ./configure --with-mpm=worker\n\nThat works ok. Would you please add this to the compile notes for Tru64.\nthanks -- Dean", "id": 14807, "time": "2002-04-26T00:05:01Z", "creator": "guenther@wsu.edu", "creation_time": "2002-04-26T00:05:01Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "jerenkrantz@apache.org", "text": "If -pthread was required for compilation/linking/execution of the POSIX\nthreading library on your system, it should have been correctly determined by\nAPR_PTHREADS_CHECK in apr/build/apr_threads.m4 (see around line 119).\n\nIt might be possible that APR_PTHREADS_CHECK_COMPILE passes without any\narguments.  Can you add the following around line 96:\necho $pthreads_working\n\nYou'll have to re-run buildconf to generate a new configure file.\n\nBased on what you say, the output should be:\nno\nno\nyes\n\nI'm guessing it'll just be:\nyes\n\n(i.e. it passes simply with a yes - no arguments are needed for pthreads.)\n\nSo, what error do you see when you don't have -pthread?  \n\nAlso, can you provide your output of config.guess - if we have to override your\ncheck, I need to know your host-tuple so we can add it to apr_hints.m4.\n\nNote to be pedantic: CPPFLAGS is the incorrect variable, you want CFLAGS. \nCPPFLAGS dictates the options to your preprocessor - this flag should be a\ncompiler option - hence CFLAGS.\n\nThanks for using Apache!", "id": 14947, "time": "2002-04-28T08:09:09Z", "bug_id": 8536, "creation_time": "2002-04-28T08:09:09Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "guenther@wsu.edu", "text": "i'll rebuild and see what the echo gives.\n\nwithout the \"-pthread\" in there, it does not actually give an error message that\nI can detect. However, it forces \"prefork\" and does not allow \"worker\". This is\nshown by doing\n\n\t./httpd -l\n\nand seeing that prefork.c was built instead of worker.c\n\n-- dean", "id": 15051, "time": "2002-04-29T15:32:14Z", "bug_id": 8536, "creation_time": "2002-04-29T15:32:14Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 8536, "attachment_id": null, "text": "I added an echo in apr/build/apr_threads.m4 after line 96. \n\n\n  ], pthreads_working=\"no\" )\necho CHECK: $pthreads_working\n])dnl\n\nThe \"CHECK:\" echo did not show up.\nSo I tried it again after line 97 \n\n  ], pthreads_working=\"no\" )\n])dnl\necho CHECK: $pthreads_working\n\nand again, the \"CHECK\" echo did not show up. I've put a copy of the build at:\n\nhttp://www.wsu.edu/~dean/apache_build.log", "id": 15249, "time": "2002-05-01T15:49:03Z", "creator": "guenther@wsu.edu", "creation_time": "2002-05-01T15:49:03Z", "is_private": false}, {"count": 4, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "id": 24737, "time": "2002-10-17T02:35:13Z", "bug_id": 8536, "creation_time": "2002-10-17T02:35:13Z", "is_private": false, "text": "[This is a mass bug update.]\nThis bug reports a problem in an older version of Apache 2.\nCould you please update to the most recent version and see\nif you can reproduce this problem.  If the bug still exists,\nplease update the bug with the latest version number.  If \nthe bug no longer exists, please close the bug report.\n\nSorry for this impersonal response, but we get many more bug\nreports than our volunteers can keep up with.\nThanks for using Apache!"}, {"count": 5, "tags": [], "bug_id": 8536, "attachment_id": null, "id": 25558, "time": "2002-11-02T20:18:47Z", "creator": "slive@apache.org", "creation_time": "2002-11-02T20:18:47Z", "is_private": false, "text": "[This is a mass bug update.] [Resolve-20021102]\nNo response from submitter; assuming issue is resolved.\nIf the problem still exists in the lastest version,\nplease reopen this report and update appropriately."}, {"count": 6, "tags": [], "bug_id": 8536, "attachment_id": null, "id": 74733, "time": "2005-05-11T20:33:31Z", "creator": "anenni@isisw.com", "creation_time": "2005-05-11T20:33:31Z", "is_private": false, "text": "Hi.\nSame problem trying to compile apache 2.0.54 on Tru64 UNIX 5.1A (patch-kit 6)\n\nHere's an extract from config log:\n\nchecking which MPM to use... worker\nThe currently selected MPM requires threads which your system seems to lack\nchecking checking for replacement... prefork selected"}, {"count": 7, "tags": [], "bug_id": 8536, "text": "So, APR is not detecting threads correctly on your platform?", "id": 75885, "time": "2005-06-03T01:53:12Z", "creator": "chip@force-elite.com", "creation_time": "2005-06-03T01:53:12Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "creator": "anenni@isisw.com", "attachment_id": null, "id": 76218, "time": "2005-06-09T17:40:17Z", "bug_id": 8536, "creation_time": "2005-06-09T17:40:17Z", "is_private": false, "text": "(In reply to comment #7)\n> So, APR is not detecting threads correctly on your platform?\n\nYes, compile log seems clear about that."}, {"count": 9, "tags": [], "bug_id": 8536, "text": "The build log referenced above couldn't find pthread.h:\n\nchecking for pthread.h... (cached) no\n\nso it's not suprising threads weren't enabled.\n\nPlease attach the config.log produced from building 0.9.6 on this platform.  Or\nsrclib/apr/config.log if you're building httpd-2.0.54 from the tarball.  Remove\nany config.cache's first.", "id": 76232, "attachment_id": null, "creator": "jorton@redhat.com", "creation_time": "2005-06-09T22:33:53Z", "time": "2005-06-09T22:33:53Z", "is_private": false}, {"count": 10, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "id": 85503, "time": "2006-02-07T07:31:52Z", "bug_id": 8536, "creation_time": "2006-02-07T07:31:52Z", "is_private": false, "text": "  Apparently bug 20338 includes some local build patches, including specifying\n  -pthread in the CFLAGS per Mr. Trawick.  would be nice to close these two\n  bugs one of these days (no Tru64 box here to play with, sorry.)"}, {"count": 11, "tags": [], "creator": "wrowe@apache.org", "text": "Jeff says he has no patches left to commit, which begs the quesition if this\nbug is still present?", "id": 87083, "time": "2006-03-21T21:04:37Z", "bug_id": 8536, "creation_time": "2006-03-21T21:04:37Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "text": "Mass reassign the 44 open apr-bugs to apr bug list", "attachment_id": null, "bug_id": 8536, "id": 93838, "time": "2006-09-19T19:54:38Z", "creator": "wrowe@apache.org", "creation_time": "2006-09-19T19:54:38Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 8536, "attachment_id": null, "text": "No response from reporter; please reopen with requested details if this is\nstill an issue.", "id": 93863, "time": "2006-09-19T20:24:18Z", "creator": "wrowe@apache.org", "creation_time": "2006-09-19T20:24:18Z", "is_private": false}]