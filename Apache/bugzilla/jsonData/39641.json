[{"count": 0, "tags": [], "bug_id": 39641, "is_private": false, "text": "Flash applications use amf protocol to communicate with the web service. Jmeter\ncan not record amf requests. This primarily because jmeter treats the http\nrequest as string of parametername value pairs. So the following must be necessary:\n1. Ability to record amf requests.\n2. Ability to save them in the test plan.", "id": 89382, "time": "2006-05-23T10:34:23Z", "creator": "kumara.subrahmanya@gmail.com", "creation_time": "2006-05-23T10:34:23Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 39641, "text": "Please provide more details of the protocol, and it will be considered for a \nfuture release.\n\nAre you saying that JMeter cannot currently generate AMF requests, even if you \ncreate the HTTP Sampler yourself?", "id": 89385, "time": "2006-05-23T11:19:03Z", "creator": "sebb@apache.org", "creation_time": "2006-05-23T11:19:03Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "alf@i100.no", "text": "Created attachment 19991\nTest plan with recorded amf request\n\nI think this bug can be closed as \"Fixed\".\n\nAttached is a test plan that I recorded using the HTTP Proxy server.\nI then changed the value of the \"User-Agent\" of the derived browser headers to\n\"JMeter 2.2\".\n\nOpen http://www.themidnightcoders.com/examples/flash-application-activation.htm\nin your browser, and then you will see the number of invocations of that\nservice.\nNow run the testplan, and then go back to your browser and hit \"reload\", and\nyou will see that the number for \"JMeter 2.2\" has increased by 10, which was\nthe number of requests the testplan executed.\n\nThis proves that the HTTP Proxy is able to record amf requests, and that the\nHTTP Sampler is able to send such requests. I have also tested that it works\nwith HTTP Request HTTP Client sampler.", "id": 101875, "time": "2007-04-18T06:40:13Z", "bug_id": 39641, "creation_time": "2007-04-18T06:40:13Z", "is_private": false, "attachment_id": 19991}, {"count": 3, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "is_private": false, "id": 101892, "time": "2007-04-18T12:49:17Z", "bug_id": 39641, "creation_time": "2007-04-18T12:49:17Z", "text": "Thanks!\n\nPlease re-open if the problem has not been solved."}, {"count": 4, "tags": [], "bug_id": 39641, "attachment_id": 22011, "is_private": false, "id": 117009, "time": "2008-05-27T07:31:19Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-27T07:31:19Z", "text": "Created attachment 22011\nAMF content was not saved by Proxy Server"}, {"count": 5, "attachment_id": null, "bug_id": 39641, "text": "I tried to record AMF requests using Proxy Server but without success. The request was recorded but without the content as you can see in the attached image. So, without the content, it is not possible to simulate these POST requests.\n\nThanks.", "id": 117010, "time": "2008-05-27T07:32:30Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-27T07:32:30Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 39641, "text": "We'll need more information to understand this.\n\nAre there any messages in jmeter.log?\n\nCan you provide exact details of how to generate the error?\nIs there there public server we can test against?\nOr an easy way to set up a local test?\n", "id": 117012, "time": "2008-05-27T07:51:28Z", "creator": "sebb@apache.org", "creation_time": "2008-05-27T07:51:28Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "creator": "brunogh@gmail.com", "attachment_id": null, "text": "It was a local test, but the thing was pretty simple:\n\n1 - I have created a Proxy Server in JMeter and configured Mozilla to use it.\n2 - Than I have accessed a default BlazeDS application (http://www.brightworks.com/flex_ability/?p=73) that runs in Tomcat and it is part of Flex demo. This application uses AMF (binary protocol over HTTP) to communicate.\n3 - I looked in the Thread Group (image I have sent) and the HTTP POST request was saved but without the binary content.\n\nI think there are more people with this problem trying some work arounds: http://90kts.com/blog/2008/performance-testing-flex-remoting-amf-with-jmeter/ and http://note19.com/2008/05/06/how-to-use-jmeter-to-load-test-flex-applications/\n\nThanks.", "id": 117013, "time": "2008-05-27T08:03:41Z", "bug_id": 39641, "creation_time": "2008-05-27T08:03:41Z", "is_private": false}, {"count": 8, "tags": [], "text": "Thanks for the info.\n\nWere there any messages in the JMeter log file?\nOr the console window?\n\nJust curious - I would expect some error to be generated.\n\nI think the way to do this is to save the binary data in a file and add the file details to the POST request, as suggested in one of the links.\n\nHowever, first there needs to be a reliable way to detect when this is needed; hopefully this can be determined from the headers.", "is_private": false, "id": 117015, "creator": "sebb@apache.org", "time": "2008-05-27T08:27:07Z", "bug_id": 39641, "creation_time": "2008-05-27T08:27:07Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 39641, "attachment_id": null, "text": "(In reply to comment #8)\n> Thanks for the info.\n\nThank you for helping! I have noticed that I am using an old version, should I try the last RC of version 2.3?\n\n> \n> Were there any messages in the JMeter log file?\n> Or the console window?\n> \n> Just curious - I would expect some error to be generated.\n>\n\nI have attached the log file. There are some messages.\n \n> I think the way to do this is to save the binary data in a file and add the\n> file details to the POST request, as suggested in one of the links.\n\nYes, this is the way. But would it be possible to do directly with JMeter Server Proxy, bcause otherwise would be too much hand work.\n\n> \n> However, first there needs to be a reliable way to detect when this is needed;\n> hopefully this can be determined from the headers.\n\nAMF has application/x-amf in the content type of a response.\n\n> \n\nThanks.\n", "id": 117031, "time": "2008-05-27T10:07:38Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-27T10:07:38Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 39641, "is_private": false, "text": "Created attachment 22016\nJMeter log file", "id": 117032, "time": "2008-05-27T10:09:06Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-27T10:09:06Z", "attachment_id": 22016}, {"count": 11, "attachment_id": null, "bug_id": 39641, "text": "Sorry,I have just tried RC4 and  it seems that Proxy Server is working, it got the AMF content. I let you know if anything happens wrongly, I will put the tests to run.\nThank you very much!", "id": 117033, "time": "2008-05-27T10:24:17Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-27T10:24:17Z", "tags": [], "is_private": false}, {"count": 12, "tags": [], "bug_id": 39641, "is_private": false, "text": "The log file shows that you are not running a release build.\n\nThe current release is 2.3.1.\n\nThe log also shows several errors relating to org.openamf classes. \n\nHas the JMeter application been updated to add these?\nIt looks as though the proxy has somehow been integrated with these new\nclasses; if so, then perhaps you should discuss the problem with whoever\nupdated the code.", "id": 117034, "time": "2008-05-27T10:34:25Z", "creator": "sebb@apache.org", "creation_time": "2008-05-27T10:34:25Z", "attachment_id": null}, {"count": 13, "attachment_id": null, "bug_id": 39641, "is_private": false, "id": 117036, "time": "2008-05-27T11:31:56Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-27T11:31:56Z", "tags": [], "text": "For some reason when I try to run the Sampler with the AMF collected previously, it happens a OutOfMemoryError in Tomcat, because BlazeDS (Flex Bridge that handle AMF) tries to deserialize the content and probably the binary format is wrong.\n\nI am not able to see the Response Data (from View Result Tree Listener) in JMeter 2.3.1, just in 2.3.1 RC4, as the pic attached. Probably this problem could be due to some wrong stuff when the protocol is being saved by the Proxy, because I have tried to sniff using another tool, saving the AMF and attaching in the POST request and worked fine.\n\nThanks in advance.\n"}, {"count": 14, "attachment_id": 22017, "bug_id": 39641, "is_private": false, "id": 117037, "time": "2008-05-27T11:33:55Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-27T11:33:55Z", "tags": [], "text": "Created attachment 22017\nWrong Response Data when AMF collected by proxy is POSTed"}, {"count": 15, "tags": [], "bug_id": 39641, "attachment_id": null, "text": "Not being able to display the data in 2.3.1 is a known bug: 44011.\nSee the bug for details of a work-round.", "id": 117041, "time": "2008-05-27T12:21:05Z", "creator": "sebb@apache.org", "creation_time": "2008-05-27T12:21:05Z", "is_private": false}, {"count": 16, "attachment_id": null, "bug_id": 39641, "is_private": false, "id": 117042, "time": "2008-05-27T12:27:35Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-27T12:27:35Z", "tags": [], "text": "Yes. Thanks for letting me know about this bug, but the problem around AMF is still ocuring.\n\nQuoting last entry: \"For some reason when I try to run the Sampler with the AMF collected previously, it happens a OutOfMemoryError in Tomcat, because BlazeDS (Flex Bridge that handle AMF) tries to deserialize the content and probably the\nbinary format is wrong. Probably this problem could be due to some wrong stuff when the protocol is being saved by the Proxy, because I have tried to sniff using another tool, saving the AMF and attaching in the POST request and worked fine.\"\n\nDo you know if AMF is being treated as a binary protocol and not only string stuff? Any ideas where is it in the JMeter code, because I tried to search without success. Should I send an email to dev list?\n\nThanks in advance."}, {"count": 17, "attachment_id": null, "bug_id": 39641, "text": "(In reply to comment #16)\n> Yes. Thanks for letting me know about this bug, but the problem around AMF is\n> still ocuring.\n> \n> Quoting last entry: \"For some reason when I try to run the Sampler with the AMF\n> collected previously, it happens a OutOfMemoryError in Tomcat, because BlazeDS\n> (Flex Bridge that handle AMF) tries to deserialize the content and probably the\n> binary format is wrong. Probably this problem could be due to some wrong stuff\n> when the protocol is being saved by the Proxy, because I have tried to sniff\n> using another tool, saving the AMF and attaching in the POST request and worked\n> fine.\"\n\nWell, that's what you will need to do for now.\n\n> Do you know if AMF is being treated as a binary protocol and not only string\n> stuff? Any ideas where is it in the JMeter code, because I tried to search\n> without success.\n\nJMeter proxy does not currently support binary data.\n\n> Should I send an email to dev list?\n\nThe Bugzilla updates already get sent there, so no need to duplicate the information.", "id": 117043, "time": "2008-05-27T12:40:12Z", "creator": "sebb@apache.org", "creation_time": "2008-05-27T12:40:12Z", "tags": [], "is_private": false}, {"count": 18, "attachment_id": null, "bug_id": 39641, "text": "Thank you very much. I think I have now found the answer about JMeter not supporting binary protocols. Do you know how difficult would be to implement that and how to do it? Otherwise I will have to make that workarounds in the previous links.\n\nThanks! ", "id": 117044, "time": "2008-05-27T12:47:08Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-27T12:47:08Z", "tags": [], "is_private": false}, {"count": 19, "tags": [], "bug_id": 39641, "text": "It will be very easy if someone provide a patch and test cases ;-)\n\nOtherwise I don't know...", "id": 117048, "time": "2008-05-27T14:00:56Z", "creator": "sebb@apache.org", "creation_time": "2008-05-27T14:00:56Z", "is_private": false, "attachment_id": null}, {"count": 20, "tags": [], "bug_id": 39641, "is_private": false, "text": "I've had a further look, and it seems it may not be all that difficult to do.\n\nWatch this space...", "id": 117089, "time": "2008-05-28T12:06:19Z", "creator": "sebb@apache.org", "creation_time": "2008-05-28T12:06:19Z", "attachment_id": null}, {"count": 21, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "is_private": false, "id": 117094, "time": "2008-05-28T16:19:52Z", "bug_id": 39641, "creation_time": "2008-05-28T16:19:52Z", "text": "SVN updated:\n\nURL: http://svn.apache.org/viewvc?rev=661141&view=rev\nLog:\nBugs 44808 & 39641 - Proxy support for binary requests\n\nThe night build has the fix - please report any problems."}, {"count": 22, "tags": [], "bug_id": 39641, "attachment_id": null, "is_private": false, "id": 117118, "time": "2008-05-29T06:26:35Z", "creator": "brunogh@gmail.com", "creation_time": "2008-05-29T06:26:35Z", "text": "Awesome! Worked perfeclty in the first thats I have made! Congratulations! JMeter rocks!"}]