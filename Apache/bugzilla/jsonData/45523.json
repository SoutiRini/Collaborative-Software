[{"count": 0, "attachment_id": null, "creator": "timo.kinnunen@gmail.com", "text": "Increasing outputBuffer has no effect when an exception occurs when large amount of output has already been written.\n\nI have a JSP-file which contains the following lines:\n\n<jsp:include page=\"index2.html\"></jsp:include>\n<u:dao beanVar=\"var\" foo=\"1\"></u:dao>\n\nu:dao tag throws an NPE, which is caught in a filter and then forwarded to an error JSP-page. Despite this, the browser receives partial contents of index2.html. If the line order is reversed, the browser correctly receives the contents of the error JSP. The index2.html size 36Kb.\n\nI've tried these two Connector definitions: \n\n    <Connector connectionTimeout=\"20000\" port=\"8080\" \n    protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n    redirectPort=\"8443\" socketBuffer=\"81920\" URIEncoding=\"UTF-8\"/>\n\n    <Connector connectionTimeout=\"20000\" port=\"8080\" \n    protocol=\"HTTP/1.1\" \n    redirectPort=\"8443\" URIEncoding=\"UTF-8\" socketBuffer=\"1280000\"/>", "id": 119226, "time": "2008-08-01T08:48:16Z", "bug_id": 45523, "creation_time": "2008-08-01T08:48:16Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "text": "The outputBuffer on the connector is not related to the output buffer for a JSP.\n\nPlease use the users list for assistance.", "attachment_id": null, "bug_id": 45523, "id": 119227, "time": "2008-08-01T09:00:53Z", "creator": "markt@apache.org", "creation_time": "2008-08-01T09:00:53Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 45523, "attachment_id": null, "is_private": false, "id": 119229, "time": "2008-08-01T09:59:55Z", "creator": "timo.kinnunen@gmail.com", "creation_time": "2008-08-01T09:59:55Z", "text": "Thanks, for posterity, the correct answer seems to be to do\n\n    response.setBufferSize(128000);\n\nfirst thing in the Filter.\n\nAlso, may I respectfully suggest that documentation in e.g. http://tomcat.apache.org/tomcat-6.0-doc/config/http.html be clarified as to what is affected when setting the socketBuffer-parameter."}]