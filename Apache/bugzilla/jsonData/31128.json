[{"count": 0, "attachment_id": null, "bug_id": 31128, "text": "When any CacheDisable directive is used, no content whatsoever is cached by\nmod_cache.\n\nBug found in 2.0.51-rc2, present in 2.0-HEAD, not present in 2.0.50. Found on\nSolaris 8/SPARC/gcc, verified on Fedora Core 2/Athlon/gcc.\n\nSteps to reproduce:\n- Use 2.0.51-rc2, including mod_cache, all modules built static, no third party\nmodules, built from pristine sources from httpd.apache.org/dev/dist/\n- Use configuration directives:\nCacheEnable disk /\nCacheRoot /cache\n- Content will be cached normally\n- Clean out cache and add directive: CacheDisable /foo/\n- No content at all is cached anymore, including content not under /foo\n\nSome debugging shows that the urllen field of struct cache_disable is always 0,\ncausing the CacheDisable test to always succeed, causing mod_cache to always\ndecline to cache (this all in cache_util.c). Strangely enough, the urllen does\nappear to be set correctly when the config file is parsed (mod_cache.c).\n\nRemoving the urllen field from structs cache_enable and cache_disable, and\nreplacing references to the field with strlen() calls fixes the problem.", "id": 63234, "time": "2004-09-08T19:12:18Z", "creator": "rmc@dds.nl", "creation_time": "2004-09-08T19:12:18Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "urkle@outoforder.cc", "attachment_id": null, "id": 65267, "time": "2004-10-18T00:08:04Z", "bug_id": 31128, "creation_time": "2004-10-18T00:08:04Z", "is_private": false, "text": "Yup I am encoutering this bug too in 2.0.52..\n\nThe issue is in ap_cache_providers_list when it iterates through the \"disabled\"\nurls, all the urllen's are 0 in line 86 of cache_control.c.\n\nThey are set correclt when tehy are assigned in the the command handler.."}, {"count": 2, "tags": [], "text": "Created attachment 13129\nPatch to fix the issue", "attachment_id": 13129, "bug_id": 31128, "id": 65268, "time": "2004-10-18T00:49:16Z", "creator": "urkle@outoforder.cc", "creation_time": "2004-10-18T00:49:16Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 31128, "attachment_id": null, "text": "Patch applied to CVS Head.", "id": 65269, "time": "2004-10-18T00:56:57Z", "creator": "chip@force-elite.com", "creation_time": "2004-10-18T00:56:57Z", "is_private": false}, {"count": 4, "tags": [], "creator": "minfrin@apache.org", "attachment_id": null, "text": "Patch backported to httpd v2.0.53.\n", "id": 65598, "time": "2004-10-23T13:46:15Z", "bug_id": 31128, "creation_time": "2004-10-23T13:46:15Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 31128, "attachment_id": null, "text": "*** Bug 32849 has been marked as a duplicate of this bug. ***", "id": 69024, "time": "2004-12-28T03:11:31Z", "creator": "chip@force-elite.com", "creation_time": "2004-12-28T03:11:31Z", "is_private": false}]