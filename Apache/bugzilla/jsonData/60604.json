[{"count": 0, "tags": [], "creator": "cwidger@gmail.com", "attachment_id": null, "id": 196169, "time": "2017-01-19T01:24:43Z", "bug_id": 60604, "creation_time": "2017-01-19T01:24:43Z", "is_private": false, "text": "I'm trying to setup a custom 503 page for when system maintenance is required.My server is Apache 2.4.18 (Ubuntu). Everything works as expected, except the return code for my error page is 200 instead of 503. I'm using a config that worked on old servers and there's lot of examples on google that have the same issue on my server.\n\nThis is within a Vhost and the server is running a few other sites.\n\nHere's the config:\nRewriteEngine On\n\nRewriteCond \"/maintenance.trigger\" -f\nRewriteCond %{REQUEST_URI} !=/maintenance.trigger\nRewriteRule . - [R=503]\n\n\nand this is what I get from curl:\nHTTP/1.1 200 OK\nDate: Thu, 19 Jan 2017 00:53:26 GMT\nServer: Apache\nLast-Modified: Wed, 18 Jan 2017 22:20:09 GMT\nContent-Type: text/html\nX-Content-Digest: 8fef50fc2724187fd362f2412e036e2853efa674\nAge: 0\nX-Rack-Cache: stale, valid, store\nContent-Length: 17\nCache-Control: max-age=2592000\nExpires: Sat, 18 Feb 2017 00:53:26 GMT\n\ntest 503 page\n\n\nI've tried this a a few different ways and noticed that:\nErrorDocumet 503 \"test 503 from config file\"\n\ndoes the right things, unfortunately I would like to have a nicer error page than what can be included in a config file.\n\nI also tried with \"ProxyErrorOverride On\" but that had no effect.\n\n\nthank you"}, {"count": 1, "tags": [], "text": "Works for me. Maybe it's related to other config / whatever set all of those extra headers in the response (proxy or some application?)", "attachment_id": null, "bug_id": 60604, "id": 196170, "time": "2017-01-19T01:38:23Z", "creator": "covener@gmail.com", "creation_time": "2017-01-19T01:38:23Z", "is_private": false}, {"count": 2, "tags": [], "creator": "cwidger@gmail.com", "text": "Some more information. Lower down in my configuration I have a RewriteRule that points to a \"balancer://\". I think this is where the 200 and cache headers are coming from. If I add:\n\nRewriteCond %{REQUEST_URI} !=/maintenance.trigger\n\nbefore:\nRewriteRule . - balancer://mybalancer\n\nI get a 503. I was thinking that hitting a 503 would stop all processing, but it might not work like that.", "id": 196172, "time": "2017-01-19T03:52:38Z", "bug_id": 60604, "creation_time": "2017-01-19T03:52:38Z", "is_private": false, "attachment_id": null}]