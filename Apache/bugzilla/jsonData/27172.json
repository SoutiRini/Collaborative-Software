[{"count": 0, "tags": [], "bug_id": 27172, "attachment_id": null, "id": 52817, "time": "2004-02-23T18:29:06Z", "creator": "kimmylin@cs.umb.edu", "creation_time": "2004-02-23T18:29:06Z", "is_private": false, "text": "> I am simply installing httpd-2.0.48 on Solaris 2.8. I gave the following\n> commands. \n> \n> % ./configure --prefix=/tools/apache-2.0.48 --enable-module=so\n> % make\n> \n> then got this error\n> \n> proc_mutex.c: In function `proc_mutex_proc_pthread_create':\n> proc_mutex.c:372: `PTHREAD_MUTEX_ROBUST_NP' undeclared (first use in this\n> function)\n> proc_mutex.c:372: (Each undeclared identifier is reported only once\n> proc_mutex.c:372: for each function it appears in.)\n> proc_mutex.c:379: `PTHREAD_PRIO_INHERIT' undeclared (first use in this\n> function)"}, {"count": 1, "tags": [], "creator": "kimmylin@cs.umb.edu", "attachment_id": 10500, "text": "Created attachment 10500\nconfig.log under srlib/apr", "id": 52818, "time": "2004-02-23T18:32:16Z", "bug_id": 27172, "creation_time": "2004-02-23T18:32:16Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 27172, "text": "Created attachment 10501\nOutput running ./configure", "id": 52819, "time": "2004-02-23T18:32:56Z", "creator": "kimmylin@cs.umb.edu", "creation_time": "2004-02-23T18:32:56Z", "is_private": false, "attachment_id": 10501}, {"count": 3, "tags": [], "bug_id": 27172, "text": "If you run configure like\n\n  ./configure CFLAGS=\"-D_POSIX_THREAD_PRIO_INHERIT\"\n\ndoes it build?", "id": 52870, "time": "2004-02-24T17:15:30Z", "creator": "jorton@redhat.com", "creation_time": "2004-02-24T17:15:30Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "creator": "kimmylin@cs.umb.edu", "text": "I gave this command\n./configure --prefix=/tools/apache-2.0.48 CFLAGS=\"-D_POSIX_THREAD_PRIO_INHERIT\"\n\nand the same error came back. The two variables are still not declared.", "id": 52873, "time": "2004-02-24T17:40:01Z", "bug_id": 27172, "creation_time": "2004-02-24T17:40:01Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "creator": "billbruns@yahoo.com", "attachment_id": null, "text": "This problem happens because the two symbols PTHREAD_MUTEX_ROBUST_NP and \nPTHREAD_PRIO_INHERIT are not defined in the include file \"pthread.h\".  The copy \nof this file that comes along with the gcc compiler does not include these \nsymbols.  In Solaris 2.7 this file did not contain the symbols.  Since then, \nSun has released a new copy of the file that does contain them.  However, the \ngcc compiler has its own copy that has a warning label in it saying not to edit \nthe file and that the manufacturer's version has non-standard usage in it.  I \ndon't know if the new include file from Sun has this \"non-standard\" problem or \nnot.\n---\nIt would be nice if the installation process for httpd-2 checked for the \npresence of these symbols, and made sure it was checking for them in the copy \nof \"pthread.h\" that the compiler will be using.\n", "id": 55572, "time": "2004-04-09T18:39:16Z", "bug_id": 27172, "creation_time": "2004-04-09T18:39:16Z", "is_private": false}, {"count": 6, "attachment_id": 11205, "creator": "billbruns@yahoo.com", "text": "Created attachment 11205\nInclude file for Solaris8 to successfully compile httpd 2.0.49 using gcc3", "id": 55597, "time": "2004-04-10T01:07:34Z", "bug_id": 27172, "creation_time": "2004-04-10T01:07:34Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "billbruns@yahoo.com", "attachment_id": null, "id": 55598, "time": "2004-04-10T01:13:14Z", "bug_id": 27172, "creation_time": "2004-04-10T01:13:14Z", "is_private": false, "text": "Clarification: during the installation of gcc, it makes a private copy of \npthread.h, so if the local copy does not have the two symbols that this bug is \nabout, then gcc will never have them.  If a Sun patch is applied to the system \nlater, it will bring only the system copies of pthread.h file up to speed.  The \nlocal copy that gcc has will still not have the symbols.  So when gcc tries to \ncompile proc_mutex.c, it will fail, thus blocking the install.\nNOTE: this occurs with httpd 2.0.49 also, of course."}, {"count": 8, "attachment_id": null, "creator": "jorton@redhat.com", "is_private": false, "id": 55696, "time": "2004-04-13T10:21:42Z", "bug_id": 27172, "creation_time": "2004-04-13T10:21:42Z", "tags": [], "text": "OK, thanks for tracking it down.  This is a \"Don't do that\" bug, then: it's not\nreally feasible for configure to detect the mis-match between the gcc\nfixed-includes and the system headers."}]