[{"count": 0, "attachment_id": null, "bug_id": 47842, "is_private": false, "id": 130413, "time": "2009-09-15T07:38:25Z", "creator": "cb@breitschwerdt.info", "creation_time": "2009-09-15T07:38:25Z", "tags": [], "text": "Hello,\n\nI have been experimenting with the templatesign.exe from the XML-Security Library. My interest was in signing the template using RSA key with SHA256 digest.\n\nEnvironment: \n\nXerces 2.8.0\nNo Xalan\nxml-security-c-1.5.1\nVisual Studio 2005\n\nAfter building the XML Security library and the tools (like templatesign.exe) I ran the following command on a self signed cert and key:\n\ntemplatesign.exe -s My.com -r key.pem secret -x cacert2.pem template.xml\n\nThe program crashed.\n\nAfter some hours debugging I found out that there seems to be an issue with the ArrayJanitor(s) destructors. \n\nI commented out the declaration of \n// ArrayJanitor<XMLCh> j_encodedName(encodedName); (in DSIGKeyInfoX509.cpp\n, line 447) and \n\n//ArrayJanitor<char> j_charX509(charX509); (in DSIGKeyInfoX509.cpp\n, line 568)\n\nRecompiled and it works now.\n\nWhat are those ArrayJanitor templates good for? I can't see that the j_name(name) array are ever used?\n\nthanks,\nChristian"}, {"count": 1, "tags": [], "creator": "cantor.2@osu.edu", "attachment_id": null, "text": "Those are just non-portable smart pointers that clean up the memory when the stack pops. It's very unlikely they'd be the cause of a crash unless you have a broken build using mixed runtime libraries, so my suggestion would be to look into that.\n\nI'll leave this open briefly, if you want to attach a sample document and keypair that's crashing, and I'll reproduce. If that works for me, I'll close it.", "id": 130516, "time": "2009-09-18T07:17:06Z", "bug_id": 47842, "creation_time": "2009-09-18T07:17:06Z", "is_private": false}, {"count": 2, "tags": [], "creator": "cantor.2@osu.edu", "is_private": false, "text": "Improper use of array janitors has been cleaned up for the 1.6.0 release and this should be fixed now.", "id": 141020, "time": "2010-10-25T20:44:30Z", "bug_id": 47842, "creation_time": "2010-10-25T20:44:30Z", "attachment_id": null}]