[{"count": 0, "tags": [], "bug_id": 6331, "text": "Adding additional cookies (i.e. more than one) to the servlet response sets all \nthe previously added cookies to the same name/value pairs.\n\nThe trace I get back from a dummy client is:\n\n<- Content-Type: text/html\n<- Date: Fri, 08 Feb 2002 15:04:58 GMT\n<- Server: Microsoft-IIS/5.0\n<- Connection: close\n<- Set-Cookie: JSESSIONID=E4C0F47603F4D710D558870208206740;Path=/\n<- Set-Cookie: JSESSIONID=E4C0F47603F4D710D558870208206740;Path=/\n<- Set-Cookie: JSESSIONID=E4C0F47603F4D710D558870208206740;Path=/\n\nfrom code:\n\n<clip>\nSession session = request.getSession(true);\nresponse.addCookie(new Cookie(\"fred\", \"wilma\"));\nresponse.addCookie(new Cookie(\"barney\", \"betty\"));\n<clip>\n\nIt would appear that the 'request.getSession(true)' is added as a cookie last \nand the previous 2 cookies are altered.\n\nRemoving the session creation call gives the follow trace:\n\n<- Content-Type: text/html\n<- Date: Fri, 08 Feb 2002 15:14:02 GMT\n<- Server: Microsoft-IIS/5.0\n<- Connection: close\n<- Set-Cookie: barney=betty\n<- Set-Cookie: barney=betty\n\nThis follows the pattern that the last created cookie alters all previous \ncookies.", "id": 10492, "time": "2002-02-08T15:34:52Z", "creator": "paul.bowler@platinata.com", "creation_time": "2002-02-08T15:34:52Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 6331, "text": "I created a servlet with the following in the service method:\n\n            res.setContentLength(0);\n\n            HttpSession session = req.getSession(true);\n            res.addCookie(new Cookie(\"fred\", \"wilma\"));\n            res.addCookie(new Cookie(\"barney\", \"betty\"));\n\nWith a telnet:\nGET /examples/servlet/Void HTTP/1.1\nHost: localhost\n\nResponse is:\nHTTP/1.1 200 OK\nContent-Length: 0\nDate: Fri, 15 Feb 2002 00:42:10 GMT\nServer: Apache Tomcat/4.1-dev (HTTP/1.1 Connector)\nSet-Cookie: fred=wilma\nSet-Cookie: barney=betty\nSet-Cookie: JSESSIONID=CEE24AF0AE8AF081E3107AA036636267;Path=/examples\n\nThe result was tested with either the 4.0 branch or the HEAD branch.", "id": 10738, "time": "2002-02-15T00:47:28Z", "creator": "remm@apache.org", "creation_time": "2002-02-15T00:47:28Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 6331, "text": "Looking back at the bug report ...\nThe Server: Microsoft-IIS/5.0 could hint that you're using AJP 1.3 + Tomcat.\nI've missed it, but that's the kind of thing you aboslutely must specify in a\nbug report, as the bug doesn't happen in standalone.\nIf that's the case, reopen the bug and set 'AJP/JK' as the component.", "id": 10777, "time": "2002-02-15T23:17:49Z", "creator": "remm@apache.org", "creation_time": "2002-02-15T23:17:49Z", "tags": [], "is_private": false}]