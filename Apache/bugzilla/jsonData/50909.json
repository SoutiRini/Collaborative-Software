[{"count": 0, "tags": [], "bug_id": 50909, "attachment_id": 26757, "text": "Created attachment 26757\nPATCH\n\nUnder uncertain conditions, an EOFException is thrown by the MODCAParser when invoking the mark/reset methods of a BufferedInputStream that wraps an input stream of MODCA data.  This patch provides a parsing solution that does not rely on mark() and reset().\n\nMODCAParser now correctly serializes structured fields that contain extension data.\n\nPatch includes unit test.", "id": 144901, "time": "2011-03-10T05:12:43Z", "creator": "peter.hancock@gmail.com", "creation_time": "2011-03-10T05:12:43Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 50909, "attachment_id": null, "text": "Hi Peter,\n\nI've taken a look at your patch and have some observations:\n\n1. I am wondering why you have moved the class UnparsedStructuredField from a separate class file to an inner class of MODCAParser. It may be a matter of personal taste but I think inner classes are really only suitable for small classes that are not used elsewhere. The Unit text classes reference this inner class and you've had to include it in the imports statement.\n2. Your changes to readNextStructedField remove the checks for CR/LF. I think these are required in case the AFP Resource being parsed contains any line data. Are you sure its safe to remove them?\n\nThanks,\n\nChris", "id": 145861, "time": "2011-04-19T08:30:14Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2011-04-19T08:30:14Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 50909, "attachment_id": null, "text": "Hi Chris,\n\n1 - I agree that UnparsedStructuredField should probably be a top level class.  \n\n2 - I removed the checks for CR/LF because there was no extra action being taken during byte stream iteration:\nThe current iteration logic\n\nwhile \n    if CR/LF\n        continue\n    else if CARRIAGE_CONTROL \n        break\n\nis just equivalent to\n\nwhile \n    if CARRIAGE_CONTROL \n        break\n\n\nI will ammend and commit the patch shortly.\n\nThanks for your comments,\n\nPete", "id": 145890, "time": "2011-04-20T06:13:30Z", "creator": "peter.hancock@gmail.com", "creation_time": "2011-04-20T06:13:30Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 50909, "attachment_id": null, "text": "fixed in commit 1104135", "id": 146377, "time": "2011-05-17T11:12:20Z", "creator": "peter.hancock@gmail.com", "creation_time": "2011-05-17T11:12:20Z", "is_private": false}]