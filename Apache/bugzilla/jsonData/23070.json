[{"count": 0, "attachment_id": null, "bug_id": 23070, "is_private": false, "id": 43949, "time": "2003-09-10T16:25:13Z", "creator": "scott.stirling@workscape.com", "creation_time": "2003-09-10T16:25:13Z", "tags": [], "text": "Use case: Weblogic has an EJB-related temp dir that get generated at startup \nand is kept under the domain home, when and if deploying EJB jars.  This temp \ndir should be deleted between server restarts in development mode, along with \nsome other dirs that cache generated and unpacked J2EE component archives \nbetween restarts.  It's just the surest way to avoid caching problems with J2EE \ncomponents when working with Weblogic.\n\nThe name is generateed based on some attributes of the local machine name and \nthe current Weblogic server instance, e.g., tmp_ejbmyhostname27001myserver.\n\nTo make a long story short: it would be nice in a team environment to be able \nto delete variabley-named directories like this with a shared clean target.   \nBut the delete task does not support any way to delete a directory by name \npattern, as it does with files and fileset includes/excludes.  This would be \nuseful in other contexts, but the Weblogic use case is a real one."}, {"count": 1, "tags": [], "bug_id": 23070, "is_private": false, "id": 44016, "creation_time": "2003-09-11T06:49:45Z", "time": "2003-09-11T06:49:45Z", "creator": "jan@materne.de", "text": "Sorry, works for me:\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<project name=\"test\" basedir=\".\" default=\"del\">\n\n    <target name=\"md\">\n        <!-- should not be deleted -->\n        <mkdir dir=\"src\"/>\n        <mkdir dir=\"docs\"/>\n        <!-- temp dirs for deletion -->\n        <tstamp/>\n        <mkdir dir=\"tmp_ejbmyhostname27001myserver\"/>\n        <mkdir dir=\"tmp_ejbmyhostname27002myserver\"/>\n        <mkdir dir=\"tmp_ejbmyhostname27003myserver\"/>\n        <mkdir dir=\"tmp_ejbanotherhostname27000myserver\"/>\n        <mkdir dir=\"tmp_ejbanotherhostname27000anotherserver\"/>\n        <mkdir dir=\"tmp_${DSTAMP}_${TSTAMP}\"/>\n    </target>\n\n    <target name=\"del\">\n        <delete includeEmptyDirs=\"true\"><fileset dir=\".\" \nincludes=\"tmp_*/\"/></delete>\n    </target>\n\n</project>\n\n\nFor more control about naming, you can use <selector>s inside the <fileset>.", "attachment_id": null}, {"count": 2, "tags": [], "text": "Jan,\n\nThanks for resolving this.  I learned something, which is that I need to put a \ntrailing forward slash after the directory name pattern in the includes \nattribute.  I wasn't doing this, and if you don't, the include pattern doesn't \nwork.  \n\nI had looked over the <delete> and <fileset> docs, and now re-read the \ndirtasks.html doc on Directory-based tasks.  There's nothing I could find that \nindicates that a trailing slash (which I know implies /**) in a fileset include \npattern means that the matched top level directory(ies) will be deleted, \nwhereas without the trailing slash they will not.  I've been using Ant for \nyears and never ran into this for some reason.\n\nThanks again.", "attachment_id": null, "bug_id": 23070, "id": 44037, "time": "2003-09-11T13:58:25Z", "creator": "scott.stirling@workscape.com", "creation_time": "2003-09-11T13:58:25Z", "is_private": false}]