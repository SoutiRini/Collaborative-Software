[{"count": 0, "tags": [], "bug_id": 42925, "text": "Tomcat 6.13 using APR, running under jsvc on linux (debian, but tomcat isn't\ninstalled via apt-get) 2.6.21 SMP. Sun Java 1.6.0.\n\nAfter tomcat was running for a short while (<15mins), cpu usage on one cpu would\ngo to 100%, as shown by top. Using ps xU tomcat -fL showed that one tomcat\nthread was using far more cpu than all the others. Cross-referencing the thread\nid to a thread dump (from kill -3) showed that it was the sendfile thread that\nwas consuming all the cpu time.\n\nTomcat was still responding to requests while this was going on, but obviously\nthe high cpu load was not necessary or helpful. Watching cpu usage via top\nshowed that at times it would return to normal, but never for long.\n\nWorkaround: I added 'useSendfile=\"false\"' to the http connector, restarted\ntomcat, and it has now run with normal cpu usage for over 12 hours.", "id": 105738, "time": "2007-07-18T01:53:44Z", "creator": "chris.lear@laculine.com", "creation_time": "2007-07-18T01:53:44Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "This is a result of AprEndpoint.Sendfile.init calling Poll.create with a timeout\nparameter but never calling Poll.maintain to deal with the resulting poll\ndescriptor timeouts. My work around was to pass a timeout of -1 to Poll.create.", "is_private": false, "id": 108599, "creator": "celving@netflix.com", "time": "2007-09-25T19:44:40Z", "bug_id": 42925, "creation_time": "2007-09-25T19:44:40Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "remm@apache.org", "is_private": false, "id": 109041, "attachment_id": 20930, "bug_id": 42925, "creation_time": "2007-10-05T14:01:58Z", "time": "2007-10-05T14:01:58Z", "text": "Created attachment 20930\nProposed patch\n\nThis patch replaces the TODO with code that calls maintain. I was not aware\ncalling maintain was more or less mandatory."}, {"count": 3, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 111289, "attachment_id": null, "bug_id": 42925, "creation_time": "2007-11-29T15:12:25Z", "time": "2007-11-29T15:12:25Z", "text": "This was fixed in rev 583650."}, {"count": 4, "tags": [], "creator": "markt@apache.org", "text": "*** Bug 44938 has been marked as a duplicate of this bug. ***", "id": 116322, "time": "2008-05-07T00:16:47Z", "bug_id": 42925, "creation_time": "2008-05-07T00:16:47Z", "is_private": false, "attachment_id": null}]