[{"attachment_id": null, "tags": [], "bug_id": 33761, "is_private": false, "count": 0, "id": 71588, "time": "2005-02-28T00:58:51Z", "creator": "woo.brian@gmail.com", "creation_time": "2005-02-28T00:58:51Z", "text": "ok... according to the servlet 2.3 spec it says\n\nSRV.6.2.4 Configuration of Filters in a Web Application:\n\"When processing a filter-mapping element using the url-pattern style, the\ncontainer must determine whether the url-pattern matches the request URI using\nthe path mapping rules defined in Chapter SRV,11...\"\n\nSRV.11.2 Specification of Mappings:\n\"- A String beginning with a '/' character and ending with a '/*' postifix is\nused for a path mapping\n- A String beginning with a '*.' prefix is used as an extension mapping\n- A string containing only the '/' character indicates the \"default\" servlet of\nthe application. In this case the servlet path is the request URI minus the\ncontext path and the path info is null.\n- All other strings are used for exact matches only.\"\n\n\nIn my web.xml, I have the following filter mapping:\n\n    <filter>\n      <filter-name>transcoderFilter</filter-name>\n      <filter-class>com.cj.h2w.transcoderFilter</filter-class>\n      <init-param>\n        <param-name>dir</param-name>\n        <param-value>/home/bwoo/workspace/imsld/COMP200_wml</param-value>\n      </init-param>\n      <init-param>\n        <param-name>url</param-name>\n        <param-value>http://192.168.2.6:8080/imsld/COMP200</param-value>\n      </init-param>\n    </filter>\n    <filter-mapping>\n      <filter-name>transcoderFilter</filter-name>\n      <url-pattern>testWml.html</url-pattern>\n    </filter-mapping>\n\nHowever, the filter will not startup and give the following exception:\n\nSEVERE: End event threw exception\njava.lang.reflect.InvocationTargetException\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n...\nCaused by: java.lang.IllegalArgumentException: Invalid <url-pattern>\ntestWml.html in filter mapping at\norg.apache.catalina.core.StandardContext.addFilterMap(StandardContext.java:1509)\n\nTomcat shouldn't have thrown an exception complaining about url-pattern\n(according to SRV.11.2, last point)."}, {"attachment_id": null, "tags": [], "bug_id": 33761, "is_private": false, "count": 1, "id": 71589, "time": "2005-02-28T01:01:44Z", "creator": "funkman@joedog.org", "creation_time": "2005-02-28T01:01:44Z", "text": "For an exact match url, the url must begin with / \n\n<url-pattern>testWml.html</url-pattern> does not begin with / - so it is invalid."}]