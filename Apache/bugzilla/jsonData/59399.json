[{"count": 0, "tags": [], "bug_id": 59399, "attachment_id": null, "text": "Product: apache-tomcat-7.0.42\nVersion: 7-0.42\nComponent: Connector (guess)\nPlatform: x86_64\nOS: Ubuntu Linux 12.04.2 LTS and CentOS Linux release 7.2.1511\nSeverity: enhancement\nJava: jdk1.8.0_77\n\nTomcat 7.0.42 used as standalone web server port 80\nconfigured with \n\n<transport-guarantee>CONFIDENTIAL</transport-guarantee> in web.xml\n\nand \n\n<Connector port=\"80\" protocol=\"HTTP/1.1\"\n           connectionTimeout=\"20000\"\n           redirectPort=\"443\" />\n\n<Connector port=\"443\" maxThreads=\"150\" scheme=\"https\" secure=\"true\"\n           SSLEnabled=\"true\" keystoreFile=\"/opt/keys/tomcat.keystore\" \n           keystorePass=\"?\" clientAuth=\"false\" keyAlias=\"tomcat\" sslProtocol=\"TLS\" />   \n\nin server.xml\n\n# curl -D /tmp/headers.txt -s http://localhost\n# cat headers.txt\n\nHTTP/1.1 302 Found\nServer: Apache-Coyote/1.1\n...\nIt doesn't seem to be possible to configure the response code for the http -> https redirect. \n\nDiscussions with Google webmasters reveal that Google require a 301 moved permanently response to the http -> https redirect. This is key to maintaining existing rankings\n\nUnfortunately Tomcat returns 302 temporary redirect when performing the redirection.\n\nImplementing site wide https is also crucial to maintaining rankings unfortunately the benefits of doing this are largley negated by the inability to return the required status code.The only option is to undeploy https thereby once again harming rankings. \n\nA good Google ranking is the difference between making a profit and making a loss. Much as I don't like it, that's the way it is unfortunately.", "id": 190652, "time": "2016-04-30T15:37:51Z", "creator": "lyallex@gmail.com", "creation_time": "2016-04-30T15:37:51Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "This has been implemented as a new option in the Realm and will has implemented in:\n- 9.0.x for 9.0.0.M9 onwards\n- 8.5.x for 8.5.4 onwards\n- 8.0.x for 8.0.37 onwards\n- 7.0.x for 7.0.70 onwards", "count": 1, "id": 191669, "time": "2016-06-15T11:12:11Z", "bug_id": 59399, "creation_time": "2016-06-15T11:12:11Z", "is_private": false}]