[{"text": "Created attachment 29798\nSimple test-case showing apr_pool_create failure\n\nI'm developing a stand-alone utility and trying to use APR/APU for portability.\n\nThe manual for apr_pool_create is clear:\n\nThe parent pool. If this is NULL, the new pool is a root pool. If it is non-NULL, the new pool will inherit all of its parent pool's attributes, except the apr_pool_t will be a sub-pool. \n\nhttp://apr.apache.org/docs/apr/1.4/group__apr__pools.html#ga918adf3026c894efeae254a0446aed3b\n\nHowever, invoking apr_pool_create(&mypool, NULL) crashes on the line memory/unix/apr_pools.c:889, where it is trying to dereference the parent-pointer:\n\n        allocator = parent->allocator;\n\nThe comment inside the function states, allocator \"is guaranteed\" to be non-null, when parent is, but that's not the case here:\n\n (gdb) p parent\n $6 = (apr_pool_t *) 0x0\n (gdb) p allocator\n $7 = (apr_allocator_t *) 0x0\n\nI just started working on this utility, so it is not doing much yet other than trying to create a pool. I'm attaching the code to help reproduce the issue.", "tags": [], "creator": "mi+apache@aldan.algebra.com", "is_private": false, "count": 0, "id": 164281, "time": "2012-12-29T21:36:08Z", "bug_id": 54360, "creation_time": "2012-12-29T21:36:08Z", "attachment_id": 29798}, {"count": 1, "tags": [], "bug_id": 54360, "text": "no apr_app_initialize() called prior to creating the pool.", "id": 164282, "time": "2012-12-29T22:36:26Z", "creator": "covener@gmail.com", "creation_time": "2012-12-29T22:36:26Z", "is_private": false, "attachment_id": null}]