[{"count": 0, "attachment_id": null, "bug_id": 14692, "text": "after I upgrade my linux to redhat 8.0 I got this error:\n\n[root@beta proc]# tail -f /var/log/httpd/error_log\n[Tue Nov 19 17:01:38 2002] [notice] child pid 3654 exit signal Segmentation\nfault (11)\n[Tue Nov 19 17:01:38 2002] [notice] child pid 3637 exit signal Segmentation\nfault (11)\n[Tue Nov 19 17:01:39 2002] [notice] child pid 3651 exit signal Segmentation\nfault (11)\n[Tue Nov 19 17:01:39 2002] [notice] child pid 3631 exit signal Segmentation\nfault (11)\n[Tue Nov 19 17:01:40 2002] [notice] child pid 3657 exit signal Segmentation\nfault (11)\n[Tue Nov 19 17:01:40 2002] [notice] child pid 3652 exit signal Segmentation\nfault (11)\n[Tue Nov 19 17:01:40 2002] [notice] child pid 3647 exit signal Segmentation\nfault (11)\n[Tue Nov 19 17:01:41 2002] [notice] child pid 3698 exit signal Segmentation\nfault (11)\n[Tue Nov 19 17:01:41 2002] [notice] child pid 3655 exit signal Segmentation\nfault (11)\n[Tue Nov 19 17:01:42 2002] [notice] child pid 3656 exit signal Segmentation\nfault (11)\n\n\nthis happens all of the time..\n\nwhen I run the 'top' command, sometimes I can see the httpd processes using 99%\nof CPU time (less than 5 second) and after that more one error line...", "id": 26609, "time": "2002-11-19T19:21:19Z", "creator": "caetano@col.psi.br", "creation_time": "2002-11-19T19:21:19Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 14692, "attachment_id": null, "text": "Please post a backtrace from a core dump created by one of the segfaulting\nchild processes.\n\nThanks!", "id": 26610, "time": "2002-11-19T19:38:11Z", "creator": "trawick@apache.org", "creation_time": "2002-11-19T19:38:11Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 14692, "text": "the Segmentation fault doesn't generate a core dumped file...\n\ncan I force it to make one?", "id": 26611, "time": "2002-11-19T19:44:31Z", "creator": "caetano@col.psi.br", "creation_time": "2002-11-19T19:44:31Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 14692, "attachment_id": null, "text": "Use the CoreDumpDirectory directive and specify a directory that is writable by\nthe Apache child processes and has sufficient disk space.\n\nSee \nhttp://httpd.apache.org/docs-2.0/mod/mpm_common.html#coredumpdirectory\nfor exact details of this directive.\n\nAfter you get a core dump, use \n\n  gdb /path/to/httpd /path/to/core\n  (gdb) where\n   <backtrace displayed here by gdb>\n  (gdb) quit\n\nto get a backtrace.\n", "id": 26619, "time": "2002-11-19T23:32:32Z", "creator": "trawick@apache.org", "creation_time": "2002-11-19T23:32:32Z", "is_private": false}, {"count": 4, "tags": [], "creator": "caetano@col.psi.br", "is_private": false, "id": 26638, "creation_time": "2002-11-20T12:00:45Z", "time": "2002-11-20T12:00:45Z", "bug_id": 14692, "text": "I follow your steps, I set the CoreDumpDirectory to /tmp directory and I have\nsufficient disk space.\n\nbut the core file doesn't generate..\nI'm trying set the LogLevel to debug..\n\n\n\n[Wed Nov 20 09:51:17 2002] [info] mod_unique_id: using ip addr 10.0.0.2\n[Wed Nov 20 09:51:18 2002] [notice] Apache/2.0.40 (Red Hat Linux) configured --\nresuming normal operations\n[Wed Nov 20 09:51:18 2002] [info] Server built: Sep  4 2002 17:20:34\n[Wed Nov 20 09:51:18 2002] [debug] prefork.c(1039): AcceptMutex: sysvsem\n(default: sysvsem)\n[Wed Nov 20 09:52:20 2002] [notice] child pid 7884 exit signal Segmentation\nfault (11)\n[Wed Nov 20 09:52:20 2002] [notice] child pid 7883 exit signal Segmentation\nfault (11)\n[Wed Nov 20 09:52:20 2002] [notice] child pid 7882 exit signal Segmentation\nfault (11)\n\n\nmy httpd.conf is ok\n\n[root@beta tmp]# httpd -t\nSyntax OK\n\n\nmore one tip?\n\nthanks", "attachment_id": null}, {"count": 5, "tags": [], "creator": "trawick@apache.org", "is_private": false, "text": "Wow, I'm not accustomed to having problems getting core dumps with non-threaded\nprograms on Linux :(\n\nHere is an uglier way to get a backtrace...\n\napachectl stop (if not already stopped)\ngdb /path/to/httpd\n(gdb) r -DONE_PROCESS\nlet it run until it segfaults; hopefully it will still segfault in this mode,\nat which point gdb will regain control\n(gdb) where\n\nIf this doesn't work, the next step would be to comment out the LoadModule\ndirectives for various modules and see if a module is segfaulting and which\none it is.\n\nYou might open a PR with RedHat too since it appears that you are using\nRedHat's build of Apache.  Surely they would understand any nuances of\ngetting core dumps with the kernel they ship.\n", "id": 26639, "time": "2002-11-20T12:18:30Z", "bug_id": 14692, "creation_time": "2002-11-20T12:18:30Z", "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 14692, "is_private": false, "id": 26649, "time": "2002-11-20T13:29:48Z", "creator": "caetano@col.psi.br", "creation_time": "2002-11-20T13:29:48Z", "tags": [], "text": "okey Jeff, the \"ugly\" mode works,\nhere is the full steps:\n\n---\n\n[root@beta /]# /etc/init.d/httpd stop\nStopping httpd:                                            [  OK  ]\n[root@beta /]# gdb /usr/sbin/httpd\nGNU gdb Red Hat Linux (5.2.1-4)\nCopyright 2002 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"i386-redhat-linux\"...(no debugging symbols found)...\n(gdb) r -DONE_PROCESS\nStarting program: /usr/sbin/httpd -DONE_PROCESS\n[New Thread 8192 (LWP 8704)]\n\nProgram received signal SIGPIPE, Broken pipe.\n[Switching to Thread 8192 (LWP 8704)]\n0x4038f2a4 in writev () from /lib/libc.so.6\n(gdb) where\n#0  0x4038f2a4 in writev () from /lib/libc.so.6\n#1  0x402259ce in apr_sendv () from /usr/lib/libapr.so.0\n#2  0x08078555 in writev_it_all ()\n#3  0x08079893 in core_output_filter ()\n#4  0x0807169c in ap_pass_brigade ()\n#5  0x0805decf in chunk_filter ()\n#6  0x0807169c in ap_pass_brigade ()\n#7  0x08073e6a in ap_content_length_filter ()\n#8  0x0807169c in ap_pass_brigade ()\n#9  0x4056af0f in completed.1 () from /etc/httpd/modules/libphp4.so\n#10 0x405772a5 in completed.1 () from /etc/httpd/modules/libphp4.so\n#11 0x40576919 in completed.1 () from /etc/httpd/modules/libphp4.so\n#12 0x4056dca6 in completed.1 () from /etc/httpd/modules/libphp4.so\n#13 0x4055f50f in completed.1 () from /etc/httpd/modules/libphp4.so\n#14 0x4055f492 in completed.1 () from /etc/httpd/modules/libphp4.so\n#15 0x4055f117 in completed.1 () from /etc/httpd/modules/libphp4.so\n#16 0x4055294f in completed.1 () from /etc/httpd/modules/libphp4.so\n#17 0x405606b6 in completed.1 () from /etc/httpd/modules/libphp4.so\n#18 0x4056ef7a in completed.1 () from /etc/httpd/modules/libphp4.so\n#19 0x4056b7bd in completed.1 () from /etc/httpd/modules/libphp4.so\n#20 0x0807169c in ap_pass_brigade ()\n#21 0x08078e27 in default_handler ()\n#22 0x08065bf5 in ap_run_handler ()\n#23 0x0806620d in ap_invoke_handler ()\n#24 0x080629c6 in ap_process_request ()\n#25 0x0805e0ac in ap_process_http_connection ()\n#26 0x0806f0d5 in ap_run_process_connection ()\n#27 0x08064238 in child_main ()\n#28 0x0806445a in make_child ()\n#29 0x080644b6 in startup_children ()\n#30 0x08064cdf in ap_mpm_run ()\n#31 0x0806ac5f in main ()\n#32 0x402dd4ce in __libc_start_main () from /lib/libc.so.6\n(gdb)\n\n----------------------------------\n"}, {"count": 7, "tags": [], "bug_id": 14692, "attachment_id": null, "text": "I'm really sorry, but I neglected the following critical instruction:\n\nIf you see a message like \"Program received signal SIGPIPE, Broken pipe.\"\nthen you need to use the continue command\n\n(gdb) cont\n\nto proceed to the code that segfaulted.\n\nSIGPIPE is normal behavior, but it interrupts the debug process and you need\nto continue at that point to hit the problem.\n\nSo try again but run \"cont\" when you see the SIGPIPE message.\n\nSorry!!!!\n\n(By the way, this sounds like another problem reported recently that was\nidentified as a PHP issue.  I bet that if you comment out the LoadModule\nfor php it won't segfault anymore.)\n", "id": 26650, "time": "2002-11-20T13:41:07Z", "creator": "trawick@apache.org", "creation_time": "2002-11-20T13:41:07Z", "is_private": false}, {"count": 8, "attachment_id": null, "bug_id": 14692, "is_private": false, "id": 26661, "time": "2002-11-20T16:55:57Z", "creator": "caetano@col.psi.br", "creation_time": "2002-11-20T16:55:57Z", "tags": [], "text": "okey jeff, no problem ;)\n\nnow here is the output:\n\n------------------\n[root@beta var]# gdb /usr/sbin/httpd\nGNU gdb Red Hat Linux (5.2.1-4)\nCopyright 2002 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"i386-redhat-linux\"...(no debugging symbols found)...\n(gdb) r -DONE_PROCESS\nStarting program: /usr/sbin/httpd -DONE_PROCESS\n[New Thread 8192 (LWP 17452)]\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 8192 (LWP 17452)]\n0x40350982 in strcasecmp () from /lib/libc.so.6\n(gdb)\n(gdb) where\n#0  0x40350982 in strcasecmp () from /lib/libc.so.6\n#1  0x40235ae5 in overlap_hash () from /usr/lib/libapr.so.0\n#2  0x40235df3 in apr_table_overlap () from /usr/lib/libapr.so.0\n#3  0x0807db3e in ap_add_common_vars ()\n#4  0x406546c1 in completed.1 () from /etc/httpd/modules/libphp4.so\n#5  0x0807169c in ap_pass_brigade ()\n#6  0x40b732a8 in handle_include () from /etc/httpd/modules/mod_include.so\n#7  0x40b760bb in send_parsed_content () from /etc/httpd/modules/mod_include.so\n#8  0x40b76a80 in includes_filter () from /etc/httpd/modules/mod_include.so\n#9  0x0807169c in ap_pass_brigade ()\n#10 0x08078e27 in default_handler ()\n#11 0x08065bf5 in ap_run_handler ()\n#12 0x0806620d in ap_invoke_handler ()\n#13 0x0807d51a in ap_run_sub_req ()\n#14 0x40b7311e in handle_include () from /etc/httpd/modules/mod_include.so\n#15 0x40b760bb in send_parsed_content () from /etc/httpd/modules/mod_include.so\n#16 0x40b76a80 in includes_filter () from /etc/httpd/modules/mod_include.so\n#17 0x0807169c in ap_pass_brigade ()\n#18 0x40bd74e9 in handle_map_file () from /etc/httpd/modules/mod_negotiation.so\n#19 0x08065bf5 in ap_run_handler ()\n#20 0x0806620d in ap_invoke_handler ()\n#21 0x08062f31 in ap_internal_redirect ()\n#22 0x080629ac in ap_process_request ()\n#23 0x0805e0ac in ap_process_http_connection ()\n#24 0x0806f0d5 in ap_run_process_connection ()\n#25 0x08064238 in child_main ()\n#26 0x0806445a in make_child ()\n#27 0x080644b6 in startup_children ()\n#28 0x08064cdf in ap_mpm_run ()\n#29 0x0806ac5f in main ()\n#30 0x402f14ce in __libc_start_main () from /lib/libc.so.6\n(gdb)\n\n-----------------------------"}, {"count": 9, "attachment_id": null, "bug_id": 14692, "text": "try\n# ulimit -c\n# ulimit -c unlimited\n# ulimit -c\n\nbefore starting it.\nI'm guessing you had it set to zero", "id": 26663, "time": "2002-11-20T17:18:16Z", "creator": "ianh@apache.org", "creation_time": "2002-11-20T17:18:16Z", "tags": [], "is_private": false}, {"count": 10, "tags": [], "bug_id": 14692, "attachment_id": null, "text": "you're right Ian, it was setting to 0\n\nI execute \"ulimit -c unlimited\"\n\nbut.. the errors still flooding me\n\n-------------\n[Wed Nov 20 15:25:04 2002] [notice] child pid 11219 exit signal Segmentation\nfault (11)\n[Wed Nov 20 15:25:04 2002] [notice] child pid 11218 exit signal Segmentation\nfault (11)\n[Wed Nov 20 15:25:04 2002] [notice] child pid 11217 exit signal Segmentation\nfault (11)\n[Wed Nov 20 15:25:05 2002] [info] server seems busy, (you may need to increase\nStartServers, or Min/MaxSpareServers), spawning 8 children, there are 2 idle,\nand 3 total children\n-------------\n", "id": 26664, "time": "2002-11-20T17:28:59Z", "creator": "caetano@col.psi.br", "creation_time": "2002-11-20T17:28:59Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 14692, "text": "I replied to the bug a bit too quickly, and didn't see that jeff had got you to\ndo the 'ugly' method, and had a backtrace to work off.\n\nthe 'tip' was only to generated core files, not to fix the problem...\nsorry for the confusion.", "id": 26665, "time": "2002-11-20T17:35:55Z", "creator": "ianh@apache.org", "creation_time": "2002-11-20T17:35:55Z", "is_private": false, "attachment_id": null}, {"count": 12, "attachment_id": null, "bug_id": 14692, "is_private": false, "id": 26687, "time": "2002-11-21T11:31:14Z", "creator": "caetano@col.psi.br", "creation_time": "2002-11-21T11:31:14Z", "tags": [], "text": "no problem Ian,\nI'm waiting the jeff \"light\"\n\nheh :)"}, {"count": 13, "tags": [], "bug_id": 14692, "text": "Hello,\nI did some tests, and I think that is error is solved.\n\nlook the content of file conf.d/php.conf\n\n<Files *.php>\n    SetOutputFilter PHP\n    SetInputFilter PHP\n    LimitRequestBody 524288\n</Files>\n\nthis means that my php script can't have more than 5k ?\nmy index.php have 3k, and if I test with lynx http://localhost the \n\"[notice] child pid 3654 exit signal Segmentation fault (11)\" flood me\n\nbut if I delete that line: \"LimitRequestBody 524288\" the errors stop!!\n\nI don't know nothing about development, but this solved my problem..\n\nwhat to you think about this?\n\nthanks for all the help\n", "id": 26773, "time": "2002-11-22T11:55:54Z", "creator": "caetano@col.psi.br", "creation_time": "2002-11-22T11:55:54Z", "is_private": false, "attachment_id": null}, {"count": 14, "attachment_id": null, "bug_id": 14692, "is_private": false, "id": 26776, "time": "2002-11-22T12:29:36Z", "creator": "caetano@col.psi.br", "creation_time": "2002-11-22T12:29:36Z", "tags": [], "text": "please discard my last message, two hours later the errors come back...\nsorry"}, {"count": 15, "tags": [], "bug_id": 14692, "attachment_id": null, "id": 26782, "time": "2002-11-22T12:58:50Z", "creator": "trawick@apache.org", "creation_time": "2002-11-22T12:58:50Z", "is_private": false, "text": "My first suggestion is to get on the PHP list, show them the backtrace,\ntell them your PHP and Apache versions, and get opinions on the likelihood \nthat such a problem is already fixed in their next release.\n\nIf that is not fruitful, this needs to be debugged on the latest\nApache and PHP code with a debug build (i.e., with symbols).\n"}, {"count": 16, "tags": [], "text": "ok\n\nwith apache 2.0.43 and php 4.3.0_RC1 works perfect!\n\nthanks Jeff", "is_private": false, "id": 26819, "creator": "caetano@col.psi.br", "time": "2002-11-22T19:17:38Z", "bug_id": 14692, "creation_time": "2002-11-22T19:17:38Z", "attachment_id": null}, {"count": 17, "attachment_id": null, "bug_id": 14692, "is_private": false, "id": 166618, "time": "2013-04-15T04:09:45Z", "creator": "elyes_2007@hotmail.fr", "creation_time": "2013-04-15T04:09:45Z", "tags": [], "text": "please Flavio . i have the same problem child pid.... \nand i'm an amateur , please send me how can i fix this problem like you did \nand thank you ."}]