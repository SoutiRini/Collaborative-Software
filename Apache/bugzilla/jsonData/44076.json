[{"count": 0, "tags": [], "bug_id": 44076, "attachment_id": null, "text": "In the default config for mod_userdir, I added \"UserDir disabled\" and then added\n\"UserDir enabled bob\" to a vhost entry. I receive a 404 when attempting to\naccess http://mysite/~bob.\n\nIf I remove \"UserDir disabled\" (leaving the enabled line in the other file), it\nstill doesn't work. I was only able to get it to work by leaving it on for all\nvhosts with no enabled line.\n\nI just recently upgraded from 2.0.58 and it worked then. I completely blew away\nmy configuration and started over to be 2.2.4-compliant. But according to the\nonline documentation, I'm doing this correctly.\n\nIt might be note-worthy to mention that the machine is a member of an Active\nDirectory domain via Samba 3. The account is a local Unix user so that shouldn't\nmatter.\n\nI diff'd the two version of mod_userdir.c and I see changes to two lines:\n\nif (apr_uid_homepath_get(&homedir, w, r->pool) == APR_SUCCESS) {\n\nand\n\nif (apr_uid_get(&ugid->uid, &ugid->gid, username, r->pool) != APR_SUCCESS) {\n\n\nThis concerns me because both functions could break with Samba depending on what\ntype of voodoo apr is doing. Then again, when I removed winbind stuff from\nnsswitch.conf, I still had a problem.\n\nIt might also help to mention that /home is a symlink to /data/home. I\ntemporarily changed this, also, and it didn't help.", "id": 111790, "time": "2007-12-13T22:00:51Z", "creator": "rjcarroll4@gmail.com", "creation_time": "2007-12-13T22:00:51Z", "is_private": false}, {"text": "Actually, I just tried adding \"UserDir disabled\" and \"UserDir enabled bob\" to\nthe default userdir config file and it worked. So this appears to be limited to\nvhosts.", "tags": [], "bug_id": 44076, "is_private": false, "count": 1, "id": 111791, "time": "2007-12-13T22:04:12Z", "creator": "rjcarroll4@gmail.com", "creation_time": "2007-12-13T22:04:12Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 44076, "is_private": false, "id": 142358, "time": "2010-12-03T22:50:45Z", "creator": "covener@gmail.com", "creation_time": "2010-12-03T22:50:45Z", "tags": [], "text": "fixed in trunk http://svn.apache.org/viewvc?rev=1042090&view=rev and proposed for backport"}, {"count": 3, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "is_private": false, "id": 144050, "time": "2011-02-08T08:03:05Z", "bug_id": 44076, "creation_time": "2011-02-08T08:03:05Z", "text": "backported to 2.2.x in http://svn.apache.org/viewvc?rev=1068257&view=rev"}, {"count": 4, "attachment_id": null, "bug_id": 44076, "is_private": false, "id": 149019, "time": "2011-09-05T03:39:15Z", "creator": "ezyang@mit.edu", "creation_time": "2011-09-05T03:39:15Z", "tags": [], "text": "I'd like to remark that this bugfix causes behavior change. In particular, if I do the following:\n\nUserDir disabled\n<VirtualHost example.com>\n  UserDir public_html\n</VirtualHost>\n\nIn old versions of Apache, this would result in UserDir's being globally disabled, except for http://example.com/~bob. However, with this bugfix, http://example.com/~bob no longer works.\n\nThis version of the config does work:\n\nUserDir disabled\n<VirtualHost example.com>\n  UserDir enabled\n  UserDir public_html\n</VirtualHost>\n\nBut it seems that this enabled stanza should be implicit when we pass a UserDir directory. Let me know if I should open a new bug."}, {"count": 5, "tags": [], "bug_id": 44076, "attachment_id": null, "text": "\n> directory. Let me know if I should open a new bug.\n\nreopening here, thanks for the report.", "id": 149028, "time": "2011-09-05T11:20:54Z", "creator": "covener@gmail.com", "creation_time": "2011-09-05T11:20:54Z", "is_private": false}, {"count": 6, "tags": [], "text": "(In reply to comment #4)\n> I'd like to remark that this bugfix causes behavior change. In particular, if I\n> do the following:\n> \n> UserDir disabled\n> <VirtualHost example.com>\n>   UserDir public_html\n> </VirtualHost>\n> \n> In old versions of Apache, this would result in UserDir's being globally\n> disabled, except for http://example.com/~bob. However, with this bugfix,\n> http://example.com/~bob no longer works.\n\nI think this updated behavior must be the expectation though based on how disabled works\n\nhttp://httpd.apache.org/docs/2.2/mod/mod_userdir.html", "is_private": false, "id": 149029, "creator": "covener@gmail.com", "time": "2011-09-05T11:23:31Z", "bug_id": 44076, "creation_time": "2011-09-05T11:23:31Z", "attachment_id": null}]