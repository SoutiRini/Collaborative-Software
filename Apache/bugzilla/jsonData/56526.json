[{"attachment_id": null, "tags": [], "bug_id": 56526, "is_private": false, "count": 0, "id": 175228, "time": "2014-05-14T21:20:39Z", "creator": "slaurent@apache.org", "creation_time": "2014-05-14T21:20:39Z", "text": "The StuckThreadDetectionValve is able to detect stuck threads.\nIt can be improved to also interrupt such threads to try and unblock them in case they are just stuck in I/O or network calls.\n\nThis would be more or less similar to apache httpd TimeOut directive or PHP max_execution_time (http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time ) and would protect the tomcat server from slow or non-responding backend services and unproperly configured timeouts in the application."}, {"count": 1, "tags": [], "text": "(I'm working on it right now, I created the BZ issue to get an ID for the commit message)", "is_private": false, "bug_id": 56526, "id": 175229, "time": "2014-05-14T21:20:49Z", "creator": "slaurent@apache.org", "creation_time": "2014-05-14T21:20:49Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 56526, "attachment_id": null, "text": "committed r1595331 on tomcat 8", "id": 175287, "time": "2014-05-16T20:06:18Z", "creator": "slaurent@apache.org", "creation_time": "2014-05-16T20:06:18Z", "is_private": false}, {"count": 3, "tags": [], "text": "Small correction: the fix is in 8.0.9.\n(Tomcat 8.0.8 was tagged an hour earlier - r1595294)\n\nI updated the changelog file.", "is_private": false, "id": 175289, "creator": "knst.kolinko@gmail.com", "time": "2014-05-16T21:36:15Z", "bug_id": 56526, "creation_time": "2014-05-16T21:36:15Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 56526, "attachment_id": null, "text": "merged to tomcat 7, will be available in 7.0.55.", "id": 175325, "time": "2014-05-19T20:38:50Z", "creator": "slaurent@apache.org", "creation_time": "2014-05-19T20:38:50Z", "is_private": false}, {"count": 5, "tags": [], "creator": "chris@christopherschultz.net", "text": "I don't think Thread.interrupt will interrupt a blocking I/O operation, at least not reliably. IIRC, this \"works\" on *NIX but not Windows. While this patch probably makes things better, it's not an absolute solution to the problem of stuck threads.\n\nPerhaps a followup documentation patch is appropriate mentioning the caveats of attempting to \"unstick\" stuck threads.", "id": 175358, "time": "2014-05-20T18:54:12Z", "bug_id": 56526, "creation_time": "2014-05-20T18:54:12Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 56526, "attachment_id": null, "is_private": false, "id": 175360, "time": "2014-05-20T19:10:13Z", "creator": "slaurent@apache.org", "creation_time": "2014-05-20T19:10:13Z", "text": "well, it's not perfect, as I tried to briefly explain in the configuration doc, but in my experience, it should work in many cases where the thread is blocked on a network call.\n\nActually that was my primary motivation for this feature.\nIn my experience this is a good safety net against APIs that don't provide network timeouts or applications that don't configure their timeout (a very common situation with JDBC or JNDI).\n\nInstead of a documentation patch, what about a wiki page instead ?"}]