[{"count": 0, "tags": [], "bug_id": 58490, "text": "When I deploy a webapp that uses web-fragments it does not start when the host is configured with unpackWARs=\"false\".\n\nWith unpackWARs=\"true\" the same webapp starts fine.\n\nThis can be shown on a clean install of tomcat8, deploy webfragments sample from apache-geronimo.\n\nThe war can be downloaded from maven central:\nhttp://search.maven.org/remotecontent?filepath=org/apache/geronimo/samples/javaee6/webfragment-javaee6-war/3.0.0/webfragment-javaee6-war-3.0.0.war\n\nThe only change in conf/server.xml is unpackWARs setting from true to false:\n\n <Host name=\"localhost\"  appBase=\"webapps\"\n            unpackWARs=\"false\" autoDeploy=\"true\">\n\n\n\nINFO: Deploying web application archive /crypt/apache/tomcat/trunk/output/build/webapps/webfragment-javaee6-war-3.0.0.war\nOct 09, 2015 10:07:56 AM org.apache.catalina.startup.ContextConfig processServletContainerInitializers\nSEVERE: Failed to process JAR found at URL [/webfragment-javaee6-war-3.0.0] for ServletContainerInitializers for context with name [{1}]\njava.net.MalformedURLException: no !/ in spec\n\tat java.net.URL.<init>(URL.java:619)\n\tat java.net.URL.<init>(URL.java:482)\n\tat java.net.URL.<init>(URL.java:431)\n\tat java.net.JarURLConnection.parseSpecs(JarURLConnection.java:179)\n\tat java.net.JarURLConnection.<init>(JarURLConnection.java:162)\n\tat sun.net.www.protocol.jar.JarURLConnection.<init>(JarURLConnection.java:81)\n\tat sun.net.www.protocol.jar.Handler.openConnection(Handler.java:41)\n\tat java.net.URL.openConnection(URL.java:971)\n\tat java.net.URL.openStream(URL.java:1037)\n\tat org.apache.catalina.startup.WebappServiceLoader.parseConfigFile(WebappServiceLoader.java:161)\n\tat org.apache.catalina.startup.WebappServiceLoader.load(WebappServiceLoader.java:118)\n\tat org.apache.catalina.startup.ContextConfig.processServletContainerInitializers(ContextConfig.java:1616)\n\tat org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1128)\n\tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:771)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:305)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:95)\n\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5080)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:725)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:701)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:717)\n\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:945)\n\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1798)\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\tat java.lang.Thread.run(Thread.java:744)\nCaused by: java.lang.NullPointerException: no !/ in spec\n\tat sun.net.www.protocol.jar.Handler.parseAbsoluteSpec(Handler.java:170)\n\tat sun.net.www.protocol.jar.Handler.parseURL(Handler.java:150)\n\tat java.net.URL.<init>(URL.java:614)\n\t... 28 more", "id": 185707, "time": "2015-10-09T08:57:44Z", "creator": "rgansevles@gmail.com", "creation_time": "2015-10-09T08:57:44Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "violetagg@apache.org", "attachment_id": null, "id": 185870, "time": "2015-10-23T08:27:38Z", "bug_id": 58490, "creation_time": "2015-10-23T08:27:38Z", "is_private": false, "text": "Hi,\n\nThanks for the report and the test case.\nThe fix is available in trunk and 8.0.x (for 8.0.29 onwards)\n\nRegards,\nVioleta"}, {"count": 2, "tags": [], "bug_id": 58490, "attachment_id": null, "text": "*** Bug 59274 has been marked as a duplicate of this bug. ***", "id": 189961, "time": "2016-04-05T12:08:08Z", "creator": "violetagg@apache.org", "creation_time": "2016-04-05T12:08:08Z", "is_private": false}]