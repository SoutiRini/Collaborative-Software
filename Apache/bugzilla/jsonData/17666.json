[{"count": 0, "tags": [], "creator": "maxpoon@graduate.hku.hk", "is_private": false, "text": "I have the environment set up ok:-\n JAVA_HOME          = C:\\jdk\\jdk14\n CATALINA_HOME      = C:\\Program Files\\Apache Group\\Tomcat 4.1\n CLASSPATH includes : %JAVA_HOME%\\lib\\tools.jar\n\nbut still getting the following environment in the:-\n- %CATALINA_HOME%\\logs\\localhost_log.2003-<mm-dd.txt> file\n- as well as visiting Tomcat Administration Page \n   (http://localhost:8080/admin/login.jsp)\n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n    [javac] Compiling 1 source file\n\n\n\n        at\norg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:130)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:293)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:340)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:352)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:474)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:184)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:260)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:550)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2415)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:170)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:432)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:386)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:534)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:530)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\nPls help.", "id": 32454, "time": "2003-03-05T10:48:13Z", "bug_id": 17666, "creation_time": "2003-03-05T10:48:13Z", "attachment_id": null}, {"count": 1, "text": "Suggest also to include the following instructions in Installation Guide:-\n\n- set JAVA_HOME, e.g. for JDK 1.4 on Windows, to:-\n\n    C:\\jdk\\jdk14, but not:-\n\n    C:\\jdk\\jdk14\\jre\n      which contains java.exe and javaw.exe but not javac.exe & jdb.exe\n\n- set CLASSPATH to include :-\n\n    %JAVA_HOME%\\lib\\tools.jar\n\nsince the Catalina JSP compilation requires these settings.", "creator": "maxpoon@graduate.hku.hk", "is_private": false, "id": 32456, "time": "2003-03-05T11:43:47Z", "bug_id": 17666, "creation_time": "2003-03-05T11:43:47Z", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "maxpoon@graduate.hku.hk", "is_private": false, "count": 2, "id": 32584, "time": "2003-03-06T18:17:33Z", "bug_id": 17666, "creation_time": "2003-03-06T18:17:33Z", "text": "First, sorry that the Tomcat version is actually 4.1.18 (not LE) instead of 4.1.8.\n\nSecond, as mentioned, I have set JAVA_HOME to point to the JDK and checked that:-\n%CATALINA_HOME%\\bin\\setclasspath.bat will actually include the corresponding\n%JAVA_HOME%\\lib\\tools.jar in the CLASSPATH so there should be no need to set\nCLASSPATH separately.  However, I was still getting the enclosed error, i.e.:-\n\n \"Unable to find a javac compiler;\n  com.sun.tools.javac.Main is not on the classpath.\n  Perhaps JAVA_HOME does not point to the JDK\"\n\nSo, instead of working on the JAVA_HOME problem, I copied\n%JAVA_HOME%\\lib\\tools.jar (containing the class file for\n<com.sun.tools.javac.Main> into %CATALINA_HOME%\\common\\lib so it resides with\nother catalina 'common' jar files, stop Tomcat (could not stop normally but need\nto right-click on tomcat.exe from the Windows Task Manager Process listing, and\nthen chose 'Debug'), and then restart Tomcat and eventually have it working\napparently.\n\nHope it will continue to work smoothly.  This is my installation experience on\nTomcat 4.1.18 on Win2K Professional."}, {"attachment_id": null, "tags": [], "creator": "remm@apache.org", "is_private": false, "count": 3, "id": 35879, "time": "2003-04-23T11:07:09Z", "bug_id": 17666, "creation_time": "2003-04-23T11:07:09Z", "text": "Yes, the workaround is to copy tools.jar manually. The root issue is very hard\nto fix (I tried ...)."}]