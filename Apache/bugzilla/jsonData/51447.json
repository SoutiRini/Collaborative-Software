[{"count": 0, "tags": [], "bug_id": 51447, "attachment_id": 27223, "id": 147556, "time": "2011-06-28T11:15:18Z", "creator": "mashmk02@gmail.com", "creation_time": "2011-06-28T11:15:18Z", "is_private": false, "text": "Created attachment 27223\npatch\n\nSteps to reproduce:\n\n(1) Start 3 Tomcat instances that are using BackupManager.\n\n(2) Run 3 HTMLManagers corresponding to each node.\n\n(3) Run web application that has distributable in its web.xml.\n\n(4) Click the link of the number of sessions for this application.\n\n(5) If the displayed session type is Backup, click the link of session id.\nAnd return to sessions list page soon.\nThen, the session type change to Primary.\n\nWhen the session detail page is displayed, getSessionForNameAndId() calls ctxt.getManager().findSession(), and findSession() calls session.get(id).\nIf the cluster is using BackupManager, \"session\" is instance of LazyReplicatedMap. And LazyReplicatedMap.get() set session type to \"primary\". \n\nI thought the solutions of this issue.\n\n(A) Not use findSession(). Retrieve session information from local map.\n-> see attached patch\n\nOr\n(B) Write the note as follows to the sessions list page. \n\"If you click the backup type's sessionid, then the type change to primary.\"\n\nRegards."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 147564, "time": "2011-06-28T16:22:33Z", "bug_id": 51447, "creation_time": "2011-06-28T16:22:33Z", "text": "Thanks for the report and the patch. A variation has been applied to 7.0.x and will be in 7.0.17 onwards."}]