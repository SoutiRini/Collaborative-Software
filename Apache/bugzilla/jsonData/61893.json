[{"count": 0, "tags": [], "bug_id": 61893, "text": "Hello,\n\nI'm sending a simple HTTP request to a server every 3 seconds.\nWhen using \"Java\" as the HTTP client implementation, it looks fine.\nWhen using \"HttpClient 4\", at every new request, JMeter actively closes the session (that it paradoxically kept alive so it can reuse it) and opens a new one.\n\n- Tested with JMeter 3.2 and 3.3.\n- Default properties.\n- CentOS 7.\n- OpenJDK 1.8.0.121.\n\n\n\"Java\":\n\n11:11:44.613158 IP hamster2.49818 > lvs1.http: Flags [S], seq 1271935213, win 29200, options [mss 1460,sackOK,TS val 955183476 ecr 0,nop,wscale 7], length 0\n11:11:44.613422 IP lvs1.http > hamster2.49818: Flags [S.], seq 3766469023, ack 1271935214, win 28960, options [mss 1460,sackOK,TS val 689809457 ecr 955183476,nop,wscale 7], length 0\n11:11:44.613443 IP hamster2.49818 > lvs1.http: Flags [.], ack 1, win 229, options [nop,nop,TS val 955183476 ecr 689809457], length 0\n11:11:44.614096 IP hamster2.49818 > lvs1.http: Flags [P.], seq 1:154, ack 1, win 229, options [nop,nop,TS val 955183477 ecr 689809457], length 153\n11:11:44.614259 IP lvs1.http > hamster2.49818: Flags [.], ack 154, win 235, options [nop,nop,TS val 689809458 ecr 955183477], length 0\n11:11:44.614400 IP lvs1.http > hamster2.49818: Flags [P.], seq 1:288, ack 154, win 235, options [nop,nop,TS val 689809458 ecr 955183477], length 287\n11:11:44.614417 IP hamster2.49818 > lvs1.http: Flags [.], ack 288, win 237, options [nop,nop,TS val 955183477 ecr 689809458], length 0\n11:11:47.618035 IP hamster2.49818 > lvs1.http: Flags [P.], seq 154:307, ack 288, win 237, options [nop,nop,TS val 955186481 ecr 689809458], length 153\n11:11:47.618783 IP lvs1.http > hamster2.49818: Flags [P.], seq 288:574, ack 307, win 243, options [nop,nop,TS val 689812462 ecr 955186481], length 286\n11:11:47.618960 IP hamster2.49818 > lvs1.http: Flags [.], ack 574, win 245, options [nop,nop,TS val 955186482 ecr 689812462], length 0\n11:11:50.620914 IP hamster2.49818 > lvs1.http: Flags [P.], seq 307:460, ack 574, win 245, options [nop,nop,TS val 955189484 ecr 689812462], length 153\n11:11:50.621764 IP lvs1.http > hamster2.49818: Flags [P.], seq 574:860, ack 460, win 252, options [nop,nop,TS val 689815465 ecr 955189484], length 286\n11:11:50.622048 IP hamster2.49818 > lvs1.http: Flags [.], ack 860, win 254, options [nop,nop,TS val 955189485 ecr 689815465], length 0\n\n\"HttpClient 4\":\n\n11:10:31.108077 IP hamster2.49810 > lvs1.http: Flags [S], seq 2663459439, win 29200, options [mss 1460,sackOK,TS val 955109971 ecr 0,nop,wscale 7], length 0\n11:10:31.108626 IP lvs1.http > hamster2.49810: Flags [S.], seq 3485845941, ack 2663459440, win 28960, options [mss 1460,sackOK,TS val 689735952 ecr 955109971,nop,wscale 7], length 0\n11:10:31.108697 IP hamster2.49810 > lvs1.http: Flags [.], ack 1, win 229, options [nop,nop,TS val 955109972 ecr 689735952], length 0\n11:10:31.109750 IP hamster2.49810 > lvs1.http: Flags [P.], seq 1:118, ack 1, win 229, options [nop,nop,TS val 955109973 ecr 689735952], length 117\n11:10:31.110268 IP lvs1.http > hamster2.49810: Flags [.], ack 118, win 227, options [nop,nop,TS val 689735954 ecr 955109973], length 0\n11:10:31.110625 IP lvs1.http > hamster2.49810: Flags [P.], seq 1:288, ack 118, win 227, options [nop,nop,TS val 689735954 ecr 955109973], length 287\n11:10:31.110826 IP hamster2.49810 > lvs1.http: Flags [.], ack 288, win 237, options [nop,nop,TS val 955109974 ecr 689735954], length 0\n11:10:34.112462 IP hamster2.49810 > lvs1.http: Flags [F.], seq 118, ack 288, win 237, options [nop,nop,TS val 955112975 ecr 689735954], length 0\n11:10:34.112977 IP lvs1.http > hamster2.49810: Flags [F.], seq 288, ack 119, win 227, options [nop,nop,TS val 689738956 ecr 955112975], length 0\n11:10:34.113048 IP hamster2.49810 > lvs1.http: Flags [.], ack 289, win 237, options [nop,nop,TS val 955112976 ecr 689738956], length 0\n11:10:34.113231 IP hamster2.49812 > lvs1.http: Flags [S], seq 4266872972, win 29200, options [mss 1460,sackOK,TS val 955112976 ecr 0,nop,wscale 7], length 0\n11:10:34.113553 IP lvs1.http > hamster2.49812: Flags [S.], seq 2801491578, ack 4266872973, win 28960, options [mss 1460,sackOK,TS val 689738957 ecr 955112976,nop,wscale 7], length 0\n11:10:34.113590 IP hamster2.49812 > lvs1.http: Flags [.], ack 1, win 229, options [nop,nop,TS val 955112976 ecr 689738957], length 0\n11:10:34.114561 IP hamster2.49812 > lvs1.http: Flags [P.], seq 1:118, ack 1, win 229, options [nop,nop,TS val 955112977 ecr 689738957], length 117\n11:10:34.115025 IP lvs1.http > hamster2.49812: Flags [.], ack 118, win 227, options [nop,nop,TS val 689738958 ecr 955112977], length 0\n11:10:34.115535 IP lvs1.http > hamster2.49812: Flags [P.], seq 1:288, ack 118, win 227, options [nop,nop,TS val 689738959 ecr 955112977], length 287\n11:10:34.115787 IP hamster2.49812 > lvs1.http: Flags [.], ack 288, win 237, options [nop,nop,TS val 955112979 ecr 689738959], length 0\n11:10:37.117435 IP hamster2.49812 > lvs1.http: Flags [F.], seq 118, ack 288, win 237, options [nop,nop,TS val 955115980 ecr 689738959], length 0\n11:10:37.117991 IP lvs1.http > hamster2.49812: Flags [F.], seq 288, ack 119, win 227, options [nop,nop,TS val 689741961 ecr 955115980], length 0\n11:10:37.118025 IP hamster2.49812 > lvs1.http: Flags [.], ack 289, win 237, options [nop,nop,TS val 955115981 ecr 689741961], length 0\n11:10:37.118077 IP hamster2.49814 > lvs1.http: Flags [S], seq 527754721, win 29200, options [mss 1460,sackOK,TS val 955115981 ecr 0,nop,wscale 7], length 0\n11:10:37.118342 IP lvs1.http > hamster2.49814: Flags [S.], seq 3082836056, ack 527754722, win 28960, options [mss 1460,sackOK,TS val 689741962 ecr 955115981,nop,wscale 7], length 0\n11:10:37.118371 IP hamster2.49814 > lvs1.http: Flags [.], ack 1, win 229, options [nop,nop,TS val 955115981 ecr 689741962], length 0\n11:10:37.119340 IP hamster2.49814 > lvs1.http: Flags [P.], seq 1:118, ack 1, win 229, options [nop,nop,TS val 955115982 ecr 689741962], length 117\n11:10:37.119690 IP lvs1.http > hamster2.49814: Flags [.], ack 118, win 227, options [nop,nop,TS val 689741963 ecr 955115982], length 0\n11:10:37.120247 IP lvs1.http > hamster2.49814: Flags [P.], seq 1:288, ack 118, win 227, options [nop,nop,TS val 689741964 ecr 955115982], length 287\n11:10:37.120407 IP hamster2.49814 > lvs1.http: Flags [.], ack 288, win 237, options [nop,nop,TS val 955115983 ecr 689741964], length 0", "id": 202735, "time": "2017-12-12T15:10:49Z", "creator": "gilles.roux@atos.net", "creation_time": "2017-12-12T15:10:49Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 61893, "attachment_id": null, "id": 202737, "time": "2017-12-12T15:22:50Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-12-12T15:22:50Z", "is_private": false, "text": "Hello,\nYou need to adjust the following properties:\n- httpclient4.idletimeout\n- httpclient4.validate_after_inactivity\n- httpclient4.time_to_live\n\nSee:\nhttp://jmeter.apache.org/usermanual/properties_reference.html#httpclient4"}, {"count": 2, "tags": [], "bug_id": 61893, "attachment_id": null, "id": 202738, "time": "2017-12-12T15:38:01Z", "creator": "gilles.roux@atos.net", "creation_time": "2017-12-12T15:38:01Z", "is_private": false, "text": "\nThank you.\nYou are right, I had another look and it was coming from the interval between requests being bigger than the TTL.\n\nNot a bug, sorry."}, {"count": 3, "tags": [], "text": "\nThank you.\nYou are right, I had another look and it was coming from the interval between requests being bigger than the TTL.\n\nNot a bug, sorry. To be rejected.", "is_private": false, "bug_id": 61893, "id": 202740, "time": "2017-12-12T15:43:44Z", "creator": "gilles.roux@atos.net", "creation_time": "2017-12-12T15:43:44Z", "attachment_id": null}]