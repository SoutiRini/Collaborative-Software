[{"count": 0, "tags": [], "bug_id": 56803, "attachment_id": null, "is_private": false, "id": 176841, "time": "2014-08-01T23:55:52Z", "creator": "rajengineer30@gmail.com", "creation_time": "2014-08-01T23:55:52Z", "text": "I can see the below snippets in the apache error log.During this time, the apache hung and killing all the httpd and the restart of apache solved the issue..\n\nCould anyone please give some tips? \nWhich module is throwing this messages? what could have caused this?\n\n<snip>\n[Tue Jun 17 15:56:08 2014] [notice] child pid 15415 exit signal Aborted (6)\n[Tue Jun 17 15:56:08 2014] [alert] Child 15416 returned a Fatal error... Apache is exiting!\n[Tue Jun 17 15:56:08 2014] [emerg] (22)Invalid argument: couldn't grab the accept mutex\n..\n..\n..\n[Tue Jun 17 15:56:08 2014] [emerg] (22)Invalid argument: couldn't grab the accept mutex\n[Tue Jun 17 15:56:08 2014] [emerg] (22)Invalid argument: couldn't grab the accept mutex\n[Tue Jun 17 15:56:08 2014] [emerg] (22)Invalid argument: couldn't grab the accept mutex\n[Tue Jun 17 15:56:08 2014] [emerg] (22)Invalid argument: couldn't grab the accept mutex\n</snip>"}, {"count": 1, "tags": [], "text": "Hello Rajeshwaran,\n\nThis message is issued from the following code segment in server/mpm/prefork/prefork.c:\n\nstatic void accept_mutex_on(void)\n{\n    apr_status_t rv = apr_proc_mutex_lock(accept_mutex);\n    if (rv != APR_SUCCESS) {\n        const char *msg = \"couldn't grab the accept mutex\";\n\n        if (ap_my_generation !=\n            ap_scoreboard_image->global->running_generation) {\n            ap_log_error(APLOG_MARK, APLOG_DEBUG, rv, NULL, \"%s\", msg);\n            clean_child_exit(0);\n        }\n        else {\n            ap_log_error(APLOG_MARK, APLOG_EMERG, rv, NULL, \"%s\", msg);\n            exit(APEXIT_CHILDFATAL);\n        }\n    }\n}\n\nThanks,\n\nMike Rumph", "is_private": false, "id": 176854, "creator": "mike.rumph@oracle.com", "time": "2014-08-03T15:43:08Z", "bug_id": 56803, "creation_time": "2014-08-03T15:43:08Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "trawick@apache.org", "text": ">Which module is throwing this messages? what could have caused this?\n>[Tue Jun 17 15:56:08 2014] [notice] child pid 15415 exit signal Aborted (6)\n\nGet a core dump, use gdb to get a backtrace for all threads from the coredump.  We need to see that information to investigate this issue.\n\nHopefully this helps you with that: http://httpd.apache.org/dev/debugging.html\n\n>[Tue Jun 17 15:56:08 2014] [alert] Child 15416 returned a Fatal error... Apache is exiting!\n\nThere should be some earlier message describing the problem.  \n\n>[Tue Jun 17 15:56:08 2014] [emerg] (22)Invalid argument: couldn't grab the accept mutex\n\nHave you configured the AcceptMutex directive in any of your .conf files?  If so, what is the entire directive?\n\nIf this is Linux and you configured AcceptMutex to something, I'd comment out the AcceptMutex directive.", "id": 176894, "time": "2014-08-04T23:42:41Z", "bug_id": 56803, "creation_time": "2014-08-04T23:42:41Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "rajengineer30@gmail.com", "text": "Thanks for your response..\n\n(In reply to Jeff Trawick from comment #2)\n> >Which module is throwing this messages? what could have caused this?\n> >[Tue Jun 17 15:56:08 2014] [notice] child pid 15415 exit signal Aborted (6)\n> \n> Get a core dump, use gdb to get a backtrace for all threads from the\n> coredump.  We need to see that information to investigate this issue.\n> \n> Hopefully this helps you with that:\n> http://httpd.apache.org/dev/debugging.html\n--------------------------------------------------------------------------------------------------------------------------------------\n-------> This is happening only in main production system.The problem is that we couldn't reproduce this in local.I had searched for the earlier error message([mod_pagespeed 0.9.17.7-716 @15415] [0617/155607:FATAL:net/instaweb/apache/), that is before the error 'child pid 15415 exit signal Aborted (6)' and found the below links..But i'm not sure , whether the 'mod pagespeed' brought the apache down..The said that this modpagespeed error would not occur once we upgrade the mod pagespeed to mod_pagespeed 0.9.18.7(we are currently using mod_pagespeed 0.9.17.716)..Since, we unable to reproduce this we are doubt on upgrading the modpagespeed will fix it or not..\n\nfor the mod page speed error, i found the below links,\n\nhttps://code.google.com/p/modpagespeed/issues/detail?id=334\n\nhttps://code.google.com/p/modpagespeed/issues/detail?id=334#c9\n--------------------------------------------------------------------------------------------------------------------------------------\n> \n> >[Tue Jun 17 15:56:08 2014] [alert] Child 15416 returned a Fatal error... Apache is exiting!\n> \n> There should be some earlier message describing the problem.  \n--------------------------------------------------------------------------------------------------------------------------------------\n----> Yes, the earlier message is the below,\n--------------------------------------------------------------------------------------------------------------------------------------\nTue Jun 17 15:56:07 2014] [alert] [mod_pagespeed 0.9.17.7-716 @15415] [0617/155607:FATAL:net/instaweb/apache/\nserf_url_async_fetcher.cc(466)] Check failed: 0 == apr_thread_create(&thread_id_, __null, SerfThreadFn, this, pool_) (0 vs. 11)\\nBacktrace:\\n\\t/opt/collabnet/teamforge/dist/pagespeed/mod_pagespeed.so(+0x36b1a) [0x7fe0d7489b1a]\\n\\t/opt/collabnet/teamforge/dist/pagespeed/mod_pagespeed.so(+0x24efa) [0x7fe0d7477efa]\\n\\t/opt/collabnet/teamforge/dist/pagespeed/mod_pagespeed.so(+0x38b6d) [0x7fe0d748bb6d]\\n\\t/opt/collabnet/teamforge/dist/pagespeed/mod_pagespeed.so(+0x34982) [0x7fe0d7487982]\\n\\t/opt/collabnet/teamforge/dist/pagespeed/mod_pagespeed.so(+0x2b0e7) [0x7fe0d747e0e7]\\n\\t/opt/collabnet/teamforge/dist/pagespeed/mod_pagespeed.so(+0x9b33b) [0x7fe0d74ee33b]\\n\\t/opt/collabnet/teamforge/dist/pagespeed/mod_pagespeed.so(+0x9a3d5) [0x7fe0d74ed3d5]\\n\\t/opt/collabnet/teamforge/dist/pagespeed/mod_pagespeed.so(+0x9a4fc) [0x7fe0d74ed4fc]\\n\\t/opt/collabnet/teamforge/dist/pagespeed/mod_pagespeed.so(+0x23b24) [0x7fe0d7476b24]\\n\\t/usr/sbin/httpd(ap_run_translate_name+0x68) [0x7fe0e3b748d8]\\n\\t/usr/sbin/httpd(ap_process_request_internal+0x126) [0x7fe0e3b76ab6]\\n\\t/usr/sbin/httpd(ap_process_request+0x1b0) [0x7fe0e3b88b20]\\n\\t/usr/sbin/httpd(+0x379a8) [0x7fe0e3b859a8]\\n\\t/usr/sbin/httpd(ap_run_process_connection+0x68) [0x7fe0e3b816b8]\\n\\t/usr/sbin/httpd(+0x3f977) [0x7fe0e3b8d977]\\n\\t/usr/sbin/httpd(+0x3fc8a) [0x7fe0e3b8dc8a]\\n\\t/usr/sbin/httpd(ap_mpm_run+0xc1c) [0x7fe0e3b8e90c]\\n\\t/usr/sbin/httpd(main+0xb60) [0x7fe0e3b65900]\\n\\t/lib64/libc.so.6(__libc_start_main+0xfd) [0x7fe0e20a7d1d]\\n\\t/usr/sbin/httpd(+0x16899) [0x7fe0e3b64899]\n[Tue Jun 17 15:56:07 2014] [warn] [mod_pagespeed 0.9.17.7-716 @14792] https://eforge.ericsson.se/sf/tracker/do/listArtifacts/projects.titansim/tracker.support_ticket:858: Retaining contents of script tag even though script is external.\n..\n[Tue Jun 17 15:56:01 2014] [notice] child pid 15075 exit signal Aborted (6)\n[Tue Jun 17 15:56:01 2014] [notice] child pid 15092 exit signal Aborted (6)\n[Tue Jun 17 15:56:01 2014] [notice] child pid 15276 exit signal Aborted (6)\n[Tue Jun 17 15:56:01 2014] [notice] child pid 15277 exit signal Aborted (6)\n[Tue Jun 17 15:56:01 2014] [notice] child pid 15279 exit signal Aborted (6)\n...\n[Tue Jun 17 15:56:08 2014] [notice] child pid 15415 exit signal Aborted (6)\n--------------------------------------------------------------------------------------------------------------------------------------\n\n> \n> >[Tue Jun 17 15:56:08 2014] [emerg] (22)Invalid argument: couldn't grab the accept mutex\n> \n> Have you configured the AcceptMutex directive in any of your .conf files? \n> If so, what is the entire directive?\n--------------------------------------------------------------------------------------------------------------------------------------\n----------->We have not configure the AcceptMutex directive..We had enabled the apache log to debug and found that it's using default mutex 'sysvsem'..refer below log snippet..\n---------->[debug] prefork.c(1018): AcceptMutex: sysvsem (default: sysvsem)\n--------------------------------------------------------------------------------------------------------------------------------------\n> \n> If this is Linux and you configured AcceptMutex to something, I'd comment\n> out the AcceptMutex directive.\n--------------------------------------------------------------------------------------------------------------------------------------\n-----> yes this is a linux system...\n--------------------------------------------------------------------------------------------------------------------------------------", "id": 176931, "time": "2014-08-05T17:59:56Z", "bug_id": 56803, "creation_time": "2014-08-05T17:59:56Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 56803, "is_private": false, "text": "The first error (SIGABORT) is definitely mod_pagespeed, based on the extra error information you posted.\n\nI don't know for sure what causes this:  Child 15416 returned a Fatal error...  Apache is exiting!\n\nmod_pagespeed might be exiting a process with APEXIT_CHILDFATAL.\n\nI don't think we can help further; the mod_pagespeed issue must be addressed.", "id": 176935, "time": "2014-08-05T21:16:00Z", "creator": "trawick@apache.org", "creation_time": "2014-08-05T21:16:00Z", "attachment_id": null}]