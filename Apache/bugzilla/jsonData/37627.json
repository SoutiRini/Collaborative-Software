[{"count": 0, "text": "After adding the APR library to the java.library.path [as described in\nhttp://tomcat.apache.org/tomcat-5.5-doc/apr.html], certain JSPs that produce a\nlot of output (but used to be served in under a second) are now very slow and\nproduce incomplete output (after reloading a few times). Sometimes the header\nappears only after a few kilobytes of output, at which point the output is cut\noff...\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n...\nServer: Apache-Coyote/1.1\nX-Total-Results: 389\nContent-Type: text/html;charset=UTF-8\nContent-Language: en-US\nContent-Length: 22858\nDate: Thu, 24 Nov 2005 08:41:56 GMT\n\nAny ideas what is going on here?", "bug_id": 37627, "attachment_id": null, "id": 82810, "time": "2005-11-24T14:03:58Z", "creator": "eric.jain@gmail.com", "creation_time": "2005-11-24T14:03:58Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 37627, "attachment_id": 17031, "is_private": false, "id": 82811, "time": "2005-11-24T14:04:50Z", "creator": "eric.jain@gmail.com", "creation_time": "2005-11-24T14:04:50Z", "text": "Created attachment 17031\nTest application"}, {"count": 2, "text": "Nope, this JSP works fine for me. Another attempt ?", "bug_id": 37627, "attachment_id": null, "id": 82814, "time": "2005-11-24T14:19:43Z", "creator": "remm@apache.org", "creation_time": "2005-11-24T14:19:43Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 37627, "is_private": false, "text": "A bad bug report ... The header returned gave away you were using a large\nbufferSize (which BTW I consider an inefficient waste of memory), however.", "id": 82817, "time": "2005-11-24T15:07:46Z", "creator": "remm@apache.org", "creation_time": "2005-11-24T15:07:46Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "eric.jain@gmail.com", "attachment_id": null, "id": 82818, "time": "2005-11-24T15:25:12Z", "bug_id": 37627, "creation_time": "2005-11-24T15:25:12Z", "is_private": false, "text": "I am using a Tomcat 5.5.12 default installation, and never set any \"bufferSize\"\nanywhere!? Do I need to change the default value?\n"}, {"count": 5, "tags": [], "creator": "eric.jain@gmail.com", "attachment_id": null, "id": 82819, "time": "2005-11-24T15:27:23Z", "bug_id": 37627, "creation_time": "2005-11-24T15:27:23Z", "is_private": false, "text": "It seems that the problem can't be reproduced on Windows. Perhaps I did\nsomething wrong during setup? I have apr-1.2.2 installed.\n"}, {"count": 6, "text": "(In reply to comment #4)\n> I am using a Tomcat 5.5.12 default installation, and never set any \"bufferSize\"\n> anywhere!? Do I need to change the default value?\n\nContent-Length: 22858 proves you are using response.setBufferSize.", "bug_id": 37627, "attachment_id": null, "id": 82822, "time": "2005-11-24T15:41:44Z", "creator": "remm@apache.org", "creation_time": "2005-11-24T15:41:44Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "bug_id": 37627, "attachment_id": null, "is_private": false, "id": 82823, "time": "2005-11-24T16:00:20Z", "creator": "eric.jain@gmail.com", "creation_time": "2005-11-24T16:00:20Z", "text": "(In reply to comment #6)\n> Content-Length: 22858 proves you are using response.setBufferSize.\n\nPlease have a look at the attached test application; it's a simple jsp page, no\nresponse.setBufferSize in sight!"}, {"count": 8, "text": "Looks like this is still an issue with 5.5.15. Here is a further observation:\nThe problem doesn't occur when connecting from the same machine, but only when\nconnecting from a remote machine (tested Windows to Linux).\n\nSample telnet session:\n\nGET /test/test.jspx HTTP/1.0\n\nHTTP/1.1 200 OK\nServer: Apache-Coyote/1.1\nContent-Type: application/xhtml+xml;charset=UTF-8\nDate: Thu, 23 Feb 2006 23:56:37 GMT\nConnection: close\n\n[snipped lots of data]\nThis is a\n\nConnection to host lost.\n\nI've added autoFlush=\"true\" and buffer=\"8kb\" to the jsp:directive.page element\n(though I believe that's the default anyway), no effect.\n\nIf someone can confirm that the same test page can be retrieved fine from their\nown installation (remotely), I'll try to dig deeper...\n", "bug_id": 37627, "attachment_id": null, "id": 86178, "time": "2006-02-24T01:09:18Z", "creator": "eric.jain@gmail.com", "creation_time": "2006-02-24T01:09:18Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "bug_id": 37627, "is_private": false, "text": "I have the same effect. Sometimes page is not loaded completely. Sometimes the\nsame pages are loaded twice, means: Page is delivered let's say for 70% and then\nthe complete response-content is delivered another time in the page. Effect:\nDouble Response in page. \n\nNumber of characters until the response is repeated(in my example case): 204613.\nThe page is utf-8. Other cases were 221656, ...\n----- Snip ------------\n\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\"\n\"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">\n<html>\n\n<head>\n...........\n\ndden_'].value='_\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\nhttp://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd>\n<html>\n\n........\n\n----- Snap ------------\n\nWe have a JSF/Hibernate application. \nOur environment: Linux(don't get the effect on windows); on Linux we have\nAJP/1.3 and apr1.2.2; tomcat version 5.5.20;\n\nUnfortunately the behaviour in our case is nondeterministic. :-( Seems to depend\non loading time of jsp. The bigger the page the higher the possibility to get\nthe strange behaviour.", "id": 95888, "time": "2006-11-16T00:59:56Z", "creator": "konkow@independencesoft.com", "creation_time": "2006-11-16T00:59:56Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "mturk@apache.org", "attachment_id": null, "id": 95906, "time": "2006-11-16T09:34:41Z", "bug_id": 37627, "creation_time": "2006-11-16T09:34:41Z", "is_private": false, "text": "Tested with:\n\nApache Tomcat 5.5.20/tomcat-native-1.1.7\nLinux dev17.qa.atl.jboss.com 2.6.9-42.0.2.ELsmp #1 SMP Thu Aug 17 17:57:31 EDT\n2006 x86_64 x86_64 x86_64 GNU/Linux\n\nClient Windows XP over OpenVPN\nC:\\>telnet\nWelcome to Microsoft Telnet Client\n\nEscape Character is 'CTRL+]'\n\nMicrosoft Telnet> set logfile C:\\telnet.log\nLog file : C:\\telnet.log\nClient logging on\nMicrosoft Telnet> o dev17 10080\nGET /tomcat-bug/index.jspx HTTP/1.0\n\nlogfile contains:\nGET /tomcat-bug/index.jspx HTTP/1.0\nHTTP/1.1 200 OK\nServer: Apache-Coyote/1.1\nSet-Cookie: JSESSIONID=33BDEE522FC7C10FA33839458369DDB6; Path=/tomcat-bug\nContent-Type: application/xhtml+xml;charset=UTF-8\nDate: Thu, 16 Nov 2006 17:28:12 GMT\nConnection: close\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n                                      <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1\n.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n                                                                   <html xmlns=\"\nhttp://www.w3.org/1999/xhtml\"><head><title>Test</title></head><body><p>This is a\n\n....\n\n\n98</li><li>This is a list item 999</li><li>This is a list item 1000</li></ul></b\nody></html>\n\n\nSo everything works just fine.\nPlease test with the Tomcat 5.5.20 and Tomcat-Native 1.1.7"}, {"text": "As recommended we have tested things with Tomcat 5.5.20, Tomcat-Native 1.1.7 and\nalso updated apr to 1.2.7. \nUnfortunately things are NOT resolved. We still got the strange behaviour as\ndescribed below. For getting things working we are running currently without\nnative support: no problems so far...\nIf there are any magic options for getting debug information you need, let me know.", "tags": [], "bug_id": 37627, "is_private": false, "count": 11, "id": 95997, "time": "2006-11-19T23:17:23Z", "creator": "konkow@independencesoft.com", "creation_time": "2006-11-19T23:17:23Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 37627, "attachment_id": null, "is_private": false, "id": 123784, "time": "2009-01-05T16:01:11Z", "creator": "markt@apache.org", "creation_time": "2009-01-05T16:01:11Z", "text": "Given the trouble we have had re-producing this, could you test with 5.5.27 and tc-native 1.1.16 in case one of the many fixes since 5.5.20 and 1.1.7 has fixed this."}, {"count": 13, "text": "Given the lack of activity, I am going to assume that this has been fixed in later tcnative versions. It certainly sounds like some of the issues seen in earlier releases.\n\nAs always, if you still see this issue with the latest stable releases then please re-open and provide the steps to reproduce.", "bug_id": 37627, "attachment_id": null, "id": 127926, "time": "2009-06-12T16:34:19Z", "creator": "markt@apache.org", "creation_time": "2009-06-12T16:34:19Z", "tags": [], "is_private": false}]