[{"count": 0, "attachment_id": null, "creator": "henrik@websolver.dk", "text": "According to RFC 6455 the server should reply on a a handshake with \"HTTP/1.1 101 Switching Protocols\"\n\nThe status description (\"Switching Protocols\") is not present in the 8.5.5 release.\n\nSome client libraries rely on the status description (\"Switching Protocols\") to be present.\nI have tested this on Tomcat 8.0.30 and in that release the description is present as part of the server's reply on a handshake request from the client.\n\nI don't know if there was some specific reason for not including the description, however the RFC says iot should be there.\n\nThanks for your support.\n\nHenrik", "id": 193927, "time": "2016-09-22T14:11:30Z", "bug_id": 60166, "creation_time": "2016-09-22T14:11:30Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 60166, "text": "The reason phrase is optional in HTTP/1.1. The problem IMO is that originally the websockets spec was written as a binary spec when it dealt with HTTP, it was a very odd read. Now as I go through the current websockets RFC, it is clear \"Switching Protocols\" is not a requirement (4.2.2 - 5 - 1), so things look better.", "id": 193928, "time": "2016-09-22T14:20:31Z", "creator": "remm@apache.org", "creation_time": "2016-09-22T14:20:31Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Hi Remy,\n\nThanks for the fast answer. I have done some further readings on the RFC 2616 (the HTTP protocol RFC), that is referred to by the RFC 6455.\n\nIn section 6.1 it says:\nThe first line of a Response message is the Status-Line, consisting\nof the protocol version followed by a numeric status code and its\nassociated textual phrase, with each element separated by SP\ncharacters. No CR or LF is allowed except in the final CRLF sequence.\n\n       Status-Line = HTTP-Version SP Status-Code SP Reason-Phrase CRLF\n\nwhere SP is a space char, so a valid status line would look like:\n\nHTTP/1.1 101 Switching Protocols\n\nHowever, the RFC 2616, does not say that the phrase is optional.\n\nIs says in section 6.1.1 is says \".....The client is not required to examine or display the Reason-Phrase\".\n\nWhich IMO means (to summarize): The server SHOULD make sure that both the Status-Code and the Reason-Phrase is there, but the client COULD ignore the Reason-Phrase and operate solely on the Status-Code.\n\nBut, as always with RFCs and protocols in general. It depends on the reader. :-)\n\nBest regards\n\nHenrik", "is_private": false, "bug_id": 60166, "id": 193931, "time": "2016-09-22T14:42:09Z", "creator": "henrik@websolver.dk", "creation_time": "2016-09-22T14:42:09Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "remm@apache.org", "is_private": false, "id": 193932, "attachment_id": null, "bug_id": 60166, "creation_time": "2016-09-22T14:51:21Z", "time": "2016-09-22T14:51:21Z", "text": "Right, I'll let you have fun with your BZ then :) Hopefully you're not expecting a fix, ever."}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 193933, "time": "2016-09-22T15:29:37Z", "bug_id": 60166, "creation_time": "2016-09-22T15:29:37Z", "text": "RFC 2616 is deprecated. That RFC 6455 refers to it does not change that. The reason phrase is optional in HTTP 1.1.  It won't be added back. Clients that expect a reason phrase are broken and should be fixed."}, {"count": 5, "tags": [], "text": "Mark and Remy\n\nThanks for your answers.\nI will request the library developer for a change. \n\nKeep up the good Work.", "is_private": false, "bug_id": 60166, "id": 193936, "time": "2016-09-22T17:04:56Z", "creator": "henrik@websolver.dk", "creation_time": "2016-09-22T17:04:56Z", "attachment_id": null}]