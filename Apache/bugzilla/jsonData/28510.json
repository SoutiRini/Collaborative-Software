[{"count": 0, "tags": [], "bug_id": 28510, "attachment_id": null, "id": 56155, "time": "2004-04-21T07:35:16Z", "creator": "f.boffo@teckpro.de", "creation_time": "2004-04-21T07:35:16Z", "is_private": false, "text": "I use form-based authentication for my wepapp. If I type the right username and \npassword it works correctly. If I type wrong username and/or password I\u00b4m \nredirected to an errorpage. There is a link to try again, it redirect to \nloginpage. When I type then the right username and password the login-page is \nshown again. If I call my index.jsp in the Browser I'm logged in and if I type \nthe right username and password I get an error:\n\nHTTP Status 404 - /teckportal/j_security_check\n--------------------------------------------------------------------------------\ntype Status report\nmessage /teckportal/j_security_check\n\ndescription The requested resource (/teckportal/j_security_check) is not \navailable.\n\n\n-----------my login.jsp------------------\n<%@ taglib uri=\"/WEB-INF/struts-html.tld\" prefix=\"html\" %>\n<%@ taglib uri=\"/WEB-INF/struts-bean.tld\" prefix=\"bean\" %>\n\n\n<html>\n<head>\n<title><bean:message key=\"page.title\"/></title>\n<body bgcolor=\"white\" leftmargin=\"0\" rightmargin=\"0\" bottommargin=\"0\" \ntopmargin=\"0\">\n\n<map name=\"teckproLink\">\n\t<AREA shape=\"rect\" coords=\"410,0,590,40\" href=\"http://www.teckpro.de\" \ntarget=\"_blank\">\n</map>\n\n\n<table width=\"100%\" height=\"100%\">\n\t<tr >\t\n\t\t<td background=<%=request.getContextPath()%><bean:message key \n=\"header.bgimage\" bundle=\"layout\" /> height=\"<bean:message key='header.height' \nbundle='layout'/>\">\n\t\t\t<img src=\"<%=request.getContextPath()%>/pix/spacer.gif\" \nwidth=\"100%\" height=\"100%\" border=\"0\" usemap=\"#teckproLink\"/>\t\t\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<td align=\"center\" valign=\"middle\">\n\t\t\t<form method=\"POST\" action='<%= response.encodeURL\n(\"j_security_check\") %>' >\n\t\t\t  <table border=\"0\" cellspacing=\"5\">\n\t\t\t    <tr>\n\t\t\t      <th align=\"right\"> <bean:message \nkey=\"login.username\"/> </th>\n\t\t\t      <td align=\"left\"><input type=\"text\" \nname=\"j_username\"></td>\n\t\t\t    </tr>\n\t\t\t    <tr>\n\t\t\t      <th align=\"right\"> <bean:message \nkey=\"login.password\"/> </th>\n\t\t\t      <td align=\"left\"><input type=\"password\" \nname=\"j_password\"></td>\n\t\t\t    </tr>\n\t\t\t    <tr>\n\t\t\t      <td align=\"right\"><input type=\"submit\" value=\"Log \nIn\"></td>\n\t\t\t      <td align=\"left\"><input type=\"reset\"></td>\n\t\t\t    </tr>\n\t\t\t  </table>\n\t\t\t</form>\n\t\t</td>\n\t</tr>\t\n\n</table>\n</body>\n</html>\n\n-----------------my error.jsp-----------------------------\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\n<HTML>\n<HEAD>\n<%@ taglib uri=\"/WEB-INF/struts-html.tld\" prefix=\"html\" %>\n<%@ taglib uri=\"/WEB-INF/struts-bean.tld\" prefix=\"bean\" %>\n<%@ page \nlanguage=\"java\"\ncontentType=\"text/html; charset=ISO-8859-1\"\npageEncoding=\"ISO-8859-1\"\n%>\n<META http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">\n<META name=\"GENERATOR\" content=\"IBM WebSphere Studio\">\n<META http-equiv=\"Content-Style-Type\" content=\"text/css\">\n<LINK href=\"theme/Master.css\" rel=\"stylesheet\"\n\ttype=\"text/css\">\n<TITLE>errorTable.jsp</TITLE>\n</HEAD>\n<body bgcolor=\"white\" leftmargin=\"0\" rightmargin=\"0\" bottommargin=\"0\" \ntopmargin=\"0\">\n\n<map name=\"teckproLink\">\n\t<AREA shape=\"rect\" coords=\"410,0,590,40\" href=\"http://www.teckpro.de\" \ntarget=\"_blank\">\n</map>\n\n\n<table width=\"100%\" height=\"100%\">\n\t<tr >\t\n\t\t<td background=<%=request.getContextPath()%><bean:message key \n=\"header.bgimage\" bundle=\"layout\" /> height=\"<bean:message key='header.height' \nbundle='layout'/>\">\n\t\t\t<img src=\"<%=request.getContextPath()%>/pix/spacer.gif\" \nwidth=\"100%\" height=\"100%\" border=\"0\" usemap=\"#teckproLink\"/>\n\t\t</td>\n\t</tr>\n\n\t<tr>\n\t\t<td align=\"center\" valign=\"middle\">\n\t\t\t<bean:message key=\"login.error\"/>\n\t\t\t<a href='<%= response.encodeURL(\"login.jsp\") %>'> \n<bean:message key=\"login.errorlink\"/> </a>.\n\t\t</td>\n\t</tr>\t\n\n</table>\n</body>\n</HTML>\n\n\n-----------------my web.xml----------------------------------\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE web-app PUBLIC \"-//Sun Microsystems, Inc.//DTD Web Application \n2.3//EN\" \"http://java.sun.com/dtd/web-app_2_3.dtd\">\n<web-app id=\"WebApp\">\n\t<display-name>teckportal</display-name>\n\t<servlet>\n\t\t<servlet-name>action</servlet-name>\n\t\t<servlet-class>org.apache.struts.action.ActionServlet</servlet-\nclass>\n\t\t<init-param>\n\t\t\t<param-name>config</param-name>\n\t\t\t<param-value>/WEB-INF/struts-config.xml</param-value>\n\t\t</init-param>\n\t\t<init-param>\n\t\t\t<param-name>debug</param-name>\n\t\t\t<param-value>2</param-value>\n\t\t</init-param>\n\t\t<init-param>\n\t\t\t<param-name>detail</param-name>\n\t\t\t<param-value>2</param-value>\n\t\t</init-param>\n\t\t<init-param>\n\t\t\t<param-name>validate</param-name>\n\t\t\t<param-value>true</param-value>\n\t\t</init-param>\n\t\t<load-on-startup>2</load-on-startup>\n\t</servlet>\n\t<servlet-mapping>\n\t\t<servlet-name>action</servlet-name>\n\t\t<url-pattern>*.do</url-pattern>\n\t</servlet-mapping>\n\t<welcome-file-list>\n\t\t<welcome-file>index.html</welcome-file>\n\t\t<welcome-file>index.htm</welcome-file>\n\t\t<welcome-file>index.jsp</welcome-file>\n\t\t<welcome-file>default.html</welcome-file>\n\t\t<welcome-file>default.htm</welcome-file>\n\t\t<welcome-file>default.jsp</welcome-file>\n\t</welcome-file-list>\n\t<taglib>\n\t\t<taglib-uri>/WEB-INF/struts-bean.tld</taglib-uri>\n\t\t<taglib-location>/WEB-INF/struts-bean.tld</taglib-location>\n\t</taglib>\n\t<taglib>\n\t\t<taglib-uri>/WEB-INF/struts-html.tld</taglib-uri>\n\t\t<taglib-location>/WEB-INF/struts-html.tld</taglib-location>\n\t</taglib>\n\t<taglib>\n\t\t<taglib-uri>/WEB-INF/struts-logic.tld</taglib-uri>\n\t\t<taglib-location>/WEB-INF/struts-logic.tld</taglib-location>\n\t</taglib>\n\t<taglib>\n\t\t<taglib-uri>/WEB-INF/struts-nested.tld</taglib-uri>\n\t\t<taglib-location>/WEB-INF/struts-nested.tld</taglib-location>\n\t</taglib>\n\t<taglib>\n\t\t<taglib-uri>/WEB-INF/struts-template.tld</taglib-uri>\n\t\t<taglib-location>/WEB-INF/struts-template.tld</taglib-location>\n\t</taglib>\n\t<taglib>\n\t\t<taglib-uri>/WEB-INF/struts-tiles.tld</taglib-uri>\n\t\t<taglib-location>/WEB-INF/struts-tiles.tld</taglib-location>\n\t</taglib>\n\t\n\t<security-constraint>\n        <web-resource-collection>\n                <web-resource-name>teckportal</web-resource-name>\n                <description> accessible by authenticated users of the \nteckportal role</description>\n                <url-pattern>*.jsp</url-pattern>\n                <url-pattern>*.do</url-pattern>\n                <http-method>GET</http-method>\n                <http-method>POST</http-method>\n                <http-method>PUT</http-method>\n                <http-method>DELETE</http-method>\n        </web-resource-collection>\n        <auth-constraint>\n                <description>These roles are allowed access</description>\n                <role-name>teckportal</role-name>\n        </auth-constraint>\n\t</security-constraint>\n\t\n\t<login-config>\n        <auth-method>FORM</auth-method>\n        <realm-name>teckportal</realm-name>\n        <form-login-config>\n                <form-login-page>/login.jsp</form-login-page>\n                <form-error-page>/error.jsp</form-error-page>             \n        </form-login-config>\n\t</login-config>\n\t\n\t<security-role>\n\t        <description>Only 'teckportal' role is allowed to access this \nweb application</description>\n\t        <role-name>teckportal</role-name>\n\t</security-role>\n\n</web-app>"}, {"count": 1, "tags": [], "creator": "jfarcand@apache.org", "attachment_id": null, "text": "Do not reference the login page directly:\n\n<a href='<%= response.encodeURL(\"login.jsp\") %>'> \n\nbut use the servlet mapping mechanism instead. Also, for such question, please\ndo not open bugs, but post you request to tomcat-user@jakarta.apache.org\n\n-- Jeanfrancois", "id": 56166, "time": "2004-04-21T14:38:20Z", "bug_id": 28510, "creation_time": "2004-04-21T14:38:20Z", "is_private": false}]