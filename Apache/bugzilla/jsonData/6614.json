[{"count": 0, "tags": [], "text": "I'm starting tomcat through a URLClassLoader than knows where the\ntomcat Bootstrap.jar and tools.jar are.\n\nHowever, tomcat fails to start because it can't find \norg.apache.catalina.loader.Reloader (see the backtrace at the end of the \nmessage).\n\nI believe the problem is because of the lines in Bootstrap:\n\n            commonLoader =\n                ClassLoaderFactory.createClassLoader(unpacked, packed, null);\n\nSince the parent classloader is null, a StandardclassLoader is created that uses \nthe ClassLoader.getSystemClassLoader() rather than my class loader.\n\nI think if you change the line from null to\nthis.getClass().getClassLoader() it would then use my class loader and tomcat \ncould start.\n\n\n\njava.lang.reflect.InvocationTargetException: java.lang.NoClassDefFoundError: \norg/apache/catalina/loader/Reloader\n\tat java.lang.ClassLoader.defineClass0(Native Method)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:486)\n\tat \njava.security.SecureClassLoader.defineClass(SecureClassLoader.java:111)\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:248)\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\tat \norg.apache.catalina.loader.StandardClassLoader.findClass(StandardClassLoader.jav\na:671)\n\tat \norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLoader.jav\na:1090)\n\tat \norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLoader.jav\na:989)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:313)\n\tat \norg.apache.catalina.core.StandardContext.start(StandardContext.java:3313)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:612)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n\tat \norg.apache.catalina.core.StandardEngine.start(StandardEngine.java:307)\n\tat \norg.apache.catalina.core.StandardService.start(StandardService.java:388)\n\tat \norg.apache.catalina.core.StandardServer.start(StandardServer.java:505)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:776)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:681)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:179)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:243)\n\tat TomcatBootstrap.start(TomcatBootstrap.java:8)", "is_private": false, "bug_id": 6614, "id": 11032, "time": "2002-02-21T16:20:51Z", "creator": "KAnderson@bbn.com", "creation_time": "2002-02-21T16:20:51Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 6614, "attachment_id": null, "is_private": false, "id": 142317, "time": "2010-12-02T15:45:16Z", "creator": "markt@apache.org", "creation_time": "2010-12-02T15:45:16Z", "text": "This was addressed quite a few years ago in r304092.\n\nTomcat 7 onwards has a new class for embedding, org.apache.catalina.startup.Tomcat, that should also avoid this issues."}]