[{"count": 0, "tags": [], "bug_id": 29346, "attachment_id": null, "text": "We cannot serialize sessions that instantiate \norg.apache.catalina.session.StandardSessionFacade which prevents both restarts \nand clustering.\n\nOur solution was to modify StandardSessionFacade.java so the class implements \nSerializable and this solve our problem.\n\nOld:\npublic class StandardSessionFacade\n    implements HttpSession\n\nNew:\npublic class StandardSessionFacade\n    implements HttpSession, Serializable \n\nOur specific environment that causes this bad state is jboss-3.2.4 RC2 with \nTomcat 5.0.24 running cfmx 6.1 for j2ee but this problem has been happening as \nearly as jboss 3.0.6 with tomcat 4.1.18 running cfmx 6.0 for j2ee.\n\nIs there any reason this class should not be serializable?", "id": 58566, "time": "2004-06-02T17:23:54Z", "creator": "vcrandall@accela.com", "creation_time": "2004-06-02T17:23:54Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 29346, "text": "Yes, there is: I don't see why you attempt to serialize it. The container will\nuse its internal session object, and everything will be fine.", "count": 1, "id": 58567, "time": "2004-06-02T17:26:05Z", "creator": "remm@apache.org", "creation_time": "2004-06-02T17:26:05Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 29346, "is_private": false, "id": 58568, "time": "2004-06-02T17:32:34Z", "creator": "fhanik@apache.org", "creation_time": "2004-06-02T17:32:34Z", "tags": [], "text": "The entire reason with a facade in the first place is to restrict access from \nuser code into the internals of the servlet container.\nCatalina doesn't give users the ability to serialize and deserialize sessions \nfrom user code. \n\nMarking this bug as invalid, since it is not a defect. It is expected behavior."}, {"count": 3, "tags": [], "bug_id": 29346, "text": "Thanks, I suspected as much. \n\nWe aren't serializing\\deserializing the sessions from user code; jboss \nshutdown creates the the serialization exception as does the automatic \nserialization caused by session replication for server clusters.\n\nIt sounds to me like there may be an issue with how jboss serializes sessions \nand I know there are other issues with cfmx serialization.", "id": 58569, "time": "2004-06-02T17:42:50Z", "creator": "vcrandall@accela.com", "creation_time": "2004-06-02T17:42:50Z", "is_private": false, "attachment_id": null}]