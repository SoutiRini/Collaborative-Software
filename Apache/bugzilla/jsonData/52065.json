[{"count": 0, "tags": [], "bug_id": 52065, "attachment_id": 27827, "id": 150799, "time": "2011-10-20T12:25:08Z", "creator": "razvan_zarzu@yahoo.com", "creation_time": "2011-10-20T12:25:08Z", "is_private": false, "text": "Created attachment 27827\nThe error output from make\n\nI get the following error when running make in the Apache httpd-2.2.21 folder (running Cygwin):\n\n/bin/sh /home/[removed]/httpd-2.2.21/srclib/apr/libtool --silent --mode=compile gcc -g -O2   -DHAVE_CONFIG_H -DCYGWIN   -I./include -I/home/Razvan/httpd-2.2.21/srclib/apr/include/arch/unix -I./include/arch/unix -I/home/Razvan/httpd-2.2.21/srclib/apr/include/arch/unix -I/home/Razvan/httpd-2.2.21/srclib/apr/include  -o strings/apr_snprintf.lo -c strings/apr_snprintf.c && touch strings/apr_snprintf.lo\nIn file included from /usr/include/sys/socket.h:16,\n                 from ./include/apr.h:168,\n                 from strings/apr_snprintf.c:17:\n/usr/include/cygwin/socket.h:29: error: redefinition of `struct sockaddr'\n/usr/include/cygwin/socket.h:41: error: redefinition of `struct sockaddr_storage'\n\nIt seems running on Cygwin includes both the Windows file, which is located at /usr/include/w32api/winsock.h (or /usr/include/w32/winsock2.h), and the /usr/include/sys/socket.h, causing some redeclarations for the two structs above and also for most of the functions (see error.log attached).\n\nOne possible solution would be to change apr.h.in and count also for the case when there is Cygwin. So change this:\n\n167  #if APR_HAVE_SYS_SOCKET_H \n168  #include <sys/socket.h>\n169  #endif\n\nin apr.h.in to something like (CYGWIN needs to be defined by ./configure, I guess(?)):\n\n167  #if APR_HAVE_SYS_SOCKET_H && !CYGWIN\n168  #include <sys/socket.h>\n169  #endif\n\nAlso, this redeclaration problem appears in other header files.\nThank you."}, {"text": "Just to spare you a bunch of frustration, apr hasn't been particularly well\nsynchronized with cygwin, given that this would be an abstraction layer upon\nlayer upon layer on top of ntdll (apr, cyg, win32).  Plenty of opportunity\nfor flaws.\n\nThere has been some effort in integrating apr for mingw/msys and you might\nhave a more pleasant experience with that.", "tags": [], "bug_id": 52065, "is_private": false, "count": 1, "id": 150814, "time": "2011-10-21T01:58:56Z", "creator": "wrowe@apache.org", "creation_time": "2011-10-21T01:58:56Z", "attachment_id": null}]