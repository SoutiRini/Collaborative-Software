[{"count": 0, "tags": [], "bug_id": 10195, "is_private": false, "id": 18502, "attachment_id": null, "creator": "mccullj@email.uah.edu", "creation_time": "2002-06-24T21:07:25Z", "time": "2002-06-24T21:07:25Z", "text": "Building Apache 1.3.26 (which is not on the version menu yet) the \n\"old-fashioned\" way (src/Configure).  Didn't change Configuration, using all \ndefaults.  Output of Configure shows \"using system Expat\", even though Expat is \nnot installed.  Here is output of Configure:\n\n./Configure\nUsing config file: Configuration\nCreating Makefile\n + configured for Solaris 251 platform\n + setting C compiler to gcc\n + setting C pre-processor to gcc -E\n + checking for system header files\n + adding selected modules\n + using system Expat\n + checking sizeof various data types\n + doing sanity check on compiler and options\nCreating Makefile in support\nCreating Makefile in os/unix\nCreating Makefile in ap\nCreating Makefile in main\nCreating Makefile in modules/standard\n\nI suspect that helpers/TestCompile is not reporting an error, leading the \nConfigure script to think that Expat is installed.  When I do the make, it dies \nat this point:\n\n===> main\ngcc -c  -I../os/unix -I../include   -DSOLARIS2=251 -DNO_DL_NEEDED  gen_test_char\n.c\ngcc  -DSOLARIS2=251 -DNO_DL_NEEDED    -o gen_test_char gen_test_char.o  -lsocket\n -lnsl -lpthread -lexpat\n./gen_test_char >test_char.h\nld.so.1: ./gen_test_char: fatal: libexpat.so.0: open failed: No such file or dir\nectory\nKilled\nmake[1]: *** [test_char.h] Error 137\nmake: *** [subdirs] Error 1\n\nThe way I have gotten around this problem for my machine is to comment out part \nof the script starting at about line 1885 as follows:\n\nif [ \"x$RULE_EXPAT\" = \"xyes\" ]; then\n#    if ./helpers/TestCompile lib expat; then\n#        echo \" + using system Expat\"\n#        LIBS=\"$LIBS -lexpat\"\n#    else\n#        if [ ! -d ./lib/expat-lite/ ]; then\n#            echo \"ERROR: RULE_EXPAT set to \\\"yes\\\" but is not available.\"\n#           exit 1\n#        fi\n        echo \" + using builtin Expat\"\n        EXPATLIB=\"lib/expat-lite/libexpat.a\"\n        APLIBDIRS=\"expat-lite $APLIBDIRS\"\n        CFLAGS=\"$CFLAGS -DUSE_EXPAT -I\\$(SRCDIR)/lib/expat-lite\"\n#    fi\n\nThis causes the distributed Expat to be compiled and used, and the make finishes \nas expected.\n\nThis was also a problem in 1.3.23."}, {"count": 1, "tags": [], "creator": "mark2@hkspirit.net", "text": "i also find this problem under 1.3.28-dev, 1.3.27, 1.3.24. the method mentioned\nhere do bypass the problem. although i have expat's library installed on\n/usr/local/lib, the src/Configure script doesn't detect expat at all.\nexpat-1.95.6 was installed before apache and /usr/local/lib was already added\nonto /etc/ld.so.conf .\n\ni guess this problem doesn't happen in most enviroment, just a few individual\nencounter. most likly the Configure script need to add some patch. please have\nmy system information for reference.\n\nconfigure's flag:\n--prefix=/usr/local/apache --with-perl=/usr/local/perl --enable-module=expires\n--enable-module=rewrite --enable-module=mime_magic --enable-module=speling\n\nsystem information from dmesg:\nLinux version 2.4.20 (root@xxx) (gcc version 2.95.3 20010315 (release)) #2 Mon\nJan 20 20:57:57 HKT 2003\n160MB LOWMEM available.\nInitializing CPU#0\nDetected 233.865 MHz processor.\nConsole: colour VGA+ 80x25\nCalibrating delay loop... 466.94 BogoMIPS\nMemory: 159332k/163840k available (1239k kernel code, 4124k reserved, 605k data,\n272k init, 0k highmem)\nIntel Pentium with F0 0F bug - workaround enabled.\nCPU:     After generic, caps: 008001bf 00000000 00000000 00000000\nCPU:             Common caps: 008001bf 00000000 00000000 00000000\nCPU: Intel Pentium MMX stepping 03\nChecking 'hlt' instruction... OK.\nAdding Swap: 327784k swap-space (priority -1)\n\n", "id": 31781, "time": "2003-02-21T22:55:47Z", "bug_id": 10195, "creation_time": "2003-02-21T22:55:47Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 10195, "text": "I can confirm this is /still/ a problem in 1.3.29 Took me hours to find this \npage and the workaround (for which, thanks!). ", "id": 52551, "time": "2004-02-19T11:44:27Z", "creator": "r1chardgreen@yahoo.com.au", "creation_time": "2004-02-19T11:44:27Z", "is_private": false, "attachment_id": null}]