[{"count": 0, "tags": [], "bug_id": 42733, "text": "The behavior of the available task with a nested <filepath> has changed from\n1.6.5 to 1.7: Since 1.7.0 files can't be collected with nested filesets like\n\n<available file=\"list.xml\" >\n\t<filepath>\n\t\t<fileset dir=\".\" includes=\"**/*.xml\"/>\n\t</filepath>\n</available>\n \nTherefore the build-file described below produces different output with the two\nant versions:\n ANT 1.6.5:\n    [echo] Value of exist0: true\n    [echo] Value of exist1: true\n    [echo] Value of exist2: true\n    [echo] Value of exist3: ${exist3} - no existence expected\n    [echo] Value of exist4: true\n    [echo] Value of exist5: ${exist5} - no existence expected\n    [echo] Value of exist6: true\n    [echo] Value of exist9: true\n\n ANT 1.7.0:\n    [echo] Value of exist0: true\n    [echo] Value of exist1: ${exist1}\n    [echo] Value of exist2: ${exist2}\n    [echo] Value of exist3: ${exist3} - no existence expected\n    [echo] Value of exist4: true\n    [echo] Value of exist5: ${exist5} - no existence expected\n    [echo] Value of exist6: ${exist6}\n    [echo] Value of exist9: ${exist9}\n\n\n\n<project name=\"test\" default=\"test\" basedir=\".\">\n\t<description>Test target for the available task.</description>\n\n\t<target name=\"prepare\">\n\t\t<mkdir dir=\"subDir\"/>\n\t\t<echo file=\"subDir/list.xml\">\n\t\t\t<![CDATA[\n<xxx>\n   <bbb>AAA</bbb>\n   <bbb>BBB</bbb>\n   <bbb>CCC</bbb>\n</xxx>\n\t\t\t]]>\n\t\t</echo>\n\t</target>\n\t\n\t<target name=\"available\"  description=\"Test available\">\n\t\t<condition property=\"exist0\" value=\"true\">\n\t\t\t<available file=\"list.xml\" filepath=\"subDir\">\n\t\t\t</available>\n\t\t</condition>\n\t\t<echo message=\"Value of exist0: ${exist0}\"/>\n\t\t\n\t\t<condition property=\"exist1\" value=\"true\">\n\t\t\t<available file=\"list.xml\" >\n\t\t\t\t<filepath>\n\t\t\t\t\t<fileset dir=\".\" includes=\"**/*.xml\"/>\n\t\t\t\t</filepath>\n\t\t\t</available>\n\t\t</condition>\n\t\t<echo message=\"Value of exist1: ${exist1}\"/>\n\t\t\n\t\t<condition property=\"exist2\" value=\"true\">\n\t\t\t<available file=\"list.xml\" >\n\t\t\t\t<filepath>\n\t\t\t\t\t<fileset dir=\".\" includes=\"**/*.xml\">\n\t\t\t\t\t\t<contains text=\"AAA\"/>\n\t\t\t\t\t</fileset>\n\t\t\t\t</filepath>\n\t\t\t</available>\n\t\t</condition>\n\t\t<echo message=\"Value of exist2: ${exist2}\"/>\n\t\t\n\t\t<condition property=\"exist3\" value=\"true\">\n\t\t\t<available file=\"list.xml\" >\n\t\t\t\t<filepath>\n\t\t\t\t\t<fileset dir=\".\" includes=\"**/*.xml\">\n\t\t\t\t\t\t<contains text=\"AAH\"/>\n\t\t\t\t\t</fileset>\n\t\t\t\t</filepath>\n\t\t\t</available>\n\t\t</condition>\n\t\t<echo message=\"Value of exist3: ${exist3} - no existence expected\"/>\n\t\t\n\t\t<condition property=\"exist4\" value=\"true\">\n\t\t\t<available file=\"list.xml\" filepath=\"subDir\" >\n\t\t\t\t<filepath>\n\t\t\t\t\t<fileset file=\"list.xml\"/>\n\t\t\t\t</filepath>\n\t\t\t</available>\n\t\t</condition>\n\t\t<echo message=\"Value of exist4: ${exist4}\"/>\n\t\t\n\t\t<condition property=\"exist5\" value=\"true\">\n\t\t\t<available file=\"list.xml\" >\n\t\t\t\t<filepath>\n\t\t\t\t\t<fileset file=\"subDir/list.xml\" >\n\t\t\t\t\t\t<selector>\n\t\t\t\t\t\t\t<or>\n\t\t\t\t\t\t\t\t<contains text=\"BBA\"/>\n\t\t\t\t\t\t\t\t<contains text=\"AAG\"/>\n\t\t\t\t\t\t\t</or>\n\t\t\t\t\t\t</selector>\n\t\t\t\t\t</fileset>\n\t\t\t\t</filepath>\n\t\t\t</available>\n\t\t</condition>\n\t\t<echo message=\"Value of exist5: ${exist5} - no existence expected\"/>\n\t\t\n\t\t<condition property=\"exist6\" value=\"true\">\n\t\t\t<available file=\"list.xml\" >\n\t\t\t\t<filepath>\n\t\t\t\t\t<fileset file=\"subDir/list.xml\" >\n\t\t\t\t\t\t<selector>\n\t\t\t\t\t\t\t<or>\n\t\t\t\t\t\t\t\t<contains text=\"BBB\"/>\n\t\t\t\t\t\t\t\t<contains text=\"AAG\"/>\n\t\t\t\t\t\t\t</or>\n\t\t\t\t\t\t</selector>\n\t\t\t\t\t</fileset>\n\t\t\t\t</filepath>\n\t\t\t</available>\n\t\t</condition>\n\t\t<echo message=\"Value of exist6: ${exist6}\"/>\n\t\t\n\t\t<condition property=\"exist9\" value=\"true\">\n\t\t\t<available file=\"list.xml\" filepath=\"subDir/subSubDir\" >\n\t\t\t</available>\n\t\t</condition>\n\t\t<echo message=\"Value of exist9: ${exist9}\"/>\n\t\t\n\t<!--\t<condition property=\"exist11\" value=\"true\">\n\t\t\t<available file=\"list.xml\"  filepath=\"subDir\" >\n\t\t\t\t<filepath>\n\t\t\t\t\t<fileset file=\"subDir/list.xml\" >\n\t\t\t\t\t\t<selector>\n\t\t\t\t\t\t\t<or>\n\t\t\t\t\t\t\t\t<contains text=\"BBA\"/>\n\t\t\t\t\t\t\t\t<contains text=\"AAG\"/>\n\t\t\t\t\t\t\t</or>\n\t\t\t\t\t\t</selector>\n\t\t\t\t\t</fileset>\n\t\t\t\t</filepath>\n\t\t\t</available>\n\t\t</condition>\n\t\t<echo message=\"Value of exist11: ${exist11} - no existence expected\"/>-->\n\t\t\n\t</target>\n\t\n\t<target name=\"test\" depends=\"prepare,available\"/>\n\n</project>", "id": 104686, "time": "2007-06-25T08:19:49Z", "creator": "Tobias.Kaese@gmx.net", "creation_time": "2007-06-25T08:19:49Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "mbenson@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of 42734 ***", "id": 104689, "time": "2007-06-25T08:26:04Z", "bug_id": 42733, "creation_time": "2007-06-25T08:26:04Z", "tags": [], "is_private": false}]