[{"count": 0, "text": "The Java version check code in bin/jmeter script in 2.12 fails when run on Solaris 10.\n\nExample failure output:\n\n-bash-3.2$ /opt/apache-jmeter-2.12/bin/jmeter\n/opt/apache-jmeter-2.12/bin/jmeter: syntax error at line 32: `CURRENT_VERSION=$' unexpected\n\nLine 32 contains:\n\nCURRENT_VERSION=$(\"$_java\" -version 2>&1 | awk -F '\"' '/version/ {print $2}')\n\nThis syntax is not accepted by the standard shell /bin/sh.\n\nMore about the system:\n\n-bash-3.2$ uname -a\nSunOS ssessdevbuild 5.10 Generic_147147-26 sun4v sparc sun4v\n\nJMeter 2.11 does not have the Java version check and works on Solaris 10.", "bug_id": 57608, "attachment_id": null, "id": 181199, "time": "2015-02-19T23:16:11Z", "creator": "michael.strasser@team.telstra.com", "creation_time": "2015-02-19T23:16:11Z", "tags": [], "is_private": false}, {"count": 1, "text": "Could you please check, whether\n\nCURRENT_VERSION=`\"$_java\" -version 2>&1 | awk -F '\"' '/version/ {print $2}'`\n\nworks for you? It should be compatible with any shel.\n\nAny other problems with the script?\n\nThanks,\n\nRainer", "bug_id": 57608, "attachment_id": null, "id": 181201, "time": "2015-02-20T03:15:32Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2015-02-20T03:15:32Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 57608, "text": "Hi Rainer, thanks for your quick response.\n\nReplacing $( ... ) with ` ... ` works in this Solaris shell.\n\nThere was also a problem with the awk command in the same line. The version of awk on Solaris 10 cannot have a space between the -F option and the field separator (gawk allows one).\n\nHere is a diff between the original and the version that works on Solaris:\n\n-bash-3.2$ diff jmeter.orig jmeter\n32,34c32,34\n< CURRENT_VERSION=$(\"$_java\" -version 2>&1 | awk -F '\"' '/version/ {print $2}')\n< minimal_version=$(echo $MINIMAL_VERSION | awk -F'.' '{ print $2 }')\n< current_version=$(echo $CURRENT_VERSION | awk -F'.' '{ print $2 }')\n---\n> CURRENT_VERSION=`\"$_java\" -version 2>&1 | awk -F'\"' '/version/ {print $2}'`\n> minimal_version=`echo $MINIMAL_VERSION | awk -F'.' '{ print $2 }'`\n> current_version=`echo $CURRENT_VERSION | awk -F'.' '{ print $2 }'`\n46c46\n< case $(uname) in\n---\n> case `uname` in", "id": 181202, "time": "2015-02-20T04:30:33Z", "creator": "michael.strasser@team.telstra.com", "creation_time": "2015-02-20T04:30:33Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 57608, "text": "I also fixed the $(uname) and applied the change to both, bin/jmeter.sh and bin/jmeter which in trunk both had the problematic lines. No other JMeter shell scripts seem to use the sub shell notation $(...).", "id": 181203, "time": "2015-02-20T05:17:28Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2015-02-20T05:17:28Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "Date: Fri Feb 20 05:15:13 2015\nNew Revision: 1661060\n\nURL: http://svn.apache.org/r1661060\nLog:\nBug 57608 - Java version check in bin/jmeter script\nin 2.12 fails on Solaris 10\n\nBugzilla Id: 57608\n\nModified:\n    jmeter/trunk/bin/jmeter\n    jmeter/trunk/bin/jmeter.sh\n    jmeter/trunk/xdocs/changes.xml", "attachment_id": null, "bug_id": 57608, "id": 181204, "time": "2015-02-20T05:17:53Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2015-02-20T05:17:53Z", "is_private": false}]