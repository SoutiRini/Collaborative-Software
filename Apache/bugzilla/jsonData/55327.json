[{"count": 0, "tags": [], "bug_id": 55327, "text": "Apache 2.4.6 seg faults when stopped, failing to free semaphore arrays. I have had the same issue with 2.4.4 also.\n\nWe are running on RH 6.2. We have built the Apache ourselves. We are using APR 1.4.6 in this case, but have the same issue with 1.4.8. We are using apr-util 1.5.2.\n\nI did a gdb trace as seen below.\n\nBR,\nLeif Gustafsson\n\nGDB trace\n---\nContinuing.\n\nProgram received signal SIGTERM, Terminated.\n0x00000034e10de2d3 in __select_nocancel () from /lib64/libc.so.6\n(gdb) c\nContinuing.\n\nProgram received signal SIGSEGV, Segmentation fault.\napr_palloc (pool=0x16acff8, in_size=38) at memory/unix/apr_pools.c:684\n684\t    if (size <= node_free_space(active)) {\n(gdb) bt\n#0  apr_palloc (pool=0x16acff8, in_size=38) at memory/unix/apr_pools.c:684\n#1  0x00007eff89a43ccc in apr_pstrcat (a=0x16acff8) at strings/apr_strings.c:149\n#2  0x00007eff85c00bdb in socache_dbm_destroy (ctx=0x16a5b28, s=<value optimized out>) at mod_socache_dbm.c:179\n#3  0x00007eff859e9cda in ssl_scache_kill (s=0x1385558) at ssl_scache.c:100\n#4  0x00007eff859d7c56 in ssl_init_ModuleKill (data=<value optimized out>) at ssl_engine_init.c:1745\n#5  0x00007eff89a4d15e in run_cleanups (pool=0x135c138) at memory/unix/apr_pools.c:2352\n#6  apr_pool_destroy (pool=0x135c138) at memory/unix/apr_pools.c:814\n#7  0x00007eff89a4d135 in apr_pool_destroy (pool=0x135a128) at memory/unix/apr_pools.c:811\n#8  0x000000000042813f in destroy_and_exit_process (process=0x135a218, process_exit_value=0) at main.c:264\n#9  0x0000000000429486 in main (argc=5, argv=0x7fff7770ae58) at main.c:784", "id": 168935, "time": "2013-07-30T07:19:39Z", "creator": "leif.gustafsson@hp.com", "creation_time": "2013-07-30T07:19:39Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 55327, "is_private": false, "text": "When started we have 259 semaphores allocated.\n\nWhen stopped 255 semaphores are left allocated. Is the number 255 a coincidence or not. ?", "id": 168936, "time": "2013-07-30T07:33:41Z", "creator": "leif.gustafsson@hp.com", "creation_time": "2013-07-30T07:33:41Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 55327, "text": "We received a similar report at,\n\n  https://bugs.gentoo.org/show_bug.cgi?id=525222\n\nThe stack trace is different, but both wind up in apr_palloc, at memory/unix/apr_pools.c:684. Maybe related, who knows.", "id": 180030, "time": "2014-12-26T16:37:36Z", "creator": "michael@orlitzky.com", "creation_time": "2014-12-26T16:37:36Z", "is_private": false, "attachment_id": null}]