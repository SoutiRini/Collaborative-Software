[{"count": 0, "tags": [], "text": "The docs for apr_pool_cleanup_run() say the function will \"Use 'data' instead of\nthe data that was registered with the cleanup.\"\n\nSee http://apr.apache.org/docs/apr/group__apr__pools.html#ga27\n\nThis is confusing and wrong, because unless the same address is passed as was\ngiven when registering the cleanup then no cleanup will be killed, so there is\nno \"data that was registered with the cleanup\".  Alternatively, if the same\npointer was given and a cleanup killed, then the two 'data' pointers have the\nsame value, so what does it matter which one is used?\n\nThe comment seems to have been written by someone trying to describe the\nimplementation, which is completely irrelevant to a user of the function who\nonly wants to know how it works.  The part about which 'data' is used should be\nremoved from the docs.", "is_private": false, "bug_id": 35975, "id": 77953, "time": "2005-08-02T18:34:08Z", "creator": "zilla@kayari.org", "creation_time": "2005-08-02T18:34:08Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "zilla@kayari.org", "text": "Created attachment 15853\nFix confusing docs\n\nThis patch removes the part I think is confusing, and corrects two instances of\n\"The pool register the cleanup with\" changing it to \"The pool to register the\ncleanup with\"", "id": 77954, "time": "2005-08-02T18:36:06Z", "bug_id": 35975, "creation_time": "2005-08-02T18:36:06Z", "is_private": false, "attachment_id": 15853}, {"count": 2, "tags": [], "text": "I feel a need to go through the docs for the various apr_pool_cleanup_xxx()\nfunctions and add more descriptive docs,  explaining that the combination of\nfunction pointer, data and pool defines \"a cleanup\" and that the same\ncombination must be used to unregister a cleanup.  Before I waste my time, would\nsuch a patch be accepted?", "attachment_id": null, "bug_id": 35975, "id": 77956, "time": "2005-08-02T18:38:27Z", "creator": "zilla@kayari.org", "creation_time": "2005-08-02T18:38:27Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 35975, "attachment_id": null, "id": 77960, "time": "2005-08-02T18:45:26Z", "creator": "wrowe@apache.org", "creation_time": "2005-08-02T18:45:26Z", "is_private": false, "text": "  We absolutely entertain docs patches, as well as code patches.  Please feel\n  free to proceed.  Should we keep this incident open and commit your entire\n  set of docs patches at once?"}, {"count": 4, "tags": [], "creator": "zilla@kayari.org", "attachment_id": null, "text": "Thanks for the quick response.  I'll try to submit a further patch today or\ntomorrow, so if you want to wait for that then I'll use this bug to collect them\nall.", "id": 77962, "time": "2005-08-02T18:50:30Z", "bug_id": 35975, "creation_time": "2005-08-02T18:50:30Z", "is_private": false}, {"count": 5, "tags": [], "creator": "zilla@kayari.org", "attachment_id": 16014, "text": "Created attachment 16014\nClarify docs for cleanup functions\n\n(Sorry for the delay, I was on holiday.)\n\nThis patch adds a Doxygen group for the cleanup functions, fixes some typos and\nIMHO clarifies the behaviour of some of the cleanup functions.\n\nFor the functions that unregister a cleanup I have said:\n\n  The most recently registered cleanup with the same values of @a p,\n  @a data and @a cleanup will be removed.\n\nThat description doesn't explicitly say that the cleanup is registered with\npool 'p' but I think saying \"the same values of p, data and cleanup\" is\naccurate enough but also short and pithy.  Would it be better to say something\nlike this?\n\n  Removes the last cleanup registered with @a p with the same values\n  of @a data and @cleanup.\n\nI think the wording I chose is most easily understood by a quick glance at the\ndocs and/or by people for whom English is not their first language, but I'm\nopen to better suggestions.", "id": 78423, "time": "2005-08-11T21:56:25Z", "bug_id": 35975, "creation_time": "2005-08-11T21:56:25Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 35975, "text": "Thanks for the patch.  This:\n\n+ * The most recently registered cleanup with the same values of @a p,\n+ * @a data and @a cleanup will be removed\n\nseems slightly ambiguous, as if there is some global list of cleanups indexed by\n(p, data, cleanup); I'd suggest instead:\n\n * The most cleanup most recently registered with p having the same values of\n * @a data and @a cleanup will be removed\n\nit would also worth noting that apr_pool_cleanup_for_exec runs all cleanups\nregistered with the global pool and all children thereof.  Any chance you could\nclean these these two things up and resubmit the patch to dev@apr.apache.org?\n", "id": 78927, "time": "2005-08-24T16:54:52Z", "creator": "jorton@redhat.com", "creation_time": "2005-08-24T16:54:52Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 35975, "text": "Sure, I'll do it this weekend. Thanks for the comments.", "id": 79046, "time": "2005-08-26T13:49:18Z", "creator": "zilla@kayari.org", "creation_time": "2005-08-26T13:49:18Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 35975, "text": "Created attachment 16231\nClarify docs for cleanup functions\n\nIncorporates suggestions in comment 6.", "id": 79118, "time": "2005-08-28T12:03:31Z", "creator": "zilla@kayari.org", "creation_time": "2005-08-28T12:03:31Z", "is_private": false, "attachment_id": 16231}, {"count": 9, "tags": [], "bug_id": 35975, "text": "Thanks for the patch.  Committed for trunk and 1.2.x.\n\nhttp://svn.apache.org/viewcvs?rev=264750&view=rev", "id": 79161, "time": "2005-08-30T12:40:19Z", "creator": "jorton@redhat.com", "creation_time": "2005-08-30T12:40:19Z", "is_private": false, "attachment_id": null}]