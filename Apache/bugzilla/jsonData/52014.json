[{"count": 0, "tags": [], "creator": "jukefox@web.de", "attachment_id": null, "is_private": false, "id": 150499, "time": "2011-10-12T17:24:02Z", "bug_id": 52014, "creation_time": "2011-10-12T17:24:02Z", "text": "The option to set encoding for console appender conflicts with Java option -Dfile.encoding.\nThe reason for my opinion is that I found that the ConsoleAppender-class does not honor the encoding of the System.out- / System.err-PrintStream-class which might differ from the ConsoleAppender setting. That is because you bypass the print-methods of the PrintStream-instance by using its write-methods.\nThis leads to an erroneous situation as soon as a program uses both of the two mechanisms to write something to the console: On the one hand by using a log4j-Logger-instance and on the other side by using System.out / System.err and its print-methods.\nThe System-classes print-methods will use the encoding specified with -Dfile.encoding whereas the log4j-mechanism will use its own encoding.\nFinally both write to the same destination (the console) with potentially different encodings.\n\nI really cannot think of any scenario, where I should ever use the encoding-setting for the console appender or am I missing something?\nIt only works safe when one ensures that the System-classes print-methods are never used within the program.\nAs a consequence I think that the enconding option is superfluous for the ConsoleAppender and its implementation which has been done with #15942 should be undone. Use -Dfile.encoding instead!\n\nAny comments on this are welcome.\n\nThanks."}]