[{"count": 0, "tags": [], "creator": "knst.kolinko@gmail.com", "text": "I am observing this with the current Tomcat 7 (built from revision 1605072)\nIf the following 3 conditions are met:\n1) Server is running in \"strict compliance\" mode\n2) There is a servlet that is mapped to context root using URL pattern \"\" (empty string) - per Servlet 3.0 mrel spec chapter 12.2 Specification of Mappings\n\nThen whenever Tomcat tries to compile a JSP page, it fails when trying to validate effective merged web.xml against the schema.\n\nWORKAROUND:\nTo work around the issue I disabled XML validation for this specific context, via <Context xmlValidation=\"false\"/>\n\nSTEPS TO REPRODUCE:\n1. Add the following mapping at the end of webapps/examples/WEB-INF/web.xml:\n[[[\n    <servlet-mapping>\n        <servlet-name>RequestInfoExample</servlet-name>\n        <url-pattern />\n    </servlet-mapping>\n]]]\n\n2. Configure Tomcat in \"strict compliance\" mode by adding the following line to conf/catalina.properties:\norg.apache.catalina.STRICT_SERVLET_COMPLIANCE=true\n\n3. Purge the work/ directory to remove compiled JSPs, if there are any.\n4. Start Tomcat\n\n5. Access http://localhost:8080/examples/\nThe \"Request Information Example\" page is shown. Thus the empty URL mapping is working correctly.\n\n6. Access a JSP page, http://localhost:8080/examples/jsp/jsp2/el/basic-arithmetic.jsp\nExpected: Some arithmetics demo page\nActual: Error 500\n\nHTTP Status 500 - org.apache.jasper.JasperException: XML parsing error on file org.apache.tomcat.util.scan.MergedWebXml: (line 176, col 21)\n\nStack Trace:\norg.apache.jasper.JasperException: org.apache.jasper.JasperException: XML parsing error on file org.apache.tomcat.util.scan.MergedWebXml: (line 176, col 21)\n\torg.apache.jasper.compiler.JspConfig.processWebDotXml(JspConfig.java:230)\n\torg.apache.jasper.compiler.JspConfig.init(JspConfig.java:243)\n\torg.apache.jasper.compiler.JspConfig.findJspProperty(JspConfig.java:302)\n\torg.apache.jasper.compiler.Compiler.generateJava(Compiler.java:114)\n(...)", "id": 176009, "time": "2014-06-24T13:23:50Z", "bug_id": 56665, "creation_time": "2014-06-24T13:23:50Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 56665, "text": "...\norg.xml.sax.SAXParseException: cvc-complex-type.2.4.b: The content of element 'servlet-mapping' is not complete. One of '{\"http://java.sun.com/xml/ns/javaee\":url-pattern}' is expected.\n\n\nRunning with <Context logEffectiveWebXml=\"true\"/> to log the generated merged web.xml I can see that an url-pattern element was lost from the generated mapping:\n\n  <servlet-mapping>\n    <servlet-name>RequestInfoExample</servlet-name>\n  </servlet-mapping>", "count": 1, "id": 176010, "time": "2014-06-24T13:27:45Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-24T13:27:45Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 56665, "text": "This has been fixed in trunk for 8.0.10 and in 7.0.x for 7.0.55 onwards.", "count": 2, "id": 176039, "time": "2014-06-25T14:10:05Z", "creator": "violetagg@apache.org", "creation_time": "2014-06-25T14:10:05Z", "is_private": false}]