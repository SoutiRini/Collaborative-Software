[{"count": 0, "tags": [], "bug_id": 60836, "attachment_id": null, "text": "Hello,\n\nstarting apache httpd 2.2 sometimes fails with the following error:\n\n    Invalid ThreadStackSize value: 1048576\n\nThe concerned code is here (mpm_common.c):\n\nconst char *ap_mpm_set_thread_stacksize(cmd_parms *cmd, void *dummy,\n\n                                        const char *arg)\n\n{\n\n    long value;\n\n    const char *err = ap_check_cmd_context(cmd, GLOBAL_ONLY);\n\n    if (err != NULL) {\n\n        return err;\n\n    }\n\n \n\n    value = strtol(arg, NULL, 0);\n\n    if (value < 0 || errno == ERANGE)\n\n        return apr_pstrcat(cmd->pool, \"Invalid ThreadStackSize value: \",\n\n                           arg, NULL);\n\n \n\n    ap_thread_stacksize = (apr_size_t)value;\n\n \n\n    return NULL;\n\n}\n\nbefore calling strtol you should init errno to 0, otherwise it will remain unchanged (if strtol succeeds). If errno has already the value 'ERANGE', the described error occurs.\n\nBest Regards\nPaolo", "id": 197531, "time": "2017-03-08T11:53:48Z", "creator": "paolo@adnovum.ch", "creation_time": "2017-03-08T11:53:48Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 60836, "attachment_id": null, "is_private": false, "id": 197533, "time": "2017-03-08T12:02:30Z", "creator": "paolo@adnovum.ch", "creation_time": "2017-03-08T12:02:30Z", "text": "I have just seen, that this bug has been fixed in version 2.2.32. So this ticket can be closed.\n\nSorry for the confusion."}, {"count": 2, "tags": [], "creator": "paolo@adnovum.ch", "text": "I have just seen, that this bug has been fixed in version 2.2.32. So this ticket can be closed.\n\nSorry for the confusion.", "id": 197534, "time": "2017-03-08T12:03:12Z", "bug_id": 60836, "creation_time": "2017-03-08T12:03:12Z", "is_private": false, "attachment_id": null}]