[{"count": 0, "attachment_id": null, "bug_id": 21348, "text": "A connection over \"http://v4.windowsupdate.microsoft.com/de/default.asp\" ist \nnot possible over proxy. Tested with win 2k, nt4, xp ( SP1 ). I get error code \n0x80072f76 from the side. Without proxy-server no problem.", "id": 40007, "time": "2003-07-04T19:34:28Z", "creator": "guenther38425@yahoo.de", "creation_time": "2003-07-04T19:34:28Z", "tags": [], "is_private": false}, {"id": 41576, "tags": [], "bug_id": 21348, "attachment_id": null, "count": 1, "text": "Same problem here using various Windows versions (XP, 2000, 98 SE) behind a\nWindows 2000 machine running Apache 2.0.46 (Win32). A patch was posted on the\ndev mailing list back on March 24, 2003. The patch fixes this issue which occurs\nbecause:\n\n\"Apache2 proxy seems to drop Content-Length header from replies to HEAD\nrequests. This is very bad for Microsoft's Windows Update system (and against\nHTTP spec). The problem is caused by CONTENT_LENGTH output filter setting\nContent-Length header to zero because there is no body data. Later on Apache\nremoves Content-Length header if it has value 0.\n\nThe attached patch fixes the problem in CONTENT_LENGTH output filter by\npreventing it from modifying the content length of a reply to HEAD request.\n\nThe attached patch is against HEAD of APACHE_2_0_BRANCH as of this morning.\"\n\nURL:\n<http://www.mail-archive.com/dev@httpd.apache.org/msg16088.html>\nPatch:\n<http://www.mail-archive.com/dev@httpd.apache.org/msg16088/windows-update.diff>\n\nI would apply the patch myself but I do not have the compiler required for the\nWin32 build of Apache.", "time": "2003-07-26T22:02:46Z", "creator": "cvig@raw-io.com", "creation_time": "2003-07-26T22:02:46Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 21348, "text": "Related bug:\n<http://nagoya.apache.org/bugzilla/show_bug.cgi?id=15859>", "id": 41577, "time": "2003-07-26T22:06:03Z", "creator": "cvig@raw-io.com", "creation_time": "2003-07-26T22:06:03Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 21348, "is_private": false, "text": "It looks like bug 8677 was trying to fix Windows Update and asked to be\nre-opened if it didn't work (2.0.45).", "id": 42563, "time": "2003-08-11T18:03:37Z", "creator": "bill+apache@bfccomputing.com", "creation_time": "2003-08-11T18:03:37Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "lars@kneschke.de", "attachment_id": null, "id": 44956, "time": "2003-10-01T16:19:23Z", "bug_id": 21348, "creation_time": "2003-10-01T16:19:23Z", "is_private": false, "text": "I have this problem too, with apache 2.0.47. Is there a offical solution avaiable?"}, {"text": "I have the exact same problem on 2.0.47 (I was having the problem using RH's \n2.0.40 version so I compiled 2.0.47 to fix it...)", "tags": [], "creator": "rernst@us.ibm.com", "is_private": false, "count": 5, "id": 45059, "time": "2003-10-03T20:59:36Z", "bug_id": 21348, "creation_time": "2003-10-03T20:59:36Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 21348, "text": "Problem confirmed on 2.0.49. We're using the patch Sami Tikka (F-Secure) sent \nto the apache list for 350+ installations without problems. I'll attach it \nagain for further review. \n ", "id": 55150, "time": "2004-04-02T13:00:11Z", "creator": "thomas.jarosch@intra2net.com", "creation_time": "2004-04-02T13:00:11Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 21348, "attachment_id": null, "text": "Please don't mark a bug as fixed unless it is fixed in the Apache \ncodebase.", "id": 55158, "time": "2004-04-02T13:45:12Z", "creator": "slive@apache.org", "creation_time": "2004-04-02T13:45:12Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 21348, "attachment_id": null, "text": "Bug 18757 has the suggested fix attached and is an earlier bug, so let's direct\nstuff over there.\n\n*** This bug has been marked as a duplicate of 18757 ***", "id": 57851, "time": "2004-05-21T18:00:04Z", "creator": "slive@apache.org", "creation_time": "2004-05-21T18:00:04Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 21348, "attachment_id": null, "is_private": false, "id": 62088, "time": "2004-08-17T20:51:07Z", "creator": "cvig@raw-io.com", "creation_time": "2004-08-17T20:51:07Z", "text": "Is there any reason why this patch hasn't made it into the releases?"}, {"count": 10, "tags": [], "bug_id": 21348, "attachment_id": null, "is_private": false, "id": 62097, "time": "2004-08-17T23:25:35Z", "creator": "nick@webthing.com", "creation_time": "2004-08-17T23:25:35Z", "text": "The patch fixes one problem, but is not strictly correct (consider the case of a proxy returning 304).  I'd rather fix it properly.\n\nSince I don't know where to find windows update (let alone use it), I can't look at it to see what causes it to break in an Apache proxy.  If you - or someone - could supply details, it would make it much easier to deal with.\n"}, {"count": 11, "attachment_id": null, "creator": "cvig@raw-io.com", "text": "Windows Update is the site that Microsoft Windows computers connect to for\nsoftware updates. The current site is:\n\nhttp://v4.windowsupdate.microsoft.com/\n\nBut many people are now on:\n\nhttp://v5.windowsupdate.microsoft.com/\n\nUnfortunately, you have to connect with Internet Explorer to perform the\nupdates. Connecting through mod_proxy to windows update fails. Squid, the\ncaching web proxy software, works correctly with Windows Update.\n\nIs there some debugging or tcp/ip level logging that would be useful for your\npurposes that I could perform? I meant to attach the previous comment to bug 18757.", "id": 62098, "time": "2004-08-17T23:42:45Z", "bug_id": 21348, "creation_time": "2004-08-17T23:42:45Z", "tags": [], "is_private": false}]