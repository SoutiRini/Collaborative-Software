[{"count": 0, "tags": [], "bug_id": 50964, "is_private": false, "text": "When enabling includes within HTTPD, Apache 2.2 only parses first-level <!--#include virtual=\"/some_file.shtml\" --> includes.\n\nNested includes, while maybe not conventional, should be supported by the server.\n\nSuch situations can occur when a header is created by using something like:\n<!--#include virtual=\"/header.shtml\" -->\n\nand within header.shtml it has additional includes like:\n<!--#include virtual=\"/banner.shtml\" -->\n<!--#include virtual=\"/contacts.shtml\" -->\netc.\n\nWhen loaded by apache, it responds by passing this data as plaintext.\n\nRecommended solution:\nEnable a directive enabling the operator to specify how deep httpd should parse included documents. Set the default to 1, allow overwrite to some reasonable max such as 10.\n\nDoing this would allow people to nest server side includes without the potential of DOSing the system via infinite recursion (in the case of a self-referencing or otherwise erroneously-coded html doc).", "id": 145228, "time": "2011-03-23T20:37:35Z", "creator": "nllamb@msn.com", "creation_time": "2011-03-23T20:37:35Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 50964, "attachment_id": null, "id": 145229, "time": "2011-03-23T20:39:08Z", "creator": "nllamb@msn.com", "creation_time": "2011-03-23T20:39:08Z", "is_private": false, "text": "Edit: IIS 5 through 7 all properly handle nested server-side includes (when enabled). Just FYI.\n\n(In reply to comment #0)\n> When enabling includes within HTTPD, Apache 2.2 only parses first-level\n> <!--#include virtual=\"/some_file.shtml\" --> includes.\n> Nested includes, while maybe not conventional, should be supported by the\n> server.\n> Such situations can occur when a header is created by using something like:\n> <!--#include virtual=\"/header.shtml\" -->\n> and within header.shtml it has additional includes like:\n> <!--#include virtual=\"/banner.shtml\" -->\n> <!--#include virtual=\"/contacts.shtml\" -->\n> etc.\n> When loaded by apache, it responds by passing this data as plaintext.\n> Recommended solution:\n> Enable a directive enabling the operator to specify how deep httpd should parse\n> included documents. Set the default to 1, allow overwrite to some reasonable\n> max such as 10.\n> Doing this would allow people to nest server side includes without the\n> potential of DOSing the system via infinite recursion (in the case of a\n> self-referencing or otherwise erroneously-coded html doc)."}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 145289, "time": "2011-03-26T11:21:23Z", "bug_id": 50964, "creation_time": "2011-03-26T11:21:23Z", "is_private": false, "text": "Nested SSIs work fine, it is highly likely you have some kind of configuration error; please list a set of steps to reproduce the problem starting from a vanilla 2.2.17 installation."}, {"count": 3, "tags": [], "bug_id": 50964, "is_private": false, "text": "I was able to figure out the probably cause of the issue. Any imported file with an extension other than .shtml will not be parsed by HTTPD as another include file.\n\nThat is, when my header.shtml included various other .html files, those files weren't being processed by HTTPD. The workaround was to rename these to .shtml and modify the links in header.shtml.\n\nHowever, the underlying issue should still be addressed, which is the fact that HTTPD doesn't perform recursive processing of directives after updating content from previous directives.", "id": 145296, "time": "2011-03-26T14:55:33Z", "creator": "nllamb@msn.com", "creation_time": "2011-03-26T14:55:33Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 50964, "attachment_id": null, "is_private": false, "id": 145297, "time": "2011-03-26T14:59:00Z", "creator": "covener@gmail.com", "creation_time": "2011-03-26T14:59:00Z", "text": "It treats whatever you tell it to treat as SSI."}, {"count": 5, "tags": [], "bug_id": 50964, "attachment_id": null, "id": 145298, "time": "2011-03-26T15:09:20Z", "creator": "nllamb@msn.com", "creation_time": "2011-03-26T15:09:20Z", "is_private": false, "text": "The online help doesn't go into clear details on how to tell it which extensions/files/etc. to process as an include.\n\n(In reply to comment #4)\n> It treats whatever you tell it to treat as SSI."}, {"count": 6, "tags": [], "bug_id": 50964, "is_private": false, "text": "That's because you configu(In reply to comment #5)\n> The online help doesn't go into clear details on how to tell it which\n> extensions/files/etc. to process as an include.\n> \n> (In reply to comment #4)\n> > It treats whatever you tell it to treat as SSI.\n\nNot sure how one could do much better than what's already in the manual:\nhttp://httpd.apache.org/docs/current/mod/mod_include.html#enabling", "id": 145299, "time": "2011-03-26T15:22:04Z", "creator": "covener@gmail.com", "creation_time": "2011-03-26T15:22:04Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 50964, "attachment_id": null, "id": 145300, "time": "2011-03-26T15:58:13Z", "creator": "nllamb@msn.com", "creation_time": "2011-03-26T15:58:13Z", "is_private": false, "text": "Good page except it still seems limited. It would be nice (for Windows users) to have it parse the files similar to IIS since we don't have the execute bit capability (as mentioned in the article).\n\nThe solution mentioned in my original post seems reasonable to implement and would work across platforms no serious issues.\n\nAs it stands, I have to make every file a .shtml to ensure that when they are imported HTTPD will be forced to perform processing on it -- this slows everything down but removes the errors my users experienced.\n\n\n(In reply to comment #6)\n> That's because you configu(In reply to comment #5)\n> > The online help doesn't go into clear details on how to tell it which\n> > extensions/files/etc. to process as an include.\n> > \n> > (In reply to comment #4)\n> > > It treats whatever you tell it to treat as SSI.\n> Not sure how one could do much better than what's already in the manual:\n> http://httpd.apache.org/docs/current/mod/mod_include.html#enabling"}, {"count": 8, "tags": [], "creator": "nick@webthing.com", "attachment_id": null, "id": 145303, "time": "2011-03-26T20:56:27Z", "bug_id": 50964, "creation_time": "2011-03-26T20:56:27Z", "is_private": false, "text": "Having come from a windows perspective and stumbled on a gotcha we hadn't considered, you might be well-placed to contribute to improving the docs.  A section on \"making it behave like IIS\" would no doubt be of interest to some users."}]