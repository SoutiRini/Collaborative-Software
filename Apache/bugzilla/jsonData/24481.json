[{"count": 0, "tags": [], "bug_id": 24481, "attachment_id": null, "id": 46957, "creation_time": "2003-11-06T22:48:55Z", "time": "2003-11-06T22:48:55Z", "creator": "f.g.haas@gmx.net", "text": "When running \"build.sh test\" on Linux (and presumably any other *nix), the test\norg.apache.tools.ant.types.selectors.ModifiedSelectorTest fails with the\nfollowing output:\n\nTestcase:\ntestScenarioCustomSelectorSettings(org.apache.tools.ant.types.selectors.ModifiedSelectorTest):\n       Caused an ERROR\n/home/fgh/workspace/ant/src/etc/testcases/types/bootstrap/lib not found.\n/home/fgh/workspace/ant/src/etc/testcases/types/selectors.xml:132:\n/home/fgh/workspace/ant/src/etc/testcases/types/bootstrap/lib not found.\n        at\norg.apache.tools.ant.types.AbstractFileSet.getDirectoryScanner(AbstractFileSet.java:387)\n        at org.apache.tools.ant.taskdefs.Copy.execute(Copy.java:438)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:302)\n        at org.apache.tools.ant.Task.perform(Task.java:401)\n        at org.apache.tools.ant.Target.execute(Target.java:338)\n[...]\n\nAt this point (line 132 in src/etc/testcases/types/selectors.xml) the build file\nis using the ant.home property. The build.sh script sets the ANT_HOME envar to\njust \"bootstrap\". The test, when run interprets this relative to the build file\ndirectory (hence, src/etc/testcases/types/bootstrap), causing the test to fail\nsince that directory does not exist.\n\nThe issue can be easily fixed by having build.sh set ANT_HOME to an absolute\npath. For bash, ANT_HOME=$PWD/bootstrap should do.", "is_private": false}, {"count": 1, "tags": [], "bug_id": 24481, "attachment_id": 8967, "id": 46958, "time": "2003-11-06T22:50:36Z", "creator": "f.g.haas@gmx.net", "creation_time": "2003-11-06T22:50:36Z", "is_private": false, "text": "Created attachment 8967\nFixes build.sh: sets ANT_HOME to absolute path using $PWD/bootstrap"}, {"count": 2, "text": "To be paranoid and to support cygwin one may need to\ncopy stuff from the ant script:\n\nANT_HOME=`cd bootstrap && pwd`\n\nbuild.bat would also need to be changed - something\nlike:\n\nrem %~dp0 is expanded pathname of the current script under NT\nset ANT_HOME=%~dp0..\nset ANT_HOME=%ANT_HOME%\\bootstrap\n", "bug_id": 24481, "attachment_id": null, "id": 46974, "time": "2003-11-07T09:20:33Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-11-07T09:20:33Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 24481, "text": "Nope, I don't think Peter's suggestion would work. On a fresh CVS checkout,\nthere is no \"bootstrap\" directory, hence ANT_HOME=`cd bootstrap && pwd` sets\nANT_HOME to the empty string. ", "id": 47035, "time": "2003-11-08T10:37:58Z", "creator": "f.g.haas@gmx.net", "creation_time": "2003-11-08T10:37:58Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 24481, "attachment_id": null, "id": 47049, "time": "2003-11-08T21:15:55Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-11-08T21:15:55Z", "is_private": false, "text": "Opps, you are correct.\n\nPeter"}, {"count": 5, "tags": [], "creator": "antoine@apache.org", "is_private": false, "id": 47122, "attachment_id": null, "bug_id": 24481, "creation_time": "2003-11-10T16:51:48Z", "time": "2003-11-10T16:51:48Z", "text": "Patch committed (also changed build.bat)\nThanks"}]