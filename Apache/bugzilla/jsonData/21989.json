[{"count": 0, "tags": [], "bug_id": 21989, "attachment_id": null, "text": "The uptodate task doesn't stop the work when it find a file outdated.\n\nThe task should stop in that case as we know that the property can not be set.\n\nIt is significant optimization when you have (as ma) more than 5000 files to \ncheck !", "id": 41756, "time": "2003-07-30T10:05:36Z", "creator": "emmanuel.feller@free.fr", "creation_time": "2003-07-30T10:05:36Z", "is_private": false}, {"count": 1, "tags": [], "creator": "emmanuel.feller@free.fr", "attachment_id": null, "id": 41757, "time": "2003-07-30T10:16:07Z", "bug_id": 21989, "creation_time": "2003-07-30T10:16:07Z", "is_private": false, "text": "With a quick query i found the #7322 bug.\n\nSo I'll do more test because it doesn't stop at first outdated file in my build.\nThe uptodate is into a condition."}, {"count": 2, "tags": [], "text": "I reproduce the problem with this script :\n<condition property=\"a\" value=\"true\">\n<and>\n  <available type=\"file\" file=\"foobar\" />\n  <uptodate>\n    <srcfiles dir=\"${src}/>\n    <mapper type=\"merge\" to=\"${test.jar}\"/>\n  </uptodate>\n</and>\n</condition>\n\nand i get this log (verbose mode) :\n[available] Found file: foo.jar\n     [null] foo/bar1.java added as foo.jar is outdated.\n     [null] foo/bar2.java omitted as foo.jar is up to date.\n     [null] foo/bar3.java omitted as foo.jar is up to date.\n     [null] foo/bar4.java omitted as foo.jar is up to date.\n     [null] foo/bar5.java omitted as foo.jar is up to date.\n\nbut i tested with this script :\n  <uptodate property=\"a\" value=\"true\">\n    <srcfiles dir=\"${src}/>\n    <mapper type=\"merge\" to=\"${test.jar}\"/>\n  </uptodate>\n\nand i get the same problem : it doesn't stop at first outdated file.\n [uptodate] foo/bar1.java added as foo.jar is outdated.\n [uptodate] foo/bar2.java omitted as foo.jar is up to date.\n [uptodate] foo/bar3.java omitted as foo.jar is up to date.\n [uptodate] foo/bar4.java omitted as foo.jar is up to date.\n [uptodate] foo/bar5.java omitted as foo.jar is up to date.\n", "attachment_id": null, "id": 41766, "creator": "emmanuel.feller@free.fr", "time": "2003-07-30T12:31:56Z", "bug_id": 21989, "creation_time": "2003-07-30T12:31:56Z", "is_private": false}, {"count": 3, "tags": [], "text": "It may be difficult to achieve this as Uptodate uses\ncommon code for getting the list of files that\nare out-of-date. The code is shared with copy, which\nneeds this behaviour.\n\nAlternatively you may use <outofdate/> from the\nantcontrib project.\nWith ant 1.6, outofdate may be used as a condition:\n\n    <condition property=\"a\" value=\"true\">\n        <and>\n            <available type=\"file\" file=\"${basedir}/compare\"/>\n            <not>\n                <outofdate verbose=\"yes\">\n                    <sourcefiles>\n                        <fileset dir=\"files\"/>\n                    </sourcefiles>\n                    <mapper dir=\"files\" type=\"merge\"\n                            to=\"${basedir}/compare\"/>\n                </outofdate>\n            </not>\n        </and>\n    </condition>\n", "is_private": false, "id": 41781, "creator": "peter.reilly@corvil.com", "time": "2003-07-30T14:28:03Z", "bug_id": 21989, "creation_time": "2003-07-30T14:28:03Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 21989, "attachment_id": null, "is_private": false, "id": 41783, "time": "2003-07-30T14:35:15Z", "creator": "emmanuel.feller@free.fr", "creation_time": "2003-07-30T14:35:15Z", "text": "ok, i'll patch my script with your proposal.\nThanks for quick answer !\n\nIt should be added to the manual to publish this walkaround until the fixe."}, {"count": 5, "tags": [], "bug_id": 21989, "attachment_id": null, "is_private": false, "id": 60113, "time": "2004-07-03T14:03:49Z", "creator": "emmanuel.feller@free.fr", "creation_time": "2004-07-03T14:03:49Z", "text": "i close this one, it's invalid now that ant 1.6 is released"}]