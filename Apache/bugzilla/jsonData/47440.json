[{"count": 0, "tags": [], "text": "Some of the test cases assume that the JDBC provider supports \"SELECT 1\" as a valid SQL statement; however this is not always the case, e.g. Derby requires a table name to select from.\n\nThe solution provided in the patches is to use the validation query defined in the properties set up for the test, rather than always using \"SELECT 1\".", "attachment_id": null, "bug_id": 47440, "id": 128345, "time": "2009-06-27T05:17:55Z", "creator": "sebb@apache.org", "creation_time": "2009-06-27T05:17:55Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 47440, "attachment_id": 23890, "id": 128346, "time": "2009-06-27T05:19:01Z", "creator": "sebb@apache.org", "creation_time": "2009-06-27T05:19:01Z", "is_private": false, "text": "Created attachment 23890\nRemove setValidattionQuery() calls"}, {"count": 2, "tags": [], "bug_id": 47440, "attachment_id": 23891, "id": 128347, "time": "2009-06-27T05:19:46Z", "creator": "sebb@apache.org", "creation_time": "2009-06-27T05:19:46Z", "is_private": false, "text": "Created attachment 23891\nUse validationQuery instead of \"SELECT 1\""}, {"count": 3, "tags": [], "bug_id": 47440, "text": "This would change the way the tests run, and that is not the intention of your enhancement.\nI cant remove the set validation query without replacing it with something, ie a default query, that can be swapped out.\n\nThere is no default query set", "id": 128363, "time": "2009-06-28T16:47:54Z", "creator": "fhanik@apache.org", "creation_time": "2009-06-28T16:47:54Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "text": "OK, I'd not noticed that the DefaultProperties.validationQuery field was not propagated by DefaultTestCase.createDefaultDataSource().\n\nSo the first patch was wrong, but the original problem still remains - the tests are DB-specific.\n\nTwo possible solutions:\n- DefaultTestCase.createDefaultDataSource() could set the query from the default\n- change the patch to pick up the default query and use that.\n\nThe other patch is surely OK as it stands?", "id": 128364, "time": "2009-06-28T17:36:09Z", "bug_id": 47440, "creation_time": "2009-06-28T17:36:09Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 47440, "text": "Fixed in r789345", "id": 128387, "time": "2009-06-29T07:37:07Z", "creator": "fhanik@apache.org", "creation_time": "2009-06-29T07:37:07Z", "is_private": false, "attachment_id": null}]