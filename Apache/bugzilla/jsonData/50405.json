[{"count": 0, "tags": [], "text": "I am using Tomcat 7.0.5 on Windows 7 and Fedora (this issue happens in both), using the Http11NioProtocol for a SSL connection with a self-signed certificate.\nSession persistence is disabled, and Comet connection tracking is enabled, in context.xml.\n\nI have a servlet that implements CometProcessor. It seems to runs fine. However, at the first time-out event, the following error gets logged:\n\nSEVERE: An exception or error occurred in the container during the request processing\njava.lang.NullPointerException\n\tat org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:270)\n\tat org.apache.coyote.http11.Http11NioProcessor.asyncDispatch(Http11NioProcessor.java:233)\n\tat org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.event(Http11NioProtocol.java:305)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1526)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)\n\nIt doesn't seem to happen again after subsequent time-outs from the same session. If one logs in again under another session, the exception happens again after the first time out.\nI haven't observed any adverse practical implications. However, I am running this on a machine with very few users and have not tested yet on a full scale.", "attachment_id": null, "id": 142325, "creator": "eduardovilches@yahoo.com", "time": "2010-12-02T18:59:46Z", "bug_id": 50405, "creation_time": "2010-12-02T18:59:46Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 142610, "time": "2010-12-12T18:25:32Z", "bug_id": 50405, "creation_time": "2010-12-12T18:25:32Z", "is_private": false, "text": "I'm having trouble reproducing this. Could you provide a simple test case that demonstrates the issue please."}, {"count": 2, "attachment_id": 26550, "creator": "migs.ho@gmail.com", "text": "Created attachment 26550\nA simple test application that presents the error reported.\n\nA similar test case for 7.0.5", "id": 143640, "time": "2011-01-25T18:03:00Z", "bug_id": 50405, "creation_time": "2011-01-25T18:03:00Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 50405, "attachment_id": null, "text": "I'm having the NPE on exactly the same line of the CoyoteAdapter on 7.0.5. The conditions are slightly different, but its probably related. \n\nPlease follow these instructions:\n\n1. Configure the Http11NioProtocol connector.\n2. deploy the attached WAR.\n3. open http://localhost:8080/crazed_proxy/\n4. click the submit button.\n\nAnd the NPE will begin to appear.", "id": 143641, "time": "2011-01-25T18:08:01Z", "creator": "migs.ho@gmail.com", "creation_time": "2011-01-25T18:08:01Z", "is_private": false}, {"count": 4, "attachment_id": null, "creator": "markt@apache.org", "text": "Thanks for the test case. I just ran it against the latest 7.0.x and I no longer see the NPE. I recently fixed a bunch of Comet issues with 7.0.x so I suspect that the root cause of this got fixed as part of that.", "id": 143756, "time": "2011-01-28T10:57:33Z", "bug_id": 50405, "creation_time": "2011-01-28T10:57:33Z", "tags": [], "is_private": false}]