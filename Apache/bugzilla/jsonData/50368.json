[{"count": 0, "attachment_id": null, "creator": "jantekb@ratesoft.hu", "text": "A simple ant script, that works perfectly on Windows fails on my Debian machine. I have checked that the file to be copied exists and is allowed to be read.\n\n\nThis is the target snippet causing the problem:\n\n<copy includeemptydirs='false'\n todir='/home/builder/workspace-maker/workspaces/something/Ring/WebRoot/WEB-INF/classes'>                    \n <fileset dir='/home/builder/workspace-maker/workspaces/something/Ring/src'>\n  <exclude name='**/*.launch' />\n  <exclude name='**/*.java' />\n </fileset>\n</copy>\n\n\n\nThis is the error message:\n\nBUILD FAILED\n/home/builder/workspace-maker/workspaces/something/RingAppl/build.xml:15: The following error occurred while executing this line:\n/home/builder/workspace-maker/workspaces/something/Ring/build.xml:1413: Failed to copy /home/builder/workspace-maker/workspaces/something/Ring/src/hu/rate/javascript/ring/Ring.Test.js to /home/builder/workspace-maker/workspaces/something/Ring/WebRoot/WEB-INF/classes/hu/rate/javascript/ring/Ring.Test.js due to Invalid argument\n        at org.apache.tools.ant.taskdefs.Copy.doFileOperations(Copy.java:853)\n        at org.apache.tools.ant.taskdefs.Copy.execute(Copy.java:523)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n        at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:390)\n        at org.apache.tools.ant.Target.performTasks(Target.java:411)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1397)\n        at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1249)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:390)\n        at org.apache.tools.ant.Target.performTasks(Target.java:411)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1397)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1366)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1249)\n        at org.apache.tools.ant.Main.runBuild(Main.java:801)\n        at org.apache.tools.ant.Main.startAnt(Main.java:218)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)\nCaused by: java.io.IOException: Invalid argument\n        at sun.nio.ch.FileChannelImpl.transferTo0(Native Method)\n        at sun.nio.ch.FileChannelImpl.transferToDirectly(FileChannelImpl.java:392)\n        at sun.nio.ch.FileChannelImpl.transferTo(FileChannelImpl.java:487)\n        at org.apache.tools.ant.util.ResourceUtils.copyResource(ResourceUtils.java:475)\n        at org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:519)\n        at org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:481)\n        at org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:310)\n        at org.apache.tools.ant.taskdefs.Copy.doFileOperations(Copy.java:841)\n        ... 30 more\n\nTotal time: 16 seconds", "id": 142131, "time": "2010-11-29T11:32:40Z", "bug_id": 50368, "creation_time": "2010-11-29T11:32:40Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "creator": "bodewig@apache.org", "is_private": false, "id": 142171, "time": "2010-11-30T00:24:30Z", "bug_id": 50368, "creation_time": "2010-11-30T00:24:30Z", "tags": [], "text": "this is likely fixed by svn revision 947339 which fixes bug 49326\n\nIs there any chance you could give Ant's trunk (for example a nightly build\nfrom https://hudson.apache.org/hudson/view/A-F/view/Ant//job/Ant_Nightly/lastBuild/artifact/trunk/distribution/binaries/ ) a try?\n\nIf it helps the root cause is a bug in the Java class library that Ant now\nworks around.  If it doesn't then we'll need more information, starting\nwith the question: which of the various Java VMs available on Debian do you\nuse (java -version)?"}, {"count": 2, "tags": [], "bug_id": 50368, "is_private": false, "text": "> Is there any chance you could give Ant's trunk a try?\n\nUnfortunately the environment where the build needs to be performed is provided by third party, so requesting to install an unofficial ant release might be a problem.\n\nThe Java version that produced this error now is:\n\njava version \"1.4.2_19\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_19-b04)\nJava HotSpot(TM) Client VM (build 1.4.2_19-b04, mixed mode)", "id": 142175, "time": "2010-11-30T04:58:41Z", "creator": "jantekb@ratesoft.hu", "creation_time": "2010-11-30T04:58:41Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 50368, "attachment_id": null, "id": 142176, "time": "2010-11-30T05:01:43Z", "creator": "jantekb@ratesoft.hu", "creation_time": "2010-11-30T05:01:43Z", "is_private": false, "text": "surprise, the build succeeded with:\n\njava version \"1.4.2_21\"\nJava(TM) Platform, Standard Edition for Business (build 1.4.2_21-b03)\nBEA JRockit(R) (build R27.6.5-32_o-121899-1.4.2_21-20091001-2113-linux-ia32, compiled mode)\n\nswitching back to the VM mentioned in my previous comment brought the same error message again.. :-("}, {"count": 4, "attachment_id": null, "creator": "bodewig@apache.org", "text": "This seems to be a known problem with Sun's JDK 1.4 and Linux kernel 2.6\n\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5056395\nhttp://192.9.162.102/thread.jspa?threadID=525836&messageID=2535994\n\nnot sure whether Ant can do anything about it.", "id": 142234, "time": "2010-12-01T00:35:29Z", "bug_id": 50368, "creation_time": "2010-12-01T00:35:29Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "fortunately there is a workaround and it has already been implemented in\nAnt's trunk with svn revision 953809\n\n*** This bug has been marked as a duplicate of bug 49430 ***", "id": 142237, "time": "2010-12-01T03:51:04Z", "bug_id": 50368, "creation_time": "2010-12-01T03:51:04Z", "is_private": false}]