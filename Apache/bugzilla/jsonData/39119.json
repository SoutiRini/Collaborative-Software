[{"attachment_id": null, "tags": [], "bug_id": 39119, "is_private": false, "count": 0, "id": 87325, "time": "2006-03-27T18:20:05Z", "creator": "neil@ofoto.com", "creation_time": "2006-03-27T18:20:05Z", "text": "During the configuration of a property task, an IntrospectionHelper is created.\nAlthough these are cached by classname to ensure only one is created,\nProject.addbuildListener is always called, resulting in the same\nIntrospectionHelper being added many times. I was seeing thousands on the list\nfor a complex build, and this list gets iterated over *a lot*. A quick\nexperimental fix in addBuildListener halved our build time (don't add to list if\nit's already present).\n\nThe methods involved\norg.apache.tools.ant.Project#addBuildListener\norg.apache.tools.ant.IntrospectionHelper#getHelper"}, {"count": 1, "tags": [], "bug_id": 39119, "attachment_id": null, "is_private": false, "id": 87327, "time": "2006-03-27T19:08:59Z", "creator": "ddevienne@gmail.com", "creation_time": "2006-03-27T19:08:59Z", "text": "This could explain the performance degradation discussed here: \nhttp://marc.theaimsgroup.com/?l=ant-user&m=112237000903306&w=2 \n\nWould you mind attaching a patch of your fix? Thanks, --DD"}, {"count": 2, "tags": [], "creator": "neil@ofoto.com", "is_private": false, "text": "Patch of trial fix:\n\nsrc/main/org/apache/tools/ant/Project.java\n310,317c310,315\n<         if (!listeners.contains(listener)) {\n<             // create a new Vector to avoid ConcurrentModificationExc when\n<             // the listeners get added/removed while we are in fire\n<             Vector newListeners = getBuildListeners();\n<             newListeners.addElement(listener);\n<             listeners = newListeners;\n<         }\n<     }\n---\n>         // create a new Vector to avoid ConcurrentModificationExc when\n>         // the listeners get added/removed while we are in fire\n>         Vector newListeners = getBuildListeners();\n>         newListeners.addElement(listener);\n>         listeners = newListeners;\n>       }", "id": 87330, "time": "2006-03-27T21:10:35Z", "bug_id": 39119, "creation_time": "2006-03-27T21:10:35Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "jkf@apache.org", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 37184 ***", "id": 87336, "time": "2006-03-27T22:14:36Z", "bug_id": 39119, "creation_time": "2006-03-27T22:14:36Z", "attachment_id": null}]