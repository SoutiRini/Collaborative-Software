[{"count": 0, "tags": [], "creator": "anny.mak@springsource.com", "attachment_id": null, "id": 131089, "time": "2009-10-12T13:30:46Z", "bug_id": 47985, "creation_time": "2009-10-12T13:30:46Z", "is_private": false, "text": "Based on rfc2616, it is clearly a supported feature.  The relevant section is 10.3.3 302 Found.\n\nOur customer is requesting this feature to be implemented to comply with the RFC."}, {"count": 1, "tags": [], "bug_id": 47985, "attachment_id": null, "is_private": false, "id": 131174, "time": "2009-10-16T09:12:32Z", "creator": "amak@covalent.net", "creation_time": "2009-10-16T09:12:32Z", "text": "In the following configuration example:\n\nRedirectPermanent / http://backend/\nHeader add \"Cache-Control\" \"max-age=60\"\nRequestHeader set \"Cache-Control\" \"max-age=60\"\n\nNeither the request header nor the response header contains the added Cache-Control header.\n\nSame behavior with the following config:\n\nRewriteEngine On\nRewriteRule ^/(.*) http://backend/$1 [R=302,L]\nHeader add \"Cache-Control\" \"max-age=60\"\nRequestHeader set \"Cache-Control\" \"max-age=60\"\n\nOrder is not the issue here as switching the order of rewrite and header results the same, where Cache-Control is not in the request nor in the response header.\n\nHowever, if proxy is used, the header is there:\n\nProxyPass / http://backend/\nProxyPassReverse / http://backend/\nHeader add \"Cache-Control\" \"max-age=60\"\nRequestHeader set \"Cache-Control\" \"max-age=60\""}, {"count": 2, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 131176, "time": "2009-10-16T10:06:08Z", "bug_id": 47985, "creation_time": "2009-10-16T10:06:08Z", "is_private": false, "text": "The Header directive only modifies 2xx responses by default, although the doc didn't describe it very well. Try a first argument of 'always' as already described in the manual.  \n\nConsult the users discussion list for further assistance."}, {"count": 3, "tags": [], "bug_id": 47985, "attachment_id": null, "text": "Well, either this is a doc bug or header simply does not comply to the spec.\n\nAs you have suggested, I added always as the condition.  The cache-control header is not added in.\n\nPlease note that this bug is opened after much testing and research and discussion with one of the ASF members.\n\nHave the provided configuration that reproduces the problem been tried before this bug is closed?", "id": 131186, "time": "2009-10-16T20:48:07Z", "creator": "amak@covalent.net", "creation_time": "2009-10-16T20:48:07Z", "is_private": false}, {"count": 4, "tags": [], "creator": "covener@gmail.com", "text": "(In reply to comment #3)\n> Well, either this is a doc bug or header simply does not comply to the spec.\n> \n> As you have suggested, I added always as the condition.  The cache-control\n> header is not added in.\n> \n\nYou'll need to add some more detail, as the following works for me:\n\n<virtualhost *:80>\nHeader always add Cache-Control max-age=60\nRedirectMatch 301 ^/$ http://localhost/other.html\n</virtualhost>\n\n$ wget -S http://localhost/\n--2009-10-17 10:29:02--  http://localhost/\nResolving localhost... 127.0.0.1\nConnecting to localhost|127.0.0.1|:80... connected.\nHTTP request sent, awaiting response... \n  HTTP/1.1 301 Moved Permanently\n  Date: Sat, 17 Oct 2009 14:29:02 GMT\n  Server: IBM_HTTP_Server\n  Cache-Control: max-age=60\n  Location: http://localhost/other.html\n\nSame for rewrite in per-vhost config and per-directory config.\n\nCan you show your current configuration and a sample request/response against that configuration that illustrates the bug?", "id": 131193, "time": "2009-10-17T07:33:55Z", "bug_id": 47985, "creation_time": "2009-10-17T07:33:55Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 47985, "attachment_id": null, "text": "Whoops, my test is against a 2.2 based Apache despite Server: header!  Reproduced on HEAD of 2.2.x FWIW.", "id": 131194, "time": "2009-10-17T07:37:02Z", "creator": "covener@gmail.com", "creation_time": "2009-10-17T07:37:02Z", "is_private": false}, {"count": 6, "tags": [], "text": "doc update for mod_headers is now visible externally, with emphasis on the default behavior.", "attachment_id": null, "id": 131195, "creator": "covener@gmail.com", "time": "2009-10-17T08:05:43Z", "bug_id": 47985, "creation_time": "2009-10-17T08:05:43Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 47985, "is_private": false, "text": "Do we suspect a code issue here still?  Or is the doc update sufficient:\n\n\"By default, this directive only affects successful responses (responses in the 2xx range).\"", "id": 131690, "time": "2009-11-04T06:43:26Z", "creator": "covener@gmail.com", "creation_time": "2009-11-04T06:43:26Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "covener@gmail.com", "text": "no response, doc has been clarified twice since this bug to drive home the behavior of \"header\" wrt always/onerror.", "id": 142366, "time": "2010-12-04T07:20:14Z", "bug_id": 47985, "creation_time": "2010-12-04T07:20:14Z", "is_private": false, "attachment_id": null}]