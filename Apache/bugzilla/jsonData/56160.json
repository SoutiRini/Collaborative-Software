[{"attachment_id": 31332, "tags": [], "creator": "real_thuri@gmx.de", "is_private": false, "count": 0, "id": 173361, "time": "2014-02-19T13:28:23Z", "bug_id": 56160, "creation_time": "2014-02-19T13:28:23Z", "text": "Created attachment 31332\nTestplan to reproduce\n\nI got a Testplan that contains a WhileController below an IfController.\nThe condition of the IfController is false and the WhileController uses the __javaScript function to evaluate the content of a variable.\n\nIf the variable is not set (for example because it's set below the IfController before the WhileController) JMeter logs the line \n\nWARN  - jmeter.control.GenericController: StackOverflowError detected \n\nThe Error doesn't bubble up but it slows down test execution.\n\nFurthermore it's strange something below the IfController is executed/evaluated even if the condition of the if is false."}, {"attachment_id": null, "tags": [], "creator": "real_thuri@gmx.de", "is_private": false, "count": 1, "id": 173363, "time": "2014-02-19T15:16:52Z", "bug_id": 56160, "creation_time": "2014-02-19T15:16:52Z", "text": "After some debugging, the problem seems to be that the WhileController always returns the one contained sampler on nextIsNull().\nTherefore nextIsAController always returns the Sampler too and never null;\n(Though nextIsAController can't ever return null but at the end of the controller)\n\nSo because the WhileLoop never returns null reInitializeSubController will be called recursivly until the SOE is thrown.\n\nBut the first thing is that the WhileController.next() shouldn't have been called in the first place.\n\nI'll try to create a patch and see what you think of it."}, {"count": 2, "tags": [], "bug_id": 56160, "is_private": false, "text": "Created attachment 31333\nProposed Patch\n\nPatch for IfController so that child elements are not \"touched\" if the condition is false.\n+ UnitTests", "id": 173364, "time": "2014-02-19T15:42:18Z", "creator": "real_thuri@gmx.de", "creation_time": "2014-02-19T15:42:18Z", "attachment_id": 31333}, {"count": 3, "tags": [], "creator": "real_thuri@gmx.de", "attachment_id": null, "is_private": false, "id": 173365, "time": "2014-02-19T15:48:04Z", "bug_id": 56160, "creation_time": "2014-02-19T15:48:04Z", "text": "The proposed patch makes the IfController return null if the condition is false on the first invocation of it's next method.\n\nThis should prevent Jmeter to dive into the children of the IfController and call their next method.\nSo child-controllers which always return an element and never null (e.g. WhileController with condition that is always true) won't result in a StackOverflow.\n\nThe issue may persist if the whileController is supposed to loop forever and and the if controller's condition is true."}, {"count": 4, "tags": [], "bug_id": 56160, "is_private": false, "text": "Although summary of 52496 may not be clear, it is the exact duplicate, see bugs already marked as duplicate\n\n*** This bug has been marked as a duplicate of bug 52496 ***", "id": 176248, "time": "2014-07-06T20:01:26Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-07-06T20:01:26Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 56160, "text": "*** Bug 52496 has been marked as a duplicate of this bug. ***", "id": 178391, "time": "2014-10-11T21:46:16Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-10-11T21:46:16Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "*** Bug 53768 has been marked as a duplicate of this bug. ***", "count": 6, "id": 178395, "time": "2014-10-11T21:48:10Z", "bug_id": 56160, "creation_time": "2014-10-11T21:48:10Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "count": 7, "id": 178398, "time": "2014-10-12T15:31:46Z", "bug_id": 56160, "creation_time": "2014-10-12T15:31:46Z", "text": "Date: Sun Oct 12 15:30:39 2014\nNew Revision: 1631189\n\nURL: http://svn.apache.org/r1631189\nLog:\nBug 56160 - StackOverflowError when using WhileController within IfController\nBugzilla Id: 56160\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/control/GenericController.java\n    jmeter/trunk/src/core/org/apache/jmeter/control/IfController.java\n    jmeter/trunk/src/core/org/apache/jmeter/control/TransactionController.java\n    jmeter/trunk/src/core/org/apache/jmeter/threads/JMeterContext.java\n    jmeter/trunk/test/src/org/apache/jmeter/control/TestIfController.java\n    jmeter/trunk/xdocs/changes.xml"}, {"count": 8, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "*** Bug 52618 has been marked as a duplicate of this bug. ***", "id": 179581, "attachment_id": null, "bug_id": 56160, "creation_time": "2014-12-06T15:43:00Z", "time": "2014-12-06T15:43:00Z", "is_private": false}]