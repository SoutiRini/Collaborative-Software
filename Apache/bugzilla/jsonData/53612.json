[{"count": 0, "tags": [], "bug_id": 53612, "attachment_id": null, "text": "It seems that my configs work perfectly fine using the same build of Apache (same options and version 2.2.22) with OpenSSL 0.9.8r.  However when I rebuild Apache using OpenSSL 1.0.1c my reverse proxy to a Windows server starts to fail.  I see 500 errors in my error logs in Apache and in Windows.  I'm using the same httpd.conf files, and it's as easy as switching back to the older binary and then it works fine again.\n\nAny other operation I use OpenSSL for however seems to work just fine.", "id": 160940, "time": "2012-07-27T12:48:05Z", "creator": "gibsonb@imsweb.com", "creation_time": "2012-07-27T12:48:05Z", "is_private": false}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "text": "you'll have to provide some details of the SSL connection between the two servers if you want it looked at as a bug in Apache.", "id": 160946, "time": "2012-07-27T13:27:51Z", "bug_id": 53612, "creation_time": "2012-07-27T13:27:51Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 53612, "attachment_id": null, "text": "Not sure exactly what you mean, but I will post the configurations I'm using for the vhost:\n\n\n<VirtualHost server:443>\nServerName arcgisproxy01dev\nSSLEngine on\nSSLProxyEngine on\nSSLCertificateChainFile chain.crt\nSSLCertificateFile site.crt\nSSLCertificateKeyFile site.key\nSSLOptions +StdEnvVars\nSSLProtocol -ALL +SSLv3 +TLSv1\nSSLCipherSuite ALL:!aNULL:!ADH:!eNULL:!LOW:!EXP:RC4+RSA:+HIGH:+MEDIUM\nSetEnvIf User-Agent \".*MSIE.*\" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0\nSetEnv proxy-initial-not-pooled 1\nRewriteEngine on\nRewriteCond %{HTTP_HOST} !^arcgisproxy01dev [nocase]\nRewriteCond %{HTTP_HOST} !^$\nRewriteRule ^/(.*)       https://arcgisproxy01dev/$1 [redirect,last]\nProxyRequests off\n# arcgis instance\nProxyPassMatch (?i)^/arcgis/services(.*)$ https://arcgis01dev/arcgis/services/$1\nProxyPassReverse /arcgis/services https://arcgis01dev/arcgis/services\nProxyPassMatch (?i)^/arcgis/rest(.*)$ https://arcgis01dev/arcgis/rest/$1\nProxyPassReverse /arcgis/rest https://arcgis01dev/arcgis/rest\nProxyPassMatch (?i)^/arcgis/sdk/rest(.*)$ https://arcgis01dev/arcgis/sdk/rest/$1\nProxyPassReverse /arcgis/sdk/rest https://arcgis01dev/arcgis/sdk/rest\nProxyPassMatch (?i)^/arcgis/tokens(.*)$ https://arcgis01dev/arcgis/tokens/$1\nProxyPassReverse /arcgis/tokens https://arcgis01dev/arcgis/tokens\nProxyPassMatch (?i)^/arcgis/server/proxyoutput/(.*)$ https://arcgis01dev/proxyoutput/$1\nProxyPassReverse /arcgis/server/proxyoutput/ https://arcgis01dev/proxyoutput/\nProxyPassMatch (?i)^/arcgis/server/proxycache/(.*)$ https://arcgis01dev/proxycache/$1\nProxyPassReverse /arcgis/server/proxycache/ https://arcgis01dev/proxycache/\nProxyPassMatch (?i)^/arcgis/server/proxyjobs/(.*)$ https://arcgis01dev/proxyjobs/$1\nProxyPassReverse /arcgis/server/proxyjobs/ https://arcgis01dev/proxyjobs\n# public instance\nProxyPassMatch (?i)^/public/services(.*)$ https://arcgis01dev/public/services/$1\nProxyPassReverse /public/services https://arcgis01dev/public/services\nProxyPassMatch (?i)^/public/rest(.*)$ https://arcgis01dev/public/rest/$1\nProxyPassReverse /public/rest https://arcgis01dev/public/rest\nProxyPassMatch (?i)^/public/sdk/rest(.*)$ https://arcgis01dev/public/sdk/rest/$1\nProxyPassReverse /public/sdk/rest https://arcgis01dev/public/sdk/rest\nProxyPassMatch (?i)^/public/tokens(.*)$ https://arcgis01dev/public/tokens/$1\nProxyPassReverse /public/tokens https://arcgis01dev/public/tokens\nProxyPassMatch (?i)^/public/server/proxyoutput/(.*)$ https://arcgis01dev/proxyoutput/$1\nProxyPassReverse /public/server/proxyoutput/ https://arcgis01dev/proxyoutput/\nProxyPassMatch (?i)^/public/server/proxycache/(.*)$ https://arcgis01dev/proxycache/$1\nProxyPassReverse /public/server/proxycache/ https://arcgis01dev/proxycache/\nProxyPassMatch (?i)^/public/server/proxyjobs/(.*)$ https://arcgis01dev/proxyjobs/$1\nProxyPassReverse /public/server/proxyjobs/ https://arcgis01dev/proxyjobs\nDocumentRoot /prj/web/arcgisproxy01dev/htdocs\n<Directory /prj/web/arcgisproxy01dev/htdocs>\n  Options FollowSymLinks Includes\n  AllowOverride All\n  Order allow,deny\n  Allow from all\n  SSL</Directory>\nScriptAlias /cgi-bin/ /prj/web/arcgisproxy01dev/cgi-bin/\n<Directory /prj/web/arcgisproxy01dev/cgi-bin>\n  AllowOverride AuthConfig Limit\n  Options None\n  Order allow,deny\n  Allow from all\n  SSLRequire %{SSL_CIPHER_USEKEYSIZE} >= 128\n</Directory>\nErrorLog ssl_error_log\nCustomLog ssl_access_log combined\n</VirtualHost>", "id": 160947, "time": "2012-07-27T13:37:09Z", "creator": "gibsonb@imsweb.com", "creation_time": "2012-07-27T13:37:09Z", "is_private": false}, {"count": 3, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 160948, "time": "2012-07-27T13:48:50Z", "bug_id": 53612, "creation_time": "2012-07-27T13:48:50Z", "is_private": false, "text": "presumably there's a new SSL behavior over the wire, you'll have to capture it with e.g. ssldump and provide loglevel debug that corresponds to it"}, {"count": 4, "tags": [], "bug_id": 53612, "text": "Shootin from the hip: Could it be\n\nhttp://rt.openssl.org/index.html?q=2811\n\nwhich was fixed after the OpenSSL 1.0.1c release in\n\nhttp://cvs.openssl.org/chngview?cn=22565\n\nRegards,\n\nRainer", "id": 160951, "time": "2012-07-27T14:47:25Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2012-07-27T14:47:25Z", "is_private": false, "attachment_id": null}]