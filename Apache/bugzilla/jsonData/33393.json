[{"count": 0, "tags": [], "creator": "sean.mullan@oracle.com", "attachment_id": null, "id": 70474, "time": "2005-02-03T18:45:04Z", "bug_id": 33393, "creation_time": "2005-02-03T18:45:04Z", "is_private": false, "text": "There is a problem because\norg.apache.xml.security.transforms.implementations.TransformBase64Decode invokes\nthe XMLSignatureInput.getOctetStreamReal method. If an XMLSignatureInput is\nconstructed with a byte[] and not a stream, then calling \"getOctetStreamReal\" on\nXMLSignatureInput during the transform in TransformBase64Decode will yield an\nempty stream and thus when trying to access the newly constructed\nBufferInputStream with null will yield the \"stream is closed\" error.\nThe XMLSignatureInput should do more than setting the internal \"bytes\" to the\ninput of the XMLSignature(byte[]) constructor.\nThe line :\n//this._inputOctetStreamProxy = new ByteArrayInputStream(inputOctets);\nin the byte[] constructor is currently commented out.\n\n\nHere's the diffs of the fix:\n\n$ cvs diff XMLSignatureInput.java\nIndex: XMLSignatureInput.java\n===================================================================\nRCS file:\n/home/cvspublic/xml-security/src/org/apache/xml/security/signature/XMLSignatureInput.java,v\nretrieving revision 1.33\ndiff -r1.33 XMLSignatureInput.java\n123c123,125\n<       //this._inputOctetStreamProxy = new ByteArrayInputStream(inputOctets);\n---\n>       if (inputOctets != null) {\n>           this._inputOctetStreamProxy = new ByteArrayInputStream(inputOctets);\n>       }"}, {"attachment_id": null, "tags": [], "creator": "raul-info@r-bg.com", "is_private": false, "count": 1, "id": 70491, "time": "2005-02-04T08:22:00Z", "bug_id": 33393, "creation_time": "2005-02-04T08:22:00Z", "text": "Ok can you send the testcase that shows this behaviour. Perhaps is better that the \nTransformBase64Decode don't call getOctetStreamReal, or let it to do it more intellengtly."}, {"count": 2, "text": "Created attachment 14182\nTestCase\n\nSure, here's a testcase.", "bug_id": 33393, "is_private": false, "id": 70514, "time": "2005-02-04T20:22:44Z", "creator": "sean.mullan@oracle.com", "creation_time": "2005-02-04T20:22:44Z", "tags": [], "attachment_id": 14182}, {"attachment_id": null, "tags": [], "bug_id": 33393, "is_private": false, "count": 3, "id": 70850, "time": "2005-02-11T19:14:34Z", "creator": "raul-info@r-bg.com", "creation_time": "2005-02-11T19:14:34Z", "text": "Commited solution in CVS. Made the Base64Transformer little smarter."}, {"count": 4, "tags": [], "creator": "raul-info@r-bg.com", "attachment_id": null, "id": 91969, "time": "2006-08-06T17:44:47Z", "bug_id": 33393, "creation_time": "2006-08-06T17:44:47Z", "is_private": false, "text": "Closing old bugs."}]