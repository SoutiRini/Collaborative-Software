[{"count": 0, "tags": [], "bug_id": 6754, "attachment_id": null, "id": 11268, "time": "2002-02-28T00:16:20Z", "creator": "emailkirri@yahoo.com", "creation_time": "2002-02-28T00:16:20Z", "is_private": false, "text": "I try to execute a \"ls -l\" unix command using Ant, by doing the following:\n  <target name=\"testLS1\">\n    <exec dir=\"lib\" executable=\"ls\" >\n      <arg value=\" -l\"/>\n    </execon>\n  </target>\n  \nI have this piece of code in build.xml which is in a directory \ncalled \"main\". \"lib\" is a sub-directory under \"main\". When I execute the build, \nit gives me the list of files under \"main\" when I want the list of files \nunder \"main/lib\". What should I do?"}, {"count": 1, "attachment_id": null, "bug_id": 6754, "is_private": false, "id": 11269, "time": "2002-02-28T00:23:07Z", "creator": "emailkirri@yahoo.com", "creation_time": "2002-02-28T00:23:07Z", "tags": [], "text": "I made a typo earlier: The piece of code should have been the following\n\n  <target name=\"testLS1\">\n    <exec dir=\"lib\" executable=\"ls\" >\n      <arg value=\" -l\"/>\n    </exec>\n  </target>"}, {"count": 2, "tags": [], "bug_id": 6754, "attachment_id": null, "text": "Works for me - but I had to remove the leading space from -l.\n\nNote that 1.3 is a rather old version of Ant, note also that the dir attribute\nis realtive to the project's base dir.\n\nWhich JDK and which OS are you using?", "id": 11289, "time": "2002-02-28T12:13:08Z", "creator": "bodewig@apache.org", "creation_time": "2002-02-28T12:13:08Z", "is_private": false}, {"count": 3, "tags": [], "creator": "emailkirri@yahoo.com", "attachment_id": null, "id": 11315, "time": "2002-02-28T18:06:14Z", "bug_id": 6754, "creation_time": "2002-02-28T18:06:14Z", "is_private": false, "text": "IBM Java(TM) 2 Runtime Environment, Standard Edition & IBM Unix System Services\n\nI tried it once again with Ant 1.4. Same result. :-("}, {"count": 4, "tags": [], "creator": "holtdl@yahoo.com", "attachment_id": null, "is_private": false, "id": 11322, "time": "2002-02-28T20:42:54Z", "bug_id": 6754, "creation_time": "2002-02-28T20:42:54Z", "text": "I can't reproduce this behaviour, using either 1.3 or 1.4, either. Following up \non Stefan's comments -- try adding:\n\n    <echo message=\"basedir = ${basedir}\"/>\n\nto the target, before your <exec> task.\n"}, {"count": 5, "tags": [], "bug_id": 6754, "attachment_id": null, "id": 11326, "time": "2002-02-28T22:36:26Z", "creator": "emailkirri@yahoo.com", "creation_time": "2002-02-28T22:36:26Z", "is_private": false, "text": "Diane, I tried the \"echo\" message. It says that I am in the \"main\" directory as \nexpected. "}, {"count": 6, "tags": [], "creator": "holtdl@yahoo.com", "attachment_id": null, "text": "What happens if you try specifying 'dir' as a fullpath (ie., ${basedir}/lib)?", "id": 11327, "time": "2002-02-28T22:43:59Z", "bug_id": 6754, "creation_time": "2002-02-28T22:43:59Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 6754, "is_private": false, "text": "Same result", "id": 11331, "time": "2002-02-28T23:08:44Z", "creator": "emailkirri@yahoo.com", "creation_time": "2002-02-28T23:08:44Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "holtdl@yahoo.com", "attachment_id": null, "text": "Weird. Is it possible your 'ls' is an alias to something? Could you try some \nother command, eg:\n  <target name=\"testTouch\">\n    <exec dir=\"src\" executable=\"touch\" >\n      <arg value=\"foofile\"/>\n    </exec>\n  </target>\nand see if foofile ends up in src or main?", "id": 11332, "time": "2002-02-28T23:21:17Z", "bug_id": 6754, "creation_time": "2002-02-28T23:21:17Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 6754, "is_private": false, "text": "foofile is created in main", "id": 11334, "time": "2002-02-28T23:50:01Z", "creator": "emailkirri@yahoo.com", "creation_time": "2002-02-28T23:50:01Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 6754, "is_private": false, "text": "Okay, can you try this:\n$ cd $ANT_HOME/bin\n$ cp antRun antRun.sav\n$ #use your favorite editor to change antRun to be:\n#! /bin/sh\n\n# Args: DIR command\necho \"Running via antRun script...\"\necho \"Current directory is `pwd`...\"\ncd \"$1\"\necho \"Current directory is now `pwd`...\"\nCMD=\"$2\"\nshift\nshift\n\nexec $CMD \"$@\"\n\nNow run your \"testLS1\" target.", "id": 11335, "time": "2002-03-01T00:43:41Z", "creator": "holtdl@yahoo.com", "creation_time": "2002-03-01T00:43:41Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "emailkirri@yahoo.com", "attachment_id": null, "is_private": false, "id": 12011, "time": "2002-03-19T18:58:34Z", "bug_id": 6754, "creation_time": "2002-03-19T18:58:34Z", "text": "What does this do? I am not clear what exactly you want me to do here. "}, {"count": 12, "tags": [], "creator": "holtdl@yahoo.com", "attachment_id": null, "text": "I just wanted you to add some debugging echo's to your\n$ANT_HOME/bin/antRun script, then run your \"testLS1\" target to\nsee whether the echo's come through and what they say\nas far as what the working directory is before the 'cd' and\nafter.\n\nIn other words, with the modified antRun script, the Ant output should\nlook something like this:\n\n$ ant testLS1\nBuildfile: build.xml\n\ntestLS1:\n     [exec] Running via antRun script...\n     [exec] Current directory is /home/dianeh/work/ant...\n     [exec] Current directory is now /home/dianeh/work/ant/lib...\n     [exec] foofile1\n     [exec] foofile2\n     [exec] foofile3\n\nBUILD SUCCESSFUL\n\nTotal time: 2 seconds", "id": 12015, "time": "2002-03-19T19:51:13Z", "bug_id": 6754, "creation_time": "2002-03-19T19:51:13Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 6754, "is_private": false, "text": "I have stumbled upon the same problem.  First, I looked in this bug database and\nfound the following previous similar reports:\n\nBug 370 - poor description of the problem\nBug 420 - marked invalid because of a problem with Runtime.exec()\n\nAllow me to add my own description of the problem:\n\nI'm using Ant to call autotools (the stuff that lets you type \"configure\" then\n\"make\" when you install a UNIX program) to build the (gasp) native portion of my\nprogram.  I create a directory ${bin} in which I wish to compile.  Here are the\nrelevant statements from my build.xml:\n\n   <property name=\"plaf\" value=\"${os.name}/${os.arch}/${os.version}\"/>\n   <property name=\"bin\"  value=\"${plaf}/bin\"/>\n   <mkdir dir=\"${bin}\"/>\n   <exec executable=\"../../../../configure\" dir=\"${bin}\"/>\n\nWhen I perform the command by hand from the bin directory, it works fine.  When\nAnt tries, it says this:\n\n.../native/build.xml:76: Execute failed: java.io.IOException:\n../../../../configure: not found\n\nIn this case, I'm running SunOs 5.6 with Sun JSDK 1.3.1_01.\n", "id": 19616, "time": "2002-07-16T15:16:52Z", "creator": "jimes@hiwaay.net", "creation_time": "2002-07-16T15:16:52Z", "attachment_id": null}, {"id": 19621, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "count": 14, "text": "Jim, what you are looking for is vmlauncher=\"false\" and Bug 3129, which doesn't\nseem to be related to Kiran's original problem.", "time": "2002-07-16T15:24:33Z", "bug_id": 6754, "creation_time": "2002-07-16T15:24:33Z", "is_private": false}, {"id": 19631, "tags": [], "creator": "j_a_fernandez@yahoo.com", "attachment_id": null, "count": 15, "text": "Jim, the \"executable\" attribute (the location of the program) may not be \nresolved in the context of the new directory. The only thing \"dir\" is suppose \nto guarantee is that the execution of the command will be done with that \ndirectory as the current directory. This is different.\n\nCan you try doing:\n\n   <property name=\"configure\" location=\"configure\"/>\n   <exec executable=\"${configure}\" dir=\"${bin}\"/>\n\nBy using location, you get the fullpath of the configure executable.\n", "time": "2002-07-16T17:22:53Z", "bug_id": 6754, "creation_time": "2002-07-16T17:22:53Z", "is_private": false}]