[{"count": 0, "tags": [], "bug_id": 48001, "attachment_id": null, "text": "I am trying to create a shadow directory to keep the timestamps of the files in the original directory tree.\n\nFor this I have tried to use the <touch> task with fileset and a glob mapper.\n\n    <mkdir dir=\"${shadow.dir}/>\n\n    <touch mkdirs=\"true\" verbose=\"true\">\n      <fileset dir=\"${orig.dir}\"/>\n      <globmapper handledirsep=\"true\"\n        from=\"${orig.dir}/*\"\n        to=\"${shadow.dir}/*\"\n      />\n    </touch>\n\nBased on the description of the <touch> task I should have a collection of empty files in ${shadow.dir} at the same level as original files in ${orig.dir}.\n\nHowever no directory structure is created.\nUsing <pathconvert> with the same <fileset> and <mapper> produced a valid file list.", "id": 131139, "time": "2009-10-15T09:02:56Z", "creator": "alex-pub.apache-ant@reflexion.net", "creation_time": "2009-10-15T09:02:56Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 48001, "attachment_id": null, "text": "This is probably a manifestation of one of the slightly confusing things about Ant mappers.  Mappers generally apply to the \"names\" of resources, which, in the case of a fileset, would be the part of the path relative to the basedir.  Try changing your from attribute on your mapper to \"*\" and see whether that doesn't give the results you want.", "id": 131144, "time": "2009-10-15T10:49:25Z", "creator": "mbenson@apache.org", "creation_time": "2009-10-15T10:49:25Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 48001, "attachment_id": null, "text": "(In reply to comment #1)\nThank you Matt.  Worked as a charm.\n\nCould you explain, then, why <pathconvert> does not bulk at me, but produces totally expected output?\n\nIn fact, when I change to the same mapper in <pathconvert> I get the names in this format: \"C:\\test\\shadow-dir/C:\\test\\orig-dir\\file\".  Is it a bug in <pathconvert> then?\n\nBasically, what needed is a reliable way to test the results of mapping applied to a fileset.\n\nSo, can I ask as a resolution for this problem to update Ant manual for a <touch> task with an example of a fileset with a mapper?", "id": 131152, "time": "2009-10-15T12:41:56Z", "creator": "alex-pub.apache-ant@reflexion.net", "creation_time": "2009-10-15T12:41:56Z", "is_private": false}, {"count": 3, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "id": 131153, "time": "2009-10-15T12:56:32Z", "bug_id": 48001, "creation_time": "2009-10-15T12:56:32Z", "is_private": false, "text": "It might be reasonable to come up with some more generic solution for documenting the differences in behavior among tasks using mappers.  This probably requires more analysis and should be taken to the dev@ant.apache.org mailing list.  Let's change the description of this bug report accordingly."}, {"count": 4, "tags": [], "bug_id": 48001, "attachment_id": null, "text": "(In reply to comment #3)\nThank you guys, you rock!!!", "id": 131155, "time": "2009-10-15T13:49:28Z", "creator": "alex-pub.apache-ant@reflexion.net", "creation_time": "2009-10-15T13:49:28Z", "is_private": false}]