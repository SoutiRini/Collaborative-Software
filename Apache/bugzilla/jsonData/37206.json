[{"count": 0, "tags": [], "bug_id": 37206, "is_private": false, "text": "We are seeing lot of BAD REQUEST PAGE (HTTP 400) for some of our redirect GET \nrequests.\nThis happened soon after we upgraded from Apache 1.3.28 to 1.3.33. This doent \nlook like browser specific since we see the errors for many browser types.\nWe are seeing some addition characters attached to the request and we are not \nsure where these are coming from. The error we see is \"request failed: \nerroneous characters after protocol string\".\nThese errors started to come soon after the upgrade to 1.3.33.\nThe webserver runs on LINUX Os.\nAccess Log\n   dx1\\https\\access_log.3(45657): 65.111.78.226 - - [04/Oct/2005:14:43:41 -\n0500] \"POST /site/olspage.jsp?\nid=pcat17013&type=page&_DARGS=/site/en_US/checkout/fragments/olschksubmitorderp\naymentinfo.jsp HTTP/1.1\" 302 109 \"https://www-ssl.bestbuy.com/site/olspage.jsp?\nid=pcat17013&type=page&_requestid=60912\" \"Mozilla/4.0 (compatible; MSIE 6.0; \nWindows NT 5.1; SV1; .NET CLR 1.1.4322)\"\n   \n   dx1\\https\\access_log.3(45658): 65.111.78.226 - - [04/Oct/2005:14:43:41 -\n0500] \"\\xf4\\t\\xe7\\xd6\\x18GET /site/olspage.jsp?\nid=pcat17014&type=page&_requestid=60984 HTTP/1.1\" 400 374 \"-\" \"-\"\n\nWebserver Error Log:\n\n   dx1\\https\\error_log.3(2656): [Tue Oct  4 14:43:41 2005] [error] [client \n65.111.78.226] request failed: erroneous characters after protocol string: \n\\\\xf4\\\\t\\\\xe7\\\\xd6\\\\x18GET /site/olspage.jsp?\nid=pcat17014&type=page&_requestid=60984 HTTP/1.1", "id": 81578, "time": "2005-10-23T08:56:45Z", "creator": "anand_sidhu@emailaccount.com", "creation_time": "2005-10-23T08:56:45Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 37206, "attachment_id": null, "is_private": false, "id": 81579, "time": "2005-10-23T09:11:08Z", "creator": "anand_sidhu@emailaccount.com", "creation_time": "2005-10-23T09:11:08Z", "text": "(In reply to comment #0)\n> We are seeing lot of BAD REQUEST PAGE (HTTP 400) for some of our redirect \nGET \n> requests.\n> This happened soon after we upgraded from Apache 1.3.28 to 1.3.33. This \ndoent \n> look like browser specific since we see the errors for many browser types.\n> We are seeing some addition characters attached to the request and we are \nnot \n> sure where these are coming from. The error we see is \"request failed: \n> erroneous characters after protocol string\".\n> These errors started to come soon after the upgrade to 1.3.33.\n> The webserver runs on LINUX Os.\n> Access Log\n>    dx1\\https\\access_log.3(45657): 65.111.78.226 - - [04/Oct/2005:14:43:41 -\n> 0500] \"POST /site/olspage.jsp?\n> \nid=pcat17013&type=page&_DARGS=/site/en_US/checkout/fragments/olschksubmitorderp\n> aymentinfo.jsp HTTP/1.1\" 302 109 \"https://www-\nssl.bestbuy.com/site/olspage.jsp?\n> id=pcat17013&type=page&_requestid=60912\" \"Mozilla/4.0 (compatible; MSIE 6.0; \n> Windows NT 5.1; SV1; .NET CLR 1.1.4322)\"\n>    \n>    dx1\\https\\access_log.3(45658): 65.111.78.226 - - [04/Oct/2005:14:43:41 -\n> 0500] \"\\xf4\\t\\xe7\\xd6\\x18GET /site/olspage.jsp?\n> id=pcat17014&type=page&_requestid=60984 HTTP/1.1\" 400 374 \"-\" \"-\"\n> Webserver Error Log:\n>    dx1\\https\\error_log.3(2656): [Tue Oct  4 14:43:41 2005] [error] [client \n> 65.111.78.226] request failed: erroneous characters after protocol string: \n> \\\\xf4\\\\t\\\\xe7\\\\xd6\\\\x18GET /site/olspage.jsp?\n> id=pcat17014&type=page&_requestid=60984 HTTP/1.1\n\nWe are seeing this error for our secure pages."}, {"count": 2, "tags": [], "bug_id": 37206, "attachment_id": null, "text": "\n  \"We are seeing this error for our secure pages.\"\n\nIf you are certain this is NOT httpd 2.0.55 (for which a fix is listed in the \nattachments of bug 37145) you should probably seek out the modssl.org project's\nbug tracking system, and ensure you are using the latest mod_ssl.  You might\nalso inquire on the users@httpd.apache.org peer user list (which discusses other\nadd in modules, as well as the core distribution of Apache.)", "id": 81580, "time": "2005-10-23T15:53:30Z", "creator": "wrowe@apache.org", "creation_time": "2005-10-23T15:53:30Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 37206, "attachment_id": null, "is_private": false, "id": 81581, "time": "2005-10-23T15:55:00Z", "creator": "wrowe@apache.org", "creation_time": "2005-10-23T15:55:00Z", "text": "\n  Ahhh - other possibility, only happens to .jsp's?  Which connector and version\n  are you using?  Who generates the redirects?  Are they internal or external\n  redirects?"}, {"count": 4, "text": "Seems to me like a duplicate of PR29257 (\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=29257). Maybe the following\npatch helps:\nhttp://cvs.apache.org/viewcvs.cgi/apache-1.3/src/main/http_request.c?r1=1.174&r2=1.175", "bug_id": 37206, "is_private": false, "id": 81583, "time": "2005-10-23T16:50:43Z", "creator": "rpluem@apache.org", "creation_time": "2005-10-23T16:50:43Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 37206, "is_private": false, "text": "Thanks for the quick response.\n1. We are using Apache 1.3.33 for https also. \nI am not sure how bug 37145 is related to this, if you could explain i can \nunderstand the patch a bit more.\n\n2.The redirect is done from our App Server's java code. (our App server is a \nATG based dynamo 6.4.0)\n\n3.The PR29257 looks interesting but not sure if it is the same one, \nI will get intouch with our Webserver team on this and get back on this.", "id": 81584, "time": "2005-10-23T18:52:13Z", "creator": "anand_sidhu@emailaccount.com", "creation_time": "2005-10-23T18:52:13Z", "attachment_id": null}, {"count": 6, "text": "(In reply to comment #4)\n> Seems to me like a duplicate of PR29257 (\n> http://issues.apache.org/bugzilla/show_bug.cgi?id=29257). Maybe the following\n> patch helps:\n> http://cvs.apache.org/viewcvs.cgi/apache-1.3/src/main/http_request.c?\nr1=1.174&r2=1.175\n\nI dont see the follwoing patch PR29257 in 1.3.34.\nhttp://cvs.apache.org/viewcvs.cgi/apache-1.3/src/main/http_request.c?\nr1=1.174&r2=1.175\n\nCan you tell me Why this was not applied in 1.3.34?\nThanks,\nAnand", "bug_id": 37206, "is_private": false, "id": 81588, "time": "2005-10-23T22:04:53Z", "creator": "anand_sidhu@emailaccount.com", "creation_time": "2005-10-23T22:04:53Z", "tags": [], "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 37206, "is_private": false, "text": "Digging somewhat deeper shows that the mentioned patch was introduced between\n1.3.31 and 1.3.32 to fix a problem. But before 1.3.32 was released this patch\nwas exchanged against a better solution for this problem (see\nhttp://cvs.apache.org/viewcvs.cgi/apache-1.3/src/main/http_request.c versions \n1.174 - 1.176, or better on svn\nhttp://svn.apache.org/viewcvs.cgi/httpd/httpd/branches/1.3.x/src/main/http_request.c?rev=106443&view=log\nr103539, r103798, r104871).\nNevertheless applying the patch might deliver valuable information for the\nfurther debugging of the problem. Furthermore it would be interesting to know\nhow you access the jsps (e.g. mod_proxy, mod_jk, third party module of\napplication server)\n", "id": 81589, "time": "2005-10-24T00:02:58Z", "creator": "rpluem@apache.org", "creation_time": "2005-10-24T00:02:58Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 37206, "attachment_id": null, "text": "(In reply to comment #2)\n>   \"We are seeing this error for our secure pages.\"\n> If you are certain this is NOT httpd 2.0.55 (for which a fix is listed in \nthe \n> attachments of bug 37145) you should probably seek out the modssl.org \nproject's\n> bug tracking system, and ensure you are using the latest mod_ssl.  You might\n> also inquire on the users@httpd.apache.org peer user list (which discusses \nother\n> add in modules, as well as the core distribution of Apache.)\n\nI found that we are not using mod_ssl module. The SSL aspect of the site is \nhandled by CSS load balancer. This issue seems to be related to redirects \nrather than Secure pages.", "id": 81590, "time": "2005-10-24T06:38:42Z", "creator": "anand_sidhu@emailaccount.com", "creation_time": "2005-10-24T06:38:42Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 37206, "attachment_id": null, "is_private": false, "id": 81591, "time": "2005-10-24T06:40:30Z", "creator": "anand_sidhu@emailaccount.com", "creation_time": "2005-10-24T06:40:30Z", "text": "(In reply to comment #7)\n> Digging somewhat deeper shows that the mentioned patch was introduced between\n> 1.3.31 and 1.3.32 to fix a problem. But before 1.3.32 was released this patch\n> was exchanged against a better solution for this problem (see\n> http://cvs.apache.org/viewcvs.cgi/apache-1.3/src/main/http_request.c \nversions \n> 1.174 - 1.176, or better on svn\n> \nhttp://svn.apache.org/viewcvs.cgi/httpd/httpd/branches/1.3.x/src/main/http_requ\nest.c?rev=106443&view=log\n> r103539, r103798, r104871).\n> Nevertheless applying the patch might deliver valuable information for the\n> further debugging of the problem. Furthermore it would be interesting to know\n> how you access the jsps (e.g. mod_proxy, mod_jk, third party module of\n> application server)\n\nThanks,\nI will dig into this and also will let you know of the connection module."}, {"count": 10, "tags": [], "bug_id": 37206, "attachment_id": null, "text": "> Thanks,\n> I will dig into this and also will let you know of the connection module.\nWe are using (ATG) Dynamo connection module 6.3. The app server is atg dynamo \n6.4.\n\n", "id": 81682, "time": "2005-10-25T06:29:35Z", "creator": "anand_sidhu@emailaccount.com", "creation_time": "2005-10-25T06:29:35Z", "is_private": false}, {"count": 11, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "is_private": false, "id": 81683, "time": "2005-10-25T06:35:01Z", "bug_id": 37206, "creation_time": "2005-10-25T06:35:01Z", "text": "\"We are using (ATG) Dynamo connection module 6.3\"\n\nThis database is strictly for supporting the ASF's Apache HTTP Web Server...\n\n...suggest that you open an incident with your vendor to make further progress,\nI'm afraid this bug report is entirely to twisted with contradictions to be\nof any use for pinning down an issue in httpd.  As there have been no similar\nreports, it's likely a module incompatibility.\n"}, {"count": 12, "tags": [], "bug_id": 37206, "attachment_id": null, "is_private": false, "id": 81778, "time": "2005-10-26T17:25:14Z", "creator": "wrowe@apache.org", "creation_time": "2005-10-26T17:25:14Z", "text": "*** Bug 37244 has been marked as a duplicate of this bug. ***"}]