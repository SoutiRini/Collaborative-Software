[{"attachment_id": null, "tags": [], "bug_id": 1679, "is_private": false, "count": 0, "id": 2349, "time": "2001-05-09T07:53:10Z", "creator": "amilkowski@unicast.com", "creation_time": "2001-05-09T07:53:10Z", "text": "after performing load test using ab against Tomcat 3.2.2-beta4 via the mod_jk \nconnector, after approximately one hour server dumped the following exception\non the console:\n\n\nbash-2.03# HANDLER THREAD PROBLEM: java.net.SocketException: socket\nclosed: Bad file number\njava.net.SocketException: socket closed: Bad file number\n        at java.net.SocketInputStream.socketRead(Native Method)\n        at java.net.SocketInputStream.read(SocketInputStream.java:86)\n        at java.io.BufferedInputStream.fill(BufferedInputStream.java:186)\n        at java.io.BufferedInputStream.read(BufferedInputStream.java:204)\n        at\norg.apache.tomcat.service.connector.AJP12RequestAdapter.readNextRequest\n(Ajp12ConnectionHandler.java:233)\n        at\norg.apache.tomcat.service.connector.Ajp12ConnectionHandler.processConnection\n(Ajp12ConnectionHandler.java:147)\n        at\norg.apache.tomcat.service.TcpWorkerThread.runIt(PoolTcpEndpoint.java:416)\n        at\norg.apache.tomcat.util.ThreadPool$ControlRunnable.run(ThreadPool.java:498)\n        at java.lang.Thread.run(Thread.java:484)"}, {"count": 1, "tags": [], "creator": "cmanolache@yahoo.com", "attachment_id": null, "text": "Check the number of file descriptors, then check the number of sockets in\nTIME_WAIT. 99% sure you'll have a lot ( netstat -an |grep TIME_WAIT ). I don't\nremember how you reduce the time wait ( google will help ), but you could use\nAjp13 ( which reuse the connection - in ajp12 it creates a apache-tomcat\nconnection for each request ). You may want to reduce the time_wait anyway,\nas it may affect apache standalone.", "id": 4480, "time": "2001-08-11T09:15:46Z", "bug_id": 1679, "creation_time": "2001-08-11T09:15:46Z", "is_private": false}]