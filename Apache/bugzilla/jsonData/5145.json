[{"text": "Please add strict validation of server.xml. In one example, we defined an SSL\nconnector as follows:\n\n<Connector className=\"org.apache.catalina.connector.http.HttpConnector\"\n               port=\"443\" \n               proxyPort=\"443\" \n               minProcessors=\"5\" \n               maxProcessors=\"75\"\n               enableLookups=\"true\"\n               acceptCount=\"200\" \n               debug=\"0\" \n               scheme=\"https\" \n               secure=\"true\" >\n               keystoreFile=\"d:\\data/config/.keystore\" \n\n               <Factory \n                    className=\"org.apache.catalina.net.SSLServerSocketFactory\"\n                    clientAuth=\"false\" \n                    protocol=\"TLS\" \n                    />\n    </Connector>\n\nAnd Tomcat did not complain that 'keystore' is defined in the Connector element\ninstead of the factory element.\n\nOne practical way to perform the validation is to use a DTD based validation\ndurign the XML parsing and to use the Doctype Changer library to force the\nvalidation of server.xml against the required DTD.", "tags": [], "bug_id": 5145, "is_private": false, "count": 0, "id": 8350, "time": "2001-11-27T12:48:07Z", "creator": "tal@zapta.com", "creation_time": "2001-11-27T12:48:07Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 5145, "attachment_id": null, "text": "We don't have a DTD for server.xml yet (contributions are welcome, of course). \nI reclassify the bug as 'enhancememt'.", "id": 8354, "time": "2001-11-27T14:00:08Z", "creator": "remm@apache.org", "creation_time": "2001-11-27T14:00:08Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 5145, "attachment_id": null, "text": "Note that it's not possible to build a DTD (or a Schema) that can completely\nverify the contents of server.xml, even for the standard elements provided by\nTomcat.  Given that users can add their own implemenations of things like\nValves, Loggers, and Realms -- with configuration attributes that are not\nknowable in advance -- it becomes technically infeasible to do this.\n\nIn addition, the particular issue you raised (complain about attributes that do\nnot have corresponding properties on the corresponding object) would break uses\nof server.xml where different attributes are processed by different objects.  A\ncommon case is the \"className\" attribute on (say) the <Valve> element, which is\nprocessed by the Context or Host object, rather than by the Valve implementation\nclass itself.\n", "id": 8936, "time": "2001-12-14T18:22:44Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-12-14T18:22:44Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 5145, "text": "Following Craig's recommendation that this is likely to be not doable (although\nit would be nice to have).", "id": 9846, "time": "2002-01-24T15:15:00Z", "creator": "remm@apache.org", "creation_time": "2002-01-24T15:15:00Z", "is_private": false, "attachment_id": null}]