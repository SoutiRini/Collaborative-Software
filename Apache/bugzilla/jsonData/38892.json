[{"count": 0, "tags": [], "bug_id": 38892, "attachment_id": null, "text": "Hello,\nin section \"Fiddling with Quality Values\", the following example is given, it\nallows negotiation to depend on the contents of a cookie:\n\nSetEnvIf Cookie \"language=(.+)\" prefer-language=$1\n\nI suggest to change this example to:\n\n  Example:\n  SetEnvIf Cookie \"language=([a-z-]+)\" prefer-language=$1\n  Header append Vary cookie\n\n  The addition of the value \"cookie\" to the \"Vary:\" header is necessary\n  for correct caching of the different versions of the page by browsers\n  and HTTP proxies.\n\nIt would be nice if Apache automatically added the header when you use SetEnvIf\nin this way... oh well.", "id": 86601, "time": "2006-03-08T11:15:56Z", "creator": "richard@2006.atterer.net", "creation_time": "2006-03-08T11:15:56Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 38892, "attachment_id": null, "text": ">   SetEnvIf Cookie \"language=([a-z-]+)\" prefer-language=$1\n>   Header append Vary cookie\n\nI realize this is also a fairly problematic solution: If a site uses cookies\nwith session IDs, then images and other static content will be stored multiple\ntimes by proxies! :-(  Unfortunately, only a workaround is possible:\n\nSetEnvIf Request_URI \\.(jpe?g|gif|png|exe|bin|zip|bz2|t?gz|swf)$ staticReq\nHeader onsuccess append Vary cookie env=!staticReq\n", "id": 88339, "time": "2006-04-20T22:56:37Z", "creator": "richard@2006.atterer.net", "creation_time": "2006-04-20T22:56:37Z", "is_private": false}, {"count": 2, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "id": 90795, "time": "2006-06-30T18:27:26Z", "bug_id": 38892, "creation_time": "2006-06-30T18:27:26Z", "is_private": false, "text": "Yes, I agree it is better to be more precise with the examples so I've added the\nVary header.  Thanks."}]