[{"count": 0, "tags": [], "bug_id": 22535, "attachment_id": null, "is_private": false, "id": 42950, "time": "2003-08-18T22:22:38Z", "creator": "svanleent@wanadoo.nl", "creation_time": "2003-08-18T22:22:38Z", "text": "I need to use proper XML syntax, as proposed by the minimal JSP 1.2 XML syntax,\nwith EL I need to use JSP 2.0 in order to get it working.\n\nI am using the following JSP code in a single JSP file:\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\n<jsp:root xmlns:jsp=\"http://java.sun.com/JSP/Page\"\n          xmlns:c=\"http://java.sun.com/jstl/core_rt\"\n          version=\"1.2\">\n\n\t<jsp:directive.page language=\"java\" \n\t                    contentType=\"text/html; charset=ISO-8859-1\"\n\t                    pageEncoding=\"ISO-8859-1\" \n\t                    session=\"true\" />\n\n\t<jsp:text><![CDATA[<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>]]></jsp:text>\n\t<jsp:text><![CDATA[\n\t\t<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \n\t\t\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n\t]]></jsp:text>\n\n\t<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n\t\t<head>\n\t\t\t<title>Test2</title>\n\t\t</head>\n\t\t<body>\n\t\t\t<div>\n\t\t\t\t<c:forEach var=\"counter\" begin=\"0\" end=\"9\" step=\"1\">\n\t\t\t\t\t${counter}\n\t\t\t\t</c:forEach>\n\t\t\t</div>\n\t\t</body>\n\n\t</html>\n\t\n</jsp:root>\n\nThis should work correctly according to the specifications, however, the SAX\nparser goes wrong with the xmlns:c statement in the jsp:root tag.\n\nThe errorcode it produces is:\n\n------------------------------------------------------------\n\ntype Exception report\n\nmessage\n\ndescription The server encountered an internal error () that prevented it from\nfulfilling this request.\n\nexception\n\norg.apache.jasper.JasperException\n\torg.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:94)\n\torg.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:365)\n\torg.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:259)\n\torg.apache.jasper.compiler.JspDocumentParser.parse(JspDocumentParser.java:203)\n\torg.apache.jasper.compiler.ParserController.parse(ParserController.java:223)\n\torg.apache.jasper.compiler.ParserController.parse(ParserController.java:146)\n\torg.apache.jasper.compiler.ParserController.parse(ParserController.java:132)\n\torg.apache.jasper.compiler.Compiler.generateJava(Compiler.java:245)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:453)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:439)\n\torg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:555)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:300)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:293)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\nroot cause\n\njava.lang.NullPointerException\n\torg.apache.jasper.compiler.PageInfo.popPrefixMapping(PageInfo.java:339)\n\torg.apache.jasper.compiler.JspDocumentParser.endPrefixMapping(JspDocumentParser.java:574)\n\torg.apache.xerces.parsers.AbstractSAXParser.endNamespaceMapping(Unknown Source)\n\torg.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)\n\torg.apache.xerces.impl.XMLNamespaceBinder.handleEndElement(Unknown Source)\n\torg.apache.xerces.impl.XMLNamespaceBinder.endElement(Unknown Source)\n\torg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown\nSource)\n\torg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\n\torg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n\torg.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n\torg.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n\torg.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n\torg.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n\tjavax.xml.parsers.SAXParser.parse(Unknown Source)\n\torg.apache.jasper.compiler.JspDocumentParser.parse(JspDocumentParser.java:195)\n\torg.apache.jasper.compiler.ParserController.parse(ParserController.java:223)\n\torg.apache.jasper.compiler.ParserController.parse(ParserController.java:146)\n\torg.apache.jasper.compiler.ParserController.parse(ParserController.java:132)\n\torg.apache.jasper.compiler.Compiler.generateJava(Compiler.java:245)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:453)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:439)\n\torg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:555)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:300)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:293)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\n------------------------------------------------------------\n\nI notice that there has to be a problem with the SAX parser, and so, with the\ngiven XML document, but I am not able to work out what it is."}, {"count": 1, "tags": [], "creator": "kin-man.chung@sun.com", "text": "This is a duplicate and has been fixed.\n\n*** This bug has been marked as a duplicate of 22439 ***", "id": 42951, "time": "2003-08-18T22:36:07Z", "bug_id": 22535, "creation_time": "2003-08-18T22:36:07Z", "is_private": false, "attachment_id": null}]