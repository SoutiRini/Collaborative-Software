[{"count": 0, "tags": [], "bug_id": 25037, "is_private": false, "id": 48207, "attachment_id": null, "creator": "richard@corticaldesign.com", "creation_time": "2003-11-26T22:26:07Z", "time": "2003-11-26T22:26:07Z", "text": "Testing out JSTL Standard Taglibs v1.0.4 on Tomcat 4.1.2 /Linux and came \nacross this error - debug trace at the bottom.\n\nThe field in question is a mySQL 'Year' field stored in table type MyISAM.\n\nJSP code that generated this is as follows:\n\n<%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jstl/core\" %>\n<%@ taglib prefix=\"sql\" uri=\"http://java.sun.com/jstl/sql\" %>\n\n<c:out value = \"hi there!\"/>\n\n<sql:setDataSource driver = \"org.gjt.mm.mysql.Driver\" url=\"jdbc:mysql://blah\" \nuser = \"blah\" password = \"blah\"/> \n\n<sql:query var = \"films\">\n  SELECT * FROM films\n</sql:query>\n\n<table>\n<c:forEach items=\"${films.rows}\" var = \"row\">\n  <tr>\n    <td><c:out value = \"${row.Title}\"/></td>\n  </tr>\n</c:forEach>\n</table>\n\nDebug trace:\n\n\njavax.servlet.ServletException: \n  SELECT * FROM films\n: Cannot convert value '1997' from column 9(1997 ) to DATE.\n\tat org.apache.jasper.runtime.PageContextImpl.handlePageException\n(PageContextImpl.java:463)\n\tat org.apache.jsp.jstl_0002dtest$jsp._jspService\n(jstl_0002dtest$jsp.java:237)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:202)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:382)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:474)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.access$0\n(ApplicationFilterChain.java:197)\n\tat org.apache.catalina.core.ApplicationFilterChain$1.run\n(ApplicationFilterChain.java:176)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:172)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.process\n(Ajp13Processor.java:429)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.run(Ajp13Processor.java:495)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\nroot cause \n\njavax.servlet.jsp.JspException: \n  SELECT * FROM films\n: Cannot convert value '1997' from column 9(1997 ) to DATE.\n\tat org.apache.taglibs.standard.tag.common.sql.QueryTagSupport.doEndTag\n(QueryTagSupport.java:253)\n\tat org.apache.jsp.jstl_0002dtest$jsp._jspService\n(jstl_0002dtest$jsp.java:152)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:202)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:382)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:474)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.access$0\n(ApplicationFilterChain.java:197)\n\tat org.apache.catalina.core.ApplicationFilterChain$1.run\n(ApplicationFilterChain.java:176)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:172)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:943)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.process\n(Ajp13Processor.java:429)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.run(Ajp13Processor.java:495)\n\tat java.lang.Thread.run(Thread.java:536)"}, {"count": 1, "tags": [], "bug_id": 25037, "is_private": false, "text": "I wrote a simple example to try to reproduce your problem,\nbut it worked for me.\n\nCould you attach a war file with the simplest example that would\nreproduce your problem. \n\nThe following works for me...\n\n---\n\n<%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n<%@ taglib prefix=\"sql\" uri=\"http://java.sun.com/jsp/jstl/sql\" %>\n\n<c:catch var=\"ex\">\n  <sql:update>\n    DROP TABLE FILMS\n  </sql:update>\n</c:catch>\n\n<sql:update>\n  CREATE TABLE FILMS (\n      ID int auto_increment primary key,\n      NAME varchar(80),\n      ZEYEAR year\n  )\n</sql:update>\n\n<sql:update>\n  INSERT INTO FILMS VALUES\n    (null, 'film1', 2002),\n    (null, 'film2', 2003),\n    (null, 'film3', 2004)\n</sql:update> \n\n<sql:query var=\"result\">\n  SELECT * \n  FROM FILMS\n</sql:query>\n\n<table>\n<c:forEach items=\"${result.rows}\" var = \"row\">\n  <tr>\n    <td><c:out value = \"${row.ZEYEAR}\"/></td>\n  </tr>\n</c:forEach>\n</table>", "id": 50162, "time": "2004-01-07T01:31:52Z", "creator": "pierre.delisle@sun.com", "creation_time": "2004-01-07T01:31:52Z", "attachment_id": null}]