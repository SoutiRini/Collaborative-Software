[{"count": 0, "attachment_id": null, "bug_id": 58986, "text": "The report dashboard uses the same output directory for each report.\n\nThis is a big nuisance", "id": 188311, "time": "2016-02-09T19:26:17Z", "creator": "sebb@apache.org", "creation_time": "2016-02-09T19:26:17Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "text": "What do you propose ?\nSetting it to the configured property with a suffix like -yyyymmddHHmmss where date is the date of start of test ?\n\nThanks", "attachment_id": null, "id": 188315, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2016-02-09T19:50:58Z", "bug_id": 58986, "creation_time": "2016-02-09T19:50:58Z", "is_private": false}, {"count": 2, "tags": [], "text": "The directory name could be derived from the csv file name. That would be better than nothing. A timestamp would be overkill, as repeat reports would generate new versions unnecessarily. Or I suppose you could use the source file name plus a hash of the contents? That could be optional - I suspect it's enough to just use the file name.", "attachment_id": null, "id": 188321, "creator": "sebb@apache.org", "time": "2016-02-09T20:08:53Z", "bug_id": 58986, "creation_time": "2016-02-09T20:08:53Z", "is_private": false}, {"count": 3, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "text": "I documented in docs/usermanual/generating-dashboard.html how generating to a particular repository can be done using :\n-Jjmeter.reportgenerator.exporter.html.property.output_dir=<Path to output folder>\n\nClosing it.", "id": 188859, "time": "2016-02-26T21:13:31Z", "bug_id": 58986, "creation_time": "2016-02-26T21:13:31Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 58986, "attachment_id": null, "id": 188877, "time": "2016-02-27T00:52:11Z", "creator": "sebb@apache.org", "creation_time": "2016-02-27T00:52:11Z", "is_private": false, "text": "Although that allows the user to avoid overwriting the previous output, it's not exactly user-friendly.\n\nIf the feature is to be of any use, it needs to work without needing a hack like this.\n\nWe're going to get a lot of annoyed users (and many queries on the lists) if the code is released as is."}, {"count": 5, "tags": [], "bug_id": 58986, "attachment_id": null, "is_private": false, "id": 188880, "time": "2016-02-27T08:36:01Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-02-27T08:36:01Z", "text": "Hi Sebb,\nI propose to add -o option for output directory.\n\nIs it ok for you ?\n\nThanks"}, {"attachment_id": null, "tags": [], "bug_id": 58986, "is_private": false, "count": 6, "id": 188906, "time": "2016-02-27T10:55:33Z", "creator": "sebb@apache.org", "creation_time": "2016-02-27T10:55:33Z", "text": "That's marginally better than having to define a property (which can already be done on the command line), but still does not make the feature easy to use.\n\nAlso there are already an lot of CLI options; do we really want another one?"}, {"count": 7, "tags": [], "bug_id": 58986, "attachment_id": null, "is_private": false, "id": 188910, "time": "2016-02-27T12:01:26Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-02-27T12:01:26Z", "text": "I don't think feature is hard to use with last updates to documentation.\n\nMy colleagues have been using it (the one that generates on demand, not after run) without any help.\n\nI don't see why this additional option would make it harder, I personally think that it's ok as is, but if we need to make it clearer, we have a tool that generates a report,I suppose user can guess that they must tell the tool where to generate\n\nFurthermore, since the fix to options display, they run jmeter -h and they get all the required information.\n\n\nIf there is a field to improve, it would be to switch from old avalon CLI classes to new commons-cli to make command line options more readable by having more than 1 character.\n\n\nSo unless you have a better idea, either we keep it as is, or I add this additional option.\n\nRegards"}, {"count": 8, "tags": [], "text": "(In reply to Philippe Mouawad from comment #7)\n> I don't think feature is hard to use with last updates to documentation.\n\nThat's because you know it well.\n \n> My colleagues have been using it (the one that generates on demand, not\n> after run) without any help.\n\nThey are colleagues, so have probably seen you running it.\n\n> I don't see why this additional option would make it harder, I personally\n> think that it's ok as is, but if we need to make it clearer, we have a tool\n> that generates a report,I suppose user can guess that they must tell the\n> tool where to generate\n\nI did not say that the additional option would make it harder, but it won't  make it any easier.\n \n> Furthermore, since the fix to options display, they run jmeter -h and they\n> get all the required information.\n> \n> If there is a field to improve, it would be to switch from old avalon CLI\n> classes to new commons-cli to make command line options more readable by\n> having more than 1 character.\n\nThe problem is the sheer number of options, not their verbosity.\n\n> \n> So unless you have a better idea, either we keep it as is, or I add this\n> additional option.\n\nI already suggested creating the directory name from the csv file name.\n \n> Regards", "is_private": false, "id": 188931, "creator": "sebb@apache.org", "time": "2016-02-28T21:13:48Z", "bug_id": 58986, "creation_time": "2016-02-28T21:13:48Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 58986, "attachment_id": null, "id": 188932, "time": "2016-02-28T21:18:33Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-02-28T21:18:33Z", "is_private": false, "text": "(In reply to Sebb from comment #8)\n> (In reply to Philippe Mouawad from comment #7)\n> > I don't think feature is hard to use with last updates to documentation.\n> \n> That's because you know it well.\n>  \n> > My colleagues have been using it (the one that generates on demand, not\n> > after run) without any help.\n> \n> They are colleagues, so have probably seen you running it.\n\nNo :-)\n\n> \n> > I don't see why this additional option would make it harder, I personally\n> > think that it's ok as is, but if we need to make it clearer, we have a tool\n> > that generates a report,I suppose user can guess that they must tell the\n> > tool where to generate\n> \n> I did not say that the additional option would make it harder, but it won't \n> make it any easier.\n\nThe name will be much easier to write:\n -o <Path to output folder>\nvs \n-Jjmeter.reportgenerator.exporter.html.property.output_dir=<Path to output folder>\n\nAnd it will be display when running:\n-  jmeter -h \n\n> > Furthermore, since the fix to options display, they run jmeter -h and they\n> > get all the required information.\n> > \n> > If there is a field to improve, it would be to switch from old avalon CLI\n> > classes to new commons-cli to make command line options more readable by\n> > having more than 1 character.\n> \n> The problem is the sheer number of options, not their verbosity.\n> \n> > \n> > So unless you have a better idea, either we keep it as is, or I add this\n> > additional option.\n> \n> I already suggested creating the directory name from the csv file name.\n\nI don't see how it solves the problem.\nFor example, in my usual configuration, the file names always has the same name, so I would end up overwriting it.\nI find it also counter intuitive. \n\nI personally prefer the output option.\n\n>  \n> > Regards"}, {"count": 10, "tags": [], "text": "(In reply to Philippe Mouawad from comment #9)\n> (In reply to Sebb from comment #8)\n> > (In reply to Philippe Mouawad from comment #7)\n> > I did not say that the additional option would make it harder, but it won't \n> > make it any easier.\n> \n> The name will be much easier to write:\n>  -o <Path to output folder>\n> vs \n> -Jjmeter.reportgenerator.exporter.html.property.output_dir=<Path to output\n> folder>\n\nYes, -o is easier than -J.\nBut both are harder than not having to specify the directory at all.\nAnd you have to remember to do it.\n\n> I don't see how it solves the problem.\n\nRemember that this is a new feature; people are likely to have lots of CSV files that they want to convert.\n\nDo they really want to have to specify both the CSV name and the directory name?\n\n> For example, in my usual configuration, the file names always has the same\n> name, so I would end up overwriting it.\n\nIn which case you have already overwritten the CSV file.\nIn any case it's more flexible than always overwriting the report.\n\n==\n\nNow if the default name were derived from the CSV file (rather than being fixed), your existing property hack would allow you to rename it to anything you wanted. You would be no worse off. But at least others would not accidentally overwrite their reports because they omitted to define the dir name", "attachment_id": null, "id": 188936, "creator": "sebb@apache.org", "time": "2016-02-29T00:01:48Z", "bug_id": 58986, "creation_time": "2016-02-29T00:01:48Z", "is_private": false}, {"count": 11, "tags": [], "text": "Author: pmouawad\nDate: Mon Feb 29 20:57:32 2016\nNew Revision: 1732944\n\nURL: http://svn.apache.org/viewvc?rev=1732944&view=rev\nLog:\nBug 58986 - Report/Dashboard reuses the same output directory\nBugzilla Id: 58986\n\nModified:\n    jmeter/trunk/bin/jmeter.properties\n    jmeter/trunk/src/core/org/apache/jmeter/JMeter.java\n    jmeter/trunk/src/core/org/apache/jmeter/report/dashboard/HtmlTemplateExporter.java\n    jmeter/trunk/xdocs/changes.xml\n    jmeter/trunk/xdocs/usermanual/generating-dashboard.xml", "attachment_id": null, "id": 188979, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2016-02-29T20:58:02Z", "bug_id": 58986, "creation_time": "2016-02-29T20:58:02Z", "is_private": false}, {"count": 12, "attachment_id": null, "bug_id": 58986, "is_private": false, "id": 188981, "time": "2016-02-29T21:21:19Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-02-29T21:21:19Z", "tags": [], "text": "Author: pmouawad\nDate: Mon Feb 29 21:18:55 2016\nNew Revision: 1732948\n\nURL: http://svn.apache.org/viewvc?rev=1732948&view=rev\nLog:\nBug 58986 - Report/Dashboard reuses the same output directory\nTake into account sebb note on dev mailing list:\n\"- The precedence is wrong; command line options should always override property definitions.\"\nBugzilla Id: 58986\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/report/dashboard/HtmlTemplateExporter.java\n\nAuthor: pmouawad\nDate: Mon Feb 29 21:20:59 2016\nNew Revision: 1732949\n\nURL: http://svn.apache.org/viewvc?rev=1732949&view=rev\nLog:\nBug 58986 - Report/Dashboard reuses the same output directory\nTake into account sebb note on dev mailing list:\n\"- The precedence is wrong; command line options should always override property definitions.\"\nBugzilla Id: 58986\n\nModified:\n    jmeter/trunk/bin/jmeter.properties"}, {"count": 13, "tags": [], "bug_id": 58986, "text": "Author: pmouawad\nDate: Mon Feb 29 21:37:12 2016\nNew Revision: 1732951\n\nURL: http://svn.apache.org/viewvc?rev=1732951&view=rev\nLog:\nBug 58986 - Report/Dashboard reuses the same output directory\nDocument new command line option\nBugzilla Id: 58986\n\nModified:\n    jmeter/trunk/xdocs/usermanual/get-started.xml", "id": 188982, "time": "2016-02-29T21:43:00Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-02-29T21:43:00Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "text": "-g option silently overrides -l, -r, -R.\n\nThey don't make sense together, but the user should be warned.", "is_private": false, "id": 188987, "creator": "sebb@apache.org", "time": "2016-03-01T09:51:46Z", "bug_id": 58986, "creation_time": "2016-03-01T09:51:46Z", "attachment_id": null}, {"count": 15, "tags": [], "text": "(In reply to Sebb from comment #14)\n> -g option silently overrides -l, -r, -R.\n> \n> They don't make sense together, but the user should be warned.\n\nNote: just noticed that the CLI parser can do this; I'm working on fixing this.", "attachment_id": null, "id": 188988, "creator": "sebb@apache.org", "time": "2016-03-01T10:11:54Z", "bug_id": 58986, "creation_time": "2016-03-01T10:11:54Z", "is_private": false}, {"count": 16, "attachment_id": null, "bug_id": 58986, "text": "(In reply to Sebb from comment #15)\n> (In reply to Sebb from comment #14)\n> > -g option silently overrides -l, -r, -R.\n> > \n> > They don't make sense together, but the user should be warned.\n> \n> Note: just noticed that the CLI parser can do this; I'm working on fixing\n> this.\n\nThere are other options that ought to be checked against each other; raised Bug 59091 to deal with them all together.", "id": 188992, "time": "2016-03-01T11:54:05Z", "creator": "sebb@apache.org", "creation_time": "2016-03-01T11:54:05Z", "tags": [], "is_private": false}, {"count": 17, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "id": 189034, "creation_time": "2016-03-02T21:54:56Z", "time": "2016-03-02T21:54:56Z", "bug_id": 58986, "text": "Closing as you opened  Bug 59091", "attachment_id": null}, {"count": 18, "tags": [], "creator": "sebb@apache.org", "is_private": false, "id": 189485, "creation_time": "2016-03-14T22:31:43Z", "time": "2016-03-14T22:31:43Z", "bug_id": 58986, "text": "I don't think this is quite fixed.\n\nThere are two aspects:\n\nThe standalone command-line looks like this:\n\njmeter -n -g <log file> -o <Path to output folder>\n\nThere is really no need for the -n option.\n\nThe other aspect which I think is still an issue is that the output directory should be derived from the log file (but still allowing an override).\n\nThis would be much simpler for the user:\n\njmeter -g <log file>", "attachment_id": null}, {"count": 19, "tags": [], "bug_id": 58986, "attachment_id": null, "id": 189486, "time": "2016-03-14T22:35:26Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-03-14T22:35:26Z", "is_private": false, "text": "It can be in a 3.1\nLet's see how users receive it.\n\nI don't find your proposal very intuitive and if user uses always the same output file, how do you proceed ?"}, {"count": 20, "attachment_id": null, "bug_id": 58986, "text": "We've already discussed that.\n\nAt present if the -o flag is omitted, ALL output goes to the same directory, regardless of input file name.\n\nAt least if the default output file is derived from the input file name, the user will only need to provide the output name if they redo the test.\n\nWhereas with the existing code, the -o flag is pretty much mandatory if one is working with multiple input files.\n\n===\n\nI think there's another problem.\nIf the  -o flag is omitted, the output always goes to report-output/\nThere is no check to see if anything is being overwritten.\n\nWhereas with -o, the target directory has to be empty or non-existent.\nThis is inconsistent.\n\n[Note: if the name is derived from the input file, my intention was to do the same checks]\n\nAt present it's awkward to convert lots of existing files, and far too easy to lose the output.", "id": 189487, "time": "2016-03-15T00:45:24Z", "creator": "sebb@apache.org", "creation_time": "2016-03-15T00:45:24Z", "tags": [], "is_private": false}, {"count": 21, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 189593, "creation_time": "2016-03-18T21:33:04Z", "time": "2016-03-18T21:33:04Z", "bug_id": 58986, "text": "I suggest the following:\n- I add the check of emptyness to default folder for 3.0\n- You close this one and open a new Bugzilla with your idea that we delay to 3.1\n\nThis way we can close this one and progress on 3.0 release.\nThanks", "is_private": false}, {"count": 22, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "text": "Author: pmouawad\nDate: Sun Mar 20 13:24:14 2016\nNew Revision: 1735879\n\nURL: http://svn.apache.org/viewvc?rev=1735879&view=rev\nLog:\nBug 58986 - Report/Dashboard reuses the same output directory\nFactor in JOrphanUtils the check for output folder and make it more readable and complete\nAdd the check in both HtmlTemplateExporter and JMeter as per sebb request\nBugzilla Id: 58986\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/JMeter.java\n    jmeter/trunk/src/core/org/apache/jmeter/report/dashboard/HtmlTemplateExporter.java\n    jmeter/trunk/src/jorphan/org/apache/jorphan/util/JOrphanUtils.java", "id": 189607, "time": "2016-03-20T13:24:44Z", "bug_id": 58986, "creation_time": "2016-03-20T13:24:44Z", "attachment_id": null}, {"count": 23, "tags": [], "text": "(In reply to Sebb from comment #18)\n> I don't think this is quite fixed.\n> \n> There are two aspects:\n> \n> The standalone command-line looks like this:\n> \n> jmeter -n -g <log file> -o <Path to output folder>\n> \n> There is really no need for the -n option.\n> \n> The other aspect which I think is still an issue is that the output\n> directory should be derived from the log file (but still allowing an\n> override).\n> \n> This would be much simpler for the user:\n> \n> jmeter -g <log file>\n\nURL: http://svn.apache.org/viewvc?rev=1735914&view=rev\nLog:\n Report/Dashboard reuses the same output directory\n No need for -n option when running generator only (-g)\nBugzilla Id: 58986\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/JMeter.java\n    jmeter/trunk/xdocs/usermanual/generating-dashboard.xml", "is_private": false, "id": 189608, "creator": "sebb@apache.org", "time": "2016-03-21T01:24:07Z", "bug_id": 58986, "creation_time": "2016-03-21T01:24:07Z", "attachment_id": null}, {"count": 24, "tags": [], "bug_id": 58986, "attachment_id": null, "is_private": false, "id": 189908, "time": "2016-04-02T08:46:00Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-04-02T08:46:00Z", "text": "Author: pmouawad\nDate: Sat Apr  2 08:45:33 2016\nNew Revision: 1737472\n\nURL: http://svn.apache.org/viewvc?rev=1737472&view=rev\nLog:\nReport/Dashboard reuses the same output directory\nFix regression introduced by commit r1735914, the output folder was no more read for -g option\nBugzilla Id: 58986\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/JMeter.java"}]