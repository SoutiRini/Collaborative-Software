[{"count": 0, "tags": [], "bug_id": 39545, "text": "From 1.3.35 ChangeLog:\n\n*) core: Allow usage of the \"Include\" configuration directive within\n         previously \"Include\"d files. [Colm MacCarthaigh]\n\n\nIn my configuration, at the end of httpd.conf I have the following line:\n\nInclude /etc/httpd/vhosts.conf\n\nvhosts.conf contains a list of Include statements for each domain hosted. e.g.:\n\nInclude /etc/httpd/vhosts/mydomain.com\nInclude /etc/httpd/vhosts/otherdomain.tld\n\nWhen upgrading to 1.3.35, apache fails to start with this error:\n*** glibc detected *** double free or corruption (!prev): 0x080c9488 ***\n\nIf I set MALLOC_CHECK_=0, apache starts but fails to run the Include directives\nfrom vhosts.conf.\n\nOn another system with the same configuration, I get the following:\nSyntax error on line 124 of /etc/httpd/vhosts/domain.tld:\nInvalid command '', perhaps mis-spelled or defined by a module not included in\nthe server configuration  (Even though the file has only 117 lines.)\n\nIf I use the httpd_core.c file from 1.3.34 everything works fine.\n\nHere's the diff between 1.3.34 and 1.3.35 on that file:\n\n--- http_core.c 2006-05-10 09:39:58.000000000 -0500\n+++ http_core.c.orig    2006-05-10 09:39:45.000000000 -0500\n@@ -2770,9 +2770,12 @@\n \n static const char *include_config (cmd_parms *cmd, void *dummy, char *name)\n {\n+    static cmd_parms parms;\n     name = ap_server_root_relative(cmd->pool, name);\n+\n+    memcpy(&parms, cmd, sizeof(parms));\n     \n-    ap_process_resource_config(cmd->server, name, cmd->pool, cmd->temp_pool);\n+    ap_process_include_config(cmd->server, name, cmd->pool, cmd->temp_pool,\n&parms);\n \n     return NULL;\n }\n\nIt appears that that memcpy() call is generating the glibc error.", "id": 88998, "time": "2006-05-10T15:26:18Z", "creator": "tjw@tjw.org", "creation_time": "2006-05-10T15:26:18Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 39545, "text": "\n\n*** This bug has been marked as a duplicate of 39490 ***", "id": 89001, "time": "2006-05-10T15:34:48Z", "creator": "jorton@redhat.com", "creation_time": "2006-05-10T15:34:48Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 39545, "attachment_id": null, "id": 89012, "time": "2006-05-10T20:54:11Z", "creator": "wrowe@apache.org", "creation_time": "2006-05-10T20:54:11Z", "is_private": false, "text": "This in fact is a duplicate of bug 39516 - not the wildcard includes fault."}]