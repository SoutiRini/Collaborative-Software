[{"count": 0, "tags": [], "creator": "rob@apgood.com", "is_private": false, "id": 130988, "creation_time": "2009-10-08T09:06:39Z", "time": "2009-10-08T09:06:39Z", "bug_id": 47966, "text": "All attempts to access any virtual server other than the first container in the list (Apache2.2/conf/extra/httpd-vhosts.conf) causes httpd.exe to abort at 0x0177072 attempting to access memory at 0x00000000.  This occurs in versions 2.2.12, 2.2.13, and 2.2.14.\nExecuting Windows binaries on Windows Server 2003.\n\nHasn't anyone else experienced this problem?\n\nhttpd-vhosts.conf: Only cases.carpelaw.com responds\n\nNameVirtualHost *:80\n<Directory \"D:/Apache/casetracker\">\n    Order allow,deny\n    Allow from all\n</Directory>\n\n<VirtualHost *:80>\n    ServerAdmin rob@carpelaw.com\n    DocumentRoot \"D:/Apache/casetracker\"\n    ServerName cases.carpelaw.com\n    ErrorLog D:/Apache/casetracker/logs/errors.log\n    CustomLog D:/Apache/casetracker/logs/access.log common\n</VirtualHost>\n\n<Directory \"D:/Apache/carpelaw\">\n    Order allow,deny\n    Allow from all\n</Directory>\n\n<VirtualHost *:80>\n    ServerAdmin rob@carpelaw.com\n    DocumentRoot \"D:/Apache/carpelaw\"\n    ServerName www.carpelaw.com\n    ErrorLog D:/Apache/carpelaw/logs/errors.log\n    CustomLog D:/Apache/carpelaw/logs/access.log common\n</VirtualHost>\n\n<Directory \"D:/Apache/seomonster\">\n    Order allow,deny\n    Allow from all\n</Directory>\n\n<VirtualHost *:80>\n    ServerAdmin rob@carpelaw.com\n    DocumentRoot \"D:/Apache/seomonster\"\n    ServerName www2.carpelaw.com\n    ErrorLog D:/Apache/seomonster/logs/errors.log\n    CustomLog D:/Apache/seomonster/logs/access.log common\n</VirtualHost>", "attachment_id": null}, {"count": 1, "tags": [], "creator": "rob@apgood.com", "is_private": false, "text": "And, no, this is not a duplicate of Bug # 40506", "id": 130992, "time": "2009-10-08T10:20:16Z", "bug_id": 47966, "creation_time": "2009-10-08T10:20:16Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 47966, "attachment_id": null, "id": 130993, "time": "2009-10-08T11:57:49Z", "creator": "rob@apgood.com", "creation_time": "2009-10-08T11:57:49Z", "is_private": false, "text": "After digging around in the net, I discovered a posting by someone on stackoverflow.com that suggested moving php5apache.dll & libmysql.dll to the windows/system32 directory.  Well, 2.2.14 doesn't have a libmysql.dll, but it does have a php5apache2_2.dll.  I copied it to the system32 directory, and all of my problems disappeared.  Might want to add that to the installation for windows notes."}, {"count": 3, "tags": [], "bug_id": 47966, "attachment_id": null, "is_private": false, "id": 130994, "time": "2009-10-08T12:11:47Z", "creator": "rob@apgood.com", "creation_time": "2009-10-08T12:11:47Z", "text": "scratch that.  While it fixed the problem of loading plain html files from the virtual directory, php files still fall over.  I will continue looking at it."}, {"count": 4, "tags": [], "text": "comment #2 is a red herring.  Add appropriate PATH dirs to the *systemwide*\nenvironment, and don't forget to reboot because they are not updated when \nservices are started and stopped.", "is_private": false, "id": 130995, "creator": "wrowe@apache.org", "time": "2009-10-08T12:24:24Z", "bug_id": 47966, "creation_time": "2009-10-08T12:24:24Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "We can't evaluate what's going on unless you provide a backtrace, refer to http://httpd.apache.org/dev/debugging.html and \nhttp://www.apache.org/dist/httpd/binaries/win32/#source\n\nNote it might be necessary to install WinDbg in later versions of Windows,\nwhere Dr. Watson is no longer an option.  In any case, if you can provide\nthe backtrace we can definatively finger what's going on in httpd, and\notherwise we'll close this incident if there is no response.", "is_private": false, "bug_id": 47966, "id": 130996, "time": "2009-10-08T12:27:43Z", "creator": "wrowe@apache.org", "creation_time": "2009-10-08T12:27:43Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "rob@apgood.com", "is_private": false, "id": 131005, "creation_time": "2009-10-08T16:34:56Z", "time": "2009-10-08T16:34:56Z", "bug_id": 47966, "text": "Thank you.  I'll do the backtrace et al. and get back to you on this.", "attachment_id": null}, {"count": 7, "tags": [], "text": "I cannot find a symbols file for apache 2.2.14.  I have looked on several mirrors and on the apache.org site, but can't seem to locate the file. Please advise.", "is_private": false, "bug_id": 47966, "id": 131006, "time": "2009-10-08T17:43:12Z", "creator": "rob@apgood.com", "creation_time": "2009-10-08T17:43:12Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 47966, "attachment_id": null, "id": 131012, "time": "2009-10-08T21:29:47Z", "creator": "wrowe@apache.org", "creation_time": "2009-10-08T21:29:47Z", "is_private": false, "text": "Take a quick look, that was my mistake.  Those hadn't been moved up to the site\nand I just sent them up now."}, {"count": 9, "tags": [], "text": "I have emailed the backtraces to you, directly.", "attachment_id": null, "bug_id": 47966, "id": 131032, "time": "2009-10-09T09:50:21Z", "creator": "rob@apgood.com", "creation_time": "2009-10-09T09:50:21Z", "is_private": false}, {"count": 10, "tags": [], "creator": "rob@apgood.com", "attachment_id": null, "id": 131037, "creation_time": "2009-10-09T11:46:58Z", "time": "2009-10-09T11:46:58Z", "bug_id": 47966, "text": "Will,\n\nminotaur (your mail server) bounced my mail back to me. how do i get the backtraces to you?\n\ni created a snapshot while httpd.exe was idle, but was servicing the initial virtual host in my list, and another when httpd aborted when i attempted to access www2.carpelaw.com.  hence, the plural of backtrace.", "is_private": false}, {"count": 11, "tags": [], "bug_id": 47966, "attachment_id": null, "is_private": false, "id": 131038, "time": "2009-10-09T11:57:55Z", "creator": "wrowe@apache.org", "creation_time": "2009-10-09T11:57:55Z", "text": "Hi Rob; if you find the thread backtrace with 'FAULT HERE -->' text, or just\nthe particular faulted thread looking at WinDbg, simply paste that part of\nthe backtrace in a comment."}, {"count": 12, "tags": [], "bug_id": 47966, "attachment_id": 24370, "id": 131039, "time": "2009-10-09T12:07:30Z", "creator": "rob@apgood.com", "creation_time": "2009-10-09T12:07:30Z", "is_private": false, "text": "Created attachment 24370\npre-abort backtrace"}, {"count": 13, "tags": [], "creator": "rob@apgood.com", "is_private": false, "id": 131040, "creation_time": "2009-10-09T12:08:38Z", "time": "2009-10-09T12:08:38Z", "bug_id": 47966, "text": "Created attachment 24371\nin abort backtrace", "attachment_id": 24371}, {"count": 14, "tags": [], "bug_id": 47966, "attachment_id": null, "is_private": false, "id": 131041, "time": "2009-10-09T12:09:13Z", "creator": "rob@apgood.com", "creation_time": "2009-10-09T12:09:13Z", "text": "If I would only open my eyes... doh!"}, {"count": 15, "tags": [], "bug_id": 47966, "attachment_id": null, "id": 131125, "time": "2009-10-14T12:23:39Z", "creator": "rob@apgood.com", "creation_time": "2009-10-14T12:23:39Z", "is_private": false, "text": "Will, have you folks been able to determine what is causing my server to fall over?  I couldn't see a \"FAULT HERE -->\" in the backtrace."}, {"count": 16, "tags": [], "text": "Sorry, I had meant \"FAULT ->\"\n\nIn both I see this in DbgBreakPoint - implying either you are interrupting the\nprocess rather than letting it crash (don't invoke DrWtsn32.exe -g for this\nsort of situation, just let httpd crash and look into the resulting crash\ndump.)\n\nThat, or an assert() was triggered, with very little context.  You had unpacked\nthe symbols for the correct rev, such that httpd.pdb sits in the same dir\nalongside httpd.exe?", "attachment_id": null, "bug_id": 47966, "id": 131132, "time": "2009-10-14T20:14:57Z", "creator": "wrowe@apache.org", "creation_time": "2009-10-14T20:14:57Z", "is_private": false}, {"count": 17, "tags": [], "creator": "rob@apgood.com", "attachment_id": null, "id": 131159, "creation_time": "2009-10-15T14:57:38Z", "time": "2009-10-15T14:57:38Z", "bug_id": 47966, "text": "Yes, the pdb files are in the same directory as the exe's.  I ensured that I unpacked the pdb's for the version of apache that I am running (apache_2.2.14-win32-x86-no_ssl-symbols.zip for apache_2.2.14-win32-x86-no_ssl.msi installation).\n\nThe backtrace sequence I followed was:\n1.  Start apache (httpd.exe is running)\n2.  Open task manager and identify the pid for the httpd with lots of threads (67 on my machine)\n3.  Execute my PHP script and wait for httpd to abort attempting to access memory location 0x00000000\n3.  When abort occurs, I leave the error window for the aborting httpd and in a cmd window, I execute the following: drwtsn32 -p <pid#>\n\nThat's the \"in abort backtrace\" I uploaded for you (id=24371).\n\nAnd, I agree, the backtrace doesn't tell us much.  I'm not sure if we would gain much by and interactive dbg, but I can try one if you like.  I have an old version of Visual Studio ('97), but I doubt that it will be able to handle the new MS text.  Can gdb identify the MS tags (I have used gcc for so long, I have no idea how MS constructs their binaries)?", "is_private": false}, {"count": 18, "tags": [], "text": "Will,\nHave you made any progress on diagnosing the reason whey httpd.exe is aborting?\nI am still production bound.\nThanks.", "attachment_id": null, "id": 131266, "creator": "rob@apgood.com", "time": "2009-10-21T10:24:55Z", "bug_id": 47966, "creation_time": "2009-10-21T10:24:55Z", "is_private": false}, {"count": 19, "tags": [], "text": "Apache/2.2.14 (Win32) PHP/5.3.1 RC1 \nmysqlnd 5.0.5-dev - 081106 - $Revision: 286739 $ \n\nPHP 5 manual sez...\n\"mysql_close() closes the non-persistent connection to the MySQL server that's associated with the specified link identifier. If link_identifier  isn't specified, the last opened link is used. \"\n\nNot true in this version.  You MUST supply the link identifier in mysql_close() or httpd.exe falls over trying to read memory located @ 0x00000000.", "is_private": false, "id": 131499, "creator": "rob@apgood.com", "time": "2009-10-29T11:40:46Z", "bug_id": 47966, "creation_time": "2009-10-29T11:40:46Z", "attachment_id": null}, {"count": 20, "tags": [], "creator": "covener@gmail.com", "is_private": false, "text": "laer->invalid -- PHP, not Apache.", "id": 131500, "time": "2009-10-29T11:48:43Z", "bug_id": 47966, "creation_time": "2009-10-29T11:48:43Z", "attachment_id": null}, {"count": 21, "tags": [], "text": "Well, whoever is responsible for php_mysql.dll needs to fix it.\n\n\"Faulting application httpd.exe, version 2.2.14.0, faulting module php_mysql.dll, version 5.3.1.0, fault address 0x00002072\"", "is_private": false, "id": 131502, "creator": "rob@apgood.com", "time": "2009-10-29T12:55:26Z", "bug_id": 47966, "creation_time": "2009-10-29T12:55:26Z", "attachment_id": null}, {"count": 22, "tags": [], "text": "Your PHP mysql extension (php_mysql.dll) which is crashing is not from this projec.\n\nReport the problem to the PHP folks at php.net.", "is_private": false, "bug_id": 47966, "id": 131503, "time": "2009-10-29T12:58:32Z", "creator": "trawick@apache.org", "creation_time": "2009-10-29T12:58:32Z", "attachment_id": null}]