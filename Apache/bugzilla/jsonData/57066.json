[{"attachment_id": 32090, "tags": [], "bug_id": 57066, "text": "Created attachment 32090\nContains four isapi_redirect.log files taken from server\n\nIn trying to use ColdFusion 11 Enterprise in production, we are getting frequent duplicatable errors in IIS that is crashing the HTTP request, and eventually killing the application pool.  It is occurring right at the point of where the site is trying to download MP3 files to a the client.  Here are examples of the error we are getting in the isapi_redirect.log file:\n\n[Tue Oct 07 17:57:04.101 2014] [13096:14996] [error] isapi_write_client::jk_isapi_plugin.c (1406): WriteClient failed with 1229 (0x000004cd)\n\n[Tue Oct 07 18:00:28.277 2014] [13096:3220] [error] isapi_write_client::jk_isapi_plugin.c (1406): WriteClient failed with 995 (0x000003e3)\n\nIt does not happen every time, but it is consistently duplicatable here.  This is a challenge for us because Adobe has deployed a custom version of the Tomcat connector with ColdFusion 11, so it seems upgrading to the native Tomcat connector (e.g. 1.2.40) is not an option.\n\nAttached are a few different versions of isapi_redirect.log files taken with varying levels of log_level info, including one with a \"trace\" setting.  Search for \"WriteClient failed\" in any of them to see the error.  It seems there is likely a buffer overrun or something like that happening, causing the connector to crash.\n\nHere is additional information from the server's event logs (in text and XML):\n\n______________________________________________________________________\nEvent ID: 5011  Source: WAS\n\nA process serving application pool 'RadioSparx' suffered a fatal communication error with the Windows Process Activation Service. The process id was '10480'. The data field contains the error number.\n\n <Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\">\n- <System>\n  <Provider Name=\"Microsoft-Windows-WAS\" Guid=\"{524B5D04-133C-4A62-8362-64E8EDB9CE40}\" EventSourceName=\"WAS\" /> \n  <EventID Qualifiers=\"32768\">5011</EventID> \n  <Version>0</Version> \n  <Level>3</Level> \n  <Task>0</Task> \n  <Opcode>0</Opcode> \n  <Keywords>0x80000000000000</Keywords> \n  <TimeCreated SystemTime=\"2014-10-08T04:16:51.000000000Z\" /> \n  <EventRecordID>1239582</EventRecordID> \n  <Correlation /> \n  <Execution ProcessID=\"0\" ThreadID=\"0\" /> \n  <Channel>System</Channel> \n  <Computer>AXC2.navarr.net</Computer> \n  <Security /> \n  </System>\n- <EventData>\n  <Data Name=\"AppPoolID\">RadioSparx</Data> \n  <Data Name=\"ProcessID\">10480</Data> \n  <Binary>6D000780</Binary> \n  </EventData>\n\n___________________________________________________________________________\n\nEvent ID: 5011  Source: WAS\n\nA process serving application pool 'RadioSparx' suffered a fatal communication error with the Windows Process Activation Service. The process id was '11712'. The data field contains the error number.\n\n<Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\">\n- <System>\n  <Provider Name=\"Microsoft-Windows-WAS\" Guid=\"{524B5D04-133C-4A62-8362-64E8EDB9CE40}\" EventSourceName=\"WAS\" /> \n  <EventID Qualifiers=\"32768\">5011</EventID> \n  <Version>0</Version> \n  <Level>3</Level> \n  <Task>0</Task> \n  <Opcode>0</Opcode> \n  <Keywords>0x80000000000000</Keywords> \n  <TimeCreated SystemTime=\"2014-10-08T04:16:50.000000000Z\" /> \n  <EventRecordID>1239580</EventRecordID> \n  <Correlation /> \n  <Execution ProcessID=\"0\" ThreadID=\"0\" /> \n  <Channel>System</Channel> \n  <Computer>AXC2.navarr.net</Computer> \n  <Security /> \n  </System>\n- <EventData>\n  <Data Name=\"AppPoolID\">RadioSparx</Data> \n  <Data Name=\"ProcessID\">11712</Data> \n  <Binary>6D000780</Binary> \n  </EventData>\n  </Event>\n\n________________________________________________________________________\nIt always looks very similar to the above events.\n\nPlease help....we're stuck with this problem and can't move forward to production.", "count": 0, "id": 178335, "time": "2014-10-08T04:51:25Z", "creator": "lee@audiosparx.com", "creation_time": "2014-10-08T04:51:25Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 57066, "text": "Apologies for the very delayed response to this report.\n\nThe logs confirm that you are using a modified isapi_redirect.dll file. The line numbers are off by over 100 lines from what I'd expect to see for 1.2.37. We have no visibility of the changes. We simply cannot provide support for something we don't have access to.\n\nFor those of you facing similar issues reading this in the archives, I urge to to encourage providers of such modified files to provide patches upstream for consideration.\n\nI've tested IIS7, ISAPI 1.2.42-dev and 9.0.x-dev (both current trunk) with ab on a 10MB file under load and I see no errors.", "count": 1, "id": 193953, "time": "2016-09-23T13:33:33Z", "creator": "markt@apache.org", "creation_time": "2016-09-23T13:33:33Z", "is_private": false}]