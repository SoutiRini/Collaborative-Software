[{"count": 0, "tags": [], "bug_id": 35479, "text": "when i try to use apr_file_t  \n \ncc tell me : dso.c:173: error: invalid application of `sizeof' to incomplete \ntype `/usr/local/apache2/include/apr_file_io.h' \n \ni also do a cscope into the include directory and i can see only the typedef \nbut no implementation \n \ni take a look at the orginal source tgz, and i see that there are arch(netware \netc...) depend. \n \ni think that the default depend is broken", "id": 76637, "time": "2005-06-23T09:34:57Z", "creator": "descript@php.net", "creation_time": "2005-06-23T09:34:57Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "descript@php.net", "text": "Created attachment 15523\nNot good :P", "id": 76639, "time": "2005-06-23T10:27:12Z", "bug_id": 35479, "creation_time": "2005-06-23T10:27:12Z", "is_private": false, "attachment_id": 15523}, {"count": 2, "tags": [], "creator": "descript@php.net", "text": "Comment on attachment 15523\nNot good :P\r\n\n\nth", "id": 76640, "time": "2005-06-23T10:49:54Z", "bug_id": 35479, "creation_time": "2005-06-23T10:49:54Z", "is_private": false, "attachment_id": 15523}, {"count": 3, "tags": [], "bug_id": 35479, "text": "Created attachment 15524\nProposed patch to accept apr_arch.h", "id": 76641, "time": "2005-06-23T11:11:13Z", "creator": "descript@php.net", "creation_time": "2005-06-23T11:11:13Z", "is_private": false, "attachment_id": 15524}, {"count": 4, "tags": [], "bug_id": 35479, "text": "Created attachment 15525\nThe apr_arch.h must be added in srclib/apr/include/", "id": 76642, "time": "2005-06-23T11:12:54Z", "creator": "descript@php.net", "creation_time": "2005-06-23T11:12:54Z", "is_private": false, "attachment_id": 15525}, {"count": 5, "tags": [], "bug_id": 35479, "is_private": false, "text": "Devel may add somethings info the configure to accept these files. \nAnd the arch/ directory may be completely copied into the user include/ \ndirectory. ", "id": 76644, "time": "2005-06-23T12:24:11Z", "creator": "descript@php.net", "creation_time": "2005-06-23T12:24:11Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "jorton@redhat.com", "text": "\"\"\ncc tell me : dso.c:173: error: invalid application of `sizeof' to incomplete \ntype `/usr/local/apache2/include/apr_file_io.h' \n\"\"\n\nthat looks extremely confused.  Can you attach the complete output of the \"make\"\ncommand to this report?  There is probably some other problem you are hitting,\nmaking private headers public is not the solution.", "id": 76645, "time": "2005-06-23T12:30:16Z", "bug_id": 35479, "creation_time": "2005-06-23T12:30:16Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 35479, "is_private": false, "text": "[descript@localhost NLM_apache_mod]$ make \ncc -c dso.c -I/usr/local/apache2/include -Wall \ndso.c:144: warning: initialization from incompatible pointer type \ndso.c:151: warning: initialization from incompatible pointer type \ndso.c:158: warning: initialization from incompatible pointer type \ndso.c: In function `__BSNLM_config_server_create': \ndso.c:188: error: invalid application of `sizeof' to incomplete type \n`/usr/local/apache2/include/apr_file_io.h' \ndso.c:188: error: invalid application of `sizeof' to incomplete type \n`/usr/local/apache2/include/apr_file_io.h' \ndso.c:189: error: invalid application of `sizeof' to incomplete type \n`/usr/local/apache2/include/apr_file_io.h' \ndso.c:189: error: invalid application of `sizeof' to incomplete type \n`/usr/local/apache2/include/apr_file_io.h' \ndso.c:174: warning: unused variable `Ret' \n \nhere the code at 188 / 189 : \nNew->Learn_file = apr_pcalloc(Poll, sizeof(apr_file_t)); \nNew->Log_file = apr_pcalloc(Poll, sizeof(apr_file_t)); \n \nI don't know if my solution is best way to fix this problem.  \nBut my work allow me to compile my program. \n ", "id": 76646, "time": "2005-06-23T12:50:19Z", "creator": "descript@php.net", "creation_time": "2005-06-23T12:50:19Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "descript@php.net", "text": "In fact i just want to handle a file in my config struct. \nI think the problem occur because i compile it not into the apache source tree. \n  ", "count": 8, "id": 76647, "time": "2005-06-23T12:54:58Z", "bug_id": 35479, "creation_time": "2005-06-23T12:54:58Z", "is_private": false}, {"count": 9, "tags": [], "creator": "jorton@redhat.com", "text": "Oh, this is your dso.c not APR's.  You can't do that - apr_file_t is an opaque\nstructure, see doc/incomplete_types.  The only way to create a file object is to\nuse apr_file_open().  Ask on dev@apr.apache.org if you're not sure about how to\nuse the API properly.", "id": 76648, "time": "2005-06-23T13:05:05Z", "bug_id": 35479, "creation_time": "2005-06-23T13:05:05Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 35479, "is_private": false, "id": 76649, "attachment_id": null, "creator": "descript@php.net", "creation_time": "2005-06-23T13:59:26Z", "time": "2005-06-23T13:59:26Z", "text": "i cant use apr_file_open() if apr_file_t is not implemented !\nI must a void that the proper way ?...."}, {"count": 11, "tags": [], "bug_id": 35479, "is_private": false, "text": "I would suggest that you look at some uses of apr file I/O APIs in\nsrclib/apr/test/*.c.", "id": 76650, "time": "2005-06-23T14:11:21Z", "creator": "trawick@apache.org", "creation_time": "2005-06-23T14:11:21Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 35479, "text": "The test/ directory do not help me.   \ntestfile.c is compiled out of apache srcs.    \nMy code is valid and it's work.   \nDevel must have original src to compile a mod with an apr_file_t....   \napr_file_t will not be resolved because the propotype exist but there is no   \nimplementation. And so why you give include/ directory to devel if this same   \ndirectory can't be used in external programming.....   \n   \nThe only solution is to use a void as struct but you'll can't access to the  \ndatastruct.  \nIt's a ergonomics problem. \n \nAnd so i spend my time for nothing i close the bug. ", "id": 76687, "time": "2005-06-24T07:42:34Z", "creator": "descript@php.net", "creation_time": "2005-06-24T07:42:34Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "creator": "descript@php.net", "text": "testfile.c is compiled out of apache srcs.\nINTO :P", "id": 76688, "time": "2005-06-24T08:05:00Z", "bug_id": 35479, "creation_time": "2005-06-24T08:05:00Z", "is_private": false, "attachment_id": null}]