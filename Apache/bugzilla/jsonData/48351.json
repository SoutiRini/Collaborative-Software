[{"id": 132679, "tags": [], "bug_id": 48351, "is_private": false, "count": 0, "text": "If we take this sample:\n\nRedirectMatch permanent ^/foo/?$ http://some.external.site/?var1=val1&var2=val2&var3=val3\n\nand the URL entered is:\n\nhttp://first.site/foo/\n\nthe redirect is to:\n\nhttp://some.external.site/?var1=val1/foo/var2=val2/foo/var3=val3\n\nTherefore, the & has extended to the whole text matched by the \"left\" regex, just like it does with \"classic dialect\" regex engines such as sed and vi.\nThe same behavior has been observed with SetEnvIf and RewrireRule. Probably other modules are affected as well.\n\nThis comes as quite a surprise given that Apache uses PCRE. I'd have expected $& to work, but not a plain ampersand.\n\nThis is true of Apache 2.0.54 and also 2.2.9, installed by default on Centos/RHEL 4.x and 5.x respectively. But this also holds true for the Apache 2.2.x coming with the latest Debian (I don't remember the exact version) and Apache 2.2.14 on Gentoo.\n\nFor coherency, I'd say that $& should replace & for this purpose, to be more inline with perl's regexes. But then it seems that Apache has behaved this way for quite a while (since 2.0.x times at least, I don't know for 1.3) and this change could break some setups...", "time": "2009-12-08T12:08:36Z", "creator": "fgaliegue@gmail.com", "creation_time": "2009-12-08T12:08:36Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 48351, "text": "This is an undocmented special case in ap_pregsub: & is an alias for $0. mod_rewrite doesn't implement the same special behaviour.\n\nI therefore agree that this is surprising and should be dropped. And introducing $& as alias for $0 is a good idea, too, because people may expect that from perl.\nMaking this change in 2.4 should be no problem as long as it is documented somewhere.", "id": 132786, "time": "2009-12-12T12:29:42Z", "creator": "sf@sfritsch.de", "creation_time": "2009-12-12T12:29:42Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 48351, "attachment_id": null, "text": "Removed use of & in r904765", "id": 134037, "time": "2010-01-30T03:21:25Z", "creator": "sf@sfritsch.de", "creation_time": "2010-01-30T03:21:25Z", "is_private": false}, {"id": 154224, "tags": [], "bug_id": 48351, "is_private": false, "count": 3, "text": "fixed in 2.4.1", "time": "2012-02-26T17:01:04Z", "creator": "sf@sfritsch.de", "creation_time": "2012-02-26T17:01:04Z", "attachment_id": null}]