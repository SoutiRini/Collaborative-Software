[{"attachment_id": null, "tags": [], "bug_id": 56336, "is_private": false, "count": 0, "id": 174202, "time": "2014-04-01T19:32:35Z", "creator": "bdevaney@docfinity.com", "creation_time": "2014-04-01T19:32:35Z", "text": "Generated with the NIO2 protocol in the connector.  The same code using tomcat with HTTP/1.1 and AJP/1.3 in the connector worked correctly.  \n\njava.lang.IndexOutOfBoundsException\n\tat java.nio.Buffer.checkBounds(Buffer.java:559)\n\tat java.nio.HeapByteBuffer.put(HeapByteBuffer.java:181)\n\tat org.apache.coyote.ajp.AjpNio2Processor.output(AjpNio2Processor.java:158)\n\tat org.apache.coyote.ajp.AbstractAjpProcessor.writeResponseMessage(AbstractAjpProcessor.java:1658)\n\tat org.apache.coyote.ajp.AbstractAjpProcessor.writeData(AbstractAjpProcessor.java:1577)\n\tat org.apache.coyote.ajp.AbstractAjpProcessor.access$200(AbstractAjpProcessor.java:62)\n\tat org.apache.coyote.ajp.AbstractAjpProcessor$SocketOutputBuffer.doWrite(AbstractAjpProcessor.java:1725)\n\tat org.apache.coyote.Response.doWrite(Response.java:523)\n\tat org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:391)\n\tat org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:344)\n\tat org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:421)\n\tat org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:409)\n\tat org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:97)\n\tat java.io.DataOutputStream.write(DataOutputStream.java:107)\n\tat java.io.FilterOutputStream.write(FilterOutputStream.java:97)"}, {"count": 1, "tags": [], "bug_id": 56336, "attachment_id": null, "id": 174206, "time": "2014-04-01T22:43:05Z", "creator": "remm@apache.org", "creation_time": "2014-04-01T22:43:05Z", "is_private": false, "text": "The AJP connector is really heavy on code reuse, so the NIO2 code that is used here is identical to the NIO1 code (and the shared code looks like it's only working by accident, so I'll try to fix it http://svn.apache.org/r1583814 ).\n\nYou could investigate and debug to see why this exception occurs or test the fix."}, {"count": 2, "tags": [], "bug_id": 56336, "attachment_id": null, "is_private": false, "id": 174247, "time": "2014-04-03T12:37:23Z", "creator": "remm@apache.org", "creation_time": "2014-04-03T12:37:23Z", "text": "No feedback, so assume fixed by r1583814"}]