[{"count": 0, "tags": [], "bug_id": 48464, "attachment_id": 24780, "is_private": false, "id": 133217, "time": "2009-12-30T06:08:15Z", "creator": "lovetide@qq.com", "creation_time": "2009-12-30T06:08:15Z", "text": "Created attachment 24780\nPatches for startup.bat(svn#562770), catelina.bat (svn#885002). Usage screenshot\n\nWhen running muitiple tomcat instances in same windows OS, the title of all tomcat/DOS window are all \"Tomcat\", it's a little hard to distinguish which window is which tomcat. \n\nIf a title can be added, for example: \nbin\\startup.bat -title \"Tomcat Server 1 - XXX\" \nbin\\startup.bat -title \"Tomcat Server 2 - YYY\" \nbin\\startup.bat -title \"Tomcat Server 3 - ZZZ\" \n... \n\nThen I can distinguish these servers from the title of tomcat/DOS window in task bar."}, {"count": 1, "tags": [], "bug_id": 48464, "attachment_id": null, "is_private": false, "id": 133244, "time": "2009-12-31T01:21:51Z", "creator": "markt@apache.org", "creation_time": "2009-12-31T01:21:51Z", "text": "The preferred format for patches is diff -u\n\nThe screen shot is unnecessary and makes the attachment 50 times bigger than it needs to be.\n\nI am -1 for the patch as is since it makes Title a mandatory parameter for catalina.bat. This would be an added nuisance for far more users that it would benefit.\n\nI'd suggest using an environment variable for the title that defaults to Tomcat"}, {"count": 2, "tags": [], "text": "Created attachment 24784\nPatches for startup.bat(svn#562770), catelina.bat(svn#885002)\n\n-t, -title: specify a title\n-tt, -timetitle: specify a title, and append current time to title", "attachment_id": 24784, "bug_id": 48464, "id": 133246, "time": "2009-12-31T04:04:48Z", "creator": "lovetide@qq.com", "creation_time": "2009-12-31T04:04:48Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 48464, "is_private": false, "count": 3, "id": 133247, "time": "2009-12-31T04:17:25Z", "creator": "markt@apache.org", "creation_time": "2009-12-31T04:17:25Z", "text": "Thanks for the updated patch. It is heading in the right direction but maybe I wasn't clean enough in my previous comments.\n\nI do not believe this should be configurable via a command line parameter for startup.bat nor catalina.bat. This should simply be a system property that can be set in setenv.bat if required.\n\nTake a look at catalina.bat and how, for example, how LOGGING_MANAGER is used."}, {"count": 4, "tags": [], "bug_id": 48464, "attachment_id": null, "id": 133248, "time": "2009-12-31T05:23:57Z", "creator": "lovetide@qq.com", "creation_time": "2009-12-31T05:23:57Z", "is_private": false, "text": "(In reply to comment #3)\n> Thanks for the updated patch. It is heading in the right direction but maybe I\n> wasn't clean enough in my previous comments.\n> I do not believe this should be configurable via a command line parameter for\n> startup.bat nor catalina.bat. This should simply be a system property that can\n> be set in setenv.bat if required.\n> Take a look at catalina.bat and how, for example, how LOGGING_MANAGER is used.\n\nHi Mark:\n\nPass title via command line parameter is just a convenient usage.\n\nIf it's not prefered, then only apply the lastest patch for catalina.bat (if it's acceptable) can works as what you mean in comment #1. In the latest patch for catalina.bat, TITLE and STARTUP_TIME environment varaibles are readed and passed to _EXECJAVA.\n\n\n\nBy the way:\nIf %CD% contains \"&\" character, the startup.bat will failed at\ncd %CURRENT_DIR%\n\n%CURRENT_DIR% need to be quoted to avoid this error. \"cd %CURRENT_DIR%\" exists in startup.bat, shutdown.bat, catalina.bat, service.bat, version.bat, should I post a new bug?"}, {"attachment_id": null, "tags": [], "bug_id": 48464, "is_private": false, "count": 5, "id": 133249, "time": "2009-12-31T05:27:50Z", "creator": "markt@apache.org", "creation_time": "2009-12-31T05:27:50Z", "text": "(In reply to comment #4)\n> If it's not prefered, then only apply the lastest patch for catalina.bat (if\n> it's acceptable) can works as what you mean in comment #1. In the latest patch\n> for catalina.bat, TITLE and STARTUP_TIME environment varaibles are readed and\n> passed to _EXECJAVA.\n\nThe new environment variables still need to be documented in the same way as the other environment variables.\n\n> By the way:\n> If %CD% contains \"&\" character, the startup.bat will failed at\n> cd %CURRENT_DIR%\n> \n> %CURRENT_DIR% need to be quoted to avoid this error. \"cd %CURRENT_DIR%\" exists\n> in startup.bat, shutdown.bat, catalina.bat, service.bat, version.bat, should I\n> post a new bug?\n\nYes please."}, {"count": 6, "tags": [], "bug_id": 48464, "attachment_id": 24788, "is_private": false, "id": 133279, "time": "2010-01-02T23:27:06Z", "creator": "lovetide@qq.com", "creation_time": "2010-01-02T23:27:06Z", "text": "Created attachment 24788\nPatch for catalina.bat#885002 (renew#2), document added\n\nPatch updated.\nI documented these environment variables in this patch, hope there's no chinglish in it:\n\nTITLE           (Optional) Specify the title of Tomcat window. The default\n                TITLE is Tomcat if it's not specified.\n                Example (all one line)\n                set TITLE=Tomcat Server 1\n\nTITLE_WITH_TIME (Optional) If set, regardless the value of it, current\n                datetime will be appended to title, so that you can know\n                the startup time of Tomcat from title.\n                Example (all one line)\n                set TITLE_WITH_TIME=whatever non empty value"}, {"count": 7, "tags": [], "text": "Re startup.bat:\n\nPlease note, that since TC 6.0.16/5.5.26 you can create %CATALINA_BASE%/bin/setenv.bat, and place your instance-specific variable assignments there.\n\nAlso you can write your own simple script to process -t and -tt arguments, set the varables, and call startup.bat (or directly \"catalina.bat start\").\n\nBecause the title can be set programmatically in those scripts, I see no point in providing the 'TITLE_WITH_TIME' variable.\n\n\nRe Comment 4:\n> If %CD% contains \"&\" character, the startup.bat will failed at\n> cd %CURRENT_DIR%\n> %CURRENT_DIR% need to be quoted to avoid this error.\n\nFor me it fails a few lines earlier, when executing\nset CURRENT_DIR=%cd%\n\nThe solution is to add quotes to the set command as well:\nset \"CURRENT_DIR=%cd%\"\n\nThe above is on Windows XP.\nI will work on a patch, though will need to wait till the end of the holidays to test on the other Windows versions as well.", "attachment_id": null, "bug_id": 48464, "id": 133281, "time": "2010-01-03T05:03:25Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-01-03T05:03:25Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 48464, "attachment_id": null, "id": 133282, "time": "2010-01-03T06:57:53Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-01-03T06:57:53Z", "is_private": false, "text": "Re Comment 4:\n> If %CD% contains \"&\" character, the startup.bat will failed at\nFixed in trunk (r895191, r895392), proposed for TC 6.0"}, {"count": 9, "tags": [], "text": "Created attachment 24790\nPatch for catalina.bat#895517\n\n(In reply to comment #7)\n> Re startup.bat:\n> Please note, that since TC 6.0.16/5.5.26 you can create\n> %CATALINA_BASE%/bin/setenv.bat, and place your instance-specific variable\n> assignments there.\n> Also you can write your own simple script to process -t and -tt arguments, set\n> the varables, and call startup.bat (or directly \"catalina.bat start\").\n> Because the title can be set programmatically in those scripts, I see no point\n> in providing the 'TITLE_WITH_TIME' variable.\n\nOk, I'll write my own batch script to process command line arguments.\nAnd 'TITLE_WITH_TIME' is removed. This patch seems tidy now. :)\n\nFor one installation one instance situation, tomcat users can specify TITLE in %CATALINA_BASE%/bin/setenv.bat.\n\nFor running multiple instances from one tomcat installation situation, tomcat users need to write their own script to have different TITLEs. for example:\n\nstart_clustered_servers.cmd\n-----------------\n@echo off\nset CATALINA_HOME=apache-tomcat-6.0.22\n\nset CATALINA_BASE=server1_1\nset TITLE=Tomcat.Cluster#1.Server#1 [%DATE% %TIME%]\ncall \"%CATALINA_HOME%\\bin\\startup.bat\"\n\nset CATALINA_BASE=server1_2\nset TITLE=Tomcat.Cluster#1.Server#2 [%DATE% %TIME%]\ncall \"%CATALINA_HOME%\\bin\\startup.bat\"\n\nset CATALINA_BASE=server2_1\nset TITLE=Tomcat.Cluster#2.Server#1 [%DATE% %TIME%]\ncall \"%CATALINA_HOME%\\bin\\startup.bat\"\n\nREM ...\n-----------------\n\n> Re Comment 4:\n> > If %CD% contains \"&\" character, the startup.bat will failed at\n> > cd %CURRENT_DIR%\n> > %CURRENT_DIR% need to be quoted to avoid this error.\n> For me it fails a few lines earlier, when executing\n> set CURRENT_DIR=%cd%\n\nMy mistake, The failed line is \"set CURRENT_DIR=%cd%\".\n\n> The solution is to add quotes to the set command as well:\n> set \"CURRENT_DIR=%cd%\"\n> The above is on Windows XP.\n> I will work on a patch, though will need to wait till the end of the holidays\n> to test on the other Windows versions as well.\n\nThat's GREAT !!!\nWhen I try to resolve this problem, I only know the usage of place double quote around %CD% --> \"%CD\", I do not know the quote can include the variable name \u2299_\u2299, so I encounted another problem when referencing CURRENT_DIR/CATALINA_HOME/... with another double quotes around (\"%CURRENT_DIR%\" --> \"\"C:\\Tomcat Cluster & LoadBalance Test\"\").", "is_private": false, "id": 133288, "creator": "lovetide@qq.com", "time": "2010-01-03T19:00:10Z", "bug_id": 48464, "creation_time": "2010-01-03T19:00:10Z", "attachment_id": 24790}, {"count": 10, "tags": [], "text": "Patch looks good to me. I have applied it to trunk and proposed it for 6.0.x.\n\nI have credited the patch to \"LiuYan\". If this is wrong, let me know the correct name to use and I'll make the necessary changes.", "is_private": false, "id": 133295, "creator": "markt@apache.org", "time": "2010-01-04T03:33:43Z", "bug_id": 48464, "creation_time": "2010-01-04T03:33:43Z", "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 48464, "attachment_id": null, "id": 133568, "time": "2010-01-13T02:43:42Z", "creator": "markt@apache.org", "creation_time": "2010-01-13T02:43:42Z", "is_private": false, "text": "The patch has been applied to 6.0.x and will be included in 6.0.23 onwards."}]