[{"count": 0, "tags": [], "creator": "sergey.vladimirov@tomtom.com", "attachment_id": null, "id": 127749, "time": "2009-06-09T00:52:57Z", "bug_id": 47333, "creation_time": "2009-06-09T00:52:57Z", "is_private": false, "text": "I have the following configuration for protecting directory with LDAP (see below).\nSo basically we want valid users both from subtrees of OU1 and OU2 to be able to download our files. But only accounts belonging to OU1 are able to do it. Accounts belonging to OU2 will get access denied page. If we switch the order of \"Directory\" directives it will work for OU2, but not for OU1.\n\n<Directory \"/srv/www/htdocs/some_system/\">\n  Options Indexes FollowSymLinks\n  AllowOverride None\n  order allow,deny\n  allow from all\n\n  AuthName \"SOME SYSTEM\"\n  \n  AuthType Basic\n  AuthLDAPUrl \"ldap://servername:389/OU=OU1,DC=intra,DC=local?sAMAccountName?sub?(objectClass=*)\"\n  AuthLDAPBindDN \"CN=authuser1,OU=Other Accounts,OU=OU1,DC=intra,DC=local\"\n  AuthLDAPBindPassword \"password\"\n  AuthzLDAPAuthoritative off\n  Require valid-user\n\n</Directory>\n\n\n<Directory \"/srv/www/htdocs/some_system/\">\n  Options Indexes FollowSymLinks\n  AllowOverride None\n  order allow,deny\n  allow from all\n\n  AuthName \"SOME SYSTEM\"\n\n  AuthType Basic\n  AuthLDAPUrl \"ldap://servername:389/OU=OU2,DC=intra,DC=local?sAMAccountName?sub?(objectClass=*)\"\n  AuthLDAPBindDN \"CN=authuser1,OU=Other Accounts,OU=OU1,DC=intra,DC=local\"\n  AuthLDAPBindPassword \"password\"\n  AuthzLDAPAuthoritative off\n  Require valid-user\n\n</Directory>\n\n\n\nOn the other side we want the same scheme to work for cgi-bin and all scripts in it (see below). And this time it works for both OU1 and OU2. \nSo why we have such a difference for executing scripts and just downloading files?\n\n<Directory \"/srv/www/cgi-bin/some_system/\">\n  Options Indexes FollowSymLinks\n  AllowOverride None\n  order allow,deny\n  allow from all\n\n  AuthName \"SOME SYSTEM\"\n  \n  AuthType Basic\n  AuthLDAPUrl \"ldap://servername:389/OU=OU1,DC=intra,DC=local?sAMAccountName?sub?(objectClass=*)\"\n  AuthLDAPBindDN \"CN=authuser1,OU=Other Accounts,OU=OU1,DC=intra,DC=local\"\n  AuthLDAPBindPassword \"password\"\n  AuthzLDAPAuthoritative off\n  Require valid-user\n\n</Directory>\n\n\n<Directory \"/srv/www/cgi-bin/some_system/\">\n  Options Indexes FollowSymLinks\n  AllowOverride None\n  order allow,deny\n  allow from all\n\n  AuthName \"SOME SYSTEM\"\n\n  AuthType Basic\n  AuthLDAPUrl \"ldap://servername:389/OU=OU2,DC=intra,DC=local?sAMAccountName?sub?(objectClass=*)\"\n  AuthLDAPBindDN \"CN=authuser1,OU=Other Accounts,OU=OU1,DC=intra,DC=local\"\n  AuthLDAPBindPassword \"password\"\n  AuthzLDAPAuthoritative off\n  Require valid-user\n\n</Directory>"}, {"count": 1, "tags": [], "text": "Just in case you doubt all permissions on files are correct: I found a workaround for this problem and used AuthnProviderAlias to create two aliases which I would then use inside each Directory. And that way it works, but we need to load additional module for that: mod_authn_alias", "is_private": false, "bug_id": 47333, "id": 127750, "time": "2009-06-09T00:56:06Z", "creator": "sergey.vladimirov@tomtom.com", "creation_time": "2009-06-09T00:56:06Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "is_private": false, "id": 127755, "time": "2009-06-09T05:33:57Z", "bug_id": 47333, "creation_time": "2009-06-09T05:33:57Z", "text": "Bugzilla is not a support forum, please take this to e.g. the users list:\n\nhttp://httpd.apache.org/userslist.html"}]