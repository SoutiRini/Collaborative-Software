[{"count": 0, "tags": [], "bug_id": 56724, "attachment_id": null, "id": 176400, "time": "2014-07-15T12:29:23Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-07-15T12:29:23Z", "is_private": false, "text": "To address the issue that has been raised several times on the mailing lists, e.g.\n\nhttp://tomcat.markmail.org/thread/xooxcq56ehki63dh\n\"ContainerBackgroundProcessor and compounding OOMEs\"\n\nhttp://tomcat.markmail.org/thread/f6b6vicg7kusckra\n\"Background thread died; no errors in log; invoking backgroundProcess via JMX has no effect\"\n\nI think it is OK to start a new background thread after some delay. If the start succeeds, it will be a new thread with its own (clean) stack.\n\nIt may help for StackOverflowError.\nIt might partially help with OutOfMemoryError thread death if nothing else is available, but a better strategy for an admin to handle an OutOfMemoryError is to start JVM with -XX:OnOutOfMemoryError flag with a script that shuts down (and restarts) Tomcat."}, {"count": 1, "text": "Created attachment 31813\n2014-07-15_tc8_56724_v1.patch\n\nFirst version of a patch implementing this feature.\nThe patch is for current trunk (at 1610400).", "bug_id": 56724, "is_private": false, "id": 176401, "time": "2014-07-15T12:33:24Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-07-15T12:33:24Z", "tags": [], "attachment_id": 31813}, {"count": 2, "tags": [], "bug_id": 56724, "attachment_id": null, "text": "-1 to adding this feature.\n\nIf there is a case where an exception triggers the stopping if this thread when it is safe for the thread to be restarted then the fix is to ensure that the thread is not stopped in the first place.", "id": 176407, "time": "2014-07-15T16:48:43Z", "creator": "markt@apache.org", "creation_time": "2014-07-15T16:48:43Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 56724, "attachment_id": 31827, "id": 176479, "time": "2014-07-17T22:55:24Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-07-17T22:55:24Z", "is_private": false, "text": "Created attachment 31827\n2014-07-18_tc8_56724_v2.patch\n\nSecond version.\nIt just adds logging and sets \"thread = null;\" to allow restarting the thread."}, {"count": 4, "attachment_id": null, "bug_id": 56724, "text": "Tested patch v2. The message looks good.\n\nCommitted in trunk and tc7.0.x. It will be in 8.0.11 and 7.0.55.\n( r1611506 r1611509 )", "id": 176480, "time": "2014-07-17T23:15:17Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-07-17T23:15:17Z", "tags": [], "is_private": false}]