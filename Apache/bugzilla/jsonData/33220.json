[{"count": 0, "tags": [], "bug_id": 33220, "attachment_id": null, "text": "When making RPM's with the Ant task, the 'rpm' or 'rpmbuild' executables that get called by the rpm \ntask can fail (because of errors in the spec file, for example), exit with a non-zero return code, and not \nbreak the build.  This is because the return code from the rpm executable isn't examined by the task.\n\nI tested this with Ant 1.6.1 and 1.62 on debian linux, as well as ant 1.6.1 on Solaris 8 (with rpm \ninstalled locally).\n\nI will attempt to post a patch.", "id": 70029, "time": "2005-01-24T16:25:58Z", "creator": "julian.simpson@thoughtworks.com", "creation_time": "2005-01-24T16:25:58Z", "is_private": false}, {"count": 1, "attachment_id": 14088, "creator": "julian.simpson@thoughtworks.com", "is_private": false, "id": 70055, "time": "2005-01-25T08:04:53Z", "bug_id": 33220, "creation_time": "2005-01-25T08:04:53Z", "tags": [], "text": "Created attachment 14088\nProposed patch to close this bug - examines exit code and throws buildException when neccessary.\n\nI tested this under debian testing with a build of Ant from yesterday.\t When\nrpmbuild doesn't exit cleanly, the build fails.  When rpmbuild does exit\ncleanly, the build succeeds."}, {"count": 2, "tags": [], "bug_id": 33220, "attachment_id": 14150, "text": "Created attachment 14150\nproposed patch -  context diff\n\nsorry, forgot to do context diff - here it is.", "id": 70303, "time": "2005-02-01T15:41:14Z", "creator": "julian.simpson@thoughtworks.com", "creation_time": "2005-02-01T15:41:14Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "stevel@apache.org", "is_private": false, "id": 70637, "time": "2005-02-08T20:06:23Z", "bug_id": 33220, "creation_time": "2005-02-08T20:06:23Z", "tags": [], "text": "Fixed in CVS. Please test. Better yet. please can you give us a unit test?"}, {"count": 4, "tags": [], "creator": "julian.simpson@thoughtworks.com", "text": "Created attachment 14273\nUnit Test for bug fix.\n\nThis is the unit test for the bug.  I had to change the code under test\nslightly so I could return the correct value without actually trying to execute\nsomething.  That would have slowed the test down. I extracted a private method\nout of the big \"execute\" method in Rpm.java and overrode that.\tA context diff\nfor Rpm.java follows this attachment.", "id": 70906, "time": "2005-02-13T21:50:28Z", "bug_id": 33220, "creation_time": "2005-02-13T21:50:28Z", "is_private": false, "attachment_id": 14273}, {"count": 5, "attachment_id": 14274, "creator": "julian.simpson@thoughtworks.com", "is_private": false, "id": 70907, "time": "2005-02-13T21:51:57Z", "bug_id": 33220, "creation_time": "2005-02-13T21:51:57Z", "tags": [], "text": "Created attachment 14274\nContext Diff patch for Rpm.java\n\nThis is a non-functional change to the class - I just pulled some of the\nexecute method into a private method so as to make the code more testable."}, {"count": 6, "tags": [], "text": "(In reply to comment #3)\n> Fixed in CVS. Please test. Better yet. please can you give us a unit test?\n\nThanks.  Unit test supplied as requested.\nJ.", "is_private": false, "id": 70910, "creator": "julian.simpson@thoughtworks.com", "time": "2005-02-13T22:55:34Z", "bug_id": 33220, "creation_time": "2005-02-13T22:55:34Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "bodewig@apache.org", "text": "I've committed a modified version of the test, thanks.\n\nModified since we've now added a failonerror attribute to <rpm> (with default false\nfor backwards compatibility) and I've used the test as a basis to check both\nstates of this attribute.\n", "id": 50655, "time": "2005-03-21T14:51:25Z", "bug_id": 33220, "creation_time": "2005-03-21T14:51:25Z", "is_private": false, "attachment_id": null}]