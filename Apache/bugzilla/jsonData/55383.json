[{"count": 0, "tags": [], "text": "Hi,\n\nI think there is room for improvements in markup and style of Tomcat's HTML pages (e.g. to meet current HTML5 [1] standards and not using obsolete features) in Tomcat 8.\nThe ROOT index.jsp has alredy greatly been improved by pidster.\n\nThere are some other occurences of HTML in Tomcat's source that I think can be improved:\n\u2022 Tomcat's error pages\n\u2022 Examples webapp\n\u2022 Probably also the Tomcat website (http://tomcat.apache.org/)\n\n\nSome things that I think of being improvable are:\n\n1) Use always \"Full Standards Mode\" instead of \"Quirks Mode\" or \"Almost Standards Mode\", as the Quirks mode is kind of a relict that browsers implement to be able to display Websites that were written for IE <= 5, which had serious layout errors. However, current Websites should always use Standards Mode as described in the HTML5 spec [1].\n  This means that for HTML documents (\"text/html\"), always use the recommended doctype <!DOCTYPE html>. For XHTML documents (\"application/xhtml+xml\"), a doctype is not needed (as there is only Full Standards Mode), but should be used if making polyglot documents [2].\n  Note: Placing a DOCTYPE after a HTML comment (like it is done at pidster's proposal here: http://people.apache.org/~pidster/tomcat/site/) will force IE 9 and older to use Quirks Mode; however, IE 10 and newer will use Full Standards Mode in such case. This can be tested by using IE's F12 developer tools.\n\n2) Don't use obsolete HTML elements or attributes, like the ones which are replaced by CSS as they were purely used for styling and not markup (e.g. \"bgcolor\" or \"align\" attributes, <font> element etc.)\n\n3) A <table> element should only be used for showing real tables, not for layouting purposes [3], like currently done at the Tomcat Website.\n\n4) Use new HTML5 elements for structuring HTML content, like <nav> (marking a navigation section), <header>, <footer>; <time datetime=\"...\"> for marking a date with a machine-readable format and so on.\n  HTML5 also allows to declare microdata in HTML markup using some new attributes like \"itemscope\", \"itemtype\" etc [9]. E.g. one can use microdata format provided by http://schema.org/ which should be recognized by Search Engines like Google, Bing, Yahoo and Yandex (but I don't know if this will be useful to the Tomcat website).\n  However, if we still want to support IE versions older than IE9, then care must be taken when using new HTML elements, because IE <= 8 have a special parsing method of unknown elements compared to IE9 and other browsers. E.g., if you have \n  <myElement class=\"myHeader\">Hi!</myElement>\n  then the DOM in IE 9/10/11 and other browsers like Firefox represents exactly that piece of HTML, so if they don't know what a <myElement> element is, they will still use the CSS defined for class \"myHeader\" to format it. However in IE 8 and older, the DOM will look like \n  <myElement></myElement>Hi!</myElement><//myElement>\n  (this is not valid HTML, but the DOM actually has a element with the name \"myElement\" and one with the name \"/myElement\"), so it will not make use of the CSS defined for that element.  \n  \n5) Maybe also historical practices like putting CSS or Javascript into comments (\"<style type=...><!-- .myClass {...} --></style>\") can be abandoned, as that was only required for very old browsers that did not know <style> or <script> elements, to prevent the content of such elements from appearing in a document as text. However, I cannot think of a still supported browser that would not recognize such elements.\n  Note: For XHTML, this approach is actually wrong, because a XML parser will treat a comment inside of a style element like a comment, which means that the browser only sees a empty style element. There are ways to make things work if the document should be both a HTML and a XHTML document [4], but I don't think it makes sense (see 7) ).\n\n6) Encodings can be set on HTML pages using <meta charset=\"UTF-8\">, alternatively to <meta http-equiv=\"Content-Type\" value=\"text/html; encoding=\"UTF-8\">. I think the shorter form makes more sense because the Content-Type can only be set externally (by a Header or using a file extension) before a browser begins with parsing the document. It seems that even IE7 supports the short variant.\n  Notice that this is for HTML only; for XHTML, the encoding can specified in the XML header declaration (<?xml version=\"1.0\" encoding=\"UTF-8\"?>).\n  Note: For the sake of polyglot documents (see 7) ), it is allowed that a XHTML document also includes a <meta charset=\"UTF-8\" /> - but \"UTF-8\" is the only permitted value in this case [8]. Then, also a XML declaration may not be used as it is forbidden in HTML - this means a XML parser will determine the encoding from BOM bytes, if present - if not, UTF-8 will be used [7].\n  Note: Even if the encoding is already set by a Content-Type header, I think it is a good practice to also include the encoding declaration in the document itself (of course, matching the one set in the Content-Type header).\n\n7) Some HTML pages contain elements in a XHTML-compatible syntax, e.g. self-closing elements like \"<br />\", whereas others contain \"<br>\". Actually, when using \"<br />\" in a document that is sent using \"text/html\" (or a \".html\" file extension), this was wrong syntax according to previous HTML specifications, as only \"<br>\" syntax was allowed (even if a DOCTYPE states \"XHTML 1.0\", the browser actually uses a HTML parser instead of a XML parser when the page is sent with \"text/html\" instead of \"application/xhtml+xml\"). However, the new HTML5 specification allows this syntax (<br />) in HTML documents.\n  However, when a document is intended to be a polyglot document (i.e. a document that is compatible with both HTML and XML parsing modes), then there are a lot of other concerns that one needs to take care of, e.g. not to use entity references like \"&nbsp;\" as XML parsers are not guaranteed to process a external DTD (which would declare such entities), and also the HTML5 spec does not define any such DTD [5]. Furthermore, always write <input type=\"checkbox\" checked=\"checked\" itemscope=\"itemscope\" /> instead of <input type=checkbox checked itemscope> and so on.\n  However, I think it is easier to write documents that are either HTML only, or XHTML (XML) only. IE 9 is the first IE that supports XHTML, so I think, currently, a XHTML-only document is not an option here (whereas I do XHTML-only documents for my own websites, as I use a XML tool to generate the output and I don't care about IE <= 8). In this case, I think it is easier to use HTML-only syntax instead of creating a polyglot document.\n  Actually, for a person that writes HTML by hand, I think it is easier to write HTML-only syntax; whereas for documents generated programatically by an XML writer, the XHTML-only syntax would fit better.\n  \n\nPlease add, if I forgot something.\n\n\nNow, if one is going to improve the markup of a document, I think it is a good idea to also improve the design/layout.\n\nWhen I have time (and if you agree) I can start working on the things mentioned above, unless it is already done by another person ;-)\n\nI see in the archives that Pidster already proposed a new layout for the Tomcat website [6] (which was the same layout as the ROOT index.jsp), which has not been accepted yet. I don't have another proposal for a new design of the Tomcat website atm, but I think the HTML markup can be improved (the points mentioned above) and the style can be tweaked a bit so that the site doesn't look dated.\n\nWhat do you think?\n\n\n[1] http://www.w3.org/TR/html5/\n[2] http://wiki.whatwg.org/wiki/HTML_vs._XHTML\n[3] http://www.w3.org/TR/html5/tabular-data.html#the-table-element\n[4] http://hixie.ch/advocacy/xhtml\n[5] http://www.w3.org/TR/html5/the-xhtml-syntax.html#writing-xhtml-documents\n[6] http://markmail.org/message/og235cbvrdluiejg\n[7] http://www.w3.org/TR/xml/#sec-guessing\n[8] http://www.w3.org/TR/html5/document-metadata.html#attr-meta-charset\n[9] http://en.wikipedia.org/wiki/Microdata_%28HTML%29", "is_private": false, "id": 169274, "creator": "kpreisser@apache.org", "time": "2013-08-07T20:54:30Z", "bug_id": 55383, "creation_time": "2013-08-07T20:54:30Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 55383, "text": "*** Bug 16579 has been marked as a duplicate of this bug. ***", "id": 169280, "time": "2013-08-07T21:21:52Z", "creator": "markt@apache.org", "creation_time": "2013-08-07T21:21:52Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "An overhaul of the docs and site is long overdue as you can tell from the age of the duplicate.\n\nPlease, go ahead. If you attach proposed patches, I'm happy to review and apply them as I am sure other committers will be as well.\n\nOne piece of advice I would give is to make small, incremental changes rather than a \"big-bang\" approach. It is hard to provide guidance to what the 'right' size is but the committers will let you know if you are wide of the mark.\n\nAs you go, please keep in mind the concerns raised in bug 16579.\n\nOne comment on the new default homepage, it is (in my view) too cluttered. It is a million miles better than what we had before but I think there is still scope for improvement.", "id": 169281, "time": "2013-08-07T21:25:38Z", "bug_id": 55383, "creation_time": "2013-08-07T21:25:38Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 55383, "attachment_id": null, "id": 169338, "time": "2013-08-10T14:42:06Z", "creator": "kpreisser@apache.org", "creation_time": "2013-08-10T14:42:06Z", "is_private": false, "text": "Hi Mark,\n(In reply to Mark Thomas from comment #2)\n> An overhaul of the docs and site is long overdue as you can tell from the\n> age of the duplicate.\n> \n> Please, go ahead. If you attach proposed patches, I'm happy to review and\n> apply them as I am sure other committers will be as well.\n> \n> One piece of advice I would give is to make small, incremental changes\n> rather than a \"big-bang\" approach. It is hard to provide guidance to what\n> the 'right' size is but the committers will let you know if you are wide of\n> the mark.\n> \n> As you go, please keep in mind the concerns raised in bug 16579.\n> \n> One comment on the new default homepage, it is (in my view) too cluttered.\n> It is a million miles better than what we had before but I think there is\n> still scope for improvement.\n\nOk, thank you.\n\nAfter reviewing bug 16579, I would like to add to my previous point 3) reg. <table>:\n\nYou can create a table-like layout purely with CSS (that is, using tags like <div> in markup and then use style \"display: table;\", \"display: table-row\" etc).\n\nThis has the advantages over using <table> that\n- the HTML markup doesn't misuse a <table> for layout, which means a user-agent like a Search Engine can correctly regognize the structure of the document, and\n- the CSS \"table\" will not exceed the given width if it has elements that are wider (e.g. a <pre> with long lines of unwrappable text) than the \"table\" (this should consider the concerns in bug 16579).\n\n\nThere are some other things that came to my attention while I was browsing through Tomcat's doc:\n\n1) Sometimes there is following markup in HTML (a <ul> in a <p> tag): \n<p>\n  Text...\n  <ul>...</ul>\n  More Text...\n</p>\n\nFor example, r1511000 intruduced such a structure.\n\nNote that this is invalid HTML, as a <p> element cannot have nested <ul> and <ol> elements. A HTML parser therefore closes the <p> element as soon as it sees a <ul>, and therefore the following </p> is incorrect (I think this has been mentioned already by Konstantin Kolinko).\nIn XHTML, it is possible to have a DOM like <p><ul>...</ul></p>, but it is still not valid XHTML.\n\nThe currect markup in this case would be:\n<p>Test...</p>\n<ul>...</ul>\n<p>More Text...</p>\n\nPlease see the HTML5 spec [1] reg. \"The p element\" for more info at this issue.\n\n\n2) The Tomcat Docs use the Comments system (https://comments.apache.org/) by appeding a JavaScript that will place a comments section there (e.g. at the bottom at http://tomcat.apache.org/tomcat-8.0-doc/index.html). \n\n  Note that while the script seems to be intended to be usable in XHTML as it contains a CDATA-declaration in the <script> tag, it actually isn't, as it uses document.write().\n\n  The use of \"document.write()\" in JavaScript is strongly discouraged and actually does not work in XHTML, because it can affect the HTML parser state while the parser is running [2] which is not possible with XML.\n\nOne can use DOM methods like document.createElement(...) to insert elements when the DOM is ready, in preference to document.write().\n\n\nThat said, I think I can post an idea of a improved markup and tweaked style for the Tomcat Website and Docs shortly.\n\n\n[1] http://www.w3.org/TR/html51/grouping-content.html#the-p-element\n[2] http://www.w3.org/TR/html51/dom.html#document.write%28%29"}, {"count": 4, "attachment_id": 30719, "bug_id": 55383, "text": "Created attachment 30719\nExample for new markup and style\n\nI attached an example HTML page with an idea of new HTML markup and tweaked style, that could be used as template for Tomcat Documentation and Tomcat Website.\n\nThe layout is very similar to the current one (navigation at left-hand-side), but it should refresh the look so the site doesn't look dated.\n\nThere is still room for a completely new layout in the future (like the proposal from pid), but I do not yet have an idea of how a new layout might look like (I'm more a programmer than designer), and my favor was to improve the HTML markup while kepping a similar layout.\n\nThe page is HTML but is also viewable as XHTML. It is best viewed at IE10+, Firefox, Chrome etc. (note that Chrome seems to behave differently than IE10 and Firefox with the font line height).\nI'm developing mostly on Windows so I used a Windows font (Lucida Sans Unicode) as primary font for the site.\n\nNote that older browsers like IE 9 do not show the layout correctly, but information is still viewable (if people need to view the site with old IE at  corporate PCs for example).\n\nFor the code box, overflow:auto is used, so in the XML example with the long unwrappable line, browsers should display a scrollbar below the box (but I needed to use markup like <div class=\"codeBox><pre><span>...</span></pre></div>\" for the style).\n\n\nWhat do you think?", "id": 169339, "time": "2013-08-10T16:04:30Z", "creator": "kpreisser@apache.org", "creation_time": "2013-08-10T16:04:30Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 55383, "attachment_id": 30735, "id": 169482, "time": "2013-08-15T23:06:51Z", "creator": "kpreisser@apache.org", "creation_time": "2013-08-15T23:06:51Z", "is_private": false, "text": "Created attachment 30735\nDraft for improved HTML markup of Tomcat Docs\n\nHi,\n\nas I did not receive negative comments, I tried to apply the new markup and style to the Tomcat Docs XSLT. :-)\n\nAttached is a patch that uses improved HTML markup and a new CSS stylesheet.\n\nNote that I did not work with XSL Transformation before, so I might have done strange things in the XSLT file - I would be glad if some XSLT expert could check that. ;-)\n\n\nWhile working in the XSLT file, I found some points on which I'm not clear (maybe someone can comment on these):\n\n1) The xsl:stylesheet element specifies version=\"1.0\"; however, I found that there's already version 3.0 of the XSLT spec [1] (a working draft), so I modified the version attribute to \"3.0\". Is this OK?\n\n\n2) Some issues regarding HTML output:\n\n  a) HTML5 specifies for the HTML syntax a recommended doctype of\n       <!DOCTYPE html>\n\n     For HTML generators that cannot output such a short doctype, it provides a Doctype Legacy String [2] as follows:\n       <!DOCTYPE html SYSTEM \"about:legacy-compat\">\n\n     However, using the \"doctype-system\" attribute on the \"xsl:output\" element, I seem only be able to produce the longer (legacy-compat) doctype, but not the short one.\n\n  In XHTML however, a doctype is not needed as there is no quirks mode.\n\n\n  b) It seems that when using method=\"html\", the generated .html files always contain the following meta element:\n       <META http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n\n     so I couldn't use the shorter form:\n       <meta charset=\"UTF-8\">\n\n  c) It seems that the library that produces the HTML output does not have a current view of the HTML5 void elements (such as <br>, <img> etc). For example, if I specify <wbr /> in the XSLT, then the generated HTML output will be <wbr></wbr>, although it should be only <wbr>, since this is a void element (specifying html-version=\"5.0\" on the xsl:output element did not change that).\n\n     Note that for XHTML, the XSLT could simply generate <wbr /> for void elements, as well as <div /> for empty non-void elements, as the browser would use a XML parser. This would avoid the need for the XSLT processor to know which elements are void elements.\n\n\n  I think it could be worth looking at switching to XHTML sometime. However, in this case IE users would have to use at least IE 9, as that is the first IE to support XHTML.\n\n\n\nWith the modified XSLT, the Doc index.html now validates when using the W3X Non-DTD based validator at http://validator.w3.org/nu/ as opposed to the previous markup which raised about 63 errors and 10 warnings.\n\n\nWhat do you think about it?\n\n\n[1] http://www.w3.org/TR/xslt-30/\n[2] http://www.w3.org/TR/html51/syntax.html#the-doctype"}, {"count": 6, "tags": [], "text": "Created attachment 30739\nUpdated patch for improving HTML markup & style in Tomcat docs\n\nI updated the patch with minor improvements (e.g. replace tabs with spaces, added AL2 to the new CSS file, further improvements of XSLT contents).\n\nI also changed the JavaScript for the Comments section to annotate XSLT-generated strings to the <script> element using the new HTML5 data-* attributes [1] instead of inserting text directly in JavaScript string literals, as that would cause problems if the string data contains special characters.\n\nFurthermore, I added the Tomcat image as normal <img> with a link, instead of using it as background-image.\n\nNote that I had to create a new .png image from tomcat.svg as the previous image was .gif and therefore did not contain alpha transparency.\nThe patch doesn't contain the image \"tomcat-new.png\" as it is binary data - is it possible to include such files in a SVN patch?\n\n\n(In reply to Konstantin Prei\u00dfer from comment #5)\n> 2) Some issues regarding HTML output:\n> \n>   a) HTML5 specifies for the HTML syntax a recommended doctype of\n>        <!DOCTYPE html>\n> \n>      For HTML generators that cannot output such a short doctype, it\n> provides a Doctype Legacy String [2] as follows:\n>        <!DOCTYPE html SYSTEM \"about:legacy-compat\">\n> \n>      However, using the \"doctype-system\" attribute on the \"xsl:output\"\n> element, I seem only be able to produce the longer (legacy-compat) doctype,\n> but not the short one.\n\nThe XSLT and XQuery Serialization 3.0 spec says at point 7.4.6 [2]:\n\n> If the value of the requested HTML version is 5.0, the doctype-public and doctype-system serialization parameters are both absent, the first element node child of the document node that is to be serialized is to be serialized as an HTML element, the local part of the QName of which is equal to the string HTML, without regard to case, and any text node that precedes that element node in document contain only whitespace characters, then the HTML output method MUST output a document type declaration, with no public or system identifier.\n\n\nThat should account for the new HTML5 doctype. However, it seems that the XSLT serialization library used when building Tomcat with Ant does not yet implement this, as it doesn't output a Doctype when setting html-version=\"5.0\".\n\n\n>   c) It seems that the library that produces the HTML output does not have a\n> current view of the HTML5 void elements (such as <br>, <img> etc). For\n> example, if I specify <wbr /> in the XSLT, then the generated HTML output\n> will be <wbr></wbr>, although it should be only <wbr>, since this is a void\n> element (specifying html-version=\"5.0\" on the xsl:output element did not\n> change that).\n\nAt point 7.1 of the spec [3], it says:\n\n> For HTML5, the void elements are area, base, br, col, command, embed, hr, img, input, keygen, link, meta, param, source, track and wbr.\n\nSo just like the above point, the XSLT serializer probably doesn't yet implement this.\n\n\n(In reply to Konstantin Prei\u00dfer from comment #3)\n> This has the advantages over using <table> that\n> - the CSS \"table\" will not exceed the given width if it has elements that\n> are wider (e.g. a <pre> with long lines of unwrappable text) than the\n> \"table\" (this should consider the concerns in bug 16579).\n\nTo correct me: A table will not exceed the given width when using \"table-layout: fixed\" style. This is also true for <table> elements.\n\n\n[1] http://www.w3.org/TR/html51/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes\n[2] http://www.w3.org/TR/xslt-xquery-serialization-30/#HTML_DOCTYPE\n[3] http://www.w3.org/TR/xslt-xquery-serialization-30/#HTML_MARKUP", "is_private": false, "id": 169541, "creator": "kpreisser@apache.org", "time": "2013-08-18T01:15:13Z", "bug_id": 55383, "creation_time": "2013-08-18T01:15:13Z", "attachment_id": 30739}, {"count": 7, "tags": [], "bug_id": 55383, "attachment_id": 30740, "id": 169542, "time": "2013-08-18T01:16:45Z", "creator": "kpreisser@apache.org", "creation_time": "2013-08-18T01:16:45Z", "is_private": false, "text": "Created attachment 30740\nNew Tomcat image to be placed in \"trunk/webapps/docs/images/\" folder"}, {"count": 8, "tags": [], "creator": "kpreisser@apache.org", "is_private": false, "text": "Created attachment 30741\nUpdated patch for improving HTML markup & style in Tomcat docs\n\nSorry - the previous patch contained the wrong CSS file.", "id": 169543, "time": "2013-08-18T01:41:33Z", "bug_id": 55383, "creation_time": "2013-08-18T01:41:33Z", "attachment_id": 30741}, {"count": 9, "tags": [], "bug_id": 55383, "attachment_id": 30760, "id": 169690, "time": "2013-08-25T00:11:45Z", "creator": "kpreisser@apache.org", "creation_time": "2013-08-25T00:11:45Z", "is_private": false, "text": "Created attachment 30760\nUpdated patch for improving HTML markup & style in Tomcat docs\n\nHi,\n\nI updated the patch (again, sorry) to:\n\n\u2022 use only 1 data-* attribute for the comments identifier to be retrieved in JS.\n\u2022 replace instances of <h3><a id=\"...\">...</a><h3> with <h3 id=\"...\">...</h3>,\n  as it is not needed to use a <a> element to be able to link to a part of a\n  document with a fragment identifier (and <a name=\"...\"> is obsolete).\n\u2022 remove markup that was only needed for a separate printer-friendly version\n  of the docs (which was removed with r601180).\n\u2022 remove markup that was needed for a \"status\" page which was removed with\n  r630006."}, {"count": 10, "tags": [], "text": "I like it! It is a big improvement on what we have at the moment.\n\nI have your latest patch applied locally after fixing a few minor niggles (trailing whitespace) with the patch.\n\nThe only issue I can see at the moment is that the Tomcat logo doesn't show up. I'm inclined to commit this patch just as soon as I have fixed the logo issue.\n\nMy current view is that once we are happy with this for 8.0.x (I'm pretty much there - I can't speak for the other committers) we apply similar changes to 7.0.x, 6.0.x and the main Tomcat site (all are built with essentially the same mechanism).", "is_private": false, "id": 169729, "creator": "markt@apache.org", "time": "2013-08-27T09:51:10Z", "bug_id": 55383, "creation_time": "2013-08-27T09:51:10Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Figured out the logo issue. I missed the new logo you attached.\n\nI renamed it to tomcat.png - no need for the new bit.", "id": 169730, "time": "2013-08-27T09:55:53Z", "bug_id": 55383, "creation_time": "2013-08-27T09:55:53Z", "attachment_id": null}, {"count": 12, "tags": [], "text": "Patches applied to 8.0.x.\n\nI'm leaving this open for further improvements to 8.0.x as well as possible back-port to 7.0.x, 6.0.x and the website.", "is_private": false, "id": 169731, "creator": "markt@apache.org", "time": "2013-08-27T10:18:54Z", "bug_id": 55383, "creation_time": "2013-08-27T10:18:54Z", "attachment_id": null}, {"count": 13, "tags": [], "creator": "kpreisser@apache.org", "is_private": false, "text": "Hi Mark,\n(In reply to Mark Thomas from comment #12)\n> Patches applied to 8.0.x.\n> \n> I'm leaving this open for further improvements to 8.0.x as well as possible\n> back-port to 7.0.x, 6.0.x and the website.\n\nGreat!\n\nNote, for the documentation there are still some things to do in the various XML files (like using \"#One_Two_Three\" fragment identifiers instead of wrong \"#One Two Three\" (another correct way would be \"#One%20Two%20Three\", but the XSLT replaces \" \" with \"_\" which also looks better), replacing hard-coded HTML presentational elements/attributes with CSS, and so on.\n\nI will work on these things, (I just wanted to wait on someone reviewing the XSLT before I go on).", "id": 169732, "time": "2013-08-27T11:37:53Z", "bug_id": 55383, "creation_time": "2013-08-27T11:37:53Z", "attachment_id": null}, {"count": 14, "tags": [], "creator": "kpreisser@apache.org", "is_private": false, "text": "Hi,\n\nI noticed that when viewing the doc XML source files from SVN over HTTP, like changlog.xml:\n  http://svn.apache.org/repos/asf/tomcat/trunk/webapps/docs/changelog.xml\nthen the CSS is not applied. Firefox logs an error about wrong MIME type (text/plain instead of text/css).\n\nThis is probably because I forgot to set the correct MIME type on the .css stylesheet. I think the following change should fix it:\n\nIndex: webapps/docs/images/docs-stylesheet.css\n===================================================================\n--- webapps/docs/images/docs-stylesheet.css\t(revision 1517925)\n+++ webapps/docs/images/docs-stylesheet.css\t(working copy)\n\nProperty changes on: webapps/docs/images/docs-stylesheet.css\n___________________________________________________________________\nAdded: svn:mime-type\n## -0,0 +1 ##\n+text/css\n\\ No newline at end of property\n\n\n\nBTW, what do you think about switching from HTML to XHTML for the docs of Tomcat 8 (or next major release)?\nI mean:\n  - change method attribute on the XSLT from \"html\" to \"xml\"\n  - change file extension of generated output from \".html\" to \".xhtml\"\n  - change output MIME type from \"text/html\" to \"application/xhtml+xml\"\n\nComparing XHTML over HTML for XSLT-generated content, I currently see the following points:\n\nPro:\n  - The XSLT processor does not need to know how specific HTML elements\n    should be outout.\n    For example, <wbr> is a void element in HTML5, but currently\n    the XSLT processor used by Ant/Java outputs <wbr></wbr>, which is wrong,\n    as the XSLT processor does not yet implement the current XSLT and XQuery\n    Serialization 3.0 spec [1].\n    However, when using XHTML, the browser also uses a XML parser and\n    therefore XML Syntax can be used (both <wbr /> or <wbr></wbr> would be\n    correct). This avoids the need for the XSLT processor to know how\n    specific elements should be output (this also concerns elements like\n    <style> and <script> which are output as CDATA in HTML).\n  - One does not have to use the \"about:legacy-compat\" DOCTYPE (as\n    work-around until the XSLT processor supports the XLST 3 spec), because\n    in XHTML there is only \"Full Standards Mode\".\n    Also, the old-style <meta> element which includes the encoding in a\n    Content-Type declaration is not needed.\n\nContra:\n  - IE 9 (released: March 2011; IE 11 will be released soon) is the first IE\n    to support XHTML, while all other supported browsers like Firefox, Chrome,\n    Opera etc. support XHTML. IE 8 users will get a download dialog instead\n    of the page displayed.\n\nNeutral:\n  - Because the input (XML files and the XSLT file) is already XML and the\n    output will be automatically generated, the output syntax\n    (HTML or XHTML) is not of a concern when editing the source XML files.\n\n\nHowever, because the file extension would change from .html to .xhtml, such a step can probably only be done at a new major release as otherwise existing links to the pages would stop working.\n\nUsing XHTML means that people which use IE 8 or older cannot view the pages. However, one could think that folks with old browsers stay with old Tomcat versions, and folks which use the newest Tomcat 8 also use a current IE.  :D\n\n\n[1]  http://www.w3.org/TR/xslt-xquery-serialization-30/#HTML_DOCTYPE", "id": 169741, "time": "2013-08-27T19:39:16Z", "bug_id": 55383, "creation_time": "2013-08-27T19:39:16Z", "attachment_id": null}, {"count": 15, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "(In reply to Konstantin Prei\u00dfer from comment #14)\n> Hi,\n> \n> I noticed that when viewing the doc XML source files from SVN over HTTP,\n> like changlog.xml:\n>   http://svn.apache.org/repos/asf/tomcat/trunk/webapps/docs/changelog.xml\n> then the CSS is not applied. Firefox logs an error about wrong MIME type\n> (text/plain instead of text/css).\n> \n> This is probably because I forgot to set the correct MIME type on the .css\n> stylesheet. I think the following change should fix it:\n> \n> Index: webapps/docs/images/docs-stylesheet.css\n> ===================================================================\n> --- webapps/docs/images/docs-stylesheet.css\t(revision 1517925)\n> +++ webapps/docs/images/docs-stylesheet.css\t(working copy)\n> \n> Property changes on: webapps/docs/images/docs-stylesheet.css\n> ___________________________________________________________________\n> Added: svn:mime-type\n> ## -0,0 +1 ##\n> +text/css\n> \\ No newline at end of property\n\nFixed.\n\n> BTW, what do you think about switching from HTML to XHTML for the docs of\n> Tomcat 8 (or next major release)?\n\nNot yet. Some surveys suggest as many as 30% of browsers are IE < 9. That is too big a chunk of the user base to exclude from the docs.\n\nA better analysis would be to look at the access logs for the Tomcat docs. I'm unlikely to have the time to do that for a while.", "id": 169745, "time": "2013-08-27T20:39:32Z", "bug_id": 55383, "creation_time": "2013-08-27T20:39:32Z", "is_private": false}, {"count": 16, "attachment_id": null, "bug_id": 55383, "is_private": false, "id": 169753, "time": "2013-08-27T22:39:08Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2013-08-27T22:39:08Z", "tags": [], "text": "> > BTW, what do you think about switching from HTML to XHTML for the docs of\n> > Tomcat 8 (or next major release)?\n> \n> Not yet. Some surveys suggest as many as 30% of browsers are IE < 9. That is\n> too big a chunk of the user base to exclude from the docs.\n> \n> A better analysis would be to look at the access logs for the Tomcat docs.\n> I'm unlikely to have the time to do that for a while.\n\nAfter about 22 hours of todays logs: MSIE < 9 is about 12% of all requests to the TC vhost access logs and about 10% of the ones to doc content. \"All requests\" means all excluding obvious bots.\n\nOf all MSIE requests, MSIE 5-8 are about 50-60%.\n\nMore detailed data:\n\ntomcat.apache.org (US)\tAll\t\t\tDocs\t\t\nUA\tCount\tPct\tCum Pct\tCount\tPct\tCum Pct\nChrome\t63932\t41,9%\t41,9%\t24891\t45,3%\t45,3%\nFirefox\t36730\t24,1%\t66,0%\t15889\t28,9%\t74,3%\nSafari\t5518\t3,6%\t69,6%\t1670\t3,0%\t77,3%\nAppleWebKit other\t165\t0,1%\t69,7%\t71\t0,1%\t77,5%\nOpera\t1731\t1,1%\t70,9%\t491\t0,9%\t78,4%\nVaria\t11256\t7,4%\t78,2%\t2527\t4,6%\t83,0%\nMSIE 5\t414\t0,3%\t78,5%\t8\t0,0%\t83,0%\nMSIE 6\t1973\t1,3%\t79,8%\t465\t0,8%\t83,8%\nMSIE 7\t3760\t2,5%\t82,3%\t968\t1,8%\t85,6%\nMSIE 8\t12530\t8,2%\t90,5%\t3878\t7,1%\t92,6%\nMSIE 9\t7526\t4,9%\t95,4%\t2346\t4,3%\t96,9%\nMSIE 10\t6981\t4,6%\t100,0%\t1693\t3,1%\t100,0%\nSum\t152516\t100,0%\t\t54897\t100,0%\t\n\t\t\t\t\t\t\nMSIE 5-8\t18677\t12,2%\t\t5319\t9,7%\t\n\t\t\t\t\t\t\ntomcat.apache.org (EU)\tAll\t\t\tDocs\t\t\nUA\tCount\tPct\tCum Pct\tCount\tPct\tCum Pct\nChrome\t72372\t43,7%\t43,7%\t26923\t45,5%\t45,5%\nFirefox\t40208\t24,3%\t68,0%\t17361\t29,3%\t74,8%\nSafari\t5920\t3,6%\t71,5%\t2036\t3,4%\t78,2%\nAppleWebKit other\t200\t0,1%\t71,7%\t65\t0,1%\t78,3%\nOpera\t1745\t1,1%\t72,7%\t620\t1,0%\t79,4%\nVaria\t10767\t6,5%\t79,2%\t2538\t4,3%\t83,7%\nMSIE 5\t662\t0,4%\t79,6%\t5\t0,0%\t83,7%\nMSIE 6\t2005\t1,2%\t80,8%\t314\t0,5%\t84,2%\nMSIE 7\t4048\t2,4%\t83,3%\t977\t1,6%\t85,9%\nMSIE 8\t12797\t7,7%\t91,0%\t4146\t7,0%\t92,9%\nMSIE 9\t8078\t4,9%\t95,9%\t2429\t4,1%\t97,0%\nMSIE 10\t6832\t4,1%\t100,0%\t1803\t3,0%\t100,0%\nSum\t165634\t100,0%\t\t59217\t100,0%\t\n\t\t\t\t\t\t\nMSIE 5-8\t19512\t11,8%\t\t5442\t9,2%"}, {"count": 17, "tags": [], "text": "Created attachment 30772\nFirst part of updated documentation XMLs\n\nHi,\n\nI attached a patch with a first part of updated doc XML files to improve the HTML markup and follow up to the new XSLT. The changes include:\n- Ensure that a <p> does not contain <pre>, <ul>, <ol> etc. tags.\n- Use fragment identifiers that have a space replaced with \"_\".\n- Replace presentational tags/attributes with CSS; only use\n  <table> when it is really a table.\n- Use CDATA section in <source> elements so that source code/XML examples\n  in the doc XMLs is better readable (I hope this is OK).\n\n\nMark and Rainer,\n(In reply to Mark Thomas from comment #15)\n> Not yet. Some surveys suggest as many as 30% of browsers are IE < 9. That is\n> too big a chunk of the user base to exclude from the docs.\n\n(In reply to Rainer Jung from comment #16)\n> After about 22 hours of todays logs: MSIE < 9 is about 12% of all requests\n> to the TC vhost access logs and about 10% of the ones to doc content. \"All\n> requests\" means all excluding obvious bots.\n\nI agree that 30% IE < 9 users is still too many to switch to XHTML now (probably even the 12%).\n(Argh - Old IEs keep being a nightmare for web designers :)", "is_private": false, "id": 169755, "creator": "kpreisser@apache.org", "time": "2013-08-28T00:42:57Z", "bug_id": 55383, "creation_time": "2013-08-28T00:42:57Z", "attachment_id": 30772}, {"count": 18, "tags": [], "text": "Re: XHTML (or application/xml), I think it's reasonable to clean-up our documentation such that the documents would pass an XHTML validator, so that when the day comes to make the switch, we just switch the content-type and associated <META> tags, etc.\n\nMy experience is that MSIE 8 and 9 don't completely choke on XML documents, but it does force the browser into compliance-mode which is definitely nice (e.g. sane box model, etc.).\n\nMark: is there anywhere online we can see a sample of the newly-formatted documentation, or do we have to build it from svn?", "is_private": false, "id": 169775, "creator": "chris@christopherschultz.net", "time": "2013-08-28T14:47:08Z", "bug_id": 55383, "creation_time": "2013-08-28T14:47:08Z", "attachment_id": null}, {"count": 19, "attachment_id": null, "bug_id": 55383, "text": "The CI system makes the latest build of the docs available to view:\n\nhttp://ci.apache.org/projects/tomcat/tomcat8/docs/", "id": 169777, "time": "2013-08-28T14:59:51Z", "creator": "markt@apache.org", "creation_time": "2013-08-28T14:59:51Z", "tags": [], "is_private": false}, {"count": 20, "tags": [], "text": "Created attachment 30778\nMisaligned display IE8 top", "attachment_id": 30778, "id": 169784, "creator": "sebb@apache.org", "time": "2013-08-28T23:24:57Z", "bug_id": 55383, "creation_time": "2013-08-28T23:24:57Z", "is_private": false}, {"count": 21, "tags": [], "creator": "sebb@apache.org", "is_private": false, "text": "Created attachment 30779\nMisaligned display IE8 bottom", "id": 169785, "time": "2013-08-28T23:25:31Z", "bug_id": 55383, "creation_time": "2013-08-28T23:25:31Z", "attachment_id": 30779}, {"count": 22, "tags": [], "text": "The display looks a bit odd in IE8 (WinXP).\n\nThe images in the top row don't display correctly.\n\nThe bottom row is missing the text \"Comments are disabled for this page at the moment.\" and the horizontal line below it.\n\nAlso the Copyright line at the bottom is not centred.\n\nSee attached screen prints.", "attachment_id": null, "id": 169786, "creator": "sebb@apache.org", "time": "2013-08-28T23:28:26Z", "bug_id": 55383, "creation_time": "2013-08-28T23:28:26Z", "is_private": false}, {"count": 23, "tags": [], "text": "(In reply to Konstantin Prei\u00dfer from comment #17)\n> Created attachment 30772 [details]\n> First part of updated documentation XMLs\n\nPatch applied with tabs -> 4 spaces and trailing whitespace removed.\n\n\n> I agree that 30% IE < 9 users is still too many to switch to XHTML now\n> (probably even the 12%).\n> (Argh - Old IEs keep being a nightmare for web designers :)\n\nI'm afraid so. Given we'd like to extend this work to docs for all current versions and the main Tomcat website, 12% is too high a percentage to exclude.", "is_private": false, "id": 169793, "creator": "markt@apache.org", "time": "2013-08-29T09:11:55Z", "bug_id": 55383, "creation_time": "2013-08-29T09:11:55Z", "attachment_id": null}, {"count": 24, "tags": [], "bug_id": 55383, "text": "Hi Sebb,\n\n(In reply to Sebb from comment #22)\n> The display looks a bit odd in IE8 (WinXP).\n> \n> The images in the top row don't display correctly.\n> \n> The bottom row is missing the text \"Comments are disabled for this page at\n> the moment.\" and the horizontal line below it.\n> \n> Also the Copyright line at the bottom is not centred.\n> \n> See attached screen prints.\n\nthanks for your feedback about IE8.\n\nWhen updating the markup and design, I tried to orientate on new Standards (HTML5 and CSS3) which current browsers support. Unfortunately, IE8 does not support much of these new standards. Therefore the design looks a bit odd in IE8.\n\nMy thoughts were, \"If people use a current browser, they will get the correct layout. However if they use an old browser like IE8, they could get a odd layout, but the information they search for (documentation) is still available\".\n\nE.g. the JavaScript does not work in IE8 because of the \"application/javascript\" type that is first supported by IE9 (IE8 also lacks a lot of current JS functionality).\n\nDo you think we should add work-arounds for old browsers like IE8 (e.g. creating a IE8-CSS that is included with conditional comments)?", "id": 169795, "time": "2013-08-29T09:46:14Z", "creator": "kpreisser@apache.org", "creation_time": "2013-08-29T09:46:14Z", "is_private": false, "attachment_id": null}, {"count": 25, "tags": [], "bug_id": 55383, "attachment_id": 30786, "id": 169823, "time": "2013-08-29T23:46:51Z", "creator": "kpreisser@apache.org", "creation_time": "2013-08-29T23:46:51Z", "is_private": false, "text": "Created attachment 30786\nPart 2 of updated documentation XMLs\n\nHi,\n\nhere is another part of updated Documentation XMLs.\n\nNote: I also modified the CSS to make tables look a bit better (use different colors for odd and even rows)."}, {"count": 26, "tags": [], "text": "(In reply to Konstantin Prei\u00dfer from comment #25)\n> Created attachment 30786 [details]\n> Part 2 of updated documentation XMLs\n\nApplied. Many thanks.", "attachment_id": null, "id": 169829, "creator": "markt@apache.org", "time": "2013-08-30T07:39:55Z", "bug_id": 55383, "creation_time": "2013-08-30T07:39:55Z", "is_private": false}, {"count": 27, "tags": [], "bug_id": 55383, "attachment_id": 30793, "id": 169864, "time": "2013-09-02T15:59:03Z", "creator": "kpreisser@apache.org", "creation_time": "2013-09-02T15:59:03Z", "is_private": false, "text": "Created attachment 30793\nPart 3 of updated documentation XMLs\n\nHi,\n\nhere is another part of updated Documentation XMLs.\n\nI modified the CSS so that a table with class=\"detail-table\" looks the same as class=\"defaultTable\". If you don't like it, you (or I) can change it so that a detail-table has different colors.\n\nWhen working through the documentation, I found the following page (and others in appdev):\nhttp://tomcat.apache.org/tomcat-8.0-doc/appdev/installation.html\n\nwhich seemed a bit outdated, as it mentioned Tomcat 7 and Java 6 (I updated it to Tomcat 8 and Java 7), but it also mentions CVS (I guess this was written before SVN existed).\n\nFurthermore, this example web.xml:\nhttp://tomcat.apache.org/tomcat-8.0-doc/appdev/web.xml.txt\ndeclares itself as \"Web Application 2.3\" instead of 3.1.\n\n\nNote, that I also modified the HTTP and AJP configuration pages so that the Connector Comparison Chart is now using a <table>, instead of plain text, as it is tabular data."}, {"count": 28, "attachment_id": null, "bug_id": 55383, "is_private": false, "id": 169883, "time": "2013-09-03T12:41:58Z", "creator": "markt@apache.org", "creation_time": "2013-09-03T12:41:58Z", "tags": [], "text": "(In reply to Konstantin Prei\u00dfer from comment #27)\n> Created attachment 30793 [details]\n> Part 3 of updated documentation XMLs\n\nPatch applied. Many thanks."}, {"count": 29, "tags": [], "text": "Created attachment 30797\nPart 4 of updated documentation XMLs\n\nHi,\n\nhere is the final part of the documentation update.\nWith this patch, the improvement of HTML markup in the Tomcat 8 docs should be complete.\n\nNote: In the doc about the DefaultServlet [1], I also modified a dead link to Servlet 2.3 to point to http://jcp.org/en/jsr/detail?id=340 (Servlet 3.1).\n\n\n(In reply to Mark Thomas from comment #10)\n> My current view is that once we are happy with this for 8.0.x (I'm pretty\n> much there - I can't speak for the other committers) we apply similar\n> changes to 7.0.x, 6.0.x and the main Tomcat site (all are built with\n> essentially the same mechanism).\n\nI think I can look into applying the new markup/design for the main Tomcat Site now.\n\n\n[1] http://tomcat.apache.org/tomcat-8.0-doc/funcspecs/fs-default.html", "is_private": false, "id": 169886, "creator": "kpreisser@apache.org", "time": "2013-09-03T16:12:38Z", "bug_id": 55383, "creation_time": "2013-09-03T16:12:38Z", "attachment_id": 30797}, {"count": 30, "tags": [], "bug_id": 55383, "attachment_id": null, "id": 169928, "time": "2013-09-05T14:17:59Z", "creator": "markt@apache.org", "creation_time": "2013-09-05T14:17:59Z", "is_private": false, "text": "(In reply to Konstantin Prei\u00dfer from comment #29)\n> With this patch, the improvement of HTML markup in the Tomcat 8 docs should\n> be complete.\n\nApplied. Many, many thanks.\n\n> I think I can look into applying the new markup/design for the main Tomcat\n> Site now.\n\nFantastic. Go for it."}, {"count": 31, "tags": [], "bug_id": 55383, "attachment_id": 30809, "id": 170009, "time": "2013-09-10T14:35:45Z", "creator": "kpreisser@apache.org", "creation_time": "2013-09-10T14:35:45Z", "is_private": false, "text": "Created attachment 30809\nPpatch for improving HTML markup & style in the Tomcat Site\n\nHi,\n\nhere is a patch for the main Tomcat Site to improve the HTML markup and the layout, similar to the one for Tomcat 8 Doc.\n\nThe added image (xdocs/images/tomcat.png) is the same one as in attachment 30740."}, {"count": 32, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "(In reply to Konstantin Prei\u00dfer from comment #31)\n> Created attachment 30809 [details]\n> Patch for improving HTML markup & style in the Tomcat Site\n\nPatch applied. Waiting for the reaction on the users mailing list...\n\nI haven't enjoyed committing a patch so much in ages. Thank you. It is a huge improvement. But don't let that stop you trying to make it even better ;)", "id": 170014, "time": "2013-09-10T19:23:46Z", "bug_id": 55383, "creation_time": "2013-09-10T19:23:46Z", "is_private": false}, {"count": 33, "attachment_id": 30812, "bug_id": 55383, "text": "Created attachment 30812\nMissing background color IE9 top\n\nThe background color on the top is missing when using IE9. See the attached screenshot.", "id": 170021, "time": "2013-09-11T06:32:52Z", "creator": "violetagg@apache.org", "creation_time": "2013-09-11T06:32:52Z", "tags": [], "is_private": false}, {"count": 34, "tags": [], "bug_id": 55383, "attachment_id": 30813, "id": 170022, "time": "2013-09-11T09:03:11Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2013-09-11T09:03:11Z", "is_private": false, "text": "Created attachment 30813\nBroken layout in IE8\n\nIn IE8 (WinXP) the background color is missing as well.\n\nPlus to that the top of the page is broken.\nThe Tomcat cat and Apache Feather images are located above the page title, instead of floating at the left/right sides of it."}, {"count": 35, "tags": [], "bug_id": 55383, "attachment_id": null, "is_private": false, "id": 170026, "time": "2013-09-11T12:40:11Z", "creator": "kpreisser@apache.org", "creation_time": "2013-09-11T12:40:11Z", "text": "Hi,\n(In reply to Violeta Georgieva from comment #33)\n> The background color on the top is missing when using IE9. See the attached\n> screenshot.\n\nI think this is because \"background: linear-gradient(...)\" CSS is first supported by IE 10.\n\n(In reply to Konstantin Kolinko from comment #34)\n> Created attachment 30813 [details]\n> Broken layout in IE8\n> \n> In IE8 (WinXP) the background color is missing as well.\n> \n> Plus to that the top of the page is broken.\n> The Tomcat cat and Apache Feather images are located above the page title,\n> instead of floating at the left/right sides of it.\n\nI think this is because I used new HTML5 elements like <header id=\"header\"> which have a DOM in IE8 as <header id=\"header\"></header>...</header><//header>, so the CSS doesn't apply to them. One would have to use something like <header><div id=\"header\">...</div></header> for it to work in IE8.\n\nI hoped it wouldn't be necessary, but I will look into adding workarounds for old IEs. :)"}, {"count": 36, "tags": [], "bug_id": 55383, "text": "Created attachment 30814\nAdds work-arounds for IE \u2264 9.\n\nThis patch adds work-arounds for IE \u2264 9 to fix the layout on these IE versions.\n\nI used conditional comments to include a IE fix CSS file, and to use <div id=\"...\"> for IE \u2264 9, while IE \u2265 10 and other browsers will use <header id=\"...\"> as IE 10 dropped support for conditional comments in Full Standards Mode.", "id": 170027, "time": "2013-09-11T13:15:21Z", "creator": "kpreisser@apache.org", "creation_time": "2013-09-11T13:15:21Z", "is_private": false, "attachment_id": 30814}, {"count": 37, "tags": [], "creator": "kpreisser@apache.org", "is_private": false, "text": "Created attachment 30815\nAdds work-arounds to Tomcat 8 Docs for IE \u2264 9.\n\nThis one adds the same work-arounds to the Tomcat 8 docs.", "id": 170029, "time": "2013-09-11T13:29:53Z", "bug_id": 55383, "creation_time": "2013-09-11T13:29:53Z", "attachment_id": 30815}, {"count": 38, "tags": [], "text": "Applied. Many thanks.", "is_private": false, "id": 170030, "creator": "markt@apache.org", "time": "2013-09-11T13:50:25Z", "bug_id": 55383, "creation_time": "2013-09-11T13:50:25Z", "attachment_id": null}, {"count": 39, "tags": [], "creator": "kpreisser@apache.org", "is_private": false, "text": "Created attachment 30818\nLayout fixes for old browsers without conditional comments\n\nAfter Mark applied the patch, it turned out that the conditional comments for the IE fixes broke the CGI scripts on the download pages (see [1]). I'm sorry for that.\n\nTherefore, this patch adds layout fixes for IE <= 8 and and old Firefoxes (3.x) without using conditional comments.\n\n\n[1] http://markmail.org/message/rya7c6iu6vvbdkmw", "id": 170041, "time": "2013-09-11T17:37:29Z", "bug_id": 55383, "creation_time": "2013-09-11T17:37:29Z", "attachment_id": 30818}, {"count": 40, "tags": [], "bug_id": 55383, "attachment_id": 30819, "id": 170042, "time": "2013-09-11T17:39:17Z", "creator": "kpreisser@apache.org", "creation_time": "2013-09-11T17:39:17Z", "is_private": false, "text": "Created attachment 30819\nDoc layout fixes for old browsers without conditional comments\n\nThis one will apply the changes to the Tomcat 8 docs."}, {"count": 41, "tags": [], "bug_id": 55383, "attachment_id": null, "id": 170050, "time": "2013-09-11T20:10:08Z", "creator": "markt@apache.org", "creation_time": "2013-09-11T20:10:08Z", "is_private": false, "text": "Both applied. Thanks."}, {"count": 42, "attachment_id": 30824, "bug_id": 55383, "text": "Created attachment 30824\nUpdated Tomcat Site XMLs\n\nHi,\n\nthis patch improves the markup in the Tomcat Site XMLs. After applying, the HTMls should validate against a HTML5 validator.", "id": 170070, "time": "2013-09-12T15:03:59Z", "creator": "kpreisser@apache.org", "creation_time": "2013-09-12T15:03:59Z", "tags": [], "is_private": false}, {"count": 43, "attachment_id": null, "bug_id": 55383, "text": "(In reply to Konstantin Prei\u00dfer from comment #42)\n> Created attachment 30824 [details]\n\n> this patch improves the markup in the Tomcat Site XMLs. After applying, the\n> HTMls should validate against a HTML5 validator.\n\nPatch applied. Thanks again.", "id": 170147, "time": "2013-09-18T08:01:40Z", "creator": "markt@apache.org", "creation_time": "2013-09-18T08:01:40Z", "tags": [], "is_private": false}, {"count": 44, "tags": [], "bug_id": 55383, "attachment_id": 30862, "is_private": false, "id": 170174, "time": "2013-09-19T15:15:31Z", "creator": "kpreisser@apache.org", "creation_time": "2013-09-19T15:15:31Z", "text": "Created attachment 30862\nUse local ASF image\n\nHi,\n\npreviously, for the Tomcat docs I used this URL for the Apache Logo (an alphatransparent PNG): http://www.apache.org/images/feather.png\nHowever, as the Tomcat Docs are included in the release package, I think it should use a local image instead.\n\nThe image added by the patch (webapps/docs/images/asf-feather.png) is the one from the above URL.\n\nThe patch also removes the line 'Loading comments\u2026' as it is not removed by the Comments script."}, {"attachment_id": 30863, "tags": [], "bug_id": 55383, "is_private": false, "count": 45, "id": 170175, "time": "2013-09-19T16:09:10Z", "creator": "kpreisser@apache.org", "creation_time": "2013-09-19T16:09:10Z", "text": "Created attachment 30863\nImprove markup for Welcome pages\n\nThis patch improves the HTML markup in the Welcome pages (welcome.main.html and welcome.bin.html)."}, {"count": 46, "tags": [], "bug_id": 55383, "attachment_id": 30864, "id": 170176, "time": "2013-09-19T17:14:16Z", "creator": "kpreisser@apache.org", "creation_time": "2013-09-19T17:14:16Z", "is_private": false, "text": "Created attachment 30864\nImprove markup for Tomcat Examples - Part 1\n\nHi,\n\nthis patch improves the HTML markup in the Tomcat Examples webapp (currently, only the index pages and the websocket examples).\n\nNote: For the WebSocket examples, I switched from HTML to XHTML because every browser that supports WebSockets (e.g. IE >= 10) also supports XHTML (e.g. IE >= 9), and because the Snake Example contained an XHTML doctype (but was not fully XHTML-compatible)."}, {"count": 47, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Patches all applied. Thanks.", "id": 170182, "time": "2013-09-19T20:52:55Z", "bug_id": 55383, "creation_time": "2013-09-19T20:52:55Z", "is_private": false}, {"count": 48, "attachment_id": null, "bug_id": 55383, "is_private": false, "id": 170625, "time": "2013-10-15T23:32:52Z", "creator": "kpreisser@apache.org", "creation_time": "2013-10-15T23:32:52Z", "tags": [], "text": "Improvements of design and markup have been applied to the Tomcat Native documentation (to match Tomcat 8 documentation) and will be included in TC-Native 1.1.30 onwards."}, {"attachment_id": null, "tags": [], "bug_id": 55383, "is_private": false, "count": 49, "id": 171066, "time": "2013-11-05T18:26:35Z", "creator": "kpreisser@apache.org", "creation_time": "2013-11-05T18:26:35Z", "text": "Hi,\n\nI'd like to switch the font used for the Tomcat Website and Docs (currently \"Lucida Sans Unicode\") to \"Open Sans\" [1] which is released by Google using a Apache 2.0 Licence. This also means that the font can be displayed on every platform like Windows, Mac and Linux.\n\nI plan to add the Font files (.woff) (the variant which contains only the Latin characters) directly instead of using a CSS link to Google, so that the Site and the Docs (which may be viewed offline) don't depend on external Google resources.\n\nIs it OK to commit?\n\n\n[1] http://www.google.com/fonts/specimen/Open+Sans"}, {"count": 50, "tags": [], "bug_id": 55383, "text": "(In reply to Konstantin Prei\u00dfer from comment #49)\n> I'd like to switch the font used for the Tomcat Website and Docs (currently\n> \"Lucida Sans Unicode\") to \"Open Sans\" [1] which is released by Google using\n> a Apache 2.0 Licence. This also means that the font can be displayed on\n> every platform like Windows, Mac and Linux.\n\nIt's worth noting that the current CSS for font-family is just a suggestion to the browser. The font you get depends very heavily on the environment where the pages are being viewed.\n\n> I plan to add the Font files (.woff) (the variant which contains only the\n> Latin characters) directly instead of using a CSS link to Google, so that\n> the Site and the Docs (which may be viewed offline) don't depend on external\n> Google resources.\n\nI'm not a huge fan of WOFF for a few reasons:\n\n1. It requires yet another file to download, and font files tend to be big (I couldn't find a download link so I don't know the exact size of the Open Sans font).\n\n2. Most browsers I've seen tend to render the page as quickly as possible, and then apply the custom-font afterward, which results in a weird post-adjustment of the font, even for fonts that are already downloaded. I haven't done extensive testing recently, so it's possible that this is no longer an issue.\n\n3. Ultimately, the font choice is up to the browser, anyway, so you can't really \"force\" them to use Open Sans.\n\nGiven the above, why bother with a change at all? I know designers get all hot and bothered by things like kerning, serif angles, etc. but I'm not sure that adding another font-choice here really adds anything.", "id": 171067, "time": "2013-11-05T18:58:11Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-11-05T18:58:11Z", "is_private": false, "attachment_id": null}, {"count": 51, "tags": [], "creator": "kpreisser@apache.org", "attachment_id": null, "text": "Hi Christopher, thanks for your comments.\n\n(In reply to Christopher Schultz from comment #50)\n> (In reply to Konstantin Prei\u00dfer from comment #49)\n> > I'd like to switch the font used for the Tomcat Website and Docs (currently\n> > \"Lucida Sans Unicode\") to \"Open Sans\" [1] which is released by Google using\n> > a Apache 2.0 Licence. This also means that the font can be displayed on\n> > every platform like Windows, Mac and Linux.\n> \n> It's worth noting that the current CSS for font-family is just a suggestion\n> to the browser. The font you get depends very heavily on the environment\n> where the pages are being viewed.\n> \n> > I plan to add the Font files (.woff) (the variant which contains only the\n> > Latin characters) directly instead of using a CSS link to Google, so that\n> > the Site and the Docs (which may be viewed offline) don't depend on external\n> > Google resources.\n> \n> I'm not a huge fan of WOFF for a few reasons:\n> \n> 1. It requires yet another file to download, and font files tend to be big\n> (I couldn't find a download link so I don't know the exact size of the Open\n> Sans font).\n\nGoogle Fonts allows to explicitely select the charsets which should be included in the Font, to keep the file sizes down. E.g. in this case it would be (400, 400 italics, 600, 600 italics): 84 KB, which should be an acceptable size in today's relations (e.g. the ASF feather PNG image (asf-feather.png) has 40 KB).\n\n> 2. Most browsers I've seen tend to render the page as quickly as possible,\n> and then apply the custom-font afterward, which results in a weird\n> post-adjustment of the font, even for fonts that are already downloaded. I\n> haven't done extensive testing recently, so it's possible that this is no\n> longer an issue.\n\nThis applies if you visit the page the first time: Some browsers (Firefox) will display the page with an alternate font until the WOFF is downloaded, then switch to the WOFF. Other browsers (Chrome) will display spaces until the WOFF is loaded.\n\nHowever, after that if you browse on other pages then the WOFF is already in the cache and the browser will use it immediately (at least this is the case with Firefox, IE and Chrome), so there should be no issues when browsing through various links on the site.\n\n> 3. Ultimately, the font choice is up to the browser, anyway, so you can't\n> really \"force\" them to use Open Sans.\n\nYes (but this should also be the case with local fonts).\n\n> \n> Given the above, why bother with a change at all? I know designers get all\n> hot and bothered by things like kerning, serif angles, etc. but I'm not sure\n> that adding another font-choice here really adds anything.\n\nI'm also not a designer but I think it looks a bit more modern than the currently used Lucida Sans Console (and as it is a platform-independent format, other platforms will be able to use the font).\n\nI use it on my own websites and e.g. this site uses it: http://www.html5rocks.com/en/tutorials/websockets/basics/", "id": 171068, "time": "2013-11-05T19:42:58Z", "bug_id": 55383, "creation_time": "2013-11-05T19:42:58Z", "is_private": false}, {"count": 52, "tags": [], "bug_id": 55383, "text": "(In reply to Konstantin Prei\u00dfer from comment #49)\n> \n> [1] http://www.google.com/fonts/specimen/Open+Sans\n\nThe *.woff that you committed in r1546663 - where do they come from?\n\nI am worried whether we need to add some attribution if we are redistributing them,\nand how do we get updates for them if there are any.\n\nThus far I have two trails\na) Google Code repository for Google Fonts project, [2].\n\nThere are *.ttf files.\n\nb) I went to [1] clicked on \"Open Open Sans in Google Fonts\" which navigated to [3].\n\nAt [3] I click \"download\" button (a small \"down arrow\" button at the top-right part of the page). It downloads a 1.2Mb zip that contains 10 *.ttf files and LICENSE.txt (a copy of Apache License 2.0).\n\n[2] https://code.google.com/p/googlefontdirectory/source/browse/apache/opensans/\n[3] https://www.google.com/fonts#UsePlace:use/Collection:Open+Sans\n\nSo thus far\n1. It is clear that the files are covered by Apache License 2.0\n2. There is no NOTICE file\n3. These are *.ttf files, not *.woff ones.", "id": 171513, "time": "2013-11-30T19:28:27Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2013-11-30T19:28:27Z", "is_private": false, "attachment_id": null}, {"count": 53, "tags": [], "creator": "kpreisser@apache.org", "is_private": false, "text": "Hi Konstantin,\nthank you for the review.\n\n(In reply to Konstantin Kolinko from comment #52)\n> (In reply to Konstantin Prei\u00dfer from comment #49)\n> > \n> > [1] http://www.google.com/fonts/specimen/Open+Sans\n> \n> The *.woff that you committed in r1546663 - where do they come from?\n> \n> I am worried whether we need to add some attribution if we are\n> redistributing them,\n> and how do we get updates for them if there are any.\n\nI took the .woff files by going to [3], selecting the needed fonts, and then opening the generated CSS link [4].\n\nThis is a Google-generated CSS that contains links to .ttf, .woff and other formats depending on the browser. I then downloaded the .woff ones.\n\nIf there's a problem with taking these .woff files directly, I think it should be possible to use some tool to convert the .ttf to .woff files (but then one needs to take care not include only specific characters of the font, to reduce the file size).\n\n> Thus far I have two trails\n> a) Google Code repository for Google Fonts project, [2].\n> \n> There are *.ttf files.\n> \n> b) I went to [1] clicked on \"Open Open Sans in Google Fonts\" which navigated\n> to [3].\n> \n> At [3] I click \"download\" button (a small \"down arrow\" button at the\n> top-right part of the page). It downloads a 1.2Mb zip that contains 10 *.ttf\n> files and LICENSE.txt (a copy of Apache License 2.0).\n> \n> [2]\n> https://code.google.com/p/googlefontdirectory/source/browse/apache/opensans/\n> [3] https://www.google.com/fonts#UsePlace:use/Collection:Open+Sans\n> \n> So thus far\n> 1. It is clear that the files are covered by Apache License 2.0\n> 2. There is no NOTICE file\n> 3. These are *.ttf files, not *.woff ones.\n\n[4] http://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,600italic,700,700italic", "id": 171521, "time": "2013-12-01T16:11:13Z", "bug_id": 55383, "creation_time": "2013-12-01T16:11:13Z", "attachment_id": null}, {"count": 54, "tags": [], "bug_id": 55383, "attachment_id": null, "is_private": false, "id": 194438, "time": "2016-10-14T18:27:56Z", "creator": "1983-01-06@gmx.net", "creation_time": "2016-10-14T18:27:56Z", "text": "Hi Konstantin,\n\ntremendous improvement with a lot of effort put it. Thank you very much for that!"}, {"count": 55, "tags": [], "bug_id": 55383, "attachment_id": null, "is_private": false, "id": 201560, "time": "2017-10-21T22:41:02Z", "creator": "info@learnthreejs.com", "creation_time": "2017-10-21T22:41:02Z", "text": "There's definitely some cross-browser isuses going on here. Chrome 46 and IE 10,11 have odd issues.\n\nhttps://www.learnthreejs.com/load-3d-model-using-three-js-obj-loader/\n\nCan anybody confirm with the resource above? Thanks."}]