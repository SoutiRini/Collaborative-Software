[{"count": 0, "tags": [], "text": "When the ManifestClassPath task is used and the file set as 'jarfile' does not share a common toplevel directory with of the paths an error (Can't find suitable relative path to ...) is raised.\n\nFor example if jarfile is set to '/projects/projectXY/temp.jar' and one of the paths is '/common/libs/libraryXY.jar' the error is raised.\n\nI think this is a bug, since there is a suitable relative path, namely '../../common/libs/libraryXY.jar'.\n\nI'll attach a JUnit test case that reproduces the bug and contains some more explaination.", "attachment_id": null, "id": 131764, "creator": "mirko.seifert@tu-dresden.de", "time": "2009-11-06T03:29:05Z", "bug_id": 48152, "creation_time": "2009-11-06T03:29:05Z", "is_private": false}, {"attachment_id": 24499, "tags": [], "bug_id": 48152, "is_private": false, "count": 1, "id": 131765, "time": "2009-11-06T03:29:59Z", "creator": "mirko.seifert@tu-dresden.de", "creation_time": "2009-11-06T03:29:59Z", "text": "Created attachment 24499\nA test case reproducing the bug"}, {"count": 2, "tags": [], "bug_id": 48152, "attachment_id": null, "id": 131846, "time": "2009-11-10T09:16:57Z", "creator": "bodewig@apache.org", "creation_time": "2009-11-10T09:16:57Z", "is_private": false, "text": "before I try to reproduce this, have you set maxParentLevels to a value that is big enough for your case?  It defaults to 2 and I don't see your testcode bumping it to 3 which would be required to make the commented out example work."}, {"count": 3, "tags": [], "bug_id": 48152, "attachment_id": null, "id": 133419, "time": "2010-01-07T04:27:03Z", "creator": "mirko.seifert@tu-dresden.de", "creation_time": "2010-01-07T04:27:03Z", "is_private": false, "text": "Sorry, for the late reply. It took me some time to figure out whether setting maxParentLevels to a higher value solves the problem. \nThe result is: It does not. More precisely it does fix the problem on Windows machines, but not on Unix machines (where we initially discovered the bug, but were not aware of the fact the the bug is OS-specific). \nI'll attach a second version of the test case that shows the problem. It needs to run on a Unix (or Mac).\n\nTest case A shows that setting maxParentLevels to value that is too low, results in the \"Can't find suitable relative path\" exception. I do not understand why setting maxParentLevels is needed and why the default value is 2 instead of Integer.MAX_VALUE, but thats a different issues. Can you explain that?\n\nTest case B shows that setting maxParentLevels to the number of segments in the path that is used as starting location results in an ArrayIndexOutOfBoundException.\n\nTest case C shows that setting maxParentLevels to a number greater than the number of segments result in a NullPointerException.\n\nPlease let me know if further information is required."}, {"count": 4, "tags": [], "creator": "mirko.seifert@tu-dresden.de", "is_private": false, "text": "Created attachment 24814\nA second version of the test case (must run on Unix or MAC!)", "id": 133420, "time": "2010-01-07T04:28:03Z", "bug_id": 48152, "creation_time": "2010-01-07T04:28:03Z", "attachment_id": 24814}, {"count": 5, "tags": [], "text": "Hi Mirko,\n\nrunning your tests against Ant's trunk doesn't cause any exceptions for me on Linux - maybe it has been fixed by some other changes.\n\nAnt 1.8.0RC1 is about to be released today, could you please try whether the problem still occurs for you?", "attachment_id": null, "id": 133536, "creator": "bodewig@apache.org", "time": "2010-01-11T21:08:38Z", "bug_id": 48152, "creation_time": "2010-01-11T21:08:38Z", "is_private": false}, {"count": 6, "tags": [], "text": "Yes, I will do so and get back to you as soon as possible.", "attachment_id": null, "id": 133538, "creator": "mirko.seifert@tu-dresden.de", "time": "2010-01-12T00:38:57Z", "bug_id": 48152, "creation_time": "2010-01-12T00:38:57Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 48152, "attachment_id": null, "is_private": false, "id": 133575, "time": "2010-01-13T04:57:12Z", "creator": "mirko.seifert@tu-dresden.de", "creation_time": "2010-01-13T04:57:12Z", "text": "Hi Stefan,\n\nI ran the test against the 1.8.0RC1 libraries of ANT and it works now.\n\nThanks!\n\nMirko"}, {"attachment_id": null, "tags": [], "bug_id": 48152, "is_private": false, "count": 8, "id": 133648, "time": "2010-01-16T22:32:33Z", "creator": "bodewig@apache.org", "creation_time": "2010-01-16T22:32:33Z", "text": "Thank you for checking."}]