[{"count": 0, "tags": [], "bug_id": 2372, "attachment_id": null, "text": "From http://www.w3.org/TR/2001/REC-xmlschema-1-20010502/#element-import\n\n\"NOTE: Since both the namespace and schemaLocation [attribute] are optional, a \nbare <import/> \ninformation item is allowed. This simply allows unqualified reference to \nforeign components \nwith no target namespace without giving any hints as to where to find them. \"\n\nIf I have an import statement that does not have a schemaLocation attribute, \nXerces\nblows up with the following exception.  The only difference between the working \nand\nnon-working version of animalWidget.xsd is the following line:\n\n    <import namespace='http://www.foo.com/widget'/>\n    \nThe non-working version of animalWidget.xsd has an import statement that leaves \noff\nthe schemaLocation attribute.\n\nNote:  This example would not correctly validate even if the import bug was \nfixed.  I\nstumbled on this bug while playing with the new schemaLocation property added \nin 1.4.1.\nTo make this example complete I would have to include the Java code I was \nusing.  I didn't\nthink it was necessary to include the code to describe the bug, but I can give \nto you if you want.\n\n\nC:\\dev\\CommonPolicyEditor\\Dev\\SchemaDev>c:\\jdk1.3\\bin\\java -classpath \nc:\\dev\\lib\\xerces\\xerces.jar;c:\\dev\\lib\\xerces\\xercesSamples.jar sax.SAXCount -\nv testWidget.xml\n[Warning] :0:0: File \"\" not found.\norg.xml.sax.SAXException: Stopping after fatal error: File \"\" not found.\n        at org.apache.xerces.framework.XMLParser.reportError\n(XMLParser.java:1228)\n        at \norg.apache.xerces.readers.DefaultEntityHandler.startReadingFromDocument\n(DefaultEntityHandler.java:499)\n        at org.apache.xerces.framework.XMLParser.parseSomeSetup\n(XMLParser.java:312)\n        at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:1080)\n        at org.apache.xerces.validators.schema.TraverseSchema.traverseImport\n(TraverseSchema.java:2016)\n        at org.apache.xerces.validators.schema.TraverseSchema.doTraverseSchema\n(TraverseSchema.java:698)\n        at org.apache.xerces.validators.schema.TraverseSchema.<init>\n(TraverseSchema.java:518)\n        at org.apache.xerces.validators.common.XMLValidator.resolveSchemaGrammar\n(XMLValidator.java:2753)\n        at org.apache.xerces.validators.common.XMLValidator.parseSchemas\n(XMLValidator.java:2648)\n        at \norg.apache.xerces.validators.common.XMLValidator.bindNamespacesToElementAndAttri\nbutes(XMLValidator.java:2589)\n        at org.apache.xerces.validators.common.XMLValidator.callStartElement\n(XMLValidator.java:1142)\n        at org.apache.xerces.framework.XMLDocumentScanner.scanElement\n(XMLDocumentScanner.java:1862)\n        at \norg.apache.xerces.framework.XMLDocumentScanner$ContentDispatcher.dispatch\n(XMLDocumentScanner.java:1005)\n        at org.apache.xerces.framework.XMLDocumentScanner.parseSome\n(XMLDocumentScanner.java:381)\n        at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:1081)\n        at org.apache.xerces.framework.XMLParser.parse(XMLParser.java:1122)\n        at sax.SAXCount.print(SAXCount.java:158)\n        at sax.SAXCount.main(SAXCount.java:392)\n[Error] testWidget.xml:4:80: Schema error: Could not get the doc root for \nimported Schema file: ,.\n[Error] testWidget.xml:4:80: Schema error: could not resolve URI : \nhttp://www.foo.com/widget to a SchemaGrammar in getTypeInfoFromNS.\n[Error] testWidget.xml:4:80: Schema error: ComplexType 'LemurWidget': Could \nnotfind base type Widget in schema http://www.foo.com/widget.\n[Error] testWidget.xml:5:21: General Schema Error: Grammar with uri 2: \nhttp://www.foo.com/widget , can not be found.\n[Error] testWidget.xml:5:21: Element type \"widget:comment\" must be declared.\n[Error] testWidget.xml:6:10: Element type \"bar\" must be declared.\n[Error] testWidget.xml:7:10: Element type \"foo\" must be declared.\n[Error] testWidget.xml:8:10: Element type \"foo\" must be declared.\n[Error] testWidget.xml:9:10: Element type \"bar\" must be declared.\n[Error] testWidget.xml:10:10: Element type \"foo\" must be declared.\n[Error] testWidget.xml:11:10: Element type \"bar\" must be declared.\ntestWidget.xml: 1111 ms (8 elems, 4 attrs, 0 spaces, 59 chars)\n\n\n\nwidget.xsd\n----------\n<schema xmlns='http://www.w3.org/2001/XMLSchema'\n    targetNamespace='http://www.foo.com/widget'\n    xmlns:widget='http://www.foo.com/widget'\n    version='1.0'\n    elementFormDefault='qualified'\n    attributeFormDefault='unqualified'>\n    \n\n    <complexType name='Onething'>\n        <sequence>\n            <element name='tag' type='string' minOccurs='1' \nmaxOccurs='unbounded'/>\n        </sequence>\n    </complexType>\n\n    <complexType name='Widget'>\n        <sequence>\n            <element name='comment' type='string' minOccurs='1' maxOccurs='1'/>\n        </sequence>\n    </complexType>\n</schema>\n\n\nanimalWidget.xsd (working)\n--------------------------\n<schema xmlns='http://www.w3.org/2001/XMLSchema'\n    targetNamespace='http://www.foo.com/animalWidget'\n    xmlns:animalWidget='http://www.foo.com/animalWidget'\n    xmlns:widget='http://www.foo.com/widget'\n    version='1.0'\n    elementFormDefault='qualified'\n    attributeFormDefault='unqualified'>\n    \n    <import namespace='http://www.foo.com/widget' \nschemaLocation='file:widget.xsd'/>\n        \n    <element name='test' type='animalWidget:LemurWidget'/>\n    \n    <complexType name='LemurWidget'>\n      <complexContent>\n        <extension base='widget:Widget'>\n          <choice minOccurs='0' maxOccurs='unbounded'>\n            <sequence>\n              <element name='foo' type='string' minOccurs='0' \nmaxOccurs='unbounded'/>\n              <element name='bar' type='string' minOccurs='0' \nmaxOccurs='unbounded'/>\n            </sequence>\n          </choice>    \n        </extension>\n      </complexContent>\n    </complexType>        \n</schema>\n\n\nanimalWidget.xsd (non-working)\n------------------------------\n<schema xmlns='http://www.w3.org/2001/XMLSchema'\n    targetNamespace='http://www.foo.com/animalWidget'\n    xmlns:animalWidget='http://www.foo.com/animalWidget'\n    xmlns:widget='http://www.foo.com/widget'\n    version='1.0'\n    elementFormDefault='qualified'\n    attributeFormDefault='unqualified'>\n    \n    <import namespace='http://www.foo.com/widget'/>\n        \n    <element name='test' type='animalWidget:LemurWidget'/>\n    \n    <complexType name='LemurWidget'>\n      <complexContent>\n        <extension base='widget:Widget'>\n          <choice minOccurs='0' maxOccurs='unbounded'>\n            <sequence>\n              <element name='foo' type='string' minOccurs='0' \nmaxOccurs='unbounded'/>\n              <element name='bar' type='string' minOccurs='0' \nmaxOccurs='unbounded'/>\n            </sequence>\n          </choice>    \n        </extension>\n      </complexContent>\n    </complexType>        \n</schema>\n\n\ntestWidget.xsd\n--------------\n<test xmlns='http://www.foo.com/animalWidget'\n    xmlns:widget='http://www.foo.com/widget'\n    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'\n    xsi:schemaLocation='http://www.foo.com/animalWidget file:animalWidget.xsd'>\n    <widget:comment>foo</widget:comment>\n    <bar>frob</bar>\n    <foo>ack</foo>\n    <foo>qux</foo>\n    <bar>eep</bar>\n    <foo>quux</foo>\n    <bar>oop</bar>\n</test>", "id": 3309, "time": "2001-06-27T15:45:46Z", "creator": "mdiiorio@iss.net", "creation_time": "2001-06-27T15:45:46Z", "is_private": false}]