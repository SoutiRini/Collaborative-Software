[{"count": 0, "text": "In 0.94 and 0.95 beta the Marker example (hide.fo) throws the following Exception.\n\nC:\\Program Files\\fop-0.94\\examples\\fo>ant runtest\nBuildfile: build.xml\n\ninit:\n\nnewPDF:\n\nnewTestFiles:\n      [fop] C:\\Program Files\\fop-0.94\\examples\\fo\\markers\\hide.fo -> C:\\Program\nFiles\\fop-0.94\\examples\\fo\\tests\\hide.pdf\n      [fop] 27-Jun-2008 09:59:38 org.apache.fop.cli.InputHandler error\n      [fop] SEVERE: javax.xml.transform.TransformerException:\n\nBUILD FAILED\nC:\\Program Files\\fop-0.94\\examples\\fo\\build.xml:82: The following error occurred\n while executing this line:\nC:\\Program Files\\fop-0.94\\examples\\fo\\build.xml:48: javax.xml.transform.Transfor\nmerException: java.lang.NullPointerException:\n\nTotal time: 2 seconds\n\nI have attached a sample file which more closely matches the use case that I discovered this issue from. This works fine in 0.25 but is broken in 0.94/0.95beta.\n\nThe stack trace from running this example on 0.94 is slightly more useful than the one from the example:\n\nH:\\My Documents\\Catlin\\IT\\Development\\FO Processor\\run_fo>\"C:\\Program Files\\fop-\n0.94\\fop.bat\" -fo infile.fo -pdf outfile.pdf\n27-Jun-2008 10:32:53 org.apache.fop.cli.Main startFOP\nSEVERE: Exception\njava.lang.NullPointerException:\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:168)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:166)\n        at org.apache.fop.cli.Main.main(Main.java:197)\n\n---------\n\njava.lang.NullPointerException:\n        at org.apache.fop.fo.flow.PageNumberCitation.startOfNode(PageNumberCitat\nion.java:115)\n        at org.apache.fop.fo.FOTreeBuilder$MainFOHandler.startElement(FOTreeBuil\nder.java:329)\n        at org.apache.fop.fo.FOTreeBuilder.startElement(FOTreeBuilder.java:185)\n        at org.apache.xalan.transformer.TransformerIdentityImpl.startElement(Tra\nnsformerIdentityImpl.java:1072)\n        at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Sour\nce)\n        at org.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement(Unkn\nown Source)\n        at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanStartElement(Unkn\nown Source)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContent\nDispatcher.dispatch(Unknown Source)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Un\nknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.xalan.transformer.TransformerIdentityImpl.transform(Transf\normerIdentityImpl.java:484)\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:165)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:166)\n        at org.apache.fop.cli.Main.main(Main.java:197)", "creator": "jbrowning@catlin.com", "attachment_id": null, "id": 118056, "time": "2008-06-27T02:34:31Z", "bug_id": 45295, "creation_time": "2008-06-27T02:34:31Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 45295, "is_private": false, "id": 118057, "attachment_id": 22186, "creator": "jbrowning@catlin.com", "creation_time": "2008-06-27T02:35:41Z", "time": "2008-06-27T02:35:41Z", "text": "Created attachment 22186\nUse case demonstrating error"}, {"count": 2, "tags": [], "bug_id": 45295, "is_private": false, "text": "Already adding this note for completeness (already mentioned on fop-users@ yesterday)\n\nThe issue is partly fixed in FOP Trunk. page-number-citations in markers no longer throw an Exception, but there is still a remaining problem for the forward reference: in the example 'hide.fo', the retrieved marker shows 'page 2 of 1'.\n\nAdditionally, there appears to be a problem with with instream-foreign-object in markers. In the example 'hide.fo', the embedded SVG does not render at all (note: after changing stroke and fill to 'red' instead of 'white'... First wasted a lot of time wondering why I did not see any rectangle, then noticed it was a completely white one :-S )\n", "id": 118073, "time": "2008-06-27T10:51:57Z", "creator": "adelmelle@apache.org", "creation_time": "2008-06-27T10:51:57Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 45295, "attachment_id": null, "is_private": false, "id": 118099, "time": "2008-06-29T04:10:42Z", "creator": "adelmelle@apache.org", "creation_time": "2008-06-29T04:10:42Z", "text": "(In reply to comment #2)\n\n> The issue is partly fixed in FOP Trunk. page-number-citations in markers no\n> longer throw an Exception, but there is still a remaining problem for the\n> forward reference: in the example 'hide.fo', the retrieved marker shows 'page 2\n> of 1'.\n\nLooking closer, the output does seem to be correct. The fo:marker in fo:block[@id='end-seq1'] still belongs to page 1. The second page is an empty page that is produced by the fact that the second page-sequence has an odd initial-page-number. Setting force-page-count to 'no-force' on the first, generates only one page.\n\nSo, the bug concerning forward-references is fixed in FOP Trunk now.\nI have also added a disabled tescase for the remaining problem with instream-foreign-object.\n\nsee:\nhttp://svn.apache.org/viewvc?rev=672010&view=rev\nhttp://svn.apache.org/viewvc?rev=672496&view=rev\nhttp://svn.apache.org/viewvc?rev=672617&view=rev\n\nThanks for reporting!"}, {"count": 4, "tags": [], "bug_id": 45295, "attachment_id": null, "is_private": false, "id": 155791, "time": "2012-04-01T06:40:57Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:40:57Z", "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed"}]