[{"count": 0, "tags": [], "bug_id": 60852, "attachment_id": null, "id": 197617, "time": "2017-03-13T13:33:54Z", "creator": "1983-01-06@gmx.net", "creation_time": "2017-03-13T13:33:54Z", "is_private": false, "text": "The word \"compressable\" does not exist according to Merriam Webster or the Oxford Dictionary. It seems simply to be a typo:\n\n> $ grep -ri --exclude-dir=.svn compressable .\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:    private String compressableMimeType = \"text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json,application/xml\";\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:    private String[] compressableMimeTypes = null;\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:    public String getCompressableMimeType() { return compressableMimeType; }\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:    public void setCompressableMimeType(String valueS) {\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:        compressableMimeType = valueS;\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:        compressableMimeTypes = null;\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:    public String[] getCompressableMimeTypes() {\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:        String[] result = compressableMimeTypes;\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:        StringTokenizer tokens = new StringTokenizer(compressableMimeType, \",\");\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:        compressableMimeTypes = result;\n> ./java/org/apache/coyote/http11/AbstractHttp11Protocol.java:        processor.setCompressableMimeTypes(getCompressableMimeTypes());\n> ./java/org/apache/coyote/http11/Http11Processor.java:    protected String[] compressableMimeTypes;\n> ./java/org/apache/coyote/http11/Http11Processor.java:     * @param compressableMimeTypes MIME types for which compression should be\n> ./java/org/apache/coyote/http11/Http11Processor.java:    public void setCompressableMimeTypes(String[] compressableMimeTypes) {\n> ./java/org/apache/coyote/http11/Http11Processor.java:        this.compressableMimeTypes = compressableMimeTypes;\n> ./java/org/apache/coyote/http11/Http11Processor.java:    private boolean isCompressable() {\n> ./java/org/apache/coyote/http11/Http11Processor.java:            if (compressableMimeTypes != null) {\n> ./java/org/apache/coyote/http11/Http11Processor.java:                return (startsWithStringArray(compressableMimeTypes,\n> ./java/org/apache/coyote/http11/Http11Processor.java:        boolean isCompressable = false;\n> ./java/org/apache/coyote/http11/Http11Processor.java:            isCompressable = isCompressable();\n> ./java/org/apache/coyote/http11/Http11Processor.java:            if (isCompressable) {\n> ./java/org/apache/coyote/http11/Http11Processor.java:        if (isCompressable) {\n> ./webapps/docs/config/http.xml:    <attribute name=\"compressableMimeType\" required=\"false\">\n\nA fix is fairly easy, but would require an incompatible change. This is possible in Tomcat 9 only. For Tomcat 8.5.x one could introduce new methods (getter, setter) calling old ones, mark as @Deprecated and change http.xml for the new one only. Old config should continue to run as expected."}, {"count": 1, "tags": [], "bug_id": 60852, "attachment_id": null, "id": 197618, "creation_time": "2017-03-13T13:36:08Z", "time": "2017-03-13T13:36:08Z", "creator": "1983-01-06@gmx.net", "text": "The correct term is \"compressible\", a => i", "is_private": false}, {"count": 2, "tags": [], "bug_id": 60852, "text": "This can be done in a backward-compatible way. It's just an alias of an existing setting (or, rather, re-naming an existing setting and then creating an alias with the old name).\n\nWould you care to submit a patch?", "id": 197631, "time": "2017-03-13T19:06:23Z", "creator": "chris@christopherschultz.net", "creation_time": "2017-03-13T19:06:23Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "1983-01-06@gmx.net", "is_private": false, "id": 197633, "time": "2017-03-13T19:49:44Z", "bug_id": 60852, "creation_time": "2017-03-13T19:49:44Z", "tags": [], "text": "(In reply to Christopher Schultz from comment #2)\n> This can be done in a backward-compatible way. It's just an alias of an\n> existing setting (or, rather, re-naming an existing setting and then\n> creating an alias with the old name).\n> \n> Would you care to submit a patch?\n\nYes, of course. I will start with Tomcat 9 first. Do you want me to simply break code in 9? I think this is OK since it is not GA yet.\nWhen this is done, I will work in 8.5.\n\nCan someone merge 60851 first? Both patches would cause a conflict."}, {"count": 4, "tags": [], "bug_id": 60852, "attachment_id": null, "id": 197668, "time": "2017-03-15T08:50:50Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2017-03-15T08:50:50Z", "is_private": false, "text": "1. Do both American English and British English consider this a typo?\n\nWictionary has this spelling listed,\nhttps://en.wiktionary.org/wiki/compressable\n\n\n2. I think it would be better to have a regular expression instead of a list.\nTo cover foo+xml, foo+json  mime types.\n\nSee bug 60851 and see <mime-type>s in the default conf/web.xml for examples?\n\n\n3. Beware of BREACH.\nhttps://en.wikipedia.org/wiki/BREACH_(security_exploit)"}, {"count": 5, "tags": [], "bug_id": 60852, "is_private": false, "text": "(In reply to Konstantin Kolinko from comment #4)\n> 1. Do both American English and British English consider this a typo?\n> \n> Wictionary has this spelling listed,\n> https://en.wiktionary.org/wiki/compressable\n\nStrange, this isn't listed neither by Oxford, Merriam-Webster, nor Cambridge. I wouldn't take Wiktionary as a canonical reference for the English language.\n\nWhat do native speakers say?", "id": 197675, "time": "2017-03-15T10:41:00Z", "creator": "1983-01-06@gmx.net", "creation_time": "2017-03-15T10:41:00Z", "attachment_id": null}, {"count": 6, "attachment_id": null, "creator": "markt@apache.org", "text": "This native speaker says \"compressable\" is a common misspelling of \"compressible\".", "id": 197679, "time": "2017-03-15T12:58:06Z", "bug_id": 60852, "creation_time": "2017-03-15T12:58:06Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "bug_id": 60852, "is_private": false, "text": "(In reply to Mark Thomas from comment #6)\n> This native speaker says \"compressable\" is a common misspelling of\n> \"compressible\".\n\n+1\n\nTomcat is \"able\" to \"compress\" a file type, ergo \"compressable\". Of course, as I type that into my web browser, it kindly tells me it should be \"compressible\" (at least in US English).\n\nMistakes happen. Let's just make an alias and not mince around too much over a spelling issue.", "id": 197694, "time": "2017-03-15T21:33:19Z", "creator": "chris@christopherschultz.net", "creation_time": "2017-03-15T21:33:19Z", "attachment_id": null}, {"count": 8, "attachment_id": 34841, "creator": "1983-01-06@gmx.net", "is_private": false, "id": 197757, "time": "2017-03-17T17:18:15Z", "bug_id": 60852, "creation_time": "2017-03-17T17:18:15Z", "tags": [], "text": "Created attachment 34841\nTrivial patch for Tomcat 9\n\nHere is a trivial patch for Tomcat 9. No backwards compat retained. I think this is OK for Tomcat 9, but not suited for 8.5."}, {"count": 9, "tags": [], "bug_id": 60852, "text": "Thanks for the patch.\n\nI applied a variation with deprecation to 9.0.x, back-ported all the way back to 7.0.x and removed the deprecated methods from 9.0.x.\n\nFixed in:\n- trunk for 9.0.0.M19 onwards\n- 8.5.x for 8.5.13 onwards\n- 8.0.x for 8.0.43 onwards\n- 7.0.x for 7.0.77 onwards", "id": 197938, "time": "2017-03-23T15:07:28Z", "creator": "markt@apache.org", "creation_time": "2017-03-23T15:07:28Z", "is_private": false, "attachment_id": null}]