[{"count": 0, "tags": [], "creator": "bluemoon@xs4all.nl", "text": "I use a FiltersFile in my home-directory to overrule properties\nin a FiltersFile in the project-directory.\n\nI want the FiltersFile in my home-directory to be optional.\nSo FilterSet should not complain if that file doesn't exist.\n\nThe complaint FilterSet is giving me is :\n file:/mnt/hdc1/projecten/FriescheVlag/project/vla/build.xml:117: Must specify a\nfile not a directory in the filtersfile attribute:/home/kkuip/gti/ini/Properties.ini\n\nMind you, that Properties.ini is NOT a directory, it simply doesn't exist.\n(So the error-message is wrong)\n\nMaybe the solution is that if the file doesn't exist it is silenty ignored or\na new attribute 'quiet' is in order ? \n\nKees", "id": 37053, "time": "2003-05-12T09:33:24Z", "bug_id": 19845, "creation_time": "2003-05-12T09:33:24Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "sean.mceligot@gmail.com", "text": "Created attachment 17248\nuse getProject().log instead of throw new BuildException. Patch was made with ant 1.6.5\n\nPlease add this or a similar fix to the next release.", "id": 83861, "time": "2005-12-20T18:07:34Z", "bug_id": 19845, "creation_time": "2005-12-20T18:07:34Z", "is_private": false, "attachment_id": 17248}, {"count": 2, "tags": [], "bug_id": 19845, "is_private": false, "id": 83867, "attachment_id": null, "creator": "mbenson@apache.org", "creation_time": "2005-12-21T00:37:37Z", "time": "2005-12-21T00:37:37Z", "text": "The patch can't be accepted as-is because it breaks backwards-compatibility;\ni.e. there could (farfetched I know) be builds in the wild that depend on this\nfailure.  What you can do is make the desired behavior conditional upon a new\nattribute, e.g. failonerror (default true) or the like.  In the meantime you can\nwork around this lack \"old-school-Ant-style\":\n\n<target name=\"main\" depends=\"check,filters,nofilters\">\n  <mycopy file=\"foo\" tofile=\"bar\" />\n</target>\n<target name=\"check\">\n  <available property=\"found\" file=\"filtersfile\" />\n</target>\n<target name=\"filters\" if=\"found\">\n  <presetdef name=\"mycopy\">\n    <copy>\n      <filterset>\n        <filtersfile file=\"filtersfile\" />\n      </filterset>\n    </copy>\n  </presetdef>\n</target>\n<target name=\"nofilters\" if=\"found\">\n  <presetdef name=\"mycopy\">\n    <copy />\n  </presetdef>\n</target>\n\nOkay, the presetdef isn't old-school, but the target arrangement was what I was\ntalking about... ;)\n\nHTH,\nMatt\n\nP.S. if you update your patch, prepend [PATCH] to the bug summary!"}, {"attachment_id": null, "tags": [], "bug_id": 19845, "is_private": false, "count": 3, "id": 83892, "time": "2005-12-21T20:14:34Z", "creator": "sean.mceligot@gmail.com", "creation_time": "2005-12-21T20:14:34Z", "text": "How about something like this.\n\n<filtersfile failonerror=\"false\" file=\"myfile.properties\"/>\n\nwhere failonerror defaults to true"}, {"count": 4, "tags": [], "bug_id": 19845, "text": "I think that will work, yes.", "id": 83893, "time": "2005-12-21T20:54:11Z", "creator": "mbenson@apache.org", "creation_time": "2005-12-21T20:54:11Z", "is_private": false, "attachment_id": null}, {"attachment_id": 17269, "tags": [], "bug_id": 19845, "is_private": false, "count": 5, "id": 83946, "time": "2005-12-23T03:29:45Z", "creator": "sean.mceligot@gmail.com", "creation_time": "2005-12-23T03:29:45Z", "text": "Created attachment 17269\n[PATCH] add failonerror to Filter and FilterSet\n\nThis works, but only if failonerror comes before file. I tried to add an\nexecute method but it didn't get called. If there is a way to fix this please\nlet me know. I'll update the documentation whatever else needs to be done, if\nthe code change is accepted. Here's a usage example.\n\n<filter failonerror=\"false\" filtersfile=\"dne.filter.properties\"/>\n<copy todir=\"c:\\temp\" verbose=\"true\" file=\"build.xml\">\n  <filterset>\n    <filtersfile failonerror=\"false\" file=\"dne.filterset.properties\"/>\n  </filterset>\n</copy>"}, {"count": 6, "tags": [], "text": "This patch changes the signature of a public method.  Let me take a fresh look\nat this.", "is_private": false, "id": 83960, "creator": "mbenson@apache.org", "time": "2005-12-23T14:30:54Z", "bug_id": 19845, "creation_time": "2005-12-23T14:30:54Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 19845, "text": "I can add a method like this to make it more backwards compatible.\n\npublic synchronized void readFiltersFromFile(File filtersFile) throws\nBuildException {\n  readFiltersFromFile(true, filtersFile);\n}\n", "count": 7, "id": 83962, "time": "2005-12-23T15:11:20Z", "creator": "sean.mceligot@gmail.com", "creation_time": "2005-12-23T15:11:20Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 19845, "text": "I'm also not crazy about the concept of the failonerror attribute having to\nprecede the file attribute.  Finally, the filterset has an undocumented\nfiltersfile attribute that eliminates the need for a nested filterfile element\nwith a single filtersfile.  I have finished coding a new onmissingfiltersfile\n[\"fail\", \"warn\", \"ignore\"] attribute and will commit it to HEAD as soon as I\nfinish writing its unit tests...", "count": 8, "id": 83964, "time": "2005-12-23T15:58:33Z", "creator": "mbenson@apache.org", "creation_time": "2005-12-23T15:58:33Z", "is_private": false}, {"count": 9, "tags": [], "creator": "mbenson@apache.org", "text": "fixed in SVN HEAD.", "id": 84018, "time": "2005-12-27T20:03:35Z", "bug_id": 19845, "creation_time": "2005-12-27T20:03:35Z", "is_private": false, "attachment_id": null}]