[{"count": 0, "tags": [], "bug_id": 50362, "attachment_id": null, "id": 142104, "time": "2010-11-29T04:40:29Z", "creator": "amir.mandzuka@ic-mp.org", "creation_time": "2010-11-29T04:40:29Z", "is_private": false, "text": "Hi, With JSVGCanvas I load predefinded svg skeleton image and add various kind of elements like rectangle, circle, polyline etc later.\nNew elements can be added unlimited numer of times until svg is converted to jpeg using transcoder API fith the folowing lines\n\n        String skeletalImagePath=System.getProperty(\"java.io.tmpdir\")+\"\\\\skeleton.jpg\";\n         try {\n            JPEGTranscoder t = new JPEGTranscoder();\n            // Set the transcoding hints.\n            t.addTranscodingHint(JPEGTranscoder.KEY_QUALITY, new Float(.99));\n            TranscoderInput input = new TranscoderInput(doc);\n           // Create the transcoder output.\n            OutputStream ostream = new FileOutputStream(skeletalImagePath);\n            TranscoderOutput output = new TranscoderOutput(ostream);\n            // Save the image.\n            try {\n                t.transcode(input, output);\n            } catch (TranscoderException et) {\n                et.printStackTrace();\n            }\n            // Flush and close the stream.\n            ostream.flush();\n            ostream.close();\n        } catch (FileNotFoundException eu) {\n            JOptionPane.showMessageDialog(null, eu.getMessage(), \"\",\n                                          JOptionPane.INFORMATION_MESSAGE);\n            eu.printStackTrace();\n        } catch (IOException et) {\n            JOptionPane.showMessageDialog(null, et.getMessage(), \"\",\n                                          JOptionPane.INFORMATION_MESSAGE);\n            et.printStackTrace();\n        }\n\nAfter that if new element is added using folowing function null point exection error appears.\n\n    private void addPMDefect(final int x,final int y,final int bodyPartBoneId, final int id){\n        UpdateManager um = jSVGCanvas1.getUpdateManager();\n        um.getUpdateRunnableQueue().invokeLater(new Runnable() {\n                                                     public void run() {\n        SVGElement svgRoot = svgDocument.getRootElement();\n        String dot1,dot2,dot3, dot4;\n        dot1=Integer.toString(x-15)+\",\"+Integer.toString(y+5);\n        dot2=Integer.toString(x-5)+\",\"+Integer.toString(y-5);\n        dot3=Integer.toString(x+5)+\",\"+Integer.toString(y+5);\n        dot4=Integer.toString(x+15)+\",\"+Integer.toString(y-5);\n\n        Element el = svgDocument.createElementNS (svgNS, \"polyline\");\n        el.setAttributeNS (null, \"fill\", \"none\");\n        el.setAttributeNS (null, \"stroke\", PMDefectColor);\n        el.setAttributeNS (null, \"stroke-width\", \"2\");\n        el.setAttributeNS (null, \"points\", dot1+\" \"+dot2+\" \"+dot3+\" \"+dot4);\n        el.setAttributeNS (null, \"id\", \"observ1\"+Integer.toString(id));\n        svgRoot.appendChild(el);\n            }\n         }\n        );\n    }\n\nError message:\njava.lang.NullPointerException\n\tat org.apache.batik.bridge.CSSUtilities.convertDisplay(CSSUtilities.java:565)\n\tat org.apache.batik.bridge.AbstractGraphicsNodeBridge.getDisplay(AbstractGraphicsNodeBridge.java:158)\n\tat org.apache.batik.bridge.GVTBuilder.build(GVTBuilder.java:134)\n\tat org.apache.batik.bridge.SVGGElementBridge.handleElementAdded(SVGGElementBridge.java:123)\n\tat org.apache.batik.bridge.SVGGElementBridge.handleDOMNodeInsertedEvent(SVGGElementBridge.java:107)\n\tat org.apache.batik.bridge.BridgeContext$DOMNodeInsertedEventListener.handleEvent(BridgeContext.java:1601)\n\tat org.apache.batik.dom.events.EventSupport.fireEventListeners(EventSupport.java:324)\n\tat org.apache.batik.dom.events.EventSupport.fireEventListeners(EventSupport.java:366)\n\tat org.apache.batik.dom.events.EventSupport.dispatchEvent(EventSupport.java:258)\n\tat org.apache.batik.dom.AbstractNode.dispatchEvent(AbstractNode.java:1014)\n\tat org.apache.batik.dom.AbstractParentNode.fireDOMNodeInsertedEvent(AbstractParentNode.java:422)\n\tat org.apache.batik.dom.AbstractParentNode.appendChild(AbstractParentNode.java:224)\n\tat view.JSkeletonCanvas$6.run(JSkeletonCanvas.java:351)\n\tat org.apache.batik.util.RunnableQueue.run(RunnableQueue.java:237)\n\tat java.lang.Thread.run(Thread.java:619)\n\nLine 351 is: svgRoot.appendChild(el);\n\nAm I doind something wrong?\nThanks"}, {"count": 1, "tags": [], "bug_id": 50362, "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of bug 50361 ***", "id": 142105, "time": "2010-11-29T04:56:41Z", "creator": "amir.mandzuka@ic-mp.org", "creation_time": "2010-11-29T04:56:41Z", "attachment_id": null}]