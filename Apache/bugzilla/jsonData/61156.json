[{"count": 0, "tags": [], "bug_id": 61156, "attachment_id": null, "is_private": false, "id": 199064, "time": "2017-06-06T01:42:09Z", "creator": "brian@databaseknowledge.com", "creation_time": "2017-06-06T01:42:09Z", "text": "In web.xml file I added the standard ExpiresFilter syntax:\n\n\t<filter>\n\t <filter-name>ExpiresFilter</filter-name>\n\t <filter-class>org.apache.catalina.filters.ExpiresFilter</filter-class>\n\t <init-param>\n\t\t<param-name>ExpiresByType image</param-name>\n\t\t<param-value>access plus 5 weeks</param-value>\n\t </init-param>\n\t <init-param>\n\t\t<param-name>ExpiresByType text/css</param-name>\n\t\t<param-value>access plus 5 weeks</param-value>\n\t </init-param>\n\t <init-param>\n\t\t<param-name>ExpiresByType application/javascript</param-name>\n\t\t<param-value>access plus 5 weeks</param-value>\n\t </init-param>\n\t</filter>\n\t\n\t<filter-mapping>\n\t\t<filter-name>ExpiresFilter</filter-name>\n\t\t<url-pattern>/cache/*</url-pattern>\n\t</filter-mapping>\n\nThe headers are missing the Cache-Control header:\n\nAccept-Ranges:bytes\nContent-Length:1384282\nContent-Type:application/javascript\nDate:Tue, 06 Jun 2017 04:38:11 GMT\nETag:W/\"1384282-1494926612738\"\nLast-Modified:Tue, 16 May 2017 09:23:32 GMT\n\n\nNote that the /cache path is defined as:\n\n<Host name=\"localhost\"  appBase=\"webapps\" unpackWARs=\"true\" autoDeploy=\"true\">\n  <Context docBase=\"C:\\_portal\\webroot\\cache\" path=\"/cache\" />\t\t\n\nI do not think this matters as I tried the /example/* path and this has the same problem."}, {"count": 1, "attachment_id": null, "creator": "felix.schumacher@internetallee.de", "is_private": false, "id": 199066, "time": "2017-06-06T05:02:01Z", "bug_id": 61156, "creation_time": "2017-06-06T05:02:01Z", "tags": [], "text": "I believe this question belongs on the user mailing list.\n\nThe filter path expression is relative to the context, so it will only match on elements /path/path/* with your config.\n\nAlso note, that it is bad practice to put your context definitions inside of server.xml.\n\nFeel free to reopen, if discussion on the users mailing list indicate a real bug."}, {"count": 2, "attachment_id": null, "creator": "brian@databaseknowledge.com", "is_private": false, "id": 199076, "time": "2017-06-06T12:14:16Z", "bug_id": 61156, "creation_time": "2017-06-06T12:14:16Z", "tags": [], "text": "Thank you for your response. So I understand what to ask the mailing list...\n\nYou're saying is <url-pattern>/cache/*</url-pattern> will match paths along the lines of: \n\nhttp://site.com/cache/cache/file.js\nhttp://site.com/cache/cache/file.css\n\nand it will not match:\n\nhttp://site.com/cache/file.js\nhttp://site.com/cache/file.css\n\nThat seems odd, not sure if I understand that.  I will ask the mailing list.\n\nAlso thank you for letting me know about context definitions inside of server.xml.  Yeah, I just read that this is bad practice because it cannot be changed without restarting. It looks like this can be moved to  /META-INF/context.xml."}]