[{"count": 0, "tags": [], "creator": "ttoupin@jcafe.org", "text": " ", "id": 8944, "time": "2001-12-15T15:14:36Z", "bug_id": 5444, "creation_time": "2001-12-15T15:14:36Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 5444, "attachment_id": null, "text": "When AsyncAppender is closed, it will generate a NullPointerException on \nsubsequent appends.  Refer to bug 509 for a similar bug.\n\nSuggest patch:\n\nIndex: AsyncAppender.java\n===================================================================\nRCS file: /home/cvspublic/jakarta-\nlog4j/src/java/org/apache/log4j/AsyncAppender.java,v\nretrieving revision 1.24\ndiff -u -r1.24 AsyncAppender.java\n--- AsyncAppender.java  2001/11/17 01:04:21     1.24\n+++ AsyncAppender.java  2001/12/15 23:19:05\n@@ -104,6 +104,10 @@\n\n   public\n   void append(LoggingEvent event) {\n+    if (bf == null) {\n+       LogLog.warn(\"AsyncAppender closed.\");\n+       return;\n+    }\n     // Set the NDC and thread name for the calling thread as these\n     // LoggingEvent fields were not set at event creation time.\n     event.getNDC();", "id": 8945, "time": "2001-12-15T15:19:41Z", "creator": "ttoupin@jcafe.org", "creation_time": "2001-12-15T15:19:41Z", "is_private": false}, {"count": 2, "text": "\nThanks for the bug report. This was a nasty bug because it was very hard to\ncatch.\n\nIn AppenderSkeleton, doAppend method was changed from\n\n  public\n  synchronized \n  void doAppend(LoggingEvent event) {\n    if(closed) {\n      LogLog.error(\"Attempted to append to closed appender named [\"+name+\"].\");\n    }\n   ....\n\nto\n\n  public\n  synchronized \n  void doAppend(LoggingEvent event) {\n    if(closed) {\n      LogLog.error(\"Attempted to append to closed appender named [\"+name+\"].\");\n      return;\n    }\n   ...\n\nThe fix will be available in log4j 1.2 final.\n", "bug_id": 5444, "attachment_id": null, "id": 15812, "time": "2002-05-09T16:32:40Z", "creator": "ceki@apache.org", "creation_time": "2002-05-09T16:32:40Z", "tags": [], "is_private": false}]