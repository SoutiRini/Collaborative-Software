[{"count": 0, "tags": [], "bug_id": 12578, "attachment_id": null, "id": 22742, "time": "2002-09-12T15:03:06Z", "creator": "yair.lenga@ssmb.com", "creation_time": "2002-09-12T15:03:06Z", "is_private": false, "text": "My main JSP file include other JSP files, some of them are simply \"forward\" to\nthe real context page (also a JSP file). It looks that if page \"a\" does\n\"jsp:include\" to page \"b\", which will use \"jsp:forward\" to different page \"c\",\nthen the output of \"c\" will replace the output of \"a\".\n\nIt looks as if a \"forwarded\" in an included page will cause the \"main\" page to\nbe replaced by the \"forMy structure looks like:\n\nMain file \"a.jsp\"\n\n<h1> BEGIN </h1>\n<jsp:include page=\"a1.jsp\" />\n<jsp:include page=\"a2.jsp\" />\n<jsp:include page=\"a3.jsp\" />\n</h1> END </h1>\n\nThe small files a1.jsp, a2.jsp, a3.jsp contain:\na1.jsp: <jsp:forward page=\"a1x.jsp\" />\na2.jsp: <jsp:forward page=\"a2x.jsp\" />\na3.jsp: <jsp:forward page=\"a3x.jsp\" />\n\nThe files a1x.jsp, a2x.jsp, a3x.jsp contain:\na1x.jsp: <h1> a1x </h1>\na2x.jsp: <h1> a2x </h1>\na3x.jsp: <h1> a3x </h1>\n\nThe pages are placed into the ROOT context of a default TOMCAT install. When the\npage is fetched I was expecting:\nBEGIN\na1x\na2x\na3x\nEND\n\nInstead, I'm only seeing:\na1x\n\n\nIt looks as if the <page:forward> in \"a1.jsp\", cause the whole request to be\nforwarded to \"a1x.jsp\". Instead of just forwarding the \"a1.jsp\" request to\n\"a1x.jsp\", it behave as if the forward request was issues from \"a.jsp\".\n\nI checked the code with Jrun - and it behaves the way I expect it to be. I'm not\nif the specification are clean about this behavior, but this behavior is wrong.\nIt will cause a JSP page to behave differently if any included page is using the\n\"jsp:forward\" directive."}, {"count": 1, "tags": [], "bug_id": 12578, "attachment_id": null, "text": "See section 8.4 of the Servlet 2.3 spec:\n\"If output data exists in the response buffer that has not been committed, the\ncontent must cleared before the target servlet\u2019s service method is called. \"\n\nand\n\n\"Before the forward method of the RequestDispatcher interface returns, the\nresponse must be committed and closed by the servlet container.\"\n\nThis means when a jsp:forward is performed - the existing output buffer is\ncleared. Then after a jsp:foward is performed, the response is closed. Any other\ncode on that JSP will not be able to write to the response.\n", "id": 22746, "time": "2002-09-12T15:30:54Z", "creator": "funkman@joedog.org", "creation_time": "2002-09-12T15:30:54Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 12578, "attachment_id": null, "text": "I believe that the question is WHICH output buffer should be cleared. If page\n\"A\" does \"jsp:include\" to page \"B\", and page \"B\" does jsp:forward to page \"C\".\nShould the output buffer for page \"A\" or page \"B\" should be cleared ?\n\nAssuming that the standard does not address this issue, I think that\ninterpretation that emphasize reusable pages will prefer to prevent page \"B\",\nfrom having side effect on page \"A\".\n", "id": 22748, "time": "2002-09-12T16:20:03Z", "creator": "yair.lenga@ssmb.com", "creation_time": "2002-09-12T16:20:03Z", "is_private": false}]