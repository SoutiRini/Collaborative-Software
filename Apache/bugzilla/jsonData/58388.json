[{"count": 0, "tags": [], "text": "Reported by RV-Predict (a dynamic race detector) when running the test suite:\nData race on field org.apache.coyote.RequestInfo.stage: {{{\n    Concurrent read in thread T21 (locks held: {})\n ---->  at org.apache.coyote.RequestInfo.getStage(RequestInfo.java:172)\n        at org.apache.coyote.http11.Http11Nio2Processor.actionInternal(Http11Nio2Processor.java:520)\n        at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:924)\n        at org.apache.coyote.Request.action(Request.java:380)\n        at org.apache.catalina.connector.Request.cometClose(Request.java:2583)\n        at org.apache.catalina.connector.CometEventImpl.close(CometEventImpl.java:98)\n        at org.apache.catalina.comet.TestCometProcessor$AsyncCometCloseThread.run(TestCometProcessor.java:665)\n    T21 is created by T20\n        at org.apache.catalina.comet.TestCometProcessor$AsyncCometCloseValve.invoke(TestCometProcessor.java:648)\n\n    Concurrent write in thread T20 (locks held: {Monitor@78eabf38})\n ---->  at org.apache.coyote.RequestInfo.setStage(RequestInfo.java:176)\n        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1129)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\n        at org.apache.tomcat.util.net.Nio2Endpoint$SocketProcessor.doRun(Nio2Endpoint.java:1074)\n        at org.apache.tomcat.util.net.Nio2Endpoint$SocketProcessor.run(Nio2Endpoint.java:1033)\n        - locked Monitor@78eabf38 at org.apache.tomcat.util.net.Nio2Endpoint$SocketProcessor.run(Nio2Endpoint.java:1032)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    T20 is created by T19\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:1010)\n}}}", "is_private": false, "id": 185153, "creator": "yilong.li@runtimeverification.com", "time": "2015-09-12T16:32:42Z", "bug_id": 58388, "creation_time": "2015-09-12T16:32:42Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 58388, "attachment_id": null, "id": 185213, "time": "2015-09-13T21:37:08Z", "creator": "yilong.li@runtimeverification.com", "creation_time": "2015-09-13T21:37:08Z", "is_private": false, "text": "I don't know enough about the code here but shouldn't such \"state\" variable be declared as volatile or atomic to avoid memory visibility issues when altering state?"}, {"count": 2, "text": "Fixed in 8.0.x for 8.0.27 onwards.", "creator": "markt@apache.org", "attachment_id": null, "id": 185303, "time": "2015-09-17T08:20:33Z", "bug_id": 58388, "creation_time": "2015-09-17T08:20:33Z", "tags": [], "is_private": false}]