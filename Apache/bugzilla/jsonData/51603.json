[{"count": 0, "tags": [], "bug_id": 51603, "text": "Here are access.log entries for strange machines (worm infested machines?) that hammer on my Apache server with all sorts of completely bogus HTTP requests that are ACCEPTED by Apache.  Apache apparently sends something back to the remote end and I'd really like to know what data it is sending across the wire:\n\n190.3.214.212 - - [02/Aug/2011:05:48:09 +0200] \"F6)\\xa1\\xa8\\x91\\xb5z\\x15\\xb3\\xfa\\x19\\xe0R\\x16\\xccIG_\\x012\\x80\\x162\\xec\\xf5C1\\xa7\" 200 847\n93.166.90.65 - - [02/Aug/2011:01:23:42 +0200] \"\\xc1D*\\xe5/$gcin\\x8a\\x1f-I\\x16\\xf5\\xf7\\xa2\\x97\\xb8\\x16B\\xc7\\x95\\xae\\x11\\x99W\\x80z\\xb8\\xa0\\x03{\\x87\\x1e\\x19\\xe5\\x02\\x92\\xb9\\x84\\x84\" 200 847\n92.40.253.152 - - [02/Aug/2011:00:33:12 +0200] \"\\x12`\\xf1J\\xc7\\xb0c\\x149\\b\\x0e\\xdb\\xc7\\xde\\xac\" 200 847\n213.125.79.2 - - [01/Aug/2011:17:32:04 +0200] \"\\xab\\xf4+r\\xd8\\x8f6\\xf2\\x82\\xba\\x16\\x1a\\x8f\\x1d\\x037\\xd7lu\\x87k\\x90|\\x1ax\\xec\\xdf\\xc9?\\x8c\\xfbjX\\x96\\xfe\\xbe\\xc2l\\xf3J\\xda\\xd2\\x87!\\x94\\xb1\\x1c\\xf2\\x02p\\x02\\xab-\\xc1\\xe4`\\xf7\\xde\" 200 847\n212.183.140.13 - - [01/Aug/2011:18:25:45 +0200] \"\\x9a\\\\(|p\\xb0\\x9aoF\\xa6]u\\xaf\\xb8\\x84\\x0e\\xa9'_\\xd1\\xb2\\xa1\\x9aU\\x17K\\x83\\xe2\\xb6\\x06\\xfe4\\x14JO\\xf8\\xa2\\xc4\\xbcBT\\xb9\\x93\\xb9\\xcf\\xea\\xc9\\xd5\" 200 847\n213.125.79.2 - - [01/Aug/2011:18:46:40 +0200] \"\\bU?\\xc0\\x1ap\\xce\\x82_\" 200 847\n\nAs far as I know, which is rather little in this particular case, Apache should return an error whenever it encounters a malformed HTTP request.\n\n\nSincerely,\nMikael Lyngvig", "id": 148342, "time": "2011-08-02T20:34:11Z", "creator": "mikael@lyngvig.org", "creation_time": "2011-08-02T20:34:11Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 51603, "text": "Please provide your logging configuration.", "count": 1, "id": 148360, "time": "2011-08-03T18:31:43Z", "creator": "rpluem@apache.org", "creation_time": "2011-08-03T18:31:43Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 51603, "text": "The logging configuration is the default logging configuration; I have changed nothing:\n\n#\n# LogLevel: Control the number of messages logged to the error_log.\n# Possible values include: debug, info, notice, warn, error, crit,\n# alert, emerg.\n#\nLogLevel warn\n\n<IfModule log_config_module>\n    #\n    # The following directives define some format nicknames for use with\n    # a CustomLog directive (see below).\n    #\n    LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n    LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common\n\n    <IfModule logio_module>\n      # You need to enable mod_logio.c to use %I and %O\n      LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\" %I %O\" combinedio\n    </IfModule>\n\n    #\n    # The location and format of the access logfile (Common Logfile Format).\n    # If you do not define any access logfiles within a <VirtualHost>\n    # container, they will be logged here.  Contrariwise, if you *do*\n    # define per-<VirtualHost> access logfiles, transactions will be\n    # logged therein and *not* in this file.\n    #\n    CustomLog \"logs/access.log\" common\n\n    #\n    # If you prefer a logfile with access, agent, and referer information\n    # (Combined Logfile Format) you can use the following directive.\n    #\n    #CustomLog \"logs/access.log\" combined\n</IfModule>", "count": 2, "id": 148361, "time": "2011-08-03T18:42:20Z", "creator": "mikael@lyngvig.org", "creation_time": "2011-08-03T18:42:20Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 51603, "is_private": false, "count": 3, "id": 148362, "time": "2011-08-03T18:45:08Z", "creator": "covener@gmail.com", "creation_time": "2011-08-03T18:45:08Z", "text": "> I'd really like to know what data it is sending across the wire\n\nCan you capture and post what the response is?"}, {"count": 4, "tags": [], "creator": "mikael@lyngvig.org", "text": "I have checked the file sizes against the known website files and it appears that Apache returns the root item (GET /), in my case index.php, to the client.  So no security issue, just weird behavior.  I guess Apache should reject all malformed HTTP requests rather than returning the root item.", "id": 148363, "time": "2011-08-03T19:32:59Z", "bug_id": 51603, "creation_time": "2011-08-03T19:32:59Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 51603, "attachment_id": null, "id": 148364, "time": "2011-08-03T20:19:20Z", "creator": "trawick@apache.org", "creation_time": "2011-08-03T20:19:20Z", "is_private": false, "text": "I haven't looked, but is it mod_ssl returning the speaking-non-SSL-on-SSL-port message?"}, {"count": 6, "tags": [], "bug_id": 51603, "attachment_id": null, "id": 148365, "time": "2011-08-03T21:00:27Z", "creator": "mikael@lyngvig.org", "creation_time": "2011-08-03T21:00:27Z", "is_private": false, "text": "Hmm, I tried opening the URL as http://www.archangel.dk (the website), https://www.archangel.dk (shouldn't be open as the firewall blocks it) and https://www.archangel.dk:80.  The last attempt gave this result:\n\n90.185.163.243 - - [03/Aug/2011:22:53:18 +0200] \"\\x16\\x03\\x01\" 200 1279\n90.185.163.243 - - [03/Aug/2011:22:53:18 +0200] \"\\x16\\x03\\x01\" 200 1279\n\nI simply don't know enough HTTPS and HTTP to say whether it is really an error or just somebody hammering on my website using SSL on port 80, which could possibly explain the \"bizarre\" reaction by Apache that I am seeing.\n\nI can say that mod_ssl is not loaded.\n\nI don't know if there's really a problem at all or if it is just me being hyper-aggressive over somebody probing my website with SSL packets on port 80."}]