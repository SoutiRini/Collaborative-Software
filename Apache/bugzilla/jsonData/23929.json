[{"count": 0, "tags": [], "bug_id": 23929, "attachment_id": null, "text": "I use following construction to set request character encoding:\n\nif (request.getCharacterEncoding() == null) {\n        request.setCharacterEncoding(\"ISO8859-2\");\n}\n\nIn older versions of Tomcat (5.0.7 tested) everything works fine but in version\n5.0.12 this construction changes nothing - ISO8859-2 characters in parameter\nvalues are replaced with \"?\".\n\n$ java -version\njava version \"1.4.2\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.2-b28)\nJava HotSpot(TM) Client VM (build 1.4.2-b28, mixed mode)", "id": 45907, "time": "2003-10-20T09:10:27Z", "creator": "michal-apache@krause.cz", "creation_time": "2003-10-20T09:10:27Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 23929, "attachment_id": null, "text": "I doubt there's actually a bug with this functionality. The query string\ncharacter encoding handling did change, but it was previously broken.\nIf you want i18n in a portable fashion, use a POST.", "id": 45908, "time": "2003-10-20T09:58:28Z", "creator": "remm@apache.org", "creation_time": "2003-10-20T09:58:28Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 23929, "text": "Sorry, but I don't understand. Is there a bug in this or not? If it is, why did\nyou mark this report as invalid? If not, what I have to do to make it work in my\nconfiguration?\n\nI don't want to use POST, because HTTP RFC says when to use GET and when POST\nand I'm convinced that in my situation GET is better option and should be used.", "id": 45909, "time": "2003-10-20T10:30:49Z", "creator": "michal-apache@krause.cz", "creation_time": "2003-10-20T10:30:49Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "Sorry, there's no bug. BZ is not there to discuss design decisions. If you want\nto do so, post on tomcat-dev. The only standard for URL encoding is to use\nUTF-8, but nobody follows the standard. You can also now configure the URI\nencoding in the connector. If you insist on using i18n with URL parameters, the\nresult is that it won't work reliably, but of course, you're free to do what you\nwant ;-)\nPlease do not reopen the report.", "attachment_id": null, "id": 45910, "creator": "remm@apache.org", "time": "2003-10-20T10:37:55Z", "bug_id": 23929, "creation_time": "2003-10-20T10:37:55Z", "is_private": false}, {"count": 4, "tags": [], "text": "*** Bug 25848 has been marked as a duplicate of this bug. ***", "attachment_id": null, "id": 49983, "creator": "remm@apache.org", "time": "2004-01-03T09:16:51Z", "bug_id": 23929, "creation_time": "2004-01-03T09:16:51Z", "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 23929, "text": "*** Bug 25958 has been marked as a duplicate of this bug. ***", "id": 50196, "time": "2004-01-07T16:13:17Z", "creator": "remm@apache.org", "creation_time": "2004-01-07T16:13:17Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "creator": "remm@apache.org", "text": "From Mark:\n\nCharacter encoding has been the source of quite a bit of debate on the tomcat-\ndev list in recent weeks. There have been a few changes (see summary below) as \na result. Essentially some additional configuration options have been \nprovided. The UTF-8 issue (also reported in bug 22666) has also been fixed.\n\nCharacter encoding summary\n==========================\n\nThere are a number of situations where there may be a requirement to use non-\nUS ASCII characters in a URI. These include:\n- Parameters in the query string\n- Servlet paths\n\nThere is a standard for encoding URIs (http://www.w3.org/International/O-URL-\ncode.html) but this standard is not consistently followed by clients. This \ncauses a number of problems.\n\nThe functionality provided by Tomcat (4 and 5) to handle this less than ideal \nsituation is described below.\n\n1. The Coyote HTTP/1.1 connector has a useBodyEncodingForURI attribute which \nif set to true will use the request body encoding to decode the URI query \nparameters.\n  - The default value is true for TC4 (breaks spec but gives consistent \nbehaviour across TC4 versions)\n  - The default value is false for TC5 (spec compliant but there may be \nmigration issues for some apps)\n2. The Coyote HTTP/1.1 connector has a URIEncoding attribute which defaults to \nISO-8859-1.\n3. The parameters class (o.a.t.u.http.Parameters) has a QueryStringEncoding \nfield which defaults to the URIEncoding. It must be set before the parameters \nare parsed to have an effect.\n\nThings to note regarding the servlet API:\n1. HttpServletRequest.setCharacterEncoding() normally only applies to the \nrequest body NOT the URI.\n2. HttpServletRequest.getPathInfo() is decoded by the web container.\n3. HttpServletRequest.getRequestURI() is not decoded by container.\n\nOther tips:\n1. Use POST with forms to return parameters as the parameters are then part of \nthe request body.", "count": 6, "id": 50538, "time": "2004-01-14T13:03:35Z", "bug_id": 23929, "creation_time": "2004-01-14T13:03:35Z", "is_private": false}, {"count": 7, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 50540, "time": "2004-01-14T13:05:08Z", "bug_id": 23929, "creation_time": "2004-01-14T13:05:08Z", "is_private": false, "text": "*** Bug 26118 has been marked as a duplicate of this bug. ***"}, {"count": 8, "attachment_id": null, "bug_id": 23929, "text": "*** Bug 26393 has been marked as a duplicate of this bug. ***", "id": 51100, "time": "2004-01-24T08:05:43Z", "creator": "remm@apache.org", "creation_time": "2004-01-24T08:05:43Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "bug_id": 23929, "attachment_id": null, "text": "*** Bug 30255 has been marked as a duplicate of this bug. ***", "id": 61199, "time": "2004-07-27T20:41:37Z", "creator": "kin-man.chung@sun.com", "creation_time": "2004-07-27T20:41:37Z", "is_private": false}]