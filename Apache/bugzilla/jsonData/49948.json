[{"count": 0, "tags": [], "creator": "axel.fontaine@kvb.de", "text": "Currently the RemoteIpValve always hides the x-forwarded-for header from the application. All other headers are preserved. This is very inconsistent.\n\nWe are implementing a proxy in tomcat, that sits behing an nginx instance. The nginx correctly passes us the headers. We are however unable to extend them properly. Our only option is to reconstruct the x-forwarded-for based on the (incomplete) information available through the servlet api.\n\nWhether the x-forwarded-for header is suppressed or not should at least be a configuration option.", "id": 139924, "time": "2010-09-17T06:44:28Z", "bug_id": 49948, "creation_time": "2010-09-17T06:44:28Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "The RemoteIpValve is currently working as designed. It is designed to work with 'standard' web applications, not for an application that is acting as a reverse proxy. In that case, you probably don't want the RemoteIpValve in the processing chain at all.\n\nIf you want some of the functionality of the RemoteIpValve then you'll need to implement your own valve.\n\nAn enhancement request - with a patch - will get considered but like all such enhancement requests the complexity added will be weighed against the benefit of the feature(s) it provides.", "id": 140464, "time": "2010-10-04T17:45:41Z", "bug_id": 49948, "creation_time": "2010-10-04T17:45:41Z", "is_private": false}]