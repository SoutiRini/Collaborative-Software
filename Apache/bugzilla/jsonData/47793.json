[{"count": 0, "tags": [], "text": "Created attachment 24220\nJMeter testplan which fails after starting\n\nWhen using the following Javascript expression on the right side of an UDV\ndefinition, the test fails at run time with a report in the jmeter.log:\n\n\nexpression:\n${__javaScript('${key}'=='x'?${key}:${E1}${E2})}\n\njmeter.log:\n2009/09/07 17:19:29 ERROR - jmeter.threads.JMeterThread: Error while processing\nsampler 'HTTP Request' : org.mozilla.javascript.EvaluatorException: missing ;\nbefore statement (<cmd>#1)\n    at\norg.mozilla.javascript.DefaultErrorReporter.runtimeError(DefaultErrorReporter.java:98)\n    at\norg.mozilla.javascript.DefaultErrorReporter.error(DefaultErrorReporter.java:85)\n    at org.mozilla.javascript.Parser.addError(Parser.java:126)\n    at org.mozilla.javascript.Parser.reportError(Parser.java:132)\n    at org.mozilla.javascript.Parser.statementHelper(Parser.java:1175)\n    at org.mozilla.javascript.Parser.statement(Parser.java:623)\n    at org.mozilla.javascript.Parser.parse(Parser.java:355)\n    at org.mozilla.javascript.Parser.parse(Parser.java:293)\n    at org.mozilla.javascript.Context.compileImpl(Context.java:2238)\n    at org.mozilla.javascript.Context.compileString(Context.java:1284)\n    at org.mozilla.javascript.Context.compileString(Context.java:1273)\n    at org.mozilla.javascript.Context.evaluateString(Context.java:1129)\n    at org.apache.jmeter.functions.JavaScript.execute(JavaScript.java:89)\n    at\norg.apache.jmeter.engine.util.CompoundVariable.execute(CompoundVariable.java:143)\n    at\norg.apache.jmeter.engine.util.CompoundVariable.execute(CompoundVariable.java:112)\n    at\norg.apache.jmeter.testelement.property.FunctionProperty.getStringValue(FunctionProperty.java:89)\n    at\norg.apache.jmeter.modifiers.UserParameters.setValues(UserParameters.java:144)\n    at\norg.apache.jmeter.modifiers.UserParameters.process(UserParameters.java:130)\n    at\norg.apache.jmeter.threads.JMeterThread.runPreProcessors(JMeterThread.java:636)\n    at\norg.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:333)\n    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:243)\n    at java.lang.Thread.run(Unknown Source)", "is_private": false, "bug_id": 47793, "id": 130185, "time": "2009-09-07T08:20:48Z", "creator": "chors@it-beratung-krueger.de", "creation_time": "2009-09-07T08:20:48Z", "attachment_id": 24220}, {"count": 1, "tags": [], "creator": "sebb@apache.org", "text": "There's a bug in the HTTP Request Parameters:\n\njakarta.apache,org should be jakarta.apache.org\n\n$key} should be ${key}\n\nAlso, the CSV file contents may be relevant, but are not provided.", "id": 130186, "attachment_id": null, "bug_id": 47793, "creation_time": "2009-09-07T08:55:10Z", "time": "2009-09-07T08:55:10Z", "is_private": false}, {"text": "(In reply to comment #1)\n> There's a bug in the HTTP Request Parameters:\n> \n> jakarta.apache,org should be jakarta.apache.org\n> \n> $key} should be ${key}\n> \n> Also, the CSV file contents may be relevant, but are not provided.\n\nYes, there is mistyping in the http Parameters of the http sampler, but it is not relevant. Just tried with corrected version. data.csv will be provided.", "tags": [], "bug_id": 47793, "attachment_id": null, "count": 2, "id": 130187, "time": "2009-09-07T08:59:59Z", "creator": "chors@it-beratung-krueger.de", "creation_time": "2009-09-07T08:59:59Z", "is_private": false}, {"count": 3, "tags": [], "creator": "chors@it-beratung-krueger.de", "text": "Created attachment 24221\nCSV sample data\n\nHere is the employed CSV data set. Only numbers and names.", "id": 130188, "attachment_id": 24221, "bug_id": 47793, "creation_time": "2009-09-07T09:02:28Z", "time": "2009-09-07T09:02:28Z", "is_private": false}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "text": "There's no definition of the variable \"value\".\n\nBut the main problem is that the following is not valid Javascript:\n\n'${key}'=='x'?${key}:${E1}${E2}\n\nIf \"key\" is a string, then the ${key} part of the ternary needs to be enclosed in single-quotes; the second part of the ternary result then needs to be quoted as well.\n\nJMeter cannot help it if the Javascript error is misleading.", "id": 130189, "time": "2009-09-07T09:15:37Z", "bug_id": 47793, "creation_time": "2009-09-07T09:15:37Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "chors@it-beratung-krueger.de", "text": "Thank you. That helped my understanding of using Javascript in JMeter greatly. Now, I got the sample test plan running and working as I want it.", "id": 130191, "time": "2009-09-07T10:24:31Z", "bug_id": 47793, "creation_time": "2009-09-07T10:24:31Z", "is_private": false, "attachment_id": null}]