[{"count": 0, "tags": [], "creator": "fhanik@apache.org", "text": "If this variable is not visible, it makes the setenv.sh script sort of useless\n\nIndex: bin/catalina.sh\n===================================================================\n--- bin/catalina.sh\t(revision 1103812)\n+++ bin/catalina.sh\t(working copy)\n@@ -116,6 +116,9 @@\n # Ensure that any user defined CLASSPATH variables are not used on startup,\n # but allow them to be specified in setenv.sh, in rare case when it is needed.\n CLASSPATH=\n+if [ -z \"$CATALINA_BASE\" ] ; then\n+  CATALINA_BASE=\"$CATALINA_HOME\"\n+fi\n \n if [ -r \"$CATALINA_BASE\"/bin/setenv.sh ]; then\n   . \"$CATALINA_BASE\"/bin/setenv.sh\n@@ -163,10 +166,8 @@\n   fi\n fi\n \n-if [ -z \"$CATALINA_BASE\" ] ; then\n-  CATALINA_BASE=\"$CATALINA_HOME\"\n-fi\n \n+\n # Add tomcat-juli.jar and bootstrap.jar to classpath\n # tomcat-juli.jar can be over-ridden per instance\n if [ ! -z \"$CLASSPATH\" ] ; then", "id": 146359, "attachment_id": null, "bug_id": 51206, "creation_time": "2011-05-16T17:54:55Z", "time": "2011-05-16T17:54:55Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 51206, "is_private": false, "text": "The fix will have to be modified a little bit to avoid calling CATALINA_HOME/bin/setenv.sh twice", "id": 146360, "time": "2011-05-16T18:13:27Z", "creator": "fhanik@apache.org", "creation_time": "2011-05-16T18:13:27Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "markt@apache.org", "is_private": false, "id": 147313, "time": "2011-06-21T07:54:23Z", "bug_id": 51206, "creation_time": "2011-06-21T07:54:23Z", "tags": [], "text": "Rainer implemented this in 7.0.x and it will be included in 7.0.17 onwards."}, {"count": 3, "attachment_id": null, "bug_id": 51206, "is_private": false, "id": 147611, "time": "2011-06-29T14:23:32Z", "creator": "markt@apache.org", "creation_time": "2011-06-29T14:23:32Z", "tags": [], "text": "Proposed for 6.0.x"}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 147898, "time": "2011-07-13T15:26:09Z", "bug_id": 51206, "creation_time": "2011-07-13T15:26:09Z", "text": "This has been fixed in 6.0.x and will be included in 6.0.33 onwards."}]