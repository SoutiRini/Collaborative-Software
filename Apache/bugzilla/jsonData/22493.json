[{"count": 0, "tags": [], "bug_id": 22493, "text": "When viewing a directory index listing (Fancy Indexing) with mod_mime_magic\nloaded, some C/C++ source code/header files (.c, .cc, .h) disappear from the\nlisting.\n\nAll these files begin with C/C++ multiline comments (i.e., begin with /*).\n\nThe error message given is:\n[Mon Aug 18 00:34:46 2003] [error] [client xx.xxx.xxx.xxx] mod_mime_magic: unexp\nected state 3; could be caused by bad data in magic file, referer: http://bwiber\ng.dyndns.org/kurser/exjobb/files/\n\nThe example files are:\nhttp://bwiberg.idz.net/kurser/exjobb/files/miscellaneous/endian.c\nhttp://bwiberg.idz.net/kurser/exjobb/files/trace-based%20simulation/sourcedrop_errmodel.cc\nhttp://bwiberg.idz.net/kurser/exjobb/files/trace-based%20simulation/sourcedrop_errmodel.h\n\nThe magic file used is the one bundled with Apache (\"magic\"):\n\nMD5 checksum:\nd6fe64c5fe7b01857ba643f3405b3da7 *magic\nd6fe64c5fe7b01857ba643f3405b3da7 *magic.default\n\n2003-07-09  14:37            13 341 magic\n2002-03-26  10:41            13 341 magic.default\n\nAn example directory listing (where files are missing) is shown below:\n\n                  Index of /kurser/exjobb/files/miscellaneous\n\n Icon   Name                    Last modified      Size  Description\n  __________________________________________________________________________\n [DIR]  Parent Directory                             -\n [CMP]  miscellaneous.tar.gz    20-Jun-2003 14:52  3.2K  GZIP compressed document\n [TXT]  scale_test.pl           21-Aug-2002 12:46  6.1K  Perl script\n  __________________________________________________________________________\n\n\nChanging the contents of the .c/.cc/.h files so that they begin with something\nelse, e.g. a slash followed by a newline and then asterisks, makes the files\nappear in the directory index listing as they should. (Of course, that breaks\nthe C/C++ source code.) Disabling mod_mime_magic is another workaround. The\ncorrect directory listing is shown below:\n\n                  Index of /kurser/exjobb/files/miscellaneous\n\n Icon   Name                    Last modified      Size  Description\n  __________________________________________________________________________\n [DIR]  Parent Directory                             -\n [   ]  endian.c                03-Nov-2002 16:38  1.7K\n [CMP]  miscellaneous.tar.gz    20-Jun-2003 14:52  3.2K  GZIP compressed document\n [   ]  scale_test.pl           21-Aug-2002 12:46  6.1K  Perl script\n  __________________________________________________________________________", "id": 42876, "time": "2003-08-17T23:09:20Z", "creator": "bjorn.wiberg@outlook.com", "creation_time": "2003-08-17T23:09:20Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "vxbush@verizon.net", "is_private": false, "id": 71440, "attachment_id": null, "bug_id": 22493, "creation_time": "2005-02-23T23:15:18Z", "time": "2005-02-23T23:15:18Z", "text": "I'm seeing this same error, but when running a very simple PHP script to test\nand verify that PHP is working normally. The script contains just threelines:\n\n<?\necho \"mime type for test1.xls: \" . mime_content_type(\"temp1.xls\"). \"\\r\\n\";\necho \"mime type for image: \" . mime_content_type(\"Sample.jpg\") . \"\\r\\n\";\nphpinfo();\n?>\n\nMy OS: Windows 2000 SP 4\nusing PHP 5.0.4-dev"}, {"count": 2, "tags": [], "bug_id": 22493, "attachment_id": null, "id": 97714, "time": "2007-01-06T04:08:02Z", "creator": "andrew@bramp.freeserve.co.uk", "creation_time": "2007-01-06T04:08:02Z", "is_private": false, "text": "This bug was still occurring in Apache 2.0.54, however I've just upgraded to\n2.0.59 and the problem has disappeared."}, {"count": 3, "tags": [], "bug_id": 22493, "attachment_id": null, "id": 97717, "time": "2007-01-06T06:26:52Z", "creator": "trawick@apache.org", "creation_time": "2007-01-06T06:26:52Z", "is_private": false, "text": "Both commenters here were using Windows.  And 2.0.56 had this fix:\n\n  *) mod_mime_magic: Handle CRLF-format magic files so that it works with\n     the default installation on Windows.  [me]\n\nClosing...\n"}]