[{"count": 0, "tags": [], "text": "Hi,\n\nRan some tests and the HTTPClient sampler did not seem to be adding the \n\nAuthorization: Basic (hash)\n\nto the header. Easy to work around as it can be hardcoded into the header \nmanager.", "attachment_id": null, "id": 94173, "creator": "rarokni@hotmail.co.uk", "time": "2006-09-27T15:48:39Z", "bug_id": 40620, "creation_time": "2006-09-27T15:48:39Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 40620, "text": "Hi,\n\nFound that the Digest Auth works but it is the Basic Auth that fails.", "id": 94799, "time": "2006-10-13T03:46:56Z", "creator": "rarokni@hotmail.co.uk", "creation_time": "2006-10-13T03:46:56Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 40620, "attachment_id": null, "id": 94821, "time": "2006-10-13T12:09:35Z", "creator": "sebb@apache.org", "creation_time": "2006-10-13T12:09:35Z", "is_private": false, "text": "Works OK for me in 2.2 and current nightly when tested against Tomcat Manager\n(which uses Basic authentication).\n\nCan you test with the current nightly and see if that has the problem?"}, {"count": 3, "tags": [], "bug_id": 40620, "attachment_id": null, "text": "I tried with nightly build jakarta-jmeter-2-2.20061127 and it still did not \nwork. I will attach a file with with I tried but that did not work.\n\nShould I send you some debug logging?", "id": 96362, "time": "2006-11-29T07:06:27Z", "creator": "bernd.goetz@iaeth.ch", "creation_time": "2006-11-29T07:06:27Z", "is_private": false}, {"count": 4, "tags": [], "text": "Created attachment 19201\nTest definition with Auth Manager", "attachment_id": 19201, "id": 96363, "creator": "bernd.goetz@iaeth.ch", "time": "2006-11-29T07:37:02Z", "bug_id": 40620, "creation_time": "2006-11-29T07:37:02Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 40620, "text": "You can enable DEBUG by selecting the Auth Manager and using Help/Enable Debug.\n\nThis might show why the Auth is not working. If you can't work it out, please \nattach the log to this issue - replace any sensitive data first!!", "id": 96369, "time": "2006-11-29T09:45:04Z", "creator": "sebb@apache.org", "creation_time": "2006-11-29T09:45:04Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "bernd.goetz@iaeth.ch", "attachment_id": 19202, "id": 96372, "time": "2006-11-29T10:17:07Z", "bug_id": 40620, "creation_time": "2006-11-29T10:17:07Z", "is_private": false, "text": "Created attachment 19202\nJMeter 2.2 Release log file\n\n1. Started JMeter 2.2\n2. Loaded test file\n3. Select Authorization Manager, enable debug in Help Menu\n4. Run the test\nThis is the log file for this"}, {"count": 7, "tags": [], "bug_id": 40620, "text": "Created attachment 19203\nJMeter 2.2 nightly build 20061127 log file\n\n1. Started JMeter 2.2 nightly build 20061127\n2. Loaded test file\n3. Select Authorization Manager, enable debug in Help Menu\n4. Run the test\nThis is the log file for this", "id": 96373, "time": "2006-11-29T10:18:28Z", "creator": "bernd.goetz@iaeth.ch", "creation_time": "2006-11-29T10:18:28Z", "is_private": false, "attachment_id": 19203}, {"count": 8, "tags": [], "bug_id": 40620, "attachment_id": 19204, "text": "Created attachment 19204\nSimple test definition", "id": 96374, "time": "2006-11-29T10:19:23Z", "creator": "bernd.goetz@iaeth.ch", "creation_time": "2006-11-29T10:19:23Z", "is_private": false}, {"count": 9, "tags": [], "text": "Hi,\n\nThis now works with exception of users with @ sign in name for example  \ntest@test.com", "attachment_id": null, "bug_id": 40620, "id": 96777, "time": "2006-12-11T14:36:08Z", "creator": "rarokni@hotmail.co.uk", "creation_time": "2006-12-11T14:36:08Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 40620, "text": "(In reply to comment #9)\n> Hi,\n> This now works with exception of users with @ sign in name for example  \n> test@test.com\n\nYes, the @ is currently used to separate the name from the realm (for NTLM); it \nwas a quick hack (which has turned out to be a nuisance...)\n\nAre you saying that basic auth works OK for you in 2.2 provided that the user \nname does not have an \"@\" in it? Or that basic auth works in the nightly?", "count": 10, "id": 96790, "time": "2006-12-12T02:55:08Z", "creator": "sebb@apache.org", "creation_time": "2006-12-12T02:55:08Z", "is_private": false}, {"count": 11, "tags": [], "creator": "bernd.goetz@iaeth.ch", "text": "Did you change the source since 29 November? Should I retest it? It did not work\nwith the nightly at that time.", "id": 96791, "time": "2006-12-12T03:23:48Z", "bug_id": 40620, "creation_time": "2006-12-12T03:23:48Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 40620, "attachment_id": null, "text": "(In reply to comment #11)\n> Did you change the source since 29 November? Should I retest it? It did not \nwork\n> with the nightly at that time.\n\nYes, the source has been changed since then, but not in that area, so probably \nnot worth retesting. Sorry to say I have not had time to check your \nattachments. Perhaps later this week.", "id": 96799, "time": "2006-12-12T05:57:30Z", "creator": "sebb@apache.org", "creation_time": "2006-12-12T05:57:30Z", "is_private": false}, {"count": 13, "tags": [], "text": "As far as I know this is now working.\n\nI've also updated the Auth Manager to have separate Domain and Realm fields.\n\nSee the recent nightly build:\n\nhttp://people.apache.org/builds/jakarta-jmeter/nightly/\n\nIf there is still a problem, please re-open the bug with further details.", "attachment_id": null, "id": 99216, "creator": "sebb@apache.org", "time": "2007-02-10T04:18:11Z", "bug_id": 40620, "creation_time": "2007-02-10T04:18:11Z", "is_private": false}, {"count": 14, "tags": [], "bug_id": 40620, "attachment_id": null, "text": "I tested it and it works now, at least for the regular ports 80 and 443.\nHowever, e.g. for port 8080, it doesn't. In test environment, it is common to\nuse non-standard port numbers. I hope you don't mind, that I reopen the entry here.\n\nFurthermore, I see that the request header does not appear in the \"Request\" tab\nof View Result Tree Listener. But that might be on purpose, I'm not sure.", "id": 99242, "time": "2007-02-11T09:01:16Z", "creator": "bernd.goetz@iaeth.ch", "creation_time": "2007-02-11T09:01:16Z", "is_private": false}, {"count": 15, "attachment_id": null, "creator": "sebb@apache.org", "text": "I did all my testing against local ports 808x so  I don't understand why it \nshould work for you using 80 and 443 but not 8080. There is no code that \nchecks the port numbers as far as I am aware.\n\nPlease can you say exactly what is not working now: \nis it just Basic auth? \nIs it the same for both the Java and Httpclient samplers?\n\nThe Auth header is not shown in the Tree View. This is deliberate.", "id": 99247, "time": "2007-02-11T10:40:25Z", "bug_id": 40620, "creation_time": "2007-02-11T10:40:25Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 40620, "text": "I refer to the class org.apache.jmeter.protocol.http.control.AuthManager and the\nmethod \n\npublic Authorization getAuthForURL(URL url)\n\nThe code in there only works for port 80 and 443. Are we talking about the same\nthing here? I refer to the nightly build from \"10-Feb-2007 04:17\".\n\nI'm only testing it with the HTTP client - what do you mean with 'Java samplers'\nin this context? I'm not aware that Basic Authentication is applicable with RMI\nor RMI/IIOP.", "count": 16, "id": 99257, "time": "2007-02-11T14:06:17Z", "creator": "bernd.goetz@iaeth.ch", "creation_time": "2007-02-11T14:06:17Z", "is_private": false}, {"count": 17, "tags": [], "bug_id": 40620, "attachment_id": null, "text": "I see what you mean - it looks as though it only handles 80 and 443.\n\nHowever, what this code is doing is to allow for matching http://a.b.c.d/ and \nhttp://a.b.c.d:80/ equally. Likewise for https and 443. Messy - but it does \nwork as far as I can tell.\n\nI have added some debug to the Auth Manager and created a new build.\n\nTo enable the debug, set the following jmeter property:\n\nlog_level.jmeter.protocol.http.control.AuthManager=DEBUG\n\nThe reference to Java was to the default HTTP (i.e. Java-provided \nimplementation) sampler, as opposed to the HTTP HttpClient sampler.\n", "id": 99258, "time": "2007-02-11T15:17:45Z", "creator": "sebb@apache.org", "creation_time": "2007-02-11T15:17:45Z", "is_private": false}, {"count": 18, "tags": [], "creator": "bernd.goetz@iaeth.ch", "attachment_id": null, "id": 99345, "time": "2007-02-13T15:12:05Z", "bug_id": 40620, "creation_time": "2007-02-13T15:12:05Z", "is_private": false, "text": "Still does not help me much with typical test ports like 8080.\n\nOk, I sat down and wrote such a compare method. I attached a simple class and a\njunit test case class to this bug. Here's a sketch of the method\ngetAuthforURL(.) in AuthManager, be aware that this is coded away without any\ntesting as I did not have the time to setup the development environment for\nJMeter properly:\n\npublic Authorization getAuthForURL(URL url) {\n\tif (!isSupportedProtocol(url)) {\n\t\treturn null;\n\t}\n\tfor (PropertyIterator iter = getAuthObjects().iterator(); iter.hasNext();) {\n\t\tAuthorization auth = (Authorization) iter.next().getObjectValue();\n\t\tURL url2 = new URL(auth.getURL());\n\t\tlog.debug(\"Checking match against auth'n entry: \" + url2);\n\t\tif (URLCompare.isIncluded(url2, url)) {\n\t\t\tlog.debug(\"Matched, request url '\" + url + \n\t\t\t\t\t\"' matches authorization url '\" + url2 + \"'\");\n\t\t\treturn auth;\n\t\t}\n\t\tlog.debug(\"Did not match\");\n\t}\n\tlog.debug(\"No authorization url matched request url, authorization header not\nadded\");\n\treturn null;\n}\n\nThe method gets much leaner and more readable in this way.\n\nYou can migrate my code into yours in that class. Just add my name in the class\nas a co-author or something, if you agree. Of course, the test cases are also\nvery valuable, they tell what that method is able to do and what not. However\nI'm not sure how you would integrate them into the JMeter code base."}, {"count": 19, "tags": [], "creator": "bernd.goetz@iaeth.ch", "text": "Created attachment 19582\nURL comparison code\n\nURL comparison code to integrate into the JMeter code base.", "id": 99346, "time": "2007-02-13T15:13:13Z", "bug_id": 40620, "creation_time": "2007-02-13T15:13:13Z", "is_private": false, "attachment_id": 19582}, {"count": 20, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 99348, "time": "2007-02-13T16:17:55Z", "bug_id": 40620, "creation_time": "2007-02-13T16:17:55Z", "is_private": false, "text": "(In reply to comment #18)\n> Still does not help me much with typical test ports like 8080.\n\nI've added some unit tests for port 8080 and they work; furthermore my testing \nwas against a local Tomcat installation on port 8080, so I don't understand \nwhy it is not working for you.\n\nWhat did the debug say?\n\nAre you sure it is not some other problem?"}, {"count": 21, "tags": [], "bug_id": 40620, "text": "Tested it and got it! The line\n\n...\nif (s1.startsWith(uRL) || s2 != null && s2.startsWith(uRL))\n...\n\nsaves the day! In my case, the s1.startsWith(uRL) is correct, that's why it\nworks, even when url2 is null.\n\nOk, works now.", "id": 99365, "time": "2007-02-14T04:15:09Z", "creator": "bernd.goetz@iaeth.ch", "creation_time": "2007-02-14T04:15:09Z", "is_private": false, "attachment_id": null}, {"count": 22, "tags": [], "bug_id": 40620, "text": "(In reply to comment #21)\n> Tested it and got it! The line\n> ...\n> if (s1.startsWith(uRL) || s2 != null && s2.startsWith(uRL))\n\nWhich has been in the code for some while now.\n\n> ...\n> saves the day! In my case, the s1.startsWith(uRL) is correct, that's why it\n> works, even when url2 is null.\n> Ok, works now.\n\nSo what has changed?", "id": 99370, "time": "2007-02-14T05:51:36Z", "creator": "sebb@apache.org", "creation_time": "2007-02-14T05:51:36Z", "is_private": false, "attachment_id": null}, {"count": 23, "tags": [], "bug_id": 40620, "attachment_id": null, "text": "Good question. I did my initial tests with basic authentication quite a while\nago, so the only explanation is a configuration mistake on my side at that time.", "id": 99377, "time": "2007-02-14T06:26:49Z", "creator": "bernd.goetz@iaeth.ch", "creation_time": "2007-02-14T06:26:49Z", "is_private": false}, {"count": 24, "tags": [], "bug_id": 40620, "attachment_id": null, "text": "OK, marking the problem as fixed", "id": 99383, "time": "2007-02-14T07:50:08Z", "creator": "sebb@apache.org", "creation_time": "2007-02-14T07:50:08Z", "is_private": false}]