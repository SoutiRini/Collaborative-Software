[{"count": 0, "tags": [], "creator": "Lukas.Pietsch@pluto.uni-freiburg.de", "text": "When I embed Truetype fonts as CID fonts in a PDF file with FOP 0.2.0, the \ncharacters appear fine in the PDF, but copying-and-pasting them from the PDF \nwith Acrobat Reader's (5.0) text selection tool does not work. All characters \nare reduced to spaces.\nIs this an issue of how the font information gets written into the PDF?", "id": 8730, "time": "2001-12-10T01:08:52Z", "bug_id": 5335, "creation_time": "2001-12-10T01:08:52Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 5335, "attachment_id": null, "text": "I'm not sure it's a FOP's problem. Just tested occasional pdf with Japanese\nletters - http://www.morisawa.co.jp/font/info/pdf/AbtNewCID.pdf and it behaves\nthe same way: I cannot copy'n'pase japanese text. I'll close the bug, but if you\nthink I'm wrong, feel free to reopen it and provide an example, please.", "id": 26896, "time": "2002-11-24T16:07:11Z", "creator": "oleg@tkachenko.com", "creation_time": "2002-11-24T16:07:11Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 5335, "attachment_id": null, "text": "I think that this is FOP's problem caused by wrong CMap.\n\nI can copy and paste japanese text\nhttp://www.morisawa.co.jp/font/info/pdf/AbtNewCID.pdf\n, because this pdf file is collectly generated.\n\nFOP use the value of 'UCS' as the CIDSystemInfo of PDF.\nAnd FOP allocate with original sequential value for each glyph.\n\nWhen you copy and paste any text, PDFReader try to encode\nto correct character encoding (for examples, Adobe-Japan-1),\nbut there is no information to mapping.\n\nIf you want to copy and paste, FOP must create PDF using\ncorrect Encoding and CIDSystemInfo.\n\nThese kind of problem's details, see\nhttp://marc.theaimsgroup.com/?l=fop-dev&m=101408636328343&w=2\n", "id": 26912, "time": "2002-11-25T00:33:50Z", "creator": "ishigami@victokai.co.jp", "creation_time": "2002-11-25T00:33:50Z", "is_private": false}, {"count": 3, "text": "Created attachment 3939\nJapanese sample pdf and fo files generated by FOP", "bug_id": 5335, "attachment_id": 3939, "id": 26913, "time": "2002-11-25T00:35:08Z", "creator": "ishigami@victokai.co.jp", "creation_time": "2002-11-25T00:35:08Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 5335, "attachment_id": null, "text": "See http://marc.theaimsgroup.com/?l=fop-dev&m=103839237726705&w=2", "id": 27055, "time": "2002-11-27T14:23:08Z", "creator": "oleg@tkachenko.com", "creation_time": "2002-11-27T14:23:08Z", "is_private": false}, {"count": 5, "text": "Sample ToUnicode CMap (with explanations below):\n\n--------\n/CIDInit /ProcSet findresource begin \n12 dict begin \nbegincmap \n/CIDSystemInfo <<\n/Registry (UniqueName) /Ordering (FOP) /Supplement 0 >> def\n/CMapName /UniqueName def\n/CMapType 2 def\n1 begincodespacerange \n<0000> <ffff> \nendcodespacerange\n6 beginbfchar\n<0005> <0041>\n<0006> <0042>\n<0007> <0043>\n<0008> <0044>\n<0009> <0045>\n<000A> <0046>\nendbfchar\nendcmap \nCMapName currentdict /CMap defineresource pop \nend end\n---------\n\nLooks like normal CMap. I'll point out some differences:\n\n/Registry and /CMapName must be unique and equal, so make up some names. \nFont name for which ToUnicode cmap was generated is ok here. Just copy value\n/Name from /Font dictionary.\n\nCMapType for ToUnicode CMaps is 2.\n\nbegincodespacerange must be as shown above.\n\nbeginbfchar section has format:\n<glyph> <unicode>\n\nThere can be more beginbfchar sections, each can have no more than 100 entries. \nSection in sample says that glyph 5 is A, glyph 6 is B and so on.\n\nThere are also beginbfrange sections, but I dont think they will be of any use here.\n\nIt is better not to emit structural comments (%%) or /XUID or /UIDOffset or all\nthe other crap. There are useless here and misleading.\n\nAll above taken from:\nhttp://partners.adobe.com:80/asn/developer/pdfs/tn/5411.ToUnicode.pdf\nand checked by hand. It works at least with Acrobat Reader 5.0.\n\nDo I look like I wanted this feature badly?:-) Mail me for more info.\n", "bug_id": 5335, "attachment_id": null, "id": 29937, "time": "2003-01-23T14:46:15Z", "creator": "gracjan@acchsh.com", "creation_time": "2003-01-23T14:46:15Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 5335, "attachment_id": null, "text": "You sound like you're up to the task of doing a fix for this. Wanna try? Please \nrealize that we're already short on resources and you shouldn't count on \nanybody fixing this soon enough for you. OpenSource sometimes involves doing \nsomething yourself and send in a patch for functionality badly needed. Thanks \nfor understanding.", "id": 29938, "time": "2003-01-23T14:57:08Z", "creator": "jeremias@apache.org", "creation_time": "2003-01-23T14:57:08Z", "is_private": false}, {"count": 7, "tags": [], "creator": "jeremias@apache.org", "text": "*** Bug 28705 has been marked as a duplicate of this bug. ***", "id": 64100, "time": "2004-09-23T10:18:41Z", "bug_id": 5335, "creation_time": "2004-09-23T10:18:41Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 5335, "attachment_id": null, "text": "This issue has been fixed in FOray CVS, and should be available in FOray 0.2: \nhttp://www.foray.org/release.html.", "id": 64107, "time": "2004-09-23T13:52:14Z", "creator": "vic@outfitr.com", "creation_time": "2004-09-23T13:52:14Z", "is_private": false}, {"count": 9, "attachment_id": 17104, "bug_id": 5335, "text": "Created attachment 17104\nFOP 0.20.5 generates ToUnicode maps for CID embedded TTF fonts\n\nThis is a patch that makes FOP 0.20.5 generate ToUnicode maps for CID embedded\nTTF fonts. This patch is using some code from FOray.\nWith that patch you can finally cut / copy text from PDFs with embedded TTF CID\nfonts generated by FOP. So you don't need -enc ansi fonts anymore.", "id": 83077, "time": "2005-12-01T15:53:51Z", "creator": "ono@java.pl", "creation_time": "2005-12-01T15:53:51Z", "tags": [], "is_private": false}, {"count": 10, "tags": [], "bug_id": 5335, "attachment_id": 17203, "text": "Created attachment 17203\nToUnicode generation for FOP 0.90 TRUNK\n\nThis is ToUnicode patch version for 0.90 TRUNK. Can be included before FOray\nchanges will arrive so users can have Copy & Paste.", "id": 83568, "time": "2005-12-12T19:27:25Z", "creator": "ono@java.pl", "creation_time": "2005-12-12T19:27:25Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 5335, "attachment_id": null, "text": "*** Bug 40081 has been marked as a duplicate of this bug. ***", "id": 91839, "time": "2006-08-02T19:30:45Z", "creator": "jeremias@apache.org", "creation_time": "2006-08-02T19:30:45Z", "is_private": false}, {"count": 12, "tags": [], "creator": "bdelacretaz@codeconsult.ch", "text": "The attachment of comment #10 apparently contains code coming from FOray, see\nbug #40467", "id": 93350, "time": "2006-09-11T15:32:15Z", "bug_id": 5335, "creation_time": "2006-09-11T15:32:15Z", "is_private": false, "attachment_id": null}, {"count": 13, "text": "(In reply to comment #12)\n> The attachment of comment #10 apparently contains code coming from FOray, see\n> bug #40467\n\nRecent updates to this thread were brought to my attention for the purpose of\nobtaining permission for FOP to use the mentioned FOray code. FOP may freely use\nthe code mentioned or any other FOray code as it wishes, and FOP may consider it\ncontributed by FOray.\n\nIt pains me a bit that we are doing the cut-and-paste thing, but this is perhaps\nmy fault for being so slow to release FOray 0.2. I did an aXSL release last week\nand hope to do a FOray release within the next two weeks, not because FOray as a\nwhole is ready to release, but I think the font code is.\n", "bug_id": 5335, "attachment_id": null, "id": 93353, "time": "2006-09-11T16:17:15Z", "creator": "vic@outfitr.com", "creation_time": "2006-09-11T16:17:15Z", "tags": [], "is_private": false}, {"count": 14, "tags": [], "creator": "bdelacretaz@codeconsult.ch", "attachment_id": null, "id": 93962, "time": "2006-09-21T13:05:02Z", "bug_id": 5335, "creation_time": "2006-09-21T13:05:02Z", "is_private": false, "text": "Problem can be reproduced by generating the barcode.fo example, see the comments\nabout fo.example properties inside examples/fo/advanced/barcode.fo for how to do\nthis.\n\nCurrently, the barcode text (\"123456\") is not found in the barcode when\nsearching in the generated PDF from Acrobat reader."}, {"count": 15, "text": "I have applied the patch from comment #10 in revision 454725.\n\nTested with several embedded TTF fonts, and OpenType fonts with TTF outlines,\nusing an XSL-FO document containing accented characters:\n\n-Copy and paste from the PDF file works.\n-pdftotext extracts text correctly.\n\nVincent told me about an \"Illegal entry in bfrange block in ToUnicode CMap\"\nerror when opening a generated PDF file with xpdf, but I haven't been able to\nreproduce it yet.\n\nFWIW, here's the output of pdffonts on one of my test files:\n\nHelvetica-Bold                       Type 1       no  no  no      19  0\n3E5537MSGothic                       CID TrueType yes no  yes     16  0\nTimes-Roman                          Type 1       no  no  no      20  0\n4E5583PMingLiU                       CID TrueType yes no  yes     24  0\n2E54a8Gulim                          CID TrueType yes no  yes     30  0\n1E548dRockwell                       CID TrueType yes no  yes     36  0", "bug_id": 5335, "attachment_id": null, "id": 94672, "time": "2006-10-10T06:10:21Z", "creator": "bdelacretaz@codeconsult.ch", "creation_time": "2006-10-10T06:10:21Z", "tags": [], "is_private": false}, {"count": 16, "attachment_id": null, "bug_id": 5335, "text": "The correct revision is 454731, I forgot a file in the previous commit.", "id": 94673, "time": "2006-10-10T06:15:18Z", "creator": "bdelacretaz@codeconsult.ch", "creation_time": "2006-10-10T06:15:18Z", "tags": [], "is_private": false}, {"count": 17, "tags": [], "bug_id": 5335, "text": "Created attachment 18987\npatch for PDFToUnicodeCMap.java, correcting bugs and simplifying the code\n\nHere's a patch that improves PDFToUnicodeCMap.java. Changelog:\n- bugfix: the last range in the bfrange entries was ending at -1, translated to\nFFFFFFFF in the PDF file. That's what was causing the error \"Illegal entry in\nbfrange block in ToUnicode CMap\"\n- bugfix: if there were more than 100 ranges, the beginbfrange...endbfrange\nsections would have been wrongly generated\n- some code cleanup and simplification\n\nVincent", "id": 94709, "time": "2006-10-11T01:30:43Z", "creator": "vhennebert@gmail.com", "creation_time": "2006-10-11T01:30:43Z", "is_private": false, "attachment_id": 18987}, {"count": 18, "tags": [], "bug_id": 5335, "attachment_id": null, "id": 94713, "time": "2006-10-11T02:06:36Z", "creator": "bdelacretaz@codeconsult.ch", "creation_time": "2006-10-11T02:06:36Z", "is_private": false, "text": "Patch of comment #17 applied in revision 462741, thanks!"}, {"count": 19, "tags": [], "bug_id": 5335, "attachment_id": null, "id": 101527, "time": "2007-04-09T02:18:55Z", "creator": "bdelacretaz@codeconsult.ch", "creation_time": "2007-04-09T02:18:55Z", "is_private": false, "text": "I think this issue can be closed now, please reopen if I'm wrong"}, {"count": 20, "text": "*** Bug 40467 has been marked as a duplicate of this bug. ***", "bug_id": 5335, "attachment_id": null, "id": 101529, "time": "2007-04-09T02:19:20Z", "creator": "bdelacretaz@codeconsult.ch", "creation_time": "2007-04-09T02:19:20Z", "tags": [], "is_private": false}, {"count": 21, "tags": [], "bug_id": 5335, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 156186, "time": "2012-04-01T07:03:20Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T07:03:20Z", "is_private": false, "attachment_id": null}]