[{"count": 0, "tags": [], "creator": "rszalai@aitia.ai", "text": "I've set up a JDBC datasource for MySQL as it described in \nthis page: \n\nhttp://jakarta.apache.org/tomcat/tomcat-5.0-doc/jndi-datasource-examples-\nhowto.html\n\nI've installed mysql-connector-java-3.0.9-stable-bin.jar in \n$CATALINA_HOME/common/lib\n\nWhen I try to read a serialized object from a BLOB column, \nI always get ClassNotFoundException. \nThe class of the object that I want to read is located in my\nwebapp's WEB-INF/classes directory.\n\nCode: \n\n161   rs = stmt.executeQuery();\n162\t\t\t\n163   if (rs.next()) {\n164      DummyVO dummy = new DummyVO();\n165      dummy.setId(rs.getLong(1));\n...      ...\n176      dummy.setEnv((Dummy) rs.getObject(9));\n...      ...\n179   }\n\nStacktrace:\n\njava.sql.SQLException: Class not found: java.lang.ClassNotFoundException: \nsim.test.Dummy while reading serialized object\n        at com.mysql.jdbc.ResultSet.getObject(ResultSet.java:1537)\n        at org.apache.commons.dbcp.DelegatingResultSet.getObject(DelegatingResul\ntSet.java:286)\n        at sim.proba.dao.SimulationDAO.findById(SimulationDAO.java:176)\n        at sim.proba.web.SimAction.getSimulation(SimAction.java:40)\n        at sim.proba.web.ControlSimAction.execute(ControlSimAction.java:71)\n        at org.apache.struts.action.RequestProcessor.processActionPerform(Reques\ntProcessor.java:421)\n        at org.apache.struts.action.RequestProcessor.process(RequestProcessor.ja\nva:226)\n        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:116\n4)\n        at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:415)\n\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:709)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\nIf this is the normal classloader behaivor, how can I read serialized object\nfrom db?", "id": 67540, "time": "2004-11-29T14:54:18Z", "bug_id": 32428, "creation_time": "2004-11-29T14:54:18Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 32428, "attachment_id": null, "id": 67552, "time": "2004-11-29T19:11:44Z", "creator": "yoavs@computer.org", "creation_time": "2004-11-29T19:11:44Z", "is_private": false, "text": "The class needs to be available to the common/lib classloader if you're using \ncontainer-managed datasources.  It can't just be in WEB-INF/lib, since \ncommon/lib can't see WEB-INF/lib.  This is not a Tomcat bug."}]