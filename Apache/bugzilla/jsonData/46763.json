[{"attachment_id": 23305, "tags": [], "creator": "mashmk02@gmail.com", "is_private": false, "count": 0, "id": 125136, "time": "2009-02-24T20:14:07Z", "bug_id": 46763, "creation_time": "2009-02-24T20:14:07Z", "text": "Created attachment 23305\npatch for apache-2.0/mod_jk.c\n\nHi, folks.\n\nIf the graceful restart occurs, jk_log_lock that an old child process has is deleted by the parent process and the new one is made.\nWhen an old child process writes the request log after the parent process restarted, the following logs are written in error_log \nbecause old jk_log_lock has already been deleted. \n# An old child process doesn't stop until the reply is returned.\n\n[Mon Feb 16 14:38:57 2009] [error] (22)Invalid argument: apr_global_mutex_lock(jk_log_lock) failed\n[Mon Feb 16 14:38:57 2009] [error] (43)Identifier removed: apr_global_mutex_unlock(jk_log_lock) failed\n\nTo avoid output logs, I modified the code to reuse jk_log_lock by using apr_pool_userdata_set/get() ( just like other modules. for instance, mod_ssl etc. ).\n\nregards."}, {"count": 1, "tags": [], "creator": "mturk@apache.org", "text": "Applied to the trunk.\nThanks!", "id": 125137, "time": "2009-02-24T23:32:19Z", "bug_id": 46763, "creation_time": "2009-02-24T23:32:19Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Closing this issue", "is_private": false, "bug_id": 46763, "id": 132997, "time": "2009-12-20T23:50:54Z", "creator": "mturk@apache.org", "creation_time": "2009-12-20T23:50:54Z", "attachment_id": null}]