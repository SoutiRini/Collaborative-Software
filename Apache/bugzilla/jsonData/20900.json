[{"count": 0, "tags": [], "creator": "tuneki@pb.jp.nec.com", "text": "OS: Solaris 8 (sparc)\nApache: 1.3.27 + php 4.3.2 (DSO module)\n# This problem happened only on Solaris 8.\n# Red Hat 7.3 and MacOS X 10.2.6 is OK.\n\nset_time_limit() of PHP is used setitimer(2).\nReturn value of setitimer(2) changes by setting of ErrorLog in httpd.conf.\n\n1. ErrorLog /var/log/apache/error_log or syslog\n return value is 0 (success).\n\n truss of httpd:\n/1:       -> libthread:setitimer(0x2, 0xffbef4a0, 0x0, 0xff001eb0)\nsetitimer(ITIMER_PROF, 0xFFBEF4A0, 0x00000000)  = 0\n/1:       <- libthread:setitimer() = 0\n\n\n2. ErrorLog \"| /usr/local/apache/bin/rotatelogs /var/log/apache/error_log 86400\"\n return value is -1 (error) and errno is EACCES\n\n truss of httpd:\n/1:       -> libthread:setitimer(0x2, 0xffbef4a0, 0x0, 0xff001eb0)\n/1:         -> libc:_lwp_mutex_lock(0xff3e7cb8, 0x0, 0x0, 0x0)\n/1:         <- libc:_lwp_mutex_lock() = 0\n/1:         -> libc:_lwp_mutex_unlock(0xff3e7cb8, 0xffbef214, 0xfffffffc, 0x0)\n/1:         <- libc:_lwp_mutex_unlock() = 0\n/1:         -> libc:___errno(0x1, 0x2, 0x0, 0xff16e000)\n/1:           -> libthread:thr_main(0x0, 0x24c04, 0x0, 0x0)\n/1:           <- libthread:thr_main() = 1\n/1:         <- libc:___errno() = 0xa4c38\n/1:       <- libthread:setitimer() = -1\n\n\nIn case of 1, the following PHP scripts are interrupted.\nIn case of 2, the following PHP scripts are executed to the last.\n\ntest.php:\n<?php\n        set_time_limit( 2 );\n        printf(\"Test Program Start<br>\u00a5n\");\n        for ($i = 0; $i < 1000000; $i++) {\n                for ($j = 0; $j < 10000; $j++) {\n                }\n                printf(\"i=%d<br>\u00a5n\", $i);\n        }\n        printf(\"Test Program End<br>\u00a5n\");\n?>", "id": 39076, "time": "2003-06-19T06:20:25Z", "bug_id": 20900, "creation_time": "2003-06-19T06:20:25Z", "is_private": false, "attachment_id": null}]