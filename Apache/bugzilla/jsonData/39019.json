[{"count": 0, "tags": [], "text": "When using XP Web folders to connect to Lenya via WebDAV, Word 2003 opens the\nfiles as read-only.  I have starred the relevant lines from the axis log.  The\nrequest that Word sends has the windows username instead of the lenya username.\n If I edit the request/response so that both owners match and resend it, the\nfile is no longer read-only.\n\nWord may be opening a temporary copy of the file and assigning the permissions\nbased on that instead of on the actual WebDAV file.  The same request/response\nin Dreamweaver has lenya as the owner for both and works correctly.\n\n==== Request ====\nLOCK /default/webdav/tutorial_en.html HTTP/1.1\nContent-Language: en-us\nAccept-Language: en-us\nContent-Length: 175\nTimeout: Second-180\nTranslate: f\nContent-Type: text/xml\nDepth: 0\nUser-Agent: Microsoft Data Access Internet Publishing Provider DAV\nHost: localhost:3333\nConnection: Keep-Alive\nCookie: JSESSIONID=63n56marhr4gp\nAuthorization: Basic bGVueWE6bGV2aQ==\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<lockinfo xmlns=\"DAV:\">\n<locktype>\n<write/>\n</locktype>\n<lockscope>\n<exclusive/>\n</lockscope>\n**<owner>windows_username</owner>\n</lockinfo>\n\n==== Response ====\nHTTP/1.1 200 OK\nDate: Wed, 15 Mar 2006 17:37:56 GMT\nServer: Jetty/5.1.4 (Windows XP/5.1 x86 java/1.4.2_08\nX-Cocoon-Version: 2.1.9-dev\nContent-Type: text/xml; charset=utf-8\nContent-Length: 361\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<D:prop xmlns:D=\"DAV:\">\n<D:lockdiscovery>\n<D:activelock>\n<D:locktype><D:write /></D:locktype>\n<D:lockscope><D:exclusive/></D:lockscope>\n<D:depth>Infinity</D:depth>\n**<D:owner><D:href>lenya</D:href></D:owner>\n<D:timeout>Second-604800</D:timeout>\n<D:locktoken><D:href /></D:locktoken>\n</D:activelock>\n</D:lockdiscovery>\n</D:prop>", "is_private": false, "bug_id": 39019, "id": 86973, "time": "2006-03-17T16:51:15Z", "creator": "jonathan.addison@wyona.com", "creation_time": "2006-03-17T16:51:15Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "jonathan.addison@wyona.com", "attachment_id": 17961, "is_private": false, "id": 87186, "time": "2006-03-23T21:56:49Z", "bug_id": 39019, "creation_time": "2006-03-23T21:56:49Z", "text": "Created attachment 17961\nPatch removes read-only restriction for files opened in Word 2003\n\nThe owner field in webdav/xslt/lock.xsl was set to always return\n<D:owner><D:href><xsl:value-of select=\"$userid\" /></D:href></D:owner> in the\nresponse to a LOCK request.  For the LOCK to work the owner elements must match\nin the request/response.  Since the format of the owner element varies by\napplication some of those applications would assume the file was already\nchecked out and open it read-only.\n\nThis patch echoes the owner from the request to the response so that they will\nmatch regardless of which client is being used.  At first I thought the removal\nof the $userid from lock.xsl would interfere with file locking, but after\ntesting it turns out that the owner field is only used by the client\napplication  and not by Lenya itself, so file locking is not affected.\n\nTo verify this, open a file for editing with BXE as one user, and then try to\nopen that same file with Word 2003 (or another editor) as a different user. \nWord will prompt that the file is already checked out and give 3 options for\nwhat to do next (I chose 'Notify when file is unlocked').  Exiting from BXE\nreleases the lock and Word prompts again that the file can now be opened for\nediting.  Quite handy.\n\nIn summary, Word 2003 can now be used to open, edit, and save content files\nfrom Lenya.  The files currently open in XML view, but I am working on creating\nsome simple stylesheets to roundtrip from XHTML to WordML to XHTML for a more\nWord-like experience.  \n\nOpening in XML view seems necessary at this point to preserve well-formedness,\nbut any suggestions are welcome.\n\nI will add these notes to the WebDAV wiki page as well."}, {"count": 2, "tags": [], "bug_id": 39019, "attachment_id": null, "text": "Commit de la revisi\u00f3n 389063.\n", "id": 87307, "time": "2006-03-27T09:24:03Z", "creator": "thorsten@apache.org", "creation_time": "2006-03-27T09:24:03Z", "is_private": false}, {"count": 3, "tags": [], "text": "Renaming Lenya 1.4 to 2.0", "attachment_id": null, "bug_id": 39019, "id": 105503, "time": "2007-07-16T01:58:55Z", "creator": "thorsten@apache.org", "creation_time": "2007-07-16T01:58:55Z", "is_private": false}]