[{"count": 0, "tags": [], "creator": "douglasw@wagnerweb.org", "is_private": false, "text": "There seems to be a possible bug in ant 1.7.0 (this does NOT affect 1.6.5 or 1.6.2).\n\nWhen using the <mail> task in ant to generate and send an e-mail on our systems,\nthe mail will fail to be sent with no error, no warning and no failures unless\nthe \"encoding\" attribute is set to an acceptable encoding method.\n\nAt my work, \"mime\" e-mail is unusable.  However, when using an ant <mail> task\nas follows:\n\n   <mail mailhost=\"stlpsmtprelay\" \n\tsubject=\"[PING-ALL] @{server.name} No longer responding to Pings!\" \n\ttolist=\"@{notification.list}\"\n\tfrom=\"ping_test@rgare.com\"\n\tmessage=\"${trace.output}\"/>\n\n1.7.0 produces the following output:\n\n [mail] Failed to initialise MIME mail: javax/mail/MessagingException\n\nRun through 1.6.5 or 1.6.2 the following is the output:\n\n     [mail] Failed to initialise MIME mail: javax/mail/MessagingException\n     [mail] Using UU mail\n     [mail] Sending email: [ANT-SERVER] cybere_mtb01 stopped...please don't use\n<EOM>\n     [mail] From Deployment_Process@rgare.com\n     [mail] ReplyTo []\n     [mail] To [<valid e-mail addresses here>]\n     [mail] Cc []\n     [mail] Bcc []\n     [mail] Sent email with 0 attachments\n\n When I add an \"encoding\" statement onto the <mail> task above as follows:\n\n    <mail mailhost=\"stlpsmtprelay\" \n\tsubject=\"[PING-ALL] @{server.name} No longer responding to Pings!\" \n\ttolist=\"@{notification.list}\"\n\tfrom=\"ping_test@rgare.com\"\n\tmessage=\"${trace.output}\"\n\tencoding=\"plain\"/>\n\nI get the appropriate information and the e-mail generates and sends.\n\nI assume there is an issue with the \"auto\" code in which it makes what it thinks\nis an intelligent selection as to which mail type to use (in our case \"MIME\")\nbut if that fails doesn't continue beyond to the next mail type like 1.6.5 and\n1.6.2 does.", "id": 103056, "time": "2007-05-10T14:08:56Z", "bug_id": 42389, "creation_time": "2007-05-10T14:08:56Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "EmailTask is executed by using org.apache.tools.ant.taskdefs.email.Mailer that has encoding \"auto\" as default.\nIf encoding is not specified, org.apache.tools.ant.taskdefs.email.MimeMailer \nis set to the Mailer (when encoding is not \"plain\").\nBecause MimeMailer imports javax.mail package that is not bundled with ant-1.7,\nlinkage error occurs  like below.\n\n    [mail] Class org.apache.tools.ant.taskdefs.email.MimeMailer could not be \nloaded because of an invalid dependency.\n    [mail]     at \norg.apache.tools.ant.util.ClasspathUtils.newInstance(ClasspathUtils.java:296)\n    [mail]     at \norg.apache.tools.ant.taskdefs.email.EmailTask.execute(EmailTask.java:418)\n    [mail]     at \norg.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n    [mail]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native \nMethod)\n    [mail]     at \nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    [mail]     at \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    [mail]     at java.lang.reflect.Method.invoke(Method.java:585)\n    [mail]     at \norg.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:105)\n    [mail]     at org.apache.tools.ant.Task.perform(Task.java:348)\n    [mail]     at org.apache.tools.ant.Target.execute(Target.java:361)\n    [mail]     at org.apache.tools.ant.Target.performTasks(Target.java:389)\n    [mail]     at \norg.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)\n    [mail]     at \norg.apache.tools.ant.Project.executeTarget(Project.java:1304)\n    [mail]     at \norg.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n    [mail]     at \norg.apache.tools.ant.Project.executeTargets(Project.java:1186)\n    [mail]     at org.apache.tools.ant.Main.runBuild(Main.java:698)\n    [mail]     at org.apache.tools.ant.Main.startAnt(Main.java:199)\n    [mail]     at \norg.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n    [mail]     at \norg.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\n    [mail] Caused by: java.lang.NoClassDefFoundError: \njavax/mail/MessagingException\n    [mail]     at java.lang.Class.forName0(Native Method)\n    [mail]     at java.lang.Class.forName(Class.java:242)\n    [mail]     at \norg.apache.tools.ant.util.ClasspathUtils.newInstance(ClasspathUtils.java:266)\n    [mail]     ... 18 more\n\nI think if you use email task without specify encoding, you must include \nmail.jar in the library classpath.\nactivation.jar is required also.\n\nSee http://ant.apache.org/manual/index.html \"Library Dependencies\"", "attachment_id": null, "bug_id": 42389, "id": 121075, "time": "2008-09-30T01:37:35Z", "creator": "jiro@sysart.jp", "creation_time": "2008-09-30T01:37:35Z", "is_private": false}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "introduced with svn revision 278346 where a \"return\" slipped into the\ncatch block(s).\n\nfixed with svn revision 704486.", "id": 121489, "time": "2008-10-14T04:48:59Z", "bug_id": 42389, "creation_time": "2008-10-14T04:48:59Z", "attachment_id": null}]