[{"attachment_id": null, "tags": [], "bug_id": 6977, "text": "I am using the JDK-1.4-LE version (jakarta-tomcat-4.0.3-LE-jdk14).\n\nI have a trivial web-app which only contains a simple trial JSP to determine the\nimplementation class of DocumentBuilderFactory:\n\n<%\nString className =\njavax.xml.parsers.DocumentBuilderFactory.newInstance().getClass().getName();\n%>\n<%=className%>\n\nThis works fine if the web-app contains only this JSP. But as soon as you place\nXerces 2.0.0 (xercesImpl.jar and xmlParserAPIs.jar) into WEB-INF/lib the\nfollowing exception is thrown:\n\njavax.servlet.ServletException: Servlet.init() for servlet jsp threw exception\n\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:935)\n\tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:653)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:1012)\n\tat org.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1107)\n\tat java.lang.Thread.run(Thread.java:536)\n\nroot cause\n\njava.lang.NoClassDefFoundError: org/w3c/dom/ranges/DocumentRange\n\tat java.lang.ClassLoader.defineClass0(Native Method)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:509)\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:123)\n\tat\norg.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:1631)\n\tat org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:926)\n\tat\norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1360)\n\tat\norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1243)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:322)\n\tat org.apache.xerces.jaxp.DocumentBuilderImpl.(DocumentBuilderImpl.java:106)\n\tat\norg.apache.xerces.jaxp.DocumentBuilderFactoryImpl.newDocumentBuilder(DocumentBuilderFactoryImpl.java:88)\n\tat org.apache.jasper.parser.ParserUtils.parseXMLDocument(ParserUtils.java:197)\n\tat\norg.apache.jasper.compiler.TldLocationsCache.processWebDotXml(TldLocationsCache.java:165)\n\tat org.apache.jasper.compiler.TldLocationsCache.(TldLocationsCache.java:138)\n\tat org.apache.jasper.EmbededServletOptions.(EmbededServletOptions.java:345)\n\tat org.apache.jasper.servlet.JspServlet.init(JspServlet.java:266)\n\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:916)\n\tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:653)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.CertificatesValve.invoke(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:1012)\n\tat org.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1107)\n\tat java.lang.Thread.run(Thread.java:536)", "count": 0, "id": 11564, "time": "2002-03-08T09:08:26Z", "creator": "javaXpert@gmx.de", "creation_time": "2002-03-08T09:08:26Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 6977, "is_private": false, "text": "Move Xerces 2 in common/lib, or upgrade to 4.0.4 b1.\n\n*** This bug has been marked as a duplicate of 6374 ***", "id": 11577, "time": "2002-03-08T16:33:30Z", "creator": "remm@apache.org", "creation_time": "2002-03-08T16:33:30Z", "attachment_id": null}]