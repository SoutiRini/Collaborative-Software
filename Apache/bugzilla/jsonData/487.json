[{"count": 0, "tags": [], "bug_id": 487, "attachment_id": null, "text": "I was trying to use JSP command line compiler in\r\ntomcat 4.0. Got the following error\r\n\r\nD:\\projects\\jsp\\tomcat40>bin\\jspc snoop.jsp\r\n2001-01-22 02:23:48 - ERROR-the file 'projects\\jsp\\tomcat40\\snoop.jsp' generated\r\n the following general exception: java.util.EmptyStackException\r\nD:\\projects\\jsp\\tomcat40>\r\n\r\nI'm not sure is it already fixed or not  but i tried\r\nto debug it and it comes down to  this method\r\n\r\n private String resolveFileName(String inFileName) {\r\n        boolean isAbsolute =\r\ninFileName.startsWith(\"/\");\r\n String fileName = \r\n     isAbsolute ?\r\n     inFileName : (String)baseDirStack.peek() +\r\ninFileName;\r\n String baseDir = \r\n     inFileName.substring(0,\r\ninFileName.lastIndexOf(\"/\") + 1);\r\n baseDirStack.push(baseDir);\r\n return fileName;\r\n    }\r\n\r\nin this class                     \r\npublic class ParserController { }\r\n\r\nInitally stack is empty. I didn't spend much time to\r\nfigure out what is the problem , but i think\r\nIt should be either checked for be empty or something\r\nlike this should go first during initialization\r\nString baseDir =     inFileName.substring(0,\r\ninFileName.lastIndexOf(\"/\") + 1);\r\nbaseDirStack.push(baseDir);\r\n", "id": 455, "time": "2001-01-22T14:23:48Z", "creator": "dev@tomcat.apache.org", "creation_time": "2001-01-22T14:23:48Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 487, "text": "jspc didn't work well under windows since file separator assumed to be \"/\" in\nParserController.resolveFileName. Fixed in Tomcat 4.0.\n\n*** This bug has been marked as a duplicate of 821 ***", "id": 1270, "time": "2001-03-14T16:45:37Z", "creator": "justyna.horwat@sun.com", "creation_time": "2001-03-14T16:45:37Z", "is_private": false, "attachment_id": null}]