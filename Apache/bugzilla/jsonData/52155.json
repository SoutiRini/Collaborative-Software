[{"count": 0, "tags": [], "creator": "getprasadin@gmail.com", "text": "I am using log4j-1.2.15.jar.\n\nPlease see the thread dump as shown below. I took the dump of JVM as my application stopped responding. It is getting stuck at  java.io.FileOutputStream.writeBytes method every time. every time. My application is single threaded.\nI have declared logger as final private static class variable. Please help me out\n\n\"TIBCO EMS Session Dispatcher (5388033)\" prio=6 tid=0x000000002c4c4800 nid=0xf24 runnable [0x000000003339e000]\n   java.lang.Thread.State: RUNNABLE\n    at java.io.FileOutputStream.writeBytes(Native Method)\n    at java.io.FileOutputStream.write(FileOutputStream.java:260)\n    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\n    - locked <0x000000000fc8da18> (a java.io.BufferedOutputStream)\n    at java.io.PrintStream.write(PrintStream.java:432)\n    - locked <0x000000000fc8d9e0> (a java.io.PrintStream)\n    at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:202)\n    at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:272)\n    at sun.nio.cs.StreamEncoder.flushBuffer(StreamEncoder.java:85)\n    - locked <0x000000000fc8db68> (a java.io.OutputStreamWriter)\n    at java.io.OutputStreamWriter.flushBuffer(OutputStreamWriter.java:168)\n    at java.io.PrintStream.write(PrintStream.java:477)\n    - locked <0x000000000fc8d9e0> (a java.io.PrintStream)\n    at java.io.PrintStream.print(PrintStream.java:619)\n    at java.io.PrintStream.println(PrintStream.java:756)\n    - locked <0x000000000fc8d9e0> (a java.io.PrintStream)\n    at java.lang.Throwable.printStackTrace(Throwable.java:464)\n    - locked <0x000000000fc8d9e0> (a java.io.PrintStream)\n    at java.lang.Throwable.printStackTrace(Throwable.java:451)\n    at org.apache.log4j.helpers.LogLog.error(LogLog.java:145)\n    at org.apache.log4j.helpers.OnlyOnceErrorHandler.error(OnlyOnceErrorHandler.java:78)\n    at org.apache.log4j.helpers.OnlyOnceErrorHandler.error(OnlyOnceErrorHandler.java:68)\n    at org.apache.log4j.helpers.CountingQuietWriter.write(CountingQuietWriter.java:49)\n    at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:302)\n    at org.apache.log4j.CompositeRollingAppender.subAppend(CompositeRollingAppender.java:338)\n    at org.apache.log4j.WriterAppender.append(WriterAppender.java:160)\n    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)\n    - locked <0x000000000fd1bb50> (a org.apache.log4j.CompositeRollingAppender)\n    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)\n    at org.apache.log4j.Category.callAppenders(Category.java:206)\n    - locked <0x000000000fcd86b0> (a org.apache.log4j.spi.RootLogger)\n    at org.apache.log4j.Category.forcedLog(Category.java:391)\n    at org.apache.log4j.Category.info(Category.java:666)\n    at com.tpt.thresher.util.logging.LogHelper.info(LogHelper.java:56)\n    at com.tpt.thresher.server.posval.complexpricing.componentinstruments.impliedpositions.elements.BaseFutureImpliedPosition.generate(BaseFutureImpliedPosition.java:51)\n    at com.tpt.thresher.server.posval.complexpricing.componentinstruments.impliedpositions.generator.ImpliedPositionGenerator.generateImpliedPosition(ImpliedPositionGenerator.java:71)\n    at com.tpt.thresher.server.posval.complexpricing.componentinstruments.processor.FutureNotPricedComponentValueProcessor.valueLot(FutureNotPricedComponentValueProcessor.java:21)\n    at com.tpt.thresher.server.posval.complexpricing.componentinstruments.processor.BaseComponentValueProecssor.valueAllLots(BaseComponentValueProecssor.java:258)\n    at com.tpt.thresher.server.posval.complexpricing.componentinstruments.processor.BaseComponentValueProecssor.valuePrimarySettlement(BaseComponentValueProecssor.java:214)\n    at com.tpt.thresher.server.posval.complexpricing.componentinstruments.processor.BaseComponentValueProecssor.value(BaseComponentValueProecssor.java:85)\n    at com.tpt.thresher.server.posval.complexpricing.workflow.BaseValueProcesser.value(BaseValueProcesser.java:111)\n    at com.tpt.thresher.server.posval.complexpricing.workflow.BaseTermValuationProcesser.value(BaseTermValuationProcesser.java:1996)\n    at com.tpt.thresher.server.posval.complexpricing.workflow.BaseTermValuationProcesser.value(BaseTermValuationProcesser.java:1870)\n    at com.tpt.thresher.server.posval.complexpricing.helper.TermValuationWorkflow.buildTerm(TermValuationWorkflow.java:388)\n    at com.tpt.thresher.server.posval.complexpricing.workflow.BaseTermValuationProcesser.valueTerm(BaseTermValuationProcesser.java:2487)\n    at com.tpt.thresher.server.posval.complexpricing.concurrent.TermValuationDistributedProcesser.valueTerm(TermValuationDistributedProcesser.java:2536)\n    at com.tpt.thresher.server.posval.complexpricing.concurrent.TermValuationDistributedProcesser.valueTerm(TermValuationDistributedProcesser.java:2270)\n    at com.tpt.thresher.server.posval.complexpricing.concurrent.TermValuationDistributedProcesser.doProcess(TermValuationDistributedProcesser.java:1130)\n    - locked <0x00000000100d8858> (a java.lang.Object)\n    at com.tpt.thresher.server.posval.complexpricing.concurrent.TermValuationDistributedProcesser.process(TermValuationDistributedProcesser.java:1112)\n    at com.tpt.thresher.common.concurrent.SpringDistributedProcess.onMessage(SpringDistributedProcess.java:486)\n    at com.tibco.tibjms.TibjmsxSessionImp._submit(TibjmsxSessionImp.java:4165)\n    at com.tibco.tibjms.TibjmsxSessionImp._dispatchAsyncMessage(TibjmsxSessionImp.java:2267)\n    at com.tibco.tibjms.TibjmsxSessionImp$Dispatcher.run(TibjmsxSessionImp.java:3689)", "id": 151290, "time": "2011-11-08T15:31:39Z", "bug_id": 52155, "creation_time": "2011-11-08T15:31:39Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "carnold@apache.org", "attachment_id": null, "text": "Please ask usage questions on log4j-user@logging.apache.org. Closing this bug as INVALID until an specific error is identified.\n\nI don't recognize org.apache.log4j.CompositeRollingAppender initially. The source is located in the contribs/KevinSteppe directory where it has been since 2002 with only trivial changes to the comments. It is a legacy from the earliest days of log4j. The problem may or may not be related to the component.\n\nIf appears that on the logging request that stalled, an attempt was made to write to a log file, but an exception was thrown. The exception was processed by the default error handler which writes calls PrintStackTrace on the exception. The call to PrintStackTrace stalled for unknown reasons.\n\nTo attack the problem, you can either try to find why you are getting an exception in CountingQuietWriter.write, replace the default error handler with something else that doesn't try to write to the console, or search your JVM or environment bug list for reports of problems with FileOutputStream.writeBytes().\n\nSee tests/input/xml/fallback1.xml for an example of configuring an different error handler.", "id": 151354, "time": "2011-11-10T05:22:37Z", "bug_id": 52155, "creation_time": "2011-11-10T05:22:37Z", "is_private": false}]