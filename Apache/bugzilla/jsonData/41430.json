[{"count": 0, "tags": [], "creator": "giampaolo@tomassoni.biz", "is_private": false, "text": "In apache-2.0.58 + apr-0.9.12 + mod_jk-1.1.20 + JBoss-4.0.5.GA (Tomcat 5.5), \nwhen a Tomcat webapp is published through an apache vhost and:\n\n- both JkOptions +ForwardDirectories and DirectoryIndex are specified;\n- Apache can't stat() the specified index file, since it is expected to be \nhandled virtually by Tomcat (i.e.: it is \"index.jsf\" like in Java ServletFaces \napplications);\n\nthen issuing a request on a directory entry to Apache (like, in example, \nhttp://www.domain.tld/) would not redirect the client to request the \nDirectoryIndex-specified resource (i.e. http://www.domain.tld/index.jsf) but \nwould instead forward it up to Tomcat as-is.\n\nThis results in displaing the directory content (or a 404 error), instead of \nthe wanted index virtual file.\n\nPlease note that up to mod_jk-1.1.19 the behaviour I was seing was the \nexpected one: the client was redirected to request the virtual index resource \nregardless of the existance of such a file in the directory published by \nApache.", "id": 98351, "time": "2007-01-22T02:26:19Z", "bug_id": 41430, "creation_time": "2007-01-22T02:26:19Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 41430, "text": "This might be related to the fix for bug 36121.", "count": 1, "id": 98359, "time": "2007-01-22T04:14:53Z", "creator": "markt@apache.org", "creation_time": "2007-01-22T04:14:53Z", "is_private": false}, {"count": 2, "tags": [], "creator": "giampaolo@tomassoni.biz", "text": "How can I get that single patch? I would attempt rolling it back in my mod_jk-\n1.1.20 and test if this is the cause, but it is not attached to \nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=36121.", "id": 98360, "time": "2007-01-22T04:30:59Z", "bug_id": 41430, "creation_time": "2007-01-22T04:30:59Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 41430, "attachment_id": null, "is_private": false, "id": 98373, "time": "2007-01-22T13:48:20Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2007-01-22T13:48:20Z", "text": "The original patch was:\n\nhttp://svn.apache.org/viewvc/tomcat/connectors/trunk/jk/native/apache-2.0/mod_jk.c?view=diff&r1=478743&r2=478744&pathrev=478744\n"}, {"count": 4, "tags": [], "creator": "rainer.jung@kippdata.de", "text": "Did you add index.jsf to the list of welcome pages in youe web.xml on the tomcat\nside?", "id": 98374, "time": "2007-01-22T13:49:14Z", "bug_id": 41430, "creation_time": "2007-01-22T13:49:14Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 41430, "attachment_id": null, "is_private": false, "id": 98375, "time": "2007-01-22T14:01:14Z", "creator": "giampaolo@tomassoni.biz", "creation_time": "2007-01-22T14:01:14Z", "text": "Yes, but it doesn't work: I can't get the auto-index working. It doesn't work \neven by connecting to the Tomcat's default http service port (8080), thereby \nby-passing the JK Connector.\n\nPlease note I'm using jsf + facelets + seam + jboss, so, probably one of these \ncomponents doesn't behave as expected with <welcome-file-list>. The fact is \nthat I found a great solution to this in mod_jk and I'm actually depending on \nthis. I could eventually backup implementing a <filter>, but this would at \nleast mean that something is wrong in the JK docs regarding \n+ForwardDirectories + DirectoryIndex.\n\nAbout your patch. I just got back home and I'm going to roll it back from my \ncopy of mod_jk-1.1.20. I'll tell you soon."}, {"count": 6, "tags": [], "creator": "giampaolo@tomassoni.biz", "is_private": false, "text": "Your \"might be\" is definitely right, Mark: that single-line change does \nmatter...\n\nReversing the patch to 1.1.20 restores mod_jk's previous behaviour.\n\nI don't completely get the matter of bug 36121. Do you think the two \nbehaviours may be made somehow compatible in 1.1.21, or instead enforcing one \nwould mean voiding the other?\n\nI would like to be prepared to the next mod_jk release...", "id": 98376, "time": "2007-01-22T14:27:39Z", "bug_id": 41430, "creation_time": "2007-01-22T14:27:39Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "http://marc.theaimsgroup.com/?l=tomcat-dev&m=116433303512441&w=2", "is_private": false, "id": 98379, "creator": "markt@apache.org", "time": "2007-01-22T16:02:44Z", "bug_id": 41430, "creation_time": "2007-01-22T16:02:44Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "markt@apache.org", "text": "Both behaviours are valid use cases. It should be possible to get mod_jk to\nhandle both correctly but it might take someone with more mod_jk expertise than\nI to do it.", "id": 98382, "time": "2007-01-22T16:41:04Z", "bug_id": 41430, "creation_time": "2007-01-22T16:41:04Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "creator": "rainer.jung@kippdata.de", "text": "I will investigate until next week. If the use cases are compatible, I'm\noptimistic that we'll find a solution.", "id": 98412, "time": "2007-01-23T11:34:44Z", "bug_id": 41430, "creation_time": "2007-01-23T11:34:44Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "text": "To find a good solution, please participate in the discussion:\n\nhttp://marc.theaimsgroup.com/?l=tomcat-dev&m=117007124924707&w=2\n", "is_private": false, "id": 98674, "creator": "rainer.jung@kippdata.de", "time": "2007-01-29T03:51:48Z", "bug_id": 41430, "creation_time": "2007-01-29T03:51:48Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 41430, "text": "Any update on this one? Having same problem here with mod_jk-1.1.21", "count": 11, "id": 101081, "time": "2007-03-27T22:05:37Z", "creator": "gogobu@gmail.com", "creation_time": "2007-03-27T22:05:37Z", "is_private": false}, {"count": 12, "tags": [], "creator": "mturk@apache.org", "text": "No progress, and I must say for a zillion of times:\n\nDo not map your web application physically to the Apache document tree.\nIt is a *BIG* security hole and it breaks all the Servlet specifications.\n\nDefault application (directory) welcome file *MUST* be decided by\nconfiguring the application itself trough the web.xml\n\nI'm not interested of fixing this, and I would suggest that if it doesn't\nwork for you, configure it like it is supposed to be configured.\n\nIf some commiter is willing to fix that, fine with me, but like said,\nit's a complete waste of time and specifications.\n\nRegards.", "id": 101083, "time": "2007-03-27T23:28:12Z", "bug_id": 41430, "creation_time": "2007-03-27T23:28:12Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "creator": "tcatfan@gmail.com", "text": "This seems very similar to an issue I am having with JK 1.2.21.\na request for \nhttp://www.domain.tld/\nreturns the tomcat ROOT webapp index.jsp but I haven't a JkMount for the root\ncontext.\n\nin my httpd.conf, I have a \nDirectoryIndex /myapp/homepage.html\nand\nJkMount /myapp/* server1\n\nThe problem goes away when I revert back to 1.2.18 mod_jk.so.  Issue not in\n1.2.19, introduced in 1.2.20\n\nnote: the local links in the ROOT webapp index.jsp do not work (as expected)\nbecause that context is not mapped using modjk - yet that index.jsp is still served.", "id": 101565, "time": "2007-04-10T19:29:52Z", "bug_id": 41430, "creation_time": "2007-04-10T19:29:52Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 41430, "attachment_id": null, "is_private": false, "id": 104090, "time": "2007-06-05T10:52:34Z", "creator": "cott@internetstaff.com", "creation_time": "2007-06-05T10:52:34Z", "text": "I used DirectoryIndex to allow Apache to send directory requests to my Struts\n/index.do.  This worked well.  You don't appear to be able to use anything but a\nfile in welcome-file-list, so I'm not seeing a simple way of fixing this to work\nin mod_jk 1.2.20+ - I'd prefer to avoid rewrite rules, files that redirect to my\nwelcome action, etc. \n\nPlease let me know if I'm missing something obvious.\n"}, {"count": 15, "tags": [], "text": "Note any fix for this should not break the fix for 36121.", "is_private": false, "bug_id": 41430, "id": 107811, "time": "2007-09-06T20:38:13Z", "creator": "markt@apache.org", "creation_time": "2007-09-06T20:38:13Z", "attachment_id": null}, {"count": 16, "tags": [], "creator": "cott@internetstaff.com", "is_private": false, "text": "A palatable hack for me was to touch index.do in my app. It's not pretty, but it\nbeats creating a JSP for my welcome-file-list to just redirect to a struts app.\n", "id": 110434, "time": "2007-11-12T08:11:28Z", "bug_id": 41430, "creation_time": "2007-11-12T08:11:28Z", "attachment_id": null}, {"count": 17, "tags": [], "text": "mod_jk doesn't support DirectoryIndex any more.\nMake sure the welcome-file list inside Tomcat is setup correctly.", "is_private": false, "id": 132999, "creator": "mturk@apache.org", "time": "2009-12-21T00:07:48Z", "bug_id": 41430, "creation_time": "2009-12-21T00:07:48Z", "attachment_id": null}]