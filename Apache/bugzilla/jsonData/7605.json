[{"count": 0, "tags": [], "bug_id": 7605, "text": "Catalina class loaders doesn't seem to load .zip libraries.\n\n-- \nThe problem :\nThe standard Java class loader accepts both .zip and .jar. Catalina accepts only\n.jar. Nothing is said about that in the documentation (class-loader-howto.html).\n\n--\nSteps to reproduce:\n\nI was trying to install the Oracle Thin driver for use in webapps within Tomcat\n4.0.3. Windows NT 4.0. JDK 1.3.1_01.\nThis driver is distributed in an archive named \"classes12.zip\".\n\nI tried to put this zip in %CATALINA_HOME%/lib because I want to share it\nbetween multiple webapps. I also tried to move it to\n%CATALINE_HOME%/webapps/%MYWEBAPP%/WEB-INF/lib. None worked.\nWhen the zip is %JAVA_HOME%/jre/lib/ext, it works. But that is not what I want.\n\nI finally found that if I put \"classes12.zip\" in %CATALINA_HOME%/lib and rename\nit to \"classes12.jar\" it works.\n\n--\nProposed fix:\n\nThe bug is probably in org.apache.catalina.loader.WebAppClassLoader (lines 815,\n831) and org.apache.catalina.loader.StandardClassLoader (line 1082) where there\nis a filter on \".jar\" extension only.", "id": 12490, "attachment_id": null, "creator": "dolmen@hotmail.com", "creation_time": "2002-03-29T15:03:45Z", "time": "2002-03-29T15:03:45Z", "is_private": false}, {"count": 1, "tags": [], "creator": "patrick.luby@planamesa.com", "attachment_id": null, "id": 12494, "time": "2002-03-29T17:38:01Z", "bug_id": 7605, "creation_time": "2002-03-29T17:38:01Z", "is_private": false, "text": "Section 9.5 of the Servlet 2.3 specification is very clear that only *.jar files\nare allowed in the WEB-INF/lib directory (see quote of specification below):\n\n   ? The /WEB-INF/lib/*.jar area for Java ARchive files. These files contain\nservlets, beans, and other utility classes useful to the web application. The web\napplication class loader must be able to load classes from any of these archive\nfiles.\n\n    The web application classloader must load classes from the WEB-INF/ classes\ndirectory first, and then from library JARs in the WEB-INF/lib directory.\n\nYou either need to rename your zip file to a jar file or repackage the contents\nof the zip file into a jar file."}, {"count": 2, "tags": [], "creator": "dolmen@hotmail.com", "text": "OK. That is not a bug.\n\nBut what about writing more explicitely in the Class Loader HOWTO that .zip\nfiles will not be loaded?\nIt may be a common mistake as I'm probably not the only one who uses the Oracle\ndriver.", "id": 12654, "time": "2002-04-02T07:40:38Z", "bug_id": 7605, "creation_time": "2002-04-02T07:40:38Z", "is_private": false, "attachment_id": null}]