[{"text": "While generating output as image/tiff it is only possible to use PackBits\ncompression. I would like to use TIFF CCITT T.4 compression for output images.", "tags": [], "bug_id": 40519, "is_private": false, "count": 0, "id": 93620, "time": "2006-09-15T11:34:35Z", "creator": "ohernandez@notariado.org", "creation_time": "2006-09-15T11:34:35Z", "attachment_id": null}, {"count": 1, "attachment_id": 18866, "bug_id": 40519, "text": "Created attachment 18866\nJava2DRenderer.getPageImage(): Extract code into a protected method.\n\nJava2DRenderer.getPageImage(): Extract code into a protected method to\ninstantiate the BufferedImage that we paint on. Right now, it always\nallocates an 24 bit RGB image with an 8-bit alpha channel.\n\nIn next patch: Override the new protected method described above to create the\nBuffered image depending on the configuration.", "id": 93621, "time": "2006-09-15T11:40:01Z", "creator": "ohernandez@notariado.org", "creation_time": "2006-09-15T11:40:01Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": 18867, "bug_id": 40519, "is_private": false, "id": 93622, "time": "2006-09-15T12:01:49Z", "creator": "ohernandez@notariado.org", "creation_time": "2006-09-15T12:01:49Z", "tags": [], "text": "Created attachment 18867\nmodifs:getBufferedImage+iterator.next+configure+stopRenderer\n\nThe buffered image returned by getBufferedImage() is defined during\nconfigure().\n\nIn the configure method, file configuration compression is assigned to the new\nparameter attribute who has changed to ImageWriterParams.\n\nSubstitution of Batik tiff encoder for an ImageWriter.\n\nLazyPageImagesIterator.next() returns a new RenderedImage depending on the\nwriter configuration.\n\nAfter all this I could generate CCTITT T.4 TIFF output but when generating\nmulti paged tiffs only the first page is in the output.\n\nAlso, using this patch in a j2ee EJB environement with jboss, the renderer only\nworks once, since then the ByteArrayOutputStream is ever empty."}, {"count": 3, "tags": [], "bug_id": 40519, "attachment_id": 18868, "is_private": false, "id": 93623, "time": "2006-09-15T12:32:41Z", "creator": "ohernandez@notariado.org", "creation_time": "2006-09-15T12:32:41Z", "text": "Created attachment 18868\nMoved ImageWriter creation outside of the iteration.\n\nI've moved the creation of the image writer outside the page iteration.\nThe result is functionally the same: rendering only works first time for the\nfirst page of the m-tiff."}, {"count": 4, "attachment_id": null, "bug_id": 40519, "text": "Against what branch of FOP did you do the patch? I can't apply it and it's\nreally weird because your patch tries to change the license header which has\nbeen done long ago. It's important to do an \"svn up\" before creating the patch.\nAnd you should make sure you're producing the patch from FOP Trunk.\n\nI'll try to port your changes manually from your patch. But if you can supply\nupdated patches against the latest FOP Trunk that would help.", "id": 93645, "time": "2006-09-15T20:03:50Z", "creator": "jeremias@apache.org", "creation_time": "2006-09-15T20:03:50Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 40519, "attachment_id": null, "is_private": false, "id": 93653, "time": "2006-09-16T09:27:58Z", "creator": "jeremias@apache.org", "creation_time": "2006-09-16T09:27:58Z", "text": "(In reply to comment #3)\n> I've moved the creation of the image writer outside the page iteration.\n> The result is functionally the same: rendering only works first time for the\n> first page of the m-tiff.\n\nHmm, I didn't think of that early enough it seems. The ImageWriter package does\ncurrently not support writing images with multiple sub-images (like TIFF does).\nI wrote it originally for Batik which only produces single images. I'll see if I\ncan extend ImageWriter this weekend. I've got some ideas."}, {"count": 6, "tags": [], "bug_id": 40519, "attachment_id": null, "text": "I've extended the ImageWriter abstraction in XML Graphics Commons to support\nmulti-page formats like TIFF. I've also already made the necessary changes in\nTIFFRenderer. I will commit those tomorrow morning when I've tested some more\nand updated xmlgraphics-commons-1.1-snapshot.jar\n\nhttp://svn.apache.org/viewvc?view=rev&rev=447153\nhttp://svn.apache.org/viewvc?view=rev&rev=447150", "id": 93699, "time": "2006-09-17T21:49:46Z", "creator": "jeremias@apache.org", "creation_time": "2006-09-17T21:49:46Z", "is_private": false}, {"count": 7, "tags": [], "creator": "jeremias@apache.org", "text": "Patch applied with modifications. Thanks Oliver!\nhttp://svn.apache.org/viewvc?view=rev&rev=447325\n\nYou'll see from the change that I've solved the multi-page problem with the\nImageWriter. Please test and send feedback if it works for you, too. I'll write\nsome docs about it in the meantime.", "id": 93719, "time": "2006-09-18T08:56:11Z", "bug_id": 40519, "creation_time": "2006-09-18T08:56:11Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 40519, "attachment_id": null, "text": "(In reply to comment #4)\n> Against what branch of FOP did you do the patch? I can't apply it and it's\n> really weird because your patch tries to change the license header which has\n> been done long ago. It's important to do an \"svn up\" before creating the patch.\n> And you should make sure you're producing the patch from FOP Trunk.\n> \n> I'll try to port your changes manually from your patch. But if you can supply\n> updated patches against the latest FOP Trunk that would help.\n\nSorry, but I had a lot of problems with a proxy and couldn't do an update. I did\na visual comparation to the source from web and it seemed to me that I had the\nsame source, but it was old. sorry, today I've solved the problem but i see you\ndid the update manually. Thanks!", "id": 93733, "time": "2006-09-18T12:14:17Z", "creator": "ohernandez@notariado.org", "creation_time": "2006-09-18T12:14:17Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 40519, "attachment_id": null, "is_private": false, "id": 93735, "time": "2006-09-18T13:25:01Z", "creator": "ohernandez@notariado.org", "creation_time": "2006-09-18T13:25:01Z", "text": "(In reply to comment #7)\n\nYou're wellcome!\nI've just tried your patch and it works ok for me after some tests.\nThanks for your improvements, your help and for dedicating your time to this\nissue. I'll keep on testing tomorrow and I'll give more feedback.\n"}, {"count": 10, "tags": [], "bug_id": 40519, "text": "(In reply to comment #9)\n\n  Today I've been trying the patch with CCITT T.4, CCITT T.6 and PackBits. All\nhas worked fine. I ran everything in a Windows XP PC with jdk 1.5.0_03 and jai\ntools installed on the jdk.\n\n  There's a little quality difference between CCITT T.4 and PackBits that I\nthink it's due to the inherent compression of each type, or maybe some\nantialiasing on PackBits. Anyway the difference of quality is widely compensed\nby the difference of weight 2592kB on PackBits vs 240kB on CCITT T.4 for the\nsame rendered MTIFF.\n  Apparently there's no significant difference between CCITT T.4 and CCITT T.6.", "id": 93769, "time": "2006-09-19T11:45:43Z", "creator": "ohernandez@notariado.org", "creation_time": "2006-09-19T11:45:43Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 40519, "attachment_id": null, "text": "I also have tryed to put jai_core.jar, jai_imageio.jar and jai_codec.jar on the\nclasspath of the aplication (not in the jdk) and the patch went fine.\n\nToday I finish my job in notariado.org so I wont be available on\nohernandez@notariado.org. For further contact please e-mail me in\ntramuntanal@gmail.com.\n\nSpecial thanks to Jeremias, don't hesitate to contact me for any topic.", "id": 93793, "time": "2006-09-19T16:09:08Z", "creator": "ohernandez@notariado.org", "creation_time": "2006-09-19T16:09:08Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 40519, "text": "Thanks for the feedback. I think it was an important addition to FOP.", "id": 93898, "time": "2006-09-20T06:52:34Z", "creator": "jeremias@apache.org", "creation_time": "2006-09-20T06:52:34Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 40519, "is_private": false, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155628, "time": "2012-04-01T06:31:59Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:31:59Z", "attachment_id": null}]