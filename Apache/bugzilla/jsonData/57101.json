[{"count": 0, "tags": [], "creator": "lluismh@gmail.com", "text": "Created attachment 32118\nPatch that improves error reporting\n\nThe child process is created in \"proc_spawn_process()\" using \"apr_proc_create()\" and the spawn is considered successful if the return code is APR_SUCCESS. apr_proc_create() returns as soon as the child is forked and does not report an error if the execv calls fail. For instance if apr_proc_crate() can't find the executable to spawn it still returns APR_SUCCESS, and no information is recorded in the logs to assist in debugging of issues.\n\napr_proc_create() uses a callback (set through \"apr_procattr_child_errfn_set()\") to report process spawn failures. This simple patch adds an error-reporting callback that reports through a logfile the errors, easing troubleshooting of mod_fcgid spawn issues. \n\nThis is an example log entry that is recorded through the changes introduced in the patch:\n\n[Thu Oct 16 16:21:11 2014] [error] (2)No such file or directory: mod_fcgid: error spawning process: exec of '/usr/lib/apache2/suexec' failed\n\nI hope it is as useful to you as it was to us when troubeshooting a chroot+mod_fcgid+suexec setup.\n\nLluis\n.", "id": 178520, "time": "2014-10-16T20:48:03Z", "bug_id": 57101, "creation_time": "2014-10-16T20:48:03Z", "is_private": false, "attachment_id": 32118}]