[{"count": 0, "tags": [], "bug_id": 7067, "attachment_id": null, "text": "When I have a syntax error in an EL expression, the exceptions contains this\ntext:\nUnable to parse the expression:\norg.apache.taglibs.standard.lang.jstl.parser.ParseException: Encountered \"<EOF>\"\nat line 1, column 18.\nWas expecting one of:\n\n\"}\" ...\n    \".\" ...\n    <GT> ...\n    <LT> ...\n    \"==\" ...\n    <LE> ...\n    <GE> ...\n    \"!=\" ...\n    \"[\" ...\n    \"+\" ...\n    \"-\" ...\n    \"*\" ...\n    <DIVIDE> ...\n    <MODULUS> ...\n    \"and\" ...\n    \"or\" ...\n\nWhen this is displayed by the container in an HTML formatted error page (like\nthe one used by Tomcat 4), the <GT>, <LT> etc. operators are not displayed.\nI suggest avoiding greater-than and less-than characters in all error\nmessages (even though this could be fixed by the container if it encoded all\nexception messages).", "id": 11718, "time": "2002-03-13T02:00:25Z", "creator": "hans@gefionsoftware.com", "creation_time": "2002-03-13T02:00:25Z", "is_private": false}, {"count": 1, "text": "It's extremely hard to find out which expression is invalid even in a modestly\ncomplex page with a few expressions. The line and column number in the exception\nmessage are confusing since they refer to the line/column in a single expression,\nnot a line/column in the page (which is basically impossible to accomplish in\nJSP 1.2).\n\nI suggest the complete expression being parsed be included in the exception\nmessage. That would make it a lot easier to find out where the problem lies.", "creator": "hans@gefionsoftware.com", "attachment_id": null, "id": 11720, "time": "2002-03-13T07:01:55Z", "bug_id": 7067, "creation_time": "2002-03-13T07:01:55Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 7067, "attachment_id": null, "id": 11774, "time": "2002-03-14T04:45:32Z", "creator": "hans@gefionsoftware.com", "creation_time": "2002-03-14T04:45:32Z", "is_private": false, "text": "One more thought: isn't the TLV supposed to check EL syntax? If so, it should\nbe able to report real line numbers for syntax errors using the jsp.id element\nfor the action element (at least in a container that suppors jsp.id attributes).\n\nThere may still be occasional EL runtime errors, so my previous comment about\nincluding the complete expression in the exception message still applies."}, {"count": 3, "tags": [], "bug_id": 7067, "text": "I've separated Hans' additional comments about including the complete\nexpression in the error message to bug 7158\n", "id": 11856, "time": "2002-03-15T21:14:46Z", "creator": "arista@atg.com", "creation_time": "2002-03-15T21:14:46Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 7067, "attachment_id": null, "text": "Regarding the original bug (exception contains HTML-like element), I\ndon't think the JSTL is the right place to fix this.  This really\nseems like it should be the container's responsibility, since the\ncontainer is choosing to show the exception to the end user, and\ntherefore should take on the responsibility of formatting the\nexception correctly.\n\nIf we change our error message to be formatted to particular markup\nconventions, then we're making assumptions about how the exception\nwill be displayed.  For example, what if it's going to be displayed in\ntwo different formats, such as HTML and a log entry?  Unless the\ncontainer is responsible for the formatting, one of those outputs is\ngoing to look wrong.\n", "id": 12075, "time": "2002-03-20T14:08:54Z", "creator": "arista@atg.com", "creation_time": "2002-03-20T14:08:54Z", "is_private": false}]