[{"count": 0, "tags": [], "creator": "jingxue@digizenstudio.com", "text": "The following throws an \"exitVM disallowed\" error in 1.7.0 due to the related\nbug fix:\n  <target name=\"usage\" description=\"This usage help\">\n    <java classname=\"org.apache.tools.ant.launch.Launcher\">\n      <arg value=\"-projecthelp\"/>\n    </java>\n  </target> \n\nStrangely the following doesn't work either, by complaining not having\npermission for \"java.util.PropertyException ant.home read\".\n  <target name=\"usage\" description=\"This usage help\">\n    <java classname=\"org.apache.tools.ant.launch.Launcher\">\n      <arg value=\"-projecthelp\"/>\n      <grant class=\"java.lang.AllPermission\"/>\n      <grant class=\"java.lang.RuntimePermission\" name=\"exitVM.*\"/>\n    </java>\n  </target> \n\nI changed the default constructor of types.Permissions to set delegateToOldSM to\ntrue, that seems to have solved the problem. Unfortunately there isn't anyway\n(that I can find) to set delegateToOldSM from an ant script. Is it possible to\nexpose it as an attribute on <permissions>? Or at least change its default value\nto true?", "id": 100112, "time": "2007-03-06T20:12:49Z", "bug_id": 41776, "creation_time": "2007-03-06T20:12:49Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 41776, "attachment_id": null, "text": "(In reply to comment #0)\n>   <target name=\"usage\" description=\"This usage help\">\n>     <java classname=\"org.apache.tools.ant.launch.Launcher\">\n>       <arg value=\"-projecthelp\"/>\n>       <grant class=\"java.lang.AllPermission\"/>\n>       <grant class=\"java.lang.RuntimePermission\" name=\"exitVM.*\"/>\n\nOne more thing - that above line is for JDK 1.6. For JDK 1.5, it should be:\n       <grant class=\"java.lang.RuntimePermission\" name=\"exitVM\"/>\n\n>     </java>\n>   </target> \n", "id": 100113, "time": "2007-03-06T20:14:25Z", "creator": "jingxue@digizenstudio.com", "creation_time": "2007-03-06T20:14:25Z", "is_private": false}, {"count": 2, "tags": [], "creator": "jkf@apache.org", "text": "Thanks for the report.\n\nFixed in head\n\nAt least in java 1.5 it is java.security.AllPermission, not java.lang.\nThe grants must be in the <permissions> part.\nFor some reason the AllPermission is not resolved in later stages.\n\n", "id": 102166, "time": "2007-04-23T14:49:56Z", "bug_id": 41776, "creation_time": "2007-04-23T14:49:56Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "bloch@clearwellsystems.com", "attachment_id": null, "id": 114497, "time": "2008-03-11T11:29:16Z", "bug_id": 41776, "creation_time": "2008-03-11T11:29:16Z", "is_private": false, "text": "I'm hitting this in 1.7.0 and can't take HEAD.\n\nIs there a way to workaround this bug in 1.7.0 without patching?\n\nThat is, can I easily override something in a subclass of Java.java?\n\nThanks,\nEric\n\n"}]