[{"count": 0, "tags": [], "text": "Setting a classpath in the <java> task:\n\n  <target name=\"bug\">\n    <java classname=\"PrintEnv\" fork=\"false\">\n      <classpath>\n        <pathelement location=\".\"/>\n      </classpath>\n    </java>\n\nThe java program printenv does this:\n\npublic class PrintEnv {\n    public static void main(String args[]) {\n\tString cp = System.getProperty(\"java.class.path\");\n\tSystem.out.println(\"PRINTENV classpath \" + cp);\n    }\n}\n\nThe output is:\nbug:\n     [java] PRINTENV classpath c:\\java\\jakarta-ant-1.5.1\\lib\\xml-\napis.jar;c:\\java\\jakarta-ant-1.5.1\\lib\\xercesImpl.jar;c:\\java\\jakarta-ant-1.5.1\n\\lib\\optional.jar;c:\\java\\jakarta-ant-1.5.1\\lib\\junit-3.8.1.jar;c:\\java\\jakarta-\nant-1.5.1\\lib\\bsf.jar;c:\\java\\jakarta-ant-1.5.1\\lib\\ant.jar;c:\\java\\jakarta-ant-\n1.5.1\\lib\\JUnitDoclet-1.0.2.jar;.;c:\\java\\jakarta-ant-1.5.1\n\\lib\\ant.jar;c:\\java\\jython-2.1\\jython.jar;c:\\java\\j2sdk1.4.1_01\\lib\\tools.jar\n\nI know that there is a bug like this that is in the FAQ for\noptional tasks, but java is a core task.", "is_private": false, "bug_id": 15656, "id": 28250, "time": "2002-12-25T00:57:57Z", "creator": "robert@RobertBlumen.com", "creation_time": "2002-12-25T00:57:57Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "I don't see this as a bug. By setting fork=\"false\" you are running in Ant's\nvirtual machine and therefore you see the java.class.path property of that VM. \n\nRunning within Ant's VM is a convenience but it comes with limitations. These\nlimitations relate to things like classpaths, classloader hierarchy, use of\nSystem.out, etc. If you want a clean VM with an environment the same as would\nexist from the command line you will need to set fork=\"yes\"\n\nMerry Christmas", "is_private": false, "bug_id": 15656, "id": 28251, "time": "2002-12-25T06:07:55Z", "creator": "conor@apache.org", "creation_time": "2002-12-25T06:07:55Z", "attachment_id": null}]