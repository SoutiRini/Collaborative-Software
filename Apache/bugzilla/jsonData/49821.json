[{"count": 0, "tags": [], "bug_id": 49821, "is_private": false, "text": "Using JMX the CLI enables simple status checks of hosts, apps and connectors; it also permits an application to be reloaded, deployed and undeployed. The 'find leaks' function is also exposed.\n\nThe targeted process is identified either by passing a PID, JMX URI, or a JMX port. The CLI can also exploit Java 6 management features to connect to a process localised JMX/RMI connector.\n\nA number of additional strategies are possible, including using the non-standard* Attach API in the Sun/Oracle JVM to enable a management agent and initialise a local JMX/RMI connector if one is not active.\n\nThis, in effect, means that for a single Tomcat running it would be possible to guess which process is the correct target process, attach to it, inject an agent and then connect via JMX, all without having to perform manual JMX configuration.\n\nI will attach code shortly.\n\n* So reflection is used, allowing the CLI to degrade gracefully on other JVMs. In theory, at least.", "id": 139447, "time": "2010-08-25T10:04:53Z", "creator": "pidster@apache.org", "creation_time": "2010-08-25T10:04:53Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Created attachment 25939\nPrebuilt jar for quick testing\n\nTry some commands:\n\n jar -jar tomcat-cli.jar help\n jar -jar tomcat-cli.jar help status\n\nWith a fresh Tomcat installed and running, it should automatically find it and attach to it on a Sun JVM.", "attachment_id": 25939, "bug_id": 49821, "id": 139461, "time": "2010-08-25T14:39:20Z", "creator": "pidster@apache.org", "creation_time": "2010-08-25T14:39:20Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 49821, "is_private": false, "text": "Created attachment 25940\nEclipse project directory, inc source code etc.\n\nThe Eclipse project isn't very big, so I've targz the whole thing.\n\nThere's every possibility that I'll refactor the whole thing.", "id": 139462, "time": "2010-08-25T14:42:46Z", "creator": "pidster@apache.org", "creation_time": "2010-08-25T14:42:46Z", "attachment_id": 25940}, {"count": 3, "tags": [], "bug_id": 49821, "is_private": false, "text": "Created attachment 25948\nImproved jar for testing\n\nFixed some functions, can start, stop, reload an application. status now displays more useful stats", "id": 139493, "time": "2010-08-26T07:13:29Z", "creator": "pidster@apache.org", "creation_time": "2010-08-26T07:13:29Z", "attachment_id": 25948}, {"count": 4, "tags": [], "bug_id": 49821, "attachment_id": 25949, "id": 139494, "time": "2010-08-26T07:49:11Z", "creator": "pidster@apache.org", "creation_time": "2010-08-26T07:49:11Z", "is_private": false, "text": "Created attachment 25949\nAn actual working jar for testing\n\njava -cp catalina.jar:tomcat-cli.jar org.apache.tomcat.cli.CLI start\n\nneeds catalina.jar on the classpath, because webapp.state is an enum, not an integer."}, {"count": 5, "tags": [], "bug_id": 49821, "attachment_id": 25966, "is_private": false, "id": 139589, "time": "2010-08-31T19:59:35Z", "creator": "pidster@apache.org", "creation_time": "2010-08-31T19:59:35Z", "text": "Created attachment 25966\ncomplete rewrite\n\nGround up rewrite, smaller & better in many ways."}]