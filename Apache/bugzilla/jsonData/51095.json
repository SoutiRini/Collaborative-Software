[{"count": 0, "text": "Created attachment 26917\nPatch to AprEndpoint.java\n\nOVERVIEW:\n\nIn all of the most recent versions of Tomcat 7, including Trunk. When running with APR SSL and the site is accessed using an improper SSL handshake, then a SEVERE NullPointerException will is logged into catalina.out.\n\n\nSTEPS TO REPRODUCE:\n\nIt's pretty easy to test this, just type the following:\n\n\ncurl http://localhost:8444/\n\nWhere 8444 is the port that SSL is running on for Tomcat 7. \n\nACTUAL RESULTS:\n\nIf you look in the catalina.out when you do this, you'll see the following stack trace and error message:\n\nApr 20, 2011 1:55:32 AM org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler process\nSEVERE: Error reading request, ignored\njava.lang.NullPointerException\n\tat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:208)\n\tat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:322)\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(AprEndpoint.java:1670)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)\nException in thread \"\"http-apr-8444\"-exec-2727\" java.lang.NullPointerException\n\tat org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(AprEndpoint.java:1673)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\n\n\nEXPECTED RESULTS:\n\nThe expected behavior is for Tomcat to not generate a NullPointerException when someone improperly accesses the SSL port.\n\nBUILD INFO:\n\nTaken from the latest subversion trunk, 1095243.\n\nI've attached a patch that fixes this.", "bug_id": 51095, "is_private": false, "id": 145911, "time": "2011-04-20T12:51:05Z", "creator": "mike.glazer@gmail.com", "creation_time": "2011-04-20T12:51:05Z", "tags": [], "attachment_id": 26917}, {"count": 1, "tags": [], "bug_id": 51095, "attachment_id": null, "is_private": false, "id": 145969, "time": "2011-04-23T17:58:31Z", "creator": "markt@apache.org", "creation_time": "2011-04-23T17:58:31Z", "text": "Many thanks for the report and the patch.\n\nThis has been fixed in 7.0.x and will be included in 7.0.13 onwards."}]