[{"count": 0, "tags": [], "bug_id": 38928, "attachment_id": null, "id": 86707, "time": "2006-03-11T09:30:36Z", "creator": "rmg@terc.edu", "creation_time": "2006-03-11T09:30:36Z", "is_private": false, "text": "Introduced in httpd-1.3.3, the \"VARIANTS\" feature of mod_speling sets the\nVARIANTS environment variable to a list of alternative URL spellings. The\npurpose was to allow an ErrorDocument 300 handler to reformat the list. The\nfeature was added in response to a specific user request -- see\nhttp://archive.apache.org/gnats/2859\n\nBut the feature was promptly broken in httpd-1.3.5, and has been broken in all\nreleases since, so it can hopefully be assumed that no one uses it.\n\nThe format of the VARIANTS list is supposed to be\n\"url\";\"reason\",\"url\";\"reason\"... But when dgaudet made a change (SVN revision\n82699) to fix O(n^2) memory consumption in mod_speling, suddenly the VARIANTS\noutput would contain four extra commas per variant URL... It is now\n\",url,\";\",reason,\",\",url,\";\",reason,\"...\n\nTo fix the bug, you'd need to use apr_pstrcat to assemble the \"url\";\"reason\"\nstring for each variant and then join all the assembled strings with commas.\nWhat happens now is that it places pieces of the strings in an array and then\njoins all the pieces with commas.\n\nBut it's altogether likely that no one would care if it just went away.\n\nSee bug #38923 for an overlapping pending change in mod_speling.\n\nI would also argue that in light of bug #38923, correct usage of VARIANTS would\nbe fairly difficult for an end user even without the stray commas."}]