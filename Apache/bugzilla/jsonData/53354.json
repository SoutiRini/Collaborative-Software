[{"count": 0, "tags": [], "text": "As it's not possible to specify the invocation order in a @WebFilter, users are forced to explicitly specify <filter-mapping> in web.xml. This works in combination with a @WebFilter(filterName) in Glassfish and JBoss AS as follows:\n\n@WebFilter(filterName=\"filter1\")\npublic class Filter1 implements Filter {}\n\n@WebFilter(filterName=\"filter2\")\npublic class Filter2 implements Filter {}\n\nwith\n\n<filter-mapping>\n    <filter-name>filter1</filter-name>\n    <url-pattern>/url1/*</url-pattern>\n</filter-mapping>\n<filter-mapping>\n    <filter-name>filter2</filter-name>\n    <url-pattern>/url2/*</url-pattern>\n</filter-mapping>\n\nHowever it fails in Tomcat 7.0.27 with the following confusing exception (the <url-pattern> *is* been set)\n\nCaused by: java.lang.IllegalArgumentException: Filter mapping must specify either a <url-pattern> or a <servlet-name>\n\tat org.apache.catalina.core.StandardContext.validateFilterMap(StandardContext.java:3009)\n\tat org.apache.catalina.core.StandardContext.addFilterMap(StandardContext.java:2968)\n\tat org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1207)\n\tat org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1294)\n\tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:855)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n\t... 7 more", "attachment_id": null, "id": 159655, "creator": "balusc@gmail.com", "time": "2012-06-03T19:16:25Z", "bug_id": 53354, "creation_time": "2012-06-03T19:16:25Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 53354, "is_private": false, "id": 159661, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2012-06-03T21:18:50Z", "time": "2012-06-03T21:18:50Z", "text": "Thanks for the report. Fixed in trunk and 7.0.x and will be included in 7.0.28 onwards."}]