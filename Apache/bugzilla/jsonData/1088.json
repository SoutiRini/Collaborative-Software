[{"count": 0, "tags": [], "text": "We saw a problem here with looking up the real path of some components we need \nto check at startup of a servlet. The whole thing boils down to this:\n\nStarting tomcat. Check logs/tomcat.log for error messages\n2001-03-23 10:35:05 - ContextManager: Adding context Ctx( /examples )\n2001-03-23 10:35:05 - ContextManager: Adding context Ctx( /admin )\n2001-03-23 10:35:05 - ContextManager: Adding context Ctx(  )\n2001-03-23 10:35:05 - ContextManager: Adding context Ctx( /test )\n2001-03-23 10:35:05 - ContextManager: Adding context Ctx( /TomcatBug )\nStarting BugServlet.\nCalling getRealPath() in init()\n\nreal path of Web-inf/lib/commands.jar\nis:  null\nreal path of WEB-INF/lib/commands.jar\nis:  D:\\tools\\jakarta\\jakarta-tomcat-3.2.1\\webapps\\TomcatBug\\WEB-INF\\lib\\command\ns.jar\n2001-03-23 10:35:06 - PoolTcpConnector: Starting HttpConnectionHandler on 8080\n2001-03-23 10:35:06 - PoolTcpConnector: Starting Ajp12ConnectionHandler on 8007\n\nSo we want to look up something in WEB-INF. Incidentally we got capitalization \nof WEB-INF wrong and getRealPath() returns a null for it. This used to work in \nolder tomcat versions. I wonder what the rationale behind this is or if it is a \nbug. =)\n\nThe servlet I used to produce the above looks like:\n\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletConfig;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport java.io.PrintWriter;\nimport java.io.IOException;\n\npublic class BugServlet extends HttpServlet {\n\n  private void translatePath(String vPath) {\n\n    String realPath = this.getServletContext().getRealPath(vPath);\n\n    System.out.print(\"real path of \");\n    System.out.println(vPath);\n    System.out.print(\"is:  \");\n    System.out.println(realPath);\n  }\n\n  public void init(ServletConfig config) throws ServletException {\n    super.init(config);\n\n    System.out.println(\"Starting BugServlet.\");\n\n    System.out.println(\"Calling getRealPath() in init()\\n\");\n\n    translatePath(\"Web-inf/lib/commands.jar\");\n    translatePath(\"WEB-INF/lib/commands.jar\");\n  }\n\n  public void doGet (HttpServletRequest request,\n                     HttpServletResponse response)\n    throws ServletException, IOException  {\n\n    response.setContentType(\"text/plain\");\n    PrintWriter out = response.getWriter();\n    out.println(\"Called doGet()\\n\");\n    out.println(\"\\n\\n...  Finished Printing.\");\n  }\n}\n\n\nsome comment would be appreciated.\n\nbest regards\n\nThomas", "attachment_id": null, "bug_id": 1088, "id": 1568, "time": "2001-03-23T01:37:34Z", "creator": "muehle@de.ibm.com", "creation_time": "2001-03-23T01:37:34Z", "is_private": false}, {"count": 1, "tags": [], "text": "As of Tomcat 3.2.1, URLs are case sensitive on all platforms.  This change was \nmade to close security holes.  Item 6.7 in doc/readme for Tomcat 3.2.1 \ndescribes this in more detail.", "attachment_id": null, "id": 1583, "creator": "marc.saegesser@apropos.com", "time": "2001-03-23T16:01:17Z", "bug_id": 1088, "creation_time": "2001-03-23T16:01:17Z", "is_private": false}]