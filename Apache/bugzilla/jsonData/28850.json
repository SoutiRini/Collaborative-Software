[{"count": 0, "tags": [], "text": "StringManager gets values from the resource bundle but does not format them \nusing the associated bundle locale but the default locale.\n\nMessageFormat.format(...)\n\nshould be changed to:\n\nMessageFormat mf = new MessageFormat(value, bundle.getLocale());\nmf.format(...)", "attachment_id": null, "bug_id": 28850, "id": 57035, "time": "2004-05-08T20:05:19Z", "creator": "sbailliez@apache.org", "creation_time": "2004-05-08T20:05:19Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "william.barker@wilshire.com", "text": "Fixed in the CVS.\n\nThe patch is slightly different than above, since that adds a JDK 1.4 \ndependancy.", "count": 1, "id": 57041, "time": "2004-05-08T22:07:53Z", "bug_id": 28850, "creation_time": "2004-05-08T22:07:53Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 28850, "attachment_id": null, "text": "Sorry did not pay attention about ctor @since 1.4 however you can modify the \ncode to use the setter which is ok for JDK 1.2+:\n\nMessageFormat mf = new MessageFormat(value);\nmf.setLocale(locale);\n...", "id": 57042, "time": "2004-05-08T22:21:04Z", "creator": "sbailliez@apache.org", "creation_time": "2004-05-08T22:21:04Z", "is_private": false}, {"count": 3, "tags": [], "text": "I'm afraid that the revert patch is not totally correct or I'm missing \nsomething. In the ctor:\n\n        locale = loc;\n        String bundleName = packageName + \".LocalStrings\";\n        try {\n            bundle = ResourceBundle.getBundle(bundleName,loc);\n        } catch( MissingResourceException ex ) {\n            locale = Locale.US;\n            bundle= ResourceBundle.getBundle( bundleName, Locale.US);\n        }\n\na getBundle() calls does not implies it will send you the bundle of the same \nlocale you requested, but will always fallback to the default one without \nlocale identification, ie: LocalStrings.properties which has nothing to do \nwith the requested locale (ie, if you ask a chinese bundle it will tell you \nthe locale is chinese while the bundle locale is more than certainly english \nand you will end up formatting english messages using chinese locale. \n\nThe try/catch is also a bit irrelevant as the MissingResource will be thrown \nif there are no default bundle (LocalStrings.properties)\n\nOnce again, I might be wrong as I went quickly over the code and maybe I \nmissed something.", "is_private": false, "bug_id": 28850, "id": 57103, "time": "2004-05-10T15:27:07Z", "creator": "sbailliez@apache.org", "creation_time": "2004-05-10T15:27:07Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "Stephane is right:\n\n- We need to determine the *actual* locale by calling getLocale() on the\n  resource bundle that was retrieved. This locale may be different from the\n  locale that was requested. In the \"worst\" case (ie., if\n  \"LocalStrings.properties\" was the best match for the requested locale,\n  getLocale() will return the empty locale.\n\n- The try/catch (for MissingResourceException) seems to be redundant, as\n  \"LocalStrings.properties\" will be matched in the \"worst\" case.\n\nCommitted corresponding patch.", "is_private": false, "bug_id": 28850, "id": 57233, "time": "2004-05-11T22:10:22Z", "creator": "jan.luehe@sun.com", "creation_time": "2004-05-11T22:10:22Z", "attachment_id": null}]