[{"attachment_id": null, "tags": [], "creator": "arvind.srinivasan@sun.com", "is_private": false, "count": 0, "id": 99054, "time": "2007-02-07T04:02:01Z", "bug_id": 41557, "creation_time": "2007-02-07T04:02:01Z", "text": "I just checked out the 6.0.x trunk and ran into a problem downloading the\nexternals using 'ant download'.\n\nThe \"Building Tomcat\" section of\nhttp://tomcat.apache.org/tomcat-6.0-doc/building.html contains the following:\n# ----- Proxy setup -----\n# Uncomment if using a proxy server.\n#proxy.host=proxy.domain\n#proxy.port=8080\n#proxy.use=on\n\nThe top-level build.xml however seems to refer to a variable named useproxy to\nenable proxying.\n\nThe following simple diff fixed the problem for me:\n\nIndex: build.xml\n===================================================================\n--- build.xml   (revision 504505)\n+++ build.xml   (working copy)\n@@ -503,7 +503,7 @@\n   </target>\n\n   <!-- Download and dependency building -->\n-  <target name=\"setproxy\"  if=\"useproxy\">\n+  <target name=\"setproxy\"  if=\"proxy.use\">\n     <taskdef name=\"setproxy\"\n             classname=\"org.apache.tools.ant.taskdefs.optional.net.SetProxy\" />\n     <setproxy proxyhost=\"${proxy.host}\" proxyport=\"${proxy.port}\"/>"}, {"attachment_id": null, "tags": [], "creator": "hanafey@dna.es.dupont.com", "is_private": false, "count": 1, "id": 100851, "time": "2007-03-23T16:44:28Z", "bug_id": 41557, "creation_time": "2007-03-23T16:44:28Z", "text": "*** Bug 41782 has been marked as a duplicate of this bug. ***"}, {"count": 2, "tags": [], "bug_id": 41557, "text": "IMHO, this issue is a real bug to build Tomcat. So I think the severity should\nbe \"minor\".", "id": 101154, "time": "2007-03-29T05:50:17Z", "creator": "kanekotky@gmail.com", "creation_time": "2007-03-29T05:50:17Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "funkman@joedog.org", "is_private": false, "count": 3, "id": 106998, "time": "2007-08-21T17:55:53Z", "bug_id": 41557, "creation_time": "2007-08-21T17:55:53Z", "text": "proxy.use is checked during the proxyflags which setproxy depends on.\n\nSo when I add to my build.properties those 3 uncommented lines - I get this:\nBuildfile: build.xml\n\ndownload:\n\nproxyflags:\n\nsetproxy:\n     [echo] Using proxy.domain:8080 to download\nhttp://archive.apache.org/dist/tomcat/tomcat-connectors/native/tomcat-native-1.1.10-src.tar.gz\n\n\n\nSo the setproxy is being executed.\n\nAn alternate is to remove the detection and rely on \nANT_OPTS=\"-Dhttp.proxyHost=proxy -Dhttp.proxyPort=8080\" as stated here:\n\nhttp://ant.apache.org/manual/proxy.html\n"}, {"count": 4, "text": "Closing this as invalid based on Tim's comments which show the proxy handling is\nworking as intended.", "bug_id": 41557, "is_private": false, "id": 112928, "time": "2008-01-16T15:52:01Z", "creator": "markt@apache.org", "creation_time": "2008-01-16T15:52:01Z", "tags": [], "attachment_id": null}]