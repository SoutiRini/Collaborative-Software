[{"count": 0, "tags": [], "creator": "mjremijan@yahoo.com", "attachment_id": null, "text": "I ran into an interesting bug.  The password for my database was recently \nchanged and the password contains the '$' character.  When I updated server.xml \nand started Tomcat I got invalid username/password errors.  I dug into the \nproblem a little deeper and found that if I set the password value to \nbe \"abc$123\" then when the value got down to the Oracle driver it would \nbe \"abc123\" with the $ character removed.  \n\n    <ResourceParams name=\"jdbc/agcc_iis\">           \n      <parameter>\n        <name>password</name>\n        <value>abc$123</value>\n      </parameter>\n    </ResourceParams>\n\nDigging deeper I found the source of the problem to be the \norg.apache.tomcat.util.IntrospectionUtils class, specifically the method:\n\npublic static String replaceProperties(String value, Hashtable staticProp, \nPropertySource dynamicProp[] ) { ...  }\n\nI guessing that if this method does not find something of the pattern ${...} \nthen it tries to put the string back together again but it's not putting it \nback together again properly because I loose my '$'.  Plus I don't see anything \nin the code which would allow me to escape the processing.", "id": 98519, "time": "2007-01-25T10:07:53Z", "bug_id": 41467, "creation_time": "2007-01-25T10:07:53Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 41467, "attachment_id": null, "id": 100355, "time": "2007-03-13T14:37:26Z", "creator": "asf-bugzilla@richardfearn.co.uk", "creation_time": "2007-03-13T14:37:26Z", "is_private": false, "text": "This is the same problem as reported in bug 32719. That bug was reported against\n5.5.4, and has been fixed since 5.5.7 (January 2004). The fix was made here:\n\nhttp://svn.apache.org/viewvc/tomcat/connectors/trunk/util/java/org/apache/tomcat/util/IntrospectionUtils.java?r1=299808&r2=300044&diff_format=h\n\nAre you unable to upgrade to 5.5?\n\nI'll attach a simple test case anyway. It needs to be run with\nTOMCAT/server/lib/tomcat-util.jar on the classpath. For 5.0.28 and 5.0.30, the\n'$' is removed. For 5.5.23 it isn't removed.\n"}, {"count": 2, "tags": [], "text": "Created attachment 19705\nTest to see whether IntrospectionUtils removes '$'\n\nNeeds to be run with TOMCAT/server/lib/tomcat-util.jar on the classpath.", "is_private": false, "bug_id": 41467, "id": 100356, "time": "2007-03-13T14:39:05Z", "creator": "asf-bugzilla@richardfearn.co.uk", "creation_time": "2007-03-13T14:39:05Z", "attachment_id": 19705}, {"count": 3, "tags": [], "text": "> This is the same problem as reported in bug 32719. That bug was reported\n> against 5.5.4, and has been fixed since 5.5.7 (January 2004). The fix was\n> made here:\n\nOops - Tomcat 5.5.7 was released in January 2005, not 2004 :-)", "attachment_id": null, "id": 100357, "creation_time": "2007-03-13T14:50:54Z", "time": "2007-03-13T14:50:54Z", "creator": "asf-bugzilla@richardfearn.co.uk", "bug_id": 41467, "is_private": false}, {"count": 4, "tags": [], "creator": "markt@apache.org", "text": "There has been little to no development on the 5.0.x branch for some time.\nRealistically, this isn't going to get fixed in this branch.", "id": 100367, "time": "2007-03-13T21:39:22Z", "bug_id": 41467, "creation_time": "2007-03-13T21:39:22Z", "is_private": false, "attachment_id": null}]