[{"count": 0, "tags": [], "bug_id": 30710, "text": "When defining a taskdef i get an error about com.sun.tools.ant.Task not being\nfound, by the class that i define. (check xml below). \nThis is with the sun-jdk 1.4.2.05, if i switch from jdk to the ibm-jdk-bin-1.4.2\nthe error is resolved. \nI find it weird that this problem exists...\n\nlisting 1: xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project name=\"art41\" default=\"generate.sources\" basedir=\".\">\n    <path id=\"classpath.lib\">\n        <fileset dir=\"/opt/jars\">\n             <include name=\"hyperjaxb.jar\"/>\n             <include name=\"jaxb-xjc.jar\"/>\n             <include name=\"xsdlib.jar\"/>\n             <include name=\"xercesImpl.jar\"/>\n             <include name=\"sax.jar\"/>\n        </fileset>\n    </path>\n   <target name=\"generate.sources\">\n       <taskdef name=\"xjc\" classname=\"com.sun.tools.xjc.XJCTask\"\nclasspathref=\"classpath.lib\"/>\n        <mkdir dir=\"gen\"/>\n        <xjc schema=\"xml_schema_article41.xsd\" target=\"gen\"\nclasspathref=\"classpath\">\n            <arg line=\"-Xhibernate-xdoclets\"/>\n        </xjc>\n     </target>\n</project>\n\n\nlisting 2: ant output\n\nSeJo@versake article41 $ ant -f test.xml -d -v\nApache Ant version 1.6.2 compiled on August 17 2004\nApache Ant version 1.6.2 compiled on August 17 2004\nBuildfile: test.xml\nDetected Java version: 1.4 in: /opt/sun-jdk-1.4.2.05/jre\nDetected OS: Linux\nparsing buildfile /home/SeJo/workspace/article41/test.xml with URI =\nfile:///home/SeJo/workspace/article41/test.xml\nProject base dir set to: /home/SeJo/workspace/article41\nBuild sequence for target `generate.sources' is [generate.sources]\nComplete build sequence is [generate.sources, ]\n\ngenerate.sources:\n\nBUILD FAILED\n/home/SeJo/workspace/article41/test.xml:13: taskdef A class needed by class\ncom.sun.tools.xjc.XJCTask cannot be found: org/apache/tools/ant/Task\n        at org.apache.tools.ant.taskdefs.Definer.addDefinition(Definer.java:487)\n        at org.apache.tools.ant.taskdefs.Definer.execute(Definer.java:183)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nCaused by: java.lang.NoClassDefFoundError: org/apache/tools/ant/Task\n        at java.lang.ClassLoader.defineClass0(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:539)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:123)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:251)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:55)\nat java.net.URLClassLoader$1.run(URLClassLoader.java:194)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:187)\n at java.lang.ClassLoader.loadClass(ClassLoader.java:289)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:282)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:274)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:282)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n        at\norg.apache.tools.ant.AntClassLoader.findBaseClass(AntClassLoader.java:1180)\n        at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:956)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:219)\n        at org.apache.tools.ant.taskdefs.Definer.addDefinition(Definer.java:457)\n        ... 11 more\n--- Nested Exception ---\njava.lang.NoClassDefFoundError: org/apache/tools/ant/Task\n        at java.lang.ClassLoader.defineClass0(Native Method)\n        at java.lang.ClassLoader.defineClass(ClassLoader.java:539)\n        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:123)\n        at java.net.URLClassLoader.defineClass(URLClassLoader.java:251)\n        at java.net.URLClassLoader.access$100(URLClassLoader.java:55)\nat java.net.URLClassLoader$1.run(URLClassLoader.java:194)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:187)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:289)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:282)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:274)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:282)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n        at\norg.apache.tools.ant.AntClassLoader.findBaseClass(AntClassLoader.java:1180)\n        at org.apache.tools.ant.AntClassLoader.loadClass(AntClassLoader.java:956)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:219)\n        at org.apache.tools.ant.taskdefs.Definer.addDefinition(Definer.java:457)\n        at org.apache.tools.ant.taskdefs.Definer.execute(Definer.java:183)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\n\nTotal time: 8 seconds", "id": 62077, "time": "2004-08-17T14:48:20Z", "creator": "sejo@gentoo.org", "creation_time": "2004-08-17T14:48:20Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 30710, "text": "Please provide the urls of the jars needed to reproduce\nthis problem and the xsd's files to complete the test", "id": 67803, "time": "2004-12-02T18:47:19Z", "creator": "peterreilly@apache.org", "creation_time": "2004-12-02T18:47:19Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "is_private": false, "id": 70176, "time": "2005-01-27T15:55:45Z", "bug_id": 30710, "creation_time": "2005-01-27T15:55:45Z", "text": "Maybe this is one of those fancy sun classloader features -you know, where stuff\nin endorsed packages only get loaded if they are from endorsed directories. \n\nIf this is the case, there is not a lot we can do here. "}, {"count": 3, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "is_private": false, "id": 75448, "time": "2005-05-26T21:56:45Z", "bug_id": 30710, "creation_time": "2005-05-26T21:56:45Z", "text": "Firstly, the class not found is org.apache.tools.ant.Task, not com.sun..."}, {"count": 4, "tags": [], "creator": "peterreilly@apache.org", "text": "The jaxb-xjc.jar in the hyperjaxb project currently\ncauses a \"IncompatibleClassChangeError\" when used\nwith the <typedef>. I downloaded the jaxb-xjc.jar from\nthe jaxb project and the xjc task works ok.\n\nMarking as invalid.", "id": 92980, "attachment_id": null, "bug_id": 30710, "creation_time": "2006-09-04T11:54:32Z", "time": "2006-09-04T11:54:32Z", "is_private": false}]