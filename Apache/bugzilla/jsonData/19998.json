[{"attachment_id": null, "tags": [], "creator": "jim.clark@idea.com", "is_private": false, "count": 0, "id": 37363, "time": "2003-05-16T21:51:41Z", "bug_id": 19998, "creation_time": "2003-05-16T21:51:41Z", "text": "According to the CGIServlet JavaDocs, the following url:\n   http://localhost:8080/<web-app>/cgi-bin/dir1/script/pathinfo1 \nShould set the PATH_INFO env. var to \"/pathinfo1\".  \n\nHowever, this does not occur. Instead, it results in the error page displaying \npath_info as \"/script/pathinfo1\".\n\nThe problem, I believe, is in the findCGI method of the CGIServlet and \ntokenization of the url:\n            new StringTokenizer(pathInfo, File.separator);\n\nOn my platform, File.separator = \"\\\".  If you change the code to:\n            new StringTokenizer(pathInfo, \"/\");  //forward slash\nthe path_info is resolved correctly.\n\nJim\n\n-------------------------------------------------------------\nI set up a simple perl script to dump the env. vars:\n#!d:\\Perl\\bin\\perl.exe\nprint \n   \"Content-type: text/plain\\n\\n\";\n\nforeach $var (\n   sort keys %ENV) {\n   print \n      \"$var=\\\"$ENV{$var}\\\"\\n\";\n}\n\n@values = split(\n   /&/,$ENV{'QUERY_STRING'});\nforeach $i (@values) {\n   ($varname, $mydata) = split(\n      /=/,$i);\n   print \"$varname = $mydata\\n\";\n}"}, {"count": 1, "tags": [], "text": "As the original developer, I will submit a patch based on this recommendation.", "attachment_id": null, "id": 50099, "creator": "martin@martindengler.com", "time": "2004-01-05T20:21:21Z", "bug_id": 19998, "creation_time": "2004-01-05T20:21:21Z", "is_private": false}, {"count": 2, "tags": [], "text": "Applied patch as suggested by Martin Dengler below:\nHello\n\nThis one-line patch fixes Bugzilla bug # 19998.  The patch was suggested\nby Jim Clark (in the bug report) and Doug Sauder (most recently).\n\nI am the original author of CGIServlet\n(jakarta-tomcat-\ncatalina/catalina/src/share/org/apache/catalina/servlets/CGIServlet.java) and \nsupport the application of this patch.\n\nMartin\n\n---\nIndex: catalina/src/share/org/apache/catalina/servlets/CGIServlet.java\n===================================================================\nRCS file:\n/home/cvspublic/jakarta-tomcat-\ncatalina/catalina/src/share/org/apache/catalina/servlets/CGIServlet.java,v\nretrieving revision 1.10\ndiff -u -r1.10 CGIServlet.java\n--- catalina/src/share/org/apache/catalina/servlets/CGIServlet.java    \n13 Dec 2003 22:49:30 -0000      1.10\n+++ catalina/src/share/org/apache/catalina/servlets/CGIServlet.java    \n5 Jan 2004 20:23:39 -0000\n@@ -898,7 +898,7 @@\n  \n             File currentLocation = new File(webAppRootDir);\n             StringTokenizer dirWalker =\n-            new StringTokenizer(pathInfo, File.separator);\n+            new StringTokenizer(pathInfo, \"/\");\n             if (debug >= 3) {\n                 log(\"findCGI: currentLoc=\" + currentLocation);\n             }\n", "is_private": false, "id": 50102, "creator": "yoavs@computer.org", "time": "2004-01-05T20:41:15Z", "bug_id": 19998, "creation_time": "2004-01-05T20:41:15Z", "attachment_id": null}]