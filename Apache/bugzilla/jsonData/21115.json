[{"count": 0, "tags": [], "bug_id": 21115, "attachment_id": null, "text": "Description:\nIn org.apache.catalina.realm.JDBCRealm, the method \"protected Principal \ngetPrincipal(String username)\", implementing an abstract method inherited from \norg.apache.catalina.realm.RealmBase is not properly implemented : it simply \nreturns null. The consequence is that if any client with a valid HTTPS \ncertificate tries to connect to a webapp with CLIENT-CERT authorization login, \nhe will not be identified by the system and get a HTTP402 error (something \ntelling that his credentials are not sufficient...).\n\nA Solution:\nIn order to make it work, I simply implemented that method as follows:\nprotected Principal getPrincipal(String username) {\n\tPrincipal result = authenticate(username, \"tomcat\");\n\treturn result;\n}\nIn the DB, for each client you have to put the full DN of the client \ncertificate into the 'login' column, and 'tomcat' as password.", "id": 39489, "time": "2003-06-26T15:10:59Z", "creator": "benjamin.bonnet@francetelecom.com", "creation_time": "2003-06-26T15:10:59Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 21115, "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 7813 ***", "id": 39514, "time": "2003-06-26T19:11:14Z", "creator": "william.barker@wilshire.com", "creation_time": "2003-06-26T19:11:14Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 21115, "attachment_id": null, "id": 39515, "creation_time": "2003-06-26T19:12:09Z", "time": "2003-06-26T19:12:09Z", "creator": "william.barker@wilshire.com", "text": "Reopening to put the right bug# in", "is_private": false}, {"count": 3, "tags": [], "bug_id": 21115, "attachment_id": null, "id": 39516, "creation_time": "2003-06-26T19:12:40Z", "time": "2003-06-26T19:12:40Z", "creator": "william.barker@wilshire.com", "text": "\n\n*** This bug has been marked as a duplicate of 7831 ***", "is_private": false}]