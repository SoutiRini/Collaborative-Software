[{"count": 0, "attachment_id": null, "bug_id": 40996, "text": "Since upgrading from Tomcat Connectors 1.2.15 to 1.2.19 we find that session\naffinity between apache and a tomcat/jboss instance is lossed. It appears that\nthe connector will quite frequently direct traffic to the first worker in a LB\npool rather than the one with the correct JVMRoute for the session.\n\nRolling back to 1.2.15 has resolved this issue. No other conf changes were made\nas part of this upgrade.", "id": 95954, "time": "2006-11-17T22:54:44Z", "creator": "simon.lorenz@fresca.co.uk", "creation_time": "2006-11-17T22:54:44Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 40996, "attachment_id": null, "id": 95957, "time": "2006-11-18T03:26:29Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2006-11-18T03:26:29Z", "is_private": false, "text": "Please attach your config (relevant parts of httpd.conf or included files,\nworkers.properties, uriworkermap.properties, relevant parts of server.xml) and\ngive details on the versions of apache, tomcat and opertaing system you use.\n\nFurthermore: \n\nAre there any error messages in apache logfiles, especially in the mod_jk.log?\n\nCan you reproduce the problem?\n\nDoes your application use URL rewriting or Cookies to establish sessions?\n\nTo collect some more runtime information, please add the following to your\nApache LogFormat:\n\n\\\"%{Set-Cookie}i\\\" \\\"%{Cookies}o\\\" %{JK_WORKER_NAME}n %{JK_WORKER_TYPE}n\n%{JK_REQUEST_DURATION}n %{JK_LB_FIRST_NAME}n %{JK_LB_FIRST_VALUE}n \n%{JK_LB_FIRST_ACCESSED}n %{JK_LB_FIRST_ERRORS}n %{JK_LB_FIRST_BUSY}n\n%{JK_LB_FIRST_STATE}n %{JK_LB_LAST_NAME}n %{JK_LB_LAST_VALUE}n\n%{JK_LB_LAST_ACCESSED}n %{JK_LB_LAST_ERRORS}n %{JK_LB_LAST_BUSY}n\n%{JK_LB_LAST_STATE}n %D \n"}, {"count": 2, "tags": [], "bug_id": 40996, "attachment_id": null, "id": 97885, "time": "2007-01-10T06:20:21Z", "creator": "m.turra@kion.it", "creation_time": "2007-01-10T06:20:21Z", "is_private": false, "text": "I have the same problem with JK 1.2.20.\n\nI have this strange behaviors I found in mod_jk.log\n\nStick session is true and my session is on jvm_web1 route, because I found this:\n\n> service::jk_lb_worker.c (840): service sticky_session=1\nid='0D8CB99EBC3F747DA5B66183C67C8BF6.jmv_web1' \n\n\n>get_most_suitable_worker::jk_lb_worker.c (733): searching worker for partial\nsessionid 0D8CB99EBC3F747DA5B66183C67C8BF6.jmv_web1\n>get_most_suitable_worker::jk_lb_worker.c (741): searching worker for session\nroute jmv_web1 \n>get_most_suitable_worker::jk_lb_worker.c (785): found best worker jvm_web2\n(jvm_web2) using  method 'Request'\n\nBut it found jvm_web2 as best worker!\n\n"}, {"count": 3, "attachment_id": null, "bug_id": 40996, "text": "Sorry, I misspelled jvm with jmv!\n\nNow it works fine.\n\n", "id": 97901, "time": "2007-01-10T08:44:58Z", "creator": "m.turra@kion.it", "creation_time": "2007-01-10T08:44:58Z", "tags": [], "is_private": false}]