[{"count": 0, "tags": [], "creator": "s.shiva.p@gmail.com", "text": "Hello All,\n\nOS: RHEL 6 64 bit machine.\n\nGetting segmentation fault with the wrong reference pointer from ap_get_module_config.\n\nhere while creating the ga_vs_config for module config in the code below(vs_config apr_palloc (p, s), it's returning the address 0x8477930, but while getting the reference from ap_get_module_config (vs_config = (ga_vs_config *)ap_get_module_config), it's returning 0x2009 and causing segmentation fault while assigning vsid to it (vs_config->vsid = vsid).\n\nNote: The issue is specific to 32 bit webserver on 64 bit machine, the same is working fine with 64 bit apache 2.4 webserver.\n\ncan you please advice on the same.\n\n13807 - -143320688 - ga_create_server_config: no name 0x841a0a8 0x845b9f0\n13807 - -143320688 - ga_create_server_config: rhel6\n 0x841a0a8 0x8477930\n13807 - -143320688 - cmd_gavsid: vs_config, module_index 27 0x2009 0x2009\n13807 - -143320688 - cmd_gavsid: server_rec 0x84449c0\n13807 - -143320688 - cmd_gavsid: server_rec->module_config 0x84449c0\n\ntypedef struct ga_vs_config\n{\n   char *vsid;\n   char *vsname;          // Don't know if applicable yet\n} ga_vs_config;\n\n\nfrom   ga_create_server_config for creating the module config file\n\nvs_config = (ga_vs_config *) apr_palloc (p, sizeof(ga_vs_config));\n\n\n\nvs_config = (ga_vs_config *)ap_get_module_config((s)?s->module_config:NULL, &ga_module);\n\n                        if(vs_config)\n                                vs_config->vsid = vsid;\n                }\n\n\nmodule AP_MODULE_DECLARE_DATA ga_module =\n{\n   STANDARD20_MODULE_STUFF,\n      NULL,                    /* per-directory config creator */\n      NULL,                    /* dir config merger */\n      ga_create_server_config, /* server config creator */\n      NULL,                    /* server config merger */\n      ga_cmds,                 /* command table */\n      ga_register_hooks,       /* set up other request processing hooks */\n};\n\nThanks,\nShiva", "id": 175521, "time": "2014-05-28T13:00:59Z", "bug_id": 56571, "creation_time": "2014-05-28T13:00:59Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "text": "Doesn't seem like any sign the bug is in the server vs your under-development module.\n\nI suggest you post a complete example (without ambiguity over e.g. s==NULL)to modules-dev@httpd.apache.org and re-open this bug if you find a defect.", "id": 175524, "time": "2014-05-28T13:19:51Z", "bug_id": 56571, "creation_time": "2014-05-28T13:19:51Z", "is_private": false}]