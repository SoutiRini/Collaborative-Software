[{"attachment_id": 34593, "tags": [], "bug_id": 60553, "text": "Created attachment 34593\nThree files with coredump and error log\n\nS.O Version: \n\nRed Hat Enterprise Linux Server release 7.2 (Maipo)\n\nuname -a\nLinux ejld1132.ejgvdns 3.10.0-327.13.1.el7.x86_64 #1 SMP Mon Feb 29 13:22:02 EST 2016 x86_64 x86_64 x86_64 GNU/Linux\n\nApache httpd version:\n\n/opt/apache2/bin/httpd -v\nServer version: Apache/2.4.25 (Unix)\nServer built:   Jan  4 2017 09:34:36\n\n/opt/apache2/bin/httpd -l\nCompiled in modules:\n  core.c\n  mod_so.c\n  http_core.c\n  worker.c\n\n-----------------------------------------------------------\n\nProblem:\n\nWhen we run apache httpd with a balancer configured\n\n<Proxy balancer://cluster_namenode>\n        BalancerMember http://ejld1132.ejgvdns:8170 hcmethod=GET hcinterval=5 hcpasses=1 hcfails=1 hcuri=/webhdfs/v1/data?op=GETFILESTATUS\n        BalancerMember http://ejld1131.ejgvdns:8170 hcmethod=GET hcinterval=5 hcpasses=1 hcfails=1 hcuri=/webhdfs/v1/data?op=GETFILESTATUS\n</Proxy>\n\nWe are using this balancer to deal with the hdfs namenode high availability. Usually ejld1131 is the active one, and the other is in standby mode. So requests to ejld1132 responds with 403 code and is marked as DISABLED. Ejld1131 responds with 200 code.\n\nit starts working properly. We have make tests with jmeter with good results but sometimes \"Segmentation Fault\" alert appears on error log.\n\nAnyway it continues working but not everytime. After segmentation fault sometimes mod_proxy_hcheck doesn't find defined workers properly and requests don't work. After another \"Segmentation Fault\" workers are restarted again and it starts working well.\n\nFragments of error log with this problem located are attached.\n\nThanks", "count": 0, "id": 195862, "time": "2017-01-05T08:55:04Z", "creator": "egandarias@gfi.es", "creation_time": "2017-01-05T08:55:04Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 60553, "text": "Is there anyway you could run with a build that lacks optimization?", "count": 1, "id": 195893, "time": "2017-01-06T16:40:46Z", "creator": "jim@apache.org", "creation_time": "2017-01-06T16:40:46Z", "is_private": false}, {"count": 2, "tags": [], "creator": "jim@apache.org", "attachment_id": null, "text": "I cannot see, based on the snippet below, where httpd is creating these weirdly named workers:\n\n[Wed Jan 04 07:25:22.072715 2017] [proxy:debug] [pid 18267:tid 140685705389824] proxy_util.c(1779): AH00925: initializing worker A\\xaa\\xadz\\xc9\"\\xc3Njld1131. shared\n[Wed Jan 04 07:25:22.072717 2017] [proxy:debug] [pid 18267:tid 140685696997120] proxy_util.c(1779): AH00925: initializing worker 7eb720 shared\n[Wed Jan 04 07:25:22.072722 2017] [proxy:debug] [pid 18267:tid 140685705389824] proxy_util.c(1821): AH00927: initializing worker A\\xaa\\xadz\\xc9\"\\xc3Njld1131. local\n[Wed Jan 04 07:25:22.072725 2017] [proxy:debug] [pid 18267:tid 140685696997120] proxy_util.c(1821): AH00927: initializing worker 7eb720 local", "id": 195894, "time": "2017-01-06T17:09:37Z", "bug_id": 60553, "creation_time": "2017-01-06T17:09:37Z", "is_private": false}, {"count": 3, "tags": [], "creator": "egandarias@gfi.es", "attachment_id": null, "text": "Hello,\n\nFor testing purpose there is no problem, because rigth now we are running this build in dev environment, but we should have an stable version for next environments.\n\nAbout the second question...that's the problem we have found...\n\n[Wed Jan 04 07:25:22.072667 2017] [proxy_hcheck:debug] [pid 18267:tid 140685705389824] mod_proxy_hcheck.c(423): AH03248: Creating hc worker 7ebd00 for http://ejld1131.ejgvdns:8170\n\n[Wed Jan 04 07:25:22.072675 2017] [proxy_hcheck:debug] [pid 18267:tid 140685696997120] mod_proxy_hcheck.c(423): AH03248: Creating hc worker 7eb720 for http://ejld1132.ejgvdns:8170\n\n\n\nIt should take this name: 7ebd00\n\nbut takes the weird name: A\\xaa\\xadz\\xc9\"\\xc3Njld1131\n\n\nOther times takes the same name twice (takes 16f36a0 but not 16f3c80)\n\n[Wed Jan 04 12:17:02.455159 2017] [proxy_hcheck:debug] [pid 24207:tid 139728036820736] mod_proxy_hcheck.c(423): AH03248: Creating hc worker 16f36a0 for http://ejld1132.ejgvdns:8170\n[Wed Jan 04 12:17:02.455162 2017] [proxy_hcheck:debug] [pid 24207:tid 139728254834432] mod_proxy_hcheck.c(423): AH03248: Creating hc worker 16f3c80 for http://ejld1131.ejgvdns:8170\n[Wed Jan 04 12:17:02.455188 2017] [proxy:debug] [pid 24207:tid 139728036820736] proxy_util.c(1779): AH00925: initializing worker 16f36a0 shared\n[Wed Jan 04 12:17:02.455188 2017] [proxy:debug] [pid 24207:tid 139728254834432] proxy_util.c(1779): AH00925: initializing worker 16f36a0 shared\n[Wed Jan 04 12:17:02.455195 2017] [proxy:debug] [pid 24207:tid 139728036820736] proxy_util.c(1821): AH00927: initializing worker 16f36a0 local\n[Wed Jan 04 12:17:02.455200 2017] [proxy:debug] [pid 24207:tid 139728254834432] proxy_util.c(1821): AH00927: initializing worker 16f36a0 local\n\nThe example in info1.txt is when a Segmentation fault occurs but it continues working correctly\n\nThank", "id": 195903, "time": "2017-01-09T07:33:52Z", "bug_id": 60553, "creation_time": "2017-01-09T07:33:52Z", "is_private": false}, {"count": 4, "tags": [], "creator": "jim@apache.org", "attachment_id": null, "text": "Try running under a verbose loglevel. Thx!", "id": 195910, "time": "2017-01-09T15:03:42Z", "bug_id": 60553, "creation_time": "2017-01-09T15:03:42Z", "is_private": false}, {"count": 5, "tags": [], "creator": "egandarias@gfi.es", "attachment_id": null, "text": "Hi,\n\nWhat do you mean about verbose level? Our Apache LogLevel is already in debug mode\n\n#\n# LogLevel: Control the number of messages logged to the error_log.\n# Possible values include: debug, info, notice, warn, error, crit,\n# alert, emerg.\n#\nLogLevel debug\n\nThanks", "id": 195915, "time": "2017-01-09T15:48:26Z", "bug_id": 60553, "creation_time": "2017-01-09T15:48:26Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 60553, "text": "Could you try the patch in bug 60071 which is possibly related?", "id": 195922, "time": "2017-01-09T17:48:16Z", "creator": "ylavic.dev@gmail.com", "creation_time": "2017-01-09T17:48:16Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "creator": "ylavic.dev@gmail.com", "attachment_id": null, "text": "Both crashes likely related, joining the two PRs, and following up there.\n\n*** This bug has been marked as a duplicate of bug 60071 ***", "id": 195928, "time": "2017-01-09T18:09:51Z", "bug_id": 60553, "creation_time": "2017-01-09T18:09:51Z", "is_private": false}]