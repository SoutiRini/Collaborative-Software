[{"count": 0, "tags": [], "bug_id": 52618, "attachment_id": null, "id": 153545, "time": "2012-02-07T10:33:40Z", "creator": "alexander.hertlein@garmin.com", "creation_time": "2012-02-07T10:33:40Z", "is_private": false, "text": "Environment:\n-Jmeter 2.6\n-Windows XP SP3\n\nI have the following setup in a jmeter script (simplified):\n\n+Thread Group\n\n  +Simple Controller 1 <DEACTIVATED>\n    -HTTP Request HTTPClient (fed by the CSV data)\n \n  +WHILE Controller 1(Condition= if <EOF> isn't reached) <DEACTIVATED>\n    -CSV Data Set Config (using csv1)\n    -Module Controller calling: Simple Controller 1\n\n  +WHILE Controller 2(Condition= if <EOF> isn't reached) <DEACTIVATED>\n    -CSV Data Set Config (using csv2)\n    -Module Controller calling: Simple Controller 1\n\n  +WHILE Controller 3(Condition= if <EOF> isn't reached) <DEACTIVATED>\n    -CSV Data Set Config (using csv3)\n    -Module Controller calling: Simple Controller 1\n\n  +IF Controller 1\n    +Transaction Controller 1\n      -Module Controller calling: WHILE Controller 1\n\n  +IF Controller 2\n    +Transaction Controller 2\n      -Module Controller calling: WHILE Controller 2\n.\n.\n.\n\nWhen running this script and the condition of the \"IF Controller 1\" is met the \"WHILE Controller 1\" is never entered as the first Dataset the CSV Data Set Config returns is \"<EOF>\".\nIf condition of \"IF Controller 2\" is met the while loop is executed as normal.\n\nAdditional information:\n-this script is created with jmeter version 2.1 and then updated to 2.2 updated to to 2.4 and now to 2.6\n\nReproducibility:\n-this isn't reproducible with the previous versions\n-when building a script with 2.6 from the scratch using this modular approach it is also not reproducible\n-we use many scripts using this approach and all show the same behaviour. The first CSV Data Set Config if called by Module Controllers always returns \"<EOF>\" as first data\n-we also tried and created a script using the same csv data and while controllers but not using module controller. Here the Bug was also not reproducible \n\nSo our assumption is that it is related to module controllers calling the csv data set config"}, {"count": 1, "tags": [], "text": "(In reply to comment #0)\n\n...\n\n> -this script is created with jmeter version 2.1 and then updated to 2.2 updated\n> to to 2.4 and now to 2.6\n\n...\n\n> -when building a script with 2.6 from the scratch using this modular approach\n> it is also not reproducible\n\n...\n\n> So our assumption is that it is related to module controllers calling the csv\n> data set config\n\nIn which case it looks more like there is an issued with the auto-update of old JMeter test plans.\n\nCan you provide the simplest Test plan that fails?\nIf it's not possible to release the information (even after redacting sensitive information), maybe you can compare a Test Plan that fails with a newly created version of the same plan.", "attachment_id": null, "id": 153548, "creator": "sebb@apache.org", "time": "2012-02-07T11:56:57Z", "bug_id": 52618, "creation_time": "2012-02-07T11:56:57Z", "is_private": false}, {"count": 2, "tags": [], "creator": "alexander.hertlein@garmin.com", "attachment_id": 28277, "id": 153552, "time": "2012-02-07T15:35:03Z", "bug_id": 52618, "creation_time": "2012-02-07T15:35:03Z", "is_private": false, "text": "Created attachment 28277\nTestplan + CSV\n\nI was able to reproduce this also with a testplan  newly created with 2.6. (see attachment)\nSo what I see here:\n- Module Controller 1 somehow influences Module Controller 2\n- Deactivating Module Controller 1 fixes the problem\n- only CSV Data Set Config is affected\n- only the Module Controller 2 is affected"}, {"count": 3, "tags": [], "bug_id": 52618, "attachment_id": null, "id": 153553, "time": "2012-02-07T15:44:46Z", "creator": "alexander.hertlein@garmin.com", "creation_time": "2012-02-07T15:44:46Z", "is_private": false, "text": "changing back to NEW"}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 153563, "time": "2012-02-08T01:55:48Z", "bug_id": 52618, "creation_time": "2012-02-08T01:55:48Z", "is_private": false, "text": "Thanks for the test case; I can confirm that there is a problem.\n\nIt seems to be a bug in the Transaction Controller - try disabling \"Generate parent sample\"; the code seems to work OK for me then.\n\nWhen parent sample is selected, it looks like the TC keeps triggering the CSVData set to read the next line until EOF. It does not seem to invoke the sampler at all."}, {"count": 5, "tags": [], "text": "Created attachment 28283\nTestplan without Transaction Controllers + CSV\n\nFirst I deactivated \"generate parent sample\" which doesn't fix the problem.\nThen I replaced transaction controllers with simple controllers, still the same problem. (see attachment)", "is_private": false, "bug_id": 52618, "id": 153576, "time": "2012-02-08T09:01:26Z", "creator": "alexander.hertlein@garmin.com", "creation_time": "2012-02-08T09:01:26Z", "attachment_id": 28283}, {"count": 6, "tags": [], "text": "Created attachment 28293\ntestplan without Module Controllers + CSV\n\nI have found the root of the problem now:\nIf a testplan contains:\n-2 CSV Data Set Configs pointing to the same CSV file\nor\n-2 Module Controllers pointing to the same CSV Data Set config (wich some how is the same like having 2 CSV Data Set Configs pointing to the same CSV file, i guess)\n\nI attached a simple testplan where this problem is clearly visible.\n\nNote:\n-this works perfectly in 2.4", "is_private": false, "id": 153623, "creator": "alexander.hertlein@garmin.com", "time": "2012-02-09T12:35:44Z", "bug_id": 52618, "creation_time": "2012-02-09T12:35:44Z", "attachment_id": 28293}, {"count": 7, "tags": [], "text": "Hello,\nFirst thanks very much for investigating and trying to give us the cleanest Test Plan.\n\nThis \"regression\" has been introduced in 2.5 by bug fix to 50032 (see also 50618).\nThe pb comes from the fact that \n\nI am not sure it should be fixed, because looking at the 3 Test Plans, I wonder why you put the CSV Dataset inside the loop ?\nI understand you want to loop on it but why not put it as Test Plan child and change it's sharing mode ?\n\n\nI wait for your answer and we will decide on dev list what to do.\nThanks\nRegards\nPhilippe", "is_private": false, "id": 153662, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2012-02-10T14:14:12Z", "bug_id": 52618, "creation_time": "2012-02-10T14:14:12Z", "attachment_id": null}, {"count": 8, "text": "Created attachment 28298\nPossible Patch to issue", "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "id": 153663, "time": "2012-02-10T14:22:31Z", "bug_id": 52618, "creation_time": "2012-02-10T14:22:31Z", "tags": [], "attachment_id": 28298}, {"count": 9, "tags": [], "bug_id": 52618, "attachment_id": 28299, "is_private": false, "id": 153664, "time": "2012-02-10T14:23:49Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-02-10T14:23:49Z", "text": "Created attachment 28299\nTest Plan showing issue and using Debug Sampler"}, {"count": 10, "tags": [], "bug_id": 52618, "attachment_id": null, "is_private": false, "id": 153665, "time": "2012-02-10T14:31:12Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-02-10T14:31:12Z", "text": "(In reply to comment #7)\n> Hello,\n> First thanks very much for investigating and trying to give us the cleanest\n> Test Plan.\n> \n> This \"regression\" has been introduced in 2.5 by bug fix to 50032 (see also\n> 50618).\n> The pb comes from the fact that a reInitializeSubController is called when IfController condition is false, this triggers CVSDataSet#iterationStart which ends up consuming the whole CSV file.\n\n> \n> I am not sure it should be fixed, because looking at the 3 Test Plans, I wonder\n> why you put the CSV Dataset inside the loop ?\n> I understand you want to loop on it but why not put it as Test Plan child and\n> change it's sharing mode ?\n> \n> \n> I wait for your answer and we will decide on dev list what to do.\n> Thanks\n> Regards\n> Philippe"}, {"count": 11, "tags": [], "bug_id": 52618, "attachment_id": null, "is_private": false, "id": 153667, "time": "2012-02-10T14:37:16Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-02-10T14:37:16Z", "text": "Note that with provided patch, a StackOverflowError will be generated on attached Test Plan as the If Controller has a condition that is always false from the first iteration."}, {"count": 12, "tags": [], "bug_id": 52618, "attachment_id": null, "id": 153668, "time": "2012-02-10T14:42:47Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-02-10T14:42:47Z", "is_private": false, "text": "With my attached Test Plan and the previous one:\n2.5 => java.lang.StackOverflowError\n2.5.1 => Same behaviour as 2.6"}, {"count": 13, "tags": [], "text": "Created attachment 28304\nPossible Patch to issue v2", "is_private": false, "bug_id": 52618, "id": 153704, "time": "2012-02-12T22:29:57Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-02-12T22:29:57Z", "attachment_id": 28304}, {"count": 14, "tags": [], "creator": "alexander.hertlein@garmin.com", "attachment_id": null, "text": "> I understand you want to loop on it but why not put it as Test Plan child and\n> change it's sharing mode ?\n\nWe want to iterate through the CSV within the thread. Not read next csv line on each thread iteration.", "id": 153720, "time": "2012-02-13T10:20:02Z", "bug_id": 52618, "creation_time": "2012-02-13T10:20:02Z", "is_private": false}, {"count": 15, "tags": [], "text": "This issue is fixed since JMeter 2.12 as part of 56160.\n\nThanks for feedback.\n\n*** This bug has been marked as a duplicate of bug 56160 ***", "attachment_id": null, "bug_id": 52618, "id": 179580, "time": "2014-12-06T15:43:00Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-12-06T15:43:00Z", "is_private": false}]