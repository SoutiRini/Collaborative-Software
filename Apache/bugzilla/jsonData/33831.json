[{"count": 0, "tags": [], "bug_id": 33831, "attachment_id": null, "text": "Hi,\n\nI think there is a problem with the RequestDispatcher when the resource to\nforward is missing because we have no way to know it (before receiving a 404\nHTTP status) in order to try another thing...\n\nIn my tests, I do this :\nWhen my servlet (http://myVhost/proxy/testProxy) forward to another servlet (in\nthe same Context or not):\ntry {\n  ServletContext ctx = getServletContext();\n  ctx = ctx.getContext(\"/myNewContext\"); \n  RequestDispatcher dispatcher = ctx.getRequestDispatcher(\"/myNewServletAlias\");\n  dispatcher.forward(request, response);\n} catch (Exception e) {e.printStackTrace();}\n\n(in server.xml, in the Context /proxy of myVhost, I put crossContext=\"true\")\n\nIf the Context /myNewContext is deployed in myVhost, the HTTPresponse is :\nHTTP/1.1 200 OK\n...\nresponse of myNewServlet\n\nIf the Context /myNewContext is not deployed, the HTTPresponse is :\nHTTP/1.1 404 /myNewServlet \n:-( My problem is here because, in this case, I couldn't know (before the\nresponse) this servlet was missing !!\n\nI also tested : \n  getContext(\"/myNewContext/myNewServletAlias\")\n  getContext(\"/proxy\")\n  getContext(\"/proxy/myNewServletAlias\")\nand ctx is always != null  !!!\n(and dispatcher also always != null)\n\n1) In other servlets containers, I read that ctx.getRequestDispatcher(...)\nreturns null if the resource is missing.\nSo, Why Tomcat reacts differently ? Is it a bug ?\n\n2) In my case, I'd want to forward to myNewServlet if it is present, BUT, if it\nis missing, I'd want to call another url distant (with httpclient)...\nHow can I do this with Tomcat ? Is there an issue ?", "id": 71766, "time": "2005-03-03T14:34:29Z", "creator": "lionel.farbos@free.fr", "creation_time": "2005-03-03T14:34:29Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "Your request dispatcher is getting mapped to the default servlet (which matches\nall \"requests\" which are not matched by other servlets), and is the one\nreturning the 404. For questions, please use tomcat-user.", "id": 71767, "time": "2005-03-03T14:43:10Z", "bug_id": 33831, "creation_time": "2005-03-03T14:43:10Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 33831, "text": "dup of 23211", "id": 71769, "attachment_id": null, "creator": "funkman@joedog.org", "creation_time": "2005-03-03T14:44:23Z", "time": "2005-03-03T14:44:23Z", "is_private": false}, {"count": 3, "tags": [], "text": "I used tomcat-user for my question and Tim answered me,\nbut it wasn't enough explicit so I didn't understand the issue... :-(\n\nNow, it's OK : I have my issue and I'll post it in my own mail for other people\nwho have the same problem like me.", "attachment_id": null, "id": 71774, "creator": "lionel.farbos@free.fr", "time": "2005-03-03T15:30:48Z", "bug_id": 33831, "creation_time": "2005-03-03T15:30:48Z", "is_private": false}]