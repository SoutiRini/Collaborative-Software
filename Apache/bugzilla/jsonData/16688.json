[{"attachment_id": null, "tags": [], "creator": "steve@crmsoftware.com.au", "text": "Using JDK 1.4.1\nHave JAVA_HOME pointing to the JDK not just the JRE\nThe moment I try to compile a page I get the error listed below\n\nHave been around the mailing list, solved a few of the problems, but then this \nhappened again.\n\nRegrds\n\nSteve Vanspall\n\n********************Error***********************\n\n\n\n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n    [javac] Since fork is true, ignoring compiler setting.\n    [javac] Compiling 1 source file\n    [javac] Since fork is true, ignoring compiler setting.\n\n\n\n\tat org.apache.jasper.compiler.DefaultErrorHandler.javacError\n(DefaultErrorHandler.java:130)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError\n(ErrorDispatcher.java:293)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:345)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:357)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:474)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:184)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke\n(ApplicationDispatcher.java:684)\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward\n(ApplicationDispatcher.java:432)\n\tat org.apache.catalina.core.ApplicationDispatcher.forward\n(ApplicationDispatcher.java:356)\n\tat org.apache.struts.action.RequestProcessor.doForward\n(RequestProcessor.java:1014)\n\tat org.apache.struts.action.RequestProcessor.processForwardConfig\n(RequestProcessor.java:417)\n\tat org.apache.struts.action.RequestProcessor.processActionForward\n(RequestProcessor.java:390)\n\tat org.apache.struts.action.RequestProcessor.process\n(RequestProcessor.java:271)\n\tat org.apache.struts.action.ActionServlet.process\n(ActionServlet.java:1292)\n\tat org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:492)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2415)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:594)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:565)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:628)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\n\n-----------------------------------------------------------------------------", "count": 0, "id": 30538, "time": "2003-02-03T04:58:54Z", "bug_id": 16688, "creation_time": "2003-02-03T04:58:54Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "sdechomets@hotmail.com", "text": "I have the same problem, please help !!!", "count": 1, "id": 34302, "time": "2003-04-02T08:32:29Z", "bug_id": 16688, "creation_time": "2003-04-02T08:32:29Z", "is_private": false}, {"count": 2, "text": "I have the same problem on\nWin2K Pro, jdk 1.4.1_02 running TC 4.1.24 downloaded today April 10, 2003\n\nBut I have not problem running:\nMac OSX 10.2.4, JDK 1.4.1 and TC 4.1.24 (same vintage).\n\nAlso have no problems with other versions:\nTC 4.1.18 , TC 4.0.6 (on 1.3.1_02) on Win2k and MacOSX", "bug_id": 16688, "is_private": false, "id": 34889, "time": "2003-04-10T17:14:02Z", "creator": "e@interactivetec.com", "creation_time": "2003-04-10T17:14:02Z", "tags": [], "attachment_id": null}, {"count": 3, "text": "Windows installer only installs the NT service correctly if JAVA_HOME is \ndefined and it points to some version of Java SDK. If JAVA_HOME is not defined\nbefore the install, or it is incorrect, the installer mostly appears to work but\nTomcat cannot compile JSPs.\n\nThere are two problems in the Tomcat 4 script for Nullsoft Installer, \ntomcat.nsi, v 1.33. I apologize for not providing a patch, but I have no way to\nrebuild the installer to test these changes. I hope some committer can use this\ninformation to fix these problems.\n\n1. Function findJavaPath does not validate the path it finds. If the JAVA_HOME \nenv variable is incorrect because it was set to point to an old Java that is no \nlonger on the machine, the installer ends up using an invalid path for things \nlike the shortcuts on the Start menu and to copy the tools.jar file. The \nfunction should verify that the folder it found does exist, and if the\nJAVA_HOME setting is not valid it should fall back to using the registry.\n\n2. Function findJVMPath only uses the JAVA_HOME setting to find the correct JVM,\neven though the findJavaPath function is capable of finding the Java folder from\nthe registry settings. findJVMPath should call findJavaPath instead of relying \non just the JAVA_HOME environment variable. In its current form, if JAVA_HOME \nis not defined or is incorrect, findJVMPath always fails to find the Java SDK \nand falls back to using the JRE. This leaves Tomcat unable to compile JSPs, \nbecause the Ant code cannot find Javac.exe.\n\n\nTo fix a system that was installed this way, do the following:\n1. Change registry entry for \n\nHKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\\nApache Tomcat 4.1\\Parameters\\JVM Library\n\nfrom (adjust these paths to your machine and java version)\nC:\\Program Files\\Java\\j2re1.4.1_02\\bin\\client\\jvm.dll\n\nto\nC:\\j2sdk1.4.1_02\\jre\\bin\\server\\jvm.dll\n\n2. Copy tools.jar from your-jsdk\\lib\\tools.jar to your-\ntomcat\\common\\lib\\tools.jar This may not be necessary, but the installer does \nattempt to copy this file so it won't hurt to do the same.\n\n3. If you use the shortcuts on the Start Menu, edit their properties to fix the \npath to java.exe.", "bug_id": 16688, "is_private": false, "id": 35079, "time": "2003-04-13T17:44:05Z", "creator": "sdf@cnicorp.com", "creation_time": "2003-04-13T17:44:05Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "creator": "remm@apache.org", "text": "What you posted is incorrect, as the installer will also check the registry.\nQuite frankly, if you can't make it work, then it's really your own fault (using\nthe default Sun JDK installer will setup everything needed). The 5.0 installer\nallows choosing the Java path, so that users have an easier way out (although I\nassume they will fail to select the right path).\n\nThis \"bug\" will not be resolved, please do not reopen it.", "id": 35080, "time": "2003-04-13T17:47:34Z", "bug_id": 16688, "creation_time": "2003-04-13T17:47:34Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 16688, "text": "The Bug is still there. I have the same Problem.\nHere is my Testcase:\n1. I made a clean W2k Server install. (VMware rulez)\n2. I installed SP3 (SP2 is needed for the new Sun SDK)\n3. I installed j2sdk-1_4_1_02-windows-i586.exe with the default settings.\n4. I installed jakarta-tomcat-4.1.24-LE-jdk14.exe, default settings,\n   but NT Service checked.\n5. I opened the shortcut \"Tomcat Administration\" -> same Error as stated by\n   Steve Vanspall\n6. I stopped the NT service and opened the shortcut \"Start Tomcat\" \n   -> opened \"Tomcat Administration\"\n   -> everything is working fine.\n\nI have the same wrong entry in \nHKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Apache Tomcat 4.1\n\\Parameters\\JVM Library as stated by Steve Fyfe. After I fixed it the tomcat \nservice is working.\n\nBTW. After my installation i have three jvm.dll on my system:\nTwo with the same size in:\nC:\\j2sdk1.4.1_02\\jre\\bin\\client  and\nC:\\Program Files\\Java\\j2re1.4.1_02\\bin\\client\nand one bigger in:\nC:\\j2sdk1.4.1_02\\jre\\bin\\server\n\nI think tomcat needs the server one.\n\nI have not found where the wrong registry value for the service is set in \ntomcat.nsi so could someone give me a hint?\n\nkind regards\nDaniel\n", "id": 38008, "time": "2003-05-29T22:29:14Z", "creator": "ds@shiftomat.de", "creation_time": "2003-05-29T22:29:14Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "dlovvorn@rtkl.com", "attachment_id": null, "is_private": false, "id": 39195, "time": "2003-06-20T18:22:59Z", "bug_id": 16688, "creation_time": "2003-06-20T18:22:59Z", "text": "This is actually not a bug report, but a possible way to fix a problem users \nmight experience. \n\nI am unable to compile my JSP! \nAre you seeing this? \n      org.apache.jasper.JasperException: Unable to compile\n      class for JSP\n\n      An error occurred at line: -1 in the jsp file: null\n\n      Generated servlet error:\n          [javac] Since fork is true, ignoring compiler\n      setting.\n          [javac] Compiling 1 source file\n         [javac] Since fork is true, ignoring compiler\n      setting.\n\n\nLike others, I have downloaded and installed the latest Java and Tomcat. \nInstalled Java and it was running fine. Installed Tomcat (multiple tries) with \nno success. I followed all the comments I could find. The environment \nvariables, tricks, with the NT service and without, but I kept getting the \ncompile error message, until...\n\nDuring the Tomcat install there is a pop-up message toward the end that talks \nabout testing, the port 8080, user admin, password blank. During every attempt \nto install Tomcat, I had always put a password in. This last time, I tried it \nwithout a password and it worked.\n\nIf you have questions send me an e-mail dlovvorn@rtkl.com"}, {"count": 7, "text": "I have the same problem with a different spin to it:\n\nIn the browser, I see\n<<org.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n    [javac] Since fork is true, ignoring compiler setting.\n    [javac] Compiling 1 source file\n    [javac] Since fork is true, ignoring compiler setting.\n    [javac] javac: invalid flag: C:\\Java\\jars\\Tomcat\n    [javac] Usage: javac  \n    [javac] where possible options include:\n    [javac]   -g                        Generate all debugging info\n    [javac]   -g:none                   Generate no debugging info\n    [javac]   -g:{lines,vars,source}    Generate only some debugging info\n    [javac]   -nowarn                   Generate no warnings\n    [javac]   -verbose                  Output messages about what the compiler\nis doing\n    [javac]   -deprecation              Output source locations where deprecated\nAPIs are used\n    [javac]   -classpath          Specify where to find user class files\n    [javac]   -sourcepath         Specify where to find input source files\n    [javac]   -bootclasspath      Override location of bootstrap class files\n    [javac]   -extdirs            Override location of installed extensions\n    [javac]   -d             Specify where to place generated class files\n    [javac]   -encoding       Specify character encoding used by source files\n    [javac]   -source          Provide source compatibility with specified release\n    [javac]   -target          Generate class files for specific VM version\n    [javac]   -help                     Print a synopsis of standard options\n\n\n\n\n\tat\norg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:130)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:293)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:353)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:370)\n....>>\nIn catalina.out\n<<19.07.2003 07:52:43 org.apache.coyote.http11.Http11Protocol start\nINFO: Starting Coyote HTTP/1.1 on port 8443\nCompile failed; see the compiler error output for details.\n\tat org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:842)\n\tat org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:682)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:317)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:370)\n...>>\n\nI solved it by re-installing tomcat in a directory that has no spaces in its\npath. I don't know how I fell into this problem, because before, I ran tomcat\ndozens of times successfully even with the space in the \"..cat 4.1\".\n\nSuggestions:\nFor the exception case, have org.apache.jasper.compiler.Compiler.compile or\norg.apache.tools.ant.taskdefs.Javac.compile with which arguments they call javac\nand where they get them from!\n\nOne more strange observation:\n- even though I installed with windows installer, the windows registry is\nunchanged (still has the old paths with spaces e.g. in \"JVM Option Number 0\" or\n\"System.err File\")\n- it even has as \"JVM library\" a jdk1.3... that I deleted months ago", "bug_id": 16688, "is_private": false, "id": 40967, "time": "2003-07-19T07:29:01Z", "creator": "hauser@acm.org", "creation_time": "2003-07-19T07:29:01Z", "tags": [], "attachment_id": null}, {"count": 8, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "is_private": false, "id": 51939, "time": "2004-02-08T23:10:53Z", "bug_id": 16688, "creation_time": "2004-02-08T23:10:53Z", "text": "This is handled by the FAQ.\n\nhttp://jakarta.apache.org/tomcat/faq/misc.html#compile\n"}]