[{"count": 0, "tags": [], "bug_id": 27131, "attachment_id": null, "is_private": false, "id": 52708, "time": "2004-02-21T04:31:36Z", "creator": "jplejacq@quoininc.com", "creation_time": "2004-02-21T04:31:36Z", "text": "configuration:\n  OS        linux-2.6.2\n  servlet   tomcat-4.1.29\n  cocoon    2.1.4\n  editor    bxe-0.9.2 (also observed with epoz and forms)\n\nWhen saving a page from the editor, the following exception occurs:\n\n  An Error Occurred org.apache.cocoon.ProcessingException Failed to execute\npipeline. org.apache.cocoon.ProcessingException: Failed to execute pipeline.:\njava.lang.NullPointerException java.lang.NullPointerException Original\nException: java.lang.NullPointerException at\norg.apache.cocoon.components.source.impl.SitemapSource.init(SitemapSource.java:431)\nat\norg.apache.cocoon.components.source.impl.SitemapSource.<init>(SitemapSource.java:258)\nat\norg.apache.cocoon.components.source.impl.SitemapSourceFactory.getSource(SitemapSourceFactory.java:99)\n\n\nIf reload is pressed, another exception occurs:\n\n  An Error Occurred org.apache.cocoon.ProcessingException Could not read\nresource cocoon://default/lenyabody-view/default/authoring/xhtml/tutorial.html\norg.apache.cocoon.ProcessingException: Could not read resource\ncocoon://default/lenyabody-view/default/authoring/xhtml/tutorial.html:\njava.lang.NullPointerException java.lang.NullPointerException Original\nException: java.lang.NullPointerException at\norg.apache.excalibur.store.impl.AbstractJispFilesystemStore.doGetSize(AbstractJispFilesystemStore.java:330)\nat\norg.apache.excalibur.store.impl.AbstractReadWriteStore.remove(AbstractReadWriteStore.java:226)\nat\norg.apache.excalibur.store.impl.MRUMemoryStore.remove(MRUMemoryStore.java:327)\nat org.apache.cocoon.caching.impl.CacheImpl.remove(CacheImpl.java:150) at\norg.apache.cocoon.components.pipeline.impl.AbstractCachingProcessingPipeline.validatePipeline(AbstractCachingProcessingPipeline.java:599)\nat\norg.apache.cocoon.components.pipeline.impl.AbstractCachingProcessingPipeline.setupPipeline(AbstractCachingProcessingPipeline.java:659)\nat \n\n\nIf reload is pressed again, the authoring page is displayed correctly with\nthe edit changes correctly displayed in the page content.\n\nI also see these changes when publishing."}, {"count": 1, "tags": [], "text": "Some additional observations.  After refreshing the page twice, the page is\nproperly displayed in the browser with the expected edit changes.  If I now go\ninto the BXE editor, I receive a javascript editor \"No body tag found in your\nxhtml document\" and the editor freezes.  I have confirmed that their is a body\ntag in the document.  I must restart tomcat to clear this error.  I can then\nedit the page.", "attachment_id": null, "id": 52934, "creator": "jplejacq@quoininc.com", "time": "2004-02-25T14:52:53Z", "bug_id": 27131, "creation_time": "2004-02-25T14:52:53Z", "is_private": false}, {"text": "I've tracked down the cause of this problem.  Moving to different versions of\ncocoon requires that the cache-dir/* files in the servlet container's work\ndirectory must be deleted and recreated.  We may want to think about how to make\nlenya robust to this type of misconfiguration.  If not, we can close this defect.\n", "tags": [], "creator": "jplejacq@quoininc.com", "attachment_id": null, "count": 2, "id": 52975, "time": "2004-02-25T23:11:58Z", "bug_id": 27131, "creation_time": "2004-02-25T23:11:58Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 27131, "attachment_id": null, "id": 53006, "time": "2004-02-26T13:06:55Z", "creator": "gregor@apache.org", "creation_time": "2004-02-26T13:06:55Z", "is_private": false, "text": "jp had this to add:\n\nI'm replying to my own email since I've tracked down the problem.\nIt turns out to be a problem with initialization of jisp store used\nby cocoon.  The index files created by cocoon appear to have\ndifferent format across different versions.\n\nThe solution is to delete the cache-dir/cocoon.dat and\ncache-dir/cocoon.idx files in the servlet work directory after\nstopping the server.  Restarting the server will recreate these\nfiles in the proper format.\n\nI'm not sure if this should become part of the build process since\nits really a deployment issue.  A note of this requirement might be\nuseful."}]