[{"count": 0, "tags": [], "bug_id": 939, "text": "error-pages don't work in virtual hosts. A virtual host\ndefined by\n\t<Host name=\"...\">\n\t\t<Context path=\"\" docBase=\"webapps/myhost\"/>\n\t</Host>\nusing an error-page defined in webapps/myhost/WEB-INF/web.xml as follows:\n<error-page>\n\t<exception-type>javax.servlet.ServletException</exception-type>\n\t<location>/errors/servletexception.jsp</location>\n</error-page>\n\nwhen triggered, returns the following:\n\"\n404:\n\nOriginal request: //errors/servletexception.jsp\nNot found request: //errors/servletexception.jsp\n\"\n\nPlease note the two leading slashes in the reported URL which seem to cause the\nproblem. The same web application running as a normal web application\n(that is, not in a virtual host) works perfectly, errors are reported\nas expected.", "id": 1210, "attachment_id": null, "creator": "ingo@blank.pages.de", "creation_time": "2001-03-12T05:52:09Z", "time": "2001-03-12T05:52:09Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 939, "text": "This won't be addressed in Tomcat 3.2.2.  The bug report will be left open so \nthat it can be evaluated for a later release.", "id": 1540, "attachment_id": null, "creator": "marc.saegesser@apropos.com", "creation_time": "2001-03-21T13:38:50Z", "time": "2001-03-21T13:38:50Z", "is_private": false}, {"count": 2, "tags": [], "text": "I think the cause is line 1138 of ContextManager.java (in 3.2.2b3):\nreq.setAttribute(\"javax.servlet.include.request_uri\",\n   ctx.getPath() + \"/\" + errorPath);\n\nIt should be:\n\nreq.setAttribute(\"javax.servlet.include.request_uri\",\n   ctx.getPath() + errorPath);\n\nI don't know if 'errorPath' always starts with a '/'.  If not, just add:\nif (errorPath.startsWith(\"/\")) { \n...\n\nto do it either way...\n\n", "is_private": false, "id": 1848, "creator": "jcpage@excitehome.net", "time": "2001-04-11T16:35:47Z", "bug_id": 939, "creation_time": "2001-04-11T16:35:47Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "cmanolache@yahoo.com", "attachment_id": null, "id": 2034, "time": "2001-04-22T18:25:39Z", "bug_id": 939, "creation_time": "2001-04-22T18:25:39Z", "is_private": false, "text": "Fixed in 3.3, thanks for the patch."}]