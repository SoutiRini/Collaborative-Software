[{"count": 0, "tags": [], "creator": "m.kofahl@gmx.net", "attachment_id": 23769, "id": 127713, "time": "2009-06-07T05:04:21Z", "bug_id": 47327, "creation_time": "2009-06-07T05:04:21Z", "is_private": false, "text": "Created attachment 23769\nmake remote_user appear in apache access_log\n\nApache 2.2 (with no mo_auth_* compiled) does not log remote_user in its logifles if authentication is done by tomcat only. JkEnvVar REMOTE_USER does only forward usernames from apache to tomcat but not the other way round.\n\nFor audit reasons, it's wothwile to have username in the primarily logile, because '-' is logged otherwise which implies missconfiguration of tomcat.\n\nThe attached patch decoeds authentication header (http basic only!) itself if it's not already done by apache, because jk_ws_service_t->remote_user is not set by tomcat to inform mod_jk likewise. But actually, I would like to have mod_jk logging the user tomcat sees, so the patch is only some kind of workaround!"}, {"count": 1, "tags": [], "bug_id": 47327, "text": "This would be a protocol enhancement for AJP.\n\nYou can work around the issue by using a filter that returns the user id as a response header. Response headers can be logged with mod_log_config using the %{headername}o syntax in the LogFormat.\n\nNote that a response header is sent to the client. Usually there should be no security issue in passing the user name back to the client, but in special cases it might be.", "id": 150914, "time": "2011-10-25T19:05:40Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2011-10-25T19:05:40Z", "is_private": false, "attachment_id": null}]