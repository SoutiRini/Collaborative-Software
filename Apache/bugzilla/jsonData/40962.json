[{"count": 0, "attachment_id": null, "bug_id": 40962, "is_private": false, "id": 95783, "time": "2006-11-13T11:50:23Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2006-11-13T11:50:23Z", "tags": [], "text": "Tomcat 6.0.1, as with many releases before it, ships with a set of sample users\nand roles defined in $CATALINA_HOME/conf/tomcat-users.xml.  However, simply\ninstalling and starting 6.0.1 causes this file to get rewritten with nothing\ninside the <tomcat-users> outer element.  Effectively, this prevents you from\nusing container managed security at all."}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "This is not true: it will simply remove things like comments, etc. Meaningful\nXML will be kept.", "id": 96553, "time": "2006-12-06T02:17:48Z", "bug_id": 40962, "creation_time": "2006-12-06T02:17:48Z", "is_private": false}, {"count": 2, "tags": [], "creator": "craig.mcclanahan@sun.com", "attachment_id": null, "is_private": false, "id": 96692, "time": "2006-12-09T19:37:25Z", "bug_id": 40962, "creation_time": "2006-12-09T19:37:25Z", "text": "May not happen for you, but it sure happens for me.  I'll attach \"before\" and\n\"after\" versions in a second, but the following steps (on Linux, JDK 1.5.0_09)\ncauses all the XML elements inside the <tomcat-users> element to be destroyed. \nHappens on 6.0.2 as well:\n\n* Start Tomcat\n* Stop Tomcat\n"}, {"count": 3, "tags": [], "text": "Created attachment 19236\nTomcat Users file before starting Tomcat", "attachment_id": 19236, "id": 96693, "creator": "craig.mcclanahan@sun.com", "time": "2006-12-09T19:38:14Z", "bug_id": 40962, "creation_time": "2006-12-09T19:38:14Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 40962, "attachment_id": 19237, "id": 96694, "time": "2006-12-09T19:38:44Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2006-12-09T19:38:44Z", "is_private": false, "text": "Created attachment 19237\nTomcat Users file after starting and stopping Tomcat"}, {"count": 5, "attachment_id": null, "bug_id": 40962, "text": "Uhm, Craig, the roles are commented!\n\n> <tomcat-users>\n> <!--\n>  <role rolename=\"tomcat\"/>\n>  <role rolename=\"role1\"/>\n>  <user username=\"tomcat\" password=\"tomcat\" roles=\"tomcat\"/>\n>  <user username=\"both\" password=\"tomcat\" roles=\"tomcat,role1\"/>\n>  <user username=\"role1\" password=\"tomcat\" roles=\"role1\"/>\n> -->\n> </tomcat-users>", "id": 96700, "time": "2006-12-09T23:24:34Z", "creator": "mario@ops.co.at", "creation_time": "2006-12-09T23:24:34Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "creator": "mario@ops.co.at", "attachment_id": null, "text": "and <user for sure too", "id": 96701, "time": "2006-12-09T23:25:37Z", "bug_id": 40962, "creation_time": "2006-12-09T23:25:37Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 40962, "text": "Ah, so the Tomcat team made a gratuitously incompatible change with the way that\nthis file has been delivered since at least the 4.0 days.  Glad I am not\nparticipating there any more ... I'd be embarrassed at doing things like this.\n", "id": 96702, "time": "2006-12-10T00:24:19Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2006-12-10T00:24:19Z", "is_private": false, "attachment_id": null}, {"count": 8, "attachment_id": null, "bug_id": 40962, "is_private": false, "id": 96704, "time": "2006-12-10T03:31:30Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2006-12-10T03:31:30Z", "tags": [], "text": "There was a project long discussion, if we should really ship this file with\nexample entries. We can see a lot of installations in real life, that keep this\nfile unchanged, including the sample users and roles. We think it's not good\npractise to deliver a user database with default but non-functional users.\nThat's the reason we commented them out.\n\nI don't think that's really an imcompatibility, because the default entries are\nnot used inside tomcat. \n\nWhat is really lacking is appropriate docs. You can prevent the rewriting of the\nfile during startup by using the attribute readonly=false in server.xml\n(default: true because of comptibility...).\n"}, {"count": 9, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 96721, "time": "2006-12-10T15:56:07Z", "bug_id": 40962, "creation_time": "2006-12-10T15:56:07Z", "text": "Personally, I don't care much about this particular default value (Costin did\nthe changes, BTW). I suppose they could be used for examples by apps, though.\n\nThe bug report reads and explains that Tomcat deletes users from\ntomcat-users.xml, which wasn't correct."}]