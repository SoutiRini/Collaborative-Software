[{"count": 0, "tags": [], "text": "Hello,\n\nI think I found a bug where %{LA-U:VARS} variables are not correctly set, depending on the URI.\n\n\n\nHere is the configuration I use, which gives an authenticated user ($1) its own files ($2) :\n\nDocumentRoot /users/www/default\n<Directory /users/www>\nOptions Indexes\nAuthType Basic\n(...)\nRequire valid-user\n</Directory>\nRewriteCond $1:%{LA-U:REMOTE_USER} ^(.+):\\1$\nRewriteRule ^/([^/]+)/(.*)$ /users/www/$1/$2\n\n\n\nHere is my test directory structure :\n/users/www/testuser/foo%1\n/users/www/testuser/foo%10\n\n\n\nfoo%1 results :\n\"GET /testuser/foo%251/ HTTP/1.1\" 404\nFile does not exist: /users/www/default/testuser/foo%251/\n\nfoo%10 results :\n\"GET /authuser/foo%2510/ HTTP/1.1\" 200\n\n\n\nI then tested some other directory patterns :\n- work : \"foo%1bar\"\n- don't work : \"foo%2\", \"foo%3\", ..., \"foo%9\", \"foo%1 bar\"\n\n\n\nI then found that for failing patterns, %{LA-U:REMOTE_USER} is empty :\n\nIf I use the following less restrictive condition, patterns still fail :\nRewriteCond $1:%{LA-U:REMOTE_USER} ^(.+):(.+)$\n\nBut if I use the following one (allowing empty var), then all patterns are OK :\nRewriteCond $1:%{LA-U:REMOTE_USER} ^(.+):(.*)$\n\n\n\nI then tested the following condition :\nRewriteCond $1:%{LA-U:REQUEST_FILENAME} ^(.+):(.+)$\nFailing patterns still fail !\n\nAnd with the following one :\nRewriteCond $1:%{REQUEST_FILENAME} ^(.+):(.+)$\nAll patterns are correctly rewritten !\n\n\n\nIs there an issue with mod_rewrite and LA-U on some URI patterns ?\nCould you help me finding the issue / patching the code please ?\n\nThank you very much !\n\nBen", "attachment_id": null, "id": 187509, "creator": "ben.rubson@gmail.com", "time": "2016-01-08T17:11:33Z", "bug_id": 58828, "creation_time": "2016-01-08T17:11:33Z", "is_private": false}]