[{"count": 0, "attachment_id": null, "bug_id": 37121, "is_private": false, "id": 81250, "time": "2005-10-17T16:19:41Z", "creator": "karthikkumar@gmail.com", "creation_time": "2005-10-17T16:19:41Z", "tags": [], "text": "I observed this with a binary file of size: 26278368 bytes ...\n\nWhen I threw this particular HTTP Request: \n\nGET /Image.sub HTTP/1.1\nHost: localhost\nAccept: */*\nReferer: http://localhost/crap\nUser-Agent: Mozilla/4.0 (compatible; MSIE 5.00; Windows 98)\nRange: bytes=26276541-\nPragma: no-cache\nCache-Control: no-cache\nConnection: close\n\ni.e. last 1827 bytes or so, Tomcat failed to send _ANY_ data...\n\nHowever, it worked with a larger range of bytes before the end (say: 26000000-)\nor so.. \n\nI tried testing the same file, with the same request on HTTPD 2.0.55 ... It\nworked just fine, and gave me the last few bytes.\n\nHence, I am reporting this as a bug.\n\nPlease look into it."}, {"count": 1, "tags": [], "bug_id": 37121, "attachment_id": null, "text": "Are you using the HTTP APR connector ?", "id": 81259, "time": "2005-10-17T17:50:32Z", "creator": "remm@apache.org", "creation_time": "2005-10-17T17:50:32Z", "is_private": false}, {"count": 2, "tags": [], "creator": "karthikkumar@gmail.com", "text": "(In reply to comment #1)\n> Are you using the HTTP APR connector ?\n\nYes. (the statically compiled tcnative-1)", "id": 81278, "time": "2005-10-17T21:12:38Z", "bug_id": 37121, "creation_time": "2005-10-17T21:12:38Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 37121, "attachment_id": null, "text": "I can already tell you that telnet as a client on localhost has issues on\nWindows when doing sendfile (for whatever reasons, sendfile doesn't like it, and\nreturns an error code). I don't think this is a bug in Tomcat.", "id": 81282, "time": "2005-10-18T00:05:18Z", "creator": "remm@apache.org", "creation_time": "2005-10-18T00:05:18Z", "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 37121, "text": "(In reply to comment #3)\n> I can already tell you that telnet as a client on localhost has issues on\n> Windows when doing sendfile (for whatever reasons, sendfile doesn't like it, and\n> returns an error code). I don't think this is a bug in Tomcat.\n\nIt's not about telnet ... it didn't work on my usual file-downloading client ...\nand oh, it DID work with telnet and my client with the 26000000- range. It's not\na problem with telnet or sendfile as such... I suspect something more.", "id": 81284, "time": "2005-10-18T01:07:37Z", "creator": "karthikkumar@gmail.com", "creation_time": "2005-10-18T01:07:37Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 81296, "time": "2005-10-18T10:23:13Z", "bug_id": 37121, "creation_time": "2005-10-18T10:23:13Z", "text": "(In reply to comment #4)\n> It's not about telnet ... it didn't work on my usual file-downloading client ...\n> and oh, it DID work with telnet and my client with the 26000000- range. It's not\n> a problem with telnet or sendfile as such... I suspect something more.\n\nYou can suspect all you want, I'll be looking at facts. So far, it seems to be\ngoing to WONTFIX land."}, {"count": 6, "tags": [], "text": "(In reply to comment #5)\n> (In reply to comment #4)\n> > It's not about telnet ... it didn't work on my usual file-downloading client ...\n> > and oh, it DID work with telnet and my client with the 26000000- range. It's not\n> > a problem with telnet or sendfile as such... I suspect something more.\n> \n> You can suspect all you want, I'll be looking at facts. So far, it seems to be\n> going to WONTFIX land.\n\nFine. Put up with it and stay with Non-HTTP-Compliant Land :P\n", "is_private": false, "bug_id": 37121, "id": 81327, "time": "2005-10-18T16:43:15Z", "creator": "karthikkumar@gmail.com", "creation_time": "2005-10-18T16:43:15Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "karthikkumar@gmail.com", "attachment_id": null, "is_private": false, "id": 81328, "time": "2005-10-18T16:43:39Z", "bug_id": 37121, "creation_time": "2005-10-18T16:43:39Z", "text": "(In reply to comment #5)\n> (In reply to comment #4)\n> > It's not about telnet ... it didn't work on my usual file-downloading client ...\n> > and oh, it DID work with telnet and my client with the 26000000- range. It's not\n> > a problem with telnet or sendfile as such... I suspect something more.\n> \n> You can suspect all you want, I'll be looking at facts. So far, it seems to be\n> going to WONTFIX land.\n\nFine. Put up with it and stay in Non-HTTP-Compliant Land :P"}, {"count": 8, "tags": [], "bug_id": 37121, "text": "(In reply to comment #6)\n> Fine. Put up with it and stay with Non-HTTP-Compliant Land :P\n\nYou know, I had figured already you were a whiner.", "id": 81329, "time": "2005-10-18T16:50:15Z", "creator": "remm@apache.org", "creation_time": "2005-10-18T16:50:15Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 37121, "attachment_id": null, "id": 81356, "time": "2005-10-19T00:09:45Z", "creator": "shankarunni@netscape.net", "creation_time": "2005-10-19T00:09:45Z", "is_private": false, "text": "(In reply to comment #8)\n> (In reply to comment #6)\n> > Fine. Put up with it and stay with Non-HTTP-Compliant Land :P\n> You know, I had figured already you were a whiner.\n\nGuys, can we keep this professional?\n\nKarthik: what Remy is saying is that he needs more than just a \"suspicion\", as\nin a documented, **self-contained**, test case which demonstrates the problem. \n"}, {"count": 10, "tags": [], "bug_id": 37121, "attachment_id": null, "text": "The issue is now fixed (incorrect length parameter passed to the sendfile call),\nas submitted by Mladen Turk.", "id": 81359, "time": "2005-10-19T01:20:08Z", "creator": "remm@apache.org", "creation_time": "2005-10-19T01:20:08Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 37121, "attachment_id": null, "text": "(In reply to comment #10)\n> The issue is now fixed (incorrect length parameter passed to the sendfile call),\n> as submitted by Mladen Turk.\n\nIt's not closed dammit remm.. If the number of bytes asked for is <4KB (at the\nend of the file), it doesn't work.\n\nIt's tested. It's with and without the APR binary. It's still a bug", "id": 81387, "time": "2005-10-19T16:17:43Z", "creator": "karthikkumar@gmail.com", "creation_time": "2005-10-19T16:17:43Z", "is_private": false}, {"count": 12, "attachment_id": null, "bug_id": 37121, "text": "Sorry about that. thanx for fixing. :-) Next time remm... please be more\nconsiderate while replying.", "id": 81388, "time": "2005-10-19T16:20:13Z", "creator": "karthikkumar@gmail.com", "creation_time": "2005-10-19T16:20:13Z", "tags": [], "is_private": false}]