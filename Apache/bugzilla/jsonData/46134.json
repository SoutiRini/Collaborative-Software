[{"count": 0, "tags": [], "creator": "brendan.durkin@defence.gov.au", "attachment_id": 22798, "text": "Created attachment 22798\nSource Code for workaround, many classes in one text file.\n\nThe FOP classes hard code the use of an apachie logger, and do not allow an ErrorHandler to be assigned.\n\nWorkaround\n==========\nI wanted to capture all errors for a xml parse, transform and render task, so I could associate the errors with the subject xml file. \n\nTo achieve this I had to extend the FOTreeBuilder class to override the default error handling with calls to a client app specified error Handler.(see attachment: class ErrorHandlingFOTreeBuilder). In doing so I was annoyed to find that the FOTreeBuilder.error(..) and FOTreeBuilder.warning(..) methods do not expect the throwing of Exceptions (i.e FOTreeBuilder is almost but not quite able to implement org.xml.sax.ErrorHandler. \n\nOther classes within FOP use apache logging extensively, and although I see the benefits of this logging during the development of FOP, as a client library it would be nicer if it used ErrorHandlers. I notice that Fop does have a defaultError handler but it is rarely used and can not be replaced by a client provided handler. \n\nThe Class AreaTreeParser has the line \"transformer.setErrorListener(new DefaultErrorListener(log));\". As such, to capture and handle all transformation errors myself I had to write my own log class (see attached class CacheLogger, and class XmlErrorCache). I understand why this line exists as Xerces has a known bug in its default error handler and the client app must explicity set a ErrorListener to catch all parsing errors in Xerces. \n\nNote: Xerces has a bug in its default ErrorHandler and fails to throw some errors correctly, to work around this you must use custom error handlers.\n\nAs an example of what difference my work around has use FOp on any valid xml/ xslt pair, then edit the xslt file and make it invalid by removing a </fo:block> element from anywhere. Run the transformation using my code and the standard examples and note the reported error differences.", "id": 122048, "time": "2008-10-30T20:24:47Z", "bug_id": 46134, "creation_time": "2008-10-30T20:24:47Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 46134, "attachment_id": 22799, "id": 122049, "time": "2008-10-30T20:38:27Z", "creator": "brendan.durkin@defence.gov.au", "creation_time": "2008-10-30T20:38:27Z", "is_private": false, "text": "Created attachment 22799\nworkaround class"}, {"count": 2, "tags": [], "text": "Created attachment 22800\nworkaround class", "is_private": false, "bug_id": 46134, "id": 122050, "time": "2008-10-30T20:40:22Z", "creator": "brendan.durkin@defence.gov.au", "creation_time": "2008-10-30T20:40:22Z", "attachment_id": 22800}, {"count": 3, "tags": [], "creator": "brendan.durkin@defence.gov.au", "text": "Created attachment 22801\nworkaround class", "id": 122051, "time": "2008-10-30T20:41:23Z", "bug_id": 46134, "creation_time": "2008-10-30T20:41:23Z", "is_private": false, "attachment_id": 22801}, {"count": 4, "tags": [], "text": "Created attachment 22802\nworkaround class", "is_private": false, "id": 122052, "creator": "brendan.durkin@defence.gov.au", "time": "2008-10-30T20:42:23Z", "bug_id": 46134, "creation_time": "2008-10-30T20:42:23Z", "attachment_id": 22802}, {"count": 5, "tags": [], "bug_id": 46134, "attachment_id": 22803, "id": 122053, "time": "2008-10-30T20:42:45Z", "creator": "brendan.durkin@defence.gov.au", "creation_time": "2008-10-30T20:42:45Z", "is_private": false, "text": "Created attachment 22803\nworkaround class"}, {"count": 6, "tags": [], "bug_id": 46134, "attachment_id": 22804, "id": 122054, "time": "2008-10-30T20:43:33Z", "creator": "brendan.durkin@defence.gov.au", "creation_time": "2008-10-30T20:43:33Z", "is_private": false, "text": "Created attachment 22804\nworkaround class"}, {"count": 7, "tags": [], "creator": "brendan.durkin@defence.gov.au", "attachment_id": 22805, "text": "Created attachment 22805\nPdfGenerator.java", "id": 122055, "time": "2008-10-30T20:45:14Z", "bug_id": 46134, "creation_time": "2008-10-30T20:45:14Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 46134, "attachment_id": 22806, "id": 122057, "time": "2008-10-30T20:46:26Z", "creator": "brendan.durkin@defence.gov.au", "creation_time": "2008-10-30T20:46:26Z", "is_private": false, "text": "Created attachment 22806\nErrorHandlingFOTreeBuilder.java"}, {"count": 9, "tags": [], "creator": "brendan.durkin@defence.gov.au", "attachment_id": 22807, "text": "Created attachment 22807\nCacheLogger.java", "id": 122058, "time": "2008-10-30T20:47:42Z", "bug_id": 46134, "creation_time": "2008-10-30T20:47:42Z", "is_private": false}, {"count": 10, "tags": [], "creator": "brendan.durkin@defence.gov.au", "is_private": false, "text": "Created attachment 22808\nXmlErrorCache.java", "id": 122059, "time": "2008-10-30T20:48:19Z", "bug_id": 46134, "creation_time": "2008-10-30T20:48:19Z", "attachment_id": 22808}, {"count": 11, "tags": [], "bug_id": 46134, "attachment_id": 22809, "id": 122060, "time": "2008-10-30T20:49:19Z", "creator": "brendan.durkin@defence.gov.au", "creation_time": "2008-10-30T20:49:19Z", "is_private": false, "text": "Created attachment 22809\nFopError.java"}, {"count": 12, "tags": [], "bug_id": 46134, "attachment_id": 22810, "is_private": false, "id": 122061, "time": "2008-10-30T20:50:03Z", "creator": "brendan.durkin@defence.gov.au", "creation_time": "2008-10-30T20:50:03Z", "text": "Created attachment 22810\nFopErrorLevel.java"}, {"count": 13, "tags": [], "creator": "brendan.durkin@defence.gov.au", "is_private": false, "text": "Created attachment 22811\nRedirectEntityResolver.java", "id": 122062, "time": "2008-10-30T20:50:24Z", "bug_id": 46134, "creation_time": "2008-10-30T20:50:24Z", "attachment_id": 22811}, {"count": 14, "tags": [], "bug_id": 46134, "attachment_id": null, "is_private": false, "id": 122063, "time": "2008-10-30T20:52:54Z", "creator": "brendan.durkin@defence.gov.au", "creation_time": "2008-10-30T20:52:54Z", "text": "Sorry about all the obsolete attachments ( I re-added them with better descriptions)"}, {"count": 15, "tags": [], "bug_id": 46134, "attachment_id": null, "id": 122064, "time": "2008-10-31T00:22:54Z", "creator": "jeremias@apache.org", "creation_time": "2008-10-31T00:22:54Z", "is_private": false, "text": "I guess you will be annoyed to hear that we already have a solution in FOP Trunk that solves this in a much more comprehensive way. You might want to look at:\nhttp://xmlgraphics.apache.org/fop/trunk/events.html\n\nFurthermore, it's not clear what you intended with the files you attached. They do not present a patch, they use generics which FOP cannot use, yet, since it's based on Java 1.4. I'd like to ask you to take a look at the new event subsystem and to give us some feedback. I'm pretty sure it should solve your original problem. If it does, please close this issue."}, {"count": 16, "tags": [], "creator": "jeremias@apache.org", "text": "As already mentioned, an error reporting facility is included in FOP Trunk. No feedback on my earlier post was recorded, so I'm closing this issue as WontFix.", "id": 123988, "time": "2009-01-13T04:15:00Z", "bug_id": 46134, "creation_time": "2009-01-13T04:15:00Z", "is_private": false, "attachment_id": null}, {"count": 17, "tags": [], "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "is_private": false, "id": 156649, "creator": "gadams@apache.org", "time": "2012-04-01T13:50:53Z", "bug_id": 46134, "creation_time": "2012-04-01T13:50:53Z", "attachment_id": null}]