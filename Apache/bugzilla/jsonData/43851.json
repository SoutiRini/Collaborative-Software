[{"count": 0, "tags": [], "creator": "Joe.Mudd@sas.com", "attachment_id": null, "id": 110481, "time": "2007-11-13T08:14:30Z", "bug_id": 43851, "creation_time": "2007-11-13T08:14:30Z", "is_private": false, "text": "The apr_pool_create() macro needs to cast the abort_fn to an apr_abortfunc_t.  \nWithout this cast, the following warning appears:\n\nwarning: argument #3 is incompatible with prototype:\n        prototype: pointer to function(int) returning \nint : \"/wire/develop/apr/1.2/solaris-x64/include/apr-1/apr_pools.h\", line 186\n        argument : pointer to void"}, {"count": 1, "tags": [], "bug_id": 43851, "attachment_id": 21122, "text": "Created attachment 21122\napr_pools.h patch\n\nCast the NULL abort_fn argument in terms of apr_abortfunc_t.", "id": 110482, "time": "2007-11-13T08:15:50Z", "creator": "Joe.Mudd@sas.com", "creation_time": "2007-11-13T08:15:50Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 43851, "attachment_id": null, "text": "This appears to be a compiler quirk, or an odd choice of compile flags.\nSince this is a deprecated API, I don't see much point in touching/\"improving\"\nthe old stub if it's a byproduct of a compiler quirk/bug?\n\nCan you be a little more detailed with the warning results you see (what you\nwere compiling, what the compile line was, etc?)  Is this mixed model large\ndata/short code pointers?\n\nNone the less NULL is always a valid pointer value.", "id": 110488, "time": "2007-11-13T09:21:28Z", "creator": "wrowe@apache.org", "creation_time": "2007-11-13T09:21:28Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 43851, "text": "The code that received the warning is:\n\n   apr_pool_t           *pool;          // Our APR needs context\n   apr_status_t          aStatus;\n\n   aStatus = apr_pool_create(&sort->pool, NULL);\n\nThe compiler setting is:\n\n   cc -xarch=amd64 -O\n\n\n", "id": 110491, "attachment_id": null, "creator": "Joe.Mudd@sas.com", "creation_time": "2007-11-13T10:05:48Z", "time": "2007-11-13T10:05:48Z", "is_private": false}, {"count": 4, "tags": [], "creator": "henryjen@ztune.net", "attachment_id": null, "id": 110510, "time": "2007-11-13T18:07:50Z", "bug_id": 43851, "creation_time": "2007-11-13T18:07:50Z", "is_private": false, "text": "Works fine on SolarisExpress on x86 with Sun Studio 12 with following sample\ncode with just cc.\n\n#include \"apr_pools.h\"\n\nint main(int argc, const char ** argv)\n{\n   apr_pool_t           *pool;          // Our APR needs context\n   apr_status_t          aStatus;\n\n   aStatus = apr_pool_create_ex(&pool, NULL, NULL, NULL);\n}\n\n\n$ cc -V\ncc: Sun C 5.9 SunOS_i386 2007/05/03\nusage: cc [ options] files.  Use 'cc -flags' for details\n\nWould you try above sample code and report the warnings if any and the version\nof your C compiler?"}, {"count": 5, "tags": [], "bug_id": 43851, "text": "Looks like our machine is way behind the curve...\n\n$ cc -V\ncc: Sun C 5.8 2005/10/13\n\nI apologize for the noise.", "id": 110511, "attachment_id": null, "creator": "Joe.Mudd@sas.com", "creation_time": "2007-11-13T18:21:10Z", "time": "2007-11-13T18:21:10Z", "is_private": false}, {"count": 6, "tags": [], "creator": "Joe.Mudd@sas.com", "attachment_id": null, "id": 110512, "time": "2007-11-13T18:24:52Z", "bug_id": 43851, "creation_time": "2007-11-13T18:24:52Z", "is_private": false, "text": "Sorry, meant to also mention that the warning shown in the original comment did \nnot show up w/the sample code given in comment 4."}, {"count": 7, "tags": [], "creator": "wrowe@apache.org", "text": "Ok - thanks to you both for the extra research - it sure didn't make sense\nto me, and I'm glad the modern compiler agrees.\n\nThe 'default' system compiler on sol/hp/aix is almost always too ancient to\nget \"good\" results from building apr - although every modern compiler works\njust fine.  (So does every ancient gcc ;-)", "id": 110515, "time": "2007-11-13T23:37:43Z", "bug_id": 43851, "creation_time": "2007-11-13T23:37:43Z", "is_private": false, "attachment_id": null}]