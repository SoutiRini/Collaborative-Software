[{"count": 0, "tags": [], "creator": "minfrin@apache.org", "is_private": false, "text": "While building httpd v2.1 under RHEL3, the following warning is issued:\n\n/home/gatekeeper/minfrin/src/apache/sandbox/proxy/httpd-2.1/modules/experimental/util_ldap.c:1218:\nthe use of `tmpnam' is dangerous, better use `mkstemp'\nmake[1]: Leaving directory\n`/home/gatekeeper/minfrin/src/apache/sandbox/proxy/httpd-2.1'", "id": 61312, "time": "2004-07-29T15:17:06Z", "bug_id": 30385, "creation_time": "2004-07-29T15:17:06Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "PHP has a thing at the end of their make saying this is safe to ignore. Any\nreason we can't ignore it too?", "attachment_id": null, "id": 66404, "creator": "chip@force-elite.com", "time": "2004-11-04T02:55:48Z", "bug_id": 30385, "creation_time": "2004-11-04T02:55:48Z", "is_private": false}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "is_private": false, "id": 66440, "time": "2004-11-04T08:10:17Z", "bug_id": 30385, "creation_time": "2004-11-04T08:10:17Z", "text": "./modules/ldap/util_ldap.c:            st->lock_file   =\nap_server_root_relative(st->pool, tmpnam(NULL));\n\nit may be safe but it's totally wacky since tmpnam returns filenames with a /tmp\nprefix.  The APR tmpfile interface should be used instead.\n"}, {"count": 3, "tags": [], "text": "Is the APR tmpfile interface available in v0.9 of APR?", "is_private": false, "id": 66446, "creator": "minfrin@apache.org", "time": "2004-11-04T11:23:52Z", "bug_id": 30385, "creation_time": "2004-11-04T11:23:52Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 30385, "attachment_id": null, "id": 66449, "time": "2004-11-04T11:39:37Z", "creator": "jorton@redhat.com", "creation_time": "2004-11-04T11:39:37Z", "is_private": false, "text": "Actually since this is just for a mutex, the right thing to do is to pass a NULL\nfilename parameter to apr_global_mutex_create if no CacheFile is specified,\nrather than some random temporary filename."}, {"count": 5, "tags": [], "text": "According to the APR docs for apr_global_mutex_create():\n\nfname \tA file name to use if the lock mechanism requires one. This argument\nshould always be provided. The lock code itself will determine if it should be used.\n\nSo the compiler claims tmpnam() is evil, but all the alternatives involve\nactually opening a file, which isn't what we need.\n\nDoes APR have a temp file creation function? Are the APR docs above about the\nargument always being provided correct, or is it really safe to pass NULL to\nthis function on all platforms?\n", "attachment_id": null, "id": 69962, "creator": "minfrin@apache.org", "time": "2005-01-21T23:40:20Z", "bug_id": 30385, "creation_time": "2005-01-21T23:40:20Z", "is_private": false}, {"count": 6, "tags": [], "creator": "sander@temme.net", "attachment_id": null, "text": "APR now has apr_file_mktemp(): \n\nhttp://docx.webperf.org/group__apr__file__io.html#ga50\n\nI assume this does the right thing on the various platforms. ", "id": 69989, "time": "2005-01-23T04:58:47Z", "bug_id": 30385, "creation_time": "2005-01-23T04:58:47Z", "is_private": false}, {"count": 7, "tags": [], "text": "apr_file_mktemp() opens a file, apr_global_mutex_create() needs a filename, not\nan actual file.\n\nIdeally apr_global_mutex_create() should be able to just accept NULL and\ninternally use apr_file_mktemp(), rather than insisting on a temp file name from\nthe calling application.\n\nRegards,\nGraham\n--", "attachment_id": null, "id": 69992, "creator": "minfrin@sharp.fm", "time": "2005-01-23T14:09:54Z", "bug_id": 30385, "creation_time": "2005-01-23T14:09:54Z", "is_private": false}, {"text": "It actually does do precisely that in all the Unix implementations. \nAlternatively using a serverroot-relative filename\n\"logs/<something-unique>.<pid>\" should work as well.", "tags": [], "creator": "jorton@redhat.com", "is_private": false, "count": 8, "id": 70166, "time": "2005-01-27T12:29:09Z", "bug_id": 30385, "creation_time": "2005-01-27T12:29:09Z", "attachment_id": null}, {"count": 9, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "is_private": false, "id": 80745, "time": "2005-10-04T17:43:11Z", "bug_id": 30385, "creation_time": "2005-10-04T17:43:11Z", "text": "Fixed in 2.1.x releases, probably not worth a backport."}]