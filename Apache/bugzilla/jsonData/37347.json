[{"count": 0, "tags": [], "text": "this is the same as 23550 except it applies to mod_disk_cache and does not occur\nin mod_mem_cache (so excuse the copying of the well stated report)\n\nWhen apache is configured as a reverse proxy with mod_disk_cache enabled (or\nboth mod_disk_cache and mod_mem_cache but not with mod_mem_cache alone), it will\ncache 301 responses from the backend. \n\nNow, when we hit the memory-cached object, mod_disk_cache returns the original\n301 response with a replaced HTTP status of 200. This causes clients to not\nfollow the redirect.\n\nI will try to illustrate this:\n\nrequest:\n    GET /foo HTTP/1.1\n    Host: www.foo.tld\n\n1st response, before caching:\n    HTTP/1.1 301 Moved Permanently\n    Location: http://www.foo.tld/foo/\n\nsubsequent response, on same request:\n    HTTP/1.1 200 OK\n    Location: http://www.foo.tld/foo/\n\n=> Client ignores Location: header", "attachment_id": null, "id": 82098, "creator": "jstefani@yorku.ca", "time": "2005-11-03T15:35:41Z", "bug_id": 37347, "creation_time": "2005-11-03T15:35:41Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 37347, "attachment_id": 16870, "is_private": false, "id": 82107, "time": "2005-11-03T20:01:17Z", "creator": "rpluem@apache.org", "creation_time": "2005-11-03T20:01:17Z", "text": "Created attachment 16870\nPatch against 2.0.x branch\n\nThis has been fixed in trunk and 2.2.x a while ago (r220038). Can you please\ngive the attached patch a try? It should fix the problem for mod_disk_cache and\nfor mod_mem_cache"}, {"count": 2, "tags": [], "bug_id": 37347, "attachment_id": null, "id": 82108, "creation_time": "2005-11-03T21:42:29Z", "time": "2005-11-03T21:42:29Z", "creator": "jstefani@yorku.ca", "text": "\nThank You,\n\nthe patch you supplied fixed the issue.\n\nAre there any plans to merge it into the 2.0.x code?\n\n", "is_private": false}, {"count": 3, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "id": 82109, "time": "2005-11-03T22:16:10Z", "bug_id": 37347, "creation_time": "2005-11-03T22:16:10Z", "is_private": false, "text": "Thanks for testing. I proposed it for backport to 2.0.x by adding it to the\nSTATUS file:\nhttp://svn.apache.org/viewcvs.cgi/httpd/httpd/branches/2.0.x/STATUS?p2=%2Fhttpd%2Fhttpd%2Fbranches%2F2.0.x%2FSTATUS&p1=httpd%2Fhttpd%2Fbranches%2F2.0.x%2FSTATUS&r1=330635&r2=330634&rev=330635&view=diff&makepatch=1&diff_format=u\n\nI reopen the bug and will close it again once the patch has been backported."}, {"count": 4, "tags": [], "bug_id": 37347, "attachment_id": null, "id": 111074, "creation_time": "2007-11-25T03:54:34Z", "time": "2007-11-25T03:54:34Z", "creator": "takashi.asfbugzilla@tks.st", "text": "fixed as r372047\nhttp://svn.apache.org/viewvc?view=rev&revision=372047", "is_private": false}]