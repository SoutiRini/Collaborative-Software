[{"count": 0, "tags": [], "text": "There is a problem in the way the <sql> task handles \"--\" comments.\n\nConsider the following example of a .sql file fragment:\n\n...\nselect * from people; -- show me some people\n\nselect * from plants; -- show me some plants\n...\n\nNote that there is a newline between the two select statements above.\n\nOn line 460 of SQLExec.java, the code will detect that the first line contains \na \"--\" so it will continue as if the statement has not yet completed (even \nthough the \"--\" is preceded by a \";\" that should normally end the statement).\n\nThus far, the \"sql\" variable contains \"select * from people; -- show me some \npeople\\n\"\n\nThe next line in the file is an empty line, so, on line 454, the \"sql\" variable \nwill contain \"select * from people; -- show me some people\\n \\n\", and on line \n454 (after the .trim()) the \"sql\" variable will contain \"select * from people; -\n- show me some people\"\n\nNote that the sql statement is still not considered to have ended thus far.\n\nWe now move on to the next line in the .sql file, where the sql statement \nbecomes:\n\n\"select * from people; -- show me some people select * from plants; -- show me \nsome plants\"\n\nThis new statement is already invalid: the second select is commented out since \nit follows on the same line as \"--\"!", "attachment_id": null, "bug_id": 21858, "id": 41371, "time": "2003-07-24T16:10:23Z", "creator": "razvan.surdulescu@post.harvard.edu", "creation_time": "2003-07-24T16:10:23Z", "is_private": false}, {"count": 1, "tags": [], "text": "this works in ant1.6alpha, with or without the new keepformat attribute.\nI am marking it as a duplicate of bug 10719.\n\n*** This bug has been marked as a duplicate of 10799 ***", "attachment_id": null, "bug_id": 21858, "id": 41557, "time": "2003-07-26T14:36:59Z", "creator": "antoine@apache.org", "creation_time": "2003-07-26T14:36:59Z", "is_private": false}, {"count": 2, "tags": [], "text": "Changed resolution to INVALID since duplicate bug has been deleted from Bugzilla and leaving as DUPLICATE creates referential integrity issues for the underlying database.", "attachment_id": null, "bug_id": 21858, "id": 119064, "time": "2008-07-28T05:54:03Z", "creator": "markt@apache.org", "creation_time": "2008-07-28T05:54:03Z", "is_private": false}]