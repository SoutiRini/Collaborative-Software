[{"count": 0, "tags": [], "bug_id": 60972, "attachment_id": null, "text": "The apr_ldap_url_parse_ext() function scans for a colon and port number in LDAP URL but, in branch 1.6.x, does not replace the colon with a nul character, resulting in the host:port being assigned to the (apr_ldap_url_desc_t *)ludp->lud_host field, which cannot resolve.\n\nThat is, an LDAP URL with a manually specified port will always fail.\n\nInterestingly this bug does not exist in branch 0.9.x which correctly replaced the colon with a nul character separating the host from the port with the following code:\n\n    if ( q != NULL ) {\n        *q++ = '\\0';\n\nThe bug appears to have been introduced in branch 1.0.x and is in every branch since.\n\nThis affects Apache 2.4.25.", "id": 198246, "time": "2017-04-12T01:44:08Z", "creator": "apr20170412@was.me.uk", "creation_time": "2017-04-12T01:44:08Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 60972, "text": "This affects mod_authnz_ldap.c which calls apr_ldap_url_parse().\n\nBug was found because of trace message in this module:\n\n  auth_ldap url parse: `%s', Host: %s, Port: %d, DN: %s, attrib: %s, scope: %s, filter: %s, connection mode: %s\n\n.. which illustrated that the LDAP URL was capturing the port number into the host.\n\nFor example, the following configuration will fail:\n\n  AuthLDAPURL \"LDAP://myserver.com:389/DC=myserver,DC=com?accountname?sub?(objectcategory=CN=Person,CN=Schema,CN=Configuration,DC=myserver,DC=com)\"\n\n.. with a log message:\n\n  Host: myserver.com:339, Port: 339, DN: DC=myserver,DC=com, attrib: accountname, scope: subtree, filter:...\n\nWhereas the following configuration will succeed:\n\n  AuthLDAPURL \"LDAP://myserver.com/DC=myserver,DC=com?accountname?sub?(objectcategory=CN=Person,CN=Schema,CN=Configuration,DC=myserver,DC=com)\"", "id": 198247, "time": "2017-04-12T01:48:53Z", "creator": "apr20170412@was.me.uk", "creation_time": "2017-04-12T01:48:53Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "apr20170412@was.me.uk", "attachment_id": null, "is_private": false, "id": 198248, "time": "2017-04-12T01:59:43Z", "bug_id": 60972, "creation_time": "2017-04-12T01:59:43Z", "text": "Okay this is an invalid bug.\n\nEven though the port is captured into the hostname the connection succeeds. But when I raised this bug I was using port 339 instead of 389 and the connection was failing as a result.\n\nMy testing was faulty."}]