[{"count": 0, "attachment_id": null, "bug_id": 12126, "text": "Downloaded Apache 2.0.40, Tomcat 4.1.9 connectors source, compiled Apache - no \nproblems, compiled mod_jk2.dll with MSVC C++ v6 - no problems.  Running Apache \nand Tomcat (inprocess), no messages on startup.  Receive the following errors \nwhen trying to access a servlet from Apache:\n\n[Tue Aug 27 22:15:16 2002] [error] channel_jni.open() Can't create java context \n[Tue Aug 27 22:15:16 2002] [error] channel_jni.send() no java context \n[Tue Aug 27 22:15:16 2002] [error] ajp13.service() Error  forwarding ajp13:jni", "id": 21901, "time": "2002-08-28T15:15:33Z", "creator": "dshort@san.rr.com", "creation_time": "2002-08-28T15:15:33Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "text": "Send this over to Tomcat.", "id": 21905, "time": "2002-08-28T16:19:49Z", "bug_id": 12126, "creation_time": "2002-08-28T16:19:49Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 12126, "is_private": false, "count": 2, "id": 21950, "time": "2002-08-29T09:32:05Z", "creator": "nacho@apache.org", "creation_time": "2002-08-29T09:32:05Z", "text": "This messages are harmless, probably they should be lowered from errors to \nwarnings, anyway to solve them all you need is to disvle the jni channel \nchannel.jni.enable=0 in your wokers2.properties file.."}, {"count": 3, "tags": [], "text": "My last comment contains a wrong wording for the disable the JNI channel in the \nworkers2.properties file it must be..\n\n[channel.jni:jni]\ndisabled=1\n\nit's possible to use the other format \"channel.jni.disabled=1\" but i'm not \ntruly sure of the correct wording then, the excerpt above must work fine too.. \nif you already have a channel.jni section in your wk2.p file, add \nthe \"disabled\" property there.", "is_private": false, "id": 21952, "creation_time": "2002-08-29T09:44:11Z", "time": "2002-08-29T09:44:11Z", "creator": "nacho@apache.org", "bug_id": 12126, "attachment_id": null}, {"count": 4, "tags": [], "creator": "dshort@san.rr.com", "attachment_id": null, "text": "I made the change and now the following message is issues when trying to connect \nto the servlet:\n\n[Thu Aug 29 06:47:42 2002] [notice] Parent: Created child process 1592\n[Thu Aug 29 06:47:42 2002] [notice] Child 1592: Child process is running\n[Thu Aug 29 06:47:43 2002] [notice] Child 1592: Acquired the start mutex.\n[Thu Aug 29 06:47:43 2002] [notice] Child 1592: Starting 250 worker threads.\n[Thu Aug 29 06:48:04 2002] [error] lb_worker.service() all workers in error or \ndisabled state\n[Thu Aug 29 06:48:04 2002] [error] mod_jk.handler() Error connecting to tomcat \n21000\n[Thu Aug 29 06:48:19 2002] [error] lb_worker.service() all workers in error or \ndisabled state\n[Thu Aug 29 06:48:19 2002] [error] mod_jk.handler() Error connecting to tomcat \n21000\n", "id": 21963, "time": "2002-08-29T13:51:58Z", "bug_id": 12126, "creation_time": "2002-08-29T13:51:58Z", "is_private": false}, {"count": 5, "tags": [], "text": "Please post your wk2.p file.., it seems your have been using the jni channel \nonly, not the ajp13 one, you have been using the inprocess worker? ", "attachment_id": null, "bug_id": 12126, "id": 21966, "time": "2002-08-29T13:58:00Z", "creator": "nacho@apache.org", "creation_time": "2002-08-29T13:58:00Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 12126, "text": "Created attachment 2869\nworkers2.properties file", "id": 21981, "time": "2002-08-29T16:41:56Z", "creator": "dshort@san.rr.com", "creation_time": "2002-08-29T16:41:56Z", "is_private": false, "attachment_id": 2869}, {"count": 7, "tags": [], "creator": "nacho@apache.org", "attachment_id": null, "text": "Ughh, i have surpassed the detail that you were trying the inprocess worker..\n\nFirst, disregard my previous postings.. and sorry for the waste of time..\n\nI seems that Tomcat is not started.. can you acces tomcat using \nhttp://localhost:8080? Do you get anything logged to stdout or stderr files?\n\nTry changing the classpath line for this:\nOPT=-Djava.class.path=${CATALINA_HOME}/bin/tomcat-\njni.jar;${CATALINA_HOME}/lib/tomcat.jar\n\n\n\n\n", "id": 21997, "time": "2002-08-29T21:02:35Z", "bug_id": 12126, "creation_time": "2002-08-29T21:02:35Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 12126, "attachment_id": null, "id": 22001, "time": "2002-08-29T22:27:02Z", "creator": "dshort@san.rr.com", "creation_time": "2002-08-29T22:27:02Z", "is_private": false, "text": "Yes, I can access tomcat stand alone using port 8080.\n\nHere's the tomcat startup console output:\n\n[INFO] Registry - -Loading registry information\n[INFO] Registry - -Creating new Registry instance\n[INFO] Registry - -Creating MBeanServer\n[INFO] Http11Protocol - -Initializing Coyote HTTP/1.1 on port 8080\n[INFO] JkMain - -Starting Jk2, base dir= C:\\Tomcat conf=C:\\Tomcat\\conf\\jk2.prope\nrties\n[INFO] JkMain - -APR not loaded, disabling jni components: java.io.IOException:\nno jkjni in java.library.path\n[INFO] ChannelSocket - -JK: listening on tcp port 8009\n[INFO] ChannelUn - -No file, disabling unix channel\n[INFO] JkMain - -Jk running ID=0 ... init time=130 ms\nStarting service Tomcat-Standalone\nApache Tomcat/4.1.8\n[INFO] Http11Protocol - -Starting Coyote HTTP/1.1 on port 8080\n\nTomcat doesn't create stdout or stderr files, that I can find (logs directory).\n\ntomcat.jar and ${CATALINA_HOME}/lib don't exist on my machine (tomcat 4.1.9).  \n${CATALINA_HOME}/common/lib and ${CATALINA_HOME}/server/lib do exist though.\n\nIn the past Apache 2.0.39 and Tomcat 4.1.9 worked inprocess just fine.  2.0.40 \ndoesn't like mod_jk2 for some reason.  At least it doesn't like the version \nthat I built.  Would it be possible for you to recompile, for 2.0.40, and post \nthe mod_jk2.dll file?"}, {"attachment_id": null, "tags": [], "bug_id": 12126, "is_private": false, "count": 9, "id": 22081, "time": "2002-09-01T18:46:44Z", "creator": "dshort@san.rr.com", "creation_time": "2002-09-01T18:46:44Z", "text": "Build fails when trying to build according to the following link:\n\nhttp://www.pubbitch.org/jboss/mod_jk2.html\n\nConsole output:\n\nC:\\Apache Builds\\Tomcat\\jakarta-tomcat-connectors-4.1.10-src\\jk>ant native\nBuildfile: build.xml\n\njkant:\n\ndetect:\n     [echo] -------- jakarta-tomcat-connectors --------\n\nreport:\n     [echo] Tomcat33: ${tomcat33.detect} C:\\Apache Builds\\Tomcat\\jakarta-tomcat\\\nbuild\\tomcat\\lib\\common\\tomcat_core.jar\n     [echo] Tomcat40:  ${tomcat40.detect} C:\\Apache Builds\\Tomcat\\jakarta-tomcat\n-4.0\\build\n     [echo] Tomcat41: ${tomcat41.detect} \"C:/Apache Builds/Tomcat/jakarta-tomcat\n-connectors-4.1.10-src/jk/build\"\n     [echo] Apache13: ${apache13.detect} ${apache13.home}\n     [echo] Apache2: ${apache2.detect} \"C:/Apache Builds/Apache/httpd-2.0.40\"\n     [echo] iPlanet:  ${iplanet.detect} ${iplanet.home}\n     [echo] IIS:      ${iis.detect} ${iis.home}\n     [echo] Using catalina.home:      \"C:/Apache Builds/Tomcat/jakarta-tomcat-co\nnnectors-4.1.10-src\"\n\nnative:\n\ninit:\n     [echo] C:\\Documents and Settings\\dshort\n\napache20:\n\napache13:\n\niis:\n\nnetscape:\n\njni:\n       [so] Compiling 4 out of 4\nCompiling C:\\Apache Builds\\Tomcat\\jakarta-tomcat-connectors-4.1.10-src\\jk\\native\n\\common\\jk_map.c\n\nBUILD FAILED\nfile:C:/Apache Builds/Tomcat/jakarta-tomcat-connectors-4.1.10-src/jk/native/buil\nd.xml:63: java.io.IOException: CreateProcess: libtool --mode=compile cc -c -o \"C\n:\\Apache Builds\\Tomcat\\jakarta-tomcat-connectors-4.1.10-src\\jk\\build\\jk\\jni\\comm\non\\jk_map.o\" \"-IC:\\Apache Builds\\Tomcat\\jakarta-tomcat-connectors-4.1.10-src\\jk\\\nnative/common\" \"-IC:\\Apache Builds\\Tomcat\\jakarta-tomcat-connectors-4.1.10-src\\j\nk\\native/jni\" -IC:\\JDK1.3.1\\jre/../include -I${build.compiler.base}/include -g -\nW \"C:\\Apache Builds\\Tomcat\\jakarta-tomcat-connectors-4.1.10-src\\jk\\native\\common\n\\jk_map.c\" error=2\n\nTotal time: 1 second\nC:\\Apache Builds\\Tomcat\\jakarta-tomcat-connectors-4.1.10-src\\jk>"}, {"count": 10, "tags": [], "creator": "rsowders@usgs.gov", "attachment_id": null, "text": "Modjk2.dll still does not work with Apache 2.0.40.\n\nApache 3.0.40\nTomcat 4.1.10\n\nUsing precompiled modjk2.dll from http://jakarta.apache.org/builds/jakarta-\ntomcat-connectors/jk2/nightly/win32/ posted on Sept 1, 2002.\n\nmodjk2 is configured to start TC in-process.  TC starts in-process without \nerror and is accessable from port 8080.  Log files show no errors until an \nattempt is made to access port 8009 at http://localhost/examples then the \nfollowing errors are written to error log until jni timeout.\n\n[Tue Sep 03 03:50:55 2002] [error] channel_jni.open() Can't create java context\n[Tue Sep 03 03:50:55 2002] [error] channel_jni.send() no java context\n[Tue Sep 03 03:50:55 2002] [error] ajp13.service() Error  forwarding ajp13:jni \n\nThe same is observed when starting TC from the command line and modjk2 \nconfigured to not start TC.\n\nIt appears that modjk2 is broken for Apache 2.0.40 has anyone been successful \nwith this? \n\n", "id": 22156, "time": "2002-09-03T11:32:27Z", "bug_id": 12126, "creation_time": "2002-09-03T11:32:27Z", "is_private": false}, {"count": 11, "tags": [], "text": "Created attachment 2911\nworking worker2.properties", "attachment_id": 2911, "bug_id": 12126, "id": 22228, "time": "2002-09-04T06:38:29Z", "creator": "rsowders@usgs.gov", "creation_time": "2002-09-04T06:38:29Z", "is_private": false}, {"count": 12, "tags": [], "creator": "rsowders@usgs.gov", "text": "Created attachment 2912\nworking jk2.properties", "id": 22229, "time": "2002-09-04T06:39:43Z", "bug_id": 12126, "creation_time": "2002-09-04T06:39:43Z", "is_private": false, "attachment_id": 2912}, {"count": 13, "tags": [], "creator": "rsowders@usgs.gov", "attachment_id": null, "text": "I'm happy to report that at least for me this is not a bug.  It was simply a \nconfiguration proplem.  I now have a working install of; \nApache 2.0.40\nmod_jk2\nTomcat 4.1.10\nJSDK 1.4.0_01\n\nI did not have a channelJni statement in the jk2.properties file and my w2.prop \nfile did not point to a working jvm.dll.\n\nWhile reading the commits for jtc I found this from mturk,\nhttp://www.mail-archive.com/tomcat-dev@jakarta.apache.org/msg31726.html\nIt simply says that jni must have a channel statement in the jk2.prop file to \nbe active.  Any channelJni statement will do it.\n\nI corrected my jk2.prop with a channel.Jni statement and my w2.prop to point to \nmy systems installed jvm.dll and now everything works.\n\nSorry for the bother, I'll attach my config files for others to use. ", "id": 22230, "time": "2002-09-04T06:42:48Z", "bug_id": 12126, "creation_time": "2002-09-04T06:42:48Z", "is_private": false}, {"count": 14, "tags": [], "creator": "nacho@apache.org", "text": "Was a config problem", "id": 23214, "time": "2002-09-21T20:53:18Z", "bug_id": 12126, "creation_time": "2002-09-21T20:53:18Z", "is_private": false, "attachment_id": null}]