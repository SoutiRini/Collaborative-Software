[{"count": 0, "tags": [], "creator": "mahaaboob@gmail.com", "attachment_id": null, "text": "Issue: Digest authentication flow is not working\nError Thrown : Function sequence error\n\nPackageName: org.apache.catalina.realm\nClassName : JDBCRealm\nMethodName: String getPassword(String username)\n\nSnapshot from above mentioned method\n===================================\n stmt = credentials(dbConnection, username);\n rs = stmt.executeQuery();\n // Due to this connection commit,  resultset is nullified \n dbConnection.commit();\n \n // While executing this statement it throws Function sequence error\n if (rs.next()) {\n    dbCredentials = rs.getString(1);\n }\n\n===================================\n\nAbove explanation has been validate by placing 7.0.41 catalina.jar where the above changes are not there due to fix of 55071 bug\n \n\nBelow snapshot is the error observed while trying for Digest authentication\n========================================================================== \n\nJul 31, 2013 3:43:40 PM org.apache.catalina.realm.JDBCRealm getPassword\n\nSEVERE: Exception performing authentication\n\njava.sql.SQLException: [TimesTen][TimesTen 11.2.2.5.0 ODBC Driver]Function sequence error\n\n    at com.timesten.jdbc.JdbcOdbc.createSQLException(JdbcOdbc.java:3238)\n\n    at com.timesten.jdbc.JdbcOdbc.standardError(JdbcOdbc.java:3387)\n\n    at com.timesten.jdbc.JdbcOdbc.SQLFetch(JdbcOdbc.java:921)\n\n    at com.timesten.jdbc.JdbcOdbcResultSet.next(JdbcOdbcResultSet.java:409)\n\n    at org.apache.catalina.realm.JDBCRealm.getPassword(JDBCRealm.java:558)\n\n    at org.apache.catalina.realm.RealmBase.getDigest(RealmBase.java:1189)\n\n    at org.apache.catalina.realm.RealmBase.authenticate(RealmBase.java:409)\n\n    at com.kodiak.digest.authentication.KnDigestAuthenticator$KnDigestInfo.authenticate(KnDigestAuthenticator.java:733)\n\n    at com.kodiak.digest.authentication.KnDigestAuthenticator.authenticate(KnDigestAuthenticator.java:275)\n\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:574)\n\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\n\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)\n\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1023)\n\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)\n\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)\n\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n\n    at java.lang.Thread.run(Thread.java:724)\n\n \n\nJul 31, 2013 3:43:40 PM org.apache.catalina.realm.JDBCRealm getPassword\n\nSEVERE: Exception performing authentication\n\njava.sql.SQLException: [TimesTen][TimesTen 11.2.2.5.0 ODBC Driver]Function sequence error\n\n    at com.timesten.jdbc.JdbcOdbc.createSQLException(JdbcOdbc.java:3238)\n\n    at com.timesten.jdbc.JdbcOdbc.standardError(JdbcOdbc.java:3387)\n\n    at com.timesten.jdbc.JdbcOdbc.SQLFetch(JdbcOdbc.java:921)\n\n    at com.timesten.jdbc.JdbcOdbcResultSet.next(JdbcOdbcResultSet.java:409)\n\n    at org.apache.catalina.realm.JDBCRealm.getPassword(JDBCRealm.java:558)\n\n    at org.apache.catalina.realm.RealmBase.getDigest(RealmBase.java:1189)\n\n    at org.apache.catalina.realm.RealmBase.authenticate(RealmBase.java:409)\n\n\"localhost.2013-07-31.log\" 50L, 3800C         \n\nCheers,\nMahaaboob", "id": 168984, "time": "2013-07-31T17:44:41Z", "bug_id": 55333, "creation_time": "2013-07-31T17:44:41Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 55333, "is_private": false, "count": 1, "id": 169009, "time": "2013-08-01T10:18:06Z", "creator": "markt@apache.org", "creation_time": "2013-08-01T10:18:06Z", "text": "Thanks for the report. This has been fixed in trunk and 7.0.x and will be incuded in 7.0.43 onwards."}]