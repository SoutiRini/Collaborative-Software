[{"count": 0, "tags": [], "bug_id": 2528, "attachment_id": null, "text": "I am looking at setAttribute implementation of Standard Session. Tomcat seems \nto be differing from what spec says. Is this intentional?\n \n \nAs per spec:\n \n    Both name and value of setAttribute should be not null. I assumed when \neither of parameters is null servlet container throws IllegalArguementException.\n    But tomcat allows setAttribute(null, null);\n \n    If session.setAttribute(\"someKey\", null) is used tomcat removes previous \nobject in session with key \"someKey\".\n \n    More interesting example:\n \n        session.setAttribute(null, \"KeyValueisNotNULL\");\n        (String)session.getAttribute(null)    returns \"KeyValueisNotNULL\"\n \n \nI believe this is a wrong behaviour.", "id": 3526, "time": "2001-07-09T21:25:55Z", "creator": "mettu.kumar@redspark.com", "creation_time": "2001-07-09T21:25:55Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 2528, "attachment_id": null, "text": "value is allowed to be null (in which case it is equivalent to removeAttribute\n(name)).\n\nname isn't allowed to be null, in which case I would indeed throw an \nIllegalArgE. So unless Craig disagrees, I'll add the fix.", "id": 3533, "time": "2001-07-09T23:54:53Z", "creator": "remm@apache.org", "creation_time": "2001-07-09T23:54:53Z", "is_private": false}, {"count": 2, "tags": [], "creator": "mettu.kumar@redspark.com", "attachment_id": null, "id": 3537, "time": "2001-07-10T01:16:00Z", "bug_id": 2528, "creation_time": "2001-07-10T01:16:00Z", "is_private": false, "text": "Remy,\n\n  I believe setting value == null is not equvalent to removeAttribute.\n  Servlet Spec(Both 2.2 and 2.3) clearly mentions that both name/value cannot \nbe null.(But doesn't say what need to be done by container when they are null)\n\n  Also since Criag is member of JSR53, I would like to point out that spec is \nnot clear on what containers need to do when name/value are null. I know \natleast one servlet contianer which throws IllegalArguementException when \neither one of name/value are null. Also I had seen containers ignoring even if \nboth Name and Value are null (Tomcat is just one among them).\n\nKumar."}, {"count": 3, "tags": [], "bug_id": 2528, "attachment_id": null, "text": "I don't agree. value = null is specified in the Javadoc.", "id": 3553, "time": "2001-07-10T10:16:15Z", "creator": "remm@apache.org", "creation_time": "2001-07-10T10:16:15Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 2528, "text": "Remy,\n\n  I was looking at older PFD(date oct 2000).\n  When I looked at latest PFD I realised that setAttribute(\"Key\", null) is \nequivalent to removeAttribute.\n\nThanks for the clarification.\n\n\nKumar. ", "id": 3560, "time": "2001-07-10T11:52:23Z", "creator": "mettu.kumar@redspark.com", "creation_time": "2001-07-10T11:52:23Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 2528, "attachment_id": null, "text": "Fixed (commit later this afternoon).", "id": 3573, "time": "2001-07-10T13:25:23Z", "creator": "remm@apache.org", "creation_time": "2001-07-10T13:25:23Z", "is_private": false}]