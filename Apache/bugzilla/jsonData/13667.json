[{"count": 0, "tags": [], "text": "Almost every tag forgets to call super.release() In their release() method.  \nThis doesn't cause any problems if your container doesn't recycle tags.  But if \nyou are using Tomcat 4.1.x and have multiple instances of the tags on the same \npage, the page buffer from the previous instance can be reused in the second in \nsome situations.\n\n  public void release() {\n    super.release();  <--- this needs to be added\n    _position = -1;\n    _attributeName = null;\n    _name = null;\n    _scope = \"page\";\n    _tag = null;\n    _metaData = null;\n    _locale = null;\n  }\n\nFor more detailed info see the posts I made to the taglib user list starting \nhere:\nhttp://www.mail-archive.com/taglibs-user%40jakarta.apache.org/msg03439.html\n\nIf we have two statements on the same page, where the first one returns\nrows, but the second does not, the second statement tag prints out the\nactual text of it's query instead of nothing.\n\nFor example:\n  <sql:statement id=\"stmt2\" conn=\"conn\">\n    <sql:query>select * from foo/*a query that returns rows*/</sql:query>\n    <sql:resultSet id=\"rset2\">\n    </sql:resultSet>\n  </sql:statement>\n\n  <sql:statement id=\"stmt3\" conn=\"conn\">\n    <sql:query>select * from bar /*a query that returns NO\nrows*/</sql:query>\n    <sql:resultSet id=\"rset3\">\n    </sql:resultSet>\n  </sql:statement>\nWould actually send back to the browser\n\n  \"select * from bar /*a query that returns NO rows*/\"\n\nIn the following example, the second resultSet outputs all of the items from the\n_first_ query.\n\n------------First Query returns rows-----------\n<%  java.sql.Statement stmt2 = conn.createStatement();\n    java.sql.ResultSet rset2 = stmt2.executeQuery(\"SELECT * FROM foo\");\n    pageContext.setAttribute(\"rset2\", rset2); \n%>\n    <sql:resultSet id=\"rset2b\" name=\"rset2\" scope=\"page\">\n        <sql:getColumn colName=\"IndexedID\"/>\n    </sql:resultSet>\n<%  rset2.close();\n    stmt2.close();\n%>\n----------Second Query returns NO rows-----------\n<%  java.sql.Statement stmt3 = conn.createStatement();\n    java.sql.ResultSet rset3 = stmt3.executeQuery(\"SELECT * FROM bar);\n    pageContext.setAttribute(\"rset3\", rset3);\n%>\n    <sql:resultSet id=\"rset3b\" name=\"rset3\" scope=\"page\">\n        <sql:getColumn colName=\"IndexedID\"/>  <--- BUG BUG outputs all items\nfrom first query!!\n    </sql:resultSet>\n<%  rset3.close();\n    stmt3.close();\n%>", "is_private": false, "bug_id": 13667, "id": 24585, "time": "2002-10-15T19:47:29Z", "creator": "lorenh@firepond.com", "creation_time": "2002-10-15T19:47:29Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 13667, "attachment_id": null, "text": "Loren,\n\nThe release() method is not related to this problem - see bug 16001\n\nAnyway, I'm closing this bug because bug 26863 fixes the issue in your example.\n\nFelipe\n", "id": 53082, "time": "2004-02-27T03:17:31Z", "creator": "nagoya@felipeal.net", "creation_time": "2004-02-27T03:17:31Z", "is_private": false}]