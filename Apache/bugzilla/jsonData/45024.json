[{"count": 0, "tags": [], "creator": "gls@gknw.net", "attachment_id": null, "is_private": false, "id": 116751, "time": "2008-05-17T08:11:38Z", "bug_id": 45024, "creation_time": "2008-05-17T08:11:38Z", "text": "INT_MAX is used to define MAX_REQUESTS on line 206 and requires the inclusion of limits.h. However, limits.h is not included till line 429 and building on VC6 goes down in flames. Furthermore, limits.h is included inside a conditional statement #ifndef RAND_MAX. Hypothetically, if RAND_MAX is already defined, the condition would be false and limits.h would never be included at which point I would think all compilers would frown on it.\n\nSince INT_MAX is used unconditionally, limits.h needs to be included before line 206 AFAIK."}, {"count": 1, "text": "So does the following patch fix your problem:\n\nIndex: support/ab.c\n===================================================================\n--- support/ab.c        (Revision 657321)\n+++ support/ab.c        (Arbeitskopie)\n@@ -193,6 +193,9 @@\n #if APR_HAVE_CTYPE_H\n #include <ctype.h>\n #endif\n+#if APR_HAVE_LIMITS_H\n+#include <limits.h>\n+#endif\n\n /* ------------------- DEFINITIONS -------------------------- */\n\n@@ -426,7 +429,6 @@\n }\n\n #ifndef RAND_MAX\n-#include <limits.h>\n #define RAND_MAX INT_MAX\n #endif\n\n", "bug_id": 45024, "attachment_id": null, "id": 116752, "time": "2008-05-17T08:52:21Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-17T08:52:21Z", "tags": [], "is_private": false}, {"count": 2, "text": "(In reply to comment #1)\n> So does the following patch fix your problem:\n> \n\nYes it does, thank you.\n", "bug_id": 45024, "is_private": false, "id": 116753, "time": "2008-05-17T09:12:17Z", "creator": "gls@gknw.net", "creation_time": "2008-05-17T09:12:17Z", "tags": [], "attachment_id": null}, {"count": 3, "text": "Committed to trunk as r657433 (http://svn.apache.org/viewvc?rev=657433&view=rev).", "bug_id": 45024, "is_private": false, "id": 116756, "time": "2008-05-17T12:32:30Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-17T12:32:30Z", "tags": [], "attachment_id": null}, {"count": 4, "text": "Proposed for backport to 2.2.x as r660284 (http://svn.apache.org/viewvc?rev=660284&view=rev).", "bug_id": 45024, "is_private": false, "id": 116984, "time": "2008-05-26T13:06:24Z", "creator": "rpluem@apache.org", "creation_time": "2008-05-26T13:06:24Z", "tags": [], "attachment_id": null}, {"count": 5, "text": "Backported to 2.2.x", "creator": "rpluem@apache.org", "is_private": false, "id": 117372, "time": "2008-06-05T05:55:21Z", "bug_id": 45024, "creation_time": "2008-06-05T05:55:21Z", "tags": [], "attachment_id": null}]