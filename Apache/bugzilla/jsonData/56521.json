[{"id": 175194, "tags": [], "bug_id": 56521, "attachment_id": 31618, "count": 0, "text": "Created attachment 31618\ndiff file of", "time": "2014-05-14T07:35:37Z", "creator": "leonzhx@hotmail.com", "creation_time": "2014-05-14T07:35:37Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 56521, "attachment_id": null, "text": "in AbstractServletOutputStream, there is an output buffer to save the unwritten bytes for one write in non-blocking mode. However the buffer is allocate each time it's needed and will cause many unnecessary trash. We observed it during our performance testing when the server runs for long time at high TPS, the GC over head is getting larger. After improvement the GC overhead is lowered and CPU usage is also lowered with same TPS.", "id": 175195, "time": "2014-05-14T07:48:17Z", "creator": "leonzhx@hotmail.com", "creation_time": "2014-05-14T07:48:17Z", "is_private": false}, {"text": "it's in package org.apache.coyote.http11.upgrade", "tags": [], "bug_id": 56521, "is_private": false, "count": 2, "id": 175196, "time": "2014-05-14T07:51:01Z", "creator": "leonzhx@hotmail.com", "creation_time": "2014-05-14T07:51:01Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 56521, "attachment_id": null, "is_private": false, "id": 175197, "time": "2014-05-14T08:05:51Z", "creator": "leonzhx@hotmail.com", "creation_time": "2014-05-14T08:05:51Z", "text": "Here TPS is Transaction Per Second which indicates the throughput of the server."}, {"count": 4, "tags": [], "creator": "leonzhx@hotmail.com", "attachment_id": 31619, "text": "Created attachment 31619\nAB testing result for performance\n\nthe red line is the performance of the patched server while the green one is the base.", "id": 175198, "time": "2014-05-14T08:09:24Z", "bug_id": 56521, "creation_time": "2014-05-14T08:09:24Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 56521, "attachment_id": null, "text": "The other thing that would significantly reduce garbage is not to copy the data from the buffer to a new buffer if it is not fully written.", "id": 175323, "time": "2014-05-19T19:54:52Z", "creator": "markt@apache.org", "creation_time": "2014-05-19T19:54:52Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 56521, "attachment_id": null, "is_private": false, "id": 175359, "time": "2014-05-20T19:03:10Z", "creator": "markt@apache.org", "creation_time": "2014-05-20T19:03:10Z", "text": "Fixed in 8.0.x for 8.0.9 onwards and in 7.0.x fir 7.0.55 onwards."}]