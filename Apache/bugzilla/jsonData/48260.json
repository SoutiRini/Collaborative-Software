[{"count": 0, "tags": [], "bug_id": 48260, "attachment_id": null, "id": 132199, "time": "2009-11-22T06:04:21Z", "creator": "manu@netbsd.org", "creation_time": "2009-11-22T06:04:21Z", "is_private": false, "text": "The server is running NetBSD-5.0 with SSL-enabled Apache-2.2.14 (older Apache exhibit the same problem). From time to time, httpd gets a SIGSEGV in ssl3_finish_mac(). That behavior seems common, and other NetBSD users report experiencing it.\n\nThat happens with a plain config (no additonnal module), serving static pages. \n\nStarting with Firefox 3.6, the crash can occur on each request: at once, Firefox can load a page normally. If I make a burst of a dozen page reloads, httpd will crash in ssl3_finish_mac(), and Firefox will give me a \"The connexion was Reset\". Any attempt to load a page by this Firefox instance on this server will then fail, until Apache is restarted. \n\nOnce I get into this state, other client can load pages from Apache, so the problem is with a shared state between Apache and Firefox.\n\nI have a workaround: in Firefox, setting security.enable_tls_session_tickets to false will fix the problem. As Firefox 3.6 ussage will increase, I'd be quite interested by a similar server-side workaround.\n\nI am not sure if there is a bug in Firefox 3.6, but since a sgmentation fault is always the sign of some illness, I suspect the situation is worth an Apache bug report."}, {"count": 1, "tags": [], "bug_id": 48260, "attachment_id": null, "id": 132200, "time": "2009-11-22T06:12:07Z", "creator": "manu@netbsd.org", "creation_time": "2009-11-22T06:12:07Z", "is_private": false, "text": "According to this problem report at Mozilla, the problem would be in OpenSSL:\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=430703"}, {"count": 2, "tags": [], "bug_id": 48260, "text": "Which OpenSSL version are you using? Can you test with mod_ssl linked against OpenSSL 0.9.8k or 0.9.8l? The OpenSSL patch mentioned in the Mozilla ticket should have gone into 0.9.8g already.", "id": 132201, "time": "2009-11-22T10:14:52Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2009-11-22T10:14:52Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "manu@netbsd.org", "text": "It's netbsd-5 branch built-in OpenSSL: \"OpenSSL 0.9.9-dev 09 May 2008\"\nwithout any doubt older than 0.9.8k. I will rebuild with 0.9.8k and\ntest.\n\nIn the meantime, someone proposed a server-side workaround:\nhttp://mail-index.netbsd.org/netbsd-users/2009/11/22/msg004923.html\n\tSSLProtocol all -TLSv1", "id": 132231, "attachment_id": null, "bug_id": 48260, "creation_time": "2009-11-22T21:12:47Z", "time": "2009-11-22T21:12:47Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 48260, "attachment_id": null, "id": 149880, "time": "2011-09-28T07:30:49Z", "creator": "asfbugz@velox.ch", "creation_time": "2011-09-28T07:30:49Z", "is_private": false, "text": "This was due to a bug in that (snapshot version of) OpenSSL, I assume. Seems like it was fixed by the following patch to s3_enc.c:\n\nhttp://cvsweb.netbsd.org/bsdweb.cgi/src/crypto/dist/openssl/ssl/Attic/s3_enc.c?only_with_tag=netbsd-5"}]