[{"count": 0, "tags": [], "creator": "snitin@sconcesolutions.com", "attachment_id": 31392, "text": "Created attachment 31392\nHTTPD conf file\n\nWe have apache 2.2.22 running on four different machines on Windows Server 2008 SP1.\n\nMachine 1:\nIntel(R) Xeon(R) CPU E5-2609 @2.40 GHz (2 processors)\nRAM:  128 GB\nPRODUCTION Machine\n\nMachine 2:\nIntel(R) Xeon(R) CPU E5-2609 @2.40 GHz (2 processors)\nRAM: 32 GB\nTEST Machine\n\nMachine 3:\nAMD Opteron(tm) Processor 6176 SE 2.29 GHz (4 processors)\nRAM:  12 GB\nDEVELOPMENT Machine 1\n\nMachine 4:\nAMD Opteron(tm) Processor 6176 SE 2.29 GHz (4 processors)\nRAM:  12 GB\nDEVELOPMENT Machine 2\n\n\nOn Machine 1, we observe that the size of the httpd.exe process increases to 1.2 Gb.\n\nOn Machine 2 : we run the Apache Benchmark tool to simulate the load similar to PRODUCTION. Memory increase NOT observed\n\nOn Machine 3: Run the Ab tool. Memory Increase observed.\n\nMachine 4: Run the Ab tool. Memory Increase NOT observed.\n\nabs -n 500000 -c 50 -A username:password https://<Domain>/application\n\n\nAll the three machines have the same apache configuration.\nKeepAliveTimeout 60\nSendBufferSize   16384\nTimeout          900\nThreadsPerChild  600\n\nIt's strange the way the issue is observed on few Windows machines and few not.\n\nDoing further round of testing, to eliminate that leak is not coming from application, I brought down the application, ran the ab tool on index.html of Apache. None of the machine show memory increase.\n\nThen I again run the ab tool, but this time on another html which has to be authenticated against Active directory. Voila, I see the memory increase again on Machine 3!!. \n\n\nHas anyone some idea on what is going wrong.\n\nThanks,\nNitin", "id": 173849, "time": "2014-03-15T15:29:04Z", "bug_id": 56271, "creation_time": "2014-03-15T15:29:04Z", "is_private": false}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "text": "Are you saying memory grows proportional to requests authenticated or authorized with mod_authnz_ldap?  Can you report a bit more directly with details?", "id": 173853, "time": "2014-03-15T17:22:18Z", "bug_id": 56271, "creation_time": "2014-03-15T17:22:18Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Thanks for the response, Eric.\n\nI did some more testing around with Apache with some different values on \"n\" and \"c\" parameters using:\n\n\nab -n 500000 -c 50 -A username:password http://<Domain>/application\n\n  n    c    Delta Private Bytes\n1000   5      1.792\n2000   5      4.608\n3000   5      6.4\n4000   5      8.356\n5000   5      11.43\n6000   5      13.09\n\nThat seems to point that as number of requests are increasing the memory increases proportionally.\n\nlooking at the access.log, I do see that response time for the same request at times increase to 109206.\n\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 62403\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 78004\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 46802\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 93605\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 31201\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 78004\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 62403\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 109206\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 31201\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 31201\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 31201\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 124807\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 46802\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 124807\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 46802\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 109206\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 62403\n127.0.0.1 - userx [18/Mar/2014:09:32:39 +0100] \"GET /application/wtcore/jsp/test/staticAuth.html HTTP/1.0\" 200 221 46802\n\nRegards,\nNitin", "attachment_id": null, "id": 173895, "creation_time": "2014-03-18T09:20:49Z", "time": "2014-03-18T09:20:49Z", "creator": "snitin@sconcesolutions.com", "bug_id": 56271, "is_private": false}, {"count": 3, "tags": [], "creator": "snitin@sconcesolutions.com", "attachment_id": null, "id": 174065, "time": "2014-03-24T16:38:04Z", "bug_id": 56271, "creation_time": "2014-03-24T16:38:04Z", "is_private": false, "text": "There was an issue with the ldap node pointed by one of the authentication conf file.\n\nCorrecting it, there is no more memory increase on DEV machine."}]