[{"attachment_id": null, "tags": [], "creator": "a_debona@yahoo.com", "is_private": false, "count": 0, "id": 32099, "time": "2003-02-27T16:28:09Z", "bug_id": 17498, "creation_time": "2003-02-27T16:28:09Z", "text": "I have an unusual problem with Logging and DailyRollingFileAppender.  I have \nconfigured Log4J as follows:\n\n# The debug log configuration\nlog4j.appender.A7=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.A7.DatePattern='.'yyyy-MM-dd\nlog4j.appender.A7.File=${debug_log_file} \nlog4j.appender.A7.layout=org.apache.log4j.PatternLayout\nlog4j.appender.A7.layout.ConversionPattern=%d - %m%n\n#This log can be turned off by changing the priority lower than ERROR which is \nDEBUG or INFO or WARN\nlog4j.category.com.cibc.ibas.logger.debug=DEBUG, A7\n\nThe Problem is that when I look in the logs directory I see the following:\n\n-rw-rw-r--   1 proj12   proj12    829643 Feb 27 11:11 ibas.log\n-rw-rw-r--   1 proj12   proj12    747099 Feb 27 11:15 ibas.log.2003-02-26\n\nas you can see today's log (for Feb.27th) and yesterday's log have the same  \ntimestamp which means that Log4J is still writing to both logs files.  When I \nlook at the log ibas.log.2003-02-26 it has logging activity for the 27th of \nFebruary.  It seems that the log files are always a day behind. (i.e. \nibas.log.2003-02-25 has logging activity for the 26th.. ibas.log.2003-02-24 has \nlogging activity for the 25th etc..)\n\nIt seems as though log4j rolls over the file however keeps writing to both the \nnew log file and the backup log file. Then repeats the same pattern the \nfollowing day. We are running WebLogic 6.1 SP3 in Sun Solaris 5.8 O/S.\n\nAny help would be much appreciated,"}, {"count": 1, "tags": [], "bug_id": 17498, "attachment_id": null, "id": 58343, "time": "2004-05-28T18:00:56Z", "creator": "ceki@apache.org", "creation_time": "2004-05-28T18:00:56Z", "is_private": false, "text": "\nThis is probably a variant of bug 900."}, {"count": 2, "tags": [], "bug_id": 17498, "text": "We are also experiencing the same problem on solaris.  \n\nWe are running iPlanet App Server 6.0 SP4 which uses J2SDK 1.2.2.  This is\nrunning on Solaris 8.  This problem appears for us inside a stateless session\nbean using the daily rolling file appender.\n\nBug 900 refers to similar symptoms, but is on Windows NT. So I'm not sure if\nit's related.", "id": 67024, "time": "2004-11-17T15:37:18Z", "creator": "mcoarr@mitre.org", "creation_time": "2004-11-17T15:37:18Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 17498, "text": "We are also experiencing this problem, with iPlanet on Solaris.\nI think this may be the same problem as bug 24107/31458\nAre you running in a clustered environment?", "id": 69237, "time": "2005-01-05T13:01:53Z", "creator": "sean.mullins@gmail.com", "creation_time": "2005-01-05T13:01:53Z", "is_private": false, "attachment_id": null}, {"count": 4, "text": "I am also experiencing a similar problem.I am running j2sdk1.4.2 on Sun Solaris \n5.8.We have pure java single threaded processes running in the same machine. We \nhave a Log file for each process and each have their own properties file.I am \nalso using the DailyRollingFileAppender.Below is a sample of my properties file.\n\n\nlog4j.rootCategory=debug, R\nlog4j.appender.R=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.R.File=/cdd/apps/logs/XProcess.log\nlog4.appender.LOG.DatePattern='.'yyyy-MM-dd\nlog4j.appender.R.layout=org.apache.log4j.PatternLayout\nlog4j.appender.R.layout.ConversionPattern=%d [%t] %-5p %c - %m%n\n\nThe issue is that the process is writing into the present day\u2019s log as well as \nthe previous days log.This pattern continues and the following day\u2019s log as \nwell as the previous day\u2019s log.\n-rw-rw-r--  1 proj12     proj12 829643 Jan 27 11:11   XProcess.log\n-rw-rw-r--  1 proj12     proj12 747099 Jan 27 11:15   XProcess.log.2005-01-16\n\nAs a result I am loosing some of the data that is overwritten by the following \nday\u2019s logs.Note the process does not write the same data in to the two logs but \ninstead writes part of the log in the present day log and part of the log in \nthe previous day logs.\n\nCan anyone Help me on this\u2026..\n", "bug_id": 17498, "is_private": false, "id": 69860, "time": "2005-01-20T09:56:09Z", "creator": "vikash.singh@patni.com", "creation_time": "2005-01-20T09:56:09Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 17498, "text": "Do you guys have a solution for this? if so what is it. I want to know since we \nare facing the same situation", "id": 80879, "time": "2005-10-06T23:59:43Z", "creator": "chakri@javabyexample.com", "creation_time": "2005-10-06T23:59:43Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "fun.peters@gmx.de", "is_private": false, "count": 6, "id": 83880, "time": "2005-12-21T11:52:19Z", "bug_id": 17498, "creation_time": "2005-12-21T11:52:19Z", "text": "We have the same problem on Linux/i386 using log4j 1.2.8. As far as I can see,\nthere was no relating bug fix up to the current version log4j 1.2.13. Am I right? "}, {"count": 7, "tags": [], "bug_id": 17498, "attachment_id": null, "id": 91769, "time": "2006-08-01T15:25:48Z", "creator": "fun.peters@gmx.de", "creation_time": "2006-08-01T15:25:48Z", "is_private": false, "text": "Forget about my comment #6. We had an configuration problem with our tomcat,\ndifferent web applications loaded instances of log4j and wrote unsynchronized to\nthe logfile.\n"}, {"attachment_id": null, "tags": [], "creator": "jborn@harland.net", "is_private": false, "count": 8, "id": 92542, "time": "2006-08-25T15:17:41Z", "bug_id": 17498, "creation_time": "2006-08-25T15:17:41Z", "text": "I am also running into this problem on a Solaris 8 box.  We are using version\n1.2.12 of log4j.\n\nThe log4j properties we are using are as follows:\n# Configure the name of the logout for the rolling appender\nlog4j.appender.rolling.File=/dir/webapp.log\nlog4j.appender.rolling.layout.ConversionPattern=%d [%t] - %p %c - %m%n\n# Configure the Layout pattern and conversion pattern for the rolling appender\nlog4j.appender.rolling.layout=org.apache.log4j.PatternLayout\n# Configure the rolling appender to be a RollingFileAppender\nlog4j.appender.rolling=org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.rolling.DatePattern='.'yyyy-MM-dd\n#  Configure the stdout appender to use the PatternLayout\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\n# Pattern to output the caller's file name and line number.\nlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n\n# Configure the stdout appender to go to the Console\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\n# Create two appenders, one called stdout and the other called rolling\nlog4j.rootLogger=DEBUG, rolling\n# Set the logger level for everything under \"org.apache\" to WARN\nlog4j.logger.org.apache=WARN\n# Set the logger level for \"org.apache.commons.validator.ValidatorUtil\" to\n# FATAL because we know that errors will be generated here that we want to\n# ignore (due to the fact that it is unknown whether a consumer is personal\n# or business and the validation.xml file is not set up to accomodate the\n# differences)\nlog4j.logger.org.apache.commons.validator.ValidatorUtil=FATAL\nlog4j.logger.com.harland.collective.config.ApplicationConfig=WARN\nlog4j.logger.com.harland.choice.web.tags.CustomLink=WARN\nlog4j.logger.com.harland.choice.web.tags.html.HarlandLinkTag=WARN\nlog4j.logger.com.harland.choice.web.filters.PrivacyPolicyFilter=WARN\nlog4j.logger.com.harland.choice.web.util.resources.ChoiceMessageResources=WARN\n\n\nThe webapp is running under iPlanet and no other applications use this log4j.\nOnly one JVM.\n\nThis behaviour is clobbering the rolled file on us, so seems quite critical in\nnature because we are losing yesterdays logs."}, {"count": 9, "tags": [], "bug_id": 17498, "text": "Created attachment 18756\nAn alternate appender for daily rolling log files.\n\nDailyRollingFileAppender has issues when running in a multi-threaded\nenvironment, as a servlet container in it's nature is.\n\nThe decision to roll over the file is handled within the appender, which in\nmany cases may exist in several instances, possibly due to placement in the\nclassloader hierarchy.\n\nMany of the appender instances may be unaware that the name of the file under\ntheir open file descriptor has changed.\n\nWe have also experiences loss of logging data in this context, as DRFA deletes\nthe log file if it already exists when performing the roll over.\n\nHave you tried placing log4j in the boot classpath, ensuring that it sits on\ntop of the classloader hierarcy?\n\nIn a web container, the .war files should NOT bundle log4j by themselves.\n\nI've attached an alternate appender we use for daily rolling.  It avoids the\nissue by simply creating a dated log file in the first place.", "id": 92612, "time": "2006-08-28T10:38:14Z", "creator": "apache@asgeirnilsen.com", "creation_time": "2006-08-28T10:38:14Z", "is_private": false, "attachment_id": 18756}, {"count": 10, "text": "Marking as invalid as it is likely due to multiple instances of DRFA with same configuration.", "bug_id": 17498, "is_private": false, "id": 107042, "time": "2007-08-22T10:35:19Z", "creator": "carnold@apache.org", "creation_time": "2007-08-22T10:35:19Z", "tags": [], "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 17498, "attachment_id": null, "text": "*** Bug 38874 has been marked as a duplicate of this bug. ***", "id": 107098, "time": "2007-08-22T19:08:53Z", "creator": "carnold@apache.org", "creation_time": "2007-08-22T19:08:53Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 17498, "text": "*** Bug 42562 has been marked as a duplicate of this bug. ***", "id": 107118, "time": "2007-08-22T20:10:06Z", "creator": "carnold@apache.org", "creation_time": "2007-08-22T20:10:06Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "creator": "carnold@apache.org", "is_private": false, "id": 107123, "attachment_id": null, "bug_id": 17498, "creation_time": "2007-08-22T20:18:17Z", "time": "2007-08-22T20:18:17Z", "text": "*** Bug 42797 has been marked as a duplicate of this bug. ***"}, {"count": 14, "tags": [], "bug_id": 17498, "attachment_id": null, "text": "I am also facing this problem .\nPlease refer https://issues.apache.org/bugzilla/show_bug.cgi?id=57240", "id": 179247, "time": "2014-11-24T11:57:03Z", "creator": "techieboysid@gmail.com", "creation_time": "2014-11-24T11:57:03Z", "is_private": false}]