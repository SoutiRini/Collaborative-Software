[{"count": 0, "tags": [], "creator": "harald.oehlmann@elmicron.de", "attachment_id": null, "is_private": false, "id": 153631, "time": "2012-02-09T18:16:08Z", "bug_id": 52633, "creation_time": "2012-02-09T18:16:08Z", "text": "I scanned the packages within Rivet using Komodo and the syntax checker reported the following errors and remarks:\nFile              |Type   |Line|Remark\nsimpledb.tcl      |Error  |301 |Point after closing quote\nsimpledb.tcl      |Warning|200 |Variable \"props\" unknown\nsimpledb.tcl      |Warning|202 |Variable \"props\" unknown\nsimpledb.tcl      |Warning|240 |Avoid nesting of expr (1)\ntclrivet.tcl      |Warning|24  |Proc ||include redefined\ntclrivetparser.tcl|Error  |106 |extra character after closed brace (2)\ntclrivetparser.tcl|Error  |112 |missing \" (3)\ncookie.tcl        |Warning|40  |Use {} to avoid double substitution (4)\ncookie.tcl        |Warning|41  |Use {} to avoid double substitution (5)\ncookie.tcl        |Warning|45  |Use {} to avoid double substitution (6)\nhtml.tcl          |Warning|20  |Use {} to avoid double substitution (7)\nimport_key_value_pairs.tcl\n                  |Warning|37  |Use {} to avoid double substitution (8)\nimport_switch_args.tcl                   \n                  |Warning|22  |Undefined variable \"args\"\n                  |Warning|26  |Use {} to avoid double substitution (9)\nlassign.tcl       |Warning|11  |Redefines proc (10)\nlempty            |Warning|13  |Use {} to avoid double substitution (11)\n\n(1)\nOriginal:\n\tif { $res($oid) == [expr {[llength $propertymatch] / 2}] } {\nProposed change:\n\tif { $res($oid) == [llength $propertymatch] / 2 } {\n\n(2,3)\nAs this is correctly interpreted by TCL, there is no need for action.\nNevertheless, I would add an additional \"\\\" before { and [:\nOriginals:\n\t\t\tappend outbuf \"\\\\}\"\n\t\t\tappend outbuf \"\\\\[\"\nProposed change:\n\t\t\tappend outbuf \"\\\\\\}\"\n\t\t\tappend outbuf \"\\\\\\[\"\n\n(4)\nThis is helpful for the bytecode compiler, so it is not idiot.\nOriginal:\nif [info exists params($time)] {\nProposed change:\nif {[info exists params($time)]} {\n\n(5)\nOriginal:\n\t\tincr expiresIn [expr $params($time) * $num]\nProposed change:\n\t\tincr expiresIn [expr {$params($time) * $num} ]\n(6)\nOriginal:\n\t    set secs [expr [clock seconds] + $expiresIn]\nProposed change:\n\t    set secs [expr {[clock seconds] + $expiresIn} ]\n\n(7)\nOriginal:\n    for {set i [expr [llength $args] - 1]} {$i >= 0} {incr i -1} {\nProposed change:\n    for {set i [expr {[llength $args] - 1} ]} {$i >= 0} {incr i -1} {\n\n(8)\nOriginal:\n\t\tset data(args) [lrange $argsList [expr $index + 1] end]\nProposed change:\n\t\tset data(args) [lrange $argsList [expr {$index + 1}] end]\n\n(9)\nOriginal:\n\t    set array(args) [lrange $argsList [expr $index + 1] end]\nProposed change:\n\t    set array(args) [lrange $argsList [expr {$index + 1}] end]\nor TCL8.5+:\n\t    set array(args) [lrange $argsList $index+1 end]\n\n(10)\nAs lassign is defined in tcl 8.5, one may code a check here:\nProposed change:\nif {0 == [llength [info commands lassign]]} {\n    proc lassign...\n}\n(11)\nexpr $len == 0 -> expr {$len == 0}\n\nI am sorry, this got long and eventually enervous.\nIf ok for the community, I may make the changes.\n\nRegards,\nHarald"}, {"count": 1, "tags": [], "bug_id": 52633, "text": "I'm in the process of applying the proposed patches. I will provide the diff output for test soon", "id": 154300, "time": "2012-02-27T23:35:43Z", "creator": "mxmanghi@apache.org", "creation_time": "2012-02-27T23:35:43Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "mxmanghi@apache.org", "is_private": false, "id": 154885, "time": "2012-03-13T18:07:05Z", "bug_id": 52633, "creation_time": "2012-03-13T18:07:05Z", "tags": [], "text": "Issued addressed and code patched. Harald cross checked the patchs"}, {"count": 3, "tags": [], "text": "closing this bug as it had been fixed in 2.0.5", "attachment_id": null, "bug_id": 52633, "id": 162203, "time": "2012-09-16T10:01:54Z", "creator": "mxmanghi@apache.org", "creation_time": "2012-09-16T10:01:54Z", "is_private": false}]