[{"count": 0, "tags": [], "bug_id": 18273, "text": "CGIs are only called with certain environment variables set (meta-variables per\nspec) like QUERY_STRING, HTTP_* when they are executed.\n\nHowever, *none* of the system specific environment variables are passed on.\nThere are two ways to alleviate it. The workaround means to call a wrapper CGI\nthat sets up the system environment, and passes it to the real CGI. The \"right\nTM\" solution is IMHO that tomcat provides the system environment itself.\n\nMy CGIs depend on some system variables like PATH to locate other exes/dlls. As\nit is nearly impossible to obtain the correct PATH value if is has not been set\nup in the first place, I decided to enhance the CGIServlet to pass on the system\nenvironment to CGIs, too.\n\nSee the attached patch for a proposed implementation. This patch is created\nagainst tomcat 4.1.18", "id": 33678, "time": "2003-03-24T10:42:05Z", "creator": "leo.savernik@vai.at", "creation_time": "2003-03-24T10:42:05Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 18273, "attachment_id": 5477, "id": 33680, "time": "2003-03-24T10:42:34Z", "creator": "leo.savernik@vai.at", "creation_time": "2003-03-24T10:42:34Z", "is_private": false, "text": "Created attachment 5477\nproposed implementation"}, {"count": 2, "tags": [], "bug_id": 18273, "attachment_id": null, "text": "I agree.  I think this is a major problem.", "id": 41186, "time": "2003-07-22T22:51:28Z", "creator": "go123stop@yahoo.com", "creation_time": "2003-07-22T22:51:28Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 18273, "is_private": false, "text": "There are three approaches to take:\n1) pass on no environment variables (current behavior);\n2) pass on a safe, simple set of environment variables a la \"cron\" or \"smrsh\";\n3) pass on the env variables in an aribitrary (system- and jvm-specific way).\n\nFWIW, the CGI \"spec\" at http://cgi-spec.golux.com/cgi-120-00a.html does not\nspecify that the environment variables used to invoke the CGI \"container\" MUST\nor even SHOULD be passed on to the CGI script.  Hence the current behavior.\n\nHowever, I agree that in many circumstances behavior #3 can be useful.  The\nproposed patch is workable but results in one additional process invocation per\nCGI invokation.  I believe a optimistic, caching approach would be more\npreferable.  Can you suggest the behavior / implementation of such an approach?\n  The cache settings/behavior should be simple & predictable (cached once per\nCGIServlet static initialization?).  I would be happy to support an\nimplementation along those lines.\n\nIf there are any other developers with an opinion as to how this sort of thing\nshould be handled in Tomcat, please weigh in (I am just the CGI servlet developer).", "id": 50103, "time": "2004-01-05T21:06:20Z", "creator": "martin@martindengler.com", "creation_time": "2004-01-05T21:06:20Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 18273, "text": "An optional init parameter has been added to the CGI servlet in both TC4 and \nTC5 that causes the shell environment variables to be made available to the \nCGI servlet. By default, this parameter is false. The shell environment \nvariables are read once on servlet init and cached for future requests.", "id": 62094, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2004-08-17T21:57:42Z", "time": "2004-08-17T21:57:42Z", "is_private": false}]