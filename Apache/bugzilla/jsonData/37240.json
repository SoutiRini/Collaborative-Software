[{"count": 0, "attachment_id": null, "creator": "felix.roethenbacher@wyona.com", "is_private": false, "id": 81704, "time": "2005-10-25T14:31:47Z", "bug_id": 37240, "creation_time": "2005-10-25T14:31:47Z", "tags": [], "text": "This patch updates the current Jetty version 4.2.23 (marked as deprecated) to\nthe current stable release version 5.1.4. Additionally, libraries for the\nJettyPlus server are installed to support JNDI and transactions."}, {"count": 1, "tags": [], "bug_id": 37240, "attachment_id": 16804, "text": "Created attachment 16804\nBinaries for Jetty 5.1.4\n\nExtract before applying the patch file.", "id": 81705, "time": "2005-10-25T14:42:03Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-10-25T14:42:03Z", "is_private": false}, {"count": 2, "tags": [], "creator": "felix.roethenbacher@wyona.com", "attachment_id": 16805, "text": "Created attachment 16805\nBinaries for Jetty 5.1.4\n\nExtract before applying patch file.", "id": 81707, "time": "2005-10-25T14:42:52Z", "bug_id": 37240, "creation_time": "2005-10-25T14:42:52Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 37240, "text": "Created attachment 16806\nBinaries for Jetty 5.1.4\n\nExtract before applying patch file.", "id": 81708, "time": "2005-10-25T14:43:31Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-10-25T14:43:31Z", "is_private": false, "attachment_id": 16806}, {"count": 4, "tags": [], "bug_id": 37240, "attachment_id": 16807, "id": 81709, "time": "2005-10-25T14:44:03Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-10-25T14:44:03Z", "is_private": false, "text": "Created attachment 16807\nPatch file for Jetty 5.1.4"}, {"count": 5, "tags": [], "text": "This patch needs some more testing. I will reactivate it if testing was successful.", "is_private": false, "id": 81906, "creator": "felix.roethenbacher@wyona.com", "time": "2005-10-28T18:18:20Z", "bug_id": 37240, "creation_time": "2005-10-28T18:18:20Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 37240, "attachment_id": null, "text": "For some reason, after I apply this patch, I get this error:\n\nlog4j:WARN No appenders could be found for logger (org.mortbay.util.Credential).\n\nlog4j:WARN Please initialize the log4j system properly.\n\nI have tried changing the classpath\n-classpath %CP%;%LENYA_HOME%\\tools\\jetty\\extra\\resources\n-classpath %CP%;%LENYA_HOME%\\tools\\jetty\\extra\\resources\\log4j.properties\n\n and tried\n-Dlog4j.configuration=%LENYA_HOME%\\tools\\jetty\\extra\\resources\\log4j.properties\n-Dlog4j.configuration=%LENYA_HOME%\\tools\\jetty\\extra\\resources\\\n\nwith no luck\n", "id": 82276, "time": "2005-11-09T11:15:19Z", "creator": "dhc4z@virginia.edu", "creation_time": "2005-11-09T11:15:19Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 37240, "attachment_id": 16922, "id": 82278, "time": "2005-11-09T12:01:01Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-11-09T12:01:01Z", "is_private": false, "text": "Created attachment 16922\nPatch for removing log4j:WARN removing upon Jetty start-up.\n\nThis patch is an example for a logger definiton for log4j.\n\nThis patch depends on http://issues.apache.org/bugzilla/show_bug.cgi?id=36353"}, {"count": 8, "tags": [], "text": "(In reply to comment #6)\n> For some reason, after I apply this patch, I get this error:\n> \n> log4j:WARN No appenders could be found for logger (org.mortbay.util.Credential).\n> \n> log4j:WARN Please initialize the log4j system properly.\n\nThis is because log4j.properties is not properly configured. I applied\na patch as an example how it could be solved (first, you have to make\nlog4j configurable within lenya ->\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=36353).\n\n> \n> I have tried changing the classpath\n> -classpath %CP%;%LENYA_HOME%\\tools\\jetty\\extra\\resources\n> -classpath %CP%;%LENYA_HOME%\\tools\\jetty\\extra\\resources\\log4j.properties\n> \n>  and tried\n> -Dlog4j.configuration=%LENYA_HOME%\\tools\\jetty\\extra\\resources\\log4j.properties\n> -Dlog4j.configuration=%LENYA_HOME%\\tools\\jetty\\extra\\resources\\\n> \n> with no luck\n> \n\nNote that the jetty update is working fine on Linux but there is an issue\nwith the lenya.bat file on windows that is hardly to debug as the start\nwindow with the error message pops up and disappears faster than I can twinkle :-)", "is_private": false, "id": 82279, "creator": "felix.roethenbacher@wyona.com", "time": "2005-11-09T12:08:13Z", "bug_id": 37240, "creation_time": "2005-11-09T12:08:13Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 37240, "text": "Created attachment 16924\npatch for lenya.bat\n\nchanged %LENYA_HOME instances to %LENYA_HOME%\nand changed path seperators from / to \\", "id": 82293, "time": "2005-11-09T14:04:53Z", "creator": "dhc4z@virginia.edu", "creation_time": "2005-11-09T14:04:53Z", "is_private": false, "attachment_id": 16924}, {"count": 10, "tags": [], "text": "(In reply to comment #8)\n> [...]\n> Note that the jetty update is working fine on Linux but there is an issue\n> with the lenya.bat file on windows that is hardly to debug as the start\n> window with the error message pops up and disappears faster than I can twinkle :-)\n\nAdded a patch with some problems I saw in lenya.bat.  deleting the %EXEC% from\nthe doServlet line helps ;)", "is_private": false, "id": 82294, "creator": "dhc4z@virginia.edu", "time": "2005-11-09T14:08:31Z", "bug_id": 37240, "creation_time": "2005-11-09T14:08:31Z", "attachment_id": null}, {"count": 11, "attachment_id": null, "creator": "dhc4z@virginia.edu", "is_private": false, "id": 82313, "time": "2005-11-09T17:38:38Z", "bug_id": 37240, "creation_time": "2005-11-09T17:38:38Z", "tags": [], "text": "Hmm, there seems to be an issue with the loader not picking up the jar files: \n<paste>\nC:\\src\\lenya-1.4.x>lenya servlet\n-------------------- Loading --------------------\nProcessing repository: .\\tools\\jetty\\lib,.\\tools\\jetty\\extra\\lib,.\\tools\\jetty\\e\nxtra\\ext,.\\tools\\jetty\\ext,.\\tools\\jetty\\extra\\resources,.\\build\\lenya\\webapp\\WE\nB-INF\\lib\\endorsed\n-------------------- Executing -----------------\nMain Class: org.mortbay.jetty.plus.Server\nException in thread \"main\" java.lang.ClassNotFoundException: org.mortbay.jetty.p\nlus.Server\n        at java.net.URLClassLoader$1.run(Unknown Source)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.net.URLClassLoader.findClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at Loader.invokeMain(Unknown Source)\n        at Loader.run(Unknown Source)\n        at Loader.main(Unknown Source)\nC:\\src\\lenya-1.4.x>\n</paste>\n\nIf I use the current loader (not the one from the provided binaries) I still get\nthe log4j warning (after applying the patch):\n<paste>\nC:\\src\\lenya-1.4.x>lenya servlet\n-------------------- Loading --------------------\nProcessing repository: .\\tools\\jetty\\lib\nAdding jar: .\\tools\\jetty\\lib\\org.mortbay.jetty-5.1.4.jar\nAdding jar: .\\tools\\jetty\\lib\\org.mortbay.jmx-5.1.4.jar\nAdding jar: .\\tools\\jetty\\lib\\servlet-2.4.jar\nProcessing repository: .\\tools\\jetty\\extra\\lib\nAdding jar: .\\tools\\jetty\\extra\\lib\\org.mortbay.jaas-5.1.4.jar\nAdding jar: .\\tools\\jetty\\extra\\lib\\org.mortbay.jetty.plus-5.1.4.jar\nProcessing repository: .\\tools\\jetty\\extra\\ext\nAdding jar: .\\tools\\jetty\\extra\\ext\\activation.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\carol.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\commons-cli-1.0.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\connector-1_5.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\howl.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\javax77.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\jotm.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\jotm_iiop_stubs.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\jotm_jrmp_stubs.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\jta-spec1_0_1.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\jts1_0.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\log4j.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\mail.jar\nAdding jar: .\\tools\\jetty\\extra\\ext\\xapool.jar\nProcessing repository: .\\tools\\jetty\\ext\nAdding jar: .\\tools\\jetty\\ext\\commons-logging.jar\nProcessing repository: .\\tools\\jetty\\extra\\resources\nProcessing repository: .\\build\\lenya\\webapp\\WEB-INF\\lib\\endorsed\nAdding jar: .\\build\\lenya\\webapp\\WEB-INF\\lib\\endorsed\\jakarta-bcel-20040329.jar\nAdding jar: .\\build\\lenya\\webapp\\WEB-INF\\lib\\endorsed\\jakarta-regexp-1.4.jar\nAdding jar: .\\build\\lenya\\webapp\\WEB-INF\\lib\\endorsed\\xalan-2.7.0.jar\nAdding jar: .\\build\\lenya\\webapp\\WEB-INF\\lib\\endorsed\\xercesImpl-2.7.1.jar\nAdding jar: .\\build\\lenya\\webapp\\WEB-INF\\lib\\endorsed\\xml-apis-1.3.02.jar\n-------------------- Executing -----------------\nMain Class: org.mortbay.jetty.plus.Server\nlog4j:WARN No appenders could be found for logger (org.mortbay.util.Credential).\n\nlog4j:WARN Please initialize the log4j system properly.\n</paste>\n\nand additionally I get a 404 when trying to access http://localhost:8888/index.html.\n\n"}, {"count": 12, "tags": [], "text": "Created attachment 16928\nPatch file for Jetty 5.1.4 (fixed problems with lenya.bat)\n\nSeems to be working now for windows (with no log4j complaints)\nThanks", "is_private": false, "id": 82314, "creator": "dhc4z@virginia.edu", "time": "2005-11-09T18:49:45Z", "bug_id": 37240, "creation_time": "2005-11-09T18:49:45Z", "attachment_id": 16928}, {"count": 13, "attachment_id": null, "creator": "felix.roethenbacher@wyona.com", "is_private": false, "id": 82341, "time": "2005-11-10T10:38:41Z", "bug_id": 37240, "creation_time": "2005-11-10T10:38:41Z", "tags": [], "text": "Thanks Doug for looking into this! As the Windows version is working now, I set\nthis bug back on track.\n\nThere is still an issue that leads to SocketTimeoutExceptions. It seems that it\nhas to do with the (Cocoon and Lenya) scheduler. Please find below the stacktrace:\n\njava.net.SocketTimeoutException: Accept timed out\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:353)\n        at java.net.ServerSocket.implAccept(ServerSocket.java:448)\n        at java.net.ServerSocket.accept(ServerSocket.java:419)\n        at org.mortbay.util.ThreadedServer.acceptSocket(ThreadedServer.java:432)\n        at org.mortbay.util.ThreadedServer$Acceptor.run(ThreadedServer.java:631)"}, {"count": 14, "tags": [], "text": "(In reply to comment #13)\n> Thanks Doug for looking into this! As the Windows version is working now, I set\n> this bug back on track.\n> \n> There is still an issue that leads to SocketTimeoutExceptions. It seems that it\n> has to do with the (Cocoon and Lenya) scheduler. Please find below the stacktrace:\n> \n> java.net.SocketTimeoutException: Accept timed out\n>         at java.net.PlainSocketImpl.socketAccept(Native Method)\n>         at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:353)\n>         at java.net.ServerSocket.implAccept(ServerSocket.java:448)\n>         at java.net.ServerSocket.accept(ServerSocket.java:419)\n>         at org.mortbay.util.ThreadedServer.acceptSocket(ThreadedServer.java:432)\n>         at org.mortbay.util.ThreadedServer$Acceptor.run(ThreadedServer.java:631)\n\n\n\nIs this a error show stopper?  How do I reproduce it?  I guess that I have to\nschedule something?\n\n ", "is_private": false, "id": 82656, "creator": "dhc4z@virginia.edu", "time": "2005-11-18T16:21:15Z", "bug_id": 37240, "creation_time": "2005-11-18T16:21:15Z", "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 37240, "attachment_id": null, "text": "(In reply to comment #14)\n> \n> Is this a error show stopper?  How do I reproduce it?  I guess that I have to\n> schedule something?\n> \n>  \n\nNo, I don't think it's a show stopper. Everything is working fine so far, though\nI never tried to schedule something. My assumption is that the scheduler thread\nopens a connection but does not close it properly after usage, hence the\nSocketTimeoutException. I did not investigate it so far, just my 2 cents ...", "id": 82657, "time": "2005-11-18T16:28:42Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-11-18T16:28:42Z", "is_private": false}, {"count": 16, "tags": [], "bug_id": 37240, "text": "applied patch, Thanks Felix\nwill take a look at the scheduling error you reported", "id": 82678, "time": "2005-11-19T07:55:57Z", "creator": "dhc4z@virginia.edu", "creation_time": "2005-11-19T07:55:57Z", "is_private": false, "attachment_id": null}, {"count": 17, "tags": [], "bug_id": 37240, "text": "Thanks for applying the patch!\n\nI still get a warning message upon servlet startup:\n\nlog4j:WARN No appenders could be found for logger (org.mortbay.http.ContextLoader).\nlog4j:WARN Please initialize the log4j system properly.\n\nIt seems that the log4j patch has not been applied yet:\n\n\"Patch for removing log4j:WARN removing upon Jetty start-up.\"\n\nI would suggest to close this bug after applying the missing patch and file a\nnew bug for the SocketTimeoutException bug.", "id": 82747, "time": "2005-11-23T11:15:16Z", "creator": "felix.roethenbacher@wyona.com", "creation_time": "2005-11-23T11:15:16Z", "is_private": false, "attachment_id": null}, {"count": 18, "tags": [], "text": "applied \"Patch for removing log4j:WARN removing upon Jetty start-up.\"\nThanks Felix, \nI can't reproduce the \"java.net.SocketTimeoutException: Accept timed out\" error,\ncan you file a bug for this. ", "is_private": false, "id": 82751, "creator": "dhc4z@virginia.edu", "time": "2005-11-23T13:42:44Z", "bug_id": 37240, "creation_time": "2005-11-23T13:42:44Z", "attachment_id": null}, {"count": 19, "tags": [], "creator": "felix.roethenbacher@wyona.com", "attachment_id": null, "text": "Thanks Doug for applying!\n\nI will open another bug for the SocketTimeoutException.", "id": 82752, "time": "2005-11-23T13:52:52Z", "bug_id": 37240, "creation_time": "2005-11-23T13:52:52Z", "is_private": false}]