[{"attachment_id": null, "tags": [], "creator": "adam.hardy@cyberspaceroad.com", "text": "I cannot log in to an SSL-encrypted page with Mozilla. \n\nTomcat just redisplays the login page continually and then perhaps after 5, 10\nor 30 login attempts, it succeeds. \n\nSometimes, at undefined times as far as my testing goes, it throws a status 400\n'invalid direct reference to j_security_check' error.\n\nI will attach a simple WAR to demonstrate. The web.xml is configured to work\nwith the TC memory realm. \n\nI will also attach just the web.xml for people who only want to do a quick check.\n\nBest regards,\nAdam", "count": 0, "id": 45826, "time": "2003-10-17T10:19:44Z", "bug_id": 23887, "creation_time": "2003-10-17T10:19:44Z", "is_private": false}, {"count": 1, "attachment_id": 8605, "bug_id": 23887, "text": "Created attachment 8605\ndeployment descriptor", "id": 45827, "time": "2003-10-17T10:20:42Z", "creator": "adam.hardy@cyberspaceroad.com", "creation_time": "2003-10-17T10:20:42Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "adam.hardy@cyberspaceroad.com", "text": "Created attachment 8606\ntest.war", "id": 45828, "time": "2003-10-17T10:22:00Z", "bug_id": 23887, "creation_time": "2003-10-17T10:22:00Z", "is_private": false, "attachment_id": 8606}, {"count": 3, "tags": [], "text": "Mozilla is buggy: its cache handling is invalid (hint: hit refresh after logging\nin). Please do not reopen the report unless you can prove bad behavior on the\nTomcat side (ex: bad redirects, bad session handling).", "is_private": false, "bug_id": 23887, "id": 45832, "time": "2003-10-17T12:34:54Z", "creator": "remm@apache.org", "creation_time": "2003-10-17T12:34:54Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 23887, "text": "Yes that is the problem. I've been tricked by the cache again. Caching is the\none of my biggest sources of wasted time in looking for bugs that aren't there. \n\nIn the upgrade from TC4 to TC5, the URL of the FORM-based login page is hidden,\nso I am not surprised by Mozilla's behaviour. I do not think Mozilla is buggy -\nit is more likely a feature. :)\n\nI was also caught out because I am using struts so much and the struts servlet\nputs the non-cache headers in automatically if you configure it to do so.\nObviously these are not going to be taken care of in the HTML login page. \n\nSo a refresh is all that is required. Or for anyone else reading this\nafterwards, the following headers in the HTML (where the expiry date is in the\npast) (check the source HTML if you can't see this):\n\n<meta http-equiv=\"cache-control\" content=\"public\">\n<meta http-equiv=\"expires\" content=\"Fri, 30 Oct 2002 14:19:41 GMT\">\n<meta http-equiv=\"pragma\" content=\"no-cache\">\n\nAdasm", "id": 45858, "time": "2003-10-17T17:58:44Z", "creator": "adam.hardy@cyberspaceroad.com", "creation_time": "2003-10-17T17:58:44Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "remm@apache.org", "text": "No, it's a Mozilla bug: Tomcat doesn't include a if-modified-since, and it is a\nsecure connection, so it is wrong to cache this. BTW, if this is not a secure\nconnection, Tomcat should set the appropriate cache control headers.", "id": 45859, "time": "2003-10-17T18:08:18Z", "bug_id": 23887, "creation_time": "2003-10-17T18:08:18Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 23887, "text": "OK I'll take your word for it. I'll log this at bugzilla.mozilla.org and let\nthem think about it. \n\nThanks for the information. \n\nAdam", "id": 45861, "time": "2003-10-17T18:19:11Z", "creator": "adam.hardy@cyberspaceroad.com", "creation_time": "2003-10-17T18:19:11Z", "is_private": false, "attachment_id": null}]