[{"count": 0, "tags": [], "creator": "jerenkrantz@apache.org", "text": "The Java task when used with an 'output' attribute will wrap the output.  This\ncan lead to corruption/invalid output from otherwise well-behaving Java programs\nthat emit all data on long lines without a newline.  The output will have\nnewlines added throughout in incorrect locations.\n\nA task snippet:\n\n<java classname=\"LongLine\" output=\"longline.txt\" />\n\nwhere LongLine's main class will emit something greater than 4k without a new\nline to System.out.  The output file longline.txt will now contain newlines in\nplaces not originally requested.\n\nThe output from the above task would be different from:\n\njava LongLine > longline.txt\n\nIt seems that the Redirector class will always print newlines.  A partial fix is\nas follows:\n\n--- src/main/org/apache/tools/ant/taskdefs/Redirector.java\tTue Jul 15 21:59:37 2003\n+++ src/main/org/apache/tools/ant/taskdefs/Redirector.java.new\tTue Jul 15\n21:58:28 2003\n@@ -365,7 +365,7 @@\n         if (outPrintStream == null) {\n             outPrintStream = new PrintStream(outputStream);\n         }\n-        outPrintStream.println(line);\n+        outPrintStream.print(line);\n     }\n \n     /**\n\nThis is definitely not an ideal solution because now no newlines will be emitted\nto the file.  This isn't right either, but solves my immediate problem.\n\nThis problem also exists in Ant 1.5.3 which has the output code back in Java\ntaskdef file.\n\nI'll leave it to people who know Ant better than I for a more complete solution.\n If you need a more precise reproduction case, please let me know, but it's\nfairly straightforward to reproduce (IMHO).\n\nThanks!", "id": 40779, "time": "2003-07-16T05:14:30Z", "bug_id": 21636, "creation_time": "2003-07-16T05:14:30Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "conor@apache.org", "text": "I have a fix for this but I'm not able to commit right now. Thanks for reporting\nthis.", "id": 40833, "time": "2003-07-16T14:44:58Z", "bug_id": 21636, "creation_time": "2003-07-16T14:44:58Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 21636, "attachment_id": null, "text": "Fixed in CVS", "id": 40894, "time": "2003-07-17T10:52:24Z", "creator": "conor@apache.org", "creation_time": "2003-07-17T10:52:24Z", "is_private": false}, {"count": 3, "tags": [], "creator": "jkf@apache.org", "text": "*** Bug 22647 has been marked as a duplicate of this bug. ***", "id": 43160, "time": "2003-08-22T12:15:11Z", "bug_id": 21636, "creation_time": "2003-08-22T12:15:11Z", "is_private": false, "attachment_id": null}]