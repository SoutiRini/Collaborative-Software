[{"count": 0, "tags": [], "bug_id": 11793, "text": "Hello,\n\nI'm currently playing with output\nfilters. I thought of using awk\nto print out the number\nof each line. In my bash shell I\nused this:\n\necho \"<html>\" | awk '{print NR \":\" $N}'\n\nI add the following lines to my httpd.conf:\n\nExtFilterDefine awk_line_numbering mode=output outtype=text/html \ncmd=\"/bin/awk '{print NR\\\": \\\" $N}'\" \n<Location /> \nSetOutputFilter awk_line_numbering \n</Location>\n\nNow when I start the apache I get a\nsyntax error. \n\nUnexpected parameter: `: \\\" $N}'\"'\n\nI suppose this is a bug because some\nexternal programs like awk need to use\nquotation marks in order to work.\nA workaround is to put the awk command in\nan extra shell script but I assume\nthis to be a bug.\n\nMy friend Werner Schalk has already posted\nthis to the users mailing list of apache but\nthey said I should use back-slashes (what I\ndid anyway) or to report a bug. Here it is :-)\n\nBye and thanks,\nSebastian Wolfgarten", "id": 21208, "time": "2002-08-17T18:04:28Z", "creator": "sebastian.wolfgarten@gmx.net", "creation_time": "2002-08-17T18:04:28Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 11793, "text": "Did you try\n  ExtFilterDefine awk_line_numbering mode=output outtype=text/html \n     cmd=\"/bin/awk '{print NR\\\\\\\": \\\\\\\" $N}'\"\n\nIn case the '\\' escaping is eating the second double quote?\n\nIf that's not the workaround, there is a bug in the parser.\n", "id": 21237, "time": "2002-08-18T20:01:48Z", "creator": "wrowe@apache.org", "creation_time": "2002-08-18T20:01:48Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "rederpj@remulak.net", "text": "This indeed seems to be a bug. parse_cmd in mod_ext_filter.c does not process\nescaping characters. It sees the first \" and scans till it finds the next \". No\nchecks for escape chars.\n\nI'll have a fix shortly.", "id": 21277, "time": "2002-08-19T16:26:00Z", "bug_id": 11793, "creation_time": "2002-08-19T16:26:00Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "creator": "cv@corbach.de", "text": "If you need a line numbering ExtFilter urgently you can use pr without getting \ninto escaping issues:\n\nExtFilterDefine pr_line_numbering cmd=\"/usr/bin/pr -n -t\"\n", "id": 21333, "time": "2002-08-19T20:44:38Z", "bug_id": 11793, "creation_time": "2002-08-19T20:44:38Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 11793, "text": "This was fixed earlier today (go Paul!).  I just verified that this \ncmd= parameter yields a filter that prefixes the response with line \nnumbers:\n\ncmd=\"/bin/awk '{print NR\\\": \\\" $N}'\"\n\nTo pick up the fix, you need a new modules/experimental/mod_ext_filter.c \nand a new srclib/apr/strings/apr_cpystrn.c.  This will all be in the \nnext release of Apache 2.0.x.\n\nThanks for your report, and thanks for using Apache.\n", "id": 21500, "time": "2002-08-21T19:57:22Z", "creator": "trawick@apache.org", "creation_time": "2002-08-21T19:57:22Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 11793, "text": "*** Bug 11794 has been marked as a duplicate of this bug. ***", "id": 21502, "time": "2002-08-21T20:19:58Z", "creator": "trawick@apache.org", "creation_time": "2002-08-21T20:19:58Z", "is_private": false, "attachment_id": null}]