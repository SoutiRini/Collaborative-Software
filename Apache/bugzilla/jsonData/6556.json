[{"count": 0, "tags": [], "creator": "brett.knights@tanner.com", "text": "One of my web apps fails on javax.xml.transform.Result class not found even \nthough jaxp.jar is in the webapp's lib directory. \n\nThe app works if I move jaxp.jar to the TC/common/lib directory.\nThe Exception thrown is:\n**********************************************************************\n2002-02-19 08:24:44 StandardWrapperValve[SimpleReports]: Allocate exception for \nservlet SimpleReports\njavax.servlet.ServletException: Error instantiating servlet class \nSimpleSQLReport\n\tat org.apache.catalina.core.StandardWrapper.loadServlet\n(StandardWrapper.java:893)\n\tat org.apache.catalina.core.StandardWrapper.allocate\n(StandardWrapper.java:653)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:214)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.process\n(Ajp13Processor.java:429)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.run(Ajp13Processor.java:495)\n\tat java.lang.Thread.run(Thread.java:484)\n----- Root Cause -----\njava.lang.NoClassDefFoundError: javax/xml/transform/Result\n\tat java.lang.Class.newInstance0(Native Method)\n\tat java.lang.Class.newInstance(Class.java:237)\n\tat org.apache.catalina.core.StandardWrapper.loadServlet\n(StandardWrapper.java:884)\n\tat org.apache.catalina.core.StandardWrapper.allocate\n(StandardWrapper.java:653)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:214)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.process\n(Ajp13Processor.java:429)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.run(Ajp13Processor.java:495)\n\tat java.lang.Thread.run(Thread.java:484)\n******************************************************************\n\n\nSimilarly when I moved Xerces to server/lib (webapp had a copy of xerces 1.4.3)\nthe web app wouldn't run but threw  the following Exception:\n**********************************************************************\n2002-02-19 08:24:38 StandardContext[/tanner]: Servlet /tanner threw load() \nexception\njavax.servlet.ServletException: Servlet.init() for servlet jsp threw exception\n\tat org.apache.catalina.core.StandardWrapper.loadServlet\n(StandardWrapper.java:935)\n\tat org.apache.catalina.core.StandardWrapper.load\n(StandardWrapper.java:808)\n\tat org.apache.catalina.core.StandardContext.loadOnStartup\n(StandardContext.java:3266)\n\tat org.apache.catalina.core.StandardContext.start\n(StandardContext.java:3395)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:614)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n\tat org.apache.catalina.core.StandardEngine.start\n(StandardEngine.java:343)\n\tat org.apache.catalina.core.StandardService.start\n(StandardService.java:388)\n\tat org.apache.catalina.core.StandardServer.start\n(StandardServer.java:506)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:781)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:681)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:179)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:243)\n----- Root Cause -----\njava.lang.NoClassDefFoundError: org/xml/sax/SAXException\n\tat org.apache.jasper.compiler.TldLocationsCache.processWebDotXml\n(TldLocationsCache.java:164)\n\tat org.apache.jasper.compiler.TldLocationsCache.<init>\n(TldLocationsCache.java:138)\n\tat org.apache.jasper.EmbededServletOptions.<init>\n(EmbededServletOptions.java:345)\n\tat org.apache.jasper.servlet.JspServlet.init(JspServlet.java:266)\n\tat org.apache.catalina.core.StandardWrapper.loadServlet\n(StandardWrapper.java:916)\n\tat org.apache.catalina.core.StandardWrapper.load\n(StandardWrapper.java:808)\n\tat org.apache.catalina.core.StandardContext.loadOnStartup\n(StandardContext.java:3266)\n\tat org.apache.catalina.core.StandardContext.start\n(StandardContext.java:3395)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:614)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n\tat org.apache.catalina.core.StandardEngine.start\n(StandardEngine.java:343)\n\tat org.apache.catalina.core.StandardService.start\n(StandardService.java:388)\n\tat org.apache.catalina.core.StandardServer.start\n(StandardServer.java:506)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:781)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:681)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:179)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:243)\n*************************************************************************", "id": 10907, "time": "2002-02-19T17:27:28Z", "bug_id": 6556, "creation_time": "2002-02-19T17:27:28Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 6556, "attachment_id": null, "is_private": false, "id": 10909, "time": "2002-02-19T17:31:20Z", "creator": "brett.knights@tanner.com", "creation_time": "2002-02-19T17:31:20Z", "text": "java version \"1.3.1_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.3.1_01)\nJava HotSpot(TM) Client VM (build 1.3.1_01, mixed mode)\n"}, {"count": 2, "tags": [], "bug_id": 6556, "attachment_id": null, "is_private": false, "id": 10911, "time": "2002-02-19T17:33:40Z", "creator": "brett.knights@tanner.com", "creation_time": "2002-02-19T17:33:40Z", "text": "Also I am using Saxon so after moving jaxp.jar to server/lib I had to modify my \njre/lib/jaxp.properties to use saxon as the transformer factory. After doing \nthat Saxon also wasn't found in the web app/lib directory and I had to move it \nto common/lib as well. The error thrown when my app was trying to find saxon \nwas:\n\n*********************************************************************\n2002-02-19 08:47:29 StandardWrapperValve[ReportIndex]: Servlet.service() for \nservlet ReportIndex threw exception\njavax.servlet.ServletException: Servlet execution threw an exception\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:269)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.process\n(Ajp13Processor.java:429)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.run(Ajp13Processor.java:495)\n\tat java.lang.Thread.run(Thread.java:484)\n----- Root Cause -----\njavax.xml.transform.TransformerFactoryConfigurationError: \njava.lang.ClassNotFoundException: com.icl.saxon.TransformerFactoryImpl\n\tat javax.xml.transform.TransformerFactory.newInstance\n(TransformerFactory.java:121)\n\tat com.knightsofthenet.dom.SheetManager.setupTransFormer\n(SheetManager.java:77)\n\tat com.knightsofthenet.dom.SheetManager.access$0(SheetManager.java)\n\tat com.knightsofthenet.dom.SheetManager$SheetDetail.getStyleSheet\n(SheetManager.java:294)\n\tat com.knightsofthenet.dom.SheetManager$SheetDetail.getSheet\n(SheetManager.java:279)\n\tat com.knightsofthenet.dom.SheetManager.get(SheetManager.java:102)\n\tat SimpleSQLReportIndexor.getStyleSheet(SimpleSQLReportIndexor.java:123)\n\tat SimpleSQLReportIndexor.processResult(SimpleSQLReportIndexor.java:170)\n\tat SimpleSQLReportIndexor.processQuery(SimpleSQLReportIndexor.java:86)\n\tat SimpleSQLReportIndexor.handleRequest(SimpleSQLReportIndexor.java:61)\n\tat SimpleSQLReportIndexor.doGet(SimpleSQLReportIndexor.java:52)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.process\n(Ajp13Processor.java:429)\n\tat org.apache.ajp.tomcat4.Ajp13Processor.run(Ajp13Processor.java:495)\n\tat java.lang.Thread.run(Thread.java:484)\n***************************************************************************"}, {"count": 3, "tags": [], "text": "The second part of the bug is normal behavior (you must have an XML parser in\ncommon/lib for Jasper). Your version of Xerces in your webapp will fully\noverride the shared one, except if you're suing it through JAXP (in which case\nthere's nothing I can do).\n\nThe first part has already been fixed in both branches (you can check wither by\nrecompiling the 'tomcat_40_branch' or using a nightly build).\n\n*** This bug has been marked as a duplicate of 6374 ***", "attachment_id": null, "id": 10916, "creator": "remm@apache.org", "time": "2002-02-19T17:42:11Z", "bug_id": 6556, "creation_time": "2002-02-19T17:42:11Z", "is_private": false}]