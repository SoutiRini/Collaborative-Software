[{"count": 0, "tags": [], "bug_id": 56264, "attachment_id": 31387, "id": 173826, "time": "2014-03-14T18:08:08Z", "creator": "mstreeter1@gmail.com", "creation_time": "2014-03-14T18:08:08Z", "is_private": false, "text": "Created attachment 31387\nPatch File\n\nWhen a rewrite to proxy is configured in the server config, a check is made to make sure mod_proxy is active.  But the same is not done if a rewrite to proxy is configured in an .htaccess file.  This can produce a misleading error.\n\nSteps to Reproduce:\n1) Disabe mod_proxy.\n2) Add a RewriteRule to an .htaccess file that uses mod_proxy (i.e.):\nRewriteRule . http://www.mydom.com/index.html [P,L]\n3) Go to a browser and try to load the site with the .htaccess file.\n\nActual Results: The error_log will show an error like this:\n[Fri Mar 14 11:53:20.226288 2014] [core:error] [pid 6449] (2)No such file or directory: [client 192.168.2.4:32811] AH00132: file permissions deny server access: proxy:http://www.mydom.com/index.html\n\nExpected Results:\n[Fri Mar 14 12:02:05.964263 2014] [rewrite:error] [pid 6592] [client 192.168.2.4:32816] AH00669: attempt to make remote request from mod_rewrite without proxy enabled: proxy:http://www.mydom.com/index.html\n\nI believe this same issue would be on all hardware/operating systems, but in case it matters, this was tested on: CentOS 6.5 x86_64, Apache 2.4.7, apr-1.5.0, apr-util-1.5.3.\n\nThe attached patch file for the 2.4.7 version of mod_rewrite.c fixes it for me.  Basically it is the block of code from hook_uri2file that does the proxy check, copied to hook_fixup."}]