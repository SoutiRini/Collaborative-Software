[{"count": 0, "tags": [], "text": "(Noted when reviewing bug 55282 and its fix - r1597855 )\n\nApart from ~42 references in text code, the o.a.t.util.descriptor.web.ApplicationListener constructor is called in only one place and in that place [1] the pluggabilityBlocked argument is always \"false\".\n\n[1] org.apache.catalina.startup.ContextConfig#configureContext(WebXml)\n\n\nOriginally this feature was added in r1492307 and this the second constructor argument was named \"fromTLD\". The feature is that listeners added by TLD scanning do not have access to all configuration APIs.\n\nIn Tomcat 8 Jasper now initializes itself via JasperInitializer.onStartup() and adds TLD listeners via ServletContext.addListener(String) calls.\n\nThus:\n1. I suspect that the feature implemented by r1492307 may be currently broken which means that listeners defined in TLDs have access to full API.\n\n2. ApplicationListener.pluggabilityBlocked field and a bunch of code can be removed.", "is_private": false, "bug_id": 56588, "id": 175630, "time": "2014-06-04T12:46:07Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-04T12:46:07Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 56588, "attachment_id": null, "id": 175640, "time": "2014-06-04T19:43:21Z", "creator": "markt@apache.org", "creation_time": "2014-06-04T19:43:21Z", "is_private": false, "text": "The feature isn't broken. The original fix included a test that still passes. It works because all listeners added via ServletContext.addListener() are blocked from using pluggability features.\n\nI agree there is some unused code we can remove."}, {"count": 2, "tags": [], "text": "Fixed in 8.0.x for 8.0.9 onwards.", "is_private": false, "bug_id": 56588, "id": 175642, "time": "2014-06-04T21:19:20Z", "creator": "markt@apache.org", "creation_time": "2014-06-04T21:19:20Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 56588, "text": "Ack. I see.\nIn StandardContext.listenerStart() the listeners that have been already configured before (via ServletContext API) are added to 'noPluggabilityListeners' set. That does the trick.\n\nI updated deprecation markers on o.a.c.Context methods in Tomcat 7 in r1600638. It will be in 7.0.55.", "id": 175665, "time": "2014-06-05T12:46:16Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-05T12:46:16Z", "is_private": false, "attachment_id": null}]