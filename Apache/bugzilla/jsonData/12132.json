[{"count": 0, "tags": [], "bug_id": 12132, "is_private": false, "text": "There is a bug in mod_rewrite that prevents you from setting the expiration date\nof a cookie using the cookie|CO flag in the RewriteRule directive.  The\ndocumentation states that the flag uses the following fields:\n\n'cookie|CO=NAME:VAL:domain[:lifetime]' (set cocookie)  \n\nThe optional parameter \"lifetime\" is the lifetime of the cookie in minutes. \nCurrently, when you provide this field with any positive integer, it appears to\nbe ignored by rewrite.  The cookie's expiration date is always set to the\nserver's current time in GMT.\n\nHere is an example that *should* set the cookie lifetime to be one day. \n\nRewriteRule .* - [CO=MyCookie:1:mydomain.com:1440]\n\n\nThe root of the problem can be found on line 4159 of mod_rewrite.c, the\n\"lifetime\" in seconds of the cookie is added to the request time to get the\nexpiration date.  Currently, the \"lifetime\" in seconds is being added as a long.\nThe seconds should be transformed into apr_time before being added to the\nrequest time.\n\nr->request_time +\n(60 * atol(expires))\n\nShould be changed to \n\nr->request_time +\napr_time_from_sec((60 * atol(expires)))", "id": 21910, "time": "2002-08-28T17:14:46Z", "creator": "apachebugs@robcromwell.com", "creation_time": "2002-08-28T17:14:46Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 12132, "is_private": false, "id": 21921, "time": "2002-08-28T20:28:37Z", "creator": "ianh@apache.org", "creation_time": "2002-08-28T20:28:37Z", "tags": [], "text": "I'll do this soon\nalso need to fix the same spot to set it so it will be in err_headers out"}, {"count": 2, "tags": [], "bug_id": 12132, "text": "Fixed in current CVS.\nalso.. the Cookie is now being sent out in err_headers_out so it should show up\nin stuff like 302's and 404's", "id": 22003, "time": "2002-08-29T22:53:56Z", "creator": "ianh@apache.org", "creation_time": "2002-08-29T22:53:56Z", "is_private": false, "attachment_id": null}]