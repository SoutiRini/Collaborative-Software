[{"count": 0, "tags": [], "creator": "elkner@linofee.org", "text": "In the following example, the condition property \"throw.no.message\" should\nnot be set and thus give a fail message, however, it evaluates to true :((\n\n\n<!DOCTYPE project >\n<project name=\"condition.bug\" default=\"dist\" basedir=\".\">\n                     <!-- USER PROPERTIES -->\n<property name=\"enable.signatures\" value=\"false\"/>\n<property name=\"enable.jnlp\" value=\"true\"/>\n\n                     <!-- TARGETS -->\n<target name=\"init\">\n\t<condition property=\"do.signatures\">\n\t\t<istrue value=\"${enable.signatures}\"/>\n\t</condition>\n\t<condition property=\"do.jnlp\">\n\t\t<istrue value=\"${enable.jnlp}\"/>\n\t</condition>\n</target>\n\n<target name=\"signatures.needed\" depends=\"init\">\n\t<condition property=\"throw.no.message\">\n\t\t<or>\t\t\t\n\t\t\t<not>\n\t\t\t\t<isset property=\"do.jnlp\"/>\n\t\t\t</not>\n\t\t\t<and>\n\t\t\t\t<isset property=\"do.jnlp\"/>\n\t\t\t\t<isfalse   value=\"do.jnlp\"/>\n\t\t\t</and>\n\t\t\t<and>\n\t\t\t\t<isset property=\"do.jnlp\"/>\n\t\t\t\t<istrue   value=\"do.jnlp\"/>\n\t\t\t\t<isset property=\"do.signatures\"/>\n\t\t\t\t<istrue   value=\"do.signatures\"/>\n\t\t\t</and>\n\t\t</or>\n\t</condition>\n</target>\n\n<target name=\"no.signatures\" depends=\"signatures.needed\" unless=\"throw.no.message\">\n\t<fail message=\"jar signatures are not enabled. JNLP would not work!!! \n\tSet the property 'enable.signatures' to 'true' before deploying JNLP\n\tfiles.\"/>\n</target>\n\n<target name=\"cp.jnlp\" depends=\"init,no.signatures\" if=\"do.jnlp\">\n\t<echo message=\"would copy jnlp stuff\"/>\n</target>\n\n<target name=\"sign.jars\" depends=\"init\" if=\"do.signatures\">\n\t<echo message=\"would sign jars\"/>\n</target>\n\n<target name=\"dist\" depends=\"init,sign.jars,cp.jnlp\"/>\n\n</project>", "id": 42342, "time": "2003-08-07T16:28:57Z", "bug_id": 22223, "creation_time": "2003-08-07T16:28:57Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "peter.reilly@corvil.com", "text": "For the istrue and isfalse conditions, the value portion\nis not a property but a string (as is done in the \"init\" target).\nOne needs to do:\n<target name=\"signatures.needed\" depends=\"init\">\n\t<condition property=\"throw.no.message\">\n\t\t<or>\t\t\t\n\t\t\t<not>\n\t\t\t\t<isset property=\"do.jnlp\"/>\n\t\t\t</not>\n\t\t\t<and>\n\t\t\t\t<isset property=\"do.jnlp\"/>\n\t\t\t\t<isfalse   value=\"${do.jnlp}\"/>\n\t\t\t</and>\n\t\t\t<and>\n\t\t\t\t<isset property=\"do.jnlp\"/>\n\t\t\t\t<istrue   value=\"${do.jnlp}\"/>\n\t\t\t\t<isset property=\"do.signatures\"/>\n\t\t\t\t<istrue   value=\"${do.signatures}\"/>\n\t\t\t</and>\n\t\t</or>\n\t</condition>\n</target>\n\n", "id": 42348, "time": "2003-08-07T17:01:05Z", "bug_id": 22223, "creation_time": "2003-08-07T17:01:05Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 22223, "attachment_id": null, "text": "Ant you can also omit the isset tests whenever you are probing for true, as only\n\"true\" and \"yes\" should resolve to true:\n\n<and>\n    <istrue   value=\"${do.jnlp}\"/>\n    <istrue   value=\"${do.signatures}\"/>\n</and>", "id": 42353, "time": "2003-08-07T19:22:01Z", "creator": "stevel@apache.org", "creation_time": "2003-08-07T19:22:01Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 22223, "attachment_id": null, "text": "Forgot \"on\" ;-) --DD", "id": 42354, "time": "2003-08-07T19:32:57Z", "creator": "ddevienne@lgc.com", "creation_time": "2003-08-07T19:32:57Z", "is_private": false}, {"count": 4, "tags": [], "creator": "elkner@linofee.org", "text": "Ooops. I should take a little bit more breaks ;-)\n\nThanks a lot for your hints,\njens.", "id": 42392, "time": "2003-08-08T11:25:27Z", "bug_id": 22223, "creation_time": "2003-08-08T11:25:27Z", "is_private": false, "attachment_id": null}]