[{"count": 0, "tags": [], "bug_id": 38216, "attachment_id": null, "text": "Currently one can only query Beans or set/get Attributes of them. It would be\ngood if a certain operation of a MBean could be called by the Jmxproxy Servlet.", "id": 84442, "time": "2006-01-10T18:01:22Z", "creator": "hlubek@networkteam.com", "creation_time": "2006-01-10T18:01:22Z", "is_private": false}, {"count": 1, "tags": [], "creator": "yoavs@computer.org", "text": "Got a specific patch in mind, or just a general \"this would be good\" feeling? ;)", "id": 97232, "time": "2006-12-24T17:52:21Z", "bug_id": 38216, "creation_time": "2006-12-24T17:52:21Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 38216, "attachment_id": null, "id": 97526, "time": "2007-01-02T04:25:39Z", "creator": "hlubek@networkteam.com", "creation_time": "2007-01-02T04:25:39Z", "is_private": false, "text": "It was definitely more than a feeling :)\n\nI'll attach a patch showing my modifications.\n"}, {"text": "Created attachment 19340\nThe patch introduces an invoke operation to the proxy\n\nThe operation is specified by the \"op\" parameter and the parameters of the JMX\noperation are specified (as a comma seperated list) by the \"ps\" parameter.", "tags": [], "bug_id": 38216, "attachment_id": 19340, "count": 3, "id": 97529, "time": "2007-01-02T06:59:48Z", "creator": "hlubek@networkteam.com", "creation_time": "2007-01-02T06:59:48Z", "is_private": false}, {"count": 4, "tags": [], "text": "This Tomcat 5 enhancement request has been moved to Tomcat 7 (the latest version) since Tomcat 5 development is limited and focussed on bugs and security issues whereas Tomcat 7 is still seeing new feature development.", "is_private": false, "bug_id": 38216, "id": 152332, "time": "2011-12-20T20:32:18Z", "creator": "markt@apache.org", "creation_time": "2011-12-20T20:32:18Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "After rather too long a variation of this patch has been applied to trunk and 7.0.x and will be included in 7.0.24 onwards.\n\nThe main changes I made to the proposed patch were:\n- fixing a potential NPE when a method required zero parameters\n- improving the output when an array was returned (as is often the case with Tomcat MBeans)", "is_private": false, "id": 152811, "creator": "markt@apache.org", "time": "2012-01-15T21:42:53Z", "bug_id": 38216, "creation_time": "2012-01-15T21:42:53Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 38216, "text": "Very useful feature and i'm just putting it onto our tomcat 6 boxes. However it doesn't account for the invocation of the mbean returning null when outputting the result. I propose that the invokeOperation becomes\n\n    public void invokeOperation(PrintWriter writer, String onameStr, String op, String[] valuesStr){\n        try {\n            ObjectName oname=new ObjectName( onameStr );\n            MBeanOperationInfo methodInfo = registry.getMethodInfo(oname,op);\n            MBeanParameterInfo[] signature = methodInfo.getSignature();\n            String[] signatureTypes = new String[signature.length];\n            Object[] values = new Object[signature.length];\n            for (int i = 0; i < signature.length; i++) {\n               MBeanParameterInfo pi = signature[i];\n               signatureTypes[i] = pi.getType();\n               values[i] = registry.convertValue(pi.getType(), valuesStr[i] );\n           }\n\n            Object retVal = mBeanServer.invoke(oname,op,values,signatureTypes);\n            if(retVal != null){\n                writer.println(\"OK - Operation \" + op + \" returned:\");\n                output(\"\", writer, retVal);\n            }else{\n                writer.println(\"OK - Operation \" + op + \" without return value\");\n            }\n        } catch( Exception ex ) {\n            writer.println(\"Error - \" + ex.toString());\n            ex.printStackTrace(writer);\n        }\n    }", "id": 152843, "time": "2012-01-17T14:49:57Z", "creator": "tomcat@croconnor.co.uk", "creation_time": "2012-01-17T14:49:57Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 38216, "attachment_id": 28173, "text": "Created attachment 28173\n2012-01-19_tc8_JMXProxyServlet.patch\n\nYours covers most common use case of method returning void/null.\nI think null values inside arrays should be handled as well.\nI am attaching patch that I am thinking about that covers null values in getAttribute() operation as well.", "id": 152911, "time": "2012-01-19T07:19:33Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2012-01-19T07:19:33Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 38216, "text": "Patch looks good to me. Applied to trunk and 7.0.x and will be included in 7.0.26 onwards.", "id": 153020, "time": "2012-01-22T18:34:10Z", "creator": "markt@apache.org", "creation_time": "2012-01-22T18:34:10Z", "is_private": false, "attachment_id": null}]