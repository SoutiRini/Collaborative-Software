[{"count": 0, "tags": [], "creator": "neale@metawerx.net", "text": "Created attachment 28487\npatch against the current 8.0.0-dev trunk adding toLowerCase on hash retrieval\n\nUnlike BASIC Authentication, DIGEST mode does not work if the hash is stored in uppercase.\n\nThis is not a problem if the hashes are generated by CATALINA/bin/digest.sh, but if they are prepared with other software which generate uppercase hex strings for hashes, it can be very confusing trying to figure out why digest authentication is not working.\n\nThe other hash comparisons use equalsIgnoreCase() to compare the hashes, but the digest version of RealmBase.authenticate() prepares the serverDigestValue by taking the Principal's hash (as is) and prepending it to the nonce and other digest fields, and then rehashing.\n\nAs a result, the final hash serverDigest is not the same as the clientDigest value that comes from the browser.\n\nTo test, change an MD5 DIGEST hash to upper case and attempt to authenticate.\n\nThe provided one-line patch against the current 8.0.0-dev trunk simply uses toLowerCase on the retrieved server-side hash.\n\nBest Regards,\nNeale Rudd", "id": 155163, "time": "2012-03-21T04:39:32Z", "bug_id": 52953, "creation_time": "2012-03-21T04:39:32Z", "is_private": false, "attachment_id": 28487}, {"count": 1, "tags": [], "bug_id": 52953, "text": "Thanks for the report and the patch.\n\nA slightly modified version has been applied to trunk and 7.0.x and will be included in 7.0.27 onwards.", "id": 155169, "time": "2012-03-21T10:03:57Z", "creator": "markt@apache.org", "creation_time": "2012-03-21T10:03:57Z", "is_private": false, "attachment_id": null}]