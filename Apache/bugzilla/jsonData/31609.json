[{"count": 0, "tags": [], "bug_id": 31609, "text": "Greetings,\n\nI'm having problem to build my java sources by execution the \"build.bat\" that \npoint to \"build.xml\".\n\n\nOutput\n======\nD:\\clients\\Portal>build.bat\nSearching for build.xml ...\nBuildfile: D:\\clients\\Portal\\build.xml\n\nprepareCommon:\n\nBUILD FAILED\n\nD:\\clients\\Portal\\build.xml:61: Class org.apache.tools.ant.taskdefs.Ant doesn't \nsupport the \"inheritall\" attribute\n\nTotal time: 0 seconds\n\n\nPlease help, thanks.\n\n\n\nbuild.bat\n=========\n@echo off\nrem build.bat -- Build Script for the \"Hello, World\" Application\nrem $Id: build.bat,v 1.4 2001/12/05 01:51:51 markh Exp $\n\nset TOMCAT_HOME=d:\\tomcat\nset JAVA_HOME=\"D:\\Program Files\\Java\\j2re\"\nset _CP=%CP%\n\nrem Identify the custom class path components we need\nset CP=%TOMCAT_HOME%\\lib\\ant.jar;%TOMCAT_HOME%\\lib\\servlet.jar\nset CP=%CP%;%TOMCAT_HOME%\\lib\\jaxp.jar;%TOMCAT_HOME%\\lib\\parser.jar\nset CP=%CP%;%JAVA_HOME%\\lib\\tools.jar\n\nrem Execute ANT to perform the requird build target\njava -classpath %CP%;%CLASSPATH% org.apache.tools.ant.Main -Dtomcat.home=%\nTOMCAT_HOME% %1 %2 %3 %4 %5 %6 %7 %8 %9\n\nset CP=%_CP%\nset _CP=\n\n\nbuild.xml\n=========\n<project name=\"VCH Portal\" default=\"local\" basedir=\".\">\n\n  <property name=\"app.name\"       value=\"vch\"/>\n  <property name=\"deploy.home\"    value=\"deploy\"/>\n  <property name=\"dist.home\"      value=\"war\"/>\n  <property name=\"dist.war\"       value=\"${app.name}.war\"/>\n  <property name=\"ipoh.src\"       value=\"../../clients/ipoh/src\"/>\n  <property name=\"bl.src\"         \nvalue=\"../../clients/ipoh/BusinessLicense/src\"/>\n  <property name=\"propdev.src\"    value=\"../../clients/ipoh/propertydev/src\"/>\n  <property name=\"ipohshared.src\" value=\"../../clients/ipoh/shared/src\"/>\n  <property name=\"faxserver.src\"  value=\"../../clients/ipoh/FaxServer/src\"/>\n  <property name=\"buildingplans.src\" \nvalue=\"../../clients/ipoh/buildingPlans/src\"/>\n  <property name=\"complaints.src\" value=\"../../clients/ipoh/Complaints/src\"/>\n  <property name=\"appadmin.src\"   value=\"../../clients/ipoh/AppAdmin/src\"/>\n  <property name=\"rentalinfoline.src\"   \nvalue=\"../../clients/ipoh/RentalInfoLine/src\"/>\n  <property name=\"propertyinfoline.src\" \nvalue=\"../../clients/ipoh/PropertyInfoLine/src\"/>\n  <property name=\"propsearch.src\" value=\"../../clients/ipoh/Property \nSearch/src\"/>\n  <property name=\"payinq.src\"     \nvalue=\"../../clients/ipoh/PaymentInquiry/src\"/>\n  <property name=\"facbook.src\"    \nvalue=\"../../clients/ipoh/FacilityBooking/src\"/>\n  <property name=\"build.compiler\" value=\"jikes\"/>\n  <property name=\"build.compiler.emacs\" value=\"yes\"/>\n  <property name=\"classpath\"      value=\"${deploy.home}/WEB-INF/classes\"/>\n  <property file=\"build.properties\"/>\n  <property file=\"version.properties\"/>\n\n  <path id=\"path1\">\n    <pathelement path=\"${classpath}\"/>\n    <fileset dir=\"${deploy.home}/WEB-INF/lib\">\n      <include name=\"**/*.jar\"/>\n    </fileset>\n    <fileset dir=\"../../common/lib/java\">\n      <include name=\"**/*.jar\"/>\n    </fileset>\n  </path>\n\n  <target name=\"prepare\">\n    <antcall target=\"prepareCommon\"/>\n    <mkdir dir=\"${deploy.home}/web\"/>\n    <copy todir=\"${deploy.home}/web\">\n      <fileset dir=\"web\"\n        excludes=\"**/_*/**,dependency*/**,forms/*,**ordering**\"/>\n    </copy>\n    <mkdir dir=\"${deploy.home}/WEB-INF/data\"/>\n    <mkdir dir=\"${deploy.home}/WEB-INF/data/temp\"/>\n    <copy todir=\"${deploy.home}/WEB-INF/data\">\n      <fileset dir=\"data\"\n        \nexcludes=\"receipts/*,xml/*.xml,html/*,**/temp/**,englishpda/**,malaypda/**,**ord\nering**,**mysql**\"/>\n    </copy>\n  </target>\n\n  <target name=\"prepareCommon\">\n    <ant antfile=\"build.xml\" dir=\"../../common/java\" inheritall=\"false\"/>\n    <mkdir dir=\"${deploy.home}\"/>\n    <mkdir dir=\"${deploy.home}/WEB-INF\"/>\n    <mkdir dir=\"${deploy.home}/WEB-INF/classes\"/>\n    <mkdir dir=\"${deploy.home}/WEB-INF/lib\"/>\n    <copy todir=\"${deploy.home}/WEB-INF/lib/\">\n      <fileset dir=\"../../common/lib/java\" includes=\"Phoenix.jar\"/>\n    </copy>\n  </target>\n\n  <target name=\"clean\">\n    <ant antfile=\"build.xml\" dir=\"../../common/java\" target=\"clean\" \ninheritall=\"false\"/>\n    <delete dir=\"${deploy.home}/WEB-INF/classes\"/>\n    <delete dir=\"${deploy.home}/WEB-INF/lib\"/>\n  </target>\n\n  <patternset id=\"properties\">\n    <include name=\"**/*.properties\"/>\n    <include name=\"**/*.dtd\"/>\n  </patternset>\n\n  <path id=\"compileDirs\">\n    <pathelement path=\"${ipohshared.src}\"/>\n    <pathelement path=\"${faxserver.src}\"/>\n    <pathelement path=\"src\"/>\n    <pathelement path=\"${ipoh.src}\"/>\n    <pathelement path=\"${bl.src}\"/>\n    <pathelement path=\"${propdev.src}\"/>\n    <pathelement path=\"${buildingplans.src}\"/>\n    <pathelement path=\"${complaints.src}\"/>\n    <pathelement path=\"${appadmin.src}\"/>\n    <pathelement path=\"${propsearch.src}\"/>\n    <pathelement path=\"${propertyinfoline.src}\"/>\n    <pathelement path=\"${rentalinfoline.src}\"/>\n    <pathelement path=\"${payinq.src}\"/>\n    <pathelement path=\"${facbook.src}\"/>\n  </path>\n\n  <target name=\"compile\" depends=\"version\">\n    <echo message=\"java version = ${java.version}\"/>\n    <javac destdir=\"${deploy.home}/WEB-INF/classes\"\n           debug=\"on\" optimize=\"off\" deprecation=\"off\" nowarn=\"on\"\n           \nexcludes=\"**/ivr/**,**/junit/**,**/importdata/**,**/updateamount/**,com/vcomm/ip\noh/bl/**,com/vcomm/ipoh/ImportFromHP/**\">\n      <src refid=\"compileDirs\"/>\n      <classpath refid=\"path1\"/>\n    </javac>\n    <copy todir=\"${deploy.home}/WEB-INF/classes\">\n      <fileset dir=\"src\"><patternset refid=\"properties\"/></fileset>\n      <fileset dir=\"${bl.src}\"><patternset refid=\"properties\"/></fileset>\n      <fileset dir=\"${propdev.src}\"><patternset refid=\"properties\"/></fileset>\n      <fileset dir=\"${buildingplans.src}\"><patternset \nrefid=\"properties\"/></fileset>\n      <fileset dir=\"${complaints.src}\"><patternset \nrefid=\"properties\"/></fileset>\n      <fileset dir=\"${propsearch.src}\"><patternset \nrefid=\"properties\"/></fileset>\n      <fileset dir=\"${propertyinfoline.src}\"><patternset \nrefid=\"properties\"/></fileset>\n      <fileset dir=\"${rentalinfoline.src}\"><patternset \nrefid=\"properties\"/></fileset>\n      <fileset dir=\"${payinq.src}\"><patternset refid=\"properties\"/></fileset>\n      <fileset dir=\"${facbook.src}\"><patternset refid=\"properties\"/></fileset>\n    </copy>\n  </target>\n\n  <target name=\"portal.jar\">\n    <jar index=\"yes\" jarfile=\"${deploy.home}/WEB-INF/lib/Portal.jar\"\n         basedir=\"${deploy.home}/WEB-INF/classes\"/>\n  </target>\n\n  <target name=\"test\" depends=\"local\">\n    <junit printsummary=\"yes\">\n      <formatter type=\"plain\"/>\n      <classpath refid=\"path1\"/>\n      <test name=\"com.vcity.clients.ipoh.facbook.test.Test\" />\n    </junit>\n  </target>\n\n  <target name=\"javadoc\" depends=\"prepare\">\n    <mkdir dir=\"javadoc\"/>\n    <javadoc sourcepathref=\"compileDirs\"\n             destdir=\"javadoc\"\n             packagenames=\"com.vcity.*,com.phoenixcsi.*\"\n             excludepackagenames=\"*.ivr\">\n      <classpath refid=\"path1\"/>\n    </javadoc>\n  </target>\n\n  <target name=\"vcityweb\" depends=\"prepare,compile\">\n    <copy todir=\"${deploy.home}/WEB-INF/data\" overwrite=\"yes\">\n      <fileset dir=\"etc/vcity\"/>\n    </copy>\n    <copy todir=\"${deploy.home}/WEB-INF/data\" overwrite=\"yes\">\n      <fileset dir=\"etc/vcity/web\"/>\n    </copy>\n    <antcall target=\"buildwar\">\n      <param name=\"dir\" value=\"vcityweb\"/>\n    </antcall>\n  </target>\n\n  <target name=\"vcitykiosk\" depends=\"prepare,compile\">\n    <copy todir=\"${deploy.home}/WEB-INF/data\" overwrite=\"yes\">\n      <fileset dir=\"etc/vcity\"/>\n      <fileset dir=\"etc/vcity/kiosk\"/>\n    </copy>\n    <antcall target=\"buildwar\">\n      <param name=\"dir\" value=\"vcitykiosk\"/>\n    </antcall>\n  </target>\n\n  <target name=\"version\">\n    <propertyfile\n        file=\"src/com/phoenixcsi/portal/Resources.properties\">\n      <entry  key=\"version\" value=\"${portal.version}\"/>\n      <entry  key=\"build\" type=\"date\" value=\"now\" pattern=\"yyyy-MM-dd \nHH:mm:ss\"/>\n    </propertyfile>\n    <echo message=\"portal version = ${portal.version}\"/>\n  </target>\n\n  <target name=\"ipohweb\" depends=\"clean,prepare,compile,version\">\n    <copy todir=\"${deploy.home}/WEB-INF/data\" overwrite=\"yes\">\n      <fileset dir=\"etc/ipoh/web\"/>\n    </copy>\n    <delete>\n      <!-- remove the test logic -->\n      <fileset dir=\"${deploy.home}/WEB-INF/classes\" includes=\"**/test/**\"/>\n    </delete>\n    <antcall target=\"portal.jar\"/>\n    <antcall target=\"buildwar\">\n      <param name=\"dir\" value=\"ipohweb\"/>\n    </antcall>\n  </target>\n\n  <target name=\"ipohrelease\" depends=\"ipohweb\">\n    <ftp server=\"ftp.vcitysoftware.com\"\n         userid=\"ftpguest\"\n         password=\"guest123\"\n         remotedir=\"Release\"\n         passive=\"yes\">\n      <fileset dir=\"war/ipohweb\"/>\n    </ftp>\n  </target>\n\n  <target name=\"buildwar\">\n    <mkdir dir=\"${dist.home}\"/>\n    <mkdir dir=\"${dist.home}/${dir}\"/>\n    <copy file=\"etc/web.xml\" tofile=\"${deploy.home}/WEB-INF/web.xml\"/>\n    <jar jarfile=\"${dist.home}/${dir}/${dist.war}\"\n         basedir=\"${deploy.home}\"\n         excludes=\"WEB-INF/classes/**\"/>\n  </target>\n\n  <target name=\"local\" depends=\"prepareCommon,compile\">\n    <antcall target=\"portal.jar\"/>\n    <copy todir=\"${tomcat.home}/webapps/vch/WEB-INF/lib/\">\n      <fileset dir=\"${deploy.home}/WEB-INF/lib\" includes=\"Phoenix.jar,\n                                                          Portal.jar\"/>\n    </copy>\n  </target>\n</project>", "id": 64858, "time": "2004-10-09T04:34:51Z", "creator": "ascll@yahoo.com", "creation_time": "2004-10-09T04:34:51Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "ascll@yahoo.com", "text": "Created attachment 13001\nOutput from ant -diagnostics", "id": 64859, "time": "2004-10-09T04:36:42Z", "bug_id": 31609, "creation_time": "2004-10-09T04:36:42Z", "is_private": false, "attachment_id": 13001}, {"attachment_id": null, "tags": [], "creator": "stevel@apache.org", "is_private": false, "count": 2, "id": 64868, "time": "2004-10-09T17:09:48Z", "bug_id": 31609, "creation_time": "2004-10-09T17:09:48Z", "text": "Look at the classpath that batch file is setting up; its pointing to a version\nof Ant in the tomcat dir that is not what you are using for the ant -diagnostics\ncall; I can tell that because the xml parsers are different.\n\nRun ant from its own batch file against this build file, and not using build.bat. "}, {"attachment_id": null, "tags": [], "bug_id": 31609, "text": "First of all, thanks for your help :-)\n\nI have followed your instruction by run from its own batch file against the \nbuild file. However, I still having problem to build it.\n\nPlease help again.\n\nD:\\apache_ant\\bin>ant.bat d:\\clients\\Portal\\build.xml\nBuildfile: build.xml\n\nBUILD FAILED\nTarget `build.xml' does not exist in this project.\n\nTotal time: 2 seconds", "count": 3, "id": 64872, "time": "2004-10-10T07:38:04Z", "creator": "ascll@yahoo.com", "creation_time": "2004-10-10T07:38:04Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 31609, "text": "you dont need to give the path to the build file, ant defaults to build.xml in\nthe current dir, unless you say -f <somefile>\n\nEither put a -f in front of the path, or remove the path. Ant is currently\nmistaking the string for a target name and failing accordingly.", "count": 4, "id": 64879, "time": "2004-10-10T16:56:00Z", "creator": "stevel@apache.org", "creation_time": "2004-10-10T16:56:00Z", "is_private": false}, {"count": 5, "tags": [], "creator": "ascll@yahoo.com", "attachment_id": null, "id": 64905, "time": "2004-10-11T02:15:34Z", "bug_id": 31609, "creation_time": "2004-10-11T02:15:34Z", "is_private": false, "text": "Output\n======\nD:\\apache_ant\\bin>ant -f d:\\clients\\Portal\\build.xml\nBuildfile: d:\\clients\\Portal\\build.xml\n\nprepareCommon:\n\nprepare:\n    [mkdir] Created dir: D:\\common\\java\\classes\n\ncompile:\n    [javac] Compiling 50 source files to D:\\common\\java\\classes\n\nBUILD FAILED\nD:\\clients\\Portal\\build.xml:61: The following error occurred while executing \nthis line:\nD:\\common\\java\\build.xml:105: Error running jikes compiler\n\nTotal time: 4 seconds\n\n\n\nLooks like we are closer to the problem :-)\n\nI have checked D:\\common\\java\\classes but NO file in this folder.\n\nAttached D:\\common\\java\\build.xml and the text on line 105 is:\n      includes=\"com/**,*.java,http/utils/multipartrequest/**\">\n\nMeantime, I using java (J2SE) version \"1.4.2_05\" and tomcat ver 3.2.3\n\nThanks."}, {"count": 6, "tags": [], "text": "Created attachment 13016\nD:\\common\\java\\build.xml", "attachment_id": 13016, "id": 64906, "creator": "ascll@yahoo.com", "time": "2004-10-11T02:16:28Z", "bug_id": 31609, "creation_time": "2004-10-11T02:16:28Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 31609, "text": "Nelson,\n\nCan you take this up with the ant-user mail list. This is not a bug with ant but\nfirst\n(a) an attempt to use an older version of ant with a new version of ant (fixed)\nand \n(b) something not working with your compilation. \n\nThese are problems using ant, not bugs in the ant source tree. These are the\nproblems the ant user community are best at dealing with -as there are more\npeople there than the developers. \n\n", "id": 64915, "time": "2004-10-11T09:24:49Z", "creator": "stevel@apache.org", "creation_time": "2004-10-11T09:24:49Z", "is_private": false, "attachment_id": null}]