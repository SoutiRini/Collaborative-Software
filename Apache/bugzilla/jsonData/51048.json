[{"count": 0, "tags": [], "bug_id": 51048, "attachment_id": null, "text": "The AppenderSkeleton class defines the 'public synchronized void doAppend(LoggingEvent event)' method. Making this method non synchronized directly in AppenderSkeleton isn't safe as there are might be plenty of (custom 3rd party) subclasses that might take advantage of this synchronization. \n\nHowever, some widely used _concrete_ appenders that are defined inside the log4j library could be optimized. The AsyncAppender class seems to be the most often used appender in enterprise class systems. Making the doAppend() method non synchronized in this case makes a lot of sense as checking if level is lower than threshold is done in doAppend(). This change would improve log4j behavior in multi-threaded environments.\n\nAsyncAppender is anyway internally synchronized - it synchronizes on the buffer field.\n\nAttaching a subclass of AsyncAppender that removes the unnecessary 'synchronized' keyword.", "id": 145699, "time": "2011-04-11T07:38:00Z", "creator": "kowalewski.bartosz@gmail.com", "creation_time": "2011-04-11T07:38:00Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 51048, "text": "Created attachment 26872\nA subclass of AsyncAppender that removes the unneeded synchronization", "id": 145700, "time": "2011-04-11T07:39:23Z", "creator": "kowalewski.bartosz@gmail.com", "creation_time": "2011-04-11T07:39:23Z", "is_private": false, "attachment_id": 26872}]