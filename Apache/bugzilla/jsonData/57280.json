[{"count": 0, "tags": [], "bug_id": 57280, "attachment_id": null, "is_private": false, "id": 179351, "time": "2014-11-28T19:48:54Z", "creator": "bruno.hedman@gmail.com", "creation_time": "2014-11-28T19:48:54Z", "text": "My files were being rolled as per my TimeBasedRollingPolicy but when I tried to open them, I received errors that they were invalid zip files.\n\nTurns out that they were not zipped at all. The files had been renamed as *.zip as per the FileNamePattern, but compression was not occurring.\n\nIn the log4j source code TimeBasedRollingPolicy.java, we see:\n\n...\n\nif (lastFileName.endsWith(\".gz\")) {\n  suffixLength = 3;\n} else if (lastFileName.endsWith(\".zip\")) {\n  suffixLength = 4;\n}\n...\n\nif (suffixLength == 4) {\n    compressAction =\n    new ZipCompressAction(\n      new File(lastBaseName), new File(lastFileName), true);\n}\n...\n\nMy log4j.properties file had trailing spaces after the .zip in my FileNamePattern, so the length was neither 3 or 4.\n\nMy suggestions would be:\n\n- use trim() on the file name\n- don't rename to e.g. *.zip unless compression actually occurs"}]