[{"count": 0, "tags": [], "bug_id": 1806, "attachment_id": null, "id": 2524, "time": "2001-05-17T23:30:24Z", "creator": "adb@teamware.com", "creation_time": "2001-05-17T23:30:24Z", "is_private": false, "text": "Overview\nTomcat 3.2.2b5\nIf an html page is set as a protected resource in web.xml tomcat will redirect \nto the configured form login jsp.  Whatever it typed in the form is irrelevant \nas tomcat never calls the realm's authenticate() method when the login button is \nclicked.  The html page is then displayed\n\nSetup\nWeb.xml contains\n  <welcome-file-list>\n    <welcome-file>HelloWorld.html</welcome-file>\n  </welcome-file-list>\n\n<!-- Security constraints -->\n    <security-constraint>\n      <web-resource-collection>\n         <web-resource-name>Protected Area</web-resource-name>\n         <url-pattern>/HelloWorld.html</url-pattern>\n         <http-method>GET</http-method>\n      </web-resource-collection>\n      <auth-constraint>\n         <role-name>User</role-name>\n      </auth-constraint>\n    </security-constraint>\n\n    <login-config>\n      <auth-method>FORM</auth-method>\n      <realm-name>JAAS Example 1 realm</realm-name>-->\n      <form-login-config>\n        <form-login-page>/jsp/security/login/login.jsp</form-login-page>\n        <form-error-page>/jsp/security/login/error.jsp</form-error-page>\n      </form-login-config>\n    </login-config>\n\nResults\n2001-05-18 09:23:46 - ContextManager: AccessInterceptor: checking \n/HelloWorld.html\n2001-05-18 09:23:46 - ContextManager: AccessInterceptor: matched \n/HelloWorld.html GET null User\n2001-05-18 09:23:46 - ContextManager: JAASRealm: Authorize:\n2001-05-18 09:23:46 - ContextManager: JAASRealm: Authenticate\n2001-05-18 09:23:46 - ContextManager: JAASRealm: Existing principal is null\n2001-05-18 09:23:46 - ContextManager: JAASRealm: No authentication information \nsupplied\n2001-05-18 09:23:46 - ContextManager: AccessInterceptor: checking \n/jsp/security/login/login.jsp\n\nis shown in log.  When I press 'login' button the following is logged\n\n2001-05-18 09:23:49 - ContextManager: AccessInterceptor: checking \n/jsp/security/login/j_security_check\n\nbut the page is displayed regardless of authentication details.  If I rename \nHelloWorld to .jsp it calls my realm after the j_security_check log."}, {"count": 1, "tags": [], "bug_id": 1806, "attachment_id": null, "text": "I tried to duplicate this in Tomcat 3.2.3 using a debugger and verified that\nSimpleRealm's authenticate() gets called.  The test worked as expected.\nAssuming this was fixed.\n\nI also tested Tomcat 3.3 and verified that the AccessInterceptor's \nauthorize() is called where the \"role\" check occurs.  The test also worked\nas expected in 3.3.", "id": 5394, "time": "2001-09-11T20:26:31Z", "creator": "Larry.Isaacs@sas.com", "creation_time": "2001-09-11T20:26:31Z", "is_private": false}]