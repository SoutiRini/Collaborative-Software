[{"count": 0, "text": "The RewriteRule directive ignores the default value that can be specified when\nusing a RewriteMap (at least for DBM RewriteMaps). It returns an empty string\ninstead if the key is not found:\n\nRewriteMap domaindb dbm=db:/var/db-data/domains.db\nRewriteRule ^/([^/]+)/(.*)     /${domaindb:$1|not-found.html}/$2\n\nShould return '/not-found.html/$2' if $1 does not exist in domains.db, but it\nreturns //\n\nThis is what the RewriteLog says:\n\n(3) applying pattern '^/([^/]+)/(.*)' to uri '/blafasel.de/'\n(5) map lookup OK: map=domaindb[dbm] key=blafasel.de -> val=\n(2) rewrite /blafasel.de/ -> //", "creator": "apache@snakefarm.org", "attachment_id": null, "id": 23748, "time": "2002-10-02T14:02:35Z", "bug_id": 13204, "creation_time": "2002-10-02T14:02:35Z", "tags": [], "is_private": false}, {"count": 1, "text": "Please try this change to mod_rewrite at around line 2968.\n\nIndex: modules/mappers/mod_rewrite.c\n===================================================================\nRCS file: /home/cvs/httpd-2.0/modules/mappers/mod_rewrite.c,v\nretrieving revision 1.134\ndiff -u -r1.134 mod_rewrite.c\n--- modules/mappers/mod_rewrite.c       30 Aug 2002 04:47:57 -0000      1.134\n+++ modules/mappers/mod_rewrite.c       4 Oct 2002 16:37:02 -0000\n@@ -2968,7 +2968,7 @@\n     if ((rv = apr_dbm_open_ex(&dbmfp, dbmtype, file, APR_DBM_READONLY,\n                               0 /* irrelevant when reading */, r->pool)) == \nAPR_SUCCESS) {\n         rv = apr_dbm_fetch(dbmfp, dbmkey, &dbmval);\n-        if (rv == APR_SUCCESS) {\n+        if (rv == APR_SUCCESS && dbmval.dptr != NULL) {\n             memcpy(buf, dbmval.dptr,\n                    dbmval.dsize < sizeof(buf)-1 ?\n                    dbmval.dsize : sizeof(buf)-1  );\n\nThanks!", "creator": "trawick@apache.org", "attachment_id": null, "id": 23939, "time": "2002-10-04T16:39:30Z", "bug_id": 13204, "creation_time": "2002-10-04T16:39:30Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "text": "A fix has been committed.  This will be in the next release (2.0.44).\n\nThanks for your report, and thanks for using Apache!", "id": 23940, "time": "2002-10-04T16:59:46Z", "bug_id": 13204, "creation_time": "2002-10-04T16:59:46Z", "is_private": false}]