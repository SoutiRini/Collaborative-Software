[{"count": 0, "tags": [], "bug_id": 25625, "is_private": false, "text": "In Tomcat 5, if you restrict a directory in web.xml, so no user can access\nwithout login:\n\n<security-constraint>\n <web-resource-collection>\n  <web-resource-name>common</web-resource-name>\n  <url-pattern>/common/*</url-pattern>\n  <http-method>POST</http-method>\n  <http-method>GET</http-method>\n </web-resource-collection>\n <auth-constraint>\n  <role-name>general</role-name>\n </auth-constraint>\n <user-data-constraint>\n  <transport-guarantee>NONE</transport-guarantee>\n </user-data-constraint>\n</security-constraint>\n\nand you define your welcome file in that directory\n\n<welcome-file-list>\n\t<welcome-file>/common/examplePage.jsp</welcome-file>\n</welcome-file-list>\nwhen you access to your application (Ex: localhost:8080/myApp) it access\ndirectly to examplePage (forgetting the access restriction) BUT if you access\nthe file directly, the access restriction works\n(localhost:8080/myApp/common/examplePage.jsp redirects to your login page)", "id": 49354, "time": "2003-12-18T14:31:52Z", "creator": "cam-cama@princetonsa.com", "creation_time": "2003-12-18T14:31:52Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Security constraints are defined on the incoming URL. The incoming URL is not\n/common/* so the contraint doesn't apply.\n\nSide note: it is not recommended to use paths with / in it as welcome files. \nBAD: <welcome-file>/common/examplePage.jsp</welcome-file>\nGOOD: <welcome-file>examplePage.jsp</welcome-file>\n", "is_private": false, "bug_id": 25625, "id": 49355, "time": "2003-12-18T14:38:54Z", "creator": "funkman@joedog.org", "creation_time": "2003-12-18T14:38:54Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 25625, "attachment_id": null, "text": "O.K, I thought it was a bug, because in tomcat 4 it works flawlessly", "id": 49357, "time": "2003-12-18T14:58:17Z", "creator": "cam-cama@princetonsa.com", "creation_time": "2003-12-18T14:58:17Z", "is_private": false}, {"count": 3, "tags": [], "creator": "funkman@joedog.org", "text": "Tomcat 4 issues an external redirect of welcome files so after the redirect is\nperformed, the security constraint may be applied.\n\nTomcat5 does an internal forwards. (Which is also legal according to the spec)\n", "id": 49358, "time": "2003-12-18T15:07:29Z", "bug_id": 25625, "creation_time": "2003-12-18T15:07:29Z", "is_private": false, "attachment_id": null}]