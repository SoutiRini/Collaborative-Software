[{"count": 0, "attachment_id": null, "creator": "ronald-lists@klop.ws", "text": "If classes change StoreBase throws an InvalidClassException. I think the best\nway to solve this is to log the error and than remove the session from the\nStore, because the session is invalid anyway.\nI will attach a patch.", "id": 35192, "time": "2003-04-15T15:18:55Z", "bug_id": 19034, "creation_time": "2003-04-15T15:18:55Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "ronald-lists@klop.ws", "is_private": false, "text": "Created attachment 5837\nCatch exception and remove sessions from Store.", "id": 35193, "time": "2003-04-15T15:19:34Z", "bug_id": 19034, "creation_time": "2003-04-15T15:19:34Z", "attachment_id": 5837}, {"count": 2, "tags": [], "bug_id": 19034, "attachment_id": null, "text": "Sorry, used tabs in stead of spaces. Can the committer change this?", "id": 35196, "time": "2003-04-15T15:22:22Z", "creator": "ronald-lists@klop.ws", "creation_time": "2003-04-15T15:22:22Z", "is_private": false}, {"count": 3, "tags": [], "creator": "remm@apache.org", "is_private": false, "text": "Do you mean: if class changes to a different incompatible serialization format ?", "id": 35210, "time": "2003-04-15T15:49:35Z", "bug_id": 19034, "creation_time": "2003-04-15T15:49:35Z", "attachment_id": null}, {"count": 4, "attachment_id": null, "creator": "ronald-lists@klop.ws", "is_private": false, "id": 35308, "time": "2003-04-16T09:17:46Z", "bug_id": 19034, "creation_time": "2003-04-16T09:17:46Z", "tags": [], "text": "Yes, I mean changes in the serialization format.\nThe ClassNotFoundException can/should probably be handled the same way.\n\n2003-04-15 13:02:44 JDBCStore[]: java.io.InvalidClassException:\nnl.base.progs.User; local class incompatible: stream classdesc serialVersionUID\n= -11535525597440569, local class serialVersionUID = -635923919362335785\n\nBecause the sessions are not removed. I get a lot of exceptions with stacktraces\nevery time the sessions are loaded from the database."}, {"count": 5, "tags": [], "bug_id": 19034, "attachment_id": null, "text": "If there is an InvalidClassException in load(keys[i]) in\nStoreBase.processExpires the session will never expire, because the code which\nchecks for expiration is never reached.\nValid sessions will not expire also, because the loop is ended by the exception.\n", "id": 43893, "time": "2003-09-09T14:48:50Z", "creator": "ronald-lists@klop.ws", "creation_time": "2003-09-09T14:48:50Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 19034, "attachment_id": null, "is_private": false, "id": 43894, "time": "2003-09-09T15:16:05Z", "creator": "ronald-lists@klop.ws", "creation_time": "2003-09-09T15:16:05Z", "text": "Two more things.\n1. Sessions which get a ClassNotFoundException while loading from the Store can\nprobably be removed also.\n2. I don't know if the InvalidClassException should be catched on more places."}, {"count": 7, "tags": [], "bug_id": 19034, "attachment_id": null, "text": "*** Bug 22716 has been marked as a duplicate of this bug. ***", "id": 57908, "time": "2004-05-22T22:24:39Z", "creator": "markt@apache.org", "creation_time": "2004-05-22T22:24:39Z", "is_private": false}, {"count": 8, "attachment_id": null, "creator": "markt@apache.org", "is_private": false, "id": 57910, "time": "2004-05-22T23:25:36Z", "bug_id": 19034, "creation_time": "2004-05-22T23:25:36Z", "tags": [], "text": "I have committed a slightly modified patch - one that catches any exception - \nto TC4 and TC5.\n\nMany thanks."}]