[{"count": 0, "tags": [], "bug_id": 41100, "text": "HTTPSampler2.setPutHeaders() uses a InputStreamRequestEntity that doesn't\nautomatically closes the FileInputStream. Becauses it open a new file descriptor\neach time it quickly runs out of fds throwing a IOException:Too many open files.\nOne possible solution is to explore http-client-3.1 and its FileRequestEntity.\nOther (quicker) solutions is to use read all the file contents in  a byte array\nthen close the file and use ByteArrayRequestEntity. I'm providing a patch that\ndoes exactly that.", "id": 96497, "time": "2006-12-03T22:25:39Z", "creator": "ruben.laguna@gmail.com", "creation_time": "2006-12-03T22:25:39Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 41100, "attachment_id": 19214, "text": "Created attachment 19214\nbug fix. that don't leave open files", "id": 96498, "time": "2006-12-03T22:27:04Z", "creator": "ruben.laguna@gmail.com", "creation_time": "2006-12-03T22:27:04Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 41100, "text": "Thanks for the report.\n\nIn the end I used a modified version of FileRequestEntity (which is part of \nHttpclient).\n\nThe code is in SVN and the current nightly 2-2.20061206 - if you could check if \nthat works, that would be great.", "id": 96548, "time": "2006-12-05T16:54:27Z", "creator": "sebb@apache.org", "creation_time": "2006-12-05T16:54:27Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 41100, "attachment_id": null, "text": "(In reply to comment #2)\n \n> The code is in SVN and the current nightly 2-2.20061206 - if you could check if \n> that works, that would be great.\n\nYes, it works. No more open files left behind \n", "id": 96562, "time": "2006-12-06T06:38:20Z", "creator": "ruben.laguna@gmail.com", "creation_time": "2006-12-06T06:38:20Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 41100, "text": "fixed for me", "id": 96563, "time": "2006-12-06T06:39:03Z", "creator": "ruben.laguna@gmail.com", "creation_time": "2006-12-06T06:39:03Z", "is_private": false, "attachment_id": null}]