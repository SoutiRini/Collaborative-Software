[{"count": 0, "tags": [], "bug_id": 45792, "is_private": false, "text": "ERROR:\n[Fri Sep 12 09:57:41 2008] [notice] child pid 28524 exit signal Segmentation fault (11), possible coredump in /tmp/apache\n\nSCENARIO:\nWe have been testing our server after migrating from 1.3 to 2.2 with productionlog-based load tests in numerous different scenarios to segmentation faults in ap_mpm_pod_check (pod.c). The test involved using mixed static and dynamic content including php, webobjects applications and using mod_proxy for offloading php traffic to separate boxes. Much of the site's configuration is using mod_include for dynamic sniplets in static pages and making intensive use of mod_rewrite. \n\nSurprisingly those segmentation faults occur in all the scenarios below:\n- 10,000 requests sent in multiple threads over 2-3 minutes,\n- 10,000 requests sent in multiple threads with 100ms delay between spawning consecutive threads,\n- 10,000 requests sent in a single thread (serialized) over several minutes (5-6 requests per second by average).\nWe have tested with:\n- documentation defaults of mpm_worker as well as hardcoded defaults (httpd-mpm.conf commented out),\n- AcceptMutex set to pthread (recommended for Solaris) and to posixmem as well as with this setting commented out,\n- experimented with MaxRequestsPerChild (0, 10000 - default, other values) and other mpm_worker settings.\n\nWe were unable to reproduce the segmentation fault on a simple single-file test (using ab or jmeter).\n\nREMARKS:\nThis issue is very similar to bug 41030 reported for Linux but since we reproduced it on Solaris and with different flags, we decided to file a separate bugreport.\n\nSYSTEM:\n- SUNW,Sun-Fire-T200\n  - Solaris\n  - SunOS 5.10 Generic_127127-11 sun4v sparc SUNW,Sun-Fire-T200\n  - 8 GB RAM\n\nCOMPILE:\n./configure --with-mpm=worker --enable-cgi --enable-status --enable-proxy --enable-proxy-connect --enable-proxy-ftp --enable-proxy-http --enable-proxy-ajp --enable-proxy-balancer --enable-cache --enable-disk-cache --enable-mem-cache --enable-deflate --enable-nonportable-atomics=yes --enable-modules=most --enable-mods-shared=most --enable-maintainer-mode --prefix=/opt/apache-cluster \n\nCFLAGS='-DDEBUG -DDEBUGGING -DAP_DEBUG -DAPR_POOL_DEBUG'\nCC=cc\n\nCORE DUMP:\n\nUsing dbx:\n\ndbx /opt/apache-cluster/bin/httpd core.httpd.20800.u101 \ncore file header read successfully\nReading ld.so.1\nReading libm.so.2\nReading libaprutil-1.so.0.3.0\nReading libexpat.so.1.5.2\nReading libapr-1.so.0.3.0\nReading libuuid.so.1\nReading libsendfile.so.1\nReading librt.so.1\nReading libsocket.so.1\nReading libnsl.so.1\nReading libpthread.so.1\nReading libc.so.1\nReading libexpat.so.0.1.0\nReading libgcc_s.so.1\nReading libaio.so.1\nReading libmd.so.1\nReading libc_psr.so.1\nReading nss_files.so.1\nReading mod_authz_host.so\nReading mod_include.so\nReading mod_log_config.so\nReading mod_env.so\nReading mod_expires.so\nReading mod_headers.so\nReading mod_setenvif.so\nReading mod_mime.so\nReading mod_status.so\nReading mod_cgi.so\nReading mod_negotiation.so\nReading mod_dir.so\nReading mod_alias.so\nReading mod_WebObjects.so\nReading mod_rewrite.so\nReading mod_proxy.so\nReading mod_proxy_balancer.so\nReading mod_proxy_http.so\nReading mod_proxy_ajp.so\nt@1 (l@1) terminated by signal SEGV (Segmentation Fault)\n0xff0458e0: _read+0x000c:       bcc,pt   %icc,_read+0x20        ! 0xff0458f4\nCurrent function is ap_mpm_pod_check\n   54       rc = read(fd, &c, 1);\n\nStack trace of the thread with segfault:\n\n(dbx) where\ncurrent thread: t@1\n  [1] _read(0x4, 0xffbff933, 0x1, 0x2e1e80, 0x0, 0x1), at 0xff0458e0 \n  [2] read(0x6, 0xffbff933, 0x1, 0x0, 0xff073700, 0xff332a00), at 0xff037414 \n=>[3] ap_mpm_pod_check(pod = 0x33aaf8), line 54 in \"pod.c\"\n  [4] child_main(child_num_arg = 3), line 1258 in \"worker.c\"\n  [5] make_child(s = 0x77c00, slot = 3), line 1341 in \"worker.c\"\n  [6] ap_mpm_run(_pconf = 0xfe8b0058, plog = 0x4, s = (nil)), line 1543 in \"worker.c\"\n  [7] main(argc = 3, argv = 0xffbffc84), line 730 in \"main.c\"\n\nState of other threads:\n\n(dbx) threads -all\no>    t@1  a  l@1   ?()   signal SIGSEGV in  _read() \n      t@3  a  l@3   dummy_worker()   LWP suspended in  __pollsys() \n      t@4  a  l@4   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n      t@5  a  l@5   dummy_worker()   LWP suspended in  __pollsys() \n      t@6  a  l@6   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n      t@7  a  l@7   dummy_worker()   LWP suspended in  __pollsys() \n      t@8  a  l@8   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n      t@9  a  l@9   dummy_worker()   LWP suspended in  __pollsys() \n     t@10  a l@10   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n     t@11  a l@11   dummy_worker()   LWP suspended in  __pollsys() \n     t@12  a l@12   dummy_worker()   LWP suspended in  __pollsys() \n     t@13  a l@13   dummy_worker()   LWP suspended in  __pollsys() \n     t@14  a l@14   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n     t@15  a l@15   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n     t@16  a l@16   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n     t@17  a l@17   dummy_worker()   LWP suspended in  __pollsys() \n     t@18  a l@18   dummy_worker()   LWP suspended in  __pollsys() \n     t@19  a l@19   dummy_worker()   LWP suspended in  __pollsys() \n     t@20  a l@20   dummy_worker()   LWP suspended in  __pollsys() \n     t@21  a l@21   dummy_worker()   LWP suspended in  __pollsys() \n     t@22  a l@22   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n     t@23  a l@23   dummy_worker()   LWP suspended in  __pollsys() \n     t@24  a l@24   dummy_worker()   LWP suspended in  __pollsys() \n     t@25  a l@25   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n     t@26  a l@26   dummy_worker()   sleep on 0x2e1f18  in  __lwp_park() \n     t@27  a l@27   dummy_worker()   LWP suspended in  ?() \n     t@28  a l@28   dummy_worker()   sleep on 0xfef20000  in  ___lwp_mutex_timedlock() \n      t@2       dummy_worker()   zombie  in  in <can't get PC>() \n\nOther thread stack traces (examples):\n\n(dbx) where t@3\ncurrent thread: t@3\n=>[1] __pollsys(0x4, 0x1, 0xfe77b180, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfe77b1e8, 0x1, 0xfe77b180, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfe77b1e8, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = 0x4b, s = 0xfe77b1e8, for_read = 0), line 51 in \"waitio.c\"\n  [5] apr_socket_connect(sock = 0xffaa8, sa = 0x104b08), line 279 in \"sockets.c\"\n  [6] ap_proxy_connect_backend(proxy_function = 0xfeca61a0 \"HTTP\", conn = 0x104ab8, worker = 0x229878, s = 0x2aa788), line 2352 in \"proxy_util.c\"\n  [7] proxy_http_handler(r = 0x930870, worker = 0x229878, conf = 0x2c20c8, url = 0x7e6438 \"/php/feeds/ci2_0_news_headlines.php?&newssourcepath=nl/anp_news_ci20/national&newsarticleurl=/Nieuws/Binnenland/2077/20779270.html&contentitemid=0,1,2,3,4,5\", proxyname = (nil), proxyport = 0), line 1932 in \"mod_proxy_http.c\"\n  [8] proxy_run_scheme_handler(r = 0x930870, worker = 0x229878, conf = 0x2c20c8, url = 0x932118 \"http://10.40.222.22/php/feeds/ci2_0_news_headlines.php?&newssourcepath=nl/anp_news_ci20/national&newsarticleurl=/Nieuws/Binnenland/2077/20779270.html&contentitemid=0,1,2,3,4,5\", proxyhost = (nil), proxyport = 0), line 2345 in \"mod_proxy.c\"\n  [9] proxy_handler(r = 0x930870), line 969 in \"mod_proxy.c\"\n  [10] ap_run_handler(r = 0x930870), line 157 in \"config.c\"\n  [11] ap_invoke_handler(r = 0x930870), line 372 in \"config.c\"\n  [12] ap_run_sub_req(r = 0x930870), line 1876 in \"request.c\"\n  [13] handle_include(ctx = 0x7f2c00, f = 0x8a7108, bb = 0x7e97f0), line 1737 in \"mod_include.c\"\n  [14] includes_filter(f = 0x8a7108, b = 0x7f2be0), line 3432 in \"mod_include.c\"\n  [15] ap_pass_brigade(next = 0x8a7108, bb = 0x7f2be0), line 526 in \"util_filter.c\"\n  [16] default_handler(r = 0x7ee968), line 3740 in \"core.c\"\n  [17] ap_run_handler(r = 0x7ee968), line 157 in \"config.c\"\n  [18] ap_invoke_handler(r = 0x7ee968), line 372 in \"config.c\"\n  [19] ap_internal_redirect(new_uri = 0x7ee968 \"\", r = 0x7ee968), line 477 in \"http_request.c\"\n  [20] handler_redirect(r = 0x7eb400), line 4786 in \"mod_rewrite.c\"\n  [21] ap_run_handler(r = 0x7eb400), line 157 in \"config.c\"\n  [22] ap_invoke_handler(r = 0x7eb400), line 372 in \"config.c\"\n  [23] ap_process_request(r = 0x7eb400), line 258 in \"http_request.c\"\n  [24] ap_process_http_connection(c = 0x7e56a0), line 190 in \"http_core.c\"\n  [25] ap_run_process_connection(c = 0x7e56a0), line 43 in \"connection.c\"\n  [26] worker_thread(thd = 0x2e20f8, dummy = 0x3), line 544 in \"worker.c\"\n  [27] dummy_worker(opaque = 0x2e20f8), line 142 in \"thread.c\"\n\n(dbx) where t@4\ncurrent thread: t@4\n=>[1] __lwp_park(0x4, 0x0, 0x0, 0x1, 0xff342030, 0x1), at 0xff044aa0 \n  [2] cond_sleep_queue(0x2e1f18, 0x2e1ee8, 0x0, 0x0, 0x0, 0x0), at 0xff03e9cc \n  [3] cond_wait_queue(0x2e1f18, 0x2e1ee8, 0x0, 0x0, 0x0, 0x0), at 0xff03eae8 \n  [4] cond_wait(0x2e1f18, 0x2e1ee8, 0xfe67bf18, 0x0, 0x950ba0, 0x2e2090), at 0xff03f068 \n  [5] _pthread_cond_wait(0x2e1f18, 0x2e1ee8, 0x0, 0x1000, 0x0, 0x4), at 0xff03f0a4 \n  [6] ap_queue_pop(queue = 0x2e1ec8, sd = 0xfe67bf1c, p = 0xfe67bf18), line 339 in \"fdqueue.c\"\n  [7] worker_thread(thd = 0x2e2118, dummy = 0x3), line 861 in \"worker.c\"\n  [8] dummy_worker(opaque = 0x2e2118), line 142 in \"thread.c\"\n(dbx)", "id": 120560, "time": "2008-09-12T07:13:53Z", "creator": "jkaczm@gmail.com", "creation_time": "2008-09-12T07:13:53Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "Your stacktrace does not show the thread where the crash happened. Please provide a stacktrace of all threads.", "id": 120562, "time": "2008-09-12T08:51:31Z", "bug_id": 45792, "creation_time": "2008-09-12T08:51:31Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 45792, "text": "\n> Your stacktrace does not show the thread where the crash happened. \n\nI thought that was the thread t@1. Please look at: 'Stack trace of the thread with segfault' and the following 'where' call but please let me know if this is sufficient. I may be overlooking something.\n\n\n\n\n\n\n", "id": 120564, "time": "2008-09-12T09:03:36Z", "creator": "jkaczm@gmail.com", "creation_time": "2008-09-12T09:03:36Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "is_private": false, "id": 120569, "time": "2008-09-12T15:53:35Z", "bug_id": 45792, "creation_time": "2008-09-12T15:53:35Z", "text": "(In reply to comment #2)\n> > Your stacktrace does not show the thread where the crash happened. \n> \n> I thought that was the thread t@1. Please look at: 'Stack trace of the thread\n> with segfault' and the following 'where' call but please let me know if this is\n> sufficient. I may be overlooking something.\n> \n\nTrust me. It is not the one that crashed :-). The one that crashed has a call to kill and sig_coredump in its stacktrace. Go through all threads and find this one.\nMaybe you should try to get the stacktrace with gdb instead of dbx."}, {"count": 4, "tags": [], "creator": "jkaczm@gmail.com", "text": "We don't currently have sig_coredump occurances in any of the threads. Only thread t@2 is marked as zombie and doesn't show stack trace.\n\nWe don't currently have sig_coredump occurances in any of the threads. Only thread t@2 is marked as zombie and doesn't show stack trace.\n\nt@1 (l@1) terminated by signal SEGV (Segmentation Fault)\n0xff0458e0: _read+0x000c:       bcc,pt   %icc,_read+0x20        ! 0xff0458f4\nCurrent function is ap_mpm_pod_check\n   54       rc = read(fd, &c, 1);\ncurrent thread: t@1\n  [1] _read(0x4, 0xffbffa53, 0x1, 0x150168, 0x1dd910, 0x2f8514), at 0xff0458e0 \n  [2] read(0x6, 0xffbffa53, 0x1, 0x0, 0xff073700, 0xff332a00), at 0xff037414 \n=>[3] ap_mpm_pod_check(pod = 0x2ba418), line 54 in \"pod.c\"\n  [4] child_main(child_num_arg = 0), line 1258 in \"worker.c\"\n  [5] make_child(s = 0x28d3c0, slot = 0), line 1341 in \"worker.c\"\n  [6] startup_children(number_to_start = 3), line 1375 in \"worker.c\"\n  [7] ap_mpm_run(_pconf = 0xbe518, plog = 0xc7cb0, s = 0x28d3c0), line 1725 in \"worker.c\"\n  [8] main(argc = 3, argv = 0xffbffd64), line 730 in \"main.c\"\ncurrent thread: t@2\ndbx: read of registers from (0xff331c00) failed -- debugger service failed\ncurrent thread: t@3\n=>[1] __pollsys(0x4, 0x1, 0xfe77b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfe77b89c, 0x1, 0xfe77b818, 0x0, 0x0, 0x1388), at 0xff0388f4 \n  [3] _poll(0xfe77b89c, 0x1, 0x1388, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x6937b8, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x6937b8, buf = 0x5b4040 \"GET http://.../javascript/pc/master.js HTTP/1.1^M\\nAccept: */*^M\\nAccept-Encoding: gzip^M\\nUser-Agent: short-user-agent-name^M\\nHost: ...^M\\n^M\\nnt: short-user-agent-name^M\\nHost: ...^M\\n^M\\n^M\\nContent-Type: image/jpeg^M\\n^M\\n short-user-agent-name^M\\nHost: ...^M\\n^M\\nspx?i=307053\">...</a><a target=\"_top\" href=\"...\">...</a><a target=\"_top\" href=\"...\">... \" ..., len = 0xfe77ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x594a90, str = 0xfe77ba10, len = 0xfe77ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x66c040, bbIn = 0x657058, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x657cc0, b = 0x66c040, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x657cc0, bb = 0x66c040, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0x1e9ef8, n = 8192U, read = 0xfe77bc44, r = 0x1e9ee0, fold = 0, bb = 0x66c040), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0x1e9ee0, bb = 0x66c040), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x2613e8), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x2613e8), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x2613e8, 0x6937b8, 0x0, 0x0, 0x5949b0, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x2613e8, csd = 0x6937b8), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x1c9f68, sock = 0x6937b8, my_child_num = 0, my_thread_num = 0, bucket_alloc = 0x5949b0), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x30d460, dummy = 0x150228), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x30d460), line 142 in \"thread.c\"\ncurrent thread: t@4\n=>[1] __pollsys(0x4, 0x1, 0xfe67b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfe67b89c, 0x1, 0xfe67b818, 0x0, 0x0, 0x1388), at 0xff0388f4 \n  [3] _poll(0xfe67b89c, 0x1, 0x1388, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x635b00, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x635b00, buf = 0x148d58 \"HTTP/1.1 200 OK^M\\nDate: Mon, 15 Sep 2008 06:42:26 GMT^M\\nServer: Apache/2.2.9 (Unix)^M\\nLast-Modified: Thu, 03 Apr 2008 07:27:39 GMT^M\\nETag: \"874fe1-594-449f2efaf50c0\"^M\\nAccept-Ranges: bytes^M\\nContent-Length: 1428^M\\nContent-Type: image/gif^M\\n^M\\n\\n^M\\n\"/Liebe\"><img class=\"promo_mod_4\" title=\"...\" src=\"...\" alt=\"Liebe\"></a>\\n<h5><a href=\"/...\" title=\"...\" >...</a></h5>\\n<p>...\" ..., len = 0xfe67ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x164a88, str = 0xfe67ba10, len = 0xfe67ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x6a0598, bbIn = 0x6a0628, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x6217f8, b = 0x6a0598, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x6217f8, bb = 0x6a0598, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0x69a198, n = 8192U, read = 0xfe67bc44, r = 0x69a180, fold = 0, bb = 0x6a0598), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0x69a180, bb = 0x6a0598), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x635da0), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x635da0), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x635da0, 0x635b00, 0x0, 0x1, 0x1649a8, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x635da0, csd = 0x635b00), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x1d5278, sock = 0x635b00, my_child_num = 0, my_thread_num = 1, bucket_alloc = 0x1649a8), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x30d440, dummy = 0x150240), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x30d440), line 142 in \"thread.c\"\ncurrent thread: t@5\n=>[1] __lwp_park(0x4, 0x0, 0x0, 0x1, 0xff3fc040, 0x1), at 0xff044aa0 \n  [2] cond_sleep_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03e9cc \n  [3] cond_wait_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03eae8 \n  [4] cond_wait(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03f068 \n  [5] _pthread_cond_wait(0x30e1c8, 0x307660, 0xfe57bf18, 0x0, 0x599598, 0x0), at 0xff03f0a4 \n  [6] apr_thread_cond_wait(cond = 0x30e1c0, mutex = 0x307658), line 68 in \"thread_cond.c\"\n  [7] ap_queue_pop(queue = 0x30e1e0, sd = 0xfe57bf24, p = 0xfe57bf18), line 339 in \"fdqueue.c\"\n  [8] worker_thread(thd = 0x30d420, dummy = 0x150228), line 861 in \"worker.c\"\n  [9] dummy_worker(opaque = 0x30d420), line 142 in \"thread.c\"\ncurrent thread: t@6\n=>[1] __pollsys(0x4, 0x1, 0xfe47b1d8, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfe47b25c, 0x1, 0xfe47b1d8, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfe47b25c, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x1e93e8, for_read = 0), line 51 in \"waitio.c\"\n  [5] apr_socket_connect(sock = 0x1e93e8, sa = 0x5cd1b8), line 279 in \"sockets.c\"\n  [6] ap_proxy_connect_backend(proxy_function = 0xfeca9cf0 \"HTTP\", conn = 0x1e9068, worker = 0x205c10, s = 0x294660), line 2352 in \"proxy_util.c\"\n  [7] proxy_http_handler(r = 0x5a7338, worker = 0x205c10, conf = 0x30c678, url = 0x1e9358 \"...\", proxyname = (nil), proxyport = 0), line 1932 in \"mod_proxy_http.c\"\n  [8] proxy_run_scheme_handler(0x5a7338, 0x205c10, 0x30c678, 0x1e8e78, 0x0, 0x0), at 0xfecef0b8 \n  [9] proxy_handler(r = 0x5a7338), line 970 in \"mod_proxy.c\"\n  [10] ap_run_handler(0x5a7338, 0xfeeffbf0, 0x299028, 0x0, 0x0, 0x1010101), at 0x5b65c \n  [11] ap_invoke_handler(r = 0x5a7338), line 372 in \"config.c\"\n  [12] ap_run_sub_req(r = 0x5a7338), line 1876 in \"request.c\"\n  [13] handle_include(ctx = 0xe28a0, f = 0xe38b8, bb = 0xe4b88), line 1737 in \"mod_include.c\"\n  [14] send_parsed_content(f = 0xe38b8, bb = 0x2bc938), line 3432 in \"mod_include.c\"\n  [15] includes_filter(f = 0xe38b8, b = 0x2bc938), line 3651 in \"mod_include.c\"\n  [16] ap_pass_brigade(next = 0xe38b8, bb = 0x2bc938), line 526 in \"util_filter.c\"\n  [17] default_handler(r = 0x299028), line 3740 in \"core.c\"\n  [18] ap_run_handler(0x299028, 0x3b, 0x0, 0x0, 0x0, 0x3a), at 0x5b65c \n  [19] ap_invoke_handler(r = 0x299028), line 372 in \"config.c\"\n  [20] ap_internal_redirect(new_uri = 0x1c3498 \"/Home/2089/20899719.html\", r = 0xdd398), line 477 in \"http_request.c\"\n  [21] handler_redirect(r = 0xdd398), line 4787 in \"mod_rewrite.c\"\n  [22] ap_run_handler(0xdd398, 0x4, 0xdd398, 0x3, 0x58c990, 0x0), at 0x5b65c \n  [23] ap_invoke_handler(r = 0xdd398), line 372 in \"config.c\"\n  [24] ap_process_request(r = 0xdd398), line 258 in \"http_request.c\"\n  [25] ap_process_http_connection(c = 0xe4018), line 190 in \"http_core.c\"\n  [26] ap_run_process_connection(0xe4018, 0x1aa8b8, 0x0, 0x3, 0x58c990, 0x0), at 0x67ea4 \n  [27] ap_process_connection(c = 0xe4018, csd = 0x1aa8b8), line 178 in \"connection.c\"\n  [28] process_socket(p = 0x1dc6e8, sock = 0x1aa8b8, my_child_num = 0, my_thread_num = 3, bucket_alloc = 0x58c990), line 544 in \"worker.c\"\n  [29] worker_thread(thd = 0x30d400, dummy = 0x150240), line 894 in \"worker.c\"\n  [30] dummy_worker(opaque = 0x30d400), line 142 in \"thread.c\"\ncurrent thread: t@7\n=>[1] __pollsys(0x4, 0x1, 0xfe37b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfe37b89c, 0x1, 0xfe37b818, 0x0, 0x0, 0x1388), at 0xff0388f4 \n  [3] _poll(0xfe37b89c, 0x1, 0x1388, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x2b2bd0, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x2b2bd0, buf = 0x5b6048 \"HTTP/1.1 200 OK^M\\nDate: Mon, 15 Sep 2008 06:42:30 GMT^M\\nServer: Apache/2.2.9 (Unix)^M\\nLast-Modified: Tue, 02 Sep 2008 12:36:58 GMT^M\\nETag: \"95e292-942-455e8f9c42e80\"^M\\nAccept-Ranges: bytes^M\\nContent-Length: 2370^M\\nContent-Type: image/jpeg^M\\n^M\\nascript^M\\n^M\\n\", len = 0xfe37ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x590a80, str = 0xfe37ba10, len = 0xfe37ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x686cb8, bbIn = 0x5e89c8, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x668e58, b = 0x686cb8, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x668e58, bb = 0x686cb8, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0xe2e18, n = 8192U, read = 0xfe37bc44, r = 0xe2e00, fold = 0, bb = 0x686cb8), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0xe2e00, bb = 0x686cb8), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x693988), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x693988), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x693988, 0x2b2bd0, 0x0, 0x4, 0x5909a0, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x693988, csd = 0x2b2bd0), line 178 in \"connection.c\"\n  [16] process_socket(p = 0xe5e50, sock = 0x2b2bd0, my_child_num = 0, my_thread_num = 4, bucket_alloc = 0x5909a0), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x30d3e0, dummy = 0x150228), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x30d3e0), line 142 in \"thread.c\"\ncurrent thread: t@8\n=>[1] __lwp_park(0x4, 0x0, 0x0, 0x0, 0xff3fc070, 0x1), at 0xff044aa0 \n  [2] cond_sleep_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03e9cc \n  [3] cond_wait_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03eae8 \n  [4] cond_wait(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03f068 \n  [5] _pthread_cond_wait(0x30e1c8, 0x307660, 0xfe27bf18, 0x0, 0x117c18, 0x0), at 0xff03f0a4 \n  [6] apr_thread_cond_wait(cond = 0x30e1c0, mutex = 0x307658), line 68 in \"thread_cond.c\"\n  [7] ap_queue_pop(queue = 0x30e1e0, sd = 0xfe27bf24, p = 0xfe27bf18), line 339 in \"fdqueue.c\"\n  [8] worker_thread(thd = 0x30e4a0, dummy = 0x150240), line 861 in \"worker.c\"\n  [9] dummy_worker(opaque = 0x30e4a0), line 142 in \"thread.c\"\ncurrent thread: t@9\n=>[1] __pollsys(0x4, 0x1, 0xfe17ada8, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfe17ae2c, 0x1, 0xfe17ada8, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfe17ae2c, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x615f88, for_read = 0), line 51 in \"waitio.c\"\n  [5] apr_socket_connect(sock = 0x615f88, sa = 0x616948), line 279 in \"sockets.c\"\n  [6] ap_proxy_connect_backend(proxy_function = 0xfeca9cf0 \"HTTP\", conn = 0x615ae8, worker = 0x205c10, s = 0x182fa0), line 2352 in \"proxy_util.c\"\n  [7] proxy_http_handler(r = 0x614548, worker = 0x205c10, conf = 0x1799d0, url = 0x615f50 \"/ssi/weather/homepage.php?&cityCode=EHAM\", proxyname = (nil), proxyport = 0), line 1932 in \"mod_proxy_http.c\"\n  [8] proxy_run_scheme_handler(0x614548, 0x205c10, 0x1799d0, 0x6159a8, 0x0, 0x0), at 0xfecef0b8 \n  [9] proxy_handler(r = 0x614548), line 970 in \"mod_proxy.c\"\n  [10] ap_run_handler(0x614548, 0xfeeffbf0, 0x5ffba8, 0x0, 0x0, 0x1010101), at 0x5b65c \n  [11] ap_invoke_handler(r = 0x614548), line 372 in \"config.c\"\n  [12] ap_run_sub_req(r = 0x614548), line 1876 in \"request.c\"\n  [13] handle_include(ctx = 0x60ddd0, f = 0x602628, bb = 0x5ffae8), line 1737 in \"mod_include.c\"\n  [14] send_parsed_content(f = 0x602628, bb = 0x5ffa88), line 3432 in \"mod_include.c\"\n  [15] includes_filter(f = 0x602628, b = 0x5ffa88), line 3651 in \"mod_include.c\"\n  [16] ap_pass_brigade(next = 0x602628, bb = 0x5ffa88), line 526 in \"util_filter.c\"\n  [17] default_handler(r = 0x5ffba8), line 3740 in \"core.c\"\n  [18] ap_run_handler(0x5ffba8, 0x3b, 0xe4758, 0x0, 0x0, 0x1010101), at 0x5b65c \n  [19] ap_invoke_handler(r = 0x5ffba8), line 372 in \"config.c\"\n  [20] ap_run_sub_req(r = 0x5ffba8), line 1876 in \"request.c\"\n  [21] handle_include(ctx = 0x295d18, f = 0x5e0078, bb = 0x5e8f98), line 1737 in \"mod_include.c\"\n  [22] send_parsed_content(f = 0x5e0078, bb = 0x5d0000), line 3432 in \"mod_include.c\"\n  [23] includes_filter(f = 0x5e0078, b = 0x5d0000), line 3651 in \"mod_include.c\"\n  [24] ap_pass_brigade(next = 0x5e0078, bb = 0x5d0000), line 526 in \"util_filter.c\"\n  [25] default_handler(r = 0xe4758), line 3740 in \"core.c\"\n  [26] ap_run_handler(0xe4758, 0x3b, 0x0, 0x0, 0x0, 0x3a), at 0x5b65c \n  [27] ap_invoke_handler(r = 0xe4758), line 372 in \"config.c\"\n  [28] ap_internal_redirect(new_uri = 0x5d8320 \"/Home/2089/20899629.html\", r = 0x5f28b0), line 477 in \"http_request.c\"\n  [29] handler_redirect(r = 0x5f28b0), line 4787 in \"mod_rewrite.c\"\n  [30] ap_run_handler(0x5f28b0, 0x4, 0x5f28b0, 0x6, 0xf56e0, 0x0), at 0x5b65c \n  [31] ap_invoke_handler(r = 0x5f28b0), line 372 in \"config.c\"\n  [32] ap_process_request(r = 0x5f28b0), line 258 in \"http_request.c\"\n  [33] ap_process_http_connection(c = 0x5ebb18), line 190 in \"http_core.c\"\n  [34] ap_run_process_connection(0x5ebb18, 0x5f47a0, 0x0, 0x6, 0xf56e0, 0x0), at 0x67ea4 \n  [35] ap_process_connection(c = 0x5ebb18, csd = 0x5f47a0), line 178 in \"connection.c\"\n  [36] process_socket(p = 0x300018, sock = 0x5f47a0, my_child_num = 0, my_thread_num = 6, bucket_alloc = 0xf56e0), line 544 in \"worker.c\"\n  [37] worker_thread(thd = 0x30e480, dummy = 0x150228), line 894 in \"worker.c\"\n  [38] dummy_worker(opaque = 0x30e480), line 142 in \"thread.c\"\ncurrent thread: t@10\n=>[1] __pollsys(0x4, 0x1, 0xfe07b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfe07b89c, 0x1, 0xfe07b818, 0x0, 0x0, 0x1388), at 0xff0388f4 \n  [3] _poll(0xfe07b89c, 0x1, 0x1388, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x114e58, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x114e58, buf = 0x5a2480 \"HTTP/1.1 200 OK^M\\nDate: Mon, 15 Sep 2008 06:42:29 GMT^M\\nServer: Apache/2.2.9 (Unix)^M\\nLast-Modified: Wed, 03 Sep 2008 16:00:00 GMT^M\\nETag: \"95fcf3-758-455ffedb62000\"^M\\nAccept-Ranges: bytes^M\\nContent-Length: 1880^M\\nContent-Type: application/xml^M\\n^M\\nkwave-flash^M\\n^M\\n\", len = 0xfe07ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x59f070, str = 0xfe07ba10, len = 0xfe07ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x61fd10, bbIn = 0x62e300, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x6925c0, b = 0x61fd10, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x6925c0, bb = 0x61fd10, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0x5d4b00, n = 8192U, read = 0xfe07bc44, r = 0x5d4ae8, fold = 0, bb = 0x61fd10), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0x5d4ae8, bb = 0x61fd10), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x5d3f28), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x5d3f28), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x5d3f28, 0x114e58, 0x0, 0x7, 0x59ef90, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x5d3f28, csd = 0x114e58), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x59ea68, sock = 0x114e58, my_child_num = 0, my_thread_num = 7, bucket_alloc = 0x59ef90), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x30e460, dummy = 0x150240), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x30e460), line 142 in \"thread.c\"\ncurrent thread: t@11\n=>[1] __lwp_park(0x4, 0x0, 0x0, 0x0, 0xff3fc0a0, 0x1), at 0xff044aa0 \n  [2] cond_sleep_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03e9cc \n  [3] cond_wait_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03eae8 \n  [4] cond_wait(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03f068 \n  [5] _pthread_cond_wait(0x30e1c8, 0x307660, 0xfdf7bf18, 0x0, 0x202bf0, 0x0), at 0xff03f0a4 \n  [6] apr_thread_cond_wait(cond = 0x30e1c0, mutex = 0x307658), line 68 in \"thread_cond.c\"\n  [7] ap_queue_pop(queue = 0x30e1e0, sd = 0xfdf7bf24, p = 0xfdf7bf18), line 339 in \"fdqueue.c\"\n  [8] worker_thread(thd = 0x30e440, dummy = 0x150228), line 861 in \"worker.c\"\n  [9] dummy_worker(opaque = 0x30e440), line 142 in \"thread.c\"\ncurrent thread: t@12\n=>[1] __lwp_park(0x4, 0x0, 0x0, 0x0, 0xff3fc0b0, 0x1), at 0xff044aa0 \n  [2] cond_sleep_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03e9cc \n  [3] cond_wait_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03eae8 \n  [4] cond_wait(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03f068 \n  [5] _pthread_cond_wait(0x30e1c8, 0x307660, 0xfde7bf18, 0x0, 0xe6eb8, 0x0), at 0xff03f0a4 \n  [6] apr_thread_cond_wait(cond = 0x30e1c0, mutex = 0x307658), line 68 in \"thread_cond.c\"\n  [7] ap_queue_pop(queue = 0x30e1e0, sd = 0xfde7bf24, p = 0xfde7bf18), line 339 in \"fdqueue.c\"\n  [8] worker_thread(thd = 0x2b8720, dummy = 0x150240), line 861 in \"worker.c\"\n  [9] dummy_worker(opaque = 0x2b8720), line 142 in \"thread.c\"\ncurrent thread: t@13\n=>[1] __pollsys(0x4, 0x1, 0xfdd7b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfdd7b89c, 0x1, 0xfdd7b818, 0x0, 0x0, 0x1388), at 0xff0388f4 \n  [3] _poll(0xfdd7b89c, 0x1, 0x1388, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x5f21c8, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x5f21c8, buf = 0x2ba4d0 \"HTTP/1.1 200 OK^M\\nDate: Mon, 15 Sep 2008 06:42:30 GMT^M\\nServer: Apache/2.2.9 (Unix)^M\\nLast-Modified: Fri, 25 Jul 2008 15:17:53 GMT^M\\nETag: \"874cc1-9c-452daad702a40\"^M\\nAccept-Ranges: bytes^M\\nContent-Length: 156^M\\nContent-Type: image/png^M\\n^M\\n\\n^M\\nx-shockwave-flash^M\\n^M\\n^I \\n^I^I\\n\\n^I^I] \\n\\n})A\", len = 0xfdd7ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x214fc0, str = 0xfdd7ba10, len = 0xfdd7ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x644078, bbIn = 0x66bdd0, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x668f18, b = 0x644078, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x668f18, bb = 0x644078, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0x1d4950, n = 8192U, read = 0xfdd7bc44, r = 0x1d4938, fold = 0, bb = 0x644078), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0x1d4938, bb = 0x644078), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x690048), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x690048), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x690048, 0x5f21c8, 0x0, 0xa, 0x214ee0, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x690048, csd = 0x5f21c8), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x274570, sock = 0x5f21c8, my_child_num = 0, my_thread_num = 10, bucket_alloc = 0x214ee0), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x2b8700, dummy = 0x150228), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x2b8700), line 142 in \"thread.c\"\ncurrent thread: t@14\n=>[1] _malloc_unlocked(0x58, 0x0, 0x274c18, 0xff1fb038, 0x41006984, 0x5bc050), at 0xfefd5b74 \n  [2] malloc(0x54, 0x1, 0x98958, 0xff1fb200, 0xff06e308, 0xff077870), at 0xfefd59f4 \n  [3] pool_alloc(pool = 0x5f59d0, size = 84U), line 1408 in \"apr_pools.c\"\n  [4] apr_palloc_debug(pool = 0x5f59d0, size = 84U, file_line = 0xfeec7640 \"mod_log_config.c:963\"), line 1448 in \"apr_pools.c\"\n  [5] config_log_transaction(r = 0x63a440, cls = 0x2269f8, default_format = 0x2dd780), line 963 in \"mod_log_config.c\"\n  [6] multi_log_transaction(r = 0x63a440), line 1006 in \"mod_log_config.c\"\n  [7] ap_run_log_transaction(0x63a440, 0x6, 0x63a440, 0xb, 0x61e688, 0x5bc050), at 0x47f28 \n  [8] ap_process_request(r = 0x63a440), line 284 in \"http_request.c\"\n  [9] ap_process_http_connection(c = 0x5dc3b8), line 190 in \"http_core.c\"\n  [10] ap_run_process_connection(0x5dc3b8, 0x65dae8, 0x0, 0xb, 0x5bc050, 0x0), at 0x67ea4 \n  [11] ap_process_connection(c = 0x5dc3b8, csd = 0x65dae8), line 178 in \"connection.c\"\n  [12] process_socket(p = 0x22a880, sock = 0x65dae8, my_child_num = 0, my_thread_num = 11, bucket_alloc = 0x5bc050), line 544 in \"worker.c\"\n  [13] worker_thread(thd = 0x2b86e0, dummy = 0x150240), line 894 in \"worker.c\"\n  [14] dummy_worker(opaque = 0x2b86e0), line 142 in \"thread.c\"\ncurrent thread: t@15\n=>[1] __pollsys(0x4, 0x1, 0xfdb7b1d8, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfdb7b25c, 0x1, 0xfdb7b1d8, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfdb7b25c, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x1ea120, for_read = 0), line 51 in \"waitio.c\"\n  [5] apr_socket_connect(sock = 0x1ea120, sa = 0x1c7388), line 279 in \"sockets.c\"\n  [6] ap_proxy_connect_backend(proxy_function = 0xfeca9cf0 \"HTTP\", conn = 0x26a310, worker = 0x205c10, s = 0x294660), line 2352 in \"proxy_util.c\"\n  [7] proxy_http_handler(r = 0x1c2340, worker = 0x205c10, conf = 0x30c678, url = 0x1ea090 \"/...\", proxyname = (nil), proxyport = 0), line 1932 in \"mod_proxy_http.c\"\n  [8] proxy_run_scheme_handler(0x1c2340, 0x205c10, 0x30c678, 0x1e9da8, 0x0, 0x0), at 0xfecef0b8 \n  [9] proxy_handler(r = 0x1c2340), line 970 in \"mod_proxy.c\"\n  [10] ap_run_handler(0x1c2340, 0xfeeffbf0, 0x1931a8, 0x0, 0x0, 0x1010101), at 0x5b65c \n  [11] ap_invoke_handler(r = 0x1c2340), line 372 in \"config.c\"\n  [12] ap_run_sub_req(r = 0x1c2340), line 1876 in \"request.c\"\n  [13] handle_include(ctx = 0xd5f10, f = 0x26f3d8, bb = 0x287f68), line 1737 in \"mod_include.c\"\n  [14] send_parsed_content(f = 0x26f3d8, bb = 0x260cc0), line 3432 in \"mod_include.c\"\n  [15] includes_filter(f = 0x26f3d8, b = 0x260cc0), line 3651 in \"mod_include.c\"\n  [16] ap_pass_brigade(next = 0x26f3d8, bb = 0x260cc0), line 526 in \"util_filter.c\"\n  [17] default_handler(r = 0x1931a8), line 3740 in \"core.c\"\n  [18] ap_run_handler(0x1931a8, 0x3b, 0x0, 0x0, 0x0, 0x3a), at 0x5b65c \n  [19] ap_invoke_handler(r = 0x1931a8), line 372 in \"config.c\"\n  [20] ap_internal_redirect(new_uri = 0x1158f0 \"/Home/2089/20899719.html\", r = 0x260660), line 477 in \"http_request.c\"\n  [21] handler_redirect(r = 0x260660), line 4787 in \"mod_rewrite.c\"\n  [22] ap_run_handler(0x260660, 0x4, 0x260660, 0xc, 0x208208, 0x0), at 0x5b65c \n  [23] ap_invoke_handler(r = 0x260660), line 372 in \"config.c\"\n  [24] ap_process_request(r = 0x260660), line 258 in \"http_request.c\"\n  [25] ap_process_http_connection(c = 0x260190), line 190 in \"http_core.c\"\n  [26] ap_run_process_connection(0x260190, 0x298f10, 0x0, 0xc, 0x208208, 0x0), at 0x67ea4 \n  [27] ap_process_connection(c = 0x260190, csd = 0x298f10), line 178 in \"connection.c\"\n  [28] process_socket(p = 0x298dd8, sock = 0x298f10, my_child_num = 0, my_thread_num = 12, bucket_alloc = 0x208208), line 544 in \"worker.c\"\n  [29] worker_thread(thd = 0x2b86c0, dummy = 0x150228), line 894 in \"worker.c\"\n  [30] dummy_worker(opaque = 0x2b86c0), line 142 in \"thread.c\"\ncurrent thread: t@16\n=>[1] __pollsys(0x4, 0x1, 0xfda7b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfda7b89c, 0x1, 0xfda7b818, 0x0, 0x0, 0x1388), at 0xff0388f4 \n  [3] _poll(0xfda7b89c, 0x1, 0x1388, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x115330, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x115330, buf = 0x5b2038 \"HTTP/1.1 200 OK^M\\nDate: Mon, 15 Sep 2008 06:42:30 GMT^M\\nServer: Apache/2.2.9 (Unix)^M\\nLast-Modified: Tue, 12 Jun 2007 11:51:10 GMT^M\\nETag: \"75d913-c93-432b41d110780\"^M\\nAccept-Ranges: bytes^M\\nContent-Length: 3219^M\\nContent-Type: image/png^M\\n^M\\nascript^M\\n^M\\n\", len = 0xfda7ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x599678, str = 0xfda7ba10, len = 0xfda7ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x62e210, bbIn = 0xe4cc0, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x682ad8, b = 0x62e210, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x682ad8, bb = 0x62e210, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0x2b1e38, n = 8192U, read = 0xfda7bc44, r = 0x2b1e20, fold = 0, bb = 0x62e210), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0x2b1e20, bb = 0x62e210), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x5d68a0), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x5d68a0), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x5d68a0, 0x115330, 0x0, 0xd, 0x599598, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x5d68a0, csd = 0x115330), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x599070, sock = 0x115330, my_child_num = 0, my_thread_num = 13, bucket_alloc = 0x599598), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x2b86a0, dummy = 0x150240), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x2b86a0), line 142 in \"thread.c\"\ncurrent thread: t@17\n=>[1] __lwp_park(0x4, 0x0, 0x0, 0x1, 0xff3fc100, 0x1), at 0xff044aa0 \n  [2] cond_sleep_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03e9cc \n  [3] cond_wait_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03eae8 \n  [4] cond_wait(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03f068 \n  [5] _pthread_cond_wait(0x30e1c8, 0x307660, 0xfd97bf18, 0x0, 0x252980, 0x0), at 0xff03f0a4 \n  [6] apr_thread_cond_wait(cond = 0x30e1c0, mutex = 0x307658), line 68 in \"thread_cond.c\"\n  [7] ap_queue_pop(queue = 0x30e1e0, sd = 0xfd97bf24, p = 0xfd97bf18), line 339 in \"fdqueue.c\"\n  [8] worker_thread(thd = 0x2b8980, dummy = 0x150228), line 861 in \"worker.c\"\n  [9] dummy_worker(opaque = 0x2b8980), line 142 in \"thread.c\"\ncurrent thread: t@18\n=>[1] __lwp_park(0x4, 0x0, 0x0, 0x1, 0xff3fc110, 0x1), at 0xff044aa0 \n  [2] cond_sleep_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03e9cc \n  [3] cond_wait_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03eae8 \n  [4] cond_wait(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03f068 \n  [5] _pthread_cond_wait(0x30e1c8, 0x307660, 0xfd87bf18, 0x0, 0x1649a8, 0x0), at 0xff03f0a4 \n  [6] apr_thread_cond_wait(cond = 0x30e1c0, mutex = 0x307658), line 68 in \"thread_cond.c\"\n  [7] ap_queue_pop(queue = 0x30e1e0, sd = 0xfd87bf24, p = 0xfd87bf18), line 339 in \"fdqueue.c\"\n  [8] worker_thread(thd = 0x2b8960, dummy = 0x150240), line 861 in \"worker.c\"\n  [9] dummy_worker(opaque = 0x2b8960), line 142 in \"thread.c\"\ncurrent thread: t@19\n=>[1] __pollsys(0x4, 0x1, 0xfd77b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfd77b89c, 0x1, 0xfd77b818, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfd77b89c, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x646270, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x646270, buf = 0x196f20 \"HTTP/1.1 200 OK^M\\nDate: Mon, 15 Sep 2008 06:42:29 GMT^M\\nServer: Apache/2.2.9 (Unix)^M\\nLast-Modified: Tue, 02 Sep 2008 11:46:51 GMT^M\\nETag: \"95e199-1660-455e8468900c0\"^M\\nAccept-Ranges: bytes^M\\nContent-Length: 5728^M\\nContent-Type: image/jpeg^M\\n^M\\nhockwave-flash^M\\n^M\\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" ..., len = 0xfd77ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x1060c0, str = 0xfd77ba10, len = 0xfd77ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x5e8a10, bbIn = 0x5d02e8, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x5d2fc0, b = 0x5e8a10, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x5d2fc0, bb = 0x5e8a10, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0x1d4c00, n = 8192U, read = 0xfd77bc44, r = 0x1d4be8, fold = 0, bb = 0x5e8a10), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0x1d4be8, bb = 0x5e8a10), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x1e8558), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x1e8558), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x1e8558, 0x646270, 0x0, 0x10, 0x1060a0, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x1e8558, csd = 0x646270), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x298760, sock = 0x646270, my_child_num = 0, my_thread_num = 16, bucket_alloc = 0x1060a0), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x2b8940, dummy = 0x150228), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x2b8940), line 142 in \"thread.c\"\ncurrent thread: t@20\n=>[1] __pollsys(0x4, 0x1, 0xfd67b7e0, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfd67b864, 0x1, 0xfd67b7e0, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfd67b864, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x59c060, for_read = 0), line 51 in \"waitio.c\"\n  [5] apr_socket_connect(sock = 0x59c060, sa = 0x5d9348), line 279 in \"sockets.c\"\n  [6] ap_proxy_connect_backend(proxy_function = 0xfeca9cf0 \"HTTP\", conn = 0x59be08, worker = 0x205c10, s = 0x294660), line 2352 in \"proxy_util.c\"\n  [7] proxy_http_handler(r = 0x5d70e0, worker = 0x205c10, conf = 0x30c678, url = 0x5d2b00 \"/ssi/ipcheck.php?\", proxyname = (nil), proxyport = 0), line 1932 in \"mod_proxy_http.c\"\n  [8] proxy_run_scheme_handler(0x5d70e0, 0x205c10, 0x30c678, 0x5f05d8, 0x0, 0x0), at 0xfecef0b8 \n  [9] proxy_handler(r = 0x5d70e0), line 970 in \"mod_proxy.c\"\n  [10] ap_run_handler(0x5d70e0, 0x4, 0x5d70e0, 0x11, 0x5a4988, 0x0), at 0x5b65c \n  [11] ap_invoke_handler(r = 0x5d70e0), line 372 in \"config.c\"\n  [12] ap_process_request(r = 0x5d70e0), line 258 in \"http_request.c\"\n  [13] ap_process_http_connection(c = 0x5d6bd8), line 190 in \"http_core.c\"\n  [14] ap_run_process_connection(0x5d6bd8, 0x5d6908, 0x0, 0x11, 0x5a4988, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x5d6bd8, csd = 0x5d6908), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x5a4460, sock = 0x5d6908, my_child_num = 0, my_thread_num = 17, bucket_alloc = 0x5a4988), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x2b8920, dummy = 0x150240), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x2b8920), line 142 in \"thread.c\"\ncurrent thread: t@21\n=>[1] __pollsys(0x4, 0x1, 0xfd57b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfd57b89c, 0x1, 0xfd57b818, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfd57b89c, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x68c1e0, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x68c1e0, buf = 0x2b4bc8 \"HTTP/1.1 200 OK^M\\nDate: Mon, 15 Sep 2008 06:42:30 GMT^M\\nServer: Apache/2.2.9 (Unix)^M\\nLast-Modified: Thu, 20 Mar 2008 13:26:38 GMT^M\\nETag: \"95fcf8-191-448de51bb1f80\"^M\\nAccept-Ranges: bytes^M\\nContent-Length: 401^M\\nContent-Type: image/png^M\\n^M\\n\\n^M\\n^I\\n\\n^I^I \\n^I^I\\n\\n^I^I \\n^I^I\\n\\n^I^I \\n^I^I\\n\\n^I^I] \\n\\n})AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" ..., len = 0xfd57ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x19edb8, str = 0xfd57ba10, len = 0xfd57ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x686c70, bbIn = 0x636b38, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x65e9d8, b = 0x686c70, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x65e9d8, bb = 0x686c70, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0x6989a8, n = 8192U, read = 0xfd57bc44, r = 0x698990, fold = 0, bb = 0x686c70), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0x698990, bb = 0x686c70), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x68c480), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x68c480), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x68c480, 0x68c1e0, 0x0, 0x12, 0x19ed98, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x68c480, csd = 0x68c1e0), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x1c1f08, sock = 0x68c1e0, my_child_num = 0, my_thread_num = 18, bucket_alloc = 0x19ed98), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x2b8900, dummy = 0x150228), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x2b8900), line 142 in \"thread.c\"\ncurrent thread: t@22\n=>[1] __lwp_park(0x4, 0x0, 0x0, 0x1, 0xff3fc150, 0x1), at 0xff044aa0 \n  [2] cond_sleep_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03e9cc \n  [3] cond_wait_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03eae8 \n  [4] cond_wait(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03f068 \n  [5] _pthread_cond_wait(0x30e1c8, 0x307660, 0xfd47bf18, 0x0, 0x28dce0, 0x0), at 0xff03f0a4 \n  [6] apr_thread_cond_wait(cond = 0x30e1c0, mutex = 0x307658), line 68 in \"thread_cond.c\"\n  [7] ap_queue_pop(queue = 0x30e1e0, sd = 0xfd47bf24, p = 0xfd47bf18), line 339 in \"fdqueue.c\"\n  [8] worker_thread(thd = 0x2f6170, dummy = 0x150240), line 861 in \"worker.c\"\n  [9] dummy_worker(opaque = 0x2f6170), line 142 in \"thread.c\"\ncurrent thread: t@23\n=>[1] __pollsys(0x4, 0x1, 0xfd37b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfd37b89c, 0x1, 0xfd37b818, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfd37b89c, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x19c260, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x19c260, buf = 0x1f5c10 \"HTTP/1.1 200 OK^M\\nDate: Mon, 15 Sep 2008 06:42:28 GMT^M\\nServer: Apache/2.2.9 (Unix)^M\\nLast-Modified: Thu, 10 Apr 2008 17:36:26 GMT^M\\nETag: \"75d8b3-84-44a8841c0ba80\"^M\\nAccept-Ranges: bytes^M\\nContent-Length: 132^M\\nContent-Type: image/png^M\\n^M\\n^M\\n\\ntarget=\"_top\" href=\"...\">...</a><a target=\"_top\" href=\"...\">...</a><a target=\"_top\" href=\"...\">...\" ..., len = 0xfd37ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x230020, str = 0xfd37ba10, len = 0xfd37ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x664b30, bbIn = 0x5d91b0, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x682fd8, b = 0x664b30, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x682fd8, bb = 0x664b30, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0xe29f0, n = 8192U, read = 0xfd37bc44, r = 0xe29d8, fold = 0, bb = 0x664b30), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0xe29d8, bb = 0x664b30), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x699f58), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x699f58), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x699f58, 0x19c260, 0x0, 0x14, 0x230000, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x699f58, csd = 0x19c260), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x1b74e0, sock = 0x19c260, my_child_num = 0, my_thread_num = 20, bucket_alloc = 0x230000), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x294ca0, dummy = 0x150228), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x294ca0), line 142 in \"thread.c\"\ncurrent thread: t@24\n=>[1] __pollsys(0x4, 0x1, 0xfd27b818, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfd27b89c, 0x1, 0xfd27b818, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfd27b89c, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x5ebb90, for_read = 1), line 51 in \"waitio.c\"\n  [5] apr_socket_recv(sock = 0x5ebb90, buf = 0x58a998 \"HTTP/1.1 200 OK^M\\nDate: Mon, 15 Sep 2008 06:42:30 GMT^M\\nServer: Apache/2.2.9 (Unix)^M\\nLast-Modified: Thu, 03 Apr 2008 07:27:08 GMT^M\\nETag: \"874e99-5d9-449f2edd64b00\"^M\\nAccept-Ranges: bytes^M\\nContent-Length: 1497^M\\nContent-Type: image/gif^M\\n^M\\n^M\\n\\n\", len = 0xfd27ba0c), line 87 in \"sendrecv.c\"\n  [6] socket_bucket_read(a = 0x5889a0, str = 0xfd27ba10, len = 0xfd27ba0c, block = APR_BLOCK_READ), line 36 in \"apr_buckets_socket.c\"\n  [7] apr_brigade_split_line(bbOut = 0x643e80, bbIn = 0x690aa8, block = APR_BLOCK_READ, maxbytes = 8192LL), line 319 in \"apr_brigade.c\"\n  [8] ap_core_input_filter(f = 0x65ea78, b = 0x643e80, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 155 in \"core_filters.c\"\n  [9] ap_get_brigade(next = 0x65ea78, bb = 0x643e80, mode = AP_MODE_GETLINE, block = APR_BLOCK_READ, readbytes = 0), line 490 in \"util_filter.c\"\n  [10] ap_rgetline_core(s = 0x68b400, n = 8192U, read = 0xfd27bc44, r = 0x68b3e8, fold = 0, bb = 0x643e80), line 232 in \"protocol.c\"\n  [11] read_request_line(r = 0x68b3e8, bb = 0x643e80), line 596 in \"protocol.c\"\n  [12] ap_read_request(conn = 0x5aa398), line 891 in \"protocol.c\"\n  [13] ap_process_http_connection(c = 0x5aa398), line 183 in \"http_core.c\"\n  [14] ap_run_process_connection(0x5aa398, 0x5ebb90, 0x0, 0x15, 0x588980, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x5aa398, csd = 0x5ebb90), line 178 in \"connection.c\"\n  [16] process_socket(p = 0xe2958, sock = 0x5ebb90, my_child_num = 0, my_thread_num = 21, bucket_alloc = 0x588980), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x294be0, dummy = 0x150240), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x294be0), line 142 in \"thread.c\"\ncurrent thread: t@25\n=>[1] __lwp_park(0x4, 0x0, 0x0, 0x0, 0xff3fc180, 0x1), at 0xff044aa0 \n  [2] cond_sleep_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03e9cc \n  [3] cond_wait_queue(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03eae8 \n  [4] cond_wait(0x30e1c8, 0x307660, 0x0, 0x0, 0x0, 0x0), at 0xff03f068 \n  [5] _pthread_cond_wait(0x30e1c8, 0x307660, 0xfd17bf18, 0x0, 0x214ee0, 0x0), at 0xff03f0a4 \n  [6] apr_thread_cond_wait(cond = 0x30e1c0, mutex = 0x307658), line 68 in \"thread_cond.c\"\n  [7] ap_queue_pop(queue = 0x30e1e0, sd = 0xfd17bf24, p = 0xfd17bf18), line 339 in \"fdqueue.c\"\n  [8] worker_thread(thd = 0x1eab98, dummy = 0x150228), line 861 in \"worker.c\"\n  [9] dummy_worker(opaque = 0x1eab98), line 142 in \"thread.c\"\ncurrent thread: t@26\n=>[1] __pollsys(0x4, 0x1, 0xfd07b7e0, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfd07b864, 0x1, 0xfd07b7e0, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfd07b864, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x629ac8, for_read = 0), line 51 in \"waitio.c\"\n  [5] apr_socket_connect(sock = 0x629ac8, sa = 0x69d6f0), line 279 in \"sockets.c\"\n  [6] ap_proxy_connect_backend(proxy_function = 0xfeca9cf0 \"HTTP\", conn = 0x672e78, worker = 0x205c10, s = 0x294660), line 2352 in \"proxy_util.c\"\n  [7] proxy_http_handler(r = 0x68fc48, worker = 0x205c10, conf = 0x30c678, url = 0x5d2bc0 \"/ssi/ipcheck.php?\", proxyname = (nil), proxyport = 0), line 1932 in \"mod_proxy_http.c\"\n  [8] proxy_run_scheme_handler(0x68fc48, 0x205c10, 0x30c678, 0x62cd60, 0x0, 0x0), at 0xfecef0b8 \n  [9] proxy_handler(r = 0x68fc48), line 970 in \"mod_proxy.c\"\n  [10] ap_run_handler(0x68fc48, 0x4, 0x68fc48, 0x17, 0x674480, 0x0), at 0x5b65c \n  [11] ap_invoke_handler(r = 0x68fc48), line 372 in \"config.c\"\n  [12] ap_process_request(r = 0x68fc48), line 258 in \"http_request.c\"\n  [13] ap_process_http_connection(c = 0x676938), line 190 in \"http_core.c\"\n  [14] ap_run_process_connection(0x676938, 0xdde98, 0x0, 0x17, 0x674480, 0x0), at 0x67ea4 \n  [15] ap_process_connection(c = 0x676938, csd = 0xdde98), line 178 in \"connection.c\"\n  [16] process_socket(p = 0x63a878, sock = 0xdde98, my_child_num = 0, my_thread_num = 23, bucket_alloc = 0x674480), line 544 in \"worker.c\"\n  [17] worker_thread(thd = 0x1eab38, dummy = 0x150240), line 894 in \"worker.c\"\n  [18] dummy_worker(opaque = 0x1eab38), line 142 in \"thread.c\"\ncurrent thread: t@27\n=>[1] __pollsys(0x4, 0x1, 0xfcf7b1d8, 0x0, 0x0, 0x0), at 0xff0457cc \n  [2] _pollsys(0xfcf7b25c, 0x1, 0xfcf7b1d8, 0x0, 0x0, 0x493e0), at 0xff0388f4 \n  [3] _poll(0xfcf7b25c, 0x1, 0x493e0, 0x10624c00, 0x0, 0x0), at 0xfefe1d24 \n  [4] apr_wait_for_io_or_timeout(f = (nil), s = 0x5ea5f0, for_read = 0), line 51 in \"waitio.c\"\n  [5] apr_socket_connect(sock = 0x5ea5f0, sa = 0x5d51c0), line 279 in \"sockets.c\"\n  [6] ap_proxy_connect_backend(proxy_function = 0xfeca9cf0 \"HTTP\", conn = 0x5ea270, worker = 0x205c10, s = 0x294660), line 2352 in \"proxy_util.c\"\n  [7] proxy_http_handler(r = 0x5cf7a0, worker = 0x205c10, conf = 0x30c678, url = 0x5ea560 \"/php/feeds/ci2_0_news_headlines.php?&newssourcepath=ch/sda/de_national&newsarticleurl=/News___Wetter/Inland/&contentitemid=0,1,2,3\", proxyname = (nil), proxyport = 0), line 1932 in \"mod_proxy_http.c\"\n  [8] proxy_run_scheme_handler(0x5cf7a0, 0x205c10, 0x30c678, 0x5ea0d8, 0x0, 0x0), at 0xfecef0b8 \n  [9] proxy_handler(r = 0x5cf7a0), line 970 in \"mod_proxy.c\"\n  [10] ap_run_handler(0x5cf7a0, 0xfeeffbf0, 0x2bd0a8, 0x0, 0x0, 0x1010101), at 0x5b65c \n  [11] ap_invoke_handler(r = 0x5cf7a0), line 372 in \"config.c\"\n  [12] ap_run_sub_req(r = 0x5cf7a0), line 1876 in \"request.c\"\n  [13] handle_include(ctx = 0x59c560, f = 0x1abce0, bb = 0x2bca40), line 1737 in \"mod_include.c\"\n  [14] send_parsed_content(f = 0x1abce0, bb = 0x260a80), line 3432 in \"mod_include.c\"\n  [15] includes_filter(f = 0x1abce0, b = 0x260a80), line 3651 in \"mod_include.c\"\n  [16] ap_pass_brigade(next = 0x1abce0, bb = 0x260a80), line 526 in \"util_filter.c\"\n  [17] default_handler(r = 0x2bd0a8), line 3740 in \"core.c\"\n  [18] ap_run_handler(0x2bd0a8, 0x3b, 0x0, 0x0, 0x0, 0x3a), at 0x5b65c \n  [19] ap_invoke_handler(r = 0x2bd0a8), line 372 in \"config.c\"\n  [20] ap_internal_redirect(new_uri = 0x5d7fd8 \"/Home/2089/20899719.html\", r = 0x2b26c0), line 477 in \"http_request.c\"\n  [21] handler_redirect(r = 0x2b26c0), line 4787 in \"mod_rewrite.c\"\n  [22] ap_run_handler(0x2b26c0, 0x4, 0x2b26c0, 0x18, 0x186c80, 0x0), at 0x5b65c \n  [23] ap_invoke_handler(r = 0x2b26c0), line 372 in \"config.c\"\n  [24] ap_process_request(r = 0x2b26c0), line 258 in \"http_request.c\"\n  [25] ap_process_http_connection(c = 0x274cd8), line 190 in \"http_core.c\"\n  [26] ap_run_process_connection(0x274cd8, 0xdc838, 0x0, 0x18, 0x186c80, 0x0), at 0x67ea4 \n  [27] ap_process_connection(c = 0x274cd8, csd = 0xdc838), line 178 in \"connection.c\"\n  [28] process_socket(p = 0x298fc8, sock = 0xdc838, my_child_num = 0, my_thread_num = 24, bucket_alloc = 0x186c80), line 544 in \"worker.c\"\n  [29] worker_thread(thd = 0x1eaa98, dummy = 0x150228), line 894 in \"worker.c\"\n  [30] dummy_worker(opaque = 0x1eaa98), line 142 in \"thread.c\"\ncurrent thread: t@28\n=>[1] ___lwp_mutex_timedlock(0x4, 0x0, 0x1, 0x0, 0x0, 0xff073700), at 0xff045c64 \n  [2] mutex_lock_kernel(0xff180000, 0x0, 0x0, 0xff180000, 0x0, 0x0), at 0xff03c200 \n  [3] mutex_lock_internal(0xff180000, 0x0, 0x1, 0x0, 0x0, 0xff073700), at 0xff03d2fc \n  [4] proc_mutex_proc_pthread_acquire(mutex = 0x2817c0), line 405 in \"proc_mutex.c\"\n  [5] apr_proc_mutex_lock(mutex = 0x2817c0), line 874 in \"proc_mutex.c\"\n  [6] listener_thread(thd = 0x1eaa38, dummy = 0x150240), line 661 in \"worker.c\"\n  [7] dummy_worker(opaque = 0x1eaa38), line 142 in \"thread.c\"\n\n\n\n", "id": 120602, "attachment_id": null, "bug_id": 45792, "creation_time": "2008-09-15T00:16:49Z", "time": "2008-09-15T00:16:49Z", "is_private": false}, {"count": 5, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": null, "text": "A brief update. We were unable to run the core files under gdb on solaris as gdb itself dumps core when the httpd core file is loaded (it doesn't crash upon loading other core files like vim's).\n\nWe had our administrators look into this issue but to no success so far. \n\nWe are also trying to reproduce the problem by building our configuration from scratch and testing against 'incremental' configs to no segfaults so far.\n\nWe have truss output for httpd processes while one of them crashed, if that can be of any help.\n\nIs there a chance you can address the issue with the information we currently have? Otherwise, what other information could be provided or how we can be of help in tracking this down?\n\nThank you in advance.", "id": 120654, "time": "2008-09-16T01:28:13Z", "bug_id": 45792, "creation_time": "2008-09-16T01:28:13Z", "is_private": false}, {"count": 6, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "is_private": false, "id": 120688, "time": "2008-09-16T12:03:41Z", "bug_id": 45792, "creation_time": "2008-09-16T12:03:41Z", "text": "Maybe the truss can help. So please attach it."}, {"count": 7, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": 22599, "text": "Created attachment 22599\ntruss log collected from httpd processes\n\ntruss log collected from httpd processes while 3 of them segfaulted in read() invoked from ap_mpm_pod_check():54.\n\nWe were able to isolate this: the bug was reproduced by sending about 2000 requests in multiple threads (average spawning delay 10ms) to a static text file (static.html - 0.5kB) served over reverse proxy.\n\nconfiguration lines:\n\nProxyPass /php http://backend_server/php/proxied\nProxyPassReverse /php http://backend_server/php/proxied\n\nThe problem also occurs when using proxy balancer and a rewrite rule instead of proxy pass:\n\nRewriteRule ^/php/(.*)$ balancer://php_cluster/$1?%{ENV:QUERY_STRING} [P,L,QSA]\n<Proxy balancer://php_cluster> \n  BalancerMember http://backend_server_1 smax=10 loadfactor=20\n  BalancerMember http://backend_server_2 smax=10 loadfactor=20\n  ProxySet maxattempts=2 stickysession=BALANCEID\n</Proxy>\n(regardless of query string forwarding presence)\n\nThis problem does not occur when using a single backend server (no balancer) with a rewrite rule\nRewriteRule ^/php/(.*)$ http://backend_server/php/proxied/$1 [P,L,QSA]\nFor this scenario we get a different segmentation fault in connection_destructor():1814 in proxy_util.c though. Stack trace follows. We will check if the other segfault was already reported.\n\nOf course the problem doesn't occur on locally served files.", "id": 120730, "time": "2008-09-18T00:02:58Z", "bug_id": 45792, "creation_time": "2008-09-18T00:02:58Z", "is_private": false}, {"count": 8, "tags": [], "creator": "rpluem@apache.org", "text": "Thanks for the truss output. It is helpful. As I suspected the crash does NOT happen during the execution of the read system call but in another thread. Do you still have the core dumps for these crashes and can you provide backtraces for them?", "id": 120736, "attachment_id": null, "bug_id": 45792, "creation_time": "2008-09-18T04:02:44Z", "time": "2008-09-18T04:02:44Z", "is_private": false}, {"count": 9, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": 22601, "is_private": false, "id": 120738, "time": "2008-09-18T05:13:54Z", "bug_id": 45792, "creation_time": "2008-09-18T05:13:54Z", "text": "Created attachment 22601\nstack traces of all threads from core files + thread stack head summary\n\nyes. find attached the stack traces.\n\nprobably the threads in question are:\npid 11158: t@21  a l@21   dummy_worker()   LWP suspended in  mutex_lock_impl()\npid 11149: t@24  a l@24   dummy_worker()   LWP suspended in  mutex_lock_impl()\npid 11169: t@13  a l@13   dummy_worker()   LWP suspended in  _malloc_unlocked()\n\nthat's the order in which truss log shows them and seems confirmed by core dump creation dates.\n\nhope it helps."}, {"count": 10, "tags": [], "bug_id": 45792, "is_private": false, "text": "So we have two crashes (11158/21 and 11149/24) at\n\n=>[1] mutex_lock_impl(0x41414149, 0x0, 0x0, 0x1000, 0x1073e8, 0xfd8b0), at 0xff03d9ec\n  [2] apr_thread_mutex_lock(mutex = 0x41414141), line 92 in \"thread_mutex.c\"\n  [3] allocator_alloc(allocator = 0x17fc30, size = 8192U), line 286 in \"apr_pools.c\"\n\nand one (11169/13) at\n\n=>[1] _malloc_unlocked(0x40, 0x0, 0x105f88, 0xff1fbcd0, 0x3a2f2f77, 0x1659e8), at 0xfefd5b74\n  [2] malloc(0x40, 0x1, 0x98958, 0xff1fc278, 0xff06e308, 0xff077870), at 0xfefd59f4\n  [3] apr_pvsprintf(pool = 0x5b7410, fmt = 0xfee775bc \"%lld\", ap = 0xfdcfba74), line 1834 in \"apr_pools.c\"\n  [4] apr_psprintf(p = 0x5b7410, fmt = 0xfee775bc \"%lld\", ... = (nil), ...), line 1991 in \"apr_pools.c\"\n\nIs it possible that you where short of memory at the point of the crash or did you apply any memory ulimits on the user that runs the httpd child processes?", "id": 120761, "time": "2008-09-18T13:21:15Z", "creator": "rpluem@apache.org", "creation_time": "2008-09-18T13:21:15Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": null, "is_private": false, "id": 120776, "time": "2008-09-19T01:28:01Z", "bug_id": 45792, "creation_time": "2008-09-19T01:28:01Z", "text": "Unlikely. \n\nThe only user limit during the tests was on no.files open (default of 256). \nWe have just set it globally to a very high value (99000) in /etc/system.\n\n/etc/system:\n\nset px:px_fabric_die = 0\nset px:px_fabric_die_rc_ue = 0\n*set px:px_fabric_die_tc_ue_gos = 0\nset segmap_percent = 60\n*set smallfile = 1572864\nset maxpgio = 128\nset rlim_fd_max = 260000\nset rlim_fd_cur = 99000\nset tune_t_fsflushr = 1\nset autoup = 60\nset shmsys:shminfo_shmmax=0xffffffff\nset sq_max_size = 10000\nset noexec_user_stack = 1\nset noexec_user_stack_log = 1\n\nThen after reboot (soft and hard limits for the user):\n\n-bash-3.00$ ulimit -H -a\ncore file size        (blocks, -c) unlimited\ndata seg size         (kbytes, -d) unlimited\nfile size             (blocks, -f) unlimited\nopen files                    (-n) 260000\npipe size          (512 bytes, -p) 10\nstack size            (kbytes, -s) unlimited\ncpu time             (seconds, -t) unlimited\nmax user processes            (-u) 29995\nvirtual memory        (kbytes, -v) unlimited\n\n-bash-3.00$ ulimit -S -a                                                                                                                                                \ncore file size        (blocks, -c) unlimited\ndata seg size         (kbytes, -d) unlimited\nfile size             (blocks, -f) unlimited\nopen files                    (-n) 99000\npipe size          (512 bytes, -p) 10\nstack size            (kbytes, -s) 8192\ncpu time             (seconds, -t) unlimited\nmax user processes            (-u) 29995\nvirtual memory        (kbytes, -v) unlimited\n-bash-3.00$ id\nuid=101(wof) gid=666(www)\n-bash-3.00$ \n\nWe have run truss again. We have the same types of crashes:\n_mutex_lock_impl & _malloc_unlocked plus some other\n(last time we probably didn't see them as the test was too short?)\n\nOne of the threads in one of the crashes now has sig_coredump\nso you may want to examine that too.\n\nWe attach truss output (in two parts) and stack traces + a summary file.\n\nWe used the same tools and same test configuration as before."}, {"count": 12, "tags": [], "bug_id": 45792, "is_private": false, "text": "Created attachment 22606\ntruss log - a longer test with increased ulimit -n", "id": 120777, "time": "2008-09-19T01:34:39Z", "creator": "jkaczm@gmail.com", "creation_time": "2008-09-19T01:34:39Z", "attachment_id": 22606}, {"count": 13, "tags": [], "bug_id": 45792, "text": "Created attachment 22607\ntruss log - a longer test with increased ulimit -n (part 2)", "id": 120778, "time": "2008-09-19T01:35:41Z", "creator": "jkaczm@gmail.com", "creation_time": "2008-09-19T01:35:41Z", "is_private": false, "attachment_id": 22607}, {"count": 14, "tags": [], "bug_id": 45792, "attachment_id": 22608, "id": 120779, "creation_time": "2008-09-19T01:36:53Z", "time": "2008-09-19T01:36:53Z", "creator": "jkaczm@gmail.com", "text": "Created attachment 22608\nstack traces - a longer test with increased ulimit -n plus a summary file\n\nnote the sig_coredump in one of the crashed threads.", "is_private": false}, {"count": 15, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "Please describe how you build your Apache including the call to the configure script.", "id": 120789, "time": "2008-09-19T06:04:36Z", "bug_id": 45792, "creation_time": "2008-09-19T06:04:36Z", "is_private": false}, {"count": 16, "tags": [], "creator": "jkaczm@gmail.com", "is_private": false, "id": 120791, "attachment_id": null, "bug_id": 45792, "creation_time": "2008-09-19T06:46:46Z", "time": "2008-09-19T06:46:46Z", "text": "Please let me know if details provided in the original post are sufficient. If not, what other information you need."}, {"count": 17, "tags": [], "bug_id": 45792, "text": "More build details:\n\nSYSTEM:\n- SUNW,Sun-Fire-T200\n  - Solaris\n  - SunOS 5.10 Generic_127127-11 sun4v sparc SUNW,Sun-Fire-T200\n  - 8 GB RAM\n\nCOMPILE:\n./configure --with-mpm=worker --enable-cgi --enable-status --enable-proxy\n--enable-proxy-connect --enable-proxy-ftp --enable-proxy-http\n--enable-proxy-ajp --enable-proxy-balancer --enable-cache --enable-disk-cache\n--enable-mem-cache --enable-deflate --enable-nonportable-atomics=yes\n--enable-modules=most --enable-mods-shared=most --enable-maintainer-mode\n--prefix=/opt/apache-cluster \n\nCFLAGS='-DDEBUG -DDEBUGGING -DAP_DEBUG -DAPR_POOL_DEBUG'\nCC=cc\n\nCOMPILER:\ncc -V --> cc: Sun C 5.8 2005/10/13\n\nPlease let us know what other information we could provide to help fix this.", "id": 120865, "time": "2008-09-23T02:03:35Z", "creator": "jkaczm@gmail.com", "creation_time": "2008-09-23T02:03:35Z", "is_private": false, "attachment_id": null}, {"count": 18, "tags": [], "creator": "rpluem@apache.org", "is_private": false, "id": 120869, "attachment_id": null, "bug_id": 45792, "creation_time": "2008-09-23T03:45:25Z", "time": "2008-09-23T03:45:25Z", "text": "This information seems to be sufficient. I will get back to you if I need more information. Sorry for missing this information in the initial post."}, {"count": 19, "tags": [], "bug_id": 45792, "attachment_id": null, "id": 121272, "time": "2008-10-07T07:03:46Z", "creator": "jkaczm@gmail.com", "creation_time": "2008-10-07T07:03:46Z", "is_private": false, "text": "Potentially good news is that we have managed to reproduce the segmentation fault on ubuntu linux using a 2.2.9 build from apache.org and that the problem could *not* be reproduced with 2.2.8 build from the same download site with the very same build flags, test scenario and config files.\n\nPlatform:\n\nubuntu linux 8.04 / 2.6.14 kernel\n\n\nReproduction scenario:\n\n- get apache 2.2.9 sources,\n\n- configure with:\n  ./configure --with-mpm=worker --enable-cgi --enable-status --enable-proxy --enable-proxy-http --enable-proxy-balancer --enable-deflate --prefix=/opt/apache-cluster\n(also tried other modules and settings to the same results)\n\n- make & install,\n\n- use standard configuration with the following additions:\n\nRewriteEngine On\nRewriteRule ^(.+\\.php)$ balancer://php_cluster$1 [P,L,QSA]\nRewriteRule ^/php/(.*)$ balancer://php_cluster/php/$1 [P,L,QSA]\nSetEnv proxy-initial-not-pooled 1\n<Proxy balancer://php_cluster>\n  BalancerMember http://192.168.1.100\n</Proxy>\n\nProxyPassReverse / http://192.168.1.100/\nProxyPreserveHost On\n\n- we used it in combination with a virtual host (!)\n\n(we have intentially reduced the original config to minimal settings and just one balancermember, the problem also occurs on multiple balancer members and with many additional ProxyPass/ProxySet settings).\n\n- one of the tests that seems to crash the server most often is by requesting two files randomly (100,000 requests over 30 seconds is more than enough to reproduce). The files are:\n\n    a) a simple file with 2-3 virtual includes, where included files would be proxied. Example content:\n\n<html><body>\n1\n<!--#include virtual=\"/php/static_small.php\"-->\n2\n<!--#include virtual=\"/php/static.php\"-->\n</body></html>\n\n(so the include files are processed by rewrite rule 1 and would be by rule 2 if not the L flag)\n\n   b) a static file with random content (several alphanumeric chars should do) served directly via proxy, example could be\n    \"/php/static.html\" file (that is processed by rewrite rule number 2 in the example above)\n\nSegfaults should occur very quickly. For us it was usually after just a few requests. The funny thing is that the segfault does not occur if we are testing only the former file (with virtual includes that go to the proxy) and hardly occurs when we are requesting the latter file (a proxied file).\n\nThe problem does not occur on 2.2.8 build.\n\nHopefully this is enough to reproduce the issue. "}, {"count": 20, "tags": [], "creator": "rpluem@apache.org", "text": "(In reply to comment #19)\n> Potentially good news is that we have managed to reproduce the segmentation\n> fault on ubuntu linux using a 2.2.9 build from apache.org and that the problem\n> could *not* be reproduced with 2.2.8 build from the same download site with the\n> very same build flags, test scenario and config files.\n> \n\nThanks for your persistent search. Do you have stack traces from these crashes?\nThey might have interesting differences to the ones on Solaris.\nWhich compiler did you use on Linux?\n", "id": 121275, "attachment_id": null, "bug_id": 45792, "creation_time": "2008-10-07T08:12:52Z", "time": "2008-10-07T08:12:52Z", "is_private": false}, {"count": 21, "tags": [], "bug_id": 45792, "attachment_id": 22691, "id": 121304, "creation_time": "2008-10-08T05:36:07Z", "time": "2008-10-08T05:36:07Z", "creator": "jkaczm@gmail.com", "text": "Created attachment 22691\nCore dump files from gdb / ubuntu\n\nThese are stack traces from all threads from 4 segfaults reproduced on ubuntu 8.04, apache 2.2.9 build (could not reproduce on 2.2.8 build nor distro). \n\nExtracted from gdb.\n\nPlease let us know what other info you need from the core files. We will keep them for the time being.", "is_private": false}, {"count": 22, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "is_private": false, "id": 121308, "time": "2008-10-08T06:39:23Z", "bug_id": 45792, "creation_time": "2008-10-08T06:39:23Z", "text": "(In reply to comment #21)\n> Created an attachment (id=22691) [details]\n> Core dump files from gdb / ubuntu\n> \n> These are stack traces from all threads from 4 segfaults reproduced on ubuntu\n> 8.04, apache 2.2.9 build (could not reproduce on 2.2.8 build nor distro). \n> \n> Extracted from gdb.\n> \n> Please let us know what other info you need from the core files. We will keep\n> them for the time being.\n> \n\nCould you please ensure that you use compiles of httpd that were created with -O2 -g and are unstripped?\nFurthermore could you please issue the following gdb command for each core?\n\nthread apply all bt full"}, {"count": 23, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": 22700, "is_private": false, "id": 121332, "time": "2008-10-09T00:17:27Z", "bug_id": 45792, "creation_time": "2008-10-09T00:17:27Z", "text": "Created attachment 22700\nCore dump files output from gdb / ubuntu (full)\n\nthread apply all bt full,\ncompiled with -O2 -g, unstripped"}, {"count": 24, "tags": [], "creator": "rpluem@apache.org", "is_private": false, "id": 121334, "attachment_id": null, "bug_id": 45792, "creation_time": "2008-10-09T04:04:11Z", "time": "2008-10-09T04:04:11Z", "text": "We are getting closer.\nFirst question did you already added our gdb macros to your gdb config? If not please do so by adding http://svn.eu.apache.org/viewvc/httpd/httpd/trunk/.gdbinit?view=co\nto the file ~/.gdbinit of the user you use to analyse the coredumps. If the file\nis not present simply create it from above download.\n\nFurther analysis. For all core dumps except number 3 please do the following:\n\n1. Go to the thread that has the kill call in its backtrace (for coredump 1 this would be thread 25) via thread <thread number>, so thread 25 for coredump 1.\n2. Issue the following commands and attach the output:\n\nframe 4\ndump_bucket e"}, {"count": 25, "tags": [], "bug_id": 45792, "is_private": false, "text": "Created attachment 22701\nMore info on threads and data structures from core files\n\nUnfortunatelly dump_bucket says \"can't access memory\". We checked pointers directly instead. One of the segfault files (pid 8801) doesn't have the value (it's been optimized out).\n\nHope it helps.", "id": 121345, "time": "2008-10-09T06:54:21Z", "creator": "jkaczm@gmail.com", "creation_time": "2008-10-09T06:54:21Z", "attachment_id": 22701}, {"count": 26, "tags": [], "bug_id": 45792, "attachment_id": null, "id": 121347, "creation_time": "2008-10-09T07:48:01Z", "time": "2008-10-09T07:48:01Z", "creator": "rpluem@apache.org", "text": "(In reply to comment #25)\n\n> \n> Hope it helps.\n> \n\nA little bit. Can you please also issue a\ndump_brigade b\nin all the cases?\n", "is_private": false}, {"count": 27, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": 22703, "text": "Created attachment 22703\nMore info on threads and data structures from core files (dump_brigade)", "id": 121349, "time": "2008-10-09T08:18:24Z", "bug_id": 45792, "creation_time": "2008-10-09T08:18:24Z", "is_private": false}, {"count": 28, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "is_private": false, "id": 121360, "time": "2008-10-09T11:32:58Z", "bug_id": 45792, "creation_time": "2008-10-09T11:32:58Z", "text": "Thanks for your patience. Please add the following to your .gdbinit:\n\ndefine dump_brigade_ex\n    set $bb = (apr_bucket_brigade *)$arg0\n    set $start = $arg1\n    set $bucket = $bb->list.next\n    set $sentinel = ((char *)((&($bb->list)) \\\n                               - ((size_t) &((struct apr_bucket *)0)->link)))\n    printf \"dump of brigade 0x%lx\\n\", (unsigned long)$bb\n\n    printf \"   | type     (address)    | length | \"\n    printf \"data addr  | contents               | rc\\n\"\n    printf \"----------------------------------------\"\n    printf \"----------------------------------------\\n\"\n\n    if $bucket == $sentinel\n        printf \"brigade is empty\\n\"\n    end\n\n    set $j = 0\n    while $bucket != $sentinel\n        printf \"%2d\", $j\n        if $j >= $start\n           dump_bucket_ex $bucket 1\n        end\n        set $j = $j + 1\n        set $bucket = $bucket->link.next\n    end\n    printf \"end of brigade\\n\"\nend\n\nand in gdb please exec\n\ndump_brigade b\ndump_brigade_ex b 3"}, {"count": 29, "tags": [], "bug_id": 45792, "is_private": false, "text": "Created attachment 22705\nPatch against 2.2.x\n\nI think I might got an idea what happened. So in addition to my information request could you please try to apply the attached patch to 2.2.9 and test if you still can produce the segmentation faults?", "id": 121364, "time": "2008-10-09T12:51:08Z", "creator": "rpluem@apache.org", "creation_time": "2008-10-09T12:51:08Z", "attachment_id": 22705}, {"count": 30, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": 22706, "is_private": false, "id": 121388, "time": "2008-10-09T23:59:06Z", "bug_id": 45792, "creation_time": "2008-10-09T23:59:06Z", "text": "Created attachment 22706\nMore info on threads and data structures from core files (dump_brigade_ex)\n\nFor core files with ap_core_output_filter in stack frame 4 by bypassing the first 3 elements in the brigade output we now get memory access error on element 5. \n\nFor those with ap_core_output_filter in frame 5 we get infinite output of some improper data (?). We had to break out of the loop so the report file has only a couple of hundred lines per call."}, {"count": 31, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": 22707, "is_private": false, "id": 121391, "time": "2008-10-10T01:49:12Z", "bug_id": 45792, "creation_time": "2008-10-10T01:49:12Z", "text": "Created attachment 22707\nAfter applying the patch\n\nAfter applying the patch."}, {"count": 32, "tags": [], "bug_id": 45792, "attachment_id": 22708, "id": 121392, "creation_time": "2008-10-10T01:50:38Z", "time": "2008-10-10T01:50:38Z", "creator": "jkaczm@gmail.com", "text": "Created attachment 22708\nPatched proxy_util.c for verification\n\nPatched file (can you diff with your sources please to make sure we merged them properly).", "is_private": false}, {"count": 33, "tags": [], "bug_id": 45792, "text": "Created attachment 22718\nPatch against trunk with some debug messages\n\nCan you please patch your sources with the attached patch? The code flow is the same as in the last patch but it contains some debug statements that should help me to understand certain things better. As I guess that setting the server to LogLevel debug would create too much messages that are not needed I set my debug messages to level error.", "id": 121462, "time": "2008-10-13T03:37:06Z", "creator": "rpluem@apache.org", "creation_time": "2008-10-13T03:37:06Z", "is_private": false, "attachment_id": 22718}, {"count": 34, "tags": [], "bug_id": 45792, "attachment_id": 22719, "id": 121468, "creation_time": "2008-10-13T05:24:03Z", "time": "2008-10-13T05:24:03Z", "creator": "jkaczm@gmail.com", "text": "Created attachment 22719\nerror.log with debug info outputted from your patch", "is_private": false}, {"count": 35, "tags": [], "bug_id": 45792, "attachment_id": 22720, "id": 121470, "creation_time": "2008-10-13T08:26:28Z", "time": "2008-10-13T08:26:28Z", "creator": "rpluem@apache.org", "text": "Created attachment 22720\n Patch against 2.2.x with more debug messages  \n\nThanks for your feedback and your patience. I attached another patch. This one contains even more debug messages and one code change that hopefully fixes your issue. Could you please kindly test this patch as well and provide me the error log file?", "is_private": false}, {"count": 36, "tags": [], "bug_id": 45792, "text": "Created attachment 22723\nerror.log with more debug info, this time no core dumps\n\nCool. It seems like the problem is gone (or at least far less apparent). We have hit the server with 300,000 requests and no segfault so far. In previous tests in this very config it only took 3-4 requests to get it crashed.", "id": 121490, "time": "2008-10-14T04:59:23Z", "creator": "jkaczm@gmail.com", "creation_time": "2008-10-14T04:59:23Z", "is_private": false, "attachment_id": 22723}, {"count": 37, "tags": [], "creator": "rpluem@apache.org", "text": "Created attachment 22729\nPatch against trunk\n\nCould you please recheck this final version of the patch? I should be similar to the last one with the following changes:\n\n1. Removed debug logging\n2. Patch is against trunk instead of 2.2.x and thus patch will report some messages when applying, but this does not hurt.\n\nSo the basic question for this patch is whether httpd core dumps any longer or not. Hopefully the answer is: NO :-).\nI would be also interested in getting to know if the core dumps on your original Solaris based environment are now gone as well if the patch is applied.\n\nThanks again for your cooperation and patience.", "id": 121517, "attachment_id": 22729, "bug_id": 45792, "creation_time": "2008-10-14T12:25:51Z", "time": "2008-10-14T12:25:51Z", "is_private": false}, {"count": 38, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": null, "text": "We have been testing on solaris yesterday and today with the patch (and without for comparison) and it does seem to make a difference.\n\nNo core dumps observed so far. Will keep you updated.\n\nWe will also proceed with the final patch today.", "id": 121522, "time": "2008-10-15T00:39:34Z", "bug_id": 45792, "creation_time": "2008-10-15T00:39:34Z", "is_private": false}, {"count": 39, "tags": [], "bug_id": 45792, "is_private": false, "text": "Any further updates on your tests?", "id": 121718, "time": "2008-10-21T03:10:36Z", "creator": "rpluem@apache.org", "creation_time": "2008-10-21T03:10:36Z", "attachment_id": null}, {"count": 40, "tags": [], "creator": "jkaczm@gmail.com", "text": "Sorry. I have been out of office. \n\nNo segfaults reported so far in the tests (several hours of load testing with many scenarios, including those that intensified crashes).\n\n\n", "id": 121765, "attachment_id": null, "bug_id": 45792, "creation_time": "2008-10-21T23:43:06Z", "time": "2008-10-21T23:43:06Z", "is_private": false}, {"count": 41, "tags": [], "bug_id": 45792, "attachment_id": null, "id": 121770, "time": "2008-10-22T02:34:53Z", "creator": "rpluem@apache.org", "creation_time": "2008-10-22T02:34:53Z", "is_private": false, "text": "Committed to trunk as r706921 (http://svn.apache.org/viewvc?rev=706921&view=rev)."}, {"count": 42, "tags": [], "creator": "rpluem@apache.org", "text": "Created attachment 22827\nPatch against 2.2.x\n\nI found further edge cases that caused one of my reverse proxies to crash. As I determined that the current approach of solving this issue will make the already existing code even more complex as it is now and that there are edge cases that are not fixable by this approach I chose a complete new approach to fix this issue including all edge cases I see. Could you please check this new patch and let me know if it fixes the bug as well?", "id": 122179, "attachment_id": 22827, "bug_id": 45792, "creation_time": "2008-11-04T09:08:32Z", "time": "2008-11-04T09:08:32Z", "is_private": false}, {"count": 43, "tags": [], "bug_id": 45792, "attachment_id": null, "id": 122388, "time": "2008-11-11T13:27:20Z", "creator": "rpluem@apache.org", "creation_time": "2008-11-11T13:27:20Z", "is_private": false, "text": "Latest patch backported to 2.2.x as r713146."}, {"count": 44, "tags": [], "creator": "jkaczm@gmail.com", "attachment_id": null, "text": "we have performed some intensive stress tests of your patch (2.2.9 + the patch from your recent post) in the most error-prone scenarios to no segmentation faults on ubuntu.\n\nThank you.", "id": 122542, "time": "2008-11-17T02:13:43Z", "bug_id": 45792, "creation_time": "2008-11-17T02:13:43Z", "is_private": false}, {"count": 45, "tags": [], "creator": "asm@uezku.kemsu.ru", "text": "*** Bug 48606 has been marked as a duplicate of this bug. ***", "id": 134013, "attachment_id": null, "bug_id": 45792, "creation_time": "2010-01-29T02:00:59Z", "time": "2010-01-29T02:00:59Z", "is_private": false}]