[{"count": 0, "tags": [], "creator": "ihunter@chaffee.com", "text": "After upgrading ant versions, our xmlvalidate tasks are failing when passed a\ndtd sub element.  \n\nSource:\n\n<xmlvalidate lenient=\"yes\" warn=\"yes\" file=\"${web.dir}/WEB-INF/web.xml\"> \n    <dtd publicId=\"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n         location=\"http://java.sun.com/dtd/web-app_2_3.dtd\"/>\n</xmlvalidate>\n\nWorks fine in 1.6.2.  Error in 1.6.5:\n\nBUILD FAILED\nbuild.xml:146: java.lang.IllegalArgumentException: Can only handle valid file: URIs\n\nCommenting out dtd element fixes problem, but is slow to get dtd (probably a\nconnection issue on my side).", "id": 76165, "attachment_id": null, "bug_id": 35269, "creation_time": "2005-06-08T17:02:22Z", "time": "2005-06-08T17:02:22Z", "is_private": false}, {"count": 1, "tags": [], "text": "Please run in debug mode (-d switch) and post the stack trace.\n\nThanks,\nMatt", "attachment_id": null, "bug_id": 35269, "id": 76170, "time": "2005-06-08T18:05:29Z", "creator": "mbenson@apache.org", "creation_time": "2005-06-08T18:05:29Z", "is_private": false}, {"count": 2, "tags": [], "creator": "ihunter@chaffee.com", "text": "Thx for the reply, Matt.\n\nHere tis:\n\nxmlvalidate:\n[xmlvalidate] Validating web.xml... \nresolveEntity: '-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN':\n'http://java.sun.com/dtd/web-app_2_3.dtd'\nApache resolver library not found, internal resolver will be used\nFailed to load Apache resolver: java.lang.NoClassDefFoundError:\norg/apache/xml/resolver/tools/CatalogResolver\nMatching catalog entry found for publicId: '-//Sun Microsystems, Inc.//DTD Web\nApplication 2.3//EN' location: 'http://java.sun.com/dtd/web-app_2_3.dtd'\n\nBUILD FAILED\n/web/projects/build.xml:146: java.lang.IllegalArgumentException: Can only handle\nvalid file: URIs\n        at org.apache.tools.ant.Task.perform(Task.java:373)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1185)\n        at\norg.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:40)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n        at org.apache.tools.ant.Main.runBuild(Main.java:668)\n        at org.apache.tools.ant.Main.startAnt(Main.java:187)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:246)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:67)\nCaused by: java.lang.IllegalArgumentException: Can only handle valid file: URIs\n        at org.apache.tools.ant.launch.Locator.fromURI(Locator.java:111)\n        at org.apache.tools.ant.util.FileUtils.fromURI(FileUtils.java:1261)\n        at\norg.apache.tools.ant.types.XMLCatalog.filesystemLookup(XMLCatalog.java:682)\n        at org.apache.tools.ant.types.XMLCatalog.access$100(XMLCatalog.java:119)\n        at\norg.apache.tools.ant.types.XMLCatalog$InternalResolver.resolveEntity(XMLCatalog.java:830)\n        at org.apache.tools.ant.types.XMLCatalog.resolveEntity(XMLCatalog.java:407)\n        at org.apache.xerces.util.EntityResolverWrapper.resolveEntity(Unknown\nSource)\n        at org.apache.xerces.impl.XMLEntityManager.resolveEntity(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at\norg.apache.tools.ant.taskdefs.optional.XMLValidateTask.doValidate(XMLValidateTask.java:458)\n        at\norg.apache.tools.ant.taskdefs.optional.XMLValidateTask.execute(XMLValidateTask.java:277)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        ... 10 more\n--- Nested Exception ---\njava.lang.IllegalArgumentException: Can only handle valid file: URIs\n        at org.apache.tools.ant.launch.Locator.fromURI(Locator.java:111)\n        at org.apache.tools.ant.util.FileUtils.fromURI(FileUtils.java:1261)\n        at\norg.apache.tools.ant.types.XMLCatalog.filesystemLookup(XMLCatalog.java:682)\n        at org.apache.tools.ant.types.XMLCatalog.access$100(XMLCatalog.java:119)\n        at\norg.apache.tools.ant.types.XMLCatalog$InternalResolver.resolveEntity(XMLCatalog.java:830)\n        at org.apache.tools.ant.types.XMLCatalog.resolveEntity(XMLCatalog.java:407)\n        at org.apache.xerces.util.EntityResolverWrapper.resolveEntity(Unknown\nSource)\n        at org.apache.xerces.impl.XMLEntityManager.resolveEntity(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at\norg.apache.tools.ant.taskdefs.optional.XMLValidateTask.doValidate(XMLValidateTask.java:458)\n        at\norg.apache.tools.ant.taskdefs.optional.XMLValidateTask.execute(XMLValidateTask.java:277)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1185)\n        at\norg.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:40)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n        at org.apache.tools.ant.Main.runBuild(Main.java:668)\n        at org.apache.tools.ant.Main.startAnt(Main.java:187)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:246)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:67)\n", "id": 76180, "attachment_id": null, "bug_id": 35269, "creation_time": "2005-06-08T20:46:44Z", "time": "2005-06-08T20:46:44Z", "is_private": false}, {"count": 3, "tags": [], "text": "Definitely a bug, you are correct.  :(", "attachment_id": null, "bug_id": 35269, "id": 76187, "time": "2005-06-08T23:21:06Z", "creator": "mbenson@apache.org", "creation_time": "2005-06-08T23:21:06Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 35269, "attachment_id": null, "id": 76205, "time": "2005-06-09T15:05:45Z", "creator": "mbenson@apache.org", "creation_time": "2005-06-09T15:05:45Z", "is_private": false, "text": "This should be fixed in CVS HEAD.  Sorry for the breakage and thanks for the \nreport. :("}, {"count": 5, "tags": [], "bug_id": 35269, "attachment_id": null, "id": 76295, "time": "2005-06-11T08:40:32Z", "creator": "jglick@apache.org", "creation_time": "2005-06-11T08:40:32Z", "is_private": false, "text": "Fixed in 1.7 then?"}, {"count": 6, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "yep, unless fire and brimstone rain down and force (I hesitate even to say it) \nfurther 1.6.x releases...", "id": 76297, "time": "2005-06-11T08:49:23Z", "bug_id": 35269, "creation_time": "2005-06-11T08:49:23Z", "is_private": false}]