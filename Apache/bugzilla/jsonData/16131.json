[{"count": 0, "tags": [], "bug_id": 16131, "text": "If I execute a build command, I would like to suppress unnecessary output.  I \nonly want to see errors and warnings.\n\nWhen I do \"ant -quiet -emacs >2 /dev/null\" I can suppress nearly all non-error, \nnon-warning output, but I still get messages like:\n\nBUILD SUCCESSFUL\nTotal time: 11 seconds\n\nWhich I think should be suppressed as part of \"-quiet\".", "id": 29447, "time": "2003-01-15T19:10:28Z", "creator": "mccartney@mayaviz.com", "creation_time": "2003-01-15T19:10:28Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 16131, "text": "No much changes in Ant that breaks backward compatibility / behavior...\n\nSounds like you want a new -readquiet or -silent switch that also suppresses \nthe 'BUILD SUCCESSFUL / FAILED' & 'Total time' lines. Of course, you'd get a \nbetter chance to have it appear in Ant if you provide a patch for it ;-) --DD", "id": 29449, "time": "2003-01-15T19:18:52Z", "creator": "ddevienne@lgc.com", "creation_time": "2003-01-15T19:18:52Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 16131, "attachment_id": null, "is_private": false, "id": 29461, "time": "2003-01-15T20:25:06Z", "creator": "mccartney@mayaviz.com", "creation_time": "2003-01-15T20:25:06Z", "text": "Changing the \"buildFinished\" method in \"org.apache.tools.ant.DefaultLogger\" to \nthe following fixes the issue.  If msgOutputLevel is \"error\" or \"warning\" \n(i.e., as with -quiet), the message is suppressed.  Otherwise, it will be \nprinted normally.\n\n    public void buildFinished(BuildEvent event) {\n        Throwable error = event.getException();\n        StringBuffer message = new StringBuffer();\n\n        if (error == null) {\n            if (msgOutputLevel > Project.MSG_WARN) {\n                message.append(StringUtils.LINE_SEP);\n                message.append(\"BUILD SUCCESSFUL\");\n            }\n        } else {\n            message.append(StringUtils.LINE_SEP);\n            message.append(\"BUILD FAILED\");\n            message.append(StringUtils.LINE_SEP);\n\n            if (Project.MSG_VERBOSE <= msgOutputLevel ||\n                !(error instanceof BuildException)) {\n                message.append(StringUtils.getStackTrace(error));\n            } else {\n                if (error instanceof BuildException) {\n                    message.append(error.toString()).append(lSep);\n                } else {\n                    message.append(error.getMessage()).append(lSep);\n                }\n            }\n        }\n \n        if (msgOutputLevel > Project.MSG_WARN) {\n            message.append(StringUtils.LINE_SEP);\n            message.append(\"Total time: \");\n            message.append(formatTime(System.currentTimeMillis() - startTime));\n        }\n\n        String msg = message.toString();\n        if (error == null) {\n          if (msg.length() > 0) {\n              printMessage(msg, out, Project.MSG_VERBOSE);\n          }\n        } else {\n            printMessage(msg, err, Project.MSG_ERR);\n        }\n        log(msg);\n    }\n"}, {"count": 3, "tags": [], "bug_id": 16131, "text": "Why not just create your own logger?\n", "id": 29477, "time": "2003-01-15T22:17:43Z", "creator": "conor@apache.org", "creation_time": "2003-01-15T22:17:43Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 16131, "text": "You could create your own logger, but it just seems like it you specify \"-\nquiet\", the correct behavior should be to suppress unnecessary messages.\n\nAnother possibility would be to have ant send errors and warnings to System.err \nrather than System.out.  That way I could just say \"ant -emacs 1> /dev/null\" \nand only the errors and warnings would go to the console.\n", "id": 29608, "time": "2003-01-17T15:34:33Z", "creator": "mccartney@mayaviz.com", "creation_time": "2003-01-17T15:34:33Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 16131, "text": "I second this request - I'm calling ant from as a cronjob on sourceforge and get\nan email if anything is printed to stdout. By specifying -quiet (or possibly a\nnew -veryquiet) I'd expect ant to not report the 'information'-level message:\n\nBUILD SUCCESSFUL\nTotal time: 34 seconds\n\nSupressing this message should be supported (it's a trivial fix as posted in\nanother comment) so not everyone automating with ant has to write his/her own\nlogger.\n\nThanks", "id": 68317, "time": "2004-12-11T17:30:43Z", "creator": "nils@meiers.net", "creation_time": "2004-12-11T17:30:43Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 16131, "attachment_id": 25511, "is_private": false, "id": 137291, "time": "2010-06-03T00:08:22Z", "creator": "terwork@gmail.com", "creation_time": "2010-06-03T00:08:22Z", "text": "Created attachment 25511\nAdds a new argument -veryquiet which suppresses \"Build Successful\" message and outputs nothing on no errors and warnings.\n\nI know this is an old bug, and nobody wanted to change existing functionality. But it was trivial and just waiting to be done, so I did it. The patch I'm submitting takes a new \"-veryquiet\" argument which suppresses all messages if there are no errors or warnings."}, {"count": 7, "tags": [], "bug_id": 16131, "text": "I would agree that the existing -quiet argument ought to be fixed, rather than introducing a new option.", "id": 137453, "time": "2010-06-08T14:58:43Z", "creator": "jglick@apache.org", "creation_time": "2010-06-08T14:58:43Z", "is_private": false, "attachment_id": null}, {"count": 8, "text": "I was going to do the same thing, but thought that preserving backward behavior is a better idea. Here's what I'll do: I'm going to submit a new patch, and let the core members decide. Given that this design decision has not been resolved in 8 years though, I don't think that this'll be resolved soon.", "bug_id": 16131, "is_private": false, "id": 137594, "time": "2010-06-12T15:39:35Z", "creator": "terwork@gmail.com", "creation_time": "2010-06-12T15:39:35Z", "tags": [], "attachment_id": null}]