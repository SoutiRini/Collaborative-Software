[{"count": 0, "tags": [], "creator": "angelcervera@gmail.com", "text": "Created attachment 29896\nExample for testing\n\nWhen an application uses JSR223 and is executed from ant, it's not possible obtain ScriptEngine for \"JavaScript\".\nSame application, from command line, works perfectly.\n\nThis error is obtain:\nScriptEngineManager providers.next(): javax.script.ScriptEngineFactory: Provider com.sun.script.javascript.RhinoScriptEngineFactory not found\n\nI attach an eclipse project with this very simple example:\n\nClass:\npackage testing;\n\nimport javax.script.ScriptEngine;\nimport javax.script.ScriptEngineManager;\n\npublic class TestingGetEngineJavascript {\n\n\tpublic static void main(String[] args) {\n\t\tnew TestingGetEngineJavascript().test();\n\n\t}\n\t\n\tpublic void test() {\n\t\tScriptEngineManager manager = new ScriptEngineManager();\n        ScriptEngine engine = manager.getEngineByName(\"JavaScript\");\n        if(engine == null) {\n        \tthrow new RuntimeException(\"Upps!!!!!!! Not ScriptEngine found for JavaScript\");\n        } else {\n        \tSystem.out.println(\"ScriptEngine found for JavaScript\");\n        }\n\t}\n\n}\n\n\nAnt:\n<project name=\"test\" default=\"test\" basedir=\".\">\n\t<target name=\"test\">\n\t\t<java classpath=\"dist/testAntJSR223.jar\" classname=\"testing.TestingGetEngineJavascript\">\n\t\t</java>\n\t</target>\n</project>", "id": 164886, "time": "2013-01-25T10:26:39Z", "bug_id": 54484, "creation_time": "2013-01-25T10:26:39Z", "is_private": false, "attachment_id": 29896}, {"count": 1, "tags": [], "creator": "angelcervera@gmail.com", "is_private": false, "text": "There are a \"temporal\" workaround: use fork=\"true\"\n\nBut I think that it's a bug.", "id": 164887, "time": "2013-01-25T10:58:41Z", "bug_id": 54484, "creation_time": "2013-01-25T10:58:41Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 54484, "attachment_id": null, "is_private": false, "id": 164903, "time": "2013-01-25T18:44:02Z", "creator": "jglick@apache.org", "creation_time": "2013-01-25T18:44:02Z", "text": "You should always use fork=\"true\" for user programs. fork=\"false\" is only appropriate for running things that you expect to interact with the live Ant internal data structures.\n\nWhether it is a (fixable) bug that ScriptEngineFactory behaves this way for JS inside Ant, I am not sure."}, {"count": 3, "attachment_id": null, "bug_id": 54484, "is_private": false, "id": 164905, "time": "2013-01-26T07:49:32Z", "creator": "angelcervera@gmail.com", "creation_time": "2013-01-26T07:49:32Z", "tags": [], "text": "This JSR223 application is an utility to process files. At the moment, I execute this directly as an application, but my idea is build an ANT Plugin (Now I'm busy, but in a short time I must to do).\n\nIn other cases, when I built a ANT Plugin, I didn't have to modified my code.\nI suppose that I could force execution of the plugin as a fork. Is this supposition correct?"}]