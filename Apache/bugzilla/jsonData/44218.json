[{"count": 0, "tags": [], "bug_id": 44218, "text": "First some background:\nI'm using www-servers/apache-2.2.6-r5 from Gentoo portage.\n\nI have configured mod_mime to serve both .svg and .svgz files as \"Content-Type:\nimage/svg+xml\", but to add \"Content-Encoding: x-gzip\" to .svgz files. The\nheaders are served correctly to clients (checked with wget -S).\n\nI have configured mod_autoindex to use image-svg+xml.png as icon for\nimage/svg+xml and unknown.png as DefaultIcon. There is no single\nAddIconByEncoding directive in my configuration files.\n\nNow to my problem:\nIn directory listings all .svg file gets image-svg+xml.png as icon, but all\n.svgz files gets unknown.png, even though it has the correct content-type.\n\nI'm also having the same problem with .tar.gz, .tar.bz2, .xcf.gz and xcf.bz2,\neven though they get served with the correct content type, and .tar and .xcf\nfiles work. In fact, I have not found a single file with a content-encoding that\ngets the correct icon, they all get unknown.png.", "id": 112788, "time": "2008-01-13T01:08:59Z", "creator": "jon@severinsson.net", "creation_time": "2008-01-13T01:08:59Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "Created attachment 21379\nMy mod_mime configuration", "attachment_id": 21379, "id": 112789, "creator": "jon@severinsson.net", "time": "2008-01-13T01:10:15Z", "bug_id": 44218, "creation_time": "2008-01-13T01:10:15Z", "is_private": false}, {"count": 2, "tags": [], "text": "Created attachment 21380\nMy mod_autoindex configuration", "is_private": false, "id": 112790, "creator": "jon@severinsson.net", "time": "2008-01-13T01:10:51Z", "bug_id": 44218, "creation_time": "2008-01-13T01:10:51Z", "attachment_id": 21380}, {"count": 3, "tags": [], "bug_id": 44218, "attachment_id": null, "id": 120391, "time": "2008-09-05T05:08:58Z", "creator": "rahul.g.nair@gmail.com", "creation_time": "2008-09-05T05:08:58Z", "is_private": false, "text": "confirmed in trunk (solaris 11 sparc)\n"}, {"count": 4, "tags": [], "bug_id": 44218, "attachment_id": 22528, "id": 120395, "time": "2008-09-05T06:24:24Z", "creator": "rahul.g.nair@gmail.com", "creation_time": "2008-09-05T06:24:24Z", "is_private": false, "text": "Created attachment 22528\nFind the icon (item) by checking the directive value first"}, {"attachment_id": null, "tags": [], "bug_id": 44218, "text": "I believe the patch is wrong.  If icons-by-encoding are present they should\noverride icons-by-type.  However, you were right that the existing code was\nborked.  I believe the logic should be starting with a stanza;\n\nif (content_encoding && p->type == BY_ENCODING)\n\nand continue from there.", "count": 5, "id": 120407, "time": "2008-09-05T12:31:58Z", "creator": "wrowe@apache.org", "creation_time": "2008-09-05T12:31:58Z", "is_private": false}, {"count": 6, "tags": [], "creator": "rahul.g.nair@gmail.com", "attachment_id": null, "text": "(In reply to comment #5)\n> I believe the patch is wrong.  If icons-by-encoding are present they should\n> override icons-by-type.\n\n- I couldn't find the weights of each (path|type|encoding) in the documentation so I assumed the the order of directives mattered.\n- will update the patch.", "id": 120412, "time": "2008-09-06T03:22:53Z", "bug_id": 44218, "creation_time": "2008-09-06T03:22:53Z", "is_private": false}, {"count": 7, "tags": [], "creator": "rahul.g.nair@gmail.com", "attachment_id": 22539, "text": "Created attachment 22539\nmake sure that by encoding can override by type\n\nAlso cleaned up the logic a little bit and added some comments.", "id": 120445, "time": "2008-09-08T04:51:40Z", "bug_id": 44218, "creation_time": "2008-09-08T04:51:40Z", "is_private": false}]