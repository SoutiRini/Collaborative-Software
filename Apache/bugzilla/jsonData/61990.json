[{"count": 0, "tags": [], "creator": "arthur.garnier@externe.e-i.com", "is_private": false, "text": "Hi,\n\nI'm trying to allow user depending of a URI match with LDAP. \n\nMy conf is like this : \n\n<If \"%{REQUEST_URI} =~ /logs_[a-z0-9]*.[A-Z0-9]{4}/\">\nSetEnvIf Request_URI \"/logs_[a-z0-9]*.([A-Z0-9]*)\" VAR=$1\nAuthLDAPURL ldaps://ldap-${Env}.XXXXX.com:1234/DC=XXXXX,DC=com?userPrincipalName\nAuthLDAPBindDN 'CN=reader ,OU=YYYYY,OU=YYYYY,DC=XXX,DC=XXXXX,DC=com'\nAuthLDAPBindPassword *********\n<RequireAll>\n    Require valid-user\n    Require ldap-filter memberof:1.2.840.113556.1.4.1941:=CN=%{ENV:VAR}_unixlogs,OU=XXXXXX,OU=XXXXXXXXXXXX,DC=XXXXX,DC=com\n</RequireAll>\n</If>\n\nBut in logs I get : \n\nJan 11 14:18:31 XXXXXXX httpd: XXXX|XXXXXXXXX|t=\"Thu Jan 11 14:18:31 2018\"  rip=\"XXXXXXXXXXXX\" ip=\"-\" uid=\"XXXXXXXXXXXX\" severity=\"authnz_ldap:debug\" v=\"XXXXXXXXXX\" msg=\"AH01743: auth_ldap authorize: checking filter memberof:1.2.840.113556.1.4.1941:=CN=%{ENV:VAR}_unixlogs,OU=XXXXXXXX,OU=XXXXXXX,DC=XXXXX,DC=com\"\n\n\nI also tried to add  :\nRequire env ROB\n\nAnd this Require returns \"Granted\"\n\nJuste in case, in the ldap-filter condition I tried several syntaxes (even some with no sense):\n%{VAR}, ${VAR}, $VAR, %VAR, %{VAR}e, %{ENV:VAR}\n\n\nThe module documentation provides a similar exemple with ldap-groupe :\n\nAuthLDAPURL ldap://ldap.example.com/o=Example?uid\nRequire ldap-group cn=%{SERVER_NAME}, o=Example\n\n\nIs there a trick ? It's a bug ?\n\nThanks in advance !\nRegards", "id": 203222, "time": "2018-01-11T16:05:52Z", "bug_id": 61990, "creation_time": "2018-01-11T16:05:52Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "arthur.garnier@externe.e-i.com", "text": "Just in addition, I have some restriction and I have to do all this stuff in .htaccess", "id": 203223, "time": "2018-01-11T16:08:54Z", "bug_id": 61990, "creation_time": "2018-01-11T16:08:54Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 61990, "text": "can you try on a \"real\" and recent 2.4.x release and not 2.4.6 (presumably w/ years of redhat fixes?).  The code appears to be there.", "id": 203225, "time": "2018-01-11T16:40:58Z", "creator": "covener@gmail.com", "creation_time": "2018-01-11T16:40:58Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 61990, "text": "Unfortunatly no, I'm stuck with this version, we only have RedHat distros...", "id": 203233, "time": "2018-01-12T09:10:27Z", "creator": "arthur.garnier@externe.e-i.com", "creation_time": "2018-01-12T09:10:27Z", "tags": [], "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 61990, "text": "I'd suggest filing a bug with RedHat, with your package version, because we don't even know what code you have.", "id": 203237, "time": "2018-01-12T12:34:48Z", "creator": "covener@gmail.com", "creation_time": "2018-01-12T12:34:48Z", "tags": [], "is_private": false}]