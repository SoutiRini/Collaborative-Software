[{"count": 0, "tags": [], "text": "In the file:\nhttps://svn.apache.org/repos/asf/apr/apr/branches/1.6.x/locks/win32/proc_mutex.c\n\nFunction:\nAPR_DECLARE(apr_status_t) apr_proc_mutex_create(apr_proc_mutex_t **mutex,\n                                                const char *fname,\n                                                apr_lockmech_e mech,\n                                                apr_pool_t *pool);\n\nThe pointer to the string passed to the function is stored in the newly created structure. \n(*mutex)->fname = fname;\n\nThis is fine for static strings but strings on the stack or dynamically allocated will point to garbage when (*mutex)->fname is accessed.\n\nThe structure pointer is accessed in the function: \nAPR_DECLARE(const char *) apr_proc_mutex_lockfile(apr_proc_mutex_t *mutex);\n\nMy guess is that:\n(*mutex)->fname = fname;\n\nShould be:\n(*mutex)->fname = mutexkey;\nOr:\n(*mutex)->fname = fname? apr_pstrdup(pool, fname) : NULL;", "attachment_id": null, "id": 174952, "creator": "Harry.Tongelidis@misys.com", "time": "2014-04-30T21:00:01Z", "bug_id": 56477, "creation_time": "2014-04-30T21:00:01Z", "is_private": false}]