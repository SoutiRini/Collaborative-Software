[{"count": 0, "tags": [], "bug_id": 57966, "text": "Tomcat 8 failed to compile the JSPs\n\njava.io.IOException: tmpFile.renameTo(classFile) failed\n\nLooks like tomcat is not able to or not doing enough to rename a the compiled jsp temporary class file (.classtmp) to a class file\n\nI can see .classtemp files in the work directory. If I manually rename them everything is fine .\n\nThe problem noticed in version Tomcat 8.0.22 and Tomcat 8.0.23 with Java 8.0.45\n\nNo issues in version Tomcat 8.0.22 and Tomcat 8.0.23 with Java 8.0.31\n\nTomcat 8.0.20 works fine with both versions of the Java\n\nI cleaned the work folder but this happens all the time.", "id": 183155, "time": "2015-05-28T10:42:34Z", "creator": "anoopaythala@gmail.com", "creation_time": "2015-05-28T10:42:34Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 57966, "text": "Full stack trace please", "id": 183156, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2015-05-28T10:57:50Z", "time": "2015-05-28T10:57:50Z", "is_private": false}, {"count": 2, "tags": [], "text": "Hi,\n\nPlease provide also a sample JSP that can be used to reproduce the issue.\n\nI tested Tomcat 8.0.23 with Java SE 8.0.45 and also JSP Servlet configuration below and Tomcat's JSP examples are working without any problems.\n\n        <init-param>\n            <param-name>compilerSourceVM</param-name>\n            <param-value>1.8</param-value>\n        </init-param>\n        <init-param>\n            <param-name>compilerTargetVM</param-name>\n            <param-value>1.8</param-value>\n        </init-param>\n\n\nRegards,\nVioleta", "attachment_id": null, "id": 183157, "creator": "violetagg@apache.org", "time": "2015-05-28T11:07:21Z", "bug_id": 57966, "creation_time": "2015-05-28T11:07:21Z", "is_private": false}, {"count": 3, "tags": [], "text": "Full Stack Trace given below\n\nUnable to compile class for JSP\n\norg.apache.jasper.JasperException: Unable to compile class for JSP\nat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:600)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:363)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:721)\nat org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:584)\nat org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:523)\nat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:934)\nat org.apache.jsp.WEB_002dINF.jsp.decorators.htmlShell_jsp._jspService(htmlShell_jsp.java:656)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:438)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:721)\nat org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:584)\nat org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:523)\nat com.opensymphony.module.sitemesh.filter.PageFilter.writeDecorator(PageFilter.java:173)\nat com.opensymphony.module.sitemesh.filter.PageFilter.applyDecorator(PageFilter.java:158)\nat com.financial.ngp.web.filter.NgpPageFilter.doFilter(NgpPageFilter.java:60)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat com.financial.ngp.web.filter.GZipFilter.doFilter(GZipFilter.java:87)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat com.financial.ngp.web.filter.P3pFilter.doFilter(P3pFilter.java:49)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\nat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:617)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\nat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(AprEndpoint.java:2463)\nat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:2452)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.lang.Thread.run(Thread.java:745)\n\nCaused by: java.io.IOException: tmpFile.renameTo(classFile) failed\nat org.apache.jasper.compiler.SmapUtil$SDEInstaller.install(SmapUtil.java:205)\nat org.apache.jasper.compiler.SmapUtil.installSmap(SmapUtil.java:163)\nat org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:465)\nat org.apache.jasper.compiler.Compiler.compile(Compiler.java:361)\nat org.apache.jasper.compiler.Compiler.compile(Compiler.java:336)\nat org.apache.jasper.compiler.Compiler.compile(Compiler.java:323)\nat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:585)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:363)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:721)\nat org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:584)\nat org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:523)\nat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:934)\nat org.apache.jsp.WEB_002dINF.jsp.decorators.htmlShell_jsp._jspService(htmlShell_jsp.java:656)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:438)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:721)\nat org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:584)\nat org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:523)\nat com.opensymphony.module.sitemesh.filter.PageFilter.writeDecorator(PageFilter.java:173)\nat com.opensymphony.module.sitemesh.filter.PageFilter.applyDecorator(PageFilter.java:158)\nat com.financial.ngp.web.filter.NgpPageFilter.doFilter(NgpPageFilter.java:60)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat com.financial.ngp.web.filter.GZipFilter.doFilter(GZipFilter.java:87)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat com.financial.ngp.web.filter.P3pFilter.doFilter(P3pFilter.java:49)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\nat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:617)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\nat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\nat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:668)\nat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.doRun(AprEndpoint.java:2463)\nat org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:2452)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.lang.Thread.run(Thread.java:745)", "attachment_id": null, "bug_id": 57966, "id": 183158, "time": "2015-05-28T11:16:37Z", "creator": "anoopaythala@gmail.com", "creation_time": "2015-05-28T11:16:37Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 57966, "attachment_id": null, "text": "Assuming this happens for you on Windows: there's a list of external reasons that can make this happen, including real-time virus scanning and long path names.\n\nCould you check, how long the path name for your tomcat work directory is and also do a little retest with switched off real-time virus scanning?\n\nAny changes you have made to the configuration of the jsp servlet in the tomcat conf/web.xml?\n\nAnd as Violeta already said: a self-contained reproduction case would be great.\n\nThanks\n\nRainer", "id": 183160, "time": "2015-05-28T11:28:27Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2015-05-28T11:28:27Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 57966, "text": "Dropping the severity to normal since this looks like an isolated rather than a general problem.", "id": 183183, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2015-05-29T06:43:27Z", "time": "2015-05-29T06:43:27Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 57966, "text": "No response to request for further info and unable to reproduce.", "id": 183383, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2015-06-09T10:00:06Z", "time": "2015-06-09T10:00:06Z", "is_private": false}]