[{"count": 0, "tags": [], "creator": "mario.winterer@scch.at", "attachment_id": null, "is_private": false, "id": 58545, "time": "2004-06-02T13:54:46Z", "bug_id": 29342, "creation_time": "2004-06-02T13:54:46Z", "text": "If a single page directive is split into multiple instances (according to \nJSP.2.10.1 \"The page Directive\"), the \"pageEncoding\" attribute is ignored \nunder the following conditions:\n1) The page directive that contains the \"pageEncoding\" attribute is NOT \ndefined in the same instance as the \"contentType\" attribute.\n2) The page directive that contains the \"pageEncoding\" attribute appeares \nAFTER the directive that contains the contentType\" attribute.\n\nIf both conditions are true, pageEncoding is ignored and instead, the \ncharacter encoding specified by the \"contentType\" attribute seems to be used!\n\nexample 1:\n<%@page contentType=\"text/html; charset=UTF-8\"%>\n<%@page pageEncoding=\"ISO-8859-1\"%>\n\nused charset: I don't know, but it is NOT ISO-8859-1, because special LATIN-1 \ncharacters are \"unreadable\" in the generated java servlet code.\n\nexample 2:\n<%@page pageEncoding=\"ISO-8859-1\"%>\n<%@page contentType=\"text/html; charset=UTF-8\"%>\n\nused charset: ISO-8859-1 (which is correct!)\n\nAt least it is a bug that the page directives are position dependent! (see \nJSP.2.10.1 \"The page Directive\")."}, {"count": 1, "tags": [], "text": "Created attachment 11725\nTestcase (JSP): pageEncoding attribute is ignored!", "is_private": false, "id": 58546, "creation_time": "2004-06-02T14:00:49Z", "time": "2004-06-02T14:00:49Z", "creator": "mario.winterer@scch.at", "bug_id": 29342, "attachment_id": 11725}, {"count": 2, "tags": [], "creator": "mario.winterer@scch.at", "is_private": false, "text": "Created attachment 11726\nTestcase (JSP): pageEncoding attribute is regarded!", "id": 58547, "time": "2004-06-02T14:01:56Z", "bug_id": 29342, "creation_time": "2004-06-02T14:01:56Z", "attachment_id": 11726}, {"count": 3, "tags": [], "bug_id": 29342, "text": "Please test the latest stable release, 5.0.25 at the time of this writing: \n5.0.16 is a bit aged and numerous JSP-related bug fixes have been done since, \nso this issue may no longer exist.", "id": 58554, "time": "2004-06-02T14:58:17Z", "creator": "yoavs@computer.org", "creation_time": "2004-06-02T14:58:17Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 29342, "is_private": false, "text": "I'm not sure I understand what you mean by \"pageEncoding is ignored\".\n\nNotice that \"pageEncoding\" refers to the encoding of the JSP page to be parsed,\nnot the encoding of the generated servlet code.\n\nWith the latest Tomcat release, both your examples yield the following statement\nin the generated servlet code:\n\n  response.setContentType(\"text/html; charset=UTF-8\");\n\nas expected.", "id": 58563, "time": "2004-06-02T16:57:50Z", "creator": "jan.luehe@sun.com", "creation_time": "2004-06-02T16:57:50Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "mario.winterer@scch.at", "is_private": false, "count": 5, "id": 58598, "time": "2004-06-03T08:36:51Z", "bug_id": 29342, "creation_time": "2004-06-03T08:36:51Z", "text": "Yes I know, \"pageEncoding\" has nothing to do with the generated servlet code.\n\nAnd of course, in both my examples, the generated servlet code is the same, \nbut in my error-example, the original JSP code is not parsed using the \ncharacter encoding specified by the \"pageEncoding\" attribute, but the one \nspecified by the charset-part of the \"contentType\" attribute. \nThe \"pageEncoding\" settings are simply ignored! As an effect, special chars in \nthe JSP code (e.g. String s = \"\u00e4\" [a german umlaut]) are treated incorrectly \nif pageEncoding is ISO-8859-1 while the contentType-charset is UTF-8.\n\nThis bug is not in release 5.0.26 any more, but in the following tomcat \nreleases:\n\n5.0.16\n4.1.24\n4.1.30\n\nIs there a way to transfer this bug to the tomcat 4.1 bug-database?"}, {"count": 6, "attachment_id": null, "bug_id": 29342, "text": "OK, this bug is a duplicate of 27517, which I fixed on 2004/03/08.\nI am going to mark it as such.\n\nIf you want to file this bug against 4.1.x, you need to create a new bug, I\nthink.", "id": 58648, "time": "2004-06-03T16:42:35Z", "creator": "jan.luehe@sun.com", "creation_time": "2004-06-03T16:42:35Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "jan.luehe@sun.com", "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of 27517 ***", "id": 58649, "time": "2004-06-03T16:43:12Z", "bug_id": 29342, "creation_time": "2004-06-03T16:43:12Z", "is_private": false}]