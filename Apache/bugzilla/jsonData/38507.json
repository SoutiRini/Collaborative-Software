[{"count": 0, "tags": [], "creator": "paroz@email.ch", "attachment_id": null, "is_private": false, "id": 85410, "time": "2006-02-04T14:47:21Z", "bug_id": 38507, "creation_time": "2006-02-04T14:47:21Z", "text": "The <quote> XML tag is converted in French with a \u00ab followed with a non-breaking\nspace. In the body (<para>) text, non-breaking space seems to be respected.\nBut I have this sequence in a chapter title (Eg: <chapter><title>Some\n<quote>text</quote></title></chapter>). In this case, the PDF output of the\ntitle did not respect the non breaking space and broke the line just after the \"\u00ab\".\nI've checked the fo source produced by XSL and it contains really the\nnon-breaking space sequence.\n\nFYI, fop 0-20-5 did this correctly."}, {"count": 1, "attachment_id": 17585, "creator": "paroz@email.ch", "text": "Created attachment 17585\nfo source for reproducing bug", "id": 85411, "time": "2006-02-04T14:51:44Z", "bug_id": 38507, "creation_time": "2006-02-04T14:51:44Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 38507, "is_private": false, "text": "Claude,\n\nthank you for the problem report. I had a quick look at it and can confirm that \nit appears to be a bug in Fop 0.91.\n\nTechnical background: The Knuth sequences generated for a NBSP do not actually \nprevent (in some cases at least) for the line to be broken at the NBSP. In \nTextLayoutManager.createElementsForASpace when a NBSP is encountered a normal \nsequence as for an ordinary space is generated and simply prefixed with an \ninfinite penalty. This is not enough to prevent breaks within some of the \nsequences. However, it needs some more thought on how to best fix it.", "id": 85412, "time": "2006-02-04T16:26:20Z", "creator": "manuel@apache.org", "creation_time": "2006-02-04T16:26:20Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "jeremias@apache.org", "attachment_id": null, "is_private": false, "id": 85416, "time": "2006-02-04T18:39:33Z", "bug_id": 38507, "creation_time": "2006-02-04T18:39:33Z", "text": "First step towards fixing the problem is adding a test case:\nhttp://svn.apache.org/viewcvs?rev=374892&view=rev\n\nIf anyone is interested I've got a quick fix / hack for this. It doesn't fix the\ntest case as it should but it fixes the symptom in FOP Trunk. But better do it\nright. That's why I didn't commit the fix."}, {"count": 4, "tags": [], "text": "ad comment #2:\n\"... when a NBSP is encountered a normal sequence as for an ordinary space is generated and simply \nprefixed with an infinite penalty.\"\n\nSo, does this 'prefixed' mean a NBSP currently only prevents breaking _before_ the space (breaking after it \n--or before the next glue/box-- could still be considered 'possible/desirable')? If so, the effect we need to \nachieve would be something analogous to having:\n<fo:character character=\"&#xA0;\" keep-with-next.within-line=\"always\" />\n\n", "is_private": false, "bug_id": 38507, "id": 85433, "time": "2006-02-05T12:59:26Z", "creator": "adelmelle@apache.org", "creation_time": "2006-02-05T12:59:26Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "Jeremias, no that is not it IMO. Knuth doesn't break between elements as such. \nThe glue or penalty element itself is the break opportunity and is discarded \nwhen used as a break. Therefore, IMO we are not breaking before or after a \nspace or NBSP but at the space/NBSP.\n\nThe problem is the coding model used for Knuth element element generation for \nspaces is flawed. What is done is that the only difference between normal space \nand NBSP is an infinite penalty at the beginning of the sequence. However, some \nsequences are pretty long and involve multiple pen-glue combinations and \ntherefore break opportunities further into the sequence. We probably need to \nseparate this more cleanly. Have one function for non breaking elastic elements \n(e.g. NBSP) and one function for breaking eleastic elements (e.g. SPACE). The \nnon breaking sequences are probably very simple:\n\n1. Justified text: pen INF + elastic glue\n2. All other justification modes: either just a box of the width of the space \nor pen INF + fixed width glue.\n\nCurious what Luca and others think. Are the above two cases OK for NBSP or have \nI oversimplified and missed something, that is for the text-align values other \nthen \"justify\", that is \"start\", \"center\", \"end\", is it enough to just reserve \na fixed width for the NBSP?", "is_private": false, "bug_id": 38507, "id": 85437, "time": "2006-02-05T14:13:34Z", "creator": "manuel@apache.org", "creation_time": "2006-02-05T14:13:34Z", "attachment_id": null}, {"count": 6, "attachment_id": null, "creator": "lfurini@cs.unibo.it", "text": "Fixed in the revision 375585 (http://svn.apache.org/viewcvs?rev=375585&view=rev).\n\nThank you for finding and signalling this bug!", "id": 85579, "time": "2006-02-08T09:19:48Z", "bug_id": 38507, "creation_time": "2006-02-08T09:19:48Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "gadams@apache.org", "attachment_id": null, "id": 155917, "time": "2012-04-01T06:48:28Z", "bug_id": 38507, "creation_time": "2012-04-01T06:48:28Z", "is_private": false, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed"}]