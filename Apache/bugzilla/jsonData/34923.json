[{"count": 0, "attachment_id": null, "bug_id": 34923, "is_private": false, "id": 74894, "time": "2005-05-15T16:45:04Z", "creator": "werbung@kuhnle.net", "creation_time": "2005-05-15T16:45:04Z", "tags": [], "text": "When configuring a context's docBase relative to the server's docBase using\n\"..\", HostConfig org.apache.catalina.startup.HostConfig fails beause it thinks\nthe context's docBase is inside the server's. This is because HostConfig\ncompares the directory prefixes with getAbsolutePath, while it should use\ngetCanonicalPath\n\nExample with catalina base=\"c:/tomcat\", server docBase=\"webapps\", context\ndocBase=\"../special\"\n\ngetAbsolutePath now returns \"c:/tomcat/webapps\" for the server's docBase and\n\"c:/tomcat/webapps/../special\" for the context's docBase. Since the prefixes are\nthe same, HostConfig thinks the context's docBase is inside of the server's.\n\ngetCanonicalPath returns \"c:/tomcat/special\" for the context's docBase, and\nHostConfig works.\n\n\ngetCanonicalPath"}, {"count": 1, "tags": [], "bug_id": 34923, "is_private": false, "text": "Created attachment 15034\nPatch", "id": 74895, "time": "2005-05-15T16:47:08Z", "creator": "werbung@kuhnle.net", "creation_time": "2005-05-15T16:47:08Z", "attachment_id": 15034}, {"count": 2, "tags": [], "bug_id": 34923, "attachment_id": null, "text": "Look, I'm really tired of hacks. System properties, etc, are supported\neverywhere. How about using what's available instead of always fighting to get\nwhat should not be available ?", "id": 74896, "time": "2005-05-15T17:11:10Z", "creator": "remm@apache.org", "creation_time": "2005-05-15T17:11:10Z", "is_private": false}, {"count": 3, "tags": [], "creator": "werbung@kuhnle.net", "text": "Yes, there are, of course, better solutions, but still IMHO this is a bug. The\nerror message reads \"A docBase {0} inside the host appBase has been specified,\nand will be ignored\". This is clearly not the case, since the specified docBase\nis outside the host appBase. If the docBase must not contain \"..\", then the\nerror message should say so.", "id": 74897, "time": "2005-05-15T18:19:17Z", "bug_id": 34923, "creation_time": "2005-05-15T18:19:17Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "bug_id": 34923, "is_private": false, "id": 74898, "time": "2005-05-15T18:20:07Z", "creator": "werbung@kuhnle.net", "creation_time": "2005-05-15T18:20:07Z", "tags": [], "text": "(In reply to comment #2)\n> Look, I'm really tired of hacks. System properties, etc, are supported\n> everywhere. How about using what's available instead of always fighting to get\n> what should not be available ?\n\nYes, there are, of course, better solutions, but still IMHO this is a bug. The\nerror message reads \"A docBase {0} inside the host appBase has been specified,\nand will be ignored\". This is clearly not the case, since the specified docBase\nis outside the host appBase. If the docBase must not contain \"..\", then the\nerror message should say so."}, {"count": 5, "attachment_id": null, "bug_id": 34923, "is_private": false, "id": 74899, "time": "2005-05-15T18:31:45Z", "creator": "remm@apache.org", "creation_time": "2005-05-15T18:31:45Z", "tags": [], "text": "(In reply to comment #4)\n> (In reply to comment #2)\n> > Look, I'm really tired of hacks. System properties, etc, are supported\n> > everywhere. How about using what's available instead of always fighting to get\n> > what should not be available ?\n> \n> Yes, there are, of course, better solutions, but still IMHO this is a bug. The\n> error message reads \"A docBase {0} inside the host appBase has been specified,\n> and will be ignored\". This is clearly not the case, since the specified docBase\n> is outside the host appBase. If the docBase must not contain \"..\", then the\n> error message should say so.\n\nI now use canonical path for the docBase, can you leave me alone ?"}, {"count": 6, "tags": [], "creator": "cowwoc@bbs.darktech.org", "text": "Which version is this fixed in? I'm seeing this for docBase=\"test\" (notice no\nrelative path is used) under Tomcat 5.5.12. Will the canonicalization patch\nmentioned make this warning go away?", "id": 83979, "time": "2005-12-25T08:55:02Z", "bug_id": 34923, "creation_time": "2005-12-25T08:55:02Z", "is_private": false, "attachment_id": null}]