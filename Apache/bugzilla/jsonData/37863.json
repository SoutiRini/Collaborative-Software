[{"count": 0, "tags": [], "bug_id": 37863, "attachment_id": null, "text": "The httpd starts and works nicely on a amd64, 2 dual-Opteron processor box, \nFreeBSD 6.0, kernel compiled with 'options ACCEPT_FILTER_HTTP'.\n\nBut a kill -1 on the httpd root pid writes the following lines to the log file:\n\n[Sun Dec 11 00:01:19 2005] [notice] SIGHUP received.  Attempting to restart\n[Sun Dec 11 00:01:19 2005] [warn] (22)Invalid argument: Failed to enable the \n'httpready' Accept Filter\n[Sun Dec 11 00:01:19 2005] [warn] (22)Invalid argument: Failed to enable the \n'httpready' Accept Filter\n[Sun Dec 11 00:01:19 2005] [notice] Apache configured -- resuming normal \noperations\n\nI can provoke the message with a minimal configuration of only the following \nmodule: LoadModule log_config_module modules/mod_log_config.so\n\nCompiled in modules:\n  core.c\n  prefork.c\n  http_core.c\n  mod_so.c", "id": 83532, "time": "2005-12-11T01:16:29Z", "creator": "cei@yourshop.com", "creation_time": "2005-12-11T01:16:29Z", "is_private": false}, {"count": 1, "tags": [], "creator": "chip@force-elite.com", "text": "you only get this warning on restart, not on startup?", "id": 83533, "time": "2005-12-11T01:20:06Z", "bug_id": 37863, "creation_time": "2005-12-11T01:20:06Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "cei@yourshop.com", "text": "Yes, only on restart.", "id": 83534, "time": "2005-12-11T01:29:20Z", "bug_id": 37863, "creation_time": "2005-12-11T01:29:20Z", "tags": [], "is_private": false}, {"count": 3, "text": "Okay, I can repo it here.\n\nWe need to pass the fact that we are currently doing a restart, down to the code\nin server/listen.c.  Not an easy way right now.", "creator": "chip@force-elite.com", "attachment_id": null, "id": 83536, "time": "2005-12-11T22:30:47Z", "bug_id": 37863, "creation_time": "2005-12-11T22:30:47Z", "tags": [], "is_private": false}, {"count": 4, "attachment_id": null, "creator": "victor.engmark@gmail.com", "text": "Still an issue with Apache/2.2.4 and php5-5.2.1_3.", "id": 101615, "time": "2007-04-12T07:11:20Z", "bug_id": 37863, "creation_time": "2007-04-12T07:11:20Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 37863, "attachment_id": null, "text": "I still see this with Apache 2.2.6 on FreeBSD 7.0-BETA3", "id": 111194, "time": "2007-11-28T02:07:32Z", "creator": "toomas.aas@raad.tartu.ee", "creation_time": "2007-11-28T02:07:32Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 37863, "attachment_id": null, "text": "I can confirm that this issue still seems to exist with Apache/2.2.9, FreeBSD 7.0-RELEASE-p3 on i386.\n\nOn \"apachectl start\" and \"apachectl stop; apachectl start\" there is no warning. However, \"apachectl restart\" and similarly \"apachectl graceful\" predictably produce the warning.\n\n[Wed Aug 13 15:30:28 2008] [notice] SIGHUP received.  Attempting to restart\n[Wed Aug 13 15:30:28 2008] [warn] (22)Invalid argument: Failed to enable the 'httpready' Accept Filter\n[Wed Aug 13 15:30:28 2008] [warn] (22)Invalid argument: Failed to enable the 'httpready' Accept Filter\n\n", "id": 119780, "time": "2008-08-13T06:31:18Z", "creator": "walter@slik.eu", "creation_time": "2008-08-13T06:31:18Z", "is_private": false}, {"count": 7, "tags": [], "creator": "rahul.g.nair@gmail.com", "text": "Confirming this in trunk, and also on startup.\nI also see a file called accept.lock.<pid> under logs i.e logs/accept.lock.95338\n\n|uname -a\nFreeBSD vayavyam.India.Sun.COM 6.1-RELEASE FreeBSD 6.1-RELEASE #0: Sun May  7 04:32:43 UTC 2006     root@opus.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC  i386\n|ls logs \naccept.lock.95338       access_log              error_log               httpd.pid\n|cat logs/httpd.pid \n95338\n|./bin/apachectl start\n[Tue Aug 26 17:05:29 2008] [warn] (2)No such file or directory: Failed to enable the 'httpready' Accept Filter\n|cat logs/error_log \n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1851): proxy: grabbed scoreboard slot 0 in child 95362 for worker proxy:reverse\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1966): proxy: initialized single connection worker 0 in child 95362 for (*)\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1851): proxy: grabbed scoreboard slot 0 in child 95363 for worker proxy:reverse\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1869): proxy: worker proxy:reverse already initialized\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1966): proxy: initialized single connection worker 0 in child 95363 for (*)\n[Tue Aug 26 17:05:29 2008] [notice] Apache/2.3.0-dev (Unix) configured -- resuming normal operations\n[Tue Aug 26 17:05:29 2008] [info] Server built: Aug 26 2008 16:53:07\n[Tue Aug 26 17:05:29 2008] [debug] prefork.c(960): AcceptMutex: flock (default: flock)\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1851): proxy: grabbed scoreboard slot 0 in child 95364 for worker proxy:reverse\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1869): proxy: worker proxy:reverse already initialized\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1966): proxy: initialized single connection worker 0 in child 95364 for (*)\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1851): proxy: grabbed scoreboard slot 0 in child 95365 for worker proxy:reverse\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1869): proxy: worker proxy:reverse already initialized\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1966): proxy: initialized single connection worker 0 in child 95365 for (*)\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1851): proxy: grabbed scoreboard slot 0 in child 95366 for worker proxy:reverse\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1869): proxy: worker proxy:reverse already initialized\n[Tue Aug 26 17:05:29 2008] [debug] proxy_util.c(1966): proxy: initialized single connection worker 0 in child 95366 for (*)\n\n", "id": 120099, "time": "2008-08-26T04:51:54Z", "bug_id": 37863, "creation_time": "2008-08-26T04:51:54Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "creator": "pgollucci@apache.org", "text": "CC myself on FreeBSD related bugs", "id": 124153, "time": "2009-01-18T16:19:12Z", "bug_id": 37863, "creation_time": "2009-01-18T16:19:12Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 37863, "attachment_id": null, "text": "apr/", "id": 132991, "time": "2009-12-20T17:15:53Z", "creator": "nick@webthing.com", "creation_time": "2009-12-20T17:15:53Z", "is_private": false}, {"count": 10, "tags": [], "creator": "nick@webthing.com", "text": "sorry, last comment was mouse trouble; ignore.", "id": 132992, "time": "2009-12-20T17:17:53Z", "bug_id": 37863, "creation_time": "2009-12-20T17:17:53Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 37863, "attachment_id": null, "text": "I got this issue too in FreeBSD 8.0-RELEASE-p2", "id": 136188, "time": "2010-04-15T11:42:02Z", "creator": "daniel@produktion203.se", "creation_time": "2010-04-15T11:42:02Z", "is_private": false}, {"count": 12, "text": "Still an issue with Apache/2.2.15 on FreeBSD 9.0-CURRENT i386", "creator": "ache@vniz.net", "attachment_id": null, "id": 138543, "time": "2010-07-20T07:06:35Z", "bug_id": 37863, "creation_time": "2010-07-20T07:06:35Z", "tags": [], "is_private": false}, {"count": 13, "attachment_id": null, "creator": "daniel@produktion203.se", "text": "maybe time someone fixes a bug thats 5 years old?\n\nI have this problem too with the setup stated below and it sucks balls to have to make a hard restart everytime\nFreeBSD 8.0-RELEASE-p4 \nServer version: Apache/2.2.15 (FreeBSD)\nServer built:   Jul 18 2010 20:54:26", "id": 138546, "time": "2010-07-20T07:37:09Z", "bug_id": 37863, "creation_time": "2010-07-20T07:37:09Z", "tags": [], "is_private": false}, {"count": 14, "text": "According to the code it looks like the error can be ignored; the ACCEPT_FILTER remains enabled during a \"kill -1\", that's why it can't be enabled again. Is that not the case?", "creator": "rustamabd@gmail.com", "attachment_id": null, "id": 138547, "time": "2010-07-20T07:57:41Z", "bug_id": 37863, "creation_time": "2010-07-20T07:57:41Z", "tags": [], "is_private": false}, {"count": 15, "text": "Nope, the httpd completly dies when this happens and you have to start it again", "creator": "daniel@produktion203.se", "attachment_id": null, "id": 138548, "time": "2010-07-20T07:59:36Z", "bug_id": 37863, "creation_time": "2010-07-20T07:59:36Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 37863, "text": ">Nope, the httpd completly dies when this happens and you have to start it again\n\nI can't reproduce the issue of httpd exiting with 2.2.15, 2.2.latest, or trunk on FreeBSD 9 RELEASE.  That seems to be a different issue, as there hasn't been logic to trigger an error based on a failure to set the accept filter.", "count": 16, "id": 163265, "time": "2012-11-07T15:52:49Z", "creator": "trawick@apache.org", "creation_time": "2012-11-07T15:52:49Z", "is_private": false}, {"count": 17, "attachment_id": null, "creator": "trawick@apache.org", "text": "Fixed in apr trunk r1406690...\nFixed in apr 1.5.x r1406693...\nFixed in apr 1.4.x r1406694...", "id": 163267, "time": "2012-11-07T16:14:27Z", "bug_id": 37863, "creation_time": "2012-11-07T16:14:27Z", "tags": [], "is_private": false}]