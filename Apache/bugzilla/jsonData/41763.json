[{"count": 0, "tags": [], "bug_id": 41763, "attachment_id": null, "text": "I run httpd 2.2.3 on Linux 2.4.21-47.0.1.ELsmp (RedHat ES3) and I have enabled\nmod_disk_cache for several sites. Directives CacheDirLength and CacheDirLevels \nare respectively set to 1 and 2.\n\nProblem : subdirectories under CacheRoot directory are 2 characters long instead\nof 1, and 3 subdirectories are created.\n\nHttpd processes have been stopped and restarted after configuration changes and\nall files and directories under CacheRoot directories deleted.\n\nThe same problem is reproduced with httpd 2.2.4.", "id": 100046, "time": "2007-03-05T03:00:03Z", "creator": "esuran@generali.fr", "creation_time": "2007-03-05T03:00:03Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 41763, "attachment_id": null, "text": "Sorry but I cannot reproduce this problem with 2.2.4. I guess something is wrong\nwith your configuration such that you fall back to the default values. Have you\nset some of mod_disk_caches directives inside a virtual host and some outside of\na virtual host?", "id": 100064, "time": "2007-03-05T13:04:01Z", "creator": "rpluem@apache.org", "creation_time": "2007-03-05T13:04:01Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 41763, "attachment_id": null, "text": "The involved directives are not redefined inside the virtual hosts configuration\nbut this is done for CacheRoot directive.\n\nOur configuration looks like this :\n\nCacheRoot /a/\nCacheDirLength 1\nCacheDirLevels 2\n...\n<VirtualHost xxx>\nCacheRoot /a/xxx\n</VirtualHost xxx>\n\n<VirtualHost yyy>\nCacheRoot /a/yyy\n</VirtualHost yyy>\n\n\nThen we have performed more tests and the problem is corrected if we redefined\nCacheDirLength and CacheDirLevels inside the virtual host configuration.\nSo, we guess the problem is CacheRoot directive override the previous\nconfiguration with the default values.\n", "id": 100083, "time": "2007-03-06T03:50:04Z", "creator": "esuran@generali.fr", "creation_time": "2007-03-06T03:50:04Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 41763, "attachment_id": null, "text": "(In reply to comment #2)\n\n> Then we have performed more tests and the problem is corrected if we redefined\n> CacheDirLength and CacheDirLevels inside the virtual host configuration.\n> So, we guess the problem is CacheRoot directive override the previous\n> configuration with the default values.\n\nWell analysed. This is exactly the case. The reason is that there is no function\nto merge per-server configs.", "id": 100101, "time": "2007-03-06T13:14:23Z", "creator": "rpluem@apache.org", "creation_time": "2007-03-06T13:14:23Z", "is_private": false}, {"count": 4, "tags": [], "creator": "esuran@generali.fr", "attachment_id": null, "id": 100121, "time": "2007-03-07T02:26:14Z", "bug_id": 41763, "creation_time": "2007-03-07T02:26:14Z", "is_private": false, "text": "OK, thank you. Then we will update our configuration...\n\nDo you know if a such function will be developed ?\nAdditionally, maybe default setting could be changed accordingly to the\nrecommended values as describe in \"caching guide\".\n\n"}, {"count": 5, "tags": [], "text": "The lack of a merge function is a real bug, not really something that should be\ndocumented.", "attachment_id": null, "bug_id": 41763, "id": 100397, "time": "2007-03-14T14:32:21Z", "creator": "jorton@redhat.com", "creation_time": "2007-03-14T14:32:21Z", "is_private": false}]