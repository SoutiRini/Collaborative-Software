[{"count": 0, "attachment_id": null, "creator": "greg.fenton@sybase.com", "is_private": false, "id": 1959, "time": "2001-04-20T14:20:50Z", "bug_id": 1445, "creation_time": "2001-04-20T14:20:50Z", "tags": [], "text": "Commenting out the following target causes Ant's parser to spew:\n\n  <target name=\"run2\" depends=\"ianywhere\" >\n    <java classname=\"Startup\">\n      <classpath>\n        <pathelement path=\"${classpath}\" />\n        <pathelement location=\"${buildDir}\" />\n      </classpath>\n      <arg value=\"-Sr\" />\n      <arg value=\"MyStartupModule\" />\n      <arg value=\"--\" />\n      <arg value=\"fred\" />\n      <arg value=\"bob\" />\n    </java>\n  </target>\n\n\nIt complains about line 9 above (containing \"--\") with the following message:\n  Next character must be \">\" terminating comment .\n\nHope this servers some use,\ngreg.fenton"}, {"count": 1, "tags": [], "bug_id": 1445, "attachment_id": null, "text": "I don't think this is a bug. Comments are not parsed and therefore the presence \nof comment delimiters within the commented out section can cause problems.\n\nIt is the same in Java. Try compiling this\n/*\n    String oops = \"*/\";\n*/\n\n", "id": 1993, "time": "2001-04-22T07:01:52Z", "creator": "conor@apache.org", "creation_time": "2001-04-22T07:01:52Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 1445, "text": "I don't see how javac's parser being brain-dead (see above code example shows)\nshould be justification for a similar parser issue with Ant...or are they using\nthe same parser?\n\nIn both cases quoted previously, the comment token is quoted.  There is no valid\nreason I can conceive for not handling this \"correctly\" (correct as in: it\nshould not be an error).\n\nThis in my mind should be addressed.  I don't see any technical reason for which\nit shouldn't, unless there is a spec somewhere which specifically addresses\nthis.\n\nAt the very least, this \"weirdity\" should be documented.\n\n\nBTW: if this is to be documented, one workaround is:\n\n<...>\n  <property name=\"dash\" value=\"-\">\n  <...>\n    <arg value=\"${dash}${dash}\">\n...\n\n", "id": 2035, "time": "2001-04-22T19:01:22Z", "creator": "greg.fenton@sybase.com", "creation_time": "2001-04-22T19:01:22Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "conor@apache.org", "is_private": false, "id": 2036, "time": "2001-04-22T19:42:30Z", "bug_id": 1445, "creation_time": "2001-04-22T19:42:30Z", "tags": [], "text": "My point is that just about every language with block comments treats comments \nthis way, whether it is Java, XML, C, etc. The example was to convince you that \nthis is neither a problem particular to XML, nor to Ant's implementation of \nXML. You can't always comment out a block of code without checking what is in \nthat code. The comment you have created violates the XML specification.\nhttp://www.w3.org/TR/2000/REC-xml-20001006#sec-comments\n\n2.5 Comments\n[Definition: Comments may appear anywhere in a document outside other markup; \nin addition, they may appear within the document type declaration at places \nallowed by the grammar. They are not part of the document's character data; an \nXML processor may, but need not, make it possible for an application to \nretrieve the text of comments. For compatibility, the string \"--\" (double-\nhyphen) must not occur within comments.] Parameter entity references are not \nrecognized within comments.\n\n"}]