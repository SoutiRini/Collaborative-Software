[{"count": 0, "tags": [], "bug_id": 34519, "is_private": false, "text": "Directory indexes consist of HTML3.2 tag soup, which does not even obey the\nnormal HTML3 rules.\n\nPlease upgrade it to emit well-formed and valid XHTML.\n\nPlease include a link to an external stylesheet, for which a default file is\nprovided.  By altering the default file, this will allow webmasters to configure\nthe appearance of their directory indexes.", "id": 73796, "time": "2005-04-19T14:40:14Z", "creator": "richard.beton@roke.co.uk", "creation_time": "2005-04-19T14:40:14Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "It would also make sense to include link elements in the head.\nEspecially useful is\n<link rel=\"Up\" href=\"[parent directory]\"/>\n", "is_private": false, "bug_id": 34519, "id": 73797, "time": "2005-04-19T14:44:38Z", "creator": "richard.beton@roke.co.uk", "creation_time": "2005-04-19T14:44:38Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 34519, "attachment_id": null, "is_private": false, "id": 73799, "time": "2005-04-19T14:53:53Z", "creator": "nd@perlig.de", "creation_time": "2005-04-19T14:53:53Z", "text": "You can configure mod_autoindex to emit valid XHTML. Please ask on a user list, how.\nFor the second request, feel free to open another bug report / feature request\n(and include a patch ;-)"}, {"count": 3, "tags": [], "bug_id": 34519, "text": "Out of the box, mod_dir should surely emit well-formed HTML3, even if not\nupgraded to XHTML, CSS etc.  In other words, the overlapping of tags (which is\nnot allowed) should be corrected.", "id": 73852, "time": "2005-04-20T10:47:48Z", "creator": "richard.beton@roke.co.uk", "creation_time": "2005-04-20T10:47:48Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 34519, "text": "...correction: I meant to refer to mod_autoindex.", "id": 73853, "time": "2005-04-20T10:49:55Z", "creator": "richard.beton@roke.co.uk", "creation_time": "2005-04-20T10:49:55Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "nd@perlig.de", "is_private": false, "count": 5, "id": 73881, "time": "2005-04-21T08:28:41Z", "bug_id": 34519, "creation_time": "2005-04-21T08:28:41Z", "text": "Could you *please* be more specific? I'm not aware of any non-wellformedness."}, {"attachment_id": null, "tags": [], "bug_id": 34519, "text": "The main problem is the use of <hr> and <img> within <pre>, which is not\nallowed. Turning on the HTMLTable fixes this. \n\nI found I needed the following in order to get well-formed valid HTML 3.2:\n    IndexOptions FancyIndexing VersionSort HTMLTable\nPerhaps these should be the default options 'out of the box'?\n\nHowever, there is still a problem with this: it should include\n    <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\">\nin the head.\n\nFor XHTML, I found I needed the following in order to get well-formed valid XHTML:\n    IndexOptions FancyIndexing VersionSort XHTML HTMLTable\nPerhaps these should be the default options 'out of the box' instead of\nthe HTML3.2 variant?\n\nHowever, there are still problems with this:\n1. it should have the XML marker first line, typically\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n2. it should have the XML namespace, i.e. the root element should be\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\">\nalthough there may be interesting issues to solve in choosing which language to\nspecify.\n\nHope this helps,\nRick\n\n", "count": 6, "id": 73889, "time": "2005-04-21T10:36:22Z", "creator": "richard.beton@roke.co.uk", "creation_time": "2005-04-21T10:36:22Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 34519, "is_private": false, "text": "(In reply to comment #6)\n> The main problem is the use of <hr> and <img> within <pre>, which is not\n> allowed. Turning on the HTMLTable fixes this. \n\nAha. You're not talking about wellformedness. You're talking about validity,\nthere's a big difference.\n\n> I found I needed the following in order to get well-formed valid HTML 3.2:\n>     IndexOptions FancyIndexing VersionSort HTMLTable\n> Perhaps these should be the default options 'out of the box'?\n\nWould be an idea.\n\n> However, there is still a problem with this: it should include\n>     <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\">\n> in the head.\n\nI don't see, why it should.\n\n> For XHTML, I found I needed the following in order to get well-formed valid XHTML:\n>     IndexOptions FancyIndexing VersionSort XHTML HTMLTable\n> Perhaps these should be the default options 'out of the box' instead of\n> the HTML3.2 variant?\n> \n> However, there are still problems with this:\n> 1. it should have the XML marker first line, typically\n> <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\nNo, why should it? N.B.: The only system where UTF-8 is emitted, is Win32; and\nthere the proper HTTP header is set.\n\n> 2. it should have the XML namespace, i.e. the root element should be\n> <html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\">\n> although there may be interesting issues to solve in choosing which language to\n> specify.\n\nHmm. Namespace would be nice, agreed. For more I'd suggest using HeaderName.", "id": 73903, "time": "2005-04-21T15:22:56Z", "creator": "nd@perlig.de", "creation_time": "2005-04-21T15:22:56Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "richard.beton@roke.co.uk", "is_private": false, "count": 8, "id": 73908, "time": "2005-04-21T16:23:51Z", "bug_id": 34519, "creation_time": "2005-04-21T16:23:51Z", "text": ">> However, there is still a problem with this: it should include\n>>     <meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\">\n>> in the head.\n>\n>I don't see, why it should.\n\nMy mistake - the server already provides this in the HTTP traffic.\n\n>> 1. it should have the XML marker first line, typically\n>> <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n>\n>No, why should it? N.B.: The only system where UTF-8 is emitted, is Win32; and\n>there the proper HTTP header is set.\n\nThis is recommended for all XML documents (although not strictly required) as\nper http://www.w3.org/TR/2004/REC-xml-20040204/#sec-prolog-dtd\n\nBecause the character encoding is also provided by the server, it isn't stictly\nrequired in the document (provided the encoding is UTF-8 or there is a BOM).\nDoesn't hurt to include it though.\n\n"}, {"count": 9, "tags": [], "bug_id": 34519, "text": "I wouldn't mind changing the httpd-autoindex.conf to use the HTMLTable\nIndexOption.  The default config doesn't activate fancy indexing at all now.", "id": 83441, "time": "2005-12-08T19:38:32Z", "creator": "slive@apache.org", "creation_time": "2005-12-08T19:38:32Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 34519, "attachment_id": null, "is_private": false, "id": 84947, "time": "2006-01-24T15:57:57Z", "creator": "slive@apache.org", "creation_time": "2006-01-24T15:57:57Z", "text": "Putting this back to mod_autoindex because the default config now uses valid\nhtml 3.2.  The namespace issue is a code problem, not a config-file problem."}, {"count": 11, "tags": [], "bug_id": 34519, "is_private": false, "text": "I'm unclear whether this is still considered a problem. Nearly five years is an awful long time for this to remain open.\n\nIt appears that all of the issues of the original ticket are addressed by the default autoindex configuration. Right?", "id": 133156, "time": "2009-12-28T19:17:29Z", "creator": "rbowen@apache.org", "creation_time": "2009-12-28T19:17:29Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 34519, "is_private": false, "text": "still doesn't validate as XHTMl 1.0 OOTB w/ +XHTML.\n\nI see that dropping the massive <pre> and replacing with a few <span style=\"white-space: pre; font-family:monospace\"> (gotta keep the HR's outside of the span) makes it validate.", "id": 142390, "time": "2010-12-05T13:50:21Z", "creator": "covener@gmail.com", "creation_time": "2010-12-05T13:50:21Z", "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 34519, "attachment_id": null, "text": "I validated a simply directory index from my Debian sid's 2.2.16 server... and it only gives me some warnings (missing charset).\n\nMay I suggest the following:\n1) Add XML header:\n<?xml version=\"1.1\" encoding=\"UTF-8\"?>\n\nThis should solve the warnings. Of course, encoding should be dependant on the IndexOptions Charset= value.\n\n\n2) Switch to XHTML 1.1:\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\" \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">\n\nAs the name says XHTML 1.0 was always meant to be \"transitional\" and any browser that can parse that is also able to parse XHTML 1.1 (which is like the strict variant\".\nbtw: My test-index already validated with XHTML 1.0\n\n\n3) Add xml:lang\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\">\n\nNot sure if this is mandatory in the meantime, but it's good behaviour I guess.\nIs the content generated by mod_autoindex (I mean the headers) always English?\n\n\n\nSo this boils down to:\nUse the following header instead of the current one:\n<?xml version=\"1.1\" encoding=\"UTF-8\"?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\" \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\">\n\n\n(I personally wouldn't place a newline in the middle of the DOCTYPE definition, it's not required or suggested by the standards, so no reason for doing so).\n\n\nCheers,\nChris", "id": 142428, "time": "2010-12-06T17:10:45Z", "creator": "calestyo@scientia.net", "creation_time": "2010-12-06T17:10:45Z", "is_private": false}]