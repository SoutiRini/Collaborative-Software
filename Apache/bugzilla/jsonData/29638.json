[{"count": 0, "tags": [], "bug_id": 29638, "attachment_id": null, "id": 59401, "time": "2004-06-17T12:26:37Z", "creator": "lex@intellij.net", "creation_time": "2004-06-17T12:26:37Z", "is_private": false, "text": "all the contents of custom tag is bound to the first line of the tag.\n\nfor example.\n<%@ page import=\"java.util.ArrayList\"%>\n<%@page contentType=\"text/html;charset=ISO-8859-1\" pageEncoding=\"ISO-8859-1\"%>\n<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jstl/core\" %>\n<%--<%@taglib prefix=\"x\" uri=\"http://java.sun.com/jstl/xml\"%>--%>\n<%--<%@taglib prefix=\"csp\" uri=\"http://www.cosespseguros.com.br/taglibs/2\" %>--\n%>\n\n<%\n  ArrayList items = new ArrayList();\n  items.add(\"foo\");\n  items.add(\"foobar\");\n  items.add(\"foobar\");\n  items.add(\"foobar\");\n  pageContext.setAttribute(\"items\", items);\n%>\n\n\n\n<html>\n<head><title>Localized Dates</title></head>\n<body bgcolor=\"white\">\n\n<form name=\"localeForm\" action=\"index.jsp\" method=\"post\">\n<c:set var=\"selectedLocaleString\" value=\"${param.locale}\" />\n<c:set var=\"selectedFlag\"\n  value=\"${!empty selectedLocaleString}\" />\n<b>Locale:</b>\n<select name=locale>\n<c:forEach var=\"localeString\" items=\"${items}\" >\n  <c:choose>\n    <c:when test=\"${selectedFlag}\">\n      <c:choose>\n        <c:when test=\"${selectedLocaleString == localeString}\" >\n          <option selected>${localeString}</option>\n        </c:when>\n        <c:otherwise>\n          <option>${localeString}</option>\n        </c:otherwise>\n      </c:choose>\n    </c:when>\n    <c:otherwise>\n      <option>${localeString}</option>\n    </c:otherwise>\n  </c:choose>\n</c:forEach>\n</select>\n<input type=\"submit\" name=\"Submit\" value=\"Get Date\">\n</form>\n\nI step with debugger through code generated from JSP to the line 357\nwhich contains out.write(\"    <option>${localeString}</option>\"). This line \ncorresponds line 41 in this testcase. But debug JDI returns line 40 for \"JSP\" \nstrata."}, {"count": 1, "tags": [], "text": "Created attachment 11865\nSource JSP", "is_private": false, "id": 59402, "creator": "lex@intellij.net", "time": "2004-06-17T12:28:21Z", "bug_id": 29638, "creation_time": "2004-06-17T12:28:21Z", "attachment_id": 11865}, {"count": 2, "tags": [], "creator": "lex@intellij.net", "attachment_id": 11866, "id": 59403, "time": "2004-06-17T12:31:33Z", "bug_id": 29638, "creation_time": "2004-06-17T12:31:33Z", "is_private": false, "text": "Created attachment 11866\nGenerated java"}, {"count": 3, "tags": [], "creator": "kin-man.chung@sun.com", "attachment_id": null, "id": 59526, "time": "2004-06-18T21:12:23Z", "bug_id": 29638, "creation_time": "2004-06-18T21:12:23Z", "is_private": false, "text": "The smap looks correct to me.  Note the java line 'out.write(\"\\n\");' that come\nbefore the line 'out.write(\"      <option>\");' maps to line 40 of the jsp file.\n It may be possible that you stop there instead.\n\nOtherwise this can also be a debugger or IDE problem.\n\nBTW, you should use jstl 1.1.\n"}, {"attachment_id": null, "tags": [], "bug_id": 29638, "is_private": false, "count": 4, "id": 59646, "time": "2004-06-21T08:22:10Z", "creator": "lex@intellij.net", "creation_time": "2004-06-21T08:22:10Z", "text": "Actually I stopped inside write method. When the paremeter value was \"    \n<option>\" I inspected the upper frame with JDI. For \"Java\" Strata JDI returned \nline with out.write(\"      <option>\"); But for \"JSP\" Strata it returned line \nwith <c:otherwise>.\n\nHow can I get the smap?"}, {"count": 5, "tags": [], "bug_id": 29638, "attachment_id": null, "id": 59684, "time": "2004-06-21T17:25:24Z", "creator": "kin-man.chung@sun.com", "creation_time": "2004-06-21T17:25:24Z", "is_private": false, "text": "To get the smap, set dumpSmap to true for JspServlet in <tomcat>/conf/web.xml,\nand look for *.smap file in the generated directory.  You'll probably need\nJSR-45 spec for smap spec."}]