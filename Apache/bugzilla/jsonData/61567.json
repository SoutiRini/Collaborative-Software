[{"count": 0, "tags": [], "creator": "sveryovka@gmail.com", "attachment_id": null, "id": 201159, "time": "2017-09-27T14:26:28Z", "bug_id": 61567, "creation_time": "2017-09-27T14:26:28Z", "is_private": false, "text": "I have described issue in details at\n\nhttps://stackoverflow.com/questions/46429778/when-running-jmeter-script-from-java-functions-and-properties-do-not-work/\n\nIt has sample code. Th eproblem I have found is that JMeter wants to have a library in classpath with exact name of \"ApacheJMeter_functions.jar\" it can't be  \"ApacheJMeter_functions-3.3.jar\" even if the files are binary equal.\n\nThis means that I can't load \"ApacheJMeter_functions.jar\" from Maven which is very inconvenient and causes additional issues.\n\nPlease change behavior so that \"ApacheJMeter_functions*.jar\" worked as well."}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "See my answer on SO.\n\nFor information , to ask question use jmeter mailing list:\n\n- http://jmeter.apache.org/mail2.html\n\nClosing as WORKSFORME.\nIf issue persists , please reopen.\n\nRegards", "id": 201166, "time": "2017-09-27T18:26:18Z", "bug_id": 61567, "creation_time": "2017-09-27T18:26:18Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 61567, "attachment_id": null, "text": "Jmeter itself runs. The funstions do not work. For example, if you set \"${__P(threadsNum,1)}\" as a value for \"Number of Threads\" for thread group you will see in the log \"starting 0 threads\". Functions start to work only if jar is named exactly ApacheJMeter_functions.jar this means that I can't use this jar from Maven.", "id": 201182, "time": "2017-09-28T09:13:59Z", "creator": "sveryovka@gmail.com", "creation_time": "2017-09-28T09:13:59Z", "is_private": false}, {"count": 3, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 201183, "time": "2017-09-28T09:15:10Z", "bug_id": 61567, "creation_time": "2017-09-28T09:15:10Z", "is_private": false, "text": "Did you try the solution described in my SO answer ?\nThere is an issue in your code anyway.\n\nThank you"}, {"count": 4, "tags": [], "creator": "sveryovka@gmail.com", "attachment_id": 35389, "id": 201229, "time": "2017-09-29T13:46:08Z", "bug_id": 61567, "creation_time": "2017-09-29T13:46:08Z", "is_private": false, "text": "Created attachment 35389\nDemo project"}, {"count": 5, "tags": [], "creator": "sveryovka@gmail.com", "text": "Sorry for confusion. I have copied jmeter.properties file to teh other location. So it has nothing to do with the behavior of the code.\n\nI have attached demo project. Unzip it, edit pom.xml and src\\main\\java\\mytst\\tst1\\App.java to specify correct JMeter home. After this run \"mvn package\". \n\nIn the log you will see that everything is fine and one of the log lines will be following:\n--\nStarting thread group... number=1 threads=2 ramp-up=1 perThread=500.0 delayedStart=false\n--\n\nNow go back to pom.xml and comment out dependency to \"${jmeter.home}/lib/ext/ApacheJMeter_functions.jar\" and uncomment maven dependency which has to be downloaded from Maven repo. Run \"mvn package\" again. \n\nIn the logs you will see following\n--\n Starting thread group... number=1 threads=0 ramp-up=1 perThread=Infinity delayedStart=false\n--\n\nAs you see the difference is that with \"ApacheJMeter_functions.jar\" it was \"threads=2\" but with \"ApacheJMeter_functions-3.3.jar\" you get \"threads=0\". But two jars are binary equal(I have checked this) and the only difference is their name.In the jmeter script I am setting \"ThreadGroup.num_threads\" to ${__P(xxx,2)} which is function.", "id": 201231, "time": "2017-09-29T13:53:52Z", "bug_id": 61567, "creation_time": "2017-09-29T13:53:52Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 61567, "attachment_id": null, "text": "Hello,\nThanks for the project.\nIt helped me understand your problem.\n\nI notice:\n- Code works if App is ran as a Main application\n- Code works if AppTest is ran from Eclipse\n- Code fails when ran through mvn clean install\n\n\nThe failure is due to this code:\n\n- https://github.com/apache/jmeter/blob/trunk/src/jorphan/org/apache/jorphan/reflect/ClassFinder.java#L335", "id": 201240, "time": "2017-09-29T20:03:35Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-09-29T20:03:35Z", "is_private": false}, {"count": 7, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 202334, "time": "2017-11-22T11:25:43Z", "bug_id": 61567, "creation_time": "2017-11-22T11:25:43Z", "is_private": false, "text": "I think the failure is due to the project setup.\n\nThe POM mixes system and non-system JMeter dependencies.\nNo wonder JMeter has problems with the classpath."}, {"count": 8, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 202335, "time": "2017-11-22T11:27:47Z", "bug_id": 61567, "creation_time": "2017-11-22T11:27:47Z", "is_private": false, "text": "The mix is just to highlight the bug.\nWhen only using non system dependencies, test fails.\nIMO it's a jmeter issue."}, {"count": 9, "tags": [], "creator": "sveryovka@gmail.com", "attachment_id": null, "id": 202337, "time": "2017-11-22T12:42:20Z", "bug_id": 61567, "creation_time": "2017-11-22T12:42:20Z", "is_private": false, "text": "(In reply to Sebb from comment #7)\n> I think the failure is due to the project setup.\n> \n> The POM mixes system and non-system JMeter dependencies.\n> No wonder JMeter has problems with the classpath.\n\nThis has nothing to do with the bug. You hav to use \"system\" scope if you want to add jar called \"ApacheJMeter_functions.jar\". This is definitely bug. \n\nTry it yourself and remove this. That's the entire point of this issue."}]