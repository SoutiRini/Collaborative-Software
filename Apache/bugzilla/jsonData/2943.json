[{"count": 0, "tags": [], "text": "Overview Description\n\nThe rmic core task has a 'sourcebase' option which passes\nthe '-keepgenerated' option to rmic. It also moves the\ngenerated source to a directory of your choice.\n\nIf you want to keep the generated source in the same place\nas the stubs & skels (ie, sourcebase=base), Ant will\ndelete the generated source when rmic completes.\n\nSteps to reproduce\n\n<rmic base=\"directory\"\n      sourcebase=\"directory\"\n      classname=\"com.ClassFile\" />\n\nor even\n\n    <rmic base=\".\"\n          sourcebase=\".\"\n          classname=\"com.ClassFile\" />\n\nActual Results\n\nRun Ant - while rmic is executing, you can see the generated .java\nfiles appear with the .classes. When rmic completes, the .java files\ndisappear. (If rmic completes quickly you may miss the .java files).\n\nExpected Results\n\nThe .java generated source in the same place as the stubs & skels.\nIf sourcebase!=base, Ant corrently moves and preserves the generated\nsource.\n\nWhat appears to be happening\n\nThe method org.apache.tools.ant.taskdefs.Rmic.moveGeneratedFile()\nfirst copies the file to the new location, then deletes the old\ncopy. This strategy fails if the destination is the same as the\nsource directory.\n\nSuggested fixes\n\n1) Make moveGeneratedFile() check if the baseDir and sourceBaseFile\n   parameters are equivalent. If they are, return without doing the\n   move. I'm not sure if Ant processes '../../' type relative dirs,\n   so it may not be a simply compare (although that would help).\n\n2) Add a separate 'keepgenerated' option to the rmic core task that\n   doesn't try to move the files after generation.", "is_private": false, "bug_id": 2943, "id": 4199, "time": "2001-08-01T00:36:26Z", "creator": "jon@nohorizon.net", "creation_time": "2001-08-01T00:36:26Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "text": "added a simplistic version of option 1) - Ant is supposed to take care of ../\nand similar problems.\n\nFixed in nightly build 2001-08-02.", "id": 4201, "time": "2001-08-01T02:36:34Z", "bug_id": 2943, "creation_time": "2001-08-01T02:36:34Z", "is_private": false, "attachment_id": null}]