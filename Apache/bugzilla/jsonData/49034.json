[{"count": 0, "tags": [], "text": "httpd compiled fine with ssl 1.0.0 without any of the shared ldap modules, but when they were added I could no longer compile httpd.\n\nconfig.nice\n\"./configure\" \\\n\"--enable-layout=Apache\" \\\n\"--enable-mods-shared=all ldap auth_ldap dav dav-fs dav-lock\" \\\n\"--with-z=/usr/local\" \\\n\"--with-ldap\" \\\n\"--with-ldap-dir=/usr/local\" \\\n\"--enable-ssl\" \\\n\"--with-ssl=/usr/local/ssl\" \\\n\"--enable-suexec\"\n\nssl_engine_init.c: In function `ssl_init_ctx_protocol':\nssl_engine_init.c:391: warning: assignment discards qualifiers from pointer target type\nssl_engine_init.c:397: warning: assignment discards qualifiers from pointer target type\nssl_engine_init.c: In function `ssl_init_ctx_verify':\nssl_engine_init.c:534: error: `STACK' undeclared (first use in this function)\nssl_engine_init.c:534: error: (Each undeclared identifier is reported only once\nssl_engine_init.c:534: error: for each function it appears in.)\nssl_engine_init.c:534: error: syntax error before ')' token\nssl_engine_init.c: In function `ssl_init_FindCAList':\nssl_engine_init.c:1109: warning: pointer type mismatch in conditional expression\n*** Error code 1\nmake: Fatal error: Command failed for target `ssl_engine_init.slo'\nCurrent working directory /usr/local/src/httpd-2.0.63/modules/ssl\n*** Error code 1\nThe following command caused the error:\nif test `pwd` = \"/usr/local/src/httpd-2.0.63\"; then \\\n    echo \"\" ; \\\nfi; \\\nlist=''; for i in $list; do \\\n    target=\"shared-build\"; \\\n    if test \"$i\" = \".\"; then \\\n        made_local=yes; \\\n        target=\"local-shared-build\"; \\\n    fi; \\\n    if test \"$i\" != \"srclib\"; then \\\n        (cd $i && make $target) || exit 1; \\\n    fi; \\\ndone; \\\nif test -f 'modules.mk'; then \\\n    if test -n 'mod_ssl.la'; then \\\n        echo \"Building shared: mod_ssl.la\"; \\\n        if test \"$made_local\" != \"yes\"; then \\\n                make \"local-shared-build\" || exit 1; \\\n        fi; \\\n    fi; \\\nfi; \\\nif test `pwd` = \"/usr/local/src/httpd-2.0.63\"; then \\\n        echo \"\" ; \\\nfi\nmake: Fatal error: Command failed for target `shared-build-recursive'\nCurrent working directory /usr/local/src/httpd-2.0.63/modules/ssl\n*** Error code 1\nThe following command caused the error:\nif test `pwd` = \"/usr/local/src/httpd-2.0.63\"; then \\\n    echo \"\" ; \\\nfi; \\\nlist='aaa experimental filters loggers metadata ssl http dav/main generators dav/fs mappers'; for i in $list; do \\\n    target=\"shared-build\"; \\\n    if test \"$i\" = \".\"; then \\\n        made_local=yes; \\\n        target=\"local-shared-build\"; \\\n    fi; \\\n    if test \"$i\" != \"srclib\"; then \\\n        (cd $i && make $target) || exit 1; \\\n    fi; \\\ndone; \\\nif test -f 'modules.mk'; then \\\n    if test -n ''; then \\\n        echo \"Building shared: \"; \\\n        if test \"$made_local\" != \"yes\"; then \\\n                make \"local-shared-build\" || exit 1; \\\n        fi; \\\n    fi; \\\nfi; \\\nif test `pwd` = \"/usr/local/src/httpd-2.0.63\"; then \\\n        echo \"\" ; \\\nfi\nmake: Fatal error: Command failed for target `shared-build-recursive'\nCurrent working directory /usr/local/src/httpd-2.0.63/modules\n*** Error code 1\nThe following command caused the error:\nif test `pwd` = \"/usr/local/src/httpd-2.0.63\"; then \\\n    echo \"\" ; \\\nfi; \\\nlist='srclib os server modules support'; for i in $list; do \\\n    target=\"shared-build\"; \\\n    if test \"$i\" = \".\"; then \\\n        made_local=yes; \\\n        target=\"local-shared-build\"; \\\n    fi; \\\n    if test \"$i\" != \"srclib\"; then \\\n        (cd $i && make $target) || exit 1; \\\n    fi; \\\ndone; \\\nif test -f 'modules.mk'; then \\\n    if test -n ''; then \\\n        echo \"Building shared: \"; \\\n        if test \"$made_local\" != \"yes\"; then \\\n                make \"local-shared-build\" || exit 1; \\\n        fi; \\\n    fi; \\\nfi; \\\nif test `pwd` = \"/usr/local/src/httpd-2.0.63\"; then \\\n        echo \"\" ; \\\nfi\nmake: Fatal error: Command failed for target `shared-build-recursive'\nCurrent working directory /usr/local/src/httpd-2.0.63\n*** Error code 1\nThe following command caused the error:\notarget=`echo all-recursive|sed s/-recursive//`; \\\nlist='  srclib os server modules support'; \\\nfor i in $list; do \\\n    if test -d \"$i\"; then \\\n        target=\"$otarget\"; \\\n        echo \"Making $target in $i\"; \\\n        if test \"$i\" = \".\"; then \\\n                made_local=yes; \\\n                target=\"local-$target\"; \\\n        fi; \\\n        (cd $i && make $target) || exit 1; \\\n    fi; \\\ndone; \\\nif test \"$otarget\" = \"all\" && test -z 'httpd shared-build suexec'; then \\\n    made_local=yes; \\\nfi; \\\nif test \"$made_local\" != \"yes\"; then \\\n    make \"local-$otarget\" || exit 1; \\\nfi\nmake: Fatal error: Command failed for target `all-recursive'", "attachment_id": null, "id": 135836, "creator": "uhrreynolds@gmail.com", "time": "2010-04-01T15:27:41Z", "bug_id": 49034, "creation_time": "2010-04-01T15:27:41Z", "is_private": false}, {"count": 1, "tags": [], "creator": "uhrreynolds@gmail.com", "attachment_id": null, "id": 135880, "time": "2010-04-05T17:34:46Z", "bug_id": 49034, "creation_time": "2010-04-05T17:34:46Z", "is_private": false, "text": "Only thing I've found related to it.\n\nhttp://mail-index.netbsd.org/pkgsrc-users/2009/08/25/msg010531.html\n\nOn Tue, Aug 25, 2009 at 07:48:30AM +0200, Thomas Klausner wrote:\n> Hi!\n> \n> On current/amd64, apache, mutt-devel and kdelibs3 fail with similar\n> errors:\n\nThe \"pointer target type\" errors are because the OpenSSL guys finally\napplied some const poisoning.  Unfortunately, they took so long to do so\nthat most applications' default GCC settings now make this an effective\nAPI change.\n\nThe STACK errors are just annoying.  It's one of those pseudo-openssl-\ninternal parts of the API (like OPENSSL_malloc()/OPENSSL_free()) that\nis documented in the manual pages for other parts of the API and can't\nbe avoided if you want to do certain things that are allegedly supported;\nyet since it's not directly documented itself I guess they feel free to\nchange it and break people's application code.\n\nThese problems are making me think that, despite the pain, it might be\nbest to back OpenSSL down to 1.0.0-beta3 in our tree.  That would also\nmake life easier for people who want to use the FIPS canister in the\nfuture, I think.\n\nThor"}, {"count": 2, "tags": [], "creator": "uhrreynolds@gmail.com", "text": "Apparently I was wrong, will not compile at all with openssl 1.0.0 with the same error.\n\nLDFLAGS=\"-L/usr/local/lib -L/usr/local/ssl/lib -R/usr/local/lib -R/usr/local/ssl/lib\" \\\n./configure \\\n--enable-layout=Apache \\\n--enable-mods-shared=\"all\" \\\n--enable-ssl \\\n--with-ssl=/usr/local/ssl \\\n--enable-suexec", "id": 135884, "time": "2010-04-05T18:22:56Z", "bug_id": 49034, "creation_time": "2010-04-05T18:22:56Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 49034, "attachment_id": 30628, "text": "Created attachment 30628\nPatch to enable compilation against OpenSSL 1.0\n\nPatch to enable compilation of httpd 2.0 with OpenSSL 1.0.\nNote that httpd 2.2 and higher compile cleanly against OpenSSL 1.0 out of the box.\nBefore using the patch consider upgrading to a still supported version of httpd (e.g. 2.4 or 2.2).", "id": 168785, "time": "2013-07-25T14:49:27Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2013-07-25T14:49:27Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 49034, "attachment_id": null, "id": 172488, "time": "2014-01-19T18:59:09Z", "creator": "covener@gmail.com", "creation_time": "2014-01-19T18:59:09Z", "is_private": false, "text": "patch available here for 2.0, works in 2.2 -- closing report."}]