[{"count": 0, "tags": [], "creator": "dawid.weiss@cs.put.poznan.pl", "attachment_id": 22845, "id": 122321, "time": "2008-11-09T12:25:57Z", "bug_id": 46172, "creation_time": "2008-11-09T12:25:57Z", "is_private": false, "text": "Created attachment 22845\nA diff against ANT_17_BRANCH\n\nXSLT processing tasks allows one to specify custom transformer factory, including  a custom class path for this factory's classes. This is very handy as it allows custom XSLT processor to be embedded in the project. However, when used, it throws ClassNotFoundExceptions from TraXLiaison (1.6.x, 1.7.x, head).\n\nThe bug is caused by the following snippet in TraXLiaison:\n\nprivate TransformerFactory getFactory() throws BuildException {\n  // ... [SNIP]\n            try {\n                Class clazz = Class.forName(factoryName);\n                tfactory = (TransformerFactory) clazz.newInstance();\n            } catch (Exception e) {\n  // ... [SNIP]\n\nXSLT task sets a custom context class loader, but it is not used here, because Class.forName(String) is equivalent to calling:\n\nClass.forName(String, definingClass.getClassLoader());\n\nIn other words, ANT's class loader is used to look up the class where context class loader should be used (this is a common mistake). This can be fixed in a number of ways -- by using Class.forName(String, Thread.currentThread().getContextClassLoader()) or by using the context class loader explicitly (as in the attached patch)."}, {"count": 1, "tags": [], "text": "*** Bug 41314 has been marked as a duplicate of this bug. ***", "attachment_id": null, "bug_id": 46172, "id": 122784, "time": "2008-11-24T08:13:23Z", "creator": "bodewig@apache.org", "creation_time": "2008-11-24T08:13:23Z", "is_private": false}, {"count": 2, "attachment_id": null, "creator": "bodewig@apache.org", "text": "*** Bug 29596 has been marked as a duplicate of this bug. ***", "id": 122789, "time": "2008-11-24T08:29:49Z", "bug_id": 46172, "creation_time": "2008-11-24T08:29:49Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "bodewig@apache.org", "text": "svn revision 720773 uses the thread context classloader but falls back to Class.forName with no args if the factory cannot be found in the thread context loader.\n", "id": 122861, "time": "2008-11-26T01:21:28Z", "bug_id": 46172, "creation_time": "2008-11-26T01:21:28Z", "is_private": false, "attachment_id": null}]