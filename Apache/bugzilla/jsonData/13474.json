[{"count": 0, "tags": [], "bug_id": 13474, "text": "While using multiple reverse entries within one virtual host like the following:\n<VirtualHost 192.168.1.2>\nServerName www.inetsrv.net\nServerAlias inetsrv.net\nServerAdmin webmaster@inetsrv.net\nDocumentRoot /usr/local/www/www.inetsrv.net\n\nAlias /errors/ \"/usr/local/wwwroot/www.inetsrv.net/errors/\"\nErrorDocument 502 /errors/502.html\n\nProxyPass \"/demo\" http://10.1.1.1:81/demo\nProxyPassReverse \"/demo\" http://10.1.1.1:81/demo\nProxyPass \"/lang\" http://10.1.1.1:81/lang\nProxyPassReverse \"/lang\" http://10.1.1.1:81/lang\n</VirtualHost>\nIt of course work properly, but after I've added proxy to the server \nconfiguration:\n\n<IfModule mod_proxy.c>\nProxyRequests On\n\n<Proxy *>\n    Order deny,allow\n    Deny from all\n    Allow from .inetsrv.net\n</Proxy>\n\nProxyVia On\n\n</IfModule>\n\nA workstation called w2k.inetsrv.net will see the virtual host correctly, and \nthe proxy function worked well also. But unfortunatelly, it stopped me from \nvisiting the www.inetsrv.net from a computer which is not in the inetsrv.net \ndomain if I don't specify full path (e.g. \nhttp://www.inetsrv.net/demo/index.htm), for example, a URL like \nhttp://www.inetsrv.net/demo will return 403.\n\nIt seemed that the mod_proxy will affect reverse proxy's behavior. When sending \nrequest like GET /, the proxy module will process it first, then it found the \nIP should be denied. What confused me is that full path will work, this \nbehavior is really strange, and I think this should be considered to be a \nmistake because proper HTTP requests like GET /, without saying \"GET \nhttp://www.microsoft.com/\" by specifying full protocol qualifier, should be \nconsidered by the httpd server itself, not the mod_proxy.", "id": 24244, "time": "2002-10-09T23:03:11Z", "creator": "delphij@frontfree.net", "creation_time": "2002-10-09T23:03:11Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "slive@apache.org", "is_private": false, "count": 1, "id": 24640, "time": "2002-10-16T17:03:59Z", "bug_id": 13474, "creation_time": "2002-10-16T17:03:59Z", "text": "I believe the point is that ALL proxy requests are affected by\n<proxy> blocks, not just forward-proxy requests.\n\nOne way to avoid this problem would be to setup your forward-proxy as \na separate <virtualhost> and put the <proxy> block inside the <virtualhost>\nblock.\n\nI don't believe this is a bug.  It is designed to work this way.\n\nThanks for using Apache."}]