[{"count": 0, "attachment_id": null, "bug_id": 15504, "is_private": false, "id": 28032, "time": "2002-12-18T20:52:21Z", "creator": "scottjohnson1@hotmail.com", "creation_time": "2002-12-18T20:52:21Z", "tags": [], "text": "The JSP positiveGetValues test relies on an enumeration returning values in a \nspecific order.  The values are compared to strings in the Golden File to \ndetermine whether the test passes or fails.  The relevant section of the test \njsp is:\n\n\n javax.servlet.jsp.tagext.TagSupport ts = new \njavax.servlet.jsp.tagext.TagSupport();\n\n    ts.setValue(\"Color1\",\"red\");\n    ts.setValue(\"Color2\",\"green\");\n%>\n<!-- Returns only keys names -->\n<%\n\n    java.util.Enumeration e = ts.getValues();\n    while (e.hasMoreElements()) {\n        String v = (String)e.nextElement();\n        out.println(v);\n    }\n%>                      \n\n\nThe problem here is that the javax.servlet.jsp.tagext.TagSupport class uses a \nHashtable to hold the keys and values (set via the setValues() method).  \nHashtable is not guaranteed to preserve ordering.  Therefore, when the \nenumeration is used to retreive the values and print out the keys, the order in \nwhich they will be returned is unpredictable.  Comparing the keys to the \nstrings in the goldenfile, which are in a fixed order, is not a valid test.\nWe have found that this test fails on HP, but passes on other platforms."}]