[{"count": 0, "tags": [], "bug_id": 47984, "text": "This is using the default regex engine. Example build file demonstrating the problem:\n\n----\nbuild@build ~ $ cat build.xml\n<project name=\"testme\" default=\"doit\" basedir=\".\">\n\n       <target name=\"check\">\n               <uptodate property=\"noneed\">\n                       <srcfiles dir=\".\" includes=\"t.xml\"/>\n                       <mapper type=\"regexp\" from=\"xml$\" to=\"txt\"/>\n               </uptodate>\n       </target>\n\n       <target name=\"doit\" depends=\"check\" unless=\"noneed\">\n               <copy file=\"t.xml\" tofile=\"t.txt\" overwrite=\"true\"/>\n       </target>\n\n</project>\n----\n\nSay that t.txt doesn't exist. On the first run, it is created. So far, so good.\n\nBut on the second run, the copy is _also_ executed, and that is totally\nunexpected. This has been verified with ant 1.6.5 and ant 1.7.1. If I\nrun ant -v, here's what I see in the output:\n\n---\ncheck:\n [uptodate] t.xml added as txt doesn't exist.\n----\n\nTwo bugs here:\n\n* the regex /xml$/ didn't match t.xml, it should have matched;\n* the resulting file name is garbled: at the very least, the mapper should have left it untouched.\n\nA simple sed command returns the expected result:\n\n----\nfg@erwin ~ $ echo t.xml | sed 's,xml$,txt,'\nt.txt\n----\n\n\nThis is especially frustrating since the documentation says:\n\n----\nIf the source file name matches the from pattern, the target file name will be constructed from the to pattern\n----\n\nAnd /xml$/ DOES match t.xml. Nothing has ever said that regexes had to match their whole input!", "id": 131088, "time": "2009-10-12T13:14:35Z", "creator": "fgaliegue@gmail.com", "creation_time": "2009-10-12T13:14:35Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 47984, "attachment_id": null, "text": "used the documentation suggestion from your mail to the user list (sent about a year ago, I know) in svn revision 1027518", "id": 141058, "time": "2010-10-26T08:48:55Z", "creator": "bodewig@apache.org", "creation_time": "2010-10-26T08:48:55Z", "is_private": false}]