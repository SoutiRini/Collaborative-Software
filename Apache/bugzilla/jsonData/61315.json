[{"count": 0, "tags": [], "bug_id": 61315, "attachment_id": null, "id": 199866, "time": "2017-07-18T17:10:03Z", "creator": "chandra.chekuri@here.com", "creation_time": "2017-07-18T17:10:03Z", "is_private": false, "text": "We are migrating from ant 1.6.2 to ant 1.10.1 and depending on the isset we execute a work flow .. below is the code.\n\nconfig.xml\n\n<RMOBINTERMEDIUM>\n        <UserName></UserName>\n        <Password></Password>\n        <SID></SID>\n        <Host></Host>\n        </RMOBINTERMEDIUM>\n\n\n<if>\n    <isset property=\"RMOBINTERMEDIUM.UserName\"/>\n       <then>\n        <echo message=\"schema exists\"/>\n       </then>\n\n\nwhen executing the above code i am getting the \"schema exists: printed .while the config.xml has no value set. below is the output\n\n[sqlplus] 11:53:21 SQL> Disconnected from Oracle Database 12c Enterprise Edition Release 12.1.0.2.0 - 64bit Production\n  [sqlplus] With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP,\n  [sqlplus] Advanced Analytics and Real Application Testing options\n     [echo] rmob exists\n\n\nNOTE: it still works when i got back to ant 1.6.2 but we need to upgrade to 1.10.1 and the behavior of the isset is not working as desired."}, {"count": 1, "tags": [], "bug_id": 61315, "attachment_id": null, "text": "sorry i had a typo in previous result ,this is the result we are seeing \n\n  [echo] schema exists", "id": 199867, "time": "2017-07-18T17:14:26Z", "creator": "chandra.chekuri@here.com", "creation_time": "2017-07-18T17:14:26Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 61315, "attachment_id": null, "text": "You don't show how you read the file.\n\nCan you put the whole example into a simple self-contained build file? Preferably without using ant-contrib, so we get that out of consideration.\n\n\n<project>\n  <condition property=\"schema\" value=\"exists\">\n    <isset property=\"RMOBINTERMEDIUM.UserName\"/>\n  </condition>\n  <property name=\"schema\" value=\"doesn't exist\"/>\n  <echo>schema: ${schema}</echo>\n</project>\n\nshould work well enough for the test. With 1.10.1 I get\n\n$ ant -f /tmp/x.xml -DRMOBINTERMEDIUM.UserName=x\nBuildfile: /tmp/x.xml\n     [echo] schema: exists\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds\n$ ant -f /tmp/x.xml\nBuildfile: /tmp/x.xml\n     [echo] schema: doesn't exist\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds", "id": 199868, "time": "2017-07-18T17:47:28Z", "creator": "bodewig@apache.org", "creation_time": "2017-07-18T17:47:28Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 61315, "attachment_id": null, "text": "when I use <condition> <isset> it works fine .\n\ncan you test it <if> <isset> and see if its returning the same result ?", "id": 199869, "time": "2017-07-18T19:06:29Z", "creator": "chandra.chekuri@here.com", "creation_time": "2017-07-18T19:06:29Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 61315, "attachment_id": null, "id": 199871, "time": "2017-07-19T08:30:34Z", "creator": "jan@materne.de", "creation_time": "2017-07-19T08:30:34Z", "is_private": false, "text": "This works for with Ant-1.9.6 and Ant-1.10.1\n\n<project xmlns:antcontrib=\"antlib:net.sf.antcontrib\">\n  <echo>using built in condition</echo>\n  <echo>------------------------</echo>\n  <condition property=\"schema\" value=\"exists\">\n    <isset property=\"RMOBINTERMEDIUM.UserName\"/>\n  </condition>\n  <property name=\"schema\" value=\"doesn't exist\"/>\n  <echo>schema: ${schema}</echo>\n\n  <echo/>\n  <echo>using ant-contrib::if</echo>\n  <echo>---------------------</echo>\n  <mkdir dir=\"tmp\"/>\n  <get \n    src=\"http://search.maven.org/remotecontent?filepath=ant-contrib/ant-contrib/1.0b3/ant-contrib-1.0b3.jar\"\n    dest=\"tmp\"\n  >\n    <flattenmapper/>\n  </get>\n  <taskdef uri=\"antlib:net.sf.antcontrib\"\n           resource=\"net/sf/antcontrib/antlib.xml\"\n           classpath=\"tmp/ant-contrib-1.0b3.jar\"/>\n  <antcontrib:if>\n    <isset property=\"RMOBINTERMEDIUM.UserName\"/>\n    <antcontrib:then>\n      <echo message=\"schema exists\"/>\n    </antcontrib:then>\n    <antcontrib:else>\n      <echo message=\"schema does not exists\"/>\n    </antcontrib:else>\n  </antcontrib:if>\n\n</project>"}, {"count": 5, "tags": [], "creator": "bodewig@apache.org", "text": "works fine with ant-contrib as well\n\n$ cat f.xml \n<project>\n  <taskdef resource=\"net/sf/antcontrib/antlib.xml\">\n    <classpath>\n      <pathelement location=\"ant-contrib-1.0b3.jar\"/>\n    </classpath>\n  </taskdef>\n  <if>\n    <isset property=\"RMOBINTERMEDIUM.UserName\"/>\n    <then>\n      <echo>schema exists</echo>\n    </then>\n    <else>\n      <echo>schema doesn't exists</echo>\n    </else>\n  </if>\n</project>\n/tmp$ ant -f f.xml \nBuildfile: /tmp/f.xml\n     [echo] schema doesn't exists\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds\n$ ant -f f.xml -DRMOBINTERMEDIUM.UserName=x\nBuildfile: /tmp/f.xml\n     [echo] schema exists\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds\n\nSo I think it is not isset but rather the way you actually set the property (and which you haven't shown). I'm guessing now that you are using xmlproperty - if so bug 26286 which has been fixed for Ant 1.7.0 might be the root cause. If my guess is correct, then your current script depends on something we have considered a bug and fixed almost 11 years ago.", "id": 199930, "time": "2017-07-21T14:58:58Z", "bug_id": 61315, "creation_time": "2017-07-21T14:58:58Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 61315, "attachment_id": null, "text": "(In reply to Stefan Bodewig from comment #5)\n\n> If my guess is correct, then your current script depends on\n> something we have considered a bug and fixed almost 11 years ago.\n\nand you may work around it by using\n\n<and>\n  <isset property=\"RMOBINTERMEDIUM.UserName\"/>\n  <not>\n    <equals arg1=\"\" args2=\"${RMOBINTERMEDIUM.UserName}\"/>\n  </not>\n</and>\n\nwhich should work with 1.6.2 and 1.7.0+", "id": 199931, "time": "2017-07-21T15:02:45Z", "creator": "bodewig@apache.org", "creation_time": "2017-07-21T15:02:45Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 61315, "attachment_id": null, "text": "yes, that fixed it .\n\nthat is how i change my code and it works now.", "id": 199932, "time": "2017-07-21T15:06:12Z", "creator": "chandra.chekuri@here.com", "creation_time": "2017-07-21T15:06:12Z", "is_private": false}]