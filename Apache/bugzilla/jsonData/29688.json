[{"count": 0, "tags": [], "bug_id": 29688, "text": "The following Exception was thrown:\n\njava.lang.NullPointerException\n        at org.apache.catalina.startup.HostConfig.deployDescriptors\n(HostConfig.java:490)    \n\nA first analyse of source code:\n\n    protected void deployDescriptors(File configBase, String[] files)\n\nthe \"files[]\" parameter might be null, but is not tested on null in body of \nmethod. The calling functions also don't check for a null array. Simple \nsolution would be:\n\nuse:\n\n    protected void deployDescriptors(File configBase, String[] files) {\n\n        if (!deployXML || files==null)\n           return;\n        [...]\n\ninstead of:\n\n    protected void deployDescriptors(File configBase, String[] files) {\n\n        if (!deployXML)\n           return;\n        [...]\n\nIn all cases i found the calling methods use the File.list() mtehod to create \narray without check, but according to J2SE API Doc \"null\" is allowed as return \nvalue of \"list()\", so a check might make sense.", "id": 59583, "time": "2004-06-19T13:25:36Z", "creator": "sd@mediaclockwork.de", "creation_time": "2004-06-19T13:25:36Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 29688, "is_private": false, "text": "After taking a deeper look into source code, there are several more points \nwhere the files list is not checked against null values.\n", "id": 59753, "time": "2004-06-23T08:57:38Z", "creator": "sd@mediaclockwork.de", "creation_time": "2004-06-23T08:57:38Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 29688, "text": "The NPE is actually blocking the whole Tomcat, because of infinite number of \nexceptions (s. log). So could someone please commit the patch I provided \nearlier. It's just simple null value checking.\n\nThanks,\n Sascha\n\nfrom LOG:\n\n25.06.2004 10:06:58 \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor \nprocessChildren\nSCHWERWIEGEND: Exception invoking periodic operation:\njava.lang.NullPointerException\n        at org.apache.catalina.startup.HostConfig.deployDescriptors\n(HostConfig.java:445)\n        at org.apache.catalina.startup.HostConfig.deployApps\n(HostConfig.java:427)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1064)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent\n(HostConfig.java:327)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent\n(LifecycleSupport.java:119)\n        at org.apache.catalina.core.StandardHost.backgroundProcess\n(StandardHost.java:800)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChild\nren(ContainerBase.java:1619)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChild\nren(ContainerBase.java:1628)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run\n(ContainerBase.java:1608)\n        at java.lang.Thread.run(Thread.java:534)\n25.06.2004 10:06:58 \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor \nprocessChildren\nSCHWERWIEGEND: Exception invoking periodic operation:\njava.lang.NullPointerException\n        at org.apache.catalina.startup.HostConfig.deployDescriptors\n(HostConfig.java:445)\n        at org.apache.catalina.startup.HostConfig.deployApps\n(HostConfig.java:427)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1064)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent\n(HostConfig.java:327)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent\n(LifecycleSupport.java:119)\n        at org.apache.catalina.core.StandardHost.backgroundProcess\n(StandardHost.java:800)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChild\nren(ContainerBase.java:1619)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChild\nren(ContainerBase.java:1628)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run\n(ContainerBase.java:1608)\n        at java.lang.Thread.run(Thread.java:534)\n25.06.2004 10:06:58 \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor \nprocessChildren\nSCHWERWIEGEND: Exception invoking periodic operation:\njava.lang.NullPointerException\n        at org.apache.catalina.startup.HostConfig.deployDescriptors\n(HostConfig.java:445)\n        at org.apache.catalina.startup.HostConfig.deployApps\n(HostConfig.java:427)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1064)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent\n(HostConfig.java:327)\n        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent\n(LifecycleSupport.java:119)\n        at org.apache.catalina.core.StandardHost.backgroundProcess\n(StandardHost.java:800)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChild\nren(ContainerBase.java:1619)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChild\nren(ContainerBase.java:1628)\n        at \norg.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run\n(ContainerBase.java:1608)\n        at java.lang.Thread.run(Thread.java:534)\ni", "id": 59861, "time": "2004-06-25T08:15:18Z", "creator": "sd@mediaclockwork.de", "creation_time": "2004-06-25T08:15:18Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "pr@objektpark.de", "attachment_id": null, "id": 59885, "time": "2004-06-25T16:47:16Z", "bug_id": 29688, "creation_time": "2004-06-25T16:47:16Z", "is_private": false, "text": "Hey,\n\nI have made a patch to fix some NPE risks.\n\nalso this patch include the xml.mkdir fix.\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=29038\n\nregards\npeter"}, {"count": 4, "attachment_id": 11947, "bug_id": 29688, "text": "Created attachment 11947\nHostConfig", "id": 59886, "time": "2004-06-25T16:47:48Z", "creator": "pr@objektpark.de", "creation_time": "2004-06-25T16:47:48Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "creator": "sd@mediaclockwork.de", "text": "As mentioned before the NPE is blocking the tomcat, it's even impossible to \nshut down the server:\n\nCatalina.stop: java.net.SocketException: Broken pipe\njava.net.SocketException: Broken pipe\n        at java.net.SocketOutputStream.socketWrite0(Native Method)\n        at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\n        at java.net.SocketOutputStream.write(SocketOutputStream.java:115)\n        at org.apache.catalina.startup.Catalina.stopServer(Catalina.java:414)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:333)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:424)\n\nThe server shuts down normally if the NPE is not in the log-file, whenever the \nNPE is in the logs, the shutdown script failed with above exception (no need to \ntell me something about killing processes). I would really appreciate if the \npatch could be applied and committed.  Any reason why this didn't happen ? If \nthere are any concerns, could you please tell me ?\n\n-Sascha", "count": 5, "id": 60139, "time": "2004-07-05T08:59:26Z", "bug_id": 29688, "creation_time": "2004-07-05T08:59:26Z", "is_private": false}, {"count": 6, "tags": [], "creator": "pr@objektpark.de", "attachment_id": null, "id": 60140, "time": "2004-07-05T09:33:33Z", "bug_id": 29688, "creation_time": "2004-07-05T09:33:33Z", "is_private": false, "text": "Hey,\n\nhere my HostConfig.class.\n\ncopy to server/classes/org/apache/catalina/startup\n\nregards\npeter"}, {"count": 7, "tags": [], "creator": "pr@objektpark.de", "attachment_id": 12026, "id": 60141, "time": "2004-07-05T09:34:37Z", "bug_id": 29688, "creation_time": "2004-07-05T09:34:37Z", "is_private": false, "text": "Created attachment 12026\nHostConfig with NPE und XML.mkdirs Patch"}, {"count": 8, "tags": [], "bug_id": 29688, "attachment_id": null, "is_private": false, "id": 61185, "time": "2004-07-27T17:01:12Z", "creator": "yoavs@computer.org", "creation_time": "2004-07-27T17:01:12Z", "text": "*** Bug 30331 has been marked as a duplicate of this bug. ***"}, {"count": 9, "tags": [], "bug_id": 29688, "text": "*** Bug 30249 has been marked as a duplicate of this bug. ***", "id": 61254, "time": "2004-07-28T16:08:16Z", "creator": "yoavs@computer.org", "creation_time": "2004-07-28T16:08:16Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 29688, "text": "*** Bug 30462 has been marked as a duplicate of this bug. ***", "id": 61540, "time": "2004-08-04T14:38:48Z", "creator": "yoavs@computer.org", "creation_time": "2004-08-04T14:38:48Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 29688, "is_private": false, "text": "Patch applied in TOMCAT_5_0 branch as suggested here.  Modified portions \napplied on CVS HEAD as HostConfig on HEAD has already been significantly \nmodified for Tomcat 5.5.", "id": 62293, "time": "2004-08-21T19:20:34Z", "creator": "yoavs@computer.org", "creation_time": "2004-08-21T19:20:34Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 29688, "is_private": false, "text": "*** Bug 30899 has been marked as a duplicate of this bug. ***", "id": 62598, "time": "2004-08-27T16:38:27Z", "creator": "yoavs@computer.org", "creation_time": "2004-08-27T16:38:27Z", "attachment_id": null}]