[{"count": 0, "tags": [], "creator": "bruce.elliott@knowledgenet.com", "attachment_id": null, "id": 5831, "time": "2001-09-20T08:21:48Z", "bug_id": 3751, "creation_time": "2001-09-20T08:21:48Z", "is_private": false, "text": "The use of a propertyFile allows great flexibility in the Replace task.  But \nwhen the propertyFile attribute is used, it requires that replacefilters are \ncreated which specify which token will be replaced by the value associated with \na given property key.  Complex files may have very large numbers of tokens to \nbe replaced.  They may also be in a state of flux, where the number and name of \ntokens to replace changes frequently.  This starts to become a maintenance \nissue.\n\nOne option, presented here, is to allow the following alternative.  If a \npropertyFile is used and there are no task attribute nor nested replacefilte(s) \ntasks, use the propertyFile key(s) as the token to replace and replace it with \nthe associated propertyFile value(s).  This allows the ant build file to remain \nunchanged even as the source file and the propertyFile continue to evolve.\n\nThe change specified above was made on our version of Ant1.4.  It is very \nconvenient.  A diff of the original Replace.java file and the modified version \nis included below.\n\n190a191,204\n>             if (token == null && replacefilters.size() == 0) {\n>                 Enumeration props = properties.propertyNames();\n>                 String prop;\n>                 String value;\n>                 Replacefilter filter;\n>                 while (props.hasMoreElements()) {\n>                     prop = (String)props.nextElement();\n>                     value = (String)properties.getProperty(prop);\n>                     filter = new Replacefilter();\n>                     filter.setToken(prop);\n>                     filter.setValue(value);\n>                     replacefilters.add(filter);\n>                 }\n>             }\n231c245\n<         if (token == null && replacefilters.size() == 0) {\n---\n>         if (token == null && replacefilters.size() == 0 && propertyFile == \nnull) {\n233c247\n<                 + \"must be specified\";\n---\n>                 + \"must be specified when no property file is specified\";"}, {"count": 1, "tags": [], "creator": "umagesh@apache.org", "is_private": false, "id": 10254, "attachment_id": null, "bug_id": 3751, "creation_time": "2002-02-03T02:04:22Z", "time": "2002-02-03T02:04:22Z", "text": "Please drop a documentation patch also in here.  Next time, please use \ncvs diff -u to send a patch."}, {"count": 2, "tags": [], "text": "something very similar to your suggestion is included in nightly build 2002-04-05\n\n*** This bug has been marked as a duplicate of 7320 ***", "attachment_id": null, "id": 12861, "creator": "bodewig@apache.org", "time": "2002-04-05T14:38:01Z", "bug_id": 3751, "creation_time": "2002-04-05T14:38:01Z", "is_private": false}]