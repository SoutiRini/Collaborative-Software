[{"count": 0, "attachment_id": null, "creator": "Tim.Whittington@orionhealth.com", "text": "Using nightly snapshot ant_20080922041906.tar.gz, my builds are failing where they use the AntXtras (http://antxtras.sourceforge.net) callforeach/foreach tasks (and possibly others - there's a heirarchy of tasks starting at 'call' that this could apply to).\nI'm using AntXtras 0.5.1 (the latest available build).\n\nWhat appears to be happening is that the loop variable (defined as i=\"\" in the task) is not being set.\nThis same build script works with Ant 1.6.x and 1.7.x.\n\nExample build file that demonstrates this issue is:\n\n<?xml version=\"1.0\"?>\n<project name=\"AntXTest\" default=\"build\" basedir=\".\" xmlns:antx=\"antlib:com.idaremedia.antx\">\n        <description>\n                Demonstrates breakage of Antx foreach task on Ant SVN snapshot\n        </description>\n\n        <property name=\"build.dir\" value=\"${basedir}\"/>\n        \n        <!-- AntXtras Tasks from \"com/idaremedia/antx/antlib.xml\" -->\n        <taskdef resource=\"com/idaremedia/antx/antlib.xml\" uri=\"antlib:com.idaremedia.antx\">\n                <classpath>\n                        <fileset dir=\"${build.dir}/antx\">\n                                <include name=\"JWare_apis.jar\"/>\n                                <include name=\"AntX_tasks.jar\"/>\n                        </fileset>\n                </classpath>\n        </taskdef>\n\n        <target name=\"build\">\n                <antx:foreach i=\"loop\" list=\"1,2,3,4\"  mode=\"local\" >\n                        <echo message=\"Index is ${loop}\"/>\n                </antx:foreach>\n        </target>\n        \n</project>\n\nAnd a verbose log of the foreach task failing to work:\n\nApache Ant version 1.8.0alpha compiled on September 22 2008\nBuildfile: /Users/archie/Projects/OrionPlatform/Tools/com.orchestral.common.hibernate3/build.xml\nDetected Java version: 1.6 in: /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home\nDetected OS: Mac OS X\nparsing buildfile /Users/archie/Projects/OrionPlatform/Tools/com.orchestral.common.hibernate3/build.xml with URI = file:/Users/archie/Projects/OrionPlatform/Tools/com.orchestral.common.hibernate3/build.xml\nProject base dir set to: /Users/archie/Projects/OrionPlatform/Tools/com.orchestral.common.hibernate3\nparsing buildfile jar:file:/Users/archie/Downloads/ant/dist/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI = jar:file:/Users/archie/Downloads/ant/dist/lib/ant.jar!/org/apache/tools/ant/antlib.xml\nparsing buildfile jar:file:/Users/archie/Projects/OrionPlatform/Tools/com.orchestral.common.hibernate3/antx/AntX_tasks.jar!/com/idaremedia/antx/antlib.xml with URI = jar:file:/Users/archie/Projects/OrionPlatform/Tools/com.orchestral.common.hibernate3/antx/AntX_tasks.jar!/com/idaremedia/antx/antlib.xml\n[antlib:com.idaremedia.antx] Could not load definitions from resource com/idaremedia/antx/antlib.xml. It could not be found.\n[presetdef] defining preset antlib:com.idaremedia.antx:macrolocals\n[presetdef] defining preset antlib:com.idaremedia.antx:macroisolate\n[presetdef] defining preset antlib:com.idaremedia.antx:looplocals\n[presetdef] defining preset antlib:com.idaremedia.antx:loopisolate\n[presetdef] defining preset antlib:com.idaremedia.antx:pathproperty\n[presetdef] defining preset antlib:com.idaremedia.antx:true\nBuild sequence for target(s) `build' is [build]\nComplete build sequence is [build, ]\n\nbuild:\n [macrodef] creating macro  foreach622517_macrodef\nProperty \"loop\" has not been set\n     [echo] Index is ${loop}\nProperty \"loop\" has not been set\n     [echo] Index is ${loop}\nProperty \"loop\" has not been set\n     [echo] Index is ${loop}\nProperty \"loop\" has not been set\n     [echo] Index is ${loop}", "id": 120847, "time": "2008-09-22T03:43:56Z", "bug_id": 45858, "creation_time": "2008-09-22T03:43:56Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "mbenson@apache.org", "text": "Yes, AntXtras properties tasks are built atop an API that was declared unstable from the outset.  When we redesigned that API (relatively) recently, I attempted to engage Wascally Wabbit (AntXtras' author) to minimize disruption and/or get input from the project that was arguably the heaviest known consumer of that API in the wild.  I received no response.", "id": 122164, "time": "2008-11-03T18:07:08Z", "bug_id": 45858, "creation_time": "2008-11-03T18:07:08Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "wascallywabbit@earthling.net", "text": "(In reply to comment #1)\n> Yes, AntXtras properties tasks are built atop an API that was declared unstable\n> from the outset.  When we redesigned that API (relatively) recently, I\n> attempted to engage Wascally Wabbit (AntXtras' author) to minimize disruption\n> and/or get input from the project that was arguably the heaviest known consumer\n> of that API in the wild.  I received no response.\n> \n\nHi Mark,\nCan you point me to the conversations about the redesign of properties helper for Ant 1.8. I recall some questions on the ant-dev mailing list but I'll admit I've not been paying particularly close attention for quite some time.\n\n-The Wabbit", "id": 122391, "time": "2008-11-11T17:48:24Z", "bug_id": 45858, "creation_time": "2008-11-11T17:48:24Z", "tags": [], "is_private": false}]