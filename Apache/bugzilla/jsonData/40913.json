[{"count": 0, "tags": [], "creator": "scottjoh@us.ibm.com", "attachment_id": null, "id": 95505, "time": "2006-11-06T16:24:05Z", "bug_id": 40913, "creation_time": "2006-11-06T16:24:05Z", "is_private": false, "text": "In org.apache.jasper.compiler.Validator.checkXmlAttributes(), the validation \nfor deferred values and methods is raising an exception when an rtexprvalue \nattribute is legitimate.\n\n------Stacktrace------\norg.apache.jasper.JasperException: \norg.apache.jasper.JasperException: /index.jsp(83,0)\n      According to TLD or attribute directive in tag file, attribute items \ndoes not accept any expressions\n    org.apache.jasper.servlet.JspServletWrapper.handleJspException\n(JspServletWrapper.java:565)\n    org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:354)\n    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:320)\n    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\n\n\n------relevant code in checkXmlAttributes()------\n if (!deferred && (tldAttrs[j].isDeferredMethod() || tldAttrs\n[j].isDeferredValue())) {\n     // Only deferred expressions are allowed for this attribute\n     err.jspError(n, \"jsp.error.attribute.custom.non_rt_with_expr\",\n             tldAttrs[j].getName());\n }\n\n------testcase------\n<c:forEach var=\"k\" items=\"${colors}\">\n  <li><font color=\"${k}\">This line is ${k}</font>.\n</c:forEach>\n\nThe TLD for JSTL 1.2 says items can be an rtexprvalue and also a deferred-\nvalue.  So the above usage is correct.\nAttaching a testcase WAR.\n\n------summary------\nI don't think this code is really necessary; at least, it needs to be relaxed \nto allow tai.canBeRequestTime() values."}, {"count": 1, "tags": [], "bug_id": 40913, "attachment_id": 19094, "text": "Created attachment 19094\nTestcase for 40913", "id": 95506, "time": "2006-11-06T16:25:28Z", "creator": "scottjoh@us.ibm.com", "creation_time": "2006-11-06T16:25:28Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 40913, "attachment_id": null, "is_private": false, "id": 95520, "time": "2006-11-07T02:56:48Z", "creator": "remm@apache.org", "creation_time": "2006-11-07T02:56:48Z", "text": "Ok, I have adjusted the check."}]