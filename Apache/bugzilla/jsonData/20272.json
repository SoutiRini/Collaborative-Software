[{"count": 0, "tags": [], "bug_id": 20272, "attachment_id": null, "id": 37867, "time": "2003-05-27T20:00:18Z", "creator": "ajack@trysybase.com", "creation_time": "2003-05-27T20:00:18Z", "is_private": false, "text": "I am working with centipede which is a heavy user of this property helper. It \nhas entries like this:\n\n  <property name=\"project.src.dir\" \n            value=\"${jxpath:/references/module.xml/root/module/project\n[@name=$project.name]/code[@type='java/plain']/@dir}\"/>\n\nIf no <code element exists I get an unhelpful exception (below) -- without any \ncontext whatsoever. Maybe a fix is along the lines of  \n\n\tif ((null==iter)||(!iter.hasNext())\n\norg.apache.tools.ant.taskdefs.optional.JXPath.java line 132 instead of:\n\n            if(iter==null){\n                return \"null\";\n            }\n\nbefore the call to:\n\n            result += iter.next();\n\n------------------------------------------------------------\n\n\n   java.util.NoSuchElementException\n        at org.apache.commons.jxpath.ri.EvalContext.next(EvalContext.java:177)\n        at org.apache.commons.jxpath.ri.compiler.Expression$ValueIterator.next\n(Expression.java:175)\n        at \norg.apache.tools.ant.taskdefs.optional.JXPath$JXPathPropertyHelper.getPropertyHo\nok(JXPath\n.java:136)\n        at org.apache.tools.ant.PropertyHelper.getPropertyHook\n(PropertyHelper.java:197)\n        at org.apache.tools.ant.PropertyHelper.getProperty\n(PropertyHelper.java:443)\n        at org.apache.tools.ant.PropertyHelper.replaceProperties\n(PropertyHelper.java:289)\n        at org.apache.tools.ant.Project.replaceProperties(Project.java:486)\n        at org.apache.tools.ant.RuntimeConfigurable.maybeConfigure\n(RuntimeConfigurable.java:310)\n        at org.apache.tools.ant.RuntimeConfigurable.maybeConfigure\n(RuntimeConfigurable.java:266)\n        at org.apache.tools.ant.UnknownElement.maybeConfigure\n(UnknownElement.java:143)\n        at org.apache.tools.ant.Task.perform(Task.java:347)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.helper.ProjectHelper2.parse\n(ProjectHelper2.java:122)\n        at org.apache.tools.ant.ProjectHelper.configureProject\n(ProjectHelper.java:120)\n        at org.apache.tools.ant.Main.runBuild(Main.java:597)\n        at org.apache.tools.ant.Main.start(Main.java:197)\n        at org.apache.tools.ant.Main.main(Main.java:235)\nF:\\data\\CommonsVersion\\smoke-test>"}, {"count": 1, "tags": [], "creator": "jan@materne.de", "attachment_id": null, "text": "I think, that has nothing to with Ant - more with centipede, so here it is the \nwrong bugtracking system.\n\nMy opinion, so I don\u00b4t close the bug.", "id": 37888, "time": "2003-05-28T04:59:48Z", "bug_id": 20272, "creation_time": "2003-05-28T04:59:48Z", "is_private": false}, {"count": 2, "tags": [], "creator": "nick@chalko.com", "attachment_id": null, "is_private": false, "id": 37890, "time": "2003-05-28T05:10:25Z", "bug_id": 20272, "creation_time": "2003-05-28T05:10:25Z", "text": "This is more likely a commons.jxpath bug.  Is is OK just to change the \"Product\"\nto comons."}, {"count": 3, "tags": [], "creator": "nick@chalko.com", "is_private": false, "id": 37891, "attachment_id": null, "bug_id": 20272, "creation_time": "2003-05-28T05:12:04Z", "time": "2003-05-28T05:12:04Z", "text": "\n\n*** This bug has been marked as a duplicate of 15388 ***"}, {"count": 4, "tags": [], "creator": "ajack@trysybase.com", "attachment_id": null, "text": "JXPATH is correctly (IMHO) returning an iterator that has no contents. \nDebatably it ought return null for no iterator, but I think that is a weak \nargument & an \"empty\" iterator is quite correct.\n\nANT code (I pointed to the line) is testing for a null iterator, not testing \nfor an empty iterator, before it tries to call \"next()\". As such, it is causing \nthe exception to be thrown.\n\nPlease see:\n\nhttp://java.sun.com/j2se/1.4.1/docs/api/java/util/Iterator.html#next()\nhttp://java.sun.com/j2se/1.4.1/docs/api/java/util/NoSuchElementException.html\n\nThis is a plain and simple iterator use bug, and the culprit is the ant code.\n\norg.apache.tools.ant.taskdefs.optional.JXPath.java line 132 \n\nAlso, I do NOT see how this is a duplicate of another 15388. It is related to \nJXPATH, but it is a separate bug IMHO.", "id": 37913, "time": "2003-05-28T11:56:01Z", "bug_id": 20272, "creation_time": "2003-05-28T11:56:01Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 20272, "text": "Created attachment 6607\nFix NPE on no iterator.", "id": 38240, "time": "2003-06-03T06:49:41Z", "creator": "nick@chalko.com", "creation_time": "2003-06-03T06:49:41Z", "is_private": false, "attachment_id": 6607}, {"count": 6, "tags": [], "text": "FWIIW: It is a NoSuchElementException on empty iterator, but the patch is \ncorrect.", "is_private": false, "bug_id": 20272, "id": 38254, "time": "2003-06-03T11:39:46Z", "creator": "ajack@trysybase.com", "creation_time": "2003-06-03T11:39:46Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "levylambert@tiscali-dsl.de", "attachment_id": null, "text": "Patch submitted. The hardest was to get all the dependencies of this embed \nproposal so that I could check that it compiles.", "id": 38412, "time": "2003-06-05T07:56:39Z", "bug_id": 20272, "creation_time": "2003-06-05T07:56:39Z", "is_private": false}]