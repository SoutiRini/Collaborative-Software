[{"count": 0, "tags": [], "bug_id": 43965, "is_private": false, "id": 111110, "attachment_id": null, "creator": "odeta@hard.lt", "creation_time": "2007-11-26T11:57:56Z", "time": "2007-11-26T11:57:56Z", "text": "Please take a look here: http://lists.exim.org/lurker/message/\n20060415.062127.564f54cb.en.html\n\nAnd this is the answer: http://lists.exim.org/lurker/message/\n20060417.211007.174ea05d.en.html\n\nQuote:\n\"It's a bug in Apache: it should mark its listening socket close-on-exec.\""}, {"count": 1, "tags": [], "text": "Correct links: http://lists.exim.org/lurker/message/20060415.062127.564f54cb.en.html\nhttp://lists.exim.org/lurker/message/20060417.211007.174ea05d.en.html", "is_private": false, "bug_id": 43965, "id": 111111, "time": "2007-11-26T12:04:08Z", "creator": "agne@hard.lt", "creation_time": "2007-11-26T12:04:08Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 43965, "is_private": false, "count": 2, "id": 111158, "time": "2007-11-27T11:53:50Z", "creator": "sf@sfritsch.de", "creation_time": "2007-11-27T11:53:50Z", "text": "It's not clear that this is an Apache bug. One could argue that mod_php should \nuse apr_proc_create instead of using exec. See\n\nhttp://bugs.php.net/bug.php?id=38915"}, {"count": 3, "tags": [], "text": "Please take a look at http://bugs.php.net/bug.php?id=38915:\n\n[4 Dec 6:43pm UTC] crescentfreshpot at yahoo dot com\n\nJust to add to the dialog, Apache 1.x seems to have tried to address the\nissue of leaked FDs itself. http://www.apache.org/dist/httpd/CHANGES_1.3\nsays:\n\nChanges with Apache 1.3.28\n\n*) Certain 3rd party modules would bypass the Apache API and not\n   invoke ap_cleanup_for_exec() before creating sub-processes.\n   To such a child process, Apache's file descriptors (lock\n   fd's, log files, sockets) were accessible, allowing them\n   direct access to Apache log file etc.  Where the OS allows,\n   we now add proactive close functions to prevent these file\n   descriptors from leaking to the child processes.\n\nAs far as I understand the above, apache thinks it can know when\n[mod_]php does a system-level popen() and cleanup the parent FDs before\nexec(). Is that actually possible?\n\n[4 Dec 7:14pm UTC] stas@php.net\n\nI think that's exactly what FD_CLOEXEC does.", "is_private": false, "id": 111432, "creator": "agne@hard.lt", "time": "2007-12-04T13:05:04Z", "bug_id": 43965, "creation_time": "2007-12-04T13:05:04Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "sf@sfritsch.de", "text": "This has been fixed in apr 1.3.6", "id": 131068, "time": "2009-10-11T07:00:26Z", "bug_id": 43965, "creation_time": "2009-10-11T07:00:26Z", "is_private": false, "attachment_id": null}]