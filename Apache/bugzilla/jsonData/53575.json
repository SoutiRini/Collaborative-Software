[{"count": 0, "text": "I'm having a rather strange problem with the Batik rasterizer running on FreeBSD (8.2). I'm not sure why this occurs - I'm just posting what I know, please ask if you need any additional information.\n\nI'm trying to render an SVG file to PDF with batik-rasterizer.jar. On my home computer (Arch Linux) everything works as expected. On my server, everything renders - except for the text(s) in the SVG file. However, when I rotate the text slightly (adding transform=\"rotate(0.01)\") the text DOES render correctly.\n\nI tried several different builds - the binary distribution from the Batik site, Batik 1.7 from FreeBSD ports, and I built Batik 1.8pre from source using the 19/07/12 nightly. All three produce the same result. Trying with and without custom fonts doesn't make any difference either.\n\nThis is a test SVG file I used:\n-------------------------------------------------------------\n<?xml version=\"1.0\" standalone=\"no\" ?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 20010904//EN\" \"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"800\" height=\"600\" xml:space=\"preserve\">\n    <defs>\n\t<style type=\"text/css\"><![CDATA[\n@font-face { font-family: 'BebasNeue'; src: url('fonts/BebasNeue.otf'); }\n@font-face { font-family: 'DeliciousRoman'; src: url('fonts/DeliciousRoman.otf'); }\n]]></style>\n</defs>\n<g transform=\"translate(453 93) scale(6.64 6.64) rotate(0)\">\n    <text font-family=\"'BebasNeue'\" font-size=\"24\" font-weight=\"100\" style=\"stroke: none; stroke-width: 1; fill: rgb(0,100,20); opacity: 1;\" transform=\"translate(-56.5 -18.14)\">\n\t<tspan x=\"0\" y=\"25.34\" fill=\"rgb(0,100,20)\">Hallo wereld!</tspan>\n\t</text>\n    </g>\n<g transform=\"translate(291 250)\">\n    <text font-family=\"'DeliciousRoman'\" font-size=\"40\" font-weight=\"100\" style=\"stroke: none; stroke-width: 1; fill: rgb(0,0,255); opacity: 1;\" transform=\"translate(-144 -30.24)\">\n\t<tspan x=\"0\" y=\"42.24\" fill=\"rgb(0,0,255)\">Dit is een editor...</tspan>\n\t</text>\n    </g>\n</svg>\n\n-------------------------------------------------------------\n\nThe version above results in an empty PDF.\nWhen I change the file as follows, both texts are shown in the resulting PDF:\n\n-------------------------------------------------------------\n\n11c11\n< <g transform=\"translate(453 93) scale(6.64 6.64) rotate(0)\">\n---\n> <g transform=\"translate(453 93) scale(6.64 6.64) rotate(0.01)\">\n\n16c16\n< <g transform=\"translate(291 250)\">\n---\n> <g transform=\"translate(291 250) rotate(0.01)\">", "bug_id": 53575, "is_private": false, "id": 160751, "time": "2012-07-20T10:28:55Z", "creator": "kevin@levity.nl", "creation_time": "2012-07-20T10:28:55Z", "tags": [], "attachment_id": null}, {"attachment_id": 29085, "tags": [], "bug_id": 53575, "text": "Created attachment 29085\nTest SVG file 1", "count": 1, "id": 160752, "time": "2012-07-20T10:30:23Z", "creator": "kevin@levity.nl", "creation_time": "2012-07-20T10:30:23Z", "is_private": false}, {"attachment_id": 29086, "tags": [], "bug_id": 53575, "text": "Created attachment 29086\nTest SVG file 2", "count": 2, "id": 160753, "time": "2012-07-20T10:30:35Z", "creator": "kevin@levity.nl", "creation_time": "2012-07-20T10:30:35Z", "is_private": false}, {"attachment_id": 29087, "tags": [], "creator": "kevin@levity.nl", "text": "Created attachment 29087\nResulting PDF file 1", "count": 3, "id": 160754, "time": "2012-07-20T10:30:44Z", "bug_id": 53575, "creation_time": "2012-07-20T10:30:44Z", "is_private": false}, {"attachment_id": 29088, "tags": [], "creator": "kevin@levity.nl", "text": "Created attachment 29088\nResulting PDF file 2", "count": 4, "id": 160755, "time": "2012-07-20T10:30:54Z", "bug_id": 53575, "creation_time": "2012-07-20T10:30:54Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 53575, "is_private": false, "count": 5, "id": 160992, "time": "2012-07-30T00:00:36Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2012-07-30T00:00:36Z", "text": "(In reply to comment #0)\n> I'm having a rather strange problem with the Batik rasterizer running on\n> FreeBSD (8.2).\n> \n> I'm trying to render an SVG file to PDF with batik-rasterizer.jar. On my\n> home computer (Arch Linux) everything works as expected. On my server,\n> everything renders - except for the text(s) in the SVG file. However, when I\n> rotate the text slightly (adding transform=\"rotate(0.01)\") the text DOES\n> render correctly.\n\nThis looks like a duplicate of bug 41451, although it was only known to occur in MacOSX.\n\nAlso, I suggest taking a look at bug 47917 for possible hints on how to workaround this.\n\n\n> I'm not sure why this occurs - I'm just posting what I know,\n> please ask if you need any additional information.\n\nPlease provide some details regarding:\n1. What is the JVM being used? (At least, vendor and version.)\n2. Is the server running a headless environment? (Or is there a graphics adapter attached.)"}, {"count": 6, "tags": [], "bug_id": 53575, "attachment_id": null, "text": "(In reply to comment #5)\n\nThanks for looking into this. \nFor now, using a slight rotation suffices during development - I will look into your links / suggested workaround later on (though it's possible my application will be used on a different (Linux) machine).\n\n> Please provide some details regarding:\n> 1. What is the JVM being used? (At least, vendor and version.)\n> 2. Is the server running a headless environment? (Or is there a graphics\n> adapter attached.)\n\nI used openjdk6 installed from the FreeBSD ports. On my home machine it would not work correctly with openjdk7, so I didn't try to use that version.\nThis is a headless environment.", "id": 161008, "time": "2012-07-30T15:27:19Z", "creator": "kevin@levity.nl", "creation_time": "2012-07-30T15:27:19Z", "is_private": false}]