[{"count": 0, "attachment_id": null, "bug_id": 16237, "is_private": false, "id": 29678, "time": "2003-01-19T13:36:25Z", "creator": "volker@vrsoft.de", "creation_time": "2003-01-19T13:36:25Z", "tags": [], "text": "Using \"super\" / \"sub\" in property vertical-align will place the characters\ntoo high / too low. This is due to a minor mistake in class LineArea.\nIn method verticalAlign() the offset of the super/subscript is computed by\ntaking 2/3 of ascender for the choosen font. The value which should be used\nmust be 1/3 because you want to get a 2/3 overlap with the text before/after.\n\n    \n    /**\n     * Balance (vertically) the inline areas within this line.\n     */\n    public void verticalAlign() {\n        int superHeight = -this.placementOffset;\n        int maxHeight = this.allocationHeight;\n        Enumeration e = children.elements();\n        while (e.hasMoreElements()) {\n            Box b = (Box)e.nextElement();\n            if (b instanceof InlineArea) {\n                InlineArea ia = (InlineArea)b;\n                if (ia instanceof WordArea) {\n                    ia.setYOffset(placementOffset);\n                }\n                if (ia.getHeight() > maxHeight) {\n                    maxHeight = ia.getHeight();\n                }\n                int vert = ia.getVerticalAlign();\n                if (vert == VerticalAlign.SUPER) {\n                    int fh = fontState.getAscender();\n                    // was: ia.setYOffset((int)(placementOffset - (2.0 * fh / \n3.0)));\n                    ia.setYOffset((int)(placementOffset - (fh / 3.0)));\n                } else if (vert == VerticalAlign.SUB) {\n                    int fh = fontState.getAscender();\n                    // was: ia.setYOffset((int)(placementOffset + (2.0 * fh / \n3.0)));\n                    ia.setYOffset((int)(placementOffset + (fh / 3.0)));\n                }"}, {"count": 1, "tags": [], "bug_id": 16237, "text": "Created attachment 4488\ndiff file which corrects this bug", "id": 29679, "time": "2003-01-19T13:37:09Z", "creator": "volker@vrsoft.de", "creation_time": "2003-01-19T13:37:09Z", "is_private": false, "attachment_id": 4488}, {"count": 2, "tags": [], "text": "Thanks for your contribution but I would rather not apply it to the\nmaintenance branch because there are quite a few stylesheets out there\nwhich use vertical-align and this patch would probably make the documents\nlook wrong (even if it corrects vertical-align)\n\nOf course we will consider this for the redesign.", "is_private": false, "id": 29715, "creator": "christian.geisert@isu-gmbh.de", "time": "2003-01-20T15:21:42Z", "bug_id": 16237, "creation_time": "2003-01-20T15:21:42Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 16237, "text": "Bug fixed in latest Trunk (rev 584703), and probably in FOP 0.94 and earlier\n0.9x versions (see previous comment).", "count": 3, "id": 109633, "time": "2007-10-23T07:56:03Z", "creator": "pascal.sancho@takoma.fr", "creation_time": "2007-10-23T07:56:03Z", "is_private": false}, {"count": 4, "tags": [], "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "is_private": false, "id": 156066, "creator": "gadams@apache.org", "time": "2012-04-01T06:56:25Z", "bug_id": 16237, "creation_time": "2012-04-01T06:56:25Z", "attachment_id": null}]