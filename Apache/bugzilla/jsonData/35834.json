[{"count": 0, "tags": [], "text": "When the flags RE.MATCH_SINGLELINE and RE.MATCH_CASEINDEPENDENT are both set, \nthe program dies if the scanned file is too long.  If I set either of the \nflags, but NOT BOTH, the file is scanned successfully.  However, if I set both \nflags, the program dies if scanned file is over a specific length.  \n\ncode snippet:\nint iFlags = RE.MATCH_CASEINDEPENDENT|RE.MATCH_SINGLELINE;\t\t\t\nRE re = new RE(strPattern,iFlags);\t\t\t\nReader reader = new FileReader(strFilePathAndName);\nCharacterIterator in = new ReaderCharacterIterator(reader);\nint iEnd=0;\nwhile(re.match(in,iEnd))\n{\t\t\t\t\t\t\t\t\t\niEnd= re.getParenEnd(0)\t\t\t\t\t\t\t\t\nString strFoundTag = re.getParen(0);\n...\n}", "is_private": false, "bug_id": 35834, "id": 77598, "time": "2005-07-23T01:19:14Z", "creator": "nancy.l.farnsworth@aphis.usda.gov", "creation_time": "2005-07-23T01:19:14Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "How does the program 'die', please describe.\nPlease also provide sample strPattern and file.\nThanks.", "is_private": false, "id": 78418, "creator": "vgritsenko@apache.org", "time": "2005-08-11T16:26:45Z", "bug_id": 35834, "creation_time": "2005-08-11T16:26:45Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "nancy.l.farnsworth@aphis.usda.gov", "attachment_id": null, "text": "die  \nThe program simply stops executing.\nI do not receive any errors.  I do not\nsee any exceptions in the log.\n\ncomments:\nThe code executes successfully when I do\nnot set the flag to RE.MATCH_SINGLELINE.\nUnfortunately, but as would be expected,\nI do not get a match when the\ncontent is continued onto the next line.\nHowever, when I set the flag to RE.MATCH_\nSINGLELINE, the program simply stops\nexecuting partially through the file.  If the file\nis short, it completes successfully.  However,\nif the file is longer, execution stops.  I receive\nno errors or thrown exceptions.\n\nnotes:\nI have since changed the pattern to read as follows:\n(<A[^>]*>)|(<APPLET[^>]*>)|(<AREA[^>]*>)|       etc\nIt seems to work.  \n\nthoughts:\nEven if the old pattern and code are stupid, it\nseems I should still get some type of error.\nI would think that there would be some type\nof exception that I could trap or at least see\nin the log.\n\nproblem pattern:\n(<A(.)*>)|(<APPLET(.)*>)|(<AREA(.)*>)|       etc\n\ncode:\n//Search html file for pattern.\t\t\t\ntry\n\t{\n\t//Construct an RE object\n\tint flags = RE.MATCH_CASEINDEPENDENT|RE.MATCH_SINGLELINE; \t\t\n\t\n\tRE re = new RE(strPattern,flags);\n\n\t//Use the object to match to the input.\n\tReader r = new FileReader(strFilePathAndName);\n\tCharacterIterator in = new ReaderCharacterIterator(r);\n\tint end=0;\n\n\twhile(re.match(in,end))\n\t\t{\n\t\t//Reset starting point in input file\n\t\tend = re.getParenEnd(0);\n\t\t\t\t\n\t\t//Retrieve Tag\n\t\tString strFoundTag = re.getParen(0);\n\t\tlogger.debug(\"Found Tag:\"+strFoundTag);\n\n\t\t//Process tag appropriately.\n\t\t//Retrieve urls from tag and add to array of urls.\n\t\tIterator iterator = alResourceElementsList.iterator();\n\t\twhile (iterator.hasNext())\n\t\t\t{\n\t\t\t//Search for each possible element of the tag.\n\t\t\tString strElement = (String)iterator.next();\n\t\t\tint iBeginUrl = strFoundTag.trim().toUpperCase().indexOf\n(strElement);\n\t\t\t//If an element is found, retrieve the url from the \nelement.\n\t\t\tchar cEndChar = '\"';\n\t\t\tif (iBeginUrl >= 0)  //Element found\n\t\t\t\t{\n\t\t\t\tint iEndUrl = \t\t\t\t\t\n\t                      strFoundTag.trim().toUpperCase().indexOf\n(cEndChar,iBeginUrl+strElement.length()+2);\n\t\t\t\tif( ! ((iBeginUrl+2) <= iEndUrl) )\n\t\t\t\t\t{\n\t\t\t\t\tlogger.error(\"Cannot retrieve url from \nelement in scanHtmlFileForResourceTags.\");\n\t\t\t\t\tlogger.error\n(\"FilePathAndName: \"+strFilePathAndName);\n\t\t\t\t\tlogger.error(\"Tag: \"+ strFoundTag);\n\t\t\t\t\tlogger.error(\"Element: \"+ strElement);\n\t\t\t\t\treturn 1;\n\t\t\t\t\t}\t\t\t\t\t\n\t\t\t\tString strTempUrl = strFoundTag.substring\n(iBeginUrl+strElement.length()+2,iEndUrl);\n\n\t\t\t\t//TO DO: Test for CODEBASE/CODE for APPLET!\t\n\t\t\t\t\t\n\t\t\t\tString strUrl;\n\t\t\t\tif (strElement.trim().equalsIgnoreCase\n(\"CODEBASE\"))\n\t\t\t\t\t{\n\t\t\t\t\t//Do not code until determined that \nthis code is necessary.\n\t\t\t\t\tstrUrl = strTempUrl;\n\t\t\t\t\tlogger.error(\"APPLET tag contains \nelement CODEBASE.\");\n\t\t\t\t\tlogger.error(\"Program does not contain \ncode to process CODEBASE.\");\n\t\t\t\t\tlogger.error(\"Base url to resolve \nrelative url is current directory of html file.\");\n\t\t\t\t\tlogger.error(\"The corresponding \ndatabase entry is incorrect.\");\n\n\t\t\t\t\t}//EndProcessCodeBase\n\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\tstrUrl = strTempUrl;\n\t\t\t\t\t}//EndProcessAllOtherTags\n\t\t\t\t\t\t\t\n\t\t\t\tlogger.debug(\"Url:\"+strUrl);\n\t\t\t\t\t\t\n\t\t\t\t//Save each url that does not start with \"#\"\n\t\t\t\t//(Tags A and FRAME can start w/# - see doc for \ndetails)\n\t\t\t\tif (strUrl != null)\n\t\t\t\t\t{\n\t\t\t\t\tif (strUrl.startsWith(\"#\"))\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}//EndUrlNotNull\n\n\t\t\t\t//Save url.\n\t\t\t\talUrl.add(strUrl);\n\t\t\t\t//Save tag name only, not entire tag.\n\t\t\t\tString strSpace = \" \";\n\t\t\t\tString strTag = strFoundTag.substring\n(1,strFoundTag.indexOf(strSpace));\n\t\t\t\talLinkTagType.add(strTag);\n\n\t\t\t\t}///EndElementFound\n\t\t\t\t\t\n\t\t\t}//EndIterateThroughElements\n\n\t\t\t\t}//EndWhileMatchesInHtmlFile\n\t\t\t\t\n\t\t\t\t\n\t\t\t}//EndTryFindMatchesInHtml\n\t\tcatch(RESyntaxException e)\n\t\t\t{\n\t\t\tlogger.error(\"Regular Expression syntax expression.\");\t\n\t\t\tlogger.error(\"File Path and Name:\"+strFilePathAndName);\n\t\t\treturn 1;\n\t\t\t}\t\t \n\t\tcatch(FileNotFoundException e)\n\t\t\t{\n\t\t\tlogger.error(\"FileNotFoundException on \nscanHtmlFileForResourceTags\");\t\n\t\t\tlogger.error(\"File Not Found:\"+strFilePathAndName);\n\t\t\treturn 1;\n\t\t\t}\n\t\tlogger.info(\"End of Routine\");\n\n\ninput file:\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\n \n<html>\n<head>\n<title>Index of Pages in AWStats Web Site</title>\n<!--- link rel=\"STYLESHEET\" type=\"text/css\" href=\"../styles/w3c_oldstyle.css\"---\n>\n<link rel=\"STYLESHEET\" type=\"text/css\" href=\"../styles/default.css\">\n \n</head>\n \n<body>\n<div id=\"pageContent\">\n<h1>Documentation for AWStats Pilot Deployment in APHIS</h1>\n<h2>Current Notices</h2>\n<p>This weekend, 1-3 July, testing will be preformed to determine is AWStats \ncan process logs\n   for periods within a month which were missed in a previous run. The \napplication\n   will also be tested to determine if logs for a previous month can be run.  In\n   other words, can logs for March be processed if the April logs have already \nbe run.</p>\n<h2>Web Server Reports</h2>\n<ul class=\"menuLinks\" title=\"Dynamic WWW Web Server Reports for Current Month\">\n  <ul class=\"menuLinkItem\">\n    <li class=\"source\"><a href=\"/awstats/awstats.pl?config=www.aphis.usda.gov\"\n     target=\"_blank\">AWStats Report for Web Server WWW for Current Month</a> \n(Opens new window)</li>\n    <li class=\"desc\">This link connects the viewer to a collection of AWStats \nreports\n    for the APHIS Internet web server (www.aphis.usda.gov) for the current \nmonth.  As\n    these report are created dynamically, be aware that the report can take up \nto 10\n    seconds to appear at high-demand times.</li>\n    <li class=\"format\">(html)</li>\n  </ul>\n  <ul class=\"menuLinks\" title=\"List of Static WWW Web Server Reports for \nCurrent Month\">\n    <ul class=\"menuLinkItem\">\n      <li class=\"source\"><a href=\"./AWStats_report_index.html\">List of AWStats \nReports for Web Server WWW for Current Month<\n/a></li>\n      <li class=\"desc\">This link connects the viewer to a list of static \nAWStats reports\n        for the APHIS Internet web server (www.aphis.usda.gov) for the current \nmonth.  These reports are\n        regenerated every day at 3:00 AM.</li>\n      <li class=\"format\">(html)</li>\n    </ul>\n  </ul>\n</ul>\n \n<h2>AWStats Internal On-Line Resources</h2>\n<ul class=\"menuLinks\" title=\"AWStats Internal On-Line Resources\">\n  <ul class=\"menuLinkItem\">\n    <li class=\"source\"><a \nhref=\"/pages/how_to_run_web_analytic_reports_using_AWStats.html\">\n    How to Run Web Analytic Reports Using AWStats</a></li>\n    <li class=\"desc\">This document briefly describes how to run standard\n          reports using the AWStats web server log analysis tool as a CGI \napplication\n          from a browser</li>\n    <li class=\"format\">(html)</li>\n  </ul>\n  <ul class=\"menuLinkItem\">\n    <li class=\"source\"><a href=\"/pages/example_AWStats_reports.html\">\n    Examples of Creating On-Line reports with AWStats</a></li>\n    <li class=\"desc\">This document provides several examples of running AWstats \nreports\n      as a CGI script using a browser.</li>\n    <li class=\"format\">(html)</li>\n  </ul>\n  <ul class=\"menuLinkItem\">\n    <li class=\"source\"><a href=\"/docs/AWStats_pilot_options.doc\">\n    AWStats Options for Pilot Deployment</a></li>\n    <li class=\"desc\">This document provides a brief overview of the\n    business case for deploying AWStats web analytics application in\n    a pilot mode. Also details configuration for AWStats during\n    pilot mode.</li>\n    <li class=\"format\">(MS-Word)</li>\n  </ul>\n  <ul class=\"menuLinkItem\">\n    <li class=\"source\"><a href=\"/pages/faq.html\">\n    Frequently Asked Questions</a></li>\n    <li class=\"desc\">This document provides answers to questions\n    frequently asked by AWStats users.</li>\n    <li class=\"format\">(html)</li>\n </ul>\n  <ul class=\"menuLinkItem\">\n    <li class=\"source\"><a href=\"/pages/todo.html\">\n    AWStats Web Site To-Do List</a></li>\n    <li class=\"desc\">This document is a list of items that need to be \naccomplished\n    to support the AWStats pilot deployment.</li>\n    <li class=\"format\">(html)</li>\n  </ul>\n</ul>\n<h2>AWStats External On-Line Resources</h2>\n<ul class=\"menuLinks\" title=\"AWStats External On-Line Resources\">\n  <ul class=\"menuLinkItem\">\n    <li class=\"source\"><a href=\"http://awstats.sourceforge.net/index.html\">\n    AWStats Project Page</a></li>\n    <li class=\"desc\">Main Sourceforge project web site for AWStats, which bills\n    itself as a free powerful and featureful tool that generates advanced web,\n    streaming, ftp or mail server statistics, graphically.</li>\n    <li class=\"format\">(html)</li>\n  </ul>\n  <ul class=\"menuLinkItem\">\n    <li class=\"source\"><a href=\"http://sourceforge.net/forum/forum.php?\nforum_id=43428\">\n    AWStats Forum (General)</a></li>\n    <li class=\"desc\">AWStats forum for general users hosted by Sourceforge.</li>\n    <li class=\"format\">(php)</li>\n  </ul>\n  <ul class=\"menuLinkItem\">\n    <li class=\"source\"><a \nhref=\"http://awstats.sourceforge.net/docs/awstats.pdf\">\n    AWStats Documentation</a></li>\n    <li class=\"desc\">User documentation for AWStats.\n    <li class=\"format\">(pdf)</li>\n  </ul>\n</ul>\n</div>\n</body>\n</html>\n\n\n\n\n", "id": 78542, "time": "2005-08-16T18:15:10Z", "bug_id": 35834, "creation_time": "2005-08-16T18:15:10Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 35834, "attachment_id": null, "is_private": false, "id": 78557, "time": "2005-08-17T02:41:00Z", "creator": "vgritsenko@apache.org", "creation_time": "2005-08-17T02:41:00Z", "text": "This simple program (adapted from what you have sent) shows what is really\nhappening:\n\nimport org.apache.regexp.CharacterIterator;\nimport org.apache.regexp.RE;\nimport org.apache.regexp.ReaderCharacterIterator;\n\nimport java.io.FileReader;\nimport java.io.IOException;\n\npublic class Test {\n    public static void main(String[] args) throws IOException {\n        RE re = new RE(\"(<A(.)*>)|(<APPLET(.)*>)|(<AREA(.)*>)\",\n                       RE.MATCH_CASEINDEPENDENT | RE.MATCH_SINGLELINE);\n        CharacterIterator in = new ReaderCharacterIterator(new\nFileReader(\"index.html\"));\n        int end = 0;\n        try {\n            while (re.match(in, end)) {\n                System.out.println(\"Matched \" + re.getParen(0));\n                end = re.getParenEnd(0);\n            }\n            System.out.println(\"Done\");\n        } catch (Throwable e) {\n            System.out.println(\"Exception \" + e);\n        }\n    }\n}\n\nIf you run it with the input file 'index.html' in the same directory, you'd see:\n\n  Exception java.lang.StackOverflowError\n\nIt is duplicate of bug #764. If you have ideas how to fix it please comment in\nbug #764.\n\n*** This bug has been marked as a duplicate of 764 ***"}]