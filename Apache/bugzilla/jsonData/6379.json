[{"count": 0, "attachment_id": null, "bug_id": 6379, "is_private": false, "id": 10560, "time": "2002-02-11T21:55:10Z", "creator": "marco.sarti@plangroup.it", "creation_time": "2002-02-11T21:55:10Z", "tags": [], "text": "I have implemented a personal Realm authentication method for my web \napplication. \nMy Realm concrete instance creates a MyPrincipal object that contain user \ninformation.\nIn servlets/JSPs it is not possibile to cast the request.getUserPrincipal() to \nMyPrincipal due to different classloader used (a ClassCastException is thrown).\nIn this case, it is impossible to pass user information from logon program \n(Realm) to servlet/JSP."}, {"text": "One MyPrincipal is from the Catalina CL, which the other is from the Webapp CL.\nThis causes a class cast, which is normal.\nTo avoid this, place your MyPrincipal class in the common classloader, and it\nshould work.", "tags": [], "creator": "remm@apache.org", "is_private": false, "count": 1, "id": 10563, "time": "2002-02-11T22:34:38Z", "bug_id": 6379, "creation_time": "2002-02-11T22:34:38Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "marco.sarti@plangroup.it", "text": "In my installation, MyPrincipal .jar stays in $CATALINA_HOME/server/lib because \ncatalina needs it on startup. But in this case the jar is not in webapp \nclasspath. \nIf I put it in $CATALINA_BASE/common/lib catalina does not \"see\" the class \nbecause it is not in its classpath.\nIf I put the jar in both directories, I have the problem of different \nclassloader.\nThe only way I have found is to put the jar in a global classpath, modifying \nthe script catalina.sh.\n\n", "id": 10575, "time": "2002-02-12T10:08:40Z", "bug_id": 6379, "creation_time": "2002-02-12T10:08:40Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "remm@apache.org", "is_private": false, "text": "The common CL is the parent of the server CL. The Catalina core can load any \nclass which is there. If it can't, then you must be doing something really \nwrong.", "id": 10594, "time": "2002-02-12T16:27:26Z", "bug_id": 6379, "creation_time": "2002-02-12T16:27:26Z", "attachment_id": null}]