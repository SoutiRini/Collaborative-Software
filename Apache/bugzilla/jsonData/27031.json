[{"count": 0, "tags": [], "bug_id": 27031, "attachment_id": null, "is_private": false, "id": 52485, "time": "2004-02-18T14:15:38Z", "creator": "thedew@hotmail.com", "creation_time": "2004-02-18T14:15:38Z", "text": "I was unable to get the <script language=\"javascript\"> task to work in version \n1.6.0 and 1.6.1 of ant using BSF 2.3.0RC1.  Running ant on a build script \ncontaining this task (regardless of whether or not there was javascript to \nexecute within the <script> tags) would give the following exception when using \na 1.3.1 JDK:\n\njava.lang.NoSuchMethodError\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1224)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1063)\n        at org.apache.tools.ant.Main.runBuild(Main.java:632)\n        at org.apache.tools.ant.Main.startAnt(Main.java:183)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:197)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:56)\n--- Nested Exception ---\njava.lang.NoSuchMethodError\n        at org.apache.bsf.engines.javascript.JavaScriptEngine.eval(Unknown Sourc\ne)\n        at org.apache.bsf.util.BSFEngineImpl.exec(Unknown Source)\n        at org.apache.bsf.BSFManager$6.run(Unknown Source)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.apache.bsf.BSFManager.exec(Unknown Source)\n        at org.apache.tools.ant.util.ScriptRunner.executeScript(ScriptRunner.jav\na:130)\n        at org.apache.tools.ant.taskdefs.optional.Script.execute(Script.java:61)\n\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:301)\n        at org.apache.tools.ant.Target.performTasks(Target.java:328)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1063)\n        at org.apache.tools.ant.Main.runBuild(Main.java:632)\n        at org.apache.tools.ant.Main.startAnt(Main.java:183)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:197)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:56)\n\n\n\nIf I used JDK 1.4.2, I would get a similar, but different exception:\n\njava.lang.NoSuchMethodError: org.mozilla.javascript.Context.getDebuggableEngine(\n)Lorg/mozilla/javascript/debug/DebuggableEngine;\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1224)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1063)\n        at org.apache.tools.ant.Main.runBuild(Main.java:632)\n        at org.apache.tools.ant.Main.startAnt(Main.java:183)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:197)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:56)\nCaused by: java.lang.NoSuchMethodError: org.mozilla.javascript.Context.getDebugg\nableEngine()Lorg/mozilla/javascript/debug/DebuggableEngine;\n        at org.apache.bsf.engines.javascript.JavaScriptEngine.eval(Unknown Sourc\ne)\n        at org.apache.bsf.util.BSFEngineImpl.exec(Unknown Source)\n        at org.apache.bsf.BSFManager$6.run(Unknown Source)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.apache.bsf.BSFManager.exec(Unknown Source)\n        at org.apache.tools.ant.util.ScriptRunner.executeScript(ScriptRunner.jav\na:130)\n        at org.apache.tools.ant.taskdefs.optional.Script.execute(Script.java:61)\n\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:301)\n        at org.apache.tools.ant.Target.performTasks(Target.java:328)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n        ... 5 more\n--- Nested Exception ---\njava.lang.NoSuchMethodError: org.mozilla.javascript.Context.getDebuggableEngine(\n)Lorg/mozilla/javascript/debug/DebuggableEngine;\n        at org.apache.bsf.engines.javascript.JavaScriptEngine.eval(Unknown Sourc\ne)\n        at org.apache.bsf.util.BSFEngineImpl.exec(Unknown Source)\n        at org.apache.bsf.BSFManager$6.run(Unknown Source)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at org.apache.bsf.BSFManager.exec(Unknown Source)\n        at org.apache.tools.ant.util.ScriptRunner.executeScript(ScriptRunner.jav\na:130)\n        at org.apache.tools.ant.taskdefs.optional.Script.execute(Script.java:61)\n\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:301)\n        at org.apache.tools.ant.Target.performTasks(Target.java:328)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1063)\n        at org.apache.tools.ant.Main.runBuild(Main.java:632)\n        at org.apache.tools.ant.Main.startAnt(Main.java:183)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:197)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:56)\n\n\nI tried rolling back to BSF 2.2, however,I could not get this to work with ant \n1.6.x (I would get a java.lang.NoClassDefFoundError: \norg/apache/bsf/BSFException...but I think you documented in the manual that you \nhad to use BSF 2.3.0RC1 or higher anyways).  Currently, to get scripting to \nwork, I'm using BSF 2.2 with ant 1.5.4.  In all situtations described, I was \nusing Rhino1.5 R4.1's js.jar."}, {"count": 1, "attachment_id": null, "bug_id": 27031, "text": "Please see:\nhttp://ant.apache.org/manual/install.html#librarydependencies\n\"If you use Apache BSF 2.3.0-rc1, you must use rhino 1.5R3 - later versions of\nBSF work with 1.5R4 as well.\"", "id": 52488, "time": "2004-02-18T15:07:22Z", "creator": "peter.reilly@corvil.com", "creation_time": "2004-02-18T15:07:22Z", "tags": [], "is_private": false}]