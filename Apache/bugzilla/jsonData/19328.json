[{"count": 0, "tags": [], "bug_id": 19328, "attachment_id": null, "text": "I compile the native part of the Tomcat Coyote JK2 Connector:\n\n$ cd jakarta-tomcat-connectors-4.1.24-src/jk\n$ ant native\n\nCompilation succeeds (with warnings however!) but linking fails!\n\n\"/usr/bin/ld: cannot find -lapr\"\n\nThis cannot be easily remedied, it seems that the latest Apache version\n(2.0.45) no longer creates \"libapr.so\" files:\n\n$ ls -l /usr/local/apache-2.0.43/lib/\n\napr.exp\naprutil.exp\nlibapr.a\nlibapr.la\nlibapr.so -> libapr.so.0.9.2\nlibapr.so.0 -> libapr.so.0.9.2\nlibapr.so.0.9.2\nlibaprutil.a\nlibaprutil.la\nlibaprutil.so -> libaprutil.so.0.9.2\nlibaprutil.so.0 -> libaprutil.so.0.9.2\nlibaprutil.so.0.9.2\nlibexpat.a\nlibexpat.la\nlibexpat.so -> libexpat.so.0.1.0\nlibexpat.so.0 -> libexpat.so.0.1.0\nlibexpat.so.0.1.0\n\n$ ls -l /usr/local/apache-2.0.45/lib/\n\napr.exp\naprutil.exp\nlibapr-0.a\nlibapr-0.la\nlibapr-0.so -> libapr-0.so.0.9.3\nlibapr-0.so.0 -> libapr-0.so.0.9.3\nlibapr-0.so.0.9.3\nlibaprutil-0.a\nlibaprutil-0.la\nlibaprutil-0.so -> libaprutil-0.so.0.9.3\nlibaprutil-0.so.0 -> libaprutil-0.so.0.9.3\nlibaprutil-0.so.0.9.3\nlibexpat.a\nlibexpat.la\nlibexpat.so -> libexpat.so.0.1.0\nlibexpat.so.0 -> libexpat.so.0.1.0\nlibexpat.so.0.1.0\n\nThus you have to modify native2/build.xml:\n\n      <linkOpt value=\"-lapr-0\" if=\"linux\" />\n\nThis works! -> Compilation succeeds\n\n$ find . -name *.so\n\n./build/jk/apache2/.libs/mod_jk.so\n./build/jk/apache2/mod_jk.so\n./build/jk/jni/.libs/jni_connect.so\n./build/jk/jni/jni_connect.so\n./build/jk2/apache2/.libs/mod_jk2.so\n./build/jk2/apache2/mod_jk2.so   \n./build/jk2/jni/.libs/libjkjni.so\n./build/jk2/jni/libjkjni.so", "id": 36122, "time": "2003-04-25T17:38:05Z", "creator": "bughunt@gluino.name", "creation_time": "2003-04-25T17:38:05Z", "is_private": false}, {"count": 1, "tags": [], "text": "Fixed by costin. Will be included in version 2.0.4 (soon to be released).", "attachment_id": null, "id": 52905, "creator": "truk@apache.org", "time": "2004-02-25T03:14:43Z", "bug_id": 19328, "creation_time": "2004-02-25T03:14:43Z", "is_private": false}]