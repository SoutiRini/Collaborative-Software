[{"count": 0, "tags": [], "bug_id": 32337, "attachment_id": null, "id": 67302, "time": "2004-11-21T23:08:47Z", "creator": "Jochen.Seifarth@web.de", "creation_time": "2004-11-21T23:08:47Z", "is_private": false, "text": "Lenya's \"page not found\" page displays \"404: Page not found\" but returns 202\n(OK) as HTTP status code. This can easily be misinterpreted by non-humans, i.e.\nsearch engines following out-dated links that would then keep trying to visit\nthe page that does no longer exist as they get the 200 OK HTTP return code.\n\nRoot cause of the problem is that the status code in the Coccon serializer does\nnot expand variables, but Lenya tries to invoke it with a variable as status\ncode, this fails and Cocoon simply returns 200 OK (rather than the 404 that is\nin the variable). I.e. the Lenya line\n\n<map:serialize status-code=\"{statusCode}\"/>\nin e.g.\nsrc/webapp/lenya/pubs/default/publication-sitemap.xmap\ndoes not work properly.\n\nI have submitted an enhancement patch to expand variables in Coccon as Coccon\nbug, see http://issues.apache.org/bugzilla/show_bug.cgi?id=32336\n\nEither wait for this to come through in the next Coccon release or you could\naddress the issue in Lenya like this:\n\n--- BRANCH_1_2_X/src/webapp/lenya/pubs/default/publication-sitemap.xmap\n(revision 56039)\n+++ BRANCH_1_2_X/src/webapp/lenya/pubs/default/publication-sitemap.xmap\t(working\ncopy)\n@@ -52,6 +52,9 @@\n         <map:when test=\"\">\n           <map:serialize/>\n         </map:when>\n+        <map:when test=\"404\">\n+          <map:serialize status-code=\"404\"/>\n+        </map:when>\n         <map:otherwise>\n           <map:serialize status-code=\"{statusCode}\"/>\n         </map:otherwise>"}, {"count": 1, "tags": [], "creator": "gregor@apache.org", "attachment_id": null, "is_private": false, "id": 67372, "time": "2004-11-23T01:20:06Z", "bug_id": 32337, "creation_time": "2004-11-23T01:20:06Z", "text": "applied, thanks."}]