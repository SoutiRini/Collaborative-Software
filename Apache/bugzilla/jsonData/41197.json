[{"count": 0, "attachment_id": null, "creator": "davi@apache.org", "is_private": false, "id": 97004, "time": "2006-12-17T20:39:24Z", "bug_id": 41197, "creation_time": "2006-12-17T20:39:24Z", "tags": [], "text": "Mixing calls to apr_file_write and apr_file_writev on buffered files causes data corruption\nbecause the buffer is not being flushed properly when apr_file_writev is called. e.g:\n\n    struct iovec vec;\n    apr_file_write(file, \"first\\n\", &nbytes);\n    vec.iov_base = \"second\\n\";\n    vec.iov_len  = 7;\n    apr_file_writev(file, &vec, 1, &nbytes);\n\nyields a file whose contents is:\n\nsecond\\first\\"}, {"attachment_id": 19276, "tags": [], "bug_id": 41197, "is_private": false, "count": 1, "id": 97005, "time": "2006-12-17T20:40:03Z", "creator": "davi@apache.org", "creation_time": "2006-12-17T20:40:03Z", "text": "Created attachment 19276\nflush the file buffer before calling writev"}, {"count": 2, "tags": [], "bug_id": 41197, "attachment_id": 19282, "id": 97032, "time": "2006-12-18T12:48:08Z", "creator": "davi@apache.org", "creation_time": "2006-12-18T12:48:08Z", "is_private": false, "text": "Created attachment 19282\ntest case"}, {"count": 3, "attachment_id": null, "creator": "chip@force-elite.com", "is_private": false, "id": 99905, "time": "2007-02-28T10:10:33Z", "bug_id": 41197, "creation_time": "2007-02-28T10:10:33Z", "tags": [], "text": "Thanks, Committed in r512882.\n\nOne note: The 'best' solution would be to append to the write buffer, instead of\njust forcing a flush; But this at least gets functionality working correctly."}]