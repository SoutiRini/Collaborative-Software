[{"count": 0, "text": "If a URI contains bytes above 0x7F which do not result in valid UTF-8\ncharacters, start of a script with the ErrorDocument directive fails.\nThis happens if the browser sends e.g. Latin-1 characters in the URL either\n1) without url-encoding (Netscape 4.7), or\n2) url-encoded, but not translated to UTF-8 (Mozilla 5.0).\n\nIf the non-UTF-8 bytes occur in the query string part of the URI, it seems that\nthis crash occurs only without url-encoding (case 1). \n\nThis error prevents customized error handling in case of mis-spelled or\notherwise incorrect URIs.\n \nExample URL called (this File does not exist on the server)\nin Netscape 4.7: https://localhost/Information/Law/\u00c4s/index.de.html\nin Mozilla 5.0:  https://localhost/Information/Law/%C4s/index.de.html\n\n----------------------------------------------\nConfiguration without ErrorDocument-Directive:\n\nError message (for both requests):\nForbidden\nYou don't have permission to access /Information/Law/\u00c4s/index.de.html on this\nserver.\nApache/2.0.43 Server at localhost Port 443 \n\nEntry in access.log:\nNetscape 4.7: 127.0.0.1 - - [03/Nov/2002:10:43:52 +0100] SSLv3 RC4-MD5 \"GET\n/Information/Law/\u00c4s/index.de.html HTTP/1.0\" 403 358 \"-\" \"Mozilla/4.78 [de]\n(WinNT; U)\"\nMozilla 5.0 : 127.0.0.1 - - [03/Nov/2002:10:28:02 +0100] TLSv1 RC4-MD5 \"GET\n/Information/Law/%C4s/index.de.html HTTP/1.1\" 403 358 \"-\" \"Mozilla/5.0 (Windows;\nU; WinNT4.0; en-US; rv:1.2a) Gecko/20020910\"\n\nEntries in error.log:\n_no_ entries\n\n----------------------------------------------\nConfiguration with \"ErrorDocument 403 /cgi/Invalid.cgi\":\n\nError message (for both requests):\nForbidden\nYou don't have permission to access /Information/Law/\u00c4s/index.de.html on this\nserver.\nAdditionally, a 500 Internal Server Error error was encountered while trying to\nuse an ErrorDocument to handle the request.\nApache/2.0.43 Server at localhost Port 443\n\nEntry in access.log:\nNetscape 4.7: 127.0.0.1 - - [03/Nov/2002:10:50:12 +0100] SSLv3 RC4-MD5 \"GET\n/Information/Law/\u00c4s/index.de.html HTTP/1.0\" 500 - \"-\" \"Mozilla/4.78 [de] (WinNT; U)\"\nMozilla 5.0:  127.0.0.1 - - [03/Nov/2002:10:30:30 +0100] TLSv1 RC4-MD5 \"GET\n/Information/Law/%C4s/index.de.html HTTP/1.1\" 500 - \"-\" \"Mozilla/5.0 (Windows;\nU; WinNT4.0; en-US; rv:1.2a) Gecko/20020910\"\n\nEntries in error.log (same for both requests):\n[Sun Nov 03 10:30:30 2002] [error] [client 127.0.0.1] (22)Invalid argument:\ncouldn't create child process: 22: Invalid.cgi\n[Sun Nov 03 10:30:30 2002] [error] [client 127.0.0.1] (22)Invalid argument:\ncouldn't spawn child process: D:/Web/cgi/Invalid.cgi\n\n-------------------------------------------------\nAdditional notes:\n1) Bug is tested under WinNT4.0 and Windows XP, Apache/2.0.43 (WIN32)\nmod_ssl/2.0.43 OpenSSL/0.9.6g.\n2) Error 403 is generated instead of 404. Are all non UTF-8 URLs forbidden in\nApache 2 ? (not stated in documentation)\n3) This error 403 is not logged in the error log.\n4) Internationalized error messages are switched off (if switched on, they work\nfine in this case).\n5) This is not bug 10573. In bug 10573 the cgi script was called directly, not\nvia ErrorDocument.\n6) For UTF-8 characters the ErrorDocument and script work as expected, e.g. for\nhttps://localhost/Information/Law/%C3%84s/index.de.html\n7) Apache 1.3.27 works fine with a similar configuration and calls the error\nhandling script without problems (see log below).\n\nApache 1.3.27 configuration with \"ErrorDocument 403 /cgi/Invalid.cgi\" for\ncomparison:\nEntry in access.log:\nNetscape 4.7: 127.0.0.1 - - [03/Nov/2002:11:08:24 +0100] \"GET\n/Information/Law/\\xc4s/index.de.html HTTP/1.0\" 404 2325\nMozilla 5.0:  127.0.0.1 - - [03/Nov/2002:11:16:12 +0100] \"GET\n/Information/Law/%C4s/index.de.html HTTP/1.1\" 404 2256\nEntry in error.log:\nNetscape 4.7: [Sun Nov 03 11:08:24 2002] [error] [client 127.0.0.1] File does\nnot exist: d:/web/information/law/\u00c4s/index.de.html\nMozilla 5.0:  [Sun Nov 03 11:16:11 2002] [error] [client 127.0.0.1] File does\nnot exist: d:/web/information/law/\u00c4s/index.de.html", "bug_id": 14227, "attachment_id": null, "id": 25616, "time": "2002-11-04T15:05:36Z", "creator": "wolf-dietrich.moeller@siemens.com", "creation_time": "2002-11-04T15:05:36Z", "tags": [], "is_private": false}, {"count": 1, "text": "\n  Noting here to extend the 'accept raw bytes in environment table' fixes\n  we already commmitted.  This is just another edge case of the same, which\n  we can fix in a future release.\n", "creator": "wrowe@apache.org", "attachment_id": null, "id": 77233, "time": "2005-07-12T22:22:41Z", "bug_id": 14227, "creation_time": "2005-07-12T22:22:41Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 14227, "text": "\n\n*** This bug has been marked as a duplicate of 13029 ***", "id": 112115, "time": "2007-12-22T13:07:47Z", "creator": "wrowe@apache.org", "creation_time": "2007-12-22T13:07:47Z", "is_private": false, "attachment_id": null}]