[{"count": 0, "tags": [], "bug_id": 45188, "is_private": false, "id": 117593, "creation_time": "2008-06-11T19:53:59Z", "time": "2008-06-11T19:53:59Z", "creator": "csfrank122@hotmail.com", "text": "i have two site :\nwww.site.com\nfr.site.com\nin two different machines, they both behind many squids.\n\ni want to redirect the French users who visit www.site.com to fr.site.com , so i put the following lines in httpd.conf:\n\nServerName www.site.com\nRewriteEngine On\nRewriteCond %{HTTP:Accept-Language} ^fr\nRewriteRule ^/$ http://fr.site.com/ [L,R=permanent]\n\nit works well.\n\non the other hand, i want the squid to cache the above 301 responsion, so it must contain a \"Expire\" header.\nand i added the following:\n\nErrorHeader  set  Expire  \"Thu, 12 Jun 2015 02:45:34 GMT\"\n\nbut it doesn't work!\n\nif i change the \"RewriteEngine\" to Off , it works!\n\nby the way, apache 2.0 and 2.2 doesn't have this bug", "attachment_id": null}, {"count": 1, "tags": [], "creator": "nick@webthing.com", "attachment_id": null, "text": "Please use a support forum for configuration issues.\n\nBut using mod_rewrite to re-invent HTTP content negotiation is just wrong: you're inventing a square wheel where there's a perfectly good round one.  Messing with expires headers is irrelevant.\n", "id": 117608, "time": "2008-06-12T02:52:08Z", "bug_id": 45188, "creation_time": "2008-06-12T02:52:08Z", "is_private": false}, {"count": 2, "tags": [], "creator": "csfrank122@hotmail.com", "attachment_id": null, "id": 117616, "time": "2008-06-12T03:35:38Z", "bug_id": 45188, "creation_time": "2008-06-12T03:35:38Z", "is_private": false, "text": "thanks for your answer!\nHTTP content negotiation can be used when the content between www.site.com and fr.site.com is similar, but they are completely different. so  i have to redirect the French,English,Spaish... users who visit www.site.com to fr.site.com,en.site.com,sp.site.com ...\n\non the other hand, apache 2.0 and 2.2 can output \"Expire\" header in the same situation."}, {"count": 3, "tags": [], "text": "*** Bug 45198 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 117676, "creator": "rpluem@apache.org", "time": "2008-06-13T13:08:29Z", "bug_id": 45188, "creation_time": "2008-06-13T13:08:29Z", "attachment_id": null}]