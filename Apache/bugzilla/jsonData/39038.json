[{"count": 0, "tags": [], "bug_id": 39038, "attachment_id": null, "text": "On Tomcat 5.5.16 startup, listener classes that implement the \nHttpSessionAttributeListener interface are being called before classes that \nimplement the ServletContextListener interface.  On shutdown, classes that \nimplement HttpSessionAttributeListener (e.g. sessionWillPassivate method) are \ncalled before classes that implement the ServletContextListener interface.\n\nAfter reading section SRV.10.3.3 (Listener Registration) and SRV.10.3.4 \n(Notifications At Shutdown) of the 2.4 servlet spec, I believe the order of \nthese invocations are backwards.  \n\nShutdown in the spec is very clear, in that it states \"Session listeners must \nbe notified of session invalidations prior to context listeners\nbeing notified of application shutdown.\"  While not as clear, I believe that \nit only makes sense during startup that context listeners should be notified \nbefore session attribute listeners.\n\nThe behavior that I believe it correct is what is being done in Tomcat 5.5.9.", "id": 87034, "time": "2006-03-20T16:14:39Z", "creator": "dldiehl@yahoo.com", "creation_time": "2006-03-20T16:14:39Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 39038, "attachment_id": null, "id": 97243, "creation_time": "2006-12-24T18:55:41Z", "time": "2006-12-24T18:55:41Z", "creator": "yoavs@computer.org", "text": "Is this still the case in 5.5.20?  Can you please attach a simple test webapp we\ncan use to reproduce what you're seeing?", "is_private": false}, {"count": 2, "tags": [], "bug_id": 39038, "attachment_id": null, "is_private": false, "id": 97249, "time": "2006-12-24T19:06:52Z", "creator": "dldiehl@yahoo.com", "creation_time": "2006-12-24T19:06:52Z", "text": "This is the same as Bug 30762 (which I had reported a long time ago against \nTomcat 5.0.27).  It has been fixed.  It is working fine now in version \n5.5.20.  thanks.\n\n*** This bug has been marked as a duplicate of 30762 ***"}]