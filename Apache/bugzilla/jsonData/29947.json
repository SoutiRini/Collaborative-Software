[{"count": 0, "tags": [], "bug_id": 29947, "attachment_id": null, "is_private": false, "id": 60230, "time": "2004-07-07T12:42:25Z", "creator": "thomas.jarosch@intra2net.com", "creation_time": "2004-07-07T12:42:25Z", "text": "mod_proxy uses \"text/plain\" as Content-Type for proxied FTP binary transfers. \nMost browsers don't show their fancy \"Save to disk\" box for ISO images, \ninstead they start showing binary garbage in the browser. \n \nI've created a small patch to force the Content-Type to \"binary\" \nfor FTP binary transfers."}, {"count": 1, "tags": [], "bug_id": 29947, "attachment_id": 12052, "id": 60231, "time": "2004-07-07T12:43:43Z", "creator": "thomas.jarosch@intra2net.com", "creation_time": "2004-07-07T12:43:43Z", "is_private": false, "text": "Created attachment 12052\nWorkaround-patch for this bug"}, {"count": 2, "text": "Isn't this really a configuration error?  We already have\n\n        if (r->content_type) {\n            ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, r->server,\n                     \"proxy: FTP: Content-Type set to %s\", r->content_type);\n        }\n        else {\n            ap_set_content_type(r, ap_default_type(r));\n        }\n\nso the real fix is a DefaultType directive for the proxy.\n\nOr am I missing something?", "bug_id": 29947, "attachment_id": null, "id": 60246, "time": "2004-07-07T15:38:02Z", "creator": "nick@webthing.com", "creation_time": "2004-07-07T15:38:02Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "creator": "thomas.jarosch@intra2net.com", "text": "Thanks! \nAdding  \n \n<Proxy *> \n  DefaultType application/octet-stream \n</Prox> \n \nworks. But this will change the content type of every proxy request with \nunknown mime type. Or can this be changed only for mod_proxy_ftp? \n ", "count": 3, "id": 60255, "time": "2004-07-07T17:46:57Z", "bug_id": 29947, "creation_time": "2004-07-07T17:46:57Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 29947, "attachment_id": null, "text": "I've added a note about this to the mod_proxy documentation (in CVS).\n\nI'm neutral-to-slightly-negative on the subject of adding your patch.  So unless\nyou can convince me or someone, I'm inclined to close this as WONTFIX.\n\nAs for changing every request with unknown MIME type - that's a red herring. \nAny HTTP response MUST have a mime type, so it's only FTP that's affected.  And\neven if an \"HTTP\" server violates this part of the spec, how better could we\nhandle it than by falling back to FTP behaviour?", "id": 60407, "time": "2004-07-10T16:49:14Z", "creator": "nick@webthing.com", "creation_time": "2004-07-10T16:49:14Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "thomas.jarosch@intra2net.com", "is_private": false, "count": 5, "id": 60408, "time": "2004-07-10T16:58:24Z", "bug_id": 29947, "creation_time": "2004-07-10T16:58:24Z", "text": "Good point. I think closing this bug with the documentation note is the best \nthing to do. \n \nThanks again, \nThomas \n "}]