[{"count": 0, "attachment_id": null, "bug_id": 41408, "text": "I'm not sure I can explain where the problem is, but it's easy to reproduce\n(reproduced on dreamhost.com servers and on my local mdv2007 machine).\n\nWorking scenario:\n- SSI enabled via XBitHack on .htaccess\n- .html files serving SSI content\n\nHow to trigger the bug:\n- Add a \"AddCharset UTF-8 .html\" rule to .htaccess and SSI ceases to work (SSI\nis just disabled, no errors at all).\n\nThe problem appears to be specific to the combination XBitHack and AddCharset.\nWhen using .shtml files, \"AddDefaultCharset utf-8\" or explicitly adding the\nOutputfilter INCLUDES to .html, (\"AddOutputFilter INCLUDES .html\") everything\nworks as expected.\n\nBTW, this problem was discussed on #apache at irc.freenode.org on 2006-01-19.\nSome quotes that may be of interest:\n\n<jpeg> check bug #15045 and Joshua Silve's comment (2).\n<...>\n<jpeg> so I'm guessing that INCLUDES is an output filter, and once the type has\nbeen handled by the charset filter, httpd doesn't check again to see what other\nfilters it needs.\n<jpeg> but I really have no idea...", "id": 98245, "time": "2007-01-18T21:14:38Z", "creator": "ademar.reis@gmail.com", "creation_time": "2007-01-18T21:14:38Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "ache@vniz.net", "is_private": false, "text": "This is because modules/filters/mod_include.c have:\n        if (!r->content_type || strcmp(r->content_type, \"text/html\")) {\n            return DECLINED;\n        }\nbut r->content_type is not simple \"text/html\" but \"text/html; charset=UTF-8\".\nAddDefaultCharset adds its charset later.", "id": 138519, "time": "2010-07-19T14:01:35Z", "bug_id": 41408, "creation_time": "2010-07-19T14:01:35Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "ache@vniz.net", "attachment_id": null, "is_private": false, "id": 138520, "time": "2010-07-19T14:07:08Z", "bug_id": 41408, "creation_time": "2010-07-19T14:07:08Z", "text": "Probably you need to change this bug status to \"regression\" since AddCharset+XBitHack works in Apache 1.3"}, {"count": 3, "tags": [], "bug_id": 41408, "text": "*** Bug 49616 has been marked as a duplicate of this bug. ***", "id": 138522, "time": "2010-07-19T14:45:01Z", "creator": "nick@webthing.com", "creation_time": "2010-07-19T14:45:01Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "nick@webthing.com", "attachment_id": null, "is_private": false, "id": 138523, "time": "2010-07-19T14:51:27Z", "bug_id": 41408, "creation_time": "2010-07-19T14:51:27Z", "text": "Thanks for the diagnosis.  Fixed in trunk in r965582."}, {"count": 5, "tags": [], "creator": "sf@sfritsch.de", "is_private": false, "text": "fixed in 2.4.1", "id": 154190, "time": "2012-02-26T16:42:32Z", "bug_id": 41408, "creation_time": "2012-02-26T16:42:32Z", "attachment_id": null}]