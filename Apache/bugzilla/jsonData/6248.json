[{"count": 0, "attachment_id": null, "creator": "s.kost@webmacher.de", "text": "Even after reading the docs (\nhttp://jakarta.apache.org/tomcat/tomcat-4.0-doc/class-loader-howto.html)\nand mailing list archive (\nhttp://marc.theaimsgroup.com/?l=tomcat-user&r=1&w=2)\nI am still stuck with the following problem:\nWe are currently using jboss-2.4.4 with tomcat-3.2.3 and I am trying to\nupgrade to tomcat 4.0.1 as we need its newer jsp features. Our\napplication is using jsp together with a custom xsl-tag-library based on\nxalan/xerces. JBoss itself is using xerces as its xml-parser (for\nconfigs) in our setup. I plugged it in using JAXP.\nNow when I am trying to access any jsp which is using the xsl-taglibrary\n(which uses xalan/xerces) under tomcat 4.0.1 I get:\n-------------- snip ---------------\ntype Exception report\n\nmessage Internal Server Error\n\ndescription The server encountered an internal error (Internal Server\nError) that prevented it from fulfilling this request.\n\nexception\n\njavax.servlet.ServletException: Servlet.init() for servlet jsp threw\nexception\n...\nroot cause\n\njava.lang.ClassCastException:\norg.apache.xerces.jaxp.DocumentBuilderFactoryImpl\n        at\njavax.xml.parsers.DocumentBuilderFactory.newInstance(DocumentBuilderFactory.java:103)\n...\n-------------- snip ---------------\n\nI guess the issue is somehow related to the fact that jboss is not\nstarting tomcat separately but using it as an own service and thus\ntomcat inherits the classpath. The classpath in turn contains\n../lib/xml-apis.jar:../lib/xerces.jar:../lib/xalan.jar\n\nI've read about the issuses with xerces and tried to copy the xerces.jar\nincluded with tomcat 4.0.1 (size 1808883 bytes) over all location of\nmine; still it happens.\nApart from the location which is included in the classpath I have xerces sitting\nin my webapps WEB-INF/lib folder and tried other locations too.\n\nAt the moment I am out of ideas, but more than willing to try out anything you\nhopefully can suggest - thanks for listening", "id": 10370, "time": "2002-02-05T15:15:31Z", "bug_id": 6248, "creation_time": "2002-02-05T15:15:31Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 6248, "text": "That indeed won't work, especially the combo Xerces 1 + Xerces 2.\nThe HEAD branch of Tomcat fixes it, but since it's a classloader change, it may \nnot be ported to the 4.0.x branch.", "id": 10371, "time": "2002-02-05T15:33:11Z", "creator": "remm@apache.org", "creation_time": "2002-02-05T15:33:11Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 6248, "attachment_id": null, "id": 10733, "time": "2002-02-14T23:16:29Z", "creator": "remm@apache.org", "creation_time": "2002-02-14T23:16:29Z", "is_private": false, "text": "*** Bug 6476 has been marked as a duplicate of this bug. ***"}]