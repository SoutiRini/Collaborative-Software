[{"count": 0, "tags": [], "creator": "apachebugs@louisiana.edu", "attachment_id": null, "text": "For some reason I can't find a report on this ... so here goes!\napachectl is built to invoke httpd with the -k option to do a start, stop,\nrestart or graceful, eg, httpd -k start\nBut the -k option is not supported (in main.c).  I reverted to using the 1.3.x\nversion of apachectl as a bypass.", "id": 18209, "time": "2002-06-20T19:10:41Z", "bug_id": 10074, "creation_time": "2002-06-20T19:10:41Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "trawick@apache.org", "is_private": false, "id": 18213, "time": "2002-06-20T19:30:13Z", "bug_id": 10074, "creation_time": "2002-06-20T19:30:13Z", "tags": [], "text": "The code is not in main.c; it is called before the normal cmd-line processing in\nmain.c runs.\n\nWhat is the symptom when you use apachectl from 2.0.39?  What is the output\nof \"apachectl -V\"?"}, {"count": 2, "tags": [], "creator": "apachebugs@louisiana.edu", "attachment_id": 2144, "text": "Created attachment 2144\nscript demonstrating the problem, and httpd -V, -l report", "id": 18275, "time": "2002-06-21T03:59:51Z", "bug_id": 10074, "creation_time": "2002-06-21T03:59:51Z", "is_private": false}, {"count": 3, "text": "Oh, the perchild MPM :)\n\nIf I can get it to build I'll make the minor change necessary to get it to\nsupport -k.\n\nThanks for the extra doc!\n\n", "bug_id": 10074, "attachment_id": null, "id": 18282, "time": "2002-06-21T10:19:31Z", "creator": "trawick@apache.org", "creation_time": "2002-06-21T10:19:31Z", "tags": [], "is_private": false}, {"count": 4, "text": "This problem with the perchild MPM as been fixed in CVS and will be in the\nnext release.  In the meantime, you can use this patch:\n\nIndex: server/mpm/experimental/perchild/mpm.h\n===================================================================\nRCS file: /home/cvs/httpd-2.0/server/mpm/experimental/perchild/mpm.h,v\nretrieving revision 1.16\ndiff -u -r1.16 mpm.h\n--- server/mpm/experimental/perchild/mpm.h      1 Apr 2002 08:27:42 -0000       1.16\n+++ server/mpm/experimental/perchild/mpm.h      21 Jun 2002 10:53:29 -0000\n@@ -76,6 +76,7 @@\n #define AP_MPM_WANT_SET_MAX_REQUESTS\n #define AP_MPM_WANT_SET_COREDUMPDIR\n #define AP_MPM_WANT_SET_ACCEPT_LOCK_MECH\n+#define AP_MPM_WANT_SIGNAL_SERVER\n #define AP_MPM_USES_POD\n\n #define MPM_CHILD_PID(i) (ap_scoreboard_image->parent[i].pid)\nIndex: server/mpm/experimental/perchild/perchild.c\n===================================================================\nRCS file: /home/cvs/httpd-2.0/server/mpm/experimental/perchild/perchild.c,v\nretrieving revision 1.126\ndiff -u -r1.126 perchild.c\n--- server/mpm/experimental/perchild/perchild.c 13 Jun 2002 16:36:19 -0000     \n1.126\n+++ server/mpm/experimental/perchild/perchild.c 21 Jun 2002 10:53:30 -0000\n@@ -1999,7 +1999,7 @@\n\n module AP_MODULE_DECLARE_DATA mpm_perchild_module = {\n     MPM20_MODULE_STUFF,\n-    NULL,                       /* hook to run before apache parses args */\n+    ap_mpm_rewrite_args,        /* hook to run before apache parses args */\n     NULL,                       /* create per-directory config structure */\n     NULL,                       /* merge per-directory config structures */\n     perchild_create_config,     /* create per-server config structure */\n\nApply the patch, then \"make clean && make && make install\".\n\nThanks for your report, and thanks for using Apache!\n", "creator": "trawick@apache.org", "attachment_id": null, "id": 18287, "time": "2002-06-21T11:02:19Z", "bug_id": 10074, "creation_time": "2002-06-21T11:02:19Z", "tags": [], "is_private": false}]