[{"count": 0, "tags": [], "bug_id": 39625, "is_private": false, "id": 89324, "creation_time": "2006-05-21T15:52:04Z", "time": "2006-05-21T15:52:04Z", "creator": "john@fayandjohn.com", "text": "Hi,\n\nI have a website hosted on a shared server running apache 1.3.34.\n\nI have access to mod_rewrite and basic authentication via the .htaccess \nfiles\n\nI have found that if I have a global .htaccess file in my public_html \ndirectory containing some simple mod_rewrite such as:\n\npublic_html/.htaccess:\n\n#-----\nOptions -indexes +FollowSymLinks\n\nRewriteEngine on\nRewriteCond %{HTTP_HOST} !^www\\.\nRewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]\n#-----\n\nand then I create a sub-directory, for example test, and protect the \ndirectory  with basic authentication like:\n\npublic_html/test/.htaccess:\n\n#-----\nAuthType Basic\nAuthName \"test\"\nAuthUserFile \"/home/<username>/.htpasswds/test/passwd\"\nrequire valid-user\n#-----\n\nI then put a test file, for example index.html in this protected directory. \n(ex: public_html/test/index.html)\n\nThen going to a URL like http://domain.com/test/index.html which should get \nre-written to http://www.domain.com/test/index.html and prompt for \nauthentication fails immediately with a 401 code.\n\nHowever, if this sub directory is not protected, then this mod-rewrite code \nworks fine.\n\nFor a more detailed description, you may read what I have posted at:\n\nhttp://forums.site5.com/showthread.php?t=10328\n\nOthers have reproduced this behavior.  I have not been able to find\ndocumentation stating whether this is expected behavior or not.  I have posted\nto the apache user group questioning this and have gotten no response.\n\nSincerely,\n\nJohnny", "attachment_id": null}, {"count": 1, "tags": [], "creator": "bobsiegen@googlemail.com", "attachment_id": null, "is_private": false, "id": 98363, "time": "2007-01-22T06:09:50Z", "bug_id": 39625, "creation_time": "2007-01-22T06:09:50Z", "text": "I think this is normal processing. The .htaccess files are merged with the\nsettings already accumulated. Each module runs in a specific order. Using\ndirectives for a specific module in a parent .htaccess file does not mean that\nthis directives/module will be processed first/have some kind of priority as\nopposed to directives for an other module located in a sub folder.\n\nYou can change the order of processing in Apache 1.3 by resorting the directive\n'AddModule ....' in your httpd.conf.\n\nIn Apache2, authorization will always run before mod_rewrite in directory context."}]