[{"count": 0, "tags": [], "text": "If I try and load an XML file where messages have CDATA sections Chainsaw stops \ndead in its tracks. It will process the file until it comes across the first \noffending message.\n\nExample entry:\n\n<log4j:event category=\"com.twii.jme.server.util.payload.SOAPPayload\" \ntimestamp=\"1022645227312\" level=\"DEBUG\" thread=\"ApplicationServerThread\">\n<log4j:message><![CDATA[push() <ecrmoutput><resultinfo><retval><![CDATA[0]]\n></retval><errdesc><![CDATA[]]></errdesc><memberid><![CDATA[323976]]\n></memberid></resultinfo></ecrmoutput>]]></log4j:message>\n</log4j:event>\n\nThere is no problem loading the same message using a SocketAppender.", "attachment_id": null, "id": 16928, "creator": "gdjemal@twii.net", "time": "2002-05-30T08:28:51Z", "bug_id": 9514, "creation_time": "2002-05-30T08:28:51Z", "is_private": false}, {"count": 1, "tags": [], "text": "Could you please attach a file containing some samples that do not work. The \nsnippet below gives an error about a missing </log4j:message>. This under both \nXerces and Crimson parsers.", "attachment_id": null, "id": 16933, "creator": "oliver@puppycrawl.com", "time": "2002-05-30T11:56:41Z", "bug_id": 9514, "creation_time": "2002-05-30T11:56:41Z", "is_private": false}, {"count": 2, "tags": [], "text": "That's exactly the problem, it sees the nested CDATA and gets all confused. As \nit is clearly obvious there is a closing tag.\n\nI suspect that this eventuality is not catered for when parsing using SAX, it \nprobably sees the end tag of the second CDATA and associates this with the \nfirst. Thus everything is now out of sync.", "attachment_id": null, "id": 16934, "creator": "gdjemal@twii.net", "time": "2002-05-30T12:09:07Z", "bug_id": 9514, "creation_time": "2002-05-30T12:09:07Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 9514, "attachment_id": null, "text": "IANAL but can an XML CDATA section be nested like the snippet below. Just \nlooked at http://www.w3schools.com/xml/xml_cdata.asp and it implies this is not \nlegal.\n", "id": 16935, "time": "2002-05-30T12:12:59Z", "creator": "oliver@puppycrawl.com", "creation_time": "2002-05-30T12:12:59Z", "is_private": false}, {"count": 4, "tags": [], "creator": "gdjemal@twii.net", "attachment_id": null, "id": 16936, "time": "2002-05-30T12:20:16Z", "bug_id": 9514, "creation_time": "2002-05-30T12:20:16Z", "is_private": false, "text": "So the question now is whose duty is it to protect against this. I would dare \nsay that this lies with Log4J as the application should not have to care what \nthe underlying Layout is."}, {"text": "Regarding \"Comments From Guy Djemal 2002-05-30 12:20\", I think that it is the \nresponsibility of XMLLayout to deal with embedded CDATA sections since it is \nusing CDATA to define the message, NCD and throwable elements.\n\nI will provide a fix shortly.", "tags": [], "bug_id": 9514, "attachment_id": null, "count": 5, "id": 16945, "time": "2002-05-30T17:11:02Z", "creator": "mike_mcangus@wendys.com", "creation_time": "2002-05-30T17:11:02Z", "is_private": false}, {"count": 6, "attachment_id": 1979, "creator": "mike_mcangus@wendys.com", "text": "Created attachment 1979\nPatch: org\\apache\\log4j\\xml\\XMLLayout.java", "id": 16961, "time": "2002-05-30T19:01:33Z", "bug_id": 9514, "creation_time": "2002-05-30T19:01:33Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "bug_id": 9514, "attachment_id": null, "text": "\nMichael, \n\nThank you for supplying the patch.\n--\nCeki", "id": 17349, "time": "2002-06-06T20:59:24Z", "creator": "ceki@apache.org", "creation_time": "2002-06-06T20:59:24Z", "is_private": false}]