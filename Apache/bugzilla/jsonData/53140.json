[{"count": 0, "tags": [], "bug_id": 53140, "attachment_id": null, "id": 158382, "time": "2012-04-24T16:24:34Z", "creator": "locuse@mm.st", "creation_time": "2012-04-24T16:24:34Z", "is_private": false, "text": "i've built/installed httpd 2.4.x server on linux/64\n\n\tsvn info\n\t\tPath: .\n\t\tURL: https://svn.apache.org/repos/asf/httpd/httpd/branches/2.4.x\n\t\tRepository Root: https://svn.apache.org/repos/asf\n\t\tRepository UUID: 13f79535-47bb-0310-9956-ffa450edef68\n\t\tRevision: 1329533\n\t\tNode Kind: directory\n\t\tSchedule: normal\n\t\tLast Changed Author: jorton\n\t\tLast Changed Rev: 1329138\n\t\tLast Changed Date: 2012-04-23 02:08:55 -0700 (Mon, 23 Apr 2012)\n\n\thttpd -V\n\t\tServer version: Apache/2.4.3-dev (Unix)\n\t\tServer built:   Apr 24 2012 07:29:25\n\t\tServer's Module Magic Number: 20120211:3\n\t\tServer loaded:  APR 2.0.0-dev\n\t\tCompiled using: APR 2.0.0-dev\n\t\tArchitecture:   64-bit\n\t\tServer MPM:     event\n\t\t  threaded:     yes (fixed thread count)\n\t\t    forked:     yes (variable process count)\n\t\tServer compiled with....\n\t\t -D APR_HAS_SENDFILE\n\t\t -D APR_HAS_MMAP\n\t\t -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n\t\t -D APR_USE_SYSVSEM_SERIALIZE\n\t\t -D APR_USE_PTHREAD_SERIALIZE\n\t\t -D APR_HAS_OTHER_CHILD\n\t\t -D AP_HAVE_RELIABLE_PIPED_LOGS\n\t\t -D DYNAMIC_MODULE_LIMIT=256\n\t\t -D HTTPD_ROOT=\"/usr/local/apache24x\"\n\t\t -D SUEXEC_BIN=\"/usr/local/apache24x/bin/suexec\"\n\t\t -D DEFAULT_PIDLOG=\"/var/run/apache2/logs/httpd.pid\"\n\t\t -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n\t\t -D DEFAULT_ERRORLOG=\"logs/error_log\"\n\t\t -D AP_TYPES_CONFIG_FILE=\"/usr/local/etc/apache2/mime.types\"\n\t\t -D SERVER_CONFIG_FILE=\"/usr/local/etc/apache2/httpd.conf\"\n\n\tapachectl -t -D DUMP_MODULES | egrep -i \"status|info\"\n\t\t status_module (shared)\n\t\t info_module (shared)\n\n\nit works as expected, except for mod_info & mod_status pages (which work fine on my 2.3.x box).\n\non 2.4.x, with typical host config that includes,\n\n\tcat /usr/local/etc/apache2/vhosts.d/srv.locuse.loc\n\t\t...\n\t\t<Location /server-status>\n\t\t    SetHandler server-status\n\t\t</Location>\n\t\t<Location /server-info>\n\t\t    SetHandler server-info\n\t\t</Location>\n\t\t<Location /php-fpm-status>\n\t\t    SetHandler php-fastcgi-virt\n\t\t    Action php-fastcgi-virt /usr/local/php5/sbin/php-fpm.fcgi virtual\n\t\t</Location>\n\t\t...\n@ nav to:\n\n\thttp://srv.locuse.loc/index.html\n\thttp://srv.locuse.loc/info.php\n\nboth work as expected.\n\nbut, @ nav to:\n\n\thttp://srv.locuse.loc/server-status\n\nin browser, i see:\n\n\tThe requested URL was not found on this server. The link on the \">referring page seems to be wrong or outdated. Please inform the author of \">that page about the error. If you entered the URL manually please check your spelling and try again.\n\n\twith links @\n\n\t\t[\">referring page] ==> http://srv.locuse.loc/%3C!--#echo%20encoding=\n\t&\n\t\t[\">that page]      ==> http://srv.locuse.loc/%3C!--#echo%20encoding=\n\tlogs show:\n\nand, logs show:\n\n\t==> /var/log/apache2/srv.locuse.loc.80.error_log <==\n\t\t...\n\t\t[Tue Apr 24 08:28:37.454048 2012] [core:info] [pid 27965:tid 139942639892224] [client 10.10.9.7:35536] AH00128: File does not exist: /srv/www/srv.locuse.loc/<!--, referer:\n\t\t...\n\n\t==> /var/log/apache2/srv.locuse.loc.80.log <==\n\t\t...\n\t\tsrv.locuse.loc - - - [24/Apr/2012:08:28:37 -0700] \"GET /%3C!-- HTTP/1.1\" 404 618 \"http://srv.locuse.loc/server-status\" \"Mozilla/5.0 (X11; Linux x86_64; rv:11.0) Gecko/20100101 Firefox/11.0\"\n\t\t...\n\nfor reference, the same config on a 2.3.x server works OK."}, {"count": 1, "tags": [], "bug_id": 53140, "attachment_id": null, "is_private": false, "id": 158384, "time": "2012-04-24T16:44:49Z", "creator": "covener@gmail.com", "creation_time": "2012-04-24T16:44:49Z", "text": "can you post a flat, simple configuration  that demonstrates the problem?"}, {"count": 2, "tags": [], "text": "the requested process of simplifying/flattening my *overall* config found the problem -- just not where i was looking.\n\ndisabling modsecurity2 module fixed the problem -- /server-status & /server-info both display as requested.\n\nthe (in?)direct cause, it seems, is that latest apr/apr-util seems seem to no longer have an apu-*-config.  in config output for httpd, i note,\n\n\t...\n\tconfigure: APR-util obsoleted, woohoo\n\t...\n\nin any case, modsecurity2 module build, which was previously 'happy' with config option of just \"--with-apxs=...\" for httpd 2.4.x now *requires* (not that it tells you that ...) an additional,\n\n  --with-apr=/usr/local/apache24x/bin/apr-2-config\n  --with-apu=/usr/local/apache24x/bin/apr-2-config\n\nwith those config options in place, a rebuild of modsecurity2, then reenabling the module in apache24x, all's well again.\n\napologies for the more-or-less fire drill ...", "attachment_id": null, "id": 158386, "creator": "locuse@mm.st", "time": "2012-04-24T17:24:42Z", "bug_id": 53140, "creation_time": "2012-04-24T17:24:42Z", "is_private": false}]