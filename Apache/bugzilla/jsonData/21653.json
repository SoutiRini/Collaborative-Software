[{"count": 0, "tags": [], "bug_id": 21653, "attachment_id": null, "text": "It seems that the following xml filename ordering results in an error:\n\nAvstandEntity-cmp-rdbms-jar.xml\nejb-jar.xml\nweblogic-ejb-jar.xml\n\nIf naming of files is changed to:\n\nXAvstandEntity-cmp-rdbms-jar.xml\nweblogic-ejb-jar.xml\nejb-jar.xml, it works.\n\nThe reason seems to be that the tool.processDescriptor(files[index], saxParser)\n[line 591] in EjbJar.java assumes ordering of the array: String[] files to be:\nejb-jar.xml as the first entry.\n\nHowever this does not occur when the operating system orders on alphabetical \nascending order.\n\nThe symptom can be found when looking into the generic.jar assembled in the \nprocess. The content of ejb-jar.xml and the cmp-rdbms-jar.xml will be identical.\nBecause it assumes that the first file parsed is the ejb-jar.xml file. \nThis is not neccecerily the case if the first letter of the cmp-rdbms-jar.xml \n(eg. AvstandEntity-cmp-rdbms-jar.xml) is lesser than \"e\"(ejb-jar.xml).\n\nThe stacktrace being given on failure is:\njava.lang.ClassCastException\n        at weblogic.ejb20.dd.xml.DDUtils.loadEJBJarDescriptorFromJarFile\n(DDUtils.java:155)\n        at weblogic.ejb20.dd.xml.DDUtils.createDescriptorFromJarFile\n(DDUtils.java:139)\n        at weblogic.ejb20.dd.xml.DDUtils.createDescriptorFromJarFile\n(DDUtils.java:130)\n        at weblogic.ejbc20.runBody(ejbc20.java:338)\n        at weblogic.utils.compiler.Tool.run(Tool.java:79)\n        at weblogic.ejbc.main(ejbc.java:21)\nERROR: java.lang.ClassCastException\nkode\\no\\Lisa.xml [223] Exception while calling weblogic.ejbc. Details: Ejbc \nreported an error\n        at \norg.apache.tools.ant.taskdefs.optional.ejb.WeblogicDeploymentTool.buildWeblogicJ\nar(WeblogicDeploymentTool.java:633)\n        at \norg.apache.tools.ant.taskdefs.optional.ejb.WeblogicDeploymentTool.writeJar\n(WeblogicDeploymentTool.java:651)\n        at \norg.apache.tools.ant.taskdefs.optional.ejb.GenericDeploymentTool.processDescript\nor(GenericDeploymentTool.java:480)\n        at org.apache.tools.ant.taskdefs.optional.ejb.EjbJar.execute\n(EjbJar.java:592)\n        at org.apache.tools.ant.Task.perform(Task.java:341)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1339)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:397)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:143)\n        at net.sf.antcontrib.logic.ForEach.execute(Unknown Source)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:193)\n        at org.apache.tools.ant.Task.perform(Task.java:341)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1339)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1255)\n        at org.apache.tools.ant.module.run.TargetExecutor.run\n(TargetExecutor.java:331)\n        at org.netbeans.core.execution.RunClassThread.run\n(RunClassThread.java:118)\nCaused by: Ejbc reported an error\n        at \norg.apache.tools.ant.taskdefs.optional.ejb.WeblogicDeploymentTool.buildWeblogicJ\nar(WeblogicDeploymentTool.java:627)\n        ... 18 more\n--- Nested Exception ---\nEjbc reported an error\n        at \norg.apache.tools.ant.taskdefs.optional.ejb.WeblogicDeploymentTool.buildWeblogicJ\nar(WeblogicDeploymentTool.java:627)\n        at \norg.apache.tools.ant.taskdefs.optional.ejb.WeblogicDeploymentTool.writeJar\n(WeblogicDeploymentTool.java:651)\n        at \norg.apache.tools.ant.taskdefs.optional.ejb.GenericDeploymentTool.processDescript\nor(GenericDeploymentTool.java:480)\n        at org.apache.tools.ant.taskdefs.optional.ejb.EjbJar.execute\n(EjbJar.java:592)\n        at org.apache.tools.ant.Task.perform(Task.java:341)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1339)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:397)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:143)\n        at net.sf.antcontrib.logic.ForEach.execute(Unknown Source)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:193)\n        at org.apache.tools.ant.Task.perform(Task.java:341)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1339)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1255)\n        at org.apache.tools.ant.module.run.TargetExecutor.run\n(TargetExecutor.java:331)\n        at org.netbeans.core.execution.RunClassThread.run\n(RunClassThread.java:118)", "id": 40820, "time": "2003-07-16T12:56:34Z", "creator": "etj@genera.no", "creation_time": "2003-07-16T12:56:34Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 40827, "time": "2003-07-16T13:13:17Z", "bug_id": 21653, "creation_time": "2003-07-16T13:13:17Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 21650 ***"}]