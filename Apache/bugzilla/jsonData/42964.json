[{"count": 0, "tags": [], "bug_id": 42964, "attachment_id": null, "id": 105902, "creation_time": "2007-07-24T08:27:58Z", "time": "2007-07-24T08:27:58Z", "creator": "dave@watersheep.org", "text": "Apache Ant version 1.7.0 compiled on December 13 2006\n\nIf you take the two files below and run ant on build.xml:\n- on Ant 1.6.5, the correct target \"special.compile\" executes;\n- on Ant 1.7.0, the incorrect target \"compile\" executes.\n\nIt seems to be something to do with the project name in special.xml - if you\ngive it any value other than \"special\", then the correct target executes.\n\n--- build.xml ---\n<project default=\"start\">\n  <import file=\"special.xml\"/>\n  <target name=\"start\" depends=\"special.compile\" />\n</project>\n------\n\n--- special.xml ---\n<project name=\"special\">\n   <target name=\"special.compile\">\n     <echo>GOOD special.compile</echo>\n   </target>\n   <target name=\"compile\">\n     <echo>BAD compile</echo>\n   </target>\n</project>\n------\n\nOutputs:\n\nD:\\antbug>set ANT_HOME=c:\\tools\\apache-ant-1.6.5\n\nD:\\antbug>%ANT_HOME%\\bin\\ant\nBuildfile: build.xml\n\nspecial.compile:\n     [echo] GOOD special.compile\n\nstart:\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds\n\n\n\nD:\\antbug>set ANT_HOME=c:\\tools\\apache-ant-1.7.0\n\nD:\\antbug>%ANT_HOME%\\bin\\ant\nBuildfile: build.xml\n\nspecial.compile:\n     [echo] BAD compile\n\nstart:\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds", "is_private": false}, {"count": 1, "tags": [], "creator": "ddevienne@gmail.com", "attachment_id": null, "id": 105904, "time": "2007-07-24T08:39:03Z", "bug_id": 42964, "creation_time": "2007-07-24T08:39:03Z", "is_private": false, "text": "FYI, there was a change a few months back to systematically alias target names\nwith a version called <project-name>.<target-name>. Prior to this change, this\nwas only done when a target name conflict was detected during an import. The\nrational was that it was better to always do this, to have predictable results\n(I think Steve Loughran) argued for this)\n\nThe bug you describes sounds related to this change."}, {"count": 2, "tags": [], "creator": "peterreilly@apache.org", "text": "Indeed, the targets have been changed slightly for imported files.\nFor example take the example:\nexample.xml :\n<project name=\"example\">\n    <target name=\"build\"/>\n</project>\nbuild.xml: \n<project name=\"main\">\n   <import file=\"example.xml\"/>\n</project>\nThis would have one target - \"build\"\n\nhowever, the build file\n<project name=\"main\">\n   <import file=\"example.xml\"/>\n   <target name=\"build\"/>\n</project>\nwould have two targets \"build\" (in build.xml) and \"example.build\"\nin (example.xml).\n\nThis made it difficult to write reusable import build files, so\nfor ant 1.7.0 the \"example.build\" target was always created (as\nwell as the overriddable \"build\" target).\n\nYour example would generate three targets:\n\"compile\"  (bound to special.xml/compile)\n\"special.compile\" (bound to special.xml/compile)\nand\n\"special.special.compile\" (bound to special.xml/special.compile)\n\n\nIt probably should be:\n\"compile\"  (bound to special.xml/compile)\n\"special.compile\" (bound to special.xml/special.compile)\nand\n\"special.special.compile\" (bound to special.xml/special.compile)\n\n\nI will see what can be done.\n", "id": 105905, "time": "2007-07-24T09:13:26Z", "bug_id": 42964, "creation_time": "2007-07-24T09:13:26Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 42964, "text": "*** Bug 43686 has been marked as a duplicate of this bug. ***", "count": 3, "id": 109687, "time": "2007-10-24T02:59:14Z", "creator": "peterreilly@apache.org", "creation_time": "2007-10-24T02:59:14Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 42964, "text": "Increased severity since it blocks moving from 1.6.x to 1.7.0.\n\nMy opinion is that there is no good choice between the proposed ones. The\nproject defines a namespace for targets names. If the import allows overriding\ntargets, overriding should be made clear in the target declaration (e.g with a\noverrides=\"\") of the overriding target, and the project-name qualifier prebended\nwith (e.g.) ':' instead of '.' (ala xsd).\n\n", "count": 4, "id": 109693, "time": "2007-10-24T05:17:03Z", "creator": "gillouxGaillard@wanadoo.fr", "creation_time": "2007-10-24T05:17:03Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 42964, "attachment_id": null, "id": 172083, "time": "2014-01-05T14:14:20Z", "creator": "bodewig@apache.org", "creation_time": "2014-01-05T14:14:20Z", "is_private": false, "text": "I see the as attribute as the solution to this."}]