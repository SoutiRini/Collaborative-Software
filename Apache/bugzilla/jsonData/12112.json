[{"count": 0, "tags": [], "creator": "w.fukushima@pfu.fujitsu.com", "text": "LOG4J VERSION\n\n1.2.6\n\n\nBUG DESCRIPTION\n\norg.apache.log4j.helpers.CountingQuietWriter says in its class comment:\n\n  Counts the number of bytes written.\n\nHowever, since its write(String) method counts it by String.length(),\ncurrent result becomes number of characters instead of byte-size.\n\n\nIMPACT\n\nCountingQuietWriter is used by RollingFileAppender to decide if rollOver()\nshould be called.\nWhen multi-bytes text is written, the log file grows up over its maximum\nfile size specified by setMaxFileSize().\n\n\nHOW TO FIX\n\n<J2SE v 1.3.1 or earlier>\nImpossible, because we cannot know which CharToByteConverter is used at all.\nA better solution is to call String.getBytes().length instead of\nString.length().\n(still has a problem because it assumes that the text is encoded in default\n character encoding, which could be different.)\n\n<J2SE v 1.4 or later>\nPossible, if CountingQuietWriter can know which java.nio.charset.Charset\nshould be used. (I do not know how to get this information though.)", "id": 21865, "time": "2002-08-28T00:30:19Z", "bug_id": 12112, "creation_time": "2002-08-28T00:30:19Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 12112, "attachment_id": null, "id": 68369, "time": "2004-12-13T17:04:10Z", "creator": "yoavs@computer.org", "creation_time": "2004-12-13T17:04:10Z", "is_private": false, "text": "In log4j 1.3, CountingQuietWriter is no longer used to decide on rollovers.  \nNonetheless, we want to be clear, so I updated the documentation for that class \nto indicates that it counts characters and not bytes."}]