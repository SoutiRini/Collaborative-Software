[{"count": 0, "attachment_id": null, "bug_id": 48430, "text": "I've got a strange error using log4j in one of my projects.\n\nStacktrace:\n\nlog4j:ERROR Write failure.\njava.io.IOException: Stream closed\n       at sun.nio.cs.StreamEncoder.ensureOpen(StreamEncoder.java:38)\n       at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:129)\n       at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:146)\n       at java.io.OutputStreamWriter.write(OutputStreamWriter.java:204)\n       at java.io.Writer.write(Writer.java:126)\n       at org.apache.log4j.helpers.CountingQuietWriter.write(CountingQuietWriter.java:45)\n       at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:302)\n       at org.apache.log4j.RollingFileAppender.subAppend(RollingFileAppender.java:263)\n       at org.apache.log4j.WriterAppender.append(WriterAppender.java:160)\n       at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)\n       at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)\n       at org.apache.log4j.Category.callAppenders(Category.java:206)\n       at org.apache.log4j.Category.forcedLog(Category.java:391)\n       at org.apache.log4j.Category.log(Category.java:856) \n\nOS: Linux ---- 2.6.25.18-0.2-pae #1 SMP 2008-10-21 16:30:26 +0200 i686 i686 i386 GNU/Linux\nJRE: java version \"1.5.0_13\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_13-b05)\nJava HotSpot(TM) Server VM (build 1.5.0_13-b05, mixed mode)\nLog4j: release 1.2.15\n\nRemarks:\n- the project is a single-thread app (a standalone java program);\n- there is only one app running at the same time (and log-files have a unique name containing a timestamp);\n- there is enough free space on the local drive (where the log-files are written to);\n- appenders/log-level settings are not changed during running the app.\n\nlog4j.xml:\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\">\n\n<log4j:configuration>\n\n   <appender name=\"app-log-file\" class=\"org.apache.log4j.RollingFileAppender\">\n       <param name=\"file\" value=\"Tool.${dmask.startup.time}.log\" />\n       <param name=\"append\" value=\"true\" />\n       <param name=\"encoding\" value=\"UTF-8\" />\n       <param name=\"MaxFileSize\" value=\"20MB\" />\n       <param name=\"MaxBackupIndex\" value=\"5\" />\n       <layout class=\"org.apache.log4j.PatternLayout\">\n           <param name=\"ConversionPattern\" value=\"%d{HH:mm:ss,SSS} %-5.5p [%20.20C{1}:%-4.5L] %x%m%n\" />\n       </layout>\n   </appender>\n\n   <root>\n       <priority value=\"debug\" />\n       <appender-ref ref=\"app-log-file\" />\n   </root>\n\n</log4j:configuration>", "id": 133062, "time": "2009-12-22T07:32:22Z", "creator": "gf.zsolt@gmail.com", "creation_time": "2009-12-22T07:32:22Z", "tags": [], "is_private": false}]