[{"count": 0, "tags": [], "bug_id": 41491, "text": "Hi,\nI have a strange problem.\nI am enabling a text box on selecting a dropdown.\nIt works fine when I run the application on tomcat 4.0.3, but when I deploy the \napplication on tomcat 4.1.29 and 5.0 The text box doesn't get enabled and gives \na java script error saying syntax error an the line it shows which has error \nis :\ndocument.forma.f_801.className='';\n\n\nMy code looks like this:\n\nif(document.forma.f_800.options[document.forma.f_800.selectedIndex].value=='8') \n{\n                  alert('Please select reason for Hold!!');\n                  document.forma.f_801.disabled=false;\n                  document.forma.f_801.className='';\n                  document.forma.f_801.focus();\n                  document.all.id_801.style.cssText='background-image:url\n(required.gif); background-position:top right; background-repeat:no-repeat;';\n\n                  document.forma.f_2163.disabled=false;\n                  document.forma.f_2163.className='';\n...........etc\n\n\n\nWhy is not working on tomcat 4.1 and above and no problem in lower version.\nPlease let me know the solution.\n\nThanks\nHari", "id": 98703, "time": "2007-01-29T12:32:02Z", "creator": "c.hari@yahoo.com", "creation_time": "2007-01-29T12:32:02Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 41491, "attachment_id": null, "id": 98731, "time": "2007-01-29T20:27:54Z", "creator": "markt@apache.org", "creation_time": "2007-01-29T20:27:54Z", "is_private": false, "text": "Javascript is a purely client side technology so I would be very surprised if\nthis was a Tomcat issue. To be sure, i tried the following which works as\nexpected, without any error.\n\n<html>\n  <head>\n    <title>Bug 41491</title>\n    <script type=\"text/javascript\">\n      function testEnable() {\n       \nif(document.form1.combobox1.options[document.form1.combobox1.selectedIndex].value=='Three')\n{\n          alert(\"Add extra text\")\n          document.form1.text1.disabled=false\n          document.form1.text1.classname=''\n        }\n      }\n    </script>\n  </head>\n  <body>\n    <form name=\"form1\">\n      <select name=\"combobox1\" onchange=\"testEnable()\">\n        <option value=\"One\">One</option>\n        <option value=\"Two\">Two</option>\n        <option value=\"Three\">Three</option>\n      </select>\n      <br />\n      <input type=\"text\" name=\"text1\" disabled=\"disabled\" />\n    </form>\n  </body>\n</html>"}, {"count": 2, "tags": [], "creator": "c.hari@yahoo.com", "text": "Thanks for your response.\nIntially I thought its a clinet side problem.\nBut strangely it works in 4.0.3 and gives javascript error when deployed on\n4.1.29 and 5.0.\nThe javascript code is within a jsp.\nWhen I remove the line of code at where the browser says java script error, then\nthe error shows on the next line nad it goes on...\nI felt its very strange.\nThe java script error is:\nLine: 1062\nchar:9\nError: Syntax Error\nCode: 0\n\n\nThe code in my programme is:\n\n if(document.forma.f_800.options[document.forma.f_800.selectedIndex].value=='8') {\n                  alert('Please select reason for Hold!!');\n                  document.forma.f_801.disabled=false;\n                  document.forma.f_801.className='';\n                  document.forma.f_801.focus();\n                 \ndocument.all.id_801.style.cssText='background-image:url(required.gif);\nbackground-position:top right; background-repeat:no-repeat;';\n\n                  document.forma.f_2163.disabled=false;\n                  document.forma.f_2163.className='';\n                 \ndocument.all.id_2163.style.cssText='background-image:url(required.gif);\nbackground-position:top right; background-repeat:no-repeat;';\n                  //alert(getFutureDate(new Date(new\nDate().getTime()+21*24*60*60*1000)));\n                  if((document.forma.f_2163.value=='') ||\n(document.forma.f_2163.value=='NULL')) {\n                    document.forma.f_2163.value=getFutureDate(new Date(new\nDate().getTime()+21*24*60*60*1000)); // 3 weeks from now;\n                  }\n\n                  document.all.id_2160.style.cssText='';\n                  document.all.id_2161.style.cssText='';\n                  document.all.id_2162.style.cssText='';\n\n                  document.forma.f_801.options.length = 0;\n                  document.forma.f_801.options[0] = new Option('-->select<--',\n'', false, false);\n                  document.forma.f_801.options[1] = new Option('Waiting for\nCustomer', '530', false, false);\n                  document.forma.f_801.options[2] = new Option('Waiting for\nTechnical Resolution', '531', false, false);\n                  document.forma.f_801.options[3] = new Option('EVPN\nEngagement', '532', false, false);\n                  document.forma.f_801.options[4] = new Option('Waiting for\nProcess Resolution', '533', false, false);\n                  document.forma.f_801.options[5] = new Option('Other', '534',\nfalse, false);\n\n                  document.all.f_2163_span.style.visibility='visible';\n                  document.all.id_3062.style.cssText='';\n                  //document.forma.f_3064.checked=false;\n               }", "id": 98756, "time": "2007-01-30T07:56:37Z", "bug_id": 41491, "creation_time": "2007-01-30T07:56:37Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 41491, "text": "Then the actual error is probably elsewhere on the page.\n\nPlease do not re-open this bug unless you can provide a test case (probably a\nJSP in this case) that conforms to all appropriate specifications but does not\nwork with Tomcat.", "id": 98805, "time": "2007-01-30T16:12:20Z", "creator": "markt@apache.org", "creation_time": "2007-01-30T16:12:20Z", "is_private": false, "attachment_id": null}]