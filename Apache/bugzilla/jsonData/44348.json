[{"count": 0, "tags": [], "creator": "colin.green@focus-solutions.co.uk", "attachment_id": null, "id": 113399, "time": "2008-02-04T03:20:55Z", "bug_id": 44348, "creation_time": "2008-02-04T03:20:55Z", "is_private": false, "text": "We started a JMeter test using 4 threads at about 1pm on Friday to run over \nthe weekend. On checking the logs it seems the test stopped about 9 hours in, \nthe target server had not reported any problems and was still running as \nexepcted. jmeter.log however shos that each of the 4 threads terminated with \nan OutOfMemory exception within a few minutes of each other....\n\n--------------------------------------------------\n2008/02/01 12:54:13 INFO  - jmeter.threads.JMeterThread: Thread Thread Group 1-\n1 started \n2008/02/01 12:54:13 INFO  - jmeter.threads.JMeterThread: Thread Thread Group 1-\n2 started \n2008/02/01 12:54:13 INFO  - jmeter.threads.JMeterThread: Thread Thread Group 1-\n3 started \n2008/02/01 12:54:14 INFO  - jmeter.threads.JMeterThread: Thread Thread Group 1-\n4 started \n2008/02/01 20:40:25 ERROR - jmeter.threads.JMeterThread: Test failed! \njava.lang.OutOfMemoryError: Java heap space\n\tat java.io.BufferedInputStream.<init>(Unknown Source)\n\tat java.io.BufferedInputStream.<init>(Unknown Source)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSampler.readResponse\n(HTTPSampler.java:219)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample\n(HTTPSampler.java:470)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample\n(HTTPSamplerBase.java:863)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample\n(HTTPSamplerBase.java:849)\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:300)\n\tat java.lang.Thread.run(Unknown Source)\n\n2008/02/01 20:40:26 INFO  - jmeter.threads.JMeterThread: Thread Thread Group 1-\n4 is done \n2008/02/01 20:40:26 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread \nThread Group 1-4 \n2008/02/01 20:41:24 ERROR - jmeter.threads.JMeterThread: Test failed! \njava.lang.OutOfMemoryError: Java heap space\n\tat sun.net.www.http.ChunkedInputStream.ensureRawAvailable(Unknown \nSource)\n\tat sun.net.www.http.ChunkedInputStream.readAheadNonBlocking(Unknown \nSource)\n\tat sun.net.www.http.ChunkedInputStream.readAhead(Unknown Source)\n\tat sun.net.www.http.ChunkedInputStream.available(Unknown Source)\n\tat java.io.FilterInputStream.available(Unknown Source)\n\tat java.io.BufferedInputStream.read(Unknown Source)\n\tat java.io.FilterInputStream.read(Unknown Source)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSampler.readResponse\n(HTTPSampler.java:256)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample\n(HTTPSampler.java:470)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample\n(HTTPSamplerBase.java:863)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample\n(HTTPSamplerBase.java:849)\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:300)\n\tat java.lang.Thread.run(Unknown Source)\n\n2008/02/01 20:41:25 INFO  - jmeter.threads.JMeterThread: Thread Thread Group 1-\n2 is done \n2008/02/01 20:41:25 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread \nThread Group 1-2 \n2008/02/01 20:47:57 ERROR - jmeter.threads.JMeterThread: Test failed! \njava.lang.OutOfMemoryError: Java heap space\n\tat java.util.Arrays.copyOf(Unknown Source)\n\tat java.lang.StringCoding.safeTrim(Unknown Source)\n\tat java.lang.StringCoding.access$100(Unknown Source)\n\tat java.lang.StringCoding$StringDecoder.decode(Unknown Source)\n\tat java.lang.StringCoding.decode(Unknown Source)\n\tat java.lang.String.<init>(Unknown Source)\n\tat java.lang.String.<init>(Unknown Source)\n\tat org.apache.jmeter.samplers.SampleResult.getResponseDataAsString\n(SampleResult.java:515)\n\tat org.apache.jmeter.assertions.ResponseAssertion.evaluateResponse\n(ResponseAssertion.java:273)\n\tat org.apache.jmeter.assertions.ResponseAssertion.getResult\n(ResponseAssertion.java:175)\n\tat org.apache.jmeter.threads.JMeterThread.checkAssertions\n(JMeterThread.java:517)\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:310)\n\tat java.lang.Thread.run(Unknown Source)\n\n2008/02/01 20:47:58 INFO  - jmeter.threads.JMeterThread: Thread Thread Group 1-\n3 is done \n2008/02/01 20:47:58 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread \nThread Group 1-3 \n2008/02/01 20:56:50 ERROR - jmeter.threads.JMeterThread: Test failed! \njava.lang.OutOfMemoryError: Java heap space\n\n2008/02/01 20:56:50 INFO  - jmeter.threads.JMeterThread: Thread Thread Group 1-\n1 is done \n2008/02/01 20:56:50 INFO  - jmeter.engine.StandardJMeterEngine: Ending thread \nThread Group 1-1 \n2008/02/01 20:56:50 INFO  - jmeter.engine.StandardJMeterEngine: Stopping test \n2008/02/01 20:56:50 INFO  - jmeter.engine.StandardJMeterEngine: Notifying test \nlisteners of end of test \n2008/02/01 20:56:50 INFO  - jmeter.gui.util.JMeterMenuBar: setRunning\n(false,*local*) \n2008/02/01 20:56:50 INFO  - jmeter.engine.StandardJMeterEngine: Test has ended \n--------------------------------------------------\n\n\nI'm using hte standard jmeter.bat file that comes with the JMeter 2.3.1 and \nthat seems to allocate a max heap size of 256MB. The JMeter script itself \ncontains a 'Response Assertion',' Assertion Results', 'View Results Tree' and \nan 'Aggregate Report'. All of the result pages are empty as none of the \nassertions failed. The Aggregate report is showing a total of 883,310 samples."}, {"count": 1, "tags": [], "creator": "colin.green@focus-solutions.co.uk", "text": "Created attachment 21464\nThe JMeter script in use when the excpetions were thrown.", "id": 113401, "time": "2008-02-04T03:24:46Z", "bug_id": 44348, "creation_time": "2008-02-04T03:24:46Z", "is_private": false, "attachment_id": 21464}, {"count": 2, "tags": [], "bug_id": 44348, "attachment_id": null, "text": "From\nhttp://jakarta.apache.org/jmeter/usermanual/component_reference.html#Aggregate_Report\n\n\"Calculation of the Median and 90% Line values requires a lot of memory as\ndetails of every Sample have to be saved. See the Summary Report  for a similar\nListener that does not need so much memory.\"\n\nThere's nothing that can be done about this; whatever memory allocation is used\nthe memory will eventually run out.", "id": 113402, "time": "2008-02-04T04:07:27Z", "creator": "sebb@apache.org", "creation_time": "2008-02-04T04:07:27Z", "is_private": false}]