[{"count": 0, "tags": [], "creator": "rfrovarp@apache.org", "attachment_id": null, "id": 96821, "time": "2006-12-12T10:16:20Z", "bug_id": 41163, "creation_time": "2006-12-12T10:16:20Z", "is_private": false, "text": "Publish.java from default publication was looking for an event of submit,\ninstead of publish. Also the sessions were not equal between getSession and the\none generated from the document in the factory."}, {"count": 1, "text": "Created attachment 19248\nFix to send publish notification", "bug_id": 41163, "attachment_id": 19248, "id": 96822, "time": "2006-12-12T10:16:46Z", "creator": "rfrovarp@apache.org", "creation_time": "2006-12-12T10:16:46Z", "tags": [], "is_private": false}, {"count": 2, "text": "Thanks for the patch!\n\nBut I don't quite understand this:\n\n-        // we assume that the document has been submitted, otherwise we do nothing\n-        if (version.getEvent().equals(\"submit\")) {\n+        // we assume that the document has been published, otherwise we do nothing\n+        if (version.getEvent().equals(\"publish\")) {\n\nMy intention was to send a notification to the user who submitted the document.", "bug_id": 41163, "attachment_id": null, "id": 96827, "time": "2006-12-12T11:27:18Z", "creator": "andreas@apache.org", "creation_time": "2006-12-12T11:27:18Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "andreas@apache.org", "text": "(In reply to comment #0)\n> Also the sessions were not equal between getSession and the\n> one generated from the document in the factory.\n\nThat's indeed a problem. I'll try to find the reason why the sessions are not\nthe same.", "id": 96828, "time": "2006-12-12T11:28:36Z", "bug_id": 41163, "creation_time": "2006-12-12T11:28:36Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 41163, "text": "(In reply to comment #2)\n> Thanks for the patch!\n> \n> But I don't quite understand this:\n> \n> -        // we assume that the document has been submitted, otherwise we do\nnothing\n> -        if (version.getEvent().equals(\"submit\")) {\n> +        // we assume that the document has been published, otherwise we do\nnothing\n> +        if (version.getEvent().equals(\"publish\")) {\n> \n> My intention was to send a notification to the user who submitted the document.\n\nOkay, I now see what you were after. However, the latest version is the\npublished version. What is really desired is the version before the current\nversion. I will submit another patch for that case.", "id": 96831, "time": "2006-12-12T12:13:02Z", "creator": "rfrovarp@apache.org", "creation_time": "2006-12-12T12:13:02Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 41163, "attachment_id": 19250, "text": "Created attachment 19250\nGets previous version to get submitter", "id": 96832, "time": "2006-12-12T12:13:33Z", "creator": "rfrovarp@apache.org", "creation_time": "2006-12-12T12:13:33Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 41163, "attachment_id": null, "id": 96833, "time": "2006-12-12T12:17:00Z", "creator": "rfrovarp@apache.org", "creation_time": "2006-12-12T12:17:00Z", "is_private": false, "text": "(In reply to comment #3)\n> (In reply to comment #0)\n> > Also the sessions were not equal between getSession and the\n> > one generated from the document in the factory.\n> \n> That's indeed a problem. I'll try to find the reason why the sessions are not\n> the same.\n\nI did go and do a test case where I got both of the sessions to be the same,\nusing the defautl factory method. I didn't get an error. However, I also didn't\nget the notification sent out. The method in the patch does get the notification\nto be sent and doesn't have a problem with mismatched sessions."}, {"attachment_id": null, "tags": [], "bug_id": 41163, "text": "Thanks a lot for the patch!", "count": 7, "id": 97026, "time": "2006-12-18T08:56:01Z", "creator": "andreas@apache.org", "creation_time": "2006-12-18T08:56:01Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 41163, "attachment_id": null, "id": 105490, "time": "2007-07-16T01:58:50Z", "creator": "thorsten@apache.org", "creation_time": "2007-07-16T01:58:50Z", "is_private": false, "text": "Renaming Lenya 1.4 to 2.0"}]