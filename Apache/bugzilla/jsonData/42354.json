[{"count": 0, "tags": [], "bug_id": 42354, "attachment_id": null, "text": "TLD's are not processed if the webapp is in a folder that has a space in it.\n\nMyspaces is failing using Tomcat 5.5 because its listener was not being \ninvoked.  I traced the problem with the debugger and found the problem.  \n\nJAR files in the WEB-INF/lib folder were supposed to be scanned for TLD's.  The \nmethod getJarPaths in startup/TldConfig.java[1] is supposed to return all the \nJAR files that have a TLD within them.  This method is not working correctly.\n\nThe problem is with how the path to the JAR files is locoated.  First all the \nclasspath entries for the webapp are converted to URL's.  \n\n  URL[] urls = ((URLClassLoader) loader).getURLs();\n\nThen to test to see the file exists a java.io.File is used\n\n  File file = new File(urls[i].getFile());\n  try {\n    file = file.getCanonicalFile();\n  } catch (IOException e) {\n    // Ignore\n  }\n  \n  if (!file.exists()) { // file.exists() RETURNING FALSE\n    continue;\n  }\n\nThe problem is to do with converting spaces.  The paths on my web app all \nlooked something like \"file:///c:/Documents%20%and%20Settings/foo/bar\".  The \nFile class does not understand the %20 as a space.\n\nA hack would be to add a .replaceAll(\"%20\", \" \") but i'm sure this will cause \nproblems somewhere.  And is %20 valid in a File URI?\n\n[1] \nhttp://svn.apache.org/repos/asf/tomcat/container/tc5.5.x/catalina/src/share/org/\napache/catalina/startup/TldConfig.java", "id": 102938, "time": "2007-05-08T07:47:48Z", "creator": "mfletche@petro-canada.ca", "creation_time": "2007-05-08T07:47:48Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 42354, "attachment_id": null, "text": "Fixed in svn and will be included in 5.5.24 onwards.", "id": 103140, "time": "2007-05-12T16:29:03Z", "creator": "markt@apache.org", "creation_time": "2007-05-12T16:29:03Z", "is_private": false}]