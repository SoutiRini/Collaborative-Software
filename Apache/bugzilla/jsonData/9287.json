[{"count": 0, "tags": [], "bug_id": 9287, "is_private": false, "text": "I try to create javadoc from AIX and ant build failed with message \ncom.sun.tools.javadoc.Main is not found though the tools.jar is in proper \nclasspath.  JavaEnvUtils is picking up the wrong path for javadoc exe.  \n\nThe code\n\norg.apache.tools.ant.util.JavaEnvUtils.java\n\nfirst gets the javadoc.exe from bin directory and then skips the check for \nAIX.  I would think first check for AIX path if not found check in the bin \ndirectory.\n\nCurrently the code is like this\n\n        File jExecutable = findInDir(javaHome + \"/bin\", command);\n\n        if (jExecutable == null && isAix) {\n            // On IBM's JDK 1.2 the directory layout is different, 1.3 follows\n            // Sun's layout.\n            jExecutable = findInDir(javaHome + \"/sh\", command);\n        }\n\nI think the checking order should be reverse.  First check for AIX JDK1.2 \nshould be made if exe is not found in sh directory then look for bin \ndirectory.  Otherwise if the os is AIX and java version starts with 1.2 \noverwrite the bin folder with sh folder.\n\nif(System.getProperty(\"java.version\").startsWith(JAVA_1_2) && isAix)\n{\n    jExecutable = findInDir(javaHome + \"/sh\", command);\n}", "id": 16483, "time": "2002-05-21T14:17:57Z", "creator": "kollakesav@hotmail.com", "creation_time": "2002-05-21T14:17:57Z", "attachment_id": null}, {"count": 1, "text": "I'm failing to see the problem, probably I'm just not understanding you.\n\nIs there a ${java.home}/../bin/javadoc file in this JDK?  If not, sh should be\npicked up and if it is there, why is it the wrong one?\n\nChanging the lookup order may be OK, but are there really two versions of it and\nthe one in the \"standard\" place is unusable?", "bug_id": 9287, "is_private": false, "id": 16670, "time": "2002-05-24T15:25:34Z", "creator": "bodewig@apache.org", "creation_time": "2002-05-24T15:25:34Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9287, "attachment_id": null, "text": "Yes in AIX4.3.3 Jdk1.2 version ${java.home}/../bin/javadoc file does exists and \ninvoking above command fails the execution.  The same thing is true for \njava.exe that is the reason in ant.sh the sh file was picked first and bin \ndirectory later.\n\n", "id": 16802, "time": "2002-05-28T06:52:32Z", "creator": "kollakesav@hotmail.com", "creation_time": "2002-05-28T06:52:32Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 9287, "text": "Well, that's not been the reason for the shell scripts (I've been the one who made\nthe changes and can confirm that it is that way for no good reason 8-).\n\nShould be fixed in 1.5beta2.", "count": 3, "id": 16805, "time": "2002-05-28T09:08:17Z", "creator": "bodewig@apache.org", "creation_time": "2002-05-28T09:08:17Z", "is_private": false}, {"count": 4, "text": "I thought the order was specific any way if you can modify the order that will \nsolve the problem of AIX.\n\nThank you very much\n\nHere is the directory listing on AIX4.3.3 \n\n/usr/java_dev2> java -version\njava version \"1.2.2\"\nClassic VM (J2RE 1.2.2 IBM build ca122-20011213 (JIT enabled: jitc))\n\n\n/usr/java_dev2> find . -name 'javadoc*'\n./bin/javadoc\n./bin/javadoc_g\n./sh/javadoc\n./sh/javadoc_g\n/usr/java_dev2> \n", "bug_id": 9287, "is_private": false, "id": 16835, "time": "2002-05-28T20:31:18Z", "creator": "kollakesav@hotmail.com", "creation_time": "2002-05-28T20:31:18Z", "tags": [], "attachment_id": null}]