[{"text": "Hi, I'm using from time (years) Apache HTTPD rom 1.xxxx to today's release \n2.2.6.\n\nI use it with LDAP support on a LINUX BOX so you'll understand that I COMPILE \nIT (every release 223, 224, 225, 226, ..... what will be).\n\nUnder Unix box I use Novell LDAP SDK (mainly) but iPlanet LDAP SDK too (is \nworking).\n\nLately I tried to configure an HTTPD (obviously APACHE HTTPD server) under a \nWin32 Platform.\n\nI took the apache_2.2.6-win32-x86-openssl-0.9.8e.msi from APACHE DOWNLOAD \nSection.\n\nI tried to cut & paste the same httpd.conf used on my unix/linux box.\n\nIs all working but I got some kind of problems while using the mod_  ldap and \nauthnz_ldap.\n\n******************** UNDER LINEX ARE WORKING THESE LINES WITH Novell SDK FROM \nYEARS. Under Win32 NO! :(\n\nhttpd.conf lines for LDAP:\n  AuthType basic\n  AuthBasicProvider ldap\n  AuthName \"*Employes*\"\n  AuthLDAPUrl ldap://ldap.domain.top:389/OU=xxx,DC=yy?uid?sub NONE\n  AuthLDAPBindDN user\n  AuthLDAPBindPassword password\n  AuthzLDAPAuthoritative off\n  AuthLDAPRemoteUserIsDN on\n  require valid-user\n\n\nERROR.LOG\n---------------------------------------\n[Tue Oct 09 15:01:39 2007] [notice] Apache/2.2.6 (Win32) configured -- resuming \nnormal operations\n[Tue Oct 09 15:01:39 2007] [notice] Server built: Sep  5 2007 08:58:56\n[Tue Oct 09 15:01:39 2007] [notice] Parent: Created child process 1572\n[Tue Oct 09 15:01:39 2007] [debug] mpm_winnt.c(487): Parent: Sent the \nscoreboard to the child\n[Tue Oct 09 15:01:40 2007] [info] APR LDAP: Built with Microsoft Corporation. \nLDAP SDK\n[Tue Oct 09 15:01:40 2007] [info] LDAP: SSL support unavailable: LDAP: CA \ncertificates cannot be set using this method, as they are stored in the \nregistry instead.\n[Tue Oct 09 15:01:40 2007] [notice] Child 1572: Child process is running\n[Tue Oct 09 15:01:40 2007] [debug] mpm_winnt.c(408): Child 1572: Retrieved our \nscoreboard from the parent.\n[Tue Oct 09 15:01:40 2007] [info] Parent: Duplicating socket 224 and sending it \nto child process 1572\n[Tue Oct 09 15:01:40 2007] [debug] mpm_winnt.c(605): Parent: Sent 1 listeners \nto child 1572\n[Tue Oct 09 15:01:40 2007] [debug] mpm_winnt.c(564): Child 1572: retrieved 1 \nlisteners from parent\n[Tue Oct 09 15:01:40 2007] [info] Child 688: Accept thread exiting.\n[Tue Oct 09 15:01:40 2007] [notice] Child 688: Released the start mutex\n[Tue Oct 09 15:01:40 2007] [notice] Child 1572: Acquired the start mutex.\n[Tue Oct 09 15:01:40 2007] [info] Child 688: 250 threads blocked on the \ncompletion port\n[Tue Oct 09 15:01:40 2007] [notice] Child 1572: Starting 250 worker threads.\n[Tue Oct 09 15:01:40 2007] [notice] Child 1572: Starting thread to listen on \nport 80.\n[Tue Oct 09 15:01:41 2007] [notice] Child 688: Waiting for 250 worker threads \nto exit.\n[Tue Oct 09 15:01:41 2007] [notice] Child 688: All worker threads have exited.\n[Tue Oct 09 15:01:41 2007] [notice] Child 688: Child process is exiting\n[Tue Oct 09 15:01:43 2007] [debug] mod_authnz_ldap.c(376): [client 10.x.x.x] \n[1572] auth_ldap authenticate: using URL ldap://ldap.domain.top:389/O=xxx,c=yy?\nuid?sub\n[Tue Oct 09 15:01:43 2007] [warn] [client 10.x.x.x] [1572] auth_ldap \nauthenticate: user  authentication failed; URI /swd/ [ldap_search_ext_s() for \nuser failed][Errore di filtro]\n------------------------------------------------------", "tags": [], "bug_id": 43577, "attachment_id": null, "count": 0, "id": 109155, "time": "2007-10-09T06:46:35Z", "creator": "alcol@hotmail.com", "creation_time": "2007-10-09T06:46:35Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "wrowe@apache.org", "is_private": false, "id": 109159, "time": "2007-10-09T07:56:07Z", "bug_id": 43577, "creation_time": "2007-10-09T07:56:07Z", "tags": [], "text": "Debating between closing INVALID, or marking NEEDINFO.\n\nPlease get real, \"a Win32 Platform\" is a non-answer.  Identify your OS and\nservice pack level (there's a nifty spot to stuff that above, it's identified\nby bugzilla as \"OS\").\n\nRecognize on Win32 this uses the LDAP client interface bundled in the Active\nDirectory support.  The support for ldap_s/starttls is going to be determined\nby which epoch of AD support is installed on this box.\n"}, {"count": 2, "tags": [], "bug_id": 43577, "attachment_id": null, "text": "Thank about leaving it (for now) as needing info and not as invalid! mainly \nbecouse undel RedHat Linux it work\n\nLinux xxxxxxxxxxxxxx 2.4.20-8smp #1 SMP Thu Mar 13 17:45:54 EST 2003 i686 i686 \ni386 GNU/Linux\n\nWin32 is a Windows 2000 platorm English language with Sp4 all all installed \nfrom MS Windows Update WEB site.\n\nThe only differenceis that the MSI package from APACHE download (for WINDOWS) \nis compiled with MS LDAP SDK. On Linux I use Novell SDK but work fine with \nNetscape IPLANET sdk too.\n\nWhy the same httpd.conf don't work if is working under linux?\n\n\nI have added these lines inside the httpd.conf for Windows:\n\nLoadModule ldap_module modules/mod_ldap.so\nLoadModule authnz_ldap_module modules/mod_authnz_ldap.so\n\nbelow....\n\nAlias /swd \"d:/Inetpub/ftproot/directory\"\n<Location /directory>\n  Order deny,allow\n  Allow from 10.0.0.0/8\n  Deny from all\n  ReadmeName README\n  HeaderName HEADER\n  AuthType basic\n  AuthBasicProvider ldap\n  AuthName \"REALM REALM\"\n  AuthLDAPUrl ldap://ldap.domain.top:389/O=xxx,c=yy?uid?sub NONE\n  AuthLDAPBindDN ldapuser\n  AuthLDAPBindPassword ldappassword\n  AuthzLDAPAuthoritative off\n  AuthLDAPRemoteUserIsDN on\n  require valid-user\n  Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec\n</Location>\n\nerror.log (LogLevel DEBUG):\n[Tue Oct 09 15:01:43 2007] [debug] mod_authnz_ldap.c(376): [client 10.x.x.x] \n[1572] auth_ldap authenticate: using URL ldap://ldap.domain.top:389/O=xxx,c=yy?\nuid?sub\n[Tue Oct 09 15:01:43 2007] [warn] [client 10.x.x.x] [1572] auth_ldap \nauthenticate: user  authentication failed; URI /swd/ [ldap_search_ext_s() for \nuser failed][Errore di filtro]\n\n", "id": 109161, "time": "2007-10-09T08:18:38Z", "creator": "alcol@hotmail.com", "creation_time": "2007-10-09T08:18:38Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 43577, "attachment_id": null, "id": 109162, "time": "2007-10-09T08:24:39Z", "creator": "alcol@hotmail.com", "creation_time": "2007-10-09T08:24:39Z", "is_private": false, "text": "is a standalone machine and have to browse against a LOTUS DOMINO 7 LDAP server \nwith authentication but without SSL.\n\nIf I put a wrong \n  AuthLDAPBindDN ldapuser\n  AuthLDAPBindPassword ldappassword\npairs I'm able to see (on the LOTUS DOMINO CONSOLE) an LDAP Authentication \nerror.\n\nIf LDAP user and password are valid I get no errors on my LOTUS DOMINO console.\n"}, {"text": "From my linux bon:\n\nServer version: Apache/2.2.6 (Unix)\nServer built:   Sep  8 2007 18:35:50\n\nServer version: Apache/2.2.6 (Unix)\nServer built:   Sep  8 2007 18:35:50\nServer's Module Magic Number: 20051115:5\nServer loaded:  APR 1.2.2, APR-Util 1.2.2\nCompiled using: APR 1.2.2, APR-Util 1.2.2\nArchitecture:   32-bit\nServer MPM:     Prefork\n  threaded:     no\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=128\n -D HTTPD_ROOT=\"/usr/local/apache2\"\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\nCompiled in modules:\n  core.c\n  mod_authn_file.c\n  mod_authn_default.c\n  mod_authz_host.c\n  mod_authz_groupfile.c\n  mod_authz_user.c\n  mod_authnz_ldap.c\n  mod_authz_default.c\n  mod_auth_basic.c\n  mod_include.c\n  mod_filter.c\n  mod_deflate.c\n  util_ldap.c\n  mod_log_config.c\n  mod_env.c\n  mod_mime_magic.c\n  mod_expires.c\n  mod_usertrack.c\n  mod_unique_id.c\n  mod_setenvif.c\n  mod_ssl.c\n  prefork.c\n  http_core.c\n  mod_mime.c\n  mod_status.c\n  mod_autoindex.c\n  mod_asis.c\n  mod_info.c\n  mod_cgi.c\n  mod_cgid.c\n  mod_negotiation.c\n  mod_dir.c\n  mod_actions.c\n  mod_userdir.c\n  mod_alias.c\n  mod_so.c\n\n", "tags": [], "bug_id": 43577, "attachment_id": null, "count": 4, "id": 109163, "time": "2007-10-09T08:27:04Z", "creator": "alcol@hotmail.com", "creation_time": "2007-10-09T08:27:04Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 43577, "attachment_id": null, "text": "\"Why the same httpd.conf don't work if is working under linux?\"\n\nBecause there are about a half dozen different SDK's and we picked the one that\nwe don't have to be bothered to distribute as part of a win32 binary (and deal\nwith all the licensing implications of).  Glad it works for you on linux.\n\nOn to your problem; it /should/ work based on quick verification that the \nWindows 2000 client drivers are still endorsed against Windows 2003 servers,\nwhich suggests they are as current as necessary.\n\nI'm researching, and will update this incident in the next few days after some\nvalidation.  I suspect it's based on the MS preference to connect to starttls\nenabled servers, or that it's due to connecting to a starttls ldap service\nfor which you haven't registered the server certificate with the client. \n\n", "id": 109167, "time": "2007-10-09T08:54:08Z", "creator": "wrowe@apache.org", "creation_time": "2007-10-09T08:54:08Z", "is_private": false}, {"count": 6, "tags": [], "text": "I just installed on a Windows 2003 server with SP2 and all installed from MS \nWindows Update till date 01 Oct. 2007\n\nHappen the same as on my Windows 2000 Server box.\n\nhttpd.conf (is the same)! working on linux but not on Win2000Srv and Win2003Srv.\n", "is_private": false, "id": 109168, "creator": "alcol@hotmail.com", "time": "2007-10-09T08:58:42Z", "bug_id": 43577, "creation_time": "2007-10-09T08:58:42Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "Unix box, conf lines:\n\n#\n# Tested OK with HTTPD 2.2.0 and mod_authnz_ldap.so with Novell LDAP SDK\n#\n./configure --enable-deflate --enable-mime-magic --enable-expires --enable-\nusertrack --enable-unique-id --enable-ssl --with-ssl=/usr/local/ssl --enable-\nhttp --enable-mod-info --enable-info --enable-cgi --enable-cgid --enable-\nspelling --enable-module=all --with-ldap --enable-ldap --enable-auth-ldap --\nenable-authnz-ldap --with-ldap-include=/home/colosi/dev/ldap/novell-cldap-devel-\n2006.02.20-1linux/include/ --with-ldap-lib=/home/colosi/dev/ldap/novell-cldap-\ndevel-2006.02.20-1linux/lib/\n\n#\n# Tested OK with HTTPD 2.2.0 and mod_authnz_ldap.so with iPlanet LDAP SDK\n#\n# ./configure --enable-deflate --enable-mime-magic --enable-expires --enable-\nusertrack --enable-unique-id --enable-ssl --with-ssl=/usr/local/ssl --enable-\nhttp --enable-mod-info --enable-info --enable-cgi --enable-cgid --enable-\nspelling --enable-module=all --with-ldap --enable-ldap --enable-auth-ldap --\nenable-authnz-ldap --with-ldap-include=../../ldap/iplanet/include --with-ldap-\nlib=../../ldap/iplanet/lib/\n\ntotale 168\ndrwxr-xr-x    8 30       mem          4096 20 feb  2006 .\ndrwx------    5 colosi   colosi       4096 15 feb  2007 ..\n-r--r--r--    1 30       mem          2894 14 feb  2006 COPYRIGHT.HSpencer\n-r--r--r--    1 30       mem          1341 14 feb  2006 COPYRIGHT.OpenLDAP\ndrwxr-xr-x    3 30       mem          4096 16 feb  2006 doc\ndrwxr-xr-x    2 30       mem          4096 14 feb  2006 include\ndrwxr-xr-x    3 30       mem          4096 14 feb  2006 lib\n-r--r--r--    1 30       mem          1988 14 feb  2006 LICENSE.OpenLDAP\n-r--r--r--    1 30       mem          6279 14 feb  2006 LICENSE.OpenSSL\ndrwxr-xr-x    3 30       mem          4096 14 feb  2006 man\n-r--r--r--    1 30       mem         41486 14 feb  2006 README.txt\ndrwxr-xr-x    3 30       mem          4096 14 feb  2006 samples\n-rw-r--r--    1 30       mem         50340 14 feb  2006 SDK_CHANGELOG.html\n-rw-r--r--    1 30       mem          2001  6 feb  2006 SDK_DEPENDENCIES.html\n-rw-r--r--    1 30       mem         10279 15 mar  2005 SDK_LICENSE\ndrwxr-xr-x    3 30       mem          4096 14 feb  2006 tools\n\n[root@xxxx lib]# ls -la\ntotale 5832\ndrwxr-xr-x    3 30       mem          4096 14 feb  2006 .\ndrwxr-xr-x    8 30       mem          4096 20 feb  2006 ..\ndrwxr-xr-x    2 30       mem          4096 14 feb  2006 debug\n-rwxr-xr-x    1 30       mem         46043 14 feb  2006 libldapgss.so\n-rwxr-xr-x    1 30       mem         46043 14 feb  2006 libldapgss.so.0\n-rwxr-xr-x    1 30       mem         46043 14 feb  2006 libldapgss.so.0.0.0\n-rwxr-xr-x    1 30       mem        795907 14 feb  2006 libldapsdk.so\n-rwxr-xr-x    1 30       mem        795907 14 feb  2006 libldapsdk.so.0\n-rwxr-xr-x    1 30       mem        795907 14 feb  2006 libldapsdk.so.0.0.0\n-rwxr-xr-x    1 30       mem        960437 14 feb  2006 libldapssl.so\n-rwxr-xr-x    1 30       mem        960437 14 feb  2006 libldapssl.so.0\n-rwxr-xr-x    1 30       mem        960437 14 feb  2006 libldapssl.so.0.0.0\n-rwxr-xr-x    1 30       mem        161387 14 feb  2006 libldapx.so\n-rwxr-xr-x    1 30       mem        161387 14 feb  2006 libldapx.so.0\n-rwxr-xr-x    1 30       mem        161387 14 feb  2006 libldapx.so.0.0.0\n", "is_private": false, "id": 109172, "creator": "alcol@hotmail.com", "time": "2007-10-09T09:37:54Z", "bug_id": 43577, "creation_time": "2007-10-09T09:37:54Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 43577, "attachment_id": null, "id": 115873, "time": "2008-04-25T08:27:33Z", "creator": "alcol@hotmail.com", "creation_time": "2008-04-25T08:27:33Z", "is_private": false, "text": "someone forgot this ticket?!.\nI'll be old with white airs ;)\n"}, {"count": 9, "tags": [], "text": "Is this the same as bug 43617?\n\nSee also https://bugzilla.redhat.com/show_bug.cgi?id=471898 and \nhttp://opensolaris.org/jive/thread.jspa?threadID=84321&tstart=0", "attachment_id": null, "id": 124245, "creator": "jgarrison@troux.com", "time": "2009-01-21T13:04:21Z", "bug_id": 43577, "creation_time": "2009-01-21T13:04:21Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 43577, "attachment_id": null, "text": "(In reply to comment #9)\n> Is this the same as bug 43617?\n> \n> See also https://bugzilla.redhat.com/show_bug.cgi?id=471898 and \n> http://opensolaris.org/jive/thread.jspa?threadID=84321&tstart=0\n> \n\nDoes not look to be related to me.", "id": 124252, "time": "2009-01-21T14:36:42Z", "creator": "covener@gmail.com", "creation_time": "2009-01-21T14:36:42Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 43577, "text": "no one here?", "id": 132041, "time": "2009-11-17T07:29:14Z", "creator": "alcol@hotmail.com", "creation_time": "2009-11-17T07:29:14Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 43577, "attachment_id": null, "id": 132042, "time": "2009-11-17T07:42:25Z", "creator": "covener@gmail.com", "creation_time": "2009-11-17T07:42:25Z", "is_private": false, "text": "(In reply to comment #11)\n> no one here?\n\nCan you reproduce on Windows 2008 and generate the tracing described here:\n\nhttp://msdn.microsoft.com/en-us/library/aa366152%28VS.85%29.aspx\n\n(Caution, it may have your bind DN embedded in it.)\n\nOr at least confirm this still occurs on a Windows 2003 with recent maintenance?  I don't think there will be much effort in working on a sole report of a failure on Windows 2000."}, {"count": 13, "tags": [], "bug_id": 43577, "text": "thanks for the patch. i installed it on centos v5.5, apache v2.2, and php v5.2.13. i restarted apache and still get 500 error. my PHP is using fast cgi.", "id": 138131, "time": "2010-07-04T15:25:44Z", "creator": "johnharre@cronsystems.net", "creation_time": "2010-07-04T15:25:44Z", "is_private": false, "attachment_id": null}]