[{"count": 0, "tags": [], "bug_id": 3855, "attachment_id": null, "is_private": false, "id": 6111, "time": "2001-09-27T06:23:48Z", "creator": "avogt@skillsonline.de", "creation_time": "2001-09-27T06:23:48Z", "text": "When executing the following line of code in a web application,\n\tjava.net.URL xmlDirURL = this.getClass().getResource(\"xmlsrc\");\na ClassCastException is thrown. \"xmlsrc\" is the name of a subdirectory in the \ndirectory where the class is located to which the code belongs: The class file\nis \nC:\\Programme\\apache\\tomcat\\4.0\\webapps\\dev\\WEB-INF\\classes\\de\\skillsonline\\quiz\\\nQuiz.class\nand the \nC:\\Programme\\apache\\tomcat\\4.0\\webapps\\dev\\WEB-INF\\classes\\de\\skillsonline\\quiz\\\nxmlsrc\ndirectory exists.\n\nThe code works with tomcat 3.2.1 and 3.2.3.\nThe purpose of the call is to extract the absolute path of the directory by a \nsubsequent call to xmlDirURL.getFile(). If you are aware of a different way of \nobtaining this path, please tell me.\n\nHere is the stack trace of the exception:\n\n\njava.lang.ClassCastException: org.apache.naming.resources.FileDirContext\n\tat \norg.apache.catalina.loader.WebappClassLoader.findResourceInternal(Unknown \nSource)\n\tat org.apache.catalina.loader.WebappClassLoader.findResource(Unknown \nSource)\n\tat org.apache.catalina.loader.WebappClassLoader.getResource(Unknown \nSource)\n\tat java.lang.Class.getResource(Class.java:1249)\n\tat de.skillsonline.quiz.Quiz.setUserDir(Quiz.java:1611)\n\tat de.skillsonline.quiz.Quiz.readXML(Quiz.java:1539)\n\tat de.skillsonline.quiz.Quiz.setQuizKey(Quiz.java:62)\n\tat org.apache.jsp.quiz1$jsp._jspService(quiz1$jsp.java:142)\n\tat org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.service(Unknown Source)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(Unknown Source)\n\tat org.apache.jasper.servlet.JspServlet.service(Unknown Source)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat \norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Unknown Source)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown \nSource)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(Unknown Source)\n\tat org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n\tat org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardContextValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(Unknown Source)\n\tat org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n\tat org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardContext.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardHostValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(Unknown Source)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(Unknown Source)\n\tat org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n\tat org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(Unknown Source)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext(Unknown Source)\n\tat org.apache.catalina.core.StandardPipeline.invoke(Unknown Source)\n\tat org.apache.catalina.core.ContainerBase.invoke(Unknown Source)\n\tat org.apache.catalina.connector.http.HttpProcessor.process(Unknown \nSource)\n\tat org.apache.catalina.connector.http.HttpProcessor.run(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:484)"}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 6124, "time": "2001-09-27T10:52:02Z", "bug_id": 3855, "creation_time": "2001-09-27T10:52:02Z", "is_private": false, "text": "If you have jndi.jar in your /WEB-INF/lib or /lib folder, please remove it.\nMake sure the only jndi.jar is in /common/lib, and you should be fine. If \nyou're using JDK 1.3+, you can remove it altogether."}]