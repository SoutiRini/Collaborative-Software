[{"count": 0, "tags": [], "bug_id": 4339, "text": "When I use \"//\" style comments inside JSP code, they end up commenting out the \nServlet code Tomcat generates when converting my page from a JSP to a Servlet. \nYou should make sure \"//\" comments do not comment out your code. This is pretty \ncritical as many people use \"//\" style comments.", "id": 6997, "time": "2001-10-22T09:50:34Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2001-10-22T09:50:34Z", "is_private": false, "attachment_id": null}, {"count": 1, "text": "You should not be using \"//\" comments.  You have absolutely no control over the\nJava code that is generated for your page, so it is your responsibility to use\nwell-formed constructs.  In this particular case, that means to use /* */ style\ncomment markers so that you can explicitly close them.  Even if we changed\nTomcat to do what you suggest, depending on this would not be portable and you'd\nhave massive problems as soon as you tried to switch to some other container\nthat didn't do it.\n\nUsing scriptlets at all can lead you into lots of other problems (such as\nintermixing business logic and presentation logic that makes it very hard to\nmaintain and enhance your applications), but that is a whole separate\ndiscussion.\n", "bug_id": 4339, "attachment_id": null, "id": 7000, "time": "2001-10-22T10:11:23Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-10-22T10:11:23Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 4339, "attachment_id": null, "id": 7001, "time": "2001-10-22T10:21:03Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2001-10-22T10:21:03Z", "is_private": false, "text": "Sorry but your resolution makes no sense.\n\nYou seem to imply that:\n\n- \"//\" comments are invalid within JSP code, which is incorrect.\n- Just because other container implementations don't fix this issue, Tomcat \nshouldn't either. Which is also incorrect.\n\nI never said Tomcat should convert \"//\" style comments to /* */ style comments \nfor me. \n\nThe way I look at it, you have two possible solutions:\n\n- Tomcat scans for \"//\" style comments and removes the commented code before it \ncompiles the JSP file into a Servlet. This is a quick-fix, but not ideal.\n\n- Tomcat scans for \"//\" comments, compiles the line of code without the \ncommented component, and appends the comment thereafter. For example:\n\nJSP Code:\n\n  System.out.println(\"This is a test\"); //This should work quite well\n\nTomcat steps:\n\n- Convert 'System.out.println(\"This is a test\");' into Servlet\n- Add \"//This should work quite well\" after resulting line of code"}, {"count": 3, "tags": [], "creator": "cmanolache@yahoo.com", "attachment_id": null, "text": "Can you include a JSP page that have this problem ? I use // in jsps and never had problems.\n\nMy only guess could be that you use <%= // %>, but // is not valid in a \njava expression ( which is what <%= expects ). This will fail ( same as if \nyou include a ; or anything that is not valid in an expression ).\n", "id": 7013, "time": "2001-10-22T13:12:03Z", "bug_id": 4339, "creation_time": "2001-10-22T13:12:03Z", "is_private": false}, {"count": 4, "tags": [], "creator": "cowwoc@bbs.darktech.org", "attachment_id": null, "is_private": false, "id": 7016, "time": "2001-10-22T13:37:14Z", "bug_id": 4339, "creation_time": "2001-10-22T13:37:14Z", "text": "Hi,\n\nIt funny you should mention <% // %> as they work properly (After all, \"//\" on \nempty lines is valid under Java Code). So that's not a problem.\n\nAnyway, with Craig's help I managed to resolve this issue. I am no longer able \nto reproduce the problem so I'll leave it as RESOLVED WORKSFORME and reopen it \nin the future if I get it again.\n\nThanks for your help,\n\nGili"}]