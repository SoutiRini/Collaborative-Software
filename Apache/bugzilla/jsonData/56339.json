[{"count": 0, "attachment_id": null, "creator": "sivrisoner@yahoo.com", "is_private": false, "id": 174213, "time": "2014-04-02T08:56:46Z", "bug_id": 56339, "creation_time": "2014-04-02T08:56:46Z", "tags": [], "text": "we have sessionlistener\nin sessionDestroyed method we call session.invalidate()\nin version 7.0.42 its ok but newer versions loops code\n\npublic void sessionDestroyed(HttpSessionEvent arg0) {\n\t\tif(arg0 !=null && arg0.getSession() !=null)\n\t\t{\n\t\t\tHttpSession session = arg0.getSession();\n\t\t\tString sessionId = session.getId();\n\t\t\tif(sessionId != null)\n\t\t\t{\n\t\t\t\tUserPrincipal userPrincipal = (UserPrincipal)session.getAttribute(ContextVar.USERPRINCIPLE);\n\t\t\t\tif (userPrincipal != null)\n\t\t\t\t{\n\t\t\t\t\tUserOpBLO userOpBLO = new UserOpBLO(new ResourcePool());\n\t\t\t\t\tuserOpBLO.processLogoutActivity(sessionId, userPrincipal.getUserId());\n\t\t\t\t\tCurrentSessions.SESSIONS.remove(sessionId);\n\t\t\t\t\tsession.invalidate();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}"}, {"count": 1, "tags": [], "bug_id": 56339, "is_private": false, "id": 174224, "creation_time": "2014-04-02T19:53:09Z", "time": "2014-04-02T19:53:09Z", "creator": "chris@christopherschultz.net", "text": "Why would you call session.invalidate() from SessionListener.sessionDestroyed? It's already in the process of being invalidated.", "attachment_id": null}, {"count": 2, "tags": [], "text": "The code is old code \nMy Friend who wrote the code said there was A problem why he put it. He did not remember the problem.\nI understood that you said remove session.invalidate()", "is_private": false, "id": 174227, "creator": "sivrisoner@yahoo.com", "time": "2014-04-02T20:01:22Z", "bug_id": 56339, "creation_time": "2014-04-02T20:01:22Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 56339, "text": "There should be no need to call session.invalidate() from the session destroyed event. However, entering an infinite loop if application code does do this is far from ideal.\n\nThis is a side-effect of the fix for bug 55521. I'll look into a fix.", "id": 174286, "time": "2014-04-04T21:04:55Z", "creator": "markt@apache.org", "creation_time": "2014-04-04T21:04:55Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "creator": "markt@apache.org", "text": "This has been fixed in 8.0.x for 8.0.6 onwards and in 7.0.x 7.0.54 onwards.", "id": 174288, "time": "2014-04-04T21:25:37Z", "bug_id": 56339, "creation_time": "2014-04-04T21:25:37Z", "tags": [], "is_private": false}]