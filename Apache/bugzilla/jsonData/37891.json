[{"count": 0, "tags": [], "creator": "steveshaw@ca.ibm.com", "text": "JavaDoc for KEY_HEIGHT and KEY_WIDTH indicate that the aspect ratio is maintained if one of these \nvalues isn't set.  This is true except if you set both values, the aspect ratio of the rendered image is still \nmaintained.  The buffered image will be created at the values suggested, but the SVG is rendered to fit \nwithin the size at the same aspect ratio as the original document.\n\nI would expect that it would be rendered to the full extent of the width and height provided unless one \nof the values wasn't set.\n\nThis could be supported alternatively using a new key KEY_MAINTAIN_ASPECT ratio that is checked to \nsee if rendering should always respect the original document aspect ratio.\n\ni.e. code to calculate AffineTransform:\n\n\t\tboolean maintainAspectRatio = true;\n\t\tif (hints.containsKey(KEY_MAINTAIN_ASPECT_RATIO)) {\n\t\t\tmaintainAspectRatio = \n((Boolean)hints.get(KEY_MAINTAIN_ASPECT_RATIO)).booleanValue();\n\t\t}\n\t\t\n\t\tif (maintainAspectRatio) {\n\t\t\ttry {\n\t\t\t\tPx = ViewBox.getViewTransform(ref, svgRoot, newWidth, newHeight);\n\t\t\t} catch (BridgeException ex) {\n\t\t\t\tthrow new TranscoderException(ex);\n\t\t\t}\n\t\t\t\n\t\t\tif (Px.isIdentity() && (newWidth != docWidth || newHeight != docHeight)) {\n\t\t\t\t// The document has no viewBox, we need to resize it by hand.\n\t\t\t\t// we want to keep the document size ratio\n\t\t\t\tfloat d = Math.max(docWidth, docHeight);\n\t\t\t\tfloat dd = Math.max(newWidth, newHeight);\n\t\t\t\tfloat scale = dd/d;\n\t\t\t\tPx = AffineTransform.getScaleInstance(scale, scale);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfloat xscale = newWidth / docWidth;\n\t\t\tfloat yscale = newHeight / docHeight; \n\t\t\tPx = AffineTransform.getScaleInstance(xscale, yscale);\n\t\t}", "id": 83613, "attachment_id": null, "bug_id": 37891, "creation_time": "2005-12-13T21:52:44Z", "time": "2005-12-13T21:52:44Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 37891, "text": "The Transcoder respects the 'preserveAspectRatio' attribute\non the root SVG Element.  If you want it to stretch to fit\nthe available viewport set 'preserveAspectRatio' to 'none'\non the root SVG element before transcoding the file.", "id": 83622, "time": "2005-12-14T01:44:39Z", "creator": "deweese@apache.org", "creation_time": "2005-12-14T01:44:39Z", "is_private": false, "attachment_id": null}]