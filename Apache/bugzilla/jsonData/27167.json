[{"attachment_id": null, "tags": [], "bug_id": 27167, "is_private": false, "count": 0, "id": 52811, "time": "2004-02-23T17:03:45Z", "creator": "pr@webapp.de", "creation_time": "2004-02-23T17:03:45Z", "text": "I have compile the mod_jk2 at windows \nSetup a catalina.base for integration a Tomct 5.0.19 with Apache 2.0.48\n\nBut, nothing work right ! :-(\n\nI can startup the vm inside Apache and can access the application with a http\nconnector. One strange thing is, that JSP can't compile. \nAfter I add the tools jar at my worker2.properties the probleme are not fixed.\n\nMy last stable JNI Version is JK2.0.2, Apache 2.0.48 with Tomcat 4.1.27.\n\nI add my jk2.properties and worker2.properties .\n\nPeter\n\nPS: Also testet with the current CVS Head!"}, {"count": 1, "tags": [], "text": "Created attachment 10497\nApache 2.0.48 worker2.properties (JNI for Tomcat 5.0.19)", "is_private": false, "id": 52812, "creation_time": "2004-02-23T17:04:51Z", "time": "2004-02-23T17:04:51Z", "creator": "pr@webapp.de", "bug_id": 27167, "attachment_id": 10497}, {"count": 2, "tags": [], "bug_id": 27167, "attachment_id": 10498, "id": 52813, "time": "2004-02-23T17:06:04Z", "creator": "pr@webapp.de", "creation_time": "2004-02-23T17:06:04Z", "is_private": false, "text": "Created attachment 10498\njk2.properties for JNI Mode ( JK2 2.0.4 dev)"}, {"count": 3, "tags": [], "text": "I tested it and it works (but I maintain that JNI mode is mostly useless).\n- You need JMX in the classpath as well, and it should work. You'll also get\nerrors about JMX registration errors, but these can be ignored. Don't add\neveryting to the classpath.\n- startd and stopd should be used for the parameters.\n- Don't start with a more complex catalina.base install. Start with a simple\ncatalina.home only, without catalina.base.", "is_private": false, "id": 53774, "creator": "remm@apache.org", "time": "2004-03-09T23:54:26Z", "bug_id": 27167, "creation_time": "2004-03-09T23:54:26Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 27167, "attachment_id": null, "id": 53802, "time": "2004-03-10T13:35:42Z", "creator": "pr@webapp.de", "creation_time": "2004-03-10T13:35:42Z", "is_private": false, "text": "Great!\n\nSuccess with the new parameter startd and stopd.\n\nThe jmx lib is now on my reduce classpath.\nMy working configuration has following jars\nbootstrap.jar\ntools.jar\njmx.jar\ntomcat-jni.jar\n\nMy JSP Compilation error is a too long classpath error at windows. After I\nreduce the path the JSP's are working. The catalina.base mode with my own\ncatalina.config is working perfect.\n\t\nOk, the direct Apache JNI Mode is no really usefull for big site but \nfor single small maschine an option. By very small installation\nyou have only to handle the apache service to start and stop. \nI will start a performance test at the weekend and than I tell you more.\n\nGreat, now I can start to document this jni JK2 option for\nmy german tomcat book project. I also document it on my \ngerman http://tomcat.objektpark.org site and\nwrote a story at my TomC@ series at JavaMagazin..\n\nThanx a lot\nPeter\n\n\nPS: add my working workers2.properties\n\nOther thing is....\n\nCan't Compile jk_isapi at\nApache 2.0.48\ncvs head 10.03.04\nMicrosoft VC98\nWindows XP Prof SP 1\n\n\nCompiling D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\server\\\nisapi\\jk_isapi_plugin.c\n       [so] Compile failed 2 D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\n\\jk\\native2\\server\\isapi\\jk_isapi_plugin.c\n       [so] Output:\n       [so] jk_isapi_plugin.c\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(163) : error C2065: 'SF_NOTIFY_AUTH_COMPLETE' : nichtd\neklarierter Bezeichner\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(163) : warning C4018: '==' : Konflikt zwischen signed\nund unsigned\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(233) : warning C4018: '==' : Konflikt zwischen signed\nund unsigned\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(234) : error C2065: 'PHTTP_FILTER_AUTH_COMPLETE_INFO'\n: nichtdeklarierter Bezeichner\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(234) : error C2146: Syntaxfehler : Fehlendes ')' vor B\nezeichner 'pvNotification'\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(234) : warning C4047: '=' : Anzahl der Dereferenzierun\ngen bei 'int (__stdcall *)(struct _HTTP_FILTER_CONTEXT *,char *,void *,unsigned\nlong *)' und 'int ' unterschiedlich\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(234) : error C2059: Syntaxfehler : ')'\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(235) : error C2146: Syntaxfehler : Fehlendes ')' vor B\nezeichner 'pvNotification'\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(235) : warning C4047: '=' : Anzahl der Dereferenzierun\ngen bei 'int (__stdcall *)(struct _HTTP_FILTER_CONTEXT *,char *,char *)' und 'in\nt ' unterschiedlich\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(235) : error C2059: Syntaxfehler : ')'\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(236) : error C2146: Syntaxfehler : Fehlendes ')' vor B\nezeichner 'pvNotification'\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(236) : warning C4047: '=' : Anzahl der Dereferenzierun\ngen bei 'int (__stdcall *)(struct _HTTP_FILTER_CONTEXT *,char *,char *)' und 'in\nt ' unterschiedlich\n       [so] D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\\serve\nr\\isapi\\jk_isapi_plugin.c(236) : error C2059: Syntaxfehler : ')'\n       [so] StdErr:\n\n\nBUILD FAILED\nfile:D:/tomcat/develop/tomcat5/jakarta-tomcat-connectors/jk/native2/build.xml:61\n1: Compile failed D:\\tomcat\\develop\\tomcat5\\jakarta-tomcat-connectors\\jk\\native2\n\\server\\isapi\\jk_isapi_plugin.c\n\nTotal time: 1 minute 58 seconds\nD:\\tomcat\\develop\\tomcat5>"}, {"count": 5, "tags": [], "text": "Created attachment 10743\nworking worker.properties (CVS HEAD 10.3.04)", "attachment_id": 10743, "id": 53803, "creation_time": "2004-03-10T13:37:22Z", "time": "2004-03-10T13:37:22Z", "creator": "pr@webapp.de", "bug_id": 27167, "is_private": false}, {"count": 6, "tags": [], "text": "*** Bug 17762 has been marked as a duplicate of this bug. ***", "attachment_id": null, "id": 53886, "creator": "remm@apache.org", "time": "2004-03-11T17:46:38Z", "bug_id": 27167, "creation_time": "2004-03-11T17:46:38Z", "is_private": false}, {"count": 7, "attachment_id": null, "bug_id": 27167, "is_private": false, "id": 69675, "time": "2005-01-14T14:12:48Z", "creator": "meinc@web.de", "creation_time": "2005-01-14T14:12:48Z", "tags": [], "text": "These days I tried to setup Apache 2.0.52 and Tomcat 5.5.4 to interwork\neither start up separately or Tomcat as Apache \"inprocess\".\nAfter many many trials I managed to get the non \"inprocess\" configuration to work. However, I didn't manage to get the inprocess configuration up and running.\n\nWhen I look at the Tomcat/Catalina example config files, i.e. workers2.properties\nand jk2.manifest, I'd recognized that they are hopefully outdated, i.e. the listed jars do not match with the provided set of jars and JMX has become part of JAVA 5 that tomcat 5.5 is supposed to use. Even the\nuris to the default examples, are not correct.\n\nOne more note. Since it is not clear which config files are used by an installation and which one are not I recommend to rename these files by adding an example suffix. This would save a lot of confusion, too.\n\nBy the way the non inprocess configuration could be as easy as just adding\nthe following lines to apaches httpd.conf file:\n\n<IfModule !mod_jk2.c>\n  LoadModule jk2_module modules/mod_jk2.so\n</IfModule>\n<IfModule mod_jk2.c>\n  JkSet channel.socket:localhost:8009.info \"Ajp13 forwarding over socket\"\n  JkSet channel.socket:localhost:8009.tomcatId localhost:8009\n\n  JkSet status:.info \"Status worker, displays runtime information\"\n\n  <Location /jkstatus>\n    JkUriSet group status:\n  </Location>\n\n  <Location /jsp-examples>\n    JkUriSet group lb:lb\n  </Location>\n  <Location /servlets-examples>\n    JkUriSet group lb:lb\n  </Location>\n</IfModule>"}, {"attachment_id": null, "tags": [], "bug_id": 27167, "is_private": false, "count": 8, "id": 69676, "time": "2005-01-14T14:15:02Z", "creator": "meinc@web.de", "creation_time": "2005-01-14T14:15:02Z", "text": "These days I tried to setup Apache 2.0.52 and Tomcat 5.5.4 to interwork\neither start up separately or Tomcat as Apache \"inprocess\".\nAfter many many trials I managed to get the non \"inprocess\" configuration to work. However, I didn't manage to get the inprocess configuration up and running.\n\nWhen I look at the Tomcat/Catalina example config files, i.e. workers2.properties\nand jk2.manifest, I'd recognized that they are hopefully outdated, i.e. the listed jars do not match with the provided set of jars and JMX has become part of JAVA 5 that tomcat 5.5 is supposed to use. Even the\nuris to the default examples, are not correct.\n\nOne more note. Since it is not clear which config files are used by an installation and which one are not I recommend to rename these files by adding an example suffix. This would save a lot of confusion, too.\n\nBy the way the non inprocess configuration could be as easy as just adding\nthe following lines to apaches httpd.conf file:\n\n<IfModule !mod_jk2.c>\n  LoadModule jk2_module modules/mod_jk2.so\n</IfModule>\n<IfModule mod_jk2.c>\n  JkSet channel.socket:localhost:8009.info \"Ajp13 forwarding over socket\"\n  JkSet channel.socket:localhost:8009.tomcatId localhost:8009\n\n  JkSet status:.info \"Status worker, displays runtime information\"\n\n  <Location /jkstatus>\n    JkUriSet group status:\n  </Location>\n\n  <Location /jsp-examples>\n    JkUriSet group lb:lb\n  </Location>\n  <Location /servlets-examples>\n    JkUriSet group lb:lb\n  </Location>\n</IfModule>"}, {"count": 9, "text": "As of November 15, 2004, JK2 is no longer supported. All bugs related to JK2 \nwill be marked as WONTFIX. In its place, some of its features have been \nbackported to jk1. Most of those features are included in 1.2.9, which is \nreleased on December 24th, 2004.\n\nAnother alternative is the ajp addition to mod_proxy which will be part of \napache 2.\n\nFor more information on the Tomat connectors docs at\nhttp://jakarta.apache.org/tomcat/connectors-doc/\n", "creator": "mturk@apache.org", "is_private": false, "id": 69677, "time": "2005-01-14T14:26:46Z", "bug_id": 27167, "creation_time": "2005-01-14T14:26:46Z", "tags": [], "attachment_id": null}]