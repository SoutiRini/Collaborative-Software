[{"count": 0, "tags": [], "creator": "cowwoc@bbs.darktech.org", "is_private": false, "text": "This issue is related to BugZilla issues #26372 and #27371. The former older\nissue indicates there is a bug in log4j. The latter newer issue points out there\nis actually a Tomcat issue and absolutely cannot be fixed within the scope of log4j.\n\n#27371 talks about a configurable wait-time setting in Tomcat but it looks like\nno one has filed a BugZilla issue for it so this is it. As part of this issue,\nI'm requesting that Tomcat allow us to configure the wait-time before it\ninvalidates the ClassLoader in order to fix issues #26372 and #27371. It is\nimportant to note that there are no known workarounds for these issues at this\ntime (at least, not as far as I can tell).\n\nI have filed this as a high priority issue because of the lack of a workaround.\nAs well, Netbeans development environment uses manager/redeploy every time the\nwebapp is modified (a few times a minute while I'm debugging) so using\nreloadable=true is not an option. This is discussed in detail at\nhttp://www.netbeans.org/issues/show_bug.cgi?id=62529", "id": 81611, "time": "2005-10-24T15:04:16Z", "bug_id": 37218, "creation_time": "2005-10-24T15:04:16Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "This will not be addressed, as this does not make any sense.", "attachment_id": null, "bug_id": 37218, "id": 81615, "time": "2005-10-24T15:16:47Z", "creator": "remm@apache.org", "creation_time": "2005-10-24T15:16:47Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 37218, "text": "Remy, please read comment #28 by Brett in\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=26372\n\nand a newer comment #31 by Brett in\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=27371\n\nPlease note that http://issues.apache.org/bugzilla/show_bug.cgi?id=27371 is a\nnewer issue than http://issues.apache.org/bugzilla/show_bug.cgi?id=26372 which\nyou are likely familiar with. Brett clearly states:\n\n\"I ran into this issue, and having written a trivial test case, I can confirm \nthat this zilla has nothing to do with logging (commons or log4j) or parent \nclassloaders etc.  No amount of fiddling with library classloading will fix it.\"\n\nSo the Tomcat guys won't fix this, nor the Log4j guys. What are we left doing?\nWhat is your advice/suggestion for resolving this issue?", "id": 81619, "attachment_id": null, "creator": "cowwoc@bbs.darktech.org", "creation_time": "2005-10-24T15:30:53Z", "time": "2005-10-24T15:30:53Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 37218, "attachment_id": null, "text": "(In reply to comment #2)\n> Remy, please read comment #28 by Brett in\n> http://issues.apache.org/bugzilla/show_bug.cgi?id=26372\n> \n> and a newer comment #31 by Brett in\n> http://issues.apache.org/bugzilla/show_bug.cgi?id=27371\n> \n> Please note that http://issues.apache.org/bugzilla/show_bug.cgi?id=27371 is a\n> newer issue than http://issues.apache.org/bugzilla/show_bug.cgi?id=26372 which\n> you are likely familiar with. Brett clearly states:\n> \n> \"I ran into this issue, and having written a trivial test case, I can confirm \n> that this zilla has nothing to do with logging (commons or log4j) or parent \n> classloaders etc.  No amount of fiddling with library classloading will fix it.\"\n> \n> So the Tomcat guys won't fix this, nor the Log4j guys. What are we left doing?\n> What is your advice/suggestion for resolving this issue?\n\nCompletely unrelated. In this guy's case, the error will be on request\nprocessing thread (with the only result being that his request will end sooner,\nwhich is as expected in this situation).", "id": 81626, "time": "2005-10-24T15:48:31Z", "creator": "remm@apache.org", "creation_time": "2005-10-24T15:48:31Z", "is_private": false}, {"count": 4, "tags": [], "creator": "cowwoc@bbs.darktech.org", "attachment_id": null, "text": "Remy,\n\nI don't understand what you mean in your last post. How is the error on the\nrequest thread related to the ThreadDeath issue I am seeing?\n\nWhat I am seeing on my end is that as soon as I get a ThreadDeath from\nmanager/redeploy then I am forced to restart the entire container (not only the\nwebapp). If I try to stop, then start the webapp without a full container\nrestart, I get another fatal error.\n\nSurely you don't expect us to restart the entire container every time we make an\napplication modification? On my end this can take up to 60 seconds, making\ndevelopment unbearable.", "id": 81634, "time": "2005-10-24T16:51:45Z", "bug_id": 37218, "creation_time": "2005-10-24T16:51:45Z", "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 37218, "text": "(In reply to comment #4)\n> Remy,\n> \n> I don't understand what you mean in your last post. How is the error on the\n> request thread related to the ThreadDeath issue I am seeing?\n\nYou were the one quoting another user about an irrelevant issue, so I was simply\npointing his problem was not the same as your problem.\n\n> What I am seeing on my end is that as soon as I get a ThreadDeath from\n> manager/redeploy then I am forced to restart the entire container (not only the\n> webapp). If I try to stop, then start the webapp without a full container\n> restart, I get another fatal error.\n> \n> Surely you don't expect us to restart the entire container every time we make an\n> application modification? On my end this can take up to 60 seconds, making\n> development unbearable.\n\nYes, if you mess with the classloading and it ends up in an unpredictable state,\nI expect you to restart the container. If you don't like it, then try to find\nanother, hopefully more robust, container, as I don't know how to make Tomcat\nmore robust for classloading handling.\n\nAs this is going nowhere (as with most of the bug reports you are involved with,\nI have to note), this will be my last reply.\n", "id": 81637, "time": "2005-10-24T17:07:59Z", "creator": "remm@apache.org", "creation_time": "2005-10-24T17:07:59Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "creator": "darryl@darrylmiles.org", "is_private": false, "text": "This issue two is a huge problem for me, I'm still doing background reading to\nunderstand better.\n\nBut, I've just noticed a recent bug filing:\n\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=37264\n\nThat explains that the ServletContextListener is called AFTER the class loader\nhas been unbound from the context.  Now looking at my own ThreadDeath stack\ntraces I can clearly see they are called from\norg.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:3714)\nwhich is what bug 37264 relates to.\n\n\nI have also recently posted to the tomcat-dev list with:\nhttp://mail-archives.apache.org/mod_mbox/tomcat-dev/200510.mbox/ajax/%3c435EE070.8010006@netbauds.net%3e\n by coincidence trying to further my understanding of the issues involved. \nExcuse the raw XML link but the cool tomcat-dev list ajax archive isn't very\ngood to trackback to.", "id": 81805, "time": "2005-10-27T08:49:40Z", "bug_id": 37218, "creation_time": "2005-10-27T08:49:40Z", "attachment_id": null}]