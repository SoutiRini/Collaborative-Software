[{"count": 0, "tags": [], "bug_id": 11201, "attachment_id": null, "id": 20243, "time": "2002-07-26T10:24:38Z", "creator": "holger.manthey@bertelsmann.de", "creation_time": "2002-07-26T10:24:38Z", "is_private": false, "text": "Configure apache with somethong like\n./configure --enable-module=proxy --enable-module=rewrite ...\nresults in:\n\nhttpd -l\n...\nmod_rewrite.c\nmod_proxy.c\n...\n\nThis is because the default src/Configuration.tmpl contains first mod_rewrite\nthen mod_proxy. When using the proxy features with apache you can't deny the\nusage with RewriteRules and everyone is able to use this proxy.\n\nThe Solution is build the server dynamic or change the moduleorder in\nsrc/Configuration.tmpl"}, {"count": 1, "tags": [], "bug_id": 11201, "attachment_id": null, "id": 31716, "time": "2003-02-20T23:54:26Z", "creator": "nd@perlig.de", "creation_time": "2003-02-20T23:54:26Z", "is_private": false, "text": "errr. Could you explain exactly what you mean?\n\nI can't see a vulnerability and not really how changing the link order would\nchange any behaviour here.\n\nRewriteRules in .htaccess files can be turned off with Options -FollowSymlinks.\n\nThanks."}, {"count": 2, "tags": [], "bug_id": 11201, "text": "The problem is the order of mod_rewrite and mod_proxy in the file\nsrc/Configuration.tmpl of the apache source distribution. When configure with\n./configure --enable-module=proxy --enable-module=rewrite\nboth modules are included in the httpd binary:\nhttpd -l\n...\nmod_rewrite.c\nmod_proxy.c\n...\nin the wrong order. If you enable the proxy module all proxy request are\nexecuted by mod_proxy you're not able to deny requests by mod_rewrite because of\nthe module order.", "id": 31754, "time": "2003-02-21T12:33:06Z", "creator": "holger.manthey@bertelsmann.de", "creation_time": "2003-02-21T12:33:06Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 11201, "text": "Aaah. Misunderstood your report completely ;-)\nMy thoughts were about the RewriteRule [P] flag.\n\nHowever, you can use ClearModuleList/AddModule also with static linked modules\nfor reordering. In the meantime, I'll have a look at the side effects of the\nchange in general.", "id": 31755, "time": "2003-02-21T12:48:29Z", "creator": "nd@perlig.de", "creation_time": "2003-02-21T12:48:29Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 11201, "attachment_id": null, "id": 31799, "time": "2003-02-22T21:15:05Z", "creator": "nd@perlig.de", "creation_time": "2003-02-22T21:15:05Z", "is_private": false, "text": "Hmm. It _would_ have side effects. I've just fixed a bug in 2.x related to\nexactly the side effect I mean here.\nIf you would reverse the order of mod_rewrite and mod_proxy, it would break the\npossibility of RewriteRule [P] in directory context (because of conflicting\nhooks of mod_rewrite and mod_proxy - see Bug 16368 for details). The 2.x API is\nflexible enough to catch that case. 1.3 isn't. Here is only one or the other\npossible.\n\nI haven't tested it for now, but RewriteRules within <Directory proxy:...> don't\nhave any effect, too?"}]