[{"count": 0, "tags": [], "creator": "apache@schiegl.com", "is_private": false, "id": 86735, "attachment_id": null, "bug_id": 38938, "creation_time": "2006-03-12T13:34:26Z", "time": "2006-03-12T13:34:26Z", "text": "On the previous 2.0.55 (Solaris 10x86) installation the following configuration\nworked:\n\nhttpd.conf (virtual host context):\n...\nRewriteRule ^/service/fileman/(.*)\nhttp://backend/~%{LA-U:REMOTE_USER}/service/fileman/$1 [P]\n...\n\nwith 2.2.0 it seems even in the look ahead phase, REMOTE_USER is empty (at least\non my system)\n\noutput of rewrite.log:\nIP - - [12/Mar/2006:14:02:35 +0100] [servername/sid#81bf7d8][rid#832ce50/subreq]\n(3) applying pattern '^/service/fileman/(.*)' to uri '/service/fileman/fileman.cgi'\nIP - - [12/Mar/2006:14:02:35 +0100] [servername/sid#81bf7d8][rid#832ce50/subreq]\n(2) rewrite '/service/fileman/fileman.cgi' ->\n'http://backend/~/service/fileman/fileman.cgi'\nIP - - [12/Mar/2006:14:02:35 +0100] [servername/sid#81bf7d8][rid#832ce50/subreq]\n(2) forcing proxy-throughput with http://backend/~/service/fileman/fileman.cgi\nIP - - [12/Mar/2006:14:02:35 +0100] [servername/sid#81bf7d8][rid#832ce50/subreq]\n(1) go-ahead with proxy request\nproxy:http://backend/~/service/fileman/fileman.cgi [OK]\nIP - - [12/Mar/2006:14:02:35 +0100]\n[servername/sid#81bf7d8][rid#82e89d8/initial] (5) lookahead:\npath=/service/fileman/fileman.cgi var=REMOTE_USER -> val=\nIP - - [12/Mar/2006:14:02:35 +0100]\n[servername/sid#81bf7d8][rid#82e89d8/initial] (2) rewrite\n'/service/fileman/fileman.cgi' -> 'http://backend/~/service/fileman/fileman.cgi'\nIP - - [12/Mar/2006:14:02:35 +0100]\n[servername/sid#81bf7d8][rid#82e89d8/initial] (2) forcing proxy-throughput with\nhttp://backend/~/service/fileman/fileman.cgi\nIP - - [12/Mar/2006:14:02:35 +0100]\n[servername/sid#81bf7d8][rid#82e89d8/initial] (1) go-ahead with proxy request\nproxy:http://backend/~/service/fileman/fileman.cgi [OK]\n\nA quick check with a php script shows REMOTE_USER is set correctly.\nThe authentication is performend against an LDAP Server (as with 2.0.55)\n\nam i missing something? if more information is needed i'll will gladly provide it.\n\nthanks!\nMarkus Schiegl"}, {"attachment_id": null, "tags": [], "creator": "apache@schiegl.com", "text": "After some more trial and error i found out how to work around this problem.\nJust use an additional RewriteCond to fetch the username:\n\nRewriteCond %{LA-U:REMOTE_USER} (.+)\nRewriteRule ^/service/fileman/(.*) http://backend/~%1/service/fileman/$1 [P]\n\nThis bug may be closed. At least this is a difference between 2.0 and 2.2.", "count": 1, "id": 86975, "time": "2006-03-17T17:36:15Z", "bug_id": 38938, "creation_time": "2006-03-17T17:36:15Z", "is_private": false}]