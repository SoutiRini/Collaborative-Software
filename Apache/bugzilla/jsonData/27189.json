[{"count": 0, "tags": [], "text": "Specifying a ScoreBoardFile causes apache to exit with the following in the\nerror_log:\n\n[Tue Feb 24 09:09:01 2004] [crit] (17)File exists: unable to create scoreboard\n\"/usr/local/apache2/logs/apache_runtime_status\" (name-based shared memory failure)\n\nThe relevant section from my httpd.conf:\n  <IfModule !perchild.c>\n    ScoreBoardFile logs/apache_runtime_status\n  </IfModule>\n\n\nLooking at server/scoreboard.c, there's a comment:\n    /* The shared memory file must not exist before we create the\n     * segment. */\n\nThe scoreboard file has definitely been created at this point though -- I tried\ndeleting it just before starting the server, and the crash still occurs, with a\nnew scoreboard in logs/apache_runtime_status.\n\nIf I comment out the 'ScoreBoardFile' directive, the server starts fine, and no\nscoreboard file is created (as expected).\n\n\nInfo from my build:\n\n# cd /usr/local/apache2\n# ./bin/httpd -V\nServer version: Apache/2.0.48\nServer built:   Feb 19 2004 11:07:53\nServer's Module Magic Number: 20020903:4\nArchitecture:   32-bit\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D HTTPD_ROOT=\"/usr/local/apache2\"\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n# ./bin/httpd -l\nCompiled in modules:\n  core.c\n  mod_access.c\n  mod_auth.c\n  mod_auth_digest.c\n  mod_include.c\n  mod_log_config.c\n  mod_env.c\n  mod_setenvif.c\n  mod_ssl.c\n  prefork.c\n  http_core.c\n  mod_mime.c\n  mod_dav.c\n  mod_status.c\n  mod_autoindex.c\n  mod_asis.c\n  mod_cgi.c\n  mod_dav_fs.c\n  mod_dir.c\n  mod_actions.c\n  mod_userdir.c\n  mod_alias.c\n  mod_rewrite.c\n  mod_so.c", "attachment_id": null, "bug_id": 27189, "id": 52859, "time": "2004-02-24T15:04:15Z", "creator": "sgr@logsoft.com", "creation_time": "2004-02-24T15:04:15Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "text": "Thanks for the report.  The simple solution is \"don't use ScoreBoardFile, it is\ncompletely unnecessary\". \n\nA fix for this is in HEAD, nonetheless.", "id": 64044, "time": "2004-09-22T13:38:54Z", "bug_id": 27189, "creation_time": "2004-09-22T13:38:54Z", "is_private": false, "attachment_id": null}]