[{"count": 0, "tags": [], "bug_id": 2646, "text": "It seems there is a problem with characters that are not iso-8859-1. I created \na servlet that tries to display some Japanese characters, but mostly they \nappear as \"????\" on output. I say \"mostly\", as the servlet has worked once or \ntwice.\n\nIn my experience, the \"????\" is generally produced by Java when you try to \ndisplay a character that the current character encoding does not support. e.g. \nIf you tried to display a Japanese character in iso-8859-1.\n\nOddly, response.getCharacterEncoding() returns the correct encoding. (\"euc-jp\" \nin my case for Japanese, and \"iso-8859-1\" for English)\n\nThe test servlet (always) works fine under Apache Jserv 1.0. I am using IE 5.5, \nand I have the Japanese language support installed.\n\nThe source code for the test servlet is below. After installing this servlet, \ncalling the servlet with no parameters displays \"English\". Calling it with \"?\nlang=ja\" displays \"Japanese\", and a couple of phrases in Japanese. Note that \nyou need Japanese language support and Japanese fonts in your web browser to \nsee this.\n\nimport javax.servlet.*;\nimport javax.servlet.http.*;\n\nimport java.io.*;\n\npublic class test extends HttpServlet\n{\n  protected void doGet(HttpServletRequest req, HttpServletResponse resp)\n  {\n    try\n    {\n      if ((req.getParameter(\"lang\") != null) && req.getParameter(\"lang\").equals\n(\"ja\"))\n      {\n        resp.setContentType(\"text/html; charset=euc-jp\");\n        PrintWriter out = resp.getWriter();\n        out.println(\"<html><head><title>Japanese</title></head>\");\n        out.println(\"<body>\");\n        out.println(\"<p>Japanese</p>\");\n        // out.println(\"<p>Encoding is \" + resp.getCharacterEncoding());\n\n        out.println(\"<p>Location = \\u6240\\u5728\\u5730\\uff1a</p>\");\n        out.println(\"<p>Latest research updates = \\u76f4\\u8fd1\\u306e\\u30ea\\u30b5\n\\u30fc\\u30c1\\u53ca\\u3073\\u66f4\\u65b0</p>\");\n        out.println(\"</body>\");\n        out.println(\"</html>\");\n      }\n      else\n      {\n        resp.setContentType(\"text/html; charset=iso-8859-1\");\n        PrintWriter out = resp.getWriter();\n        out.println(\"<html><head><title>English</title></head>\");\n        out.println(\"<body>\");\n        out.println(\"<p>English</p>\");\n        // out.println(\"<p>Encoding is \" + resp.getCharacterEncoding());\n        out.println(\"</body>\");\n        out.println(\"</html>\");\n      }\n    }\n    catch (Exception e)\n    {\n      e.printStackTrace();\n    }\n  }\n}", "id": 3748, "time": "2001-07-16T17:40:52Z", "creator": "ben_kelley@ubsw.com", "creation_time": "2001-07-16T17:40:52Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "Thanks for the test case, it makes everything so easy. \nI commited the fix, should be available in the next build ( soon )", "is_private": false, "id": 3749, "creator": "cmanolache@yahoo.com", "time": "2001-07-16T20:12:34Z", "bug_id": 2646, "creation_time": "2001-07-16T20:12:34Z", "attachment_id": null}]