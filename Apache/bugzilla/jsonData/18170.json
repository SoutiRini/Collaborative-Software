[{"count": 0, "attachment_id": null, "creator": "PeterMayne@ap.spherion.com", "text": "This error is in httpd-2.0.44/server/protocol.c, in ap_get_mime_headers_core().\nIt appears to be non-platform and non-OS specific.\n\nWhen sending a request of the form\n\nGET /examples/servlet/RequestHeaderExample HTTP/1.0\nContent-Type: multipart/related; type=\"text/xml\";\n        boundary=\"----=_Part_9_24374438.1048047839137\"\nSOAPAction: ebXML\nHost: chmeee\n...\n\nwhere the header is wrapped, and is a multiple of eight bytes long when\nunwrapped (as in the Content-Type header here, which has a trailing space on the\nfirst line and a leading TAB on the second line), the code appends the second\nline to the first line. However, the memory allocation does not allow for the\ntrailing '\\0' in the new string, so one less byte is allocated than should be.\n\nWhen the next header is read, and memory is allocated for it, it therefore\noverwrites the '\\0' at the end of the Content-Type value, making it become\n\nmultipart/related; type=\"text/xml\"; \n    boundary=\"----=_Part_9_24374438.1048047839137\"SOAPAction\n\nBecause apr_palloc allocates memory in sizes of multiples of 8 (see\nAPR_ALIGN_DEFAULT), this bug does not show up if the wrapped value is not a\nmultiple of 8, since the padding provides space for the trailing '\\0'.\n\nThis bug cannot be worked around, since the headers in this case are generated\nby Sun's SAAJ classes and cannot be modified to avoid triggering this bug, hence\nthe \"blocker\" severity.\n\nTested patch:\n$ diff original-protocol.c httpd-2.0.44/server/protocol.c\n807,808c807,808\n<                     if (last_len + len > alloc_len) {\n<                         alloc_len = last_len + len;\n---\n>                     if (last_len + len + 1 > alloc_len) {\n>                         alloc_len = last_len + len + 1;", "id": 33499, "time": "2003-03-19T22:50:48Z", "bug_id": 18170, "creation_time": "2003-03-19T22:50:48Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 18170, "attachment_id": null, "text": "NB this fix results in a new libhttpd.dll on Windows XP.", "id": 33502, "time": "2003-03-19T23:48:03Z", "creator": "PeterMayne@ap.spherion.com", "creation_time": "2003-03-19T23:48:03Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 18170, "attachment_id": null, "id": 33701, "time": "2003-03-24T16:56:07Z", "creator": "gregames@apache.org", "creation_time": "2003-03-24T16:56:07Z", "is_private": false, "text": "Peter,\n\nI committed this as rev 1.128 to CVS HEAD for httpd-2.0.  Thanks much for the\nanalysis of this problem, your patch, and for taking the time to submit a bug\nreport.  I encourage you to do it again if you should find any more bugs.\n\nI tweaked your patch a little to cover another less common case where there is\nmore than one continuation line.  You might also want to take a look at\nhttp://httpd.apache.org/dev/patches.html .  It's no big deal for a tiny patch,\nbut we really prefer unified diffs for bigger patches.\n\nGreg"}]