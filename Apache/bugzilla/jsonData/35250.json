[{"count": 0, "tags": [], "text": "Adding logging when ap_proxy_connect_handler fails to connect (two XXX's and \ntwo extra ones)\n\nIndex: modules/proxy/proxy_connect.c\n===================================================================\n--- modules/proxy/proxy_connect.c       (revision 185054)\n+++ modules/proxy/proxy_connect.c       (working copy)\n@@ -154,12 +154,12 @@\n            case APR_URI_SNEWS_DEFAULT_PORT:\n                break;\n            default:\n-                /* XXX can we call ap_proxyerror() here to get a nice log \nmessage? */\n-               return HTTP_FORBIDDEN;\n+          return ap_proxyerror(r, HTTP_FORBIDDEN,\n+                            \"Connect to remote machine blocked\");\n        }\n     } else if(!allowed_port(conf, uri.port)) {\n-        /* XXX can we call ap_proxyerror() here to get a nice log message? */\n-       return HTTP_FORBIDDEN;\n+       return ap_proxyerror(r, HTTP_FORBIDDEN,\n+                            \"Connect to remote machine blocked\");\n     }\n\n     /*\n@@ -194,10 +194,12 @@\n     /* handle a permanent error from the above loop */\n     if (failed) {\n         if (proxyname) {\n-            return DECLINED;\n+                       return ap_proxyerror(r, DECLINED,\n+                            \"Connect to remote machine declined\");\n         }\n         else {\n-            return HTTP_BAD_GATEWAY;\n+                       return ap_proxyerror(r, HTTP_BAD_GATEWAY,\n+                            \"Connect to remote machine failed - \nHTTP_BAD_GATEWAY\");\n         }\n     }", "is_private": false, "id": 76112, "creator": "eddiearmeen@yahoo.co.uk", "time": "2005-06-07T00:40:22Z", "bug_id": 35250, "creation_time": "2005-06-07T00:40:22Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "This has been partially addressed (the 2 XXX) in 2.4.x in r813178", "is_private": false, "id": 170472, "creator": "christophe.jaillet@wanadoo.fr", "time": "2013-10-07T18:34:00Z", "bug_id": 35250, "creation_time": "2013-10-07T18:34:00Z", "attachment_id": null}]