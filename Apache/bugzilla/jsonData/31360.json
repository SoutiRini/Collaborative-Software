[{"count": 0, "tags": [], "creator": "david.gaertner@syngenio.de", "text": "The method \"getCompatibilityWith\" of class\n\"org.apache.tools.ant.taskdefs.optional.extension.Extension\" is not correct\nimplementet. This Method compares the same variables for the specification and\nimplementation version. Here the code parts:\n\nisCompatible(specificationVersion, specificationVersion)\nisCompatible(implementationVersion, implementationVersion)\n\nThis is the cause that the optional tasks like \"jarlib-resolve\" not work correct\nbecause is compares not the version from the jar Manifest file with the given\nextensions but it compares the given extension with himself.\n\nsolution proposal:\n\n    public Compatibility getCompatibilityWith(final Extension required) {\n        // Extension Name must match\n        if (!extensionName.equals(required.getExtensionName())) {\n            return INCOMPATIBLE;\n        }\n\n        // Available specification version must be >= required\n        final DeweyDecimal requiredSpecificationVersion\n            = required.getSpecificationVersion();\n        if (null != requiredSpecificationVersion) {\n            if (null == specificationVersion\n                || !isCompatible(specificationVersion,\nrequiredSpecificationVersion)) {\n                return REQUIRE_SPECIFICATION_UPGRADE;\n            }\n        }\n\n        // Implementation Vendor ID must match\n        final String requiredImplementationVendorID\n            = required.getImplementationVendorID();\n        if (null != requiredImplementationVendorID) {\n            if (null == implementationVendorID\n                || !implementationVendorID.equals(requiredImplementationVendorID)) {\n                return REQUIRE_VENDOR_SWITCH;\n            }\n        }\n\n        // Implementation version must be >= required\n        final DeweyDecimal requiredImplementationVersion\n            = required.getImplementationVersion();\n        if (null != requiredImplementationVersion) {\n            if (null == implementationVersion\n                || !isCompatible(implementationVersion,\nrequiredImplementationVersion)) {\n                return REQUIRE_IMPLEMENTATION_UPGRADE;\n            }\n        }\n\n        // This available optional package satisfies the requirements\n        return COMPATIBLE;\n    }", "id": 64039, "time": "2004-09-22T12:44:59Z", "bug_id": 31360, "creation_time": "2004-09-22T12:44:59Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 31360, "attachment_id": null, "id": 64045, "time": "2004-09-22T14:04:08Z", "creator": "mbenson@apache.org", "creation_time": "2004-09-22T14:04:08Z", "is_private": false, "text": "Can you attach that as a unified diff as outlined at \nhttp://ant.apache.org/problems.html under \"Fixing the Bug\"?\n\nThanks,\nMatt"}, {"count": 2, "tags": [], "creator": "david.gaertner@syngenio.de", "text": "Created attachment 12836\n[PATCH]", "id": 64053, "time": "2004-09-22T15:10:09Z", "bug_id": 31360, "creation_time": "2004-09-22T15:10:09Z", "is_private": false, "attachment_id": 12836}, {"attachment_id": null, "tags": [], "bug_id": 31360, "text": "applied, thanks.", "count": 3, "id": 66528, "time": "2004-11-05T15:03:40Z", "creator": "bodewig@apache.org", "creation_time": "2004-11-05T15:03:40Z", "is_private": false}, {"count": 4, "tags": [], "creator": "mbenson@apache.org", "text": "*** Bug 32692 has been marked as a duplicate of this bug. ***", "id": 68487, "time": "2004-12-14T17:11:44Z", "bug_id": 31360, "creation_time": "2004-12-14T17:11:44Z", "is_private": false, "attachment_id": null}]