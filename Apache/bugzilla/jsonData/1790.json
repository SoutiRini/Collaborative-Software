[{"count": 0, "tags": [], "text": "AbstractCharacterData.deleteData and .replaceData have code like this:\n\n\tsetNodeValue(v.substring(0, offset) +\n\t\t     arg +\n\t\t     v.substring(Math.min(v.length() -1, offset + count),\n                                 v.length()));\n\n\nThe problem is with the Math.min expression, \nv.substring(v.length()-1,v.length()) will return the last character\nin the string.  So regardless of the arguments, you can never delete\nthe last character, removing the -1 will correct the behavior.\n\ncvs diff AbstractCharacterData.java (in directory D:\\apache-xml\\xml-\nbatik\\sources\\org\\apache\\batik\\dom\\)\nIndex: AbstractCharacterData.java\n===================================================================\nRCS file: /home/cvspublic/xml-\nbatik/sources/org/apache/batik/dom/AbstractCharacterData.java,v\nretrieving revision 1.1.1.1\ndiff -r1.1.1.1 AbstractCharacterData.java\n119c119\n< \tif (offset < 0 || offset >= getLength()) {\n---\n> \tif (offset < 0 || offset > getLength()) {\n125c125\n< \tsetNodeValue(v.substring(0, offset) + \n---\n> \tsetNodeValue(v.substring(0, offset) +\n144c144\n< \t\t     v.substring(Math.min(v.length() - 1, offset + count),\n---\n> \t\t     v.substring(Math.min(v.length(), offset + count),\n165c165\n< \t\t     v.substring(Math.min(v.length() - 1, offset + count),\n---\n> \t\t     v.substring(Math.min(v.length(), offset + count),\n\n*****CVS exited normally with code 1*****", "attachment_id": null, "bug_id": 1790, "id": 2492, "time": "2001-05-16T22:02:40Z", "creator": "carnold@houston.rr.com", "creation_time": "2001-05-16T22:02:40Z", "is_private": false}]