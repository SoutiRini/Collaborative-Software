[{"count": 0, "tags": [], "bug_id": 36104, "text": "I want to create two distributions. The only difference between these two is the\ntwo different jar files. Here are my tasks:\n\n   <!-- Build the first tar file -->\n   <tar tarfile=\"${tarfile}\">\n       <tarfileset dir=\"${distrib}\" prefix=\"rex\">\n           <exclude name=\"${distrib}/*.cgi\"/>\n           <exclude name=\"${distrib}/*.pl\"/>\n           <exclude name=\"${dist-jar2}\"/>\n       </tarfileset>\n       <tarfileset dir=\"${distrib}\" mode=\"755\" prefix=\"rex\">\n           <include name=\"${distrib}/*.cgi\"/>\n           <include name=\"${distrib}/*.pl\"/>\n       </tarfileset>\n   </tar>\n   <gzip zipfile=\"${tarfile}.gz\" src=\"${tarfile}\"/>\n   <delete file=\"${tarfile}\"/>\n\n   <!-- Build the second tar file -->\n   <tar tarfile=\"${tarfile2}\">\n       <tarfileset dir=\"${distrib}\" prefix=\"rex\">\n           <exclude name=\"${distrib}/*.cgi\"/>\n           <exclude name=\"${distrib}/*.pl\"/>\n           <exclude name=\"${dist-jar}\"/>\n       </tarfileset>\n       <tarfileset dir=\"${distrib}\" mode=\"755\" prefix=\"rex\">\n           <include name=\"${distrib}/*.cgi\"/>\n           <include name=\"${distrib}/*.pl\"/>\n       </tarfileset>\n   </tar>\n   <gzip zipfile=\"${tarfile2}.gz\" src=\"${tarfile2}\"/>\n   <delete file=\"${tarfile2}\"/>\n\nWhere:\n ...\n <property name=\"distrib\" location=\"./distrib\"/>\n <property name=\"dist-jar\" location=\"${distrib}/rex.jar\"/>\n <property name=\"dist-jar2\" location=\"${distrib}/rexml.jar\"/>\n ...\n <property name=\"tarfile\" location=\"${src}/rex.tar\"/>\n <property name=\"tarfile2\" location=\"${src}/rexml.tar\"/>\n\nWhen I run with debug, I get:\n\nTar$TarFileSet: Setup scanner in dir /home/ThomHehl/src/Javacode/rex/distrib\nwith patternSet{ includes: [] excludes:\n[/home/ThomHehl/src/Javacode/rex/distrib/*.cgi,\n/home/ThomHehl/src/Javacode/rex/distrib/*.pl,\n/home/ThomHehl/src/Javacode/rex/distrib/rexml.jar] }\n   ...\n     [tar] rexml.jar added as /home/ThomHehl/src/Javacode/rex/rex.tar doesn't exist.\n\nArgghhh!!!", "id": 78298, "time": "2005-08-09T18:38:43Z", "creator": "thom@nowhereatall.com", "creation_time": "2005-08-09T18:38:43Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "carej@us.ibm.com", "attachment_id": null, "text": "I would say the problem is in how you constructed the filesets. Since you are\nusing ${distrib} as the basedir you should not be using it as part of your patterns.", "id": 78301, "time": "2005-08-09T18:45:51Z", "bug_id": 36104, "creation_time": "2005-08-09T18:45:51Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 36104, "text": "Exactly, the fileset patterns are relative to the directory.\n<exclude name=\"*.cgi\"/>\nto remove the top level cgi files\n<exclude name=\"**/*.cgi\"/>\nto remove all the cgi files", "id": 78304, "time": "2005-08-09T19:01:00Z", "creator": "peterreilly@apache.org", "creation_time": "2005-08-09T19:01:00Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "thom@nowhereatall.com", "attachment_id": null, "text": "This fix worked. I would like to re-open this bug as a documentation bug because\nthere is no documentation on how excludes works and I would still be working\nwith this one if a developer hadn't explained this to me.\n\nUnder fileset, there are examples displaying the \"**/\" type of excludes, but\nabsolutely no documentation explaining what this MEANS.\n\nAlso, if this is the way excludes works, then why does the debug display\n\nTar$TarFileSet: Setup scanner in dir /home/ThomHehl/src/Javacode/rex/distrib\nwith patternSet{ includes: [] excludes:\n[/home/ThomHehl/src/Javacode/rex/distrib/*.cgi,\n/home/ThomHehl/src/Javacode/rex/distrib/*.pl,\n/home/ThomHehl/src/Javacode/rex/distrib/rexml.jar] }\n\nShowing exactly the right file in the debug message, but is not evidently the\nfile it was really going to exclude.\n\nI think both the debug and the docs need further work.", "id": 78553, "time": "2005-08-17T00:54:42Z", "bug_id": 36104, "creation_time": "2005-08-17T00:54:42Z", "is_private": false}, {"count": 4, "tags": [], "creator": "BBurgess@tiaa-cref.org", "attachment_id": null, "text": "(In reply to comment #3)\n> This fix worked. I would like to re-open this bug as a documentation bug because\n> there is no documentation on how excludes works and I would still be working\n> with this one if a developer hadn't explained this to me.\n> \n> Under fileset, there are examples displaying the \"**/\" type of excludes, but\n> absolutely no documentation explaining what this MEANS.\n\nActually, the very first link on the Tar task's page is a link to the directory\nbased task page (http://ant.apache.org/manual/dirtasks.html) which very clearly\ngoes through and explains includes and excludes.\n\n> \n> I think both the debug and the docs need further work.\n\nMore documentation is not needed.  It can be time consuming however to follow\nevery link referenced and read all the documentation properly.", "id": 78579, "time": "2005-08-17T15:38:38Z", "bug_id": 36104, "creation_time": "2005-08-17T15:38:38Z", "is_private": false}, {"count": 5, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "text": " Benjamin Burgess  comment is correct.", "id": 92983, "time": "2006-09-04T13:26:28Z", "bug_id": 36104, "creation_time": "2006-09-04T13:26:28Z", "is_private": false}]