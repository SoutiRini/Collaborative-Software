[{"count": 0, "attachment_id": null, "creator": "lijun.liao@gmail.com", "is_private": false, "id": 98881, "time": "2007-02-01T13:35:38Z", "bug_id": 41519, "creation_time": "2007-02-01T13:35:38Z", "tags": [], "text": "If you issue a second signature but with different algorithm, e.g., RSAWithSHA1\nfor the first signature, and RSAWithRipeMD160 for the second, you will get the\nexception that says:\n org.apache.xml.security.signature.XMLSignatureException: object not initialized\nfor signature or verification\nOriginal Exception was java.security.SignatureException: object not initialized\nfor signature or verification\n\tat\norg.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineUpdate(SignatureBaseRSA.java:203)\n\tat\norg.apache.xml.security.algorithms.SignatureAlgorithm.update(SignatureAlgorithm.java:249)\n\tat\norg.apache.xml.security.utils.SignerOutputStream.write(SignerOutputStream.java:64)\n\tat\norg.apache.xml.security.utils.UnsyncBufferedOutputStream.flushBuffer(UnsyncBufferedOutputStream.java:69)\n\tat\norg.apache.xml.security.utils.UnsyncBufferedOutputStream.flush(UnsyncBufferedOutputStream.java:85)\n\tat\norg.apache.xml.security.utils.UnsyncBufferedOutputStream.close(UnsyncBufferedOutputStream.java:91)\n\tat\norg.apache.xml.security.c14n.implementations.CanonicalizerBase.engineCanonicalizeSubTree(CanonicalizerBase.java:207)\n\tat\norg.apache.xml.security.c14n.implementations.CanonicalizerBase.engineCanonicalizeSubTree(CanonicalizerBase.java:121)\n\tat\norg.apache.xml.security.c14n.Canonicalizer.canonicalizeSubtree(Canonicalizer.java:268)\n\tat\norg.apache.xml.security.signature.SignedInfo.signInOctectStream(SignedInfo.java:286)\n\tat org.apache.xml.security.signature.XMLSignature.sign(XMLSignature.java:501)\n\tat\norg.apache.xml.security.samples.signature.CopyOfCreateSignature.sign(CopyOfCreateSignature.java:172)\n\tat\norg.apache.xml.security.samples.signature.CopyOfCreateSignature.main(CopyOfCreateSignature.java:83)\njava.security.SignatureException: object not initialized for signature or\nverification\n\tat java.security.Signature.update(Signature.java:690)\n\tat\norg.apache.xml.security.algorithms.implementations.SignatureBaseRSA.engineUpdate(SignatureBaseRSA.java:201)\n\tat\norg.apache.xml.security.algorithms.SignatureAlgorithm.update(SignatureAlgorithm.java:249)\n\tat\norg.apache.xml.security.utils.SignerOutputStream.write(SignerOutputStream.java:64)\n\tat\norg.apache.xml.security.utils.UnsyncBufferedOutputStream.flushBuffer(UnsyncBufferedOutputStream.java:69)\n\tat\norg.apache.xml.security.utils.UnsyncBufferedOutputStream.flush(UnsyncBufferedOutputStream.java:85)\n\tat\norg.apache.xml.security.utils.UnsyncBufferedOutputStream.close(UnsyncBufferedOutputStream.java:91)\n\tat\norg.apache.xml.security.c14n.implementations.CanonicalizerBase.engineCanonicalizeSubTree(CanonicalizerBase.java:207)\n\tat\norg.apache.xml.security.c14n.implementations.CanonicalizerBase.engineCanonicalizeSubTree(CanonicalizerBase.java:121)\n\tat\norg.apache.xml.security.c14n.Canonicalizer.canonicalizeSubtree(Canonicalizer.java:268)\n\tat\norg.apache.xml.security.signature.SignedInfo.signInOctectStream(SignedInfo.java:286)\n\tat org.apache.xml.security.signature.XMLSignature.sign(XMLSignature.java:501)\n\tat\norg.apache.xml.security.samples.signature.CopyOfCreateSignature.sign(CopyOfCreateSignature.java:172)\n\tat\norg.apache.xml.security.samples.signature.CopyOfCreateSignature.main(CopyOfCreateSignature.java:83).\nThis problem is caused by the initSign method in class SignatureAlgorithm:\n[1]   public void initSign(Key signingKey) throws XMLSignatureException {\t   \n[2]\t   initializeAlgorithm(true);\n[3]\t    if (keysSigning.get()==signingKey) {\n[4]    \t   return;\n[5]       }\n[6]       keysSigning.set(signingKey);\n[7]\t   this._signatureAlgorithm.engineInitSign(signingKey);\n[8]   }\nThe lines 3-5 should be commented to solve above problem."}, {"count": 1, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of 14520 ***", "is_private": false, "id": 98902, "creator": "lijun.liao@gmail.com", "time": "2007-02-02T05:26:39Z", "bug_id": 41519, "creation_time": "2007-02-02T05:26:39Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "I think somebody has close this wrongly. Is an issue. I will try to take a look\nat it.", "is_private": false, "id": 99576, "creator": "raul-info@r-bg.com", "time": "2007-02-20T10:37:08Z", "bug_id": 41519, "creation_time": "2007-02-20T10:37:08Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "jsp@pkc.com", "attachment_id": null, "id": 99577, "time": "2007-02-20T10:42:57Z", "bug_id": 41519, "creation_time": "2007-02-20T10:42:57Z", "is_private": false, "text": "Maybe this was intended to be closed as a dup of bug 41520?"}, {"attachment_id": null, "tags": [], "bug_id": 41519, "text": "(In reply to comment #3)\n> Maybe this was intended to be closed as a dup of bug 41520?\n\nYes it clearly is. It looks like when Lijun originally closed it as a dup, there\nwas a typo in the bug number: 14520 instead of 41520. I have closed it as a\nduplicate of 41520.\n\n*** This bug has been marked as a duplicate of 41520 ***", "count": 4, "id": 99629, "time": "2007-02-21T08:29:53Z", "creator": "sean.mullan@oracle.com", "creation_time": "2007-02-21T08:29:53Z", "is_private": false}, {"count": 5, "attachment_id": null, "creator": "sean.mullan@oracle.com", "text": "Closing old bugs.", "id": 108407, "time": "2007-09-19T12:27:24Z", "bug_id": 41519, "creation_time": "2007-09-19T12:27:24Z", "tags": [], "is_private": false}]