[{"count": 0, "attachment_id": null, "bug_id": 3341, "is_private": false, "id": 5013, "time": "2001-08-29T11:27:59Z", "creator": "monte@spyonit.com", "creation_time": "2001-08-29T11:27:59Z", "tags": [], "text": "To recreate:\n1. save the abug and abug.xml files.\n2. ./ant -buildfile abug.xml all\n\nProblem:\nthe \"$\" within the \"blah123:$blah456\" replacement string is stripped when \nthe \"$\" occurs anywhere but the beginning of the replacement string.\nThe resulting \"abug\" file has the \"$\" char stripped from the \"blah123:$blah456\" \nreplacement string.\n\nNOTE: \"$\" at the beginning of a replacement string work OK.\nBut just try to buildup/substitute into a Unix $CLASSPATH variable...\n\nThanks,\nMonte Seyer\nmonte@spyonit.com\n\ninitial abug file:\nthese all fail...\njunk=blah123\n$blah123\nhello=$blah123\nblah123\n\nabug.xml file:\n<project name=\"abug\" default=\"all\" basedir=\".\">\n        <target name=\"all\">\n                <replace dir=\".\" includes=\"abug\">\n                        <replacefilter token=\"blah123\" \nvalue=\"blah123:$blah456\"/>\n                </replace>\n        </target>\n</project>\n\nresulting abug file:\nthese all fail...\njunk=blah123:blah456\n$blah123:blah456\nhello=$blah123:blah456\nblah123:blah456"}, {"count": 1, "tags": [], "bug_id": 3341, "attachment_id": null, "is_private": false, "id": 5460, "time": "2001-09-13T05:35:25Z", "creator": "conor@apache.org", "creation_time": "2001-09-13T05:35:25Z", "text": "You need to double the $ sign in all values. The $ character is used by Ant to\nmark the Ant properties and if you want a real $ character, just double it up.\n\nSo, your value clause becomes\nvalue=\"blah123:$$blah456\"/>\n\n"}, {"count": 2, "tags": [], "bug_id": 3341, "attachment_id": null, "id": 5478, "time": "2001-09-13T07:51:49Z", "creator": "monte@spyonit.com", "creation_time": "2001-09-13T07:51:49Z", "is_private": false, "text": "Can you explain why a single \"$\" at the beginning of a replacement string works \nOK?\n"}, {"count": 3, "tags": [], "bug_id": 3341, "attachment_id": null, "is_private": false, "id": 5908, "time": "2001-09-21T21:10:22Z", "creator": "umagesh@rediffmail.com", "creation_time": "2001-09-21T21:10:22Z", "text": "Ant is behaving consistently.  This is the build.xml file that you have given \nwhich I have modified so that the value (or replacement) string begins with $\n\n<project name=\"abug\" default=\"all\" basedir=\".\">\n  <target name=\"all\">\n      <replace dir=\".\" includes=\"abug\">\n          <replacefilter token=\"blah123\" value=\"$blah123:blah456\"/>\n      </replace>\n  </target>\n</project>\n\nHere is my original abug file:\nthese all fail...\njunk=blah123\n$blah123\nhello=$blah123\nblah123\n\nAnd here is the abug file after the ant run:\n\nthese all fail...\njunk=blah123:blah456\n$blah123:blah456\nhello=$blah123:blah456\nblah123:blah456\n\nAnt ignores the $ sign unless you escape it with a double $ ($$) sign.  So, all \nblah123 tokens become blah123:blah456\n\nHere is another build.xml which has a $ sign in the replace token.\n\n<project name=\"abug\" default=\"all\" basedir=\".\">\n    <target name=\"all\">\n        <replace dir=\".\" includes=\"abug\">\n            <replacefilter token=\"$blah123\" value=\"blah123:blah456\"/>\n        </replace>\n    </target>\n</project>\n\nand here is the resulting abug file:\n\nthese all fail...\njunk=blah123:blah456\n$blah123:blah456\nhello=$blah123:blah456\nblah123:blah456\n\nHere too, the $ sign in the token is ignored and all blah123 tokens are \nsubstituted with blah123:blah456 values.\n\nWhatever $ signs you see in the resultant abug file were the ones that were \nthere in the original file itself.\n\nSo I don't see where ant is failing to be consistent.\n\nIf this doesn't clear it up, please post the build.xml file where it fails to \nbe consistent.\n\nPlease note that I have tested this against Ant 1.4.  If you get different \nresults with Ant 1.3, please upgrade to Ant 1.4.\n\nThanks,\nMagesh\n"}, {"count": 4, "attachment_id": null, "bug_id": 3341, "is_private": false, "id": 6092, "time": "2001-09-27T03:50:49Z", "creator": "bodewig@apache.org", "creation_time": "2001-09-27T03:50:49Z", "tags": [], "text": "can we close this report or are there still open issues?"}, {"count": 5, "tags": [], "creator": "monte@spyonit.com", "attachment_id": null, "text": "looks good to me. you can close this.", "id": 6117, "time": "2001-09-27T08:29:00Z", "bug_id": 3341, "creation_time": "2001-09-27T08:29:00Z", "is_private": false}]