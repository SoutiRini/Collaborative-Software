[{"attachment_id": null, "tags": [], "bug_id": 52686, "is_private": false, "count": 0, "id": 153846, "time": "2012-02-16T18:24:20Z", "creator": "mikebell90@yahoo.com", "creation_time": "2012-02-16T18:24:20Z", "text": "After installing tomcat, one finds the nice little system tray will not load. \n\n1. The immediate reason is tomcat7w.exe must run as administrator.\n2. A MANUAL workaround is for the customer to go to startup, right click, choose advanced, and select Run as administrator.\n3. However, people shouldn't have to do this manually\n4. The next way to do things (and the more official way) is to use an application manifest. \n5. These can be installed manually or embedded. An example might be\n\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\" >\n<assemblyIdentity version=\"1.0.0.0\"\nprocessorArchitecture=\"X86\"\nname=\"tomcat7w\"\ntype=\"win32\" />\n<description>Force Tomcat to run as admin for config</description>\n<trustInfo xmlns=\"urn:schemas-microsoft-com:asm.v3\">\n<security>\n<requestedPrivileges>\n<requestedExecutionLevel level=\"requireAdministrator\" uiAccess=\"true\" />\n</requestedPrivileges>\n</security>\n</trustInfo>\n</assembly>\n\n6. However, saving this as tomcat7w.exe.manifest will still fail.\n7. This is because tomcat7w already includes an embedded manifest, and in these cases windows ignores the external manifest.\n\nProposal is to fix the embedded manifest. The current manifest is\n <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?> \n- <!-- \n  Licensed to the Apache Software Foundation (ASF) under one or more\n  contributor license agreements.  See the NOTICE file distributed with\n  this work for additional information regarding copyright ownership.\n  The ASF licenses this file to You under the Apache License, Version 2.0\n  (the \"License\"); you may not use this file except in compliance with\n  the License.  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n\n\n  --> \n <assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\">\n  <assemblyIdentity version=\"3.1.0.0\" processorArchitecture=\"*\" name=\"Apache.Procrun.Prunmgr\" type=\"win32\" /> \n  <description>Apache Procrun Service Manager</description> \n <dependency>\n <dependentAssembly>\n  <assemblyIdentity type=\"win32\" name=\"Microsoft.Windows.Common-Controls\" version=\"6.0.0.0\" processorArchitecture=\"*\" publicKeyToken=\"6595b64144ccf1df\" language=\"*\" /> \n  </dependentAssembly>\n  </dependency>\n  </assembly>\n\nand that should be modified to\n\n <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?> \n <!-- \n  Licensed to the Apache Software Foundation (ASF) under one or more\n  contributor license agreements.  See the NOTICE file distributed with\n  this work for additional information regarding copyright ownership.\n  The ASF licenses this file to You under the Apache License, Version 2.0\n  (the \"License\"); you may not use this file except in compliance with\n  the License.  You may obtain a copy of the License at\n\n      http://www.apache.org/licenses/LICENSE-2.0\n\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n\n\n  --> \n <assembly xmlns=\"urn:schemas-microsoft-com:asm.v1\" manifestVersion=\"1.0\">\n  <assemblyIdentity version=\"3.1.0.0\" processorArchitecture=\"*\" name=\"Apache.Procrun.Prunmgr\" type=\"win32\" /> \n  <description>Apache Procrun Service Manager</description> \n<trustInfo xmlns=\"urn:schemas-microsoft-com:asm.v3\">\n<security>\n<requestedPrivileges>\n<requestedExecutionLevel level=\"requireAdministrator\" uiAccess=\"true\" />\n</requestedPrivileges>\n</security>\n</trustInfo>\n <dependency>\n <dependentAssembly>\n  <assemblyIdentity type=\"win32\" name=\"Microsoft.Windows.Common-Controls\" version=\"6.0.0.0\" processorArchitecture=\"*\" publicKeyToken=\"6595b64144ccf1df\" language=\"*\" /> \n  </dependentAssembly>\n  </dependency>\n  </assembly>"}, {"count": 1, "tags": [], "text": "You need to raise this against Apache Commons Daemon which provides this component that Tomcat uses.", "is_private": false, "id": 153847, "creator": "markt@apache.org", "time": "2012-02-16T18:27:43Z", "bug_id": 52686, "creation_time": "2012-02-16T18:27:43Z", "attachment_id": null}]