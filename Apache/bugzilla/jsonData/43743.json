[{"count": 0, "tags": [], "text": "myjsp.jsp:  HELLO <tag1/>\ntag1.tag:  <tag2>\ntag2.tag:  WORLD\n\nCrashes (null pointer)  while trying to load tag2.class, called by  \nTagFileProcessor.loadTagFile.\n\nVery Initial analysis:-\nTagFileProcessor.loadTagFile creates wrapper, but ctxt.getTagFileJarUrl\n(tagFilePath) returns null for nested .tag.\nThus in JspCompilationContext.Compile  JspCCtx.isPackagedFile == false, so \noutDated test is wrong\nSo tag2.tag not compiled, thus class cannot be loaded.\n\nBut problem also appears if tags not packaged in a .jar, so there is more \ngoing on.\n\nWork around is to create dummy.jsp that calls the .tags in leaf first order \nso .class files are created.", "attachment_id": null, "id": 109998, "creator": "aberglas@rsa.com", "time": "2007-10-30T21:25:38Z", "bug_id": 43743, "creation_time": "2007-10-30T21:25:38Z", "is_private": false}, {"count": 1, "tags": [], "creator": "aberglas@rsa.com", "is_private": false, "text": "Correction: Problem ONLY appears if nested tag is in a jar file.", "id": 110000, "time": "2007-10-30T23:35:04Z", "bug_id": 43743, "creation_time": "2007-10-30T23:35:04Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 43743, "attachment_id": null, "id": 110009, "time": "2007-10-31T02:08:13Z", "creator": "aberglas@rsa.com", "creation_time": "2007-10-31T02:08:13Z", "is_private": false, "text": "The bug appears to be in Parser.parseTaglibDirective.\n\nA JspCompilerContext instance is created for each JSP and each Tag file \nprocessed.\nThe tag file url map is stored here, not globally.  This is what \nJspCompilerContext.compile uses.\n\nBut Parser.parseTaglibDirective only calls TagLibraryInfoImpl() once per JSP, \nnot and not for the sub tag files.\nSo the map is never populated.\n\nA hack workaround it to set caching=\"false\" in the <jspc ...> command. \nI'm not sure what the full implications of doing this are.\n\nFrom here I think a proper fix should be fairly straight forward."}, {"count": 3, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "This is fixed in svn and will be included in 6.0.16 onwards.", "id": 112750, "time": "2008-01-10T13:46:51Z", "bug_id": 43743, "creation_time": "2008-01-10T13:46:51Z", "attachment_id": null}]