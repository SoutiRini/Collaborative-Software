[{"attachment_id": 24044, "tags": [], "creator": "psynode@gmail.com", "is_private": false, "count": 0, "id": 129185, "time": "2009-07-27T15:46:14Z", "bug_id": 47591, "creation_time": "2009-07-27T15:46:14Z", "text": "Created attachment 24044\nPatch for 2.3-HEAD\n\nIn relation to bug #40003 (https://issues.apache.org/bugzilla/show_bug.cgi?id=40003)\n\nI have added 2 patch files to this request.\nFirst being for 2.3-HEAD\nSecond being for 2.2.X (tested against 2.2.11)\n\n\nThis patch will allow you to configure mod_status with:\nScoreBoardDisplayHostname On|Off (default Off)\n\nThis will allow you to see the current HTTP_HOST request (r->hostname) in the server-status page\n\nThis is useful if you are doing mass virtual hosting (mod_vhost) to track down specific hosts.\n\nI've taken the one liner supplied from bug #40003 and made it configurable."}, {"count": 1, "attachment_id": 24045, "creator": "psynode@gmail.com", "text": "Created attachment 24045\nPatch for 2.2.x", "id": 129186, "time": "2009-07-27T15:46:49Z", "bug_id": 47591, "creation_time": "2009-07-27T15:46:49Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "text": "I am running a hand crafted one-liner much like #40003\n\nIt would be good to see something like this make it to release.\n\nSince it has a config option defaulting to the old behavior it seems to me like a pretty easy addition.", "is_private": false, "id": 129636, "creator": "karlbunch@karlbunch.com", "time": "2009-08-11T16:45:36Z", "bug_id": 47591, "creation_time": "2009-08-11T16:45:36Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 47591, "is_private": false, "text": "\nwhy not use ap_get_server_name? And this function reflect the real virtualhost configuration.\n\nthis simple patch work well for me:\n\n\n--- apache2.3-trunk.orig/server/scoreboard.c\t2011-07-21 11:13:55.000000000 +0000\n+++ apache2.3-trunk/server/scoreboard.c\t2011-07-27 10:12:13.000000000 +0000\n@@ -492,7 +492,7 @@\n                         REMOTE_NOLOOKUP, NULL), sizeof(ws->client));\n             copy_request(ws->request, sizeof(ws->request), r);\n             if (r->server) {\n-            \tapr_cpystrn(ws->vhost, r->server->server_hostname,\n+            \tapr_cpystrn(ws->vhost, ap_get_server_name(r),\n                             sizeof(ws->vhost));\n             }\n         }", "id": 148245, "time": "2011-07-28T12:48:27Z", "creator": "manu@gandi.net", "creation_time": "2011-07-28T12:48:27Z", "attachment_id": null}]