[{"text": "Code demonstrating the issue:\nhttps://github.com/rstoyanchev/dispatch-test\n\nCheckout the 'tomcat-issue-repro' branch. From the home page of the deployed application, select the \"Dispatch via AsyncContext\" scenario. The scenario involves ServletA forwarding to ServletB and ServletC, which in turn creates a thread and dispatches to ServletD. The DispatchType in ServletD should be ASYNC but is INCLUDE instead.\n\nFWIW when the request is wrapped (scenarion \"Dispatch via AsyncContext and wrap request\"), the DispatchType is correct.", "tags": [], "creator": "rstoyanchev@yahoo.com", "is_private": false, "count": 0, "id": 161033, "time": "2012-07-31T15:49:55Z", "bug_id": 53632, "creation_time": "2012-07-31T15:49:55Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 53632, "is_private": false, "text": "I assume at some point the debug logging was outputting the result of request.getDispatchType(). The version provided doesn't do this but I have added the line to do this in my local copy.\n\nThis issue has the same root cause as bug 53623 so I am marking it as a duplicate since it is really just a different symptom of the same underlying problem.\n\n*** This bug has been marked as a duplicate of bug 53623 ***", "id": 161396, "time": "2012-08-14T20:43:39Z", "creator": "markt@apache.org", "creation_time": "2012-08-14T20:43:39Z", "attachment_id": null}]