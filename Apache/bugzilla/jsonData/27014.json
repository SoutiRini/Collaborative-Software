[{"count": 0, "attachment_id": null, "bug_id": 27014, "is_private": false, "id": 52452, "time": "2004-02-17T19:59:22Z", "creator": "jfischer@voiceobjects.com", "creation_time": "2004-02-17T19:59:22Z", "tags": [], "text": "A task depending on the failure property throws the following exception (only \ndisplayed when running ANT in debug mode) when the preceding JUnit task fails:\n\nBUILD FAILED\nD:\\cvslocal\\OVAP\\1.0\\Build\\script\\build.xml:677: Following error occured while \nexecuting this line\nD:\\cvslocal\\OVAP\\1.0\\Build\\script\\test.xml:188: if=junit-test-failed\n\tat org.apache.tools.ant.ProjectHelper.addLocationToBuildException\n(ProjectHelper.java:537)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:385)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n\tat org.apache.tools.ant.Task.perform(Task.java:364)\n\tat org.apache.tools.ant.Target.execute(Target.java:301)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:328)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1063)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:632)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:183)\n\tat org.apache.tools.ant.launch.Launcher.run(Launcher.java:197)\n\tat org.apache.tools.ant.launch.Launcher.main(Launcher.java:56)\nCaused by: D:\\cvslocal\\OVAP\\1.0\\Build\\script\\test.xml:188: if=junit-test-failed\n\tat org.apache.tools.ant.taskdefs.Exit.execute(Exit.java:105)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n\tat org.apache.tools.ant.Task.perform(Task.java:364)\n\tat org.apache.tools.ant.Target.execute(Target.java:301)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:328)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:383)\n\t... 10 more\n--- Nested Exception ---\nD:\\cvslocal\\OVAP\\1.0\\Build\\script\\test.xml:188: if=junit-test-failed\n\tat org.apache.tools.ant.taskdefs.Exit.execute(Exit.java:105)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n\tat org.apache.tools.ant.Task.perform(Task.java:364)\n\tat org.apache.tools.ant.Target.execute(Target.java:301)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:328)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:383)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n\tat org.apache.tools.ant.Task.perform(Task.java:364)\n\tat org.apache.tools.ant.Target.execute(Target.java:301)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:328)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1063)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:632)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:183)\n\tat org.apache.tools.ant.launch.Launcher.run(Launcher.java:197)\n\tat org.apache.tools.ant.launch.Launcher.main(Launcher.java:56)\n\nThe JUnit task looks as follows:\n<target name=\"execJUnitTest\" depends=\"init\">\n<junit fork=\"yes\" haltonerror=\"no\" haltonfailure=\"no\" \nprintsummary=\"withOutAndErr\" dir=\"${localTest}\" failureproperty=\"junit-test-\nfailed\"> ..... </junit> ... </target>\n\nDepending task:\n<target name=\"sendJUnitFailureMail\" if=\"junit-test-failed\"> ... </target>\n\nThis task is called from the main build file:\n<target name=\"junit-test\" depends=\"execJUnitTest, sendJUnitFailureMail\">\n<fail if=\"junit-test-failed\"/>\n</target>\n\nThe line number in the error message (test.xml:188) points to a line containing \na XML comment."}, {"count": 1, "attachment_id": null, "bug_id": 27014, "is_private": false, "id": 52477, "time": "2004-02-18T10:30:07Z", "creator": "peter.reilly@corvil.com", "creation_time": "2004-02-18T10:30:07Z", "tags": [], "text": "The exception seen is the correct exception result of an ant call.\n(in ant 1.6)\nThe following generates the shown exception:\n1: <project default=\"y\">\n2:  <target name=\"x\">\n3:    <property name=\"z\" value=\"set\"/>\n4:    <fail if=\"z\"></fail>\n5:  </target>\n6:  <target name=\"y\">\n7:    <antcall target=\"x\"/>\n8:  </target>\n9: </project>\n\n/home/preilly/learning/ant/fail.xml:7: Following error occured while executing\nthis line\n/home/preilly/learning/ant/fail.xml:4: if=z\nCan you attach the complete build.xml file?\n\n"}, {"count": 2, "tags": [], "bug_id": 27014, "is_private": false, "text": "Hi!\n\nThanks for the prompt answer.\nI didn't know that the behaviour of the \"fail\" task has changed.\nUntil version 1.5.4 the following sample script only printed \"BUILD FAILED\".\n\n1: <project default=\"y\">\n2:  <target name=\"x\">\n3:    <property name=\"z\" value=\"set\"/>\n4:    <fail if=\"z\"></fail>\n5:  </target>\n6:  <target name=\"y\">\n7:    <antcall target=\"x\"/>\n8:  </target>\n9: </project>\n\nResult for Ant 1.6.x:\nBUILD FAILED\n/home/preilly/learning/ant/fail.xml:7: Following error occured while executing\nthis line\n/home/preilly/learning/ant/fail.xml:4: if=z\n\nThis looked like an error for me, especially because the printed line number is \nnot always correct.\n\nBest regards\nJochen Fischer", "id": 52479, "time": "2004-02-18T11:33:51Z", "creator": "jfischer@voiceobjects.com", "creation_time": "2004-02-18T11:33:51Z", "attachment_id": null}]