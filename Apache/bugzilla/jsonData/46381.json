[{"count": 0, "tags": [], "text": "Created attachment 23009\nSource file\n\nI have a simple <c:set> tag with expression concatenation. This tag breaks with this stack trace:\n\norg.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: 22 in the jsp file: /templates/paragraphs/notizia.jsp\nThe operator + is undefined for the argument type(s) java.lang.Object, java.lang.Object\n19:       <c:when test=\"${!empty(node.link)}\">\n20:         <c:set value=\"${node.link}\" var=\"url\" />\n21:         <c:if test=\"${!(fn:startsWith(url,'http'))}\">\n22:           <c:set value=\"${pageContext.request.contextPath}${url}\" var=\"url\" />\n23:           <c:set value=\" \" var=\"target\" />\n24:         </c:if>\n25:         <a href=\"${url}\" class=\"${target}\">${node.testo}</a>\n\n\nStacktrace:\n\tat org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)\n\tat org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:423)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:312)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:299)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:586)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\n\tat org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)\n\tat org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)\n\tat info.magnolia.context.WebContextImpl.include(WebContextImpl.java:191)\n\tat info.magnolia.module.templating.paragraphs.JspParagraphRenderer.render(JspParagraphRenderer.java:73)\n\tat info.magnolia.cms.beans.config.ParagraphRenderingFacade.render(ParagraphRenderingFacade.java:112)\n\tat info.magnolia.cms.beans.config.ParagraphRenderingFacade.render(ParagraphRenderingFacade.java:91)\n\tat info.magnolia.cms.taglibs.Include.doEndTag(Include.java:192)\n\tat org.apache.jsp.templates.paragraphs.bloccoInfo_jsp._jspx_meth_cms_005fincludeTemplate_005f0(bloccoInfo_jsp.java:332)\n\tat org.apache.jsp.templates.paragraphs.bloccoInfo_jsp._jspx_meth_cms_005fcontentNodeIterator_005f0(bloccoInfo_jsp.java:289)\n\tat org.apache.jsp.templates.paragraphs.bloccoInfo_jsp._jspService(bloccoInfo_jsp.java:98)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\n\tat org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)\n\tat org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)\n\tat info.magnolia.context.WebContextImpl.include(WebContextImpl.java:191)\n\tat info.magnolia.module.templating.paragraphs.JspParagraphRenderer.render(JspParagraphRenderer.java:73)\n\tat info.magnolia.cms.beans.config.ParagraphRenderingFacade.render(ParagraphRenderingFacade.java:112)\n\tat info.magnolia.cms.beans.config.ParagraphRenderingFacade.render(ParagraphRenderingFacade.java:91)\n\tat info.magnolia.cms.taglibs.Include.doEndTag(Include.java:192)\n\tat org.apache.jsp.templates.pages.firstlevelgruppo_jsp._jspx_meth_cms_005fincludeTemplate_005f1(firstlevelgruppo_jsp.java:428)\n\tat org.apache.jsp.templates.pages.firstlevelgruppo_jsp._jspx_meth_cms_005fcontentNodeIterator_005f1(firstlevelgruppo_jsp.java:385)\n\tat org.apache.jsp.templates.pages.firstlevelgruppo_jsp._jspService(firstlevelgruppo_jsp.java:115)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat info.magnolia.cms.filters.MgnlMainFilter.doFilter(MgnlMainFilter.java:100)\n\tat info.magnolia.cms.filters.MgnlMainFilter.doFilter(MgnlMainFilter.java:200)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\n\tat info.magnolia.module.templating.renderers.JspTemplateRenderer.renderTemplate(JspTemplateRenderer.java:78)\n\tat info.magnolia.cms.filters.RenderingFilter.doFilter(RenderingFilter.java:103)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.BackwardCompatibilityFilter.doFilter(BackwardCompatibilityFilter.java:72)\n\tat info.magnolia.cms.filters.OncePerRequestAbstractMgnlFilter.doFilter(OncePerRequestAbstractMgnlFilter.java:62)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.InterceptFilter.doFilter(InterceptFilter.java:117)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.AggregatorFilter.doFilter(AggregatorFilter.java:111)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.security.BaseSecurityFilter.doFilter(BaseSecurityFilter.java:61)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.RepositoryMappingFilter.doFilter(RepositoryMappingFilter.java:90)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.CompositeFilter.doFilter(CompositeFilter.java:64)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:65)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.CompositeFilter.doFilter(CompositeFilter.java:64)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.VirtualUriFilter.doFilter(VirtualUriFilter.java:115)\n\tat info.magnolia.cms.filters.OncePerRequestAbstractMgnlFilter.doFilter(OncePerRequestAbstractMgnlFilter.java:62)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.i18n.I18nContentSupportFilter.doFilter(I18nContentSupportFilter.java:75)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat net.sourceforge.stripes.controller.StripesFilter.doFilter(StripesFilter.java:180)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.module.cache.executor.Bypass.processCacheRequest(Bypass.java:57)\n\tat info.magnolia.module.cache.filter.CacheFilter.doFilter(CacheFilter.java:118)\n\tat info.magnolia.cms.filters.OncePerRequestAbstractMgnlFilter.doFilter(OncePerRequestAbstractMgnlFilter.java:62)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.module.cache.filter.GZipFilter.doFilter(GZipFilter.java:84)\n\tat info.magnolia.cms.filters.OncePerRequestAbstractMgnlFilter.doFilter(OncePerRequestAbstractMgnlFilter.java:62)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:73)\n\tat info.magnolia.cms.filters.CosMultipartRequestFilter.doFilter(CosMultipartRequestFilter.java:84)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.security.BaseSecurityFilter.doFilter(BaseSecurityFilter.java:61)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.security.LogoutFilter.doFilter(LogoutFilter.java:81)\n\tat info.magnolia.cms.filters.OncePerRequestAbstractMgnlFilter.doFilter(OncePerRequestAbstractMgnlFilter.java:62)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.security.auth.login.LoginFilter.doFilter(LoginFilter.java:76)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:80)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.ContextFilter.doFilter(ContextFilter.java:72)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:71)\n\tat info.magnolia.cms.filters.CompositeFilter.doFilter(CompositeFilter.java:64)\n\tat info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:71)\n\tat info.magnolia.cms.filters.MgnlMainFilter.doFilter(MgnlMainFilter.java:97)\n\tat info.magnolia.cms.filters.MgnlMainFilter.doFilter(MgnlMainFilter.java:200)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat it.ragno.web.filters.LocaleSyncFilter.doFilter(LocaleSyncFilter.java:82)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)\n\tat java.lang.Thread.run(Thread.java:619)", "is_private": false, "id": 123240, "creator": "fabian.necci@gmail.com", "time": "2008-12-11T07:13:00Z", "bug_id": 46381, "creation_time": "2008-12-11T07:13:00Z", "attachment_id": 23009}, {"count": 1, "tags": [], "bug_id": 46381, "attachment_id": null, "text": "I have applied a fix to trunk but I want to do some more testing with the TCK (which I don't have to immediately to hand) before proposing for 6.0.x", "id": 123545, "time": "2008-12-26T15:43:42Z", "creator": "markt@apache.org", "creation_time": "2008-12-26T15:43:42Z", "is_private": false}, {"count": 2, "tags": [], "text": "The TCK passes so this has been proposed for 6.0.x", "attachment_id": null, "id": 123558, "creator": "markt@apache.org", "time": "2008-12-27T13:36:30Z", "bug_id": 46381, "creation_time": "2008-12-27T13:36:30Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 46381, "attachment_id": null, "is_private": false, "id": 124054, "time": "2009-01-14T15:51:55Z", "creator": "markt@apache.org", "creation_time": "2009-01-14T15:51:55Z", "text": "This has been fixed in 6.0.x and will be include din 6.0.19 onwards."}, {"attachment_id": null, "tags": [], "bug_id": 46381, "is_private": false, "count": 4, "id": 127740, "time": "2009-06-08T07:14:09Z", "creator": "alfred.staflinger@infoniqa.com", "creation_time": "2009-06-08T07:14:09Z", "text": "Dear Tomcat Developers,\n\nwhen i have a JSP page with this tag/expression...\n\n<c:out value=\"${assignment.companyHeader.address.name01} ${assignment.companyHeader.address.name02}\" />\n\n... and \"companyHeader\" evaluates to null, \n\nthe output in Tomcat 6.0.18 is \" \" (which is correct),\n\nbut the output in Tomcat 6.0.20 is \"null \" (which is not correct).\n\nI think that many JSP developers are concerned by this bug and I hope that there will be released a new Tomcat version containing a bug fix as soon as possible.\n\nBest Regards\nAlfred"}, {"attachment_id": null, "tags": [], "bug_id": 46381, "is_private": false, "count": 5, "id": 128583, "time": "2009-07-07T03:56:21Z", "creator": "markt@apache.org", "creation_time": "2009-07-07T03:56:21Z", "text": "Comment #4 looks like a separate issue and bug47487 has now been opened for it."}]