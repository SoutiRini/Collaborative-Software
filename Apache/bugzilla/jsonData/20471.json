[{"count": 0, "attachment_id": null, "bug_id": 20471, "is_private": false, "id": 38325, "time": "2003-06-04T09:52:57Z", "creator": "francois.banel@filinks.com", "creation_time": "2003-06-04T09:52:57Z", "tags": [], "text": "When parsing the XML file below with a SAX Parser, Xerces generates the \nfollowing error :\norg.xml.sax.SAXParseException: Schema error: ComplexType 'OrderType': \nderivation-ok-restriction.2.2:  Attribute 'number' has a target namespace which \nis not valid with respect to a base type definition's wildcard or, the base \ndoes not contain a wildcard.\n\tat org.apache.xerces.framework.XMLParser.reportError\n(XMLParser.java:1204)\n\tat org.apache.xerces.validators.schema.TraverseSchema.reportSchemaError\n(TraverseSchema.java:8899)\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.reportGenericSchemaError\n(TraverseSchema.java:8886)\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.handleComplexTypeError\n(TraverseSchema.java:3975)\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.traverseComplexTypeDecl\n(TraverseSchema.java:3434)\n\tat \norg.apache.xerces.validators.schema.TraverseSchema.traverseComplexTypeDecl\n(TraverseSchema.java:3257)\n\tat org.apache.xerces.validators.schema.TraverseSchema.doTraverseSchema\n(TraverseSchema.java:739)\n\tat org.apache.xerces.validators.schema.TraverseSchema.<init>\n(TraverseSchema.java:540)\n\tat org.apache.xerces.validators.common.XMLValidator.resolveSchemaGrammar\n(XMLValidator.java:2783)\n\tat org.apache.xerces.validators.common.XMLValidator.parseSchemas\n(XMLValidator.java:2669)\n\tat \norg.apache.xerces.validators.common.XMLValidator.bindNamespacesToElementAndAttri\nbutes(XMLValidator.java:2551)\n\tat org.apache.xerces.validators.common.XMLValidator.callStartElement\n(XMLValidator.java:1152)\n\tat org.apache.xerces.framework.XMLDocumentScanner.scanElement\n(XMLDocumentScanner.java:1806)\n\tat \norg.apache.xerces.framework.XMLDocumentScanner$ContentDispatcher.dispatch\n(XMLDocumentScanner.java:949)\n\tat org.apache.xerces.framework.XMLDocumentScanner.parseSome\n(XMLDocumentScanner.java:381)\n\tat org.apache.xerces.framework.XMLParser.parse(XMLParser.java:1081)\n\tat com.testfb.TestXercesBugs.main(TestXercesBugs.java:31)\n\nThis error occurs only when :\n - the base type and the restricted type are in different namespaces\n - the base type contains at least one attribute\n - the base type contains at least one element containing one attribute\nIt seems strange to me. Since I does not find any error in the chema \ndefinitions, I assume that it could be a Xerces 2.4.0 bug\n\n\nthe XMLSchema base.xsd :\n---------------------------------------------------------------------\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<schema targetNamespace=\"http://www.datamodel.testfb.com/base\" \nxmlns=\"http://www.w3.org/2001/XMLSchema\" \nxmlns:base=\"http://www.datamodel.testfb.com/base\" >\n\t\n\t\n\t<complexType name=\"OrderType\">\n\t\t<sequence>\n\t\t\t<element name=\"leg\" type=\"base:LegType\" minOccurs=\"0\"/>\n\t\t</sequence>\n\t\t<attribute name=\"quantity\" type=\"string\" use=\"optional\"/>\n\t</complexType>\n\t\n\t<complexType name=\"LegType\">\n\t\t<attribute name=\"number\" type=\"string\" use=\"optional\"/>\n\t</complexType>\n\n\n\t\n</schema>\n---------------------------------------------------------------------\n\nthe XMLSchema restr.xsd :\n---------------------------------------------------------------------\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<schema targetNamespace=\"http://www.datamodel.testfb.com/restr\" \nxmlns:restr=\"http://www.datamodel.testfb.com/restr\" \nxmlns:base=\"http://www.datamodel.testfb.com/base\" \nxmlns=\"http://www.w3.org/2001/XMLSchema\" >\n\t<import namespace=\"http://www.datamodel.testfb.com/base\" \nschemaLocation=\"base.xsd\"/>\n\t\n\t<complexType name=\"OrderType\">\n\t\t<complexContent>\n\t\t\t<restriction base=\"base:OrderType\">\n\t\t\t\t<sequence>\n\t\t\t\t\t<element name=\"leg\" type=\"base:LegType\" \nminOccurs=\"0\"/>\n\t\t\t\t</sequence>\n\t\t\t\t<attribute name=\"quantity\" type=\"string\" \nuse=\"optional\"/>\n\t\t\t</restriction>\n\t\t</complexContent>\n\t</complexType>\n\t\n\t<element name=\"Order\" type=\"restr:OrderType\"/>\n\t\n</schema>\n---------------------------------------------------------------------\n\nthe XML file :\n---------------------------------------------------------------------\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<restr:Order xmlns:restr=\"http://www.datamodel.testfb.com/restr\" \nxmlns:base=\"http://www.datamodel.testfb.com/base\" \nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \nxsi:schemaLocation=\"http://www.datamodel.testfb.com/restr restr.xsd\"  >\n\t<leg number=\"05\"/>\n</restr:Order>\n---------------------------------------------------------------------"}, {"count": 1, "tags": [], "text": "Looking at your stack trace, all I can see are Xerces-J1 classes. The \norg.apache.xerces.framework and org.apache.xerces.validators.* don't exist in \nXerces 2. This probably means you're using Xerces 1.4.4 or lower.", "attachment_id": null, "id": 38345, "creator": "mrglavas@ece.uwaterloo.ca", "time": "2003-06-04T12:33:37Z", "bug_id": 20471, "creation_time": "2003-06-04T12:33:37Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 20471, "text": "changing product appropriately", "id": 38350, "time": "2003-06-04T13:09:22Z", "creator": "neilg@ca.ibm.com", "creation_time": "2003-06-04T13:09:22Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "francois.banel@filinks.com", "attachment_id": null, "text": "you are right, I thought I used 2.4.0, but it was version 1.\nI retried with the 2.4.0 version, which is the version I want to use\nand the parsing is ok.\nThank you for the hint", "id": 38352, "time": "2003-06-04T14:05:22Z", "bug_id": 20471, "creation_time": "2003-06-04T14:05:22Z", "is_private": false}]