[{"count": 0, "tags": [], "bug_id": 41829, "text": "in ap_directory_walk the opts structure represents the currently active options\nand allowed overrides. In 2.2.0 \"AllowOverride Options=...\" was introduced and\nwith it a new member of this structure override_opts. Unfortunately this member\nis not properly initialized from this_dir->override_opts. This prevents\nmaptostorage handlers from inserting additional configuration statements like\nmod_perls \"$r->add_config(['AllowOverride Options'])\". With Apache 2.0.x this\nhas worked but has ceased to since 2.2.0 because opts.override_opts is by chance 0.\n\nThis simple patch cures the problem:\n\n--- server/request.c~   2007-03-11 17:20:25.000000000 +0100\n+++ server/request.c    2007-03-11 17:50:01.000000000 +0100\n@@ -631,6 +631,7 @@\n         opts.add = this_dir->opts_add;\n         opts.remove = this_dir->opts_remove;\n         opts.override = this_dir->override;\n+        opts.override_opts = this_dir->override_opts;\n\n         /* Set aside path_info to merge back onto path_info later.\n          * If r->filename is a directory, we must remerge the path_info,", "id": 100334, "time": "2007-03-13T01:07:13Z", "creator": "torsten.foertsch@gmx.net", "creation_time": "2007-03-13T01:07:13Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "torsten.foertsch@gmx.net", "attachment_id": 19700, "text": "Created attachment 19700\nit initializes opts.override_opts properly", "id": 100335, "time": "2007-03-13T01:10:00Z", "bug_id": 41829, "creation_time": "2007-03-13T01:10:00Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 41829, "text": "Fixed as revision 522011, see\n\nhttp://svn.apache.org/viewvc?view=rev&revision=522011", "id": 100963, "time": "2007-03-26T09:25:29Z", "creator": "torsten.foertsch@gmx.net", "creation_time": "2007-03-26T09:25:29Z", "is_private": false, "attachment_id": null}]