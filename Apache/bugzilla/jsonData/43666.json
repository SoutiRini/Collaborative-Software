[{"attachment_id": null, "tags": [], "creator": "g_sauthoff@web.de", "is_private": false, "count": 0, "id": 109516, "time": "2007-10-20T12:57:12Z", "bug_id": 43666, "creation_time": "2007-10-20T12:57:12Z", "text": "Hi,\n\nI have a working Apache 2 setup and Apache calls successfully the\ncgi-scripts. The problem is, that for every successfull CGI-call I get a\n'client denied by server configuration' error message into the error.log\nfile.\n\nThis message conflicts with the fact, that the CGI-call was executed\nsuccessfully and I saw the correct output in the Web browser.\n\nI am basically using a '/ Deny all' policy and a ScriptAlias definition.\n\nA minimal working example which reproduces the error follows at the end of the \nreport.\n\nAnalysis:\nI debugged this issue a bit and it:\n- check_dir_access() is called two times for every cgi request\n- the 2nd check_dir_access() call actually prints the 'client denied' error \nmessage\n=> the cause is server/util_script.c:ap_add_cgi_vars()\n   - to construct PATH_TRANSLATED ap_sub_req_lookup_uri() is called and as a \nresult a few frames later check_dir_access() is called\n\nConclusion:\nWell, the problems with this wrong error messages are:\n1. it makes no sense, because the cgi-script don't use apaches access control \nmechanism\n2. such wrong messages hide real error messages\n\nMinimal working example:\nNameVirtualHost *\n<VirtualHost *>\n  DocumentRoot /var/www/\n\n  <Directory />\n    Options -FollowSymLinks -Indexes -Includes -ExecCgi\n    AllowOverride None\n    Order Deny,Allow\n    Deny from all\n  </Directory>\n\n  ScriptAlias /project /var/www/project/cgi-bin/test.cgi\n  <Directory /var/www/project/cgi-bin>\n    SetHandler cgi-script\n    Options +ExecCGI\n    Order Deny,Allow\n    Allow from all\n  </Directory>\n</VirtualHost>\n\n# cat test.cgi\n#!/bin/sh\n\ncat out.min\n\n# cat out.min\nContent-Type: text/html; charset=utf-8\nStatus: 200 OK\n\n<HTML>\n<HEAD></HEAD><BODY><H1>HELLO WORLD!</H1></BODY></HTML>\n\n# curl http://127.0.0.1/project/bar\n<HTML>\n<HEAD></HEAD><BODY><H1>HELLO WORLD!</H1></BODY></HTML>\n\nError message in error.log:\n[error] [client 127.0.0.1] client denied by server configuration: /var/www/bar\n\nBefore the debugging the problem with gdb I discussed it two months ago at the \napache user mailing list:\nhttp://thread.gmane.org/gmane.comp.apache.user/70767/focus=70804\n(at that time nobody could identify the cause for this wrong error messages)\n\nBest regards\nGeorg Sauthoff"}, {"count": 1, "tags": [], "bug_id": 43666, "attachment_id": null, "id": 124737, "time": "2009-02-09T09:56:11Z", "creator": "jerrocks@gmail.com", "creation_time": "2009-02-09T09:56:11Z", "is_private": false, "text": "I see this issue on Windows 2003, Windows 2008 and Mac 10.5.6 running Apache 2.2."}, {"count": 2, "tags": [], "text": "Looks like this is alive on \n\nRed Hat Enterprise Linux Server release 5.5\n\nwith \n\nhttpd-2.2.3-43.el5", "is_private": false, "bug_id": 43666, "id": 138380, "time": "2010-07-13T07:26:39Z", "creator": "bughunt@gluino.name", "creation_time": "2010-07-13T07:26:39Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "I also see this problem in SLES11 SP2 (Apache 2.2.12):\nI wrote a Perl CGI script that uses path info heavily to select the function to dispatch (virtually encoding the function to perform in the URI). In combination with ScriptAlias I call functions like http://vserver.domain.org/topic/session/function/transaction/step where http://vserver.domain.org/topic is a ScriptAlias to /srv/www/cgi-bin/freaky.pl\nSo freaky.pl processes parameters like \"/session/function/transaction/step\". I verified (in the browser) that freaky.pl creates hyperlinks like http://vserver.domain.org/topic/session/function2/transaction2/step2, and those hyperlinks _work_ (i.e. the function is performed with the proper URI).\n\nUnfortunately at the same time Apache logs an _error_ like this:\nclient denied by server configuration: /srv/www/vserver/session, referrer http://vserver.domain.org/topic/session/function/transaction/step\n\nSo I guess Apache gets somewhat confused. I'd like to see this problem fixed, or at least to be presented a work-around.", "attachment_id": null, "bug_id": 43666, "id": 170768, "time": "2013-10-23T13:52:43Z", "creator": "Ulrich.Windl@rz.uni-regensburg.de", "creation_time": "2013-10-23T13:52:43Z", "is_private": false}]