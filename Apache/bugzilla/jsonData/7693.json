[{"count": 0, "attachment_id": null, "creator": "kevinj@develop.com", "is_private": false, "id": 12709, "time": "2002-04-02T19:56:41Z", "bug_id": 7693, "creation_time": "2002-04-02T19:56:41Z", "tags": [], "text": "I've been using TC4 for a while now. I'm using the MS SQL Server JDBC drivers \n(and have been for a while), and install them as a resource in TC using the \nTyrex JNDI implementation. In TC 4.0.3 everything works fine, however in TC \n4.0.4 (b1 and b2) I get exceptions. \n\nI simply doing the following\n\nctx = new javax.naming.InitialContext();\nds = (javax.sql.DataSource)ctx.lookup(\"java:comp/env/jdbc/WhitePages\");\nconn = ds.getConnection();\nconn.setAutoCommit(false);        \n\nand I get this exception\n\njava.sql.SQLException: Commit not supported in enlisted connections.\n   at tyrex.jdbc.EnlistedConnection.commit(EnlistedConnection.java:154)\n   at com.develop.ewebjava.lab.GetPessimistic.doGet(GetPessimistic.java:60)\n\nIf I look at the class returned through getConnection I get this hierarchy\n\ntyrex.jdbc.EnlistedConnection\ntyrex.jdbc.AbstractTyrexConnectionImpl\njava.lang.Object\n\nand for the interface hierarchy\n\njava.sql.Connection\ntyrex.tm.EnlistedResource\n\n\nIf I run the same code in TC 4.03 then it all works fine and the class \nhierarchy looks like this\n\ncom.microsoft.jdbc.sqlserver.SQLServerConnection\ncom.microsoft.jdbc.base.BaseConnection\njava.lang.Object\n\nso it looks like Tyrex (in TC 4.0.4) is wrapping the JDBC connection with its \nown class. There is no change to the tyrex.jar file, however the \nTyrexDataSourceFactory and TyrexTransactionFactory classes in TC/lib/naming-\nfactory.jar have changed.\n\nThanks,\n\nKevin Jones"}, {"count": 1, "tags": [], "text": "The changes to the Tyrex resource factory introduced in the 4.0.4 release will\nbe reverted.\n\n*** This bug has been marked as a duplicate of 6999 ***", "is_private": false, "id": 12828, "creator": "remm@apache.org", "time": "2002-04-04T21:46:49Z", "bug_id": 7693, "creation_time": "2002-04-04T21:46:49Z", "attachment_id": null}]