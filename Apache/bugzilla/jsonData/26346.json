[{"count": 0, "tags": [], "creator": "bugs@healthnet.es", "attachment_id": null, "text": "Calling getParameter produces NullPointerException in some cases when the \nrequested parameter was a radio button on a very long form (107 kB). In some \ncases, the problem appears only when the button is unchecked, in others the \nexception appears in both cases.\n\nUser agent is Internet Explorer 6.0SP1 fully updated.\n\nThe stack trace is always the same:\n\njava.lang.NullPointerException\n\tat java.util.Hashtable.get(Hashtable.java:333)\n\tat org.apache.tomcat.util.http.Parameters.getParameterValues\n(Parameters.java:231)\n\tat org.apache.coyote.tomcat5.CoyoteRequest.getParameterValues\n(CoyoteRequest.java:1131)\n\tat org.apache.coyote.tomcat5.CoyoteRequestFacade.getParameterValues\n(CoyoteRequestFacade.java:332)\n\tat info.informatica.html.FormField.setValue(FormField.java:204)\n\tat info.informatica.www.HttpDataEntryForm.setValues\n(HttpDataEntryForm.java:123)\n\tat info.informatica.servlet.form.FormServlet.fillForm\n(FormServlet.java:526)\n\tat info.informatica.servlet.form.FormServlet.doPost\n(FormServlet.java:481)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:763)\n\tat info.informatica.servlet.BaseServlet.service(BaseServlet.java:201)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:284)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:204)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardContextValve.invokeInternal\n(StandardContextValve.java:245)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:199)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:594)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:195)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:164)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:156)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:972)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:211)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:805)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:696)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:605)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:677)\n\tat java.lang.Thread.run(Thread.java:534)", "id": 50972, "time": "2004-01-22T13:33:08Z", "bug_id": 26346, "creation_time": "2004-01-22T13:33:08Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 26346, "attachment_id": null, "text": "Nice report. Actually, it seems the name you gave is null.", "id": 50974, "time": "2004-01-22T14:48:31Z", "creator": "remm@apache.org", "creation_time": "2004-01-22T14:48:31Z", "is_private": false}, {"count": 2, "text": "Actually, the parameter names are not null, but have names \nlike \"sex\", \"status\", etc. And, as mentioned in the bug description, only \nhappens with radio buttons on a large form. I made a lot of combinations with \nthe form, but always got the same stack trace.\n\nAccording to Servlet spec, I do not expect a NullPointerException when \nrequesting a parameter which, certainly, has a name. Therefore, this is a bug.\n\nI do keep investigating it, meanwhile if someone figures out what could be \nhappening any suggestion would be welcome.\n", "bug_id": 26346, "attachment_id": null, "id": 50981, "time": "2004-01-22T16:54:15Z", "creator": "bugs@healthnet.es", "creation_time": "2004-01-22T16:54:15Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 26346, "text": "Is this a GET request? Are you passing too much information via the request\nline? Does this happen with POST requests?", "id": 50982, "time": "2004-01-22T17:01:50Z", "creator": "funkman@joedog.org", "creation_time": "2004-01-22T17:01:50Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 26346, "text": "Look at the getParameterValues code (line 231 is marked):\n\n    public String[] getParameterValues(String name) {\n\thandleQueryParameters();\n\t// sub-request\n\tif( currentChild!=null ) {\n\t    currentChild.merge();\n\t    return (String[])currentChild.paramHashStringArray.get(name);\n\t}\n\n\t// no \"facade\"\n>>>>\tString values[]=(String[])paramHashStringArray.get(name);\n\treturn values;\n    }\n\nAnd line 333 in Hashtable (assuming you're using JDK 1.4.2):\n\n    public synchronized Object get(Object key) {\n\tEntry tab[] = table;\n>>>>\tint hash = key.hashCode();\n\tint index = (hash & 0x7FFFFFFF) % tab.length;\n\tfor (Entry e = tab[index] ; e != null ; e = e.next) {\n\t    if ((e.hash == hash) && e.key.equals(key)) {\n\t\treturn e.value;\n\t    }\n\t}\n\treturn null;\n    }\n\nI recommend you don't bother reopening this bug ;) ", "id": 50983, "time": "2004-01-22T17:02:09Z", "creator": "remm@apache.org", "creation_time": "2004-01-22T17:02:09Z", "is_private": false, "attachment_id": null}]