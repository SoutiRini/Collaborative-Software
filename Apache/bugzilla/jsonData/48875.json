[{"count": 0, "tags": [], "bug_id": 48875, "text": "When you login as\nlogin: test\npass: test@\n\n...apache selects first VirtualHost but is should select second VirtualHost by user (test).\n\n## ftpd.conf\n\n<IfModule mod_log_config.c>\n LogFormat    \"%u [%a] %r\" command_log_fmt\n LogFormat    \"%{%b %e %H:%M:%S %Y}t %T %a %B %U %M %F %d %W %u %S %Z %Y\" transfer_log_fmt\n</IfModule>\n\nListen 21\n\nFTPOptions NoUTF8Feature VirtualHostByUser\n\nNameVirtualHost *:21\n\n<VirtualHost *:21>\n FTP On\n ServerName goorol@127.0.0.1\n DocumentRoot \"c:/ftpdocs/goorol\"\n <Directory \"c:/ftpdocs/goorol\">\n     AuthType basic\n     AuthUserFile \"conf/htpasswd_goorol.users\"\n     AuthName \"FTP Authentication\"\n     require valid-user\n     Allow from all\n </Directory>\n</VirtualHost>\n\n<VirtualHost *:21>\n FTP On\n ServerName test@127.0.0.1\n DocumentRoot \"c:/ftpdocs/test\"\n <Directory \"c:/ftpdocs/test\">\n     AuthType basic\n     AuthUserFile \"conf/htpasswd_test.users\"\n     AuthName \"FTP Authentication\"\n     require valid-user\n     Allow from all\n </Directory>\n</VirtualHost>\n\n\n##htpasswd_goorol.users\ngoorol:goorol@\n\n\n##htpasswd_test.users\ntest:test@", "id": 135182, "attachment_id": null, "creator": "bugzilla33@gmail.com", "creation_time": "2010-03-09T10:58:08Z", "time": "2010-03-09T10:58:08Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bugzilla33@gmail.com", "is_private": false, "text": "Created attachment 25107\nftpd.conf", "id": 135183, "time": "2010-03-09T10:59:20Z", "bug_id": 48875, "creation_time": "2010-03-09T10:59:20Z", "attachment_id": 25107}, {"count": 2, "tags": [], "creator": "bugzilla33@gmail.com", "text": "Created attachment 25108\nhtpasswd_goorol.users", "id": 135184, "time": "2010-03-09T11:00:09Z", "bug_id": 48875, "creation_time": "2010-03-09T11:00:09Z", "is_private": false, "attachment_id": 25108}, {"attachment_id": 25109, "tags": [], "bug_id": 48875, "text": "Created attachment 25109\nhtpasswd_test.users", "count": 3, "id": 135185, "time": "2010-03-09T11:00:25Z", "creator": "bugzilla33@gmail.com", "creation_time": "2010-03-09T11:00:25Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 48875, "attachment_id": null, "is_private": false, "id": 140570, "time": "2010-10-07T15:48:45Z", "creator": "wrowe@apache.org", "creation_time": "2010-10-07T15:48:45Z", "text": "This is not how VirtualHostByUser behaves, this is an invalid config.  You\nmust use a unique 'hostname' as the ServerName, where user@hostname will\nparse the ServerName's and ServerAlias's to determine which host the user\nis logging into.  You are trying to vary hosts by the users' own name (both\nat the same hostname) and this is absolutely not supported.\n\nVirtualHostByUser\n\n    When the user presents a USER {user@hostname} command, select a VirtualHost by the \"hostname\" text of the provided name. The NameVirtualHost must be configured appropriately to match these hosts. If no named virtual host matches by its ServerName or any of its ServerAliass, the login falls into the first matching VirtualHost by IP, just as HTTP treats an unmatched Host: header.\n\n\nStripHostname\n\n    When the user presents a USER {user@hostname} command, strip the \"@hostname\" text from the provided name before presenting \"user\" to the authentication modules. Most commonly used in conjunction with the VirtualHostByUser option below."}]