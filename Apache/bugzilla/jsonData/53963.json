[{"count": 0, "tags": [], "creator": "charlie.barkin@gmail.com", "is_private": false, "text": "Created attachment 29445\nnecessary files to reproduce the problem in zip arch\n\nI have a site with gzipped css files. They are given to the client, depending on Accept-encoding header. \n\n> cat .htaccess    \nRewriteEngine On\nRewriteBase /\n\n> cat css/.htaccess \nRewriteEngine On\n### RewriteBase /css/\nRewriteCond %{HTTP:Accept-encoding} gzip\nRewriteCond %{REQUEST_FILENAME}.gz -f\nRewriteRule ^(.*)$ $1.gz [QSA,L]\n\n> ls -a css/\n.htaccess site.css site.css.gz\n\nAfter update from 2.2.22 to 2.2.23 this mechanism has broken.\n\nTest case in attachment. Test URL: http://charlie.aha.ru/css/site.css\nI got error \"The requested URL /site.css.gz was not found on this server.\" instead of  css/site.css.gz file content. Note the string \"URL /site.css.gz\" - looks like apache missing directory \"css\" from the path.\n\nIf I remove \"RewriteBase /\" from parent .htaccess, I get gzipped css file. Or, if I add string \"RewriteBase /css/\" into ./css/.htaccess, I get gzipped css file. So it looks like \"RewriteBase /\" is inherited now from top .htaccess.\n\nWhen I did rollback to 2.2.22 everything became ok.\n\nIs it bug or is it feature?", "id": 162552, "time": "2012-10-04T11:07:52Z", "bug_id": 53963, "creation_time": "2012-10-04T11:07:52Z", "attachment_id": 29445}, {"count": 1, "tags": [], "bug_id": 53963, "attachment_id": null, "is_private": false, "id": 162561, "time": "2012-10-04T13:30:40Z", "creator": "charlie.barkin@gmail.com", "creation_time": "2012-10-04T13:30:40Z", "text": "By the way.. I have reports from Joomla users with  SEO enabled. Links oh these sites becomes dead, with \"RewriteBase /\" string in the .htaccess"}, {"count": 2, "tags": [], "text": "This is via http://svn.apache.org/viewvc?view=revision&amp;revision=1032431 which got wrapped up in a backport for a followon to another regression.", "attachment_id": null, "id": 162569, "creator": "covener@gmail.com", "time": "2012-10-04T16:29:13Z", "bug_id": 53963, "creation_time": "2012-10-04T16:29:13Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 53963, "attachment_id": null, "id": 165317, "time": "2013-02-18T20:52:39Z", "creator": "wrowe@apache.org", "creation_time": "2013-02-18T20:52:39Z", "is_private": false, "text": "Charlie,\n\nhttp://people.apache.org/~rjung/patches/rewriteoption-mergebase-2_2.patch\n\nshould be the fix to the bug you observed.  We are just about rolling 2.2.24 \ntoday when the 'fix was fixed', so I'm wondering if you have time to confirm \nthe fix right away?"}, {"count": 4, "tags": [], "bug_id": 53963, "attachment_id": null, "is_private": false, "id": 165319, "time": "2013-02-18T21:15:26Z", "creator": "charlie.barkin@gmail.com", "creation_time": "2013-02-18T21:15:26Z", "text": "yes, I confirmed that patch fixes the bug. I've  tested this patch on apache 2.2.23 about two days, everything works fine."}, {"count": 5, "tags": [], "bug_id": 53963, "attachment_id": null, "id": 165321, "time": "2013-02-18T21:29:07Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2013-02-18T21:29:07Z", "is_private": false, "text": "Sorry, but one more question: the patch as referred to above was only produced today. I assume you tested the previous version which was committed to 2.4 before today:\n\nhttp://svn.apache.org/viewvc?view=revision&revision=1418954\n\nAny chance you can do a quick test for the final patch\n\nhttp://people.apache.org/~rjung/patches/rewriteoption-mergebase-2_2.patch\n\nThe difference is: if the RewriteOption MergeBase is *not* set, then the old patch will not allow to set a RewriteBase in a sub directory (it will be ignored). The newer one allows to set one, it does only inhibit the inheritance if none is set explicitly.\n\nThanks!\n\nRainer"}, {"count": 6, "tags": [], "bug_id": 53963, "attachment_id": null, "is_private": false, "id": 165323, "time": "2013-02-18T21:58:21Z", "creator": "charlie.barkin@gmail.com", "creation_time": "2013-02-18T21:58:21Z", "text": "I've been noticed some weeks ago by bugzilla,  what PR 53963 was fixed in trunk, and made patch for 2.2.23 using this revision:\n\nhttp://svn.apache.org/viewvc/httpd/httpd/trunk/modules/mappers/mod_rewrite.c?r1=1369999&r2=1410681  - it is replica of revision 1418954 regarding to changes in mod_rewrite.c\n\nAfter testing it I've found bug in that fix, found  how to fix it and emailed to Eric Covener about it. Today's 'fix for fix' (http://svn.apache.org/viewvc?diff_format=h&view=revision&revision=1447448) was contributed by me (Evgeny Barsukov) :)\n\nSo, my patch for mod_rewrite.c is exactly looks like rewriteoption-mergebase-2_2.patch:\nhttp://charlie.aha.ru/patch-modules-mappers_mod_rewrite.c"}, {"count": 7, "tags": [], "bug_id": 53963, "attachment_id": null, "id": 165324, "time": "2013-02-18T22:15:50Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2013-02-18T22:15:50Z", "is_private": false, "text": "Great, thanks for the explanation.\nSo we are good to go :)"}, {"count": 8, "tags": [], "creator": "sf@sfritsch.de", "is_private": false, "text": "Fixed in 2.2.24 and 2.4.4", "id": 165600, "time": "2013-03-03T16:41:21Z", "bug_id": 53963, "creation_time": "2013-03-03T16:41:21Z", "attachment_id": null}]