[{"count": 0, "tags": [], "bug_id": 49401, "attachment_id": null, "id": 137425, "time": "2010-06-08T03:39:22Z", "creator": "cedrik.lime@gmail.com", "creation_time": "2010-06-08T03:39:22Z", "is_private": false, "text": "Since Tomcat 5.5.13, static fields are set to null when undeploying a webapp (controlled via the org.apache.catalina.loader. WebappClassLoader.ENABLE_CLEAR_REFERENCES system property).\n\nWhen shutting down the container, this null-setting process is useless since the whole JVM will be unloaded anyway. Bypassing said code in this case would both speed up the shutdown and (as a bonus ^^) avoid spurious Log4J messages in the console."}, {"count": 1, "tags": [], "bug_id": 49401, "attachment_id": null, "text": "The code runs on context stop. Differentiating between a context stop and a container stop is going to be tricky and likely to add more complexity than benefit gained.\n\nFor a well behaved web application (that doesn't leak memory on reload) on a recent JVM there should be no problems with setting:\nWebappClassLoader.ENABLE_CLEAR_REFERENCES=false", "id": 138412, "time": "2010-07-14T03:07:48Z", "creator": "markt@apache.org", "creation_time": "2010-07-14T03:07:48Z", "is_private": false}]