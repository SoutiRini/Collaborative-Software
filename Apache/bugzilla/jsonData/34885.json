[{"count": 0, "tags": [], "creator": "chip@force-elite.com", "text": "When using a RewriteRule that matches the root, mod_cache will always serve the\ncached version, and RewriteRule is never applied.  The RewriteRule is correctly\napplied for _any_ location bellow /. (eg, /index.html or /css/).\n\nMinimal Config Example:\n<VirtualHost *:80>\nServerName foo.example.com\nCacheEnable disk /\nCacheRoot /tmp/cacheroot\nCacheDirLevels 5\nCacheDirLength 3\nRewriteEngine On\n# Some RewriteCond go here in real life.\nRewriteRule /(.+) http://www.mozilla.org/products/firefox/upgrade/ [R=302,L]\n</VirtualHost>\n\nmod_cache.c used to have this code:\n    /* DECLINE urls ending in / ??? EGP: why? */\n    if (url[urllen-1] == '/') {\n        return DECLINED;\n    }\n\nIt seems that locations ending in / work correctly, (eg /css/), but only the\nroot / does not operate correctly.", "id": 74767, "time": "2005-05-12T07:51:49Z", "bug_id": 34885, "creation_time": "2005-05-12T07:51:49Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "chip@force-elite.com", "attachment_id": null, "id": 74768, "time": "2005-05-12T08:15:58Z", "bug_id": 34885, "creation_time": "2005-05-12T08:15:58Z", "is_private": false, "text": "Sorry for the noise, this is a mod_rewrite misconfiguration. It works correctly\nin both 2.1.3 and 2.1.5-dev."}, {"count": 2, "tags": [], "bug_id": 34885, "attachment_id": null, "text": "Okay, this is a valid bug.  The original post did have a misconfiguration of\nmod_rewrite, but using this rewriteRule:\nRewriteRule .* http://www.mozilla.org/products/firefox/upgrade/ [R=302,L]\n\nIt will fail.\n\nBut, Now I know the cause. What made this hard to figure out is, it would work,\nsometimes, but not at others.  The cause of this is that once mod_cache has\ncached the / without the RewriteRule, it will serve it until the cached version\ntimes out.  Once it times out, its operates correctly, since the 302 doesn't get\ncached.\n", "id": 74772, "time": "2005-05-12T08:48:49Z", "creator": "chip@force-elite.com", "creation_time": "2005-05-12T08:48:49Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 34885, "attachment_id": null, "text": "wouldn't that break the conditional rewrite?  (i.e. the first time someone comes\nin with a browser that doesn't match the condition and gets served the real\npage, it'll cache it again?)", "id": 74778, "time": "2005-05-12T09:09:32Z", "creator": "justdave@mozilla.com", "creation_time": "2005-05-12T09:09:32Z", "is_private": false}, {"count": 4, "tags": [], "creator": "chip@force-elite.com", "attachment_id": 15007, "id": 74779, "time": "2005-05-12T10:31:29Z", "bug_id": 34885, "creation_time": "2005-05-12T10:31:29Z", "is_private": false, "text": "Created attachment 15007\nPatch to optionally run mod_cache as a normal handler.\n\nAttaching proposed patch. Also sent to dev@httpd list."}, {"text": "Created attachment 15130\nAdds a 'quick', 'normal' or 'both' option to CacheEnable.\n\nThis patch allows you to select when mod_cache is run.", "tags": [], "bug_id": 34885, "attachment_id": 15130, "count": 5, "id": 75210, "time": "2005-05-23T09:34:04Z", "creator": "chip@force-elite.com", "creation_time": "2005-05-23T09:34:04Z", "is_private": false}, {"count": 6, "tags": [], "creator": "chip@force-elite.com", "text": "*** Bug 35016 has been marked as a duplicate of this bug. ***", "id": 75212, "time": "2005-05-23T09:35:42Z", "bug_id": 34885, "creation_time": "2005-05-23T09:35:42Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 34885, "attachment_id": 15150, "is_private": false, "id": 75287, "time": "2005-05-24T21:35:32Z", "creator": "ruediger.pluem@vodafone.com", "creation_time": "2005-05-24T21:35:32Z", "text": "Created attachment 15150\nPatch against 2.0.54 of the trunk patch from 2005-05-23 09:34\n\nA convenience backport patch against 2.0.54. Tested by the reporter of the\nduplicate bug 35016 Felix Enning."}, {"count": 8, "tags": [], "creator": "terry@permeance.com.au", "attachment_id": null, "id": 106082, "time": "2007-07-30T19:48:40Z", "bug_id": 34885, "creation_time": "2007-07-30T19:48:40Z", "is_private": false, "text": "We have successfully applied this patch to httpd 2.0.59."}, {"count": 9, "tags": [], "creator": "minfrin@sharp.fm", "attachment_id": null, "id": 130844, "time": "2009-10-03T08:38:49Z", "bug_id": 34885, "creation_time": "2009-10-03T08:38:49Z", "is_private": false, "text": "Functionality added with the CacheQuickHandler directive."}]