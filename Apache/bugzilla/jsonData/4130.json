[{"count": 0, "tags": [], "bug_id": 4130, "attachment_id": null, "id": 6648, "time": "2001-10-12T13:28:43Z", "creator": "gmarcy@us.ibm.com", "creation_time": "2001-10-12T13:28:43Z", "is_private": false, "text": "At the end of NamespaceSupport.Context.processName(...) is the code:\n\n            table.put(name[2], name);\n            tablesDirty = true;\n            return name;\n\nHowever, if the tables are still shared with our \"parent context\" the call to \ntable.put(...) will corrupt that context.  The code should be as follows:\n\n            if (!tablesDirty) {\n                copyTables();\n            }\n            table.put(name[2], name);\n            return name;\n\nNote: copyTables() sets tablesDirty to true.\n\nAs an aside, there is a pair of typos at the beginning of the same method.  The \nattribute names are stored in the elementNameTable and the element names are \nstored in the attributeNameTable.  This isn't a problem in practice since the \ntables are only references for this purpose in this single location, but it sure \nwas confusing while looking at this in the debugger !!  :-)  It would be nice to \nchange:\n\n            if (isAttribute) {\n                table = elementNameTable;\n            } else {\n                table = attributeNameTable;\n            }\n\nto:\n\n            if (isAttribute) {\n                table = attributeNameTable;\n            } else {\n                table = elementNameTable;\n            }"}, {"count": 1, "tags": [], "text": "Please file SAX problems at the SAX site, so they get\nappropriate attention.\n\n    http://sax.sourceforge.net\n\n=========================================================\nWhat I see here is one non-bug and a harmless typo.\n\nNon-bug:  the 'tablesDirty' thing.  There's no corruption.\nCorruption would require an ILLEGAL call sequence such as:\n\n     pushContext()            ... tables not dirty, but shared\n     processName()            ... updates name cache\n     declarePrefix ()         ... [ILLEGAL] causes corruption\n\nThe requirement is that all prefixes be declared in a given\ncontext before they are used.  Likewise, that declarations in a\ncontext may never follow a popContext() call.\n\nprocessName() can actually ignore the \"tablesDirty\" flag; it's\na misleading name.  The flag remembers whether declarations\nhave been seen, so that contexts can share state (including\nthe name cache used by processName) unless they're prevented\n(because at least one declaration was seen, creating a new\nlexical scope).  By the time processName() is called, the\nvalue of that flag is irrelevant.  (But another flag might\nbe relevant:  one saying if further declarations are OK.)\n\nHarmless typo:  the element and attribute tables are switched\n(consistently).  The sax2r2 release will have that fixed, thanks!\n\n- David Brownell (dbrownell@users.sourceforge.net)\n     \n\n", "attachment_id": null, "id": 6851, "creator": "dbrownell@users.sourceforge.net", "time": "2001-10-18T14:08:15Z", "bug_id": 4130, "creation_time": "2001-10-18T14:08:15Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 4130, "attachment_id": null, "id": 6853, "time": "2001-10-18T15:21:05Z", "creator": "gmarcy@us.ibm.com", "creation_time": "2001-10-18T15:21:05Z", "is_private": false, "text": "\n>Please file SAX problems at the SAX site, so they get\n>appropriate attention.\n\nActually I did once I heard that there was such a thing\nearlier today.  It is bug #472553.\n\n>The requirement is that all prefixes be declared in a given\n>context before they are used.\n\nThanks for the clarification.  It is interesting that this\ncall sequence ordering was never documented before (I notice\nthat it is now documented at SourceForge).  Glad to find that\nthis didn't turn out to be a problem in the code, just some\nmissing documentation... much easier to test that way !!\n"}, {"count": 3, "attachment_id": null, "bug_id": 4130, "text": "Actually I believe the call sequence was always documented,\nbut it was easy to miss.  Regardless, it's not easy to miss\nany longer!  :)\n\nClosing this bug would seem to involve syncing with the\ncurrent SAX release, to get that documentation ...\n\n", "id": 6918, "time": "2001-10-19T15:14:55Z", "creator": "dbrownell@users.sourceforge.net", "creation_time": "2001-10-19T15:14:55Z", "tags": [], "is_private": false}]