[{"count": 0, "tags": [], "bug_id": 55599, "text": "Whenever I set disableProxyCaching=\"false\" for NonLoginAuthenticator on Tomcat context.xml, the Manager starts to refuse connections with 403 http errors.\n\nThe only way to use the Manager is to remove the NonLoginAuthenticator configuration.\n\nBellow the line in the context.xml file with the configuration that starts the problem.\n\n<Valve className=\"org.apache.catalina.authenticator.NonLoginAuthenticator\"\n       disableProxyCaching=\"false\" />", "id": 170286, "time": "2013-09-26T14:57:55Z", "creator": "matafagafo@yahoo.com", "creation_time": "2013-09-26T14:57:55Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Given that the manager requires users to be authenticated, a 403 response seems entirely reasonable.\n\nIt isn't clear what you aretrying to achieve by configuring the NonLoginAuthenticator, nor where you doing this (context.xml is not specific enough). Either way, the users list is the place to go to seek further help.", "id": 170287, "time": "2013-09-26T15:03:32Z", "bug_id": 55599, "creation_time": "2013-09-26T15:03:32Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 55599, "attachment_id": null, "id": 170290, "time": "2013-09-26T17:54:48Z", "creator": "matafagafo@yahoo.com", "creation_time": "2013-09-26T17:54:48Z", "is_private": false, "text": "(In reply to Mark Thomas from comment #1)\n> Given that the manager requires users to be authenticated, a 403 response\n> seems entirely reasonable.\n> \n> It isn't clear what you aretrying to achieve by configuring the\n> NonLoginAuthenticator, nor where you doing this (context.xml is not specific\n> enough). Either way, the users list is the place to go to seek further help.\n\nLet me explain.\nMy application needs to be accessed thru SSL, so I configured a \"Protected Context\" for it in Tomcat web.xml file, as You can se bellow\n\n    <security-constraint>\n        <web-resource-collection>\n            <web-resource-name>Protected Context</web-resource-name>\n            <url-pattern>/*</url-pattern>\n        </web-resource-collection>\n        <!-- auth-constraint goes here if you requre authentication -->\n        <user-data-constraint>\n            <transport-guarantee>CONFIDENTIAL</transport-guarantee>\n        </user-data-constraint>\n    </security-constraint>\n\nIt worked, but as a side effect Tomcat started to set \"Cache-Control\" HTTP header in responses as \"private\". With this my application stop to use browsers local cache.\n\nTo solve this I configured NonLoginAuthenticator disableProxyCaching=\"false\" in Tomcat context.xml and the \"Cache-Control: private\" problem is solved.\nBut with this config I can't access Tomcat Manager anymore !\n\nBecause of this I filed this bug, it appears to me that should be a way to access the Manager in this situations."}, {"text": "(In reply to Matafagafo from comment #2)\n> Let me explain.\n\nWhat part of taking this up on the users' mailing list was not clear?", "tags": [], "creator": "chuck.caldarale@unisys.com", "attachment_id": null, "count": 3, "id": 170292, "time": "2013-09-26T17:57:01Z", "bug_id": 55599, "creation_time": "2013-09-26T17:57:01Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 55599, "attachment_id": null, "id": 170293, "time": "2013-09-26T18:05:54Z", "creator": "matafagafo@yahoo.com", "creation_time": "2013-09-26T18:05:54Z", "is_private": false, "text": "(In reply to Chuck Caldarale from comment #3)\n> (In reply to Matafagafo from comment #2)\n> > Let me explain.\n> \n> What part of taking this up on the users' mailing list was not clear?\n\nOf course that was....\n\nAnd the part in which YOU sad \n\n> It isn't clear what you aretrying to achieve by configuring the\n> NonLoginAuthenticator, nor where you doing this (context.xml is not specific\n> enough)\n\n!"}]