[{"count": 0, "attachment_id": null, "bug_id": 58610, "text": "We are migrating Tomcat6, java 6 and Oracle 10g web-applications to Tomcat 8, Java 8 and Oracle 10g. Our applications working fine after migrated, but initial connections (initialSize=\"5\") available in connection pool not released after Tomcat shut down. When second time starting tomcat, its creating 5 more initial connections to pool. I am using below resource configuration in server.xml\n\n<Resource name=\"TestAppDataSource\" auth=\"Container\"\n    factory=\"org.apache.tomcat.jdbc.pool.DataSourceFactory\"\n    type=\"javax.sql.DataSource\" driverClassName=\"oracle.jdbc.OracleDriver\"\n    initialSize=\"5\" maxActive=\"40\" maxIdle=\"40\" minIdle=\"5\"\n    timeBetweenEvictionRunsMillis=\"30000\" minEvictableIdleTimeMillis=\"30000\"\n    maxWait=\"10000\" testWhileIdle=\"true\" testOnBorrow=\"true\" testOnReturn=\"false\"\n    validationQuery=\"SELECT 1 from dual\" validationInterval=\"30000\" \n    logAbandoned=\"true\" removeAbandonedTimeout=\"30\"\n    removeAbandonedOnBorrow=\"true\" removeAbandonedOnMaintenance=\"true\"\n    suspectTimeout=\"300\" maxAge=\"60000\"\n    url=\"jdbc:oracle:thin:@//IP_ADDRESS:1521/SCHEMA_NAME\"\n    username=\"USER_NAME\" password=\"PASSWORD\"\n/>\nAnd below resource link configuration in application META_INF/context.xml\n\n<ResourceLink\n    name=\"APP_TEST\" global=\"TestAppDataSource\" \n    type=\"javax.sql.DataSource\"\n/>\nI am using ojdbc7.jar for oracle driver. Please help whether i missed any configuration..", "id": 186384, "time": "2015-11-15T09:16:40Z", "creator": "rajakarunanidi@gmail.com", "creation_time": "2015-11-15T09:16:40Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "1983-01-06@gmx.net", "attachment_id": null, "id": 186392, "time": "2015-11-16T11:56:04Z", "bug_id": 58610, "creation_time": "2015-11-16T11:56:04Z", "is_private": false, "text": "Oracle 10g is dead and out of support. Why are you still relying on this?"}, {"count": 2, "tags": [], "bug_id": 58610, "attachment_id": null, "id": 186393, "time": "2015-11-16T12:13:22Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2015-11-16T12:13:22Z", "is_private": false, "text": "Try adding closeMethod=\"close\" to your <Resource>\n\nhttps://tomcat.apache.org/tomcat-8.0-doc/config/globalresources.html#Resource_Definitions"}, {"count": 3, "tags": [], "bug_id": 58610, "attachment_id": null, "text": "Konstantin Kolinko.. you are a life saver for me... Works like a charm...", "id": 186396, "time": "2015-11-16T14:35:30Z", "creator": "rajakarunanidi@gmail.com", "creation_time": "2015-11-16T14:35:30Z", "is_private": false}]