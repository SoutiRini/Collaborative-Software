[{"count": 0, "tags": [], "creator": "vincent.hardy@sun.com", "attachment_id": null, "id": 16940, "time": "2002-05-30T14:47:29Z", "bug_id": 9520, "creation_time": "2002-05-30T14:47:29Z", "is_private": false, "text": "Don,\n\nI am not quite sure why adding the value from getRoot would not work,\nbut I agree this is laborious. Adding a getRoot() method that would\ntake the svg element you want as a parameter would be simpler (this\nway you would not have to stick the getRoot() <svg> element under \nthe Document's root <svg> element or do what you ended up doing.\n\nI have added an RFE for that:\n\n\n\nDon Willems wrote:\n> \n> Yes, that works, thank you Vincent.\n> \n> But I'm afraid that my solution is a bit laborious.\n> \n> // --> old code\n> DOMImplementation domImpl = SVGDOMImplementation.getDOMImplementation();\n> String svgNS = SVGDOMImplementation.SVG_NAMESPACE_URI;\n> Document document = domImpl.createDocument(svgNS, \"svg\", null);\n> SVGGraphics2D svgGenerator = new SVGGraphics2D(document);\n> paintRenderer(svgGenerator); //--> paints shapes on the graphics context\n> Element svgRoot = document.getDocumentElement();\n> svgRoot.setAttributeNS(null, \"width\", \"400\");\n> svgRoot.setAttributeNS(null, \"height\", \"450\");\n> // --> new code\n> // gets the svg elements from the generator\n> Element root = svgGenerator.getRoot();\n> // adds the attributes of the generated node to the root node of the document\n> NamedNodeMap attrs = root.getAttributes();\n> for(int i=0;i<attrs.getLength();i++){\n> Node n = attrs.item(i);\n> svgRoot.setAttributeNS(null, n.getNodeName(), n.getNodeValue());\n> }\n> // adds the subnodes of the generated node to the root node of the document\n> NodeList nl = root.getChildNodes();\n> for(int i=0;i<nl.getLength();i++){\n> Node n = nl.item(i);\n> svgRoot.appendChild(n);\n> }\n> \n> The problem is that I cannot copy the generated svg node into the document. \nI've tried using\n> the methods importNode and appendChild on the document, but none seem to \nwork. So I had to add every subnode and every attribute of the generated node \nexplicitly.\n> Any Ideas?\n> \n> Don\n> \n>      Don,\n> \n>      The SVGGraphics2D does not populate the Document you gave it at\n>      construction time. It is only used as a factory for creating all\n>      the SVG content.\n> \n>      What you'll have to do is get the root from the SVGGraphics2D\n>      (getRoot method) and append it to your 'svgRoot'.\n> \n>      Good luck,\n>      Vincent.\n> \n>      Don Willems wrote:\n> \n>           Hi,\n>           I have a problem with using the setSVGDocument method in \nJSVGCanvas.\n>           The SVG document that I want to render on the JSVGCanvas is \ngenerated by\n>           my program. When I want to render that document nothing seems to \nhappens\n>           (if I use listeners on the canvas I can see that the document is \nbuild,\n>           and then rendered, but nothing is shown on the canvas).\n>           I have tried to render SVG documents from a URI and that works. I \nhave\n>           also tried to save the SVG document generated by my program to a \nfile\n>           and that works also (I can view the SVG perfectly in Adobes \nViewer).\n> \n>           What do I have to do to get the setSVGDocument method to work?\n> \n>           My code:\n> \n>           DOMImplementation domImpl =\n>           SVGDOMImplementation.getDOMImplementation();\n>           String svgNS = SVGDOMImplementation.SVG_NAMESPACE_URI;\n>           Document document = domImpl.createDocument(svgNS, \"svg\",\n>           null);\n>           SVGGraphics2D svgGenerator = new SVGGraphics2D(document);\n>           paintRenderer(svgGenerator); //--> paints shapes on the\n>           graphics context\n>           Element svgRoot = document.getDocumentElement();\n>           svgRoot.setAttributeNS(null, \"width\", \"400\");\n>           svgRoot.setAttributeNS(null, \"height\", \"450\");\n> \n>           setSVGDocument((document);\n> \n>           Many thanks,\n>           Don\n> \n>           \n---------------------------------------------------------------------\n>           To unsubscribe, e-mail: batik-users-unsubscribe@xml.apache.org\n>           For additional commands, e-mail: batik-users-help@xml.apache.org\n> \n>      ---------------------------------------------------------------------\n>      To unsubscribe, e-mail: batik-users-unsubscribe@xml.apache.org\n>      For additional commands, e-mail: batik-users-help@xml.apache.org\n> \n> ----------------------------------------------\n> Don Willems\n> http://www.wonco.org\n> ----------------------------------------------\n> don_willems@mac.com\n> +31 24 388 69 44 (home)\n> +31 6 25 188 497 (mobile)\n> +31 24 35 21 584 (work)\n> ----------------------------------------------"}, {"count": 1, "tags": [], "creator": "vincent.hardy@sun.com", "attachment_id": null, "is_private": false, "id": 17965, "time": "2002-06-18T08:07:22Z", "bug_id": 9520, "creation_time": "2002-06-18T08:07:22Z", "text": "Added a new version of getRoot which takes an SVG element as input.\nSee:\n\nhttp://cvs.apache.org/viewcvs.cgi/*checkout*/xml-batik/sources/org/apache/batik\n/svggen/SVGGraphics2D.java?rev=1.33"}]