[{"count": 0, "tags": [], "bug_id": 27902, "attachment_id": null, "text": "First, I'm going to describe our system:\n\nWe are working with Network Appliance FILER 810c (NetApp DataOnTap Release \n6.4.3 S.O.) storage system, used to store our application data.\n\nOur infrastructure is composed by several machines with a Tomcat installation \n(v4.1.9) and all the application data in our storage system.\n\nOur server.xml is:\n\n<Server port=\"8005\" shutdown=\"SHUTDOWN\" debug=\"0\">\n  <Listener className=\"org.apache.catalina.mbeans.ServerLifecycleListener\"\n            debug=\"0\"/>\n  <Listener \nclassName=\"org.apache.catalina.mbeans.GlobalResourcesLifecycleListener\"\n            debug=\"0\"/>\n  <GlobalNamingResources>\n    <Environment name=\"simpleValue\" type=\"java.lang.Integer\" value=\"30\"/>\n    <Resource name=\"UserDatabase\" auth=\"Container\"\n              type=\"org.apache.catalina.UserDatabase\"\n       description=\"User database that can be updated and saved\">\n    </Resource>\n    <ResourceParams name=\"UserDatabase\">\n      <parameter>\n        <name>factory</name>\n        <value>org.apache.catalina.users.MemoryUserDatabaseFactory</value>\n      </parameter>\n      <parameter>\n        <name>pathname</name>\n        <value>conf/tomcat-users.xml</value>\n      </parameter>\n    </ResourceParams>\n  </GlobalNamingResources>\n\n  <Service name=\"Tomcat-Standalone\">\n    <Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\n\t       port=\"8080\" minProcessors=\"5\" maxProcessors=\"75\"\n               enableLookups=\"true\" redirectPort=\"443\"\n               acceptCount=\"10\" debug=\"0\" connectionTimeout=\"20000\"\n               useURIValidationHack=\"false\" />\n    <Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\n               port=\"8009\" minProcessors=\"5\" maxProcessors=\"75\"\n               enableLookups=\"false\"  acceptCount=\"10\" debug=\"0\" \nconnectionTimeout=\"20000\"\n               useURIValidationHack=\"false\" scheme=\"https\" secure=\"true\" \ntomcatAuthentication=\"false\"\n               protocolHandlerClassName=\"org.apache.jk.server.JkCoyoteHandler\"/>\n\n    <Engine name=\"Standalone\" defaultHost=\"localhost\" debug=\"0\">\n      <Logger className=\"org.apache.catalina.logger.FileLogger\"\n              prefix=\"catalina_log.\" suffix=\".txt\"\n              timestamp=\"true\" directory=\"logs/server\" />\n      <Realm className=\"org.apache.catalina.realm.UserDatabaseRealm\"\n                 debug=\"0\" resourceName=\"UserDatabase\"/>\n\n      <Host name=\"localhost\" debug=\"0\" appBase=\"h:/apps\" unpackWARs=\"true\" \nautoDeploy=\"true\">\n      \n        <Valve className=\"org.apache.catalina.valves.AccessLogValve\"\n                 directory=\"logs/server\"  prefix=\"localhost_access_log.\" \nsuffix=\".txt\"\n                 pattern=\"common\" resolveHosts=\"false\"/>\n        <Logger className=\"org.apache.catalina.logger.FileLogger\"\n                 directory=\"logs/server\"  prefix=\"localhost_log.\" suffix=\".txt\"\n\t        timestamp=\"true\"/>\n        <Logger className=\"org.apache.catalina.logger.FileLogger\"\n                 directory=\"logs/server\"  prefix=\"localhost_admin_log.\" \nsuffix=\".txt\"\n\t        timestamp=\"true\"/>\n       \n        <Context path=\"/jsiom\" docBase=\"jsiom\" debug=\"0\" reloadable=\"true\" />\n      </Host>\n    </Engine>\n  </Service>\n</Server>\n\n\nWe has modified the 'appBase' attribute on the 'Host' tag, to point tomcat to \nour repository of web applications at our storage system named formerly. Note \nthat 'h:/apps' is a network unit on the machine pointing to our file on \n\\\\filer2des.\n\nAnd the problem:\n\nWhen we start Tomcat, everything goes well, but certain time after, Tomcat \nseems to lose its references to libraries stored at the lib directory of the \nwebapp.  And produces this type of error (this is a class in a jar file on the \nlib directory):\n\njava.lang.NoClassDefFoundError: javax/xml/soap/Detail\n\tat org.apache.axis.AxisFault.output(AxisFault.java:317)\n\tat org.apache.axis.SOAPPart.writeTo(SOAPPart.java:262)\n\tat org.apache.axis.SOAPPart.getAsString(SOAPPart.java:472)\n\tat org.apache.axis.SOAPPart.getAsBytes(SOAPPart.java:379)\n\tat org.apache.axis.Message.getContentType(Message.java:400)\n\tat org.apache.axis.transport.http.AxisServlet.doPost\n(AxisServlet.java:721)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n\tat org.apache.axis.transport.http.AxisServletBase.service\n(AxisServletBase.java:335)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat es.siom.framework.controller.filters.EncodingFilter.doFilter\n(EncodingFilter.java:52)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:213)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\t...\n\t\nThis produces a error 500 to the client.\n\nWe had tried it to leave our application context on the local drive at the \nmachine, and with this configuration everything goes well always.  But by our \nrequirements, that is nonviable.", "id": 54563, "time": "2004-03-24T11:57:37Z", "creator": "jatarifa@omel.es", "creation_time": "2004-03-24T11:57:37Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "I do not believe that this is a tomcat problem since the tomcat code is \nexactly the same regardless of where the files actually reside.\n\nMy money is on a network issue of some sort but it might be you NAS or even \nthe JVM.", "id": 67105, "time": "2004-11-18T01:18:01Z", "bug_id": 27902, "creation_time": "2004-11-18T01:18:01Z", "is_private": false, "attachment_id": null}]