[{"count": 0, "attachment_id": null, "creator": "davi@apache.org", "is_private": false, "id": 102622, "time": "2007-04-29T11:58:58Z", "bug_id": 42293, "creation_time": "2007-04-29T11:58:58Z", "tags": [], "text": "Older version (ie: one that comes with Visual Studio 6.0) of the Wincrypt.h header requires _WIN32_WINNT \n>= 0x0400, which is already defined by apr.h (apr.hw)."}, {"count": 1, "tags": [], "creator": "davi@apache.org", "attachment_id": 20069, "text": "Created attachment 20069\nOlder version of the Wincrypt.h header requires _WIN32_WINNT \n\nBuild tested on older and newer (2003) platform SDK", "id": 102623, "time": "2007-04-29T12:00:48Z", "bug_id": 42293, "creation_time": "2007-04-29T12:00:48Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 42293, "text": "Rev 421805 (2006/07/14) changed the sequence of imports in misc/win32/rand.c\n\nhttp://svn.apache.org/viewvc/apr/apr/trunk/misc/win32/rand.c?r1=170461&r2=421805\n\nThe change was mentioned in http://marc.info/?l=apr-dev&m=115285245603323&w=2.  I'm guessing \nit is MinGW related since it mentioned librpcrt4.a.\n\nXi Wang reported a compile failure related to this change in 2006-09-18: http://marc.info/?l=apr-\ndev&m=115856814824660&w=2.  But the connection to the recent change did not seem to be made \nand there did not seem to be any follow through.\n\nI'm seeing the same compile failure on my pretty vanilla VC6 set up (no later platform SDK, etc) on \nWindows 2000.\n\n\np.s.  I have set up a MSYS+MinGW build environment and I can confirm the attached patch (which \nreverts rev 421805) does cause the MSYS+MinGW build to break, but fixing the VC6 build takes \nprecedence.  I plan to research it tomorrow (2007-05-02, US Central DT) and can hopefully come up \nwith a solution that allows both to build. ", "id": 102725, "time": "2007-05-01T23:39:40Z", "creator": "carnold@apache.org", "creation_time": "2007-05-01T23:39:40Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 42293, "is_private": false, "text": "Created attachment 20084\nPlaces wincrypt immediately after apr.h", "id": 102726, "time": "2007-05-02T00:24:52Z", "creator": "carnold@apache.org", "creation_time": "2007-05-02T00:24:52Z", "attachment_id": 20084}, {"count": 4, "tags": [], "bug_id": 42293, "is_private": false, "text": "Something in apr_private.h when preprocessed with the MinGW Windows headers effectively redefines \nWINADVAPI from __stdcall to empty which results in a link failure when wincrypt.h is placed after an \ninclude to apr_private.h.  This patch has been tested both the VC6 (which failed with the current SVN \nHEAD) and MSYS+MinGW (which failed with the first patch).  Have also successfully compiled with VS \n2005.", "id": 102727, "time": "2007-05-02T00:32:35Z", "creator": "carnold@apache.org", "creation_time": "2007-05-02T00:32:35Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "Thanks for tracking this down. It seems related to this bug report:\n\nhttps://sourceforge.net/tracker/?func=detail&atid=302435&aid=1397036&group_id=2435", "is_private": false, "id": 102754, "creator": "davi@apache.org", "time": "2007-05-02T09:47:25Z", "bug_id": 42293, "creation_time": "2007-05-02T09:47:25Z", "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 42293, "is_private": false, "id": 104916, "time": "2007-06-29T10:00:37Z", "creator": "davi@apache.org", "creation_time": "2007-06-29T10:00:37Z", "tags": [], "text": "Committed to trunk as r551958.\n\nhttp://svn.apache.org/viewvc?view=rev&revision=551958"}, {"count": 7, "tags": [], "text": "Backported as r551959.\n\nhttp://svn.apache.org/viewvc?view=rev&revision=551959", "is_private": false, "id": 104917, "creator": "davi@apache.org", "time": "2007-06-29T10:06:24Z", "bug_id": 42293, "creation_time": "2007-06-29T10:06:24Z", "attachment_id": null}]