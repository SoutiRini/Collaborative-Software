[{"count": 0, "tags": [], "bug_id": 17634, "attachment_id": null, "text": "My manifest file doesn't contain any special caracter exept, the folowing\nline...the \u00b0 character is the # symbol in french. This task works fine with ant\n1.5.1.\n\n\n------------------ start manifest file ---------------------\n...\n\"Build-Library13: ext/eclipse-core-runtime.jar / n\u00b0 version inconue\"\n...\n------------------ end manifest file ---------------------\n\n\nhere an cut of my log in verbose mode:\n\n------------------ start of console output in verbose mode ---------------------\n\n[copy] icons\\RepositoryRootNode.gif omitted as icons/RepositoryRootNode.gi\n     [echo] P:\\projects\\ReferenceBrowsingUI/manifest.mf\n      [jar] error while reading original manifest: error in opening zip file\n      [jar] Building jar: P:\\soamai\\becubic\\lib\\ReferenceBrowsingUI.jar\n\nBUILD FAILED\nfile:P:/projects/MAKE/build.xml:623: Unable to read manifest file (null)\n        at org.apache.tools.ant.taskdefs.Jar.getManifest(Jar.java:281)\n        at org.apache.tools.ant.taskdefs.Jar.getManifest(Jar.java:221)\n        at org.apache.tools.ant.taskdefs.Jar.createManifest(Jar.java:337)\n        at org.apache.tools.ant.taskdefs.Jar.initZipOutputStream(Jar.java:323)\n        at org.apache.tools.ant.taskdefs.Zip.execute(Zip.java:404)\n        at org.apache.tools.ant.Task.perform(Task.java:341) \n\n....\n\n--- Nested Exception ---\nsun.io.MalformedInputException\n        at sun.io.ByteToCharUTF8.convert(ByteToCharUTF8.java(Compiled Code))\n        at java.io.InputStreamReader.convertInto(InputStreamReader.java:144)\n        at java.io.InputStreamReader.fill(InputStreamReader.java:193)\n        at java.io.InputStreamReader.read(InputStreamReader.java:256)\n        at java.io.BufferedReader.fill(BufferedReader.java:145)\n        at java.io.BufferedReader.readLine(BufferedReader.java(Compiled Code))\n        at java.io.BufferedReader.readLine(BufferedReader.java:368)\n        at org.apache.tools.ant.taskdefs.Manifest$Section.read(Manifest.java:419)\n        at \n        at org.apache.tools.ant.taskdefs.Jar.getManifest(Jar.java:275)\n        at org.apache.tools.ant.taskdefs.Jar.getManifest(Jar.java:221)\n        at org.apache.tools.ant.taskdefs.Jar.createManifest(Jar.java:337)\n        at org.apache.tools.ant.taskdefs.Jar.initZipOutputStream(Jar.java:323)\n        at org.apache.tools.ant.taskdefs.Zip.execute(Zip.java:404)\n        at org.apache.tools.ant.Task.perform(Task.java:341)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1339)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:397)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:143)\n        at org.apache.tools.ant.Task.perform(Task.java:341)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1339)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:397)\n        at org.apache.tools.ant.Task.perform(Task.java:341)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1339)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1255)\n        at org.apache.tools.ant.Main.runBuild(Main.java:609)\n        at org.apache.tools.ant.Main.start(Main.java:196)\n        at org.apache.tools.ant.Main.main(Main.java:235)\n------------------ end of console output in verbose mode ---------------------", "id": 32396, "time": "2003-03-04T11:05:58Z", "creator": "hubert.gregoire@soamai.com", "creation_time": "2003-03-04T11:05:58Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 17634, "attachment_id": null, "text": "You should save your manifest file as UTF-8. The manifest spec isn't explicit  that manifests are UTF-8 - but it does hint at it.    http://java.sun.com/j2se/1.4/docs/guide/jar/jar.html    \"otherchar: any UTF-8 character except NUL, CR and LF\"    The Ant 1.5.1 behaviour is to just use the default encoding but it means the resulting jar will work on a platform with a different default encoding. ", "id": 32397, "time": "2003-03-04T11:40:09Z", "creator": "conor@apache.org", "creation_time": "2003-03-04T11:40:09Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 17634, "attachment_id": null, "text": "I've reverted the behaviour to use the platform default encoding for manifests.\nA new attribute (manifestencoding) has been added to allow the encoding to be\ncontrolled.", "id": 33636, "time": "2003-03-22T10:27:00Z", "creator": "conor@apache.org", "creation_time": "2003-03-22T10:27:00Z", "is_private": false}]