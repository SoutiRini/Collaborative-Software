[{"count": 0, "tags": [], "creator": "jonathan_ramsey@bristol-city.gov.uk", "text": "I found this problem while I was trying to work around the bugzilla bug id = \n5680. Part of the work around I was trying involved turning off unpacking of \nWAR files, (unpackWARs=\"false\") for the Host defined in my server.xml file.\n\nI expected to be able to:\n- install a web application using the Tomcat 4 manager from a local war file.\n- shutdown Tomcat 4\n- startup Tomcat 4\n- have the web application available (running) again.\n\nThe problem is:\n- I found that after startup, Tomcat 4 'forgets' that the web application was \ninstalled.\n\nI have repeated the procedure with 3 different web applications - each time \nwith the same result.\n\nI have included full steps to reproduce this problem below.\n\n1. Single virtual host defined in server.xml file. Set unpackWARs flag to false \nso Tomcat doesn't unpack WAR files.\n\t<Host name=\"localhost\" debug=\"0\" appBase=\"webapps\" unpackWARs=\"false\">\n2. work directory contains no files before startup.\n3. webapps directory contains only 1 web application (manager).\n\tmanager\n\t-- WEB-INF\n\t---- web.xml\n4. Startup tomcat.\n5. manager application (http://localhost/manager/list) shows the following web \napplications.\n\tOK - Listed applications for virtual host localhost\n\t/manager:running:0\n6. install NewW3Menu application (http://localhost/manager/install?\npath=/NewW3Menu&war=jar:file:/home/user/NewW3Menu.war!/).\n\tOK - Installed application at context path /NewW3Menu\n7. work directory contains:\n\tlocalhost\n\t-- NewW3Menu\n\t---- WEB-INF\n\t------ classes\n\t-------- log4j.xml\n\t-------- uk\n\t---------- gov\n\t------------ bristol_city\n\t-------------- w3menu\n\t---------------- ControllerServlet.class\n\t---------------- MenuGraphicsPage.class\n\t---------------- TopGraphicsPage.class\n\t---------------- frame_graphics.class\n\t---------------- menu_text.class\n\t---------------- top_touchscreen.class\n\t---------------- FrameGraphicsPage.class\n\t---------------- MenuTextPage.class\n\t---------------- TopMinimisedPage.class\n\t---------------- frame_minimised.class\n\t---------------- menu_touchscreen.class\n\t---------------- FrameMinimisedPage.class\n\t---------------- MenuTouchscreenPage.class\n\t---------------- TopTouchscreenPage.class\n\t---------------- frame_touchscreen.class\n\t---------------- top_graphics.class\n\t---------------- FrameTouchscreenPage.class\n\t---------------- Page.class\n\t---------------- UrlOps.class\n\t---------------- menu_graphics.class\n\t---------------- top_minimised.class\n\t------ lib\n\t-------- ChainedException_classes.jar\n\t-------- Tools_classes.jar\n\t-------- hsql.jar\n\t-------- log4j.jar\n\t-------- servlet.jar\n\t-------- xerces.jar\n\t-------- StandardServlet_classes.jar\n\t-------- adabasd.jar\n\t-------- jdbc2_0-stdext.jar\n\t-------- poolman.jar\n\t-------- w3m_classes.jar\n\t-------- xmlc.jar\n\t-- manager\n8. webapps directory still contains only 1 web application (manager).\n\tmanager\n\t-- WEB-INF\n\t---- web.xml\n9. When the application is called from a web browser, it works.\n10. Tomcat is shutdown.\n11. In the work directory, two files have been added (SESSIONS.ser).\n\tlocalhost\n\t-- NewW3Menu\n\t---- SESSIONS.ser\n\t-- manager\n\t---- SESSIONS.ser\n12. Tomcat is started up.\n13. Manager application (http://localhost/manager/list) shows that NewW3Menu \napplication is no longer running.\n\tOK - Listed applications for virtual host localhost\n\t/manager:running:0\n13. Attempt to call NewW3Menu web application returns the following error:\n\tHTTP Status 500 - No Context configured to process this request", "id": 9620, "time": "2002-01-14T09:48:02Z", "bug_id": 5843, "creation_time": "2002-01-14T09:48:02Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "craig.mcclanahan@sun.com", "text": "Converted to an enhancement request.\n\nThe Manager webapp does not have any functionality to update server.xml, or to\ncopy webapp directories (or WARs) to the \"webapps\" directory where they will be\nrecognized the next time Tomcat starts.  This capability will be supported in\nthe future by enhancements to the manager, and via the admin webapp's ability\n(when completed) to save the current state of the server in an updated\nserver.xml file.\n", "id": 9624, "time": "2002-01-14T10:05:26Z", "bug_id": 5843, "creation_time": "2002-01-14T10:05:26Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 9875, "time": "2002-01-24T19:03:16Z", "bug_id": 5843, "creation_time": "2002-01-24T19:03:16Z", "text": "Marking as later, according to Craig's comments."}, {"count": 3, "tags": [], "text": "Reopen.", "is_private": false, "bug_id": 5843, "id": 17256, "time": "2002-06-06T01:08:08Z", "creator": "remm@apache.org", "creation_time": "2002-06-06T01:08:08Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 17257, "time": "2002-06-06T01:08:51Z", "bug_id": 5843, "creation_time": "2002-06-06T01:08:51Z", "is_private": false, "text": "4.1.x includes new manager commands which make deployed applications persistent\n(deploy/undeploy)."}]