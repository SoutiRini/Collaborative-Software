[{"text": "The servlet we created needs to parse the external XML documents, using the \nstandard java parsing mechanism:\n\nDocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();\nDocument doc = db.parse(myStream);\n\nIt works well under Tomcat 3.3 that we are currently using.\nHowever it does not work under Tomcat 4.03, producing the following error \nmessage:\n\njava.lang.InternalError\n        at org.apache.crimson.parser.Parser2.parseSystemId(Parser2.java:2653)\n        at org.apache.crimson.parser.Parser2.maybeExternalID(Parser2.java:2622)\n        at org.apache.crimson.parser.Parser2.maybeEntityDecl(Parser2.java:2525)\n        at org.apache.crimson.parser.Parser2.maybeMarkupDecl(Parser2.java:1197)\n        at org.apache.crimson.parser.Parser2.externalParameterEntity\n(Parser2.java:2768)\n        at org.apache.crimson.parser.Parser2.maybeDoctypeDecl(Parser2.java:1155)\n        at org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:489)\n        at org.apache.crimson.parser.Parser2.parse(Parser2.java:305)\n        at org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:433)\n        at com.icl.saxon.om.Builder.build(Builder.java:280)\n        at com.icl.saxon.om.DocumentBuilderImpl.parse\n(DocumentBuilderImpl.java:35)\n        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:86)\n        at Agents.xml_robot._process(xml_robot.java:181)\n        at Agents.xml_robot.process(xml_robot.java:74)\n        at Agents.xml_robot.process(xml_robot.java:54)\n        at Agents.channels.chAgent.go(chAgent.java:104)\n        at Agents.iAgent.go(iAgent.java:194)\n        at Agents.Agent.go(Agent.java:44)\n        at c_paint.topology.makeView(topology.java:69)\n        at c_paint.cServlet.get_t_protein(cServlet.java:323)\n        at c_paint.cServlet.doPost(cServlet.java:165)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.servlets.InvokerServlet.serveRequest\n(InvokerServlet.java:446)\n        at org.apache.catalina.servlets.InvokerServlet.doPost\n(InvokerServlet.java:216)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n        at org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n        at org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n        at org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n        at org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n        at org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n        at org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n        at org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n        at org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:468)\n        at org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n        at org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1012)\n        at org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1107)\n        at java.lang.Thread.run(Thread.java:579)\n\nAs about my code, the exception is throwed from the line \nDocument doc = db.parse(myStream);\n\nOther possibly relevant information:\nOS MS Windows NT 4.0 SP 5.0\njava version \"1.4.0-beta3\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.0-beta3-b84)\nJava HotSpot(TM) Client VM (build 1.4.0-beta3-b84, mixed mode)\n\nDue this problem we cannot migrate from Tomcat 3 to Tomcat 4.", "tags": [], "bug_id": 7962, "is_private": false, "count": 0, "id": 13242, "time": "2002-04-11T14:07:12Z", "creator": "Audrius.Meskauskas@medizin.uni-ulm.de", "creation_time": "2002-04-11T14:07:12Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "remm@apache.org", "is_private": false, "id": 13243, "time": "2002-04-11T14:15:19Z", "bug_id": 7962, "creation_time": "2002-04-11T14:15:19Z", "tags": [], "text": "Unless this is the (rather well-known now) bug 6374 and derivatives, this does \nnot look like a Tomcat bug (rather a Crimson + Saxon issue).\n\nAlso, do not use JDK 1.4 beta 3 with Tomcat 4. This is mentioned explicitely in \nthe release notes."}, {"count": 2, "tags": [], "creator": "Audrius.Meskauskas@medizin.uni-ulm.de", "attachment_id": null, "id": 13245, "time": "2002-04-11T14:18:37Z", "bug_id": 7962, "creation_time": "2002-04-11T14:18:37Z", "is_private": false, "text": "Maybe it can be important that the stream from that we need to parse is \nByteArrayInputStream."}]