[{"count": 0, "tags": [], "text": "Considering the SingleSignOn valve is specified in server.xml, suppose I have\ntwo webapps (A and B) running with container-managed security using form\nauthentication method.  \n\nFrom a freshly-started container:\n\n- the user makes a request to webapp A\n- the login page specified by <form-login-page> tag in web.xml is displayed\n- the user logs in and gets to webapp A\n- the user then makes a request to webapp B and keeps working there without\nreaching webapp B's session timeout\n- during this time, webapp A's session timeout is reached and since SingleSignOn\nis used, all webapp sessions attached to the user time out.\n- the user is facing a session timeout in webapp B which is innappropriate since\nhe was actively using it.\n\nI would consider the SingleSignOn behaviour correct if the user would explicitly\nclick a \"logout\" link.  Invalidating all his sessions in every webapps would be\ncorrect in this case.  However, the session-timeout case is different because\nthe user don't understand how his session can timeout if he's currently using\nthe application.\n\nIn the sessionEvent method of SingleSignOn, there should be a way to distinguish\nbetween a session timeout and an explicit logout.", "attachment_id": null, "bug_id": 9077, "id": 16099, "time": "2002-05-14T18:19:54Z", "creator": "filipe.mateus@fbn.ca", "creation_time": "2002-05-14T18:19:54Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 9077, "attachment_id": null, "id": 36241, "time": "2003-04-28T15:41:29Z", "creator": "patrick_conant@yahoo.com", "creation_time": "2003-04-28T15:41:29Z", "is_private": false, "text": "*** Bug 19088 has been marked as a duplicate of this bug. ***"}, {"count": 2, "tags": [], "creator": "patrick_conant@yahoo.com", "attachment_id": 6089, "text": "Created attachment 6089\nProposed patch for SingleSignOn session timeout issue.", "id": 36338, "time": "2003-04-29T22:30:13Z", "bug_id": 9077, "creation_time": "2003-04-29T22:30:13Z", "is_private": false}, {"count": 3, "tags": [], "creator": "patrick_conant@yahoo.com", "attachment_id": 6090, "is_private": false, "id": 36341, "time": "2003-04-29T22:54:04Z", "bug_id": 9077, "creation_time": "2003-04-29T22:54:04Z", "text": "Created attachment 6090\nRevised proposed patch for SingleSignOn session timeout.  New patch invalidates SSO when last session times out."}, {"count": 4, "tags": [], "creator": "luke.nelson@itssiemens.com", "attachment_id": 9266, "is_private": false, "id": 48039, "time": "2003-11-24T20:04:08Z", "bug_id": 9077, "creation_time": "2003-11-24T20:04:08Z", "text": "Created attachment 9266\nProposed fixes to previous attachment"}, {"count": 5, "tags": [], "creator": "luke.nelson@itssiemens.com", "attachment_id": null, "is_private": false, "id": 48040, "time": "2003-11-24T20:09:10Z", "bug_id": 9077, "creation_time": "2003-11-24T20:09:10Z", "text": "I just added a new attachment that fixes three problems with the attachment \ndated 04/29/03 22:54:\n\n1) The comparison on the timeout was comparing seconds to milliseconds.  Added \na scaling factor of 1000 to compensate.\n\n2) A value was removed from the reverse map with being called in a \nsynchronized block.  Added a synchronized block on reverse.\n\n3) Removing a session from the SingleSignOnEntry was causing an \nIndexOutOfBounds exception.  Added logic to test more carefully how to resize \nthe array."}, {"count": 6, "tags": [], "creator": "bstansberry@jboss.com", "is_private": false, "id": 48065, "attachment_id": 9275, "bug_id": 9077, "creation_time": "2003-11-25T02:26:59Z", "time": "2003-11-25T02:26:59Z", "text": "Created attachment 9275\nPrevious patch adapted for TC 5"}, {"count": 7, "text": "Attached patch adapts Luke Nelson's patch (Thanks Luke!) for TC 5.\n\nOf 3 issues Luke mentions, 3rd is not relevant to TC5 as TC 5 code already had \na valid algorithm for removing a single session from the SSO entry.\n\nAttached also updates StandardSession for 2 reasons:\n\n1) Unlike other similar methods in the class, TC 5's \nStandardSession.getLastAccessedTime() used field isValid to check for session \nvalidity instead of calling isValid().  isValid() will return true during \nsession expiration, allowing SessionEventHandlers to access the session during \nshutdown.  The SingleSignOn patch needs to access getLastAccessedTime() during \nthe session expiration process.\n\n2) The key to the LocalStrings.properties file used in getLastAccessedTime() \ndid not match the properties file.", "bug_id": 9077, "attachment_id": null, "id": 48066, "time": "2003-11-25T02:43:51Z", "creator": "bstansberry@jboss.com", "creation_time": "2003-11-25T02:43:51Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "bug_id": 9077, "text": "Brian ported his TC5 patch to TC4 (see bug 23881) which has now been applied \nand addresses the issues in this bug report.\n\nThe fixes will be included in the next releases of TC4/TC5.\n\nThanks to both Brian and Luke.", "id": 49739, "time": "2003-12-27T16:44:48Z", "creator": "medthomas@ntlworld.com", "creation_time": "2003-12-27T16:44:48Z", "is_private": false, "attachment_id": null}]