[{"count": 0, "tags": [], "bug_id": 7378, "text": "Hi,\n\nI'm using JMeter 1.7 with JSSE 1.0.2 and JDK 1.3.1_02.\nThe HTTP Proxy Server is unable to deal with HTTPS requests with any syntax :\nhttps://www.foo.com (raises a java.net.MalformedURLException: unknown protocol:)\nor\nhttp://www.foo.com:443 (raises a  java.io.IOException: Error writing to server)\n\nThanks for your great work.", "id": 12202, "time": "2002-03-22T23:10:40Z", "creator": "jlpeleran@free.fr", "creation_time": "2002-03-22T23:10:40Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 7378, "text": "The proxy server has been improved.  It won't crap out if using it on an https\nsite.  However, it won't record anything either.", "id": 15323, "attachment_id": null, "creator": "mstover1@apache.org", "creation_time": "2002-05-02T10:57:09Z", "time": "2002-05-02T10:57:09Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 7378, "text": "Hi, I setup Proxy server in the workbench and a simple controller in the test \nplan and when I try to record this \nURL \"https://my.screenname.aol.com/_cqr/login/login.psp\", I am getting this \nwith the latest nightly build:\n*****\nD:\\apache\\jmeter\\jakarta-jmeter\\bin>CALL ..\\lcp.bat ..\\lib\\Tidy.jar\nInitializing...\nCreating Config Object...OK\nCreating Cache Manager...OK\nCreating Daemon Socket... port 8080 OK\nProxy up and running!\nCommand = CONNECT my.screenname.aol.com:443 HTTP/1.0\n\njava.net.ConnectException: Connection refused: connect\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\n        at java.net.PlainSocketImpl.doConnect(Unknown Source)\n        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)\n        at java.net.PlainSocketImpl.connect(Unknown Source)\n        at java.net.Socket.connect(Unknown Source)\n        at java.net.Socket.connect(Unknown Source)\n        at java.net.Socket.<init>(Unknown Source)\n        at java.net.Socket.<init>(Unknown Source)\n        at org.apache.jmeter.protocol.http.proxy.Proxy.writeToClient(Proxy.java:\n318)\n        at org.apache.jmeter.protocol.http.proxy.Proxy.run(Proxy.java:157)\nDelivering urlconfig to test tree\n********", "id": 15469, "time": "2002-05-04T01:42:24Z", "creator": "y2k@bigfoot.com", "creation_time": "2002-05-04T01:42:24Z", "is_private": false, "attachment_id": null}, {"count": 3, "text": "\nI made a patch that adresses this. Its not a general solution to JMeter SSL it\njust gets the Proxy working with HTTPS.\n\nhttp://www.cybercom.net/~slater/jmeter/\n\nEnjoy. Feel free to email me with any questions.\n\n-aj", "bug_id": 7378, "attachment_id": null, "id": 16571, "time": "2002-05-22T21:10:29Z", "creator": "ajslater@attbi.com", "creation_time": "2002-05-22T21:10:29Z", "tags": [], "is_private": false}, {"attachment_id": 2781, "tags": [], "bug_id": 7378, "text": "Created attachment 2781\nproxy experiment", "count": 4, "id": 21414, "time": "2002-08-20T22:30:54Z", "creator": "mstover1@apache.org", "creation_time": "2002-08-20T22:30:54Z", "is_private": false}, {"count": 5, "tags": [], "text": "Is this really a bug?\nConfiguring your browser to use the proxy for HTTPS is a mistake with current\nreleases of JMeter.\nHaving the proxy be able to process https AND record is a difficult task -- and\nstill it will require getting hold of the site's private key.\n\nAJ's solution (a \"man in the middle attack\", in a way) is probably the best\npossible.\n\nI'm attaching AJs code for later reference. It's not a clean patch, so it will\ntake a while to review and merge. I'm marking this as a medium-priority\nenhancement. ", "attachment_id": null, "bug_id": 7378, "id": 29167, "time": "2003-01-10T23:13:04Z", "creator": "jsalvata@atg.com", "creation_time": "2003-01-10T23:13:04Z", "is_private": false}, {"count": 6, "tags": [], "creator": "mstover1@apache.org", "attachment_id": null, "id": 42291, "time": "2003-08-06T19:36:39Z", "bug_id": 7378, "creation_time": "2003-08-06T19:36:39Z", "is_private": false, "text": "It turns out this really isn't possible - when you ssl through a proxy, the\nproxy creates a tunnel for you and the proxy is not privy to the details of your\nrequest (which is a good thing).  Thus, there's no way JMeter could record your\nactions.  The only solution that I can see working for this is embedding a\nbrowser in JMeter, and unfortunately, the only high-quality java browsers I know\nof are commercial. \n\nPossibly a python browser exists that could be used inside JMeter - haven't\nlooked at that possibility."}, {"count": 7, "tags": [], "bug_id": 7378, "text": "This is confusing ... HTTPS is not a different protocol than HTTP, it's merely HTTP over \nan SSL-encrypted channel (LDAP/LDAPS, amongst others, can also be handled this way). \nThe channel is encrypted point-to-point before the actual HTTP takes place, so the proxy \nshould function as what is called a 'blind relay'. \n \nI would suggest that recording HTTPS in a useful way is impractical (if not impossible). \n \nHere's a useful suggestion from Jordi: \n \n<jordi> \nA usually practical way is to: \n \n1/ Create a User Defined Variable in the Test Plan with value \"http\".  \nName it, say, \"protocol\". \n \n2/ Record your script. The proxy will cleverly (sometimes too cleverly)  \nreplace every occurence of \"http\" with ${protocol}. \n \n3/ Change the variable value to https. \n \n4/ Run the script. \n</jordi> \n \nThis workaround gives you the possibility to perform HTTPS benchmarks, etc. after \nhaving recorded your original browser interactions (which must be HTTP rather than \nHTTPS) with the proxy. \n \nI am closing this bug for these reasons as 'WONTFIX'. ", "id": 43528, "attachment_id": null, "creator": "mramshaw@alumni.concordia.ca", "creation_time": "2003-08-31T22:34:56Z", "time": "2003-08-31T22:34:56Z", "is_private": false}, {"count": 8, "tags": [], "creator": "hauser@acm.org", "attachment_id": null, "id": 115039, "time": "2008-03-27T10:02:02Z", "bug_id": 7378, "creation_time": "2008-03-27T10:02:02Z", "is_private": false, "text": "see also Bug 3182 and http://wiki.apache.org/jakarta-jmeter/JMeterAndHTTPS and http://mail-archives.apache.org/mod_mbox/jakarta-jmeter-user/200507.mbox/%3C21114420E9CACD49AD54B1C40D4571C757B136@pdcavantica.avanticatec.net%3E\n\n\nbadboy is not that good an idea since it is not really opensource  :(\n\nSo, it would be good to be able to record via https!\n\nHow does http://selenium-ide.openqa.org/ work with jmeter?\n\nBTW, I would object to <<I would suggest that recording HTTPS in a useful way is impractical (if not impossible).>>\nWhy should \"Secure Content Inspection Proxies\" like http://summerweb.microdasys.com/products/scip/features-and-benefits/ only help large corporations and law enforcment, but not us testers?"}, {"count": 9, "tags": [], "bug_id": 7378, "attachment_id": null, "id": 115059, "time": "2008-03-27T22:50:01Z", "creator": "marc.rennhard@zhaw.ch", "creation_time": "2008-03-27T22:50:01Z", "is_private": false, "text": "I agree with Ralf (and probably several others) that https recording would be a great addition to JMeter.\n\nOf course it won't work when simply tunneling https traffic through the proxy (as proxies usually do), but it could relatively easily be enabled by splitting the end-to-end SSL/TLS session so we get two sessions, one between browser and proxy and the other between proxy and server. This gives JMeter access to all application data (http). The only difference for the browser is that it wouldn't receive the server's original certificate but one from JMeter (and therefore produce a warning), but that wouldn't be a problem.\n\nOther recording proxies make use of this approach, among them the Java-based WebScarab project (http://www.owasp.org/index.php/Category:OWASP_WebScarab_Project).\n\nTo summarize: it can be done (probably even relatively easily using standard Java features (JSSE)) and would definitely make JMeter an even more complete package.\n"}, {"count": 10, "tags": [], "bug_id": 7378, "text": "Good news: It works! \n\nJust check \"Attempt HTTPS Spoofing\" in the HTTP Proxy Server and JMeter will work with HTTPS, too. It doesn't really split the SSL-session as WebScarab does, but JMeter finally acts as the client-side endpoint of the HTTPS-session (which means that all traffic between the browser and JMeter isn't SSL-tunneled but HTTP, and it's JMeter that establishes the SSL-connection to the web server). Additionally, JMeter rewrites all \"HTTPS\"-strings in the page (e.g. in links) to \"HTTP\". Just use \"HTTP\" instead of \"HTTPS\" in the browser and JMeter will do the rest. \n\nHovewer, there is still a problem concerning hard-coded HTTPS-redirects, which aren't rewritten by JMeter. It is indeed possible to manually change the requested URL, but an automatically rewrite by JMeter would be a nice enhancement here... ", "id": 116639, "time": "2008-05-15T06:18:26Z", "creator": "michael.tschannen@zhaw.ch", "creation_time": "2008-05-15T06:18:26Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 7378, "text": "re comment 10, see also Bug 45007\n\t\n\n", "id": 117104, "time": "2008-05-29T02:35:14Z", "creator": "hauser@acm.org", "creation_time": "2008-05-29T02:35:14Z", "is_private": false, "attachment_id": null}]