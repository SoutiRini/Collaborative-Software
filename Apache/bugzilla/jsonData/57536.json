[{"attachment_id": null, "tags": [], "creator": "aogburn@redhat.com", "is_private": false, "count": 0, "id": 180757, "time": "2015-02-04T21:11:14Z", "bug_id": 57536, "creation_time": "2015-02-04T21:11:14Z", "text": "Could a feature be implemented to make the source ip configurable for mod_jk connections?  For instance, if you have a secondary ip that httpd listens on, the connections that mod_jk makes still come from the default primary ip.  It may be preferable if they could come from the secondaryip."}, {"count": 1, "tags": [], "text": "What interfaces do you have on an example server? What interface/IP does mod_jk currently choose? What interface/IP would you prefer mod_jk use?", "attachment_id": null, "bug_id": 57536, "id": 180804, "time": "2015-02-05T17:35:17Z", "creator": "chris@christopherschultz.net", "creation_time": "2015-02-05T17:35:17Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 57536, "attachment_id": null, "is_private": false, "id": 180808, "time": "2015-02-05T19:21:17Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2015-02-05T19:21:17Z", "text": "I think he wants an optional IP config attribute per worker. That IP would be a locally configured ip chosen by the admin. mod_jk would then bind() to that IP before doing the connect(). One choses port 0 and sets SO_REUSEADDR. bind() is typicaly used before accept() (server side) and not before connect() (client), but is is allowed for the client as well and for complex systems can do something useful. If there are multiple local IPs and/or multiple possible interfaces and routes form the web server to the backend, you can chose from which IP the connection from the point of view of the backend comes.\n\nSometimes you can work around not being able to configure that IP by setting host routes on the web server but for that solution you need to have root access.\n\nI think it is a useful extension and not an exotic feature, though most people will not have a need to use it. The few who need it really need it :)"}, {"count": 3, "tags": [], "bug_id": 57536, "attachment_id": null, "id": 180825, "time": "2015-02-06T14:00:56Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2015-02-06T14:00:56Z", "is_private": false, "text": "Some technical details:\n\nhttps://idea.popcount.org/2014-04-03-bind-before-connect/\n\nI haven't checked the validity of each statement, but there seems to be now much info around for using bind() on the client side. Must have a look at Stevens."}, {"count": 4, "tags": [], "bug_id": 57536, "attachment_id": null, "id": 180826, "time": "2015-02-06T14:08:38Z", "creator": "aogburn@redhat.com", "creation_time": "2015-02-06T14:08:38Z", "is_private": false, "text": "Rainer's summation of the feature request is spot on.  Thanks!"}, {"count": 5, "attachment_id": null, "creator": "rainer.jung@kippdata.de", "is_private": false, "id": 180850, "time": "2015-02-08T14:31:20Z", "bug_id": 57536, "creation_time": "2015-02-08T14:31:20Z", "tags": [], "text": "I have committed the feature in r1658173.\n\nIt is marked experimental in docs and changelog, because it needs more testing on various platforms. It should behave transparently if not configured.\n\nI did not set SO_REUSEADDR deliberately. Otherwise we ould have to handle EADDRINUSE during connect(). We'll see whether not setting SO_REUSEADDR is OK for most users (enough free ephemeral ports).\n\nIt will be part of version 1.2.41."}]