[{"count": 0, "tags": [], "bug_id": 44337, "attachment_id": null, "is_private": false, "id": 113331, "time": "2008-02-01T01:54:32Z", "creator": "albrecht@a-weinert.de", "creation_time": "2008-02-01T01:54:32Z", "text": "DefaultServlet docu 6.0  says about attibute readmeFile:\nIf a directory listing is presented, a readme file\n *may* \nalso be presented with the listing. This file is inserted\n.....\n\nThis was true for 5.5.x.\n\n6.0.14 crashes if the file is absent in the listed directory.\njavax.servlet.ServletException: \nError opening readme resource at\norg.apache.catalina.servlets.DefaultServlet.getReadme(DefaultServlet.java:1418)\n\nThis new behaviour blocks the listing of big directory trees managed by others,\nwhere the work-around is nor feasible.\n\nWork around 1: readme file in *every* subdir, empty (length=0) if none wanted \n     (and subsequent changes in the used XSL-Transformers)\nWork around 2: Change \"may\" to  \"must\" in docu.\n\nRepair: fix DefaultServlet\n\nFrom web.xml:\n\n    <servlet>\n        <servlet-name>default</servlet-name>\n        <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>\n        <init-param>\n            <param-name>listings</param-name>\n            <param-value>true</param-value>\n        </init-param>\n        <init-param>\n            <param-name>globalXsltFile</param-name>\n            <param-value>D:\\www\\serv-intra\\meva-dir-li.xsl</param-value>\n        </init-param>\n        <init-param>\n            <param-name>readmeFile</param-name>\n            <param-value>readme.htm</param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>"}, {"count": 1, "attachment_id": 21461, "bug_id": 44337, "is_private": false, "id": 113369, "time": "2008-02-02T10:34:59Z", "creator": "funkman@joedog.org", "creation_time": "2008-02-02T10:34:59Z", "tags": [], "text": "Created attachment 21461\nPatch to DefaultServlet.java\n\nPatch is for tomcat6 trunk. \n\nWhen the readme resource is not found. A NamingException is thrown instead of\nassuming null is returned.\n\nPatch eats the NamingException and returns null as well as optionally logs it\nif debugging turned up very high.\n\nSame condition can occur with the localxslt lookup."}, {"count": 2, "tags": [], "creator": "funkman@joedog.org", "text": "applied to version 6.0.17+", "id": 113660, "time": "2008-02-12T08:17:55Z", "bug_id": 44337, "creation_time": "2008-02-12T08:17:55Z", "is_private": false, "attachment_id": null}]