[{"count": 0, "tags": [], "bug_id": 4788, "attachment_id": null, "text": "When I use the latest xtag library with dom4j-full v1.1, it seems that the \nlibrary does not function properly.  I find that code that used to work no \nlonger does.  I am trying to select from my xml document the one topic \nspecified from the query string, but my forEach statement is no longer finding \nanything and the select is staying at the root.  The code is:\n\n<xtags:parse uri=\"help.xml\"/>\n<xtags:forEach select=\"/help/topic[topic-key=$topic][1]\">\n    <h2><xtags:valueOf select=\"//topic-key\"/></h2>\n    <xtags:forEach select=\"//description\">\n        <p><xtags:valueOf select=\".\"/></p>\n    </xtags:forEach>\n</xtags:forEach>\n\nAnd the xml file is:\n\n<help>\n     <topic>\n        <topic-key>nohelp</topic-key>\n        <topic-title>No Help Available</topic-title>\n    </topic>\n    <topic>\n        <topic-key>managesite</topic-key>\n        <topic-title>Manage Site</topic-title>\netc.\n\nWhen this executes, it stays at the root, displaying the first topic only \ninstead of the one I specified.\n\nI uncompressed the examples and are running them unmodified on tomcat 3.3 with\njdk 1.3.01 and the only classes in my application classpath are dom4j-full.jar \nand xtags.jar.  Some of the examples work, for example, the simple rss example \nand the stock quote example.  However, the periodic_table and much_ado examples \nboth give an exception, and periodic_table2 shows every element as having 112 \natoms. \n\nLocation: /docs/xtags/examples/much_ado.jsp\nInternal Servlet Error:\n\njavax.servlet.ServletException: no more input Nested exception: no more input\nat org.apache.jasper.runtime.PageContextImpl.handlePageException(Unknown Source)\nat docs.xtags.examples.much_ado_1._jspService(much_ado_1.java:874)\nat org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java)\nat org.apache.tomcat.facade.ServletHandler.doService(Unknown Source)\nat org.apache.tomcat.core.Handler.invoke(Unknown Source)\nat org.apache.tomcat.core.Handler.service(Unknown Source)\nat org.apache.tomcat.facade.ServletHandler.service(Unknown Source)\nat org.apache.tomcat.core.ContextManager.internalService(Unknown Source)\nat org.apache.tomcat.core.ContextManager.service(Unknown Source)\nat org.apache.tomcat.modules.server.Http10Interceptor.processConnection(Unknown \nSource)\nat org.apache.tomcat.util.net.TcpWorkerThread.runIt(Unknown Source)\nat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(Unknown Source)\nat java.lang.Thread.run(Thread.java:484)\nRoot cause:\norg.dom4j.DocumentException: no more input Nested exception: no more input\nat org.dom4j.io.SAXReader.read(SAXReader.java:333)\nat org.dom4j.io.SAXReader.read(SAXReader.java:249)\nat org.apache.taglibs.xtags.xpath.ParseTag.doAfterBody(ParseTag.java:138)\nat docs.xtags.examples.much_ado_1._jspService(much_ado_1.java:187)\nat org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java)\nat org.apache.tomcat.facade.ServletHandler.doService(Unknown Source)\nat org.apache.tomcat.core.Handler.invoke(Unknown Source)\nat org.apache.tomcat.core.Handler.service(Unknown Source)\nat org.apache.tomcat.facade.ServletHandler.service(Unknown Source)\nat org.apache.tomcat.core.ContextManager.internalService(Unknown Source)\nat org.apache.tomcat.core.ContextManager.service(Unknown Source)\nat org.apache.tomcat.modules.server.Http10Interceptor.processConnection(Unknown \nSource)\nat org.apache.tomcat.util.net.TcpWorkerThread.runIt(Unknown Source)\nat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(Unknown Source)\nat java.lang.Thread.run(Thread.java:484)\nNested exception:\njava.io.EOFException: no more input\nat org.dom4j.io.aelfred.XmlParser.popInput(XmlParser.java:3983)\nat org.dom4j.io.aelfred.XmlParser.readCh(XmlParser.java:3376)\nat org.dom4j.io.aelfred.XmlParser.tryRead(XmlParser.java:4060)\nat org.dom4j.io.aelfred.XmlParser.tryEncodingDecl(XmlParser.java:3665)\nat org.dom4j.io.aelfred.XmlParser.pushURL(XmlParser.java:3560)\nat org.dom4j.io.aelfred.XmlParser.doParse(XmlParser.java:147)\nat org.dom4j.io.aelfred.SAXDriver.parse(SAXDriver.java:315)\nat org.dom4j.io.SAXReader.read(SAXReader.java:314)\nat org.dom4j.io.SAXReader.read(SAXReader.java:249)\nat org.apache.taglibs.xtags.xpath.ParseTag.doAfterBody(ParseTag.java:138)\nat docs.xtags.examples.much_ado_1._jspService(much_ado_1.java:187)\nat org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java)\nat org.apache.tomcat.facade.ServletHandler.doService(Unknown Source)\nat org.apache.tomcat.core.Handler.invoke(Unknown Source)\nat org.apache.tomcat.core.Handler.service(Unknown Source)\nat org.apache.tomcat.facade.ServletHandler.service(Unknown Source)\nat org.apache.tomcat.core.ContextManager.internalService(Unknown Source)\nat org.apache.tomcat.core.ContextManager.service(Unknown Source)\nat org.apache.tomcat.modules.server.Http10Interceptor.processConnection(Unknown \nSource)\nat org.apache.tomcat.util.net.TcpWorkerThread.runIt(Unknown Source)\nat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(Unknown Source)\nat java.lang.Thread.run(Thread.java:484)\n\nLastly, I tried the much_ado example again with the jar files that ship with the\nxtags distribution and it doesn't work either, but the exception is different:\n\njavax.servlet.ServletException: Error on line 1 of document  : \norg.apache.crimson.parser/P-067 Nested exception: org.apache.crimson.parser/P-\n067\nat org.apache.jasper.runtime.PageContextImpl.handlePageException(Unknown Source)\nat docs.xtags.examples.much_ado_1._jspService(much_ado_1.java:874)\nat org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java)\nat org.apache.tomcat.facade.ServletHandler.doService(Unknown Source)\nat org.apache.tomcat.core.Handler.invoke(Unknown Source)\nat org.apache.tomcat.core.Handler.service(Unknown Source)\nat org.apache.tomcat.facade.ServletHandler.service(Unknown Source)\nat org.apache.tomcat.core.ContextManager.internalService(Unknown Source)\nat org.apache.tomcat.core.ContextManager.service(Unknown Source)\nat org.apache.tomcat.modules.server.Http10Interceptor.processConnection(Unknown \nSource)\nat org.apache.tomcat.util.net.TcpWorkerThread.runIt(Unknown Source)\nat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(Unknown Source)\nat java.lang.Thread.run(Thread.java:484)\nRoot cause:\norg.dom4j.DocumentException: Error on line 1 of document  : \norg.apache.crimson.parser/P-067 Nested exception: org.apache.crimson.parser/P-\n067\nat org.dom4j.io.SAXReader.read(SAXReader.java:330)\nat org.dom4j.io.SAXReader.read(SAXReader.java:249)\nat org.apache.taglibs.xtags.xpath.ParseTag.doAfterBody(ParseTag.java:138)\nat docs.xtags.examples.much_ado_1._jspService(much_ado_1.java:187)\nat org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java)\nat org.apache.tomcat.facade.ServletHandler.doService(Unknown Source)\nat org.apache.tomcat.core.Handler.invoke(Unknown Source)\nat org.apache.tomcat.core.Handler.service(Unknown Source)\nat org.apache.tomcat.facade.ServletHandler.service(Unknown Source)\nat org.apache.tomcat.core.ContextManager.internalService(Unknown Source)\nat org.apache.tomcat.core.ContextManager.service(Unknown Source)\nat org.apache.tomcat.modules.server.Http10Interceptor.processConnection(Unknown\nSource)\nat org.apache.tomcat.util.net.TcpWorkerThread.runIt(Unknown Source)\nat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(Unknown Source)\nat java.lang.Thread.run(Thread.java:484)\nNested exception:\norg.xml.sax.SAXParseException: org.apache.crimson.parser/P-067\nat org.apache.crimson.parser.Parser2.fatal(Parser2.java:3035)\nat org.apache.crimson.parser.Parser2.fatal(Parser2.java:3023)\nat org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:500)\nat org.apache.crimson.parser.Parser2.parse(Parser2.java:304)\nat org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:433)\nat org.dom4j.io.SAXReader.read(SAXReader.java:314)\nat org.dom4j.io.SAXReader.read(SAXReader.java:249)\nat org.apache.taglibs.xtags.xpath.ParseTag.doAfterBody(ParseTag.java:138)\nat docs.xtags.examples.much_ado_1._jspService(much_ado_1.java:187)\nat org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java)\nat org.apache.tomcat.facade.ServletHandler.doService(Unknown Source)\nat org.apache.tomcat.core.Handler.invoke(Unknown Source)\nat org.apache.tomcat.core.Handler.service(Unknown Source)\nat org.apache.tomcat.facade.ServletHandler.service(Unknown Source)\nat org.apache.tomcat.core.ContextManager.internalService(Unknown Source)\nat org.apache.tomcat.core.ContextManager.service(Unknown Source)\nat org.apache.tomcat.modules.server.Http10Interceptor.processConnection(Unknown\nSource)\nat org.apache.tomcat.util.net.TcpWorkerThread.runIt(Unknown Source)\nat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(Unknown Source)\nat java.lang.Thread.run(Thread.java:484)", "id": 7740, "time": "2001-11-10T08:08:11Z", "creator": "rasand@attglobal.net", "creation_time": "2001-11-10T08:08:11Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 4788, "attachment_id": null, "text": "I've added your test case to the XTags distribution. In the examples web \napplication its here:-\n\ntest/test_richard.jsp\n\nAnd it works for me perfectly in Tomcat 4.0.\n\nCould you try it on Tomcat 4.0 and see if its just an issue with Tomcat 3.x or \nits something to do with your platform or machine setup?", "id": 7752, "time": "2001-11-11T02:07:46Z", "creator": "jstrachan@apache.org", "creation_time": "2001-11-11T02:07:46Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 4788, "attachment_id": null, "text": "No feedback on problem for a while, closing.", "id": 12925, "time": "2002-04-06T16:17:31Z", "creator": "glenn@apache.org", "creation_time": "2002-04-06T16:17:31Z", "is_private": false}]