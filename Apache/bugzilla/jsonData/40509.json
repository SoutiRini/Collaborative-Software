[{"count": 0, "tags": [], "bug_id": 40509, "attachment_id": null, "is_private": false, "id": 93572, "time": "2006-09-14T12:01:55Z", "creator": "marija.jelinek@capgemini.com", "creation_time": "2006-09-14T12:01:55Z", "text": "We are running a web application inside a Tomcat servlet container. Our \nenvironment contains a web server machine (SA94) and a file server machine \n(SA96).The web application runs as windows service on the Web server machine \n(SA94) pointing to the files on the file server (SA96). SA96 exports the root \nof the file store as share \\\\SA96\\F$\\test\n\nAfter deploying the application, when we try to access the application \nfollowing error is shown:\n\ntype Exception report message description \nThe server encountered an internal error () that prevented it from fulfilling \nthis request. \nexception \norg.apache.jasper.JasperException: Unable to compile class for JSP \norg.apache.jasper.JspCompilationContext.compil(JspCompilationContext.java:515) \norg.apache.jasper.servlet.JspServletWrapper.servic(JspServletWrapper.java:274) \norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292) \norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:236) \njavax.servlet.http.HttpServlet.service(HttpServlet.java:810) \n\nroot cause \njava.io.FileNotFoundException: \n\\F$\\test\\subs\\IGUI\\tomcat\\work\\Catalina\\localhost\\i3s\\org\\apache\\jsp\\index_jsp.\njava (The system cannot find the path specified) \njava.io.FileOutputStream.open(Native Method) \njava.io.FileOutputStream.<init>(Unknown Source) \njava.io.FileOutputStream.<init>(Unknown Source) \norg.apache.jasper.compiler.Compiler.generateJava(Compiler.java:188) \norg.apache.jasper.compiler.Compiler.compile(Compiler.java:439) \norg.apache.jasper.compiler.Compiler.compile(Compiler.java:422) \norg.apache.jasper.JspCompilationContext.compil(JspCompilationContext.java:507) \norg.apache.jasper.servlet.JspServletWrapper.servic(JspServletWrapper.java:274) \norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292) \norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:236) \njavax.servlet.http.HttpServlet.service(HttpServlet.java:810) \n\nnote The full stack trace of the root cause is available in the \nApache Tomcat/5.0.24 logs. \n\nand it is justifiable because the path does not exist: \n\\F$\\test\\subs\\IGUI\\tomcat\\work\\Catalina\\localhost\\i3s\\org\\apache\\jsp\\index_jsp.\njava \nit is correct up to \n\\F$\\test\\subs\\IGUI\\tomcat\\work\\Catalina\\localhost\\i3s\\\n\nWe spent some hours trying to track down the problem and are now suspecting \nthat we are seeing a bug/restriction in Jasper. When building the path for the \ndirectory it uses for compiling jsp pages, it strips off the host part of the \nfile name (actually a file URL). On Unix this would be no problem as remote \nfile systems are mounted/linked to file names indistinguishable from ordinary \nnames, but for the Windows way of referencing remote file systems this is bad. \n\nHere is the culprit code from the createOutputDir method of \n org.apache.jasper.JspCompilationContext.java: \n \nbaseUrl = options.getScratchDir().toURL(); \nString outUrlString = baseUrl.toString() + '/' + path; \nURL outUrl = new URL(outUrlString); \noutputDir = outUrl.getFile() + File.separator;\n\nOur current workaround is to run the service on the same machine where its \nfiles are."}, {"count": 1, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "id": 97286, "time": "2006-12-25T06:09:17Z", "bug_id": 40509, "creation_time": "2006-12-25T06:09:17Z", "is_private": false, "text": "Before I start looking into this, can I please ask you to test on Tomcat 5.5.20?\n 5.0.16 is an ancient release, and I don't know if another 5.0 release will be\nout any time soon,"}, {"count": 2, "tags": [], "bug_id": 40509, "attachment_id": null, "id": 98043, "creation_time": "2007-01-14T14:41:16Z", "time": "2007-01-14T14:41:16Z", "creator": "markt@apache.org", "text": "I have tested the following setting\nappBase=\"\\\\server01\\G$\\Backups\\build\\webapps\" and JSP compilation is working\nwithout any issue using 5.5.20", "is_private": false}]