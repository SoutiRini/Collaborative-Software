[{"count": 0, "tags": [], "creator": "mustangxu@gmail.com", "is_private": false, "text": "Created attachment 24833\nTesting SQL script\n\nThe error output is:\n\nBUILD FAILED\ncom.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '???CREATE DATABASE IF NOT EXISTS chinatrial' at line 1\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n\tat com.mysql.jdbc.Util.handleNewInstance(Util.java:406)\n\tat com.mysql.jdbc.Util.getInstance(Util.java:381)\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1030)\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)\n\tat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)\n\tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)\n\tat com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2536)\n\tat com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2465)\n\tat com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:734)\n\tat org.apache.tools.ant.taskdefs.SQLExec.execSQL(SQLExec.java:565)\n\tat org.apache.tools.ant.taskdefs.SQLExec.runStatements(SQLExec.java:535)\n\tat org.apache.tools.ant.taskdefs.SQLExec$Transaction.runTransaction(SQLExec.java:776)\n\tat org.apache.tools.ant.taskdefs.SQLExec$Transaction.access$000(SQLExec.java:706)\n\tat org.apache.tools.ant.taskdefs.SQLExec.execute(SQLExec.java:449)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n\tat org.apache.tools.ant.Task.perform(Task.java:348)\n\tat org.apache.tools.ant.Target.execute(Target.java:357)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:385)\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n\tat org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1189)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:758)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:217)\n\tat org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n\tat org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\n\n\n\nBut in fact, there is NOTHING in front of \"CREATE\"", "id": 133562, "time": "2010-01-12T23:26:38Z", "bug_id": 48533, "creation_time": "2010-01-12T23:26:38Z", "attachment_id": 24833}, {"attachment_id": null, "tags": [], "bug_id": 48533, "is_private": false, "count": 1, "id": 133669, "time": "2010-01-17T21:16:32Z", "creator": "bodewig@apache.org", "creation_time": "2010-01-17T21:16:32Z", "text": "My guess is that the file's encoding doesn't match your platform's default encoding.\n\nDoes it work if you specify the files encoding using <sql>'s encoding attribute explicitly?"}, {"count": 2, "tags": [], "text": "Created attachment 24853\nAnt build script", "is_private": false, "id": 133672, "creator": "mustangxu@gmail.com", "time": "2010-01-17T22:05:35Z", "bug_id": 48533, "creation_time": "2010-01-17T22:05:35Z", "attachment_id": 24853}, {"count": 3, "text": "(In reply to comment #1)\n> My guess is that the file's encoding doesn't match your platform's default\n> encoding.\n> \n> Does it work if you specify the files encoding using <sql>'s encoding attribute\n> explicitly?\n\nSure, the SQL script file is utf8 encoded.  If I remove \"encoding\" attribute from sql task, the error msg will be\n\ncom.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in\nyour SQL syntax; check the manual that corresponds to your MySQL server version\nfor the right syntax to use near '??????CREATE DATABASE IF NOT EXISTS chinatrial'\n\n(6 questions marks)", "bug_id": 48533, "attachment_id": null, "id": 133673, "time": "2010-01-17T22:07:50Z", "creator": "mustangxu@gmail.com", "creation_time": "2010-01-17T22:07:50Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "Your file contains a BOM (see http://en.wikipedia.org/wiki/Byte-order_mark ) and it doesn't get stripped by Java's InputStreamReader - see http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4508058\n\nAnt doesn't try to strip the BOM itself so the workaround would be for you to remove the BOM completely (by using an editor that doesn't insist on writing one), sorry.", "id": 133692, "time": "2010-01-18T21:33:40Z", "bug_id": 48533, "creation_time": "2010-01-18T21:33:40Z", "attachment_id": null}]