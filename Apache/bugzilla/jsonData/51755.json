[{"count": 0, "tags": [], "bug_id": 51755, "attachment_id": null, "is_private": false, "id": 148966, "time": "2011-09-01T21:25:05Z", "creator": "sergeyfd@gmail.com", "creation_time": "2011-09-01T21:25:05Z", "text": "Documentation for mod_proxy in HTTPD 2.2 has following option:\n\nfailonstatus \t- \tA single or comma-separated list of HTTP status codes. If set this will force the worker into error state when the backend returns any status code in the list. Worker recovery behaves the same as other worker errors. \n\nYet when I try to use it httpd complains that the option is unknown. I've also checked source code for mod_proxy in 2.2.15 and didn't find that option there.\n\nTo reproduce the bug just try to use failonstatus option in HTTPD 2.2 configuration for balancer type of proxy."}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "text": "Works for me:\n\nListen 81\nListen 82\nProxyPass /bal/ balancer://mycluster/  failonstatus=410\n<Proxy balancer://mycluster>\nBalancerMember http://localhost:81/\nBalancerMember http://localhost:82/\n</Proxy>\n\n<virtualhost *:81 *:82>\nRewriteEngine on\nRewriteRule .* - [G]\n</virtualhost>\n\n[Thu Sep 01 21:02:41 2011] [error] proxy: BALANCER: (balancer://mycluster).  Forcing recovery for worker (http://localhost:81/), failonstatus 410", "id": 148967, "time": "2011-09-02T01:03:37Z", "bug_id": 51755, "creation_time": "2011-09-02T01:03:37Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 51755, "attachment_id": null, "id": 148968, "time": "2011-09-02T02:44:59Z", "creator": "sergeyfd@gmail.com", "creation_time": "2011-09-02T02:44:59Z", "is_private": false, "text": "What version of Apache did you test this configuration? \n\nIn my case of CentOS 5.6:\n\nrpm -qa | grep httpd\nhttpd-2.2.3-45.el5.centos.1\n\n\nI'm getting \"Syntax error on line 1014 of /etc/httpd/conf/httpd.conf:\nProxyPass unknown Balancer parameter\" for you configuration.\n\nManually compiled 2.2.15 produces exactly the same error."}, {"count": 3, "tags": [], "text": "Changes with Apache 2.2.17\n \n *) Proxy balancer: support setting error status according to HTTP response\n    code from a backend.  PR 48939.  [Daniel Ruggeri <DRuggeri primary.net>]\n\nNote that the latest version is 2.2.20. \n\nBugzilla is not a support forum. Please post further questionto the users list.", "is_private": false, "id": 148969, "creator": "rainer.jung@kippdata.de", "time": "2011-09-02T02:58:53Z", "bug_id": 51755, "creation_time": "2011-09-02T02:58:53Z", "attachment_id": null}]