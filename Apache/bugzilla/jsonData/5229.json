[{"attachment_id": null, "tags": [], "creator": "keithcsl@ihug.co.nz", "text": "Hi\nIf you use StandardCluster and DistributedManager in the server.xml, the \nHttpSessionBindingListener fails to get called. This is because when the \nsession is replicated, the reference to the old object is lost. Hence, no \nevents:\n\n<Cluster className=\"org.apache.catalina.cluster.StandardCluster\"\n    multicastPort=\"6789\"\n    multicastAddress=\"228.5.6.7\"\n    checkInterval=\"5\"\n    debug=\"99\"/>\n        <Context path=\"/coredev\" docBase=\"e:\\opensource\\e3\\dev\\www\\core\\webapp\" \ndebug=\"0\" reloadable=\"true\"> \n          <Manager className=\"org.apache.catalina.session.DistributedManager\"\n              debug=\"3\"\n              saveOnRestart=\"true\"\n              maxActiveSessions=\"-1\"\n              minIdleSwap=\"-1\"\n              maxIdleSwap=\"-1\"\n              maxIdleBackup=\"-1\">\n                <Store className=\"org.apache.catalina.session.FileStore\"/>\n          </Manager>\n        </Context>\n\nRegards\nKeith", "count": 0, "id": 8515, "time": "2001-12-02T16:01:24Z", "bug_id": 5229, "creation_time": "2001-12-02T16:01:24Z", "is_private": false}, {"count": 1, "tags": [], "creator": "keithcsl@ihug.co.nz", "attachment_id": null, "text": "Hi\nI have looked into the code deeper and found the problem. When the first \ngetSession() is called, the session is replicated using multicast. At this time \nthe multicast receiver is sleeping.\n\nDuring this time, the session is modified (ie modify the object that is bound \nto the session). When the multicast receiver wakes up and start receiving, it \noverwrites the changes to the session.\n\nTomcat somehow needs to know how to replicate with the guarantee that it will \nnot overwrite new session state.", "id": 8519, "time": "2001-12-02T16:49:40Z", "bug_id": 5229, "creation_time": "2001-12-02T16:49:40Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 5229, "attachment_id": null, "id": 35223, "time": "2003-04-15T16:04:10Z", "creator": "remm@apache.org", "creation_time": "2003-04-15T16:04:10Z", "is_private": false, "text": "The cluster component has been significantly refactored since."}, {"count": 3, "tags": [], "bug_id": 5229, "attachment_id": null, "id": 35224, "time": "2003-04-15T16:04:29Z", "creator": "remm@apache.org", "creation_time": "2003-04-15T16:04:29Z", "is_private": false, "text": "Forgot to mark as fixed."}]