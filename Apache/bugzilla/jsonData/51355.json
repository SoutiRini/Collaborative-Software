[{"count": 0, "tags": [], "creator": "alex@tessov.com", "attachment_id": null, "id": 147022, "time": "2011-06-10T17:05:20Z", "bug_id": 51355, "creation_time": "2011-06-10T17:05:20Z", "is_private": false, "text": "Hello.\n\nI've found a bug, and fixed it. If httpd.conf contains something like this:\n---------------\n<VirtualHost *:80>\n    DocumentRoot \"/var/html\"\n    ServerName www.myserver.com\n    ServerAlias myserver.com\n\n    AddHandler fcgid-script fcg fcgi fpl\n    FcgidCmdOptions /var/www/script1.fcgi \\\n          MinProcesses 12 \\\n          IOTimeout 60\n\n    FcgidCmdOptions \"/var/www/script2.fcgi\" \\\n\tMaxProcesses 1\n    ...\n</VirtualHost>\n---------------\n, i.e. there are 2 FcgidCmdOptions statements, MaxProcesses for script2.fcgi doesn't work. Even if it's set to 1, mod_fcgid creates many instances of the class.\nTo fix this, in fcgid_spawn_ctl.c, please replace this string:\n&& current_node->vhost_id == sconf->vhost_id\nwith this one:\n&& current_node->vhost_id == command->vhost_id\n\nThank you.\n\nHave a good day,\nSincerely Alex"}, {"count": 1, "tags": [], "bug_id": 51355, "attachment_id": null, "text": "Revision 1037727 - Directory Listing\nModified Mon Nov 22 14:08:29 2010 UTC (13 months, 3 weeks ago) by trawick\n\nFix regression in 2.3.6 which broke process controls when using vhost-\nspecific configuration.\n\nvhost_id was referenced from the wrong structure, and never matched\nunless there were no vhost-specific directives in the vhost of the\nrequest.\n\n--- httpd/mod_fcgid/trunk/modules/fcgid/fcgid_spawn_ctl.c\t2010/11/22 14:08:25\t1037726\n+++ httpd/mod_fcgid/trunk/modules/fcgid/fcgid_spawn_ctl.c\t2010/11/22 14:08:29\t1037727\n@@ -178,7 +178,7 @@\n         if (current_node->inode == command->inode\n             && current_node->deviceid == command->deviceid\n             && !strcmp(current_node->cmdline, command->cmdline)\n-            && current_node->vhost_id == sconf->vhost_id\n+            && current_node->vhost_id == command->vhost_id\n             && current_node->uid == command->uid\n             && current_node->gid == command->gid)\n             break;\n\nAlready done for 2.3.7, provided this was the instance you meant.  Closing", "id": 152960, "time": "2012-01-19T23:09:17Z", "creator": "wrowe@apache.org", "creation_time": "2012-01-19T23:09:17Z", "is_private": false}]