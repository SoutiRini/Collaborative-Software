[{"count": 0, "tags": [], "creator": "mh@notano.de", "attachment_id": null, "id": 143896, "time": "2011-02-02T07:39:01Z", "bug_id": 50706, "creation_time": "2011-02-02T07:39:01Z", "is_private": false, "text": "ant-task \"undeploy\" fails:\n\nError message from \"ant undeploy\" (using working build.xml & deployer.properties input-files):\n\nFAIL - Tried to use command /undeploy via a GET request but POST is required\n(as templated in file  java/org/apache/catalina/manager/LocalStrings.properties line 94)\n\n\nclass UndeployTask uses AbstractCatalinaTask.execute(String)\n(see line 79 of file java/org/apache/catalina/ant/UndeployTask.java)\n\nclass AbstractCatalinaTask.execute(String) uses http-method GET if InputStream is null (see line 196 of file java/org/apache/catalina/ant/AbstractCatalinaTask.java)\n\n\n\nJust Info: \n\n\"ant deploy\" for an already deployed web-application undeploys and deploys the web-application without errors.\n\nrequesting undeploy via a webbrowser works without errors."}, {"count": 1, "tags": [], "bug_id": 50706, "attachment_id": null, "id": 143898, "time": "2011-02-02T08:04:02Z", "creator": "markt@apache.org", "creation_time": "2011-02-02T08:04:02Z", "is_private": false, "text": "You are using the wrong url."}, {"count": 2, "tags": [], "creator": "mh@notano.de", "attachment_id": null, "id": 143900, "time": "2011-02-02T08:40:46Z", "bug_id": 50706, "creation_time": "2011-02-02T08:40:46Z", "is_private": false, "text": "I tried hard to find my error in the url, but haven't, sorry.\n\n(In reply to comment #1)\n> You are using the wrong url.\nThe error message is somewhat missleading than?\n\nHopefully URL is the same for \"deploy\" and \"undeploy\":\n\nI am using \"http://localhost:8080/manager/html\":\n\n-------------------------------------------------------------------\n...\n<property name=\"url\" value=\"http://localhost:8080/manager/html\"/>\n...\n<target name=\"deploy\" description=\"Deploy web application\">\n    <deploy \n      url=\"${url}\" \n      username=\"${username}\" \n      password=\"${password}\"\n      path=\"${apppath}\" \n      war=\"${appname}.war\" \n      update=\"true\" \n    />\n  </target>\n\n  <target name=\"undeploy\" description=\"Undeploy web application\">\n    <undeploy \n      url=\"${url}\" \n      username=\"${username}\" \n      password=\"${password}\" \n      path=\"${apppath}\" \n   />\n  </target>\n-------------------------------------------------------------------"}, {"count": 3, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "id": 143905, "time": "2011-02-02T09:02:46Z", "bug_id": 50706, "creation_time": "2011-02-02T09:02:46Z", "is_private": false, "text": "(In reply to comment #2)\n> I am using \"http://localhost:8080/manager/html\":\n\nAutomatic tools, such as this one, should use URL of\nhttp://localhost:8080/manager/text\n\nand a user with the role of \"manager-script\".\n\nIt is recommended to never assign \"manager-script\" and \"manager-gui\" roles to the same user, but use separate users for these tasks.\n\nThe docs in 7.0 were updated recently. If anything else is needed, patches for webapps/docs are welcome."}]