[{"count": 0, "tags": [], "bug_id": 12140, "attachment_id": null, "is_private": false, "id": 21922, "time": "2002-08-28T20:58:02Z", "creator": "fmgomes@pcrj.rj.gov.br", "creation_time": "2002-08-28T20:58:02Z", "text": "The Administration WebApp does not start ... looking up the error log , i found\nout catalina is not able to load strus.jar in the WEB-INF/lib . I moved it to\nthe commom classloader dir and then the application loaded successfully .\n(shared dir  didnt work also, why ?? ) \nI noticed this bug in both distribution versions (LE1dk1.4 and standart)\n\nI guest the classloader got somehow confused with the \"..\" redirection since the\napp is loaded via a .xml that redirects to another webapp dir inside server...\nheres the log along with stack trace\n\n2002-08-28 17:50:24 WebappLoader[/admin]: Deploying class repositories to work\ndirectory C:\\jakarta-tomcat-4.1.9\\work\\Standalone\\localhost\\admin\n2002-08-28 17:50:24 WebappLoader[/admin]: Deploy class files /WEB-INF/classes to\nC:\\jakarta-tomcat-4.1.9\\bin\\..\\webapps\\..\\server\\webapps\\admin\\WEB-INF\\classes\n2002-08-28 17:50:24 WebappLoader[/admin]: Deploy JAR /WEB-INF/lib/struts.jar to\nC:\\jakarta-tomcat-4.1.9\\bin\\..\\webapps\\..\\server\\webapps\\admin\\WEB-INF\\lib\\struts.jar\n2002-08-28 17:50:25 ContextConfig[/admin] Exception processing JAR at resource\npath /WEB-INF/lib/struts.jar\njavax.servlet.ServletException: Exception processing JAR at resource path\n/WEB-INF/lib/struts.jar\n\tat org.apache.catalina.startup.ContextConfig.tldScanJar(ContextConfig.java:930)\n\tat org.apache.catalina.startup.ContextConfig.tldScan(ContextConfig.java:868)\n\tat org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:647)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:243)\n\tat\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:166)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:3445)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:821)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:807)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:579)\n\tat\norg.apache.catalina.core.StandardHostDeployer.addChild(StandardHostDeployer.java:529)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.commons.beanutils.MethodUtils.invokeMethod(MethodUtils.java:216)\n\tat org.apache.commons.digester.SetNextRule.end(SetNextRule.java:260)\n\tat org.apache.commons.digester.Digester.endElement(Digester.java:830)\n\tat org.apache.xerces.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:559)\n\tat org.apache.xerces.impl.XMLNamespaceBinder.endElement(XMLNamespaceBinder.java:646)\n\tat\norg.apache.xerces.impl.dtd.XMLDTDValidator.handleEndElement(XMLDTDValidator.java:2978)\n\tat org.apache.xerces.impl.dtd.XMLDTDValidator.endElement(XMLDTDValidator.java:918)\n\tat\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.handleEndElement(XMLDocumentFragmentScannerImpl.java:1145)\n\tat\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:988)\n\tat\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1446)\n\tat\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:333)\n\tat\norg.apache.xerces.parsers.StandardParserConfiguration.parse(StandardParserConfiguration.java:529)\n\tat\norg.apache.xerces.parsers.StandardParserConfiguration.parse(StandardParserConfiguration.java:585)\n\tat org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:147)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1148)\n\tat org.apache.commons.digester.Digester.parse(Digester.java:1302)\n\tat\norg.apache.catalina.core.StandardHostDeployer.install(StandardHostDeployer.java:335)\n\tat org.apache.catalina.core.StandardHost.install(StandardHost.java:803)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:452)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:409)\n\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:879)\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:368)\n\tat\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:166)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1196)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:738)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1188)\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:347)\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:497)\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:2188)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:510)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\n----- Root Cause -----\njava.io.IOException: O sistema n\u00e3o pode encontrar o caminho especificado\n\tat java.io.WinNTFileSystem.createFileExclusively(Native Method)\n\tat java.io.File.checkAndCreate(File.java:1294)\n\tat java.io.File.createTempFile(File.java:1382)\n\tat java.io.File.createTempFile(File.java:1419)\n\tat sun.net.www.protocol.jar.URLJarFile$1.run(URLJarFile.java:169)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.net.www.protocol.jar.URLJarFile.retrieve(URLJarFile.java:164)\n\tat sun.net.www.protocol.jar.URLJarFile.getJarFile(URLJarFile.java:42)\n\tat sun.net.www.protocol.jar.JarFileFactory.get(JarFileFactory.java:78)\n\tat sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:85)\n\tat sun.net.www.protocol.jar.JarURLConnection.getJarFile(JarURLConnection.java:69)\n\tat org.apache.catalina.startup.ContextConfig.tldScanJar(ContextConfig.java:906)\n\tat org.apache.catalina.startup.ContextConfig.tldScan(ContextConfig.java:868)\n\tat org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:647)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:243)\n\tat\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:166)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:3445)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:821)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:807)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:579)\n\tat\norg.apache.catalina.core.StandardHostDeployer.addChild(StandardHostDeployer.java:529)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.commons.beanutils.MethodUtils.invokeMethod(MethodUtils.java:216)\n\tat org.apache.commons.digester.SetNextRule.end(SetNextRule.java:260)\n\tat org.apache.commons.digester.Digester.endElement(Digester.java:830)\n\tat org.apache.xerces.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:559)\n\tat org.apache.xerces.impl.XMLNamespaceBinder.endElement(XMLNamespaceBinder.java:646)\n\tat\norg.apache.xerces.impl.dtd.XMLDTDValidator.handleEndElement(XMLDTDValidator.java:2978)\n\tat org.apache.xerces.impl.dtd.XMLDTDValidator.endElement(XMLDTDValidator.java:918)\n\tat\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.handleEndElement(XMLDocumentFragmentScannerImpl.java:1145)\n\tat\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:988)\n\tat\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(XMLDocumentFragmentScannerImpl.java:1446)\n\tat\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:333)\n\tat\norg.apache.xerces.parsers.StandardParserConfiguration.parse(StandardParserConfiguration.java:529)\n\tat\norg.apache.xerces.parsers.StandardParserConfiguration.parse(StandardParserConfiguration.java:585)\n\tat org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:147)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1148)\n\tat org.apache.commons.digester.Digester.parse(Digester.java:1302)\n\tat\norg.apache.catalina.core.StandardHostDeployer.install(StandardHostDeployer.java:335)\n\tat org.apache.catalina.core.StandardHost.install(StandardHost.java:803)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:452)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:409)\n\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:879)\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:368)\n\tat\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:166)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1196)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:738)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1188)\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:347)\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:497)\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:2188)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:510)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\n\n2002-08-28 17:50:25 ContextConfig[/admin]: Marking this application unavailable\ndue to previous error(s)\n2002-08-28 17:50:25 StandardManager[/admin]: Seeding random number generator\nclass java.security.SecureRandom\n2002-08-28 17:50:25 StandardManager[/admin]: Seeding of random number generator\nhas been completed\n2002-08-28 17:50:25 StandardContext[/admin]: Context startup failed due to\nprevious errors"}, {"count": 1, "tags": [], "bug_id": 12140, "attachment_id": null, "id": 21947, "time": "2002-08-29T08:11:21Z", "creator": "remm@apache.org", "creation_time": "2002-08-29T08:11:21Z", "is_private": false, "text": "The JVM temp directory must exist for Tomcat to behave properly."}, {"count": 2, "tags": [], "bug_id": 12140, "attachment_id": null, "id": 22140, "time": "2002-09-02T22:19:33Z", "creator": "fmgomes@pcrj.rj.gov.br", "creation_time": "2002-09-02T22:19:33Z", "is_private": false, "text": "OK, I solved the issue creating a 'temp' dir under CATALINA_HOME . Since the\n'temp' dir is a new requirement in Tomcat 4.1.x (It does not happen if I deploy\nthe application in a Tomcat 4.0.3) , is it possible to put an empty temp dir in\nthe binary distribution ? It took me 2 days , trying to find what was the\nproblem, until I posted this bug ..."}, {"count": 3, "tags": [], "bug_id": 12140, "attachment_id": null, "id": 33025, "time": "2003-03-12T13:32:22Z", "creator": "e4screen@yahoo.de", "creation_time": "2003-03-12T13:32:22Z", "is_private": false, "text": "I think a better solution is to create the temp directory in the catalina script\nbecause the temp directory can be specified as an environment variable and can\ndiffer from the default $CATALINA_BASE/temp directory.\n\n"}, {"count": 4, "tags": [], "bug_id": 12140, "attachment_id": null, "id": 33103, "time": "2003-03-13T07:21:21Z", "creator": "e4screen@yahoo.de", "creation_time": "2003-03-13T07:21:21Z", "is_private": false, "text": "*** Bug 17910 has been marked as a duplicate of this bug. ***"}]