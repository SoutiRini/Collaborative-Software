[{"count": 0, "tags": [], "creator": "doh@myrealbox.com", "attachment_id": null, "id": 43206, "time": "2003-08-24T00:05:32Z", "bug_id": 22678, "creation_time": "2003-08-24T00:05:32Z", "is_private": false, "text": "When making a custom tag with the javax.servlet.jsp.tagext.TagSupport instead \nof the tag javax.servlet.jsp.tagext.BodyTagSupport it fails.\n\nFollowing code will not work:\n\npackage tags;\n\nimport javax.servlet.jsp.JspException;\nimport javax.servlet.jsp.tagext.TagSupport;\nimport javax.servlet.http.HttpServletRequest;\n\npublic class CounterTag extends TagSupport {\n\n   public int doStartTag() throws JspException {\n      try {\n         pageContext.getOut().print(\"Hello world\");\n      } catch(java.io.IOException ex) {\n         throw new JspException(ex.getMessage());\n      }\n      return SKIP_BODY;\n   }\n   public int doEndTag() throws JspException {\n      return EVAL_PAGE;\n   }\n}\n\n\n----------------------------------\nServer response:\n\n\n\njava.lang.IllegalArgumentException: -48\n        at \norg.apache.jasper.compiler.SmapStratum$LineInfo.setOutputLineIncrement\n(SmapStratum.java:124)\n        at org.apache.jasper.compiler.SmapStratum.optimizeLineSection\n(SmapStratum.java:221)\n        at org.apache.jasper.compiler.SmapUtil.evaluateNodes(SmapUtil.java:490)\n        at org.apache.jasper.compiler.SmapUtil.generateSmap(SmapUtil.java:123)\n        at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:301)\n        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:453)\n        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:439)\n        at org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:555)\n        at org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:300)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:293)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:286)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:206)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:254)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n        at org.apache.catalina.core.StandardContextValve.invokeInternal\n(StandardContextValve.java:256)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:210)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:190)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:175)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:156)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n        at org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:974)\n        at org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:207)\n        at org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:647)\n        at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:489)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:575)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:649)\n        at java.lang.Thread.run(Thread.java:536)"}, {"count": 1, "tags": [], "bug_id": 22678, "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of 22277 ***", "id": 43207, "time": "2003-08-24T02:48:09Z", "creator": "ecarmich@alumni.rice.edu", "creation_time": "2003-08-24T02:48:09Z", "is_private": false}]