[{"count": 0, "tags": [], "text": "When using AJP and APR, in the access-logs the address of the machine running\nthe httpd gets recorded as remote IP address and not the address of the machine\nwhere the request originates (where the client browser runs on). \nServletRequest#getRemoteAddress() shows the same behaviour.\nWhat I consider more serious is that the RemoteAddrValve is rendered useless.\n\nI've verified this on a stock Tomcat 5.5.10 binary distribution connected to an\nApache httpd 2.0.54 using JK-1.2.14.", "attachment_id": null, "id": 77853, "creator": "bugzilla@schoenhaber.de", "time": "2005-07-30T18:21:50Z", "bug_id": 35941, "creation_time": "2005-07-30T18:21:50Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 35941, "attachment_id": null, "id": 77856, "time": "2005-07-30T18:27:52Z", "creator": "bugzilla@schoenhaber.de", "creation_time": "2005-07-30T18:27:52Z", "is_private": false, "text": "For completeness' sake I should mention:\nif APR is not used, no Exception is thrown."}, {"count": 2, "attachment_id": null, "bug_id": 35941, "is_private": false, "id": 101796, "time": "2007-04-17T05:25:32Z", "creator": "cris.daniluk@gmail.com", "creation_time": "2007-04-17T05:25:32Z", "tags": [], "text": "This doesn't seem to be fixed in 5.5.20, connecting with AJP/1.3. The\ndocumentation does not indicate any special behavior required to utilize this\nfunctionality."}, {"count": 3, "tags": [], "bug_id": 35941, "attachment_id": null, "id": 101813, "time": "2007-04-17T08:04:37Z", "creator": "remm@apache.org", "creation_time": "2007-04-17T08:04:37Z", "is_private": false, "text": "I doubt that this is the case. I think you should be posting about this on the\nuser list instead."}, {"count": 4, "tags": [], "text": "This works as expected with:\nhttpd 2.2.4, mod_proxy_ajp, Tomcat 5.5.25, Tomcat-Native 1.1.10\n\nStill check earlier versions...", "attachment_id": null, "id": 107793, "creator": "markt@apache.org", "time": "2007-09-06T17:01:08Z", "bug_id": 35941, "creation_time": "2007-09-06T17:01:08Z", "is_private": false}, {"count": 5, "tags": [], "text": "It also works with httpd 2.0.59, mod_jk 1.2.25, Tomcat 5.5.25 and Tomcat-Native\n1.1.10\n\nI am not going to rule out a bug in an earlier version but if you still see this\nissue, an upgrade to the latest versions should fix it. If it doesn't, it is a\nconfiguration issue and you should use the users list for further assistance in\nthat case.", "attachment_id": null, "id": 107794, "creator": "markt@apache.org", "time": "2007-09-06T17:41:50Z", "bug_id": 35941, "creation_time": "2007-09-06T17:41:50Z", "is_private": false}, {"count": 6, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "text": "With APR as shipped for httpd 2.2.4, there was a bug looking up the remote IP,\nand it's quite possible the apr-ajp connector overwrites the server address with\nthe remote IP when it becomes known.  Although this does not sound like your bug,\nit's something to be aware of, and something to avoid.\n\nIt's addressed in the last two versions of APR 1.2.x, and in the httpd 2.2.6\ndistribution, so hopefully it's the last we would see of this bug.  It only\noccurred when AcceptEx caught the connection on Windows 2000, and then apr\nused traditional socket calls to determine the remote IP address. ", "id": 107804, "time": "2007-09-06T19:05:44Z", "bug_id": 35941, "creation_time": "2007-09-06T19:05:44Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 35941, "attachment_id": null, "is_private": false, "id": 107809, "time": "2007-09-06T19:17:10Z", "creator": "markt@apache.org", "creation_time": "2007-09-06T19:17:10Z", "text": "For the record, I build Tomcat native with APR 1.2.9 for both of the above tests."}]