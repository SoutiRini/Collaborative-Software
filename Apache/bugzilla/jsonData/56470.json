[{"count": 0, "tags": [], "bug_id": 56470, "is_private": false, "id": 174927, "attachment_id": 31569, "creator": "chris.holman@awltux.com", "creation_time": "2014-04-29T10:19:35Z", "time": "2014-04-29T10:19:35Z", "text": "Created attachment 31569\nPatch file for LogCapturer.java\n\nThe logcontent task outputs the log on one single line.\n\nUsing the following in the AntUnit test:\n\n<project> \n...\n\t<target name=\"tearDown\">\n\t\t<echo>This line has no EOL character appended...</echo>\n\t\t<echo>So this is on the same line in the log file</echo>\n\t\t<!-- Write to logfile -->\n\t\t<concat destfile=\"${logfile}\" fixlastline=\"yes\">\n\t\t\t<au:logcontent/>\n\t\t</concat>\t\t\n\t</target>\n</project>\n\nThis can be easily fixed in: org.apache.ant.antunit.LogCapturer\n\nThere is a SVN patch attached that adds a LINE_SEPARATOR to the end of each log entry in the LogCapturer.messageLogged method."}, {"count": 1, "tags": [], "bug_id": 56470, "attachment_id": null, "text": "changes similar to your patch have been committed as svn revision 1591972\n\nI'd like to wait for the Gump run to determine whether an option to insert line breaks is needed.", "id": 174992, "time": "2014-05-02T16:54:35Z", "creator": "bodewig@apache.org", "creation_time": "2014-05-02T16:54:35Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 56470, "attachment_id": null, "text": "One test inside Ant's own testsuite fails, this is because it tests the order of two adjacent log messages - something you cannot do with separate assertLogContains assertions. [1]\n\nI'd add an attribute to assertLogContains and the logcontent resource - mergeLines with default true? - and modify LogCapturer to provide logs with and without merged lines.\n\n[1] testRedirector14 in src/tests/antunit/taskdefs/exec/apply-test.xml", "id": 175010, "time": "2014-05-04T04:57:11Z", "creator": "bodewig@apache.org", "creation_time": "2014-05-04T04:57:11Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 56470, "attachment_id": null, "text": "added mergeLines in several places and retained backwards compatibility.", "id": 175071, "time": "2014-05-07T04:07:36Z", "creator": "bodewig@apache.org", "creation_time": "2014-05-07T04:07:36Z", "is_private": false}]