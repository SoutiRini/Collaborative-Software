[{"count": 0, "tags": [], "bug_id": 23267, "is_private": false, "id": 44331, "creation_time": "2003-09-19T09:38:43Z", "time": "2003-09-19T09:38:43Z", "creator": "gabriele.garuglieri@infoblu.it", "text": "I install a default webapp with manager install command using a context descriptor.\n<Host> is defined with unpackWARs=\"false\" autoDeploy=\"true\" liveDeploy=\"false\".\n\nIf i install with \n<Context path=\"\" docBase=\"C:\\home\\cvshome\\ivnext-2.3\\build/ant-build/infoviabilita\"\nie the docBase points to a directory, when i launch remove command with\nparameter path=/ i get the following:\n2003-09-19 10:22:57 Manager: remove: Removing web application at '/'\n2003-09-19 10:22:57 StandardHost[localhost]: Removing web application at context\npath \nIn this case neither context.xml nor the app dir are in the webapps dir.\n\nIf i install with\n<Context path=\"\" docBase=\"infoviabilita.war\" with both context.xml and war into\nwebapps dir, when i launch remove command with parameter path=/ i get the following:\n2003-09-19 10:24:32 Manager: remove: Removing web application at '/'\n2003-09-19 10:24:32 StandardHost[localhost]: Removing web application at context\npath \n2003-09-19 10:24:32 StandardHost[localhost]: Error removing application at\ncontext path \njava.lang.NullPointerException\n\tat\norg.apache.catalina.core.StandardHostDeployer.remove(StandardHostDeployer.java:534)\n\tat org.apache.catalina.core.StandardHost.remove(StandardHost.java:877)\n\tat org.apache.catalina.servlets.ManagerServlet.remove(ManagerServlet.java:843)\n\tat org.apache.catalina.servlets.ManagerServlet.doGet(ManagerServlet.java:352)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:553)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2416)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\n2003-09-19 10:24:32 Manager: ManagerServlet.remove[/]\njava.io.IOException: java.lang.NullPointerException\n\tat\norg.apache.catalina.core.StandardHostDeployer.remove(StandardHostDeployer.java:595)\n\tat org.apache.catalina.core.StandardHost.remove(StandardHost.java:877)\n\tat org.apache.catalina.servlets.ManagerServlet.remove(ManagerServlet.java:843)\n\tat org.apache.catalina.servlets.ManagerServlet.doGet(ManagerServlet.java:352)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:553)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2416)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n\tat java.lang.Thread.run(Thread.java:534)\n\nAfter this i find that the context is removed, but neither context.xml nor war\nfile are removed from webapps dir.\n\nBy the way, in the doc it says that if path parameter referes to the default\nwebapp it must be a \"zero length string\", but if i specify path= i get  \"Invalid\ncontext path  was specified\".", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 23267, "attachment_id": null, "is_private": false, "id": 45267, "time": "2003-10-08T22:43:39Z", "creator": "medthomas@ntlworld.com", "creation_time": "2003-10-08T22:43:39Z", "text": "I am not quite sure why you want to place the context.xml and your war file in \nthe webapps directory. Your web app is going to get deployed twice (once with \na context path of \"\" and once with a context path of \"/infoviabilita\"\n\nIf you want to deploy your app with a context path of \"\" either use a context \nfile with the docbase somewhere other than the webapps directory or rename \nyour war file to ROOT.war and place it in the webapps directory without a \ncontext file. I have confirmed that both of these options will work without \nerror.\n\nAnyway, the NPE has been fixed in TC5 - thanks Remy :) - but the patch does \nnot port directly across to TC4. It looks like most/all of the deployer \nchanges made to TC5 would have to be ported and this is unlikely to happen \njust to stop this NPE.\n\nI am going to mark this bug as WONTFIX as it was reported against TC4."}, {"count": 2, "tags": [], "bug_id": 23267, "text": "*** Bug 16762 has been marked as a duplicate of this bug. ***", "id": 50023, "time": "2004-01-04T20:03:54Z", "creator": "medthomas@ntlworld.com", "creation_time": "2004-01-04T20:03:54Z", "is_private": false, "attachment_id": null}]