[{"count": 0, "tags": [], "creator": "romanivanov@netscape.net", "attachment_id": null, "id": 14688, "time": "2002-04-25T06:30:39Z", "bug_id": 8500, "creation_time": "2002-04-25T06:30:39Z", "is_private": false, "text": "I have server with restricted access as following:\n\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n\n<VirtualHost 1.2.3.4:9090>\n    ServerAdmin admin@server.ru\n    DocumentRoot /web/docs/cms/\n    ServerName server.ru\n    ErrorLog \"|/web/apache/addons/sbin/cronolog\n/web/apache/logs/server.ru/%Y/%m/error_log\"\n    CustomLog \"|/web/apache/addons/sbin/cronolog\n/web/apache/logs/server.ru/%Y/%m/access_log_%d\" combined\n</VirtualHost>\nWhen I accessing server it asks about password and I am passing authorization\nsuccessfully. but in log file I dont see my authorized user name.\n\n106.109.1.230 - - [25/Apr/2002:10:11:43 +0500] \"GET / HTTP/1.1\" 401 972 \"-\"\n\"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:0.9.4.1) Gecko/20020314\nNetscape6/6.2.2\"\n106.109.1.230 - - [25/Apr/2002:10:11:53 +0500] \"GET / HTTP/1.1\" 200 328 \"-\"\n\"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:0.9.4.1) Gecko/20020314\nNetscape6/6.2.2\"\n106.109.1.230 - - [25/Apr/2002:10:11:54 +0500] \"GET /top-nav.html HTTP/1.1\" 200\n1294 \"http://server.ru:9090/\" \"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;\nrv:0.9.4.1) Gecko/20020314 Netscape6/6.2.2\"\n106.109.1.230 - - [25/Apr/2002:10:11:54 +0500] \"GET /products.html HTTP/1.1\" 200\n1924 \"http://server.ru:9090/\" \"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;\nrv:0.9.4.1) Gecko/20020314 Netscape6/6.2.2\""}, {"count": 1, "tags": [], "bug_id": 8500, "attachment_id": 1690, "id": 14703, "creation_time": "2002-04-25T09:36:58Z", "time": "2002-04-25T09:36:58Z", "creator": "romanivanov@netscape.net", "text": "Created attachment 1690\ntwo lines in config file wich are making this problem", "is_private": false}, {"count": 2, "tags": [], "creator": "jerenkrantz@apache.org", "text": "AuthType Basic works for me and combined logging outputs the correct remote name. \n\nIf you want more help, you need to provide more details w.r.t. authentication.\n\nThanks for using Apache!", "id": 14940, "time": "2002-04-28T07:06:06Z", "bug_id": 8500, "creation_time": "2002-04-28T07:06:06Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "bugzilla@ab.thatcow.com", "text": "I am seeing something similar. Comparing to the previous notes, the differences here is I am on httpd 2.0.44, and not logging through a pipe (still on Sun Solaris - 2.9 here). I am triggering the authentication by sending basic WWW-Authenticate: headers in PHP [by calling  header(\"WWW-Authenticate: Basic realm=\\\"Reviews\\\"\"); if it matters]. Under httpd 1.3, the user was being logged just fine with the same auth code. The authentication works fine and this is a mere annoyance, but I figure I'm not the only one, just seemingly a small minority...\n\nAfraid I'm at a loss on what else might be unique here. For the record, my configure command was \"$ ./configure --prefix=/usr/local/apache2 --enable-so --enable-rewrite\"", "id": 31838, "attachment_id": null, "bug_id": 8500, "creation_time": "2003-02-24T06:36:31Z", "time": "2003-02-24T06:36:31Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 8500, "attachment_id": null, "text": "ooooh, let's puzzle out. These are two problems.\n\nRoman: The difference between 1.3 and 2.0 is, that in 1.3 the remote user was\nwrongly stored in the connection structure. This was corrected in 2.0 by storing\nit in the request structure, but seems to have the drawback, that it won't be\ninherited during internal redirects. You have to protect the cgi-script itself.\nChanging the logformat to %<u may work around that problem as well. See also Bug\n11602.\n\nAndrew: I'd guess you have no AuthType and AuthName configured? If PHP doesn't\nfill in the appropriate field within the request structure (r->user), there's no\nchance that the user get logged. I'm wondering whether this worked in 1.3?\n\nHowever, accepting this as a bug. But I don't know, when it will be fixed. We\nneed a resonable solution for this, perhaps in conclusion with some concept\npuzzling.\n\nThanks.", "id": 32321, "time": "2003-03-03T13:58:16Z", "creator": "nd@perlig.de", "creation_time": "2003-03-03T13:58:16Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 8500, "attachment_id": null, "text": "Yes, I'm not doing AuthType or AuthName in the apache config, just sending a header if I don't get a REMOTE_USER. Under 1.3, I always did get a user logged by httpd.", "id": 32435, "time": "2003-03-05T04:04:03Z", "creator": "bugzilla@ab.thatcow.com", "creation_time": "2003-03-05T04:04:03Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 8500, "attachment_id": null, "id": 33105, "creation_time": "2003-03-13T08:37:25Z", "time": "2003-03-13T08:37:25Z", "creator": "bugzilla@ab.thatcow.com", "text": "I've hacked the PHP code to set r->user and it works for me.\n\n\n\n\nNow to see if the PHP folks will take it as a patch or not.\n", "is_private": false}, {"count": 7, "tags": [], "bug_id": 8500, "attachment_id": null, "id": 33115, "time": "2003-03-13T14:06:53Z", "creator": "nd@perlig.de", "creation_time": "2003-03-13T14:06:53Z", "is_private": false, "text": "ah, cool. Can you provide the bug# (of PHP's bug tracker)? I'm just interested\nin that myself ;-) Thanks."}, {"count": 8, "tags": [], "bug_id": 8500, "attachment_id": null, "text": "Sure, it's bug #22672, at url http://bugs.php.net/22672\n", "id": 33131, "time": "2003-03-13T17:15:26Z", "creator": "bugzilla@ab.thatcow.com", "creation_time": "2003-03-13T17:15:26Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 8500, "attachment_id": null, "id": 75877, "time": "2005-06-03T01:33:23Z", "creator": "chip@force-elite.com", "creation_time": "2005-06-03T01:33:23Z", "is_private": false, "text": "PHP Problem -> Invalid."}]