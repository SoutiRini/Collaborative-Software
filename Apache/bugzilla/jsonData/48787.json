[{"count": 0, "tags": [], "bug_id": 48787, "is_private": false, "text": "I configured event mpm like so:\n\nServerRoot \"/opt/bw\"\nMutex default:logs\nListen 80\nLoadModule unixd_module modules/mod_unixd.so\nLoadModule serf_module modules/mod_serf.so\nLoadModule mpm_event_module modules/mod_mpm_event.so\nLoadModule log_config_module modules/mod_log_config.so\nLoadModule authz_core_module modules/mod_authz_core.so\nLoadModule authz_host_module modules/mod_authz_host.so\nLoadModule mime_magic_module modules/mod_mime_magic.so\nLoadModule mime_module modules/mod_mime.so\nLoadModule filter_module modules/mod_filter.so\nLoadModule env_module modules/mod_env.so\nLoadModule setenvif_module modules/mod_setenvif.so\nLoadModule negotiation_module modules/mod_negotiation.so\nLoadModule dir_module modules/mod_dir.so\nLoadModule status_module modules/mod_status.so\nLoadModule info_module modules/mod_info.so\nLoadModule autoindex_module modules/mod_autoindex.so\nLoadModule alias_module modules/mod_alias.so\nLoadModule lua_module modules/mod_lua.so\nUser i.galic\nGroup wheel\nDocumentRoot \"/opt/bw/htdocs\"\n<Directory />\n    Options FollowSymLinks\n    AllowOverride None\n    Require all denied\n</Directory>\nDirectoryIndex index.html\n<FilesMatch \"^\\.ht\">\n    Require all denied\n</FilesMatch>\nInclude etc/httpd/extra/log.conf\nErrorLog \"logs/error_log\"\nCustomLog \"logs/access_log\" combined-vhosts\nTypesConfig etc/httpd/mime.types\nMIMEMagicFile etc/httpd/magic\nInclude etc/httpd/extra/httpd-mpm.conf\nInclude etc/httpd/extra/httpd-multilang-errordoc.conf\nInclude etc/httpd/extra/httpd-autoindex.conf\nInclude etc/httpd/extra/httpd-languages.conf\nInclude etc/httpd/extra/httpd-vhosts.conf\nInclude etc/httpd/extra/httpd-default.conf\n\nThe important part here is ``Mutex default:logs''. When trying to start, the server get's a segmentation fault:\n\n(gdb) bt\n#0  0x00007f23b9e279aa in find_entry (ht=0x0, key=0x465960, klen=-1, val=0x0) at tables/apr_hash.c:260\n#1  0x00007f23b9e27ce4 in apr_hash_get (ht=0x0, key=0x465960, klen=-1) at tables/apr_hash.c:330\n#2  0x0000000000450979 in ap_set_mutex (cmd=0x7fff2900f450, dummy=0x1c2f838, arg=0x1c344ac \"\") at util_mutex.c:230\n#3  0x0000000000445d6c in invoke_cmd (cmd=0x671d68, parms=0x7fff2900f450, mconfig=0x1c2f838, args=0x1c344a0 \"default:logs\")\n    at config.c:767\n#4  0x00000000004471fb in ap_walk_config_sub (current=0x1c34460, parms=0x7fff2900f450, section_vector=0x1c2f420)\n    at config.c:1173\n#5  0x00000000004472b0 in ap_walk_config (current=0x1c34460, parms=0x7fff2900f450, section_vector=0x1c2f420) at config.c:1206\n#6  0x000000000044880c in ap_process_config_tree (s=0x1c05dc0, conftree=0x1c34460, p=0x1bfe138, ptemp=0x1c2c328)\n    at config.c:1813\n#7  0x0000000000426968 in main (argc=3, argv=0x7fff2900f688) at main.c:630\n(gdb)\n\nit fails because in server/util_mutex.c ``mxcfg_by_type'' is not set.\n\nIt only fails for event mpm, because so far ``ap_mutex_register()'' not been called.", "id": 134753, "time": "2010-02-21T23:10:29Z", "creator": "i.galic@brainsware.org", "creation_time": "2010-02-21T23:10:29Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 48787, "attachment_id": null, "is_private": false, "id": 134775, "time": "2010-02-22T17:21:29Z", "creator": "trawick@apache.org", "creation_time": "2010-02-22T17:21:29Z", "text": "Sorry for the aggravation.  Now fixed in trunk."}]