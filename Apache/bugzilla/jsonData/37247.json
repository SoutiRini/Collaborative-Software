[{"count": 0, "tags": [], "text": "I've been trying running a high load over a prolonged period, say ab -c 200 -n 1000000 http://my.site/\npage, and here the important thing is to choose a -c 200 that is large enough to have a constant busy \nqueue on each worker.\n\nAfter doing this for say 15-20 minutes and then stopping ab with ctrl-c, I have a whole bunch of busy \nworkers that doesn't seem to go away.", "is_private": false, "id": 81748, "creator": "puckman@taglab.com", "time": "2005-10-26T08:16:51Z", "bug_id": 37247, "creation_time": "2005-10-26T08:16:51Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "id": 81751, "time": "2005-10-26T09:04:55Z", "bug_id": 37247, "creation_time": "2005-10-26T09:04:55Z", "is_private": false, "text": "Which version of mod_jk, which of apache?"}, {"count": 2, "tags": [], "creator": "clamprecht@gmail.com", "text": "I can also confirm that we've seen the same thing under mod_jk 1.2.14 and \nApache 2.0.50 (prefork) on 32-bit linux.  Using mod_jk Pessimistic mode \ninstead of optimistic may have helped some, but it the problem still happens.  \nThe opposite also happened to us -- worker busy values were set to values near \nMAX_INT, possibly due to being decremented too many times, ending up below \nzero and wrapping around.  \n\nOur algorithm in the 'busyness' load balancing patch (see bug 36138) depends \non the worker \"busy\" values, so we put in a quick and dirty fix in that patch \nthat sets the busyness value to 0 anytime it gets below 0, but this doesn't \nhelp the case when it gets \"stuck\" higher than it should be.  See also the 4th \nand 5th paragraphs in the first comment of bug 36138.\n\nI think the \"busy\" value may have been initially added only for display \npurposes for the jk_status page, so keeping the busy values accurate may not \nhave been very important initially.  \n\nFinally, if you do an apache graceful restart under load, the mod_jk busyness \nvalues are usually all messed up.", "id": 81753, "time": "2005-10-26T09:26:59Z", "bug_id": 37247, "creation_time": "2005-10-26T09:26:59Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 37247, "attachment_id": null, "is_private": false, "id": 81850, "time": "2005-10-27T20:09:06Z", "creator": "puckman@taglab.com", "creation_time": "2005-10-27T20:09:06Z", "text": "Version is the latest release, 1.2.14 running on an apache2 (2.0.52) in prefork\nmode."}, {"count": 4, "tags": [], "bug_id": 37247, "attachment_id": null, "id": 81851, "time": "2005-10-27T20:10:45Z", "creator": "puckman@taglab.com", "creation_time": "2005-10-27T20:10:45Z", "is_private": false, "text": "I can confirm the restart under load resulting in large negative values.\n"}, {"count": 5, "tags": [], "text": "This was already fixed in the most recent versions of mod_jk.", "attachment_id": null, "id": 86904, "creator": "mturk@apache.org", "time": "2006-03-16T08:19:34Z", "bug_id": 37247, "creation_time": "2006-03-16T08:19:34Z", "is_private": false}]