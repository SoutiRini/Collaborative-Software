[{"count": 0, "tags": [], "bug_id": 42695, "attachment_id": null, "id": 104512, "time": "2007-06-18T12:42:38Z", "creator": "aitidirmustapha@hotmail.com", "creation_time": "2007-06-18T12:42:38Z", "is_private": false, "text": "I'm using apache 2.2.4 with mod_proxy\n\nMy config is:\n-------------\n\nProxyRequests off \n<Proxy balancer://tomcats/>  \n  BalancerMember ajp://testapp1.tres.bnc.ca:8881 route=z1.tc1 loadfactor=1 \n                                                 keepalive=On retry=30\n</Proxy> \n\n\nAnd I loss the connection for a few second and the problem occured few times \nper days.\n\nWhen I check the apache logs, I got a blancer problem even if tomcat still \nalive.\n\n\napache error logs:\n------------------\n\nMon Jun 11 16:03:42 2007] [error] proxy: AJP: failed to make connection to \nbackend: testapp1.tres.bnc.ca\n[Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:12 2007] [error] (146)Connection refused: proxy: AJP: attempt \nto connect to 10.57.165.56:8881 (testapp1.tres.bnc.ca) failed\n[Mon Jun 11 16:04:12 2007] [error] ap_proxy_connect_backend disabling worker \nfor (testapp1.tres.bnc.ca)\n[Mon Jun 11 16:04:12 2007] [error] proxy: AJP: failed to make connection to \nbackend: testapp1.tres.bnc.ca\n[Mon Jun 11 16:04:12 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:12 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:12 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:12 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:42 2007] [error] (146)Connection refused: proxy: AJP: attempt \nto connect to 10.57.165.56:8881 (testapp1.tres.bnc.ca) failed\n[Mon Jun 11 16:04:42 2007] [error] ap_proxy_connect_backend disabling worker \nfor (testapp1.tres.bnc.ca)\n[Mon Jun 11 16:04:42 2007] [error] proxy: AJP: failed to make connection to \nbackend: testapp1.tres.bnc.ca\n[Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:05:12 2007] [error] proxy: BALANCER: (balancer://tomcats). All \nworkers are in error state for route (z1.tc1)\n[Mon Jun 11 16:05:13 2007] [info] [client 10.57.159.118] Connection to child 5 \nestablished (server testweb.tres.bnc.ca:443)\n[Mon Jun 11 16:05:13 2007] [info] Seeding PRNG with 136 bytes of entropy\n[Mon Jun 11 16:05:13 2007] [info] [client 10.57.159.118] Connection to child 2 \nestablished (server testweb.tres.bnc.ca:443)\n[Mon Jun 11 16:05:13 2007] [info] Seeding PRNG with 136 bytes of entropy\n[Mon Jun 11 16:05:13 2007] [info] Client requested a 'session-resume' but we \nhave no such session.\n[Mon Jun 11 16:05:13 2007] [info] Client requested a 'session-resume' but we \nhave no such session.\n[Mon Jun 11 16:05:13 2007] [info] Initial (No.1) HTTPS request received for \nchild 2 (server testweb.tres.bnc.ca:443)\n[Mon Jun 11 16:05:13 2007] [info] Initial (No.1) HTTPS request received for \nchild 5 (server testweb.tres.bnc.ca:443)\n[Mon Jun 11 16:05:15 2007] [info] [client 10.57.159.118] Connection closed to \nchild 2 with unclean shutdown (server testweb.tres.bnc.ca:443)\n[Mon Jun 11 16:05:15 2007] [info] [client 10.57.159.118] Connection closed to \nchild 5 with unclean shutdown (server testweb.tres.bnc.ca:443)\n[Mon Jun 11 16:05:15 2007] [info] [client 10.57.159.118] Connection to child 3 \nestablished (server testweb.tres.bnc.ca:443)"}, {"count": 1, "tags": [], "bug_id": 42695, "attachment_id": null, "text": "More details regarding OS, Hardware, severity and Summary", "id": 104513, "time": "2007-06-18T12:48:33Z", "creator": "aitidirmustapha@hotmail.com", "creation_time": "2007-06-18T12:48:33Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 42695, "text": "Check catalina.out on Tomcat side. You probably have an error like:\nAll threads ({0}) are currently busy, waiting. Increase maxThreads ({1}) or\ncheck the servlet status.\nIncrease maxThreads in server.xml or find why the threads are hanging in TC.", "id": 104803, "time": "2007-06-28T00:45:04Z", "creator": "jfclere@gmail.com", "creation_time": "2007-06-28T00:45:04Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "jim@apache.org", "attachment_id": null, "text": "This is old. Please test/confirm with more recent versions and reopen if needed.", "id": 106296, "time": "2007-08-03T08:18:21Z", "bug_id": 42695, "creation_time": "2007-08-03T08:18:21Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 42695, "attachment_id": null, "id": 131107, "time": "2009-10-13T06:17:03Z", "creator": "kraudelt@zv.uni-wuerzburg.de", "creation_time": "2009-10-13T06:17:03Z", "is_private": false, "text": "When I move from 2.2.11 to 2.2.13 or 2.2.14, this problem occurs. When I move back to 2.2.11, the problem disappears. Apache HTTPD runs under Windows 2003SP2.\n\nMy configuration is:\n\n<Proxy balancer://sbhome1>\n    BalancerMember ajp://sbhome-tomcat1:8009/qisserver keepalive=On route=wzvx13\n    BalancerMember ajp://sbhome-tomcat4:8009/qisserver keepalive=On route=wzvx08\n    ProxySet lbmethod=bybusyness\n</Proxy>\nProxyPass /qisserver balancer://sbhome1 stickysession=JSESSIONID|jsessionid nofailover=On timeout=60\n\nThe error is:\n[Tue Oct 13 09:36:41 2009] [error] ajp_read_header: ajp_ilink_receive failed\n[Tue Oct 13 09:36:41 2009] [error] (120006)APR does not understand this error code: proxy: read response failed from 141.27.194.8:8009 (sbhome-tomcat4)\n[Tue Oct 13 09:36:41 2009] [error] proxy: BALANCER: (balancer://sbhome1). All workers are in error state for route (wzvx08)\n[Tue Oct 13 09:36:41 2009] [error] proxy: BALANCER: (balancer://sbhome1). All workers are in error state for route (wzvx08)\n\nTomcat is 6.0.18, Java is 1.5b16 on SLES10SP2 64Bit, VMWare ESX 3.5. During the errors in Apache's error.log (1-2 minutes), our Tomcat application seems not to respond and loses it's database connections. Our application logs show some kind of blackout (no entries) for the time of unresponsiveness. After 1-2 minutes, Tomcat continues to work without error.\n\nThere are no messages regarding threads nor anything else in Tomcat. The error occurs in high load (not overload) situations on both Tomcat servers."}, {"count": 5, "tags": [], "bug_id": 42695, "attachment_id": null, "id": 186299, "time": "2015-11-07T00:30:58Z", "creator": "aqqalukholm@gmail.com", "creation_time": "2015-11-07T00:30:58Z", "is_private": false, "text": "(In reply to Mustapha Ait-Idir from comment #0)\n> I'm using apache 2.2.4 with mod_proxy\n> \n> My config is:\n> -------------\n> \n> ProxyRequests off \n> <Proxy balancer://tomcats/>  \n>   BalancerMember ajp://testapp1.tres.bnc.ca:8881 route=z1.tc1 loadfactor=1 \n>                                                  keepalive=On retry=30\n> </Proxy> \n> \n> \n> And I loss the connection for a few second and the problem occured few times \n> per days.\n> \n> When I check the apache logs, I got a blancer problem even if tomcat still \n> alive.\n> \n> \n> apache error logs:\n> ------------------\n> \n> Mon Jun 11 16:03:42 2007] [error] proxy: AJP: failed to make connection to \n> backend: testapp1.tres.bnc.ca\n> [Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:03:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:03:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:12 2007] [error] (146)Connection refused: proxy: AJP:\n> attempt \n> to connect to 10.57.165.56:8881 (testapp1.tres.bnc.ca) failed\n> [Mon Jun 11 16:04:12 2007] [error] ap_proxy_connect_backend disabling worker \n> for (testapp1.tres.bnc.ca)\n> [Mon Jun 11 16:04:12 2007] [error] proxy: AJP: failed to make connection to \n> backend: testapp1.tres.bnc.ca\n> [Mon Jun 11 16:04:12 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:12 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:12 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:12 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:22 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:32 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:42 2007] [error] (146)Connection refused: proxy: AJP:\n> attempt \n> to connect to 10.57.165.56:8881 (testapp1.tres.bnc.ca) failed\n> [Mon Jun 11 16:04:42 2007] [error] ap_proxy_connect_backend disabling worker \n> for (testapp1.tres.bnc.ca)\n> [Mon Jun 11 16:04:42 2007] [error] proxy: AJP: failed to make connection to \n> backend: testapp1.tres.bnc.ca\n> [Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:42 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:04:52 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:05:02 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:05:12 2007] [error] proxy: BALANCER: (balancer://tomcats).\n> All \n> workers are in error state for route (z1.tc1)\n> [Mon Jun 11 16:05:13 2007] [info] [client 10.57.159.118] Connection to child\n> 5 \n> established (server testweb.tres.bnc.ca:443)\n> [Mon Jun 11 16:05:13 2007] [info] Seeding PRNG with 136 bytes of entropy\n> [Mon Jun 11 16:05:13 2007] [info] [client 10.57.159.118] Connection to child\n> 2 \n> established (server testweb.tres.bnc.ca:443)\n> [Mon Jun 11 16:05:13 2007] [info] Seeding PRNG with 136 bytes of entropy\n> [Mon Jun 11 16:05:13 2007] [info] Client requested a 'session-resume' but we \n> have no such session.\n> [Mon Jun 11 16:05:13 2007] [info] Client requested a 'session-resume' but we \n> have no such session.\n> [Mon Jun 11 16:05:13 2007] [info] Initial (No.1) HTTPS request received for \n> child 2 (server testweb.tres.bnc.ca:443)\n> [Mon Jun 11 16:05:13 2007] [info] Initial (No.1) HTTPS request received for \n> child 5 (server testweb.tres.bnc.ca:443)\n> [Mon Jun 11 16:05:15 2007] [info] [client 10.57.159.118] Connection closed\n> to \n> child 2 with unclean shutdown (server testweb.tres.bnc.ca:443)\n> [Mon Jun 11 16:05:15 2007] [info] [client 10.57.159.118] Connection closed\n> to \n> child 5 with unclean shutdown (server testweb.tres.bnc.ca:443)\n> [Mon Jun 11 16:05:15 2007] [info] [client 10.57.159.118] Connection to child\n> 3 \n> established (server testweb.tres.bnc.ca:443)\n\n(In reply to Mustapha Ait-Idir from comment #1)\n> More details regarding OS, Hardware, severity and Summary\n\n(In reply to jfclere from comment #2)\n> Check catalina.out on Tomcat side. You probably have an error like:\n> All threads ({0}) are currently busy, waiting. Increase maxThreads ({1}) or\n> check the servlet status.\n> Increase maxThreads in server.xml or find why the threads are hanging in TC.\n\n(In reply to Jim Jagielski from comment #3)\n> This is old. Please test/confirm with more recent versions and reopen if\n> needed.\n\n(In reply to Ralf Kraudelt from comment #4)\n> When I move from 2.2.11 to 2.2.13 or 2.2.14, this problem occurs. When I\n> move back to 2.2.11, the problem disappears. Apache HTTPD runs under Windows\n> 2003SP2.\n> \n> My configuration is:\n> \n> <Proxy balancer://sbhome1>\n>     BalancerMember ajp://sbhome-tomcat1:8009/qisserver keepalive=On\n> route=wzvx13\n>     BalancerMember ajp://sbhome-tomcat4:8009/qisserver keepalive=On\n> route=wzvx08\n>     ProxySet lbmethod=bybusyness\n> </Proxy>\n> ProxyPass /qisserver balancer://sbhome1 stickysession=JSESSIONID|jsessionid\n> nofailover=On timeout=60\n> \n> The error is:\n> [Tue Oct 13 09:36:41 2009] [error] ajp_read_header: ajp_ilink_receive failed\n> [Tue Oct 13 09:36:41 2009] [error] (120006)APR does not understand this\n> error code: proxy: read response failed from 141.27.194.8:8009\n> (sbhome-tomcat4)\n> [Tue Oct 13 09:36:41 2009] [error] proxy: BALANCER: (balancer://sbhome1).\n> All workers are in error state for route (wzvx08)\n> [Tue Oct 13 09:36:41 2009] [error] proxy: BALANCER: (balancer://sbhome1).\n> All workers are in error state for route (wzvx08)\n> \n> Tomcat is 6.0.18, Java is 1.5b16 on SLES10SP2 64Bit, VMWare ESX 3.5. During\n> the errors in Apache's error.log (1-2 minutes), our Tomcat application seems\n> not to respond and loses it's database connections. Our application logs\n> show some kind of blackout (no entries) for the time of unresponsiveness.\n> After 1-2 minutes, Tomcat continues to work without error.\n> \n> There are no messages regarding threads nor anything else in Tomcat. The\n> error occurs in high load (not overload) situations on both Tomcat servers."}]