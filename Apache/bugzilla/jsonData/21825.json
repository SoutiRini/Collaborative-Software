[{"count": 0, "tags": [], "creator": "fnicaise@motion-twin.com", "text": "When a property calls itself in build.xml, the build process hangs.\nex: myprop.src=${myprop.src} will make the build process hang.", "id": 41202, "time": "2003-07-23T11:47:24Z", "bug_id": 21825, "creation_time": "2003-07-23T11:47:24Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 21825, "is_private": false, "id": 41205, "time": "2003-07-23T11:56:03Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-07-23T11:56:03Z", "tags": [], "text": "I am not able to reproduce this.\nCan you give a simple build file that shows the problem?\nI tried the following:\n<project default=\"u\" name=\"p\">\n  <property name=\"myprop.src\" value=\"${myprop.src}\"/>\n  <target name=\"u\">\n    <echo>myprop is ${myprop.src}</echo>\n  </target>\n</project>\n\nThis works for 1.5, 1.5.3 and current ANT cvs.\n"}, {"count": 2, "tags": [], "bug_id": 21825, "text": "In fact I load the property from an external property file.\nAnt tries to read the property file and hangs when finding such a property.\n\nex:\nbuild.properties\n---------\nproject.src=${project.src}/src\n\n\nbuild.xml\n---------\n<project basedir=\".\" default=\"t1\" name=\"bla\">     \n        <property file=\"build.properties\"/>\n\n        <target name=\"t1\" >\n\t\t<echo message=\"blah\" />\n\t</target>\n</project>\n\nWhat is weird is that now I get the following error (which of course is good):\n\"Property project.src was circularly defined.\" \n\nOK, I'm trying to reproduce the error from my old config file. I'll give you \nthe results ASAP.\n", "id": 41222, "time": "2003-07-23T13:57:59Z", "creator": "fnicaise@motion-twin.com", "creation_time": "2003-07-23T13:57:59Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "fnicaise@motion-twin.com", "is_private": false, "text": "Ok, I found a way to reproduce the problem\n\nTry the following build.properties file to reproduce the problem:\nbuild.properties\n----------------\nproject.src=${project.src}/src\nproject.src.bla=${project.src}/bla\n\nif you try ant -v you should get messages up to\n[property] Loading yourpath/build.properties\nbut after this line, there aren't any error message like the one with the \ncircular reference indicated.\n\nThe fact that the second property calls the first one seems to be where lies \nthe problem.\n\nNow comment the line with the circular reference and everything should work \nfine.\n\nThe question now, is why don't we get any error message?\nFor information, I'm using Xerces and Xalan both declared in my classpath.\n\n", "id": 41232, "time": "2003-07-23T14:18:31Z", "bug_id": 21825, "creation_time": "2003-07-23T14:18:31Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 21825, "attachment_id": null, "text": "I can reproduce this.\n\nUsing\n\na=${a} with CVS HEAD produces\n/tmp/a.xml:3: Property a was circularly defined.\n\nIf I add\nb=${a}/b after that, Ant seems to hang in an endless loop.", "id": 41235, "time": "2003-07-23T14:44:33Z", "creator": "bodewig@apache.org", "creation_time": "2003-07-23T14:44:33Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 21825, "attachment_id": null, "text": "Yep, I can reproduct it as well.\n\nThe problem is in Property#resolveAllProperties()\n\nthe code is trying to resolve project.src.bla,\nand keeps calling:\nprops.put(project.src.bla, ${project.src}/src/bla)\nprops.put(project.src.bla, ${project.src}/src/src/bla)\nprops.put(project.src.bla, ${project.src}/src/src/src/bla)\nin the loop while (! resolved)\n", "id": 41237, "time": "2003-07-23T14:54:55Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-07-23T14:54:55Z", "is_private": false}, {"count": 6, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "I know, patch will be ready in a few minutes 8-)", "id": 41238, "time": "2003-07-23T15:09:21Z", "bug_id": 21825, "creation_time": "2003-07-23T15:09:21Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 21825, "attachment_id": null, "text": "fixed with nightly build 2003-07-24.", "id": 41239, "time": "2003-07-23T15:17:13Z", "creator": "bodewig@apache.org", "creation_time": "2003-07-23T15:17:13Z", "is_private": false}]