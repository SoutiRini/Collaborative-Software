[{"count": 0, "tags": [], "bug_id": 29930, "attachment_id": null, "id": 60181, "time": "2004-07-06T09:32:27Z", "creator": "Nagendra.Raja@sun.com", "creation_time": "2004-07-06T09:32:27Z", "is_private": false, "text": "Hi!\n\nNot sure if it is good idea to apply OOAD Featurs to ant. But any way I posting \nthis for a discussion and some conclutions there after..\n\nI am looking for some kind of static targets, meaning how may ever time this \ntargets called (using dependends attribute), but ant run time should run this \ntarget only once.\n\neg.\n\n<target name=\"init\">\n</target>\n\n<target name=\"src\" depends=\"init\">\n</target>\n\n<target name=\"packages\" depends=\"init\">\n\n<target name=\"all\" depends=\"src,packages\"/>\n\nwhen target 'all' is called init gets called twice, which could be avoided if \nstatic attribute is supported by ant eg. one could write static targets as \n<target name=\"init\" static=\"true\">\n</target>\n\nI do see some workaround like below which would have the same effect.. but I \nconsider this as less readable\n\n<target name=\"init\" unless=\"isInitRanOnce\">\n<property name=\"isInitRanOnce\" value=\"true\"/>\n</target>"}, {"count": 1, "tags": [], "bug_id": 29930, "attachment_id": null, "id": 60182, "time": "2004-07-06T09:39:09Z", "creator": "jan@materne.de", "creation_time": "2004-07-06T09:39:09Z", "is_private": false, "text": "Since Ant 1.6 you can place tasks directly under <project>."}, {"count": 2, "attachment_id": null, "bug_id": 29930, "is_private": false, "id": 60223, "time": "2004-07-07T08:47:39Z", "creator": "peterreilly@apache.org", "creation_time": "2004-07-07T08:47:39Z", "tags": [], "text": "Also in the example given the target \"init\" will\nbe only called once.\n\n<project default=\"all\">\n  <target name=\"init\">\n    <echo>init called</echo>\n  </target>\n\n  <target name=\"src\" depends=\"init\">\n  </target>\n  \n  <target name=\"packages\" depends=\"init\"/>\n  \n  <target name=\"all\" depends=\"src,packages\"/>\n</project>\n\nant -f build.xml outputs:\n\ninit:\n     [echo] init called\n\nsrc:\n\npackages:\n\nall:\n"}, {"count": 3, "tags": [], "bug_id": 29930, "attachment_id": null, "id": 62058, "time": "2004-08-17T06:17:14Z", "creator": "Nagendra.Raja@sun.com", "creation_time": "2004-08-17T06:17:14Z", "is_private": false, "text": "*** Bug 30457 has been marked as a duplicate of this bug. ***"}, {"count": 4, "tags": [], "bug_id": 29930, "is_private": false, "id": 62059, "creation_time": "2004-08-17T06:43:23Z", "time": "2004-08-17T06:43:23Z", "creator": "Nagendra.Raja@sun.com", "text": "can you use the cmd 'ant src packages' at this time init is being called twice.\n\nAny case, I suppose even in cmd ant -f build.xml, the init must be called \ntwice. Run time can't optimize on its own as this may break in some places. \nThis was my understanding of depends on  a target (i.e ant runtime does not do \nany thing to optimize the depends targets). Is there any document which talks \nabout this optimized behaviour ant runtime. \n\nTry this modified code \n\n<project default=\"all\">\n  <target name=\"init\">\n    <echo>init called</echo>\n  </target>\n\n  <target name=\"src\">\n  \t<antcall target=\"init\"/>\n  </target>\n  \n  <target name=\"packages\" depends=\"init\"/>\n  \n  <target name=\"all\" depends=\"src,packages\"/>\n</project>\n\nDon't ask me why user would call this way.. If we have static kind of keyword \nsupported by ant at target level, then run time has every right to call init \nonly once and not otherwise.", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 29930, "attachment_id": null, "id": 63948, "time": "2004-09-21T08:02:25Z", "creator": "Nagendra.Raja@sun.com", "creation_time": "2004-09-21T08:02:25Z", "is_private": false, "text": "Ant run time optimizations should be looked at differently than the users \nexplicit mention of the same. I still belive user should be able to specify \nthis static like behaviour with some attribute of target tag."}, {"count": 6, "attachment_id": null, "bug_id": 29930, "is_private": false, "id": 63951, "time": "2004-09-21T08:57:09Z", "creator": "peterreilly@apache.org", "creation_time": "2004-09-21T08:57:09Z", "tags": [], "text": "In the example you gave you use an <antcall> to\ncall the \"init\". An <antcall> sets up a new project\nwith its own set of targets and target dependency resolution,\nso of course the \"init\" gets run again. (In ant terms an <antcall>\nis the moral equalivant of a goto - see http://www.acm.org/classics/oct95/)\n\nThere is IMO a need to have a onceonly block, target or task\nthat would be called only once - see:\nhttp://marc.theaimsgroup.com/?l=ant-dev&m=108331661709918&w=2\nso I will mark this an an enchancment request."}, {"count": 7, "text": "Isn't the effect of a onceonly block effectively duplicated by the\nSingleCheckExecutor?", "creator": "mbenson@apache.org", "attachment_id": null, "id": 75444, "time": "2005-05-26T20:57:01Z", "bug_id": 29930, "creation_time": "2005-05-26T20:57:01Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "bug_id": 29930, "attachment_id": null, "id": 90690, "time": "2006-06-27T21:21:50Z", "creator": "mbenson@apache.org", "creation_time": "2006-06-27T21:21:50Z", "is_private": false, "text": "with SingleCheckExecutor + top-level tasks this should be fixed."}]