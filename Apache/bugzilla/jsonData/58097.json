[{"count": 0, "tags": [], "bug_id": 58097, "is_private": false, "id": 183874, "creation_time": "2015-07-03T01:03:44Z", "time": "2015-07-03T01:03:44Z", "creator": "viktor@szepe.net", "text": "Please consider adding an option to preserve the original connecting IP that was in REMOTE_ADDR and that got overwritten.\n\nThank you!", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "covener@gmail.com", "text": "You may want to elaborate on the requirement", "id": 183875, "time": "2015-07-03T01:45:57Z", "bug_id": 58097, "creation_time": "2015-07-03T01:45:57Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": null, "creator": "viktor@szepe.net", "text": "I was compiling mod_remoteip back-ported to 2.2 to use in with a CloudFlare protected website.\nThen I suddenly realized that the original connecting IP would get overwritten thus disappear. I'd like to log that also in case of a break-in attempt.\n\nPlease make it available in another variable.", "id": 183880, "time": "2015-07-03T11:23:56Z", "bug_id": 58097, "creation_time": "2015-07-03T11:23:56Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 58097, "is_private": false, "id": 183942, "creation_time": "2015-07-07T18:02:23Z", "time": "2015-07-07T18:02:23Z", "creator": "mike.rumph@oracle.com", "text": "The underlying client IP of the connection is already available in the %{c}a format string.\n\n- http://httpd.apache.org/docs/2.4/mod/mod_remoteip.html \n- http://httpd.apache.org/docs/2.4/mod/mod_log_config.html#formats \n\nThis code was added to trunk in r1204968 .", "attachment_id": null}, {"count": 4, "tags": [], "text": "This is already documented in the httpd docs;\n\n\"In overriding the client IP, the module stores the list of intermediate hosts in a remoteip-proxy-ip-list note, which mod_log_config can record using the %{remoteip-proxy-ip-list}n format token. If the administrator needs to store this as an additional header, this same value can also be recording as a header using the directive RemoteIPProxiesHeader.\"\n\nAs Mike points out, %{c}a in 2.4 also tracks the immediate connection's IP address (although mod_remoteip may unwind a number of intermediates and these all get tracked in the field noted above).  Since you are using a backport, this is unlikely to be helpful.\n\nAnd as this module was introduced in 2.4, there is no remaining issue here to address, chalking this up as asked and answered.", "is_private": false, "id": 188364, "creator": "wrowe@apache.org", "time": "2016-02-11T16:28:53Z", "bug_id": 58097, "creation_time": "2016-02-11T16:28:53Z", "attachment_id": null}]