[{"count": 0, "tags": [], "bug_id": 35547, "is_private": false, "text": "Using Apache::Cookie and libapreq 1.2 causes problems adding cookie headers in \nApaches 1.33 request.\nIf you use relative values for expires, the set-cookie header gets corrupted. \nExample code:\n\n#!/usr/bin/perl\nlocal $| = 1;\nuse strict;\nuse warnings;\nuse Apache ();\nuse Apache::Cookie ();\nmy $r = Apache->request();\nmy $cookie = Apache::Cookie->new($r,\n                             -name    =>  'foo', \n                             -value   =>  'bar', \n                             -expires =>  '+3M',\n                             -domain  =>  '.capricorn.com', \n                             -path    =>  '/cgi-bin/database',\n                             -secure  =>  1 \n                            );\n$cookie->bake();\n$r->content_type( \"text/html\" );\n$r->send_http_header();\n$r->print (\"This is a Test\");\n1;\n\nThe result is a corrupt header like this:\n200 OK\nConnection: close\nDate: Wed, 29 Jun 2005 07:50:50 GMT\nServer: Apache/1.3.33 (Win32) mod_ssl/2.8.22 OpenSSL/0.9.7f DAV/1.0.3-dev \nmod_perl/1.29_01-dev mod_jk/1.2.8\nContent-Type: text/plain\nClient-Date: Wed, 29 Jun 2005 07:50:50 GMT\nClient-Peer: 192.168.0.11:80\nClient-Response-Num: 1\nSet-Cookie: foo=bar; domain=.capricorn.com; path=/cgi-bin/database; expires=\b@\b\u0005\n\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00cc\u00ff%&#710;@\b\u0005\u00ff%T@\b\u0005&#8249;D$\b&#8230;\u00c0u\u000e9\u0005DT\b\u0005~.\u00ff\nDT\b\u0005&#8249;\n\\@\b\u0005&#402;\u00f8\u0001&#8249;\t&#8240;\nHT\b\u0005u?h&#8364;, 27-$\b&#8230;\u00c0u\u000e9\u0005DT\b\u0005~.\u00ff\nDT\b\u0005&#8249;\n\\@\b\u0005&#402;\u00f8\u0001&#8249;\t&#8240;\nHT\b\u0005u?h&#8364;-2005 07:50:50 GMT; secure\n\n\n\nRandy Kobes was alredy contacted.\n\n>Hello Mr. Kobes,\n>\n>I'm running for compatibility issues a apache 1.3.33 on win32 under mod_perl.\n>\n>Yesterday i found an annyoing problem with current Apache::Cookie from your \n>repository (libapreq-1 [1.2] and mod_perl-eapi-1 [1.29_01-dev])\n>\n>Using relative values for -expires destructs the header in Apaches request!\n>\n>My simple code is appended in apachecookie.pl\n>* Please exchange line 16 with line 17 and see the result!\n>\n>Header scanned with perls HEAD.\n>* Destructed Header in header-notok.txt\n>* Header with working Apache::Cookie -expires in header-ok.txt\n\nRandy Kobes wrote:\n>>Thanks for the message. This may be a bug - could you\n>>forward the details to the apreq mailing list? Thanks.", "id": 76803, "time": "2005-06-29T18:16:44Z", "creator": "dev@lyl-canbys.de", "creation_time": "2005-06-29T18:16:44Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 35547, "text": "Same problem exists with libapreq 1.3 and Apache 1.3.34 under mod_perl/1.29_01-\ndev\n", "id": 86332, "time": "2006-03-01T13:01:06Z", "creator": "dev@lyl-canbys.de", "creation_time": "2006-03-01T13:01:06Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 35547, "text": "Will this bug be fixed?", "id": 106232, "time": "2007-08-03T00:06:39Z", "creator": "dev@lyl-canbys.de", "creation_time": "2007-08-03T00:06:39Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "Not without further input.  There's nothing in the report to indicate that it's\nthe server, as opposed to apreq or mod_perl.\n\nGiven that apache 1.3 (1998) is long-since obsolete, noone at apache is very\nlikely to be interested unless you're paying them for support.", "is_private": false, "bug_id": 35547, "id": 106240, "time": "2007-08-03T01:48:09Z", "creator": "nick@webthing.com", "creation_time": "2007-08-03T01:48:09Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "Apache HTTP Server 1.3.x is not supported anymore and no bugs will be fixed in the old codebase (cf. <http://mail-archives.apache.org/mod_mbox/httpd-announce/201002.mbox/%3C20100203000334.GA19021@infiltrator.stdlib.net%3E>). Since this bug seems to affect only 1.3.x, I'm closing it as WONTFIX.\n\nIf this bug still affects you in a recent version (version 2.2.x or the upcoming version 2.4), please open a new bug.\n\nThank you for reporting the bug.", "attachment_id": null, "id": 145169, "creator": "mss@apache.org", "time": "2011-03-21T11:17:53Z", "bug_id": 35547, "creation_time": "2011-03-21T11:17:53Z", "is_private": false}]