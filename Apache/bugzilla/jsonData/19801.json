[{"count": 0, "tags": [], "bug_id": 19801, "attachment_id": null, "id": 36986, "time": "2003-05-09T15:35:15Z", "creator": "ernst.matthias@gmail.com", "creation_time": "2003-05-09T15:35:15Z", "is_private": false, "text": "The request dispatcher has a bug.\n\nDo an include chain as follows:\n\nServlet A, mapped at /A/* includes \"/B/should.not.see\"\nServlet B, mapped at /B/* includes \"/C\"\nServlet C, mapped at /C/* prints out\nrequest.getAttribute(\"javax.servlet.include.path_info\")\n\nAccording to my interpretation of the spec and as resin 2.1.9 does, the value\nshould be null. Tomcat 4.1.24 prints \"/should.not.see\" instead.\n\nDifferent, funny example:\n\n/A includes /B/hello includes /world, where /hello and /world are static files.\nThe default servlet in the last step will use path_info and therefore include\n'/hello'.\n\nCulprit is org.apache.catalina.core.ApplicationDispatcher#doInclude. I would\ndispose of all the if's in the following code fragment:\n\n            if (sb.length() > 0)\n                wrequest.setAttribute(Globals.REQUEST_URI_ATTR,\n                                      sb.toString());\n            if (contextPath != null)\n                wrequest.setAttribute(Globals.CONTEXT_PATH_ATTR,\n                                      contextPath);\n            if (servletPath != null)\n                wrequest.setAttribute(Globals.SERVLET_PATH_ATTR,\n                                      servletPath);\n            if (pathInfo != null)\n                wrequest.setAttribute(Globals.PATH_INFO_ATTR,\n                                      pathInfo);\n            if (queryString != null) {\n                wrequest.setAttribute(Globals.QUERY_STRING_ATTR,\n                                      queryString);\n                wrequest.mergeParameters(queryString);\n            }"}, {"count": 1, "tags": [], "text": "Can anyone comment on this, please ?", "is_private": false, "bug_id": 19801, "id": 43541, "time": "2003-09-01T09:47:37Z", "creator": "ernst.matthias@gmail.com", "creation_time": "2003-09-01T09:47:37Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "I have reviewed the spec and agree that this is a bug. I have applied a patch \n(based on your suggestion) to TC4 and TC5.\nMany thanks.", "is_private": false, "bug_id": 19801, "id": 56324, "time": "2004-04-24T15:13:48Z", "creator": "markt@apache.org", "creation_time": "2004-04-24T15:13:48Z", "attachment_id": null}]