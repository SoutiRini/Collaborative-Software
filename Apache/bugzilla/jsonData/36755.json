[{"count": 0, "tags": [], "bug_id": 36755, "attachment_id": null, "text": "I have the following problem - the values of most of the parameters i send with\nthe http request are cyrillic. Is there a way so that they to be saved under\nUnicode in the test suite and when runned the suite use the unicode encoding for\nthem, because when they are not unicode the system been tested doesn't recognies\nthem and the one workaround is to paste the strings everytime i run the test\nfrom an independant program which codes them to unicode and i paste the unicode\ntext for example \"\u00d0&#159;\u00d0\u00be\u00d0\u00b4\u00d0\u00bf\u00d0\u00b8\u00d1&#136;\u00d0\u00b8 \u00d0\u00b8 \u00d0\u00b8\u00d0\u00b7\u00d0\u00bf\u00d1&#128;\u00d0\u00b0\u00d1&#130;\u00d0\u00b8\" in the value...", "id": 80254, "time": "2005-09-21T09:24:38Z", "creator": "hori@abv.bg", "creation_time": "2005-09-21T09:24:38Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 36755, "is_private": false, "id": 99844, "time": "2007-02-27T04:30:23Z", "creator": "alf@i100.no", "creation_time": "2007-02-27T04:30:23Z", "tags": [], "text": "The bug report does not tell wether the problem is happening with http get\nrequest or http post request.\n\nIf I use unicode characters as value for parameter used in a http get request,\nand check on the \"encode\" checkbox for that parameter, things seems to work fine\nfor me.\n\nIf you want to use unicode characters when posting, then I think you need to\nwait until the bug 41705 is fixed. And if you want your testdata in a csv file,\nyou need to wait for 41704.\n\nI tested with utf8 samples from http://www.columbia.edu/kermit/utf8.html"}, {"count": 2, "tags": [], "bug_id": 36755, "attachment_id": 19912, "text": "Created attachment 19912\nSuggested patch to load and save files in UTF-8 encoding\n\nThe problem is happening when saving the test plan. Currently, JMeter is using\ndefault Java JRE file encoding to load and save files.\n\nJMeter should rather use UTF-8, or other encoding specified in\nsaveservice.properties file.\n\nThis suggested patch add methods in SaveService, to load and save using\nInput/OutputStream instead of InputReader/OutputWriter. Then SaveService takes\ncare of instantiating the InputReader and OutputWriter using the specified file\nencoding, which by default is UTF-8 in the saveservice.properties file.\n\nThe xml header \"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\" is written at the start\nof the files. Note that the xstream parser ignores this, see\nhttp://xstream.codehaus.org/faq.html#XML. But it is useful if you open the\nfiles in other editors / browsers.\n\nNote that I am closing the InputReader / OutputWriter in the SaveService\nmethods , this was not done previously. I have a habit of always closing things\nI open.\n\nI've looked at the places in the code where SaveService is used, and in about\nhalf of the cases the stream sent in to SaveService is not closed by the\ncalling  code. I think I will go through the different classes that uses\nSaveService, and make sure streams are closed in the same manner in all places.\nBut that will be another patch.\n\nI haven't changed anything in org.apache.jmeter.reporters.ResultCollector, that\nclass is still using methods which I have marked as deprecated in SaveService.\nI will wait and see if this patch suits you, and if it does, I might look into\nmaking the ResultsCollector use more code from SaveService, and also not use\nthe deprecated methods. But it seems a bit complex to change the\nResultsCollector.\nThe ResultsCollector is currently hardcoded to using UTF-8.\n\nNote that a lot of unit tests in TestSaveService fails, because the \"xml\nheader\" is added to the start of the files, which means that the file lenght\ngrows a little bit. If this patch is accepted, the testfiles should be changed\nto contain the \"xml header\", and then the unit test will pass.\n\nWith this patch, Jmeter saves files as UTF-8, and it means that I can use UTF-8\nas parameter values, for example copy / paste some Sanskrit characters from\nhttp://www.columbia.edu/kermit/utf8.html\nSo I think this patch solves this bug.", "id": 101413, "time": "2007-04-04T02:51:25Z", "creator": "alf@i100.no", "creation_time": "2007-04-04T02:51:25Z", "is_private": false}, {"count": 3, "tags": [], "creator": "alf@i100.no", "text": "(In reply to comment #2)\n\nHave you had time to look at the patch ?\nI'm wondering if perhaps the \"xml header\" is added a few places where it\nshouldn't be added.\n\nI think this is one of the last remaining issues before one could claim that\nHTTP testing using \"any\" encoding is close to perfect. So it would be good to\nget this bug solved before next release of JMeter. With your help, I think we\nshould be able to solve it.", "id": 102032, "time": "2007-04-22T08:38:58Z", "bug_id": 36755, "creation_time": "2007-04-22T08:38:58Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "At this time i couldn't look at it, cause i have plenty of work and no time :(\nhope soon i'll get a little bit free and try it :)", "is_private": false, "bug_id": 36755, "id": 102037, "time": "2007-04-22T10:09:13Z", "creator": "hori@abv.bg", "creation_time": "2007-04-22T10:09:13Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "I've added the code to SVN in r532077; it will be in any nightly builds later \nthan that.\n\nPlease report if this solves the original problem or not?\nThanks.", "is_private": false, "bug_id": 36755, "id": 102265, "time": "2007-04-24T13:58:17Z", "creator": "sebb@apache.org", "creation_time": "2007-04-24T13:58:17Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 36755, "attachment_id": 20073, "text": "Created attachment 20073\nConsistent and improved closing of file streams\n\nI have tested the code in svn r532077, and I am now able to put cyrillic\ncharacters into the test plan, save the test plan, quite jmeter, start jmeter,\nload test plan, and the characters looks exactly like they were when I saved\nthe test plan.\n\nSo I think this bug can be marked as \"fixed\".\n\nI am now attaching a patch, which makes the closing of file streams more\nconsistent in JMeter, and also makes sure streams are closed in some cases\nwhere it was not being closed.", "id": 102656, "time": "2007-04-30T06:09:50Z", "creator": "alf@i100.no", "creation_time": "2007-04-30T06:09:50Z", "is_private": false}, {"count": 7, "tags": [], "creator": "sebb@apache.org", "is_private": false, "text": "Thanks for the streams patch - but in future it would be better to open a new \nBugzilla issue for a new problem.", "id": 102697, "time": "2007-04-30T15:14:31Z", "bug_id": 36755, "creation_time": "2007-04-30T15:14:31Z", "attachment_id": null}]