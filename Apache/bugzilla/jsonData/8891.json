[{"count": 0, "tags": [], "bug_id": 8891, "text": "The following script fails to run - it seems to think the Script task is in the\nparent loader even though ANT_HOME/lib does not contain optional.jar (It only\ncontains ant.jar and xml jars).\n\n<project name=\"foo\" default=\"all\">\n\t\n\t<property name=\"lib.dir\" value=\"/path/to/dir/with/optional/bsf/rhino\"/>\n\n\t<path id=\"task.classpath\">\n\t\t<fileset dir=\"${lib.dir}\">\n\t\t\t<include name=\"optional.jar\"/>\n\t\t\t<include name=\"bsf.jar\"/>\n\t\t\t<include name=\"js.jar\"/>\n\t\t</fileset>\n\t</path>\n\t\n\t\n\t<target name=\"showcp\">\n\t\t<pathconvert targetos=\"windows\"\n                             property=\"taskcp\" refid=\"task.classpath\"/>\n\t\t<echo message=\"tasks cp: ${taskcp}\"/>\n\t</target>\n\n\t<target name=\"all\" depends=\"showcp\">\n\t\t<taskdef name=\"myscript\"\n                     classname=\"org.apache.tools.ant.taskdefs.optional.Script\">\n\t\t\t<classpath refid=\"task.classpath\"/>\n\t\t</taskdef>\n\t\t<myscript language=\"javascript\"> <![CDATA[\n\t\t\tjava.lang.System.out.println(\"In script\");\n\t\t\t]]></myscript>\n\t</target>\n\t\n</project>", "id": 15681, "time": "2002-05-07T22:41:42Z", "creator": "wr0ngway@yahoo.com", "creation_time": "2002-05-07T22:41:42Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "conor@apache.org", "text": "Works for me on Linux. Can you attach a debug output trace?\n\n$ ant\nBuildfile: build.xml\n\nshowcp:\n     [echo] tasks cp:\n\\home\\conor\\dev\\antdev\\bugs\\bug08891\\jars\\js.jar;\\home\\conor\\dev\\antdev\\bugs\\bug08891\\jars\\bsf.jar;\\home\\conor\\dev\\antdev\\bugs\\bug08891\\jars\\optional.jar\n\nall:\n [myscript] In script\n\nBUILD SUCCESSFUL\nTotal time: 3 seconds\n", "id": 16939, "time": "2002-05-30T13:48:41Z", "bug_id": 8891, "creation_time": "2002-05-30T13:48:41Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 8891, "text": "Ok, my bad - I had renamed optional.jar to optional.jarx to exclude it from the\nclasspath, but ant.bat was still picking it up - once I actually removed it from\nthe ANT_HOME/lib, then everything worked as it should.\n\n", "id": 17093, "time": "2002-06-03T17:50:52Z", "creator": "wr0ngway@yahoo.com", "creation_time": "2002-06-03T17:50:52Z", "is_private": false, "attachment_id": null}]