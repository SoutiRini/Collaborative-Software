[{"count": 0, "tags": [], "text": "According to the Servlet 2.3 Specification about the <session-timeout> tag in \nthe web.xml file:\n\nThe session-timeout element defines the default session timeout interval for \nall sessions created in this web application. The specified timeout must be \nexpressed in a whole number of minutes. If the timeout is 0 or less, the \ncontainer ensures the default behaviour of sessions is never to time out.\n\nThe code for the Session allows the session to remain alive forever if the \ntimeout is < 0 but not == to zero.\n\nThe error (I think) is in StandardManager.processExpires()\n\nif (maxInactiveInterval < 0)\n\nshould be\n\nif (maxInactiveInterval <= 0)", "attachment_id": null, "id": 19266, "creator": "frankfebbraro@earthlink.net", "time": "2002-07-10T17:32:32Z", "bug_id": 10656, "creation_time": "2002-07-10T17:32:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 10656, "attachment_id": null, "id": 19274, "time": "2002-07-10T19:33:03Z", "creator": "bob@jadn.com", "creation_time": "2002-07-10T19:33:03Z", "is_private": false, "text": "\nTrue, and page 222 of Servlet 2.3 says that Session.getMaxInactiveInterval() \nmust return a negative to indicate that the session never times out. So I\npropose this patch to fix both problems.\n\nIndex: ManagerBase.java\n===================================================================\nRCS file:\n/home/cvspublic/jakarta-tomcat-4.0/catalina/src/share/org/apache/catalina/session/ManagerBase.java,v\nretrieving revision 1.11\ndiff -u -r1.11 ManagerBase.java\n--- ManagerBase.java\t14 Jan 2002 23:38:03 -0000\t1.11\n+++ ManagerBase.java\t10 Jul 2002 19:27:58 -0000\n@@ -397,11 +397,14 @@\n \n     /**\n      * Set the default maximum inactive interval (in seconds)\n-     * for Sessions created by this Manager.\n+     * for Sessions created by this Manager.  -1 means never timeout\n      *\n      * @param interval The new default value\n      */\n     public void setMaxInactiveInterval(int interval) {\n+\n+\nif ( interval == 0 )\n+\n    interval = -1;\n \n         int oldMaxInactiveInterval = this.maxInactiveInterval;\n         this.maxInactiveInterval = interval;\n"}, {"count": 2, "attachment_id": null, "bug_id": 10656, "is_private": false, "id": 49745, "time": "2003-12-27T20:40:28Z", "creator": "medthomas@ntlworld.com", "creation_time": "2003-12-27T20:40:28Z", "tags": [], "text": "This has been fixed (in o.a.c.core.StandardContext) by porting the fix from \nTC5.\n\nThe fix will be included in the next TC4 release."}, {"count": 3, "attachment_id": null, "bug_id": 10656, "is_private": false, "id": 49945, "time": "2004-01-01T23:59:15Z", "creator": "medthomas@ntlworld.com", "creation_time": "2004-01-01T23:59:15Z", "tags": [], "text": "*** Bug 11745 has been marked as a duplicate of this bug. ***"}]