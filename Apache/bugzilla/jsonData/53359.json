[{"attachment_id": null, "tags": [], "creator": "esmond.pitt@bigpond.com", "text": "I have a large and growing number of requirements for aliases, and the existing (new for Tomcat 7) aliases= attribute is unwieldy for me. The line is already 289 characters long ;-(\n \nIt would be a lot more convenient if aliases could be specified individually via a repeatable nested <Alias> entry, something like:\n \n<Context>\n<Alias aliasPath=\"/xyz\" docBase=\"/real_path\"/> ...\n</Context>\n\nas opposed to current:\n\n<Context\n\tpath=\"/cLabs\"\n\tcrossContext=\"true\"\n\taliases=\"/EDSILabCatalog=c:/xampp/htdocs/cLabs/EDSILabCatalog,/EDSILabs=c:/xampp/htdocs/cLabs/EDSILabs,/Global=c:/xampp/htdocs/cLabs/Global,/Skyline=c:/xampp/htdocs/cLabs/Skyline,/Sun=c:/xampp/htdocs/cLabs/Sun,/Sunset=c:/xampp/htdocs/cLabs/Sunset,/Tech2000=c:/xampp/htdocs/cLabs/Tech2000\"\n\t/>", "count": 0, "id": 159694, "time": "2012-06-05T00:35:47Z", "bug_id": 53359, "creation_time": "2012-06-05T00:35:47Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "I'd rather avoid adding that option since it adds complexity to the code I'd rather not have. What if we ensured that white-space was trimmed so you could use something like:\naliases=\"/pathA=C:/pathA,\n         /pathB=C:/some/other/path,\n         /special=C:/here/be/dragons\"\n\nThoughts?", "count": 1, "id": 159712, "time": "2012-06-05T18:26:30Z", "bug_id": 53359, "creation_time": "2012-06-05T18:26:30Z", "is_private": false}, {"count": 2, "text": "That's OK by me but is it legal XML?", "bug_id": 53359, "is_private": false, "id": 159730, "time": "2012-06-06T00:04:22Z", "creator": "esmond.pitt@bigpond.com", "creation_time": "2012-06-06T00:04:22Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 53359, "text": "There is no prohibition of any kind of whitespace (except maybe form-feed?) in an attribute value. You only need to escape the standard < and > plus \" characters.", "id": 159737, "time": "2012-06-06T01:20:02Z", "creator": "chris@christopherschultz.net", "creation_time": "2012-06-06T01:20:02Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "esmond.pitt@bigpond.com", "text": "In that case Mark Thomas's solution is perfect. I would have thought you needed to trim the whitespace anyway, to allow spaces after the commas as per many programming habits ;-)", "count": 4, "id": 159743, "time": "2012-06-06T05:02:12Z", "bug_id": 53359, "creation_time": "2012-06-06T05:02:12Z", "is_private": false}, {"count": 5, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "text": "I'm prepared to make this fix, but I want to be sure I can do it all in one place. Mark, could you comment?\n\nIt looks like BaseDirContext.java:237 could just change from\n\n        String[] kvps = theAliases.split(\",\");\n\nto\n\n        String[] kvps = theAliases.split(\"\\\\s*,\\\\s*\");\n\nI've read-through the rest of the code and it appears that this is all that is required, but there may be other places where similar splits are happening.", "id": 159761, "time": "2012-06-06T17:49:00Z", "bug_id": 53359, "creation_time": "2012-06-06T17:49:00Z", "is_private": false}, {"count": 6, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "That is the only place this gets processed but you'll need to do the same with the split(\"=\") two lines as well for completeness.\n\nA test case would be nice too as would an update to the docs on hoe white space will be handled :)", "id": 159764, "time": "2012-06-06T18:09:37Z", "bug_id": 53359, "creation_time": "2012-06-06T18:09:37Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 53359, "is_private": false, "text": "I think you should also beware of empty strings (produced by ',,' or by an extra ',' at the end of values) and ignore them.", "id": 159765, "time": "2012-06-06T18:13:02Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2012-06-06T18:13:02Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 53359, "text": "(In reply to comment #6)\n> That is the only place this gets processed but you'll need to do the same\n> with the split(\"=\") two lines as well for completeness.\n\nI'm happy to do that, but didn't want the patch to grow bigger than the original requirements. It makes perfect sense to me to trim whitespace around the '='.\n\n> A test case would be nice too as would an update to the docs on hoe white\n> space will be handled :)\n\nOf course. I mainly wanted to verify that this was the only place a functional change needed to be made.\n\n(In reply to comment #7)\n> I think you should also beware of empty strings (produced by ',,' or by an\n> extra ',' at the end of values) and ignore them.\n\nNoted.", "id": 159766, "time": "2012-06-06T18:21:12Z", "creator": "chris@christopherschultz.net", "creation_time": "2012-06-06T18:21:12Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 53359, "text": "Looks like I can't avoid using String.trim() anyway, so I'm just going to use that instead of modifying the regex.", "id": 159774, "time": "2012-06-06T19:46:41Z", "creator": "chris@christopherschultz.net", "creation_time": "2012-06-06T19:46:41Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 53359, "text": "Okay, I'm going to close this as WONTFIX and create a new bug for trimming whitespace. I'm doing this so that this bug can be REOPENED in the future if there is sufficient demand for <Alias> subelements within <Context>.", "id": 159777, "time": "2012-06-06T19:57:27Z", "creator": "chris@christopherschultz.net", "creation_time": "2012-06-06T19:57:27Z", "is_private": false, "attachment_id": null}, {"count": 11, "text": "Replacement is bug 53373.", "bug_id": 53359, "is_private": false, "id": 159779, "time": "2012-06-06T20:02:02Z", "creator": "chris@christopherschultz.net", "creation_time": "2012-06-06T20:02:02Z", "tags": [], "attachment_id": null}]