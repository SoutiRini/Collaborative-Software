[{"count": 0, "tags": [], "bug_id": 47941, "attachment_id": null, "text": "2 of the longer TLE Values in attached XSL-FO File are truncated by AFP Renderer. Apecifically the TLEs with name JES0 and ACC1 are truncated using a recent revision of FOP trunk. I can't see any specific limit for TLE records in the MO:DCA specification.", "id": 130895, "time": "2009-10-06T00:53:20Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2009-10-06T00:53:20Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 47941, "attachment_id": null, "text": "Hi Chris,\n\nCan you please attach the XSL-FO file you used for this test case?\n\nThanks,\nVenkat.\n\n\n(In reply to comment #0)\n> 2 of the longer TLE Values in attached XSL-FO File are truncated by AFP\n> Renderer. Apecifically the TLEs with name JES0 and ACC1 are truncated using a\n> recent revision of FOP trunk. I can't see any specific limit for TLE records in\n> the MO:DCA specification.", "id": 130934, "time": "2009-10-07T03:18:28Z", "creator": "vanukuri.venkat@googlemail.com", "creation_time": "2009-10-07T03:18:28Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 47941, "attachment_id": 24355, "text": "Created attachment 24355\nXSL-FO to reproduce the problem", "id": 130937, "time": "2009-10-07T06:47:45Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2009-10-07T06:47:45Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 47941, "attachment_id": null, "text": "Sorry - I seem to be having some problems with Bugzilla and attachments. I did attach the XSL-FO File when I logged the bug but Bugzilla had a problem with the content type and didn't tell me. Grmbl", "id": 130938, "time": "2009-10-07T06:48:42Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2009-10-07T06:48:42Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 47941, "attachment_id": null, "text": "In the world of AFP a TLE is normally written out by the\ntwo triplets 0x02 and 0x36. The max lenght of any triplet\nis 254 bytes and this limit is the reason for the mentioned truncation. \nOn the other side it is quite common to remove any trailing blanks \nof TLE values. \n\nI checked out the current trunk and the produced afp is not valid.\n\nmy afp dump:\n\n    0xD3A090: TLE Tag Logical Element [322] (Offset 34)\n              T02: Fully Qualified Name [6]\n                   FQNType:    0x0B (Attribute GID)\n                   FQNFmt:     0x00 (Character string)\n                   FQName:     \"JES0\"\n              T36: Attribute Value [46]\n                   Reserved:   00 00 \n                   AttVal:     \"JES00927200       90INITIATION     REGULAR  \"\n                   (hex:)      D1 C5 E2 F0 F0 F9 F2 F7 F2 F0 F0 40 40 40 40 40 \n                               40 40 F9 F0 C9 D5 C9 E3 C9 C1 E3 C9 D6 D5 40 40 \n                               40 40 40 D9 C5 C7 E4 D3 C1 D9 40 40 \n              T40: - unknown triplet - [62]\n                   40 40 40 40 F6 F9 F0 60 F5 F0 F1 40 40 40 F3 F9 \n                   F0 60 40 F1 F2 F7 40 40 40 40 F2 F7 F2 F0 F0 F0 \n                   F2 F1 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n              T40: - unknown triplet - [62]\n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n              T40: - unknown triplet - [62]\n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n              T40: - unknown triplet - [62]\n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n              T80: Attribute Qualifier [8]\n                   SeqNum:     0x00000000 (0)\n                   LevNum:     0x00000001 (1)\n    0xD3A090: TLE Tag Logical Element [340] (Offset 365)\n              T02: Fully Qualified Name [6]\n                   FQNType:    0x0B (Attribute GID)\n                   FQNFmt:     0x00 (Character string)\n                   FQName:     \"ACC1\"\n              T36: Attribute Value [64]\n                   Reserved:   00 00 \n                   AttVal:     \"ACC1374316469000000    690-501    EN                          \"\n                   (hex:)      C1 C3 C3 F1 F3 F7 F4 F3 F1 F6 F4 F6 F9 F0 F0 F0 \n                               F0 F0 F0 40 40 40 40 F6 F9 F0 60 F5 F0 F1 40 40 \n                               40 40 C5 D5 40 40 40 40 40 40 40 40 40 40 40 40 \n                               40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n              T40: - unknown triplet - [62]\n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 F0 F0 40 40 40 40 40 40 40 40 \n              T40: - unknown triplet - [62]\n                   40 40 40 40 40 40 F0 F0 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n              T40: - unknown triplet - [62]\n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n              T40: - unknown triplet - [62]\n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                   40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n              T80: Attribute Qualifier [8]\n                   SeqNum:     0x00000001 (1)\n                   LevNum:     0x00000001 (1)\n    0xD3A090: TLE Tag Logical Element [124] (Offset 714)\n              T02: Fully Qualified Name [6]\n                   FQNType:    0x0B (Attribute GID)\n                   FQNFmt:     0x00 (Character string)\n                   FQName:     \"ADR1\"\n              T36: Attribute Value [104]\n                   Reserved:   00 00 \n                   AttVal:     \"ADR1MICKEY MOUSE                                                                                      \"\n                   (hex:)      C1 C4 D9 F1 D4 C9 C3 D2 C5 E8 40 D4 D6 E4 E2 C5 \n                               40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                               40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                               40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                               40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                               40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 40 \n                               40 40 40 40 40 40 \n              T80: Attribute Qualifier [8]\n                   SeqNum:     0x00000002 (2)\n                   LevNum:     0x00000001 (1)\n...", "id": 131209, "time": "2009-10-19T03:45:36Z", "creator": "afputils@web.de", "creation_time": "2009-10-19T03:45:36Z", "is_private": false}, {"count": 5, "tags": [], "text": "Created attachment 24393\nadditional sample", "is_private": false, "id": 131210, "creator": "afputils@web.de", "time": "2009-10-19T03:50:03Z", "bug_id": 47941, "creation_time": "2009-10-19T03:50:03Z", "attachment_id": 24393}, {"count": 6, "tags": [], "creator": "afputils@web.de", "attachment_id": 24394, "id": 131211, "time": "2009-10-19T03:54:33Z", "bug_id": 47941, "creation_time": "2009-10-19T03:54:33Z", "is_private": false, "text": "Created attachment 24394\nmy output for  additional sample"}, {"count": 7, "tags": [], "creator": "afputils@web.de", "attachment_id": null, "id": 131212, "time": "2009-10-19T05:00:16Z", "bug_id": 47941, "creation_time": "2009-10-19T05:00:16Z", "is_private": false, "text": "secondly i tried it with a small testcase holding\n10 TLEs with increasing value length:\n\ninput:\n<afp:tag-logical-element name=\"name250\" value=  ...\"/>\n<afp:tag-logical-element name=\"name251\" value=  ...1\"/>\n<afp:tag-logical-element name=\"name252\" value=  ...12\"/>\n<afp:tag-logical-element name=\"name253\" value=  ...123\"/>\n<afp:tag-logical-element name=\"name254\" value=  ...1234\"/>\n<afp:tag-logical-element name=\"name255\" value=  ...12345\"/>\n<afp:tag-logical-element name=\"name256\" value=  ...123456\"/>\n<afp:tag-logical-element name=\"name257\" value=  ...1234567\"/>\n<afp:tag-logical-element name=\"name258\" value=  ...12345678\"/>\n<afp:tag-logical-element name=\"name259\" value=  ...123456789\"/>\n\nthe first failure will be for TLE with name \"name253\" and it just looks like \na overflow.\n\n$ grep T36 testcase001.dmp \n              T36: Attribute Value [251]\n              T36: Attribute Value [252]\n              T36: Attribute Value [253]\n              T36: Attribute Value [0]\n              T36: Attribute Value [0]\n              T36: Attribute Value [0]\n              T36: Attribute Value [1]\n              T36: Attribute Value [2]\n              T36: Attribute Value [3]\n              T36: Attribute Value [4]\n\nin my opinion the best will be to split up such problem TLEs and write out several\nTLE structed fields with incremented triplet 0x80 'Sequence Number'. \n\nUnfortunately i did no java debugging for the last few years i have first to setup \neclipse or IntelliJ on my computer."}, {"count": 8, "tags": [], "bug_id": 47941, "attachment_id": null, "text": "It is better to warn the user atleast when used more than 254 bytes for the TLE value, so that he will get an idea about the truncation happened because of lengthy input value.\n\n(In reply to comment #7)\n> secondly i tried it with a small testcase holding\n> 10 TLEs with increasing value length:\n> input:\n> <afp:tag-logical-element name=\"name250\" value=  ...\"/>\n> <afp:tag-logical-element name=\"name251\" value=  ...1\"/>\n> <afp:tag-logical-element name=\"name252\" value=  ...12\"/>\n> <afp:tag-logical-element name=\"name253\" value=  ...123\"/>\n> <afp:tag-logical-element name=\"name254\" value=  ...1234\"/>\n> <afp:tag-logical-element name=\"name255\" value=  ...12345\"/>\n> <afp:tag-logical-element name=\"name256\" value=  ...123456\"/>\n> <afp:tag-logical-element name=\"name257\" value=  ...1234567\"/>\n> <afp:tag-logical-element name=\"name258\" value=  ...12345678\"/>\n> <afp:tag-logical-element name=\"name259\" value=  ...123456789\"/>\n> the first failure will be for TLE with name \"name253\" and it just looks like \n> a overflow.\n> $ grep T36 testcase001.dmp \n>               T36: Attribute Value [251]\n>               T36: Attribute Value [252]\n>               T36: Attribute Value [253]\n>               T36: Attribute Value [0]\n>               T36: Attribute Value [0]\n>               T36: Attribute Value [0]\n>               T36: Attribute Value [1]\n>               T36: Attribute Value [2]\n>               T36: Attribute Value [3]\n>               T36: Attribute Value [4]\n> in my opinion the best will be to split up such problem TLEs and write out\n> several\n> TLE structed fields with incremented triplet 0x80 'Sequence Number'. \n> Unfortunately i did no java debugging for the last few years i have first to\n> setup \n> eclipse or IntelliJ on my computer.", "id": 131244, "time": "2009-10-20T07:12:49Z", "creator": "vanukuri.venkat@googlemail.com", "creation_time": "2009-10-20T07:12:49Z", "is_private": false}, {"count": 9, "tags": [], "text": "This bug was originally misdiagnosed.  The TLE values were not being truncated as Chris suggested.  As I see it, Harald is correct in his description of the issue.  Triplets are a maximum of 254 bytes, therefore Attribute Value Triplets can legally hold a maximum of 250 bytes including the header.  So the solution as I see it is that the value must be truncated to 250 characters and a warning provided.  I have now resolved this in trunk.\n\nAdrian.", "attachment_id": null, "id": 131299, "creator": "dev@cumiskey.com", "time": "2009-10-22T06:21:17Z", "bug_id": 47941, "creation_time": "2009-10-22T06:21:17Z", "is_private": false}, {"count": 10, "tags": [], "text": "Thanks for the fix Adrian. You are correct that my original report wasn't technically accurate but then I didn't have time to look into the details. Still I am happy with the final resolution.", "is_private": false, "id": 131306, "creator": "bowditch_chris@hotmail.com", "time": "2009-10-22T08:01:43Z", "bug_id": 47941, "creation_time": "2009-10-22T08:01:43Z", "attachment_id": null}, {"count": 11, "tags": [], "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "is_private": false, "id": 155760, "creator": "gadams@apache.org", "time": "2012-04-01T06:39:32Z", "bug_id": 47941, "creation_time": "2012-04-01T06:39:32Z", "attachment_id": null}]