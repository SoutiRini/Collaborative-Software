[{"count": 0, "attachment_id": null, "creator": "yifancai0525@gmail.com", "text": "The \"use custom DNS resolver\" option means ONLY use the DNS severs add to the list in the DNS Manager component. \nIn the Unix environment, the behavior is not as described (not tried in other OSs, but from the view of the code, I think, the other OSs have the same issue). It will read in the DNS servers specified in the /etc/resolv.config file first, then add the DNS servers from the DNS Manager list. \n\nThe reason, I believe, is because that ExtendedResolver, which is used by DNS Manager, reads in the system DNS settings first, when instantiating. \n\n----------\n  public ExtendedResolver()\n    throws UnknownHostException\n  {\n    init();\n    String[] servers = ResolverConfig.getCurrentConfig().servers();\n    if (servers != null) {\n      for (int i = 0; i < servers.length; i++)\n      {\n        Resolver r = new SimpleResolver(servers[i]);\n        r.setTimeout(5);\n        this.resolvers.add(r);\n      }\n    } else {\n      this.resolvers.add(new SimpleResolver());\n    }\n  }\n-----------\n\nPlease correct me, if I have a misunderstanding on how \"custom DNS resolvers\" should work.", "id": 180306, "time": "2015-01-15T22:00:32Z", "bug_id": 57447, "creation_time": "2015-01-15T22:00:32Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 57447, "is_private": false, "text": "This does not appear to have anything to do with JMeter.\n\nIt does not have an ExtendedResolver class.", "id": 180307, "time": "2015-01-15T23:19:19Z", "creator": "sebb@apache.org", "creation_time": "2015-01-15T23:19:19Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 57447, "attachment_id": null, "text": "The resolver that DNSCacheManager uses is ExtendedResolver. \nIn its clone() method, clone.resolver = new ExtendedResolver();\nI do not find any instantiation anywhere else. So I guess this is where the resolver got assigned.\nThe ExtendedResolver is from dnsjava lib. It is mentioned that \"Custom DNS resolver(from dnsjava library) will be used.\"\n\nPlease consider it again.\n\n(In reply to Sebb from comment #1)\n> This does not appear to have anything to do with JMeter.\n> \n> It does not have an ExtendedResolver class.", "id": 180308, "time": "2015-01-15T23:26:43Z", "creator": "yifancai0525@gmail.com", "creation_time": "2015-01-15T23:26:43Z", "is_private": false}, {"count": 3, "tags": [], "text": "Ah, I see now.", "is_private": false, "id": 180313, "creator": "sebb@apache.org", "time": "2015-01-16T00:39:16Z", "bug_id": 57447, "creation_time": "2015-01-16T00:39:16Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 57447, "attachment_id": 32372, "text": "Created attachment 32372\nUse only the configured DNS servers\n\nBy using the constructor ExtendedResolver(String[]) we should be ignoring the contents of /etc/resolv.conf or similar things.\n\nTwo thing the attached patch solves: \n * NPE when no host ist found (Lookup#run returns null, when no host is found)\n * custom dns will not be used, if only one dns server was given ( expression >1 means at least two)", "id": 180332, "time": "2015-01-16T21:19:20Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2015-01-16T21:19:20Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 57447, "attachment_id": null, "is_private": false, "id": 180547, "time": "2015-01-24T16:31:23Z", "creator": "milamber@apache.org", "creation_time": "2015-01-24T16:31:23Z", "text": "\nPatch looks good, except the AL header on TestDNSCacheManager file.\n\nI have uploaded the same patch with some formatting and the AL.\n\n@felix, you can committing on the SVN (don't forget to add the bug record in changes.xml)"}, {"count": 6, "attachment_id": 32395, "creator": "milamber@apache.org", "is_private": false, "id": 180548, "time": "2015-01-24T16:32:06Z", "bug_id": 57447, "creation_time": "2015-01-24T16:32:06Z", "tags": [], "text": "Created attachment 32395\nUpdate patch v2"}, {"count": 7, "attachment_id": null, "creator": "felix.schumacher@internetallee.de", "text": "Date: Sat Jan 24 19:51:20 2015\nNew Revision: 1654575\n\nURL: http://svn.apache.org/r1654575\nLog:\nBug 57447 - Use only the user listed DNS Servers, when \"use custom DNS resolver\"\noption is enabled.\nBugzilla Id: 57447\n\nAdded:\n    jmeter/trunk/test/src/org/apache/jmeter/protocol/http/control/TestDNSCacheManager.java\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/control/DNSCacheManager.java\n    jmeter/trunk/xdocs/changes.xml", "id": 180551, "time": "2015-01-24T19:54:47Z", "bug_id": 57447, "creation_time": "2015-01-24T19:54:47Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "creator": "s16260063@hotmail.com", "text": "Is this fix merged to 3.0 or 3.1? I found I could not use custom DNS on 3.0 and 3.1.", "id": 196171, "time": "2017-01-19T01:42:27Z", "bug_id": 57447, "creation_time": "2017-01-19T01:42:27Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 57447, "is_private": false, "text": "Hello,\nIt is merged since 3.0\nCan you attach your test plan , put jmeter in debug. and attacj jmeter.log ?\nAre you using http client implementation ? without any 3rd part plugin ?\nThanks", "id": 196175, "time": "2017-01-19T06:36:40Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-01-19T06:36:40Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "s16260063@hotmail.com", "text": "Created attachment 34646\ntest plan\n\nI'm not sure if I'm using any third party plugin because I got this test plan from other guy.\nIn DNS Cache Manager, 20.0.118.11 is not the right DNS server. I tried to use a wrong one, but found Jmeter will still use system DNS - the right one.", "id": 196183, "time": "2017-01-19T07:49:46Z", "bug_id": 57447, "creation_time": "2017-01-19T07:49:46Z", "is_private": false, "attachment_id": 34646}, {"count": 11, "tags": [], "bug_id": 57447, "attachment_id": 34647, "is_private": false, "id": 196184, "time": "2017-01-19T07:51:33Z", "creator": "s16260063@hotmail.com", "creation_time": "2017-01-19T07:51:33Z", "text": "Created attachment 34647\njmeter.log\n\nI only open log_level.jmeter.protocol.http.proxy.HttpRequestHdr=DEBUG and log_level.jmeter.report=DEBUG in user.properties, not sure if the log fit your debug requirement."}, {"count": 12, "attachment_id": null, "creator": "s16260063@hotmail.com", "is_private": false, "id": 196185, "time": "2017-01-19T07:53:33Z", "bug_id": 57447, "creation_time": "2017-01-19T07:53:33Z", "tags": [], "text": "I'm using httpclient4 implementation, this test plan do work for custom DNS on JMeter 2.13"}, {"count": 13, "attachment_id": null, "creator": "p.mouawad@ubik-ingenierie.com", "text": "Thanks for provided information.\nI see you're using 3rd party plugins (Ultimate Thread Group).\nCan you tell what jars you have in jmeter/lib folder and jmeter/lib/ext ?\n\nAlso , could you provide a simple test plan with only regular Thread Group and the minimal elements to reproduce your issue ?\nThank you", "id": 196197, "time": "2017-01-19T16:28:37Z", "bug_id": 57447, "creation_time": "2017-01-19T16:28:37Z", "tags": [], "is_private": false}, {"count": 14, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Hello,\nIt's ok, I reproduced.\nI'll create a dedicated bug as it is a regression introduced in 3.0\n\nThanks for report", "id": 196198, "time": "2017-01-19T16:58:03Z", "bug_id": 57447, "creation_time": "2017-01-19T16:58:03Z", "is_private": false, "attachment_id": null}]