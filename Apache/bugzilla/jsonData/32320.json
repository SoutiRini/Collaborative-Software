[{"count": 0, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "id": 67215, "time": "2004-11-19T14:10:50Z", "bug_id": 32320, "creation_time": "2004-11-19T14:10:50Z", "is_private": false, "text": "Make mod_jk lb retry interval configurable\n\nIn mod_jk 1.2.7 inside common/jk_lb_worker.c there are constants:\n\n/* \n * Time to wait before retry...\n */\n#define WAIT_BEFORE_RECOVER (60*1)\n#define ADDITINAL_WAIT_LOAD (20)\n\nThe second constant ADDITINAL_WAIT_LOAD can be deleted, because it is no longer\nused (since Mladen Turks new loda balancing algorithm).\n\nThe first constant WAIT_BEFORE_RECOVER should be made an configurable attribute\nof the corresponding lb worker. Since this constant determines how often a\nfailed worker is retried and every failed retry produces error log lines (with\napache 1.3 for every process) and decrements the lb_value, it should be made\nuser adjustable to decide, after which intervals retries should be done.\n\nAdditionally one could make the retry interval for any worker a little more\ndynamic: Use the configured interval the first time after a worker failed, the\nnext two failed retries will double the interval. Then keep it constant and\nreset after successful retry.\n\nBoth changes are easy to do, and I would be willing to provide patches.\n\nWith the momentary setup using apache 1.3 with e.g. 50 processes under load you\nwill see 50 error log blocks per minute, so nearly one block per second."}, {"count": 1, "tags": [], "creator": "mturk@apache.org", "text": "The new directive is named \"recover_time\" and can be customized\ninside workers.properies for each lb type of workers.", "id": 67231, "time": "2004-11-19T16:31:32Z", "bug_id": 32320, "creation_time": "2004-11-19T16:31:32Z", "is_private": false, "attachment_id": null}]