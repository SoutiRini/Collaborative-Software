[{"count": 0, "tags": [], "bug_id": 14746, "attachment_id": null, "text": "The following effects can be observed in 1.5b4's squiggle-browser and also in\ncocoon2 (1.5b2). Steps to reproduce:\n\n1. create a file nobug.svg with the following content:\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<svg id=\"test\">\n  <defs>\n    <font id=\"testfont\">\n      <font-face font-family=\"testfont\" units-per-em=\"200\" ascent=\"200\"\ndescent=\"0\"/>\n      <glyph unicode=\"x\" horiz-adv-x=\"258\"\n        d=\"M0 3L84 95L10 176L102 176L133 139L164 176L251 176L178 95L258 4L167\n4L126 54L86 4Z\"/>\n    </font>\n  </defs>\n  <text style=\"font-size:200;font-family:testfont\" x=\"20\" y=\"182\">x</text>\n</svg>\n\n2. render it --- it uses the correct font.\n3. Now create a file bug.svg with the following contents (same directory):\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<svg id=\"test\">\n  <use xlink:href=\"nobug.svg#test\"/>\n</svg>\n\n4. render it --- it uses some default font.\n\nI think, the SVG 1.0 Recommendation ist not precise about <defs> in <use>d\nsubtrees, but I feel the above should render correctly.", "id": 26732, "time": "2002-11-21T19:54:23Z", "creator": "Andreas.Marx@neox.de", "creation_time": "2002-11-21T19:54:23Z", "is_private": false}, {"count": 1, "tags": [], "creator": "Andreas.Marx@neox.de", "text": "reproduced in 1.5b5 --- change file bug.svg to\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<svg id=\"test\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n  <use xlink:href=\"nobug.svg#test\"/>\n</svg>\n\nif batik complains about undefined xlink-prefix.", "id": 33753, "time": "2003-03-25T12:30:05Z", "bug_id": 14746, "creation_time": "2003-03-25T12:30:05Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "vincent.hardy@sun.com", "attachment_id": null, "id": 39634, "time": "2003-06-30T09:54:42Z", "bug_id": 14746, "creation_time": "2003-06-30T09:54:42Z", "is_private": false, "text": "The <use> element is a little odd as it does not really clone the content into\nthe referencing tree. Rather, it creates something called the shadow tree which\nreferences the original document. In that context, the SVG specification is not\nclear what should be done for fonts referenced from the shadow tree: should they\nbe added to the font data base or not? In Batik we decided that they shouldn't\nand I do not think this is a bug.\n\nTo get the effect you want:\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<svg id=\"test\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n        <defs>\n            <font-face font-family=\"testfont\">\n                <font-face-src>\n                    <font-face-uri xlink:href=\"nobug.svg#testfont\"/>\n                </font-face-src>     \n            </font-face>\n        </defs>\n  <use xlink:href=\"nobug.svg#testText\"/>\n</svg>\n\nand add the id 'textText' on the text element you are referencing.\n"}]