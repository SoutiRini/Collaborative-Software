[{"count": 0, "tags": [], "text": "The JavaScript line:\nparseXML(result.content, document);\n\ndoes not work if the content include a XML header like:\n\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\"    \n  \"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n\n\nYou can simple reproduce it if you add this header to the SVG file:\nsamples\\solitaire\\cards\\default.svg\n\n\nThen solitare does not work. It produce the follow stacktrace:\norg.mozilla.javascript.EcmaError: TypeError: Cannot convert null to an object.\n(Inline <script> file:/c:/output/1/SvgViewer.svg:7#20)\n\tat org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3240)\n\tat org.mozilla.javascript.ScriptRuntime.constructError(ScriptRuntime.java:3230)\n\tat org.mozilla.javascript.ScriptRuntime.typeError(ScriptRuntime.java:3246)\n\tat org.mozilla.javascript.ScriptRuntime.typeError0(ScriptRuntime.java:3252)\n\tat org.mozilla.javascript.ScriptRuntime.toObject(ScriptRuntime.java:869)\n\tat org.mozilla.javascript.ScriptRuntime.toObject(ScriptRuntime.java:827)\n\tat org.mozilla.javascript.Context.toObject(Context.java:1673)\n\tat org.apache.batik.script.rhino.WindowWrapper.parseXML(Unknown Source)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.mozilla.javascript.MemberBox.invoke(MemberBox.java:174)\n\tat org.mozilla.javascript.FunctionObject.call(FunctionObject.java:393)\n\tat org.mozilla.javascript.optimizer.OptRuntime.callName(OptRuntime.java:94)\n\tat org.mozilla.javascript.gen.c3._c3(Inline <script>\nfile:/c:/output/1/SvgViewer.svg:7:20)\n\tat org.mozilla.javascript.gen.c3.call(Inline <script>\nfile:/c:/output/1/SvgViewer.svg:7)\n\tat org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:304)\n\tat org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2769)\n\tat org.mozilla.javascript.gen.c3.call(Inline <script>\nfile:/c:/output/1/SvgViewer.svg:7)\n\tat org.apache.batik.script.rhino.RhinoInterpreter.callHandler(Unknown Source)\n\tat\norg.apache.batik.script.rhino.WindowWrapper$GetURLFunctionWrapper.getURLDone(Unknown\nSource)\n\tat org.apache.batik.bridge.ScriptingEnvironment$7.run(Unknown Source)\n\tat org.apache.batik.util.RunnableQueue.run(Unknown Source)\n\tat java.lang.Thread.run(Unknown Source)", "attachment_id": null, "id": 74842, "creator": "VBerlin@inetsoftware.de", "time": "2005-05-13T13:25:15Z", "bug_id": 34905, "creation_time": "2005-05-13T13:25:15Z", "is_private": false}, {"count": 1, "tags": [], "creator": "helder.magalhaes@gmail.com", "attachment_id": null, "text": "I was not being able to reproduce until I pasted the text portion you have referred into before the \"svg\" element but after the comment. Doing that will cause the document to be invalid XML (the document should always start with the XML preamble [1] [2], comments may follow). If you paste the header into very beginning of the file, it does works without issuing any error (as expected).\n\nNote that this is more related to \"XML parsing\" than to \"Scripting\" (\"Component\" attribute for the report), although Batik doesn't seem to have a specific component for that, as an external library (Xerces [3]) is used for XML parsing - if you still believe there's an underlying issue, please consider filing a report within that project.\n\nAs a side note, although this doesn't interfere with this particular issue, using Doctype declaration for SVG is generally not recommended [4].\n\n[1] http://www.w3.org/TR/REC-xml/#sec-well-formed\n[2] http://mail.python.org/pipermail/expat-discuss/2008-June/002484.html\n[3] http://xerces.apache.org/xerces-j/\n[4] http://jwatt.org/svg/authoring/#doctype-declaration", "id": 122543, "time": "2008-11-17T02:21:46Z", "bug_id": 34905, "creation_time": "2008-11-17T02:21:46Z", "is_private": false}]