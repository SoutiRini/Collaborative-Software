[{"attachment_id": null, "tags": [], "bug_id": 55263, "is_private": false, "count": 0, "id": 168587, "time": "2013-07-14T07:46:22Z", "creator": "shq-king@163.com", "creation_time": "2013-07-14T07:46:22Z", "text": "Hi, I`m developing a static analysis tool at university.\nRecently I applied my tool to httpd-2.4.4 and found a potential uninitialized variable bug.\nI have manually checked this bug several times. As I`m not familiar with the source code of httpd, this bug may be one false positive. Sorry for the trouble. I`m still looking forward to your replies!\n\nFile Name: /module/dav/main/mod_dav.c\nFunction Name: dav_method_lock()\nBuggy Code:\n\n  3089 if ((err = dav_validate_request(r, resource, depth, NULL, &multi_response,\n                                    (resource_state == DAV_RESOURCE_NULL\n                                     ? DAV_VALIDATE_PARENT\n                                     : DAV_VALIDATE_RESOURCE)\n                                    | (new_lock_request ? lock->scope : 0)\n                                    | DAV_VALIDATE_ADD_LD,\n                                    lockdb)) != OK)\n\nDescription:\nThe variable \"lock\" is initialized at line 3070 by the function \"dav_lock_parse_lockinfo()\", under the check \"doc != NULL\" at line 3069.\nHowever, if this check fails, i.e. doc == NULL, \"lock\" is uninitialized afterwards. So,it is very dangerous when reading \"lock->scope\" in 3089."}, {"count": 1, "text": "Hi,\n\nfirst of all, thanks for your report. Static analyzers can be great tools to spot corner cases bugs.\n\n\n\nThe use of 'lock->scope' is guarded by 'new_lock_request' which is set only if 'dav_lock_parse_lockinfo' succeeded.\n   (new_lock_request ? lock->scope : 0)\n\nI've checked quickly the code and, regarding the use of lock, it looks good to me.\n\nI'm closing as invalid.", "bug_id": 55263, "attachment_id": null, "id": 168616, "time": "2013-07-16T06:13:30Z", "creator": "christophe.jaillet@wanadoo.fr", "creation_time": "2013-07-16T06:13:30Z", "tags": [], "is_private": false}]