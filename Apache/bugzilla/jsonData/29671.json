[{"count": 0, "tags": [], "creator": "carl@zero-one.co.za", "attachment_id": null, "id": 59477, "time": "2004-06-18T12:51:11Z", "bug_id": 29671, "creation_time": "2004-06-18T12:51:11Z", "is_private": false, "text": "I am trying to run Tomcat standalone with 3 Coyote HTTP1.1 connectors defined:\nHTTP1.1 --> Port 22006 (behind the firewall comms)\nHTTP1.1 --> Port 22002 (normal HTTP access to hosts/contexts)\nHTTP1.1 --> Port 22003 (HTTPS bound a single IP for 1 hosts/context)\n\nWhen the server starts, all seems good right up until the end of the Tomcat \nstartup where the following exception is thrown:\n\n2004/06/18 01:47:32 org.apache.coyote.tomcat5.MapperListener init\nWARNING: Error registering contexts\njava.util.ConcurrentModificationException\n\tat java.util.HashMap$HashIterator.nextEntry(HashMap.java:782)\n\tat java.util.HashMap$EntryIterator.next(HashMap.java:824)\n\tat java.util.HashMap.putAllForCreate(HashMap.java:424)\n\tat java.util.HashMap.clone(HashMap.java:656)\n\tat mx4j.server.DefaultMBeanRepository.clone\n(DefaultMBeanRepository.java:56)\n\tat mx4j.server.MBeanServerImpl.findMBeansByPattern\n(MBeanServerImpl.java:1603)\n\tat mx4j.server.MBeanServerImpl.queryObjectNames\n(MBeanServerImpl.java:1568)\n\tat mx4j.server.MBeanServerImpl.queryMBeans(MBeanServerImpl.java:1512)\n\tat org.apache.coyote.tomcat5.MapperListener.init\n(MapperListener.java:115)\n\tat org.apache.coyote.tomcat5.CoyoteConnector.start\n(CoyoteConnector.java:1510)\n\tat org.apache.catalina.core.StandardService.start\n(StandardService.java:485)\n\tat org.apache.catalina.core.StandardServer.start\n(StandardServer.java:2298)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:556)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:284)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:422)\n\nThis causes all 3 Coyote Connectors to \"pause\" - thus not accpeting ANY \nrequests!"}, {"count": 1, "tags": [], "creator": "carl@zero-one.co.za", "attachment_id": null, "id": 59481, "time": "2004-06-18T15:12:26Z", "bug_id": 29671, "creation_time": "2004-06-18T15:12:26Z", "is_private": false, "text": "Further to my submission:\n\nI had a AccessLogValve in my server.xml at an ENGINE level as follows:\n\n<Valve className=\"org.apache.catalina.valves.AccessLogValve\" \ndirectory=\"d:\\pb\\logs\\\" prefix=\"sisa4_sites\" suffix=\"_tomcat.log\" \npattern=\"common\" resolveHosts=\"false\" rotatable=\"false\" />\n\nI then removed this from the server.xml and now the exception is only being \nthrown 50% of the time, whereas with the above AccessLogValve in place, the \nexception was thrown 100% of the time on server startup."}, {"count": 2, "tags": [], "bug_id": 29671, "attachment_id": null, "text": "Please try with the JMX RI 1.2.", "id": 59493, "time": "2004-06-18T18:41:30Z", "creator": "remm@apache.org", "creation_time": "2004-06-18T18:41:30Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 29671, "attachment_id": null, "text": "*** Bug 30460 has been marked as a duplicate of this bug. ***", "id": 61552, "time": "2004-08-04T18:46:15Z", "creator": "william.barker@wilshire.com", "creation_time": "2004-08-04T18:46:15Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 29671, "attachment_id": null, "text": "Resolution INVALID?!?  How is this not a bug?  I am having the same problem with\n3 Connectors defined.  Sometimes I get the error and when I do, one of my\nconnectors is \"unavailable\".  Sometimes I don't get the error and when I don't,\nall connectors are \"available\".  So again I am left wondering as to how this is\nnot a bug.  Perhaps Tomcat should use a Hashtable or a synchronized HashMap to\navoid the ConcurrentModificationException.\n\nMarion Bass\nmbass@alphaconinc.com", "id": 61836, "time": "2004-08-11T16:22:31Z", "creator": "mbass@alphaconinc.com", "creation_time": "2004-08-11T16:22:31Z", "is_private": false}, {"count": 5, "tags": [], "creator": "william.barker@wilshire.com", "text": "It's not a *Tomcat* bug.  If you want to file a bug with mx4j, be my \nguest :).  In the meantime, use the JMX RI like Remy suggested.", "id": 61851, "time": "2004-08-11T18:40:53Z", "bug_id": 29671, "creation_time": "2004-08-11T18:40:53Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "*** Bug 30771 has been marked as a duplicate of this bug. ***", "attachment_id": null, "bug_id": 29671, "id": 62248, "time": "2004-08-20T18:28:24Z", "creator": "william.barker@wilshire.com", "creation_time": "2004-08-20T18:28:24Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 29671, "attachment_id": null, "text": "Could you please elaborate on:\n> Please try with the JMX RI 1.2.\n\nI got to here \nhttp://wwws.sun.com/software/communitysource/jmx/download.html\nDownloaded v1.2.1 and located jmxri.jar in the distribution.\n\nI was expecting to find a jar by that name in the Tomcat distribution I would \njust need to overwrite, but I cannot find that or any jar that seems to have \nJMX stuff in it.  \n\nPlease could you give me a pointer.", "id": 62278, "time": "2004-08-21T07:54:14Z", "creator": "al@starfishzone.com", "creation_time": "2004-08-21T07:54:14Z", "is_private": false}, {"count": 8, "tags": [], "text": "You copy the jxmri.jar to $CATALINA_HOME/bin/jmx.jar (leaving the name \nas 'jmx.jar' to avoid having to edit classpaths).", "attachment_id": null, "bug_id": 29671, "id": 62294, "time": "2004-08-21T19:25:39Z", "creator": "william.barker@wilshire.com", "creation_time": "2004-08-21T19:25:39Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 29671, "attachment_id": null, "text": "*** Bug 33694 has been marked as a duplicate of this bug. ***", "id": 71366, "time": "2005-02-22T20:09:06Z", "creator": "william.barker@wilshire.com", "creation_time": "2005-02-22T20:09:06Z", "is_private": false}]