[{"count": 0, "tags": [], "bug_id": 52936, "attachment_id": 28484, "is_private": false, "id": 155012, "time": "2012-03-18T11:07:22Z", "creator": "miel.donkers@codecentric.nl", "creation_time": "2012-03-18T11:07:22Z", "text": "Created attachment 28484\nPatch file for Object Message enhancement\n\nHi,\n\nThe current implementation of JMS Publisher does not support sending of Object Messages, simply an exception is thrown.\n\nThe supplied patch fixes this issue and allows the loading of a serialized object from file, and send it as the body of an JMS Object Message.\n\nSome small code cleanup is also included, but provides no additional functionality."}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "text": "Hello,\nThanks for your patch submission.\nReviewing it I have a little issue with it, currently how do you make the content variable ?\nWouldn't be a better solution to unmarshall the java Object from an XML structure using XStream, which would make it easier to variabilize the content ?", "id": 155030, "time": "2012-03-18T21:08:09Z", "bug_id": 52936, "creation_time": "2012-03-18T21:08:09Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 52936, "attachment_id": null, "is_private": false, "id": 155037, "time": "2012-03-19T08:07:51Z", "creator": "miel.donkers@codecentric.nl", "creation_time": "2012-03-19T08:07:51Z", "text": "Thanks for your feedback. To be honest I did not think of this solution.\nI will change the implementation to use XStream. And also make sure that the XML can be pasted in the text-field and as such the Object Message can be sent.\nAfter the changes are made I will supply a new patch."}, {"count": 3, "tags": [], "bug_id": 52936, "attachment_id": 28510, "id": 155315, "time": "2012-03-27T15:24:24Z", "creator": "miel.donkers@codecentric.nl", "creation_time": "2012-03-27T15:24:24Z", "is_private": false, "text": "Created attachment 28510\nPatch for loading object and deserialize with XStream\n\nRefactored the previous solution. Now uses XStream to load an (XML) object, which is deserialized so it can be send as JMS Object Message body."}, {"count": 4, "tags": [], "bug_id": 52936, "attachment_id": null, "is_private": false, "id": 155316, "time": "2012-03-27T15:34:29Z", "creator": "miel.donkers@codecentric.nl", "creation_time": "2012-03-27T15:34:29Z", "text": "Hi,\n\nI updated the solution to use XStream to deserialize an object from XML.\n\nThere is one problem however; to correctly deserialize our objects (which include Joda time) we need the latest version of XStream library (1.4.2).\nI already updated this dependency version. However between 1.3.x and 1.4.x a change was made to use dynamic loading of a XML Pull Parser. For this, XStream expects a XMLPullParserFactory to be on its path. So still the supplied code and the JMeter test set is failing.\n\nThe XMLPullParserFactory is not included in the Xpp3 dependency. There are two solutions;\n- Either tell XStream to explicitly use the Xpp3Driver\n- Put a dependency on the path including the XMLPullParserFactory. For example xmlpull-1.1.3.1.jar or kXML2\n\nThe first solution introduces quite some work, but for the second solution I don't know which library would be preferred.\n\nPlease let me know if there are other questions.\n\nI'll make a separate patch to also be able to paste the XML object into the text field and send it as object as such."}, {"count": 5, "tags": [], "text": "Created attachment 28528\nSupplementary patch to get XStream working\n\nPatch file adds XMLPull library to the project, so that XStream works again.\nThe newer version of XStream tries to use a XMLPullFactory, which was not included.", "attachment_id": 28528, "bug_id": 52936, "id": 157056, "time": "2012-04-02T14:04:33Z", "creator": "miel.donkers@codecentric.nl", "creation_time": "2012-04-02T14:04:33Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 52936, "attachment_id": null, "id": 157057, "time": "2012-04-02T14:05:28Z", "creator": "miel.donkers@codecentric.nl", "creation_time": "2012-04-02T14:05:28Z", "is_private": false, "text": "See patches. Together these should implement the requested enhancement."}, {"count": 7, "tags": [], "bug_id": 52936, "is_private": false, "text": "Thanks, Applied partly patch for XStream.", "id": 158286, "time": "2012-04-22T19:59:10Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-04-22T19:59:10Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "text": "I have reviewed the patch and there are still some things to change.\n\nMy main concern is that as implemented in fact it loads Java Object  as XML from file.\nThis is an issue to variabilize data as data loaded from file cannot be variabilized (see https://issues.apache.org/bugzilla/show_bug.cgi?id=15468).\n\nSo it would be better if Object serialized in XML could be loaded from TextArea and so stored in Test Plan. This would ease a lot the variabilization and so make patch more useful.\nAnother concern would be some tooling to serialize the Object to XML with XStream from JMeter GUI, cause with current proposed patch user must write some code in Java to serialize.", "id": 158394, "time": "2012-04-24T21:41:59Z", "bug_id": 52936, "creation_time": "2012-04-24T21:41:59Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 52936, "attachment_id": null, "is_private": false, "id": 158397, "time": "2012-04-24T23:35:42Z", "creator": "sebb@apache.org", "creation_time": "2012-04-24T23:35:42Z", "text": "Seems to me it would be best if the object could be derived either from a file or from the screen."}, {"count": 10, "tags": [], "bug_id": 52936, "is_private": false, "text": "Hello,\nWhat do you mean d\u00e9rived from screen ? \nWhat i hav\u00e9 in mind is to use current  textarea\nAnd if object is s\u00e9lected as type then d\u00e9serialize from XML .\nThis would allow easy variabilization of object properties.\nAnother way would be to enable getting an object from jmeter context\n(so name of object should be input) and a beanshell sampler would hav\u00e9\nSet it before.", "id": 158399, "time": "2012-04-25T06:17:39Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-04-25T06:17:39Z", "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 52936, "attachment_id": null, "is_private": false, "id": 158407, "time": "2012-04-25T08:56:47Z", "creator": "sebb@apache.org", "creation_time": "2012-04-25T08:56:47Z", "text": "(In reply to comment #10)\n> Hello,\n> What do you mean d\u00e9rived from screen ? \n> What i hav\u00e9 in mind is to use current  textarea\n\nThat's what I meant.\n\n> And if object is s\u00e9lected as type then d\u00e9serialize from XML .\n> This would allow easy variabilization of object properties.\n\nYes.\n\n> Another way would be to enable getting an object from jmeter context\n> (so name of object should be input) and a beanshell sampler would hav\u00e9\n> Set it before.\n\nBut neither is good for large (fixed) objects, which is why it would be useful to be able to read the XML from a file."}, {"count": 12, "tags": [], "bug_id": 52936, "attachment_id": null, "is_private": false, "id": 158408, "time": "2012-04-25T09:33:04Z", "creator": "miel.donkers@codecentric.nl", "creation_time": "2012-04-25T09:33:04Z", "text": "Hi,\n\nAfter this patch was committed, I also wanted to write a patch to (as is suggested in the comments) to load XML from the text area. This would then correspond with existing functionality (load message content both from text area as well as a file). Because we need the 'loading from a file' and because of consistency, I therefore also propose to support both options.\n\nI understand now that it would be better to combine the two into one single patch.   Please expect this patch here in the next couple of days...\n\nTo serialize an object into XML from within the JMeter GUI I don't yet have a solution / proposal. We are using our own 'tool' which we created specifically for this task. This tool could be modified to be included into JMeter.\nIs there already similar functionality in JMeter for a different protocol? We could then mimic the look&feel and behaviour."}, {"count": 13, "tags": [], "text": "Created attachment 28713\nPatch for loading object and deserialize with XStream. Load from file or from text-area\n\nThis new patch replaces the previous one about object loading.\nIt is now also possible to copy-paste XML into the JMeter text-area, which will be transformed by XStream and used for the JMS Object Message body.", "attachment_id": 28713, "id": 158776, "creator": "miel.donkers@codecentric.nl", "time": "2012-05-03T09:35:42Z", "bug_id": 52936, "creation_time": "2012-05-03T09:35:42Z", "is_private": false}, {"count": 14, "tags": [], "text": "Date: Thu May  3 13:49:55 2012\nNew Revision: 1333460\n\nURL: http://svn.apache.org/viewvc?rev=1333460&view=rev\nLog:\nBug 52936 - JMS Publisher : Support sending of JMS Object Messages\n\nModified:\n   jmeter/trunk/src/core/org/apache/jmeter/resources/messages.properties\n   jmeter/trunk/src/core/org/apache/jmeter/resources/messages_es.properties\n   jmeter/trunk/src/core/org/apache/jmeter/resources/messages_fr.properties\n   jmeter/trunk/src/core/org/apache/jmeter/resources/messages_pt_BR.properties\n   jmeter/trunk/src/core/org/apache/jmeter/resources/messages_tr.properties\n   jmeter/trunk/src/core/org/apache/jmeter/resources/messages_zh_TW.properties\n   jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/control/gui/JMSPublisherGui.java\n   jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/sampler/PublisherSampler.java\n   jmeter/trunk/xdocs/changes.xml\n   jmeter/trunk/xdocs/usermanual/component_reference.xml", "attachment_id": null, "id": 158782, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2012-05-03T13:50:42Z", "bug_id": 52936, "creation_time": "2012-05-03T13:50:42Z", "is_private": false}, {"count": 15, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "text": "Thanks for the patch.\nApplied with following changes:\n- Removed popup that triggered when TextArea as source was select and Object Type Radio was selected\n- Removed useless messages from resources\n- Modified label of Text area as its content can also be used by Object Messages\n- Changed instance methods to static\n- Updated component_reference.xml", "id": 158783, "time": "2012-05-03T13:52:49Z", "bug_id": 52936, "creation_time": "2012-05-03T13:52:49Z", "attachment_id": null}, {"count": 16, "tags": [], "text": "Created attachment 28715\nSample Plan used for testing, it serializes JMeter Thread Group\n\nCode used for serialization:\n\npublic class SerializeWithXStream {\n\n    public static void main(String[] args) {\n        ThreadGroup threadGroup = new ThreadGroup();\n        threadGroup.setComment(\"comment\");\n        threadGroup.setDelay(123);\n        threadGroup.setDuration(456);\n        threadGroup.setName(\"TG-1\");\n        threadGroup.setNumThreads(5);\n        threadGroup.setRampUp(600);\n        threadGroup.setStartTime(111111111);\n        XStream xstream = new XStream();\n        String xml = xstream.toXML(threadGroup);\n        System.out.println(xml);\n    }\n}", "attachment_id": 28715, "bug_id": 52936, "id": 158784, "time": "2012-05-03T13:54:37Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-05-03T13:54:37Z", "is_private": false}]