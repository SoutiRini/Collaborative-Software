[{"attachment_id": 29223, "tags": [], "creator": "xshao@ebay.com", "is_private": false, "count": 0, "id": 161357, "time": "2012-08-14T06:28:58Z", "bug_id": 53713, "creation_time": "2012-08-14T06:28:58Z", "text": "Created attachment 29223\npatch for JspReader.java\n\nmark() is called so many times when doing JSP or tag files compilation.\nThis can be reduced by a little bit code changes.\n\nAttached files contain this solution."}, {"count": 1, "attachment_id": 29224, "bug_id": 53713, "text": "Created attachment 29224\nPatch for Mark.java", "id": 161358, "time": "2012-08-14T06:29:38Z", "creator": "xshao@ebay.com", "creation_time": "2012-08-14T06:29:38Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 53713, "text": "Moving to enhancement since there is no bug here.\n\nPlease provide a test case that demonstrates the performance improvement.", "id": 161440, "time": "2012-08-15T20:43:47Z", "creator": "markt@apache.org", "creation_time": "2012-08-15T20:43:47Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 53713, "is_private": false, "id": 161488, "creation_time": "2012-08-17T14:29:52Z", "time": "2012-08-17T14:29:52Z", "creator": "xshao@ebay.com", "text": "Created attachment 29242\nPatch for JspReader.java", "attachment_id": 29242}, {"count": 4, "tags": [], "bug_id": 53713, "attachment_id": 29243, "text": "Created attachment 29243\nPatch for Mark.java", "id": 161489, "time": "2012-08-17T14:30:23Z", "creator": "xshao@ebay.com", "creation_time": "2012-08-17T14:30:23Z", "is_private": false}, {"count": 5, "text": "Created attachment 29244\nComparison test case for JspReader", "bug_id": 53713, "is_private": false, "id": 161490, "time": "2012-08-17T14:31:30Z", "creator": "xshao@ebay.com", "creation_time": "2012-08-17T14:31:30Z", "tags": [], "attachment_id": 29244}, {"count": 6, "tags": [], "bug_id": 53713, "attachment_id": 29245, "id": 161491, "time": "2012-08-17T14:32:25Z", "creator": "xshao@ebay.com", "creation_time": "2012-08-17T14:32:25Z", "is_private": false, "text": "Created attachment 29245\nOldJspReader.java renamed from original JspReader.java"}, {"attachment_id": 29246, "tags": [], "creator": "xshao@ebay.com", "is_private": false, "count": 7, "id": 161492, "time": "2012-08-17T14:33:04Z", "bug_id": 53713, "creation_time": "2012-08-17T14:33:04Z", "text": "Created attachment 29246\nOldMark.java renamed from the original Mark.java"}, {"count": 8, "attachment_id": null, "bug_id": 53713, "text": "Test case for comparison,\n\nWebapp test/webapp-2.3 New JspReader:529\nWebapp test/webapp-2.3 Old JspReader:2256\n\nWebapp test/webapp-2.4 New JspReader:362\nWebapp test/webapp-2.4 Old JspReader:1392\n\nWebapp test/webapp-2.5 New JspReader:441\nWebapp test/webapp-2.5 Old JspReader:1338\n\nWebapp test/webapp-3.0 New JspReader:9525\nWebapp test/webapp-3.0 Old JspReader:26608\n\nWebapp test/webapp-3.0-fragments New JspReader:1416\nWebapp test/webapp-3.0-fragments Old JspReader:3417\n\nWebapp test/webapp-3.0-servletsecurity2 New JspReader:406\nWebapp test/webapp-3.0-servletsecurity2 Old JspReader:1011\n\nWebapp test/webapp-3.0-virtual-webapp New JspReader:2495\nWebapp test/webapp-3.0-virtual-webapp Old JspReader:4935\n\t\t\n\nHere is part of the test case,\n\n                 int count = 1000;\n\t\tlong start = System.currentTimeMillis();\n\t\tfor(int i = 0; i < count; i ++) {\n\t\t\tgoThroughAllJsp(appDir, true);\n\t\t}\n\t\tSystem.out.println(\"Webapp \" + folder + \" New JspReader:\"\n\t\t\t\t+ (System.currentTimeMillis() - start));\n\t\tstart = System.currentTimeMillis();\n\t\tfor(int i = 0; i < count; i ++) {\n\t\t\tgoThroughAllJsp(appDir, false);\n\t\t}\n\t\tSystem.out.println(\"Webapp \" + folder + \" Old JspReader:\"\n\t\t\t\t+ (System.currentTimeMillis() - start));", "id": 161493, "time": "2012-08-17T14:37:54Z", "creator": "xshao@ebay.com", "creation_time": "2012-08-17T14:37:54Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "text": "Comment on attachment 29244\nComparison test case for JspReader\n\nChange mime type", "attachment_id": 29244, "bug_id": 53713, "id": 161926, "time": "2012-09-03T15:05:42Z", "creator": "markt@apache.org", "creation_time": "2012-09-03T15:05:42Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 53713, "text": "Nice improvement. I'll take a closer look at the patch with a view to including it in the next release.", "id": 161973, "time": "2012-09-05T16:42:23Z", "creator": "markt@apache.org", "creation_time": "2012-09-05T16:42:23Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 53713, "is_private": false, "text": "Thanks for the patch. It has been applied (with slight formatting changes) to trunk and 7.0.x and will be included in 7.0.31 onwards.", "id": 161983, "time": "2012-09-05T22:15:15Z", "creator": "markt@apache.org", "creation_time": "2012-09-05T22:15:15Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 53713, "text": "Shall JspReadler be thread-safe? Why is the member sourceFiles java.util.Vector?", "id": 163010, "time": "2012-10-29T05:27:47Z", "creator": "bluewolf.chung@gmail.com", "creation_time": "2012-10-29T05:27:47Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "creator": "xshao@ebay.com", "attachment_id": null, "id": 163011, "time": "2012-10-29T06:27:04Z", "bug_id": 53713, "creation_time": "2012-10-29T06:27:04Z", "is_private": false, "text": "Yes, this is a good question.  It was a Vector before this fix.\nCould we change the typeto ArrayList ?"}]