[{"count": 0, "tags": [], "bug_id": 29048, "attachment_id": null, "text": "My problem is this. I need to modify the DataSourceRealm so that failed login \nattempts are recorded and an account gets locked after a certain number of \nlogin failures.\n\nI want to subclass the DataSourceRealm but unfortunately some of the key \nmethods, authenticate(x3 params), open and close are declared private. The app \nis to be deployed at a commercial ISP so changing the DatSourceRealm class \ndirectly isn't a possibility. I intend to copy the class and make the \nappropriate changes as a sibling but it would have been preferable to just \noverride these methods.\n\nI would request that the permissions on useful methods in the \norg.apache.catalina.realm.DataSourceRealm be modified from private to protected \nto make future changes easier. I am more than happy to do these changes myself \nand send the modified class to you.", "id": 57579, "time": "2004-05-18T03:25:39Z", "creator": "sjdavies@acm.org", "creation_time": "2004-05-18T03:25:39Z", "is_private": false}, {"count": 1, "tags": [], "text": "You can achieve it the other (simpler, imho) way round. Provided that you have\nthe table containing user data (username, password) as well as its status (say\nlocked), All you have to do is to create a view selecting only unlocked account\ntable rows and make your DataSourceRealm use this view instead of the table. \n\nI see no point in bloating DSR with user-specific/app-specific functionality.", "is_private": false, "id": 57590, "creation_time": "2004-05-18T08:04:56Z", "time": "2004-05-18T08:04:56Z", "creator": "drzewo@post.pl", "bug_id": 29048, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 29048, "attachment_id": null, "text": "As you say, providing a view will provide some of the required function without\ncode modification. The problem is that if the users fails authentication the\ncounter must be increased, if the users passes authentication the counter is\nzeroed. That may be possible in a view but I can't see how to do it.\n\nThis is not a request for user-specific code to be placed in DSR. It is simply\nan enhancement request to change method visibility from private to protected.\nThis will not 'bloat' the code space.\n\nClasses are often used in ways the original designer did not cater for. In\nattempting to reuse the functionality of DSR through subclassing, problems were\nencountered. Because methods such as open, close & credentials were private they\nhad to be re-implemented in the subclass even though they were direct copies of\nthe superclass implementations. The authenticate(x2 params) method had to be\ncopied because it relied on the private authenticate(x3 params).\n\nChanging the visibility will mean that app-specific subclasses can simply\noverride authenticate(x3). Surely this level of reuse is desirable?", "id": 57602, "time": "2004-05-18T10:57:39Z", "creator": "sjdavies@acm.org", "creation_time": "2004-05-18T10:57:39Z", "is_private": false}, {"count": 3, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "id": 58159, "time": "2004-05-26T19:52:19Z", "bug_id": 29048, "creation_time": "2004-05-26T19:52:19Z", "is_private": false, "text": "I like this request, and we do want to encourage such extension, especially for \nsuch a good use-case.  Please send a diff patch against the class with your \ndesired changes."}, {"count": 4, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "id": 58757, "time": "2004-06-04T13:52:34Z", "bug_id": 29048, "creation_time": "2004-06-04T13:52:34Z", "is_private": false, "text": "Made authenticate, open, and close methods protected instead of private."}]