[{"count": 0, "tags": [], "bug_id": 44718, "attachment_id": null, "id": 115161, "time": "2008-03-31T15:14:39Z", "creator": "michael.giroux@bull.com", "creation_time": "2008-03-31T15:14:39Z", "is_private": false, "text": "We have a build environment that allows developers to do a build on a remote system using SCP and SSH tasks when the build is invoked from a system other than the build system.  If the developer is logged in directly to the build system, then the build uses <copy> and <exec> tasks instead.\n\nCurrently we use macrodef to generalize the SCP and SSH commands.  When doing a local build, the macrodef uses the <copy> and <exec> instead.  Our current build uses two separate xml files to define macrodefs for local and remote build initiation and a <condition> to set a property with the filename of the desired macrodef.xml file.\n\nThis build could be simplified if the macrodef allowed if/unless attributes.  That would allow us to include two macrodefs in a single build.xml and allow ANT to select the correct one based on the condition.\n\nDoes this sound like the sort of thing that would have general interest?  We hope so :)"}, {"count": 1, "tags": [], "bug_id": 44718, "text": "Created attachment 32640\nPatch for adding optional chmod and umask attributes to the scp task", "id": 182289, "time": "2015-04-09T13:55:06Z", "creator": "holly.k.cummins@googlemail.com", "creation_time": "2015-04-09T13:55:06Z", "is_private": false, "attachment_id": 32640}, {"count": 2, "tags": [], "bug_id": 44718, "text": "Apologies, this comment was intended for another work item.", "id": 182290, "time": "2015-04-09T13:58:25Z", "creator": "holly.k.cummins@googlemail.com", "creation_time": "2015-04-09T13:58:25Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 44718, "attachment_id": null, "id": 182296, "time": "2015-04-10T07:01:30Z", "creator": "jan@materne.de", "creation_time": "2015-04-10T07:01:30Z", "is_private": false, "text": "You could use the if/unless namespaces like\n\n<project>\n\n    <macrodef name=\"test\" xmlns:if=\"ant:if\" xmlns:unless=\"ant:unless\">\n        <sequential>\n            <sequential if:set=\"local\">\n                <echo>macro for local</echo>\n            </sequential>\n            <sequential unless:set=\"local\">\n                <echo>macro for remote</echo>\n            </sequential>\n        </sequential>\n    </macrodef>\n    \n    <test />\n\n</project>\n\n\nBut I think <import>ing one specialized definition file is more readable ...\nIt's more like a (missing) interface with two implementations than one class with handling a flag on each method ..."}]