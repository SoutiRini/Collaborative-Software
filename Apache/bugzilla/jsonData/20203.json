[{"count": 0, "tags": [], "text": "Hi there!\n\nYesterday i found a very critical bug in the ErrorDocument 404 Feature.\nIf you have a 404 Error on a Page the ErrorDocument Handler opens a file \ndefined in the Apache Config or in a .htaccess file. This works fine so far.\n\nBut now the Problem:\nIf the Error Page which is requested is a php file with includes another file \nwhich doesnt exist on the server it gets another 404 and tries to request the \nerror file again and again and again... this causes a very high server load and \napache gets very slow.\n\nin the access log it looks like this:\n<remote client ip> - - [23/May/2003:20:20:22 +0200] \"GET /<a file which doesnt \nexist> HTTP/1.0\" 404 6133 \"-\" \"Googlebot/2.1\n<ip of the server itself> - - [23/May/2003:20:20:22 +0200] \"GET /<the file \nwhich gets included in the php file> HTTP/1.0\" 200 5561 \"-\" \"-\"\n<ip of the server itself> - - [23/May/2003:20:20:22 +0200] \"GET /<the file \nwhich gets included in the php file> HTTP/1.0\" 200 5561 \"-\" \"-\"\n<ip of the server itself> - - [23/May/2003:20:20:22 +0200] \"GET /<the file \nwhich gets included in the php file> HTTP/1.0\" 200 5561 \"-\" \"-\"\n<ip of the server itself> - - [23/May/2003:20:20:22 +0200] \"GET /<the file \nwhich gets included in the php file> HTTP/1.0\" 200 5561 \"-\" \"-\"\n\nand so on.\n\nyou can see that first comes the 404 error, then the server opens the \nerrordocument and runs amok with the include of another php file.\n\ni hope i described the bug comprehensible,\n\ngreetings,\n\nFlorian Schicker", "attachment_id": null, "bug_id": 20203, "id": 37707, "time": "2003-05-24T11:46:56Z", "creator": "fs@nessus.at", "creation_time": "2003-05-24T11:46:56Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 20203, "is_private": false, "id": 37722, "attachment_id": null, "creator": "slive@apache.org", "creation_time": "2003-05-24T17:00:30Z", "time": "2003-05-24T17:00:30Z", "text": "It is hard to tell exactly what you mean by \"the php script includes another\nfile\" (it appears that the php script is using HTTP to get the file, rather\nthan just grabbing it from the filesystem; this isn't very smart).\n\nBut in any case, I'm fairly sure there is nothing apache can do to help this.\nAny script used as an error document must take its own precautions to assure\nthat it handles its own errors."}]