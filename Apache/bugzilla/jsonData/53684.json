[{"attachment_id": 29196, "tags": [], "creator": "Arfrever.FTA@GMail.Com", "text": "Created attachment 29196\nSupport Berkeley DB 5.2 and 5.3\n\nbuild/dbm.m4 (in APR trunk and APR-Util) should support Berkeley DB 5.2 and 5.3. I attach the patch.", "count": 0, "id": 161184, "time": "2012-08-09T13:21:00Z", "bug_id": 53684, "creation_time": "2012-08-09T13:21:00Z", "is_private": false}, {"count": 1, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": 29203, "is_private": false, "id": 161210, "time": "2012-08-09T20:44:00Z", "bug_id": 53684, "creation_time": "2012-08-09T20:44:00Z", "text": "Created attachment 29203\nReduce copy and paste in Berkeley DB tests\n\nCan you please check this alternative implementation. It is based on apr trunk."}, {"count": 2, "tags": [], "bug_id": 53684, "text": "I committed my patch to apr trunk (r1371818) and apr-util 1.5 head (r1371820).\nSince the first 1.5 release is expected soon, I'm not planning to port the change back to 1.4.x.\n\nThanks for the heads up.", "id": 161244, "time": "2012-08-10T20:08:16Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2012-08-10T20:08:16Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "APU_CHECK_DB_ALL contains:\n\n  # Start version search at version 5.9\n  version=59\n\nAPU_CHECK_DBM contains:\n\n  db_max_version=53\n\nFor consistency, both numbers could be 59.", "is_private": false, "bug_id": 53684, "id": 161255, "time": "2012-08-11T10:32:07Z", "creator": "Arfrever.FTA@GMail.Com", "creation_time": "2012-08-11T10:32:07Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "The fix does not work for me.\n\n$ ./configure --with-dbm=db52 --with-berkeley-db=/usr/include/db5.2:/usr/lib64\n...\n./configure: line 29729: -ge: command not found\n./configure: command substitution: line 33827: unexpected EOF while looking for matching `''\n./configure: command substitution: line 33828: syntax error: unexpected end of file\n./configure: command substitution: line 33828: unexpected EOF while looking for matching `''\n./configure: command substitution: line 33829: syntax error: unexpected end of file\nchecking for Berkeley DB . in /usr/include/db5.2 and /usr/lib64... \nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db.h usability... yes\nchecking db.h presence... yes\nchecking for db.h... yes\nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db.h usability... yes\nchecking db.h presence... yes\nchecking for db.h... yes\nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db.h usability... yes\nchecking db.h presence... yes\nchecking for db.h... yes\nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db.h usability... yes\nchecking db.h presence... yes\nchecking for db.h... yes\nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db/db.h usability... no\nchecking db/db.h presence... no\nchecking for db/db.h... no\nchecking db.h usability... yes\nchecking db.h presence... yes\nchecking for db.h... yes\nconfigure: error: Berkeley db not found", "is_private": false, "bug_id": 53684, "id": 161256, "time": "2012-08-11T11:00:37Z", "creator": "Arfrever.FTA@GMail.Com", "creation_time": "2012-08-11T11:00:37Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "Arfrever.FTA@GMail.Com", "attachment_id": null, "is_private": false, "id": 161257, "time": "2012-08-11T11:15:16Z", "bug_id": 53684, "creation_time": "2012-08-11T11:15:16Z", "text": "[ ] is a quoting operator in Autoconf, so the following lines do not work:\n\nwhile [ $version -ge 40 ]\nwhile [ $version -ge 41 ]"}, {"count": 6, "tags": [], "bug_id": 53684, "text": "Big Oups, I committed a preliminary version not the final one.\n\nShould be fixed now, r1371919 in apr trunk and r1371920 in apr-util 1.5.x.\n\nSorry for the inconvenience.\n\nRainer", "id": 161260, "time": "2012-08-11T11:36:16Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2012-08-11T11:36:16Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 53684, "is_private": false, "text": "Comment #4 mentioned some syntax errors in lines 33827-33829. The following should fix them:\n\n--- build/dbm.m4\n+++ build/dbm.m4\n@@ -425,8 +425,8 @@\n     fi\n     ;;\n   db[[45]] | db[[45]][[0-9]])\n-    db_major=`echo \"$requested\" | sed -e 's/db//' -e 's/.$//`\n-    db_minor=`echo \"$requested\" | sed -e 's/db//' -e 's/.//`\n+    db_major=`echo \"$requested\" | sed -e 's/db//' -e 's/.$//'`\n+    db_minor=`echo \"$requested\" | sed -e 's/db//' -e 's/.//'`\n     APU_CHECK_DBXY(\"$check_places\", \"$db_major\", \"$db_minor\")\n     if test \"$apu_db_version\" != \"$db_major\"; then\n       AC_MSG_ERROR(Berkeley db$db_major not found)", "id": 161261, "time": "2012-08-11T11:38:57Z", "creator": "Arfrever.FTA@GMail.Com", "creation_time": "2012-08-11T11:38:57Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 53684, "text": "Fixed in r1371923 resp r1371924.", "id": 161262, "time": "2012-08-11T11:51:51Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2012-08-11T11:51:51Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "text": "It seems to work now.", "is_private": false, "bug_id": 53684, "id": 161263, "time": "2012-08-11T12:01:24Z", "creator": "Arfrever.FTA@GMail.Com", "creation_time": "2012-08-11T12:01:24Z", "attachment_id": null}]