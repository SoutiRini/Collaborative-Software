[{"count": 0, "tags": [], "bug_id": 19803, "text": "Using the nightly build from 2003-05-07, I get the following exception when\nusing the manager app to reload any webapp...\n\nFAIL - Encountered exception java.lang.IncompatibleClassChangeError:\norg.apache.jasper.servlet.JspServlet\n\nThat message is displayed in the manager app's \"Message\" field near the top of\nthe page in the manager html view.\n\nLooking in the logs, there really is no indication that an error is happening. \nMaybe my debug level is too low?\n\nAnyway, the manager reload is completely broken because of this issue\n\nJake", "id": 36990, "time": "2003-05-09T16:00:03Z", "creator": "hoju@visi.com", "creation_time": "2003-05-09T16:00:03Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 19803, "attachment_id": null, "id": 37566, "creation_time": "2003-05-21T21:06:56Z", "time": "2003-05-21T21:06:56Z", "creator": "remm@apache.org", "text": "I cannot reproduce this. Used a non precompiled JSP; accessed it; reload weapp;\naccess JSP again.", "is_private": false}, {"count": 2, "tags": [], "bug_id": 19803, "attachment_id": null, "text": "Hmm... I'll try to update to the latest build and re-test.  However, it dosn't\nseem to specifically have to do with jsp.  Here is another message when I try to\nreload Tomcat's admin app...\n\nFAIL - Encountered exception java.lang.IncompatibleClassChangeError:\norg.apache.catalina.servlets.DefaultServlet\n\n\nAnd here is an error I get when trying to reload one of my own apps that uses\nthe Barracuda framework...\n\nFAIL - Encountered exception java.lang.IncompatibleClassChangeError:\norg.enhydra.barracuda.plankton.data.ObjectRepositoryAssembler\n\nNote that ObjectRepositoryAssembler extends HttpServlet.\n\nJake\n", "id": 37571, "time": "2003-05-21T23:35:35Z", "creator": "hoju@visi.com", "creation_time": "2003-05-21T23:35:35Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 19803, "is_private": false, "text": "I just set up the Tomcat5 from today's CVS.  I am seeing the same behavior. \nNote that I am running under Win2k sp3 (not sure if that makes a difference?).\n\nHere's a full stack trace when reloading the admin app...\n\n2003-05-21 21:56:42 HTMLManager: restart: Reloading web application at '/admin'\n2003-05-21 21:56:43 HTMLManager: ManagerServlet.reload[/admin]\njava.lang.IncompatibleClassChangeError: org.apache.catalina.servlets.DefaultServlet\n\tat\norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1214)\n\tat\norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1174)\n\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:968)\n\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:876)\n\tat\norg.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3847)\n\tat org.apache.catalina.core.StandardContext.reload(StandardContext.java:2894)\n\tat org.apache.catalina.manager.ManagerServlet.reload(ManagerServlet.java:802)\n\tat\norg.apache.catalina.manager.HTMLManagerServlet.reload(HTMLManagerServlet.java:501)\n\tat\norg.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:151)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:743)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:288)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:263)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:562)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:930)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:183)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\n\tat\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:558)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:562)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:930)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2735)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:177)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\n\tat\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:149)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:562)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:930)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:156)\n\tat\norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:562)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:930)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:203)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:637)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:463)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:568)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:631)\n\tat java.lang.Thread.run(Thread.java:536)\n", "id": 37572, "time": "2003-05-22T03:02:36Z", "creator": "hoju@visi.com", "creation_time": "2003-05-22T03:02:36Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 19803, "attachment_id": null, "text": "I tried the admin, and it reloaded without that exception. The admin webapp was\nprecompiled in my case (which is part of the build process).", "id": 37575, "time": "2003-05-22T06:43:50Z", "creator": "remm@apache.org", "creation_time": "2003-05-22T06:43:50Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 19803, "text": "BTW, I am considering proposing changing reload to be stop + start, for\nsimplicity and cleaness reasons. Can you hack your code or play with the manager\nand experiment with that solution ?", "id": 37576, "time": "2003-05-22T06:50:26Z", "creator": "remm@apache.org", "creation_time": "2003-05-22T06:50:26Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 19803, "text": "The manager app seems to claim that starting and stopping works just fine.\n\nFor instance, here's what happens when I...\n\nstop jsp-examples\nOK - Stopped application at context path /jsp-examples\n\nstart jsp-examples\nOK - Started application at context path /jsp-examples\n\nHowever, when I go to the context after the manager has claimed to start it\nagain, nothing works.  Not event the index.html page.\n\nSeems like there is something more serious going on.  I have none of these\nproblems with Tomcat-4.1.24\n\nJake", "id": 37624, "time": "2003-05-22T17:51:35Z", "creator": "hoju@visi.com", "creation_time": "2003-05-22T17:51:35Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 37626, "time": "2003-05-22T18:17:08Z", "bug_id": 19803, "creation_time": "2003-05-22T18:17:08Z", "is_private": false, "text": "Yes, I found it already, and there's an easy fix (commit in a few minutes)."}, {"count": 8, "tags": [], "bug_id": 19803, "text": "Works great now using either start/stop or just reload.  Thanks Remy :-)\n\nJake", "id": 37652, "time": "2003-05-23T02:49:53Z", "creator": "hoju@visi.com", "creation_time": "2003-05-23T02:49:53Z", "is_private": false, "attachment_id": null}]