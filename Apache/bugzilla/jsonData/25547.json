[{"count": 0, "tags": [], "bug_id": 25547, "attachment_id": null, "is_private": false, "id": 49155, "time": "2003-12-15T21:47:41Z", "creator": "jp.pelletier@videotron.ca", "creation_time": "2003-12-15T21:47:41Z", "text": "I have a servlet which is forwarding to an Errorpage but the error page \nspecified is not displayed and a default errorpage is displayed instead. It \nworked fine with Tomcat 4.1.\n\nWhen I added traces in my errorpage.jsp, I could see it is executed, but\nit is not displayed.\n\nHere is how the servlet is forwarding to the errorpage:\ncatch (Exception e) {\n   request.setAttribute(\"javax.servlet.jsp.jspException\", e);\n   RequestDispatcher rd = context.getRequestDispatcher(\"/ErrorPage.jsp\");\n   rd.forward(request, response);\n}"}, {"count": 1, "tags": [], "bug_id": 25547, "text": "RequestDispatcher is working fine for me.\n\nYou should have a return statement just after the call to \"forward\" to stop the\nexecution of your service method. Something else might be blowing up before your\nerror page gets displayed.", "id": 49166, "time": "2003-12-16T00:11:52Z", "creator": "bsouther@fwdco.com", "creation_time": "2003-12-16T00:11:52Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 25547, "text": "1) Traces are showing that my error page is executed but not displayed. So the \nforward is not the only culprit. This forward is different in that the target \npage has <%@ page isErrorPage=\"true\" %> which is not usually the case.\n\n2) Why is tomcat's default error page displayed with the exception caught by my \nservlet ? (It act as if my error page was forwarding to the default which it \ndoesn't do)\n\n3) Why is it working in Tomcat 4.1 ?", "id": 49204, "time": "2003-12-16T20:04:44Z", "creator": "jp.pelletier@videotron.ca", "creation_time": "2003-12-16T20:04:44Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 25547, "text": "Can you add a test case to reproduce the problem? If I can reproduce the problem\nwith you example, then it with be easy to fix.\n\nMerci ;-)\n\n-- Jeanfrancois", "id": 49207, "time": "2003-12-16T20:10:57Z", "creator": "jfarcand@apache.org", "creation_time": "2003-12-16T20:10:57Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 25547, "is_private": false, "text": "Created attachment 9604\nTest Case    (war file)", "id": 49213, "time": "2003-12-16T22:47:53Z", "creator": "bsouther@fwdco.com", "creation_time": "2003-12-16T22:47:53Z", "attachment_id": 9604}, {"count": 5, "tags": [], "bug_id": 25547, "text": "Jean-Pierre,\nIt looks like I owe you an apology.\n\nIt appears that the presence of an attribute named\n\"javax.servlet.jsp.jspException\", bound to the request object, results in the\ninvocation of the error page machinery, even if the exception has been caught.\n\nHere's a small test case.\n\nTo Run:\nDeploy it, go to http://localhost:8080/error_page_test and click on the\n\"ErrorPage\" link to throw a divide by 0 exception.\n", "id": 49214, "time": "2003-12-16T22:48:23Z", "creator": "bsouther@fwdco.com", "creation_time": "2003-12-16T22:48:23Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 25547, "text": "This is invalid: you set a standard attribute, which will cause the error\nprocessing to think Jasper did it. As a result, the response will be reset once\nagain, and the standard report for the exception you set in the attribute will\nbe displayed.", "id": 49223, "time": "2003-12-17T07:23:56Z", "creator": "remm@apache.org", "creation_time": "2003-12-17T07:23:56Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "text": "The servlet code was taken from Phil Hanna's book JSP 2.0, The Complete \nReference. (ControllerServlet Page 675)\n\nI think that the advantage was to allow servlets to use the errorpage of jsp.\n\nIf that's an invalid use of error page, what would be a valid way to display \nerrors caught by servlets?\n\nThanks\n", "is_private": false, "id": 49250, "creator": "jp.pelletier@videotron.ca", "time": "2003-12-17T14:30:21Z", "bug_id": 25547, "creation_time": "2003-12-17T14:30:21Z", "attachment_id": null}, {"count": 8, "attachment_id": null, "bug_id": 25547, "text": "Have you tried creating your own, error page entry in your apps web.xml file?\n\n    <error-page>\n        <error-code>500</error-code>\n        <location>/server_error.html</location>\n    </error-page>\n    <error-page>\n        <error-code>404</error-code>\n        <location>/file_not_found.html</location>\n    </error-page>", "id": 49251, "time": "2003-12-17T14:38:31Z", "creator": "bsouther@fwdco.com", "creation_time": "2003-12-17T14:38:31Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "text": "I removed the forward to the error page and added this to the web.xml\n   <error-page>\n      <exception-type>java.lang.Throwable</exception-type>\n      <location>/ErrorPage.jsp</location>\n   </error-page>\n   <error-page>\n      <error-code>500</error-code>\n      <location>/ErrorPage.jsp</location>\n    </error-page>\n\nIt still display the default error page (It does use the file specified when it \nis a .html)\n\nHere is a reference where they talk about forwarding to an error page\nhttp://www.jguru.com/faq/view.jsp?EID=1347\nhttp://www.jguru.com/faq/printableview.jsp?EID=1347\n\nYou might have to consider supporting forwarding to an error page\n1) for backward compatibility because it was a recommended method of doing \nthings in some books for example\n\n2) There seems to be no ways for a servlet to have the servlet container \nproperly invoke an .jsp error page on its behalf.\n\nThanks", "is_private": false, "id": 49267, "creator": "jp.pelletier@videotron.ca", "time": "2003-12-17T19:31:00Z", "bug_id": 25547, "creation_time": "2003-12-17T19:31:00Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 25547, "is_private": false, "text": "I think you are mistaken about this issue. Please do not reopen the report, and\nuse tomcat-user to debug your setup instead, as this looks like configuration\nissues.", "id": 49278, "time": "2003-12-17T21:44:40Z", "creator": "remm@apache.org", "creation_time": "2003-12-17T21:44:40Z", "attachment_id": null}]