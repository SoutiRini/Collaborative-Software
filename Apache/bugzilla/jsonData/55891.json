[{"count": 0, "tags": [], "bug_id": 55891, "attachment_id": null, "id": 171773, "time": "2013-12-16T18:39:12Z", "creator": "werdex86@gmail.com", "creation_time": "2013-12-16T18:39:12Z", "is_private": false, "text": "Its seems there is an issue with EL parser in tomcat 7.0.47.\nIt was traced down by\nhttps://java.net/jira/browse/JAVASERVERFACES-3096\n\nI have attached maven project which works fine on tomcat8-RC5, but fails on tomcat 7.0.47."}, {"count": 1, "tags": [], "bug_id": 55891, "attachment_id": 31118, "text": "Created attachment 31118\nMaven project", "id": 171774, "time": "2013-12-16T18:39:35Z", "creator": "werdex86@gmail.com", "creation_time": "2013-12-16T18:39:35Z", "is_private": false}, {"count": 2, "tags": [], "creator": "markt@apache.org", "text": "Any further pointers you can provide as to what Tomcat is doing wrong? I've traced through the calls into the EL in Tomcat 7 and Tomcat 8 and the call patterns are very different (there are more calls in 8 than 7).\n\nThere are multiple evaluations of #{b.checked} (which itself looks wrong) in both 7 and 8. In Tomcat 8, it doesn't return a non-null value until the 3rd call. In Tomcat 7 that third call is never made.\n\nI'm currently comparing the Tomcat 7 and 8 calls but any pointers would be a help here.", "id": 171786, "time": "2013-12-17T12:23:47Z", "bug_id": 55891, "creation_time": "2013-12-17T12:23:47Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 55891, "attachment_id": null, "text": "I've tracked this down. There is no Tomcat bug here. You have been bitten by a difference between EL 2.2 and EL 3.0 (which is why it worked in Tomcat 7 when you used the EL 3.0 implementation from Glassfish 4).\n\nIn EL 2.2 attempting to coerce a null to a Boolean results in Boolean.FALSE.\nIn EL 3.0 attempting to coerce a null to a Boolean results in null.\n\nIn Tomcat 7 the attempts to resolve #{b.checked} returns null which is coerced to Boolean.FALSE which appears to prevent the 3rd resolution attempt (the one that works in Tomcat 8).\n\nThe multiple resolution attempts still look odd but regardless of whether JSF is doing the right thing there, Tomcat's EL implementation in Tomcat 7 is behaving as per the EL 2.2 spec and in Tomcat 8 it is behaving as per the 3.0 spec. See section A.4 of the EL 3.0 spec for the details of this change.", "id": 171787, "time": "2013-12-17T12:39:50Z", "creator": "markt@apache.org", "creation_time": "2013-12-17T12:39:50Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 55891, "attachment_id": null, "id": 171788, "time": "2013-12-17T13:38:05Z", "creator": "werdex86@gmail.com", "creation_time": "2013-12-17T13:38:05Z", "is_private": false, "text": "Hi Mark,\nThanks for the explanation. Is it safe to use the latest el jar from tomcat 8 in tomcat 7 to solve this issue with JSF 2.2?"}]