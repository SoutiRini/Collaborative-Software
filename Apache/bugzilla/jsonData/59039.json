[{"attachment_id": 33579, "tags": [], "bug_id": 59039, "is_private": false, "count": 0, "id": 188646, "time": "2016-02-21T19:29:09Z", "creator": "bugs@butterflystitches.com.au", "creation_time": "2016-02-21T19:29:09Z", "text": "Created attachment 33579\nMy Virtual host test configuration.\n\nI am using the latest code checked out by svn on 22-feb-2016 \n\n# apachectl -V\nServer version: Apache/2.5.0-dev (Unix)\nServer built:   Feb 22 2016 05:32:38\nServer's Module Magic Number: 20150222:12\nServer loaded:  APR 2.0.0-dev, PCRE 8.35 2014-04-04\nCompiled using: APR 2.0.0-dev, PCRE 8.35 2014-04-04\nArchitecture:   64-bit\nServer MPM:     event\n  threaded:     yes (fixed thread count)\n    forked:     yes (variable process count)\nServer compiled with....\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=256\n -D HTTPD_ROOT=\"/usr/local/apache2\"\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"apache_runtime_status\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\nWhen I try to access via the URL \"http://joe.test/phpinfo.php\" the browser login shows the name \"joe.test\" as expected.  \n\nBut I always get the error:\n[auth_digest:error] [pid 23131:tid 140076818339584] [client 10.8.0.216:58058] AH01788: realm mismatch - got `joe.test' but expected `%{HTTP_HOST}'\n\nBut if I manually set \nAuthName \"joe.test\"\nEverything works fine.\n\nWhat I think is happening is that the \"AuthName\" is getting translated for the dialog, but this translation is not being used for the error checking for the reply from the login dialog.\n\nIt doesn't appear to be anything with the database as it errors before doing the database query.  And the manually set AuthName does work."}, {"count": 1, "tags": [], "text": "untested, but this tries to turn off the \"caching\" of the realm in mod_auth_digest:\nhttp://people.apache.org/~covener/patches/digest.diff", "is_private": false, "bug_id": 59039, "id": 188658, "time": "2016-02-21T21:50:52Z", "creator": "covener@gmail.com", "creation_time": "2016-02-21T21:50:52Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 59039, "text": "(In reply to Eric Covener from comment #1)\n> untested, but this tries to turn off the \"caching\" of the realm in\n> mod_auth_digest:\n> http://people.apache.org/~covener/patches/digest.diff\n\nThis patch worked.  I can now authenticate with no problems.", "id": 188675, "time": "2016-02-22T15:13:28Z", "creator": "bugs@butterflystitches.com.au", "creation_time": "2016-02-22T15:13:28Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 59039, "text": "Thanks for reporting and testing", "id": 188678, "time": "2016-02-22T15:33:01Z", "creator": "covener@gmail.com", "creation_time": "2016-02-22T15:33:01Z", "tags": [], "is_private": false}]