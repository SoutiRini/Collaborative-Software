[{"count": 0, "tags": [], "creator": "ashish.soni@siemens.com", "attachment_id": null, "text": "Hi,\n\nI have a problem with xercesImpl.jar and xml-apis.jar api jars. \nI have custom ANT Task that is using above mentioned api jars, when i giving it on classpath of task \"JDOM\" its not picked by the Apache ANT 1.8.2.\n\n<taskdef name=\"JDOM\" classname=\"TestJDOM\">\n <classpath>\n  <pathelement location=\"${basedir}\"/>\n  <pathelement location=\"D:/apache-ant-1.8.1/sample/lib/jdom/build/jdom.jar\"/>\n  <pathelement\nlocation=\"D:/apache-ant-1.8.1/sample/lib/xerces/xercesImpl.jar\"/>\n  <pathelement location=\"D:/apache-ant-1.8.1/sample/lib/xerces/xml-apis.jar\"/>\n </classpath>\n</taskdef>\n\nWhy the above step is not working\n\nbut it will work if i will give this lib jars in ant command prompt like:\nant -lib D:/apache-ant-1.8.1/sample/lib/xerces/xercesImpl.jar -lib D:/apache-ant-1.8.1/sample/lib/xerces/xml-apis.jar -f <buildFileName> <targetName>\n\nand remove the jars from classpath of taskdef.\n\nEven i varified that both jars a available in classpath.\n\nThanks in advance\nAshish Soni", "id": 143745, "time": "2011-01-28T02:35:44Z", "bug_id": 50678, "creation_time": "2011-01-28T02:35:44Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "count": 1, "id": 143800, "time": "2011-01-30T02:07:56Z", "bug_id": 50678, "creation_time": "2011-01-30T02:07:56Z", "text": "*** Bug 50658 has been marked as a duplicate of this bug. ***"}, {"count": 2, "tags": [], "bug_id": 50678, "attachment_id": null, "text": "relevant information from bug 50652\n\n[JDOM] START\n     [JDOM] Could not load org.apache.xerces.parsers.SAXParser: SAX2 driver\nclass org.apache.xerces.parsers.SAXParser not foun", "id": 143801, "time": "2011-01-30T02:10:12Z", "creator": "bodewig@apache.org", "creation_time": "2011-01-30T02:10:12Z", "is_private": false}, {"count": 3, "tags": [], "text": "The JDOM task is not developed by the Ant developers so we can only guess.\n\nYou used to get Xerces as your default SAX parser factory while you now have\nthe JDK's parser factory as a default.  If your task (I assume you've\nwritten it yourself) really only works when Xerces is used you have to make\nsure it either explicitly asks for it or Xerces will be used by the JDK.  The\nformer can be done by using SAXParserFactory#newInstance with two\nargiments and the later by using the endorsed standards override\nmechanism of the JDK.\n\nThis really is more a user mailing list question rather than a blocking\nAnt bug, BTW.", "is_private": false, "id": 143802, "creator": "bodewig@apache.org", "time": "2011-01-30T02:17:22Z", "bug_id": 50678, "creation_time": "2011-01-30T02:17:22Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 50678, "text": "Ant's classloaders used by <taskdef/> are not able to add to the startup classpath of Ant or of the JVM, and this limitation is a problem in the case of some JVM factories which do not see children classloaders.\n\nYou can use the classloader task documented at http://enitsys.sourceforge.net/ant-classloadertask/usage.html to add jars (for instance xercesImpl and xml-apis) to the appropriate classloader.\n\nI am maintaining a build file where we need to put a number of jars on a classloader above the taskdefs classloader. Here is how I do it with the enitsys classloader task :\n\n    <classloadertask classpathRef=\"all.https.cp\" loader=\"thread\"/>\n\n\nI use this task also to put mail.jar/activation.jar on the classpath when I need to send email from a build file using the functionality supplied by these.\n\nI am tempted to close your bug report as WONTFIX but it is one more indication that there are lots of usages in the field for this <classloadertask/> so we should integrate it in Ant if it is technically and procedurally acceptable for the project.", "id": 143836, "time": "2011-01-31T16:28:04Z", "creator": "antoine@apache.org", "creation_time": "2011-01-31T16:28:04Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "antoine@apache.org", "is_private": false, "count": 5, "id": 165914, "time": "2013-03-17T23:24:46Z", "bug_id": 50678, "creation_time": "2013-03-17T23:24:46Z", "text": "As you found out yourself, you can put the versions of xercesImpl and xml-apis that you need on the classpath yourself.\n\nThere is a need to offer functionality in Ant to add jars to the coreloader at runtime. I am personally using the classloader task from enitsys in some build files at work, for instance I use that to add mail.jar and activation.jar to the classpath of Ant when I want to use the mail task, since I do not want to add mail.jar and activation.jar under $ANT_HOME/lib.\n\nThere is an undocumented classloader task inside Ant since 2002, I wonder how easily it can be used in this kind of use case.\n\nI will discuss these issues further on the dev mailing list."}]