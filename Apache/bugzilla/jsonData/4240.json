[{"count": 0, "attachment_id": null, "creator": "rodica_balasa@yahoo.com", "is_private": false, "id": 6802, "time": "2001-10-17T11:45:29Z", "bug_id": 4240, "creation_time": "2001-10-17T11:45:29Z", "tags": [], "text": "I used ant to create a war file for a web application.\nThe web application needs multiple jars to be placed in the WEB-INF/lib\ndirectory\n\nThe jars have the path contrib/100world/lib/v*/name/lib/*.jar\n \ni tried \n    <lib dir =\"${contrib.dir}\">\n        <include name=\"**/crimson.jar\"/>\n        <include name=\"**/xalan.jar\"/>\n        <include name=\"**/jaxp.jar\"/>\n    </lib>\nbut the files are copied with full path, and i get the structure:\nWEB-INF/lib/100world/lib/name/v*/lib/*.jar, which is not valid for a\nwebapplication\n\ni tried using mapping type=flatten but the war and lib tags do not support it\n\nfinally i resolved the problem writing by hand:\n    <lib dir =\"${contrib.dir}/100world/lib/java-jaxp/v1.1/lib\">\n\t\t  <include name=\"**/crimson.jar\"/>\n    </lib>\n\n\t     <lib dir =\"${contrib.dir}/100world/lib/java-jaxp/v1.1/lib\">\n\t\t  <include name=\"**/xalan.jar\"/>\n            </lib>\n\t    \n\t    <lib dir =\"${contrib.dir}/100world/lib/java-jaxp/v1.1/lib\">\n\t\t  <include name=\"**/jaxp.jar\"/>\n            </lib>\n\n... (there are at least 10 jars to be added)\n\nThe ant build works, but i hope that a solution will be found (the lib tag to\ncopy without directory structure or to support mapping or to have an attribute\nto specifiy not to recreate the directory structure)"}, {"count": 1, "tags": [], "creator": "steve_l@iseran.com", "attachment_id": null, "text": "you can do this in two steps\n\n1. <copy> the lib files with a flatten\n2. include the copied files into the <war>\n\nI am not convinced the lib tag should include flatten, when not when the \nprocess can be accomplished so easily, so will file this as a wontfix. Feel \nfree to re-open the case if you have a fundamental issue with my solution.", "id": 9772, "time": "2002-01-21T23:55:06Z", "bug_id": 4240, "creation_time": "2002-01-21T23:55:06Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 4240, "is_private": false, "id": 45715, "creation_time": "2003-10-15T08:46:31Z", "time": "2003-10-15T08:46:31Z", "creator": "tquas@yahoo.com", "text": "I ran into the exact same problem. Here's my points why this should be implemented:\n\n* copying JAR files is a possible work-around but introduces potential problems\n(completeness, disk space, waste of build time) that would be easily eliminated\nby introducing the <mapper> tag\n\n* transparency; AFAIK <lib> extends <fileset> functionality and should therefore\nsupport the <mapper> for the sake of transparency\n\n* it's intuitive ;-)\n\n\n-tom", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 4240, "text": "FYI <mapper> support is not done by <fileset>. It\u00b4s done by the tasks (e.g. \n<copy>).", "id": 45716, "time": "2003-10-15T08:49:51Z", "creator": "jan@materne.de", "creation_time": "2003-10-15T08:49:51Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "bug_id": 4240, "is_private": false, "id": 70525, "time": "2005-02-04T22:48:57Z", "creator": "stevel@apache.org", "creation_time": "2005-02-04T22:48:57Z", "tags": [], "text": "I'm thinking, what is the best way we can go around adding this. Really we ought\nto support mappers or at least flatten for any <lib> declarations. \n\nWe could do this by allowing <zipfileset> to support a nested mapper, or at\nleast a flatten flag. Mapper would be more flexible; the result of the map would\nhave any prefix prepended. \n\n\nTo use it in <lib> you'd have to either set the flatten flag, or declare a\nnested mapper; we could leave the default unchanged.\n\n"}, {"count": 5, "tags": [], "bug_id": 4240, "is_private": false, "text": "Attaching a mapper to a zipfileset makes no less sense than attaching the prefix\nand fullpath attributes.  I say this because they are not handled transparently\nor internally, they are merely attached for an interested client to use or\nignore.  If we add a mapper to zipfileset, we could convert prefix and fullpath\nto mappers internally: mapper + prefix = chainedmapper (oldmapper + globmapper);\nmapper + fullpath = mergemapper + log message, or just disallow mappers with\nfullpath, whichever.  Then the only handling a task would have to do would be\nmapping and getPrefix and getFullpath would only maintain BC.", "id": 70528, "time": "2005-02-04T23:57:02Z", "creator": "mbenson@apache.org", "creation_time": "2005-02-04T23:57:02Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "manjunath.s@sakhatech.com", "attachment_id": null, "text": "testing for later", "id": 101844, "time": "2007-04-18T02:22:29Z", "bug_id": 4240, "creation_time": "2007-04-18T02:22:29Z", "is_private": false}, {"count": 7, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "is_private": false, "id": 101862, "time": "2007-04-18T04:26:41Z", "bug_id": 4240, "creation_time": "2007-04-18T04:26:41Z", "text": "Please do not test with current issues"}, {"text": "*** Bug 28299 has been marked as a duplicate of this bug. ***", "tags": [], "bug_id": 4240, "is_private": false, "count": 8, "id": 122469, "time": "2008-11-14T06:08:04Z", "creator": "bodewig@apache.org", "creation_time": "2008-11-14T06:08:04Z", "attachment_id": null}, {"count": 9, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "*** Bug 43067 has been marked as a duplicate of this bug. ***", "id": 122475, "time": "2008-11-14T06:38:52Z", "bug_id": 4240, "creation_time": "2008-11-14T06:38:52Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 4240, "text": "with Ant's trunk in svn revision 718263 the original problem can be solved with\n\n<war ...>\n  <mappedresources>\n    <fileset dir =\"${contrib.dir}\">\n      <include name=\"**/crimson.jar\"/>\n      <include name=\"**/xalan.jar\"/>\n      <include name=\"**/jaxp.jar\"/>\n    </fileset>\n    <chainedmapper>\n      <flattenmapper/>\n      <globmapper from=\"*\" to=\"WEB-INF/lib\"/>\n    </chainedmapper>\n  </mappedresources>\n</war>\n\nit still needs to get documented, though.\n\n", "id": 122559, "time": "2008-11-17T07:56:38Z", "creator": "bodewig@apache.org", "creation_time": "2008-11-17T07:56:38Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 4240, "is_private": false, "text": "after some refactorings and documentation it's time to close this with svn revision 718633", "id": 122597, "time": "2008-11-18T07:25:18Z", "creator": "bodewig@apache.org", "creation_time": "2008-11-18T07:25:18Z", "attachment_id": null}, {"count": 12, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "*** Bug 31947 has been marked as a duplicate of this bug. ***", "id": 122626, "time": "2008-11-19T03:13:14Z", "bug_id": 4240, "creation_time": "2008-11-19T03:13:14Z", "is_private": false}]