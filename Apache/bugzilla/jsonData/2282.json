[{"count": 0, "tags": [], "text": "The following error logs indicates the error. The following code works well \nusing jswdk 1.0 but an internal error occurs using both tomcat 3.2.1 final and \n3.2.2 final and Resin 1.3b.\n\nThe following source code functions and compiles perfectly well under jswdk 1.0\n\n************************\nThe tomcat 3.2.1 output:\n************************\n\nError: 500\nLocalizacion: /examples/jsp/dabacus/C_DeliveryToSpainFicha.jsp\nError interno del servlet:\n\norg.apache.jasper.JasperException: No se puede compilar la clase para JSPerror: \nAn exception has occurred in the compiler; please file a bug report \n(http://java.sun.com/cgi-bin/bugreport.cgi).\n1 error\n\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:254)\n\tat org.apache.jasper.servlet.JspServlet.doLoadJSP(JspServlet.java:462)\n\tat org.apache.jasper.servlet.JasperLoader12.loadJSP\n(JasperLoader12.java:146)\n\tat org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:433)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary\n(JspServlet.java:152)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:164)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:318)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:391)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.tomcat.core.ServletWrapper.doService\n(ServletWrapper.java:404)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:286)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.internalService\n(ContextManager.java:797)\n\tat org.apache.tomcat.core.ContextManager.service\n(ContextManager.java:743)\n\tat \norg.apache.tomcat.service.http.HttpConnectionHandler.processConnection\n(HttpConnectionHandler.java:210)\n\tat org.apache.tomcat.service.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:416)\n\tat org.apache.tomcat.util.ThreadPool$ControlRunnable.run\n(ThreadPool.java:498)\n\tat java.lang.Thread.run(Thread.java:484)\n\n***********************\nThe tomcat 3.2.2 output:\n***********************\n\nError interno del servlet:\n\norg.apache.jasper.JasperException: No se puede compilar la clase para \nJSPC:\\jakarta-tomcat-3.2.2\\work\\localhost_8080%2Fexamples\\\n_0002fjsp_0002fbai_00030_00030_00030_00031_0002fC_0005fDeliveryToSpain_0002ejsp\nC_0005fDeliveryToSpain_jsp_0.java:0:\n The method void updateCampos(java.util.Hashtable, java.lang.String, \n java.lang.String, java.lang.String, boolean, dabacus.M_TablaBase, int, boolean)\n declared in class dabacus.C_DeliveryToSpain cannot override the method of the\n same signature declared in class dabacus.M_Mantenimiento.  \n They must have the same return type.\t\n \npackage jsp.bai_00030_00030_00030_00031;\n^\n1 error\n\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:282)\n\tat org.apache.jasper.servlet.JspServlet.doLoadJSP(JspServlet.java:612)\n\tat org.apache.jasper.servlet.JasperLoader12.loadJSP\n(JasperLoader12.java:146)\n\tat org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:542)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary\n(JspServlet.java:258)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:268)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:429)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:500)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.tomcat.core.ServletWrapper.doService\n(ServletWrapper.java:405)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:287)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.internalService\n(ContextManager.java:797)\n\tat org.apache.tomcat.core.ContextManager.service\n(ContextManager.java:743)\n\tat \norg.apache.tomcat.service.http.HttpConnectionHandler.processConnection\n(HttpConnectionHandler.java:213)\n\tat org.apache.tomcat.service.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:416)\n\tat org.apache.tomcat.util.ThreadPool$ControlRunnable.run\n(ThreadPool.java:501)\n\tat java.lang.Thread.run(Thread.java:484)\n\n**************\nMy source code:\n**************\n\n=============\nThe .java\n=============\n\npackage dabacus;\nimport java.util.Hashtable;\nimport javax.servlet.*;\nimport javax.servlet.http.*;\n/*\nSELECT CON_NUMERO, CON_FECHA_CONTRATO, GUA_NOMBRE, GUA_DOMICILIO_1, \nGUA_TELEFONO, CON_FECHA_RECEPCION_CARRETES FROM M_BOOKINGS, M_GUARDERIAS WHERE \nCON_ID_GUARDERIA = GUA_ID_GUARDERIA AND CON_ID_ANULACION = 0 AND \nCON_ID_DELIVERY > 0 AND CON_FECHA_RECEPCION_CARRETES IS NOT NULL\n*/\n\npublic class C_DeliveryToSpain extends M_Mantenimiento {\n  public String idAgencia = \"\";\n\tprivate HttpServletRequest datos=null;\n\n  public int getNumCamposTabla() {\n\tint numCampos = super.getNumCamposTabla();\n\tif (nombreTabla.equalsIgnoreCase(\"M_BOOKINGS\")) {\n\t\treturn numCampos;\n\t\t\n\t}\n\telse {\n\t\treturn (numCampos - 2);\n\t}\n  }\n\n  public String getValor(String campo) {\n\tif (campo.equalsIgnoreCase(\"CON_NUM_CARRETES\")) {\n\t\tif (nombreTabla.equalsIgnoreCase(\"M_BOOKINGS\")) {\n\t\t\treturn (super.getValor(\"CON_NUM_CARRETES\"));\n\t\t}\n\t\telse {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\telse if (campo.equalsIgnoreCase(\"FOT_NOMBRE\")) {\n\t\tif (nombreTabla.equalsIgnoreCase(\"M_BOOKINGS\")) {\n\t\t\treturn (super.getValor(\"FOT_NOMBRE\"));\n\t\t}\n\t\telse {\n\t\t\treturn \"\";\n\t\t}\n\t}\n\treturn super.getValor(campo);\n  }\n\n  public boolean leerRegistro(String nomTaula, String nombreCampoId, String id) \n{\n\tsetSQLBase(nomTaula);\n\tString strSql = strSQLBase;\n\tif (nomTaula.equalsIgnoreCase(\"M_BOOKINGS\")) {\n\t\tstrSql = strSQLBase + \" AND CON_ID_CONTRATO = \" + id;\n\t}\n\telse {\n\t\tstrSql = strSQLBase + \" AND PED_ID_PEDIDO = \" + id;\n\t}\n\tif (consulta(nomTaula, strSql) && next()) {\n\t\treturn true;\n\t}\n\treturn false;\n  }\n  public String crearDelivery(HttpServletRequest request, boolean isUS) {\n\tString idDelivery = \"0\";\n\tString fecha = request.getParameter(\"DEL_FECHA\");\n\tif (fecha == null)\t{\n\t\tfecha = \"\";\n\t}else {\n\t\tfecha=this.formatearFechaParaSQL(fecha,isUS);\n\t}\n\tString albaran = request.getParameter(\"DEL_ALBARAN\");\n\tif (albaran == null)\talbaran = \"\";\n\tString idTransportista = request.getParameter(\"DEL_ID_TRANSPORTISTA\");\n\tif (idTransportista == null)\tidTransportista = \"0\";\n\n\tString strSql = \"INSERT INTO M_DELIVERY (\";\n\tstrSql = strSql + \"DEL_FECHA, DEL_ALBARAN, DEL_ID_TRANSPORTISTA\";\n\tstrSql = strSql + \") VALUES ('\";\n\tstrSql = strSql + fecha + \"', '\" + albaran + \"', \" + idTransportista;\n\tstrSql = strSql + \")\";\n\tif (!execute(\"dabacus\", \"M_DELIVERY\", strSql)) {\n\t\tSystem.out.println(\"Error execute \" + strSql);\n\t\treturn \"0\";\n\t}\n\tidDelivery = ultimoId(\"M_DELIVERY\", \"DEL_ID_DELIVERY\");\n\treturn idDelivery;\n\t\n  }\n\n  public String ultimoId(String tabla, String campoId) {\n\tString id = \"1\";\n\tString strSQL = \"SELECT MAX(\" + campoId + \") AS MAXID FROM \" + tabla;\n\tM_TablaBase tablaO = new M_TablaBase();\n\tif (tablaO.consulta(\"dabacus\", tabla, strSQL) && tablaO.next()) {\n\t\tid = tablaO.getValor(\"MAXID\");\n\t}\n\telse {\n\t\tSystem.out.println(\"Consulta de \" + tabla + \" (MAX) no tuvo \nexito\");\n\t}\n\ttablaO.cerrar();\n\ttablaO.cerrarConnection();\n\treturn id;\n  }\n\n\n  public boolean actualizarRegistro(String nomTaula, String nombreCampoId, \nString id, String idDelivery, String idTransportista) {\n\tString strSql = \"UPDATE \" + nomTaula;\n\tif (nomTaula.equalsIgnoreCase(\"M_BOOKINGS\")) {\n\t\tstrSql = strSql + \" SET CON_ID_DELIVERY = \" + idDelivery + \", \nCON_ID_TRANSPORTISTA = \" + idTransportista;\n\t}\n\telse {\n\t\tstrSql = strSql + \" SET PED_ID_DELIVERY = \" + idDelivery + \", \nPED_ID_TRANSPORTISTA = \" + idTransportista;\n\t}\n\tstrSql = strSql + \" WHERE \" + nombreCampoId + \" = \" + id;\n\tcerrar();\n\tif (execute(\"dabacus\", nomTaula, strSql)) {\n\t\treturn true;\n\t}\n\tSystem.out.println(\"Error execute \" + strSql);\n\treturn false;\n  }\n  public boolean updateCampos(Hashtable campos, String tablaModificar, String \ncampoID, String strId, boolean esAuxiliar, M_TablaBase modif, int numCampo, \nboolean isUS) {\n    return super.updateCampos(campos, tablaModificar, campoID, strId, \nesAuxiliar, modif, numCampo, isUS);\n  }\n\n  public String strSQLBase = \"SELECT * FROM M_BOOKINGS WHERE CON_ID_ANULACION \nis NULL AND (CON_ID_DELIVERY = 0 or CON_ID_DELIVERY IS NULL) AND \nCON_FECHA_RECEPCION_CARRETES IS NOT NULL\";\n  public String strSQL=\"\";\n  public void setSQLBase(String taula) {\n\tString where = \"\";\n\tif (taula.equalsIgnoreCase(\"M_BOOKINGS\")) {\n\t\twhere = where + \" WHERE CON_ID_GUARDERIA = GUA_ID_GUARDERIA \";\n\t\twhere = where + \" AND CON_ID_FOTOGRAFO = FOT_ID_AGENTE \";\n\t\twhere = where + \" AND CON_ID_ANULACION is NULL AND \n(CON_ID_DELIVERY = 0 OR CON_ID_DELIVERY IS NULL) AND \nCON_FECHA_RECEPCION_CARRETES IS NOT NULL\";\n\t}\n\telse {\n\t\twhere = where + \" WHERE PED_ID_CLIENTE = CL_ID_CLIENTE AND \nPED_ID_ANULACION is NULL AND (PED_ID_DELIVERY = 0 or PED_ID_DELIVERY IS NULL) \";\n\t}\n\tsetSQLBase(taula, where);\n  }\n  public void setSQLBase(String taula, String where) {\n\tnombreTabla = taula;\n\tif (taula.equalsIgnoreCase(\"M_BOOKINGS\")) {\n\t\tstrSQLBase = \"SELECT \";\n\t\tstrSQLBase = strSQLBase + \"CON_ID_CONTRATO, \";\n\t\tstrSQLBase = strSQLBase + \"CON_NUMERO, \";\n\t\tstrSQLBase = strSQLBase + \"CON_FECHA_CONTRATO, \";\n\t\tstrSQLBase = strSQLBase + \"GUA_NOMBRE, \";\n\t\tstrSQLBase = strSQLBase + \"GUA_DOMICILIO_1, \";\n\t\tstrSQLBase = strSQLBase + \"GUA_TELEFONO, \";\n\t\tstrSQLBase = strSQLBase + \"GUA_TELEFONO, \";\n\t\tstrSQLBase = strSQLBase + \"CON_NUM_CARRETES, \";\n\t\tstrSQLBase = strSQLBase + \"CON_FECHA_RECEPCION_CARRETES, \";\n\t\tstrSQLBase = strSQLBase + \"FOT_NOMBRE \";\n\t\tstrSQLBase = strSQLBase + \" FROM M_BOOKINGS, M_GUARDERIAS, \nM_FOTOGRAFOS \";\n\t}\n\telse {\n\t\tstrSQLBase = \"SELECT \";\n\t\tstrSQLBase = strSQLBase + \"PED_ID_PEDIDO AS \n[CON_ID_CONTRATO], \";\n\t\tstrSQLBase = strSQLBase + \"PED_NUMERO AS [CON_NUMERO], \";\n\t\tstrSQLBase = strSQLBase + \"PED_FECHA AS [CON_FECHA_CONTRATO], \";\n\t\tstrSQLBase = strSQLBase + \"CL_NOMBRE AS [GUA_NOMBRE], \";\n\t\tstrSQLBase = strSQLBase + \"CL_DOMICILIO_1 AS \n[GUA_DOMICILIO_1], \";\n\t\tstrSQLBase = strSQLBase + \"CL_TELEFONO AS [GUA_TELEFONO], \";\n\t\tstrSQLBase = strSQLBase + \"PED_FECHA_RECEPCION_AGENCIA AS \n[CON_FECHA_RECEPCION_CARRETES] \";\n\t\tstrSQLBase = strSQLBase + \" FROM M_PEDIDOS_PARTICULARES, \nM_CLIENTES \";\n\t}\n\tstrSQLBase = strSQLBase + where;\n  }\n\n  public String nombreCampoId = \"CON_ID_CONTRATO\";\n\n  public String nombresCampoFicha[] = {\n\t\"CON_FECHA_RECEPCION_CARRETES\"\n  };\n\n  public String titulosCampoFicha[] = {\n\t\"Films received on:\"\n  };\n\n  public int tipoInput[] =\n        {\n        M_TablaBase.IT_DATE\n        };\n\n  public String nombresCampoTabla[] = {\n\t\t\"CON_NUMERO\",\n\t\t\"CON_FECHA_CONTRATO\",\n\t\t\"GUA_NOMBRE\",\n\t\t\"GUA_DOMICILIO_1\",\n\t\t\"GUA_TELEFONO\",\n\t\t\"CON_FECHA_RECEPCION_CARRETES\",\n\t        \"CON_NUM_CARRETES\",\n\t        \"FOT_NOMBRE\" //Saimon: antes \"FOT_NOMBRE\"\n  };\n\n  public String titulosCampoTabla[] = {\n\t\t\"Number\",\n\t\t\"Date\",\n\t\t\"Nursery\",\n\t\t\"Address\",\n\t\t\"Telephone\",\n\t\t\"Films received on:\",\n                \"# Films\",\n                \"Photographer\"\n  };\n\n  public int tipoCampo[] = {\n\tM_TablaBase.TIPO_INPUT,\n        M_TablaBase.TIPO_INPUT,\n        M_TablaBase.TIPO_INPUT,\n        M_TablaBase.TIPO_INPUT,\n        M_TablaBase.TIPO_INPUT,\n        M_TablaBase.TIPO_INPUT,\n        M_TablaBase.TIPO_INPUT,\n        M_TablaBase.TIPO_SELECT\n\n  };\n\n  public int campsInput[] = {\n\t10,\n        12,\n        40,\n        60,\n        15,\n        12,\n        10,\n        10\n  };\n\n  public String nombresTablasSelect[] = {\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t        \"M_FOTOGRAFOS\"\n  };\n  public String nombresCamposIdSelect[] = {\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t        \"FOT_ID_AGENTE\"\n\n  };\n  public String nombresCamposTituloSelect[] = {\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t\t\"\",\n\t        \"FOT_NOMBRE\"\n  };\n\n  public String nombresTablasSelectFicha[] = {\n\t\"\"\n  };\n  public String nombresCamposIdSelectFicha[] = {\n\t\"\"\n  };\n  public String nombresCamposTituloSelectFicha[] = {\n\t\"\"\n  };\n\n\n  public boolean abrir() {\n\tif (idAgencia != null && idAgencia.length() > 0) {\n\t\tstrSQL = strSQLBase + \" AND CON_ID_AGENCIA = \" + idAgencia;\n\t}\n\telse {\n\t\tstrSQL = strSQLBase;\n\t}\n        System.out.println(\"abrir():\" + strSQL);\n\treturn consulta(\"dabacus\", nombreTabla, strSQL);\n  }\n\n  public boolean abrirConId(String idAge) {\n\tidAgencia = idAge;\n\treturn abrir();\n  }\n\n  public C_DeliveryToSpain(M_Login login) {\n\tthis();\n\tsetLogin(login);\n  }\n\n\n  public C_DeliveryToSpain() {\n\tsuper();\n\tponerArrays(nombresCampoFicha, titulosCampoFicha,\n\t\t\tnombresCampoTabla, titulosCampoTabla,\n\t\t\tcampsInput, tipoCampo, tipoInput,\n\t\t\tnombresTablasSelect, \nnombresCamposIdSelect,nombresCamposTituloSelect,\n\t\t\tnombresTablasSelectFicha, \nnombresCamposIdSelectFicha,nombresCamposTituloSelectFicha);\n\tsuper.setNombreCampoId(this.nombreCampoId);\n\tsetLinkDelete(false);\n\tthis.nombreTabla = super.nombreTabla = \"M_BOOKINGS\";\n\tsetSQLBase(this.nombreTabla);\n\tstrSQL = strSQLBase;\n  }\n\n  public static void main(String[] args) {\n\tjava.lang.String usr = \"mem\", pwd = \"mem\";\n\tM_Login login = new M_Login();\n\tlogin.login(usr, pwd);\n\n\t(new C_DeliveryToSpain(login)).probar(args);\n  }\n\tpublic void setRequest(HttpServletRequest req) {\n\t\t//req.c\n\t\t//this.datos=(HttpServletRequest)req.clone();\n\t}\n\tpublic HttpServletRequest getRequest () {\n\t\treturn this.datos;\n\t}\n}", "attachment_id": null, "bug_id": 2282, "id": 3190, "time": "2001-06-22T04:30:16Z", "creator": "smoore@serikat.es", "creation_time": "2001-06-22T04:30:16Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 2282, "attachment_id": 247, "is_private": false, "id": 3191, "time": "2001-06-22T04:32:42Z", "creator": "smoore@serikat.es", "creation_time": "2001-06-22T04:32:42Z", "text": "Created attachment 247\nSuper class of .java included in bug description"}, {"count": 2, "tags": [], "bug_id": 2282, "attachment_id": null, "id": 4110, "time": "2001-07-29T15:07:54Z", "creator": "nacho@apache.org", "creation_time": "2001-07-29T15:07:54Z", "is_private": false, "text": "There are not JSP source in you report can please add it to the report , \nthanks..\n\n"}, {"count": 3, "tags": [], "creator": "nacho@apache.org", "attachment_id": null, "id": 4806, "time": "2001-08-24T17:12:09Z", "bug_id": 2282, "creation_time": "2001-08-24T17:12:09Z", "is_private": false, "text": "Seems a problem in your code, need more info .. a simple test case to test this \nbehaviour in house will be good..until that we can reproduce that bug nor \nsimply understand what is going on without the offending JSP..\n\nWill mark it as invalid we can reopen it later if more info is added.\n\n"}]