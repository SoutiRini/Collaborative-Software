[{"attachment_id": null, "tags": [], "bug_id": 29309, "is_private": false, "count": 0, "id": 58419, "time": "2004-05-31T06:45:27Z", "creator": "tao_jing_rui@hotmail.com", "creation_time": "2004-05-31T06:45:27Z", "text": "hi, \n\nI read the WebdavSource class and try to write my own getMethod() method. I add \na new line to get some part of a file, not the whole file, by setRequestHeader\n(\"Range\",\"byte = XXX-XXX\"). But the new getMehtod does work correctly after I \nadd this new line. If I delete the new line, the method works ok. So I wonder \nis it a bug of client API?? \n\nmy code is here: \n\nHttpURL hrl = new HttpURL(\"http://localhost:8080/slide/files/test.text\"); \n       hrl.setUserinfo(username,password); \n       WebdavResource wdr =  new WebdavResource(hrl); \n   try{ \n       HttpClient client = wdr.getSessionInstance(hrl); \n\nGetMethod getMethod = new GetMethod(URIUtil.encodePathQuery\n(\"http://localhost:8080/slide/files/test.text\")); \n      getMethod1.setRequestHeader(\"Range\", \"bytes=\"0-1024\"); \n      int status1 = client.executeMethod(getMethod); \n      if (status1 == 206) { \n             InputStream in = getMethod1.getResponseBodyAsStream(); \n             int len = (int)(1024); \n             byte[] filePart = new byte[len]; \n             in.read(filePart); \n             in.close() ; \n      } \n\n\n       wdr.close() ; \n    } \n       catch(Exception e){ \n       wdr.close() ; \n    } \n\nThe exception is following: \n\n10:18:53,195 ERROR [Engine] StandardWrapperValve[webdav]: Servlet.service() for \nservlet webdav threw exception \njava.lang.NullPointerException \n       at java.lang.StringBuffer.replace(StringBuffer.java:717) \n       at org.apache.slide.webdav.filter.LogFilter.logLine(LogFilter.java:184) \n       at org.apache.slide.webdav.filter.LogFilter.doFilter(LogFilter.java:150) \n       at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:213) \n       at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193) \n       at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643) \n       at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480) \n       at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) \n       at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643) \n       at org.jboss.web.catalina.security.JBossSecurityMgrRealm.invoke\n(JBossSecurityMgrRealm.java:227) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641) \n       at org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:551) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641) \n       at org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641) \n       at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480) \n       at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) \n       at org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2415) \n       at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643) \n       at org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641) \n       at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641) \n       at org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:509) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641) \n       at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480) \n       at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) \n       at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174) \n       at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643) \n       at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480) \n       at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995) \n       at org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223) \n       at org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:594) \n       at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:392) \n       at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:565) \n       at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619) \n       at java.lang.Thread.run(Thread.java:534)"}]