[{"count": 0, "tags": [], "text": "Here is the how the script looks:\n\n\t<property name=\"machinename\" value=\"localhost\" />\n\t<property name=\"installdir\" value=\"C:/SoftwareAG\" />\n\t<property name=\"platform.profiles\" value=\"SPM,CTP\" />\n\t<property name=\"reusable.ant.targets\" location=\"./../reusable-ant-targets\" />\n\t<property name=\"event.type.store.location\" value=\"${installdir}/common/EventTypeStore\" />\n\t<property name=\"broker.name\" value=\"Broker #1\" />\n\t<property name=\"broker.port\" value=\"6849\" />\n\t<property name=\"broker.host\" value=\"${machinename}\" />\n\t<property name=\"use.nirvana\" value=\"false\" />\n\t<property name=\"nirvana.port\" value=\"9000\" />\n\t<property name=\"nirvana.protocol\" value=\"nsp\" />\n\t<property name=\"nirvana.host\" value=\"${machinename}\" />\n\t<property name=\"nerv.property.file.name\" value=\"com.softwareag.eda.nerv.properties\" />\n\t<property name=\"nirvana.sync.mode\" value=\"false\" />\n\t<property name=\"platform.config.file.name\" value=\"wrapper.conf\" />\n\n<target name=\"set.platform.props\">\n\t\t<for list=\"${platform.profiles}\" param=\"profile\" delimiter=\",\">\n\t\t\t<sequential>\n\t\t\t\t<echo message=\"Starting substitution of platform config properties for profile: @{profile}\" />\n\t\t\t\t<echo message=\"Setting nirvana.syncSendPersistent: ${nirvana.sync.mode}\" />\n\t\t\t\t<var name=\"platform.config.location\" value=\"${installdir}/profiles/@{profile}/configuration\" />\n\t\t\t\t<propertyfile file=\"${platform.config.location}/${platform.config.file.name}\">\n\t\t\t\t\t<entry key=\"wrapper.java.additional.77\" value=\"-Dnirvana.syncSendPersistent=${nirvana.sync.mode}\" />\n\t\t\t\t</propertyfile>\n\t\t\t</sequential>\n\t\t</for>\n\t</target>\n\nThere is only a single property that we need to add to this wrapper.conf file. It is: wrapper.java.additional.77=-Dnirvana.syncSendPersistent=false\nAfter the file is processed by the script all properties in it, are \"escaped\", i.e:\n\nOriginal value of the property: \nwrapper.java.additional.4=-XX:MaxPermSize=256M\n\nNew value of the property: \nwrapper.java.additional.4=-XX\\:MaxPermSize\\=256M\n\nThis breaks products that use the file.", "is_private": false, "id": 166487, "creator": "vasilena.treneva@softwareag.com", "time": "2013-04-09T12:30:55Z", "bug_id": 54819, "creation_time": "2013-04-09T12:30:55Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 54819, "text": "This is not a bug. This is the correct format for a properties file.\nSee http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#store(java.io.Writer, java.lang.String)\n\nAlso:\n    @Test public void property() throws Exception {\n        Properties p = new Properties();\n        p.setProperty(\"name\", \"-Dnirvana.syncSendPersistent=false -XX:MaxPermSize=256M\");\n        StringWriter sw = new StringWriter();\n        p.store(sw, \"\");\n        System.out.println(sw.toString());\n    }\n\noutputs:\n\n#\n#Tue Apr 09 14:09:54 IST 2013\nname=-Dnirvana.syncSendPersistent\\=false -XX\\:MaxPermSize\\=256M", "id": 166489, "time": "2013-04-09T13:12:04Z", "creator": "peterreilly@apache.org", "creation_time": "2013-04-09T13:12:04Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 54819, "is_private": false, "id": 166490, "time": "2013-04-09T14:46:18Z", "creator": "jglick@apache.org", "creation_time": "2013-04-09T14:46:18Z", "tags": [], "text": "Or more precisely, _a_ correct format. In this case it is not necessary to emit the backslashes. It is just simpler to escape all occurrences of certain characters, rather than determining in each case whether it might be interpreted as a metacharacter in input. Other implementations such as http://hg.netbeans.org/main-silver/raw-file/ccc42f413d4c/openide.util/src/org/openide/util/EditableProperties.java may choose to be more sparing with escape characters so as to maximize human readability, so long as Properties.load still recognizes the result. At any rate, any tool dealing with *.properties files must follow the standard syntax."}]