[{"count": 0, "tags": [], "bug_id": 35020, "attachment_id": null, "id": 75221, "creation_time": "2005-05-23T14:33:01Z", "time": "2005-05-23T14:33:01Z", "creator": "john.sjolander@gmail.com", "text": "I've ran into this interesting bug: When executing a system command through\nRuntime.getRuntime.exec(COMMAND); and using Log4j, Explorer.exe suddenly\nrequires 100% CPU for a while. \n\nI couldn't find out within the JAR what version of Log4j I'm using.\n\nPlatform: Windows XP Professional sp 2\nJava: Java version 1.4.2_06\n\n\n--------   code   --------\n// Code usage: java BugTester log|nolog\n\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\nimport org.apache.log4j.Logger;\n\npublic class BugTester {\n\n\t// exchange this for any valid command on your platform\n\tprotected static String CMD = \"net time\";\n\n\tstatic Logger log = Logger.getLogger(BugTester.class);\n\n\tpublic static void main(String[] args) {\n\t\ttry {\n\t\t\tif (args.length > 0) {\n\t\t\t\tif (\"log\".equalsIgnoreCase(args[0])) {\n\t\t\t\t\tlog.debug(\"Begin.\");\n\t\t\t\t\tProcess process = Runtime.getRuntime().exec(CMD);\n\t\t\t\t\tBufferedReader in = new BufferedReader(new\nInputStreamReader(process.getInputStream()));\n\t\t\t\t\tBufferedReader err = new BufferedReader(new\nInputStreamReader(process.getErrorStream()));\n\t\t\t\t\tprocess.waitFor();\n\t\t\t\t\t\n\t\t\t\t\t// flush the out/err\n\t\t\t\t\tString line = null;\n\t\t\t\t\twhile ((line = in.readLine()) != null) {\n\t\t\t\t\t\tlog.debug(line);\n\t\t\t\t\t}\n\t\t\t\t\twhile ((line = err.readLine()) != null) {\n\t\t\t\t\t\tlog.error(line);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlog.debug(\"The end.\");\n\t\t\t\t\tSystem.exit(0);\n\t\t\t\t\t\n\t\t\t\t} else if (\"nolog\".equalsIgnoreCase(args[0])) {\n\t\t\t\t\t\n\t\t\t\t\tSystem.out.println(\"Begin.\");\n\t\t\t\t\tProcess process = Runtime.getRuntime().exec(CMD);\n\t\t\t\t\tBufferedReader in = new BufferedReader(new\nInputStreamReader(process.getInputStream()));\n\t\t\t\t\tBufferedReader err = new BufferedReader(new\nInputStreamReader(process.getErrorStream()));\n\t\t\t\t\tprocess.waitFor();\n\t\t\t\t\t\n\t\t\t\t\t// flush the out/err\n\t\t\t\t\tString line = null;\n\t\t\t\t\twhile ((line = in.readLine()) != null) {\n\t\t\t\t\t\tSystem.out.println(line);\n\t\t\t\t\t}\n\t\t\t\t\twhile ((line = err.readLine()) != null) {\n\t\t\t\t\t\tSystem.err.println(line);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tSystem.out.println(\"The end.\");\n\t\t\t\t\tSystem.exit(0);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t} catch (Exception e) {\n\t\t\tlog.error(\"Crash.\");\n\t\t}\n\t\tSystem.out.println(\"Usage: BugTester log|nolog\");\n\t}\n}\n\n\n-------- end code --------", "is_private": false}, {"count": 1, "tags": [], "bug_id": 35020, "attachment_id": null, "text": "I've tested your class and don't see this behaviour.\n( Win2K, Java 1.5.0.8, log4j 1.3alpha8 )\n\nWould you please test your code again with latest java and latest log4j?", "id": 95687, "time": "2006-11-11T09:21:03Z", "creator": "kay.abendroth@raxion.net", "creation_time": "2006-11-11T09:21:03Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 35020, "attachment_id": null, "text": "I'm unable to reproduce this bug with Log4j 1.2.13, and Java 1.4.2_06. I guess\nthis issue has been resolved.\n\nKind regards,\nJohn Sj\u00f6lander (reporter)", "id": 95749, "time": "2006-11-13T00:20:38Z", "creator": "john.sjolander@gmail.com", "creation_time": "2006-11-13T00:20:38Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 35020, "attachment_id": null, "text": "Marked 'Resolved Fixed' as reporter can't reproduce with Log4j 1.2.13 and Java\n1.4.2_06.", "id": 95777, "time": "2006-11-13T09:50:36Z", "creator": "kay.abendroth@raxion.net", "creation_time": "2006-11-13T09:50:36Z", "is_private": false}]