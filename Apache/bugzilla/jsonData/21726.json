[{"count": 0, "tags": [], "bug_id": 21726, "attachment_id": null, "id": 40970, "time": "2003-07-19T11:05:58Z", "creator": "st@kino-fahrplan.de", "creation_time": "2003-07-19T11:05:58Z", "is_private": false, "text": "Following setup:\n\nAddType text/html .html\nAddOutputFilter INCLUDES .ssi\nOptions +multiviews\n\nThe file test.html.ssi is served fine as expected if requested by its exact URL\n/test.html.ssi, but a 404 will be returned if it is requested by /test.html or\n/test. The error_log just says \n\n  Negotiation: discovered file(s) matching request: /bla/test (None could be\nnegotiated).\n\n(if requested by /test, would be /bla/test.html if requested by /test.html).\nThis message BTW doesn't make any sense to me, how can files be discovered that\ndo not exist?\n\nThis happens only if a file extension is mapped to a handler or filter only. The\ndefault SSI setup with both text/html and INCLUDES mapped to .shtml works.\n\nI initally discovered this while trying to get content negotiation working with\ndifferent PHP output types like style.css.php or index.html.php. Some browsers\nrequest _exactly_ what they expect, so using AddType to link .php to text/html\nor -even worse IMHO- application/x-php-whatever does not work with files\ndifferent than text/html or even text/html in the later case (which is\nunfortunatly the standard, recommended PHP setup).\nAnd apart from that it doesn't make any sense to me to declare .php internally\nas text/html (or whatever other type) anyway if the script in fact outputs a PNG\nimage.\n\nNevertheless, this bug is not related to PHP, as seen with the SSI example\nabove. Just wanted to point out that there is a justified use for this.\n\nThis bug might be related to #16328."}, {"count": 1, "tags": [], "text": "Hmm, did you try using the MultiViewsMatch directive? I bet this will solve that\nproblem.", "attachment_id": null, "bug_id": 21726, "id": 40974, "time": "2003-07-19T15:54:03Z", "creator": "nd@perlig.de", "creation_time": "2003-07-19T15:54:03Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 21726, "attachment_id": null, "id": 40987, "time": "2003-07-19T18:58:10Z", "creator": "st@kino-fahrplan.de", "creation_time": "2003-07-19T18:58:10Z", "is_private": false, "text": "MultiViewsMatch works, thanks. Maybe Apache 2's defaults should follow more\nclosely to the paths Apache 1 set?"}, {"count": 3, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "id": 41063, "time": "2003-07-21T13:01:54Z", "bug_id": 21726, "creation_time": "2003-07-21T13:01:54Z", "is_private": false, "text": "hmm. IIRC that was a design decision, because of *better* defaults...\n\nThere is also ia note at <http://httpd.apache.org/docs-2.0/upgrading.html>.\nShould we place it additionally somewhere else?"}, {"count": 4, "tags": [], "text": "About the \"better defaults\":\nI do agree that selecting forgotten .old or .bak files by negotiation is surely\nnot what the site maintainer wants, but if there is something (read: handler or\nfilter) mapped to an extension, why not choose it? Looks to me like the\ndevelopers did a step too far, instead of selecting too much, negotiation now\nselects too few. And that \"too much\" wasn't a big problem anyway (IMHO of course:).\n\nBut apart from that, a short note about the changed behaviour on the\nmod_negotiation page would be helpful.", "is_private": false, "id": 41068, "creator": "st@kino-fahrplan.de", "time": "2003-07-21T13:54:48Z", "bug_id": 21726, "creation_time": "2003-07-21T13:54:48Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 21726, "attachment_id": null, "is_private": false, "id": 41079, "time": "2003-07-21T14:48:39Z", "creator": "st@kino-fahrplan.de", "creation_time": "2003-07-21T14:48:39Z", "text": "Maybe I should add that any description of the new behaviour _at all_ would be\nnice. There's not a single word in the mod_negotiation docs about excluding\nhandlers/filters and un-MIME-fied files by default; nutpickers could even argue\nthat the current Multiviews description is wrong as it just lists the \"client's\nrequirements\", which \"to handle or not to handle\" is surely not part of :)\n\nA \"See also: MultiViewsMatch\" should be there, too.\n\nMmh, reopening as documentation bug."}, {"count": 6, "tags": [], "creator": "slive@apache.org", "is_private": false, "text": "In a large part I agree with you.  But the idea behind the change is\nthat mod_negotiation is meant for content-negotiation.  Using\nMultiViews to omit the extension really has very little to do with\nnegotiation.\n\nBut I'll go add a couple notes to the docs to improve this.\n\nThanks for using Apache!", "id": 41262, "time": "2003-07-23T22:36:44Z", "bug_id": 21726, "creation_time": "2003-07-23T22:36:44Z", "attachment_id": null}]