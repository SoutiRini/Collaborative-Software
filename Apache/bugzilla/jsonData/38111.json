[{"count": 0, "tags": [], "text": "When compiling and installing PHP with the Apache's DSO module, I ran into\ncompile failure when using \"make install\".  After some troubleshooting, it all\nboiled down to this apache's instdso.sh file.  So, I simplify this testcase here...\n\n--snip--\n#!/bin/sh\n\n#DLNAME=`sed -n \"/^dlname=/{s/.*='\\([^']*\\)'/\\1/;p}\"\n$TARGETDIR/$DSOARCHIVE_BASENAME`\nDLNAME=`sed -n \"/^dlname=/{s/.*='\\([^']*\\)'/\\1/;p}\"\n/usr/local/apache2/modules/libphp5.la`\n#LIBRARY_NAMES=`sed -n \"/^library_names/{s/library_names='\\([^']*\\)'/\\1/;p}\"\n$TARGETDIR/$DSOARCHIVE_BASENAME`\nLIBRARY_NAMES=`sed -n \"/^library_names/{s/library_names='\\([^']*\\)'/\\1/;p}\"\n/usr/local/apache2/modules/libphp5.la`\nLIBRARY_NAMES=`echo $LIBRARY_NAMES | sed -e \"s/ *$DLNAME//g\"`\n \nif test -z \"$DLNAME\"\nthen\n#  echo \"Warning!  dlname not found in $TARGETDIR/$DSOARCHIVE_BASENAME.\"\n  echo \"Warning!  dlname not found in /usr/local/apache2/modules/libphp5.la.\"\n  echo \"Assuming installing a .so rather than a libtool archive.\"\n  exit 0\nfi\n--snip--\n\nwhere I get this error...\n\n--snip--\nsed: 0602-404 Function /^dlname=/{s/.*='\\([^']*\\)'/\\1/;p} cannot be parsed.\nsed: 0602-404 Function /^library_names/{s/library_names='\\([^']*\\)'/\\1/;p}\ncannot be parsed.\nWarning!  dlname not found in /usr/local/apache2/modules/libphp5.la.\nAssuming installing a .so rather than a libtool archive.\n--snip--\n\nThe original result when trying to install PHP source code was...\n\n--snip--\n-=[root@netgate]\n-=[/usr/local/src/php-5.1.1]==>make install\n        echo '\\\n\\\nInstalling PHP SAPI module:       apache2handler\n/usr/local/apache2/build/instdso.sh\nSH_LIBTOOL='/usr/local/apache2/build/libtool' libphp5.la /usr/local/apache2/modules\nrm -f /usr/local/apache2/modules/libphp5.so\n/usr/local/apache2/build/libtool --mode=install cp libphp5.la\n/usr/local/apache2/modules/\ncp .libs/libphp5.a /usr/local/apache2/modules/libphp5.a\ncp .libs/libphp5.lai /usr/local/apache2/modules/libphp5.la\nlibtool: install: warning: remember to run `libtool --finish\n/usr/local/src/php-5.1.1/libs'\nsed: 0602-404 Function /^dlname=/{s/.*='\\([^']*\\)'/\\1/;p} cannot be parsed.\nsed: 0602-404 Function /^library_names/{s/library_names='\\([^']*\\)'/\\1/;p}\ncannot be parsed.\nWarning!  dlname not found in /usr/local/apache2/modules/libphp5.la.\nAssuming installing a .so rather than a libtool archive.\nchmod 755 /usr/local/apache2/modules/libphp5.so\nchmod: /usr/local/apache2/modules/libphp5.so: A file or directory in the path\nname does not exist.\napxs:Error: Command failed with rc=65536\n.\nmake: 1254-004 The error code from the last command is 1.\n\nStop.\n-=[root@netgate]\n-=[/usr/local/src/php-5.1.1]==>\n--snip--\n\nI don't see any existing bug in this Apache's bugzilla but I did see one bug\nthat is unrelated to this one...  Bug #29599  Whatever happen, I'm unable to\ninstall PHP.  However, back then, Apache was configured, compiled and installed\nwithout a problem...", "is_private": false, "id": 84179, "creator": "scott@abcoa.com", "time": "2006-01-03T21:22:31Z", "bug_id": 38111, "creation_time": "2006-01-03T21:22:31Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of 38108 ***", "is_private": false, "id": 84181, "creator": "scott@abcoa.com", "time": "2006-01-03T21:24:21Z", "bug_id": 38111, "creation_time": "2006-01-03T21:24:21Z", "attachment_id": null}]