[{"count": 0, "tags": [], "bug_id": 40916, "attachment_id": null, "id": 95537, "time": "2006-11-07T06:38:05Z", "creator": "anthony.goubard@orange.nl", "creation_time": "2006-11-07T06:38:05Z", "is_private": false, "text": "Here is a regression I've found in Ant\nIf the dir specified in the targetfileset of a dependset does not exists, the\ndependset task will fail in 1.7.0-beta3. In Ant 1.6.5, it just continues.\n\nHere is the script that works with 1.6.5 and fails with 1.7.0-beta3\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>\n<project name=\"dependsetbug\" default=\"testbug\" basedir=\".\">\n\t<target name=\"testbug\">\n\t\t<mkdir dir=\"src\" />\n\t\t<touch file=\"src/Bla.java\" />\n\t\t<dependset>\n\t\t\t<srcfilelist files=\"Bla.java\" dir=\"src\"/>\n\t\t\t<targetfileset includes=\"*\" dir=\"dest\"/>\n\t\t</dependset>\n\t</target>\n</project>"}, {"count": 1, "tags": [], "creator": "antoine@apache.org", "attachment_id": null, "id": 95595, "time": "2006-11-08T18:20:59Z", "bug_id": 40916, "creation_time": "2006-11-08T18:20:59Z", "is_private": false, "text": "In ant 1.6 DependSet.java contained these lines :\n\n           if (!targetFS.getDir(getProject()).exists()) {\n154 \t               // this is the same as if it was empty, no target files found\n155 \t               continue;\n156 \t           }\n\nA nice way of solving this bug report would be to first solve the bug report\n40259. On top of that, we would need to fix AbstractFileSet.clone() because\nright now it strangely does not clone everything (dir, useDefaultExcludes,\ncaseSensitive, followSymlinks) are forgotten. Ideally we want to clone the\nfilesets so that the attribute to ignore empty directories is set on a copy of\nthe original fileset. Tasks which change the data given to them are not cool. "}, {"count": 2, "tags": [], "text": "fixed in HEAD, but left bug 40259 as a separate issue.  Thanks!", "attachment_id": null, "bug_id": 40916, "id": 96052, "time": "2006-11-21T16:04:12Z", "creator": "mbenson@apache.org", "creation_time": "2006-11-21T16:04:12Z", "is_private": false}]