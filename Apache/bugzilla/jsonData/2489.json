[{"count": 0, "tags": [], "bug_id": 2489, "attachment_id": null, "text": "If the dots are typeset with a CID font, the result is unpredictable. Here is a\npatch, which I posted to fop-dev earlier but nobody seems to want to commit \nit to CVS after two days...\n---------------------\nApply this patch to:\nxml-fop/src/org/apache/fop/layout/LineArea.java\n\nA bug was introduced between version 1.42 and 1.43 of LineArea \nwhich uses a lot of mapChar to cope with bug 1618 (CVS log has\na typo error instead to \"1681\"), and forgot to change the\nleader calculation.\n\nThis bug should have caused FOP to crash with any XSL:FO input \nthat has a leader with dots or space with non-pdf-standard \nfonts. I wonder why nobody spotted it in release 0.19? My \nlast CVS build was May 16 and it worked fine - the fatal bug \nwas introduced on 12 June and went into release 0.19 and \nwent unreported for nearly a month... \n\nSomebody please patch this into the CVS tree?\n\n=============================================================\n*** LineArea.java-bad\tTue Jun 12 12:37:42 2001\n--- LineArea.java\tWed Jul  4 00:44:44 2001\n***************\n*** 751,769 ****\n         * creates a leader as String out of the given char and the leader \nlength\n         * and wraps it in an InlineArea which is returned\n         */\n!     private InlineArea buildSimpleLeader(int charNumber, int leaderLength) {\n! \t\tint width = this.currentFontState.width(charNumber);\n  \t\tif (width == 0)\t{\n- \t\t\tchar c = (char) charNumber;\n  \t\t\tMessageHandler.errorln(\"char \" + c + \" has width 0. \nUsing width 100 instead.\");\n  \t\t\twidth = 100;\n  \t\t}\n          int factor = (int) Math.floor (leaderLength /\n                                         width);\n          char [] leaderChars = new char [factor];\n-         char fillChar = (char) charNumber;\n          for (int i = 0; i < factor; i ++) {\n!             leaderChars[i] = fillChar;\n          }\n          WordArea leaderPatternArea =\n            new WordArea(currentFontState, this.red, this.green,\n--- 751,767 ----\n         * creates a leader as String out of the given char and the leader \nlength\n         * and wraps it in an InlineArea which is returned\n         */\n!     private InlineArea buildSimpleLeader(char c, int leaderLength) {\n! \t\tint width = this.currentFontState.width\n(currentFontState.mapChar(c));\n  \t\tif (width == 0)\t{\n  \t\t\tMessageHandler.errorln(\"char \" + c + \" has width 0. \nUsing width 100 instead.\");\n  \t\t\twidth = 100;\n  \t\t}\n          int factor = (int) Math.floor (leaderLength /\n                                         width);\n          char [] leaderChars = new char [factor];\n          for (int i = 0; i < factor; i ++) {\n!             leaderChars[i] = c;\n          }\n          WordArea leaderPatternArea =\n            new WordArea(currentFontState, this.red, this.green,\n==============================", "id": 3465, "time": "2001-07-06T17:15:28Z", "creator": "hintak_leung@yahoo.co.uk", "creation_time": "2001-07-06T17:15:28Z", "is_private": false}, {"count": 1, "tags": [], "creator": "tengvig@infostream.no", "is_private": false, "id": 3778, "creation_time": "2001-07-17T13:24:51Z", "time": "2001-07-17T13:24:51Z", "bug_id": 2489, "text": "\n\n*** This bug has been marked as a duplicate of 2556 ***", "attachment_id": null}, {"count": 2, "tags": [], "creator": "gadams@apache.org", "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "id": 156671, "time": "2012-04-01T13:51:09Z", "bug_id": 2489, "creation_time": "2012-04-01T13:51:09Z", "is_private": false, "attachment_id": null}]