[{"count": 0, "text": "After the fix of bug #42046, the following does not work:\n\n<macrodef name=\"metaproperty\">\n    <attribute name=\"name\"/>\n    <attribute name=\"value\"/>\n    <sequential>\n        <property name=\"@{name}\" value=\"${@{value}}\"/>\n    </sequential>\n</macrodef>\n<property name=\"choice\" value=\"2\"/>\n<property name=\"thing.1\" value=\"one\"/>\n<property name=\"thing.2\" value=\"two\"/>\n<property name=\"thing.3\" value=\"three\"/>\n<metaproperty name=\"thing\" value=\"thing.${choice}\"/>\n<echo>${thing}</echo>\n\n1.8.2 prints \"two\" as expected; 1.8.3 prints \"${thing.${choice}}\" after the verbose-level message \"Property \"thing.${choice\" has not been set\".", "bug_id": 52621, "attachment_id": null, "id": 153565, "time": "2012-02-08T03:18:54Z", "creator": "jglick@apache.org", "creation_time": "2012-02-08T03:18:54Z", "tags": [], "is_private": false}, {"count": 1, "text": "The longstanding lack of a fix for bug #29347 is the reason for such tricks, by the way; there is no other portable workaround I know of.", "bug_id": 52621, "attachment_id": null, "id": 153566, "time": "2012-02-08T03:26:45Z", "creator": "jglick@apache.org", "creation_time": "2012-02-08T03:26:45Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 52621, "is_private": false, "count": 2, "id": 153598, "time": "2012-02-08T15:22:41Z", "creator": "mbenson@apache.org", "creation_time": "2012-02-08T15:22:41Z", "text": "Jesse, the breakage is of course a bug in its own right, but as for the lack of a portable solution being \"the reason for such tricks,\" have you tried the nested propertyExpander provided by the props Antlib?\n\nMatt"}, {"count": 3, "tags": [], "bug_id": 52621, "attachment_id": null, "text": "(In reply to comment #2)\n> have you tried the nested propertyExpander provided by the props Antlib?\n\nNo, by \"portable\" I mean using only tasks provided in the Ant distribution, and not relying on JDK-specific assumptions such as that <script language='js'> works. As far as I know this macrodef is the simplest such solution.", "id": 153602, "time": "2012-02-08T16:13:58Z", "creator": "jglick@apache.org", "creation_time": "2012-02-08T16:13:58Z", "is_private": false}, {"count": 4, "text": "(In reply to comment #3)\n> (In reply to comment #2)\n> > have you tried the nested propertyExpander provided by the props Antlib?\n> \n> No, by \"portable\" I mean using only tasks provided in the Ant distribution,\n\nThis is very limiting - and way more so than you'd expect from any other build tool.\n\nPutting that aside, the props antlib would be a better option if there was a release of it ;-)\n\nFor the rest I'm going to comment in bug 42046", "bug_id": 52621, "is_private": false, "id": 153693, "time": "2012-02-12T07:30:42Z", "creator": "bodewig@apache.org", "creation_time": "2012-02-12T07:30:42Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "creator": "ext-simon.steiner@nokia.com", "text": "I had issue using:\n\n    <macrodef name=\"test\">\n        <attribute name=\"ids\"/>\n        <sequential>\n            <echo message=\"@{ids}\"/>\n        </sequential>\n    </macrodef>\n    \n    <target name=\"test1\">\n        <test ids=\"${p}\"/>\n    </target>\n    \n    <property name=\"p\" value=\"${build.drive}/build\" />\n    <property name=\"build.drive\" value=\"a\" />", "id": 153985, "time": "2012-02-21T12:29:45Z", "bug_id": 52621, "creation_time": "2012-02-21T12:29:45Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 52621, "attachment_id": null, "is_private": false, "id": 154092, "time": "2012-02-23T22:18:29Z", "creator": "jglick@apache.org", "creation_time": "2012-02-23T22:18:29Z", "text": "Fixed in revision 1292985 and FAQ updated in revision 1292986: 1.8.2 behavior restored unless bug #42046 fix is explicitly activated (<attribute doubleexpanding=\"false\">).\n\nI optimistically used \"since 1.8.3\" under the assumption this will get cherry-picked to the branch and the target milestone set accordingly."}, {"count": 7, "tags": [], "creator": "bodewig@apache.org", "text": "merged into 1.8.x branch with svn revision 1293649", "id": 154148, "time": "2012-02-25T16:58:54Z", "bug_id": 52621, "creation_time": "2012-02-25T16:58:54Z", "is_private": false, "attachment_id": null}]