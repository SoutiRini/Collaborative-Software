[{"count": 0, "tags": [], "creator": "apache@scribeofthenile.com", "attachment_id": 25037, "is_private": false, "id": 134771, "time": "2010-02-22T15:13:26Z", "bug_id": 48795, "creation_time": "2010-02-22T15:13:26Z", "text": "Created attachment 25037\nFull error log.\n\nAfter compilation of a JSP fails, Tomcat will often still try to use the (non-existant) cached version.\n\nFor example, I have a simple JSP containing only \"Hello, <%=name%>\".\nWhen accessing for the first time, Tomcat throws \"org.apache.jasper.JasperException: Unable to compile class for JSP\".\n\nSubsequent requests will alternate between this error, and \"java.lang.ClassNotFoundException: org.apache.jsp.jsp.test_jsp\".\n\nIn the case of editing existing JSPs which have compiled fine, the response will alternate between the original error, and the cache of the last-good JSP.\n\nI'm using Sun JVM 1.6.0_18-b07."}, {"attachment_id": null, "tags": [], "bug_id": 48795, "text": "This has been fixed in trunk and proposed for 6.0.x", "count": 1, "id": 135248, "time": "2010-03-10T17:37:48Z", "creator": "markt@apache.org", "creation_time": "2010-03-10T17:37:48Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 48795, "attachment_id": null, "text": "After some discussion, a modified patch has been applied and proposed.\n\nThe issue is that immediately re-trying the compilation increases the risk of a DOS attack. Whilst JSP compilation failures shouldn't happen in production, they often do.\n\nThe new approach adds a new init parameter for the JSP servlet that controls if failed compilations are immediately retried on the next access or if modificationTestInterval is honour. This only applies in development mode.\n\nFor versions where this feature is not available, consider setting modificationTestInterval to 0. Again the same warning re DOS applies.", "id": 135285, "time": "2010-03-11T20:39:50Z", "creator": "markt@apache.org", "creation_time": "2010-03-11T20:39:50Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 48795, "is_private": false, "text": "Thanks for following up on this issue.\n\nDoes the proposed patch also address the case when a JSP has compiled and cached successfully and is subsequently edited with some syntax error? In this situation Tomcat seems to not invalidate the cache.", "id": 135301, "time": "2010-03-12T14:22:46Z", "creator": "apache@scribeofthenile.com", "creation_time": "2010-03-12T14:22:46Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 48795, "is_private": false, "text": "This has been fixed in 6.0.x and will be included in 6.0.26 onwards.", "id": 136940, "time": "2010-05-18T14:49:02Z", "creator": "markt@apache.org", "creation_time": "2010-05-18T14:49:02Z", "attachment_id": null}]