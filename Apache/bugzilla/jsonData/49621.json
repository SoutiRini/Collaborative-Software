[{"count": 0, "tags": [], "bug_id": 49621, "attachment_id": null, "is_private": false, "id": 138545, "time": "2010-07-20T07:12:55Z", "creator": "dominik.stadler@gmx.at", "creation_time": "2010-07-20T07:12:55Z", "text": "FOUserAgent holds an element \u201cimageSessionContext\u201d which holds SoftReferences to Source/ImageSource elements via AbstractImageSessionContext.sessionSources. The memory for these items is cleaned correctly when we un-reference the FOUserAgent object, however the Source-items still hold a file-handle via the InputStream that is included in StreamSource/ImageStreamSource object. The effect is that I cannot remove intermediate image files that are used during PDF generation right after generation is done.\n\nSo file handles are kept open this way and are only given up, when the SoftReference is collected internally. So this can easily cause \u201cout of handle\u201d type of errors if a lot of memory is available and thus SoftReferences are not collected for a long time.\n\nFurthermore it hinders cleanup of image files after report generation, i.e. when they are created specifically for the report and should be removed afterwards. This is especially true on platforms which lock open files and do not allow cleanup of those files, e.g. Windows.\n\nSee also discussion at http://www.mail-archive.com/fop-users%40xmlgraphics.apache.org/msg15411.html"}, {"count": 1, "attachment_id": null, "creator": "gadams@apache.org", "is_private": false, "id": 157286, "time": "2012-04-07T01:37:32Z", "bug_id": 49621, "creation_time": "2012-04-07T01:37:32Z", "tags": [], "text": "resetting severity from major to normal pending further review"}, {"count": 2, "attachment_id": null, "creator": "gadams@apache.org", "is_private": false, "id": 157385, "time": "2012-04-07T01:42:13Z", "bug_id": 49621, "creation_time": "2012-04-07T01:42:13Z", "tags": [], "text": "resetting P2 open bugs to P3 pending further review"}, {"count": 3, "tags": [], "bug_id": 49621, "attachment_id": null, "text": "there is no \"bug\" here, i.e., there are no leaked file descriptors; however, the XGC image session context does not provide mechanisms for programmatic control over retained image source memory\n\nso this is effectively an enhancement request to XGC, as such it is not an FOP bug per se, but an XGC issue;", "id": 157629, "time": "2012-04-07T19:12:00Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T19:12:00Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 49621, "attachment_id": null, "id": 157631, "time": "2012-04-07T19:15:31Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T19:15:31Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of bug 53046 ***"}, {"count": 5, "tags": [], "bug_id": 49621, "attachment_id": null, "is_private": false, "id": 158644, "time": "2012-04-30T00:20:43Z", "creator": "gadams@apache.org", "creation_time": "2012-04-30T00:20:43Z", "text": "batch transition resolved+duplicate to closed+duplicate"}]