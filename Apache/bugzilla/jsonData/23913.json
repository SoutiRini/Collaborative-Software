[{"count": 0, "tags": [], "creator": "j_a_fernandez@yahoo.com", "is_private": false, "text": "The style task should expand the external entity declared in the xmlcatalog\nthis works fine in 1.5.3, but in 1.6b2 it does not look in the catalog but\nin the SYSTEM location in the XML file. This fails since the SYSTEM location\nis not visible during the build.\n\n   <style in='${airport-codes}' out='${airport-ni}'\n           style='${airport-style}'\n           processor='trax'\n           classpathref='gen.classpath'>\n\n       <xmlcatalog>\n           <dtd publicId=\"-//W3C//ENTITIES Latin 1//EN//HTML\"\n                location=\"${cellectivity.descriptors}/HTMLEntities.dtd\"/>\n       </xmlcatalog>\n\n   </style>\n\nThe problem is with the xmlcatalog being ignored. I have similar problems with\nthe <xmlvalidate> task saying it cannot validate a file. Again it is not \nfinding the DTD definitions.\n To test use in the XML file a DTD with a SYSTEM ID that does not exists\nand use xmlcatalog to point to the correct location based on PUBLIC ID.", "id": 45885, "time": "2003-10-18T18:34:58Z", "bug_id": 23913, "creation_time": "2003-10-18T18:34:58Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Has anyone looked at this issue? I cannot move to 1.6 until\nthis issue is solved, our large build projects require this.", "attachment_id": null, "bug_id": 23913, "id": 47495, "time": "2003-11-17T12:25:19Z", "creator": "j_a_fernandez@yahoo.com", "creation_time": "2003-11-17T12:25:19Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 23913, "text": "Could you prepare a simple test-case and I'll try to have a look at it. ", "id": 47738, "time": "2003-11-20T22:40:11Z", "creator": "conor@apache.org", "creation_time": "2003-11-20T22:40:11Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "Created attachment 9306\nJar containing sample buildfile and support files for bug", "attachment_id": 9306, "id": 48177, "creator": "j_a_fernandez@yahoo.com", "time": "2003-11-26T17:38:56Z", "bug_id": 23913, "creation_time": "2003-11-26T17:38:56Z", "is_private": false}, {"count": 4, "tags": [], "creator": "j_a_fernandez@yahoo.com", "attachment_id": null, "text": "I have created an attachement with sample for this bug.\nI was getting different errors depending if I ran my large build\nor the small one. So you should treat this as an initial point.\n", "id": 48178, "time": "2003-11-26T17:40:53Z", "bug_id": 23913, "creation_time": "2003-11-26T17:40:53Z", "is_private": false}, {"count": 5, "text": "Ok, I think I have found the problem. When I run my build with -debug I get \nthe following errors when trying to resolve with the catalogue:\n\n    [style] Using class org.apache.tools.ant.taskdefs.optional.TraXLiaison\n    [style] In file E:\\projects\\ant1_6-branch-20031018\n\\pita\\apps\\travel\\airport-codes-nations.xml time: 1066520355410\n    [style] Out file E:\\projects\\ant1_6-branch-20031018\n\\pita\\apps\\travel\\conf\\name-\nidentities\\com.cellectivity.app.travel.data.flight.Airport.xml time: 0\n    [style] Style file E:\\projects\\ant1_6-branch-20031018\n\\pita\\apps\\travel\\airports.xsl time: 1065621175000\n    [style] Processing E:\\projects\\ant1_6-branch-20031018\n\\pita\\apps\\travel\\airport-codes-nations.xml to E:\\projects\\ant1_6-branch-\n20031018\\pita\\apps\\travel\\conf\\name-\nidentities\\com.cellectivity.app.travel.data.flight.Airport.xml\n    [style] Loading stylesheet E:\\projects\\ant1_6-branch-20031018\n\\pita\\apps\\travel\\airports.xsl\nresolveEntity: '-//W3C//ENTITIES Latin \n1//EN//HTML': 'http://dtds.cellectivity.com/cellectivity/HTMLEntities.dtd'\nApache resolver library not found, internal resolver will be used\nFailed to load Apache resolver: java.lang.NoClassDefFoundError: \norg/apache/xml/resolver/tools/CatalogResolver\nMatching catalog entry found for publicId: '-//W3C//ENTITIES Latin \n1//EN//HTML' location: 'E:\\projects\\ant1_6-branch-20031018\n\\pita\\conf\\cellectivity/HTMLEntities.dtd'\nCouldn't load ResourceStream for E:\\projects\\ant1_6-branch-20031018\n\\pita\\conf\\cellectivity/HTMLEntities.dtd\nNo matching catalog entry found, parser will \nuse: 'http://dtds.cellectivity.com/cellectivity/HTMLEntities.dtd'\n    [style] : Fatal Error! Failure reading file:///E:/projects/ant1_6-branch-\n20031018/pita/apps/travel/airport-codes-nations.xml Cause: \njava.net.UnknownHostException: dtds.cellectivity.com\n    [style] Failed to process E:\\projects\\ant1_6-branch-20031018\n\\pita\\apps\\travel\\airport-codes-nations.xml\n\n\nThe file E:\\projects\\ant1_6-branch-20031018\n\\pita\\conf\\cellectivity/HTMLEntities.dtd is there, so aparently the resolver \ndoes not understand about accessing files (at least in windows) correctly.\n\nNotice I am specifying a \"location\" in the catalogue entry.\n", "bug_id": 23913, "is_private": false, "id": 48588, "time": "2003-12-05T18:54:36Z", "creator": "j_a_fernandez@yahoo.com", "creation_time": "2003-12-05T18:54:36Z", "tags": [], "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 23913, "attachment_id": null, "id": 48614, "time": "2003-12-06T18:20:14Z", "creator": "antoine@apache.org", "creation_time": "2003-12-06T18:20:14Z", "is_private": false, "text": "The bug amounts for me to the absence of conversion of the location of the DTD\nin the file system to a file:// URL.\nI can confirm that it is a regression of ant1.6 compared to ant1.5.4.\n\nthis works :\n  <style in='${airport-codes}' out='${airport-ni}'\n           style='${airport-style}'\n           processor='trax'\n           classpathref='gen.classpath'>\n\n       <xmlcatalog>\n           <dtd publicId=\"-//W3C//ENTITIES Latin 1//EN//HTML\"\n                location=\"file:///c:/dev/testant/xmlcatalog/dtds/HTMLEntities.dtd\"/>\n       </xmlcatalog>\n\n   </style>\n\nIf I replace this file:// URL by ${cellectivity.descriptors}/HTMLEntities.dtd,\nand say :\n    <property name=\"cellectivity.descriptors\"\nlocation=\"c:/dev/testant/xmlcatalog/dtds\"/>\nthen it does not work any more.\n\nI have had a look at the differences in code in\norg.apache.tools.ant.types.XMLCatalog.java between ant 1.5.4 and HEAD, and it is\nquite huge."}, {"attachment_id": null, "tags": [], "bug_id": 23913, "text": "I mark this bug temporarily as fixed for 1.7.\nI might merge the fix for this bug into 1.6 together with \nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=20965", "count": 7, "id": 48705, "time": "2003-12-09T01:30:52Z", "creator": "antoine@apache.org", "creation_time": "2003-12-09T01:30:52Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 23913, "text": "Now also committed for ant 1.6", "count": 8, "id": 48734, "time": "2003-12-09T15:38:16Z", "creator": "antoine@apache.org", "creation_time": "2003-12-09T15:38:16Z", "is_private": false}]