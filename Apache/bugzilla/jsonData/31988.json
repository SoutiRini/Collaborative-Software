[{"count": 0, "tags": [], "text": "This is the case for docs in trash or archive.", "is_private": false, "id": 66182, "creator": "roku@apache.org", "time": "2004-10-30T21:04:07Z", "bug_id": 31988, "creation_time": "2004-10-30T21:04:07Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "gregor@apache.org", "attachment_id": null, "id": 66203, "time": "2004-10-31T14:59:44Z", "bug_id": 31988, "creation_time": "2004-10-31T14:59:44Z", "is_private": false, "text": "jann,\n\ncan you take a look? seems to be a side effect of your patch.\n\n"}, {"count": 2, "attachment_id": null, "bug_id": 31988, "text": "I feel this is related to AC stuff re usecases. Maybe I have time tonight to\nhave a look.\n\nBut Jann, I think it is easy to integrate your stuff into 1.4. If you have a\nlook to overview.xsp, you will see that the SitetreeInputModule isn't used anymore.\n\nBut to be honest, I do not know how many files are affected by the vivibility\npatch. Since I think this is a cool feature, I would like to help you.", "id": 66204, "time": "2004-10-31T16:23:27Z", "creator": "roku@apache.org", "creation_time": "2004-10-31T16:23:27Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 31988, "attachment_id": null, "id": 66206, "time": "2004-10-31T19:20:15Z", "creator": "jann.forrer@id.unizh.ch", "creation_time": "2004-10-31T19:20:15Z", "is_private": false, "text": "It seems reasonable to disable this feature in the archive and the trash as it\nis done for most of the other menu entries for release 1.2.1. I mangaed to do by\nchanging one line in the generic.xsp file (see patch below). However I am not\nsure what other effect the attribute wf:event has. \n\n\nIndex:\n/home/lenya/cms/src/lenya_1.2.x/src/webapp/lenya/pubs/default/config/menus/generic.xsp\n===================================================================\n---\n/home/lenya/cms/src/lenya_1.2.x/src/webapp/lenya/pubs/default/config/menus/generic.xsp\n     (revision 5613\n8)\n+++\n/home/lenya/cms/src/lenya_1.2.x/src/webapp/lenya/pubs/default/config/menus/generic.xsp\n     (working copy)\n@@ -194,7 +194,7 @@\n             <item>Edit Navigation Title</item>\n           }\n           if (isDocument) {\n-            <item uc:usecase=\"change-visibility\" uc:step=\"showscreen\"\nhref=\"?\"><i18n:text>Change node visibil\nity</i18n:text></item>\n+            <item wf:event=\"edit\" uc:usecase=\"change-visibility\"\nuc:step=\"showscreen\" href=\"?\"><i18n:text>Cha\nnge node visibility</i18n:text></item>\n           }\n           else {\n             <item>Change node visibility</item>\n"}, {"count": 4, "tags": [], "creator": "jann.forrer@id.unizh.ch", "attachment_id": null, "id": 66207, "time": "2004-10-31T19:24:08Z", "bug_id": 31988, "creation_time": "2004-10-31T19:24:08Z", "is_private": false, "text": "I will try to integrate it in 1.4. But I did not look at the 1.4 source in\ndetail yet. I will therefore come back to your offer roku."}, {"count": 5, "tags": [], "bug_id": 31988, "attachment_id": null, "id": 66208, "time": "2004-10-31T20:06:40Z", "creator": "roku@apache.org", "creation_time": "2004-10-31T20:06:40Z", "is_private": false, "text": "wf:event=edit means that the edit event is fired, which is correct here, but we\nhave to make sure, that the wf:status is not set to authoring after an edit\nevent is fired while in trash or archive state. I will fix that and commit your\npatch.\n\nThanks."}, {"count": 6, "attachment_id": null, "creator": "roku@apache.org", "is_private": false, "id": 66209, "time": "2004-10-31T20:09:16Z", "bug_id": 31988, "creation_time": "2004-10-31T20:09:16Z", "tags": [], "text": "Ah sorry. I misunderstood you. Since you want disable the feature while in trash\nor archive, you have done right and I do not need to tweak the wf configuration.\n\nwf:event=edit is not defined while in wf:state=archive or trash and thus menu\nentries get disabled.\n\nI will commit your patch."}, {"count": 7, "attachment_id": null, "creator": "roku@apache.org", "is_private": false, "id": 66212, "time": "2004-10-31T20:20:54Z", "bug_id": 31988, "creation_time": "2004-10-31T20:20:54Z", "tags": [], "text": "Commited Jann's changes."}]