[{"attachment_id": null, "tags": [], "bug_id": 1034, "is_private": false, "count": 0, "id": 1398, "time": "2001-03-19T15:47:24Z", "creator": "cgay@vsegroup.com", "creation_time": "2001-03-19T15:47:24Z", "text": "The optional task <telnet> is not properly executing a tar command.\n\nI have a file, fullmealdeal.tar.gz, which is composed of fries.tar and \nburger.tar.\n\nIf I execute the following command from the command line with, while logged \nonto the remote host as root, both the fries.tar and burger.tar are extracted \ncorrectly:\ntar --extract --gunzip --file=fullmealdeal.tar.gz\n\nIf I logon to the remote host as root using the telnet task and execute the \ncommand\n<write string=\"tar --extract --gunzip --file=fullmealdeal.tar.gz\"/>, then only \nthe fries.tar is extracted. \n\nI have had no problems with other commands using the telnet task.\n\nAnt: 1.3\nOS: Win2000 (localhost), RH Linux 6.1 (remote)"}, {"attachment_id": null, "tags": [], "bug_id": 1034, "is_private": false, "count": 1, "id": 1428, "time": "2001-03-20T06:02:30Z", "creator": "cgay@vsegroup.com", "creation_time": "2001-03-20T06:02:30Z", "text": "I have also discovered that the gunzip commands fail when transmitted via the \ntelnet task.  For instance, \"gunzip fullmealdeal.tar.gz\" works fine when I \nenter it from the command line on the remote host (while logged in as root).  \nWhen executed as an ant script <write string=\"gunzip fullmealdeal.tar.gz\"/> (as \nroot), it fails."}, {"count": 2, "tags": [], "creator": "cgay@vsegroup.com", "is_private": false, "text": "\"gzip -d fullmealdeal.tar.gz\" also fails when executed via the telnet task.", "id": 1429, "time": "2001-03-20T06:08:45Z", "bug_id": 1034, "creation_time": "2001-03-20T06:08:45Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "Amending my original submission for this bug, it seems the extraction of \nmultiple tarballs from within a parent tarball is only an issue when the parent \ntarball is zipped.  Using the telnet task, I am able to extract fries.tar and \nburger.tar from fullmealdeal.tar with the command <write string=\"tar --extract -\n-file=fullmealdeal.tar\"/>.  Any gzip compression causes failure (with the \nappropriate commands), though.", "attachment_id": null, "id": 1430, "creator": "cgay@vsegroup.com", "time": "2001-03-20T06:13:40Z", "bug_id": 1034, "creation_time": "2001-03-20T06:13:40Z", "is_private": false}, {"count": 4, "tags": [], "text": "I have found that you need to write additional code to ensure that the command \nyou executed FINISHES before disconnecting. By default the telnet task executes \na command and then immediately disconnects, killing your tar process \nmid-stream. I think your telnet server kills all tasks upon disconnect, and that \ncould be causing your problem.\n\nMy workaround was something like this:\n\n<write string=\"tar --extract --gunzip --file=fullmealdeal.tar.gz; echo \nalldone\"/>\n<read>alldone</read>\n<write string=\"echo \">\n<read>alldone</read>\n<write string=\"echo \">\n\nYou have to read the string 'alldone' twice, because the first time around it'll \nget read because the server is echoing back the string you sent. The SECOND time \nyou read the string, it'll have been sent from the telnet server after the echo \ncommand actually executes.\n\nTry it - I used this technique and it worked. You may need to tweak it a bit, \nbut the idea is there.", "attachment_id": null, "id": 8336, "creator": "necrotech@geocities.com", "time": "2001-11-27T09:35:36Z", "bug_id": 1034, "creation_time": "2001-11-27T09:35:36Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 1034, "attachment_id": null, "id": 10897, "time": "2002-02-19T14:46:48Z", "creator": "bodewig@apache.org", "creation_time": "2002-02-19T14:46:48Z", "is_private": false, "text": "I assume that Andriy's suggestion works, please reopen this bug if problems\npersist."}]