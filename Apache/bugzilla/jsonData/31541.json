[{"count": 0, "tags": [], "bug_id": 31541, "attachment_id": null, "text": "Ant seems to have problems deleting files with a timestamp between 00:00:00 and \n00:59:59. Please have a look at the following example:\n\n[C:\\Inetpub]touch /t00:59:59 \\Inetpub\\ftproot\\transfer\\test.bin\n 5.10.2004 00:59:59  C:\\Inetpub\\ftproot\\transfer\\test.bin\n\n[C:\\Inetpub]ant test\nBuildfile: build.xml\n\ntest:\n      [ftp] deleting files\n      [ftp] 0 files deleted\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n\n[C:\\Inetpub]touch /t01:00:00 \\Inetpub\\ftproot\\transfer\\test.bin\n 5.10.2004 01:00:00  C:\\Inetpub\\ftproot\\transfer\\test.bin\n\n[C:\\Inetpub]ant test\nBuildfile: build.xml\n\ntest:\n      [ftp] deleting files\n      [ftp] 1 files deleted\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n\n\nAnd under some conditions (which I can't reproduce) Ant throws a NPE:\n\n[C:\\Inetpub]ant -debug test\nApache Ant version 1.6.2 compiled on July 16 2004\nBuildfile: build.xml\nAdding reference: ant.PropertyHelper\nDetected Java version: 1.5 in: C:\\Progra~1\\Java\\jdk1.5.0\\jre\nDetected OS: Windows XP\nAdding reference: ant.ComponentHelper\nSetting ro project property: ant.version -> Apache Ant version 1.6.2 compiled \non July 16 2004\nSetting ro project property: ant.file -> C:\\Inetpub\\build.xml\nAdding reference: ant.projectHelper\nAdding reference: ant.parsing.context\nAdding reference: ant.targets\nparsing buildfile C:\\Inetpub\\build.xml with URI = file:///C:/Inetpub/build.xml\nSetting ro project property: ant.project.name -> FTP test\nAdding reference: FTP test\nSetting ro project property: ant.file.FTP test -> C:\\Inetpub\\build.xml\nProject base dir set to: C:\\Inetpub\n +Target:\n +Target: test\nBuild sequence for target `test' is [test]\nComplete build sequence is [test, ]\n\ntest:\n      [ftp] Opening FTP connection to localhost\n      [ftp] connected\n      [ftp] logging in to FTP server\n      [ftp] login succeeded\n      [ftp] changing the remote directory\n      [ftp] deleting files\nCould not load a dependent class (com/sun/media/jai/codec/FileSeekableStream) \nfor type image\nCould not load a dependent class (com/jcraft/jsch/UserInfo) for type sshexec\nCould not load a dependent class (com/jcraft/jsch/UserInfo) for type scp\nCould not load class (org.apache.tools.ant.tasksdefs.cvslib.CvsVersion) for \ntype cvsversion\nCould not load a dependent class (jdepend/xmlui/JDepend) for type jdepend\nCould not load a dependent class (junit/framework/Test) for type junit\nfileset: Setup scanner in dir C:\\Inetpub with patternSet{ includes: [test.bin] \nexcludes: [] }\n      [ftp] disconnecting\n\nBUILD FAILED\nC:\\Inetpub\\build.xml:4: java.lang.NullPointerException\n        at org.apache.tools.ant.Task.perform(Task.java:373)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nCaused by: java.lang.NullPointerException\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.checkRemoteSe\nnsitivity(FTP.java:527)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.listFiles\n(FTP.java:507)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.listFiles\n(FTP.java:518)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner$AntFTPFile.<i\nnit>(FTP.java:657)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.checkIncludeP\natterns(FTP.java:242)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.scan\n(FTP.java:197)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles\n(FTP.java:1287)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles\n(FTP.java:1382)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.execute(FTP.java:2010)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        ... 8 more\n--- Nested Exception ---\njava.lang.NullPointerException\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.checkRemoteSe\nnsitivity(FTP.java:527)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.listFiles\n(FTP.java:507)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.listFiles\n(FTP.java:518)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner$AntFTPFile.<i\nnit>(FTP.java:657)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.checkIncludeP\natterns(FTP.java:242)\n        at \norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.scan\n(FTP.java:197)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles\n(FTP.java:1287)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles\n(FTP.java:1382)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.execute(FTP.java:2010)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\n\nTotal time: 1 second\n\n\n\nRegards,\nLars", "id": 64617, "time": "2004-10-05T13:09:27Z", "creator": "no.spam.lkral@web.de", "creation_time": "2004-10-05T13:09:27Z", "is_private": false}, {"count": 1, "tags": [], "creator": "antoine@apache.org", "attachment_id": null, "id": 64717, "time": "2004-10-06T18:42:18Z", "bug_id": 31541, "creation_time": "2004-10-06T18:42:18Z", "is_private": false, "text": "Which version of commons-net are you using ? 1.2.2 is recommended.\nCheers,\nAntoine"}, {"count": 2, "tags": [], "bug_id": 31541, "attachment_id": null, "id": 64718, "time": "2004-10-06T19:17:20Z", "creator": "no.spam.lkral@web.de", "creation_time": "2004-10-06T19:17:20Z", "is_private": false, "text": "I'm already using the latest version of commons-net and jakarta-oro (commons-\nnet-1.2.2.jar, jakarta-oro-2.0.8.jar). And with the following build.xml I am \nable to reproduce this problem on different clients / ftp servers:\n\n<project name=\"FTP test\" default=\"test\">\n    <target name=\"test\">\n        <ftp action=\"del\" remotedir=\"/transfer\"\n            server=\"localhost\" userid=\"***\" password=\"***\">\n            <fileset includes=\"test.bin\"/>\n        </ftp>\n    </target>\n</project>\n\n\nregards,\nLars"}, {"count": 3, "tags": [], "creator": "kevin.jackson@it.fts-vn.com", "attachment_id": null, "id": 67111, "time": "2004-11-18T07:26:28Z", "bug_id": 31541, "creation_time": "2004-11-18T07:26:28Z", "is_private": false, "text": "Looking at your output and the code, it looks like something is going on with\nthe delFile method.\n\nAs you're specifying a fileset (I assume from the build.xml included below), the\ntask looks inside the fileset and then perorms the desired action, in this case\ndelFile.  I think for some reason, the FTPClient object can't delete the file on\nthe server, but the warning message that the file couldn't be deleted will be\nswallowed and the # processed won't be incremented if skipFailedTransfers is set\nto false.  Normally this would produce a BuildException, except in your case it\nisn't, which is pretty strange.\n\nCan you try it with verbose=\"true\" and see if it logs a skipping file message?\n\n\n\n"}, {"count": 4, "tags": [], "bug_id": 31541, "attachment_id": null, "text": "Since other ftp actions show similar behaviour I assume there is a bug in \ncommons-net. Maybe there is a problem parsing the list result, although it \nlooks very similar in both cases:\n\n-rwxrwxrwx   1 owner    group               0 Nov 19  0:59 test.bin\n-rwxrwxrwx   1 owner    group               0 Nov 19  1:00 test.bin\n\nHere an example with the list action:\n\n[C:\\Inetpub]touch /t00:59:59 \\Inetpub\\ftproot\\transfer\\test.bin\n19.11.2004 00:59:59  C:\\Inetpub\\ftproot\\transfer\\test.bin\n\n[C:\\Inetpub]ant test\nBuildfile: build.xml\n\ntest:\n      [ftp] listing files\n      [ftp] 0 files listed\n      [ftp] deleting files\n      [ftp] 0 files deleted\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n\n[C:\\Inetpub]touch /t01:00:00 \\Inetpub\\ftproot\\transfer\\test.bin\n19.11.2004 01:00:00  C:\\Inetpub\\ftproot\\transfer\\test.bin\n\n[C:\\Inetpub]ant test\nBuildfile: build.xml\n\ntest:\n      [ftp] listing files\n      [ftp] listing test.bin\n      [ftp] 1 files listed\n      [ftp] deleting files\n      [ftp] deleting test.bin\n      [ftp] 1 files deleted\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n\n\nAnd for the sake of completeness, here my build.xml:\n\n<project name=\"FTP test\" default=\"test\">\n    <target name=\"test\">\n        <ftp action=\"list\" remotedir=\"/transfer\" verbose=\"true\" \nlisting=\"listing.txt\"\n            server=\"localhost\" userid=\"***\" password=\"***\">\n            <fileset includes=\"test.bin\"/>\n        </ftp>\n        <ftp action=\"del\" remotedir=\"/transfer\" verbose=\"true\"\n            server=\"localhost\" userid=\"***\" password=\"***\">\n            <fileset includes=\"test.bin\"/>\n        </ftp>\n    </target>\n</project>\n\n\nCheers,\nLars", "id": 67204, "time": "2004-11-19T10:39:25Z", "creator": "no.spam.lkral@web.de", "creation_time": "2004-11-19T10:39:25Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 31541, "attachment_id": null, "text": "I think this may be related to a bug in Commons::Net that manifested itself when\na file had a timestamp like 00:xx or 0:xx. Can you try the latest snapshot of\ncommons-net (1.3.0-dev)? I think that this may solve the problem. Cheers.", "id": 67881, "time": "2004-12-03T16:10:41Z", "creator": "rwinston@eircom.net", "creation_time": "2004-12-03T16:10:41Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 31541, "attachment_id": null, "id": 67951, "time": "2004-12-05T13:54:43Z", "creator": "no.spam.lkral@web.de", "creation_time": "2004-12-05T13:54:43Z", "is_private": false, "text": "Ah, with the latest nightly snapshot of commons-net the ftp task works as \nexpected. It seems this bug was related to bugreport #30737. Thanks for your \nhelp to solve this issue.\n\nCheers,\nLars\n\n*** This bug has been marked as a duplicate of 30737 ***"}, {"count": 7, "tags": [], "bug_id": 31541, "attachment_id": null, "text": "Changed resolution to INVALID since duplicate bug has been deleted from Bugzilla and leaving as DUPLICATE creates referential integrity issues for the underlying database.", "id": 119070, "time": "2008-07-28T05:55:12Z", "creator": "markt@apache.org", "creation_time": "2008-07-28T05:55:12Z", "is_private": false}]