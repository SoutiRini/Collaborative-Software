[{"count": 0, "tags": [], "bug_id": 14674, "attachment_id": null, "id": 26554, "time": "2002-11-19T12:35:49Z", "creator": "admin@ter-net.com", "creation_time": "2002-11-19T12:35:49Z", "is_private": false, "text": "When I try to start httpd on linux (kernel 2.4.19; comile: --with-mpm=perchild\n--enable --enable-mods-shared=all) child processes becomes a zombi.\nIn logs/error_log appears:\n[emerg] (22)Invalid argument: apr_proc_mutex_unlock failed. Attempting to\nshutdown process gracefully.\n\nIt fixed if change file srclib/apr/locks/unix/proc_mutex.c change like this:\n\n114c114\n<     psem = sem_open((const char *) semname, O_CREAT, 0666, 1);\n---\n\n>>     psem = sem_open((const char *) semname, O_CREAT, 0644, 1);\n\n222c222\n<     new_mutex->interproc->filedes = semget(IPC_PRIVATE, 1, IPC_CREAT | 0666);\n---\n\n>>     new_mutex->interproc->filedes = semget(IPC_PRIVATE, 1, IPC_CREAT | 0600);"}, {"count": 1, "tags": [], "bug_id": 14674, "attachment_id": null, "is_private": false, "id": 26729, "time": "2002-11-21T19:44:56Z", "creator": "trawick@apache.org", "creation_time": "2002-11-21T19:44:56Z", "text": "code \"AcceptMutex fcntl\" in httpd.conf inside\n\n<IfModule perchild.c>\n(stuff)\n</IfModule>\n\nthe fix applied after 2.0.43 is to force the mutex type to be fcntl if\nthe mutex being used (e.g., the default sysvsem on Linux) is\nincompatible with perchild\n\n\n*** This bug has been marked as a duplicate of 13311 ***"}]