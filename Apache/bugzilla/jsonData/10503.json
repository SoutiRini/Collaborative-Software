[{"count": 0, "tags": [], "bug_id": 10503, "attachment_id": null, "is_private": false, "id": 19049, "time": "2002-07-05T11:05:26Z", "creator": "bugzilla@vampire.com.hk", "creation_time": "2002-07-05T11:05:26Z", "text": "I reported this to users@httpd.apache.org on 30 June, I've received no response\nso I'm submitting this.\n\nI've been using Apache 1.3.9 on Linux with multiple virtual hosts and\nshared directories for icons and cgi scripts. In srm.conf I have:\n\nAlias /icons/ /usr/share/apache/icons/\nScriptAlias /cgi-bin/ /usr/lib/cgi-bin/\n\nand in httpd.conf:\n\nVirtualDocumentRoot /home/sites/%4/%3/%2/%1\n\nThen I set up another server and installed Apache 2.0.39 to replace the\nold server. After I took note of the configuration directive changes for\nversion 2, the server would run and serve pages from the different virtual\nhosts, but the icons and script directories were not accessible through\nthe virtual hosts.\n\nA typical entry from the error log is:\n\n[Sun Jun 30 01:46:43 2002] [error] [client 210.184.87.231] File does not\nexist: /home/sites/hk/com/candies/www/icons, referer:\nhttp://www.candies.com.hk/\n\nWith the corresponding entry from the access log:\n\nwww.candies.com.hk 210.184.87.231 - - [30/Jun/2002:01:46:43 +0800] \"GET\n/icons/logos/yklogo_n.gif HTTP/1.0\" 404 222 \"http://www.candies.com.hk/\"\n\"Mozilla/4.79 [en] (WinNT; U)\" 0 \"en,zh-CN,zh-TW\"\n\nI could access those directories through the default host. I no longer\nhave a srm.conf file, so the Alias and ScriptAlias directives are in\nhttpd.conf now. I have tried many variantions on the config file. I\nnoticed there was a configuration with a similar purpose in:\nhttp://httpd.apache.org/docs-2.0/vhosts/mass.html#combinations that shows\nScriptAlias being used with VirtualDocumentRoot, so I tried a similar\nconfiguration:\n\n<VirtualHost 210.184.87.232:80 127.0.0.1:80>\n    ServerName prawn.yuikee.com.hk \n    DocumentRoot /home/sites/hk/com/yuikee\n    Alias /icons/ /usr/local/apache2/icons/ \n    ScriptAlias /cgi-bin/ /usr/local/apache2/cgi-bin/\n    VirtualDocumentRoot /home/sites/%4/%3/%2/%1 \n\n</VirtualHost>\n\nto no avail. NameVirtualHost made no difference either. It is not a client\ncaching problem, I did many of the tests using telnet to port 80.\n\nI know the aliasing is working because I can leave an IP address out of\nthe VirtualHost directive and access the icons and scripts directories\nthrough the default host. I can see the virtual hosting working. But the\naliasing doesn't work with the VirtualDocumentRoot, even though it used to\nwork in version 1.3.9\n\nWhat am I missing? I checked the \"Upgrading to 2.0 from 1.3\" notes and\nfound nothing relevant. Is there some trick to doing this, or is it broken\nin version 2?\n\nThanks,\n\nAllan Dyer, YKCL"}, {"count": 1, "tags": [], "bug_id": 10503, "attachment_id": null, "id": 19184, "time": "2002-07-09T17:23:41Z", "creator": "slive@apache.org", "creation_time": "2002-07-09T17:23:41Z", "is_private": false, "text": "There is a patch that should fix this problem in bug 8853, but nobody has\ntested it and I'm not going to commit it without testing because I don't\nuse mod_vhost_alias myself.\n\n*** This bug has been marked as a duplicate of 8853 ***"}, {"count": 2, "tags": [], "text": "Patch 1804 for bug 8853 worked. Thanks!\nNote: I edited the source manually, as I was applying to 2.0.39 so patch \nwouldn't do it.\nSorry I didn't find bug 8853 immediately, I think I searched for \nVirtualDocumentRoot, and didn't think of trying mod_vhost_alias", "attachment_id": null, "id": 19254, "creator": "bugzilla@vampire.com.hk", "time": "2002-07-10T14:52:11Z", "bug_id": 10503, "creation_time": "2002-07-10T14:52:11Z", "is_private": false}]