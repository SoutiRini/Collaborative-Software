[{"count": 0, "tags": [], "text": "Sometimes mkdir task fail when many mkdir task tries to create same folder at the same file\n\nSteps to Reproduce\nRun many mkdir task that crates same folder\n\nActual Results:\nclass org.apache.tools.ant.BuildException WITH MESSAGE: Directory XXX was not successful for an unknown reason\n\nExpected Result:\nno build exception\n\nAdditional Information:\nproblem is following part of code:\n\n  if(!dir.exists())\n        {\n            boolean result = mkdirs(dir);\n            if(!result)\n\nnot handled scenario:\ncheck if dir exist -> no\nafter checking if dir exist and before creating folder with mkdirs method other thread (eg mkdir task) creates folder so result is no but folder exist \nmy proposal:\nchange:\n\n if(!result)\n\nto \n if(!result && !dir.exists()){\n}else if (dir.exists()){\nlog(\"folder exist\")\n}", "attachment_id": null, "bug_id": 49572, "id": 138275, "time": "2010-07-08T10:00:00Z", "creator": "kwiryn@poczta.onet.pl", "creation_time": "2010-07-08T10:00:00Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 138299, "time": "2010-07-09T07:05:38Z", "bug_id": 49572, "creation_time": "2010-07-09T07:05:38Z", "is_private": false, "text": "svn revision 962483"}]