[{"count": 0, "tags": [], "bug_id": 56809, "attachment_id": 31869, "id": 176867, "time": "2014-08-04T12:35:56Z", "creator": "hovinen@gmail.com", "creation_time": "2014-08-04T12:35:56Z", "is_private": false, "text": "Created attachment 31869\nPatch to fix problem\n\nJMSSampler closes the InitialContext in threadStarted, before the individual requests are sent. When authentication is required for the queue, the credentials are then lost with the closure of the InitialContext. As a result, all send-operations run into the following error:\n\nJMSSecurityException: Access denied to resource: type=<jms>, application=xxxx, destinationType=queue, resource=xxxx, action=send\n        at weblogic.jms.dispatcher.DispatcherAdapter.convertToJMSExceptionAndThrow(DispatcherAdapter.java:110)\n        at weblogic.jms.dispatcher.DispatcherAdapter.dispatchSyncTran(DispatcherAdapter.java:53)\n        at weblogic.jms.client.JMSProducer.toFEProducer(JMSProducer.java:1300)\n        at weblogic.jms.client.JMSProducer.deliveryInternal(JMSProducer.java:807)\n        at weblogic.jms.client.JMSProducer.sendInternal(JMSProducer.java:543)\n        at weblogic.jms.client.JMSProducer.sendWithListener(JMSProducer.java:394)\n        at weblogic.jms.client.JMSProducer.send(JMSProducer.java:384)\n        at weblogic.jms.client.WLProducerImpl.send(WLProducerImpl.java:970)\n        at org.apache.jmeter.protocol.jms.sampler.FixedQueueExecutor.sendAndReceive(FixedQueueExecutor.java:87)\n        at org.apache.jmeter.protocol.jms.sampler.JMSSampler.sample(JMSSampler.java:151)\n        at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:429)\n        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:257)\n        at java.lang.Thread.run(Thread.java:744)\nCaused by: weblogic.jms.common.JMSSecurityException: Access denied to resource: type=<jms>, application=ppit-jms-module, destinationType=queue, resource=Sebula.Prepaid.Asynch.Request, action=send\n        at weblogic.utils.StackTraceDisabled.unknownMethod()\nCaused by: weblogic.jms.common.JMSSecurityException: Access denied to resource: type=<jms>, application=ppit-jms-module, destinationType=queue, resource=Sebula.Prepaid.Asynch.Request, action=send\n        ... 1 more\nCaused by: weblogic.jms.common.JMSSecurityException: Access denied to resource: type=<jms>, application=ppit-jms-module, destinationType=queue, resource=Sebula.Prepaid.Asynch.Request, action=send\n        ... 1 more\n\nThe solution is to close the InitialContext in threadFinished instead. A patch is attached.\n\n(Running against a JMS-queue on Weblogic 12.1.2)"}, {"count": 1, "tags": [], "bug_id": 56809, "attachment_id": null, "id": 177325, "time": "2014-08-22T21:13:08Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-22T21:13:08Z", "is_private": false, "text": "Date: Fri Aug 22 21:11:17 2014\nNew Revision: 1619932\n\nURL: http://svn.apache.org/r1619932\nLog:\nBug 56809 - JMSSampler closes InitialContext too early\nBugzilla Id: 56809\n\nModified:\n    jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/sampler/JMSSampler.java\n    jmeter/trunk/xdocs/changes.xml"}, {"count": 2, "tags": [], "text": "Thanks for contribution.", "attachment_id": null, "bug_id": 56809, "id": 177326, "time": "2014-08-22T21:13:23Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-22T21:13:23Z", "is_private": false}]