[{"count": 0, "tags": [], "bug_id": 61486, "attachment_id": null, "is_private": false, "id": 200642, "time": "2017-09-04T11:07:12Z", "creator": "duanyao@ustc.edu", "creation_time": "2017-09-04T11:07:12Z", "text": "When I ran a JMeter test with JSR223 scripts on a Linux server without X (and Xlib), it failed:\n\n2017-09-04 13:01:56,654 ERROR o.a.j.JMeter: Uncaught exception: \njava.lang.UnsatisfiedLinkError: /jdk/lib/libawt_xawt.so: Error loading shared library libXext.so.6: No such file or directory (needed by /jdk/lib/libawt_xawt.so)\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method) ~[?:?]\n\tat java.lang.ClassLoader.loadLibrary0(ClassLoader.java:2614) ~[?:?]\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:2499) ~[?:?]\n\tat java.lang.Runtime.load0(Runtime.java:812) ~[?:?]\n\tat java.lang.System.load(System.java:1821) ~[?:?]\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method) ~[?:?]\n\tat java.lang.ClassLoader.loadLibrary0(ClassLoader.java:2614) ~[?:?]\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:2520) ~[?:?]\n\tat java.lang.Runtime.loadLibrary0(Runtime.java:873) ~[?:?]\n\tat java.lang.System.loadLibrary(System.java:1857) ~[?:?]\n\tat java.awt.Toolkit$3.run(Toolkit.java:1358) ~[?:?]\n\tat java.awt.Toolkit$3.run(Toolkit.java:1356) ~[?:?]\n\tat java.security.AccessController.doPrivileged(Native Method) ~[?:?]\n\tat java.awt.Toolkit.loadLibraries(Toolkit.java:1355) ~[?:?]\n\tat java.awt.Toolkit.<clinit>(Toolkit.java:1388) ~[?:?]\n\tat java.awt.Component.<clinit>(Component.java:590) ~[?:?]\n\tat org.apache.jmeter.testbeans.BeanInfoSupport.createPropertyGroup(BeanInfoSupport.java:255) ~[ApacheJMeter_core.jar:3.2 r1790748]\n\tat org.apache.jmeter.util.ScriptingBeanInfoSupport.<init>(ScriptingBeanInfoSupport.java:64) ~[ApacheJMeter_core.jar:3.2 r1790748]\n\tat org.apache.jmeter.util.JSR223BeanInfoSupport.<init>(JSR223BeanInfoSupport.java:87) ~[ApacheJMeter_core.jar:3.2 r1790748]\n\tat org.apache.jmeter.assertions.JSR223AssertionBeanInfo.<init>(JSR223AssertionBeanInfo.java:26) ~[ApacheJMeter_components.jar:3.2 r1790748]\n\tat jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[?:?]\n\tat jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[?:?]\n\tat jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[?:?]\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:488) ~[?:?]\n\tat java.lang.Class.newInstance(Class.java:558) ~[?:?]\n\tat com.sun.beans.finder.InstanceFinder.instantiate(InstanceFinder.java:98) ~[?:?]\n\tat com.sun.beans.finder.InstanceFinder.find(InstanceFinder.java:66) ~[?:?]\n\tat java.beans.Introspector.findExplicitBeanInfo(Introspector.java:484) ~[?:?]\n\tat java.beans.Introspector.<init>(Introspector.java:434) ~[?:?]\n\tat java.beans.Introspector.getBeanInfo(Introspector.java:205) ~[?:?]\n\tat org.apache.jmeter.testbeans.TestBeanHelper.prepare(TestBeanHelper.java:66) ~[ApacheJMeter_core.jar:3.2 r1790748]\n\tat org.apache.jmeter.engine.StandardJMeterEngine.notifyTestListenersOfStart(StandardJMeterEngine.java:215) ~[ApacheJMeter_core.jar:3.2 r1790748]\n\tat org.apache.jmeter.engine.StandardJMeterEngine.run(StandardJMeterEngine.java:388) ~[ApacheJMeter_core.jar:3.2 r1790748]\n\tat java.lang.Thread.run(Thread.java:844) [?:?]\n\nI think scripting should not depend on AWT and Xlib."}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 200652, "time": "2017-09-04T19:40:59Z", "bug_id": 61486, "creation_time": "2017-09-04T19:40:59Z", "is_private": false, "text": "Can you check those links, I am not sure it's related to X :\nhttps://askubuntu.com/questions/674579/libawt-xawt-so-libxext-so-6-cannot-open-shared-object-file-no-such-file-or-di\nhttps://stackoverflow.com/questions/17355863/cant-find-install-libxtst-so-6"}, {"count": 2, "text": "libXext provides an X Window System client interface to several extensions to the X protocol. See https://packages.debian.org/stretch/libxext6", "bug_id": 61486, "attachment_id": null, "id": 200706, "time": "2017-09-06T13:42:56Z", "creator": "duanyao@ustc.edu", "creation_time": "2017-09-06T13:42:56Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 61486, "attachment_id": null, "text": "Did you try running JMeter by adding this option :\n-Djava.awt.headless=true\n\nThanks", "id": 200735, "time": "2017-09-07T20:02:21Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-09-07T20:02:21Z", "is_private": false}, {"count": 4, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "text": "Hi team,\nAny Linux user could validate this ?\n\nThanks", "id": 200834, "time": "2017-09-12T20:11:09Z", "bug_id": 61486, "creation_time": "2017-09-12T20:11:09Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "milamber@apache.org", "attachment_id": null, "id": 200897, "time": "2017-09-16T11:53:05Z", "bug_id": 61486, "creation_time": "2017-09-16T11:53:05Z", "is_private": false, "text": "\nI don't have this issue on a Debian 9 without libxext packages. JMeter in non-gui mode works fine.\n\nroot@vm-test2:~/apache-jmeter-3.2/bin# java -version\njava version \"1.8.0_144\"\n[...]\n\nroot@vm-test2:~/apache-jmeter-3.2/bin# ./jmeter -n -t ./examples/PerformanceTestPlanMemoryThread.jmx \nCreating summariser <summary>\nCreated the tree successfully using ./examples/PerformanceTestPlanMemoryThread.jmx\nStarting the test @ Sat Sep 16 12:50:43 WEST 2017 (1505562643751)\n[...]\n\n\nCan you indicate the Linux distro ? version ?\nJava version too ?"}, {"count": 6, "tags": [], "creator": "duanyao@ustc.edu", "is_private": false, "text": "Hi Philippe Mouawad,\nI just tried -Djava.awt.headless=true , and it did the trick. Thanks!\nMaybe it's better to set java.awt.headless=true automatically when -n argument is passed to jmeter?\n\nHi Milamber,\nMy Linux distro is Alpine Linux 3.6.2 x86_64, and Java version is serverjre-9-ea+181, which can be downloaded from:\n\nhttp://jdk.java.net/9/\nhttp://download.java.net/java/jdk9-alpine/archive/181/binaries/serverjre-9-ea+181_linux-x64-musl_bin.tar.gz\n\nI guess your Java package on Debian is \"openjdk-xxx-headless\"? It seems it run in headless mode automatically.", "id": 200925, "time": "2017-09-18T06:11:34Z", "bug_id": 61486, "creation_time": "2017-09-18T06:11:34Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "milamber@apache.org", "attachment_id": null, "id": 200927, "time": "2017-09-18T08:13:26Z", "bug_id": 61486, "creation_time": "2017-09-18T08:13:26Z", "is_private": false, "text": "\nMy Java version is :\n$ java -version\njava version \"1.8.0_144\"\nJava(TM) SE Runtime Environment (build 1.8.0_144-b01)\nJava HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\n\nDirectly downloaded from Oracle.com\n\n\n\nCurrently JMeter <=3.3 was not officially supported. Please use Java 8 from Oracle.\n\n\nadd headless=true when we use the -n option (or jmeter-server) seems a good idea, Philippe."}, {"count": 8, "tags": [], "bug_id": 61486, "attachment_id": null, "text": "(In reply to Milamber from comment #7)\n> My Java version is :\n> $ java -version\n> java version \"1.8.0_144\"\n> Java(TM) SE Runtime Environment (build 1.8.0_144-b01)\n> Java HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\n> \n> Directly downloaded from Oracle.com\n> \n> \n> \n> Currently JMeter <=3.3 was not officially supported. Please use Java 8 from\n> Oracle.\n> \n> \n> add headless=true when we use the -n option (or jmeter-server) seems a good\n> idea, Philippe.\n\nYes feasible for jmeter-server but for jmeter with -n, it can only be in documentation.", "id": 200999, "time": "2017-09-20T11:57:56Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-09-20T11:57:56Z", "is_private": false}]