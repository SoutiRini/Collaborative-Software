[{"count": 0, "tags": [], "creator": "msander@ieee.org", "text": "We have a build that creates symlinks to some of the outputs of the build.  Part\nof the initialization for the build is to delete old symlinks from prior builds.\n But if a file that was the target of the symlink is gone for any reason, the\ndeletion of the symlink fails.  The scenario is like:\nrm -rf ~/foo\ncd ~/foo\ntouch a\nln -s a b\nln -s x c\n\nNote that file x does not exist.  If I use ant <symlink> or <delete> task to try\nto delete /foo/b and /foo/c, the /foo/c symlink cannot be deleted.  I have to\nuse <exec> with rm -f to do the deletion.  I have a testcase that shows all the\ncombinations of attributes that I tried on these ant tasks and will be glad to\nsend it in.", "id": 97607, "time": "2007-01-03T16:38:55Z", "bug_id": 41285, "creation_time": "2007-01-03T16:38:55Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "mbenson@apache.org", "text": "Send it!", "id": 97645, "time": "2007-01-04T09:03:01Z", "bug_id": 41285, "creation_time": "2007-01-04T09:03:01Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "msander@ieee.org", "attachment_id": 19356, "id": 97659, "time": "2007-01-04T14:27:08Z", "bug_id": 41285, "creation_time": "2007-01-04T14:27:08Z", "is_private": false, "text": "Created attachment 19356\nant script that exhibits the  bug. A driver for it is delete.sh."}, {"count": 3, "tags": [], "bug_id": 41285, "attachment_id": 19360, "text": "Created attachment 19360\ndriver for delete.xml\n\nthe two files, delete.sh and delete.xml, show the bug.\tMake your current\nworking directory the one that contains the two files.\tSetup your environment\nso ant is in your path and other EV's necessary for ant are set.  Run\n./delete.sh.  You can adjust the output by adjusting the arguments to ant in\nthe loop.", "id": 97663, "time": "2007-01-04T14:31:37Z", "creator": "msander@ieee.org", "creation_time": "2007-01-04T14:31:37Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 41285, "attachment_id": null, "text": "The reason for this (and a number of other\nbugs with symbolic links) is that java\ndoes not understand symbolic links (or rather\nthe symbolic link information is not given\nto the java user).\nSee: \nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4956115\n(File.exists() reports false for symbolic links to nonexistent files)\nstate:   \t Closed, not a bug\nAnd the evalulation:\n\"\"\"This is not a bug.  In the absence of an API which exposes symbolic links in\nall their glory we don't have any choice but to treat a dangling symbolic link\nas a nonexistent file.\"\"\"\n\nThere is a FRE http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4313887\n(which closes 35 other bugs)\nwhich asks talks about an extended api with support\nfor symbolic links - currently slated for java 1.7.", "id": 97706, "time": "2007-01-05T14:16:58Z", "creator": "peterreilly@apache.org", "creation_time": "2007-01-05T14:16:58Z", "is_private": false}, {"count": 5, "tags": [], "creator": "alexeys@inventigo.com", "attachment_id": null, "id": 97707, "time": "2007-01-05T14:20:18Z", "bug_id": 41285, "creation_time": "2007-01-05T14:20:18Z", "is_private": false, "text": "But directory listing should show the link."}, {"text": "Thats a clever idea, it made be possible to have\nthis knowledge in resources?\n\n", "tags": [], "bug_id": 41285, "attachment_id": null, "count": 6, "id": 97708, "time": "2007-01-05T14:38:18Z", "creator": "peterreilly@apache.org", "creation_time": "2007-01-05T14:38:18Z", "is_private": false}, {"count": 7, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "id": 97709, "time": "2007-01-05T14:48:53Z", "bug_id": 41285, "creation_time": "2007-01-05T14:48:53Z", "is_private": false, "text": "(In reply to comment #6)\n> Thats a clever idea, it made be possible to have\n> this knowledge in resources?\n> \n> \nMaybe, using canonical junk... :|\n"}, {"text": "(In reply to comment #4)\n> The reason for this (and a number of other\n> bugs with symbolic links) is that java\n> does not understand symbolic links (or rather\n> the symbolic link information is not given\n> to the java user).\n> See: \n> http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4956115\n> (File.exists() reports false for symbolic links to nonexistent files)\n> state:   \t Closed, not a bug\n> And the evalulation:\n> \"\"\"This is not a bug.  In the absence of an API which exposes symbolic links in\n> all their glory we don't have any choice but to treat a dangling symbolic link\n> as a nonexistent file.\"\"\"\n> \n> There is a FRE http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4313887\n> (which closes 35 other bugs)\n> which asks talks about an extended api with support\n> for symbolic links - currently slated for java 1.7.\n\nYes, I knew about the java limitation.  Surprising, isn't it, coming from Sun. \nAnyway,  I suspect that anyone who tries to use symlink delete or delete file\nwould expect that the symlink in question would be gone after running of the\ntask, regardless of whether the link or its target exists already, and\nregardless of whether java thinks it exists.  Certainly that's what I would\nexpect.  \nLooking at other bug reports about symlinks, I see that much trouble has been\ntaken to make sure that if you delete a \"good\" symlink, the target is not\ndeleted, only the link itself.  So I think it should be possible to fix this\nwithout waiting for the new java RFE to be delivered.", "tags": [], "bug_id": 41285, "attachment_id": null, "count": 8, "id": 97711, "time": "2007-01-05T17:14:29Z", "creator": "msander@ieee.org", "creation_time": "2007-01-05T17:14:29Z", "is_private": false}, {"count": 9, "tags": [], "creator": "bodewig@apache.org", "text": "at least in part related to bug 45743", "id": 120347, "time": "2008-09-04T06:06:35Z", "bug_id": 41285, "creation_time": "2008-09-04T06:06:35Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 41285, "text": "<symlink action=\"delete\" .../> should work with svn revision 692047", "id": 120359, "time": "2008-09-04T07:28:25Z", "creator": "bodewig@apache.org", "creation_time": "2008-09-04T07:28:25Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 41285, "attachment_id": null, "text": "<delete> should be fixed with svn revision 693071", "id": 120449, "time": "2008-09-08T05:24:28Z", "creator": "bodewig@apache.org", "creation_time": "2008-09-08T05:24:28Z", "is_private": false}, {"count": 12, "tags": [], "text": "svn revision 693081 fixes a bug I introduced with 692047", "attachment_id": null, "id": 120451, "creator": "bodewig@apache.org", "time": "2008-09-08T05:45:41Z", "bug_id": 41285, "creation_time": "2008-09-08T05:45:41Z", "is_private": false}]