[{"count": 0, "tags": [], "bug_id": 51414, "attachment_id": null, "id": 147356, "time": "2011-06-22T10:12:16Z", "creator": "adarsh.tm126@gmail.com", "creation_time": "2011-06-22T10:12:16Z", "is_private": false, "text": "I am using Apache Tomcat 7.0 (7.0.14 version) server. I have a requirement such that once i make a HTTP request, and get back the response, i want to keep that connection alive indefinitely or till the connection timeout happens. But, the connection gets closed soon after response is sent.\nI believe this a bug. \n\nThis is the Connector tag configuration i have done in my server.xml:\n<Connector port=\"80\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\" connectionTimeout=\"200000\" redirectPort=\"8443\" />\n\nConnection doesn't timeout after 200 seconds are elapsed...if i get response after 5 secs from the time i made the request.....TCP connection is closed soon after sending response.\n\n\nIf not, what is the configuration i need to make on the server side. By default, client uses HTTP/1.1 protocol version to make HTTP requests. I know that in HTTP/1.1, the Connection is kept alive by default. I am testing this setup on localhost."}, {"count": 1, "text": "I have tested with below 2 connector configurations too....The issue is the same.\n\n<Connector port=\"80\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n\t\t\t\tconnectionTimeout=\"3600000\"\t\n\t\t\t\tkeepAliveTimeout=\"3600000\" \n\t\t\t\tredirectPort=\"8443\" />\n\n\n\nEven for,\n\n<Connector port=\"80\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\" socket.soKeepAlive=\"true\" socket.soTimeout=\"3600000\" maxKeepAliveRequests=\"-1\" redirectPort=\"8443\" />", "bug_id": 51414, "is_private": false, "id": 147357, "time": "2011-06-22T11:20:17Z", "creator": "adarsh.tm126@gmail.com", "creation_time": "2011-06-22T11:20:17Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 51414, "text": "This works for me.\n\nYou need to continue to use the users list to debug what is almost certainly configuration error.", "id": 147360, "time": "2011-06-22T13:46:12Z", "creator": "markt@apache.org", "creation_time": "2011-06-22T13:46:12Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 51414, "text": "I will be reopening the issue. Because i am not able to figure out what is internally happening inside the server. In the entire Apache Tomcat 7.0 server files, the only change i have done is in the server.xml and that to changing the below mentioned line.... If there is any configuration error in this please guide me. \n\n<Connector port=\"80\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n                connectionTimeout=\"3600000\"    \n                keepAliveTimeout=\"3600000\" \n                redirectPort=\"8443\" />\n\nCan you please reconfirm the error is something else. I will be sharing the same with users list too. Someone has to pinpoint from the developers list that i am wrong. At the same time, i have already shared this issue...they simply point me to Connector common attributes page..asking me to look and at it..But, i have read all those stuff lot more times. Please guide me in right direction.\n\nAppreciate any positive reply.", "id": 147368, "time": "2011-06-22T17:55:08Z", "creator": "adarsh.tm126@gmail.com", "creation_time": "2011-06-22T17:55:08Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Again, use the users list.", "id": 147369, "time": "2011-06-22T17:56:51Z", "bug_id": 51414, "creation_time": "2011-06-22T17:56:51Z", "attachment_id": null}]