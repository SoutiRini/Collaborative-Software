[{"count": 0, "tags": [], "bug_id": 7867, "attachment_id": null, "id": 13090, "time": "2002-04-09T13:42:17Z", "creator": "jgilbert@liv.ac.uk", "creation_time": "2002-04-09T13:42:17Z", "is_private": false, "text": "trying to compile Apache 2.0.35 under Solaris 2.8, with:\n./configure --prefix=/INFO/localinfo1/WWW/Apache2/Port83 --with-port=83 \n--enable-modules=most --enable-modules-shared=max --enable-ssl --enable-dav \n--enable-info --enable-cgi --enable-so\n\nmake clean, then make, and I keep getting this error:\n/bin/sh /INFO/localinfo1/WWW/Apache2/httpd-2.0.35/srclib/apr/libtool --silent --\nmode=compile gcc   -O2 -DHAVE_CONFIG_H -DSOLARIS2=8 -D_POSIX_PTHREAD_SEMANTICS -\nD_REENTRANT   -I../../include -I../../include/arch/unix  -c procsup.c && touch \nprocsup.lo\n/bin/sh /INFO/localinfo1/WWW/Apache2/httpd-2.0.35/srclib/apr/libtool --silent --\nmode=compile gcc   -O2 -DHAVE_CONFIG_H -DSOLARIS2=8 -D_POSIX_PTHREAD_SEMANTICS -\nD_REENTRANT   -I../../include -I../../include/arch/unix  -c thread.c && touch \nthread.lo\nthread.c: In function `apr_threadattr_detach_get':\nthread.c:115: too few arguments to function `pthread_attr_getdetachstate'\nmake[4]: *** [thread.lo] Error 1\nmake[4]: Leaving directory `/INFO/localinfo1/WWW/Apache2/httpd-\n2.0.35/srclib/apr/threadproc/unix'"}, {"count": 1, "tags": [], "bug_id": 7867, "attachment_id": null, "id": 13157, "time": "2002-04-10T08:34:28Z", "creator": "jgilbert@liv.ac.uk", "creation_time": "2002-04-10T08:34:28Z", "is_private": false, "text": "Extra details form the configure script after more fiddling:Checking for \nThreads...\n\nchecking for pthread.h... yes\nchecking for pthreads_cflags...\nchecking for pthreads_lib... pthread\nchecking for pthread.h... (cached) yes\nchecking whether pthread_getspecific takes two arguments... yes\nchecking whether pthread_attr_getdetachstate takes one argument... yes\n\nSo configure thinks the function takes only one argument, but when it comes to \ncompile time, it complains about only having one argument, as line 115 \nin /srclib/apr/threadproc/unix/thread.c is:\n    state = pthread_attr_getdetachstate(attr->attr);"}, {"count": 2, "tags": [], "bug_id": 7867, "attachment_id": null, "id": 13257, "time": "2002-04-11T16:01:31Z", "creator": "trawick@apache.org", "creation_time": "2002-04-11T16:01:31Z", "is_private": false, "text": "Please post the section from srclib/apr/config.log that covers the check for\npthread_attr_getdetachstate().  Here is what it looks like on my Solaris 8\nsystem:\n\nconfigure:7415: checking whether pthread_attr_getdetachstate takes one argument\nconfigure:7433: gcc -c -g -O2 -DSOLARIS2=8 -D_POSIX_PTHREAD_SEMANTICS -\nD_REENTRANT conftest.c 1>&5\nconfigure: In function `main':\nconfigure:7428: too few arguments to function `pthread_attr_getdetachstate'\nconfigure: failed program was:\n#line 7421 \"configure\"\n#include \"confdefs.h\"\n\n#include <pthread.h>\n\nint main() {\n\npthread_attr_t *attr;\npthread_attr_getdetachstate(attr);\n\n; return 0; }\n\nThanks!\n"}, {"count": 3, "tags": [], "text": "configure:7415: checking whether pthread_attr_getdetachstate takes one argument\nconfigure:7433: /apps5/pdtools/bin/gcc -c  -DSOLARIS2=8 -D_POSIX_PTHREAD_SEMANTI\nCS -D_REENTRANT conftest.c 1>&5\nconfigure: In function `main':\nconfigure:7428: too few arguments to function `pthread_attr_getdetachstate'\nconfigure:7462: checking for pthread_key_delete\nconfigure:7490: /apps5/pdtools/bin/gcc -o conftest  -DSOLARIS2=8 -D_POSIX_PTHREA\nD_SEMANTICS -D_REENTRANT  conftest.c -lm -lsocket -lnsl -lresolv  -lpthread 1>&5\nconfigure:7462: checking for pthread_rwlock_init\n\nThat's all there is.\n", "attachment_id": null, "id": 13330, "creator": "jgilbert@liv.ac.uk", "time": "2002-04-12T08:13:43Z", "bug_id": 7867, "creation_time": "2002-04-12T08:13:43Z", "is_private": false}, {"count": 4, "tags": [], "text": "Hrm, after doing a make clean and manually removing config.cache and explicitly \nsetting $CC=\"\" a configure and make has now worked with no problems.\n\nI assume that before configure and make were picking up different versions of \ngcc somehow. I'm not entirely sure how, but I'll see if I can reproduce it at \nall.\n\nI've dropped the severity down since it appears to be \"just one of those \nthings\" effectively.\n\n", "attachment_id": null, "id": 13334, "creator": "jgilbert@liv.ac.uk", "time": "2002-04-12T09:05:18Z", "bug_id": 7867, "creation_time": "2002-04-12T09:05:18Z", "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 7867, "text": "For now we'll have to assume there was a setup problem on your system\n(CC, PATH, or whatever).  If you can figure out how to reproduce the \nproblem and it doesn't appear to be a setup problem, reopen the bug.\n\nBy the way...   running \"make distclean\" after a successful configure will \nget you back to the state where the tarball was freshly unpacked.  As you \napparently discovered, doing a configure with some settings not quite \nright can occasionally result in a lot of pain until you figure out how to get \nback to a clean starting point.\n", "id": 13380, "time": "2002-04-12T15:07:35Z", "creator": "trawick@apache.org", "creation_time": "2002-04-12T15:07:35Z", "tags": [], "is_private": false}]