[{"count": 0, "tags": [], "creator": "wdu@ebay.com", "is_private": false, "text": "I construct my own GUI to run testcases written by ant scripts\nI hope to redirect the output to textarea at the beginning of run and \nredirect the output back to console at the end of the run.\nThose echo message and log message can be print in textarea easily but \nthe output of sshexec can't be print in textarea.\nMy related codes are as below:\n\n\tclass FilteredStream extends FilterOutputStream {\n\t    public FilteredStream(OutputStream aStream) {\n\t\t  \tsuper(aStream);\n\t\t}\n\t\t\n\t\tpublic void write(byte b[]) throws IOException {\n\t\t   String aString = new String(b);\n\t\t   postInfo(aString);\n\t\t}\n\n\t\tpublic void write(byte b[], int off, int len) throws \nIOException {\n\t\t   String aString = new String(b , off , len);\n\t\t   postInfo(aString);\n\t\t}\n\t}\n\n\tprivate void postInfo(String message) {\n\t\ttaskOutput.append(message);\n\t\t//eBARTMainPanel.getResultTextPane().append(message);\n\t\tif(\"\\r\\n\".equals(message)||\"\\n\".equals(message))\n\t\t\treturn;\n\t\telse \n\t\t\t_log.info(message.replaceAll(\"\\n\",\"\"));\n\t}\n\t\n\tprivate void redirectOutputToTextArea(){\n\t\tPrintStream out  = \n\t\t   new PrintStream(\n\t\t\t new FilteredStream(\n\t\t\t   new ByteArrayOutputStream()));\n\t\tdefaultPrintStream = System.out;\n\t\tSystem.setOut(out);\n\t\tSystem.setErr(out);\t\n\t}\n\t\n\tprivate void redirectOutputToConsole(){\n\t\tSystem.setOut(defaultPrintStream);\n\t\tSystem.setErr(defaultPrintStream);\n\t}\n\nTherefore, I debug into the source code of ant.\nIn class org.apache.tools.ant.taskdefs.optional.ssh.SSHExec\nline 136: \nTeeOutputStream tee = new TeeOutputStream(out, new KeepAliveOutputStream\n(System.out));\n\nand in class org.apache.tools.ant.util.KeepAliveOutputStream\nit extends class java.io.FilterOutputStream but didn't implement method such \nas write(byte[] b) and write(byte[] b, int off, int len)\n\nI believe that's why the sshexec output can't be written to the textarea.\nThanks,\n\n-Nicholas", "id": 96785, "time": "2006-12-12T00:13:39Z", "bug_id": 41155, "creation_time": "2006-12-12T00:13:39Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of 41154 ***", "attachment_id": null, "id": 96788, "creator": "jan@materne.de", "time": "2006-12-12T02:31:11Z", "bug_id": 41155, "creation_time": "2006-12-12T02:31:11Z", "is_private": false}]