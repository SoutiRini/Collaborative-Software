[{"count": 0, "tags": [], "bug_id": 25398, "attachment_id": null, "text": "[ I'm sure someone has already pointed out this problem, but I couldn't\n  find a defect report when I queried bugzilla, so here's mine. ]\n\nThe macrodef task doesn't work because attribute values (both default\nvalues and passed in values) are not getting set.  This worked in\n1.6beta2, but seems to be broken in 1.6beta3.  Here's a build file\nthat demonstrates the problem:\n\n===============================================\n<?xml version=\"1.0\"?>\n\n<project name=\"macrodef-bug\" default=\"show-bug\">\n\n  <macrodef name=\"my-macro\">\n    <attribute name=\"arg1\"/>\n    <attribute name=\"arg2\" default=\"arg2-default-value\"/>\n    <sequential>\n      <echo message=\"Macrodef arg1 value: ${arg1}\"/>\n      <echo message=\"Macrodef arg2 value: ${arg2}\"/>\n    </sequential>\n  </macrodef>\n\n  <target name=\"show-bug\">\n    <my-macro arg1=\"my-arg1-value\"/>\n  </target>\n\n</project>\n=========================================\n\nAnd here's what happens when you run Ant.  As you can see,\nthe macrodef argument values are not getting set.\n\nH:\\temp>ant -version\nApache Ant version 1.6beta3 compiled on December 5 2003\nH:\\temp>ant\nBuildfile: build.xml\n\nshow-bug:\n     [echo] Macrodef arg1 value: ${arg1}\n     [echo] Macrodef arg2 value: ${arg2}\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds", "id": 48805, "time": "2003-12-10T13:53:07Z", "creator": "jmlennon@us.ibm.com", "creation_time": "2003-12-10T13:53:07Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 25398, "text": "The notation for attributes has changed in ant 1.6beta3 from ${x} to @{x}\n(after a protracted discussion on ant-dev).\nSee:\nhttp://ant.apache.org/manual-1.6beta/index.html \nThe macro should now be:\n <macrodef name=\"my-macro\">\n    <attribute name=\"arg1\"/>\n    <attribute name=\"arg2\" default=\"arg2-default-value\"/>\n    <sequential>\n      <echo message=\"Macrodef arg1 value: @{arg1}\"/>\n      <echo message=\"Macrodef arg2 value: @{arg2}\"/>\n    </sequential>\n  </macrodef>\n\n", "id": 48806, "time": "2003-12-10T13:59:31Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-12-10T13:59:31Z", "tags": [], "is_private": false}]