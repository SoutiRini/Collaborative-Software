[{"count": 0, "attachment_id": null, "bug_id": 41308, "is_private": false, "id": 97713, "time": "2007-01-06T03:42:32Z", "creator": "vangli@online.no", "creation_time": "2007-01-06T03:42:32Z", "tags": [], "text": "When I tried to build httpd 2.2.3 on a freshly installed Fedora Core 6 64-bit\nplattform it didn't compile. I got the following error from the linker:\n\n/usr/lib/libexpat.so: could not read symbols: File in wrong format\n\nMy environment has the following settings:\n\nCFLAGS=\"-march=opteron\"\nCXXFLAGS=\"-march=opteron\"\nLDFLAGS=\"-L/usr/lib64 -L/lib64\"\nexport CFLAGS CXXFLAGS LDFLAGS\n\n./configure  --prefix=/usr             \\\n             --enable-mods-shared=all  \\\n             --libdir=/usr/lib64       \\\n             --enable-proxy            \\\n             --enable-proxy-connect    \\\n             --enable-proxy-ftp        \\\n             --enable-proxy-http       \\\n             --enable-rewrite          \\\n             --disable-dbd\n\nA search for the expat libraries shows that the correct ones exist, though in\n/usr/lib64 (not /usr/lib).\n\nThe manual workaround is to edit the generated Makefile in ./srclib/apr-util\nfrom the above configuration. Just search for the definition of the constant\nAPRUTIL_LIBS and change \"/usr/lib/libexpat.la\" to \"/usr/lib64/libexpat.la\".\n\nThen you may run make as normally form your surce code root.\n\nIt seems plausible that this error is not a bug in the source code. It almost\ncertainly is a configuration bug on at least 64-bit FC6, which, imho, should be\nhandled in the configuration script, either as a fix or a new configuration\nvariable.\n\nWith very best regards\n\nBent Vangli, Oslo, Norway"}, {"id": 97724, "tags": [], "bug_id": 41308, "is_private": false, "count": 1, "text": "Confirmed. This happens if on a 64 bit system a 64 bit build is attempted and a\n32 bit expat library is installed system wide in /usr/lib. This is caused by the\nself defined autoconf macro APU_TEST_EXPAT which is defined in apu-conf.m4. It\nsearches the lib path first before checking the lib64 path. I guess it should\ncross check if the library found under lib does really link and if not it should\ncontinue with the lib64 path if appropriate.", "time": "2007-01-06T13:40:32Z", "creator": "rpluem@apache.org", "creation_time": "2007-01-06T13:40:32Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 97751, "time": "2007-01-07T09:32:42Z", "bug_id": 41308, "creation_time": "2007-01-07T09:32:42Z", "is_private": false, "text": "Yeah, \"rpm --erase expat-devel.i386\" still recommended workaround.  Patch posted\non dev@ a while back which just needs some more testing before commit.\n\n*** This bug has been marked as a duplicate of 28205 ***"}]