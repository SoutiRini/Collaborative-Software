[{"count": 0, "tags": [], "bug_id": 67, "is_private": false, "id": 48, "attachment_id": null, "creator": "tomlap@elsis.com", "creation_time": "2001-01-26T08:06:33Z", "time": "2001-01-26T08:06:33Z", "text": "I send XML content to the server, and expect servlet to read this stream. While \nI'm sure that nobody reads this data, still I cannot get this stream myself.\nNote: I'm not sure if thereis another TomCat version which is this bug(?) free.\n\n[Code which generates XML. I run this on IE5.5]\n<html><head>\n<script language=\"JScript\">\n  function PostOrder(xmldoc)\n  {\n    var xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n    xmlhttp.Open(\"POST\", \"http://localhost:8080/pr/clientService.srv\", false);\n    xmlhttp.Send(xmldoc.XMLDocument);\n    alert( xmlhttp.responseXML.xml);\n  }\n</script>\n</head>\n<XML ID=\"testXML\" src=\"client.xml\"/>\n<body>\n<form >\nParameter<textarea rows=\"10\" cols=\"80\" name=\"parameter\">\n<userInformation id='ui1'>\n</textarea><br/>\n<input type=\"button\" onclick=\"javascript:PostOrder(testXML)\" \nvalue=\"submit\"/><br/>\n</form>\n</body></html>\n[Please note!!!!!!!!!!]\n[This xml.html file lacks client.xml - for this take any xml file]\n\n[Code which serves the request (and does not get this f5g XML)]\nimport java.io.*;\nimport java.text.*;\nimport java.util.*;\nimport javax.servlet.*;\nimport javax.servlet.http.*;\n\npublic class Server extends HttpServlet {\n\n    public void service(HttpServletRequest request,\n                        HttpServletResponse response)\n        throws IOException, ServletException\n    {\n        response.setContentType(\"text/xml\");\n        PrintWriter out = response.getWriter();\n        out.println(\"<?xml version=\\\"1.0\\\"?>\");\n        out.println(\"<io>\");\n   char[] buf = new char[1024];\n   Reader in = request.getReader();\n   System.out.print(in.getClass());\n   int i=0;\n   //while((i=in.read(buf))>0) out.write( buf, 0, i );\n   out.println(\"<![CDATA[\");\n   for(;in.ready();i++)System.out.print(in.read());\n   out.println(\"]]>\");\n   out.write(\"symbols printed \"+i);\n        out.println(\"</io>\");\n    }\n}\n[am I wrong with request.getReader() or is it bug?]"}, {"count": 1, "text": "[This thing works! (Sorry for misuse of in.available()]\nimport java.io.*;\nimport java.text.*;\nimport java.util.*;\nimport javax.servlet.*;\nimport javax.servlet.http.*;\n\npublic class Server extends HttpServlet {\n\n    public void service(HttpServletRequest request,\n                        HttpServletResponse response)\n        throws IOException, ServletException\n    {\n        response.setContentType(\"text/xml\");\n        PrintWriter out = response.getWriter();\n        out.println(\"<?xml version=\\\"1.0\\\"?>\");\n        out.println(\"<io>\");\n   char[] buf = new char[1024];\n   Reader in = request.getReader();\n        int len=request.getContentLength();\n   System.out.print(in.getClass()+\" \"+len+\" \"+request.getQueryString());\n   int i=0;\n   //while((i=in.read(buf))>0) out.write( buf, 0, i );\n   out.println(\"<![CDATA[\");\n   for(;i<len;i++)System.out.write(in.read());\n   out.println(\"]]>\");\n   out.write(\"symbols printed \"+i);\n        out.println(\"</io>\");\n    }\n}\n", "bug_id": 67, "is_private": false, "id": 51, "time": "2001-01-26T11:53:31Z", "creator": "tomlap@elsis.com", "creation_time": "2001-01-26T11:53:31Z", "tags": [], "attachment_id": null}]