[{"count": 0, "tags": [], "bug_id": 38409, "is_private": false, "id": 85078, "creation_time": "2006-01-27T01:12:04Z", "time": "2006-01-27T01:12:04Z", "creator": "kiyolee@hotmail.com", "text": "The sample code below can be compiled alright with gcc (3.4.5) while cannot be\ncompiled with g++ (3.4.5). The structure initializer is causing problem for g++.\nNotice on the same machine with the same toolchain where I develop my apache\nmodule, apache 2.0 was built *WITHOUT* AP_HAVE_DESIGNATED_INITIALIZER whereas\napache 2.2 was built *WITH* AP_HAVE_DESIGNATED_INITIALIZER. Both cases were auto\ndetected by configure I suppose. That's why I didn't notice the problem with\napache 2.0.\n\nSample code:\n---------------------------------------------------------------------\n#ifndef __cplusplus\n#define _LARGEFILE64_SOURCE\n#include <sys/types.h>\n#endif\n\n#include \"httpd.h\"\n#include \"http_config.h\"\n\n#if defined(AP_HAVE_DESIGNATED_INITIALIZER)\n#define CAST_CMD_FUNC(f) f\n#else\n#define CAST_CMD_FUNC(f) (cmd_func)f\n#endif\n\nstatic const char*\ntest_cmd\n(\n   cmd_parms* cmd,\n   void* dummy,\n   const char* w\n)\n{\n   return NULL;\n}\n\nstatic const command_rec cmds[] =\n   {\n      AP_INIT_TAKE1(\n         \"Test\",\n         CAST_CMD_FUNC(test_cmd), NULL, RSRC_CONF,\n         \"Test\"),\n   };\n---------------------------------------------------------------------", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 38409, "text": "We know about this one, and it's fixed in svn for 2.2.1. \nhttp://svn.apache.org/viewcvs.cgi?rev=373005&view=rev ", "id": 85137, "time": "2006-01-27T23:26:37Z", "creator": "nick@webthing.com", "creation_time": "2006-01-27T23:26:37Z", "is_private": false, "attachment_id": null}]