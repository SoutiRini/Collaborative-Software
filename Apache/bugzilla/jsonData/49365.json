[{"count": 0, "tags": [], "bug_id": 49365, "is_private": false, "text": "Created attachment 25502\nRelative paths for results file\n\nIn the View Results tree GUI component we can enter a filename for the results of our script. Unfortunately if we enter a relative path, this is interpreted as relative to the jmeter/bin folder.\n\nA more intuitive approach would load it relative to the same folder as the script that we are running.\n\nI have attached a patch for this RFE. See also: bug43389\n\nRegards", "id": 137234, "time": "2010-05-31T08:55:12Z", "creator": "moreira@privasphere.com", "creation_time": "2010-05-31T08:55:12Z", "attachment_id": 25502}, {"count": 1, "tags": [], "bug_id": 49365, "text": "The version of JMeter I used was taken from SVN revision: 946591", "id": 137235, "time": "2010-05-31T09:06:24Z", "creator": "moreira@privasphere.com", "creation_time": "2010-05-31T09:06:24Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "moreira@privasphere.com", "attachment_id": 25503, "id": 137236, "time": "2010-05-31T10:00:44Z", "bug_id": 49365, "creation_time": "2010-05-31T10:00:44Z", "is_private": false, "text": "Created attachment 25503\nAdded a minor correction to the log output"}, {"attachment_id": null, "tags": [], "bug_id": 49365, "is_private": false, "count": 3, "id": 137249, "time": "2010-06-01T11:47:19Z", "creator": "sebb@apache.org", "creation_time": "2010-06-01T11:47:19Z", "text": "(In reply to comment #0)\n\n> In the View Results tree GUI component we can enter a filename for the results\n> of our script. Unfortunately if we enter a relative path, this is interpreted\n> as relative to the jmeter/bin folder.\n\nActually it is relative to the JMeter launch directory.\nThis defaults to the jmeter/bin directory, but can be anywhere else."}, {"count": 4, "tags": [], "bug_id": 49365, "attachment_id": null, "text": "Hello Sebb and thx for the reply :)\n\nYes I agree with you that currently the path is relative to the launch directory and not necessarily jmeter/bin. But as I mentioned in bug43389 if I am working on different scripts I have to start JMeter every time I change scripts to change the launch directory.\n\nWhen using source control systems, files are organized in a structured way relative to the scripts rather than the jmeter launch directory. This is why I still believe that paths should be relative to the scripts.", "id": 137271, "time": "2010-06-02T10:25:33Z", "creator": "moreira@privasphere.com", "creation_time": "2010-06-02T10:25:33Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "sebb@apache.org", "text": "The patch changes the behaviour of JMeter in an incompatible way, so cannot be applied as it stands.\n\nThere needs to be some way for the user to select whether the filename is relative to the launch directory or to the script file. One way to do this would be to make the new behaviour dependent on a property, which defaults to false.", "count": 5, "id": 137279, "time": "2010-06-02T11:54:18Z", "bug_id": 49365, "creation_time": "2010-06-02T11:54:18Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 49365, "text": "This idea sounds good. Is there a class in jmeter that deals with jmeter properties specifically, or can I use standard java code such as:\n\nProperties props = new Properties();\nprops.load(new FileInputStream(\"jmeter.properties\"));\nrelativePath = props.getProperty(\"relative.path\");", "id": 139434, "time": "2010-08-25T05:51:33Z", "creator": "moreira@privasphere.com", "creation_time": "2010-08-25T05:51:33Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 49365, "attachment_id": null, "text": "Have a look at JMeterUtils", "id": 139475, "time": "2010-08-25T17:21:11Z", "creator": "sebb@apache.org", "creation_time": "2010-08-25T17:21:11Z", "is_private": false}, {"attachment_id": 25947, "tags": [], "creator": "moreira@privasphere.com", "text": "Created attachment 25947\nNew patch using a jmeter property\n\nThis patch allows result files to be loaded and written with a path relative to the script or launch directory. The behavior is controlled by a property set in the jmeter.properties.", "count": 8, "id": 139488, "time": "2010-08-26T03:34:50Z", "bug_id": 49365, "creation_time": "2010-08-26T03:34:50Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 49365, "is_private": false, "text": "Thx for the tip Sebb.\n\nI have set the property name (PATH_RELATIVE_TO) in the ResultCollector class, but I believe this can probably be used in other classes. Maybe it is better if it is placed elsewhere. Additionally it looks to me like the name I used for the property may not follow the jmeter name conventions. Maybe something like jmeter.path.relative.to is more convenient? I leave this up to you to decide.", "id": 139489, "time": "2010-08-26T03:39:09Z", "creator": "moreira@privasphere.com", "creation_time": "2010-08-26T03:39:09Z", "attachment_id": null}, {"count": 10, "tags": [], "text": "ResultCollector is probably OK, as most files written by JMeter will be created by that class. Can't think of any other files created by JMeter (apart from jmeter.log, which is opened before the JMX file location is known).\n\nI hope to take a look at including the patch next week.", "is_private": false, "id": 139492, "creator": "sebb@apache.org", "time": "2010-08-26T06:28:44Z", "bug_id": 49365, "creation_time": "2010-08-26T06:28:44Z", "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 49365, "text": "Any reason for not including this one? I may have a bit of time next week to work on it if anything else is missing.", "id": 140924, "time": "2010-10-22T08:49:33Z", "creator": "moreira@privasphere.com", "creation_time": "2010-10-22T08:49:33Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 49365, "is_private": false, "id": 140927, "attachment_id": null, "creator": "sebb@apache.org", "creation_time": "2010-10-22T09:52:58Z", "time": "2010-10-22T09:52:58Z", "text": "I now think the simplest might be to support a file name prefix that means \"relative to the JMX file\", for example \"!/\" or perhaps \"~/\".\n\nSo \"!/output.jtl\" would be relative to the JMX location.\n\nJust in case someone needs to create a file in a directory with the name \"~\" or \"!\", the prefix could be overriden at startup using a JMeter property.\n\nOne way to do this would be to add a file name normalisation method to FileServer, which one would need to call anyway to get the base location."}, {"attachment_id": null, "tags": [], "creator": "sebb@apache.org", "text": "URL: http://svn.apache.org/viewvc?rev=1028515&view=rev\nLog:\nBug 49365 - Allow result set to be written to file in a path relative to the loaded script\n\nModified:\n   jakarta/jmeter/trunk/bin/examples/CSVSample.jmx\n   jakarta/jmeter/trunk/bin/jmeter.properties\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/reporters/ResultCollector.java\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/reporters/ResultSaver.java\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/services/FileServer.java\n   jakarta/jmeter/trunk/xdocs/changes.xml\n   jakarta/jmeter/trunk/xdocs/usermanual/component_reference.xml\n   jakarta/jmeter/trunk/xdocs/usermanual/listeners.xml", "count": 13, "id": 141135, "time": "2010-10-28T18:02:41Z", "bug_id": 49365, "creation_time": "2010-10-28T18:02:41Z", "is_private": false}]