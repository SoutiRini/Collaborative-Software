[{"count": 0, "tags": [], "bug_id": 30774, "text": "I need to run the Apache/Tomcat link using AJP on port 41503, using mod_jk2.so.\n\nUsing the following configuration:\n\n# workers2.properties\n#\n[shm]\nfile=${serverRoot}/logs/shm.file\nsize=1048576\n\n# define the worker\n[status:status]\n\n[channel.socket:localhost:41503]\nhost=localhost\nport=41503\n\n[ajp13:localhost:41503]\nchannel=channel.socket:localhost:41503\n\n# Uri mapping\n[uri:/jkstatus/*]\nworker=status:status\n[uri:/servlet/*]\nworker=ajp13:localhost:41503\n\n\nI've also tried several variations of the above.\n\n\n# jk2.properties\n# Override the default port for the socketChannel\nchannelSocket.port=41503\n\n\nThe /jkstatus page works as expected, and looks ok:\n\nid \tname \thost\turi\tgroup\tcontext\n0\t\t\tnull\tnull\tnull\n0\t/jkstatus/* \t*\t/jkstatus/*\tstatus:status\t/\n0\t/servlet/* \t*\t/servlet/*\tajp13:localhost:41503\t/\n0\t* \t*\tnull\tnull\tnull\n0\t*/ \t*\t/\tlb:lb\t/\n\nObject name\tProperty\tValue\nconfig:\tfile\t${serverRoot}/conf/workers2.properties\nshm:\tfile\t${serverRoot}/logs/shm.file\nsize\t1048576\najp13:localhost:41503\tchannel\tchannel.socket:localhost:41503\nchannel.socket:localhost:41503\thost\tlocalhost\nport\t41503\nuri:/jkstatus/*\tworker\tstatus:status\nuri:/servlet/*\tworker\tajp13:localhost:41503\n\nName\tValue\nfs\t/\nps\t:\nso\tso\narch\ti386\nserverRoot\t/wispers/opt/apache/ellis/external\nfile\t/wispers/opt/apache/ellis/external/conf/workers2.properties\nshm:.file\t/wispers/opt/apache/ellis/external/logs/shm.file\nshm:.size\t1048576\nchannel.socket:localhost:41503.host\tlocalhost\nchannel.socket:localhost:41503.port\t41503\najp13:localhost:41503.channel\tchannel.socket:localhost:41503\nuri:/jkstatus/*.worker\tstatus:status\nuri:/servlet/*.worker\tajp13:localhost:41503\n\n\nHowever, trying /servlet yields (in Apache's error_log):\n\n[Fri Aug 20 16:03:44 2004] [notice] Apache/2.0.50 (Unix) mod_jk2/2.0.2 DAV/2\nconfigured -- resuming normal operations\n[Fri Aug 20 16:03:44 2004] [error] mod_jk child init 1 0\n[Fri Aug 20 16:03:49 2004] [error] channelSocket.open() connect failed\nlocalhost:8009 146 Connection refused\n[Fri Aug 20 16:03:49 2004] [error] ajp13.connect() failed ajp13:localhost:41503\n[Fri Aug 20 16:03:49 2004] [error] ajp13.service() failed to connect endpoint\nerrno=146 Connection refused\n[Fri Aug 20 16:03:49 2004] [error] ajp13.service() Error  forwarding\najp13:localhost:41503 1 1\n[Fri Aug 20 16:03:49 2004] [error] mod_jk.handler() Error connecting to tomcat\n120000\n\nIt's still trying to connect on port 8009!\n\nI guess everyone else in the world is just using port 8009!", "id": 62240, "time": "2004-08-20T15:25:30Z", "creator": "epritcha@wiley.co.uk", "creation_time": "2004-08-20T15:25:30Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 30774, "is_private": false, "text": "I think the problem is not that you can only use 8009, but ports > 32767 don't \nwork because of bug 17579.  I think this is a duplicate.", "id": 64851, "time": "2004-10-08T23:23:18Z", "creator": "jmorace@jons.net", "creation_time": "2004-10-08T23:23:18Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "yoavs@computer.org", "text": "Yup, I think so too.  Sicne the other one is fixed, this one should be fixed as \nwell: make sure you're using the latest connector version.  As additional \nanecdotal evidence, a number of people in the past few days have posted working \nconnector configurations in ports above 30000.", "id": 66125, "time": "2004-10-29T18:32:25Z", "bug_id": 30774, "creation_time": "2004-10-29T18:32:25Z", "tags": [], "is_private": false}]