[{"count": 0, "tags": [], "creator": "mica@epee.dk", "text": "We have a task that syncronizes some data in our J2EE web applications. During this taks we use the attrib task to set/remove readonly.\n\nThe performance of this has slowed dramatically between Ant 1.7.0 and 1.8.0. Each of our web-applications have about 10 tld-files. In Ant 1.7.0 the complete target is finished in 1-2 seconds. In Ant 1.8.0 the attrib task alone takes about 10 seconds to complete (and slightly less than 20 seconds for the whole target).\n\nExample target:\n\n<target name=\"sync-webapp-tld\">\n\t<attrib readonly=\"false\">\n\t\t<fileset dir=\"${build.src}/WEB-INF\">\n\t\t\t<include name=\"*.tld\" />\n\t\t</fileset>\n\t</attrib>\n\n\t<echo message=\"Do something ...\"/>\n\n\t<attrib readonly=\"true\">\n\t\t<fileset dir=\"${build.src}/WEB-INF\">\n\t\t\t<include name=\"*.tld\" />\n\t\t</fileset>\n\t</attrib>\n</target>", "id": 134458, "time": "2010-02-12T12:56:21Z", "bug_id": 48734, "creation_time": "2010-02-12T12:56:21Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "is_private": false, "id": 134459, "time": "2010-02-12T13:28:03Z", "bug_id": 48734, "creation_time": "2010-02-12T13:28:03Z", "text": "I can confirm there is a major slowdown when compared to Ant 1.7.1 and have added a testcase with svn revision 909397 - running the testPerformance target takes 0 seconds with Ant 1.7.1 and 11 with 1.8.0 on my Windows box."}, {"count": 2, "attachment_id": null, "bug_id": 48734, "text": "things should be slightly better with svn revision 927753 - now half a second per file rather than one second.  Still it is slower than Ant 1.7.1 used to be but it seems there is nothing we can do without sacrificing correctness.\n\nThis is a result of fixing bug 5003.", "id": 135662, "time": "2010-03-26T10:01:12Z", "creator": "bodewig@apache.org", "creation_time": "2010-03-26T10:01:12Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "jchamlin@gmail.com", "attachment_id": null, "text": "Any chance a short-circuit could be added to the attrib command, if the only attribute that is being set is readonly=\"true\" instead of using an exec use java.io.File#setReadOnly() and if it is readonly=\"false\" then use java.io.File#setWriteable()?\n\nThis should dramatically improve the performance over using an exec to the system attribute command one per file.", "id": 154083, "time": "2012-02-23T20:23:01Z", "bug_id": 48734, "creation_time": "2012-02-23T20:23:01Z", "is_private": false}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "with the fix to bug 54128 we are back at 0.2 seconds for testPerformance\n\n*** This bug has been marked as a duplicate of bug 54128 ***", "id": 171870, "time": "2013-12-21T19:53:47Z", "bug_id": 48734, "creation_time": "2013-12-21T19:53:47Z", "is_private": false}]