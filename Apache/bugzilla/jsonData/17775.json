[{"count": 0, "text": "I have notice a perculiar problem with the tomcat server regarding the\ncatalina.policy file.\n\nwhen i start tomcat with -security, i understand i have to edit the\ncatalina.policy file so that application in my webapps directory can be read.\n\nbut for some reason when i use \n\ngrant codeBase \"file:${catalina.home}/webapps/myapp/-\" {\npermission java.io.FilePermission \"${catalina.home}/webapps/myapp/-\",\n\"read,write,delete\";\npermission java.lang.RuntimePermission \"accessClassInPackage.sun.io\";\npermission SocketPermission \"localhost:1024-\", \"listen,connect,resolve\";\n permission java.util.PropertyPermission \"*\", \"read,write\";\n\n}\n\nthis doesn't let me read anything in the \"${catalina.home}/webapps/myapp/\"\ndirectory but it does let me read pages in sub folders of that directory e.g.\n\"${catalina.home}/webapps/myapp/images/\"\n\nso for instance if i goto \n\nhttp://127.0.0.1:8080/myapp/ it will give me the following error\n\n java.security.AccessControlException: access denied (java.io.FilePermission\n/usr/local/jakarta-tomcat-4.1.12/webapps/myapp read)\n\nbut if i change the catalina.policy file so it is like below\n\ngrant codeBase \"file:${catalina.home}/webapps/myapp/-\" {\npermission java.io.FilePermission \"${catalina.home}/webapps/-\", \"read,write,delete\";\npermission java.lang.RuntimePermission \"accessClassInPackage.sun.io\";\npermission SocketPermission \"localhost:1024-\", \"listen,connect,resolve\";\n permission java.util.PropertyPermission \"*\", \"read,write\";\n}\n\nand then goto http://127.0.0.1:8080/myapp/ again the page works!!!!!\n\nbut i think this also mean that the above codeBase can write to any folder in\nthe webapps directory, which is not safe or secure.\n\nI was wondering if this is a bug with your tomcat build or is it a bug with java\nitself inc. policytool gui.", "creator": "vinhta@vinniesoft.co.uk", "attachment_id": null, "id": 32664, "time": "2003-03-07T16:27:29Z", "bug_id": 17775, "creation_time": "2003-03-07T16:27:29Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "glenn@apache.org", "attachment_id": null, "text": "Thanks for reporting this.  I have committed a patch to CVS which\nmakes sure a read FilePermission for the web application directory\nitself is added in addition to a read FilePermission for its contents.\n\nThis fix will be available in the next Tomcat release, 4.1.22.\n\nTo get around this for now you can add a second FilePermission.\n\nYou need two FilePermission's, one for the webapp/myapp directory,\nand one for its contents. Like this:\n\npermission java.io.FilePermission \"${catalina.home}/webapps/myapp\", \"read\";\npermission java.io.FilePermission \"${catalina.home}/webapps/myapp/-\",\n\"read,write,delete\";", "id": 32718, "time": "2003-03-08T14:24:38Z", "bug_id": 17775, "creation_time": "2003-03-08T14:24:38Z", "is_private": false}]