[{"count": 0, "tags": [], "bug_id": 49584, "attachment_id": null, "id": 138360, "time": "2010-07-12T05:15:17Z", "creator": "murphy@ben.name", "creation_time": "2010-07-12T05:15:17Z", "is_private": false, "text": "The borrow connection logic seems to assume that connections will always transition between active to idle. However, if connections move from active to released then a borrower can get stuck in idle.poll even though there is room in the pool for another connection to be created.\n\nThere is also an issue with connection create failing causing the pool size to be incremented but not decremented. In the borrowConnection method the pool size is incremented. However, if an exception occurs in the createConnection method releaseConnection can be called with a null argument and the pool size is not decremented."}, {"count": 1, "tags": [], "bug_id": 49584, "attachment_id": null, "id": 139878, "time": "2010-09-15T07:43:12Z", "creator": "markt@apache.org", "creation_time": "2010-09-15T07:43:12Z", "is_private": false, "text": "(In reply to comment #0)\n> There is also an issue with connection create failing causing the pool size to\n> be incremented but not decremented. In the borrowConnection method the pool\n> size is incremented. However, if an exception occurs in the createConnection\n> method releaseConnection can be called with a null argument and the pool size\n> is not decremented.\n\nI've looked at the code and I can't see a code path where con could be null. I refactored the code to make this clearer.\n\nI'll look at the other issue next."}, {"count": 2, "tags": [], "bug_id": 49584, "text": "Fixed in trunk and will be included in 1.0.9.0 onwards", "id": 139880, "time": "2010-09-15T09:26:22Z", "creator": "markt@apache.org", "creation_time": "2010-09-15T09:26:22Z", "is_private": false, "attachment_id": null}]