[{"count": 0, "tags": [], "creator": "eric.jain@gmail.com", "is_private": false, "text": "sendFileToRemote in org.apache.tools.ant.taskdefs.optional.ssh.ScpToMessage\nseems to set permissions to 0644 -- would be useful if this could be overridden!\nAlso, when using sftp instead of ssh1, could 'chmod' files after transferring them?", "id": 107525, "time": "2007-08-31T01:31:22Z", "bug_id": 43271, "creation_time": "2007-08-31T01:31:22Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 43271, "is_private": false, "id": 111908, "time": "2007-12-19T07:52:54Z", "creator": "odi@odi.ch", "creation_time": "2007-12-19T07:52:54Z", "tags": [], "text": "It would be also very useful to specify the group ownership to create files with."}, {"count": 2, "tags": [], "bug_id": 43271, "attachment_id": null, "is_private": false, "id": 182288, "time": "2015-04-09T13:39:07Z", "creator": "holly.k.cummins@googlemail.com", "creation_time": "2015-04-09T13:39:07Z", "text": "There's a secondary problem, which is that the scp task docs claim that the umask on the remote system is honoured. It would be more helpful if the docs made it clear that the permissions were hardcoded. \n\nI have attached a patch which adds chmod and umask attributes to the scp task, in line with what the ftp task already supports."}, {"count": 3, "tags": [], "creator": "holly.k.cummins@googlemail.com", "text": "Created attachment 32641\nPatch to allow setting optional chmod and umask attributes on scp command", "id": 182291, "time": "2015-04-09T14:02:16Z", "bug_id": 43271, "creation_time": "2015-04-09T14:02:16Z", "is_private": false, "attachment_id": 32641}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "text": "Thanks a lot for the patch, some comments:\n\n* please don't use protected fields.  There are some inside Ant's code base but they are only kept for backwards compatibility reasons.\n\n* usually \"umask\" applies to directories and files.  Your patch uses \"umask\" for directories and \"chmod\" for files.  This is confusing.  Maybe it would be better to go with the already existing names of \"dirmode\" and \"mode\" like we are using for <zipfileset>?", "id": 182480, "time": "2015-04-19T04:46:53Z", "bug_id": 43271, "creation_time": "2015-04-19T04:46:53Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "I've added fileMode and dirMode with git commit 2f0edba and tested it for scp - I don't have access to a server speaking sftp.\n\nNote the resulting permissions are still the intersection of the permossions set and the remote UMASK (i.e. if the remote UMASK is 022 you won't be able to create group- or world-writable files).  I don't know enough about JSch to know whether there is a way around it.", "id": 183000, "time": "2015-05-17T05:45:38Z", "bug_id": 43271, "creation_time": "2015-05-17T05:45:38Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "walter.kacynski@gmail.com", "text": "I have tested this with sftp and it causes the parent level directory permissions to be reset to 644, effectively breaking the directory.\n\nMy task configuration:\n<scp todir=\"${ssh.userid}@${mainframe.host}:${classpathjar.mainframe.directory}\"\n\tkeyfile=\"${ssh.keyfile}\"\n\tverbose=\"${ssh.verbose}\"\n\tsftp=\"true\"\n\tfile=\"target/${ARM_PROJECTNAME}.jar\"\n>\n</scp>\n\nThis task works perfectly fine against 1.8.2, but fails under 1.9.5", "id": 185090, "time": "2015-09-10T19:42:46Z", "bug_id": 43271, "creation_time": "2015-09-10T19:42:46Z", "is_private": false, "attachment_id": null}, {"count": 7, "attachment_id": null, "bug_id": 43271, "text": "Oh, my sftp server is running with umask 0002\n\"Subsystem sftp /bin/sh -c 'umask 0002; /usr/lib/ssh/sftp-server'\"", "id": 185091, "time": "2015-09-10T19:52:15Z", "creator": "walter.kacynski@gmail.com", "creation_time": "2015-09-10T19:52:15Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "bug_id": 43271, "attachment_id": null, "text": "I'm new to Ant bug reporting.  Could someone let me know that they have seen my last updates.  thanks.", "id": 185744, "time": "2015-10-13T20:18:28Z", "creator": "walter.kacynski@gmail.com", "creation_time": "2015-10-13T20:18:28Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 43271, "attachment_id": null, "is_private": false, "id": 185746, "time": "2015-10-14T04:18:16Z", "creator": "bodewig@apache.org", "creation_time": "2015-10-14T04:18:16Z", "text": "Hi Walter, yes, at least I've seen your comment, but haven't found the time to look into it, yet."}, {"count": 10, "tags": [], "creator": "jaikiran@apache.org", "is_private": false, "text": "I happened to have a look at one other similar bug here[1] and I have added a comment[2] explaining what's causing this. What Walter is running into appears to be because of the same reason noted in that comment.\n\n[1] https://bz.apache.org/bugzilla/show_bug.cgi?id=59648\n[2] https://bz.apache.org/bugzilla/show_bug.cgi?id=59648#c3", "id": 199917, "time": "2017-07-21T08:35:27Z", "bug_id": 43271, "creation_time": "2017-07-21T08:35:27Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "jaikiran@apache.org", "text": "Walter, the issue that you reported related to this feature is now fixed[1] in 1.9.x and master branches and should be available in a next release.\n\nStefan, what's the workflow that we follow for issues like this one where it was reopened. Do we mark this one fixed and let the target milestone stay 1.9.5 or do we mark this fixed and also change the target milestone as the new 1.9.10?\n\n[1] https://github.com/apache/ant/commit/b9125733c49256ea7349bba968d9eabd468a9223", "id": 199955, "time": "2017-07-23T05:17:49Z", "bug_id": 43271, "creation_time": "2017-07-23T05:17:49Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 43271, "attachment_id": null, "is_private": false, "id": 199956, "time": "2017-07-23T10:17:34Z", "creator": "bodewig@apache.org", "creation_time": "2017-07-23T10:17:34Z", "text": "(In reply to Jaikiran Pai from comment #11)\n\n> Stefan, what's the workflow that we follow for issues like this one where it\n> was reopened. Do we mark this one fixed and let the target milestone stay\n> 1.9.5 or do we mark this fixed and also change the target milestone as the\n> new 1.9.10?\n\nI don't think we've got any hard rules for this, it doesn't happen that often. In this case I'd probably leave the target milestone at 1.9.5 as this issue was about the feature itself. It was reopened because of a bug in the implementation - something that may have been better raised as a separate issue like bug 59648."}]