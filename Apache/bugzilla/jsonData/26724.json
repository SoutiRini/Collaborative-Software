[{"count": 0, "tags": [], "text": "The following configuration construct (in httpd.conf) does not work with 'non \nparsed headers' CGI modules.\n\nExample:\n\nAction my-handler /cgi-bin/nph-cm.pl\nAddHandler my-handler csp cls\n\nThis should invoke the script 'nph-cm.pl' for requests for files with \nextension 'csp' or 'cls'.  Apache should allow the CGI script to return its \nown header without interfering:\n\nScript nph-cm.pl:\n\n#!C:/perl/bin/perl.exe\n\nprint \"$ENV{SERVER_PROTOCOL} 200 OK\\n\";\nprint \"Server: $ENV{SERVER_SOFTWARE}\\n\";\nprint \"Content-type: text/html\\n\";\nprint \"Connection: close\\n\\n\";\n\nprint \"<html><head><title>Test</title></head>\\n\";\nprint \"<h2>Process: \";\nprint $ENV{\"PATH_TRANSLATED\"};\nprint \"</h2>\\n\";\nprint \"</html>\\n\";\n\n\nWhat actually gets returned (for /csp/samples/loop.csp) is:\n\nHTTP/1.1 200 OK\nServer: Apache/2.0.48 (Win32)\nContent-type: text/html\nConnection: close\n \n<html><head><title>Test</title></head>\n<h2>Process: C:\\cachesys\\csp\\samples\\loop.csp</h2>\n</html>\nHTTP/1.1 200 OK\nDate: Fri, 06 Feb 2004 12:28:04 GMT\nServer: Apache/2.0.48 (Win32)\nContent-Length: 0\nContent-Type: text/csp\n\n\nNote that Apache tried insert an header at the end of the transmission for \nsome reason.  It also hangs for quite a while (around 5 seconds) whilst \nreturning this content to the client.  Incidentally, calling the CGI module \ndirectly through a browser (/cgi-bin/nph-cm.pl) works OK.\n\n\nRemoving the 'nph-' requirement works as expected:\n\nIn httpd.conf:\n\nAction my-handler /cgi-bin/cm.pl\nAddHandler my-handler csp cls\n\nThe script cm.pl:\n\n#!C:/perl/bin/perl.exe\n\nprint \"Content-type: text/html\\n\";\nprint \"Connection: close\\n\\n\";\n\nprint \"<html><head><title>Test</title></head>\\n\";\nprint \"<h2>Process: \";\nprint $ENV{\"PATH_TRANSLATED\"};\nprint \"</h2>\\n\";\nprint \"</html>\\n\";", "attachment_id": null, "bug_id": 26724, "id": 51830, "time": "2004-02-06T13:01:16Z", "creator": "cm@cmunt.demon.co.uk", "creation_time": "2004-02-06T13:01:16Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "text": "\n\n*** This bug has been marked as a duplicate of 22898 ***", "id": 58645, "time": "2004-06-03T16:19:29Z", "bug_id": 26724, "creation_time": "2004-06-03T16:19:29Z", "is_private": false, "attachment_id": null}]