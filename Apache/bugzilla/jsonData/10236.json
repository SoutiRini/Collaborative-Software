[{"attachment_id": null, "tags": [], "creator": "Michael.Dean@detir.qld.gov.au", "is_private": false, "count": 0, "id": 18592, "time": "2002-06-26T06:04:46Z", "bug_id": 10236, "creation_time": "2002-06-26T06:04:46Z", "text": "when doing a MOVE method in DAV/2 under Apache2 the final character seems to go\nwalkies\n\nspinner:~ 3955 # cadaver http://webdav:8888/2222               \ndav:/2222/> mv 123456 12345\nMoving `/2222/123456' to `/2222/12345':  succeeded.\ndav:/2222/> ls\nListing collection `/2222/': (reconnecting...done) succeeded.\n       1234                                 3044  Jun 21 02:41"}, {"attachment_id": null, "tags": [], "creator": "Michael.Dean@detir.qld.gov.au", "is_private": false, "count": 1, "id": 18789, "time": "2002-07-01T09:28:34Z", "bug_id": 10236, "creation_time": "2002-07-01T09:28:34Z", "text": "uname -a -> SunOS spinner 5.8 Generic_108528-11 sun4u sparc SUNW,Sun-Fire-280R\n"}, {"attachment_id": null, "tags": [], "creator": "trawick@apache.org", "text": "I tried this with both HEAD and 2.0.39 on both Linux and Solaris 8 and was \nunable to make it fail with either of the four servers. Here is an\nexample:\n$ cadaver http://127.0.0.1:8080/davtest\nLooking up hostname... Connecting to server... connected.\ndav:/davtest/> ls\nListing collection `/davtest/': succeeded.\n       12345                                 161  Jul 31  2002\ndav:/davtest/> mv 12345 123456\nMoving `/davtest/12345' to `/davtest/123456':  succeeded.\ndav:/davtest/> ls\nListing collection `/davtest/': succeeded.\n       123456                                161  Jul 31  2002\ndav:/davtest/> mv 12345 1234567\nMoving `/davtest/12345' to `/davtest/1234567':  failed:\n404 Not Found\ndav:/davtest/> mv 123456 12345\nMoving `/davtest/123456' to `/davtest/12345':  succeeded.\ndav:/davtest/> ls\nListing collection `/davtest/': succeeded.\n       12345                                 161  Jul 31  2002\ndav:/davtest/>\n\nI used cadaver 0.20.1 with the included neon and expat.\n\nYou may need to experiment to narrow down the conditions where this\noccurs so that we can try to resolve the problem.\n", "count": 2, "id": 20489, "time": "2002-07-31T15:19:46Z", "bug_id": 10236, "creation_time": "2002-07-31T15:19:46Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 10236, "attachment_id": null, "text": "this problem stills occurs in apache-2.0.40 for me\n\nSunOS davserver 5.8 Generic_108528-15 sun4u sparc SUNW,Sun-Fire-280R\n\n# gcc -v\nReading specs from /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/3.0.4/specs\nConfigured with: ../gcc-3.0.4/configure\nThread model: posix\ngcc version 3.0.4\n\nit's not tied to the client as it happens when you telnet to the port\n\n# telnet davserver 8888\nConnected to davserver\nEscape character is '^]'.\nMOVE /123 HTTP/1.1\nDestination: http://davserver:8888/1234\nHost: davserver:8888\n\nHTTP/1.1 403 Forbidden\nDate: Sun, 11 Aug 2002 11:08:18 GMT\nServer: Apache/2.0.40 (Unix) DAV/2\nContent-Length: 256\nContent-Type: text/html; charset=ISO-8859-1\n\nSource and Destination URIs are the same\n\n# which shouldn't have happened as destination was a different file name\n\n# ./configure --prefix=/web/server/apache2 --enable-dav\n\n\n# ldd -d /web/server/apache2/bin/httpd\n        libaprutil.so.0 =>       /web/server/apache2/lib/libaprutil.so.0\n        libexpat.so.0 =>         /web/server/apache2/lib/libexpat.so.0\n        libapr.so.0 =>   /web/server/apache2/lib/libapr.so.0\n        libsendfile.so.1 =>      /usr/lib/libsendfile.so.1\n        librt.so.1 =>    /usr/lib/librt.so.1\n        libm.so.1 =>     /usr/lib/libm.so.1\n        libsocket.so.1 =>        /usr/lib/libsocket.so.1\n        libnsl.so.1 =>   /usr/lib/libnsl.so.1\n        libresolv.so.2 =>        /usr/lib/libresolv.so.2\n        libdl.so.1 =>    /usr/lib/libdl.so.1\n        libpthread.so.1 =>       /usr/lib/libpthread.so.1\n        libc.so.1 =>     /usr/lib/libc.so.1\n        libaio.so.1 =>   /usr/lib/libaio.so.1\n        libmp.so.2 =>    /usr/lib/libmp.so.2\n        /usr/platform/SUNW,Sun-Fire-280R/lib/libc_psr.so.1\n        libthread.so.1 =>        /usr/lib/libthread.so.1", "id": 20879, "time": "2002-08-11T12:07:02Z", "creator": "Michael.Dean@detir.qld.gov.au", "creation_time": "2002-08-11T12:07:02Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "Michael.Dean@detir.qld.gov.au", "is_private": false, "count": 4, "id": 20881, "time": "2002-08-11T14:46:07Z", "bug_id": 10236, "creation_time": "2002-08-11T14:46:07Z", "text": "i've just tried this on FreeBSD with the same problem\n\nFreeBSD ns1 4.5-STABLE FreeBSD 4.5-STABLE #3: Sat Jun 15 20:56:26 EST 2002\nmwd@ns1:/usr/obj/usr/src/sys/NS1FW  i386\n\ncompiled with \n\nns1:/web/webdav/test # gcc -v\nUsing builtin specs.\ngcc version 2.95.3 20010315 (release) [FreeBSD]\n\nconfigure options were minimal ...\n\n./configure --prefix=/web/server/apache2 --enable-dav && make && make install\n\nns1:/web/webdav/test # ldd /web/server/apache2/bin/httpd \n/web/server/apache2/bin/httpd:\n        libaprutil.so.0 => /web/server/apache2/lib/libaprutil.so.0 (0x280d8000)\n        libexpat.so.1 => /web/server/apache2/lib/libexpat.so.1 (0x280ea000)\n        libapr.so.0 => /web/server/apache2/lib/libapr.so.0 (0x28106000)\n        libm.so.2 => /usr/lib/libm.so.2 (0x2811e000)\n        libcrypt.so.2 => /usr/lib/libcrypt.so.2 (0x2813a000)\n        libc.so.4 => /usr/lib/libc.so.4 (0x28153000)\n\nand in the httpd.conf the only things changed were\n\n-----httpd.conf-----\n\n    Listen 8800\n    User www\n    Group www\n\n    ServerName ns1\n\n    DAVLockDB /web/server/DAVLockDB/DAVLock\n    DAVMinTimeout 600\n       \n    <DirectoryMatch \"^/web/webdav\">\n        DAV On\n    </DirectoryMatch>\n\n    DocumentRoot                    \"/web/webdav/test\"\n\n-----httpd.conf-----\n\nns1:/web/webdav/test # ls -laF /web/server/DAVLockDB/         \ndrwxrwxrwt   2 root  wheel   512 Aug 12 00:01 ./\ndrwxr-xr-x  21 root  wheel  1024 Aug 11 23:42 ../\n-rw-r--r--   1 www   wheel     0 Aug 12 00:01 DAVLock.dir\n-rw-r--r--   1 www   wheel     0 Aug 12 00:01 DAVLock.pag\n\n\nns1:/web/webdav/test # ls -laF\ndrwxrwxrwt  2 www   www    512 Aug 11 23:41 ./\ndrwxr-xr-x  3 root  wheel  512 Aug 11 23:47 ../\n-rwxrwxrwx  1 www   www      0 Aug 11 23:18 12345*\nns1:/web/webdav/test 17085 # telnet localhost 8800\nTrying ::1...\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nMOVE /12345 HTTP/1.1\nDestination: http://ns1:8800/1234567\nHost: ns1:8800\n\nHTTP/1.1 201 Created\nDate: Sun, 11 Aug 2002 14:00:34 GMT\nServer: Apache/2.0.40 (Unix) DAV/2\nLocation: http://ns1:8800/1234567\nContent-Length: 247\nContent-Type: text/html; charset=ISO-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>201 Created</title>\n</head><body>\n<h1>Created</h1>\n<p>Destination /1234567 has been created.</p>\n<hr />\n<address>Apache/2.0.40 Server at ns1 Port 8800</address>\n</body></html>\nConnection closed by foreign host.\nns1:/web/webdav/test # ls -laF\ndrwxrwxrwt  2 www   www    512 Aug 12 00:01 ./\ndrwxr-xr-x  3 root  wheel  512 Aug 11 23:47 ../\n-rwxrwxrwx  1 www   www      0 Aug 11 23:18 123456*\nns1:/web/webdav/test # telnet localhost 8800\nTrying ::1...\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nMOVE /123456 HTTP/1.1\nDestination: http://ns1:8800/1234567\nHost: ns1:8800\n\nHTTP/1.1 403 Forbidden\nDate: Sun, 11 Aug 2002 14:04:58 GMT\nServer: Apache/2.0.40 (Unix) DAV/2\nContent-Length: 254\nContent-Type: text/html; charset=ISO-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>403 Forbidden</title>\n</head><body>\n<h1>Forbidden</h1>\n<p>Source and Destination URIs are the same.</p>\n<hr />\n<address>Apache/2.0.40 Server at ns1 Port 8800</address>\n</body></html>\nConnection closed by foreign host.\n\nns1:/web/webdav/test # cadaver http://127.0.0.1:8800/\nLooking up hostname... Connecting to server... connected.\ndav:/> ls\nListing collection `/': succeeded.\n      *123456                                  0  Aug 11 23:18\ndav:/> mv 123456 12345  \nMoving `/123456' to `/12345':  succeeded.\ndav:/> ls \nListing collection `/': succeeded.\n      *1234                                    0  Aug 11 23:18\ndav:/> mv 1234 12345\nMoving `/1234' to `/12345':  failed:\n403 Forbidden\ndav:/> mv 1234 123456\nMoving `/1234' to `/123456':  succeeded.\ndav:/> ls\nListing collection `/': succeeded.\n      *12345                                   0  Aug 11 23:18\ndav:/> \n\ncan anyone else duplicate this? \n\n"}, {"count": 5, "tags": [], "text": "[This is a mass bug update.]\nThis bug reports a problem in an older version of Apache 2.\nCould you please update to the most recent version and see\nif you can reproduce this problem.  If the bug still exists,\nplease update the bug with the latest version number.  If \nthe bug no longer exists, please close the bug report.\n\nSorry for this impersonal response, but we get many more bug\nreports than our volunteers can keep up with.\nThanks for using Apache!", "is_private": false, "id": 24718, "creator": "slive@apache.org", "time": "2002-10-17T02:34:48Z", "bug_id": 10236, "creation_time": "2002-10-17T02:34:48Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "Michael.Dean@detir.qld.gov.au", "text": "yep it's still occurring\n\nspinner:/web/server/apache2 5702 # cadaver http://webdav:8888/2222\nLooking up hostname... Connecting to server... connected.\ndav:/2222/> ls\nListing collection `/2222/': succeeded.\n       123                                  3044  Jun 21 02:41\ndav:/2222/> mv 123 1234\nMoving `/2222/123' to `/2222/1234':  failed:\n403 Forbidden\ndav:/2222/> mv 123 12345\nMoving `/2222/123' to `/2222/12345':  succeeded.\ndav:/2222/> ls\nListing collection `/2222/': succeeded.\n       1234                                 3044  Jun 21 02:41", "id": 25357, "time": "2002-10-30T01:48:29Z", "bug_id": 10236, "creation_time": "2002-10-30T01:48:29Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 10236, "is_private": false, "text": "It turns out that there are other lose-last-character PRs out there.\n\nSomebody just posted a tiny patch to PR 14147.\n\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=14147\n\n--- request.c.bak       Tue Oct 22 10:20:09 2002\n+++ request.c   Tue Oct 22 10:20:11 2002\n@@ -918,6 +918,8 @@\n             /* That temporary trailing slash was useful, now drop it.\n              */\n             if (temp_slash) {\n+                temp_slash = 0;\n+                if (r->filename[filename_len-1] == '/')\n                 r->filename[--filename_len] = '\\0';\n             }\n\nIt would be great to find out whether or not this fix resolves your\nproblem.\n", "id": 25450, "time": "2002-10-31T20:58:55Z", "creator": "trawick@apache.org", "creation_time": "2002-10-31T20:58:55Z", "attachment_id": null}, {"count": 8, "tags": [], "text": "The small \"temp_slash = 0; if (r->filename[filename_len-1] == '/')\" patch\nincluded in PR14147 fixes this problem - YAY - thanks a lot\n\n*** This bug has been marked as a duplicate of 14147 ***", "is_private": false, "bug_id": 10236, "id": 25457, "time": "2002-11-01T02:51:17Z", "creator": "Michael.Dean@detir.qld.gov.au", "creation_time": "2002-11-01T02:51:17Z", "attachment_id": null}]