[{"attachment_id": null, "tags": [], "bug_id": 21542, "is_private": false, "count": 0, "id": 40568, "time": "2003-07-13T08:55:28Z", "creator": "karsten.silz@epost.de", "creation_time": "2003-07-13T08:55:28Z", "text": "I use Ant to JAR up classes.  I include the MANIFEST.MF in the JAR through the\n\"manifest\" attribute of the <jar> task.  \n\nIn each build run, I updated a build number in the MANIFEST.MF.  However, even\nthough I even <touch> the MANIFEST.MF, it doesn't get updated in the JAR.  My\n<jar> task has \"update\" set to \"true\".  I use the JDK 1.4.2."}, {"count": 1, "tags": [], "text": "Does ant -verbose give any hints why MANIFEST.MF isn't considered out of date?", "is_private": false, "id": 40739, "creation_time": "2003-07-15T15:22:14Z", "time": "2003-07-15T15:22:14Z", "creator": "bodewig@apache.org", "bug_id": 21542, "attachment_id": null}, {"count": 2, "tags": [], "creator": "karsten.silz@epost.de", "attachment_id": null, "id": 40740, "time": "2003-07-15T15:28:27Z", "bug_id": 21542, "creation_time": "2003-07-15T15:28:27Z", "is_private": false, "text": "I'll check tonite at home and will tell you tomorrow."}, {"count": 3, "tags": [], "creator": "karsten.silz@epost.de", "attachment_id": 7322, "is_private": false, "id": 40781, "time": "2003-07-16T07:20:03Z", "bug_id": 21542, "creation_time": "2003-07-16T07:20:03Z", "text": "Created attachment 7322\nI'll describe the content in a second."}, {"count": 4, "tags": [], "creator": "karsten.silz@epost.de", "attachment_id": null, "is_private": false, "id": 40782, "time": "2003-07-16T07:49:00Z", "bug_id": 21542, "creation_time": "2003-07-16T07:49:00Z", "text": "Here's what's in the ZIP:\n\nBuild files\nbase-build.xml, project-properties.txt, targets.txt, properties.txt\n\nListings after first build\nlog_jar_1.xml, ls_jar_1.txt, ls_manifest_1.txt\n\nListings after second build\nlog_jar_2.xml, ls_jar_2.txt, ls_manifest_2.txt\n\n\nThe target JARing things up is <integrate> in base-build.xml (line 283).  After\nthe first run, the MANIFEST.MF has a date of 20:30:59 (ls_manifest_1.txt) and\nthe JAR is fine (ls_jar_1.txt).  The build log is log_jar_1.xml (sorry, didn't\ninclude the XSL); <integrate> starts there at line 59.  The XML listener is a\nslightly modified version of the Ant one.\n\nA couple of minutes later, I did another <integrate>.  The MANIFEST.MF got\nupdated and now has a date of 20:48:24 (ls_manifest_1.txt).  Now the build\nrecognized that the manifest got updated (log_jar_2.xml, line 49) - it did print\nsomething like \"Updating JAR because manifest was updated\", which is not in the\nlog (why?).  It also omitted all files in there because they didn't change\n(true) but did say nothing about the MANIFEST.MF.  But the JAR didn't change at\nall (ls_jar_2.txt)."}, {"count": 5, "tags": [], "creator": "karsten.silz@epost.de", "is_private": false, "text": "Created attachment 7583\nThis is the verbose output of a \"nothing has changed but the manifest file\" build.", "id": 41767, "time": "2003-07-30T12:32:03Z", "bug_id": 21542, "creation_time": "2003-07-30T12:32:03Z", "attachment_id": 7583}, {"count": 6, "tags": [], "creator": "karsten.silz@epost.de", "attachment_id": null, "is_private": false, "id": 41769, "time": "2003-07-30T12:34:18Z", "bug_id": 21542, "creation_time": "2003-07-30T12:34:18Z", "text": "As you can see from the attachment, when you run a build where only the manifest\nfile has changed, the JAR task does recognize this fact by printing \"[jar]\nUpdating jar since jar manifest has changed\".  However, it does not take any\nactions - the manifest file doesn't get updated."}, {"attachment_id": null, "tags": [], "bug_id": 21542, "is_private": false, "count": 7, "id": 41770, "time": "2003-07-30T13:02:45Z", "creator": "bodewig@apache.org", "creation_time": "2003-07-30T13:02:45Z", "text": "Hmm, I've tried the following self-contained build file\n\n<project default=\"jar\">\n  <target name=\"jar\">\n    <delete file=\"jar.jar\"/>\n    <manifest file=\"1.mf\">\n      <attribute name=\"Name1\" value=\"Value1\"/>\n    </manifest>\n    <jar destfile=\"jar.jar\" manifest=\"1.mf\">\n      <fileset dir=\".\" excludes=\"1.mf\"/>\n    </jar>\n    <manifest file=\"1.mf\" mode=\"update\">\n      <attribute name=\"Name2\" value=\"Value2\"/>\n    </manifest>\n    <jar destfile=\"jar.jar\" manifest=\"1.mf\" update=\"true\">\n      <fileset dir=\".\" excludes=\"1.mf,jar.jar\"/>\n    </jar>\n  </target>\n</project>\n\nand it works for both 1.5.3 and CVS HEAD. The resulting manifest is updated.\nDoes it work for you as well?\n"}, {"count": 8, "tags": [], "bug_id": 21542, "attachment_id": 7656, "id": 42147, "time": "2003-08-05T12:38:36Z", "creator": "karsten.silz@epost.de", "creation_time": "2003-08-05T12:38:36Z", "is_private": false, "text": "Created attachment 7656\nHere are the results from my test runs."}, {"count": 9, "tags": [], "creator": "karsten.silz@epost.de", "is_private": false, "text": "Please check out the results from the ZIP file I attached.  Looks like we found\neither a bug in Ant 1.5.2 or in the Eclipse Ant integration.\n\nI ran your build on the command line with Ant 1.5.3, and everything worked\n(test-*-cmd.txt).  When I ran the Ant file within an (empty) Eclipse project, it\ndidn't work.  The log file (test-log-eclipse.txt) looked fine, but the manifest\n(test-mf-eclipse.txt) only contains the first value.  In the ZIP file, I also\nput in my little Eclipse project.\n\nI have plain Eclipse 2.1 which has Ant 1.5.2 embedded.  I haven't been able to\nswitch to Ant 1.5.3 in Eclipse because I always got an XML (classloading?) error. ", "id": 42150, "time": "2003-08-05T12:54:35Z", "bug_id": 21542, "creation_time": "2003-08-05T12:54:35Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "You are correct, it also fails for me if I use Ant 1.5.2, therefore I'm going\nto mark this as fixed.\n\nI'm sorry, I don't use Eclipse so I don't know what it may take to upgrade Ant.\n", "id": 42165, "time": "2003-08-05T14:43:27Z", "bug_id": 21542, "creation_time": "2003-08-05T14:43:27Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "karsten.silz@epost.de", "is_private": false, "text": "Just out of curiosity: Was this bug consciously fixed in Ant 1.5.3.?", "id": 42167, "time": "2003-08-05T14:54:35Z", "bug_id": 21542, "creation_time": "2003-08-05T14:54:35Z", "attachment_id": null}, {"count": 12, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "Several bugs in <zip> and <jar> have been fixed and I guess this has been a side\neffect of one of those.  I'm not sure which one, or I would have marked this\nreport as a duplicate - the most likely candidate is Bug 11780 even though\nit sounds quite different.", "id": 42169, "time": "2003-08-05T15:05:00Z", "bug_id": 21542, "creation_time": "2003-08-05T15:05:00Z", "attachment_id": null}]