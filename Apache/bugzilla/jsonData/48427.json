[{"count": 0, "tags": [], "bug_id": 48427, "attachment_id": null, "text": "The /trunk/test-data/document/empty.doc file fails to be parsed by POIFSFileSystem. Trying to parse it results in exception:\n\njava.io.IOException: block[ 10 ] already removed - does your POIFS have circular or duplicate block references?\n\tat org.apache.poi.poifs.storage.BlockListImpl.remove(BlockListImpl.java:90)\n\tat org.apache.poi.poifs.storage.RawDataBlockList.remove(RawDataBlockList.java:32)\n\tat org.apache.poi.poifs.storage.BlockAllocationTableReader.fetchBlocks(BlockAllocationTableReader.java:191)\n\tat org.apache.poi.poifs.storage.BlockListImpl.fetchBlocks(BlockListImpl.java:124)\n\tat org.apache.poi.poifs.storage.RawDataBlockList.fetchBlocks(RawDataBlockList.java:32)\n\tat org.apache.poi.poifs.filesystem.POIFSFileSystem.processProperties(POIFSFileSystem.java:541)\n\tat org.apache.poi.poifs.filesystem.POIFSFileSystem.<init>(POIFSFileSystem.java:176)\n\tat org.apache.poi.hwpf.TestWriteBigFile.testWriteBigFile(TestWriteBigFile.java:18)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat com.intellij.junit3.JUnit3IdeaTestRunner.doRun(JUnit3IdeaTestRunner.java:108)\n\tat com.intellij.junit3.JUnit3IdeaTestRunner.startRunnerWithArgs(JUnit3IdeaTestRunner.java:42)\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:165)\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:60)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:110)\n\nI checked it today (2009-12-22) in the current trunk.", "id": 133054, "time": "2009-12-22T02:13:01Z", "creator": "vkorenev@gmail.com", "creation_time": "2009-12-22T02:13:01Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "yegor@dinom.ru", "text": "The filename empty.doc is misleading. This file was added in r353055 as a follow-on to bug 17208, see https://issues.apache.org/bugzilla/show_bug.cgi?id=17208.\n\nWe already had disable junits for it, see org.apache.poi.hdf.model.TestHDFDocument\n\nAlthough Bugzilla 17208 says that the files committed in the repository don't match the files posted in the zip, this difference was never fixed. POIFSFileSystem can open the files from the original attachment but fails to open the files from trunk. I compared hex dumps and there are 7 places where '\\r' was changed to '\\n'. Further investigation revealed that the problem files were added as text and have the svn:eol-style=native property which caused svn to do newline conversion.\n\nI removed svn:eol-style and updated the following files:\n\ntest-data/document/simple-table.doc\ntest-data/document/empty.doc\ntest-data/document/simple-list.doc\ntest-data/document/simple.doc\n\nThe fix was committed in r894173\n\nRegarsd,\nYegor", "id": 133148, "time": "2009-12-28T05:47:46Z", "bug_id": 48427, "creation_time": "2009-12-28T05:47:46Z", "tags": [], "is_private": false}]