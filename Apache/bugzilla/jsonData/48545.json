[{"count": 0, "tags": [], "creator": "smmwpf54@postfinance.ch", "attachment_id": 24845, "text": "Created attachment 24845\nPatched JSSESocketFactory.java based on Tomcat 6.0.20\n\nFor the moment, a user must set the \"truststorePass\" in the SSL connector, even if this is not required by the JSEE API (Keystore.load() with null password is possible for truststores) and is also unwanted in a production environment with \"real\" truststores, because this may give someone the possibility to manipulate a productive trustore file or give more information than needed.\nIf the \"truststorePass\" is not set in the connector element, the current implementation will use the \"keystorePass\" as the value for \"truststorePass\" (strange wrong behaviour) and this will lead to an exception.\nProposal: do not set the \"truststorePass\" if omitted, leave it with null and the SSL connector still works.\nThis should also not affect old tomcat configurations, where the truststore password equals to the keystore password.\nSee my attached JSSESocketFactory patch (based on 6.0.20)", "id": 133604, "time": "2010-01-14T07:58:48Z", "bug_id": 48545, "creation_time": "2010-01-14T07:58:48Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "Thanks for the patch. It has been applied to 7.0.x and proposed for 6.0.x\n\nFor future reference, please provide patches in diff -u format as they are easier to work with. Also, patches should update documentation where appropriate and should delete code rather than comment it out.", "id": 134522, "attachment_id": null, "bug_id": 48545, "creation_time": "2010-02-15T17:17:34Z", "time": "2010-02-15T17:17:34Z", "is_private": false}, {"count": 2, "tags": [], "text": "Created attachment 25848\nPatch that provides better backwards compatibility", "is_private": false, "id": 138914, "creation_time": "2010-08-05T12:49:56Z", "time": "2010-08-05T12:49:56Z", "creator": "markt@apache.org", "bug_id": 48545, "attachment_id": 25848}, {"count": 3, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": 26268, "text": "Created attachment 26268\n2010-11-08_tc6_bug48545.patch - Updated version of the patch\n\nI'm attaching a slightly improved version of Mark's patch. The changes are:\n- Do not retry with null password if the password was already null, or if there was a FileNotFoundException.\n- Log the \"jsse.keystore_load_failed\" message in getKeystore() and getTrustStore(), when getStore() does not log it anymore.", "id": 141532, "time": "2010-11-08T03:25:58Z", "bug_id": 48545, "creation_time": "2010-11-08T03:25:58Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 48545, "attachment_id": null, "id": 142008, "time": "2010-11-25T11:03:09Z", "creator": "markt@apache.org", "creation_time": "2010-11-25T11:03:09Z", "is_private": false, "text": "The updated patch has been applied to 6.0.x and will be included in 6.0.30 onwards."}]