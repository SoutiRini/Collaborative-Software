[{"count": 0, "tags": [], "bug_id": 1066, "text": "(I've opened this same bug report with the junit team, problem #410157)\n\nSetup: ant(1.3), junit(3.5), jdk(1.3.0_02), win2k \n\nTo validate that I've gotten ant installed and working, I created a build.xml \nfor use with junit3.5 that simply runs all the tests on junit3.5. From the \ncommand line, it would be something like\n> java junit.textui.TestRunner junit.samples.AllTests\n\nFor ant and it's build.xml, this looks like: \n\n<project name=\"JUnit\" default=\"testMe\" basedir=\".\"> \n <target name=\"testMe\"> \n  <junit printsummary=\"yes\"> \n   <formatter type=\"plain\" /> \n   <test name=\"junit.samples.AllTests\" /> \n  </junit> \n </target> \n</project> \n\nGreat. I run \"ant\" and I get the following output: \nC:\\junit3.5>ant testMe \nBuildfile: build.xml \n\ntestMe: \n[junit] Running junit.samples.AllTests \n[junit] Tests run: 86, Failures: 0, Errors: 1, Time elapsed: 3.636 sec \n[junit] TEST junit.samples.AllTests FAILED \n\nBUILD SUCCESSFUL \n\nTotal time: 7 seconds \n\nTrolling through the output, we find: \nTestcase: testFilter took 0 sec \nCaused an ERROR \nnull \njava.lang.NullPointerException \nat junit.runner.BaseTestRunner.getPreference (BaseTestRunner.java:165) \nat junit.runner.BaseTestRunner.filterStack (BaseTestRunner.java:194) \nat junit.tests.StackFilterTest.testFilter (StackFilterTest.java:45) \nat java.lang.reflect.Method.invoke(Native Method) \nat junit.framework.TestCase.runTest (TestCase.java:156) \nat junit.framework.TestCase.runBare (TestCase.java:130) \nat junit.framework.TestResult$1.protect (TestResult.java:106) \nat junit.framework.TestResult.runProtected (TestResult.java:124) \nat junit.framework.TestResult.run (TestResult.java:109) \nat junit.framework.TestCase.run (TestCase.java:121) \nat junit.framework.TestSuite.runTest (TestSuite.java:157) \nat junit.framework.TestSuite.run (TestSuite.java:152) \nat junit.framework.TestSuite.runTest (TestSuite.java:157) \nat junit.framework.TestSuite.run (TestSuite.java:152) \nat junit.framework.TestSuite.runTest (TestSuite.java:157) \nat junit.framework.TestSuite.run (TestSuite.java:152) \nat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run \n(JUnitTestRunner.java:209) \nat org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.executeInVM \n(JUnitTask.java:409) \nat org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute \n(JUnitTask.java:283) \nat org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute\n(JUnitTask.java:263) \nat org.apache.tools.ant.Target.execute (Target.java:153) \nat org.apache.tools.ant.Project.runTarget (Project.java:898) \nat org.apache.tools.ant.Project.executeTarget (Project.java:536) \nat org.apache.tools.ant.Project.executeTargets (Project.java:510) \nat org.apache.tools.ant.Main.runBuild (Main.java:421) \nat org.apache.tools.ant.Main.main (Main.java:149) \n\nLooking at the source for BaseTestRunner, I see there's some static \ninitialization code (at the bottom of the class). For some reason, that code \nisn't being run when this class is loaded for use with ant. I don't fully \nunderstand WHY that is, but I hacked BaseTestRunner to fix the problem. I moved \nthe existing initialization code into the method \"private static void _init()\", \nand changed the static initializer code to simply call _init(). I then \nchanged the method \"public static String getPreference (String key)\" to test \nfPreferences and call _init() if it was null. It got me past the issue.", "id": 1495, "time": "2001-03-21T08:41:12Z", "creator": "crocker@inil.com", "creation_time": "2001-03-21T08:41:12Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 1066, "text": "Created attachment 54\nOutput of running ant on the specified build.xml file", "id": 1496, "time": "2001-03-21T08:41:52Z", "creator": "crocker@inil.com", "creation_time": "2001-03-21T08:41:52Z", "is_private": false, "attachment_id": 54}, {"count": 2, "attachment_id": null, "creator": "bodewig@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of 1613 ***", "id": 2239, "time": "2001-05-03T06:30:18Z", "bug_id": 1066, "creation_time": "2001-05-03T06:30:18Z", "tags": [], "is_private": false}]