[{"count": 0, "tags": [], "text": "When orbitdownloader (web download accelerator) is used to download a file over https like https://user:password@www.server.com/7GB.file, the child keeps dying.\n\n[Wed Mar 05 06:52:39 2008] [notice] child pid 4720 exit signal Segmentation fault (11)\n[Wed Mar 05 06:52:46 2008] [notice] child pid 4721 exit signal Segmentation fault (11)\n[Wed Mar 05 06:57:11 2008] [notice] child pid 4705 exit signal Segmentation fault (11)\n[Wed Mar 05 06:57:17 2008] [notice] child pid 4711 exit signal Segmentation fault (11)\n[Wed Mar 05 06:57:23 2008] [notice] child pid 4708 exit signal Segmentation fault (11)\n[Wed Mar 05 06:57:29 2008] [notice] child pid 4707 exit signal Segmentation fault (11)\n[Wed Mar 05 06:57:35 2008] [notice] child pid 4795 exit signal Segmentation fault (11)\n\nTested using LFTP too and got the same result:\n\nlftp -c pget \"https://a:b@www.abc.com/files/7GBfile.tar\", got 463620543 of 7019348523 (6%) 6.16M/s\no..............o...............o...............................o...............\n\n\nApparently this issue only happens when there are more than 2 splits of the file. If using only 2 splits of the file or single connection, no such error occurs.\n\nThe file is downloaded directly from the directory index page.\n\n\nServer version: Apache/2.2.8 (Unix)\nServer built:   Mar  4 2008 18:10:57\nServer's Module Magic Number: 20051115:11\nServer loaded:  APR 1.2.12, APR-Util 1.2.12\nCompiled using: APR 1.2.12, APR-Util 1.2.12\nArchitecture:   32-bit\nServer MPM:     Prefork\n  threaded:     no\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=128\n -D HTTPD_ROOT=\"/usr/local/apache2\"\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\n\n\nThere are the modules in use:\nLoadModule authn_file_module modules/mod_authn_file.so\nLoadModule authz_host_module modules/mod_authz_host.so\nLoadModule authz_user_module modules/mod_authz_user.so\nLoadModule auth_basic_module modules/mod_auth_basic.so\nLoadModule auth_digest_module modules/mod_auth_digest.so\nLoadModule log_config_module modules/mod_log_config.so\nLoadModule log_forensic_module modules/mod_log_forensic.so\nLoadModule ssl_module modules/mod_ssl.so\nLoadModule mime_module modules/mod_mime.so\nLoadModule vhost_alias_module modules/mod_vhost_alias.so\nLoadModule dir_module modules/mod_dir.so\nLoadModule alias_module modules/mod_alias.so\nLoadModule php5_module        modules/libphp5.so", "attachment_id": null, "bug_id": 44538, "id": 114283, "time": "2008-03-05T05:15:35Z", "creator": "ken@fusionmark.com", "creation_time": "2008-03-05T05:15:35Z", "is_private": false}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "text": "Can you please try the following patch and let me know if this fixes your problem?\n\nhttp://svn.apache.org/viewvc/apr/apr-util/branches/1.2.x/buckets/apr_brigade.c?r1=631548&r2=631559&view=patch", "id": 114287, "time": "2008-03-05T07:11:43Z", "bug_id": 44538, "creation_time": "2008-03-05T07:11:43Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 44538, "text": "Same problem. I tested this against the pre-configured 2.2.3 package from Ubuntu Feisty Fawn and somehow that one works perfectly.\n\nI tried compiling 2.2.3, 2.2.6, 2.2.8 and encountered issues with all of them.\n\nMy configure string is as follow:\n./configure --prefix=/usr/local/apache2 --enable-mods-shared=all --enable-deflate --enable-proxy --enable-proxy-balancer --enable-proxy-http\n\nI have tested using ./configure with no params and still the same error.\n\n\nOne difference I noticed between the 2.2.3 I compiled and the one from Ubuntu is that the APR version is different. Does that affect?\n\nSelf-compiled:\n\nServer version: Apache/2.2.3\nServer built:   Mar  3 2008 11:32:37\nServer's Module Magic Number: 20051115:3\nServer loaded:  APR 1.2.12, APR-Util 1.2.12\nCompiled using: APR 1.2.12, APR-Util 1.2.12\nArchitecture:   32-bit\nServer MPM:     Prefork\n  threaded:     no\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=128\n -D HTTPD_ROOT=\"/usr/local/apache2\"\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\n\nUbuntu Feisty Fawn:\n\nServer version: Apache/2.2.3\nServer built:   Feb  4 2008 20:19:27\nServer's Module Magic Number: 20051115:3\nServer loaded:  APR 1.2.7, APR-Util 1.2.7\nCompiled using: APR 1.2.7, APR-Util 1.2.7\nArchitecture:   32-bit\nServer MPM:     Prefork\n  threaded:     no\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=128\n -D HTTPD_ROOT=\"\"\n -D SUEXEC_BIN=\"/usr/lib/apache2/suexec\"\n -D DEFAULT_PIDLOG=\"/var/run/apache2.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"/var/run/apache2/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"/etc/apache2/mime.types\"\n -D SERVER_CONFIG_FILE=\"/etc/apache2/apache2.conf\"\n", "id": 114332, "time": "2008-03-06T04:14:54Z", "creator": "ken@fusionmark.com", "creation_time": "2008-03-06T04:14:54Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "(In reply to comment #2)\n\n> \n> One difference I noticed between the 2.2.3 I compiled and the one from Ubuntu\n> is that the APR version is different. Does that affect?\n\nThis is the reason. The bug is in apr-util 1.2.12. So please apply the patch I mentioned to a vanilla 2.2.8 and use the then patched apr-util that is delivered with 2.2.8 for your compilation and tests.\n\n", "is_private": false, "id": 114369, "creator": "rpluem@apache.org", "time": "2008-03-06T11:31:04Z", "bug_id": 44538, "creation_time": "2008-03-06T11:31:04Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 44538, "attachment_id": null, "text": "Just to be sure, I am setting up a new box with clean Ubuntu Dapper to test.\n\nPerfect. Problem fixed!\n\nI think there were remnants when I last did the make install so it still gives the error.\n\n\nThanks for the fix!! \n\n/SALUTE\n\n", "id": 114409, "time": "2008-03-07T04:24:54Z", "creator": "ken@fusionmark.com", "creation_time": "2008-03-07T04:24:54Z", "is_private": false}]