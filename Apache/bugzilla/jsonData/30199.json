[{"count": 0, "tags": [], "creator": "florin@iucha.net", "text": "I am creating a build_common imported from a lot of components whose\nsources are stored in individual directories. Each component can have\none of more of A, B, and C types of sources, stored in src/A, src/B\nand src/C in a component directory.\n\nWhen I try to package the sources using tar, I am trying a recipe like\nthis:\n   <target name=\"package.component\">\n      <tar destfile=\"${package.base}/${package.name}\" compression=\"gzip\">\n         <tarfileset dir=\"${src.dir}/A\" prefix=\"P1\">\n            <include name=\"**/*\" if=\"component.has.A\" />\n         </tarfileset>\n         <tarfileset dir=\"${src.dir}/B\" prefix=\"P2\">\n            <include name=\"**/*\" if=\"component.has.B\" />\n         </tarfileset>\n         <tarfileset dir=\"${src.dir}/C\" prefix=\"P3\">\n            <include name=\"**/*\" if=\"component.has.C\" />\n         </tarfileset>\n      </tar>\n   </target>\nNow, this works for components that have src/A, src/B and src/C, but fails\nfor component that miss any of them, because the tarfileset refers to a\nmissing directory.\n\nI could change it to\n         <tarfileset dir=\"${src.dir}\" prefix=\"P2\">\n            <include name=\"B/**/*\" if=\"component.has.B\" />\n         </tarfileset>\nbut then there is no way to get rid of B since the tarfileset does not\naccept a mapper.\n\nI have worked around the problem by wrapping each copy task in it's own target\nthat is guarded by a condition, but this is ugly...\n\nThe easiest fix would be if the tar task would simply ignore the \nfilesets with missing directories - something like copy has with\n\"failonerror\".", "id": 60849, "time": "2004-07-20T04:34:19Z", "bug_id": 30199, "creation_time": "2004-07-20T04:34:19Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 30199, "is_private": false, "text": "fileset's erroronmissingdir does this.", "id": 129325, "time": "2009-07-31T05:36:04Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-31T05:36:04Z", "attachment_id": null}]