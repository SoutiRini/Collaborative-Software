[{"count": 0, "tags": [], "creator": "stephan.wuelfert@fh-hof.de", "attachment_id": null, "is_private": false, "id": 14604, "time": "2002-04-24T09:05:45Z", "bug_id": 8453, "creation_time": "2002-04-24T09:05:45Z", "text": "I am trying to install php 4.2.0 as a DSO-modul for apache 2.0.35. The \nconfigure-script of php fails with\n\ncannot open /usr/local/build/config_vars.mk: No such file or directory at \n./apxs line 248.\n\nI tracked the error down to the apxs script. In line 69:\n\nget_config_vars(\"$prefix/build/config_vars.mk\",\\%config_vars);\n\nI am using the GNU layout. In this layout the build-directory is under \n\"/usr/local/share/apache2/build\" and the prefix is \"/usr/local/\"\n\nIf I change that to the right path (/usr/local/share/apache2/build/\" it works \nand I can compile php. But when i try to make \"make install\" I get the \nfollowing:\n\n/usr/local/sbin/apxs -i -a -n php4 libphp4.la\n/usr/local/build/instdso.sh SH_LIBTOOL='/usr/local/build/libtool' libphp4.la \n/usr/local/libexec\nsh: /usr/local/build/instdso.sh: No such file or directory\napxs:Error: Command failed with rc=8323072\n\nIt seems thap apxs uses in the lines 418, 443 and 474 the wrong path-variable. \nI think it should be the variable (or path) \"$installbuilddir\" from the file \nconfig.layout  in case of \"$prefix/build\" ??? I do not know how to access that \nvariable or how I should do it right, because I am not so familiar with the \ncode-structurof apache.\n\nI configured php with following command:\n\n./configure --with-tsrm-pthreads --with-mysql=/usr/local \n--with-imap-ssl=/usr/local --with-gettext --with-imap=/Source/imap-2001a \n--with-gd --with-openssl=/usr/local --with-apxs2=/usr/local/sbin/apxs\n\nand apache 2.0.35 with the following:\n\n./configure --enable-layout=GNU  --enable-info --with-ssl=/usr/local \n--enable-so"}, {"count": 1, "tags": [], "bug_id": 8453, "attachment_id": null, "id": 14629, "time": "2002-04-24T13:43:24Z", "creator": "stephan.wuelfert@fh-hof.de", "creation_time": "2002-04-24T13:43:24Z", "is_private": false, "text": "After a few tries, I changed all the $prefix/build to \n/usr/local/share/apache2/build and compiled and installed php. This time the \ninstallation was ok. The script copied libphp4.so to the right place and \ninserted the LoadModuledirective in http.conf.\n\nNow there is another error when I start apache:\n\nSyntax error on line 218 of /usr/local/etc/apache2/httpd.conf:\nCannot load /usr/local/libexec/libphp4.so into server: \n/usr/local/libexec/libphp4.so: undefined symbol: ssl_onceonlyinit\nsbin/apachectl start: httpd could not be started\n\n\nI don't have time left for today but I think this is another problem \n(hopefully). I will work on this tomorrow. Maybe there is another point in \nsomewhere.\n"}, {"attachment_id": null, "tags": [], "bug_id": 8453, "is_private": false, "count": 2, "id": 15190, "time": "2002-04-30T19:28:35Z", "creator": "slive@apache.org", "creation_time": "2002-04-30T19:28:35Z", "text": "*** Bug 8678 has been marked as a duplicate of this bug. ***"}, {"count": 3, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "is_private": false, "id": 15447, "time": "2002-05-03T20:43:35Z", "bug_id": 8453, "creation_time": "2002-05-03T20:43:35Z", "text": "I think that this was fixed in 2.0.36.  You can try a prelease version here:\nhttp://httpd.apache.org/dev/dist/\n\nIf that doesn't fix it, please reopen this report and up the version number.\n\nThanks for using Apache."}, {"count": 4, "tags": [], "bug_id": 8453, "is_private": false, "id": 15760, "creation_time": "2002-05-09T02:21:04Z", "time": "2002-05-09T02:21:04Z", "creator": "irilyth+apache@infersys.com", "text": "I'm still seeing this in 2.0.36. In my case, apxs contained\n\n  my $prefix         = \"/software/stow/apache-2.0.36\";\n\nand\n\n  get_config_vars(\"$prefix/build/config_vars.mk\",\\%config_vars);\n\nwhen that second line should have been\n\n  get_config_vars(\"$prefix/share/apache/build/config_vars.mk\",\\%config_vars);\n\nAlso, apxs later contained\n\n  my $envvars = get_vars(\"bindir\") . \"/envvars\";\n\nwhich should have been\n\n  my $envvars = get_vars(\"sbindir\") . \"/envvars\";\n\nThose two changes allowed me to configure and build PHP 4.2.0.\n\nI use a custom layout in config.layout, but it's very similar to the GNU layout;\nI can send along the details if they'd help.", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 8453, "is_private": false, "id": 15772, "creation_time": "2002-05-09T07:00:00Z", "time": "2002-05-09T07:00:00Z", "creator": "irilyth+apache@infersys.com", "text": "I spoke too soon: There are other instances of $prefix/build in apxs, As the\noriginal reporter mentioned, and they should all probably be fixed.\n\nIt doesn't look like this is fixed in CVS either (looking via ViewCVS at\nhttp://cvs.apache.org/viewcvs.cgi/httpd-2.0/support/apxs.in, which seems to be\nat version 1.37).", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 8453, "is_private": false, "text": "I also ran into this, with an Apache build I did on a Debian system from \nlatest sources. I'm trying to build Subversion, and its configuration script \nfails due to this bug. I've fixed support/apxs.in on my system, sort of. I've \njust subscribed to the developers list so that I can discuss it there. In the \nmeantime, if someone's interested in the diffs, send me an email at \ndmuller@spookydistance.com.", "id": 17032, "time": "2002-06-01T07:12:52Z", "creator": "dmuller@spookydistance.com", "creation_time": "2002-06-01T07:12:52Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 8453, "is_private": false, "text": "A fix for this was just committed to CVS.  I'm pretty sure that it will be\nin 2.0.37 (or whatever version comes next).\n\nThanks for your report, and thanks for using Apache!\n", "id": 17164, "time": "2002-06-05T12:01:13Z", "creator": "trawick@apache.org", "creation_time": "2002-06-05T12:01:13Z", "attachment_id": null}]