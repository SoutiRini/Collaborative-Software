[{"count": 0, "tags": [], "bug_id": 52831, "text": "A redirect written using mod_rewrite is broken when the URL uses a literal IPv6 address, the redirect location is missing the square brackets around the IPv6 address.\n\nTo test set the following two rewrite rules\n\nRewriteRule ^/a/                        /A/ [R,L]\nRewriteRule ^/c/                        C/ [R,L]\n\nLet's say the server's IPv6 address is fd35:299:14bc:0:21d:50ff:fe00:1a, then with http://[fd35:299:14bc:0:21d:50ff:fe00:1a]/a/ the redirect location is http://fd35:299:14bc:0:21d:50ff:fe00:1a/a/ and similar for /c.\n\nThis issue has been fixed with other mod_alias redirects and mod_proxy but it is still present in mod_rewrite as of 2.2.21.", "id": 154543, "time": "2012-03-05T18:05:39Z", "creator": "Diego.SantaCruz@spinetix.com", "creation_time": "2012-03-05T18:05:39Z", "is_private": false, "attachment_id": null}, {"attachment_id": 28421, "tags": [], "creator": "Diego.SantaCruz@spinetix.com", "text": "Created attachment 28421\nProposed patch\n\nThis patch fixed the problem for me, tested with IPv6 and IPv4 literals as well as hostname in original URL, using both defined redirects \"/a/\" and \"c/\".", "count": 1, "id": 154544, "time": "2012-03-05T18:08:06Z", "bug_id": 52831, "creation_time": "2012-03-05T18:08:06Z", "is_private": false}, {"count": 2, "tags": [], "creator": "christophe.jaillet@wanadoo.fr", "text": "Hi and sorry for the late answer.\n\nThis has been fixed in 2.3.5 (now 2.4.x branch) in r900022 a few years ago.\nThe patch is not exactly the same as the one proposed here, but it does the same thing (i.e. turn 'ap_get_server_name' into 'ap_get_server_name_for_url' where needed)\n\nI've chosen to propose for backport the same version as the one in the 2.4.x branch. (see r1678492)", "id": 182907, "time": "2015-05-09T14:13:17Z", "bug_id": 52831, "creation_time": "2015-05-09T14:13:17Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "I actually saw that this was fixed in 2.3.5 just last Friday while porting our local patches from 2.2.x to 2.4.x :-)\n\nThanks for proposing to backport to 2.2.x branch.", "attachment_id": null, "id": 182922, "creator": "Diego.SantaCruz@spinetix.com", "time": "2015-05-11T08:23:13Z", "bug_id": 52831, "creation_time": "2015-05-11T08:23:13Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 52831, "attachment_id": null, "id": 182923, "time": "2015-05-11T08:55:21Z", "creator": "ylavic.dev@gmail.com", "creation_time": "2015-05-11T08:55:21Z", "is_private": false, "text": "Backport to 2.2.30 accepted, will be in next release."}]