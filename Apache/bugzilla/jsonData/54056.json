[{"count": 0, "text": "Created attachment 29512\njstack output\n\nWe run checkstyle in parallel in our ant build, and occasionally it deadlocks.\n\nI took a thread dump (attached) and it looks like all the checkstyle threads are runnable, but Parallel is stuck waiting, so I think this might be an Ant problem.\n\nAnt 1.8.2-3 and checkstyle-5.3.jar\n\nHappens once or twice a week, so intermittently reproducible, but usually works fine the next run so not major.", "bug_id": 54056, "attachment_id": 29512, "id": 162953, "time": "2012-10-26T10:49:44Z", "creator": "daniel.leong@gmail.com", "creation_time": "2012-10-26T10:49:44Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "text": "As can be seen most threads are in runnable state on java.util.HashMap.get(HashMap.java:303).\n\nIt is known and documented that HashMap is not thread-safe.\nFrom other fault reports it can be seen that an concurrent modification may corrupt the HashMap in such way that an endless loop will occur when getting data from the HashMap.\n\nThe HashMap used in the code of checkstyle at line 161 is indeed a final static, and not protected in any way against concurrent modification.\n\nSo this is either a bug in checkstyle, or checkstyle is not designed to be thread safe - in which case it should not be run in Parallel.\n\nWhile it is stuck, your CPU load should be at 100%, as the threads are running (and not finishing, parallel is waiting for the threads to finish)", "is_private": false, "bug_id": 54056, "id": 163338, "time": "2012-11-10T00:28:50Z", "creator": "jkf@apache.org", "creation_time": "2012-11-10T00:28:50Z", "attachment_id": null}]