[{"count": 0, "attachment_id": null, "bug_id": 33697, "is_private": false, "id": 71367, "time": "2005-02-22T20:35:54Z", "creator": "muralirama@yahoo.com", "creation_time": "2005-02-22T20:35:54Z", "tags": [], "text": "Hi,\n  I am trying to use ant for executing command on a solaris server\nmachine\nlike ls -la and getting the output to get displayed on a web page\nthrough Ant Pretty Tool which uses XSL to convert and display the\nbuild.xml.\n  I could telnet to the server machine through ant's optional telnet\ntask\nbut the exec task fails. Error given below and the build.xml given at\nend.\nAlso simpe redirect hostname error to mur3.txt inside telnet task\nproduces\nmur3.txt of 0 bytes.\nDoes anyone knows where is the problem? Thanks -murali\n\nD:\\ratsplus-team-maintenance-docs>ant init\nBuildfile: build.xml\n\ninit:\n   [telnet] FANNIE MAE MANAGEMENT APPROVED PURPOSES ONLY\n   [telnet] **** SYSTEM ACTIVITIES MAY BE MONITORED ****\n   [telnet] login:\n   [telnet] e3umar\n   [telnet]  Password:\n   [telnet]\n   [telnet] Last login: Sun Feb 20 16:18:19 from CP35602-A.cox.r\n   [telnet] FANNIE MAE MANAGEMENT APPROVED PURPOSES ONLY\n   [telnet] **** SYSTEM ACTIVITIES MAY BE MONITORED ****\n   [telnet] <e3umar@dtrade01\n   [telnet] D:\\ratsplus-team-maintenance-docs\\hostname>mur3.txt\n\nBUILD FAILED\nD:\\ratsplus-team-maintenance-docs\\build.xml:15: Execute failed:\njava.io.IOExcept\nion: CreateProcess: ls -l error=2\n\nTotal time: 2 seconds\n\n<project>\n<property name=\"src\" location=\"mur\" />\n<property name=\"ls.out\" location=\"\"/>\n<property name=\"hcommand\" location=\"hostname\"/>\n<tstamp/>\n<target name=\"create\">\n        <mkdir dir=\"${src}\"/>\n</target>\n<target name=\"init\">\n        <tstamp/>\n        <telnet userid=\"e3umar\" password=\"abc123\" server=\"dtrade01\">\n                <read>e3umar@dtrade01</read>\n                <write string=\"${hcommand}>mur3.txt\"/>\n        </telnet>\n        <exec executable=\"ls\">\n          <arg value=\"-l\"/>\n        </exec>\n</target>\n<target name=\"clean\">\n        <delete dir=\"${src}\" />\n</target>\n\n</project>\n\n_______________________________________________"}, {"count": 1, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "text": "<exec> isnt trying to run \"ls -l\" on the box you telneted into, it is trying to\nrun it remotely. The error you get is because windows doesnt understand the\ncommand. Remote commands need to be stated as strings in the <telnet> or <ssh>\ntasks.\n\nmaking as invalid. change your password now we all know it :)", "id": 71383, "time": "2005-02-23T11:26:19Z", "bug_id": 33697, "creation_time": "2005-02-23T11:26:19Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 33697, "attachment_id": null, "id": 71415, "time": "2005-02-23T20:54:13Z", "creator": "muralirama@yahoo.com", "creation_time": "2005-02-23T20:54:13Z", "is_private": false, "text": "Steve,\nHow do I execute a shell script on remote unix machine by telnet?  I tried using\n<write string=\"ls\" /> also.  B ut it does nothing.  I tried like <write string \n= \"ls >mur.txt\" /> inside telnet tags but it does not create any file named \nmur.txt  .  This I have said in my previous posting in the question.  Could you \nplease give the syntax to do that by telnet or ssh?  I tried ssh also and it \nalso does nothing.  Please help.\nThanks\n-murali  \n(In reply to comment #1)\n> <exec> isnt trying to run \"ls -l\" on the box you telneted into, it is trying \nto\n> run it remotely. The error you get is because windows doesnt understand the\n> command. Remote commands need to be stated as strings in the <telnet> or <ssh>\n> tasks.\n> making as invalid. change your password now we all know it :)\n\n"}, {"count": 3, "tags": [], "bug_id": 33697, "text": "Use ssh - it can act as secure rexec or rexec itself, if security is not important (but it always is).", "id": 71416, "time": "2005-02-23T21:18:16Z", "creator": "alexeys@inventigo.com", "creation_time": "2005-02-23T21:18:16Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "bug_id": 33697, "text": "(In reply to comment #3)\n> Use ssh - it can act as secure rexec or rexec itself, if security is not \nimportant (but it always is).\nAlexey,\n  ssh command hangs when I try to run my script on that machine.  My script is \nr1.sh and it has  \n#!/bin/ksh\necho 'Hi' > zzz.txt\nMy build.xml has\n<project>\n<target name=\"init\">\n<sshexec host=\"dtrade01\" username=\"e3umar\" password=\"abc123\" \ncommand=\"ksh ./r1.sh\" trust=\"yes\">\n\t</sshexec>\n</target>\n</project>\n\nI even tried r1.sh instead of giving command as ksh ./r1.sh but still it hangs.\nPlease tell what is the way to run script on that machine?\nThanks\n-murali", "id": 71423, "time": "2005-02-23T22:20:31Z", "creator": "muralirama@yahoo.com", "creation_time": "2005-02-23T22:20:31Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "creator": "alexeys@inventigo.com", "is_private": false, "text": "I would try to run it on a command line to see what is going on:\n\nssh user@host /path/to/r1.sh\n\n(I just used \"ls\" for testing and it exits without problem). \nSetting up key authentication also helps - ssh will not ask for a password in that case.", "id": 71425, "time": "2005-02-23T22:29:03Z", "bug_id": 33697, "creation_time": "2005-02-23T22:29:03Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "muralirama@yahoo.com", "attachment_id": null, "id": 71431, "time": "2005-02-23T22:41:22Z", "bug_id": 33697, "creation_time": "2005-02-23T22:41:22Z", "is_private": false, "text": "(In reply to comment #5)\n> I would try to run it on a command line to see what is going on:\n> ssh user@host /path/to/r1.sh\n> (I just used \"ls\" for testing and it exits without problem). \n> Setting up key authentication also helps - ssh will not ask for a password in \nthat case.\n\nAlexey,\n  My machine where I am running ant is Windows 2000 and I am trying to run \nsshexec on a unix server to which I have userid and password.  When I try to \nrun on my Windows dos prompt ssh command it states ssh command not found.  Same \nproblem if I try to run ssh on that server.\nActually if I give the command to execute as any unix command like ls or cat or \nmore it works fine.  But if I give that as the shell script then it hangs.  I \nfound little late that it exceutes that shell script also after like 40 secs \nbut it hangs and does not exit.  So I have to specify timeout value to make it \nexit.  This is with respect to one unix server.  Now when I try the same \nbuild.xml with another server (where I could telnet without problem), it gives \nfollowing error:\nD:\\ratsplus-team-maintenance-docs\\build.xml:4: com.jcraft.jsch.JSchException: Se\nssion.connect: java.net.ConnectException: Connection refused: connect\nPlease suggest solution\nThanks\n-murali"}, {"count": 7, "attachment_id": null, "bug_id": 33697, "is_private": false, "id": 71436, "time": "2005-02-23T22:48:51Z", "creator": "alexeys@inventigo.com", "creation_time": "2005-02-23T22:48:51Z", "tags": [], "text": "The best way to get SSH on Windows is Cygwin. Many people prefer much lighter PuTTY.\nSSH server has to be running on a server in order to connect to it. It looks like \nyour second server does not have it running.\n\nUnix scripts \"hang\" if stdin/out/err is not closed. Try redireting all of them into a file or files. If you do not need to wait until the script finishes - there is \"nohup\" command that prevents spawned process from dying when parent process exits."}, {"count": 8, "tags": [], "creator": "muralirama@yahoo.com", "attachment_id": null, "is_private": false, "id": 71443, "time": "2005-02-23T23:48:26Z", "bug_id": 33697, "creation_time": "2005-02-23T23:48:26Z", "text": "(In reply to comment #7)\n> The best way to get SSH on Windows is Cygwin. Many people prefer much lighter \nPuTTY.\n> SSH server has to be running on a server in order to connect to it. It looks \nlike \n> your second server does not have it running.\n> Unix scripts \"hang\" if stdin/out/err is not closed. Try redireting all of \nthem into a file or files. If you do not need to wait until the script \nfinishes - there is \"nohup\" command that prevents spawned process from dying \nwhen parent process exits.\n\nAlexey,\n  The windows machine from which I run has no problem.  It is the other unix \nworkstation(say B) to which I try to run script (or ls command) it fails (means \nhangs).  The first unix machine A it works when I run ant from windows machine \nto ls or run script(though it hangs).  On Machine A on command line when I type \nssh it states ssh command not found though ant script is able to run ls or \nshell script from windows machine on this machine A.  But machine B which \nstates ssh not found I could not run even ls command on this machine B when I \nrun ant from my windows machine and it gave that error message:\nD:\\ratsplus-team-maintenance-docs\\build.xml:4: com.jcraft.jsch.JSchException: Se\nssion.connect: java.net.ConnectException: Connection refused: connect\n\nSo how do I check ssh present other than typing ssh on shell prompt on these \nunix workstation(B) and server machines(A) .  Is there any way to find if ssh \nrunning?  One more thing I dont understand is while I have ssh on the windows \nmachine from where I run ant why I need ssh on the unix machine?  (OR) is it \nthat I need ssh on both windows machine and the unix machine on which I want to \nrun the command?  \nThanks\n-murali\n"}, {"count": 9, "tags": [], "text": "Please move to the ant-user mailing list.", "is_private": false, "id": 71453, "creator": "peterreilly@apache.org", "time": "2005-02-24T10:07:24Z", "bug_id": 33697, "creation_time": "2005-02-24T10:07:24Z", "attachment_id": null}]