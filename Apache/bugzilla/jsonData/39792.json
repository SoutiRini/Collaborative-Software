[{"count": 0, "tags": [], "bug_id": 39792, "text": "I was getting null pointer exceptions when executing remote server tests from \nthe command line:\njava.lang.NullPointerException\n\tat org.apache.jmeter.engine.ConvertListeners.addNode\n(ConvertListeners.java:53)\n\tat org.apache.jorphan.collections.HashTree.traverseInto\n(HashTree.java:978)\n\tat org.apache.jorphan.collections.HashTree.traverse(HashTree.java:962)\n\tat org.apache.jmeter.engine.ClientJMeterEngine.run\n(ClientJMeterEngine.java:120)\n\tat java.lang.Thread.run(Thread.java:534)\n\nUpon tracing it through I discovered that the same HashTree created on line 453 \nof JMeter.java was being accessed by two different ClientJMeterEngine threads. \nI added synchronization around the tree in the run method of the \nClientJMeterEngine and this seemed to resolve the issues:\n\n\tpublic void run() {\n\t\tlog.info(\"running clientengine run method\");\n\t\ttestListeners = new SearchByClass(TestListener.class);\n        HashTree tree = getTestTree();\n        //synchronized here to resolve NPE issue\n        synchronized (tree) {\n            tree.traverse(testListeners);\n        }\n\t\tsampleListeners = new ConvertListeners();\n\n\t\t// TODO this is a temporary fix - see bug 23487\n\t\ttry {\n                    //synchronized here to resolve NPE issue\n\t\t    synchronized (tree) {\n\t\t        tree.traverse(sampleListeners);\n\t\t    }\n\t\t} catch (IndexOutOfBoundsException e) {\n\t\t\tlog.warn(\"Error replacing sample listeners\", e);\n\t\t}", "id": 90112, "time": "2006-06-12T21:52:06Z", "creator": "davew@leadfusion.com", "creation_time": "2006-06-12T21:52:06Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 90113, "time": "2006-06-12T22:14:11Z", "bug_id": 39792, "creation_time": "2006-06-12T22:14:11Z", "is_private": false, "text": "What command-line options did you use?\n\nWhat was the setting of remote_hosts in jmeter.properties - how many hosts were\nthere?"}, {"count": 2, "tags": [], "creator": "sebb@apache.org", "text": "Added synchronisation to both accesses in SVN r567668/r567669\n\nSee also bug 23487, which this should also fix.\n", "id": 106931, "time": "2007-08-20T05:38:57Z", "bug_id": 39792, "creation_time": "2007-08-20T05:38:57Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 39792, "attachment_id": null, "id": 106938, "time": "2007-08-20T07:08:10Z", "creator": "sebb@apache.org", "creation_time": "2007-08-20T07:08:10Z", "is_private": false, "text": "Additional testing shows this is now fixed"}, {"count": 4, "tags": [], "bug_id": 39792, "text": "*** Bug 28028 has been marked as a duplicate of this bug. ***", "id": 107580, "time": "2007-09-01T04:57:46Z", "creator": "sebb@apache.org", "creation_time": "2007-09-01T04:57:46Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "*** Bug 35164 has been marked as a duplicate of this bug. ***", "id": 107582, "time": "2007-09-01T05:00:18Z", "bug_id": 39792, "creation_time": "2007-09-01T05:00:18Z", "is_private": false}]