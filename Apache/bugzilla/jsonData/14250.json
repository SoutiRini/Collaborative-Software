[{"count": 0, "tags": [], "creator": "js@phil.uu.nl", "attachment_id": null, "id": 25666, "time": "2002-11-05T10:42:54Z", "bug_id": 14250, "creation_time": "2002-11-05T10:42:54Z", "is_private": false, "text": "I've got two groups of users, \"staff\" and \"students\".\n\nThe users' WWW dirs are nfs automounted as follows:\n\n# /etc/auto_master - Master map for automounter\n/homepages/staff auto_staffpages  -ro,hard,intr\n/homepages/stud auto_studpages  -ro,hard,intr\n\n# /etc/auto_staff - WWW directory map for automounter\n#\n*       staffserver:/users/&/WWW\n\n# /etc/auto_stud - WWW directory map for automounter\n#\n*       studentsserver:/users/&/WWW\n\nApache's UserDir is configured as follows:\n\n    UserDir /homepages/stud /homepages/staff\n\nNow the \"funny\" thing that happens is that when loading\nframesets on clients within the network - fast clients -\nthe pages in the frameset are reported 404, even though\nthey exist.\n\nWhat I see happening in the Apache logs on such a request\nto load ~user/someitem is an error loading\n/hompages/stud/user/someitem, even though\n/hompages/staff/user/someitem exists.  But Apache apparently\nnever bothers to check the second alternative, and reports\nan early failure.\n\nIf I reverse the order in UserDir, other users are in trouble.\nStudents pages work fine now, complex staff pages don't.\n\nI think this is new to Apache 1.3.27.  We never noticed it\nbefore."}, {"count": 1, "tags": [], "bug_id": 14250, "is_private": false, "text": "does your Apache have lots of fds open for logs or sockets or whatever?  (pfiles\nPID | wc -l)\n\nwhat level of Solaris?\n\nwith Solaris 7, the user id lookup functions in system libraries use stdio, and\non any Solaris 32-bit, stdio is busted with file descriptors >= 256\n\nso any sort of feature in Apache that deals with user ids can fail in this\nsituation, as the user id lookup will appear to report invalid-user\n", "id": 49403, "time": "2003-12-19T01:45:26Z", "creator": "trawick@apache.org", "creation_time": "2003-12-19T01:45:26Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Open files:\n\nroot@gramsci:pts/1(10) pfiles `cat /phil/var/apache/httpd.pid` | wc -l\n      97\n\nThat doesn't seem too much.  It *is* Solaris 7, but uid lookup doesn't\nseem to be the problem.\n\nI verified proper NFS automounting, and it works flawlessly.  I also\ndug into Apache's UserDir code, added some debugging hooks -\nonly to find out that the file system interaction *was* succesful.\n\nYet still, pages containing a lot of embedded stuff that are referenced\nusing the \"~user\" construct, fail to load properly - in unpredictable\nways.  This hasn't changed from 1.3.27 to the current version (1.3.29).", "attachment_id": null, "id": 49490, "creation_time": "2003-12-21T14:31:23Z", "time": "2003-12-21T14:31:23Z", "creator": "js@phil.uu.nl", "bug_id": 14250, "is_private": false}, {"count": 3, "tags": [], "bug_id": 14250, "is_private": false, "text": "Not that I know much of Solaris ... But I'd guess the descriptors of the httpd\nparent process are quite unrelated. Some info about the childs are probably way\nmore interesting.", "id": 49535, "time": "2003-12-22T11:39:56Z", "creator": "nd@perlig.de", "creation_time": "2003-12-22T11:39:56Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "js@phil.uu.nl", "attachment_id": null, "id": 49567, "time": "2003-12-22T19:39:08Z", "bug_id": 14250, "creation_time": "2003-12-22T19:39:08Z", "is_private": false, "text": "A typical httpd child has about 120-150 open files:\n\nroot@gramsci:pts/1(2) pfiles 21490 | wc -l \n     126\n\nNote that, although I mistakenly reported Solaris 7, Apache\nactually runs on Solaris 9.  Stdio shouldn't be the problem,\nthen..."}]