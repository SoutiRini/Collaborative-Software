[{"count": 0, "tags": [], "creator": "hartmann@metamesh.de", "attachment_id": null, "id": 185424, "time": "2015-09-22T10:15:30Z", "bug_id": 58444, "creation_time": "2015-09-22T10:15:30Z", "is_private": false, "text": "I have a JSP that extends a custom super class:\n\n<@page extends=\"com.example.MySuperServlet\" %>\n\nMy super class is defined as follows:\n\npublic abstract class MySuperServlet extends javax.servlet.GenericServlet implements javax.servlet.jsp.HttpJspPage {\n  @Override public void service(....) {\n    _jspService(req, res);\n  }\n  @Override public void jspInit() {}\n  @Override public void jspDestroy() {}\n}\n\n\nThe problem is that the generated JSP class contains a method _jspInit() which is never called.\nIt initializes an expression factory (_el_expressionfactory) and an instance manager (_jsp_instancemanager).\nNow that both are not initialized, I get NullpointerExceptions when calling the JSP, i.e. in some generated methods there is code like\n_jsp_instancemanager.newInstance(_jspx_th_my_005fcustomtag_005f0)\n\nUsually when there is no custom super class, tomcat extends the generated JSP class from org.apache.jasper.runtime.HttpJspBase which calls _jspInit() from its init(ServletContext) method.\n\nFor my custom super class it is no option to extend org.apache.jasper.runtime.HttpJspBase instead of GenericServlet because it is tomcat specific.\nIt is also no option to call _jspInit() directly from my jspInit() method, because _jspInit() is not part of the servlet/JSP spec and thus it is not defined in any interface.\n\nNote that there is no problem with tomcat 6 and 5.\n\nI haven't tested with tomcat 8, yet."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "7.0.x, 8.0.x and trunk all suffer from the same problem.\n\nI have a fix for trunk that I'll commit shortly and then I'll work on back-porting the fix to 8.0.x and 7.0.x.", "id": 185438, "time": "2015-09-22T14:57:31Z", "bug_id": 58444, "creation_time": "2015-09-22T14:57:31Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "text": "Fixed in 8.0.x for 8.0.27 onwards and in 7.0.x for 7.0.65 onwards.", "id": 185444, "time": "2015-09-22T18:54:00Z", "bug_id": 58444, "creation_time": "2015-09-22T18:54:00Z", "is_private": false, "attachment_id": null}]