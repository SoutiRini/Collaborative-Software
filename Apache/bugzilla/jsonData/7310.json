[{"count": 0, "tags": [], "creator": "khoukaz@web.de", "attachment_id": null, "id": 12110, "time": "2002-03-21T08:04:01Z", "bug_id": 7310, "creation_time": "2002-03-21T08:04:01Z", "is_private": false, "text": "I use a script like the following for downloading files (images, ascii,\n...) :\n\n<?\n$link = $save_as_name = \"test.tif\"; // or *.bmp, *.txt, ...\n$size = filesize($link);\n\nheader(\"Content-Type: application/octet-stream\");\nheader(\"Content-disposition: inline; filename=\\\"\".$save_as_name.\"\\\"\");\nheader(\"Content-Length: $size\");\nheader(\"Content-Transfer-Encoding: binary\\n\");\n\nreadfile($link);\n?>\n\nUnder Win NT/2000 it works fine, but under XP i get a distorted image\nafter downloading and opening the file. Also text files differ from the\noriginal one.\n\nThe same probleme occurs with text files. Below you will find a comparision \nbetween an original text file (httpd.conf) and what the download makes of it:\n\n------- a cutting of apache httpd.conf ----------------\n\n#LoadModule usertrack_module modules/mod_usertrack.so\n#LoadModule unique_id_module modules/mod_unique_id.so\nLoadModule php4_module modules/php4apache.dll\n\n#\n#  Reconstruction of the complete module list from all available\nmodules\n#  (static and shared ones) to achieve correct module execution order.\n#\n# The modules listed below, without a corresponding LoadModule\ndirective,\n# are static bound into the standard Apache binary distribution for\nWindows.\n#\n# Note: The order in which modules are loaded is important.  Don't\nchange\n# the order below without expert advice.\n#\n# [WHENEVER YOU CHANGE THE LOADMODULE SECTION ABOVE, UPDATE THIS TOO!]\nClearModuleList\n#AddModule mod_vhost_alias.c\nAddModule mod_env.c\nAddModule mod_log_config.c\n#AddModule mod_mime_magic.c\n...\n-------------------------------------------------------\n\n--------------- the downloaded part -------------------\n#LoadModule usertrack_module modules/mod_usertrack.so\n#LoadModule unique_id_module modules/mod_unique_id.so\nLoadModule php4_module modules/php4apache.dll\n\n#\n#  Reconstruction of the complete module list from all available\nmodules\n#  (static and shared ones) to achieve correct module execution order.\n#\n# The modules listed below, without a corresponding LoadModule\ndirectiveRCRD(.\t.\u00ed\u001f`\u00eb.....p\u00ec\u0081\u0007.\u0004.h\u000f......\u00d4\u001f`\u00eb....Y\u00b1........\u00c1\u0001..\u20ac........\n.\b\u001e`\u00eb....\u00e4\u001d`\u00eb....\u00e4\u001d`\u00eb....\u00d0\u0001......\u0001...h...........\u0002...(.\u00a8\u0001\u00d0\u0001..\u0018.\u0001.....\u0004..\n.\u00f7\u0017......\u008f\u00cb\u000e.....FILE0.\u0003.\u00c0\u001d`\u00eb....\u0010.\u0002.8.\u0001.\u00a8\u0001...\u0004..........\u0004...\u00de_..\u0001......\n.\u0010...`...........H...\u0018...,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001\n...................\\\u0005..................0...x.........\u0003.Z...\u0018.\u0001.\u0013[....\u000f.,\n\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001................\n.......\f\u0002R.E.S.U.L.T.~.3...H.T.M.t.m...0...x.........\u0002.^...\u0018.\u0001.\u0013[....\u000f.,\n\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001,\u00e5\u00d9\u00bc\u0017\u00b9\u00c1\u0001................\n.....Y\u00b1\u000e\u0001r.e.s.u.l.t.s.[.2.]...h.t.m...\u20ac...\u0018.....\u0018...\u0001.....\u0018...\u00ff\u00ff\u00ff\u00ff\u201ayG\u0011H\n\u001e`\u00eb....\b\u001e`\u00eb............(.......\u0001...h...........\u001b.\u0001.(...(.\b.\u0018............\n.......Z\u203a\u2021\u00e1\u0018.\u0018.S\u001e`\u00eb....................@.......\u0001...h...........\u0006.\u0005.(...(\n.\u0018.\u0018.\u0001.\u02c6\u0001..\u0004...\u00f7\u0017......\u008f\u00cb\u000e.....\u20ac...\u0018.....\u0018...\u0001.....\u0018...a\u001e`\u00eb....S\u001e`\u00eb....S\n\u001e`\u00eb....p.......\u0001...h...........\u0005.\u0006.(.H.p...\u0018.\u0001.\u02c6\u0001..\u0004...\u00f7\u0017......\u008f\u00cb\u000e.....\u20ac\n...H...\u0001.....\u0004.........\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff\u00ff@...................................\u00a33<\u00f8u\n\u001e`\u00eb....a\u001e`\u00eb....a\u001e`\u00eb....0.......\u0001...h...........\u0015.\u0016.(.\b.(.\b.\u00ac\u0002\u0001..........\n.......R\u00e6\u0007...Y\u00b1~\u001c..\u0001...\u0081\u001e`\u00eb....u\u001e`\u00eb....u\u001e`\u00eb....X.......\u0001...h...........\u000b\n.\u000b.(.\u0018.@.\u0018.\u0018.\u0001.\u02c6\u0001..\u0004...\u00f7\u0017......\u008f\u00cb\u000e......\u0010...............................\n...............\u2019\u001e`\u00eb....\u0081\u001e`\u00eb....\u0081\u001e`\u00eb....8.......\u0001...h...........\t.\t.(.\b.0\n.\b.\u0018.\u0001.\u02c6\u0001@.\u0004...\u00f7\u0017......\u008f\u00cb\u000e.....!\u0001~\u001c.\u2018\u00f0\u0081....\u00a33<\u00f8\u0178\u001e`\u00eb....\u2019\u001e`\u00eb............(\n.......\u0001...h...........\u001b.\u0001.(...(.\b.\u0018................... \u00db\u00fc\u0081.y\u001f\u00ef\u00aa\u001e`\u00eb.....\n...............0.......\u0001...h...........\u0016.\u0015.(.\b.(.\b.\u00ac\u0002\u0001.........\u0002.......T\n\u00e6\u0007.....@\u001d..\u0002...\u00b6\u001e`\u00eb....\u00aa\u001e`\u00eb....\u00aa\u001e`\u00eb....H.......\u0001...h...........\t.\t.(.\u000b.8\n.\u000b.\u0018.\u0001.\u02c6\u0001E.\u0004...\u00f3\u0017....Y\u00b1\u2039\u00cb\u000e.....\u0001\u007f\u0001\u0001.\u00df\u00e1\u00c4w\u001f\u00ef.....\u0003\u007f\u0001\u0001.=\u00f8\u00e8A\u00d9\u0081.....\u00c5\u001e`\u00eb....\u00b6\n\u001e`\u00eb....\u00b6\u001e`\u00eb....X.......\u0001...h...........\u000b.\u000b.(.\u0018.@.\u0018.\u0018.\u0001.\u02c6\u0001..\u0004...\u00f3\u0017......\u2039\n\u00cb\u000e......\n......_\u0010......_\u0010.......@......_\u0010......_\u0010......\u00d6\u001e`\u00eb....\u00c5\u001e`\u00eb....\u00c5\u001e`\u00eb....\u02dc.\n......\u0001...h...........\u0014.\u0014.(.8.`.8.\u00c4\u0010\u0001...\u00e0\u0002....\u0002.......\u00cb\u00bd\u0007.....\u00ca\u00a6v\u00bb\u0017\u00b9\u00c1\u0001~k\n{\u00bb\u0017\u00b9\u00c1\u0001~k{\u00bb\u0017\u00b9\u00c1\u0001~k{\u00bb\u0017\u00b9\u00c1\u0001. ......_\u0010......\n.......\u00ca\u00a6v\u00bb\u0017\u00b9\u00c1\u0001~k{\u00bb\u0017\u00b9\u00c1\u0001~k{\u00bb\u0017\u00b9\u00c1\u0001~k{\u00bb\u0017\u00b9\u00c1\u0001.@......_\u0010......\n\n----------------------------------------------------------\n\nThe size of the files is always correct.\n\nI use Apache 1.3.23 and PHP 4.1.1 as module. If i call the script as CGI under \napache it works fine. With Win NT/2000 there are no problems (ISAPI or CGI).\n\nI have already repoted a bug to PHP:\nhttp://bugs.php.net/?id=15613&edit=2\n\nThe guys from PHP think it is a bug in apache."}, {"count": 1, "text": "Actually, it is an XP bug.  Please see:\nhttp://www.apache.org/dist/httpd/binaries/win32/#xpbug", "bug_id": 7310, "attachment_id": null, "id": 12134, "time": "2002-03-21T15:04:27Z", "creator": "slive@apache.org", "creation_time": "2002-03-21T15:04:27Z", "tags": [], "is_private": false}]