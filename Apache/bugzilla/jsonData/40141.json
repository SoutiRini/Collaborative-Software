[{"count": 0, "tags": [], "text": "There is a problem when I started Apache2.2.2 with mod_ssl enabled. \nOS is AIX 5.3.\nApache is Apache2.2.2.\nOpenSSL is openssl-0.9.8b.\nWhen I start Apache with mod_ssl disabled, It's worked fine. But When I enabled \nmod_ssl, there is no error message and there is no httpd process too. You can \nsee below:\n\n# pwd   \n/WebApp/apache222/conf\n# ../bin/apachectl -D SSL  -k start\nApache/2.2.2 mod_ssl/2.2.2 (Pass Phrase Dialog)\nSome of your private key files are encrypted for security reasons.\nIn order to read them you have to provide the pass phrases.\n\nServer localhost:443 (RSA)\nEnter pass phrase:\n\nOK: Pass Phrase Dialog successful.\n# ps -ef\n     UID    PID   PPID   C    STIME    TTY  TIME CMD\n    root      1      0   0   Jul 26      -  0:01 /etc/init \n    root  73934 209092   0   Jul 26      -  0:00 /usr/sbin/portmap \n    root  82042      1   0   Jul 26      -  1:48 /usr/sbin/syncd 60 \n    root  86048 209092   0   Jul 26      -  0:33 /usr/sbin/aixmibd \n    root  94430 209092   0   Jul 26      -  0:00 /usr/sbin/rsct/bin/IBM.ERrmd \n    root  98410      1   0   Jul 26      -  0:00 /usr/ccs/bin/shlap64 \n    root 110598 209092   0   Jul 26      -  0:00 /usr/sbin/inetd \n    root 114906 209092   0   Jul 26      -  0:12 /usr/sbin/rsct/bin/rmcd -r \n    root 122958      1   0   Jul 26      -  0:00 /usr/lib/errdemon \n    root 139480 209092   0   Jul 26      -  0:00 /usr/sbin/snmpmibd \n    root 143612 209092   0   Jul 26      -  0:01 /usr/dt/bin/dtlogin \n    root 147634 209092   0   Jul 26      -  0:00 /usr/sbin/hostmibd \n    root 151714 209092   0   Jul 26      -  0:00 /usr/sbin/muxatmd \n    root 176150 209092   0   Jul 26      -  1:41 /usr/opt/ifor/bin/i4llmd -b -n \nwcclwts -l /var/ifor/llmlg \n    root 180334 209092   0   Jul 26      -  0:00 /usr/sbin/syslogd \n    root 192686 209092   0   Jul 26      -  0:00 /usr/sbin/writesrv \n    root 196802 209092   0   Jul 26      -  0:00 /usr/sbin/rsct/bin/IBM.DRMd \n  daemon 200784 209092   0   Jul 26      -  0:00 /usr/sbin/rpc.statd -d 0 -t 50 \n    root 205016 209092   0   Jul 26      -  0:00 /usr/sbin/biod 6 \n    root 209092      1   0   Jul 26      -  0:00 /usr/sbin/srcmstr \n    root 213184 209092   0   Jul 26      -  0:00 /usr/sbin/snmpd \n    root 217240 209092   0   Jul 26      -  0:05 /usr/sbin/sshd \n    root 233632      1   0   Jul 26      -  0:00 /usr/sbin/uprintfd \n    root 237690 209092   0   Jul 26      -  0:00 /usr/sbin/qdaemon \n    root 241786 209092   0   Jul 26      -  0:00 /usr/sbin/rpc.lockd -d 0 \n    root 245888      1   0   Jul 26      -  0:00 /usr/sbin/cron \n    root 266374 209092   0   Jul 26      -  \n0:00 /usr/sbin/rsct/bin/IBM.AuditRMd \n    root 270472 209092   0   Jul 26      -  \n0:00 /usr/sbin/rsct/bin/IBM.ServiceRMd \n    root 274568 209092   0   Jul 26      -  \n0:08 /usr/sbin/rsct/bin/IBM.CSMAgentRMd \n    root 278664 209092   0   Jul 26      -  0:00 /usr/sbin/rsct/bin/IBM.HostRMd \n    root 282754 217240   0 13:51:34      -  0:00 sshd: root@pts/0 \n    root 294922 454784   1 17:49:47  pts/1  0:00 ps -ef \n    root 311524 176150   0   Jul 26      -  0:00 /usr/opt/ifor/bin/i4llmd -b -n \nwcclwts -l /var/ifor/llmlg \n    root 315412 217240   0 18:58:08      -  0:00 sshd: root@notty \n    root 327708 315412   0 18:58:08      -  0:00 -ksh \n    root 336056 282754   0 13:51:43  pts/0  0:00 -ksh \n    root 348400      1   0   Jul 27   vty0  0:00 -ksh \n    root 393444 348400   0   Jul 27   vty0  0:00 smitty \n    root 434286 217240   2 15:18:53      -  0:03 sshd: root@pts/1 \n    root 454784 434286   0 15:19:02  pts/1  0:00 -ksh \n\nBest regards,\nPornpan", "is_private": false, "id": 91725, "creator": "pornpan.ngamwiriyakun@ge.com", "time": "2006-07-31T09:58:04Z", "bug_id": 40141, "creation_time": "2006-07-31T09:58:04Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 40141, "is_private": false, "count": 1, "id": 92023, "time": "2006-08-08T13:13:47Z", "creator": "jorton@redhat.com", "creation_time": "2006-08-08T13:13:47Z", "text": "Please provide trace/truss/kdump/ktrace-style output from running \"httpd -X\"."}, {"count": 2, "tags": [], "bug_id": 40141, "attachment_id": 18691, "is_private": false, "id": 92072, "time": "2006-08-09T02:33:49Z", "creator": "pornpan.ngamwiriyakun@ge.com", "creation_time": "2006-08-09T02:33:49Z", "text": "Created attachment 18691\ntruss -a /WebApp/apache222mod/bin/httpd -X > truss.out 2>&1\n\nI ran command \"truss -a /WebApp/apache222mod/bin/httpd -X > truss.out 2>&1\" and\ngot the truss.out. If you need more information, please let me know."}, {"count": 3, "tags": [], "creator": "amichai2@amichais.net", "is_private": false, "id": 93194, "creation_time": "2006-09-08T09:19:14Z", "time": "2006-09-08T09:19:14Z", "bug_id": 40141, "text": "This may or may not be the same bug, but I have the same problem with Apache\n2.2.3 on WinXP. With the SSLEngine on statement in a vhost the service crashes\nduring startup, and when the statement is commented out everything works fine\n(without SSL, of course). Since the server crashes violently (access violation),\nthe logs don't show any errors that may be the cause of this.\n\nThis happens consistently. I'm using the exact same setup (keys,certs,config) as\nin the previous Apache 2.0.53 where everything worked fine (brought the config\nup to date with version config changes, but the SSL related config remains\nexactly the same).\n\nUsing debug info for mod_ssl the exception turns out to be an access violation\nin ssl_util.c line 203, in the ssl_asn1_table_set method, where the asn1 pointer\nis not null but is an invalid value, causing the access violation. Unfortunately\nI'm not familiar enough with the apache code base to be able to figure out\nwhat's causing this to happen.", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 40141, "attachment_id": null, "id": 93217, "time": "2006-09-08T11:49:52Z", "creator": "rpluem@apache.org", "creation_time": "2006-09-08T11:49:52Z", "is_private": false, "text": "Please try to obtain a backtrace (see also\nhttp://httpd.apache.org/dev/debugging.html#backtrace-win)"}, {"count": 5, "tags": [], "creator": "amichai2@amichais.net", "attachment_id": null, "is_private": false, "id": 93220, "time": "2006-09-08T14:06:31Z", "bug_id": 40141, "creation_time": "2006-09-08T14:06:31Z", "text": "Here's the stack trace:\n\nmod_ssl.so!ssl_asn1_table_set(apr_hash_t * table=0x005ef698, const char *\nkey=0x006366f8, long length=0x000001d5)  Line 203\nmod_ssl.so!ssl_pphrase_Handle(server_rec * s=0x0026c170, apr_pool_t *\np=0x005c0060)  Line 237\nmod_ssl.so!ssl_init_Module(apr_pool_t * p=0x0026a240, apr_pool_t *\nplog=0x005f01a8, apr_pool_t * ptemp=0x005c0060, server_rec *\nbase_server=0x0026c170)  Line 261 + 0x7\nlibhttpd.dll!ap_run_post_config(apr_pool_t * pconf=0x0026a240, apr_pool_t *\nplog=0x005f01a8, apr_pool_t * ptemp=0x005c0060, server_rec * s=0x0026c170)  Line\n94 + 0x33\nhttpd.exe!main(int argc=0x00000003, const char * const * argv=0x00262870)  Line\n706 + 0x10\nhttpd.exe!_mainCRTStartup()  + 0xe3\nkernel32.dll!7c816fd7()\n"}, {"count": 6, "tags": [], "text": "I am running in same problem here,  I even tried to use latest open ssl openssl-\n0.9.8c and latest Apache 2.2.3,  still doesn't work.  Any solution?\n\n--Tony", "is_private": false, "id": 94021, "creator": "tfan@kronos.com", "time": "2006-09-22T20:44:03Z", "bug_id": 40141, "creation_time": "2006-09-22T20:44:03Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 40141, "attachment_id": null, "id": 94744, "time": "2006-10-11T15:01:11Z", "creator": "smccants@us.ibm.com", "creation_time": "2006-10-11T15:01:11Z", "is_private": false, "text": "Ran into a similar looking problem (at least on the surface) on AIX 5.3 with\nApache 2.2.3.  I found this work around:\n\nhttp://mail-archives.apache.org/mod_mbox/httpd-users/200603.mbox/%3C442983F6.1050601@suny.edu%3E\n\nFor the record, my setup is different from Benard's.  I don't have an old Apache\nserver running, but found it necessary to implement the workaround anyways.\n\nMaybe that will help someone else.\n"}, {"count": 8, "tags": [], "creator": "amichai2@amichais.net", "is_private": false, "text": "On WinXP the suggested solution (using an explicit IP in the Listen directive)\ndoes not work. I added the IP on both ports (80,443) and it still crashes on\nstartup, just as it did before. Any other suggestions/fixes? Once again, it\nworked well on 2.0 and fails on 2.2.3, so perhaps it's a code change in between\nthat's causing this...?", "id": 94750, "time": "2006-10-11T22:55:50Z", "bug_id": 40141, "creation_time": "2006-10-11T22:55:50Z", "attachment_id": null}, {"count": 9, "tags": [], "text": "Does anyone is looking at this problem?  I am still waiting for a solution for \nAIX+Apache2.2+mod_ssl.  Thanks.\n\n--Tony \n", "attachment_id": null, "bug_id": 40141, "id": 94857, "time": "2006-10-16T08:00:41Z", "creator": "tfan@kronos.com", "creation_time": "2006-10-16T08:00:41Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 40141, "is_private": false, "id": 97779, "attachment_id": null, "creator": "tfan@kronos.com", "creation_time": "2007-01-08T09:30:44Z", "time": "2007-01-08T09:30:44Z", "text": "Any updates on this?"}, {"count": 11, "tags": [], "text": "I just tried to use Apache 2.2.4 and openssl 0.9.8d in AIX 5.3, everything is \nworking this time. It looks like this new Apache 2.2.4 resolved this issue.\n\n--Tony ", "is_private": false, "id": 98465, "creator": "tfan@kronos.com", "time": "2007-01-24T10:58:07Z", "bug_id": 40141, "creation_time": "2007-01-24T10:58:07Z", "attachment_id": null}, {"count": 12, "tags": [], "text": "From reporter, presuming 2.2.4 resolved this issue.", "is_private": false, "id": 98469, "creator": "wrowe@apache.org", "time": "2007-01-24T12:29:00Z", "bug_id": 40141, "creation_time": "2007-01-24T12:29:00Z", "attachment_id": null}, {"count": 13, "tags": [], "text": "I can confirm the problem is fixed also on WinXP with version 2.2.4\n\nIf it helps anyone, I had installed 2.2.4 no-ssl standard distribution, and\nshortly afterwards while searching for potential mod_ssl binaries for win32 I\ncame across some apache newsgroup discussions pointing to the new SSL version of\nthe distribution (hopefully soon to be released officially) at\nhttp://httpd.apache.org/dev/dist/, dropped mod_ssl.so into the already installed\n2.2.4 modules folder, uncommented the SSL configuration which I had commented\nout when the previous versions started crashing, and everything works well now.\n", "is_private": false, "id": 99606, "creator": "amichai2@amichais.net", "time": "2007-02-21T01:42:16Z", "bug_id": 40141, "creation_time": "2007-02-21T01:42:16Z", "attachment_id": null}]