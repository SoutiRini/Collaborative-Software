[{"count": 0, "tags": [], "bug_id": 42715, "attachment_id": null, "is_private": false, "id": 104598, "time": "2007-06-21T08:04:57Z", "creator": "rbaker@bea.com", "creation_time": "2007-06-21T08:04:57Z", "text": "The ant.version property is unset in imported build scripts using ANT 1.7. I\nhave a build file that uses an import \"<import file=\"newBuild.xml\"/>\". In this\nfile, we do a check to see if the user is using the correct version of ANT using\nthe following:\n\n    <condition property=\"ant.version.okay\">\n        <or>\n          <contains string=\"${ant.version}\" substring=\"1.6\"/>\n          <contains string=\"${ant.version}\" substring=\"1.7\"/>\n        </or>\n    </condition>\n\nThe property was never set, so I checked to see if the property was set by doing\nthis:\n<echo>\n\tANT VERSION: ${ant.version}\n</echo> \n\nAnd this is exactly what appeared on the output:\n\nANT VERSION: ${ant.version}\n\nSo, it looks like the property gets lost somehow. I tested this on two different\nboxes, so I'm pretty sure this is a bug."}, {"count": 1, "tags": [], "bug_id": 42715, "attachment_id": null, "is_private": false, "id": 104599, "time": "2007-06-21T08:25:38Z", "creator": "stevel@apache.org", "creation_time": "2007-06-21T08:25:38Z", "text": "\n\n*** This bug has been marked as a duplicate of 42263 ***"}, {"count": 2, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "text": "oh, rereading its not quite the same; its import and not subant. Reopening.", "id": 104601, "time": "2007-06-21T08:26:55Z", "bug_id": 42715, "creation_time": "2007-06-21T08:26:55Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 42715, "attachment_id": null, "id": 104602, "creation_time": "2007-06-21T09:12:20Z", "time": "2007-06-21T09:12:20Z", "creator": "peterreilly@apache.org", "text": "I think that this is the same as  42263.\n\nPlease check your build file with a svn build of ant,\nor provide an example set of build files that\nshow the problem.", "is_private": false}, {"count": 4, "tags": [], "bug_id": 42715, "attachment_id": null, "is_private": false, "id": 104604, "time": "2007-06-21T12:38:13Z", "creator": "rbaker@bea.com", "creation_time": "2007-06-21T12:38:13Z", "text": "This is happening when I am testing the Beehive dist. You can get the build\nfiles and do a repro by following the instructions here:\nhttp://wiki.apache.org/beehive/For_Beehive_Developers. Once you set up the\nenvironment to use ANT 1.7, you can repro."}, {"attachment_id": null, "tags": [], "bug_id": 42715, "is_private": false, "count": 5, "id": 104605, "time": "2007-06-21T13:09:55Z", "creator": "peterreilly@apache.org", "creation_time": "2007-06-21T13:09:55Z", "text": "The build file:\nhttp://svn.apache.org/repos/asf/beehive/trunk/ant/beehive-runtime.xml\ncontains the <ant inheritAll=\"false\"/> task which will trigger\nthis the 42263 bug:\n    <target name=\"deploy.beehive.webapp.runtime\" description=\"Deploy the Beehive\nwebapp runtime given a webapp root as -Dwebapp.dir\">\n        <ant target=\"deploy.netui\" dir=\"${beehive.home}/netui/\" inheritAll=\"false\">\n            <property name=\"webapp.dir\" location=\"${webapp.dir}\"/>\n        </ant>\n    </target>\n\n    <target name=\"deploy.controls.webapp.runtime\" description=\"Deploy the\nBeehive controls runtime given a webapp root as -Dwebapp.dir\">\n        <ant target=\"deploy.controls.runtime\" dir=\"${beehive.home}/controls/\"\ninheritAll=\"false\">\n            <property name=\"webapp.dir\" location=\"${webapp.dir}\"/>\n        </ant>\n    </target>\n\nThe project should work with ant 1.7.1(svn), in the mean-time\nyou can use the work-around of passing the ant.version to\nthe nested ant project:\n   <ant target=....>\n     <property name=\"ant.version\" value=\"${ant.version}\"/>\n      ...\n    </ant>\nRe-Marking as duplicate\n\n*** This bug has been marked as a duplicate of 42263 ***"}]