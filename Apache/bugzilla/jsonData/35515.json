[{"count": 0, "tags": [], "bug_id": 35515, "text": "It seems not possible to convert directly WMF files to SVG Documents. An\nException is explicitely raised in WMFTranscoder if  trying to do so. Further,\nif trying to removed this Exception raising, the resulting SVG Document has no\ncontent, appart for the svg root Element.\n\nThe cause of this problem seems in fact to be the getRoot() method in the\nSVGGraphics2D class : the code is simply :\n    public Element getRoot(){\n        return getRoot(null);\n    }\nwhich calls in the same class :\n    public Element getRoot(Element svgRoot) {\n        svgRoot = domTreeManager.getRoot(svgRoot);\n        ...\n        return svgRoot;\n    }\n\nThe DOMTreemanager creates a new svg Element in the tree, even if it already\nexists. I think the code in SVGGraphics2D  should be something like that :\n    public Element getRoot(){\n        Document doc = getDOMFactory();\n        Element elt = doc.getDocumentElement();\n        if (elt.getTagName().equals(SVGConstants.SVG_SVG_TAG)) return getRoot(elt);\n        else {\n            NodeList list = elt.getElementsByTagName(SVGConstants.SVG_SVG_TAG);\n            if ((list == null) || (list.getLength() == 0))  return getRoot(null);\n            else return getRoot((Element)(list.item(0)));\n        }\n        return getRoot(null);\n    }", "id": 76740, "time": "2005-06-27T17:17:55Z", "creator": "herve.girod@club-internet.fr", "creation_time": "2005-06-27T17:17:55Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 35515, "text": "I added dependency to bug 36309 because there is no exception anymore after\ncorrection of this bug; it was intended when I sent a patch for the wmf package\n (but the resulting SVG Document is still empty).", "id": 93069, "time": "2006-09-05T22:04:46Z", "creator": "herve.girod@club-internet.fr", "creation_time": "2006-09-05T22:04:46Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": 18823, "bug_id": 35515, "text": "Created attachment 18823\npatch to correct bug 35515\n\nThis patch correct the last problems remaining after correction of bug 36309\n(the Document remained empty). After applying this patch, the result is OK.\nTHis can be tested by transcoding any WMF image as a Document, and loading the\nresulting DOcument in a JSVGCanvas.", "id": 93070, "time": "2006-09-05T22:10:54Z", "creator": "herve.girod@club-internet.fr", "creation_time": "2006-09-05T22:10:54Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "herve.girod@club-internet.fr", "text": "(In reply to comment #2)\n> Created an attachment (id=18823) [edit]\n> patch to correct bug 35515\n> \n> This patch correct the last problems remaining after correction of bug 36309\n> (the Document remained empty). After applying this patch, the result is OK.\n> THis can be tested by transcoding any WMF image as a Document, and loading the\n> resulting DOcument in a JSVGCanvas.\n\nTo be more precise, there is no more exception when converting directly WMF\nfiles to SVG Documents (without writing a SVG File prior to opening the SVG\nDocument), but still nothing appear after doing that. The above patch allow to\ncreate and open directly an SVG Document after transcoding. This problem is not\nspecific to WMF conversion, it will happen anytime the SVGGraphics2D class is used.\n", "id": 98605, "time": "2007-01-27T03:41:31Z", "bug_id": 35515, "creation_time": "2007-01-27T03:41:31Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 35515, "attachment_id": null, "id": 98606, "time": "2007-01-27T03:51:32Z", "creator": "deweese@apache.org", "creation_time": "2007-01-27T03:51:32Z", "is_private": false, "text": "Hi Herve,\n   It is intentional that the SVGGraphics2D does not change the document\nthat you give it.  The document is used only as a factory for DOM elements.\nIf you want to append the results of the SVGGraphics2D to a document then\nyou need to pass the element you want the content appended to into the \ngetRoot method.\n\n'getRoot()' intentionally returns a disconnected tree.\n"}]