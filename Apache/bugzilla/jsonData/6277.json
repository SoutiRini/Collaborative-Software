[{"count": 0, "tags": [], "bug_id": 6277, "attachment_id": null, "text": "I recently installed 1.4.1 on a machine that I have 1.3 working on.  I changed \nthe path env. variable to point to it first.  My build script fails to execute \nand gives the following output:\n\ncompile:\n    [javac] Modern compiler is not available - using classic compiler\n    [javac] Compiling 44 source files to C:\\FuelpathGE\\classes\n\nBUILD FAILED\n\nC:\\FuelPathGE\\buildge.xml:79: Cannot use classic compiler, as it is not availabl\ne A common solution is to set the environment variable JAVA_HOME to your jdk dir\nectory.\n\nTotal time: 2 seconds\n\nIf all I do is change the path variable to point to the 1.3 installation first, \nthen it works just fine.  JAVA_HOME is set correctly to c:\\JDK1.3.1.", "id": 10397, "time": "2002-02-06T17:17:19Z", "creator": "dmiller@kyrus.com", "creation_time": "2002-02-06T17:17:19Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 6277, "attachment_id": null, "is_private": false, "id": 10813, "time": "2002-02-16T18:22:30Z", "creator": "steve_l@iseran.com", "creation_time": "2002-02-16T18:22:30Z", "text": "what does a verbose run say? What are your environment variables?"}, {"count": 2, "tags": [], "bug_id": 6277, "attachment_id": null, "text": "Do you only change PATH or do you change ANT_HOME as well?", "id": 10894, "time": "2002-02-19T13:17:49Z", "creator": "bodewig@apache.org", "creation_time": "2002-02-19T13:17:49Z", "is_private": false}, {"count": 3, "tags": [], "text": "I don't normally have ant_home set in my environment.  I set it to c:\\jakarta-\nant-1.4.1 and it does not make any difference.", "attachment_id": null, "id": 11108, "creator": "dmiller@kyrus.com", "time": "2002-02-25T16:12:14Z", "bug_id": 6277, "creation_time": "2002-02-25T16:12:14Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 6277, "attachment_id": null, "text": "Adding -verbose to the command line does not yield much more information:\n\n                Here there are a lot of messages that say this or\n                that file is up to date.\n\n    [javac] Modern compiler is not available - using classic compiler\n    [javac] Compiling 1 source file to C:\\FuelpathGE\\classes\n    [javac] Using classic compiler\n    [javac] Compilation args: -deprecation -d C:\\FuelpathGE\\classes -classpath \nC:\\FuelpathGE\\classes;C:\\FuelpathGE\\jars\\comm.jar;C:\\FuelpathGE\\jars\\ejb.jar;C:\\\nFuelpathGE\\jars\\xerces.jar;C:\\FuelpathGE\\jars\\interclient.jar;C:\\FuelpathGE\\jars\n\\kutils.jar;C:\\FuelpathGE\\jars\\jms.jar;C:\\FuelpathGE\\jars\\j2ee.jar;C:\\FuelpathGE\n\\jars\\kfuelui.jar;C:\\jdk1.3.1\\lib\\tools.jar;C:\\jakarta-ant-1.4.1\n\\lib\\kant.jar;C:\\jakarta-ant-1.4.1\\lib\\crimson.jar;C:\\jakarta-ant-1.4.1\n\\lib\\jaxp.jar;C:\\jakarta-ant-1.4.1\\lib\\ant.jar -sourcepath C:\\FuelpathGE\\src -\ng:none -O\n    [javac] File to be compiled:\n    \nC:\\FuelpathGE\\src\\com\\kyrus\\fuelpath\\businessrules\\actions\\TossRefundAction.java\n\n\nBUILD FAILED\n\nC:\\FuelPathGE\\buildge.xml:81: Cannot use classic compiler, as it is not \navailable A common solution is to set the environment variable JAVA_HOME to \nyour jdk directory.\n        at org.apache.tools.ant.taskdefs.compilers.Javac12.execute\n(Javac12.java:96)\n        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:557)\n        at org.apache.tools.ant.Task.perform(Task.java:217)\n        at org.apache.tools.ant.Target.execute(Target.java:184)\n        at org.apache.tools.ant.Target.performTasks(Target.java:202)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:601)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:560)\n        at org.apache.tools.ant.Main.runBuild(Main.java:454)\n        at org.apache.tools.ant.Main.start(Main.java:153)\n        at org.apache.tools.ant.Main.main(Main.java:176)\n\nTotal time: 2 seconds\n", "id": 11109, "time": "2002-02-25T16:24:11Z", "creator": "dmiller@kyrus.com", "creation_time": "2002-02-25T16:24:11Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 6277, "attachment_id": null, "text": "What platform? I know that the JDK on some platforms do not support the \"classic\" option (like our \nAIX box, and I think our Solaris box as well).", "id": 11114, "time": "2002-02-25T16:49:11Z", "creator": "malachi@eoti.org", "creation_time": "2002-02-25T16:49:11Z", "is_private": false}, {"count": 6, "tags": [], "text": "Windows 2K", "attachment_id": null, "id": 11132, "creator": "dmiller@kyrus.com", "time": "2002-02-25T19:39:10Z", "bug_id": 6277, "creation_time": "2002-02-25T19:39:10Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 6277, "attachment_id": null, "text": "I have the same problem, the same exact output when I run ant.  I have narrowed \nit down to the fact that the ant process is looking for the javac command in \nthe jre folder:\n\nAnt version 1.4.1 compiled on October 11 2001\nBuildfile: build.xml\nDetected Java version: 1.4 in: c:\\j2sdk1.4.0\\jre\nDetected OS: Windows 2000\n\nI cannot get it to use the correct javac command under:\nc:\\j2sdk1.4.0\\bin\n\nMy system snapshot:\nJDK 1.4.0\nAnt 1.4.1\nJAVA_HOME set\nANT_HOME set\nW2K - SP2\n", "id": 12206, "time": "2002-03-23T00:43:39Z", "creator": "cosmic_c@yahoo.com", "creation_time": "2002-03-23T00:43:39Z", "is_private": false}, {"count": 8, "tags": [], "text": "A few questions\n\n1. is JAVACMD set?\n2. is there a copy of java.exe in winnt\\system32?\n\nBTW, the JRE reference is normal, here is my output under Linux\nDetected Java version: 1.3 in: /usr/java/jdk1.3.1/jre\nDetected OS: Linux\n\nor for JDK 1.4\n\nDetected Java version: 1.4 in: /usr/java/j2sdk1.4.0/jre\nDetected OS: Linux\n\nThe next step would be to turn echo on at the top of the ant.bat script in\n%ANT_HOME%\\bin and send us the output.", "attachment_id": null, "id": 12207, "creator": "conor@apache.org", "time": "2002-03-23T09:22:38Z", "bug_id": 6277, "creation_time": "2002-03-23T09:22:38Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 6277, "attachment_id": null, "text": "I do not have JAVACMD set.  I do not have a copy of java.exe in winnt or \nwinnt\\system32.  Here's the output for the ant.bat:\n\n\nC:\\FuelPathGE>rem @echo off \n\nC:\\FuelPathGE>if exist \"\\antrc_pre.bat\" call \"\\antrc_pre.bat\" \n\nC:\\FuelPathGE>if not \"Windows_NT\" == \"Windows_NT\" goto win9xStart \n\nC:\\FuelPathGE>rem c:\\jakarta-ant-1.4.1\\bin\\ is name of current script under NT \n\nC:\\FuelPathGE>set DEFAULT_ANT_HOME=c:\\jakarta-ant-1.4.1\\bin\\ \n\nC:\\FuelPathGE>rem : operator works similar to make : operator \n\nC:\\FuelPathGE>set DEFAULT_ANT_HOME=c:\\jakarta-ant-1.4.1\\bin\\\\.. \n\nC:\\FuelPathGE>if \"\" == \"\" set ANT_HOME=c:\\jakarta-ant-1.4.1\\bin\\\\.. \n\nC:\\FuelPathGE>set DEFAULT_ANT_HOME= \n\nC:\\FuelPathGE>rem Need to check if we are using the 4NT shell... \n\nC:\\FuelPathGE>if \"eval[2+2]\" == \"4\" goto setup4NT \n\nC:\\FuelPathGE>rem On NT/2K grab all arguments at once \n\nC:\\FuelPathGE>set ANT_CMD_LINE_ARGS=-buildfile buildge.xml \n\nC:\\FuelPathGE>goto doneStart \n\nC:\\FuelPathGE>rem This label provides a place for the argument list loop to \nbreak out \n\nC:\\FuelPathGE>rem and for NT handling to skip to. \n\nC:\\FuelPathGE>rem find ANT_HOME \n\nC:\\FuelPathGE>if not \"c:\\jakarta-ant-1.4.1\\bin\\\\..\" == \"\" goto checkJava \n\nC:\\FuelPathGE>set _JAVACMD= \n\nC:\\FuelPathGE>set LOCALCLASSPATH=\"C:\\Program Files\\InterBase \nCorp\\InterClient\\interclient.jar\" \n\nC:\\FuelPathGE>for %i in (\"c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\*.jar\") do \ncall \"c:\\jakarta-ant-1.4.1\\bin\\\\..\\bin\\lcp.bat\" %i \n\nC:\\FuelPathGE>call \"c:\\jakarta-ant-1.4.1\\bin\\\\..\\bin\\lcp.bat\" c:\\jakarta-ant-\n1.4.1\\bin\\\\..\\lib\\ant.jar \n\nC:\\FuelPathGE>set _CLASSPATHCOMPONENT=c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\ant.jar \n\nC:\\FuelPathGE>if a == a goto gotAllArgs \n\nC:\\FuelPathGE>set LOCALCLASSPATH=c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\lib\\ant.jar;\"C:\\Program Files\\InterBase \nCorp\\InterClient\\interclient.jar\" \nC:\\FuelPathGE>call \"c:\\jakarta-ant-1.4.1\\bin\\\\..\\bin\\lcp.bat\" c:\\jakarta-ant-\n1.4.1\\bin\\\\..\\lib\\jaxp.jar \n\nC:\\FuelPathGE>set _CLASSPATHCOMPONENT=c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\jaxp.jar \n\nC:\\FuelPathGE>if a == a goto gotAllArgs \n\nC:\\FuelPathGE>set LOCALCLASSPATH=c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\lib\\jaxp.jar;c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\ant.jar;\"C:\\Program \nFiles\\InterBase Corp\\InterClient\\interclient.jar\" \nC:\\FuelPathGE>call \"c:\\jakarta-ant-1.4.1\\bin\\\\..\\bin\\lcp.bat\" c:\\jakarta-ant-\n1.4.1\\bin\\\\..\\lib\\crimson.jar \n\nC:\\FuelPathGE>set _CLASSPATHCOMPONENT=c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\lib\\crimson.jar \n\nC:\\FuelPathGE>if a == a goto gotAllArgs \n\nC:\\FuelPathGE>set LOCALCLASSPATH=c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\lib\\crimson.jar;c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\jaxp.jar;c:\\jakarta-\nant-1.4.1\\bin\\\\..\\lib\\ant.jar;\"C:\\Program Files\\InterBase \nCorp\\InterClient\\interclient.jar\" \nC:\\FuelPathGE>call \"c:\\jakarta-ant-1.4.1\\bin\\\\..\\bin\\lcp.bat\" c:\\jakarta-ant-\n1.4.1\\bin\\\\..\\lib\\kant.jar \n\nC:\\FuelPathGE>set _CLASSPATHCOMPONENT=c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\kant.jar \n\nC:\\FuelPathGE>if a == a goto gotAllArgs \n\nC:\\FuelPathGE>set LOCALCLASSPATH=c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\lib\\kant.jar;c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\crimson.jar;c:\\jakarta-\nant-1.4.1\\bin\\\\..\\lib\\jaxp.jar;c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\lib\\ant.jar;\"C:\\Program Files\\InterBase \nCorp\\InterClient\\interclient.jar\" \n\nC:\\FuelPathGE>if \"c:\\jdk1.3.1\" == \"\" goto noJavaHome \n\nC:\\FuelPathGE>if \"\" == \"\" set _JAVACMD=c:\\jdk1.3.1\\bin\\java \n\nC:\\FuelPathGE>if exist \"c:\\jdk1.3.1\\lib\\tools.jar\" call \"c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\bin\\lcp.bat\" c:\\jdk1.3.1\\lib\\tools.jar \n\nC:\\FuelPathGE>set _CLASSPATHCOMPONENT=c:\\jdk1.3.1\\lib\\tools.jar \n\nC:\\FuelPathGE>if a == a goto gotAllArgs \n\nC:\\FuelPathGE>set LOCALCLASSPATH=c:\\jdk1.3.1\\lib\\tools.jar;c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\lib\\kant.jar;c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\crimson.jar;c:\\jakarta-\nant-1.4.1\\bin\\\\..\\lib\\jaxp.jar;c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\lib\\ant.jar;\"C:\\Program Files\\InterBase \nCorp\\InterClient\\interclient.jar\" \n\nC:\\FuelPathGE>if exist \"c:\\jdk1.3.1\\lib\\classes.zip\" call \"c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\bin\\lcp.bat\" c:\\jdk1.3.1\\lib\\classes.zip \n\nC:\\FuelPathGE>goto checkJikes \n\nC:\\FuelPathGE>if not \"\" == \"\" goto runAntWithJikes \n\nC:\\FuelPathGE>\"c:\\jdk1.3.1\\bin\\java\" -classpath 'c:\\jdk1.3.1\n\\lib\\tools.jar;c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\kant.jar;c:\\jakarta-ant-1.4.1\n\\bin\\\\..\\lib\\crimson.jar;c:\\jakarta-ant-1.4.1\\bin\\\\..\\lib\\jaxp.jar;c:\\jakarta-\nant-1.4.1\\bin\\\\..\\lib\\ant.jar;\"C:\\Program Files\\InterBase \nCorp\\InterClient\\interclient.jar\"' -Dant.home=\"c:\\jakarta-ant-1.4.1\\bin\\\\..\"  \norg.apache.tools.ant.Main -buildfile buildge.xml \nBuildfile: buildge.xml\n\ncompile:\n    [javac] Modern compiler is not available - using classic compiler\n    [javac] Compiling 3 source files to C:\\FuelpathGE\\classes\n\nTotal time: 2 seconds\n\nC:\\FuelPathGE>goto end \n\nC:\\FuelPathGE>set LOCALCLASSPATH= \n\nC:\\FuelPathGE>set _JAVACMD= \n\nC:\\FuelPathGE>set ANT_CMD_LINE_ARGS= \n\nC:\\FuelPathGE>if not \"Windows_NT\" == \"Windows_NT\" goto mainEnd \n\nC:\\FuelPathGE>if exist \"\\antrc_post.bat\" call \"\\antrc_post.bat\" \n\nstderr also gives:\n\n\nBUILD FAILED\n\nC:\\FuelPathGE\\buildge.xml:81: Cannot use classic compiler, as it is not \navailable A common solution is to set the environment variable JAVA_HOME to \nyour jdk directory.\n\n", "id": 12293, "time": "2002-03-25T14:02:40Z", "creator": "dmiller@kyrus.com", "creation_time": "2002-03-25T14:02:40Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 6277, "attachment_id": null, "text": "OK, I think the problem is that your CLASSPATH variable has quotes in it. So,\nCLASSPATH is \n\"C:\\Program Files\\InterBase Corp\\InterClient\\interclient.jar\" \n\nTry changing this with\n\nset CLASSPATH=C:\\Program Files\\InterBase Corp\\InterClient\\interclient.jar\n\n(i.e no quotes).\n\nAlso, have you modified the ant.bat file? I notice single quotes in it starting here\n\n-classpath 'c:\\jdk1.3.1\n\n(Could be BugZilla form processing I guess).\n\nI'm going to close now - please reopen if you still have a problem", "id": 16980, "time": "2002-05-31T05:08:22Z", "creator": "conor@apache.org", "creation_time": "2002-05-31T05:08:22Z", "is_private": false}, {"count": 11, "tags": [], "creator": "dmiller@kyrus.com", "attachment_id": null, "is_private": false, "id": 16987, "time": "2002-05-31T13:19:26Z", "bug_id": 6277, "creation_time": "2002-05-31T13:19:26Z", "text": "\nThe single quotes are necessary BECAUSE the double quotes have to appear in the \nclasspath.  I can't remove the double quotes because my other tools won't work \nbecause of the stupid space in the path of one of the jar files needed.\n\nThis setup works just fine with ANT V1.3!!  Something changed in ANT V1.4.1 to \ncause it to fail.  "}, {"count": 12, "tags": [], "bug_id": 6277, "is_private": false, "text": "You do not need to define a CLASSPATH with quotes. It is possible to define an\nenvironment variable containing spaces in Windows and use it without requiring\nquotes. Try defining a classpath environment variable with spaces and no quotes,\nrun Java and you will be able to load classes. So, in general, you do not need\nto use quotes to define and use an environment variable with spaces.\n\nYou only need to quote an environment variable when you pass it as an argument\non a command line. This is what Ant does in Ant 1.4\n\nThis did indeed change between Ant 1.3 and Ant 1.4 To understand why, please\nrefer to \nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=842\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=2348\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=2938\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=3217\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=5149\n\nIn fact there were many more problems without the surrounding quotes. As you'll\nsee from the above bugs, a number of tools do not quote spaces in the classpath.\nI'm pretty sure the current behaviour is correct. \n\nThe WHATSNEW for 1.4 said this:\n\n* Ant's wrapper scripts now quote the CLASSPATH environment variable, thus\n  supporting classpaths which refer to directories containing spaces. This means\n  that the CLASSPATH environment variable cannot have quotes. Any quotes should\n  be removed. This will not affect the operation of the CLASSPATH environment\n  variable in other contexts.\n\nI realize that this may not be compatible with other tools which take a\ndifferent assumption. The current is, IMHO, the lesser of two evils. I'm going\nto mark as WONTFIX for this reason. \n\nBTW, probably worth mentioning when you have made a change to the scripts.\n", "id": 16989, "time": "2002-05-31T14:07:05Z", "creator": "conor@apache.org", "creation_time": "2002-05-31T14:07:05Z", "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 6277, "attachment_id": null, "text": "Removing the quotes breaks Visual Cafe!  I changed the script in an attempt to \nget around the problem with the \".  I thought that using outside single quotes \nwould allow me to have interior double quotes.  It appears to work except that \nAnt V1.4.1 won't run correctly.  I run VisualCafe sometimes for development (of \ncourse lately I have pretty much abandoned it in favor of just Multiedit) but I \nrun Ant to build our product.  I would like to use both, but you are forcing me \nto make a choice between one or the other.  ", "id": 17004, "time": "2002-05-31T15:55:44Z", "creator": "dmiller@kyrus.com", "creation_time": "2002-05-31T15:55:44Z", "is_private": false}, {"count": 14, "tags": [], "bug_id": 6277, "attachment_id": null, "is_private": false, "id": 17007, "time": "2002-05-31T16:34:28Z", "creator": "stevel@apache.org", "creation_time": "2002-05-31T16:34:28Z", "text": "I would argue against visual cafe. Try Jedit or Intellij Idea :)\n\nAs regards us forcing you to choose, no, not really. We are saying that in order\nto fix the shell scripts to work for everyone else, we made a change that is\ncompatible with every other java app out there, except, seemingly, v-caff.\n\nYou are free to change your copy of ant's starter scripts. Why not have it\nignore the current classpath altogether? If you need that jar in the build,\nrefer to it in a path in your build scripts. \n\n"}]