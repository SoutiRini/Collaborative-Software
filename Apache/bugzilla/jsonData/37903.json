[{"count": 0, "attachment_id": null, "bug_id": 37903, "is_private": false, "id": 83640, "time": "2005-12-14T12:43:07Z", "creator": "gacek@intertele.pl", "creation_time": "2005-12-14T12:43:07Z", "tags": [], "text": "In prefork MPM:\n\nFirst graceful restart works OK.\n\nBut after invoking second (and later) graceful restart, apache is unable to kill\nchildren by POD. Logs are filled with:\n\n[Wed Dec 14 11:54:29 2005] [warn] (32)Broken pipe: write pipe_of_death\n[Wed Dec 14 11:54:30 2005] [warn] (32)Broken pipe: write pipe_of_death\n[Wed Dec 14 11:54:31 2005] [warn] (32)Broken pipe: write pipe_of_death\n\nBug present in 2.0.54, 2.0.55, compiled from source."}, {"count": 1, "tags": [], "bug_id": 37903, "is_private": false, "text": "How does this affect user?\n\n1. Number of idle child processes does not decrease down to MaxSpareServers\n2. Children are not restarted with new config!\n\n", "id": 83641, "time": "2005-12-14T12:47:15Z", "creator": "gacek@intertele.pl", "creation_time": "2005-12-14T12:47:15Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 37903, "is_private": false, "text": "I just checked this on a Linux environment with prefork mpm and it works just\nfine. In order to find out what is wrong at your environment please provide the\nfollowing information as attachments:\n\n1. After the first graceful restart issue the following command:\n\nlsof | egrep \"^httpd.*FIFO\"\n\n2. Before the second graceful restart issue the following command and stop it\nafter the graceful restart was done:\n\nstrace -o strace_result.txt -vall -p <pid of httpd root process>\n\nDo you use any 3rd party modules (Keep in mind that mod_perl and php are also\n3rd party modules)? ", "id": 83667, "time": "2005-12-14T22:00:40Z", "creator": "rpluem@apache.org", "creation_time": "2005-12-14T22:00:40Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 37903, "text": "After further investigation it occured, that eaccelerator-0.9.4-rc1 is\nresponsible for this. It's debugging code (although compiled and running without\ndebugging) closes stderr on shutdown.\n\nSorry for false alarm.", "id": 83686, "time": "2005-12-15T08:06:03Z", "creator": "gacek@intertele.pl", "creation_time": "2005-12-15T08:06:03Z", "is_private": false, "attachment_id": null}]