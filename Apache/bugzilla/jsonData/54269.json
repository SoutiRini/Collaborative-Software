[{"count": 0, "tags": [], "text": "Hi.\n\nThe documentation of mod_proxy_html misses several things:\n1) In most cases, the defaults are missing, e.g. it's not really clear whether ProxyHTMLMeta is now on or off per default\n\n\n2) ProxyHTMLMeta\nI've always thought (from the original documentation) that this would also lead to translate links in meta elements... but this nowhere mentioned... is this the case? It should be documented whether or not.\n\n3) ProxyHTMLExtended\nIn the original documentation, there was lots of words that this can easily dangerous, as stylsheets/scripts are not really parsed, but simple regexp matching/replacing performed, which can easily lead to corruptions.\nGuess this is still the case, so there should some bold warnings be added on what's happening and that this can be dangerous and the admin has to set up his own sane regexps that work for his content.\n\n\nCheers,\nChris", "is_private": false, "bug_id": 54269, "id": 163976, "time": "2012-12-09T02:02:38Z", "creator": "calestyo@scientia.net", "creation_time": "2012-12-09T02:02:38Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "(1) applies also at least to ProxyHTMLStripComments where it's IMHO pretty unclear... and perhaps also to ProxyHTMLInterp\n\n\nAnd another thing:\n4) The original docs listed a ProxyHTMLLogVerbose option, which is not in the Apache docs... was that dropped?", "is_private": false, "bug_id": 54269, "id": 163977, "time": "2012-12-09T02:15:42Z", "creator": "calestyo@scientia.net", "creation_time": "2012-12-09T02:15:42Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "calestyo@scientia.net", "attachment_id": null, "id": 163978, "time": "2012-12-09T02:22:13Z", "bug_id": 54269, "creation_time": "2012-12-09T02:22:13Z", "is_private": false, "text": "5) The sample config and the original docs imply that one needs to use ProxyHTMLExtended on in order that ProxyHTMLEvents works... this seems to miss in the documentation of the later."}, {"count": 3, "tags": [], "creator": "calestyo@scientia.net", "attachment_id": null, "id": 163979, "time": "2012-12-09T03:17:11Z", "bug_id": 54269, "creation_time": "2012-12-09T03:17:11Z", "is_private": false, "text": "Another thing...\n6) ProxyHTMLLinks (at least this, but maybe others like ProxyHTMLEvents, too)\n\nWhen I define several ProxyHTMLLinks at e.g. server scope, and then define \"more\" at directory scope, all those from server scope are lost.\n\n\nNow I think it's quite bad already that you stopped doing the usual style known from other directives like Options where one has + and - ... but at least that behaviour needs to be documented.\n\n\nGiven that the whole proxy_html documentation seems to be in a bad shape, I raised the severity to major... and I've reassigned it to \"Documentation\"."}, {"count": 4, "tags": [], "text": "7) The documentation of ProxyHTMLBufSize refers to (the old upstream documentation's) [nnnn] which is however not used in the Apache docs.", "is_private": false, "bug_id": 54269, "id": 163996, "time": "2012-12-10T01:51:22Z", "creator": "calestyo@scientia.net", "creation_time": "2012-12-10T01:51:22Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "8) This is only a \"would be nice\"...\nAFAIU, proxy_html will really always only process HTML files, even when ProxyHTMLExtended is on.\nThe later just means that CSS/scripts/etc. embedded inline a HTML will be processed, too.\n\nI think this should go to the Summary section of the module docs and it should be more emphasised in the ProxyHTMLExtended doc.", "attachment_id": null, "bug_id": 54269, "id": 163997, "time": "2012-12-10T02:38:54Z", "creator": "calestyo@scientia.net", "creation_time": "2012-12-10T02:38:54Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 54269, "attachment_id": null, "text": "Just made some updates based on your comments, in r54269 .\nCan we close this bug based on those changes, or would you like to offer another patch?", "id": 164025, "time": "2012-12-11T12:15:14Z", "creator": "nick@webthing.com", "creation_time": "2012-12-11T12:15:14Z", "is_private": false}, {"count": 7, "tags": [], "creator": "nick@webthing.com", "attachment_id": null, "id": 164026, "time": "2012-12-11T12:16:39Z", "bug_id": 54269, "creation_time": "2012-12-11T12:16:39Z", "is_private": false, "text": "(In reply to comment #6)\n> Just made some updates based on your comments, in r54269 .\n> Can we close this bug based on those changes, or would you like to offer\n> another patch?\n\nUgh, 54269 was of course this PR.  Should read r1420120 ."}, {"count": 8, "tags": [], "bug_id": 54269, "is_private": false, "id": 164081, "creation_time": "2012-12-15T02:28:51Z", "time": "2012-12-15T02:28:51Z", "creator": "calestyo@scientia.net", "text": "Hi.\n\nLet me see...\n\n\n\nto (1):\n- Are you sure the default is Off? Cause when using the (still external) mod_proxy_html from the EPEL repo, it seems that On is the default.\n\n- There is not yet a default given for ProxyHTMLBufSize, well at least not in the \"header\"... in the description text it is already named as 8192.\nThe same applies to ProxyHTMLCharsetOut, with the default being UTF-8.\n\n- There are still no default given for ProxyHTMLFixups, which may be because there is no default for... the closest match would be \"reset\" but I guess this is not equal to a default.\n\n\nto (2):\nThat seems to be not yet answered.\n\nSo the question is, when there would be a link in the content attribute of a meta element... is it adapted? Or does this need an additional ProxyHTMLLink or even ProxyHTMLExtended to work?\nI think this should somehow be described.\n\nOr whether nothing with respect to this happens at all. And ProxyHTMLMeta really just controls whether meta information is used for charset detection and for conversion to real HTTP headers.\n\n\nto (3):\nYour text is already good, but perhaps one should add somewhere the following, namely that if using extended mode, one should h, e and c flags to ProxyHTMLURLMap... depending onto what class the respective rule belongs to.\n\n\nto (4):\nThat seems to be not yet answered.\n\n\nto (5):\nThere is now a hint (\"Set to On, all scripting events (as determined by ProxyHTMLEvents)\") in the documentation of ProxyHTMLExtended... but I think it should also be added to the ProxyHTMLEvents description, that these will only be considered in extended mode.\n\n\nto (6):\nDone.\n\n\nto (7):\nDone.\n\n\nto (8):\nI think that's still missing... and actually I\u2019d like to see this in the summary section .... so about this:\na) How does proxy_html decide to process a file? E.g. does it do so by the HTTP content type of a served file? Or does it try to detect itself whether the file is a HTML/XHTML file?\nb) Which files does it process (closely related to (b))? Only HTML/XHTML? Or does it also process text/css files? Or separate script files?\nc) I think the information already given at ProxyHTMLEnable, namely that only proxied content is processed, but that there is a way around this (PROXY_HTML_FORCE), should be given there, too.\nd) And last but not least... that even in the extended mode of proxy_html (ProxyHTMLExtended) only _inline_ (inside a HTML/XHTML file) scripts/styles will be handled,... but not standalone CSS or script files.\n\n\nCheers,\nChris.", "attachment_id": null}, {"count": 9, "tags": [], "creator": "calestyo@scientia.net", "attachment_id": null, "id": 164082, "time": "2012-12-15T02:37:01Z", "bug_id": 54269, "creation_time": "2012-12-15T02:37:01Z", "is_private": false, "text": "May I further add:\n\n9) The note that it is \u201eAvailable as a third-party module for earlier 2.x versions\u201d is IMHO not necessary...\nAnyone who ended up in the Apache >=2.4 docs will have it anyway as \"official\" module... anyone else... will use the pre-2.4 docs and not see it.\n\n\n10) Looking at https://httpd.apache.org/docs/trunk/mod/mod_proxy_html.html, there seem to be some content encoding problems with the generated files, e.g. \"Web\ufffding\" or \"Source\ufffdFile:\".\n\n\n11) I think quite some information from the original upstream documentation got lost... including (but not limited to):\n- many technical stuff from http://apache.webthing.com/mod_proxy_html/guide.html\n- the trick with \"RequestHeader unset Accept-Encoding\""}, {"count": 10, "tags": [], "bug_id": 54269, "attachment_id": null, "text": "12) The documentation of ProxyHTMLMeta misses what was contained in the original upstream documentation (http://apache.webthing.com/mod_proxy_html/guide.html#meta), namely that:\n\"it does not strip them from the HTML (except for Content-Type, which is removed in case it contains conflicting charset information)\"\n\nNote though, that this seems to be currently not fully working, see bug #54310.", "id": 164095, "time": "2012-12-15T23:21:40Z", "creator": "calestyo@scientia.net", "creation_time": "2012-12-15T23:21:40Z", "is_private": false}]