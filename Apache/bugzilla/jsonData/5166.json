[{"count": 0, "tags": [], "bug_id": 5166, "attachment_id": null, "is_private": false, "id": 8391, "time": "2001-11-28T07:49:58Z", "creator": "mak-apache-bugzilla@greenhills.co.uk", "creation_time": "2001-11-28T07:49:58Z", "text": "Short version:\n\n RUNNING.txt says you can use CATALINA_BASE and CATALINA_HOME,\n but this doesn't work with the distribution config:\n\n - The webapps/admin.xml and webapps/manager.xml docBase has\n   ../server relative to $CATALINA_BASE, causing those two\n   webapps to fail.\n - The shared directory is not found, causing the JspServlet\n   to not be found\n\nLong version:\n\nIn RUNNING.txt, step (4) explains how to use CATALINA_BASE and CATALINA_HOME.\nAlas this doesn't work:\n\n  # build Tomcat, no problem\n  setenv MYSRC /home/mak/jakarta/jakarta-tomcat-4.0\n  (cd $MYSRC; cvs update -d; ant clean; ant dist)\n \n  # copy dist and run, no problem\n  setenv MYBASE /home/mak/tomcat-instance1\n  rm -fr $MYBASE\n  cp -r $MYSRC/dist $MYBASE\n  setenv CATALINA_HOME $MYBASE\n  $CATALINA_HOME/bin/startup.sh\n\n  # try $CATALINA_BASE, runs but produces errors in the log\n  setenv MYBASE /home/mak/tomcat-instance2\n  rm -fr $MYBASE\n  mkdir $MYBASE\n  cp -r $MYSRC/dist/{conf,webapps} $MYBASE\n  mkdir $MYBASE/{logs,work}\n  setenv CATALINA_HOME $MYSRC/dist\n  setenv CATALINA_BASE $MYBASE\n  $CATALINA_HOME/bin/startup.sh\n\nThis produces:\n\n  Using CLASSPATH:    \n/home/mak/jakarta/jakarta-tomcat-4.0/dist/bin/bootstrap.jar:/usr/j2se/lib/tools.jar:/usr/local/java/jsse1.0.2/lib/jcert.jar:/usr/local/java/jsse1.0.2/lib/jnet.jar:/usr/local/java/jsse1.0.2/lib/jsse.jar\n  Using CATALINA_BASE: /home/mak/tomcat-instance2\n  Using CATALINA_HOME: /home/mak/jakarta/jakarta-tomcat-4.0/dist\n  Using JAVA_HOME:     /usr/j2se\n\nthen logs:\n\n  StandardWrapper[/examples:jsp]: Marking servlet jsp as unavailable\n  StandardContext[/examples]: Servlet /examples threw load() exception\n  javax.servlet.ServletException: Wrapper cannot find servlet class\norg.apache.jasper.servlet.JspServlet or a class it depends on\n\nand later:\n\n  StandardContext[/manager]: Error initializing resources: Document base\n/home/mak/tomcat-instance2/webapps/../server/webapps/manager does not exist or\nis not a readable directory\n\nAnalysis:\n\n  The error from /manager (and a similar one from /admin) are due to \n  webapps/admin.xml and webapps/manager.xml having a docBase starting\n  with \"../server/\", which is used relative to $CATALINA_BASE instead\n  of $CATALINA_HOME. You can address this by making them absolute paths\n  based on $CATALINA_HOME, or to copy/symlink the server/ directory\n  into $CATALINA_BASE. The RUNNING.txt should mention this.\n\n  The error about JspServlet is due to the shared/ directory.\n  A workaround is to copy/symlink the $CATALINA_HOME/shared directory\n  into $CATALINA_BASE. Assuming that $CATALINA_BASE is in fact the\n  sensible place (I'd say so), RUNNING.txt should mention this.\n\nIncidentally, I noticed in a `grep '\"shared\"'\ncatalina/src/share/org/apache/catalina/startup/*.java`\nthat sometimes it is looked up relative to getCatalinaHome, sometimes relative\nto getCatalinaBase. Is this correct?"}, {"count": 1, "tags": [], "text": "*** Bug 5990 has been marked as a duplicate of this bug. ***", "is_private": false, "bug_id": 5166, "id": 9853, "time": "2002-01-24T15:39:08Z", "creator": "remm@apache.org", "creation_time": "2002-01-24T15:39:08Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "remm@apache.org", "text": "Fixed, thanks.", "id": 14595, "time": "2002-04-24T08:06:50Z", "bug_id": 5166, "creation_time": "2002-04-24T08:06:50Z", "is_private": false, "attachment_id": null}]