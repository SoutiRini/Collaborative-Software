[{"count": 0, "tags": [], "bug_id": 41448, "is_private": false, "text": "Using DocBook XML 4.5 (test.xml, below), DocBook XSL 1.71.1 (test.xsl, below),\nand xsltproc \n xsltproc --version\nUsing libxml 20626, libxslt 10117 and libexslt 813\nxsltproc was compiled against libxml 20626, libxslt 10117 and libexslt 813\nlibxslt 10117 was compiled against libxml 20626\nlibexslt 813 was compiled against libxml 20626\n\nconsistently getting this error (partial listing here, full listing at bottom)\non both cygwin and Linux:\n\nJan 23, 2007 9:56:49 PM org.apache.fop.cli.InputHandler error\nSEVERE: javax.xml.transform.TransformerException:\norg.apache.fop.layoutmgr.inline.WrapperLayoutManager\nJan 23, 2007 9:56:49 PM org.apache.fop.cli.Main startFOP\nSEVERE: Exception\njavax.xml.transform.TransformerException: java.lang.ClassCastException:\norg.apache.fop.layoutmgr.inline.WrapperLayoutManager\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:168)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:160)\n        at org.apache.fop.cli.Main.main(Main.java:191)\n\n*****************************\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n<!DOCTYPE book PUBLIC \"-//OASIS//DTD DocBook XML V4.5//EN\"\n \"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd\">\n<book>\n  <chapter><title></title>\n    <indexterm><primary></primary></indexterm>\n  </chapter>\n</book>\n********************\n\n\n\n********************\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<xsl:stylesheet\n    xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n    xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\n    version=\"1.0\">\n  <xsl:import href=\"/usr/share/xml/docbook/xsl-stylesheets-1.71-1/fo/docbook.xsl\n\"/>\n  <xsl:param name=\"fop1.extensions\" select=\"1\"/>\n  <xsl:param name=\"use.svg\" select=\"1\"></xsl:param>\n  <xsl:param name=\"draft.mode\" select=\"no\"/>\n\n</xsl:stylesheet>\n********************\n\n\n*************** full error listing, happens every time ***************\n*********** seems to me it could only be an FOP error *************\n********** my apologies if not ******************\n\nMaking portrait pages on USletter paper (8.5inx11in)\nJan 23, 2007 10:15:16 PM org.apache.fop.cli.InputHandler error\nSEVERE: javax.xml.transform.TransformerException:\norg.apache.fop.layoutmgr.inline.WrapperLayoutManager\nJan 23, 2007 10:15:16 PM org.apache.fop.cli.Main startFOP\nSEVERE: Exception\njavax.xml.transform.TransformerException: java.lang.ClassCastException:\norg.apache.fop.layoutmgr.inline.WrapperLayoutManager\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:168)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:160)\n        at org.apache.fop.cli.Main.main(Main.java:191)\n\n---------\n\njavax.xml.transform.TransformerException: java.lang.ClassCastException:\norg.apache.fop.layoutmgr.inline.WrapperLayoutManager\n        at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:647)\n        at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:279)\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:165)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:160)\n        at org.apache.fop.cli.Main.main(Main.java:191)\nCaused by: java.lang.ClassCastException:\norg.apache.fop.layoutmgr.inline.WrapperLayoutManager\n        at\norg.apache.fop.layoutmgr.FlowLayoutManager.getNextKnuthElements(FlowLayoutManager.java:76)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager$PageBreaker.getNextKnuthElements(PageSequenceLayoutManager.java:272)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.getNextBlockList(AbstractBreaker.java:554)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager$PageBreaker.getNextBlockList(PageSequenceLayoutManager.java:264)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:301)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:263)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:157)\n        at\norg.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:385)\n        at\norg.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:148)\n        at\norg.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:378)\n        at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:194)\n        at\ncom.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.endElement(ToXMLSAXHandler.java:262)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)\n        at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:557)\n        at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:638)\n        ... 5 more\n---------\njava.lang.ClassCastException: org.apache.fop.layoutmgr.inline.WrapperLayoutManager\n        at\norg.apache.fop.layoutmgr.FlowLayoutManager.getNextKnuthElements(FlowLayoutManager.java:76)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager$PageBreaker.getNextKnuthElements(PageSequenceLayoutManager.java:272)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.getNextBlockList(AbstractBreaker.java:554)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager$PageBreaker.getNextBlockList(PageSequenceLayoutManager.java:264)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:301)\n        at\norg.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:263)\n        at\norg.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:157)\n        at\norg.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:385)\n        at\norg.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:148)\n        at\norg.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:378)\n        at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:194)\n        at\ncom.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.endElement(ToXMLSAXHandler.java:262)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n        at\ncom.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)\n        at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown\nSource)\n        at\ncom.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)\n        at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:557)\n        at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:638)\n        at\ncom.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:279)\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:165)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:160)\n        at org.apache.fop.cli.Main.main(Main.java:191)", "id": 98432, "time": "2007-01-23T21:18:42Z", "creator": "swhitlat@getnet.net", "creation_time": "2007-01-23T21:18:42Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 41448, "attachment_id": null, "text": "Test files in description, made as small as possible to still produce the error.", "id": 98433, "time": "2007-01-23T21:21:17Z", "creator": "swhitlat@getnet.net", "creation_time": "2007-01-23T21:21:17Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 41448, "text": "You've haven't attached the XSL-FO that is generated by docbook which we will \nneed for us to make an accurate diagnosis of the problem. If I had to guess \nthen I would say this is caused by an fo:wrapper element as an immediate child \nof fo:flow. This bug exists in the released 0.93 but has been fixed in SVN.", "id": 98451, "time": "2007-01-24T06:00:13Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2007-01-24T06:00:13Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 41448, "text": "Created attachment 19453\nbroken.xml reproduces this error, works.xml works. Includes .fo files\n\nUsed xsltproc:\n   B:\\>xsltproc --version\n   Using libxml 20619CVS2407, libxslt 10114CVS1012 and libexslt 812CVS1012\n   xsltproc was compiled against libxml 20619, libxslt 10114 and libexslt 812\n   libxslt 10114 was compiled against libxml 20619\n   libexslt 812 was compiled against libxml 20619\n\nDocBook XSL Stylesheets 1.71.1\n\nfop-0.93", "id": 98486, "time": "2007-01-25T00:29:01Z", "creator": "daweber@harmanbecker.com", "creation_time": "2007-01-25T00:29:01Z", "is_private": false, "attachment_id": 19453}, {"count": 4, "tags": [], "bug_id": 41448, "text": "The FO generated by docbook contains fo:wrapper elements as direct children of \nfo:flow, e.g.\n\n<fo:wrapper id=\"id91268\">\n\t<!--index term-->\n</fo:wrapper>\n\nIn 0.93 this is the cause of the ClassCastException. The ClassCastException \nhas been fixed in SVN. But the id attribute has no affect on an fo:wrapper in \nFOP currently. I guess docbook generates this as a placeholder for PDF \ndestinations. If you don't care about PDF destinations and just want to \novercome the ClassCastException then get an SVN client, download the code and \ncompile it yourself. If you don't fancy doing that then you may want to tell \nthe docbook folks about this problem. Maybe when fop1.extensions is set they \ncould skip generating such fo:wrapper elements for PDF Destinations, since PDF \nDestinations aren't supported in FOP anyway.\n\nI'm closing this bug as the ClassCastException is fixed.", "id": 98492, "time": "2007-01-25T01:50:42Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2007-01-25T01:50:42Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 41448, "is_private": false, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155600, "time": "2012-04-01T06:30:07Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:30:07Z", "attachment_id": null}]