[{"count": 0, "tags": [], "bug_id": 187, "attachment_id": null, "text": "\r\nWhen a post is made to Tomcat from a Phone.com WAP phone (most WAP phones in the U.S. run the Phone.com software) the post variables are not processed correctly because the Phone.com server includes the character encoding in the MIME type it what they claim is a valid use of HTTP 1.1.  If the Phone.com implementation is valid, it would be nice if Tomcat supported it, as almost every existing U.S. WAP phone runs the Phone.com software.\r\n\r\nHere is the text from http://developer.phone.com/dev/ts/up/bugs.html (free reg. required) on the problem:\r\n\r\n--\r\nUP.Link Server \r\nWhen you POST data through an UP.Link Server, the UP.Link transcodes the data from the character set of the device to the character set of the application server. When this transcoding takes place, the UP.Link includes the charset parameter with the content type of the posted data, for example: \r\napplication/x-www-form-urlencoded;charset=UTF-8\r\nThe charset parameter is compliant with the HTTP spec, however, neither ASP nor the Java Servlet classes recognizes it, and the result is that neither environment can correctly build the appropriate form objects. As a workaround, you can access the post data from the input stream: \r\nASP Example \r\n\r\nmyVariable = StrConv(Request.BinaryRead(myByteCount), vbUnicode) \r\n\r\nJava Example \r\n\r\n// First read off the input stream as follows \r\nint contentLength = req.getContentLength(); \r\n           byte[] b = new byte[contentLength]; \r\n           int result; \r\n           int totalRead = 0; \r\n           try { \r\n               result = in.readLine(b, 0, b.length); \r\n               while (result != -1) { \r\n                   totalRead += result; \r\n                   result = in.readLine(b, totalRead, buffsize); \r\n               } \r\n           } catch (IOException ioe) { \r\n               // Ignore, it's probably from EOF \r\n           }\r\n\r\n\r\n--\r\n\r\n-Colin Evans\r\ncevans@bitmo.com\r\n", "id": 167, "time": "2000-10-15T00:00:00Z", "creator": "dev@tomcat.apache.org", "creation_time": "2000-10-15T00:00:00Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nacho@apache.org", "attachment_id": null, "text": "Fixed in Tomcat 3.3", "id": 4812, "time": "2001-08-24T17:31:00Z", "bug_id": 187, "creation_time": "2001-08-24T17:31:00Z", "is_private": false}]