[{"count": 0, "tags": [], "bug_id": 1002, "text": "TC 20010314 sealing violation bug. This bug could be related to the same \nsealing violation problem caused by jaxp. Because of this, I'm not sure if this \nis a bug strickly related to Jasper, so I'm posting it under Catalina. \n\nI have a Web App that uses Xerces 1.2 and JDOM beta 5, both of these along with \nthe a jar file containing the standard DOM and SAX interface/abstract library \nclasses are located in the WEB-INF/lib directory. I have a Servlet that fires \nup on startup and uses JDOM and Xerces to parse some config files. When TC 4 \ntries to init the JSP (JASPER) servlet, a \"java.lang.SecurityException: sealing \nviolation\" is generated in the log file. The application runs fine using just \nServlets, but I get the sealing violation bug again, when I try to use JSP. The \nproblem goes away, if I take out the Servlet that runs on startup, my \napplicaton will not run work properly without this Servlet, but I can hit a \nplain JSP page and it works fine.\n\nHere is my log file. First entry is generated when the JSP Servlets is loaded \non startup. The second one is from a JSP hit. Let me know if you need more \ninformation.\n\n2001-03-16 16:27:11 StandardWrapper[:invoker]: Loading container servlet invoker\n2001-03-16 16:27:11 invoker: init\n2001-03-16 16:27:12 jsp: init\n2001-03-16 16:27:12 StandardContext[]: Servlet  threw load() exception\njavax.servlet.ServletException: Servlet.init() for servlet jsp threw exception\n\tat org.apache.catalina.core.StandardWrapper.load\n(StandardWrapper.java:798)\n\tat org.apache.catalina.core.StandardContext.start\n(StandardContext.java:3079)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1059)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1059)\n\tat org.apache.catalina.core.StandardEngine.start\n(StandardEngine.java:253)\n\tat org.apache.catalina.core.StandardService.start\n(StandardService.java:353)\n\tat org.apache.catalina.core.StandardServer.start\n(StandardServer.java:454)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:707)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:627)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:177)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:177)\n----- Root Cause -----\njava.lang.SecurityException: sealing violation\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:234)\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\tat org.apache.catalina.loader.StandardClassLoader.findClass\n(StandardClassLoader.java:646)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:1013)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:912)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:313)\n\tat org.apache.jasper.compiler.TldLocationsCache.processWebDotXml\n(TldLocationsCache.java:160)\n\tat org.apache.jasper.compiler.TldLocationsCache.<init>\n(TldLocationsCache.java:137)\n\tat org.apache.jasper.EmbededServletOptions.<init>\n(EmbededServletOptions.java:324)\n\tat org.apache.jasper.servlet.JspServlet.init(JspServlet.java:263)\n\tat org.apache.catalina.core.StandardWrapper.load\n(StandardWrapper.java:779)\n\tat org.apache.catalina.core.StandardContext.start\n(StandardContext.java:3079)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1059)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1059)\n\tat org.apache.catalina.core.StandardEngine.start\n(StandardEngine.java:253)\n\tat org.apache.catalina.core.StandardService.start\n(StandardService.java:353)\n\tat org.apache.catalina.core.StandardServer.start\n(StandardServer.java:454)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:707)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:627)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:177)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:177)\n\n2001-03-16 16:27:12 StandardContext[]: Starting completed\n2001-03-16 16:29:46 StandardContext[]: Mapping contextPath='' with \nrequestURI='/' and relativeURI='/'\n2001-03-16 16:29:46 StandardContext[]:  Mapped to servlet 'default' with \nservlet path '/' and path info 'null' and update=true\n2001-03-16 16:29:47 StandardContext[]: Mapping contextPath='' with \nrequestURI='/index.jsp' and relativeURI='/index.jsp'\n2001-03-16 16:29:47 StandardContext[]:  Mapped to servlet 'jsp' with servlet \npath '/index.jsp' and path info 'null' and update=true\n2001-03-16 16:29:47 jsp: init\n2001-03-16 16:29:47 StandardWrapperValve[jsp]: Allocate exception for servlet \njsp\njavax.servlet.ServletException: Servlet.init() for servlet jsp threw exception\n\tat org.apache.catalina.core.StandardWrapper.load\n(StandardWrapper.java:798)\n\tat org.apache.catalina.core.StandardWrapper.allocate\n(StandardWrapper.java:553)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:230)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:879)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:213)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:879)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2119)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:164)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:446)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:879)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:162)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:879)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:818)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:893)\n\tat java.lang.Thread.run(Thread.java:484)\n----- Root Cause -----\njava.lang.SecurityException: sealing violation\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:234)\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\tat org.apache.catalina.loader.StandardClassLoader.findClass\n(StandardClassLoader.java:646)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:1013)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:912)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:313)\n\tat org.apache.jasper.compiler.TldLocationsCache.processWebDotXml\n(TldLocationsCache.java:160)\n\tat org.apache.jasper.compiler.TldLocationsCache.<init>\n(TldLocationsCache.java:137)\n\tat org.apache.jasper.EmbededServletOptions.<init>\n(EmbededServletOptions.java:324)\n\tat org.apache.jasper.servlet.JspServlet.init(JspServlet.java:263)\n\tat org.apache.catalina.core.StandardWrapper.load\n(StandardWrapper.java:779)\n\tat org.apache.catalina.core.StandardWrapper.allocate\n(StandardWrapper.java:553)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:230)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:879)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:213)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:879)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2119)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:164)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:446)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:879)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:162)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:879)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:818)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:893)\n\tat java.lang.Thread.run(Thread.java:484)", "id": 1338, "time": "2001-03-16T16:59:45Z", "creator": "david@i2a.com", "creation_time": "2001-03-16T16:59:45Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 1002, "attachment_id": null, "is_private": false, "id": 1348, "time": "2001-03-17T13:35:00Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-03-17T13:35:00Z", "text": "I got this to reproduce under JDK 1.3.0 on Linux with the current \"tester\"\nwebapp.  It seems to run fine under 1.2.2.\n\nNow to figure out what to do about it ...\n"}, {"count": 2, "tags": [], "bug_id": 1002, "attachment_id": null, "id": 1585, "time": "2001-03-23T17:28:12Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-03-23T17:28:12Z", "is_private": false, "text": "The Tomcat 4.0 build process has been modified to include a special version of \nthe jaxp.jar and crimson.jar files from JAXP/1.1 (Final) that have had the \n\"sealed\" attribute removed.  This avoids \"package sealing violation\" errors that \nwere caused by these two JAR files.\n\nThe change will show up in the nightly build for 20010324.  Please try it and \nsee if it fixes the problems in your environment.\n"}]