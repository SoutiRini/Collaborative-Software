[{"count": 0, "tags": [], "bug_id": 42884, "attachment_id": null, "is_private": false, "id": 105359, "time": "2007-07-12T23:06:05Z", "creator": "vasanth.mailinglist@gmail.com", "creation_time": "2007-07-12T23:06:05Z", "text": "We are having a problem in Load Balancing with Apache 2.2.4 server setup and the\nissue is as follows,\n\nWe have Jboss AS 4.2.0 GA with two server instances [TestAdmin and Test] and we\nhave deployed two applications namely TestAdmin and Test in respective server\ninstance. Both the server instances are in cluster. In addition, we have\nconfigured apache 2.2.4 with mod_proxy_balancer for load balancing.\n\nThe above configuration is replicated in other boxes in cluster.\n\nOur primary goal of the clustering is for load balancing and Single SignOn and\nnot for failover [No session replication].\n\nThe proxy balancer configurations is as follows,\n\n# Admin Load Balancer\n<Proxy balancer://admin_loadbalancer >\n   Order deny,allow\n   Allow from all\n   BalancerMember ajp://box1:8100/admin route=admin_1  loadfactor=10 smax=50\nmax=50 min=5 ttl=60\n   BalancerMember ajp://box21:8100/admin route=admin_2  loadfactor=10 smax=50\nmax=50 min=5 ttl=60 </Proxy>\n\n# Test Load Balancer\n<Proxy balancer://test_loadbalancer >\n   Order deny,allow\n   Allow from all\n   BalancerMember ajp://box1:8101/test route=test_1  loadfactor=10 smax=50\nmax=50 min=5 ttl=60\n   BalancerMember ajp://box2:8101/test route=test_2  loadfactor=10 smax=50\nmax=50 min=5 ttl=60 </Proxy>\n\nProxyRequests off\nProxyPass /admin        balancer://admin_loadbalancer\nlbmethod=bytraffic  nofailover=On stickysession=JSESSIONID\nProxyPass /test           balancer://test_loadbalancer\nlbmethod=bytraffic  nofailover=On stickysession=JSESSIONID\n\nWith the above settings, when we login to the TestAdmin Application it appends\nthe jvm route in the sessionid (e.g.: xxxxx.admin_1). And when we traverse to\nthe Test application related link from the TestAdmin page, we are getting\nService temporarily unavailable exception.\n\nWhen we looked into the apache error log, it says \"All workers are in error\nstate for route (admin_1)\". What we infer is that it is expecting the admin_1\nroute in test_balancer but the test_balancer does not have the route.\n\nwe have logged this problem in jboss and they can also reproduced the same and\nadvised us to log the issue in apache."}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of 42876 ***", "id": 105360, "time": "2007-07-13T00:10:42Z", "bug_id": 42884, "creation_time": "2007-07-13T00:10:42Z", "is_private": false}]