[{"count": 0, "tags": [], "creator": "torsten.reschke@gehe.de", "attachment_id": null, "text": "Hello,\n\nfrom time to time we see a Segmentation fault in the error_log from apache.\nThe Apache 2.050 configuration is running on AIX 5.2 ML 4\nAIX is writing a core dump.\n\nApache was compiled with the following options:\n\nCC=\"xlc_r\"; export CC\nCFLAGS=\"-D_LARGE_FILES\"; export CFLAGS\n\"./configure\" \\\n\"--with-mpm=worker\" \\\n\"--enable-so\" \\\n\"--enable-headers\" \\\n\"--enable-layout=Apache\" \\\n\"--enable-rewrite\" \\\n\"--enable-mods-shared=most\" \\\n\"--enable-static-support\" \\\n\"--enable-status\" \\\n\"--enable-info\" \\\n\"--with-expat=/path/httpd-2.0.50/srclib/apr-util/xml/expat\" \\\n\"-prefix=/path/apache-2050\" \\\n\"--enable-proxy\" \\\n\"--enable-deflate\" \\\n\"--with-z=/path/zlib-for-apache2\" \\\n\n\nAlso a new mod_jk 1.2.8 was compiled and is loaded as module.\nWith dbx I can see this:\n\n\nroot:/path/apache/coredump >dbx ../bin/httpd core\nType 'help' for help.\n[using memory image in core]\nreading symbolic information ...\n\nSegmentation fault in sig_coredump at 0x100379d4 ($t27)\n0x100379d4 (sig_coredump+0x88) 80410014        lwz   r2,0x14(r1)\n(dbx) where\nsig_coredump(0xb) at 0x100379d4\nmalloc_y.splint(??, ??) at 0xd01f5bd0\nmalloc_y.malloc_y(??, ??, ??) at 0xd01f84d0\nmalloc_y.malloc_y_heap(??) at 0xd01f7d88\njk_pool_dyn_alloc(0x304567c0, 0x2000), line 158 in \"jk_pool.c\"\njk_pool_alloc(0x304567c0, 0x2000), line 75 in \"jk_pool.c\"\njk_b_set_buffer_size(0x30456880, 0x2000), line 139 in \"jk_msg_buff.c\"\nunnamed block $b95, line 461 in \"jk_lb_worker.c\"\njk_lb_worker.service(0x30489580, 0x304567e8, 0x3010f808, 0x30457890), line 461\nin \"jk_lb_worker.c\"\nunnamed block $b23, line 1794 in \"mod_jk.c\"\nunnamed block $b22, line 1794 in \"mod_jk.c\"\nunnamed block $b21, line 1794 in \"mod_jk.c\"\nunnamed block $b20, line 1794 in \"mod_jk.c\"\njk_handler(0x304d3498), line 1794 in \"mod_jk.c\"\nap_run_handler(0x304d3498) at 0x10003b58\nap_invoke_handler(0x304d3498) at 0x10004c2c\nap_process_request(0x304d3498) at 0x1004211c\nap_process_http_connection(0x304c9538) at 0x10046840\nap_run_process_connection(0x304c9538) at 0x10035124\nap_process_connection(0x304c9538, 0x304c9448) at 0x10035aa4\nprocess_socket(0x304c9410, 0x304c9448, 0x1, 0x18, 0x304cb420) at 0x1000c3e0\nworker_thread(0x30110bd0, 0x30076728) at 0x1000bb1c\ndummy_worker(0x30110bd0) at 0xd09c6ab4\n\n\nThe user limits for user root are all unlimited.\n\nBest regards\nTorsten", "id": 4416, "time": "2005-03-23T15:03:45Z", "bug_id": 34150, "creation_time": "2005-03-23T15:03:45Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 34150, "attachment_id": null, "id": 72844, "time": "2005-03-25T14:34:23Z", "creator": "jorton@redhat.com", "creation_time": "2005-03-25T14:34:23Z", "is_private": false, "text": "You might want to try prefork to check whether this is a thread-safety issue."}, {"count": 2, "tags": [], "creator": "torsten.reschke@gehe.de", "attachment_id": null, "is_private": false, "id": 73053, "time": "2005-03-30T09:28:53Z", "bug_id": 34150, "creation_time": "2005-03-30T09:28:53Z", "text": "(In reply to comment #1)\n> You might want to try prefork to check whether this is a thread-safety issue.\n\nThanks for the info. I changed the apache from worker to prefork mode.\nstill checking error_log...\n\nBye\nTorsten Reschke\n\n"}, {"count": 3, "tags": [], "bug_id": 34150, "attachment_id": null, "id": 73281, "time": "2005-04-05T09:15:25Z", "creator": "torsten.reschke@gehe.de", "creation_time": "2005-04-05T09:15:25Z", "is_private": false, "text": "Hello,\n\nsince one week we never saw the error again. Seems to be working now with the\nprefork mode.\nThanks!\n\nBest regards\nTorsten\n\n\n"}]