[{"count": 0, "tags": [], "text": "${ant.version} contains the version number plus additional textual \ninformation.  If the version number were available separately, possibly as \nindividual components such as ${ant.version.major}, ${ant.version.minor}, and \n${ant.version.revision}, it would be possible for ant scripts to cleanly detect \nif the version of ant which is running the buildfile is of a high enough level \nto run the script, or possibly even be able to <ant> different buildfiles.\n\nAlso, it would be useful to have an alternate to ${ant.version} such as \n${ant.version.number} which contains _only_ the version number.", "attachment_id": null, "id": 25962, "creator": "thierry.lach@bbdodetroit.com", "time": "2002-11-08T17:35:45Z", "bug_id": 14392, "creation_time": "2002-11-08T17:35:45Z", "is_private": false}, {"count": 1, "tags": [], "creator": "ddevienne@lgc.com", "is_private": false, "text": "Very often, a newer build file (even with version checking) using new tasks \nwill fail at parse time, before you have a chance to really check for the \nproper version of Ant... --DD", "id": 25964, "time": "2002-11-08T17:47:23Z", "bug_id": 14392, "creation_time": "2002-11-08T17:47:23Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 14392, "text": "That is sometimes true if the differences are related to actual tasks.\n\nBut many times the differences may come down to new or changed arguments on a \ncommand, an overly simple example being the addition of \"if\" and \"unless\" to \n<fail>.  Also, using an optional task such as <translate> does not fail under \nant 1.4.1 (for example) until the time comes to execute the task.  Adding \neither of the two to a task in a buildfile and running it under ant 1.4.1 \nexecutes the buildfile up to the point of actually attempting to run the task \nitself.  Any predecessor tasks _are_ executed.  ", "id": 25966, "attachment_id": null, "creator": "thierry.lach@bbdodetroit.com", "creation_time": "2002-11-08T18:03:34Z", "time": "2002-11-08T18:03:34Z", "is_private": false}, {"count": 3, "tags": [], "text": "Previous comment last line should have read \"predecessor targets\" instead \nof \"predecessor tasks\".\n", "is_private": false, "id": 25967, "creator": "thierry.lach@bbdodetroit.com", "time": "2002-11-08T18:04:39Z", "bug_id": 14392, "creation_time": "2002-11-08T18:04:39Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 14392, "text": "One option discussed in the past would be specify a minimum_ant_version\nattribute in the <project> declaration; if specified then we'd check for a min\nversion. Of couse, a new attribute would implicitly break all old versions...", "id": 25978, "time": "2002-11-08T20:17:35Z", "creator": "stevel@apache.org", "creation_time": "2002-11-08T20:17:35Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 14392, "text": "With the capabilities of <condition> it would be rather simple to write the \nequivalent of a \"minimal_ant_version\".  And making the version information \navailable as properties would still allow older ants to cleanly run and abort \nwith a fully qualified message.\n\nSee the following example (please look only at the logic - I'm writing this out \nof my head and it may not be completely syntactically correct - and yes I know \nit will abort with ant 1.4.1 because of the <fail if>):\n\n\n<project default=\"compile\">\n  <target name=\"checkversion-init\" unless=\"ant.version.major\">\n\n    <condition property=\"ant.is.ok\">\n        ...\n    </condition>  \n  </target>\n\n  <target name=\"checkversion\" depends=\"checkversion-init\" unless=\"ant.is.ok\">\n    <fail>\nThe version of ant you are using is not recent enough to execute this build.xml \nfile.  You must use a version of ant that is at least 1.6.1.\n    </fail>\n  </target>\n\n\n  <target name=\"init\" depends=\"checkversion\">\n    ...\n  </target>\n\n  <target name=\"compile\" depends=\"init\">\n     ...\n  </target>\n\n</project>\n\nThis should run as is (once the ... are filled in) even with ant older than \n1.4.1, and at least display the full text of the fail message.\n\nThis does point out that there would probably have to be enhancements made to \nthe <condition> task to allow for inequality checking, as there doesn't \ncurrently seem to be a way to say\n\n    if version.major = 1 then\n        if version.minor >= 6 then\n            if version.revision >= 1 then\n                set ok\n            else\n                set error\n            endif\n        else\n            set error\n        endif\n    else\n        if version.major > 1 then\n            set ok\n        else\n            set error\n        end if    \n    endif\n\nA <version> test as part of <condition> might be very useful - a generic method \nfor inequality checking of a dot-separated (probably should be configurable as \nto the separator) list of numbers.\n\nFor example:\n\n  <condition property=\"within.range\">\n    <and>\n      <version minimum=\"1.6.1\" value=\"${ant.version.full}\"/>\n      <version maximum=\"1.6.3\" value=\"${ant.version.full}\"/>\n    </and>\n  <condition>\n\n", "id": 26065, "time": "2002-11-11T13:43:06Z", "creator": "thierry.lach@bbdodetroit.com", "creation_time": "2002-11-11T13:43:06Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 14392, "text": "Try this\n\n    <!-- set VERSION property -->\n    <property resource=\"org/apache/tools/ant/version.txt\"/>\n\n\n      <condition property=\"ant141\">\n        <equals arg1=\"${VERSION}\" arg2=\"1.4.1\"/>\n      </condition>\n\nNot perfect but workable.", "id": 26067, "attachment_id": null, "creator": "conor@apache.org", "creation_time": "2002-11-11T14:10:25Z", "time": "2002-11-11T14:10:25Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 14392, "text": "If that were incorporated into ant to create ${ant.version.string} (or whatever \nsomeone wanted to call it), and <condition> were extended as I suggested \npreviously, that should be more than sufficient.  I'll try to supply a patch \nfor ant.version.string at least - should be simple enough for a first-time \ncontributor ;-)", "id": 26068, "time": "2002-11-11T14:20:00Z", "creator": "thierry.lach@bbdodetroit.com", "creation_time": "2002-11-11T14:20:00Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "text": "Patch to expose ant.version.string.", "is_private": false, "id": 26070, "creator": "thierry.lach@bbdodetroit.com", "time": "2002-11-11T14:50:40Z", "bug_id": 14392, "creation_time": "2002-11-11T14:50:40Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 14392, "attachment_id": 3798, "text": "Created attachment 3798\nPatch to expose ant.version.string", "id": 26071, "time": "2002-11-11T14:52:22Z", "creator": "thierry.lach@bbdodetroit.com", "creation_time": "2002-11-11T14:52:22Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 14392, "text": "made redundant via the antversion task of Ant 1.7.0", "id": 129734, "attachment_id": null, "creator": "bodewig@apache.org", "creation_time": "2009-08-17T01:57:27Z", "time": "2009-08-17T01:57:27Z", "is_private": false}]