[{"count": 0, "tags": [], "bug_id": 40943, "attachment_id": null, "is_private": false, "id": 95649, "time": "2006-11-10T03:44:27Z", "creator": "donald.nairn@barco.com", "creation_time": "2006-11-10T03:44:27Z", "text": "For some reason the following code does not produce the correct results in my\nenvironment:\n        <zip destfile=\"${basedir}/BCDEDebug.zip\">\n            <fileset dir=\"${basedir}/VoxarLib/bin/Debug\">\n                <include name=\"BCDE.VoxarDicom.dll,BCDE.VoxarDicom.pdb\"/>\n            </fileset>\n            <fileset dir=\"${basedir}/VoxarLib/bin/Debug\">\n                <include name=\"BCDE.VoxarLib.dll,BCDE.VoxarLib.pdb\"/>\n            </fileset>\n        </zip>\n\nThe example above results in no files being copied whereas with the example\nbelow it results in both files being copied.\n\n        <zip destfile=\"${basedir}/BCDEDebug.zip\">\n            <fileset dir=\"${basedir}/VoxarDicom/bin/Debug\">\n                <include name=\"BCDE.VoxarDicom.dll\"/>\n                <include name=\"BCDE.VoxarDicom.pdb\"/>\n            </fileset>\n            <fileset dir=\"${basedir}/VoxarLib/bin/Debug\">\n                <include name=\"BCDE.VoxarLib.dll\"/>\n                <include name=\"BCDE.VoxarLib.pdb\"/>\n            </fileset>\n\nAnother problem occurs with another project:\n        \n        <zip destfile=\"${basedir}/BCDEDebug.zip\">\n            <fileset dir=\"${basedir}/Core.Fast/bin/Debug\">\n                <include name=\"BCDE.Core.Fast.dll,BCDE.Core.Fast.pdb\"/>\n            </fileset>\n        </zip>\n\nGives the correct result whereas the following results in both files being\ncopied into the archive twice:\n\n        <zip destfile=\"${basedir}/BCDEDebug.zip\">\n            <fileset dir=\"${basedir}/Core.Fast/bin/Debug\">\n                <include name=\"BCDE.Core.Fast.dll/>\n                <include name=\"BCDE.Core.Fast.pdb\"/>\n            </fileset>\n        </zip>\n\nThese projects are both c++ and the rest of the project is c#. Whether this\nmakes a difference I do not know, but all the c# projects work without any problems."}, {"count": 1, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "id": 95651, "time": "2006-11-10T04:14:12Z", "bug_id": 40943, "creation_time": "2006-11-10T04:14:12Z", "is_private": false, "text": "This isnt a bug. This is the kind of thing to raise on the user list, with a\nsubject like \"why isnt my fileset working?\"\n\nThe underlying problem is a difference between user expectations and how ant\ninterprets <include name>. Put succinctly: the name attribute is not a list, is\nnot a pattern, it is a single filename.\n\n1. No files being picked up.\n            <fileset dir=\"${basedir}/VoxarLib/bin/Debug\">\n                <include name=\"BCDE.VoxarDicom.dll,BCDE.VoxarDicom.pdb\"/>\n            </fileset>\n\nYou are asking for the file \"BCDE.VoxarDicom.dll,BCDE.VoxarDicom.pdb\", which\ndoesnt exist. Stick with the second option.\n\n2. Another problem occurs with another project: ...\n\nthe first task cannot work as stated (see #1). It shouldnt be copying anything.\nThe second task should be right. If you want to block duplicates creeping into a\nzip, set duplicate=\"fail\" and have ant halt the build if it gets attempted.\n\n-steve"}]