[{"count": 0, "tags": [], "text": "From:     Yyy Xxx <gjfdh@yahoo.com>\nDate:     2001-10-19 17:48:24\n\nThank you, Phil, for your outputproperty example.  But I'm actually looking for \nan \"rcproperty\" attribute.  I'd like to have the return code of the exec made \nvisible to ant.\n\nFor instance, suppose I exec a program and want to take action if the program \nfails.  I could use the failonerror attribute and have the ant build fail.  But \nit would be better if I could fail more gracefully.\n\nHere's a made-up example.  The Unix diff program exits with a status(return) \ncode of 0 if two files are the same, 1 if some differences were found, and 2 \nmeans trouble.\n\nThe \"diff\" target causes diff to be run against two files.  The (made up) \nrcproperty attribute would capture the status code and let <condition> analyze\nit. When diff returned a status code of \"2\", ant would automatically e-mail me \na note before failing.\n\n<target name='rundiff'>\n  <exec executable='diff' rcproperty='diff.rc'>\n     <arg value='${file1}'/>\n     <arg value='${file2}'/>\n  </exec>\n\n  <condition property='diff.failed'>\n    <equals arg1='${diff.rc}' arg2='2'/>\n  </condition>\n</target>\n\n<target name='check-diff' depends='rundiff'\nif='diff.failed'>\n  <mail subject='*** DIFF Failed ***' message='A diff\nof ${file1} and ${file2} is giving us trouble.'/>\n  <fail/>\n</target>\n\n<target name=\"diff\" depends='check-diff'/>", "attachment_id": null, "bug_id": 4345, "id": 7008, "time": "2001-10-22T12:11:27Z", "creator": "gjfdh@yahoo.com", "creation_time": "2001-10-22T12:11:27Z", "is_private": false}, {"count": 1, "text": "Added in the nightly build, using the name resultproperty; you can then use \nthings like <condition> to process the result. Remember that ant is build \ntool, not a scripting language, so what you can do will always be somewhat \nlimited. Also, keep failonerror=false for <exec>", "bug_id": 4345, "attachment_id": null, "id": 8351, "time": "2001-11-27T12:58:35Z", "creator": "steve_l@iseran.com", "creation_time": "2001-11-27T12:58:35Z", "tags": [], "is_private": false}]