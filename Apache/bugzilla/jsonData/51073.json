[{"count": 0, "tags": [], "bug_id": 51073, "is_private": false, "id": 145817, "attachment_id": null, "creator": "colin@colinharrington.net", "creation_time": "2011-04-16T00:20:22Z", "time": "2011-04-16T00:20:22Z", "text": "When configuring tomcat with an SSL Connector with an AprEndpoint (using the Http11AprProtocol) if you misconfigure the SSLProtocol, the it silently falls back to \"all\" which can be very dangerous.\n\nFor example this configuration may seem convincing:\n<Connector \n\tprotocol=\"org.apache.coyote.http11.Http11AprProtocol\"\n\tSSLEnabled=\"true\"\n\tport=\"443\"\n\tscheme=\"https\"\n\tsecure=\"true\"\n\t...Other SSL configuration...\n\tSSLProtocol=\"-ALL +SSLv3 +TLSv1\" \n\t.../>\n\t\nThe Documentation states valid values for the SSL protocol, but if the values don't line up exactly it defaults to \"ALL\"\nhttp://tomcat.apache.org/tomcat-7.0-doc/config/http.html#SSL%20Support \nSSLProtocol: 'Protocol which may be used for communicating with clients. The default is \"all\", with other acceptable values being \"SSLv2\", \"SSLv3\", \"TLSv1\" and \"SSLv2+SSLv3\".'\n\nMisconfiguration of an SSLProtocol should never silently fall back to enabling all protocols.  At minimum, misconfiguration of this value should result in logged error messages.  Since SSLv2 is vulnerable to several attacks known to have some serious security flaws even allowing the possibility of man-in-the-middle attacks, I think a misconfiguration should cause the connector to fail.\n\n@See http://svn.apache.org/repos/asf/tomcat/trunk/java/org/apache/tomcat/util/net/AprEndpoint.java\n\nI think that \"all\" should be specifically allowed (along with \"\" or null), and all other unexpected values should fail loudly."}, {"count": 1, "attachment_id": null, "creator": "markt@apache.org", "text": "Fixed in 7.0.x and will be included in 7.0.13 onwards.\n\nProposed for 5.5.x and 6.0.x.", "id": 145825, "time": "2011-04-17T09:02:13Z", "bug_id": 51073, "creation_time": "2011-04-17T09:02:13Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 51073, "attachment_id": null, "text": "Fixed in 6.0.x and will be included in 6.0.33 onwards.", "id": 146408, "time": "2011-05-18T12:12:19Z", "creator": "markt@apache.org", "creation_time": "2011-05-18T12:12:19Z", "is_private": false}, {"count": 3, "tags": [], "text": "This has been fixed in 5.5.x and will be included in 5.5.34 onwards.", "is_private": false, "id": 148692, "creator": "markt@apache.org", "time": "2011-08-18T17:05:48Z", "bug_id": 51073, "creation_time": "2011-08-18T17:05:48Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 51073, "is_private": false, "text": "(In reply to comment #2)\n> Fixed in 6.0.x and will be included in 6.0.33 onwards.", "id": 151314, "time": "2011-11-09T02:12:12Z", "creator": "qichangyao@126.com", "creation_time": "2011-11-09T02:12:12Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "(In reply to comment #2)\n> Fixed in 6.0.x and will be included in 6.0.33 onwards.", "is_private": false, "bug_id": 51073, "id": 151315, "time": "2011-11-09T02:12:49Z", "creator": "qichangyao@126.com", "creation_time": "2011-11-09T02:12:49Z", "attachment_id": null}]