[{"attachment_id": null, "tags": [], "bug_id": 38814, "text": "Suppose the CGI header contains:\n\n   content-type: text/plain; charset=shift_jis\n\nThis content type is exactly set to the header of the servlet response. However,\nboth the reader of the CGI output and the writer of the servlet output always\napply the platform's default character encoding, since InputStreamReader and\nOutputStreamWriter are constructed without charset.\n\nI've already written the patch. Please contact me by email, then I can send you\nthe revised CGIServlet (the source came from 5.5.15).", "count": 0, "id": 86322, "time": "2006-03-01T09:32:18Z", "creator": "motoyoshi_sugiu@forcia.com", "creation_time": "2006-03-01T09:32:18Z", "is_private": false}, {"count": 1, "tags": [], "creator": "motoyoshi_sugiu@forcia.com", "text": "Created attachment 17811\nA revised CGIServlet based on Tomcat 5.5.15 source.", "id": 86323, "time": "2006-03-01T09:35:29Z", "bug_id": 38814, "creation_time": "2006-03-01T09:35:29Z", "is_private": false, "attachment_id": 17811}, {"count": 2, "tags": [], "creator": "motoyoshi_sugiu@forcia.com", "text": "The revised code was attached. In order to solve this problem, the following\nsteps are made.\n\n(1) charset is extracted from the content-type in CGI header.\n\n(2) servletContainerStdout is created for the specified charset if any.\n\n(3) commandsStdOut is created for the specified charset if any.", "id": 86324, "time": "2006-03-01T09:44:30Z", "bug_id": 38814, "creation_time": "2006-03-01T09:44:30Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "text": "Fixed using an alternative patch that removed the Stream -> Reader -> Stream\nconversions that were causing the problem.", "id": 86532, "time": "2006-03-06T17:49:40Z", "bug_id": 38814, "creation_time": "2006-03-06T17:49:40Z", "is_private": false, "attachment_id": null}]