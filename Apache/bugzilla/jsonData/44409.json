[{"count": 0, "tags": [], "text": "The only keystore other than one based in a file that tomcat supports is PKCS11.\nJava 6 has introduced Windows-MY and Windows-ROOT providers, that provide access\nto certificates inside the Windows store.\nI've examined org.apache.tomcat.util.net.jsse.JSSESocketFactory and found that\nadding the suport to them is trivial. I changed two lines and it works. It is a\nsimple modification. Now, I'd like to share it, so Tomcat developers could\ninclude it in next releases.\n\nWhen code was:\n\nif(! \"PKCS11\".equalsIgnoreCase(type) ) {\n    File keyStoreFile = new File(path);\n    if (!keyStoreFile.isAbsolute()) {\n        keyStoreFile = new File(System.getProperty(\"catalina.base\"), path);    \n                     \n    }\n    istream = new FileInputStream(keyStoreFile);\n}\nks.load(istream, pass.toCharArray());\n\nNow, it would be:\n\nif (\"Windows-MY\".equalsIgnoreCase(type)) {\n    log.info(\"Using Windows keystore for SSL\");\n    ks.load(null, null);\n} else {\n\n    // ... *Previous block of code* ...\n}", "is_private": false, "bug_id": 44409, "id": 113691, "time": "2008-02-13T03:48:08Z", "creator": "khainodd@yahoo.com", "creation_time": "2008-02-13T03:48:08Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "There has been a much more general fix for this for quite a long time.", "is_private": false, "bug_id": 44409, "id": 131369, "time": "2009-10-25T17:26:03Z", "creator": "billbarker@apache.org", "creation_time": "2009-10-25T17:26:03Z", "attachment_id": null}]