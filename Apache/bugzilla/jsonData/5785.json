[{"count": 0, "tags": [], "creator": "kyfung@csi.ca", "text": "Example JSP: converted and modified from foo.jsp in the examples/jsp/simpletag\ndirectory.\n\n<jsp:root\n  xmlns:jsp=\"http://java.sun.com/JSP/Page\"\n  xmlns:eg=\"http://jakarta.apache.org/tomcat/examples-taglib\"\n  version=\"1.2\">\n\n<html>\n<body>\n\nRadio stations that rock:\n\n<ul>\n<eg:foo att1=\"98.5\" att2=\"92.3\" att3=\"107.7\">\n<form action=\"%= member %\"/>\n<li><jsp:expression>member</jsp:expression></li>\n</eg:foo>\n</ul>\n</body>\n</html>\n</jsp:root>\n\n\nThe <jsp:expression> is generated okay. But the request-time expression in the\naction attribute is not.\n\nIt seems if a tag is considered 'uninterpreted', then the attributes are simply\noutput to the servlet writer.\n\nPossible fix:\n\ndiff -C 5\ntomcat/src/jasper/src/share/org/apache/jasper/compiler/UninterpretedTagBeginGenerator.java\njakarta-tomcat-4.0.1-src/jasper/src/share/org/apache/jasper/compiler/UninterpretedTagBeginGenerator.java\n***\ntomcat/src/jasper/src/share/org/apache/jasper/compiler/UninterpretedTagBeginGenerator.java\n   Mon Jan  7 16:35:34 2002\n---\njakarta-tomcat-4.0.1-src/jasper/src/share/org/apache/jasper/compiler/UninterpretedTagBeginGenerator.java\n   Sun Oct 14 12:14:32 2001\n***************\n*** 102,121 ****\n          String quote = doubleQuote;\n                  String name = attrs.getQName(i);\n                  String value = attrs.getValue(i);\n          if (value.indexOf('\"') != -1) quote = singleQuote;\n                  sb.append(\"  \").append(name).append(\"=\").append(quote);\n!                                 if (JspUtil.isExpression(value, true)) \n!                                 {\n!                                     sb.append(\"\\\");\");\n!                                     sb.append(\"out.print(\" + new\nString(JspUtil.escapeXml(JspUtil.getExpr(value, true))) + \");\");\n!                                     sb.append(\"out.write(\\\"\").append(quote);\n!                                 }\n!                                 else\n!                                 {\n!                                     sb.append(value).append(quote);\n!                                 }\n              }\n              sb.append(\">\");\n          }\n      writer.print(sb.toString());\n          writer.print(\"\\\");\");\n--- 102,112 ----\n          String quote = doubleQuote;\n                  String name = attrs.getQName(i);\n                  String value = attrs.getValue(i);\n          if (value.indexOf('\"') != -1) quote = singleQuote;\n                  sb.append(\"  \").append(name).append(\"=\").append(quote);\n!         sb.append(value).append(quote);\n              }\n              sb.append(\">\");\n          }\n      writer.print(sb.toString());\n          writer.print(\"\\\");\");", "id": 9513, "time": "2002-01-10T08:41:02Z", "bug_id": 5785, "creation_time": "2002-01-10T08:41:02Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "kin-man.chung@sun.com", "text": "The runtime expression (of the form \"%=...%\") in only evaluated when it appears\nin the attributes of a<jsp:expression>, some standard action, or a custom tag\naction element, and is not in an unterpreted tag.  Check the spec.", "id": 11672, "time": "2002-03-11T18:42:25Z", "bug_id": 5785, "creation_time": "2002-03-11T18:42:25Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "kin-man.chung@sun.com", "text": "*** Bug 8425 has been marked as a duplicate of this bug. ***", "id": 14485, "time": "2002-04-23T18:18:42Z", "bug_id": 5785, "creation_time": "2002-04-23T18:18:42Z", "is_private": false, "attachment_id": null}]