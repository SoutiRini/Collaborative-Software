[{"count": 0, "tags": [], "bug_id": 46792, "text": "i get an exception at:\n\njava.lang.NullPointerException\n\tat org.apache.catalina.connector.Request.parseParameters(Request.java:2446)\n\tat org.apache.catalina.connector.Request.getParameterNames(Request.java:1082)\n\tat org.apache.catalina.connector.RequestFacade.getParameterNames(RequestFacade.java:371)\n\tat com.sun.faces.context.RequestParameterMap.getEntryIterator(ExternalContextImpl.java:1218)\n\tat com.sun.faces.context.BaseContextMap$EntrySet.iterator(ExternalContextImpl.java:582)\n\tat com.sun.faces.context.BaseContextMap$BaseSet.size(ExternalContextImpl.java:570)\n\tat java.util.Collections$UnmodifiableCollection.size(Collections.java:998)\n\tat java.util.AbstractMap.size(AbstractMap.java:67)\n\tat java.util.Collections$UnmodifiableMap.size(Collections.java:1278)\n\n the method 'getMethod()' sometimes returns null for unkown reasons.\n\ni think this is a bug?", "id": 125281, "attachment_id": null, "creator": "alexander.schmidt@it.nrw.de", "creation_time": "2009-03-03T06:39:14Z", "time": "2009-03-03T06:39:14Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 46792, "attachment_id": null, "id": 125293, "time": "2009-03-03T14:17:03Z", "creator": "markt@apache.org", "creation_time": "2009-03-03T14:17:03Z", "is_private": false, "text": "I can't yet see how you are getting a NPE there. Please provide the full stack trace."}, {"count": 2, "tags": [], "creator": "alexander.schmidt@it.nrw.de", "text": "the lines causing the exception are\n\nexternalContext = FacesContext.getCurrentInstance().getExternalContext();\nrequestParameterMap = externalContext.getRequestParameterMap();\n// next line causes the exception, you can see the size() call in the stack trace\nif (requestParameterMap != null && requestParameterMap.size() > 0) {\n  //do something\n  //...\n}", "id": 125305, "time": "2009-03-03T22:25:54Z", "bug_id": 46792, "creation_time": "2009-03-03T22:25:54Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 46792, "attachment_id": null, "text": "Again, please provide the full stack trace.", "id": 125306, "time": "2009-03-04T00:02:59Z", "creator": "markt@apache.org", "creation_time": "2009-03-04T00:02:59Z", "is_private": false}, {"count": 4, "tags": [], "creator": "alexander.schmidt@it.nrw.de", "text": "java.lang.NullPointerException\n at org.apache.catalina.connector.Request.parseParameters(Request.java:2446)\n at org.apache.catalina.connector.Request.getParameterNames(Request.java:1082)\n at org.apache.catalina.connector.RequestFacade.getParameterNames(RequestFacade.java:371)\n at com.sun.faces.context.RequestParameterMap.getEntryIterator(ExternalContextImpl.java:1218)\n at com.sun.faces.context.BaseContextMap$EntrySet.iterator(ExternalContextImpl.java:582)\n at com.sun.faces.context.BaseContextMap$BaseSet.size(ExternalContextImpl.java:570)\n at java.util.Collections$UnmodifiableCollection.size(Collections.java:998)\n at java.util.AbstractMap.size(AbstractMap.java:67)\n at java.util.Collections$UnmodifiableMap.size(Collections.java:1278)\n at de.nrw.lds.gues.web.controll.AbstractControl.getRequestParameterMap(AbstractControl.java:142)\n at de.nrw.lds.gues.web.controll.suche.CSuche.getSelectedTab(CSuche.java:88)\n at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n at java.lang.reflect.Method.invoke(Method.java:589)\n at javax.el.BeanELResolver.getValue(BeanELResolver.java:62)\n at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:53)\n at com.sun.faces.el.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:73)\n at org.apache.el.parser.AstValue.getValue(AstValue.java:118)\n at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)\n at com.sun.facelets.el.TagValueExpression.getValue(TagValueExpression.java:71)\n at javax.faces.component.UIOutput.getValue(UIOutput.java:184)\n at org.richfaces.component.UITabPanel.getValue(UITabPanel.java:103)\n at org.richfaces.component.UITabPanel.getRenderedValue(UITabPanel.java:129)\n at org.richfaces.component.UITabPanel.restoreState(UITabPanel.java:171)\n at org.richfaces.component.html.HtmlTabPanel.restoreState(HtmlTabPanel.java:966)\n at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1155)\n at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)\n at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)\n at javax.faces.component.UIComponentBase.processRestoreState(UIComponentBase.java:1171)\n at org.ajax4jsf.application.AjaxStateManager.restoreView(AjaxStateManager.java:414)\n at com.sun.faces.application.ViewHandlerImpl.restoreView(ViewHandlerImpl.java:318)\n at com.sun.facelets.FaceletViewHandler.restoreView(FaceletViewHandler.java:316)\n at com.sun.facelets.FaceletViewHandler.restoreView(FaceletViewHandler.java:316)\n at org.ajax4jsf.application.ViewHandlerWrapper.restoreView(ViewHandlerWrapper.java:107)\n at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:176)\n at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)\n at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:104)\n at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)\n at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:532)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:178)\n at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)\n at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:390)\n at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:517)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n at de.nrw.lds.gues.web.EntityManagerRequestFilter.doFilter(EntityManagerRequestFilter.java:59)\n at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:525)\n at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n at org.apache.catalina.valves.RequestDumperValve.invoke(RequestDumperValve.java:151)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)\n at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)\n at java.lang.Thread.run(Thread.java:619)", "id": 125308, "time": "2009-03-04T00:13:55Z", "bug_id": 46792, "creation_time": "2009-03-04T00:13:55Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 46792, "attachment_id": null, "text": "Tomcat re-uses Request objects between requests.\n\ngetMethod() will only return null after the Request object has been re-cycled at the end of the previous request and before it has been initialised at the start of the next request.\n\nIt appears as some code somewhere is retaining a reference to a Request object from a previous request and is attempting to use it after the request has ended.", "id": 125338, "time": "2009-03-05T07:58:34Z", "creator": "markt@apache.org", "creation_time": "2009-03-05T07:58:34Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 46792, "text": "\nI removed all references to FacesContext, ExternalContext and RequestParameterMap from my project. Now the problem seems to be gone.\n\nthank you for your help", "id": 125534, "attachment_id": null, "creator": "alexander.schmidt@it.nrw.de", "creation_time": "2009-03-13T02:24:03Z", "time": "2009-03-13T02:24:03Z", "is_private": false}]