[{"count": 0, "tags": [], "bug_id": 34241, "text": "The following XML in build.xml, produces the error at the end of this\ndescription.   A file that is 2.5GB large is in the path that the tar is working\non.  If an <exclude> element is created for the specific file, and all the rest\nof the files are <2GB, the tar succeeds.  Ant 1.6.2 executing on RHAS 2.1 on HP\nintel hardware (DL380).   Also, gnutar successfully builds this tar file. Trying\nto build an exec command to execute the guntar but the syntax escapes me. \n\n  <target name=\"packvar\"\n          description=\"tar and gzip the var directory for install into other\nphases\">\n\n    <echo message=\"Beginning packvar...\"/>\n\n    <echo message=\"Removing Existing tar File\"/>\n    <delete file=\"${rds.tars}/rdsvar.tar.gz\"/>\n\n    <echo message=\"Creating New tar File\"/>\n    <tar destfile=\"${rds.tars}/rdsvar.tar.gz\"\n         compression=\"gzip\"\n\t longfile=\"gnu\">\n\n      <tarfileset dir=\"${rds.var}\">\n\t<exclude name=\"**/.*\"/>\n\t<include name=\"**\"/>\n      </tarfileset>\n    </tar>\n\n[...]$ ant packvar\nBuildfile: build.xml\n\npackvar:\n     [echo] Beginning packvar...\n     [echo] Removing Existing tar File\n   [delete] Deleting: /.../tars/rdsvar.tar.gz\n     [echo] Creating New tar File\n      [tar] Building tar: /.../tars/rdsvar.tar.gz\n\nBUILD FAILED\n/.../build.xml:157: Problem creating TAR: request to write '0' bytes exceeds\nsize in header of '-1582609869' bytes\n\nTotal time: 1 second", "id": 73090, "time": "2005-03-30T18:07:35Z", "creator": "jaysantusersub@mac.com", "creation_time": "2005-03-30T18:07:35Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 34241, "attachment_id": null, "is_private": false, "id": 73101, "time": "2005-03-30T20:17:17Z", "creator": "jaysantusersub@mac.com", "creation_time": "2005-03-30T20:17:17Z", "text": "I take it back.  Gnu tar can't handle this 2.5 GB file either.  When I try to\nback that file alone, it says it doesn't exist.  At least in this version on\nthis OS.  Large file support is on in the OS.  Don't know if there is a build of\ngnutar that will handle the larger files.  We will be moving to RHAS 3.0 in the\nnext release of our system, but this first release has to stay with the older\nRHAS 2.1 and its version of tar.\n\nFor now my workaround is to copy the file separately from the rest of the\ndirectory tree, to the deployment systems."}, {"count": 2, "tags": [], "creator": "stevel@apache.org", "attachment_id": null, "text": "IF gnutar cant handle it, it would seem dangerous to fix it in our system, as\nend users probably wouldnt be able to read the file.\n\nIf there is a fix. It may be 2GB is all you can get in tar.\n\nLeaving open, downgrading to 'normal'. At the very least, we should detect\noversize files and warn on them. \n\nthis'll be a fun little test case :)", "id": 73161, "time": "2005-03-31T23:43:51Z", "bug_id": 34241, "creation_time": "2005-03-31T23:43:51Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "ninju_bohra@yahoo.com", "text": "Looks like it back to being an ANT-only issue,\n\nWe have three files, one of which is a ~16GB database dump (the other two are \nsmall) that we want to tar up.\n\nOn Linux RH ES 3.0, the following works fine: tar -cvf test.tar /opt/tarit/*\n\nHowever a simple target that merely tried to <tar> the same files gave us:\ntarIt:\n     [echo] ./test.tar\nCould not load a dependent class (com/sun/media/jai/codec/FileSeekableStream) \nfor type image\nCould not load a dependent class (com/jcraft/jsch/UserInfo) for type sshexec\nCould not load a dependent class (com/jcraft/jsch/UserInfo) for type scp\nCould not load class (org.apache.tools.ant.tasksdefs.cvslib.CvsVersion) for \ntype cvsversion\nCould not load a dependent class (jdepend/xmlui/JDepend) for type jdepend\nTar$TarFileSet: Setup scanner in dir \\\\wstldwagner\\dw_dbexport with patternSet\n{ includes: [_droptable.sql, DataExport.dm\np, dataExport.log, droptables.sql, fromuser.txt] excludes: [] }\n      [tar] DataExport.dmp added as C:/Tools/Resoft/test.tar doesn't exist.\n      [tar] droptables.sql added as C:/Tools/Resoft/test.tar doesn't exist.\n      [tar] fromuser.txt added as C:/Tools/Resoft/test.tar doesn't exist.\n      [tar] Building tar: C:\\Tools\\Resoft\\test.tar\n\nBUILD FAILED\nC:\\Tools\\Resoft\\build.xml:27: Problem creating TAR: request to write '0' bytes \nexceeds size in header of '-290188984' by\ntes\n        at org.apache.tools.ant.taskdefs.Tar.execute(Tar.java:290)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nCaused by: java.io.IOException: request to write '0' bytes exceeds size in \nheader of '-290188984' bytes\n        at org.apache.tools.tar.TarOutputStream.write(TarOutputStream.java:235)\n        at org.apache.tools.ant.taskdefs.Tar.tarFile(Tar.java:392)\n        at org.apache.tools.ant.taskdefs.Tar.execute(Tar.java:285)\n        ... 10 more\n--- Nested Exception ---\njava.io.IOException: request to write '0' bytes exceeds size in header of '-\n290188984' bytes\n        at org.apache.tools.tar.TarOutputStream.write(TarOutputStream.java:235)\n        at org.apache.tools.ant.taskdefs.Tar.tarFile(Tar.java:392)\n        at org.apache.tools.ant.taskdefs.Tar.execute(Tar.java:285)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\n", "id": 75082, "time": "2005-05-19T21:43:57Z", "bug_id": 34241, "creation_time": "2005-05-19T21:43:57Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 34241, "text": "The TAR task now (1.7 alpha) accepts files  < 8GB, according to the posix TAR\nfile format.", "id": 76111, "time": "2005-06-07T00:22:10Z", "creator": "jkf@apache.org", "creation_time": "2005-06-07T00:22:10Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 34241, "text": "Wonder why this one hasn't been resolved before, probably my fault.\n\nPlease reopen if not solved (for files upto 8 Meg) for ant 1.7", "id": 91020, "time": "2006-07-08T11:18:05Z", "creator": "jkf@apache.org", "creation_time": "2006-07-08T11:18:05Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "mbenson@apache.org", "text": "(In reply to comment #5)\n> Wonder why this one hasn't been resolved before, probably my fault.\n> \n> Please reopen if not solved (for files upto 8 Meg) for ant 1.7\n\n8 gig, you mean... ?", "id": 91060, "time": "2006-07-10T13:47:14Z", "bug_id": 34241, "creation_time": "2006-07-10T13:47:14Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 34241, "text": "Yes, Gig, thanks\n\n(In reply to comment #6)", "id": 91065, "time": "2006-07-10T17:02:14Z", "creator": "jkf@apache.org", "creation_time": "2006-07-10T17:02:14Z", "is_private": false, "attachment_id": null}]