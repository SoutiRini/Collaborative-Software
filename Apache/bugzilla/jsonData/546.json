[{"count": 0, "tags": [], "bug_id": 546, "attachment_id": null, "text": "This is also in Tomcat 3 bug list, Bug#545\n\nIt appears that in Tomcat 3.2.1 (as well as all other distributions I have\nlooked at, as well as 4) no distinction is made between the JSP and TAGDEPENDENT\n<body-content> settings found in tag library descriptors when processing a JSP\nfile.  The org.apache.jasper.compiler.Parser class treats them identically and\nprocesses the body of the tag as JSP.  TAGDEPENDENT is supposed to perform no\nprocessing of the body at all, leaving it up to the tag implementation to decide\nwhat to do with the body content.\n\nI found the following patch for this code in the archives for tomcat-dev from\nDec 1999.  It appears to never have been introduced to the distribution or\nto CVS or anything.  I have updated the Parser class in my own install and the\npatch appears to work just fine.\n\n*********************************************************************\n\nTo: <tomcat-dev@jakarta.apache.org> \nSubject: PATCH: tagdependent tags should not parse content \nFrom: \"Danno Ferrin\" <DFERRIN@novell.com> \nDate: Wed, 08 Dec 1999 18:19:24 -0700 \n\nThe bodycontent=tagdependent should provide a literal copy of the tag\ncontent.  JSP will handle JSP elements first, but tagdependent\nshoudlnt.\n\nIndex: src/share/org/apache/jasper/compiler/Parser.java\n===================================================================\nRCS file:\n/home/cvspublic/jakarta-tomcat/src/share/org/apache/jasper/compiler/Parser.java,v\nretrieving revision 1.6\ndiff -C3 -r1.6 Parser.java\n*** Parser.java 1999/11/08 03:14:27     1.6\n--- Parser.java 1999/12/09 01:17:40\n***************\n*** 752,758 ****\n                              String tagEnd = \"</\"+tag+\">\";\n                              // Parse until the end of the tag body. \n                              // Then skip the tag end... \n!                             parser.parse(tagEnd);\n                              reader.advance(tagEnd.length());\n                              listener.handleTagEnd(bodyStart,\nreader.mark(), prefix, \n                                                    shortTagName, attrs,\ntli, ti);\n--- 752,764 ----\n                              String tagEnd = \"</\"+tag+\">\";\n                              // Parse until the end of the tag body. \n                              // Then skip the tag end... \n!                             if\n(bc.equalsIgnoreCase(TagInfo.BODY_CONTENT_TAG_DEPENDENT))\n!                                 // accept no core elements for tag\ndependent,\n!                                 // i.e. literal inclusion of the\ncontent\n!                                 parser.parse(tagEnd, new Class[] {});\n!                             else\n!                                 // it is JSP body content, so accept\nall core elements\n!                                 parser.parse(tagEnd);\n                              reader.advance(tagEnd.length());\n                              listener.handleTagEnd(bodyStart,\nreader.mark(), prefix, \n                                                    shortTagName, attrs,\ntli, ti);", "id": 611, "time": "2001-02-07T19:34:44Z", "creator": "bonevich@telocity.com", "creation_time": "2001-02-07T19:34:44Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 546, "attachment_id": null, "is_private": false, "id": 621, "time": "2001-02-08T16:26:08Z", "creator": "justyna.horwat@sun.com", "creation_time": "2001-02-08T16:26:08Z", "text": "Good catch! Patch applied to Tomcat 4.0b1\n\n"}]