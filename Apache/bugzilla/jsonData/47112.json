[{"count": 0, "tags": [], "creator": "xmlman@nhncorp.com", "attachment_id": null, "id": 126597, "time": "2009-04-28T12:19:16Z", "bug_id": 47112, "creation_time": "2009-04-28T12:19:16Z", "is_private": false, "text": "Hi, \n\nI\u2019m using xercesImpl-2.8.1.jar in tomcat 5.5.20.\nThis xerces caused tomcat hang a few days ago.\n\nThe thread locks happened after XMLEntityScanner' load method was excuted.\nI know there is no the load method of XMLEntityScanner class in version 2.9.\nI want to know thre load method of XMLEntityScanner class is bug.\nMany java.io.Exception situations after XMLEntityScanner' load call were searched in Google.\n\nPlease help. \n\nThanks.\n\nSample thread of java thread dump follow:\n\n\"TP-Processor325\" daemon prio=1 tid=0x69eaed00 nid=0xcf0 runnable [0x68705000..0x687061b0]\n         at java.net.SocketInputStream.socketRead0(Native Method)\n         at java.net.SocketInputStream.read(SocketInputStream.java:129)\n         at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)\n         at java.io.BufferedInputStream.read1(BufferedInputStream.java:256)\n         at java.io.BufferedInputStream.read(BufferedInputStream.java:313)\n         - locked <0x8eece9e0> (a java.io.BufferedInputStream)\n         at sun.net.www.http.ChunkedInputStream.fastRead(ChunkedInputStream.java:221)\n         at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:662)\n         - locked <0x8eecea00> (a sun.net.www.http.ChunkedInputStream)\n         at java.io.FilterInputStream.read(FilterInputStream.java:111)\n         at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2172)\n         at org.apache.xerces.impl.XMLEntityManager$RewindableInputStream.read(Unknown Source)\n         at sun.nio.cs.StreamDecoder$CharsetSD.readBytes(StreamDecoder.java:411)\n         at sun.nio.cs.StreamDecoder$CharsetSD.implRead(StreamDecoder.java:453)\n         at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:183)\n         - locked <0x8eeceab0> (a java.io.InputStreamReader)\n         at java.io.InputStreamReader.read(InputStreamReader.java:167)\n         at org.apache.xerces.impl.XMLEntityScanner.load(Unknown Source)\n         at org.apache.xerces.impl.XMLEntityScanner.peekChar(Unknown Source)\n         at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanCDATASection(Unknown Source)\n         at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\n         at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n         at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n         at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n         at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n         at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n         at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)\n         at org.apache.commons.digester.Digester.parse(Digester.java:1704)\n         at com.naver.local.weather.common.DigesterParser.parse(Unknown Source)\n         at com.naver.local.weather.common.bo.WeatherBaseBOImpl.getWeeklyWeatherBeginToday(Unknown Source)\n         at com.naver.local.weather.common.bo.WeatherBaseBOImpl.getCityWeather(Unknown Source)\n         at com.naver.local.weather.common.interceptor.LocalInjectInterceptor.setLeftFrameData(Unknown Source)\n         at com.naver.local.weather.common.interceptor.LocalInjectInterceptor.intercept(Unknown Source)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.nhncorp.lucy.web.interceptor.PermissionInterceptor.intercept(PermissionInterceptor.java:71)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.nhncorp.lucy.web.interceptor.UserInterceptor.intercept(UserInterceptor.java:88)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.nhncorp.lucy.web.interceptor.MDCLoggingInterceptor.intercept(MDCLoggingInterceptor.java:36)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.nhncorp.lucy.web.interceptor.PagerInfoInterceptor.intercept(PagerInfoInterceptor.java:67)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.nhncorp.lucy.web.interceptor.MetaCharsetInterceptor.intercept(MetaCharsetInterceptor.java:50)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.naver.local.weather.common.interceptor.ContentFilterInterceptor.intercept(Unknown Source)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.nhncorp.lucy.web.interceptor.RequestParamsInterceptor.intercept(RequestParamsInterceptor.java:44)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.opensymphony.xwork.interceptor.AroundInterceptor.intercept(AroundInterceptor.java:31)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.opensymphony.xwork.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:186)\n         at com.opensymphony.xwork.DefaultActionInvocation.invoke(DefaultActionInvocation.java:190)\n         at com.opensymphony.xwork.DefaultActionProxy.execute(DefaultActionProxy.java:116)\n         at com.opensymphony.webwork.dispatcher.DispatcherUtils.serviceAction(DispatcherUtils.java:225)\n         at com.opensymphony.webwork.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:202)\n         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n         at com.opensymphony.webwork.dispatcher.ActionContextCleanUp.doFilter(ActionContextCleanUp.java:88)\n         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n         at com.nhncorp.lucy.web.filter.WebworkActionCheckFilter.doFilter(WebworkActionCheckFilter.java:75)\n         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n         at com.nhncorp.lucy.web.filter.ServiceFilter.doFilter(ServiceFilter.java:85)\n         at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)\n         at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n         at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n         at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)\n         at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)\n         at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n         at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n         at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n         at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:199)\n         at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:282)\n         at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:767)\n         at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:697)\n         at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:889)\n         at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)\n         at java.lang.Thread.run(Thread.java:595)"}, {"count": 1, "tags": [], "creator": "mrglavas@ca.ibm.com", "attachment_id": null, "id": 135131, "time": "2010-03-07T04:17:53Z", "bug_id": 47112, "creation_time": "2010-03-07T04:17:53Z", "is_private": false, "text": "This is not the correct bug database or component for reporting issues against Xerces-J. If I had to guess the \"hang\" your may be experiencing might have to do with the timeout length on the socket. That's not something that Xerces has any control over, so if there is a bug here it would most likely be deeper in the Java class library's I/O routines. You could try asking about it in one of the Sun forums."}]