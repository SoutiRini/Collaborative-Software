[{"count": 0, "tags": [], "creator": "kanil@infics.com", "attachment_id": null, "text": "When i am doing the fresh build and deploying and testing a particular\nfunctionality for first time i am getting log4j:ERROR Could not create an\nAppender. but subsequent times i am not getting this error.\n\nReported error follows.\njava.lang.ClassCastException: org.jboss.logging.appender.DailyRollingFileAppender", "id": 103252, "time": "2007-05-16T00:03:41Z", "bug_id": 42432, "creation_time": "2007-05-16T00:03:41Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 42432, "attachment_id": null, "text": "Presuming you're using a war (or some other kind of archive with embedded jars),\ndo you have a log4j jar in your war and a log4j jar in JBoss that are clashing?\n\nOn subsequent times when you don't get the error; do you get any logging when\ntesting that functionality or is it quiet?", "id": 103262, "time": "2007-05-16T07:41:20Z", "creator": "bayard@apache.org", "creation_time": "2007-05-16T07:41:20Z", "is_private": false}, {"count": 2, "tags": [], "text": "Created attachment 20210\nconfiguration file for log4j\n\nThis is my configuration file for lo4j which is being used for logging level.", "attachment_id": 20210, "bug_id": 42432, "id": 103283, "time": "2007-05-16T22:02:33Z", "creator": "kanil@infics.com", "creation_time": "2007-05-16T22:02:33Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "kanil@infics.com", "text": "yes there is log4j.jar file in both war and jboss server as well. \nI am not getting any logging comment when not getting any error. that is simply\nquiet.(In reply to comment #1)\n> Presuming you're using a war (or some other kind of archive with embedded jars),\n> do you have a log4j jar in your war and a log4j jar in JBoss that are clashing?\n> \n> On subsequent times when you don't get the error; do you get any logging when\n> testing that functionality or is it quiet?\n\n", "count": 3, "id": 103284, "time": "2007-05-16T22:07:37Z", "bug_id": 42432, "creation_time": "2007-05-16T22:07:37Z", "is_private": false}, {"count": 4, "tags": [], "creator": "bayard@apache.org", "attachment_id": null, "text": "It sounds like you're getting a classcast because the superclass of the class\nyou mention is loaded by a different classloader than the class it is being\nassigned to.\n\nEasiest solution is probably to not include log4j in your war and see if that works.", "id": 103285, "time": "2007-05-16T22:11:17Z", "bug_id": 42432, "creation_time": "2007-05-16T22:11:17Z", "is_private": false}, {"count": 5, "tags": [], "text": "Yes following is the error report what I am getting. \n\nlog4j:ERROR A \"org.jboss.logging.util.OnlyOnceErrorHandler\" object is not\nassignable to a \"org.apache.log4j.spi.ErrorHandler\" variable.\n10:20:18,960 INFO  [STDOUT] log4j:ERROR The class\n\"org.apache.log4j.spi.ErrorHandler\" was loaded by \n10:20:18,960 INFO  [STDOUT] log4j:ERROR [WebappClassLoader\n  delegate: false\n  repositories:\n    /WEB-INF/classes/\n----------> Parent Classloader:\njava.net.FactoryURLClassLoader@1592141\n] whereas object of type \n10:20:18,960 INFO  [STDOUT] log4j:ERROR\n\"org.jboss.logging.util.OnlyOnceErrorHandler\" was loaded by\n[org.jboss.system.server.NoAnnotationURLClassLoader@1a33d48].\n10:20:19,085 INFO  [STDOUT] log4j:ERROR Could not create an Appender. Reported\nerror follows.\n10:20:19,085 INFO  [STDOUT] java.lang.ClassCastException:\norg.jboss.logging.appender.DailyRollingFileAppender(In reply to comment #4)\n> It sounds like you're getting a classcast because the superclass of the class\n> you mention is loaded by a different classloader than the class it is being\n> assigned to.\n> \n> Easiest solution is probably to not include log4j in your war and see if that\nworks.\n\n", "attachment_id": null, "bug_id": 42432, "id": 103286, "time": "2007-05-16T22:16:56Z", "creator": "kanil@infics.com", "creation_time": "2007-05-16T22:16:56Z", "is_private": false}, {"count": 6, "tags": [], "creator": "hoju@visi.com", "attachment_id": null, "id": 103340, "time": "2007-05-18T09:27:55Z", "bug_id": 42432, "creation_time": "2007-05-18T09:27:55Z", "is_private": false, "text": "Do you, per/chance, have JBoss specifically configured to use parent-last\nclassloading behavior?  I think the JBoss default is to use a single \"unified\nclassloader\".  At least it was the last time I dealt with JBoss.  It has it's\nown issues, but should solve this issue.  The solution could be to simply not\nconfigure it to use parent-last.\n\nBTW, why is this marked \"Resolved Fixed\"?  If it was resolved without a code\nchange, it should be \"Works For Me\" or something like that.\n\nJake"}, {"count": 7, "tags": [], "creator": "kanil@infics.com", "attachment_id": null, "id": 103397, "time": "2007-05-20T21:43:28Z", "bug_id": 42432, "creation_time": "2007-05-20T21:43:28Z", "is_private": false, "text": "I resolved the issue. This was happening due to log4j.jar file, before it was\nincluded in war file of my application. Now I removed it from war file, so it's\nworking fine.(In reply to comment #6)\n> Do you, per/chance, have JBoss specifically configured to use parent-last\n> classloading behavior?  I think the JBoss default is to use a single \"unified\n> classloader\".  At least it was the last time I dealt with JBoss.  It has it's\n> own issues, but should solve this issue.  The solution could be to simply not\n> configure it to use parent-last.\n> \n> BTW, why is this marked \"Resolved Fixed\"?  If it was resolved without a code\n> change, it should be \"Works For Me\" or something like that.\n> \n> Jake"}]