[{"count": 0, "tags": [], "creator": "stuermer@afi-stuttgart.de", "attachment_id": null, "is_private": false, "id": 177107, "time": "2014-08-12T13:12:01Z", "bug_id": 56840, "creation_time": "2014-08-12T13:12:01Z", "text": "I've added a RewriteValve in my context.xml, and have a simple rewrite.config with one line:\n\nRewriteRule ^/(?:[^/]+/)?(resources/.*)$ /SAPUI5/$1\n\n\nWhen requesting a page with the matching URL, a 500 error is returned:\n\njava.lang.NullPointerException\n\torg.apache.catalina.connector.Request.getContextPath(Request.java:1901)\n\torg.apache.catalina.valves.rewrite.RewriteValve.invoke(RewriteValve.java:451)\n[...]\n\nI think the problem lies around line 447 in RewriteValve.java:\n447                    request.getCoyoteRequest().requestURI().setString(null);\n448                    CharChunk chunk = request.getCoyoteRequest().requestURI().getCharChunk();\n449                    chunk.recycle();\n450                    if (context) {\n451                        chunk.append(request.getContextPath());\n452                    }\n\nsetString(null) sets the MessageBytes type to TYPE_NULL, and (context is true in my case) request.getContextPath() tries to access cleared value, which fails."}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 177109, "time": "2014-08-12T13:34:12Z", "bug_id": 56840, "creation_time": "2014-08-12T13:34:12Z", "text": "The fix will be included in 8.0.11+."}]