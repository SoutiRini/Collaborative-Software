[{"count": 0, "tags": [], "bug_id": 45631, "attachment_id": null, "text": "Ants JUnit runner filters stack traces to keep them succinct by removing the guts of Ant/JUnit. However it unconditionally removes lines matching:\n\n  \"Caused by: java.lang.AssertionError\"\n\nSee JUnitTestRunner#DEFAULT_TRACE_FILTERS\n\nThis makes interpretation of stack trace caused by a assertion error difficult. For example, I have a test:\n\npublic class MyTest {\n    private void doSomething() {\n        try {\n            // silly example, but this may be deep in some code\n            assert null != null;\n        } catch (Throwable t) {\n            throw new RuntimeException(\"Caught exception...\", t);\n        }\n    }\n\n    @Test\n    public void test() throws Exception {\n        doSomething();\n    }\n}\n\nThe exception logged by Ant is:\n\n1.  java.lang.RuntimeException: Caught exception...\n2.    at tests.MyTest.doSomething(MyTest.java:12)\n3.    at tests.MyTest.test(MyTest.java:18)\n4.    at tests.MyTest.doSomething(MyTest.java:10)\n\nThis is very confusing. The \"Caused by\" line is missing (it should be after line 3). \n\nThe *real* stack trace (this is what the Eclipse JUnit runner reports) is:\n\n1.  java.lang.RuntimeException: Caught exception...\n2.    at tests.MyTest.doSomething(MyTest.java:12)\n3.    at tests.MyTest.test(MyTest.java:18)\n4.  Caused by: java.lang.AssertionError \n5.    at tests.MyTest.doSomething(MyTest.java:10)\n\nNote, line 4 shows the cause.\n\nA simple workaround is to disable the 'filtertrace' property so no 'cleaning' of the stack trace is performned, however I like the filtering and filtering out this cause seems to be a bug.", "id": 119830, "time": "2008-08-14T04:27:44Z", "creator": "ben.rowlands@morganstanley.com", "creation_time": "2008-08-14T04:27:44Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 45631, "attachment_id": null, "text": "Thanks for the report, issue was caused by the introduction of support of junit 4 to support an AssertionError as failure.", "id": 124581, "time": "2009-02-01T14:30:57Z", "creator": "jkf@apache.org", "creation_time": "2009-02-01T14:30:57Z", "is_private": false}]