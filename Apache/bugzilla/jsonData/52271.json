[{"count": 0, "tags": [], "creator": "mhn4dev@googlemail.com", "attachment_id": null, "id": 151898, "time": "2011-12-01T17:26:58Z", "bug_id": 52271, "creation_time": "2011-12-01T17:26:58Z", "is_private": false, "text": "I found following exception in the logfile of an automated test.\nIt happened right after system start when about 10 requests arrived in the same millisecond.\n\nhttp-8080-7 [ERROR] [D32BD7B2195DF1AAE182A4D24DBE11FF] PhaseListenerManager informPhaseListenersBefore: Exception in PhaseListener RESTORE_VIEW(1) beforePhase.\njava.lang.ArrayIndexOutOfBoundsException: 6\n\tat javax.el.CompositeELResolver.add(CompositeELResolver.java:45)\n\tat org.apache.myfaces.el.CompositeELResolver.add(CompositeELResolver.java:50)\n\tat org.apache.myfaces.el.unified.ResolverBuilderForJSP.build(ResolverBuilderForJSP.java:62)\n\tat org.apache.myfaces.el.ResolverForJSPInitializer.beforePhase(ResolverForJSPInitializer.java:54)\n\tat org.apache.myfaces.lifecycle.PhaseListenerManager.informPhaseListenersBefore(PhaseListenerManager.java:73)\n\tat org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:93)\n\tat org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:76)\n\tat org.apache.myfaces.custom.ppr.PPRLifecycleWrapper.execute(PPRLifecycleWrapper.java:68)\n\tat javax.faces.webapp.FacesServlet.service(FacesServlet.java:183)\n\tat xxx.servlets.FacesServletWrapper.service(FacesServletWrapper.java:119)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)\n\tat org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)\n\tat org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)\n\tat org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:392)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat xxx.filters.LoginFilter.doFilter(LoginFilter.java:211)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat xxx.filters.CacheFilter.doFilter(CacheFilter.java:104)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat xxx.filters.EncodingFilter.doFilter(EncodingFilter.java:54)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat xxx.filters.TimerFilter.doFilter(TimerFilter.java:80)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)\n\tat java.lang.Thread.run(Thread.java:662)\n\nTomcat is used in combination with myfaces 1.2.10.\nCould this be a threading issue in the CompositeELResolver?"}, {"count": 1, "tags": [], "text": "CompositeELResolver is not thread-safe during init. It sounds as if MyFaces is trying to configure the same CompositeELResolver instance from multiple threads.", "attachment_id": null, "id": 152224, "creator": "markt@apache.org", "time": "2011-12-16T16:08:27Z", "bug_id": 52271, "creation_time": "2011-12-16T16:08:27Z", "is_private": false}]