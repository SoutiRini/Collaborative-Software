[{"count": 0, "tags": [], "bug_id": 20527, "attachment_id": null, "id": 38464, "time": "2003-06-05T22:19:29Z", "creator": "nordehacedod@yahoo.com", "creation_time": "2003-06-05T22:19:29Z", "is_private": false, "text": "Several users have encountered this jsp error, One possible cause is\nif a temp file cannot be written to the current directory.\n\nSymptom:\n\nHTTP Status 500 - Internal Server Error\n\ntype Exception report\n\nmessage Internal Server Error\n\ndescription The server encountered an internal error (Internal Server\nError) that prevented it from fulfilling this request.\n\nexception\n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n [javac] Since fork is true, ignoring compiler setting.\n [javac] Compiling 1 source file\n [javac] Since fork is true, ignoring compiler setting.\n  \n  at\norg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:130)\n  at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:293)\n  at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:353)\n  at org.apache.jasper.compiler.Compiler.compile(Compiler.java:370)\n  at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:473)\n  at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:190)\n  at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295)\n  at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n  at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n[...]\n\nApache Tomcat/4.1.24\n\n--------------------\nin catalina.out found this:\n\nError creating temporary file\n        at\norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalCompile(Def\naultCompilerAdapter.java:433)\n        at\norg.apache.tools.ant.taskdefs.compilers.JavacExternal.execute(JavacExternal.java:81)\n[etc etc]\nCaused by: java.io.FileNotFoundException:\n/usr/apache/jakarta-tomcat-4.1.24/files-1650139464 (Perm\nission denied)\n        at java.io.FileOutputStream.open(Native Method)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:176)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:131)\n        at java.io.FileWriter.<init>(FileWriter.java:73)\n        at\norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalCompile(Def\naultCompilerAdapter.java:424)\n        ... 38 more\n--- Nested Exception ---\njava.io.FileNotFoundException:\n/usr/apache/jakarta-tomcat-4.1.24/files-1650139464 (Permission deni\ned)\n        at java.io.FileOutputStream.open(Native Method)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:176)\n        at java.io.FileOutputStream.<init>(FileOutputStream.java:131)\n        at java.io.FileWriter.<init>(FileWriter.java:73)\n        at\norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.executeExternalCompile(Def\naultCompilerAdapter.java:424)\n--------------------\nLooking at the source of ant 1.5.1,\norg.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.java\nIt does this:\n   String userDirName = System.getProperty(\"user.dir\");\n   File userDir = new File(userDirName);\n   tmpFile = fileUtils.createTempFile(\"files\", \"\", userDir);\n   out = new PrintWriter(new FileWriter(tmpFile));\n\nLooks like ant wants to write to user.dir. What's that?\n\"The system property user.dir contains the current user directory.\"\nHmm. I like ${CATALINA_HOME} read only.\n--------------------\nI start tomcat using \"${CATALINA_HOME}/bin/catalina.sh start\", so\nadding \nCATALINA_OPTS='-Duser.dir=/an/appropriate/temp/directory'\nexport CATALINA_OPTS\nis a workaround.\n\n-- \nnord"}, {"count": 1, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "id": 38561, "time": "2003-06-08T15:06:28Z", "bug_id": 20527, "creation_time": "2003-06-08T15:06:28Z", "is_private": false, "text": "Point noted and added to the FAQ as well as possible alternate explanations.\n"}, {"count": 2, "tags": [], "bug_id": 20527, "attachment_id": null, "id": 40966, "time": "2003-07-19T07:05:26Z", "creator": "hauser@acm.org", "creation_time": "2003-07-19T07:05:26Z", "is_private": false, "text": "see http://jakarta.apache.org/tomcat/faq/misc.html#compile"}]