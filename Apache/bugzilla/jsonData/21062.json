[{"count": 0, "attachment_id": null, "bug_id": 21062, "is_private": false, "id": 39368, "time": "2003-06-24T21:22:54Z", "creator": "andrew@cadre5.com", "creation_time": "2003-06-24T21:22:54Z", "tags": [], "text": "This is a patch to the Apache core.c which changes the handling of all require\ndirectives in the server.  It allows the content of environment variables to be\ninterpolated into the require directive during the evaluation of each request. \nThe intended purpose of this patch is to give greated flexibility for AAA when\ncombined with mod_rewrite.\n\nThis code touches only two functions within core.c:  require() and\nap_requires().  require() parses the require directives in the configuration\nfile and stores a parsed list for later reference.  ap_requires() is called when\nan AAA module needs to get the require directives that apply to the current\nrequest, and generates a require directive based on the current environment\nvariables.\n\nAn example usage:\n\n----\nRewriteRule     ^/users/(\\w+)/.*    -    [env=username:$1]\n\n<Location /users>\n    # Various AAA stuff here (user file, etc)\n    require user ${username}\n</Location>\n----\n\nDepending on the request, the require directive would evaluate differently.\nRequest URI                  require directive\n===========                  =================\n/users/andrew/test.txt       require user andrew\n/users/asdf/                 require user asdf\n...\n\nThis is obviously even more useful when authenticating against an LDAP directory\nwith mod_auth_ldap (which is the reason I created this patch):\n\n----\nRewriteRule    /projects/(\\w+)/.*    -    [env=project:$1]\n<Location /projects>\n    require group cn=${project},ou=Projects,...\n</Location>\n----\n\nWhich would check that users attempting to access, e.g.\n/projects/topsecret/stuff.html were in the \"cn=topsecret,ou=Projects,...\" group\non the LDAP server."}, {"count": 1, "tags": [], "bug_id": 21062, "text": "Created attachment 6960\nPatch against 2.0.46 to implement this feature.", "id": 39369, "time": "2003-06-24T21:24:48Z", "creator": "andrew@cadre5.com", "creation_time": "2003-06-24T21:24:48Z", "is_private": false, "attachment_id": 6960}, {"count": 2, "tags": [], "text": "It was decided that ENV resolving has too many drawbacks within a static\nconfiguration file (and doesn't fit the concept), so this feature probably won't\ngo into the distribution. Sorry.\n\nThere are some additional problems (security related), however, like: Does\n$var=\"ab cd\" represent two users or one?\n\nThanks for using Apache.", "is_private": false, "id": 39603, "creator": "nd@perlig.de", "time": "2003-06-29T18:13:06Z", "bug_id": 21062, "creation_time": "2003-06-29T18:13:06Z", "attachment_id": null}]