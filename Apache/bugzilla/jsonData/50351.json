[{"count": 0, "tags": [], "creator": "servlet@ig.com.br", "text": "Get trunk here http://people.apache.org/~markt/dev/tomcat-7/v7.0.5/\nThe application that works with 7.0.4 now gets this error after execution:\n\n19:20:02,926 ERROR DatasourceConnectionProvider:78 - Could not find datasource: java:comp/env/jdbc/myAppName\n\njavax.naming.NamingException: No set method found for property: singleton\n\tat org.apache.naming.factory.BeanFactory.getObjectInstance(BeanFactory.java:215)\n\tat org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:142)\n\tat javax.naming.spi.NamingManager.getObjectInstance(Unknown Source)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:826)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:145)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:814)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:145)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:814)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:145)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:814)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:159)\n\tat org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)\n\tat javax.naming.InitialContext.lookup(Unknown Source)\n\tat org.hibernate.connection.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java:75)\n\tat org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:143)\n\tat org.hibernate.ejb.InjectionSettingsFactory.createConnectionProvider(InjectionSettingsFactory.java:51)\n\tat org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:91)\n\tat org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2163)\n\tat org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2159)\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1383)\n\tat org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)\n\tat org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:892)\n\tat org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:48)\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:32)\n\tat net.metha.utils.persistence.JPAUtil.<clinit>(JPAUtil.java:24)\n\tat net.metha.bestfork.servlets.filters.JPASessionFilter.doFilter(JPASessionFilter.java:19)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:561)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:108)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:558)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:379)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:259)\n\tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:281)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n\tat java.lang.Thread.run(Unknown Source)\n27/11/2010 19:20:02 org.apache.catalina.core.StandardWrapperValve invoke\nGRAVE: Servlet.service() for servlet [Faces Servlet] in context with path [/bestforkprime] threw exception [Filter execution threw an exception] with root cause\njavax.naming.NamingException: No set method found for property: singleton\n\tat org.apache.naming.factory.BeanFactory.getObjectInstance(BeanFactory.java:215)\n\tat org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:142)\n\tat javax.naming.spi.NamingManager.getObjectInstance(Unknown Source)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:826)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:145)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:814)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:145)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:814)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:145)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:814)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:159)\n\tat org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)\n\tat javax.naming.InitialContext.lookup(Unknown Source)\n\tat org.hibernate.connection.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java:75)\n\tat org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:143)\n\tat org.hibernate.ejb.InjectionSettingsFactory.createConnectionProvider(InjectionSettingsFactory.java:51)\n\tat org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:91)\n\tat org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2163)\n\tat org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2159)\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1383)\n\tat org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)\n\tat org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:892)\n\tat org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:48)\n\tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:32)\n\tat net.metha.utils.persistence.JPAUtil.<clinit>(JPAUtil.java:24)\n\tat net.metha.bestfork.servlets.filters.JPASessionFilter.doFilter(JPASessionFilter.java:19)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:244)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:561)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:108)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:558)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:379)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:259)\n\tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:281)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n\tat java.lang.Thread.run(Unknown Source)", "id": 142057, "time": "2010-11-27T16:27:45Z", "bug_id": 50351, "creation_time": "2010-11-27T16:27:45Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Update version", "id": 142066, "time": "2010-11-28T08:12:12Z", "bug_id": 50351, "creation_time": "2010-11-28T08:12:12Z", "is_private": false}, {"count": 2, "tags": [], "creator": "servlet@ig.com.br", "attachment_id": null, "text": "I downloaded again apache-tomcat-7.0.5-windows-x86.zip from http://people.apache.org/~markt/dev/tomcat-7/v7.0.5/bin/ and got the same problem. When you say update version you mean build from the trunk? I have never compile from the trunk yet, but I can trie.\n\nThanks for your answer\n\nFlavio", "id": 142093, "time": "2010-11-28T19:16:33Z", "bug_id": 50351, "creation_time": "2010-11-28T19:16:33Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 50351, "attachment_id": null, "is_private": false, "id": 142094, "time": "2010-11-28T19:20:04Z", "creator": "servlet@ig.com.br", "creation_time": "2010-11-28T19:20:04Z", "text": "Sorry, I am lazzy, now I undestood: you update the version from trunk to 7.0.5! Sorry, you can ignore my last message."}, {"count": 4, "tags": [], "creator": "markt@apache.org", "text": "I think I have a patch for this. If I attach a binary patch to this bug along with instructions on how to test it would you be able to test the patch to see it it fixes the issue?", "id": 142119, "time": "2010-11-29T08:57:15Z", "bug_id": 50351, "creation_time": "2010-11-29T08:57:15Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 50351, "attachment_id": null, "is_private": false, "id": 142127, "time": "2010-11-29T10:41:54Z", "creator": "markt@apache.org", "creation_time": "2010-11-29T10:41:54Z", "text": "Thanks for the report. This has been fixed in 7.0.x and will be included in 7.0.6 onwards."}, {"count": 6, "attachment_id": null, "creator": "servlet@ig.com.br", "text": "Sure, I will try to do my best, but I am a regular user, not a specialized one.\n\n\n(In reply to comment #4)\n> I think I have a patch for this. If I attach a binary patch to this bug along\n> with instructions on how to test it would you be able to test the patch to see\n> it it fixes the issue?", "id": 142149, "time": "2010-11-29T17:26:30Z", "bug_id": 50351, "creation_time": "2010-11-29T17:26:30Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "markt@apache.org", "attachment_id": 26355, "text": "Created attachment 26355\nBinary patch for Tomcat 7\n\nTo apply this patch, create the following directories in Tomcat's lib directory:\norg/apache/naming/factory\n\nPlace the BeanFactory.class file in this new directory.\n\nRestart Tomcat.\n\nLet us know how you get on.", "id": 142174, "time": "2010-11-30T04:49:00Z", "bug_id": 50351, "creation_time": "2010-11-30T04:49:00Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 50351, "is_private": false, "text": "Mark, the patch works!\n\nThank you!", "id": 142206, "time": "2010-11-30T11:35:19Z", "creator": "servlet@ig.com.br", "creation_time": "2010-11-30T11:35:19Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 50351, "attachment_id": null, "is_private": false, "id": 142566, "time": "2010-12-10T09:03:24Z", "creator": "christophe.thiebaud@sap.com", "creation_time": "2010-12-10T09:03:24Z", "text": "I confirm the patch works for me as well.\nthanks\nChristophe"}]