[{"text": "This statement\nSetEnvIf FAKE_HEADER ^$ REWRITTEN_URI=done\n\ndefines new env var for my perl script(CGI) if it was used in vhost context.\nBeing used in .htaccess file the same statement fails.\nAnd the same for\nSetEnvIf REQUEST_METHOD ^GET$ REWRITTEN_URI=done\n\n- works in vhost context, ain't work in per-directory context.\nThis is checked with my older Apache httpd 1.3.20 and the latest 1.3.29 on \nWin95.\n\nThis bug is by no means crusial but makes an unpleasant inconsistency if you \ndevelop on Win32 platform like me.\nI believe this is a Win32 only bug.\n\nI had to use such a strange statements because plain SetEnv does not work in \nper-dir context at all. May be it worth to spread it too?\n\nI guess the rest should be posted to mod_rewrite developer, mod_rewrite's rule \nlike\nRewriteRule  ^(.*)\\.html$\t/cgi-bin/main.pl?$1 [E=REWRITTEN_URI:1,L]\n\nworks fine, but doesn't set the env var in per-dir context too.\nProbably for the same reason...\nSo, I've found no way to set env var in .htaccess file :(\n\nThanks, guys! This is minor of course!\nApache rules!\n\nSorry if I missed something.", "tags": [], "bug_id": 28892, "is_private": false, "count": 0, "id": 57146, "time": "2004-05-11T06:16:52Z", "creator": "blazer@peterlink.ru", "creation_time": "2004-05-11T06:16:52Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "It's likely that you have an internal redirect (caused by mod_rewrite in dir\ncontext), which renames all variables to REDIRECT_foo.\nCann you please check it?", "is_private": false, "id": 57149, "creator": "nd@perlig.de", "time": "2004-05-11T07:22:53Z", "bug_id": 28892, "creation_time": "2004-05-11T07:22:53Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Yesss!\nI just dumped all env vars and here it is\nREDIRECT_REWRITTEN_URI => done\n\nIn these testing I always had mod_rewrite in use.\n.htaccess is like this\n\n<IfModule mod_rewrite.c>\nRewriteEngine     On\nRewriteOptions    'inherit'\n\nSetEnvIf FAKE_HEADER ^$ REWRITTEN_URI=done\n\nRewriteRule  ^img/\t\t- [L]\nRewriteRule  ^/?$\t\t/e/stop-machine/cgi-bin/main.pl?rewritten= [L]\nRewriteRule  ^(.*)\\.html$\t/e/stop-machine/cgi-bin/main.pl?rewritten=$1 [L]\nRewriteRule  ^admin/?$\t\t/e/stop-machine/cgi-bin/adm.pl [L]\nRewriteRule  ^.*$\t\t- [F,L]\n</IfModule>\n\nOptions Indexes ExecCGI FollowSymLinks\nOrder Deny,Allow\nAllow from all\n======== fin =======\n\n?rewritten=  is what I'm using because all attempts to set env var failed.\n\nIn the env dump I also see\nREDIRECT_QUERY_STRING\nREDIRECT_URL (same as REQUEST_URI)\nREDIRECT_STATUS\nREDIRECT_SCRIPT_URL\nREDIRECT_SCRIPT_URI\n\nIf you want I can send it more detailed with all values.\n\nAnd absolutelly the same situation when I comment out SetEnvIf and use\nRewriteRule  ^/?$\t/e/stop-machine/cgi-bin/main.pl?rewritten= \n[E=REWRITTEN_URI:done,L]\n\nAgain REDIRECT_REWRITTEN_URI is set to 'done'\n\nThanks, Andre!\nThis sure makes a workaround\n", "is_private": false, "id": 57199, "creator": "blazer@peterlink.ru", "time": "2004-05-11T13:35:24Z", "bug_id": 28892, "creation_time": "2004-05-11T13:35:24Z", "attachment_id": null}]