[{"count": 0, "tags": [], "creator": "andy@iti.upv.es", "is_private": false, "id": 91312, "creation_time": "2006-07-14T14:16:28Z", "time": "2006-07-14T14:16:28Z", "bug_id": 40045, "text": "The Results monitor only analyses the first connector that appears in the Tomcat\nmanager/status XML. If, as is the case for me, more than one connector is\ndefined and the first one listed isn\u00b4t the connector for the web application\nthat is being tested - the Results monitor thread count is incorrect. Note it\nappeas that the Tomcat manager/status page sorts connectors alphabetically.\n\n\nRegards,\n\nAndy Dawson\nAs I see no place for attachements, below is an example manager/status XML file,\nwhere the thread count is 8, and should display a thread busy count of 8/150 but\ninstead returns 0% (the xsl declaration has been removed to allow easier viewing):\n<?xml version=\"1.0\" encoding=\"utf-8\"?><status><jvm><memory free='7357544'\ntotal='37093376' max='66650112'/></jvm><connector name='http-8084'><threadInfo \nmaxThreads=\"150\" minSpareThreads=\"25\" maxSpareThreads=\"75\"\ncurrentThreadCount=\"25\" currentThreadsBusy=\"1\" /><requestInfo  maxTime=\"0\"\nprocessingTime=\"0\" requestCount=\"0\" errorCount=\"0\" bytesReceived=\"0\"\nbytesSent=\"0\" /><workers><worker  stage=\"R\" requestProcessingTime=\"0\"\nrequestBytesSent=\"0\" requestBytesRecieved=\"0\" remoteAddr=\"&#63;\"\nvirtualHost=\"&#63;\" method=\"&#63;\" currentUri=\"&#63;\" currentQueryString=\"&#63;\"\nprotocol=\"&#63;\" /></workers></connector><connector name='http-8100'><threadInfo\n maxThreads=\"150\" minSpareThreads=\"25\" maxSpareThreads=\"75\"\ncurrentThreadCount=\"25\" currentThreadsBusy=\"8\" /><requestInfo  maxTime=\"4813\"\nprocessingTime=\"255614\" requestCount=\"2569\" errorCount=\"1\"\nbytesReceived=\"559008\" bytesSent=\"40935221\" /><workers><worker  stage=\"K\"\nrequestProcessingTime=\"3406\" requestBytesSent=\"0\" requestBytesReceived=\"0\"\nremoteAddr=\"192.168.1.124\" virtualHost=\"?\" method=\"&#63;\" currentUri=\"&#63;\"\ncurrentQueryString=\"&#63;\" protocol=\"&#63;\" /><worker  stage=\"K\"\nrequestProcessingTime=\"2843\" requestBytesSent=\"0\" requestBytesReceived=\"0\"\nremoteAddr=\"192.168.1.124\" virtualHost=\"?\" method=\"&#63;\" currentUri=\"&#63;\"\ncurrentQueryString=\"&#63;\" protocol=\"&#63;\" /><worker  stage=\"R\"\nrequestProcessingTime=\"0\" requestBytesSent=\"0\" requestBytesRecieved=\"0\"\nremoteAddr=\"&#63;\" virtualHost=\"&#63;\" method=\"&#63;\" currentUri=\"&#63;\"\ncurrentQueryString=\"&#63;\" protocol=\"&#63;\" /><worker  stage=\"S\"\nrequestProcessingTime=\"0\" requestBytesSent=\"0\" requestBytesReceived=\"0\"\nremoteAddr=\"192.168.1.124\" virtualHost=\"mistral\" method=\"GET\"\ncurrentUri=\"/manager/status\" currentQueryString=\"XML=true\" protocol=\"HTTP/1.1\"\n/><worker  stage=\"K\" requestProcessingTime=\"2796\" requestBytesSent=\"0\"\nrequestBytesReceived=\"0\" remoteAddr=\"192.168.1.124\" virtualHost=\"?\"\nmethod=\"&#63;\" currentUri=\"&#63;\" currentQueryString=\"&#63;\" protocol=\"&#63;\"\n/><worker  stage=\"R\" requestProcessingTime=\"0\" requestBytesSent=\"0\"\nrequestBytesRecieved=\"0\" remoteAddr=\"&#63;\" virtualHost=\"&#63;\" method=\"&#63;\"\ncurrentUri=\"&#63;\" currentQueryString=\"&#63;\" protocol=\"&#63;\" /><worker \nstage=\"K\" requestProcessingTime=\"968\" requestBytesSent=\"0\"\nrequestBytesReceived=\"0\" remoteAddr=\"192.168.1.124\" virtualHost=\"?\"\nmethod=\"&#63;\" currentUri=\"&#63;\" currentQueryString=\"&#63;\" protocol=\"&#63;\"\n/><worker  stage=\"R\" requestProcessingTime=\"0\" requestBytesSent=\"0\"\nrequestBytesRecieved=\"0\" remoteAddr=\"&#63;\" virtualHost=\"&#63;\" method=\"&#63;\"\ncurrentUri=\"&#63;\" currentQueryString=\"&#63;\" protocol=\"&#63;\" /><worker \nstage=\"R\" requestProcessingTime=\"0\" requestBytesSent=\"0\"\nrequestBytesRecieved=\"0\" remoteAddr=\"&#63;\" virtualHost=\"&#63;\" method=\"&#63;\"\ncurrentUri=\"&#63;\" currentQueryString=\"&#63;\" protocol=\"&#63;\" /><worker \nstage=\"R\" requestProcessingTime=\"0\" requestBytesSent=\"0\"\nrequestBytesRecieved=\"0\" remoteAddr=\"&#63;\" virtualHost=\"&#63;\" method=\"&#63;\"\ncurrentUri=\"&#63;\" currentQueryString=\"&#63;\" protocol=\"&#63;\" /><worker \nstage=\"R\" requestProcessingTime=\"0\" requestBytesSent=\"0\"\nrequestBytesRecieved=\"0\" remoteAddr=\"&#63;\" virtualHost=\"&#63;\" method=\"&#63;\"\ncurrentUri=\"&#63;\" currentQueryString=\"&#63;\" protocol=\"&#63;\" /><worker \nstage=\"K\" requestProcessingTime=\"3031\" requestBytesSent=\"0\"\nrequestBytesReceived=\"0\" remoteAddr=\"192.168.1.124\" virtualHost=\"?\"\nmethod=\"&#63;\" currentUri=\"&#63;\" currentQueryString=\"&#63;\" protocol=\"&#63;\"\n/><worker  stage=\"K\" requestProcessingTime=\"609\" requestBytesSent=\"0\"\nrequestBytesReceived=\"0\" remoteAddr=\"192.168.1.124\" virtualHost=\"?\"\nmethod=\"&#63;\" currentUri=\"&#63;\" currentQueryString=\"&#63;\" protocol=\"&#63;\"\n/></workers></connector><connector name='http-4443'><threadInfo \nmaxThreads=\"150\" minSpareThreads=\"25\" maxSpareThreads=\"75\"\ncurrentThreadCount=\"25\" currentThreadsBusy=\"1\" /><requestInfo  maxTime=\"0\"\nprocessingTime=\"0\" requestCount=\"0\" errorCount=\"0\" bytesReceived=\"0\"\nbytesSent=\"0\" /><workers><worker  stage=\"R\" requestProcessingTime=\"0\"\nrequestBytesSent=\"0\" requestBytesRecieved=\"0\" remoteAddr=\"&#63;\"\nvirtualHost=\"&#63;\" method=\"&#63;\" currentUri=\"&#63;\" currentQueryString=\"&#63;\"\nprotocol=\"&#63;\" /></workers></connector><connector name='jk-8009'><threadInfo \nmaxThreads=\"200\" minSpareThreads=\"4\" maxSpareThreads=\"50\" currentThreadCount=\"4\"\ncurrentThreadsBusy=\"1\" /><requestInfo  maxTime=\"0\" processingTime=\"0\"\nrequestCount=\"0\" errorCount=\"0\" bytesReceived=\"0\" bytesSent=\"0\"\n/><workers></workers></connector></status>", "attachment_id": null}, {"count": 1, "attachment_id": 18604, "creator": "andy@iti.upv.es", "is_private": false, "id": 91314, "time": "2006-07-14T14:18:20Z", "bug_id": 40045, "creation_time": "2006-07-14T14:18:20Z", "tags": [], "text": "Created attachment 18604\nExample Tomcat status file\n\nThe attached XML file is not read correctly by the Results monitor."}, {"attachment_id": null, "tags": [], "bug_id": 40045, "text": "a quick note. the change isn't trivial, so I don't know how much work is\nrequired to implement the enhancement. it's probably going be a few weeks or\nmore. if you're adventurous and want to try enhancing it youself, I can assist.\n\npeter", "count": 2, "id": 91316, "time": "2006-07-14T14:24:00Z", "creator": "woolfel@yahoo.com", "creation_time": "2006-07-14T14:24:00Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 40045, "is_private": false, "count": 3, "id": 91318, "time": "2006-07-14T14:31:22Z", "creator": "woolfel@yahoo.com", "creation_time": "2006-07-14T14:31:22Z", "text": "hopefully this weekend I can take a look and see how hard it would be to enhance\nthe monitor to allow users to select the desired port."}, {"count": 4, "tags": [], "bug_id": 40045, "attachment_id": null, "is_private": false, "id": 124335, "time": "2009-01-24T00:09:06Z", "creator": "milamber@apache.org", "creation_time": "2009-01-24T00:09:06Z", "text": "Hello,\nI propose this patch for select connector you want monitor.\n\nTest case 1:\nIf you have several connectors on one tomcat (i.e. http/8080, http/8443 and ajp/8009), you can monitor only http/8080 with this line in properties file:\nmonitor.connector.startwith=http-servername%2F192.168.1.2-8080\n\nTest case 2:\nIf you have several connectors and several tomcat (tomcat or jboss cluster or multiple standalone instances), you can monitor only ajp connector on all instances with this line:\nmonitor.connector.startwith=ajp\n\nTest case 3:\nIf you have several connectors on several tomcat, you can't monitor different connector with different port. To resolve this test case, another patch are necessary...\n"}, {"count": 5, "tags": [], "bug_id": 40045, "attachment_id": 23171, "text": "Created attachment 23171\nProposal patch", "id": 124336, "time": "2009-01-24T00:10:15Z", "creator": "milamber@apache.org", "creation_time": "2009-01-24T00:10:15Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 40045, "attachment_id": null, "is_private": false, "id": 124378, "time": "2009-01-26T15:07:02Z", "creator": "milamber@apache.org", "creation_time": "2009-01-26T15:07:02Z", "text": "This proposal patch add possibility to select a specific connector or group of same connector (like ajp*).\nThis patch is not a GUI extension to select a specific connector from a connector list from tomcat/jboss because there is much work to do this.\nIn others words, this patch doesn't answer to this enhanced, but partially."}, {"count": 7, "tags": [], "creator": "milamber@apache.org", "text": "Created attachment 23260\nNew patch version to correct a javadoc mistake and fetching the first connector if the connector name is not found.", "id": 124860, "time": "2009-02-15T09:55:39Z", "bug_id": 40045, "creation_time": "2009-02-15T09:55:39Z", "is_private": false, "attachment_id": 23260}, {"count": 8, "tags": [], "bug_id": 40045, "is_private": false, "id": 125096, "creation_time": "2009-02-23T11:52:07Z", "time": "2009-02-23T11:52:07Z", "creator": "sebb@apache.org", "text": "Fixed in SVN:\n\nURL: http://svn.apache.org/viewvc?rev=747112&view=rev\nLog:\nBug 40045 - Allow Results monitor to select a specific connector", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 40045, "attachment_id": null, "is_private": false, "id": 125693, "time": "2009-03-23T02:57:26Z", "creator": "sebb@apache.org", "creation_time": "2009-03-23T02:57:26Z", "text": "*** Bug 46889 has been marked as a duplicate of this bug. ***"}]