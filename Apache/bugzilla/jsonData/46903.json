[{"count": 0, "tags": [], "bug_id": 46903, "attachment_id": null, "is_private": false, "id": 125757, "time": "2009-03-24T07:39:14Z", "creator": "zhihong@gmail.com", "creation_time": "2009-03-24T07:39:14Z", "text": "When we switched from 5.5.25 to 5.5.27, we found 2 issues resulted from stricter compliance check,\n\n1. Cookie values can't contain special chars like \"=\", \"&\".\n2. JSP can't have nested quotes, like \n       title=\"<fmt:message key=\"regpage.hdr.homepage\"/>\"\n\nWe tried to disable the compliance checks by setting the STRICT_SERVLET_COMPLIANCE=\"false\" but these 2 checks are still enforced.\n\nThis switch should disable these checks so the backward compatibility is achieved."}, {"count": 1, "text": "There are two separate issues here.\n\nFor cookies, we have to prevent invalid characters to prevent security issues (see CVE-2007-3385 & CVE-2007-5333). It took a couple of iterations to get an implementation that was a) secure and b) backwards compatible. Bug 46597 is tracking the back-porting of the remaining changes to 5.5.x and will hopefully be included in 5.5.28 onwards. Once this has been applied, the default behaviour will be to switch invalid v0 cookies to v1 and to quote where necessary.\n\nThe jsp quoting rules may be relaxed by setting org.apache.jasper.compiler.Parser.STRICT_QUOTE_ESCAPING=\"false\"\n\nSTRICT_SERVLET_COMPLIANCE is not intended to be a catch-all for all of the settings for servlet, jsp and el spec compatibility. The expected behaviour (for 5.5.27) is documented at\nhttp://tomcat.apache.org/tomcat-5.5-doc/confiG/systemprops.html which will be updated as required with each new 5.5.x release.\n\nThe cookie element is a duplicate and the quoting element a won't fix so I am marking this as won't fix.", "bug_id": 46903, "is_private": false, "id": 126147, "time": "2009-04-09T04:27:21Z", "creator": "markt@apache.org", "creation_time": "2009-04-09T04:27:21Z", "tags": [], "attachment_id": null}]