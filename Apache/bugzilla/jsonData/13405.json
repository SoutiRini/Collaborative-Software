[{"count": 0, "tags": [], "creator": "dvbaar@ferranti.be", "attachment_id": null, "text": "I use the <sql:update> tag to insert a row in a table.\nInside this <sql:update> there are some <sql:param> tags to set the values.\n\nI found (by looking in the source) that the <sql:param> trims the value. If the \nvalue is the empty string (\"\") then the value is treated as a NULL.\n\nBut the code used in org.apache.taglibs.standard.tag.common.sql.UpdateTagSupport\ndoes not work for me with NULL values. I get \"Invalid column type\". I work with \nthe Oracle Thin Driver (oracle9i)\n\nThe code is:\n\nif (parameters.get(i) != null) {\n  ps.setObject(i + 1, parameters.get(i));\n} else {\n  ps.setNull(i + 1, java.sql.Types.NULL);\n}\n\nI recall from my own experience that you have to set the type of the column and \nnot the type of the value in that last statement. So if the column is a \nVARCHAR, you have to put:\n\nps.setNull(i + 1, java.sql.Types.VARCHAR);\n\nThis could also be a bug in the Oracle Driver, of course. I don't know whether \nthat Driver is very compliant to the JDBC standard.", "id": 24128, "time": "2002-10-08T13:00:33Z", "bug_id": 13405, "creation_time": "2002-10-08T13:00:33Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 13405, "text": "I have checked with a few JDBC folks at Oracle and although I have not received\nan official answer as to whether or not the way it is coded in\nJSTL should work with our JDBC driver,  it was suggest that rather than\nusing \nps.setNull(i+1, java.sql.Type.NULL), the code should use\n\nps.setString(i+1, null);  \n\nI have logged Oracle bug 2619578 for clarification/or action. \n", "id": 24243, "time": "2002-10-09T22:48:31Z", "creator": "gael.stevens@oracle.com", "creation_time": "2002-10-09T22:48:31Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 13405, "text": "This is a bug in the implementation. In order for setNull to be used properly it\nwould need to have the right column type.\n\nAccording to JDBC 3.0 section 13.2.2.3, a null can be passed to the\nPreparedStatement.setObject() and the parameter will be set to JDBC NULL\nproperly so the PreparedStatment.setNull() call can be removed.", "id": 24307, "time": "2002-10-10T18:21:58Z", "creator": "justyna.horwat@sun.com", "creation_time": "2002-10-10T18:21:58Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "gael.stevens@oracle.com", "text": "It is Oracle's position that the current useage in the JSTL is not correct.  In\nstead, you should use ps.setObject(i+1, null);  ", "id": 24321, "attachment_id": null, "bug_id": 13405, "creation_time": "2002-10-10T21:56:21Z", "time": "2002-10-10T21:56:21Z", "is_private": false}]