[{"count": 0, "tags": [], "creator": "kfujino@apache.org", "attachment_id": null, "is_private": false, "id": 148380, "time": "2011-08-04T11:19:47Z", "bug_id": 51614, "creation_time": "2011-08-04T11:19:47Z", "text": "To check whether session is loaded into  memory, StoreBase#processExpires calls findSession(id). \n\n=====\n...\nif (manager.findSession(keys[i]) != null) {\n    isLoaded = true;\n}\n...\n=====\n\nHowever, PersistentManager#findSession(id) loads session from Store when there is no session in memory. \nBecause session loaded from Store is an invalid session\nPersistentManager logs errorlog, calls session.expire(), and deletes session from Store. \n\nAs a result, findSession(id) returns null, and isLoaded becomes false. \nAnd, session.expire() is called again, and the session is deleted from Store.\n\nIf manager is PersistentManager, it is necessary to call PersistentManagerBase#isLoaded(id). \nHowever, to avoid regression of r1033024, other managers call findSession(id).\n\nBest regards."}, {"count": 1, "attachment_id": 27348, "bug_id": 51614, "text": "Created attachment 27348\npatch against trunk.", "id": 148381, "time": "2011-08-04T11:22:08Z", "creator": "kfujino@apache.org", "creation_time": "2011-08-04T11:22:08Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 51614, "attachment_id": null, "id": 148382, "time": "2011-08-04T11:48:47Z", "creator": "kfujino@apache.org", "creation_time": "2011-08-04T11:48:47Z", "is_private": false, "text": "Fixed in 7.0.x and will be included in 7.0.20 onwards."}]