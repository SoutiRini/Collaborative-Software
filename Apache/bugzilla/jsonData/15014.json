[{"count": 0, "tags": [], "text": "I am reporting this against 1.5.1 but actually I think the bug is much older.\n\nNormally ${build.sysclasspath} works as documented. However if you have a\n<javac> task with no classpath set at all (neither via attribute nor via nested\nelement), the behavior is as if the value 'last' (or 'only' or 'first') were\nused, even if the property is in fact set to 'ignore'. Thus people who expect\n-Dbuild.sysclasspath=ignore to protect them against unintended classpath\nentries, will find that this does not work unless they give an *empty* classpath\nfor source trees which do not require anything other than the standard JRE\nclasses! This behavior is inconsistent, confusing, and maybe dangerous in some\nsituations.\n\nAttaching a transcript of a test session. You can see that ant\nempty-cp-build.syscp=ignore fails as you would expect, yet ant\nno-cp-build.syscp=ignore mysteriously succeeds. After applying a patch to the\ntrunk version of DefaultCompilerAdapter (also attached), both of these fail as\nexpected.", "attachment_id": null, "bug_id": 15014, "id": 27298, "time": "2002-12-03T02:50:32Z", "creator": "jesse.glick@netbeans.com", "creation_time": "2002-12-03T02:50:32Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 4011\nTranscript demonstrating problem", "attachment_id": 4011, "id": 27299, "creation_time": "2002-12-03T02:52:05Z", "time": "2002-12-03T02:52:05Z", "creator": "jesse.glick@netbeans.com", "bug_id": 15014, "is_private": false}, {"count": 2, "tags": [], "bug_id": 15014, "is_private": false, "text": "Created attachment 4012\nSuggested patch", "id": 27300, "time": "2002-12-03T02:52:43Z", "creator": "jesse.glick@netbeans.com", "creation_time": "2002-12-03T02:52:43Z", "attachment_id": 4012}, {"attachment_id": null, "tags": [], "creator": "jesse.glick@netbeans.com", "is_private": false, "count": 3, "id": 27301, "time": "2002-12-03T04:06:08Z", "bug_id": 15014, "creation_time": "2002-12-03T04:06:08Z", "text": "By the way a unit test might be in order, since build.sysclasspath=ignore is not\neven covered by the current tests at all:\n\nhttp://www.thecortex.net/clover/eg/ant/report/org/apache/tools/ant/taskdefs/compilers/DefaultCompilerAdapter.html"}, {"count": 4, "tags": [], "bug_id": 15014, "is_private": false, "text": "I'm almost certain that the same is true for rmic (need to actually look at the\ncode) and probably others - I'll perform a general auditing for the use of\nconcatSystemClasspath.", "id": 29264, "time": "2003-01-13T14:41:09Z", "creator": "bodewig@apache.org", "creation_time": "2003-01-13T14:41:09Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 15014, "attachment_id": null, "text": "I *think* I've caught all places now.", "id": 29271, "time": "2003-01-13T15:54:04Z", "creator": "bodewig@apache.org", "creation_time": "2003-01-13T15:54:04Z", "is_private": false}]