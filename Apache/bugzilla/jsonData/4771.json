[{"count": 0, "tags": [], "text": "I have two clean installations of tomcat, version 3.2.2 and version 3.3 with \nJDK1.2.2.  I have a JSP page that uses xtags, a recent nightly build (nov 6).  \nI downloaded dom4j v1.1 and put dom4j-full.jar in my classpath, along with \nxtags.jar.  When using a <xtag:variable...> tag, I get the following exception:\n\njava.lang.AbstractMethodError: \norg/apache/taglibs/xtags/util/JspVariableContext.getVariableValue\n\tat org.jaxen.ContextSupport.getVariableValue(ContextSupport.java:97)\n\tat org.jaxen.Context.getVariableValue(Context.java:57)\n\tat org.jaxen.expr.DefaultVariableReferenceExpr.evaluate\n(DefaultVariableReferenceExpr.java:60)\n\tat org.jaxen.expr.DefaultXPath.asList(DefaultXPath.java:46)\n\tat org.jaxen.JaXPath.jaSelectNodes(JaXPath.java:35)\n\tat org.jaxen.JaXPath.jaSelectSingleNode(JaXPath.java:40)\n\tat org.jaxen.JaXPath.jaValueOf(JaXPath.java:52)\n\tat org.jaxen.BaseXPath.valueOf(BaseXPath.java:32)\n\tat org.dom4j.xpath.DefaultXPath.valueOf(DefaultXPath.java:169)\n\tat org.apache.taglibs.xtags.xpath.VariableTag.doStartTag\n(VariableTag.java:99)\n\tat help._0002fhelp_0002fhelp_0002ejsphelp_jsp_47._jspService\n(_0002fhelp_0002fhelp_0002ejsphelp_jsp_47.java, Compiled Code)\n....\n\nMy jsp page is pretty simple:\n\n<%@ taglib uri=\"/xtags\" prefix=\"xtags\" %>\n<xtags:parse uri=\"help.xml\"/>\n<xtags:variable id=\"helptopic\" select=\"$topic\"/>\n\n...and that's all i need to get this crash.\n\nI have tried using the 1.0 dom4j, but one of the classes in that package \nrequired a method of java.util.Collections that only exists in jdk1.3.\n\nThanks!\n\nBest regards,\n\nRichard", "attachment_id": null, "id": 7725, "creator": "rasand@attglobal.net", "time": "2001-11-09T08:34:09Z", "bug_id": 4771, "creation_time": "2001-11-09T08:34:09Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "rasand@attglobal.net", "is_private": false, "id": 7726, "time": "2001-11-09T09:04:41Z", "bug_id": 4771, "creation_time": "2001-11-09T09:04:41Z", "tags": [], "text": "Hi again-\n\nI can confirm that when I downgraded to dom4j v1.0 (and upgraded to jdk1.3, \nstrange that dom4j 1.0 requires jdk1.3 yet dom4j v1.1 doesn't), that xtags \nworks.  I tried dom4j 1.1 with jdk 1.3 and it produced the same failure, so I \nconclude that there is something in dom4j v1.1 that breaks xtags. \n\nFYI i tried even using the latest beta of jaxen, 1.0b7, separately, instead of \nthe version that is packaged with dom4j, still to no avail."}, {"count": 2, "tags": [], "bug_id": 4771, "attachment_id": null, "text": "Hi again- my page compiles with dom4j v1.0, but the tags don't seem to work \nproperly!  At least, my tag <xtags:forEach select=\"/help/topic[topic-key=$topic]\n[1]\"> seems to return the first topic, instead of the one indicated by the \nvariable.  Looks like I'm stuck trying to get this thing to work with dom4j \nv1.1.  Help! :)", "id": 7728, "time": "2001-11-09T09:33:18Z", "creator": "rasand@attglobal.net", "creation_time": "2001-11-09T09:33:18Z", "is_private": false}, {"count": 3, "tags": [], "creator": "jstrachan@apache.org", "attachment_id": null, "id": 7729, "time": "2001-11-09T10:19:58Z", "bug_id": 4771, "creation_time": "2001-11-09T10:19:58Z", "is_private": false, "text": "I've just fixed it now in CVS.\n\nThe code has been patched to work with dom4j 1.1.\n\nIn addition proper support for JSP scopes has been added so you can use \nexpressions like $header:agent or $cookie:foo or $param:bar in XPath \nexpressions.\n\nThe nightly build should hopefully be updated soon - until then please try use \nthe CVS image.\n"}]