[{"count": 0, "tags": [], "creator": "vimages@well.com", "attachment_id": null, "is_private": false, "id": 29764, "time": "2003-01-21T08:39:54Z", "bug_id": 16288, "creation_time": "2003-01-21T08:39:54Z", "text": "Platform: Win98SE/P3733/640M RAM \n\nSteps to reproduce:\n\n1) Install 2.0.44 on a Win98SE box\n2) Do: Start -> Programs -> Apache HTTP 2.0.44 Server -> Control Apache Server\n->  Start Apache in Console\n\nresults: A Modal dialog box is displayed. Details to follow.\n\nbackground: This machine has been running 2.x happily since 2.0.39\nI saw the email tonight about the vuln, so I used win98 add/remove programs and\nuninstalled 2.0.43 and installed 2.0.44. Crashed on first try. I figured, \"OK,\nI'll move httpd.conf outta the way and try installing again\". Same thing. I\nuninstalled 2.0.44 again, deleted the entired apache directory and tried\nreinstalling. Installation went great, but upon console lauch it crashed with\nthe following error (and yes, I know I should use a *real* OS, but someone has\nto test this stuff on Win32 :):\n\nAPACHE caused an invalid page fault in\nmodule LIBHTTPD.DLL at 0167:6ff18a08.\nRegisters:\nEAX=0000a264 CS=0167 EIP=6ff18a08 EFLGS=00010206\nEBX=00000004 SS=016f ESP=0057dc24 EBP=005c62bc\nECX=6eed5758 DS=016f ESI=0000000a FS=4db7\nEDX=0057dc2c ES=016f EDI=00000004 GS=4ed6\nBytes at CS:EIP:\n8a 14 81 8d 04 81 8b 4c 24 38 88 11 8a 50 01 41 \nStack dump:\n00000004 005e2f54 000a6040 0000dba4 00006ff0 000029b9 00000059 00000059 00007b14\n0000a264 000163de fffd98ec de36058e 6ff0d84f 0057dc79 4fab6000   \n\nBack to 2.0.43 for me, until this works....."}, {"count": 1, "text": "Notes: I installed this from : apache_2.0.44-win32-x86-no_ssl.exe\n\nThe Win98SE box I am using is pretty \"clean\", meaning there isn't a lot of extra\ncruft running on it. ", "bug_id": 16288, "attachment_id": null, "id": 29765, "time": "2003-01-21T08:58:40Z", "creator": "vimages@well.com", "creation_time": "2003-01-21T08:58:40Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "vimages@well.com", "is_private": false, "text": "Just re-installed 2.0.43 from local binary and it runs just peachy. JADP.", "id": 29766, "time": "2003-01-21T09:07:24Z", "bug_id": 16288, "creation_time": "2003-01-21T09:07:24Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 16288, "is_private": false, "text": "\n  The address you identified in the log, 6ff18a08, should be the ap_recent_ctime\n  function (in util_time.c).  I'll dig into this in the morning.\n\n  Thanks for the detailed report!\n", "id": 29767, "time": "2003-01-21T09:34:51Z", "creator": "wrowe@apache.org", "creation_time": "2003-01-21T09:34:51Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 16288, "attachment_id": null, "is_private": false, "id": 29768, "time": "2003-01-21T09:47:17Z", "creator": "wrowe@apache.org", "creation_time": "2003-01-21T09:47:17Z", "text": "\n  Ok, I see the foobar.\n\n  Folks are playing games in that fn with data in another module.  Apparently\n  libapr was relocated, and data doesn't always survive being relocated.\n\n  Apparently the address referencing/dereferencing might be causing us problems.\n\n  Either that, or more likely, tm_wday/tm_mon were not populated correctly,\n  and they are pointing at random memory.  Even worse, the exploded_cache_gmt\n  and exploded_cache_localtime seem to never be zeroed out, and perhaps the\n  author has assumed the statics will be zeroed out when the library is loaded.\n  Although I haven't seen this on any NT box (perhaps because NT does so), this\n  behavior may be different on Win9x.\n\n  If you can get Dr Watson to dump out some more information, that would be\n  very helpful.\n"}, {"count": 5, "attachment_id": null, "bug_id": 16288, "is_private": false, "id": 29769, "time": "2003-01-21T09:55:07Z", "creator": "vimages@well.com", "creation_time": "2003-01-21T09:55:07Z", "tags": [], "text": "No sweat. Happy to serve. \n\nIf I could code, I'd be dangerous. As it is, I'm just good at breaking things. :)"}, {"count": 6, "attachment_id": null, "bug_id": 16288, "text": "No Doc Watson on Win98 I know of.... hmmm. Off to google.", "id": 29770, "time": "2003-01-21T09:56:34Z", "creator": "vimages@well.com", "creation_time": "2003-01-21T09:56:34Z", "tags": [], "is_private": false}, {"count": 7, "attachment_id": null, "bug_id": 16288, "is_private": false, "id": 29791, "time": "2003-01-21T15:30:28Z", "creator": "wrowe@apache.org", "creation_time": "2003-01-21T15:30:28Z", "tags": [], "text": "  Nailed down the bug.\n\n  FileTimeToLocalFileTime doesn't pay attention to daylight savings time,\n  which was badness.  The fix was using SystemTimeToTzSpecificLocalTime()\n  which is only supported under NT (not 9x.)  I will be applying conditional\n  logic to use the old code, and post up a patch for Win9x/ME users to replace\n  their libapr.dll.  The files in support() might need to be updated; I will\n  take a look to see which (if any) are affected."}, {"count": 8, "tags": [], "bug_id": 16288, "attachment_id": null, "id": 29800, "time": "2003-01-21T17:55:05Z", "creator": "vimages@well.com", "creation_time": "2003-01-21T17:55:05Z", "is_private": false, "text": "Thanks Will. I'll be your guinea pig, if you need it.\n\n-jim"}, {"count": 9, "tags": [], "creator": "vimages@well.com", "is_private": false, "text": "Will, Should the release notes for 2.0.44 be updated on the web site to reflect\nthis problem? Or perhaps, even pull .44 off until it's fixed? I know it is a\nharsh step, but the advisory is specific to Win 9x and ME, and it at least fails\nto run on Win98.\n\n-jim", "id": 29810, "time": "2003-01-21T19:50:24Z", "bug_id": 16288, "creation_time": "2003-01-21T19:50:24Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "vimages@well.com", "text": "*** Bug 16281 has been marked as a duplicate of this bug. ***", "id": 29812, "time": "2003-01-21T20:14:38Z", "bug_id": 16288, "creation_time": "2003-01-21T20:14:38Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 16288, "attachment_id": null, "id": 29822, "time": "2003-01-21T23:39:34Z", "creator": "goweb@o2.co.uk", "creation_time": "2003-01-21T23:39:34Z", "is_private": false, "text": "You can access Dr.Watson through System Information on Windows 98"}, {"count": 12, "text": "So what's the scoop Will? We've got a broken build, available for download from\neverywhere. Is the APR vote holding stuff up? Just curious....\n\n-jim", "bug_id": 16288, "attachment_id": null, "id": 29824, "time": "2003-01-22T00:39:22Z", "creator": "vimages@well.com", "creation_time": "2003-01-22T00:39:22Z", "tags": [], "is_private": false}, {"count": 13, "attachment_id": 4508, "bug_id": 16288, "is_private": false, "id": 29825, "time": "2003-01-22T00:56:46Z", "creator": "wrowe@apache.org", "creation_time": "2003-01-22T00:56:46Z", "tags": [], "text": "Created attachment 4508\nReplacement libapr.dll, apr/time/win32/time.c reverted to rev 1.40 for 9x/ME only"}, {"count": 14, "text": "\n  If some of you poor souls who were clobbered by my patch 10 days ago would\n  grab the attached .zip file and unpack it into your installed Apache 2.0.44\n  bin directory, replacing the existing libapr.dll, please update this bug with\n  your success or failure at using the server after that update.\n\n  If this is a confirmed fix, I'll send the file to /dist/httpd/binaries/win32/\n  for everyone's benefit.\n", "bug_id": 16288, "attachment_id": null, "id": 29826, "time": "2003-01-22T00:58:54Z", "creator": "wrowe@apache.org", "creation_time": "2003-01-22T00:58:54Z", "tags": [], "is_private": false}, {"count": 15, "text": "OK. I think you did indeed nail it.\n\nI removed 2.0.43 through add/remove, deleted the directory, rebooted and\nreinstalled 2.0.44 and it ran from console. I *did* however use my httpd.conf\nfile from 2.0.43 simply because it is fairly well hacked. I note that the new\nfile is 35K, as opposed to my 33K file (which worries me a bit), so I guess\nthere is a whole bunch of new stuff, and I'll probably pay for this later.\n\nThanks for the work Will. Marking as verified.\n\n(so.... how are you going to get this fix out to the \"masses\" ?)", "bug_id": 16288, "attachment_id": null, "id": 29828, "time": "2003-01-22T01:56:59Z", "creator": "vimages@well.com", "creation_time": "2003-01-22T01:56:59Z", "tags": [], "is_private": false}, {"count": 16, "tags": [], "bug_id": 16288, "attachment_id": null, "id": 29829, "time": "2003-01-22T02:53:00Z", "creator": "wrowe@apache.org", "creation_time": "2003-01-22T02:53:00Z", "is_private": false, "text": "\n  First off, the patch file (with .asc sig and .md5 stamp) is up on\n  www.apache.org and now propogating to the mirrors.\n\n  Second, thanks for testing, Jim.  Suggestion to you... you can always\n  go to http://cvs.apache.org/viewcvs/httpd-2.0/docs/conf/httpd-win.conf\n  and compare any two arbitrary versions (find the older version, click\n  'select for diffs', go to your official release and click 'compare to\n  selected'.)  This will give you a hint of what's been introduced to \n  the stock config.\n\n  Your install also includes httpd.default.conf, feel free to set aside\n  the old one and compare it with the newly installed httpd.default.conf.\n\n  I'll work with the team to determine how to announce, in the meantime\n  feel free to point people to the URL above.\n\n  Thanks again for the quick report - made it easier to fix it quickly.\n  The fix will be included in 2.0.45 which won't be far on the heels of\n  2.0.44.\n\n\n  "}, {"count": 17, "tags": [], "bug_id": 16288, "attachment_id": null, "text": "Again, happy to help. I broke some stuff in 2.0.39 whem I was working at Qualys.\nI'll keep breaking stuff, have no fear. Besides, it's kinda challenging to make\na really good web server run on a really crappy OS. :)\n\ncheers,\n\n-jim", "id": 29830, "time": "2003-01-22T03:11:24Z", "creator": "vimages@well.com", "creation_time": "2003-01-22T03:11:24Z", "is_private": false}, {"count": 18, "attachment_id": null, "bug_id": 16288, "text": "\n  The patch will take some time to propogate throughout the proxies.  Announce\n  to follow in the morning (once folks are able to find the patch.)\n\n  Feel free to spread the word, and cite this bug entry or this URL.\n", "id": 29833, "time": "2003-01-22T04:29:19Z", "creator": "wrowe@apache.org", "creation_time": "2003-01-22T04:29:19Z", "tags": [], "is_private": false}, {"count": 19, "tags": [], "text": "*** Bug 16909 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 30945, "creator": "nd@perlig.de", "time": "2003-02-09T01:20:45Z", "bug_id": 16288, "creation_time": "2003-02-09T01:20:45Z", "attachment_id": null}, {"count": 20, "tags": [], "bug_id": 16288, "attachment_id": null, "id": 31463, "time": "2003-02-17T17:14:18Z", "creator": "nd@perlig.de", "creation_time": "2003-02-17T17:14:18Z", "is_private": false, "text": "*** Bug 17133 has been marked as a duplicate of this bug. ***"}, {"count": 21, "tags": [], "bug_id": 16288, "attachment_id": null, "text": "*** Bug 17333 has been marked as a duplicate of this bug. ***", "id": 31854, "time": "2003-02-24T13:25:52Z", "creator": "nd@perlig.de", "creation_time": "2003-02-24T13:25:52Z", "is_private": false}, {"count": 22, "tags": [], "creator": "slive@apache.org", "text": "*** Bug 17988 has been marked as a duplicate of this bug. ***", "id": 37749, "time": "2003-05-24T18:00:14Z", "bug_id": 16288, "creation_time": "2003-05-24T18:00:14Z", "is_private": false, "attachment_id": null}]