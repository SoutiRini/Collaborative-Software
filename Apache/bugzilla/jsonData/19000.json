[{"count": 0, "tags": [], "creator": "adulau@foo.be", "text": "We have tried to compile mod_ssl for an apache 2.0.45 with a new version of\nOpenSSL 0.9.6j and 0.9.7a. We got an error about ERR_LIB_PEM (undeclared) during\nthe compilation.\n\nWe can see in the OpenSSL Changelog, a note a cleanup around the define in err.h \n\nIs it a known issue in OpenSSL or in Apache ? \n\nThe compilation output error :\n\n/bin/sh /data/down/rproxy/httpd-2.0.45/srclib/apr/libtool --silent\n--mode=compile gcc  -g -O2 -pthread    -DLINUX=2 -D_REENTRANT\n-D_XOPEN_SOURCE=500 -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE\n-DAP_HAVE_DESIGNATED_INITIALIZER  \n-I/data/down/rproxy/httpd-2.0.45/srclib/apr/include\n-I/data/down/rproxy/httpd-2.0.45/srclib/apr-util/include -I/usr/include -I.\n-I/data/down/rproxy/httpd-2.0.45/os/unix\n-I/data/down/rproxy/httpd-2.0.45/server/mpm/prefork\n-I/data/down/rproxy/httpd-2.0.45/modules/http\n-I/data/down/rproxy/httpd-2.0.45/modules/filters\n-I/data/down/rproxy/httpd-2.0.45/modules/proxy\n-I/data/down/rproxy/httpd-2.0.45/include -I/usr/local/ssl/include/openssl\n-I/usr/local/ssl/include -I/data/down/rproxy/httpd-2.0.45/modules/dav/main\n-prefer-non-pic -static -c ssl_util_ssl.c && touch ssl_util_ssl.lo\nssl_util_ssl.c: In function `SSL_CTX_use_certificate_chain':\nssl_util_ssl.c:537: `ERR_LIB_PEM' undeclared (first use in this function)\nssl_util_ssl.c:537: (Each undeclared identifier is reported only once\nssl_util_ssl.c:537: for each function it appears in.)\nmake[3]: *** [ssl_util_ssl.lo] Error 1\n\nThe configure parameters :\n\n./configure   --enable-proxy  --enable-proxy-connect  --enable-proxy-ftp\n--enable-proxy-http --enable-ssl --enable-rewrite --with-ssl=/usr/local/ssl\n--with-berkeley-db=/usr", "id": 35120, "time": "2003-04-14T15:42:13Z", "bug_id": 19000, "creation_time": "2003-04-14T15:42:13Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "lawlaurent@yahoo.fr", "is_private": false, "id": 35312, "creation_time": "2003-04-16T10:27:37Z", "time": "2003-04-16T10:27:37Z", "bug_id": 19000, "text": " I'm so sorry I made a mistake (thinking I was on my bug page). ", "attachment_id": null}, {"count": 2, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "text": "some SSL library compatibility issues were resolved after 2.0.45...  I can't say\nfor sure that 2.0.47 resolves the one you hit, but it would be very good for you\nto try to reproduce with the latest\n", "id": 40857, "time": "2003-07-16T18:26:20Z", "bug_id": 19000, "creation_time": "2003-07-16T18:26:20Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 19000, "text": "same thing happens with OpenSSL 0.9.7b , apache 2.0.47 on a freebsd 4.8 server..\nI figure out that in modules/ssl/mod_ssl.h the second include err.h should to be\nchanged:\n\n--- modules/ssl/mod_ssl.h.orig  Sat Sep 13 19:36:51 2003\n+++ modules/ssl/mod_ssl.h       Sat Sep 13 19:15:43 2003\n@@ -123,7 +123,7 @@\n #else /* !HAVE_SSLC (implicit HAVE_OPENSSL) */\n\n #include <ssl.h>\n-#include <err.h>\n+#include <openssl/err.h>\n #include <x509.h>\n #include <pem.h>\n #include <crypto.h>\n\n", "id": 44165, "attachment_id": null, "creator": "gigil@room666.biz", "creation_time": "2003-09-13T23:46:31Z", "time": "2003-09-13T23:46:31Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 19000, "attachment_id": null, "is_private": false, "id": 44167, "time": "2003-09-14T06:38:49Z", "creator": "gigil@room666.biz", "creation_time": "2003-09-14T06:38:49Z", "text": "another fix is to configure with SSL_EXPERIMENTAL_ENGINE set\n\nCFLAGS=\"-DSSL_EXPERIMENTAL_ENGINE=y\" ./configure --with-ssl=/usr/local/ssl ...\n\n"}, {"count": 5, "tags": [], "creator": "chip@force-elite.com", "text": "I believe this issue is now resolved with modern versions of OpenSSL and httpd.", "id": 75872, "time": "2005-06-03T01:24:55Z", "bug_id": 19000, "creation_time": "2005-06-03T01:24:55Z", "is_private": false, "attachment_id": null}]