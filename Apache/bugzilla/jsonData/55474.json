[{"count": 0, "tags": [], "creator": "dzidzitop@vfemail.net", "attachment_id": null, "id": 169679, "time": "2013-08-23T18:33:23Z", "bug_id": 55474, "creation_time": "2013-08-23T18:33:23Z", "is_private": false, "text": "The task <ant> adds references after project implicit target is executed.\n\nIn the script below <typedef> in the root project element. The following happens:\n- ant run is invoked\n- typedef is executed; myantloader is initialised\n- the target run is executed\n- antcall is executed:\na) a new project for the target 'someTarget' is configured. This included executing the implicit project target. No myantloader is defined yet -> the taglib is loaded in its own classloader\nb) addReferences() is invoked and initialises 'myantloader' with the classloader passed from the parent project\n\nExpected: the classloader referenced as 'myantloader' is visible for the subproject's <typedef/>\n\n    \n<project name=\"test\" default=\"make\" basedir=\".\">\n\t<typedef resource=\"myantlib.properties\" classpath=\"myantlib.jar\" loaderRef=\"myantloader\"/>\n\n\t<target name=\"run\">\n\t\t<antcall target=\"someTarget\" inheritRefs=\"true\"/>\n\t</target>\n\t\n\t<target name=\"someTarget\">\n\t</target>\n</project>"}]