[{"count": 0, "tags": [], "bug_id": 25014, "attachment_id": null, "text": "The current mod_log_config has a very limited capability for support of log\nwriters other than the build-in file/pipe writer. This is a bit bad since some\npeople would like to log somewhere else (usually some kind of database), all\ndata or only parts thereof, as an exclusive log target or in addition to the\nstandard files.\nCurrently, there can be only one writer and it has to deal with whatever string\nmod_log_config assembles for him. The other possibility would be to bypass\nmod_log_config completely and thus reinventing the wheel. In any case, a number\nof configuration directives have to be added, all doing more or less the same\ntwo things: specifying a target and a format.\n\nThis variant of mod_log_config allows an unlimited number of external log\nwriters to be added. The log writers can be used simultanously, their basic\nconfiguration is done through mod_log_config's CustomLog and LogFormat\ndirectives and they have full control over the data they get (i.e. is it a\nstring, a number, a date or is it not applicable to the current request).\n\nA number of people have been using this mod_log_config with my mod_log_mysql\nwithout problems for a while now. Configuration for mod_log_mysql looks like this:\n\n  LogFormat \"insert into %{mysqlname}v set host=%h, time=%t, [..]\" mysql_format\n  CustomLog mysql:mysqluser!mysqlpassword@mysqlhost/databasename mysql_format\n\nThat's it, quite straight forward. No extra directives needed, the log format is\nan SQL command, the %-parameters are handled by mod_log_config (and thus are\nalways the same and still support externals like mod_logio and mod_ssl), the log\ntarget looks basically like a familiar URI.\n\nThis mod_log_config itself implements two log writers, file: and pipe:, which\nwork like mod_log_config always did.\n\nThe module is 100% backwards compatible, it works both with old external\n%-parameters (as said, e.g. mod_logio and mod_ssl) and with old external log\nwriters.\n\n\n-----------\n\n\nIn addition to that, this mod_log_config allows to conditionally log accesses\nnot only on environment variables but also on return status codes. This was\nuntil now only possible for single items but not for the complete line. Didn't\nmake much sense to me since that might dump a thousand empty lines in my logs if\nI'm only interested in e.g. bad referrers resulting in a 404. It's better to\nskip these lines completely and only log if there actually is a 404.", "id": 48161, "time": "2003-11-26T13:42:48Z", "creator": "st@kino-fahrplan.de", "creation_time": "2003-11-26T13:42:48Z", "is_private": false}, {"count": 1, "tags": [], "creator": "st@kino-fahrplan.de", "attachment_id": 9295, "id": 48162, "time": "2003-11-26T13:48:17Z", "bug_id": 25014, "creation_time": "2003-11-26T13:48:17Z", "is_private": false, "text": "Created attachment 9295\nmod_log_config.c, complete file"}, {"count": 2, "tags": [], "creator": "st@kino-fahrplan.de", "text": "Created attachment 9296\nmod_log_config.h, complete file", "id": 48163, "time": "2003-11-26T13:48:42Z", "bug_id": 25014, "creation_time": "2003-11-26T13:48:42Z", "is_private": false, "attachment_id": 9296}, {"count": 3, "attachment_id": 9297, "bug_id": 25014, "text": "Created attachment 9297\nmod_logio.c, modified for the new mod_log_config interface (sorry, no patch:)", "id": 48164, "time": "2003-11-26T13:49:38Z", "creator": "st@kino-fahrplan.de", "creation_time": "2003-11-26T13:49:38Z", "tags": [], "is_private": false}]