[{"count": 0, "attachment_id": null, "bug_id": 20668, "text": "Here we go: \nthis is the XML structure :\n\n<?xml version=\"1.0\"?>\n<person>\n   <fname>John</fname>\n   <lname>Smith</lname>\n   <phone type=\"work\">563-456-7890</phone>\n   <phone type=\"home\">534-567-8901</phone>   \n   <email type=\"home\">jsmith@somemail.com</email>\n   <email type=\"work\">john@lovesushi.com</email>\n   <address type=\"home\">34 S. Colon St.</address>\n   <address type=\"work\">9967 W. Shrimp Ave.</address>\n</person>\n\nIf we try to update some data from the above xml collection in XINDICE DB (i \nassume that you understand we added the Document to the collection allready).\n\nthe query will look like this :\n\nString xupdate = \"<xu:modifications version=\\\"1.0\\\"\" +\n          \"   xmlns:xu=\\\"http://www.xmldb.org/xupdate\\\">\" +\n          \"   <xu:update select=\\\"/person[fname='John']\\\">\" +\n          \"Ravi\" +\n          \"</xu:update>\" +\n            \"</xu:modifications>\";\n\nwe are trying to run this query from a JAVA program.\n\nwe get some error like : \n\norg.apache.xindice.client.corba.db.APIException: \nIDL:org/apache/xindice/client/corba/db/APIException:1.0\n\n\tat org.apache.xindice.client.corba.db.APIExceptionHelper.read\n(APIExceptionHelper.java:112)\n\n\tat org.apache.xindice.client.corba.db._CollectionStub.queryCollection\n(_CollectionStub.java:833)\n\n\tat \norg.apache.xindice.client.xmldb.services.XUpdateQueryServiceImpl.updateResult\n(XUpdateQueryServiceImpl.java:165)\n\n\tat \norg.apache.xindice.client.xmldb.services.XUpdateQueryServiceImpl.update\n(XUpdateQueryServiceImpl.java:185)\n\n\tat xmlapp.Example1.updateRecode(Example1.java:149)\n\n\tat xmlapp.Example1.main(Example1.java:44)\nIf you try to update the same record but having some attribute like in the same \nxml example :\nString xupdate = \"<xu:modifications version=\\\"1.0\\\"\" +\n          \"   xmlns:xu=\\\"http://www.xmldb.org/xupdate\\\">\" +\n          \"   <xu:update select=\\\"/person/phone[@type='work']\\\">\" +\n          \"24434\" +\n          \"</xu:update>\" +\n            \"</xu:modifications>\";\n\nIt works fine, so what i understand from here is that DB gets some kind of lock \non the selected data in first case. Which means that coz in the second case we \nare only accessing the indirect data and updating the records. But in the first \ncase we are directly aceesing the same data and trying to update it. \n\nWe are allready in the process of using Xindice in our product so an early \nfeedback will be a real help.\n\nThanking you all in advance\n\nRavi/Jae Sung", "id": 38702, "time": "2003-06-11T02:04:05Z", "creator": "rpal@mibtech.com", "creation_time": "2003-06-11T02:04:05Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "Kevin.Ross@iVerticalLeap.com", "attachment_id": null, "text": "This is probably due to environmental conditions with which Corba operates.  \nYou may search the bug/mail archives for solutions, but I would suggest you \ncheckout the CVS head and use it instead.  The corba api has been removed in \nfavor of xmlrpc.\n\nThough I say this is probably due to environment, I would also attempt this \nwith the xml rpc client.  If you encounter a problem, please reopen this bug \nand provide a JUnit test case (changing version selection to 1.1).  This will \nexpedite a solution.", "id": 38706, "time": "2003-06-11T02:22:28Z", "bug_id": 20668, "creation_time": "2003-06-11T02:22:28Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 20668, "text": "I tried the same query with the CVS version of XINDICE, based on XML RPC. but \nit shows the same problem.\n\nI hope now you think it is a bug.", "id": 38784, "time": "2003-06-13T03:00:46Z", "creator": "rpal@mibtech.com", "creation_time": "2003-06-13T03:00:46Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "creator": "Kevin.Ross@iVerticalLeap.com", "is_private": false, "id": 38796, "time": "2003-06-13T14:21:59Z", "bug_id": 20668, "creation_time": "2003-06-13T14:21:59Z", "tags": [], "text": "Changed to 1.1\n\nTo have the most expedient solution, please provide a junit test that will\ncreate the document, and run the xupdate. "}, {"count": 4, "tags": [], "bug_id": 20668, "is_private": false, "text": "Please provide an updated stack trace, and a junit test.  Unfortunately, we \nneed your help to solve your problem.  If you provide a unit test, please \npromptly set the status to 'reopened'.", "id": 38953, "time": "2003-06-17T04:23:12Z", "creator": "Kevin.Ross@iVerticalLeap.com", "creation_time": "2003-06-17T04:23:12Z", "attachment_id": null}]