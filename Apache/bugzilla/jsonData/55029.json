[{"count": 0, "tags": [], "text": "On a web-server, running apache2-2.2.24 I have a SSL-enabled vhost on non-standard (3443) port.\n\nTrying to force usage correct server-name I put in vhost's Directory section of httpd-ssl.conf:\n...\n#\nRewriteEngine on\n#\nRewriteCond %{HTTPS} ^on$\nRewriteCond %{HTTP_HOST} !^admin\\.mydomain\\.ru$\nRewriteCond %{HTTP_HOST} !^$\nRewriteCond %{SERVER_PORT} =3443\n#\nRewriteRule ^/?(.*) https://admin.mydomain.ru:%{SERVER_PORT}/$1 [L,R,NE]\n#\n...\n\nand find redirect loop.\n\nUpdating Condifion including server port value in HTTP_HOST string made redirect working, but I find it incorrect.\n\nOperable redirect list is:\n...\nRewriteEngine on\n#\nRewriteCond %{HTTPS} ^on$\nRewriteCond %{HTTP_HOST} !^admin\\.mydomain\\.ru:3443$\nRewriteCond %{HTTP_HOST} !^$\nRewriteCond %{SERVER_PORT} =3443\n\nRewriteRule ^/?(.*) https://admin.mydomain.ru:%{SERVER_PORT}/$1 [L,R,NE]\n...\n\nP.S. Also, at least for SSL-connection \"Canonical Hostnames\" section of http://httpd.apache.org/docs/2.2/rewrite/remapping.html in description of non-standard port usage case is incorrect.", "attachment_id": null, "id": 167494, "creator": "ikonta@yandex.ru", "time": "2013-05-30T07:27:00Z", "bug_id": 55029, "creation_time": "2013-05-30T07:27:00Z", "is_private": false}, {"count": 1, "tags": [], "text": "HTTP_HOST is the value of the Host: header, so the port should be there when used by the client.", "is_private": false, "id": 167499, "creator": "covener@gmail.com", "time": "2013-05-30T10:30:36Z", "bug_id": 55029, "creation_time": "2013-05-30T10:30:36Z", "attachment_id": null}]