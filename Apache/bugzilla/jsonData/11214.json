[{"count": 0, "tags": [], "creator": "cote@computer.org", "text": "I have a build file which check for the existance of generated files.  I get the\nfollowing exception when I do a build.\n\nfile:/home/gce/dev/bilansService/build/build.xml:419:\n/home/gce/dev/bilansService/work/src not found.\n        at\norg.apache.tools.ant.types.AbstractFileSet.getDirectoryScanner(AbstractFileSet.java:341)\n        at\norg.apache.tools.ant.types.AbstractFileSet.getDirectoryScanner(AbstractFileSet.java:332)\n        at org.apache.tools.ant.taskdefs.UpToDate.eval(UpToDate.java:199)\n        at org.apache.tools.ant.taskdefs.UpToDate.execute(UpToDate.java:235)\n        at org.apache.tools.ant.Task.perform(Task.java:317)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:334)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1250)\n        at org.apache.tools.ant.Main.runBuild(Main.java:610)\n        at org.apache.tools.ant.Main.start(Main.java:196)\n        at org.apache.tools.ant.Main.main(Main.java:235)\n\nI would like the uptodate tasks to simply ignore inexisting directory and\nconsider that the file can not uptodate.\n\n\nFor that, two file need to be modified.  The following method should be added in \nAbstractFileSet.java\n\n    public boolean exist(Project p) {\n        if (isReference()) {\n            return getRef(p).exist(p);\n        }\n\n        return dir.exists();\n    }\n\nThen, those three lines of the method eval() of uptodate \n\n            DirectoryScanner ds = fs.getDirectoryScanner(project);\n            upToDate = upToDate && scanDir(fs.getDir(project), \n                                           ds.getIncludedFiles());\n\nshould be replaced by\n\n            if (fs.exist(project)) {\n                DirectoryScanner ds = fs.getDirectoryScanner(project);\n                upToDate = upToDate && scanDir(fs.getDir(project), \n                                               ds.getIncludedFiles());\n            }\n            else {\n                upToDate = false;\n            }\n\nSorry, I cannot provide a clean patch due to my firewall.", "id": 20275, "time": "2002-07-26T17:43:01Z", "bug_id": 11214, "creation_time": "2002-07-26T17:43:01Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "cote@computer.org", "text": "Created attachment 2513\nproposed patch to \\src\\main\\org\\apache\\tools\\ant\\taskdefs\\UpToDate.diff", "id": 20348, "time": "2002-07-29T08:53:45Z", "bug_id": 11214, "creation_time": "2002-07-29T08:53:45Z", "is_private": false, "attachment_id": 2513}, {"count": 2, "tags": [], "text": "Created attachment 2514\nproposed patch to \\src\\main\\org\\apache\\tools\\ant\\types\\AbstractFileSet.java", "is_private": false, "bug_id": 11214, "id": 20349, "time": "2002-07-29T08:54:48Z", "creator": "cote@computer.org", "creation_time": "2002-07-29T08:54:48Z", "attachment_id": 2514}, {"count": 3, "tags": [], "creator": "bodewig@apache.org", "text": "The filesets you specify in <uptodate> are the source files.\n\nI completely agree that missing target files are just an indication that things\nare not up-to-date, but missing source files are a completely different thing.\n\nIf you use the sourcefile attribute instead of nested filesets, the task is going\nto fail if your point it to a non-existant file as well.  So failing if the\nfilesets you specify don't exist is just consistent.", "id": 34050, "time": "2003-03-28T13:39:16Z", "bug_id": 11214, "creation_time": "2003-03-28T13:39:16Z", "is_private": false, "attachment_id": null}]