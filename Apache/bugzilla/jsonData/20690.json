[{"count": 0, "tags": [], "bug_id": 20690, "attachment_id": null, "text": "I have coded a custom TrustManger and HostnameVerifier for SSL (actually TLS)\nconnections from my servlet code to another server.\n\nThe code calls the correct methods to setup the Default TrustManager and\nHostNameVerifier for an HttpsUrlConnection.\n\nI then use the URL.openConnection() method to instansiate the connection.\n\nRunning standalone, this code works perfectly, however running under Tomcat on\nthe same machine the HttpConnection does not use the custom TustManager that I\ncoded.\n\nCode to set up default Trust Manager, etc.:\n\nprivate static void initSSL()\n{\n  try\n  {\n    TrustManager[] myTM = new TrustManager [] { new ProxyTrustManager() };\n    SSLContext ctx = SSLContext.getInstance(\"TLS\");\n    ctx.init(null, myTM, null);\n    SSLSocketFactory sslFactory = ctx.getSocketFactory();\n    HttpsURLConnection.setDefaultSSLSocketFactory(sslFactory);\n    HttpsURLConnection.setDefaultHostnameVerifier(new ProxyHostNameVerifier());\n  }\n  catch (Exception ex)\n  {\n    ex.printStackTrace();\n  }\n}\n\n\nMachine Specs.:\nRed-Hat Linux 7.1\nJ2SDK SE 1.4.1_02", "id": 38733, "time": "2003-06-11T19:49:39Z", "creator": "nathanc@tni.com", "creation_time": "2003-06-11T19:49:39Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nathanc@tni.com", "text": "I have more info on this bug.\n\nApparently Tomcat is using a deprecated API (the com.sun.net.ssl.* package\nheirarchy) instead of the new 1.4.x javax.net.ssl package.\n\nHow do I get Tomcat to use the new javax.net.ssl packages?", "id": 39367, "time": "2003-06-24T20:56:51Z", "bug_id": 20690, "creation_time": "2003-06-24T20:56:51Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "medthomas@ntlworld.com", "attachment_id": null, "id": 40023, "time": "2003-07-06T21:19:57Z", "bug_id": 20690, "creation_time": "2003-07-06T21:19:57Z", "is_private": false, "text": "Tomcat 4.1.24 does not use the 1.4 JDK. This has been fixed, and will be \nincluded in the 4.1.25 release later this month. As of 4.1.25, it will use the \n1.4 JDK if it is available but it will not require it.\n\nIn the interim, there is always the option to get the latest tomcat 4.1.x \nsource from CVS and build it yourself.\n\nI have marked this bug as fixed, based on the assunption that using the 1.4 \nJDK will resolve the issue. If not, please re-open the bug."}]