[{"count": 0, "tags": [], "bug_id": 61304, "attachment_id": null, "is_private": false, "id": 199809, "time": "2017-07-15T21:25:40Z", "creator": "lemesmachado@gmail.com", "creation_time": "2017-07-15T21:25:40Z", "text": "Hello everyone.\nI was analyzing the modularization of some classes, and I identified that the class BasicDataSource has an opportunity for cohesion improvement. \nThe class Http11Protocol was in the same situation and the problem was solved as follows: The HttpBaseProtocol class was created, and several get() and set() methods that were used only to configure the class parameters were moved from Http11Protocol to HttpBaseProtocol. \nThe new class was then accessed through an instance variable in Http11Protocol. This strategy has cleaned and improved Http11Protocol cohesion.\nWith this in mind, I would recommend creating a new class: BasicDataSourceConfig , and moving the following methods:\n\ngetTestOnBorrow\ngetTestOnCreate\ngetTestWhileIdle\ngetLifo\ngetTestOnReturn\ngetDriverClassLoader\ngetAbandonedLogWriter\ngetAbandonedUsageTracking\ngetCacheState\ngetConnection\ngetConnectionInitSqls\ngetConnectionInitSqlsAsArray\ngetBasicDataSource\ngetConnectionProperties\ngetDefaultAutoCommit\ngetDefaultCatalog\ngetDefaultQueryTimeout\ngetDefaultReadOnly\ngetDefaultTransactionIsolation\ngetDisconnectionSqlCodes\ngetDisconnectionSqlCodesAsArray\ngetEnableAutoCommitOnReturn\ngetFastFailValidation\ngetJmxName\ngetLogAbandoned\ngetLogExpiredConnections\ngetLoginTimeout\ngetLogWriter\ngetMaxConnLifetimeMillis\ngetNumActive\ngetNumIdle\ngetParentLogger\ngetPassword\ngetRegisteredJmxName\ngetRemoveAbandonedOnBorrow\ngetRemoveAbandonedOnMaintenance\ngetRemoveAbandonedTimeout\ngetRollbackOnReturn\ngetUsername\ngetValidationQuery\ngetValidationQueryTimeout\ngetMinIdle\ngetInitialSize\ngetNumTestsPerEvictionRun\ngetMaxOpenPreparedStatements\ngetMaxIdle\ngetMaxTotal\ngetDriver\ngetMinEvictableIdleTimeMillis\ngetTimeBetweenEvictionRunsMillis\ngetSoftMinEvictableIdleTimeMillis\ngetMaxWaitMillis\nsetAbandonedLogWriter\nsetAbandonedUsageTracking\nsetCacheState\nsetConnectionInitSqls\nsetConnectionProperties\nsetDefaultAutoCommit\nsetDefaultCatalog\nsetDefaultQueryTimeout\nsetDefaultReadOnly\nsetDefaultTransactionIsolation\nsetDisconnectionSqlCodes\nsetEnableAutoCommitOnReturn\nsetFastFailValidation\nsetJmxName\nsetLogAbandoned\nsetLogExpiredConnections\nsetLoginTimeout\nsetLogWriter\nsetMaxConnLifetimeMillis\nsetPassword\nsetRemoveAbandonedOnBorrow\nsetRemoveAbandonedOnMaintenance\nsetRemoveAbandonedTimeout\nsetRollbackOnReturn\nsetUsername\nsetValidationQuery\nsetValidationQueryTimeout\ngetUrl\ngetEvictionPolicyClassName\ngetDriverClassName\nsetMinEvictableIdleTimeMillis\nsetDriverClassName\nsetMaxOpenPreparedStatements\nsetMaxTotal\nsetTimeBetweenEvictionRunsMillis\nsetEvictionPolicyClassName\nsetMaxWaitMillis\nsetTestOnCreate\nsetTestOnReturn\nsetDriverClassLoader\nsetMinIdle\nsetInitialSize\nsetNumTestsPerEvictionRun\nsetUrl\nsetTestOnBorrow\nsetDriver\nsetTestWhileIdle\nsetPoolPreparedStatements\nsetAccessToUnderlyingConnectionAllowed\nsetLifo\nsetMaxIdle\nsetSoftMinEvictableIdleTimeMillis\n\n\nfrom the BasicDataSource.\nThose parameters accessed by an instance variable in the BasicDataSource.\nMoreover, the orthogonality is the design would be enhanced.\n\nWhat do you think about that?"}, {"count": 1, "tags": [], "text": "This code originates in Commons DBCP 2 and is copied into Tomcat (with a little re-naming). Any suggestions for changes should be made to Commons DBPC 2.", "attachment_id": null, "id": 199844, "creator": "markt@apache.org", "time": "2017-07-16T22:52:20Z", "bug_id": 61304, "creation_time": "2017-07-16T22:52:20Z", "is_private": false}]