[{"count": 0, "attachment_id": null, "bug_id": 56308, "text": "With batched requests (i.e. loading 35 dynamically generated image tiles) mod_fcgid if it has fewer process-nodes than connections processes the last N requests at 1 per second.  (Where N is the number of connections greater than number of process-nodes.)\n\nThis scenario can be observed with a simple test web page that makes a group of requests (Firefox opens 6 concurrent connections) to an Apache instance with mod_fcgid configured to run fewer than 6 instances of the handling FastCGI application.  For example if mod_fcgid is configured to run a single instance of the application (FcgidMaxProcessesPerClass 1) then the first 30 requests are handled in approximately 150 milliseconds, and the last five take an additional 5 seconds.\n\nThe guilty logic in mod_fcgid is located in the handle_request function of fcgid_bridge.c, where it calls apr_sleep(apr_time_from_sec(1)) if it can't get an available procnode.\n\nFor our application a sleep of 2-5 milliseconds would be much preferable (up to 10 milliseconds would be acceptable in context of our FastCGI application and related web services).", "id": 174062, "time": "2014-03-24T16:08:19Z", "creator": "bmccart@overwatch.textron.com", "creation_time": "2014-03-24T16:08:19Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "rob+apache@pangalactic.org", "attachment_id": null, "is_private": false, "id": 176294, "time": "2014-07-08T14:49:10Z", "bug_id": 56308, "creation_time": "2014-07-08T14:49:10Z", "text": "Ditto.  I changed the timeout to 1ms and get much better results.  If needed, some sort of exponential backoff may be appropriate.  But a flat 1ms works for my needs."}, {"count": 2, "attachment_id": null, "creator": "michael.koperek@ebootis.de", "is_private": false, "id": 182590, "time": "2015-04-23T07:11:41Z", "bug_id": 56308, "creation_time": "2015-04-23T07:11:41Z", "tags": [], "text": "Ditto, one second is for my application to high (user has to wait for each image to load on a web side with multiple images 1 second).\nI changed the code in fcgid_bridge.c, function handle_request from\n    apr_sleep(apr_time_from_sec(1));\nto\n    apr_sleep(APR_USEC_PER_SEC / 50); // 20 msecs\n\nThat works fine (in my test use case).\nBut i will use mod_fastcgid in my customer projects, dont knowing wh at will happens there ...\nIs it possible to configure the sleep time?"}, {"count": 3, "tags": [], "bug_id": 56308, "text": "This issue is about the same problem as #53693. Simply lowering the delay from 1s to 20ms will cause other side effects.\n\n*** This bug has been marked as a duplicate of bug 53693 ***", "id": 202778, "time": "2017-12-14T11:40:48Z", "creator": "merijnvdk@apache.org", "creation_time": "2017-12-14T11:40:48Z", "is_private": false, "attachment_id": null}]