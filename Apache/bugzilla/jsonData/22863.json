[{"count": 0, "tags": [], "creator": "gthb@dimon.is", "attachment_id": null, "id": 43559, "creation_time": "2003-09-01T18:27:19Z", "time": "2003-09-01T18:27:19Z", "bug_id": 22863, "text": "I find myself having to resort to the <rename> task instead of the <move> task,\nfor just renaming a directory efficiently (i.e. without actually moving each\nfile in its subtree individually). Using <move> would clearly be preferred,\nsince <rename> is deprecated in favor of it -- but <move> makes me wait far\ntoo long.\n\nI tried several variants of <move>:\n\n<move todir=\"${parent}/${newname}\">\n  <fileset dir=\"${parent}/${oldname}\"/>\n</move>\n\n<move todir=\"${parent}/${newname}\">\n  <fileset dir=\"${parent}\" includes=\"${oldname}\"/>\n</move>\n\n<move todir=\"${parent}\">\n  <fileset dir=\"${parent}\" includes=\"${oldname}\"/>\n  <mapper type=\"glob\" from=\"${oldname}\" to=\"${newname}\"/>\n</move>\n\n<move todir=\"${parent}\">\n  <fileset dir=\"${parent}\"/>\n  <mapper type=\"glob\" from=\"${oldname}\" to=\"${newname}\"/>\n</move>\n\nbut they all resulted in a heavy-duty hard-disk-crunching file operation,\nwhich is is completely unnecessary, and the <rename> task doesn't do that.\n\nIt may be that there *is* a way to do a simple directory rename using <move>\n... if so, then there is still a bug: the bug is that it is not at all easy\nto figure out how to do that! :)", "is_private": false}, {"count": 1, "tags": [], "bug_id": 22863, "is_private": false, "text": "Are there any files or directories left in the original location in the\n\n<move todir=\"${parent}/${newname}\">\n  <fileset dir=\"${parent}/${oldname}\"/>\n</move>\n\ncase?  This should try to simply rename the directory if it actually moves\neverything.  But then again, the long delay you see may be spent scanning\nthe directory tree just to see whether everything is included.", "id": 43608, "time": "2003-09-02T14:28:50Z", "creator": "bodewig@apache.org", "creation_time": "2003-09-02T14:28:50Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "gthb@dimon.is", "is_private": false, "text": "With this:\n\n<move todir=\"${delivs.dist.dir}/targetdir\">\n    <fileset dir=\"${delivs.dist.dir}/sourcedir\"/>\n</move>\n\nI got this output:\n\n     [move] Moving 1199 files to C:\\cvs\\DS-4\\delivs\\dist\\targetdir\n     [move] Moved 2 empty directories to C:\\cvs\\DS-4\\delivs\\dist\\targetdir\n\nand the original folder was gone, so yes, apparently everything was moved.\nIt still took quite a while, but I guess that was just a scan of the tree\nto move, as you said. The point remains that I don't want that scan ...\nwhat I want is simply to rename the root directory of the tree, with no\nregard to its contents. That is exactly what <rename> does for me -- my use\ncase is a renaming operation, not a moving operation -- and thus the <move>\ntask is an imperfect replacement in this use case. So maybe <rename> should\nnot have been deprecated?\n", "id": 43610, "time": "2003-09-02T14:50:38Z", "bug_id": 22863, "creation_time": "2003-09-02T14:50:38Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "Fixed in CVS, use the \"file\" attribute.\n\nThanks,\nMatt", "id": 62867, "time": "2004-08-31T21:51:00Z", "bug_id": 22863, "creation_time": "2004-08-31T21:51:00Z", "is_private": false}, {"count": 4, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "Oh, yeah, happy birthday--a day early--to this bugrep!", "id": 62868, "time": "2004-08-31T21:51:38Z", "bug_id": 22863, "creation_time": "2004-08-31T21:51:38Z", "is_private": false}]