[{"count": 0, "tags": [], "creator": "al.java@bcpraha.com", "attachment_id": null, "is_private": false, "id": 135815, "time": "2010-03-31T12:34:56Z", "bug_id": 49030, "creation_time": "2010-03-31T12:34:56Z", "text": "If the Server part of the Tomcat 6 configuration is beeing processed and there are more connectory defined, it seems to be the fact the exceptions during the connector initialization are not catched properly, so if there comes some exception by the initialization of one connector (for example to try to initialize the new connector for the same port like had the already initialized connector), then no other connectors are processed and created (no one listening port is allocated) even if such other connectors are defined properly. It leads to the situation the connectory are then initialized differently if the order of the connectors changes. It can be very confusing if searching some error in the definitions. Together with the fact, the default server.xml contains at least in some cases the invalid connector definition it leads to serious confusion it searching the configuration problem..."}, {"count": 1, "tags": [], "bug_id": 49030, "is_private": false, "text": "It is then the problem especially in the connection with the bug 49031", "id": 135817, "time": "2010-03-31T12:40:56Z", "creator": "al.java@bcpraha.com", "creation_time": "2010-03-31T12:40:56Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "This has been fixed in trunk and proposed for 6.0.x", "id": 135820, "time": "2010-03-31T13:07:37Z", "bug_id": 49030, "creation_time": "2010-03-31T13:07:37Z", "attachment_id": null}, {"id": 135822, "tags": [], "bug_id": 49030, "attachment_id": null, "count": 3, "text": "Great, thank You.", "time": "2010-03-31T13:11:05Z", "creator": "al.java@bcpraha.com", "creation_time": "2010-03-31T13:11:05Z", "is_private": false}, {"count": 4, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "is_private": false, "id": 137841, "time": "2010-06-23T09:08:38Z", "bug_id": 49030, "creation_time": "2010-06-23T09:08:38Z", "text": "I like this, but there are caveats implementing this feature:\n\n1. Connectors that fail in a call to initialize() will also likely to fail in start(), pause(), stop(). Thus all the loops over connectors have to be safeguarded.\n\nThis includes loops over array returned by StandardService.findConnectors(), e.g. in ServerLifecycleListener#destroyMBeans(Service).\n\n\n2. Need to reimplement support for \n\norg.apache.catalina.startup.EXIT_ON_INIT_FAILURE=true\n\nconfiguration property [1], [2].\n\n[1] http://tomcat.apache.org/tomcat-6.0-doc/config/systemprops.html\n[2] https://issues.apache.org/bugzilla/show_bug.cgi?id=48625\n\nAs a test case for this feature one can try to start a second instance of Tomcat using the same configuration.\n\nIf the above EXIT_ON_INIT_FAILURE setting is added to conf/catalina.properties, Tomcat 6.0.27 will abort startup on the first init() failure.\n\nIf the init() exception were caught and startup continued, as proposed patch does, the abort does not happen."}, {"count": 5, "tags": [], "bug_id": 49030, "attachment_id": 25633, "text": "Created attachment 25633\n2010-06-24_tc6_bug49030.patch\n\nPatch for tc6.0.x", "id": 137860, "time": "2010-06-23T21:47:06Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-06-23T21:47:06Z", "is_private": false}, {"count": 6, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "is_private": false, "id": 137903, "time": "2010-06-25T11:24:23Z", "bug_id": 49030, "creation_time": "2010-06-25T11:24:23Z", "text": "I ported the patch to TC7 and applied in r957960,\n\nbut my testing shows that the fix for bug 48625 included there does not work, because Connector.init() does not behave as expected. I created bug 49503 to track that."}, {"id": 140069, "tags": [], "bug_id": 49030, "attachment_id": null, "count": 7, "text": "This has been fixed in 6.0.x and will be included in 6.0.30 onwards.", "time": "2010-09-22T10:56:47Z", "creator": "markt@apache.org", "creation_time": "2010-09-22T10:56:47Z", "is_private": false}, {"count": 8, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 145736, "time": "2011-04-12T18:12:06Z", "bug_id": 49030, "creation_time": "2011-04-12T18:12:06Z", "text": "*** Bug 46461 has been marked as a duplicate of this bug. ***"}]