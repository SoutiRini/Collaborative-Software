[{"count": 0, "tags": [], "creator": "qingyang.xu@qunar.com", "attachment_id": null, "id": 131420, "time": "2009-10-27T09:09:23Z", "bug_id": 48066, "creation_time": "2009-10-27T09:09:23Z", "is_private": false, "text": "following is the relevant parts of the 'build.xml' file:\n\n<path id=\"tomcat.classpath\">\n    <pathelement location=\"${ant.jar}\"/>\n    <pathelement location=\"${jdt.jar}\"/>\n</path>\n\n... ...\n<target name=\"compile\">\n     <javac srcdir=\"java\" destdir=\"${tomcat.classes}\"\n           debug=\"${compile.debug}\"\n           deprecation=\"${compile.deprecation}\"\n           source=\"${compile.source}\"\n           target=\"${compile.target}\"\n           optimize=\"${compile.optimize}\"\n           excludes=\"**/CVS/**,**/.svn/**\"\n           encoding=\"ISO-8859-1\">\n<!-- Comment this in to show unchecked warnings:     <compilerarg\nvalue=\"-Xlint:unchecked\"/> -->\n      <classpath refid=\"tomcat.classpath\" />\n      <exclude name=\"org/apache/naming/factory/webservices/**\" />\n     </javac>\n     ... ...\n</target>\n\n\n\nHowever, if you delete the first item (<pathelement location=\"${ant.jar}\"/>) in\nthe path element whose id is 'tomcat.classpath', the target of 'compile' still\nruns successfully, and if you invoke ant as \"ant -v\", you can see that\n'ant.jar' has already been included in the classpath. For example, the\nfollowing is the output on my machine:\n\n... ...\nCompiling 1052 source files to\n/home/xuqy/Downloads/apache-tomcat-6.0.20-src/output/classes\n    [javac] Using modern compiler\n    [javac] Compilation arguments:\n    [javac] '-d'\n    [javac] '/home/xuqy/Downloads/apache-tomcat-6.0.20-src/output/classes'\n    [javac] '-classpath'\n    [javac]\n'/home/xuqy/Downloads/apache-tomcat-6.0.20-src/output/classes:/home/xuqy/tomcat-base-path/eclipse/plugins/org.eclipse.jdt.core_3.3.1.v_780_R33x.jar:/usr/local/apache-ant-1.7.1/lib/ant-launcher.jar:/usr/local/apache-ant-1.7.1/lib/xercesImpl.jar:/usr/local/apache-ant-1.7.1/lib/ant-jdepend.jar:/usr/local/apache-ant-1.7.1/lib/ant-javamail.jar:/usr/local/apache-ant-1.7.1/lib/ant-commons-net.jar:/usr/local/apache-ant-1.7.1/lib/ant-apache-oro.jar:/usr/local/apache-ant-1.7.1/lib/ant.jar:/usr/local/apache-ant-1.7.1/lib/ant-weblogic.jar:/usr/local/apache-ant-1.7.1/lib/xml-apis.jar:/usr/local/apache-ant-1.7.1/lib/ant-jmf.jar:/usr/local/apache-ant-1.7.1/lib/ant-trax.jar:/usr/local/apache-ant-1.7.1/lib/ant-jsch.jar:/usr/local/apache-ant-1.7.1/lib/ant-commons-logging.jar:/usr/local/apache-ant-1.7.1/lib/ant-apache-regexp.jar:/usr/local/apache-ant-1.7.1/lib/ant-swing.jar:/usr/local/apache-ant-1.7.1/lib/ant-junit.jar:/usr/local/apache-ant-1.7.1/lib/ant-testutil.jar:/usr/local/apache-ant-1.7.1/lib/ant-antlr.jar:/usr/local/apache-ant-1.7.1/lib/ant-jai.jar:/usr/local/apache-ant-1.7.1/lib/ant-nodeps.jar:/usr/local/apache-ant-1.7.1/lib/ant-apache-bsf.jar:/usr/local/apache-ant-1.7.1/lib/ant-apache-resolver.jar:/usr/local/apache-ant-1.7.1/lib/ant-netrexx.jar:/usr/local/apache-ant-1.7.1/lib/ant-starteam.jar:/usr/local/apache-ant-1.7.1/lib/ant-apache-log4j.jar:/usr/local/apache-ant-1.7.1/lib/ant-stylebook.jar:/usr/local/apache-ant-1.7.1/lib/ant-apache-bcel.jar:/usr/lib/jvm/java-6-sun-1.6.0.16/lib/tools.jar'\n    [javac] '-sourcepath'\n    [javac] '/home/xuqy/Downloads/apache-tomcat-6.0.20-src/java'\n    [javac] '-target'\n    [javac] '1.5'\n    [javac] '-g'\n    [javac] '-source'\n    [javac] '1.5'\n\nIt seems that Ant appends ant.jar automatically when invoking javac target. So, removing ant.jar from classpath is safe. Furthermore, ant.jar is neither alluded in build.xml.default nor in the file of 'BUILDING.txt'. In most cases, it is discarded silently."}, {"count": 1, "tags": [], "creator": "qingyang.xu@qunar.com", "attachment_id": null, "id": 131422, "time": "2009-10-27T09:10:10Z", "bug_id": 48066, "creation_time": "2009-10-27T09:10:10Z", "is_private": false, "text": "*** Bug 47926 has been marked as a duplicate of this bug. ***"}, {"attachment_id": null, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "count": 2, "id": 131427, "time": "2009-10-27T10:05:16Z", "bug_id": 48066, "creation_time": "2009-10-27T10:05:16Z", "text": "whether ant.jar is included or not depends on the includeAntRuntime attribute of the javac task which - for better or worse - happens to default to true.\n\nIt may be a good idea to set this attribute explicitly."}, {"count": 3, "tags": [], "text": "(In reply to comment #2)\n> whether ant.jar is included or not depends on the includeAntRuntime attribute\n> of the javac task which - for better or worse - happens to default to true.\n> \n> It may be a good idea to set this attribute explicitly.\n\nGood comment! Thanks a lot.", "is_private": false, "id": 131507, "creation_time": "2009-10-30T02:20:06Z", "time": "2009-10-30T02:20:06Z", "creator": "qingyang.xu@qunar.com", "bug_id": 48066, "attachment_id": null}]