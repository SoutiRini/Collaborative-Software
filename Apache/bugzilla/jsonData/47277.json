[{"count": 0, "tags": [], "bug_id": 47277, "attachment_id": null, "is_private": false, "id": 127466, "time": "2009-05-28T01:43:57Z", "creator": "gabriel.gajdos@ipdap.sk", "creation_time": "2009-05-28T01:43:57Z", "text": "I was using Batik with Jasper with some WMF images.\n\nEverything was working perfectly in my Windows GUI environmenet.\nBut after deploying to server without available display GUI I got java.awt.HeadlessException.\nSetting -Djava.awt.headless=true was not sufficient.\n\nI started small investigation and I identified the problem:\nToolkit.getDefaultToolkit().getScreenResolution().\n\nI modified two classes (attached AbstractWMFReader and AbstractWMFPainter) which use this call with a simple workaround.\n1. only one call to this method is needed (subsequent calls can use final static variable already declared).\n2. If a HeadlessException is thrown, we assume (hardcoded) resolution 96 (current value from my GUI environment).\nI think it is better to have this hardcoded output than thrown exception.\n\nI tested this new classes and result was OK without thrown Exception.\n\nI past my minor changes fot the case that someone else would appreciate server-side functionality for reading WMF files."}, {"count": 1, "tags": [], "creator": "gabriel.gajdos@ipdap.sk", "attachment_id": 23722, "text": "Created attachment 23722\nSmall changes for classes AbstractWMFReader and AbstractWMFPainter", "id": 127467, "time": "2009-05-28T01:46:53Z", "bug_id": 47277, "creation_time": "2009-05-28T01:46:53Z", "is_private": false}, {"count": 2, "tags": [], "creator": "helder.magalhaes@gmail.com", "attachment_id": 24628, "id": 132381, "time": "2009-11-29T03:27:40Z", "bug_id": 47277, "creation_time": "2009-11-29T03:27:40Z", "is_private": false, "text": "Created attachment 24628\nPropose fix\n\nHi Gabriel,\n\nFirst of all, thanks for the fix. The suggested form for contributions is through a patch, though. I've turned your raw file attachment into that. ;-)"}, {"count": 3, "tags": [], "bug_id": 47277, "text": "(In reply to comment #0)\n> Everything was working perfectly in my Windows GUI environmenet.\n> But after deploying to server without available display GUI I got\n> java.awt.HeadlessException.\n> Setting -Djava.awt.headless=true was not sufficient.\n\nI've also confirmed that this is already addressed in issue 42408. The other patch is more complete in the sense that it allow configuring resolution through transcoding hints.\n\nI'm marking this issue as a duplicate of that bug, and invite you to help testing that patch (currently the bug is marked \"need info\" as it wasn't yet sufficiently tested).\n\n(The patch I just attached was provided in the sense of easing the comparison between this and the other bug.)\n\n*** This bug has been marked as a duplicate of bug 42408 ***", "id": 132382, "time": "2009-11-29T03:31:53Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2009-11-29T03:31:53Z", "is_private": false, "attachment_id": null}]