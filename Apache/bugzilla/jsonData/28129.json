[{"count": 0, "tags": [], "creator": "bugzilla@gehmtec.de", "is_private": false, "text": "I have following problem, with the built-in security.\nWhen i use the security i get following error, when i try to parse an XML :\n\n[Fatal Error] bAVTree.xml:9:64: The element type \"input\" must be terminated by \nthe matching end-tag \"</input>\".\n\nWell first this error message is complete mistaken, cause i don't have any \nelement input at all. And i only get this message, when i use the security, when \ni don't use it the BAVTree.xml is parsed without problems, i use the following \nclasses to parse :\n\nxercesImpl.jar,xmlParserAPIs.jar (2.6.1 the XML from tomcat\\common\\endorsed )\nimport org.apache.xerces.parsers.DOMParser; \nimport org.w3c.dom.Document;\nimport org.w3c.dom.NamedNodeMap;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n\nI assume the security manager somehow uses a different version of one of these \nclasses, so when i try to parse my xml, Java doesn't load the correct classes \nabove. BTW i use (j2re1.4.1_01).", "id": 55060, "time": "2004-04-01T15:17:44Z", "bug_id": 28129, "creation_time": "2004-04-01T15:17:44Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 28129, "attachment_id": null, "id": 55063, "time": "2004-04-01T15:25:51Z", "creator": "jfarcand@apache.org", "creation_time": "2004-04-01T15:25:51Z", "is_private": false, "text": "Can you check you logs to see if you are geting some ClassNotFound exceptions?\nYou should try to attach a test case, because It works fine for me right now. I\nwill let the bug open for now, but if you can't reproduce it with a simple test\ncase, I will unfortunatly close it as invalid.\n\n-- Jeanfrancois"}, {"count": 2, "tags": [], "bug_id": 28129, "text": "Well i tried to upload (attach) a simple test case, but i seems it doesn't work. \nSo here is a link (http://www.gehmtec.de/bugzilla/securitytest.zip) to a zip \nfile (~2 MB) with a securitytest.war and the server.xml.\nI don't get any ClassNotFound exceptions, that would be easy, i think the \nproblem is that a wrong/old Class is loaded for the security. But i haven't \nfound it yet.", "id": 55138, "time": "2004-04-02T10:19:59Z", "creator": "bugzilla@gehmtec.de", "creation_time": "2004-04-02T10:19:59Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 28129, "text": "I've just deployed your apps and it works fine for me using j2se 1.4.2_02. Your\nwar also deploy fine in SJS AS 8 PE, and it works fine :-). \n\nINFO: Installing web application at context path /securitytest from URL\nfile:/src/jakarta-tomcat-5/build/webapps/securitytest\nApr 2, 2004 10:36:28 AM org.apache.commons.beanutils.MethodUtils\ngetMatchingAccessibleMethod\nWARNING: Cannot use JVM pre-1.4 access bug workaround die to restrictive\nsecurity manager.\n\nBTW, you should not bundle the Xerces jar file under /lib. Those will be ignored\nby the Tomcat classloader.\n\nMaybe that's because you are using an IBM product ;-) Try to use another VM to\nsee if it fixes the problem. But this is clearly not a Tomcat bug.\n\n-- Jeanfrancois", "id": 55168, "time": "2004-04-02T15:38:25Z", "creator": "jfarcand@apache.org", "creation_time": "2004-04-02T15:38:25Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "bugzilla@gehmtec.de", "is_private": false, "text": "Hmmm, i just tested everything on a clean WinXP machine. Installed j2sdk1.4.\n2_04, Tomcat 5.0.19, MySql 4.0.17, removed from the webapp the Xerces.jar, \nremoved the two IBM Files, copied mysql-connector-java-3.0.10-stable-bin.jar and \ntools.jar (Tomcat said it needs for compilation, but was not installed in the \njava 1.4.2_04 ?) into common/lib and i still get this [Fatal Error] bAVTree.xml:\n9:63: The element type \"input\" must be terminated by the matching end-tag \n\"</input>\".\n\nSo you have tested my application and you've got the \n\"Alles OK. Everything perfect.\" message after the Security Login from Tomcat and \nthe additional submit ???\n\nWhen i remove the security-contraint from the web.xml, everything works. So for \nme its still a Tomcat problem, cause this security-thing is a Tomcat Feature, \nand its not compatible with my app.", "id": 55292, "time": "2004-04-05T09:52:37Z", "bug_id": 28129, "creation_time": "2004-04-05T09:52:37Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "Eh forget my note about the tools.jar,in a hurry i just clicked, when Tomcat has \nasked me about the java-path, and by default it uses the C:\\Program..\\j2re not \nthe path to the sdk.", "attachment_id": null, "id": 55293, "creator": "bugzilla@gehmtec.de", "time": "2004-04-05T10:25:29Z", "bug_id": 28129, "creation_time": "2004-04-05T10:25:29Z", "is_private": false}, {"count": 6, "tags": [], "creator": "jfarcand@apache.org", "attachment_id": null, "text": "When do you get the exception? When you deploy the application or when you\nexecute it? I've try under red hat 8.0, and everythings works fine (no exception\ntrace). Ca you try to do a minimal test case that shows the failure? I can try\nto find a win2k machine....\n\nThanks\n\n-- Jeanfrancois", "id": 55323, "time": "2004-04-05T14:49:00Z", "bug_id": 28129, "creation_time": "2004-04-05T14:49:00Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 28129, "text": "I get the message when i execute the webapp. Deployment works fine. Tomorrow \ni'll try to build a smaller testcase directly in one jsp without the whole \nstruts stuff. Unfortunately i don't have any working linux machine to test.", "id": 55327, "time": "2004-04-05T15:48:38Z", "creator": "bugzilla@gehmtec.de", "creation_time": "2004-04-05T15:48:38Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 28129, "attachment_id": null, "is_private": false, "id": 55368, "time": "2004-04-06T08:32:26Z", "creator": "bugzilla@gehmtec.de", "creation_time": "2004-04-06T08:32:26Z", "text": "I tested some more, and i'm somehow a little bit stupid.\nThe problem is that i try to load the xml as URL (http://...) , which doesn't \nwork because the URL is secured via the security-constraint and the Parser has \nno access to the xml, and tries to parse the login2.jsp, which in this case \nisn't a valid xml and he throws the Fatal Error. So its not a real bug, but now \nthe question is, how can i give the Parser a role to get the access to the xml \nvia URL ?"}]