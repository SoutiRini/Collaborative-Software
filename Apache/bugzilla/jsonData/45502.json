[{"count": 0, "attachment_id": null, "creator": "gmournos@yahoo.com", "is_private": false, "id": 119115, "time": "2008-07-30T04:05:28Z", "bug_id": 45502, "creation_time": "2008-07-30T04:05:28Z", "tags": [], "text": "Http Sampler multipart posts the same file all the time.\nThat is, if the same user wants to submit files f1, f2, f3 ... using the same http sampler in a loop with a counter, the first file (i.e f1) always gets submitted.\n\nlooking at the code of org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase method getHTTPFiles caches the filelist it submits. It seems that for this reason the list of files doesnt get evaluated for every loop, but evaluates always to {f1}\n\n    public HTTPFileArg[] getHTTPFiles() {\n        if (fileList != null){\n            return fileList;\n        }"}, {"count": 1, "tags": [], "creator": "gmournos@yahoo.com", "attachment_id": 22338, "id": 119180, "time": "2008-07-31T05:43:06Z", "bug_id": 45502, "creation_time": "2008-07-31T05:43:06Z", "is_private": false, "text": "Created attachment 22338\nsample test case\n\nThis test should multipart upload files C:\\Reach_StressTest2\\additional\\bulk_pre_reg1.xml and \nC:\\Reach_StressTest2\\additional\\bulk_pre_reg2.xml to www.google.com\n\nHowever, it always submits C:\\Reach_StressTest2\\additional\\bulk_pre_reg1.xml\n\nForm field body:form:dossierFilename reflects the new file (gets correctly refreshed), but the file is the old one"}, {"count": 2, "tags": [], "creator": "gmournos@yahoo.com", "text": "a quick fix is to make fileList null after each sample...This worked for me...", "id": 119220, "time": "2008-08-01T01:16:46Z", "bug_id": 45502, "creation_time": "2008-08-01T01:16:46Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "I think this was fixed as part of:\n\nURL: http://svn.apache.org/viewvc?rev=697636&view=rev\nLog:\nHTTPSamplers can now use variables in POSTed file names\n\n\nIf not, please re-open", "attachment_id": null, "id": 120857, "creator": "sebb@apache.org", "time": "2008-09-22T12:49:52Z", "bug_id": 45502, "creation_time": "2008-09-22T12:49:52Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 45502, "attachment_id": null, "text": "It is a bug.\n\nIndeed variables are used. But the variables get resolved to values only the first time the sampler is used.\nSo if the sampler is used in a loop it keeps resending the same files because the variables dont refresh their values...\n\nA quick fix is to nulify internal variable filelist after method sample. This way the list of files gets recalculated in the next step of the loop...\n\nI have attached a test case which exactly shows the problem.\n", "id": 120863, "time": "2008-09-23T01:20:59Z", "creator": "gmournos@yahoo.com", "creation_time": "2008-09-23T01:20:59Z", "is_private": false}, {"count": 5, "tags": [], "text": "Ps: The link you have sent is broken (?????)", "attachment_id": null, "id": 120864, "creator": "gmournos@yahoo.com", "time": "2008-09-23T01:22:55Z", "bug_id": 45502, "creation_time": "2008-09-23T01:22:55Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 45502, "attachment_id": null, "text": "It *is* fixed in the latest SVN - I've just tried the example.\n\nYou'll need to download the current nightly (or build from SVN trunk yourself).\n\nBTW, SVN was down for a while - it's back now - which is why the link did not work.", "id": 120866, "time": "2008-09-23T02:59:08Z", "creator": "sebb@apache.org", "creation_time": "2008-09-23T02:59:08Z", "is_private": false}]