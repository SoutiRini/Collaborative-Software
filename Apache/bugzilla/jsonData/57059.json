[{"count": 0, "tags": [], "text": "In catalina.sh, to start the JVM, this is what is being done:\n\n\neval exec \"\\\"$_RUNJAVA\\\"\" \"\\\"$LOGGING_CONFIG\\\"\" $LOGGING_MANAGER $JAVA_OPTS $CATALINA_OPTS \\\n      -Djava.endorsed.dirs=\"\\\"$JAVA_ENDORSED_DIRS\\\"\" -classpath \"\\\"$CLASSPATH\\\"\" \\\n      -Dcatalina.base=\"\\\"$CATALINA_BASE\\\"\" \\\n      -Dcatalina.home=\"\\\"$CATALINA_HOME\\\"\" \\\n      -Djava.io.tmpdir=\"\\\"$CATALINA_TMPDIR\\\"\" \\\n      org.apache.catalina.startup.Bootstrap \"$@\" start\n\n\nBasically, while starting the JVM, JAVA_OPTS are passed after the LOGGING_CONFIG and LOGGING_MANAGER variables. \n\nIn our case, we set JAVA_OPTS one of which is used to identify our process.\n\nBut on solaris, \n\n/usr/bin/ps auxwww is truncating entries in the process table details and hence we're not able to distinguish our process from other processes.\n\n\nOn Windows, the catalina.bat has \n\nset JAVA_OPTS=%JAVA_OPTS% %LOGGING_CONFIG%\nset JAVA_OPTS=%JAVA_OPTS% %LOGGING_MANAGER%\n\nwhere while starting the JVM , JAVA_OPTS is the first parameter passed to it.\n\nWhy similar changes haven't been done in catalina.sh where JAVA_OPTS remains the third option passed ?\n\nIf both catalina.sh and catalina.bat be made consistent where JAVA_OPTS is the first parameter passed while starting JVM, the problem of identifying the process name on Solaris would go away despite the truncation that happens for Solaris proc table entries.", "attachment_id": null, "id": 178301, "creator": "amit_pande@symantec.com", "time": "2014-10-06T06:20:14Z", "bug_id": 57059, "creation_time": "2014-10-06T06:20:14Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 57059, "text": "Using a value inserted in JAVA_OPTS is, as you have discovered, a fragile solution. If we were to make the change you suggest the chances are that someone else who is inserting similar information in LOGGING_CONFIG will complain.\n\nThe chances are that there is a better solution for the problem you are trying to solve. The users mailing list is the best place to get advice on this.\n\nAs for why there are differences bewteen .sh and .bat, you can see the hsitory for both those files in svn.", "id": 178305, "time": "2014-10-06T13:12:13Z", "creator": "markt@apache.org", "creation_time": "2014-10-06T13:12:13Z", "is_private": false, "attachment_id": null}, {"id": 178369, "tags": [], "bug_id": 57059, "attachment_id": null, "count": 2, "text": "(In reply to Amit Pande from comment #0)\n> But on solaris, /usr/bin/ps auxwww is truncating entries in the process\n> table details and hence we're not able to distinguish our process from\n> other processes.\n\nMaybe you just need more \"w\"s in your command. Head over to the users mailing list for other possible suggestions for identifying processes.", "time": "2014-10-09T14:53:33Z", "creator": "chris@christopherschultz.net", "creation_time": "2014-10-09T14:53:33Z", "is_private": false}]