[{"count": 0, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": 34765, "is_private": false, "id": 197140, "time": "2017-02-18T16:06:50Z", "bug_id": 60744, "creation_time": "2017-02-18T16:06:50Z", "text": "Created attachment 34765\nTest Plan to load and see effect\n\nHello,\nI noticed a strange behaviour of JMeter when you load a Test Plan.\n\nTry loading attached Test plan, you will notice that:\nIn 3.1, Implementation property of HTTP Request Defaults and HTTP-Request-XXX are in this order : Java, HttpClient3.1, HttpClient4\n\nOpen them in nightly build, as HttpClient3.1 has disappeared, you will get:\nJava, Java (BUG HERE, you should get ''), HttpClient4\n\n\nThe problem comes from the code:\nhttpImplementation.setSelectedItem(samplerBase.getPropertyAsString(HTTPSamplerBase.IMPLEMENTATION));\n\nsamplerBase.getPropertyAsString(HTTPSamplerBase.IMPLEMENTATION) => Returns HttpClient3.1 so as per setSelectedItem contract:\n\"If anObject is not in the list and the combo box is uneditable, it will not change the current selection\"\n\nSo what happens here is that you get the previous \"Java\" settings.\nNote that bug is really tricky as if first node is HttpClient4, then you will get HttpClient 4 instead of Java.\n\n\nThe fix would be here to add a call to clearGUI() in JMeterTreeModel#addComponent before calling guicomp.configure(component):\n\n- https://github.com/apache/jmeter/blob/trunk/src/core/org/apache/jmeter/gui/tree/JMeterTreeModel.java#L146\n\n\nBut I am not sure this cannot have undesired side effects."}, {"attachment_id": null, "tags": [], "bug_id": 60744, "text": "Author: pmouawad\nDate: Sat Feb 18 16:22:34 2017\nNew Revision: 1783569\n\nURL: http://svn.apache.org/viewvc?rev=1783569&view=rev\nLog:\nBug 60744 - GUI elements are not cleaned up when reused during load of Test Plan which can lead them to be partially initialized with a previous state for a new Test Element\nBugzilla Id: 60744\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/gui/tree/JMeterTreeModel.java\n    jmeter/trunk/xdocs/changes.xml", "count": 1, "id": 197141, "time": "2017-02-18T16:26:28Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-18T16:26:28Z", "is_private": false}]