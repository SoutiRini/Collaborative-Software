[{"count": 0, "tags": [], "creator": "trevor@vocaro.com", "attachment_id": null, "id": 49938, "time": "2004-01-01T19:29:11Z", "bug_id": 25856, "creation_time": "2004-01-01T19:29:11Z", "is_private": false, "text": "On line 122 of src/main/org/apache/tools/ant/taskdefs/compilers/Gcj.java, the\ndestination directory (destdir) is created by calling destdir.mkdirs(). The\nreturn value of mkdirs is checked, and if true, a BuildException is thrown. This\nis not the correct behavior because according to the Java docs for mkdirs (\nhttp://java.sun.com/j2se/1.4.2/docs/api/java/io/File.html#mkdirs() ), mkdirs\nreturns true if the directories are created; false otherwise. That means if\ndestdir does not exist, the Gcj task will create it and then promptly throw an\nexception.\n\nOn the other hand, if destdir already exists, then mkdirs will return false,\neven though it has completed successfully! And because destdir usually exists\nalready, the Gcj task does not throw an exception in the typical case. This is\nwhy the code cannot simply be changed to throw an exception on a false return\nvalue rather than true.\n\nThe proper fix is to call mkdirs if and only if the destdir does not exist (by\ncalling destdir.exists()). The task can then check the return value of mkdirs\nand throw an exception if it gets back false. This will give the desired\nbehavior of the task.\n\nBy the way, there is an unneeded semicolon on line 125."}, {"attachment_id": null, "tags": [], "bug_id": 25856, "text": "should be fixed, thanks.", "count": 1, "id": 51469, "time": "2004-01-30T14:45:51Z", "creator": "bodewig@apache.org", "creation_time": "2004-01-30T14:45:51Z", "is_private": false}]