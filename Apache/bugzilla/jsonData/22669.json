[{"count": 0, "text": "OS: Sun OS5.8, Sparc\nJBoss Version: 3.0.6\nLog4j version: log4j-1.2.8.jar and log4j-1.2\n\nException:\n15:00:36,457 ERROR [STDERR] java.lang.NoSuchMethodError:\norg.apache.log4j.spi.LoggingEvent.getLevel()Lorg/apache/log4j/Level;\n15:00:36,452 WARN  [Log4jServletTest] This is the warn message\n15:00:36,531 ERROR [STDERR]     at\ncom.webster.logaudit.TopicMDB.onMessage(TopicMDB.java:59)\n15:00:36,532 ERROR [STDERR]     at\nsun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n15:00:36,534 ERROR [STDERR]     at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n15:00:36,535 ERROR [STDERR]     at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n15:00:36,536 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:324)\n15:00:36,537 ERROR [STDERR]     at\norg.jboss.ejb.MessageDrivenContainer$ContainerInterceptor.invoke(MessageDrivenContainer.java:391)\n15:00:36,538 ERROR [STDERR]     at\norg.jboss.resource.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.java:186)\n15:00:36,540 ERROR [STDERR]     at\norg.jboss.ejb.plugins.MessageDrivenInstanceInterceptor.invoke(MessageDrivenInstanceInterceptor.java:88)\n15:00:36,541 ERROR [STDERR]     at\norg.jboss.ejb.plugins.AbstractTxInterceptor.invokeNext(AbstractTxInterceptor.java:107)\n15:00:36,542 ERROR [STDERR]     at\norg.jboss.ejb.plugins.TxInterceptorCMT.runWithTransactions(TxInterceptorCMT.java:228)\n15:00:36,543 ERROR [STDERR]     at\norg.jboss.ejb.plugins.TxInterceptorCMT.invoke(TxInterceptorCMT.java:92)\n15:00:36,545 ERROR [STDERR]     at\norg.jboss.ejb.plugins.RunAsSecurityInterceptor.invoke(RunAsSecurityInterceptor.java:100)\n15:00:36,546 ERROR [STDERR]     at\norg.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:204)\n15:00:36,547 ERROR [STDERR]     at\norg.jboss.ejb.MessageDrivenContainer.invoke(MessageDrivenContainer.java:302)\n15:00:36,548 ERROR [STDERR]     at\norg.jboss.ejb.plugins.jms.JMSContainerInvoker.invoke(JMSContainerInvoker.java:962)\n15:00:36,549 ERROR [STDERR]     at\norg.jboss.ejb.plugins.jms.JMSContainerInvoker$MessageListenerImpl.onMessage(JMSContainerInvoker.java:1038)\n15:00:36,551 ERROR [STDERR]     at\norg.jboss.jms.asf.StdServerSession.onMessage(StdServerSession.java:243)\n15:00:36,552 ERROR [STDERR]     at\norg.jboss.mq.SpyMessageConsumer.sessionConsumerProcessMessage(SpyMessageConsumer.java:603)\n15:00:36,570 ERROR [STDERR]     at\norg.jboss.mq.SpyMessageConsumer.addMessage(SpyMessageConsumer.java:417)\n15:00:36,571 ERROR [STDERR]     at org.jboss.mq.SpySession.run(SpySession.java:296)\n15:00:36,573 ERROR [STDERR]     at\norg.jboss.jms.asf.StdServerSession.run(StdServerSession.java:178)\n15:00:36,574 ERROR [STDERR]     at\nEDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(PooledExecutor.java:642)\n15:00:36,575 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:536)\n15:00:36,576 ERROR [STDERR] java.lang.NoSuchMethodError:\norg.apache.log4j.spi.LoggingEvent.getLevel()Lorg/apache/log4j/Level;\n15:00:36,579 ERROR [STDERR]     at\ncom.webster.logaudit.TopicMDB.onMessage(TopicMDB.java:59)\n15:00:36,584 ERROR [STDERR]     at\nsun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n15:00:36,585 ERROR [STDERR]     at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n15:00:36,587 ERROR [STDERR]     at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n15:00:36,588 ERROR [STDERR]     at java.lang.reflect.Method.invoke(Method.java:324)\n15:00:36,589 ERROR [STDERR]     at\norg.jboss.ejb.MessageDrivenContainer$ContainerInterceptor.invoke(MessageDrivenContainer.java:391)\n15:00:36,591 ERROR [STDERR]     at\norg.jboss.resource.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.java:186)\n15:00:36,592 ERROR [STDERR]     at\norg.jboss.ejb.plugins.MessageDrivenInstanceInterceptor.invoke(MessageDrivenInstanceInterceptor.java:88)\n15:00:36,593 ERROR [STDERR]     at\norg.jboss.ejb.plugins.AbstractTxInterceptor.invokeNext(AbstractTxInterceptor.java:107)\n15:00:36,594 ERROR [STDERR]     at\norg.jboss.ejb.plugins.TxInterceptorCMT.runWithTransactions(TxInterceptorCMT.java:228)\n15:00:36,596 ERROR [STDERR]     at\norg.jboss.ejb.plugins.TxInterceptorCMT.invoke(TxInterceptorCMT.java:92)\n15:00:36,597 ERROR [STDERR]     at\norg.jboss.ejb.plugins.RunAsSecurityInterceptor.invoke(RunAsSecurityInterceptor.java:100)\n15:00:36,615 ERROR [STDERR]     at\norg.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:204)\n15:00:36,616 ERROR [STDERR]     at\norg.jboss.ejb.MessageDrivenContainer.invoke(MessageDrivenContainer.java:302)\n15:00:36,618 ERROR [STDERR]     at\norg.jboss.ejb.plugins.jms.JMSContainerInvoker.invoke(JMSContainerInvoker.java:962)\n15:00:36,619 ERROR [STDERR]     at\norg.jboss.ejb.plugins.jms.JMSContainerInvoker$MessageListenerImpl.onMessage(JMSContainerInvoker.java:1038)\n15:00:36,620 ERROR [STDERR]     at\norg.jboss.jms.asf.StdServerSession.onMessage(StdServerSession.java:243)\n15:00:36,622 ERROR [STDERR]     at\norg.jboss.mq.SpyMessageConsumer.sessionConsumerProcessMessage(SpyMessageConsumer.java:603)\n15:00:36,623 ERROR [STDERR]     at\norg.jboss.mq.SpyMessageConsumer.addMessage(SpyMessageConsumer.java:417)\n15:00:36,624 ERROR [STDERR]     at org.jboss.mq.SpySession.run(SpySession.java:296)\n15:00:36,625 ERROR [STDERR]     at\norg.jboss.jms.asf.StdServerSession.run(StdServerSession.java:178)\n15:00:36,627 ERROR [STDERR]     at\nEDU.oswego.cs.dl.util.concurrent.PooledExecutor$Worker.run(PooledExecutor.java:642)\n15:00:36,628 ERROR [STDERR]     at java.lang.Thread.run(Thread.java:536)\n\n\n\nHere's how I get the logger and send messages:\norg.apache.log4j.Logger log4jLog = Logger.getLogger(Log4jServletTest.class);\nlog4jLog.debug(\"This is the debug message\");\nlog4jLog.warn(\"This is the warn message\");\nlog4jLog.info(\"This is the info message\");\n\n\n\nMethod in my MDB: LoggingEvent.getLevel()\nCode Snippet:\n/**********************************************************/\n else if (inMessage instanceof SpyObjectMessage) {\n    LoggingEvent event;\n    event =\n     (LoggingEvent) ((SpyObjectMessage) inMessage).getObject();\t\n    TestIUDDAO test = new TestIUDDAO();\n    test.execute(event.getMessage().toString());\t\t\t\t\n    System.out.println(\"event Audit Message: \" + event.getMessage() + \" level: \"\n+ event.getLevel());\n/**********************************************************/\n\nMehod event.getMessage() works fine, but when I add event.getLevel(), it throws\nan exception. So without getLevel() everything works normal.\n\n\n\n\nDetailed usage:\nI am using JMS Appender which works great. But when I try to get\nLoggingEvent.getLevel() in my Message Driven Bean, it get an error. I get the\nsame error when trying LoggingEvent.getLogger().\n\nThanks for you support in advance.", "bug_id": 22669, "is_private": false, "id": 43187, "time": "2003-08-22T19:14:34Z", "creator": "amish_cs@yahoo.com", "creation_time": "2003-08-22T19:14:34Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 22669, "is_private": false, "text": "\n\nThe LoggingEvent getLevel method was added on 2002-07-31, over a year ago, in \nlog4j 1.2.6. If you mix log4j versions, as you seem to be doing, then such \nproblems can happen.\n\nUsing only log4j 1.2.8 throughout your system should solve the problem.\n\nPlease do not hesitate to re-open this report if the above does not solve the \nproblem.\n", "id": 43192, "time": "2003-08-23T11:03:37Z", "creator": "ceki@apache.org", "creation_time": "2003-08-23T11:03:37Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 22669, "attachment_id": null, "is_private": false, "id": 43267, "time": "2003-08-25T20:07:47Z", "creator": "amish_cs@yahoo.com", "creation_time": "2003-08-25T20:07:47Z", "text": "Thanks, Ceki. You are right, I think log4j-boot.jar is the culprint in jboss3.0.\nI replaced all log versions with 1.2.8, it would still give the error from my \nTopicMDB.class. So adding the classpath for log4j-1.2.8 in run.sh of jboss \nsolved the problem. \nThanks alot for your quick reply and sorry to put it as a bug. It should be a \nconfiguration issue. Log4j is awesome....but I think jboss is make it more \ncomplicated."}]