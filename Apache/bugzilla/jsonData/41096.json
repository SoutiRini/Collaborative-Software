[{"count": 0, "tags": [], "bug_id": 41096, "attachment_id": null, "is_private": false, "id": 96459, "time": "2006-12-01T08:55:14Z", "creator": "rcolmegna@tiscali.it", "creation_time": "2006-12-01T08:55:14Z", "text": "Hi,\n\nI'm trying to secure a Tomcat installation with javamail in ./shared dir.\n\nI tried this code without any success:\ngrant codeBase \"file:${catalina.home}/shared/-\" {\n  permission java.lang.RuntimePermission \"accessClassInPackage.*\";\n  permission java.security.AllPermission;\n};\n\nI alway obtain this error:\n\njava.security.AccessControlException: access denied (java.lang.RuntimePermission\nacce\nssClassInPackage.sun.net.smtp)\n        at\njava.security.AccessControlContext.checkPermission(AccessControlContext.ja\nva:264)\n        at java.security.AccessController.checkPermission(AccessController.java:427)\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)\n        at java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1512)\n        at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:113)\n        at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:65)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n...."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 96467, "time": "2006-12-01T19:30:43Z", "bug_id": 41096, "creation_time": "2006-12-01T19:30:43Z", "is_private": false, "text": "Bugzilla is not a support forum. Please use the Tomcat users mailing list."}, {"count": 2, "text": "(In reply to comment #1)\n> Bugzilla is not a support forum. Please use the Tomcat users mailing list.\n\nSorry but javamail 1.4 is the only libs which seem to not works properly with\ncatalina/security model. Why this is a support problem?", "bug_id": 41096, "is_private": false, "id": 96470, "time": "2006-12-02T02:16:51Z", "creator": "rcolmegna@tiscali.it", "creation_time": "2006-12-02T02:16:51Z", "tags": [], "attachment_id": null}, {"count": 3, "text": "99.9% of all security manager issues are configuration problems, not bugs. In\nthis case all the information provided points to a configuration issue, hence\nthe pointer to the users list.\n\nFurther, no information has been provided that would enable this issue to be\nreproduced.\n\nFinally, a quick test this morning shows, as expected, that with JavaMail in\nshared/lib and the default catalina.security policy the only additional\npermission required to send mail is:\n\ngrant codeBase \"file:${catalina.home}/webapps/bugs/-\" {\n     permission java.net.SocketPermission \"mailhost:25\", \"connect\";\n};", "bug_id": 41096, "is_private": false, "id": 96471, "time": "2006-12-02T09:11:22Z", "creator": "markt@apache.org", "creation_time": "2006-12-02T09:11:22Z", "tags": [], "attachment_id": null}, {"count": 4, "text": "Sorry, missed a permission. You also need:\n\ngrant codeBase \"file:${catalina.home}/shared/lib/-\" {\n     permission java.net.SocketPermission \"mailhost:25\", \"connect\";\n};", "bug_id": 41096, "is_private": false, "id": 96474, "time": "2006-12-02T09:28:05Z", "creator": "markt@apache.org", "creation_time": "2006-12-02T09:28:05Z", "tags": [], "attachment_id": null}, {"count": 5, "text": "Thanks for your replies. I have added the suggested config-lines WITHOUT\nsuccessful results.\n\nThe second line you suggest isn't useful in my case because I have a \n\"can't access to class\" error, and not a \"javamail can't connect\".\n\nI'm at your disposition for every test.\n\nThanks for your time.\nRoberto Colmegna", "bug_id": 41096, "is_private": false, "id": 96477, "time": "2006-12-03T02:38:47Z", "creator": "rcolmegna@tiscali.it", "creation_time": "2006-12-03T02:38:47Z", "tags": [], "attachment_id": null}, {"count": 6, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 96481, "time": "2006-12-03T07:51:44Z", "bug_id": 41096, "creation_time": "2006-12-03T07:51:44Z", "is_private": false, "text": "As I stated previously, Bugzilla is not a support forum. You need to use the\nusers list."}]