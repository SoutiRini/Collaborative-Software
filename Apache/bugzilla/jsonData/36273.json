[{"count": 0, "tags": [], "bug_id": 36273, "attachment_id": null, "id": 78699, "creation_time": "2005-08-19T14:57:16Z", "time": "2005-08-19T14:57:16Z", "creator": "felix.roethenbacher@wyona.com", "text": "JCR allows to import/export the repository content in XML format (system view).\nThe classes/patches attached add an admin tab and a usecase for\nimporting/exporting repository content.\n\nIt may be useful to add a XML export of the standard publications to subversion\nfor easy repository population.", "is_private": false}, {"count": 1, "tags": [], "creator": "felix.roethenbacher@wyona.com", "text": "Created attachment 16113\nDiff of existing files.", "id": 78700, "time": "2005-08-19T14:58:20Z", "bug_id": 36273, "creation_time": "2005-08-19T14:58:20Z", "is_private": false, "attachment_id": 16113}, {"count": 2, "tags": [], "bug_id": 36273, "attachment_id": 16114, "id": 78701, "creation_time": "2005-08-19T15:01:51Z", "time": "2005-08-19T15:01:51Z", "creator": "felix.roethenbacher@wyona.com", "text": "Created attachment 16114\nNew JCR import classes.\n\ntar -xzf in Lenya directory.", "is_private": false}, {"count": 3, "tags": [], "creator": "andreas@apache.org", "attachment_id": null, "id": 78705, "time": "2005-08-19T15:16:49Z", "bug_id": 36273, "creation_time": "2005-08-19T15:16:49Z", "is_private": false, "text": "Why did this require changes to the core (especially global-sitemap.xmap)?\nIf the usecase framework isn't capable of this, I guess we have to improve it."}, {"count": 4, "tags": [], "bug_id": 36273, "attachment_id": null, "id": 78706, "creation_time": "2005-08-19T15:49:13Z", "time": "2005-08-19T15:49:13Z", "creator": "felix.roethenbacher@wyona.com", "text": "First, I tried to use the jcr 'publet' for the import/export functionality.\nUnfortunately, it was neither possible to add an admin tab nor to access a\npublet's sitemap through the browser indepentently of a publication for data\ngeneration. Additionally, I see some problems with access rights, as a\nrepository export/import should be reserved to administrators. How are\naccessrights managed on the (standalone) publet level?\n\nAfter it has proven impossible (at least to me) to code the import/export\nfunctionality as a publet, I decided to start moving the import/export to the\ncore. It seems to me that the core is the right place for such a fundamental\noperation as a repository export/import is.", "is_private": false}, {"count": 5, "tags": [], "creator": "andreas@apache.org", "text": "> First, I tried to use the jcr 'publet' for the import/export functionality.\n> Unfortunately, it was neither possible to add an admin tab\n\nGood point. I already thought a lot about this and didn't find a reasonable\nsolution. But IMO the issue should be addressed separately.\n\n> nor to access a\n> publet's sitemap through the browser indepentently of a publication\n> for data generation.\n\nWhat do you mean with \"through the browser\"? BTW, I didn't find any JX templates\nin your patch, maybe that would clarify this ...\n\n\n> Additionally, I see some problems with access rights, as a\n> repository export/import should be reserved to administrators.\n> How are accessrights managed on the (standalone) publet level?\n\nThat's handled at usecase level for each publication (UsecasePolicyManager)\n\n\n> After it has proven impossible (at least to me) to code the import/export\n> functionality as a publet, I decided to start moving the import/export to the\n> core. It seems to me that the core is the right place for such a fundamental\n> operation as a repository export/import is.\n\nOK, but that's another discussion. The decision to put functionality in a module\nshould not depend on the capabilites of the usecase framework. Modules should be\nable to provide usecases like this one. If they aren't, the architecture has to\nbe improved.\n", "id": 78709, "time": "2005-08-19T16:06:09Z", "bug_id": 36273, "creation_time": "2005-08-19T16:06:09Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "felix.roethenbacher@wyona.com", "text": "(In reply to comment #5)\n> > First, I tried to use the jcr 'publet' for the import/export functionality.\n> > Unfortunately, it was neither possible to add an admin tab\n> \n> Good point. I already thought a lot about this and didn't find a reasonable\n> solution. But IMO the issue should be addressed separately.\n> \n> > nor to access a\n> > publet's sitemap through the browser indepentently of a publication\n> > for data generation.\n> \n> What do you mean with \"through the browser\"?\n\nUsually, publets are embedded in publication's and may use the publication URL\nspace, but a 'stand-alone' publet is not and needs some way to access its own\nsitemap. E.g.\n\nhttp://localhost:8888/publet/jcr/test.xml\n\nBut may be a (download) usecase can be used for that, too.\n\n> BTW, I didn't find any JX templates\n> in your patch, maybe that would clarify this ...\n> \n\nIt comes with the new classes, zipped.\n\n> \n> > Additionally, I see some problems with access rights, as a\n> > repository export/import should be reserved to administrators.\n> > How are accessrights managed on the (standalone) publet level?\n> \n> That's handled at usecase level for each publication (UsecasePolicyManager)\n> \n> \n> > After it has proven impossible (at least to me) to code the import/export\n> > functionality as a publet, I decided to start moving the import/export to the\n> > core. It seems to me that the core is the right place for such a fundamental\n> > operation as a repository export/import is.\n> \n> OK, but that's another discussion. The decision to put functionality in a module\n> should not depend on the capabilites of the usecase framework. Modules should be\n> able to provide usecases like this one. If they aren't, the architecture has to\n> be improved.\n> \n\n+1\n", "id": 78710, "time": "2005-08-19T16:43:37Z", "bug_id": 36273, "creation_time": "2005-08-19T16:43:37Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "creator": "andreas@apache.org", "text": "I have committed the code (with some minor modifications) to the JCR module.\n\nIt is not yet accessible via an admin tab, so you have to call\n\nhttp://localhost:8888/default/authoring/index.html?lenya.usecase=jcr.importExport\n\n\nI hope the usecase framework will soon be able to manage non-predefined tabs for\nthe admin and site area (for instance by dynamically generating the tabs).", "id": 78714, "time": "2005-08-19T18:13:11Z", "bug_id": 36273, "creation_time": "2005-08-19T18:13:11Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "creator": "andreas@apache.org", "attachment_id": null, "id": 78811, "time": "2005-08-22T15:38:11Z", "bug_id": 36273, "creation_time": "2005-08-22T15:38:11Z", "is_private": false, "text": "It is now possible to add tabs to the admin and site area. I changed the\njcr.importExport usecase to be displayed on an admin area tab."}, {"count": 9, "tags": [], "bug_id": 36273, "attachment_id": null, "id": 78974, "creation_time": "2005-08-25T11:13:16Z", "time": "2005-08-25T11:13:16Z", "creator": "felix.roethenbacher@wyona.com", "text": "Cool, thanks!", "is_private": false}]