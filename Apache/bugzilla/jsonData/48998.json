[{"count": 0, "tags": [], "bug_id": 48998, "text": "Created attachment 25189\nPort of mod_expires as ExpiresFilter\n\nHere is a proposal to port Apache Httpd mod_expires in java as ExpiresFilter, a standard Servlet Filter.\n\nI detailed a standalone version on http://code.google.com/p/xebia-france/wiki/ExpiresFilter . More over, I tried my best to provide very detailed javadocs and docs (in filter.html).\n\nThe proposed contribution is slightly different because it uses Tomcat logging, few Servlet 3 enhancements and test cases use Tomcat engine.\n\nThe attached patch contains :\n* ExpiresFilter.java : the Expires Filter\n* TestExpiresFilter : detailed test cases\n* filter.xml : doc updates\n\nThe filter has been optimized using a profiler and stress tested with Apache Bench under high load.", "id": 135677, "attachment_id": 25189, "creator": "cleclerc@apache.org", "creation_time": "2010-03-26T16:38:18Z", "time": "2010-03-26T16:38:18Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 48998, "text": "Created attachment 25208\nPort of mod_expires as ExpiresFilter with optimized null checks\n\nThis patch slightly smaller than previous .patch file because the previous .patch file included twice TestExpiresFilter.java.\n\nChanges in this patch:\n* ExpiresFilter.java : reduce null checks for speed optimization,\n* filter.xml : add a comment in to warn users not to declare blank chars between ';' and 'charset=' for 'ExpiresByType' directives,\n* TestExpiresFilter.java : narrow the precision interval in cache-control checks.", "id": 135766, "time": "2010-03-29T18:17:29Z", "creator": "cleclerc@apache.org", "creation_time": "2010-03-29T18:17:29Z", "is_private": false, "attachment_id": 25208}, {"count": 2, "tags": [], "bug_id": 48998, "text": "why not use http://tuckey.org/urlrewrite/ ? it can do this and many other things...", "id": 135769, "attachment_id": null, "creator": "slaurent@apache.org", "creation_time": "2010-03-29T18:40:43Z", "time": "2010-03-29T18:40:43Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 48998, "text": "(In reply to comment #2)\n> why not use http://tuckey.org/urlrewrite/ ? it can do this and many other\n> things...\n\nMy understanding is that the UrlRewriteFilter can add response headers (e.g. 'Expires' and 'Cache-Control') according to request attributes like a URI pattern (e.g. *.html).\n\nHowever, I don't see how I could express something like \"if the response content type is 'application/rss+xml' and if no expiration header has been defined, then add an expiration of 5 minutes\".\n\nA challenge I see in this kind of feature is to apply the expiration-header-generation logic just before the servlet engine starts to write in the response body in the socket.", "id": 135771, "time": "2010-03-29T19:02:39Z", "creator": "cleclerc@apache.org", "creation_time": "2010-03-29T19:02:39Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 48998, "attachment_id": null, "text": "Thanks for the patch. I have applied it to trunk and it will be included in 7.0.1 onwards.\n\nI did make a few changes:\n- fixed various Eclipse warnings\n- removed the active option", "id": 138432, "time": "2010-07-14T18:16:23Z", "creator": "markt@apache.org", "creation_time": "2010-07-14T18:16:23Z", "is_private": false}]