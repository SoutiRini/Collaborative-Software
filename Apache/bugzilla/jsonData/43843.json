[{"count": 0, "tags": [], "text": "When building apr without specifying CFLAGS, flags '-g -O2' are added to\nEXTRA_CFLAGS (and can be latter retrived using apr-1-config with apr-1-config\n--cflags).\n\nThis is troublesome because you to add to filter these options when you want to\nbuild a non-optimized version of your program linked with apr.\n\nAfter digging a bit, it seems that these flags are added by the AC_PROG_CC macro\nin configure.in which checks the compiler to use and add these two flags into\nthe CFLAGS variable. Because the environment is stored before this check, they\nare not removed at the end of the configure script by the\nAPR_RESTORE_THE_ENVIRONMENT", "is_private": false, "bug_id": 43843, "id": 110425, "time": "2007-11-12T06:13:19Z", "creator": "laurent.goujon@online.fr", "creation_time": "2007-11-12T06:13:19Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "jorton@redhat.com", "is_private": false, "count": 1, "id": 110473, "time": "2007-11-13T04:07:30Z", "bug_id": 43843, "creation_time": "2007-11-13T04:07:30Z", "text": "This is correct and expected behaviour.  Pass some other CFLAGS setting to\nconfigure if you want something else; e.g. configure CFLAGS=\"-O0 -g\""}, {"count": 2, "tags": [], "text": "I quite disagree with you but perhaps I'm all wrong. To my understanding\napr-1-config returns flags needed by the application to compile, build, etc with apr\n\n$ apr-1-config --help\n...\nAn application should use the results of --cflags, --cppflags, --includes,\nand --ldflags in their build process.\n\nBut \"-g -02\" are not that needed. I can compile apr with default flags (-g -O2)\nand compile my own program without optimization or debugging enabled, do I ?", "is_private": false, "bug_id": 43843, "id": 110476, "time": "2007-11-13T05:17:34Z", "creator": "laurent.goujon@online.fr", "creation_time": "2007-11-13T05:17:34Z", "attachment_id": null}]