[{"count": 0, "tags": [], "creator": "cstaylor@nanshu.com", "is_private": false, "id": 48068, "attachment_id": null, "bug_id": 24961, "creation_time": "2003-11-25T03:55:12Z", "time": "2003-11-25T03:55:12Z", "text": "I've written a simple JSP to illustrate:\n\n<%@ page contentType=\"text/html;charset=UTF-8\" session=\"false\" \nimport=\"java.io.*\"%>\n<% \n\tServletContext servlet_ctxt = getServletContext();\n\tFile temp_directory = (File)servlet_ctxt.getAttribute\n( \"javax.servlet.context.tempdir\" );\n\tFile new_temp_file = File.createTempFile ( \"test\", \"file\", \ntemp_directory );\n\tnew_temp_file.deleteOnExit();\n%>\n\nJust make this available to Tomcat, run Tomcat as a console app, and when you \nCTRL-C to quit Tomcat, those files will disappear.\n\nHowever, do the exact same thing using Tomcat as a service, and when you \"net \nstop Apache Tomcat 4.1\", those files will still exist.\n\nI've found a workaround for my particular use of temp files, but I think that \nit would be best if this was fixed.  I believe the issue relates to how \ntomcat.exe is killing the Java process, but I'm not entirely sure."}, {"count": 1, "tags": [], "text": "File.deleteOnExit() is entirely the responsibility of the JVM. Tomcat has \nnothing to do with this.\n\nI have checked the spec and it states the the files will only be deleted if \nthe JVM exits normally. I agree that the way tomcat.exe stops the JVM is the \nmost likely cause. Tomcat.exe is actually JavaService, a non-Apache OSS \nwrapper. I am afraid this is a WONTFIX as the source is outside of our control.\n\nSee bug 22992 for some alternative options.", "is_private": false, "bug_id": 24961, "id": 48217, "time": "2003-11-26T23:27:38Z", "creator": "medthomas@ntlworld.com", "creation_time": "2003-11-26T23:27:38Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "cstaylor@nanshu.com", "attachment_id": null, "text": "Are there any plans for getting the commons-daemon launcher into a future \nversion of the 4.1.X series?  If I were to do it, would it be accepted into \nthe tree?", "id": 48230, "time": "2003-11-27T04:33:38Z", "bug_id": 24961, "creation_time": "2003-11-27T04:33:38Z", "is_private": false}, {"count": 3, "tags": [], "creator": "cstaylor@nanshu.com", "is_private": false, "id": 48231, "attachment_id": null, "bug_id": 24961, "creation_time": "2003-11-27T04:33:59Z", "time": "2003-11-27T04:33:59Z", "text": "Are there any plans for getting the commons-daemon launcher into a future \nversion of the 4.1.X series?  If I were to do it, would it be accepted into \nthe tree?"}, {"count": 4, "tags": [], "text": "The commons-daemon procrun launcher should work fine with TC 4.1.x.  If you \ncan document your steps, I could even add it to the TC 4.1.x docs :).", "attachment_id": null, "bug_id": 24961, "id": 48232, "time": "2003-11-27T06:10:58Z", "creator": "william.barker@wilshire.com", "creation_time": "2003-11-27T06:10:58Z", "is_private": false}]