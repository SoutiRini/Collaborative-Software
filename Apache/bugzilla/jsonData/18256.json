[{"count": 0, "tags": [], "text": "If Java is installed in directory that contains spaces (e.g. D:\\Program \nFiles\\j2sdk1.4.1), ant cannot run cause main class cannot be found.\nDuring call to lcp.bat instead if only %%i, \"%%i\" should be used.\n\nCorrected extract of ant.bat:\n:checkJava\nset _JAVACMD=%JAVACMD%\nset LOCALCLASSPATH=%CLASSPATH%\nfor %%i in (\"%ANT_HOME%\\lib\\*.jar\") do call \"%ANT_HOME%\\bin\\lcp.bat\" \"%%i\"", "is_private": false, "bug_id": 18256, "id": 33653, "time": "2003-03-23T10:01:36Z", "creator": "igor.lastric@freesurf.ch", "creation_time": "2003-03-23T10:01:36Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 18256, "attachment_id": 5469, "text": "Created attachment 5469\ncorrected ant.bat", "id": 33654, "time": "2003-03-23T10:17:03Z", "creator": "igor.lastric@freesurf.ch", "creation_time": "2003-03-23T10:17:03Z", "is_private": false}, {"count": 2, "tags": [], "creator": "igor.lastric@freesurf.ch", "is_private": false, "id": 33655, "attachment_id": null, "bug_id": 18256, "creation_time": "2003-03-23T10:20:20Z", "time": "2003-03-23T10:20:20Z", "text": "There are some other places where corrections should be done.\nDuring build of LOCALCLASSPATH every piece of it should be enclosed in quotes \nand at the end the whole should be used without quotes.\n\nSee attached ant.bat please.\n\nAnd I forgot before, thanks for the great work you all are dooing to give us \nsuch a powerfull tool.\n:)))))"}, {"count": 3, "tags": [], "creator": "igor.lastric@freesurf.ch", "attachment_id": 5470, "is_private": false, "id": 33656, "time": "2003-03-23T10:23:07Z", "bug_id": 18256, "creation_time": "2003-03-23T10:23:07Z", "text": "Created attachment 5470\nThe right version - sorry for the first one (stupid echo on and small diff at the and)"}, {"count": 4, "tags": [], "bug_id": 18256, "attachment_id": null, "text": "Works for me\n\nD:\\work\\projects\\clover>echo %JAVA_HOME%\nC:\\Program Files\\j2sdk1.4.1_01\n\nD:\\work\\projects\\clover>ant -version\nApache Ant version 1.6alpha compiled on March 27 2003\n\nWe've been through quite a few interations on this. Is your JAVA_HOME variable \nquoted - it should not be.", "id": 34001, "time": "2003-03-28T01:56:06Z", "creator": "conor@apache.org", "creation_time": "2003-03-28T01:56:06Z", "is_private": false}, {"count": 5, "tags": [], "creator": "igor.lastric@freesurf.ch", "attachment_id": null, "id": 34059, "creation_time": "2003-03-28T14:37:40Z", "time": "2003-03-28T14:37:40Z", "bug_id": 18256, "text": "It still doesn't work for me!\nI have also investigated a lot, and think the right solution is in quoting the \nsingle path elements while building the list. Quoting the finished list does \nnot help!\n\nMy settings:\nC:\\>echo %JAVA_HOME%\nD:\\Program Files\\j2sdk1.4.1\n\nC:\\>ant -version\nApache Ant version 1.5.2 compiled on February 28 2003\nC:\\>", "is_private": false}, {"count": 6, "tags": [], "bug_id": 18256, "attachment_id": null, "text": "What is not working? You originally said it reported  that the main class was not found yet your exmaple  clearly shows Ant running.  ", "id": 34060, "time": "2003-03-28T14:50:14Z", "creator": "conor@apache.org", "creation_time": "2003-03-28T14:50:14Z", "is_private": false}, {"count": 7, "tags": [], "creator": "igor.lastric@freesurf.ch", "attachment_id": null, "id": 34066, "time": "2003-03-28T15:05:26Z", "bug_id": 18256, "creation_time": "2003-03-28T15:05:26Z", "is_private": false, "text": "Well naturally it works, after I have applied the changes in antrun.bat.\nI have corrected it for me and thought it would be appreciated if I submit this \ncorrection, for the rest of comunity.\nIt would be also nice to find it in the next version and not have to reaply the \nchange every time."}, {"count": 8, "tags": [], "creator": "conor@apache.org", "attachment_id": null, "is_private": false, "id": 34157, "time": "2003-03-31T06:42:05Z", "bug_id": 18256, "creation_time": "2003-03-31T06:42:05Z", "text": "I understand. It is however, difficult for me to understand the problem unless\nyou can tell me what is happening. As I have shown it works for me out of the\nbox on Win2K without the changes you provided.\n\nWhilst the changes may work for you in your environment, I need to be sure it\nworks in all environments such as, for example, a Win98 users with classpaths\ncontaining spaces, ANT_HOME containing spaces and JAVA_HOME containing spaces,\netc, etc.\n\nI would like to understand, therefore, how the stock script fails in your\nenvironment. Thanks"}, {"count": 9, "tags": [], "bug_id": 18256, "attachment_id": null, "text": "Hi again, \n\nLike I wrote before instead of quoting whole result classpath single \ncomponents, that are concatenated should be quoted, then there will be no \nproblem independently of Windows version. \nBTW it's not windows having problem with classpath, but java classloader that \ndoesn't get the right path. Path should be determined by tokenizing the string \nthat is ; delimited and blanks should play no role, but, it's software like \nany other.\nPlease check results of commands here, I hope this will help to understand the \nproblem.\nI have restored old ant.bat and put echo on cmd just before runJavaCmd , so \nthat the problem becomes more visible.\n\n------------------- this is result of comands \nC:\\Documents and Settings\\u0ila>echo %JAVA_HOME%\nD:\\Program Files\\j2sdk1.4.1\n\nC:\\Documents and Settings\\u0ila>ant -version\n\nC:\\Documents and Settings\\u0ila>\"D:\\Program Files\\j2sdk1.4.1_01\\bin\\java.exe\" -\nc\nlasspath \"\"D:\\Program Files\\j2sdk1.4.1_01\\lib\\tools.jar\";D:\\Program \nFiles\\jakart\na-ant-1.5.1\\lib\\xml-apis.jar;D:\\Program Files\\jakarta-ant-1.5.1\n\\lib\\xercesImpl.j\nar;D:\\Program Files\\jakarta-ant-1.5.1\\lib\\optional.jar;D:\\Program \nFiles\\jakarta-\nant-1.5.1\\lib\\ant.jar;\" \"-Dant.home=D:\\Program Files\\jakarta-ant-1.5.1\"  \norg.apa\nche.tools.ant.Main -version\nException in thread \"main\" java.lang.NoClassDefFoundError: Files\\j2sdk1/4/1_01\n\\l\nib\\tools/jar;D:\\Program Files\\jakarta-ant-1/5/1\\lib\\xml-apis/jar;D:\\Program \nFile\ns\\jakarta-ant-1/5/1\\lib\\xercesImpl/jar;D:\\Program Files\\jakarta-ant-1/5/1\n\\lib\\op\ntional/jar;D:\\Program Files\\jakarta-ant-1/5/1\\lib\\ant/jar;", "id": 34436, "time": "2003-04-03T13:55:19Z", "creator": "igor.lastric@freesurf.ch", "creation_time": "2003-04-03T13:55:19Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 18256, "is_private": false, "text": "UUUPPSS\n\nOI just saw, I obviously didn't copy all, from the screen, as JAVA_HOME does \ndisplay whole string. here again the whole thing, hopefully correct :)\n\n\nC:\\Documents and Settings\\u0ila>echo %JAVA_HOME%\nD:\\Program Files\\j2sdk1.4.1_01\n\nC:\\Documents and Settings\\u0ila>ant -version\n\nC:\\Documents and Settings\\u0ila>\"D:\\Program Files\\j2sdk1.4.1_01\\bin\\java.exe\" -\nc\nlasspath \"\"D:\\Program Files\\j2sdk1.4.1_01\\lib\\tools.jar\";D:\\Program \nFiles\\jakart\na-ant-1.5.1\\lib\\xml-apis.jar;D:\\Program Files\\jakarta-ant-1.5.1\n\\lib\\xercesImpl.j\nar;D:\\Program Files\\jakarta-ant-1.5.1\\lib\\optional.jar;D:\\Program \nFiles\\jakarta-\nant-1.5.1\\lib\\ant.jar;\" \"-Dant.home=D:\\Program Files\\jakarta-ant-1.5.1\"  \norg.apa\nche.tools.ant.Main -version\nException in thread \"main\" java.lang.NoClassDefFoundError: Files\\j2sdk1/4/1_01\n\\l\nib\\tools/jar;D:\\Program Files\\jakarta-ant-1/5/1\\lib\\xml-apis/jar;D:\\Program \nFile\ns\\jakarta-ant-1/5/1\\lib\\xercesImpl/jar;D:\\Program Files\\jakarta-ant-1/5/1\n\\lib\\op\ntional/jar;D:\\Program Files\\jakarta-ant-1/5/1\\lib\\ant/jar;", "id": 34437, "time": "2003-04-03T13:57:27Z", "creator": "igor.lastric@freesurf.ch", "creation_time": "2003-04-03T13:57:27Z", "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 18256, "attachment_id": null, "text": "I don't know when the 1.5.2 was released but this bug was fixed more than one\nmonth ago :\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=15351\nand http://issues.apache.org/bugzilla/show_bug.cgi?id=17510\n\nPlease check if it's fixed and if so, close this bug.\n", "id": 34445, "time": "2003-04-03T14:53:02Z", "creator": "anthony@tryllian.com", "creation_time": "2003-04-03T14:53:02Z", "is_private": false}, {"count": 12, "tags": [], "creator": "conor@apache.org", "attachment_id": null, "id": 34447, "time": "2003-04-03T15:03:59Z", "bug_id": 18256, "creation_time": "2003-04-03T15:03:59Z", "is_private": false, "text": "This is not a classloader issue. Classloaders do not have any issues with spaces. \n\nThis line, however,\n\n\"D:\\Program Files\\j2sdk1.4.1_01\\bin\\java.exe\" -classpath \"\"D:\\Program Files\\...\n\nis a problem. It is running Ant with a classpath of D:\\Program and trying to\nexecute the class starting with Files\\... That is definitely a windows command\nline issue. \n\nI'm pretty sure the doubling of quotes you report is not possible with the stock\nant.bat file - based on these two lines\n\nif exist \"%JAVA_HOME%\\lib\\tools.jar\" set\nLOCALCLASSPATH=%JAVA_HOME%\\lib\\tools.jar;%LOCALCLASSPATH%\n\nand\n\n\"%_JAVACMD%\" %ANT_OPTS% -classpath \"%LOCALCLASSPATH%\"\n\nSo, can you please double check that you have restored ant.bat. If you still\nhave problems, please zip up the complete echo output and we'll see what is next.\n\nThanks\n\n"}, {"count": 13, "tags": [], "creator": "igor.lastric@freesurf.ch", "is_private": false, "id": 34462, "creation_time": "2003-04-03T18:17:51Z", "time": "2003-04-03T18:17:51Z", "bug_id": 18256, "text": "I have now downloaded and instaled apache-ant-1.5.2.bin.zip.\nWhen I run it now it works fine. As Anthony Goubard was suggesting, this is \nprobably duplicate of the bug 15351. So I will define it as such.\n\nI was trying to solve the problem myself and when you asked to reporduce \noriginal problem, I obviousliy had forgot some part.\nAnyhow, now is everything clean and works.\nSorry for the noise!\n\n*** This bug has been marked as a duplicate of 15351 ***", "attachment_id": null}]