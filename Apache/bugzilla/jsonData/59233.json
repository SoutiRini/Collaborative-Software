[{"count": 0, "tags": [], "bug_id": 59233, "attachment_id": null, "text": "For a web application that allows users to create business websites and bind their own domains. All the domains will be mapped to the same IP address, and one port is used for all. For example,\n\n       https://mydomain1.com\n       https://mydomain2.com\n       https://mydomain3.com\n\nThe number of domains is unlimited.\n\nEach user should be able to upload a SSL certificate for his/her own domain, and the certificate can be stored in database or file system. Many users are using the web application at the time, and thus server restart is not acceptable. \n\nTomcat9 can provide a SSL provider interface like: getCertificate(domain). How to get the certificate is up to the provider implementation. SSL should be configured dynamically at the run time without server restart.", "id": 189713, "time": "2016-03-24T16:14:37Z", "creator": "javaone9@gmail.com", "creation_time": "2016-03-24T16:14:37Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 59233, "text": "Tomcat doesn't want to get into the details of where the meta-data is stored.\n\nIt is already possible to add virtual hosts dynamically. What isn't currently possible is adding an SSLHostConfig to an Endpoint. That doesn't look too tricky. I'll take a look.", "count": 1, "id": 191855, "time": "2016-06-20T20:13:39Z", "creator": "markt@apache.org", "creation_time": "2016-06-20T20:13:39Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 59233, "is_private": false, "id": 191920, "time": "2016-06-23T19:29:47Z", "creator": "markt@apache.org", "creation_time": "2016-06-23T19:29:47Z", "tags": [], "text": "Adding TLS virtual hosts (or in implementation terms SSLHostConfigs to an Endpoint) dynamically will be supported in 9.0.0.M9 and 8.5.4 onwards."}, {"count": 3, "tags": [], "text": "From the following example from Tomcat9 migration guide:\n\n<Connector port=\"8443\"\n           protocol=\"org.apache.coyote.http11.Http11AprProtocol\"\n           maxThreads=\"150\"\n           SSLEnabled=\"true\"\n           defaultSSLHostConfigName=\"openoffice.apache.org\" >\n    <SSLHostConfig hostName=\"openoffice.apache.org\" >\n        <Certificate certificateKeyFile=\"conf/openoffice.apache.org-rsa-key.pem\"\n                     certificateFile=\"conf/openoffice.apache.org-rsa-cert.pem\"\n                     type=\"RSA\" />\n        <Certificate certificateKeyFile=\"conf/openoffice.apache.org-ec-key.pem\"\n                     certificateFile=\"conf/openoffice.apache.org-ec-cert.pem\"\n                     type=\"EC\" />\n    </SSLHostConfig>\n    <SSLHostConfig hostName=\"www.openoffice.org\" >\n        <Certificate certificateKeyFile=\"conf/www.openoffice.org-rsa-key.pem\"\n                     certificateFile=\"conf/www.openoffice.org-rsa-cert.pem\"\n                     type=\"RSA\" />\n        <Certificate certificateKeyFile=\"conf/www.openoffice.org-ec-key.pem\"\n                     certificateFile=\"conf/www.openoffice.org-ec-cert.pem\"\n                     type=\"EC\" />\n    </SSLHostConfig>\n</Connector>\n\nDoes it require server restart after adding a new domain and its certificate?\nCan it be scaled to thousands of domains?  The use case is that a web app allows users (thousands or millions) to bind their own domains and upload SSL certificates. Can Tomcat9 handle the use case? Thanks.", "is_private": false, "bug_id": 59233, "id": 194829, "time": "2016-11-05T02:39:15Z", "creator": "javaone9@gmail.com", "creation_time": "2016-11-05T02:39:15Z", "attachment_id": null}]