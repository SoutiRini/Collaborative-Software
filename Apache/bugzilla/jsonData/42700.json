[{"count": 0, "tags": [], "bug_id": 42700, "text": "If I try to configure a servlet to map to a url named docs or /docs/* etc,\nTomcat doesn't handle ok the requests and changes the url from\nmyapp/docs?<params> to /myapp/docs/?<params> and answer with an error saying no\nresource available. Even if I type the url explicitly on browser.  This happened\nto my Tomcat in Linux, it didn't on windows. Everything goes fine if I change\nthe mapping to something different like doctest or /doctest/*. It can seem small\nthing but it could mean (as it happened to me) a big headache if you find\nyourself dealing with the problem trying to figure what is wrong.", "id": 104532, "time": "2007-06-20T00:46:35Z", "creator": "rjmfernandes@gmail.com", "creation_time": "2007-06-20T00:46:35Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "Due to the way relative paths work, there's always a redirection when accessing\na physical folder.", "id": 104540, "time": "2007-06-20T04:00:13Z", "bug_id": 42700, "creation_time": "2007-06-20T04:00:13Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 42700, "text": "It's not a physical folder! I don't know from where (in what i said) you took \nthis conclusion. Try again.", "id": 104541, "time": "2007-06-20T04:04:27Z", "creator": "rjmfernandes@gmail.com", "creation_time": "2007-06-20T04:04:27Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "Ok there's this directory tomcat/docs but if mydomain.com is configured such \nthat its docBase is webapps/mydomain how the tomcat can mix its own docs \nfolder when interpreting the url mydomain.com/docs , and ignoring the servlet \nmapping configured in web.xml for the webapp. Still looks odd to me.", "attachment_id": null, "bug_id": 42700, "id": 104542, "time": "2007-06-20T04:17:20Z", "creator": "rjmfernandes@gmail.com", "creation_time": "2007-06-20T04:17:20Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 42700, "attachment_id": null, "text": "ok i will leave as \"resolved wont fix\" but if this is the way you handle the \nbug database, saying reported bugs are resolved with no justification at all \nor with only dummy justifications (invalid as they are) then I will give up \nreporting any bugs at all, this should not be the way things work", "id": 104570, "time": "2007-06-20T08:17:40Z", "creator": "rjmfernandes@gmail.com", "creation_time": "2007-06-20T08:17:40Z", "is_private": false}, {"count": 5, "tags": [], "creator": "jleech@virtela.net", "attachment_id": null, "id": 104571, "time": "2007-06-20T08:39:59Z", "bug_id": 42700, "creation_time": "2007-06-20T08:39:59Z", "is_private": false, "text": "Someone should take away Remy's permissions for changing bugs to RESOLVED WONTFIX.\nIf you create a small test case that demonstrates the problem someone else will\ncome along and fix it."}, {"count": 6, "tags": [], "creator": "rjmfernandes@gmail.com", "text": "What I can say is this: In an environment like the one bellow (tomcat having a \nsubfolder called docs with no relation with the present webapp), if you \nconfigure a webapp with docbase \"webapps/mywebapp\" for using a servlet (it can \nbe a dummy one) mapped to url \"docs\". Any call to the servlet like \ndocs?param1=value1&paaram2=value2 \nis rediected by tomcat to \ndocs/?param1=value1&param2=value2\nwith tomcat reporting resource not found. If you change the url the servlet is \nmapped to something different like \"doctest\" the redirection stops and \neveryting works fine. \n\nUsing CATALINA_BASE:   /opt/tomcat\nUsing CATALINA_HOME:   /opt/tomcat\nUsing CATALINA_TMPDIR: /opt/tomcat/temp\nUsing JRE_HOME:       /usr/java/jdk1.6.0\nServer version: Apache Tomcat/6.0.10\nServer built:   Feb 13 2007 01:50:56\nServer number:  6.0.10.0\nOS Name:        Linux\nOS Version:     2.6.9-55.ELsmp\nArchitecture:   amd64\nJVM Version:    1.6.0-b105\nJVM Vendor:     Sun Microsystems Inc.\n\nI am not sure I know the meaning of docbase for the webapps configuration on \ntomcat/conf/server.xml but I would suppose that if I have it configured to \nwebapps/myapp then tomcat should not try to map the relative docs path call to \nanything else then my servlet's mapped url, and forget about its own \ntomcat/docs folder.\n\nI won't loose more time with this item. From my point of view things are \nsolved, just changed the mapped url. Maybe from the point of view of tomcat \ndeveloppers this thing could be checked. Maybe I would enjoy increasing my \nknowledge through the detailed explanation why the whole thing happened. For \nsure enough is always enough.", "id": 104572, "time": "2007-06-20T08:58:49Z", "bug_id": 42700, "creation_time": "2007-06-20T08:58:49Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 42700, "attachment_id": null, "text": "Do you have a docs folder inside myapp, i.e. myapp/docs?\n\nI know, that you don't want to use sucvh a folder, but I'm asking if such a\nfolder is (maybe by mistake) inside your webapp.", "id": 104573, "time": "2007-06-20T10:39:15Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2007-06-20T10:39:15Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 42700, "attachment_id": null, "text": "No! I thought I was clear. The situation on folder terms and with a picture. \nThey say it worths a thousand words. Let's check it out.\n\ntomcat\n  |_____docs\n  |\n  |_____webapps\n           |\n           |____myapp (with a web.xml with a servlet mapped to a url \"docs\")", "id": 104578, "time": "2007-06-20T14:39:27Z", "creator": "rjmfernandes@gmail.com", "creation_time": "2007-06-20T14:39:27Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 42700, "attachment_id": null, "text": "I reopened the bug. I think I deserve it.\nNow more information (For the folder structure see comment before):\n\n1-Piece of host config on server.xml\n\n<Host name=\"mydomain.com\" debug=\"0\" appBase=\"\" unpackWARs=\"true\">\n        <Alias>www.mydomain.com</Alias>\n        <Valve className=\"org.apache.catalina.valves.AccessLogValve\" \ndirectory=\"logs\" prefix=\"domain_access_log.\" suffix=\".txt\" pattern=\"common\"/>\n        <Logger className=\"org.apache.catalina.logger.FileLogger\" \ndirectory=\"logs\" prefix=\"domain_log.\" suffix=\".txt\" timestamp=\"true\"/>\n        <Context path=\"\" docBase=\"webapps/myapp\" debug=\"0\"/>\n      </Host>\n\n2-Piece of web.xml of the app\n<servlet>\n<description>My Servlet Description</description>\n<servlet-name>MyServlet</servlet-name>\n<servlet-class>MyClass</servlet-class>\n<init-param>\n     <param-name>p1</param-name>\n     <param-value>v1</param-value>\n</init-param>\n<load-on-startup>1</load-on-startup>\n</servlet>\n\n<servlet-mapping>\n<servlet-name>MyServlet</servlet-name>\n<url-pattern>docs</url-pattern>\n<!--\nThe same problem appears if you use /docs/* for example.\n-->\n</servlet-mapping>\n", "id": 104581, "time": "2007-06-20T15:00:43Z", "creator": "rjmfernandes@gmail.com", "creation_time": "2007-06-20T15:00:43Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 42700, "text": "The title of the bug should change to \"Tomcat doesn't seem to handle well \nservlet mappings that match with names of tomcat's (not app's) subfolders\". \n\nAt least in the case of this particular server.xml's host configuration. \n\nMaybe cause of the value of the path attribute? I ask.", "id": 104582, "time": "2007-06-20T15:09:21Z", "creator": "rjmfernandes@gmail.com", "creation_time": "2007-06-20T15:09:21Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "text": "This is a support issue, please post about this on the user list.", "attachment_id": null, "bug_id": 42700, "id": 104590, "time": "2007-06-21T01:49:52Z", "creator": "remm@apache.org", "creation_time": "2007-06-21T01:49:52Z", "is_private": false}]