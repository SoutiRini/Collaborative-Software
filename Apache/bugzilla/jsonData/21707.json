[{"count": 0, "tags": [], "text": "Hi all,\n\nWe are using log4j 1.2.8. in our project (J2EE on WLS server). We have\nsub-classed the Logger and LoggerFactory according to the examples. We are using\nan XML file for configuration.\n\nWhen we use <logger> or <category> (without the class attribute) and\n<categoryFactory> in our log4j.xml, the DOMConfigurator is creating Logger\ninstances (instead of sub-classes created by our factory) during startup:\n\n<log4j:configuration xmlns:log4j='http://jakarta.apache.org/log4j/'>\n  <appender name=\"STDOUT\" class=\"org.apache.log4j.ConsoleAppender\">\n    <layout class=\"org.apache.log4j.PatternLayout\">\n      <param name=\"ConversionPattern\" value=\"%-5p %d{dd.MM HH:mm:ss,SSS}\n%-30.30c [%m]\\t%x %n\"/>\n    </layout>\n  </appender>\n  <logger name=\"ch.postfinance.fw.FrontController\">\n    <level value=\"INFO\"/>\n  </logger>\n  <category name=\"ch.postfinance.fipo.base.AdminServlet\">\n    <level value=\"INFO\"/>\n  </category>\n  <category name=\"ch.postfinance.fipo.base.FipoFrontController\"\nclass=\"ch.postfinance.log.PFLogger\">\n    <level value=\"INFO\"/>\n  </category>\n[... more categories ...]\n  <root>\n    <priority value =\"WARN\" />\n    <appender-ref ref=\"STDOUT\" />\n  </root>\n  <categoryFactory class=\"ch.postfinance.log.PFLoggerFactory\"/>\n</log4j:configuration>\n\n--------------------------- Debug output: -------------------------------\n     [java] log4j: Threshold =\"null\".\nOK   [java] log4j: Desired category factory: [ch.postfinance.log.PFLoggerFactory]\n\nBAD  [java] log4j: Retreiving an instance of org.apache.log4j.Logger.\n     [java] log4j: Setting [ch.postfinance.fw.FrontController] additivity to [true].\n     [java] log4j: Level value for ch.postfinance.fw.FrontController is  [INFO].\n     [java] log4j: ch.postfinance.fw.FrontController level set to INFO\n\nBAD  [java] log4j: Retreiving an instance of org.apache.log4j.Logger.\n     [java] log4j: Setting [ch.postfinance.fipo.base.AdminServlet] additivity to\n[true].\n     [java] log4j: Level value for ch.postfinance.fipo.base.AdminServlet is  [INFO].\n     [java] log4j: ch.postfinance.fipo.base.AdminServlet level set to INFO\n\nGOOD [java] log4j: Desired logger sub-class: [ch.postfinance.log.PFLogger]\n     [java] log4j: Setting [ch.postfinance.fipo.base.FipoFrontController]\nadditivity to [true].\n     [java] log4j: Level value for ch.postfinance.fipo.base.FipoFrontController\nis  [INFO].\n     [java] log4j: ch.postfinance.fipo.base.FipoFrontController level set to INFO\n-------------------------------------------------------------------------\n\nBUG: (?)\n\nWhy is not the LoggerFactory sub-class specified by <categoryFactory> used to\ncreate <logger> or <category> instances, unless we use the \"class\" attribute for\nthe category tag?\n\nTIA and cheers,\n\nTom Ueltschi", "is_private": false, "bug_id": 21707, "id": 40933, "time": "2003-07-18T12:47:06Z", "creator": "apache-bugzilla@ueltschi.net", "creation_time": "2003-07-18T12:47:06Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of 13099 ***", "is_private": false, "id": 68389, "creator": "yoavs@computer.org", "time": "2004-12-13T17:42:12Z", "bug_id": 21707, "creation_time": "2004-12-13T17:42:12Z", "attachment_id": null}]