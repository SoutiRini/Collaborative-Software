[{"count": 0, "tags": [], "text": "I have a standard tomcat installation with customized server.xml and nothing\nelse changed.\n\nThere is a servlet that is mapped to \"/\" which delivers anything.\n\nOn Tomcat<=5.0 this works fine.\nSince Tomcat 5.5 any *.css file is delivered directly by tomcat.\n\nChanging the mapping to \"*.css\" had no success.", "is_private": false, "id": 92242, "creator": "Michael.Wyraz@evermind.de", "time": "2006-08-16T10:06:16Z", "bug_id": 40265, "creation_time": "2006-08-16T10:06:16Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 40265, "attachment_id": null, "id": 92245, "time": "2006-08-16T11:28:01Z", "creator": "Michael.Wyraz@evermind.de", "creation_time": "2006-08-16T11:28:01Z", "is_private": false, "text": "my server.xml\n\n<Server port=\"8006\" shutdown=\"SHUTDOWN\" debug=\"0\">\n  <Service name=\"Catalina\">\n    <Connector port=\"80\" maxThreads=\"150\" minSpareThreads=\"25\"\nmaxSpareThreads=\"75\" enableLookups=\"false\" redirectPort=\"8443\" acceptCount=\"100\"\ndebug=\"0\" connectionTimeout=\"20000\" disableUploadTimeout=\"true\"></Connector>\n    <Engine name=\"Catalina\" defaultHost=\"test\" debug=\"0\" jvmRoute=\"idefix-tc1\">\n      <Realm className=\"org.apache.catalina.realm.MemoryRealm\"></Realm>\n      <Host name=\"gute-mitarbeiter.de\" debug=\"0\"\nappBase=\"/daten/domains/webapps/test\" autoDeploy=\"false\" deployXML=\"false\"\nliveDeploy=\"false\">\n        <Context path=\"\" docBase=\"\" debug=\"0\" swallowOutput=\"true\"></Context>\n      </Host>\n    </Engine>\n  </Service>\n</Server>\n"}, {"count": 2, "tags": [], "creator": "Michael.Wyraz@evermind.de", "is_private": false, "id": 92246, "creation_time": "2006-08-16T11:30:15Z", "time": "2006-08-16T11:30:15Z", "bug_id": 40265, "text": "the server.xml above contained a wrong line. the <Host> name attribute is \"test\".\n\nmy context's WEB-INF/web.xml contains:\n\n        <servlet-mapping>\n                <servlet-name>Main</servlet-name>\n                <url-pattern>/</url-pattern>\n        </servlet-mapping>\n", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 40265, "attachment_id": null, "id": 92247, "time": "2006-08-16T11:44:01Z", "creator": "darryl@darrylmiles.org", "creation_time": "2006-08-16T11:44:01Z", "is_private": false, "text": "And what happens if you rename the servlet from \"Main\" to \"default\" ?\n\nMaybe remove the \"/\" mapping completely.\n\nCheck out $CATALINA_BASE/conf/web.xml for the overridable defaults (overridable\nin WEB-INF/web.xml)"}, {"count": 4, "tags": [], "bug_id": 40265, "attachment_id": 18721, "is_private": false, "id": 92257, "time": "2006-08-16T13:31:07Z", "creator": "Michael.Wyraz@evermind.de", "creation_time": "2006-08-16T13:31:07Z", "text": "Created attachment 18721\ntest webapp\n\ni wrote a minimal test webapp. the server.xml is in the next attachment.\n\nThe behaviour is:\n- when a folder exists on startup, anything below is served by tomcat\n- when the folder not exists, it's served by my servlet\n- when the folder is created after tomcat startup, it's still served by my\nservlet\n- when the folder is removed after tomcat startup, it's still served by tomcat\n\nhttp://192.168.100.197:8080/test.htm -> served by my servlet\nhttp://192.168.100.197:8080/xyz/xy.css -> served by my servlet\nhttp://192.168.100.197:8080/layout/test.css -> served by tomcat\nhttp://192.168.100.197:8080/layout/xy.css -> served by tomcat, 404"}, {"count": 5, "tags": [], "bug_id": 40265, "attachment_id": 18722, "is_private": false, "id": 92258, "time": "2006-08-16T13:33:09Z", "creator": "Michael.Wyraz@evermind.de", "creation_time": "2006-08-16T13:33:09Z", "text": "Created attachment 18722\nserver.xml"}, {"count": 6, "tags": [], "bug_id": 40265, "attachment_id": null, "is_private": false, "id": 92259, "time": "2006-08-16T13:36:53Z", "creator": "Michael.Wyraz@evermind.de", "creation_time": "2006-08-16T13:36:53Z", "text": "when i remove the default servlet form the $TOMCAT_HOME/conf/web.xml, files on\nexisting folders not found anymore."}, {"count": 7, "attachment_id": null, "bug_id": 40265, "is_private": false, "id": 92260, "time": "2006-08-16T13:41:07Z", "creator": "Michael.Wyraz@evermind.de", "creation_time": "2006-08-16T13:41:07Z", "tags": [], "text": "i changed the servlet mapping to:\n        <servlet-mapping>\n                <servlet-name>csstest</servlet-name>\n                <url-pattern>/layout/test.css</url-pattern>\n        </servlet-mapping>\nthe file is still served by tomcat\n"}, {"count": 8, "tags": [], "text": "http://tomcat.apache.org/tomcat-5.5-doc/config/host.html\nSee the \"deployOnStartup\" attribute.", "is_private": false, "id": 92265, "creator": "remm@apache.org", "time": "2006-08-16T14:38:51Z", "bug_id": 40265, "creation_time": "2006-08-16T14:38:51Z", "attachment_id": null}, {"count": 9, "tags": [], "text": "Thank you for solving this Bug: changing the attribute fixes the behaviour.\n\nBut i have read the documentation. There is mentioned, that every directory\ncontaining a WEB-INF/web.xml is deployed as context. Can you describe how this\ncan cause the effect of this bug?\n\nAuto-deploy of webapps was already there in tomcat 5.0. There my example webapp\nworks fine. So something must have changed (in a way that is at least\nincompatible with tomcat 5.0).\n\nI think the detection of weather the directoray is a webapp or not might be broken.\n\nMichael.", "attachment_id": null, "id": 92275, "creator": "Michael.Wyraz@evermind.de", "time": "2006-08-16T17:43:25Z", "bug_id": 40265, "creation_time": "2006-08-16T17:43:25Z", "is_private": false}]