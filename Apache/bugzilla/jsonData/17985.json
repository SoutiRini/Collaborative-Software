[{"count": 0, "tags": [], "bug_id": 17985, "text": "hi,\n\nWhen a StandardContext is started, the following code adds the \nNamingContextListener to the standard context. However, as one can see from the \ncode, the NamingContextListener is not being added as a ContainerListener and a \nPropertyChangeListener (it's only added as a LifeCycleListener). Due to this, \ncalling addResource(), remoteResource() etc on the context does not result in \nthe NamingContextListener being notified, which results in the JNDI bindings of \nthe context not reflecting the change.\n\n-- Code from StandardContext.java --\n        if (ok && isUseNaming()) {\n            if (namingContextListener == null) {\n                namingContextListener = new NamingContextListener();\n                namingContextListener.setDebug(getDebug());\n                namingContextListener.setName(getNamingContextName());\n                addLifecycleListener(namingContextListener);\n            }\n        }\n-- End of code\n\n-- Patched code should be:\n        if (ok && isUseNaming()) {\n            if (namingContextListener == null) {\n                namingContextListener = new NamingContextListener();\n                namingContextListener.setDebug(getDebug());\n                namingContextListener.setName(getNamingContextName());\n                addLifecycleListener(namingContextListener);\n                addContainerListener(namingContextListener);\n                addPropertyChangeListener(namingContextListener);\n            }\n        }\n-- End of Patch\n\nthanks,\nparag.", "id": 33175, "attachment_id": null, "creator": "parag@veritas.com", "creation_time": "2003-03-14T04:40:45Z", "time": "2003-03-14T04:40:45Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 17985, "attachment_id": null, "text": "Yes. The idea is that you would need a webapp reload to pick up those changes\n(dynamic changes contradict the J2EE spec - the ENC is read only - so many\nwebapps won't behave well anyway).", "id": 35332, "time": "2003-04-16T15:18:09Z", "creator": "remm@apache.org", "creation_time": "2003-04-16T15:18:09Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 17985, "attachment_id": null, "text": "ok. thanks for looking at the issue!\n\nparag.", "id": 35364, "time": "2003-04-16T18:13:11Z", "creator": "parag@veritas.com", "creation_time": "2003-04-16T18:13:11Z", "is_private": false}]