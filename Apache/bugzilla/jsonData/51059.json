[{"count": 0, "tags": [], "bug_id": 51059, "text": "After days of running, apache fails in handling new requests.  By checking all httpd processes ,we found some httpd(s) were created very early and handles no request (we set MaxRequestsPerChild to 10000) with the stack trace as below(almost all threads are in lwp_park status). We have no idea what would be the possible reason, the underlying OS is: SunOS Portal1new 5.10 Generic_141444-09 sun4v sparc SUNW,SPARC-Enterprise-T2000\n\nPortal1new% pstack 17315\n17315:  /data2/aiobs6/Borland/bdp81/bin/../modules/apache/bin/httpd -k start -\n-----------------  lwp# 1 / thread# 1  --------------------\n fefcc740 lwp_wait (3, ffbff0d4)\n fefc55f0 _thrp_join (3, 0, ffbff13c, 1, ffbff0d4, ff035800) + 34\n ff2100a0 apr_thread_join (ffbff1ac, 13ae78, 7, 0, 99988, 74d28) + 18\n 0005c750 join_workers (13b0f8, 2fad00, 5c228, 13ac40, 13abb0, 0) + 158\n 0005cbe4 child_main (6, 1, 0, 13ac40, 2fad00, 1) + 3a4\n 0005cd2c make_child (99988, 6, 7, 0, 0, 14) + f4\n 0005d3d8 perform_idle_server_maintenance (d, 1, 40c, 0, 1, 0) + 510\n 0005d69c server_main_loop (0, 6dd, 7, 0, 13, 14) + 234\n 0005da0c ap_mpm_run (97a90, c5b48, 99988, 9ba88, 919f0, 0) + 324\n 00029f00 main     (7, ffbff614, ffbff634, 88c00, ff170100, 0) + b08\n 00028840 _start   (0, 0, 0, 0, 0, 0) + 108\n-----------------  lwp# 3 / thread# 3  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (a187c8, 0, d9148, fe689e94, ff0303a8, 2690) + 1c\n fe689c0c virtual_file_ex (9b26f0, fdd7b4f0, fe68917c, 2, 4da54ca9, 8000) + 610\n fe689e94 virtual_chdir (fdd7b4f0, 9b1bc0, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (565d18, fe689e54, 9b1bc0, 9b2370, 1, 0) + 80\n fe68f074 php_execute_script (fdd7baf8, 9b1bc0, 6, 0, 564928, 0) + 31c\n fe76e904 php_handler (564928, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (564928, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (564928, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (564928, 4, 564928, 564928, 5656f0, 0) + 5c\n 00051bb0 ap_process_http_connection (55dc28, 55d978, 55d978, 180, 0, 564928) + 58\n 0004cc00 ap_run_process_connection (55dc28, 55d978, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (55dc28, 55d978, 55d978, 180, 55dc20, 561db8) + 68\n 0005b704 process_socket (55d930, 55d978, 6, 0, 561db8, 180) + 6c\n 0005c074 worker_thread (13ae78, 2e6058, 0, 0, 6, 0) + 20c\n ff20fe10 dummy_worker (13ae78, fdd7c000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 4 / thread# 4  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef5640c malloc   (10, 1, d9fd8, fe688d9c, ff0303a8, ff03a518) + 44\n fe688af4 allocate_new_resource (3296d4, 4, 4, 0, 174370, 110f28) + 10\n fe688d9c ts_resource_ex (0, 4, 66006c30, 166030, ff00, 2) + c8\n fe76e5e4 php_handler (872e60, 0, 136c00, 165680, ffffffff, 0) + 18\n 00043968 ap_run_handler (872e60, 3b3b3b3b, 66006c30, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (872e60, 0, 136c00, 165680, 136c00, 0) + 124\n 0005523c ap_process_request (872e60, 4, 872e60, 872e60, 873c28, 0) + 5c\n 00051bb0 ap_process_http_connection (8695d8, 869328, 869328, 181, 0, 872e60) + 58\n 0004cc00 ap_run_process_connection (8695d8, 869328, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (8695d8, 869328, 869328, 181, 8695d0, 86dec8) + 68\n 0005b704 process_socket (8692e0, 869328, 6, 1, 86dec8, 181) + 6c\n 0005c074 worker_thread (13ae98, 2e6070, 0, 0, 6, 1) + 20c\n ff20fe10 dummy_worker (13ae98, ebffc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 5 / thread# 5  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (1158840, 0, d9148, fe689e94, ff0303a8, 3c10) + 1c\n fe689c0c virtual_file_ex (d56ed8, ebefb4f0, fe68917c, 2, 4da54d58, 8000) + 610\n fe689e94 virtual_chdir (ebefb4f0, c90580, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (3105a0, fe689e54, c90580, d56598, 1, 0) + 80\n fe68f074 php_execute_script (ebefbaf8, c90580, 6, 0, 30ef50, 0) + 31c\n fe76e904 php_handler (30ef50, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (30ef50, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (30ef50, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (30ef50, 4, 30ef50, 30ef50, 30fd18, 0) + 5c\n 00051bb0 ap_process_http_connection (2fb0d8, 2fae28, 2fae28, 182, 0, 30ef50) + 58\n 0004cc00 ap_run_process_connection (2fb0d8, 2fae28, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (2fb0d8, 2fae28, 2fae28, 182, 2fb0d0, 2fcde8) + 68\n 0005b704 process_socket (2fade0, 2fae28, 6, 2, 2fcde8, 182) + 6c\n 0005c074 worker_thread (13aeb8, 2e6058, 0, 0, 6, 2) + 20c\n ff20fe10 dummy_worker (13aeb8, ebefc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 6 / thread# 6  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (7a9a50, 0, d9148, fe689e94, ff0303a8, 21ee) + 1c\n fe689c0c virtual_file_ex (90ad60, ebdfb4f0, fe68917c, 2, 4da54ccf, 8000) + 610\n fe689e94 virtual_chdir (ebdfb4f0, 8fb9d0, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (80c078, fe689e54, 8fb9d0, 90aa70, 1, 0) + 80\n fe68f074 php_execute_script (ebdfbaf8, 8fb9d0, 6, 0, 80aac8, 0) + 31c\n fe76e904 php_handler (80aac8, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (80aac8, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (80aac8, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (80aac8, 4, 80aac8, 80aac8, 80b890, 0) + 5c\n 00051bb0 ap_process_http_connection (6d4790, 6d44e0, 6d44e0, 183, 0, 80aac8) + 58\n 0004cc00 ap_run_process_connection (6d4790, 6d44e0, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (6d4790, 6d44e0, 6d44e0, 183, 6d4788, 6d7e28) + 68\n 0005b704 process_socket (6d4498, 6d44e0, 6, 3, 6d7e28, 183) + 6c\n 0005c074 worker_thread (13aed8, 2e6070, 0, 0, 6, 3) + 20c\n ff20fe10 dummy_worker (13aed8, ebdfc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 7 / thread# 7  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (dc28d8, 0, d9148, fe689e94, ff0303a8, 220b) + 1c\n fe689c0c virtual_file_ex (8eb940, ebcfb4f0, fe68917c, 2, 4da54d31, 8000) + 610\n fe689e94 virtual_chdir (ebcfb4f0, 8e7ac0, ffffffff, 0, 73, 0) + 40\n fe689f2c virtual_chdir_file (6ea7c8, fe689e54, 8e7ac0, 809f38, 1, 0) + 80\n fe68f074 php_execute_script (ebcfbaf8, 8e7ac0, 6, 0, 10ca0c8, 0) + 31c\n fe76e904 php_handler (10ca0c8, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (10ca0c8, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (10ca0c8, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (10ca0c8, 4, 10ca0c8, 10ca0c8, 10cae90, 0) + 5c\n 00051bb0 ap_process_http_connection (6de938, 6de688, 6de688, 184, 0, 10ca0c8) + 58\n 0004cc00 ap_run_process_connection (6de938, 6de688, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (6de938, 6de688, 6de688, 184, 6de930, 6e72f8) + 68\n 0005b704 process_socket (6de640, 6de688, 6, 4, 6e72f8, 184) + 6c\n 0005c074 worker_thread (13aef8, 2e6058, 0, 0, 6, 4) + 20c\n ff20fe10 dummy_worker (13aef8, ebcfc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 8 / thread# 8  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (1266000, 0, d9148, fe689e94, ff0303a8, 28c2) + 1c\n fe689c0c virtual_file_ex (fa4240, ebbfb4f0, fe68917c, 2, 4da54d3e, 8000) + 610\n fe689e94 virtual_chdir (ebbfb4f0, 12e2e58, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (9885c0, fe689e54, 12e2e58, decb80, 1, 0) + 80\n fe68f074 php_execute_script (ebbfbaf8, 12e2e58, 6, 0, 987040, 0) + 31c\n fe76e904 php_handler (987040, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (987040, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (987040, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (987040, 4, 987040, 987040, 987e08, 0) + 5c\n 00051bb0 ap_process_http_connection (9829f0, 982740, 982740, 185, 0, 987040) + 58\n 0004cc00 ap_run_process_connection (9829f0, 982740, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (9829f0, 982740, 982740, 185, 9829e8, 8eda00) + 68\n 0005b704 process_socket (9826f8, 982740, 6, 5, 8eda00, 185) + 6c\n 0005c074 worker_thread (13af18, 2e6070, 0, 0, 6, 5) + 20c\n ff20fe10 dummy_worker (13af18, ebbfc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 9 / thread# 9  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (d6e520, 0, d9148, fe689e94, ff0303a8, 224a) + 1c\n fe689c0c virtual_file_ex (7c51a0, ebafb4f0, fe68917c, 2, 4da54cae, 8000) + 610\n fe689e94 virtual_chdir (ebafb4f0, 720600, ffffffff, 0, 73, 0) + 40\n fe689f2c virtual_chdir_file (11b66e0, fe689e54, 720600, 720c18, 1, 0) + 80\n fe68f074 php_execute_script (ebafbaf8, 720600, 6, 0, 11b5240, 0) + 31c\n fe76e904 php_handler (11b5240, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (11b5240, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (11b5240, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (11b5240, 4, 11b5240, 11b5240, 11b6008, 0) + 5c\n 00051bb0 ap_process_http_connection (65af48, 65ac98, 65ac98, 186, 0, 11b5240) + 58\n 0004cc00 ap_run_process_connection (65af48, 65ac98, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (65af48, 65ac98, 65ac98, 186, 65af40, 65cc58) + 68\n 0005b704 process_socket (65ac50, 65ac98, 6, 6, 65cc58, 186) + 6c\n 0005c074 worker_thread (13af38, 2e6058, 0, 0, 6, 6) + 20c\n ff20fe10 dummy_worker (13af38, ebafc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 10 / thread# 10  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (9e5588, 0, d9148, fe689e94, ff0303a8, a85) + 1c\n fe689c0c virtual_file_ex (990458, eb9fb4f0, fe68917c, 2, 4da54c92, 8000) + 610\n fe689e94 virtual_chdir (eb9fb4f0, 8efd40, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (1008fe0, fe689e54, 8efd40, 9901f8, 1, 0) + 80\n fe68f074 php_execute_script (eb9fbaf8, 8efd40, 6, 0, 1007c70, 0) + 31c\n fe76e904 php_handler (1007c70, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (1007c70, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (1007c70, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (1007c70, 4, 1007c70, 1007c70, 1008a38, 0) + 5c\n 00051bb0 ap_process_http_connection (e81c88, e819d8, e819d8, 187, 0, 1007c70) + 58\n 0004cc00 ap_run_process_connection (e81c88, e819d8, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (e81c88, e819d8, e819d8, 187, e81c80, e9ada0) + 68\n 0005b704 process_socket (e81990, e819d8, 6, 7, e9ada0, 187) + 6c\n 0005c074 worker_thread (13af58, 2e6070, 0, 0, 6, 7) + 20c\n ff20fe10 dummy_worker (13af58, eb9fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 11 / thread# 11  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (110ada0, 0, d9148, fe689e94, ff0303a8, 21b6) + 1c\n fe689c0c virtual_file_ex (a438f0, eb8fb4f0, fe68917c, 2, 4da54cb0, 8000) + 610\n fe689e94 virtual_chdir (eb8fb4f0, a1eba0, ffffffff, 0, 73, 0) + 40\n fe689f2c virtual_chdir_file (11140b8, fe689e54, a1eba0, a435b8, 1, 0) + 80\n fe68f074 php_execute_script (eb8fbaf8, a1eba0, 6, 0, 1112c10, 0) + 31c\n fe76e904 php_handler (1112c10, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (1112c10, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (1112c10, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (1112c10, 4, 1112c10, 1112c10, 11139d8, 0) + 5c\n 00051bb0 ap_process_http_connection (4bfb50, 4bf8a0, 4bf8a0, 188, 0, 1112c10) + 58\n 0004cc00 ap_run_process_connection (4bfb50, 4bf8a0, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (4bfb50, 4bf8a0, 4bf8a0, 188, 4bfb48, 4c3a40) + 68\n 0005b704 process_socket (4bf858, 4bf8a0, 6, 8, 4c3a40, 188) + 6c\n 0005c074 worker_thread (13af78, 2e6058, 0, 0, 6, 8) + 20c\n ff20fe10 dummy_worker (13af78, eb8fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 12 / thread# 12  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef5640c malloc   (60, 1, d9fd8, fe689e94, ff0303a8, ff03a518) + 44\n fe689b7c virtual_file_ex (722180, eb7fb4f0, fe68917c, 2, 4da54c78, 8000) + 580\n fe689e94 virtual_chdir (eb7fb4f0, 70aa70, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (dbc378, fe689e54, 70aa70, 721f20, 1, 0) + 80\n fe68f074 php_execute_script (eb7fbaf8, 70aa70, 6, 0, dbaee8, 0) + 31c\n fe76e904 php_handler (dbaee8, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (dbaee8, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (dbaee8, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (dbaee8, 4, dbaee8, dbaee8, dbbcb0, 0) + 5c\n 00051bb0 ap_process_http_connection (385b78, 3858c8, 3858c8, 189, 0, dbaee8) + 58\n 0004cc00 ap_run_process_connection (385b78, 3858c8, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (385b78, 3858c8, 3858c8, 189, 385b70, 3897f0) + 68\n 0005b704 process_socket (385880, 3858c8, 6, 9, 3897f0, 189) + 6c\n 0005c074 worker_thread (13af98, 2e6070, 0, 0, 6, 9) + 20c\n ff20fe10 dummy_worker (13af98, eb7fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 13 / thread# 13  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (113a9b0, 0, d9148, fe689e94, ff0303a8, 312a) + 1c\n fe689c0c virtual_file_ex (894d20, eb6fb4f0, fe68917c, 2, 4da54d7a, 8000) + 610\n fe689e94 virtual_chdir (eb6fb4f0, 3296c8, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (702f38, fe689e54, 3296c8, 11759d8, 1, 0) + 80\n fe68f074 php_execute_script (eb6fbaf8, 3296c8, 6, 0, 701af8, 0) + 31c\n fe76e904 php_handler (701af8, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (701af8, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (701af8, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (701af8, 4, 701af8, 701af8, 7028c0, 0) + 5c\n 00051bb0 ap_process_http_connection (6f7b58, 6f78a8, 6f78a8, 18a, 0, 701af8) + 58\n 0004cc00 ap_run_process_connection (6f7b58, 6f78a8, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (6f7b58, 6f78a8, 6f78a8, 18a, 6f7b50, 6fac20) + 68\n 0005b704 process_socket (6f7860, 6f78a8, 6, a, 6fac20, 18a) + 6c\n 0005c074 worker_thread (13afb8, 2e6058, 0, 0, 6, a) + 20c\n ff20fe10 dummy_worker (13afb8, eb6fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 14 / thread# 14  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (a64480, 0, d9148, fe689e94, ff0303a8, 3b58) + 1c\n fe689c0c virtual_file_ex (60d5d0, eb5fb4f0, fe68917c, 2, 4da54d88, 8000) + 610\n fe689e94 virtual_chdir (eb5fb4f0, 646e00, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (3af9e8, fe689e54, 646e00, 60d208, 1, 0) + 80\n fe68f074 php_execute_script (eb5fbaf8, 646e00, 6, 0, 3ae6a0, 0) + 31c\n fe76e904 php_handler (3ae6a0, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (3ae6a0, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (3ae6a0, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (3ae6a0, 4, 3ae6a0, 3ae6a0, 3af468, 0) + 5c\n 00051bb0 ap_process_http_connection (3a8d08, 3a8a58, 3a8a58, 18b, 0, 3ae6a0) + 58\n 0004cc00 ap_run_process_connection (3a8d08, 3a8a58, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (3a8d08, 3a8a58, 3a8a58, 18b, 3a8d00, 3ac5b0) + 68\n 0005b704 process_socket (3a8a10, 3a8a58, 6, b, 3ac5b0, 18b) + 6c\n 0005c074 worker_thread (13afd8, 2e6070, 0, 0, 6, b) + 20c\n ff20fe10 dummy_worker (13afd8, eb5fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 15 / thread# 15  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (b50ce8, 0, d9148, fe689e94, ff0303a8, 1b47) + 1c\n fe689c0c virtual_file_ex (5ac318, eb4fb4f0, fe68917c, 2, 4da54ca6, 8000) + 610\n fe689e94 virtual_chdir (eb4fb4f0, 5a4848, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (1145a70, fe689e54, 5a4848, 5ac0b8, 1, 0) + 80\n fe68f074 php_execute_script (eb4fbaf8, 5a4848, 6, 0, 11444c0, 0) + 31c\n fe76e904 php_handler (11444c0, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (11444c0, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (11444c0, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (11444c0, 4, 11444c0, 11444c0, 1145288, 0) + 5c\n 00051bb0 ap_process_http_connection (d3f300, d3f050, d3f050, 18c, 0, 11444c0) + 58\n 0004cc00 ap_run_process_connection (d3f300, d3f050, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (d3f300, d3f050, d3f050, 18c, d3f2f8, d384a0) + 68\n 0005b704 process_socket (d3f008, d3f050, 6, c, d384a0, 18c) + 6c\n 0005c074 worker_thread (13aff8, 2e6058, 0, 0, 6, c) + 20c\n ff20fe10 dummy_worker (13aff8, eb4fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 16 / thread# 16  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (6c0ac0, 0, d9148, fe689e94, ff0303a8, 3ee5) + 1c\n fe689c0c virtual_file_ex (505398, eb3fb4f0, fe68917c, 2, 4da54d55, 8000) + 610\n fe689e94 virtual_chdir (eb3fb4f0, 4fefd0, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (1265088, fe689e54, 4fefd0, 505138, 1, 0) + 80\n fe68f074 php_execute_script (eb3fbaf8, 4fefd0, 6, 0, 1263bb8, 0) + 31c\n fe76e904 php_handler (1263bb8, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (1263bb8, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (1263bb8, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (1263bb8, 4, 1263bb8, 1263bb8, 1264980, 0) + 5c\n 00051bb0 ap_process_http_connection (773cf8, 773a48, 773a48, 18d, 0, 1263bb8) + 58\n 0004cc00 ap_run_process_connection (773cf8, 773a48, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (773cf8, 773a48, 773a48, 18d, 773cf0, 778480) + 68\n 0005b704 process_socket (773a00, 773a48, 6, d, 778480, 18d) + 6c\n 0005c074 worker_thread (13b018, 2e6070, 0, 0, 6, d) + 20c\n ff20fe10 dummy_worker (13b018, eb3fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 17 / thread# 17  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef5640c malloc   (2e, 1, d9fd8, fe68c10c, ff0303a8, ff03a518) + 44\n fef693dc strdup   (83a3b0, 0, fe83f84e, 9, 0, 457bc8) + c\n fe68c10c php_error_cb (1, 81c528, 90, fe896b9c, 3c14f0, fe896f5c) + e8\n fe6df6dc zend_error (1, fe83f820, 1e, 90, 81c528, 3b6bc0) + 3f8\n fefc8b4c __sighndlr (1d, 0, eb2f7be0, fe6d0304, 0, 0) + c\n fefbd1f8 call_user_handler (1d, 0, 12, fff7, fdec7a00, eb2f7be0) + 3b8\n fefbd3cc sigacthandler (1d, 0, eb2f7be0, fef56414, fdec7a00, fef56414) + 4c\n --- called from signal handler with signal 29 (SIGPROF) ---\n fef565c0 _malloc_unlocked (60, 30, 11738b8, 11b31e0, 12f1268, fe68a834) + 190\n fef56414 malloc   (60, 1, d9fd8, fe5a6f18, ff0303a8, ff03a518) + 4c\n fe68a834 virtual_stat (eb2f8040, eb2f8440, 3b6bc0, 0, 34, 0) + 3c\n fe5a6f18 ps_gc_files (1f, 5a0, eb2f8958, 3b6bc0, 80808080, 43c) + 108\n fe5a2e10 php_session_start (3b6bc0, 3b6bc0, 0, 8000, 7c00, 8000) + 85c\n fe5a5520 zif_session_start (0, 835998, 0, 0, 0, 3b6bc0) + 10\n fe7034f8 zend_do_fcall_common_helper_SPEC (eb2f8d30, 3b6bc0, 0, 0, fe896bf8, 0) + adc\n fe702950 execute  (834880, 3b6bc0, eb2f8f3c, 43e1d0, 90, fe70279c) + 1b4\n fe702c70 zend_do_fcall_common_helper_SPEC (eb2f8f50, 3b6bc0, 81d968, 81c658, 43e1d0, 1) + 254\n fe702950 execute  (81cd70, 3b6bc0, eb2f9174, 43e1d0, a8, fe70279c) + 1b4\n fe702c70 zend_do_fcall_common_helper_SPEC (eb2f91a0, 3b6bc0, 0, 0, eb2f93b4, 1) + 254\n fe702950 execute  (81bb00, 3b6bc0, eb2f93b4, eb2f93b0, 3c1508, fe896c50) + 1b4\n fe70b408 ZEND_INCLUDE_OR_EVAL_SPEC_CONST_HANDLER (eb2fb468, 3b6bc0, 81df20, 3c14f0, 0, eb2fb540) + 228\n fe702950 execute  (819d80, 3b6bc0, 6a, 3c14f0, eb2fb540, fe70279c) + 1b4\n fe6e02d8 zend_execute_scripts (8, 3b6bc0, 0, 3, fe896bf8, eb2fbaf8) + 114\n fe68f020 php_execute_script (eb2fbaf8, 0, 6, 0, 924fb0, 0) + 2c8\n fe76e904 php_handler (924fb0, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (924fb0, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (924fb0, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (924fb0, 4, 924fb0, 924fb0, 925d78, 0) + 5c\n 00051bb0 ap_process_http_connection (91d0e0, 91ce30, 91ce30, 18e, 0, 924fb0) + 58\n 0004cc00 ap_run_process_connection (91d0e0, 91ce30, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (91d0e0, 91ce30, 91ce30, 18e, 91d0d8, 9204a0) + 68\n 0005b704 process_socket (91cde8, 91ce30, 6, e, 9204a0, 18e) + 6c\n 0005c074 worker_thread (13b038, 2e6058, 0, 0, 6, e) + 20c\n ff20fe10 dummy_worker (13b038, eb2fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 18 / thread# 18  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (1155de8, 0, d9148, fe689e94, ff0303a8, 1b45) + 1c\n fe689c0c virtual_file_ex (11f51f8, eb1fb4f0, fe68917c, 2, 4da54cab, 8000) + 610\n fe689e94 virtual_chdir (eb1fb4f0, 3436d8, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (648508, fe689e54, 3436d8, d69980, 1, 0) + 80\n fe68f074 php_execute_script (eb1fbaf8, 3436d8, 6, 0, 647148, 0) + 31c\n fe76e904 php_handler (647148, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (647148, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (647148, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (647148, 4, 647148, 647148, 647f10, 0) + 5c\n 00051bb0 ap_process_http_connection (63f208, 63ef58, 63ef58, 18f, 0, 647148) + 58\n 0004cc00 ap_run_process_connection (63f208, 63ef58, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (63f208, 63ef58, 63ef58, 18f, 63f200, 641c40) + 68\n 0005b704 process_socket (63ef10, 63ef58, 6, f, 641c40, 18f) + 6c\n 0005c074 worker_thread (13b058, 2e6070, 0, 0, 6, f) + 20c\n ff20fe10 dummy_worker (13b058, eb1fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 19 / thread# 19  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (e65ac8, 0, d9148, fe689e94, ff0303a8, 1791) + 1c\n fe689c0c virtual_file_ex (c39368, eb0fb4f0, fe68917c, 2, 4da54c9d, 8000) + 610\n fe689e94 virtual_chdir (eb0fb4f0, c2f100, ffffffff, 0, 73, 0) + 40\n fe689f2c virtual_chdir_file (1207720, fe689e54, c2f100, c39030, 1, 0) + 80\n fe68f074 php_execute_script (eb0fbaf8, c2f100, 6, 0, ad4f38, 0) + 31c\n fe76e904 php_handler (ad4f38, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (ad4f38, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (ad4f38, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (ad4f38, 4, ad4f38, ad4f38, ad5d00, 0) + 5c\n 00051bb0 ap_process_http_connection (30d200, 30cf50, 30cf50, 190, 0, ad4f38) + 58\n 0004cc00 ap_run_process_connection (30d200, 30cf50, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (30d200, 30cf50, 30cf50, 190, 30d1f8, 310f18) + 68\n 0005b704 process_socket (30cf08, 30cf50, 6, 10, 310f18, 190) + 6c\n 0005c074 worker_thread (13b078, 2e6058, 0, 0, 6, 10) + 20c\n ff20fe10 dummy_worker (13b078, eb0fc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 20 / thread# 20  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (c7f210, 0, d9148, fe689e94, ff0303a8, 14f8) + 1c\n fe689c0c virtual_file_ex (aedf70, eaffb4f0, fe68917c, 2, 4da54c91, 8000) + 610\n fe689e94 virtual_chdir (eaffb4f0, ada400, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (6f6cb8, fe689e54, ada400, aedc80, 1, 0) + 80\n fe68f074 php_execute_script (eaffbaf8, ada400, 6, 0, 6f5898, 0) + 31c\n fe76e904 php_handler (6f5898, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (6f5898, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (6f5898, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (6f5898, 4, 6f5898, 6f5898, 6f6660, 0) + 5c\n 00051bb0 ap_process_http_connection (6edea0, 6edbf0, 6edbf0, 191, 0, 6f5898) + 58\n 0004cc00 ap_run_process_connection (6edea0, 6edbf0, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (6edea0, 6edbf0, 6edbf0, 191, 6ede98, 6f0a68) + 68\n 0005b704 process_socket (6edba8, 6edbf0, 6, 11, 6f0a68, 191) + 6c\n 0005c074 worker_thread (13b098, 2e6070, 0, 0, 6, 11) + 20c\n ff20fe10 dummy_worker (13b098, eaffc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 21 / thread# 21  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef57274 free     (11c41f0, 0, d9148, fe689e94, ff0303a8, 34dd) + 1c\n fe689c0c virtual_file_ex (3171b0, eaefb4f0, fe68917c, 2, 4da54cfa, 8000) + 610\n fe689e94 virtual_chdir (eaefb4f0, 2e6070, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (40ccb0, fe689e54, 2e6070, 316f30, 1, 0) + 80\n fe68f074 php_execute_script (eaefbaf8, 2e6070, 6, 0, 40b730, 0) + 31c\n fe76e904 php_handler (40b730, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (40b730, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (40b730, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (40b730, 4, 40b730, 40b730, 40c4f8, 0) + 5c\n 00051bb0 ap_process_http_connection (301160, 300eb0, 300eb0, 192, 0, 40b730) + 58\n 0004cc00 ap_run_process_connection (301160, 300eb0, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (301160, 300eb0, 300eb0, 192, 301158, 304e78) + 68\n 0005b704 process_socket (300e68, 300eb0, 6, 12, 304e78, 192) + 6c\n 0005c074 worker_thread (13b0b8, 2e6058, 0, 0, 6, 12) + 20c\n ff20fe10 dummy_worker (13b0b8, eaefc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 22 / thread# 22  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fef5640c malloc   (52, 1, d9fd8, fe689e94, ff0303a8, ff03a518) + 44\n fe689b7c virtual_file_ex (45dbf8, eadfb4f0, fe68917c, 2, 4da54c77, 8000) + 580\n fe689e94 virtual_chdir (eadfb4f0, 454b48, ffffffff, 0, 6e, 0) + 40\n fe689f2c virtual_chdir_file (fa6850, fe689e54, 454b48, 45d998, 1, 0) + 80\n fe68f074 php_execute_script (eadfbaf8, 454b48, 6, 0, fa5480, 0) + 31c\n fe76e904 php_handler (fa5480, 0, 1270e0, 165680, ffffffff, 0) + 338\n 00043968 ap_run_handler (fa5480, 3b3b3b3b, 70687000, 166030, ff00, 2) + 50\n 000442cc ap_invoke_handler (fa5480, 0, 1270e0, 165680, 1270e0, 0) + 124\n 0005523c ap_process_request (fa5480, 4, fa5480, fa5480, fa6248, 0) + 5c\n 00051bb0 ap_process_http_connection (dd4528, dd4278, dd4278, 193, 0, fa5480) + 58\n 0004cc00 ap_run_process_connection (dd4528, dd4278, 6, 1663c8, fffffffe, 0) + 50\n 0004d100 ap_process_connection (dd4528, dd4278, dd4278, 193, dd4520, dd7ff0) + 68\n 0005b704 process_socket (dd4230, dd4278, 6, 13, dd7ff0, 193) + 6c\n 0005c074 worker_thread (13b0d8, 2e6070, 0, 0, 6, 13) + 20c\n ff20fe10 dummy_worker (13b0d8, eadfc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)\n-----------------  lwp# 23 / thread# 23  --------------------\n fefc8ac0 lwp_park (0, 0, 0)\n fefc2ad4 cond_wait_queue (13adf8, 13adc8, 0, 0, 1c00, 0) + 4c\n fefc301c cond_wait (13adf8, 13adc8, 1, 6, 96d00, 0) + 10\n fefc3058 pthread_cond_wait (13adf8, 13adc8, 3a8a10, 0, 0, 0) + 8\n ff1fb6b0 apr_thread_cond_wait (13adf0, 13adc0, 1, 6, 96d00, 0) + 18\n 0005ede4 ap_queue_info_wait_for_idler (13ada8, eacfbf20, 3a8a10, 0, 0, 0) + 54\n 0005b928 listener_thread (13b0f8, 2e6058, 1, 6, 96d00, 0) + 120\n ff20fe10 dummy_worker (13b0f8, eacfc000, 0, 0, ff20fdf8, 1) + 18\n fefc8a20 _lwp_start (0, 0, 0, 0, 0, 0)", "id": 145769, "time": "2011-04-13T23:49:05Z", "creator": "zhannk@gmail.com", "creation_time": "2011-04-13T23:49:05Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 51059, "attachment_id": null, "text": "They are hanging in PHP code. Please open a report at the PHP website (bugs.php.net).", "id": 145771, "time": "2011-04-14T02:30:32Z", "creator": "rpluem@apache.org", "creation_time": "2011-04-14T02:30:32Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 51059, "attachment_id": null, "text": "It is a PHP issue... but note that these are all hung in the clib malloc/free\nlogic, so there is some internal clib mutexing that has become fluxored.\n\nMake sure you didn't link up different clib/[mt]malloc libraries in PHP and\nin httpd.", "id": 145772, "time": "2011-04-14T02:59:43Z", "creator": "wrowe@apache.org", "creation_time": "2011-04-14T02:59:43Z", "is_private": false}, {"count": 3, "tags": [], "creator": "zhannk@gmail.com", "attachment_id": null, "text": "(In reply to comment #2)\n> It is a PHP issue... but note that these are all hung in the clib malloc/free\n> logic, so there is some internal clib mutexing that has become fluxored.\n> \n> Make sure you didn't link up different clib/[mt]malloc libraries in PHP and\n> in httpd.\n\n\nThank you, William, here're the libraries linked. It looks like all clib are the same... we already raised a bug at PHP support site. the same application runs well on a Solaris 9 box. This really goes weird.  \n\n\n$ ldd httpd\n        libm.so.2 =>     /lib/libm.so.2\n        libaprutil-1.so.0 =>     /data2/apache/lib/libaprutil-1.so.0\n        libexpat.so.0 =>         /data2/apache/lib/libexpat.so.0\n        libapr-1.so.0 =>         /data2/apache/lib/libapr-1.so.0\n        libuuid.so.1 =>  /lib/libuuid.so.1\n        libsendfile.so.1 =>      /lib/libsendfile.so.1\n        librt.so.1 =>    /lib/librt.so.1\n        libsocket.so.1 =>        /lib/libsocket.so.1\n        libnsl.so.1 =>   /lib/libnsl.so.1\n        libpthread.so.1 =>       /lib/libpthread.so.1\n        libc.so.1 =>     /lib/libc.so.1\n        libaio.so.1 =>   /lib/libaio.so.1\n        libmd.so.1 =>    /lib/libmd.so.1\n        libmp.so.2 =>    /lib/libmp.so.2\n        libscf.so.1 =>   /lib/libscf.so.1\n        libdoor.so.1 =>  /lib/libdoor.so.1\n        libuutil.so.1 =>         /lib/libuutil.so.1\n        libgen.so.1 =>   /lib/libgen.so.1\n        /platform/SUNW,SPARC-Enterprise-T2000/lib/libc_psr.so.1\n        /platform/SUNW,SPARC-Enterprise-T2000/lib/libmd_psr.so.1\n\n$ ldd ../modules/libphp5.so\nwarning: ldd: ../modules/libphp5.so: is not executable\n        librt.so.1 =>    /lib/librt.so.1\n        libmcrypt.so.4 =>        /usr/local/lib/libmcrypt.so.4\n        libltdl.so.3 =>  /usr/local/lib/libltdl.so.3\n        libpng12.so.0 =>         /usr/local/lib/libpng12.so.0\n        libz.so =>       /usr/local/lib/libz.so\n        libresolv.so.2 =>        /lib/libresolv.so.2\n        libm.so.2 =>     /lib/libm.so.2\n        libnsl.so.1 =>   /lib/libnsl.so.1\n        libsocket.so.1 =>        /lib/libsocket.so.1\n        libxml2.so.2 =>  /usr/local/lib/libxml2.so.2\n        libiconv.so.2 =>         /usr/local/lib/libiconv.so.2\n        libc.so.1 =>     /lib/libc.so.1\n        libgcc_s.so.1 =>         /usr/local/lib/libgcc_s.so.1\n        libaio.so.1 =>   /lib/libaio.so.1\n        libmd.so.1 =>    /lib/libmd.so.1\n        libdl.so.1 =>    /lib/libdl.so.1\n        libmp.so.2 =>    /lib/libmp.so.2\n        libscf.so.1 =>   /lib/libscf.so.1\n        libpthread.so.1 =>       /usr/lib/libpthread.so.1\n        libdoor.so.1 =>  /lib/libdoor.so.1\n        libuutil.so.1 =>         /lib/libuutil.so.1\n        libgen.so.1 =>   /lib/libgen.so.1\n        /platform/SUNW,SPARC-Enterprise-T2000/lib/libc_psr.so.1\n        /platform/SUNW,SPARC-Enterprise-T2000/lib/libmd_psr.so.1", "id": 145773, "time": "2011-04-14T03:23:50Z", "bug_id": 51059, "creation_time": "2011-04-14T03:23:50Z", "is_private": false}]