[{"count": 0, "tags": [], "bug_id": 24775, "attachment_id": null, "id": 47527, "time": "2003-11-18T10:39:11Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2003-11-18T10:39:11Z", "is_private": false, "text": "Ive made some changes to the PDF Renderer to get padding-left working. During \nmy investigations I also found that the code for recording/restoring BPD and \nIPD for block-containers was duplicated in the AbstractRenderer. I have \nremoved the duplicated code which makes understanding the code in \nAbstractRenderer a little easier. My changes did not change the behaviour of \nblock-containers. They didnt work properly before the change-BCs are being \npositioned over the subsequent block. The top/left/width and height all seem \nto be ignored at this time.\n\nI will attach the patches for Abstract Renderer and PDF Renderer. I will also \ninclude my FO test case and new PDF. The before one just didnt some the blue \nblocks padded."}, {"count": 1, "tags": [], "creator": "bowditch_chris@hotmail.com", "is_private": false, "id": 47528, "attachment_id": 9153, "bug_id": 24775, "creation_time": "2003-11-18T10:39:40Z", "time": "2003-11-18T10:39:40Z", "text": "Created attachment 9153\nPDF Renderer patch file"}, {"count": 2, "tags": [], "creator": "bowditch_chris@hotmail.com", "is_private": false, "id": 47529, "attachment_id": 9154, "bug_id": 24775, "creation_time": "2003-11-18T10:40:01Z", "time": "2003-11-18T10:40:01Z", "text": "Created attachment 9154\nAbstract Renderer Patch file"}, {"count": 3, "tags": [], "bug_id": 24775, "text": "Created attachment 9155\ntest FO", "id": 47530, "time": "2003-11-18T10:40:53Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2003-11-18T10:40:53Z", "is_private": false, "attachment_id": 9155}, {"count": 4, "tags": [], "creator": "bowditch_chris@hotmail.com", "attachment_id": 9156, "is_private": false, "id": 47531, "time": "2003-11-18T10:41:18Z", "bug_id": 24775, "creation_time": "2003-11-18T10:41:18Z", "text": "Created attachment 9156\nresulting PDF"}, {"count": 5, "tags": [], "creator": "bowditch_chris@hotmail.com", "attachment_id": null, "is_private": false, "id": 47532, "time": "2003-11-18T10:53:44Z", "bug_id": 24775, "creation_time": "2003-11-18T10:53:44Z", "text": "Ooopss. I forgot to include the patch for BlockLayoutManager that reduces the \nIPD in reponse to padding-left. Ive also included the wrong PDF the one that \nshows the unaltered IPD, where the text flows out of the body-region.\n\nNote that the coloured backgrounds dont follow the block exactly, but this is \na separate issue.\n\n"}, {"count": 6, "tags": [], "bug_id": 24775, "text": "Created attachment 9157\nPatch for BLock Layout Mgr to reduce IPD for padding left", "id": 47533, "time": "2003-11-18T10:55:49Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2003-11-18T10:55:49Z", "is_private": false, "attachment_id": 9157}, {"count": 7, "tags": [], "creator": "bowditch_chris@hotmail.com", "attachment_id": 9158, "is_private": false, "id": 47534, "time": "2003-11-18T10:56:39Z", "bug_id": 24775, "creation_time": "2003-11-18T10:56:39Z", "text": "Created attachment 9158\nPDF with padding-left implemented AND IPD reduced"}, {"count": 8, "tags": [], "creator": "glenmazza@yahoo.com", "is_private": false, "id": 47584, "attachment_id": null, "bug_id": 24775, "creation_time": "2003-11-18T22:38:14Z", "time": "2003-11-18T22:38:14Z", "text": "Chris, for patches, we need the \"diff -u\" option with its wonderful +'s and -\n's.  Could you resubmit the code patches?  Thanks."}, {"count": 9, "tags": [], "creator": "glenmazza@yahoo.com", "attachment_id": null, "is_private": false, "id": 47586, "time": "2003-11-18T22:50:19Z", "bug_id": 24775, "creation_time": "2003-11-18T22:50:19Z", "text": "\" During my investigations I also found that the code for recording/restoring \nBPD and IPD for block-containers was duplicated in the AbstractRenderer.  I \nhave removed the duplicated code which makes understanding the code in \nAbstractRenderer a little easier.\"\n\nChris, \n\nI'm not clear on your \"duplication\" point--AbstractRenderer is the base class \nof *every* non-structural renderer--PDF, PCL, PS, TXT, etc., whether the \nrenderer is currently implemented or not.  Why are you commenting out generic \ncode in AbstractRenderer based on a particular overridden implementation in a \nsubclass (here, PDFRenderer)?  \n\nAfter all, once PDFRenderer overrides a function in AbstractRenderer, it's \noverridden--where is there a duplication issue?  (Also, please clarify *which* \nmethods had the duplication so I can zoom in immediately to what you are \ntalking about--patches--until applied--rarely immediately inform us of that!)\n\nAlso, commenting out is highly unpleasant here (people forget *why* it's \ncommented out)--if the code is not correct (which I'm not sure of yet, either \nway), then it should be removed--we always have CVS to bring it back if needed!\n\nThanks again,\nGlen"}, {"count": 10, "tags": [], "bug_id": 24775, "text": "Second thought, never mind w/resubmitting--I can handle these current patches.  \nJust use cvs diff -u in the future though.  Thanks!", "id": 47590, "time": "2003-11-18T23:04:41Z", "creator": "glenmazza@yahoo.com", "creation_time": "2003-11-18T23:04:41Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 24775, "text": "Hi Glen,\n\nsorry for not specifying -u on diff, will do in future. Also I think the line \nendings may be wrong in those diff files, i.e. CRLF instead of LF. Let me know \nif you want me to resubmit.\n\nAs for AbstractRenderer, the bits I changed had nothing to do with PDF \nspecific or padding-left stuff. Take a look at \nrenderBlock/renderBlocks/renderBlockViewPort if you follow the code through \nyou will see in several place comments about save IPD/BPD for block container. \nRegardless of whether specific renderers are overriding one or more of these, \nthere are several bits that are unnecessary.\n\nI can understand your caution here. If preferred you can simply apply the BLM \nand PDFRenderer patches and padding-left will work. The changes to \nAbstractRenderer were simply a clean-up exercise which made the code IMHO a \nlittle easier to understand. I probably should have submitted these changes as \na separate patch.", "id": 47606, "time": "2003-11-19T09:07:24Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2003-11-19T09:07:24Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "creator": "glenmazza@yahoo.com", "attachment_id": null, "is_private": false, "id": 47660, "time": "2003-11-19T23:11:06Z", "bug_id": 24775, "creation_time": "2003-11-19T23:11:06Z", "text": "No, a separate bug report is unneeded.  Thanks for the explanation."}, {"count": 13, "tags": [], "bug_id": 24775, "text": "OK, Chris, I'm looking at your changes right now.\n\nSome early comments:\n1.) Thanks for providing the before & after PDF -- picture is worth a 1,000 \nwords in quickly determining what you're trying to fix.\n\n2.) In the future, just one patch file should be needed per Bugzilla issue (if \nthere's something we disagree with, we can remove that relevant section from \nthe single patch file)--\"cvs diff - u > mypatch.txt\" from the org/apache/fop \ndirectory may be easiest.\n\n3.) Please check our coding standards on \nhttp://xml.apache.org/fop/dev/conventions.html\n\nIn particular:  don't use tabs--use four spaces per indent instead\n\nAlso, follow the Java spacing conventions: \nhttp://java.sun.com/docs/codeconv/html/CodeConventions.doc7.html#682\n\nInstead of:\nInteger paddingStart = (Integer)block.getTrait(Trait.PADDING_START);\nIPMarginOffset+=paddingStart.intValue(); \n\nThis should be done:\nInteger paddingStart = (Integer) block.getTrait(Trait.PADDING_START);\nIPMarginOffset += paddingStart.intValue();\n\nI've made the changes to your patches.\n\nThanks,\nGlen", "id": 47976, "time": "2003-11-23T21:50:45Z", "creator": "glenmazza@yahoo.com", "creation_time": "2003-11-23T21:50:45Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 24775, "text": "Hi Glen,\n\nthanks for the feedback. I will try to create just one patch file in future. \n\nWill also try to avoid tabs, and apply proper spacing, but old habits die \nhard :-)", "id": 47996, "time": "2003-11-24T10:52:12Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2003-11-24T10:52:12Z", "is_private": false, "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 24775, "attachment_id": null, "text": "Chris,\n\n1.) I didn't apply the AbstractRenderer patch because the redundancy was not \nevident to me, especially if certain of the three functions you mentioned--\nrenderBlockViewPort, renderBlocks, renderBlock--end up being overridden.  For \nexample, redundancy may have been retained in the other methods to make sure \neverything will still work in case certain functionality was not carried over \nin overriding methods.  To hopefully make the redundancy more apparent to \nothers, however, I placed the three methods you mentioned together in the \nsource file.  Maybe they will see it--but I'm stumped! \n\nAgain, though, your patch would just have commented out the redundant code \nanyway, which is confusing to others.  They would have no idea the reason:  (1) \nis it broken and you plan on fixing it later?  (2) is it a future enhancement \nwaiting for other parts of the code to be ready first?  If the code is indeed \nuseless--as you're stating--we'll just remove it the future!\n\n2.) Applied the rest of the patch and it works fine--I even added a bit more to \nhandle padding-end.  It also works for nested blocks.  However, background \nproperties such as background-color will need fixing, because it is only being \ndrawn for the content-rectangle.  According to the spec (section 4.9.4 at \nhttp://www.w3.org/TR/xsl/slice4.html#rend-border), background color covers the \nwhole padding-rectangle, not just the content-rectangle within it. \n\nThanks,\nGlen\n", "id": 48037, "time": "2003-11-24T19:11:08Z", "creator": "glenmazza@yahoo.com", "creation_time": "2003-11-24T19:11:08Z", "is_private": false}, {"count": 16, "tags": [], "bug_id": 24775, "text": "Glen-thanks, just some final comments on this:\n\n1) AbstractRenderer. The PDF Renderer does override renderBlockViewport \nmethod, but the code in the super class method is copied to a large extent. I \nrealise that this does not mean all the renderers will override the same \nmethods or if they have copy the code from the super class. However you can \nargue that perhaps all renderers should follow the same pattern WRT to these 3 \nmethods. If they dont then the code in the abstract renderer ends up becoming \nspagetti like with redundant/duplicated bits.\n\nI understand and respect your reasoning here, I'm not going to bring it up \nagain-just added the above notes for clarification really.\n\n2) Yes I knew it would work for nested blocks-I wasnt sure what the desired \nbehaviour was for background color-thanks for finding the relavant part in the \nspec. Also thanks for doing padding-end, I was going to do that as my next \npatch-it should have been quite easy-just a tweak to BLM to reduce the IPD.\n", "id": 48070, "time": "2003-11-25T08:58:23Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2003-11-25T08:58:23Z", "is_private": false, "attachment_id": null}, {"count": 17, "tags": [], "creator": "glenmazza@yahoo.com", "is_private": false, "id": 48126, "attachment_id": null, "bug_id": 24775, "creation_time": "2003-11-25T22:53:33Z", "time": "2003-11-25T22:53:33Z", "text": "\"The PDF Renderer does override renderBlockViewport method, but the code in the \nsuper class method is copied to a large extent.\"\n\nOh--I wasn't looking in PDFRenderer for the redundancy.  I was looking at  \nrenderBlocks(), renderBlock(), and renderBlockViewPort() of AbstractRenderer--\ni.e., where you told me to look in your elaboration below.  (I had assumed, \nthen, that the duplication was among those three methods.)\n\nI asked you:  \"Please clarify *which* methods had the duplication so I can zoom \nin immediately to what you are talking about--patches--until applied--rarely \nimmediately inform us of that!\"  \n\nYour response did not answer that question--worse, it put me on the wrong \ntrack.  That sentence you wrote above--finally explaining where the duplication \nwas--I wish you had written that instead.  It would have saved me a lot of time \nand energy.  Try to be more precise next time...\n\n[At any rate, it would appear the child classes would be the better place to \nremove redundant code, not the base, so I probably would have skipped the \nchanges anyway.]  \n\nThanks,\nGlen\n"}, {"count": 18, "tags": [], "creator": "bowditch_chris@hotmail.com", "attachment_id": null, "is_private": false, "id": 48137, "time": "2003-11-26T09:08:36Z", "bug_id": 24775, "creation_time": "2003-11-26T09:08:36Z", "text": "Glen-apologies if you feel I've messed you about. But the redundancy IS in the \nthree methods renderBlock/RenderBlocks/RenderBlockViewPort. You say its \ndifficult to see-its also difficult to explain this via e-mail. \nPerhaps \"redundancy\" was the wrong word to use, and thats what misled you. In \neither case, enough time has been wasted by both of us here."}, {"count": 19, "tags": [], "text": "Indeed, I may have been losing sight of the forest for the trees--thanks for \nall your work on layout!\n\nGlen", "attachment_id": null, "bug_id": 24775, "id": 48208, "time": "2003-11-26T22:28:23Z", "creator": "glenmazza@yahoo.com", "creation_time": "2003-11-26T22:28:23Z", "is_private": false}, {"count": 20, "tags": [], "bug_id": 24775, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 156236, "time": "2012-04-01T07:06:06Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T07:06:06Z", "is_private": false, "attachment_id": null}]