[{"count": 0, "tags": [], "bug_id": 24440, "attachment_id": null, "text": "rmdir works fine with a fileset of **/* as long as there are directories to\nremove. But if the target directory is empty, the following stack trace results.\n\n    <ftp action=\"rmdir\"\n        server=\"${ftpserver}\"\n        userid=\"${username}\"\n        password=\"${password}\"\n        remotedir=\".\"\n        >\n        <fileset dir=\".\" includes=\"**/*\">\n        </fileset>\n    </ftp>\n\n\nBUILD FAILED\njava.lang.NullPointerException\n        at\norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.checkRemoteSensitivity(FTP.java:566)\n        at\norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.listFiles(FTP.java:550)\n        at\norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.scandir(FTP.java:372)\n        at\norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.checkIncludePatterns(FTP.java:276)\n        at\norg.apache.tools.ant.taskdefs.optional.net.FTP$FTPDirectoryScanner.scan(FTP.java:240)\n        at\norg.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles(FTP.java:1327)\n        at\norg.apache.tools.ant.taskdefs.optional.net.FTP.transferFiles(FTP.java:1422)\n        at org.apache.tools.ant.taskdefs.optional.net.FTP.execute(FTP.java:2050)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:302)\n        at org.apache.tools.ant.Task.perform(Task.java:401)\n        at org.apache.tools.ant.Target.execute(Target.java:338)\n        at org.apache.tools.ant.Target.performTasks(Target.java:365)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1237)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1094)\n        at org.apache.tools.ant.Main.runBuild(Main.java:669)\n        at org.apache.tools.ant.Main.startAnt(Main.java:220)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:215)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:90)", "id": 46885, "time": "2003-11-05T19:05:48Z", "creator": "alko@nc.rr.com", "creation_time": "2003-11-05T19:05:48Z", "is_private": false}, {"count": 1, "tags": [], "text": "I have prevented the procedure checkRemoteSensitivity from throwing a NPE if the\narray of FTPFile is null.\nI was not able to reproduce the bug on my site :\nthe build does not fail if the remotedirectory exists and is empty.\nthe build fails if the remote directory does not exist like\n<ftp ... remotedir=\"/nirvana\" .../> but then the stack trace is different and a\nBuildException has been thrown.\nWhich version of commons-net.jar are you using ?\nCheers,\nAntoine", "attachment_id": null, "bug_id": 24440, "id": 46892, "time": "2003-11-05T22:07:52Z", "creator": "antoine@apache.org", "creation_time": "2003-11-05T22:07:52Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 24440, "is_private": false, "text": "commons-net-1.1.0.jar", "id": 46900, "time": "2003-11-05T23:48:06Z", "creator": "alko@nc.rr.com", "creation_time": "2003-11-05T23:48:06Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "antoine@apache.org", "is_private": false, "id": 46908, "time": "2003-11-06T08:17:17Z", "bug_id": 24440, "creation_time": "2003-11-06T08:17:17Z", "tags": [], "text": "I am using commons-net-1.0.0.jar.\nthe javadoc of :\norg.apache.commons.net.ftp.FTPClient.listFiles().\n\nsays :\nIf the given current directory contains no files null is returned, otherwise an \narray of FTPFile instances representing the files in the directory is returned.\n\nI have seen that this was documented similarly in the revision used to build\ncommons-net-1.0.0\n\nTherefore this was really a bug in ant, but it is strange that I did not get hit\n in doing my tests.\n\nThanks for reporting the bug. I also checked that FTPClient.listFiles()\nreturning null is checked in all other call stacks, so we should be on the safe\nside.\n\nref :\nhttp://cvs.apache.org/viewcvs.cgi/jakarta-commons/net/src/java/org/apache/commons/net/ftp/FTPClient.java?rev=1.13&content-type=text/vnd.viewcvs-markup"}]