[{"count": 0, "tags": [], "bug_id": 54140, "attachment_id": null, "is_private": false, "id": 163390, "time": "2012-11-12T18:11:43Z", "creator": "markphip@gmail.com", "creation_time": "2012-11-12T18:11:43Z", "text": "I also added this as a comment in the closed bug: 39095.  I did not want to simply reopen and old bug, but it looks similar.\n\nI package Subversion Edge which bundles Apache 2.2.23 + SVN 1.7.7.  The version that includes Apache 2.2.23 was only released on October 26th and we have already had at least a dozen different users reporting they are now getting a problem with LDAP authentication on Windows servers.\n\nA user will get an HTTP 500 when making a Subversion request, and then subsequent requests for that user will be fine again for a while.  When they get the error, this is what is logged:\n\n[info] [client 204.11.125.146] [1248] auth_ldap authenticate: user XXXXX authentication failed; URI /svn/reposname [LDAP: ldap_simple_bind_s() failed][Unavailable]\n\nThis is only happening with Windows Apache servers.  I note that the 2.2.23 release includes the following change, which seems innocuous but also seems to be the only change related to LDAP in the CHANGES\n\nhttp://svn.apache.org/viewvc?view=revision&revision=1375696\n\n--- httpd/httpd/branches/2.2.x/include/util_ldap.h      2012/08/21\n17:48:34        1375695\n+++ httpd/httpd/branches/2.2.x/include/util_ldap.h      2012/08/21\n17:48:58        1375696\n@@ -30,7 +30,7 @@\n#include \"apr_time.h\"\n#include \"apr_ldap.h\"\n-#if APR_HAS_MICROSOFT_LDAPSDK\n+#ifdef LDAP_UNAVAILABLE\n#define AP_LDAP_IS_SERVER_DOWN(s)                ((s) == LDAP_SERVER_DOWN\n\\\n                 ||(s) == LDAP_UNAVAILABLE)\n#else"}, {"count": 1, "text": "AFAICT It's an enum on Windows and not a macro, so the new test doesn't work.", "bug_id": 54140, "attachment_id": null, "id": 163392, "time": "2012-11-12T18:36:43Z", "creator": "covener@gmail.com", "creation_time": "2012-11-12T18:36:43Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "covener@gmail.com", "text": "thanks for the report, if you're able to rebuild, please confirm the following rev does the trick?\n\nhttp://svn.apache.org/viewvc/httpd/httpd/trunk/include/util_ldap.h?r1=1408402&r2=1408401&pathrev=1408402&view=patch", "id": 163393, "time": "2012-11-12T19:00:21Z", "bug_id": 54140, "creation_time": "2012-11-12T19:00:21Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 54140, "attachment_id": null, "is_private": false, "id": 163394, "time": "2012-11-12T19:02:45Z", "creator": "markphip@gmail.com", "creation_time": "2012-11-12T19:02:45Z", "text": "Thanks.  We will apply that patch to our 2.2.23 build and I will let you know.  It will probably take a couple of days to get back to you."}, {"count": 4, "attachment_id": null, "bug_id": 54140, "is_private": false, "id": 163669, "time": "2012-11-26T14:06:25Z", "creator": "markphip@gmail.com", "creation_time": "2012-11-26T14:06:25Z", "tags": [], "text": "Sorry, realized that I never updated this issue.\n\nWe applied the change in r1408402 to our 2.2.23 builds and released an update to our community.  We have verification from several sources that this resolved the LDAP problems they were having.  I think this change would be great to backport to the 2.2.x releases if it has not been already.\n\nI do not know the issue tracker policy, so I will leave it to you to mark this issue as fixed.\n\nThanks"}, {"count": 5, "tags": [], "bug_id": 54140, "attachment_id": null, "id": 165604, "time": "2013-03-03T16:44:13Z", "creator": "sf@sfritsch.de", "creation_time": "2013-03-03T16:44:13Z", "is_private": false, "text": "fixed in 2.4.4 and 2.2.24"}]