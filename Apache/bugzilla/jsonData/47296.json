[{"text": "Created attachment 23740\nFilled rectangle pattern not applied.\n\nWe are generating the following SVG and then using FOP to convert this into a PDF. The PDF is rendered correctly and the referenced pattern applied if we do not encrypt the PDF. As soon as we encrypt the PDF the pattern is not applied. In both cases the SVG is identical. \n\n<?xml version=\"1.0\" encoding=\"utf-8\"?> \n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\" \"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\"> \n<svg xml:space=\"preserve\" height=\"297mm\" width=\"210mm\"> \n  <defs> \n    <pattern width=\"1\" x=\"0\" height=\"1\" y=\"0\" id=\"1219915834789\" patternUnits=\"userSpaceOnUse\"> \n      <image width=\"1\" x=\"0\" height=\"1\" id=\"img1\" y=\"0\" xlink:href=\"file:/tmp/A12/89.png\"/> \n    </pattern> \n  </defs> \n  <rect fill=\"url(#1219915834789)\" x=\"1.0in\" width=\"1.0in\" height=\"1.0in\" y=\"1.0in\" stroke=\"none\"/> \n</svg> \n\nThe code being used to encrypt the pdf is as follows: \n\nuserAgent.getRendererOptions().put( \n  \"encryption-params\", \n   new PDFEncryptionParams(null, null, false, true, true, true) \n);", "tags": [], "creator": "lea.thurman@onesoon.co.uk", "attachment_id": 23740, "count": 0, "id": 127545, "time": "2009-06-02T01:50:32Z", "bug_id": 47296, "creation_time": "2009-06-02T01:50:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 47296, "attachment_id": null, "id": 127662, "creation_time": "2009-06-04T14:05:32Z", "time": "2009-06-04T14:05:32Z", "creator": "adelmelle@apache.org", "text": "Hi Lea\n\nSorry for the rather late reply...\n\nCan you also attach the referenced PNG? That would make it slightly easier for us to reproduce the issue using the attached SVG. Thanks!\n\nAndreas", "is_private": false}, {"count": 2, "tags": [], "creator": "lea.thurman@onesoon.co.uk", "attachment_id": 23780, "id": 127754, "time": "2009-06-09T05:02:41Z", "bug_id": 47296, "creation_time": "2009-06-09T05:02:41Z", "is_private": false, "text": "Created attachment 23780\nImage associated with SVG\n\nImages as requested by Andreas."}, {"count": 3, "tags": [], "bug_id": 47296, "attachment_id": null, "id": 127880, "creation_time": "2009-06-11T08:09:22Z", "time": "2009-06-11T08:09:22Z", "creator": "lea.thurman@onesoon.co.uk", "text": "Hi Andreas,\n\nAny progress with regards this defect? If it is not being looked into then I will try to pick it up myself.\n\nMany Thanks\nLea.", "is_private": false}, {"count": 4, "tags": [], "creator": "adelmelle@apache.org", "text": "(In reply to comment #3)\n\nHi Lea\n\n> Any progress with regards this defect? If it is not being looked into then I\n> will try to pick it up myself.\n\nNo progress yet. So far, I have only been able to confirm that current FOP Trunk still exhibits the issue, but I'm not sure where to begin looking... Maybe something with org.apache.fop.pdf.PDFPattern, and the way it is handled in case of encryption. I notice the toPDF() method does not check for encryption, so unless this is automatically handled by the OutputStream that is passed in, that may explain why the viewer cannot parse the pattern correctly (?)\n\nRegards\n\nAndreas", "id": 127885, "time": "2009-06-11T08:35:18Z", "bug_id": 47296, "creation_time": "2009-06-11T08:35:18Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 47296, "attachment_id": null, "text": "resetting P2 open bugs to P3 pending further review", "id": 157373, "time": "2012-04-07T01:42:02Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:42:02Z", "is_private": false}]