[{"count": 0, "tags": [], "bug_id": 35701, "attachment_id": null, "id": 77214, "time": "2005-07-12T13:13:08Z", "creator": "masaoki@techfirm.co.jp", "creation_time": "2005-07-12T13:13:08Z", "is_private": false, "text": "Ab (apache benchmark) uses pollset to handle asynchronous I/O.  However, the\nusage is a little bit different from httpd's one, because ab frequently does\napr_pollset_remove.\nNew apr-1.x uses port_xxx system calls on Solaris 10, instead of traditional\npoll() system call.  The port_getn() is peculiar as it deletes the fds from list\nafter the event.  Current port.c implementation manages the deleted port list in\npollset->add_ring.  The list can be broken because add_ring contains the data\nwhich is also in query_ring.  The \"next\" and \"prev\" links in add_ring is broken\nwhen it is removed from query_ring."}, {"count": 1, "tags": [], "creator": "masaoki@techfirm.co.jp", "attachment_id": 15652, "text": "Created attachment 15652\nA patch to fix add_ring disorder in port.c\n\nThis patch fixes the add_ring disorder in port.c on Solaris 10.\nI tested this change on testall, on httpd 2.1.6-alpha, and also on ab.", "id": 77216, "time": "2005-07-12T13:23:25Z", "bug_id": 35701, "creation_time": "2005-07-12T13:23:25Z", "is_private": false}, {"count": 2, "tags": [], "creator": "chip@force-elite.com", "text": "I believe this was already fixed with a slitghtly different patch in APR-Trunk,\nbut it has not been put in a released version of APR, and hence, not in httpd 2.1.6", "id": 77428, "time": "2005-07-19T11:34:31Z", "bug_id": 35701, "creation_time": "2005-07-19T11:34:31Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 35701, "attachment_id": null, "id": 78913, "time": "2005-08-24T13:10:27Z", "creator": "jorton@redhat.com", "creation_time": "2005-08-24T13:10:27Z", "is_private": false, "text": "Can someone retest with the APR 1.2.1 release?"}, {"count": 4, "tags": [], "creator": "masaoki@techfirm.co.jp", "attachment_id": null, "text": "I confirmed the change in apr-1.2.1, and tested it on Solaris 10 with apache\nhttpd in trunk.  The add_ring disorder has gone.  I believe this issue is fixed.", "id": 79102, "time": "2005-08-27T04:51:57Z", "bug_id": 35701, "creation_time": "2005-08-27T04:51:57Z", "is_private": false}]