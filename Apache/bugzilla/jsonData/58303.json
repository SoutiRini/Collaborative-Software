[{"count": 0, "tags": [], "bug_id": 58303, "attachment_id": 33054, "text": "Created attachment 33054\nChange code to newer api of bouncycastle\n\nSMIMEAssertion uses deprecated api of bouncycastle.\n\nThe added patch tries to rework the code and removes the deprecations.", "id": 184858, "time": "2015-08-30T14:16:42Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2015-08-30T14:16:42Z", "is_private": false}, {"text": "Created attachment 33161\nCorrect usage of bc api\n\nThe old change did not work correctly. This one tries to fix it up, by really using a certificate holder and extracting the email values from the RDNs.", "tags": [], "creator": "felix.schumacher@internetallee.de", "attachment_id": 33161, "count": 1, "id": 185618, "time": "2015-10-04T20:51:26Z", "bug_id": 58303, "creation_time": "2015-10-04T20:51:26Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 58303, "attachment_id": 33178, "id": 185702, "time": "2015-10-08T19:02:42Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2015-10-08T19:02:42Z", "is_private": false, "text": "Created attachment 33178\nChange code to newer api of bouncycastle\n\nI think I have found all occurrences of the old vs new api. The unit tests work in eclipse, but not with ant, yet."}, {"count": 3, "tags": [], "bug_id": 58303, "attachment_id": null, "id": 185741, "time": "2015-10-12T19:55:01Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2015-10-12T19:55:01Z", "is_private": false, "text": "When I used the test case with the old implementation, I found two further issues.\n\nFirst, the emailAddress (E) component would not be able to be parsed by the jdk X500Principal(String) constructor. I had to add a keywordMap with the name and oid pair to the constructor, to be able to parse cn=name, E=email@example.org, ...\n\nSecond, the DN from the cert is constructed (probably by bouncycastle) in reverse order. Staying with the DN from above, it would be ..., E=email@example.org, cn=name\n\nI will commit the patch, that adds the keywordMap to the constructor, as I think this is a general problem and it will not change the overall behaviour of the code.\n\nThe second problem is less of a concern, since the newer api will ignore the order of the DN components."}, {"count": 4, "tags": [], "bug_id": 58303, "text": "Date: Mon Oct 12 19:58:56 2015\nNew Revision: 1708212\n\nURL: http://svn.apache.org/viewvc?rev=1708212&view=rev\nLog:\nAdd a keywordMap parameter when using the constructor of X500Principal.\n\nThis is necessary for DNs which have emailAddress components, which\nwhere not parsed correctly by the jdk.\n\nFor better debug logs both compared components will be logged now, when\ncomparing the issuerDN/certDN with given ones for the assertion.\n\nBugzilla Id: 58303\n\nModified:\n    jmeter/trunk/src/components/org/apache/jmeter/assertions/SMIMEAssertion.java\n\nDate: Mon Oct 12 20:10:37 2015\nNew Revision: 1708223\n\nURL: http://svn.apache.org/viewvc?rev=1708223&view=rev\nLog:\nAdd test cases for SMIMEAssertion.\n\nBugzilla Id: 58303\n\nAdded:\n    jmeter/trunk/test/resources/org/\n    jmeter/trunk/test/resources/org/apache/\n    jmeter/trunk/test/resources/org/apache/jmeter/\n    jmeter/trunk/test/resources/org/apache/jmeter/assertions/\n    jmeter/trunk/test/resources/org/apache/jmeter/assertions/email.pem\n    jmeter/trunk/test/resources/org/apache/jmeter/assertions/signed_email.eml\n    jmeter/trunk/test/src/org/apache/jmeter/assertions/SMIMEAssertionTest.java\n\nDate: Mon Oct 12 20:19:11 2015\nNew Revision: 1708224\n\nURL: http://svn.apache.org/viewvc?rev=1708224&view=rev\nLog:\nChange usage of bouncycastle api in SMIMEAssertion to get rid of the deprecation warnings.\n\nBugzilla Id: 58303\n\nModified:\n    jmeter/trunk/src/components/org/apache/jmeter/assertions/SMIMEAssertion.java\n    jmeter/trunk/xdocs/changes.xml", "id": 185742, "time": "2015-10-12T20:23:45Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2015-10-12T20:23:45Z", "is_private": false, "attachment_id": null}]