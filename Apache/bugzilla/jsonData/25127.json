[{"count": 0, "tags": [], "text": "Tomcat 4.1.29 will not run under IBM JVM 1.3.0\n\njava version \"1.3.0\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.3.0)\nClassic VM (build 1.3.0, J2RE 1.3.0 IBM build cx130-20010925 (JIT enabled: jitc))\n\nStartup with default build (off downloaded sources) build with IBM JDK (above)\nusing server-noexamples.xml.config with only <!-- Define a Coyote/JK2 AJP 1.3\nConnector on port 8009 --> line reenabled produces the following exceptions in\ncatalina.out\n[ERROR] Digester - -Begin event threw exception\n<java.util.MissingResourceException: Can't find bundle for base name\norg.apache.coyote.tomcat4.LocalStrings, locale\nen_US>java.util.MissingResourceException: Can't find bundle for base name\norg.apache.coyote.tomcat4.LocalStrings, locale en_US\n        at\njava.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:695)\n        at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:658)\n        at java.util.ResourceBundle.getBundle(ResourceBundle.java:534)\n        at org.apache.catalina.util.StringManager.<init>(StringManager.java:115)\n        at org.apache.catalina.util.StringManager.getManager(StringManager.java:260)\n        at\norg.apache.coyote.tomcat4.CoyoteConnector.<init>(CoyoteConnector.java:275)\n        at java.lang.Class.newInstance0(Native Method)\n        at java.lang.Class.newInstance(Class.java:254)\n        at\norg.apache.commons.digester.ObjectCreateRule.begin(ObjectCreateRule.java:253)\n        at org.apache.commons.digester.Rule.begin(Rule.java:200)\n        at org.apache.commons.digester.Digester.startElement(Digester.java:1273)\n        at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)\n        at\norg.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.commons.digester.Digester.parse(Digester.java:1548)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:449)\n        at org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n        at org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\n\nCatalina.start: java.util.MissingResourceException: Can't find bundle for base\nname org.apache.coyote.tomcat4.LocalStrings, locale en_US\njava.util.MissingResourceException: Can't find bundle for base name\norg.apache.coyote.tomcat4.LocalStrings, locale en_US\n        at\norg.apache.commons.digester.Digester.createSAXException(Digester.java:2540)\n        at\norg.apache.commons.digester.Digester.createSAXException(Digester.java:2566)\n        at org.apache.commons.digester.Digester.startElement(Digester.java:1276)\n        at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)\n        at\norg.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement(Unknown Source)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n        at\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.commons.digester.Digester.parse(Digester.java:1548)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:449)\n        at org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n        at org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)", "is_private": false, "bug_id": 25127, "id": 48367, "time": "2003-12-02T02:28:51Z", "creator": "afreeman@tenzing.com", "creation_time": "2003-12-02T02:28:51Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "afreeman@tenzing.com", "text": "Created attachment 9352\nMy build.properties", "id": 48368, "time": "2003-12-02T02:30:21Z", "bug_id": 25127, "creation_time": "2003-12-02T02:30:21Z", "is_private": false, "attachment_id": 9352}, {"count": 2, "tags": [], "text": "I have the same problem on Win2000, Sun-JDK 1.3.0c.\n\nAfter same research I found out that the problem are \"index.list\" files which \nwere added to some JARs in the 4.1.29 build.\nThese files should speed up the classloader (see \nhttp://java.sun.com/j2se/1.3/docs/guide/jar/jar.html). But somehow they don't \nwork in this case.\nFor testing create a small app which has \"tomcat-coyote.jar\" in it's classpath, \nand import the \"org.apache.coyote.*\"-namespace. Then make the following call:\nResourceBundle rb = ResourceBundle.getBundle\n(\"org.apache.coyote.tomcat4.LocalStrings\");\nYou will get the same exception you get with tomcat.\n\nWorkaround: Remove the index.list files from ALL the tomcat jars. There are \nsome (beetween 5 and 10 I think).\nThe easiest way (with windows) is to search for the string \"index.list\" in all \nJAR-Files in the tomcat directory. Then open each with winzip and delete the \nindex.list file. \nAfter this tomcat is starting once again. The only difference should be that \nclassloading is as fast/slow as in 4.1.27.", "is_private": false, "id": 50233, "creator": "wknauf@hg-online.de", "time": "2004-01-08T11:03:33Z", "bug_id": 25127, "creation_time": "2004-01-08T11:03:33Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 25127, "attachment_id": null, "is_private": false, "id": 50919, "time": "2004-01-21T22:17:23Z", "creator": "Keith@Apache.org", "creation_time": "2004-01-21T22:17:23Z", "text": "I could not repro the problem on linux, java version \"1.3.1_08\"\n"}, {"count": 4, "tags": [], "bug_id": 25127, "attachment_id": null, "is_private": false, "id": 50984, "time": "2004-01-22T17:08:16Z", "creator": "wknauf@hg-online.de", "creation_time": "2004-01-22T17:08:16Z", "text": "I verified it with some other Java version:\nWith 1.3.0_05 it worked fine.\nWith 1.3.0_01 I had the same crash as with the version in my last post (this \none was included in JBuilder 4)\n\nAfter some digging in the sun bug database, I came across the following two \nissues: \nhttp://developer.java.sun.com/developer/bugParade/bugs/4334201.html\nhttp://developer.java.sun.com/developer/bugParade/bugs/4401404.html\n\nThey sound a bit like the current problem, although I know too little about JAR \nindexing and ResourceBundles."}, {"count": 5, "tags": [], "creator": "markt@apache.org", "text": "From the comments this appears to be a JDK problem rather than a tomcat. It \nalso appears that it only occurs with some of the early 1.3.0 releases.\n\nThe simplest solution is to upgrade the JDK. If this option is not available \nthen the manual work aorund to remove the index.list files from the jars \nshould work.\n\nI am not going to remove the index.list files from the build so the majority \nof users who do not see this problem benefit from improved classloader \nperformance.", "id": 59565, "time": "2004-06-19T12:12:31Z", "bug_id": 25127, "creation_time": "2004-06-19T12:12:31Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "william.barker@wilshire.com", "text": "*** Bug 31769 has been marked as a duplicate of this bug. ***", "count": 6, "id": 65330, "time": "2004-10-19T18:44:31Z", "bug_id": 25127, "creation_time": "2004-10-19T18:44:31Z", "is_private": false}, {"count": 7, "tags": [], "creator": "aiego@isolutionsdojo.com", "text": "I am using jdk1.5.0_12 and apache-tomcat-6.0.14 and I am starting tomcat using \njsvc compiled from the same version of tomcat. At default configuration of \nserver.xml it is working, but when I configured the cluster in the server.xml, \nthis problem appears.\n\nHere is my cluster configuration in the server.xml:\n\n        <Cluster className=\"org.apache.catalina.ha.tcp.SimpleTcpCluster\"\n                 channelSendOptions=\"6\">\n\n          <Manager className=\"org.apache.catalina.ha.session.DeltaManager\"\n                   expireSessionsOnShutdown=\"false\"\n                   notifyListenersOnReplication=\"true\"/>\n\n          <Channel className=\"org.apache.catalina.tribes.group.GroupChannel\">\n            <Membership \nclassName=\"org.apache.catalina.tribes.membership.McastService\"\n                        address=\"228.0.0.4\"\n                        port=\"45564\"\n                        frequency=\"500\"\n                        dropTime=\"3000\"/>\n            <Receiver \nclassName=\"org.apache.catalina.tribes.transport.nio.NioReceiver\"\n                      address=\"auto\"\n                      port=\"5000\"\n                      selectorTimeout=\"100\"\n                      maxThreads=\"6\"/>\n\n            <Sender \nclassName=\"org.apache.catalina.tribes.transport.ReplicationTransmitter\">\n              <Transport \nclassName=\"org.apache.catalina.tribes.transport.nio.PooledParallelSender\"/>\n            </Sender>\n            <Interceptor \nclassName=\"org.apache.catalina.tribes.group.interceptors.TcpFailureDetector\"/>\n            <Interceptor \nclassName=\"org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor\"/\n>\n            <Interceptor \nclassName=\"org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor\"/\n>\n          </Channel>\n\n          <Valve className=\"org.apache.catalina.ha.tcp.ReplicationValve\"\n                 \nfilter=\".*\\.gif;.*\\.js;.*\\.jpg;.*\\.png;.*\\.htm;.*\\.html;.*\\.css;.*\\.txt;\"/>\n\n          <Deployer className=\"org.apache.catalina.ha.deploy.FarmWarDeployer\"\n                    tempDir=\"/tmp/war-temp/\"\n                    deployDir=\"/tmp/war-deploy/\"\n                    watchDir=\"/tmp/war-listen/\"\n                    watchEnabled=\"false\"/>\n\n          <ClusterListener \nclassName=\"org.apache.catalina.ha.session.ClusterSessionListener\"/>\n        </Cluster>\n\nHere is my startup script for jsvc:\n\nJAVA_HOME=/usr/local/java-1/jdk1.5.0_12\nCATALINA_HOME=/usr/local/java-1/apache-tomcat-6.0.14\nDAEMON_HOME=/usr/local/java-1/apache-tomcat-6.0.14\nTOMCAT_USER=tomcat\n\n# for multi instances adapt those lines.\nTMP_DIR=/var/tmp\nPID_FILE=/var/run/jsvc1.pid\nCATALINA_BASE=/usr/local/java-1/apache-tomcat-6.0.14\n\nCATALINA_OPTS=\"-Xms64M -Xmx64M\"\nCLASSPATH=\\\n$JAVA_HOME/lib/tools.jar:\\\n$CATALINA_HOME/bin/commons-daemon.jar:\\\n$CATALINA_HOME/bin/tomcat-juli.jar:\\\n$CATALINA_HOME/lib/catalina-ha.jar:\\\n$CATALINA_HOME/lib/catalina-tribes.jar:\\\n$CATALINA_HOME/lib/tomcat-coyote.jar:\\\n$CATALINA_HOME/bin/bootstrap.jar\n\ncase \"$1\" in\n  start)\n    #\n    # Start Tomcat\n    #\n    $DAEMON_HOME/bin/jsvc \\\n    -user $TOMCAT_USER \\\n    -home $JAVA_HOME \\\n    -Dcatalina.home=$CATALINA_HOME \\\n    -Dcatalina.base=$CATALINA_BASE \\\n    -Djava.io.tmpdir=$TMP_DIR \\\n    -wait 10 \\\n    -pidfile $PID_FILE \\\n    -outfile $CATALINA_HOME/logs/catalina.out \\\n    -errfile '&1' \\\n    $CATALINA_OPTS \\\n    -cp $CLASSPATH \\\n    org.apache.catalina.startup.Bootstrap \\\n    #\n    # To get a verbose JVM\n    #-verbose \\\n    # To get a debug of jsvc.\n    #-debug \\\n    exit $?\n    ;;\n\nMy OS is CentOS 4.4.\n", "id": 108604, "time": "2007-09-25T20:45:22Z", "bug_id": 25127, "creation_time": "2007-09-25T20:45:22Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 25127, "attachment_id": null, "is_private": false, "id": 108606, "time": "2007-09-25T21:00:55Z", "creator": "markt@apache.org", "creation_time": "2007-09-25T21:00:55Z", "text": "(In reply to comment #7)\n> I am using jdk1.5.0_12 and apache-tomcat-6.0.14 and I am starting tomcat using \n> jsvc compiled from the same version of tomcat. At default configuration of \n> server.xml it is working, but when I configured the cluster in the server.xml, \n> this problem appears.\n\nThis is nothing to do with this originak bug report. Please use the users list\nfor assistance in the first instance"}, {"count": 9, "attachment_id": null, "creator": "aiego@isolutionsdojo.com", "is_private": false, "id": 108627, "time": "2007-09-26T06:57:19Z", "bug_id": 25127, "creation_time": "2007-09-26T06:57:19Z", "tags": [], "text": "Mark, you are right.  This has nothing to do with this bug.  I'm sorry about \nthat.  Just in case,anyone ask how I was able to solve my problem.  I just put \nthe proper jar file in the classpath.  Here is my classpath\n\nCLASSPATH=\\\n$JAVA_HOME/lib/tools.jar:\\\n$CATALINA_HOME/bin/commons-daemon.jar:\\\n$CATALINA_HOME/bin/tomcat-juli.jar:\\\n$CATALINA_HOME/lib/catalina-ha.jar:\\\n$CATALINA_HOME/lib/catalina-tribes.jar:\\\n$CATALINA_HOME/lib/tomcat-coyote.jar:\\\n$CATALINA_HOME/lib/catalina.jar:\\\n$CATALINA_HOME/lib/servlet-api.jar:\\\n$CATALINA_HOME/lib/jasper.jar:\\\n$CATALINA_HOME/lib/jsp-api.jar:\\\n$CATALINA_HOME/lib/annotations-api.jar:\\\n$CATALINA_HOME/bin/bootstrap.jar\n"}]