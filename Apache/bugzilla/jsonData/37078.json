[{"count": 0, "tags": [], "bug_id": 37078, "is_private": false, "id": 81133, "creation_time": "2005-10-13T16:58:52Z", "time": "2005-10-13T16:58:52Z", "creator": "sdavids@gmx.de", "text": "I'm not sure if this is a known bug, a misconfiguration on my part or a \"feature\".\n\nI use java.util.logging. I want to be able to change the Logger levels remotely\nvia JMX (JConsole).\n\nAs it seems one cannot use JULI and use the LoggingMXBean successfully at the\nsame time.\n\nOne can either set the Logger level remotely but not the Handler level (without\nJULI) or one can set the Handler level but not the Logger level remotely (with\nJULI).\n\nTo clarify: I do *not* want to change the handler levels remotely -- just the\nLogger levels.\n\nExample: Set Handler to FINE at deploy time and tune Logger level remotely via\nJMX at runtime.\n\nUse the attached files for the steps below.\n\n@@ Without JULI - can set Logger level but not Handler level @@\n\nStart Tomcat 5.5.12 with:\n\n\"-server -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8081\n-Dcom.sun.management.jmxremote.ssl=false\n-Dcom.sun.management.jmxremote.authenticate=false\"\n\nOpen your browser and invoke the servlet; it's output:\n\nManager: null\nRemote: true\nManager Class: class java.util.logging.LogManager\nLogger through manager: true\nLogger through bean: true\nLogger level: null\n\nRun CommandLineManagementConsole (or use JConsole and check if LoggerNames\ncontains \"de.LogTestServlet\"); it's output:\n\nLogger through remote connection: true\n\n@@ with JULI - can set Handler level but not Logger level @\n\nStart Tomcat 5.5.12 with:\n\n\"-server -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=8081\n-Dcom.sun.management.jmxremote.ssl=false\n-Dcom.sun.management.jmxremote.authenticate=false\n-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager\"\n\nOpen your browser and invoke the servlet; it's output:\n\nManager: org.apache.juli.ClassLoaderLogManager\nRemote: true\nManager Class: class org.apache.juli.ClassLoaderLogManager\nLogger through manager: true\nLogger through bean: true\nLogger level: FINE\n\nRun CommandLineManagementConsole (or use JConsole and check if LoggerNames\ncontains \"de.LogTestServlet\"); it's output:\n\nLogger through remote connection: false", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 37078, "attachment_id": 16686, "text": "Created attachment 16686\nTest Servlet", "id": 81134, "time": "2005-10-13T17:00:10Z", "creator": "sdavids@gmx.de", "creation_time": "2005-10-13T17:00:10Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 37078, "is_private": false, "text": "Created attachment 16687\nClass to access the Logging MBean remotely", "id": 81135, "time": "2005-10-13T17:01:32Z", "creator": "sdavids@gmx.de", "creation_time": "2005-10-13T17:01:32Z", "attachment_id": 16687}, {"count": 3, "tags": [], "bug_id": 37078, "attachment_id": 16688, "id": 81136, "creation_time": "2005-10-13T17:02:21Z", "time": "2005-10-13T17:02:21Z", "creator": "sdavids@gmx.de", "text": "Created attachment 16688\n{webapp.base}/WEB-INF/classes/logging.properties", "is_private": false}, {"count": 4, "tags": [], "bug_id": 37078, "attachment_id": 16689, "id": 81137, "creation_time": "2005-10-13T17:03:10Z", "time": "2005-10-13T17:03:10Z", "creator": "sdavids@gmx.de", "text": "Created attachment 16689\n{webapp.base}/WEB-INF/classes/logging.properties", "is_private": false}, {"count": 5, "attachment_id": 16690, "bug_id": 37078, "text": "Created attachment 16690\n{catalina.base}/conf/logging.properties", "id": 81138, "time": "2005-10-13T17:04:02Z", "creator": "sdavids@gmx.de", "creation_time": "2005-10-13T17:04:02Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 37078, "text": "Created attachment 16691\n{webapp.base}/WEB-INF/web.xml", "id": 81139, "time": "2005-10-13T17:04:38Z", "creator": "sdavids@gmx.de", "creation_time": "2005-10-13T17:04:38Z", "is_private": false, "attachment_id": 16691}, {"count": 7, "attachment_id": null, "creator": "sdavids@gmx.de", "text": "logging.properties files are either the default ones or adjusted from the one here:\n\nhttp://jakarta.apache.org/tomcat/tomcat-5.5-doc/logging.html\n\nControlling Log Levels remotely with JConsole:\n\nhttp://java.sun.com/developer/technicalArticles/J2SE/jconsole.html#LoggingControl\n\nJMX command-line parameters for remote access:\n\nhttp://java.sun.com/j2se/1.5.0/docs/guide/management/agent.html#remote", "id": 81140, "time": "2005-10-13T17:11:00Z", "bug_id": 37078, "creation_time": "2005-10-13T17:11:00Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "creator": "remm@apache.org", "text": "This JMX feature cannot be made to work with non core loggers.\nWhy did you file a bug ? This is users@tomcat material ...", "id": 81161, "time": "2005-10-14T17:33:25Z", "bug_id": 37078, "creation_time": "2005-10-14T17:33:25Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "text": "This feature can work with non core loggers.\n\nLooking at the source I think it is a \"feature\" of your implementation -- so\nWONT-FIX would be a better resolution .)\n\nAs I see it both getLogger(final String name) getLoggerNames() return the\nLoggers registered under the calling Thread's Classloader.\n\nA solution would be to iterate classLoaderLoggers and return the aggregate\n(getLoggerNames) or search the aggregate for a logger (getLogger).\n\nBut I'm not into the details of the implementation yet.", "is_private": false, "id": 81172, "creator": "sdavids@gmx.de", "time": "2005-10-15T15:10:45Z", "bug_id": 37078, "creation_time": "2005-10-15T15:10:45Z", "attachment_id": null}, {"count": 10, "tags": [], "text": "Yes, and you know the classloader for which you want to change the logger how\nexactly ? Forget it.\n\nObviously, everything about jul is completely pluggable, so you can write your\nown log manager quite easily.", "is_private": false, "bug_id": 37078, "id": 81173, "time": "2005-10-15T15:14:20Z", "creator": "remm@apache.org", "creation_time": "2005-10-15T15:14:20Z", "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 37078, "attachment_id": null, "text": "I know this is totally unrelated to this bug, but I don't want hunt through the\nbug db for half an hour just to get in touch with you again :)\n\nI just downloaded the source distribution from\nhttp://apache.autinity.de/tomcat/tomcat-5/v5.5.12/src/apache-tomcat-5.5.12-src.zip\n\nUnzipped it.\n\nWent into the JULI \"home\" dir. And invoked ant there; the build failed because\nit could not find \"MANIFEST.MF\" there.\n\nRemoving manifest=\"${build.home}/conf/MANIFEST.MF\" from the build file fixed it;\nprobably either the line should be removed or a MANIFEST.MF should be supplied\nwith your source distribution.\n\n", "id": 81175, "time": "2005-10-15T15:33:38Z", "creator": "sdavids@gmx.de", "creation_time": "2005-10-15T15:33:38Z", "is_private": false}]