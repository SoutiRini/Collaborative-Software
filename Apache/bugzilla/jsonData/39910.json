[{"count": 0, "attachment_id": null, "bug_id": 39910, "text": "Hello,\n\naccording to discuttion in apache-users beginning at: \nhttp://mail-archives.apache.org/mod_mbox/httpd-users/200606.mbox/%3c20060626064242.GA11592@fantomas.sk%3e\n\nit seems, that documentation does not completely reflect the name virtual\nhosting behaviour of apache 1.3 (I got a report that 2.0 has the same\nbehaviour), or vice versa:\n\nNameVirtualHost 195.168.3.66:80\n\n<VirtualHost 195.168.3.66:80>\nServerName default.fantomas.sk\nDocumentRoot /home/webs/default.fantomas.sk\n</VirtualHost>\n\n<VirtualHost 195.168.3.66:80>\nServerName fantomas.fantomas.sk\nDocumentRoot /home/webs/fantomas.fantomas.sk\n</VirtualHost>\n\n<VirtualHost 195.168.3.66:80>\nServerName 195.168.3.66\nDocumentRoot /home/webs/195.168.3.66\n</VirtualHost>\n\nAccording the documentation, requests for Host: 195.168.3.66 should fall in the\nthird virtual host (ServerName 195.168.3.66), while requests for all undefined\nvirtual hosts at IP 195.168.3.66  should go to first one. However it seems not\nto be the case. I tried to request each virtual host once:\n\nLogFormat \"%{%s}t %v %V %{Host}o %{Host}i %a %h %>s %b %T %u \\\"%U\\\"\n\\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" testing\n\n1151335141 default.fantomas.sk default.fantomas.sk - default.fantomas.sk\n195.168.3.66 fantomas.fantomas.sk 200 20 4 - \"/\" \"-\" \"-\"\n1151335149 default.fantomas.sk 195.168.3.66 - 195.168.3.66 195.168.3.66\nfantomas.fantomas.sk 200 20 4 - \"/\" \"-\" \"-\"\n1151335157 fantomas.fantomas.sk fantomas.fantomas.sk - fantomas.fantomas.sk\n195.168.3.66 fantomas.fantomas.sk 200 21 5 - \"/\" \"-\" \"-\"\n\nDefining <VirtualHost *:80> would cause the host to be defined on other\naddresses, where I run different virtual hosts (and do not want to run this one).\n\n(I've tried to solve this ticket in bug 11890 some time ago, but I had some\nproblems explaing it that time )", "id": 90634, "time": "2006-06-27T12:01:45Z", "creator": "uhlar@fantomas.sk", "creation_time": "2006-06-27T12:01:45Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 39910, "text": "Incidentally, I've tested this in 2.0.55 and gotten similar results.  It is a\nminor issue, since it only applies to people who want to treat requests for the\nIP address differently from requests for \"unmatched\" names.  But at minimum, it\nis not documented correctly.  A quick skim of the vhost matching code was not\nenough to make me confident in fixing the documentation.", "id": 90637, "time": "2006-06-27T15:21:54Z", "creator": "slive@apache.org", "creation_time": "2006-06-27T15:21:54Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 39910, "text": "This may be the answer:\n\nhttp://httpd.apache.org/docs/1.3/vhosts/details.html\n\nThe complete list of names in the VirtualHost  directive are treated just like a\nServerAlias (but are not overridden by any ServerAlias statement) if all names\nresolve to the same address set. Note that subsequent Port statements for this\nvhost will not affect the ports assigned in the address set.\n\nIf so, I would like to have possibility to turn off this behaviour... should I\nchange severity to \"Enhancement\"?\n", "id": 90638, "time": "2006-06-27T16:29:19Z", "creator": "uhlar@fantomas.sk", "creation_time": "2006-06-27T16:29:19Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 39910, "attachment_id": null, "id": 91126, "time": "2006-07-11T13:21:20Z", "creator": "uhlar@fantomas.sk", "creation_time": "2006-07-11T13:21:20Z", "is_private": false, "text": "according to\nhttp://mail-archives.apache.org/mod_mbox/httpd-users/200606.mbox/%3cb61a4e530606291504m76c03fbeh40d2ad582abe359c@mail.gmail.com%3e\nthis is done, but I haven't seen the reason:\n<CITE>\nIn the source, the\n<VirtualHost> name is searched first (in order of appearance in conf\nfile) and returns a match before ServerName/Alias is even tried.\nThere is even a comment in the source stating that \"If this is a\nNameVirtualHost then we may not be doing the Right Thing\".\n</CITE>\n\nAlso, I found out a workaround that works - define hostname pointing to local IP\nin /etc/hosts (not existing in DNS), and create virtual hosts on it. More at\nhttp://mail-archives.apache.org/mod_mbox/httpd-users/200607.mbox/ajax/%3c20060711125407.GC8747@fantomas.sk%3e\n"}]