[{"count": 0, "tags": [], "creator": "martin.t.kutschker@blackbox.net", "text": "On my Linux (RedHat 7.2) mod_ssl logs an error whenever it tries to access a\nsystem v semaphore based mutex. For whatever reason, it does not complain when\ncreating the mutex. It looks like a permission problem to me (I added error\nnumber reporting to mod_ssl), but I don't know why. Apache itself creates the\nshared mem and the semaphores as root and nobody with the permissions set to 600.\n\nAfter forcing file based locking by hacking(see bug #8122) the errors disappeared.", "id": 13678, "time": "2002-04-15T19:36:32Z", "bug_id": 8124, "creation_time": "2002-04-15T19:36:32Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 8124, "attachment_id": null, "is_private": false, "id": 13765, "time": "2002-04-16T14:05:51Z", "creator": "andreas@netbank.com.br", "creation_time": "2002-04-16T14:05:51Z", "text": "Probably related to these log messages I'm seeing in my logs (linux) whenever an\nSSL connection comes in:\n[16/Apr/2002 10:30:07 19876] [warn]  Failed to acquire global mutex lock\n[16/Apr/2002 10:30:07 19876] [warn]  Failed to release global mutex lock\n\nNo mutex file shows up in the log dir. What exactly are the consequences of this\nwarning I see in the logs?"}, {"count": 2, "tags": [], "bug_id": 8124, "attachment_id": null, "id": 13769, "time": "2002-04-16T14:28:38Z", "creator": "martin.t.kutschker@blackbox.net", "creation_time": "2002-04-16T14:28:38Z", "is_private": false, "text": "Andreas, mod_ssl does never user file based locking due to bug #8122, so no file\nwill show up. The warnings imply that mod_ssl is not using lock, so it's like\nsaying \"SSLMutex none\".\n\nMy theory is that Apache creates the semaphores and THEN switches user/group\nlocking mod_ssl out of shm/sem."}, {"count": 3, "tags": [], "creator": "martin.t.kutschker@blackbox.net", "text": "Created attachment 1793\nimproved error reporting", "id": 15550, "time": "2002-05-06T16:50:03Z", "bug_id": 8124, "creation_time": "2002-05-06T16:50:03Z", "is_private": false, "attachment_id": 1793}, {"count": 4, "tags": [], "creator": "martin.t.kutschker@blackbox.net", "text": "The attachment adds apr_sterror output to the mutex functions. They will report\n\"Permission denied errors\" for acquiring and releasing.\n\nThese changes are included in my patch for bug #8122.", "id": 15551, "time": "2002-05-06T16:53:54Z", "bug_id": 8124, "creation_time": "2002-05-06T16:53:54Z", "is_private": false, "attachment_id": null}, {"count": 5, "attachment_id": null, "creator": "jwoolley@apache.org", "text": "The problem is that the permissions on the sysv semaphore are set wrong.  This is the    \nsame PR8143, except in a different module.  (PR8143 is mod_rewrite, but the same thing is   \nhappening.)  A general fix for this is in the works.   ", "id": 15552, "time": "2002-05-06T16:54:55Z", "bug_id": 8124, "creation_time": "2002-05-06T16:54:55Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 8124, "attachment_id": null, "text": "*** Bug 8186 has been marked as a duplicate of this bug. ***", "id": 15683, "time": "2002-05-07T22:42:34Z", "creator": "jwoolley@apache.org", "creation_time": "2002-05-07T22:42:34Z", "is_private": false}, {"count": 7, "tags": [], "creator": "jwoolley@apache.org", "text": "*** Bug 8890 has been marked as a duplicate of this bug. ***", "id": 15685, "time": "2002-05-07T22:42:58Z", "bug_id": 8124, "creation_time": "2002-05-07T22:42:58Z", "is_private": false, "attachment_id": null}, {"count": 8, "attachment_id": null, "creator": "jwoolley@apache.org", "text": "*** Bug 8930 has been marked as a duplicate of this bug. ***", "id": 15764, "time": "2002-05-09T04:29:22Z", "bug_id": 8124, "creation_time": "2002-05-09T04:29:22Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "creator": "jwoolley@apache.org", "text": "this problem still exists in 2.0.36, so I'm updating the version number", "id": 15769, "time": "2002-05-09T05:22:56Z", "bug_id": 8124, "creation_time": "2002-05-09T05:22:56Z", "is_private": false, "attachment_id": null}, {"count": 10, "attachment_id": null, "creator": "jerenkrantz@apache.org", "is_private": false, "id": 15992, "time": "2002-05-13T08:28:20Z", "bug_id": 8124, "creation_time": "2002-05-13T08:28:20Z", "tags": [], "text": "Based on Aaron's patch to mod_rewrite, I have committed a temporary fix for this\nproblem into CVS.  Can you please try the latest version from CVS and see if it\nis fixed now?\n\nThanks for using Apache!"}, {"count": 11, "tags": [], "creator": "sunkan@zappa.cx", "text": "It looks like it works fine for me :)\n\nNo more\n\n[warn]  Failed to acquire global mutex lock\n[warn]  Failed to release global mutex lock\n\nin ssl_engine_log either", "id": 16007, "time": "2002-05-13T14:12:12Z", "bug_id": 8124, "creation_time": "2002-05-13T14:12:12Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "creator": "trawick@apache.org", "text": "Justin committed a fix for this problem on May 13; it will be in the\nnext release of Apache 2.0.", "id": 16072, "time": "2002-05-14T13:27:32Z", "bug_id": 8124, "creation_time": "2002-05-14T13:27:32Z", "is_private": false, "attachment_id": null}, {"count": 13, "attachment_id": null, "creator": "martin.t.kutschker@blackbox.net", "is_private": false, "id": 16081, "time": "2002-05-14T14:27:38Z", "bug_id": 8124, "creation_time": "2002-05-14T14:27:38Z", "tags": [], "text": "Is there a reason why the fix does not include my little patch for error reporting?\n\nOtherwise, thanx for the fix."}, {"count": 14, "tags": [], "text": "As for why the patch for error reporting wasn't committed:\n\nWhat is needed is for ssl_log() function to be changed to allow an optional\napr_status_t error code to be passed in.  Alternatively, a new ssl_log_error()\nfunction could be created which allows an apr_status_t error code to be \npassed in.  Either way, callers don't have to worry about formatting the \napr_strerror() string or the apr_status_t error code.\n\nI'll try to get a discussion started on dev@httpd.apache.org to see what is\nthe preferable way to get the diagnostics logged.\n\nThanks...", "is_private": false, "id": 16082, "creator": "trawick@apache.org", "time": "2002-05-14T14:37:46Z", "bug_id": 8124, "creation_time": "2002-05-14T14:37:46Z", "attachment_id": null}]