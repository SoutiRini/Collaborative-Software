[{"count": 0, "text": "Created attachment 29342\nNew build of apacheJmeter.jar with updated UrlConfigGui.java\n\nThis seems like a duplicate of bug 52613. I tried the fix and it doesn't seem to be working. \n\nI am still getting the error:\n\nResponse message: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: \"\" \"\n\nPlease assist.\n\nThanks in advance", "bug_id": 53840, "attachment_id": 29342, "id": 162007, "time": "2012-09-07T19:22:20Z", "creator": "nikinpatel@gmail.com", "creation_time": "2012-09-07T19:22:20Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 53840, "attachment_id": null, "id": 162008, "time": "2012-09-07T19:31:18Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-09-07T19:31:18Z", "is_private": false, "text": "Hello,\nCan you attach:\n- Simple Test plan showing the issue\n\n- jmeter.log\n\nWhat is there exactly in the attached file ?\n\nRegards\n\nPhilippe"}, {"count": 2, "tags": [], "bug_id": 53840, "text": "Created attachment 29344\nJmeter.log", "id": 162011, "time": "2012-09-07T19:38:35Z", "creator": "nikinpatel@gmail.com", "creation_time": "2012-09-07T19:38:35Z", "is_private": false, "attachment_id": 29344}, {"count": 3, "tags": [], "bug_id": 53840, "text": "The first attachment contains the new ApacheJmeter.jar I am using.\n\nSecond attachment contains Jmeter.log", "id": 162012, "time": "2012-09-07T19:39:37Z", "creator": "nikinpatel@gmail.com", "creation_time": "2012-09-07T19:39:37Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 53840, "is_private": false, "id": 162014, "attachment_id": null, "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-09-07T20:30:23Z", "time": "2012-09-07T20:30:23Z", "text": "Thanks, \nReading your log file, issue occurs while you are recording using HTTP Proxy server, right ?\n\nPlease attach Test Plan, it's the most important one to reproduce.\nAttached jar is useless, you can obsolete it.\n \nCan you try with next nightly build revision r1382138, I have just updated code to get more logs:\n- https://builds.apache.org/job/JMeter-trunk/lastSuccessfulBuild/artifact/trunk/dist/\n\nRead following instructions to install this version:\n- http://jmeter.apache.org/nightly.html\n\n\nBefore doing so, change the following in jmeter.properties:\nlog_level.jmeter=DEBUG\nlog_level.jmeter.junit=DEBUG\nlog_level.jmeter.control=DEBUG\nlog_level.jmeter.testbeans=DEBUG\nlog_level.jmeter.engine=DEBUG\nlog_level.jmeter.threads=DEBUG\nlog_level.jmeter.testelement=DEBUG\nlog_level.jmeter.util=DEBUG\nlog_level.jmeter.util.classfinder=DEBUG\nlog_level.jmeter.test=DEBUG\nlog_level.jmeter.protocol.http=DEBUG\n# For CookieManager, AuthManager etc:\nlog_level.jmeter.protocol.http.control=DEBUG\nlog_level.jmeter.protocol.http.proxy=DEBUG\n\nRegards\nPhilippe"}, {"count": 5, "tags": [], "bug_id": 53840, "is_private": false, "text": "Thank you for the nightly build but unfortunately I can't even get the apachejmeter.jar to execute. \n\nI ended up turning on the additional logging as you suggested and think I found something.\n\nYou are correct regarding the test. I am running Proxy Server and a recording controller to record my steps executed against the web page. \n\nEverything works but in one step when I try to save the form. It seems like it's having trouble with one of the fields: Terms. This field has a value of '0 %'\n\nIf you look at the attached log: and locate line 20794 - you can see the value for Terms and next line is where the error occurs. \n\nI am not a guru in this but seems like there is a problem with encoding the '%' with using java.lang3 I was initially using commons.lang (2.6 version0. I updated to Lang3 (version 3.1) but doesn't seem to help. \n\nAny assistance with this is greatly appreciated.\n\n\nsnap from log:\n===============================================================================\n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.proxy.HttpRequestHdr: rawPostData in default JRE encoding: <Action UIStatus=\"2\"><Vendor Id=\"9292\" HOST_ID=\"0\" VENDOR=\"9292\" TERMS_TYPE=\"No Terms\" TERMS=\"0 %\" AUTO_PRICE=\"Use System Default\" VM_VENDOR_TYPE=\"DSD Vendor\" ITEM_FORMAT=\"PLU\" COST_ENTRY_SORT=\"UPC/EAN\" VM_REPORT_SORT=\"UPC/EAN\" VM_ORDER_SORT=\"UPC/EAN\" VM_RECEIVING_SORT=\"UPC/EAN\" VM_MAX_BACK_ORDERS=\"99\" MAX_OPEN_DAYS=\"99\" PAY_BASED_ON=\"System Cost\" ORDER_COST_DATE=\"Use System Rule\" VM_CONSIDER_FREE=\"False\" VM_SHOW_DETAIL=\"False\" VM_UPDATE_COST=\"No\" RD_USE_VENDOR_CC=\"False\" BLIND_RECEIVING=\"Default\" EXCLUDE_RECEIVED_COST=\"False\" PRINT_ITEM_ADJ=\"False\" PRINT_OVERALL_ADJ=\"False\" PRINT_TAX_DETAIL=\"False\" BLOCK_PRICE_VIEW=\"False\" DELIVERY_STATUS=\"No Delivery\" AUTO_RECEIVE=\"False\" TARGET_GM_FLAG=\"%\" MINIMUM_GM_FLAG=\"%\" MARGIN_TYPE=\"Gross Margin\" HOLD_REGULAR=\"Default\" HOLD_SPECIALS=\"Default\" TRUSTING_VENDOR=\"False\" AUTO_ACCEPT=\"All\" EARLY_RCPT_AFFECTS=\"All Costs\" SBT_ELIGIBLE=\"Not eligible\" SBT_REPORTING_DAY=\"Monday\" AUTO_BALANCE_FLAG=\"$\" DAX_MANAGED=\"False\" CHANGE_ID=\"QA\" CHANGE_SOURCE=\"Manual Change\" ORIGINAL_SOURCE=\"Manual Change\" RECORD_STATUS=\"Add\" RECORD_STATUS_DATE=\"9/7/2012 8:34:58 AM\" VENDOR_NAME=\"test\" UIStatus=\"2\"/></Action> \n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.proxy.HttpRequestHdr: Request: POST http://vmdal-hqqa9/retalixhq/GG_Implementation/ScreenEntity/ScreenEntityHTTP.aspx?Action=Save&ET=Vendor&TT=Single&Sid=1347280336092 HTTP/1.1\nx-requested-with: XMLHttpRequest\nAccept-Language: en-us\nReferer: http://vmdal-hqqa9/retalixhq/GG_Implementation/ScreenEntity/ScreenEntityPage.aspx?ET=Vendor&TT=Single&WM=2&UID=9292&Sid=1347280331908&UITH=Blue&MUID=window_0\nAccept: */*\nContent-Type: application/x-www-form-urlencoded\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; Tablet PC 2.0)\nHost: vmdal-hqqa9\nContent-Length: 1146\nProxy-Connection: Keep-Alive\nPragma: no-cache\nCookie: RHQ=sid=5aaeb66c-e174-4f4c-9928-83cffcc62150\n\n<Action UIStatus=\"2\"><Vendor Id=\"9292\" HOST_ID=\"0\" VENDOR=\"9292\" TERMS_TYPE=\"No Terms\" TERMS=\"0 %\" AUTO_PRICE=\"Use System Default\" VM_VENDOR_TYPE=\"DSD Vendor\" ITEM_FORMAT=\"PLU\" COST_ENTRY_SORT=\"UPC/EAN\" VM_REPORT_SORT=\"UPC/EAN\" VM_ORDER_SORT=\"UPC/EAN\" VM_RECEIVING_SORT=\"UPC/EAN\" VM_MAX_BACK_ORDERS=\"99\" MAX_OPEN_DAYS=\"99\" PAY_BASED_ON=\"System Cost\" ORDER_COST_DATE=\"Use System Rule\" VM_CONSIDER_FREE=\"False\" VM_SHOW_DETAIL=\"False\" VM_UPDATE_COST=\"No\" RD_USE_VENDOR_CC=\"False\" BLIND_RECEIVING=\"Default\" EXCLUDE_RECEIVED_COST=\"False\" PRINT_ITEM_ADJ=\"False\" PRINT_OVERALL_ADJ=\"False\" PRINT_TAX_DETAIL=\"False\" BLOCK_PRICE_VIEW=\"False\" DELIVERY_STATUS=\"No Delivery\" AUTO_RECEIVE=\"False\" TARGET_GM_FLAG=\"%\" MINIMUM_GM_FLAG=\"%\" MARGIN_TYPE=\"Gross Margin\" HOLD_REGULAR=\"Default\" HOLD_SPECIALS=\"Default\" TRUSTING_VENDOR=\"False\" AUTO_ACCEPT=\"All\" EARLY_RCPT_AFFECTS=\"All Costs\" SBT_ELIGIBLE=\"Not eligible\" SBT_REPORTING_DAY=\"Monday\" AUTO_BALANCE_FLAG=\"$\" DAX_MANAGED=\"False\" CHANGE_ID=\"QA\" CHANGE_SOURCE=\"Manual Change\" ORIGINAL_SOURCE=\"Manual Change\" RECORD_STATUS=\"Add\" RECORD_STATUS_DATE=\"9/7/2012 8:34:58 AM\" VENDOR_NAME=\"test\" UIStatus=\"2\"/></Action> \n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.proxy.DefaultSamplerCreator: getSampler: sampler path =  \n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.proxy.DefaultSamplerCreator: Proxy: setting server: vmdal-hqqa9 \n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.proxy.DefaultSamplerCreator: Proxy: setting method: POST \n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.proxy.DefaultSamplerCreator: Proxy: setting port: 80 \n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.proxy.HttpRequestHdr: Proxy: setting protocol to : http \n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.proxy.DefaultSamplerCreator: Proxy: setting path: /retalixhq/GG_Implementation/ScreenEntity/ScreenEntityHTTP.aspx?Action=Save&ET=Vendor&TT=Single&Sid=1347280336092 \n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.proxy.DefaultSamplerCreator: Using encoding utf-8 for request body \n2012/09/10 08:32:16 DEBUG - jmeter.protocol.http.sampler.HTTPSamplerBase: adding argument: name: <Action UIStatus value: \"2\"><Vendor Id=\"9292\" HOST_ID=\"0\" VENDOR=\"9292\" TERMS_TYPE=\"No Terms\" TERMS=\"0 %\" AUTO_PRICE=\"Use System Default\" VM_VENDOR_TYPE=\"DSD Vendor\" ITEM_FORMAT=\"PLU\" COST_ENTRY_SORT=\"UPC/EAN\" VM_REPORT_SORT=\"UPC/EAN\" VM_ORDER_SORT=\"UPC/EAN\" VM_RECEIVING_SORT=\"UPC/EAN\" VM_MAX_BACK_ORDERS=\"99\" MAX_OPEN_DAYS=\"99\" PAY_BASED_ON=\"System Cost\" ORDER_COST_DATE=\"Use System Rule\" VM_CONSIDER_FREE=\"False\" VM_SHOW_DETAIL=\"False\" VM_UPDATE_COST=\"No\" RD_USE_VENDOR_CC=\"False\" BLIND_RECEIVING=\"Default\" EXCLUDE_RECEIVED_COST=\"False\" PRINT_ITEM_ADJ=\"False\" PRINT_OVERALL_ADJ=\"False\" PRINT_TAX_DETAIL=\"False\" BLOCK_PRICE_VIEW=\"False\" DELIVERY_STATUS=\"No Delivery\" AUTO_RECEIVE=\"False\" TARGET_GM_FLAG=\"%\" MINIMUM_GM_FLAG=\"%\" MARGIN_TYPE=\"Gross Margin\" HOLD_REGULAR=\"Default\" HOLD_SPECIALS=\"Default\" TRUSTING_VENDOR=\"False\" AUTO_ACCEPT=\"All\" EARLY_RCPT_AFFECTS=\"All Costs\" SBT_ELIGIBLE=\"Not eligible\" SBT_REPORTING_DAY=\"Monday\" AUTO_BALANCE_FLAG=\"$\" DAX_MANAGED=\"False\" CHANGE_ID=\"QA\" CHANGE_SOURCE=\"Manual Change\" ORIGINAL_SOURCE=\"Manual Change\" RECORD_STATUS=\"Add\" RECORD_STATUS_DATE=\"9/7/2012 8:34:58 AM\" VENDOR_NAME=\"test\" UIStatus=\"2\"/></Action> metaData: = contentEncoding: utf-8 \n2012/09/10 08:32:16 ERROR - jmeter.protocol.http.proxy.Proxy: Not implemented (probably used https) java.lang.IllegalArgumentException: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: \"\" \"\n\tat java.net.URLDecoder.decode(Unknown Source)\n\tat org.apache.jmeter.protocol.http.util.HTTPArgument.<init>(HTTPArgument.java:113)\n\tat org.apache.jmeter.protocol.http.util.HTTPArgument.<init>(HTTPArgument.java:139)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.addEncodedArgument(HTTPSamplerBase.java:531)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.parseArguments(HTTPSamplerBase.java:1009)\n\tat org.apache.jmeter.protocol.http.proxy.DefaultSamplerCreator.computeFromPostBody(DefaultSamplerCreator.java:179)\n\tat org.apache.jmeter.protocol.http.proxy.DefaultSamplerCreator.populateSampler(DefaultSamplerCreator.java:89)\n\tat org.apache.jmeter.protocol.http.proxy.Proxy.run(Proxy.java:212)\n================================================================================", "id": 162054, "time": "2012-09-10T12:53:43Z", "creator": "nikinpatel@gmail.com", "creation_time": "2012-09-10T12:53:43Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "ok. I just took out that field and it still failed with same message. So it's not the data or that field.\n\nI added a data write and here is what i collected:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<testResults version=\"1.2\">\n<sample t=\"0\" lt=\"0\" ts=\"0\" s=\"false\" lb=\"Sample failed\" rc=\"\" rm=\"URLDecoder: Illegal hex characters in escape (%) pattern - For input string: &quot;&quot; &quot;\" tn=\"\" dt=\"\" by=\"0\"/>", "attachment_id": null, "bug_id": 53840, "id": 162055, "time": "2012-09-10T13:06:35Z", "creator": "nikinpatel@gmail.com", "creation_time": "2012-09-10T13:06:35Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 53840, "text": "Hello, \nThanks for feedback.\n\nDid you read nightly build build instructions ?\nIf you use it we will have much more infos.\n\nDownload the _bin and _lib files \nUnpack the archives into the same directory structure \nThe other archives are not needed to run JMeter.\nBuilding JMeter", "id": 162062, "time": "2012-09-11T05:44:29Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-09-11T05:44:29Z", "is_private": false, "attachment_id": null}, {"count": 8, "text": "After some analysis :\nThe issue comes from the fact that contentEncoding has been computed to UTF-8 instead of being empty which leads to the error.\n\nAnalyzing it further, I think it may come from a previously computed content encoding from URL :\nhttp://vmdal-hqqa9/retalixhq/GG_Implementation/ScreenEntity/ScreenEntityHTTP.aspx\n\nAnd problematic code may be here in DefaultSamplerCreator#computeContentEncoding:\n\n// Check if we know the encoding of the page\n            if (pageEncodings != null) {\n                synchronized (pageEncodings) {\n                    contentEncoding = pageEncodings.get(urlWithoutQuery);\n                }\n            }\n            // Check if we know the encoding of the form\n            if (formEncodings != null) {\n                synchronized (formEncodings) {\n                    String formEncoding = formEncodings.get(urlWithoutQuery);\n                    // Form encoding has priority over page encoding\n                    if (formEncoding != null) {\n                        contentEncoding = formEncoding;\n                    }\n                }\n            }\n\n\nFor record this is the request:\n\nPOST http://vmdal-hqqa9/retalixhq/GG_Implementation/ScreenEntity/ScreenEntityHTTP.aspx?Action=Save&ET=Vendor&TT=Single&Sid=1347280336092 HTTP/1.1\nx-requested-with: XMLHttpRequest\nAccept-Language: en-us\nReferer: http://vmdal-hqqa9/retalixhq/GG_Implementation/ScreenEntity/ScreenEntityPage.aspx?ET=Vendor&TT=Single&WM=2&UID=9292&Sid=1347280331908&UITH=Blue&MUID=window_0\nAccept: */*\nContent-Type: application/x-www-form-urlencoded\nAccept-Encoding: gzip, deflate\nUser-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; Tablet PC 2.0)\nHost: vmdal-hqqa9\nContent-Length: 1146\nProxy-Connection: Keep-Alive\nPragma: no-cache\nCookie: RHQ=sid=5aaeb66c-e174-4f4c-9928-83cffcc62150\n\n<Action UIStatus=\"2\"><Vendor Id=\"9292\" HOST_ID=\"0\" VENDOR=\"9292\" TERMS_TYPE=\"No Terms\" TERMS=\"0 %\" AUTO_PRICE=\"Use System Default\" VM_VENDOR_TYPE=\"DSD Vendor\" ITEM_FORMAT=\"PLU\" COST_ENTRY_SORT=\"UPC/EAN\" VM_REPORT_SORT=\"UPC/EAN\" VM_ORDER_SORT=\"UPC/EAN\" VM_RECEIVING_SORT=\"UPC/EAN\" VM_MAX_BACK_ORDERS=\"99\" MAX_OPEN_DAYS=\"99\" PAY_BASED_ON=\"System Cost\" ORDER_COST_DATE=\"Use System Rule\" VM_CONSIDER_FREE=\"False\" VM_SHOW_DETAIL=\"False\" VM_UPDATE_COST=\"No\" RD_USE_VENDOR_CC=\"False\" BLIND_RECEIVING=\"Default\" EXCLUDE_RECEIVED_COST=\"False\" PRINT_ITEM_ADJ=\"False\" PRINT_OVERALL_ADJ=\"False\" PRINT_TAX_DETAIL=\"False\" BLOCK_PRICE_VIEW=\"False\" DELIVERY_STATUS=\"No Delivery\" AUTO_RECEIVE=\"False\" TARGET_GM_FLAG=\"%\" MINIMUM_GM_FLAG=\"%\" MARGIN_TYPE=\"Gross Margin\" HOLD_REGULAR=\"Default\" HOLD_SPECIALS=\"Default\" TRUSTING_VENDOR=\"False\" AUTO_ACCEPT=\"All\" EARLY_RCPT_AFFECTS=\"All Costs\" SBT_ELIGIBLE=\"Not eligible\" SBT_REPORTING_DAY=\"Monday\" AUTO_BALANCE_FLAG=\"$\" DAX_MANAGED=\"False\" CHANGE_ID=\"QA\" CHANGE_SOURCE=\"Manual Change\" ORIGINAL_SOURCE=\"Manual Change\" RECORD_STATUS=\"Add\" RECORD_STATUS_DATE=\"9/7/2012 8:34:58 AM\" VENDOR_NAME=\"test\" UIStatus=\"2\"/></Action>", "bug_id": 53840, "attachment_id": null, "id": 162192, "time": "2012-09-15T13:23:27Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-09-15T13:23:27Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "text": "Date: Sat Dec  1 23:26:37 2012\nNew Revision: 1416080\n\nURL: http://svn.apache.org/viewvc?rev=1416080&view=rev\nLog:\nBug 53840 - Proxy Recording : Response message: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: \"\" \"\nBugzilla Id: 53840\n\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/proxy/DefaultSamplerCreator.java\n    jmeter/trunk/test/src/org/apache/jmeter/protocol/http/proxy/TestHttpRequestHdr.java\n    jmeter/trunk/xdocs/changes.xml", "attachment_id": null, "id": 163758, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2012-12-01T23:27:33Z", "bug_id": 53840, "creation_time": "2012-12-01T23:27:33Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 53840, "is_private": false, "id": 163759, "attachment_id": null, "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-12-01T23:35:09Z", "time": "2012-12-01T23:35:09Z", "text": "Date: Sat Dec  1 23:34:31 2012\nNew Revision: 1416081\n\nURL: http://svn.apache.org/viewvc?rev=1416081&view=rev\nLog:\nBug 53840 - Proxy Recording : Response message: URLDecoder: Illegal hex characters in escape (%) pattern - For input string: \"\" \"\nOups last minute change\nBugzilla Id: 53840"}]