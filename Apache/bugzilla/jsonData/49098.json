[{"count": 0, "tags": [], "bug_id": 49098, "text": "The filter is not invoked with the following web.xml:\n\n  <filter-mapping>\n    <filter-name>log</filter-name>\n    <url-pattern>*.do</url-pattern>\n    <dispatcher>FORWARD</dispatcher>\n    <dispatcher>REQUEST</dispatcher>\n    <dispatcher>INCLUDE</dispatcher>\n    <dispatcher>ERROR</dispatcher>\n  </filter-mapping>\n\n  <servlet-mapping>\n    <servlet-name>my-servlet</servlet-name>\n    <url-pattern>*.do</url-pattern>\n  </servlet-mapping>\n\n  <error-page>\n    <exception-type>java.lang.NullPointerException</exception-type>\n    <location>/error.do?type=generic_error</location>\n  </error-page>\n\nChanging <url-pattern> with <servlet-name> the filter is correctly invoked:\n\n  <filter-mapping>\n    <filter-name>filter</filter-name>\n    <servlet-name>action</servlet-name>\n    <dispatcher>FORWARD</dispatcher>\n    <dispatcher>REQUEST</dispatcher>\n    <dispatcher>INCLUDE</dispatcher>\n    <dispatcher>ERROR</dispatcher>\n  </filter-mapping>\n\n\nThe filter is also correctly invoked using <url-pattern> but removing the querystring from <location>:\n\n  <filter-mapping>\n    <filter-name>filter</filter-name>\n    <url-pattern>*.do</url-pattern>\n    <dispatcher>FORWARD</dispatcher>\n    <dispatcher>REQUEST</dispatcher>\n    <dispatcher>INCLUDE</dispatcher>\n    <dispatcher>ERROR</dispatcher>\n  </filter-mapping>\n\n  <error-page>\n    <exception-type>java.lang.NullPointerException</exception-type>\n    <location>/error.do</location>\n  </error-page>\n\n\nI have tested with 6.0.26 and 5.5.28.\n\nThe problem seems to be in the class org.apache.catalina.core.ApplicationFilterFactory.java, method matchFiltersURL, Case 3 - Extension Match.\n\n\nFilippo", "id": 136060, "time": "2010-04-12T12:17:07Z", "creator": "filippo.munafo@kion.it", "creation_time": "2010-04-12T12:17:07Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 49098, "is_private": false, "text": "Servlet mappings should not contain query strings. Its meant to be a path only.\n\nThis is not valid:\n<location>/error.do?type=generic_error</location>\n\nSo the resulting behavior is undefined.", "id": 136061, "time": "2010-04-12T12:37:38Z", "creator": "funkman@apache.org", "creation_time": "2010-04-12T12:37:38Z", "attachment_id": null}]