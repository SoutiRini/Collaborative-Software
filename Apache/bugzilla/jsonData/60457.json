[{"count": 0, "tags": [], "bug_id": 60457, "text": "Created attachment 34508\npatch proposal\n\nWhen SSLOCSPEnable is set to On in global/server configuration, it is not inherited by VirtualHosts. If I move the configurations inside the VirtualHost, failure happens as expected and SSL handshake is not completed. A patch is attached that works for me. Patch was generated for 2.4.23.\n\nReproducer:\n\nThis is a simplified reproducer that does not actually perform OCSP check but you can see logging where it at least gets into OCSP code:\n\n1. Install httpd and mod_ssl\n2. Add the following configurations in ssl.conf but outside of the VirtualHost. I did have to create a CA and client cert but the Responder URL goes to nowhere.\n\n SSLCACertificateFile /tmp/cacert.crt\n SSLVerifyClient require\n SSLVerifyDepth 1\n SSLOCSPEnable On\n SSLOCSPDefaultResponder http://localhost:9999/\n SSLOCSPOverrideResponder On\n\n3. Send request with a certificate signed by the /tmp/cacert.crt\n\n # curl -I -E ./cert.crt:test --key ./privkey.key -k https://localhost/\n HTTP/1.1 200 OK\n\n4. The request above succeeds but should not because the OCSP responder is unreachable and cert cannot be validated.", "id": 195410, "time": "2016-12-08T19:33:07Z", "creator": "rbost@redhat.com", "creation_time": "2016-12-08T19:33:07Z", "is_private": false, "attachment_id": 34508}]