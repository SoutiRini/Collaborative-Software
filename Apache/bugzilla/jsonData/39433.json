[{"count": 0, "tags": [], "bug_id": 39433, "is_private": false, "text": "According to the JAAS API documentation, LoginModules are allowed to add\nany number of Principal and Credential objects to the Subject passed to\nthe LoginModule. After all login modules commit sucessfully, all the\nadded information is available to the application. via:\nAccessControlContext acc = AccessController.getContext();\nSubject sub = Subject.getSubject(acc);\n\nIf JAAS authentication is enabled in Tomcat (using JAAS Realm), only the\n\"user\" Principal is added to the Subject, i.e. further Principals that for\ninstance describe Groups or Roles and also other security credentials are \nnot available to the application. \n\nThe basic problem seems to be that the Subject passed to the LoginModule is\nCatalina internally only of temporary use. It is at least not the same object\nas being later added to the session.\n\nThe only work around currently is to add all additional Principal and\nSubject information to the \"user\" Principal returned to JAASRealm. This\ncan of course only be done if one writes its own LoginModule. Login modules\nprovided by Java (such as NTLoginModule) can not fully be used, since most of\nthe login information will not be available.\n\nFurthermore, the Subject and its credentials are often also used to keep\nSecurity related information between two containers such as a webcontainer \nand an EJB container. A typical place to keep this information is the Subject\n(and not the session).", "id": 88573, "time": "2006-04-27T17:49:55Z", "creator": "andreas.leitel@iclip.ch", "creation_time": "2006-04-27T17:49:55Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "id": 97270, "time": "2006-12-25T05:02:00Z", "bug_id": 39433, "creation_time": "2006-12-25T05:02:00Z", "is_private": false, "text": "I don't suppose you care to suggest a patch? ;)"}, {"id": 124748, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "count": 2, "text": "This should have been fixed in 5.5.27.", "time": "2009-02-09T11:43:59Z", "bug_id": 39433, "creation_time": "2009-02-09T11:43:59Z", "is_private": false}]