[{"count": 0, "attachment_id": null, "bug_id": 17396, "is_private": false, "id": 31939, "time": "2003-02-25T21:04:08Z", "creator": "eric.ma@lucida.com", "creation_time": "2003-02-25T21:04:08Z", "tags": [], "text": "If we create 2 input tasks and then redirect stdin from a file, then the 2nd \ninput task will fail.\n\nProcedure to reproduce:\nFirst, create 2 input tasks:\n<target name=\"ema-test\">\n    <input\n        message=\"input 1\"\n        addproperty=\"test.input1\"\n    />\n    <echo message=\"result is ${test.input1}\"/>\n    <input\n        message=\"input 2\"\n        addproperty=\"test.input2\"\n    />\n    <echo message=\"result is ${test.input2}\"/>\n</target>\n\nThen call the target by redirect input from a file:\nant -buildfile build.xml ema-test < input.txt\n\nThe content of input.txt is:\n      1\n      2\n      3\n\nError Message:\nema-test:\ninput 1\nresult is 1\ninput 2\n\nBUILD FAILED\njava.lang.NullPointerException\n        at java.util.Hashtable.put(Hashtable.java:389)\n        at org.apache.tools.ant.Project.setNewProperty(Project.java:460)\n        at org.apache.tools.ant.taskdefs.Input.execute(Input.java:141)\n        at org.apache.tools.ant.Task.perform(Task.java:319)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1250)\n        at org.apache.tools.ant.Main.runBuild(Main.java:610)\n        at org.apache.tools.ant.Main.start(Main.java:196)\n        at org.apache.tools.ant.Main.main(Main.java:235)\n\nTotal time: 4 seconds\njava.lang.NullPointerException\n        at java.util.Hashtable.put(Hashtable.java:389)\n        at org.apache.tools.ant.Project.setNewProperty(Project.java:460)\n        at org.apache.tools.ant.taskdefs.Input.execute(Input.java:141)\n        at org.apache.tools.ant.Task.perform(Task.java:319)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1250)\n        at org.apache.tools.ant.Main.runBuild(Main.java:610)\n        at org.apache.tools.ant.Main.start(Main.java:196)\n        at org.apache.tools.ant.Main.main(Main.java:235)"}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 31972, "time": "2003-02-26T10:28:49Z", "bug_id": 17396, "creation_time": "2003-02-26T10:28:49Z", "is_private": false, "text": "works for me using CVS HEAD on Linux.\n\nWell, no, it doesn't really work for me as test.input2 doesn't get set, but at\nleast I don't get an exception (I'll make the code more robust shortly).\n\nWhat I think is happening is that the BufferedReader in DefaultInputHandler\nexhausts the redirected input in the first tasks.\n\nThe way you use the task is not the way it has been designed for.  For canned\nresponses you should use a properties file and PropertyFileInputHandler.  Please\nrefer to the documentation of InputHandler.\n\nhttp://ant.apache.org/manual/inputhandler.html"}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 31997, "time": "2003-02-26T12:34:37Z", "bug_id": 17396, "creation_time": "2003-02-26T12:34:37Z", "is_private": false, "text": "OK, should be fixed in nightly build 2003-02-27."}]