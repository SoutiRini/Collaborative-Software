[{"id": 21550, "tags": [], "creator": "tvanhusen@libra.de", "is_private": false, "count": 0, "text": "For Tags implementing BodyTagSupport the following is getting generated (at \nthe end of body loop) to reassign the exposed variables to pageContext \nattribute objects (which presumably change for each iteration):\n\n    int evalDoAfterBody = _jspx_th_list_forEach_0.doAfterBody();\n    supplierInfo = (de.libra.util.vo.ValueObject) pageContext.findAttribute\n(\"supplierInfo\");\n    if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)\n      break;\n  } while (true);\n  if (_jspx_eval_list_forEach_0 != \njavax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE)\n    out = pageContext.popBody();\n\nThe reassignment is not generated for tags implementing TagSupport. What is \nwrong. Since TagSupport implements the IterationTag interface(since JSP 1.2) \nwhich was introduced to allow tag body iteration while writing the body \nimmediately to the current JspWriter and not suffer from buffering overhead.", "time": "2002-08-22T18:02:09Z", "bug_id": 11942, "creation_time": "2002-08-22T18:02:09Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "jan.luehe@sun.com", "attachment_id": null, "text": "Note that the body is evaluated, and doAfterBody() is called (to determine\nwhether the body needs to be reevaluated), *only if* if a body present. \n\nTherefore, the servlet code fragment you listed below is generated only if the\ntag handler in question implements IterationTag (this condition is true if the\ntag handler extends TagSupport or any of its subclasses, such as BodyTagSupport)\n*and* is non-empty.\n\n ", "id": 21752, "time": "2002-08-26T20:07:43Z", "bug_id": 11942, "creation_time": "2002-08-26T20:07:43Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 11942, "attachment_id": null, "id": 21754, "time": "2002-08-26T20:32:14Z", "creator": "jan.luehe@sun.com", "creation_time": "2002-08-26T20:32:14Z", "is_private": false, "text": "Actually, I just realized the issue you brought up is valid, and is a duplicate\nof http://nagoya.apache.org/bugzilla/show_bug.cgi?id=11552 (\"Iteration tags do\nnot resynchronize scripting variables after doAfterBody()\"). See my evaluation\nof the second part of that bug.\n\nI am still trying to seek clarification on this issue from the spec leads."}, {"count": 3, "tags": [], "bug_id": 11942, "attachment_id": null, "id": 21769, "time": "2002-08-27T00:06:14Z", "creator": "jan.luehe@sun.com", "creation_time": "2002-08-27T00:06:14Z", "is_private": false, "text": "Fixed. AT_BEGIN and NESTED scripting vars now get synchronized after\nIterationTag.doAfterBody() (they used to get synchronized after doAfterBody()\nonly if the tag handler implemented BodyTag)."}]