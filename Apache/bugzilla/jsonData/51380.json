[{"count": 0, "attachment_id": null, "bug_id": 51380, "is_private": false, "id": 147149, "time": "2011-06-15T16:34:02Z", "creator": "brent.cromarty@yahoo.ca", "creation_time": "2011-06-15T16:34:02Z", "tags": [], "text": ""}, {"text": "Created attachment 27162\nUpdate to HTTPSampler2.java and jmeter.properties implementing SSL cache reuse control", "tags": [], "bug_id": 51380, "attachment_id": 27162, "count": 1, "id": 147150, "time": "2011-06-15T16:41:51Z", "creator": "brent.cromarty@yahoo.ca", "creation_time": "2011-06-15T16:41:51Z", "is_private": false}, {"count": 2, "tags": [], "creator": "brent.cromarty@yahoo.ca", "attachment_id": null, "text": "Currently the HTTPClient sampler creates an SSL context and connection (i.e.: full handshake) for each thread on the first iteration only.  Subsequent iterations reuse their cached SSL Context thereby reusing an existing SSL handshake.  While this is typical of the way that a browser behaves (caching and reusing an SSL context where possible) it limits our ability to do specific testing of how a system will handle a constant load of N users when having to perform SSL transactions.\n\nThe patch I have proposed adds a new property \"https.use.cached.ssl.context\" to the jmeter.properties file.  The default value is \"true\" to preserve existing functionality.  If false the override of public void testIterationStart(LoopIterationEvent event) will get the SSL manager instance and call the resetContext() method, nulling the current threadLocal SSL context, and closing any currently open connections in the HTTP Client.\n\nThis allows us to create a new SSL context/connection each iteration, but reuse that context within the iteration.", "id": 147152, "time": "2011-06-15T16:55:18Z", "bug_id": 51380, "creation_time": "2011-06-15T16:55:18Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 51380, "is_private": false, "text": "Can you provide a diff patch with current trunk, not full plain files.\nThanks.", "id": 147515, "time": "2011-06-26T17:51:37Z", "creator": "milamber@apache.org", "creation_time": "2011-06-26T17:51:37Z", "attachment_id": null}, {"text": "Created attachment 27509\nImplementation of the feature\n\nHello,\nA note about implementation:\n1) It works for HC3 and HC4 implementation\n2) For Java Native HTTPSUrlConnection it doesn't work, SSL Context is cached and I don't see the method to reset it, if someone knows I will be interested.\n\nTo validate my patch I set:\n-Djavax.net.debug=all\n\nAnd count number of occurences of:\n\"trustStore is: /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/security/cacerts\"\n\nI note something strange:\n- HC3 => 10 times => OK\n- HC4 => 12 times => STRANGE ?\n- Java => 1 time on first run then as it's in cache, regular since I don't reset it see note 2) above\n\nRegards\nPhilippe", "tags": [], "bug_id": 51380, "is_private": false, "count": 4, "id": 149314, "time": "2011-09-16T12:24:13Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-09-16T12:24:13Z", "attachment_id": 27509}, {"count": 5, "tags": [], "bug_id": 51380, "attachment_id": null, "text": "Please, respect code convention in JMeter for your patch.\nThanks.\nhttp://wiki.apache.org/jakarta-jmeter/JMeterEclipse", "id": 149316, "time": "2011-09-16T12:33:11Z", "creator": "milamber@apache.org", "creation_time": "2011-09-16T12:33:11Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 51380, "is_private": false, "text": "Created attachment 27511\nFix to the issue with corrected code format (I hope so)\n\nIf format is not OK please tell me what's wrong.\nRegards\nPhilippe", "id": 149321, "time": "2011-09-16T14:00:00Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-09-16T14:00:00Z", "attachment_id": 27511}, {"count": 7, "tags": [], "bug_id": 51380, "is_private": false, "text": "Please Detab (and don't insert a new line before { on an If statement / methods (now fixed)", "id": 149325, "time": "2011-09-16T14:12:37Z", "creator": "milamber@apache.org", "creation_time": "2011-09-16T14:12:37Z", "attachment_id": null}, {"text": "Thanks for the patch.\n\nI simplified it somewhat by making the base implementation concrete, thus avoiding the need to provide implementations in all samplers.\n\nAlso made all the notifySSLContextWasReset() methods protected (some were public, not sure why).\n\nURL: http://svn.apache.org/viewvc?rev=1172147&view=rev\nLog:\nBug 51380 - Control reuse of cached SSL Context from iteration to iteration\n\nModified:\n   jakarta/jmeter/trunk/bin/jmeter.properties\n   jakarta/jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPAbstractImpl.java\n   jakarta/jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC3Impl.java\n   jakarta/jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java\n   jakarta/jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSampler2.java\n   jakarta/jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerBase.java\n   jakarta/jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSamplerProxy.java\n   jakarta/jmeter/trunk/xdocs/changes.xml\n   jakarta/jmeter/trunk/xdocs/usermanual/component_reference.xml", "tags": [], "bug_id": 51380, "is_private": false, "count": 8, "id": 149444, "time": "2011-09-17T23:25:52Z", "creator": "sebb@apache.org", "creation_time": "2011-09-17T23:25:52Z", "attachment_id": null}]