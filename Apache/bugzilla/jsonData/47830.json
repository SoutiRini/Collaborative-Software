[{"count": 0, "tags": [], "bug_id": 47830, "attachment_id": null, "text": "Here is a patch as discussed here:\nhttp://mail-archives.apache.org/mod_mbox/ant-dev/200908.mbox/%3c200908311042.48291.nicolas.lalevee@hibnet.org%3e\n\nI didn't committed it directly as there will be a release really soon and I don't want to break anything and then force this new feature to be in that release.\n\nSo there is now a ProjectHelperRepository which is responsible to gather every declared implementation of ProjectHelper in the classpath. The default ProjectHelper will be the first found in the classpath. And this repository will never be empty as the ProjectHelper2 will always be added at the last position.\n\nI did some a few test with another implemetation of ProjectHelper that read groovy files. Everything works like a charm execept one case: \n* simple launch of ant : the default helper is the groovy one : OK\n* ant -f build.xml : the helper used is the ProjectHelper2 : OK\n* in the build.gant I put an ant task without specifying any build file: the build.xml is taken: OK\n* in the build.gant I put an gant task without specifying any build file: I got:\n\nBUILD FAILED\njava.lang.NullPointerException\n\tat org.hibnet.gant.GroovyRunner.run(GroovyRunner.java:38)\n\tat org.hibnet.gant.GantTarget.execute(GantTarget.java:42)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:411)\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1360)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1329)\n\tat org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1212)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:777)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:217)\n\tat org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)\n\tat org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)\nCaused by: org.codehaus.groovy.runtime.InvokerInvocationException: : java.lang.NullPointerException\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:92)\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:230)\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:248)\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:756)\n\tat groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:142)\n\tat org.hibnet.gant.GantMetaClass.invokeMethod(GantMetaClass.java:40)\n\tat groovy.lang.Closure.call(Closure.java:292)\n\tat groovy.lang.Closure.call(Closure.java:287)\n\tat org.hibnet.gant.GantTarget$1.doRun(GantTarget.java:45)\n\tat org.hibnet.gant.GroovyRunner.run(GroovyRunner.java:32)\n\t... 10 more\nCaused by: : java.lang.NullPointerException\n\tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:116)\n\tat org.apache.tools.ant.Task.perform(Task.java:348)\n\tat groovy.util.AntBuilder.nodeCompleted(AntBuilder.java:199)\n\tat groovy.util.BuilderSupport.doInvokeMethod(BuilderSupport.java:153)\n\tat groovy.util.AntBuilder.doInvokeMethod(AntBuilder.java:149)\n\tat groovy.util.BuilderSupport.invokeMethod(BuilderSupport.java:64)\n\tat org.hibnet.gant.GantMetaClass.invokeMethod(GantMetaClass.java:43)\n\tat org.hibnet.gant.GantScriptMetaClass.invokeMethod(GantScriptMetaClass.java:54)\n\tat org.hibnet.gant.GantMetaClass.invokeMethod(GantMetaClass.java:58)\n\tat groovy.lang.GroovyObjectSupport.invokeMethod(GroovyObjectSupport.java:44)\n\tat groovy.lang.Script.invokeMethod(Script.java:78)\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeOnDelegationObjects(ClosureMetaClass.java:371)\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:322)\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:756)\n\tat groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:142)\n\tat org.hibnet.gant.GantMetaClass.invokeMethod(GantMetaClass.java:40)\n\tat org.hibnet.gant.GantMetaClass.invokeMethod(GantMetaClass.java:73)\n\tat org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN(ScriptBytecodeAdapter.java:78)\n\tat build$_run_closure1.doCall(build.gant:12)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:86)\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:230)\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:248)\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:756)\n\tat groovy.lang.DelegatingMetaClass.invokeMethod(DelegatingMetaClass.java:142)\n\tat org.hibnet.gant.GantMetaClass.invokeMethod(GantMetaClass.java:40)\n\tat org.hibnet.gant.GantMetaClass.invokeMethod(GantMetaClass.java:73)\n\tat org.codehaus.groovy.runtime.ScriptBytecodeAdapter.invokeMethodOnCurrentN(ScriptBytecodeAdapter.java:78)\n\tat build$_run_closure1.doCall(build.gant)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:86)\n\t... 19 more\nCaused by: java.lang.NullPointerException\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:380)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n\t... 55 more\n\nI didn't look closely but it is probably a bug in my groovy frontend.", "id": 130342, "time": "2009-09-13T07:38:39Z", "creator": "nicolas.lalevee@hibnet.org", "creation_time": "2009-09-13T07:38:39Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 47830, "attachment_id": null, "text": "maybe the feature would be valuable enough to go into the next release and we'd hold it up for the feature - mind you, we don't even have a release plan, yet.", "id": 130364, "time": "2009-09-14T03:17:02Z", "creator": "bodewig@apache.org", "creation_time": "2009-09-14T03:17:02Z", "is_private": false}, {"count": 2, "text": "As expected the bug was in the groovy frontend.\nSo I am happy with the current implementation. Unless there are some objection I will take time to commit it, hopefully with some doc.", "creator": "nicolas.lalevee@hibnet.org", "is_private": false, "id": 130456, "time": "2009-09-16T11:21:07Z", "bug_id": 47830, "creation_time": "2009-09-16T11:21:07Z", "tags": [], "attachment_id": null}, {"count": 3, "text": "implementation and doc commited with svn revision 819284", "bug_id": 47830, "is_private": false, "id": 130706, "time": "2009-09-27T04:05:20Z", "creator": "nicolas.lalevee@hibnet.org", "creation_time": "2009-09-27T04:05:20Z", "tags": [], "attachment_id": null}]