[{"count": 0, "tags": [], "creator": "noel@devtech.com", "is_private": false, "text": "Test plaform:\n\n   Redhat 8 with all current updates\n   Redhat 8 distribution of Apache 2 (httpd-2.0.40-11.5)\n   mod_jk2 from jakarta-tomcat-connectors-4.1.18\n   (http://cvs.apache.org/viewcvs.cgi/jakarta-tomcat-\nconnectors/jk/native2/server/apache2/\n    does not show any change to the native code in \n\nhttp://httpd.apache.org/docs-2.0/upgrading.html says: \"The AddModule and \nClearModuleList directives no longer exist. These directives were used to \nensure that modules could be enabled in the correct order. The new Apache 2.0 \nAPI allows modules to explicitly specify their ordering, eliminating the need \nfor these directives.\"\n\nI am encountering a problem where mod_dav is not getting activated before \nmod_jk2.  The configuration, in a VirtualHost, is as follows:\n\n   JkSet uri:<domain>/*.jsp.group ajp13:<worker>\n\n   Alias /dav /<path>/webapps/ROOT\n   <Location /dav/ >\n        DAV On\n        AddType text/plain .jsp\n        ...\n   </Location>\n\nwhich follows http://httpd.apache.org/docs-2.0/mod/mod_dav.html#complex.\n\nThe following records the transaction using DAVExplorer to access .jsp pages:\n\n==> access_log <==\n24.88.112.241 - - [13/Jul/2003:12:33:55 -0400] \"OPTIONS /dav/ HTTP/1.1\" 200 0\n24.88.112.241 - - [13/Jul/2003:12:33:56 -0400] \"PROPFIND /dav/ HTTP/1.1\" 207 \n16802\n24.88.112.241 - - [13/Jul/2003:12:35:34 -0400] \"GET /dav/PageNotFound.html \nHTTP/1.1\" 200 717\n24.88.112.241 - - [13/Jul/2003:12:35:55 -0400] \"GET /dav/favicon.ico HTTP/1.1\" \n200 318\n24.88.112.241 - - [13/Jul/2003:12:36:40 -0400] \"GET /dav/PageNotFound.jsp \nHTTP/1.1\" 404 1329\n24.88.112.241 - - [13/Jul/2003:12:37:46 -0400] \"GET /dav/index.jsp HTTP/1.1\" \n404 1329\n\n==> catalina.out <==\nJul 13, 2003 12:36:40 PM org.apache.jk.server.JkCoyoteHandler action\nINFO: RESET \n[Sun Jul 13 12:36:40 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:36:40 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:36:40 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:36:40 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \nJul 13, 2003 12:37:46 PM org.apache.jk.server.JkCoyoteHandler action\nINFO: RESET \n[Sun Jul 13 12:37:46 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:37:46 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:37:46 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:37:46 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n\n==> localhost_access_log.2003-07-13.txt <==\n24.88.112.241 - - [13/Jul/2003:12:36:40 -0500] \"GET /dav/PageNotFound.jsp \nHTTP/1.1\" 404 3824\n24.88.112.241 - - [13/Jul/2003:12:37:46 -0500] \"GET /dav/index.jsp HTTP/1.1\" \n404 3824\n\nTest plaform:\n\n   Redhat 8 with all current updates\n   Redhat 8 distribution of Apache 2 (httpd-2.0.40-11.5)\n   mod_jk2 from jakarta-tomcat-connectors-4.1.18\n\nhttp://httpd.apache.org/docs-2.0/upgrading.html says: \"The AddModule and \nClearModuleList directives no longer exist. These directives were used to \nensure that modules could be enabled in the correct order. The new Apache 2.0 \nAPI allows modules to explicitly specify their ordering, eliminating the need \nfor these directives.\"\n\nI am encountering a problem where mod_dav is not getting activated before \nmod_jk2.  The configuration, in a VirtualHost, is as follows:\n\n   JkSet uri:<domain>/*.jsp.group ajp13:<worker>\n\n   Alias /dav /<path>/webapps/ROOT\n   <Location /dav/ >\n        DAV On\n        AddType text/plain .jsp\n        ...\n   </Location>\n\nwhich follows http://httpd.apache.org/docs-2.0/mod/mod_dav.html#complex.\n\nThe following records the transaction using DAVExplorer to access .jsp pages:\n\n==> access_log <==\n24.88.112.241 - - [13/Jul/2003:12:33:55 -0400] \"OPTIONS /dav/ HTTP/1.1\" 200 0\n24.88.112.241 - - [13/Jul/2003:12:33:56 -0400] \"PROPFIND /dav/ HTTP/1.1\" 207 \n16802\n24.88.112.241 - - [13/Jul/2003:12:35:34 -0400] \"GET /dav/PageNotFound.html \nHTTP/1.1\" 200 717\n24.88.112.241 - - [13/Jul/2003:12:35:55 -0400] \"GET /dav/favicon.ico HTTP/1.1\" \n200 318\n24.88.112.241 - - [13/Jul/2003:12:36:40 -0400] \"GET /dav/PageNotFound.jsp \nHTTP/1.1\" 404 1329\n24.88.112.241 - - [13/Jul/2003:12:37:46 -0400] \"GET /dav/index.jsp HTTP/1.1\" \n404 1329\n\n==> catalina.out <==\nJul 13, 2003 12:36:40 PM org.apache.jk.server.JkCoyoteHandler action\nINFO: RESET \n[Sun Jul 13 12:36:40 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:36:40 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:36:40 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:36:40 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \nJul 13, 2003 12:37:46 PM org.apache.jk.server.JkCoyoteHandler action\nINFO: RESET \n[Sun Jul 13 12:37:46 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:37:46 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:37:46 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n[Sun Jul 13 12:37:46 2003] ( info ) [jk_jni_aprImpl.c (472)]  jkInvoke() \ninvoke 4d2822f0 \n\n==> localhost_access_log.2003-07-13.txt <==\n24.88.112.241 - - [13/Jul/2003:12:36:40 -0500] \"GET /dav/PageNotFound.jsp \nHTTP/1.1\" 404 3824\n24.88.112.241 - - [13/Jul/2003:12:37:46 -0500] \"GET /dav/index.jsp HTTP/1.1\" \n404 3824\n\nThe two entries in localhost_access are from Tomcat, as are the entries in \ncatalina.out.  The access_log file is the httpd view of the world.  There is \nno surprise that /dav/*.jsp is not found, since there is no dav/ directory in \nthe web app.  The issue is that mod_jk2 is taking precedence over mod_dav.  \nWith Apache 1.3, we could control this easily.  With Apache v2, we rely upon \nthe modules to get it right somehow.\n\nIs this a known issue, or even fixed?\n\n\t--- Noel\nIs this a known issue, or even fixed?\n\n\t--- Noel", "id": 40573, "time": "2003-07-13T18:16:44Z", "bug_id": 21546, "creation_time": "2003-07-13T18:16:44Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "jerenkrantz@apache.org", "attachment_id": null, "id": 53369, "time": "2004-03-03T09:25:35Z", "bug_id": 21546, "creation_time": "2004-03-03T09:25:35Z", "is_private": false, "text": "Per post to dev@httpd, I think mod_jk2 should have its translate_name hook be\nAPR_HOOK_LAST."}, {"count": 2, "tags": [], "bug_id": 21546, "text": "Just to follow up on my last comment, I think that's wrong.  We need to remove\nthe translate name hook entirely.", "id": 53395, "attachment_id": null, "creator": "jerenkrantz@apache.org", "creation_time": "2004-03-03T17:38:27Z", "time": "2004-03-03T17:38:27Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 21546, "attachment_id": null, "text": "If mod_jk2 \"translate name hook\" is removed then how to get the following working:\n+++\n    <LocationMatch \"/*.jsp$\">\n        JkUriSet worker ajp13:localhost:8009\n    </LocationMatch>\n+++", "id": 53505, "time": "2004-03-05T12:41:26Z", "creator": "jfclere@gmail.com", "creation_time": "2004-03-05T12:41:26Z", "is_private": false}, {"count": 4, "tags": [], "creator": "jfclere@gmail.com", "attachment_id": null, "id": 53924, "time": "2004-03-12T11:04:46Z", "bug_id": 21546, "creation_time": "2004-03-12T11:04:46Z", "is_private": false, "text": "Mod_jk2 for Apache-2.0 has be fixed to help to solve the problem.\nYou have to use something like:\nJkSet uri:/examples/jsp/*.jsp.group ajp13:localhost:8009\n\nIt is not possible to use:\nJkSet uri:/*.jsp.group ajp13:localhost:8009\nbecause all *.jsp will be mapped to Tomcat in jk2_map_to_storage.\n(ap_hook_map_to_storage)."}]