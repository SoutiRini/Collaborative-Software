[{"attachment_id": null, "tags": [], "creator": "Rolf.Sponsel@kstr.lth.se", "text": "The verify this, to the best of my knowledge, after having performed a clean\ninstallation of httpd 2.0.49 (using the default 'httpd.conf' file) I created\nthree additional file system entries in the directory 'htdocs', being part of\nthe standard httpd distribution, as follows:\n\ncd htdocs\nln -s index.html.var SYMLINK\nln -s non-such-file BROKEN-SYMLINK\ntouch READ-PROTECTED-FILE\nchmod 600 READ-PROTECTED-FILE\n\nAfter starting the httpd daemon, I accessed the server by entering the following\n URLs into my browser (Mozilla):\n\n1). http://192.168.0.100/\n      which renders the Test Page for Apache Installation.\n\n2). http://192.168.0.100/NO-SUCH-FILE\n      rendering a std '404 Not Found' response like this (which is okay):\n\n> Not Found\n> \n> The requested URL /NO-SUCH-FILE was not found on this server.\n> Apache/2.0.49 (Unix) Server at 192.168.0.100 Port 80\n\n3). http://192.168.0.100/READ-PROTECTED-FILE\n      rendering a std '403 Forbidden' response like this (which is also okay):\n\n> Forbidden\n>\n> You don't have permission to access /READ-PROTECTED-FILE on this server.\n> Apache/2.0.49 (Unix) Server at 192.168.0.100 Port 80\n\nand finally\n\n4). http://192.168.0.100/BROKEN-SYMLINK\n      rendering a std '403 Forbidden' response like this (which seems a little\nbroken to me):\n\n> Forbidden\n>\n> You don't have permission to access /BROKEN-SYMLINK on this server.\n>\n> Additionally, a 403 Forbidden error was encountered while trying to use an\nErrorDocument to handle the request.\n> Apache/2.0.49 (Unix) Server at 192.168.0.100 Port 80\n\n\nThat \"Additional\" 403 error indicates a reference to a document just as if the\nserver wanted to reference a 'Customized Error Response' document, usually\ndefined by an 'ErrorDocument' directive, to wich it doesn't have access. This\nalthough we have *not* enabled (at least not explicitly) the use of 'Customized\nError Responses'.\n\n\nTo verify that the problem is not that we wouldn't be allowed to follow symlinks\nin the 'htdocs' directory, you could use:\n\nhttp://192.168.0.100/SYMLINK\n\n\nAnd this is what can be found in the 'error_log' file:\n\n[Wed Apr 21 16:08:18 2004] [error] [client 192.168.0.101] File does not exist:\n/usr/local/apache2/htdocs/NO-SUCH-FILE\n[Wed Apr 21 16:08:35 2004] [error] [client 192.168.0.101] (13)Permission denied:\nfile permissions deny server access: /usr/local/apache2/htdocs/READ-PROTECTED-FILE\n[Wed Apr 21 16:08:59 2004] [error] [client 192.168.0.101] Symbolic link not\nallowed: /usr/local/apache2/htdocs/BROKEN-SYMLINK\n\n\nAn issue seems to be burried here somewhere.\n\nPlease come back to me if you should need more information on this.\n\n\nBest Regards,\nRolf Sponsel\n\n\nPs. There probably is another issue, which initially triggered my investigation\nof this, that could be related to this issue. But that I'll first have to track\ndown a little further, and report it as an separate issue. Once I have done that\nI'll, if I don't have forgotten it by then, add a reference to to this report\n(and vice versa). Need to take one step at a time :-)", "count": 0, "id": 56170, "time": "2004-04-21T15:01:54Z", "bug_id": 28515, "creation_time": "2004-04-21T15:01:54Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 28515, "is_private": false, "text": "I Forgot to mention that I acctually changed one thing in the standard\nhttpd.conf file. The 'GroupId' directive was changed from '#-1' to 'nobody'.\n\nBest Regards,\nRolf Sponsel\n", "id": 56172, "time": "2004-04-21T15:07:23Z", "creator": "Rolf.Sponsel@kstr.lth.se", "creation_time": "2004-04-21T15:07:23Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "I have now studied that *other* issue mentioned at the end of my first post, and\nhave come to the conclusion that it's very likely to be related to the problem\ninitially posted. And therefore have decided to append it to this issue.\n\nI also have raised the severity because, under unfortunate circumstances, it\ncould become - if not a security issue, then at least - an *integrity* issue.\n\nIf you follow the same steps as described in my initial posting after having\nenabled the 'Customized Error Responses' feature you will notice that in the\ncase with the broken link the standard error response is displayed instead of\nthe customized one, one would expect.\n\n\nWhy this might lead to an *integrity* issue?\n\nI noticed this problem in the process of \"hiding\" any error responses returned\ndue to non-authorized access attempts, e.g. made by a\"harvesting\" web-crawler\nattempting to gain access to information by visiting a site via an it's\nIP-Address, and which will reveal information, e.g. the email address of the\nsystem's administrator, etc. And until this has been fixed it could, under\nunfortunate circumstances, lead to the revealing of more information than\nintended, by accident.\n\n\nAs always, feel free to ask for complimentary information concerning this.\n\nBest Regards,\nRolf Sponsel\n\n", "attachment_id": null, "bug_id": 28515, "id": 56183, "time": "2004-04-21T16:45:13Z", "creator": "Rolf.Sponsel@kstr.lth.se", "creation_time": "2004-04-21T16:45:13Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "slive@apache.org", "text": "This same confusing error message is returned if you symlink to a path where a\nparent directory is not searchable by the web server user.\n\nI believe the problem is that any error returned by an apr_stat on the symlink\nis treated as \"symlink not allowed\".  Instead, the real error from apr_stat\nshould be propogated to the error log.  (But this wouldn't fix the \"Additionally\n...\" error to the browser.)", "count": 3, "id": 79742, "time": "2005-09-09T21:59:57Z", "bug_id": 28515, "creation_time": "2005-09-09T21:59:57Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 28515, "is_private": false, "text": "SVN rev 280018 makes the error message a little more accurate but doesn't fix \nany of the other problems mentioned in this bug.", "id": 79763, "time": "2005-09-10T18:38:26Z", "creator": "slive@apache.org", "creation_time": "2005-09-10T18:38:26Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 28515, "attachment_id": null, "id": 80131, "time": "2005-09-19T22:06:46Z", "creator": "slive@apache.org", "creation_time": "2005-09-19T22:06:46Z", "is_private": false, "text": "*** Bug 36716 has been marked as a duplicate of this bug. ***"}, {"count": 6, "tags": [], "creator": "nick@webthing.com", "attachment_id": null, "id": 113903, "time": "2008-02-19T14:29:42Z", "bug_id": 28515, "creation_time": "2008-02-19T14:29:42Z", "is_private": false, "text": "This bug doesn't happen on 2.2.8 - marking fixed.\n\nI haven't tested 2.0.current.  If that's not fixed, it's unlikely anyone'll want\nto put the effort in, so I'd suggest not reopening unless you're attaching a patch."}]