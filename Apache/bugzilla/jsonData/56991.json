[{"count": 0, "tags": [], "bug_id": 56991, "text": "See JspServlet lines 302-304:\n\n   // JSP specified via <jsp-file> in <servlet> declaration and supplied through\n   //custom servlet container code\n   jspUri = (String) request.getAttribute(Constants.JSP_FILE);\n\n\nThe comment here implies that the container uses this method to identify a servlet that is declared with a jsp-file attribute. However, tomcat actually uses the init-param \"jspFile\" on a copy of the JspServlet with the name of the target jsp instead.\n\nIf a container sets this attribute as per the comment, it can cause stack overflow when jsp including is used:\n\n a.jsp is defined in a jsp-file on a servlet in web.xml\n a.jsp includes b.jsp\n\nWhen a.jsp is serviced it does an include dispatch to b.jsp. When the JspServlet is called for b.jsp, it sees that the request attribute with a.jsp is set, so processes it again ... which does an include dispatch for b.jsp ... which causes a.jsp to be processed again .... and then rinse and repeat.\n\nNote that Glassfish nulls out this attribute after it has been detected:\n\n  if (jspFile != null) {\n            // JSP is specified via <jsp-file> in <servlet> declaration\n            jspUri = jspFile;\n            request.removeAttribute(Constants.JSP_FILE);\n        } else {\n\nJan", "id": 177949, "time": "2014-09-18T05:46:33Z", "creator": "janb@webtide.com", "creation_time": "2014-09-18T05:46:33Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 56991, "attachment_id": null, "text": "A little svn archeology discovered r1003589 where the use of this attribute was removed.\n\nI'll apply the suggested fix and deprecate this attribute so it can be removed in 9.0.x.", "id": 178024, "time": "2014-09-22T11:20:36Z", "creator": "markt@apache.org", "creation_time": "2014-09-22T11:20:36Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 56991, "attachment_id": null, "text": "This has been fixed in 8.0.x and 8.0.13 onwards and in 7.0.x for 7.0.56 onwards.", "id": 178025, "time": "2014-09-22T11:45:12Z", "creator": "markt@apache.org", "creation_time": "2014-09-22T11:45:12Z", "is_private": false}]