[{"count": 0, "attachment_id": null, "bug_id": 53289, "is_private": false, "id": 159289, "time": "2012-05-24T13:58:15Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2012-05-24T13:58:15Z", "tags": [], "text": "It was reported on the users list:\nhttp://marc.info/?t=133780532900005&r=1&w=2\nhttp://markmail.org/thread/26yhdl7pfhdm2dic\n\n\nIn documentation there is example [1] on using a ResourceLink with specific value for the factory, org.apache.naming.factory.DataSourceLinkFactory. It allows to specify custom username and password while reusing connections from  a global datasource pool. This feature was added per bug 49543.\n\n\nThe problem is that there is an important bit that is lacking from the description: this feature requires support from the pool implementation for getConnection(username, password) method.\n\n- In Apache Commons DBCP pool there is no support for that method [2]. An UnsupportedOperationException will be thrown. (DBCP 1.4)\n\n- In Apache Tomcat JDBC pool support for this feature is off by default (username and password are ignored). It can be enabled by setting alternateUsernameAllowed=\"true\". [3]\n\n\n[1] http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Resource_Links\n\n[2] http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html#getConnection%28java.lang.String,%20java.lang.String%29\n\n[3] http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html"}, {"count": 1, "tags": [], "creator": "knst.kolinko@gmail.com", "text": "Fixed in trunk r1342503\nin 7.0.x r1342511 to be in 7.0.28,\nin 6.0.x r1342515 to be in 6.0.36.", "id": 159308, "time": "2012-05-25T06:43:53Z", "bug_id": 53289, "creation_time": "2012-05-25T06:43:53Z", "is_private": false, "attachment_id": null}]