[{"count": 0, "tags": [], "bug_id": 12110, "attachment_id": null, "is_private": false, "id": 21852, "time": "2002-08-27T22:02:38Z", "creator": "jian.cai@sun.com", "creation_time": "2002-08-27T22:02:38Z", "text": "The Database connection of Tomcat5.0 through Global resource look up does not \nwork. It seems the container was connecting the database using the default \nwindows user name and got exception.\n\nConfig:\n\n<Resource name=\"jdbc/WorkflowAppDb\" scope=\"Shareable\" \ntype=\"javax.sql.DataSource\"/>\n\nException:\n\n       <Context className=\"org.apache.catalina.core.StandardContext\" \ncachingAllowed=\"true\" \ncharsetMapperClass=\"org.apache.catalina.util.CharsetMapper\" cookies=\"true\" \ncrossContext=\"false\" debug=\"0\" displayName=\"Workflow\" docBase=\"workflow\" \nmapperClass=\"org.apache.catalina.core.StandardContextMapper\" path=\"/workflow\" \nprivileged=\"false\" reloadable=\"false\" useNaming=\"true\" \nwrapperClass=\"org.apache.catalina.core.StandardWrapper\">\n          <ResourceLink global=\"jdbc/WorkflowAppDb\" name=\"jdbc/WorkflowAppDb\" \ntype=\"org.apache.catalina.UserDatabase\"/>\n        </Context>\n\nException:\n\njavax.servlet.ServletException: MainServlet: unknown exception: \norg.apache.commons.dbcp.DbcpException: java.sql.SQLException: Cannot find the \nuser \"CAI\" .\n\tat com.sun.j2ee.workflow.control.web.MainServlet.doProcess\n(MainServlet.java:127)\n\tat com.sun.j2ee.workflow.control.web.MainServlet.doGet\n(MainServlet.java:97)\n\tat com.sun.j2ee.workflow.control.web.MainServlet.doPost\n(MainServlet.java:60)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat com.sun.j2ee.workflow.control.filters.RequestLogFilter.doFilter\n(RequestLogFilter.java:81)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:213)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:263)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.RequestListenerValve.invoke\n(RequestListenerValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:474)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2487)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:405)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:380)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:508)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:533)\n\tat java.lang.Thread.run(Thread.java:536)"}, {"count": 1, "tags": [], "bug_id": 12110, "text": "<Resource name=\"jdbc/WorkflowAppDb\" scope=\"Shareable\" type=\"javax.sql.DataSource\"/>\n\n\n<ResourceParams name=\"jdbc/WorkflowAppDb\">\n      <parameter>\n        <name>validationQuery</name>\n        <value></value>\n      </parameter>\n      <parameter>\n        <name>user</name>\n        <value>PUBLIC</value>\n      </parameter>\n      <parameter>\n        <name>url</name>\n        <value>jdbc:pointbase:server://localhost/workflow</value>\n      </parameter>\n      <parameter>\n        <name>password</name>\n        <value>public</value>\n      </parameter>\n      <parameter>\n        <name>maxActive</name>\n        <value>4</value>\n      </parameter>\n      <parameter>\n        <name>maxWait</name>\n        <value>5000</value>\n      </parameter>\n      <parameter>\n        <name>driverClassName</name>\n        <value>com.pointbase.jdbc.jdbcUniversalDriver</value>\n      </parameter>\n      <parameter>\n        <name>maxIdle</name>\n        <value>2</value>\n      </parameter>\n    </ResourceParams>", "id": 22213, "time": "2002-09-03T23:37:01Z", "creator": "jian.cai@sun.com", "creation_time": "2002-09-03T23:37:01Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "The problem is due to a syntax error in your <ResourceParams> element. The\nfollowing snippet:\n\n      <parameter>\n        <name>user</name>\n        <value>PUBLIC</value>\n      </parameter>\n\nshould be:\n\n      <parameter>\n        <name>username</name>\n        <value>PUBLIC</value>\n      </parameter>\n\nDBCP was using your Windows user name to connect to the database because when\nthe \"username\" parameter is missing (the \"user\" parameter that you used is\nignored), DBCP will attempt to use the value of the \"user.name\" system property.", "is_private": false, "id": 22283, "creator": "patrick.luby@planamesa.com", "time": "2002-09-04T17:00:43Z", "bug_id": 12110, "creation_time": "2002-09-04T17:00:43Z", "attachment_id": null}]