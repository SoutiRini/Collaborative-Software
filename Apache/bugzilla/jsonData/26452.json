[{"count": 0, "tags": [], "bug_id": 26452, "attachment_id": null, "id": 51221, "time": "2004-01-27T01:36:40Z", "creator": "seth@ehawaii.gov", "creation_time": "2004-01-27T01:36:40Z", "is_private": false, "text": "Hello,\n\nI've read the servlet spec chapters relevant to this problem, and searched the\nmailing list.  I think I might have exposed a certain condition where the\nwelcome-file functionality isn't working correctly.\n\nJDK: 1.4.2\nLinux: 2.6.1\nTomcat: 5.0.18\nStruts: 1.1\n\nHere is my web.xml sections I believe are relevant:\n\n----------------------------\n\n <servlet>\n    <servlet-name>action</servlet-name>\n    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>\n    <init-param>\n      <param-name>config</param-name>\n      <param-value>/WEB-INF/struts-config.xml</param-value>\n    </init-param>\n    <init-param>\n      <param-name>debug</param-name>\n      <param-value>2</param-value>\n    </init-param>\n    <init-param>\n      <param-name>detail</param-name>\n      <param-value>2</param-value>\n    </init-param>\n    <load-on-startup>2</load-on-startup>\n</servlet>\n\n    <servlet-mapping>\n    <servlet-name>action</servlet-name>\n    <url-pattern>*.x</url-pattern>\n  </servlet-mapping>\n\n... cut ...\n\n\t<welcome-file-list>\n\t\t<welcome-file>index.x</welcome-file>\n\t</welcome-file-list>\n\n----------------------------\n\nWhen I go to:\n\nhttp://localhost:8080/appContext/\n\nI see an empty directory listing.  (this is because all my jsp files are in WEB-INF)\n\nWhen I go to:\n\nhttp://localhost:8080/appContext/index.x\n\nI see the correct page.\n\nI believe, according to servlet 2.4, I should be able to place a mapping to a\nservlet in the welcome-file.\n\nI can't see any error in catalina.out or the localhost-DATE.log file.\n\nI have no other servlets declared, and no default servlet declared.\n\nAny ideas or tips?\n\nThanks very much,\nSeth"}, {"count": 1, "tags": [], "bug_id": 26452, "is_private": false, "text": "This is like a really ugly use-case, but I have to agree with your reading of \nthe 2.4 servlet-spec in this case.", "id": 51227, "time": "2004-01-27T07:31:10Z", "creator": "william.barker@wilshire.com", "creation_time": "2004-01-27T07:31:10Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "I have to disagree: welcome files cannot possibly apply to extension mapping.\nThis was already discussed with Jean Fran\u00e7ois a while ago.", "id": 51229, "time": "2004-01-27T08:09:06Z", "bug_id": 26452, "creation_time": "2004-01-27T08:09:06Z", "is_private": false}, {"count": 3, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "I have one small example to add: if this bug was valid, using the spec mandated\ndefault welcome files and servlet mappings, we would always redirect to index.jsp.", "id": 51232, "time": "2004-01-27T08:40:10Z", "bug_id": 26452, "creation_time": "2004-01-27T08:40:10Z", "is_private": false}, {"count": 4, "text": "OK, not sure why welcome files can't apply to extension mappings.  More\nimportantly, does the spec say that?  If it is implied, it should be explicitly\nstated.  Reading the spec (at least, my interpretation) does not imply that\nextension mappings and welcome files can't play together.\n\nIs this a tomcat limitation or a spec limitation?\n\nThanks!", "bug_id": 26452, "attachment_id": null, "id": 51260, "time": "2004-01-27T18:23:48Z", "creator": "seth@ehawaii.gov", "creation_time": "2004-01-27T18:23:48Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 26452, "attachment_id": null, "is_private": false, "id": 51285, "time": "2004-01-28T08:44:43Z", "creator": "remm@apache.org", "creation_time": "2004-01-28T08:44:43Z", "text": "Look at my example. Does that behavior makes sense ? No. So you have your answer :)"}, {"count": 6, "tags": [], "creator": "marcelo.bello@ic.unicamp.br", "attachment_id": null, "id": 52511, "time": "2004-02-18T21:53:05Z", "bug_id": 26452, "creation_time": "2004-02-18T21:53:05Z", "is_private": false, "text": "I have faced the same problem. I have:\n...\n  <servlet-mapping>\n      <servlet-name>action</servlet-name>\n      <url-pattern>*.do</url-pattern>\n  </servlet-mapping>\n...\n  <welcome-file-list>\n    <welcome-file>Welcome.do</welcome-file>\n  </welcome-file-list>\n\nwhen I try:\nhttp://host:port/\nI get 404. if I try\nhttp://host:port/Welcome.do works fine.\n\nServlet 2.4 specs says (on pdf version page 76):\n\n\"If a Web container receives a valid partial request, the Web container must\nexamine the welcome file list defined in the deployment descriptor. The welcome\nfile list is an ordered list of partial URLs with no trailing or leading /. The\nWeb server must append each welcome file in the order specified in the\ndeployment descriptor to the partial request and check whether a static resource\nor servlet in the WAR is mapped to that request URI.\"\n\nI think its pretty clear that servlet mapping should be applied to welcome-file\nelements.\n\nAlso, if I change my dd to:\n\n...\n  <servlet-mapping>\n      <servlet-name>action</servlet-name>\n      <url-pattern>*.do</url-pattern>\n  </servlet-mapping>\n  <servlet-mapping>\n      <servlet-name>action</servlet-name>\n      <url-pattern>/Welcome.do</url-pattern>\n  </servlet-mapping>\n...\n  <welcome-file-list>\n    <welcome-file>Welcome.do</welcome-file>\n  </welcome-file-list>\n\nEverything works fine (so in this case, Tomcat is performing servlet mapping). \n\nIt's definitely a bug."}, {"count": 7, "tags": [], "bug_id": 26452, "attachment_id": null, "id": 52512, "time": "2004-02-18T21:58:38Z", "creator": "remm@apache.org", "creation_time": "2004-02-18T21:58:38Z", "is_private": false, "text": "Wow, I am so impressed by your arguments (cut & pasted from the comments right\nabove I'm sure) ;) If it wouldn't create a non working container, I would gladly\nfix this \"bug\". Thanks for not reopening the report, BTW."}, {"count": 8, "tags": [], "bug_id": 26452, "attachment_id": null, "is_private": false, "id": 52516, "time": "2004-02-18T22:31:56Z", "creator": "marcelo.bello@ic.unicamp.br", "creation_time": "2004-02-18T22:31:56Z", "text": "Remy Maucherat,\n\n  I wonder how someone can get so arrogant. Your attitude is just not helping.\n  It's pretty clear that I didn't copy&paste. As you can see, I checked the\nspecs, and also found a work-around (which might be helpful for other people).\n  It would be nice if you could share a little bit of your acknowledge in this\nmatter with us, mere mortals.\n  Of course it would also give credibility to your statements, so other people\nwon't ask again.\n  In short: Why can't it be implemented?\n  \n  "}, {"count": 9, "tags": [], "bug_id": 26452, "attachment_id": null, "is_private": false, "id": 52517, "time": "2004-02-18T22:35:58Z", "creator": "remm@apache.org", "creation_time": "2004-02-18T22:35:58Z", "text": "Can you answer these two questions ?\n- how is your example different from the one given on top of the page ?\n- what do you think will happen, given the default configuration for all webapps\nis to have index.jsp as (one of) the welcome files, with a default mapping of\n*.jsp to the JSP processing servlet ? (I did point that out a few comments\nabove, but you don't seem to bother reading; whining is so easy ...)"}, {"count": 10, "text": "Well, it's interesting to see how this \"invalid\" bug report and the equivalent bug #37424, classified as \"nonsense\" by Remy, was actually fixed in Tomcat 7 as bug #47378 ;-)", "bug_id": 26452, "is_private": false, "id": 160230, "time": "2012-06-25T10:01:20Z", "creator": "mauromol@tiscali.it", "creation_time": "2012-06-25T10:01:20Z", "tags": [], "attachment_id": null}]