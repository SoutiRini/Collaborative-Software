[{"count": 0, "tags": [], "bug_id": 4198, "is_private": false, "id": 6753, "attachment_id": null, "creator": "andreass@dcentrio.com", "creation_time": "2001-10-16T06:47:46Z", "time": "2001-10-16T06:47:46Z", "text": "Following the installation of mod_webapp for solaris 8 and apache 1.3.9 you \nwill get the following error if you execute the command\n    apachectl configtest\n\n# /usr/apache/bin/apachectl configtest\nSyntax error on line 235 of /etc/apache/httpd.conf:\nCannot load /usr/apache/libexec/mod_webapp.so/ into server: ld.so.1: /usr/apache\n/bin/httpd: fatal: relocation error: file /usr/apache/libexec/mod_webapp.so/: sy\nmbol __lshrdi3: referenced symbol not found\n#\n\nThe inserted lines in httpd.conf:\n...\nLoadModule webapp_module      /usr/apache/libexec/mod_webapp.so\n...\nAddModule mod_webapp.c\n..."}, {"count": 1, "tags": [], "bug_id": 4198, "is_private": false, "text": "This is most likely due to having a mod_webapp compiled with gcc and an Apache\ncompiled with the Sun compiler.\n\nPlease compile mod_webapp from sources to resolve this problem.\n\nAnd, better yet, please update your version from Apache 1.3.9 to 1.3.22.  =)\n\n(Apache 1.3.9 sounds suspiciously like the version included with Solaris 8 which\nis not an officially supported version anyway.)", "id": 6755, "time": "2001-10-16T08:25:52Z", "creator": "jerenkrantz@apache.org", "creation_time": "2001-10-16T08:25:52Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 4198, "is_private": false, "text": "This is indeed a clash in the compilers used to build Apache and the \nModule...", "id": 6984, "time": "2001-10-22T09:16:07Z", "creator": "pier@betaversion.org", "creation_time": "2001-10-22T09:16:07Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 4198, "text": "I already had the same problem on my Sparc/Solaris 2.7. \nTo SOLVE IT, follow these steps:\n\n1- Install Gcc 2.95.3\n2- Set an environment variable named LIBS to \"-L/usr/local/lib/gcc-lib/sparc-\nsun-solaris2.8/2.95.3 -lgcc\"\n3- Make sure you are using \"ld\" from Solaris\n4- Compile Apache\n5- Compile Webapp\n\nThis worked for me (Tomcat 4.0.1/Webapp 1.0/Apache 1.3.22).\n\nRobert Bafini\nrobert@cpqd.com.br", "id": 7045, "attachment_id": null, "creator": "robert@cpqd.com.br", "creation_time": "2001-10-23T05:10:43Z", "time": "2001-10-23T05:10:43Z", "is_private": false}, {"count": 4, "attachment_id": null, "creator": "pier@betaversion.org", "text": "*** Bug 4354 has been marked as a duplicate of this bug. ***", "id": 7048, "time": "2001-10-23T06:53:35Z", "bug_id": 4198, "creation_time": "2001-10-23T06:53:35Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 4198, "is_private": false, "count": 5, "id": 7074, "time": "2001-10-23T14:20:23Z", "creator": "jim@mail.ucf.edu", "creation_time": "2001-10-23T14:20:23Z", "text": "I have tried re-compiling apache and webapp with gcc-2.95.3 and we have forced\nthe system to use the solaris ld (/usr/ccs/bin/ld).  We are still getting the\nsame error message about \"__lshrdi3: referenced symbol nout found\".\n\nAny other ideas or tips?  This is holding us enable webapp for use in an\nintranet application."}, {"attachment_id": null, "tags": [], "bug_id": 4198, "text": "I seem to have had more success on a Solaris 8 machine than a Solaris 7 one. \n\nAs released the webapp module for Solaris 8 doesnt work. I had to build from \nthe CVS code to get it working on Solaris 8. Anyway I got that working.\n\nHowever, nothing I have tried has worked for Solaris 7.\n\nI am using the release build of Tomcat 4.0.1.\n\nI am using gcc 3.0.1, I have done the compile against a nightly build \n(20011018) of the connector (from CVS). Apache 1.3.22 compiled with the same \ngcc and is otherwise working fine. The attempt to load mod_webapp gives the \n__lshrdi3 reference error.\n\nI am out of ideas. What is __lshrdi3 anyway ? If I knew that I might have a \nclue as to where to go next.", "count": 6, "id": 7146, "time": "2001-10-25T06:45:45Z", "creator": "john@smansys.demon.co.uk", "creation_time": "2001-10-25T06:45:45Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 4198, "attachment_id": null, "text": "UCF update -\n\nI was able to successfully compile and load the module on Solaris 8.  I pulled\ndown the pre-compiled gcc-2.95.3 (the webapp package does not work with 2.95.2)\npackage from sun.freeware.com to my system.\n\nI set the LIBS environment variable per Pier's notes and compiled all of the\npackages involved using gcc and the Sun ld command (/usr/ccs/bin/ld).  We are\nalso installed ssl with this web server so we had some additional packages to\ninstall.\n\nWe basically rm'd the old source directories and started the installation\nprocess from 'clean' source directories in each case.\n\nI put the mod_webapp.so file in the apache libexec directory and added the\nLoadModule statement to the httpd.conf file.  I found that it works better if\nyou stop/start the server rather than doing a restart with this change.\n\nThe 'apachectl configtest' command ran clean and then the full startup seemed to\nwork (based on the messages in error_log from the startup).\n\nOur web developer is now trying to use the package, but at least the package is\ninstalled and does not cause the web server to abend and die when loading the\nweb_app module.\n", "id": 7162, "time": "2001-10-25T11:20:46Z", "creator": "jim@mail.ucf.edu", "creation_time": "2001-10-25T11:20:46Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 4198, "text": "From comments here I was encouraged to press on. I now have it working on both \nSolaris 8 and Solaris 7. I built it with the sun compiler in both cases (Forte \n6 update 1). I did not need the LIB's trick, I did need to define GCC=no and \nmake sure that gcc was not on the path to get it all going.\n\nYou have to take a lot care with your build environment. One thing that tripped \nme up is the config.cache files in webapp and apr. If you make significant \nchanges like to a compiler - you have to delete these, it is not good enough \njust running ./support/buildconf.sh and ./configure again.\nThese files retain old settings. I probably tried a lot of options that would \nhave worked before if it were not for this. Most people reporting that \na \"clean\" install of the source fixed it, are probably in the same boat. I find \na clean install not to be necessary if you simply rm the config.cache's.\n\nI'd be happy to upload the compiled mod_webapp.so's for solaris 7 and 8.\n\nJohn..", "count": 8, "id": 7216, "time": "2001-10-26T14:11:09Z", "creator": "john@smansys.demon.co.uk", "creation_time": "2001-10-26T14:11:09Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 4198, "text": "<struggle, struggle> I was getting the same problem with __divdi3 (symbol not \nfound). after some investigation, it looks like source files in apr are the \nreal culprit (e.g. readwrite.c). I finally got it to work by simply \nadding '/usr/local/lib/gcc-lib/i386-pc-solaris2.8/2.95.3/libgcc.a' to the list \nof libraries in the apxs command in the apache-1.3 directory's Makefile.\n\nBTW: you can remove all cached configure files by issuing 'make distclean'.\n\nhth", "count": 9, "id": 11675, "time": "2002-03-11T21:35:25Z", "creator": "mparker@computer.org", "creation_time": "2002-03-11T21:35:25Z", "is_private": false}]