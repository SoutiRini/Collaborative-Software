[{"count": 0, "tags": [], "bug_id": 49587, "text": "This can result in \"OutOfMemoryError: unable to create new native thread\" when many forked processes are used.\n\nIt can also result in app hangs, the root cause of which are extremely difficult to track down.  Apparently, the process blocks while waiting for input.\n\nWe experienced hangs on a particular subset of XP machines, but we couldn't determine what characteristic(s) that subset had in common.  When a Java process forked an Ant process that forked a Java process without using the inputstring=\"\" work around, a subsequently forked Java process hung.\n\nhttp://marc.info/?l=ant-user&m=127851430928759&w=2", "id": 138370, "time": "2010-07-12T12:06:02Z", "creator": "mbm@ptc.com", "creation_time": "2010-07-12T12:06:02Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "Mike, since the mailing list thread pre-dates Ant 1.8 could you please confirm the problem still exists in Ant 1.8.1?", "attachment_id": null, "id": 138890, "creator": "bodewig@apache.org", "time": "2010-08-05T00:27:26Z", "bug_id": 49587, "creation_time": "2010-08-05T00:27:26Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 49587, "text": "(In reply to comment #1)\n> Mike, since the mailing list thread pre-dates Ant 1.8 could you please confirm\n> the problem still exists in Ant 1.8.1?\n\nI experienced the latest problem using 1.8.1.  \n\nI fixed this problem on 7/6/10, adding the inputstring=\"\" on a forked java task.  We upgraded to Ant 1.8.1 on 5/15/10.\n\nAdditionally, we have patched our version of 1.8.1 with the following:\n\nmain\\org\\apache\\tools\\ant\\taskdefs\n  defaults.properties: Resolve Groovy performance, especially memory, problems, by adding <groovy> to the default tasks.\n    (https://issues.apache.org/bugzilla/show_bug.cgi?id=49021)\n \nmain\\org\\apache\\tools\\ant\\taskdefs\n  SubAnt.java: Fix - basedir is not set correctly when calling subant task through ant task\n    (https://issues.apache.org/bugzilla/show_bug.cgi?id=30569)\n \nmain\\org\\apache\\tools\\ant\\taskdefs\n  PumpStreamHandler.java: Revert unix performance bug introduced in 1.8.1 version.\n    (https://issues.apache.org/bugzilla/show_bug.cgi?id=49384)\n \nmain\\org\\apache\\tools\\ant\\util\n  ResourceUtils.java: Include 1.8.2 version, to avoid 1.8.1 regression.\n    (https://issues.apache.org/bugzilla/show_bug.cgi?id=49326)", "id": 138891, "time": "2010-08-05T00:52:08Z", "creator": "mbm@ptc.com", "creation_time": "2010-08-05T00:52:08Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 49587, "attachment_id": null, "id": 138916, "time": "2010-08-05T14:04:12Z", "creator": "bodewig@apache.org", "creation_time": "2010-08-05T14:04:12Z", "is_private": false, "text": "Hmm, if the \"fix\" for bug 49384 is to unconditionally not use available anymore, you are going to get problems on Windows rather than solve some.\n\nIt would be great if we could see thread dumps but I realize this is very difficult to do in your case.  When <exec> finishes it is supposed to take down the input pumping thread as well - I'll revisit the code."}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "OK, currently we don't ensure the input pumper stops if it is blociked on read, which it likely is when reading from System.in\n\n*** This bug has been marked as a duplicate of bug 49119 ***", "id": 139137, "time": "2010-08-17T08:27:44Z", "bug_id": 49587, "creation_time": "2010-08-17T08:27:44Z", "is_private": false}, {"count": 5, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "svn revision 986668 should finally fix this", "id": 139204, "time": "2010-08-18T11:14:14Z", "bug_id": 49587, "creation_time": "2010-08-18T11:14:14Z", "is_private": false}]