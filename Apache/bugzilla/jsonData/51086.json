[{"attachment_id": null, "tags": [], "creator": "maarten_coene@yahoo.com", "is_private": false, "count": 0, "id": 145880, "time": "2011-04-20T04:40:34Z", "bug_id": 51086, "creation_time": "2011-04-20T04:40:34Z", "text": "The package mapper doesn't work well on windows in combination with handledirsep=true. The reason is that the package mapper replaces all File.separatorChar characters with '.', but when the handledirsep property was set to true, all directory separators are replace by '/' which is different than the File.separatorChar on Windows."}, {"count": 1, "tags": [], "bug_id": 51086, "is_private": false, "text": "(In reply to comment #0)\n> The package mapper doesn't work well on windows in combination with\n> handledirsep=true. The reason is that the package mapper replaces all\n> File.separatorChar characters with '.', but when the handledirsep property was\n> set to true, all directory separators are replace by '/' which is different\n> than the File.separatorChar on Windows.\n\nDo you have an actual test case for this problem?\n\nAs I understand, handledirsep is only relevant for the purpose of matching the from pattern - it does not change the slashes in the part that matches the *. For example:\n\nfrom = org/apache/tools/ant/*Test.java\nto = TEST-*Test.xml\nhandledirsep = true\n\nThe path name org\\apache\\tools\\ant\\util\\PackageMapperTest.java will still be converted to util.PackageMapperTest.xml. So as long as the original path has all '\\' and not a mix of '\\' and '/', the package mapper will still be able to map the dir seps to '.', which seems to be the expected result.", "id": 145970, "time": "2011-04-23T21:39:10Z", "creator": "acwwat@gmail.com", "creation_time": "2011-04-23T21:39:10Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 51086, "is_private": false, "text": "Here is a simple example that doesn't work on windows:\n\n<pathconvert>\n    <string>foo/bar</string>\n    <packagemapper from=\"*\" to=\"*\" handledirsep=\"true\"/>\n</pathconvert>\n\nThe expected outcome should be 'foo.bar', but on windows this is 'foo/bar'", "id": 145978, "time": "2011-04-25T02:04:24Z", "creator": "maarten_coene@yahoo.com", "creation_time": "2011-04-25T02:04:24Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "acwwat@gmail.com", "attachment_id": 26940, "text": "Created attachment 26940\nPatch to handle replacement of both '/' and '\\' when handledirsep=true in package mapper", "id": 146027, "time": "2011-04-27T22:25:33Z", "bug_id": 51086, "creation_time": "2011-04-27T22:25:33Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 51086, "text": "Thanks for the extra example. In the regular glob mapper, both the casesensitive and handledirsep attributes are only used for matching patterns. The matched patterns are not changed and copy as-is. But I can understand your point of view that handledirsep implies also the replacement of all file separators to '.' I think that it makes sense that both '/' and '\\' are replcaed if handledirsep is set to true for a package mapper. With that said, I have attached a patch and will let a committer decide if this is the desired behaviour.", "id": 146028, "time": "2011-04-27T22:29:13Z", "creator": "acwwat@gmail.com", "creation_time": "2011-04-27T22:29:13Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 51086, "is_private": false, "text": "fixed with svn revision 1203181\n\nThanks!", "id": 151598, "time": "2011-11-17T13:28:08Z", "creator": "bodewig@apache.org", "creation_time": "2011-11-17T13:28:08Z", "attachment_id": null}]