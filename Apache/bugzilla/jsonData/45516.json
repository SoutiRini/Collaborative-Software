[{"count": 0, "tags": [], "bug_id": 45516, "attachment_id": null, "id": 119179, "time": "2008-07-31T05:28:14Z", "creator": "ville.hartikainen@logica.com", "creation_time": "2008-07-31T05:28:14Z", "is_private": false, "text": "Between random intervals our website running with Liferay + Tomcat 6.0.14 gets stuck. \n\nCPU utilization is close to nothing. After getting a thread dump from the running java process, a following stacktraces are seen in all of the http-threads:\n\nIs anybody able to tell, whether this is a bug in Tomcat, JVM, in our configuration or have I just diagnosed the problem incorrectly? \n\nSomething to workaround this problem?\n- - -\n\"http-9095-28\" daemon prio=1 tid=0x0000000044743190 nid=0x3bc runnable [0x000000005124a000..0x000000005124be10]\n\tat java.net.SocketOutputStream.socketWrite0(Native Method)\n\tat java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\n\tat java.net.SocketOutputStream.write(SocketOutputStream.java:136)\n\tat org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:737)\n\tat org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:434)\n\tat org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349)\n\tat org.apache.coyote.http11.InternalOutputBuffer$OutputStreamOutputBuffer.doWrite(InternalOutputBuffer.java:761)\n\tat org.apache.coyote.http11.filters.IdentityOutputFilter.doWrite(IdentityOutputFilter.java:118)\n\tat org.apache.coyote.http11.InternalOutputBuffer.doWrite(InternalOutputBuffer.java:570)\n\tat org.apache.coyote.Response.doWrite(Response.java:560)\n\tat org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:353)\n\tat org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:354)\n\tat org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:381)\n\tat org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:370)\n\tat org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)\n\tat java.io.BufferedOutputStream.write(BufferedOutputStream.java:105)\n\t- locked <0x00002aaaf85f8ac0> (a java.io.BufferedOutputStream)\n\tat com.liferay.util.servlet.ServletResponseUtil.write(ServletResponseUtil.java:194)\n\tat com.liferay.filters.strip.StripFilter.doFilter(StripFilter.java:249)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat com.liferay.filters.secure.SecureFilter.doFilter(SecureFilter.java:144)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat com.liferay.filters.compression.CompressionFilter.doFilter(CompressionFilter.java:122)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat com.liferay.filters.doubleclick.DoubleClickFilter.doFilter(DoubleClickFilter.java:135)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat com.liferay.portal.servlet.filters.layoutcache.LayoutCacheFilter.doFilter(LayoutCacheFilter.java:167)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.doFilter(AutoLoginFilter.java:106)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.doFilter(VirtualHostFilter.java:147)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:445)\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:379)\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:292)\n\tat com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.doFilter(VirtualHostFilter.java:197)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:263)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)\n\tat org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:584)\n\tat org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)\n\tat java.lang.Thread.run(Thread.java:595)"}, {"count": 1, "tags": [], "bug_id": 45516, "attachment_id": null, "id": 119219, "creation_time": "2008-08-01T00:52:56Z", "time": "2008-08-01T00:52:56Z", "creator": "ville.hartikainen@logica.com", "text": "Version information of used JDK and Tomcat, as reported by \"catalina.sh version\"\n------------------\nUsing JRE_HOME:       /usr/java/jdk1.5.0_13/\nServer version: Apache Tomcat/6.0.14\nServer built:   Jul 20 2007 04:17:30\nServer number:  6.0.14.0\nOS Name:        Linux\nOS Version:     2.6.18-53.1.4.el5\nArchitecture:   amd64\nJVM Version:    1.5.0_13-b05\nJVM Vendor:     Sun Microsystems Inc.\n", "is_private": false}, {"count": 2, "tags": [], "bug_id": 45516, "is_private": false, "text": "This occasionally gets reported on the users list. The most recent occurrence appears to be this thread:\nhttp://markmail.org/message/hghfhwoxdoa6fg5s\n\nMy best guess at the moment as to the root cause is some form of network oddity.\n\nThe users list is the best place to get help with this issue as bugzilla is really suited to being used as a support forum.\n\nIf you investigations identify a bug in Tomcat, feel free to re-open this issue and provide the appropriate information.", "id": 119225, "time": "2008-08-01T07:47:17Z", "creator": "markt@apache.org", "creation_time": "2008-08-01T07:47:17Z", "attachment_id": null}]