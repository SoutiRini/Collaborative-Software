[{"count": 0, "tags": [], "text": "For example, I expected the following should be fine:\n<jsp-property-group>\n  <buffer>32kb</buffer>\n</jsp-property-group>\n\nBUT actually, it will cause start app fail.\n\nIf I change it to:\n<buffer>32000</buffer>\n\nIt is accepted. BUT, jsp compile will FAIL!", "attachment_id": null, "bug_id": 57105, "id": 178531, "time": "2014-10-17T09:10:24Z", "creator": "xuyijun@gmail.com", "creation_time": "2014-10-17T09:10:24Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 57105, "is_private": false, "text": "The allowed values are \"none\" and <number>\"kb\".\nIt is verified in org.apache.jasper.compiler.PageInfo.setBufferValue()\n\n1. The buffer size can also be specified via buffer attribute on @page directive. The same code is used to verify both use cases. Thus no wonder that the check happens in JSP compiler.\n\n\n2. I would say that the better place to do verification is XSD schema, jsp_2_3.xsd.\n\nUnfortunately it is currently declared there just as type=\"javaee:string\" with no further constraints.\n\nI think that to make changes there, it has to be raised with the specification folks.\n\nNote that validation of web.xml is only enabled if you are running in \"strict compliance\" mode by setting a system property or setting xmlValidation=\"true\" on Context.\nhttps://tomcat.apache.org/tomcat-8.0-doc/config/systemprops.html#Specifications\n\n\n3. I does not really feels as a job for JSP engine to verify web.xml, and Servlet engine has little interest in those effectively foreign settings.", "id": 178539, "time": "2014-10-17T13:04:38Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-10-17T13:04:38Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 57105, "is_private": false, "text": "What I mean is when set 32kb in <buffer> in web.xml is ok, BUT when tomcat start, it will throw Exception, because in source code, it parse it by calling  Integer.valueOf(...) which is want to convert \"32kb\" into a integer.\n \nPlease consider it.", "id": 178540, "time": "2014-10-17T13:25:09Z", "creator": "xuyijun@gmail.com", "creation_time": "2014-10-17T13:25:09Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 178656, "time": "2014-10-21T20:34:55Z", "bug_id": 57105, "creation_time": "2014-10-21T20:34:55Z", "is_private": false, "text": "Thanks for the report. This has been fixed in 8.0.x for 8.0.15 onwards and in 7.0.x for 7.0.57 onwards."}]