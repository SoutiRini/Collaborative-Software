[{"count": 0, "tags": [], "text": "For library jar files that have spaces in their path name, org.apache.catalina.loader.WebAppClassLoader.getResources(String) returns two resource URLs for the identical resource, causing some frameworks to have issues (especially Struts2). \n\nFor example a call for the struts-default.xml file (in this case on the classpath at: C:/Documents and Settings/Administrator/IBM/rationalsdp/workspace/ea.dmc.rtoe.repository/third-party/org/apache/struts/struts2-core/2.1.6/struts2-core-2.1.6.jar!/struts-default.xml) would result in the follow returned enumeration:\n\n[java.util.Vector$1@52eb52eb, java.net.URLClassLoader$2@53ee53ee]\n\nwhere java.util.Vector$1@52eb52eb has one URL element: jar:file:/C:/Documents and Settings/Administrator/IBM/rationalsdp/workspace/ea.dmc.rtoe.repository/third-party/org/apache/struts/struts2-core/2.1.6/struts2-core-2.1.6.jar!/struts-default.xml\n\nand java.net.URLClassLoader$2@53ee53ee has one URL element:\njar:file:/C:/Documents%20and%20Settings/Administrator/IBM/rationalsdp/workspace/ea.dmc.rtoe.repository/third-party/org/apache/struts/struts2-core/2.1.6/struts2-core-2.1.6.jar!/struts-default.xml\n\nNotice the \"%20\" in the second URL. However, they are the same resource.\n\nThis causes the XMLConfigurationProvider in Struts2 (2.1.16) to try and load the same struts-default.xml twice, which it doesn't allow by default.\n\nThe workaround is to deploy to a place which doesn't include spaces in the path name, but I believe this should be handled by Catalina.", "attachment_id": null, "id": 126372, "creator": "justink08@hotmail.com", "time": "2009-04-19T18:03:26Z", "bug_id": 47053, "creation_time": "2009-04-19T18:03:26Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 47053, "attachment_id": null, "id": 126669, "time": "2009-05-01T07:31:21Z", "creator": "markt@apache.org", "creation_time": "2009-05-01T07:31:21Z", "is_private": false, "text": "I have tried, and failed, to reproduce this. Can you double check this and if you still see this issue, provide the minimal steps to reproduce on a clean Tomcat install. Ideally this would be something along the lines of:\n- add the struts jar to WEB-INF/lib\n- run this JSP"}, {"count": 2, "tags": [], "bug_id": 47053, "attachment_id": null, "id": 128623, "time": "2009-07-07T21:42:33Z", "creator": "justink08@hotmail.com", "creation_time": "2009-07-07T21:42:33Z", "is_private": false, "text": "Sorry, I don't have time to reproduce it at the moment. There were 3 members of my team with exactly the same problem so it wasn't just one machine. I thought it would be worth the bug report, but if you cannot reproduce and no one else has the problem then I guess you can close this bug."}]