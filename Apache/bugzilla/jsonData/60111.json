[{"count": 0, "tags": [], "bug_id": 60111, "is_private": false, "text": "Hi,\n\nI was getting a blocking issue when I try to compile httpd-2.4.23 with openssl-1.1.0 (working under CentOS7).\n\nCould you please help. \n\nThanks in advance\n\nBest Regards,\n\n\n\n \nConfigure command: OK\n\n[root@localhost httpd-2.4.23]# ./configure --prefix=/usr/local/apache/$ASIP_HTTPD --enable-ssl -enable-mods-shared=ssl --with-apr=/usr/local/apr/$ASIP_APR --with-apr-util=/usr/local/apr-util/$ASIP_APR_UTIL --with-ssl=/usr/local/openssl/$ASIP_OPENSSL\n\nMAKE command: NOK\n\nFollowing reported issues:\n\n\n          ############# START LOG ################\n\n...\n...\n...\n\nssl_engine_init.c: In function 'make_dh_params':\nssl_engine_init.c:61:7: error: dereferencing pointer to incomplete type\n     dh->p = prime(NULL);\n       ^\nssl_engine_init.c:62:18: error: dereferencing pointer to incomplete type\n     BN_dec2bn(&dh->g, gen);\n                  ^\nssl_engine_init.c:63:12: error: dereferencing pointer to incomplete type\n     if (!dh->p || !dh->g) {\n            ^\nssl_engine_init.c:63:22: error: dereferencing pointer to incomplete type\n     if (!dh->p || !dh->g) {\n                      ^\nssl_engine_init.c: In function 'ssl_init_ctx_protocol':\nssl_engine_init.c:519:13: warning: 'TLSv1_client_method' is deprecated (declared at /usr/local/openssl/openssl-1.1.0/include/openssl/ssl.h:1598) [-Wdeprecated-declarations]\n             TLSv1_client_method() : /* proxy */\n             ^\nssl_engine_init.c:520:13: warning: 'TLSv1_server_method' is deprecated (declared at /usr/local/openssl/openssl-1.1.0/include/openssl/ssl.h:1597) [-Wdeprecated-declarations]\n             TLSv1_server_method();  /* server */\n             ^\nssl_engine_init.c:525:13: warning: 'TLSv1_1_client_method' is deprecated (declared at /usr/local/openssl/openssl-1.1.0/include/openssl/ssl.h:1604) [-Wdeprecated-declarations]\n             TLSv1_1_client_method() : /* proxy */\n             ^\nssl_engine_init.c:526:13: warning: 'TLSv1_1_server_method' is deprecated (declared at /usr/local/openssl/openssl-1.1.0/include/openssl/ssl.h:1603) [-Wdeprecated-declarations]\n             TLSv1_1_server_method();  /* server */\n             ^\nssl_engine_init.c:530:13: warning: 'TLSv1_2_client_method' is deprecated (declared at /usr/local/openssl/openssl-1.1.0/include/openssl/ssl.h:1610) [-Wdeprecated-declarations]\n             TLSv1_2_client_method() : /* proxy */\n             ^\nssl_engine_init.c:531:13: warning: 'TLSv1_2_server_method' is deprecated (declared at /usr/local/openssl/openssl-1.1.0/include/openssl/ssl.h:1609) [-Wdeprecated-declarations]\n             TLSv1_2_server_method();  /* server */\n             ^\nssl_engine_init.c: In function 'ssl_init_ctx_session_cache':\nssl_engine_init.c:641:9: warning: passing argument 2 of 'SSL_CTX_sess_set_get_cb' from incompatible pointer type [enabled by default]\n         SSL_CTX_sess_set_get_cb(ctx,    ssl_callback_GetSessionCacheEntry);\n         ^\nIn file included from ssl_private.h:90:0,\n                 from ssl_engine_init.c:29:\n/usr/local/openssl/openssl-1.1.0/include/openssl/ssl.h:618:6: note: expected 'struct SSL_SESSION * (*)(struct ssl_st *, const unsigned char *, int,  int *)' but argument is of type 'struct SSL_SESSION * (*)(struct SSL *, unsigned char *, int,  int *)'\n void SSL_CTX_sess_set_get_cb(SSL_CTX *ctx,\n      ^\nssl_engine_init.c: In function 'use_certificate_chain':\nssl_engine_init.c:861:5: warning: implicit declaration of function 'BIO_s_file_internal' [-Wimplicit-function-declaration]\n     if ((bio = BIO_new(BIO_s_file_internal())) == NULL)\n     ^\nssl_engine_init.c:861:5: warning: passing argument 1 of 'BIO_new' makes pointer from integer without a cast [enabled by default]\nIn file included from /usr/local/openssl/openssl-1.1.0/include/openssl/ssl.h:48:0,\n                 from ssl_private.h:90,\n                 from ssl_engine_init.c:29:\n/usr/local/openssl/openssl-1.1.0/include/openssl/bio.h:537:6: note: expected 'const struct BIO_METHOD *' but argument is of type 'int'\n BIO *BIO_new(const BIO_METHOD *type);\n      ^\nIn file included from ssl_private.h:33:0,\n                 from ssl_engine_init.c:29:\nssl_engine_init.c: In function 'ssl_init_server_certs':\nssl_engine_init.c:1203:42: error: dereferencing pointer to incomplete type\n                      BN_num_bits(dhparams->p), vhost_id, certfile);\n                                          ^\n/usr/local/src/httpd-2.4.23/include/http_log.h:367:65: note: in definition of macro 'ap_log_error__'\n              ap_log_error_(file, line, mi, level, status, sr__, __VA_ARGS__);    \\\n                                                                 ^\nssl_engine_init.c:1201:9: note: in expansion of macro 'ap_log_error'\n         ap_log_error(APLOG_MARK, APLOG_DEBUG, 0, s, APLOGNO(02540)\n         ^\nmake[4]: *** [ssl_engine_init.slo] Error 1\nmake[4]: Leaving directory `/usr/local/src/httpd-2.4.23/modules/ssl'\nmake[3]: *** [shared-build-recursive] Error 1\nmake[3]: Leaving directory `/usr/local/src/httpd-2.4.23/modules/ssl'\nmake[2]: *** [shared-build-recursive] Error 1\nmake[2]: Leaving directory `/usr/local/src/httpd-2.4.23/modules'\nmake[1]: *** [shared-build-recursive] Error 1\nmake[1]: Leaving directory `/usr/local/src/httpd-2.4.23'\n\n\n                    ############# ENDLOG ################", "id": 193610, "time": "2016-09-10T13:18:33Z", "creator": "b.hamichi@gmail.com", "creation_time": "2016-09-10T13:18:33Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 60111, "is_private": false, "text": "Tracked elsewhere, not yet supported. 60061\n\n*** This bug has been marked as a duplicate of bug 60061 ***", "id": 193611, "time": "2016-09-10T13:20:47Z", "creator": "covener@gmail.com", "creation_time": "2016-09-10T13:20:47Z", "attachment_id": null}]