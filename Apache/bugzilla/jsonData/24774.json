[{"count": 0, "text": "i'm having this problem:\n\n1. after x mins of inactivity, user session is invalidated\n(PersistentManagerBase.processExpires)\n2. StandardSession.expire does setValid(false) and expiring=true at the beginning\n3. then it calls StandardSession.removeAttribute -> SessionMonitor.valueUnbound\n-> StandardSession.getCreationTime\n4. StandardSession.getCreationTime throws exception because isValid==false\n5. this 'kills' PersistentManagerBase thread", "bug_id": 24774, "is_private": false, "id": 47525, "time": "2003-11-18T10:21:05Z", "creator": "martin.hajduch@assyst-intl.com", "creation_time": "2003-11-18T10:21:05Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "text": "Created attachment 9152\npropsed patch", "attachment_id": 9152, "id": 47526, "creator": "martin.hajduch@assyst-intl.com", "time": "2003-11-18T10:22:29Z", "bug_id": 24774, "creation_time": "2003-11-18T10:22:29Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 24774, "attachment_id": null, "is_private": false, "id": 47792, "time": "2003-11-21T17:06:30Z", "creator": "martin.hajduch@assyst-intl.com", "creation_time": "2003-11-21T17:06:30Z", "text": "some additional information:\n\nsorry, i have forgot to mention what this SessionMonitor is:\nthis is our custom object which implements HttpSessionBindingListener\nwhenever valueUnbound is called, it logs some informations about the session\n(times, etc ...)\nit also calls getCreationTime; however, when the session is expired,\ngetCreationTime throws an exception (on the contrary, getLastAccessedTime works\njust fine ...)\n\nthe reason why i'm posting this as a bug is the fact, that i believe, that\nability to call StandardSession.getCreationTime in HttpSessionBindingListener\n(also when session is being expired) is a reasonable thing to do\n\nplease, if you think that there is no valid reason why\nHttpSessionBindingListener should be able to call\nStandardSession.getCreationTime when the session is expiring, close this bug so\ni know that i have to handle this problem differently\n\nanother apporach would be to call valueUnbound in try-catch block; to prevent\nweb application from killing PersistentManagerBase thread"}, {"count": 3, "text": "The behaviour you describe is exactly as per the servlet 2.3 specification. I \nam afraid you need to find an alternative solution.", "bug_id": 24774, "is_private": false, "id": 59741, "time": "2004-06-22T22:29:08Z", "creator": "markt@apache.org", "creation_time": "2004-06-22T22:29:08Z", "tags": [], "attachment_id": null}, {"count": 4, "text": "my suggestion would be to handle such situation in\nPersistentManagerBase.processExpires; so that even if custom implementation of\nHttpSessionBindingListener.valueUnbound is doing a wrong thing, it does not\ncrash the whole PersistentManager\n\nin addition, i find it somehow inconsistent that getLastAccessedTime works, and\ngetCreationTime does not work in this case\n\ndo you see any reason for this ?", "bug_id": 24774, "attachment_id": null, "id": 59743, "time": "2004-06-22T22:50:33Z", "creator": "martin.hajduch@assyst-intl.com", "creation_time": "2004-06-22T22:50:33Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 24774, "attachment_id": null, "is_private": false, "id": 59803, "time": "2004-06-23T21:38:03Z", "creator": "markt@apache.org", "creation_time": "2004-06-23T21:38:03Z", "text": "PersistentManagerBase has already been patched (see Bug 23468).\n\nAs for the reasoning, I am afraid I can't shed any light on the reasoning."}]