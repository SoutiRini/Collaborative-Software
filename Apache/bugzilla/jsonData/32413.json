[{"count": 0, "tags": [], "bug_id": 32413, "attachment_id": null, "text": "If your JVM runs with a SecurityManager (common in production J2EE\nenvironments), you'll be prevented from doing various otherwise\nordinary things unless the Java security policy has been configured to\nlet you.  So, you see in log4j various places catching security\nexceptions and falling back to something reasonably graceful.  (There\nare comments in the source code about some ancient MS JRE version, but\nthe same thing applies to all modern JREs.)\n\nAll well and good.  If you want, for example, to be allowed to read\nthe value of Java property \"log4j.mumble\", you have to configure Java\npolicy to allow it.  What would be great would be:\n\n1.  Some documentation listing all the types of permissions you might\nneed to configure for various things.  There's the main body of log4j,\nbut there is also variable details for things like the bundled\nappenders (e.g., FileAppender needs permission to write to whatever\nfile is configured).\n\n2.  Besides catching security exceptions, these \"privileged\" actions\nshould be inside AccessController.doPrivileged() blocks.  If you don't\ndo that (and log4j doesn't in the couple placeds I looked), then you\nalso have to configure the same privileges for everything up the call\nstack.  doPrivileged is a way of reducing it to a need to just\nconfigure for log4j itself.\n\nIn case all of the above seems like gibberish, here are some useful\nhomework assignment links:\n\nDefault Policy Implementation and Policy File Syntax.  \n<http://java.sun.com/j2se/1.4.2/docs/guide/security/PolicyFiles.html>\n\nPermissions in the JavaTM 2 SDK.  \n<http://java.sun.com/j2se/1.4.2/docs/guide/security/permissions.html>\n\nAPI for Privileged Blocks.  \n<http://java.sun.com/j2se/1.4.2/docs/guide/security/doprivileged>", "id": 67505, "time": "2004-11-27T19:04:35Z", "creator": "bill-apache@carpenter.org", "creation_time": "2004-11-27T19:04:35Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "ceki@apache.org", "text": "Bill,\n\nWould you like to contribute patches so that log4j better handles\nSecurityManager generated exceptions?\n", "id": 67506, "time": "2004-11-27T19:15:15Z", "bug_id": 32413, "creation_time": "2004-11-27T19:15:15Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "bill-apache@carpenter.org", "text": "I wouldn't mind doing this.  Alas, in the short term (probably the next 6-12\nmonths), I don't have spare cycles for it.", "id": 67507, "time": "2004-11-27T19:29:42Z", "bug_id": 32413, "creation_time": "2004-11-27T19:29:42Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 32413, "attachment_id": null, "text": "\nI fully understand, myself being as busy as a squirrel in a nut house.\n\n", "id": 67509, "time": "2004-11-27T19:39:28Z", "creator": "ceki@apache.org", "creation_time": "2004-11-27T19:39:28Z", "is_private": false}]