[{"count": 0, "tags": [], "bug_id": 15250, "attachment_id": null, "id": 27625, "time": "2002-12-10T20:30:07Z", "creator": "gus.heck@olin.edu", "creation_time": "2002-12-10T20:30:07Z", "is_private": false, "text": "Either the build.xml isn't excluding something that should be excluded on my\nsystem (which has no sitraka software at all) or there is a problem in one of\nthe sitraka class files.\n\nfollowing a fresh checkout (preceeded by rm -rf jakarta-tomcat)\n and apparently successful compile, I got the following :\n\nTestcase:\ntestVector(org.apache.tools.ant.taskdefs.optional.sitraka.ClassFileTest):     FAILED\nvoid testOneLine() expected:<4> but was:<3>\njunit.framework.AssertionFailedError: void testOneLine() expected:<4> but was:<3>\n        at junit.framework.Assert.fail(Assert.java:47)\n        at junit.framework.Assert.failNotEquals(Assert.java:282)\n        at junit.framework.Assert.assertEquals(Assert.java:64)\n        at junit.framework.Assert.assertEquals(Assert.java:201)\n        at\norg.apache.tools.ant.taskdefs.optional.sitraka.ClassFileTest.assertHasMethod(ClassFileTest.java:100)\n        at\norg.apache.tools.ant.taskdefs.optional.sitraka.ClassFileTest.testVector(ClassFileTest.java:85)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at junit.framework.TestCase.runTest(TestCase.java:154)\n        at junit.framework.TestCase.runBare(TestCase.java:127)\n        at junit.framework.TestResult$1.protect(TestResult.java:106)\n        at junit.framework.TestResult.runProtected(TestResult.java:124)\n        at junit.framework.TestResult.run(TestResult.java:109)\n        at junit.framework.TestCase.run(TestCase.java:118)\n        at junit.framework.TestSuite.runTest(TestSuite.java:208)\n        at junit.framework.TestSuite.run(TestSuite.java:203)\n        at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:323)\n        at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTask.executeInVM(JUnitTask.java:809)\n        at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:552)\n        at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:528)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1331)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1275)\n        at org.apache.tools.ant.Main.runBuild(Main.java:614)\n        at org.apache.tools.ant.Main.start(Main.java:197)\n        at org.apache.tools.ant.Main.main(Main.java:235)\n\n\n\nBUILD FAILED"}, {"count": 1, "text": "which JDK is this?  I had to fix the testcase a couple of weeks ago as it\nreturned different results in 1.4 than in earlier versions (you have updated\nyour tests, don't you?).", "bug_id": 15250, "attachment_id": null, "id": 27734, "time": "2002-12-12T14:16:14Z", "creator": "bodewig@apache.org", "creation_time": "2002-12-12T14:16:14Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "gus.heck@olin.edu", "text": "java version \"1.4.0_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.0_01-b03)\nJava HotSpot(TM) Client VM (build 1.4.0_01-b03, mixed mode)\n\n-_-_-_-_-_\n\nEverything is 100% clean from the repository.\n\nI did it like this..\n\ncd projects\nrm -rf jakarta-ant\ncvs -d :pserver:anoncvs@cvs.apache.org:/home/cvspublic checkout jakarta-ant\ncd jakarta-ant\nbuild.sh\nbuild.sh test\n(error as reported resulted)\n\nThis was done about 10 minutes before I wrote this bug...\n\nDon't think it can get any more upto date than that :)", "id": 27758, "time": "2002-12-12T21:12:20Z", "bug_id": 15250, "creation_time": "2002-12-12T21:12:20Z", "is_private": false, "attachment_id": null}, {"count": 3, "text": "Don't you need to bootstrap.sh first??? --DD", "bug_id": 15250, "attachment_id": null, "id": 27759, "time": "2002-12-12T21:21:12Z", "creator": "ddevienne@lgc.com", "creation_time": "2002-12-12T21:21:12Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "gus.heck@olin.edu", "attachment_id": null, "id": 27763, "creation_time": "2002-12-12T21:39:17Z", "time": "2002-12-12T21:39:17Z", "bug_id": 15250, "text": "Nope don't need that. The build.sh discovers that things havn't been\nbootstrapped and runs a bootstrap before running the main build. \n\nAnother useful thing is that the build.sh script seems to decide if ant has been\nbootstraped by the existance of bootstrap/bin/ant. So if I need to be sure that\nsomething built in the bootstrap gets recompiled I just blow away\nbootstrap/bin/ant and it re-bootstraps automatically. I am not sure this is\nguaranteed to get everything, but so far it has worked.", "is_private": false}, {"count": 5, "text": "OK, works for me after a fresh bootstrap\n\nrun-single-test-only:\nTestsuite: org.apache.tools.ant.taskdefs.optional.sitraka.ClassFileTest\nTests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.157 sec\n\nMy JDK is a little more recent\njava version \"1.4.1\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.1-b21)\nJava HotSpot(TM) Client VM (build 1.4.1-b21, mixed mode)\n\nCould you test again, and if it fails again, please run with -debug and attach\ndebug output. Thanks", "bug_id": 15250, "attachment_id": null, "id": 30473, "time": "2003-02-01T15:06:17Z", "creator": "conor@apache.org", "creation_time": "2003-02-01T15:06:17Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "creator": "gus.heck@olin.edu", "attachment_id": null, "text": "Sorry still fails on my machine. Tried it as single test case, full test run and\nusing ./bootstrap.sh explicitly rather than just ./build.sh. they all fail.\nCould be a Java version issue, but is it a bug in java 1.4.0_01 or a\nnon-compatability in ant? Attaching output of:\n\n./build.sh run-single-test-only\n-Dtestcase=\"org.apache.tools.ant.taskdefs.optional.sitraka.ClassFileTest\" -debug\n\nThe java version is still:\n \njava version \"1.4.0_01\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.0_01-b03)\nJava HotSpot(TM) Client VM (build 1.4.0_01-b03, mixed mode)\n", "id": 30574, "time": "2003-02-03T16:41:07Z", "bug_id": 15250, "creation_time": "2003-02-03T16:41:07Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 15250, "attachment_id": 4696, "is_private": false, "id": 30575, "time": "2003-02-03T16:42:25Z", "creator": "gus.heck@olin.edu", "creation_time": "2003-02-03T16:42:25Z", "text": "Created attachment 4696\n-debug output of single test run."}, {"count": 8, "tags": [], "bug_id": 15250, "is_private": false, "id": 30641, "attachment_id": null, "creator": "conor@apache.org", "creation_time": "2003-02-04T13:21:35Z", "time": "2003-02-04T13:21:35Z", "text": "OK, seems to be JDK version related \n1.4.0 and 1.4.0_03 fail\n1.4.1 and 1.4.1_01 pass\n\nI'll look into it.\n\n\n"}, {"count": 9, "tags": [], "bug_id": 15250, "attachment_id": null, "id": 30647, "time": "2003-02-04T13:57:29Z", "creator": "conor@apache.org", "creation_time": "2003-02-04T13:57:29Z", "is_private": false, "text": "OK, I've fixed it - can you try it out. The fix just tests that the number of\nlines of code is more than the given value (now effectively a minimum bound). In\nreality, the test and the associated code in MethodInfo are slightly dubious It\nattempts to determine the number of lines of code by the size of the line number\ntable.\n"}, {"count": 10, "text": "Yup works for me now ;) ", "bug_id": 15250, "is_private": false, "id": 30671, "time": "2003-02-04T17:48:52Z", "creator": "gus.heck@olin.edu", "creation_time": "2003-02-04T17:48:52Z", "tags": [], "attachment_id": null}]