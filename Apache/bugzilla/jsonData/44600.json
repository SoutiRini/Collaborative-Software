[{"count": 0, "tags": [], "creator": "matthewlmcclure+asf@gmail.com", "is_private": false, "id": 114607, "creation_time": "2008-03-13T14:30:51Z", "time": "2008-03-13T14:30:51Z", "bug_id": 44600, "text": "Created attachment 21665\nUses System.nanoTime() to achieve 1-ms resolution\n\nThe timer, as implemented using System.currentTimeMillis() in JMeter 2.3.1's SampleResult class, provides approximately 10-ms resolution on Windows.\n\nI'd like to see 1-ms resolution.", "attachment_id": 21665}, {"count": 1, "tags": [], "bug_id": 44600, "attachment_id": null, "id": 114608, "time": "2008-03-13T14:50:11Z", "creator": "sebb@apache.org", "creation_time": "2008-03-13T14:50:11Z", "is_private": false, "text": "Thanks for the patch.\n\nHowever, there are some problems with it:\n\n2 public createTestSample() methods are deleted by the patch.\n\nAccess to the static fields reference...Clock needs to be synchronized - or the fields need to be final.\n\nAlso, the code requires Java 1.5; JMeter is currently targeted at 1.4, but this may change.\n"}, {"count": 2, "tags": [], "creator": "matthewlmcclure+asf@gmail.com", "is_private": false, "id": 114610, "creation_time": "2008-03-13T14:57:09Z", "time": "2008-03-13T14:57:09Z", "bug_id": 44600, "text": "(In reply to comment #1)\n> 2 public createTestSample() methods are deleted by the patch.\n\nI removed them because I didn't find any callers, but I'll put them back since you prefer it.\n\n> Access to the static fields reference...Clock needs to be synchronized - or the\n> fields need to be final.\n\nWhich would you prefer?\n\n> Also, the code requires Java 1.5; JMeter is currently targeted at 1.4, but this\n> may change.\n\nWould you prefer a patch that's conditional on the JVM version?", "attachment_id": null}, {"count": 3, "tags": [], "creator": "sebb@apache.org", "is_private": false, "id": 114613, "creation_time": "2008-03-13T15:22:22Z", "time": "2008-03-13T15:22:22Z", "bug_id": 44600, "text": "(In reply to comment #2)\n> (In reply to comment #1)\n> > 2 public createTestSample() methods are deleted by the patch.\n> \n> I removed them because I didn't find any callers, but I'll put them back since\n> you prefer it.\n\nMethods cannot be arbitrarily removed.\n\n> > Access to the static fields reference...Clock needs to be synchronized - or the\n> > fields need to be final.\n> \n> Which would you prefer?\n> \n\nFinal is safer and likely cheaper.\n\n> > Also, the code requires Java 1.5; JMeter is currently targeted at 1.4, but this\n> > may change.\n> \n> Would you prefer a patch that's conditional on the JVM version?\n> \n\nDepends how convoluted it becomes.\n", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 44600, "attachment_id": 21672, "id": 114654, "time": "2008-03-15T10:22:41Z", "creator": "matthewlmcclure+asf@gmail.com", "creation_time": "2008-03-15T10:22:41Z", "is_private": false, "text": "Created attachment 21672\nUpdated patch\n\nI think this new patch addresses your concerns."}, {"count": 5, "tags": [], "text": "Thanks, the new patch should allow the code to run on Java 1.4 or 1.5.\n\nHowever, it requires Java 1.5 to build.\nIt would be better if the code also compiled on 1.4.", "attachment_id": null, "id": 114665, "creator": "sebb@apache.org", "time": "2008-03-16T14:28:57Z", "bug_id": 44600, "creation_time": "2008-03-16T14:28:57Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 44600, "attachment_id": null, "id": 114858, "time": "2008-03-22T07:01:27Z", "creator": "matthewlmcclure+asf@gmail.com", "creation_time": "2008-03-22T07:01:27Z", "is_private": false, "text": "(In reply to comment #5)\n> It would be better if the code also compiled on 1.4.\n\nI took another step in that direction, but it got ugly quickly.  I'm open to suggestions if you have a clean-ish way to do a conditional compile.\n\nMy first attempt used Ant to copy a 1.4- or 1.5-compatible implementation to the source directory before the javac task."}, {"count": 7, "tags": [], "bug_id": 44600, "attachment_id": null, "is_private": false, "id": 114859, "time": "2008-03-22T07:23:46Z", "creator": "sebb@apache.org", "creation_time": "2008-03-22T07:23:46Z", "text": "Yes, it's not easy to do.\n\nThe code needs to compile on 1.4 and run on 1.4+.\n\nI think the only way to do it is to use reflection to see if the method exists, and use it if so; if not, then revert to the default."}, {"count": 8, "tags": [], "bug_id": 44600, "attachment_id": 21702, "is_private": false, "id": 114895, "time": "2008-03-23T06:12:49Z", "creator": "matthewlmcclure+asf@gmail.com", "creation_time": "2008-03-23T06:12:49Z", "text": "Created attachment 21702\nPatch using reflection\n\n(In reply to comment #7)\n> The code needs to compile on 1.4 and run on 1.4+.\n> \n> I think the only way to do it is to use reflection to see if the method exists,\n> and use it if so; if not, then revert to the default.\n\nTry this new patch using reflection."}, {"count": 9, "tags": [], "bug_id": 44600, "attachment_id": null, "is_private": false, "id": 115085, "time": "2008-03-28T18:11:47Z", "creator": "sebb@apache.org", "creation_time": "2008-03-28T18:11:47Z", "text": "Thanks a lot.\n\nThe reflection patch looks fine; committed to SVN in r642469."}, {"count": 10, "tags": [], "text": "(In reply to comment #9)\n> Thanks a lot.\n\nYou're welcome.  Thanks for accepting it.", "is_private": false, "id": 115092, "creator": "matthewlmcclure+asf@gmail.com", "time": "2008-03-29T07:51:15Z", "bug_id": 44600, "creation_time": "2008-03-29T07:51:15Z", "attachment_id": null}]