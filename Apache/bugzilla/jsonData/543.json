[{"count": 0, "tags": [], "bug_id": 543, "text": "Using: ant 1.3 beta 1, junit 3.5, jdk 1.3\n\nSummary: forked junit task throws a NullPointerException for a simple test\nif you don't specify a classpath element. At the same time forked java task\nusing junit.textui.TestRunner works fine.\n\nbuild.xml:\n========================================\n<project name=\"HelloTest\" default=\"test\" basedir=\".\" >\n\n    <property name=\"src.dir\" value=\"src\" />\n    <property name=\"out.dir\" value=\"out\" />\n    <property name=\"test.name\" value=\"HelloTest\" />\n\n    <target name=\"prepare\" >\n        <mkdir dir=\"${out.dir}\" />\n    </target>\n\n    <target name=\"compile\" depends=\"prepare\" >\n        <javac srcdir=\"${src.dir}\"\n               destdir=\"${out.dir}\"\n        />\n    </target>\n\n    <target name=\"test\" depends=\"compile\" >\n        <java classname=\"junit.textui.TestRunner\"\n              fork=\"true\"\n              dir=\"${out.dir}\" >\n              <arg line=\"${test.name}\" />\n        </java>\n        <junit fork=\"true\"\n               dir=\"${out.dir}\">\n               <test name=\"${test.name}\" />\n        </junit>\n    </target>\n\n</project>\n========================================\n\nsrc/HelloTest.java:\n========================================\nimport junit.framework.TestCase;\n\npublic class HelloTest extends TestCase {\n\n    public HelloTest(String name) {\n        super(name);\n    }\n\n    public void test()  {\n    }\n\n}\n========================================\n\noutput:\n========================================\ntest:\n     [java] .\n     [java] Time: 0\n     [java]\n     [java] OK (1 tests)\n     [java]\n\nBUILD FAILED\n\njava.lang.NullPointerException\n        at org.apache.tools.ant.types.CommandlineJava.clone\n(CommandlineJava.java:242)\n        at org.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute\n(JUnitTask.java:272)\n        at org.apache.tools.ant.Target.execute(Target.java:153)\n        at org.apache.tools.ant.Project.runTarget(Project.java:898)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:536)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:510)\n        at org.apache.tools.ant.Main.runBuild(Main.java:421)\n        at org.apache.tools.ant.Main.main(Main.java:149)\n========================================", "id": 605, "time": "2001-02-07T10:34:30Z", "creator": "timurz@playlink.com", "creation_time": "2001-02-07T10:34:30Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "nico@apache.org", "attachment_id": null, "id": 608, "time": "2001-02-07T16:59:12Z", "bug_id": 543, "creation_time": "2001-02-07T16:59:12Z", "is_private": false, "text": "Now the commandline is cloned only if there is one specified.\n\nPatch submitted by Stephane Bailliez."}, {"count": 2, "tags": [], "bug_id": 543, "attachment_id": null, "text": "this is closed", "id": 36648, "time": "2003-05-05T07:19:14Z", "creator": "selva_prasad@naturesoft.net", "creation_time": "2003-05-05T07:19:14Z", "is_private": false}]