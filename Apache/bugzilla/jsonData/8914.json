[{"count": 0, "tags": [], "bug_id": 8914, "is_private": false, "text": "After unpacking and configuring apache (./configure --disbale-threads), the\n\"make\" fails with:\n\n\nmake[4]: Entering directory\n`/usr/local/src/apache2/httpd-2.0.36/srclib/apr/network_io/unix'\n/bin/ksh /usr/local/src/apache2/httpd-2.0.36/srclib/apr/libtool --silent\n--mode=compile cc -g   -DHAVE_CONFIG_H -DOSF1   -I../../include\n-I../../include/arch/unix -I../../include/arch/unix  -c sockopt.c && touch\nsockopt.lo\ncc: Error: sockopt.c, line 314: In this declaration, \"af\" has no linkage and is\nof an incomplete type. (incompnolink)\n    struct accept_filter_arg af;\n-----------------------------^\ncc: Error: sockopt.c, line 318: In this statement, \"SO_ACCEPTFILTER\" is not\ndeclared. (undeclared)\n    if ((setsockopt(sock->socketdes, SOL_SOCKET, SO_ACCEPTFILTER,\n-------------------------------------------------^\nmake[4]: *** [sockopt.lo] Error 1\nmake[4]: Leaving directory\n`/usr/local/src/apache2/httpd-2.0.36/srclib/apr/network_io/unix'\nmake[3]: *** [all-recursive] Error 1\nmake[3]: Leaving directory\n`/usr/local/src/apache2/httpd-2.0.36/srclib/apr/network_io/unix'\nmake[2]: *** [all-recursive] Error 1\nmake[2]: Leaving directory `/usr/local/src/apache2/httpd-2.0.36/srclib/apr'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/usr/local/src/apache2/httpd-2.0.36/srclib'\nmake: *** [all-recursive] Error 1\n\n\nI am using Compaq's cc [Compaq C V6.1-123 on Digital UNIX 4.0G (Rev. 1530)]\n\nPlease note that this does not occur (the make succeeds) on tru64unix v5.1A\n[Compaq C V6.4-014 on Compaq Tru64 UNIX V5.1A (Rev. 1885)].", "id": 15729, "time": "2002-05-08T18:28:13Z", "creator": "mcaplin@miami.edu", "creation_time": "2002-05-08T18:28:13Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 8914, "is_private": false, "text": "*** Bug 9899 has been marked as a duplicate of this bug. ***", "id": 20063, "time": "2002-07-23T17:01:02Z", "creator": "rbb@apache.org", "creation_time": "2002-07-23T17:01:02Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "The problem is that autoconf is incorrectly determining that Tru64 has support\nfor SO_ACCEPTFILTER.  From my initial reading of the autoconf macro, I don't see\nwhy that is happening, because SO_ACCEPTFILTER doesn't exist in sys/socket.h. \nHowever, as a quick work-around, just edit srclib/apr/include/apr.h, and set\nAPR_HAVE_SO_ACCEPTFILTER to 0.", "attachment_id": null, "id": 20064, "creator": "rbb@apache.org", "time": "2002-07-23T17:21:10Z", "bug_id": 8914, "creation_time": "2002-07-23T17:21:10Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 8914, "is_private": false, "count": 3, "id": 20065, "time": "2002-07-23T17:46:55Z", "creator": "mcaplin@miami.edu", "creation_time": "2002-07-23T17:46:55Z", "text": "Using httpd-2.0.39 now (originally reported with 2.0.36):\n\nThanks, that work around allows me to get through srclib/apr/network_io but I\nget hung-up again in srclib/apr/threadproc/unix with:\n\nMaking all in threadproc/unix\n/bin/ksh /usr/local/src/apache/httpd-2.0.39/srclib/apr/libtool --silent\n--mode=compile cc -g   -DHAVE_CONFIG_H -DOSF1   -I../../include\n-I../../include/arch/unix  -c signals.c && touch signals.lo\ncc: Error: signals.c, line 177: Invalid expression. (badexpr)\n    store_desc(0, \"Signal 0\");\n----^\ncc: Error: signals.c, line 177: Invalid statement. (badstmt)\n    store_desc(0, \"Signal 0\");\n----^\ncc: Error: signals.c, line 180: Invalid expression. (badexpr)\n    store_desc(SIGHUP, \"Hangup\");\n----^\ncc: Error: signals.c, line 180: Invalid statement. (badstmt)\n    store_desc(SIGHUP, \"Hangup\");\n----^\ncc: Error: signals.c, line 183: Invalid expression. (badexpr)\n    store_desc(SIGINT, \"Interrupt\");\n----^\ncc: Error: signals.c, line 183: Invalid statement. (badstmt)\n    store_desc(SIGINT, \"Interrupt\");\n----^\ncc: Error: signals.c, line 186: Invalid expression. (badexpr)\n    store_desc(SIGQUIT, \"Quit\");\n----^\ncc: Error: signals.c, line 186: Invalid statement. (badstmt)\n    store_desc(SIGQUIT, \"Quit\");\n----^\ncc: Error: signals.c, line 189: Invalid expression. (badexpr)\n    store_desc(SIGILL, \"Illegal instruction\");\n----^\ncc: Error: signals.c, line 189: Invalid statement. (badstmt)\n    store_desc(SIGILL, \"Illegal instruction\");\n----^\ncc: Error: signals.c, line 192: Invalid expression. (badexpr)\n    store_desc(SIGTRAP, \"Trace/BPT trap\");\n----^\ncc: Error: signals.c, line 192: Invalid statement. (badstmt)\n    store_desc(SIGTRAP, \"Trace/BPT trap\");\n----^\ncc: Error: signals.c, line 195: Invalid expression. (badexpr)\n    store_desc(SIGIOT, \"IOT instruction\");\n----^\ncc: Error: signals.c, line 195: Invalid statement. (badstmt)\n    store_desc(SIGIOT, \"IOT instruction\");\n----^\ncc: Error: signals.c, line 198: Invalid expression. (badexpr)\n    store_desc(SIGABRT, \"Abort\");\n----^\ncc: Error: signals.c, line 198: Invalid statement. (badstmt)\n    store_desc(SIGABRT, \"Abort\");\n----^\ncc: Error: signals.c, line 201: Invalid expression. (badexpr)\n    store_desc(SIGEMT, \"Emulator trap\");\n----^\ncc: Error: signals.c, line 201: Invalid statement. (badstmt)\n    store_desc(SIGEMT, \"Emulator trap\");\n----^\ncc: Error: signals.c, line 204: Invalid expression. (badexpr)\n    store_desc(SIGFPE, \"Arithmetic exception\");\n----^\ncc: Error: signals.c, line 204: Invalid statement. (badstmt)\n    store_desc(SIGFPE, \"Arithmetic exception\");\n----^\ncc: Error: signals.c, line 207: Invalid expression. (badexpr)\n    store_desc(SIGKILL, \"Killed\");\n----^\ncc: Error: signals.c, line 207: Invalid statement. (badstmt)\n    store_desc(SIGKILL, \"Killed\");\n----^\ncc: Error: signals.c, line 210: Invalid expression. (badexpr)\n    store_desc(SIGBUS, \"Bus error\");\n----^\ncc: Error: signals.c, line 210: Invalid statement. (badstmt)\n    store_desc(SIGBUS, \"Bus error\");\n----^\ncc: Error: signals.c, line 213: Invalid expression. (badexpr)\n    store_desc(SIGSEGV, \"Segmentation fault\");\n----^\ncc: Error: signals.c, line 213: Invalid statement. (badstmt)\n    store_desc(SIGSEGV, \"Segmentation fault\");\n----^\ncc: Error: signals.c, line 216: Invalid expression. (badexpr)\n    store_desc(SIGSYS, \"Bad system call\");\n----^\ncc: Error: signals.c, line 216: Invalid statement. (badstmt)\n    store_desc(SIGSYS, \"Bad system call\");\n----^\ncc: Error: signals.c, line 219: Invalid expression. (badexpr)\n    store_desc(SIGPIPE, \"Broken pipe\");\n----^\ncc: Error: signals.c, line 219: Invalid statement. (badstmt)\n    store_desc(SIGPIPE, \"Broken pipe\");\n----^\ncc: Error: signals.c, line 222: Invalid expression. (badexpr)\n    store_desc(SIGALRM, \"Alarm clock\");\n----^\ncc: Severe: More than 30 errors were encountered in the course of compilation.\n(toomanyerr)\n*** Exit 1\nStop.\n*** Exit 1\nStop.\n*** Exit 1\nStop.\n*** Exit 1\nStop.\n*** Exit 1\nStop."}, {"count": 4, "tags": [], "bug_id": 8914, "attachment_id": null, "is_private": false, "id": 20066, "time": "2002-07-23T17:50:11Z", "creator": "rbb@apache.org", "creation_time": "2002-07-23T17:50:11Z", "text": "I commited the fix for the signals.c problem earlier today.  Just update that\none file to HEAD.  The patch can also be obtained at:\n\nhttp://cvs.apache.org/viewcvs.cgi/apr/threadproc/unix/signals.c.diff?r1=1.48&r2=1.49"}, {"count": 5, "tags": [], "bug_id": 8914, "is_private": false, "text": "Sorry for the delayed response.  Apache compiled with the changes to signals.c.\n Thanks for your help.", "id": 20852, "time": "2002-08-09T15:54:30Z", "creator": "mcaplin@miami.edu", "creation_time": "2002-08-09T15:54:30Z", "attachment_id": null}]