[{"count": 0, "tags": [], "text": "I am developing a web application using tomcat server.\nDatabase is MySQL.  I use connection pool for databse access.\n\nThe problem here is I am taking read only connection at some occassions but \nafter closing (releasing) it and if i take another connection is is also read \nonly.\n\n\nConnection readOnlyCon =  DB.getConnection();\nreadOnlyCon .setReadonly(true)\n................................\nreadOnlyCon.close();\n\n\nConnection Con =  DB.getConnection();\nHere this connection some times returns readOnly connection. Otherwise we need \nto explicitly set this as readOnly(false);\n\n\nIs this is a problem of Java  or Tomcat ?", "attachment_id": null, "id": 94920, "creator": "jjebin@rediffmail.com", "time": "2006-10-17T23:19:40Z", "bug_id": 40782, "creation_time": "2006-10-17T23:19:40Z", "is_private": false}, {"count": 1, "tags": [], "creator": "shankarunni@netscape.net", "attachment_id": null, "text": "(In reply to comment #0)\n\n> Is this is a problem of Java  or Tomcat ?\n\nNeither - I would say it's a DBCP problem. However, Tomcat distributes its own\nrefactored version of DBCP, so perhaps someone here needs to check this out?\n\nA self-contained test case would be useful..", "id": 94951, "time": "2006-10-18T15:59:56Z", "bug_id": 40782, "creation_time": "2006-10-18T15:59:56Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 40782, "text": "This is expected behaviour IMHO. You are changing the connection from the\ndefault state and then returning it to the pool without reverting your\nmodifictions.  This violates the principle of least surprise.\n\nDBCP does not alter read-only status of a connection when it is returned to the\npool.  If you set a conn to R/O and then return it to the pool (conn.close())\nwithout doing conn.setReadOnly(false) it will retain it's R/O status. The next\nconsumer of that connection will get it with R/O set.", "id": 95017, "time": "2006-10-20T11:45:59Z", "creator": "chris@sourcelabs.com", "creation_time": "2006-10-20T11:45:59Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "Is this was to be fixed, and it is debateable whether it is an issue or not then\nit would need to be fixed in DBCP. Regardless, this is not a Tomcat issue.", "attachment_id": null, "id": 95026, "creation_time": "2006-10-20T15:40:14Z", "time": "2006-10-20T15:40:14Z", "creator": "markt@apache.org", "bug_id": 40782, "is_private": false}]