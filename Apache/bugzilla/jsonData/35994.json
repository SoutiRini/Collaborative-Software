[{"count": 0, "attachment_id": null, "bug_id": 35994, "is_private": false, "id": 78006, "time": "2005-08-03T15:18:36Z", "creator": "kzembowe@jhuccp.org", "creation_time": "2005-08-03T15:18:36Z", "tags": [], "text": "Sorry to use the bug tracking system for something that may not be a bug.\n\nI just noticed a difference when I upgraded from the apache in Debian woody to \nsarge (1.3.33). I use a simple script to move the Apache log files to a new \nname and then gracefully restart the server, per the documentation. The newly \ncreated files used to be created with permissions -rw-r--r-- (644). Now, \nthey're created -rw-r----- (640). I'd like to go back to -rw-r--r--, but can't \nfind where the default permissions are set for newly created log file. The \npermissions for the log file directory are drwxr-xr-x. There's no .profile for \nthe Apache user, and the /etc/profile contains 'umask 002'. The log files are \ncreated by the root user, who has a 'umask 022' in /root/.bashrc and none \nin /root/.profile.\n\nI couldn't find any answers to this one the Apache documentation site, or in \nthe archives of the apache user's list. I asked this question on the user's \nlist, but it was not answered. Please forgive me if I overlooked something and \npoint it out to me.\n\nWas it deliberate to change the log file permissions from 644 to 640? Can \nanyone tell me how to set Apache so that newly created log files are '-rw-r--r--\n'? Thanks for your help and advice."}, {"count": 1, "tags": [], "text": "The apachectl script is a good place to look and/or set the umask (though I\ndon't know if it's used in debian :-). httpd itself just takes the inherited one.", "is_private": false, "id": 78015, "creator": "nd@perlig.de", "time": "2005-08-03T16:30:59Z", "bug_id": 35994, "creation_time": "2005-08-03T16:30:59Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 35994, "text": "Andr\u00e9, thank you for your comment. However, I don't see how the apachectl \nscript could be used. apachectl is used in Debian, and I use it extensively \nmyself. However, there are no checks for log files in apachectl, and no control \nover their permissions. The 'httpd' server is just started, and something in \nhttpd checks to see if the log file is present and if not, creates it with the \ngiven permissions. This is what I'm trying to change.\n\nThanks again for your suggestion.\n\n-Kevin\n", "id": 78016, "time": "2005-08-03T16:59:17Z", "creator": "kzembowe@jhuccp.org", "creation_time": "2005-08-03T16:59:17Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 35994, "text": "Log files are created with permissions of \"0666\" & ~umask.  So just ensure that\nhttpd is started with \"umask 022\" (e.g. by modifying apachectl or the envvars\nscript) if you want file permissions to be 0644 by default.  Nothing in httpd\nchanged here, more likely Debian changed something so ask on a Debian list.", "id": 78144, "time": "2005-08-05T14:03:07Z", "creator": "jorton@redhat.com", "creation_time": "2005-08-05T14:03:07Z", "tags": [], "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 35994, "is_private": false, "id": 79204, "time": "2005-08-30T23:02:24Z", "creator": "kzembowe@jhuccp.org", "creation_time": "2005-08-30T23:02:24Z", "tags": [], "text": "I'm sorry to be so helpless, but I've tried adding 'umask 022' to both \nthe /etc/apache2/envvars and /usr/sbin/apache2ctl files, with no result. The \npermissions on the log files I can't find any information on the format of \ncommands in envvars, although it looks like apache2ctl just executes it.\n\nCould someone please assist me with entering the umask command in either of \nthese scripts so that the log files are readable by all by default.\n\nThanks very much for your help.\n\n-Kevin\n\n"}, {"count": 5, "tags": [], "bug_id": 35994, "attachment_id": null, "is_private": false, "id": 79205, "time": "2005-08-30T23:13:43Z", "creator": "wrowe@apache.org", "creation_time": "2005-08-30T23:13:43Z", "text": "\n  This is NOT a user support forum.  Consult the users@httpd.apache.org list\n  (you can send a blank email to users-subscribe@httpd.apache.org to join)\n  for user support.\n\n  Do NOT reopen this bug to obtain support.\n"}]