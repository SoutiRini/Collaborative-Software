[{"count": 0, "tags": [], "creator": "jboynes@apache.org", "text": "Eliminate one comparison when evaluating body content as the content of \"value\" attribute can always be used when it has been specified.\n\nJasper's implementation of BodyContent#getString() constructs a new value each time so only call it once to avoid an unnecessary object creation.", "id": 138117, "time": "2010-07-03T13:26:05Z", "bug_id": 49547, "creation_time": "2010-07-03T13:26:05Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 49547, "text": "Created attachment 25692\npatch to remove one check and a unneeded call to BodyContent#getString", "id": 138118, "time": "2010-07-03T13:27:20Z", "creator": "jboynes@apache.org", "creation_time": "2010-07-03T13:27:20Z", "is_private": false, "attachment_id": 25692}, {"count": 2, "tags": [], "bug_id": 49547, "text": "There's a functionality change here:\n\nIf valueSpecified is false, yet there is a value, it used to return value. Now it returns bodyContent based results. \n\nI don't see this being in the spec, so presumably this is bad design that we're stuck with supporting; a protected status variable in addition to the main one, rather than a 'isValueSpecified()' method. \n\nThoughts?", "id": 138120, "time": "2010-07-03T14:13:05Z", "creator": "bayard@apache.org", "creation_time": "2010-07-03T14:13:05Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "jboynes@apache.org", "text": "value and valueSpecified are both protected variables and part of our implementation rather than the spec. The container will just call setValue(Object) to set the attribute's value and both our subclasses set both variables in their implementation.\n\nMy thought was that the contract this has with its subclasses is that both must be set and if that is met the change works. The original tests I added weren't doing that which was why it was OK to change them.", "id": 138121, "time": "2010-07-03T14:53:00Z", "bug_id": 49547, "creation_time": "2010-07-03T14:53:00Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 49547, "attachment_id": null, "text": "Agreed that the contract would be that both must be set. \n\nI've added javadoc that the two attributes must be in sync as a part of this commit:\n\nsvn ci -m \"Improving the performance of SetSupport by only calling bodyContent.getString() once per Jeremy's patch #49547\"Sending        impl/src/main/java/org/apache/taglibs/standard/tag/common/core/SetSupport.java\nSending        impl/src/test/java/org/apache/taglibs/standard/tag/common/core/TestSetSupport.java\nTransmitting file data ..\nCommitted revision 960259.", "id": 138123, "time": "2010-07-03T15:35:24Z", "creator": "bayard@apache.org", "creation_time": "2010-07-03T15:35:24Z", "is_private": false}]