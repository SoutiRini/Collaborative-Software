[{"count": 0, "tags": [], "bug_id": 48031, "text": "Hi,\n\nI'm not pretty sure that it's really a bug or a documentation mis understanding, but as have found nothing on google or here, I'm opening a bug report. \n\nWe'd like to protect a vhost with password, with authentification against SQL server database. After many work (many problem with an ODBC bug) it's now working perfectly : the users can identify themserlve to enter the site. But, for each elements in pages, the server is asking an authentification. Users do not see it, but yopu can easily imagine the load on database. \n\n\nWe have tryed to use AuthDigestDomain without success.\n\nHere is our configuration (many auth params are here for test purpose, as we do not find any solution) :\n\n<VirtualHost  xxx.xxx.xxx.xxx:80>\n\n\tServerName APACHEMEMBERS:80\n\tServerAlias apachemembers.abc.def\n\tServerAdmin webmaster@xxxx\n\tDocumentRoot d:/www/msc\n\tDirectoryIndex index.htm index.html\n\tScriptAlias /cgi-bin/ d:/www/msc/cgi-bin/\n\n\tErrorLog D:/Apache_logs/error_logs/members-e.log\n\tCustomLog D:/Apache_logs/%Y%m%d-members-a.log combined\n\n\t<Directory d:/www/msc>\n\t\tOptions -Indexes +FollowSymlinks\n\n\t\tAuthName \"apacheprivate\"\n\t\tAuthType Digest\n\t\tAuthDigestProvider dbd\n\n\t\tAuthDigestNcCheck Off\n\t\tAuthDigestDomain / /apachemembers/ http://apachemembers/ http://apachemembers.abc.def/\n\n\t\tBrowserMatch \"MSIE\" AuthDigestEnableQueryStringHack=On \n\t\t\n\t\tAuthDigestQop auth\n\t\tAuthDigestAlgorithm MD5\n\t\tAuthDigestNonceLifetime -1\n\t\tAuthDigestNcCheck off\t\t\n\n\t\tRequire valid-user\n\n\t\tAuthDBDUserRealmQuery \"EXEC xxxx.dbo.Getyyyy @UserName = %s, @ApplicationName = 'Web', @RightShortDescription = 'CanBrowseMembers', @Realm = 'apacheprivate'\"\n\n\t</Directory>\n\n</VirtualHost>\n\n\nAnyone that can turn on the light for me is welcome...", "id": 131257, "time": "2009-10-21T01:31:11Z", "creator": "psiek@mscgva.ch", "creation_time": "2009-10-21T01:31:11Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 48031, "attachment_id": null, "id": 131259, "time": "2009-10-21T02:00:08Z", "creator": "psiek@mscgva.ch", "creation_time": "2009-10-21T02:00:08Z", "is_private": false, "text": "This is version 2.2.13 in fact"}, {"count": 2, "tags": [], "bug_id": 48031, "text": "I also have this problem, in Apache 2.2.3 in RHEL 5.  I have\n\n<VirtualHost *>\n  ServerName  dev.epa-echo.gov\n  ServerAlias dev.epa-otis.gov\n  <Location />\n    AuthType Digest\n    AuthName \"OTIS-ECHO development\"\n    AuthDigestDomain http://dev.epa-echo.gov http://dev.epa-otis.gov\n    AuthUserFile /xxx/xxx/xxx\n    Require valid-user\n  </Location>\n</VirtualHost>\n\nThe intent is that once the user logs in to either dev.epa-echo.gov or dev.epa-otis.gov, they shouldn't have to give their password again for the other host.  But it just doesn't work.  No matter how I tweak it or which browser I use, the user is always prompted again for a password when they visit the other host.", "id": 137688, "time": "2010-06-16T14:26:12Z", "creator": "apache.org-andrex@snkmail.com", "creation_time": "2010-06-16T14:26:12Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "text": "Andrew, is the browser sending the Authorization header in the request to the \"second\" server, once authenticated to the first?  I'm not sure any of the big browsers actually pay attention to the domain= parameter.", "id": 137689, "time": "2010-06-16T15:17:13Z", "bug_id": 48031, "creation_time": "2010-06-16T15:17:13Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 48031, "text": "(In reply to comment #2)\n> I also have this problem, in Apache 2.2.3 in RHEL 5.  I have\n\nThis is not at all the same issue, and is almost certainly not a bug.\n\nThe OP, by contrast, is a real issue: we should have a facility to run a short-term cache of authn credentials in memory to reduce traffic to a backend provider.  I thought we had one, but it seems I may have been imagining it.\n\nHmmm ... google finds a mod_authn_cache at sourceforge, though I expect it's in need of updating.", "id": 137693, "time": "2010-06-16T17:30:52Z", "creator": "nick@webthing.com", "creation_time": "2010-06-16T17:30:52Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "nick@webthing.com", "attachment_id": null, "text": "mod_authn_socache in trunk fixes the problem of database load for future releases.\n\nUsers of 2.2 may wish to check this: http://marc.info/?t=127672747400003&r=1&w=2", "id": 138143, "time": "2010-07-04T22:17:50Z", "bug_id": 48031, "creation_time": "2010-07-04T22:17:50Z", "is_private": false}]