[{"count": 0, "tags": [], "bug_id": 61723, "attachment_id": null, "is_private": false, "id": 201914, "time": "2017-11-04T23:35:28Z", "creator": "tmoreira2020@gmail.com", "creation_time": "2017-11-04T23:35:28Z", "text": "Hi there, \n\nI'm facing the following exception on versions newer than 7.0.73, for instance 7.0.75 to 7.0.82.\n\nnov 04, 2017 11:31:01 PM org.apache.catalina.core.ApplicationDispatcher invoke\nGRAVE: Servlet.service() for servlet jsp threw exception\norg.apache.jasper.JasperException: Unable to compile class for JSP:\n\nAn error occurred at line: [427] in the generated java file: [/opt/liferay/tomcat/work/Catalina/localhost/_/org/apache/jsp/html/common/themes/portlet_jsp.java]\nThe code of method _jspService(HttpServletRequest, HttpServletResponse) is exceeding the 65535 bytes limit\n\nStacktrace:\n\tat org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:103)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:366)\n\tat org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:490)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:379)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:354)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:341)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:662)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:364)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:395)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:339)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:731)\n\nIf I add the following configuration (conf/web.xml) to any 7.0.73+ version I still get the exception, from my research these settings should avoid the problem, am I right?\n\n    <servlet>\n        <servlet-name>jsp</servlet-name>\n        <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>\n        <init-param>\n            <param-name>checkInterval</param-name>\n            <param-value>300</param-value>\n        </init-param>\n        <init-param>\n            <param-name>development</param-name>\n            <param-value>false</param-value>\n        </init-param>\n        <init-param>\n            <param-name>fork</param-name>\n            <param-value>false</param-value>\n        </init-param>\n        <init-param>\n            <param-name>mappedfile</param-name>\n            <param-value>false</param-value>\n        </init-param>\n        <init-param>\n            <param-name>xpoweredBy</param-name>\n            <param-value>false</param-value>\n        </init-param>\n        <load-on-startup>3</load-on-startup>\n    </servlet>\n\nI don't have access to the JSP that throw the exception."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 201981, "time": "2017-11-08T09:46:13Z", "bug_id": 61723, "creation_time": "2017-11-08T09:46:13Z", "text": "Changes were made to the way code was generated for JSPs to resolve some bugs (that were also spec compliance issues) with resource clean-up if a tag throws an Exception. We minimised the impact of these as much as we can but the end result is still that the generated code is larger than it was before.\n\nThere are some useful pointers in this thread.\nhttp://markmail.org/thread/5gh57ststsbjqbza\n\nNote:\ntrimSpaces - true       should be zero impact and might help\nenablePooling - false   is likely to have a negative performance impact"}]