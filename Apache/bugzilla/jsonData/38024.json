[{"count": 0, "tags": [], "bug_id": 38024, "is_private": false, "id": 83949, "creation_time": "2005-12-23T08:18:04Z", "time": "2005-12-23T08:18:04Z", "creator": "carnold@apache.org", "text": "The abstract method format changed signatures from String format(LoggingEvent event) in log4j 1.2 to \nformat(Writer output, LoggingEvent event) in log4j 1.3 which means than any existing log4j 1.2 user \nsupplied Layout will not longer compile and will likely result in a MethodNotFound if the new format \nmethod is called on a previous compiled.  Also HTMLFormat appears to be missing from 1.3.", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 38024, "is_private": false, "id": 83950, "creation_time": "2005-12-23T08:19:36Z", "time": "2005-12-23T08:19:36Z", "creator": "carnold@apache.org", "text": "Added additional unit tests to 1.2 branch in revision 358758.", "attachment_id": null}, {"count": 2, "tags": [], "text": "There are several issues that are addressed in rev 359667.\n\n1. Change to signature of abstract format method in Layout:\n\nThe signature of the abstract format method was changed from\n\nString format(LoggingEvent event) \n\nto\n\nvoid format(Writer output, LoggingEvent event) throws IOException\n\nand the original method was provided by delegating to the new method.\n\nWhile it would be good to redesign the class to have a Writer, StringBuilder or\nStringBuffer as a parameter in 2.0, the only appender that directly used the new\nsignature was SyslogAppender and the Layout implementations had not been\nmodified to eliminate use of their static StringBuffers.  Basically, then only\nthing that had changed is they had an output.write(sbuf.toString()) at the end.\n\nSince the benefits of the changed signature had not been realized and the change\nwould break user provided layouts, it seemed best to revert to the 1.2 signature.\n\n2. HTMLLayout had been moved to org.apache.log4j.html\n\nThis patch restores its previous package name.\n\n3. o.a.l.helpers.DateLayout had been collapsed into o.a.l.TTCCLayout\n\nThis patch restores DateLayout (from the current TTCCLayout code) which could\nhave been used as a base class for user supplied layouts.  Both DateLayout and\nTTCCLayout are marked as deprecated.\n\nThe only remaining Layout related incompatibility is with the\nPatternLayout.createPatternParser which could have been overriden in derviatives\nof PatternLayout to introduce custom format specifiers.  The implementation of\nPatternLayout in 1.3 appears to be so significantly changed that restoring that\ncapability may be difficult.\n\nAll recently added unit tests from the 1.2 branch were ported with only minor\nchanges.  The MyPatternParser and MyPatternLayout tests which use the lost\nPatternLayout.createPatternParser method were not ported.", "is_private": false, "id": 84048, "creator": "carnold@apache.org", "time": "2005-12-29T01:13:17Z", "bug_id": 38024, "creation_time": "2005-12-29T01:13:17Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "In rev 384131, restored the PatternLayout.createPatternParser() extension point\nand classes org.apache.log4j.helper.PatternParser, PatternConverter and\nFormattingInfo needed to support user-provided custom PatternLayouts, but no\nlonger used by \"stock\" log4j.  \n\nWhen using the \"stock\" PatternLayout, an instance of\norg.apache.log4j.pattern.BridgePatternParser is returned by\ncreatePatternParser() which bridges between the old API and the new log4j 1.3\nimplementation (o.a.l.pattern.PatternParser) which adds new features like\n%logger and timezone specifiers.\n\nCustom PatternLayout's will have extended the otherwise unused\no.a.l.helpers.PatternLayout and so will not transparently inherit the new log4j\n1.3 features.\n\nSee http://marc.theaimsgroup.com/?l=log4j-dev&m=113991484525345&w=2 for a report\nfrom the field from a user who observed the compatibility problem that was\nanticipated in the previous comment.", "is_private": false, "id": 86593, "creator": "carnold@apache.org", "time": "2006-03-08T06:41:44Z", "bug_id": 38024, "creation_time": "2006-03-08T06:41:44Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 38024, "attachment_id": null, "text": "Just to confirm this fix works in real life, as well as in Junit tests. With \nthe layout specified in a log4j.properties file. ", "id": 86851, "time": "2006-03-15T12:00:02Z", "creator": "alelean@papermule.co.uk", "creation_time": "2006-03-15T12:00:02Z", "is_private": false}]