[{"count": 0, "tags": [], "bug_id": 51719, "attachment_id": null, "text": "I am trying to compile http-2.2.19 with all modules on Solaris x86-64 and getting the following error when gmake tries to build httpd:\n Undefined                       first referenced\n symbol                             in file\napr_md4_set_xlate                   server/.libs/libmain.a(exports.o)\nld: fatal: Symbol referencing errors. No output written to httpd\ncollect2: ld returned 1 exit status\ngmake[1]: *** [httpd] Error 1\n\nI have compiled the following from source in 64-bit:\napr-1.2.2.tar                         libtool-2.4.tar\napr-1.4.5.tar                         libxml2-sources-2.7.8.tar\napr-util-1.3.12.tar                   mod_ssl-2.8.30-1.3.39.tar\ndb-5.2.28.NC.tar                      openldap-stable-20100719.tar\nexpat-2.0.1.tar                       openssl-1.0.0d.tar\ngettext-0.18.1.1.tar                  php-5.3.6.tar\nlibiconv-1.13.1.tar                   zlib-1.2.5.tar\n\nHere is my environment variables of significance:\nLDFLAGS=-L/usr/local/apr/lib\nMANPATH=/usr/local/man:/usr/man:/usr/share/man:/usr/openwin/share:/usr/opt/SUNWmd/man:/opt/SUNWexplo/man:/usr/local/ssl/man:/usr/openwin/man:/usr/dt/man:/opt/VRTS/man\nTERM=vt100\nSHELL=/usr/bin/bash\nCPPFLAGS=-I/usr/local/apr/include\nLD_LIBRARY_PATH=/usr/lib/amd64:/usr/local/amd64/lib:/usr/sfw/lib/amd64:/usr/local/ssl/lib:/usr/local/lib:/lib:/usr/lib:/usr/lib/sparcv9:/usr/local/lib:/usr/local/ssl/lib:/usr/lib/sparcv9\nPATH=/bin:/sbin:/usr/local/bin:/usr/bin:/usr/sbin:/usr/local/sbin:/usr/ucb/bin:/usr/opt/SUNWmd/sbin:/usr/sfw/bin:/usr/sfw/sbin:/usr/openwin/bin:/usr/ccs/bin:/usr/xpg4/bin:/root/bin\nLANG=C\nCC=/usr/sfw/bin/gcc -m64\n\nHere is my Configure command:\n./configure \\\n--prefix=/usr/apache64 \\\n--enable-so \\\n--enable-rewrite \\\n--enable-modules=all \\\n--enable-mods-shared=ssl \\\n--with-ssl=/usr/local/ssl \\\n--with-apr=/usr/local/apr \\\n--with-apr-util=/usr/local/apr \\\n--target=x86_64-pc-solaris2.1x \\\n--build=x86_64-pc-solaris2.1x \\\n--with-expat=builtin \\\n--with-mpm=worker \\\n--enable-lib64 \\\n--with-ldap-lib=/usr/local/lib \\\n--with-ldap-include=/usr/local/include\n\nThe compile works fine without any modules but I need specifically for the ssl module to work.\n\nThanks in advance.\n\nPaul", "id": 148806, "time": "2011-08-24T22:07:45Z", "creator": "pgoins@1sync.org", "creation_time": "2011-08-24T22:07:45Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 51719, "attachment_id": null, "text": "You may have a legitimate bug here, but I think it's unlikely.  It implies you configured against an apr-util with apr_xlate, but are linking against a version without it.  Is it possible that you have two (or more) different apr_util versions?\n\nTHe practical fix is easy: use a version with apr_xlate!  You may have to tell apr-util where to find iconv, if the latter is not system-provided.\n\nIf there is a build bug, it's make_exports mishandling preprocessor directives!", "id": 148810, "time": "2011-08-24T23:34:47Z", "creator": "nick@webthing.com", "creation_time": "2011-08-24T23:34:47Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 51719, "text": "Thanks Nick.\nPlease close the ticket. Your suggestion helped me find a solution.  Upon recompiling apr-utils, the last message is:\n----------------------------------------------------------------------\nLibraries have been installed in:\n   /usr/local/apr/lib\n\nIf you ever happen to want to link against installed libraries\nin a given directory, LIBDIR, you must either use libtool, and\nspecify the full pathname of the library, or use the `-LLIBDIR'\nflag during linking and do at least one of the following:\n   - add LIBDIR to the `LD_LIBRARY_PATH' environment variable\n     during execution\n   - use the `-RLIBDIR' linker flag\n\nSee any operating system documentation about shared libraries for\nmore information, such as the ld(1) and ld.so(8) manual pages.\n----------------------------------------------------------------------\nbuild/install.sh -c -m 644 aprutil.exp /usr/local/apr/lib\nbuild/install.sh -c -m 755 apu-config.out /usr/local/apr/bin/apu-1-config\n\nSo I put in a a LDFLAG mapped to /usr/local/apr/lib.\nexport LDFLAGS=-L/usr/local/apr/lib\n\nAfter that, compiling apache in 64-bit Solaris x86 worked fine.\n\nThanks again.\n\nPaul", "id": 148834, "attachment_id": null, "creator": "pgoins@1sync.org", "creation_time": "2011-08-25T21:04:33Z", "time": "2011-08-25T21:04:33Z", "is_private": false}]