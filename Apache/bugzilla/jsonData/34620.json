[{"count": 0, "tags": [], "bug_id": 34620, "text": "I have an Apache 2.0.54 server with mod_ldap, mod_auth_ldap and libphp4 modules\nloaded. When, from a PHP script open a connection to LDAP server, the first 2\ntimes it works, but the third, the apache server process hangs.\n\nI've tried it with Apache 1.3.27 and hungs, too. It seems like there's some kind\nof conflict between mod_ldap and the php module, because when I disable mod_ldap\nall works fine.\n\nOpenldap library: openldap2-client-2.1.12-44 (Suse release)\n\nApache config.nice file:\nCFLAGS=\"-O2 -march=i486 -mcpu=i686 -fPIC -D_LARGEFILE_SOURCE\n-DDYNAMIC_MODULE_LIMIT=72\"; export CFLAGS\n\"./configure\" \\\n\"--enable-maintainer-mode\" \\\n\"--enable-layout=SuSE81\" \\\n\"--with-program-name=httpd2-leader\" \\\n\"--with-mpm=leader\" \\\n\"--with-perl=/usr/bin/perl\" \\\n\"--enable-mods-shared=all\" \\\n\"--enable-ssl=shared\" \\\n\"--disable-isapi\" \\\n\"--enable-deflate\" \\\n\"--enable-echo\" \\\n\"--enable-ext-filter\" \\\n\"--enable-charset-lite\" \\\n\"--enable-file-cache\" \\\n\"--enable-logio\" \\\n\"--enable-case_filter\" \\\n\"--enable-case_filter_in\" \\\n\"--with-ldap\" \\\n\"--enable-ldap\" \\\n\"--enable-auth_ldap\" \\\n\"--enable-proxy\" \\\n\"--enable-proxy-connect\" \\\n\"--enable-proxy-ftp\" \\\n\"--enable-proxy-http\" \\\n\"--enable-cache\" \\\n\"--enable-disk-cache\" \\\n\"--enable-mem-cache\" \\\n\"--enable-suexec\" \\\n\"--with-suexec-bin=/usr/sbin/suexec2\" \\\n\"--with-suexec-caller=wwwrun\" \\\n\"--with-suexec-docroot=/srv/www/htdocs\" \\\n\"--with-suexec-logfile=/var/log/apache2/suexec.log\" \\\n\"--with-suexec-userdir=public_html\" \\\n\"--with-suexec-uidmin=96\" \\\n\"--with-suexec-gidmin=96\" \\\n\"--with-suexec-safepath=/usr/local/bin:/usr/bin:/bin\" \\\n\"$@\"", "id": 74125, "attachment_id": null, "creator": "justo.alonso@gmail.com", "creation_time": "2005-04-26T12:20:53Z", "time": "2005-04-26T12:20:53Z", "is_private": false}, {"count": 1, "tags": [], "creator": "justo.alonso@gmail.com", "attachment_id": null, "id": 74130, "time": "2005-04-26T13:18:43Z", "bug_id": 34620, "creation_time": "2005-04-26T13:18:43Z", "is_private": false, "text": "\nSorry I have the Apache process compiled in prefork mpm. The correct config.nice is:\n\nCFLAGS=\"-O2 -march=i486 -mcpu=i686 -fPIC -D_LARGEFILE_SOURCE\n-DDYNAMIC_MODULE_LIMIT=72\"; export CFLAGS\n\"./configure\" \\\n\"--enable-maintainer-mode\" \\\n\"--enable-layout=SuSE81\" \\\n\"--with-program-name=httpd2-prefork\" \\\n\"--with-mpm=prefork\" \\\n\"--with-perl=/usr/bin/perl\" \\\n\"--enable-mods-shared=all\" \\\n\"--enable-ssl=shared\" \\\n\"--disable-isapi\" \\\n\"--enable-deflate\" \\\n\"--enable-echo\" \\\n\"--enable-ext-filter\" \\\n\"--enable-charset-lite\" \\\n\"--enable-file-cache\" \\\n\"--enable-logio\" \\\n\"--enable-case_filter\" \\\n\"--enable-case_filter_in\" \\\n\"--with-ldap\" \\\n\"--enable-ldap\" \\\n\"--enable-auth_ldap\" \\\n\"--enable-proxy\" \\\n\"--enable-proxy-connect\" \\\n\"--enable-proxy-ftp\" \\\n\"--enable-proxy-http\" \\\n\"--enable-cache\" \\\n\"--enable-disk-cache\" \\\n\"--enable-mem-cache\" \\\n\"--enable-suexec\" \\\n\"--with-suexec-bin=/usr/sbin/suexec2\" \\\n\"--with-suexec-caller=wwwrun\" \\\n\"--with-suexec-docroot=/srv/www/htdocs\" \\\n\"--with-suexec-logfile=/var/log/apache2/suexec.log\" \\\n\"--with-suexec-userdir=public_html\" \\\n\"--with-suexec-uidmin=96\" \\\n\"--with-suexec-gidmin=96\" \\\n\"--with-suexec-safepath=/usr/local/bin:/usr/bin:/bin\" \\\n\"$@\"\n"}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "text": "Could you try this patch?\n\nhttp://svn.apache.org/viewcvs/httpd/httpd/trunk/modules/ldap/util_ldap.c?rev=164919&r1=164918&r2=164919&view=diff\n\n*** This bug has been marked as a duplicate of 34618 ***", "id": 74241, "time": "2005-04-28T17:28:27Z", "bug_id": 34620, "creation_time": "2005-04-28T17:28:27Z", "is_private": false, "attachment_id": null}]