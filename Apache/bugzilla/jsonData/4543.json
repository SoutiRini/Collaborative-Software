[{"count": 0, "tags": [], "text": "i installed tomcat in c:\\Program Files\\Apache Tomcat 4.0\nand run it as a service on Windows 2000.\n\nwhen running a sevlet with RMI client code, \ni get :\n----- Root Cause -----\ncom.juldi.jis.JISException: RemoteException: RemoteException occurred in server\nthread; nested exception is: \n\tjava.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: \n\tjava.net.MalformedURLException: no protocol: Files/Apache\n\tat\ncom.juldi.jis.connector.rmi.RMIIntegrationServerProxy.newOperation(RMIIntegrationServerProxy.java:42)\n......\n\n\nNote the java.net.MalformedURLException: no protocol: Files/Apache", "attachment_id": null, "id": 7368, "creation_time": "2001-10-31T08:28:48Z", "time": "2001-10-31T08:28:48Z", "creator": "gaxzero@netscape.net", "bug_id": 4543, "is_private": false}, {"count": 1, "tags": [], "bug_id": 4543, "attachment_id": null, "id": 7370, "time": "2001-10-31T08:46:03Z", "creator": "gaxzero@netscape.net", "creation_time": "2001-10-31T08:46:03Z", "is_private": false, "text": "i also tried repacing all occurances of 'c:\\Program Files\\Apache Tomcat 4.0' in\nmy registry to 'c:\\PROGRA~1\\APACHE~1.0' but the problem persists."}, {"count": 2, "tags": [], "bug_id": 4543, "attachment_id": null, "is_private": false, "id": 7392, "time": "2001-10-31T11:56:42Z", "creator": "remm@apache.org", "creation_time": "2001-10-31T11:56:42Z", "text": "Is it a VM local server ?\nWould you have some way to print out the entire URL ? In theory, it should be a \nfile based URL (with a space since the path has a space); I would have thought \nthis would be supported. I didn't notice any problem \nIt may be a JDK bug, or it may be that the URL needs to be encoded / decoded \nHTTP style with the usual %xx encoding."}, {"count": 3, "tags": [], "bug_id": 4543, "attachment_id": null, "id": 7421, "creation_time": "2001-10-31T18:13:12Z", "time": "2001-10-31T18:13:12Z", "creator": "gaxzero@netscape.net", "text": "this bug goes away when palcing the whole tomcat in a dir with no spaces :\n\"c:\\tomcat\" instead of \"c:\\Program Files\\Apache Tomcat 4.0\"\nalso, it has nothing to do with the registry (as i thought in a previous comment\nsince the bug is there even when i run startup.bat)\n\nthe exception occures during an rmi call unmarchalling in a rmic generated stub:\njava.rmi.server.RemoteCall call = \n      ref.newCall((java.rmi.server.RemoteObject) this,\n                  operations,\n                  10,\n                  interfaceHash);\ntry {\n  java.io.ObjectOutput out = call.getOutputStream();\n  out.writeObject($param_AuthToken_1);\n  out.writeObject($param_String_2);\n  out.writeObject($param_String_3);\n} catch (java.io.IOException e) {\n  throw new java.rmi.MarshalException(\"error marshalling arguments\", e);\n}\n\nthe best stacktrace i could get was:\njava.rmi.ServerException: RemoteException occurred in server thread; nested\nexception is:\n        java.rmi.UnmarshalException: error unmarshalling arguments; nested\nexception is:\n        java.net.MalformedURLException: no protocol: Files/Apache\njava.rmi.UnmarshalException: error unmarshalling arguments; nested exception is:\n        java.net.MalformedURLException: no protocol: Files/Apache\njava.net.MalformedURLException: no protocol: Files/Apache\n        at\nsun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknown Source)\n        at sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)\n        at sun.rmi.server.UnicastRef.invoke(Unknown Source)\n        at\ncom.juldi.jis.is.rmi.RMIConnectorReceiver_Stub.newOperation(RMIConnectorReceiver_Stub.java:510)\n\n\n\ncould there be some System property needed by sun's RMI that tomcat is overwriting?", "is_private": false}, {"count": 4, "tags": [], "text": "I've cleaned the file URLs generated by the classloader (in the HEAD branch \nonly at this time). Now, all of them should be canonical. If this does not fix \nthe problem, there's nothing else that Tomcat can do, and it looks more like a \nJDK problem.", "is_private": false, "id": 7796, "creator": "remm@apache.org", "time": "2001-11-12T13:37:52Z", "bug_id": 4543, "creation_time": "2001-11-12T13:37:52Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "This appears to be a JDK problem.  In the Javasoft dug database it's #4496398\nand #4273532.  Despite what's said in those bugs however, using JDK1.4 does not\nappear to solve the problem.", "attachment_id": null, "id": 11808, "creation_time": "2002-03-14T18:34:16Z", "time": "2002-03-14T18:34:16Z", "creator": "netchris3@quickstream.com", "bug_id": 4543, "is_private": false}, {"count": 6, "tags": [], "text": "Even thought, it is a problem with URL class, you can get around by using getURI\n() of File class.\n\nFor example,\njakarta-tomcat-4.0\n\\catalina\\src\\share\\org\\apache\\catalina\\startup\\ClassLoaderFactory.java has \nfollowing line:\nURL url = new URL(\"file\", null, file.getCanonicalPath());\n\nI solved the malFormedURL issue by changing as following:\nURL url = file.toURI().toURL();\n\nHope this helps.", "is_private": false, "id": 46943, "creator": "hlee@handysoft.com", "time": "2003-11-06T21:01:43Z", "bug_id": 4543, "creation_time": "2003-11-06T21:01:43Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "Why is the resolution WONTFIX?  Especially when there is an apparent fix in the\ncomments below?\n\nJamie", "is_private": false, "id": 63026, "creator": "jbisotti@gmail.com", "time": "2004-09-03T13:07:33Z", "bug_id": 4543, "creation_time": "2004-09-03T13:07:33Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 4543, "attachment_id": null, "text": "Why is the resolution WONTFIX?  Especially when there is an apparent fix in the\ncomments below?\n\nJamie", "id": 63027, "time": "2004-09-03T13:08:13Z", "creator": "jbisotti@gmail.com", "creation_time": "2004-09-03T13:08:13Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 4543, "attachment_id": 13405, "text": "Created attachment 13405\nclean work-around with need for security policy input", "id": 66744, "time": "2004-11-11T18:04:36Z", "creator": "shawn@quickstream.com", "creation_time": "2004-11-11T18:04:36Z", "is_private": false}]