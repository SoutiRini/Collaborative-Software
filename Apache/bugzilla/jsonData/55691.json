[{"count": 0, "tags": [], "text": "was working in tomcat 6.0.20\n\nERROR javax.faces.context.ExceptionHandlerWrapper - javax.faces.component.UpdateModelException: java.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]\njava.lang.ClassCastException: Unable to add an object of type [java.lang.Integer] to an array of objects of type [int]\n\tat javax.el.ArrayELResolver.setValue(ArrayELResolver.java:94)\n\tat com.sun.faces.el.DemuxCompositeELResolver._setValue(DemuxCompositeELResolver.java:255)\n\tat com.sun.faces.el.DemuxCompositeELResolver.setValue(DemuxCompositeELResolver.java:281)\n\tat org.apache.el.parser.AstValue.setValue(AstValue.java:158)\n\tat org.apache.el.ValueExpressionImpl.setValue(ValueExpressionImpl.java:249)\n\tat com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:131)\n\tat javax.faces.component.UIInput.updateModel(UIInput.java:818)\n\tat javax.faces.component.UIInput.processUpdates(UIInput.java:735)\n\tat javax.faces.component.UIData.iterate(UIData.java:2001)\n\tat javax.faces.component.UIData.processUpdates(UIData.java:1253)\n\tat javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)\n\tat javax.faces.component.UIForm.processUpdates(UIForm.java:281)\n\tat javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)\n\tat javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)\n\tat javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1231)\n\tat com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78)\n\tat com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)\n\tat com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)\n\tat javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)", "attachment_id": null, "id": 170757, "creator": "taly81010@yahoo.com", "time": "2013-10-22T23:05:42Z", "bug_id": 55691, "creation_time": "2013-10-22T23:05:42Z", "is_private": false}, {"count": 1, "tags": [], "text": "Please re-try with a Tomcat 6 version that has been released in the last 4 years. 6.0.20 was released in summer 2009. Try again with Tomcat 6.0.37, which has had a bunch of fixes in the meantime. If you can reproduce with 6.0.latest, we can probably fix it.\n\nWhile you're at it, please test against Tomcat 7.0.42. There are lots of differences between Tomcat 6 and 7, but much less between Tomcat 7 and 8 (where a fix is more likely to happen faster).", "is_private": false, "id": 170770, "creator": "chris@christopherschultz.net", "time": "2013-10-23T15:42:00Z", "bug_id": 55691, "creation_time": "2013-10-23T15:42:00Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 55691, "attachment_id": null, "id": 170782, "time": "2013-10-23T20:09:01Z", "creator": "taly81010@yahoo.com", "creation_time": "2013-10-23T20:09:01Z", "is_private": false, "text": "(In reply to Christopher Schultz from comment #1)\n> Please re-try with a Tomcat 6 version that has been released in the last 4\n> years. 6.0.20 was released in summer 2009. Try again with Tomcat 6.0.37,\n> which has had a bunch of fixes in the meantime. If you can reproduce with\n> 6.0.latest, we can probably fix it.\n> \n> While you're at it, please test against Tomcat 7.0.42. There are lots of\n> differences between Tomcat 6 and 7, but much less between Tomcat 7 and 8\n> (where a fix is more likely to happen faster).\n\nSorry should have been more clear.\nIt was tested against 6.0.37\nThe stacktrace is from 6.0.37 not 6.0.20\n6.0.20 was when it was still working\n\nDid a quick test against 7.0.27 and getting same error no primitives support"}, {"attachment_id": null, "tags": [], "creator": "taly81010@yahoo.com", "is_private": false, "count": 3, "id": 170785, "time": "2013-10-23T20:34:17Z", "bug_id": 55691, "creation_time": "2013-10-23T20:34:17Z", "text": "Did a little more digging apparently this snippet of code was add to javax.el.ArrayELResolver.setValue()\n\nif (value != null &&\n        !base.getClass().getComponentType().isAssignableFrom(\n                value.getClass())) {\n    throw new ClassCastException(message(context,\n            \"objectNotAssignable\",\n            new Object[] {value.getClass().getName(),\n            base.getClass().getComponentType().getName()}));\n}\n\nisAssignableFrom() does not take into account autoboxing so therefore this change is breaking setValue()"}, {"count": 4, "tags": [], "text": "Created attachment 30970\nProposed patch\n\nCan you run this through your tests?", "attachment_id": 30970, "bug_id": 55691, "id": 170838, "time": "2013-10-25T14:17:16Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-10-25T14:17:16Z", "is_private": false}, {"count": 5, "tags": [], "text": "This patch is against Tomcat 8 (trunk), but will likely apply cleanly to earlier versions.", "attachment_id": null, "bug_id": 55691, "id": 170839, "time": "2013-10-25T14:17:43Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-10-25T14:17:43Z", "is_private": false}, {"count": 6, "attachment_id": null, "bug_id": 55691, "is_private": false, "id": 170893, "time": "2013-10-28T21:32:53Z", "creator": "markt@apache.org", "creation_time": "2013-10-28T21:32:53Z", "tags": [], "text": "This has been fixed in 8.0.x and 7.0.x and will be included in 7.0.48 onwards and 8.0.0-RC6 onwards. It has also been proposed for 6.0.x.\n\nNote that the suggested patch was not used. The Util class already contained the necessary version of isAssignableFrom(). This was used instead. I also added a test case to confirm the fix."}, {"count": 7, "tags": [], "bug_id": 55691, "attachment_id": null, "id": 170894, "time": "2013-10-28T21:33:25Z", "creator": "markt@apache.org", "creation_time": "2013-10-28T21:33:25Z", "is_private": false, "text": "Reduce severity to something sensible."}, {"attachment_id": null, "tags": [], "creator": "chris@christopherschultz.net", "is_private": false, "count": 8, "id": 170899, "time": "2013-10-29T03:59:58Z", "bug_id": 55691, "creation_time": "2013-10-29T03:59:58Z", "text": "(In reply to Mark Thomas from comment #6)\n> Note that the suggested patch was not used. The Util class already contained\n> the necessary version of isAssignableFrom(). This was used instead. I also\n> added a test case to confirm the fix.\n\nAw, I worked really hard on that ;)"}, {"count": 9, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 171528, "time": "2013-12-02T14:58:09Z", "bug_id": 55691, "creation_time": "2013-12-02T14:58:09Z", "is_private": false, "text": "This has been fixed in 6.0.x and will be included in 6.0.38 onwards."}]