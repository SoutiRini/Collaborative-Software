[{"count": 0, "tags": [], "creator": "hauser@acm.org", "text": " ", "id": 64170, "time": "2004-09-24T12:42:39Z", "bug_id": 31405, "creation_time": "2004-09-24T12:42:39Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": 12856, "bug_id": 31405, "is_private": false, "id": 64171, "time": "2004-09-24T12:44:48Z", "creator": "hauser@acm.org", "creation_time": "2004-09-24T12:44:48Z", "tags": [], "text": "Created attachment 12856\nstartUp.png quality analyzer"}, {"count": 2, "attachment_id": null, "bug_id": 31405, "text": "Let's not waste anyone's time with this \"quality\" metric. If you want to suggest\nchanges, please provide patches.", "id": 64173, "time": "2004-09-24T12:56:18Z", "creator": "remm@apache.org", "creation_time": "2004-09-24T12:56:18Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 31405, "text": "my tomcat server has 4 servlets loaded multiple times by 3 connectors (in 3\ndifferent wars).\n\nIn order not to have to clean after these instances I put unpackwar=false.\nAs a minor security consideration, each time less the files are on the disk, the\nsmaller is the exposure (albeit an informed attacker would anyway be most\ninterested in the ./work/*/_* directories).\n\nAnyway, being aware that this would reduce startup, time, I was surprised about\nthe accelerated deterioration of startup time as my application and the number\nof jsp's grew. It's roughly 300 struts-related classes and 300 jsps. On an intel\nmachine one generation behind, it easily took 5 minutes or more to start,\nespecially, the super.init() method of the four servlets took ages.\nAs per the attached screenshot, I guess the reason for this is the unpackwar\nthat throws over 10'000 (probably planned?) exceptions (WARDir*...) and might\nunpack the war many times.\n\nRFE:\n====\nIf these assumptions are right, I suggest to enhance the documentation at the\nabove URL to inform the tomcat administrator about these implications.", "id": 64176, "time": "2004-09-24T13:01:21Z", "creator": "hauser@acm.org", "creation_time": "2004-09-24T13:01:21Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "remm@apache.org", "text": "Even if it is the problem (which I'm not sure of), it will be very difficult to\n\"fix\".\nI'd like to point out that the regular file based stuff creates as many of these\nexceptions, and, generally, Struts webapps startup is extremely slow.", "id": 64180, "time": "2004-09-24T13:52:29Z", "bug_id": 31405, "creation_time": "2004-09-24T13:52:29Z", "is_private": false, "attachment_id": null}, {"count": 5, "attachment_id": null, "bug_id": 31405, "is_private": false, "id": 64596, "time": "2004-10-05T06:42:47Z", "creator": "hauser@acm.org", "creation_time": "2004-10-05T06:42:47Z", "tags": [], "text": "further observations that may help others:\n1) when setting CATALINA_OPTS=\"-verbose:gc\" I see about 300 garbage collections:\n[GC 18619K->3026K(260160K), 0.0217930 secs]\n[GC 19218K->3011K(260160K), 0.0047730 secs]\n[GC 19191K->3011K(260160K), 0.0033220 secs]\n[GC 19203K->3013K(260160K), 0.0039100 secs]\n[GC 19205K->3100K(260160K), 0.0047540 secs]\n[GC 19292K->3125K(260160K), 0.0045940 secs]\n[GC 19316K->3143K(260160K), 0.0042910 secs]\n[GC 19328K->3167K(260160K), 0.0043550 secs]\n...\n[GC 19654K->3458K(260160K), 0.0009390 secs]\n[Full GC 12290K->3530K(260160K), 0.0917670 secs]\n[GC 19784K->3811K(260224K), 0.0043500 secs]\n...\n[GC 20465K->4217K(260224K), 0.0011250 secs]\n[GC 20471K->4215K(260224K), 0.0010260 secs]\n[GC 20466K->4222K(260224K), 0.0010590 secs]\n[GC 20478K->4242K(260224K), 0.0013500 secs]\n\n2) when running jprobe memorydebugger, it ends up with excessive memory use and\nswapping such that a warm reboot of the machine is more promising than waiting\nfor the console to respond on simple key entries ... (gijs.bruyn@quest.com from\nJProbe support suspects unpack=false to be the main culprit)"}]