[{"count": 0, "tags": [], "bug_id": 57724, "is_private": false, "text": "I am using tomcat 7.0.57, and I have CorsFilter configured in my application, in my login page, I just have normal form with the username & password filter and a submit button, I set the \"method\" to \"POST', when I use Google Chrome to login, I get a 403 error.\n\nThe reason is Google Chrome adds the \"origin\" into the http header, and the value is same as the host value(both of them are \"http://localhost:8000\").\n\nIt will be nice if someone can update CorsFilter.checkRequestType to return a CORSRequestType.NOT_CORS in this case.", "id": 181866, "time": "2015-03-18T14:53:38Z", "creator": "wenjiezhang2013@gmail.com", "creation_time": "2015-03-18T14:53:38Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Created attachment 32585\n20150318075625.jpg", "is_private": false, "id": 181867, "creation_time": "2015-03-18T14:57:07Z", "time": "2015-03-18T14:57:07Z", "creator": "wenjiezhang2013@gmail.com", "bug_id": 57724, "attachment_id": 32585}, {"count": 2, "tags": [], "text": "If the client sends the origin header then the server has to treat it as a CORS request. I don't see any scope in the CORS spec for the behaviour you are requesting.\n\nI do wonder why Chrome is adding the origin header but that is a question for Chrome.", "is_private": false, "bug_id": 57724, "id": 181872, "time": "2015-03-18T15:35:09Z", "creator": "markt@apache.org", "creation_time": "2015-03-18T15:35:09Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "Hi Mark,\n\nThanks for the quick reply.\n\nI do not know why Chrome team wants to handle this case differently from the other browser. But based on the IETF specification(http://tools.ietf.org/html/rfc6454#section-7.3), the user agent can include the \"origin\" in any of the HTTP request. So it is definitely unfair to check only the existence of this element.\n\nThanks,\nJack", "attachment_id": null, "bug_id": 57724, "id": 181874, "time": "2015-03-18T15:47:44Z", "creator": "wenjiezhang2013@gmail.com", "creation_time": "2015-03-18T15:47:44Z", "is_private": false}, {"count": 4, "tags": [], "text": "Fair enough. We'll have to check the host header (or equivalent) and compare it to the origin. I'm working on a patch and should have something soon.", "is_private": false, "bug_id": 57724, "id": 181892, "time": "2015-03-18T20:52:05Z", "creator": "markt@apache.org", "creation_time": "2015-03-18T20:52:05Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "Fixed in trunk, 8.0.x for 8.0.21 onwards and 7.0.x for 7.0.60 onwards.", "is_private": false, "id": 181897, "creation_time": "2015-03-18T21:18:13Z", "time": "2015-03-18T21:18:13Z", "creator": "markt@apache.org", "bug_id": 57724, "attachment_id": null}, {"count": 6, "tags": [], "creator": "wenjiezhang2013@gmail.com", "attachment_id": null, "is_private": false, "id": 181901, "time": "2015-03-18T21:52:52Z", "bug_id": 57724, "creation_time": "2015-03-18T21:52:52Z", "text": "(In reply to Mark Thomas from comment #5)\n> Fixed in trunk, 8.0.x for 8.0.21 onwards and 7.0.x for 7.0.60 onwards.\n\nGreat, thanks."}]