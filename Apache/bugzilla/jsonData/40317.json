[{"count": 0, "tags": [], "bug_id": 40317, "is_private": false, "id": 92525, "attachment_id": null, "creator": "starzer@it-fabrik.at", "creation_time": "2006-08-25T08:23:08Z", "time": "2006-08-25T08:23:08Z", "text": "tested with (mod_jk/1.2.18 and 1.2.15)\n\nif you request a html page through mod_jk with additional image resources(also\nvia mod_jk) and some of these resources respond with a 304 WITH a content body\nlength > 0 (by mistake) you frequently get wrong results, e.g.\n- some byte fragments from a image resources, displayed before the <HTML> section\n- image resources are replaced by other image resources from the same stream...\n\n\nmod_jk example output (wrong content length):\n\n1 2006][29127:19376] [debug] ajp_unmarshal_response::jk_ajp_common.c (621):\nstatus = 304\n[Wed Aug 23 17:36:11 2006][29127:19376] [debug]\najp_unmarshal_response::jk_ajp_common.c (628): Number of headers is = 2\n[Wed Aug 23 17:36:11 2006][29127:19376] [debug]\najp_unmarshal_response::jk_ajp_common.c (684): Header[0] [Content-Type] =\n[image/jpeg]\n[Wed Aug 23 17:36:11 2006][29127:19376] [debug]\najp_unmarshal_response::jk_ajp_common.c (684): Header[1] [Content-Length] = [6008]\n\n->\nstatus 304 resources with content-length > 0 should be logged as error (at\nleast) or content should be cut?\n\nsee http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html (\"The 304 response\nMUST NOT contain a message-body...\")\n\nthanks"}, {"count": 1, "text": "This doesn't seem to be a bug in mod_jk as it stands.\nFor a start, the downstream server is responding with broken HTTP, which is\nprobably confusing the user agent when the response is recieved (from what\nyou're describing, the user agent appears to be ignoring the content length on\nthe stream when it sees a 304, and then reading that content on the next\nrequest/response cycle).\n\nI don't think mod_jk should be playing the role of HTTP tidier - it should be\nsimply proxying the HTTP traffic through.\n\nUnless you can show an error in the HTTP converstation between the user agent\nand the web server/mod_jk, I'd suggest that this bug gets closed as an INVALID.", "creator": "Tim.Whittington@orionhealth.com", "is_private": false, "id": 97655, "time": "2007-01-04T13:17:24Z", "bug_id": 40317, "creation_time": "2007-01-04T13:17:24Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "text": "I agree wholeheartedly with Tim's assessment and am closing as he suggests.", "attachment_id": null, "id": 98314, "creator": "markt@apache.org", "time": "2007-01-20T18:03:15Z", "bug_id": 40317, "creation_time": "2007-01-20T18:03:15Z", "is_private": false}, {"count": 3, "text": "*** Bug 44448 has been marked as a duplicate of this bug. ***", "creator": "william.barker@wilshire.com", "is_private": false, "id": 113866, "time": "2008-02-18T17:29:42Z", "bug_id": 40317, "creation_time": "2008-02-18T17:29:42Z", "tags": [], "attachment_id": null}]