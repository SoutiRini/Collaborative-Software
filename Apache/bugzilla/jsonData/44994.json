[{"count": 0, "tags": [], "bug_id": 44994, "text": "A JSP Expression Language (EL) conditional expression cannot have another conditional expression as its \"true\" expression.\n\nThe following fails:\n  ${0 lt a ? 1 lt a ? \"many\": \"one\": \"none\"}\n\nIt throws the following exception (the 19th character is the second question mark):\n  org.apache.el.parser.ParseException: Encountered \"?\" at line 1, column 19.\n  Was expecting one of:\n    \".\" ...\n    \"[\" ...\n...\n\torg.apache.el.parser.ELParser.generateParseException(ELParser.java:1890)\n\torg.apache.el.parser.ELParser.jj_consume_token(ELParser.java:1770)\n\torg.apache.el.parser.ELParser.Choice(ELParser.java:220)\n\nThe expression succeeds if brackets are added around the inner conditional expression:\n  ${0 lt a ? (1 lt a ? \"many\": \"one\"): \"none\"}\n\nI assume the bug is in ELParser.jjt (in apache-tomcat-6.0.16-src/java/org/apache/el/parser/). It uses Or(), instead of Choice(), for the \"true\" expression.\n\nWRONG:   Or() (<QUESTIONMARK> Or() <COLON> Choice() #Choice(3))*\nRIGHT:   Or() (<QUESTIONMARK> Choice() <COLON> Choice() #Choice(3))*\n\n\nDiff:\n107c107\n<       Or() (<QUESTIONMARK> Or() <COLON> Choice() #Choice(3))*\n---\n>       Or() (<QUESTIONMARK> Choice() <COLON> Choice() #Choice(3))*\n\nThis bug was not present in Tomcat 5.5.", "id": 116594, "time": "2008-05-13T23:38:42Z", "creator": "James.H.Manger@team.telstra.com", "creation_time": "2008-05-13T23:38:42Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 44994, "attachment_id": null, "id": 116754, "time": "2008-05-17T10:36:36Z", "creator": "markt@apache.org", "creation_time": "2008-05-17T10:36:36Z", "is_private": false, "text": "This has been fixed in trunk and proposed for 6.0.x"}, {"count": 2, "tags": [], "bug_id": 44994, "text": "This has been fixed in 6.0.x and will be included in 6.0.17 onwards.", "id": 116863, "time": "2008-05-20T15:39:53Z", "creator": "markt@apache.org", "creation_time": "2008-05-20T15:39:53Z", "is_private": false, "attachment_id": null}]