[{"text": "In case you have several headers with identical names (like Set-Cookie), which is standard, and you use \"header edit\", only the first header is kept.\n\nI reproduced this in a reverse proxymode, I'm not sure if it influences the problem.\n\nTo reproduce:\n1. Connect to an application that sends multiple Set-Cookie headers, like SqirrelMail\n2. Use the directive\n      Header edit Set-Cookie \"even a non existing string\"  \"replaced\"\n3. Only the first Set-Cookie header is transmitted\n\nIf you use \"Header append\", there is no problem.\n\nThis really screws up back-end applications when you want to edit headers.", "tags": [], "creator": "marc.stern@approach.be", "attachment_id": null, "count": 0, "id": 118238, "time": "2008-07-03T08:11:35Z", "bug_id": 45333, "creation_time": "2008-07-03T08:11:35Z", "is_private": false}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "attachment_id": 22213, "id": 118260, "time": "2008-07-03T14:52:35Z", "bug_id": 45333, "creation_time": "2008-07-03T14:52:35Z", "is_private": false, "text": "Created attachment 22213\nPatch against trunk\n\nCan you please check if the attached patch solves your problem?"}, {"count": 2, "text": "I tested it on 2.2.4 and it works - good job :-)", "bug_id": 45333, "attachment_id": null, "id": 118276, "time": "2008-07-04T00:17:18Z", "creator": "marc.stern@approach.be", "creation_time": "2008-07-04T00:17:18Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "Commited to trunk as r674000 (http://svn.apache.org/viewvc?view=rev&revision=674000).", "id": 118288, "time": "2008-07-04T03:55:42Z", "bug_id": 45333, "creation_time": "2008-07-04T03:55:42Z", "is_private": false}, {"count": 4, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "id": 118838, "time": "2008-07-19T07:16:31Z", "bug_id": 45333, "creation_time": "2008-07-19T07:16:31Z", "is_private": false, "text": "Proposed for backport as r678164\n(http://svn.apache.org/viewvc?view=rev&revision=678164)."}, {"count": 5, "tags": [], "bug_id": 45333, "attachment_id": null, "is_private": false, "id": 119629, "time": "2008-08-08T14:31:32Z", "creator": "rpluem@apache.org", "creation_time": "2008-08-08T14:31:32Z", "text": "Backported to 2.2.x as r684100 (http://svn.apache.org/viewvc?rev=684100&view=rev)."}, {"count": 6, "text": "*** Bug 45952 has been marked as a duplicate of this bug. ***", "bug_id": 45333, "attachment_id": null, "id": 121214, "time": "2008-10-05T19:35:09Z", "creator": "nick@webthing.com", "creation_time": "2008-10-05T19:35:09Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "bug_id": 45333, "attachment_id": null, "id": 121215, "time": "2008-10-05T21:34:34Z", "creator": "oleg@gryb.info", "creation_time": "2008-10-05T21:34:34Z", "is_private": false, "text": "(In reply to comment #6)\n> *** Bug 45952 has been marked as a duplicate of this bug. ***\n> \n\ned.t = apr_table_make(r->pool, 5); - does it mean that the max number of headers with the same name is 5?"}, {"count": 8, "tags": [], "bug_id": 45333, "text": "(In reply to comment #7)\n> (In reply to comment #6)\n> > *** Bug 45952 has been marked as a duplicate of this bug. ***\n> > \n> \n> ed.t = apr_table_make(r->pool, 5); - does it mean that the max number of\n> headers with the same name is 5?\n> \n\nNo. It does mean that the table reserves space for 5 entries at initialization. See \nhttp://apr.apache.org/docs/apr/1.3/group__apr__tables.html#g7b0a16a1388c68e66bff32190cf092f6\n", "id": 121218, "time": "2008-10-06T00:57:54Z", "creator": "rpluem@apache.org", "creation_time": "2008-10-06T00:57:54Z", "is_private": false, "attachment_id": null}, {"count": 9, "text": "(In reply to comment #8)\n> (In reply to comment #7)\n> > (In reply to comment #6)\n> > > *** Bug 45952 has been marked as a duplicate of this bug. ***\n> > > \n> > \n> > ed.t = apr_table_make(r->pool, 5); - does it mean that the max number of\n> > headers with the same name is 5?\n> > \n> \n> No. It does mean that the table reserves space for 5 entries at initialization.\n> See \n> http://apr.apache.org/docs/apr/1.3/group__apr__tables.html#g7b0a16a1388c68e66bff32190cf092f6\n> \nThanks, it should suffice then. I'm just curious why you need to create/delete headers instead of just replacing header's values in place? Would not you agree that replacing values in place will work faster (no need to create a new apr table or create/delete the whole headers). I've tried to do that in replace_values function. Could you think about any negative side-effects with the latter solution?\n\nThanks again for the quick fix and reply - I should've checked the bugzilla before posting.", "bug_id": 45333, "attachment_id": null, "id": 121232, "time": "2008-10-06T07:05:15Z", "creator": "oleg@gryb.info", "creation_time": "2008-10-06T07:05:15Z", "tags": [], "is_private": false}, {"count": 10, "tags": [], "bug_id": 45333, "attachment_id": null, "id": 121569, "time": "2008-10-15T12:59:16Z", "creator": "rpluem@apache.org", "creation_time": "2008-10-15T12:59:16Z", "is_private": false, "text": "Backported to 2.2.10."}]