[{"count": 0, "tags": [], "creator": "Mark.Stracey@futuretv.com", "attachment_id": null, "text": "If apxs is used to activate a module in httpd.conf, the path to {CFG_}LIBEXECDIR\nis checked to see if it begins with {CFG_}PREFIX, and if so then {CFG_}PREFIX is\nstripped from the module path in the generated LoadModule directive.  httpd then\nsees the relative path and prefixes it with ServerRoot {CFG_}SYSCONFDIR.\n\nIf - like many apache installations - the config, log and binary files are kept\nin separate directories, then this results in an attempt to load a non-existant\nmodule from ServerRoot/{LIBEXECDIR - PREFIX}.\n\nThis behaviour has been seen on Debian Linux 2.2 (apache package version\n1.3.9-14) and Solaris (Solaris 8 10/01, package SUNWapch{u|r} version\n11.8.0,REV=2000.01.08.18.12)\n\n'Guilty' lines in apxs:\n\n466:    my $dir = $CFG_LIBEXECDIR;\n467:    $dir =~ s|^$CFG_PREFIX/?||;\n468:    $dir =~ s|(.)$|$1/|;\n469:    push(@lmd, sprintf(\"LoadModule %-18s %s\", \"${name}_module\", \"$dir$t\"));\n\nThe workaround I'm using (in Solaris PHP4 package postinstall script) is to\nsubstitute the value of PREFIX on the apxs command line:\n\n    apxs -S PREFIX=/foo -e -n php4 -a /usr/apache/libexec/libphp4.so", "id": 14705, "time": "2002-04-25T10:02:44Z", "bug_id": 8508, "creation_time": "2002-04-25T10:02:44Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 8508, "attachment_id": null, "id": 36640, "time": "2003-05-05T01:35:12Z", "creator": "nd@perlig.de", "creation_time": "2003-05-05T01:35:12Z", "is_private": false, "text": "Uh, sorry for that long delayed reponse ...\n\nHowever, AFAICS this looks like a problem with the package(s) not with vanilla\nhttpd (PREFIX seems to be not set correctly).\nThe point is: if prefix isn't really a prefix, it won't be removed and the\nabsolute path persists. The transformation is exactly the same as in the\nconfigure script.\nI'm marking this report invalid. Feel free to reopen it, if you're still\nthinking, it's a bug.\n\nThanks for using Apache!"}]