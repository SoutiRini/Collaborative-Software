[{"attachment_id": null, "tags": [], "creator": "mhilpert@gmx.de", "is_private": false, "count": 0, "id": 59155, "time": "2004-06-12T21:18:40Z", "bug_id": 29542, "creation_time": "2004-06-12T21:18:40Z", "text": "I have the following target:\n\n    <target name=\"docs\" depends=\"init\" description=\"data files\">\n        <zip destfile=\"${backup}/docs.zip\">\n            <zipfileset dir=\"/data/documents/Finanzen\" prefix=\"docs\">\n                <include name=\"Buchf\u00fchrung.swc\"/>\n                <include name=\"Ausgaben_2004.sxc\"/>\n            </zipfileset>\n        </zip>    \n    </target>\n\nbut the resulting zip file just contains \"Ausgaben_2004.sxc\" and not the file \nwith the umlaut \"\u00fc\" (Buchf\u00fchrung.swc). if i rename the file, it works, but i \ncan't rename all my file names that have umlauts ... :-("}, {"count": 1, "tags": [], "bug_id": 29542, "text": "Do you have something like \n<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\nin the beginning of your build script? \nIf character encoding is correct, try executing \"ant -v ...\" \nto see debug output.", "id": 59157, "time": "2004-06-12T22:09:22Z", "creator": "alexeys@inventigo.com", "creation_time": "2004-06-12T22:09:22Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "mhilpert@gmx.de", "text": "yes, without this line, i get get an encoding error.", "id": 59158, "time": "2004-06-12T22:38:07Z", "bug_id": 29542, "creation_time": "2004-06-12T22:38:07Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 29542, "attachment_id": null, "is_private": false, "id": 59159, "time": "2004-06-13T02:01:58Z", "creator": "alexeys@inventigo.com", "creation_time": "2004-06-13T02:01:58Z", "text": "You need to have a correct encoding specified. UTF-8 is the default XML encoding\nand it is better to use it, if you have an editor that can edit UTF-8 files. For\nexample UltraEdit can do that.\n\nIn the worst case you can replace non-ASCII characters with '*'. It is a little bit dangerous, but usually it works fine."}, {"count": 4, "tags": [], "bug_id": 29542, "is_private": false, "text": "iso-8859-1 is standard western european encoding that also supports umlauts. so \nthis encoding is good enough. other than that: why should i care about \n\"encodings\"? a few years ago, editing/saving text files were easier - the user \nshouldn't have to know about how the file is saved (encoding ...). UltraEdit: i \nam on linux ...", "id": 59161, "time": "2004-06-13T12:51:50Z", "creator": "mhilpert@gmx.de", "creation_time": "2004-06-13T12:51:50Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 29542, "attachment_id": null, "is_private": false, "id": 59186, "time": "2004-06-14T11:37:19Z", "creator": "bodewig@apache.org", "creation_time": "2004-06-14T11:37:19Z", "text": "It's quite likely that your ZIP file itself uses a different encoding for file\nnames than Ant assumes, see the encoding attribute of the zip task.\n\nAnt will assume the encoding to be your platform's default encoding, which depends\non the Linux distro in question.  For example my (German) RedHat 7.3 machine uses\niso-8859-15 while older distros used iso-8859-1 and newer would use UTF-8.\n\nIt is hard to know the correct encoding without actually looking into the binary\nfile.  Running \"strings\" on it may give a clue.  How did you create the archive?\n"}, {"count": 6, "tags": [], "bug_id": 29542, "attachment_id": null, "is_private": false, "id": 59217, "time": "2004-06-15T11:21:18Z", "creator": "mhilpert@gmx.de", "creation_time": "2004-06-15T11:21:18Z", "text": "see the first posting above to see the ant target how the zip archive is \ncreated. \n\nwhat do you suggest to use as an encoding? is UTF-8 better than iso? does it \ncontain all iso charcters and more?"}, {"count": 7, "tags": [], "bug_id": 29542, "attachment_id": null, "text": "The way you create your ZIP means that your platform's native encoding is used,\nwhatever that may be.  See the system property file.encoding.\n\nI just now realized that you aren't actually reading from a ZIP file but directly\nfrom the file system when your patterns don't match, so this isn't really related\nto the encoding inside of archives at all - and should happen with a \"plain\"\nfileset as well.\n\nCan you do something like new File(\"/data/documents/Finanzen/Buchf\u00fchrung.swc\") in\na Java program of yours and actually read from that file?\n\nCan you do a File.list() on /data/documents/Finanzen/ inside a Java program of\nyours and tell us what Java thinks the file name should be?", "id": 59968, "time": "2004-06-28T07:59:02Z", "creator": "bodewig@apache.org", "creation_time": "2004-06-28T07:59:02Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 29542, "text": "Oh, and UTF-8 is one way to encode the whole bunch of Unicode supported by Java,\nwhich is a superset of iso-8859-* and more.", "id": 59969, "time": "2004-06-28T08:00:16Z", "creator": "bodewig@apache.org", "creation_time": "2004-06-28T08:00:16Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "count": 9, "id": 63974, "time": "2004-09-21T12:27:15Z", "bug_id": 29542, "creation_time": "2004-09-21T12:27:15Z", "text": "ping"}, {"count": 10, "tags": [], "bug_id": 29542, "text": "Well, i just write this ANT target and don't write any Java program. Just check \nit out yourself and try this target with a fil that has Umlauts (like \u00e4, \u00f6 \u00fc) in \ntheir names).", "id": 63995, "time": "2004-09-21T18:18:42Z", "creator": "mhilpert@gmx.de", "creation_time": "2004-09-21T18:18:42Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "text": "Since you're the one having the problem, it should be easiest for you to \nduplicate.  What happens when you compile and run:\n\npublic class Open29542 {\n  public static void main(String[] args) throws Exception {\n    new java.io.FileInputStream(\"/data/documents/Finanzen/Buchf\u00fchrung.swc\");\n  }\n}\n\nWhat about this:\n\npublic class List29542 {\n  public static void main(String[] args) {\n    String[] f = new java.io.File(\"/data/documents/Finanzen/Buchf\u00fchrung.swc\")\n                  .list();\n    for (int i = 0; i < f.length; i++) {\n      System.out.println(f[i]);\n    }\n  }\n}\n\nThere are your Java programs that could help resolve this...\n", "is_private": false, "bug_id": 29542, "id": 63997, "time": "2004-09-21T18:31:01Z", "creator": "mbenson@apache.org", "creation_time": "2004-09-21T18:31:01Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 29542, "text": "Hello? Am i in the wrong movie? I don't write Java programms, I write ANT \nscripts ...", "id": 64064, "time": "2004-09-22T19:39:18Z", "creator": "mhilpert@gmx.de", "creation_time": "2004-09-22T19:39:18Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 29542, "is_private": false, "text": "You mean buildfiles.  ;)  (I often say scripts too.)  Many of Ant's users are \ndevelopers.  I would guess that more often than not non-developer users of Ant \nhave gotten working buildfiles from developers.  Do you have any that might \ngive you a hand?", "id": 64078, "time": "2004-09-22T22:40:28Z", "creator": "mbenson@apache.org", "creation_time": "2004-09-22T22:40:28Z", "attachment_id": null}, {"count": 14, "tags": [], "creator": "bodewig@apache.org", "text": "M.H., could you please execute this build file\n\n<project default=\"echo\">\n  <target name=\"echo\">\n    <echo>${file.encoding}</echo>\n  </target>\n</project>\n", "id": 66542, "time": "2004-11-05T16:17:57Z", "bug_id": 29542, "creation_time": "2004-11-05T16:17:57Z", "is_private": false, "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 29542, "is_private": false, "text": "Yup, here is the result:\n\n----------------------\ndentaku:/tmp> ant -f anttest.xml\nBuildfile: anttest.xml\n\necho:\n     [echo] ISO-8859-15\n\nBUILD SUCCESSFUL\nTotal time: 1 second\ndentaku:/tmp>\n---------------------------\n", "id": 66562, "time": "2004-11-06T12:40:01Z", "creator": "mhilpert@gmx.de", "creation_time": "2004-11-06T12:40:01Z", "attachment_id": null}, {"count": 16, "tags": [], "text": "Which is not too different from my box (ISO-8859-1) to explain why it works for me.\n\nHmm,\n\ncan you run you buildfile with ant -debug (the one that skips the Umlaut-file in\n<zip>) and attach the full output here?  Feel free to send it to me directly if\nyou are worried that some contents may be too confidential to publish here.", "is_private": false, "bug_id": 29542, "id": 66783, "time": "2004-11-12T09:32:07Z", "creator": "bodewig@apache.org", "creation_time": "2004-11-12T09:32:07Z", "attachment_id": null}]