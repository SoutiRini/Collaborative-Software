[{"count": 0, "tags": [], "bug_id": 11753, "attachment_id": null, "text": "Currently the startup script (\"startup.sh\" or \"catalina.sh startup\")\nlaunches Tomcat in a background process, then immediately exits.  It\nwould be desirable if there were a mode in which it delayed exiting\nuntil all webapps were initialized, running, and able to accept HTTP\nrequests.\n\nBonus points if it provided feedback during the startup process,\nannouncing log mesages like \"Starting context foo\" back to the caller\nuntil all contexts are ready.\n\nEven more bonus points if it prints an error and returns a nonzero\nexit status if the server could not start for some reason.\n(e.g. \"java.net.BindException: Address already in use:8080\" or\n\"StandardServer.await: create[8005]: java.net.BindException: Address\nalready in use\", both of which mean that a prior instance of Tomcat\nhas not been completely shut down)\n\nMotivation: I have been using Tomcat in a testing mode, where I launch\nTomcat, run my tests, and then shut Tomcat down.  If the tests\nimmediately start sending requests to Tomcat, I often get errors\n(which I will summarize in a separate bug report) that are due to the\nwebapp or server not being completely started up.  A workaround is to\nuse a delay between Tomcat startup and running the tests.\nUnfortunately, the amount of time necessary for the delay is variable\n(from 10 to 45 seconds depending on load and CPU speed), and since I\nrun these tests frequently, every second counts.\n\nI have been off the Tomcat team for a while, but if this feature is\ndesirable, and a current developer wants to point me in the right\ndirection, please let me know and I'll see if I can take a stab at\nwriting a patch myself.", "id": 21140, "time": "2002-08-15T23:37:59Z", "creator": "alex@apache.org", "creation_time": "2002-08-15T23:37:59Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 11753, "is_private": false, "text": "*** Bug 11754 has been marked as a duplicate of this bug. ***", "id": 21155, "time": "2002-08-16T09:05:59Z", "creator": "remm@apache.org", "creation_time": "2002-08-16T09:05:59Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "I keep getting this error.\n\n----- Root Cause -----\njava.net.BindException: Address already in use:8080\n\tat org.apache.catalina.connector.http.HttpConnector.open\n(HttpConnector.java:950)\n\tat org.apache.catalina.connector.http.HttpConnector.initialize\n(HttpConnector.java:1128)\n\tat org.apache.catalina.core.StandardService.initialize\n(StandardService.java:454)\n\tat org.apache.catalina.core.StandardServer.initialize\n(StandardServer.java:553)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:780)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:681)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:179)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:243)\nStandardServer.await: create[8005]: java.net.BindException: Address already in \nuse\njava.net.BindException: Address already in use\n\tat java.net.PlainSocketImpl.socketBind(Native Method)\n\tat java.net.PlainSocketImpl.bind(PlainSocketImpl.java:331)\n\tat java.net.ServerSocket.bind(ServerSocket.java:309)\n\tat java.net.ServerSocket.<init>(ServerSocket.java:183)\n\tat org.apache.catalina.core.StandardServer.await\n(StandardServer.java:277)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:794)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:681)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:179)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:243)\n\tat oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:169)\n\tat oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:208)\n\tat oracle.jdbc.ttc7.Oopen.receive(Oopen.java:118)\n\tat oracle.jdbc.ttc7.TTC7Protocol.open(TTC7Protocol.java:466)\n\tat oracle.jdbc.driver.OracleStatement.<init>(OracleStatement.java:441)\n\tat oracle.jdbc.driver.OracleStatement.<init>(OracleStatement.java:460)\n\tat oracle.jdbc.driver.OraclePreparedStatement.<init>\n(OraclePreparedStatement.java:185)\n\tat oracle.jdbc.driver.OraclePreparedStatement.<init>\n(OraclePreparedStatement.java:168)\n\tat oracle.jdbc.driver.OracleConnection.privatePrepareStatement\n(OracleConnection.java:614)\n\tat oracle.jdbc.driver.OracleConnection.prepareStatement\n(OracleConnection.java:492)\n\tat \ncom.conversal.infoapps.util.db.dbconnection.dbConnection.prepareStatement\n(dbConnection.java:127)\n\tat \ncom.conversal.infoapps.chsrc.model.oracleagent.entitiessql.COAddHtmlSQL.createHt\nmlObject(COAddHtmlSQL.java:72)\n\tat \ncom.conversal.infoapps.chsrc.model.oracleagent.ChannelSourceOracleAgent.createHt\nmlObject(ChannelSourceOracleAgent.java:606)\n\tat com.conversal.infoapps.chsrc.model.ChannelSourceApi.createHtmlObject\n(ChannelSourceApi.java:672)\n\tat \ncom.conversal.infoapps.chsrc.controller.actions.COAddHtmlConfirmationAction.perf\norm(COAddHtmlConfirmationAction.java:44)\n\tat org.apache.struts.action.ActionServlet.processActionPerform\n(ActionServlet.java:1787)\n\tat org.apache.struts.action.ActionServlet.process\n(ActionServlet.java:1586)\n\tat org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:492)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1012)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1107)\n\tat java.lang.Thread.run(Thread.java:536)\nStopping service Tomcat-Standalone\nsbsdfsdfsf\nsbsdfsdfsf\nsbsdfsdfsf\nStopping service Tomcat-Apache\n\n\nCould you please help me. My email address is pshroff@annetsite.com", "is_private": false, "id": 28142, "creator": "pshroff@annetsite.com", "time": "2002-12-21T09:29:38Z", "bug_id": 11753, "creation_time": "2002-12-21T09:29:38Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 11753, "is_private": false, "text": "(This bug is somewhat related to bug 21993, \"startup.sh needs nohup\".)", "id": 41776, "time": "2003-07-30T14:14:09Z", "creator": "akrueger@tes.zv.mmo.de", "creation_time": "2003-07-30T14:14:09Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 11753, "is_private": false, "text": "The statrup scripts don;t have the ability to know when tomcat is done starting\nup. If this functionality is really needed - embedding tomcat would be the way\nto go. Otherwise this is an enhancement request.(Which would be ignored without\nan corresponding patch)", "id": 51880, "time": "2004-02-07T15:07:18Z", "creator": "funkman@joedog.org", "creation_time": "2004-02-07T15:07:18Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "*** Bug 21993 has been marked as a duplicate of this bug. ***", "attachment_id": null, "id": 59356, "creator": "markt@apache.org", "time": "2004-06-16T19:46:20Z", "bug_id": 11753, "creation_time": "2004-06-16T19:46:20Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 11753, "attachment_id": null, "text": "This is available in later tomcat versions: see catalina.sh run versus start \noptions.", "id": 59359, "time": "2004-06-16T19:56:59Z", "creator": "yoavs@computer.org", "creation_time": "2004-06-16T19:56:59Z", "is_private": false}]