[{"count": 0, "tags": [], "bug_id": 37636, "text": "In CVS 1.12.12 the command \"cvs log\" uses \"-\" as date separator (e.g.\n2005-10-02). Other CVS versions use \"/\" as separator (e.g. 2005/10/02). Ant\nChangeLogParser does not understand the \"-\" format and throws a\nNullPointerException in java.util.Date#after().\n\nThe following patch fixes the problem:\n\n\n--- ChangeLogParser.java.1\t2005-06-02 15:20:00.000000000 +0200\n+++ ChangeLogParser.java.2\t2005-11-25 10:21:56.000000000 +0100\n@@ -36,12 +36,15 @@\n     private static final int GET_PREVIOUS_REV = 5;\n \n     /** input format for dates read in from cvs log */\n-    private static final SimpleDateFormat c_inputDate\n-        = new SimpleDateFormat(\"yyyy/MM/dd HH:mm:ss\");\n+    private static final SimpleDateFormat[] c_inputDates = {\n+        new SimpleDateFormat(\"yyyy/MM/dd HH:mm:ss\"),\n+        new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\")\n+    };\n \n     static {\n         TimeZone utc = TimeZone.getTimeZone(\"UTC\");\n-        c_inputDate.setTimeZone(utc);\n+        for (int i = 0; i < c_inputDates.length; i++)\n+            c_inputDates[i].setTimeZone(utc);\n     }\n \n     //The following is data used while processing stdout of CVS command\n@@ -215,13 +218,14 @@\n      * @return the date object or null if unknown date format\n      */\n     private Date parseDate(final String date) {\n+      for (int i = 0; i < c_inputDates.length; i++) {\n         try {\n-            return c_inputDate.parse(date);\n+            return c_inputDates[i].parse(date);\n         } catch (ParseException e) {\n-            //final String message = REZ.getString( \"changelog.bat-date.error\",\ndate );\n-            //getContext().error( message );\n-            return null;\n+          // ignore\n         }\n+      }\n+      return null;\n     }\n \n     /**", "id": 82862, "time": "2005-11-25T10:56:19Z", "creator": "av@tonbeller.com", "creation_time": "2005-11-25T10:56:19Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "sbailliez@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of 30962 ***", "count": 1, "id": 82863, "time": "2005-11-25T11:24:27Z", "bug_id": 37636, "creation_time": "2005-11-25T11:24:27Z", "is_private": false}]