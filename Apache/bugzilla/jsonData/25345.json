[{"count": 0, "tags": [], "bug_id": 25345, "attachment_id": null, "is_private": false, "id": 48702, "time": "2003-12-08T23:18:18Z", "creator": "jswap@yahoo.com", "creation_time": "2003-12-08T23:18:18Z", "text": "The jspc tag no longer works with the version of jasper that comes bundled with \ntomcat v5.0.16 (as opposed to tomcat v4.1.29, which works).  The problem is \nthat this newer version of jasper has changed the \"verbose\" command-line option \nso it no longer accepts an optional number.  Because the jspc tag passes in a \nzero as the default value for the verbose param, the jspc action fails with the \nfollowing error:\nerror:org.apache.jasper.JasperException: Unrecognized option: -v0\n\nA quick fix would be to remove the default of zero."}, {"count": 1, "tags": [], "bug_id": 25345, "is_private": false, "text": "I got the same problem when using it with Sun jwsdp-1.3, Sun Java (build\n1.4.2-b28 and ant 1.5:\n\nvalidate-xml:\n[xmlvalidate] 1 file(s) have been successfully validated.\n\ncompile-jsp:\n     [jspc] Compiling 2 source files/home/josevnz/sourceforge/cvebrowser/test/jsp\n  [jasperc] error:org.apache.jasper.JasperException: Unrecognized option: -v0. \nUse -help for help.\n  [jasperc]     at org.apache.jasper.JspC.setArgs(JspC.java:306)\n  [jasperc]     at org.apache.jasper.JspC.main(JspC.java:230)\n\nMy jspc task:\n\n  <target name=\"compile-jsp\" description=\"Precompiles the JSP pages in order to\ncatch errors early, before deploying the XXXX web app.\" depends=\"validate-xml\">\n  \t<jspc srcdir=\"${web}\" destdir=\"${test}/jsp\" classpath=\"${path.classpath}\"\ncompiler=\"jasper41\">\n\t\t<exclude name=\"**/CVS\"/>\n\t\t<include name=\"**/*.jsp\" />\n  \t</jspc>\n  </target>\n\n", "id": 50694, "time": "2004-01-18T14:18:55Z", "creator": "josevnz@newbreak.com", "creation_time": "2004-01-18T14:18:55Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 25345, "attachment_id": null, "text": "Filed a bugrep w/ tomcat pointing out the regression, we can fix this in\nant1.6.1 but can do nothing for versions out there already (for obvious\nreasons). A fix in Japser would be preferable.", "id": 50735, "time": "2004-01-19T13:33:18Z", "creator": "stevel@apache.org", "creation_time": "2004-01-19T13:33:18Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 25345, "text": "When you guys plan to make the patch available? replacing ant with an improved\nversion is not that bad anyways :).", "count": 3, "id": 50758, "time": "2004-01-19T18:56:06Z", "creator": "josevnz@newbreak.com", "creation_time": "2004-01-19T18:56:06Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 25345, "text": "Well, I filed a bugrep w/ tomcat and they said, roughly, 'stop it'.\n\nTomcat 5.x apparently comes with its own <jspc> task, that is tightly coupled to\ntomcat, supported, may do better dependency checking, etc. etc. This is good as\ntrying to track changes in tomcat in the Jspc task was very painful.\n\nSo if you want to use the 5.x codebase, I would try using the jspc task that\ncomes with it. I havent had a play with it myself, but will now. \n\n1.6.1 will be coming out shortly, btw", "count": 4, "id": 50802, "time": "2004-01-20T09:54:51Z", "creator": "stevel@apache.org", "creation_time": "2004-01-20T09:54:51Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 25345, "attachment_id": null, "text": "The Tomcat team have added back the -v setter, so future versions may work. I\nsay may as there are other changes that can break things.\n\nTherefore I intend to document that the Ant-supplied version of <jspc> is only\nfor the 4.x version of tomcat; for later versions you should use Tomcat's own\ntask. This will make life a lot simpler.", "id": 50891, "time": "2004-01-21T15:58:17Z", "creator": "stevel@apache.org", "creation_time": "2004-01-21T15:58:17Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 25345, "text": "> for later versions you should use Tomcat's own task.\n\nExcept that the Tomcat 5 JspC, when invoked as an Ant task, does not support\nfilesets for an explicit list of files to compile. It only supports compiling an\nentire directory.\n\nYou *have* to invoke it with <java fork=\"true\" .../> to compile files\nselectively, which is a big step back..", "count": 6, "id": 51744, "time": "2004-02-04T22:45:38Z", "creator": "shankarunni@netscape.net", "creation_time": "2004-02-04T22:45:38Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 25345, "text": "That is something to take up with the Tomcat team; it should not be too hard to\nadd it to their task. \n\nThe problem is, there is too high a rate-of-change in the tomcat Jasperc\nbehaviour (JSP->java file mapping, command options, error codes) and so many\nother side issues that it is best if the compiler task lives with that team\n-that ensures it is always in sync with the relevant release of the compiler. As\nthey release point releases much more frequently than ant does, this is important.\n\nI might have a look at their task to see what can be done to take the best bits\nfrom our tasks.", "count": 7, "id": 51755, "time": "2004-02-05T09:42:58Z", "creator": "stevel@apache.org", "creation_time": "2004-02-05T09:42:58Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 25345, "text": "*** Bug 27441 has been marked as a duplicate of this bug. ***", "count": 8, "id": 54104, "time": "2004-03-16T20:14:45Z", "creator": "nathanc@tni.com", "creation_time": "2004-03-16T20:14:45Z", "is_private": false}, {"count": 9, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "*** Bug 27923 has been marked as a duplicate of this bug. ***", "id": 59975, "time": "2004-06-28T08:21:49Z", "bug_id": 25345, "creation_time": "2004-06-28T08:21:49Z", "is_private": false}, {"count": 10, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 59976, "time": "2004-06-28T08:24:03Z", "bug_id": 25345, "creation_time": "2004-06-28T08:24:03Z", "is_private": false, "text": "Here is my plan:\n\n* I'll look into detecting Tomcat 5.x and disable -v0 - if I don't find an easy way\n  to detect 5.x, I'll resort to an attribute that will disable -v0 completely.\n\n* <jspc> for Jasper will get deprecated in favor of Tomcat's version.\n"}, {"attachment_id": null, "tags": [], "bug_id": 25345, "text": "I've implemented a work-around.\n\nIf anybody of you could please try a hand-crafted version of Ant form CVS HEAD and\nconfirm that it works now (I don't really use the task, so I have no proper\nmeans to check it), that would be great.\n\nAlternatively you can grab http://cvs.apache.org/~bodewig/ant-nodeps.jar and use\nthis one (please keep a backup of your own ant-nodeps.jar around) - this may\nintroduce problems with other optional tasks, though.\n\nI won't close this report until it is confirmed as fixed.", "count": 11, "id": 59978, "time": "2004-06-28T08:56:28Z", "creator": "bodewig@apache.org", "creation_time": "2004-06-28T08:56:28Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 25345, "is_private": false, "text": "I assume that it works in 1.6.2.", "id": 64412, "time": "2004-09-30T13:22:38Z", "creator": "bodewig@apache.org", "creation_time": "2004-09-30T13:22:38Z", "attachment_id": null}]