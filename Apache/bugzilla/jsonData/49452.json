[{"count": 0, "tags": [], "bug_id": 49452, "text": "We use FOP to generate PDF reports. On one machine it started to fail with the following error with no apparent reason. It seems this is an intermittent problem as it did work before without code change. Also the same code runs fine on other machines. \n\nWe will restart the machine soon and see if it keeps appearing on this one or if it really is gone again after restarting.\n\nI am attaching the XSL-FO that is used here, but generating this on another machine works fine so it doesn't seem to be the cause.\n\nCaused by: javax.xml.transform.TransformerException: java.lang.NullPointerException\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:717)\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:313)\nat com.dynatrace.diagnostics.report.velocity.VelFopProcessor.merge(VelFopProcessor.java:136)\nat com.dynatrace.diagnostics.report.velocity.VelFOPReportRenderer.renderLayoutComponents(VelFOPReportRenderer.java:70)\n... 40 more\nCaused by: java.lang.NullPointerException\nat org.apache.fop.fo.properties.LineHeightPropertyMaker.make(LineHeightPropertyMaker.java:57)\nat org.apache.fop.fo.properties.LineHeightPropertyMaker.compute(LineHeightPropertyMaker.java:75)\nat org.apache.fop.fo.properties.PropertyMaker.findProperty(PropertyMaker.java:267)\nat org.apache.fop.fo.properties.PropertyMaker.get(PropertyMaker.java:296)\nat org.apache.fop.fo.properties.CompoundPropertyMaker.get(CompoundPropertyMaker.java:145)\nat org.apache.fop.fo.PropertyList.get(PropertyList.java:176)\nat org.apache.fop.fo.StaticPropertyList.get(StaticPropertyList.java:72)\nat org.apache.fop.fo.PropertyList.get(PropertyList.java:156)\nat org.apache.fop.fo.flow.Block.bind(Block.java:120)\nat org.apache.fop.fo.FObj.processNode(FObj.java:126)\nat org.apache.fop.fo.FOTreeBuilder$MainFOHandler.startElement(FOTreeBuilder.java:286)\nat org.apache.fop.fo.FOTreeBuilder.startElement(FOTreeBuilder.java:163)\nat com.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.closeStartTag(ToXMLSAXHandler.java:204)\nat com.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.characters(ToXMLSAXHandler.java:524)\nat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.characters(AbstractSAXParser.java:538)\nat com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:463)\nat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:807)\nat com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)\nat com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:107)\nat com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transformIdentity(TransformerImpl.java:637)\nat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:708)\n... 43 more", "id": 137696, "time": "2010-06-17T03:45:45Z", "creator": "dominik.stadler@gmx.at", "creation_time": "2010-06-17T03:45:45Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 49452, "text": "Created attachment 25601\nSmal XSL-FO file which triggers this on one machine, but likely the problem is intermittent", "id": 137697, "time": "2010-06-17T03:53:06Z", "creator": "dominik.stadler@gmx.at", "creation_time": "2010-06-17T03:53:06Z", "is_private": false, "attachment_id": 25601}, {"count": 2, "tags": [], "bug_id": 49452, "attachment_id": 25602, "id": 137698, "time": "2010-06-17T07:27:16Z", "creator": "dominik.stadler@gmx.at", "creation_time": "2010-06-17T07:27:16Z", "is_private": false, "text": "Created attachment 25602\nScreenshot of analysis with our production analysis tool\n\nThis shows that the LineHeightPropertyMaker is called with a property of type \"SpaceProperty\", which does not work as LenghtProperty.Maker.convertProperty() does not handle SpaceProperties and always returns null in this case.\n\nSo the question is why is the combination of LineHeightPropertyMaker and SpaceProperty possible in this case?\n\nOr should LengthProperty.convertProperty() handle SpaceProperty as well?"}, {"count": 3, "tags": [], "bug_id": 49452, "attachment_id": 25636, "id": 137864, "time": "2010-06-24T03:19:17Z", "creator": "dominik.stadler@gmx.at", "creation_time": "2010-06-24T03:19:17Z", "is_private": false, "text": "Created attachment 25636\nDebug view of when the problem happens with very strange implications"}, {"count": 4, "tags": [], "bug_id": 49452, "text": "After a lot of investigation I found that this is related to the following things:\n- JDK 1.6.0 patch 14 64-bit\n- JDK Flag -XX:+UseCompressedOops \n\nIt seems the UseCompressedOops flag has a bug in patchlevel 14, when using later patchlevels, e.g. 20, it does not occur any more.", "id": 137973, "time": "2010-06-29T07:27:06Z", "creator": "dominik.stadler@gmx.at", "creation_time": "2010-06-29T07:27:06Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 49452, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155576, "time": "2012-04-01T06:28:30Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:28:30Z", "is_private": false, "attachment_id": null}]