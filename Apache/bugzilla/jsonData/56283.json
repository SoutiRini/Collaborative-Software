[{"count": 0, "tags": [], "creator": "knst.kolinko@gmail.com", "is_private": false, "text": "(Filing an already fixed issue, for better tracking).\n\nAdd support for Java 8 for JSP compilation in Tomcat. Allow to use \"1.8\" as the value for compilerSourceVM, compilerTargetVM options of JspServlet.\n\nImplementing this feature means that Eclipse JDT compiler bundled with Tomcat have to be updated to a later version (beyond the 4.3.1 that we are using today).\n\nFrom [1]:\n[quote]\n\ufeffEclipse support for Java\u2122 8: Starting with I20140318-0830 all our Luna (4.4) builds contain the Eclipse support for Java\u2122 8. For Kepler SR2 (4.3.2) a feature patch is available (P20140317-1600).\n[/quote]\n\nAs of now, the latest builds of Eclipse are [1]:\n1) 4.3.2  - 21 Feb 2014\n2) 4.4M6  - 6 March 2014\n3) I20140318-0830 - 18 Mar 2014  (\"I\": an integration build)\n4) N20140318-2000 - 18 Mar 2014  (\"N\": a nightly build)\n5) P20140317-1600 - 17 Mar 2014  (Patch build for 4.3.2) -> [2]\n\n[2] \"Eclipse 4.3.2 Patch Build: P20140317-1600\"\nExplains what this patch build is, and provides download links.\n\n[3] JDT/Eclipse Java 8 Support For Kepler\n(A wiki page).\n\nI think it s bit unfortunate that the build number is \"P20140317-1600\", without any explicit mention of \"4.3\" branch in the number, but that is how they did it.\n\n\n[1] http://download.eclipse.org/eclipse/downloads/\n[2] http://download.eclipse.org/eclipse/downloads/drops4/P20140317-1600/\n[3] https://wiki.eclipse.org/JDT/Eclipse_Java_8_Support_For_Kepler", "id": 173934, "time": "2014-03-19T12:30:55Z", "bug_id": 56283, "creation_time": "2014-03-19T12:30:55Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "knst.kolinko@gmail.com", "text": "This was implemented in Tomcat 8 by r1579174 and Tomcat 7 by r1579176 and will be in 8.0.4, 7.0.53. Proposed for Tomcat 6.", "id": 173935, "attachment_id": null, "bug_id": 56283, "creation_time": "2014-03-19T12:35:01Z", "time": "2014-03-19T12:35:01Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 56283, "attachment_id": null, "id": 174281, "time": "2014-04-04T18:29:03Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-04-04T18:29:03Z", "is_private": false, "text": "Note 1.\n\nTechnically CompilerOptions.VERSION_1_8 is a String constant \"1.8\", so it will be inlined at compile time.\n\nAt runtime Tomcat/Jasper will be compatible with any other version of ECJ 4.3.x, e.g. 4.3.1.\n\nNote 2.\n\nAll 547 classes in ecj-P20140317-1600.jar have format version 50.0 (Java 1.6).\nAs such, this jar cannot be used to build Tomcat 6.\n\nFor historical record, I applied the change to Tomcat 6 in r1584800 but had to revert it right away in r1584806."}, {"count": 3, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": 31476, "is_private": false, "id": 174282, "time": "2014-04-04T19:51:25Z", "bug_id": 56283, "creation_time": "2014-04-04T19:51:25Z", "text": "Created attachment 31476\n2014-04-04_56283_tc6_v2.patch\n\nPatch for Tomcat 6:\nAdd support for running Tomcat 6 with ecj-P20140317-1600.jar (as drop-in replacement for ecj-4.3.1.jar). Add support for value \"1.8\" for the compilerSourceVM and compilerTargetVM options.\n\nNote that, per previous comments, ecj-P20140317-1600.jar can only be used when running with Java 6 or later. The \"1.8\" options make sense only when running with Java 8 (or later)."}, {"count": 4, "tags": [], "bug_id": 56283, "is_private": false, "id": 174424, "creation_time": "2014-04-09T15:50:41Z", "time": "2014-04-09T15:50:41Z", "creator": "markt@apache.org", "text": "Patch applied to 6.0.x for 6.0.40 onwards.", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 56283, "attachment_id": 31624, "text": "Created attachment 31624\nFailing JSP (doesn't compile with a Java 8 JDK and source/target version 1.6)\n\nThe version of ECJ supplied with 7.0.53 fails to compile JSP files that reference class files containing default methods under the following conditions:\n- compilerSourceVersion/compilerTargetVersion < 1.8\n- JRE_HOME >= jdk1.8.0\nAttachment has a minimal test case\n\nIt looks like it might be Eclipse bug 390889 which is fixed in 4.4M7\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id=390889", "id": 175239, "time": "2014-05-15T08:55:35Z", "creator": "robbie_usenet@yahoo.co.uk", "creation_time": "2014-05-15T08:55:35Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 56283, "attachment_id": null, "id": 175307, "time": "2014-05-19T10:00:55Z", "creator": "robbie_usenet@yahoo.co.uk", "creation_time": "2014-05-19T10:00:55Z", "is_private": false, "text": "Verified fixed when replacing ecj-P20140317-1600.jar with ecj-4.4M7.jar from http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/S-4.4M7-201405010200/ecj-4.4M7.jar"}, {"count": 7, "tags": [], "bug_id": 56283, "attachment_id": null, "text": "(In reply to Robbie Gibson from comment #6)\n> Verified fixed when replacing ecj-P20140317-1600.jar with ecj-4.4M7.jar from\n> http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/\n> S-4.4M7-201405010200/ecj-4.4M7.jar\n\nThis is a separate issue and should be in a separate bugzilla entry.", "id": 175308, "time": "2014-05-19T10:02:46Z", "creator": "markt@apache.org", "creation_time": "2014-05-19T10:02:46Z", "is_private": false}, {"count": 8, "tags": [], "creator": "robbie_usenet@yahoo.co.uk", "is_private": false, "text": "Done, sorry for the confusion.", "id": 175311, "time": "2014-05-19T10:26:46Z", "bug_id": 56283, "creation_time": "2014-05-19T10:26:46Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 56283, "text": "for reference bug 56543", "id": 175312, "time": "2014-05-19T10:29:30Z", "creator": "violetagg@apache.org", "creation_time": "2014-05-19T10:29:30Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "creator": "knst.kolinko@gmail.com", "is_private": false, "id": 175784, "attachment_id": null, "bug_id": 56283, "creation_time": "2014-06-12T09:33:19Z", "time": "2014-06-12T09:33:19Z", "text": "*** Bug 56613 has been marked as a duplicate of this bug. ***"}]