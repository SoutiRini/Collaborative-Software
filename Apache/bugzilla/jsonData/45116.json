[{"count": 0, "tags": [], "bug_id": 45116, "text": "BUG#1\nFile Name: /scrlib/apr/threadproc/unix/proc.c\nCorrect Code: \nFunction Nam: apr_procattr_child_out_set()\n\n   129: APR_DECLARE(apr_status_t) apr_procattr_child_out_set(\u2026)\n   142:         rv = apr_file_dup2(attr->parent_out, parent_out, attr->pool);\n   144:     return rv;\n   145: }\n\nFunction Nam: apr_procattr_child_err_set()\n\n   148: APR_DECLARE(apr_status_t) apr_procattr_child_err_set(\u2026) \n   160:     if (parent_err != NULL && rv == APR_SUCCESS)\n   161:         rv = apr_file_dup2(attr->parent_err, parent_err, attr->pool);\n   163:     return rv;\n   164: }\n\nFile Name: /server/log.c\nFunction Nam: log_child()\nBuggy Code: \n\n 297:   rc = apr_procattr_child_out_set(procattr, outfile, NULL);\n 298:   if (dummy_stderr)\n 299:       rc = apr_procattr_child_err_set(procattr, outfile, NULL);\n 300:   else if ((rc = apr_file_open_stderr(&errfile, p)) == APR_SUCCESS)\n 301:       rc = apr_procattr_child_err_set(procattr, errfile, NULL);\n 302: }\n\n        //// if (rc!=APR_SUCCESS) is missed here\n\n 304: rc = apr_proc_create(procnew, pname, (const char * const *)args,\n 305:                      NULL, procattr, p);\n\n\nDescription: An error occurs if apr_file_dup2() outputs \u201c!APR_SUCCESS\u201d. The function apr_procattr_child_out_set() and apr_procattr_child_err_set() return the value outputted by apr_file_dup2() directly. Thus, an error occurs also if apr_procattr_child_out_set() or apr_procattr_child_err_set() returns \u201c!APR_SUCCESS\u201d. However, the outputs of apr_procattr_child_out_set() and apr_procattr_child_err_set() are not checked in the above code. \n\n=====================================================================\n\n\n\nBUG#2\nCategory: 1 (99)\nFile Name: /scrlib/apr/threadproc/unix/proc.c\nCorrect Code: \nFunction Nam: apr_procattr_child_out_set()\n\n   129: APR_DECLARE(apr_status_t) apr_procattr_child_out_set(\u2026)\n   142:         rv = apr_file_dup2(attr->parent_out, parent_out, attr->pool);\n   144:     return rv;\n   145: }\n\nFunction Nam: apr_procattr_child_err_set()\n\n   148: APR_DECLARE(apr_status_t) apr_procattr_child_err_set(\u2026) \n   160:     if (parent_err != NULL && rv == APR_SUCCESS)\n   161:         rv = apr_file_dup2(attr->parent_err, parent_err, attr->pool);\n   163:     return rv;\n   164: }\n\nFile Name: /server/log.c\nFunction Nam: piped_log_spawn()\nBuggy Code: \n\n   906:     if ((status = apr_file_open_stdout(&outfile, pl->p)) == APR_SUCCESS)\n   907:         status = apr_procattr_child_out_set(procattr, outfile, NULL);\n   908:     if ((status = apr_file_open_stderr(&errfile, pl->p)) == APR_SUCCESS)\n   909:         status = apr_procattr_child_err_set(procattr, errfile, NULL);\n\n\nDescription: An error occurs if apr_file_dup2() outputs \u201c!APR_SUCCESS\u201d. The function apr_procattr_child_out_set() and apr_procattr_child_err_set() return the value outputted by apr_file_dup2() directly. Thus, an error occurs also if apr_procattr_child_out_set() or apr_procattr_child_err_set() returns \u201c!APR_SUCCESS\u201d. However, the outputs of apr_procattr_child_out_set() and apr_procattr_child_err_set() are not checked in the above code. \n\n=====================================================================", "id": 117266, "time": "2008-06-02T14:21:35Z", "creator": "rxc92@case.edu", "creation_time": "2008-06-02T14:21:35Z", "is_private": false, "attachment_id": null}]