[{"count": 0, "tags": [], "bug_id": 844, "attachment_id": null, "is_private": false, "id": 984, "time": "2001-03-05T09:34:41Z", "creator": "cynic@mail.cz", "creation_time": "2001-03-05T09:34:41Z", "text": "I've got trouble trying to get Apache to start with \ntomcat/mod_jk. apache starts fine without mod_jk. \n\n\nthe error:\n==========\n[Mon Mar 05 18:22:24 2001] [emerg] Error while opening the workers\n\n\ntomcat started:\n===============\nD:\\usr\\local\\tomcat\\bin>startup\nStarting Tomcat in new window\nD:\\usr\\local\\tomcat\\bin>\n\n2001-03-05 18:17:59 - ContextXmlReader: Context config=$TOMCAT_HOME\\conf\\apps-\n127.0.0.1.xml\n2001-03-05 18:17:59 - ContextXmlReader: Context config=$TOMCAT_HOME\\conf\\apps-\nadmin.xml\n2001-03-05 18:17:59 - ContextXmlReader: Context config=$TOMCAT_HOME\\conf\\apps-\nexamples.xml\n2001-03-05 18:17:59 - AutoWebApp: Already loaded: DEFAULT:/admin\n2001-03-05 18:17:59 - AutoWebApp: Already loaded: DEFAULT:/examples\n2001-03-05 18:17:59 - AutoWebApp: Auto-Adding DEFAULT:/\n2001-03-05 18:17:59 - ContextManager: Adding  DEFAULT:/admin\n2001-03-05 18:17:59 - ContextManager: Adding  DEFAULT:/examples\n2001-03-05 18:17:59 - ContextManager: Adding  DEFAULT:/ROOT\n2001-03-05 18:17:59 - Http10Interceptor: Starting on 8080\n2001-03-05 18:17:59 - Ajp12Interceptor: Starting on 8007\n2001-03-05 18:17:59 - Ajp13Interceptor: Starting on 8009\n\n\napache started:\n===============\n[Mon Mar 05 18:22:24 2001] [emerg] Error while opening the workers\nNote the errors or messages above, and press the <ESC> key to exit.\nD:\\usr\\local\\apache>\n\n\nmod_jk.log:\n===========\n[jk_uri_worker_map.c (155)]: Into jk_uri_worker_map_t::uri_worker_map_alloc\n[jk_uri_worker_map.c (195)]: Into jk_uri_worker_map_t::uri_worker_map_open\n[jk_uri_worker_map.c (210)]: jk_uri_worker_map_t::uri_worker_map_open, rule map \nsize is 3\n[jk_uri_worker_map.c (255)]: Into jk_uri_worker_map_t::uri_worker_map_open, \nsuffix rule /.jsp=ajp12 was added\n[jk_uri_worker_map.c (266)]: Into jk_uri_worker_map_t::uri_worker_map_open, \nmatch rule /servlet/=ajp12 was added\n[jk_uri_worker_map.c (266)]: Into jk_uri_worker_map_t::uri_worker_map_open, \nmatch rule /examples/=ajp12 was added\n[jk_uri_worker_map.c (295)]: Into jk_uri_worker_map_t::uri_worker_map_open, \nthere are 3 rules\n[jk_uri_worker_map.c (316)]: jk_uri_worker_map_t::uri_worker_map_open, done\n\n\nthe rest of the relevant info follows, if it's insufficient, \nI'll be happy to feed you with more. \nBTW, I got the same error with just including mod_jk.conf-auto (tomcat-3.2.1)\nand default workers.properties.\n\nsetup:\n======\nNT 5 Pro SP1\nTomcat 3.2.1 (running fine)\nTomcat 3.3-dev (latest nightly build, standalone runs fine too)\nApache 1.3.20-dev (runs just fine without mod_jk)\n\nhttpd.conf (relevant stuff):\n============================\n\n*** tomcat-3.2.1:\n\n<VirtualHost *>\n    DocumentRoot /usr/local/tomcat/webapps/ROOT\n    ServerName ...\n    ...\n    <IFModule mod_jk.c>\n        JkWorkersFile /usr/local/tomcat/conf/workers.properties\n        JkLogFile logs/mod_jk.log\n        JkLogLevel warn\n        JkMount /*.jsp ajp12\n        JkMount /servlet/* ajp12\n        JkMount /examples/* ajp12\n    </IfModule>\n    ...\n</VirtualHost>\n\n*** tomcat-3.3-dev\n\n<VirtualHost *>\n    DocumentRoot /usr/local/tomcat/webapps/ROOT\n    ServerName ...\n    ...\n    <IFModule mod_jk.c>\n        JkWorkersFile /usr/local/tomcat/conf/jk/workers.properties\n        JkLogFile  logs/jk.log\n        JkLogLevel warn\n        JkMount /*.jsp ajp12\n        JkMount /servlet/* ajp12\n        JkMount /examples/* ajp12\n    </IfModule>\n    ...\n</VirtualHost>\n\n\nworkers.properties (complete file, I stripped it down to the bone):\n===================================================================\nworkers.tomcat_home=d:\\usr\\local\\tomcat\nworkers.java_home=d:\\usr\\local\\java\\jdk-1.3\nworker.list=ajp12\nworker.ajp12.port=8007\nworker.ajp12.host=localhost\nworker.ajp12.type=ajp12\n\nI tried with the default workers.properties too, no difference.\n\nenvironment:\n============\nJAVA_HOME=d:/usr/local/java/jdk-1.3\nPath=d:/usr/local/java/jdk-\n1.3/bin;d:/dev/perl/bin;C:\\orant\\bin;C:\\WINNT\\system32;C:\\WINNT;C:\\WINNT\\System3\n2\\Wbem;C:\\PROGRA~1\\ULTRAE~1;c:/jdk1.3/bin;C:\\PROGRA~1\n\\Tcl\\bin;c:\\Borland\\Bcc55;C:\\Program Files\\Intel\\edb32\\;C:\\Program \nFiles\\Intel\\compiler45\\bin;D:\\MSDEV\\Common\\Tools\\WinNT;D:\\MSDEV\\Common\\MSDev98\n\\Bin;D:\\MSDEV\\Common\\Tools;D:\\MSDEV\\VC98\\bin;C:\\Program Files\\Microsoft \nPlatform SDK\\Bin\\;C:\\Program Files\\Microsoft Platform \nSDK\\Bin\\WinNT;c:/usr/bin;D:/home\nTOMCAT_HOME=d:/usr/local/tomcat"}, {"count": 1, "text": "This bug report is bogus. The problem was I had JkWorkersFile in a VH block. \nWhat is actually broken is the documentation.", "creator": "cynic@mail.cz", "is_private": false, "id": 1285, "time": "2001-03-15T06:19:18Z", "bug_id": 844, "creation_time": "2001-03-15T06:19:18Z", "tags": [], "attachment_id": null}]