[{"attachment_id": null, "tags": [], "bug_id": 47092, "text": "We have several virtual hosts with a configuration that looks like this:\n\nNameVirtualHost *:80\n\n<VirtualHost _default_:80>\n    ServerName          server1234\n    DocumentRoot        /opt/coolstack/apache2/htdocs\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          offering1.mybank.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/offering1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          offering1.mabanque.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/offering1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          offering1.bank-banque-mine.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/offering1\n    UseCanonicalName Off\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          offering2.mybank.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/offering2\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          offering2.mabanque.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/offering2\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          offering2.bank-banque-mine.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/offering2\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          www2.app1.myg.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          www2.fapp1.myg.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          www.orgnadasavingsbonds.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          product1.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          www.produit1.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          obligationsdepargneducanada.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          www.app1.myg.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          app1.myg.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          www.fapp1.myg.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName          fapp1.myg.org\n    DocumentRoot        /opt/coolstack/apache2/htdocs/app1\n</VirtualHost>\n\nIt works fine 99% of the time.  The problem is that occasionally the user enters one host name (e.g., app1.myg.org) and he is sent to the wrong folder (e.g., /opt/coolstack/apache2/htdocs/offering2).\n\nWe are using Apache version 2.2.9.  The system is live so we need to fix this quickly.", "count": 0, "id": 126481, "time": "2009-04-24T06:38:06Z", "creator": "fred.maroun@eds.com", "creation_time": "2009-04-24T06:38:06Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 47092, "text": "You should simplify your config with ServerAlias, and provide logging that shows a problem between the the incoming Host: header ({Host}i)vs. %v/%V", "count": 1, "id": 126486, "time": "2009-04-24T08:26:37Z", "creator": "covener@gmail.com", "creation_time": "2009-04-24T08:26:37Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 47092, "is_private": false, "count": 2, "id": 126487, "time": "2009-04-24T08:30:11Z", "creator": "fred.maroun@eds.com", "creation_time": "2009-04-24T08:30:11Z", "text": "I do not understand what you are suggesting.  Could you please explain?"}, {"count": 3, "tags": [], "bug_id": 47092, "text": "Minimally show/log _something_ that shows the wrong virtualhost or documentroot is selected:\n\ne.g.:\n\nLogFormat \"%{Host}i %v %V %h %l %u %t \\\"%r\\\" %>s %b\" debug\n\nAnd update CustomLog directives to use the debug format.\n\nI don't know how to log/confirm the documentroot indepdendent of the vhost.", "id": 126488, "time": "2009-04-24T08:37:41Z", "creator": "covener@gmail.com", "creation_time": "2009-04-24T08:37:41Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "bug_id": 47092, "text": "I can't easily make changes because this is a live system.  Is this a known issue?", "id": 126489, "time": "2009-04-24T08:40:47Z", "creator": "fred.maroun@eds.com", "creation_time": "2009-04-24T08:40:47Z", "tags": [], "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 47092, "text": "No, perhaps you should discuss ways to capture some doc on the user support mailing list.", "id": 126492, "time": "2009-04-24T08:47:27Z", "creator": "covener@gmail.com", "creation_time": "2009-04-24T08:47:27Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 47092, "attachment_id": null, "text": "Please close this issue.  We found that the problem is due to a bug in APC, and it is not related to virtual hosts.  Sorry for this.", "id": 126546, "time": "2009-04-27T08:17:19Z", "creator": "fred.maroun@eds.com", "creation_time": "2009-04-27T08:17:19Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 47092, "is_private": false, "count": 7, "id": 126547, "time": "2009-04-27T08:21:10Z", "creator": "trawick@apache.org", "creation_time": "2009-04-27T08:21:10Z", "text": "Closing as RESOLVED/INVALID since the problem is expected to be in a PHP extension, and not httpd.\n\nIf you have specific information about the APC bug, plz update this bug in case it can help someone else."}]