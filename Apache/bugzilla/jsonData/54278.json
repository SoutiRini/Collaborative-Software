[{"count": 0, "tags": [], "bug_id": 54278, "attachment_id": null, "id": 164027, "time": "2012-12-11T12:58:44Z", "creator": "giles.westwood@gmail.com", "creation_time": "2012-12-11T12:58:44Z", "is_private": false, "text": "We had to created an extended class to handle this, to urlencode the quotes\n\n        public void addElement(StringBuffer buf, Date date, Request request,\n                Response response, long time) {\n            // CHANGED HERE            \n            String headerStr = request.getHeader(header);\n            if(headerStr != null){\n                headerStr = headerStr.replace(\"\\\"\", \"%22\");\n            }\n            buf.append(headerStr);\n        }\n\n\n    protected class RequestElement implements AccessLogElement {\n        public void addElement(StringBuffer buf, Date date, Request request,\n                Response response, long time) {\n            if (request != null) {\n                buf.append(request.getMethod());\n                buf.append(' ');\n                //CHANGED HERE\n                buf.append(request.getRequestURI().replace(\"\\\"\", \"%22\"));\n                if (request.getQueryString() != null) {\n                    buf.append('?');\n                    //CHANGED HERE\n                    buf.append(request.getQueryString().replace(\"\\\"\", \"%22\"));\n                }\n                buf.append(' ');\n                buf.append(request.getProtocol());\n            } else {\n                buf.append(\"- - \");\n            }\n        }\n    }\n\n    protected class ResponseHeaderElement implements AccessLogElement {\n        private String header;\n\n        public ResponseHeaderElement(String header) {\n            this.header = header;\n        }\n\n        public void addElement(StringBuffer buf, Date date, Request request, Response response, long time) {\n           if (null != response) {\n                String[] values = response.getHeaderValues(header);\n                if(values.length > 0) {\n                    for (int i = 0; i < values.length; i++) {\n                        String string = values[i];\n                        //CHANGED HERE\n                        buf.append(string.replace(\"\\\"\",\"%22\"));\n                        if(i+1<values.length)\n                            buf.append(\",\");\n                    }\n                    return ;\n                }\n            }\n            buf.append(\"-\");\n        }\n    }"}, {"count": 1, "tags": [], "bug_id": 54278, "text": "There is no such requirement in AccessLogValve and thus it is not a bug.\n\nIf you want to submit a patch, the rules are here:\nhttp://tomcat.apache.org/bugreport.html#How_to_submit_patches_and_enhancement_requests", "id": 164028, "time": "2012-12-11T14:17:36Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2012-12-11T14:17:36Z", "is_private": false, "attachment_id": null}]