[{"count": 0, "tags": [], "bug_id": 8659, "is_private": false, "text": "I've tried to include mod_gzip for httpd-2.0.xx.\nIt had debuging #define turned on by default, so i commented it out.  \nWhen i tried to fire httpd back up after recompiling i got \"Configuration\nFailed\" in the error log and it failed to start as well.\nI explored the problem a bit further and noticed it has some thing to do\nwith a log file fopen()ing. \nIf a certain function returns right in beginning, httpd wont start up.\nBut if the same function fopens a file, closes it back and returns\nright after that, httpd runs normally.  \n\nworking version: http://www.tgpsoftware.com/mod_gzip.c\nnonworking version: http://www.tgpsoftware.com/mod_gzip2.c\n\nthe only difference is in line# 374:  return;\n\nIt got me a bit confused. Can a module cause this?", "id": 15122, "time": "2002-04-30T14:11:03Z", "creator": "gw@tgpsoftware.com", "creation_time": "2002-04-30T14:11:03Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "text": "Your link http://www.tgpsoftware.com/mod_gzip2.c is invalid.\n\nPlease paste the offensive function (the non-working version, of course)\nso we can comment.", "id": 15123, "time": "2002-04-30T14:21:47Z", "bug_id": 8659, "creation_time": "2002-04-30T14:21:47Z", "is_private": false}, {"count": 2, "tags": [], "creator": "gw@tgpsoftware.com", "attachment_id": null, "is_private": false, "id": 15135, "time": "2002-04-30T14:56:09Z", "bug_id": 8659, "creation_time": "2002-04-30T14:56:09Z", "text": "We are in middle of a DNS update. URLs should work now. Sorry about that.\nHere is the code:\n\n--- snip ---\n\nvoid mod_gzip_printf( const char *fmt, ... )\n{\n\n int   l;\n char *p1;\n FILE *log;\n\n va_list ap;\n\n char logname[256];\n char log_line[4096];\n\n #ifdef WIN32\n long pid = GetCurrentProcessId();\n #else\n long pid = (long) getpid();\n #endif\n #ifdef WIN32\n sprintf( logname, \"c:\\\\temp\\\\t%ld.log\",(long)pid);\n #else\n sprintf( logname, \"/tmp/t%ld.log\",(long)pid);\n #endif\n\n return;  // line 374\n\n// it fails if it returns before opening the file below\n\n\n log = fopen( logname,\"a\" );\n\n if ( !log ) \n {\n   return; \n }\n else\n {\n   fclose(log);\n   return;\n }\n\n\n.\n.\n.\n.\n--- snip ---"}, {"count": 3, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "is_private": false, "id": 15136, "time": "2002-04-30T14:58:04Z", "bug_id": 8659, "creation_time": "2002-04-30T14:58:04Z", "text": "The link works for me, but I can't figure out why you are reporting a problem\nwith mod_gzip here.  mod_gzip is a third-party module that we don't have \nanything to do with.  Please report this to the mod_gzip authors\n(or try the mod_deflate module, which does come with Apache 2 and includes\nsimilar functionality)."}, {"count": 4, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "text": "\n  I see nothing in that snippet that indicates an API issue with APR or httpd.\n  Looks like a logic error elsewhere.  This code isn't APR'ized, so that can't\n  be the issue, and you aren't even dealing with an Apache log.\n\n  I concur with Joshua here, this report is irrelevant.", "id": 15144, "time": "2002-04-30T15:35:33Z", "bug_id": 8659, "creation_time": "2002-04-30T15:35:33Z", "is_private": false}]