[{"count": 0, "tags": [], "text": "I've spend most of the day figuring this one out, so maybe someone can get some \nbenefit from this.\n\nI had an JSP 1.1 error page with the following:\n<% exception.printStackTrace(); %>\n\nTomcat 3.2 always assigns the 'exception' scripting variable. Tomcat 4 doesn't. \nAt first I though, a Tomcat bug, but look at the specs:\n\nJSP Spec 1.1 &2.2.2 states:\nIf the errorPage attribute of a page directive names a URL that refers to \nanother JSP, and that JSP indicates that it is an error page (by setting the \npage directive\u2019s isErrorPage attribute to true) then the \u201cexception\u201d implicit \nscripting language variable of that page is initialized to the offending \nThrowable reference.\n\nJSP PFD2 2.0 &1.4.3 states:\nA JSP is considered an Error Page if it sets the page directive\u2019s isErrorPage\nattribute to true. If the errorPage attribute of a page directive names a URL \nthat refers to an Error Page, then the \u201cexception\u201d implicit scripting language \nvariable of that page is initialized to the offending Throwable reference (see \nTable JSP.1-7).\n\nSo: you need to have errorPage set on a.jsp to error.jsp and in error.jsp \nisErrorPage=\"true\" to get the 'exception' scripting variable (I did not verify \nthis in Tomcat 4).\n\nIf you use the 'exception' scripting variable anyway you'll get the default \nerror page with the original exception. If you take a look at the apache_log \nyou'll see:\n2003-04-17 14:56:32 ErrorDispatcherValve[wolf.xs4all.nl]: Exception Processing \nErrorPage[exceptionType=java.lang.Exception, location=/500.jsp]\njava.lang.NullPointerException\n    at org.apache.jsp.$500$jsp._jspService($500$jsp.java:60)\n    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n    at org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:202)\netc.\n\nWorkaround:\nif(exception == null) \n   exception = (Exception) pageContext.findAttribute\n(\"javax.servlet.error.exception\");\n\nNote:\nIn JSP 1.2 \"javax.servlet.jsp.jspException\" is also used in some cases. I've \nmade no attempt to test this. This might explain why exceptions from servlets \ngive other results than exceptions from JSP pages.", "is_private": false, "bug_id": 19110, "id": 35415, "time": "2003-04-17T13:53:32Z", "creator": "carlo@nerdnet.nl", "creation_time": "2003-04-17T13:53:32Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "carlo@nerdnet.nl", "text": "If you get the default error page while using error-page directives in web.xml \nplease read the above.\n\nRelated to:\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=1905\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=5724\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=5736\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=7371\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=12978\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=13924", "id": 35419, "time": "2003-04-17T13:57:54Z", "bug_id": 19110, "creation_time": "2003-04-17T13:57:54Z", "is_private": false, "attachment_id": null}]