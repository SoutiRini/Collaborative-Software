[{"count": 0, "tags": [], "bug_id": 1230, "attachment_id": null, "text": "Same for all versions I tried\nI guess the string must cross over some buffer.\n\nimport org.xml.sax.*;\nimport org.apache.xerces.parsers.SAXParser;\nimport java.io.*;\n\npublic class Test implements ContentHandler {\n public static final String TEST_TEXT = \"test text test text\";\n public void setDocumentLocator (Locator locator){}\n public void startDocument () throws SAXException {}\n public void endDocument() throws SAXException {}\n public void startPrefixMapping (String prefix, String uri) throws SAXException \n{}\n public void endPrefixMapping (String prefix) throws SAXException {}\n public void ignorableWhitespace (char ch[], int start, int length) throws \nSAXException {}\n public void processingInstruction (String target, String data) throws \nSAXException {}\n public void skippedEntity (String name) throws SAXException {}\n public void startElement (String namespaceURI, String localName,\n\t  String qName, Attributes atts) throws SAXException {}\n public void endElement (String namespaceURI, String localName,\n\tString qName) throws SAXException {}\n public void characters (char ch[], int start, int length) throws SAXException {\n   String value = new String(ch,start,length).trim();\n   if (!value.equals(TEST_TEXT)) {\n     System.out.println(\"Not correct: \"+value);\n   }\n }\n\n public static final void main(String[] args) throws Exception {\n   StringBuffer u = new StringBuffer(\"<?xml version=\\\"1.0\\\"?><u>\");\n   for (int i=0;i<1600;i++) {\n     u.append(\"<i>\"+TEST_TEXT+\"</i>\");\n   }\n   u.append(\"</u>\");\n   System.out.println(u.length());\n\n   StringReader sr = new StringReader(u.toString());\n   InputSource is =  new InputSource(sr);\n   XMLReader parser = new SAXParser();\n   parser.setContentHandler(new Test());\n   parser.parse(is);\n }\n} // Test class", "id": 1745, "time": "2001-04-05T04:39:29Z", "creator": "jhoward@vrisko.com", "creation_time": "2001-04-05T04:39:29Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 1230, "text": "You're assuming you always get the whole element content as a single chunk of \ndata passed through one call to characters(). This is not the case. With SAX \nthe parser is free to pass the data in pieces through several calls to \ncharacters(). This means that you need to concatenate the pieces together on \nthe application side if you want the whole text as a single chunk.\n\nHere is a modified version of your test program that does this and it works \njust fine:\n\nimport org.xml.sax.*;\nimport org.apache.xerces.parsers.SAXParser;\nimport java.io.*;\n\npublic class ReaderTest2 implements ContentHandler {\n    public StringBuffer buf = new StringBuffer();\n public static final String TEST_TEXT = \"test text test text\";\n public void setDocumentLocator (Locator locator){}\n public void startDocument () throws SAXException {}\n public void endDocument() throws SAXException {}\n public void startPrefixMapping (String prefix, String uri) throws SAXException \n{}\n public void endPrefixMapping (String prefix) throws SAXException {}\n public void ignorableWhitespace (char ch[], int start, int length) throws \nSAXException {}\n public void processingInstruction (String target, String data) throws \nSAXException {}\n public void skippedEntity (String name) throws SAXException {}\n public void startElement (String namespaceURI, String localName,\n\t  String qName, Attributes atts) throws SAXException {\n     buf.setLength(0);\n }\n public void endElement (String namespaceURI, String localName,\n\tString qName) throws SAXException {\n     String value = buf.toString();\n   if (!value.equals(TEST_TEXT)) {\n     System.out.println(\"Not correct: \"+value);\n   }\n }\n public void characters (char ch[], int start, int length) throws SAXException {\n   buf.append(ch,start,length);\n }\n\n public static final void main(String[] args) throws Exception {\n   StringBuffer u = new StringBuffer(\"<?xml version=\\\"1.0\\\"?><u>\");\n   for (int i=0;i<1600;i++) {\n     u.append(\"<i>\"+TEST_TEXT+\"</i>\");\n   }\n   u.append(\"</u>\");\n   System.out.println(u.length());\n\n   StringReader sr = new StringReader(u.toString());\n   InputSource is =  new InputSource(sr);\n   XMLReader parser = new SAXParser();\n   parser.setContentHandler(new ReaderTest2());\n   parser.parse(is);\n }\n} // Test class\n\n", "id": 2390, "attachment_id": null, "creator": "lehors@apache.org", "creation_time": "2001-05-10T09:53:12Z", "time": "2001-05-10T09:53:12Z", "is_private": false}]