[{"count": 0, "attachment_id": null, "bug_id": 25680, "text": "In essence, when index.jsp includes using a custom name /include/included.jsp \nwhich is defined as a servlet that maps to a custom name /included.jsp, \nStringIndexOutOfBoundsException is thrown.\nThe fix is trivial:\njakarta-tomcat-5.0.16-src\\jakarta-tomcat-jasper\\jasper2\n\\src\\share\\org\\apache\\jasper\\servlet\\JspServlet.java:\n\n204,214c204,210\n<             if (requestUri != null) {\n<               // rs: avoid out of range exception\n<               int index = requestUri.indexOf(includeUri);\n<               if (index > -1) {\n<                       String currentIncludedUri\n<                           = requestUri.substring(index);\n<\n<                       if ( !includeUri.equals(currentIncludedUri) ) {\n<                           includeUri = currentIncludedUri;\n<                       }\n<               }\n---\n>             if (requestUri != null){\n>                 String currentIncludedUri\n>                     = requestUri.substring(requestUri.indexOf(includeUri));\n>\n>                 if ( !includeUri.equals(currentIncludedUri) ) {\n>                     includeUri = currentIncludedUri;\n>                 }", "id": 49498, "time": "2003-12-21T21:10:07Z", "creator": "sabiq@purdue.edu", "creation_time": "2003-12-21T21:10:07Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 25680, "text": "I am extremely glad that the fix is trivial, but I don't like your patch. I also\nfind the explanation of the problem to be not trivial. Please restate what the\nproblem actually is, and how to reproduce the bug.", "count": 1, "id": 49525, "time": "2003-12-22T09:07:24Z", "creator": "remm@apache.org", "creation_time": "2003-12-22T09:07:24Z", "is_private": false}, {"count": 2, "text": "My last comment basically meant: if you can't explain how to encounter the\nissue, then your patch will not be committed.\nI stated the same when you posted on tomcat-dev mentioning this problem in a\nsimilar vague fashion.", "bug_id": 25680, "attachment_id": null, "id": 49703, "time": "2003-12-25T19:47:16Z", "creator": "remm@apache.org", "creation_time": "2003-12-25T19:47:16Z", "tags": [], "is_private": false}, {"text": "Created attachment 9703\nTrimmed down testcase: this caused out of bounds exception before the patch", "tags": [], "bug_id": 25680, "attachment_id": 9703, "count": 3, "id": 49704, "time": "2003-12-25T20:21:10Z", "creator": "sabiq@purdue.edu", "creation_time": "2003-12-25T20:21:10Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 25680, "attachment_id": null, "text": "Reopening: the code in the trimmed-down attached app was causing exception \nbefore the patch.", "id": 49705, "time": "2003-12-25T20:23:29Z", "creator": "sabiq@purdue.edu", "creation_time": "2003-12-25T20:23:29Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 25680, "text": "Well, what can I say :).  Your webapp works perfectly for me when run with the \nHEAD Tomcat code.  You should try testing on the nightly build.  If it works, \nthen there is likely to be a new TC 5 release after the New Year.", "id": 49713, "attachment_id": null, "creator": "william.barker@wilshire.com", "creation_time": "2003-12-26T07:29:44Z", "time": "2003-12-26T07:29:44Z", "is_private": false}, {"text": "I don't know if this works or not; I'll test it (there are few relevant changes\nwhen comparing HEAD with 5.0.16). However, the issue, now that I actually can\nlook at a test case (thanks) is not critical, so there won't be a rushed release\nbecause of this.", "tags": [], "bug_id": 25680, "attachment_id": null, "count": 6, "id": 49716, "time": "2003-12-26T08:59:40Z", "creator": "remm@apache.org", "creation_time": "2003-12-26T08:59:40Z", "is_private": false}, {"count": 7, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 49717, "time": "2003-12-26T09:11:23Z", "bug_id": 25680, "creation_time": "2003-12-26T09:11:23Z", "is_private": false, "text": "This works for me too.\nThis bug was actually likely fixed in Tomcat 5.0.12. The problem is that you are\nusing the J2EE RI, which includes an earlier Tomcat 5 build, likely 5.0.9 with\nsome patches. When reporting issues, please also test with the latest Tomcat\ncode: if you look at the changelog, there has been a very significant amount of\nbugfixes and tweaks between 5.0.9 and 5.0.16, when Tomcat 5 was actually\ndeclared stable."}]