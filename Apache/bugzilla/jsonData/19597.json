[{"count": 0, "tags": [], "creator": "shapira@mpi.com", "is_private": false, "text": "In response to requests on log4j-user list, I wrote this extension to \nFileAppender.  It takes one additional parameter, the contextKey.  It looks for \nthe value of this parameter in the MDC of the logging event.  If the parameter \nis null (or not present), this appender writes to the normal file, i.e the one \nspecified by the File attribute of File appender.  If the parameter is present, \nthe appender writes to a different file, with the same name as the main file + \nthe MDC value toString() as the file name.  \n\nSo this appender can potentially be writing to many files.  It tries to close \nthem all gracefully in the closeFile() method.  The files are kept in a hashmap \nto ensure good performance, and aren't opened until needed to ensure no \nunnecessary handles are created.  This means the first logging call with a \nparticular value for the MDC key will incur a file creation performance \noverhead.\n\nFirst version, needs testing.  Also needs Jalopy-fying (or whatever formatting \ntool we're using).", "id": 36592, "time": "2003-05-02T15:23:32Z", "bug_id": 19597, "creation_time": "2003-05-02T15:23:32Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "shapira@mpi.com", "is_private": false, "text": "Created attachment 6168\nKeyFileAppender initial implementation", "id": 36593, "time": "2003-05-02T15:24:28Z", "bug_id": 19597, "creation_time": "2003-05-02T15:24:28Z", "attachment_id": 6168}, {"count": 2, "tags": [], "bug_id": 19597, "attachment_id": 6172, "text": "Created attachment 6172\nSlightly cleaned-up version", "id": 36607, "time": "2003-05-02T17:30:54Z", "creator": "steberso@vignette.com", "creation_time": "2003-05-02T17:30:54Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 19597, "is_private": false, "text": "Main changes:\n1) filename for logging events with that MDC key now have the format \n${baseFileName}.${MDCKeyValue}.${fileExtension}.  Overrode the activateOptions \nmethod to help accomplish.\n2) creation of a writer and closing of writer now account for layout headers \nand footers\n3) modified the looping logic around closing all the writers in the Map\n4) the writers Map is create on instance initialization.  Seems that the entire \npurpose of this class is to be a hub for multiple writer sinks, so I added the \ntime to create that Map up front (as opposed to on first access).", "id": 36608, "time": "2003-05-02T17:37:18Z", "creator": "steberso@vignette.com", "creation_time": "2003-05-02T17:37:18Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 19597, "text": "I'm withdrawing my own submission.  NoO interest, no need.", "id": 68382, "time": "2004-12-13T17:35:18Z", "creator": "yoavs@computer.org", "creation_time": "2004-12-13T17:35:18Z", "is_private": false, "attachment_id": null}]