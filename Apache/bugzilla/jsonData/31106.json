[{"count": 0, "tags": [], "bug_id": 31106, "text": "For the java and javac tasks:\nThe command generated for Runtime.exec on OpenVMS when \"fork\" is specified\nfails.  We have a patch and we would like to submit it for your consideration.\n\nBest regards,\n\nIsao Yanagimachi\nOpenVMS Engineering\nHewlett-Packard", "id": 63176, "time": "2004-09-07T20:20:50Z", "creator": "isao.yanagimachi@hp.com", "creation_time": "2004-09-07T20:20:50Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "By all means attach it to this bugrep.", "is_private": false, "bug_id": 31106, "id": 63177, "time": "2004-09-07T20:35:09Z", "creator": "mbenson@apache.org", "creation_time": "2004-09-07T20:35:09Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "isao.yanagimachi@hp.com", "attachment_id": 12667, "text": "Created attachment 12667\nCVS patch file for Execute.java (against ANT_162 tag)", "id": 63180, "time": "2004-09-07T20:53:17Z", "bug_id": 31106, "creation_time": "2004-09-07T20:53:17Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "mbenson@apache.org", "text": "Is the object here just to get around the command line length limitations?  I \npersonally feel like there are probably better places to code this \nfunctionality than in the Execute class...", "count": 3, "id": 63182, "time": "2004-09-07T21:29:38Z", "bug_id": 31106, "creation_time": "2004-09-07T21:29:38Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 31106, "is_private": false, "text": "Any better place to put the changes in ?\n\nWe filed the issue because we ran into the problem while running the Ant \nintegrated with NetBeans 4.0.\n\nNetBeans can execute a java command with very long list of classpaths,\nbut the VMS command line has 256 character limitation. So Java on VMS \nsupports \"-V\" switch which takes the file name containing the list of java \ncommand line arguments.\n\nAlso, even without the classpath problem, the original code in \nExecute.VmsCommandLauncher has a problem with executing \"java\"/\"javac\" task.\n\nThanks\n\nIsao Yanagimachi\nOpenVMS Engineering\nHewlett-Packard", "id": 63183, "time": "2004-09-07T21:50:25Z", "creator": "isao.yanagimachi@hp.com", "creation_time": "2004-09-07T21:50:25Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "The temporary DCL script doesn't work for these particular executables, even \nwith a short command line?  I am not familiar with OpenVMS, so I'm working \ncompletely from the code here.", "id": 63184, "time": "2004-09-07T22:04:32Z", "bug_id": 31106, "creation_time": "2004-09-07T22:04:32Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "stevel@apache.org", "is_private": false, "count": 6, "id": 63196, "time": "2004-09-08T10:00:54Z", "bug_id": 31106, "creation_time": "2004-09-08T10:00:54Z", "text": "First, now would be a good time to recompile VMS with MAX_COMMAND_LENGTH\n#defined to something larger :)\n\nAssuming that is not possible, Ant can do its best to work around the problems. \n\nHowever, your patch is the wrong workaround. It contains hard coded assumptions\nthat anything called java or javac must be the relevant executables, and\nprovides no support for other programs -such as rmic. \n\nWe have the Java task, which creates the command line for execution, in its fork\nmethod. The appropriate place for java command line restructuring logic is\nthere, not in Execute.java. \n\nPlease can you move your patch to that class, and provide us with that and\nassociated unit tests, as documented in the ant task guidelines. (\nhttp://ant.apache.org/ant_task_guidelines.html ) \n\nIf the OpenVMS team is interested in Ant support, we would be interested to know\nthe result of ant's own test suite running on your OS -that of the latest CVS\nversion, preferably. Regular checks that Ant worked on OpenVMS would prevent\nmore problems arising. \n\nrenaming bugrep for more specificness.\n\n"}, {"count": 7, "tags": [], "bug_id": 31106, "is_private": false, "text": "I work with Isao in OpenVMS engineering.  We are currently reworking our patch \nper your suggestion.  We hope to post a new patch early tomorrow.\n\nIn the meantime, also per your suggestion, I have just completed running the \nant junit tests on 1.6.2 (I plan to run the against the latest dev version \nnext).  The results are interesting.  Would the mailing list be a good place \nto discuss them?\n\nThanks,\nMeg", "id": 63244, "time": "2004-09-08T20:06:49Z", "creator": "Meg.watson@hp.com", "creation_time": "2004-09-08T20:06:49Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 31106, "text": "If there are many problems it may be best to keep it in this or more likely a \nnew bugrep for tracking purposes.", "id": 63251, "time": "2004-09-08T20:37:41Z", "creator": "mbenson@apache.org", "creation_time": "2004-09-08T20:37:41Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 31106, "is_private": false, "text": "Depends on what you mean by \"many\".  32 failures, 52 errors.  Seems like many \nto me.", "id": 63253, "time": "2004-09-08T20:49:08Z", "creator": "Meg.watson@hp.com", "creation_time": "2004-09-08T20:49:08Z", "attachment_id": null}, {"count": 10, "tags": [], "text": "Yeah, I would have called five \"not many.\"", "is_private": false, "bug_id": 31106, "id": 63254, "time": "2004-09-08T20:56:29Z", "creator": "mbenson@apache.org", "creation_time": "2004-09-08T20:56:29Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "OK, so which tests are failing?", "id": 64408, "time": "2004-09-30T12:49:57Z", "bug_id": 31106, "creation_time": "2004-09-30T12:49:57Z", "is_private": false}, {"attachment_id": 12911, "tags": [], "creator": "Meg.watson@hp.com", "text": "Created attachment 12911\nOpenVMS Ant Unit Test Results - VMS 7.2-3, Java 1.4.2-3", "count": 12, "id": 64448, "time": "2004-09-30T18:12:43Z", "bug_id": 31106, "creation_time": "2004-09-30T18:12:43Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "Meg.watson@hp.com", "is_private": false, "count": 13, "id": 64449, "time": "2004-09-30T18:13:13Z", "bug_id": 31106, "creation_time": "2004-09-30T18:13:13Z", "text": "I'll attach a file with the results.  We've been working with our JVM folks to \ntry and get some of these resolved, as some of them are clearly VMS JVM \nproblems.\n\nWe'll be looking at this (albeit slowly since we're swamped with other stuff) \nmore in the next couple of months.\n\nAnd we will be attaching your suggested revised patch in the next few days \nsince we really need that change for NetBeans 4.0.\n\nMeg"}, {"count": 14, "tags": [], "bug_id": 31106, "text": "The list of test failures is fascinating. Who would have thought EchoProperties\nwould fail so much. \n\nLow level file system ones are less surprising; touch/fixcrlf &C are symptoms of\nno/inadequate OpenVMS awareness. I wonder what line ending OpenVMS has?\n\nMeg, Isao:\n-is there some public 'things you need to know about open VMS when running java\napps' page?\n-can you attach the detailed test log; we need more detail on which tests fail\nand the lines, for better diags.\n-I may need access to an openVMS machine to debug this properly. We can\nco-ordinate this via our hp email accounts :)", "id": 64492, "time": "2004-10-01T21:11:00Z", "creator": "stevel@apache.org", "creation_time": "2004-10-01T21:11:00Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "isao.yanagimachi@hp.com", "is_private": false, "count": 15, "id": 64710, "time": "2004-10-06T18:25:18Z", "bug_id": 31106, "creation_time": "2004-10-06T18:25:18Z", "text": "We have patch files for changes to java and javac as recommended earlier\nin this issue. These changes fix a couple of failures, but certainly not \nall of them. We need the set of changes for NetBeans 4.0 to work successfully\non VMS. I will attach the diffs here and perhaps we should open a new issue\nfor the other VMS failures? \n\nThanks\n\n/Meg, Isao"}, {"attachment_id": 12963, "tags": [], "creator": "isao.yanagimachi@hp.com", "is_private": false, "count": 16, "id": 64711, "time": "2004-10-06T18:26:41Z", "bug_id": 31106, "creation_time": "2004-10-06T18:26:41Z", "text": "Created attachment 12963\nPatch file for Execute.java against Ant 1.6.2 release"}, {"count": 17, "tags": [], "bug_id": 31106, "text": "Created attachment 12964\nPatch file for Java.java against Ant 1.6.2 release", "id": 64712, "time": "2004-10-06T18:27:18Z", "creator": "isao.yanagimachi@hp.com", "creation_time": "2004-10-06T18:27:18Z", "is_private": false, "attachment_id": 12964}, {"attachment_id": 12965, "tags": [], "creator": "isao.yanagimachi@hp.com", "is_private": false, "count": 18, "id": 64714, "time": "2004-10-06T18:27:53Z", "bug_id": 31106, "creation_time": "2004-10-06T18:27:53Z", "text": "Created attachment 12965\nPatch file for DefaultCompilerAdapter.java against Ant 1.6.2 release"}, {"count": 19, "tags": [], "creator": "isao.yanagimachi@hp.com", "attachment_id": 12966, "text": "Created attachment 12966\nPatch file for JavacExternal.java against Ant 1.6.2 release", "id": 64715, "time": "2004-10-06T18:28:28Z", "bug_id": 31106, "creation_time": "2004-10-06T18:28:28Z", "is_private": false}, {"count": 20, "tags": [], "bug_id": 31106, "is_private": false, "text": "Created attachment 12967\nPatch file for JavaEnvUtils.java against Ant 1.6.2 release", "id": 64716, "time": "2004-10-06T18:30:04Z", "creator": "isao.yanagimachi@hp.com", "creation_time": "2004-10-06T18:30:04Z", "attachment_id": 12967}, {"attachment_id": null, "tags": [], "creator": "stevel@apache.org", "text": "Patches applied (with some changes) to CVS head; backporting to 1.6.x is\npossible if nobody objects.\n\nA test case would be nice, something with both long arguments and many arguments. \n\nI worry that we dont clean up the command files till later, potentially much\nlater. If you run ant in an IDE, or a multi-day ant project (c.f. GridAnt), then\nthat is the wrong way to do it. Its easy enough to add clean up after a blocking\nexecute, but spawning worries me. ", "count": 21, "id": 64724, "time": "2004-10-06T22:48:13Z", "bug_id": 31106, "creation_time": "2004-10-06T22:48:13Z", "is_private": false}, {"count": 22, "tags": [], "bug_id": 31106, "is_private": false, "text": "Steve can this one be closed? (by now i would expect objections to also inluding\nin 1.6.x", "id": 75161, "time": "2005-05-21T00:32:13Z", "creator": "jkf@apache.org", "creation_time": "2005-05-21T00:32:13Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "Meg.watson@hp.com", "is_private": false, "count": 23, "id": 75164, "time": "2005-05-21T01:42:10Z", "bug_id": 31106, "creation_time": "2005-05-21T01:42:10Z", "text": "(In reply to comment #22)\n> Steve can this one be closed? (by now i would expect objections to also \ninluding\n> in 1.6.x\n\nWe're (OpenVMS) still here :-)  I haven't checked the latest released source, \nbut did this set of changes make it into 1.6.4?\n\nI just need to figure out if what to provide for our customers.\n\nThanks,\nMeg\n"}, {"count": 24, "tags": [], "text": "I 've observed the changes on \"head\" (preliminary 1.7 versions)", "is_private": false, "bug_id": 31106, "id": 75165, "time": "2005-05-21T01:54:27Z", "creator": "jkf@apache.org", "creation_time": "2005-05-21T01:54:27Z", "attachment_id": null}, {"count": 25, "tags": [], "bug_id": 31106, "text": "Ah yes.  Thanks!", "id": 75195, "time": "2005-05-22T15:23:51Z", "creator": "Meg.watson@hp.com", "creation_time": "2005-05-22T15:23:51Z", "is_private": false, "attachment_id": null}, {"count": 26, "tags": [], "creator": "jkf@apache.org", "attachment_id": null, "text": "Could you please confirm the issue is solved on the preliminary 1.7 version? (Or\nindicate that the issue has not been solved.\n", "id": 75196, "time": "2005-05-22T16:59:50Z", "bug_id": 31106, "creation_time": "2005-05-22T16:59:50Z", "is_private": false}, {"count": 27, "tags": [], "bug_id": 31106, "text": "(In reply to comment #26)\n> Could you please confirm the issue is solved on the preliminary 1.7 version? \n(Or\n> indicate that the issue has not been solved.\n\n\nThis issue appears to be solved in 1.7 by the patches we contributed.\n\nAt the time of the patch, I opened another issue\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=31589\n\nto detail the results of running the 1.7 junit tests on OpenVMS.\n\nPlease close this report.\n\nThanks!\n \n", "id": 81657, "time": "2005-10-24T19:19:20Z", "creator": "Meg.watson@hp.com", "creation_time": "2005-10-24T19:19:20Z", "is_private": false, "attachment_id": null}]