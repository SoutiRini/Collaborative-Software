[{"count": 0, "tags": [], "bug_id": 32688, "attachment_id": null, "is_private": false, "id": 68473, "time": "2004-12-14T10:59:13Z", "creator": "etouchard@infovista.com", "creation_time": "2004-12-14T10:59:13Z", "text": "Here is my example:\nTest.jsp\n<%@page language=\"java\"  contentType=\"text/html;charset=utf-8\" \npageEncoding=\"utf-8\"  %><%response.setContentLength(0);response.sendRedirect\n(\"http://www.apache.org\");%>\n\n(all on the same line)\n\nby calling this jsp i've got the following answer\nHTTP Status 500 - \n\n--------------------------------------------------------------------------------\n\ntype Exception report\n\nmessage \n\ndescription The server encountered an internal error () that prevented it from \nfulfilling this request.\n\nexception \n\njava.lang.IllegalStateException\n\torg.apache.coyote.tomcat5.CoyoteResponseFacade.sendRedirect\n(CoyoteResponseFacade.java:352)\n\torg.apache.jsp.Test_jsp._jspService(Test_jsp.java:46)\n\torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\torg.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:324)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\nAccording to the specification:\nsetContentLength(int)\npublic void setContentLength(int len)\nSets the length of the content body in the response In HTTP servlets, this\nmethod sets the HTTP Content-Length header.\nParameters:\nlen - an integer specifying the length of the content being returned to the\nclient; sets the Content-Length header\n\nsendRedirect(String)\npublic void sendRedirect(java.lang.String location)\nthrows IOException\nSends a temporary redirect response to the client using the specified redirect\nlocation URL. This method can accept relative URLs; the servlet container\nmust convert the relative URL to an absolute URL before sending the\nresponse to the client. If the location is relative without a leading \u2019/\u2019 the \ncontainer\ninterprets it as relative to the current request URI. If the location is \nrelative\nwith a leading \u2019/\u2019 the container interprets it as relative to the servlet\ncontainer root.\nIf the response has already been committed, this method throws an Illegal-\nStateException. After using this method, the response should be considered\nto be committed and should not be written to.\nParameters:\nlocation - the redirect location URL\nThrows:\nIOException - If an input or output exception occurs\nIllegalStateException - If the response was committed or if a partial URL\nis given and cannot be converted into a valid URL\n\nSRV.5.5 Closure of Response Object\nWhen a response is closed, the container must immediately flush all remaining\ncontent in the response buffer to the client. The following events indicate \nthat the\nservlet has satisfied the request and that the response object is to be closed:\n\u2022 The termination of the service method of the servlet.\n\u2022 The amount of content specified in the setContentLength method of the response\nhas been written to the response.\n\u2022 The sendError method is called.\n\u2022 The sendRedirect method is called.\n\nAs I am not writting in the content (I've check in the jsp compilation file) \nbut just put some http header this should work."}, {"count": 1, "tags": [], "bug_id": 32688, "attachment_id": null, "is_private": false, "id": 68475, "time": "2004-12-14T11:05:06Z", "creator": "remm@apache.org", "creation_time": "2004-12-14T11:05:06Z", "text": "\n\n*** This bug has been marked as a duplicate of 32604 ***"}]