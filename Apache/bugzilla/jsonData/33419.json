[{"count": 0, "tags": [], "creator": "nasonov@rbc.ru", "attachment_id": null, "text": "My contexts app.xml contains:\n  <Resource name=\"jdbc/appDS\" \n            auth=\"Application\"\n            type=\"oracle.jdbc.pool.OracleConnectionPoolDataSource\"/>\n  <ResourceParams name=\"jdbc/appDS\">\n    <parameter>\n      <name>factory</name>\n      <value>oracle.jdbc.pool.OracleDataSourceFactory</value>\n    </parameter>\n    <parameter>\n      <name>url</name>\n      <value>jdbc:oracle:thin:@my.db:1521:sid</value>\n    </parameter>\n  </ResourceParams>\n\nNext time, i lookup this resource:\nContext ctx = new InitialContext();\nDataSource ds = (DataSource) ctx.lookup(\"java:comp/env/jdbc/appDS\");\n\nAnd see:\njavax.naming.NamingException: Cannot create resource instance\n\torg.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:132)\n\tjavax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)\n\torg.apache.naming.NamingContext.lookup(NamingContext.java:792)\n\torg.apache.naming.NamingContext.lookup(NamingContext.java:139)\n\torg.apache.naming.NamingContext.lookup(NamingContext.java:780)\n\torg.apache.naming.NamingContext.lookup(NamingContext.java:139)\n\torg.apache.naming.NamingContext.lookup(NamingContext.java:780)\n\torg.apache.naming.NamingContext.lookup(NamingContext.java:139)\n\torg.apache.naming.NamingContext.lookup(NamingContext.java:780)\n\torg.apache.naming.NamingContext.lookup(NamingContext.java:152)\n\torg.apache.naming.SelectorContext.lookup(SelectorContext.java:136)\n\tjavax.naming.InitialContext.lookup(InitialContext.java:351)\n\torg.apache.jsp.test_jsp._jspService(org.apache.jsp.test_jsp:48)\n\nIn method ResourceFactory.getObjectInstance() local variable \"factoryRefAddr\"\ncontains \"null\"!!!\n\n\nIt work at Tomcat 5.0.28, but work not at Tomcat 5.5.7.", "id": 70567, "time": "2005-02-07T09:39:31Z", "bug_id": 33419, "creation_time": "2005-02-07T09:39:31Z", "is_private": false}, {"count": 1, "tags": [], "text": "No wonder it worked in 5.0.28 and it doens't anymore for 5.5.7...\nThe resource definition has changed significantly. It should look like this:\n\n<Resource name=\"jdbc/myoracle\" auth=\"Container\"\n              type=\"javax.sql.DataSource\"\ndriverClassName=\"oracle.jdbc.driver.OracleDriver\"\n              url=\"jdbc:oracle:thin:myschema@127.0.0.1:1521:mysid\"\n              username=\"scott\" password=\"tiger\" maxActive=\"20\" maxIdle=\"10\"\n              maxWait=\"-1\"/> \n\nFor details, please consult tomcat docs.", "is_private": false, "bug_id": 33419, "id": 70571, "time": "2005-02-07T12:59:44Z", "creator": "drzewo@post.pl", "creation_time": "2005-02-07T12:59:44Z", "attachment_id": null}]