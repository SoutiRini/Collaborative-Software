[{"count": 0, "tags": [], "bug_id": 35424, "text": "I build apache 1.3.33 on Solaris and run test cgi which\nfources timeout on httpd. It seems Internet explorer\ntrys re-connection to httpd server when timeout from apache \nhappens. The same URL is called 2-3 times. This is strange.\nBut this is a browser issue.\n\nI checked apache behavior when timeout happens. I used this \nsimple cgi to see what happens when timeout happens.\nThis program is dedicated to simulate a long run cgi application.\n\n---\n#!/usr/bin/perl\n\nfor ($i=0;$i<60*7;$i++){\nsleep(1);\n}\nprint \"Content-Type: text/html\\n\\n\";\nprint \"test cgi end\\n\"; \n--\n\nI used etherreal to check packet between httpd and browser.\nAfter 300 seconds passed (default Timeout time), httpd\nsent just FIN packet to browser, then browser return ACK and FIN\nand httpd sent ACK. tcp connection was closed successfully, abruptly.\n\nLooking at timeout() function in httpd, httpd just close socket\nby using close().\n\nIs this expected behavior ? Why httpd does not send \nany error code/message to client ? From browser, httpd disconnects \nabruptly. This is not friendly.", "id": 76551, "time": "2005-06-20T02:44:36Z", "creator": "iorihonda@yahoo.co.jp", "creation_time": "2005-06-20T02:44:36Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 35424, "is_private": false, "text": "I applied this fix. I think this would work fine.\n\n[http_main.c]\ntimeout()\n        if (!current_conn->keptalive) {\n            /* in some cases we come here before setting the time */\n            if (log_req->request_time == 0) {\n                log_req->request_time = time(NULL);\n            }\n!             if (log_req->status == HTTP_OK) {\n                  log_req->status = HTTP_INTERNAL_SERVER_ERROR;\n+                 save_req->status = HTTP_INTERNAL_SERVER_ERROR;\n+             }\n+             ap_send_error_response(save_req,0);\n            ap_log_transaction(log_req);\n        }\n", "id": 99006, "time": "2007-02-06T00:03:45Z", "creator": "iorihonda@yahoo.co.jp", "creation_time": "2007-02-06T00:03:45Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 35424, "is_private": false, "text": "Apache HTTP Server 1.3.x is not supported anymore and no bugs will be fixed in the old codebase (cf. <http://mail-archives.apache.org/mod_mbox/httpd-announce/201002.mbox/%3C20100203000334.GA19021@infiltrator.stdlib.net%3E>). Since this bug seems to affect only 1.3.x, I'm closing it as WONTFIX.\n\nIf this bug still affects you in a recent version (version 2.2.x or the upcoming version 2.4), please open a new bug.\n\nThank you for reporting the bug.", "id": 145132, "time": "2011-03-21T10:36:09Z", "creator": "mss@apache.org", "creation_time": "2011-03-21T10:36:09Z", "attachment_id": null}]