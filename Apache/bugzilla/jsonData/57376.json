[{"count": 0, "tags": [], "bug_id": 57376, "text": "Server A: Windows 2008 Foundation running Apache 2.2\nServer B: Unbuntu 14 running Tomcat 6\n\nA worker was set to serve an application hosted in B\n\nworker.list=worker1\nworker.worker1.host=192.168.1.23\nworker.worker1.port=8009\nworker.worker1.type=ajp13\nworker.worker1.lbfactor=1\n\nWhen trying to use the applicaction with an URL like \"A/app\" the A server responded that the service was unavailable\n\n\nI found in mod_jk.log:\n\n[Thu Dec 18 09:47:52 2014] [4900:1616] [info] jk_open_socket::jk_connect.c (758): connect to 127.0.0.1:8009 failed (errno=61)\n\nClearly that was not the IP indicated. I intentionally modified the properties to something weird like:\n\nworker.list=worker1\nworker.worker1.host=800.23.43.400\nworker.worker1.port=9999\nworker.worker1.type=ajp13\nworker.worker1.lbfactor=1\n\nbut the log showed the same entry. \n\nSo I switched to version .39 (and restored the original properties) and the log showed:\n\n[Thu Dec 18 10:55:34 2014] [7072:1628] [info] jk_open_socket::jk_connect.c (735): connect to 144.252.12.0:8019 failed (errno=61)\n\nagain, the IP was somehow misunderstood\n\nI finally switched to version .37 and the applicaction ran fine\n\n\nRegards,\nAlvaro Castiello de la Hidalga", "id": 179878, "attachment_id": null, "creator": "acastiello@megatron.com.mx", "creation_time": "2014-12-19T18:43:14Z", "time": "2014-12-19T18:43:14Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 57376, "attachment_id": null, "is_private": false, "id": 179894, "time": "2014-12-20T12:33:03Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2014-12-20T12:33:03Z", "text": "Are you able to reproduce with 1.2.40 and JklogLevel debug?\n\nFor the reproduction please use a small workers.properties file, e.g. removing any worker definitions that are not related to the problem.\n\nThen start and do a single request which shows your problem. Then please provide your jk log file. If you don't want to provide the log in public, you can also send it directly to me.\n\nRegards,\n\nRainer"}, {"count": 2, "attachment_id": null, "bug_id": 57376, "text": "(In reply to Rainer Jung from comment #1)\n> Are you able to reproduce with 1.2.40 and JklogLevel debug?\n> \nWill do it ASAP Rainer\n\nRegards", "id": 179897, "time": "2014-12-20T15:03:50Z", "creator": "acastiello@megatron.com.mx", "creation_time": "2014-12-20T15:03:50Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 57376, "text": "Rainer\n\nI used \"debug\" level and it ran fine with version .40. I switched back to \"info\" and ran fine. I don\u00b4t understand what happened but now it runs fine with version .40\n\nNeither the server nor the Apache service had been rebooted or restarted since the bogus behaviour except of course stopping/restarting for replacing the mod_jk module\n\nI'm unable to reproduce now but I'll keep trying. In the mean time I guess this bug can dubious be marked as \"resolved\"\n\nRegards\nAlvaro", "id": 179946, "attachment_id": null, "creator": "acastiello@megatron.com.mx", "creation_time": "2014-12-22T14:03:11Z", "time": "2014-12-22T14:03:11Z", "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 57376, "text": "Thanks for testing again.\n\nPlease let us know if it happens again for you, so we can reopen the ticket.\n\nIn the meantime I will resolve this as WORKSFORME.\n\nRegards,\n\nRainer", "id": 179959, "time": "2014-12-22T16:15:40Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2014-12-22T16:15:40Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 57376, "is_private": false, "text": "Hi,\n\nI am able to reproduce the problem in my environment.\nWe are currently testing the last version of mod_jk 1.2.40 with the Pivotal Web Server (v 6.0.2) using httpd 2.4.10.1-64 on a CentOS 6.6 server.\n\nI have 5 defined workers in my workers.properties file (sent to Rainer).\n\nIt appears that the mod_jk initialized the worker (sbpi) with the host > localhost. As you can see in the mod_jk.log sent to Rainer (debug level).\n\nThe fact is during the time that I write this comment, I change the name of the worker to osp_integration_inte and it was working fine. Then I switch back to osp_sbpi_inte and it is also working fine :/\n\nConfiguration of the virtual host sent to Rainer.\n\nSo I am not able to currently reproduce the bug (but I have it on another Apache instance). However, as the bug can clearly be identified in the attached logs, I took the decision to reopen the bug.\n\nFeel free to contact me for more information.\n\nRegards,\nMaxence", "id": 182230, "time": "2015-04-03T13:54:38Z", "creator": "maxence.brigeot@ses.com", "creation_time": "2015-04-03T13:54:38Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "rainer.jung@kippdata.de", "text": "Hi Maxence,\n\nin your case the reason was a typo in your config file:\n\nThe wanted worker name is osp_sbpi_inte, but in the line with the host name config you swapped two characters and used osp_spbi_inte (sbpi -> spbi). That way the sbpi worker got the default host name, which is localhost.\n\nIt is unfortunate that due to the general nature of properties in workers.properties, we can't easily do a check on the worker names. But probably we could issue a warning, if a property starts is\n\nworker.SOMENAME.ANYTHING\n\nand SOMENAME is neither in the worker list, nor in the list of members of any balancer. I will open an enhancement request and close this issue here again as WORKSFORME.", "id": 182231, "time": "2015-04-03T14:27:10Z", "bug_id": 57376, "creation_time": "2015-04-03T14:27:10Z", "is_private": false, "attachment_id": null}]