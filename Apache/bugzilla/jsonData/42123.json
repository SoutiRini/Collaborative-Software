[{"count": 0, "attachment_id": null, "bug_id": 42123, "text": "There appears to be a regression between Batik 1.6 and 1.7 Beta 1 with regard to\nApache FOP 0.93. As I am neither an expert at Batik nor FOP, I will struggle to\ndefine the issue, but here goes:\n\nApache FOP delegates to Batik whenever it encounters some embedded SVG. If the\nembedded SVG contains 'font-family='sans-serif', FOP will pass that to Batik,\nand Batik will (for good reasons I'm sure) convert that to 'SansSerif'.\n\nIt then seems (I could be wrong) that if the SVG contains embedded text, Batik\nwill pass that BACK to FOP to render. When it does this, however, it passes back\n'SansSerif' instead of 'sans-serif', which FOP cannot resolve and substitutes\n'any,normal,400' instead. Generally, 'any' does not equal 'sans-serif'.\n\nYou can work around this behaviour by doing...\n\nFop fop = FOP_FACTORY.newFop( getMimeType(), p_out );\nFOTreeBuilder contentHandler = (FOTreeBuilder) fop.getDefaultHandler();\nFontInfo info = contentHandler.getEventHandler().getFontInfo();\ninfo.addFontProperties( \"F1\", FontInfo.createFontKey( \"SansSerif\", \"normal\", 400\n) );\n\n...(eg. tell FOP what 'SansSerif' means) - but that doesn't seem ideal.\n\nBatik 1.6 didn't seem to have this problem?\n\nI am using JFreeChart 1.0.5 to generate the SVG (via Batik 1.7), and FOP 0.93 to\nrender the PDF (also via Batik 1.7)\n\nRegards,\n\nRichard.", "id": 101699, "time": "2007-04-13T22:10:58Z", "creator": "richard@kennardconsulting.com", "creation_time": "2007-04-13T22:10:58Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "richard@kennardconsulting.com", "text": "Sorry - I forgot to say thanks for all your hard work on Batik! It really is an \nawesome product, and I have found it extremely useful for many years.\n\nI am particularly excited about a 1.7 release, because then I can stop using a \ntrunk-version of 1.6.\n\nRichard.", "id": 101700, "time": "2007-04-13T22:20:31Z", "bug_id": 42123, "creation_time": "2007-04-13T22:20:31Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "cam@apache.org", "attachment_id": null, "text": "Batik probably needs to have its font mappings configurable.  Currently it's\ndone statically in org.apache.batik.gvt.font.FontFamilyResolver.  FOP guys, is\nthat what you would need to ensure that generic font names like sans-serif get\nrendered in the font of FOP's choice on the PDFGraphics2D?", "id": 108607, "time": "2007-09-25T21:20:26Z", "bug_id": 42123, "creation_time": "2007-09-25T21:20:26Z", "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 42123, "is_private": false, "id": 110288, "time": "2007-11-06T17:12:30Z", "creator": "cam@apache.org", "creation_time": "2007-11-06T17:12:30Z", "tags": [], "text": "A recent change in FOP (SVN) may have fixed this:\n\n  http://svn.apache.org/viewvc?rev=591579&view=rev\n\nCould you test again with an SVN version of FOP and Batik?"}, {"count": 4, "tags": [], "text": "Wonderful! I can confirm this problem is now fixed in the latest (0.95 BETA) release of FOP.\n\nThanks again for everybody's hard work and dedication to the cause :)", "attachment_id": null, "bug_id": 42123, "id": 115655, "time": "2008-04-16T19:31:18Z", "creator": "richard@kennardconsulting.com", "creation_time": "2008-04-16T19:31:18Z", "is_private": false}]