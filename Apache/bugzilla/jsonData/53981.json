[{"count": 0, "tags": [], "creator": "daniel.lescohier@cnet.com", "attachment_id": null, "id": 162626, "time": "2012-10-08T18:04:49Z", "bug_id": 53981, "creation_time": "2012-10-08T18:04:49Z", "is_private": false, "text": "I'd like this:\n\n/*\n * log_request_state holds request specific log data that is not\n * part of the request_rec.\n */\ntypedef struct {\n    apr_time_t request_end_time;\n} log_request_state;\n\nmoved from mod_log_config.c to mod_log_config.h.\n\nThe reason is that I have a custom module that registers log handler functions with mod_log_config, and one of the custom handlers is a GMT version of log_request_time. Currently, I make a copy of this typedef in my custom module. However, my custom module already includes mod_log_config.h (needed to get the definition for ap_register_log_handler), so I think this typedef should also go there; in case the structure changes in a future version, I'd automatically get the new definition.\n\nA reason for my module to re-use the state variable used by mod_log_config, instead of storing it's own module-specific state variable in the request_rec, is in the case that you log the request end time in both localtime and gmtime, you'd have the end time saved once, which prevents different seconds being logged if the second log item happened to be after the clock ticked over to the next second."}]