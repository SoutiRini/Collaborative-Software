[{"count": 0, "tags": [], "creator": "jbaker@sark.com", "text": "I installed Tomcat 4.0.4 on a Windows 2000 machine and I checked the NT service \noption during the install.  When I start Tomcat as a service I get this error, \nhowever when I start Tomcat from startup.bat, it works just fine.\n\nHere is the error message.  Please notice that the nested exception is 'no \nprotocol: Files/Apache'.  In reality, I think Tomcat is looking for \"C:\\Program \nFiles\\Apache Tomcat 4.0\\common\\classes\", but cannot find it due to the spaces...\n\njava.rmi.ServerException: RemoteException occurred in server thread; nested \nexception is: \n\tjava.rmi.UnmarshalException: error unmarshalling arguments; nested \nexception is: \n\tjava.net.MalformedURLException: no protocol: Files/Apache\n\tat sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)\n\tat sun.rmi.transport.Transport$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.rmi.transport.Transport.serviceCall(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown \nSource)\n\tat java.lang.Thread.run(Unknown Source)\n\tat sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer\n(StreamRemoteCall.java:247)\n\tat sun.rmi.transport.StreamRemoteCall.executeCall\n(StreamRemoteCall.java:223)\n\tat sun.rmi.server.UnicastRef.invoke(UnicastRef.java:133)\n\tat \ncom.sterlingcommerce.swm.swme.sm.SessionFactoryImpl_Stub.updateProperties\n(Unknown Source)\n\tat com.sterlingcommerce.swm.swme.lm.pageBean.setSIProperty\n(pageBean.java:125)\n\tat org.apache.jsp.SIProperties$jsp._jspService\n(SIProperties$jsp.java:131)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:202)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:382)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:474)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2343)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1012)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1107)\n\tat java.lang.Thread.run(Thread.java:536)\nCaused by: java.rmi.UnmarshalException: error unmarshalling arguments; nested \nexception is: \n\tjava.net.MalformedURLException: no protocol: Files/Apache\n\tat sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)\n\tat sun.rmi.transport.Transport$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.rmi.transport.Transport.serviceCall(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown \nSource)\n\tat java.lang.Thread.run(Unknown Source)\nCaused by: java.net.MalformedURLException: no protocol: Files/Apache\n\tat java.net.URL.(Unknown Source)\n\tat java.net.URL.(Unknown Source)\n\tat java.net.URL.(Unknown Source)\n\tat sun.rmi.server.LoaderHandler.pathToURLs(Unknown Source)\n\tat sun.rmi.server.LoaderHandler.loadClass(Unknown Source)\n\tat java.rmi.server.RMIClassLoader$2.loadClass(Unknown Source)\n\tat java.rmi.server.RMIClassLoader.loadClass(Unknown Source)\n\tat sun.rmi.server.MarshalInputStream.resolveClass(Unknown Source)\n\tat java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)\n\tat java.io.ObjectInputStream.readClassDesc(Unknown Source)\n\tat java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)\n\tat java.io.ObjectInputStream.readObject0(Unknown Source)\n\tat java.io.ObjectInputStream.readObject(Unknown Source)\n\tat sun.rmi.server.UnicastRef.unmarshalValue(Unknown Source)\n\t... 7 more", "id": 19620, "time": "2002-07-16T15:22:51Z", "bug_id": 10871, "creation_time": "2002-07-16T15:22:51Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 10871, "text": "Same problem as #13983.  Workaround is to move Tomcat's installation dir out \nof directories with spaces (c:\\Program Files\\Apache Group\\Tomcat 4.1 to \nsomething like c:\\tomcat), or specify the RMI codebase property.   Or fix \nWebappClassLoader to workaround Sun's bug 4273532 \n(http://developer.java.sun.com/developer/bugParade/bugs/4273532.html).\n\nApparently, the WebappClassLoader is doing nothing wrong when in the getURL \nmethod it calls realFile.toURL().  Sun's File.toURL is to blame.  Sun's \nsuggested workaround fixes the problem:\n\n  return realFile.toURI().toURL();\n\n\n\n*** This bug has been marked as a duplicate of 13983 ***", "id": 26265, "time": "2002-11-14T12:46:34Z", "creator": "kelly@apache.org", "creation_time": "2002-11-14T12:46:34Z", "is_private": false, "attachment_id": null}]