[{"count": 0, "tags": [], "text": "Our System: SuSE Linux 10.3\ngcc (GCC) 4.2.1 (SUSE Linux), libc-2.6.1.so\n\nHow Apache was built, configured:\nCHOST=\"x86_64-pc-linux-gnu\" CFLAGS=\"-march=native -O2 -pipe\" CXXFLAGS=\"${CFLAGS}\" ./configure \"--prefix=/opt/apache/2.2.10\" --datadir=/media/iscsi/virtualweb --enable-layout=wochenblatt --with-mpm=prefork --enable-modules=\"so log_config dir mime\" --enable-mods-shared=\"info status alias cern_meta usertrack asis include autoindex cgid imap deflate auth auth_anon auth_digest access cache mem_cache file-cache cgi env filter ext_filter expires headers file_cache mime_magic negotiation rewrite speling actions userdir setenvif authn-default authz-user authz-default\" --enable-static-support --enable-nonportable-atomics --disable-ipv6 --enable-exception-hook --with-pic --with-included-apr\n\nAdditional we installed the module libphp4 (PHP 4.4.9).\napachectl -M\nLoaded Modules:\n core_module (static)\n authn_file_module (static)\n authz_host_module (static)\n authz_groupfile_module (static)\n auth_basic_module (static)\n log_config_module (static)\n mpm_prefork_module (static)\n http_module (static)\n mime_module (static)\n dir_module (static)\n so_module (static)\n expires_module (shared)\n headers_module (shared)\n alias_module (shared)\n cgi_module (shared)\n info_module (shared)\n status_module (shared)\n whatkilledus_module (shared)\n backtrace_module (shared)\n php4_module (shared)\n\ncat /var/log/apache2/error_log shows:\nhttpd-prefork: tpp.c:63: __pthread_tpp_change_priority: Assertion `new_prio == -1 || (new_prio >= __sched_fifo_min_prio && new_prio <= __sched_fifo_max_prio)' failed.\n[Tue Nov 11 11:17:25 2008] [notice] child pid 31832 exit signal Segmentation fault (11)\n\ncat /etc/apache2/extra/httpd-mpm.conf shows our settings:\n<IfModule mpm_prefork_module>\n    StartServers                8\n    MinSpareServers            16\n    MaxSpareServers            32\n    ServerLimit               256\n    MaxClients                196\n    MaxRequestsPerChild     10000\n    GracefulShutdownTimeout     5\n</IfModule>\n\ncat /etc/apache2/extra/httpd-default.conf shows our settings:\nTimeout 120\nKeepAlive On\nMaxKeepAliveRequests 50\nKeepAliveTimeout 3\nHostnameLookups Off\n\nMaybe someone can explain, why we get continuously Segmentation faults on Linux SuSE 10.3?\n\nBest regards,\nAlexander Manhart", "is_private": false, "bug_id": 46185, "id": 122364, "time": "2008-11-11T03:19:31Z", "creator": "alexander.manhart@wochenblatt.de", "creation_time": "2008-11-11T03:19:31Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "tpp.c does not belong to the source code of httpd. So this error messages comes from a 3rd party module. Furthermore I am pretty sure that the 3rd party requires a stack trace for analysis.", "attachment_id": null, "bug_id": 46185, "id": 122366, "time": "2008-11-11T03:39:23Z", "creator": "rpluem@apache.org", "creation_time": "2008-11-11T03:39:23Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 46185, "attachment_id": null, "is_private": false, "id": 122369, "time": "2008-11-11T03:57:06Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2008-11-11T03:57:06Z", "text": "The file tpp.c is part of the NPTL thread library:\n\nhttp://sources.redhat.com/cgi-bin/cvsweb.cgi/libc/nptl/tpp.c?annotate=1.1.2.2&cvsroot=glibc\n\nThere are also other reports about this assertion failure for different application software. But\n\nhttp://sourceware.org/bugzilla/show_bug.cgi?id=3610\n\nat least indicates, that it could be an improper mutex handling."}, {"count": 3, "tags": [], "bug_id": 46185, "attachment_id": null, "text": "How can I detect, which module causes this error? Or rather which module uses mutex handling? \n\n(Is it possible, that a module like APC, mysql within PHP writes to error_log from Apache?)", "id": 122371, "time": "2008-11-11T04:20:55Z", "creator": "alexander.manhart@wochenblatt.de", "creation_time": "2008-11-11T04:20:55Z", "is_private": false}, {"count": 4, "tags": [], "text": "You will need to produce a core dump. Such a core dump can then be inspected with gdb, which can give a stack trace with \"bt\" or \"bt full\".\n\nYou can learn more about cores with \"man core\". If you httpd does not switch user and/or group via \"User\" or \"Group\", then it should automatically produce a core, when the assertin comes up, if you need to change User or Group (e.g. when using privileged ports), you can try to set CoreDumpDirectory in your httpd configuration and see, whether that produces a core. You might also need to change your max core sizes using \"ulimit\".\n", "is_private": false, "id": 122372, "creator": "rainer.jung@kippdata.de", "time": "2008-11-11T04:34:24Z", "bug_id": 46185, "creation_time": "2008-11-11T04:34:24Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "I read about it, but never used gdb. I'll try it ;-), thank you very much for the tips!", "attachment_id": null, "bug_id": 46185, "id": 122373, "time": "2008-11-11T04:42:37Z", "creator": "alexander.manhart@wochenblatt.de", "creation_time": "2008-11-11T04:42:37Z", "is_private": false}]