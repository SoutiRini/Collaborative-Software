[{"count": 0, "tags": [], "creator": "alcol@hotmail.com", "attachment_id": null, "id": 86802, "time": "2006-03-14T18:48:17Z", "bug_id": 38965, "creation_time": "2006-03-14T18:48:17Z", "is_private": false, "text": "Is that a bug or a missconfiguration in conf line or something else?\nAPR and APR-Util has been compilet with ldap sup -- line\n\n./configure --enable-deflate --enable-mime-magic --enable-expires --enable-\nusertrack --enable-unique-id --enable-ssl --with-ssl=/usr/local/ssl --enable-\nhttp --enable-mod-info --enable-info --enable-cgi --enable-cgid --enable-\nspelling --with-ldap-include=/home/colosi/dev/ldap/openldap-2.3.20/include --\nwith-ldap-lib=/home/colosi/dev/ldap/openldap-2.3.20/libraries --with-ldap --\nenable-authnz-ldap --enable-ldap --enable-module=all --with-apr=./srclib/apr --\nwith-apr-util=./srclib/apr-util/\n\n\n/apache/httpd-2.2.0/modules/http -I/home/colosi/dev/apache/httpd-\n2.2.0/modules/filters -I/home/colosi/dev/apache/httpd-2.2.0/modules/proxy -\nI/home/colosi/dev/apache/httpd-2.2.0/include -I/home/colosi/dev/apache/httpd-\n2.2.0/modules/generators -I/home/colosi/dev/apache/httpd-2.2.0/modules/mappers -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/database -\nI/home/colosi/dev/apache/httpd-2.2.0/srclib/apr/include -\nI/home/colosi/dev/apache/httpd-2.2.0/srclib/apr-util/include -\nI/usr/local/include -I/home/colosi/dev/apache/httpd-\n2.2.0/modules/proxy/../generators -I/usr/local/ssl/include -\nI/usr/kerberos/include -I/home/colosi/dev/apache/httpd-2.2.0/modules/ssl -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/dav/main  -prefer-non-pic -static -\nc modules.c && touch modules.lo\ngcc -g -O2 -pthread    -DLINUX=2 -D_REENTRANT -D_GNU_SOURCE -\nD_LARGEFILE64_SOURCE    -I/home/colosi/dev/apache/httpd-2.2.0/srclib/pcre -I. -\nI/home/colosi/dev/apache/httpd-2.2.0/os/unix -I/home/colosi/dev/apache/httpd-\n2.2.0/server/mpm/prefork -I/home/colosi/dev/apache/httpd-2.2.0/modules/http -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/filters -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/proxy -\nI/home/colosi/dev/apache/httpd-2.2.0/include -I/home/colosi/dev/apache/httpd-\n2.2.0/modules/generators -I/home/colosi/dev/apache/httpd-2.2.0/modules/mappers -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/database -\nI/home/colosi/dev/apache/httpd-2.2.0/srclib/apr/include -\nI/home/colosi/dev/apache/httpd-2.2.0/srclib/apr-util/include -\nI/usr/local/include -I/home/colosi/dev/apache/httpd-\n2.2.0/modules/proxy/../generators -I/usr/local/ssl/include -\nI/usr/kerberos/include -I/home/colosi/dev/apache/httpd-2.2.0/modules/ssl -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/dav/main  -\nc /home/colosi/dev/apache/httpd-2.2.0/server/buildmark.c\n/home/colosi/dev/apache/httpd-2.2.0/srclib/apr/libtool --silent --mode=link \ngcc -g -O2 -pthread     -L/usr/local/lib -L/usr/local/ssl/lib   -o httpd  \nmodules.lo buildmark.o -export-dynamic server/libmain.la \nmodules/aaa/libmod_authn_file.la modules/aaa/libmod_authn_default.la \nmodules/aaa/libmod_authz_host.la modules/aaa/libmod_authz_groupfile.la \nmodules/aaa/libmod_authz_user.la modules/aaa/libmod_authnz_ldap.la \nmodules/aaa/libmod_authz_default.la modules/aaa/libmod_auth_basic.la \nmodules/filters/libmod_include.la modules/filters/libmod_filter.la \nmodules/filters/libmod_deflate.la modules/ldap/libmod_ldap.la \nmodules/loggers/libmod_log_config.la modules/metadata/libmod_env.la \nmodules/metadata/libmod_mime_magic.la modules/metadata/libmod_expires.la \nmodules/metadata/libmod_usertrack.la modules/metadata/libmod_unique_id.la \nmodules/metadata/libmod_setenvif.la modules/ssl/libmod_ssl.la \nmodules/http/libmod_http.la modules/http/libmod_mime.la \nmodules/generators/libmod_status.la modules/generators/libmod_autoindex.la \nmodules/generators/libmod_asis.la modules/generators/libmod_info.la \nmodules/generators/libmod_cgi.la modules/generators/libmod_cgid.la \nmodules/mappers/libmod_negotiation.la modules/mappers/libmod_dir.la \nmodules/mappers/libmod_actions.la modules/mappers/libmod_userdir.la \nmodules/mappers/libmod_alias.la modules/mappers/libmod_so.la \nserver/mpm/prefork/libprefork.la os/unix/libos.la -\nlm /home/colosi/dev/apache/httpd-\n2.2.0/srclib/pcre/libpcre.la /home/colosi/dev/apache/httpd-2.2.0/srclib/apr-\nutil/libaprutil-1.la -lldap -llber -lgdbm -ldb-4.0 -\nlexpat /home/colosi/dev/apache/httpd-2.2.0/srclib/apr/libapr-1.la -luuid -lrt -\nlcrypt -lpthread -ldl\nserver/.libs/libmain.a(exports.o)(.data+0xe4c): undefined reference to \n`apr_ldap_ssl_init'\nserver/.libs/libmain.a(exports.o)(.data+0xe50): undefined reference to \n`apr_ldap_ssl_deinit'\nserver/.libs/libmain.a(exports.o)(.data+0xe54): undefined reference to \n`apr_ldap_init'\nserver/.libs/libmain.a(exports.o)(.data+0xe58): undefined reference to \n`apr_ldap_info'\nserver/.libs/libmain.a(exports.o)(.data+0xe5c): undefined reference to \n`apr_ldap_get_option'\nserver/.libs/libmain.a(exports.o)(.data+0xe60): undefined reference to \n`apr_ldap_set_option'\nserver/.libs/libmain.a(exports.o)(.data+0xe64): undefined reference to \n`apr_ldap_is_ldap_url'\nserver/.libs/libmain.a(exports.o)(.data+0xe68): undefined reference to \n`apr_ldap_is_ldaps_url'\nserver/.libs/libmain.a(exports.o)(.data+0xe6c): undefined reference to \n`apr_ldap_is_ldapi_url'\nserver/.libs/libmain.a(exports.o)(.data+0xe70): undefined reference to \n`apr_ldap_url_parse_ext'\nserver/.libs/libmain.a(exports.o)(.data+0xe74): undefined reference to \n`apr_ldap_url_parse'\nmodules/aaa/.libs/libmod_authnz_ldap.a(mod_authnz_ldap.o)(.text+0x140b): In \nfunction `mod_auth_ldap_parse_url':\n/home/colosi/dev/apache/httpd-2.2.0/modules/aaa/mod_authnz_ldap.c:843: \nundefined reference to `apr_ldap_url_parse'\nmodules/ldap/.libs/libmod_ldap.a(util_ldap.o)(.text+0x269): In function \n`uldap_connection_open':\n/home/colosi/dev/apache/httpd-2.2.0/modules/ldap/util_ldap.c:243: undefined \nreference to `apr_ldap_init'\nmodules/ldap/.libs/libmod_ldap.a(util_ldap.o)\n(.text+0x2dd):/home/colosi/dev/apache/httpd-2.2.0/modules/ldap/util_ldap.c:281: \nundefined reference to `apr_ldap_set_option'\nmodules/ldap/.libs/libmod_ldap.a(util_ldap.o)\n(.text+0x322):/home/colosi/dev/apache/httpd-2.2.0/modules/ldap/util_ldap.c:300: \nundefined reference to `apr_ldap_set_option'\nmodules/ldap/.libs/libmod_ldap.a(util_ldap.o)\n(.text+0x351):/home/colosi/dev/apache/httpd-2.2.0/modules/ldap/util_ldap.c:330: \nundefined reference to `apr_ldap_set_option'\nmodules/ldap/.libs/libmod_ldap.a(util_ldap.o)\n(.text+0x3ba):/home/colosi/dev/apache/httpd-2.2.0/modules/ldap/util_ldap.c:268: \nundefined reference to `apr_ldap_set_option'\nmodules/ldap/.libs/libmod_ldap.a(util_ldap.o)(.text+0x20cd): In function \n`util_ldap_cleanup_module':\n/home/colosi/dev/apache/httpd-2.2.0/modules/ldap/util_ldap.c:1782: undefined \nreference to `apr_ldap_ssl_deinit'\nmodules/ldap/.libs/libmod_ldap.a(util_ldap.o)(.text+0x215a): In function \n`util_ldap_post_config':\n/home/colosi/dev/apache/httpd-2.2.0/modules/ldap/util_ldap.c:1894: undefined \nreference to `apr_ldap_info'\nmodules/ldap/.libs/libmod_ldap.a(util_ldap.o)\n(.text+0x218d):/home/colosi/dev/apache/httpd-\n2.2.0/modules/ldap/util_ldap.c:1909: undefined reference to `apr_ldap_ssl_init'\nmodules/ldap/.libs/libmod_ldap.a(util_ldap.o)\n(.text+0x21fa):/home/colosi/dev/apache/httpd-\n2.2.0/modules/ldap/util_ldap.c:1914: undefined reference to \n`apr_ldap_set_option'\ncollect2: ld returned 1 exit status\nmake[1]: *** [httpd] Error 1\nmake[1]: Leaving directory `/home/colosi/dev/apache/httpd-2.2.0'\nmake: *** [all-recursive] Error 1"}, {"count": 1, "tags": [], "creator": "bnicholes@apache.org", "text": "It appears that you are linking with the wrong APR and APR-Util.  It should be \nversion 1.2.x or higher.", "id": 86817, "time": "2006-03-14T22:02:13Z", "bug_id": 38965, "creation_time": "2006-03-14T22:02:13Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "alcol@hotmail.com", "attachment_id": null, "id": 86818, "time": "2006-03-14T22:06:08Z", "bug_id": 38965, "creation_time": "2006-03-14T22:06:08Z", "is_private": false, "text": "I use the ones shipped with httpd v2.2.0"}, {"count": 3, "text": "p.s. the system is new with no previous installations of apr and apr-util\n", "bug_id": 38965, "attachment_id": null, "id": 86819, "time": "2006-03-14T22:07:52Z", "creator": "alcol@hotmail.com", "creation_time": "2006-03-14T22:07:52Z", "tags": [], "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 38965, "text": "as you see inside the reported lines:\n\nI/home/colosi/dev/apache/httpd-2.2.0/srclib/apr/include -\nI/home/colosi/dev/apache/httpd-2.2.0/srclib/apr-util/include -\n\nare inside the https-2.2.0 srclib and original tarball shipment.\n", "id": 86820, "time": "2006-03-14T22:10:35Z", "creator": "alcol@hotmail.com", "creation_time": "2006-03-14T22:10:35Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 38965, "attachment_id": null, "id": 86821, "time": "2006-03-14T22:25:06Z", "creator": "rpluem@apache.org", "creation_time": "2006-03-14T22:25:06Z", "is_private": false, "text": "Could you please attach the output of your configure call, such that we can see\nthat apr-util really detected LDAP?\nBTW: If you use the shipped apr / apr-util you do not need to add --with-apr /\n--with-apr-util to your configure call.\n"}, {"count": 6, "tags": [], "creator": "alcol@hotmail.com", "attachment_id": null, "id": 86822, "time": "2006-03-14T22:45:37Z", "bug_id": 38965, "creation_time": "2006-03-14T22:45:37Z", "is_private": false, "text": "[root@nova5 apr]# /usr/local/apr/bin/apr-1-config --version\n1.2.2\n[root@nova5 apr]# /usr/local/apr/bin/apu-1-config --version\n1.2.2\n\n./configure --enable-deflate --enable-mime-magic --enable-expires --enable-\nusertrack --enable-unique-id --enable-ssl --with-ssl=/usr/local/ssl --enable-\nhttp --enable-mod-info --enable-info --enable-cgi --enable-cgid --enable-\nspelling --with-ldap-include=/home/colosi/dev/ldap/openldap-2.3.20/include --\nwith-ldap-lib=/home/colosi/dev/ldap/openldap-2.3.20/libraries --with-ldap --\nenable-authnz-ldap --enable-ldap --enable-module=all --with-apr=./srclib/apr --\nwith-apr-util=./srclib/apr-util/\n"}, {"count": 7, "tags": [], "bug_id": 38965, "attachment_id": null, "id": 86823, "time": "2006-03-14T22:54:04Z", "creator": "alcol@hotmail.com", "creation_time": "2006-03-14T22:54:04Z", "is_private": false, "text": "With configure line: ./configure --enable-deflate --enable-mime-magic --enable-\nexpires --enable-usertrack --enable-unique-id --enable-ssl --with-\nssl=/usr/local/ssl --enable-http --enable-mod-info --enable-info --enable-cgi -\n-enable-cgid --enable-spelling --enable-authnz-ldap --enable-\nldap=/usr/local/ldap/openldap2.3.20/ --enable-module=all\n\nI get: mod_authnz_ldap.c:40:2: #error mod_authnz_ldap requires APR-util to \nhave LDAP support built in. To fix add --with-ldap to ./configure.\n\nWhy it is not passed?\n\n\nMaking all in aaa\nmake[2]: Entering directory `/home/colosi/dev/apache/httpd-2.2.0/modules/aaa'\nmake[3]: Entering directory `/home/colosi/dev/apache/httpd-2.2.0/modules/aaa'\n/usr/local/apr/build-1/libtool --silent --mode=compile gcc -g -O2 -pthread    -\nDLINUX=2 -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE    -\nI/home/colosi/dev/apache/httpd-2.2.0/srclib/pcre -I. -\nI/home/colosi/dev/apache/httpd-2.2.0/os/unix -I/home/colosi/dev/apache/httpd-\n2.2.0/server/mpm/prefork -I/home/colosi/dev/apache/httpd-2.2.0/modules/http -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/filters -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/proxy -\nI/home/colosi/dev/apache/httpd-2.2.0/include -I/home/colosi/dev/apache/httpd-\n2.2.0/modules/generators -I/home/colosi/dev/apache/httpd-\n2.2.0/modules/mappers -I/home/colosi/dev/apache/httpd-2.2.0/modules/database -\nI/usr/local/apr/include/apr-1 -I/usr/local/include -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/proxy/../generators -\nI/usr/local/ssl/include -I/usr/kerberos/include -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/ssl -\nI/home/colosi/dev/apache/httpd-2.2.0/modules/dav/main  -prefer-non-pic -\nstatic -c mod_authnz_ldap.c && touch mod_authnz_ldap.lo\nmod_authnz_ldap.c:40:2: #error mod_authnz_ldap requires APR-util to have LDAP \nsupport built in. To fix add --with-ldap to ./configure.\nmod_authnz_ldap.c:62: parse error before \"deref_options\"\nmod_authnz_ldap.c:62: warning: no semicolon at end of struct or union\nmod_authnz_ldap.c:76: parse error before '}' token\nmod_authnz_ldap.c:76: warning: data definition has no type or storage class\nmod_authnz_ldap.c:92: parse error before '*' token\nmod_authnz_ldap.c:92: warning: data definition has no type or storage class\nmod_authnz_ldap.c:93: parse error before '*' token\nmod_authnz_ldap.c:93: warning: data definition has no type or storage class\nmod_authnz_ldap.c:94: parse error before '*' token\nmod_authnz_ldap.c:94: warning: data definition has no type or storage class\nmod_authnz_ldap.c:95: parse error before '*' token\nmod_authnz_ldap.c:95: warning: data definition has no type or storage class\nmod_authnz_ldap.c:96: parse error before '*' token\nmod_authnz_ldap.c:96: warning: data definition has no type or storage class\nmod_authnz_ldap.c:97: parse error before '*' token\nmod_authnz_ldap.c:97: warning: data definition has no type or storage class\nmod_authnz_ldap.c:98: parse error before '*' token\nmod_authnz_ldap.c:98: warning: data definition has no type or storage class\nmod_authnz_ldap.c:177: parse error before \"authn_ldap_config_t\"\nmod_authnz_ldap.c: In function `authn_ldap_build_filter':\nmod_authnz_ldap.c:186: `sent_user' undeclared (first use in this function)\nmod_authnz_ldap.c:186: (Each undeclared identifier is reported only once\nmod_authnz_ldap.c:186: for each function it appears in.)\nmod_authnz_ldap.c:187: `r' undeclared (first use in this function)\nmod_authnz_ldap.c:192: `sent_filter' undeclared (first use in this function)\nmod_authnz_ldap.c:196: `sec' undeclared (first use in this function)\nmod_authnz_ldap.c:217: `filtbuf' undeclared (first use in this function)\nmod_authnz_ldap.c: In function `create_authnz_ldap_dir_config':\nmod_authnz_ldap.c:277: `sec' undeclared (first use in this function)\nmod_authnz_ldap.c:278: parse error before ')' token\nmod_authnz_ldap.c:295: `always' undeclared (first use in this function)\nmod_authnz_ldap.c: In function `authnz_ldap_cleanup_connection_close':\nmod_authnz_ldap.c:313: `util_ldap_connection_t' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:313: `ldc' undeclared (first use in this function)\nmod_authnz_ldap.c:314: called object is not a function\nmod_authnz_ldap.c: In function `authn_ldap_check_password':\nmod_authnz_ldap.c:335: `sec' undeclared (first use in this function)\nmod_authnz_ldap.c:336: parse error before ')' token\nmod_authnz_ldap.c:338: `util_ldap_connection_t' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:338: `ldc' undeclared (first use in this function)\nmod_authnz_ldap.c:365: called object is not a function\nmod_authnz_ldap.c:380: called object is not a function\nmod_authnz_ldap.c:387: called object is not a function\nmod_authnz_ldap.c:396: called object is not a function\nmod_authnz_ldap.c:397: called object is not a function\nmod_authnz_ldap.c:400: `LDAP_SERVER_DOWN' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:407: `LDAP_SUCCESS' undeclared (first use in this function)\nmod_authnz_ldap.c:413: `LDAP_NO_SUCH_OBJECT' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c: In function `authz_ldap_check_user_access':\nmod_authnz_ldap.c:472: `sec' undeclared (first use in this function)\nmod_authnz_ldap.c:473: parse error before ')' token\nmod_authnz_ldap.c:475: `util_ldap_connection_t' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:475: `ldc' undeclared (first use in this function)\nmod_authnz_ldap.c:503: called object is not a function\nmod_authnz_ldap.c:560: called object is not a function\nmod_authnz_ldap.c:563: `LDAP_SUCCESS' undeclared (first use in this function)\nmod_authnz_ldap.c:599: called object is not a function\nmod_authnz_ldap.c:601: `LDAP_COMPARE_TRUE' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:619: called object is not a function\nmod_authnz_ldap.c:645: called object is not a function\nmod_authnz_ldap.c:694: called object is not a function\nmod_authnz_ldap.c:728: called object is not a function\nmod_authnz_ldap.c:765: called object is not a function\nmod_authnz_ldap.c:773: called object is not a function\nmod_authnz_ldap.c:784: `LDAP_FILTER_ERROR' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c: In function `mod_auth_ldap_parse_url':\nmod_authnz_ldap.c:835: `apr_ldap_url_desc_t' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:835: `urld' undeclared (first use in this function)\nmod_authnz_ldap.c:836: `apr_ldap_err_t' undeclared (first use in this function)\nmod_authnz_ldap.c:836: `result' undeclared (first use in this function)\nmod_authnz_ldap.c:838: `sec' undeclared (first use in this function)\nmod_authnz_ldap.c:859: `LDAP_SCOPE_SUBTREE' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:860: `LDAP_SCOPE_BASE' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:861: `LDAP_SCOPE_ONELEVEL' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:916: `APR_LDAP_NONE' undeclared (first use in this function)\nmod_authnz_ldap.c:919: `APR_LDAP_SSL' undeclared (first use in this function)\nmod_authnz_ldap.c:922: `APR_LDAP_STARTTLS' undeclared (first use in this \nfunction)\nmod_authnz_ldap.c:935: `LDAPS_PORT' undeclared (first use in this function)\nmod_authnz_ldap.c:941: `LDAP_PORT' undeclared (first use in this function)\nmod_authnz_ldap.c: In function `mod_auth_ldap_set_deref':\nmod_authnz_ldap.c:953: `sec' undeclared (first use in this function)\nmod_authnz_ldap.c:956: `never' undeclared (first use in this function)\nmod_authnz_ldap.c:959: `searching' undeclared (first use in this function)\nmod_authnz_ldap.c:962: `finding' undeclared (first use in this function)\nmod_authnz_ldap.c:965: `always' undeclared (first use in this function)\nmod_authnz_ldap.c: In function `mod_auth_ldap_add_group_attribute':\nmod_authnz_ldap.c:977: `sec' undeclared (first use in this function)\nmod_authnz_ldap.c: At top level:\nmod_authnz_ldap.c:1023: parse error before ')' token\nmod_authnz_ldap.c:1023: initializer element is not constant\nmod_authnz_ldap.c:1023: (near initialization for `authnz_ldap_cmds\n[1].cmd_data')\nmod_authnz_ldap.c:1023: initializer element is not constant\nmod_authnz_ldap.c:1023: (near initialization for `authnz_ldap_cmds[1]')\nmod_authnz_ldap.c:1027: initializer element is not constant\nmod_authnz_ldap.c:1027: (near initialization for `authnz_ldap_cmds[2].func')\nmod_authnz_ldap.c:1027: parse error before ')' token\nmod_authnz_ldap.c:1027: initializer element is not constant\nmod_authnz_ldap.c:1027: (near initialization for `authnz_ldap_cmds\n[2].cmd_data')\nmod_authnz_ldap.c:1027: initializer element is not constant\nmod_authnz_ldap.c:1027: (near initialization for `authnz_ldap_cmds[2]')\nmod_authnz_ldap.c:1033: initializer element is not constant\nmod_authnz_ldap.c:1033: (near initialization for `authnz_ldap_cmds[3].func')\nmod_authnz_ldap.c:1033: parse error before ')' token\nmod_authnz_ldap.c:1033: initializer element is not constant\nmod_authnz_ldap.c:1033: (near initialization for `authnz_ldap_cmds\n[3].cmd_data')\nmod_authnz_ldap.c:1033: initializer element is not constant\nmod_authnz_ldap.c:1033: (near initialization for `authnz_ldap_cmds[3]')\nmod_authnz_ldap.c:1038: initializer element is not constant\nmod_authnz_ldap.c:1038: (near initialization for `authnz_ldap_cmds[4].func')\nmod_authnz_ldap.c:1038: parse error before ')' token\nmod_authnz_ldap.c:1038: initializer element is not constant\nmod_authnz_ldap.c:1038: (near initialization for `authnz_ldap_cmds\n[4].cmd_data')\nmod_authnz_ldap.c:1038: initializer element is not constant\nmod_authnz_ldap.c:1038: (near initialization for `authnz_ldap_cmds[4]')\nmod_authnz_ldap.c:1045: initializer element is not constant\nmod_authnz_ldap.c:1045: (near initialization for `authnz_ldap_cmds[5].func')\nmod_authnz_ldap.c:1045: parse error before ')' token\nmod_authnz_ldap.c:1045: initializer element is not constant\nmod_authnz_ldap.c:1045: (near initialization for `authnz_ldap_cmds\n[5].cmd_data')\nmod_authnz_ldap.c:1045: initializer element is not constant\nmod_authnz_ldap.c:1045: (near initialization for `authnz_ldap_cmds[5]')\nmod_authnz_ldap.c:1049: initializer element is not constant\nmod_authnz_ldap.c:1049: (near initialization for `authnz_ldap_cmds[6].func')\nmod_authnz_ldap.c:1049: initializer element is not constant\nmod_authnz_ldap.c:1049: (near initialization for `authnz_ldap_cmds[6]')\nmod_authnz_ldap.c:1055: initializer element is not constant\nmod_authnz_ldap.c:1055: (near initialization for `authnz_ldap_cmds[7].func')\nmod_authnz_ldap.c:1055: parse error before ')' token\nmod_authnz_ldap.c:1055: initializer element is not constant\nmod_authnz_ldap.c:1055: (near initialization for `authnz_ldap_cmds\n[7].cmd_data')\nmod_authnz_ldap.c:1055: initializer element is not constant\nmod_authnz_ldap.c:1055: (near initialization for `authnz_ldap_cmds[7]')\nmod_authnz_ldap.c:1060: initializer element is not constant\nmod_authnz_ldap.c:1060: (near initialization for `authnz_ldap_cmds[8].func')\nmod_authnz_ldap.c:1060: initializer element is not constant\nmod_authnz_ldap.c:1060: (near initialization for `authnz_ldap_cmds[8]')\nmod_authnz_ldap.c:1070: initializer element is not constant\nmod_authnz_ldap.c:1070: (near initialization for `authnz_ldap_cmds[9].func')\nmod_authnz_ldap.c:1070: initializer element is not constant\nmod_authnz_ldap.c:1070: (near initialization for `authnz_ldap_cmds[9]')\nmod_authnz_ldap.c:1072: initializer element is not constant\nmod_authnz_ldap.c:1072: (near initialization for `authnz_ldap_cmds[10]')\nmod_authnz_ldap.c: In function `ImportULDAPOptFn':\nmod_authnz_ldap.c:1165: `apr_OFN_uldap_connection_close_t' undeclared (first \nuse in this function)\nmod_authnz_ldap.c:1165: parse error before ')' token\nmod_authnz_ldap.c:1166: `apr_OFN_uldap_connection_find_t' undeclared (first \nuse in this function)\nmod_authnz_ldap.c:1166: parse error before ')' token\nmod_authnz_ldap.c:1167: `apr_OFN_uldap_cache_comparedn_t' undeclared (first \nuse in this function)\nmod_authnz_ldap.c:1167: parse error before ')' token\nmod_authnz_ldap.c:1168: `apr_OFN_uldap_cache_compare_t' undeclared (first use \nin this function)\nmod_authnz_ldap.c:1168: parse error before ')' token\nmod_authnz_ldap.c:1169: `apr_OFN_uldap_cache_checkuserid_t' undeclared (first \nuse in this function)\nmod_authnz_ldap.c:1169: parse error before ')' token\nmod_authnz_ldap.c:1170: `apr_OFN_uldap_cache_getuserdn_t' undeclared (first \nuse in this function)\nmod_authnz_ldap.c:1170: parse error before ')' token\nmod_authnz_ldap.c:1171: `apr_OFN_uldap_ssl_supported_t' undeclared (first use \nin this function)\nmod_authnz_ldap.c:1171: parse error before ')' token\nmake[3]: *** [mod_authnz_ldap.lo] Error 1\nmake[3]: Leaving directory `/home/colosi/dev/apache/httpd-2.2.0/modules/aaa'\nmake[2]: *** [all-recursive] Error 1\nmake[2]: Leaving directory `/home/colosi/dev/apache/httpd-2.2.0/modules/aaa'\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory `/home/colosi/dev/apache/httpd-2.2.0/modules'\nmake: *** [all-recursive] Error 1\n"}, {"count": 8, "text": "followed your sugestion and taked out --with-apr and apr-util\ncorrected the path with-ldap=\nbut I get out the same.\n\nConf line:\n./configure --enable-deflate --enable-mime-magic --enable-expires --enable-\nusertrack --enable-unique-id --enable-ssl --with-ssl=/usr/local/ssl --enable-\nhttp --enable-mod-info --enable-info --enable-cgi --enable-cgid --enable-\nspelling --enable-authnz-ldap --enable-ldap=/home/colosi/dev/ldap/openldap-\n2.3.20/ --enable-module=all --with-ldap\n", "bug_id": 38965, "attachment_id": null, "id": 86824, "time": "2006-03-14T23:00:55Z", "creator": "alcol@hotmail.com", "creation_time": "2006-03-14T23:00:55Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "bug_id": 38965, "text": "Compiled in modules:\n  core.c\n  mod_authn_file.c\n  mod_authn_default.c\n  mod_authz_host.c\n  mod_authz_groupfile.c\n  mod_authz_user.c\n  mod_authnz_ldap.c\n  mod_authz_default.c\n  mod_auth_basic.c\n  mod_include.c\n  mod_filter.c\n  mod_deflate.c\n  util_ldap.c\n  mod_log_config.c\n  mod_env.c\n  mod_mime_magic.c\n  mod_expires.c\n  mod_usertrack.c\n  mod_unique_id.c\n  mod_setenvif.c\n  mod_ssl.c\n  prefork.c\n  http_core.c\n  mod_mime.c\n  mod_status.c\n  mod_autoindex.c\n  mod_asis.c\n  mod_info.c\n  mod_cgi.c\n  mod_cgid.c\n  mod_negotiation.c\n  mod_dir.c\n  mod_actions.c\n  mod_userdir.c\n  mod_alias.c\n  mod_so.c\n\n./configure --enable-deflate --enable-mime-magic --enable-expires --enable-\nusertrack --enable-unique-id --enable-ssl --with-ssl=/usr/local/ssl --enable-\nhttp --enable-mod-info --enable-info --enable-cgi --enable-cgid --enable-\nspelling --enable-module=all --with-ldap --enable-ldap --enable-auth-ldap --\nenable-authnz-ldap --with-ldap-include=/home/colosi/dev/ldap/novell-cldap-\ndevel-2006.02.20-1linux/include/ --with-ldap-lib=/home/colosi/dev/ldap/novell-\ncldap-devel-2006.02.20-1linux/lib/ --prefix=/usr/local/apache220\n\nWith openldap-2.3.20.tgz or Netscape  ldapcsdk5.06-\nLinux2.2_x86_glibc_PTH_OPT.OBJ.tar.gz         I DON'T COMPILE\n\nWith novell-cldap-devel-2006.02.20-1linux.tar.gz I compile HTTPD 2.2.0 FINE!\nWith this LIBS is OK!.\n\n\nWhy not with OpenLDAP and Netscape?\n", "id": 86825, "time": "2006-03-15T01:01:59Z", "creator": "alcol@hotmail.com", "creation_time": "2006-03-15T01:01:59Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 38965, "attachment_id": null, "text": "(In reply to comment #6)\n> [root@nova5 apr]# /usr/local/apr/bin/apr-1-config --version\n> 1.2.2\n> [root@nova5 apr]# /usr/local/apr/bin/apu-1-config --version\n> 1.2.2\n\nThis is confusing. You said you had no other installation of apr on your box.\nThe bundled ones do install in subdirs of the httpd directories, so from where\ndo you get these apr versions?\n\n> \n> ./configure --enable-deflate --enable-mime-magic --enable-expires --enable-\n> usertrack --enable-unique-id --enable-ssl --with-ssl=/usr/local/ssl --enable-\n> http --enable-mod-info --enable-info --enable-cgi --enable-cgid --enable-\n> spelling --with-ldap-include=/home/colosi/dev/ldap/openldap-2.3.20/include --\n> with-ldap-lib=/home/colosi/dev/ldap/openldap-2.3.20/libraries --with-ldap --\n> enable-authnz-ldap --enable-ldap --enable-module=all --with-apr=./srclib/apr \n\nI am still missing what configure printed out in the case where it did not work.\nPlease attach this output.\n\n", "id": 86835, "time": "2006-03-15T09:15:32Z", "creator": "rpluem@apache.org", "creation_time": "2006-03-15T09:15:32Z", "is_private": false}, {"count": 11, "attachment_id": null, "bug_id": 38965, "text": "the apr on that dirs are the binaries builted with the sources inside apache. \nIs strange you ask :)\n\nThe other you ask is there in the ticket or we don't keep in touch in what you \nwant in real.\n\nOwever I said that with Novell LDAP SDK I succesfully compiled HTTPD but not \nwith sun and OpenLDAP libs.\n", "id": 86932, "time": "2006-03-16T19:58:11Z", "creator": "alcol@hotmail.com", "creation_time": "2006-03-16T19:58:11Z", "tags": [], "is_private": false}, {"count": 12, "tags": [], "bug_id": 38965, "attachment_id": null, "id": 86933, "time": "2006-03-16T20:00:33Z", "creator": "alcol@hotmail.com", "creation_time": "2006-03-16T20:00:33Z", "is_private": false, "text": "a question if you can that is not related to the ticket:\nthere is no way to transfer some info of the authenticated user from LDAP \nserver like email address or other informations?. I need some info to be \nevaluated by CGI done by me.\n\nI have seen the filters but are not my target becouse simply I need to \ntransfer to ENV vars some variables/info from the ldap entry from the \nauthenticate user.\n"}, {"count": 13, "attachment_id": null, "bug_id": 38965, "text": "(In reply to comment #11)\n> the apr on that dirs are the binaries builted with the sources inside apache. \n> Is strange you ask :)\n\nBut they do not get installed in separate directories by default. The .so and .h\nfiles of apr get installed in subdirectories below the prefix of httpd. As you\nspecified no --prefix option to configure it should be below /usr/local/apache2.\nDo you compile and install the bundled apr / apr-util separately, before\ncompiling httpd?\n\n> \n> The other you ask is there in the ticket or we don't keep in touch in what you \n> want in real.\n\nI miss the output of configure's test result. This is not in the ticket. You\npasted much output from your make call, but not from the configure call.", "id": 86934, "time": "2006-03-16T20:29:15Z", "creator": "rpluem@apache.org", "creation_time": "2006-03-16T20:29:15Z", "tags": [], "is_private": false}, {"count": 14, "tags": [], "creator": "alcol@hotmail.com", "text": "(In reply to comment #13)\n> (In reply to comment #11)\n> > the apr on that dirs are the binaries builted with the sources inside \napache. \n> > Is strange you ask :)\n> But they do not get installed in separate directories by default. The .so \nand .h\n> files of apr get installed in subdirectories below the prefix of httpd. As \nyou\n> specified no --prefix option to configure it should be \nbelow /usr/local/apache2.\n> Do you compile and install the bundled apr / apr-util separately, before\n> compiling httpd?\n\nYa, tried it too! tried many ways. Owever I WANT to repeat that the same \nsource tree as compiled fine with Novell LDAP LIBS. The problem is only with \nNetscape and OpenLDAP LDAP SDK LIBs\n\n> > The other you ask is there in the ticket or we don't keep in touch in what \nyou \n> > want in real.\n> I miss the output of configure's test result. This is not in the ticket. You\n> pasted much output from your make call, but not from the configure call.\n\nOK, now I understood. I'll paste tomorrow GMT+1 Italy Time (ASAP)\n", "id": 86937, "time": "2006-03-16T22:35:31Z", "bug_id": 38965, "creation_time": "2006-03-16T22:35:31Z", "is_private": false, "attachment_id": null}, {"count": 15, "attachment_id": null, "bug_id": 38965, "text": "\nWith this configure line now httpd 2.2.0 compile fine even with iPlanet SDK:\nQuestion: But what was wrong with past configure line?\n\n./configure --enable-deflate --enable-mime-magic --enable-expires --enable-\nusertrack --enable-unique-id --enable-ssl --with-ssl=/usr/local/ssl --enable-\nhttp --enable-mod-info --enable-info --enable-cgi --enable-cgid --enable-\nspelling --enable-module=all --with-ldap --enable-ldap --enable-auth-ldap --\nenable-authnz-ldap --with-ldap-include=../../ldap/iplanet/include --with-ldap-\nlib=../../ldap/iplanet/lib/\n\n=================================================================\n              iPlanet LDAP SDK for C, version 5.x\n=================================================================\n\nDocumentation for this release of the LDAP SDK for C is located\nat the following URL:\n\n   http://docs.iplanet.com/docs/manuals/directory.html#SDKC\n\nThe documentation set includes the \"Release Notes\" (in HTML\nformat) and the \"Netscape LDAP SDK for C Programmer's Guide.\"\nThe Programmer's Guide is available in PDF and HTML formats.\n\nPlease note that the LDAP SDK for C library is most of the time\nahead of our official documentation.  For example, we currently\ndon't have a 5.0 branded version of the documentation, however,\nusing the latest 4.1 version should be sufficient.\n\nPortions of this LDAP SDK are also available in source code form\nas part of the Mozilla.org open source project under the terms of\nthe Netscape Public License.  Please Refer to the following site\nfor more information on how you can get that source code:\n\n   http://www.mozilla.org/directory.\n\nAny terms of Sun's license agreement covering this LDAP SDK which\nare different from the Netscape Public License are offered by Sun\nalone and not by any other party.\n", "id": 87180, "time": "2006-03-23T21:41:47Z", "creator": "alcol@hotmail.com", "creation_time": "2006-03-23T21:41:47Z", "tags": [], "is_private": false}, {"count": 16, "text": "Hope it helps:\n\"./configure\" \\\n\"--enable-mods-shared=all\" \\\n\"--enable-ssl=shared\" \\\n\"--enable-ssl\" \\\n\"--with-ssl=/oracle/home/peter.buki/mis/ssl\" \\\n\"--enable-proxy\" \\\n\"--enable-so\" \\\n\"--enable-authnz-ldap\" \\\n\"--enable-authn-dbd\" \\\n\"--enable-ldap\" \\\n\"--prefix=/oracle/home/peter.buki/mis\" \\\n\"--with-ldap\" \\\n\"--with-apr=./srclib/apr\" \\\n\"--with-apr-util=./srclib/apr-util/\" \n\nOutput:\nConfiguring Apache Portable Runtime library ...\n\nchecking for APR... configure: error: the --with-apr parameter is incorrect. It\nmust specify an install prefix, a build directory, or an apr-config file.", "bug_id": 38965, "attachment_id": null, "id": 90135, "time": "2006-06-13T12:39:51Z", "creator": "peter.buki@vodafone.hu", "creation_time": "2006-06-13T12:39:51Z", "tags": [], "is_private": false}, {"count": 17, "attachment_id": null, "bug_id": 38965, "text": "(Without \"--with-apr-util\")\nWith:\n\"./configure\" \\\n\"--enable-mods-shared=all\" \\\n\"--enable-ssl=shared\" \\\n\"--enable-ssl\" \\\n\"--with-ssl=/oracle/home/peter.buki/mis/ssl\" \\\n\"--enable-proxy\" \\\n\"--enable-so\" \\\n\"--enable-authnz-ldap\" \\\n\"--enable-authn-dbd\" \\\n\"--enable-ldap\" \\\n\"--prefix=/oracle/home/peter.buki/mis\" \\\n\"--with-ldap\" \\\n\"--with-apr=./srclib/apr\" \\\n\nOutput:\nConfiguring Apache Portable Runtime Utility library...\n\nchecking for APR-util... reconfig\nconfigure: error: Cannot use an external APR with the bundled APR-util\n\n", "id": 90137, "time": "2006-06-13T12:45:52Z", "creator": "peter.buki@vodafone.hu", "creation_time": "2006-06-13T12:45:52Z", "tags": [], "is_private": false}]