[{"count": 0, "tags": [], "text": "The servlet API spec reads as follows:\n\ngetLocalAddr\npublic java.lang.String getLocalAddr()The default behavior of this method is to \nreturn getLocalAddr() on the wrapped request object. \n\nSpecified by:\ngetLocalAddr in interface ServletRequest\nReturns:\na String containing the IP address on which the request was received.\nSince: \n2.4 \n\nI tracked down the bug to the following code:\n\nHttp11AprProcessor.java \n\nThe action() method which is called with \n\nActionCode.ACTION_REQ_LOCAL_ADDR_ATTRIBUTE\n\nassings a hostname instead of an ip address to the localAddr variable \n\n1050: localAddr = addr.hostname;\n\nwhich then sets it in the request object\n\n1058: request.localAddr().setString(localAddr);", "is_private": false, "id": 82979, "creator": "nrock@infinitecampus.org", "time": "2005-11-29T16:58:02Z", "bug_id": 37693, "creation_time": "2005-11-29T16:58:02Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 82980, "time": "2005-11-29T17:01:11Z", "bug_id": 37693, "creation_time": "2005-11-29T17:01:11Z", "text": "\n\n*** This bug has been marked as a duplicate of 37673 ***"}, {"count": 2, "tags": [], "creator": "nrock@infinitecampus.org", "attachment_id": 17076, "is_private": false, "id": 82982, "time": "2005-11-29T17:02:00Z", "bug_id": 37693, "creation_time": "2005-11-29T17:02:00Z", "text": "Created attachment 17076\nSimple JSP demonstrating the bug\n\nThis JSP demonstrates the bug clearly. It has both request.getLocalName() which\nshould return the local server's hostname. It also has request.getLocalAddr()\nwhich returns the machines hostname, it should return the local server's IP\naddress. Open the .jsp in Tomcat 5.5.12 using the APR native connector."}]