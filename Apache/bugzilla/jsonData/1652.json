[{"count": 0, "tags": [], "bug_id": 1652, "attachment_id": null, "id": 2308, "time": "2001-05-08T05:56:26Z", "creator": "leon.poyyayil@trivadis.com", "creation_time": "2001-05-08T05:56:26Z", "is_private": false, "text": "build.xml:\n...\n  <jjtree\n     target=\"${location.src}/${location.pkg}/MyParser.jjt\"\n     javacchome=\"${location.javacc}/bin/lib\"\n     outputdirectory=\"${location.build}/${location.pkg}\">\n  </jjtree>\n...\n\nThis will generate the MyParser.jj although MyParser.jjt hadn't changed since\nthe last generation. This is not in accordance with the manual which states\n\"This task only invokes JJTree if the grammar file is newer than the generated\nJavaCC file.\"\n\nVerified with the nightly build source:\n  /builds/jakarta-ant/nightly/2001-05-07/jakarta-ant-1.4alpha-src.tar.gz\n\nCan be fixed as follows:\nin src/main/org/apache/tools/ant/taskdefs/optional/javacc/JJTree.java:190\n\nchange the line:\nfinal File javaFile = new File(\n  target.toString().substring(0, target.toString().indexOf(\".jjt\")) + \".jj\");\n\nto something like:\nfinal File javaFile = getOutputJavaFile(outputDirectory, target);\n\nsuch a method (getOutputJavaFile) should consider the output directory. An\nimplementation of such a method already exists in JavaCC.java in the same\ndirectory. It only needs some update to handle the different extensions\nrequired for this task (.jjt -> jj instead of jj -> java).\n\nHope this helped. If you need further info feel free to contact me:\nmailto:leon.poyyayil@trivadis.com\n\nGreetings\nLeon"}, {"count": 1, "tags": [], "text": "Created attachment 145\nproposed solution: additional method with according call to it", "attachment_id": 145, "id": 2311, "creator": "leon.poyyayil@trivadis.com", "time": "2001-05-08T06:45:45Z", "bug_id": 1652, "creation_time": "2001-05-08T06:45:45Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 1652, "attachment_id": null, "text": "should be fixed in nightly build 2001-07-05 (cannot test it myself)", "id": 3390, "time": "2001-07-04T03:32:51Z", "creator": "bodewig@apache.org", "creation_time": "2001-07-04T03:32:51Z", "is_private": false}]