[{"count": 0, "tags": [], "creator": "nicolas.mailhot@laposte.net", "attachment_id": null, "id": 125677, "time": "2009-03-22T03:40:08Z", "bug_id": 46886, "creation_time": "2009-03-22T03:40:08Z", "is_private": false, "text": "I use mod_proxy as a transparent proxy on my small lan. It seem to work well and is much simpler than trying to configure proxy settings in every possible app and computer\n\nHowever, for some reason, it fails on http://www.dvdanime.net/ and I can't find any workaround for the bug in the online documentation.\n\nI get a:\n\"Virtual host not found or CGI access not enabled on this server\" instead of the web site content\n\niptables magic:\n-A PREROUTING -s 192.168.1.0/24 -i eth1 -p tcp --dport http -j REDIRECT --to-por\nt tproxy\n-A OUTPUT -m owner ! --gid-owner apache -p tcp --dport http -j REDIRECT --to-por\nt tproxy\n-A POSTROUTING -s 192.168.1.0/24 -o eth0 -j MASQUERADE\n\nmod_proxy config:\n<IfModule mod_proxy.c>\n\nListen 127.0.0.1:8081\nListen 192.168.1.1:8081\nNameVirtualHost *:8081\n\n<VirtualHost *:8081>\n\nLogFormat \"%h %l %u %t %{Host}i \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-agent}i\\\"\" proxy\n\nCustomLog logs/proxy.log proxy\n\nProxyRequests On\nNoProxy localhost 192.168.1.0/24 127.0.0.1\n\nProxyFtpDirCharset UTF-8\n\n<IfModule mod_rewrite.c>\n  RewriteEngine On\n  RewriteCond %{HTTP:Via} ^$\n  RewriteRule (.*) http://%{HTTP_HOST}$1 [P]\n</IfModule>\n\n<IfModule mod_cache.c>\n<IfModule mod_disk_cache.c>\n<IfModule mod_mem_cache.c>\n\n#General settings\n# 1h\nCacheDefaultExpire 3600\n# 7j\nCacheMaxExpire 604800\n\nCacheEnable disk http://download.fedora.redhat.com/pub/fedora/linux/\nCacheEnable disk http://redhat.download.fedoraproject.org/pub/fedora/linux/\nCacheEnable disk http://rpm.livna.org/fedora/\nCacheEnable disk http://livna-dl.reloumirrors.net/fedora/\nCacheEnable disk http://koji.fedoraproject.org/static-repos/\nCacheEnable disk http://koji.fedoraproject.org/packages/\nCacheEnable disk http://kojipkgs.fedoraproject.org/packages/\nCacheEnable disk http://download1.rpmfusion.org/free/fedora/\nCacheEnable mem /\n\nCacheRoot \"/var/cache/mod_proxy\"\nCacheDirLength 4\nCacheDirLevels 5\n# 128 Mib\nCacheMaxFileSize 134217728\n\nMCacheRemovalAlgorithm GDSF\n# 128 MiB\nMCacheSize 131072\nMCacheMaxObjectCount 32768\n# 16 Mib\nMCacheMaxObjectSize 16777216\n# 512 KiB\nMCacheMaxStreamingBuffer 524288\n\nCacheEnable disk http://\nCacheEnable disk /\n\n</IfModule>\n</IfModule>\n</IfModule>\n\n<Proxy *>\n\tOrder Deny,Allow\n\tDeny from all\n        Allow from 127.0.0.0/8\n        Allow from 192.168.0.127\n\tAllow from 192.168.1.0/24\n</Proxy>\n\n</VirtualHost>\n\n<IfModule mod_status.c>\n\tExtendedStatus On\n</IfModule>\n\n</IfModule>"}, {"count": 1, "tags": [], "text": "This is no user support forum. Please sent a mail to the users list. It is most likely that this is an error on the target host as the error message you mentioned is not emitted by httpd.", "attachment_id": null, "bug_id": 46886, "id": 125678, "time": "2009-03-22T04:08:45Z", "creator": "rpluem@apache.org", "creation_time": "2009-03-22T04:08:45Z", "is_private": false}, {"count": 2, "tags": [], "creator": "nicolas.mailhot@laposte.net", "attachment_id": null, "id": 125679, "time": "2009-03-22T04:12:15Z", "bug_id": 46886, "creation_time": "2009-03-22T04:12:15Z", "is_private": false, "text": "But isn't a transparent proxy supposed to be transparent? Including to the target host?"}, {"count": 3, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 127380, "time": "2009-05-25T08:10:59Z", "bug_id": 46886, "creation_time": "2009-05-25T08:10:59Z", "is_private": false, "text": "re-closing as invalid; take it to the users mailing list to work through your configuration/environment (as previously triaged)."}]