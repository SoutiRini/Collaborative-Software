[{"count": 0, "tags": [], "creator": "soukaku+httpd@downtown.jp", "attachment_id": null, "id": 187707, "time": "2016-01-15T12:23:41Z", "bug_id": 58871, "creation_time": "2016-01-15T12:23:41Z", "is_private": false, "text": "I went a set of Apache2 to test the HTTP/2.\nAs a result of checking the access.log, when it is accessed by the HTTP/2, it was noticed that the response data size is recorded in the zero byte.\n\nHTTP/1.1 :\n192.0.2.20 - - [22/Dec/2015:00:46:51 +0900] \"GET /~soukaku/images/eyecatch0002.jpg HTTP/1.1\" 200 44068 \"http://www.downtown.jp/~soukaku/archives/2010/0225_225635.html\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/600.7.12 (KHTML, like Gecko) Version/8.0.7 Safari/600.7.12\"\n\nHTTP/2 :\n203.0.113.60 - - [22/Dec/2015:03:35:58 +0900] \"GET /~soukaku/images/eyecatch0002.jpg HTTP/2\" 200 0 \"http://www.downtown.jp/~soukaku/archives/2013/0117_010718.html\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_2) AppleWebKit/601.3.9 (KHTML, like Gecko) Version/9.0.2 Safari/601.3.9\"\n\nIs this a bug?\n\n\n- Log setting\n\nCustomLog\t/var/log/apache2/access.log \tcombined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\n\n\n\u2212 Server info\n\n# apache2ctl -v\nServer version: Apache/2.4.18 (Debian)\nServer built:   2015-12-19T08:26:14\n\n# apache2ctl -M\nLoaded Modules:\n core_module (static)\n so_module (static)\n watchdog_module (static)\n http_module (static)\n log_config_module (static)\n logio_module (static)\n version_module (static)\n unixd_module (static)\n access_compat_module (shared)\n actions_module (shared)\n alias_module (shared)\n apreq_module (shared)\n auth_basic_module (shared)\n auth_digest_module (shared)\n authn_core_module (shared)\n authn_file_module (shared)\n authz_core_module (shared)\n authz_groupfile_module (shared)\n authz_host_module (shared)\n authz_user_module (shared)\n autoindex_module (shared)\n cache_module (shared)\n cgi_module (shared)\n cgid_module (shared)\n dav_module (shared)\n dav_fs_module (shared)\n dav_lock_module (shared)\n dbd_module (shared)\n deflate_module (shared)\n dir_module (shared)\n encoding_module (shared)\n env_module (shared)\n expires_module (shared)\n filter_module (shared)\n geoip_module (shared)\n headers_module (shared)\n http2_module (shared)\n include_module (shared)\n info_module (shared)\n mime_module (shared)\n mpm_prefork_module (shared)\n negotiation_module (shared)\n perl_module (shared)\n php5_module (shared)\n reqtimeout_module (shared)\n rewrite_module (shared)\n security2_module (shared)\n setenvif_module (shared)\n socache_shmcb_module (shared)\n spamhaus_module (shared)\n ssl_module (shared)\n status_module (shared)\n suexec_module (shared)\n unique_id_module (shared)\n userdir_module (shared)\n usertrack_module (shared)\n xsendfile_module (shared)\n\n# curl -vIL --http2 http://www.downtown.jp/\n*   Trying 2401:2500:102:2120:153:120:6:47...\n* Connected to www.downtown.jp (2401:2500:102:2120:153:120:6:47) port 80 (#0)\n> HEAD / HTTP/1.1\n> Host: www.downtown.jp\n> User-Agent: curl/7.46.0\n> Accept: */*\n> Connection: Upgrade, HTTP2-Settings\n> Upgrade: h2c\n> HTTP2-Settings: AAMAAABkAAQAAP__\n>\n< HTTP/1.1 101 Switching Protocols\nHTTP/1.1 101 Switching Protocols\n< Upgrade: h2c\nUpgrade: h2c\n< Connection: Upgrade\nConnection: Upgrade\n* Received 101\n* Using HTTP2, server supports multi-use\n* Connection state changed (HTTP/2 confirmed)\n* TCP_NODELAY set\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\n\n< HTTP/2.0 200\nHTTP/2.0 200\n< date:Fri, 15 Jan 2016 12:21:53 GMT\ndate:Fri, 15 Jan 2016 12:21:53 GMT\n< server:Apache/2.4.18 (Debian)\nserver:Apache/2.4.18 (Debian)\n< accept-ranges:bytes\naccept-ranges:bytes\n< vary:Accept-Encoding\nvary:Accept-Encoding\n< cache-control:max-age=0\ncache-control:max-age=0\n< expires:Fri, 15 Jan 2016 12:21:53 GMT\nexpires:Fri, 15 Jan 2016 12:21:53 GMT\n< content-length:13692\ncontent-length:13692\n< content-type:text/html\ncontent-type:text/html\n\n<\n* Connection #0 to host www.downtown.jp left intact"}, {"count": 1, "text": "Thanks, that did indeed slip my attention. This is fixed in revision 1725496 in trunk. It will be back ported to the next 2.4.x release.\n\nAdditionally, I will make it available in the next release on https://github.com/icing/mod_h2 if you want to test drive it earlier.\n\nThanks!", "bug_id": 58871, "is_private": false, "id": 187824, "time": "2016-01-19T12:45:34Z", "creator": "stefan@eissing.org", "creation_time": "2016-01-19T12:45:34Z", "tags": [], "attachment_id": null}]