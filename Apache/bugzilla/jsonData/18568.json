[{"count": 0, "tags": [], "bug_id": 18568, "text": "When I'm trying to upload data to my application through ISAPI filter \n(isapi_redirector2.dll, I use IIS 5.0 on Win2k) and save info from an octed \nstream to a file, the file comes wrong. When I'm trying to connect to Tomcat \ndirectly the problem does not occur. Also the problem absents during the usage \nof an old ajp13 connector and ISAPI filter isapi_redirect.dll.", "id": 34241, "time": "2003-04-01T14:15:46Z", "creator": "madcreep@infa.ru", "creation_time": "2003-04-01T14:15:46Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "robert.priest@bentley.com", "text": "Created attachment 5608\nlocalhost_uploadfile_log.2003-04-02.txt", "id": 34377, "time": "2003-04-02T20:54:01Z", "bug_id": 18568, "creation_time": "2003-04-02T20:54:01Z", "is_private": false, "attachment_id": 5608}, {"count": 2, "tags": [], "creator": "robert.priest@bentley.com", "text": "Created attachment 5609\nuploadfile.war", "id": 34378, "time": "2003-04-02T20:54:58Z", "bug_id": 18568, "creation_time": "2003-04-02T20:54:58Z", "is_private": false, "attachment_id": 5609}, {"count": 3, "tags": [], "bug_id": 18568, "attachment_id": null, "is_private": false, "id": 34379, "time": "2003-04-02T20:58:20Z", "creator": "robert.priest@bentley.com", "creation_time": "2003-04-02T20:58:20Z", "text": "I believe I have encountered the same issue.\n\nI was having this problem with another application. What came out in the logs \nwas that there was a java.io.StreamCorruptedException being thrown whenever \ngoing through the filter.\n\nIn order to develop a test case for all to use, I am using commons-fileupload\n(http://jakarta.apache.org/commons/fileupload/).\n\nI have a simple file upload jsp page (using commons-fileupload). If you select \na file >100k or so, the app will fail if you go through the isapi filter - \nisapi_redirector2.dll (http://localhost/uploadfile). However, if you go \nstraight to tomcat everything works fine (http://localhost:8080/uploadfile).\n\nIn this example (the test case) what you will see in the logs is a:\njavax.servlet.ServletException: Processing of multipart/form-data request \nfailed. Stream ended unexpectedly\n\nOnce again, this error is not received when going directly to tomcat.\n\nI am including uploadfile.war which is the webapp test case with the file \nupload jsp page. I was having trouble with tomcat's automatic unpacking of war \nfiles, but if you unpack the .war file manually and drop it in the webapps \ndirectory, it should run correctly. I am also including my log file which shows \nthe error received.\n\nIf more material is needed, please advise.\n\n"}, {"count": 4, "tags": [], "bug_id": 18568, "text": "\n\n*** This bug has been marked as a duplicate of 15278 ***", "id": 35068, "time": "2003-04-12T22:39:43Z", "creator": "nacho@apache.org", "creation_time": "2003-04-12T22:39:43Z", "is_private": false, "attachment_id": null}]