[{"count": 0, "tags": [], "bug_id": 52558, "is_private": false, "id": 153285, "attachment_id": null, "creator": "adam.hawkins@gmail.com", "creation_time": "2012-01-30T10:46:47Z", "time": "2012-01-30T10:46:47Z", "text": "CometConnectionManagerValve is adding HttpServletRequest[] to HttpSession which is preventing the Session being serialized in a Clustered setup.\n\nWe're resolving this locally using a serializable ConnectionList class with a transient Request[]\n\ni.e.\n\npublic class ConnectionList implements Serializable {\n\t\n\ttransient Request[] connectionList = null;\n\t\n\tConnectionList(Request[] connectionList){\n\t\tthis.connectionList = connectionList;\n\t}\n\t\n\tpublic Request[] get(){\n\t\treturn connectionList;\n\t}\n}"}, {"count": 1, "tags": [], "bug_id": 52558, "attachment_id": null, "id": 153286, "time": "2012-01-30T10:59:05Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2012-01-30T10:59:05Z", "is_private": false, "text": "Note that there is an attribute \"sessionAttributeFilter\" in the cluster manager configuration, that allows to decide which session attributes you want to be replicated. It was introduced in Tomcat 7.0.22.\n\nSee:\n\nhttp://tomcat.apache.org/tomcat-7.0-doc/config/cluster-manager.html\n\nIt is not a direct answer to your observation, but might be enough for a workaround. Therefore I keep this issue in status \"New\".\n\nRegards,\n\nRainer"}, {"count": 2, "tags": [], "text": "I'd be surprised if anyone was relying on the connection list being stored as an array of requests but in case they are it is safer to use the work=around for 7.0.x and earlier. I have applied a fix based on the suggested new class for Tomcat 8.", "is_private": false, "id": 170065, "creator": "markt@apache.org", "time": "2013-09-12T11:17:37Z", "bug_id": 52558, "creation_time": "2013-09-12T11:17:37Z", "attachment_id": null}]