[{"count": 0, "attachment_id": null, "bug_id": 12945, "is_private": false, "id": 23285, "time": "2002-09-24T07:20:26Z", "creator": "agmartin@grupoburke.com", "creation_time": "2002-09-24T07:20:26Z", "tags": [], "text": "Hi.\n\nYesterday I downloaded the tar.gz'ipped version for Tomcat 4.1.12 and \ndiscovered that the problem showed in bug # 12387 was still present.\n\nThe problem is that Jasper compiler still creates an internal classpath with \na \"/\" heading that variable which leads to a compilation error for those JSP \npages that were not yet compiled before.\n\nI implemented a servlet that showed all context properties at runtime and this \nis what I got:\n\nAttributeNames: \n+ Attribute[0]: org.apache.catalina.WELCOME_FILES : [Ljava.lang.String;@dada24\n+ Attribute[1]: javax.servlet.context.tempdir : C:\\Tomcat-4.1.12\n\\work\\Standalone\\localhost\\WGFAQ\n+ Attribute[2]: org.apache.catalina.resources : \norg.apache.naming.resources.ProxyDirContext@2798e7\n+ Attribute[3]: org.apache.catalina.jsp_classpath : /C:/Tomcat-\n4.1.12/webapps/WGFAQ/WEB-INF/classes/;C:/Tomcat-\n4.1.12/common/endorsed/xercesImpl.jar;C:/Tomcat-\n4.1.12/common/endorsed/xmlParserAPIs.jar;C:/Tomcat-\n4.1.12/common/lib/activation.jar;C:/Tomcat-4.1.12/common/lib/ant.jar;C:/Tomcat-\n4.1.12/common/lib/commons-collections.jar;C:/Tomcat-4.1.12/common/lib/commons-\ndbcp.jar;C:/Tomcat-4.1.12/common/lib/commons-logging-api.jar;C:/Tomcat-\n4.1.12/common/lib/commons-pool.jar;C:/Tomcat-\n4.1.12/common/lib/cos.jar;C:/Tomcat-4.1.12/common/lib/iText.jar;C:/Tomcat-\n4.1.12/common/lib/jacob.jar;C:/Tomcat-4.1.12/common/lib/jasper-\ncompiler.jar;C:/Tomcat-4.1.12/common/lib/jasper-runtime.jar;C:/Tomcat-\n4.1.12/common/lib/jdbc2_0-stdext.jar;C:/Tomcat-\n4.1.12/common/lib/jndi.jar;C:/Tomcat-4.1.12/common/lib/jt400.jar;C:/Tomcat-\n4.1.12/common/lib/jta.jar;C:/Tomcat-4.1.12/common/lib/mail.jar;C:/Tomcat-\n4.1.12/common/lib/mysql.jar;C:/Tomcat-4.1.12/common/lib/naming-\ncommon.jar;C:/Tomcat-4.1.12/common/lib/naming-factory.jar;C:/Tomcat-\n4.1.12/common/lib/naming-resources.jar;C:/Tomcat-4.1.12/common/lib/servlet.jar\n\nAs you can see, attribute #4: \"org.apache.catalina.jsp_classpath\" starts \nwith \"/C:....\" that can leads to a bug at runtime.\n\nThe \"jasper-compiler.jar\" file, attached in the bug mentioned before, solved \nthe problem for Tomcat 4.1.10, but the problem is still in this new release.\n\nThat was all. Thanks a lot for your great job.\n\n-----------------------------------------------------------------------\nArturo Garc\u00eda Mart\u00edn"}, {"count": 1, "text": "Well, sorry, but the JAR attached to the bug report is included in the new\nrelease. I also have tested the release, and it works fine for me.", "bug_id": 12945, "attachment_id": null, "id": 23286, "time": "2002-09-24T07:23:25Z", "creator": "remm@apache.org", "creation_time": "2002-09-24T07:23:25Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "text": "FYI, the jasper-compiler.jar does not generate the\norg.apache.catalina.jsp_classpath variable, but actually parses it. So the \"/\"\nprefix (which is a valid Java file path, although it happened to be confusing\nAnt in 4.1.10, which was causing bug 12387) is still already there no matter what.\n\nI have Tomcat running as a service from my M: HD, and the admin webapp is\nrunning fine (that uses /WEB-INF/lib) as well as the JSP examples (that uses\n/WEB-INF/classes).\n\nIf you had it working fine with 4.1.10 + the fixed JAR, then it has to be an\ninstallation error of some sort.\n\nNote: 4.1.12 is not out yet; at this point they are still candidate binaries.", "attachment_id": null, "bug_id": 12945, "id": 23287, "time": "2002-09-24T07:35:58Z", "creator": "remm@apache.org", "creation_time": "2002-09-24T07:35:58Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 12945, "attachment_id": 3189, "id": 23292, "time": "2002-09-24T09:46:56Z", "creator": "agmartin@grupoburke.com", "creation_time": "2002-09-24T09:46:56Z", "is_private": false, "text": "Created attachment 3189\nFiles used to reproduce the failure, server configuration and server logs"}, {"count": 4, "text": "In order to reproduce the failure with Tomcat 4.1.12 I followed these steps:\n\n1.-  Downloaded file: jakarta-tomcat-4.1.12.tar.gz\n     File size: 5.714.133 bytes\n\n2.-  Extracted (unzipped) to folder: C:\\Tomcat-4.1.12  [TOMCAT_HOME == \nCATALINA_HOME]\n\n3.-  Created the following files into TOMCAT_HOME (C:\\Tomcat-4.1.12):\n     + environ.cmd\n     + InstallTomcatAsWinNTService.cmd\n     + shutdown.cmd\n     + startup.cmd\n     + UninstallTomcatAsWinNTService.cmd\n\n4.-  Executed: InstallTomcatAsWinNTService.cmd\n     + C:\\Tomcat-4.1.12>InstallTomcatAsWinNTService.cmd\n     + C:\\Tomcat-4.1.12\\bin\\Tomcat.exe -install \"Apache Tomcat 4.1.12\" \nC:\\j2sdk14\\jre\\bin\\server\\jvm.dll -Djava.class.path=C:\\Tomcat-4.1.12\n\\bin\\bootstrap.jar -Dcatalina.home=C:\\Tomcat-4.1.12 -start \norg.apache.catalina.startup.BootstrapService -method main -params start -stop \norg.apache.catalina.startup.BootstrapService -method main -params stop -out \nC:\\Tomcat-4.1.12\\logs\\stdout.log -err C:\\Tomcat-4.1.12\\logs\\stderr.log\n     + The service was successfully installed.\n     + C:\\Tomcat-4.1.12>\n\n5.-  Started Tomcat with: \"C:\\Tomcat-4.1.12\\startup.cmd\"\n     ( This first time execution created some extra folders, as you know :^)\n     Tested its execution by accesing to a sample JSP (numberguess) \nunder /examples context: Ok.\n     Stopped Tomcat with: \"C:\\Tomcat-4.1.12\\shutdown.cmd\"\n\n6.-  Started WinNT Service: \"Apache Tomcat 4.1.12\" with: net start \"Apache \nTomcat 4.1.12\"\n     Tested its execution by accesing to a sample JSP (date & snoop) \nunder /examples context: FAIL.\n     Stopped WinNT Service: \"Apache Tomcat 4.1.12\" with: net stop \"Apache \nTomcat 4.1.12\"\n\n7.-  Edited %TOMCAT_HOME%\\conf\\server.xml and set all \"debug=0\" values \nto: \"debug=99\"\n     Edited %TOMCAT_HOME%\\conf\\web.xml and set all \"debug\" values to: \"99\"\n     Deleted all log files\n     Deleted all fles under: %TOMCAT_HOME%\\work\\Standalone\\localhost\n\n8.-  Started WinNT Service: \"Apache Tomcat 4.1.12\" with: net start \"Apache \nTomcat 4.1.12\"\n     Tested its execution by accesing to a sample JSP (carts & checkbox & \nerror) under /examples context: FAIL.\n     Stopped WinNT Service: \"Apache Tomcat 4.1.12\" with: net stop \"Apache \nTomcat 4.1.12\"\n     Moved log files to \"NTService\" folder under \"logs\".\n\n9.-  Started Tomcat with: \"C:\\Tomcat-4.1.12\\startup.cmd\"\n     Tested its execution by accesing to a sample JSP (carts & checkbox & \nerror) under /examples context: FAIL.\n     Stopped Tomcat with: \"C:\\Tomcat-4.1.12\\shutdown.cmd\"\n     Moved log files to \"StandAlone\" folder under \"logs\".\n\n10.- Generated: \"Files.zip\" with all files under \\conf and \\logs folders, and \nalso the MSDOS scripts in %TOMCAT_HOME%.\n\nIt looks like the NT Service fails to find something to work fine.\nMaybe that the \"NT Service Install\" command needs to be passed extra info \nregarding where is \"ant\", some library, or whatever, but started Tomcat as a \nStand Alone task from command line, does not fails.\n\n\nAttached I posted a ZIP file with all needed archives to test my installation.\n", "bug_id": 12945, "is_private": false, "id": 23293, "time": "2002-09-24T09:48:34Z", "creator": "agmartin@grupoburke.com", "creation_time": "2002-09-24T09:48:34Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "creator": "remm@apache.org", "text": "Sorry, but I simply do not have time to help you debug or check whether or not\nyour configuration. The idea is that a similar configuration is working fine for\nme (XP / JDK 1.4 / Tomcat installed through the installer). Could you please try\nthe default configuration and installation ?\nDo NOT use the .tar.gz when using Windows, unless you know what you are doing.", "id": 23294, "time": "2002-09-24T09:56:29Z", "bug_id": 12945, "creation_time": "2002-09-24T09:56:29Z", "is_private": false, "attachment_id": null}]