[{"count": 0, "tags": [], "bug_id": 33809, "attachment_id": null, "id": 71718, "time": "2005-03-02T15:13:58Z", "creator": "anuj1104@yahoo.com", "creation_time": "2005-03-02T15:13:58Z", "is_private": false, "text": "Tomcat 4.0.4 does not work properly with UTF-16LE Encoding .  My data is in\nUTF-16LE encoding and the byte are sent back using reqsponse.getWriter() stream. \nSee the code below  :-\n****************************************************************************\n<%\nresponse.setContentType(\"text/plain; charset=utf-16le\"); \nresponse.setHeader(\"Content-Disposition\",\"attachment; filename=\\\"test.csv\\\"\");\njava.io.PrintWriter out1 = response.getWriter();\n//Add  Multibyte data  82A7\nString strData = \"test\"+\"\\u82A7\";\nstrData = new String(strData.getBytes(\"UTF-16LE\"),\"UTF-16LE\");\n//Write BOM and UTF-16 encoded String\nout1.write(\"\\uFEFF\"+strData);\nout1.flush();\nout1.close();\n%>\n****************************************************************************\n\nThis code does not work properly on tomcat4, The jsp does not show the pop up\nOpen/Save Dialog as desired .  \nIf ,  response.setContentType(\"text/plain; charset=utf-16le\"); this is changed to\nresponse.setContentType(\"text/plain; charset=utf-8\");\nthe the Open/Save Dialog  comes up.  But it saves the File in UTF-8 encoding. \nThis is Wrong , since File contains data in  UTF-16LE ( required for CSVs that\nhas Multibyte data and microsoft Supports UTF-16LE by default for Excel) \n\nIf I run the above Code in Tomcat5, it  works fine. The file \"test.csv\" is saved\nin Unicode Encoding and gets opened properly in MsExcel. \n\nDid i miss something for tomcat4 ? \nIs it a Bug with  tomcat4\n\nThanks,\nAnuj"}, {"count": 1, "tags": [], "text": "4.0.4 is an out of date code base not being updated. The tomcat-user list might\nbe of help.\n\n[Bugzilla is not a help desk forum]\n ", "is_private": false, "bug_id": 33809, "id": 71719, "time": "2005-03-02T15:17:02Z", "creator": "funkman@joedog.org", "creation_time": "2005-03-02T15:17:02Z", "attachment_id": null}]