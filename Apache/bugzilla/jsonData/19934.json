[{"count": 0, "attachment_id": null, "bug_id": 19934, "text": "I found this in JSP but I assume in servlets it would do the same.\n\nComa in to cookie value is treated as a semicolon, so a \ncookie \"mycookie=blah,blah;...\" would be returned 'mycookie=blah' and 'blah=\"\"'\n\nTo the best of my knowledge ',' is not a legal separator in cookies but it is a \ncompletely legal character for a cookie value.\nCode:\n Cookie[] cookies=request.getCookies();\n for(int i=0;i<cookies.length;i++)\n            System.out.println(\"Cookie: \"+cookies[i].getName()+\"=\"+cookies\n[i].getValue());", "id": 37232, "time": "2003-05-14T23:02:41Z", "creator": "gverig@yahoo.com", "creation_time": "2003-05-14T23:02:41Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 19934, "text": "According to http://www.cis.ohio-state.edu/cgi-bin/rfc/rfc2109.html:\n The syntax for the header is:\n\n   cookie          =       \"Cookie:\" cookie-version\n                           1*((\";\" | \",\") cookie-value)\n   cookie-value    =       NAME \"=\" VALUE [\";\" path] [\";\" domain]\n   cookie-version  =       \"$Version\" \"=\" value\n   NAME            =       attr\n   VALUE           =       value\n   path            =       \"$Path\" \"=\" value\n   domain          =       \"$Domain\" \"=\" value\n\nand \nNote: For backward compatibility, the separator in the Cookie header is\nsemi-colon (;) everywhere. A server should also accept comma (,) as the\nseparator between cookie-values for future compatibility.", "id": 37233, "time": "2003-05-14T23:12:16Z", "creator": "funkman@joedog.org", "creation_time": "2003-05-14T23:12:16Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": 6388, "bug_id": 19934, "text": "Created attachment 6388\nShort JSP to demonstrate the case", "id": 37334, "time": "2003-05-16T16:12:39Z", "creator": "gverig@yahoo.com", "creation_time": "2003-05-16T16:12:39Z", "tags": [], "is_private": false}, {"text": "Thanks for your reply.\nTo the best of my understanding in your example this\nactually would not be a bug, as presence of '$Version'\nmeans that this is a \"new\" cookie, which in turn means\nthat comma is a legal separator.\n\nThe cookie value from the header was:\nCookie: JSESSIONID=6C6F66F5594159ED6E0DD8074BD1BE4D;\nOLD=beforecomma,aftercomma\nand it got split to\nOLD=beforecomma\nand\naftercomma=\nin the attached JSP page.\n\nThe \"new\" version of cookie get split as well, but\nthis seems to be the normal behavior\nCookie: JSESSIONID=30F0D6BC55AA139A591575AC542C9817;\n$Version=1; NEW=beforecomma,aftercomma\n\nBesides, seems I found another bug (?)-\nresponse.setCookie throws an \"illegal argument\nexception\" if the cookie value contains a comma\n\nI have tested this with Tomcat 4.1.18 and 4.1.24\nbefore I posted a bug, as I wanted to make sure that\nit was not fixed.\n\nSorry if JSP looks like mess, I just wanted to throw something in to \ndemonstrate the case.", "tags": [], "creator": "gverig@yahoo.com", "is_private": false, "count": 3, "id": 37335, "time": "2003-05-16T16:13:08Z", "bug_id": 19934, "creation_time": "2003-05-16T16:13:08Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "remm@apache.org", "is_private": false, "text": "I don't think the RFC posted by Tim leaves much to interpretation. ',' is a\nspecial character. Please do not reopen the report, this \"bug\" will not be fixed.", "id": 37341, "time": "2003-05-16T17:12:55Z", "bug_id": 19934, "creation_time": "2003-05-16T17:12:55Z", "attachment_id": null}]