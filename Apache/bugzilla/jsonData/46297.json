[{"count": 0, "tags": [], "creator": "carenas@sajinet.com.pe", "attachment_id": null, "is_private": false, "id": 122858, "time": "2008-11-25T22:31:56Z", "bug_id": 46297, "creation_time": "2008-11-25T22:31:56Z", "text": "linux systems since around 2.4.16 are expected to have a tmpfs mounted filesystem in /dev/shm to support POSIX shared memory (glibc2.2 or later requires that).\n\nas shown by the linked thread URL, if an application that uses APR calls this function in a system running linux that has the root partition and /tmp in RO mode will fail, even if using /dev/shm could had been an alternative.\n\na workaround is to force the use of /dev/shm by setting TMPDIR but having libapr try this additional directory in a linux specific way (as it does for windows/netware) will be better."}, {"count": 1, "tags": [], "creator": "carenas@sajinet.com.pe", "attachment_id": 22948, "text": "Created attachment 22948\ninstruct APR to use /dev/shm in linux as a temporary directory\n\nready to apply to other maintenance branches", "id": 122859, "time": "2008-11-25T23:07:15Z", "bug_id": 46297, "creation_time": "2008-11-25T23:07:15Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 46297, "attachment_id": null, "id": 122872, "time": "2008-11-26T06:57:01Z", "creator": "jorton@redhat.com", "creation_time": "2008-11-26T06:57:01Z", "is_private": false, "text": "You can already:\n\na) set $TMPDIR to /dev/shm, or\nb) mount /tmp using shmfs\n\nif you want that behaviour.  Having APR create temp files in /dev/shm would be totally crazy."}, {"count": 3, "tags": [], "bug_id": 46297, "text": "(In reply to comment #2)\n> Having APR create temp files in /dev/shm would be totally crazy.\n\nthe objective of this function is to find a \"appropiate\" directory that could be used for creating temporary files and that includes the currently working directory (if it is writable).\n\nagree that changing APR to create temp file in /dev/shm by default is crazy and apologize for proposing that implementation originally, but using /dev/shm as a last resort in Linux seems like a reasonable option.", "id": 122886, "time": "2008-11-26T19:51:46Z", "creator": "carenas@sajinet.com.pe", "creation_time": "2008-11-26T19:51:46Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "carenas@sajinet.com.pe", "attachment_id": 22954, "is_private": false, "id": 122887, "time": "2008-11-26T19:53:35Z", "bug_id": 46297, "creation_time": "2008-11-26T19:53:35Z", "text": "Created attachment 22954\ninstruct APR to use /dev/shm in linux as a last resort for a temporary directory"}, {"count": 5, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "text": "As above.  It's inappropriate for APR to create tmp files in /dev/shm out of the box.  That is not a directory designed or intended for storing temp files.  You can configure this behaviour at run-time if you desire using the env vars.", "id": 134066, "time": "2010-01-31T05:39:55Z", "bug_id": 46297, "creation_time": "2010-01-31T05:39:55Z", "is_private": false}]