[{"count": 0, "tags": [], "creator": "sdo@parks.lv", "attachment_id": null, "is_private": false, "id": 20312, "time": "2002-07-27T17:59:09Z", "bug_id": 11232, "creation_time": "2002-07-27T17:59:09Z", "text": "Configured Apache as proxy. Proxy for regular HTTP requests works great. The \nserver seems to accept the proxy request from a browser for HTTPS connection \nproperly, but hangs in CONNECT for unknown reason. \n\nThe debug level error logs contains:\n\nproxy_connect.c(115): proxy: CONNECT: canonicalising URL \ninvestment.datek.com:443\nmod_proxy.c(461): Trying to run scheme_handler\nproxy_http.c(1036): proxy: HTTP: declining URL investment.datek.com:443\nproxy_ftp.c(819): proxy: FTP: declining URL investment.datek.com:443 - not ftp:\nproxy_connect.c(148): proxy: CONNECT: serving URL investment.datek.com:443\nproxy_connect.c(164): proxy: CONNECT: connecting investment.datek.com:443 to \ninvestment.datek.com:443\nproxy_connect.c(181): proxy: CONNECT: connecting to remote proxy \ninvestment.datek.com on port 443\nproxy_util.c(1167): proxy: CONNECT: fam 2 socket created to connect to \ninvestment.datek.com\nproxy_connect.c(275): proxy: CONNECT: Returning 200 OK Status\nproxy_connect.c(296): proxy: CONNECT: setting up poll()\n\nThe configuration file contains the following related statements \n\n....\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_connect_module modules/mod_proxy_connect.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nLoadModule proxy_ftp_module modules/mod_proxy_ftp.so\nLoadModule ssl_module modules/mod_ssl.so\n....\n\n<IfModule mod_proxy.c>\nProxyRequests On\nAllowCONNECT 443 563\nSSLProxyEngine On\n\n<Proxy *>\n    Order deny,allow\n    Deny from all\n    Allow from all\n</Proxy>\nProxyVia On\n\n</IfModule>\n\n\nAccess log contains:\n\n192.168.0.1 - - \"CONNECT investment.datek.com:443 HTTP/1.0\" 200 -"}, {"count": 1, "tags": [], "text": "[This is a mass bug update.]\nThis bug reports a problem in an older version of Apache 2.\nCould you please update to the most recent version and see\nif you can reproduce this problem.  If the bug still exists,\nplease update the bug with the latest version number.  If \nthe bug no longer exists, please close the bug report.\n\nSorry for this impersonal response, but we get many more bug\nreports than our volunteers can keep up with.\nThanks for using Apache!", "attachment_id": null, "bug_id": 11232, "id": 24751, "time": "2002-10-17T02:35:33Z", "creator": "slive@apache.org", "creation_time": "2002-10-17T02:35:33Z", "is_private": false}, {"count": 2, "tags": [], "text": "[This is a mass bug update.] [Resolve-20021102]\nNo response from submitter; assuming issue is resolved.\nIf the problem still exists in the lastest version,\nplease reopen this report and update appropriately.", "attachment_id": null, "id": 25564, "creation_time": "2002-11-02T20:18:55Z", "time": "2002-11-02T20:18:55Z", "creator": "slive@apache.org", "bug_id": 11232, "is_private": false}, {"count": 3, "tags": [], "bug_id": 11232, "attachment_id": null, "id": 75951, "time": "2005-06-03T08:50:12Z", "creator": "emmanuel.e@gmx.net", "creation_time": "2005-06-03T08:50:12Z", "is_private": false, "text": "The bug exists in version 2.0.52 also. I am using the precompiled binary from\nhttp://www.apache.org/dyn/closer.cgi/perl/win32-bin/"}, {"count": 4, "tags": [], "bug_id": 11232, "attachment_id": null, "id": 76149, "time": "2005-06-08T10:34:09Z", "creator": "emmanuel.e@gmx.net", "creation_time": "2005-06-08T10:34:09Z", "is_private": false, "text": "The bug disappeared when I hotfixed the the Apache 2.0.52 version Perl Win32\nbinary with the files of the 2.0.54 version. \n\nHowever the bug reappeared when SSL was enabled and the proxy was being run on\nan SSL. Normal GET and POST requests work fine even when the proxy is SSL\nenabled (i.e. the requests to the proxy server itself is encrypted).\n\nmod_ssl and mod_proxy_connect do not seem to be compatible.\n\nWill test on apache 1xx and see if the bug exists.\n\nI wonder why everyone has to be so dependent on OpenSSL. Why cant we have a\nstable windows port?"}, {"count": 5, "tags": [], "bug_id": 11232, "text": "The bug exists in Apache 1.3 also.\n\nMy setup is like this:\n\nClient->[ssl encrypted connection to proxy]<->Apache Proxy on SSL enabled\nserver<->[normal connection to remote server]<->Remote server.\n\nBasically the connection between the client and the apache proxy is encrypted.\nOnce the client has established a secure connection with the proxy it sends a\nnormal proxy request. This request works fine as long as its a GET or POST\nrequest. When after establishing the secure channel the client sends a CONNECT\nthen the connection abruptly fails.\n\nPossibly mod_ssl is not able to handle a stream of unknown length.\n\nI have tested this on Win32. \n\nAny tips?", "id": 76164, "time": "2005-06-08T16:02:48Z", "creator": "emmanuel.e@gmx.net", "creation_time": "2005-06-08T16:02:48Z", "is_private": false, "attachment_id": null}, {"count": 6, "text": "Bug 29744 seems to be a duplicate of this bug. Patches for apache 2.1.x and\n2.0.x are available at http://issues.apache.org/bugzilla/show_bug.cgi?id=29744", "bug_id": 11232, "attachment_id": null, "id": 76520, "time": "2005-06-18T21:13:19Z", "creator": "rsnel@cube.dyndns.org", "creation_time": "2005-06-18T21:13:19Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "emmanuel.e@gmx.net", "attachment_id": null, "is_private": false, "id": 76531, "time": "2005-06-19T18:22:52Z", "bug_id": 11232, "creation_time": "2005-06-19T18:22:52Z", "text": "Yes it seems to be a duplicate of bug 29744. Thanks a lot. How do I go about\ncompiling it for Win32? Then we can be sure that its the same thing.\n\nAny ideas on how to get it accepted into the main development tree as soon as\npossible? Joshua can you help?"}, {"count": 8, "tags": [], "creator": "chip@force-elite.com", "attachment_id": null, "is_private": false, "id": 76549, "time": "2005-06-20T01:25:15Z", "bug_id": 11232, "creation_time": "2005-06-20T01:25:15Z", "text": "Bug #29744 has more details, marking this one as dup.\n\n*** This bug has been marked as a duplicate of 29744 ***"}]