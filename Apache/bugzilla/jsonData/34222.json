[{"count": 0, "tags": [], "text": "If JSP custom tag handling is enabled, a tag is returned to the pool after \ncalling doEndTag(). release() is only called when the tag is removed from the \npool. So any attribute values will still be set on the next use unless \nexplicitly set in the JSP, also any allocated resources will remain allocated, \netc.. I know that tag pooling can be disabled, but it's a bit restrictive to \nhave to switch off all tag pooling if you have any tag which can't cope with \nnot having its release() method called after each use.", "is_private": false, "bug_id": 34222, "id": 72979, "time": "2005-03-29T15:18:32Z", "creator": "adrian@ariley.co.uk", "creation_time": "2005-03-29T15:18:32Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "text": "http://jakarta.apache.org/tomcat/faq/misc.html#tagbroken", "id": 72983, "time": "2005-03-29T15:32:14Z", "bug_id": 34222, "creation_time": "2005-03-29T15:32:14Z", "is_private": false}, {"count": 2, "tags": [], "creator": "tsharif@farecast.com", "attachment_id": null, "text": "How is this not a bug. The JSP Spec explicitly states that release should be called.\n\nhttp://java.sun.com/products/jsp/tutorial/TagLibraries18.html#62842\n\nThe consumer of JSP should not expereince any difference whether pooling is\nenabled or not.\n\nIf the pool size is N, it seems like the use of N+1 tag (in which case release\nwill be called) has a different behavior than the tags 1..N.\n\nThis could be a real problem a JSP serving requests for multiple users.\n\nPlease advise,\n\nThanks,\nTalib Sharif\nfarecast.com\ntsharif@farecast.com", "id": 97596, "time": "2008-02-26T12:57:27Z", "bug_id": 34222, "creation_time": "2008-02-26T12:57:27Z", "is_private": false}, {"count": 3, "tags": [], "creator": "adrian@ariley.co.uk", "attachment_id": null, "text": "Yes, I still agree. I note that the link in the FAQ referred to in comment#1 \nno longer exists.", "id": 97569, "time": "2008-02-26T13:06:37Z", "bug_id": 34222, "creation_time": "2008-02-26T13:06:37Z", "is_private": false}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "(In reply to comment #2)\n> http://java.sun.com/products/jsp/tutorial/TagLibraries18.html#62842\n\nIs NOT the spec.\n\nI have fixed the link in the FAQ (comment #1) that goes into more detail.", "id": 114028, "time": "2008-02-26T15:02:50Z", "bug_id": 34222, "creation_time": "2008-02-26T15:02:50Z", "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 34222, "is_private": false, "id": 114029, "time": "2008-02-26T15:25:16Z", "creator": "tsharif@farecast.com", "creation_time": "2008-02-26T15:25:16Z", "tags": [], "text": "Thanks for the quick reply Mark,\n\nOk, it might not be part of the spec (I will have to go read what exactly the spec says. It might turn out to be unclear on this part.). \n\nBut as an implementation point of view don't you think this is problematic anyway.  Meaning that whoever is writing the Tag and whoever is writing the JSP needs to know whether pooling is turned on or not, and the tag will be have differently.\n"}, {"count": 6, "tags": [], "creator": "adrian@ariley.co.uk", "attachment_id": null, "is_private": false, "id": 114035, "time": "2008-02-26T17:31:22Z", "bug_id": 34222, "creation_time": "2008-02-26T17:31:22Z", "text": "Ok, I've reread Bug#16001 and the Tag Javadoc, which seems much clearer than I remember from way back then, and withdraw what I said earlier. If a tag instance can only be reused with the same attribute set then state can be reset as required by doEndTag and/or doStartTag."}, {"count": 7, "text": "Thanks for linking that Bug.\n\nI guess the idea is to never keep any state except for the attributes specified and because of the fact that using different attribute combination will guarantee a different instance, you can assume that those attributes will be intialized.\n", "bug_id": 34222, "is_private": false, "id": 114036, "time": "2008-02-26T18:16:52Z", "creator": "tsharif@farecast.com", "creation_time": "2008-02-26T18:16:52Z", "tags": [], "attachment_id": null}]