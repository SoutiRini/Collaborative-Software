[{"count": 0, "tags": [], "creator": "asiloti@earthlink.net", "attachment_id": null, "id": 12899, "time": "2002-04-06T07:04:19Z", "bug_id": 7786, "creation_time": "2002-04-06T07:04:19Z", "is_private": false, "text": "(under Windows 2000 RC2 of course)I tryed to add a cgi-bin directory by adding \nthe following lines to httpd.conf\n\n<Directory \"c:/wwwroot/cgi-bin\">\n    AllowOverride None\n    Options ExecCGI\n    ScriptInterpreterSource registry\n    Order allow,deny\n    Allow from all\n</Directory>\n\nBut Apache is still trying to use the she-bang line.  I made very sure I \nhad .cgi and .pl associated with perl.exe and it works fine if I change the she-\nbang to point to perl.exe.  I also tried placing \"ScriptInterpreterSource \nregistry\" outside the <Directory> which made no difference."}, {"count": 1, "tags": [], "creator": "asiloti@earthlink.net", "attachment_id": null, "id": 12901, "time": "2002-04-06T07:21:39Z", "bug_id": 7786, "creation_time": "2002-04-06T07:21:39Z", "is_private": false, "text": "oh yeah, the exact error is \n\n\"(22502)The system cannot find the file specified.  : couldn't create child \nprocess: 22502\""}, {"attachment_id": null, "tags": [], "bug_id": 7786, "text": "\n  It was not 'broken', e.g. no shebang line at all would cause the\n  registry interpretation to run.\n\n  However, it did attempt to use the shebang line over the registry\n  if the shebang was present.  I believe this is a misordering, compared \n  to 1.3, and considering that the explicit preference is registry.\n\n  This bug will be fixed in 2.0.36", "count": 2, "id": 13323, "time": "2002-04-12T06:40:02Z", "creator": "wrowe@apache.org", "creation_time": "2002-04-12T06:40:02Z", "is_private": false}, {"count": 3, "tags": [], "creator": "jerenkrantz@apache.org", "text": "*** Bug 8182 has been marked as a duplicate of this bug. ***", "id": 13814, "time": "2002-04-17T03:10:13Z", "bug_id": 7786, "creation_time": "2002-04-17T03:10:13Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 7786, "attachment_id": null, "text": "*** Bug 8171 has been marked as a duplicate of this bug. ***", "id": 13817, "time": "2002-04-17T03:11:33Z", "creator": "jerenkrantz@apache.org", "creation_time": "2002-04-17T03:11:33Z", "is_private": false}, {"count": 5, "tags": [], "creator": "wrowe@apache.org", "is_private": false, "text": "\nBased on my observations, it's also possible to work around this bug while waiting\nfor Apache 2.0.36.\n\nBy removing or crippling the shebang line, the cgi parser will go on to attempt\nthe registry method.  This can be done by adding an extra # in the first line of\na script, such as;\n\n##!perl\n\nIn this way, you have a reminder that there once was a shebang line, but it\nwon't be recognized because it doesn't begin with \"#!\"\n\nAnd you can then use your registry associations to invoke the script instead.\n\n", "id": 13819, "time": "2002-04-17T03:18:21Z", "bug_id": 7786, "creation_time": "2002-04-17T03:18:21Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 7786, "text": "Still unresolved under Apache 2.0.36 :-(\n(under Windows XP)", "count": 6, "id": 17047, "time": "2002-06-02T11:52:19Z", "creator": "webmaster33@bigfoot.com", "creation_time": "2002-06-02T11:52:19Z", "is_private": false}, {"count": 7, "tags": [], "creator": "wrowe@apache.org", "text": "\n  This looks like a configuration bug rather than a continued\n  bug with ScriptInterpreterSource.\n\n  1. you are using a win32 build, not a cygwin build, correct?\n\n  2. You remembered to associate your files with ScriptAlias\n     or used Options ExecCGI and AddHandler cgi-script .cgi?\n\n  You need to provide more info about HOW it is failing, including\n  a snip from your error log file, please, before reopening this\n  bug.  There have been no other reports for 2.0.36 of this fault.", "id": 17048, "time": "2002-06-02T16:13:36Z", "bug_id": 7786, "creation_time": "2002-06-02T16:13:36Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 7786, "attachment_id": null, "id": 18343, "creation_time": "2002-06-21T16:52:08Z", "time": "2002-06-21T16:52:08Z", "creator": "wolf-dietrich.moeller@siemens.com", "text": "You were looking for other reports on this fault on Apache 2.0. Mine looks similar:\nI have the following 1 line perl script:\n\nprint \"Content-type: text/plain\\n\\nHello perl\\n\".localtime(time).\"\\n\";\n\nIf the name of the script is \"test.pl\", the script is executed fine.\nIf the name is \"test.cgi\", I get the following log error lines:\n[Fri Jun 21 18:10:09 2002] [error] [client 127.0.0.1] E:/Web/cgi-bin/test.cgi is\nnot executable; ensure interpreted scripts have \"#!\" first line\n[Fri Jun 21 18:10:09 2002] [error] [client 127.0.0.1] (9)Bad file descriptor:\ndon't know how to spawn child process: E:/Web/cgi-bin/test.cgi\nand the error message\n  E:/Web/cgi-bin/test.cgi is not executable; ensure interpreted scripts have\n\"#!\" first line\nwith Error 500 is sent to the browser.\n\nThe script is executed without error under both names on the same machine on\nApache 1.3.26. This means, that the registry is exactly the same for both Apache\ninstallations.\nAlso invocation from command line works fine for both file names.\n\nThe only difference I know is, that the registry entry for \".pl\" was done by the\nPerl installation (currently ASPN 5.6.1 Build 633) and the entry for \".cgi\" was\ndone manually in NT-Explorer with the same parameter for \"Open\" as copied from\n\".pl\" (\"D:\\Programme\\Perl\\bin\\perl.exe\" \"%1\" %*) and no DDE enabled.\n\n-------------------------\nSystem: WinNT 4.0 SP6a, Apache installed from \"apache_2.0.39-win32-x86-no_ssl.msi\".\n\nSnippet from httpd.conf (for both installations):\n-------------------------\nScriptInterpreterSource registry\n<Directory \"E:/Web/cgi-bin\">\n    AllowOverride Limit\n    Options ExecCGI\n    AddHandler cgi-script .cgi\n    AddHandler cgi-script .pl\n    Order allow,deny\n    Allow from all\n</Directory>\n-------------------------", "is_private": false}, {"count": 9, "tags": [], "bug_id": 7786, "attachment_id": null, "text": "Just for fun, try combining the lines;\n\n    AddHandler cgi-script .cgi\n    AddHandler cgi-script .pl\n\ninto;\n\n    AddHandler cgi-script .cgi .pl\n\nand see what happens.  I'm simply wondering if the .pl association didn't clobber\nthe .cgi association in that container.\n", "id": 18347, "time": "2002-06-21T17:33:28Z", "creator": "wrowe@apache.org", "creation_time": "2002-06-21T17:33:28Z", "is_private": false}, {"count": 10, "tags": [], "creator": "wolf-dietrich.moeller@siemens.com", "attachment_id": null, "id": 18447, "time": "2002-06-24T08:38:20Z", "bug_id": 7786, "creation_time": "2002-06-24T08:38:20Z", "is_private": false, "text": "Combining the two lines didn't make any difference. Still Apache2 does not\nrecognize the \".cgi\"-scripts.\n\nBut I found another difference.\nLooking into the registry with regedt32, it showed, that the Perl installation\ngenerated the entry for key \"command\" (under \"Perl\", \"shell\", \"Open\") with type\nREG_SZ, but the NT-Explorer created the key \"command\" (under \"cgifile\", \"shell\",\n\"Open\") with a value of type REG_EXPAND_SZ.\nDeleting the value of this key with regedit (key \"(Standard)\" under \"cgifile\",\n\"shell\", \"Open\", \"command\") and then entering a new value there (again the\ninvocation for the Perl installation: \"D:\\Programme\\Perl\\bin\\perl.exe\" \"%1\" %*)\ngenerated a value of type REG_SZ. And now this entry works!!\n\nBy the way: I also tried the mod_ssl from\n\"Apache-2.0.39-Mod_SSL-OpenSSL-0.9.6d-Win32.zip\" from\n\"http://www.modssl.org/contrib/\", and with https \".cgi\"-scripts still didn't\nwork, while \".pl\"-scripts are fine. The above procedure changed only the\nbehavior fot http-requests, not for https-requests (I have to rely on\n\"http://www.modssl.org/contrib/\", as I don't have a compiler environment on my\nNT machine)."}, {"count": 11, "tags": [], "creator": "wolf-dietrich.moeller@siemens.com", "is_private": false, "text": "Supplement to last comment:\nThe error messages in the mod_ssl case are a little bit different:\n[Mon Jun 24 11:31:18 2002] [error] [client 127.0.0.1] (22)Invalid argument:\ncouldn't create child process: 22: E:/Web/cgi-bin/test.cgi\n[Mon Jun 24 11:31:18 2002] [error] [client 127.0.0.1] (22)Invalid argument:\ncouldn't spawn child process: E:/Web/cgi-bin/test.cgi", "id": 18451, "time": "2002-06-24T09:34:38Z", "bug_id": 7786, "creation_time": "2002-06-24T09:34:38Z", "attachment_id": null}, {"count": 12, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "id": 18474, "time": "2002-06-24T15:45:39Z", "bug_id": 7786, "creation_time": "2002-06-24T15:45:39Z", "is_private": false, "text": "\n  Ok, I suspect your interpreter's path was non-ascii?  I committed a fix last\n  night to handle non-ASCII characters in the ext\\shell\\open\\command variables,\n  so this should work for you.  This patch also handles the non-ASCII elements\n  of envvars correctly, so that REG_EXPAND_SZ strings will be properly parsed.\n  That too could have been your issue.\n\n  I will announce a development binary of 2.0.40-dev for testing so you can\n  verify [if you recall the old command REG_EXPAND_SZ entry.]  I tested it\n  simply by using %SystemDrive% instead of c: in one of my entries and\n  confirmed it will work correctly.\n\n\n"}, {"count": 13, "tags": [], "creator": "wolf-dietrich.moeller@siemens.com", "attachment_id": null, "id": 18483, "time": "2002-06-24T17:18:59Z", "bug_id": 7786, "creation_time": "2002-06-24T17:18:59Z", "is_private": false, "text": "My interpreter path is ASCII-only (no \"German\" characters).\nBut I agree with you, that the REG_EXPAND_SZ must be the reason, as NT-Explorer\ngenerates this type of value.\nChanging the type to REG_SZ manually, or using the old winfile.exe to generate\nthe entry (it does REG_SZ), makes it work properly.\nThanks. I'll try the -dev.\n\nAs to the https problem:\nIt seems, that only the extension \".cgi\" is \"not liked\" in https-requests. A few\nother extension I tried work properly under https, when entered as REG_SZ.\nShould I open a new bug related to mod_ssl for that?"}, {"attachment_id": null, "tags": [], "bug_id": 7786, "is_private": false, "count": 14, "id": 18490, "time": "2002-06-24T17:36:28Z", "creator": "wrowe@apache.org", "creation_time": "2002-06-24T17:36:28Z", "text": "\n\"Should I open a new bug related to mod_ssl for that?\"\n\n  mod_ssl has nothing to do with cgi invocation, so I suspect the configuration...\n  such as your placement of the ScriptInterpreterSource directive or the\n  AddHandler cgi-script in a non-ssl vhost (or something like that.)\n\n  Try -dev and then check back in with your results.  We can go from there.\n"}]