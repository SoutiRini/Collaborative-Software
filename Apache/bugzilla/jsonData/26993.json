[{"count": 0, "tags": [], "text": "Since upgrading from Ant 1.5.4 to 1.6.x, we are experiencing problems with the \ncopy task. We use a template to create property files for various deployment \nregions, where the property values are instantiated from two different region \nspecific data files.", "attachment_id": null, "id": 52401, "creator": "apache-bugs@skex.com.au", "time": "2004-02-17T02:07:34Z", "bug_id": 26993, "creation_time": "2004-02-17T02:07:34Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 10387\nThe part of the build file that creates the problem.", "attachment_id": 10387, "bug_id": 26993, "id": 52402, "time": "2004-02-17T02:08:59Z", "creator": "apache-bugs@skex.com.au", "creation_time": "2004-02-17T02:08:59Z", "is_private": false}, {"count": 2, "tags": [], "text": "What seems to cause the problem is lines like this in one of the data files:\n\nmojonode.home=%%mojonode.home%%\n\nand\n\nmojonode.home = /usr/local/mojonode\n\nin the other (yes that's a silly legacy...)\n\nthis line used to be properly expanded in previous versions, but we know get \nthe \"Infinite loop\" warning. I have attached the relevant part of the build \nscript as well as the two results of the copy task, i.e. two log4j property \nfiles, one build with 1.5.4 which is ok, the second one with 1.6.1 which \nbreaks.\n\n", "is_private": false, "id": 52403, "creator": "apache-bugs@skex.com.au", "time": "2004-02-17T02:19:26Z", "bug_id": 26993, "creation_time": "2004-02-17T02:19:26Z", "attachment_id": null}, {"attachment_id": 10388, "tags": [], "bug_id": 26993, "is_private": false, "count": 3, "id": 52404, "time": "2004-02-17T02:20:34Z", "creator": "apache-bugs@skex.com.au", "creation_time": "2004-02-17T02:20:34Z", "text": "Created attachment 10388\nThe result of the ant copy task using ANT 1.5.4"}, {"count": 4, "tags": [], "text": "Created attachment 10389\nThe result of the copy task using ANT 1.6.1, which is stuffed.", "attachment_id": 10389, "bug_id": 26993, "id": 52405, "time": "2004-02-17T02:20:58Z", "creator": "apache-bugs@skex.com.au", "creation_time": "2004-02-17T02:20:58Z", "is_private": false}, {"count": 5, "tags": [], "text": "Hmm, but the filter definition of mojonode.home=%%mojonode.home%% is recursive\nand the only reason your 1.5.x build is not running into an endless loop is\nthat you later correct this token.\n\nI don't see how Ant could detect that the definition gets overridden later, since\ntoken expansion happens during reading (to account for another bug that relied on\nthe order of tokens being read).", "attachment_id": null, "bug_id": 26993, "id": 72385, "time": "2005-03-14T15:44:00Z", "creator": "bodewig@apache.org", "creation_time": "2005-03-14T15:44:00Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 26993, "attachment_id": null, "id": 93674, "time": "2006-09-16T23:57:39Z", "creator": "peterreilly@apache.org", "creation_time": "2006-09-16T23:57:39Z", "is_private": false, "text": "Marking this as WONTFIX, there is not\nmuch we can do. The mojonode.home=%%mojonode.home%%\nis clearly recursive, and as Stefan says,\nant has to deal with the tokens one at a time\ndue to the need to token replacing in the token file,\nso ant cannot \"look-ahead\" to see a correct replacment.\n"}]