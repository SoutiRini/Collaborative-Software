[{"count": 0, "tags": [], "bug_id": 45040, "attachment_id": null, "id": 116820, "time": "2008-05-19T11:03:49Z", "creator": "jasonzhang2002@gmail.com", "creation_time": "2008-05-19T11:03:49Z", "is_private": false, "text": "My Environment is JSF 1.2(sun RI)+facelet+tomcat 6.0.16. There is an integer field in my web form. I monitored the submitted form using the tcpmon. The value is indeed empty.  Debugging confirmed that the submitted value is empty. However, when it is \"update model\" in JSF, the value becomes Integer(0) while I expect a null object. I traced the code down to AstValue.setValue() \n \nline 1132:        resolver.setValue(ctx, t.base, t.property,\n                        // coerce to the expected type                                                                                                       \n                        ELSupport.coerceToType(value,\n                                         resolver.getType(ctx, t.base, t.property)));\n\nwhich calls \n\njava/org/apache/el/lang/ELSupport.java\nline 198:  public final static Number coerceToNumber(final Object obj) {\nline 199:        if (obj == null) {\nline 200:           return ZERO;\n\nThe ELSupport here converts a null object to zero object. This makes it impossible to differentiate \"an empty field\" from \"a field with 0\" from web in JSF model object.\n\n\nMaybe the setValue in AstValue should be changed to\n resolver.setValue(ctx, t.base, t.property, value==null?null:                                                                    ELSupport.coerceToType(value, resolver.getType(ctx, t.base, t.property)));\n\nthanks\n\n-jason"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "This behaviour us as oer the soec\n\n*** This bug has been marked as a duplicate of bug 43285 ***", "id": 116821, "time": "2008-05-19T11:49:04Z", "bug_id": 45040, "creation_time": "2008-05-19T11:49:04Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Sorry about the typing. It should have said \"as per the spec\"", "id": 116823, "time": "2008-05-19T11:55:39Z", "bug_id": 45040, "creation_time": "2008-05-19T11:55:39Z", "is_private": false}]