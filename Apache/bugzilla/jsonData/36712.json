[{"count": 0, "attachment_id": null, "creator": "Lothsahn@yahoo.com", "is_private": false, "id": 80119, "time": "2005-09-19T17:14:25Z", "bug_id": 36712, "creation_time": "2005-09-19T17:14:25Z", "tags": [], "text": "The ant sql task fails in 1.6.5 even when onerror=false when the sql login fails. \n \nIf the login to the sql server fails, the build will fail.  However, the sql\nstatements failing does work properly (the build continues).\n\n\nCreateUser.sqlserver:\n     [copy] Copying 1 file to C:\\work\\V5intg\\temp\n\nBUILD FAILED\nC:\\work\\V5intg\\workforce\\buildtools\\build.xml:3863: java.sql.SQLException: Login\n failed for user 'xxxxxx'.\n\nTotal time: 3 seconds"}, {"count": 1, "tags": [], "text": "(In reply to comment #0)\n> The ant sql task fails in 1.6.5 even when onerror=false when the sql login fails. \n>  \n> If the login to the sql server fails, the build will fail.  However, the sql\n> statements failing does work properly (the build continues).\n> \n> \n> CreateUser.sqlserver:\n>      [copy] Copying 1 file to C:\\work\\V5intg\\temp\n> \n> BUILD FAILED\n> C:\\work\\V5intg\\workforce\\buildtools\\build.xml:3863: java.sql.SQLException: Login\n>  failed for user 'xxxxxx'.\n> \n> Total time: 3 seconds\n\nSorry--I meant onerror=\"continue\"\n\nThe ant task is shown below:\n<sql driver=\"${jdbc.driver}\"\n         url=\"${jdbc.url.sqlserver.nodb}\"\n         userid=\"test\"\n         password=\"${sqlserver.system.password}\"\n         src=\"temp/CreateSqlServerUser.sql\"\n         onerror=\"continue\"/>", "is_private": false, "id": 80120, "creator": "Lothsahn@yahoo.com", "time": "2005-09-19T17:16:05Z", "bug_id": 36712, "creation_time": "2005-09-19T17:16:05Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Maybe the code treats a login error as a more serious error.\n\nWhat exactly is that you are trying to do, as I may have misread this, is it \n\n1. keep going over any SQL failure\n2. halt the build on an error.\n\nif it is (#1). the try/catch task from ant-contrib.sf.net lets you catch and\nignore a build failure, giving you an immediate workaround for this issue.", "attachment_id": null, "id": 80122, "creator": "stevel@apache.org", "time": "2005-09-19T17:24:35Z", "bug_id": 36712, "creation_time": "2005-09-19T17:24:35Z", "is_private": false}, {"count": 3, "tags": [], "creator": "sbailliez@apache.org", "attachment_id": null, "id": 81571, "time": "2005-10-22T20:28:36Z", "bug_id": 36712, "creation_time": "2005-10-22T20:28:36Z", "is_private": false, "text": "Set to invalid."}, {"count": 4, "tags": [], "bug_id": 36712, "attachment_id": null, "id": 81572, "time": "2005-10-22T20:29:33Z", "creator": "sbailliez@apache.org", "creation_time": "2005-10-22T20:29:33Z", "is_private": false, "text": "Sorry, wrong bug..."}, {"count": 5, "tags": [], "text": "We are indeed trying for #1.\n\nYes, the code treats the login error separately from a sql error.  Either both\nthe login and the sql execution should be handled by the onerror, or there\nshould be a configuration flag in the sql target for the login failure as well.\n\nAnt contrib's try/catch will indeed work...  however, this is for a production\nenvironment and I am not allowed to include extra libraries at this time.  We\nmanaged to work around this issue another way, although it's not ideal.\n\n\n(In reply to comment #2)\n> Maybe the code treats a login error as a more serious error.\n> \n> What exactly is that you are trying to do, as I may have misread this, is it \n> \n> 1. keep going over any SQL failure\n> 2. halt the build on an error.\n> \n> if it is (#1). the try/catch task from ant-contrib.sf.net lets you catch and\n> ignore a build failure, giving you an immediate workaround for this issue.\n\n", "is_private": false, "id": 81574, "creator": "Lothsahn@yahoo.com", "time": "2005-10-22T21:11:44Z", "bug_id": 36712, "creation_time": "2005-10-22T21:11:44Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 36712, "is_private": false, "id": 88660, "creation_time": "2006-04-29T21:00:40Z", "time": "2006-04-29T21:00:40Z", "creator": "kim.limbrick@gmail.com", "text": "This bug also makes it difficult to test for a valid a user and password \ncombination which is what I'd like to be able to do.", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 36712, "is_private": false, "id": 88701, "attachment_id": null, "creator": "riznob@hotmail.com", "creation_time": "2006-05-01T16:59:21Z", "time": "2006-05-01T16:59:21Z", "text": "I believe this is by design. Read the documentation carefully. It says...\n\"onerror  - Action to perform when statement fails: continue, stop, abort  -  \nNo, default \"abort\"\n\nIn the case of a failed login, the statement is never executed. The onerror \nattribute is meant to control what happens when the statement fails.\n\nPerhaps you should submit an enhancement request for a new attribute \ncalled \"onloginerror\" that handles login similar to the way onerror handles sql \nstatements."}, {"count": 8, "tags": [], "bug_id": 36712, "attachment_id": null, "text": "svn rev 675917", "id": 118552, "time": "2008-07-11T04:00:01Z", "creator": "bodewig@apache.org", "creation_time": "2008-07-11T04:00:01Z", "is_private": false}, {"count": 9, "tags": [], "text": "should have said: <sql> now has a failOnConnectionError attribute that defaults to true", "is_private": false, "id": 118553, "creator": "bodewig@apache.org", "time": "2008-07-11T04:05:29Z", "bug_id": 36712, "creation_time": "2008-07-11T04:05:29Z", "attachment_id": null}]