[{"count": 0, "tags": [], "bug_id": 12263, "text": "This *may* be a duplicate of #1663 but I'm not sure.\n\nWe are attempting to deploy a JSP/servlet application on a Stronghold server on\nSolaris 7 with Tomcat 4.0.4 and mod_webapp.  The server version is\n\n#./httpd -v\nServer version: Stronghold/3.0 Apache/1.3.12 C2NetEU/3011 (Unix)\nServer built:   Jun  1 2000 15:25:28\n\nProblem:  When a servlet calls response.sendRedirect(<url>) that was called with\nhttps, we get a 400 (bad request) error.  Instead of sending to\nhttps://server_name/application/jsp, it goes to\nhttp://server_name:443/application/jsp (\"You are speaking plain HTTP to an\nSSL-enabled server port.).  <jsp:forward> works fine.\n\nIdeas?  Work arounds?\n\n(If you want a URL for this, contact me or szimmer@mindwrap.com.)", "id": 22177, "time": "2002-09-03T15:35:26Z", "creator": "thad@mindwrap.com", "creation_time": "2002-09-03T15:35:26Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 12263, "text": "We get a similar problem with Tomcat 4.1.10 & IIS 5. Our connector log shows:\n\n[Tue Dec 10 15:23:59 2002]  [jk_ajp_common.c (483)]: ajp_unmarshal_response:\nstatus = 302\n[Tue Dec 10 15:23:59 2002]  [jk_ajp_common.c (488)]: ajp_unmarshal_response:\nNumber of headers is = 3\n[Tue Dec 10 15:23:59 2002]  [jk_ajp_common.c (532)]: ajp_unmarshal_response:\nHeader[0] [Content-Type] = [text/html]\n[Tue Dec 10 15:23:59 2002]  [jk_ajp_common.c (532)]: ajp_unmarshal_response:\nHeader[1] [Set-Cookie] = [JSESSIONID=DC4236D0E4C0471D8A625A42B65FFFBF; Path=/xxxx]\n[Tue Dec 10 15:23:59 2002]  [jk_ajp_common.c (532)]: ajp_unmarshal_response:\nHeader[2] [Location] = [http://servername:443/xxxx/report.jsp]\n\n\nThis was from a simple response.sendRedirect()", "id": 27573, "time": "2002-12-10T05:08:26Z", "creator": "nl@essential.com.au", "creation_time": "2002-12-10T05:08:26Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "We are having a similar issue. I assume that this has to do with the fact that\nTomcat Coyote connector knows about proxyName and proxyPort attributes, however\nassumes always http for the proxy. If you are using a HTTPS reverse proxy (or as\nyou, a Stronghold Apache frontend), the 302 redirect \"Location\" header receives\nthe wrong full qualified URL.\n\nI didn't do any further investigation, but I suggest the solution of adding a\nproxyScheme attribute which by default is http, but can be overridden with\n\"https\", the only alternative valid value.\n\nI also would change the Component of this bug, but I leave this to active\ndevelopers to decide.", "attachment_id": null, "id": 40451, "creator": "bgoetz@tetrade.ch", "time": "2003-07-11T12:16:29Z", "bug_id": 12263, "creation_time": "2003-07-11T12:16:29Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 12263, "text": "I believe this is fixed in the upcoming 4.1.25.", "count": 3, "id": 40454, "time": "2003-07-11T12:31:26Z", "creator": "remm@apache.org", "creation_time": "2003-07-11T12:31:26Z", "is_private": false}, {"count": 4, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "is_private": false, "id": 51885, "time": "2004-02-07T15:13:16Z", "bug_id": 12263, "creation_time": "2004-02-07T15:13:16Z", "text": "Proabably fixed (in lastest release) based on Remy's comments. Reopen if still\nproblem with restatement and more detailed config.\n\nNote: If using mod_webapp - this will be marked as WONTFIX since mod_webapp is\ndeprecated and unsupported by the tomcat team."}]