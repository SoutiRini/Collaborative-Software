[{"count": 0, "tags": [], "text": "The change from Bug 58898 breaks argument processing on Solaris, since Solaris sed does not process lines that do not end in a newline. All arguments end up empty. Seen on 11.3, x64.\n\nChanging the printf pattern to '%s\\n' does the trick with no ill effects that I can see (also if using GNU sed).", "attachment_id": null, "bug_id": 59898, "id": 192622, "time": "2016-07-25T13:32:42Z", "creator": "rasher@gmail.com", "creation_time": "2016-07-25T13:32:42Z", "is_private": false}, {"count": 1, "tags": [], "text": "Many thanks!\n\nWe've got a couple of bug reports about the change already and I was close to just reverting the change as I haven't got access to any of the OSes that have been reported as problematic.\n\napplied your suggested change as git commit ad86305 to 1.9.x and master and will ask the people who reported Bug 59695, Bug 59683 and Bug 59321 to check whether it fixes the problem for them.", "is_private": false, "id": 192626, "creator": "bodewig@apache.org", "time": "2016-07-25T14:32:40Z", "bug_id": 59898, "creation_time": "2016-07-25T14:32:40Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 59898, "attachment_id": null, "id": 194050, "time": "2016-09-28T07:56:14Z", "creator": "maarten_coene@yahoo.com", "creation_time": "2016-09-28T07:56:14Z", "is_private": false, "text": "Stefan,\n\nwe had the same problem after upgrading to 1.9.7 and I can confirm this change fixes the issue.\n\nthanks,\nMaarten"}, {"count": 3, "tags": [], "text": "thanks, Maarten.", "attachment_id": null, "bug_id": 59898, "id": 194062, "time": "2016-09-28T19:11:00Z", "creator": "bodewig@apache.org", "creation_time": "2016-09-28T19:11:00Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 59898, "attachment_id": 34416, "is_private": false, "id": 194794, "time": "2016-11-03T13:56:51Z", "creator": "kwilde@bol.com", "creation_time": "2016-11-03T13:56:51Z", "text": "Created attachment 34416\n[PATCH] Use poll(2) in posix nb_connect\n\nThis issue is caused by limitations of the select(2) system call. From the (linux) manpage:\n\n> POSIX allows an implementation to define an upper limit, advertised via the\n> constant FD_SETSIZE, on the range of file descriptors that can be specified\n> in a file descriptor set.  The Linux kernel imposes no fixed limit, but the\n> glibc implementation makes fd_set a fixed-size type, with FD_SETSIZE defined\n> as 1024, and the FD_*() macros operating according to that limit.  To\n> monitor file descriptors greater than 1023, use poll(2) instead.\n\nAs Michiel already noted, poll(2) is already imported in jk_connect.c, so using poll(2) doesn't add any new dependencies.\n\nI've attached a patch that uses poll(2) if it is available at compile time; otherwise it falls back to the current select(2) implementation.\n\nOn the long run, it would probably be preferable to use some kind of event library like libuv or libevent that abstracts over the kernel interface, and automatically uses the optimal one available (e.g. epoll on linux and kqueue on FreeBSD). This would both improve portability and performance, and possibly code simplicity."}, {"count": 5, "tags": [], "bug_id": 59898, "attachment_id": null, "is_private": false, "id": 194795, "time": "2016-11-03T13:59:02Z", "creator": "kwilde@bol.com", "creation_time": "2016-11-03T13:59:02Z", "text": "Ignore my previous comment and the patch, something went wrong and I commented on the wrong issue!"}, {"count": 6, "tags": [], "text": "We're experiencing this bug right now. I nearly opened a new bug for this. Bless the automatic search function indicating other similar bugs, I'd searched for the wrong keywords.", "is_private": false, "id": 195143, "creator": "danowar2k@googlemail.com", "time": "2016-11-22T12:24:08Z", "bug_id": 59898, "creation_time": "2016-11-22T12:24:08Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "Daniel, any chance you could try the wrapper script of the current master branch - https://git-wip-us.apache.org/repos/asf?p=ant.git;a=blob_plain;f=src/script/ant;h=5d1d15483c7bc71ecb03279432e7b074e1185662;hb=HEAD - a try and confirm it fixes the problem for you?", "attachment_id": null, "bug_id": 59898, "id": 195150, "time": "2016-11-22T19:23:00Z", "creator": "bodewig@apache.org", "creation_time": "2016-11-22T19:23:00Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 59898, "attachment_id": null, "id": 195756, "time": "2016-12-31T11:07:05Z", "creator": "bodewig@apache.org", "creation_time": "2016-12-31T11:07:05Z", "is_private": false, "text": "*** Bug 60300 has been marked as a duplicate of this bug. ***"}, {"count": 9, "tags": [], "text": "*** Bug 59683 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 195760, "creator": "bodewig@apache.org", "time": "2016-12-31T11:08:55Z", "bug_id": 59898, "creation_time": "2016-12-31T11:08:55Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 59898, "is_private": false, "count": 10, "id": 195762, "time": "2016-12-31T11:09:35Z", "creator": "bodewig@apache.org", "creation_time": "2016-12-31T11:09:35Z", "text": "*** Bug 59695 has been marked as a duplicate of this bug. ***"}, {"count": 11, "tags": [], "bug_id": 59898, "attachment_id": null, "is_private": false, "id": 195764, "time": "2016-12-31T11:10:16Z", "creator": "bodewig@apache.org", "creation_time": "2016-12-31T11:10:16Z", "text": "*** Bug 59321 has been marked as a duplicate of this bug. ***"}]