[{"count": 0, "tags": [], "creator": "Tim.Whittington@orionhealth.com", "attachment_id": null, "id": 123407, "time": "2008-12-18T14:04:20Z", "bug_id": 46416, "creation_time": "2008-12-18T14:04:20Z", "is_private": false, "text": "Building against the 1.2.27 tag, I've come across an issue with the order of includes in jk_global.h that breaks the build using Visual Studio 2005.\n\nSome recent changes to keepalive code started using the tcp_keepalive struct in <mstcpip.h>, which is only included in jk_global.h if _WINDOWS_ is not already defined - i.e. if <windows.h> has not already been included.\n\nUnfortunately <windows.h> is included by APR (at least in the Apache 2.0 build I have), and the APR headers are included before the #ifndef _WINDOWS_ block.\nSwitching the APR includes to below the #ifdef WIN32 block fixes the build.\n\nIt appears there's some fragility in the includes - it seems a bit odd that mod_jk is sensitive to being the first to import <windows.h> - but I didn't look hard enough at all the other defines/includes in there to say it could be separated out entirely.\n\n(On a side note, <windows.h> is included in jk_mt.h, which may not be necessary)."}, {"count": 1, "text": "Can you check if the trunk jk_global.h fixes the build?", "bug_id": 46416, "attachment_id": null, "id": 125078, "time": "2009-02-23T02:46:27Z", "creator": "mturk@apache.org", "creation_time": "2009-02-23T02:46:27Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "Tim.Whittington@orionhealth.com", "attachment_id": null, "is_private": false, "id": 125101, "time": "2009-02-23T12:43:29Z", "bug_id": 46416, "creation_time": "2009-02-23T12:43:29Z", "text": "Looks good now - thanks."}]