[{"count": 0, "tags": [], "bug_id": 59070, "is_private": false, "text": "Created attachment 33594\nfix for CLOB reads in apr_dbd_oracle.c\n\nI bumped into a bug recently (actually, in APR-util 1.5.x but it's also in APR trunk) where CLOBs are not readable due to a failed check on the val->type in dbd_oracle_get_entry() in dbd/apr_dbd_oracle.c.\n\nIn the surrounding switch statement, val->type has been determined to be one of the Oracle SQLT_BLOB or SQLT_CLOB values.  Then, to handle the CLOB case specifically, val->type is tested again but now it is incorrectly checked against APR_DBD_TYPE_CLOB instead of SQLT_CLOB.\n\nThat always fails, so CLOBs are treated as BLOBs, insufficient space may be allocated, and then trouble ensues.\n\nThe patch attached has been running in production for a long time; I just never realized I hadn't reported it to the APR list.", "id": 188812, "time": "2016-02-25T21:30:52Z", "creator": "chrisd@apache.org", "creation_time": "2016-02-25T21:30:52Z", "attachment_id": 33594}]