[{"count": 0, "tags": [], "creator": "william.lee@rainstor.com", "attachment_id": 27050, "text": "Created attachment 27050\nProposed patch\n\nIf there are two calls to apr_dir_make_recursive happening on the same non-existent path, at the same time, it can be that both instances call the apr_dir_make function.  e.g.\n\nthread 1 calls apr_dir_make_recursive on parent\nthread 2 calls apr_dir_make_recursive on parent\nthread 1 calls apr_dir_make (returns APR_SUCCESS)\nthread 2 calls apr_dir_make (returns EEXIST)\n\nIn this case the second thread is returned EEXIST despite the documented behaviour for the function being \"No error will be reported if PATH already exists\".\n\nThis is a timing issue and so is relatively rare but has been observed within our product during testing.  The problem can affect both simultaneous threads or simultaneous processes and due to the nature of the code could happen on any platform.\n\nA proposed patch is attached.", "id": 146578, "time": "2011-05-24T08:49:22Z", "bug_id": 51254, "creation_time": "2011-05-24T08:49:22Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 51254, "attachment_id": null, "id": 148693, "time": "2011-08-18T17:23:54Z", "creator": "wiml@omnigroup.com", "creation_time": "2011-08-18T17:23:54Z", "is_private": false, "text": "The patch looks good to me. Another approach would be to move the ENOENT test before the existing EEXIST case so that the EEXIST test does double duty."}, {"count": 2, "tags": [], "text": "r1183688, r1183713, r1183715, will be in 1.4.6", "attachment_id": null, "id": 150627, "creator": "sf@sfritsch.de", "time": "2011-10-15T21:28:03Z", "bug_id": 51254, "creation_time": "2011-10-15T21:28:03Z", "is_private": false}, {"count": 3, "tags": [], "text": "This was in 1.4.6 and later.\n\nIncidentally, a patch for a related problem was just posted to dev@apr:\n\nhttp://mail-archives.apache.org/mod_mbox/apr-dev/201401.mbox/%3C012801cf12c6%2403384e40%2409a8eac0%24%40qqmail.nl%3E", "attachment_id": null, "id": 172423, "creator": "trawick@apache.org", "time": "2014-01-16T15:24:32Z", "bug_id": 51254, "creation_time": "2014-01-16T15:24:32Z", "is_private": false}]