[{"count": 0, "attachment_id": null, "creator": "jcorley1@nc.rr.com", "is_private": false, "id": 41551, "time": "2003-07-26T13:45:33Z", "bug_id": 21908, "creation_time": "2003-07-26T13:45:33Z", "tags": [], "text": "This patch fixes the bug Yaov pointed out in the 4.1.26 test tarball about \"bin/catalina.sh: !: not \nfound\".\nJason\n\n--- bin/setclasspath.sh     2003-07-15 04:56:10.000000000 -0400\n+++ bin/setclasspath.sh   2003-07-25 16:27:46.870053000 -0400\n@@ -53,7 +53,7 @@\n \n # Set standard commands for invoking Java.\n _RUNJAVA=\"$JAVA_HOME\"/bin/java\n-if ! $os400; then\n+if [ ! \"$os400\" ]; then\n   _RUNJDB=\"$JAVA_HOME\"/bin/jdb\n fi\n _RUNJAVAC=\"$JAVA_HOME\"/bin/javac"}, {"count": 1, "attachment_id": null, "creator": "funkman@joedog.org", "is_private": false, "id": 41552, "time": "2003-07-26T13:54:54Z", "bug_id": 21908, "creation_time": "2003-07-26T13:54:54Z", "tags": [], "text": "Would adding \n#!/bin/sh\nto the top of the file fix it instead? Without #!/bin/sh, the wrong interpreter\nmight be being used under certain conditions.(??)\n\n"}, {"count": 2, "attachment_id": null, "creator": "jcorley1@nc.rr.com", "is_private": false, "id": 41553, "time": "2003-07-26T14:02:00Z", "bug_id": 21908, "creation_time": "2003-07-26T14:02:00Z", "tags": [], "text": "No, setclasspath.sh is sourced by catalina.sh which uses /bin/sh as it's interpreter.  So there is no \nreason to execute a subshell in setclasspath.sh.  The problem is someone wanted to do a test for \nwhether the os400 variable was set and forget the test so the if fails.  [ == test.\nJason\n"}, {"count": 3, "tags": [], "bug_id": 21908, "attachment_id": null, "id": 41556, "time": "2003-07-26T14:30:57Z", "creator": "funkman@joedog.org", "creation_time": "2003-07-26T14:30:57Z", "is_private": false, "text": "Patched submitted"}, {"count": 4, "tags": [], "text": "Not to be a pain in the butt, but the below fix isn't the patch I submitted in\nthe bug report.  In addition, the patch submitted changes the desired effect of\nthat block of code (from a check for existence to a check for non-existance).  I\nwas going to submit a patch at some point to change all of that syntax to\nexplicit test checks.  So I recommend changing:\n    if $foo; then\nTo:\n    if [ \"$foo\" ]; then\nprecisely to avoid errors like this and the one that required the patch I sent\nin originally.\nJason\n\n-----\n\nfunkman     2003/07/26 07:27:54\n\n  Modified:    catalina/src/bin setclasspath.sh\n  Log:\n  Per bugzilla 21908\n  Thanks jcorley1 AT nc.rr dot com (Jason Corley)\n  \n  Revision  Changes    Path\n  1.10      +2 -2      jakarta-tomcat-4.0/catalina/src/bin/setclasspath.sh\n  \n  Index: setclasspath.sh\n  ===================================================================\n  RCS file: /home/cvs/jakarta-tomcat-4.0/catalina/src/bin/setclasspath.sh,v\n  retrieving revision 1.9\n  retrieving revision 1.10\n  diff -u -r1.9 -r1.10\n  --- setclasspath.sh   8 May 2003 08:19:58 -0000       1.9\n  +++ setclasspath.sh   26 Jul 2003 14:27:54 -0000      1.10\n  @@ -10,7 +10,7 @@\n     echo \"This environment variable is needed to run this program\"\n     exit 1\n   fi\n  -if $os400; then\n  +if [ ! \"$os400\" ]; then\n     if [ ! -r \"$JAVA_HOME\"/bin/java -o ! -r \"$JAVA_HOME\"/bin/javac ]; then\n       echo \"The JAVA_HOME environment variable is not defined correctly\"\n       echo \"This environment variable is needed to run this program\"", "attachment_id": null, "bug_id": 21908, "id": 41661, "time": "2003-07-28T15:02:33Z", "creator": "jcorley1@nc.rr.com", "creation_time": "2003-07-28T15:02:33Z", "is_private": false}, {"count": 5, "attachment_id": null, "creator": "funkman@joedog.org", "is_private": false, "id": 41665, "time": "2003-07-28T15:40:59Z", "bug_id": 21908, "creation_time": "2003-07-28T15:40:59Z", "tags": [], "text": "Now everything makes sense. The correct patch should be applied now. (I hope)\nSorry about the confusion."}, {"count": 6, "attachment_id": null, "creator": "markt@apache.org", "text": "*** Bug 22673 has been marked as a duplicate of this bug. ***", "id": 62006, "time": "2004-08-15T15:35:45Z", "bug_id": 21908, "creation_time": "2004-08-15T15:35:45Z", "tags": [], "is_private": false}]