[{"count": 0, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "id": 184768, "time": "2015-08-26T18:06:13Z", "bug_id": 58285, "creation_time": "2015-08-26T18:06:13Z", "is_private": false, "text": "Connectors 1.2.41 introduced the use of atomics. When using GCC 4.1 or newer, support for atomics is assumed, but actually on some platforms not available. For platforms where gcc does not support atomics, it compiles in a function call to e.g. __sync_add_and_fetch_4() and trying to load mod_jk.so results in an undefined symbol error for __sync_add_and_fetch_4.\n\nThis should not happen on the Windows platform, where we use another atomics implementation. It should also not happen for AMD 64 processors, because GCC 4.1 and later implement atomics for them.\n\nIt does happen in x86 32 Bit processors at least for old GCC and also on Solaris Sparc for GCC 4.1.2 (not for 4.2.4 and later).\n\nThis will be fixed by using a configure auto-detection for atomics support. If support is not detected, and we are not on WIN32, we fall back to APR provided atomics. If APR is not available, we fall back to non-atomic increment/decrement plus a startup warning."}, {"count": 1, "attachment_id": null, "bug_id": 58285, "is_private": false, "id": 184769, "time": "2015-08-26T18:11:58Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2015-08-26T18:11:58Z", "tags": [], "text": "Fixed by adding a configure test in r1697985.\nWill be part of version 1.2.42."}, {"count": 2, "tags": [], "bug_id": 58285, "attachment_id": null, "id": 184770, "time": "2015-08-26T18:27:00Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2015-08-26T18:27:00Z", "is_private": false, "text": "For the sake of completeness: this regression was introduced by the fix to \tBZ 44454 and BZ 56703."}]