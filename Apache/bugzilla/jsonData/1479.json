[{"count": 0, "tags": [], "bug_id": 1479, "attachment_id": null, "id": 2064, "time": "2001-04-24T08:59:18Z", "creator": "Daniel.Barclay@digitalfocus.com", "creation_time": "2001-04-24T08:59:18Z", "is_private": false, "text": "The \"ant\" script, although it seems to intend to support CygWin, doesn't\ncorrectly support Windows pathnames (with colons) in search paths \n(LOCALCLASSPATH).  \n\nSpecifically, the script doesn't fully convert file pathnames from \nWindows-style (with colons) to Unix-style (without colons) before assembling \na Unix-style (colon-separated) search path from those file pathnames.\n\nI end up with a LOCALCLASSPATH like this:\n\n   \n:c:/tools/ant-1.3/bin/../lib/ant.jar:c:/tools/ant-1.3/bin/../lib/jaxp.jar:c:/too\nls/ant-1.3/bin/../lib/parser.jar\n\nwhich, when converted to Windows form, ends up like this:\n\n  \n.;c;C:\\tools\\cygwin\\tools\\ant-1.3\\lib\\ant.jar;c;C:\\tools\\cygwin\\tools\\ant-1.3\\li\nb\\jaxp.jar;c;C:\\tools\\cygwin\\tools\\ant-1.3\\lib\\parser.jar;C:\\tools\\jdk1.3\\lib\\to\nols.jar\n\n\nThis problem happens if ANT_HOME is derived from the script's $0 argument.\n\n\nThe problem seems to be that the conversion of environment variable ANT_HOME\nfrom Windows-style to Unix-style occurs BEFORE derivation of ANT_HOME from \n$0 when ANT_HOME is not already set.  Note the code order:\n\n  # For Cygwin, ensure paths are in UNIX format before anything is touched\n  if $cygwin; then\n    [ -n \"$ANT_HOME\" ] &&\n      ANT_HOME=`cygpath --unix \"$ANT_HOME\"`\n    ...\n  fi\n\n  if [ \"$ANT_HOME\" = \"\" ] ; then\n    # try to find ANT\n    ...\n    ## resolve links - $0 may be a link to ant's home\n    PRG=$0\n    ...\n    ANT_HOME=`dirname \"$PRG\"`/..\n  fi  \n\nMoving the above cygpath calls to after the if  statement labeled \"try to \nfind ANT\" seems to fix things."}, {"count": 1, "tags": [], "bug_id": 1479, "attachment_id": null, "id": 3481, "time": "2001-07-07T09:30:24Z", "creator": "nico@apache.org", "creation_time": "2001-07-07T09:30:24Z", "is_private": false, "text": "Fixed for next nightly build as suggested below. "}]