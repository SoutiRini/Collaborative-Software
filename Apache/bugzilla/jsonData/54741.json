[{"count": 0, "tags": [], "creator": "nicholas@nicholaswilliams.net", "attachment_id": null, "text": "Currently Tomcat can only deploy from a WAR file or directory that exists on the real file system. It would be nice, in an embedded Tomcat (one JAR) situation, to be able deploy an application using a JAR file resource without having to first copy that resource to the local file system.\n\nURL war = this.getClass().getResource(\"/MyApp.war\")\nTomcat tomcat = new Tomcat();\n...\ntomcat.addWebapp(\"\", war);\n\nI tried doing this with the actual URL string, but that did not work:\n\nURL war = this.getClass().getResource(\"/MyApp.war\")\nTomcat tomcat = new Tomcat();\n...\ntomcat.addWebapp(\"\", war.toString());\n\nSEVERE: Exception fixing docBase for context []\njava.io.FileNotFoundException: C:\\Users\\Nicholas\\Desktop\\Project\\target\\.extract\\webapps\\jar:file:\\C:\\Users\\Nicholas\\Desktop\\Project\\target\\MyApp-1.0.0-SNAPSHOT.jar (The filename, directory name, or volume label syntax is incorrect)\n\nI had to do this instead:\n\nURL war = this.getClass().getResource(\"/MyApp.war\")\nFile warFile = new File(extractDirectory, \"MyApp.war\");\nFileUtils.copyURLToFile(war, warFile);\nTomcat tomcat = new Tomcat();\n...\ntomcat.addWebapp(\"\", warFile.getAbsolutePath());\n\nOf course, that's ignoring all the error-checking logic. It's just a nuisance to have to do this. Surely, since Tomcat unzips the WAR file anyway, it could do it on a URL resource instead of having to copy the file to the local filesystem.", "id": 166087, "time": "2013-03-22T00:37:38Z", "bug_id": 54741, "creation_time": "2013-03-22T00:37:38Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 54741, "text": "FWIW, Tomcat can be configured to NOT expand WAR files, so you can't rely on a filesystem at all.\n\nAs previously discussed, StandardContext.setDocBase says it can take \"an absolute pathname, a relative pathname, or a URL.\". I believe you stated that trying to use a URL that points to a WAR file within a JAR file does not work.", "id": 166184, "time": "2013-03-27T19:54:31Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-03-27T19:54:31Z", "is_private": false, "attachment_id": null}]