[{"count": 0, "tags": [], "creator": "pedietz@west.com", "attachment_id": null, "text": "We are converting out AIX platform to linux.  The Aix platform uses 1.3.22 with \nsome custom c modules....we are upgrading to 1.3.27 with the same C modules.\n\nWe are running in prefork mode.\n\nThe problem we are seeing is after X minutes (anywhere from 20 minutes to 4 \nhours), the preforked children will suddenly exit leaving only the parent \nprocess.  The parent process still has port 80 open, but since theres no \nworkers, HTTP requests to it timeout.\n\nWe have 2 versions of this statically compiled app runnning, one for port 80 \nand one for port 443.  Both ports lock up eventually.  We have 2 servers, and \nboth servers experience this...\n\nI have tried:\n  1) setting the AcceptMutex to fcntl versus sysv\n  2) compiled out mod_status/mod_info and turned off the shared memory \nscoreboard  (an mod_status was showing all channels in the G state after a \nrestart so I was thinking if shared memory is corrupted).\n  3) setting MaxChild to 256 and StartServers to 20.\n  4) setting the log level to debug\n  5) using apache1.3.28-dev and it too locks up with the same problem\n\nI see no error logs that show why the children are exiting-- in the apache \nerror log nor syslog for linux.  I see no core dumps.\n\nWe are running redhat7.3.\n\nWhere should I look next ?\n\nWe are using openssl\n\nServer version: Apache/1.3.27 (Unix)\nServer built:   May 15 2003 16:39:31\nServer's Module Magic Number: 19990320:13\nServer compiled with....\n -D EAPI\n -D EAPI_MM\n -D EAPI_MM_CORE_PATH=\"logs/mm\"\n -D HAVE_MMAP\n -D HAVE_SHMGET\n -D USE_SHMGET_SCOREBOARD\n -D USE_MMAP_FILES\n -D HAVE_FCNTL_SERIALIZED_ACCEPT\n -D HAVE_SYSVSEM_SERIALIZED_ACCEPT\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D HARD_SERVER_LIMIT=256\n -D HTTPD_ROOT=\"/usr/local/apache\"\n -D SUEXEC_BIN=\"/usr/local/apache/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n -D ACCESS_CONFIG_FILE=\"conf/access.conf\"\n -D RESOURCE_CONFIG_FILE=\"conf/srm.conf\"\n\n[Thu May 15 08:17:14 2003] [notice] Apache/1.3.27 (Unix) mod_ssl/2.8.14 \nOpenSSL/0.9.7b configured -- resuming normal operations", "id": 37326, "time": "2003-05-16T14:43:42Z", "bug_id": 19985, "creation_time": "2003-05-16T14:43:42Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 19985, "attachment_id": null, "id": 37327, "time": "2003-05-16T14:58:28Z", "creator": "trawick@apache.org", "creation_time": "2003-05-16T14:58:28Z", "is_private": false, "text": "can you attach to parent with gdb and see where it sits/loops/whatever?\n\ngut feel is that this wouldn't happen with pure Apache (no EAPI patches, no mm,\netc.), but I'm evil...  can you try such a build for the non-SSL port?\n\nif it still fails, any way you can run strace on some children until something\nbad happens?\n(I think I have a script from Greg Ames somewhere to help keep the amount of\nstrace output under control...  it creates/reads a named pipe and writes the\nlast n lines to a file when the named pipe is closed...  have strace write to\nthat pipe)"}, {"count": 2, "tags": [], "bug_id": 19985, "is_private": false, "text": "probably what the parent is doing is the big picture...\n\nchildren exited for whatever reason (even bad reasons) and because parent is\nstuck no replacements get started", "id": 37328, "time": "2003-05-16T15:06:34Z", "creator": "trawick@apache.org", "creation_time": "2003-05-16T15:06:34Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 19985, "attachment_id": null, "id": 37329, "time": "2003-05-16T15:12:36Z", "creator": "pedietz@west.com", "creation_time": "2003-05-16T15:12:36Z", "is_private": false, "text": "Very good ideas about using gdb and strace...\n\nwill recompile with -g and turn up.\n"}, {"count": 4, "tags": [], "bug_id": 19985, "attachment_id": null, "id": 37358, "time": "2003-05-16T19:24:18Z", "creator": "pedietz@west.com", "creation_time": "2003-05-16T19:24:18Z", "is_private": false, "text": "OK I got one of the servers to go...\n\nI used strace and its showing ECHILDs...\n\nselect(0, NULL, NULL, NULL, {0, 910000}) = 0 (Timeout)\ntime(NULL)                              = 1053112603\nwait4(-1, 0xbffffc2c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053112604\nwait4(-1, 0xbffffc2c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053112605\nwait4(-1, 0xbffffc2c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053112606\nwait4(-1, 0xbffffc2c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053112607\nwait4(-1, 0xbffffc2c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053112608\n\n\nHere's proof that only the parent was alive:\nroot      6115     1  0 11:19 ?        00:00:00 /wic/webservices/apache80/linux-\napache-1.3.28.0.14 -d /wic/webservices/apache80 -f conf/iwww1-httpd-\napache80.conf\n\nI'll try gdb on the next failure.\n"}, {"count": 5, "tags": [], "bug_id": 19985, "attachment_id": null, "id": 37380, "time": "2003-05-17T10:37:50Z", "creator": "trawick@apache.org", "creation_time": "2003-05-17T10:37:50Z", "is_private": false, "text": "Random notes:\nYou can't get coredumps on Linux when Apache 1.3 is started as root anyway\nunless the code has been modified to call prctl().  You might wish to load this\nmodule -- http://www.apache.org/~trawick/mod_prctl.c -- and also make sure\nCoredumpDirectory points to a child-writable directory.\n\nRegarding your comment:\n\n>  2) compiled out mod_status/mod_info and turned off the shared memory \n>scoreboard  (an mod_status was showing all channels in the G state after a \n>restart so I was thinking if shared memory is corrupted).\n\nThere is always a shared memory scoreboard on modern boxes, and it is always\ncritical to proper operation.  If you don't have \"ExtendedStatus On\", less time\nis spent writing detailed status to it, but if there is a problem with shared\nmemory you will crash and burn with or without mod_status.\n\nDid all channels stay in G (gracefully restarting) state indefinitely?\n\n>I used strace and its showing ECHILDs...\n>\n>select(0, NULL, NULL, NULL, {0, 910000}) = 0 (Timeout)\n>time(NULL)                              = 1053112603\n>wait4(-1, 0xbffffc2c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\n\nThis is perfect behavior for the parent...  wake up every second, see if any\nchild processes have exited, repeat.\n\n>Here's proof that only the parent was alive:\n\nI don't see the proof.  Presumably you used ps to get a list of all processes\nand from that determined that there were no children?  Or is one of the fields\nin the ps output the number of child processes?\n\nIf no child processes: Was parent not notified of child process exiting when it\ncalled waitpid()?  Or did parent see the notification but hit some error and\nlose track?  Running strace on the parent up until everything hits the fan\nshould indicate whether or not the parent found out that the child processes\nexit and what action it attempted to take.\n\nAlso, any confirmation you can provide to the hypothesis that 3rd party patches\nto Apache code are required to see the breakage would be helpful.\n"}, {"count": 6, "tags": [], "creator": "pedietz@west.com", "attachment_id": null, "id": 37414, "time": "2003-05-18T17:52:49Z", "bug_id": 19985, "creation_time": "2003-05-18T17:52:49Z", "is_private": false, "text": ">If no child processes: Was parent not notified of child process exiting when \nit called waitpid()?  Or did parent see the notification but hit some error and\nlose track?  Running strace on the parent up until everything hits the fan\nshould indicate whether or not the parent found out that the child processes\nexit and what action it attempted to take.\n\nSo you want me to run strace on the parent for 4 hours till it dies...\nok.  That will be a lot of strace data for sure.  We sent 40k transations \nbefore it went belly up last Friday.\n\n>Also, any confirmation you can provide to the hypothesis that 3rd party \npatches to Apache code are required to see the breakage would be helpful.\n\nWe are running a 3rd party binary module mod_wl.so for the BEA weblogic bridge.\nIts compiled with EAPI=no...while the server is EAPI=yes.  That hasnt hurt the \nAIX version.  I'll try tracking down an EAPI=yes mod_wl.so. But then again if \nmod_wl.so were core dumping, I'd see core files or error logs saying so.  I \nsee nothing.\n"}, {"count": 7, "tags": [], "bug_id": 19985, "attachment_id": null, "id": 37452, "time": "2003-05-19T21:04:03Z", "creator": "pedietz@west.com", "creation_time": "2003-05-19T21:04:03Z", "is_private": false, "text": "I rebuilt apache, statically linking in libweblogic.a.  This has removed the \nwarning about EAPI=no.\n\nI also determined that core dumps are turned off as default on Linux.\n\nI'm planning to test this new version tomorrow with the ulimit for core dumps \nturned on.\n\n"}, {"count": 8, "tags": [], "bug_id": 19985, "attachment_id": null, "is_private": false, "id": 37494, "time": "2003-05-20T18:47:32Z", "creator": "pedietz@west.com", "creation_time": "2003-05-20T18:47:32Z", "text": "Tested with a new version with an EAPI=yes version of libweblogic.a and I also \nhad ulimit -c unlimited on the process.\n\nIt exited to a single process after running 5 hours.\n\nNo core files were made.\n\nI'm running again today with LogLevel debug to find clues.\n"}, {"count": 9, "tags": [], "bug_id": 19985, "attachment_id": null, "id": 37554, "time": "2003-05-21T16:16:03Z", "creator": "pedietz@west.com", "creation_time": "2003-05-21T16:16:03Z", "is_private": false, "text": "It appears to be a linux OS or hardware issue.\n\napachebench can get the processes hung into this state really easy after 20k \ntransactions.\n\nWith that knowledge, I tested 1.3.28-dev, plain-1.3.27, plain-1.3.22, and even \nthe redhat7.3 RPM.  All lock up under stress from apachebench.\n\nWill let you know what our hardware guys determine.\n\n"}, {"count": 10, "tags": [], "creator": "pedietz@west.com", "attachment_id": null, "id": 37640, "time": "2003-05-22T21:12:00Z", "bug_id": 19985, "creation_time": "2003-05-22T21:12:00Z", "is_private": false, "text": "On my problem of children not restarting...\n\nwhen I set the MaxRequestsPerChild to 10000, the lockups go away.\n\nwhen I set the MaxRequestsPerChild to 100 it locks up occasionally after 10k to \n20k....\n\nwhen I set the MaxRequestsPerChild to 10, it locks up immediately.\n\n(doing an ab -n 50000 -c 10 http://iwww1:30080/webmon/static.html)\n\n\nAfter I kill the hung ab, apache is still stuck with 1 process:\nlinux59 /wic/webservices/apache80/conf -> ps -ef |grep apache80\nroot     10874     1  0 17:02 ?        00:00:00 /wic/webservices/apache80/linux-\napache-1.3.22 -d /wic/webservices/apache80 -f conf/iwww1-httpd-apache80.conf\nlinux59 /wic/webservices/apache80/conf -> \n\nCan you reenact this on your server ?\n"}, {"count": 11, "tags": [], "bug_id": 19985, "attachment_id": null, "id": 37677, "time": "2003-05-23T15:17:56Z", "creator": "pedietz@west.com", "creation_time": "2003-05-23T15:17:56Z", "is_private": false, "text": "When I change MaxRequestsPerChild to a low number (like 10), this problem \nhappens a lot easier.\n\nSo below is an strace sending hits to it via apache bench...\n\nOf note for this test, I set:\nMaxRequestsPerChild 10\nMinSpareServers 1\nMaxSpareServers 1\nStartServers 2\n\nselect(0, NULL, NULL, NULL, {0, 570000}) = 0 (Timeout)\ntime(NULL)                              = 1053702449\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702450\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702451\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702452\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702453\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702454\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702455\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702456\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702457\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702458\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702459\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702460\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702461\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702462\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702463\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702464\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702465\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702466\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = 0 (Timeout)\ntime(NULL)                              = 1053702467\nfork()                                  = 23105\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = 0 (Timeout)\ntime(NULL)                              = 1053702468\nfork()                                  = 23106\nfork()                                  = 23107\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = 0 (Timeout)\ntime(NULL)                              = 1053702469\nfork()                                  = 23108\nfork()                                  = 23109\nfork()                                  = 23110\nfork()                                  = 23111\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = 0 (Timeout)\ntime(NULL)                              = 1053702470\ntime(NULL)                              = 1053702470\nwrite(15, \"[Fri May 23 11:07:50 2003] [info\"..., 178) = 178\nfork()                                  = 23112\nfork()                                  = 23113\nfork()                                  = 23114\nfork()                                  = 23115\nfork()                                  = 23116\nfork()                                  = 23117\nfork()                                  = 23118\nfork()                                  = 23119\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = 0 (Timeout)\ntime(NULL)                              = 1053702471\ntime(NULL)                              = 1053702471\nwrite(15, \"[Fri May 23 11:07:51 2003] [info\"..., 180) = 180\nfork()                                  = 23120\nfork()                                  = 23121\nfork()                                  = 23122\nfork()                                  = 23123\nfork()                                  = 23124\nfork()                                  = 23125\nfork()                                  = 23126\nfork()                                  = 23127\nfork()                                  = 23128\nfork()                                  = 23129\nfork()                                  = 23130\nfork()                                  = 23131\nfork()                                  = 23132\nfork()                                  = 23133\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23134\nfork()                                  = 23135\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 970000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 970000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = 0 (Timeout)\ntime(NULL)                              = 1053702472\ntime(NULL)                              = 1053702472\nwrite(15, \"[Fri May 23 11:07:52 2003] [info\"..., 180) = 180\nfork()                                  = 23136\nfork()                                  = 23137\nfork()                                  = 23138\nfork()                                  = 23139\nfork()                                  = 23140\nfork()                                  = 23141\nfork()                                  = 23142\nfork()                                  = 23143\nfork()                                  = 23144\nfork()                                  = 23145\nfork()                                  = 23146\nfork()                                  = 23147\nfork()                                  = 23148\nfork()                                  = 23149\nfork()                                  = 23150\nfork()                                  = 23151\nfork()                                  = 23152\nfork()                                  = 23153\nfork()                                  = 23154\nfork()                                  = 23155\nfork()                                  = 23156\nfork()                                  = 23157\nfork()                                  = 23158\nfork()                                  = 23159\nfork()                                  = 23160\nfork()                                  = 23161\nfork()                                  = 23162\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23163\nfork()                                  = 23164\nfork()                                  = 23165\nfork()                                  = 23166\nfork()                                  = 23167\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 970000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 930000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 930000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 930000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 930000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = 0 (Timeout)\ntime(NULL)                              = 1053702473\ntime(NULL)                              = 1053702473\nwrite(15, \"[Fri May 23 11:07:53 2003] [info\"..., 180) = 180\nfork()                                  = 23168\nfork()                                  = 23169\nfork()                                  = 23170\nfork()                                  = 23171\nfork()                                  = 23172\nfork()                                  = 23173\nfork()                                  = 23174\nfork()                                  = 23175\nfork()                                  = 23176\nfork()                                  = 23177\nfork()                                  = 23178\nfork()                                  = 23179\nfork()                                  = 23180\nfork()                                  = 23181\nfork()                                  = 23182\nfork()                                  = 23183\nfork()                                  = 23184\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23185\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23186\nfork()                                  = 23187\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23188\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23189\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23190\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23191\nfork()                                  = 23192\nfork()                                  = 23193\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23194\nfork()                                  = 23195\nfork()                                  = 23196\nfork()                                  = 23197\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23198\nfork()                                  = 23199\n--- SIGCHLD (Child exited) ---\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 970000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = 0 (Timeout)\ntime(NULL)                              = 1053702474\ntime(NULL)                              = 1053702474\nwrite(15, \"[Fri May 23 11:07:54 2003] [info\"..., 180) = 180\nfork()                                  = 23200\nfork()                                  = 23201\nfork()                                  = 23202\nfork()                                  = 23203\nfork()                                  = 23204\nfork()                                  = 23205\nfork()                                  = 23206\nfork()                                  = 23207\nfork()                                  = 23208\nfork()                                  = 23209\nfork()                                  = 23210\nfork()                                  = 23211\nfork()                                  = 23212\nfork()                                  = 23213\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23214\nfork()                                  = 23215\nfork()                                  = 23216\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23217\nfork()                                  = 23218\nfork()                                  = 23219\nfork()                                  = 23220\nfork()                                  = 23221\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23222\nfork()                                  = 23223\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23224\nfork()                                  = 23225\nfork()                                  = 23226\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23227\nfork()                                  = 23228\nfork()                                  = 23229\nfork()                                  = 23230\nfork()                                  = 23231\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 970000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 970000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 910000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 910000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 900000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 900000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 900000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 900000}) = 0 (Timeout)\ntime(NULL)                              = 1053702475\ntime(NULL)                              = 1053702475\nwrite(15, \"[Fri May 23 11:07:55 2003] [info\"..., 181) = 181\nfork()                                  = 23234\nfork()                                  = 23235\nfork()                                  = 23236\nfork()                                  = 23237\nfork()                                  = 23238\nfork()                                  = 23239\nfork()                                  = 23240\nfork()                                  = 23241\nfork()                                  = 23242\nfork()                                  = 23243\nfork()                                  = 23244\nfork()                                  = 23245\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23246\nfork()                                  = 23247\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23248\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23249\nfork()                                  = 23250\nfork()                                  = 23251\nfork()                                  = 23252\nfork()                                  = 23253\nfork()                                  = 23254\nfork()                                  = 23255\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23256\nfork()                                  = 23257\nfork()                                  = 23258\nfork()                                  = 23259\nfork()                                  = 23260\nfork()                                  = 23261\nfork()                                  = 23262\nfork()                                  = 23263\nfork()                                  = 23264\nfork()                                  = 23265\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 930000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 910000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 910000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 900000}) = 0 (Timeout)\ntime(NULL)                              = 1053702476\ntime(NULL)                              = 1053702476\nwrite(15, \"[Fri May 23 11:07:56 2003] [info\"..., 181) = 181\nfork()                                  = 23266\nfork()                                  = 23267\nfork()                                  = 23268\nfork()                                  = 23269\nfork()                                  = 23270\nfork()                                  = 23271\nfork()                                  = 23272\nfork()                                  = 23273\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23274\nfork()                                  = 23275\nfork()                                  = 23276\nfork()                                  = 23277\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23278\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23279\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23280\nfork()                                  = 23281\nfork()                                  = 23282\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23283\nfork()                                  = 23284\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23285\nfork()                                  = 23286\nfork()                                  = 23287\nfork()                                  = 23288\nfork()                                  = 23289\nfork()                                  = 23290\nfork()                                  = 23291\nfork()                                  = 23292\nfork()                                  = 23293\nfork()                                  = 23294\nfork()                                  = 23295\nfork()                                  = 23296\nfork()                                  = 23297\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 970000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 930000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 930000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 930000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 930000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 920000}) = 0 (Timeout)\ntime(NULL)                              = 1053702477\ntime(NULL)                              = 1053702477\nwrite(15, \"[Fri May 23 11:07:57 2003] [info\"..., 181) = 181\nfork()                                  = 23299\nfork()                                  = 23300\nfork()                                  = 23301\nfork()                                  = 23302\nfork()                                  = 23303\nfork()                                  = 23304\nfork()                                  = 23305\nfork()                                  = 23306\nfork()                                  = 23307\nfork()                                  = 23308\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23309\nfork()                                  = 23310\nfork()                                  = 23311\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23312\nfork()                                  = 23313\nfork()                                  = 23314\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23315\nfork()                                  = 23316\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23317\nfork()                                  = 23318\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23319\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23320\nfork()                                  = 23321\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23322\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23323\nfork()                                  = 23324\nfork()                                  = 23325\nfork()                                  = 23326\nfork()                                  = 23327\nfork()                                  = 23328\nfork()                                  = 23329\nfork()                                  = 23330\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 940000}) = 0 (Timeout)\ntime(NULL)                              = 1053702478\ntime(NULL)                              = 1053702478\nwrite(15, \"[Fri May 23 11:07:58 2003] [info\"..., 181) = 181\nfork()                                  = 23331\nfork()                                  = 23332\nfork()                                  = 23333\nfork()                                  = 23334\nfork()                                  = 23335\nfork()                                  = 23336\nfork()                                  = 23337\nfork()                                  = 23338\nfork()                                  = 23339\nfork()                                  = 23340\nfork()                                  = 23341\nfork()                                  = 23342\nfork()                                  = 23343\nfork()                                  = 23344\nfork()                                  = 23345\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23346\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23347\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23348\nfork()                                  = 23349\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23350\nfork()                                  = 23351\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23352\nfork()                                  = 23353\nfork()                                  = 23354\nfork()                                  = 23355\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23356\nfork()                                  = 23357\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23358\n--- SIGCHLD (Child exited) ---\nfork()                                  = 23359\nfork()                                  = 23360\nfork()                                  = 23361\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = 0\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {1, 0})     = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 990000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 980000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 970000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 960000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = ? ERESTARTNOHAND (To be restarted)\n--- SIGCHLD (Child exited) ---\nselect(0, NULL, NULL, NULL, {0, 950000}) = 0 (Timeout)\ntime(NULL)                              = 1053702479\ntime(NULL)                              = 1053702479\nwrite(15, \"[Fri May 23 11:07:59 2003] [erro\"..., 110) = 110\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702480\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702481\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702482\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702483\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702484\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702485\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702486\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702487\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702488\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702489\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702490\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702491\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702492\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702493\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702494\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702495\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702496\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702497\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702498\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702499\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702500\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702501\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702502\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702503\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702504\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702505\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702506\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702507\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702508\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702509\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702510\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702511\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702512\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702513\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702514\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702515\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702516\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702517\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702518\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702519\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702520\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\nselect(0, NULL, NULL, NULL, {1, 0})     = 0 (Timeout)\ntime(NULL)                              = 1053702521\nwait4(-1, 0xbffffc3c, WNOHANG, NULL)    = -1 ECHILD (No child processes)\n\n\nThis select/time/wait4 loop continues forever...and only the parent process is \nalive.  No more children are forked...\n"}, {"count": 12, "tags": [], "bug_id": 19985, "attachment_id": null, "id": 37679, "time": "2003-05-23T15:39:39Z", "creator": "trawick@apache.org", "creation_time": "2003-05-23T15:39:39Z", "is_private": false, "text": "Note that all the while that the parent is getting SIGCHLD, it *NOT ONCE* gets a\npid reported by wait4() syscall.  On my box, a call to wait4() looks like this\nafter a child exits and the parent gets SIGCHLD:\n\nwait4(-1, [WIFEXITED(s) && WEXITSTATUS(s) == 0], WNOHANG, NULL) = 3899\n\n(for this example, 3899 is the pid of the child that exited)\n\nwait4() returns 0 when there is no status to reap.\n\nMy guess (not verified by reading the code) is that since the parent doens't see\nwho exited, it doesn't clear the scoreboard entry for that child.  Once the\nserver runs out of scoreboard entries for new children to use, it won't fork()\nanymore.\n\nSo why isn't the kernel reporting a pid to us when we call wait4()?\n\n(\"wait4\" is probably waitpid())\n"}, {"count": 13, "attachment_id": null, "creator": "pedietz@west.com", "is_private": false, "id": 37680, "time": "2003-05-23T15:46:57Z", "bug_id": 19985, "creation_time": "2003-05-23T15:46:57Z", "tags": [], "text": "Interesting...\n\nOn the box I built this binary on (and works on), it too shows correctly:\nwait4(-1, [WIFEXITED(s) && WEXITSTATUS(s) == 0], WNOHANG, NULL) = 10314\nwait4(-1, [WIFEXITED(s) && WEXITSTATUS(s) == 0], WNOHANG, NULL) = 10313\n\nI'll have our hardware guys compare things closer.\n"}, {"count": 14, "tags": [], "bug_id": 19985, "attachment_id": null, "is_private": false, "id": 37682, "time": "2003-05-23T17:32:35Z", "creator": "pedietz@west.com", "creation_time": "2003-05-23T17:32:35Z", "text": "Your signal strace has helped me find the problem.\n\nWe start apache via a special service running on the box.\nWe connect to this service via TCP and it forks a process.\nWe send it a message.\nThe process then forks another process runs the apache start script in it.\nWhen the apache demon exits, that child exits.  An OK message is sent back and \nthat socket-connection child exits as well.\n\nIt appears that the signal mask of our apache_startup service is being \ninherited by apache or affecting apache.  \n\nThe children of the service are exiting correctly (no zombies)...\n\nWe run this same service on AIX with no problems.\n"}, {"count": 15, "tags": [], "text": "I reset my signals to SIG_DFL before running the apache script, and the hanging \nproblem went away.\n\nNot sure if it's possible for apache to do anything about this.  It might try \nsetting all signals to SIG_DFL at startup time, before any other signal setup \nis done.\n\nThanks for your help Jeff !\n\n\n", "is_private": false, "bug_id": 19985, "id": 37685, "time": "2003-05-23T18:34:53Z", "creator": "pedietz@west.com", "creation_time": "2003-05-23T18:34:53Z", "attachment_id": null}]