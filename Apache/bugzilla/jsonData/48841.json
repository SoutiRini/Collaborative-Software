[{"count": 0, "tags": [], "bug_id": 48841, "is_private": false, "id": 135001, "attachment_id": null, "creator": "cameron.stokes@ihg.com", "creation_time": "2010-03-02T14:40:27Z", "time": "2010-03-02T14:40:27Z", "text": "mod_proxy only allows a BalancerMember's loadfactor to be set to a value between 1 and 100.  Ideally, loadfactor should be allowed to be set to 0 so that a BalancerMember can be removed from new traffic but allowed to keep servicing existing sessions (i.e. bleeding off sessions) or to be able to start a BalancerMember and test it before letting new traffic access it."}, {"count": 1, "tags": [], "bug_id": 48841, "is_private": false, "text": "Cameron;\n   I am attaching a patch to do this. This will add the functionality you describe to the balancer manager and to the initial configuration. Please apply the patch if you can and let me know how you get on.\n\nDevs;\n   I used a constant called PROXY_WORKER_NOLBFACTOR in mod_proxy.h and changed the atoi call during configuration to strtol since atoi. I did this because the atoi call returns 0 both during error situations and when the proper value to return is 0. Also, the existing checks had to be refactored a little since (at least on the SUN c compiler) an uninitialized integer is the same as `0'. Aside from that, only the bybusiness algorithm had to be modified to avoid a divide by zero error.\n\nI welcome your comments.", "id": 135888, "time": "2010-04-05T20:56:17Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-04-05T20:56:17Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 48841, "text": "Created attachment 25230\nAllows lbfactor to be set to zero in configuration and balancer manager\n\nMy test cases showed that all algorithms worked as expected. The obvious exception is if a sticky cookie is discovered that will kick the request to the worker, ignoring any algorithms.", "id": 135889, "time": "2010-04-05T20:57:56Z", "creator": "DRuggeri@primary.net", "creation_time": "2010-04-05T20:57:56Z", "is_private": false, "attachment_id": 25230}, {"count": 3, "tags": [], "bug_id": 48841, "text": "Patch notes and 'splaining:\nI used a constant called PROXY_WORKER_NOLBFACTOR in mod_proxy.h and changed the atoi call during configuration to strtol since the atoi call returns 0 both during error situations and when the proper value to return is 0. Also, the existing checks had to be refactored a little since (at least on the SUN c compiler) an  uninitialized integer is the same as `0'. Aside from that, only the bybusiness algorithm had to be modified to avoid a divide by zero error.", "id": 146640, "time": "2011-05-25T19:58:13Z", "creator": "DRuggeri@primary.net", "creation_time": "2011-05-25T19:58:13Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 48841, "is_private": false, "text": "How would this patch be applied? Has this patch been moved into versions like 2.2.17, .18, etc?", "id": 146824, "time": "2011-06-02T19:35:59Z", "creator": "ejackso3@gmail.com", "creation_time": "2011-06-02T19:35:59Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 48841, "is_private": false, "text": "The Drain setting has been added to trunk and will be in 2.4.0GA.", "id": 149258, "time": "2011-09-15T11:10:24Z", "creator": "jim@apache.org", "creation_time": "2011-09-15T11:10:24Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "kmashint@yahoo.com", "text": "*** Bug 51247 has been marked as a duplicate of this bug. ***", "count": 6, "id": 149522, "time": "2011-09-20T11:34:27Z", "bug_id": 48841, "creation_time": "2011-09-20T11:34:27Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 48841, "is_private": false, "text": "In my related enhancement I've attached a backport patch for the PROXY_WORKER_DRAIN status to the 2.2.21 code base.\n\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=51247", "id": 150056, "time": "2011-10-02T14:46:10Z", "creator": "kmashint@yahoo.com", "creation_time": "2011-10-02T14:46:10Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 48841, "is_private": false, "text": "Reopening to tag the correct bug as 'fixed'.", "id": 162520, "time": "2012-10-02T20:37:45Z", "creator": "wrowe@apache.org", "creation_time": "2012-10-02T20:37:45Z", "attachment_id": null}, {"count": 9, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "text": "Bug 51247 is the actual fix applied to trunk and 2.4, where a 'Drain' flag\nwas added to mod_proxy_balancer members.\n\n*** This bug has been marked as a duplicate of bug 52147 ***", "id": 162523, "time": "2012-10-02T20:39:42Z", "bug_id": 48841, "creation_time": "2012-10-02T20:39:42Z", "is_private": false}, {"count": 10, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "(In reply to comment #9)\n> Bug 51247 is the actual fix applied to trunk and 2.4, where a 'Drain' flag\n> was added to mod_proxy_balancer members.\n> \n> *** This bug has been marked as a duplicate of bug 52147 ***\n\n*** This bug has been marked as a duplicate of bug 51247 ***", "id": 162527, "time": "2012-10-02T22:41:27Z", "bug_id": 48841, "creation_time": "2012-10-02T22:41:27Z", "is_private": false}]