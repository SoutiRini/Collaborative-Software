[{"text": "Hi Devs,\n\nHope tomcat community can consider bundle-ify the jars so that they can be used in OSGi framework. Currently, we have to make the bundles by ourselves. There are two approaches to achieve this.\nOne is bundle-ify the \"spec\" and \"impl\" jars directly. \nThe other one is make a separate mvn project to do this job and bind the two jar together as a bundle. As shown in the patch.\n\nAny comments about this idea?\n\n-Rex", "tags": [], "creator": "rwonly@gmail.com", "attachment_id": null, "count": 0, "id": 140613, "time": "2010-10-09T03:16:25Z", "bug_id": 50064, "creation_time": "2010-10-09T03:16:25Z", "is_private": false}, {"count": 1, "tags": [], "creator": "rwonly@gmail.com", "attachment_id": 26145, "text": "Created attachment 26145\nA patch for approach #2", "id": 140614, "time": "2010-10-09T03:20:20Z", "bug_id": 50064, "creation_time": "2010-10-09T03:20:20Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 50064, "attachment_id": null, "id": 140777, "time": "2010-10-16T14:51:08Z", "creator": "jboynes@apache.org", "creation_time": "2010-10-16T14:51:08Z", "is_private": false, "text": "Should we add the meta-data to all jars anyway (option 1)? Could you provide a patch to the POMs to run the OSGi plugins?\n\nIf we produce a bundle of spec and impl, would it just expose the spec API and keep the impl internal? Would this work with a standalone JSP container where the JSTL library would be in the webapp rather than the container classpath?"}, {"text": "\n\n(In reply to comment #2)\n> Should we add the meta-data to all jars anyway (option 1)? Could you provide a\n> patch to the POMs to run the OSGi plugins?\n\nHi Jeremy,\nSure, the attachment are the 2 patches for option #1.\nOne for impl and spec;\nOne for parent.\n\n> \n> If we produce a bundle of spec and impl, would it just expose the spec API and\n> keep the impl internal? Would this work with a standalone JSP container where\n> the JSTL library would be in the webapp rather than the container classpath?\n\nI not sure I understand the situation. A OSGi bundle is a normal jar with some special metadatas in MANIFEST.MF, so I think the EXPORT header won't take any effect when the bundle is put in normal Java class path. It will just be considered as a normal jar.\n\n\nthanks\n-Rex", "tags": [], "creator": "rwonly@gmail.com", "is_private": false, "count": 3, "id": 141027, "time": "2010-10-26T02:02:05Z", "bug_id": 50064, "creation_time": "2010-10-26T02:02:05Z", "attachment_id": null}, {"count": 4, "attachment_id": 26211, "bug_id": 50064, "text": "Created attachment 26211\nthe patch for impl and spec", "id": 141028, "time": "2010-10-26T02:03:44Z", "creator": "rwonly@gmail.com", "creation_time": "2010-10-26T02:03:44Z", "tags": [], "is_private": false}, {"count": 5, "attachment_id": 26212, "bug_id": 50064, "is_private": false, "id": 141029, "time": "2010-10-26T02:04:30Z", "creator": "rwonly@gmail.com", "creation_time": "2010-10-26T02:04:30Z", "tags": [], "text": "Created attachment 26212\nthe patch for parent pom"}, {"count": 6, "tags": [], "text": "Hi Jeremy,\n\nIf you decide apply the patches. Could you please deploy the build artifacts to Apache snapshot site after that? Then we can run the TCK to test the jstl bundles in the Geronimo community.\n\nregards,\n\n-Rex", "attachment_id": null, "id": 141030, "creator": "rwonly@gmail.com", "time": "2010-10-26T02:08:12Z", "bug_id": 50064, "creation_time": "2010-10-26T02:08:12Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 50064, "attachment_id": null, "id": 141276, "time": "2010-10-31T14:26:45Z", "creator": "jboynes@apache.org", "creation_time": "2010-10-31T14:26:45Z", "is_private": false, "text": "Patches applied, thanks."}, {"count": 8, "tags": [], "creator": "jboynes@apache.org", "is_private": false, "text": "I'm seeing the following warning for the compat and jstlel modules:\n\n[WARNING] Warning building bundle org.apache.taglibs:taglibs-standard-compat:bundle:1.2-SNAPSHOT : Did not find matching referal for org.apache.x*\n\nDo we need to add something to their configuration?", "id": 141699, "time": "2010-11-13T12:12:24Z", "bug_id": 50064, "creation_time": "2010-11-13T12:12:24Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 50064, "text": "(In reply to comment #8)\n> I'm seeing the following warning for the compat and jstlel modules:\n> \n> [WARNING] Warning building bundle\n> org.apache.taglibs:taglibs-standard-compat:bundle:1.2-SNAPSHOT : Did not find\n> matching referal for org.apache.x*\n> \n> Do we need to add something to their configuration?\n\nI think that because the jstlel and compat don't need the dependency:\n    <dependency>\n      <groupId>xalan</groupId>\n      <artifactId>xalan</artifactId>\n      <version>2.7.1</version>\n      <scope>provided</scope>\n    </dependency>\n\nyou can remove it and also the\n    <Import-Package>org.apache.x*;resolution:=optional,*</Import-Package>\nin maven-bundle-plugin instructions.\n\n-Rex", "id": 141713, "time": "2010-11-14T22:21:51Z", "creator": "rwonly@gmail.com", "creation_time": "2010-11-14T22:21:51Z", "is_private": false, "attachment_id": null}, {"text": "hi \n\nshould we also remove the dependency in jstlel and compat?\n    <dependency>\n      <groupId>xalan</groupId>\n      <artifactId>xalan</artifactId>\n      <version>2.7.1</version>\n      <scope>provided</scope>\n    </dependency>\n\n\nI did not find any class import the packages from xalan in these two projects.\n\n-Rex", "tags": [], "creator": "rwonly@gmail.com", "is_private": false, "count": 10, "id": 142899, "time": "2010-12-21T21:43:05Z", "bug_id": 50064, "creation_time": "2010-12-21T21:43:05Z", "attachment_id": null}, {"count": 11, "tags": [], "text": "Resolving now #50462 has been fixed.", "is_private": false, "id": 143025, "creator": "jboynes@apache.org", "time": "2010-12-31T18:33:39Z", "bug_id": 50064, "creation_time": "2010-12-31T18:33:39Z", "attachment_id": null}]