[{"count": 0, "tags": [], "creator": "kobi.ginon@polycom.co.il", "attachment_id": null, "is_private": false, "id": 172382, "time": "2014-01-14T22:37:05Z", "bug_id": 56009, "creation_time": "2014-01-14T22:37:05Z", "text": ""}, {"count": 1, "tags": [], "bug_id": 56009, "text": "when using httpd with our implemented module.\nwe observer a constant leak while persistant connections are connected to the httpd.\nthis behaiviour with the same module code was not presented in httpd-2.2.16.\n\nWe have investigated the problem and can not find a patch for the issue or explanation.\n\nWhat we have observed so far is that there is a use of the apr-utils and brigades implmentation which over time will contain unused buckets \nin a rate of 4Mb per day for persistant connections to the httpd.\n\nvalgrind leads to the below flow which causes a leak overetime.\n1. Several patches did not help.\n2. comparing the apr and apr-utils of previous 2.2.16 apache (build in) and trying to match some suspected code did not help.\n3. we have printed the brigade allocations and deallocations\nand see every few minutes deallocations which skips buckets that where allocated.\n\nAny help would be appriciated.\n\n\n==31706== 16,384 bytes in 2 blocks are possibly lost in loss record 8,372 of 8,377\n==31706==    at 0x6DF4B83: malloc (vg_replace_malloc.c:195)\n==31706==    by 0x7037D60: allocator_alloc (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/libapr-1.so.0)\n==31706==    by 0x7037AE6: apr_allocator_alloc (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/libapr-1.so.0)\n==31706==    by 0x6FC9273: apr_bucket_alloc (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/libaprutil-1.so.0)\n==31706==    by 0x6FC8AFF: apr_brigade_writev (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/libaprutil-1.so.0)\n==31706==    by 0x80C8213: basic_http_header (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/httpd)\n==31706==    by 0x80C9930: ap_http_header_filter (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/httpd)\n==31706==    by 0x807A80E: ap_pass_brigade (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/httpd)\n==31706==    by 0x80800D1: ap_content_length_filter (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/httpd)\n==31706==    by 0x807A80E: ap_pass_brigade (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/httpd)\n==31706==    by 0x80CC4B7: ap_byterange_filter (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/httpd)\n==31706==    by 0x807A80E: ap_pass_brigade (in /misc/nethome/kobi/kobi_MCMS-V7.8_int/vob/MCMS/Main/Bin/httpd)", "id": 172383, "time": "2014-01-14T22:49:10Z", "creator": "kobi.ginon@polycom.co.il", "creation_time": "2014-01-14T22:49:10Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "is_private": false, "id": 190990, "time": "2016-05-16T14:59:07Z", "bug_id": 56009, "creation_time": "2016-05-16T14:59:07Z", "text": "Looks like NEEDINFO was never removed after the initial empty comment.  Resolving as WORKSFORSOME -- I'd suggest further discussion on modules-dev@ until there is a concrete bug to report."}]