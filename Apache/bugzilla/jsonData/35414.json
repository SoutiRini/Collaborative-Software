[{"count": 0, "tags": [], "text": "I have been trying to compile Apache and PHP on my XP laptop. I have been using\nthe instructions on http://httpd.apache.org/docs/cygwin.html.   I have freshly\nre-installed my cygwin on XP as of 2005-06-17 which should be the latest Cygwin\n(from Kernel.org).  My ld version is \"GNU ld version 2.16.91 20050608\".  I have\nverified that it understands ' --enable-auto-import ' from the help section. \n\nThe configure command I used is:  \n\nLDFLAGS_SHLIB=\"--enable-auto-import\" ./configure --enable-shared=max \\    \n  --enable-module=most --with-layout=Cygwin\n\n\n\nWhen I attempt to compile apache the make process throws the errors:\n\n<=== src/modules\ngcc -c  -I./os/cygwin -I./include   -DCYGWIN -DUSE_HSREGEX  -DSHARED_CORE `./apa\nci` modules.c\ngcc -c  -I./os/cygwin -I./include   -DCYGWIN -DUSE_HSREGEX  -DSHARED_CORE `./apa\nci` buildmark.c\ndllwrap --enable-auto-import -o libhttpd.dll buildmark.o modules.o modules/stand\nard/libstandard.a main/libmain.a ./os/cygwin/libos.a ap/libap.a regex/libregex.a\n   -lcrypt -lgdbm\ndllwrap: no export definition file provided.\nCreating one, but that may not be what you want\nInfo: resolving _optarg by linking to __imp__optarg (auto-import)\nInfo: resolving _optarg by linking to __imp__optarg (auto-import)\nInfo: resolving _optarg by linking to __imp__optarg (auto-import)\ngcc  -I./os/cygwin -I./include   -DCYGWIN -DUSE_HSREGEX  -DSHARED_CORE `./apaci`\n    \\\n      -o libhttpd.ep -DSHARED_CORE_TIESTATIC main/http_main.c \\\n          -L. -lhttpd  -lcrypt -lgdbm -lexpat\ngcc  -I./os/cygwin -I./include   -DCYGWIN -DUSE_HSREGEX  -DSHARED_CORE `./apaci`\n    \\\n      -o httpd -DSHARED_CORE_BOOTSTRAP main/http_main.c \\\n      ap/libap.a  -lcrypt -lgdbm -lexpat libhttpd.dll\n\n\nand\n\ngcc  -DCYGWIN -DUSE_HSREGEX  -DSHARED_CORE `../apaci` -o logresolve   -L../os/cy\ngwin -L../ap logresolve.o -lm -lap -los  -lcrypt -lgdbm -lexpat\ngcc -c  -I../os/cygwin -I../include   -DCYGWIN -DUSE_HSREGEX  -DSHARED_CORE `../\napaci` ab.c\ngcc  -DCYGWIN -DUSE_HSREGEX  -DSHARED_CORE `../apaci` -o ab   -L../os/cygwin -L.\n./ap ab.o -lm -lap -los  -lcrypt -lgdbm -lexpat\nInfo: resolving _optind by linking to __imp__optind (auto-import)\nInfo: resolving _optarg by linking to __imp__optarg (auto-import)\nsed <apxs.pl >apxs \\\n    -e 's%@TARGET@%httpd%g' \\\n    -e 's%@CC@%gcc%g' \\\n    -e 's%@CFLAGS@% -DCYGWIN -DUSE_HSREGEX  -DSHARED_CORE `../apaci`%g' \\\n    -e 's%@CFLAGS_SHLIB@%-DSHARED_MODULE%g' \\\n    -e 's%@LD_SHLIB@%dllwrap%g' \\\n    -e 's%@LDFLAGS_MOD_SHLIB@%--export-all%g' \\\n    -e 's%@LIBS_SHLIB@%%g' && chmod a+x apxs\ngcc -c  -I../os/cygwin -I../include   -DCYGWIN -DUSE_HSREGEX  -DSHARED_CORE `../\napaci` checkgid.c\n\n\nSubsequent executions of make give these errors:\n\n===> src/modules/standard\ngcc --shared -o mod_env.dll mod_env.lo ../../libhttpd.dll -lcrypt -lgdbm -lexpat\n\nmod_env.lo:mod_env.c:(.text+0x2e0): undefined reference to `_ap_pstrcat'\ncollect2: ld returned 1 exit status\nmake[4]: *** [mod_env.dll] Error 1\nmake[3]: *** [all] Error 1\nmake[2]: *** [subdirs] Error 1\nmake[2]: Leaving directory `/home/foo/working/phpstuff/apache_1.3.33/s\nrc'\nmake[1]: *** [build-std] Error 2\nmake[1]: Leaving directory `/home/foo/working/phpstuff/apache_1.3.33'\nmake: *** [build] Error 2\n\n\nUsing google to search for this problem only gave me some answers from 2002 and\n2004 about ld and auto import.  No recent information is avalable (or at least\nindexed).  \n\n\n\nI would appreciate any help in this matter.  Thanks!", "is_private": false, "bug_id": 35414, "id": 76530, "time": "2005-06-19T17:15:37Z", "creator": "oxenreid@state.net", "creation_time": "2005-06-19T17:15:37Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "wrowe@apache.org", "is_private": false, "id": 93810, "time": "2006-09-19T19:45:17Z", "bug_id": 35414, "creation_time": "2006-09-19T19:45:17Z", "tags": [], "text": "Sorry, issues.apache.org is not a support forum, it's a bug tracking system\nto pin down the solutions to Apache bugs.\n\nIf you drop LDFLAGS_SHLIB=\"--enable-auto-import\" what is the result?\n\nBecause you've deliberately avoided hard-linkage of the binaries, interesting\nside effects will occur that you don't pick up early enough to troubleshoot."}]