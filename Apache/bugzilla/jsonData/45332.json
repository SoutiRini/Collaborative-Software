[{"count": 0, "tags": [], "bug_id": 45332, "is_private": false, "text": "Created attachment 22211\nOriginal tomcat-users.xml created by the installer\n\n## Symptom:\nAfter installing Tomcat the service does not start. The following errors are logged in catalina.x.log:\n\ncatalina.2008-07-02.log:\n----------------------------------\nINFO: Initializing Coyote HTTP/1.1 on http-8080\n02.07.2008 12:45:10 org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 595 ms\n02.07.2008 12:45:10 org.apache.naming.NamingContext lookup\nWARNUNG: Unexpected exception resolving reference\ncom.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 4-byte UTF-8 sequence.\n\tat com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.invalidByte(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.read(Unknown Source)\n\n[...]\n\n02.07.2008 12:45:10 org.apache.catalina.mbeans.GlobalResourcesLifecycleListener createMBeans\nSCHWERWIEGEND: Exception processing Global JNDI Resources\njavax.naming.NamingException: Invalid byte 2 of 4-byte UTF-8 sequence.\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:805)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:140)\n\tat org.apache.naming.NamingContextBindingsEnumeration.nextElementInternal(NamingContextBindingsEnumeration.java:113)\n\n[...]\n\n02.07.2008 12:45:10 org.apache.catalina.core.StandardService start\nINFO: Starting service Catalina\n02.07.2008 12:45:10 org.apache.catalina.core.StandardEngine start\nINFO: Starting Servlet Engine: Apache Tomcat/6.0.16\n02.07.2008 12:45:10 org.apache.naming.NamingContext lookup\nWARNUNG: Unexpected exception resolving reference\ncom.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 4-byte UTF-8 sequence.\n\tat com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.invalidByte(Unknown Source)\n\tat com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.read(Unknown Source)\n\n[...]\n\n02.07.2008 12:45:10 org.apache.catalina.realm.UserDatabaseRealm start\nSCHWERWIEGEND: Exception looking up UserDatabase under key UserDatabase\njavax.naming.NamingException: Invalid byte 2 of 4-byte UTF-8 sequence.\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:805)\n\tat org.apache.naming.NamingContext.lookup(NamingContext.java:153)\n\n...\n\n----------------------------------\n\n\n## Cause:\n\nThe admin password created by the installer is encoded in 8-bit ANSI, probably using Windows codepage, but the file \"tomcat-users.xml\" is declared as encoded in UTF-8.\n\ntomcat-users.xml:\n----------------------------------\n<?xml version='1.0' encoding='utf-8'?>\n<!--\n  Licensed to the Apache Software Foundation (ASF) under one or more\n  contributor license agreements.  See the NOTICE file distributed with\n  this work for additional information regarding copyright ownership.\n  The ASF licenses this file to You under the Apache License, Version 2.0\n\n[...]\n\n<tomcat-users>\n<user name=\"admin\" password=\"t\u00f6st\" roles=\"admin,manager\" /><!--\n  <role rolename=\"tomcat\"/>\n  <role rolename=\"role1\"/>\n  <user username=\"tomcat\" password=\"tomcat\" roles=\"tomcat\"/>\n  <user username=\"both\" password=\"tomcat\" roles=\"tomcat,role1\"/>\n  <user username=\"role1\" password=\"tomcat\" roles=\"role1\"/>\n-->\n</tomcat-users>\n----------------------------------\n\nThe German Umlaut \"\u00f6\" in this example is a single byte value of F6.\nIf the illegal byte is replaced by an ACSII character such as \"o\", the service will start.", "id": 118231, "time": "2008-07-03T03:02:50Z", "creator": "bugzilla@mail3.buerschgens.de", "creation_time": "2008-07-03T03:02:50Z", "attachment_id": 22211}, {"count": 1, "tags": [], "text": "This has been fixed in trunk and proposed for 6.0.x", "is_private": false, "id": 118319, "creator": "markt@apache.org", "time": "2008-07-06T12:33:19Z", "bug_id": 45332, "creation_time": "2008-07-06T12:33:19Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "This has been fixed in 6.0.x and will be included in 6.0.18 onwards.", "attachment_id": null, "id": 118601, "creator": "markt@apache.org", "time": "2008-07-13T11:04:07Z", "bug_id": 45332, "creation_time": "2008-07-13T11:04:07Z", "is_private": false}, {"count": 3, "tags": [], "text": "The fix was backported to 5.5.x in r1066549 and will be in 5.5.33.", "is_private": false, "id": 143922, "creator": "knst.kolinko@gmail.com", "time": "2011-02-02T12:59:11Z", "bug_id": 45332, "creation_time": "2011-02-02T12:59:11Z", "attachment_id": null}]