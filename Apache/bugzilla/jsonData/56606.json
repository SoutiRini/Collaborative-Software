[{"count": 0, "tags": [], "bug_id": 56606, "attachment_id": null, "is_private": false, "id": 175736, "time": "2014-06-09T09:38:52Z", "creator": "smartini@apache.org", "creation_time": "2014-06-09T09:38:52Z", "text": "Hi all, using the Tomcat Installer (for example apache-tomcat-7.0.42.exe) I see that when the admin user is created (in tomcat-users.xml), the tag inside the xml has the (old?) attribute name instead of username (as seen in other parts in the same file).\n\nI see this in all three source files from tomcat6, 7 and 8, for example here: http://svn.apache.org/repos/asf/tomcat/tc7.0.x/trunk/res/tomcat.nsi\n\nthis is the line related:\nStrCpy $R5 '<user name=\"$R1\" password=\"$R2\" roles=\"$R3\" />$\\r$\\n'\n\nso I think the fix should be trivial (change name with username).\nNote that even in the published doc in the web site there are some references to <user name=  ...\n\n\nLast (using the same installation procedure, using the exe), if I don't set a password for the admin, the line in the tomcat-users.xml won't be generated\n\nThanks for now,\nSandro"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "Fixed in 8.0.x for 8.0.9 and 7.0.x for 7.0.55.\n\nProposed for 6.0.x", "id": 175757, "time": "2014-06-10T11:20:43Z", "bug_id": 56606, "creation_time": "2014-06-10T11:20:43Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 56606, "is_private": false, "id": 175766, "attachment_id": null, "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-11T10:35:33Z", "time": "2014-06-11T10:35:33Z", "text": "For a record:\nThere are several components that read tomcat-users.xml.\n\norg.apache.catalina.users.MemoryUserDatabase\n(-> .open() -> o.a.c.users.MemoryUserCreationFactory)\nprefers \"username\".\n\norg.apache.catalina.realm.MemoryRealm\n(-> .startInternal() -> o.a.c.realm.MemoryRuleSet)\norg.apache.catalina.realm.JAASMemoryLoginModule\n(-> .load() -> o.a.c.realm.MemoryRuleSet)\nprefer \"name\".\n\nI agree that \"username\" is the preferred name, as MemoryUserDatabase.save() (-> MemoryUser.toXml()) uses it when saving the file. The other implementations are not able to write the file.\n\n(In reply to Sandro Martini from comment #0)\n> \n> Last (using the same installation procedure, using the exe), if I don't set\n> a password for the admin, the line in the tomcat-users.xml won't be generated\n>\n\nEnabling an administrative user shall be a conscious decision. It is also recommended to configure a RemoteAddrValve on the manager application.\nThere exists malware that targets installations that have users named \"manager\" with absent (or weak) passwords.\n\n1. Search for CVE-2009-3548\n2.\nhttp://tomcat.apache.org/tomcat-8.0-doc/security-howto.html#Securing_Management_Applications"}, {"count": 3, "tags": [], "bug_id": 56606, "is_private": false, "id": 175770, "attachment_id": null, "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-11T13:37:41Z", "time": "2014-06-11T13:37:41Z", "text": "(In reply to Konstantin Kolinko from comment #2)\n> \n> I agree that \"username\" is the preferred name, as MemoryUserDatabase.save()\n> (-> MemoryUser.toXml()) uses it when saving the file. The other\n> implementations are not able to write the file.\n> \n\nI updated MemoryRuleSet (used by MemoryRealm, JAASMemoryLoginModule) to prefer the \"username\" attribute and updated MemoryRealm documentation. It will be in 8.0.9, 7.0.55. (r1601886 r1601887)\nOnly documentation changes were backported to 6.0 (r1601892)."}, {"count": 4, "tags": [], "bug_id": 56606, "attachment_id": null, "is_private": false, "id": 178200, "time": "2014-09-30T13:10:34Z", "creator": "markt@apache.org", "creation_time": "2014-09-30T13:10:34Z", "text": "This has been fixed in 6.0.x for 6.0.42 onwards."}]