[{"count": 0, "tags": [], "bug_id": 16890, "text": "For your consideration, a patch that would add support for nested <fileset>\ninside of <available> conditions, where the property is set to true if the\n<fileset> includes any files. \n\nFor example (my actual desired usage):\n\n  <available property=\"cactus.test.cases\">\n    <fileset dir=\"${test.src.dir}\">\n      <include name=\"**/cactus/**\"/>\n    </fileset>\n  </available>\n\nWe have a common build target that runs tests for several modules.  Some modules\nhave cactus test cases, others don't.  (Cactus test cases are stored in separate\nfolder heirarchy).  With this patch, I can easily condition the running of\ncactus targets on the fly based on whether any files are included in a\nparticular module.\n\nThe alternative that I currently use is copy the files described by the fileset\nthrough a merge mapper and then check for the resultant file.  This works fine,\nbut its slow on the modules that have lots of cactus tests:\n\n    <copy todir=\"${build.test.classes}\">\n      <fileset dir=\"${test.src.dir}\">\n        <include name=\"**/cactus/**/*.java\"/>\n      </fileset>\n      <mapper type=\"merge\" to=\"cactus.fileset\"/>\n    </copy>\n    <available property=\"cactus.testcases\"\nfile=\"${build.test.classes}/cactus.fileset\"/>\n\nI'm open to other alternatives as well.", "id": 30918, "time": "2003-02-07T21:04:45Z", "creator": "paul@priorartisans.com", "creation_time": "2003-02-07T21:04:45Z", "is_private": false, "attachment_id": null}, {"attachment_id": 4777, "tags": [], "creator": "paul@priorartisans.com", "text": "Created attachment 4777\nPatch to Available.java and available.html", "count": 1, "id": 30919, "time": "2003-02-07T21:05:12Z", "bug_id": 16890, "creation_time": "2003-02-07T21:05:12Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 16890, "is_private": false, "text": "In Ant 1.7 you will be able to use the resourcecount task/condition to verify\nwhether a fileset or other resource collection has any constituents.\n\nThanks", "id": 75387, "time": "2005-05-25T23:16:55Z", "creator": "mbenson@apache.org", "creation_time": "2005-05-25T23:16:55Z", "attachment_id": null}]