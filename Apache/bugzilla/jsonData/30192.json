[{"count": 0, "tags": [], "creator": "dwilson@relevant.com", "is_private": false, "text": "I am having trouble with FORM based login using JDBC Realm. I have posted my\nquestion twice on the Tomcat users list and even sent an email to the tomcat\nwebmaster with no responses from either methods.\n\nSo this is the problem...\nWhen I go to a restricted resource the user will get a blank page. Tomcat\nconsole gives this error:\n\nINFO: Server startup in 11000 ms\nJul 19, 2004 4:39:47 PM org.apache.catalina.authenticator.FormAuthenticator auth\nenticate\nWARNING: Unexpected error forwarding to login page\njava.lang.NullPointerException\n        at org.apache.catalina.authenticator.FormAuthenticator.authenticate(Form\nAuthenticator.java:214)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica\ntorBase.java:504)\n        at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValv\neContext.java:102)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:520)\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j\nava:137)\n        at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValv\neContext.java:104)\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j\nava:117)\n        at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValv\neContext.java:102)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:520)\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal\nve.java:109)\n        at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValv\neContext.java:104)\n        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.jav\na:520)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\n\n        at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:16\n0)\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java\n:793)\n        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.proce\nssConnection(Http11Protocol.java:702)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java\n:571)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadP\nool.java:644)\n        at java.lang.Thread.run(Thread.java:534)\n\n\nHowever, after that error if the user manually goes to the login page,\nhttp://localhost:8080/E3/login.faces, then they will get the login page and\nafter logging in they will get redirected to the original page that they tried\nto goto.\n\nPlease see the attached config files..\n\nThank you,\n-David", "id": 60827, "time": "2004-07-19T20:53:20Z", "bug_id": 30192, "creation_time": "2004-07-19T20:53:20Z", "attachment_id": null}, {"count": 1, "text": "Created attachment 12167\nApplication web.xml", "creator": "dwilson@relevant.com", "attachment_id": 12167, "id": 60828, "time": "2004-07-19T20:54:51Z", "bug_id": 30192, "creation_time": "2004-07-19T20:54:51Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 30192, "is_private": false, "text": "Created attachment 12168\nTomcat server.xml file. Search for Realm", "id": 60829, "time": "2004-07-19T20:55:36Z", "creator": "dwilson@relevant.com", "creation_time": "2004-07-19T20:55:36Z", "attachment_id": 12168}, {"attachment_id": null, "tags": [], "bug_id": 30192, "text": "The user table is called usr and the roles table is tcroles.\nThe user table uses a composite primary key (usr_idd + usr_cmpny). I thought\nthat this could be an issue so I created a test table (usr1) and set it like the\nexample on the document page for JDBC realms. However, this still gave me the\nsame error.\n\nThe JDBC driver was placed in common/lib and then later moved to server/lib to\ntry troubleshooting there too. The jdbc driver is jtds-0.8-rc1.jar and the\ndriver is good as I am able to retrieve and write data to my database later in\nthe application.", "count": 3, "id": 60830, "time": "2004-07-19T21:06:55Z", "creator": "dwilson@relevant.com", "creation_time": "2004-07-19T21:06:55Z", "is_private": false}, {"count": 4, "tags": [], "creator": "dwilson@relevant.com", "attachment_id": 12169, "id": 60831, "time": "2004-07-19T21:07:39Z", "bug_id": 30192, "creation_time": "2004-07-19T21:07:39Z", "is_private": false, "text": "Created attachment 12169\nSample user table"}, {"count": 5, "tags": [], "creator": "dwilson@relevant.com", "text": "Created attachment 12170\nTomcat roles table", "id": 60832, "time": "2004-07-19T21:07:57Z", "bug_id": 30192, "creation_time": "2004-07-19T21:07:57Z", "is_private": false, "attachment_id": 12170}, {"count": 6, "tags": [], "bug_id": 30192, "is_private": false, "text": "The request dispatcher to your login page is null. It would have taken 5 minutes\nfor you to figure it out by looking at the code. I recommend you investigate more.", "id": 60833, "time": "2004-07-19T21:09:09Z", "creator": "remm@apache.org", "creation_time": "2004-07-19T21:09:09Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "dwilson@relevant.com", "is_private": false, "text": "Problem found: <form-login-config> was missing from the login-config\n\nShould Tomcat have caught this?\n\nRemy, I'm not trying to get cross with you but your comment came across as\ninsulting.\nI am new to J2EE development and no I did not download the Tomcat source code.\nInstead I investigated as much as I could find (google searchs, mailing list\narchive, posting on mailing list, etc.) before I posted a possible bug here.\n\nThank you,\n-D\n", "id": 60894, "time": "2004-07-20T21:52:34Z", "bug_id": 30192, "creation_time": "2004-07-20T21:52:34Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "remm@apache.org", "text": "Filing an issue should be a last resort move (otherwise, it's wasted time for\neveryone, so I'm never happy about it). I expect you would have quickly looked\nin the source, this is an obvious move to me when I get a NPE (and generally any\nexception which doesn't seem wrapped).\n\nDid you enable XML validation for your test ? By default, validation is\ndisabled, so there can be mandatory elements missing.", "id": 60895, "time": "2004-07-20T22:02:55Z", "bug_id": 30192, "creation_time": "2004-07-20T22:02:55Z", "is_private": false, "attachment_id": null}]