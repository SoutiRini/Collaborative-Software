[{"count": 0, "text": "The BackendListener stock all datas in a DescriptiveStatistics metrics (okResponsesStats, koResponsesStats, allResponsesStats ). \nWith the TIME box mode (i.e backend_metrics_window_mode=timed ), these datas are reset on each interval of time ( default 5 sec for influxdb )\nBut when the load is heavy, we could stock a lot of datas during this interval of time which can lead to a OutOfMemoryError.\n\nExample : \n2017/02/13 19:36:11 ERROR - jmeter.JMeter: Uncaught exception:  java.lang.OutOfMemoryError: Java heap space\n\tat org.apache.commons.math3.util.ResizableDoubleArray.expand(ResizableDoubleArray.java:697)\n\tat org.apache.commons.math3.util.ResizableDoubleArray.addElement(ResizableDoubleArray.java:442)\n\tat org.apache.commons.math3.stat.descriptive.DescriptiveStatistics.addValue(DescriptiveStatistics.java:171)\n\tat org.apache.jmeter.visualizers.backend.SamplerMetric.add(SamplerMetric.java:99)\n\tat org.apache.jmeter.visualizers.backend.influxdb.InfluxdbBackendListenerClient.handleSampleResults(InfluxdbBackendListenerClient.java:258)\n\tat org.apache.jmeter.visualizers.backend.BackendListener.sendToListener(BackendListener.java:270)\n\tat org.apache.jmeter.visualizers.backend.BackendListener$Worker.run(BackendListener.java:242)\n\n2017/02/14 01:05:20 ERROR - jmeter.visualizers.backend.influxdb.HttpMetricsSender: failed to send data to influxDB server : null \n\nTo counter this, even in time box mode, we have to put a default sliding size.", "bug_id": 60731, "attachment_id": null, "id": 196987, "time": "2017-02-14T10:44:44Z", "creator": "mchassagneux@apache.org", "creation_time": "2017-02-14T10:44:44Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 60731, "attachment_id": null, "text": "Should we probably migrate to https://github.com/HdrHistogram/HdrHistogram ?", "id": 196994, "time": "2017-02-14T11:35:46Z", "creator": "sitnikov.vladimir@gmail.com", "creation_time": "2017-02-14T11:35:46Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 60731, "attachment_id": null, "id": 197010, "time": "2017-02-14T20:11:25Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-14T20:11:25Z", "is_private": false, "text": "Author: pmouawad\nDate: Tue Feb 14 20:11:09 2017\nNew Revision: 1783019\n\nURL: http://svn.apache.org/viewvc?rev=1783019&view=rev\nLog:\nBug 60731 - OOM on BackendListener with TIME box mode\nBugzilla Id: 60731\n\nModified:\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/SamplerMetric.java"}, {"count": 3, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "(In reply to Vladimir Sitnikov from comment #1)\n> Should we probably migrate to https://github.com/HdrHistogram/HdrHistogram ?\n\n+1 but not sure it can fit before 3.2", "id": 197011, "time": "2017-02-14T20:13:17Z", "bug_id": 60731, "creation_time": "2017-02-14T20:13:17Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 60731, "attachment_id": null, "text": "(In reply to Philippe Mouawad from comment #2)\n> Author: pmouawad\n> Date: Tue Feb 14 20:11:09 2017\n> New Revision: 1783019\n> \n> URL: http://svn.apache.org/viewvc?rev=1783019&view=rev\n> Log:\n> Bug 60731 - OOM on BackendListener with TIME box mode\n> Bugzilla Id: 60731\n> \n> Modified:\n>    \n> jmeter/trunk/src/components/org/apache/jmeter/visualizers/backend/\n> SamplerMetric.java\n\nAuthor: pmouawad\nDate: Tue Feb 14 20:48:52 2017\nNew Revision: 1783027\n\nURL: http://svn.apache.org/viewvc?rev=1783027&view=rev\nLog:\nBug 60731 - OOM on BackendListener with TIME box mode\nBugzilla Id: 60731\n\nModified:\n    jmeter/trunk/bin/jmeter.properties\n    jmeter/trunk/xdocs/usermanual/properties_reference.xml", "id": 197025, "time": "2017-02-15T07:28:02Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-15T07:28:02Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 60731, "attachment_id": null, "text": "Hi Maxime,\nCould you test last nightly build ?\nThanks", "id": 197026, "time": "2017-02-15T07:28:22Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-15T07:28:22Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 60731, "attachment_id": null, "id": 197069, "time": "2017-02-16T14:17:46Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2017-02-16T14:17:46Z", "is_private": false, "text": "Hi Maxime,\nDid you have a chance to test if issue is fixed ?\n\nThanks"}, {"count": 7, "tags": [], "bug_id": 60731, "attachment_id": null, "text": "Hi, \n\nThe run is still ongoing (for 6H) and no issue so far ! so yes for me it's OK.", "id": 197070, "time": "2017-02-16T14:28:59Z", "creator": "mchassagneux@apache.org", "creation_time": "2017-02-16T14:28:59Z", "is_private": false}]