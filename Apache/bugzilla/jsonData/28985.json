[{"count": 0, "tags": [], "bug_id": 28985, "text": "We would like to be  able to do the following:\n\n1) Create a filter and package it in a jar file\n2) Use it in all applications by declaring it in $CATALINA_BASE/conf/web.xml\n3) Do this on a per-user basis in the multiuser scenario, by putting the jar\nfile under CATALINA_BASE.\n\nPutting the jar file in $CATALINA_HOME/common/lib does not work for us, as that\nwill apply to all users.\n\nPutting the jar file under $CATALINA_BASE/shared/lib does not work either,\nbecause in that case, the applications in $CATALINA_HOME/server/webapps (admin\nand manager) are not able to read the filter class and throw a\nClassNotFoundException.\n\nShouldn't it be possible to do this? How?\n\nWould it help if the Common classloader also loaded classes from\n$CATALINA_BASE/common/lib ? Any ideas on this would be appreciated. Thanks.", "id": 57419, "time": "2004-05-14T15:55:22Z", "creator": "petr.jiricka@netbeans.com", "creation_time": "2004-05-14T15:55:22Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "Well, for complex security, there's the security manager. I don't see how the\nclassloader visibility could allow a lot of things.", "id": 57448, "attachment_id": null, "bug_id": 28985, "creation_time": "2004-05-14T21:23:54Z", "time": "2004-05-14T21:23:54Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "petr.jiricka@netbeans.com", "is_private": false, "count": 2, "id": 57560, "time": "2004-05-17T17:41:48Z", "bug_id": 28985, "creation_time": "2004-05-17T17:41:48Z", "text": "Remy, sorry, I am afraid I don't understand your comment. Are you saying that:\n\n- this request is not worth doing, or\n- there are technical problems which mean that this is not possible to do, or\n- the request is unreasonable ?\n\nThanks."}, {"count": 3, "tags": [], "creator": "remm@apache.org", "text": "It's the second option: either a classloader can load a class or it cannot. So\nby definition, if you put the class in one of the \"shared\" loaders, it will be\nvisible from all webapps.\nAs for configuring the CL, you can configure the CL repositories using\ncatalina.properties (a feature I added in 5.0.x, but isn't documented; feel free\nto ask questions about that to Jean-Fran\u00e7ois, he knows it well). By default, I\nthink it would be bad to add additional repositories to the CL (more complexity).\n\nNote: By default:\n- common is based on catalina.home\n- shared is based on catalina.base", "id": 58402, "attachment_id": null, "bug_id": 28985, "creation_time": "2004-05-30T12:07:13Z", "time": "2004-05-30T12:07:13Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 28985, "is_private": false, "text": "Agreed, I think tweaking catalina.properties will work for us, especially after\nthe fix to org.apache.catalina.startup.CatalinaProperties (rev.1.6) that\nJean-Francois put in on 05/18.\n\n", "id": 58426, "time": "2004-05-31T11:03:37Z", "creator": "petr.jiricka@netbeans.com", "creation_time": "2004-05-31T11:03:37Z", "attachment_id": null}]