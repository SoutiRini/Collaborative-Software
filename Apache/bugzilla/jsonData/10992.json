[{"count": 0, "tags": [], "bug_id": 10992, "attachment_id": null, "text": "Every time that i start httpd (2.0.35 or 2.0.39) with parameter ChildPerUserID\nthat is not last directive in config file - httpd crashes. Looking core in gdb i\nsee that apr_palloc() at util.c:736 return 0xFFFFFFFF and this is the reason of\nBus error signal.\n\nIf this directive is last in the config file - httpd starts normally, but starts\non one process less than it is specified in ChildPerUserID directive.\n\nWhen i try to submit this patch httpd starts OK:\n\n*** perchild.c.orig     Thu Jun 13 19:36:19 2002\n--- perchild.c  Fri Jul 19 20:49:08 2002\n***************\n*** 1828,1834 ****\n      int max_this_time = atoi(num) + curr_child_num;\n  \n      for (i = curr_child_num; i < max_this_time; i++, curr_child_num++) {\n!         child_info_t *ug = &child_info_table[i - 1];\n  \n          if (i > num_daemons) {\n              return \"Trying to use more child ID's than NumServers.  Increase \"\n--- 1828,1834 ----\n      int max_this_time = atoi(num) + curr_child_num;\n  \n      for (i = curr_child_num; i < max_this_time; i++, curr_child_num++) {\n!         child_info_t *ug = &child_info_table[i];\n  \n          if (i > num_daemons) {\n              return \"Trying to use more child ID's than NumServers.  Increase \"\n\nApache was configured by this script:\n#!/bin/sh\n\n./configure \\                                                                  \n                    \n\"--prefix=/usr/local/apache2\" \\                                                \n                    \n\"--enable-threads\" \\                                                           \n                    \n\"--with-mpm=perchild\" \\                                                        \n                    \n\"--enable-mods-shared=all\" \\                                                   \n                    \n\"--enable-so=static\" \\                                                         \n                    \n\"--enable-charset-lite=static\" \\                                               \n                    \n\"--enable-access=static\" \\                                                     \n                    \n\"--enable-auth=static\" \\                                                       \n                    \n\"--enable-include=static\" \\                                                    \n                    \n\"--enable-cgid=static\" \\                                                       \n                    \n\"--enable-dir=static\" \\                                                        \n                    \n\"--enable-alias=static\" \\                                                      \n                    \n\"--enable-maintainer-mode\" \\                                                   \n                    \n\"--enable-suexec=static\" \\                                                     \n                    \n\"--with-suexec-caller=nobody\" \\                                                \n                    \n\"--with-suexec-docroot=/www\" \\                                                 \n                    \n\"--with-suexec-logfile=/usr/local/apache2/logs/cgi.log\"", "id": 19867, "time": "2002-07-19T18:11:48Z", "creator": "mav@mavhome.dp.ua", "creation_time": "2002-07-19T18:11:48Z", "is_private": false}, {"count": 1, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "id": 21311, "time": "2002-08-19T18:29:23Z", "bug_id": 10992, "creation_time": "2002-08-19T18:29:23Z", "is_private": false, "text": "This module is still in heavy development.  It has recently been updated so\nthat it MAY work now, but it is certainly not production ready.\n\nIf you want to experiment, please try again with the most recent code from CVS.\n(2.0.40 does NOT have the updated code.)"}]