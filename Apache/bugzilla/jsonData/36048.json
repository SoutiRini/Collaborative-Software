[{"count": 0, "tags": [], "bug_id": 36048, "is_private": false, "text": "Hi,\nI've a simple target, which does two tasks.\nFirst it packs some files into a jar, second it deletes the files, which it has\npacked before. By deleting these files (which some of them come from\nsubdirectories) these subdirectories become empty.\n\nThe original delete target shows as follows\n<delete>\n<fileset dir=\"${a_basedir}\">\n<patternset refid=\"properties\" />\n</fileset>\n</delete>\n\nwhile the patternset is defined as\n<patternset>\n<includes name=\"**/*.properties\"/>\n</patternset>\n\nThese result is, as described before, empty directories.\n\nSetting the delete-task option 'includeemptydirs=\"true\"' has no effect (which I\nwonder about and write this bugreport).", "id": 78177, "time": "2005-08-05T17:45:39Z", "creator": "wolfgang.brodowski@gebit.de", "creation_time": "2005-08-05T17:45:39Z", "attachment_id": null}, {"text": "The patternset you are using does not select the directories you wish to \ndelete. The patternset you are using only selects files ending in *.properties. \nIf the directories are not empty before the delete task is run, they will not \nbe counted as empty by the delete task. Furthermore, unless your patternset \nselects them, they will not be deleted, which appears to be your main problem.", "tags": [], "bug_id": 36048, "is_private": false, "count": 1, "id": 78179, "time": "2005-08-05T18:02:04Z", "creator": "riznob@hotmail.com", "creation_time": "2005-08-05T18:02:04Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 36048, "text": "(In reply to comment #1)\n> The patternset you are using does not select the directories you wish to \n> delete. The patternset you are using only selects files ending in *.properties. \n> If the directories are not empty before the delete task is run, they will not \n> be counted as empty by the delete task. Furthermore, unless your patternset \n> selects them, they will not be deleted, which appears to be your main problem.\n\nI understand, but when or how does the mentioned delete option then work? Only,\nif the directories are empty before the task starts? If so, I request an\nadditional option for \"recheck, if delete produces empty directories\".", "id": 78180, "time": "2005-08-05T18:19:48Z", "creator": "wolfgang.brodowski@gebit.de", "creation_time": "2005-08-05T18:19:48Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 36048, "is_private": false, "text": "not that this will be relevant after eight years, but for completeness:\n\nWolfgang's pattenset doesn't match the directories (assuming their name doesn't end with .properties) so they are not deleted.  In order to delete directories - empty or not - they have to be matched by an include pattern.\n\nThe check whether a directory is empty or not is performed after the files (and potential empty subdirectories) have been deleted.", "id": 172081, "time": "2014-01-05T13:51:40Z", "creator": "bodewig@apache.org", "creation_time": "2014-01-05T13:51:40Z", "attachment_id": null}]