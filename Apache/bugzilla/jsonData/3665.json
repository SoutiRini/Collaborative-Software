[{"count": 0, "tags": [], "creator": "tom.sprenger@adnovum.com", "attachment_id": null, "text": "According to Servlet API Spec 2.3/Section 8.3.1, the following request\nattributes are set whenever a request is dispatched to another servlet/jsp using\nthe 'include' method of the RequestDispatcher object:\n\njavax.servlet.include.request_uri\njavax.servlet.include.context_path\njavax.servlet.include.servlet_path\njavax.servlet.include.path_info\njavax.servlet.include.query_string\n\nThis fields should enable a servlet being used from within an include to access\nthe parameters by which it was invoked.\n\nAccording to our test environment checking several dispatching methods Tomcat\n4.0rc2 seems to handle this fields wrongly. Using a RequestDispatcher (not a\nNamedDispatcher) and the 'include' method, Tomcat 4.0rc2 does not set these\nfields at all. Checking the request attributes, shows that these fields are not\navailable for the called servlet.", "id": 5688, "time": "2001-09-17T16:06:05Z", "bug_id": 3665, "creation_time": "2001-09-17T16:06:05Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "craig.mcclanahan@sun.com", "is_private": false, "id": 5689, "time": "2001-09-17T16:22:15Z", "bug_id": 3665, "creation_time": "2001-09-17T16:22:15Z", "tags": [], "text": "Can you submit a test case demonstrating this (as an attachment to this bug\nreport)?  I've got bunches of test cases (and running applications) that think\nit is working correctly per the specification.\n"}, {"count": 2, "tags": [], "bug_id": 3665, "text": "The reported bug can be reduced to the case where the getInfoPath() of the\ncalled servlet is empty ('null'). In this case the field\njavax.servlet.include.path_info will not be set. All other fields are present in\nthe request attributes. This behavior might be a consequence of the\nspecification refinement of the \"Dispatching Reuqests\" section.\n\nAlthough a call like req.getAttribute(\"javax.servlet.include.path_info\") would\nreturn the correct result (namely 'null'), the question still to be discussed is\nif it is appropriate to map an empty pathInfo to a RequestAttribute by just not\nsetting it? It might be functionally correct, but what the implementation\nconcerns not very clean.", "id": 5690, "time": "2001-09-17T17:02:01Z", "creator": "tom.sprenger@adnovum.com", "creation_time": "2001-09-17T17:02:01Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 3665, "text": "The problem is that setting a request attribute to a null value is not legal\n(same for session attributes and servlet context attributes).  Therefore, not\nsetting the \"javax.servlet.include.path_info\" attribute is the appropriate\nindication to the included servlet that it was invoked with no extra path info.\n\nSame thing happens on the query string attribute if there is no query string on\nthe path passed to getRequestDispatcher().\n\nNote that Tomcat's current behavior is what the J2EE compatibility tests are\nlooking for, so you will find it to be portable across all containers.\n", "id": 5691, "time": "2001-09-17T17:11:18Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-09-17T17:11:18Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 3665, "is_private": false, "text": "Thank you! Problems have been isolated and solved outside the tomcat code.", "id": 5735, "time": "2001-09-18T14:42:01Z", "creator": "tom.sprenger@adnovum.com", "creation_time": "2001-09-18T14:42:01Z", "attachment_id": null}]