[{"count": 0, "tags": [], "bug_id": 44516, "text": "We are getting \"Insufficient memory\" frequently in Web Application running in Tomcat 5.5.23.\nThe Memory and CPU Utilization by Tomcat Java process is increasing towards high over the period of time 4-5 hours after starting the server.\nThe Memory component (RES & SIZE) both are increasing (1765M 1052M).\nAfter that Sever getting crashed and throwing \"System Error: #1400008: Insufficient memory\"\n\nWe have 16G physical memory in the system and here is the Tomcat java process stack and Error stack provided below.\n\nMemory: 16G phys mem, 2436M free mem, 5000M total swap, 5000M free swap\n\nPID USERNAME LWP PRI NICE SIZE RES STATE TIME CPU COMMAND\n26581 webadmin 70 59 0 1765M 1052M sleep 26:00 1.05% java\n\nNotice: #4000050: Listening on MX_DEBUG_PORT 52117\nSystem Error: #1400008: Insufficient memory\nSystem Error: #1400008: Insufficient memory\nSystem Error: #1400008: Insufficient memory\n\n\nApplication is using TWO WEB and TWO APP servers running on \"sun4v sparc SUNW,Sun-Fire-T200\" Hardware.\nEach Web server box has one instance of Apache 2.2.3 and each App server box has one instance of Tomcat 5.5.23.\nBoth Apache and Tomcat are coolstack binery version downloaded from SUM web site.\n\nNOTE: Apache config file (workers.properties) is being used to communicate between Web and App servers with cross connection.\nEach WEB server is communicates to two App servers.\n\nServer details:\nAPP Server: lxks3e & lxks4e\nWEB Server: wex6e & wex7e\n\nEnvironment details:\nApp Server : sun4v sparc SUNW,Sun-Fire-T200 (2 app servers)\nWeb Server : sun4v sparc SUNW,Sun-Fire-T200 (2 web servers)\nOS Release : 5.10\n\nTomcat/ Apache/JDK ( Web Server : Apache/2.2.3 , App Server : Tomcat/5.5.23, http 1.1 )\nJRE_HOME: /usr/jdk1.5.0_13\nServer version: Apache Tomcat/5.5.23(coolstack binary)\nJDK Version Used : JDK1.5.0_13\nJVM Version: 1.5.0_13-b05\nJVM Vendor: Sun\n\nIn the Tomcat startup script we are using the following \"MX_JAVA_OPTIONS\" parameter.\n\nMX_JAVA_OPTIONS=\"-server -Xss512k -Xms1280m -Xmx1280m -Djava.awt.headless=true -XX:NewSize=640m -XX:MaxNewSize=640m -XX:SurvivorRatio=3 -XX:PermSize=92m -XX:MaxPermSize=256m -XX:+UseParallelGC -XX:ParallelGCThreads=2 -XX:TargetSurvivorRatio=80 -XX:MaxTenuringThreshold=31\"\n\nPlease suggest how we can resolve this issue. Any help will be highly appreciated.", "id": 114162, "time": "2008-03-01T14:29:33Z", "creator": "kousik_maity@hotmail.com", "creation_time": "2008-03-01T14:29:33Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "Looks like you app has a memory leak. You need to use the users list.", "id": 114163, "attachment_id": null, "bug_id": 44516, "creation_time": "2008-03-01T14:38:01Z", "time": "2008-03-01T14:38:01Z", "is_private": false}]