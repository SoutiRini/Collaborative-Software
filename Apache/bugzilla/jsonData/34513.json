[{"count": 0, "tags": [], "creator": "shengshen@gmail.com", "is_private": false, "text": "I use the following directive\n<%@ page errorPage=\"/jsp/error.jsp\" %>\nto tell jsp to move to error.jsp when exception raises on the page.\n\nBut I noticed the the real behavior relates to the \"position\" that the \nexception raises on the JSP page: \n1.When it raises on the relatively front part of the page, the page is \nredirected correctly to /jsp/error.jsp \n2.if exception raises at relatively rear position, the contenct of \nthe /jsp/error.jsp is outputed right after the normal output of the page. \n3.If at even rearer position, the result is a weird \"chopped\" page with only \npart of normal output.\n\nI tried to debugged the src of jasper into PageContextImpl's \ndoHandlePageException method. Found that the situation 2 was caused \nby \"JspWriterImpl has already flushed\", the situation 3 was caused by \nthe \"response was already committed\".\n\nI can't understand this behavior of tomcat. Isn't it puzzling to the ones that \nwant to debug JSP page?", "id": 73787, "time": "2005-04-19T09:08:59Z", "bug_id": 34513, "creation_time": "2005-04-19T09:08:59Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "yoavs@computer.org", "text": "Read up on JspWriter and error redirection, either in the JSP Spec or in a book.\n Once you write to a buffer, your response is committed and that changes app\nflow behavior, including for error pages.  This is not a Tomcat bug and Bugzilla\nis not the place for discussion on this matter: if you can't find a suitable\nbook or reference, ask on the tomcat-user mailing list and we'll help you locate\none.", "id": 74375, "time": "2005-05-03T16:18:07Z", "bug_id": 34513, "creation_time": "2005-05-03T16:18:07Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 34513, "is_private": false, "count": 2, "id": 74463, "time": "2005-05-05T02:25:09Z", "creator": "shengshen@gmail.com", "creation_time": "2005-05-05T02:25:09Z", "text": "Maybe some misunderstanding.\nWhat I feel wierd about is not the JspWriter's exception(caused by the \ncommited response) itself. I think there's something could be done under such \na jsp exception(eg. output to the tomcat log). I think that may be helpful \nbecause that gives the developer some hint about the error happened in his \ncoding."}, {"count": 3, "tags": [], "bug_id": 34513, "text": "(In reply to comment #2)\n> Maybe some misunderstanding.\n> What I feel wierd about is not the JspWriter's exception(caused by the \n> commited response) itself. I think there's something could be done under such \n> a jsp exception(eg. output to the tomcat log). I think that may be helpful \n> because that gives the developer some hint about the error happened in his \n> coding.\n\nHi,\nI have experienced the same issue.\nTo solve that, you can add some jsp directives:\n<%@ page autoFlush=\"false\"%>\n<%@ page buffer=\"800kb\"%>\n\n- autoflush will prevent the jsp from flushing until the end of the jsp has been\nreached\n- buffer will specify a higher buffer size to prevent buffer overflow exception\n\nthis should solve the problem.\nRegards,\nCyrille.\n", "id": 92205, "attachment_id": null, "creator": "cyrille.roy@free.fr", "creation_time": "2006-08-14T14:37:57Z", "time": "2006-08-14T14:37:57Z", "is_private": false}, {"count": 4, "tags": [], "creator": "shengshen@gmail.com", "is_private": false, "text": "(In reply to comment #3)\n> \n> Hi,\n> I have experienced the same issue.\n> To solve that, you can add some jsp directives:\n> <%@ page autoFlush=\"false\"%>\n> <%@ page buffer=\"800kb\"%>\n> \n> - autoflush will prevent the jsp from flushing until the end of the jsp has been\n> reached\n> - buffer will specify a higher buffer size to prevent buffer overflow exception\n> \n> this should solve the problem.\n> Regards,\n> Cyrille.\n> \n\nThank you for your advice. I think that will help to some extent.", "id": 92413, "time": "2006-08-22T14:43:25Z", "bug_id": 34513, "creation_time": "2006-08-22T14:43:25Z", "attachment_id": null}]