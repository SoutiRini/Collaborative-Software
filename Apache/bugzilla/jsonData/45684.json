[{"count": 0, "tags": [], "bug_id": 45684, "attachment_id": null, "is_private": false, "id": 120061, "time": "2008-08-25T02:10:48Z", "creator": "sebastien.bilbeau@univ-rennes1.fr", "creation_time": "2008-08-25T02:10:48Z", "text": "I've got lots of random error 404 with wildcard virtualhost. There was no error in the error_log.\n\nExample of message when we have this random bug :\nAug 22 23:41:07 lennon.mydomain.fr local1.info logger: www.lexbase.fr.passerelle.mydomain.fr 86.xx.xx.xx - - [22/Aug/2008:23:41:07 +0200] \"GET /lexbase/ident HTTP/1.1\" 404 517\n...\n\nMy virtualhost configuration :\n<VirtualHost 129.xx.xx.xx:80>\n   ServerName passerelle.mydomain.fr\n   ServerAlias *.passerelle.mydomain.fr\n   VirtualDocumentRoot /dev/null\n   # Balancing sur plusieurs serveur\n   ProxyPreserveHost On\n   ProxyPass /balancer-manager !\n   ProxyPass / balancer://mycluster/ stickysession=BALANCEID\n   <Proxy balancer://mycluster>\n     BalancerMember http://jpasserelle1.mydomain.fr route=jpasserelle1\n     BalancerMember http://jpasserelle2.mydomain.fr route=jpasserelle2\n   </Proxy>\n   ProxyPassReverse / http://jpasserelle1.mydomain.fr/\n   ProxyPassReverse / http://jpasserelle2.mydomain.fr/\n</Virtualhost>\n\nI've trying to disable balancing, but I've the same problem."}, {"count": 1, "tags": [], "bug_id": 45684, "attachment_id": null, "id": 120095, "time": "2008-08-26T03:44:34Z", "creator": "rahul.g.nair@gmail.com", "creation_time": "2008-08-26T03:44:34Z", "is_private": false, "text": "are there any URLs that consistently produce 404? or is it totaly random?\nAlso what about your balancer members? is one of them producing 404 by chance?\n\nI have been trying to reproduce your problem with no luck yet.\nmy conf:\n<VirtualHost *>\n   ServerName agneyam.india.sun.com\n   ServerAlias *.agneyam.india.sun.com\n   VirtualDocumentRoot /dev/null\n  # Balancing sur plusieurs serveur\n   ProxyPreserveHost On\n   ProxyPass /balancer-manager !\n   ProxyPass / balancer://mycluster/ stickysession=BALANCEID\n   <Proxy balancer://mycluster>\n     BalancerMember http://vayavyam.india.sun.com:8080 route=j1\n     BalancerMember http://vaishnavam.india.sun.com:8080 route=j2\n   </Proxy>\n   ProxyPassReverse / http://vayavyam.india.sun.com:8080/\n   ProxyPassReverse / http://vaishnavam.india.sun.com:8080/\n</Virtualhost>\n"}, {"count": 2, "tags": [], "creator": "fabien.abballe@gmail.com", "attachment_id": null, "is_private": false, "id": 120346, "time": "2008-09-04T06:05:40Z", "bug_id": 45684, "creation_time": "2008-09-04T06:05:40Z", "text": "I had the same error with my configuration.\n\nI solved it by removing the port number of the VirtualHost\n\n\nbefore:\n\n<VirtualHost *:80>\n\nAfter:\n\n<VirtualHost *>\n\n"}, {"count": 3, "tags": [], "bug_id": 45684, "attachment_id": null, "is_private": false, "id": 120353, "time": "2008-09-04T06:28:17Z", "creator": "sebastien.bilbeau@univ-rennes1.fr", "creation_time": "2008-09-04T06:28:17Z", "text": "I have fixed this issue last week. Just add a timeout and keepalive option for each balancer member.\n\nMy new configuration :\n\n<VirtualHost 129.xx.xx.xx:80>\n   ServerName passerelle.mydomain.fr\n   ServerAlias *.passerelle.mydomain.fr\n   VirtualDocumentRoot /dev/null\n   # Balancing sur plusieurs serveur\n   ProxyPreserveHost On\n   ProxyPass /balancer-manager !\n   ProxyPass / balancer://mycluster/ stickysession=BALANCEID\n   <Proxy balancer://mycluster>\n     BalancerMember http://jpasserelle1.mydomain.fr route=jpasserelle1 timeout=400 keepalive=on\n     BalancerMember http://jpasserelle2.mydomain.fr route=jpasserelle2 timeout=400 keepalive=on\n   </Proxy>\n   ProxyPassReverse / http://jpasserelle1.mydomain.fr/\n   ProxyPassReverse / http://jpasserelle2.mydomain.fr/\n</Virtualhost>\n\nNow, I have no 404 error in my logs."}]