[{"count": 0, "tags": [], "text": "When using a property file to configure one of the samples the filename and \nline number generating the log entry is correctly logged. Using the DOM \nconfigurator to do this along with an XML file you just get question marks \nwhere the file and line number should be.\n\nEither I'm set up wrong, or this is an error.\n\nPlease also rewiew the Weblogic output which seems to suggest other related \nproblems. (A nonfatal internal JIT (3.10.107(x)) error 'Relocation error: NULL \nrelocation target')\nI've included :\n-Property File Configuration\n-Log File Output using Property Configurator\n-XML Configuration\n-Log File Output using DOM Configurator\n-Java Source for initialisation servlet\n-Weblogic Output\n\nThanks !\n\nProperty File Config :\nlog4j.rootCategory=debug, R\n\nlog4j.appender.R=org.apache.log4j.RollingFileAppender\nlog4j.appender.R.File=example.log\n\nlog4j.appender.R.MaxFileSize=100KB\n# Keep one backup file\nlog4j.appender.R.MaxBackupIndex=1\n\nlog4j.appender.R.layout=org.apache.log4j.PatternLayout\nlog4j.appender.R.layout.ConversionPattern=%d{ISO8601} %p %t (%F:%L) - %m%n\n\nLog File Output using Property Configurator:\n2001-10-11 14:02:58,044 INFO ExecuteThread-11 (Log4jInit.java:23) - Log4J \nInitialised.\n2001-10-11 14:02:58,094 INFO ExecuteThread-11 (Log4jInit.java:29) - Do Get \nCalled.\n\nXML Config :\n<?xml version=\"1.0\" encoding=\"UTF-8\"?> \n<!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\">\n\n<log4j:configuration xmlns:log4j=\"http://jakarta.apache.org/log4j/\"\n                     debug=\"true\">\n\n\t<appender name=\"ASYNC\" class=\"org.apache.log4j.AsyncAppender\">\n\t        <appender-ref ref=\"TEMP\"/>\n\t</appender>\n\n\t<appender name=\"TEMP\" class=\"org.apache.log4j.FileAppender\">\n\t\t<param name=\"File\" value=\"temp.log\"/>\n\t\t<layout class=\"org.apache.log4j.PatternLayout\">\n  \t\t     <param name=\"ConversionPattern\" \n                            value=\"%d{ISO8601} %p %t %F:%L - %m%n\"/>\n\t\t</layout>\n\t</appender>\n\n\t<root>\n\t\t<priority value=\"debug\"/>\n\t\t<appender-ref ref=\"ASYNC\"/>\n\t</root>\n</log4j:configuration>\n\nLog File Output using DOM Configurator:\n2001-10-11 13:39:03,291 INFO ExecuteThread-11 (?:?) - Log4J Initialised.\n2001-10-11 13:39:03,311 INFO ExecuteThread-11 (?:?) - Do Get Called.\n\n\nJava Source :\npackage ichobs.util;\n\nimport org.apache.log4j.xml.DOMConfigurator;\nimport org.apache.log4j.PropertyConfigurator;\nimport org.apache.log4j.Category;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.PrintWriter;\nimport java.io.IOException;\n \npublic class Log4jInit extends HttpServlet {\n  \n  public\n  void init() { \n    String prefix =  getServletContext().getRealPath(\"/\");\n    String file = getInitParameter(\"log4j-init-file\");\n    // if the log4j-init-file is not set, then no point in trying\n    if(file != null) {\n      DOMConfigurator.configure(prefix+file);\n    }\n    Category cat = Category.getInstance(Log4jInit.class.getName());\n    cat.info(\"Log4J Initialised.\");\n  }\n\n  public\n  void doGet(HttpServletRequest req, HttpServletResponse res) {\n      Category cat = Category.getInstance(Log4jInit.class.getName());\n      cat.info(\"Do Get Called.\");\n  }\n}\n\n\n\n\n\nWeblogic Output :\n\nThu Oct 11 14:06:03 GMT+00:00 2001:<I> <WebLogicServer> WebLogic Server started\nThu Oct 11 14:06:09 GMT+00:00 2001:<I> <ListenThread> Adding address: gerry/127.\n0.0.1 to licensed client list\nThu Oct 11 14:06:09 GMT+00:00 2001:<I> <NT Performance Pack> Allocating: '2' NT\nreader threads\nThu Oct 11 14:06:09 GMT+00:00 2001:<I> <ServletContext-ichobs> log4j-init: init\nA nonfatal internal JIT (3.10.107(x)) error 'Relocation error: NULL relocation t\narget' has occurred in :\n  'org/apache/crimson/parser/Parser2.maybeComment (Z)Z': Interpreting method.\n  Please report this error in detail to http://java.sun.com/cgi-bin/bugreport.cg\ni\n\nWarning: validation was turned on but an org.xml.sax.ErrorHandler was not\nset, which is probably not what is desired.  Parser will use a default\nErrorHandler to print the first 10 errors.  Please call\nthe 'setErrorHandler' method to fix this.\nError: URI=zip:C:/webApps/ichobs/WEB-INF/lib/log4j.jar#org/apache/log4j/xml/log4\nj.dtd Line=2: URI \"zip:C:/webApps/ichobs/WEB-INF/lib/log4j.jar#org/apache/log4j/\nxml/log4j.dtd\" has a fragment ID.\nlog4j: Disable override=\"null\".\nlog4j: Disable =\"null\".\nlog4j: Priority value for root is  [debug].\nlog4j: root priority set to DEBUG\nlog4j: Class name: [org.apache.log4j.AsyncAppender]\nlog4j: Attaching appender named [TEMP] to appender named [ASYNC].\nlog4j: Class name: [org.apache.log4j.FileAppender]\nlog4j: Setting property [file] to [temp.log].\nlog4j: Parsing layout of class: \"org.apache.log4j.PatternLayout\"\nlog4j: Setting property [conversionPattern] to [%d{ISO8601} %p %t %F:%L - %m%n].\n\nlog4j: Adding appender named [ASYNC] to category [root].", "attachment_id": null, "bug_id": 4106, "id": 6591, "time": "2001-10-11T07:38:46Z", "creator": "gerry_baird@yahoo.com", "creation_time": "2001-10-11T07:38:46Z", "is_private": false}, {"count": 1, "tags": [], "creator": "ceki@apache.org", "text": "\nSee the log4j throubleshooting guide.", "id": 14789, "attachment_id": null, "bug_id": 4106, "creation_time": "2002-04-25T21:39:48Z", "time": "2002-04-25T21:39:48Z", "is_private": false}, {"count": 2, "tags": [], "creator": "ceki@apache.org", "text": "\nThe error reporting in DOMConfigurator has been improved in log4j 1.2.", "id": 14790, "time": "2002-04-25T21:41:33Z", "bug_id": 4106, "creation_time": "2002-04-25T21:41:33Z", "is_private": false, "attachment_id": null}]