[{"count": 0, "tags": [], "bug_id": 40971, "attachment_id": null, "id": 95829, "time": "2006-11-14T06:48:29Z", "creator": "eaepstein@gmail.com", "creation_time": "2006-11-14T06:48:29Z", "is_private": false, "text": "The behavior of this method is quite different on Unix vs win32 platforms. A\nminor change to one header file would help quite a bit. \nSuggested patch follows.\n\n--- apr_thread_cond.h.~1~\t2006-11-14 09:22:44.669864500 -0500\n+++ apr_thread_cond.h\t2006-11-14 09:36:46.805317900 -0500\n@@ -95,9 +95,11 @@\n                                                     apr_interval_time_t timeout);\n \n /**\n- * Signals a single thread, if one exists, that is blocking on the given\n- * condition variable. That thread is then scheduled to wake up and acquire\n- * the associated mutex. Although it is not required, if predictable scheduling\n+ * Signals a single thread that is blocking on the given condition variable.\n+ * That thread is then scheduled to wake up and acquire the associated mutex.\n+ * Effect if no thread is currently waiting: on Unix, nothing; on win32,\n+ * will immediately wake up the next thread to block on the given condition.\n+ * Although it is not required, if predictable scheduling\n  * is desired, that mutex must be locked while calling this function.\n  * @param cond the condition variable on which to produce the signal.\n  */"}, {"attachment_id": null, "tags": [], "bug_id": 40971, "is_private": false, "count": 1, "id": 97761, "time": "2007-01-07T14:35:45Z", "creator": "jorton@redhat.com", "creation_time": "2007-01-07T14:35:45Z", "text": "I don't think it's a good idea to specify platform-specific behaviour in the API\nlike that.  If it's not possible for APR to make any strong API guarantee across\nall implementations in this particular case, the API should just state that\nexplicitly:\n\n\"If no threads are blocked on the condition variable, the behaviour is unspecified.\"\n"}, {"count": 2, "tags": [], "bug_id": 40971, "is_private": false, "id": 97772, "attachment_id": null, "creator": "eaepstein@gmail.com", "creation_time": "2007-01-08T05:19:00Z", "time": "2007-01-08T05:19:00Z", "text": "That sounds good too. What's wrong is to let developers painfully discover this\nbehavior again and again."}, {"count": 3, "tags": [], "creator": "davi@apache.org", "text": "I've updated the win32 condition variable code so that unix and win32 behavior matches.\n\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=42305", "id": 103134, "time": "2007-05-12T11:06:50Z", "bug_id": 40971, "creation_time": "2007-05-12T11:06:50Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "davi@apache.org", "attachment_id": null, "text": "Committed revision 551966.\n\nhttp://svn.apache.org/viewvc?view=rev&revision=551966", "id": 104919, "time": "2007-06-29T10:24:22Z", "bug_id": 40971, "creation_time": "2007-06-29T10:24:22Z", "is_private": false}]