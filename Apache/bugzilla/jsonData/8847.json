[{"count": 0, "tags": [], "bug_id": 8847, "attachment_id": null, "text": "In the target below, YEAR and VERSION are properties set using the tstamp task.\n\nThe echo task correctly expands the ${VERSION} in the message but they are left\nunexpanded in the copy operations.  The tokens are replaced with the literal \nfilter values, not the expanded versions.\n\n-------\n\t<target name=\"newversion\" depends=\"prepare\">\n\t\t<echo message=\"version ${VERSION}\"/>\n\t\t<filter token=\"YEAR\" value=\"${YEAR}\"/>\n\t\t<filter token=\"VERSION\" value=\"${VERSION}\"/>\n\t\t<copy filtering=\"yes\"\n\t            file=\"${src}/com/neurosim/bsim/FBsim_AboutBox.java.template\"\n\t\t    tofile=\"${src}/com/neurosim/bsim/FBsim_AboutBox.java\"\n\t\t/>\n\t</target>\n  \n--- Ant output ---\nC:\\src\\neurosim\\bsim>ant newversion\nBuildfile: build.xml\n\nprepare:\n\nnewversion:\n     [echo] version 020507\n\nBUILD SUCCESSFUL", "id": 15603, "time": "2002-05-07T02:49:44Z", "creator": "pauls@classware.com.au", "creation_time": "2002-05-07T02:49:44Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jakarta@ehatchersolutions.com", "attachment_id": null, "id": 15614, "time": "2002-05-07T09:29:25Z", "bug_id": 8847, "creation_time": "2002-05-07T09:29:25Z", "is_private": false, "text": "What does your file ${src}/com/neurosim/bsim/FBsim_AboutBox.java.template look \nlike? \n\nAlso, I recommend using nested <filterset> for <copy> rather than the global \n<filter> task - its cleaner and less prone to screwing up other files with \n<copy> by accident."}, {"count": 2, "tags": [], "bug_id": 8847, "is_private": false, "text": "Created attachment 1802\nsample of before and after filtering", "id": 15618, "time": "2002-05-07T10:04:58Z", "creator": "pauls@classware.com.au", "creation_time": "2002-05-07T10:04:58Z", "attachment_id": 1802}, {"count": 3, "tags": [], "bug_id": 8847, "attachment_id": null, "is_private": false, "id": 17666, "time": "2002-06-12T14:25:55Z", "creator": "bodewig@apache.org", "creation_time": "2002-06-12T14:25:55Z", "text": "Using your template and build file (with\n    <property name=\"VERSION\" value=\"1\" />\n    <property name=\"YEAR\" value=\"2\" />\n) I get\n\n    private GridLayout gridLayout1 = new GridLayout();\n    private String product = \"\";\n    private String version = \"1\";\n    private String copyright = \"Copyright (c) Neurosim Ltd 2\";\n\nwith Ant 1.5beta.  Could you please recheck."}, {"count": 4, "tags": [], "text": "Paul says the bug is fixed in 1.5.  Thanks, Paul.", "is_private": false, "bug_id": 8847, "id": 17724, "time": "2002-06-13T07:42:26Z", "creator": "bodewig@apache.org", "creation_time": "2002-06-13T07:42:26Z", "attachment_id": null}]