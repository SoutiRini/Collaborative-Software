[{"count": 0, "attachment_id": 21816, "creator": "jens.hoffrichter@gmail.com", "text": "Created attachment 21816\nPatch to fix the mismatching session id\n\nHello,\n\nWhen trying to load-test an AJAX heavy web application I ran into the following error:\n\nAt some point during my test plan my sessionid was replaced by the sessionid followed by a backslash.\n\nAfter a bit of digging I found out that this occurred when there was JavaScript of the following type in the page:\n\n  sessionidvar = \\'<sessionidvalue>\\'; (for being used in an XMLHttpRequest)\n\nI just added the backslash to the \"terminating\" characters for a normal sessionid (as I don't believe that it would be part of a sessionid anyway), and it worked just fine.\n\nI include the patch to URLRewritingModified.java in here.\n\nRegards,\nJens", "id": 115546, "time": "2008-04-11T07:03:50Z", "bug_id": 44807, "creation_time": "2008-04-11T07:03:50Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "creator": "sebb@apache.org", "is_private": false, "id": 115552, "time": "2008-04-11T10:05:45Z", "bug_id": 44807, "creation_time": "2008-04-11T10:05:45Z", "tags": [], "text": "I tried adding a test for this, but the test failed with your patch.\n\nWhat is the surrounding context for the assignment?"}, {"count": 2, "tags": [], "text": "Some of the initial assumptions were wrong, I admit :)\n\nI thought that is was because of a session variable passed in along JavaScript, but after some debugging I found out that it was because of a complete URL passed along in JavaScript (probably for a redirect), quote in single quotes, which posed the problem.\n\nSo if something like this in the response, the URLRewritingModifier might cause a problem:\n\nnewurl = \\'/index.html?sessionid=blabla\\';\n\nI have created a unittest for that (testGrabSessionIdURLinJSON), and updated my patch to include the unit test.\n\nWithout my patch, the unit test fails, with the patch, it runs fine.\n\nI hope this will help you to resolve the issue.\n\nRegards,\n\nJens", "attachment_id": null, "id": 115639, "creator": "jens.hoffrichter@gmail.com", "time": "2008-04-16T08:09:13Z", "bug_id": 44807, "creation_time": "2008-04-16T08:09:13Z", "is_private": false}, {"count": 3, "tags": [], "text": "Created attachment 21823\nUpdated patch for session id parsing, including unittest", "attachment_id": 21823, "id": 115640, "creator": "jens.hoffrichter@gmail.com", "time": "2008-04-16T08:10:27Z", "bug_id": 44807, "creation_time": "2008-04-16T08:10:27Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 44807, "text": "Can you provide a full URL showing the problem?\n\nIf necesary, change the host etc to anonymise the URL.\n\nNo need for a new test case, I can adjust as necesssary.", "id": 115645, "time": "2008-04-16T08:36:09Z", "creator": "sebb@apache.org", "creation_time": "2008-04-16T08:36:09Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 44807, "attachment_id": null, "id": 115646, "creation_time": "2008-04-16T09:11:03Z", "time": "2008-04-16T09:11:03Z", "creator": "jens.hoffrichter@gmail.com", "text": "I'm not entirely sure (the page is quite long, it is hard to read.....), but I think the following line is the \"offender\":\n\n<a href=\\\"#\\\" onclick=\\\"$(\\'mailpreview_iframe\\').src=\\'/webmail/mail_download/?preview=1&fldr=INBOX&id=2&partid=1&mediatype=TEXT%2FPLAIN&encoding=7BIT&charset=us-ascii&textpreview=1&tempid=HUDXReOOE2y2QS2m\\';\\\" title=\\\"Textnachricht anzeigen\\\">\n\nRegards,\nJens", "is_private": false}, {"count": 6, "tags": [], "bug_id": 44807, "attachment_id": null, "id": 115648, "creation_time": "2008-04-16T12:04:34Z", "time": "2008-04-16T12:04:34Z", "creator": "sebb@apache.org", "text": "I assume you are lookig for \"tempid\" here?", "is_private": false}, {"count": 7, "tags": [], "bug_id": 44807, "attachment_id": null, "id": 115649, "time": "2008-04-16T13:55:32Z", "creator": "jens.hoffrichter@gmail.com", "creation_time": "2008-04-16T13:55:32Z", "is_private": false, "text": "Yes, exactly. That is the session identifier.\n\nIt is configured as that, without any extra options except \"cached\" set on in the URLRewritingModifier.\n\nRegards,\nJens"}, {"count": 8, "tags": [], "bug_id": 44807, "attachment_id": null, "id": 115653, "time": "2008-04-16T16:54:47Z", "creator": "sebb@apache.org", "creation_time": "2008-04-16T16:54:47Z", "is_private": false, "text": "OK, thanks for the patch.\n\nI've added it to SVN:\n\nhttp://svn.apache.org/viewvc?rev=648901&view=rev"}]