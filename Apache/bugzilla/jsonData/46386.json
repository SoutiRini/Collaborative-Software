[{"count": 0, "tags": [], "creator": "carsten.metzler@l-bank.de", "attachment_id": null, "text": "In the org.apache.fop.layoutmgr.inline.InlineStackingLayoutManager an NullPointerException is thrown in the \"applyChanges\"-method, when the variables prevLM AND currLM both are null.\n\nline 333-338: \n            currLM = (InlineLevelLayoutManager) oldElement.getLayoutManager();\n\n            // initialize prevLM\n            if (prevLM == null) {\n                prevLM = currLM;\n            }\n\nThe getLayoutManager-method of the ListElement-class returns null when no position is set, so currLM is null. If prevLM is null, too, prevLM is set to currLM - so both are null. In the following code the applyChanges-method is called on prevLM without null-check.\n\nAs workaround I inserted the following code after line 338:\n\n            if(prevLM == null && currLM == null) {\n            \tcontinue;\n            }", "id": 123257, "time": "2008-12-12T06:27:51Z", "bug_id": 46386, "creation_time": "2008-12-12T06:27:51Z", "is_private": false}, {"count": 1, "tags": [], "creator": "adelmelle@apache.org", "is_private": false, "text": "Thanks for the report, and the proposed quick-fix.\n\nI doubt that it's the cleanest way to address the issue, so we probably won't solve it that way. \nAFAIK a ListElement should always have an associated LM. IIC, there should really be no ListElements with a null LM...\n\nIs there any chance you could attach a small FO that reproduces the issue, so we can investigate this closer?", "id": 123265, "time": "2008-12-12T10:10:36Z", "bug_id": 46386, "creation_time": "2008-12-12T10:10:36Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "I reduced our FO to one fo:block. The problem seems to be the combination of the fo:block with hyphenate=\"true\" and the containing empty fo:inline with an id-attribute:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\">\n        <fo:layout-master-set>\n                <fo:simple-page-master margin-right=\"30pt\" margin-left=\"71pt\" margin-bottom=\"23pt\" margin-top=\"23pt\" page-width=\"21cm\" page-height=\"29.7cm\" master-name=\"page\">\n                        <fo:region-body overflow=\"hidden\" margin-bottom=\"50pt\" margin-top=\"82pt\"/>\n                        <fo:region-before extent=\"30pt\"/>\n                        <fo:region-after extent=\"27pt\"/>\n                </fo:simple-page-master>\n        </fo:layout-master-set>\n        <fo:page-sequence country=\"DE\" language=\"de\" master-reference=\"page\">\n                <fo:flow flow-name=\"xsl-region-body\">\n                        <fo:block hyphenate=\"true\">\n                                <fo:inline>Test</fo:inline>\n                                <fo:inline id=\"1\" />\n                        </fo:block>\n                </fo:flow>\n        </fo:page-sequence>\n</fo:root>", "is_private": false, "id": 123310, "creator": "carsten.metzler@l-bank.de", "time": "2008-12-15T03:49:45Z", "bug_id": 46386, "creation_time": "2008-12-15T03:49:45Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 46386, "attachment_id": 23291, "id": 125050, "time": "2009-02-22T00:00:45Z", "creator": "ensonic@hora-obscura.de", "creation_time": "2009-02-22T00:00:45Z", "is_private": false, "text": "Created attachment 23291\nfo file wher the problem happens too (gzipped)\n\nI get this for fo files generated from docbook xslt."}, {"count": 4, "tags": [], "text": "Created attachment 23415\nAnother short XSL-FO to reproduce the NPE\n\nThe same behaviour occured both with FOP 0.95 and FOP TRUNK (rev 757712).\n\nIf I remove either hyphenate property (from fo:block) or border property (from fo:inline), the NPE doesn't occur.\n\nShort XSL-FO attached reveals this behaviour.\n\nNote that there is no break opportunity anywhere.", "attachment_id": 23415, "bug_id": 46386, "id": 125783, "time": "2009-03-25T06:38:39Z", "creator": "pascal.sancho@takoma.fr", "creation_time": "2009-03-25T06:38:39Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 46386, "attachment_id": null, "id": 134645, "time": "2010-02-18T12:11:57Z", "creator": "vhennebert@gmail.com", "creation_time": "2010-02-18T12:11:57Z", "is_private": false, "text": "Bug #48765 mentions a similar issue and may be related."}, {"count": 6, "tags": [], "creator": "gadams@apache.org", "attachment_id": null, "text": "resetting severity from major to normal pending further review", "id": 157279, "time": "2012-04-07T01:37:25Z", "bug_id": 46386, "creation_time": "2012-04-07T01:37:25Z", "is_private": false}, {"count": 7, "tags": [], "text": "resetting P2 open bugs to P3 pending further review", "attachment_id": null, "bug_id": 46386, "id": 157523, "time": "2012-04-07T01:44:12Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:44:12Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 46386, "attachment_id": null, "id": 157913, "time": "2012-04-11T06:17:45Z", "creator": "gadams@apache.org", "creation_time": "2012-04-11T06:17:45Z", "is_private": false, "text": "change status from ASSIGNED to NEW for consistency"}]