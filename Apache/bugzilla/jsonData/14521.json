[{"count": 0, "tags": [], "creator": "jesse.glick@netbeans.com", "attachment_id": null, "id": 26220, "time": "2002-11-13T19:16:09Z", "bug_id": 14521, "creation_time": "2002-11-13T19:16:09Z", "is_private": false, "text": "E.g. a <target name=\"...\" if=\"some.prop\"/> will run if the property is set, even\nif empty, e.g. this will print \"Ran\":\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project default=\"all\">\n    <property name=\"foo\" value=\"\"/>\n    <target name=\"all\" if=\"foo\">\n        <echo>Ran</echo>\n    </target>\n</project>\n\nThis seems a poor design, since once any piece of the script sets such a\nproperty (e.g. loading a build.properties file), there is no way to turn it off,\neven with -D from the command line. You need to do weird workarounds like:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project default=\"all\">\n    <property name=\"foo\" value=\"\"/>\n    <property name=\"foo.is.${foo}\" value=\"what a hack\"/>\n    <target name=\"all\" if=\"foo.is.true\">\n        <echo>Ran</echo>\n    </target>\n</project>\n\nI can't imagine this is obvious to an inexperienced Ant user: after all,\nboolean-valued attrs of tasks accept \"true\", \"false\", etc., so the different\nbehavior for if/unless is confusing. While it makes some sense to permit any\nvalue (not just \"true\") to satisfy the condition, I would have expected at least\nthat \"\" (empty string) would count as false - but it counts as true too.\n\nIf this behavior is really intentional, or cannot be changed for compatibility\nreasons, please improve the documentation a bit.\n\ndocs/manual/using.html#targets\n\ndoes describe the actual behavior, but fails to call attention to how unexpected\nit might be for some users. It also fails to suggest ways to let the property\nused by if/unless be overridden even when there is a true default, such as my\n\"hacky\" example above.\n\nAnyway I might suggest printing a warning when a property used in if/unless is\nset but has the value \"false\", since this very likely means that the script\nwriter or user does not understand what is going on."}, {"count": 1, "tags": [], "bug_id": 14521, "attachment_id": null, "text": "The behavior is intentional and cannot be changed for backwrads compatibility.\n\nCould you please provide a patch for better documentation?  Thanks.", "id": 26351, "time": "2002-11-15T11:12:56Z", "creator": "bodewig@apache.org", "creation_time": "2002-11-15T11:12:56Z", "is_private": false}, {"count": 2, "tags": [], "text": "Hope this is clear enough now.", "attachment_id": null, "bug_id": 14521, "id": 33419, "time": "2003-03-19T09:23:09Z", "creator": "bodewig@apache.org", "creation_time": "2003-03-19T09:23:09Z", "is_private": false}]