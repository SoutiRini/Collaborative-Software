[{"count": 0, "attachment_id": null, "bug_id": 21469, "text": "Hello Regexp team,\n\nI found an error in RE.java version 1.13 (also in version 1.2).\nThe test code is trivial:\n\n--------------------------------------------------------------------------\npackage de;\n\nimport org.apache.regexp.RE;\nimport org.apache.regexp.RESyntaxException;\n\npublic class TestRegExp\n{\n\n  public static void main(String[] args)\n  {\n    RE re = null;\n    try\n    {\n      re = new RE(\".*\");\n\n      byte[] bytes = new byte[1613]; // 1613 is OK; 1614 StackOverflowError\n    \n      // AAAAAAAAAAAAAA.....AZ\n      for (int i=0; i<bytes.length; ++i)\n      {\n        bytes[i] = 'A';\n      }\n      bytes[bytes.length-1] = 'Z';\n    \n      String string = new String(bytes);\n    \n      System.out.println(\">\" + string + \"\\nmatch: \" + re.match(string));\n    }\n    catch (RESyntaxException e)\n    {\n      e.printStackTrace();\n    }\n  }\n}\n--------------------------------------------------------------------------\n\nWith 1613 bytes the output is:\n>AAAAAAAAAAAAAA.....AZ\nmatch: true\n\nBut with 1614 bytes it looks like (RE.java,v 1.13 2003/06/02 02:18:41 \nvgritsenko Exp):\njava.lang.StackOverflowError\n\tat org.apache.regexp.RE.matchNodes(RE.java:1153)\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\n...................\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\n\tat org.apache.regexp.RE.matchNodes(RE.java:1408)\nException in thread \"main\" \n\nThanks in advance\n\nG\u00fcnter Albrecht", "id": 40340, "time": "2003-07-10T13:58:00Z", "creator": "GKAlbrecht@gmx.de", "creation_time": "2003-07-10T13:58:00Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 21469, "text": "Duplicate.\n\n*** This bug has been marked as a duplicate of 764 ***", "id": 40341, "time": "2003-07-10T14:01:21Z", "creator": "vgritsenko@apache.org", "creation_time": "2003-07-10T14:01:21Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 21469, "is_private": false, "id": 40354, "time": "2003-07-10T15:31:03Z", "creator": "GKAlbrecht@gmx.de", "creation_time": "2003-07-10T15:31:03Z", "tags": [], "text": "I startet the JVM with: -Xmx256M -Xms256M\n\nAnd also put some tarces in RE.java around that recursive call with\nleads to an StackOverflowError. The output is:\n\ncall: 0 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 0\ncall: 1 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 1\ncall: 2 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 2\ncall: 3 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 3\ncall: 4 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 4\ncall: 5 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 5\ncall: 6 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 6\ncall: 7 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 7\ncall: 8 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 8\ncall: 9 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 9\ncall: 10 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 10\n....................................................\ncall: 1609 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 1609\ncall: 1610 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 1610\ncall: 1611 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 1611\ncall: 1612 maxMemory: 335544320 totalMemory: 266403840 node: 3 nodeSize: 3 \nmaxNode: 65536 idx: 1612\nStackOverflowError -> max call: 1612 node: 3 nodeSize: 3 maxNode: 65536 idx: \n1612\nStackOverflowError -> max call: 1612 node: 3 nodeSize: 3 maxNode: 65536 idx: \n1611\ncall: 1613 maxMemory: 335544320 totalMemory: 266403840 node: 15 nodeSize: 3 \nmaxNode: 65536 idx: 1611\n"}, {"count": 3, "tags": [], "creator": "GKAlbrecht@gmx.de", "attachment_id": null, "text": "I startet the JVM (JDK1.4.1) with: -Xmx256M -Xms256M\n\nAnd I also put some tarces in RE.java around that recursive call (line 1408) \nwhich leads to an StackOverflowError. The output is:\n\nmaxMemory: 335544320 totalMemory: 266403840\ncall: 0 node: 3 nodeSize: 3 maxNode: 65536 idx: 0\ncall: 1 node: 3 nodeSize: 3 maxNode: 65536 idx: 1\ncall: 2 node: 3 nodeSize: 3 maxNode: 65536 idx: 2\ncall: 3 node: 3 nodeSize: 3 maxNode: 65536 idx: 3\ncall: 4 node: 3 nodeSize: 3 maxNode: 65536 idx: 4\ncall: 5 node: 3 nodeSize: 3 maxNode: 65536 idx: 5\ncall: 6 node: 3 nodeSize: 3 maxNode: 65536 idx: 6\ncall: 7 node: 3 nodeSize: 3 maxNode: 65536 idx: 7\ncall: 8 node: 3 nodeSize: 3 maxNode: 65536 idx: 8\ncall: 9 node: 3 nodeSize: 3 maxNode: 65536 idx: 9\ncall: 10 node: 3 nodeSize: 3 maxNode: 65536 idx: 10\ncall: 11 node: 3 nodeSize: 3 maxNode: 65536 idx: 11\ncall: 12 node: 3 nodeSize: 3 maxNode: 65536 idx: 12\ncall: 13 node: 3 nodeSize: 3 maxNode: 65536 idx: 13\n....................................................\ncall: 1608 node: 3 nodeSize: 3 maxNode: 65536 idx: 1608\ncall: 1609 node: 3 nodeSize: 3 maxNode: 65536 idx: 1609\ncall: 1610 node: 3 nodeSize: 3 maxNode: 65536 idx: 1610\ncall: 1611 node: 3 nodeSize: 3 maxNode: 65536 idx: 1611\ncall: 1612 node: 3 nodeSize: 3 maxNode: 65536 idx: 1612\nmaxMemory: 335544320 totalMemory: 266403840\nStackOverflowError -> call: 1612 node: 3 nodeSize: 3 maxNode: 65536 idx: 1611\ncall: 1613 node: 15 nodeSize: 3 maxNode: 65536 idx: 1611\n", "id": 40357, "time": "2003-07-10T15:44:16Z", "bug_id": 21469, "creation_time": "2003-07-10T15:44:16Z", "is_private": false}]