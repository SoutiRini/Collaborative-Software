[{"count": 0, "tags": [], "bug_id": 29581, "attachment_id": null, "id": 59244, "time": "2004-06-15T17:56:43Z", "creator": "julien@julien-dubois.com", "creation_time": "2004-06-15T17:56:43Z", "is_private": false, "text": "Hi,\n\nI'm using the new <import/> task of Ant 1.6.1 to reuse my \"jspc\" task on all my\napplications.\n\nBut I cannot use JspC more than once (it used to work with Tomcat 4).\n\nHere is the exception I get:\njava.lang.ExceptionInInitializerError\n        at\norg.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:537)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:385)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:269)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:301)\n        at org.apache.tools.ant.Target.performTasks(Target.java:328)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1215)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1063)\n        at org.apache.tools.ant.Main.runBuild(Main.java:632)\n        at org.apache.tools.ant.Main.startAnt(Main.java:183)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:197)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:56)\n\nHere is my \"common\" build.xml:\n\n<target name=\"jspc\">\n(...)\n        <taskdef classname=\"org.apache.jasper.JspC\" name=\"jasper2\"\nclasspathref=\"jasper.classpath\"/>\n        <jasper2 \n             validateXml=\"false\"\n             webXmlFragment=\"${basedir}/target/jspc/webinc.xml\" \n             package=\"${jspc.package}\"\n             uriroot=\"${basedir}/target/jspc/war\"\n             outputDir=\"${basedir}/target/jspc/java\" />\n(...)\n</target>\n\nIt will fail if I call this task twice. For example :\n<antcall target=\"jspc\"/>\n<antcall target=\"jspc\"/>\n\nBTW, I use Java 1.4.2_03-b02 and Ant 1.6.1.\n\nThanks in advance for the help,\n\nJulien Dubois."}, {"count": 1, "tags": [], "bug_id": 29581, "attachment_id": null, "id": 59270, "time": "2004-06-16T10:06:54Z", "creator": "julien@julien-dubois.com", "creation_time": "2004-06-16T10:06:54Z", "is_private": false, "text": "Workaround: launch JspC in a separate process.\n\n        <java classname=\"org.apache.jasper.JspC\"\n              fork=\"true\"\n              failonerror=\"true\"\n              classpathref=\"jasper.classpath\">\n              \n              <arg value=\"-p\"/>\n              <arg value=\"${jspc.package}\"/>\n              <arg value=\"-uriroot\"/>\n              <arg value=\"${basedir}/target/jspc/war\"/>\n              <arg value=\"-d\"/>\n              <arg value=\"${basedir}/target/jspc/java\"/>\n              <arg value=\"-webinc\"/>\n              <arg value=\"${basedir}/target/jspc/webinc.xml\"/>\n              <arg value=\"-xmlencoding\"/>\n              <arg value=\"ISO-8859-1\"/>\n              <arg value=\"-die1\"/>\n        </java>\n\nHTH,\n\nJulien Dubois"}, {"count": 2, "tags": [], "bug_id": 29581, "attachment_id": null, "id": 59311, "creation_time": "2004-06-16T15:01:24Z", "time": "2004-06-16T15:01:24Z", "creator": "yoavs@computer.org", "text": "Me thinks this is an issue with the Ant launch of JspC, no?  I don't see any \ntomcat-related elements in the stack trace you posted.  So I will close this \nissue for now, you can obviously reopen and reassign to the Ant product, leave \nit closed if you're happy with the workaround, or if it does turn out to be \nsome JspC bug, please post a patch.  Thanks.", "is_private": false}, {"count": 3, "tags": [], "bug_id": 29581, "attachment_id": null, "id": 59368, "creation_time": "2004-06-16T22:17:27Z", "time": "2004-06-16T22:17:27Z", "creator": "julien@julien-dubois.com", "text": "I'm using <taskdef/> several times in a similar way (for XDoclet for example),\nand I've never had this kind of errors.\nSo there *might* be something wrong with the JspC task, but I have to admit I\ndon't know who's fault it is (Ant or JspC).\n\nI'm happy with the workaround, so let's leave it as closed.\n", "is_private": false}]