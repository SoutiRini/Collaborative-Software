[{"count": 0, "tags": [], "text": "When uploading an image via tinymce, the image is uploaded, but not shown in the\nsubmitted page and not shown in the site-tab.\n\nThe uploaded image can be found in content/authoring.\n\nThere seems to be an inconsistent state after the upload. \nAn asset uploaded via \u00abnew media\u00bb is registered correctly in the sitetree.\n\nWe did a bit of customizing of the tinyMCE integration in our publication - can\nanyone confirm this behaviour?", "attachment_id": null, "id": 107647, "creator": "ragaller@apache.org", "time": "2007-09-03T01:49:01Z", "bug_id": 43291, "creation_time": "2007-09-03T01:49:01Z", "is_private": false}, {"count": 1, "tags": [], "creator": "rfrovarp@apache.org", "attachment_id": null, "text": "I can confirm this behavior in FCKeditor and one form as well. The node exists\nin a sitetree.xml.*.bak file, then disappears. I tried to confirm with BXE, but\nhad problems getting the page to save. However, the image was there with a\nfailed save. So I tried to cancel out of FCK and one form, and the node exists.\nThe save in the editor is what is causing the uploaded image to disappear from\nthe sitetree. \n\nI think fixing this could well fix the problem my users saw in 43136.", "id": 107663, "time": "2007-09-03T10:44:31Z", "bug_id": 43291, "creation_time": "2007-09-03T10:44:31Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 43291, "attachment_id": null, "id": 107720, "time": "2007-09-04T12:07:04Z", "creator": "rfrovarp@apache.org", "creation_time": "2007-09-04T12:07:04Z", "is_private": false, "text": "Saving in FCK, Tiny, or one forms overwrites any creates done on the sitetree.\nIt may well override any changes, however only creates work at the moment. Also,\nforms, Kupu, and BXE don't save at the moment, so they too probably cause this\nproblem if they were to save. "}, {"count": 3, "tags": [], "creator": "andreas@apache.org", "attachment_id": null, "text": "The node is actually inserted in the sitetree (you can confirm this by opening\nanother browser), but removed again when you save your document in the oneform\neditor.", "id": 108025, "time": "2007-09-11T07:54:49Z", "bug_id": 43291, "creation_time": "2007-09-11T07:54:49Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 43291, "attachment_id": null, "id": 108026, "time": "2007-09-11T07:55:11Z", "creator": "andreas@apache.org", "creation_time": "2007-09-11T07:55:11Z", "is_private": false, "text": "The question is - why does the oneform usecase save the sitetree?"}, {"count": 5, "tags": [], "bug_id": 43291, "attachment_id": null, "id": 108028, "time": "2007-09-11T08:14:04Z", "creator": "rfrovarp@apache.org", "creation_time": "2007-09-11T08:14:04Z", "is_private": false, "text": "(In reply to comment #4)\n> The question is - why does the oneform usecase save the sitetree?\n\nSee comment 35 and 36 from 43136. Basically savePersistables ends up with the\nsitetree.xml file in its list due to a check to see if the current node is a\ndocument."}, {"count": 6, "tags": [], "bug_id": 43291, "attachment_id": null, "id": 108049, "time": "2007-09-12T01:08:46Z", "creator": "andreas@apache.org", "creation_time": "2007-09-12T01:08:46Z", "is_private": false, "text": "(In reply to comment #5)\n> (In reply to comment #4)\n> > The question is - why does the oneform usecase save the sitetree?\n> \n> See comment 35 and 36 from 43136. Basically savePersistables ends up with the\n> sitetree.xml file in its list due to a check to see if the current node is a\n> document.\n\nBut the sitetree shouldn't be saved nevertheless:\n\n    public synchronized void save() throws RepositoryException {\n        if (loading || !changed) {\n            return;\n        }\n\nFor some reason, SiteTreeImpl.changed seems to be true."}, {"count": 7, "tags": [], "bug_id": 43291, "attachment_id": null, "id": 108051, "time": "2007-09-12T01:25:07Z", "creator": "andreas@apache.org", "creation_time": "2007-09-12T01:25:07Z", "is_private": false, "text": "changed() is called when loading. I'll fix that.\n\norg.apache.lenya.cms.site.tree2.SiteTreeImpl.changed(SiteTreeImpl.java:504)\norg.apache.lenya.cms.site.tree2.TreeNodeImpl.addChild(TreeNodeImpl.java:296)\norg.apache.lenya.cms.site.tree2.TreeNodeImpl.addChild(TreeNodeImpl.java:274)\norg.apache.lenya.cms.site.tree2.SiteTreeImpl.loadNodes(SiteTreeImpl.java:153)\norg.apache.lenya.cms.site.tree2.SiteTreeImpl.load(SiteTreeImpl.java:115)\n..."}, {"count": 8, "tags": [], "bug_id": 43291, "attachment_id": null, "id": 108052, "time": "2007-09-12T01:34:32Z", "creator": "andreas@apache.org", "creation_time": "2007-09-12T01:34:32Z", "is_private": false, "text": "Fixed in revision 574842."}]