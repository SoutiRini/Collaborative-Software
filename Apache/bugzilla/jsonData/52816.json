[{"count": 0, "tags": [], "creator": "tixu@cs.ucsd.edu", "attachment_id": null, "text": "In Apache-2.4.1, the mod_dav_fs module has potential bug which may lead to segment fault.\n\nThe problem is the use of ap_server_root_relative() which may return a NULL pointer. The current version doesn't check whether the return value is NULL or not, but directly manipulate on it.\n\nAs is known, some misconfigurations may cause ap_server_root_relative() to return a NULL pointer such as using a nonexistent drive letter on Windows (see https://issues.apache.org/bugzilla/show_bug.cgi?id=39722). \n\n\nmaybe the following patch makes sense?\n\n*** mod_socache_shmcb.c 2012-03-03 14:15:48.010321827 -0800\n--- test.c      2012-03-03 14:15:26.537838321 -0800\n***************\n*** 287,292 ****\n--- 287,294 ----\n\n      ctx->data_file = path = ap_server_root_relative(p, arg);\n\n+     if(!path)\n+       return \"Invalid cache path\";\n\n      cp = strrchr(path, '(');\n      cp2 = path + strlen(path) - 1;\n\n\nPS: the \"arg\" is from the configuration parameter, for example, if you use:\n\nSSLSessionCache        \"shmcb:g:\\somepath\"\n\nThe arg is g:\\somepath", "id": 154480, "time": "2012-03-03T22:27:34Z", "bug_id": 52816, "creation_time": "2012-03-03T22:27:34Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 52816, "text": "Another instance where a NULL return from the function ap_server_root_relative is ignored is seen in Apache httpd bug 54560:\n\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=54560", "id": 165307, "time": "2013-02-18T17:28:05Z", "creator": "mike.rumph@oracle.com", "creation_time": "2013-02-18T17:28:05Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 52816, "is_private": false, "count": 2, "id": 165311, "time": "2013-02-18T18:06:47Z", "creator": "tixu@cs.ucsd.edu", "creation_time": "2013-02-18T18:06:47Z", "text": "Hi, Mike,\n\nI remember this bug report is from long ago in httpd-2.4.1.\nDid you hit this bug in recent release?\n\nBest,\nTianyin"}, {"attachment_id": null, "tags": [], "bug_id": 52816, "text": "(In reply to comment #2)\n> Hi, Mike,\n> \n> I remember this bug report is from long ago in httpd-2.4.1.\n> Did you hit this bug in recent release?\n> \n> Best,\n> Tianyin\n\nHello Tianyin,\n\nThe code in the ap_process_fnmatch_configs function in server/config.c which ignores a NULL result from ap_server_root_relative is still seen in 2.4-HEAD and 2.5-HEAD.\n\nPlease see my description in bug 54560.\n\nThanks,\n\nMike Rumph", "count": 3, "id": 165312, "time": "2013-02-18T19:00:59Z", "creator": "mike.rumph@oracle.com", "creation_time": "2013-02-18T19:00:59Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 52816, "attachment_id": null, "text": "Got it. Thanks, Mike!\n\n--Tianyin", "id": 165313, "time": "2013-02-18T19:07:32Z", "creator": "tixu@cs.ucsd.edu", "creation_time": "2013-02-18T19:07:32Z", "is_private": false}]