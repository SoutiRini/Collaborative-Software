[{"count": 0, "tags": [], "creator": "thomas.behr@yworks.com", "attachment_id": 24376, "is_private": false, "id": 131119, "time": "2009-10-14T09:37:13Z", "bug_id": 47993, "creation_time": "2009-10-14T09:37:13Z", "text": "Created attachment 24376\ntest case\n\nUp to and including BATIK v 1.6,\norg.apache.batik.bridge.SVGPathElementBridge.buildShape ignored path elements\nwith empty d attributes (see revision 385978 in the SVG trunk branch for\nSVGPathElementBridge.java).\nSince BATIK v 1.7 this is no longer the case (see revision 426986 and later)\nwhich results in bad bounds for org.apache.batik.gvt.GraphicsNode instances\ncorresponding to SVG documents that use <path d=\"\" .../> but would not normally\ninclude the origin of the coordinate system in their bounds.\n\nTo illustrate this issue, see the attached test case\nRun against BATIK 1.6, this prints\n  rectWithoutEmptyPath.bounds = [x=100.0;y=100.0;w=100.0;h=100.0]\n     rectWithEmptyPath.bounds = [x=100.0;y=100.0;w=100.0;h=100.0]\nbut\n  rectWithoutEmptyPath.bounds = [x=100.0;y=100.0;w=100.0;h=100.0]\n     rectWithEmptyPath.bounds = [x=0.0;y=0.0;w=200.0;h=200.0]\nwhen run against BATIK 1.7 or later."}, {"count": 1, "tags": [], "creator": "helder.magalhaes@gmail.com", "attachment_id": null, "is_private": false, "id": 131136, "time": "2009-10-15T02:37:40Z", "bug_id": 47993, "creation_time": "2009-10-15T02:37:40Z", "text": "Yes, the SVG 1.1 and Tiny 1.2 specifications seem to point towards the original behavior:\n\n\"Note that the BNF allows the path 'd' attribute to be empty. This is not an error, instead it disables rendering of the path.\" [1] [2]\n\nI've confirmed the apparently unexpected behavior with SVN revision 820114 (latest as of this writing):\n\nrectWithoutEmptyPath.bounds = [x=100.0;y=100.0;w=100.0;h=100.0]\n   rectWithEmptyPath.bounds = [x=0.0;y=0.0;w=200.0;h=200.0]\n\nAccording to the information provided, I'm marking this as a regression.\n\n[1] http://www.w3.org/TR/SVG11/paths.html#PathDataBNF\n[2] http://www.w3.org/TR/SVGTiny12/paths.html#PathDataBNF"}]