[{"count": 0, "tags": [], "bug_id": 13211, "attachment_id": null, "text": "cookies are set twice :\n\n<Directory /home/www/tp/biscuit>\n  CookieTracking On\n  CookieName DYSHIDROSE\n</Directory>\n\nshell> nc localhost 80\nGET /tp/biscuit/ HTTP/1.0\n\nHTTP/1.1 200 OK\nDate: Wed, 02 Oct 2002 15:26:10 GMT\nServer: Apache/2.0.42 (Unix)\nSet-Cookie: DYSHIDROSE=10.2.100.100.1033572370951690; path=/; max-age=604800\nCache-Control: max-age=2592000\nExpires: Fri, 01 Nov 2002 15:26:10 GMT\nSet-Cookie: DYSHIDROSE=10.2.100.100.1033572370951606; path=/; max-age=604800\nLast-Modified: Wed, 15 Dec 1999 17:36:20 GMT", "id": 23755, "time": "2002-10-02T15:29:58Z", "creator": "fabien@coelho.net", "creation_time": "2002-10-02T15:29:58Z", "is_private": false}, {"count": 1, "tags": [], "creator": "frank@sane.com", "text": "Build and install v2.0.44 as follows:\n\n./configure --prefix=/tmp/apache --enable-usertrack\n\nAdd \"CookieTracking on\" to the end of the default httpd.conf file, start up\nApache and look at the headers for \"/\" -- only one cookie.  Now copy\n/tmp/apache/htdocs/index.html.en to /tmp/apache/htdocs/index.html and look\nat the headers for \"/\".  I get two cookies for every page that does NOT use\ncontent negotiation (which unfortunately for me is my entire site...).\n\nI also ran the same tests with v1.3.27 built as follows:\n\n./configure --prefix=/tmp/apache --enable-module=usertrack\n\nAnd -never- got two cookies.  I ran these tests on Red Hat Linux 7.3, but\nhave also seen the problem on Solaris.\n", "id": 31294, "time": "2003-02-14T14:27:44Z", "bug_id": 13211, "creation_time": "2003-02-14T14:27:44Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "frank@sane.com", "attachment_id": null, "id": 31295, "time": "2003-02-14T14:29:21Z", "bug_id": 13211, "creation_time": "2003-02-14T14:29:21Z", "is_private": false, "text": "Comments below are from Andr\u00e9 Malo [nd@perlig.de] from the dev@httpd.apache.org \nmailing list:\n\n*hrm* I can verify that behaviour for directory requests (i.e. \nmod_dir/DirectoryIndex) without negotiation of the index file.\n\nIt seems to happen the following (GET / HTTP/1.0) without negotiation:\n\nrun_fixup:\n->mod_usertrack: spot_cookie\n->mod_dir: search and find index.html using sub_req_lookup_uri, which runs a \nfixup itself (->next spot_cookie)\n  ->internal_fast_redirect -> apr_table_overlay(r->headers_out, \n                                                rr->headers_out)\n\n                               ^^ two cookies here ^^\n\nmod_negotiation instead (in case of index.html.var) does an additional normal \ninternal_redirect to the negotiated resource, which drops the old stuff and \ncooks (not only) its own cookie.\n\nright?\n\nConclusion: are overlay'ed tables in internal_fast_redirect semantically \nintended? Could someone please explain in slow words ;-), why?"}, {"count": 3, "tags": [], "bug_id": 13211, "text": "A workaround has been applied and will appear in the next release (2.0.45).\nIf you wanna try it before the next release, the patch is rather small and can\nbe found here:\n<http://cvs.apache.org/viewcvs.cgi/httpd-2.0/modules/metadata/mod_usertrack.c.diff?r1=1.39.2.1&r2=1.39.2.2>\n\nIf there are further problems, please reopen this bug report.\n\nThanks for using Apache!", "id": 32694, "time": "2003-03-07T21:35:21Z", "creator": "nd@perlig.de", "creation_time": "2003-03-07T21:35:21Z", "is_private": false, "attachment_id": null}]