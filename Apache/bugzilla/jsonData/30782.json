[{"count": 0, "tags": [], "creator": "gregaryh@juno.com", "attachment_id": null, "is_private": false, "id": 62271, "time": "2004-08-20T22:28:08Z", "bug_id": 30782, "creation_time": "2004-08-20T22:28:08Z", "text": "This is related to bug 26602.\nThe problem we were having is that the ServerRoot directive is not prepending\nthe path to LDAPTrustedCA. This has been fixed as of 2.0.50, however there is\nstill no mention  of a problem in the log files or debug messages if it is\nunable to parse the certificate file. On the contrary, it seems to indicate it\nis fine. \n\n[Fri Aug 20 13:23:14 2004] [debug] util_ldap.c(1018): LDAP: SSL trusted\ncertificate authority file - /usr/local/apache2/conf/ssl.crt/TrustedRootCert.b64\n[Fri Aug 20 13:23:14 2004] [debug] util_ldap.c(1034): LDAP: SSL trusted\ncertificate authority file type - BASE64_FILE\n.\n.\n.\n[Fri Aug 20 13:23:14 2004] [debug] mod_auth_ldap.c(790): LDAP: auth_ldap using\nSSL connections\n\nIf during startup, the file cannot be found or is found and is not in a valid\nformat it should return a warning message saying so in the error_log or at the\nvery least in the debug messages."}, {"count": 1, "tags": [], "creator": "vrb@novell.com", "attachment_id": null, "id": 62274, "time": "2004-08-20T22:52:08Z", "bug_id": 30782, "creation_time": "2004-08-20T22:52:08Z", "is_private": false, "text": "Here's a call in util_ldap.c that looks interesting: \n \nrc = ldap_set_option(NULL, LDAP_OPT_X_TLS_CACERTFILE, st->cert_auth_file); \n \nIt would seem that ldap_set_option() returns success even if the file pointed \nto by st->cert_auth_file doesn't exist or is bogus. "}, {"count": 2, "tags": [], "creator": "vrb@novell.com", "attachment_id": null, "is_private": false, "id": 62275, "time": "2004-08-20T23:44:38Z", "bug_id": 30782, "creation_time": "2004-08-20T23:44:38Z", "text": "This is true as recently as openldap-2.2.15. The openldap internal function is \nldap_pvt_tls_set_option(). Here's the code:\n\n    case LDAP_OPT_X_TLS_CACERTFILE:\n        if ( tls_opt_cacertfile ) LDAP_FREE( tls_opt_cacertfile );\n        tls_opt_cacertfile = arg ? LDAP_STRDUP( (char *) arg ) : NULL;\n        break;\n"}, {"count": 3, "tags": [], "text": "The LDAPTrustedCA directive handler now validates the file path of the \ncertificate.  This is as much as can be done for OpenLDAP.  Other LDAP SDKs \nactually validate the certificate at the time SSL is initialized.\n\nA fix has been added to HEAD and is waiting for backport approval to 2.0", "is_private": false, "bug_id": 30782, "id": 62367, "time": "2004-08-23T23:46:54Z", "creator": "bnicholes@apache.org", "creation_time": "2004-08-23T23:46:54Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "minfrin@apache.org", "attachment_id": null, "id": 64531, "time": "2004-10-03T16:33:27Z", "bug_id": 30782, "creation_time": "2004-10-03T16:33:27Z", "is_private": false, "text": "I don't see anything in STATUS about this PR - has this been backported already?\n"}, {"count": 5, "tags": [], "text": "This was backported on 8/26 in revision r1.6.2.22", "attachment_id": null, "bug_id": 30782, "id": 64562, "time": "2004-10-04T13:55:28Z", "creator": "bnicholes@apache.org", "creation_time": "2004-10-04T13:55:28Z", "is_private": false}]