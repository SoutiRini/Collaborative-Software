[{"count": 0, "tags": [], "creator": "eric.jain@gmail.com", "text": "Since I started to deploy a web application at the root of a Tomcat instance (running inside JBoss), the first login attempt after starting the browser always results in a redirection to the site's favicon! The login itself is successful (re-entering the site address loads the home page, logged in). I can then log in and out (and access the site) without any trouble -- until I next restart the browser. This happens regardless of what browser is used (I tried Firefox 3 and Internet Explorer 7). Following are the headers of the conversation: \n\nPOST /j_security_check HTTP/1.1\nHost: localhost:8080\nUser-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.1\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-us,en;q=0.5\nAccept-Encoding: gzip,deflate\nAccept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7\nKeep-Alive: 300\nConnection: keep-alive\nReferer: http://localhost:8080/\nCookie: JSESSIONID=E96C8FCD27CB758364E9FB40B3A85476\nContent-Type: application/x-www-form-urlencoded\nContent-Length: 34\nj_username=admin&j_password=xxxxxx\n\nHTTP/1.x 302 Moved Temporarily\nServer: Apache-Coyote/1.1\nLocation: http://localhost:8080/favicon.ico\nTransfer-Encoding: chunked\nContent-Encoding: gzip\nVary: Accept-Encoding\nDate: Wed, 30 Jul 2008 00:59:26 GMT", "id": 119107, "attachment_id": null, "bug_id": 45498, "creation_time": "2008-07-29T18:52:15Z", "time": "2008-07-29T18:52:15Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "This works for me on a clean build of the latest 5.5.x source and there haven't been any relevant changes that I am aware of in this area for quite some time.\n\nLooking at the headers for the complete login process will probably be quite informative. If you need help figuring out what is happening, please ask on the users list.", "id": 119124, "time": "2008-07-30T08:19:57Z", "bug_id": 45498, "creation_time": "2008-07-30T08:19:57Z", "is_private": false}, {"count": 2, "tags": [], "creator": "eric.jain@gmail.com", "is_private": false, "id": 119156, "attachment_id": 22334, "bug_id": 45498, "creation_time": "2008-07-30T14:42:35Z", "time": "2008-07-30T14:42:35Z", "text": "Created attachment 22334\ntest web application"}, {"count": 3, "tags": [], "creator": "eric.jain@gmail.com", "text": "I've attached a test application that allows this problem to be reproduced on a fresh Tomcat 5.5.26 instance.", "id": 119157, "attachment_id": null, "bug_id": 45498, "creation_time": "2008-07-30T14:45:13Z", "time": "2008-07-30T14:45:13Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 45498, "text": "Your test case works correctly on a clean 5.5.26.\n\nAgain, you need to look at the full set of requests and responses to work out why this doesn't work for you. Use the users list if you need help.", "id": 119159, "time": "2008-07-30T15:34:57Z", "creator": "markt@apache.org", "creation_time": "2008-07-30T15:34:57Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "eric.jain@gmail.com", "attachment_id": null, "is_private": false, "id": 119161, "time": "2008-07-30T16:11:58Z", "bug_id": 45498, "creation_time": "2008-07-30T16:11:58Z", "text": "What browser did you use? I have confirmed the problem with default installations of Firefox 2 and 3 (problem observed only after restarting the browser) and with Internet Explorer 7 (problem observed only after clearing all cached data). Opera 9.5 on the other hand seems fine (even after clearing all cached data), not sure why. What appears to be happening is that the browser sends a request for the favicon after loading the login page. When the login form is submitted (from the root of the web server), Tomcat redirects to the last request in the same path -- the favicon! Jetty (6.1.11) does not have this problem (perhaps it remembers what request triggered the authentication form?) so I'm assuming this is a fixable bug."}]