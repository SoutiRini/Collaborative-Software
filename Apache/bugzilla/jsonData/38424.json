[{"count": 0, "tags": [], "text": "I have noticed that the current BCEL trunk expects to build the BCEL package\nagainst jdk 1.3. The LineNumberTable class toString method uses the StringBuffer\nappend(StringBuffer) method that been defined since jdk 1.4. Any builds using\njdk 1.4 or greater will use of this method call.\n\nI have also noticed that the toString method adds a new line after printing 72\ncharacters but it append the '\\n' character instead of what the \"line.separator\"\nproperty is defined as.\n\nI have a patch for this issue that I will add to this bug report.", "is_private": false, "id": 85127, "creator": "ccorsi@progress.com", "time": "2006-01-27T20:21:20Z", "bug_id": 38424, "creation_time": "2006-01-27T20:21:20Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "ccorsi@progress.com", "text": "Here is a patch for this issue:\n\nThis was generated using the diff command -x and -u options.\n\nIndex: bcel/src/java/org/apache/bcel/classfile/LineNumberTable.java\n===================================================================\n--- bcel/src/java/org/apache/bcel/classfile/LineNumberTable.java       \n(revision 372884)\n+++ bcel/src/java/org/apache/bcel/classfile/LineNumberTable.java        (working\ncopy)\n@@ -122,6 +122,7 @@\n   public final String toString() {\n     StringBuffer buf  = new StringBuffer();\n     StringBuffer line = new StringBuffer();\n+    String newLine = System.getProperty(\"line.separator\", \"\\n\");\n\n     for(int i=0; i < line_number_table_length; i++) {\n       line.append(line_number_table[i].toString());\n@@ -130,8 +131,8 @@\n        line.append(\", \");\n\n       if(line.length() > 72) {\n-       line.append('\\n');\n-       buf.append(line);\n+       line.append(newLine);\n+       buf.append(line.toString());\n        line.setLength(0);\n       }\n     }\n", "id": 85128, "time": "2006-01-27T20:23:45Z", "bug_id": 38424, "creation_time": "2006-01-27T20:23:45Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 38424, "attachment_id": 17519, "is_private": false, "id": 85129, "time": "2006-01-27T20:27:32Z", "creator": "ccorsi@progress.com", "creation_time": "2006-01-27T20:27:32Z", "text": "Created attachment 17519\nThis is a good patch diff file.\n\nThe priviously pasted diffs format was altered. Added an attachment for\nconsistency of patch file."}, {"count": 3, "tags": [], "bug_id": 38424, "attachment_id": null, "text": "applied, thanks!", "id": 85328, "time": "2006-02-02T04:10:26Z", "creator": "tcurdt@apache.org", "creation_time": "2006-02-02T04:10:26Z", "is_private": false}]