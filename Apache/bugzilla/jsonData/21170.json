[{"count": 0, "attachment_id": null, "creator": "heinz@chanet.de", "text": "creating a jar,\nupdate set to true\nmanifest inline (with CLASS-PATH)\ngenerates illegal jar's\nhaving dumplicte (as many as jar update tasks are called) CLASS-PATH attributes", "id": 39601, "time": "2003-06-29T17:15:18Z", "bug_id": 21170, "creation_time": "2003-06-29T17:15:18Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 21170, "text": "Looks like WORKSFORME - or I don't understand the report:\n\n<project default=\"jar\">\n  <target name=\"jar\">\n    <jar destfile=\"update-test.jar\">\n      <manifest>\n        <attribute name=\"Class-Path\" value=\"foo\"/>\n      </manifest>\n    </jar>\n  </target>\n</project>\n\ncreates the jar when run for the first time and doesn't recreate it on subsequent\ninvocations.", "id": 39631, "time": "2003-06-30T09:35:06Z", "creator": "bodewig@apache.org", "creation_time": "2003-06-30T09:35:06Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 21170, "text": "to clarify:\nupdate set to true should mean: <jar update=\"true\" ... > \n\nin my case the following target shows the error:\n  <target name=\"jar\" depends=\"init\">\n  \t<jar jarfile=\"${jar}\" update=\"true\">\n\t\t<fileset refid=\"relevant\" />\n\t\t<fileset refid=\"jarInclude\" />\n\t\t<manifest>\n    \t\t<!--<attribute name=\"Manifest-Version\" value=\"1.2\" />-->\n    \t\t<attribute name=\"Built-By\" value=\"heinz.doerr@chanet.de\" />\n   \t\t\t<attribute name=\"Main-Class\" value=\"systemProperties\" />\n   \t\t\t<attribute name=\"Class-Path\" value=\"bcrypt_lt.jar jakarta-oro.jar\" />\n   \t\t\t<attribute name=\"Sealed\" value=\"false\" />\n \t\t</manifest>\n\t</jar>\n  </target>\n\n\n\n\nif I call this target several times with changes in some files in the fileset,\n\nreading the manifest thru the ZipFile class I get:\n-----------------------------------------------------\ndumping /home/heinz/java/dist/lib/util.jar\nManifest-Version: 1.0\nAnt-Version: Apache Ant 1.5.3 \nCreated-By: 1.4.2-b28 (Sun Microsystems Inc.)\nBuilt-By: heinz.doerr@chanet.de\nMain-Class: systemProperties\nClass-Path: bcrypt_lt.jar jakarta-oro.jar\nClass-Path: bcrypt_lt.jar jakarta-oro.jar\nClass-Path: bcrypt_lt.jar jakarta-oro.jar\nClass-Path: bcrypt_lt.jar jakarta-oro.jar\nClass-Path: bcrypt_lt.jar jakarta-oro.jar\nClass-Path: bcrypt_lt.jar jakarta-oro.jar util.jar\nClass-Path: bcrypt_lt.jar jakarta-oro.jar util.jar\nClass-Path: bcrypt_lt.jar jakarta-oro.jar\nClass-Path: bcrypt_lt.jar jakarta-oro.jar\nSealed: false\n------------------------------------------------------\n\nSince java version j2sdk1.4.2 java reports warnings due to this\nmultiple entries,\n< 1.4.2 does not show warnings - therefore it can easily been overseen.\n\n", "id": 39640, "time": "2003-06-30T10:21:33Z", "creator": "heinz@chanet.de", "creation_time": "2003-06-30T10:21:33Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "bodewig@apache.org", "text": "OK, I can reproduce it.", "id": 39641, "time": "2003-06-30T10:32:10Z", "bug_id": 21170, "creation_time": "2003-06-30T10:32:10Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "text": "Some historic trivia - see bug 4683.\n\nIt seems that various documents by Sun say that multiple Class-Path entries\nshould be permitted even though the spec says differently.  What type of\nwarning do you get from JDK 1.4.2 (sorry, haven't installed it yet)?  Does it\ncomplain because there are multiple Class-Path entries or because there are\nmultiple entries for the same libraries?\n", "id": 39642, "time": "2003-06-30T10:46:04Z", "bug_id": 21170, "creation_time": "2003-06-30T10:46:04Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "heinz@chanet.de", "text": "This happens when I dump the manifest of util.jar thru the JarFile class,\nsimiliar err outputs (surely w/o my dump lines) when ever I use the util.jar in\nmy programs:\n\n\ndumping /home/heinz/java/dist/lib/util.jar\nJun 30, 2003 12:46:36 PM java.util.jar.Attributes read\nmanifest attributes[Class-Path]= bcrypt_lt.jar jakarta-oro.jar\nWARNING: Duplicate name in Manifest: Class-Path\nmanifest attributes[Sealed]= false\nJun 30, 2003 12:46:36 PM java.util.jar.Attributes read\nmanifest attributes[Built-By]= heinz.doerr@chanet.de\nWARNING: Duplicate name in Manifest: Class-Path\nmanifest attributes[Created-By]= 1.4.2-b28 (Sun Microsystems Inc.)\nJun 30, 2003 12:46:36 PM java.util.jar.Attributes read\nmanifest attributes[Ant-Version]= Apache Ant 1.5.3 \nWARNING: Duplicate name in Manifest: Class-Path\nmanifest attributes[Main-Class]= systemProperties\nJun 30, 2003 12:46:36 PM java.util.jar.Attributes read\nmanifest attributes[Manifest-Version]= 1.0", "id": 39644, "time": "2003-06-30T10:58:29Z", "bug_id": 21170, "creation_time": "2003-06-30T10:58:29Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 21170, "attachment_id": null, "text": "OK, should be fixed with nightly build 2003-07-08.", "id": 40041, "time": "2003-07-07T08:21:46Z", "creator": "bodewig@apache.org", "creation_time": "2003-07-07T08:21:46Z", "is_private": false}]