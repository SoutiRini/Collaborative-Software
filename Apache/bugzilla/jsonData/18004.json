[{"count": 0, "tags": [], "bug_id": 18004, "is_private": false, "text": "It is extremely frustrating for the end-user when he attempts to login by using \na CORRECT user name and password, only to be notified that the login failed, \nand with no further explanation (this occurs when an SQLException is thrown \nduring the authenticate process).  The exception is being hidden from the user, \ngiving the false impression that the wrong username and/or password was \nentered, when in actuality there was a database problem. \n\nThe JDBCRealm.authenticate(String, String) method cannot declare itself to \nthrow SQLExceptions since it implements the Realm interface, so I propose the \nSQLException be wrapped and re-thrown as a RuntimeException. This is not an \nelegant solution, but is vastly superior to the current behavior, which greatly \nfrustrates the end-user.", "id": 33200, "time": "2003-03-14T17:45:20Z", "creator": "jswap@yahoo.com", "creation_time": "2003-03-14T17:45:20Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "craig.mcclanahan@sun.com", "text": "The only place that the actual cause of such a problem should show up is in the\nlog files -- telling the user what the actual problem was just opens your app up\nto security attacks.  Good security design says that the result of an \"are you\nauthenticated\" question is a yes or no, with no further information available to\npotential attackers.\n\nI'm not an active Tomcat committer at the moment, but I strongly argue for a\nWONTFIX resolution on this one.\n", "id": 33214, "time": "2003-03-14T20:01:43Z", "bug_id": 18004, "creation_time": "2003-03-14T20:01:43Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 18004, "text": "Craig, I really wish you had to \"eat your own cooking\" on this one.  I don't \nthink you realize how many support requests, how much confusion, and how much \nfrustration are generated because of this \"feature\".  The only information that \nneeds to be communicated to the user is \"We cannot log you in at this time due \nto a system error. Please try back later\".  Many large websites do this, and it \nis a flaw in Tomcat that it cannot.  A simple error message like the one I just \nmentioned is not going to reduce security in any significant way.  The benefits \noutweigh the costs, big time.", "id": 33215, "time": "2003-03-14T20:27:30Z", "creator": "jswap@yahoo.com", "creation_time": "2003-03-14T20:27:30Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 18004, "text": "Been there (dealt with user support issues) ... done that (tried to make error\nmessages more helpful) ... and I've seen server containers that behave the way\nyou propose get themselves published on CERT advisories for having security\nvulnerabilities (what you want is *totally* against basic \"Security 101\" design\nprinciples).  I'm not interested in seeing that happen to Tomcat.\n\nIf you deploy an app that throws a JDBC exception in the authenticate method\n(say, because you mis-typed the name of one of the columns in the config), that\nis first and foremost a flaw in your application testing and deployment\npractices, which needs to be addressed before you even start thinking about how\nthe server might be more responsive to reporting these problems to the ultimate\nend user.\n", "id": 33219, "time": "2003-03-14T21:25:04Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2003-03-14T21:25:04Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 18004, "text": "Is Yahoo Mail listed on one of these CERT advisories?  Because Yahoo Mail has \nthe functionality for which I am asking.  And if Yahoo Mail is on a CERT \nadvisory, I would have to question the practicality of these advisories.\n\nI agree with you about the mis-typed column name; this is something that should \ncome out in testing.  What I am most concerned about is database downtime.  As \nhard as we try to keep it from happening, databases do go down from time to \ntime.  This kind of problem really is a RuntimeException, and I don't see the \nharm in telling the user \"You can't log in right now\".", "id": 33220, "time": "2003-03-14T21:35:08Z", "creator": "jswap@yahoo.com", "creation_time": "2003-03-14T21:35:08Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "jswap@yahoo.com", "attachment_id": null, "is_private": false, "id": 33221, "time": "2003-03-14T21:45:38Z", "bug_id": 18004, "creation_time": "2003-03-14T21:45:38Z", "text": "One more thing on this topic and then I'll shut up:\n\nMaking the change I am asking for does not preclude anyone from keeping the end-\nuser experience exactly the same as it is now; anyone can eat the exception \nanywhere down the line.  But implementing my suggestion will give people a \nCHOICE about how they want their site to behave, a choice we do not have now."}, {"count": 6, "attachment_id": null, "creator": "craig.mcclanahan@sun.com", "text": "*THANK YOU* for this warning!  If Yahoo has shown you a database exception at\nlogin time, that's the last security straw in my book -- there have now been\nenough security-related problems reported against Yahoo that I will never ever\nuse them again.  I've just stopped using my last Yahoo id because of this.\n\n(If you have a clue who I am, and what my involement with Tomcat has been, you\nmight want to take this seriously for yourself.)\n", "id": 33229, "time": "2003-03-15T06:23:31Z", "bug_id": 18004, "creation_time": "2003-03-15T06:23:31Z", "tags": [], "is_private": false}, {"text": "As already stated, the realm does logs the exception so any error which is\noccuring may be discovered by the server administrator. \n\nFor security purposes, the user should be denied access with the default webapp\nor container error message. Anything less is a security violation. \n\nThis will NOT be fixed in tomcat.  \n\nIf this is still an issue, I recommend extending JDBCRealm (which is a non-final\nclass) with your proposed fix and deploy it to $CATALINA_HOME/server/classes dir\n(as well as following all the needed instructions for writing a custom realm)\n", "tags": [], "bug_id": 18004, "is_private": false, "count": 7, "id": 42427, "time": "2003-08-08T17:19:38Z", "creator": "funkman@joedog.org", "creation_time": "2003-08-08T17:19:38Z", "attachment_id": null}]