[{"count": 0, "tags": [], "creator": "steve@openssl.org", "attachment_id": null, "text": "When mod_ssl logs OpenSSL errors it doesn't include the associated error string.\nThis string can carry additional data related to the error making the cause\neasier to locate. In some cases (e.g. the OpenSSL ASN1 library) omitting the\nerror string renders the error output almost useless.\n\nThe attached patch fixes this.", "id": 110667, "time": "2007-11-17T05:59:42Z", "bug_id": 43889, "creation_time": "2007-11-17T05:59:42Z", "is_private": false}, {"count": 1, "attachment_id": 21141, "bug_id": 43889, "text": "Created attachment 21141\nLog associated error string", "id": 110668, "time": "2007-11-17T06:00:48Z", "creator": "steve@openssl.org", "creation_time": "2007-11-17T06:00:48Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 43889, "is_private": false, "id": 110702, "time": "2007-11-19T01:59:39Z", "creator": "jorton@redhat.com", "creation_time": "2007-11-19T01:59:39Z", "tags": [], "text": "The man page for ERR_get_error_line_data() implies that you have to check for\nflags&ERR_TXT_MALLOCED and free the \"data\" string if true - but the fact that\ndata is passed as const char * somewhat contradicts that - what's correct here?"}, {"count": 3, "tags": [], "creator": "steve@openssl.org", "text": "The manual page is a bit confusing in that respect. Almost all applications just\ncall ERR_print_errors() and forget about it, that isn't of course possible here.\n\nThe data will be freed internally when the circular buffer is reused (e.g. by\nmore errors or explicitly cleared).\n\nIf you free up the data explicitly it wont reset the internal flags and data so\nyou'd end up with the data being freed twice.\n\nNow I've checked the sources in more detail there is a simpler way to achieve\nthe same thing and free up the data properly: peek the error first and call\nERR_get_error() afterwards. New patch included.", "id": 110721, "time": "2007-11-19T05:34:58Z", "bug_id": 43889, "creation_time": "2007-11-19T05:34:58Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": 21151, "bug_id": 43889, "is_private": false, "id": 110722, "time": "2007-11-19T05:38:36Z", "creator": "steve@openssl.org", "creation_time": "2007-11-19T05:38:36Z", "tags": [], "text": "Created attachment 21151\nUpdated associated error print patch."}, {"count": 5, "attachment_id": null, "bug_id": 43889, "is_private": false, "id": 110917, "time": "2007-11-21T05:37:39Z", "creator": "jorton@redhat.com", "creation_time": "2007-11-21T05:37:39Z", "tags": [], "text": "Great, thanks.  I also took the opportunity to tweak the log message to\ndelineate the error/data/annotation better; committed to trunk:\n\nhttp://svn.apache.org/viewvc?view=rev&revision=597077"}]