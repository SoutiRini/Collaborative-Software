[{"count": 0, "tags": [], "bug_id": 37467, "text": "we have a CGI process which runs forever, terminating when the user closes the\nsession (e.g. closes their browser window).\n\nnormally, this works fine.  however, when run as an suexec CGI, the process\nnever exits, because Apache cannot kill it.\n\nfrom dtrace, with a normal CGI:\nCPU     ID                    FUNCTION:NAME\n  0  37018                       kill:entry pid = 25355\n  0  37019                      kill:return ret = 0\n  0  37018                       kill:entry pid = 25355\n  0  37019                      kill:return ret = 0\n\nwith the suexec CGI:\n  1  37018                       kill:entry pid = 25404\n  1  37019                      kill:return ret = -1\n  1  37018                       kill:entry pid = 25404\n  1  37019                      kill:return ret = -1\n\nthe correct fix is for the CGI script to notice write errors and exit; however,\nit would be nice if Apache or suexec learnt how to kill its setuid children.\n\n(Observed on Solaris 10 AMD64, worker MPM.)", "id": 82391, "time": "2005-11-11T12:38:41Z", "creator": "keturner@livejournal.com", "creation_time": "2005-11-11T12:38:41Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 37467, "text": "I don't think it's really worth complicating the suexec interface or\nimplementation for this given that a correctly written CGI script will notice\nthe write errors anyway.  (if the script doesn't get the SIGTERM it should get a\nSIGPIPE and die anyway when it tries to write to the closed pipe anyway, I'd\nhave thought; is that not the case?)", "id": 82765, "time": "2005-11-23T15:33:30Z", "creator": "jorton@redhat.com", "creation_time": "2005-11-23T15:33:30Z", "is_private": false, "attachment_id": null}]