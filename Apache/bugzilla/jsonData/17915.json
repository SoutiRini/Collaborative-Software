[{"count": 0, "tags": [], "bug_id": 17915, "attachment_id": null, "id": 33032, "time": "2003-03-12T13:54:29Z", "creator": "goroh@hotmail.com", "creation_time": "2003-03-12T13:54:29Z", "is_private": false, "text": "The Jasper JSP compiler ignores the classpath declared inside the manifest file \n(MANIFEST.MF) of a web application. The interesting side-effect is that a code \nlike this run ok:\n\nClass.forName(\"full.name.of.a.class\");\n\nBut this doesn't get compiled by Jasper:\n\nfull.name.of.a.class obj;\n\np.s.: The class \"full.name.of.a.class\" is inside a JAR referenced at the \nmanifest classpath"}, {"count": 1, "attachment_id": null, "creator": "sriramnrn@gmail.com", "is_private": false, "id": 93690, "time": "2006-09-17T15:10:05Z", "bug_id": 17915, "creation_time": "2006-09-17T15:10:05Z", "tags": [], "text": "Tomcat 3.3.2 behaves fine.\nRefer to\nhttp://tomcat.apache.org/tomcat-3.3-doc/tomcat-ug.html#configuring_classes for\ninformation on Tomcat's classloader hierarchy.\n\nHere's what I did:\n1. Create two jars. One (referenced.jar) contains referenced.code.Referenced.\nThe other (testcode.jar) contains test.code.MyClass.\n2. Edited testcode.jar's MANIFEST.MF to point to c:\\referenced.jar\n3. Tested with the referenced.jar placed within the war's WEB-INF/lib folder,\nand then move it to c:\\\n4. Testing: clearing the work folder, and then using the web application.\n\nReport:\nWhen referenced.jar is within WEB-INF/lib, an explicit recompile worked fine\n\nWhen referenced.jar is not insidee WEB-INF/lib but is instead at c:\\, TC 3.3.2\nthrew the following error:\n\nError: 500\nLocation: /test/references.jsp\nInternal Servlet Error:\n\njavax.servlet.ServletException: referenced.code.Referenced\n\tat\norg.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:412)\n\tat references_1._jspService(references_1.java:74)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:78)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java)\n\tat org.apache.tomcat.facade.ServletHandler.doService(ServletHandler.java:534)\n\tat org.apache.tomcat.core.Handler.invoke(Handler.java:280)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:193)\n\tat org.apache.tomcat.facade.ServletHandler.service(ServletHandler.java:445)\n\tat org.apache.tomcat.core.ContextManager.internalService(ContextManager.java:874)\n\tat org.apache.tomcat.core.ContextManager.service(ContextManager.java:790)\n\tat org.apache.coyote.tomcat3.Tomcat3Adapter.service(Tomcat3Adapter.java:64)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:793)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:702)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:571)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:644)\n\tat java.lang.Thread.run(Thread.java:595)\nRoot cause:\njava.lang.ClassNotFoundException: referenced.code.Referenced\n\tat\norg.apache.tomcat.util.depend.DependClassLoader12Impl.loadClassInternal1(DependClassLoader12.java:205)\n\tat\norg.apache.tomcat.util.depend.DependClassLoader12Impl$1.run(DependClassLoader12.java:78)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat\norg.apache.tomcat.util.depend.DependClassLoader12Impl.loadClass(DependClassLoader12.java:76)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:251)\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n\tat java.lang.Class.forName0(Native Method)\n\tat java.lang.Class.forName(Class.java:164)\n\tat references_1._jspService(references_1.java:57)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:78)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java)\n\tat org.apache.tomcat.facade.ServletHandler.doService(ServletHandler.java:534)\n\tat org.apache.tomcat.core.Handler.invoke(Handler.java:280)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:193)\n\tat org.apache.tomcat.facade.ServletHandler.service(ServletHandler.java:445)\n\tat org.apache.tomcat.core.ContextManager.internalService(ContextManager.java:874)\n\tat org.apache.tomcat.core.ContextManager.service(ContextManager.java:790)\n\tat org.apache.coyote.tomcat3.Tomcat3Adapter.service(Tomcat3Adapter.java:64)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:793)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:702)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:571)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:644)\n\tat java.lang.Thread.run(Thread.java:595)\n\n"}, {"count": 2, "attachment_id": 18878, "creator": "sriramnrn@gmail.com", "is_private": false, "id": 93691, "time": "2006-09-17T15:15:53Z", "bug_id": 17915, "creation_time": "2006-09-17T15:15:53Z", "tags": [], "text": "Created attachment 18878\nA demonstration of the previous comment\n\nWhen testing, move the referenced.jar from test/WEB-INF/lib to c:\\\nOn Unix machines, you'll need to change the MANIFEST.MF with testcode.jar to\ncorrect the path."}]