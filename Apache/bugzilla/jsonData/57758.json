[{"count": 0, "tags": [], "creator": "viit.novaak@gmail.com", "attachment_id": null, "is_private": false, "id": 182094, "time": "2015-03-25T13:51:44Z", "bug_id": 57758, "creation_time": "2015-03-25T13:51:44Z", "text": "Saying it simply: \n\nValidator + initSQL = no initSQL executed. \nValidator + no initSQL = no Validator executed on init \n\nTo be clear, setting Validator and initSQL results in initSQL actually not being executed. But setting Validator without initSQL results in Validator not being executed on initialization. This means, that if we want to use custom Validator and initSQL, we need to execute initSQL in the validator (as advised in #1) but still set some initSQL into datasource with some nonsense like:\n\n    setValidator(new Jdbc4Validator(config.initSql));\n    setInitSQL(\"Oracle has products and solutions for every role in the enterprise\");\n\n\nSee PooledConnection#validate(int, String), and PooledConnection.doValidate(int) for VALIDATE_INIT in tomcat-jdbc-8.0.9.\n\n#1 http://mail-archives.apache.org/mod_mbox/tomcat-users/201412.mbox/%3CCAAjH2Utn2KL_nzQRCy=0MPXmTQVfLwLidir_5S9w6O6Z7MELmQ@mail.gmail.com%3E"}, {"count": 1, "tags": [], "bug_id": 57758, "attachment_id": null, "id": 183786, "time": "2015-06-29T08:14:09Z", "creator": "kfujino@apache.org", "creation_time": "2015-06-29T08:14:09Z", "is_private": false, "text": "You can set testOnConnect to true.\nHowever current docs of jdbc-pool does not document this attribute.\nI added testOnConnect attribute.(r1688103)"}]