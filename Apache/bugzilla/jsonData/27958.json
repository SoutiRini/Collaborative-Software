[{"count": 0, "tags": [], "creator": "George.Lindholm@ubc.ca", "attachment_id": null, "id": 54682, "time": "2004-03-25T21:22:39Z", "bug_id": 27958, "creation_time": "2004-03-25T21:22:39Z", "is_private": false, "text": "An applications WAR file is not redeployed automatically when the\nwar file is updated.\n\nThe problem is that HostConfig.checkContextLastModified() is seeing the\nwrong value for what it thinks is the name of the WAR file. Instead of\nseeing \"myubc.war\" it sees \"ROOT\" so the\n\n  if (files[i].endsWith(\".war\")) {\n\ntest at line 843 always fails since files[0]=\"ROOT\"\n\n\nHere is the server.xml entries for the Context:\n\n    <Engine name=\"myUBC\" defaultHost=\"scandia\">\n      <Host name=\"scandia\" appBase=\"webapps\"\n        unpackWARs=\"true\" autoDeploy=\"true\" workDir=\"work\">\n        <Context path=\"\" docBase=\"/local/src/myUBC2/myubc.war\" reloadable=\"false\">\n\n\n   George"}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "This is normal. Only webapps deployed in the host appBase will be redeployed.\nBasically, this is not the way deployment occurs (and BTW, you shouldn't put\nyour Context in server.xml).", "id": 54683, "time": "2004-03-25T21:26:47Z", "bug_id": 27958, "creation_time": "2004-03-25T21:26:47Z", "is_private": false, "attachment_id": null}, {"count": 2, "text": "The webapp is in the host appBase:\n\n  -Dcatalina.base=/local/src/myUBC2\n\n\nAnd why does the code think it is looking at the name of the WAR file\nwhen it is given the name of the directotory where the WAR file was exploded to?\n\n\n\n  George\n\n\n\n", "bug_id": 27958, "is_private": false, "id": 54688, "time": "2004-03-25T22:09:42Z", "creator": "George.Lindholm@ubc.ca", "creation_time": "2004-03-25T22:09:42Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 27958, "attachment_id": null, "text": "Look: I am really sorry about the deployer's limitations, but you have to accept\nthem (or use a different server). The name of the war must match the webapp name.\nOtherwise, use the manager webapp or Ant tasks to reload or redeploy your\napplication.", "id": 54721, "time": "2004-03-26T11:22:02Z", "creator": "remm@apache.org", "creation_time": "2004-03-26T11:22:02Z", "is_private": false}, {"count": 4, "text": "Remy, is this a bug or a feature because the docs say this about deployment:\n\n\"Redeployment of a web application which has been deployed from a WAR when the\nWAR is updated: the expanded web application is removed, and the WAR is expanded\nagain. This will not happen if the host is configured so that WARs are not\nexpanded, in which case the webapp will be simply redeployed.\"\n\n(From http://jakarta.apache.org/tomcat/tomcat-5.0-doc/deployer-howto.html)\n\nIf I read above statement correctly it means changing a WAR file should result\nin its expanded directory being removed from webapps and recreated in webapps.\n\nAm I missing something?", "bug_id": 27958, "is_private": false, "id": 58102, "time": "2004-05-26T00:23:22Z", "creator": "nick.atkins@scalix.com", "creation_time": "2004-05-26T00:23:22Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "creator": "pr@objektpark.de", "attachment_id": null, "id": 58108, "time": "2004-05-26T04:26:57Z", "bug_id": 27958, "creation_time": "2004-05-26T04:26:57Z", "is_private": false, "text": "Hello,\n\na reload from a war works fine for me at 5.0.24/25 release.\n\nYour must deploy your web application at appBase from your host.\nThe Deployer (HostConfig class) detect than the changed war file, delete the\nextracted directory and context.xml. Than the newer war Archiv was loaded\nand extract your META-INF/context.xml and the directory.\n\nIt also work when you context.xml docPath point to the extacted directory, but\nthis is not clever. Thing about Tomcat server that configured with\nHost.unpackWARS=false! \nThe complete deployment work also for ROOT.war.\n\nI tested this and it works stable.\n\nRegards\nPeter"}, {"count": 6, "tags": [], "creator": "George.Lindholm@ubc.ca", "text": "Then the documentation should be updated to reflect these \"restrictions\".\n\nTo me, based on what I read, it made perfect sense to do:\n\n<Context path=\"\" docBase=\"../myubc.war\">\n\nbut when I debug the code I see \"ROOT\" being compared against \"myubc\", and not\nbeing equal, ...\n\n\n   George", "id": 58151, "time": "2004-05-26T18:56:20Z", "bug_id": 27958, "creation_time": "2004-05-26T18:56:20Z", "is_private": false, "attachment_id": null}]