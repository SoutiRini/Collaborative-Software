[{"attachment_id": null, "tags": [], "creator": "larry.kriv@eds.com", "text": "Some work was done on our Windows 2000 servers to prepare them for the change \nin Daylight Savings Time dates for 2007.  After they had done that work, the \nAnt \"tstamp\" task began to return times in GMT, rather than CST (GMT-6).  So \nfar as I can tell, the server is still set to CST (running \"TIME\" from a \ncommand prompt returns the proper time and files save to disk show the proper \ncreate and modify timestamp in Windows Esplorer).  \n\nHow does \"tstamp\" get the time value that it returns?  Anything that you can \ntell me to assist our system administrators in figuring this our would be very \nmuch appreciated.\n\nLarry Kriv\nlarry.kriv@eds.com", "count": 0, "id": 97776, "time": "2007-01-08T08:18:02Z", "bug_id": 41317, "creation_time": "2007-01-08T08:18:02Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 41317, "text": "Ant does nothing special, it just uses the JVM.\nFor example:\n\nsrc/ShowTime.java:\n\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\npublic class ShowTime {\n    public static void main(String[] args) throws Exception {\n        SimpleDateFormat format = new SimpleDateFormat(\"yyyyMMdd HHmm\");\n        Date d = new Date();\n        System.out.println(\"The time is now: \" + format.format(d));\n    }\n}\n\nand build.xml\nproject>\n  <mkdir dir=\"classes\"/>\n  <javac srcdir=\"src\" destdir=\"classes\"\n         debug=\"yes\"/>\n  <java classname=\"ShowTime\" classpath=\"classes\"/>\n  <tstamp/>\n  <echo>The time is now: ${DSTAMP} ${TSTAMP}</echo>\n</project>\nShould give the same string.\nThe changes made to the server must have confused the JVM,\nso it started to use the default time zone - GMT.\n\nYou can tell the tstamp task to use a specific timezone\nby having a nested <format> element.\n\n  <tstamp>\n    <format property=\"TODAY_CST\" pattern=\"yyyyMMdd HHmm\" timezone=\"CST\"/>\n  </tstamp>\n  <echo>The time is now: ${TODAY_CST}</echo>\n\nBut this is not a general solution.\n", "id": 97777, "time": "2007-01-08T09:00:20Z", "creator": "peterreilly@apache.org", "creation_time": "2007-01-08T09:00:20Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 41317, "text": "yes, if the jvm is 7/8 hours out, then your box is messed up. Having ant wrong\nis the least of your systems, as the box is going to make a mess of whatever\nnetwork filesystem it gets attached.\n\nCheck the date/time dialog in the control panel, make sure the TZ is right\nthere. If it is, attach an ant -diagnostics trace. If you install Ant1.7 it\nactually looks at clock drift between system clock and the timestamp of created\nfiles, which is something you need to test for by the sound fo things,\n\n", "id": 97778, "time": "2007-01-08T09:14:28Z", "creator": "stevel@apache.org", "creation_time": "2007-01-08T09:14:28Z", "is_private": false, "attachment_id": null}, {"attachment_id": 19374, "tags": [], "creator": "larry.kriv@eds.com", "text": "Created attachment 19374\nant -diagnostics log from tstamp test\n\nThis is the diagnostics log that you requested.  I noticed that it lists\nuser.timezone = GMT, yet going to control panel date/time shows the system at\nGMT-6 (Central Time).", "count": 3, "id": 97785, "time": "2007-01-08T12:00:13Z", "bug_id": 41317, "creation_time": "2007-01-08T12:00:13Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 41317, "text": "Well, there is your underlying problem. The JVM is in the wrong timezone. \n\nI have no idea how Java picks up its timezone information on windows; it is\nprobably some low level win32 API call like ::GetTimeZoneInformation()\n( http://msdn2.microsoft.com/en-gb/library/ms724421.aspx ) \n\nIf that is the case, TZ info is picked up from the OS. Reboot, and try logging\nas someone else to see if either action fixes the problem. \n\nThere isnt anything the ant team can do to fix this; its your system\nconfiguration that needs to be debugged. However, when you do find out how to\nfix it, please add a note explaning what you did so that other people with the\nsame problem can find the solution.\n\n-steve", "id": 97809, "time": "2007-01-09T02:23:47Z", "creator": "stevel@apache.org", "creation_time": "2007-01-09T02:23:47Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 41317, "text": "Steve,\n\nThanks for the help!  I knew that this wasn't an Ant bug, but I needed to know \nhow Ant worked to be able to trace it down.  We now have the problem \nresolved.  \n\nOur SA went into Control Panel | Date/Time | Selected the Time Zone tab | And \nreselected (GMT -06:00) Central Time (US & Canada) | Clicked Apply | Clicked \nOK.  After that, everything was okay. \n\nIt was strange in that Date/Time showed the TZ as CT before through Control \nPanel.  I guess it needed assurances that we really, really wanted it to be \nCT.  Something for our SA's to be aware of in the future.\n\nThanks for all of your help!\n\nLarry", "id": 97835, "time": "2007-01-09T11:08:26Z", "creator": "larry.kriv@eds.com", "creation_time": "2007-01-09T11:08:26Z", "is_private": false, "attachment_id": null}]