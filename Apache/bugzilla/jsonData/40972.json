[{"count": 0, "text": "Different behaviour of the delete task in 1.6.5 and 1.7.0RC1. If the delete task \nshould delete more than one directory and at least one directory does not exist\nthen Ant 1.7.0RC1 will not delete any directory. The task will finished\nsuccesfully without any message. Ant 1.6.5 will delete all the directories as\nexpected.\n\nHere an example:\n\n<target name=\"demo\">\n   <delete quiet=\"true\" includeEmptyDirs=\"true\">\n      <fileset dir=\"dir_doesnot_exists\"/>\n   </delete>\n   \n   <delete quiet=\"true\" includeEmptyDirs=\"true\">\n      <fileset dir=\"dir_exists\"/>\n   </delete>\n   \n   <mkdir dir=\"dir_exists/blah\"/>\n   \n   <delete quiet=\"true\" includeEmptyDirs=\"true\">\n      <fileset dir=\"dir_exists\"/>\n      <fileset dir=\"dir_doesnot_exists\"/>\n   </delete>      \n   \n\n   <available file=\"dir_exists\" type=\"dir\" property=\"delete.dir.failed\"/>\n   <fail message=\"Failed to delete directory\" if=\"delete.dir.failed\"/>   \n   \n</target>", "creator": "tytios@googlemail.com", "attachment_id": null, "id": 95843, "time": "2006-11-14T14:26:39Z", "bug_id": 40972, "creation_time": "2006-11-14T14:26:39Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "jkf@apache.org", "is_private": false, "text": "In ant 1.7 several items were changed regarding fileset handling (now a\nresource). The fileset is verified if it is a filesystemresource only, in the\ncourse of action it now creates a directoryscanner on the nonexistent directory,\nand will fail because of that.\n\nI have modified the -debug option to get some more information for this\nsituation (although the way the change was made is generally applicable.)\n\n\n   [delete] D:\\data\\eclipseworkspace\\ant-trunk\\tst\\dir_doesnot_exists not found.\nD:\\data\\eclipseworkspace\\ant-trunk\\tst\\dir_doesnot_exists not found.\n        at org.apache.tools.ant.types.AbstractFileSet.getDirectoryScanner(Abstra\nctFileSet.java:422)\n        at org.apache.tools.ant.types.FileSet.size(FileSet.java:82)\n        at org.apache.tools.ant.types.resources.Resources$MyCollection.<init>(Re\nsources.java:74)\n        at org.apache.tools.ant.types.resources.Resources.validate(Resources.jav\na:229)\n        at org.apache.tools.ant.types.resources.Resources.isFilesystemOnly(Resou\nrces.java:162)\n        at org.apache.tools.ant.taskdefs.Delete.execute(Delete.java:583)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav\na:105)\n        at org.apache.tools.ant.Task.perform(Task.java:378)\n        at org.apache.tools.ant.Target.execute(Target.java:357)\n        at org.apache.tools.ant.Target.performTasks(Target.java:385)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1329)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1298)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExe\ncutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1181)\n        at org.apache.tools.ant.Main.runBuild(Main.java:698)\n        at org.apache.tools.ant.Main.startAnt(Main.java:199)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:298)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\n\nI am still searching for a good solution, but any suggestions are welcome,\nespecially regarding compatibility when suppressing the exception", "id": 96157, "time": "2006-11-24T12:39:45Z", "bug_id": 40972, "creation_time": "2006-11-24T12:39:45Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 40972, "attachment_id": null, "id": 96158, "time": "2006-11-24T14:03:53Z", "creator": "jkf@apache.org", "creation_time": "2006-11-24T14:03:53Z", "is_private": false, "text": "Bug fixed, added check if dir exists in the delete task before adding a fileset\nto the total resource collection."}]