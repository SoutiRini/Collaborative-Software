[{"count": 0, "attachment_id": null, "bug_id": 29834, "text": "There seems to be a difference between Apache 1.3 and 2.0 : they don't handle\nhtaccess files the same way. \n\nLet's say I have a site , protected with an authentification module (e.g\nmod_auth_pgsql)\nThe site is opened to eveyone, but some directories are dynamically group protected.\n\nIn this case, we have a httpd.conf with :\n\n                <Directory \"/var/www/html/mysite\">\n                        AuthName \"My Realm\"\n                        AuthType basic\n                        Auth_PG_host myhost.mydomain.org\n                        Auth_PG_port 5432\n                        Auth_PG_database users\n                        Auth_PG_encrypted off\n                        Auth_PG_user admin\n                        Auth_PG_pwd admin\n                         Auth_PG_pwd_table users\n                        Auth_PG_uid_field iduser\n                        Auth_PG_pwd_field passwd\n                        Auth_PG_grp_table group\n                        Auth_PG_grp_user_field iduser\n                        Auth_PG_grp_group_field group\n                        AllowOverride All\n               </Directory>\n\nand a .htaccess file in /var/www/html/mysite/secretdir that requires a\nparticular group\n\n             Require group secret\n\nThis works perfectly in both versions (1.3 and 2.0) with both mod_auth_pgsql\nadapted modules. All files within secretdir are protected.\n\nThe problem appears you're asking Apache to serve  JSP files, which are handled\nby  Tomcat through a mod_jk or mod_jk2 connector.\n\n- in Apache 1.3, the jsp files are protected like htm files : the .htaccess\ndirectives are taken into acount BEFORE tomcat handles jsp files\n- in Apache 2.0, the jsp is handled by tomcat WITHOUT looking to .htaccess (they\nare visible by everyone and I can't getRemoteUser - returns null)\n\nI tried to change the \"modules loading order\" without success.\nI have the same difference with mod_jk and mod_jk2, and with several\nAuthentification Types.\nApache 2.0 works if the REQUIRE directive is set in httpd.conf, but this is not\ndynamical and therefore doesn't fit  my needs.\n\nI wonder if there is a magic trick to force Apache 2.0 to handle mod_jk like\nApache 1.3 does.\n\nConfiguration : (Apache 2.0.49 / Apache 1.3.27 + mod_jk / mod jk2 and tomcat 4.1.29)\n\nThanks for reading\n\nAlexis", "id": 59964, "time": "2004-06-28T06:04:11Z", "creator": "alexis@bookmark.fr", "creation_time": "2004-06-28T06:04:11Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 29834, "text": "isn't this a bug in mod_jk2's implmentation?", "id": 62693, "time": "2004-08-30T03:13:33Z", "creator": "chip@force-elite.com", "creation_time": "2004-08-30T03:13:33Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 29834, "text": "No, I don't think so, because I tried with mod_jk2 + apache 1.3 and it works.\nUsing apache 2.0. , I can't protect my jsp files with .htaccess.", "id": 62716, "time": "2004-08-30T05:33:45Z", "creator": "alexis@bookmark.fr", "creation_time": "2004-08-30T05:33:45Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "nd@perlig.de", "text": "iirc mod_jk2 works different in apache 2 (hooks very early). please try asking\nthe maintainers.", "id": 62733, "time": "2004-08-30T07:22:31Z", "bug_id": 29834, "creation_time": "2004-08-30T07:22:31Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 29834, "attachment_id": null, "id": 63329, "time": "2004-09-10T07:00:33Z", "creator": "alexis@bookmark.fr", "creation_time": "2004-09-10T07:00:33Z", "is_private": false, "text": "I found a similar bug in mod_jk bug database.\n\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=25055\n\nSame symptoms, but I went deeper in the diagnosis (many configurations tried :\nApache 1.3 / 2,  mod_jk / mod_jk2, directives in htaccess / httpd.conf )\n\nI can't go any further, and the problem might lay\n- in the mod_jk/mod_jk2 implementation for Apache 2\n- or the Apache 2 API ? \n\nThis is a SECURITY issue : does anyone know about this ?\nI can do other tests if necessary.\n\n"}, {"count": 5, "tags": [], "text": "htaccess file handling did not change, but the connector module hooks.", "is_private": false, "id": 63634, "creator": "nd@perlig.de", "time": "2004-09-15T21:29:27Z", "bug_id": 29834, "creation_time": "2004-09-15T21:29:27Z", "attachment_id": null}]