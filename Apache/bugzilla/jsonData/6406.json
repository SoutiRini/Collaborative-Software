[{"count": 0, "tags": [], "creator": "ttps@pacbell.net", "text": "All classes in $CATALINA_HOME/classes become invisible when the Oracle 8.1.7 \nJDBC driver classes are added to this shared class loader directory.\n\nThis was NOT a problem before j2sdk1.4.0-rc.\n\nThe Oracle 8.1.7 JDBC driver comes from Oracle packaged in two zip files: \nclasses12.zip and nls_charset12.zip. When these files are unpacked, two \ndirectories result: oracle and javax. If these two directories are placed \nin /WEB-INF/classes, everything works fine. However, if these directories are \ninstead placed in $CATALINA_HOME/classes, then all the classes in the \n$CATALINA_HOME/classes directory become invisible and the directory itself \ndisappears from the classpath. (i.e., The application context attribute named \norg.apache.catalina.jsp_classpath no longer includes a reference to \n$CATALINA_HOME/classes.) \n\nIt turns out that the javax directory is the key to this problem. If I delete \nthis directory from $CATALINA_HOME/classes, everything works fine again. \nLuckily, the same classes that Oracle provides in this directory (javax.sql.*) \nare part of the 1.4 JRE. Nevertheless, this is a nasty problem. The workaround \nnext time will unlikely be so easy.\n\nThis problem is very easy to duplicate in both the FULL and the LE version of \nTomcat 4.0.2.\n\nNote: Similar errant results occur when the two Oracle zip files are renamed to \njar\u2019s and then placed in the $CATALINA_HOME/lib directory. In this case, \nhowever, it seems that only the classes in classes12.jar become invisible, \nalthough this was not tested.", "id": 10601, "time": "2002-02-12T21:18:04Z", "bug_id": 6406, "creation_time": "2002-02-12T21:18:04Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "remm@apache.org", "is_private": false, "id": 10603, "time": "2002-02-12T22:31:37Z", "bug_id": 6406, "creation_time": "2002-02-12T22:31:37Z", "tags": [], "text": "You are currently not allowed to put libraries which exist in the primordial\nclassloader there. That's a \"feature\" of the classloader factory, which is not\nuseful anymore (the only delegation workarounds needed are for the webapp\nclassloader). It will be refactored eventually, but the workaround in the\nmeantime is simple."}, {"count": 2, "tags": [], "bug_id": 6406, "attachment_id": null, "text": "Regarding comments from Remy Maucherat: Are you saying that this \"feature\" will \nignore (i.e., delete from the classpath) any directory that contains classes \nthat are also found in j2sdk1.4.0-rc\\jre\\lib\\rt.jar?\n\nBy default, xerces.jar is installed in $CATALINA_HOME/common/lib. This jar file \ncontains the classes javax.xml.parsers.*, org.xml.sax.*, and org.w3c.dom.*, all \nof which overlap with classes found in j2sdk1.4.0-rc\\jre\\lib\\rt.jar. Why is \nthis not a problem? Shouldn't the \"feature\" cause $CATALINA_HOME/common/lib to \nbecome invisible? \n", "id": 10654, "time": "2002-02-13T18:24:38Z", "creator": "ttps@pacbell.net", "creation_time": "2002-02-13T18:24:38Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 6406, "text": "It's not a problem *either*. The exclusion occuring on the shared CL is a bug \nand will be fixed.\n\nAlso, the exclusion works repository by repository. Each JAR is a separate \nrepository (as /classes is), so only one JAR would get excluded, not all of \nthem.", "id": 10655, "time": "2002-02-13T18:33:25Z", "creator": "remm@apache.org", "creation_time": "2002-02-13T18:33:25Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 6406, "attachment_id": null, "text": "Fixed in the HEAD branch (nightly for 02/14 will have the fix). The fix will be\nported to the 4.0 branch.", "id": 10661, "time": "2002-02-13T20:29:42Z", "creator": "remm@apache.org", "creation_time": "2002-02-13T20:29:42Z", "is_private": false}, {"count": 5, "attachment_id": null, "creator": "remm@apache.org", "text": "*** Bug 7558 has been marked as a duplicate of this bug. ***", "id": 14366, "time": "2002-04-22T20:52:21Z", "bug_id": 6406, "creation_time": "2002-04-22T20:52:21Z", "tags": [], "is_private": false}]