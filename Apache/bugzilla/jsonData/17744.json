[{"count": 0, "tags": [], "bug_id": 17744, "attachment_id": null, "id": 32605, "time": "2003-03-06T21:39:05Z", "creator": "Richard.June@hp.com", "creation_time": "2003-03-06T21:39:05Z", "is_private": false, "text": "When the admin webapp isn't rooted under \"/admin\", a number of links don't work\nbecause they are hardcoded as \"/admin/rest_of_link\".  The \"/admin\" part should\nbe removed from these URLs to make them relative.  Note that the admin webapp\nnot being rooted under \"/admin\" is a pretty common need, like when Tomcat is\naccessed through a web server and having the Tomcat administration utility\nhanging off \"/admin\" beneath the web server root doesn't make sense.\n\nNote also that bug 10057 reports one of the problems detailed below.\n\nDiffs for the following files are attached below:\n\norg/apache/webapp/admin/connector/AddConnectorAction.java\norg/apache/webapp/admin/logger/AddLoggerAction.java\norg/apache/webapp/admin/realm/AddRealmAction.java\norg/apache/webapp/admin/valve/AddValveAction.java\nwebapps/admin/banner.jsp\n\n*** AddConnectorAction.java.orig\tThu Mar  6 16:04:45 2003\n--- AddConnectorAction.java\tThu Mar  6 16:05:33 2003\n***************\n*** 174,185 ****\n          ArrayList types = new ArrayList();    \n          // the first element in the select list should be the type selected\n          types.add(new LabelValueBean(type,\n!                 \"/admin/AddConnector.do?serviceName=\" +\nURLEncoder.encode(serviceName) \n                  + \"&type=\" + type));        \n           for (int i=0; i< schemeTypes.length; i++) {\n              if (!type.equalsIgnoreCase(schemeTypes[i])) {\n                  types.add(new LabelValueBean(schemeTypes[i],\n!                 \"/admin/AddConnector.do?serviceName=\" +\nURLEncoder.encode(serviceName)\n                  + \"&type=\" + schemeTypes[i]));        \n              }\n          }\n--- 174,185 ----\n          ArrayList types = new ArrayList();    \n          // the first element in the select list should be the type selected\n          types.add(new LabelValueBean(type,\n!                 \"AddConnector.do?serviceName=\" + URLEncoder.encode(serviceName) \n                  + \"&type=\" + type));        \n           for (int i=0; i< schemeTypes.length; i++) {\n              if (!type.equalsIgnoreCase(schemeTypes[i])) {\n                  types.add(new LabelValueBean(schemeTypes[i],\n!                 \"AddConnector.do?serviceName=\" + URLEncoder.encode(serviceName)\n                  + \"&type=\" + schemeTypes[i]));        \n              }\n          }\n\n*** AddLoggerAction.java.orig\tThu Mar  6 16:05:55 2003\n--- AddLoggerAction.java\tThu Mar  6 16:06:23 2003\n***************\n*** 147,158 ****\n          ArrayList types = new ArrayList();    \n          // the first element in the select list should be the type selected\n          types.add(new LabelValueBean(type,\n!                 \"/admin/AddLogger.do?parent=\" + URLEncoder.encode(parent) \n                  + \"&type=\" + type));        \n          for (int i=0; i< loggerTypes.length; i++) {\n              if (!type.equalsIgnoreCase(loggerTypes[i])) {\n                  types.add(new LabelValueBean(loggerTypes[i],\n!                 \"/admin/AddLogger.do?parent=\" + URLEncoder.encode(parent) \n                  + \"&type=\" + loggerTypes[i]));        \n              }\n          }\n--- 147,158 ----\n          ArrayList types = new ArrayList();    \n          // the first element in the select list should be the type selected\n          types.add(new LabelValueBean(type,\n!                 \"AddLogger.do?parent=\" + URLEncoder.encode(parent) \n                  + \"&type=\" + type));        \n          for (int i=0; i< loggerTypes.length; i++) {\n              if (!type.equalsIgnoreCase(loggerTypes[i])) {\n                  types.add(new LabelValueBean(loggerTypes[i],\n!                 \"AddLogger.do?parent=\" + URLEncoder.encode(parent) \n                  + \"&type=\" + loggerTypes[i]));        \n              }\n          }\n\n*** AddRealmAction.java.orig\tThu Feb 27 15:35:15 2003\n--- AddRealmAction.java\tThu Feb 27 15:36:20 2003\n***************\n*** 142,153 ****\n          types = new ArrayList();\n          // the first element in the select list should be the type selected\n          types.add(new LabelValueBean(type,\n!                 \"/admin/AddRealm.do?parent=\" + URLEncoder.encode(parent)\n                  + \"&type=\" + type));\n          for (int i=0; i< realmTypes.length; i++) {\n              if (!type.equalsIgnoreCase(realmTypes[i])) {\n                  types.add(new LabelValueBean(realmTypes[i],\n!                 \"/admin/AddRealm.do?parent=\" + URLEncoder.encode(parent)\n                  + \"&type=\" + realmTypes[i]));\n              }\n          }\n--- 142,153 ----\n          types = new ArrayList();\n          // the first element in the select list should be the type selected\n          types.add(new LabelValueBean(type,\n!                 \"AddRealm.do?parent=\" + URLEncoder.encode(parent)\n                  + \"&type=\" + type));\n          for (int i=0; i< realmTypes.length; i++) {\n              if (!type.equalsIgnoreCase(realmTypes[i])) {\n                  types.add(new LabelValueBean(realmTypes[i],\n!                 \"AddRealm.do?parent=\" + URLEncoder.encode(parent)\n                  + \"&type=\" + realmTypes[i]));\n              }\n          }\n\n*** AddValveAction.java.orig\tThu Mar  6 16:06:55 2003\n--- AddValveAction.java\tThu Mar  6 16:07:12 2003\n***************\n*** 142,153 ****\n          types = new ArrayList();    \n          // the first element in the select list should be the type selected\n          types.add(new LabelValueBean(type,\n!                 \"/admin/AddValve.do?parent=\" + URLEncoder.encode(parent) \n                  + \"&type=\" + type));        \n          for (int i=0; i< valveTypes.length; i++) {\n              if (!type.equalsIgnoreCase(valveTypes[i])) {\n                  types.add(new LabelValueBean(valveTypes[i],\n!                 \"/admin/AddValve.do?parent=\" + URLEncoder.encode(parent) \n                  + \"&type=\" + valveTypes[i]));        \n              }\n          }\n--- 142,153 ----\n          types = new ArrayList();    \n          // the first element in the select list should be the type selected\n          types.add(new LabelValueBean(type,\n!                 \"AddValve.do?parent=\" + URLEncoder.encode(parent) \n                  + \"&type=\" + type));        \n          for (int i=0; i< valveTypes.length; i++) {\n              if (!type.equalsIgnoreCase(valveTypes[i])) {\n                  types.add(new LabelValueBean(valveTypes[i],\n!                 \"AddValve.do?parent=\" + URLEncoder.encode(parent) \n                  + \"&type=\" + valveTypes[i]));        \n              }\n          }\n\n*** banner.jsp.orig\tThu Mar  6 16:10:18 2003\n--- banner.jsp\tThu Mar  6 16:15:58 2003\n***************\n*** 20,26 ****\n        <td align=\"left\" valign=\"middle\">\n          <div class=\"masthead-title-text\" align=\"left\"><img\nsrc=\"images/TomcatBanner.jpg\" height=\"120\"></div>\n        </td>\n!       <form method='post' action='/admin/commitChanges.do' target='_self'>\n        <td align=\"right\" valign=\"middle\">\n          <html:submit>\n            <bean:message key=\"button.commit\"/>\n--- 20,26 ----\n        <td align=\"left\" valign=\"middle\">\n          <div class=\"masthead-title-text\" align=\"left\"><img\nsrc=\"images/TomcatBanner.jpg\" height=\"120\"></div>\n        </td>\n!       <form method='post' action='commitChanges.do' target='_self'>\n        <td align=\"right\" valign=\"middle\">\n          <html:submit>\n            <bean:message key=\"button.commit\"/>\n***************\n*** 30,36 ****\n        <td width=\"1%\">\n          <div class=\"table-normal-text\" align=\"left\">&nbsp </div>\n        </td>\n!     <form method='post' action='/admin/logOut.do' target='_top'>\n        <td align=\"right\" valign=\"middle\">\n          <html:submit>\n            <bean:message key=\"button.logout\"/>\n--- 30,36 ----\n        <td width=\"1%\">\n          <div class=\"table-normal-text\" align=\"left\">&nbsp </div>\n        </td>\n!     <form method='post' action='logOut.do' target='_top'>\n        <td align=\"right\" valign=\"middle\">\n          <html:submit>\n            <bean:message key=\"button.logout\"/>"}, {"count": 1, "tags": [], "bug_id": 17744, "attachment_id": null, "id": 33202, "creation_time": "2003-03-14T17:46:56Z", "time": "2003-03-14T17:46:56Z", "creator": "amyroh@apache.org", "text": "*** Bug 10057 has been marked as a duplicate of this bug. ***", "is_private": false}, {"count": 2, "tags": [], "creator": "amyroh@apache.org", "attachment_id": null, "id": 33203, "time": "2003-03-14T17:56:39Z", "bug_id": 17744, "creation_time": "2003-03-14T17:56:39Z", "is_private": false, "text": "Thanks for the patch.  It's fixed and should be available in the next release \n4.1.23."}]