[{"count": 0, "tags": [], "creator": "rourke@virtualtek.co.kr", "attachment_id": null, "id": 20239, "time": "2002-07-26T08:40:09Z", "bug_id": 11198, "creation_time": "2002-07-26T08:40:09Z", "is_private": false, "text": "----------------- Original Bug Report-------------------\n\ncategory : tomcat\nrelease : jwsdp-1.0fcs\nsubcategory : other\ntype : bug\nsynopsis : ResourceBundle.getBundle could not find property file in tomcat \nclasspath\ndescription : FULL PRODUCT VERSION :\njava version \"1.4.0\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.0-b92)\nJava HotSpot(TM) Client VM (build 1.4.0-b92, mixed mode)\n\n\nFULL OPERATING SYSTEM VERSION :\n\nRedhat Linux 6.1\n\nADDITIONAL OPERATING SYSTEMS :\n\nJakarta-tomcat 4.0.3\n\n\n\n\n\nA DESCRIPTION OF THE PROBLEM :\nFYI,\n\nwith jdk1.3\n\nclassloader sun.misc.Launcher$AppClassLoader\ncould not loading SimpleResourceFilter (and that seems to\nbe right behavior)\n\nbut\nwith jdk1.4.0,\nsun.misc.Launcher$AppClassLoader loaded\nSimpleResourceFilter.\nafter that, it could not find properties file.\n\nREGRESSION.  Last worked in version 1.3.1\n\nSTEPS TO FOLLOW TO REPRODUCE THE PROBLEM :\n1. call ResourceBundle.getBundle(\"testprop\") from\nSimpleResourceFilter\nthat package locates at tomcat/common/lib(not app/WEB-\nINF/lib)\nand testprop.properties locates at tomcat/common/classes.\n\n2. configure web.xml so that request invokes\nSimpleResourceFilter\n\n3.\n3. with jdk1.3.1 itworks okay\nwith jdk1.4.0 or above, it returns MissingResourceException\n\n\nEXPECTED VERSUS ACTUAL BEHAVIOR :\nexpected : it should find xxx.properties properly\n\nactual result : returns MissingResourceException\n\n\nERROR MESSAGES/STACK TRACES THAT OCCUR :\njava.util.MissingResourceException: Can't find bundle for base name vms-system,\nlocale ko_KR\n    at java.util.ResourceBundle.throwMissingResourceException\n(ResourceBundle.java:804)\n    at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:773)\n    at java.util.ResourceBundle.getBundle(ResourceBundle.java:511)\n    at com.vtek.vms.filter.TranslateFilter.testLoading(TranslateFilter.java:49)\n    at com.vtek.vms.filter.TranslateFilter.init(TranslateFilter.java:194)\n    at org.apache.catalina.core.ApplicationFilterConfig.getFilter\n(ApplicationFilterConfig.java:254)\n    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef\n(ApplicationFilterConfig.java:31\n    at org.apache.catalina.core.ApplicationFilterConfig.<init>\n(ApplicationFilterConfig.java:120)\n    at org.apache.catalina.core.StandardContext.filterStart\n(StandardContext.java:3064)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3382)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:785)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:454)\n    at org.apache.catalina.core.StandardHost.install(StandardHost.java:714)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:300)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:389)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent\n(HostConfig.java:232)\n    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent\n(LifecycleSupport.java:155)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1131)\n    at org.apache.catalina.core.StandardHost.start(StandardHost.java:614)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:343)\n    at org.apache.catalina.core.StandardService.start(StandardService.java:388)\n    at org.apache.catalina.core.StandardServer.start(StandardServer.java:506)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:781)\n    at org.apache.catalina.startup.Catalina.execute(Catalina.java:681)\n    at org.apache.catalina.startup.Catalina.process(Catalina.java:179)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:324)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:243)\n\n\nREPRODUCIBILITY :\nThis bug can be reproduced always.\n\n---------- BEGIN SOURCE ----------\ntestprop.properties (locates at common/classes)\n\nprop.value=teststring\n\n\nweb.xml (application configure)\n\nweb.xml configuration for invoking SimpleResourceFilter when requested.\n\n<web-app>\n    <filter>\n        <filter-name>SimpleResourceFilter</filter-name>\n        <filter-class>com.vtek.vms.filter.SimpleResourceFilter</filter-class>\n    </filter>\n\n    <filter-mapping>\n        <filter-name>SimpleResourceFilter</filter-name>\n        <servlet-name>action</servlet-name>\n    </filter-mapping>\n\n    <servlet>\n        <servlet-name>action</servlet-name>\n        <servlet-class>com.vtek.vms.servlet.VMSMainServlet</servlet-class>\n        <init-param>\n            <param-name>application</param-name>\n            <param-value>TestAppMessageResource</param-value>\n        </init-param>\n        <init-param>\n            <param-name>debug</param-name>\n            <param-value>4</param-value>\n        </init-param>\n    </servlet>\n    <servlet-mapping>\n        <servlet-name>action</servlet-name>\n        <url-pattern>*.do</url-pattern>\n    </servlet-mapping>\n</web-app>\n\n\nto reproduce this bug,\n\nSimpleResourceFilter.java (this package should be located at common/lib NOT app-\ndir/WEB-INF/lib\n-\n\npackage com.vtek.vms.filter;\n\nimport java.io.*;\nimport javax.servlet.*;\nimport javax.servlet.http.*;\n\nimport java.util.ResourceBundle;\n\npublic class SimpleResourceFilter implements Filter {\n\n    public void testLoading() {\n\n        try {\n            ResourceBundle resourceBundle = ResourceBundle.getBundle\n(\"testprop\");\n            String propValue = resourceBundle.getString(\"prop.value\");\n            System.out.println(\"testLoading prop.value:\" + propValue);\n        } catch (Exception e) {\n            System.out.println(\"error reading testprop\");\n            e.printStackTrace();\n        }\n    }\n\n    public void doFilter(ServletRequest request, ServletResponse response,\nFilterChain chain)\n        throws IOException, ServletException {\n\n        testLoading();\n    }\n\n    public void init(FilterConfig filterConfig) {\n\n    }\n\n    public void destroy() {\n\n    }\n}\n\n---------- END SOURCE ----------\nworkaround : \nsuggested_val : \ncust_name : Hyuntae Kim\ncust_email : rourke@virtualtek.co.kr\njdcid : rourkez\nkeyword : webbug\ncompany : VirtualTek\nhardware : x86\nOSversion : Linux\nbugtraqID : 0\ndateCreated : 2002-07-18 04:09:40.3\ndateEvaluated : 2002-07-25 12:00:48.342"}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "Support for the WSPACK is provided by Sun. The standard Tomcat should work fine\nin that case.", "id": 20240, "time": "2002-07-26T08:45:30Z", "bug_id": 11198, "creation_time": "2002-07-26T08:45:30Z", "is_private": false, "attachment_id": null}]