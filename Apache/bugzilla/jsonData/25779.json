[{"count": 0, "tags": [], "text": "I ran into this under OpenBSD 3.4 on a Sun Ultra I; however, it appears to\naffect other configurations including x86.\n\nThe code within `mod_proxy' that parses numeric IP addresses is nonportable; by\nmy reading, it works only on 32-bit, big-endian systems.  It definitely doesn't\nwork on the 64-bit big-endian system I am using.  Here is a patch that fixes the\nproblem for me:\n\n<pre>\n*** mod_proxy.h.orig\t2003-08-21 06:11:36.000000000 -0700\n--- mod_proxy.h\t2003-12-27 20:30:29.000000000 -0800\n***************\n*** 256,262 ****\n  \n  struct per_thread_data {\n      struct hostent hpbuf;\n!     u_long ipaddr;\n      char *charpbuf[2];\n  };\n  /* Function prototypes */\n--- 256,262 ----\n  \n  struct per_thread_data {\n      struct hostent hpbuf;\n!     struct in_addr ipaddr;\n      char *charpbuf[2];\n  };\n  /* Function prototypes */\n*** proxy_util.c.orig\t2003-08-21 06:11:36.000000000 -0700\n--- proxy_util.c\t2003-12-27 20:30:30.000000000 -0800\n***************\n*** 999,1005 ****\n              return \"Host not found\";\n      }\n      else {\n!         ptd->ipaddr = ap_inet_addr(host);\n          hp = gethostbyaddr((char *)&ptd->ipaddr, sizeof(ptd->ipaddr), AF_INET);\n          if (hp == NULL) {\n              memset(&ptd->hpbuf, 0, sizeof(ptd->hpbuf));\n--- 999,1005 ----\n              return \"Host not found\";\n      }\n      else {\n! \tif (inet_aton(host, &ptd->ipaddr) == 0) return \"Invalid numeric address\";\n          hp = gethostbyaddr((char *)&ptd->ipaddr, sizeof(ptd->ipaddr), AF_INET);\n          if (hp == NULL) {\n              memset(&ptd->hpbuf, 0, sizeof(ptd->hpbuf));\n</pre>", "is_private": false, "bug_id": 25779, "id": 49760, "time": "2003-12-28T05:39:13Z", "creator": "Gyro@zeta-soft.com", "creation_time": "2003-12-28T05:39:13Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 25779, "attachment_id": null, "is_private": false, "id": 49762, "time": "2003-12-28T11:56:21Z", "creator": "mads@apache.org", "creation_time": "2003-12-28T11:56:21Z", "text": "http://httpd.apache.org/dev/patches.html - diff -u "}, {"count": 2, "tags": [], "text": "*** Bug 22586 has been marked as a duplicate of this bug. ***", "is_private": false, "bug_id": 25779, "id": 65586, "time": "2004-10-23T12:05:51Z", "creator": "jorton@redhat.com", "creation_time": "2004-10-23T12:05:51Z", "attachment_id": null}]