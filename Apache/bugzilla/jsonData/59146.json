[{"count": 0, "tags": [], "bug_id": 59146, "attachment_id": null, "id": 189272, "time": "2016-03-08T16:24:47Z", "creator": "support@ubikloadpack.com", "creation_time": "2016-03-08T16:24:47Z", "is_private": false, "text": "Hello,\nMeasuringConnectionManager is not ThreadSafe as it has 2 fields:\n    private MeasuringConnectionRequest measuredConnection;\n    private SampleResult sample;\n\n\nWhen parallel download is used, this will lead to corruption of those 2 fields.\n\nIndeed :\nsetSample() will be called at nearly the same time and the field will be corrupt.\n\nOur tests of this feature show the occurence of exceptions on Parallel download:\n1457430068509,5,sessionExample3,200,\"Embedded resource download error:http://localhost:8080/examples/servlets/images/return.gif code:Non HTTP response code: java.lang.IllegalStateException message:Non HTTP response message: java.lang.IllegalStateException: Connection is already open\n        at org.apache.http.util.Asserts.check(Asserts.java:34)\n        at org.apache.http.impl.SocketHttpClientConnection.assertNotOpen(SocketHttpClientConnection.java:70)\n        at org.apache.http.impl.conn.DefaultClientConnection.openCompleted(DefaultClientConnection.java:142)\n        at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:185)\n        at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:328)\n        at org.apache.jmeter.protocol.http.sampler.MeasuringConnectionManager$MeasuredConnection.open(MeasuringConnectionManager.java:122)\n        at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:612)\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:447)\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:884)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\n        at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.executeRequest(HTTPHC4Impl.java:558)\n        at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:318)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:74)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase$ASyncSample.call(HTTPSamplerBase.java:1950)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase$ASyncSample.call(HTTPSamplerBase.java:1918)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n        at java.lang.Thread.run(Thread.java:745)\n\n\n1457430242104,12,sessionExample3,Non HTTP response code: java.lang.ArrayIndexOutOfBoundsException,\"Non HTTP response message: java.lang.ArrayIndexOutOfBoundsException\n        at java.net.SocketInputStream.read(SocketInputStream.java:162)\n        at java.net.SocketInputStream.read(SocketInputStream.java:141)\n        at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:160)\n        at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:84)\n        at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:273)\n        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)\n        at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)\n        at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:261)\n        at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:283)\n        at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:259)\n        at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:209)\n        at org.apache.jmeter.protocol.http.sampler.MeasuringConnectionManager$MeasuredConnection.receiveResponseHeader(MeasuringConnectionManager.java:218)\n        at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:272)\n        at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:124)\n        at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:686)\n        at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:488)\n        at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:884)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\n        at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.executeRequest(HTTPHC4Impl.java:558)\n        at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:318)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:74)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1149)\n        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1138)\n        at org.apache.jmeter.threads.JMeterThread.executeSamplePackage(JMeterThread.java:464)\n        at org.apache.jmeter.threads.JMeterThread.processSampler(JMeterThread.java:409)\n        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:240)\n        at java.lang.Thread.run(Thread.java:745)"}, {"count": 1, "tags": [], "bug_id": 59146, "text": "Author: pmouawad\nDate: Tue Mar  8 20:50:34 2016\nNew Revision: 1734154\n\nURL: http://svn.apache.org/viewvc?rev=1734154&view=rev\nLog:\nBug 59146 - MeasuringConnectionManager is not Thread Safe (nightly before 3.0)\nBugzilla Id: 59146\n\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/MeasuringConnectionManager.java\n    jmeter/trunk/xdocs/changes.xml", "id": 189278, "time": "2016-03-08T20:51:09Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-03-08T20:51:09Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 59146, "attachment_id": null, "is_private": false, "id": 189572, "time": "2016-03-18T09:35:53Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2016-03-18T09:35:53Z", "text": "Date: Fri Mar 18 09:28:58 2016\nNew Revision: 1735561\n\nURL: http://svn.apache.org/viewvc?rev=1735561&view=rev\nLog:\nFollowup to 1734154. No need for temporary variable. Return new instance directly.\n\nBugzilla Id: 59146\n\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/MeasuringConnectionManager.java"}]