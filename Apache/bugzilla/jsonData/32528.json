[{"count": 0, "tags": [], "text": "I intend to use the file below to create a small book in which the pages are\ndefined as SVG files.  The FO is intended to provide titles, page numbers, and\nbundle things nicely so it can be displayed as a PDF.  Unfortunately, the values\nI use for the width and height of <fo:instream-foreign-object> and <svg> seem to\nbe ignored.  When I transform the below document, there are large gaps both\nabove and below the image.  \n\nWith the current settings, the svg content ought to obscure the header and\nfooter.  However, the entire SVG has been squashed and leaves large gaps above\nand below the image content.  Could someone look at this and tell me if this is\nan error in my coding or if it's a bug?\n\nThanks,\n\nMark McKay\n\n-------\n\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\n<fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\nxmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\nxmlns:svg=\"http://www.w3.org/2000/svg\">\n\n\t<!-- A typical printed page with  -->\n\t<fo:layout-master-set>\n\t\t<fo:simple-page-master \n\t\t\tmaster-name=\"A4\" page-width=\"210mm\" page-height=\"297mm\"\n\t\t\tmargin-top=\"1cm\"   margin-bottom=\"1cm\"\n\t\t\tmargin-left=\"1cm\"  margin-right=\"1cm\">\n\n\t\t\t<fo:region-body   margin=\"0cm\"/>\n\t\t\t\n\t\t\t<!-- 2cm gutters on all sides-->\n\t\t\t<fo:region-before extent=\"1cm\"/>\n\t\t\t<fo:region-after  extent=\"1cm\"/>\n\t\t\t<fo:region-start  extent=\"1cm\"/>\n\t\t\t<fo:region-end    extent=\"1cm\"/>\n\t\t</fo:simple-page-master>\n\t</fo:layout-master-set>\n\n\n<!-- Content pages -->\n\n\t<fo:page-sequence master-reference=\"A4\">\n\n\t\t<fo:static-content flow-name=\"xsl-region-before\">\n\t\t\t<fo:block text-align-last=\"justify\"><fo:inline font-style=\"italic\">Puzzle\nCorner</fo:inline><fo:leader/><fo:inline\nfont-style=\"italic\">http://www.kitfox.com/puzzlecorner</fo:inline></fo:block>\n\t\t</fo:static-content>\n\n\t\t<fo:static-content flow-name=\"xsl-region-after\">\n\t\t\t<fo:block text-align=\"center\"><fo:page-number/></fo:block>\n\t\t</fo:static-content>\n\n\t\t<fo:flow flow-name=\"xsl-region-body\">\n\t\t\t<!--fo:block text-align=\"center\"-->\n\t\t\t\n\t\t\t<fo:block>\n\t\t\t\t<fo:instream-foreign-object width=\"190mm\" height=\"277mm\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"190mm\" height=\"277mm\" viewBox=\"0\n0 10 10\">\n    <rect x=\"0\" y=\"0\" width=\"10\" height=\"10\" fill=\"green\" stroke=\"black\"\nstroke-width=\"1\"/>\n</svg>\n\t\t\t\t</fo:instream-foreign-object>\n\t\t\t</fo:block>\n\t\t\t\n\t\t\t<fo:block>\n\t\t\t\t<fo:instream-foreign-object width=\"190mm\" height=\"277mm\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"190mm\" height=\"277mm\" viewBox=\"0\n0 10 10\">\n    <rect x=\"0\" y=\"0\" width=\"10\" height=\"10\" fill=\"blue\" stroke=\"black\"\nstroke-width=\"1\"/>\n</svg>\n\t\t\t\t</fo:instream-foreign-object>\n\t\t\t</fo:block>\n\t\t\t\n\t\t\t<fo:block>\n\t\t\t\t<fo:instream-foreign-object width=\"190mm\" height=\"277mm\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"190mm\" height=\"277mm\" viewBox=\"0\n0 10 10\">\n    <rect x=\"0\" y=\"0\" width=\"10\" height=\"10\" fill=\"red\" stroke=\"black\"\nstroke-width=\"1\"/>\n</svg>\n\t\t\t\t</fo:instream-foreign-object>\n\t\t\t</fo:block>\n\t\t\t\n\t\t</fo:flow>\n\t\t\n\n\t</fo:page-sequence>\n\n</fo:root>", "is_private": false, "bug_id": 32528, "id": 67917, "time": "2004-12-04T03:46:58Z", "creator": "mark@kitfox.com", "creation_time": "2004-12-04T03:46:58Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "mark@kitfox.com", "is_private": false, "id": 67918, "attachment_id": null, "bug_id": 32528, "creation_time": "2004-12-04T04:48:29Z", "time": "2004-12-04T04:48:29Z", "text": "It seems the bug is due to the vertical aspect of the svg's viewbox attribute\nnot being handled correctly.  \n\nThe document below demonstrates the problem more clearly.  The second rectangle\ndrawn here should extend outside of the viewport; however, it's vertical aspect\nis still within the view.\n\n\n------------\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\n<!-- Dimensions and margins of popular book formats: \nhttp://www.cafepress.com/cp/info/help/learn_book_layout.aspx -->\n\n<fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\"\nxmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\nxmlns:svg=\"http://www.w3.org/2000/svg\">\n\n\t<!-- A typical printed page with  -->\n\t<fo:layout-master-set>\n\t\t<fo:simple-page-master \n\t\t\tmaster-name=\"A4\" page-width=\"210mm\" page-height=\"297mm\"\n\t\t\tmargin-top=\"1cm\"   margin-bottom=\"1cm\"\n\t\t\tmargin-left=\"1cm\"  margin-right=\"1cm\">\n\n\t\t\t<!-- Main body inset 3cm from outer margin.  Provides 170x257mm content area -->\n\t\t\t<fo:region-body   margin=\"0cm\"/>\n\t\t\t\n\t\t\t<!-- 2cm gutters on all sides-->\n\t\t\t<fo:region-before extent=\"1cm\"/>\n\t\t\t<fo:region-after  extent=\"1cm\"/>\n\t\t\t<fo:region-start  extent=\"1cm\"/>\n\t\t\t<fo:region-end    extent=\"1cm\"/>\n\t\t</fo:simple-page-master>\n\t</fo:layout-master-set>\n\n\n<!-- Content pages -->\n\n\t<fo:page-sequence master-reference=\"A4\">\n\n\t\t<fo:static-content flow-name=\"xsl-region-before\">\n\t\t\t<fo:block text-align-last=\"justify\"><fo:inline font-style=\"italic\">Puzzle\nCorner</fo:inline><fo:leader/><fo:inline\nfont-style=\"italic\">http://www.kitfox.com/puzzlecorner</fo:inline></fo:block>\n\t\t</fo:static-content>\n\n\t\t<fo:static-content flow-name=\"xsl-region-after\">\n\t\t\t<fo:block text-align=\"center\"><fo:page-number/></fo:block>\n\t\t</fo:static-content>\n\n\t\t<fo:flow flow-name=\"xsl-region-body\">\n\t\t\t<!--fo:block text-align=\"center\"-->\n\t\t\n\t\t\n\t\t\t<fo:block>\n\t\t\t\t<fo:instream-foreign-object width=\"190mm\" height=\"277mm\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0\" y=\"0\" width=\"190mm\" height=\"277mm\">\n    <rect x=\"0\" y=\"0\" width=\"190mm\" height=\"277mm\" fill=\"green\" stroke=\"black\"\nstroke-width=\"1\"/>\n</svg>\n\t\t\t\t</fo:instream-foreign-object>\n\t\t\t</fo:block>\n\t\t\t\n\t\t\t<fo:block>\n\t\t\t\t<fo:instream-foreign-object width=\"190mm\" height=\"277mm\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"190mm\" height=\"277mm\" viewBox=\"0\n0 10 10\">\n    <rect x=\"-2\" y=\"-2\" width=\"14\" height=\"14\" fill=\"blue\" stroke=\"black\"\nstroke-width=\"1\"/>\n</svg>\n\t\t\t\t</fo:instream-foreign-object>\n\t\t\t</fo:block>\n\t\t\t\n\t\t\t<fo:block>\n\t\t\t\t<fo:instream-foreign-object width=\"190mm\" height=\"277mm\">\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"190mm\" height=\"277mm\" viewBox=\"0\n0 10 10\">\n    <rect x=\"0\" y=\"0\" width=\"10\" height=\"10\" fill=\"red\" stroke=\"black\"\nstroke-width=\"1\"/>\n</svg>\n\t\t\t\t</fo:instream-foreign-object>\n\t\t\t</fo:block>\n\t\t\t\n\t\t</fo:flow>\n\t\t\n\n\t</fo:page-sequence>\n\n</fo:root>"}, {"count": 2, "tags": [], "bug_id": 32528, "is_private": false, "text": "Hi Mark,\n\nI'm pretty sure this is a misunderstanding of the SVG \nspecification on your part. In particular I think you \nneed to read the sections on viewBox and \npreserveAspectRatio (PAR).\n\nAs to your second example you need to read section 14.3.4\nwhich makes it clear that the clip rect is based on\nX/Y/Width/Height not the viewBox directly.  So the\ncontent is set to fit horizontally (default value of\nPAR).  This means that 'space' is left above and below\nthe content (think movie letter box).  Since the clip\nis based on W/H not viewBox the content above and below\nthe viewBox area is allowed to show.\n\nI suggest the bug be closed as INVALID, but I will leave that\nto a true FOP person.", "id": 67948, "time": "2004-12-05T03:00:47Z", "creator": "deweese@apache.org", "creation_time": "2004-12-05T03:00:47Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "Thanks Thomas - since this is a Batik/SVG issue then it is not a bug with FOP. \nI will mark it as invalid.\n\nMark - before raising bugs it is generally a good idea to ask questions on the \nuser mailing list. You would have received an answer sooner.\n\n", "attachment_id": null, "bug_id": 32528, "id": 67983, "time": "2004-12-06T16:02:01Z", "creator": "bowditch_chris@hotmail.com", "creation_time": "2004-12-06T16:02:01Z", "is_private": false}, {"count": 4, "tags": [], "creator": "gadams@apache.org", "attachment_id": null, "is_private": false, "id": 156898, "time": "2012-04-01T13:54:42Z", "bug_id": 32528, "creation_time": "2012-04-01T13:54:42Z", "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs"}]