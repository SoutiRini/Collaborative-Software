[{"count": 0, "tags": [], "bug_id": 11372, "attachment_id": null, "text": "Hi,", "id": 20543, "time": "2002-08-01T16:38:56Z", "creator": "vsampath@sapient.com", "creation_time": "2002-08-01T16:38:56Z", "is_private": false}, {"count": 1, "tags": [], "text": "We r having problem, when we use the ANT for creating the Stored Procedures in \nDB2 we need to format the Script code like this...\n\nCREATE PROCEDURE PKG_RETRIEVE_PROCESS_EVENT_Q_AKC\n-- This stored procedure is used to retrive an event from the process event \nqueue\n-- for the property AKC. The event retrieved is the oldest event (out of the \nremaining\n-- events in the queue) which satisfies the given criteria. Once the event is \nselected,\n-- its status is updated to \"In Process\" accordingly. \n(\t\n    IN in_SELECTSTATUS\t\tCHAR(2),\n    IN in_UPDATESTATUS\t\tCHAR(2),\n    IN in_SELECTSOURCE\t\tCHAR(2),\n    OUT out_EVENTID             BIGINT,\n    OUT out_PROPERTYCODE        CHAR(3),\n    OUT out_EVENT               CHAR(254),\n    OUT out_SOURCE              CHAR(2),\n    OUT out_CAMPAIGNPROCESSED   CHAR(254)\n)\nLANGUAGE SQL \nBEGIN\n    -- Initialize out parameter variables\n    SET out_EVENTID = 0; --\n    SET out_PROPERTYCODE = ''; --\n    SET out_EVENT = ''; --\n    SET out_SOURCE = ''; --\n    SET out_CAMPAIGNPROCESSED = ''; --\n    -- Select the event from the queue\n    SELECT I_EVENTID, C_PROPERTYCODE, C_EVENT, C_SOURCE, C_CAMPAIGNPROCESSED \nINTO out_EVENTID, out_PROPERTYCODE, out_EVENT, out_SOURCE, \nout_CAMPAIGNPROCESSED FROM PROCESSEVENTQAKC WHERE D_CREATED = ( SELECT MIN\n(D_CREATED) FROM PROCESSEVENTQAKC ) AND C_STATUS = in_SELECTSTATUS AND C_SOURCE \n= in_SELECTSOURCE; --\n    -- Update the event from the queue with the \"In Process\" status\n    UPDATE PROCESSEVENTQAKC SET C_STATUS = in_UPDATESTATUS, D_TIMESTAMP = \nCURRENT TIMESTAMP WHERE I_EVENTID = out_EVENTID; END\n;\n\n\nRather than having the Script like this\n\nCREATE PROCEDURE PKG_SUMMARIZE_ENTRY\n(\tIN in_drawingId\t\t\tINTEGER,\n        IN in_winetId\t\t\tBIGINT,\n        IN in_totalEntrySummary\t\tINTEGER,\n        IN in_entryId\t\t\tINTEGER\n)\n-- This stored procedure summarizes entries for a patron at the drawing level.\n-- A new row is inserted in the Entry Summary table for a patron in case the \n-- entry summarization for a drawing happens for the first time.\n-- An existing row is updated with a new entry count in case there already \nexists\n-- a row for a patron for a drawing in the EntrySummary table.\n-- A row is inserted in the EntryUsedInSummary table for each drawing the entry \n-- has been summarized for.\nLANGUAGE SQL\n\nBEGIN\n\t\n\t-- The insert is executed in case the following Update statement fails.\n\tDECLARE CONTINUE HANDLER FOR NOT FOUND \n\tINSERT INTO\n\t\tEntrySummary(\n\t\t\ti_drawingId,\n\t        \ti_winetId,\n\t        \ti_totalEntrySummary,\n\t\t\td_dateSummarized\n\t\t)\n\t\tVALUES(\n\t\t\tin_drawingId,\n\t        \tin_winetId,\n\t\t\tin_totalEntrySummary,\n\t\t\tCURRENT TIMESTAMP\n\t\t); \n\t\n\t-- The Update statement is the first statement to be executed.\n\tUPDATE\n\t\tEntrySummary\n\tSET\n\t\ti_totalEntrySummary = i_totalEntrySummary + \nin_totalEntrySummary,\n\t\td_dateSummarized = CURRENT TIMESTAMP\n\tWHERE \n\t\ti_drawingId = in_drawingId\n\tAND\n\t\ti_winetId = in_winetId; \n\n        -- The Insert is executed at all times irrespective of which statement \nabove gets executed.\n        INSERT INTO\n        \tEntryUsedInSummary(\n        \t\ti_entryId,\n\t\t\ti_drawingId\n\t\t)\n\t\tVALUES\n\t\t(\n\t\t\tin_entryId,\n\t\t\tin_drawingId\n\t\t); \nEND\n", "is_private": false, "id": 20544, "creator": "vsampath@sapient.com", "time": "2002-08-01T16:42:00Z", "bug_id": 11372, "creation_time": "2002-08-01T16:42:00Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 11372, "is_private": false, "text": "I'm not really sure what problem you are having. If it is related to the <sql>\ntask and stored-proc formatting, could you please try a recent nightly build of\nAnt and use the keepformat attribute.\n\nIf this is not the nature of the issue, please reopen and provide more details\non what tasks you are using and what problems you are having.", "id": 40640, "time": "2003-07-14T14:46:15Z", "creator": "conor@apache.org", "creation_time": "2003-07-14T14:46:15Z", "attachment_id": null}]