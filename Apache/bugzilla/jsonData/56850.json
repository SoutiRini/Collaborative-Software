[{"count": 0, "tags": [], "creator": "mjkim0324@hotmail.com", "attachment_id": null, "id": 177141, "time": "2014-08-13T15:53:14Z", "bug_id": 56850, "creation_time": "2014-08-13T15:53:14Z", "is_private": false, "text": "I get a NPE in XmlLogger.buildFinished.\nI think there should be a null check for event.getProject() like a null check for event.getException(). \n\npublic void buildFinished(BuildEvent event) {\n  ...\n  if (event.getException() != null) {\n    ...\n  }\n  String outFilename = event.getProject().getProperty(\"XmlLogger.file\"); -->NPE\n  ...\n}\n\nThe test case and stack trace are below.\n\npublic void test() throws Throwable {\n  XmlLogger logger = new XmlLogger();\n  Cvs cvs1 = new Cvs();\n  BuildEvent event1 = new BuildEvent((Task)cvs1);\n  logger.buildStarted(event1);\n  logger.buildFinished(event1)\n}\n\n1) test(Test)java.lang.NullPointerException\n        at org.apache.tools.ant.XmlLogger.buildFinished(XmlLogger.java:179)\n        at Test.test(Test.java:34)"}, {"count": 1, "tags": [], "bug_id": 56850, "attachment_id": null, "id": 177144, "creation_time": "2014-08-13T15:56:32Z", "time": "2014-08-13T15:56:32Z", "creator": "mjkim0324@hotmail.com", "text": "*** Bug 56851 has been marked as a duplicate of this bug. ***", "is_private": false}, {"count": 2, "tags": [], "bug_id": 56850, "attachment_id": null, "id": 177151, "creation_time": "2014-08-14T05:05:36Z", "time": "2014-08-14T05:05:36Z", "creator": "bodewig@apache.org", "text": "Do you get a NullPointerException in a real build situation or just in your test case?\n\nBuildEvent's project is never expected to be null, while the exception being null is the \"normal\" situation of a successful build.  The alternative to the NPE would be an IllegalArgumentException.  There are different schools of thought WRT throwing an IllegalArgumentException or a NullPointerException if an argument that must not be null actually is - see many methods inside the Java classlib.", "is_private": false}, {"count": 3, "tags": [], "creator": "jan@materne.de", "attachment_id": 31915, "is_private": false, "id": 177152, "time": "2014-08-14T06:04:53Z", "bug_id": 56850, "creation_time": "2014-08-14T06:04:53Z", "text": "Created attachment 31915\nprepared patch\n\nHi Stefan,\n\nwhat about just \"securing\" that part?\nI prepared a commit where I externalize the property access (see patch)."}, {"count": 4, "tags": [], "creator": "mjkim0324@hotmail.com", "attachment_id": null, "is_private": false, "id": 177156, "time": "2014-08-14T08:12:26Z", "bug_id": 56850, "creation_time": "2014-08-14T08:12:26Z", "text": "I get the exception just in the test case."}, {"count": 5, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "is_private": false, "id": 177157, "time": "2014-08-14T08:22:23Z", "bug_id": 56850, "creation_time": "2014-08-14T08:22:23Z", "text": "Jan, I certainly won't stop you from adding a null guard if you feel it improves the situation (but please use a separate commit for Eclipse going wild on final modifiers ;-).  It's just that the situation is one that should never happen as BuildEvent's project is not supposed to be null.\n\nThe better fix, that we probably cannot use without breaking backwards compatibility, would be to throw an Exception in BuildEvent's constructor if the project was null."}, {"count": 6, "tags": [], "creator": "jan@materne.de", "attachment_id": null, "id": 177161, "time": "2014-08-14T09:31:24Z", "bug_id": 56850, "creation_time": "2014-08-14T09:31:24Z", "is_private": false, "text": "applied the patch (without all the final modifiers; changed Eclipse Save Actions ;)"}, {"count": 7, "tags": [], "text": "The NPE won't occur any more", "is_private": false, "bug_id": 56850, "id": 177162, "time": "2014-08-14T09:32:03Z", "creator": "jan@materne.de", "creation_time": "2014-08-14T09:32:03Z", "attachment_id": null}]