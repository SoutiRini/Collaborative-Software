[{"count": 0, "tags": [], "bug_id": 46082, "text": "I saw this problem in serveral different installations... using mod_jk as well as mod_proxy... Currently I am analysing an installation with an apache 1.3.41 using mod_jk (1.2.23).\n\nrequest.getLocalAddr() returns null... \nrequest.getLocalPort() returns 447\n\n447 is the used apache https port.\n\nThe ServletSpec is not very concrete how to answer this... but returning null is a bug definitly...\n\nSolution Approaches\n1.) Idealy getLocalAddr() should return the IP Address of the network interface used to reach apache...\n\n2.) From my point of view it would be also ok, when returning IP and Port(!!!!) over which the AJP connector have been reached... \n\n3.) If both is not possible it would be great to have an additional configuration setting for the AJP connector.. eg request.LocalAddr and request.LocalPort... This shuld be easy to implement.", "id": 121851, "time": "2008-10-24T08:27:50Z", "creator": "Peter.Pichler@lfrz.at", "creation_time": "2008-10-24T08:27:50Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 121927, "time": "2008-10-27T14:38:27Z", "bug_id": 46082, "creation_time": "2008-10-27T14:38:27Z", "text": "The AJP protocol only passes the web server host name and port. It does not pass the IP address. Therefore, getLocalName() will return whatever is passed via AJP but getLocalAddr() will always return null.\n\nWhilst getLocalAddr() could be modified to return the IP address Tomcat is listening on for AJP connections, I don't like the inconsistency that would generate when compared to getLocalName() and getLocalPort()."}]