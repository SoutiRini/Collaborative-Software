[{"count": 0, "attachment_id": null, "creator": "rfrovarp@apache.org", "text": "The publish workflow menu item is always active in the default publication. It\nwould reason to me, that it should only be active when in the reviewed workflow\nstate. This is not the case. The reject workflow menu item is only available\nwhen the document is in the review workflow state. I have yet to find the pieces\nof code that are different between the two to make reject work properly and\npublish to not work the same way.", "id": 94444, "time": "2006-10-03T14:04:40Z", "bug_id": 40670, "creation_time": "2006-10-03T14:04:40Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": 19026, "bug_id": 40670, "text": "Created attachment 19026\nAdds error message if can't be invoked\n\nBy adding an error message when it can't be invoked, this prevents the menu\nitem from being available. The addInfoMessage before this sends the same\ninformation, but doesn't set the error condition on the usecase. The added\nerror message uses same i18n information that CheckWorkflow.java uses.", "id": 94948, "time": "2006-10-18T13:10:44Z", "creator": "rfrovarp@apache.org", "creation_time": "2006-10-18T13:10:44Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 40670, "attachment_id": null, "id": 95104, "time": "2006-10-26T03:39:24Z", "creator": "andreas@apache.org", "creation_time": "2006-10-26T03:39:24Z", "is_private": false, "text": "The item must be available even when the document itself can't be published. For\ninstance:\n\n- foo (live)\n  - bar1 (review)\n  - bar2 (review)\n  - bar3 (review)\n\nIt should still be possible to publish bar1, bar2, and bar3 in one step (from\nthe foo page)."}, {"count": 3, "tags": [], "creator": "nettings@apache.org", "attachment_id": null, "id": 95116, "time": "2006-10-26T07:27:49Z", "bug_id": 40670, "creation_time": "2006-10-26T07:27:49Z", "is_private": false, "text": "since the dialog and the concept of publishing a complete subtree is very\nconfusing, i'd opt to throw it out and only have per-document publishing. in\nthat case, the button can behave like it should, i.e. be only active when the\ndocument is in review state.\n\nadditionally, i would like to see a workflow shortcut:\nif a user has both edit and review roles for a given document, it should be\npossible to bypass the submission step and publish directly. in that case, the\npublish button needs to be active as well. i once tried to implement that but\neventually ran into a brick wall..."}, {"count": 4, "attachment_id": null, "bug_id": 40670, "text": "(In reply to comment #3)\n> since the dialog and the concept of publishing a complete subtree is very\n> confusing, i'd opt to throw it out and only have per-document publishing. in\n> that case, the button can behave like it should, i.e. be only active when the\n> document is in review state.\n\nOK, should we reopen the bug?\nIMO something like a \"workflow matrix\" would be nice for managing multiple\ndocuments at once.\n\n> additionally, i would like to see a workflow shortcut:\n> if a user has both edit and review roles for a given document, it should be\n> possible to bypass the submission step and publish directly. in that case, the\n> publish button needs to be active as well. i once tried to implement that but\n> eventually ran into a brick wall...\n\nJust add the transition to the workflow configuration file, that should be\nsufficient.", "id": 95125, "time": "2006-10-26T09:36:02Z", "creator": "andreas@apache.org", "creation_time": "2006-10-26T09:36:02Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 40670, "text": "(In reply to comment #4)\n> OK, should we reopen the bug?\n\nyes.\n\n> IMO something like a \"workflow matrix\" would be nice for managing multiple\n> documents at once.\n\ncan you elaborate?\n \n", "id": 95134, "time": "2006-10-27T01:01:07Z", "creator": "nettings@apache.org", "creation_time": "2006-10-27T01:01:07Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 40670, "text": "(In reply to comment #4)\n> > additionally, i would like to see a workflow shortcut:\n> > if a user has both edit and review roles for a given document, it should be\n> > possible to bypass the submission step and publish directly. in that case, the\n> > publish button needs to be active as well. i once tried to implement that but\n> > eventually ran into a brick wall...\n> \n> Just add the transition to the workflow configuration file, that should be\n> sufficient.\n\nfor the record, i added this to <mypub>/config/workflow/workflow.xml, and it\nseems to work:\n        \n<transition source=\"authoring\" destination=\"live\">\n  <event id=\"publish\"/>\n  <condition class=\"org.apache.lenya.cms.workflow.RoleCondition\">edit</condition>\n  <condition\nclass=\"org.apache.lenya.cms.workflow.RoleCondition\">review</condition>\n  <assign variable=\"is_live\" value=\"true\"/>\n</transition>\n\n", "id": 95136, "time": "2006-10-27T01:46:40Z", "creator": "nettings@apache.org", "creation_time": "2006-10-27T01:46:40Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 40670, "text": "\n> > IMO something like a \"workflow matrix\" would be nice for managing multiple\n> > documents at once.\n> \n> can you elaborate?\n\nhttp://localhost:8888/default/authoring/doctypes.html?lenya.usecase=workflow.multiWorkflow\n\nCould this be used as a replacement for \"publish subtree\"?", "id": 96172, "time": "2006-11-26T00:31:45Z", "creator": "andreas@apache.org", "creation_time": "2006-11-26T00:31:45Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 40670, "attachment_id": null, "id": 96804, "time": "2006-12-12T07:04:45Z", "creator": "andreas@apache.org", "creation_time": "2006-12-12T07:04:45Z", "is_private": false, "text": "I removed the recursion functionality."}, {"count": 9, "tags": [], "bug_id": 40670, "attachment_id": null, "id": 105549, "time": "2007-07-16T01:59:13Z", "creator": "thorsten@apache.org", "creation_time": "2007-07-16T01:59:13Z", "is_private": false, "text": "Renaming Lenya 1.4 to 2.0"}]