[{"count": 0, "text": "Hello,\nI am using varnish wich send x-forwarded-for to apache 2.4 and on the apache site i have mod_remoteip with the following configuration:\n\nRemoteIPHeader X-Forwarded-For\nRemoteIPInternalProxy 77.77.151.103 \nRemoteIPInternalProxy 127.0.0.1\n\n\nOn 2.2 with rpaf module eveything is ok without changing mod_logio configuration,but on 2.4 with mod_remoteip nothing works and I think there is a bug in the version or in the module. Although I can't understand why and where exactly so I would like to ask you to investigate this with me. If the mod log configuration begins with %h the logs are generated but with the server ip, not the client's one. If I change %h to %a logs stops completely.\n\nWhat can I do and try, how to debug?", "bug_id": 58700, "is_private": false, "id": 186836, "time": "2015-12-07T19:19:46Z", "creator": "georgi.int@gmail.com", "creation_time": "2015-12-07T19:19:46Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 58700, "text": "Hello Georgi,\n\nFor help to debug this situation, you should probably start with the users mailing list:\n\n- http://httpd.apache.org/userslist.html\n\nBugzilla should only be used for reporting specific problems in the code.\nBut that depends on what you mean by \"logs stops completely\".\n\nIt is more likely that the effects of mod_remoteip are sometimes difficult to understand.\n\nYou can refer to bug 55635 and the bugs that it relates to for more information.\nAs mentioned in that bug, I've found the following LogFormat to be useful in understanding the effects of mod_remoteip:\n\nLogFormat \"%h %a %{c}a xf=\\\"%{X-Forwarded-For}i\\\" %l %u %t \\\"%m\\\" \\\"%r&\\\" \\\"%q&\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\" pid=%{pid}P tid=%{tid}P time_ms=%D\" combined\n\nYou could also try using curl as follows:\n\ncurl -v -H \"X-Forwarded-For: <contents of X-Forwarded-For Header>\" <URL as issued from the client> \n\nIf you publish some of these results in an email on the users list, someone will likely be able to help you with your setup.\n\nThanks,\n\nMike Rumph", "id": 186840, "attachment_id": null, "creator": "mike.rumph@oracle.com", "creation_time": "2015-12-07T20:51:51Z", "time": "2015-12-07T20:51:51Z", "is_private": false}]