[{"count": 0, "tags": [], "creator": "calestyo@scientia.net", "text": "Hi.\n\nI found a strange issue...\nWhat I have is about the following:\n\n        Alias /icinga/images/icinga/favicon.ico /srv/www/external/virtual-hosts/lcg-lrz-monitoring.grid.lrz.de/custom/icinga/images/icinga/favicon.ico\n\n...\n\n        <DirectoryMatch \"^(?:/usr/share/icinga-web/app/modules/\\w+/pub/images|/usr/share/icinga-web/app/modules/\\w+/pub/styles|/usr/share/icinga-web/lib/ext3|/usr/share/icinga-web/pub|/srv/www/external/virtual-hosts/lcg-lrz-monitoring.grid.lrz.de/custom/icinga(?!/classic))/\">\n\n#some stuff adding authorization control\n        </DirectoryMatch>\n\n        <DirectoryMatch \"^/srv/www/external/virtual-hosts/lcg-lrz-monitoring.grid.lrz.de/custom/icinga(?!/classic)/\">\n                Options +symLinksIfOwnerMatch\n        </DirectoryMatch>\n\n\nIn /srv/www/external/virtual-hosts/lcg-lrz-monitoring.grid.lrz.de/custom/icinga there is a symlink, pointing to the favicon.ico.\n\n\n\nSo the idea is the following:\nA user accesses /icinga/images/icinga/favicon.ico which is aliased to\n/srv/www/external/virtual-hosts/lcg-lrz-monitoring.grid.lrz.de/custom/icinga/images/icinga/favicon.ico\nwhich is a symlink to some other place.\n\nThe first DirectoryMatch matches some other dirs and the dir where I'm aliasing to (without the subdir classic).... and adds some general rules (mainly authorisation).\n\nThe second DirectoryMatch matches only:\n/srv/www/external/virtual-hosts/lcg-lrz-monitoring.grid.lrz.de/custom/icinga and subdirs (except classic) thereof.\n\nI'd have expected that access is granted (due to the Options +symLinksIfOwnerMatch) but I get a forbidden and:\n[Sun Jul 22 00:26:36 2012] [error] [client 1.2.3.4] Symbolic link not allowed or link target not accessible: /srv/www/external/virtual-hosts/lcg-lrz-monitoring.grid.lrz.de/custom/icinga/images/icinga/favicon.ico\nin the error log.\n\nActually the above thing exactly works if I replace the 2nd DirectoryMatch with:\n        <Directory /srv/www/external/virtual-hosts/lcg-lrz-monitoring.grid.lrz.de/custom/icinga>\n                Options +symLinksIfOwnerMatch\n        </Directory>\nwhich is however not a real solution, as I don't want to match the classic subdir(s).\n\nChanging to +followSymlinks doesn't change.\n\nIt somehow seems as if followSymlinks/symLinksIfOwnerMatch don't work in DirectoryMatch blocks.\n\n\nAny ideas?\n\n\nChris.", "id": 160782, "time": "2012-07-21T22:40:18Z", "bug_id": 53581, "creation_time": "2012-07-21T22:40:18Z", "is_private": false, "attachment_id": null}, {"text": "Reassgning to docs.  It's a limitation of the symlink related related options because they're used while resolving the Directory sections.", "tags": [], "bug_id": 53581, "is_private": false, "count": 1, "id": 160783, "time": "2012-07-22T01:10:58Z", "creator": "covener@gmail.com", "creation_time": "2012-07-22T01:10:58Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "calestyo@scientia.net", "attachment_id": null, "text": "Hey Eric.\n\nSo you mean it's \"intended\" not to work?\n\nCan't it be made to work? I mean this is quite some limitation, IMHO.\n\n\nCheers,\nChris.", "id": 160784, "time": "2012-07-22T01:59:40Z", "bug_id": 53581, "creation_time": "2012-07-22T01:59:40Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 53581, "attachment_id": null, "is_private": false, "id": 160788, "time": "2012-07-22T13:03:12Z", "creator": "covener@gmail.com", "creation_time": "2012-07-22T13:03:12Z", "text": "(In reply to comment #2)\n> Hey Eric.\n> \n> So you mean it's \"intended\" not to work?\n> \n> Can't it be made to work? I mean this is quite some limitation, IMHO.\n\nHard to tell the intent, but that's how it works. \n\nIf you want to discuss it, use the mailing list. If you want to open a separate bug/RFE, go right ahead.  My primary concern is getting the presumably long-standing behavior documented."}, {"count": 4, "tags": [], "bug_id": 53581, "attachment_id": null, "id": 160789, "time": "2012-07-22T13:41:24Z", "creator": "calestyo@scientia.net", "creation_time": "2012-07-22T13:41:24Z", "is_private": false, "text": "Uhm well this one here was intended to be the RFE,... even though this doesn't seems like an enhancement but rather like a clear bug to me.\nAnd just documenting it doesn't solve a bug, even though it's probably a good idea to do so, if it won't be fixed quickly.\n\n\nBut why opening a new ticket for this? Nothing stops from using this one and you still can add a note about this bug to the documentation.\nAssigning it to the appropriate maintainer or component and he can fix it once he likes.\n\n\nI'm not sure what discussion on the lists should help.... it's quite clear that this is a bug, and that wouldn't be much more like a momentum search whether there is anyone who wants to work on it right now.\n\n\nCheers,\nChris."}, {"count": 5, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "text": "Changing to RFE. It's already documented in sections.html", "id": 160790, "time": "2012-07-22T14:25:39Z", "bug_id": 53581, "creation_time": "2012-07-22T14:25:39Z", "is_private": false}, {"count": 6, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "text": "(In reply to comment #5)\n> Changing to RFE. It's already documented in sections.html\n\ncopied to the doc for the actual Options affected", "id": 160791, "time": "2012-07-22T14:49:06Z", "bug_id": 53581, "creation_time": "2012-07-22T14:49:06Z", "is_private": false}]