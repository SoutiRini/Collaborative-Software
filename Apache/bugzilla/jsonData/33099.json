[{"count": 0, "tags": [], "bug_id": 33099, "text": "Example:\n<jsp:root xmlns:jsp=\"http://java.sun.com/JSP/Page\" version=\"2.0\">\n<jsp:directive.page contentType=\"text/html;charset=UTF-8\" language=\"java\"\npageEncoding=\"UTF-8\"/>\n<jsp:include page=\"/expltest.html\"/>\n</jsp:root>\n\nexpltest.html is also UTF-8. The result is corrupted ISO-8859-1 encoding.\nI've checked JSP specification. In the chapter 'Page Encoding Detection' the\nisssue of including non-jsp content is not mentioned.\n\nIMHO current implementation is not acceptable - no way to properly include utf-8\ncontent (at least not found any working solution - found one about changing html\nto jsp, but it is ugly hack,not solution). As JSP specification does not specify\nit, do propose something working.\nThe easiest idea is: inheritance of encoding from parent jsp and/or additional\nparameter 'encoding' to jsp:include (more difficult would be search for\nmeta/charset if it is html file) or one setting for contrainer in web.xml - I\nknow that whatever is done is not complaint to spec, but spec is not complete.\nNow I'm searching for third party include taglib which is nicer :)\nThanks", "id": 69679, "time": "2005-01-14T14:52:18Z", "creator": "tomasz.bech@bull.com.pl", "creation_time": "2005-01-14T14:52:18Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "funkman@joedog.org", "text": " \n\n*** This bug has been marked as a duplicate of 24970 ***", "count": 1, "id": 69681, "time": "2005-01-14T15:08:35Z", "bug_id": 33099, "creation_time": "2005-01-14T15:08:35Z", "is_private": false}, {"count": 2, "tags": [], "text": "Oops - ain't a dup if 24970. Blame it my head cold.\n\nThis seems similar to many of the other encoding bugs logged into bugzilla. I\ndon't have enough consciousness at the moment to get it right.", "is_private": false, "bug_id": 33099, "id": 69686, "time": "2005-01-14T15:37:41Z", "creator": "funkman@joedog.org", "creation_time": "2005-01-14T15:37:41Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 33099, "text": "You can whine about this all you want, the JSP specification is quite explicit.\nAll in all, I think it is not something which should be fixed (or it would mean\nthe static servlet would be able to determine the encoding of static files,\nwhich obviously it cannot do).\n\nPlease do not reopen the report (I'm certain if somehow Jan or Kin-Man think\nthis is valid, they will reopen it and address it).", "id": 69690, "time": "2005-01-14T15:54:19Z", "creator": "remm@apache.org", "creation_time": "2005-01-14T15:54:19Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "I recently added some i18n stuff to the default servlet that should help. See\nhttp://marc.theaimsgroup.com/?l=tomcat-dev&m=110337152122341&w=2\n\nThis is far from a complete fix but I beleieve it is the best we can do.\nSuggestions (that don't break the spec) for improvements always welcome.", "id": 69701, "time": "2005-01-14T20:12:35Z", "bug_id": 33099, "creation_time": "2005-01-14T20:12:35Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 33099, "attachment_id": null, "id": 69720, "time": "2005-01-15T02:02:28Z", "creator": "jan.luehe@sun.com", "creation_time": "2005-01-15T02:02:28Z", "is_private": false, "text": "In addition to Mark's comment, there is a couple of things you can do:\n\n- Add a <jsp-property-group> to your web.xml, specifying a <url-pattern> that\n  matches your static resource and a <page-encoding> that matches the\n  resource's source encoding, like this:\n\n  <jsp-property-group>\n    <url-pattern>/expltest.html</url-pattern>\n    <page-encoding>UTF-8</page-encoding>\n  </jsp-property-group>\n\n  This will cause expltest.html to be processed by the JspServlet, which\n  will apply the specified page-encoding when parsing expltest.html\n\n- Use JSTL's <c:import> tag and specify the page (source) encoding of\n  the target page by using the action's 'charEncoding' attribute."}]