[{"attachment_id": null, "tags": [], "bug_id": 51057, "text": "Dear DEV Guru's,\n\nThis URL is cached by mod_disk_cache (see debug logs below):\nhttp://www.t1shopper.com/mod_disk_cache_bug/index.php\n\nThis isn't cached (see debug logs below):\nhttp://www.t1shopper.com/mod_disk_cache_bug/\n\nThis also impacts query strings for example /mod_disk_cache_bug/index.php?monkey=happy would be cached but /mod_disk_cache_bug/?monkey=unhappy is not cached.\n\nI guessing this bug is caused by the way mod_dir is internally handling the DirectoryIndex page (index.php or index.html, etc) - I suppose it's bypassing mod_cache. \n\nThe documentation doesn't indicate this behavior is by design.  May I suggest we either call this out in the docs or fix it.\n\nThanks,\n\nGeoff Millikan\n\n---= Log showing page being written to host's cache =---\nmod_cache.c(131): Adding CACHE_SAVE filter for /mod_disk_cache_bug/index.php\nmod_cache.c(138): Adding CACHE_REMOVE_URL filter for /mod_disk_cache_bug/index.php\nmod_deflate.c(602): Zlib: Compressed 19 to 21 : URL /mod_disk_cache_bug/index.php\nmod_headers.c(663): headers: ap_headers_output_filter()\nmod_cache.c(639): cache: Caching url: /mod_disk_cache_bug/index.php\nmod_cache.c(645): cache: Removing CACHE_REMOVE_URL filter.\nmod_disk_cache.c(962): disk_cache: Stored headers for URL http://www.t1shopper.com:80/mod_disk_cache_bug/index.php?\nmod_disk_cache.c(1051): disk_cache: Body for URL http://www.t1shopper.com:80/mod_disk_cache_bug/index.php? cached.\n\n---= Log showing page served from host cache to client =---\nmod_disk_cache.c(476): disk_cache: Recalled cached URL info header http://www.t1shopper.com:80/mod_disk_cache_bug/index.php?\nmod_disk_cache.c(749): disk_cache: Recalled headers for URL http://www.t1shopper.com:80/mod_disk_cache_bug/index.php?\nmod_cache.c(282): cache: running CACHE_OUT filter\nmod_cache.c(296): cache: serving /mod_disk_cache_bug/index.php\n\n\n---= Log showing \"forward slash page\" not served to client =--- \nmod_cache.c(131): Adding CACHE_SAVE filter for /mod_disk_cache_bug/ \nmod_cache.c(138): Adding CACHE_REMOVE_URL filter for /mod_disk_cache_bug/ \nmod_deflate.c(602): Zlib: Compressed 19 to 21 : URL /mod_disk_cache_bug/index.php\n\n---= Here's the config =---\nLoadModule disk_cache_module modules/mod_disk_cache.so\nCacheRoot /var/httpd/proxy/\nCacheEnable disk /\nCacheDisable /i\nCacheMaxFileSize 500000\nCacheMinFileSize 1\nCacheDirLevels 4\nCacheDirLength 2\nCacheIgnoreCacheControl Off\nCacheIgnoreNoLastMod Off \nCacheIgnoreHeaders Set-Cookie\nCacheLastModifiedFactor 30\nCacheMaxExpire 2592000\nCacheDefaultExpire 2592000\n\n---= Version =---\nhttpd-2.2.3-45.el5.centos.x86_64.rpm\nServer built:   Jan 31 2011 17:50:30\nLinux 2.6.18-238.5.1.el5 x86_64 x86_64", "count": 0, "id": 145759, "time": "2011-04-13T15:53:51Z", "creator": "gmillikan@t1shopper.com", "creation_time": "2011-04-13T15:53:51Z", "is_private": false}, {"count": 1, "tags": [], "text": "This ticket does a better job detailing the impact/symptoms but it is in fact a duplicate of Bug 45273.  Dang.", "is_private": false, "bug_id": 51057, "id": 145761, "time": "2011-04-13T18:03:32Z", "creator": "gmillikan@t1shopper.com", "creation_time": "2011-04-13T18:03:32Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "gmillikan@t1shopper.com", "is_private": false, "text": "Per Bug 45273, it appears the issue is in mod_dir (DirectoryIndex) and the effects seen here in mod_cache/mod_disk_cache are symptomatic.  It appears real fix needs to be done as per Bug 45273 however I will leave this ticket open as placeholder unless more senior dev members have thoughts otherwise.", "id": 145763, "time": "2011-04-13T18:28:31Z", "bug_id": 51057, "creation_time": "2011-04-13T18:28:31Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of bug 45273 ***", "is_private": false, "bug_id": 51057, "id": 145766, "time": "2011-04-13T20:41:21Z", "creator": "covener@gmail.com", "creation_time": "2011-04-13T20:41:21Z", "attachment_id": null}]