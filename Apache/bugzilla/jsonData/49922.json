[{"count": 0, "tags": [], "creator": "heyoulin@hotmail.com", "attachment_id": null, "id": 139854, "time": "2010-09-14T02:32:04Z", "bug_id": 49922, "creation_time": "2010-09-14T02:32:04Z", "is_private": false, "text": "When i web.xml like this:\n\n<filter>\n    <filter-name>Seam Filter</filter-name>\n    <filter-class>org.jboss.seam.servlet.SeamFilter</filter-class>\n  </filter>\n  <filter-mapping>\n    <filter-name>Seam Filter</filter-name>\n    <url-pattern>/app/yofc/*</url-pattern>\n  </filter-mapping>\n  <filter-mapping>\n    <filter-name>Seam Filter</filter-name>\n    <url-pattern>*.seam</url-pattern>\n  </filter-mapping>\n\nthen ApplicationFilterChain have two same Seam Filter.\n\nthis would cause some app error. Patch:\n\nvoid addFilter(ApplicationFilterConfig filterConfig) {\n    \tfor(ApplicationFilterConfig filter:filters)\n    \t\tif(filter==filterConfig)\n    \t\t\treturn;\n        if (n == filters.length) {\n            ApplicationFilterConfig[] newFilters =\n                new ApplicationFilterConfig[n + INCREMENT];\n            System.arraycopy(filters, 0, newFilters, 0, n);\n            filters = newFilters;\n        }\n        filters[n++] = filterConfig;\n\n    }"}, {"count": 1, "tags": [], "bug_id": 49922, "attachment_id": null, "text": "Fixed in trunk and will be included in 7.0.4 onwards.", "id": 140406, "time": "2010-10-03T13:27:35Z", "creator": "markt@apache.org", "creation_time": "2010-10-03T13:27:35Z", "is_private": false}, {"count": 2, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "id": 164503, "time": "2013-01-08T21:58:16Z", "bug_id": 49922, "creation_time": "2013-01-08T21:58:16Z", "is_private": false, "text": "While\n\na) I do not have a use case where calling the same filter several times would be useful, and\n\nb) I find this feature of allowing only 1 instance of Filter per FilterChain useful and lessing the overall confusion,\n\nI think that this feature is not what is written in the specification.\n\nI raised\nhttps://java.net/jira/browse/SERVLET_SPEC-52\n\n\nThere is a test case for this feature in TestStandardContext class. See r1004006 r1022068 ."}, {"count": 3, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "id": 164509, "creation_time": "2013-01-08T22:30:22Z", "time": "2013-01-08T22:30:22Z", "bug_id": 49922, "text": "(In reply to comment #2)\n> While\n> \n> a) I do not have a use case where calling the same filter several times\n> would be useful, and\n> \n> b) I find this feature of allowing only 1 instance of Filter per FilterChain\n> useful and lessing the overall confusion,\n> \n> I think that this feature is not what is written in the specification.\n\nCan this not be solved by declaring the same filter twice like this:\n\n<filter>\n  <filter-name>Filter Copy 1</filter-name>\n  <filter-class>...</filter-class>\n</filter>\n<filter>\n  <filter-name>Filter Copy 2</filter-name>\n  <filter-class>...</filter-class>\n</filter>\n\n...\n\n<filter-mapping>\n  <filter-name>Filter Copy 1</filter-name>\n  <url-pattern>*.jsp</url-pattern>\n</filter-mapping>\n<filter-mapping>\n  <filter-name>Filter Copy 1</filter-name>\n  <url-pattern>/foo/*</url-pattern>\n</filter-mapping>\n\nThe above should apply both filters to e.g. /foo/bar.jsp", "is_private": false}]