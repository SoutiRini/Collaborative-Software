[{"count": 0, "tags": [], "creator": "dbronner@google.com", "attachment_id": null, "is_private": false, "id": 93941, "time": "2006-09-21T00:59:36Z", "bug_id": 40562, "creation_time": "2006-09-21T00:59:36Z", "text": "In JMeter 2.1.1, 403 redirects from https pages could be parsed by regular\nexpression post processors.  In JMeter 2.2, the same script seems to skip over\nthe post processor step, leaving the variable as the string ${variable} instead\nof replacing it with the match or non-match contents.  \n\nThe following script correctly runs the RE extractor in 2.1.1, but not in 2.2. \nFeel free to trash this login...it's just a spam collector.  Only the last (3rd)\nRE is relevant to the bug.  The other two are just to setup the page.  Also,\nthis is just a public site I found to test this...please don't run any real load\nagainst it.\n\n<jmeterTestPlan version=\"1.1\" properties=\"1.7\">\n  <hashTree>\n    <TestPlan>\n      <elementProp name=\"TestPlan.user_defined_variables\"\nelementType=\"org.apache.jmeter.config.Arguments\">\n        <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.config.gui.ArgumentsPanel</stringProp>\n        <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.config.Arguments</stringProp>\n        <collectionProp name=\"Arguments.arguments\"/>\n        <stringProp name=\"TestElement.name\">User Defined Variables</stringProp>\n        <boolProp name=\"TestElement.enabled\">true</boolProp>\n      </elementProp>\n      <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.control.gui.TestPlanGui</stringProp>\n      <stringProp name=\"TestPlan.user_define_classpath\"></stringProp>\n      <boolProp name=\"TestPlan.serialize_threadgroups\">false</boolProp>\n      <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.testelement.TestPlan</stringProp>\n      <stringProp name=\"TestElement.name\">Test Plan</stringProp>\n      <boolProp name=\"TestPlan.functional_mode\">false</boolProp>\n      <boolProp name=\"TestElement.enabled\">true</boolProp>\n      <stringProp name=\"TestPlan.comments\"></stringProp>\n    </TestPlan>\n    <hashTree>\n      <ThreadGroup>\n        <longProp name=\"ThreadGroup.start_time\">1158799693000</longProp>\n        <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.threads.ThreadGroup</stringProp>\n        <stringProp name=\"ThreadGroup.delay\"></stringProp>\n        <stringProp name=\"ThreadGroup.duration\"></stringProp>\n        <boolProp name=\"TestElement.enabled\">true</boolProp>\n        <stringProp name=\"ThreadGroup.num_threads\">1</stringProp>\n        <boolProp name=\"ThreadGroup.scheduler\">false</boolProp>\n        <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.threads.gui.ThreadGroupGui</stringProp>\n        <elementProp name=\"ThreadGroup.main_controller\"\nelementType=\"org.apache.jmeter.control.LoopController\">\n          <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.control.gui.LoopControlPanel</stringProp>\n          <stringProp name=\"LoopController.loops\">1</stringProp>\n          <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.control.LoopController</stringProp>\n          <stringProp name=\"TestElement.name\">Loop Controller</stringProp>\n          <boolProp name=\"TestElement.enabled\">true</boolProp>\n          <boolProp name=\"LoopController.continue_forever\">false</boolProp>\n        </elementProp>\n        <stringProp name=\"TestElement.name\">Thread Group</stringProp>\n        <longProp name=\"ThreadGroup.end_time\">1158799693000</longProp>\n        <stringProp name=\"ThreadGroup.on_sample_error\">continue</stringProp>\n        <stringProp name=\"ThreadGroup.ramp_time\">1</stringProp>\n      </ThreadGroup>\n      <hashTree>\n        <HTTPSampler>\n          <stringProp name=\"HTTPSampler.path\">/login.srf</stringProp>\n          <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.protocol.http.sampler.HTTPSampler</stringProp>\n          <stringProp name=\"HTTPSampler.method\">GET</stringProp>\n          <boolProp name=\"HTTPSampler.use_keepalive\">true</boolProp>\n          <stringProp name=\"HTTPSampler.protocol\">https</stringProp>\n          <boolProp name=\"TestElement.enabled\">true</boolProp>\n          <boolProp name=\"HTTPSampler.follow_redirects\">false</boolProp>\n          <stringProp name=\"HTTPSampler.port\">443</stringProp>\n          <elementProp name=\"HTTPsampler.Arguments\"\nelementType=\"org.apache.jmeter.config.Arguments\">\n            <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.protocol.http.gui.HTTPArgumentsPanel</stringProp>\n            <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.config.Arguments</stringProp>\n            <collectionProp name=\"Arguments.arguments\"/>\n            <stringProp name=\"TestElement.name\">User Defined Variables</stringProp>\n            <boolProp name=\"TestElement.enabled\">true</boolProp>\n          </elementProp>\n          <stringProp name=\"HTTPSampler.mimetype\"></stringProp>\n          <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</stringProp>\n          <stringProp name=\"HTTPSampler.FILE_FIELD\"></stringProp>\n          <stringProp name=\"TestElement.name\">HTTP Request</stringProp>\n          <stringProp name=\"HTTPSampler.monitor\">false</stringProp>\n          <stringProp name=\"HTTPSampler.domain\">login.live.com</stringProp>\n          <stringProp name=\"HTTPSampler.FILE_NAME\"></stringProp>\n          <boolProp name=\"HTTPSampler.auto_redirects\">false</boolProp>\n        </HTTPSampler>\n        <hashTree>\n          <RegexExtractor>\n            <stringProp name=\"RegexExtractor.default\">NO_MATCH</stringProp>\n            <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.extractor.gui.RegexExtractorGui</stringProp>\n            <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.extractor.RegexExtractor</stringProp>\n            <stringProp name=\"RegexExtractor.regex\">name=&quot;PPFT&quot;\nid=&quot;[^&quot;]+&quot; value=&quot;([^&quot;]+)&quot;</stringProp>\n            <stringProp name=\"TestElement.name\">Regular Expression\nExtractor</stringProp>\n            <boolProp name=\"TestElement.enabled\">true</boolProp>\n            <stringProp name=\"RegexExtractor.useHeaders\">false</stringProp>\n            <stringProp name=\"RegexExtractor.template\">$1$</stringProp>\n            <stringProp name=\"RegexExtractor.match_number\">1</stringProp>\n            <stringProp name=\"RegexExtractor.refname\">ppft</stringProp>\n          </RegexExtractor>\n          <hashTree/>\n          <RegexExtractor>\n            <stringProp name=\"RegexExtractor.default\">NO_MATCH</stringProp>\n            <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.extractor.gui.RegexExtractorGui</stringProp>\n            <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.extractor.RegexExtractor</stringProp>\n            <stringProp\nname=\"RegexExtractor.regex\">post\\.srf\\?bk=([^&quot;]+)&quot;</stringProp>\n            <stringProp name=\"TestElement.name\">Regular Expression\nExtractor</stringProp>\n            <boolProp name=\"TestElement.enabled\">true</boolProp>\n            <stringProp name=\"RegexExtractor.useHeaders\">false</stringProp>\n            <stringProp name=\"RegexExtractor.template\">$1$</stringProp>\n            <stringProp name=\"RegexExtractor.match_number\">1</stringProp>\n            <stringProp name=\"RegexExtractor.refname\">bk</stringProp>\n          </RegexExtractor>\n          <hashTree/>\n        </hashTree>\n        <HTTPSampler>\n          <stringProp\nname=\"HTTPSampler.path\">/ppsecure/post.srf?bk=${bk}</stringProp>\n          <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.protocol.http.sampler.HTTPSampler</stringProp>\n          <stringProp name=\"HTTPSampler.method\">POST</stringProp>\n          <boolProp name=\"HTTPSampler.use_keepalive\">true</boolProp>\n          <stringProp name=\"HTTPSampler.protocol\">https</stringProp>\n          <boolProp name=\"TestElement.enabled\">true</boolProp>\n          <boolProp name=\"HTTPSampler.follow_redirects\">false</boolProp>\n          <stringProp name=\"HTTPSampler.port\">443</stringProp>\n          <elementProp name=\"HTTPsampler.Arguments\"\nelementType=\"org.apache.jmeter.config.Arguments\">\n            <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.protocol.http.gui.HTTPArgumentsPanel</stringProp>\n            <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.config.Arguments</stringProp>\n            <collectionProp name=\"Arguments.arguments\">\n              <elementProp name=\"\"\nelementType=\"org.apache.jmeter.protocol.http.util.HTTPArgument\">\n                <stringProp name=\"Argument.metadata\">=</stringProp>\n                <stringProp name=\"Argument.value\">Passport</stringProp>\n                <boolProp name=\"HTTPArgument.use_equals\">true</boolProp>\n                <stringProp name=\"Argument.name\">PPSX</stringProp>\n                <boolProp name=\"HTTPArgument.always_encode\">false</boolProp>\n              </elementProp>\n              <elementProp name=\"\"\nelementType=\"org.apache.jmeter.protocol.http.util.HTTPArgument\">\n                <stringProp name=\"Argument.metadata\">=</stringProp>\n                <stringProp name=\"Argument.value\"></stringProp>\n                <boolProp name=\"HTTPArgument.use_equals\">true</boolProp>\n                <stringProp name=\"Argument.name\">PwdPad</stringProp>\n                <boolProp name=\"HTTPArgument.always_encode\">false</boolProp>\n              </elementProp>\n              <elementProp name=\"\"\nelementType=\"org.apache.jmeter.protocol.http.util.HTTPArgument\">\n                <stringProp name=\"Argument.metadata\">=</stringProp>\n                <stringProp\nname=\"Argument.value\">dave420010@hotmail.com</stringProp>\n                <boolProp name=\"HTTPArgument.use_equals\">true</boolProp>\n                <stringProp name=\"Argument.name\">login</stringProp>\n                <boolProp name=\"HTTPArgument.always_encode\">true</boolProp>\n              </elementProp>\n              <elementProp name=\"\"\nelementType=\"org.apache.jmeter.protocol.http.util.HTTPArgument\">\n                <stringProp name=\"Argument.metadata\">=</stringProp>\n                <stringProp name=\"Argument.value\">bbbbbb</stringProp>\n                <boolProp name=\"HTTPArgument.use_equals\">true</boolProp>\n                <stringProp name=\"Argument.name\">passwd</stringProp>\n                <boolProp name=\"HTTPArgument.always_encode\">false</boolProp>\n              </elementProp>\n              <elementProp name=\"\"\nelementType=\"org.apache.jmeter.protocol.http.util.HTTPArgument\">\n                <stringProp name=\"Argument.metadata\">=</stringProp>\n                <stringProp name=\"Argument.value\">    Sign In    </stringProp>\n                <boolProp name=\"HTTPArgument.use_equals\">true</boolProp>\n                <stringProp name=\"Argument.name\">SI</stringProp>\n                <boolProp name=\"HTTPArgument.always_encode\">false</boolProp>\n              </elementProp>\n              <elementProp name=\"\"\nelementType=\"org.apache.jmeter.protocol.http.util.HTTPArgument\">\n                <stringProp name=\"Argument.metadata\">=</stringProp>\n                <stringProp name=\"Argument.value\">3</stringProp>\n                <boolProp name=\"HTTPArgument.use_equals\">true</boolProp>\n                <stringProp name=\"Argument.name\">LoginOptions</stringProp>\n                <boolProp name=\"HTTPArgument.always_encode\">false</boolProp>\n              </elementProp>\n              <elementProp name=\"\"\nelementType=\"org.apache.jmeter.protocol.http.util.HTTPArgument\">\n                <stringProp name=\"Argument.metadata\">=</stringProp>\n                <stringProp name=\"Argument.value\">${ppft}</stringProp>\n                <boolProp name=\"HTTPArgument.use_equals\">true</boolProp>\n                <stringProp name=\"Argument.name\">PPFT</stringProp>\n                <boolProp name=\"HTTPArgument.always_encode\">false</boolProp>\n              </elementProp>\n            </collectionProp>\n            <stringProp name=\"TestElement.name\">User Defined Variables</stringProp>\n            <boolProp name=\"TestElement.enabled\">true</boolProp>\n          </elementProp>\n          <stringProp name=\"HTTPSampler.mimetype\"></stringProp>\n          <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</stringProp>\n          <stringProp name=\"HTTPSampler.FILE_FIELD\"></stringProp>\n          <stringProp name=\"TestElement.name\">HTTP Request</stringProp>\n          <stringProp name=\"HTTPSampler.monitor\">false</stringProp>\n          <stringProp name=\"HTTPSampler.domain\">login.live.com</stringProp>\n          <stringProp name=\"HTTPSampler.FILE_NAME\"></stringProp>\n          <boolProp name=\"HTTPSampler.auto_redirects\">false</boolProp>\n        </HTTPSampler>\n        <hashTree>\n          <RegexExtractor>\n            <stringProp name=\"RegexExtractor.default\">NO_MATCH</stringProp>\n            <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.extractor.gui.RegexExtractorGui</stringProp>\n            <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.extractor.RegexExtractor</stringProp>\n            <stringProp name=\"RegexExtractor.regex\">PPAuth=([^;]+)</stringProp>\n            <stringProp name=\"TestElement.name\">Regular Expression\nExtractor</stringProp>\n            <boolProp name=\"TestElement.enabled\">true</boolProp>\n            <stringProp name=\"RegexExtractor.useHeaders\">true</stringProp>\n            <stringProp name=\"RegexExtractor.template\">$1$</stringProp>\n            <stringProp name=\"RegexExtractor.match_number\">1</stringProp>\n            <stringProp name=\"RegexExtractor.refname\">variable</stringProp>\n          </RegexExtractor>\n          <hashTree/>\n        </hashTree>\n        <HTTPSampler>\n          <stringProp name=\"HTTPSampler.path\">${variable}</stringProp>\n          <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.protocol.http.sampler.HTTPSampler</stringProp>\n          <stringProp name=\"HTTPSampler.method\">GET</stringProp>\n          <boolProp name=\"HTTPSampler.use_keepalive\">true</boolProp>\n          <stringProp name=\"HTTPSampler.protocol\"></stringProp>\n          <boolProp name=\"TestElement.enabled\">true</boolProp>\n          <boolProp name=\"HTTPSampler.follow_redirects\">true</boolProp>\n          <stringProp name=\"HTTPSampler.port\"></stringProp>\n          <elementProp name=\"HTTPsampler.Arguments\"\nelementType=\"org.apache.jmeter.config.Arguments\">\n            <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.protocol.http.gui.HTTPArgumentsPanel</stringProp>\n            <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.config.Arguments</stringProp>\n            <collectionProp name=\"Arguments.arguments\"/>\n            <stringProp name=\"TestElement.name\">User Defined Variables</stringProp>\n            <boolProp name=\"TestElement.enabled\">true</boolProp>\n          </elementProp>\n          <stringProp name=\"HTTPSampler.mimetype\"></stringProp>\n          <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.protocol.http.control.gui.HttpTestSampleGui</stringProp>\n          <stringProp name=\"HTTPSampler.FILE_FIELD\"></stringProp>\n          <stringProp name=\"TestElement.name\">HTTP Request</stringProp>\n          <stringProp name=\"HTTPSampler.monitor\">false</stringProp>\n          <stringProp name=\"HTTPSampler.domain\">localhost</stringProp>\n          <stringProp name=\"HTTPSampler.FILE_NAME\"></stringProp>\n          <boolProp name=\"HTTPSampler.auto_redirects\">false</boolProp>\n        </HTTPSampler>\n        <hashTree/>\n        <ResultCollector>\n          <stringProp\nname=\"TestElement.gui_class\">org.apache.jmeter.visualizers.ViewResultsFullVisualizer</stringProp>\n          <stringProp\nname=\"TestElement.test_class\">org.apache.jmeter.reporters.ResultCollector</stringProp>\n          <stringProp name=\"TestElement.name\">View Results Tree</stringProp>\n          <objProp>\n            <value class=\"org.apache.jmeter.samplers.SampleSaveConfiguration\">\n              <time>true</time>\n              <latency>true</latency>\n              <timestamp>true</timestamp>\n              <success>true</success>\n              <label>true</label>\n              <code>true</code>\n              <message>true</message>\n              <threadName>true</threadName>\n              <dataType>false</dataType>\n              <encoding>false</encoding>\n              <assertions>true</assertions>\n              <subresults>true</subresults>\n              <responseData>true</responseData>\n              <samplerData>false</samplerData>\n              <xml>true</xml>\n              <fieldNames>false</fieldNames>\n              <responseHeaders>false</responseHeaders>\n              <requestHeaders>false</requestHeaders>\n              <responseDataOnError>true</responseDataOnError>\n             \n<saveAssertionResultsFailureMessage>true</saveAssertionResultsFailureMessage>\n              <assertionsResultsToSave>0</assertionsResultsToSave>\n              <delimiter>,</delimiter>\n              <printMilliseconds>true</printMilliseconds>\n            </value>\n              <samplerData>false</samplerData>\n              <xml>true</xml>\n              <fieldNames>false</fieldNames>\n              <responseHeaders>false</responseHeaders>\n              <requestHeaders>false</requestHeaders>\n              <responseDataOnError>true</responseDataOnError>\n             \n<saveAssertionResultsFailureMessage>true</saveAssertionResultsFailureMessage>\n              <assertionsResultsToSave>0</assertionsResultsToSave>\n              <delimiter>,</delimiter>\n              <printMilliseconds>true</printMilliseconds>\n            </value>\n            <name>saveConfig</name>\n          </objProp>\n          <boolProp name=\"TestElement.enabled\">true</boolProp>\n          <stringProp name=\"filename\"></stringProp>\n          <boolProp name=\"ResultCollector.error_logging\">false</boolProp>\n        </ResultCollector>\n        <hashTree/>\n      </hashTree>\n    </hashTree>\n  </hashTree>\n</jmeterTestPlan>"}, {"count": 1, "tags": [], "bug_id": 40562, "attachment_id": 18895, "id": 93942, "creation_time": "2006-09-21T01:01:05Z", "time": "2006-09-21T01:01:05Z", "creator": "dbronner@google.com", "text": "Created attachment 18895\nThis script runs correctly in 2.1.1, but not in 2.2.\n\nSorry, I didn't know I could attach a file after the initial comments.", "is_private": false}, {"count": 2, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 93982, "time": "2006-09-21T22:50:12Z", "bug_id": 40562, "creation_time": "2006-09-21T22:50:12Z", "is_private": false, "text": "The RE code was changed in 2.2 to check for responseData length = 0,\nrather than checking it for null. Both checks are wrong, as there is\nno need to check the body if the RE is matching against the Headers or\nURL, but presumably the responseData was not null in 2.1.1.\n\nThe solution is to remove the data length check, and let the RE run against an\nempty body if necessary.\n\nFix applied to 2.2 branch; it is in the nightly version: 2-2.20060921\n\nPlease let us know if whether or not this fixes the problem."}, {"count": 3, "attachment_id": null, "creator": "dbronner@google.com", "is_private": false, "id": 93985, "time": "2006-09-21T23:58:38Z", "bug_id": 40562, "creation_time": "2006-09-21T23:58:38Z", "tags": [], "text": "The checked-in code fixes the problem in the example script and my original\nscript.  Thanks!"}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "is_private": false, "id": 99134, "time": "2007-02-08T13:50:00Z", "bug_id": 40562, "creation_time": "2007-02-08T13:50:00Z", "text": "*** Bug 41571 has been marked as a duplicate of this bug. ***"}]