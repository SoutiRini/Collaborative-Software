[{"count": 0, "tags": [], "creator": "chris.verlo@rainhail.com", "is_private": false, "id": 192180, "attachment_id": 34018, "bug_id": 59813, "creation_time": "2016-07-06T18:47:03Z", "time": "2016-07-06T18:47:03Z", "text": "Created attachment 34018\nCircular Relationship Test Example\n\nWe're experiencing a situation with tomcat 8.5.3 where if two jars each possess a Class-Path entry to the other jar in their MANIFEST.MF file, the server hangs at startup.  \n\nWe can reproduce this problem on both Ubuntu and Windows.  \n\nI've created two jars for testing purposes which contain manifests pointing to each other.  It is only necessary to drop these jars into the server lib folder and attempt to start the server to cause the problem to occur.  \n\nWe encountered this issue because the IBM MQ libraries have a similar circular relationship in their manifest.mf class-path entries."}, {"text": "(I'm surprised Tomcat even consults Class-Path entries... does it?)\n\nCan you post a thread dump of such a hung Tomcat?", "tags": [], "bug_id": 59813, "is_private": false, "count": 1, "id": 192185, "time": "2016-07-06T21:27:19Z", "creator": "chris@christopherschultz.net", "creation_time": "2016-07-06T21:27:19Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 59813, "is_private": false, "text": "Created attachment 34019\nThread dump\n\nI could reproduce the problem using the circular jar files.", "id": 192186, "time": "2016-07-06T23:51:40Z", "creator": "showaid@gmail.com", "creation_time": "2016-07-06T23:51:40Z", "attachment_id": 34019}, {"count": 3, "tags": [], "bug_id": 59813, "is_private": false, "text": "Created attachment 34020\nThread dump\n\nI've attached a thread dump that tipped us off to the problem.  This was NOT generated using my test case, this was generated using the IBM MQ libraries which caused a heap dump as well and emitted this thread dump at the same time.\n\nLike the thread dump generated by HyunWoo Jo, org.apache.tomcat.util.scan.StandardJarScanner.process makes an appearance.", "id": 192208, "time": "2016-07-07T12:10:19Z", "creator": "chris.verlo@rainhail.com", "creation_time": "2016-07-07T12:10:19Z", "attachment_id": 34020}, {"count": 4, "tags": [], "bug_id": 59813, "is_private": false, "text": "Hi,\n\nThanks for the report.\nThis has been fixed in\n- 9.0.x for 9.0.0.M10 onwards,\n- 8.5.x for 8.5.5 onwards and\n- 8.0.x for 8.0.37 onwards.\n\nRegards,\nVioleta", "id": 192305, "time": "2016-07-11T21:17:26Z", "creator": "violetagg@apache.org", "creation_time": "2016-07-11T21:17:26Z", "attachment_id": null}]