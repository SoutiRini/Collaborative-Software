[{"count": 0, "tags": [], "creator": "lothaar77-tech@yahoo.com", "text": "Apparently the ClassLoader was tweaked in JDK1.4.2_05 such that it will no\nlonger load classes if they have the slash character in the name.  It must use\nthe '.' character.  For example, loading \"com/test/Test.class\" fails, but\n\"com.test.Test.class\" succeeds.  This seems to be related to Sun JDK defect\n4986512 (http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4986512).\n\nThis is relevant because we have noticed that our ejbjar ant task fails on the\n_05 jdk, but has worked fine from jdk1.3.1 up through 1.4.2_04.\n\nI did some debugging yesterday and I believe the problem is in\nWeblogicDeploymentTool.isRebuildRequired(...).  If the Bean file has been\nmodified and needs to be replaced, it enters the for loop at line 700.  On line\n715 it takes the class name (returned from the JarFile class) and replaces\nFile.separatorChar with '.'.\n\nThe problem is that genericEntry.getName() always returns the class name with\n'/' characters, even though File.separatorChar is '\\' on Windows.  I double\nchecked our Jar files and they appear to be using the correct fileseparator.\n\nTo fix this, I guess you'd need to add this line:\n\nString classname = genericEntry.getName().replace('/', '.');\n\nso that it also finds and replaces the '/' character.\n\nAlso, I noticed that line 687 explicitly uses the '/' character.  That could\nalso cause problems.  That should be modified to use File.separatorChar.\n\nI hope this is descriptive enough.  Email me if you have questions or need\nclarifications.", "id": 77076, "time": "2005-07-07T16:22:52Z", "bug_id": 35649, "creation_time": "2005-07-07T16:22:52Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "lothaar77-tech@yahoo.com", "attachment_id": null, "id": 77910, "time": "2005-08-01T15:36:08Z", "bug_id": 35649, "creation_time": "2005-08-01T15:36:08Z", "is_private": false, "text": "\nI also tried to log this as a defect with the Sun JVM since the Jar files don't\nuse the standard platform-independant file separator.  They rejected the bug.\n\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6303716\n\nThey say that \"/\" is the file separator for archive files, not File.SEPARATOR. \nSeems kind of confusing to me.  Anyway, please fix this so we can continue to\nuse the weblogic EJB jar targets.\n\nThanks,\nAdam"}, {"count": 2, "attachment_id": null, "bug_id": 35649, "is_private": false, "id": 78896, "time": "2005-08-23T23:57:39Z", "creator": "lothaar77-tech@yahoo.com", "creation_time": "2005-08-23T23:57:39Z", "tags": [], "text": "NOTE: This defect is also present in JDK 1.5.0_03"}, {"count": 3, "tags": [], "creator": "lothaar77-tech@yahoo.com", "attachment_id": 16169, "id": 78897, "time": "2005-08-24T00:07:51Z", "bug_id": 35649, "creation_time": "2005-08-24T00:07:51Z", "is_private": false, "text": "Created attachment 16169\nFix for the bug -- correct file separator character\n\nI went ahead and modified the code myself.  I tested this on my windows machine\nand it definitely fixes the bug.\n\nI hope this helps.\n\nAdam"}, {"count": 4, "tags": [], "text": "svn revision 805423", "attachment_id": null, "id": 129773, "creation_time": "2009-08-18T07:13:40Z", "time": "2009-08-18T07:13:40Z", "creator": "bodewig@apache.org", "bug_id": 35649, "is_private": false}]