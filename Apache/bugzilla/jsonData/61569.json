[{"count": 0, "attachment_id": null, "bug_id": 61569, "is_private": false, "id": 201165, "time": "2017-09-27T18:21:50Z", "creator": "panainte.i@gmail.com", "creation_time": "2017-09-27T18:21:50Z", "tags": [], "text": "Hi,\n\nI selected JMSMessageID for request and JMSCorrelationID for response and this correlation doesn't work properly.\n\nlib: ApacheJMeter_jms.jar\n\nI have investigated and found that problem is in concurrency. Producer (FixedQueueExecutor line: 82) send a message, consumer (Receiver line: 134) got a reply before producer save a request in placeholder and try to save it in  placeholder, MessageAdmin(line: 124) try to get a request holder but it was not save till and result will be null and request will fail.\n\nSolution: \nReceiver.java line: 133-135\n  \n  } else {\n      admin.putReply(messageKey, reply);\n  }\n\nreplace with:\n  \n  } else {\n      synchronized(admin) {\n         admin.putReply(messageKey, reply);\n      }\n  }\n\nI fixed and tested this bug on my local machine after that I didn't have any problem with response fail.\n\nIf you need I can provide more details about this bugfix. \n\nRegards,\nIgor"}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 201167, "time": "2017-09-27T18:36:38Z", "bug_id": 61569, "creation_time": "2017-09-27T18:36:38Z", "is_private": false, "text": "Author: pmouawad\nDate: Wed Sep 27 18:36:16 2017\nNew Revision: 1809895\n\nURL: http://svn.apache.org/viewvc?rev=1809895&view=rev\nLog:\nBug 61569 - JMS Point-to-Point Test Plan: Synchronization issue when putting reply\nBugzilla Id: 61569\n\nModified:\n    jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/sampler/Receiver.java\n    jmeter/trunk/xdocs/changes.xml"}]