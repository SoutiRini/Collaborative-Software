[{"count": 0, "tags": [], "bug_id": 40404, "attachment_id": null, "text": "signature.addKeyInf(cert);\nsignature.getKeyInfo().itemX509Data(0).addSubjectName(cert.getSubjectName().toString());\n\nX509Certificate is found in signature, but no X509SubjectName.\n\nSame happens for X509IssuerSerial", "id": 92960, "time": "2006-09-03T20:43:28Z", "creator": "jlcooke.apache_xmlsec@certainkey.com", "creation_time": "2006-09-03T20:43:28Z", "is_private": false}, {"count": 1, "tags": [], "text": "Thanks for the info,\nCan you send a little program (if it is a junit much better) that points the\nproblem?\n\nRegards,", "is_private": false, "bug_id": 40404, "id": 92985, "time": "2006-09-04T14:34:41Z", "creator": "raul-info@r-bg.com", "creation_time": "2006-09-04T14:34:41Z", "attachment_id": null}, {"count": 2, "text": "Sure,\n\nEdit the\nsrc_samples/org/apache/xml/security/samples/signature/CreateSignature.java file\nin the Java 1.3 zip like so:\n\n      {\n         //Add in the KeyInfo for the certificate that we used the private key of\n         X509Certificate cert =\n            (X509Certificate) ks.getCertificate(certificateAlias);\n\n         sig.addKeyInfo(cert);\n         sig.addKeyInfo(cert.getPublicKey());\n         // Add these three lines\n         org.apache.xml.security.keys.KeyInfo ki = sig.getKeyInfo();\n         ki.itemX509Data(0).addSubjectName(cert.getSubjectDN().toString());\n         ki.itemX509Data(0).addIssuerSerial(cert.getIssuerDN().toString(),\ncert.getSerialNumber());\n\n         System.out.println(\"Start signing\");\n         sig.sign(privateKey);\n         System.out.println(\"Finished signing\");\n      }\n\n\nThe output signature.xml looks like this (notice, no subject or issuerserial):\n\n<!-- Comment before -->\n<apache:RootElement xmlns:apache=\"http://www.apache.org/ns/#app1\"\nxmlns:foo=\"http://example.org/#foo\" attr1=\"test1\" attr2=\"test2\" foo:attr1=\"foo's\ntest\">Some simple text\n<Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\">\n<SignedInfo>\n<CanonicalizationMethod\nAlgorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"></CanonicalizationMethod>\n<SignatureMethod\nAlgorithm=\"http://www.w3.org/2000/09/xmldsig#dsa-sha1\"></SignatureMethod>\n<Reference URI=\"\">\n<Transforms>\n<Transform\nAlgorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"></Transform>\n<Transform\nAlgorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments\"></Transform>\n</Transforms>\n<DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"></DigestMethod>\n<DigestValue>f+pDsT3LzyKV9Sg6rdK5bBrQlbo=</DigestValue>\n</Reference>\n<Reference URI=\"http://www.w3.org/TR/xml-stylesheet\">\n<DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"></DigestMethod>\n<DigestValue>60NvZvtdTB+7UnlLp/H24p7h4bs=</DigestValue>\n</Reference>\n<Reference URI=\"http://www.nue.et-inf.uni-siegen.de/index.html\">\n<DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"></DigestMethod>\n<DigestValue>Hpg+6h1k1jYY5yr3TRzDZzw23CQ=</DigestValue>\n</Reference>\n</SignedInfo>\n<SignatureValue>YXvZhrrzY6C0v0KS7/KFnSzWo7FKFCH2+6Ie98DwUj8Cv3Jt8tJYFg==</SignatureValue>\n<KeyInfo>\n<X509Data>\n<X509Certificate>\nMIIC9jCCArQCBDruqiowCwYHKoZIzjgEAwUAMGExCzAJBgNVBAYTAkRFMR0wGwYDVQQKExRVbml2\nZXJzaXR5IG9mIFNpZWdlbjEQMA4GA1UECxMHRkIxMk5VRTEhMB8GA1UEAxMYQ2hyaXN0aWFuIEdl\ndWVyLVBvbGxtYW5uMB4XDTAxMDUwMTEyMjA1OFoXDTA2MTAyMjEyMjA1OFowYTELMAkGA1UEBhMC\nREUxHTAbBgNVBAoTFFVuaXZlcnNpdHkgb2YgU2llZ2VuMRAwDgYDVQQLEwdGQjEyTlVFMSEwHwYD\nVQQDExhDaHJpc3RpYW4gR2V1ZXItUG9sbG1hbm4wggG3MIIBLAYHKoZIzjgEATCCAR8CgYEA/X9T\ngR11EilS30qcLuzk5/YRt1I870QAwx4/gLZRJmlFXUAiUftZPY1Y+r/F9bow9sVQQDExhDaHJpc3\ngR11EilS30qcLuzk5/YRt1I870QAwx4/gLZRJmlFXUAiUftZPY1Y+r/F9bow9subVWzXgTuAHTRv\n8mZgt2uZUKWkn5/oBHsQIsJPu6nX/rfGG/g7V+fGqKYVDwT7g/bTxR7DAjVUE1oWkTL2dfOuK2HX\nKu/yIgMZndFIAccCFQCXYFCPFSMLzLKSuYKi64QL8Fgc9QKBgQD34aCF1ps93su8q1w2uFe5eZSv\nu/o66oL5V0wLPQeCZ1FZV4661FlP5nEHEIGAtEkWcSPoTCgWE7fPCTKMyKbhPBZ6i1R8jSjgo64e\nK7OmdZFuo38L+iE1YvH7YnoBJDvMpPG+qFGQiaiD3+Fa5Z8GkotmXoB7VSVkAUw7/s9JKgOBhAAC\ngYASWfn+G1k/nWntj9jX7Nk5JKaiLZ9BLR16eJJxqff33THLfdGs98Xmh2oRWZVh9PMV8oTP3hpR\ncRipjZUZVEIqsBlOGTVLCg4H5TJ81JWOiprh+mkhClNqUr8l5Hu7FBSvQB6inryeva7j0aKNiIvK\n8vfHTiUZpnyNRhkveBlM0jALBgcqhkjOOAQDBQADLwAwLAIUPDd/UmB9GeHqvGjny30Bvjt0AkUC\nFA9ab72kKuB5geYGeckbBrcgPnZk\n</X509Certificate>\n</X509Data>\n<KeyValue>\n<DSAKeyValue>\n<P>\n/X9TgR11EilS30qcLuzk5/YRt1I870QAwx4/gLZRJmlFXUAiUftZPY1Y+r/F9bow9subVWzXgTuA\nHTRv8mZgt2uZUKWkn5/oBHsQIsJPu6nX/rfGG/g7V+fGqKYVDwT7g/bTxR7DAjVUE1oWkTL2dfOu\nK2HXKu/yIgMZndFIAcc=\n</P>\n<Q>l2BQjxUjC8yykrmCouuEC/BYHPU=</Q>\n<G>\n9+GghdabPd7LvKtcNrhXuXmUr7v6OuqC+VdMCz0HgmdRWVeOutRZT+ZxBxCBgLRJFnEj6EwoFhO3\nzwkyjMim4TwWeotUfI0o4KOuHiuzpnWRbqN/C/ohNWLx+2J6ASQ7zKTxvqhRkImog9/hWuWfBpKL\nZl6Ae1UlZAFMO/7PSSo=\n</G>\n<Y>\nEln5/htZP51p7Y/Y1+zZOSSmoi2fQS0deniScan3990xy33RrPfF5odqEVmVYfTzFfKEz94aUXEY\nqY2VGVRCKrAZThk1SwoOB+UyfNSVjoqa4fppIQpTalK/JeR7uxQUr0Aeop68nr2u49GijYiLyvL3\nx04lGaZ8jUYZL3gZTNI=\n</Y>\n</DSAKeyValue>\n</KeyValue>\n</KeyInfo>\n</Signature></apache:RootElement>\nubVWzXgTuAHTRv", "bug_id": 40404, "attachment_id": null, "id": 92987, "time": "2006-09-04T16:55:22Z", "creator": "jlcooke.apache_xmlsec@certainkey.com", "creation_time": "2006-09-04T16:55:22Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "Fixed in SVN.\nThanks for reporting.\nIt was a tough and very old bug. It s strange that nobody else found it.\nI have create a test case.  ", "attachment_id": null, "bug_id": 40404, "id": 93300, "time": "2006-09-10T16:57:59Z", "creator": "raul-info@r-bg.com", "creation_time": "2006-09-10T16:57:59Z", "is_private": false}, {"count": 4, "tags": [], "text": "Closing old bugs. Fixed in 1.4.1", "is_private": false, "id": 108394, "creator": "sean.mullan@oracle.com", "time": "2007-09-19T12:16:39Z", "bug_id": 40404, "creation_time": "2007-09-19T12:16:39Z", "attachment_id": null}]