[{"attachment_id": null, "tags": [], "bug_id": 50349, "is_private": false, "count": 0, "id": 142053, "time": "2010-11-27T14:24:17Z", "creator": "fictive@sci.fi", "creation_time": "2010-11-27T14:24:17Z", "text": "### Problem\nApache serves a file, even though it should serve 404.\n\n\n### File structure\n/.htaccess [FILE]\n/testikansio/ [DIR]\n/testikansio/tekstitiedosto [FILE]\n\n\n### .htaccess\nRewriteEngine On\nRewritebase /\n\nRewriteCond %{REQUEST_URI} !^/testikansio\nRewriteRule ^(.*)$ /testikansio/$1\n\n\n### GET http://gateway.local.lan/tekstitiedosto\nResult: The file is served. [CORRECT]\n] (3) [perdir /srv/http/] add path info postfix: /srv/http/testitiedosto -> /srv/http/testitiedosto/\n] (3) [perdir /srv/http/] strip per-dir prefix: /srv/http/testitiedosto/ -> testitiedosto/\n] (3) [perdir /srv/http/] applying pattern '^(.*)$' to uri 'testitiedosto/'\n] (4) [perdir /srv/http/] RewriteCond: input='/testitiedosto/' pattern='!^/testikansio' => matched\n] (2) [perdir /srv/http/] rewrite 'testitiedosto/' -> '/testikansio/testitiedosto/'\n] (2) [perdir /srv/http/] trying to replace prefix /srv/http/ with /\n] (1) [perdir /srv/http/] internal redirect with /testikansio/testitiedosto/ [INTERNAL REDIRECT]\n/redir#1] (3) [perdir /srv/http/] add path info postfix: /srv/http/testikansio/testitiedosto -> /srv/http/testikansio/testitiedosto/\n/redir#1] (3) [perdir /srv/http/] strip per-dir prefix: /srv/http/testikansio/testitiedosto/ -> testikansio/testitiedosto/\n/redir#1] (3) [perdir /srv/http/] applying pattern '^(.*)$' to uri 'testikansio/testitiedosto/'\n/redir#1] (4) [perdir /srv/http/] RewriteCond: input='/testikansio/testitiedosto/' pattern='!^/testikansio' => not-matched\n/redir#1] (1) [perdir /srv/http/] pass through /srv/http/testikansio/testitiedosto\n\n\n### GET http://gateway.local.lan/tekstitiedosto/XYZ\nResult: The file is served. [WRONG]\n] (3) [perdir /srv/http/] add path info postfix: /srv/http/testitiedosto -> /srv/http/testitiedosto/XYZ\n] (3) [perdir /srv/http/] strip per-dir prefix: /srv/http/testitiedosto/XYZ -> testitiedosto/XYZ\n] (3) [perdir /srv/http/] applying pattern '^(.*)$' to uri 'testitiedosto/XYZ'\n] (4) [perdir /srv/http/] RewriteCond: input='/testitiedosto/XYZ' pattern='!^/testikansio' => matched\n] (2) [perdir /srv/http/] rewrite 'testitiedosto/XYZ' -> '/testikansio/testitiedosto/XYZ'\n] (2) [perdir /srv/http/] trying to replace prefix /srv/http/ with /\n] (1) [perdir /srv/http/] internal redirect with /testikansio/testitiedosto/XYZ [INTERNAL REDIRECT]\n/redir#1] (3) [perdir /srv/http/] add path info postfix: /srv/http/testikansio/testitiedosto -> /srv/http/testikansio/testitiedosto/XYZ\n/redir#1] (3) [perdir /srv/http/] strip per-dir prefix: /srv/http/testikansio/testitiedosto/XYZ -> testikansio/testitiedosto/XYZ\n/redir#1] (3) [perdir /srv/http/] applying pattern '^(.*)$' to uri 'testikansio/testitiedosto/XYZ'\n/redir#1] (4) [perdir /srv/http/] RewriteCond: input='/testikansio/testitiedosto/XYZ' pattern='!^/testikansio' => not-matched\n/redir#1] (1) [perdir /srv/http/] pass through /srv/http/testikansio/testitiedosto\n\n\n### GET http://gateway.local.lan/testitiedosto/XYZ/\nResult: The file is served. [WRONG]\n] (3) [perdir /srv/http/] add path info postfix: /srv/http/testitiedosto -> /srv/http/testitiedosto/XYZ/\n] (3) [perdir /srv/http/] strip per-dir prefix: /srv/http/testitiedosto/XYZ/ -> testitiedosto/XYZ/\n] (3) [perdir /srv/http/] applying pattern '^(.*)$' to uri 'testitiedosto/XYZ/'\n] (4) [perdir /srv/http/] RewriteCond: input='/testitiedosto/XYZ/' pattern='!^/testikansio' => matched\n] (2) [perdir /srv/http/] rewrite 'testitiedosto/XYZ/' -> '/testikansio/testitiedosto/XYZ/'\n] (2) [perdir /srv/http/] trying to replace prefix /srv/http/ with /\n] (1) [perdir /srv/http/] internal redirect with /testikansio/testitiedosto/XYZ/ [INTERNAL REDIRECT]\n/redir#1] (3) [perdir /srv/http/] add path info postfix: /srv/http/testikansio/testitiedosto -> /srv/http/testikansio/testitiedosto/XYZ/\n/redir#1] (3) [perdir /srv/http/] strip per-dir prefix: /srv/http/testikansio/testitiedosto/XYZ/ -> testikansio/testitiedosto/XYZ/\n/redir#1] (3) [perdir /srv/http/] applying pattern '^(.*)$' to uri 'testikansio/testitiedosto/XYZ/'\n/redir#1] (4) [perdir /srv/http/] RewriteCond: input='/testikansio/testitiedosto/XYZ/' pattern='!^/testikansio' => not-matched\n/redir#1] (1) [perdir /srv/http/] pass through /srv/http/testikansio/testitiedosto\n\n\n### Command: httpd -v\nServer version: Apache/2.2.17 (Unix)\nServer built:   Oct 21 2010 09:07:26\nServer's Module Magic Number: 20051115:25\nServer loaded:  APR 1.4.2, APR-Util 1.3.10\nCompiled using: APR 1.4.2, APR-Util 1.3.10\nArchitecture:   32-bit\nServer MPM:     Prefork\n  threaded:     no\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=128\n -D HTTPD_ROOT=\"/etc/httpd\"\n -D SUEXEC_BIN=\"/usr/sbin/suexec\"\n -D DEFAULT_PIDLOG=\"/var/run/httpd/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"/var/run/httpd/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\nDistro: Up-to-date Arch Linux as of 27.11.2010\nApache installed from pacman. Only configuration change was AllowOverride All, RewriteLog and RewriteLevel 9."}, {"count": 1, "tags": [], "bug_id": 50349, "text": "Created attachment 26350\nThe rewrite log. Not word wrapped.", "id": 142054, "time": "2010-11-27T14:27:33Z", "creator": "fictive@sci.fi", "creation_time": "2010-11-27T14:27:33Z", "is_private": false, "attachment_id": 26350}, {"count": 2, "tags": [], "text": "Since you didn't mention AcceptPathInfo, this probably would have been more appropriate to start life on the users mailing list.", "is_private": false, "id": 142055, "creator": "covener@gmail.com", "time": "2010-11-27T14:43:01Z", "bug_id": 50349, "creation_time": "2010-11-27T14:43:01Z", "attachment_id": null}, {"count": 3, "text": "Created attachment 26377\nfix init of use_path_info", "creator": "covener@gmail.com", "attachment_id": 26377, "id": 142438, "time": "2010-12-06T23:04:32Z", "bug_id": 50349, "creation_time": "2010-12-06T23:04:32Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 50349, "is_private": false, "count": 4, "id": 142452, "time": "2010-12-07T08:08:35Z", "creator": "covener@gmail.com", "creation_time": "2010-12-07T08:08:35Z", "text": "http://svn.apache.org/viewvc?rev=1043023&view=rev"}, {"count": 5, "tags": [], "bug_id": 50349, "attachment_id": null, "text": "backported to 2.2.x in http://svn.apache.org/viewvc?rev=1068255&view=rev", "id": 144049, "time": "2011-02-08T08:02:35Z", "creator": "covener@gmail.com", "creation_time": "2011-02-08T08:02:35Z", "is_private": false}]