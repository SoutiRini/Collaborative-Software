[{"count": 0, "tags": [], "text": "As per the documentation on extension-points, there is a note that this is designed to be used with imported build files. I tried to create the example given (see attached files) where build.xml imports targets and an extension-point and then adds a dependency via the extensionOf.\n \nThis results in an error that the extension-point does not exist, which it doesn't because the import is done after the build is parsed.  I believe that I have the intent correct but that there is a bug in TargetHelper in ProjectHelper2.  I can see that the extensionOf needs to find the other target so that it can add a dependency but that that target doesn't exist since the import stack hasn't been fully popped.\n \nI believe that the fix is to change ProjectHelper2 (I will try to create my own in the short term) to add the extension to a stack which then is processed after the import stack is done.  That is, all extensions should be done after the imports are done.", "attachment_id": null, "id": 134828, "creator": "brianrepko@fastmail.us", "time": "2010-02-23T20:20:02Z", "bug_id": 48804, "creation_time": "2010-02-23T20:20:02Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 48804, "attachment_id": 25043, "id": 134829, "creation_time": "2010-02-23T20:23:26Z", "time": "2010-02-23T20:23:26Z", "creator": "brianrepko@fastmail.us", "text": "Created attachment 25043\nbuild file from documentation", "is_private": false}, {"count": 2, "text": "Created attachment 25044\nimported file from documentations", "bug_id": 48804, "attachment_id": 25044, "id": 134830, "time": "2010-02-23T20:23:54Z", "creator": "brianrepko@fastmail.us", "creation_time": "2010-02-23T20:23:54Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "Created attachment 25045\nchanged ProjectHelper", "attachment_id": 25045, "id": 134831, "creator": "brianrepko@fastmail.us", "time": "2010-02-23T20:24:41Z", "bug_id": 48804, "creation_time": "2010-02-23T20:24:41Z", "is_private": false}, {"count": 4, "text": "Created attachment 25046\nchanged ProjectHelper2", "bug_id": 48804, "attachment_id": 25046, "id": 134832, "time": "2010-02-23T20:25:05Z", "creator": "brianrepko@fastmail.us", "creation_time": "2010-02-23T20:25:05Z", "tags": [], "is_private": false}, {"count": 5, "text": "Hi, Brian, and thanks for the submission.  Typically the Ant developers are much better able to digest the intent of a change if it is provided as a patch against the svn trunk code.  When you attach your changes in this format, you should also edit the title of the issue so that it begins with [PATCH].\n\nRegards,\nMatt", "creator": "mbenson@apache.org", "is_private": false, "id": 134833, "time": "2010-02-23T20:36:37Z", "bug_id": 48804, "creation_time": "2010-02-23T20:36:37Z", "tags": [], "attachment_id": null}, {"count": 6, "text": "Just tried these against a different scenario and it fails - please don't use these (I can't delete them).\n\nI didn't find any quick setup guide so that I could provide you a patch (I can't get the source bundle to not report errors in Eclipse) so you probably won't get that from me.  I'm assuming you can do a diff.\n\nThanks!", "bug_id": 48804, "is_private": false, "id": 134834, "time": "2010-02-23T20:43:09Z", "creator": "brianrepko@fastmail.us", "creation_time": "2010-02-23T20:43:09Z", "tags": [], "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 48804, "is_private": false, "text": "Created attachment 25047\nworking ProjectHelper2", "id": 134835, "time": "2010-02-23T21:20:04Z", "creator": "brianrepko@fastmail.us", "creation_time": "2010-02-23T21:20:04Z", "attachment_id": 25047}, {"count": 8, "tags": [], "bug_id": 48804, "attachment_id": 25048, "text": "Created attachment 25048\nworking ProjectHelper", "id": 134836, "time": "2010-02-23T21:20:32Z", "creator": "brianrepko@fastmail.us", "creation_time": "2010-02-23T21:20:32Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 48804, "attachment_id": null, "text": "I'm having this same problem and have found a work around. If your build files look like this:\n<project name=\"imported\">\n  <extension-point name=\"extend-this\"/>\n</project>\n\n<project name=\"importing\">\n  <import file=\"imported\"/>\n  <target name=\"extending\" extentionOf=\"extend-this\"/>\n</project>\n\nAnt will complain that extend-this does not exist. By wrapping these build files in another Ant will not complain. The initial build files do not need to be modified so the wrapper files can be deleted when this bug is fixed.\n\n<project name=\"wrapper\">\n  <import file=\"imported\"/>\n  <import file=\"importing\"/>\n</project>", "id": 134912, "time": "2010-02-26T03:16:41Z", "creator": "reetnem@bigfoot.com", "creation_time": "2010-02-26T03:16:41Z", "is_private": false}, {"count": 10, "tags": [], "creator": "jan@materne.de", "attachment_id": 25155, "id": 135484, "time": "2010-03-20T13:08:00Z", "bug_id": 48804, "creation_time": "2010-03-20T13:08:00Z", "is_private": false, "text": "Created attachment 25155\nPatch for AntUnit testfile for showing this bug\n\nAttached a path for the AntUnit test.\n- create imported buildfile (defining extension-point)\n- create importing buildfile (enhancing the EP)\n- invoking the importing file\n- checks for the expected output"}, {"count": 11, "text": "Jan, your test would even fail if there was no bug since you never call any target 8-)\n\nI've a modified version of the patch just undergoing ants unit test suite, it breaks at least one test: testExtensionPointMustBeKnown.  This on asserts you can't extend an extension point that is defined later inside the same build file, which is no longer true.\n\nI'll poll the dev list to see whether this change is more of a benefit than a problem.", "bug_id": 48804, "attachment_id": null, "id": 136339, "time": "2010-04-23T05:11:31Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-23T05:11:31Z", "tags": [], "is_private": false}, {"count": 12, "text": "Created attachment 25340\nConsolidated Brian's changes and Jan's testcase\n\nI have modified Brian's original change to use a linked list rather than a\nvector and a two-element string array rather than a map, but these changes are\nreally minor.", "bug_id": 48804, "is_private": false, "id": 136342, "time": "2010-04-23T05:18:58Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-23T05:18:58Z", "tags": [], "attachment_id": 25340}, {"attachment_id": null, "tags": [], "bug_id": 48804, "text": "fixed with svn revision 938315\n\nThanks", "count": 13, "id": 136427, "time": "2010-04-27T00:07:22Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-27T00:07:22Z", "is_private": false}]