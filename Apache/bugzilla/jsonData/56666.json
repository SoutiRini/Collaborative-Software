[{"count": 0, "tags": [], "text": "Thread on users@: \"Regarding JSESSIONIDSSO Cookie maintained by tomcat\"\nhttp://tomcat.markmail.org/thread/y7m6ceiusm65p5bc\n\nThe code for clearing the cookie is in\no.a.catalina.authenticator.SingleSignOn.invoke(...)\n\n[[[\n            cookie.setMaxAge(0);\n            response.addCookie(cookie);\n]]]\n\nThe code for setting the cookie is in\no.a.catalina.authenticator.AuthenticatorBase.register(...)\n\n\nI see the following issues with the code that clears the cookie in SingleSignOn.invoke():\n\n1). The cookie value is echoed back.\nTo clear a cookie it should be enough to use any fixed value.\n\n(OP concerns are that Secure and HttpOnly flags are not set on the Set-Cookie header. It should not be an issue, as the value is known to be invalid, and as browser is expected to immediately remove the cookie. Still I can agree that it is not pretty).\n\n2) The Domain and Path attributes should have the same values as for a newly created SSO cookie.\n\n(The new cookie replaces the old cookie if it has the same name, domain and path. - RFC 6265 page 24\n- Chapter 5.3. Storage Model, item 11)\n\n\nBTW, an unrelated issue:\nThe code in SingleSignOn.invoke() operates on the first SSO cookie that it finds. It does not expect browser to send several cookies with this name.", "is_private": false, "bug_id": 56666, "id": 176012, "time": "2014-06-24T14:03:26Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-06-24T14:03:26Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 56666, "attachment_id": null, "id": 176185, "time": "2014-07-03T11:36:11Z", "creator": "markt@apache.org", "creation_time": "2014-07-03T11:36:11Z", "is_private": false, "text": "Fixed in 8.0.x for 8.0.10 onwards."}, {"count": 2, "tags": [], "creator": "markt@apache.org", "text": "Fixed in 7.0.x for 7.0.55 onwards.", "id": 176186, "time": "2014-07-03T11:58:57Z", "bug_id": 56666, "creation_time": "2014-07-03T11:58:57Z", "is_private": false, "attachment_id": null}]