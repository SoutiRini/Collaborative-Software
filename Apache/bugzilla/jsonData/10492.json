[{"count": 0, "tags": [], "text": "I have narrowed this problem down to the following situation.  I have two build \nscripts, util.xml and build.xml.  The build.xml script is located in a \ndirectory under the directory util.xml is in.\n\nThe echo task in the util.xml script simply echoes the basedir property to the \nconsole.\n\nThe build.xml contains two tasks, shown below.  Both calls to the echo target \nhave inheritAll set to false, so the output of the echo task should always be \nthe basedir of the util.xml file.\n\n<target name=\"main\">\n    <ant antfile=\"../util.xml\"\n        target=\"echo\"\n        inheritAll=\"false\">\n    </ant>\n\n    <antcall target=\"childtarget\"/>\n</target>\n\t\n<target name=\"childtarget\">\n    <ant antfile=\"../util.xml\"\n        target=\"echo\"\n        inheritAll=\"false\">\n    </ant>\n</target>\n\n\nRunning the main target results in the following output, with incorrect output \nfrom the second echo call.\n\nBuildfile: build.xml\n\nmain:\n\necho:\n     [echo] P:\\ANT\n\nchildtarget:\n\necho:\n     [echo] P:\\ANT\\Test\n\nBUILD SUCCESSFUL\nTotal time: 1 second", "attachment_id": null, "id": 19027, "creator": "simon.lieschke@orion.co.nz", "time": "2002-07-05T00:43:04Z", "bug_id": 10492, "creation_time": "2002-07-05T00:43:04Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 2265\nutil.xml", "attachment_id": 2265, "id": 19028, "creator": "simon.lieschke@orion.co.nz", "time": "2002-07-05T00:44:07Z", "bug_id": 10492, "creation_time": "2002-07-05T00:44:07Z", "is_private": false}, {"count": 2, "tags": [], "text": "Created attachment 2266\nbuild.xml", "attachment_id": 2266, "id": 19029, "creation_time": "2002-07-05T00:44:37Z", "time": "2002-07-05T00:44:37Z", "creator": "simon.lieschke@orion.co.nz", "bug_id": 10492, "is_private": false}, {"count": 3, "tags": [], "text": "See the documentation of <ant> and the discussion of basedir, this is expected\nbehavior.\n\nAnd if you set inheritall to false, you should expect basedir to get a new value\nanyway, no?\n\nI had to add \"default\" attributes to your project tags, BTW.", "attachment_id": null, "id": 19038, "creator": "bodewig@apache.org", "time": "2002-07-05T09:20:21Z", "bug_id": 10492, "creation_time": "2002-07-05T09:20:21Z", "is_private": false}, {"count": 4, "tags": [], "text": "Yes, I do expect that if I set inheritAll to false, basedir will get a new \nvalue.  That is what I was expecting to happen each time I call the echo target.\n\nAccording to the <ant> task docs, if the dir attribute is omitted and the \ninheritAll attribute is set to false, the new project's basedir is the \"basedir \nattribute of the <project> element of the new project\"\n\nBoth my calls to the echo task in the util.xml script do this.  Hence I would \nexpect that the basedir used for the echo target would be the basedir as \ndefined in the basedir attribute of the <project> element of the util.xml \nscript for both echo calls.\n\nI am reopening this as the behavior displayed is contrary to what the docs say.", "is_private": false, "id": 19047, "creation_time": "2002-07-05T10:58:10Z", "time": "2002-07-05T10:58:10Z", "creator": "simon.lieschke@orion.co.nz", "bug_id": 10492, "attachment_id": null}, {"count": 5, "text": "Ah, I see where the problem is - and there really is a bug lurking.\n\nThe problem is the repeated <ant> calls (you are going three levels via antcall\nwhich is just another name for ant in a way).\n\nOther properties (except basedir) should not be affected.", "bug_id": 10492, "is_private": false, "id": 19050, "time": "2002-07-05T11:11:37Z", "creator": "bodewig@apache.org", "creation_time": "2002-07-05T11:11:37Z", "tags": [], "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 10492, "is_private": false, "text": "OK, fixed in the 1.5 branch.\n\n", "id": 19052, "time": "2002-07-05T11:36:27Z", "creator": "bodewig@apache.org", "creation_time": "2002-07-05T11:36:27Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "Happy with the resolution.", "is_private": false, "id": 38941, "creator": "simon.lieschke@orion.co.nz", "time": "2003-06-17T00:11:58Z", "bug_id": 10492, "creation_time": "2003-06-17T00:11:58Z", "attachment_id": null}]