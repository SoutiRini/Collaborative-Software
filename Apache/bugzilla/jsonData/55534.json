[{"count": 0, "tags": [], "text": "JSR 250 (\"Common Annotations 1.0\") specified a set of common annotations for application development. Some of them were included in Java SE 6 and later, but many of them are Java EE-specific and were added in Java EE 5. Tomcat 6 included these annotations since Tomcat supported some of them. The annotations included in Tomcat 6 are:\n\njavax.annotation.Generated\njavax.annotation.PostConstruct\njavax.annotation.PreDestroy\njavax.annotation.Resource\njavax.annotation.Resources\njavax.annotation.security.DeclareRoles\njavax.annotation.security.DenyAll\njavax.annotation.security.PermitAll\njavax.annotation.security.RolesAllowed\njavax.annotation.security.RunAs\n\nThis was fine in Java EE 5 / Tomcat 6. However, Java EE 6 (\"Common Annotations 1.1\") added the following annotations that Tomcat 7 never included:\n\njavax.annotation.ManagedBean\njavax.annotation.sql.DataSourceDefinition\njavax.annotation.sql.DataSourceDefinitions\n\nFurthermore, Java EE 7 (\"Common Annotations 1.2\") added the following annotation that Tomcat 8 has not yet included:\n\njavax.annotation.Priority\n\nTomcat should included these annotations in its \"annotations-api.jar\". Other frameworks (like Spring Framework and JPA providers) make use of these new annotations. Since Tomcat does not include them, the /correct/ thing for an application that needs them to do is include the official javax.annotation-api.jar artifact in their application. However, this JAR redefines annotations already supplied by Tomcat, which could lead to hard-to-diagnose errors (similar to why an application should never include the servlet-api artifact in their application). Adding these missing annotations would remove the requirement for applications to include the problem JAR in their application.\n\nTomcat 7 should ship @ManagedBean, @DataSourceDefinition, and @DataSourceDefinitions. Tomcat 8 should ship with @Priority.", "attachment_id": null, "id": 169953, "creator": "nicholas@nicholaswilliams.net", "time": "2013-09-07T23:00:47Z", "bug_id": 55534, "creation_time": "2013-09-07T23:00:47Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 55534, "is_private": false, "id": 169982, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2013-09-09T11:21:41Z", "time": "2013-09-09T11:21:41Z", "text": "A review also spotted some errors in the existing common annotations 1.0 implementation.\n\nNote that some of the official Java EE 5 Javadoc for common annotations is not correct.\n\nEverything has been fixed for 8.0.x and 7.0.x and will be included in 8.0.0-RC2 and 7.0.43.\n\nThe CA 1.0 fixes have been proposed for 6.0.x."}, {"count": 2, "tags": [], "bug_id": 55534, "text": "Excellent. Good news! Thanks for attacking this so quickly.", "id": 169989, "time": "2013-09-09T16:16:36Z", "creator": "nicholas@nicholaswilliams.net", "creation_time": "2013-09-09T16:16:36Z", "is_private": false, "attachment_id": null}]