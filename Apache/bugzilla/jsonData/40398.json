[{"count": 0, "tags": [], "bug_id": 40398, "text": "I just need to know the #define where this is set\n\n\nmulticast.c\n.\\network_io\\unix\\multicast.c(137) : error C2079: 'mip' uses undefined struct\n'group_source_req'\n.\\network_io\\unix\\multicast.c(168) : error C2224: left of '.gsr_interface' must\nhave struct/union type\n.\\network_io\\unix\\multicast.c(168) : warning C4013: 'find_if_index' undefined;\nassuming extern returning int\n.\\network_io\\unix\\multicast.c(169) : error C2224: left of '.gsr_group' must have\nstruct/union type\n.\\network_io\\unix\\multicast.c(169) : error C2224: left of '.gsr_group' must have\nstruct/union type\n.\\network_io\\unix\\multicast.c(169) : error C2198: 'memcpy' : too few arguments\nfor call\n.\\network_io\\unix\\multicast.c(170) : error C2224: left of '.gsr_source' must\nhave struct/union type\n.\\network_io\\unix\\multicast.c(170) : error C2224: left of '.gsr_source' must\nhave struct/union type\n.\\network_io\\unix\\multicast.c(170) : error C2198: 'memcpy' : too few arguments\nfor call", "id": 92925, "time": "2006-09-02T16:51:55Z", "creator": "sheldon.robinson@gmail.com", "creation_time": "2006-09-02T16:51:55Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "wrowe@apache.org", "text": "I'm not seeing this, so I'll presume it's fixed?\n\nReopen with much more detail if you still have issues.", "id": 103983, "time": "2007-06-01T15:37:57Z", "bug_id": 40398, "creation_time": "2007-06-01T15:37:57Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 40398, "is_private": false, "count": 2, "id": 104217, "time": "2007-06-08T10:35:45Z", "creator": "thaiha@psv.com.vn", "creation_time": "2007-06-08T10:35:45Z", "text": "I have the same problem with Windows SDK 6.0. I found a workaround solution at\nhttp://procfs.blogspot.com/2007/02/build-apache-on-vista.html.\nAfter more investigating on the issue I figured out that Windows SDK 6.0\nintroduces the new macro MCAST_JOIN_SOURCE_GROUP and that's the reason of the\nerror messages.\n\n--- ws2ipdef.h --------\n651: #define MCAST_JOIN_SOURCE_GROUP     45\t// Join IP group/source.\n\n748: #if (NTDDI_VERSION >= NTDDI_WINXP)\n762: typedef struct group_source_req {\n783: #endif\n\nClearly that in some cases, if the macro MCAST_JOIN_SOURCE_GROUP is defined,\nstruct group_source_req is not defined (because #if). On Linux\n(http://lxr.oss.org.cn/source/include/linux/in.h), there is no #if\n(NTDDI_VERSION >= NTDDI_WINXP) like that.\n\nSo I think if we change the code of multicast.c from\n\n136: #if MCAST_JOIN_SOURCE_GROUP\n148: #if MCAST_JOIN_SOURCE_GROUP\n\nto\n\n136: #if defined(group_source_req)\n148: #if defined(group_source_req)\n\nthe error will be resolved.\n\nI have updated the file multicast.c and it fixed the issue on my machine\n(Windows XP, VS2005, Windows SDK 6.0) \n"}, {"count": 3, "tags": [], "bug_id": 40398, "is_private": false, "id": 104218, "attachment_id": 20330, "creator": "thaiha@psv.com.vn", "creation_time": "2007-06-08T10:39:11Z", "time": "2007-06-08T10:39:11Z", "text": "Created attachment 20330"}, {"count": 4, "tags": [], "bug_id": 40398, "text": "This test shouldn't work\n\n#if defined(group_source_req)\n\nbecause it's a struct not a #define.  We can do a HAVE_GROUP_SOURCE_REQ from\nautoconf, and in the win32 case simply define it as '1' in our prepared flavor\nof the .h.in headers we name .hw.\n\n\n", "id": 108248, "time": "2007-09-16T19:26:59Z", "creator": "wrowe@apache.org", "creation_time": "2007-09-16T19:26:59Z", "is_private": false, "attachment_id": null}, {"count": 5, "text": "I'll investigate this, but in the meantime DO NOT VIOLATE COPYRIGHTS \nby republishing copyrighted documents in violation of whatever license\nor lack thereof you have.\n\nThe attachment has been purged, please don't make us do this again.\n", "creator": "wrowe@apache.org", "is_private": false, "id": 109374, "time": "2007-10-15T23:55:02Z", "bug_id": 40398, "creation_time": "2007-10-15T23:55:02Z", "tags": [], "attachment_id": null}, {"attachment_id": 21318, "tags": [], "bug_id": 40398, "is_private": false, "count": 6, "id": 112207, "time": "2007-12-26T12:51:56Z", "creator": "wrowe@apache.org", "creation_time": "2007-12-26T12:51:56Z", "text": "Created attachment 21318\nenable IPv6+mcast groups\n\nSummary;\n\nThis moronic tangle of defintions and dependencies from the world according to \n\nthe win32 api in SDK versions 6.0 and later; it unconditionally declares \nMCAST_JOIN_SOURCE_GROUP, while it declares group_source_req etc only for \n_WIN32_WINNT_WINXP and later.  Testing defined(GROUP_FILTER_SIZE) instead of \nMCAST_JOIN_SOURCE_GROUP within multicast.c would solve this connundrum.\n\nThe alternative of defining _WIN32_WINNT as _WIN32_WINNT_WINXP does solve, \nbut need to confirm this doesn't have a side effect of breaking win2k etc.\n\nA patch is attached"}, {"count": 7, "tags": [], "bug_id": 40398, "attachment_id": 21318, "text": "Comment on attachment 21318\nenable IPv6+mcast groups\n\nReplacing...", "id": 112210, "time": "2007-12-26T13:58:11Z", "creator": "wrowe@apache.org", "creation_time": "2007-12-26T13:58:11Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 40398, "attachment_id": 21319, "text": "Created attachment 21319\nDirtier of two solutions; enable IPv6 + mcast source groups\n\nHere's an updated patch (to trunk) with cleaner lineends which will compile\non pre-XP SDK's.", "id": 112211, "time": "2007-12-26T13:59:46Z", "creator": "wrowe@apache.org", "creation_time": "2007-12-26T13:59:46Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 40398, "is_private": false, "id": 112212, "attachment_id": 21320, "creator": "wrowe@apache.org", "creation_time": "2007-12-26T14:01:27Z", "time": "2007-12-26T14:01:27Z", "text": "Created attachment 21320\nCleaner of two solutions; enable IPv6 + mcast source groups\n\nAccording to linux and win32 this may be a sufficiently portable alternative\nto the dirty-patch.  Win32 defines this macro (unlike the MCAST_ macro group)\nonly for WinXP sdk level."}, {"count": 10, "tags": [], "bug_id": 40398, "text": "Fixed for APR 1.2.13, the cleaner of the two patches was applied.", "id": 112448, "attachment_id": null, "creator": "wrowe@apache.org", "creation_time": "2008-01-02T19:44:21Z", "time": "2008-01-02T19:44:21Z", "is_private": false}]