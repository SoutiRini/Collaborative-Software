[{"count": 0, "tags": [], "bug_id": 8992, "attachment_id": null, "id": 15923, "time": "2002-05-10T21:54:13Z", "creator": "JamesHenderson@corsof.com", "creation_time": "2002-05-10T21:54:13Z", "is_private": false, "text": "When I try to access the following JSP using Tomcat 3.3.1 using IE6 as a \nbrowser on Windows XP with all three components running on the same machine), I \nreceive the following message:\n\n\"The page cannot be displayed.\"\n\nAlternatively, the browser will hang, awaiting a response from the server, but \nultimately serving nothing.\n\nThis appears to related to a limitation to the POST area of the message.  This \nhypothesis was drawn for two reasons:\n1. The error does not occur if only 27 hidden elements are displayed.\n2. The name of the hidden element is changed to be something smaller (like T). \n[Then, as a result, it may be possible to increase the number of hidden \nelements.]\n\nI have examined this problem changing:\n1. Netscape 6.22, in place of IE6 (also IE5.5)\n2. JRun 3.1, in place of Tomcat\n3. Windows 2000, in place of Windows XP\n\nIf I substitute one element out of the IE6/XP/Tomcat combination, everything \nwill work without failure.  I can submit the form over and over and over again \nwithout failing.  It is only the combination of IE6/XP/Tomcat (again, running \nlocally) that produces this problem.  (I can use IE6 on WinXP to access this \nJSP on another machine running Tomcat, and the JSP will execute properly.)\n\nI was hoping to use Tomcat 3.3.1, since Tomcat 4.x is still under production.\n\nI would appreciate any assistance that can be provided in diagnosing this error.\n\n\n\nHere is the JSP:\n\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\">\n\n<html>\n<head>\n\t<title>Untitled</title>\n</head>\n\n<body>\n<h1>Financial Calculator</h1>\n<form method=\"post\" action=\"Test.jsp\" name=\"TestForm\" id=\"TestForm\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType01\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType02\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType03\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType04\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType05\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType06\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType07\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType08\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType09\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType10\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType11\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType12\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType13\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType14\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType15\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType16\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType17\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType18\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType19\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType20\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType21\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType22\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType23\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType24\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType25\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType26\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType27\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType28\" value=\"0\">\n<!--\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType29\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType30\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType31\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType32\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType33\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType34\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType35\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType36\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType37\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType38\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType39\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType40\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType41\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType42\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType43\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType44\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType45\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType46\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType47\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType48\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType49\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType50\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType51\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType52\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType53\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType54\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType55\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType56\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType57\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType58\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType59\" value=\"0\">\n<input type=\"hidden\" size=\"1\" name=\"XXXXXXXXXXXType60\" value=\"0\">\n//-->\n<input type=\"submit\" name=\"Submit\">\n</form>\n\n\n</body>\n</html>"}, {"count": 1, "tags": [], "bug_id": 8992, "text": "Created attachment 1884\nSocket Exception caused using IE6 on WinXP with Tomcat", "id": 16280, "time": "2002-05-17T00:38:37Z", "creator": "JamesHenderson@corsof.com", "creation_time": "2002-05-17T00:38:37Z", "is_private": false, "attachment_id": 1884}, {"count": 2, "text": "This error occurs whil connecting to Tomcat via localhost directly to port 8080 \n(i.e., http://localhost:8080/)\n\nTo repeat issue:\n1. Press Submit button on page\n2. Wait for output in Tomcat window to display \"Created random class \njava.security.SecureRandom\"\n3. Connection cannot be made to Tomcat server with IE6 after above message is \ndisplayed  (IE6 displays \"The Page cannot be displayed...Cannot find server or \nDNS Error\") even though Tomcat is still running.\n\n\nTo cause exception within Tomcat\n1. Stop and Start Tomcat\n2. Press Submit button on page\n3. Press \"Stop\" button on IE6 toolbar immediately after \"Created random class \njava.security.SecureRandom\" message and Exception will occur\n4. Connection cannot be made to Tomcat server after above message is displayed\n", "bug_id": 8992, "attachment_id": null, "id": 16281, "time": "2002-05-17T00:41:27Z", "creator": "JamesHenderson@corsof.com", "creation_time": "2002-05-17T00:41:27Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 8992, "attachment_id": null, "text": "One correction I should note about this defect, you cannot install IE5.5 on \nWinXP.  It's just not possible.  (Refer to MS KB article Q293907).", "id": 16957, "time": "2002-05-30T18:47:10Z", "creator": "JamesHenderson@corsof.com", "creation_time": "2002-05-30T18:47:10Z", "is_private": false}, {"count": 4, "text": "Some additional information regarding this defect:\n\n(1) The SocketException that was not caught, can be reproduced on a Win 2000 \nmachine running IE5.5.\n\n(2) If a proxy is created (I wrote mine in 'C' to rule out the JVM as a \npotential problem area) that merely recieves the information from the browser \nand sends it to Tomcat, then this problem disappears.\n\n(3) Also, if you modify the OutputBuffer class in the realWriteBytes method, to \ninclude a Thread.sleep(2000), then the problem goes away (please note that you \nmust catch an InterruptedException and that the sleep value may need to be \nadjusted to prevent the problem).  [Note: You will need to patch \ntomcat_core.jar for this solution to work.] \n\nSimilarly, if you log the byte array (once you translate it to a StringBuffer) \nthat represents the response (which will dump the raw HTML to the screen), then \nthe problem will no longer occur).", "bug_id": 8992, "is_private": false, "id": 16960, "time": "2002-05-30T18:55:24Z", "creator": "JamesHenderson@corsof.com", "creation_time": "2002-05-30T18:55:24Z", "tags": [], "attachment_id": null}, {"count": 5, "text": "I haven't had a chance to try this myself, but I'm guessing that it is a \nproblem with Chunked-Encoding.  You should try replacing the Http10 Connector \nwith the Coyote Connector downloadable from:\n<<http://jakarta.apache.org/builds/jakarta-tomcat-\nconnectors/coyote/release/v1.0-rc2/>>\n\nCoyote is much better at dealing with modern HTTP/1.1 browsers.", "bug_id": 8992, "attachment_id": null, "id": 16963, "time": "2002-05-30T19:31:36Z", "creator": "william.barker@wilshire.com", "creation_time": "2002-05-30T19:31:36Z", "tags": [], "is_private": false}, {"count": 6, "text": "I tried William's suggestion and used Coyote, but this did not solve the \nproblem.  The problem still exists after I update Tomcat according to the \nCoyote v1.0 RC2 instructions.\n\nPlease note:\n(1) jk2.properties does not exist under the previous link.  I used the \njk2.properties located at http://jakarta.apache.org/builds/jakarta-tomcat-\nconnectors/coyote/release/v1.0-b8/\n\n(2) The instructions for Coyote v1.0 RC2 indicate that you must add the \nfollowing XML fragment to $TOMCAT_HOME/conf/modules.xml: \n\n<module name=\"CoyoteConnector\" \njavaClass=\"org.apache.coyote.tomcat3.CoyoteInterceptor\"/>\n\norg.apache.coyote.tomcat3.CoyoteInterceptor does not exist in the specified JAR \nfiles, but org.apache.coyote.tomcat3.CoyoteInterceptor2.class exists in \ntomcat33-coyote.jar (and this is the class that I specified within the XML \nelement).", "bug_id": 8992, "is_private": false, "id": 17011, "time": "2002-05-31T18:58:07Z", "creator": "JamesHenderson@corsof.com", "creation_time": "2002-05-31T18:58:07Z", "tags": [], "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 8992, "attachment_id": null, "text": "Using Coyote from CVS HEAD works fine (unfortunately, the TC33 Coyote broke \nbetween B9 and RC2 :(, but B9 should be ok as well).\n\nIt looks like this is a known problem with Http10Interceptor and Windows XP.  \nThe work-around is to set:\nsocketCloseDelay=\"250\"\n\t\t\t   \non the Http10Interceptor element in server.xml.  This gives XP time to finish \nI/O on the socket before it is closed.", "id": 17223, "time": "2002-06-05T21:08:45Z", "creator": "william.barker@wilshire.com", "creation_time": "2002-06-05T21:08:45Z", "is_private": false}, {"count": 8, "tags": [], "creator": "JamesHenderson@corsof.com", "attachment_id": null, "id": 17493, "time": "2002-06-10T14:48:55Z", "bug_id": 8992, "creation_time": "2002-06-10T14:48:55Z", "is_private": false, "text": "The \"socketCloseDelay='250'\" appears to solve the problem.\n\nThe element to modify within server.xml is Http10Connector not \nHttp10Interceptor.  The modified element should appear as follows:\n\n        <Http10Connector   port=\"8080\" \n\t\t\t   secure=\"false\"\n\t\t\t   maxThreads=\"100\"\n\t\t\t   maxSpareThreads=\"50\"\n\t\t\t   minSpareThreads=\"10\"\n                           socketCloseDelay=\"250\" />\n\n\nIn tracking down where socketCloseDelay is used within Tomcat (used in \nHttp10Interceptor) it is used as a value for a Thread.sleep before \nTcpConnection.shutDownInput is called.  It appears that by using this call to \nThread.sleep, a race condition is occuring on the XP platform for the default \nvalue. \n\nIt would seem that the preferred method would be to set \"tcpNoDelay\" to true.  \nHowever, I set the member variable \"tcpNoDelay\" of the PoolTcpEndpoint class to \nbe true.  I then rebuilt the class, and updated the container/tomcat_util.jar \nfile.  This should cause the incoming socket to not use Nagle's algorithm when \nsending TCP/IP packets, but for some reason this did not rectify the problem.  \n\n"}, {"count": 9, "tags": [], "creator": "william.barker@wilshire.com", "text": "*** Bug 11137 has been marked as a duplicate of this bug. ***", "id": 20145, "time": "2002-07-24T18:35:45Z", "bug_id": 8992, "creation_time": "2002-07-24T18:35:45Z", "is_private": false, "attachment_id": null}, {"count": 10, "text": "The CoyoteConnector is now the default connector for 3.3.2, so I'm marking as \nthis FIXED.", "bug_id": 8992, "is_private": false, "id": 53581, "time": "2004-03-07T07:15:07Z", "creator": "william.barker@wilshire.com", "creation_time": "2004-03-07T07:15:07Z", "tags": [], "attachment_id": null}]