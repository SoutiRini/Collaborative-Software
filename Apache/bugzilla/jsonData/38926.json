[{"count": 0, "tags": [], "bug_id": 38926, "attachment_id": null, "id": 86704, "time": "2006-03-11T01:32:29Z", "creator": "renaud.richardet@wyona.com", "creation_time": "2006-03-11T01:32:29Z", "is_private": false, "text": "... even if it is an .odt document (e.g.\nhttp://localhost:8888/default/webdav/doctypes/opendocument)\nThis is because doc.getExtension() (as used in\nmodules/webdav/usecases/webdav/propfind.jx) is hardcoded to return html. \n\nSo, *what is the best way to get the \"real\" file extention of a file?* There is\na method document.getSourceExtension(), which returns the value of the metadata\n<lenya:extension>. Adding this metadata to a document, and then using\n${doc.getSourceExtension()} instead of ${doc.getExtension()} in\nmodules/webdav/usecases/webdav/propfind.jx will display the correct extension.\nIs it the way to go? \nI see the following issues:\n1) you need to add the metadata to each document. IMHO the source extension\nshould be specified at the ressource-type level, and not document level.\n2) for xhtml docs, we want to be able to display the file extention \"xhtml\" in\nthe webdav folder, and not \"xml\" \nAny hints?"}, {"count": 1, "tags": [], "bug_id": 38926, "text": "(In reply to comment #0)\n> ... even if it is an .odt document (e.g.\n> http://localhost:8888/default/webdav/doctypes/opendocument)\n> This is because doc.getExtension() (as used in\n> modules/webdav/usecases/webdav/propfind.jx) is hardcoded to return html. \n> \n> So, *what is the best way to get the \"real\" file extention of a file?* There is\n> a method document.getSourceExtension(), which returns the value of the metadata\n> <lenya:extension>. Adding this metadata to a document, and then using\n> ${doc.getSourceExtension()} instead of ${doc.getExtension()} in\n> modules/webdav/usecases/webdav/propfind.jx will display the correct extension.\n> Is it the way to go?\n\nYes.\n\n> I see the following issues:\n> 1) you need to add the metadata to each document. IMHO the source extension\n> should be specified at the ressource-type level, and not document level.\n\nNo (see my mail on dev@lenya (\"Include file extension in document ID / meta\ndata?\"). Imagine an image resource type (.jpg, .png, .bmp, ...)\n\n> 2) for xhtml docs, we want to be able to display the file extention \"xhtml\" in\n> the webdav folder, and not \"xml\" \n\nNo idea -> dev@lenya.\n\n-- Andreas\n\n", "id": 86757, "time": "2006-03-13T08:26:52Z", "creator": "andreas@apache.org", "creation_time": "2006-03-13T08:26:52Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Created attachment 17888\nunified diff against trunk\n\n- WebDAV file listing shows the real file extension of the content.\n- Added meta extension to .odt sample documents\n- Fixed matcher for /PUT in webdav/sitemap.xmap\n\nTo open an odt with cadaver:\n- cd doctypes\n- set editor ooffice2 \n- edit opendocument_en.odt\n\nTODO:\n- save odt's (and any file type). you can only save xhtml docs ATM\n- not tested on XP\n- Add meta tag <lenya:extension> at document creation\n- add meta tag <lenya:extension>xhtml<lenya:extension> for the current xhtml\ncontent (not sure this will work??)", "is_private": false, "id": 86780, "creator": "renaud.richardet@wyona.com", "time": "2006-03-13T17:37:14Z", "bug_id": 38926, "creation_time": "2006-03-13T17:37:14Z", "attachment_id": 17888}, {"count": 3, "tags": [], "bug_id": 38926, "attachment_id": null, "id": 86795, "time": "2006-03-14T11:09:54Z", "creator": "thorsten@apache.org", "creation_time": "2006-03-14T11:09:54Z", "is_private": false, "text": "Applied, thx Renaud. :)\n\nCommit de la revisi\u00f3n 385788.\n"}, {"count": 4, "tags": [], "bug_id": 38926, "text": "Renaming Lenya 1.4 to 2.0", "id": 105602, "time": "2007-07-16T01:59:32Z", "creator": "thorsten@apache.org", "creation_time": "2007-07-16T01:59:32Z", "is_private": false, "attachment_id": null}]