[{"count": 0, "tags": [], "creator": "wheyboer@triennium.com", "attachment_id": null, "id": 91416, "time": "2006-07-19T12:40:54Z", "bug_id": 40074, "creation_time": "2006-07-19T12:40:54Z", "is_private": false, "text": "The ant task to get files from a webdav repository discards parts of files. \nThis has something to do with the InputStream.available which might 0 whenever\nthere's still data available in the stream so the remaining data is discarded.\nI created a fix by using WebdavResource, which works fine but, because I was in\na hurry, it's a little dirty. Below you'll find the fix.\n\n\n\n\tprivate void getAndStoreResource(HttpURL url, File target)throws\nIOException,IOException,FileNotFoundException{\n\t\tFile directory = target.getParentFile();\n\t\tif(!directory.exists())\n\t\t\tdirectory.mkdirs();\n\t\turl.setUserinfo(userid,password);\n\t\tWebdavResource webdavResource = Utils.getWebdavResource(url);\n        log(\"Downloading  '\" +url.getURI());\n        if (webdavResource.getMethod(target)) {\n           log(\"succeeded.\");\n           countWrittenFiles++;\n        } else {\n           log(\"failed.\");\n           log(webdavResource.getStatusMessage());\n\t\t}\n        webdavResource.close();\n\t}"}]