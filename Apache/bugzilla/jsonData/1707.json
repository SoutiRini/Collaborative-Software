[{"count": 0, "tags": [], "creator": "kchan@borland.com", "attachment_id": null, "id": 2400, "time": "2001-05-10T20:58:15Z", "bug_id": 1707, "creation_time": "2001-05-10T20:58:15Z", "is_private": false, "text": "With the 2001-05-10 nightly build, using the RequestDumperValve prevents basic \nsocket code from reading the inputstream. Running the test class:\n\nimport java.io.*;\nimport java.net.*;\n\npublic class ReadyTest {\n\n  public static void main(String[] args) {\n    try {\n      Socket socket = new Socket(\"localhost\", 8080);\n\n      PrintStream out = new PrintStream(socket.getOutputStream());\n      out.print(\"GET / HTTP/1.0\");\n      out.print(\"\\r\\n\\r\\n\");\n\n      System.err.print(socket.getInputStream().available());\n    }\n    catch (Exception x) {\n      x.printStackTrace();\n    }\n  }\n\n}\n\n\nwith the out-of-the-box config works fine (I get 473). Uncommenting the \nRequestDumperValve in conf/server.xml causes the test to return 0. Repeated \nchecking of available() makes no difference.\n\nI am trying to start Tomcat and use code similar to this to detect when it is \nup. This was working in beta 2 (and Tomcat 3.2.1)"}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "A NPE was occuring inside the RequestDumperValve, due to a change of the \nbehavior of the getCookies() call (which now returns null instead of a zero \nlength array).", "id": 2496, "time": "2001-05-17T01:43:28Z", "bug_id": 1707, "creation_time": "2001-05-17T01:43:28Z", "is_private": false, "attachment_id": null}]