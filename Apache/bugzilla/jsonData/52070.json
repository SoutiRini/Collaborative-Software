[{"count": 0, "tags": [], "bug_id": 52070, "attachment_id": null, "is_private": false, "id": 150831, "time": "2011-10-21T19:51:34Z", "creator": "mhubert@inergizedigital.com", "creation_time": "2011-10-21T19:51:34Z", "text": "After installing Android SDK tools revision 14(ant version 1.8.2 when doing ant -version) to install and test our apps on Android 4.0(ICS), I've noticed that our automatic build script is now failing. The build script is executing an ant command to build the apk, which after the revision update complained about the build.xml file being out of date and to execute the ant update project -p to fix this. Our project has a top level project and two library projects it references, all developed in IntelliJ. I ran the update project command in each project folder after deleting out the old build.xml file. Now I'm getting the following message:\n\n<SDK_DIR>/tools/ant/build.xml:466: The following error occurred while executing this line:\n<SDK_DIR>/tools/ant/build.xml:539: The following error occurred while executing this line:\n<SDK_DIR>/tools/ant/build.xml:568: null returned: 1\n\nI've included the code for the main project and library projects build.xml file below(same for each):\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project name=\"LaunchActivity\" default=\"help\">\n    <loadproperties srcFile=\"local.properties\" />\n    <property file=\"ant.properties\" />\n    <loadproperties srcFile=\"project.properties\" />\n    <fail \n        message=\"sdk.dir is missing. Make sure to generate local.properties using 'android update project'\"\n        unless=\"sdk.dir\"\n/>\n    <import file=\"${sdk.dir}/tools/ant/build.xml\" />\n</project>\n\nWith the new project.properties files(below): AppMain(non-library project):\n\nandroid.library.reference.1=../Common\nandroid.library.reference.2=../facebook\n# Project target.\ntarget=Google Inc.:Google APIs:8\n\nCommon(library project):\n\nandroid.library=true\n# Project target.\ntarget=Google Inc.:Google APIs:8\n\nfacebook(library project):\n\nandroid.library=true\n# Project target.\ntarget=Google Inc.:Google APIs:8\n\nLooking for a way to find out what's at the line number in the error message and/or the issue in getting this to run. I also have a build.properties file that I had included in the AppMain build.xml file to specify key.store key.alias values for creating a signed apk, which I'm assuming I can add back in to the build.xml after this issue is resolved."}, {"count": 1, "tags": [], "text": "The error text I posted was pretty vague(null returned: 1). So digging in a bit more, I discovered there was a way to specify an Ant logFile. I did this and found out that it was blowing up on compile. Turns out the new compiler didnt like that a few resource names in the generate R classes were the same. I renamed the ones that conflicted and after wading through a couple more compilation issues(case statements with R.id. was a no-no in this compiler version apparently) I was able to get this to work. The Ant LogFile was definitely the way to go to debug this issue. The following is what I used to generate a logFile while issuing the ant release command:\n\nant -logfile //antLogFile.txt release -f ./AppMain/build.xml", "is_private": false, "id": 150876, "creator": "mhubert@inergizedigital.com", "time": "2011-10-24T15:49:28Z", "bug_id": 52070, "creation_time": "2011-10-24T15:49:28Z", "attachment_id": null}]