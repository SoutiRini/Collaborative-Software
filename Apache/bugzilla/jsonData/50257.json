[{"count": 0, "tags": [], "bug_id": 50257, "text": "Moved from using mod_auth_krb to mod_authnz_ldap, and noticing a problem.\n\nWith previous setup, a successful authentication + failed authorization results in a 401 w/o the WWW-Authenticate header. \n\nWith mod_authnz_ldap, it always returns the WWW-Authenticate header, even if authentication was successful.\n\nThis changes user behaviour significantly in the case of a page they are not supposed to have access to, even though they have correctly entered their userid+pw. \n\nI have not been able to find any combination of  authoritative config options to get this to work as expected. Is this an expected limitation of mod_authnz_ldap, or am I just missing something in my configuration?\n\n---------\n[Thu Nov 11 14:00:01 2010] [debug] mod_authnz_ldap.c(379): [client 131.151.49.1] [28790] auth_ldap authenticate: using URL ldap://mst-gc.mst.edu:3268/dc=edu?sAMAccountName?sub?(objectClass=*)\n[Thu Nov 11 14:00:01 2010] [debug] mod_authnz_ldap.c(484): [client 131.151.49.1] [28790] auth_ldap authenticate: accepting nneul\n[Thu Nov 11 14:00:01 2010] [debug] mod_authnz_ldap.c(665): [client 131.151.49.1] [28790] auth_ldap authorise: require user: authorisation failed [Comparison false (cached)][Compare False]\n[Thu Nov 11 14:00:01 2010] [debug] mod_authnz_ldap.c(685): [client 131.151.49.1] [28790] auth_ldap authorise: require user: authorisation failed [Comparison false (cached)][Compare False]\n[Thu Nov 11 14:00:01 2010] [debug] mod_authnz_ldap.c(874): [client 131.151.49.1] [28790] auth_ldap authorise: authorisation denied\n----------", "id": 141639, "time": "2010-11-11T15:25:21Z", "creator": "nneul@mst.edu", "creation_time": "2010-11-11T15:25:21Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 50257, "attachment_id": null, "text": "This is really a comparison between mod_auth_krb and any in-tree authorization provider, right? \n\nRFC2616 says a 401 must include www-authenticate, and that a 401 means authorization was denied.", "id": 141644, "time": "2010-11-11T17:44:50Z", "creator": "covener@gmail.com", "creation_time": "2010-11-11T17:44:50Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 50257, "attachment_id": null, "text": "Interesting, I think you may be right there. It's been a while since I used other auth modules - I'm just used to the mod_auth_krb behavior where it doesn't continually reprompt for user+pw for an authorization failure. \n\nIs there any way to get that similar behavior - where an authorization failure (as opposed to authentication failure) doesn't result in another password prompt with the basic auth facility?", "id": 141647, "time": "2010-11-11T18:01:04Z", "creator": "nneul@mst.edu", "creation_time": "2010-11-11T18:01:04Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 50257, "text": "I don't think this is something that can be made optional", "count": 3, "id": 142371, "time": "2010-12-04T07:55:21Z", "creator": "covener@gmail.com", "creation_time": "2010-12-04T07:55:21Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 50257, "attachment_id": null, "text": "(In reply to comment #3)\n> I don't think this is something that can be made optional\n\nTrue for 2.2. But mod_authz_core in trunk has all necessary information to make the behaviour configurable.\n\n*** This bug has been marked as a duplicate of bug 40721 ***", "id": 142373, "time": "2010-12-04T08:17:00Z", "creator": "sf@sfritsch.de", "creation_time": "2010-12-04T08:17:00Z", "is_private": false}]