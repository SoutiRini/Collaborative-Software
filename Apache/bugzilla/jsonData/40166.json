[{"count": 0, "tags": [], "creator": "midha.rakesh@gmail.com", "attachment_id": null, "id": 91822, "time": "2006-08-02T14:22:13Z", "bug_id": 40166, "creation_time": "2006-08-02T14:22:13Z", "is_private": false, "text": "I downloaded the latest trunk code from SVN\n\nNew Publication is not working, when I try to make New Publication I get\nfollowing error \nThe configuration file\n[C:\\marquis1\\lenya1.4_2607\\lenya-1.4.x\\build\\lenya\\webapp\\lenya\\pubs\\index.html\\config\\publication.xconf]\ndoes not exist!\n\norg.apache.cocoon.ProcessingException: Error calling flowscript function\nexecuteUsecase at\nresource://org/apache/cocoon/components/flow/javascript/fom/fom_system.js:19:-1\nat\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/lenya/usecases/usecases.js:214:-1\nat <map:call> -\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/lenya/usecases/usecase.xmap:100:45\nat <map:mount> -\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/lenya/usecase.xmap:56:128\nat <map:mount> -\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/global-sitemap.xmap:309:105\nat <map:mount> -\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/sitemap.xmap:1072:106\n\ncause: java.lang.RuntimeException: The configuration file\n[C:\\marquis1\\lenya1.4_2607\\lenya-1.4.x\\build\\lenya\\webapp\\lenya\\pubs\\index.html\\config\\publication.xconf]\ndoes not exist!\n\nfull exception chain stacktrace[Show]\n\norg.apache.cocoon.ProcessingException: Error calling flowscript function\nexecuteUsecase\n\tat resource://org/apache/cocoon/components/flow/javascript/fom/fom_system.js:19:-1\n\tat\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/lenya/usecases/usecases.js:214:-1\n\tat <map:call> -\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/lenya/usecases/usecase.xmap:100:45\n\tat <map:mount> -\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/lenya/usecase.xmap:56:128\n\tat <map:mount> -\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/global-sitemap.xmap:309:105\n\tat <map:mount> -\nfile:/C:/marquis1/lenya1.4_2607/lenya-1.4.x/build/lenya/webapp/sitemap.xmap:1072:106\n\tat org.apache.cocoon.ProcessingException.throwLocated(ProcessingException.java:144)\n\tat\norg.apache.cocoon.components.flow.javascript.LocationTrackingDebugger.getException(LocationTrackingDebugger.java:131)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_JavaScriptInterpreter.callFunction(FOM_JavaScriptInterpreter.java:759)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.CallFunctionNode.invoke(CallFunctionNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:142)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:252)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MatchNode.invoke(MatchNode.java:107)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:142)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:252)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:142)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:252)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.MountNode.invoke(MountNode.java:117)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.ActTypeNode.invoke(ActTypeNode.java:138)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:142)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:176)\n\tat\norg.apache.cocoon.components.treeprocessor.TreeProcessor.process(TreeProcessor.java:252)\n\tat org.apache.cocoon.Cocoon.process(Cocoon.java:686)\n\tat org.apache.cocoon.servlet.CocoonServlet.service(CocoonServlet.java:1153)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:689)\n\tat org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:427)\n\tat\norg.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:475)\n\tat org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:567)\n\tat org.mortbay.http.HttpContext.handle(HttpContext.java:1565)\n\tat\norg.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:635)\n\tat org.mortbay.http.HttpContext.handle(HttpContext.java:1517)\n\tat org.mortbay.jetty.plus.PlusWebAppContext.handle(PlusWebAppContext.java:158)\n\tat org.mortbay.http.HttpServer.service(HttpServer.java:954)\n\tat org.mortbay.http.HttpConnection.service(HttpConnection.java:814)\n\tat org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:981)\n\tat org.mortbay.http.HttpConnection.handle(HttpConnection.java:831)\n\tat org.mortbay.http.SocketListener.handleConnection(SocketListener.java:244)\n\tat org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)\n\tat org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)\nCaused by: java.lang.RuntimeException: org.apache.lenya.cms.site.SiteException:\njava.lang.RuntimeException: The configuration file\n[C:\\marquis1\\lenya1.4_2607\\lenya-1.4.x\\build\\lenya\\webapp\\lenya\\pubs\\index.html\\config\\publication.xconf]\ndoes not exist!\n\tat org.apache.lenya.cms.publication.PageEnvelope.getDocument(PageEnvelope.java:293)\n\tat\norg.apache.lenya.cms.cocoon.components.modules.input.PageEnvelopeModule.getAttribute(PageEnvelopeModule.java:81)\n\tat\norg.apache.cocoon.components.treeprocessor.variables.PreparedVariableResolver.processModule(PreparedVariableResolver.java:272)\n\tat\norg.apache.cocoon.components.treeprocessor.variables.PreparedVariableResolver.resolve(PreparedVariableResolver.java:208)\n\tat\norg.apache.cocoon.components.treeprocessor.variables.VariableResolver.buildParameters(VariableResolver.java:106)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.TransformNode.invoke(TransformNode.java:59)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:46)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PreparableMatchNode.invoke(PreparableMatchNode.java:130)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelineNode.invoke(PipelineNode.java:142)\n\tat\norg.apache.cocoon.components.treeprocessor.AbstractParentProcessingNode.invokeNodes(AbstractParentProcessingNode.java:68)\n\tat\norg.apache.cocoon.components.treeprocessor.sitemap.PipelinesNode.invoke(PipelinesNode.java:92)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.process(ConcreteTreeProcessor.java:235)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.handleCocoonRedirect(ConcreteTreeProcessor.java:300)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor.access$000(ConcreteTreeProcessor.java:47)\n\tat\norg.apache.cocoon.components.treeprocessor.ConcreteTreeProcessor$TreeProcessorRedirector.cocoonRedirect(ConcreteTreeProcessor.java:341)\n\tat\norg.apache.cocoon.environment.ForwardRedirector.redirect(ForwardRedirector.java:59)\n\tat\norg.apache.cocoon.components.flow.AbstractInterpreter.forwardTo(AbstractInterpreter.java:209)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_JavaScriptInterpreter.forwardTo(FOM_JavaScriptInterpreter.java:905)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_Cocoon.forwardTo(FOM_Cocoon.java:699)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_Cocoon.jsFunction_sendPage(FOM_Cocoon.java:270)\n\tat inv6.invoke()\n\tat org.mozilla.javascript.FunctionObject.doInvoke(FunctionObject.java:523)\n\tat org.mozilla.javascript.FunctionObject.call(FunctionObject.java:438)\n\tat org.mozilla.javascript.ScriptRuntime.call(ScriptRuntime.java:1244)\n\tat\norg.mozilla.javascript.continuations.ContinuationInterpreter.interpret(ContinuationInterpreter.java:1134)\n\tat\norg.mozilla.javascript.continuations.ContinuationInterpreter.interpret(ContinuationInterpreter.java:190)\n\tat\norg.mozilla.javascript.continuations.ContinuationInterpreter.interpret(ContinuationInterpreter.java:138)\n\tat\norg.mozilla.javascript.continuations.InterpretedFunctionImpl.call(InterpretedFunctionImpl.java:121)\n\tat org.mozilla.javascript.ScriptRuntime.call(ScriptRuntime.java:1244)\n\tat\norg.apache.cocoon.components.flow.javascript.fom.FOM_JavaScriptInterpreter.callFunction(FOM_JavaScriptInterpreter.java:757)\n\t... 59 more\nCaused by: org.apache.lenya.cms.site.SiteException: java.lang.RuntimeException:\nThe configuration file\n[C:\\marquis1\\lenya1.4_2607\\lenya-1.4.x\\build\\lenya\\webapp\\lenya\\pubs\\index.html\\config\\publication.xconf]\ndoes not exist!\n\tat org.apache.lenya.cms.site.SiteUtil.isDocument(SiteUtil.java:578)\n\tat org.apache.lenya.cms.publication.PageEnvelope.getDocument(PageEnvelope.java:289)\n\t... 89 more\nCaused by: java.lang.RuntimeException: The configuration file\n[C:\\marquis1\\lenya1.4_2607\\lenya-1.4.x\\build\\lenya\\webapp\\lenya\\pubs\\index.html\\config\\publication.xconf]\ndoes not exist!\n\tat\norg.apache.lenya.cms.publication.PublicationImpl.loadConfiguration(PublicationImpl.java:109)\n\tat\norg.apache.lenya.cms.publication.PublicationImpl.getDocumentBuilderHint(PublicationImpl.java:322)\n\tat org.apache.lenya.cms.site.SiteUtil.isDocument(SiteUtil.java:566)\n\t... 90 more\n\nstacktrace[Show]\n\nI debugged the code and found that problem is coming from SiteUtil.java's\nisDocument method. This is recently changed.\n\nThe problem is we are trying to get DocumentBinder  for a publication which\ndoesn't exist. Which means any process executed on index.html will fail because\nof this code.\n\nWe need to add if(!pub.exists())return false;\nafter\n            Publication pub = PublicationUtil.getPublication(manager,\ninfo.getPublicationId());"}, {"attachment_id": null, "tags": [], "bug_id": 40166, "is_private": false, "count": 1, "id": 92534, "time": "2006-08-25T12:05:10Z", "creator": "andreas@apache.org", "creation_time": "2006-08-25T12:05:10Z", "text": "This change has been applied.\n\"New publication\" seems to work again."}, {"attachment_id": null, "tags": [], "creator": "thorsten@apache.org", "is_private": false, "count": 2, "id": 105543, "time": "2007-07-16T01:59:11Z", "bug_id": 40166, "creation_time": "2007-07-16T01:59:11Z", "text": "Renaming Lenya 1.4 to 2.0"}]