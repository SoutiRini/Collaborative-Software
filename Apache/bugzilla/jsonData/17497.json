[{"count": 0, "tags": [], "bug_id": 17497, "attachment_id": null, "id": 32098, "time": "2003-02-27T16:18:21Z", "creator": "hiro-abe@is.aist-nara.ac.jp", "creation_time": "2003-02-27T16:18:21Z", "is_private": false, "text": "Apache-2.0.44 with mod_mime_magic generates incorrect responses for some files\nin Japanese.\n The problem seems to happen when the requested file includes escape character\n(Japanese files encoded in ISO-2022-JP always include it) and does not have any\nextensions.\n\n The following procedure reproduces this problem:\n\n 1. generate a file with escape character:\n  % perl -e 'print \"Nagoya, the 3rd largest city in Japan, is written as\n\\x1b\\$BL>8E20\\x1b(B in Japanese.\"' > file_with_escapes,\n 2. copy it to somewhere accessible via Apache\n 3. and request it through Apache with mod_mime_magic.\n\n\n When I tried the procedure above, I got\n\n--- snip ----\nHTTP/1.1 200 OK\nDate: Apache/2.0.44 (Unix) DAV/2\nLast-Modified: Sun, 16 Feb 2003 15:05:28 GMT\nETag: \"92611-4e-319e00\"\nAccept-Ranges: bytes\nContent-Length: 78\nConnection: close\nContent-Type: text/plain ; charset=ISO-8859-1\nContent-Encoding: (with\n--- snip ---\n\nas HTTP response.  I think the value of Content-Encoding header is wrong.\n\n\nRegards,\n ABE Hiroshi"}, {"count": 1, "tags": [], "bug_id": 17497, "text": "mod_mime_magic does more or less black magic, which is known not to work always\nas desired ;-)\n\nSorry, it's the nature of mod_mime_magic to _guess_ the file type. So if the\nguess is wrong, you have to change the magic file or, even better, configure the\nfiletype explicitely. So it's all in all a configuration problem, not a bug.\n\nThanks for using Apache.", "id": 32492, "time": "2003-03-05T19:32:26Z", "creator": "nd@perlig.de", "creation_time": "2003-03-05T19:32:26Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 17497, "attachment_id": 5175, "id": 32530, "time": "2003-03-06T03:57:22Z", "creator": "hiro-abe@is.aist-nara.ac.jp", "creation_time": "2003-03-06T03:57:22Z", "is_private": false, "text": "Created attachment 5175\npatch to show the mod_mime_magic.c has a bug"}, {"count": 3, "text": " I understand there are some case the mod_mime_magic does not work as I want to.\n\n But still, I think there is a bug in mod_mime_magic because I think the\nContent-Encoding header may not have `` (with'' as its value in this case.\n\n To show this is bug, I tried the procedure in the first report with attached\npatch.  Then I got\n\n---- snip ----\nHTTP/1.1 200 OK\nDate: Thu, 06 Mar 2003 03:36:07 GMT\nServer: Apache/2.0.44 (Unix) DAV/2\nLast-Modified: Thu, 27 Feb 2003 16:15:04 GMT\nETag: \"8f8ba-4e-415b7200\"\nAccept-Ranges: bytes\nContent-Length: 78\nConnection: close\nContent-Type: text/plain_(with_escape_sequences); charset=ISO-8859-1\n---- snip ----\n\n The value of ``Content-Type'' header is slightly changed and there is no\n``Content-Encoding'' header.  In my opinion, whitespaces in the header causes this.", "bug_id": 17497, "attachment_id": null, "id": 32531, "time": "2003-03-06T04:19:43Z", "creator": "hiro-abe@is.aist-nara.ac.jp", "creation_time": "2003-03-06T04:19:43Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 71520, "time": "2005-02-25T17:16:53Z", "bug_id": 17497, "creation_time": "2005-02-25T17:16:53Z", "is_private": false, "text": "*** Bug 33530 has been marked as a duplicate of this bug. ***"}]