[{"count": 0, "tags": [], "creator": "psurette@espial.com", "attachment_id": null, "id": 7472, "time": "2001-11-01T21:00:52Z", "bug_id": 4583, "creation_time": "2001-11-01T21:00:52Z", "is_private": false, "text": "ant.bat adds all jars in the lib/ directory into\nthe system classpath, but it does not add zip\nfiles.\n\nAs far as I know, it is still legal, if deprecated\nto distribute java libraries in zip files, and\noracle does exactly this (drivers are classes111.zip\nor classes12.zip). \n\nHere's the patch for ant.bat (the ant shell\nscript will need something similar):\n*** ant.bat     Mon Oct  1 19:41:56 2001\n--- myant.bat   Fri Nov  2 00:06:14 2001\n***************\n*** 70,75 ****\n--- 70,76 ----\n  set _JAVACMD=%JAVACMD%\n  set LOCALCLASSPATH=%CLASSPATH%\n  for %%i in (\"%ANT_HOME%\\lib\\*.jar\") do call \"%ANT_HOME%\\bin\\lcp.bat\" %%i\n+ for %%i in (\"%ANT_HOME%\\lib\\*.zip\") do call \"%ANT_HOME%\\bin\\lcp.bat\" %%i\n\n  if \"%JAVA_HOME%\" == \"\" goto noJavaHome\n  if \"%_JAVACMD%\" == \"\" set _JAVACMD=%JAVA_HOME%\\bin\\java"}, {"count": 1, "tags": [], "bug_id": 4583, "attachment_id": null, "id": 7750, "creation_time": "2001-11-11T01:32:53Z", "time": "2001-11-11T01:32:53Z", "creator": "sbailliez@apache.org", "text": "I'm not sure this is a good idea. It's better to avoid it for good and not \nrelies on it anymore. The only way to not support this for instance is to not \nimplement it.\n\nAFAIK Oracle is the only one to redistribute their binaries as .zip which is \nunfortunate since it does not have any manifest information and will confuse \npeople trying to deploy their webapp under Tomcat since it only picks up .jar \nfiles in WEB-INF/lib. zip files are not picked up.\n\nThe best thing to do is to rename your .zip into a .jar so that it is commonly \naccepted without problems everywhere and to anticipate when Oracle will decide \nto ship there drivers as .jar. (It also makes a clear distinction between \nwhat's real zip archives or not but that's another problem)", "is_private": false}, {"count": 2, "tags": [], "creator": "steve_l@iseran.com", "attachment_id": null, "id": 8021, "time": "2001-11-16T20:07:14Z", "bug_id": 4583, "creation_time": "2001-11-16T20:07:14Z", "is_private": false, "text": "It is worth noting that the latest version of apple quicktime also redists \nstuff in zip format into lib/ext if you ask for java support for quicktime \nwhen installing it; it also patches this into the classpath with quotes in the \nCP such that it actually breaks the java invocation of ant somehow; \nException in thread \"main\" java.lang.NoClassDefFoundError: \nFiles\\JavaSoft\\JRE\\13\\lib\\ext\\QTJava/zip\n\nwhen \nCLASSPATH=\"C:\\Program Files\\JavaSoft\\JRE\\1.3\\lib\\ext\\QTJava.zip\"\n\nI still dont think zipfiles should be pulled in, and I dont know why the QT \ninstaller breaks ant in the process of adding a zip to the CP; I suspect it is \nthe extraneous quotation marks that are doing it. \n\n"}, {"count": 3, "tags": [], "creator": "umagesh@apache.org", "text": "Workaround suggested.\n", "id": 8692, "time": "2001-12-07T08:27:55Z", "bug_id": 4583, "creation_time": "2001-12-07T08:27:55Z", "is_private": false, "attachment_id": null}]