[{"attachment_id": null, "tags": [], "bug_id": 7988, "is_private": false, "count": 0, "id": 13288, "time": "2002-04-11T22:59:23Z", "creator": "paul@murph.org", "creation_time": "2002-04-11T22:59:23Z", "text": "When using a custom header with mod_autoindex (the HeaderName directive), the \nfollowing SSI in the header file produces the URI of the header file, not the \nURI of the directory, as per Apache 1.3.x:\n\n    <!--#echo var=\"DOCUMENT_URI\" -->\n\nSee http://www.murph.org/photos/ for an example of what I'm doing.  Yes, that \nserver is still on Apache 1.3.22, as I'm still working on getting 2.0.35 stable \nenough to replace it.\n\nI have produced a patch for 2.0.35 which reverts to the old 1.3.x behaviour, \nand have it on test at http://www.murph.org:81/photos/ (not available 100% of \nthe time).  I have tested this patch on Solaris 8/SPARC (with recent Sun \npatches), and it seems to achieve the correct result without introducing any \nadditional instability.  The patch will follow shortly."}, {"count": 1, "attachment_id": 1529, "creator": "paul@murph.org", "is_private": false, "id": 13289, "time": "2002-04-11T23:00:36Z", "bug_id": 7988, "creation_time": "2002-04-11T23:00:36Z", "tags": [], "text": "Created attachment 1529\nFix for bug"}, {"attachment_id": null, "tags": [], "bug_id": 7988, "is_private": false, "count": 2, "id": 13515, "time": "2002-04-14T19:33:05Z", "creator": "paul@murph.org", "creation_time": "2002-04-14T19:33:05Z", "text": "I have done a bit more digging and found that this problem is not mod_autoindex \nspecific, but more mod_include specific, so have changed the description \nfrom \"DOCUMENT_URI incorrect in mod_autoindex header\" to \"Include variables not \ninherited correctly in mod_include\" and updated the category accordingly.  My \npatch to revert to 1.3.x behaviour for mod_autoindex does not fix the problem I \nhave discovered with nested include files.\n\nI have also set up some more specific test pages at \nhttp://www.murph.org:81/test/ (Apache 1.3.22) and http://www.murph.org:82/test/ \n(Apache 2.0.35) (my port 80 server is now 2.0.35).\n\nThe variables which should be inherited from the document requested by the user \n(not necessarily the current .shtml file) are:\n\n    DOCUMENT_NAME \n    DOCUMENT_URI \n    LAST_MODIFIED \n\nThis behaviour is documented at:\n\n    http://httpd.apache.org/docs-2.0/mod/mod_include.html#includevars\n\n\nThe main reason for me wanting this behaviour is to have a standard footer \nincluded as <!--#include virtual=\"/include/footer\" --> on each page (using \nMultiViews as well so that I can change the type and/or language of the footer \nfile at a later date, if desired, without updating all of the individual pages)."}, {"attachment_id": null, "tags": [], "bug_id": 7988, "is_private": false, "count": 3, "id": 14684, "time": "2002-04-25T05:49:09Z", "creator": "jerenkrantz@apache.org", "creation_time": "2002-04-25T05:49:09Z", "text": "This problem appears to be fixed in HEAD of httpd-2.0.  (I can't reproduce it.)\n\nIf you can reproduce it either with a current httpd-2.0 CVS snapshot or the\nforthcoming Apache 2.0.36, please feel free to reopen this bug.\n\nThanks for using Apache!"}]