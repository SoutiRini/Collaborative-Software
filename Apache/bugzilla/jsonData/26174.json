[{"count": 0, "tags": [], "bug_id": 26174, "text": "In the default RPM installation, the following servlet code causes a \nNoClassDefFoundError when running under the security manager.\n\nRequestDispatcher rd = servletcontext.getNamedDispatcher(\"default\");\n\nThis problem was solved by putting the following into catalina.policy:\n\tpermission \njava.lang.RuntimePermission \"accessClassInPackage.org.apache.catalina.*\";\n\tpermission \njava.lang.RuntimePermission \"accessClassInPackage.org.apache.catalina\";\n\tpermission \njava.lang.RuntimePermission \"defineClassInPackage.org.apache.catalina.*\";\n\tpermission \njava.lang.RuntimePermission \"defineClassInPackage.org.apache.catalina\";\n\nI propose that either (A) getNamedDispatcher be modified so that it doesn't \ngenerate this error or (B) the above lines get added by default to \ncatalina.policy. (Possibly this is too liberal.  Maybe there is a more \nspecific setting that should be applied).\n\nAs a side note, the RPM (rightly so, I believe) installs Tomcat with the \nsecurity manager on by default.  This makes it important that catalina.policy \nsettings allow servlets and JSP files to work smoothly.\n\nTrace:\njava.lang.NoClassDefFoundError: org/apache/catalina/core/ApplicationDispatcher\n\njava.lang.NoClassDefFoundError: org/apache/catalina/core/ApplicationDispatcher\n\tat org.apache.catalina.core.ApplicationContext.getNamedDispatcher\n(Unknown Source)\n\tat org.apache.catalina.core.ApplicationContextFacade.getNamedDispatcher\n(Unknown Source)\n\tat com.forio.servlet.plugin.implement.ServeFile.sendFileResponse\n(Unknown Source)\n\tat com.forio.servlet.plugin.implement.ServeFile.processRequest(Unknown \nSource)\n\tat com.forio.servlet.SimServlet.handleRequest(Unknown Source)\n\tat com.forio.servlet.util.VelocityServletAlt.doRequest(Unknown Source)\n\tat com.forio.servlet.util.VelocityServletAlt.doGet(Unknown Source)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(Unknown Source)\n\tat org.apache.catalina.core.ApplicationFilterChain.access$0(Unknown \nSource)\n\tat org.apache.catalina.core.ApplicationFilterChain$1.run(Unknown \nSource)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(Unknown \nSource)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(Unknown Source)", "id": 50607, "time": "2004-01-15T17:56:05Z", "creator": "wglass@forio.com", "creation_time": "2004-01-15T17:56:05Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 26174, "attachment_id": null, "id": 60073, "time": "2004-06-30T22:38:52Z", "creator": "markt@apache.org", "creation_time": "2004-06-30T22:38:52Z", "is_private": false, "text": "This has been fixed in CVS. There were some missing PrivilegedAction classes."}]