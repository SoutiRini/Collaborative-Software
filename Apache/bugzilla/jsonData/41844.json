[{"count": 0, "tags": [], "bug_id": 41844, "attachment_id": null, "id": 100408, "time": "2007-03-15T00:57:01Z", "creator": "nicolas.blaise@saipm.com", "creation_time": "2007-03-15T00:57:01Z", "is_private": false, "text": "Hello,\n\nMy problem was discovered when I attempt to start apache and when I run the\napache configtest by command line.\n\nI have a lot of virtual hosts placed on a partition mounted under /data and\napache says that all the related documentroot doesn't exist except for the\ndefaut virtual host which is a subdirectory of /.\n\nThese virtual hosts are properly running on our production machine with apache\n2.0.54 and I did my own .spec file to compile apache as rpm.\n\nTo be sure that my .spec is not affecting the behaviour of apache I did a\ncompilation of versions 2.0.54 AND 2.0.59 and run the apachectl binaries.\n- In the case of apache 2.0.54, the configtest and the server run properly. I\ncan access to my websites.\n- In the case of apache 2.0.59, the configtest fails and the server doesn't\nstart. I have no access to the websites.\n\nA second set of tests conviced me that the problem is related to the mount point\n. I have placed a test directory tree on /data2/test.\n- When /data2/test is not a mount point, apache 2.0.59 starts and the configtest\nsucceed.\n- When I use /data2 as a mount point, apache 2.0.59 doesn't start and the\nconfigtest fails.\n\nIt is a strange behaviour when we know that a mount point should be transparent\nto the applications and is directly managed by the OS.\n\nI am sorry if this bug was already solved but I didn't find anything on bugzilla.\n\nThanks for your help."}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "is_private": false, "id": 100410, "time": "2007-03-15T02:16:57Z", "bug_id": 41844, "creation_time": "2007-03-15T02:16:57Z", "text": "Can you run:\n\n # strace -o trace.out httpd -t\n\nin the failing configuration, and then submit the \"trace.out\" file as an attachment."}, {"count": 2, "tags": [], "creator": "nicolas.blaise@saipm.com", "attachment_id": 19709, "is_private": false, "id": 100412, "time": "2007-03-15T03:05:20Z", "bug_id": 41844, "creation_time": "2007-03-15T03:05:20Z", "text": "Created attachment 19709\ntrace.out for apache\n\nstrace -f -o trace.out /usr/sbin/apachectl -t"}, {"count": 3, "tags": [], "bug_id": 41844, "attachment_id": null, "text": "Actually, I did more tests.\n\nI reuse my old .spec file that is working with apache 2.0.54 and compile it to\nmy new machine.\n\nI run again the configtest with apachectl and the result is the same.\nI conclude that it is a problem related to the system more than apache.\n\nThe only differences between the working machine and the new one is that I use\nlvm to store websites on partition and that my new system is up to date when the\nworking machine is a little bit older (few weeks).\n\nI will try to upgrade the working machine on the latest update to see if the\nproblem occurs.\n\nFor now, I checked all the permissions (because strace reports no access) on the\nfilesystem and it seems to be good. The filesystem has been replicated from the\nworking machine with rsync. So all the permission are exactly the same.\n\nTo be sure, I forced the user and group to apache on the filesystem without\nsuccess for launching apache. I copy the httpd.conf from the working machine to\nthe new machine (just in case) but the problem persist.\n\nI have no more ideas at the moment but I am still looking for an answer.\n\nFYI: my current systems are CentOS 4.4 based and my new machine is freshly\ninstalled.\n\nregards.\n\n", "id": 100415, "time": "2007-03-15T03:15:45Z", "creator": "nicolas.blaise@saipm.com", "creation_time": "2007-03-15T03:15:45Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 41844, "attachment_id": null, "id": 100418, "time": "2007-03-15T03:42:43Z", "creator": "nicolas.blaise@saipm.com", "creation_time": "2007-03-15T03:42:43Z", "is_private": false, "text": "\nSo, I did the upgrade on both machines.\nThe working machine is still working and the new machine is still a problem.\n\nI will recheck all the permissions on all files related to apache to be sure.\n\nRegards"}, {"count": 5, "tags": [], "bug_id": 41844, "text": "This is most probably an SELinux-related problem. See, e.g.:\n\nhttp://fedora.redhat.com/docs/selinux-apache-fc3/index.html\n", "id": 100419, "time": "2007-03-15T03:47:05Z", "creator": "jorton@redhat.com", "creation_time": "2007-03-15T03:47:05Z", "is_private": false, "attachment_id": null}]