[{"count": 0, "tags": [], "creator": "carl.johnstone@gmgrd.co.uk", "attachment_id": null, "text": "---- test.html ----\n<!--#echo var=\"PATH_INFO\" -->\n<!--#echo var=\"QUERY_STRING\" -->\n-------------------\n\n---- test2.html -----\n<!--#include virtual=\"test.html/path?query\" -->\n---------------------\n\nRequesting http://site/test.html/path?query gives me:\n\n       path query\n\nRequesting http://site/test2.html gives me:\n\n       (none) query\n\nThey should match. From investigation, I think it's because the PATH_INFO isn't \nsetup in the environment of the subrequest.\n\nDigging around in src/modules/standard/mod_include.c - around line 2181 \nQUERY_STRING is fixed up, however PATH_INFO isn't. If I add this in:\n\n  if (r->path_info) {\n       ap_table_setn(r->subprocess_env, \"PATH_INFO\", r->path_info);\n  }\n\nThen it seems to then work fine for my simple test case.", "id": 63517, "time": "2004-09-14T10:58:16Z", "bug_id": 31214, "creation_time": "2004-09-14T10:58:16Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "id": 63518, "time": "2004-09-14T11:03:45Z", "bug_id": 31214, "creation_time": "2004-09-14T11:03:45Z", "is_private": false, "text": "I could imagine, that this is intentional.\n\nAnyway, changing that would break backwards compat, so wontfix."}, {"count": 2, "tags": [], "creator": "carl.johnstone@gmgrd.co.uk", "attachment_id": null, "id": 63522, "time": "2004-09-14T11:14:03Z", "bug_id": 31214, "creation_time": "2004-09-14T11:14:03Z", "is_private": false, "text": "Why would fixing the bug break backwards compatibility?\n\nIf you want to check for PATH_INFO, or the value of the PATH_INFO then it \ndoesn't work. If you want to check for a lack of PATH_INFO it doesn't work.\n\nAnybody who is currently trying to check PATH_INFO within a sub-include will \nnot be getting proper results - therefore they cannot be depending on this \nresult.\n\nMy diagnosis and/or fix of the problem may be wrong - but the bug is fixable.\n"}, {"count": 3, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "text": "You should get the PATH_INFO of the caller. That behaviour won't be changed. If\nyou think, another behaviour is betterm just make a featrue request for 2.1.", "id": 63523, "time": "2004-09-14T11:19:47Z", "bug_id": 31214, "creation_time": "2004-09-14T11:19:47Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 31214, "attachment_id": null, "text": "The PATH_INFO of the caller is a different value and may not even exist. Did \nyou even bother *reading* my bug report and looking at the test case?\n", "id": 63524, "time": "2004-09-14T11:32:43Z", "creator": "carl.johnstone@gmgrd.co.uk", "creation_time": "2004-09-14T11:32:43Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 31214, "attachment_id": null, "text": "Sure. echoing a NULL pointer gives (none).", "id": 63525, "time": "2004-09-14T11:39:49Z", "creator": "nd@perlig.de", "creation_time": "2004-09-14T11:39:49Z", "is_private": false}]