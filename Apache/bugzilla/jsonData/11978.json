[{"count": 0, "tags": [], "bug_id": 11978, "attachment_id": null, "id": 21613, "time": "2002-08-23T15:49:04Z", "creator": "sebastian.wolfgarten@gmx.net", "creation_time": "2002-08-23T15:49:04Z", "is_private": false, "text": "Hi,\n\ntogether with a friend I'm trying to\ndevelop an output filter which reads\ndata from stdin, converts it into the\nwell-known pdf format and send the\nresult to the client. As discussed on\nthe users mailing list this already\nworks fine for any netscape browser\nbut indeed it does not work with\nmicro$oft's internet explorer. Netscape\nreturns a fine pdf document but ie\ngives just a blank page back (even on\nthe same file!). If people are interested\nin developing such an output filter they\nhave to install ghostscript and a2ps.\nI wrote a small shell script which\ndoes the converting stuff:\n#!/bin/sh\n\n/usr/local/a2ps-4.13/bin/a2ps -q -o - | /usr/local/ghostscript-\n7.05/bin/ps2pdfwr -\n\nI also did define an output filter in\nhttpd.conf:\n\nExtFilterDefine pdfwriter mode=output intype=text/html outtype=application/pdf \ncmd=\"/usr/local/apache2/bin/pdfwrite.sh\"\n<Files *.html>\n    ExtFilterOptions LogStderr DebugLevel=9\n    SetOutputFilter pdfwriter\n</Files>\n\nIn the error log of the server the following messages\nare written:\nri Aug 23 17:46:52 2002] [debug] mod_ext_filter.c(605): [client 192.168.0.2] \nfiltering `/test.html' of type `application/pdf' through \n`/usr/local/apache2/bin/pdfwrite.sh', cfg ExtFilterOptions DebugLevel=9 \nLogStderr !PreserveContentLength ExtFilterInType text/html ExtFilterOuttype \napplication/pdf\n[Fri Aug 23 17:46:53 2002] [debug] mod_ext_filter.c(802): [client 192.168.0.2] \napr_file_read(child output), len 512\n[Fri Aug 23 17:46:53 2002] [debug] mod_ext_filter.c(802): [client 192.168.0.2] \napr_file_read(child output), len 441\n[Fri Aug 23 17:46:53 2002] [debug] mod_ext_filter.c(802): [client 192.168.0.2] \napr_file_read(child output), len 2012\n[Fri Aug 23 17:46:53 2002] [debug] mod_ext_filter.c(802): [client 192.168.0.2] \n(20514)End of file found: apr_file_read(child output), len -1\n\nAs I said netscape returns the pdf, ie does not (just blank page). \nI have found an article in the microsoft knowledge which (maybe) describes\nthe reason for this feature/bug:\nhttp://support.microsoft.com/default.aspx?scid=kb;en-us;Q305153\n(see parts cause and resolution!)\n\nBye and thanks,\nSebastian"}, {"count": 1, "attachment_id": null, "bug_id": 11978, "text": "[This is a mass bug update.]\nThis bug reports a problem in an older version of Apache 2.\nCould you please update to the most recent version and see\nif you can reproduce this problem.  If the bug still exists,\nplease update the bug with the latest version number.  If \nthe bug no longer exists, please close the bug report.\n\nSorry for this impersonal response, but we get many more bug\nreports than our volunteers can keep up with.\nThanks for using Apache!", "id": 24720, "time": "2002-10-17T02:34:51Z", "creator": "slive@apache.org", "creation_time": "2002-10-17T02:34:51Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 11978, "attachment_id": null, "id": 25295, "time": "2002-10-29T02:51:08Z", "creator": "trawick@apache.org", "creation_time": "2002-10-29T02:51:08Z", "is_private": false, "text": "According to the Microsoft documentation you pointed to, a content-length\nheader is necessary for IE to handle the pdf properly, but Apache is\ngoing to instead chunk the response so that it doesn't have to buffer\nthe entire output of the filter before sending the content-length header.\n\nIE's use of HTTP/1.1 request tells Apache that is okay to do.  An HTTP/1.1\nclient must be able to handle a chunked response.\n\n"}, {"count": 3, "tags": [], "bug_id": 11978, "text": "[This is a mass bug update.] [Resolve-20021102]\nNo response from submitter; assuming issue is resolved.\nIf the problem still exists in the lastest version,\nplease reopen this report and update appropriately.", "id": 25544, "time": "2002-11-02T20:18:28Z", "creator": "slive@apache.org", "creation_time": "2002-11-02T20:18:28Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "sebastian.wolfgarten@gmx.net", "attachment_id": null, "text": "Hello,\n\nI installed the latest apache 2.0.43 and ran my self-written\noutput filter again. The result is still the same, the\noutput filter works fine with netscape 6.2 but not with ie 6.0 sp1.\nActually it converts data on the fly into pdf documents which\nreally on netscape but ie just gives a blank page back. The output filter\nshell script looks like this:\n#!/bin/sh\n\n/usr/local/a2ps-4.13/bin/a2ps -q -o - | /usr/local/ghostscript-\n7.05/bin/ps2pdfwr -\n\nIn my httpd.conf I have activated this filter by using the following \nconfiguration:\nExtFilterDefine pdfwriter mode=output intype=text/html outtype=application/pdf \ncmd=\"/usr/local/apache2.0.43/bin/pdfwrite.sh\"\n<Files *.html>\n    ExtFilterOptions LogStderr DebugLevel=9\n    SetOutputFilter pdfwriter\n</Files>\n\nI also tried to play around with the outtype but this did not change anything.\nThis is written into error_log when I open a .html file using netscape AND ie:\n[Sat Nov 02 23:40:18 2002] [debug] mod_ext_filter.c(611): [client 192.168.0.21] \nfiltering `/index.html' of type `application/pdf' through \n`/usr/local/apache2.0.43/bin/pdfwrite.sh', cfg ExtFilterOptions DebugLevel=9 \nLogStderr !PreserveContentLength ExtFilterInType text/html ExtFilterOuttype \napplication/pdf\n[Sat Nov 02 23:40:18 2002] [debug] mod_ext_filter.c(808): [client 192.168.0.21] \napr_file_read(child output), len 1536\n[Sat Nov 02 23:40:18 2002] [debug] mod_ext_filter.c(808): [client 192.168.0.21] \napr_file_read(child output), len 478\n[Sat Nov 02 23:40:18 2002] [debug] mod_ext_filter.c(808): [client 192.168.0.21] \napr_file_read(child output), len 2012\n[Sat Nov 02 23:40:18 2002] [debug] mod_ext_filter.c(808): [client 192.168.0.21] \n(70014)End of file found: apr_file_read(child output), len -1\n\nInteresting enough the filter does not get invoking by ie when I shutdown the \nserver, start it again and request the file with ie. I *have* to modify the \nsize of the document (e.g. by adding some text) I want to request and do the \nrequest again - only then is the output filter activated again (when using ie). \nWhen I use netscape I don't have this problem and I also tried to play around \nwith ie caching mechanism but this did not change anything...\n\nDo you need more information, can I help more by providing other maybe more \nappropriate information?\n\nBye and thanks,\nSebastian Wolfgarten", "id": 25567, "time": "2002-11-02T22:42:34Z", "bug_id": 11978, "creation_time": "2002-11-02T22:42:34Z", "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 11978, "text": "As pointed out earlier and in several other bug-reports, the problem is not \nwith Apache, but more with IE.", "id": 25852, "time": "2002-11-07T10:47:52Z", "creator": "info@orangexl.com", "creation_time": "2002-11-07T10:47:52Z", "tags": [], "is_private": false}, {"count": 6, "text": "This is a bug with IE, correspondingly please ask Microsoft to fix their broken browser.  httpd is obeying the protocol correctly.\n\nThe one thing you could do is force all IE browsers to be downgraded to HTTP/1.0 by using BrowserMatch with force-response-1.0.  This will prevent chunking from occuring.  (Please read the documentation on how to do this.)\n\nThanks for using Apache HTTP Server!", "creator": "jerenkrantz@apache.org", "is_private": false, "id": 31372, "time": "2003-02-16T23:38:36Z", "bug_id": 11978, "creation_time": "2003-02-16T23:38:36Z", "tags": [], "attachment_id": null}]