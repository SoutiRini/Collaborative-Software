[{"count": 0, "tags": [], "text": "I have asked the xindice-users@xml.apache.org mailing list for help, but have \nrecieved no reply. I have also searched the old messages from the mailing list.\n\nI copied the source code for \"Example 1\" from \nhttp://xml.apache.org/xindice/guide-\ndeveloper.html#Diving+in+With+an+Example+Program:\n\npackage org.apache.xindice.examples;\n\nimport org.xmldb.api.base.*;\nimport org.xmldb.api.modules.*;\nimport org.xmldb.api.*;\n\npublic class Example1 {\n\npublic static void main(String[] args) throws Exception {\n  Collection col = null;\n  try {\n    String driver = \"org.apache.xindice.client.xmldb.DatabaseImpl\";\n    Class c = Class.forName(driver);\n\n    Database database = (Database) c.newInstance();\n    DatabaseManager.registerDatabase(database);\n\n    String uri = \"xmldb:xindice:///db/addressbook\";\n    col = DatabaseManager.getCollection(uri);\n\n    String xpath = \"//person[fname='John']\";\n    XPathQueryService service =\n      (XPathQueryService) col.getService(\"XPathQueryService\", \"1.0\");\n    ResourceSet resultSet = service.query(xpath);\n    ResourceIterator results = resultSet.getIterator();\n    while (results.hasMoreResources()) {\n      Resource res = results.nextResource();\n      System.out.println((String) res.getContent());\n    }\n  } catch (XMLDBException e) {\n    System.err.println(\"XML:DB Exception occured \" + e.errorCode);\n  } finally {\n    if (col != null) {\n      col.close();\n    }\n  }\n}\n\n}\n\nI changed 4 things in this code to reflect my environment and to debug:\n\n1. The package name was changed to \"nina\" and the code put in a directory \ncalled \"nina\". \n\n2. The connection string was changed to:\nString uri = \"xmldb:xindice://localhost:8080/db/restaurants\";\n\n3. The xpath query was changed to: \nString xpath = \"/restaurant[name='Bravissimo']\"; \n\n4. The error output was changed to: \nSystem.err.println(\"XML:DB Exception occured \" + e.errorCode + \" \" + \ne.getMessage());\n\nand I added\n\ne.printStackTrace(); \n\non the line after.\n\nThe command line tools work fine: I have added a collection \ncalled \"Restaurants\" and some documents. For example, the command line query:\n\nC:\\Tomcat\\webapps\\xindice\\WEB-INF>xindice xpath -c xmldb:xindice://localhost:808\n0/db/restaurants -q \"/restaurant[name='Bravissimo']\" \n\ngives me a correct result. However, this doesn't work when trying to do the \nsame thing through the java code. When I execute the above code, I get the \nfollowing error: \n\nXML:DB Exception occured 1 A connection to the Database instance 'db' could not\nbe created. Error: http://localhost:8080/db_bootstrap.ior\norg.xmldb.api.base.XMLDBException: A connection to the Database instance 'db' co\nuld not be created. Error: http://localhost:8080/db_bootstrap.ior\n        at org.apache.xindice.client.xmldb.DatabaseImpl.init(DatabaseImpl.java:3\n86)\n        at org.apache.xindice.client.xmldb.DatabaseImpl.getCollection(DatabaseIm\npl.java:205)\n        at org.xmldb.api.DatabaseManager.getCollection(DatabaseManager.java:194)\n\n        at org.xmldb.api.DatabaseManager.getCollection(DatabaseManager.java:157)\n\n        at nina.Xin.main(Xin.java:22)\n\n\nI'm running Tomcat 5.0.19. Xindice-1.1b4 is deployed on Tomcat. Have tried this \non both Windows 2000 (at uni) and Windows XP (at home, to check that it wasn't \na matter of a blocked port).", "attachment_id": null, "id": 56068, "creator": "nvjuliad@it.uts.edu.au", "time": "2004-04-20T07:50:09Z", "bug_id": 28488, "creation_time": "2004-04-20T07:50:09Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 28488, "attachment_id": null, "id": 56078, "time": "2004-04-20T10:09:37Z", "creator": "nvjuliad@it.uts.edu.au", "creation_time": "2004-04-20T10:09:37Z", "is_private": false, "text": "Very embaressing, but this is a classpath error in disguise. I got it to work \nwhen I included \n\nxindice-1.1b4.jar\nxmldb-api-20030701.jar\ncommons-logging-api.jar\nxmlrpc-1.1.jar\nxercesImpl.jar\nxmlParserAPIs.jar\n\nin the classpath at runtime. Sorry. "}]