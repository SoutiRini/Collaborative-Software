[{"count": 0, "tags": [], "bug_id": 16391, "text": "By default, Apache is not able to write out compressed logs when piping them to \nrotatelogs. However, since rotatelogs is much used and raw logs take up 80% \nmore space as compressed logs, this is a very usefull and benificial feature. \nIt also a often asked question.\n\nWhile there are several other sollutions to solve this, these are often very \nmore complicated and not availeble on all systems.", "id": 29997, "time": "2003-01-24T12:55:26Z", "creator": "info@orangexl.com", "creation_time": "2003-01-24T12:55:26Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "Why couldn't you place gzip in the pipe chain?  Why does httpd have to do this for you?  It's far easier for you to do this yourself than to add code that isn't needed.", "is_private": false, "id": 31406, "creation_time": "2003-02-17T06:19:45Z", "time": "2003-02-17T06:19:45Z", "creator": "jerenkrantz@apache.org", "bug_id": 16391, "attachment_id": null}, {"count": 2, "tags": [], "creator": "info@orangexl.com", "attachment_id": null, "text": "As far as I know, that doesn't work if you use rotatelogs. I asked this \nquestion numerous times on different newsgroup, but haven't found an answer yet.\n\nIf it was really that simple, it should be here: http://httpd.apache.org/docs-\n2.0/logs.html . I know it was for 1.3 and if you where using regular logs, but \nfor rotated logs using rotatelogs, I never saw something like that.\n\nBUT even if you could do it this way, it really SHOULD be an option for \nrotatelogs. Most recent Linux-logrotate programs have this option too.", "id": 31423, "time": "2003-02-17T11:05:29Z", "bug_id": 16391, "creation_time": "2003-02-17T11:05:29Z", "is_private": false}, {"text": "FYI... I have some patches not yet committed to use the shell to invoke the\npiped log command.  That should at least be able to get gzip in the right place.\nIndex: server/log.c\n===================================================================\nRCS file: /home/cvs/httpd-2.0/server/log.c,v\nretrieving revision 1.135\ndiff -u -r1.135 log.c\n--- server/log.c        14 Jul 2003 14:48:40 -0000      1.135\n+++ server/log.c        21 Nov 2003 17:19:17 -0000\n@@ -91,6 +91,7 @@\n #include \"http_log.h\"\n #include \"http_main.h\"\n #include \"util_time.h\"\n+#include \"ap_mpm.h\"\n\n typedef struct {\n     char    *t_name;\n@@ -239,6 +240,7 @@\n     apr_proc_t *procnew;\n\n     if (((rc = apr_procattr_create(&procattr, p)) == APR_SUCCESS)\n+        && ((rc = apr_procattr_cmdtype_set(procattr, APR_SHELLCMD)) == APR_SUCC\nESS)\n         && ((rc = apr_procattr_io_set(procattr,\n                                       APR_FULL_BLOCK,\n                                       APR_NO_PIPE,\n@@ -743,6 +745,8 @@\n     apr_status_t status;\n\n     if (((status = apr_procattr_create(&procattr, pl->p)) != APR_SUCCESS) ||\n+        ((status = apr_procattr_cmdtype_set(procattr, APR_SHELLCMD))\n+         != APR_SUCCESS) ||\n         ((status = apr_procattr_child_in_set(procattr,\n                                              ap_piped_log_read_fd(pl),\n                                              ap_piped_log_write_fd(pl)))", "tags": [], "creator": "trawick@apache.org", "is_private": false, "count": 3, "id": 47807, "time": "2003-11-21T17:19:42Z", "bug_id": 16391, "creation_time": "2003-11-21T17:19:42Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "text": "Dup'ing against bug with unwrapped patch.\n\n*** This bug has been marked as a duplicate of 28815 ***", "id": 58671, "time": "2004-06-03T22:04:53Z", "bug_id": 16391, "creation_time": "2004-06-03T22:04:53Z", "is_private": false}]