[{"count": 0, "tags": [], "bug_id": 5662, "text": "I wrote three build files to simulate a 3 three levels of nesting:\n\nbuild.xml (level 1):\n\n<project name=\"test\" basedir=\".\" default=\"test\">\n  <property name=\"test_var\" value=\"first\"/>\n  \n  <target name=\"test\">\n  \n    <ant dir=\".\" antfile=\"subbuild.xml\" target=\"test\" inheritAll=\"true\">\n      <property name=\"test_var\" value=\"second_set_from_first\"/>\n    </ant>\n  \n    <echo message=\"First Test Variable: ${test_var}\"/>\n  \n  </target>\n</project>\n\n\nsubbuild.xml (level 2):\n<project name=\"test\" basedir=\".\" default=\"test\">\n  <property name=\"test_var\" value=\"second\"/>\n\n  <target name=\"test\">  \n    <ant dir=\".\" antfile=\"subsubbuild.xml\" target=\"test\" inheritAll=\"true\">\n      <property name=\"test_var\" value=\"third_set_from_second\"/>\n    </ant>\n  \n    <echo message=\"Second Test Variable: ${test_var}\"/>\n  </target>\n</project>\n\n\nsubsubbuild.xml (level 3):\n\n<project name=\"test\" basedir=\".\" default=\"test\">\n  <target name=\"test\">\n    <property name=\"test_var\" value=\"third\"/>\n  \n    <echo message=\"Third Test Variable: ${test_var}\"/>\n  </target>\n</project>\n\nThe expected results are as follows:\n\ntest:\n\ntest:\n\ntest:\n     [echo] Third Test Variable: third_set_from_second\n     [echo] Second Test Variable: second_set_from_first\n     [echo] First Test Variable: first\n\nWith inheritAll=true in build.xml and subbuild.xml for the ant task, this is\nwhat I get. I would also expect the same results with inheritAll=false, since\nall this does is keep the parent project from automatically passing its\nproperties. The results I get are as follows:\n\ntest:\n\ntest:\n\ntest:\n     [echo] Third Test Variable: second_set_from_first\n     [echo] Second Test Variable: second_set_from_first\n     [echo] First Test Variable: first\n\nThis doesn't appear to be correct. It seems like the test_var property set in\nbuild.xml is getting passed to both subbuild.xml & subsubbuild.xml. This appears\nto be a bug.", "id": 9280, "time": "2002-01-02T10:42:55Z", "creator": "kdavis@pobox.com", "creation_time": "2002-01-02T10:42:55Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "holtdl@yahoo.com", "attachment_id": null, "id": 12611, "time": "2002-04-01T06:57:11Z", "bug_id": 5662, "creation_time": "2002-04-01T06:57:11Z", "is_private": false, "text": "This looks to be the reason why:\n           if (inheritAll){\n              newProject.setProperty(arg, value);\n           } else {\n              newProject.setUserProperty(arg, value);\n           }\n\nwhich means any attempt to reset a property in any cascading of further <ant>'s \nfrom the first one that has inheritAll=\"false\" won't have any affect on the \nvalue of whatever properties were passed from that one. Although I can't say \nit's clear to me why the distinction between inheritAll being true vs. false is \nbeing made, or why it's that particular way around. (But I'm sure there was \nsome good reason for it :)"}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 17561, "time": "2002-06-11T09:54:33Z", "bug_id": 5662, "creation_time": "2002-06-11T09:54:33Z", "is_private": false, "text": "Supposed to be fixed in the 1.5 branch now.  Could you please try the latest\nbuild from <http://cvs.apache.org/~bodewig/ant1.5beta/> and close this bug if\nyou can confirm it is fixed.\n\nThe latest official nightly will not have this fix!"}, {"count": 3, "tags": [], "bug_id": 5662, "attachment_id": null, "id": 17562, "time": "2002-06-11T09:58:49Z", "creator": "bodewig@apache.org", "creation_time": "2002-06-11T09:58:49Z", "is_private": false, "text": "Wrong URL, sorry: <http://cvs.apache.org/~bodewig/gump/ant1.5beta/>"}, {"attachment_id": null, "tags": [], "bug_id": 5662, "text": "Great, it works now! Thanks", "count": 4, "id": 17582, "time": "2002-06-11T13:38:21Z", "creator": "kdavis@pobox.com", "creation_time": "2002-06-11T13:38:21Z", "is_private": false}]