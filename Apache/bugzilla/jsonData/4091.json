[{"count": 0, "tags": [], "bug_id": 4091, "attachment_id": null, "text": "Starting with a fresh distribution : \n\n1 - pack tomcat-docs into tomcat-docs2.war an put it in the webapps dir too.\n2 - declare the custom host :\n    <Host name=\"dpeapc8\" debug=\"0\" appBase=\"webapps\" unpackWARs=\"true\">\n        <Context path=\"/myapp\" docBase=\"tomcat-docs2\" debug=\"0\"/>\n    </Host>\n\n3 - startup catalina : \n    it throws \n    java.lang.IllegalArgumentException: \"Document base ..\\webapps\\tomcat-docs2  \ndoes not exist or is not a readable directory \" and catalina won't start.\n\n4 - unpack the war manually and everything works fine\n\nNB : this DOES work fine if you use the default host (localhost). Just put the \nwar in the webapp, catalina starts without any glitch and the war is expanded \nautomatically.", "id": 6577, "time": "2001-10-11T02:06:33Z", "creator": "gilles.philippart@ota.fr.socgen.com", "creation_time": "2001-10-11T02:06:33Z", "is_private": false}, {"count": 1, "tags": [], "text": "Half of that bug is similar to 4023, which has been fixed. Now, Catalina would \nstart, but your webapp woun't be deployed instead.\n\nDeclaring it as\n<Context path=\"/myapp\" docBase=\"tomcat-docs2.war\" debug=\"0\"/>\nshould work.", "is_private": false, "bug_id": 4091, "id": 6594, "time": "2001-10-11T09:00:57Z", "creator": "remm@apache.org", "creation_time": "2001-10-11T09:00:57Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 4091, "attachment_id": null, "text": "We ran into the same problem. Our log4j.properties is located in the top level\ndirectory of the war file.\n\nNow we get the following error!\n\nlog4j:ERROR Could not read configuration file [nulllog4j.properties].\njava.io.FileNotFoundException: nulllog4j.properties (The system cannot find the\nfile specified)\n        at java.io.FileInputStream.open(Native Method)\n        at java.io.FileInputStream.<init>(FileInputStream.java:103)\n        at java.io.FileInputStream.<init>(FileInputStream.java:66)\n        at\norg.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:300)\n        at\norg.apache.log4j.PropertyConfigurator.configure(PropertyConfigurator.java:318)\n        at com.privasphere.privalope.util.Log4JServlet.init(Log4JServlet.java:34)\n        at javax.servlet.GenericServlet.init(GenericServlet.java:256)\n        at\norg.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:935)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:823)\n        at\norg.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3420)\n        at org.apache.catalina.core.StandardContext.start(StandardContext.java:3608)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1188)\n        at org.apache.catalina.core.StandardHost.start(StandardHost.java:738)\n        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1188)\n        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:347)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:497)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:2190)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:512)\n        at org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n        at org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\nlog4j:ERROR Ignoring configuration file [nulllog4j.properties].\ndataSource = jdbc:mysql://127.0.0.1:3306/privalope\nlog4j:WARN No appenders could be found for logger (Database).\nlog4j:WARN Please initialize the log4j system properly.\n\n===> any thoughts?", "id": 39554, "time": "2003-06-27T15:44:40Z", "creator": "hauser@acm.org", "creation_time": "2003-06-27T15:44:40Z", "is_private": false}, {"count": 3, "tags": [], "creator": "hauser@acm.org", "attachment_id": null, "id": 40055, "time": "2003-07-07T10:54:11Z", "bug_id": 4091, "creation_time": "2003-07-07T10:54:11Z", "is_private": false, "text": "see also the corresponding log4j bug we posted\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=21367"}, {"count": 4, "tags": [], "bug_id": 4091, "attachment_id": null, "text": "in server.xml, removing the lines (where \"privalope\" could well be replaced \"myapp\")\n\n<Context path=\"/privaLope\" docBase=\"privaLope.war\" debug=\"0\"\ncookies=\"false\" reloadable=\"true\"/>\n\nsolves two problems:\n1) the war files get expanded automatically\n2) the context path is no longer \"null\", thus log4j is working again\n\n!!! The remaining problem is now: how to tell tomcat not to use cookies !!!\n\nFurther background:\nSystem.out.println(\"1=\" +getServletContext().getRealPath(\"\\\\\"));\n1=C:\\tomcat\\jakarta-tomcat-4.1.24\\bin\\..\\webapps\\privaLope\\\n...", "id": 40074, "time": "2003-07-07T14:15:40Z", "creator": "hauser@acm.org", "creation_time": "2003-07-07T14:15:40Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 4091, "attachment_id": null, "text": "as per the above referenced bug 21367,\n\nPropertyConfigurator.configure(getServletContext().getResource(\"/\" +\ngetInitParameter(\"propfile\"))); \n\nsolved it!", "id": 40186, "time": "2003-07-08T15:43:47Z", "creator": "hauser@acm.org", "creation_time": "2003-07-08T15:43:47Z", "is_private": false}, {"count": 6, "tags": [], "creator": "justin@exinet.co.za", "attachment_id": null, "id": 44696, "time": "2003-09-25T16:41:04Z", "bug_id": 4091, "creation_time": "2003-09-25T16:41:04Z", "is_private": false, "text": "As per the documentation\n(http://jakarta.apache.org/tomcat/tomcat-4.1-doc/config/context.html) :\n-----------\nThe Document Base (also known as the Context Root) directory for this web\napplication, or the pathname to the web application archive file (if this web\napplication is being executed directly from the WAR file). You may specify an\nabsolute pathname for this directory or WAR file, or a pathname that is relative\nto the appBase directory of the owning Host.\n-----------\nWhen you deploy an application as a war and specify the docBase as a war file\nname (say tomcat-docs2 or tomcat-docs2.war [ are you supposed to include the\nextension????]) in the server.xml or an [application-name].xml file,  the\napplication fails to start with the following exception:\n\njava.lang.IllegalArgumentException: \"Document base ..\\webapps\\tomcat-docs2.war\"\ndoes not exist or is not a readable directory.  \n\nThis appears to be fixed in the version 5 release (bug 4829).  I am running\n4.1.27 and although the bug was marked as resolved-fixed, it is still breaking.  \n\n\n\n"}, {"count": 7, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 59439, "time": "2004-06-17T21:24:09Z", "bug_id": 4091, "creation_time": "2004-06-17T21:24:09Z", "is_private": false, "text": "I have followed the steps provided to reproduce the bug with TC4.1.30 and with \none small mod (need to add .war to the docbase) it works as expected.\n\nThe complete text I added to sever.xml was:\n<Host name=\"testhost\" debug=\"0\" appBase=\"webapps\" unpackWARs=\"true\">\n    <Context path=\"/myapp\" docBase=\"tomcat-docs2.war\" debug=\"0\"/>\n</Host>"}]