[{"count": 0, "tags": [], "bug_id": 23129, "attachment_id": null, "id": 44097, "time": "2003-09-12T09:37:42Z", "creator": "bjorn@exoweb.net", "creation_time": "2003-09-12T09:37:42Z", "is_private": false, "text": "This bug was first reported by James Cooper in 1999\n(http://archive.apache.org/gnats/4089), but was somehow never included.\n\nSearching the web it is obvious that many people have found this bug through \nthe years, but none (except James) have reported it.  Instead, it's \nbecome \"common knowledge\" that for mod_proxy in Apache to cache content, it has \nto have a Last-Modified header.  Just having an Expires header is not enough; \nit will always result in a X-Cache: MISS\n\nLast-Modified headers do not really make sense for dynamic content, so many \nHTTP Accelerator plugins for dynamic websites only generate Expires headers, \nassuming that it'll work fine, when it doesn't.\n\nThis patch fixes this deficiency for 1.3.28:\n\n*** proxy_cache.c-org\tFri Sep 12 15:36:59 2003\n--- proxy_cache.c\tFri Sep 12 16:43:12 2003\n***************\n*** 1395,1403 ****\n          (r->status == HTTP_NOT_MODIFIED && (c == NULL || c->fp == NULL)) ||\n  \n      /*\n!      * 200 OK response from HTTP/1.0 and up without a Last-Modified header\n       */\n!         (r->status == HTTP_OK && lmods == NULL && is_HTTP1) ||\n  \n      /* HEAD requests */\n          r->header_only ||\n--- 1397,1408 ----\n          (r->status == HTTP_NOT_MODIFIED && (c == NULL || c->fp == NULL)) ||\n  \n      /*\n!      * 200 OK response from HTTP/1.0 and up\n!      * without a Last-Modified or a valid Expires header\n       */\n!         (r->status == HTTP_OK && is_HTTP1\n! \t && lmods == NULL\n! \t && (expire == NULL || expc == BAD_DATE)) ||\n  \n      /* HEAD requests */\n          r->header_only ||"}, {"count": 1, "tags": [], "bug_id": 23129, "text": "I'm going through the bug db to make sure patches are findable.  Please see \nhttp://httpd.apache.org/dev/patches.html\n", "id": 47842, "time": "2003-11-21T18:20:31Z", "creator": "trawick@apache.org", "creation_time": "2003-11-21T18:20:31Z", "is_private": false, "attachment_id": null}]