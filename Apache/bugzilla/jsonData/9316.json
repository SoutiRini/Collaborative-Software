[{"count": 0, "tags": [], "bug_id": 9316, "text": "If I build apache 2.0.36 with a custom config.layout entry, the \napxs script doesn't use it.  The layout I'm using specifies: \n \n    prefix:        /opt/apache-httpd-2_0_36 \n    #... \n    datadir:         /var${prefix}/share \n    installbuilddir: ${datadir}/build \n \nThe apxs script ends up with this in it: \n \n    my $prefix         = \"/opt/apache-httpd-2_0_36\"; \n    my $CFG_PREFIX     = $prefix; \n \n    # read the configuration variables once \n    my %config_vars = (); \n    get_config_vars(\"$prefix/build/config_vars.mk\",\\%config_vars); \n \nThe first parameter to \"get_config_vars\" should be the \ninstallbuilddir from the \"config.layout\" entry. \n \n  Here's the full config.layout entry I'm using in case you need to \nrun some more tests on it, but note my remarks afterwards. \n \n#   According to the Linux Filesystem Hierarchy Standard 2.2 (FHS) with \n#   the full product name and version in the directory names.  For more \n#   information see the specification at http://www.pathname.com/fhs/. \n# \n<Layout LinuxFHSFullName> \n    prefix:        /opt/apache-httpd-2_0_36 \n    exec_prefix:   ${prefix} \n    bindir:        ${exec_prefix}/bin \n    sbindir:       ${exec_prefix}/sbin \n    libdir:        ${exec_prefix}/lib \n    libexecdir:    ${exec_prefix}/libexec \n    mandir:        ${prefix}/man \n    sysconfdir:    /etc${prefix} \n    datadir:       /var${prefix}/share \n    installbuilddir: ${datadir}/build \n    errordir:      ${datadir}/error \n    iconsdir:      ${datadir}/icons \n    htdocsdir:     ${datadir}/htdocs \n    manualdir:     ${prefix}/manual \n    cgidir:        ${datadir}/cgi-bin \n    includedir:    ${prefix}/include \n    localstatedir: /var${prefix} \n    runtimedir:    /var/run/apache-httpd-2_0_36 \n    logfiledir:    /var/log/apache-httpd-2_0_36 \n    proxycachedir: /var/cache/www/apache-httpd-2_0_36/proxy \n</Layout> \n \nHere's the configure command line I used: \n \n    $ ./configure --enable-layout=LinuxFHSFullName \\ \n      --enable-modules=\"rewrite auth-dbm so ssl\" \n \nUnless you're working with a later version than 2.0.36, you'll need \nto create \"runtimedir\" by hand after installing (bug #9233). \n \nHope that helps, \n                                          Jonathan Knispel", "id": 16547, "time": "2002-05-22T14:26:55Z", "creator": "smileyjonathan@yahoo.com.au", "creation_time": "2002-05-22T14:26:55Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "smileyjonathan@yahoo.com.au", "attachment_id": null, "text": "  Here are some additional path corrections for the apxs script: \n \n    my $envvars = get_vars(\"bindir\") . \"/envvars\"; \n \nshould use \"sbindir\" instead of \"bindir\".  Or perhaps replace the \nget_vars() call with $CFG_SBINDIR. \n \n  There are a few other references to \"$prefix/build\" or variants. \nThey should be replaced with references to \"installbuilddir\", or a \nnew variable $CFG_INSTALLBUILDDIR, defined in the same way as \n$CFG_SBINDIR.  Don't forget this one: \n \n    include %PREFIX%/build/special.mk \n \n  If it was just a matter of changing the script I'd offer a patch, \nbut I'm an Apache novice and I don't have time to figure out how \nto get the config_vars.mk path into the apxs script.  I'm just hacking \nit in by hand. \n \nRegards, \n                                          Jonathan Knispel ", "id": 16549, "time": "2002-05-22T15:19:32Z", "bug_id": 9316, "creation_time": "2002-05-22T15:19:32Z", "is_private": false}, {"count": 2, "tags": [], "creator": "smileyjonathan@yahoo.com.au", "attachment_id": null, "text": "  Just looking at building mod_webapp for Tomcat, it would be very \nuseful if they could \"apxs -q installbuilddir\". ", "id": 16550, "time": "2002-05-22T15:26:25Z", "bug_id": 9316, "creation_time": "2002-05-22T15:26:25Z", "is_private": false}, {"count": 3, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "id": 17165, "time": "2002-06-05T12:03:59Z", "bug_id": 9316, "creation_time": "2002-06-05T12:03:59Z", "is_private": false, "text": "The installbuilddir problem is a duplicate report (see 8453).  That\nproblem is now fixed.\n\nThe sbin/envvars problem has been fixed for some time.\n\nI'll change this to an enhancment request to track your suggestion\nto support \"apxs -q installbuilddir\".\n"}, {"count": 4, "tags": [], "bug_id": 9316, "text": "fix the severity (now \"Enhancement\")", "id": 17166, "time": "2002-06-05T12:04:51Z", "creator": "trawick@apache.org", "creation_time": "2002-06-05T12:04:51Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 9316, "text": "\"apxs -q installbuilddir\" now works with the current code in CVS.\n", "id": 17400, "time": "2002-06-07T12:04:03Z", "creator": "trawick@apache.org", "creation_time": "2002-06-07T12:04:03Z", "is_private": false, "attachment_id": null}]