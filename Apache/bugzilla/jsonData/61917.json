[{"count": 0, "tags": [], "bug_id": 61917, "text": "Overview:\nI want to use AddDefaultCharsetFilter as a generic purpose filter not only for type text/* but also for type application/json, appliation/javascript, etc.\n\nSteps to Reproduce:\n1) Adding a filter registeration in web.xml\n<filter>\n\t<filter-name>AddDefaultCharset</filter-name>\n\t<filter-class>org.apache.catalina.filters.AddDefaultCharsetFilter</filter-class>\n\t<init-param>\n\t\t<param-name>encoding</param-name>\n\t\t<param-value>UTF-8</param-value>\n\t</init-param>\n</filter>\n<filter-mapping>\n\t<filter-name>AddDefaultCharset</filter-name>\n\t<servlet-name>default</servlet-name>\n</filter-mapping>\n\n2. Requesting a static json(e.g. /test.json) resource\n\nActual Results:\nNo default charset added in response header 'Content-Type'.\n(AddDefaultCharsetFilter only adds default charset for type 'text/*')\n\nExpected Results:\nAdd default charset for specified types.\nresponse types which will be processed by AddDefaultCharsetFilter can be specified through a init-param (e.g. with name 'accept' and with value 'application/json,text/*'),\nif the init-param not present, use defaut value 'text/*'", "id": 202836, "time": "2017-12-19T07:03:40Z", "creator": "fuweichin@gmail.com", "creation_time": "2017-12-19T07:03:40Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 61917, "text": "As documented, the filter applies to text/* resources, so your expectation is wrong and this is a possible enhancement.", "id": 202837, "time": "2017-12-19T07:20:45Z", "creator": "remm@apache.org", "creation_time": "2017-12-19T07:20:45Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 61917, "attachment_id": null, "text": "Please note that you have to adhere to specifications.\n\nThe mime-types have official specifications for them and are registered with IANA,\nhttps://www.iana.org/assignments/media-types/media-types.xhtml\n\nThe application/json mime-type DOES NOT have charset parameter,\nhttps://www.iana.org/assignments/media-types/application/json\n\nThe application/javascript has charset parameter,\nthough I am not sure whether it is actually respected by clients.\nhttps://www.iana.org/assignments/media-types/application/javascript\nhttps://tools.ietf.org/html/rfc4329#section-4.1", "id": 202838, "time": "2017-12-19T11:37:47Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2017-12-19T11:37:47Z", "is_private": false}, {"text": "I'm -0 on supporting a change to add default charsets to MIME types other than text/* because those types (non-RFC) \"should not\" have them.\n\nOn the other hand, sometimes the only way to make this stuff work with certain clients is to specify the charset for a MIME type that isn't supposed to support it (e.g. application/json). I won't stop anyone from doing it, but it will just make services continue to refuse to adhere to standards if we support something like this.", "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "count": 3, "id": 202841, "time": "2017-12-19T16:17:54Z", "bug_id": 61917, "creation_time": "2017-12-19T16:17:54Z", "is_private": false}]