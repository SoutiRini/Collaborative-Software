[{"count": 0, "tags": [], "bug_id": 32314, "attachment_id": null, "text": "I installed Tomcat 5.5.4-stable (clean install, no other versions running or\nconfiguration imported).  Using the default configuration, I can't log into the\nmanager application with \"http://localhost/manager/html/list\".  It pops up the\nauthentication dialog box in Mozilla Firefox and Internet Explorer, but the\n\"correct\" login is not accepted.  Tomcat generates a stack trace in the logs, as\nfollows:\n\n19-Nov-2004 12:31:19 org.apache.catalina.realm.JAASRealm authenticate\nSEVERE: Unexpected error\njava.lang.SecurityException: Unable to locate a login configuration\n\tat com.sun.security.auth.login.ConfigFile.<init>(Unknown Source)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n\tat java.lang.reflect.Constructor.newInstance(Unknown Source)\n\tat java.lang.Class.newInstance0(Unknown Source)\n\tat java.lang.Class.newInstance(Unknown Source)\n\tat javax.security.auth.login.Configuration$3.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.login.Configuration.getConfiguration(Unknown Source)\n\tat javax.security.auth.login.LoginContext$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat javax.security.auth.login.LoginContext.init(Unknown Source)\n\tat javax.security.auth.login.LoginContext.<init>(Unknown Source)\n\tat org.apache.catalina.realm.JAASRealm.authenticate(JAASRealm.java:355)\n\tat\norg.apache.catalina.authenticator.BasicAuthenticator.authenticate(BasicAuthenticator.java:181)\n\tat\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:446)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n\tat\norg.apache.catalina.valves.FastCommonAccessLogValve.invoke(FastCommonAccessLogValve.java:481)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:825)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:731)\n\tat\norg.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:526)\n\tat\norg.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)\n\tat java.lang.Thread.run(Unknown Source)\nCaused by: java.io.IOException: Unable to locate a login configuration\n\tat com.sun.security.auth.login.ConfigFile.init(Unknown Source)\n\t... 28 more\n\nIt's obviously because the JAASRealm is failing.  The problem is... I'm not\nusing JAAS at all, and don't want to!  I just want to use the standard\nMemoryUserDatabase, and as such, here's my FULL \"server.xml\" (located in\n\"%CATALINA_HOME%\\conf\", as per default):\n\n----------------------------------------\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\" standalone=\"yes\"?>\n<Server port=\"8005\" shutdown=\"SHUTDOWN\" debug=\"0\">\n\t<Listener className=\"org.apache.catalina.mbeans.ServerLifecycleListener\" />\n\t<Listener\nclassName=\"org.apache.catalina.mbeans.GlobalResourcesLifecycleListener\" />\n\t<GlobalNamingResources>\n\t\t<Resource name=\"UserDatabase\" auth=\"Container\"\ntype=\"org.apache.catalina.UserDatabase\" description=\"User database that can be\nupdated and saved\" factory=\"org.apache.catalina.users.MemoryUserDatabaseFactory\"\npathname=\"conf/tomcat-users.xml\" />\n\t</GlobalNamingResources>\n\t<Service name=\"Catalina\">\n\t\t<Connector port=\"8080\" maxThreads=\"150\" minSpareThreads=\"10\" maxSpareThreads=\"20\"\n\t\t enableLookups=\"false\" redirectPort=\"8443\" acceptCount=\"100\"\n\t\t connectionTimeout=\"20000\" disableUploadTimeout=\"true\" />\n\t\t<Engine name=\"Catalina\" defaultHost=\"localhost\">\n\t\t\t<Host name=\"localhost\" appBase=\"webapps\" unpackWARs=\"false\" autoDeploy=\"true\"\nxmlValidation=\"false\" xmlNamespaceAware=\"false\">\n\t\t\t\t<Alias>europa</Alias>\n\t\t\t\t<Valve className=\"org.apache.catalina.valves.FastCommonAccessLogValve\"\n\t\t\t\t directory=\"logs\" prefix=\"access.\" suffix=\".log\"\n\t\t\t\t pattern=\"common\" resolveHosts=\"false\"/>\n\t\t\t</Host>\n\t\t</Engine>\n\t</Service>\n</Server>\n----------------------------------------\n\n...and my \"manager.xml\" (located in \"%CATALINA_HOME%\\conf\\Catalina\\localhost\",\nas per default):\n\n----------------------------------------\n<Context docBase=\"${catalina.home}/server/webapps/manager\"\n         privileged=\"true\" antiResourceLocking=\"false\" antiJARLocking=\"false\">\n\n  <!-- Link to the user database we will get roles from -->\n  <ResourceLink name=\"users\" global=\"UserDatabase\"\n                type=\"org.apache.catalina.UserDatabase\"/>\n\n</Context>\n----------------------------------------\n\n...and my \"tomcat-users.xml\" file (located in \"%CATALINA_HOME%\\conf\", as per\ndefault)\n\n----------------------------------------\n<?xml version='1.0' encoding='utf-8'?>\n<tomcat-users>\n  <role rolename=\"manager\"/>\n  <role rolename=\"admin\"/>\n  <user username=\"admin\" password=\"secret\" roles=\"admin,manager\"/>\n</tomcat-users>\n----------------------------------------\n\nFor information, I'm running WinXP Pro SP2 with Java 5.0 (final), and Tomcat\n5.5.4 (installed with the \".exe\" file.", "id": 67207, "time": "2004-11-19T13:00:16Z", "creator": "chris92250@hotmail.com", "creation_time": "2004-11-19T13:00:16Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 32314, "attachment_id": null, "text": "JAAS is the default realm. Define another realm as in the default server.xml.", "id": 67219, "time": "2004-11-19T15:20:29Z", "creator": "remm@apache.org", "creation_time": "2004-11-19T15:20:29Z", "is_private": false}]