[{"count": 0, "tags": [], "bug_id": 22985, "attachment_id": null, "text": "I am running a load test against a Oracle 9iAS application server with a \nStruts front end and BC4J back end.  As the test runs the following error \nmessage appears several times in the log files:\n\n09/08/2003 8:19:01 AM WARN  - jmeter.protocol.http.sampler.HTTPSampler: For \ninput string: \"\" java.lang.NumberFormatException: For input string: \"\"\n\tat java.lang.NumberFormatException.forInputString(Unknown Source)\n\tat java.lang.Long.parseLong(Unknown Source)\n\tat java.lang.Long.parseLong(Unknown Source)\n\tat java.text.DigitList.getLong(Unknown Source)\n\tat java.text.DecimalFormat.parse(Unknown Source)\n\tat java.text.SimpleDateFormat.subParse(Unknown Source)\n\tat java.text.SimpleDateFormat.parse(Unknown Source)\n\tat java.text.DateFormat.parse(Unknown Source)\n\tat \norg.apache.jmeter.protocol.http.control.CookieManager.addCookieFromHeader\n(CookieManager.java:361)\n\tat \norg.apache.jmeter.protocol.http.sampler.HTTPSampler.saveConnectionCookies\n(HTTPSampler.java:1085)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample\n(HTTPSampler.java:962)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample\n(HTTPSampler.java:445)\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:277)\n\tat java.lang.Thread.run(Unknown Source)\n\n-- Also I am getting:\n\n09/08/2003 8:03:12 AM WARN  - jmeter.protocol.http.sampler.HTTPSampler: For \ninput string: \"0907E2.0907E\" java.lang.NumberFormatException: For input \nstring: \"0907E2.0907E\"\n\tat java.lang.NumberFormatException.forInputString(Unknown Source)\n\tat java.lang.FloatingDecimal.readJavaFormatString(Unknown Source)\n\tat java.lang.Double.parseDouble(Unknown Source)\n\tat java.text.DigitList.getDouble(Unknown Source)\n\tat java.text.DecimalFormat.parse(Unknown Source)\n\tat java.text.SimpleDateFormat.subParse(Unknown Source)\n\tat java.text.SimpleDateFormat.parse(Unknown Source)\n\tat java.text.DateFormat.parse(Unknown Source)\n\tat \norg.apache.jmeter.protocol.http.control.CookieManager.addCookieFromHeader\n(CookieManager.java:361)\n\tat \norg.apache.jmeter.protocol.http.sampler.HTTPSampler.saveConnectionCookies\n(HTTPSampler.java:1085)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample\n(HTTPSampler.java:962)\n\tat org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample\n(HTTPSampler.java:445)\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:277)\n\tat java.lang.Thread.run(Unknown Source)\n\nI checked the source distribution and the exception is being raised from the \nfollowing spot in the code (lines 293-299 of CookieManager.java):\n  String key = nvp.substring(0,index);\n  if (key.equalsIgnoreCase(\"expires\")) {\n    try {\n      String expires = nvp.substring(index+1);\n      Date date = dateFormat.parse(expires);\n      newCookie.setExpires(date.getTime());\n    } catch (ParseException pe) {}\n\nThis may be able to be fixed by either selectively catching the \nNumberFormatException or just catching Exception, since it appears that when \nthere is an error you would like to do nothing.", "id": 43833, "time": "2003-09-08T13:09:35Z", "creator": "Cbaatz@irontree.biz", "creation_time": "2003-09-08T13:09:35Z", "is_private": false}, {"count": 1, "text": "I modified the copy of the source that I downloaded to catch \nNumberFormatException, but I am still recieving the following error message:\n\n09/08/2003 10:44:22 AM WARN  - jmeter.protocol.http.sampler.HTTPSampler: -1 \njava.lang.ArrayIndexOutOfBoundsException: -1\n  at java.text.DigitList.append(Unknown Source)\n  at java.text.DecimalFormat.subparse(Unknown Source)\n  at java.text.DecimalFormat.parse(Unknown Source)\n  at java.text.SimpleDateFormat.subParse(Unknown Source)\n  at java.text.SimpleDateFormat.parse(Unknown Source)\n  at java.text.DateFormat.parse(Unknown Source)\n  at org.apache.jmeter.protocol.http.control.CookieManager.addCookieFromHeader\n(CookieManager.java:361)\n  at org.apache.jmeter.protocol.http.sampler.HTTPSampler.saveConnectionCookies\n(HTTPSampler.java:1085)\n  at org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample\n(HTTPSampler.java:962)\n  at org.apache.jmeter.protocol.http.sampler.HTTPSampler.sample\n(HTTPSampler.java:445)\n  at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:277)\n  at java.lang.Thread.run(Unknown Source)\n\nIt appears the ParseException does not cover all possible parsing failures.", "bug_id": 22985, "attachment_id": null, "id": 43840, "time": "2003-09-08T15:26:47Z", "creator": "Cbaatz@irontree.biz", "creation_time": "2003-09-08T15:26:47Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 22985, "text": "JMeter should certainly not bail out in this way on any input, but still I would\nlike to see the Set-Cookie: header on which it is failing. It is quite possible\nthat just catching the exception and ignoring it is only a half-solution.\n\nAlso, this really looks like a bug in SimpleDateFormat.parse. Could you please\ntell us on which JDK you observed this?", "id": 48541, "time": "2003-12-04T23:30:11Z", "creator": "jsalvata@atg.com", "creation_time": "2003-12-04T23:30:11Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 22985, "is_private": false, "id": 49098, "creation_time": "2003-12-14T17:07:50Z", "time": "2003-12-14T17:07:50Z", "creator": "jsalvata@atg.com", "text": "Verified this is JDK bug#4699765 (see\nhttp://developer.java.sun.com/developer/bugParade/bugs/4699765.html).\n\nThe bug is still in-progress, so working around it is appropriate. I'll do this.\n\nI would still like to see the cookie headers that cause the error -- as I said,\nthis may be part of a larger problem.", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 22985, "is_private": false, "id": 49099, "attachment_id": null, "creator": "jsalvata@atg.com", "creation_time": "2003-12-14T17:26:06Z", "time": "2003-12-14T17:26:06Z", "text": "I believe this is fixed now, although it's difficult to tell in the absence of a\ntest case.\n\nPlease test in current CVS (or wait for a couple of days and try with a nightly\nbuild) and reopen if it is not fixed."}]