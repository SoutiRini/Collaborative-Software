[{"attachment_id": 30419, "tags": [], "bug_id": 55083, "text": "Created attachment 30419\nGlobPatternMapper.diff\n\nWe are currently in the process to upgrade our builds from Ant 1.7.1 to Ant 1.9.1\nA colleague reported his buildscript using the globmapper to strip of a subdirectory (Yes i know, there are other ways like cutdirsmapper since Ant 1.8.x) is broken with Ant 1.9.1 - same behaviour with Ant 1.8.4 :\n\n<copy todir=\"some/dir\">\n <fileset dir=\"some/other/dir\" includes=\"src\\**\\*.java\" />\n <globmapper from=\"src\" to=\"\"/>\n</copy>\n\ngives :\n[copy]  some/other/dir/src/de/foo/bar/Foobar.java skipped - don't know how to handle it\n\u2026\n[copy] No sources found.\n\nbut it worked in Ant 1.7.1 :\n[copy]  some/other/dir/src/de/foo/bar/Foobar.java to some/dir/de/foo/bar/Foobar.java\n\nCreated a patch to make it work again, see attached diff.\n\nRegards, Gilbert", "count": 0, "id": 167744, "time": "2013-06-08T20:54:23Z", "creator": "mailforgilbert@gmx.de", "creation_time": "2013-06-08T20:54:23Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jglick@apache.org", "text": "Since <globmapper from=\"src\" to=\"\"/> is incorrect syntax, this should at least log a warning that it is being accepted only for backward compatibility.", "id": 167768, "time": "2013-06-10T15:34:39Z", "bug_id": 55083, "creation_time": "2013-06-10T15:34:39Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 55083, "is_private": false, "id": 167773, "attachment_id": null, "creator": "mailforgilbert@gmx.de", "creation_time": "2013-06-10T19:04:43Z", "time": "2013-06-10T19:04:43Z", "text": "(In reply to Jesse Glick from comment #1)\n> Since <globmapper from=\"src\" to=\"\"/> is incorrect syntax, this should at\n> least log a warning that it is being accepted only for backward\n> compatibility.\nIncorrect syntax => accepted, but some people used globmapper like that in the past.\nSo, the bugreport/patch will be accepted if a warning is logged ?"}, {"attachment_id": null, "tags": [], "bug_id": 55083, "text": "This here is from WHATSNEW\n\n * globmapper didn't work properly if the \"to\" or \"from\" patterns\n   didn't contain a \"*\".  In particular it implicitly added a * to the\n   end of the pattern(s).  This is no longer the case.  If you relied\n   on this behavior you will now need to explicitly specify the\n   trailing \"*\".\n\nin the \"that could break older environments\" section of 1.8.0RC1.\n\nThe change has been deliberate to fix counterintuitive behavior.", "count": 3, "id": 170191, "time": "2013-09-20T18:09:01Z", "creator": "bodewig@apache.org", "creation_time": "2013-09-20T18:09:01Z", "is_private": false}]