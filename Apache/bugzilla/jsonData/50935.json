[{"attachment_id": null, "tags": [], "bug_id": 50935, "text": "This bug occurs on a site running the MediaWiki software and occurs for both MW 1.13.2 and 1.16.2. When a request to download a file is received, apache returns a malformed Content-Encoding header value of \", gzip\". This befuddles some browsers (e.g., Safari, IE and Firefox), while others seem to silently discard the leading comma (Opera and Chrome). The result is the file is delivered to the host file system by the confused browsers in compressed form. Since the site uses Squid, I confirmed that the problem also occurs when Squid is bypassed.\n\nNote: I attempted to read the bug writing help page https://issues.apache.org/bugwritinghelp.html as I am a new bug reporter. However, the link returns a 404 Not Found error. Here is some relevant information that I can only suppose is useful:\n\nApache version: 2.2.3\nPHP version: 5.3.5\nOS: CentOS 5.5\nBrowser: various - example is for Firefox 3.6.13 running on Mac OS X 10.6.6\n\nHere is the request and response headers (I have obscured some file and\ncookie information using ellipses to ensure privacy - the output is from \nHTTPFox running on Firefox):\n\n(Request-Line) GET /wiki?title=Special:ConfirmAccounts/\neditors&file=to...v.pdf HTTP/1.1\nHost  en.citizendium.org\nUser-Agent  Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; \nrv:1.9.2.13) Gecko/20101203 Firefox/3.6.13\nAccept   text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language   en-us,en;q=0.5\nAccept-Encoding   gzip,deflate\nAccept-Charset ISO-8859-1,utf-8;q=0.7,*;q=0.7\nKeep-Alive  115\nConnection  keep-alive\nReferer  http://en.citizendium.org/wiki?title=Special:ConfirmAccounts/\neditors&acrid=...\nCookie   __utma=184949757....\n\n(Status-Line)  HTTP/1.0 200 OK\nDate  Wed, 09 Mar 2011 01:27:46 GMT\nServer   Apache/2.2.3 (CentOS)\nX-Powered-By   PHP/5.3.5\nExpires  Thu, 01 Jan 1970 00:00:00 GMT\nCache-Control  no-cache, no-store, max-age=0, must-revalidate\nPragma   no-cache\nContent-Disposition  inline;filename*=utf-8'en'to...v.pdf\nLast-Modified  Tue, 08 Feb 2011 05:25:51 GMT\nContent-Encoding  , gzip\nVary  Accept-Encoding\nContent-Length 48636\nContent-Type   application/pdf\nX-Cache  MISS from aristotle.citizendium.org\nX-Cache-Lookup MISS from aristotle.citizendium.org:80\nVia   1.0 aristotle.citizendium.org:80 (squid/2.6.STABLE21)\nConnection  keep-alive\n\nNote that the Accept-Encoding header in the request specifies \"gzip, deflate\", while the Content-Encoding value in the response is \", gzip\". I posted a query about the problem on http://groups.google.com/group/comp.infosystems.www.servers.unix, but did not receive a response. (I  posted the query over three weeks ago).", "count": 0, "id": 145019, "time": "2011-03-15T13:39:08Z", "creator": "dnessett@yahoo.com", "creation_time": "2011-03-15T13:39:08Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 50935, "text": "Unless you have reproduced this problem using 2.2.17 please report it to your vendor rather than here.  (There are known mod_deflate issues in 2.2.3 which match the described symptoms.)", "count": 1, "id": 145045, "time": "2011-03-17T04:45:25Z", "creator": "jorton@redhat.com", "creation_time": "2011-03-17T04:45:25Z", "is_private": false}, {"count": 2, "tags": [], "creator": "dnessett@yahoo.com", "text": "(In reply to comment #1)\n> Unless you have reproduced this problem using 2.2.17 please report it to your\n> vendor rather than here.  (There are known mod_deflate issues in 2.2.3 which\n> match the described symptoms.)\n\nI searched the mod_deflate bugs looking for a duplicate before I submitted this report and also after reading this resolved statement. I could find no bug that mentioned the described symptoms. Would you specify the bug(s) you are referring to?", "id": 145063, "time": "2011-03-17T12:50:41Z", "bug_id": 50935, "creation_time": "2011-03-17T12:50:41Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 50935, "is_private": false, "count": 3, "id": 145072, "time": "2011-03-17T15:34:40Z", "creator": "poirier@pobox.com", "creation_time": "2011-03-17T15:34:40Z", "text": "I just searched and didn't see any reports of this particular behavior either.  On the other hand, I saw multiple bugs that resulted in changes to how the Content-Encoding header is handled, so I think verifying that this still occurs on current code is reasonable."}]