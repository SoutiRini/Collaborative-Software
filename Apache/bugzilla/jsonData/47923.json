[{"count": 0, "tags": [], "creator": "mustafa.topaloglu@bmw.de", "attachment_id": null, "text": "The stickiness of mod_proxy_balancer works fine, if all content is proxied to backend. \n\n<Proxy balancer://mycluster>\nBalancerMember http://160.50.216.29:3080 route=0\nBalancerMember http://160.50.216.28:3080 route=1\n</Proxy>\nProxyPass / balancer://mycluster/ stickysession=JSESSIONID|jsessionid nofailover=Off\n\n\nIf I try to proxy only a specified subdirectory, the stickiness cannot be preserved.\n\n<Proxy balancer://mycluster/subdir>\nBalancerMember http://160.50.216.29:3080 route=0\nBalancerMember http://160.50.216.28:3080 route=1\n</Proxy>\nProxyPass / balancer://mycluster/subdir stickysession=JSESSIONID|jsessionid  nofailover=Off\n\nThere aren't any error entries in log files.", "id": 130764, "time": "2009-10-01T02:35:06Z", "bug_id": 47923, "creation_time": "2009-10-01T02:35:06Z", "is_private": false}, {"count": 1, "tags": [], "creator": "mustafa.topaloglu@bmw.de", "attachment_id": null, "text": "(In reply to comment #0)\n> The stickiness of mod_proxy_balancer works fine, if all content is proxied to\n> backend. \n> <Proxy balancer://mycluster>\n> BalancerMember http://160.50.216.29:3080 route=0\n> BalancerMember http://160.50.216.28:3080 route=1\n> </Proxy>\n> ProxyPass / balancer://mycluster/ stickysession=JSESSIONID|jsessionid\n> nofailover=Off\n> If I try to proxy only a specified subdirectory, the stickiness cannot be\n> preserved.\n> <Proxy balancer://mycluster/subdir>\n> BalancerMember http://160.50.216.29:3080 route=0\n> BalancerMember http://160.50.216.28:3080 route=1\n> </Proxy>\n> ProxyPass / balancer://mycluster/subdir stickysession=JSESSIONID|jsessionid \n> nofailover=Off\n> There aren't any error entries in log files.\n\nCorrection of the second configuration for proxying subdirectories:\n\n<Proxy balancer://mycluster/subdir>\n  BalancerMember http://160.50.216.29:3080 route=0\n  BalancerMember http://160.50.216.28:3080 route=1\n</Proxy>\nProxyPass /subdir balancer://mycluster/subdir stickysession=JSESSIONID|jsessionid nofailover=Off\n\nI tried all possible kombinations regarding trailing slashes. For example:\n\nProxyPass /subdir/ balancer://mycluster/subdir/ stickysession=JSESSIONID|jsessionid nofailover=Off", "id": 130770, "time": "2009-10-01T06:08:01Z", "bug_id": 47923, "creation_time": "2009-10-01T06:08:01Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 47923, "attachment_id": null, "text": "Solved using following line:\n\nProxyPassReverseCookiePath / /subdir\n\nSession stickiness can be preserved now.", "id": 131108, "time": "2009-10-13T06:26:23Z", "creator": "mustafa.topaloglu@bmw.de", "creation_time": "2009-10-13T06:26:23Z", "is_private": false}]