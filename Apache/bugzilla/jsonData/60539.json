[{"count": 0, "tags": [], "text": "Created attachment 34573\nPatch to allow user to provide variable ac_cv_strerror_r_rc_int\n\nHello all,\n\nWhen cross-compiling, apr sets ac_cv_strerror_r_rc_int=no. While this assumption is likely true in most cases, it's not true in all cases. For instance when cross-compiling with a musl toolchain it's not true (strerror_r returns int). We get a compiler warning there:\n\nmisc/unix/errorcodes.c: In function 'native_strerror':\nmisc/unix/errorcodes.c:358:9: warning: assignment makes pointer from integer without a cast [-Wint-conversion]\n     msg = strerror_r(statcode, buf, bufsize);\n         ^\n\nI propose that the user should have the possibility to specify whether or not strerror_r returns an int or not by providing ac_cv_strerror_r_rc_int=yes (or no) as a variable when running ./configure. I've attached a patch that adds this possibility without changing the current default of assuming a non-int return when cross-compiling.\n\nKind regards,\nSebastian", "attachment_id": 34573, "bug_id": 60539, "id": 195770, "time": "2016-12-31T16:40:28Z", "creator": "sebastian_ml@gmx.net", "creation_time": "2016-12-31T16:40:28Z", "is_private": false}]