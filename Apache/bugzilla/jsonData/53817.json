[{"count": 0, "tags": [], "creator": "mathieu.malaterre@gmail.com", "is_private": false, "text": "Created attachment 29317\ngenerated fo file\n\nHi,\n\nI cannot process the following dobbook slides:\n\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE slides PUBLIC \"-//Norman Walsh//DTD Slides XML V3.4.0//EN\" \"http://docbook.sourceforge.net/release/slides/3.4.0/schema/dtd/slides-full.dtd\">\n<slides>\n  <foil>\n  <title>My Title<footnote><para><ulink url=\"http://www.example.com/\"/></para></footnote></title>\n  <para/>\n  </foil>\n</slides>\n\n\nit keeps on failing with:\n\n$ xsltproc -o t.fo /usr/share/xml/docbook/custom/slides/3.4.0/xsl/fo/plain.xsl s.xml\n$ fop t.fo t.pdf \nImage not found. URI: images/draft.png. (See position 2:9711)\nImage not found. URI: images/draft.png. (See position 2:10376)\nImage not found. URI: images/draft.png. (See position 2:11039)\nImage not found. URI: images/draft.png. (See position 2:11699)\nImage not found. URI: images/draft.png. (See position 2:12356)\nImage not found. URI: images/draft.png. (See position 2:13013)\nImage not found. URI: images/draft.png. (See position 2:13667)\nImage not found. URI: images/draft.png. (See position 2:14326)\nImage not found. URI: images/draft.png. (See position 2:14985)\nImage not found. URI: images/draft.png. (See position 2:15641)\nImage not found. URI: images/draft.png. (See position 2:16299)\nImage not found. URI: images/draft.png. (See position 2:16957)\nImage not found. URI: images/draft.png. (See position 2:17612)\nImage not found. URI: images/draft.png. (See position 2:18270)\nImage not found. URI: images/draft.png. (See position 2:18928)\nImage not found. URI: images/draft.png. (See position 2:19583)\nImage not found. URI: images/draft.png. (See position 2:20242)\nImage not found. URI: images/draft.png. (See position 2:20901)\nImage not found. URI: images/draft.png. (See position 2:21557)\nException\njava.lang.NullPointerException", "id": 161896, "time": "2012-09-02T15:36:14Z", "bug_id": 53817, "creation_time": "2012-09-02T15:36:14Z", "attachment_id": 29317}, {"count": 1, "tags": [], "creator": "gadams@apache.org", "text": "just verified this on dev trunk, the full backtrace is\n\n\njava.lang.NullPointerException\n        at org.apache.fop.layoutmgr.PageBreakingAlgorithm.handleFootnotes(PageBreakingAlgorithm.java:370)\n        at org.apache.fop.layoutmgr.PageBreakingAlgorithm.handleBox(PageBreakingAlgorithm.java:319)\n        at org.apache.fop.layoutmgr.BreakingAlgorithm.handleElementAt(BreakingAlgorithm.java:751)\n        at org.apache.fop.layoutmgr.BreakingAlgorithm.findBreakingPoints(BreakingAlgorithm.java:554)\n        at org.apache.fop.layoutmgr.BreakingAlgorithm.findBreakingPoints(BreakingAlgorithm.java:503)\n        at org.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:421)\n        at org.apache.fop.layoutmgr.StaticContentLayoutManager.doLayout(StaticContentLayoutManager.java:144)\n        at org.apache.fop.layoutmgr.PageSequenceLayoutManager.layoutSideRegion(PageSequenceLayoutManager.java:180)\n        at org.apache.fop.layoutmgr.PageSequenceLayoutManager.finishPage(PageSequenceLayoutManager.java:186)\n        at org.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:115)\n        at org.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:267)\n        at org.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:128)\n        at org.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:347)\n        at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:181)\n        at org.apache.xalan.transformer.TransformerIdentityImpl.endElement(TransformerIdentityImpl.java:1101)\n        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)\n        at org.apache.xerces.xinclude.XIncludeHandler.endElement(Unknown Source)\n        at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown Source)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)\n        at org.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:484)\n        at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:285)\n        at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:115)\n        at org.apache.fop.cli.Main.startFOP(Main.java:177)\n        at org.apache.fop.cli.Main.main(Main.java:208)", "id": 161914, "time": "2012-09-03T00:09:59Z", "bug_id": 53817, "creation_time": "2012-09-03T00:09:59Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 53817, "attachment_id": null, "is_private": false, "id": 161915, "time": "2012-09-03T00:19:10Z", "creator": "gadams@apache.org", "creation_time": "2012-09-03T00:19:10Z", "text": "looks like this code was last modified by Andreas in\n\nhttp://svn.apache.org/viewvc?view=revision&revision=1067762\n\nAndreas would you have time to take a look at this?"}, {"count": 3, "tags": [], "bug_id": 53817, "attachment_id": 29318, "is_private": false, "id": 161918, "time": "2012-09-03T08:15:12Z", "creator": "psancho.asf@gmail.com", "creation_time": "2012-09-03T08:15:12Z", "text": "Created attachment 29318\nMinimal test case\n\nThe NPE is thrown when foot-note is declared within the static-before region.\nIf I move the foot-note to the body, the NPE disappears.\n\nNote that FOP behaves in the same way whatever the version is (tried against v0.95, v1.0, latest trunk).\n\nThat said, IMHO I don't think that a static region is the right place for a footnote declaration, so author should avoid to use that at this place, as a good practice/workaround."}, {"count": 4, "tags": [], "creator": "mathieu.malaterre@gmail.com", "text": "As per comment on:\n\nhttps://lists.oasis-open.org/archives/docbook-apps/201209/msg00062.html\n\nThis is a bug in the original fo generator (docbook). Closing issue as fixed.", "id": 162512, "time": "2012-10-02T15:48:16Z", "bug_id": 53817, "creation_time": "2012-10-02T15:48:16Z", "is_private": false, "attachment_id": null}, {"count": 5, "attachment_id": null, "bug_id": 53817, "text": "FOP should throw/warn a more explicit Exception/message than throwing NPE in this case.\nSo, I reopen it as a reminder.", "id": 162533, "time": "2012-10-03T07:08:16Z", "creator": "psancho.asf@gmail.com", "creation_time": "2012-10-03T07:08:16Z", "tags": [], "is_private": false}]