[{"count": 0, "tags": [], "creator": "vitezslav.stejskal@sun.com", "text": "The ant.bat script doesn't handle commandline arguments correctly. The symptoms\nare that using following command 'ant -Dmyprop= mytrg' sets the value of\n'myprop' property to the 'mytrg' instead of setting the 'myprop' blank (empty\nstring) and starting the target 'mytrg'.\n\nI tried to use commandline params handling from ant.bat distributed with ant 1.4\nand things started to work fine again. I'll attach the patch file.", "id": 38899, "time": "2003-06-16T08:45:39Z", "bug_id": 20802, "creation_time": "2003-06-16T08:45:39Z", "is_private": false, "attachment_id": null}, {"attachment_id": 6845, "tags": [], "bug_id": 20802, "is_private": false, "count": 1, "id": 38900, "time": "2003-06-16T08:48:52Z", "creator": "vitezslav.stejskal@sun.com", "creation_time": "2003-06-16T08:48:52Z", "text": "Created attachment 6845\nThe patch for ant.bat (cmdline params handling overtaken from ant.bat 1.4)"}, {"count": 2, "tags": [], "creator": "jan@materne.de", "text": "That is a common windows problem. You have to mask the blank. A\n    ant -Dmyprop=\" myvalue\"\nwould work.", "id": 38901, "time": "2003-06-16T08:52:38Z", "bug_id": 20802, "creation_time": "2003-06-16T08:52:38Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 20802, "is_private": false, "count": 3, "id": 38904, "time": "2003-06-16T09:15:55Z", "creator": "vitezslav.stejskal@sun.com", "creation_time": "2003-06-16T09:15:55Z", "text": "Well, with ant 1.4 writing 'ant -Dmyprop= mytrg' did following:\n\n1. set myprop to empty string\n2. run mytrg target\n\nNow, with ant 1.5.3 it does following:\n\n1. set myprop to 'mytrg' string\n2. run default target\n\nI'd like to keep the behavior of ant 1.4, because it's exactly what people\nexpect to happen when writing the command above."}, {"attachment_id": null, "tags": [], "bug_id": 20802, "text": "So that is a case of non-backwards-compatibility.\nTherefore I vote for introducing that.", "count": 4, "id": 38905, "time": "2003-06-16T09:18:34Z", "creator": "jan@materne.de", "creation_time": "2003-06-16T09:18:34Z", "is_private": false}, {"count": 5, "text": "I would prefer to close this bug as wontfix, even if there is there a change \ncompared to ant 1.4. In this case there is a clear workaround to get the defines \nin :\nant.bat -D\"property=value\" or -D\"property= value\" works\nSorry", "creator": "levylambert@tiscali-dsl.de", "is_private": false, "id": 38909, "time": "2003-06-16T09:47:09Z", "bug_id": 20802, "creation_time": "2003-06-16T09:47:09Z", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 20802, "text": "I respectfully disagree. I don't think that existence of workaround is a good\nreason for leaving the bug unfixed. Even you guys admited that it's a\nbackward-compatibility bug, so please either fix it or explain carefuly why it\nshouldn't be fixed. I am sorry too.", "count": 6, "id": 38912, "time": "2003-06-16T10:04:38Z", "creator": "vitezslav.stejskal@sun.com", "creation_time": "2003-06-16T10:04:38Z", "is_private": false}, {"count": 7, "tags": [], "creator": "stevel@apache.org", "text": "I am for making this a WONTFIX too as we need to look at behaviour across\nplatforms as well as versions.\n\nVitezslav, I am sorry that you got different behaviour across versions, but the\n1.4 experience you had was not the intended behaviour and is not guaranteed to\nbe consistent across different launchers (.sh,.pl, .py, etc). It is this\nx-platform stuff at startup that causes lots of grief -go look at tools.ant.Main\nfor the details. ", "id": 38938, "time": "2003-06-16T20:52:15Z", "bug_id": 20802, "creation_time": "2003-06-16T20:52:15Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "creator": "vitezslav.stejskal@sun.com", "text": "Well, perhaps my scenario wasn't intended behavior, but it's there since ant 1.2\n(maybe earlier; I never used older versions) and people got used to it already.\nMoreover, my example _does_ work on linux/unix system even with ant 1.5.3 so I\nwould expected that it will continue to work on win platforms too.\n\nIf you still think that it should not be fixed than ok; close it. I don't have\nbetter arguments and won't waste more time on this. Sorry, I just tried to help.\n\n", "id": 38961, "time": "2003-06-17T07:32:28Z", "bug_id": 20802, "creation_time": "2003-06-17T07:32:28Z", "is_private": false, "attachment_id": null}, {"count": 9, "text": "I think that there is a mis-understanding of the original\nrequest.\n\nThe behaviour requested is that:\nant -Dprop1= -Dprop2=hello -Dprop3= compile\nWill set prop1 to \"\", prop2 to \"hello\" and prop3 to \"\" and\nrun the target \"compile\".\n\nOn linux this works both for ant 1.5.3-1 and for the nigthly\nbuild.\n\nThankfully I do not have windows at the moment\nso I cannot test on windows.", "creator": "peter.reilly@corvil.com", "is_private": false, "id": 38963, "time": "2003-06-17T07:41:55Z", "bug_id": 20802, "creation_time": "2003-06-17T07:41:55Z", "tags": [], "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 20802, "is_private": false, "count": 10, "id": 38966, "time": "2003-06-17T10:10:17Z", "creator": "vitezslav.stejskal@sun.com", "creation_time": "2003-06-17T10:10:17Z", "text": "Exactly. Thanks for rewording my request."}, {"attachment_id": null, "tags": [], "bug_id": 20802, "text": "I am going to observe that ant.bat causes an inordinate amount of grief. No\npatches can be accepted on this bat file unless the submitter has tested them on\n\n(a) A Win9x box with spaces in the paths to Ant and to the JDK\n(b) A WinNT box with spaces in the paths to Ant and to the JDK\n(c) Both of the above with ANT_HOME and JAVA_HOME undefined.\n(d) Cygwin\n\nWhat we have in Ant1.5.1 works on these configs, and I am loath to change it for\nany reason.", "count": 11, "id": 38978, "time": "2003-06-17T17:25:06Z", "creator": "stevel@apache.org", "creation_time": "2003-06-17T17:25:06Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 20802, "text": "let's be realistic.  Changing it back to the 1.4 behavior now (after 1.7.1) would break more than it would fix.", "count": 12, "id": 118453, "time": "2008-07-10T05:44:29Z", "creator": "bodewig@apache.org", "creation_time": "2008-07-10T05:44:29Z", "is_private": false}]