[{"count": 0, "tags": [], "creator": "ipriha@norther.org", "attachment_id": null, "id": 71753, "time": "2005-03-03T10:55:55Z", "bug_id": 33830, "creation_time": "2005-03-03T10:55:55Z", "is_private": false, "text": "If a web app has other resources than classes in jar archives and accesses them\nthrough the context class loader, the undeployment of such web apps fails\nbecause the corresponding jar archives are not deleted. This happens in at least\n5.5.6, 5.5.7 and 5.5.8a.\n\nThe same problem is present in 4.1 series but not in 5.0 series.\n\nThe following code snippet shows a simple test case:\n\n        ClassLoader loader = Thread.currentThread().getContextClassLoader();\n        URL url1 = loader.getResource(\"LocalStrings.properties\");\n        InputStream in = url1.openStream();\n        int b = in.read();\n        in.close();"}, {"attachment_id": 14395, "tags": [], "bug_id": 33830, "text": "Created attachment 14395\nThe hello world sample with added jar resource access\n\nThe attached servlet must be packed into a jar together with the\nLocalStrings.properties resource file to repeat the problem.", "count": 1, "id": 71754, "time": "2005-03-03T10:58:57Z", "creator": "ipriha@norther.org", "creation_time": "2005-03-03T10:58:57Z", "is_private": false}, {"count": 2, "tags": [], "creator": "ipriha@norther.org", "attachment_id": 14396, "id": 71756, "time": "2005-03-03T11:01:03Z", "bug_id": 33830, "creation_time": "2005-03-03T11:01:03Z", "is_private": false, "text": "Created attachment 14396\nThe resources for the hello world sample\n\nThe resources must be packed into a jar together with the HelloWorldExample\nservlet to reproduce the problem."}, {"count": 3, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 71758, "time": "2005-03-03T11:07:04Z", "bug_id": 33830, "creation_time": "2005-03-03T11:07:04Z", "is_private": false, "text": "There's a FAQ chapter on Windows. You should read it (and, more generally, post\nto tomcat-user for this kind of issue).\n\nIf you want to avoid locking, you can also use getResourceAsStream, or learn to\nopen your URLs cleanly after using setUseCaches(false)."}]