[{"count": 0, "tags": [], "bug_id": 3559, "is_private": false, "text": "A Unicode character of that code point is greater than 0xffff is\nprinted as two character references like \"&#xd800;&#xdc00\".  It\nmust be one character reference like \"&#x10000;\".\n\nHow to reproduce:\nimport org.apache.xerces.parsers.*;\nimport org.apache.xml.serialize.*;\nimport org.xml.sax.*;\nimport java.io.*;\nimport org.w3c.dom.*;\n\npublic class Serialize {\n    public static void main(String[] argv) throws Exception {\n        String xmlString =\n            \"<root>\\n\"+\n            \" <child \nattr='attr&#x2665;&#x10000;'>text&#x2665;&#x10000;</child>\\n\"+\n            \"</root>\\n\";\n\n        DOMParser dp = new DOMParser();\n        dp.parse(new InputSource(new StringReader(xmlString)));\n        Document doc = dp.getDocument();\n\n        OutputFormat format = new OutputFormat(\"xml\", \"ISO-8859-1\", false);\n        format.setPreserveSpace(true);\n        new XMLSerializer(System.out, format).serialize(doc);\n        System.out.println(\"\");\n    }\n}", "id": 5395, "time": "2001-09-11T20:35:30Z", "creator": "kent@hauN.org", "creation_time": "2001-09-11T20:35:30Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "kent@hauN.org", "is_private": false, "text": "Created attachment 525\nThis patch fixes the problem.", "id": 5396, "time": "2001-09-11T20:37:07Z", "bug_id": 3559, "creation_time": "2001-09-11T20:37:07Z", "attachment_id": 525}, {"count": 2, "tags": [], "bug_id": 3559, "attachment_id": null, "text": "I have also experienced this bug although in my case the symptom was slightly\ndifferent.\n\nGiven the following input (which is part of an XSD pattern)\n[&#xA0;-&#xFFFD;]|[&#x10000;-&#x10FFFF;]\n\nI got the following output (manually converted from decimal to hex)\n[&#xA0;-&#xFFFD;]|[&#x10000;&#xDC00;-&#x10FFFF;&#DFFF;]\n\nIt is writing out the correct character reference and then appears to be writing\nout a character reference for the second surrogate character rather than\nskipping it.\n\nWhat are the chances of this being fixed ?", "id": 58845, "time": "2004-06-07T16:26:17Z", "creator": "pduffin@volantis.com", "creation_time": "2004-06-07T16:26:17Z", "is_private": false}]