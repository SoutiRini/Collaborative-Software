[{"count": 0, "tags": [], "bug_id": 31556, "attachment_id": null, "id": 64658, "time": "2004-10-06T02:50:03Z", "creator": "kent@cpttm.org.mo", "creation_time": "2004-10-06T02:50:03Z", "is_private": false, "text": "1. The sample servlet (see below) calls getResourceAsStream to read the first\nline of a text file (eg, \"abc\") and outputs it.\n2. I update the text file to change its content (eg, \"def\").\n3. Reload the web page but it is still displaying the old file content (\"abc\").\nIt means the servlet is not getting the new file content.\n4. However, there is a twist. If I save the file again (eg, add a space, delete\nthe space and save again) and reload the web page, then it will display the new\nfile content (\"def\").\n\nThe sample servlet is shown below. The text file is /WEB-INF/test.txt.\n\nimport java.io.*;\n\nimport javax.servlet.*;\nimport javax.servlet.http.*;\n\npublic class HelloServlet extends HttpServlet {\n\tprotected void doGet(\n\t\tHttpServletRequest request,\n\t\tHttpServletResponse response)\n\t\tthrows ServletException, IOException {\n\t\tPrintWriter writer = response.getWriter();\n\t\tBufferedReader reader =\n\t\t\tnew BufferedReader(\n\t\t\t\tnew InputStreamReader(\n\t\t\t\t\tgetServletContext().getResourceAsStream(\n\t\t\t\t\t\t\"/WEB-INF/test.txt\")));\n\t\ttry {\n\t\t\twriter.println(reader.readLine());\n\t\t} finally {\n\t\t\treader.close();\n\t\t}\n\t}\n}"}, {"count": 1, "tags": [], "text": "So what are you saying?  You have to save your changes in order for Tomcat to \npick them up?  That's fairly obvious, and isn't a Tomcat bug.\n\nOr are you saying Tomcat only picks up the changes after you save the file a \nsecond time, not the first time?  Because modifying a file once and saving it \nworks for me just fine, the updated contents show up.", "is_private": false, "id": 64687, "creator": "yoavs@computer.org", "time": "2004-10-06T14:29:01Z", "bug_id": 31556, "creation_time": "2004-10-06T14:29:01Z", "attachment_id": null}, {"count": 2, "text": "I mean Tomcat picks up the change only after I save the file the second time\n(most of the time). If you're sure it isn't a bug in Tomcat, then it may have\nsomething to do with the jdk.", "bug_id": 31556, "is_private": false, "id": 64726, "time": "2004-10-07T01:17:48Z", "creator": "kent@cpttm.org.mo", "creation_time": "2004-10-07T01:17:48Z", "tags": [], "attachment_id": null}]