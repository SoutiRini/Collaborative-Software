[{"count": 0, "tags": [], "bug_id": 3457, "is_private": false, "text": "The call of \"<depend srcdir=\"${src}\" destdir=\"${build}\" closure=\"yes\"/>\"\n(variables are correctly filled) results in the following exception:\n\nBuild.xml:128: java.lang.NullPointerException\n\tat org.apache.tools.ant.taskdefs.optional.depend.Depend.execute\n(Depend.java:534)\n\tat org.apache.tools.ant.Task.perform(Task.java:217)\n\tat org.apache.tools.ant.Target.execute(Target.java:164)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:182)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:601)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:256)\n\tat org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:120)\n\tat org.apache.tools.ant.Task.perform(Task.java:217)\n\tat org.apache.tools.ant.Target.execute(Target.java:164)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:182)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:601)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:560)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:454)\n\tat org.apache.tools.ant.Main.start(Main.java:153)\n\tat org.apache.tools.ant.Main.main(Main.java:176)\n--- Nested Exception ---\njava.lang.NullPointerException\n\tat \norg.apache.tools.ant.taskdefs.optional.depend.Depend.determineDependencies\n(Depend.java:299)\n\tat org.apache.tools.ant.taskdefs.optional.depend.Depend.execute\n(Depend.java:464)\n\tat org.apache.tools.ant.Task.perform(Task.java:217)\n\tat org.apache.tools.ant.Target.execute(Target.java:164)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:182)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:601)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:256)\n\tat org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:120)\n\tat org.apache.tools.ant.Task.perform(Task.java:217)\n\tat org.apache.tools.ant.Target.execute(Target.java:164)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:182)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:601)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:560)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:454)\n\tat org.apache.tools.ant.Main.start(Main.java:153)\n\tat org.apache.tools.ant.Main.main(Main.java:176)\n\nI solved the problem the following way, maybe there is a better one:\n\n(from row 288)\n            if (dependencyList == null) {\n                /***************INSERTED***********************/\n                dependencyMap = new Hashtable();\n                /***************END****************************/\n\n                // not cached - so need to read directly from the class file\n                FileInputStream inFileStream = null;\n                try {\n                    inFileStream = new FileInputStream(info.absoluteFile);\n                    ClassFile classFile = new ClassFile();\n                    classFile.read(inFileStream);\n                    \n                    dependencyList = classFile.getClassRefs();\n                    if (dependencyList != null) {\n                        cacheDirty = true;\n                        dependencyMap.put(info.className, dependencyList);\n                    }\n                    \n                }", "id": 5154, "time": "2001-09-06T05:17:52Z", "creator": "chs@logas.de", "creation_time": "2001-09-06T05:17:52Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 3457, "is_private": false, "id": 5356, "creation_time": "2001-09-11T07:28:11Z", "time": "2001-09-11T07:28:11Z", "creator": "conor@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of 3394 ***", "attachment_id": null}]