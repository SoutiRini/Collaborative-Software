[{"count": 0, "tags": [], "creator": "yen.chang@alcatel.com", "is_private": false, "text": "I use rotatelogs utility which comes with apache 2.0.55 to maintain various\nlogs. For unknown reasons, the process which manages access_log uses lots of\nmemory. The following is a snapshot of \"top\" results.  In the production system,\nit uses 2.5 G out of total 4 G memory. I suspect there are memory leak in this\nprogram. Please investigate. Thanks.\n\n\n\nlast pid: 28090;  load averages:  0.01,  0.11,  0.15                           \n                                    17:01:08\n71 processes:  70 sleeping, 1 on cpu\nCPU states: 99.3% idle,  0.0% user,  0.7% kernel,  0.0% iowait,  0.0% swap\nMemory: 2048M real, 1340M free, 410M swap in use, 13G swap free\n\n   PID USERNAME THR PRI NICE  SIZE   RES STATE    TIME    CPU COMMAND\n 29404 root      69   0   10  136M   79M sleep   33:05  0.00% java\n 15073 root       4  58    0   37M   35M sleep    0:23  0.00% rotatelogs\n   227 root      20  58    0 9960K 4216K sleep    0:05  0.00% syslogd\n 13564 root       3  59    0 6832K 4136K sleep    0:00  0.00% httpd", "id": 91880, "time": "2006-08-03T22:12:58Z", "bug_id": 40183, "creation_time": "2006-08-03T22:12:58Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 40183, "attachment_id": null, "text": "It looks like the memory use of rotatelogs will be proportional to the number of\ntimes it has re-opened the log file; it needs to be using subpools and clearing\nthem etc to have constant memory use.  (pools are grrrrreat!)", "id": 96755, "time": "2006-12-11T07:00:19Z", "creator": "jorton@redhat.com", "creation_time": "2006-12-11T07:00:19Z", "is_private": false}, {"count": 2, "tags": [], "creator": "takashi.asfbugzilla@tks.st", "is_private": false, "text": "Created attachment 21431\nworkaround against trunk\n\nmake a pool for logfile and clear it in each apr_file_open.\nI made this patch in a short glance so there might be better solutions.", "id": 113148, "time": "2008-01-25T15:43:33Z", "bug_id": 40183, "creation_time": "2008-01-25T15:43:33Z", "attachment_id": 21431}, {"count": 3, "tags": [], "bug_id": 40183, "attachment_id": null, "text": "IMHO this would SEGFAULT if we fail to open a new logfile and have to reuse the\nold one. So I committed a slightly modified version of your patch to trunk as\nr615901 (http://svn.apache.org/viewvc?rev=615901&view=rev). Given the typical\nfrequency of logfile reopenings I guess we can afford the apr_pool_create /\napr_pool_destroy overhead.", "id": 113188, "time": "2008-01-28T06:52:28Z", "creator": "rpluem@apache.org", "creation_time": "2008-01-28T06:52:28Z", "is_private": false}, {"count": 4, "tags": [], "creator": "takashi.asfbugzilla@tks.st", "is_private": false, "text": "(In reply to comment #3)\n> IMHO this would SEGFAULT if we fail to open a new logfile\n\nExactly. My patch was very random. Thanks for review.", "id": 113193, "time": "2008-01-28T07:10:42Z", "bug_id": 40183, "creation_time": "2008-01-28T07:10:42Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 40183, "text": "How can I get this modified rotatelogs.c .I downloaded new snapshot from apache.org for httpd it did not contained this change.\nPlz Comment\nThanks\nA", "id": 122938, "time": "2008-11-30T12:07:06Z", "creator": "anurag_gujral@yahoo.com", "creation_time": "2008-11-30T12:07:06Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "anurag_gujral@yahoo.com", "is_private": false, "text": "(In reply to comment #5)\n> How can I get this modified rotatelogs.c .I downloaded new snapshot from\n> apache.org for httpd it did not contained this change.\n> Plz Comment\n> Thanks\n> A\n> \n\nsorry got the file.\nThanks\nA", "id": 122939, "time": "2008-11-30T12:09:13Z", "bug_id": 40183, "creation_time": "2008-11-30T12:09:13Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 40183, "text": "Fixed since 2.2.9.", "count": 7, "id": 122940, "time": "2008-11-30T13:47:59Z", "creator": "rpluem@apache.org", "creation_time": "2008-11-30T13:47:59Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 40183, "attachment_id": null, "text": "*** Bug 44783 has been marked as a duplicate of this bug. ***", "id": 144765, "time": "2011-03-06T00:29:56Z", "creator": "ben@reser.org", "creation_time": "2011-03-06T00:29:56Z", "is_private": false}]