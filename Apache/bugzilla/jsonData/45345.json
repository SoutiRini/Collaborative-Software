[{"count": 0, "tags": [], "bug_id": 45345, "is_private": false, "text": "Just experimenting with the creation of JSP custom tags.\nI needed to create a ValueExpression throught the ExpressionFactory class but I've realized the EL implementation included in Apache doesn't include the methods \"newInstance\" of the ExpressionFactory.\nI've looked inside the SVN repo just to make sure that the implementation wasn't in development-\n\nThese methods are included in the J2EE 5 specs:\nhttp://java.sun.com/javaee/5/docs/api/javax/el/ExpressionFactory.html\n\nSo what about this?\n\n\n** How to reproduce **\nCreate a JSP custom component, for instance:\n\n--- [snip] ---\npublic class MyJspTag extends SimpleTagSupport\n{\n        String bean;\n        String name;\n        String value;\n\n        //...\n\n        @Override\n        public void doTag() throws JspException, SkipPageException, IOException\n        {\n                ELContext elContext = this.getJspContext().getELContext();\n\n                ExpressionFactory expressionFactory = null;\n                ValueExpression valueExpression = null;\n\n                expressionFactory = ExpressionFactory.newInstance();\n                valueExpression = expressionFactory.createValueExpression(\n                                elContext,\n                                \"${\" + bean + \".\" + name + \"}\",\n                                Object.class\n                );\n                valueExpression.setValue(elContext, value);\n        }\n}\n--- [/snip] ---\nCompile adding in the classpath I include the JARs el-api.jar, jsp-api.jar, servlet-api.jar you found in $CATALINA_HOME/lib\n\nThe compilation should give you the error:\n--- [snip] ---\n    [javac] .../MyTag.java:39: cannot find symbol\n    [javac] symbol  : method newInstance()\n    [javac] location: class javax.el.ExpressionFactory\n    [javac]             expressionFactory = ExpressionFactory.newInstance();\n    [javac]                                                  ^\n    [javac] 1 error\n--- [/snip] ---\n\nThanks!!\n\n-- Marco", "id": 118301, "time": "2008-07-05T03:24:49Z", "creator": "sguazt@gmail.com", "creation_time": "2008-07-05T03:24:49Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "sguazt@gmail.com", "text": "Just for info...\n\nI've tried to build the WAR for the GlassFish v2-ur2 (instead of Tomcat), including in the classpath the JAR: $GLASSFISH_HOME/lib/javaee.jar\n\nIt works.", "id": 118302, "time": "2008-07-05T08:18:20Z", "bug_id": 45345, "creation_time": "2008-07-05T08:18:20Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "text": "I'm pretty sure you are looking at a later version of the EL spec. The one included with JSP 2.1 doe snot have this method. I haven't checked, but I suspect that this method would come into effect with the next versions of the SP/Servlet specs, ie Tomact 7.", "is_private": false, "bug_id": 45345, "id": 118303, "time": "2008-07-05T10:27:26Z", "creator": "markt@apache.org", "creation_time": "2008-07-05T10:27:26Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 45345, "text": "*** Bug 45771 has been marked as a duplicate of this bug. ***", "id": 120509, "time": "2008-09-10T01:00:17Z", "creator": "markt@apache.org", "creation_time": "2008-09-10T01:00:17Z", "is_private": false, "attachment_id": null}]