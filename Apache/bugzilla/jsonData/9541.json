[{"count": 0, "tags": [], "text": "In moving my existing Apache 1.3.22 [bindist] (Cygwin based) to my Windows XP \nplatform (Cygwin based), I have encountered two problems.  The first problem \n(can't fork) was due to a cygwin problem that required me to rebase all of the \nDLLs.  After rebasing the DLLs, the httpd now starts.  First problem is solved!  \nSee below for details to solve this problem.\n\nSecond problem...a show stopper\n\nWhen viewing any page that has elements over approx 32KB in size, all bytes \nbeyond the 32KB boundary is garbage!  If you have images on the page, only the \n1st 32KB of the image is intact.  The rest is garbage.  The total downloaded \nimage size is correct!  If you download a file (http) and save it, only the 1st \n32KB will be correct, the remainder of correct size will be garbage.\n\nWhen I compare the download images & files with the source file, the diffeence \nbegins at byte offset 32769.  Files & elemments less than 32KB in size are \nloaded correctly.  If the HTML page itself is over 32KB (no graphics), the page \nis corrupted beyond the 32KB boundary.\n\nI then upgraded to the latest httpd release for Cygwin [bindist] (1.3.24) and \nthe same problem appears.  When I look at the error_log file, there is nothing \nof consequence being logged.  I'm running Cygwin DLL version 1.3.6.\n\nAt least one other user on the Cygwin mailing list is having the same problem \nwith data corruption beyond 32K on Win XP.  I have made several posts to the \ncygwin mailing lists but no one has taken the bite as it is not clear it is a \nCygwin problem.  This problem is present only on the Win XP system.  I'm running \nthe Professional version.\n\nYou can access my webserver on port 81 to see the problem at:\n\n        http://pmcferrin.Ugate.Net:81/photos/Live_Nature/\n\nThese images are loaded correctly when using the httpd server on my Win 98 \nsystem or if I point my browser to the hard disk.\n\nIn the first problem, the following rebase command was executed (a requirement):\n\ncd /bin\ncp cygwin1.dll Ncygwin1.dll\nrebase -d -b 0x68000000 -o 0x100000 \\\nN.cygwin1.dll \\\ncygreadline4.dll \\\ncygpng2.dll \\\ncygpanel6.dll \\\ncygpanel5.dll \\\ncygncurses6.dll \\\ncygncurses5.dll \\\ncygncurses++6.dll \\\ncygncurses++5.dll \\\ncygmenu6.dll \\\ncygmenu5.dll \\\ncygjpeg6b.dll \\\ncygjbig1.dll \\\ncygitk30.dll \\\ncygitcl30.dll \\\ncygintl.dll \\\ncygintl-1.dll \\\ncyghistory5.dll \\\ncyghistory4.dll \\\ncyggdbm.dll \\\ncygform6.dll \\\ncygform5.dll \\\ncygexslt-0.dll \\\ncygcrypto.dll \\\ncygbz21.0.dll \\\ncygXpm-noX4.dll \\\ncygXpm-X4.dll \\\nO.cygwin1.dll \\\ncygtcl80.dll \\\ncygssl.dll \\\ncygreadline5.dll\n\ncd /usr/local/apache/libexec\nrebase -d -b 0x64000000 -o 0x100000 \\\nlibproxy.dll \\\nmod_access.dll \\\nmod_actions.dll \\\nmod_alias.dll \\\nmod_asis.dll \\\nmod_auth.dll \\\nmod_auth_anon.dll \\\nmod_auth_dbm.dll \\\nmod_autoindex.dll \\\nmod_cern_meta.dll \\\nmod_cgi.dll \\\nmod_digest.dll \\\nmod_dir.dll \\\nmod_env.dll \\\nmod_expires.dll \\\nmod_headers.dll \\\nmod_imap.dll \\\nmod_include.dll \\\nmod_info.dll \\\nmod_log_config.dll \\\nmod_mime.dll \\\nmod_mime_magic.dll \\\nmod_negotiation.dll \\\nmod_rewrite.dll \\\nmod_setenvif.dll \\\nmod_speling.dll \\\nmod_status.dll \\\nmod_unique_id.dll \\\nmod_userdir.dll \\\nmod_usertrack.dll \\\nmod_vhost_alias.dll\n\nAfter remapping the above DLLs, I then exited ALL cygwin process so that the \ncygwin1.dll would unload.  Using an MS-DOS window, I moved file N.cygwin1.dll to \ncygwin1.dll.  I then restarted everything.\n\nIf you fail to remap all of the DLL, the httpd will not start with n error \nmessage similar to:\nC:\\cygwin\\usr\\local\\apache\\bin\\httpd.exe: *** unable to remap \nC:\\cygwin\\usr\\loca\nl\\apache\\libexec\\mod_vhost_alias.dll to same address as \nparent -- 0x470000\n11026126 [main] httpd 1248 sync_with_child: child 1796(0x6F0) died before \ninitialization with status code 0x111058895 [main] httpd 1248 sync_with_child: \n*** child state child loading dlls\n[Thu May 30 00:49:25 2002] [error] (11)Resource temporarily unavailable: fork: \nUnable to fork new process\n\nLike I previously said, the above fork problem has been resolved.  If you do not \nhave a copy of the cygwin \"rebase\" command, you can get a copy at:\n   http://pmcferrin.Ugate.Net/download/\n\nAs you can imagine, the Cygwin HTTPD is not very functional on Win XP under \nCygwin.  My reason for staying with Cygwin is the use of symbolic links.\n\nI have posted this problem to both the Apache HTTPD and Cygwin Users mailing \nlist but have not received any help.  Help!", "is_private": false, "id": 16993, "creator": "paulmcferrin@worldnet.att.net", "time": "2002-05-31T14:58:41Z", "bug_id": 9541, "creation_time": "2002-05-31T14:58:41Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 9541, "text": "  This is quite possibly related to the afd.sys bug described on the\n  \"XP Users Read Me First\" entry in the www.apache.org/dist/httpd/binaries/win32/\n  distribution page.  Please give that a shot, since you can't reproduce on 2K\n  or NT, correct?\n\n", "id": 16996, "time": "2002-05-31T15:39:39Z", "creator": "wrowe@apache.org", "creation_time": "2002-05-31T15:39:39Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "text": "*** Bug 9540 has been marked as a duplicate of this bug. ***", "attachment_id": null, "id": 16998, "creator": "wrowe@apache.org", "time": "2002-05-31T15:42:01Z", "bug_id": 9541, "creation_time": "2002-05-31T15:42:01Z", "is_private": false}, {"text": "I obtained the afd.sys hotfix from MS and it solved my problem!  Thanks a bunch!", "tags": [], "bug_id": 9541, "attachment_id": null, "count": 3, "id": 17045, "time": "2002-06-02T06:07:11Z", "creator": "paulmcferrin@worldnet.att.net", "creation_time": "2002-06-02T06:07:11Z", "is_private": false}]