[{"count": 0, "tags": [], "creator": "ssilvert@jboss.com", "attachment_id": null, "id": 90157, "time": "2006-06-13T18:34:12Z", "bug_id": 39804, "creation_time": "2006-06-13T18:34:12Z", "is_private": false, "text": "Section 5.6.1 of the JSF 1.2 spec requires that an ELResolver be added to the\nJspApplicationContext at application initialization time.  So, JSF does this in\na ServletContextListener: \n\nJspFactory factory = JspFactory.getDefaultFactory();\n\nJspApplicationContext appCtx =\nfactory.getJspApplicationContext(servletContext);\n\nappCtx.addELResolver(myResolver);\n\nHowever, at this point the org.apache.jasper.compiler.JspRuntimeContext\nclass has not been loaded.  So, getDefaultFactory() returns null.\n\nIf I add this to my ServletContextListener then everything works:\nClass.forName(\"org.apache.jasper.compiler.JspRuntimeContext\");\n\nThis workaround is Tomcat-specific and doesn't belong in JSF code.  Tomcat's\nimplementation of getDefaultFactory() should load the JspRuntimeContext if it\nhas not already been created.  It should never return null."}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 92341, "time": "2006-08-18T14:08:33Z", "bug_id": 39804, "creation_time": "2006-08-18T14:08:33Z", "is_private": false, "text": "This was fixed some time ago: a listener can be used in server.xml."}]