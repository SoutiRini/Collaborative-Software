[{"count": 0, "tags": [], "text": "I wrote a small PHP script to display a simple table fetched from MySQL on my \nsystem. The response time from sending a request until the page is displayed is \nEXTREMELY slow 5-7 seconds (!) even for tables with only 27 rows. In this time \nperiod the hard disk is accessed continously (writing sound). The more rows are \nadded, the slower it gets (each row ~200ms).\n\nI installed the same script at (http://akoerni.lima-city-webspace.de/list.php?\nEinsatzID=1) so you can get an idea. At this site it works as fast as usual (a \nfew milliseconds) if you do not consider request time.\n\nIt is **NOT** a database/query issue. MySQL response time is some milliseconds \n(tested with MySQL Control Center, mysql.exe, PHP script).\nIt is **NOT** a latency issue. (Installed on localhost. Redirected above \nmentioned website to my local database resulting in good performance).\n\nThe problem is reproduceable with the following configuration:\n\nWindows 2000 SP4      (AMD 2400+, 512MB)\nApache 2.0.48         (apache_2.0.48-win32-x86-no_ssl.msi)\nPHP 4.3.4 AND 5.0.0b4 (php-4.3.4-Win32.zip / php-5.0.0b4-Win32.zip)\nMySQL 4.0.17          (mysql-4.0.17-win-noinstall.zip)\n\nUsing Apache 1.3.29 on together with PHP 4.3.4 results in good performance! (It \ndoes not work with 5.0.0b4, however). I installed each version of Apache as \nservice to all users. The httpd.conf is the default config + 3 PHP specific \nlines. The php.ini is the php.ini-recommended file with adaptions for the \nextension_dir and the uncommented line \"extension=php_mysql.dll\" (PHP 5).\n\n\n\n\nPHP code for the creation of the HTML table follows:\n\nfunction xmicrotime($name, $starttime) {\n  $now = explode(\" \", microtime());\n  $before = explode(\" \", $starttime);\n  $mseconds = $now[0] - $before[0]; \n  $seconds = $now[1] - $before[1]; \n  echo $name . \" took \" . $seconds . \" sec. and \" . $mseconds . \" ms.\";\n}\n\n$i = 0;\n$start= microtime();\nwhile ($line = mysql_fetch_array($result, MYSQL_ASSOC)) {\n   $i++;\n   echo \"\\t<tr class=\\\"\";\n       if ($i%2 == 0) {echo \"GERADE\";}\n         else {echo \"UNGERADE\";}\n   echo \"\\\">\\n\";\n\n   echo \"\\t\\t<td class=\\\"datum\\\">\" .$line[Datum]. \"</td>\\n\";\n   echo \"\\t\\t<td class=\\\"zeit\\\">\" .$line[Zeit]. \"</td>\\n\";\n   echo \"\\t\\t<td class=\\\"kanal\\\">\" .$line[Kanal]. \"</td>\\n\";\n   echo \"\\t\\t<td class=\\\"betriebsart\\\">\" .$line[Betriebsart]. \"</td>\\n\";\n   echo \"\\t\\t<td class=\\\"an\\\">\" .$line[An]. \"</td>\\n\";\n   echo \"\\t\\t<td class=\\\"von\\\">\" .$line[Von]. \"</td>\\n\";\n   echo \"\\t\\t<td class=\\\"ereignis\\\">\" .htmlspecialchars($line[Ereignis]). \n\"</td>\\n\";\n   echo \"\\t\\t<td class=\\\"vermerk\\\">\" .htmlspecialchars($line[Vermerk]). \n\"</td>\\n\";\n\n}\nxmicrotime(\"total_time:\", $start);", "attachment_id": null, "id": 52236, "creator": "akoerni@rocketmail.com", "time": "2004-02-13T13:04:49Z", "bug_id": 26912, "creation_time": "2004-02-13T13:04:49Z", "is_private": false}, {"count": 1, "tags": [], "creator": "mads@apache.org", "attachment_id": null, "is_private": false, "id": 52238, "time": "2004-02-13T13:06:53Z", "bug_id": 26912, "creation_time": "2004-02-13T13:06:53Z", "text": "Please report bugs in php at bugs.php.net\n"}, {"count": 2, "tags": [], "text": "If it works perfectly with Apache 1.3.29 it is a PHP bug?", "attachment_id": null, "id": 52239, "creator": "akoerni@rocketmail.com", "time": "2004-02-13T13:15:07Z", "bug_id": 26912, "creation_time": "2004-02-13T13:15:07Z", "is_private": false}, {"count": 3, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "text": "mod_php for 1.3 and mod_php for 2.x are totally different modules. Additionally\nit occurs with PHP only, as I understood. So yes, it's very likely that it's a\nPHP bug.", "id": 52240, "time": "2004-02-13T13:30:16Z", "bug_id": 26912, "creation_time": "2004-02-13T13:30:16Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 26912, "attachment_id": null, "id": 52241, "time": "2004-02-13T13:37:58Z", "creator": "akoerni@rocketmail.com", "creation_time": "2004-02-13T13:37:58Z", "is_private": false, "text": "If you say so. I postet the bug to bugs.php.net (#27240)."}]