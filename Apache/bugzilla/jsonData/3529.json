[{"count": 0, "tags": [], "creator": "pr@webapp.de", "attachment_id": null, "is_private": false, "id": 5300, "time": "2001-09-10T10:09:50Z", "bug_id": 3529, "creation_time": "2001-09-10T10:09:50Z", "text": "Jupp,\n\nI have made a test to jspc with taglibs and got directly a fatal error.\n\nHmm. I now on the way to fix the bug. First results looks good, but\nthe JSPC used URLClassLoader not handle resource with beginning '/' as \ncatalina WebappClassLoader can. I made some changes at TagLibraryInfoImpl\nto handle taglib \n1)  reference with web.xml <taglib>\n2)  auto detect WEB-INF/lib/<taglib>.jar\n\nBut I think the ClassLoader not handle Jar that reference with the \nMETA-INF/manifest.mf Class-path reference. BIG Problems....\n\nAlso I must wrote a MOOKUP Class to simulate ServletContext.\n\nLet me know you want the changes.... \n\nRegards\nPeter"}, {"count": 1, "tags": [], "creator": "pr@webapp.de", "text": "Created attachment 515\nWorking JSPC", "id": 5301, "attachment_id": 515, "bug_id": 3529, "creation_time": "2001-09-10T10:13:42Z", "time": "2001-09-10T10:13:42Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 3529, "text": "Created attachment 516\nJSPC ServletContext Mookup class", "id": 5302, "time": "2001-09-10T10:14:21Z", "creator": "pr@webapp.de", "creation_time": "2001-09-10T10:14:21Z", "is_private": false, "attachment_id": 516}, {"count": 3, "tags": [], "bug_id": 3529, "text": "Created attachment 517\nTagLibraryInfoImpl.java", "id": 5303, "time": "2001-09-10T10:15:34Z", "creator": "pr@webapp.de", "creation_time": "2001-09-10T10:15:34Z", "is_private": false, "attachment_id": 517}, {"count": 4, "tags": [], "text": "Here my ant target to test jspc with ant\n\n   <target name=\"jspc\" depends=\"dist\" description=\"validate jsp with \ntomcat jasper jspc\">\n      <java classname=\"org.apache.jasper.JspC\" fork=\"yes\" failonerror=\"yes\">\n        \n<jvmarg value=\"-Dtomcat.home=${tomcat.home}\"/>\n        <arg value=\"-v3\" />\n        <arg line=\"-d ${build.jspc}/src\" />\n        <arg line=\"-die\" />\n        <arg line=\"-webapp ${build.home}\" />\n         <classpath>\n            <path>\n    \t\t<fileset dir=\"${tomcat.home}/lib\">\n        \t\t<include name=\"**/*.jar\" />\n                </fileset>\n                <fileset dir=\"${tomcat.home}/jasper\">\n        \t<include name=\"**/*.jar\" />\n     \t\t</fileset>\n                <fileset dir=\"${tomcat.home}/common/lib\">\n        \t<include name=\"**/*.jar\" />\n      \t\t</fileset>\n              </path>\n       </classpath>\n     </java>\n     <javac srcdir=\"${build.jspc}\\src\"\n           destdir=\"${build.jspc}\\classes\"\n           debug=\"on\" optimize=\"off\" deprecation=\"off\">\n       <classpath>\n       <path refid=\"webapps.classpath\"/>\n       <pathelement location=\"${build.classes}\"/>\n           <pathelement location=\"${tomcat.home}/lib/jasper.jar\"/>\n            <path>\n      \t\t<fileset dir=\"${tomcat.home}/lib\">\n        \t\t<include name=\"**/*.jar\" />\n      \t\t</fileset>\n     \t\t<fileset dir=\"${tomcat.home}/jasper\">\n        \t\t<include name=\"**/*.jar\" />      \t\t\n</fileset>\n    \t\t<fileset dir=\"${tomcat.home}/common/lib\">        \t\t\n<include name=\"**/*.jar\" />\n      \t\t</fileset>\n           </path>\n      </classpath>\n    </javac>\n  </target>", "is_private": false, "bug_id": 3529, "id": 5304, "time": "2001-09-10T10:23:06Z", "creator": "pr@webapp.de", "creation_time": "2001-09-10T10:23:06Z", "attachment_id": null}, {"count": 5, "text": "*** Bug 3235 has been marked as a duplicate of this bug. ***", "bug_id": 3529, "is_private": false, "id": 5405, "time": "2001-09-11T22:15:25Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-09-11T22:15:25Z", "tags": [], "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 3529, "text": "Fixed in nightly build 20010914 and Tomcat 4.0-rc2.\n\nThe committed fix was based on your changes, but (as far as I can tell) the\nupdates to TagLibraryInfoImpl were not needed due to the fact that you had\nincorrectly implemented getResource() in JspCServletContext.\n\nAlso, submitting unified diffs (as documented on the Jakarta web site) is VASTLY\nmore useful than complete replacement files, which make it difficult to\ndetermine exactly what was changed.\n", "id": 5511, "time": "2001-09-13T22:09:12Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-09-13T22:09:12Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "creator": "pr@webapp.de", "text": "\nI am now reading the diff strategie and will support\nit for next changes.\n\nThanx Craig", "id": 5516, "attachment_id": null, "bug_id": 3529, "creation_time": "2001-09-13T22:46:38Z", "time": "2001-09-13T22:46:38Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "kchan@borland.com", "text": "Still broken in RC2 and Nightly 9/14, as described in dup 3235 (looks like only \nline numbers are different)\n\njava.lang.NullPointerException\n        at org.apache.jasper.CommandLineContext.getTldLocation\n(CommandLineContext.java:365)\n        at \norg.apache.jasper.compiler.JspParseEventListener.processTaglibDirective\n(JspParseEventListener.java:1146)\n        at org.apache.jasper.compiler.JspParseEventListener.handleDirective\n(JspParseEventListener.java:755)\n        at org.apache.jasper.compiler.DelegatingListener.handleDirective\n(DelegatingListener.java:121)\n        at org.apache.jasper.compiler.Parser$Directive.accept(Parser.java:243)\n        at org.apache.jasper.compiler.Parser.parse(Parser.java:1126)\n        at org.apache.jasper.compiler.Parser.parse(Parser.java:1091)\n        at org.apache.jasper.compiler.Parser.parse(Parser.java:1087)\n        at org.apache.jasper.compiler.ParserController.parse\n(ParserController.java:213)\n        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:210)\n        at org.apache.jasper.JspC.parseFile(JspC.java:402)\n        at org.apache.jasper.JspC.parseFiles(JspC.java:712)\n        at org.apache.jasper.JspC.main(JspC.java:727)", "count": 8, "id": 5558, "time": "2001-09-14T11:00:03Z", "bug_id": 3529, "creation_time": "2001-09-14T11:00:03Z", "is_private": false}, {"count": 9, "text": "RC2 works when jspc is invoked with -webapp option.  This restriction is\nreasonable since a webapp is needed to recreate a ServletContext.\n\nPerhaps jasper should output an error message when it is invoked without a\n-webapp option, when taglib is involved.  But that should be another patch.", "bug_id": 3529, "is_private": false, "id": 5561, "time": "2001-09-14T13:36:08Z", "creator": "kin-man.chung@sun.com", "creation_time": "2001-09-14T13:36:08Z", "tags": [], "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 3529, "text": "-webapp just takes a directory, so a ServletContext could be created with -\nuriroot as well. The only difference is that one does all JSPs, and the other \ncan do individual ones, which is what I wanted to do. (It doesn't make sense to \nuse -uriroot with something other than the context base, does it?)", "id": 5625, "time": "2001-09-16T09:32:44Z", "creator": "kchan@borland.com", "creation_time": "2001-09-16T09:32:44Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "creator": "pr@webapp.de", "is_private": false, "id": 5629, "attachment_id": null, "bug_id": 3529, "creation_time": "2001-09-16T11:49:01Z", "time": "2001-09-16T11:49:01Z", "text": "Yes,\n\nI thing it is correct that we can also handle\nlists of jsp files with uriroot setting.\n\nI have found another Bug with jspc.\n\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=3640"}, {"count": 12, "tags": [], "bug_id": 3529, "text": "Fixed with Kin-Man's patch, in nightly build 20010918 and in Tomcat 4.0 final.\n", "id": 5692, "time": "2001-09-17T17:22:55Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-09-17T17:22:55Z", "is_private": false, "attachment_id": null}]