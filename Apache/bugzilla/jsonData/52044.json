[{"attachment_id": 27800, "tags": [], "creator": "slavko_h@yahoo.com", "text": "Created attachment 27800\nscreenshot with strange error\n\nr1183374\n\nSee attached TP.\n\nRun AMQ web admin monitor and open Queues tab - the queue displays \"0\" (zero) Number of consumers.\n\nRun the TP and stop it in few seconds:\n\n1) Jmeter is not stopping - \"Shutting does all test treads. Please be patient\" message is staying forever;\n2) Check AMQ web-console - there are all initiated threads have not been closed its connections;\n3) stramge error for \"JMS Subscriber - 001\" - Response message: javax.naming.NamingException: Something already bound at Elite_To_MorphoTrak;\n\nER:\n1) Jmeter stops successfully; \n2) AMQ displays \"0\" consumers against the queue;\n3) error for \"JMS Subscriber - 001\" has to be \"0 message(s) received successfully\";", "count": 0, "id": 150687, "time": "2011-10-17T19:17:02Z", "bug_id": 52044, "creation_time": "2011-10-17T19:17:02Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 52044, "text": "Created attachment 27801\nJMeter TP", "id": 150688, "time": "2011-10-17T19:17:35Z", "creator": "slavko_h@yahoo.com", "creation_time": "2011-10-17T19:17:35Z", "is_private": false, "attachment_id": 27801}, {"attachment_id": null, "tags": [], "creator": "slavko_h@yahoo.com", "is_private": false, "count": 2, "id": 150691, "time": "2011-10-17T20:41:58Z", "bug_id": 52044, "creation_time": "2011-10-17T20:41:58Z", "text": "Using \"Shutdown\" from menu also does not work (same behave as by Stop)."}, {"count": 3, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "is_private": false, "id": 150698, "time": "2011-10-18T06:43:37Z", "bug_id": 52044, "creation_time": "2011-10-18T06:43:37Z", "text": "(In reply to comment #0)\n> Created attachment 27800 [details]\n> screenshot with strange error\n> \n> r1183374\n> \n> See attached TP.\n> \n> Run AMQ web admin monitor and open Queues tab - the queue displays \"0\" (zero)\n> Number of consumers.\n> \n> Run the TP and stop it in few seconds:\n> \n> 1) Jmeter is not stopping - \"Shutting does all test treads. Please be patient\"\n> message is staying forever;\nJMeter cannot \"shutdown\" unless it receives a message because you set timeout to 0\n(means no timeout) so JMeter is waiting on receive until it receives a message(I don't see any solution to\nthis unless interrupt is fixed in AMQ so stop will work)\n\nMy test with Stop works.\n\n\n> 2) Check AMQ web-console - there are all initiated threads have not been closed\n> its connections;\nYes duplicate of bug 51997\n\n> 3) stramge error for \"JMS Subscriber - 001\" - Response message:\n> javax.naming.NamingException: Something already bound at Elite_To_MorphoTrak;\n> \nThis issue is mentionned by many AMQ client and not reproductible with OpenJMS.\nIt is related to ReadOnlyContext and LazyCreateContext in AMQ, maybe you should\ncheck AMQ issues.\nI think it's a concurrency issue in AMQ JNDI layer.\nMaybe you should submit an issue to AMQ.\nTest with OpenJMS is OK.\n\n> ER:\n> 1) Jmeter stops successfully; \n> 2) AMQ displays \"0\" consumers against the queue;\n> 3) error for \"JMS Subscriber - 001\" has to be \"0 message(s) received\n> successfully\";"}, {"count": 4, "tags": [], "bug_id": 52044, "text": "From this issue, the only one I reproduce is:\nstramge error for \"JMS Subscriber - 001\" - Response message:\n> javax.naming.NamingException: Something already bound at Elite_To_MorphoTrak;\n\nThe other one is duplicate of bug 51997.\nThe first one (Shutdown blocking is regular) and works when Stop  is used.\n\n\nI investigated this issue \"javax.naming.NamingException: Something already bound\".\n\nI created a simple test case and tried not to cache Context and it works fine.\nand in fact it is due to the fact that we cache Context and use it by many threads.\nFrom this:\nhttp://download.oracle.com/javase/jndi/tutorial/beyond/misc/sync.html\n\nI conclude we should not do caching as it is not mandatory that context is Thread Safe (and it's not the case for AMQ one).", "id": 150728, "time": "2011-10-18T20:42:27Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-18T20:42:27Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 52044, "text": "Date: Tue Oct 18 20:58:08 2011\nNew Revision: 1185853\n\nURL: http://svn.apache.org/viewvc?rev=1185853&view=rev\nLog:\nBug 52044 - JMS Subscriber used with many threads leads to javax.naming.NamingException: Something already bound with ActiveMQ\n\nPerformances impact of No Caching of InitialContext are low.\n\nModified:\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/Utils.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/client/InitialContextFactory.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/client/Publisher.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/client/ReceiveSubscriber.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/sampler/PublisherSampler.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/sampler/SubscriberSampler.java\n   jakarta/jmeter/trunk/xdocs/changes.xml", "id": 150730, "time": "2011-10-18T20:58:52Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-18T20:58:52Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 52044, "attachment_id": null, "id": 150772, "creation_time": "2011-10-19T19:46:15Z", "time": "2011-10-19T19:46:15Z", "creator": "p.mouawad@ubik-ingenierie.com", "text": "Date: Wed Oct 19 19:44:57 2011\nNew Revision: 1186430\n\nURL: http://svn.apache.org/viewvc?rev=1186430&view=rev\nLog:\nBug 52044 - JMS Subscriber used with many threads leads to javax.naming.NamingException: Something already bound with ActiveMQ\n\nRevert of modifications\n\nModified:\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/Utils.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/client/InitialContextFactory.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/client/Publisher.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/client/ReceiveSubscriber.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/sampler/PublisherSampler.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/sampler/SubscriberSampler.java\n   jakarta/jmeter/trunk/xdocs/changes.xml", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "count": 7, "id": 150775, "time": "2011-10-19T20:53:29Z", "bug_id": 52044, "creation_time": "2011-10-19T20:53:29Z", "text": "Date: Wed Oct 19 20:51:36 2011\nNew Revision: 1186482\n\nURL: http://svn.apache.org/viewvc?rev=1186482&view=rev\nLog:\nBug 52044 - JMS Subscriber used with many threads leads to javax.naming.NamingException: Something already bound with ActiveMQ\n\nAdded ThreadId in cache key\n\nModified:\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/client/InitialContextFactory.java\n   jakarta/jmeter/trunk/xdocs/changes.xml"}]