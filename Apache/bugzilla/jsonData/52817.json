[{"count": 0, "tags": [], "bug_id": 52817, "attachment_id": null, "text": "Hi, sorry, maybe it's a little bit weird. But I do have a very long directory path (but not that long to exceed the buffer length 16*1024*1024) to put in my configuration file, like \n\nServerRoot /very/long/directory/path\n\nThen, the apache tells: \n\"httpd: Syntax error on line 33 of /home/tianyin/apache-2.4.1/conf/httpd.conf: ServerRoot must be a valid directory\"\n\nBut I have to say that it is for sure a valid directory. I can use \"cd\" to go to that directory. \n\nWhen looking at the source code, the problem seems that it uses the \"stat\" to check the path state and simply check the return value (0 for success, 1 for failure). \n\nI think it's necessary to check the errno and tell users the exact problem instead of just saying \"invalid\" (I have to say this bugs me a while), for example: \n\nEACCES Search permission is denied for one of the directories in the path prefix of path.  (See also path_resolution(7).)\n\nEBADF fd is bad.\n\nEFAULT Bad address.\n\nELOOP  Too many symbolic links encountered while traversing the path.\n\nENAMETOOLONG File name too long.\n\nENOENT A component of path does not exist, or path is an empty string.\n\nENOMEM Out of memory (i.e., kernel memory).\n\nENOTDIR A component of the path prefix of path is not a directory.\n\nEOVERFLOW (stat()) path refers to a file whose size cannot be represented in the type off_t.", "id": 154481, "time": "2012-03-03T23:44:40Z", "creator": "tixu@cs.ucsd.edu", "creation_time": "2012-03-03T23:44:40Z", "is_private": false}]