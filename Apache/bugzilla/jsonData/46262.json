[{"count": 0, "tags": [], "bug_id": 46262, "attachment_id": null, "text": "Undeploying context with %2F in it does not work\n\nThis is related to the situation in bug #46261\n\nIf you have a context on disk named:\n\nproduct%2Fcustomername.xml\n\nIf you try to undeploy it,you will get this error:\n\nw3m http://localhost:8180/tomcat-manager/undeploy?path=/product/customername\n\nFAIL - Context /product/clustername is defined in server.xml and may not be undeployed\n\nThe error is incorrect.  The context is not defined in server.xml, it's just that the:\n\nContext context = (Context) host.findChild(path);\n\nCheck passes, and the\n\nif (!isDeployed(path)) {\n\ncheck fails (in ManagerServlet.java), which normally would imply the context must be deployed in the server.xml, however in this case the isDeployed lookup is just not working correctly for contexts with %2F in them.", "id": 122718, "time": "2008-11-21T08:39:40Z", "creator": "joekislos@gmail.com", "creation_time": "2008-11-21T08:39:40Z", "is_private": false}, {"count": 1, "tags": [], "text": "I do not have a patch for this issue, I work around this issue by doing:\n\nw3m http://localhost:8180/tomcat-manager/undeploy?path=/product%252Fcustomername\n\ninstead, which works.  For this to work, you would have needed to apply the patch from bug #46261\n\nAlthough I am fine with this work around, this does highlight that there is some inconsistency in the internal representation of context URLs in tomcat.  This workarond and the patch in bug #46261 could be eliminated if somebody could standardize how the urls should be stored in the various lookup tables in tomcat.  Unfortunately I am not equipped to say whether the URLs should be stored as:\n\n/product/customername\n/product%2Fcustomername\n%2Fproduct%2Fcustomername\n\nWhich I believe are the three things I've seen being used in the tomcat code so far\n", "is_private": false, "bug_id": 46262, "id": 122719, "time": "2008-11-21T08:43:01Z", "creator": "joekislos@gmail.com", "creation_time": "2008-11-21T08:43:01Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 122721, "time": "2008-11-21T08:46:23Z", "bug_id": 46262, "creation_time": "2008-11-21T08:46:23Z", "text": "The correct way to do this in 6.0.18 is to use the # character rather than %2F.\n\n%2F should be interpreted literally.\n"}, {"count": 3, "tags": [], "text": "The fix for 46261 also addresses this bug so I am marking this as a duplicate.\n\n*** This bug has been marked as a duplicate of bug 46261 ***", "is_private": false, "bug_id": 46262, "id": 123570, "time": "2008-12-28T15:59:35Z", "creator": "markt@apache.org", "creation_time": "2008-12-28T15:59:35Z", "attachment_id": null}]