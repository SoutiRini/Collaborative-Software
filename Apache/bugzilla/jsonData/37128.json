[{"count": 0, "tags": [], "text": "I installed Apache 2.0.55 with PHP 4.4.0. I got lots of entries like\nthe following in the error log:\n\n[Mon Oct 17 18:19:04 2005] [notice] child pid 9385 exit signal Segmentation\nfault (11)\n\nThey occure on pages with HTML code like\n\n...\n<body>\n<!--#include virtual=\"/php/body_header.php\" -->\n...\n<!--#include virtual=\"/php/body_footer.php\" -->\n</body>\n\nWith only one of the includes (either one) all works well. Back with Apache\n2.0.54 and PHP 4.4.0 I haven't got this problem.\n\nI stripped down the PHP scripts to just print a small text using echo(), but the\nproblem remained.", "is_private": false, "bug_id": 37128, "id": 81272, "time": "2005-10-17T20:51:28Z", "creator": "markus-apache@anthill.de", "creation_time": "2005-10-17T20:51:28Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "text": "Could you please provide us with a stack trace (at least output from pstack,\nbetter gdb) of this problem? Some help about how to do this can be found at\nhttp://httpd.apache.org/dev/debugging.html", "id": 81276, "attachment_id": null, "bug_id": 37128, "creation_time": "2005-10-17T21:06:50Z", "time": "2005-10-17T21:06:50Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 37128, "text": "This one is a PHP bug, please report it to bugs.php.net if it hasn't been already.", "id": 81290, "time": "2005-10-18T09:15:50Z", "creator": "jorton@redhat.com", "creation_time": "2005-10-18T09:15:50Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 37128, "text": "The same problem exists under linux too.\n\nIf I reverse the changes made in modules/filters/mod_include.c between 2.0.54\nand 2.0.55 all works for me again.\n\nThere may be a problem in PHP, but your change in mod_include broke/exposed it.\n\nstack trace follows if I could get a core file", "id": 81477, "time": "2005-10-20T19:56:58Z", "creator": "markus-apache@anthill.de", "creation_time": "2005-10-20T19:56:58Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "nd@perlig.de", "text": "For the record, this would be\n<http://svn.apache.org/viewcvs.cgi/httpd/httpd/branches/2.0.x/modules/filters/mod_include.c?rev=264762&r1=151405&r2=264762&makepatch=1&diff_format=u>\n\nInteresting.", "count": 4, "id": 81478, "time": "2005-10-20T20:12:24Z", "bug_id": 37128, "creation_time": "2005-10-20T20:12:24Z", "is_private": false}, {"count": 5, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 81509, "time": "2005-10-21T11:41:43Z", "bug_id": 37128, "creation_time": "2005-10-21T11:41:43Z", "is_private": false, "text": "Indeed :(  There were other cases where PHP was broken in a similar fashion,\nthough; I have a simplification of the apache2handler to submit which fixes it\nproperly (the code already committed does work but is somewhat ugly)."}, {"count": 6, "attachment_id": null, "bug_id": 37128, "text": "back trace under linux (wasn't able to get a core file under solaris yet):\n\n(gdb) where\n#0  0x402eb3ea in _zval_ptr_dtor (zval_ptr=0x4035fb08)\n    at /tmp/test/php-4.4.0/Zend/zend_execute_API.c:287\n#1  0x40300843 in execute (op_array=0x8179474) at zend_execute_locks.h:26\n#2  0x402f1f23 in zend_execute_scripts (type=2, retval=0x0, file_count=1)\n    at /tmp/test/php-4.4.0/Zend/zend.c:938\n#3  0x403021ba in php_handler (r=0x81774b0)\n    at /tmp/test/php-4.4.0/sapi/apache2handler/sapi_apache2.c:557\n#4  0x08067622 in ap_run_handler (r=0x81774b0) at config.c:153\n#5  0x08067b3a in ap_invoke_handler (r=0x81774b0) at config.c:364\n#6  0x0807c4d1 in ap_run_sub_req (r=0x81774b0) at request.c:1855\n#7  0x4003547d in handle_include (ctx=0x8165918, bb=0xbfffd994, r=0x8169478, \n    f=0x816aa98, head_ptr=0x8167908, inserted_head=0xbfffd960)\n    at mod_include.c:782\n#8  0x40038ca0 in send_parsed_content (f=0x816aa98, bb=0x816abe0)\n    at mod_include.c:3309\n#9  0x08071b9e in ap_pass_brigade (next=0x0, bb=0xfffffffe)\n    at util_filter.c:512\n#10 0x08078666 in default_handler (r=0x8169478) at core.c:3640\n#11 0x08067622 in ap_run_handler (r=0x8169478) at config.c:153\n#12 0x08067b3a in ap_invoke_handler (r=0x8169478) at config.c:364\n#13 0x08064ee3 in ap_process_request (r=0x8169478) at http_request.c:249\n#14 0x08060dc1 in ap_process_http_connection (c=0x8165540) at http_core.c:251\n#15 0x0806f9c2 in ap_run_process_connection (c=0x8165540) at connection.c:43\n#16 0x0806619b in child_main (child_num_arg=3) at prefork.c:610\n#17 0x080662b8 in make_child (s=0x809bff0, slot=0) at prefork.c:704\n#18 0x0806639f in startup_children (number_to_start=5) at prefork.c:722\n#19 0x08066aad in ap_mpm_run (_pconf=0x0, plog=0x80c62c0, s=0x809bff0)\n    at prefork.c:941\n#20 0x0806bb36 in main (argc=3, argv=0xbfffdc44) at main.c:618\n#21 0x42015704 in __libc_start_main () from /lib/tls/libc.so.6\n\nI wrote a bug report for php. http://bugs.php.net/bug.php?id=35029 as reference", "id": 81940, "time": "2005-10-30T23:53:14Z", "creator": "markus-apache@anthill.de", "creation_time": "2005-10-30T23:53:14Z", "tags": [], "is_private": false}]