[{"count": 0, "attachment_id": null, "bug_id": 46752, "text": "While getResource is overridden to search ACL.parent (see bug #749), getResources is not. Therefore it uses CL.getResources, which uses CL.parent, which in the case of ACL is arbitrarily initialized to CL.getSystemClassLoader(). Therefore an ACL whose ACL.parent cannot \"see\" some resource, and whose pathComponents does not contain it, will nonetheless return it from getResources if that resource can be found in the application classpath.\n\nThis is bad because, for example, ServiceLoader calls getResources(\"META-INF/services/....\") and tries to load all the classes it finds using the same loader. If the configured loader is an ACL (or a child of one) which is not parented to the app CP, and the app CP defines some services, then a ServiceConfigurationError will result. See: http://www.netbeans.org/nonav/issues/show_bug.cgi?id=158934", "id": 125040, "time": "2009-02-21T13:42:14Z", "creator": "jglick@apache.org", "creation_time": "2009-02-21T13:42:14Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 46752, "text": "\n\n*** This bug has been marked as a duplicate of bug 46759 ***", "id": 125089, "time": "2009-02-23T05:19:15Z", "creator": "bodewig@apache.org", "creation_time": "2009-02-23T05:19:15Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "text": "Is this one a duplicate of the other ones?\nI think that this one can be fixed independently of fixing the other ant classloader issues.", "id": 125091, "time": "2009-02-23T05:23:55Z", "bug_id": 46752, "creation_time": "2009-02-23T05:23:55Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 46752, "attachment_id": null, "text": "since getResources in Java 1.4 is final, is there anything we can do until Ant moves to Java 5?\n\nsee bug 35436\n\nMaybe overriding findResources would help.", "id": 129028, "time": "2009-07-21T21:10:40Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-21T21:10:40Z", "is_private": false}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "id": 129029, "creation_time": "2009-07-21T21:21:36Z", "time": "2009-07-21T21:21:36Z", "bug_id": 46752, "text": "obviously overriding findResources doesn't help, since we already do that.  Sorry.", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 46752, "attachment_id": null, "id": 129038, "time": "2009-07-22T02:45:08Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-22T02:45:08Z", "is_private": false, "text": "There now is an AntClassLoader5 class which overrides getResources.  This class will be used by all classes in Ant when it is available (and Ant is running on Java5, of course).\n\nThe real implementation sits in AntClassLoader.getNamedResources but that probably doesn't help people in Java 1.4 land too much.\n\nsvn revision 796647"}]