[{"count": 0, "tags": [], "bug_id": 50992, "text": "Created attachment 26811\npatch to correct this bug\n\nant tries to detect the ANT_HOME.\nThis fails in case --noconfig is used and ant is at /usr/bin/ant.\nANT_LIB becomes /usr/lib instead of /usr/share/ant/lib in this case.\n\nSample to reproduce:\n\n/usr/bin/ant --noconfig -version\nException in thread \"main\" java.lang.NoClassDefFoundError: org/apache/tools/ant/launch/Launcher\n...\n/usr/bin/ant --execdebug --noconfig -version\nexec \"/usr/bin/java\" -classpath \"/usr/lib/ant-launcher.jar\" -Dant.home=\"/usr\" -Dant.library.dir=\"/usr/lib\" org.apache.tools.ant.launch.Launcher -cp \"\" \"-version\"\nException in thread \"main\" java.lang.NoClassDefFoundError: org/apache/tools/ant/launch/Launcher\nCaused by: java.lang.ClassNotFoundException: org.apache.tools.ant.launch.Launcher\n...", "id": 145373, "time": "2011-03-29T08:16:25Z", "creator": "CVolkmann@orga-systems.com", "creation_time": "2011-03-29T08:16:25Z", "is_private": false, "attachment_id": 26811}, {"count": 1, "text": "The described behaviour is correct. The default location of the libraries, unless specified otherwise is in the lib directory next to the bin directory ant resides in.\nIf you have stored ant in ~user/ant/ the ant script will be \n ~user/ant/bin/ant\nand the libraries will be in\n ~user/ant/lib/\n\nwith --noconfig you indicate that everything is \"normal\", not a pre-installed / rpm distributed ant for which the configuration must be read from /etc/ant.conf .\nThis implies that unless parts are specified otherwise the default locations will be used. Apparently $ANT_HOME is not defined, so the libraries will be sought in <directory where the ant-script resides>/../lib only.\n\nIn case you do want to use --noconfig you will either have to make sure the ant is a stock install as delivered by ant or you will have to set ANT_HOME accordingly.", "bug_id": 50992, "is_private": false, "id": 145383, "time": "2011-03-29T14:52:08Z", "creator": "jkf@apache.org", "creation_time": "2011-03-29T14:52:08Z", "tags": [], "attachment_id": null}]