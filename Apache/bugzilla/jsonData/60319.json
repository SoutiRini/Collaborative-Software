[{"count": 0, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "When a connector is configured with an external executor JMX allows the min/max threads to be set either directly via the executor or via the connector/protocol/endpoint. If set via the connector/protocol/endpoint the reported current settings can be inconsistent.\n\nI'm not convinced that allowing the executor settings to be set via the connector/protocol/endpoint was a good idea. I'm currently considering changing the implementation along the following lines:\n- calls to setters only change settings for internal exectuor\n- if an external executor is configured, getters always return '-1' or similar", "id": 194710, "time": "2016-10-28T20:43:38Z", "bug_id": 60319, "creation_time": "2016-10-28T20:43:38Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 60319, "attachment_id": null, "text": "I might even throw an exception.\n\nFor TC9, I think we can even remove these getters/setters on the <Connector> itself, unless the consensus is that configuration-convenience trumps simplicity (of the code).\n\nIf we opt for continued support for min/max settings directly on the <Connector> only for an internal connector, I would vote for throwing an exception (IllegalStateException?) when using an external <Executor> and calling an associated internal-executor-only method.", "id": 194724, "time": "2016-10-29T17:36:36Z", "creator": "chris@christopherschultz.net", "creation_time": "2016-10-29T17:36:36Z", "is_private": false}, {"count": 2, "tags": [], "text": "The problem with the exception approach is that we don't necessarily know that an external executor is going to be configured at the point the setters are called.\n\nI agree that simpler is good. I want to look at this some more today with that in mind.", "is_private": false, "id": 194733, "creator": "markt@apache.org", "time": "2016-10-31T09:14:12Z", "bug_id": 60319, "creation_time": "2016-10-31T09:14:12Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 60319, "attachment_id": null, "is_private": false, "id": 194740, "time": "2016-10-31T16:52:09Z", "creator": "markt@apache.org", "creation_time": "2016-10-31T16:52:09Z", "text": "I've committed a fix to trunk. The code isn't much simpler but the behaviour should be simpler for users to follow. Back-ports to follow shortly."}, {"count": 4, "tags": [], "bug_id": 60319, "text": "Fixed in trunk for 9.0.0.M12 onwards, 8.5.x for 8.5.7 onwards, 8.0.x for 8.0.39 onwards and 7.0.x for 7.0.73 onwards.\n\nNot back-ported to 6.0.x since the lack of refactoring to AbstractEndpoint makes it a lot more work, 6.0.x is close to EOL and this is a minor issue.", "id": 194743, "time": "2016-10-31T20:44:16Z", "creator": "markt@apache.org", "creation_time": "2016-10-31T20:44:16Z", "is_private": false, "attachment_id": null}]