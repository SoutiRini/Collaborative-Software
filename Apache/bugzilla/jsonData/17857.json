[{"count": 0, "tags": [], "text": "I am trying to run tomcat 4.1.18 with new installs of ant 1.5.2 and j2sdk\n1.4.1_02.  I keep getting errors.  It seems that Ant's CompilerAdapterFactory\nclass uses a number of tests to determine the compiler in use.  The\ndoesModernCompilerExist method is supposed to distinguish between sun javac\nbefore 1.3 and after (I think).  Running j2sdk 1.4.1_02, I compiled and ran the\nfollowing code:\n\nclass TestComp \n{   \n  public static void main(String[] arguments)\n  {\n\n     try {\n            Class.forName(\"com.sun.tools.javac.Main\");\n            System.out.println(\"found com.sun.tools.javac.Main\");\n        } \n        catch (ClassNotFoundException cnfe) {\n            System.out.println(\"did not find com.sun.tools.javac.Main\");\n\n        }\n  }\n}\n\n\nThe output from this is \"did not find com.sun.tools.javac.Main\".  I haven't\ntested this on any other versions of the SDK, but it seems to suggest that the\ntest doesn't work on version 1.4.1_02.  When trying to run a webapp on Tomcat, I\nget the following error messages from ANT:\n\nUnable to find a javac compiler;\ncom.sun.tools.javac.Main is not on the classpath.\nPerhaps JAVA_HOME does not point to the JDK\n        at org.apache.tools.ant.taskdefs.compilers.CompilerAdapterFactory.getCom\npiler(CompilerAdapterFactory.java:139)\n        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:833)\n        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:682)\n\nThis is followed by other error messages up the call-chain.  JAVA_HOME is\ndefined as C:\\j2sdk1.4.1_02, which is correct.  Also C:\\j2sdk1.4.1_02\\bin has\nbeen added to the path variable (as has %ANT_HOME%\\bin).\n\nThis may not be an Ant bug, but I've tried lots of things and I'm hoping you\nhave a suggestion.\n\nThanks.\n\nJim", "attachment_id": null, "id": 32905, "creator": "jimeng@ameritech.net", "time": "2003-03-11T04:09:43Z", "bug_id": 17857, "creation_time": "2003-03-11T04:09:43Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 5257\ncomplete error output from Tomcat 4.1.18 (possibly an ANT problem?)", "attachment_id": 5257, "id": 32906, "creator": "jimeng@ameritech.net", "time": "2003-03-11T04:12:07Z", "bug_id": 17857, "creation_time": "2003-03-11T04:12:07Z", "is_private": false}, {"count": 2, "tags": [], "creator": "conor@apache.org", "is_private": false, "text": "You should probably raise this on the tomcat bugZilla. I'm not really sure how\nthe Tomcat folks have configured Jasper to use Ant's javac task. The most\nobvious thing to check is that tools.jar is available in the classpath whereever\nTomcat expects it to be  since it contains the compiler classes.", "id": 32948, "time": "2003-03-11T13:28:16Z", "bug_id": 17857, "creation_time": "2003-03-11T13:28:16Z", "attachment_id": null}]