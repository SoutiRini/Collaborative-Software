[{"count": 0, "attachment_id": null, "creator": "steven@void.org", "is_private": false, "id": 6729, "time": "2001-10-15T15:52:00Z", "bug_id": 4183, "creation_time": "2001-10-15T15:52:00Z", "tags": [], "text": "The following code, which uses the regexp1.2 package, gets different results when running on windows NT and linux, both running the javasoft jdk 1.3.  The problem seems to be with the handling of \\n in multiline matches.\n\n\n\n\n\nSee the comment at the beginning of the class for some more detail.\n\n\n\n\n\n--- BadRE.java ---\n\n\n\n\n\nimport org.apache.regexp.*;\n\n\n\n\n\n// The following class defines a regular expression and attempts to\n\n\n//   match a text string with it.  The regular expression is trying to\n\n\n//   match the literal \"window.location.href=\" at the beginning of a\n\n\n//   line, following any number of space characters.\n\n\n//\n\n\n// The results are different on Windows NT and Linux.  On linux\n\n\n//   running sun jdk1.3, it matches.  On Windows NT Workstation running\n\n\n//   sun jdk1.3, it doesn't match.\n\n\n//\n\n\n// If the \\n is removed from the beginning of the input string then it\n\n\n//   matches on windows and linux.\n\n\n// If bol (beginning-of-line) is changed from \"^[ \\t]*\" to \"^[ \\t\\n]*\" then\n\n\n//   it matches on windows and linux.\n\n\n// If bol is changed to \"^\\n[ \\t]*\" then it matches on windows and linux.\n\n\n//\n\n\n\n\n\npublic class BadRE {\n\n\n    public static RE makeRE() throws RESyntaxException {\n\n\n\tString bol = \"^[ \\t]*\";\n\n\n\tString regexp = bol + \"window.location.href=\";\n\n\n        RE matchRE = new RE(regexp, RE.MATCH_MULTILINE | RE.MATCH_CASEINDEPENDENT);\n\n\n\treturn matchRE;\n\n\n    }\n\n\n\n\n\n    public static void test() throws RESyntaxException {\n\n\n\tString input = \"\\nwindow.location.href=\";\n\n\n\tRE re = makeRE();\n\n\n\tif (re.match(input)) {\n\n\n            System.out.println(\"match: \" + re.getParen(0));\n\n\n        }\n\n\n\telse {\n\n\n            System.out.println(\"no match\");\n\n\n        }\n\n\n    }\n\n\n\n\n\n    public static void main(String [] args) throws RESyntaxException {\n\n\n\ttest();\n\n\n    }\n\n\n}"}, {"count": 1, "tags": [], "bug_id": 4183, "text": "\n\n*** This bug has been marked as a duplicate of 4137 ***", "id": 27831, "time": "2002-12-13T18:43:34Z", "creator": "jon@latchkey.com", "creation_time": "2002-12-13T18:43:34Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "jon@latchkey.com", "is_private": false, "text": "closed dupe", "id": 27833, "time": "2002-12-13T18:43:56Z", "bug_id": 4183, "creation_time": "2002-12-13T18:43:56Z", "attachment_id": null}]