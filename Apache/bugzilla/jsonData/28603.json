[{"count": 0, "attachment_id": null, "bug_id": 28603, "is_private": false, "id": 56421, "time": "2004-04-26T17:26:23Z", "creator": "petr.jiricka@netbeans.com", "creation_time": "2004-04-26T17:26:23Z", "tags": [], "text": "1. Set up an application with an Ant script to compile JSPs as recommended at\nhttp://jakarta.apache.org/tomcat/tomcat-5.0-doc/jasper-howto.html\n2. Write a JSP which contains erroneous text such that the first phase (JSP ->\nJava translation) fails e.g. by including <jsp:include x=\"50\"/> in the page.\n3. Compile the application using the Ant script - a Jasper exception will be\nreported.\n4. Compile the application again - build will succeed despite the error."}, {"count": 1, "attachment_id": null, "bug_id": 28603, "is_private": false, "id": 56501, "time": "2004-04-27T18:15:53Z", "creator": "jan.luehe@sun.com", "creation_time": "2004-04-27T18:15:53Z", "tags": [], "text": "Fixed by removing empty .java file (that was generated by \"new\nFileOutputStream()\") if parser/validator/generator throws exception."}, {"count": 2, "attachment_id": null, "bug_id": 28603, "text": "I must say this still does not work for me in Tomcat 5.0.24. I am attaching an\napplication which reproduces this issue. To reproduce:\n\n1. Unzip the attached testApp.zip\n2. Modify the build.properties file from testApp.zip to point to a Tomcat 5.0.24\ninstallation\n3. In the root directory of this test application, run Ant twice (I am using Ant\n1.6.1). The first time you run Ant, a compilation error is reported, but the\nsecond time it is not and build succeeds.\n\nThanks for looking at this.\n", "id": 56923, "time": "2004-05-06T12:59:10Z", "creator": "petr.jiricka@netbeans.com", "creation_time": "2004-05-06T12:59:10Z", "tags": [], "is_private": false}, {"text": "Created attachment 11444\nThe test application which reproduces this issue.", "tags": [], "creator": "petr.jiricka@netbeans.com", "is_private": false, "count": 3, "id": 56924, "time": "2004-05-06T13:00:06Z", "bug_id": 28603, "creation_time": "2004-05-06T13:00:06Z", "attachment_id": 11444}, {"count": 4, "tags": [], "creator": "jan.luehe@sun.com", "text": "Hmm, this works for me (on UNIX).\n\nDo you see an empty JSP_jsp.java file being generated in your project's \"build\"\ndirectory? Such a file used to be generated, but my fix should have deleted it\n(using File.delete()).", "id": 56957, "time": "2004-05-06T22:44:13Z", "bug_id": 28603, "creation_time": "2004-05-06T22:44:13Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "text": "Ok, I'll look at this over the weekend and debug it on my side.", "is_private": false, "id": 56994, "creator": "petr.jiricka@netbeans.com", "time": "2004-05-07T16:38:18Z", "bug_id": 28603, "creation_time": "2004-05-07T16:38:18Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "I found out where the problem is: When the file is deleted, the outputstream\nthat writes this file is still open, so the delete operation fails on Windows.\nThe stream is closed too late. I will attach a patch that fixes this on my machine.\n\n", "is_private": false, "id": 57086, "creator": "petr.jiricka@netbeans.com", "time": "2004-05-10T14:01:27Z", "bug_id": 28603, "creation_time": "2004-05-10T14:01:27Z", "attachment_id": null}, {"count": 7, "attachment_id": 11489, "bug_id": 28603, "is_private": false, "id": 57087, "time": "2004-05-10T14:02:38Z", "creator": "petr.jiricka@netbeans.com", "creation_time": "2004-05-10T14:02:38Z", "tags": [], "text": "Created attachment 11489\nPatch that works for me."}, {"count": 8, "tags": [], "creator": "jan.luehe@sun.com", "text": "Created attachment 11499\nSet 'writer' to NULL, so it won't be closed again in finally", "id": 57110, "time": "2004-05-10T16:27:28Z", "bug_id": 28603, "creation_time": "2004-05-10T16:27:28Z", "is_private": false, "attachment_id": 11499}, {"count": 9, "tags": [], "bug_id": 28603, "attachment_id": null, "is_private": false, "id": 57111, "time": "2004-05-10T16:28:58Z", "creator": "jan.luehe@sun.com", "creation_time": "2004-05-10T16:28:58Z", "text": "Thanks for investigating, Petr!\n\nI've applied your patch, which I slightly modified by setting 'writer' to NULL\nafter closing it in the exception handling code you added, so that it won't be\nclosed again in the finally.\n\nModified patch attached."}, {"count": 10, "tags": [], "bug_id": 28603, "attachment_id": null, "text": "Thanks!", "id": 57120, "time": "2004-05-10T17:54:17Z", "creator": "petr.jiricka@netbeans.com", "creation_time": "2004-05-10T17:54:17Z", "is_private": false}]