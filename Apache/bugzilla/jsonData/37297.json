[{"count": 0, "tags": [], "text": "A simple <delete><fileset dir=\"xxx\"/></delete> takes a lot of time and 100% CPU\nto collect all files it is going to delete.\n\ndeletion of about 7K files:\n1.7 nightly - 93 seconds\n1.7 february - 13 seconds", "is_private": false, "id": 81915, "creator": "alexeys@inventigo.com", "time": "2005-10-28T23:44:59Z", "bug_id": 37297, "creation_time": "2005-10-28T23:44:59Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Created attachment 16831\ntest directory\n\ntest directory structure (about 6.5K files)", "attachment_id": 16831, "id": 81916, "creator": "alexeys@inventigo.com", "time": "2005-10-28T23:48:08Z", "bug_id": 37297, "creation_time": "2005-10-28T23:48:08Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 37297, "attachment_id": 16832, "id": 81917, "time": "2005-10-28T23:48:43Z", "creator": "alexeys@inventigo.com", "creation_time": "2005-10-28T23:48:43Z", "is_private": false, "text": "Created attachment 16832\ntest build script"}, {"count": 3, "tags": [], "bug_id": 37297, "attachment_id": null, "id": 81918, "time": "2005-10-28T23:58:08Z", "creator": "mbenson@apache.org", "creation_time": "2005-10-28T23:58:08Z", "is_private": false, "text": "hmm... curious, for this particular example, what happens with\n<delete dir=\"xxx\" /> instead of <delete><fileset dir=\"xxx\"/></delete>?"}, {"count": 4, "tags": [], "text": "never mind... I see that I slowed this down and probably actually changed \nbehavior as well...", "is_private": false, "id": 81919, "creator": "mbenson@apache.org", "time": "2005-10-29T00:02:56Z", "bug_id": 37297, "creation_time": "2005-10-29T00:02:56Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "(In reply to comment #4)\n> never mind... I see that I slowed this down and probably actually changed \n> behavior as well...\n\n<delete dir=\"xxx\" />, that is...", "is_private": false, "id": 81920, "creator": "mbenson@apache.org", "time": "2005-10-29T00:03:13Z", "bug_id": 37297, "creation_time": "2005-10-29T00:03:13Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "hmm... 9 seconds", "is_private": false, "bug_id": 37297, "id": 81921, "time": "2005-10-29T00:03:46Z", "creator": "alexeys@inventigo.com", "creation_time": "2005-10-29T00:03:46Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 37297, "attachment_id": null, "id": 81922, "time": "2005-10-29T00:05:09Z", "creator": "mbenson@apache.org", "creation_time": "2005-10-29T00:05:09Z", "is_private": false, "text": "(In reply to comment #6)\n> hmm... 9 seconds\n\noh, so it was still faster?  additionally, I don't think <delete dir=\"xxx\" /> \nshould produce different results after all.  I wasn't sure if defaultexcludes \nwere respected originally, but from the code it appears they should have been."}, {"count": 8, "tags": [], "text": "so:\n\n<delete><fileset dir=\"... 93 seconds\n<delete dir=\"...   9 seconds\n\nWhat is the conclusion?", "is_private": false, "id": 81923, "creator": "alexeys@inventigo.com", "time": "2005-10-29T00:12:44Z", "bug_id": 37297, "creation_time": "2005-10-29T00:12:44Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 37297, "is_private": false, "text": "okay, one more time...!  <delete dir=\"\" /> did and still does delete the \nentire tree.  So it's just w/ filesets that we have a slowdown or any other \nproblem.  I am reworking the code, but I won't be able to finish until \nMonday.  :(", "id": 81924, "time": "2005-10-29T00:41:34Z", "creator": "mbenson@apache.org", "creation_time": "2005-10-29T00:41:34Z", "attachment_id": null}, {"count": 10, "tags": [], "text": "I tried yesterday version and deletion speeed is better, but it is still about\n3.5 times slower than it used to be.", "is_private": false, "id": 83088, "creator": "alexeys@inventigo.com", "time": "2005-12-01T19:15:41Z", "bug_id": 37297, "creation_time": "2005-12-01T19:15:41Z", "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 37297, "attachment_id": null, "is_private": false, "id": 83089, "time": "2005-12-01T19:34:46Z", "creator": "mbenson@apache.org", "creation_time": "2005-12-01T19:34:46Z", "text": "My local version is fixed for speed purposes, but I have introduced another\nregression here:  a deletion that is part of a tearDown method of a testcase now\nfails.  I have not committed my fix for this reason.  :("}, {"count": 12, "tags": [], "bug_id": 37297, "attachment_id": null, "id": 83932, "time": "2005-12-22T22:04:58Z", "creator": "mbenson@apache.org", "creation_time": "2005-12-22T22:04:58Z", "is_private": false, "text": "finally figured it out, 'twas something ridiculously stupid!"}]