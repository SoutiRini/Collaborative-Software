[{"count": 0, "text": "Found one Java-level deadlock:\n=============================\n\"http-8080-Processor4\":\n  waiting to lock monitor 0x180fe98 (object 0x26cb9c80, a  java.lang.Class),\n  which is held by \"http-8080-Processor2\"\n\"http-8080-Processor2\":\n  waiting to lock monitor 0x180fde4 (object 0x9a1b040, a  [Ljava.lang.String;),\n  which is held by \"http-8080-Processor4\"\n\nJava stack information for the threads listed above:\n===================================================\n\"http-8080-Processor4\":\n        at javax.security.auth.Policy.getPolicyNoCheck(Policy.java:193)\n        - waiting to lock <0x26cb9c80> (a java.lang.Class)\n        at javax.security.auth.Policy.getPolicy(Policy.java:179)\n        at \njavax.security.auth.SubjectDomainCombiner$2.run(SubjectDomainCombiner.ja va:178)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at \njavax.security.auth.SubjectDomainCombiner.combine(SubjectDomainCombiner. java:174)\n        at \njava.security.AccessControlContext.goCombiner(AccessControlContext.java: 386)\n        at \njava.security.AccessControlContext.optimize(AccessControlContext.java: 310)\n        at \njava.security.AccessController.checkPermission(AccessController.java: 400)\n        at  java.lang.SecurityManager.checkPermission(SecurityManager.java:524)\n        at  java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1491)\n        - locked <0x9a1b040> (a [Ljava.lang.String;)\n        at \norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLo\nader.java:785)\n        at \norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLo\nader.java:721)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\n        - locked <0x9a00598> (a  org.apache.catalina.loader.StandardClassLoader)\n        at \norg.apache.jasper.servlet.JspServletWrapper.<init>(JspServletWrapper.jav a:90)\n        at  org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:\n285)\n        - locked <0x7808518> (a org.apache.jasper.servlet.JspServlet)\n        at  org.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at \nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav a:39)\n        at \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor\nImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at  org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:239)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAsPrivileged(Subject.java:500)\n        at  org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:\n266)\n        at \norg.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.jav a:157)\n        at \norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applica\ntionFilterChain.java:231)\n        at \norg.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFi\nlterChain.java:50)\n        at \norg.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterC\nhain.java:140)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at \norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilt\nerChain.java:136)\n        at \norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValv e.java:214)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:104)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 520)\n        at \norg.apache.catalina.core.StandardContextValve.invokeInternal(StandardCon\ntextValve.java:198)\n        at \norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValv e.java:152)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:104)\n        at \norg.apache.catalina.authenticator.AuthenticatorBase.invoke(Authenticator\nBase.java:462)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:102)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 520)\n        at \norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java :137)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:104)\n        at \norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java :117)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:102)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 520)\n        at \norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve. java:109)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:104)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 520)\n        at  org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\n        at  org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)\n        at \norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java: 799)\n        at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processC\nonnection(Http11Protocol.java: 705)\n        at \norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java: 577)\n        at \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool .java:683)\n        at java.lang.Thread.run(Thread.java:552)\n\"http-8080-Processor2\":\n        at  java.lang.SecurityManager.checkPackageAccess(SecurityManager.java:1467)\n        - waiting to lock <0x9a1b040> (a [Ljava.lang.String;)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:271)\n        - locked <0x9a00540> (a sun.misc.Launcher$AppClassLoader)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:235)\n        at \norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader .java:1255)\n        at \norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader .java:1189)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\n        - locked <0x9cb5590> (a  org.apache.catalina.loader.WebappClassLoader)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:219)\n        at javax.security.auth.Policy$3.run(Policy.java:215)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Policy.getPolicyNoCheck(Policy.java:209)\n        - locked <0x26cb9c80> (a java.lang.Class)\n        at javax.security.auth.Policy.getPolicy(Policy.java:179)\n        at \njavax.security.auth.SubjectDomainCombiner$2.run(SubjectDomainCombiner.ja va:178)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at \njavax.security.auth.SubjectDomainCombiner.combine(SubjectDomainCombiner. java:174)\n        at \njava.security.AccessControlContext.goCombiner(AccessControlContext.java: 386)\n        at \njava.security.AccessControlContext.optimize(AccessControlContext.java: 310)\n        at \njava.security.AccessController.checkPermission(AccessController.java: 400)\n        at  java.lang.SecurityManager.checkPermission(SecurityManager.java:524)\n        at java.lang.SecurityManager.checkRead(SecurityManager.java:863)\n        at java.io.File.exists(File.java:678)\n        at  org.apache.naming.resources.FileDirContext.file(FileDirContext.java:\n826)\n        at \norg.apache.naming.resources.FileDirContext.lookup(FileDirContext.java: 208)\n        at \norg.apache.naming.resources.ProxyDirContext.lookup(ProxyDirContext.java: 287)\n        at \norg.apache.catalina.loader.WebappClassLoader.findResourceInternal(Webapp\nClassLoader.java:1707)\n        at \norg.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappCla\nssLoader.java:1575)\n        at \norg.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader .java:860)\n        at \norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader .java:1307)\n        at \norg.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader .java:1189)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\n        - locked <0x9cb5590> (a  org.apache.catalina.loader.WebappClassLoader)\n        at \ncom.wow.webapp.WOWRequestResponseFilter.doFilter(WOWRequestResponseFilte r.java:77)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at \nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav a:39)\n        at \nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor\nImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at  org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:239)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAsPrivileged(Subject.java:500)\n        at  org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:\n266)\n        at \norg.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.jav a:213)\n        at \norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applica\ntionFilterChain.java:183)\n        at \norg.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFi\nlterChain.java:50)\n        at \norg.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterC\nhain.java:140)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at \norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilt\nerChain.java:136)\n        at \norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValv e.java:214)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:104)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 520)\n        at \norg.apache.catalina.core.StandardContextValve.invokeInternal(StandardCon\ntextValve.java:198)\n        at \norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValv e.java:152)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:104)\n        at \norg.apache.catalina.authenticator.AuthenticatorBase.invoke(Authenticator\nBase.java:462)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:102)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 520)\n        at \norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java :137)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:104)\n        at \norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java :117)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:102)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 520)\n        at \norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve. java:109)\n        at \norg.apache.catalina.core.StandardValveContext.invokeNext(StandardValveCo\nntext.java:104)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 520)\n        at  org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\n        at  org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)\n        at \norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java: 799)\n        at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processC\nonnection(Http11Protocol.java:705)\n        at \norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java: 577)\n        at \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool .java:683)\n        at java.lang.Thread.run(Thread.java:552)\n\n\nFound 1 deadlock.", "bug_id": 30543, "attachment_id": null, "id": 61720, "time": "2004-08-09T16:08:28Z", "creator": "robert@whatsonwhen.com", "creation_time": "2004-08-09T16:08:28Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 30543, "attachment_id": null, "text": "You need to add a test case for such problem. J2EE 1.4, with ship with Tomcat 5\nembedded, turn security on by default and no problem has been reported. So I'm\nclosing this bug. Re-open it once you have a test case\n\n-- Jeanfrancois", "id": 62144, "time": "2004-08-18T19:57:54Z", "creator": "jfarcand@apache.org", "creation_time": "2004-08-18T19:57:54Z", "is_private": false}]