[{"count": 0, "tags": [], "creator": "lkcl@lkcl.net", "attachment_id": null, "text": "a very important command-line startup option is missing:\nthe ability to send all logging to stdout/stderr plus having the\nmain process in foreground whilst all other child processes/threads\nare running - in production mode.\n\nthe reason why this is important is because it is a standard way\nto run daemons.\n\nand - i am not kidding - apache is the _only_ major free software\nservice, out of fifty or so that i've come across - that do not have\nthis option.\n\nthere is a specific reason why i need this option: it's because of\ndepinit.  the use of depinit does away completely with the need for\nstupid /var/run/*.pid files (it keeps an eye on the main process\nand automatically restarts it if that main process dies),\nand with the need for opening up separate log files (it can read\nfrom stdout and stderr and send those to another service, for it\nto process via optional filter programs and ultimately on to a\ndestination service e.g. syslogd)\n\nin a few simple lines of c-code depinit replaces all the cruft that\nis duplicated in every single service.\n\nand apache is literally the _only_ major free software service that\ncannot be 'managed' by depinit.\n\nthe reason why it cannot be managed by depinit is because apache forks\nas a daemon, closing stdin-out-err etc. etc.  so, it has to be treated\nas a 'legacy' service, and therefore any paralllel dependencies on \napache cannot be properly managed.\n\nalso, depinit cannot give apache a chance to exit properly: it can only\nrun /etc/init.d/apache2 stop and leave it at that.  there's no chance to\nfind out if that succeeded or failed: after a few seconds, any remaining\nprocesses are terminated with extreme prejudice.\n\nif the option was added to run in foreground, in production mode, then\ndepinit could send signals to the main apache process to get it to shut\ndown gracefully, then wait until that main process exited.", "id": 96740, "time": "2006-12-11T04:51:04Z", "bug_id": 41148, "creation_time": "2006-12-11T04:51:04Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 41148, "attachment_id": null, "text": "What is missing that -DNO_DETACH (prevent the parent from forking) and \n-DFOREGROUND (prevent the parent from calling setsid() et al) do not provide?\n\nUse of some hack like -C \"ErrorLog '|cat'\" can force error logging to stderr,\npossibly some easier way with -E and /proc/*/fd.", "id": 96743, "time": "2006-12-11T06:09:17Z", "creator": "jorton@redhat.com", "creation_time": "2006-12-11T06:09:17Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 41148, "attachment_id": null, "is_private": false, "id": 96768, "time": "2006-12-11T08:57:58Z", "creator": "lkcl@lkcl.net", "creation_time": "2006-12-11T08:57:58Z", "text": "joe, hi,\n\nthanks for pointing that out!  i'll try it out.\n\nfunny.  been looking for this for nearly 18 months, and richard's been\nlooking for it for probably three years.\n\ni'll boot up my laptop with depinit on it and let you know, straight away,\nif it works.\n"}, {"count": 3, "tags": [], "bug_id": 41148, "attachment_id": null, "is_private": false, "id": 96769, "time": "2006-12-11T09:23:54Z", "creator": "lkcl@lkcl.net", "creation_time": "2006-12-11T09:23:54Z", "text": "ok: yes, that works as expected.  so the question becomes, really, how come\ntwo experienced linux developers could not find that option, easily, by\nlooking in every place that they could think of?\n\nman pages, online, documentation - nothing mentions -DFOREGROUND in any\nof the kinds of prominent places in which you'd expect to find advice on\nhow to run the world's most popular web server in a mode which dramatically\nchanges how it operates.\n\nbizarre!\n\n"}, {"count": 4, "tags": [], "text": "Obligatory \"use the source, Luke\" jokes aside, no answers... changing to Docs bug.", "attachment_id": null, "id": 96770, "creator": "jorton@redhat.com", "time": "2006-12-11T09:36:05Z", "bug_id": 41148, "creation_time": "2006-12-11T09:36:05Z", "is_private": false}, {"count": 5, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "is_private": false, "id": 106117, "time": "2007-07-31T13:21:24Z", "bug_id": 41148, "creation_time": "2007-07-31T13:21:24Z", "text": "Added to the docs for httpd -D in trunk."}]