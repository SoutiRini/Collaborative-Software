[{"count": 0, "tags": [], "text": "Compiling a minimal httpd 2.2.17 on OpenSuse 11.3 which uses gcc 4.5 causes all HTTP POST requests to fail with an empty response and the following lines in error_log\n\n[crit] file http_filters.c, line 523, assertion \"totalread >= 0\" failed\n[notice] child pid 27403 exit signal Aborted (6)\n\nThis failure does not occur on OpenSuse 11.2 or any other distro which I've tested: Fedora 13, ScientificLinux 5.5, and Ubuntu Server 10.10. Note that those working tested distros all use gcc 4.4\n   Behaviour is similar for at least Apache 2.2.16 and 2.2.14.\n\nReproducable with:\n1: ./configure --prefix=/usr/local/2217-no-maint --enable-cgi --disable-maintainer-mode\n2: make install\n3: set ip address as ServerName, set cgi files to executable\n4: start server\n5: curl -d \"item=abc\" http://localhost/cgi-bin/test-cgi\n6: result: curl: (52) Empty reply from server\n7: test as a GET\n8: curl http://localhost/cgi-bin/test-cgi?item=abc\n9: result: expected environment variables displayed\n\nMake it work by allowing maintainer mode\n1: ./configure --prefix=/usr/local/2217-with-maint --enable-cgi --enable-maintainer-mode\nthen POST tests work. Binary is ~2k larger.\n\nFound a semi-related note at the bottom of this page: http://code.google.com/p/modwsgi/wiki/InstallationIssues . But my build is without any external modules.", "is_private": false, "id": 141306, "creator": "john.andrea@satlantic.com", "time": "2010-11-01T12:03:21Z", "bug_id": 50190, "creation_time": "2010-11-01T12:03:21Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 50190, "text": "Using Fedora 14 beta with gcc 4.5.1 the problem is reproduced.", "id": 141347, "time": "2010-11-02T16:34:19Z", "creator": "john.andrea@satlantic.com", "creation_time": "2010-11-02T16:34:19Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 50190, "attachment_id": null, "text": "We have the same issue with the Mandriva Linux distro, see\n\n https://qa.mandriva.com/show_bug.cgi?id=61384\n\nThis is a pretty critical issue as it prevents e.g. the Bugzilla web application from working with Apache 2.2.17.", "id": 142061, "time": "2010-11-27T17:59:08Z", "creator": "LpSolit@netscape.net", "creation_time": "2010-11-27T17:59:08Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 50190, "attachment_id": null, "text": "Seems related to http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46488", "id": 142063, "time": "2010-11-27T18:21:21Z", "creator": "LpSolit@netscape.net", "creation_time": "2010-11-27T18:21:21Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "sf@sfritsch.de", "text": "From reading through the bug reports, I got the impression that the APR_RING/APR_BRIGADE code is simply not safe WRT strict-aliasing rules and the only possible fix would be to add -fno-strict-alias to the default CFLAGS.\n\nIs this correct?", "count": 4, "id": 142080, "time": "2010-11-28T17:42:47Z", "bug_id": 50190, "creation_time": "2010-11-28T17:42:47Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 50190, "text": "Well, Eric in http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46488#c18 (comment 18) suggests a change which might fix the problem wrt strict aliasing. This would avoid the use of -fno-strict-alias.", "id": 142087, "time": "2010-11-28T18:05:32Z", "creator": "LpSolit@netscape.net", "creation_time": "2010-11-28T18:05:32Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 50190, "attachment_id": 26357, "text": "Created attachment 26357\npossible workaround\n\nCan someone test whether the attached patch makes a difference?\n\n  $ (cd srclib/apr-util && patch -p0 < /path/to/apr_alias.diff)\n  $ make clean && make", "id": 142204, "time": "2010-11-30T10:51:26Z", "creator": "jorton@redhat.com", "creation_time": "2010-11-30T10:51:26Z", "is_private": false}, {"count": 7, "tags": [], "text": "> Can someone test whether the attached patch makes a difference?\n\nNo change.", "attachment_id": null, "id": 142322, "creator": "john.andrea@satlantic.com", "time": "2010-12-02T16:48:48Z", "bug_id": 50190, "creation_time": "2010-12-02T16:48:48Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 50190, "text": "Mandriva has a working patch on this (http://svn.mandriva.com/cgi-bin/viewvc.cgi/packages/cooker/apr/current/SOURCES/apr-1.4.2-alias.patch?view=markup&pathrev=604557)\n\nAlso added to ubuntu's launchpad: https://bugs.launchpad.net/ubuntu/+source/apache2/+bug/697105", "id": 143146, "time": "2011-01-06T17:44:35Z", "creator": "shankao@gmail.com", "creation_time": "2011-01-06T17:44:35Z", "is_private": false, "attachment_id": null}, {"text": "*** Bug 50520 has been marked as a duplicate of this bug. ***", "tags": [], "bug_id": 50190, "attachment_id": null, "count": 9, "id": 143404, "time": "2011-01-17T05:31:31Z", "creator": "jorton@redhat.com", "creation_time": "2011-01-17T05:31:31Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 50190, "attachment_id": null, "id": 144433, "time": "2011-02-19T16:15:38Z", "creator": "b3nder@yandex.ru", "creation_time": "2011-02-19T16:15:38Z", "is_private": false, "text": "Related bug with fix\n\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=50798"}, {"count": 11, "tags": [], "bug_id": 50190, "attachment_id": null, "id": 144580, "time": "2011-02-26T11:52:21Z", "creator": "sf@sfritsch.de", "creation_time": "2011-02-26T11:52:21Z", "is_private": false, "text": "*** Bug 50798 has been marked as a duplicate of this bug. ***"}, {"count": 12, "tags": [], "text": "Fixed in r1074876, r1074877, r1074878.\nWill be released with 1.4.3", "attachment_id": null, "id": 144582, "creator": "sf@sfritsch.de", "time": "2011-02-26T12:01:18Z", "bug_id": 50190, "creation_time": "2011-02-26T12:01:18Z", "is_private": false}]