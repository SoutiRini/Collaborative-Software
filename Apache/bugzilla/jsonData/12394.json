[{"count": 0, "attachment_id": null, "creator": "grenoml@yahoo.com", "is_private": false, "id": 22439, "time": "2002-09-08T05:17:09Z", "bug_id": 12394, "creation_time": "2002-09-08T05:17:09Z", "tags": [], "text": "jsp:include does not appear to be functioning correctly.  I can't get it to \nwork with <%= expression %> form and it isn't even working correctly in \ndetermining relative location.  I have an include file located in an includes \ndir directly beneath the loaded file dir but <jsp:include \npage=\"includes/myfile\" flush=\"true\" />  does not include it and in fact stops \nall further includes.  This is a major problem."}, {"count": 1, "attachment_id": null, "bug_id": 12394, "is_private": false, "id": 22440, "time": "2002-09-08T05:53:35Z", "creator": "grenoml@yahoo.com", "creation_time": "2002-09-08T05:53:35Z", "tags": [], "text": "The file that I'm including is not a .jsp file.  But this shouldn't make any \ndifference."}, {"count": 2, "tags": [], "text": "Also might note that I'm using the ISAPI redirector.", "is_private": false, "id": 22441, "creator": "grenoml@yahoo.com", "time": "2002-09-08T06:03:59Z", "bug_id": 12394, "creation_time": "2002-09-08T06:03:59Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "remm@apache.org", "text": "Include a test case. I believe the functionality is working fine.", "id": 22444, "time": "2002-09-08T08:15:46Z", "bug_id": 12394, "creation_time": "2002-09-08T08:15:46Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 12394, "text": "Missed the fact that it was using JK. I think you should test if it works in\nstandalone mode.", "id": 22445, "time": "2002-09-08T08:17:18Z", "creator": "remm@apache.org", "creation_time": "2002-09-08T08:17:18Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 12394, "attachment_id": null, "text": "OK, I tested this standalone with the ISAPI redirector and the files are being \nincluded only so long as I don't use expression which is very limiting.  So my \nquestion is: did this release break our ability to use \n  1. the ISAPI redirector and \n  2. expressions \nwith jsp:include?  It appears so.  \nIf I use expression like this:\n\n<% String jspbase=\"/en_test/\" %>\n...\n<jsp:include page=\"<%=jspbase%>includes/left.inc\" flush=\"true\" ></jsp:include>\n\nthen I get a 500 error like this:\nexception \n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:477)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:182)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:289)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2350)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:469)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:405)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:380)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:508)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:533)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\nroot cause \n\norg.apache.jasper.JasperException: /en_test/testindex3.jsp(78,44) \njsp.error.attribute.unterminated\n\tat org.apache.jasper.compiler.DefaultErrorHandler.jspError\n(DefaultErrorHandler.java:94)\n\tat org.apache.jasper.compiler.ErrorDispatcher.dispatch\n(ErrorDispatcher.java:417)\n\tat org.apache.jasper.compiler.ErrorDispatcher.jspError\n(ErrorDispatcher.java:170)\n\tat org.apache.jasper.compiler.Parser.parseAttributeValue\n(Parser.java:217)\n\tat org.apache.jasper.compiler.Parser.parseAttribute(Parser.java:181)\n\tat org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:136)\n\tat org.apache.jasper.compiler.Parser.parseInclude(Parser.java:490)\n\tat org.apache.jasper.compiler.Parser.parseAction(Parser.java:664)\n\tat org.apache.jasper.compiler.Parser.parseElements(Parser.java:798)\n\tat org.apache.jasper.compiler.Parser.parse(Parser.java:122)\n\tat org.apache.jasper.compiler.ParserController.parse\n(ParserController.java:199)\n\tat org.apache.jasper.compiler.ParserController.parse\n(ParserController.java:153)\n\tat org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:229)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:322)\n\tat org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:474)\n\tat org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:182)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:289)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:260)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2350)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:171)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:469)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service\n(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:405)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnectio\nn(Http11Protocol.java:380)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:508)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:533)\n\tat java.lang.Thread.run(Thread.java:536)\n\n", "id": 22464, "time": "2002-09-08T16:22:57Z", "creator": "grenoml@yahoo.com", "creation_time": "2002-09-08T16:22:57Z", "is_private": false}, {"count": 6, "attachment_id": null, "bug_id": 12394, "is_private": false, "id": 22465, "time": "2002-09-08T16:25:48Z", "creator": "grenoml@yahoo.com", "creation_time": "2002-09-08T16:25:48Z", "tags": [], "text": "Last entry, first line, meant without ISAPI redirector."}, {"count": 7, "tags": [], "bug_id": 12394, "attachment_id": null, "text": "Even the non-expression form of jsp:include is not working reliably:\n\nThis is now not working:\n<jsp:include page=\"includes/left.inc\" flush=\"true\" ></jsp:include>\nit fails to include the file left.inc and from then on no further jsp:include \nstatements work.\n\nwhile the limited directive form does work:\n<%@ include file=\"includes/left.inc\" %> ", "id": 22466, "time": "2002-09-08T16:39:31Z", "creator": "grenoml@yahoo.com", "creation_time": "2002-09-08T16:39:31Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 12394, "text": "You cannot write\n\n<jsp:include page=\"<%=jspbase%>includes/left.inc\" flush=\"true\" ></jsp:include>\n\nbecause the value for the attribute page is not an expression.  Instead use\n\n<jsp:include page='<%=jspbase + includes/left.inc\"%>' flush=\"true\"\n></jsp:include>\n\nAlso, <jsp:include page=\"includes/left.inc\" flush=\"true\" ></jsp:include> works\nperfectly for me.\n", "id": 22542, "time": "2002-09-09T17:29:02Z", "creator": "kin-man.chung@sun.com", "creation_time": "2002-09-09T17:29:02Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 12394, "text": "Sorry, I meant <jsp:include page=\"includes/left.jsp\"/> works for me, but not \n<jsp:include page=\"includes/left.inc\"/>.  But then \".inc\" is not a recognized\nJSP extension.", "id": 22543, "time": "2002-09-09T17:33:59Z", "creator": "kin-man.chung@sun.com", "creation_time": "2002-09-09T17:33:59Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 12394, "attachment_id": null, "text": "Yes, this is a known \"problem\". Since Catalina refuses to include binaries in\nthe middle of text, your file must have a \"text/*\" MIME type.", "id": 22550, "time": "2002-09-09T20:00:17Z", "creator": "remm@apache.org", "creation_time": "2002-09-09T20:00:17Z", "is_private": false}]