[{"count": 0, "tags": [], "bug_id": 46669, "is_private": false, "id": 124701, "attachment_id": null, "creator": "lance@osuosl.org", "creation_time": "2009-02-06T14:11:37Z", "time": "2009-02-06T14:11:37Z", "text": "I'm attempting to switch all our chronological logging from cronolog to rotatelogs. We use directories for each vhost's logs under /var/log/apache and cronolog would automatically create directories for logs if they weren't already there.\n\nCould you please add support for rotatelogs to automatically create directories if it doesn't exist? \n\nExample of what we have:\n\nCustomLog \"|/usr/sbin/rotatelogs -l /var/log/apache2/fooproject.org/transfer/%Y%m%d.log 86400\" combined\n\nInstead I got something like this in the errorlog:\n\nCould not open log file '/var/log/apache2/fooproject.org/transfer/20090206.log' (No such file or directory)\npiped log program '/usr/sbin/rotatelogs -l /var/log/apache2/fooproject.org/transfer/%Y%m%d.log 86400' failed unexpectedly\n\nI'd submit a patch but I'm not strong in C coding :)\n\nThanks!"}, {"count": 1, "tags": [], "creator": "plantin@cobaltgroup.com", "attachment_id": 29673, "id": 163805, "time": "2012-12-03T23:49:58Z", "bug_id": 46669, "creation_time": "2012-12-03T23:49:58Z", "is_private": false, "text": "Created attachment 29673\nPatch against 2.2.23 to support creating directories with -d option\n\nCreate dir procedure copied from Apache licensed cronolog project."}, {"count": 2, "tags": [], "bug_id": 46669, "is_private": false, "id": 163843, "attachment_id": null, "creator": "christophe.jaillet@wanadoo.fr", "creation_time": "2012-12-04T13:02:30Z", "time": "2012-12-04T13:02:30Z", "text": "Thanks for the patch, I'll give a look at it.\n\n\nFirst, I think that the location of #ifndef _WIN32 is strange.\nOn a Windows machine, I doubt it could compile because of { } mismatch.\n\nI think that you intended to have conditional compilation around mkdir(dirname, DIR_MODE) and mkdir(dirname)."}, {"count": 3, "tags": [], "text": "Philippe,\n\nThat patch won't be accepted by Apache since you're not using APR and doing it in a portable way.  There is a patch that would be accepted in a portable way in your p4 repo that I wrote (when I worked at the same place you are) but was never able to get permission to release.  I'd suggest you find that and get permission to contribute it and use it instead.", "is_private": false, "bug_id": 46669, "id": 163849, "time": "2012-12-04T14:21:46Z", "creator": "ben@reser.org", "creation_time": "2012-12-04T14:21:46Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "plantin@cobaltgroup.com", "attachment_id": 29690, "id": 163854, "time": "2012-12-04T18:08:45Z", "bug_id": 46669, "creation_time": "2012-12-04T18:08:45Z", "is_private": false, "text": "Created attachment 29690\nBen's rotatelogs patch, more complete, APR compatible.\n\nThis patch introduces a \"-p\" option to create directories if necessary."}, {"count": 5, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 163855, "time": "2012-12-04T19:55:59Z", "bug_id": 46669, "creation_time": "2012-12-04T19:55:59Z", "is_private": false, "text": "Based on Ben's comments, I don't think we can accept this without some kind of CCLA (corporate contributors license agreement) or grant."}, {"count": 6, "tags": [], "text": "Figured we'd need to get a CCLA.  Another option might be for them to give me the copyright (exclude it from my work for hire agreement) and I can contribute it under my ICLA.  I was trying to get that worked out but unfortunately, left before we were able to complete it.  Given that Philippe is now involved hopefully and there's another interested party there I think we can get that figured out.", "is_private": false, "bug_id": 46669, "id": 163858, "time": "2012-12-04T20:34:37Z", "creator": "ben@reser.org", "creation_time": "2012-12-04T20:34:37Z", "attachment_id": null}, {"count": 7, "text": "Side note: There's another version of the patch that I believe was against the current trunk at the time I wrote it.  Trying to get Philippe to find that as well.\n\nThe 2.2.x patch won't apply cleanly to trunk due to some refactoring that's been done since.", "bug_id": 46669, "is_private": false, "id": 163859, "time": "2012-12-04T20:46:20Z", "creator": "ben@reser.org", "creation_time": "2012-12-04T20:46:20Z", "tags": [], "attachment_id": null}, {"count": 8, "tags": [], "creator": "ben@reser.org", "attachment_id": null, "is_private": false, "id": 170319, "time": "2013-09-27T21:57:08Z", "bug_id": 46669, "creation_time": "2013-09-27T21:57:08Z", "text": "It is my understanding that secretary@apache.org now has a CCLA from ADP.  My employer at the time I wrote the patch Philippe has attached and Philippe's current employer.  Between that CCLA and my ICLA I believe we are covered now."}, {"count": 9, "text": "Since the patch was originally written another usage of -p has been added to trunk that is completely different.  So a different option name will have to be used.", "bug_id": 46669, "is_private": false, "id": 170704, "time": "2013-10-19T18:41:00Z", "creator": "ben@reser.org", "creation_time": "2013-10-19T18:41:00Z", "tags": [], "attachment_id": null}, {"count": 10, "tags": [], "text": "Ported the patch to trunk and changed the option name to -d.  Committed in r1533810.", "is_private": false, "bug_id": 46669, "id": 170705, "time": "2013-10-19T19:11:32Z", "creator": "ben@reser.org", "creation_time": "2013-10-19T19:11:32Z", "attachment_id": null}]