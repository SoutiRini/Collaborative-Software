[{"count": 0, "tags": [], "bug_id": 39009, "attachment_id": null, "is_private": false, "id": 86947, "time": "2006-03-17T08:41:59Z", "creator": "Markus.Barchfeld@dvag.com", "creation_time": "2006-03-17T08:41:59Z", "text": "The Scp task should support includeEmptyDirs as does the copy task.\n\nIndex:\nC:/Java/ant/ant-core/src/main/org/apache/tools/ant/taskdefs/optional/ssh/Scp.java\n===================================================================\n---\nC:/Java/ant/ant-core/src/main/org/apache/tools/ant/taskdefs/optional/ssh/Scp.java\n(revision 383811)\n+++\nC:/Java/ant/ant-core/src/main/org/apache/tools/ant/taskdefs/optional/ssh/Scp.java\n(working copy)\n@@ -42,6 +42,7 @@\n \n     private String fromUri;\n     private String toUri;\n+    private boolean includeEmptyDirs ;\n     private List fileSets = null;\n     private boolean isFromRemote, isToRemote;\n \n@@ -319,6 +320,15 @@\n         DirectoryScanner scanner = set.getDirectoryScanner(getProject());\n         Directory root = new Directory(scanner.getBasedir());\n         String[] files = scanner.getIncludedFiles();\n+\n+        if (includeEmptyDirs) {\n+        \tString[] dirs = scanner.getIncludedDirectories();\n+        \tArrayList<String> filesAndDirList = new ArrayList<String>() ;\n+        \tfilesAndDirList.addAll(Arrays.asList(dirs)) ;\n+        \tfilesAndDirList.addAll(Arrays.asList(files)) ;\n+        \tfiles = filesAndDirList.toArray(new String[] {}) ;\n+        }\n+\n         if (files.length != 0) {\n             for (int j = 0; j < files.length; j++) {\n                 String[] path = Directory.getPath(files[j]);\n@@ -341,4 +351,12 @@\n         }\n         return root;\n     }\n+\n+    public boolean getIncludeEmptyDirs() {\n+\t\treturn includeEmptyDirs;\n+\t}\n+\n+    public void setIncludeEmptyDirs(boolean includeEmptyDirs) {\n+\t\tthis.includeEmptyDirs = includeEmptyDirs;\n+\t}\n }"}]