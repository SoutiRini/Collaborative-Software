[{"attachment_id": null, "tags": [], "bug_id": 30066, "text": "When configured with \"--enable-v4-mapped\" option, \"HostnameLookups On\" does not\nwork well on FreeBSD 4.9-STABLE.\nThis is caused by the fail of getnameinfo() in \nsrclib/apr/network_io/unix/sockaddr.c:616, I guess.\nThe first argument of getnameinfo() should have proper sa_len (or sin_len) field\nvalue by itself, so applying the following patch can solve the problem.\n*** srclib/apr/network_io/unix/sockaddr.c.orig  Mon May 24 20:27:45 2004\n--- srclib/apr/network_io/unix/sockaddr.c       Tue Jul 13 16:54:01 2004\n***************\n*** 612,617 ****\n--- 612,618 ----\n          struct sockaddr_in tmpsa;\n          tmpsa.sin_family = AF_INET;\n          tmpsa.sin_addr.s_addr = ((apr_uint32_t *)sockaddr->ipaddr_ptr)[3];\n+         tmpsa.sin_len = sizeof(tmpsa);\n\n          rc = getnameinfo((const struct sockaddr *)&tmpsa, sizeof(tmpsa),\n                           tmphostname, sizeof(tmphostname), NULL, 0,", "count": 0, "id": 60522, "time": "2004-07-13T08:46:32Z", "creator": "turutani@scphys.kyoto-u.ac.jp", "creation_time": "2004-07-13T08:46:32Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 30066, "is_private": false, "id": 60523, "time": "2004-07-13T09:19:55Z", "creator": "jorton@redhat.com", "creation_time": "2004-07-13T09:19:55Z", "tags": [], "text": "Thanks for the patch, committed (with #ifdef SIN6_LEN protection) for the next\nrelease."}]