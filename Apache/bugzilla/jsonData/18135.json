[{"count": 0, "tags": [], "creator": "gabriele.garuglieri@infoblu.it", "text": "Tomcat 4.1.21\nconnectors 4.1.21\nApache/2.0.44 (Unix) mod_jk/1.2.3-dev\n\n\nIf sticky_session property is not declared it defaults to 0 and not 1 as documented.\nMigrating a working load balancing 4.1.12 configuration to mod_jk/1.2.3-dev gets\ncalls distributed between the workers group members, breaking the session,\nunless i declare sticky_session=1 in the load balancer worker.\n\nYou can easily see in the code that if the property is not declared it defaults\nto JK_FALSE.\n\nint jk_get_is_sticky_session(jk_map_t *m,\n                           const char *wname) {\n   int rc = JK_TRUE;\n   char buf[1024];\n   if (m && wname) {\n       int value;\n       sprintf(buf, \"%s.%s.%s\", PREFIX_OF_WORKER, wname, STICKY_SESSION);\n       value = map_get_int(m, buf, 0);\n       if (!value) rc = JK_FALSE;\n   }\n   return rc;\n}\n\n\nPutting line\nvalue = map_get_int(m, buf, 0);\nto\nvalue = map_get_int(m, buf, 1);\nmakes everything working as documented.\n\nRegards, Gabriele.", "id": 33423, "time": "2003-03-19T09:36:26Z", "bug_id": 18135, "creation_time": "2003-03-19T09:36:26Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 18135, "attachment_id": null, "is_private": false, "id": 33452, "time": "2003-03-19T14:29:23Z", "creator": "glenn@apache.org", "creation_time": "2003-03-19T14:29:23Z", "text": "Thanks for reporting this.  Bug fix patch applied and committed to CVS."}]