[{"count": 0, "tags": [], "text": "Using versions of Ant from 1.7.1 up to 1.9.2, you can make a simple <script> task fail simply by introducing a property with the name \"java\".  It fails with the cryptic message: Cannot read property \"PrintWriter\" from undefined (print#8) in print at line number 8.\n\n\nThis simple Ant file will succeed:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project name=\"testjs\" default=\"main\">\n    <target name=\"main\">\n        <script language=\"javascript\">\n            println(\"hello\");\n        </script>\n    </target>\n</project>\n\nWhile this one will fail:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project name=\"testjs\" default=\"main\">\n    <property name=\"java\" value=\"any value will kill it\" />\n\n    <target name=\"main\">\n        <script language=\"javascript\">\n            println(\"hello\");\n        </script>\n    </target>\n</project>\n\nFull stack trace follows:\n javax.script.ScriptException: sun.org.mozilla.javascript.internal.EcmaError: TypeError: Cannot read property \"PrintWriter\" from undefined (print#8) in print at line number 8\n\tat com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:224)\n\tat com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:240)\n\tat javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:264)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.apache.tools.ant.util.ReflectUtil.invoke(ReflectUtil.java:108)\n\tat org.apache.tools.ant.util.ReflectWrapper.invoke(ReflectWrapper.java:81)\n\tat org.apache.tools.ant.util.optional.JavaxScriptRunner.evaluateScript(JavaxScriptRunner.java:103)\n\tat org.apache.tools.ant.util.optional.JavaxScriptRunner.executeScript(JavaxScriptRunner.java:67)\n\tat org.apache.tools.ant.taskdefs.optional.Script.execute(Script.java:52)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n\tat org.apache.tools.ant.Task.perform(Task.java:348)\n\tat org.apache.tools.ant.Target.execute(Target.java:392)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:413)\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1368)\n\tat org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1251)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:811)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:217)\n\tat org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)\n\tat org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)\nCaused by: sun.org.mozilla.javascript.internal.EcmaError: TypeError: Cannot read property \"PrintWriter\" from undefined (print#8)\n\tat sun.org.mozilla.javascript.internal.ScriptRuntime.constructError(ScriptRuntime.java:3771)\n\tat sun.org.mozilla.javascript.internal.ScriptRuntime.constructError(ScriptRuntime.java:3749)\n\tat sun.org.mozilla.javascript.internal.ScriptRuntime.typeError(ScriptRuntime.java:3777)\n\tat sun.org.mozilla.javascript.internal.ScriptRuntime.typeError2(ScriptRuntime.java:3796)\n\tat sun.org.mozilla.javascript.internal.ScriptRuntime.undefReadError(ScriptRuntime.java:3809)\n\tat sun.org.mozilla.javascript.internal.ScriptRuntime.getObjectProp(ScriptRuntime.java:1488)\n\tat sun.org.mozilla.javascript.internal.Interpreter.interpretLoop(Interpreter.java:1403)\n\tat sun.org.mozilla.javascript.internal.Interpreter.interpret(Interpreter.java:849)\n\tat sun.org.mozilla.javascript.internal.InterpretedFunction.call(InterpretedFunction.java:162)\n\tat sun.org.mozilla.javascript.internal.ContextFactory.doTopCall(ContextFactory.java:433)\n\tat com.sun.script.javascript.RhinoScriptEngine$1.superDoTopCall(RhinoScriptEngine.java:116)\n\tat com.sun.script.javascript.RhinoScriptEngine$1.doTopCall(RhinoScriptEngine.java:109)\n\tat sun.org.mozilla.javascript.internal.ScriptRuntime.doTopCall(ScriptRuntime.java:3161)\n\tat sun.org.mozilla.javascript.internal.InterpretedFunction.exec(InterpretedFunction.java:173)\n\tat sun.org.mozilla.javascript.internal.Context.evaluateReader(Context.java:1159)\n\tat com.sun.script.javascript.RhinoScriptEngine.eval(RhinoScriptEngine.java:214)\n\t... 28 more", "attachment_id": null, "bug_id": 55563, "id": 170132, "time": "2013-09-16T21:55:52Z", "creator": "ted@rusts.net", "creation_time": "2013-09-16T21:55:52Z", "is_private": false}]