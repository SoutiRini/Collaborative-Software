[{"count": 0, "tags": [], "bug_id": 28168, "attachment_id": null, "is_private": false, "id": 55182, "time": "2004-04-02T20:16:52Z", "creator": "toby@caboteria.org", "creation_time": "2004-04-02T20:16:52Z", "text": "Hi!  I like to compile jsp pages into servlets before putting them into\nproduction, and I also like to use webdoclet to generate web.xml.  This patch\nlets me do both.  It just adds a class comment with a couple of webdoclet tages\nto jspc's output classes.\n\nIndex: jasper/src/share/org/apache/jasper/compiler/JspParseEventListener.java\n===================================================================\nRCS file:\n/home/cvspublic/jakarta-tomcat-4.0/jasper/src/share/org/apache/jasper/compiler/JspParseEventListener.java,v\nretrieving revision 1.38\ndiff -u -u -r1.38 JspParseEventListener.java\n--- jasper/src/share/org/apache/jasper/compiler/JspParseEventListener.java     \n21 May 2002 01:40:13 -0000   1.38\n+++ jasper/src/share/org/apache/jasper/compiler/JspParseEventListener.java     \n2 Apr 2004 20:08:55 -0000\n@@ -257,10 +257,10 @@\n     }\n  \n     private void generateHeader() throws JasperException {\n-        String servletPackageName = ctxt.getServletPackageName();\n+        String servletPackageName = null == ctxt.getServletPackageName() ? \"\" :\nctxt.getServletPackageName();\n         String servletClassName = ctxt.getServletClassName();\n         // First the package name:\n-        if (! \"\".equals(servletPackageName) && servletPackageName != null) {\n+        if (! \"\".equals(servletPackageName)) {\n             writer.println(\"package \"+servletPackageName+\";\");\n             writer.println();\n         }\n@@ -273,6 +273,11 @@\n        generateAll(FileDeclarationPhase.class);\n        writer.println();\n  \n+        writer.println(\"/**\");\n+        writer.println(\" * @web.servlet name=\\\"\" + servletPackageName + \".\" +\nservletClassName + \"\\\"\");\n+        writer.println(\" * @web.servlet-mapping url-pattern=\\\"\" +\nctxt.getJspFile() + \"\\\"\");\n+        writer.println(\" */\");\n+\n        writer.print(\"public class \"+servletClassName+ \" extends \");\n        writer.print(extendsClass.equals(\"\") ? jspServletBase : extendsClass);"}, {"count": 1, "tags": [], "bug_id": 28168, "attachment_id": null, "id": 55189, "time": "2004-04-02T21:03:07Z", "creator": "toby@caboteria.org", "creation_time": "2004-04-02T21:03:07Z", "is_private": false, "text": "Here's a less intrusive version of the patch; no changes, only adds:\n\nIndex: jasper/src/share/org/apache/jasper/compiler/JspParseEventListener.java\n===================================================================\nRCS file:\n/home/cvspublic/jakarta-tomcat-4.0/jasper/src/share/org/apache/jasper/compiler/JspParseEventListener.java,v\nretrieving revision 1.38\ndiff -u -u -r1.38 JspParseEventListener.java\n--- jasper/src/share/org/apache/jasper/compiler/JspParseEventListener.java     \n21 May 2002 01:40:13 -0000   1.38\n+++ jasper/src/share/org/apache/jasper/compiler/JspParseEventListener.java     \n2 Apr 2004 21:01:58 -0000\n@@ -273,6 +273,15 @@\n        generateAll(FileDeclarationPhase.class);\n        writer.println();\n  \n+        writer.println(\"/**\");\n+        if (! \"\".equals(servletPackageName) && servletPackageName != null) {\n+            writer.println(\" * @web.servlet name=\\\"\" + servletPackageName + \".\"\n+ servletClassName + \"\\\"\");\n+        } else {\n+            writer.println(\" * @web.servlet name=\\\"\" + servletClassName + \"\\\"\");\n+        }\n+        writer.println(\" * @web.servlet-mapping url-pattern=\\\"\" +\nctxt.getJspFile() + \"\\\"\");\n+        writer.println(\" */\");\n+\n        writer.print(\"public class \"+servletClassName+ \" extends \");\n        writer.print(extendsClass.equals(\"\") ? jspServletBase : extendsClass);\n  \n"}, {"count": 2, "tags": [], "bug_id": 28168, "text": "I don't recall any requests for this feature other than this enhancement request so I am closing this a WONTFIX. I would add that if there were a demand for this feature, then the addition of the webdoclet information would have to be optional before the patch would be accepted.", "id": 143767, "time": "2011-01-28T17:55:58Z", "creator": "markt@apache.org", "creation_time": "2011-01-28T17:55:58Z", "is_private": false, "attachment_id": null}]