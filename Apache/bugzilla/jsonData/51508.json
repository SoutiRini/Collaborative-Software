[{"count": 0, "tags": [], "bug_id": 51508, "text": "Using 7.0.19 release candidate\n\nSteps to reproduce:\n\n1. Go to webapps/examples/WEB-INF/web.xml,\nfind existing <jsp-config> element in the file,\nadd the following text at the end of that element:\n\n\t<jsp-property-group>\n\t\t<url-pattern>/*</url-pattern>\n\t\t<trim-directive-whitespaces>true</trim-directive-whitespaces>\n\t</jsp-property-group>\n\n2. Clear work directory. Start Tomcat.\n\n3. Navigate to http://localhost:8080/examples/jsp\nExpected result: list of examples, jsp/index.html\nActual result:\n\nError 500 page\norg.apache.jasper.JasperException: File \"/jsp\" not found\n\torg.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:55)\n\torg.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:409)\n\torg.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:116)\n\torg.apache.jasper.compiler.JspUtil.getInputStream(JspUtil.java:678)\n\torg.apache.jasper.xmlparser.XMLEncodingDetector.getEncoding(XMLEncodingDetector.java:109)\n\torg.apache.jasper.compiler.ParserController.determineSyntaxAndEncoding(ParserController.java:337)\n\torg.apache.jasper.compiler.ParserController.doParse(ParserController.java:190)\n\torg.apache.jasper.compiler.ParserController.parseDirectives(ParserController.java:119)\n\torg.apache.jasper.compiler.Compiler.generateJava(Compiler.java:193)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:373)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:353)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:340)\n\torg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:644)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:358)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n\nAdditional notes:\n------------------\n1. The following URLs for the same page do work:\nhttp://localhost:8080/examples/jsp/\nhttp://localhost:8080/examples/jsp/index.html\n\nThe following URL does not work:\nhttp://localhost:8080/examples/jsp\n\nSo it seems that it is redirection from\nhttp://localhost:8080/examples/jsp -> http://localhost:8080/examples/jsp/\nthat breaks.\n\n2. Calling a JSP page directly does work,\nhttp://localhost:8080/examples/jsp/jsp2/tagfiles/hello.jsp", "id": 147914, "attachment_id": null, "creator": "knst.kolinko@gmail.com", "creation_time": "2011-07-14T12:11:55Z", "time": "2011-07-14T12:11:55Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 147987, "time": "2011-07-18T20:03:10Z", "bug_id": 51508, "creation_time": "2011-07-18T20:03:10Z", "is_private": false, "text": "This is as per the spec and confirmed by a number of tests within the JSP 2.2 TCK, although the spec could make this clearer.\n\nSection JSP.1.1.8 of the JSP spec states that:\n<quote>\nThe jsp-property-group element of web.xml can be used to indicate that some\ngroup of files, perhaps not using either of the extensions above, are JSP pages...\n</quote>\n\nA url-pattern in a JSP property group must take precedence over any servlet mapping. A mapping of '/*' will bypass the welcome file mapping, hence why you see what you see. '*.jsp' may be a better choice for you in this case."}, {"count": 2, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "id": 148058, "time": "2011-07-21T11:24:24Z", "bug_id": 51508, "creation_time": "2011-07-21T11:24:24Z", "is_private": false, "text": "Thank you for the explanation. I see now that this feature is mentioned in section 3. several rimes as well,\ne.g. in JSP.3.3.1 \"The properties (...):  * Indicate that a resource is a JSP file (implicit).\""}]