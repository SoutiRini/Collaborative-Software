[{"count": 0, "tags": [], "bug_id": 21834, "attachment_id": null, "is_private": false, "id": 41257, "time": "2003-07-23T20:27:02Z", "creator": "vishy@borland.com", "creation_time": "2003-07-23T20:27:02Z", "text": "StandaredWrapperValve.log() goes in to endless recursion because of a change \nthat was recenly made to the  StandardWrapperValve.java\n\nSteps to reproduce:\n\n1. Comment out the all loggers from server.xml\n\n2. Deploy a servlet similar to the one below:\n\npublic class Servlet1\n    extends GenericServlet {\n\n  public void service(ServletRequest request, ServletResponse response) throws\n      ServletException, IOException, java.lang.ArithmeticException {\n\n    throw new java.lang.ArithmeticException(\"This is an ArithmeticException\");\n  }\n}\n\n3. Hit the servlet using a browser (http://localhost:8080/error/servlet1 in my \ncase).\n\n4. The run time exception is caught and an attempt is made to log it. However, \nif the logger is not set, log is entered recursively. \n\nHere is the offending code:\n    private void log(String message, Throwable throwable) {\n\n        Logger logger = null;\n        if (container != null)\n            logger = container.getLogger();\n        if (logger != null)\n            logger.log(\"StandardWrapperValve[\" + container.getName() + \"]: \"\n                       + message, throwable);\n        else {\n            String containerName = null;\n            if (container != null)\n                containerName = container.getName();\n            log( \"StandardWrapperValve[\" + containerName\n                       + \"]: \" + message, throwable);\n        }\n\n    }\n\nThe fix is simple:\n\nReplace the last log above with a System.println. \n\nI will attach a WAR file if I figure out how to do attachements to bugzilla \nbugs."}, {"count": 1, "tags": [], "creator": "vishy@borland.com", "is_private": false, "text": "Created attachment 7479\nThe war file which has a servlet throwing runtime exception", "id": 41258, "time": "2003-07-23T20:28:51Z", "bug_id": 21834, "creation_time": "2003-07-23T20:28:51Z", "attachment_id": 7479}, {"count": 2, "tags": [], "creator": "vicentesalvador@netscape.net", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 19312 ***", "id": 44346, "time": "2003-09-19T14:20:37Z", "bug_id": 21834, "creation_time": "2003-09-19T14:20:37Z", "attachment_id": null}]