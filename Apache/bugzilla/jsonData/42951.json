[{"count": 0, "tags": [], "bug_id": 42951, "attachment_id": null, "id": 105827, "time": "2007-07-22T10:28:48Z", "creator": "Andrew_Polozov@yahoo.com", "creation_time": "2007-07-22T10:28:48Z", "is_private": false, "text": "Looks like an old bug in startup scripts, which has been fixed around 5.5.20,\nhas been reintroduced (or hasn't been ported) in 6.0.X:\nCATALINA_OPTS variable is used for stopping, while it's supposed to be used for\nstarting only:\n------------------\nelif [ \"$1\" = \"stop\" ] ; then\n\n  shift\n  FORCE=0\n  if [ \"$1\" = \"-force\" ]; then\n    shift\n    FORCE=1\n  fi\n\n  \"$_RUNJAVA\" $JAVA_OPTS $CATALINA_OPTS \\\n    -Djava.endorsed.dirs=\"$JAVA_ENDORSED_DIRS\" -classpath \"$CLASSPATH\" \\\n    -Dcatalina.base=\"$CATALINA_BASE\" \\\n    -Dcatalina.home=\"$CATALINA_HOME\" \\\n    -Djava.io.tmpdir=\"$CATALINA_TMPDIR\" \\\n    org.apache.catalina.startup.Bootstrap \"$@\" stop\n------------------\n\nThis makes impossible using JMX agent/jconsole as well as other tools which rely\non socket listening.\n\nI'm not sure if catalina.bat does the same thing...\n\nI guess the latest 5.5.X version of catalina.sh (and probably .bat) shall be\nmerged into 6.6.X tree..."}, {"count": 1, "tags": [], "bug_id": 42951, "text": "Thanks for reporting this.\nFixed in revision r558523 for TC 6.0.15.\nAlso ported to trunk and 5.0.x.", "id": 105830, "time": "2007-07-22T11:39:18Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2007-07-22T11:39:18Z", "is_private": false, "attachment_id": null}]