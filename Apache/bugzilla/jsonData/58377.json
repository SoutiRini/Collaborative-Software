[{"count": 0, "tags": [], "bug_id": 58377, "attachment_id": null, "id": 185137, "time": "2015-09-12T07:45:00Z", "creator": "yilong.li@runtimeverification.com", "creation_time": "2015-09-12T07:45:00Z", "is_private": false, "text": "Reported by RV-Predict (a dynamic race detector) when running the test suite:\nData race on field org.apache.coyote.http11.AbstractHttp11Processor.keepAlive: {{{\n    Concurrent write in thread T39 (locks held: {})\n ---->  at org.apache.coyote.http11.AbstractHttp11Processor.prepareResponse(AbstractHttp11Processor.java:1547)\n        at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:740)\n        at org.apache.coyote.Response.action(Response.java:179)\n        at org.apache.coyote.http11.AbstractOutputBuffer.doWrite(AbstractOutputBuffer.java:249)\n        at org.apache.coyote.Response.doWrite(Response.java:503)\n        at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:388)\n        at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:315)\n        at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:418)\n        at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:406)\n        at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:97)\n        at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:90)\n        at org.apache.catalina.connector.TestCoyoteAdapter$AsyncServlet$1.run(TestCoyoteAdapter.java:387)\n    T39 is created by T38\n        at org.apache.catalina.connector.TestCoyoteAdapter$AsyncServlet.doGet(TestCoyoteAdapter.java:409)\n\n    Concurrent read in thread T38 (locks held: {Monitor@c32a9c3})\n ---->  at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1097)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\n        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:277)\n        - locked Monitor@c32a9c3 at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:259) \n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    T38 is created by T36\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:1010)\n}}}\n\n\nData race on field org.apache.coyote.http11.AbstractHttp11Processor.keepAlive: {{{\n    Concurrent write in thread T39 (locks held: {})\n ---->  at org.apache.coyote.http11.AbstractHttp11Processor.prepareResponse(AbstractHttp11Processor.java:1547)\n        at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:740)\n        at org.apache.coyote.Response.action(Response.java:179)\n        at org.apache.coyote.http11.AbstractOutputBuffer.doWrite(AbstractOutputBuffer.java:249)\n        at org.apache.coyote.Response.doWrite(Response.java:503)\n        at org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:388)\n        at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:315)\n        at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:418)\n        at org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:406)\n        at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:97)\n        at org.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:90)\n        at org.apache.catalina.connector.TestCoyoteAdapter$AsyncServlet$1.run(TestCoyoteAdapter.java:387)\n    T39 is created by T38\n        at org.apache.catalina.connector.TestCoyoteAdapter$AsyncServlet.doGet(TestCoyoteAdapter.java:409)\n\n    Concurrent read in thread T38 (locks held: {Monitor@c32a9c3})\n ---->  at org.apache.coyote.http11.Http11Processor.breakKeepAliveLoop(Http11Processor.java:190)\n        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1172)\n        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\n        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:277)\n        - locked Monitor@c32a9c3 at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:259) \n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    T38 is created by T36\n        at java.util.concurrent.ThreadPoolExecutor.addWorker(ThreadPoolExecutor.java:1010)\n}}}"}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "This has been fixed in trunk and 8.0.x for 8.0.27 onwards.", "id": 185238, "time": "2015-09-14T20:23:38Z", "bug_id": 58377, "creation_time": "2015-09-14T20:23:38Z", "is_private": false}]