[{"count": 0, "tags": [], "text": "Hi,\n\nI have created a custom tag library class that I want to include in my JSP web \napplication. The class and TLD compiled fine, but after putting a test tag in \nmy JSP page, Tomcat displays the following exception:\n\nexception \n\njavax.servlet.ServletException: javax.servlet.jsp.tagext.TagInfo.<init>\n(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljavax/\nservlet/jsp/tagext/TagLibraryInfo;Ljavax/servlet/jsp/tagext/TagExtraInfo;\n[Ljavax/servlet/jsp/tagext/TagAttributeInfo;Ljava/lang/String;Ljava/lang/String;\nLjava/lang/String;[Ljavax/servlet/jsp/tagext/TagVariableInfo;Z)V\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:244)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.dispatchToUrl\n(StudentAppFormServlet.java:249)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.actionDefaultHand\nler(StudentAppFormServlet.java:149)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.doGet\n(StudentAppFormServlet.java:81)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\n\nroot cause \n\njava.lang.NoSuchMethodError: javax.servlet.jsp.tagext.TagInfo.<init>\n(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljavax/\nservlet/jsp/tagext/TagLibraryInfo;Ljavax/servlet/jsp/tagext/TagExtraInfo;\n[Ljavax/servlet/jsp/tagext/TagAttributeInfo;Ljava/lang/String;Ljava/lang/String;\nLjava/lang/String;[Ljavax/servlet/jsp/tagext/TagVariableInfo;Z)V\n\torg.apache.jasper.compiler.TagLibraryInfoImpl.createTagInfo\n(TagLibraryInfoImpl.java:435)\n\torg.apache.jasper.compiler.TagLibraryInfoImpl.parseTLD\n(TagLibraryInfoImpl.java:248)\n\torg.apache.jasper.compiler.TagLibraryInfoImpl.<init>\n(TagLibraryInfoImpl.java:162)\n\torg.apache.jasper.compiler.Parser.parseTaglibDirective(Parser.java:418)\n\torg.apache.jasper.compiler.Parser.parseDirective(Parser.java:483)\n\torg.apache.jasper.compiler.Parser.parseElements(Parser.java:1539)\n\torg.apache.jasper.compiler.Parser.parse(Parser.java:126)\n\torg.apache.jasper.compiler.ParserController.doParse\n(ParserController.java:220)\n\torg.apache.jasper.compiler.ParserController.parse\n(ParserController.java:101)\n\torg.apache.jasper.compiler.Compiler.generateJava(Compiler.java:203)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:470)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:451)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:439)\n\torg.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:511)\n\torg.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:295)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.dispatchToUrl\n(StudentAppFormServlet.java:249)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.actionDefaultHand\nler(StudentAppFormServlet.java:149)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.doGet\n(StudentAppFormServlet.java:81)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\nSome other newsgroups claim that this looks like a JAR file version mismatch. I \ndownloaded the Tomcat installation from the jakarta.apache.org website and have \nnot added any new JARs. This was not an upgrade. Can someone please look into \nthis?\n\nThanks,\n\nKelly", "attachment_id": null, "id": 63612, "creator": "kakins@wmsco.com", "time": "2004-09-15T18:03:04Z", "bug_id": 31249, "creation_time": "2004-09-15T18:03:04Z", "is_private": false}, {"count": 1, "tags": [], "creator": "yoavs@computer.org", "is_private": false, "id": 63616, "creation_time": "2004-09-15T18:21:59Z", "time": "2004-09-15T18:21:59Z", "bug_id": 31249, "text": "So you only have one JSP API jar?  You're not bundling jsp.jar, j2ee.jar, or \nanother jar with the JSP API classes in your webapp?", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 31249, "attachment_id": null, "id": 63629, "time": "2004-09-15T20:59:48Z", "creator": "kin-man.chung@sun.com", "creation_time": "2004-09-15T20:59:48Z", "is_private": false, "text": "The missing constructor in TagInfo is new in Tomcat 5.  Looks like you are\nlinking compiled (in Tomcat 5) JSP code with Tomcat 4 library.  Try removing any\ntomcat 4 jar files and any generated files."}, {"count": 3, "tags": [], "creator": "kakins@wmsco.com", "is_private": false, "text": "Actually we have not JARed up any packages as of yet. I did a file search and \ndid not find any apparent duplicates or conflicts. I am thinking about \ninstalling Tomcat on my system at home and trying it out without adding any JAR \nfiles or CLASS files period. I did realize that I did download several JAR \nfiles for PDF generation and JSF. I think I'll rename these files to something \nlike __.javajar to keep Java from recognizing them.\n\nUnless these JAR files have Tomcat 4.0 versions of JSP-API in them, I don't \nknow where the conflicts are. I may try to remove all of the JAR files in the \nTomcat directories and reinstall it to make sure that packaged JARs are \nreinstalled freshly.\n\nThanks. I'll keep you posted.\n\nKelly\n\n", "id": 63663, "time": "2004-09-16T13:59:07Z", "bug_id": 31249, "creation_time": "2004-09-16T13:59:07Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 31249, "attachment_id": null, "is_private": false, "id": 63752, "time": "2004-09-17T18:14:29Z", "creator": "kakins@wmsco.com", "creation_time": "2004-09-17T18:14:29Z", "text": "It actually appears to be an out-of-date servlet.jar in the Java SDK. I changed \nthe Java Home path in the Tomcat Configuration program to the JRE installed by \nTomcat (\\Program Files\\Java\\jre..) and the NoSuchMethodException has \ndisappeared.\n\nHowever I am now receiving another exception:\n\nexception \n\njavax.servlet.ServletException: javax/servlet/jsp/tagext/TagSupport\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:244)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.dispatchToUrl\n(StudentAppFormServlet.java:251)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.actionDefaultHand\nler(StudentAppFormServlet.java:149)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.doGet\n(StudentAppFormServlet.java:81)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:689)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\n\nroot cause \n\njava.lang.NoClassDefFoundError: javax/servlet/jsp/tagext/TagSupport\n\tjava.lang.ClassLoader.defineClass0(Native Method)\n\tjava.lang.ClassLoader.defineClass(Unknown Source)\n\tjava.security.SecureClassLoader.defineClass(Unknown Source)\n\tjava.net.URLClassLoader.defineClass(Unknown Source)\n\tjava.net.URLClassLoader.access$100(Unknown Source)\n\tjava.net.URLClassLoader$1.run(Unknown Source)\n\tjava.security.AccessController.doPrivileged(Native Method)\n\tjava.net.URLClassLoader.findClass(Unknown Source)\n\tjava.lang.ClassLoader.loadClass(Unknown Source)\n\tsun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n\tjava.lang.ClassLoader.loadClass(Unknown Source)\n\torg.apache.catalina.loader.WebappClassLoader.loadClass\n(WebappClassLoader.java:1255)\n\torg.apache.catalina.loader.WebappClassLoader.loadClass\n(WebappClassLoader.java:1189)\n\torg.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1316)\n\torg.apache.jasper.compiler.Parser.parseElements(Parser.java:1560)\n\torg.apache.jasper.compiler.Parser.parse(Parser.java:126)\n\torg.apache.jasper.compiler.ParserController.doParse\n(ParserController.java:220)\n\torg.apache.jasper.compiler.ParserController.parse\n(ParserController.java:101)\n\torg.apache.jasper.compiler.Compiler.generateJava(Compiler.java:203)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:470)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:451)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:439)\n\torg.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:511)\n\torg.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:295)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.dispatchToUrl\n(StudentAppFormServlet.java:251)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.actionDefaultHand\nler(StudentAppFormServlet.java:149)\n\tcom.cetacademicprograms.servlets.StudentAppFormServlet.doGet\n(StudentAppFormServlet.java:81)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:689)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\n\nThe class javax.servlet.jsp.tagext.TagSupport is in the jsp-api.jar and I have \nverified that the JAR exists and have put in the Java Classpath field in the \nTomcat Configuration program. I have copied and unJARed the jsp-api.jar file \nunder my WEB-INF/classes folder and still the same error occurs? Does anyone \nhave a clue?\n\nThanks,\n\nKelly"}, {"count": 5, "tags": [], "text": "\"servlet.jar in the Java SDK\"?  This makes no sense to me, unless you are\ntalking about a really old j2ee SDK.  Anyway, jsp-api.jar is already in\ncommon/lib, and you need not make a copy of it and include it in your application.\n\nBugzilla is not the place to ask for help for debugging you application.  If you\ncan come up with a simple test case that does not include any jars, I'll look at it.", "attachment_id": null, "id": 63754, "creator": "kin-man.chung@sun.com", "time": "2004-09-17T18:41:48Z", "bug_id": 31249, "creation_time": "2004-09-17T18:41:48Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 31249, "attachment_id": null, "id": 63755, "time": "2004-09-17T19:17:11Z", "creator": "kakins@wmsco.com", "creation_time": "2004-09-17T19:17:11Z", "is_private": false, "text": "I am not asking for technical help in debugging my application, only for \nanswers to why Tomcat is acting very weird. If you are not interested in \nhelping then I'll look for help elsewhere or possibly look for an alternative \nto Tomcat. \n\nI downloaded the newest version of the JSDK from Sun (1.4.2-03) and uninstalled \nthe older. I believe I had an out-of-date version that Tomcat was running on.\n\nYes, the Java SDK downloaded at Sun's website contains a servlet-api.jar under \nthe jre/lib/ext directory. The old version had a servlet.jar file instead. I \napologize for not realizing earlier that the JSDK was too old. But this does \nnot explain Tomcat not being able to find a class within its own libraries. \nOther JSP pages (that do not rely on custom taglibs) compile and run just fine."}, {"count": 7, "tags": [], "bug_id": 31249, "attachment_id": null, "id": 63756, "time": "2004-09-17T19:42:44Z", "creator": "kakins@wmsco.com", "creation_time": "2004-09-17T19:42:44Z", "is_private": false, "text": "I apologize again. I believe the servlet-api.jar I copied to the JSDK directory \nwas not removed during the removal of the older JDK version and was just left \nwith the new files. But, I am giving up on the taglib idea and using a \ndifferent (slightly messier) way of doing what I intended. It seems that the \nproblem has to do with the Tomcat and the classpath variable. This is just too \nfrustating (and a waste of a lot of time) to keep pursuing.\n\nThanks for you help.\n"}, {"count": 8, "tags": [], "bug_id": 31249, "attachment_id": null, "id": 64877, "time": "2004-10-10T14:28:06Z", "creator": "remm@apache.org", "creation_time": "2004-10-10T14:28:06Z", "is_private": false, "text": "Bad resolution."}]