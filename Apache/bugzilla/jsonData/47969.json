[{"count": 0, "tags": [], "bug_id": 47969, "attachment_id": 24367, "id": 131018, "time": "2009-10-09T00:46:30Z", "creator": "dhorwitz@gmail.com", "creation_time": "2009-10-09T00:46:30Z", "is_private": false, "text": "Created attachment 24367\nFix 4 problematic equals statements\n\nThere are 4 equals methods in the org.apache.ss package\nthat show the same broken pattern. They assume that they are being passed\nnon-null values of the same Class. The attached patch fixes these.\n\nThe classes affected are:\njava/org/apache/poi/ss/formula/eval/forked/ForkedEvaluationSheet.java\norg/apache/poi/ss/formula/FormulaUsedBlankCellSet.java\njava/org/apache/poi/ss/formula/PlainCellCache.java\njava/org/apache/poi/ss/util/MutableFPNumber.java"}, {"count": 1, "tags": [], "creator": "josh@apache.org", "attachment_id": null, "text": "I guess these 'problems' were also found by an automated code checker.  Actually, all four equals() methods were optimised for performance, knowing that the instanceof check is not needed.  Note that none of the classes is public.  I am pretty sure it is impossible to get a CCE or NPE from any of these methods, no matter how you exercise POI.\n\nNonetheless, there's value in making it clear that code is not broken, so I have added \"assert obj instanceof <MyKeyClass>\" statements to three of the equals method, and deleted one which was unused (svn r824972 ). This change should have negligible performance impact and should also suppress the code checker warning.", "id": 131116, "time": "2009-10-13T16:39:04Z", "bug_id": 47969, "creation_time": "2009-10-13T16:39:04Z", "is_private": false}]