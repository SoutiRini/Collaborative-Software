[{"count": 0, "tags": [], "creator": "prahalad.prabhakar@sap.com", "is_private": false, "text": "Hi,\n\nWhen we deploy a web application which has a \"#\" symbol in its name (eg . SAPBI#BOE ) in the webapps folder , until tomcat 7.0.67 , it would automatically replace the \"#\" symbol with the \"_\" symbol (ie SAPBI_BOE) in the work folder.\n\nAlso while accessing the URL as <localhost>:<port>/SAPBI/BOE it would successfully be mapped to the SAPBI_BOE folder in work directory.\n\nHowever the same isn't being observed from Tomcat 8. In all the newer versions of Tomcat (ie. 8 onwards and even on 9 ) the webapps and work direcotry have the same name.\n\nThis is causing our application deployment to Fail.\n\nHowever , if we rename the same web application as SAPBI_BOE in the webapps folder , it creates the same folder in work and it is accessible via the URL : <localhost>:<port>/SAPBI_BOE.\n\nAttaching a sample war file for reference. Kindly copy the same to webapps folder and restart tomcat 8.0.1 and above.\n\n\nThanks,\nPrahalad.\nSAP Business Objects", "id": 194785, "time": "2016-11-02T20:05:30Z", "bug_id": 60333, "creation_time": "2016-11-02T20:05:30Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "is_private": false, "count": 1, "id": 194806, "time": "2016-11-03T20:16:38Z", "bug_id": 60333, "creation_time": "2016-11-03T20:16:38Z", "text": "No sample WAR has been provided.\n\nAn application should not be making any assumptions about the name, location or accessibility of the work directory.\n\nI have performed a quick test and web applications that contain a '#' are handled correctly."}, {"count": 2, "attachment_id": null, "bug_id": 60333, "is_private": false, "id": 194807, "time": "2016-11-03T20:40:49Z", "creator": "prahalad.prabhakar@sap.com", "creation_time": "2016-11-03T20:40:49Z", "tags": [], "text": "Hi,\n\nDue to larger file size the war didn't upload properly.\nKindly use the following URL for the sample war file - \n\nhttps://drive.google.com/file/d/0B98HdOP1i77Fd3NSNjVOd0RnbXM/view?usp=sharing\n\n\nUpon placing the war file namely GTC#bridge.war in webapps , it first unpacks the war with its contents with the exact same name.\n\nNext in work folder it created a folder with same name ( GTC#bridge ).\n\nHowever the same is not observed in tomcat 7.0.67.\n\nOnly from versions 8.0.1 onwards this is seen.\n\nWhile placing the same war in tomcat 7.0.67 it unpacks the war with the same name in webapps.\n\nBut in work folder , it renames the folder from GTC#bridge to GTC_bridge with the exact same contents.\n\nHerein lies what i preceive is the bug."}, {"count": 3, "tags": [], "bug_id": 60333, "text": "Tomcat is free to structure the work directory any way it pleases. The 8.0.x behaviour is by design.", "id": 194808, "time": "2016-11-03T20:44:17Z", "creator": "markt@apache.org", "creation_time": "2016-11-03T20:44:17Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "Hi\n\nThat's is a fair point you have made . \n\nLet me lay a little context here, as to how this design change is impacting us.\n\nWe use Equinox OSGI packages within our war for creating self sustained components.\n\nEquinox OSGI however has a restriction on the folder name with the special charecter ( the likes of % and # ) and each time it encounters these charecters it would not begin and hence cause none of our components to load leading a failure of deployment.\n\nHowever since until tomcat 7.0.67 the application folder name in work directory automatically replaced the '#' with an \"_\" it did not cause any problems.\n\nHowever with the new design in tomcat 8.0.1 onwards this behavior is not observed causing our application to fail.\n\nKindly provide us an official release notes in this regard.\n\nThanks,\nPrahalad.", "is_private": false, "bug_id": 60333, "id": 194809, "time": "2016-11-03T20:57:03Z", "creator": "prahalad.prabhakar@sap.com", "creation_time": "2016-11-03T20:57:03Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 60333, "text": "It is in the 8.0.x changelog. Bug 54708.\n\nPlease stop re-opening this issue. The implementation isn't going to change. The primary reason is that using '_' has the potential for conflicts since foo_bar.war is a valid WAR name and that would conflict with foo#bar.war if '#' was replaced with '_'\n\nIf Equinox can't handle file paths with '#' (I suspect because those characters need to be encoded in URLs) then that is a bug that needs to be fixed in Equinox.", "id": 194810, "time": "2016-11-03T21:09:39Z", "creator": "markt@apache.org", "creation_time": "2016-11-03T21:09:39Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 60333, "is_private": false, "id": 194811, "time": "2016-11-03T21:16:24Z", "creator": "chris@christopherschultz.net", "creation_time": "2016-11-03T21:16:24Z", "tags": [], "text": "One weird consequence of using # in path names is just that: if they are used in URLs (e.g. ClassLoader.getResource()), they can fail because the # does funny things. I haven't done extensive testing, but I would hope at least that ServletContext.getResource() would return a URL that does not throw an error or fail to load the file due to a # present in the path."}, {"count": 7, "attachment_id": null, "bug_id": 60333, "is_private": false, "id": 194812, "time": "2016-11-03T21:25:02Z", "creator": "prahalad.prabhakar@sap.com", "creation_time": "2016-11-03T21:25:02Z", "tags": [], "text": "Thanks for the speedy updates."}]