[{"count": 0, "tags": [], "bug_id": 52763, "attachment_id": null, "text": "The BlockLayoutManager throws an NPE in the line \n\n\nFontTriplet[] fontkeys = getBlockFO().getCommonFont().getFontState(fi);\nin the initialize() method when the marker contains fo:block/fo:list-block:\n\n  <fo:flow flow-name=\"xsl-region-body\">\n<fo:block><fo:marker\n    marker-class-name=\"message\"><fo:block>\nWARNING: Page sequence contains:  <fo:page-number-citation\nref-id=\"end-seq1\"/> pages.\n    </fo:block>\n<fo:block>\n  <fo:list-block><fo:list-item><fo:list-item-label><fo:block font-weight=\"bold\" color=\"black\">NOTE:</fo:block>\n  </fo:list-item-label>\n    <fo:list-item-body start-indent=\"0.5in\"><fo:block text-align=\"left\" color=\"black\">This manual supersedes TM PUBNAME-00 dated 15 December 2004. Zero in the \"Change No.\" column indicates an original page or work package.</fo:block>\n    </fo:list-item-body>\n  </fo:list-item>\n  </fo:list-block>\n  </fo:block>\n\n\n</fo:marker>\n  </fo:block>\n\nThe reason is that the layout manager tries to set itself up using the properties of the block. However the block is not bound to the property list, because the inMarker() function returns true for such a block:\n\n\nFObj.java\n\n    public void processNode(String elementName, Locator locator,\n                            Attributes attlist, PropertyList pList)\n                    throws FOPException {\n        setLocator(locator);\n        pList.addAttributesToList(attlist);\n        if (!inMarker()\n                || \"marker\".equals(elementName)) {\n            pList.setWritingMode();\n            bind(pList);\n        }\n\nThus the block contains all empty fields and attempt to retrieve them causes an NPE.\n\nDon't know if it has been resolved in FOP 1.1", "id": 154128, "time": "2012-02-24T21:12:03Z", "creator": "ilia@siberlogic.com", "creation_time": "2012-02-24T21:12:03Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 52763, "text": "resetting P2 open bugs to P3 pending further review", "id": 157407, "time": "2012-04-07T01:42:34Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:42:34Z", "is_private": false, "attachment_id": null}, {"count": 2, "text": "please provide (1) a minimal input FO file, (2) any produced output file, (3) full console output", "bug_id": 52763, "attachment_id": null, "id": 157652, "time": "2012-04-08T04:43:20Z", "creator": "gadams@apache.org", "creation_time": "2012-04-08T04:43:20Z", "tags": [], "is_private": false}, {"count": 3, "text": "Created attachment 28583\nThis is the test fo file on which the problem can be reproduced.\n\nA modification of the hide.fo from samples.The only change is addition of list block to the marker.", "bug_id": 52763, "is_private": false, "id": 157938, "time": "2012-04-11T13:12:41Z", "creator": "ilia@siberlogic.com", "creation_time": "2012-04-11T13:12:41Z", "tags": [], "attachment_id": 28583}, {"count": 4, "tags": [], "creator": "ilia@siberlogic.com", "text": "Created attachment 28584\nOutput from the fop processor.\n\nfop 1.0 was used to process the fo.", "id": 157939, "time": "2012-04-11T13:13:59Z", "bug_id": 52763, "creation_time": "2012-04-11T13:13:59Z", "is_private": false, "attachment_id": 28584}, {"count": 5, "tags": [], "creator": "ilia@siberlogic.com", "text": "Information provided.", "id": 157941, "time": "2012-04-11T13:15:40Z", "bug_id": 52763, "creation_time": "2012-04-11T13:15:40Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 52763, "attachment_id": 28587, "id": 157956, "time": "2012-04-11T19:01:44Z", "creator": "gadams@apache.org", "creation_time": "2012-04-11T19:01:44Z", "is_private": false, "text": "Created attachment 28587\nminimal FO test file"}, {"count": 7, "tags": [], "creator": "gadams@apache.org", "attachment_id": null, "id": 157964, "time": "2012-04-11T21:31:24Z", "bug_id": 52763, "creation_time": "2012-04-11T21:31:24Z", "is_private": false, "text": "http://svn.apache.org/viewvc?rev=1325016&view=rev"}]