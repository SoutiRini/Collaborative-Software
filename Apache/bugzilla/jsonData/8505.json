[{"count": 0, "tags": [], "bug_id": 8505, "text": "Hi,\n\nI received different output if my code runs on a windows platform or on an unix \nplatform.\n\nHere is the configuration file that i use :\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\">\n<log4j:configuration xmlns:log4j=\"http://jakarta.apache.org/log4j/\">\n\n\t<appender name=\"console\" class=\"org.apache.log4j.ConsoleAppender\">\n\t\t<param name=\"target\" value=\"System.out\"/>\n\t\t<layout class=\"org.apache.log4j.PatternLayout\">\n\t\t\t<param name=\"ConversionPattern\" value=\"[%d{dd/MM/yy \nHH:mm:ss,SSS} %C{1}:%M:%L] %m%n\"/>\n\t\t</layout>\n\t</appender>\n\t<root>\n\t\t<priority value=\"info\"/>\n\t\t<appender-ref ref=\"console\"/>\n\t</root>\n\n</log4j:configuration>\n\nThe code that generates the log :\n\npublic class TagUtils {\n\n\tprivate static final Category cat = Category.getInstance\n(TagUtils.class);\n\n\tpublic static String getExceptionUserMessage(Exception e) {\n\t\t...\n\t\tcat.info(\"Detail of that exception is : \" + e.toString(),e);\n\t\t...\n\t}\n\n}\n\nThe output that i received on windows platform :\n\n[24/04/02 10:58:32,037 TagUtils:getExceptionUserMessage:115] Detail of that \nexception is : java.lang.NullPointerException\njava.lang.NullPointerException\n\tat java.util.Hashtable.containsKey(Hashtable.java:299)\n\tat com.banksys.controller.TreeController.uniqueId\n(TreeController.java:56)\n\tat com.banksys.controller.TreeController.makeTree\n(TreeController.java:157)\n\tat com.banksys.controller.TreeController.generateTree\n(TreeController.java:474)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat com.banksys.controller.BanksysServlet.doIt(BanksysServlet.java:151)\n\tat com.banksys.controller.BanksysServlet.doGet(BanksysServlet.java:101)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:195)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:309)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:336)\n\tat com.evermind.server.http.ServletRequestDispatcher.invoke\n(ServletRequestDispatcher.java:508)\n\tat com.evermind.server.http.ServletRequestDispatcher.include\n(ServletRequestDispatcher.java:94)\n\tat com.evermind.server.http.GetParametersRequestDispatcher.include\n(GetParametersRequestDispatcher.java:76)\n\tat oracle.jsp.runtime.OraclePageContext.include\n(OraclePageContext.java:488)\n\tat _businessbeat._TreeBuilder._jspService(_TreeBuilder.java:52)\n\tat oracle.jsp.runtime.HttpJsp.service(HttpJsp.java:119)\n\tat oracle.jsp.app.JspApplication.dispatchRequest\n(JspApplication.java:389)\n\tat oracle.jsp.JspServlet.doDispatch(JspServlet.java:265)\n\tat oracle.jsp.JspServlet.internalService(JspServlet.java:184)\n\tat oracle.jsp.JspServlet.service(JspServlet.java:154)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:336)\n\tat com.evermind.server.http.ServletRequestDispatcher.invoke\n(ServletRequestDispatcher.java:508)\n\tat com.evermind.server.http.ServletRequestDispatcher.forwardInternal\n(ServletRequestDispatcher.java:177)\n\tat com.evermind.server.http.HttpRequestHandler.processRequest\n(HttpRequestHandler.java:576)\n\tat com.evermind.server.http.HttpRequestHandler.run\n(HttpRequestHandler.java:189)\n\tat com.evermind.util.ThreadPoolThread.run(ThreadPoolThread.java:62)\n\nThe output i received on unix platform :\n\n[24/04/2002 09:40:01,444 getExceptionUserMessage (TagUtils:java:115) :115) (pc \n232] Detail of that exception is : java.lang.NullPointerException\njava.lang.NullPointerException\n\n\nSo i received no stacktrace on the unix platform. The layout of the message is \nalso not the same as on the windows platform.\nWhat can i do to solve this problem?\n\nThanks.", "id": 14701, "time": "2002-04-25T09:25:28Z", "creator": "fabrice.claes@inno.com", "creation_time": "2002-04-25T09:25:28Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 8505, "text": "\nPrinting exception is one of the basic features of log4j. I am marking this\nbug as WORKSFORME unless you can reproduce it with a small program on your UNIX\nplatform. Which UNIX platform is it by the way?", "id": 14712, "time": "2002-04-25T12:54:42Z", "creator": "ceki@apache.org", "creation_time": "2002-04-25T12:54:42Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": 1697, "creator": "fabrice.claes@inno.com", "is_private": false, "id": 14731, "time": "2002-04-25T14:26:07Z", "bug_id": 8505, "creation_time": "2002-04-25T14:26:07Z", "tags": [], "text": "Created attachment 1697\nsource"}, {"count": 3, "tags": [], "bug_id": 8505, "is_private": false, "text": "Created attachment 1698\nOutput", "id": 14732, "time": "2002-04-25T14:26:50Z", "creator": "fabrice.claes@inno.com", "creation_time": "2002-04-25T14:26:50Z", "attachment_id": 1698}, {"count": 4, "attachment_id": null, "creator": "fabrice.claes@inno.com", "is_private": false, "id": 14734, "time": "2002-04-25T14:27:43Z", "bug_id": 8505, "creation_time": "2002-04-25T14:27:43Z", "tags": [], "text": "The platform is Compaq tru64 unix v 5.1 on Alpha. I reproduced the problem with \na small program on the unix platform. I send you attached the program source, \nthe configuration file and the outputs (on windows and on unix). Version of \nLog4J is 1.3.1"}, {"count": 5, "attachment_id": 1699, "creator": "fabrice.claes@inno.com", "is_private": false, "id": 14735, "time": "2002-04-25T14:28:41Z", "bug_id": 8505, "creation_time": "2002-04-25T14:28:41Z", "tags": [], "text": "Created attachment 1699\nConfiguration"}, {"count": 6, "tags": [], "bug_id": 8505, "is_private": false, "text": "Created attachment 1700\nOutput on windows", "id": 14736, "time": "2002-04-25T14:29:14Z", "creator": "fabrice.claes@inno.com", "creation_time": "2002-04-25T14:29:14Z", "attachment_id": 1700}, {"count": 7, "tags": [], "creator": "ceki@apache.org", "is_private": false, "id": 15673, "attachment_id": null, "bug_id": 8505, "creation_time": "2002-05-07T21:30:07Z", "time": "2002-05-07T21:30:07Z", "text": "\nWhat happens if you change \n\n<param name=\"ConversionPattern\" value=\"[%d{dd/MM/yy HH:mm:ss,SSS} %C{1}:%M:%L] %\nm%n\"/>\n\nto \n\n<param name=\"ConversionPattern\" value=\"[%d{dd/MM/yy HH:mm:ss,SSS}] %m%n\"/>\n\nCan you please try that? Thanks, Ceki"}, {"count": 8, "attachment_id": 1919, "bug_id": 8505, "text": "Created attachment 1919\nExample that solves the stacktrace problem", "id": 16582, "time": "2002-05-23T09:51:12Z", "creator": "espen@cellus.no", "creation_time": "2002-05-23T09:51:12Z", "tags": [], "is_private": false}, {"count": 9, "attachment_id": null, "bug_id": 8505, "text": "Hello!\n\nI've had the same problem! I've made a patch that works for Tru64 Unix 4.0F\nJava versions 1.2.2, 1.3.1 and 1.4.0b\n\nThe problem lies in \norg.apache.log4j.spi.ThrowableInformation\nor more accurate the PrintWriter defined in \norg.apache.log4j.spi.ThrowableInformation's source file.\n\nCheck attachment (id=1919)\n\nEspen", "id": 16583, "time": "2002-05-23T09:52:15Z", "creator": "espen@cellus.no", "creation_time": "2002-05-23T09:52:15Z", "tags": [], "is_private": false}, {"count": 10, "tags": [], "bug_id": 8505, "attachment_id": null, "text": "\nLooking at your implementation of ThrowableInformation, the major\ndifference I see is that you are implementing the various write\nmethods of PrintWriter such as\n\n  write(char[] chars)\n  write(char[] chars, int off, int len)\n  write(String s, int off, int len)\n  write(String s)\n\nAre you sure these methods are being called? Are all them called? If\nnot which ones are not?\n\nIs the println() method ever called?\n\nI don't think using ListArray is of fundamental importance in fixing\nthis bug. Do you?\n\nThank you for your assistance in fixing this bug, Ceki\n\n", "id": 16639, "time": "2002-05-24T12:26:07Z", "creator": "ceki@apache.org", "creation_time": "2002-05-24T12:26:07Z", "is_private": false}, {"count": 11, "tags": [], "creator": "espen@cellus.no", "attachment_id": null, "is_private": false, "id": 16640, "time": "2002-05-24T12:52:03Z", "bug_id": 8505, "creation_time": "2002-05-24T12:52:03Z", "text": "I made quite a while ago so I can't remember which of the methods that are \ncalled, but I think it is:  write(String)\n\nThe println() I'm not sure of, sorry!\n\nYou're right, ArrayList was just what I used. It has nothing to do with the \nproblem.\n\nEspen"}, {"count": 12, "tags": [], "creator": "ceki@apache.org", "attachment_id": null, "is_private": false, "id": 24171, "time": "2002-10-09T00:31:48Z", "bug_id": 8505, "creation_time": "2002-10-09T00:31:48Z", "text": "\nThis bug was fixed in log4j 1.2.3 or so."}]