[{"count": 0, "tags": [], "creator": "kt@webmedia.ee", "attachment_id": null, "id": 47720, "time": "2003-11-20T17:27:08Z", "bug_id": 24868, "creation_time": "2003-11-20T17:27:08Z", "is_private": false, "text": "About a second or 2 passes between the moment when I type \"ant\" on the command \nline and Ant begins building the first target.\nI've taken a look into the code and found that most of this time is being spent \nin the org.apache.tools.ant.Project.init() method, more specifically - in the \nfirst part of it, where Ant loads and initializes the default tasks specified \nin \n/org/apache/tools/ant/taskdefs/defaults.properties\n\nRemoving some of the tasks I didn't use from that file I managed to reduce the \ntime to load from 1.5 seconds to 0.2 seconds. Though probably not a serious \nachievement, such a speedup made using Ant much more comfortable. \nSo I thought that it would be nice to \neither:\n\n  a) Not initialize all the default tasks on Project.init(), but only when a \nparticular task is used\n\nor\n\n  b) Allow the user to provide a custom \"defaults.properties\" file with only \nthe tasks he uses in his project."}, {"count": 1, "tags": [], "bug_id": 24868, "text": "or \nc) Use lazily loaded antlibs and remove loading of all optional tasks\nfrom the initial loading.\ndefault.properties would just match a task-name to the antlib that must be\nloaded in order to gain access to the task.\n", "id": 47724, "time": "2003-11-20T18:30:37Z", "creator": "j_a_fernandez@yahoo.com", "creation_time": "2003-11-20T18:30:37Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "kt@webmedia.ee", "text": "Ant by the way the solution I currently ended up with was to create a directory \nSOME_DIR/org/apache/tools/ant/taskdefs/,\nPut the desired defaults.properties there and ensure SOME_DIR is before ant.jar \non the classpath when ant is run.\nThis is still ugly, but better than modifying the JAR.\n", "id": 47725, "time": "2003-11-20T19:33:33Z", "bug_id": 24868, "creation_time": "2003-11-20T19:33:33Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 24868, "attachment_id": null, "text": "When you file a bug report, can you please specify the version of Ant you are\nusing. Ant 1.6 uses Lazy Loading of tasks so I presume you are reporting a bug\non Ant 1.5.x. Please confirm. If so, please try Ant 1.6 beta. ", "id": 47736, "time": "2003-11-20T22:30:50Z", "creator": "conor@apache.org", "creation_time": "2003-11-20T22:30:50Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 24868, "attachment_id": null, "text": "From the feel of the Pants Conor, I did not see Beta1 as any faster at startup \nthan 1.5.x... And as I reported, even with limited <import> use, I noticed it's \nactually a bit slower. --DD", "id": 47780, "time": "2003-11-21T14:54:57Z", "creator": "ddevienne@lgc.com", "creation_time": "2003-11-21T14:54:57Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 24868, "text": "I was talking about Ant 1.5.2. I've just tried Ant 1.6beta2 and seems that its \nloading time has not indeed gone shorter. The \"hacked\" 1.5 loads faster than \nthe original 1.6beta2.", "id": 47786, "time": "2003-11-21T16:07:12Z", "creator": "kt@webmedia.ee", "creation_time": "2003-11-21T16:07:12Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 24868, "attachment_id": null, "id": 47854, "time": "2003-11-21T19:21:39Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-11-21T19:21:39Z", "is_private": false, "text": "ant1.6 does use deferred loading for tasks/types\nand project.init() is now very fast.\nHowever, other parts of the system has changed.\nUsing a simple file:\n<project default=\"simple\">\n  <target name=\"simple\"/>\n</project>\ntakes on my system 0.8 seconds in 1.6 and ~1.0 in 1.5.\nLooking at the time each part takes\n            XMLReader parser = JAXPUtils.getNamespaceXMLReader();\nin PH2 takes 0.22 seconds.\nAs I am using java 1.4.2, I do not need xerces so\nI tested removining xercesImpl.jar and xml-apis.jar\nfrom $ANT_HOME/lib\nthe time taken reduced to 0.55 seconds\n"}, {"count": 7, "tags": [], "bug_id": 24868, "attachment_id": null, "text": "Marking as fixed as ant 1.6 has changed the loading from\ndefaults.properties - so the recommented change does\nnot affect it.", "id": 97423, "time": "2006-12-28T12:14:17Z", "creator": "peterreilly@apache.org", "creation_time": "2006-12-28T12:14:17Z", "is_private": false}]