[{"count": 0, "tags": [], "bug_id": 57556, "is_private": false, "text": "I have been using this \"getServletContext().getRealPath(\"/\")\" till Tomcat6 and i got the return string path ending with slash.\nFor Example getServletContext().getRealPath(\"/\") will return E:/TomcatHome/webapps/CRM/\n\nBut when I tried with Tomcat 8.0.14 I got path without slash\nFor Example getServletContext().getRealPath(\"/\") will return E:/TomcatHome/webapps/CRM\nEnding slash missing\n\nIs there anything changed in Tomcat 8 and is there any configuration I can make to get the result that I got in previous version of Tomcat, because if I have to change in code, I have to change in lot of places in all the webapps I created.", "id": 180890, "time": "2015-02-10T10:37:15Z", "creator": "ps.karthic@gmail.com", "creation_time": "2015-02-10T10:37:15Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 57556, "attachment_id": null, "id": 180891, "time": "2015-02-10T12:13:17Z", "creator": "ps.karthic@gmail.com", "creation_time": "2015-02-10T12:13:17Z", "is_private": false, "text": "I mentioned I used till Tomcat6, it is typo, I have been using this code from Tomcat5.5 to Tomcat7"}, {"count": 2, "text": "This will be the new resources implementation introduced in 8.0.x.\n\nI don't see any reason not to restore the trailing separator for a directory for backwards compatibility but I say that not having looked at the code.", "bug_id": 57556, "is_private": false, "id": 180892, "time": "2015-02-10T12:23:01Z", "creator": "markt@apache.org", "creation_time": "2015-02-10T12:23:01Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 57556, "is_private": false, "text": "(In reply to Mark Thomas from comment #2)\n> This will be the new resources implementation introduced in 8.0.x.\n> \n> I don't see any reason not to restore the trailing separator for a directory\n> for backwards compatibility but I say that not having looked at the code.\n\nMark, in that code I am just getting the path but that will be sent to another method where the file name is added dynamically or event based.\n\nIs there anyway I can make this work as it was previous without changing code.\nIf there is no workaround, then I should downgrade to Tomcat 7 .\n\nThanks\nKarthic", "id": 180900, "time": "2015-02-10T14:06:10Z", "creator": "ps.karthic@gmail.com", "creation_time": "2015-02-10T14:06:10Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 57556, "attachment_id": null, "id": 180920, "time": "2015-02-10T20:55:42Z", "creator": "markt@apache.org", "creation_time": "2015-02-10T20:55:42Z", "is_private": false, "text": "Fixed in trunk for 9.0.x and in 8.0.x for 8.0.19 onwards."}, {"count": 5, "tags": [], "text": "Tomcat 6 only returned a path with an ending slash when asking for \"/\", any other directory path does not end in a slash. So this is actually breaking backwards compatibility. In my opinion, what makes the most sense would be for it to return an ending slash only if the path requested ends in a slash, but being consistent with previous behavior is a good idea too.", "attachment_id": null, "id": 182639, "creator": "mattcoz@yahoo.com", "time": "2015-04-27T00:15:53Z", "bug_id": 57556, "creation_time": "2015-04-27T00:15:53Z", "is_private": false}, {"count": 6, "tags": [], "text": "(In reply to Matt from comment #5)\n> Tomcat 6 only returned a path with an ending slash when asking for \"/\", any\n> other directory path does not end in a slash. So this is actually breaking\n> backwards compatibility. In my opinion, what makes the most sense would be\n> for it to return an ending slash only if the path requested ends in a slash,\n> but being consistent with previous behavior is a good idea too.\n\nI tend to agree that slashes shouldn't be added to anything.\n\nBut my position is that this method should unconditionally return null.", "attachment_id": null, "id": 182657, "creator": "chris@christopherschultz.net", "time": "2015-04-27T14:29:57Z", "bug_id": 57556, "creation_time": "2015-04-27T14:29:57Z", "is_private": false}, {"count": 7, "tags": [], "creator": "chuck.caldarale@unisys.com", "attachment_id": null, "id": 182658, "time": "2015-04-27T14:32:17Z", "bug_id": 57556, "creation_time": "2015-04-27T14:32:17Z", "is_private": false, "text": "(In reply to Christopher Schultz from comment #6)\n> But my position is that this method should unconditionally return null.\n\n+1 on that.  Anyone using this method for anything other than debugging is fooling themselves."}, {"count": 8, "tags": [], "bug_id": 57556, "attachment_id": null, "id": 182707, "time": "2015-04-28T20:41:53Z", "creator": "markt@apache.org", "creation_time": "2015-04-28T20:41:53Z", "is_private": false, "text": "(In reply to Chuck Caldarale from comment #7)\n> (In reply to Christopher Schultz from comment #6)\n> > But my position is that this method should unconditionally return null.\n> \n> +1 on that.  Anyone using this method for anything other than debugging is\n> fooling themselves.\n\nIndeed but this request looks reasonable. I'll take a look."}, {"count": 9, "tags": [], "text": "Updated fix in trunk and 8.0.x for 8.0.22 onwards.", "attachment_id": null, "id": 182712, "creator": "markt@apache.org", "time": "2015-04-28T21:31:28Z", "bug_id": 57556, "creation_time": "2015-04-28T21:31:28Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 57556, "is_private": false, "id": 186108, "attachment_id": null, "creator": "james_s_ching@yahoo.com", "creation_time": "2015-10-30T08:56:25Z", "time": "2015-10-30T08:56:25Z", "text": "Is it also by design to change the behavior of ServetContext.getRealPath(\"\") (now always appended with trailing slash) and discontinue support for ServetContext.getRealPath(\".\") and its variations?\n\nIn Tomcat 7.0.41, getRealPath(\"\") returns webapp root without trailing slash, and naturally getRealPath(\"/\") comes with a trailing slash. getRealPath(\".\") returns webapp root appended with \".\", same result as getRealPath(\"/.\").  \n\nE.g. in Windows\nServletContext.getRealPath(\"\")      returns C:\\\\path\\\\to\\\\webapp\\\\root\nServletContext.getRealPath(\"/\")     returns C:\\\\path\\\\to\\\\webapp\\\\root\\\\\nServletContext.getRealPath(\".\")     returns C:\\\\path\\\\to\\\\webapp\\\\root\\\\.\nServletContext.getRealPath(\"./\")    returns C:\\\\path\\\\to\\\\webapp\\\\root\\\\.\nServletContext.getRealPath(\"/.\")    returns C:\\\\path\\\\to\\\\webapp\\\\root\\\\.\nServletContext.getRealPath(\"./foo\") returns C:\\\\path\\\\to\\\\webapp\\\\root\\\\.\\\\foo\n\nIn Tomcat 8.0.28, ServletContext.getRealPath(\"\") always contains trailing slash and getRealPath(\".\") returns null and any path starting with it.  Also counter-intuitively, getRealPath(\"/.\") returns webapp root without the trailing dot nor slash.\n\nE.g. \nServletContext.getRealPath(\"\")      returns C:\\\\path\\\\to\\\\webapp\\\\root\\\\\nServletContext.getRealPath(\"/\")     returns C:\\\\path\\\\to\\\\webapp\\\\root\\\\\nServletContext.getRealPath(\".\")     returns null\nServletContext.getRealPath(\"./\")    returns null\nServletContext.getRealPath(\"./foo\") returns null\nServletContext.getRealPath(\"/.\")    returns C:\\\\path\\\\to\\\\webapp\\\\root\n\nIs it possible to restore previous behavior as in Tomcat 7?  (This is inclusive of the reported behavior above)"}, {"count": 11, "tags": [], "text": "See bug 56890 and the SPEC bug linked there.", "attachment_id": null, "id": 186111, "creator": "markt@apache.org", "time": "2015-10-30T10:14:08Z", "bug_id": 57556, "creation_time": "2015-10-30T10:14:08Z", "is_private": false}]