[{"count": 0, "attachment_id": null, "bug_id": 8020, "text": "I have a webapp under Tomcat which includes in its WEB-INF/lib directory \nxerces.jar from Xerces-J v. 1.1.3. Whe I try to access my JSPs I get the error \nwhich is included bellow this description.Everything worked fine with Tomcat \n4.0.1 (I haven't seen it documented anywhere, but I think Tomcat 4.0.1 uses \nXerces v 1.4.3 and Tomcat 4.0.2 and 4.0.3 includes Xerces v 1.4.4).\n\nThere's an obvious workaround which is removing xerces.jar from WEB-INF/lib \n(which makes everything work fine), but shouldn't it work anyway? I understand \nJasper uses a different ClassLoader in order to have no interference from \ndifferent XML parsers used by the webapps.\n\nERROR:\n\nApache Tomcat/4.0.2 - HTTP Status 500 - Internal Server\nError\n\n\n\ntype Exception report\n\nmessage Internal Server Error\n\ndescription The server encountered an internal error (Internal Server Error) \nthat prevented it from fulfilling this request.\n\nexception \n\njavax.servlet.ServletException: Servlet.init() for servlet jsp threw exception\n        at java.lang.Throwable.fillInStackTrace(Native Method)\n        at java.lang.Throwable.fillInStackTrace(Compiled Code)\n        at java.lang.Throwable.(Compiled Code)\n        at java.lang.Exception.(Compiled Code)\n        at javax.servlet.ServletException.(Compiled Code)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(Compiled Code)\n        at org.apache.catalina.core.StandardWrapper.allocate(Compiled Code)\n        at \norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:2\n14)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at org.apache.catalina.core.StandardPipeline.invoke(Compiled Code)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at \norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:1\n90)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(Compiled Code)\n        at org.apache.catalina.core.StandardContext.invoke(Compiled Code)\n        at \norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java\n:170)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:170)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at org.apache.catalina.valves.AccessLogValve.invoke(Compiled Code)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at \norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174\n)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at org.apache.catalina.connector.http.HttpProcessor.process(Compiled \nCode)\n        at org.apache.catalina.connector.http.HttpProcessor.run(Compiled Code)\n        at java.lang.Thread.run(Compiled Code)\n\nroot cause \n\njava.lang.NoClassDefFoundError: org/w3c/dom/range/DocumentRange\n        at \norg.apache.xerces.jaxp.DocumentBuilderImpl.(DocumentBuilderImpl.java:98)\n        at \norg.apache.xerces.jaxp.DocumentBuilderFactoryImpl.newDocumentBuilder(DocumentBui\nlderFactoryImpl.java:87)\n        at org.apache.jasper.parser.ParserUtils.parseXMLDocument(Compiled Code)\n        at \norg.apache.jasper.compiler.TldLocationsCache.processWebDotXml(Compiled Code)\n        at \norg.apache.jasper.compiler.TldLocationsCache.(TldLocationsCache.java:138)\n        at \norg.apache.jasper.EmbededServletOptions.(EmbededServletOptions.java:345)\n        at org.apache.jasper.servlet.JspServlet.init(Compiled Code)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(Compiled Code)\n        at org.apache.catalina.core.StandardWrapper.allocate(Compiled Code)\n        at \norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:2\n14)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at org.apache.catalina.core.StandardPipeline.invoke(Compiled Code)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at \norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:1\n90)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(Compiled Code)\n        at org.apache.catalina.core.StandardContext.invoke(Compiled Code)\n        at \norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java\n:170)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:170)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at org.apache.catalina.valves.AccessLogValve.invoke(Compiled Code)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at \norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174\n)\n        at org.apache.catalina.core.StandardPipeline.invokeNext(Compiled Code)\n        at \norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n        at org.apache.catalina.connector.http.HttpProcessor.process(Compiled \nCode)\n        at org.apache.catalina.connector.http.HttpProcessor.run(Compiled Code)\n        at java.lang.Thread.run(Compiled Code)", "id": 13375, "time": "2002-04-12T14:56:16Z", "creator": "jserna@tid.es", "creation_time": "2002-04-12T14:56:16Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 8020, "attachment_id": null, "is_private": false, "id": 13377, "time": "2002-04-12T15:00:14Z", "creator": "remm@apache.org", "creation_time": "2002-04-12T15:00:14Z", "text": "The new code used to allow more flexibility in the XML parser handling had bugs \n(sorry about that).\n\n*** This bug has been marked as a duplicate of 6374 ***"}]