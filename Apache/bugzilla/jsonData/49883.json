[{"count": 0, "tags": [], "creator": "kevin@infofinity.com", "text": "Hi, I am running Tomcat trunk (revision 992708, 2010-09-03). I added this line to conf/logging.properties:\n\norg.apache.catalina.level=FINEST\n\nThe server fails to start with:\n\nThrowable occurred: java.lang.UnsupportedOperationException: The getName() method should never be called\n\tat org.apache.catalina.realm.CombinedRealm.getName(CombinedRealm.java:268)\n\tat org.apache.catalina.realm.RealmBase.toString(RealmBase.java:1015)\n\tat java.text.MessageFormat.subformat(MessageFormat.java:1258)\n\tat java.text.MessageFormat.format(MessageFormat.java:807)\n\tat org.apache.tomcat.util.res.StringManager.getString(StringManager.java:152)\n\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:320)\n\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:305)\n\tat org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:98)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:131)\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1020)\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:276)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:429)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:649)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:584)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:600)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:416)\njava.lang.reflect.InvocationTargetException\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:600)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:416)\nCaused by: java.lang.UnsupportedOperationException: The getName() method should never be called\n\tat org.apache.catalina.realm.CombinedRealm.getName(CombinedRealm.java:268)\n\tat org.apache.catalina.realm.RealmBase.toString(RealmBase.java:1015)\n\tat java.text.MessageFormat.subformat(MessageFormat.java:1258)\n\tat java.text.MessageFormat.format(MessageFormat.java:807)\n\tat org.apache.tomcat.util.res.StringManager.getString(StringManager.java:152)\n\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:320)\n\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:305)\n\tat org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:98)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:131)\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1020)\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:276)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:429)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:649)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:584)\n\t... 6 more\n\n\nIf I comment out that line in logging.properties, the server starts fine. Looking at the code in LifecycleBase line 320, it is a log.debug call:\n\n        if (log.isDebugEnabled()) {\n            log.debug(sm.getString(\"lifecycleBase.setState\", this, state));\n        }", "id": 139699, "time": "2010-09-04T22:58:52Z", "bug_id": 49883, "creation_time": "2010-09-04T22:58:52Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 49883, "is_private": false, "id": 139705, "time": "2010-09-05T16:43:58Z", "creator": "markt@apache.org", "creation_time": "2010-09-05T16:43:58Z", "tags": [], "text": "Thanks for the report.\n\nThis has been fixed in trunk and will be included in 7.0.3 onwards."}]