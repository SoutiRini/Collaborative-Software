[{"count": 0, "tags": [], "text": "First, I tried a very simple one from the first example of JspC task like the \nfollowing:\n\n<project name=\"jspc-test\" default=\"all\" basedir=\".\">\n\n\t<property name=\"src\" value=\"${basedir}/src\"/>\n\t<property name=\"build\" value=\"${basedir}/dist\"/>\n\n  <target name=\"all\" depends=\"clean, init, compile\"/>\n\n\t<target name=\"init\">\n\t\t<mkdir dir=\"${build}\" />\n\t</target>\n\n\n\t<target name=\"compile\">\n\t\t<jspc srcdir=\"${src}\" destdir=\"${build}\" verbose=\"9\" \ncompiler=\"jasper41\"\n\t\t>\n\t\t    <include name=\"**/*.jsp\" />\n\t\t</jspc>\n\t</target>\n\n\t<target name=\"clean\">\n\t\t<delete dir=\"${build}\" />\n\t</target>\n\n</project>\n\nHowever, it failed with this message:\n\n  [jasperc] java.lang.ArrayIndexOutOfBoundsException: 5\n  [jasperc]     at org.apache.jasper.JspC.locateUriRoot(JspC.java:628)\n  [jasperc]     at org.apache.jasper.JspC.execute(JspC.java:759)\n  [jasperc]     at org.apache.jasper.JspC.main(JspC.java:823)\n  [jasperc] Exception in thread \"main\"\n\nAnd I tried a revised one:\n\n<project name=\"jspc-test\" default=\"all\" basedir=\".\">\n\n\t<property name=\"src\" value=\"${basedir}/src\"/>\n\t<property name=\"build\" value=\"${basedir}/dist\"/>\n\n  <target name=\"all\" depends=\"clean, init, compile\"/>\n\n\t<target name=\"init\">\n\t\t<mkdir dir=\"${build}\" />\n\t</target>\n\n\n\t<target name=\"compile\">\n\t\t<jspc srcdir=\"${src}\" destdir=\"${build}\" verbose=\"9\" \ncompiler=\"jasper41\"\n\t\turiroot=\"${basedir}/webapp\"\n\t\t>\n\t\t    <include name=\"**/*.jsp\" />\n\t\t</jspc>\n\t</target>\n\n\t<target name=\"clean\">\n\t\t<delete dir=\"${build}\" />\n\t</target>\n\n</project>\n\n(Added uriroot attribute.)\n\nIn this case, failure appeared like this:\n\n  [jasperc] java.net.MalformedURLException: \nPath 'D:/java/examples/jspc/src/index.jsp' does not start with '/'\n  [jasperc]     at org.apache.jasper.servlet.JspCServletContext.getResource\n(JspCServletContext.java:278)\n  [jasperc]     at org.apache.jasper.JspCompilationContext.getResource\n(JspCompilationContext.java:234)\n  [jasperc]     at org.apache.jasper.compiler.Compiler.isOutDated\n(Compiler.java:405)\n  [jasperc]     at org.apache.jasper.JspC.processFile(JspC.java:572)\n  [jasperc]     at org.apache.jasper.JspC.execute(JspC.java:801)\n  [jasperc]     at org.apache.jasper.JspC.main(JspC.java:823)\n\nIn addition, my linux box also shows a similar message under the above \nbuild.xml:\n\n [jasperc] 2003-03-22 11:24:00 - The file \nargument '/home/iasandcb/jspc/src/index.jsp' does not exist\n [jasperc] \nerror:org.apache.jasper.JasperException: /home/iasandcb/jspc/src/index.jsp\n [jasperc]     at org.apache.jasper.JspC.processFile(JspC.java:586)\n [jasperc]     at org.apache.jasper.JspC.execute(JspC.java:801)\n [jasperc]     at org.apache.jasper.JspC.main(JspC.java:823)\n\nFinally, I found a successful one:\n\n<project name=\"jspc-test\" default=\"all\" basedir=\".\">\n\n\t<property name=\"src\" value=\"${basedir}/src\"/>\n\t<property name=\"build\" value=\"${basedir}/dist\"/>\n\n  <target name=\"all\" depends=\"clean, init, compile\"/>\n\n\t<target name=\"init\">\n\t\t<mkdir dir=\"${build}\" />\n\t</target>\n\n\n\t<target name=\"compile\">\n\t\t<jspc srcdir=\"${src}\" destdir=\"${build}\" verbose=\"9\" \ncompiler=\"jasper41\"\n\t\t>\n\t\t    <webapp basedir=\"${basedir}/webapp\"/>\n\t\t</jspc>\n\t</target>\n\n\t<target name=\"clean\">\n\t\t<delete dir=\"${build}\" />\n\t</target>\n\n</project>\n\nThis build script runs well.\n\nI guess this problem may come from Jasper's URL resource handling, which works \nfine within web applcation concept, but doesn't seem good without it. I hope \nAnt and Tomcat Jasper team can collaborate to figure the problem out and add \nmore examples to Ant Manual compliant with \nhttp://jakarta.apache.org/tomcat/tomcat-4.1-doc/jasper-howto.html#Web%\n20Application%20Compilation .\n\nThanks.", "is_private": false, "bug_id": 18244, "id": 33630, "time": "2003-03-22T02:47:30Z", "creator": "master@iasandcb.pe.kr", "creation_time": "2003-03-22T02:47:30Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "The used Java runtime is Sun's JDK 1.4.1_02 (Windows XP and Linux both).", "is_private": false, "id": 33631, "creator": "master@iasandcb.pe.kr", "time": "2003-03-22T02:51:11Z", "bug_id": 18244, "creation_time": "2003-03-22T02:51:11Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "jspc task is dead; unmaintainable. Please use the tomcat version.", "is_private": false, "bug_id": 18244, "id": 90651, "time": "2006-06-27T18:12:09Z", "creator": "stevel@apache.org", "creation_time": "2006-06-27T18:12:09Z", "attachment_id": null}]