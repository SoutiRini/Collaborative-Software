[{"attachment_id": null, "tags": [], "bug_id": 4075, "text": "I am trying to create a jar file with a manifest that has attributes lines split \ndue to the 72-character limitation.  When the manifest file is read, I get the \nfollowing error:\n\nC:\\jakarta-ant-1.4\\src\\etc\\testcases\\taskdefs\\jar.xml:48: Invalid Manifest: \nC:\\jakarta-ant-1.4\\src\\etc\\testcases\\taskdefs\\manifest.mf\n\tat org.apache.tools.ant.taskdefs.Jar.setManifest(Jar.java:117)\n\tat \norg.apache.tools.ant.IntrospectionHelper$15.set(IntrospectionHelper.java:530)\n\tat \norg.apache.tools.ant.IntrospectionHelper.setAttribute(IntrospectionHelper.java:2\n76)\n\tat org.apache.tools.ant.ProjectHelper.configure(ProjectHelper.java:658)\n\tat \norg.apache.tools.ant.RuntimeConfigurable.maybeConfigure(RuntimeConfigurable.java\n:143)\n\tat org.apache.tools.ant.Task.maybeConfigure(Task.java:178)\n\tat org.apache.tools.ant.Task.perform(Task.java:216)\n\tat org.apache.tools.ant.Target.execute(Target.java:164)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:182)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:601)\n\tat \norg.apache.tools.ant.taskdefs.TaskdefsTest.executeTarget(TaskdefsTest.java:169)\n\tat org.apache.tools.ant.taskdefs.JarTest.test6(JarTest.java:102)\n--- Nested Exception ---\norg.apache.tools.ant.taskdefs.ManifestException: Can't start an attribute with a \ncontinuation line  9.xml\n\tat \norg.apache.tools.ant.taskdefs.Manifest$Section.read(Manifest.java:278)\n\tat org.apache.tools.ant.taskdefs.Manifest.<init>(Manifest.java:485)\n\tat org.apache.tools.ant.taskdefs.Jar.setManifest(Jar.java:109)\n\tat \norg.apache.tools.ant.IntrospectionHelper$15.set(IntrospectionHelper.java:530)\n\tat \norg.apache.tools.ant.IntrospectionHelper.setAttribute(IntrospectionHelper.java:2\n76)\n\tat org.apache.tools.ant.ProjectHelper.configure(ProjectHelper.java:658)\n\tat \norg.apache.tools.ant.RuntimeConfigurable.maybeConfigure(RuntimeConfigurable.java\n:143)\n\tat org.apache.tools.ant.Task.maybeConfigure(Task.java:178)\n\tat org.apache.tools.ant.Task.perform(Task.java:216)\n\tat org.apache.tools.ant.Target.execute(Target.java:164)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:182)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:601)\n\tat \norg.apache.tools.ant.taskdefs.TaskdefsTest.executeTarget(TaskdefsTest.java:169)\n\tat org.apache.tools.ant.taskdefs.JarTest.test6(JarTest.java:102)\n\nI get this bug both in Ant 1.4 and the nightly 1.5alpha build.\n\nI have modified the JarTest to test this problem.  Here is the JarTest diff:\n\n$ diff -u JarTest.java~1~ JarTest.java\n--- JarTest.java~1~     Mon Sep  3 05:48:30 2001\n+++ JarTest.java        Wed Oct 10 10:07:41 2001\n@@ -97,4 +97,8 @@\n         File jarFile = new File(getProjectDir(), tempJar);\n         assertEquals(jarModifiedDate, jarFile.lastModified());\n     }\n+\n+    public void test6() {\n+        executeTarget(\"test6\");\n+    }\n }\n\nAnd here is the jar.xml diff:\n\n$ diff -u jar.xml.old jar.xml\n--- jar.xml.old Mon Sep  3 05:48:18 2001\n+++ jar.xml     Wed Oct 10 09:55:29 2001\n@@ -39,4 +39,13 @@\n     />\n   </target>\n\n+  <!-- This test is to make sure line splits in manifest are working -->\n+  <target name=\"test6\">\n+    <jar\n+       jarfile=\"tmp.jar\"\n+       manifest=\"manifest.mf\"\n+       includes=\"VeryLongFileName1234567890123456789012345678901234567890123456\n789.xml\"\n+    />\n+  </target>\n+\n </project>\n\nAnd here is the sample manifest.mf:\n\nManifest-Version: 1.0\n\nName: VeryLongFileName123456789012345678901234567890123456789012345678\n 9.xml\n\nThank you.\n\nChris Bonham\nPresident/CEO\nThird Eye Consulting, Inc.\nbonhamcm@thirdeyeconsulting.com\nhttp://www.thirdeyeconsulting.com\n317.823.3686\n317.823.0353 (FAX)", "count": 0, "id": 6544, "time": "2001-10-10T09:06:15Z", "creator": "bonhamcm@thirdeyeconsulting.com", "creation_time": "2001-10-10T09:06:15Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 4075, "attachment_id": 658, "text": "Created attachment 658\n[PATCH] Manifests with split-line attributes handled properly. - Thanks, Magesh", "id": 6548, "time": "2001-10-10T10:31:50Z", "creator": "umagesh@rediffmail.com", "creation_time": "2001-10-10T10:31:50Z", "is_private": false}, {"count": 2, "tags": [], "creator": "conor@apache.org", "attachment_id": null, "id": 6592, "time": "2001-10-11T08:02:43Z", "bug_id": 4075, "creation_time": "2001-10-11T08:02:43Z", "is_private": false, "text": "Fixed for 1.5. Please try nightly build 2001-10-12\n\n\n"}]