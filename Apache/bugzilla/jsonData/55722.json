[{"count": 0, "tags": [], "creator": "sujeet_ssv@rediffmail.com", "attachment_id": null, "text": "Hi \n\nWe are intermittently getting the HTTP 504 error with message \"HTTP: 504 - timed out waiting for gateway\" while executing webservice call. The frequency of this kind of errors is too less less than 0.02%. However this is very critical from business perspective and even that % of error tolerance is also not acceptable.\n\nWe tried to dig down through different logs but we were able to trace correlated exceptions pertaining to these Http 504 errors in mod_jk logs only.\n\nBelow is the excerpt from mod_jk logs.\n\n                                   [Fri Oct 25 09:57:38 2013] worker1 somewebservice.com 0.003911\n[Fri Oct 25 09:57:42 2013] worker1 some.webservice.com 1.560307\n[Fri Oct 25 09:57:43 2013] worker1 somewebservice.com 0.002741\n[Fri Oct 25 09:57:47 2013] [8575:47986549924192] [info] ajp_connection_tcp_get_message::jk_ajp_common.c (1230): (worker1) can't receive the response header message from tomcat, network problems or tomcat (127.0.0.1:8009) is down (errno=11)\n[Fri Oct 25 09:57:47 2013] [8575:47986549924192] [error] ajp_get_reply::jk_ajp_common.c (2055): (worker1) Tomcat is down or refused connection. No response has been sent to the client (yet)\n[Fri Oct 25 09:57:47 2013] [8575:47986549924192] [error] ajp_service::jk_ajp_common.c (2533): (worker1) sending request to tomcat failed (unrecoverable),  (attempt=1)\n[Fri Oct 25 09:57:47 2013] worker1 some.webservice.com 302.021976\n[Fri Oct 25 09:57:47 2013] [8575:47986549924192] [info] jk_handler::mod_jk.c (2618): Service error=0 for worker=worker1\n[Fri Oct 25 09:57:48 2013] worker1 somewebservice.com 0.003781\n[Fri Oct 25 09:57:51 2013] worker1 some.webservice.com 10.727879\n[Fri Oct 25 09:57:51 20\n\n\n\nFor reference-\n\nWorkers.properties ( on 04)\n\n[root@some-server-in conf]$ cat workers.properties\nworker.list=worker1\n\n# Set properties for worker1 (ajp13)\nworker.worker1.type=ajp13\nworker.worker1.host=localhost\nworker.worker1.port=8009\n#worker.worker1.lbfactor=50\nworker.worker1.cachesize=30\nworker.worker1.cache_timeout=600\nworker.worker1.socket_keepalive=1\nworker.worker1.socket_timeout=300\n\n\nWe ran more than 10 endurance tests of 16 hrs duration however we are getting these kind of exception consistently. Expert comments how to tackle this really appreciated. Thanks\n\nSujeet", "id": 170925, "time": "2013-10-30T05:55:12Z", "bug_id": 55722, "creation_time": "2013-10-30T05:55:12Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 55722, "text": "Bugzilla is not a support forum. Please use the Tomcat users mailing list.", "id": 170927, "time": "2013-10-30T09:41:05Z", "creator": "markt@apache.org", "creation_time": "2013-10-30T09:41:05Z", "is_private": false, "attachment_id": null}]