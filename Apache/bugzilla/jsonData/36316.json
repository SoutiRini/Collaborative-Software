[{"count": 0, "tags": [], "bug_id": 36316, "is_private": false, "text": "Overview Description:\n\nI have an RMI client which is initialized and used within a\nServletContextListener's contextInitialized method.  It initializes etc. fine\nbut when the RMI object is used I get the MalformedURLException show below.\n\nI have observed that:\n- The same code work fine when running only in the sun JVM (1.5.0_04)\n- The problem is unaffected by using rmic compiled stubs or not\n- The only RMI calls which fail are those using my own objects as parameters,\ncalls which return my object work; a call with java String parameter works.\n- The jar containing the RMI code was in the webapps 'lib' dir, however moving\nit to 'shared/lib', 'common/lib' and unpacking the classes to 'classes' made no\ndifference.\n- See workaround\n\nWorkaround:\n\nIf I install Tomcat so that there are no spaces in the path to its directory,\neverything works fine.\n\nActual Results:\n\nWhen Tomcat is installed to C:\\Program Files\\Apache Software Foundation\\Tomcat 5.5\\\n\njava.rmi.ServerException: RemoteException occurred in server thread; nested\nexception is: \n\tjava.rmi.UnmarshalException: error unmarshalling arguments; nested exception is: \n\tjava.net.MalformedURLException: no protocol: Files/Apache\n\tat sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)\n\tat sun.rmi.transport.Transport$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.rmi.transport.Transport.serviceCall(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)\n\tat java.lang.Thread.run(Unknown Source)\n\tat sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknown Source)\n\tat sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)\n\tat sun.rmi.server.UnicastRef.invoke(Unknown Source)\n\tat java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(Unknown Source)\n\tat java.rmi.server.RemoteObjectInvocationHandler.invoke(Unknown Source)\n\tat $Proxy1.find(Unknown Source)\n\tat\ncom.qinetiq.imex.ioss.webapp.MMSContextListener.contextInitialized(MMSContextListener.java:67)\n\tat\norg.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3669)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4104)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:759)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:739)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)\n\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:788)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:498)\n\tat org.apache.catalina.startup.HostConfig.check(HostConfig.java:1179)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat org.apache.commons.modeler.BaseModelMBean.invoke(BaseModelMBean.java:503)\n\tat com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(Unknown Source)\n\tat com.sun.jmx.mbeanserver.MetaDataImpl.invoke(Unknown Source)\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown Source)\n\tat com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source)\n\tat org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1377)\n\tat\norg.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:213)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:709)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)\n\tat\norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:856)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:744)\n\tat\norg.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)\n\tat\norg.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)\n\tat java.lang.Thread.run(Unknown Source)\nCaused by: java.rmi.UnmarshalException: error unmarshalling arguments; nested\nexception is: \n\tjava.net.MalformedURLException: no protocol: Files/Apache\n\tat sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)\n\tat sun.rmi.transport.Transport$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat sun.rmi.transport.Transport.serviceCall(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)\n\t... 1 more\nCaused by: java.net.MalformedURLException: no protocol: Files/Apache\n\tat java.net.URL.<init>(Unknown Source)\n\tat java.net.URL.<init>(Unknown Source)\n\tat java.net.URL.<init>(Unknown Source)\n\tat sun.rmi.server.LoaderHandler.pathToURLs(Unknown Source)\n\tat sun.rmi.server.LoaderHandler.loadClass(Unknown Source)\n\tat java.rmi.server.RMIClassLoader$2.loadClass(Unknown Source)\n\tat java.rmi.server.RMIClassLoader.loadClass(Unknown Source)\n\tat sun.rmi.server.MarshalInputStream.resolveClass(Unknown Source)\n\tat java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)\n\tat java.io.ObjectInputStream.readClassDesc(Unknown Source)\n\tat java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)\n\tat java.io.ObjectInputStream.readObject0(Unknown Source)\n\tat java.io.ObjectInputStream.readObject(Unknown Source)\n\tat sun.rmi.server.UnicastRef.unmarshalValue(Unknown Source)\n\t... 7 more", "id": 78876, "time": "2005-08-23T11:07:13Z", "creator": "kdkildare@taz.qinetiq.com", "creation_time": "2005-08-23T11:07:13Z", "attachment_id": null}, {"count": 1, "text": "The duplicate has a good explanation why the Tomcat team is between a rock and a\nhard place on this one.\n\n*** This bug has been marked as a duplicate of 13983 ***", "bug_id": 36316, "is_private": false, "id": 78892, "time": "2005-08-23T22:54:27Z", "creator": "markt@apache.org", "creation_time": "2005-08-23T22:54:27Z", "tags": [], "attachment_id": null}]