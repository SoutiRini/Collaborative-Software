[{"count": 0, "tags": [], "bug_id": 35481, "attachment_id": null, "text": "For JDBCStore rev. 1.23 it is working fine. \nI found that Log4jLogger class doesn't set \nlevel for newly created logger. \nI'm working with PostgreSQL. I'm using log4j\nfor logging purposes:\n\nlog4j.rootLogger=INFO,A1\nlog4j.appender.A1=org.apache.log4j.ConsoleAppender\n\nMy Domain.xml contains:\n\n<slide logger=\"log4j.Log4jLogger\" logger-level=\"6\">\n\nIf I set it simply to <slide>, it works fine. \nFor J2EEStore it is ok in both cases.\n\nMy stack trace:\n\n23 Jun 2005 14:17:45 - org.apache.slide.common.Domain - INFO - Auto-Initializing\nDomain\n23 Jun 2005 14:17:45 - org.apache.slide.common.Domain - INFO - Configuration\nfound in classpath\n23 Jun 2005 14:17:45 - org.apache.slide.common.Domain - INFO - Domain\nconfiguration : {org.apache.slide.lock=true,\norg.apache.slide.versioncontrol=true, org.apache.slide.debug=true,\norg.apache.slide.search=true, org.apache.slide.security=true,\norg.apache.slide.urlEncoding=UTF-8,\norg.apache.slide.domain=/home/tomek/workspace/SlideTestClient/Domain.xml}\n2005-06-23 14:17:46,687 INFO  org.apache.slide.common.Domain  Initializing Domain\n2005-06-23 14:17:47,314 INFO  org.apache.slide.common.Domain  Domain\nconfiguration : {org.apache.slide.lock=true,\norg.apache.slide.versioncontrol=true, org.apache.slide.debug=true,\norg.apache.slide.search=true, org.apache.slide.security=true,\norg.apache.slide.urlEncoding=UTF-8,\norg.apache.slide.domain=/home/tomek/workspace/SlideTestClient/Domain.xml}\n2005-06-23 14:17:47,317 INFO  org.apache.slide.common.Domain  Domain parameters:\n{logger-level=6, versioncontrol-exclude=, auto-version=checkout-checkin,\nhistorypath=/history, checkin-fork=forbidden,\nworkingresourcepath=/workingresource, workspacepath=/workspace, default=slide,\nauto-version-control=true, logger=log4j.Log4jLogger, checkout-fork=forbidden}\n2005-06-23 14:17:47,318 INFO  org.apache.slide.common.Domain  Initializing\nnamespace : slide\n2005-06-23 14:17:47,357 WARN  org.apache.slide.common.Domain  Loading of\ncreate_store_listener class failed: org.apache.slide.webdav.util.UriHandler\n2005-06-23 14:17:47,364 INFO  org.apache.slide.common.Namespace  Loading\nnamespace slide parameters\n2005-06-23 14:17:47,456 INFO  org.apache.slide.common.Namespace  Loading\nnamespace definition\n2005-06-23 14:17:47,539 INFO  org.apache.slide.common.Namespace  nodestore:\norg.apache.slide.store.impl.rdbms.JDBCStore\n2005-06-23 14:17:47,603 WARN \norg.apache.slide.store.impl.rdbms.AbstractRDBMSStore  The maxPooledConnections\nconfiguration attribute is deprecated, please use dbcp.maxActive instead.\n2005-06-23 14:17:47,647 INFO \norg.apache.slide.store.impl.rdbms.AbstractRDBMSStore  Loading and registering\ndriver 'org.postgresql.Driver'\n2005-06-23 14:17:47,660 INFO \norg.apache.slide.store.impl.rdbms.AbstractRDBMSStore  Using DBCP pooling\n2005-06-23 14:17:47,661 INFO  org.apache.slide.common.Namespace  securitystore\nreferences nodestore\n2005-06-23 14:17:47,661 INFO  org.apache.slide.common.Namespace  lockstore\nreferences nodestore\n2005-06-23 14:17:47,662 INFO  org.apache.slide.common.Namespace \nrevisiondescriptorsstore references nodestore\n2005-06-23 14:17:47,662 INFO  org.apache.slide.common.Namespace \nrevisiondescriptorstore references nodestore\n2005-06-23 14:17:47,663 INFO  org.apache.slide.common.Namespace  contentstore:\norg.apache.slide.store.txfile.TxFileContentStore\n2005-06-23 14:17:47,795 INFO  file-content-store  File Store configured to\n/home/tomek/slide/data/store/content, working directory\n/home/tomek/slide/data/work/content\n2005-06-23 14:17:47,796 INFO  file-content-store  Set timeout to 120\n2005-06-23 14:17:47,824 INFO  org.apache.slide.common.Namespace \npropertiesindexer: org.apache.slide.index.lucene.LucenePropertiesIndexer\n2005-06-23 14:17:47,863 INFO  org.apache.slide.common.Namespace  contentindexer:\norg.apache.slide.index.lucene.LuceneContentIndexer\n2005-06-23 14:17:47,869 INFO  org.apache.slide.common.Namespace  sequencestore\nreferences nodestore\n2005-06-23 14:17:47,873 INFO  org.apache.slide.util.logger  Disabling cache\ntimeout for store DgaArchive\n2005-06-23 14:17:47,874 INFO  org.apache.slide.util.logger  Setting object cache\nsize for store DgaArchive to 10000\n2005-06-23 14:17:47,895 INFO  org.apache.slide.store.ExtendedStore  Setting\npermission cache size for store DgaArchive to 10000\n2005-06-23 14:17:47,898 INFO  org.apache.slide.store.ExtendedStore  Setting lock\ncache size for store DgaArchive to 10000\n2005-06-23 14:17:47,899 INFO  org.apache.slide.store.ExtendedStore  Setting\ndescriptors cache size for store DgaArchive to 10000\n2005-06-23 14:17:47,899 INFO  org.apache.slide.store.ExtendedStore  Setting\ndescriptor cache size for store DgaArchive to 10000\n2005-06-23 14:17:47,900 INFO  org.apache.slide.store.ExtendedStore  Setting\ncontent caching for store DgaArchive to false\n2005-06-23 14:17:47,901 INFO  org.apache.slide.store.ExtendedStore  Setting\ncontent cache size for store DgaArchive to 10000\n2005-06-23 14:17:47,902 INFO  org.apache.slide.store.ExtendedStore  Setting\ncontent cache byte size for store DgaArchive to 10000000\n2005-06-23 14:17:47,903 INFO  org.apache.slide.store.ExtendedStore  Setting\ntransaction content cache size for store DgaArchive to 1000\n2005-06-23 14:17:47,903 INFO  org.apache.slide.store.ExtendedStore  Setting\ntransaction content cache byte size for store DgaArchive to 1000000\n2005-06-23 14:17:47,904 INFO  org.apache.slide.store.ExtendedStore  Setting\nmaximum byte size for content cache entry for store DgaArchive to 50000\n2005-06-23 14:17:47,905 INFO  org.apache.slide.store.ExtendedStore  Enabling\nfull caching causing low isolation\n2005-06-23 14:17:47,933 INFO  org.apache.slide.common.Namespace  Registering\nStore DgaArchive (class org.apache.slide.store.ExtendedStore) with parameters {}\non scope /\n2005-06-23 14:17:47,960 INFO  org.apache.slide.common.Namespace  Initializing\nStore DgaArchive(org.apache.slide.store.ExtendedStore)\n2005-06-23 14:17:48,099 WARN  org.apache.slide.common.Domain  Loading of\nredirector class failed: org.apache.slide.webdav.util.DeltavUriRedirector\n2005-06-23 14:17:48,474 INFO  org.apache.slide.index.lucene.LuceneContentIndexer\n using analyzer: org.apache.lucene.analysis.SimpleAnalyzer\n2005-06-23 14:17:48,493 INFO  org.apache.slide.common.Namespace  Loading\nnamespace slide base data\n2005-06-23 14:17:49,554 ERROR org.apache.slide.common.Namespace  Unable to read\nNamespace base configuration file : \n2005-06-23 14:17:49,559 ERROR org.apache.slide.common.Namespace \njava.lang.NullPointerExceptionjava.lang.NullPointerException\n\tat log4j.Log4jLogger.fromLevel(Log4jLogger.java:230)\n\tat log4j.Log4jLogger.getLoggerLevel(Log4jLogger.java:81)\n\tat\norg.apache.slide.store.impl.rdbms.JDBCStore.logConnectionPoolStatistics(JDBCStore.java:464)\n\tat org.apache.slide.store.impl.rdbms.JDBCStore.connect(JDBCStore.java:333)\n\tat\norg.apache.slide.common.AbstractXAServiceBase.connect(AbstractXAServiceBase.java:130)\n\tat org.apache.slide.store.AbstractStore.connect(AbstractStore.java:222)\n\tat\norg.apache.slide.common.AbstractServiceBase.connectIfNeeded(AbstractServiceBase.java:192)\n\tat org.apache.slide.common.Namespace.connectService(Namespace.java:576)\n\tat org.apache.slide.common.Namespace.retrieveStore(Namespace.java:675)\n\tat org.apache.slide.common.Uri.parseUri(Uri.java:348)\n\tat org.apache.slide.common.Uri.<init>(Uri.java:67)\n\tat org.apache.slide.common.Namespace.getUri(Namespace.java:724)\n\tat org.apache.slide.common.Namespace.getUri(Namespace.java:704)\n\tat org.apache.slide.common.Namespace.loadBaseData(Namespace.java:835)\n\tat org.apache.slide.common.Domain.initNamespace(Domain.java:883)\n\tat org.apache.slide.common.Domain.init(Domain.java:462)\n\tat org.apache.slide.common.Domain.selfInit(Domain.java:816)\n\tat org.apache.slide.common.Domain.getDefaultNamespace(Domain.java:222)\n\tat my.app.SlideVersionsTest.<init>(SlideVersionsTest.java:56)\n\tat my.app.SlideVersionsTest.main(SlideVersionsTest.java:482)\n2005-06-23 14:17:49,567 INFO  org.apache.slide.common.Namespace  Loading\nnamespace slide configuration\n2005-06-23 14:17:49,601 ERROR org.apache.slide.common.Domain \njava.lang.NullPointerException\njava.lang.NullPointerException\n\tat log4j.Log4jLogger.fromLevel(Log4jLogger.java:230)\n\tat log4j.Log4jLogger.getLoggerLevel(Log4jLogger.java:81)\n\tat\norg.apache.slide.store.impl.rdbms.JDBCStore.logConnectionPoolStatistics(JDBCStore.java:464)\n\tat org.apache.slide.store.impl.rdbms.JDBCStore.connect(JDBCStore.java:333)\n\tat\norg.apache.slide.common.AbstractXAServiceBase.connect(AbstractXAServiceBase.java:130)\n\tat org.apache.slide.store.AbstractStore.connect(AbstractStore.java:222)\n\tat\norg.apache.slide.common.AbstractServiceBase.connectIfNeeded(AbstractServiceBase.java:192)\n\tat org.apache.slide.common.Namespace.connectService(Namespace.java:576)\n\tat org.apache.slide.common.Namespace.retrieveStore(Namespace.java:675)\n\tat org.apache.slide.common.Uri.parseUri(Uri.java:346)\n\tat org.apache.slide.common.Uri.<init>(Uri.java:67)\n\tat org.apache.slide.common.Namespace.getUri(Namespace.java:724)\n\tat org.apache.slide.common.Namespace.getUri(Namespace.java:704)\n\tat org.apache.slide.common.Namespace.getUri(Namespace.java:692)\n\tat org.apache.slide.common.NamespaceConfig.getActionNode(NamespaceConfig.java:1052)\n\tat\norg.apache.slide.common.NamespaceConfig.getConfiguredNode(NamespaceConfig.java:801)\n\tat\norg.apache.slide.common.NamespaceConfig.initializeNamespaceConfig(NamespaceConfig.java:671)\n\tat org.apache.slide.common.Namespace.loadConfiguration(Namespace.java:906)\n\tat org.apache.slide.common.Domain.initNamespace(Domain.java:888)\n\tat org.apache.slide.common.Domain.init(Domain.java:462)\n\tat org.apache.slide.common.Domain.selfInit(Domain.java:816)\n\tat org.apache.slide.common.Domain.getDefaultNamespace(Domain.java:222)\n\tat my.app.SlideVersionsTest.<init>(SlideVersionsTest.java:56)\n\tat my.app.SlideVersionsTest.main(SlideVersionsTest.java:482)\n2005-06-23 14:17:49,604 INFO  org.apache.slide.common.Domain  Domain\ninitialization complete\nException in thread \"main\" java.lang.NullPointerException\n\tat org.apache.slide.common.NamespaceConfig.getParameter(NamespaceConfig.java:568)\n\tat\norg.apache.slide.util.NamespaceConfigUtil.getSecurityImplementation(NamespaceConfigUtil.java:70)\n\tat\norg.apache.slide.common.NamespaceAccessTokenImpl.<init>(NamespaceAccessTokenImpl.java:76)\n\tat org.apache.slide.common.Domain.accessNamespace(Domain.java:252)\n\tat my.app.SlideVersionsTest.<init>(SlideVersionsTest.java:56)\n\tat my.app.SlideVersionsTest.main(SlideVersionsTest.java:482)", "id": 76651, "time": "2005-06-23T14:55:17Z", "creator": "tomekem@poczta.fm", "creation_time": "2005-06-23T14:55:17Z", "is_private": false}]