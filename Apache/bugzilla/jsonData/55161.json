[{"count": 0, "tags": [], "bug_id": 55161, "attachment_id": 30501, "is_private": false, "id": 168135, "time": "2013-06-29T22:05:49Z", "creator": "nistor1@illinois.edu", "creation_time": "2013-06-29T22:05:49Z", "text": "Created attachment 30501\npatch\n\nThe problem appears in version 2.9 and in revision 1498029.  I\nattached a two-line patch (patch.diff) that fixes it.\n\nIn method \"SoapSampler.setPostHeaders\", the loop over the\n\"HeaderManager mngr\" keeps overriding \"length\" with\n\"Integer.parseInt(hd.getValue())\".  Therefore, only the last written\nvalue is visible out of the loop and all the other writes and\niterations are not necessary.  The patch iterates from the end of\n\"HeaderManager mngr\" and breaks the first time when \"length\" is set.\n\nThe above fix (in patch.diff) is certainly correct (it's easy to see\nthrough code inspection), but I think we can have an even shorter\npatch (one line, in patchShort.diff): just break as soon as \"length\"\nis set, without reversion the loop order.  patchShort.diff is correct\nonly if there can be only one \"hd.getName()\" equal to\n\"HTTPConstants.HEADER_CONTENT_LENGTH\" (which I think it's the case),\nor if it doesn't matter which attribute value \"length\" gets, as long\nas the condition\nHTTPConstants.HEADER_CONTENT_LENGTH.equalsIgnoreCase(hd.getName()) is\nsatisfied."}, {"count": 1, "tags": [], "bug_id": 55161, "is_private": false, "text": "Created attachment 30502\npatchShort", "id": 168136, "time": "2013-06-29T22:06:07Z", "creator": "nistor1@illinois.edu", "creation_time": "2013-06-29T22:06:07Z", "attachment_id": 30502}, {"count": 2, "tags": [], "bug_id": 55161, "attachment_id": null, "text": "Thanks for patch, applied.\n\nDate: Sun Jun 30 13:00:30 2013\nNew Revision: 1498110\n\nURL: http://svn.apache.org/r1498110\nLog:\nBug 55161 - Useless processing in SoapSampler.setPostHeaders\nBugzilla Id: 55161\n\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/SoapSampler.java\n    jmeter/trunk/xdocs/changes.xml", "id": 168143, "time": "2013-06-30T13:13:41Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-06-30T13:13:41Z", "is_private": false}]