[{"count": 0, "tags": [], "bug_id": 14195, "text": "The dispatch(Mark where, String errCode, Object[] args, Exception e) method in\nthe o.a.jasper.compiler.ErrorDispatcher throws an NPE when it's called from the\njspError(Exception e) method in the same class, since the errCode parameter is\nnull in this case.\n\nA simple fix is to test for a null errCode and set a default message in this case:\n\n\t// Localize\n\tString errMsg = \"Unknown error message\";\n\tif (errCode != null) {\n\t    errMsg = getString(errCode, args);\n\t}", "id": 25566, "time": "2002-11-02T22:28:36Z", "creator": "hans@gefionsoftware.com", "creation_time": "2002-11-02T22:28:36Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 14195, "attachment_id": null, "id": 25569, "time": "2002-11-02T23:23:44Z", "creator": "hans@gefionsoftware.com", "creation_time": "2002-11-02T23:23:44Z", "is_private": false, "text": "Actually, a better fix is to get the Exception message when errCode is null, to\nat least give a hint about what's wrong:\n\n  // Localize, if possible\n  String errMsg = e.getMessage();\n  if (errCode != null) {\n      errMsg = getString(errCode, args);\n  }"}, {"count": 2, "tags": [], "bug_id": 14195, "attachment_id": null, "text": "Eh, turns out that there are case where the Exception is null as well. This\nshould be safe though:\n\n  String errMsg = null;\n  if (errCode != null) {\n      errMsg = getString(errCode, args);\n  }\n  if (errMsg == null && e != null) {\n      errMsg = e.getMessage();\n  }\n", "id": 25574, "time": "2002-11-03T01:20:57Z", "creator": "hans@gefionsoftware.com", "creation_time": "2002-11-03T01:20:57Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 14195, "attachment_id": null, "text": "Actually, code was already checking for null errCode.\nAdopted suggestion to get the exception message when errCode is null in a\nslightly different way than suggested, as follows:\n\n\n--- ErrorDispatcher.java        7 Oct 2002 19:37:21 -0000       1.5\n+++ ErrorDispatcher.java        4 Nov 2002 20:13:55 -0000\n@@ -415,9 +415,11 @@\n        boolean hasLocation = false;\n \n        // Localize\n-\n        if (errCode != null) {\n            errMsg = getString(errCode, args);\n+       } else if (e != null) {\n+           // give a hint about what's wrong\n+           errMsg = e.getMessage();\n        }\n \n        // Get error location\n", "id": 25638, "time": "2002-11-04T20:18:09Z", "creator": "jan.luehe@sun.com", "creation_time": "2002-11-04T20:18:09Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 14195, "text": "Okay, I reported the problem for TC 4.1.14, (ErrorDispatcher.java version 1.2),\nand it looks like it was fixed in a version that's only used in TC 5.x. Will TC\n4.1.15 pick up the fix you made now in ErrorDispatcher.java version 1.6 or will\nhave to fixed in a 1.2.1 version as well?", "id": 25646, "time": "2002-11-04T21:52:11Z", "creator": "hans@gefionsoftware.com", "creation_time": "2002-11-04T21:52:11Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 14195, "text": "Sorry, Hans, I had forgotten to backport this fix. I just did, so it will be\npicked up by TC 4.1.15.\n", "id": 25720, "time": "2002-11-05T20:34:54Z", "creator": "jan.luehe@sun.com", "creation_time": "2002-11-05T20:34:54Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "jan.luehe@sun.com", "text": "*** Bug 14623 has been marked as a duplicate of this bug. ***", "id": 26966, "time": "2002-11-25T21:02:30Z", "bug_id": 14195, "creation_time": "2002-11-25T21:02:30Z", "is_private": false, "attachment_id": null}]