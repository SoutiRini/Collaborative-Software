[{"count": 0, "tags": [], "text": "consider the following (simplified) eclipse project configuration.\n\nweb_base_jar (shared taglib etc.)\nweb_war (uses web_base_jar)\n\nWhen developing our web project locally we use an exploded war layout. The compile output\nof web_base_jar is directly copied (not as a jar!) to the war\u2019s\nweb_war/WEB-INF/classes directory by our ide\u2019s (eclipse with sysdeo plugin and intellij).\nOur shared taglib ends up here: web_war/WEB-INF/classes/META-INF/myTaglib.tld. The taglib\nis successfully picked up by the Jar Scanner configured with \u201cscanAllDirectories\u201d.\n\nThis leads to the following generated jsp code when myTaglib is used:\n\n  static {\n    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(1);\n    _jspx_dependants.put(\"file:/somepath/pc_web_war_exploded/WEB-INF/classes/META-INF/ myTaglib.tld\n\", Long.valueOf(-1L));\n  }\n\nThe relevant code for this snippet is in org.apache.jasper.compiler.TagLibraryInfoImpl.<init>(TagLibraryInfoImpl.java:173).\nBecause the Taglib is a file uri (file:/C:/somepath/pc_web_war_exploded/WEB-INF/classes/META-INF/myTaglib.tld)\nit is not found by ApplicationContext#getResource and the method\norg.apache.jasper.JspCompilationContext.getLastModified(JspCompilationContext.java:437) returns\n-1 in this case.\n\nWhen the compiler checks if the current jsp is outdated it checks also all includes/dependants.\nBecause myTaglib is in the dependants  list of our jsps it is also checked. The check tests\nthe lastModified timestamp of the file against -1 and returns always true. See here org.apache.jasper.compiler.Compiler.isOutDated(Compiler.java:519)\nThis means that our jsps are recompiled on every request. We have some workarounds for this but it would be nice if this setup would work out of the box", "is_private": false, "id": 171375, "creator": "it-media.herbst@daimler.com", "time": "2013-11-21T13:14:21Z", "bug_id": 55807, "creation_time": "2013-11-21T13:14:21Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 55807, "attachment_id": null, "text": "Thanks for the report. This has been fixed in trunk and 8.0.0-RC6 onwards and in 7.0.x for 7.0.48 onwards.", "id": 171471, "time": "2013-11-27T20:29:14Z", "creator": "markt@apache.org", "creation_time": "2013-11-27T20:29:14Z", "is_private": false}]