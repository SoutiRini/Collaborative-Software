[{"count": 0, "tags": [], "bug_id": 48738, "is_private": false, "id": 134480, "attachment_id": 24979, "creator": "jiwang@linkedin.com", "creation_time": "2010-02-13T23:28:26Z", "time": "2010-02-13T23:28:26Z", "text": "Created attachment 24979\npatch for the making GzipOutputFilter work with early flush\n\nAs part of our site speed optimizations (at Linkedin) we bumped into a problem when trying to do partial flush of compressed content stream from Tomcat to the browser. We discovered the root cause to be a couple of long outstanding JDK bugs:\n\n http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4255743\n http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4813885\n\nBasically, with the GzipOutputFilter turned on, the GZIPOutputStream it uses internally buffers the data that's been sent over, and does not flush to client (browser) when flushBuffer() is invoked.\n\nWe have produced a patch which we verified internally, that it did work to do a partial flush on the compressed stream. We also have a unit testcase included in the patch to quickly show the problem. \n\nEarly flush is a quite useful technique that many sites out there can benefit from to speed up the page download/rendering time, and by having it working in tomcat would benefit the existing and new customers. \n\nThanks!"}, {"count": 1, "tags": [], "bug_id": 48738, "is_private": false, "id": 134481, "attachment_id": null, "creator": "knst.kolinko@gmail.com", "creation_time": "2010-02-13T23:47:31Z", "time": "2010-02-13T23:47:31Z", "text": "Thank you for the patch.\nI updated Summary and Severity of this issue."}, {"count": 2, "tags": [], "bug_id": 48738, "is_private": false, "text": "The patch (with some slight modifications) has been applied to trunk and will be included in 7.0.3 onwards.", "id": 139407, "time": "2010-08-24T06:09:31Z", "creator": "markt@apache.org", "creation_time": "2010-08-24T06:09:31Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "text": "Created attachment 25932\nPort of TC7 patch for Tomact 6\n\nI'll propose this patch for 6.0.x", "id": 139424, "time": "2010-08-24T14:59:52Z", "bug_id": 48738, "creation_time": "2010-08-24T14:59:52Z", "is_private": false, "attachment_id": 25932}, {"count": 4, "attachment_id": null, "bug_id": 48738, "text": "Patch has been applied to 6.0.x and will be included in 6.0.30 onwards.\n\nThanks again for your efforts.", "id": 139743, "time": "2010-09-07T12:02:03Z", "creator": "markt@apache.org", "creation_time": "2010-09-07T12:02:03Z", "tags": [], "is_private": false}]