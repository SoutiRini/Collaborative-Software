[{"count": 0, "text": "[PATCH]\nA patch is attached that adds support for the standard (color) rgb-icc function\nand a proprietary cmyk function.\n\nFrom the users point of view.\n\nThe rgb-icc function is accepted as input for color properties of fo\nelements and the generated PDF will include and refer to those color\nprofiles. Other renderers will use profile based converted sRGB values.\nThe ICC profiles are loaded using the src attribute from the color-profile\nelement and resolved using the FOP URI resolver.\n\nA cmyk function accepting 4 arguments (values ranging from 0%-100% or 0.0-1.0)\nis also available. The PDF renderer will generate DeviceCMYK colors based on the\nprovided values, the other renderers will use a \"standard\" cmyk-rgb conversion\nand generated rgb colors.", "bug_id": 40729, "attachment_id": null, "id": 94730, "time": "2006-10-11T13:18:46Z", "creator": "pc.subscriptions@gmail.com", "creation_time": "2006-10-11T13:18:46Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "pc.subscriptions@gmail.com", "attachment_id": 18990, "id": 94731, "time": "2006-10-11T13:19:38Z", "bug_id": 40729, "creation_time": "2006-10-11T13:19:38Z", "is_private": false, "text": "Created attachment 18990\nPatch file"}, {"count": 2, "tags": [], "creator": "pc.subscriptions@gmail.com", "attachment_id": 19025, "id": 94945, "time": "2006-10-18T12:06:44Z", "bug_id": 40729, "creation_time": "2006-10-18T12:06:44Z", "is_private": false, "text": "Created attachment 19025\ncmyk and rgb-icc support\n\nThis is a new version of the previous patch. A new version is needed in order\nto make the equivalent changes to batik easier."}, {"count": 3, "tags": [], "creator": "jeremias@apache.org", "attachment_id": null, "is_private": false, "id": 95084, "time": "2006-10-25T09:21:09Z", "bug_id": 40729, "creation_time": "2006-10-25T09:21:09Z", "text": "I finally managed to look into this. The patch looks good after styling the code\nto our code conventions. I had to fix an NPE when there were no color-profiles\nspecified and the rgb-icc() function was used. Furthermore, the fop-rgb-icc()\nfunction did not parse the fallback color values correctly. I now have this\npatch ready to be committed in a separate checkout locally. As soon as the ICLA\nis registered I'll commit.\n\nWhat we have to look into when the patch is applied:\n- When the PDF/A-1b profile is active, FOP does not check for CMYK colors when\nthe output intent is sRGB (which is the default). I guess I'll have to look into\nthis a little deeper. There may be additional things that need to be changed.\n- The PSRenderer will need to learn to handle the DeviceCMYK colors correctly.\n\nSo, Peter, thanks a lot for the hard work so far. This looks really good. I bet\nmany people will be extremely happy with the new functionality. Please have a\nlittle patience until the ICLA pops up."}, {"count": 4, "tags": [], "creator": "pc.subscriptions@gmail.com", "attachment_id": null, "is_private": false, "id": 95085, "time": "2006-10-25T12:07:15Z", "bug_id": 40729, "creation_time": "2006-10-25T12:07:15Z", "text": "Apologies for the NPE's. Should have added some unit tests I guess.\n\nConcerning the open issues listed. Perhaps I can find some time to look at some\nof them (e.g. the PSRenderer) once this patch ends up in the code tree (and I\nget the Batik related changes in a state I can post).\n\nPeter\n\nPS As mentioned I faxed the ICLA so I hope it will make it through the process\n(whatever that is)\n"}, {"count": 5, "tags": [], "creator": "jeremias@apache.org", "attachment_id": null, "is_private": false, "id": 95732, "time": "2006-11-12T07:47:04Z", "bug_id": 40729, "creation_time": "2006-11-12T07:47:04Z", "text": "(Trying this channel as Peter hasn't replied through direct mail, yet).\n\nPeter, the ASF's secretary has recorded a new ICAL entry as below. Is this not\nyour entry or is it a mistake/typo? In Bugzilla it says your name is \"Peter\nCoppens\". The mail addresses also don't match.\n\nnotinavail:Peter Coppans:Peter Coppans:pgp.coppans.at.gmail.com:Signed CLA\n\n"}, {"count": 6, "tags": [], "bug_id": 40729, "attachment_id": null, "id": 95733, "creation_time": "2006-11-12T09:34:02Z", "time": "2006-11-12T09:34:02Z", "creator": "pc.subscriptions@gmail.com", "text": "I guess my handwriting is not so readable\n\nName is Peter Coppens, email is pgp.coppens@gmail.com\n\nDo I have to resend the document?\n\n(In reply to comment #5)\n> (Trying this channel as Peter hasn't replied through direct mail, yet).\n> \n> Peter, the ASF's secretary has recorded a new ICAL entry as below. Is this not\n> your entry or is it a mistake/typo? In Bugzilla it says your name is \"Peter\n> Coppens\". The mail addresses also don't match.\n> \n> notinavail:Peter Coppans:Peter Coppans:pgp.coppans.at.gmail.com:Signed CLA\n> \n> ", "is_private": false}, {"count": 7, "tags": [], "bug_id": 40729, "attachment_id": null, "id": 95734, "time": "2006-11-12T09:58:53Z", "creator": "jeremias@apache.org", "creation_time": "2006-11-12T09:58:53Z", "is_private": false, "text": "No, that's not necessary. I just needed confirmation that it's a typo. Thanks.\nI'll handle the patch tomorrow."}, {"count": 8, "tags": [], "creator": "jeremias@apache.org", "attachment_id": null, "id": 95753, "time": "2006-11-13T02:27:17Z", "bug_id": 40729, "creation_time": "2006-11-13T02:27:17Z", "is_private": false, "text": "Patch applied! Finally. Thanks a lot for your work and patience, Peter.\nhttp://svn.apache.org/viewvc?view=rev&rev=474225\n\nWhile testing I found that CMYK color referencing an CMYK color profile are\ngenerated in the DeviceCMYK color space and the ICC profile is not embedded. I\nhave yet to take a closer look at that one."}, {"count": 9, "tags": [], "creator": "pc.subscriptions@gmail.com", "attachment_id": null, "id": 95754, "time": "2006-11-13T02:30:08Z", "bug_id": 40729, "creation_time": "2006-11-13T02:30:08Z", "is_private": false, "text": "\n> While testing I found that CMYK color referencing an CMYK color profile are\n> generated in the DeviceCMYK color space and the ICC profile is not embedded. I\n> have yet to take a closer look at that one.\n\nCould you provide the test. I would be happy to take a look at this later this week.\n"}, {"count": 10, "tags": [], "creator": "jeremias@apache.org", "attachment_id": 19118, "is_private": false, "id": 95756, "time": "2006-11-13T02:56:01Z", "bug_id": 40729, "creation_time": "2006-11-13T02:56:01Z", "text": "Created attachment 19118\nExample using CMYK colors with a CMYK color profile\n\nYou can get the color profile for color-sandbox.fo here:\nhttp://www.eci.org/eci/en/060_downloads.php\n(download ECI_Offset_2004.zip)"}, {"count": 11, "tags": [], "creator": "pc.subscriptions@gmail.com", "attachment_id": null, "id": 95759, "time": "2006-11-13T04:25:20Z", "bug_id": 40729, "creation_time": "2006-11-13T04:25:20Z", "is_private": false, "text": "The problem is in the PDFColor constructor\n\nReplacing the line \n      if(cs!=null && cs.getType()==ColorSpace.TYPE_CMYK) {\nwith \n      if(cs!=null && cs instanceof CMYKColorSpace) {\n\nfixes the issue I think.\n\nNot entirely sure this is the most elegant/performant/full proof solution.\n\nBtw, sorry for the low quality of this patch (not having any real sponsors made\nme take shortcuts, like not making *any* unit tests). Always wrong.\n\nAnyway, should I submit a \"real\" fop patch for this or is this entry sufficient?\n\n"}, {"count": 12, "tags": [], "bug_id": 40729, "attachment_id": null, "text": "Sorry, Peter, I didn't want to imply that your patch was of low quality. It was\nactually very high quality. Just because I had to touch up the code a little\nconcerning our code conventions doesn't make your patch bad. I was very happy\nwith your patch and was only logging my changes to your original patch. If you\ncan match our Java convention for the next patch, that's of course a good thing\nsince it will save me time to go over it.\n\nNo need to send a patch just to change one line. I'll look at it.", "id": 95760, "time": "2006-11-13T05:43:32Z", "creator": "jeremias@apache.org", "creation_time": "2006-11-13T05:43:32Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 40729, "attachment_id": null, "id": 95763, "time": "2006-11-13T06:24:34Z", "creator": "jeremias@apache.org", "creation_time": "2006-11-13T06:24:34Z", "is_private": false, "text": "Fix committed: http://svn.apache.org/viewvc?view=rev&rev=474327 Thanks!"}, {"count": 14, "tags": [], "bug_id": 40729, "attachment_id": null, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155622, "time": "2012-04-01T06:31:38Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:31:38Z", "is_private": false}]