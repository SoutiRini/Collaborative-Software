[{"count": 0, "tags": [], "creator": "tometzky@batory.org.pl", "attachment_id": null, "id": 38164, "time": "2003-06-02T12:41:44Z", "bug_id": 20414, "creation_time": "2003-06-02T12:41:44Z", "is_private": false, "text": "DirectoryIndex directive is accumulated. It's undocumented behavior but used by\nsome vendors (for example RedHat) for packaging modules like PHP (in\n/etc/httpd/conf.d/php.conf file included with \"Include /etc/httpd/conf.d/*.conf\").\n\nBut its accumulation behavior is not clear - it works within one context - first\noccurence of DirectoryIndex in VirtualHost overwrites the parent context list.\n\nPlease document this behavior or remove it. Or even better make it possible to\nadd index files at end/start of DirectoryIndex list (with another directive,\nf.e. DirectoryIndexAdd or with '+' before option, which can cause problems with\nadding filenames starting with '+'). There should also be possible to clear the\nlist."}, {"attachment_id": null, "tags": [], "bug_id": 20414, "is_private": false, "count": 1, "id": 38166, "time": "2003-06-02T12:58:42Z", "creator": "nd@perlig.de", "creation_time": "2003-06-02T12:58:42Z", "text": "It's not intended to be. If it's redhat specific (don't know their\nmodifications, if there are), please post the issue in their bug db.\n\nIf not, please provide a sample configuration, that shows undocumented behaviour.\n\nThanks."}, {"count": 2, "tags": [], "bug_id": 20414, "attachment_id": null, "id": 38174, "time": "2003-06-02T14:03:04Z", "creator": "tometzky@batory.org.pl", "creation_time": "2003-06-02T14:03:04Z", "is_private": false, "text": "That's where I started:\nhttp://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=92028\n\nI just compiled pure httpd-2.0.46 on RH9 (kernel-2.4.20, glibc-2.3.2, gcc-3.2.2)\nwith ./configure --with-port=8000 --enable-modules=mod_dir\n--prefix=$HOME/local/apache\nand started it with httpd.conf:\n    Listen 8000\n    <Directory \"/home/tometzky/local/apache/htdocs\">\n        Order allow,deny\n        Allow from all\n    </Directory>\n    DirectoryIndex index.html\n    DirectoryIndex index.htm\n\nBoth index.html and index.htm work as index files. It's not redhat specyfic. But\njust removing it will brake some installations and a possibility of packaging of\nmodules."}, {"count": 3, "attachment_id": null, "bug_id": 20414, "is_private": false, "id": 38176, "time": "2003-06-02T14:27:15Z", "creator": "nd@perlig.de", "creation_time": "2003-06-02T14:27:15Z", "tags": [], "text": "Ah well, accepting this as a documentation bug.\n\nThe behaviour can be stated as follows:\nWithin the _same_ scope,\n    DirectoryIndex index.html\n    DirectoryIndex index.htm\n\nis effectively the same as\n    DirectoryIndex index.html index.htm\n\nThat is the way, iterative directives usually work.\nClearing the list entirely may be a considerable feature anyway.\n\nThanks for your report!"}, {"count": 4, "tags": [], "text": "I think more useful feature would be a possibility to add names to inherited\nlist  in virtualhost and directory scopes. I needed this to add index.php3 to\ndefault index list for one virtual host with some old php scripts.\n", "attachment_id": null, "bug_id": 20414, "id": 38182, "time": "2003-06-02T14:57:15Z", "creator": "tometzky@batory.org.pl", "creation_time": "2003-06-02T14:57:15Z", "is_private": false}, {"attachment_id": 15279, "tags": [], "bug_id": 20414, "text": "Created attachment 15279\nPatch (originally against 2.0.52) that implements AddDirectoryIndex/RemoveDirectoryIndex\n\nWe have implemented something similar to this for Gentoo. The directives are\nAddDirectoryIndex and RemoveDirectoryIndex and work like DirectoryIndex.\n\nAddDirectoryIndex adds to the current DirectoryIndex\nRemoveDirectoryIndex removes an item from the current DirectoryIndex.\n\nI have attached the patch we are using, in the hopes that it can be used as a\ngood start to implementing this feature.", "count": 5, "id": 75936, "time": "2005-06-03T04:32:21Z", "creator": "vericgar@gentoo.org", "creation_time": "2005-06-03T04:32:21Z", "is_private": false}, {"count": 6, "text": "What about just modifying the current DirectoryIndex directive instead of adding\ntwo new directives..  like the following\n\nDirectoryIndex index.html            # Additive as before, for backward compat\nDirectoryIndex -index.html           # Subtractive\nDirectoryIndex =index.html index.php # Replaces the entire directory index \n\nI'll fiddle with a patch and attach it on here during the next few days\nimplementing this.", "creator": "urkle@outoforder.cc", "attachment_id": null, "id": 77221, "time": "2005-07-12T17:06:39Z", "bug_id": 20414, "creation_time": "2005-07-12T17:06:39Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 20414, "is_private": false, "count": 7, "id": 90339, "time": "2006-06-18T15:23:28Z", "creator": "dan.bolser@gmail.com", "creation_time": "2006-06-18T15:23:28Z", "text": "It appears that the 'accumulation' of \"DirectoryIndex\" directives is now\ndocumented, but that it doesn't always behave as documented. For example I have\nthe following in my .htaccess file\n\nDirectoryIndex anUnlikelyCombinationOfCharacters\n\n\nWhich effectively disables the use of DirectoryIndex (it is ignoring both\nindex.htm and index.html in the subdirectories where I placed the .htaccess file).\n\nMy global configuration looks like this...\n\nDirectoryIndex index.php index.html\n\n\nI would like to suggest the following very simple syntax to deal with the\n(broken?) accumulation behaviour...\n\nDirectoryIndex off\n\n\nI imagine it is extremely rare for someone to use the file 'off' as the\ndirectory index, and such people should be made to pay for their eccentricity,\nnot cosseted like babies. \n\nThanks very much for your consideration,\n\nDan."}, {"attachment_id": null, "tags": [], "bug_id": 20414, "is_private": false, "count": 8, "id": 136987, "time": "2010-05-20T11:43:51Z", "creator": "apache-bugzilla@jessemccarthy.net", "creation_time": "2010-05-20T11:43:51Z", "text": "The previous comment (#7) seems to say that this behavior was documented at the time of the comment, but I don't see it documented now.\n\nI think it would be advantageous to be able to add to the value in any of the configuration contexts.  Being able to add, subtract, or reset the value at will would be better still.\n\nBut regardless of how it behaves, it would be really beneficial to have the actual behavior accurately documented.  Did I somehow miss that it is?"}, {"count": 9, "tags": [], "text": "Can I please back up request that the documentation be improved.  This undocumented behavior has just caused us a lot of grief and I find it very rare indeed that the apache reference documentation has failed to clarify an issue.  All it needs to say is something like \"Note:  DirectoryIndex declarations are additive within any one context, but in a new context, the first DirectoryIndex declaration overrides previous ones\".", "is_private": false, "bug_id": 20414, "id": 160192, "time": "2012-06-23T09:24:27Z", "creator": "frankc@cmss.ch", "creation_time": "2012-06-23T09:24:27Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "humbedooh@apache.org", "attachment_id": null, "id": 160211, "time": "2012-06-24T12:02:12Z", "bug_id": 20414, "creation_time": "2012-06-24T12:02:12Z", "is_private": false, "text": "I have added a paragraph to the directive's usage section in the trunk docs. Please take a look at http://httpd.apache.org/docs/trunk/mod/mod_dir.html#directoryindex and let me know if this is sufficient. If so, I'll roll it out to 2.2 and 2.4."}, {"count": 11, "tags": [], "text": "my 2c to make it clear:\n\n1) link to sections.html with the \"same context\" text (some links somewhere know how to do this)\n2) drive home the (assumed?) equivalence of \n\n<Directory /foo>\nDirectoryIndex foo\nDirectoryIndex bar\n</Directory>\n\n<Directory /foo>\nDirectoryIndex foo bar\n</Directory>", "is_private": false, "bug_id": 20414, "id": 160212, "time": "2012-06-24T12:55:51Z", "creator": "covener@gmail.com", "creation_time": "2012-06-24T12:55:51Z", "attachment_id": null}, {"count": 12, "tags": [], "text": "Closing this as fixed in the documentation for 2.2/2.4/trunk.", "attachment_id": null, "bug_id": 20414, "id": 160237, "time": "2012-06-25T15:10:58Z", "creator": "humbedooh@apache.org", "creation_time": "2012-06-25T15:10:58Z", "is_private": false}]