[{"count": 0, "tags": [], "creator": "bertrand.guiral@indexmultimedia.com", "attachment_id": null, "id": 92292, "time": "2006-08-17T09:55:12Z", "bug_id": 40274, "creation_time": "2006-08-17T09:55:12Z", "is_private": false, "text": "I define a context.xml inside META-INF of a war  where i define a \njavax.sql.DataSource Ressource.\nInside a servlet (I init in first) , i acces this ressource:\n\n\npublic void init() throws ServletException {\n         super.init();\n         try {\n             Thread.sleep(1000);\n            Context contextInitial = new InitialContext();\n            String name = \"java:comp/env/jdbc/cgw\";\n            DataSource datasource =(DataSource) contextInitial.lookup(name);\n            Connection connection = datasource.getConnection();\n            ......\n            \n       \nIf i have a 1000 ms sleep, it is working.\nIf i suppres this sleep, i have the following error error:\n\nServletAdmin123 org.apache.commons.dbcp.BasicDataSource@1724a9d\norg.apache.commons.dbcp.SQLNestedException: Cannot create JDBC driver of \nclass '' for connect URL 'null'\n\tat org.apache.commons.dbcp.BasicDataSource.createDataSource\n(BasicDataSource.java:780)\n\tat org.apache.commons.dbcp.BasicDataSource.getConnection\n(BasicDataSource.java:540)\n\tat com.mm123.nokia.cgw.web.ServletAdmin123.init\n(ServletAdmin123.java:54)\n\tat javax.servlet.GenericServlet.init(GenericServlet.java:211)\n\tat org.apache.catalina.core.StandardWrapper.loadServlet\n(StandardWrapper.java:1029)\n\tat org.apache.catalina.core.StandardWrapper.load\n(StandardWrapper.java:862)\n\tat org.apache.catalina.core.StandardContext.loadOnStartup\n(StandardContext.java:4013)\n\tat org.apache.catalina.core.StandardContext.start\n(StandardContext.java:4357)\n\tat org.apache.catalina.core.ContainerBase.start\n(ContainerBase.java:1083)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:789)\n\tat org.apache.catalina.core.ContainerBase.start\n(ContainerBase.java:1083)\n\tat org.apache.catalina.core.StandardEngine.start\n(StandardEngine.java:478)\n\tat org.apache.catalina.core.StandardService.start\n(StandardService.java:480)\n\tat org.apache.catalina.core.StandardServer.start\n(StandardServer.java:2313)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:556)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:585)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:287)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:425)\nCaused by: java.sql.SQLException: No suitable driver\n\tat java.sql.DriverManager.getDriver(DriverManager.java:243)\n\tat org.apache.commons.dbcp.BasicDataSource.createDataSource\n(BasicDataSource.java:773)\n\t... 20 more"}, {"count": 1, "tags": [], "creator": "yoavs@computer.org", "text": "Does this still happen for you in Tomcat 5.5?  Getting the InitialContext works\nfor me both from a Servlet's init method and from a ContextListener's\ncontextInitialized method (which I'd recommend as the better approach) in 5.5.20.", "id": 97280, "time": "2006-12-25T05:36:57Z", "bug_id": 40274, "creation_time": "2006-12-25T05:36:57Z", "is_private": false, "attachment_id": null}]