[{"count": 0, "tags": [], "creator": "sstafford@modeln.com", "attachment_id": null, "is_private": false, "id": 29173, "time": "2003-01-11T02:23:01Z", "bug_id": 15985, "creation_time": "2003-01-11T02:23:01Z", "text": "I'm not 100% certain whether this is a bug or some sort of quirky environmental \nproblem, but I'm submitting it just in case it is a bug. \n\n   [ERROR] Couldn't find hyphenation pattern en\n   [ERROR] Error building hyphenation tree for language en\n\nThe en.hyp does appear in the FOP jar file, and I assume that it was built \ncorrectly as part of the FOP distribution (although I haven't tried building it \nmyself).  I'm not sure what part of my XSL-FO file is causing the error \n(although it appears to be coming from somewhere on the first page of a 2 page \ndocument).  The actual stack trace is shown below.\n\nThere were a couple of posts on the web that mentioned this problem, but they \nseemed to imply that it was related to the XSLT processor.  I've tried both the \nlatest version of Saxon and Xalan and still get the same error.  I can easily \nreproduce the error (although I'm not sure what is causing it), so please \ncontact me if you need more information. \n\nI'm using the following packages:\n\n   fop-0.20.5rc.jar\n   xalan-2.4.1.jar\n   xercesImpl-2.2.1.jar\n\n\njava.io.InvalidClassException: \norg.apache.fop.layout.hyphenation.HyphenationTree; Local class not compatible: \nstream classdesc serialVersionUID=6956085100635965297 local class \nserialVersionUID=-7784516835472871478\n\tat java.io.ObjectStreamClass.validateLocalClass\n(ObjectStreamClass.java:523)\n\tat java.io.ObjectStreamClass.setClass(ObjectStreamClass.java:567)\n\tat java.io.ObjectInputStream.inputClassDescriptor\n(ObjectInputStream.java:936)\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:366)\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:236)\n\tat java.io.ObjectInputStream.inputObject(ObjectInputStream.java:1186)\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:386)\n\tat java.io.ObjectInputStream.readObject(ObjectInputStream.java:236)\n\tat org.apache.fop.layout.hyphenation.Hyphenator.getFopHyphenationTree\n(Hyphenator.java:122)\n\tat org.apache.fop.layout.hyphenation.Hyphenator.getHyphenationTree\n(Hyphenator.java:48)\n\tat org.apache.fop.layout.hyphenation.Hyphenator.hyphenate\n(Hyphenator.java:208)\n\tat org.apache.fop.layout.LineArea.doHyphenation(LineArea.java:992)\n\tat org.apache.fop.layout.LineArea.addText(LineArea.java:488)\n\tat org.apache.fop.fo.FOText.addRealText(FOText.java:232)\n\tat org.apache.fop.fo.FOText.addText(FOText.java:206)\n\tat org.apache.fop.fo.FOText.layout(FOText.java:118)\n\tat org.apache.fop.fo.flow.Block.layout(Block.java:206)\n\tat org.apache.fop.fo.flow.AbstractFlow.layout(AbstractFlow.java:111)\n\tat org.apache.fop.fo.flow.AbstractFlow.layout(AbstractFlow.java:68)\n\tat org.apache.fop.fo.pagination.PageSequence.makePage\n(PageSequence.java:352)\n\tat org.apache.fop.fo.pagination.PageSequence.format\n(PageSequence.java:290)\n\tat org.apache.fop.apps.StreamRenderer.render(StreamRenderer.java:210)\n\tat org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:177)\n\tat org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown \nSource)\n\tat org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement\n(Unknown Source)\n\tat \norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.\ndispatch(Unknown Source)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument\n(Unknown Source)\n\tat org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n\tat org.apache.fop.apps.Driver.render(Driver.java:457)\n\tat org.apache.fop.apps.CommandLineStarter.run\n(CommandLineStarter.java:69)\n\tat org.apache.fop.apps.Fop.main(Fop.java:19)"}, {"text": "Yes, that looks like extremely quirky environment problem. *.hyp files are\nserialized HyphenationTree objects, which are serialized during build process.\nafaiu the exception means hyp file cannot be deserialized into HyphenationTree\nobject due to version inconsistency. Make sure you don't have another fop.jar or\nfop classes or hyp files somewhere in the classpath. Try to rebuild fop after all.", "tags": [], "bug_id": 15985, "is_private": false, "count": 1, "id": 29194, "time": "2003-01-11T18:36:52Z", "creator": "oleg@tkachenko.com", "creation_time": "2003-01-11T18:36:52Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 15985, "is_private": false, "text": "Created attachment 4408\nXSL-FO document used to reproduce the exception", "id": 29305, "time": "2003-01-13T20:49:00Z", "creator": "sstafford@modeln.com", "creation_time": "2003-01-13T20:49:00Z", "attachment_id": 4408}, {"count": 3, "tags": [], "bug_id": 15985, "text": "Created attachment 4409\nOutput produced by FOP when processing the XSL-FO input file", "id": 29306, "time": "2003-01-13T20:49:41Z", "creator": "sstafford@modeln.com", "creation_time": "2003-01-13T20:49:41Z", "is_private": false, "attachment_id": 4409}, {"count": 4, "tags": [], "bug_id": 15985, "is_private": false, "text": "I've checked my classpath by manually inspecting the java lib directories and \nthe jar files passed to FOP (see below) and don't believe that a duplicate \nexists in my classpath.  I even tried stripping my document down to a bare \nminimum and still receive a hyphenation exception.  I've attached the XSL-FO \ndocument which is producing the error.\n\nIf I run FOP 0.20.4 (by replacing the entire FOP jar), the exception no longer \nappears, which leads me to believe that this might indeed be a problem with \n0.20.5rc.  Could you please attempt to generate a PDF from the attached FO file \nto see if you can reproduce the error?\n\nThanks,\nShawn\n\n\n\nThis is the command that I've been using to run FOP:\n\n/cygdrive/c/jdk1.3.0_02/bin/java -Xms512m -Xmx1028m -classpath \"\nC:\\Oracle\\Ora81\\orb\\classes\\yoj.jar;\nC:\\Oracle\\Ora81\\orb\\classes\\share.zip;\nc:\\modeln_education\\tools\\docbook\\lib\\ant-1.4.1.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\avalon-framework-cvs-20020315.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\batik.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\bsf.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\buildtools.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\fop-0.20.5rc.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\jfor-0.7.1.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\jimi-1.0.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\stylebook.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\xercesImpl-2.2.1.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\xml-apis.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\xalan\\xalan-2.4.1.jar;\nc:\\modeln_education\\tools\\docbook\\lib\\xalan\\xalan-2.x.x-xsl.jar\" \norg.apache.fop.apps.Fop \n-fo content/devguide/book_xml.fo \n-pdf xml_content.pdf\n\n\n", "id": 29309, "time": "2003-01-13T21:20:53Z", "creator": "sstafford@modeln.com", "creation_time": "2003-01-13T21:20:53Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 15985, "attachment_id": null, "text": "Oh yes, and I did try a complete rebuild of FOP 0.20.5rc with the same results.", "id": 29310, "time": "2003-01-13T21:22:48Z", "creator": "sstafford@modeln.com", "creation_time": "2003-01-13T21:22:48Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 15985, "text": "Mismatch caused by build system change, fixed in 0.20.5", "id": 32200, "time": "2003-03-01T00:30:07Z", "creator": "j3322ptm@yahoo.de", "creation_time": "2003-03-01T00:30:07Z", "is_private": false, "attachment_id": null}, {"count": 7, "attachment_id": null, "bug_id": 15985, "text": "The en.xml file has been removed with the CVS comment: \n \nRevision 1.1.2.2 , Tue Feb 18 04:39:10 2003 UTC (13 days, 9 hours ago) by chrisg  \nBranch: fop-0_20_2-maintain  \nChanges since 1.1.2.1: +0 -0 lines  \nFILE REMOVED  \nremoved hyphenation patterns with unclear/problematic license \n \nI've checked out the latest revision from branch fop-0_20_2-maintain and the problem \nstill exists! The country in the Hyphenator class is empty (null) and therefore it tries to \nopen the en.xml file and not the en_GB.xml file which is the only one left for english \nhyphenation. ", "id": 32329, "time": "2003-03-03T14:47:31Z", "creator": "michael@rumpfonline.de", "creation_time": "2003-03-03T14:47:31Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "bug_id": 15985, "text": "These are two completely different issues.\nSet the hyphenation language to en_GB until someone donates a hyphenation\nfile for en without license problems.", "id": 32337, "time": "2003-03-03T15:22:21Z", "creator": "j3322ptm@yahoo.de", "creation_time": "2003-03-03T15:22:21Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 15985, "attachment_id": null, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155997, "time": "2012-04-01T06:52:10Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:52:10Z", "is_private": false}]