[{"count": 0, "tags": [], "creator": "robin.cordier@gmail.com", "attachment_id": null, "id": 136865, "time": "2010-05-14T14:44:33Z", "bug_id": 49293, "creation_time": "2010-05-14T14:44:33Z", "is_private": false, "text": "Hello,\n\nthere is my first bug report, and I'm not a sysadmin expert, but this looks like a bug.\n\nMy schema looks like:\ndn: uid=robin,ou=users,dc=xxx,dc=xxx\ncn: Robin\nsn: Cordier\nuid: robin\nuidNumber: 20001\nobjectClass: cnUser\nobjectClass: cnSettings\nuserPassword: MyPass\n\n\ndn: cnConf=WebAdmin,uid=robin,ou=users,dc=xxx,dc=xxx\ncnConf: WebAdmin\nallow: TRUE\nuid: robin\ndescription: Administration web\npermission: admin\nobjectClass: cnWeb\n\n\nWhen I try to authentificate an user, I can see this message:\nauth_ldap authorise: require ldap-filter: authorisation failed [DN Comparison FALSE (checked on server)][Compare False]\n\nMy .htaccess is:\nAuthLDAPURL ldap://ldap.cordier.im/ou=users,dc=cordier,dc=im??sub?(&(objectClass=cnUser)(uid=*))\nAuthType Basic\nAuthName \"Athentification requise.\"\nAuthBasicProvider ldap\nAuthUserFile /dev/null\nRequire ldap-filter &(&(objectClass=cnWeb)(allow=TRUE)(permission=admin))\n\nThe ldap log returns:\nconn=74 op=16 SRCH base=\"ou=users,dc=xxx,dc=xxx\" scope=2 deref=3 filter=\"(&(&(objectClass=cnPerm)(level<=10))(uid=robin))\" <= bdb_inequality_candidates: (level) not indexed\nconn=74 op=16 SEARCH RESULT tag=101 err=0 nentries=1 text=\nconn=74 op=17 SRCH base=\"cnConf=WebAdmin,uid=robin,ou=users,dc=xxx,dc=xxx\" scope=0 deref=3 filter=\"(objectClass=*)\"\nconn=74 op=17 SEARCH RESULT tag=101 err=0 nentries=1 text=\n\n\nSo, if I understand well, ldap find my DN, but, authnz-ldap forbid the access because it is not the same DN. Is it normal, or an undocumented feature?\n\nThanks :)"}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 142375, "time": "2010-12-04T09:36:27Z", "bug_id": 49293, "creation_time": "2010-12-04T09:36:27Z", "is_private": false, "text": "you need to tell httpd how to lookup a web username to a DN with the first parm after the '?'.  \n\n\"uid\" is the default and leads to more then 1 DN in this case."}]