[{"count": 0, "tags": [], "text": "Looks like possible RFC 2616 MUST violations.\nThere is one attachment for each known hop-by-hop\nheader that Apache incorrectly forwards.\n\nSee attached traces for details and ways to reproduce.\n\nTest case IDs in the trace link to human-oriented test case\ndescription and RFC quotes, if available.", "is_private": false, "id": 28965, "creation_time": "2003-01-07T21:24:36Z", "time": "2003-01-07T21:24:36Z", "creator": "coad@measurement-factory.com", "bug_id": 15861, "attachment_id": null}, {"count": 1, "attachment_id": 4355, "creator": "coad@measurement-factory.com", "text": "Created attachment 4355\nKeep-Alive case trace", "id": 28967, "time": "2003-01-07T21:25:24Z", "bug_id": 15861, "creation_time": "2003-01-07T21:25:24Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "coad@measurement-factory.com", "text": "Created attachment 4357\nUpgrade case trace", "id": 28969, "time": "2003-01-07T21:27:10Z", "bug_id": 15861, "creation_time": "2003-01-07T21:27:10Z", "is_private": false, "attachment_id": 4357}, {"count": 3, "attachment_id": 4358, "bug_id": 15861, "is_private": false, "id": 28970, "time": "2003-01-07T21:29:05Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-01-07T21:29:05Z", "tags": [], "text": "Created attachment 4358\nTrailer case trace"}, {"count": 4, "attachment_id": 4359, "creator": "coad@measurement-factory.com", "text": "Created attachment 4359\nProxy-Authenticate case trace", "id": 28971, "time": "2003-01-07T21:31:30Z", "bug_id": 15861, "creation_time": "2003-01-07T21:31:30Z", "tags": [], "is_private": false}, {"count": 5, "attachment_id": 7484, "bug_id": 15861, "is_private": false, "id": 41274, "time": "2003-07-24T10:09:53Z", "creator": "mnicel@novell.com", "creation_time": "2003-07-24T10:09:53Z", "tags": [], "text": "Created attachment 7484\nFix in ap_proxy_http_process_response() in modules\\proxy\\proxy_http.c"}, {"count": 6, "tags": [], "bug_id": 15861, "is_private": false, "text": "Fix to remove the hop-by-hop headers, similar to removal of \"Transfer-\nEncoding\". \nIf these removed headers are not required to be taken into rp->headers_in, \nthese can be unset immediately after the ap_proxy_clear_connection() call in \nap_proxy_http_process_response() at line 800 in proxy_http.c.", "id": 41276, "time": "2003-07-24T10:21:57Z", "creator": "mnicel@novell.com", "creation_time": "2003-07-24T10:21:57Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 15861, "attachment_id": null, "id": 42830, "time": "2003-08-15T21:55:26Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-08-15T21:55:26Z", "is_private": false, "text": "With the patch in the attachment #7484, Apache passes\nall test cases except for the \"Trailer\" case. The\npatch incorrectly filters out \"Trailers\" header,\npossibly due to a known typo in RFC 2616:\n\nhttp://skrb.org/ietf/http_errata.html#trailer-hop\n\nPlease adjust the patch to spell \"Trailer\" and\nthe bug will be completely gone.\n\nThank you.\n"}, {"count": 8, "tags": [], "text": "Created attachment 7865\nPatch with corrected \"Trailers\" to \"Trailer\" - known typo in rfc 2616.", "attachment_id": 7865, "bug_id": 15861, "id": 42887, "time": "2003-08-18T08:44:10Z", "creator": "mnicel@novell.com", "creation_time": "2003-08-18T08:44:10Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 15861, "is_private": false, "text": "I'm going through the bug db to make sure patches are findable.  Please see \nhttp://httpd.apache.org/dev/patches.html\n", "id": 47801, "time": "2003-11-21T17:14:06Z", "creator": "trawick@apache.org", "creation_time": "2003-11-21T17:14:06Z", "attachment_id": null}, {"count": 10, "tags": [], "text": "Can some one look at this patch and commit if found ok. This would help us close\none of the open PRs on RFC 2616 violations.", "is_private": false, "id": 52475, "creation_time": "2004-02-18T10:03:16Z", "time": "2004-02-18T10:03:16Z", "creator": "mnicel@novell.com", "bug_id": 15861, "attachment_id": null}, {"count": 11, "attachment_id": null, "bug_id": 15861, "is_private": false, "id": 60160, "time": "2004-07-05T19:44:29Z", "creator": "nick@webthing.com", "creation_time": "2004-07-05T19:44:29Z", "tags": [], "text": "I can't see a MUST about stripping these headers.  Where is this?  Section\n13.5.1 defines them as\n\n      - Hop-by-hop headers, which are meaningful only for a single\n        transport-level connection, and are not stored by caches or\n        forwarded by proxies.\n\nfrom which we might infer a SHOULD.  But nothing in there looks like a MUST to me."}, {"count": 12, "tags": [], "text": "Definitions, like the hop-by-hop definition you quoted from, are usually implicit MUST-level requirements. While it is unfortunate that those definitions are not explicit MUSTs, they have MUST-level force because violating them (e.g., forwarding hop-by-hop headers) would break other MUSTs or core protocol logic. Here are a few RFC 2616 quotes that illustrate why stripping hop-by-hop headers is a MUST:\n\n      When a cache is semantically transparent, the client\n      receives exactly the same response (except for hop-by-hop headers)\n      that it would have received had its request been handled directly\n      by the origin server.\n\n(i.e., if a cache does not strip hop-by-hop headers, it is not a semantically transparent cache)\n\n   Other hop-by-hop headers MUST be listed in a Connection header,\n   (section 14.10) to be introduced into HTTP/1.1 (or later).\n\n(and deleting headers listed in Connection is an explicit MUST)\n\n   However, the Expect\n   request-header itself is end-to-end; it MUST be forwarded if the\n   request is forwarded.\n\n(i.e., if a request header is not forwarded, it is a hop-by-hop header because all non-end-to-end headers are hop-by-hop, by definition)\n\n   The Connection general-header field allows the sender to specify\n   options that are desired for that particular connection and MUST NOT\n   be communicated by proxies over further connections.\n\n(if Connection, which is a hop-by-hop header, is forwarded, the above MUST\nwould make no sense and would be violated)\n\nYou can see definitions of other explicit hop-by-hop headers (e.g., Upgrade) for more examples.\n\nHowever, at the end of the day, it is your judgment call. Co-Advisor \nequates \"are not forwarded by proxies\" to a MUST. You do not have to.\nWe may seek more authoritative opinion from the HTTP WG mailing list.\n", "attachment_id": null, "bug_id": 15861, "id": 60174, "time": "2004-07-06T05:46:20Z", "creator": "coad@measurement-factory.com", "creation_time": "2004-07-06T05:46:20Z", "is_private": false}, {"count": 13, "tags": [], "creator": "davi@apache.org", "text": "It seems as of 2.2.4 the issue is fixed.", "id": 104232, "time": "2007-06-08T13:11:04Z", "bug_id": 15861, "creation_time": "2007-06-08T13:11:04Z", "is_private": false, "attachment_id": null}]