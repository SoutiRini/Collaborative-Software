[{"count": 0, "attachment_id": null, "bug_id": 36680, "is_private": false, "id": 80016, "time": "2005-09-16T00:28:21Z", "creator": "adamatwork@fanello.net", "creation_time": "2005-09-16T00:28:21Z", "tags": [], "text": "The attached input.xml and stylesheet.xsl produces bad results with the <xslt>\ntask. The results are good with the current Xalan-J run from the command-line.\n\nThe problem is that a <xsl:for-each>, when selecting on a node-set variable and\nchecking the position() within the loop, does not make it past the first loop\niteration. If one of these conditions is removed, it runs correctly."}, {"count": 1, "tags": [], "text": "Created attachment 16419\nAnt build.xml", "attachment_id": 16419, "id": 80017, "creation_time": "2005-09-16T00:29:26Z", "time": "2005-09-16T00:29:26Z", "creator": "adamatwork@fanello.net", "bug_id": 36680, "is_private": false}, {"count": 2, "tags": [], "text": "Created attachment 16420\nTest input file", "is_private": false, "id": 80018, "creator": "adamatwork@fanello.net", "time": "2005-09-16T00:30:01Z", "bug_id": 36680, "creation_time": "2005-09-16T00:30:01Z", "attachment_id": 16420}, {"count": 3, "text": "Created attachment 16421\nDemo stylesheet", "bug_id": 36680, "attachment_id": 16421, "id": 80019, "time": "2005-09-16T00:30:53Z", "creator": "adamatwork@fanello.net", "creation_time": "2005-09-16T00:30:53Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 36680, "attachment_id": 16422, "text": "Created attachment 16422\nOutput from <xslt>\n\nOutput from ant <xslt> task. The second case of the three shows the bug.", "id": 80020, "time": "2005-09-16T00:31:53Z", "creator": "adamatwork@fanello.net", "creation_time": "2005-09-16T00:31:53Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 36680, "text": "Created attachment 16423\nGood Xalan Output\n\nShows what the output is supposed to be, as given by Xalan-J 2.7.0 on the\ncommand-line.", "id": 80021, "time": "2005-09-16T00:33:22Z", "creator": "adamatwork@fanello.net", "creation_time": "2005-09-16T00:33:22Z", "is_private": false, "attachment_id": 16423}, {"count": 6, "tags": [], "bug_id": 36680, "attachment_id": null, "id": 80022, "time": "2005-09-16T00:38:58Z", "creator": "adamatwork@fanello.net", "creation_time": "2005-09-16T00:38:58Z", "is_private": false, "text": "Using JDK 1.5.0_04, should that be relevant.\nLinux scorpy 2.4.21-4.EL #1 Fri Oct 3 18:13:58 EDT 2003 i686 i686 i386 GNU/Linux\n"}, {"count": 7, "text": "1. do you have xalan.jar in ant home? \n2. which version?\n3. what is the output of ant -diagnostics?\n\nIf you dont have xalan.jar in Ant's classpath, it picks up the built in one,\nwhich is, well, different. ", "bug_id": 36680, "attachment_id": null, "id": 80039, "time": "2005-09-16T12:54:15Z", "creator": "stevel@apache.org", "creation_time": "2005-09-16T12:54:15Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "text": "A have the Ant distribution, unmodified. Where would I put an updated xalan.jar?\nShould I write a bug against the JRE for this problem then?\n\n------- Ant diagnostics report -------\nApache Ant version 1.6.5 compiled on June 2 2005\n \n-------------------------------------------\n Implementation Version (JDK1.2+ only)\n-------------------------------------------\ncore tasks     : 1.6.5\noptional tasks : 1.6.5\n \n-------------------------------------------\n ANT_HOME/lib jar listing\n-------------------------------------------\nant.home: /opt/apache-ant-1.6.5\nant-antlr.jar (5667 bytes)\nant-apache-bcel.jar (8617 bytes)\nant-apache-bsf.jar (12597 bytes)\nant-apache-log4j.jar (3022 bytes)\nant-apache-oro.jar (48034 bytes)\nant-apache-regexp.jar (3724 bytes)\nant-apache-resolver.jar (4082 bytes)\nant-commons-logging.jar (3864 bytes)\nant-commons-net.jar (35303 bytes)\nant-icontract.jar (9721 bytes)\nant-jai.jar (21359 bytes)\nant-javamail.jar (6761 bytes)\nant-jdepend.jar (8160 bytes)\nant-jmf.jar (6605 bytes)\nant-jsch.jar (22726 bytes)\nant-junit.jar (74237 bytes)\nant-launcher.jar (9180 bytes)\nant-netrexx.jar (9998 bytes)\nant-nodeps.jar (421008 bytes)\nant-starteam.jar (35472 bytes)\nant-stylebook.jar (2328 bytes)\nant-swing.jar (6763 bytes)\nant-trax.jar (68841 bytes)\nant-vaj.jar (49742 bytes)\nant-weblogic.jar (14363 bytes)\nant-xalan1.jar (4465 bytes)\nant-xslp.jar (2244 bytes)\nant.jar (1034049 bytes)\nxercesImpl.jar (1010675 bytes)\nxml-apis.jar (124724 bytes)\n \n-------------------------------------------\n Tasks availability\n-------------------------------------------\nimage : Missing dependency com.sun.media.jai.codec.FileSeekableStream\nsshexec : Missing dependency com.jcraft.jsch.UserInfo\nscp : Missing dependency com.jcraft.jsch.UserInfo\njdepend : Missing dependency jdepend.xmlui.JDepend\njunit : Missing dependency junit.framework.Test\n \n-------------------------------------------\n org.apache.env.Which diagnostics\n-------------------------------------------\nNot available.\nDownload it at http://xml.apache.org/commons/\n \n-------------------------------------------\n XML Parser information\n-------------------------------------------\nXML Parser : org.apache.xerces.jaxp.SAXParserImpl\nXML Parser Location: /opt/apache-ant-1.6.5/lib/xercesImpl.jar\n \n-------------------------------------------\n System properties\n-------------------------------------------\njava.runtime.name : Java(TM) 2 Runtime Environment, Standard Edition\nsun.boot.library.path : /mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/i386\njava.vm.version : 1.5.0_03-b07\nant.library.dir : /opt/apache-ant-1.6.5/lib\njava.vm.vendor : Sun Microsystems Inc.\njava.vendor.url : http://java.sun.com/\npath.separator : :\njava.vm.name : Java HotSpot(TM) Client VM\nfile.encoding.pkg : sun.io\nuser.country : US\nsun.os.patch.level : unknown\njava.vm.specification.name : Java Virtual Machine Specification\nuser.dir : /mnt/iomegalnx/home/afanello/cvs/cobra/db/test\njava.runtime.version : 1.5.0_03-b07\njava.awt.graphicsenv : sun.awt.X11GraphicsEnvironment\njava.endorsed.dirs : /mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/endorsed\nos.arch : i386\njava.io.tmpdir : /tmp\nline.separator :\n \njava.vm.specification.vendor : Sun Microsystems Inc.\nos.name : Linux\nant.home : /opt/apache-ant-1.6.5\nsun.jnu.encoding : UTF-8\njava.library.path :\n/mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/i386/client:/mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/i386:/mnt/iomegalnx/opt/jdk1.5.0_03/jre/../lib/i386\njava.specification.name : Java Platform API Specification\njava.class.version : 49.0\nsun.management.compiler : HotSpot Client Compiler\nos.version : 2.4.21-4.EL\nuser.home : /home/afanello\nuser.timezone : America/Los_Angeles\njava.awt.printerjob : sun.print.PSPrinterJob\nfile.encoding : UTF-8\njava.specification.version : 1.5\nuser.name : afanello\njava.class.path :\n/opt/apache-ant-1.6.5/lib/ant-launcher.jar:/opt/apache-ant-1.6.5/lib/ant-antlr.jar:/opt/apache-ant-1.6.5/lib/ant-apache-bcel.jar:/opt/apache-ant-1.6.5/lib/ant-apache-bsf.jar:/opt/apache-ant-1.6.5/lib/ant-apache-log4j.jar:/opt/apache-ant-1.6.5/lib/ant-apache-oro.jar:/opt/apache-ant-1.6.5/lib/ant-apache-regexp.jar:/opt/apache-ant-1.6.5/lib/ant-apache-resolver.jar:/opt/apache-ant-1.6.5/lib/ant-commons-logging.jar:/opt/apache-ant-1.6.5/lib/ant-commons-net.jar:/opt/apache-ant-1.6.5/lib/ant-icontract.jar:/opt/apache-ant-1.6.5/lib/ant-jai.jar:/opt/apache-ant-1.6.5/lib/ant-javamail.jar:/opt/apache-ant-1.6.5/lib/ant-jdepend.jar:/opt/apache-ant-1.6.5/lib/ant-jmf.jar:/opt/apache-ant-1.6.5/lib/ant-jsch.jar:/opt/apache-ant-1.6.5/lib/ant-junit.jar:/opt/apache-ant-1.6.5/lib/ant-launcher.jar:/opt/apache-ant-1.6.5/lib/ant-netrexx.jar:/opt/apache-ant-1.6.5/lib/ant-nodeps.jar:/opt/apache-ant-1.6.5/lib/ant-starteam.jar:/opt/apache-ant-1.6.5/lib/ant-stylebook.jar:/opt/apache-ant-1.6.5/lib/ant-swing.jar:/opt/apache-ant-1.6.5/lib/ant-trax.jar:/opt/apache-ant-1.6.5/lib/ant-vaj.jar:/opt/apache-ant-1.6.5/lib/ant-weblogic.jar:/opt/apache-ant-1.6.5/lib/ant-xalan1.jar:/opt/apache-ant-1.6.5/lib/ant-xslp.jar:/opt/apache-ant-1.6.5/lib/ant.jar:/opt/apache-ant-1.6.5/lib/xercesImpl.jar:/opt/apache-ant-1.6.5/lib/xml-apis.jar:/mnt/iomegalnx/opt/jdk1.5.0_03/lib/tools.jar\njava.vm.specification.version : 1.0\nsun.arch.data.model : 32\njava.home : /mnt/iomegalnx/opt/jdk1.5.0_03/jre\njava.specification.vendor : Sun Microsystems Inc.\nuser.language : en\njava.vm.info : mixed mode, sharing\njava.version : 1.5.0_03\njava.ext.dirs : /mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/ext\nsun.boot.class.path :\n/mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/rt.jar:/mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/i18n.jar:/mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/sunrsasign.jar:/mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/jsse.jar:/mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/jce.jar:/mnt/iomegalnx/opt/jdk1.5.0_03/jre/lib/charsets.jar:/mnt/iomegalnx/opt/jdk1.5.0_03/jre/classes\njava.vendor : Sun Microsystems Inc.\nfile.separator : /\njava.vendor.url.bug : http://java.sun.com/cgi-bin/bugreport.cgi\nsun.cpu.endian : little\nsun.io.unicode.encoding : UnicodeLittle\nsun.desktop : gnome\nsun.cpu.isalist :\n \n(I'm not sure why it's picking up jdk1.5.0_03. JAVA_HOME is pointing to\njdk1.5.0_04.)\n", "attachment_id": null, "id": 80048, "creator": "adamatwork@fanello.net", "time": "2005-09-16T21:29:40Z", "bug_id": 36680, "creation_time": "2005-09-16T21:29:40Z", "is_private": false}, {"count": 9, "attachment_id": null, "creator": "stevel@apache.org", "is_private": false, "id": 80049, "time": "2005-09-16T22:01:09Z", "bug_id": 36680, "creation_time": "2005-09-16T22:01:09Z", "tags": [], "text": "stick xalan.jar in ANT_HOME/lib  and all will be well.\n\nIt does sound like a bug in Java1.5; so you could file there. It is probably\nunderneath a bug in the xsltc engine, also from the Xalan project. This is the\ncode-generating XSL engine that is faster in some cases, but slower and memory\nhungry in others. So we could cross-file this with Xalan.\n\nThank you for letting us know about the problem, we will update our docs to note it."}, {"count": 10, "tags": [], "text": "Putting xalan.jar in ANT_HOME/lib/ doesn't seem to make a difference. It's not\nin the classpath. I linked ant-xalan1.jar to it, but still don't see a\ndifference. It could just be using xsltc, which appears to be the real problem.\n\nI ran Xalan-J 2.7.0 from the command line with the -XSLC option, and it gives\nthe same bad output as when run from Ant. Looking at their issues list, XSLTC\nseem to have quite a few problems. This one may be related to bug 30947.\n\nIs there a way to tell ant to use the XSLT interperter rather than compiler? The\nAnt task xslt's \"processor\" attribute says that \"xslp\" is no longer supported.\n", "is_private": false, "bug_id": 36680, "id": 80060, "time": "2005-09-17T02:29:00Z", "creator": "adamatwork@fanello.net", "creation_time": "2005-09-17T02:29:00Z", "attachment_id": null}, {"count": 11, "tags": [], "text": "You can specify the trax factory if you want to have control over your trax \nimplementation. See \"Using factory settings\" at \nhttp://ant.apache.org/manual/CoreTasks/style.html\n\nClosing this bug as it is confirmed to be a xalan bug.\n\n(In reply to comment #10)\n> Is there a way to tell ant to use the XSLT interperter rather than compiler? \nThe\n> Ant task xslt's \"processor\" attribute says that \"xslp\" is no longer \nsupported.\n\n", "attachment_id": null, "id": 81569, "creator": "sbailliez@apache.org", "time": "2005-10-22T20:27:16Z", "bug_id": 36680, "creation_time": "2005-10-22T20:27:16Z", "is_private": false}, {"count": 12, "tags": [], "creator": "sbailliez@apache.org", "attachment_id": null, "is_private": false, "id": 81570, "time": "2005-10-22T20:28:21Z", "bug_id": 36680, "creation_time": "2005-10-22T20:28:21Z", "text": "Oops, coming back to set it as invalid."}, {"count": 13, "tags": [], "text": "Set to invalid", "is_private": false, "bug_id": 36680, "id": 81573, "time": "2005-10-22T20:30:03Z", "creator": "sbailliez@apache.org", "creation_time": "2005-10-22T20:30:03Z", "attachment_id": null}]