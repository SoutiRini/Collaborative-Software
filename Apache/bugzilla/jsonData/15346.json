[{"attachment_id": null, "tags": [], "bug_id": 15346, "text": "I'm the administrator of many linux server, all with apache 1.3.27 and one of\nthis enter in osirusoft blacklist because apache accept CONNECT X.X.X.X:25 http\ncommand. mod_proxy IS NOT loaded, i compile all from source and another server\n(same configuration: apache 1.3.27, php 4.2.3) answer (correctly!) method not\nallowed.\nI've configured apache to deny all connect command (i uso squid as proxy), but\nwhy apache accept CONNECT?", "count": 0, "id": 27784, "time": "2002-12-13T08:23:29Z", "creator": "r.tagliaferri@tosnet.it", "creation_time": "2002-12-13T08:23:29Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "id": 32404, "time": "2003-03-04T16:08:47Z", "bug_id": 15346, "creation_time": "2003-03-04T16:08:47Z", "is_private": false, "text": "If mod_proxy is not loaded, apache cannot relay CONNECT requests. Perhaps you\nhave some arbitrary module loaded which accepts CONNECT.\nBut you report looks more like that squid as relaying the CONNECTs?"}, {"count": 2, "tags": [], "bug_id": 15346, "attachment_id": null, "text": "squid is on other server.\n6 server with same configuration, 2 are wrong (accept connect) and 4 are ok.\nFor this thing i'm going in osirusoft for few days..", "id": 32406, "time": "2003-03-04T16:36:35Z", "creator": "r.tagliaferri@tosnet.it", "creation_time": "2003-03-04T16:36:35Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 15346, "attachment_id": null, "text": "I don't believe that they have the same configuration and the same environment.\nAs you said, mod_proxy is not loaded. No other part of Apache _is_able_ to \nhandle CONNECT, thus it cannot be an Apache bug.", "id": 32407, "time": "2003-03-04T16:45:15Z", "creator": "nd@perlig.de", "creation_time": "2003-03-04T16:45:15Z", "is_private": false}, {"count": 4, "tags": [], "creator": "r.tagliaferri@tosnet.it", "text": "My module compiled in apache are:\nCompiled-in modules:\n  http_core.c\n  mod_env.c\n  mod_log_config.c\n  mod_mime.c\n  mod_negotiation.c\n  mod_status.c\n  mod_include.c\n  mod_autoindex.c\n  mod_dir.c\n  mod_cgi.c\n  mod_asis.c\n  mod_imap.c\n  mod_actions.c\n  mod_userdir.c\n  mod_alias.c\n  mod_access.c\n  mod_auth.c\n  mod_setenvif.c\n  mod_php4.c\nWhat's the module that handle connect?", "id": 32412, "time": "2003-03-04T17:47:55Z", "bug_id": 15346, "creation_time": "2003-03-04T17:47:55Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 15346, "text": "I'd guess, mod_php4. It's know to accept any method. But I don't know about its \nrelaying capabilities. What happens, when you turn it off?", "id": 32415, "attachment_id": null, "creator": "nd@perlig.de", "creation_time": "2003-03-04T18:13:33Z", "time": "2003-03-04T18:13:33Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 15346, "attachment_id": null, "id": 33468, "time": "2003-03-19T16:48:45Z", "creator": "keitaro@attbi.com", "creation_time": "2003-03-19T16:48:45Z", "is_private": false, "text": "This is getting thrown back and forth.  PHP says it's not their bug.  Apache\nsays it's not their bug.  So whose bug is which?  Please look here to see what I\nmean:\n\nhttp://bugs.php.net/bug.php?id=19113\n\nShould a new bug be filed?  Or should this bug be reopened?  PHP is assuming\nthat it's a bug in the DSO code.  I've searched through php.ini and found\nnothing regarding CONNECT method.  I've even looked through the configure\noptions and saw nothing for CONNECT methods.  By any assumption, PHP should be\ndependant on whether or not Apache can handle CONNECT methods.  So is there\nanyone out there who can truly figure out what the problem is?  And is this\nsmall, yet seemingly annoying, problem will ever be fixed?"}, {"attachment_id": null, "tags": [], "bug_id": 15346, "text": "> This is getting thrown back and forth.  PHP says it's not their bug.  Apache\n> says it's not their bug.  So whose bug is which?  Please look here to see what   \n> I mean: http://bugs.php.net/bug.php?id=19113\n\nIf this happens only with mod_php or mod_perl loaded, it's a bug in mod_php\nand/or mod_perl.\n\n> Should a new bug be filed?  Or should this bug be reopened?\n\nNo ;-)\n\n> PHP is assuming that it's a bug in the DSO code.\n\nProbably not. DSO has nothing to do with handling requests.\n\n> I've searched through php.ini and found\n> nothing regarding CONNECT method.  I've even looked through the configure\n> options and saw nothing for CONNECT methods.  By any assumption, PHP should be\n> dependant on whether or not Apache can handle CONNECT methods.\n\nPHP is designed to handle all you want. Apache relies on the module\ncapabilities. The content-handler (e.g. mod_php, mod_cgi or the\ncore-default-handler) is responsible for handling some arbitrary method.\n\n> So is there\n> anyone out there who can truly figure out what the problem is?  And is this\n> small, yet seemingly annoying, problem will ever be fixed?\n\nAll said above.\nThere is *nothing* we can do here. If non-httpd-distributed modules don't stand\nto the rules it's obviously not a bug in Apache.\n\nSorry.", "count": 7, "id": 34898, "time": "2003-04-10T18:05:16Z", "creator": "nd@perlig.de", "creation_time": "2003-04-10T18:05:16Z", "is_private": false}, {"count": 8, "tags": [], "creator": "fb@toxis.com", "attachment_id": null, "id": 43103, "time": "2003-08-21T15:31:18Z", "bug_id": 15346, "creation_time": "2003-08-21T15:31:18Z", "is_private": false, "text": "Yes, we all know mod_php4's behavior is evil.\nBut on requests like \"CONNECT www.google.com:80 HTTP/1.0\" Apache\nshouldn't set r->uri to \"/\" and r->content_type to \"httpd/unix-directory\"\nSo mod_dir gets invoked. (And mod_dir shoudn't try to find a local file\naccording to the DirectoryIndex rule. That's when /index.php comes into play.)\nPlease correct me if I'm wrong.\n\nApache 1.3.28\nCompiled-in modules:\n  http_core.c\n  mod_log_config.c\n  mod_mime.c\n  mod_dir.c\n  mod_access.c\n"}]