[{"count": 0, "attachment_id": null, "creator": "tolbert@ncsa.uiuc.edu", "is_private": false, "id": 90275, "time": "2006-06-15T21:29:01Z", "bug_id": 39818, "creation_time": "2006-06-15T21:29:01Z", "tags": [], "text": "In JRE 1.5, the JFileChooser by default will call FileSystemView.getSystemIcon\nwhen being initialized.  Because the WebdavSystemView class doesn't implement\nthis method, it calls the inherited getSystemIcon, which attempts to use the\nwindows shell methods to find the icon.  But since windows cannot open the\n\"file\" in question (because it is a DAV path), it throws an exception and the\ndialog cannot initialize (stack trace below).\n\nThe fix is to implement the getSystemIcon method for the WebdavSystemView class.\n It can be as simple as:\n\n    public Icon getSystemIcon(File f)\n    {\n        //return a new blank icon\n    \treturn new javax.swing.ImageIcon();\n    \t\n    }\n\nStack trace of error:\n\nFileSystemView.getShellFolder:\nf=http://xxxxxx.ncsa.uiuc.edu:8080/sam/files/maeviz_test_data/\njava.io.FileNotFoundException: File\nhttp://xxxxxx.ncsa.uiuc.edu:8080/sam/files/maeviz_test_data/ not found\n\tat sun.awt.shell.Win32ShellFolderManager2.createShellFolder(Unknown Source)\n\tat sun.awt.shell.Win32ShellFolderManager2.createShellFolder(Unknown Source)\n\tat sun.awt.shell.ShellFolder.getShellFolder(Unknown Source)\n\tat javax.swing.filechooser.FileSystemView.getShellFolder(Unknown Source)\n\tat javax.swing.filechooser.FileSystemView.getSystemIcon(Unknown Source)\n\tat\ncom.sun.java.swing.plaf.windows.WindowsFileChooserUI$WindowsFileView.getIcon(Unknown\nSource)\n\tat javax.swing.JFileChooser.getIcon(Unknown Source)\n\tat\ncom.sun.java.swing.plaf.windows.WindowsFileChooserUI$DirectoryComboBoxRenderer.getListCellRendererComponent(Unknown\nSource)\n\tat javax.swing.plaf.basic.BasicListUI.updateLayoutState(Unknown Source)\n\tat javax.swing.plaf.basic.BasicListUI.maybeUpdateLayoutState(Unknown Source)\n\tat javax.swing.plaf.basic.BasicListUI$Handler.valueChanged(Unknown Source)\n\tat javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)\n\tat javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)\n\tat javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)\n\tat javax.swing.DefaultListSelectionModel.changeSelection(Unknown Source)\n\tat javax.swing.DefaultListSelectionModel.changeSelection(Unknown Source)\n\tat javax.swing.DefaultListSelectionModel.setSelectionInterval(Unknown Source)\n\tat javax.swing.JList.setSelectedIndex(Unknown Source)\n\tat javax.swing.plaf.basic.BasicComboPopup.setListSelection(Unknown Source)\n\tat javax.swing.plaf.basic.BasicComboPopup.access$300(Unknown Source)\n\tat javax.swing.plaf.basic.BasicComboPopup$Handler.itemStateChanged(Unknown Source)\n\tat javax.swing.JComboBox.fireItemStateChanged(Unknown Source)\n\tat javax.swing.JComboBox.selectedItemChanged(Unknown Source)\n\tat javax.swing.JComboBox.contentsChanged(Unknown Source)\n\tat javax.swing.AbstractListModel.fireContentsChanged(Unknown Source)\n\tat\ncom.sun.java.swing.plaf.windows.WindowsFileChooserUI$DirectoryComboBoxModel.setSelectedItem(Unknown\nSource)\n\tat\ncom.sun.java.swing.plaf.windows.WindowsFileChooserUI$DirectoryComboBoxModel.addItem(Unknown\nSource)\n\tat\ncom.sun.java.swing.plaf.windows.WindowsFileChooserUI$DirectoryComboBoxModel.access$1000(Unknown\nSource)\n\tat\ncom.sun.java.swing.plaf.windows.WindowsFileChooserUI.doDirectoryChanged(Unknown\nSource)\n\tat com.sun.java.swing.plaf.windows.WindowsFileChooserUI.access$1300(Unknown Source)\n\tat\ncom.sun.java.swing.plaf.windows.WindowsFileChooserUI$8.propertyChange(Unknown\nSource)\n\tat java.beans.PropertyChangeSupport.firePropertyChange(Unknown Source)\n\tat java.beans.PropertyChangeSupport.firePropertyChange(Unknown Source)\n\tat java.awt.Component.firePropertyChange(Unknown Source)\n\tat javax.swing.JFileChooser.setCurrentDirectory(Unknown Source)\n\tat javax.swing.JFileChooser.<init>(Unknown Source)\n\tat javax.swing.JFileChooser.<init>(Unknown Source)"}]