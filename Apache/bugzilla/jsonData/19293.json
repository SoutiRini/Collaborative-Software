[{"count": 0, "tags": [], "creator": "eric.jain@gmail.com", "attachment_id": null, "is_private": false, "id": 36024, "time": "2003-04-24T21:06:29Z", "bug_id": 19293, "creation_time": "2003-04-24T21:06:29Z", "text": "1) Create a jar file with the jar task.\n2) Remove a file from the source directory.\n3) Rerun the jar task with update=\"yes\".\n4) Even though the jar task says it has updated the jar file, the deleted file \ncontinues to exists in the jar file.\n\n<jar \n  jarfile=\"dist/test.jar\" \n  update=\"yes\"\n>\n  <fileset dir=\"build\" includes=\"org/test/**\"/>\n</jar>"}, {"count": 1, "text": "I see that as completely normal... Your are not syncing the JAR with what's in \nyour directory, you are updating the JAR, i.e. entries (as picked up by the \nfileset) not already in your JAR are added, and the ones in both that are newer \nare updated. The third kind of entries is left as is, by design.\n\nIf you really want to sync, recreate the JAR from scratch. --DD", "bug_id": 19293, "is_private": false, "id": 36026, "time": "2003-04-24T21:31:43Z", "creator": "ddevienne@lgc.com", "creation_time": "2003-04-24T21:31:43Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 19293, "text": "Couldn't the jar task be made to scan jar files after adding missing or updated \nfiles, and remove entries that no longer exist in the file system? I realize \nthis could be tricky if the jar file is assembled from several sources, and of \ncourse there is no point in doing so if this procedure would be slower than \nsimply recreating the jar file from scratch, as you suggest.", "id": 36027, "time": "2003-04-24T21:46:02Z", "creator": "eric.jain@gmail.com", "creation_time": "2003-04-24T21:46:02Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "Actually, there's no such thing as a real JAR update. Ant is forced to fully \nrecreate a new JAR under the scene.\n\nAs far as doing a real sync, it's technically possible, but would be changing \nthe semantic of the JAR task, and breaking backward compatibility, so will not \nbe done. Regards, --DD", "attachment_id": null, "bug_id": 19293, "id": 36028, "time": "2003-04-24T21:55:03Z", "creator": "ddevienne@lgc.com", "creation_time": "2003-04-24T21:55:03Z", "is_private": false}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "If you want to remove the files that are no longer present, simply set update to\nfalse.", "id": 36047, "time": "2003-04-25T06:43:19Z", "bug_id": 19293, "creation_time": "2003-04-25T06:43:19Z", "is_private": false}]