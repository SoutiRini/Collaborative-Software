[{"count": 0, "text": "Hi,\n\nFrom the Javadoc on java.lang.Object:\n\nIf two objects are equal according to the equals(Object) method, then calling \nthe hashCode method on each of the two objects must produce the same integer \nresult. \n\nThe org.apache.log4j.Priority class overrides equals so that equality depends \non the integer \"level\". hashCode() is not overridden. Because of this, I had \nproblems adding and retrieving Priority classes from a HashMap.\n\nObviously the fix is pretty simple. Please copy / paste the following code \ninto the class:\n\n----------- Cut here ------------\n\n  /**\n   * Prority returns its level as its hashCode so that the\n   * hashCodes will be equal if equals() returns true. This\n   * method makes the Priority class behave as it should when\n   * it is added to a HashMap.\n   * @return int\n   */\n  public int hashCode() {\n  \treturn level;\n  }\n\n----------- Cut here ------------\n\n\nCheers and Best Regards,\nDave", "bug_id": 17507, "is_private": false, "id": 32116, "time": "2003-02-27T21:37:40Z", "creator": "dave@daveboden.com", "creation_time": "2003-02-27T21:37:40Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "text": "\nThanks for the patch. However, the default implementation of hash method \ndepends on the address of the object.  Since, there are only 5+2 level objects \nthat are produced in a given JVM, the default implementation should work just \nas well as the one you suggest. Are you sure change in implementation changes \nanything?\n\nBy the way, why would you want to out Levels in a hashmap? ", "is_private": false, "bug_id": 17507, "id": 32122, "time": "2003-02-27T22:37:58Z", "creator": "ceki@apache.org", "creation_time": "2003-02-27T22:37:58Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "rdecampo@twcny.rr.com", "attachment_id": null, "id": 32123, "time": "2003-02-27T23:42:50Z", "bug_id": 17507, "creation_time": "2003-02-27T23:42:50Z", "is_private": false, "text": "Looking at the code, it looks like there are actually two Level objects in the\nJVM for each level.  E.g. Level.DEBUG and Priority.DEBUG.  I think that we\nshould change the Priority constants to point to the Level constants.\n\nAlso, if the default equals() isn't good enough then the default hashCode() will\nnot be good enough ;)"}, {"count": 3, "tags": [], "bug_id": 17507, "attachment_id": null, "text": "I'm marking this as WONTFIX when I really mean that it should be fixed in log4j 2.0.  I think the chance \nthat someone depends on the current hashCode() behave while slight is larger than benefit bringing it in \nline with the contract would provide, particularly since equals() isn't in-line with the contract.", "id": 92799, "time": "2006-08-31T15:32:37Z", "creator": "carnold@apache.org", "creation_time": "2006-08-31T15:32:37Z", "is_private": false}]