[{"count": 0, "tags": [], "creator": "bernd.steinert@gmx.net", "text": "Jasper generates servlet code, which doesn\u00b4t trim any whitespaces from the\noriginal JSP sourcefile. This causes the HTML output to have lots of empty lines\nand tabs and blanks. In Tomcat 4.1.27 I simply changed \norg.apache.jasper.compiler.Parser.parseTemplateText(Node parent)\nto trim whitespaces (see Attachment).\n\ngood effects\n------------\nIn a sample application this reduced the generated HTML code by approx. 30%\nwithout any negative side-effects. \nThe jasper-generated Java source has no more 'out.write(\"\\n\\r\");' so we save\nsome complete method calls.\n\nbad effects\n-----------\nGenerated HTML is unreadable (which may be OK for productive installations)\n(any others???)\n\n\nI think of this enhancement as an optimization parameter, most useful for\nproductive installations. So this should be made configurable via CLI and in\n$CATALINA_BASE/conf/web.xml.\n\nWhat do you think about this???", "id": 46064, "time": "2003-10-22T15:23:39Z", "bug_id": 24009, "creation_time": "2003-10-22T15:23:39Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 24009, "attachment_id": 8664, "id": 46065, "creation_time": "2003-10-22T15:25:31Z", "time": "2003-10-22T15:25:31Z", "creator": "bernd.steinert@gmx.net", "text": "Created attachment 8664\nsource for whitespace-optimization", "is_private": false}, {"count": 2, "tags": [], "text": "There should be at least one option to not generate empty lines for JSP directives.\n\nMost of the JSP pages have lots of directives at the top of the page (includes,\ntaglibs, ...) and there is one empty line generated for every directive.\n\nAside from esthetic reasons (when you look at the source of the page first you\ndon't see anything because there are many empty lines at the beginnig) there is\na real issue with XHTML and Internet Explorer. While this is an Internet\nExplorer bug (apparently they call it a feature), it sourfaces mainly with JSP\npages. IE is ignoring the Content-Type header and is guessing the page type by\nscanning its start. It explicitly looks for the 'html' tag. If this tag is too\nfar down the road (because of too many blank lines) IE will give up and treat\nthe page as raw XML.\n\nHaving an option in the JSP compiler to remove the new lines for the lines\ncontaining only a JSP directive will solve this issue with IE and also make the\nsource more readable.\n\nI am not too sure if I should open another issue for this, I had the feeling\nthat this is related to white space optimization.", "attachment_id": null, "bug_id": 24009, "id": 46553, "time": "2003-10-30T23:22:49Z", "creator": "marius.scurtescu@gmail.com", "creation_time": "2003-10-30T23:22:49Z", "is_private": false}, {"count": 3, "text": "A simpler workaround is to write a filter which strips out space. I'll leave the\nbug open, but I really doubt any developer will want this patch.", "bug_id": 24009, "attachment_id": null, "id": 46576, "time": "2003-10-31T12:21:41Z", "creator": "funkman@joedog.org", "creation_time": "2003-10-31T12:21:41Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "kin-man.chung@sun.com", "text": "Besides, it'll break the spec, and cause TCK to fail.  So if we were to trim\nwhite spaces, it'll need to be done with an option, with \"off\" the default.", "id": 46585, "time": "2003-10-31T18:16:46Z", "bug_id": 24009, "creation_time": "2003-10-31T18:16:46Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 24009, "attachment_id": null, "is_private": false, "id": 47007, "time": "2003-11-07T17:50:35Z", "creator": "marius.scurtescu@gmail.com", "creation_time": "2003-11-07T17:50:35Z", "text": "I created a new issue, 24506, for the new lines at the end of directives."}, {"count": 6, "tags": [], "bug_id": 24009, "attachment_id": null, "is_private": false, "id": 49020, "time": "2003-12-12T22:26:45Z", "creator": "funkman@joedog.org", "creation_time": "2003-12-12T22:26:45Z", "text": "There is a trim spaces option per 24506. But as for other whitespace trimming,\nthat won't be done."}]