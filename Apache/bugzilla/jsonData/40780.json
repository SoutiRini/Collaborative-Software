[{"count": 0, "tags": [], "text": "The Ldap Port given in LDAPUrl... directives are ignored in mod_ldap\n\nProposal :\nutil_ldap.c(211) insert : \n     int port_default = APR_LDAP_SSL == ldc->secure ? LDAPS_PORT : LDAP_PORT;\nutil_ldap.c(246) replace \"APR_LDAP_SSL == ldc->secure ? LDAPS_PORT : LDAP_PORT,\" : \n     ldc->port > 0 ? ldc->port : port_default,", "is_private": false, "id": 94911, "creator": "philippe.duveau@eurocis.fr", "time": "2006-10-17T15:40:07Z", "bug_id": 40780, "creation_time": "2006-10-17T15:40:07Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 40780, "attachment_id": null, "id": 94912, "time": "2006-10-17T15:42:30Z", "creator": "philippe.duveau@eurocis.fr", "creation_time": "2006-10-17T15:42:30Z", "is_private": false, "text": "The Ldap Port given in LDAPUrl... directives are ignored in mod_ldap\n\nProposal :\nutil_ldap.c(211) insert : \n     int port_default = APR_LDAP_SSL == ldc->secure ? LDAPS_PORT : LDAP_PORT;\nutil_ldap.c(246) replace \"APR_LDAP_SSL == ldc->secure ? LDAPS_PORT : LDAP_PORT,\" : \n     ldc->port > 0 ? ldc->port : port_default,\n\n"}, {"count": 2, "tags": [], "creator": "bnicholes@apache.org", "attachment_id": null, "id": 94936, "time": "2006-10-18T10:01:43Z", "bug_id": 40780, "creation_time": "2006-10-18T10:01:43Z", "is_private": false, "text": "It is a little confusing which is why the call to apr_ldap_init() on line #243 \nis preceeded by the comment:\n        /* Since the host will include a port if the default port is not used,\n         * always specify the default ports for the port parameter.  This will\n         * allow a host string that contains multiple hosts the ability to mix\n         * some hosts with ports and some without. All hosts which do not\n         * specify a port will use the default port.\n         */\n\nIf a port other than the default port is specified in the host parameter, the \nport parameter used in the resulting ldap_init() call is ignored.  Since the \nonly way to specify an alternate port is within the host portion of the LDAP \nURL, if the defaut ports of 389 or 636 are not used, they are ignored in favor \nof the port specifed in the host parameter. "}, {"count": 3, "tags": [], "text": "OK I understood what you mean and thanks for your clear explanations.\n\nThen the problem seems to be in \"apr_ldap_url_parse\" which does not fit the\nlogic that the \"comment\" describes. In fact, that function (apr_ldap_url_parse)\nseparates the host and port as they shouldn't be.", "is_private": false, "id": 95073, "creator": "philippe.duveau@eurocis.fr", "time": "2006-10-24T14:06:56Z", "bug_id": 40780, "creation_time": "2006-10-24T14:06:56Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "bnicholes@apache.org", "text": "apr_util_parse() does separate the port from the URL, but that is for \nreference only.  The URL that is used to bind the ldap server, still contains \nthe port.", "id": 95074, "time": "2006-10-24T14:44:08Z", "bug_id": 40780, "creation_time": "2006-10-24T14:44:08Z", "is_private": false, "attachment_id": null}]