[{"count": 0, "tags": [], "text": "Created attachment 25171\nPatch skiping SESSIONS.ser file creation if no session exists\n\nWhen a webapp is unloaded, a SESSIONS.ser file is created even if no session exists for the application. This is useless.", "is_private": false, "id": 135580, "creator": "mguillemot@yahoo.fr", "time": "2010-03-24T09:22:46Z", "bug_id": 48973, "creation_time": "2010-03-24T09:22:46Z", "attachment_id": 25171}, {"count": 1, "tags": [], "creator": "slaurent@apache.org", "text": "Patch applied on trunk, it will be available for tomcat 7.0.6.\nBackport to tomcat 6 proposed.", "id": 142350, "time": "2010-12-03T17:03:53Z", "bug_id": 48973, "creation_time": "2010-12-03T17:03:53Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "mguillemot@yahoo.fr", "text": "In fact the patch was incomplete and applying it as it introduces a bug: if no session exist, no SESSIONS.ser should be created AND previous SESSIONS.ser should be deleted (if any old file exists).", "count": 2, "id": 142477, "time": "2010-12-08T06:44:40Z", "bug_id": 48973, "creation_time": "2010-12-08T06:44:40Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 48973, "text": "(In reply to comment #2)\nAFAIK, the SESSIONS.ser file is deleted in StandardManager.doLoad() upon successful or unsuccessful attempt to read it. Do you have a scenario where a stale SESSIONS.ser file is left behind?", "id": 142484, "time": "2010-12-08T08:47:30Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-12-08T08:47:30Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 48973, "attachment_id": null, "is_private": false, "id": 142487, "time": "2010-12-08T08:57:37Z", "creator": "mguillemot@yahoo.fr", "creation_time": "2010-12-08T08:57:37Z", "text": "(In reply to comment #3)\n\nI hadn't checked doLoad(). I was only thinking that not writing a file with 0 sessions could have a consequence. I think that you're right and that no problem should occur."}, {"count": 5, "tags": [], "bug_id": 48973, "attachment_id": null, "is_private": false, "id": 143197, "time": "2011-01-08T14:16:04Z", "creator": "markt@apache.org", "creation_time": "2011-01-08T14:16:04Z", "text": "Thanks again for the patch.\n\nThis has been applied to 6.0.x and will be included in 6.0.30 onwards."}]