[{"count": 0, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "text": "When no Realm is available to authenticate against, an NPE is thrown.\n\nSTR:\n\n1. Start with a stock 7.0.25 and modify server.xml:\n2. Comment-out <Resource> in <GlobalNamingResources>\n3. Comment-out <Realm> in <Engine>\n4. Deploy manager app and try to log in\n\njava.lang.NullPointerException\n\torg.apache.catalina.realm.RealmBase.authenticate(RealmBase.java:340)\n\torg.apache.catalina.authenticator.BasicAuthenticator.authenticate(BasicAuthenticator.java:158)\n\torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:544)\n\torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)\n\torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)\n\torg.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)\n\torg.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)\n\torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1600)\n\tjava.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tjava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tjava.lang.Thread.run(Thread.java:680)\n\n\nClearly, this is a pathological setup, but it might be nice to get a decent error message instead of an NPE.", "id": 153380, "time": "2012-02-02T20:00:01Z", "bug_id": 52587, "creation_time": "2012-02-02T20:00:01Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "The root cause was the the NullRealm was created but not initialised with this configuration. That has been fixed in trunk and 7.0.x and will be included in 7.0.26 onwards.", "id": 153474, "time": "2012-02-05T20:15:15Z", "bug_id": 52587, "creation_time": "2012-02-05T20:15:15Z", "is_private": false}]