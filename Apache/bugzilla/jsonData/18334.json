[{"count": 0, "tags": [], "text": "Downloaded apache 2.0.44 for WinNT.\nInstalled it and configured it to support webDAV, uncomment the dav and davfs \nloadmodule lines.\nConfigured Apache to support webDAV on one directory.\nConfirmed webDAV was working.\nThen configured the same directory to require a valid user, by adding the lines \nto support for the utils_ldap module, and the mod_auth_ldap module. Then \nconfigured the appropriate LDAP directives as shown:-\n\nLDAPSharedCacheSize 200000\nLDAPCacheEntries 1024\nLDAPCacheTTL 600\nLDAPOpCacheEntries 1024\nLDAPOpCacheTTL 600\nDavLockDB \"C:/temp/DavLock\"\n\n<Directory \"C:/Program Files/Apache Group/Apache2/htdocs/dav\">\n\tAuthType Basic\n\tAuthName \"WebDAV Auth to LDAP server\"\n\tAuthLDAPEnabled on\n\tAuthLDAPURL \"ldap://169.192.1.31:2890/ou=People,o=jpmchase,o=jpmc?uid?\none\"\n\tAuthLDAPAuthoritative on\n\tOptions -Indexes\n\tDav On\n\n\t<LimitExcept GET HEAD OPTIONS>\n\t\tallow from all\n\t\trequire valid-user\n\t</LimitExcept>\n</Directory>\n\nNow when ever I access the dav directory Apache prompts for the username and \npassword, after inputting them it crashes.\n\nThis is repeatable and the application event viewer reports\n\nThe application, , generated an application error The error occurred on  \n3/25/2003 @ 16:22: 7.108 The exception generated was c0000005 at address \n77957d70 (ldap_result) \n\nThe error log reports\n\n[Tue Mar 25 16:24:14 2003] [notice] Parent: child process exited with status \n3221225477 -- Restarting.\n[Tue Mar 25 16:24:14 2003] [notice] Parent: Created child process 644\n[Tue Mar 25 16:24:14 2003] [notice] Child 644: Child process is running\n[Tue Mar 25 16:24:15 2003] [notice] Child 644: Acquired the start mutex.\n[Tue Mar 25 16:24:15 2003] [notice] Child 644: Starting 250 worker threads\n\nI then created another directory called test and didn't configure this for \nwebdav support, but did have it protected.  When accessing it with a browser it \nasked for my username and password and then again crashed with the same error.", "attachment_id": null, "id": 33784, "creator": "phil@flare.demon.co.uk", "time": "2003-03-25T19:49:42Z", "bug_id": 18334, "creation_time": "2003-03-25T19:49:42Z", "is_private": false}, {"count": 1, "tags": [], "text": "Hmmm....  mod_auth_ldap worked fine for me back at 2.0.43.\n\nIt no longer does at 2.0.45 (I skipped 2.0.44) -- see comments on bug #18756.", "attachment_id": null, "id": 35061, "creator": "jessh@ptc.com", "time": "2003-04-12T12:58:25Z", "bug_id": 18334, "creation_time": "2003-04-12T12:58:25Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 18334, "attachment_id": null, "id": 35062, "time": "2003-04-12T13:00:16Z", "creator": "jessh@ptc.com", "creation_time": "2003-04-12T13:00:16Z", "is_private": false, "text": "P.S.  My error log shows the same basic thing and with LogLevel of debug only \nmanages to show that it is attempting the authentication when this occurs."}, {"attachment_id": null, "tags": [], "creator": "minfrin@sharp.fm", "text": "Can you confirm whether this bug still exists in v2.1.0-dev?\n", "count": 3, "id": 57801, "time": "2004-05-21T14:28:27Z", "bug_id": 18334, "creation_time": "2004-05-21T14:28:27Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 18334, "attachment_id": null, "id": 58446, "time": "2004-06-01T11:20:22Z", "creator": "A.Schild@neatech.ch", "creation_time": "2004-06-01T11:20:22Z", "is_private": false, "text": "I just tested it with the current 2.1 CVS version. (Same true for 2.0.49)\nIt still crashes.\n\nIt is compiled&linked against the MS ldap libraries.\nWhat is the correct way to build apache 2.x with the Netscape/iPlanet\nldap SDK ? Just copying it to the srclib/ldap does not seem to\nhave any effect.\n\nHere the callstack I'm able to show:\n\nWLDAP32! 77942d58()\nWLDAP32! 7794b622()\nWLDAP32! 7794eb91()\nutil_ldap_cache_checkuserid(request_rec * 0x00826580, util_ldap_connection_t *\n0x007e14d8, const char * 0x00809560, const char * 0x008095c0, int 1, char * *\n0x008095d0, const char * 0x0866dec4, const char * 0x00827edc, const char * *\n0x0866debc, const char * * * 0x0866deac) line 817 + 13 bytes\nmod_auth_ldap_check_user_id(request_rec * 0x00826580) line 331 + 85 bytes\nap_run_check_user_id(request_rec * 0x00826580) line 69 + 78 bytes\nap_process_request_internal(request_rec * 0x00826580) line 193 + 9 bytes\nap_process_request(request_rec * 0x00826580) line 244 + 9 bytes\nap_process_http_connection(conn_rec * 0x00822898) line 253 + 9 bytes\nap_run_process_connection(conn_rec * 0x00822898) line 42 + 78 bytes\nap_process_connection(conn_rec * 0x00822898, void * 0x00822478) line 177\nworker_main(long 499) line 774\n_threadstartex(void * 0x008222d8) line 212 + 13 bytes\nKERNEL32! 77e7438b()\n"}, {"count": 5, "tags": [], "creator": "minfrin@sharp.fm", "attachment_id": null, "id": 58764, "creation_time": "2004-06-04T15:51:50Z", "time": "2004-06-04T15:51:50Z", "bug_id": 18334, "text": "Line 817 in my util_ldap.c code is this:\n\n    if (LDAP_SUCCESS != (result = util_ldap_connection_open(r, ldc))) {\n\nIf this is the case, then the trace is bombing out on the call to\nutil_ldap_connection_open(), which doesn't make sense.\nI assume that it's bombing out with util_ldap_connection_open.\n\nIs it the same in your snapshot? I want to check whether we're talking about the\nsame code.\n", "is_private": false}, {"count": 6, "tags": [], "bug_id": 18334, "text": "Yep, it's on the very same line.\n\nI have now rebuilt apache with the most current platform SDK from MS, and now it\ndoes no longer crash.\n\nAccording to Jess, it will work with the MS SDK Spring 2003\n\n\nIs there a way to detect the version of the SDK and throw an error if it's \"too\nold\" ?\n\nAndr\u00e9", "id": 58766, "time": "2004-06-04T16:19:32Z", "creator": "A.Schild@neatech.ch", "creation_time": "2004-06-04T16:19:32Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 18334, "attachment_id": null, "id": 58866, "time": "2004-06-08T13:58:41Z", "creator": "minfrin@sharp.fm", "creation_time": "2004-06-08T13:58:41Z", "is_private": false, "text": "Quite probably - though currently apr-util only exports the type of LDAP client\nlibrary being used, not the version of the library being used.\n\nPerhaps this suggestion should be posted to the apr@apr.apache.org mailing list,\nin other words suggest that an attempt to build apr-util against a too-old\nversion of the LDAP library would either generate a #warning for throw an #error.\n\nThis isn't an httpd thing though, it's an apr-util thing.\n"}, {"count": 8, "tags": [], "bug_id": 18334, "attachment_id": null, "id": 65251, "time": "2004-10-17T18:54:54Z", "creator": "minfrin@apache.org", "creation_time": "2004-10-17T18:54:54Z", "is_private": false, "text": "Is it possible to provide a test for the version of the MS library that no\nlonger works? I don't have access to an MS build environment :(\n"}, {"count": 9, "tags": [], "bug_id": 18334, "text": "Marking this as fixed, as the problem seems to be with old Microsoft SDKs and\nnot httpd...\n", "id": 69944, "time": "2005-01-21T22:35:20Z", "creator": "minfrin@apache.org", "creation_time": "2005-01-21T22:35:20Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 18334, "attachment_id": null, "id": 76298, "time": "2005-06-11T09:47:16Z", "creator": "valexa@nextcode.org", "creation_time": "2005-06-11T09:47:16Z", "is_private": false, "text": "the same problem has been experienced on apache 2.0.53 official binary release \nfor windows , so if the SDK is the problem , the process of building the \nofficial windows releases needs to be checked over"}, {"count": 11, "tags": [], "bug_id": 18334, "attachment_id": null, "id": 80746, "time": "2005-10-04T17:45:59Z", "creator": "jorton@redhat.com", "creation_time": "2005-10-04T17:45:59Z", "is_private": false, "text": "What's the status of this issue?  Is it something specific to the Microsoft LDAP\nlibrary?  Any idea what can be done (if anything?) to fix it in mod_auth_ldap,\nif so?"}, {"count": 12, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "text": "*** Bug 35015 has been marked as a duplicate of this bug. ***", "id": 80748, "time": "2005-10-04T17:47:33Z", "bug_id": 18334, "creation_time": "2005-10-04T17:47:33Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "a.schild@aarboard.ch", "is_private": false, "count": 13, "id": 80842, "time": "2005-10-06T15:38:25Z", "bug_id": 18334, "creation_time": "2005-10-06T15:38:25Z", "text": "(In reply to comment #11)\n> What's the status of this issue?  \n\nIt's still a potential problem.\n\n> Is it something specific to the Microsoft LDAP\n> library?  \n\nIt's a problem, when you have a older Microsoft LDAP SDK installed,\nwhen auth_ldap is build against a old version, then it can crash at runtime.\nWhen you use a new SDK, then it runs fine.\n\n\n> Any idea what can be done (if anything?) to fix it in mod_auth_ldap,\n> if so?\n\nI think the only correct way would be to detect the version of the SDK\nand if it's too old, then stop the build process.\n\n>According to Jess, it will work with the MS SDK Spring 2003\nNo idea how to check the version...\n\nAndr\u00e9"}, {"attachment_id": null, "tags": [], "creator": "Greg.D.Thomas@bt.com", "is_private": false, "count": 14, "id": 84774, "time": "2006-01-19T13:04:42Z", "bug_id": 18334, "creation_time": "2006-01-19T13:04:42Z", "text": "This is still happening with 2.0.55 MSI installer - is there any chance of a\nversion compiled against the correct LDAP libraries for those of us who need\nbinaries?"}, {"count": 15, "tags": [], "bug_id": 18334, "attachment_id": null, "id": 85605, "time": "2006-02-08T19:53:46Z", "creator": "john.green@goecon.net", "creation_time": "2006-02-08T19:53:46Z", "is_private": false, "text": "We're seeing this as well with 2.0.55 MSI package.   Is anyone working on a \nfresh 2.0.56? build "}, {"count": 16, "tags": [], "text": "I think there's no way to find out the SDK version. But there may be a workaround:\nLet's say you want to ensure that the Windows Server 2003 SP1 SDK is used. Then\nfirst find a function that is new in Windows Server 2003 SP1, e.g. NetDfsMove.\n\nThen try to compile a file using such a function. Here's an example for such a file:\n\n#include <Windows.h>\n#include <Lm.h>\n#include <LmDfs.h>\n\nint main(int argc, char* argv[])\n{\n\tNET_API_STATUS (NET_API_FUNCTION *dummy)(LPWSTR, LPWSTR, ULONG) = NetDfsMove;\n\n\treturn 0;\n}\n\nYou don't even have to try to link it; trying to compile it is enough. If it\ncompiles, fine, if not, then the SDK is too old.\n\nIt would be great if a new Apache version that fixes this could be released soon\n- it seems some people have been waiting for it a long time now, and not\neveryone is capable of compiling Apache.", "attachment_id": null, "id": 86334, "creator": "mail@rschaeuble.de", "time": "2006-03-01T13:56:34Z", "bug_id": 18334, "creation_time": "2006-03-01T13:56:34Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "ralph@totalwank.com", "text": "Hi,\n\nAny chance of someone with a working mod_auth_ldap.so binary attaching it to\nthis bug (assuming it's just this binary that is affected).  The 2.0.55 win32\nreleased binaries still exhibit this bug.\n\nThanks,\n\nRalph.", "count": 17, "id": 88430, "time": "2006-04-24T13:25:14Z", "bug_id": 18334, "creation_time": "2006-04-24T13:25:14Z", "is_private": false}]