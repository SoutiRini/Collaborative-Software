[{"count": 0, "attachment_id": null, "creator": "ktsour@gmail.com", "text": "I have used the following configuration with Apache 2.2.0 :\n \n---------------------------\nProxyRequests Off\nProxyPass /balancer !\nProxyPass / balancer://cluster/ stickysession=JSESSIONID nofailover=On\nProxyPassReverse / balancer://cluster/\n\n<Proxy balancer://cluster>\n  Order Deny,Allow\n  Allow from all\n\n  BalancerMember http://192.168.1.141:8081 route=tomcat1\n  BalancerMember http://192.168.1.142:8081 route=tomcat2\n</Proxy>\n\n<Location /balancer>\n  SetHandler balancer-manager\n\n  Order Deny,Allow\n  Allow from all\n</Location>\n----------------------------\n\nThe problem is that when I disable one of the servers, Apache does not break the session and continues sending requests to the disabled server, when I continue using the same browser session.\n\nThe only way to continue is to open a new browser, so that there is no session. Then Apache redirects new requests to the live node only.\n\nSo, the problem is that, even if I have used the nofailover=On, Apache does not break the session of disabled nodes.\n\nOthers have had the same problem some time ago and noone responded to their question, so I am guessing this should be a bug.", "id": 116646, "time": "2008-05-15T07:14:19Z", "bug_id": 45008, "creation_time": "2008-05-15T07:14:19Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "creator": "rpluem@apache.org", "text": "First, please use the latest 2.2.x version and check if the problem still persists. There were many proxy fixes since 2.2.0.\nSecond, your configuration is wrong: nofailover needs to be set to off (the default value) instead of on.", "id": 116648, "time": "2008-05-15T08:22:18Z", "bug_id": 45008, "creation_time": "2008-05-15T08:22:18Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 45008, "text": "I comment the documentation :\n\nnofailover  \tOff  \tIf set to On the session will break if the worker is in error state or disabled. Set this value to On if backend servers do not support session replication.\n\n\nSo, since my backend servers do not have session replication, I should set nofailover to On, so that the session breaks. I set it to Off like you suggested and it worked. \n\nSo the documentation is misleading.\n\nThank you for your support.", "id": 116696, "time": "2008-05-16T02:48:18Z", "creator": "ktsour@gmail.com", "creation_time": "2008-05-16T02:48:18Z", "is_private": false, "attachment_id": null}]