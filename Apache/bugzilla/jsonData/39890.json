[{"count": 0, "tags": [], "bug_id": 39890, "is_private": false, "text": "The Java class has been moved, the other resources should be moved as well.", "id": 90556, "time": "2006-06-23T18:18:42Z", "creator": "andreas@apache.org", "creation_time": "2006-06-23T18:18:42Z", "attachment_id": null}, {"count": 1, "text": "Created attachment 18807\nMoved remaining kupu sitemaps and resources to kupu module\n\nUpdated the sitemap.xmap with the lenyadoc: protocol for opening and saving\ndocuments, and replaced references to lenya.usecase with lenya.module.\n\nAlso deleted the java and usecase files from the module that aren't needed\nanymore.\n\nThe last remaining issue is the menu.xsp.  With these changes, kupu is now\ninvoked via ?lenya.module=kupu&lenya.step=open instead of\n?lenya.usecase=kupu&lenya.step=open, but I can't update the kupu menu.xsp\nbecause it does not exist yet (relies on bug 40391).  \n\nI will open a new bug just for this menu issue to make things clearer.", "bug_id": 39890, "is_private": false, "id": 92913, "time": "2006-09-01T22:25:56Z", "creator": "jonathan.addison@wyona.com", "creation_time": "2006-09-01T22:25:56Z", "tags": [], "attachment_id": 18807}, {"count": 2, "text": "*** Bug 40018 has been marked as a duplicate of this bug. ***", "bug_id": 39890, "is_private": false, "id": 92915, "time": "2006-09-01T22:28:40Z", "creator": "jonathan.addison@wyona.com", "creation_time": "2006-09-01T22:28:40Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "creator": "jonathan.addison@wyona.com", "is_private": false, "id": 93476, "attachment_id": null, "bug_id": 39890, "creation_time": "2006-09-12T22:29:29Z", "time": "2006-09-12T22:29:29Z", "text": "*** Bug 40489 has been marked as a duplicate of this bug. ***"}, {"count": 4, "tags": [], "text": "Created attachment 18855\ndiff against trunk\n\nThis is basically the same patch as above, except that it updates the existing\nkupu menu entries in the xhtml and homepage resource types instead of creating\na new menu.xsp in the kupu module.\n\nSo it no longer relies on any other patches.\n\nDescription from above:\n\n\"Moved remaining kupu sitemaps and resources to kupu module\n\nUpdated the sitemap.xmap with the lenyadoc: protocol for opening and saving\ndocuments.\n\nReplaced references to lenya.usecase with lenya.module.\n\nAlso deleted the java and usecase files from the module that aren't needed\nanymore.\"", "is_private": false, "id": 93481, "creator": "jonathan.addison@wyona.com", "time": "2006-09-12T23:10:00Z", "bug_id": 39890, "creation_time": "2006-09-12T23:10:00Z", "attachment_id": 18855}, {"count": 5, "attachment_id": null, "bug_id": 39890, "is_private": false, "id": 95133, "time": "2006-10-27T00:32:00Z", "creator": "nettings@apache.org", "creation_time": "2006-10-27T00:32:00Z", "tags": [], "text": "jonathan, what is the status of this patch?\ni'm willing to commit it for you, but i have too little experience with kupu to\ntest it thoroughly, and the patch does not apply cleanly against current trunk\n(r467996) - looks like it has been half-applied already.\ncould you provide an updated version? \n\n"}, {"count": 6, "tags": [], "bug_id": 39890, "text": "Created attachment 19059\nupdated previous patch to work with trunk\n\nHi Joern, thanks for taking a look at it.\n\nI have updated the patch so that it works with the latest trunk, at least on my\nmachine.\n\nThere are also a few files/folders that need to be manually deleted after\napplying (i.e. the patch deletes the java file but not its folders).\n\nThey are:\nsrc/modules/kupu/config\nsrc/modules/kupu/java\nsrc/webapp/lenya/resources/kupu/download.xhtml\nsrc/webapp/lenya/usecases/kupu/usecase-kupu.js", "id": 95255, "time": "2006-10-31T08:25:03Z", "creator": "jonathan.addison@wyona.com", "creation_time": "2006-10-31T08:25:03Z", "is_private": false, "attachment_id": 19059}, {"count": 7, "tags": [], "bug_id": 39890, "is_private": false, "text": "(In reply to comment #6)\n> Created an attachment (id=19059) [edit]\n> updated previous patch to work with trunk\n> \n> Hi Joern, thanks for taking a look at it.\n> \n> I have updated the patch so that it works with the latest trunk, at least on my\n> machine.\n\njonathan, sorry for not getting back to you earlier. the patch still does not\napply to my tree:\n\nnettings@hoppetosse:/local/lenya> patch --dry-run -p0 <\n~/Desktop/kupu_module_patch.diff\n(Stripping trailing CRs from patch.)\npatching file src/modules/kupu/kupu.js\n(Stripping trailing CRs from patch.)\npatching file src/modules/kupu/java/src/org/apache/lenya/cms/editors/kupu/Kupu.java\nReversed (or previously applied) patch detected!  Assume -R? [n] n\nApply anyway? [n] n\nSkipping patch.\n1 out of 1 hunk ignored -- saving rejects to file\nsrc/modules/kupu/java/src/org/apache/lenya/cms/editors/kupu/Kupu.java.rej\n(Stripping trailing CRs from patch.)\npatching file src/modules/kupu/config/cocoon-xconf/usecase-edit-kupu.xconf\nReversed (or previously applied) patch detected!  Assume -R? [n] n\nApply anyway? [n] n\nSkipping patch.\n1 out of 1 hunk ignored -- saving rejects to file\nsrc/modules/kupu/config/cocoon-xconf/usecase-edit-kupu.xconf.rej\n(Stripping trailing CRs from patch.)\npatching file src/modules/kupu/sitemap.xmap\n(Stripping trailing CRs from patch.)\npatching file src/webapp/global-sitemap.xmap\nHunk #1 succeeded at 100 (offset 1 line).\n(Stripping trailing CRs from patch.)\npatching file src/webapp/lenya/usecases/kupu/usecase-kupu.xmap\nReversed (or previously applied) patch detected!  Assume -R? [n] n\nApply anyway? [n] n\nSkipping patch.\n1 out of 1 hunk ignored -- saving rejects to file\nsrc/webapp/lenya/usecases/kupu/usecase-kupu.xmap.rej\n(Stripping trailing CRs from patch.)\npatching file src/modules/xhtml/config/menu.xsp\nHunk #1 FAILED at 50.\n1 out of 1 hunk FAILED -- saving rejects to file\nsrc/modules/xhtml/config/menu.xsp.rej\n(Stripping trailing CRs from patch.)\npatching file src/pubs/default/modules/homepage/config/menus/homepage.xsp\nHunk #1 succeeded at 45 (offset 1 line).\n\nlooking at the patch, it seems to do the following:\n\ncreate a new src/modules/kupu/kupu.js (sounds ok)\nremove src/modules/kupu/java/src/org/apache/lenya/cms/editors/kupu/Kupu.java\n(sounds wrong)\ncreate src/modules/kupu/sitemap.xmap (sounds ok)\npatch src/webapp/global-sitemap.xmap to use the new module sitemap (sounds ok)\nremove src/webapp/lenya/usecases/kupu/usecase-kupu.xmap (sounds wrong)\npatch menu files (sounds ok)\n\ncan you fix the patch?", "id": 97582, "time": "2007-01-03T14:41:22Z", "creator": "nettings@apache.org", "creation_time": "2007-01-03T14:41:22Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 39890, "text": "Created attachment 19349\nkupu module patch\n\nupdated previous patch to work with trunk", "id": 97599, "time": "2007-01-03T15:57:20Z", "creator": "jonathan.addison@wyona.com", "creation_time": "2007-01-03T15:57:20Z", "is_private": false, "attachment_id": 19349}, {"count": 9, "tags": [], "text": "> looking at the patch, it seems to do the following:\n> \n> create a new src/modules/kupu/kupu.js (sounds ok)\n> remove src/modules/kupu/java/src/org/apache/lenya/cms/editors/kupu/Kupu.java\n> (sounds wrong)\n\nKupu.java, and usecase-edit-kupu.xconf, are no longer used and can be deleted.\n \n> create src/modules/kupu/sitemap.xmap (sounds ok)\n> patch src/webapp/global-sitemap.xmap to use the new module sitemap (sounds ok)\n> remove src/webapp/lenya/usecases/kupu/usecase-kupu.xmap (sounds wrong)\n\nThe relevant code in usecase-kupu.xmap was moved to the kupu module's sitemap.xmap.\n\nIn fact, the whole src/webapp/lenya/usecases/kupu directory should be deleted\n(if the patch fails to do so).\n\n> patch menu files (sounds ok)\n> \n> can you fix the patch?\n\nI have added the patch, please let me know if you still experience problems.\n\n", "is_private": false, "id": 97604, "creator": "jonathan.addison@wyona.com", "time": "2007-01-03T16:15:57Z", "bug_id": 39890, "creation_time": "2007-01-03T16:15:57Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "nettings@apache.org", "is_private": false, "id": 97618, "attachment_id": null, "bug_id": 39890, "creation_time": "2007-01-04T01:35:22Z", "time": "2007-01-04T01:35:22Z", "text": "still does not apply cleanly, but with your explanations i felt confident to\napply it manually. please test. thanks and sorry for the long gestation period :)\nupon saving, i get a 500 error, but i haven't used kupu in a while so i don't\nknow if that's a regression.\niiuc, kupu uses the deprecated 1.2 usecases with \"step\" - i wonder: should we\neventually move it to registered avalon usecases, or is kupu bound to be\nobsolete soon anyways?\n"}, {"count": 11, "attachment_id": null, "bug_id": 39890, "is_private": false, "id": 97621, "time": "2007-01-04T04:25:13Z", "creator": "nettings@apache.org", "creation_time": "2007-01-04T04:25:13Z", "tags": [], "text": "there is another bug (33794) that deals with kupu/usecase framework integration.\n i'm closing this one now, since the modularisation is accomplished.\n"}, {"count": 12, "tags": [], "text": "(In reply to comment #10)\n> upon saving, i get a 500 error, but i haven't used kupu in a while so i don't\n> know if that's a regression.\n\nthis seems to be an unrelated issue. see\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=36298\n\n", "is_private": false, "id": 97629, "creator": "nettings@apache.org", "time": "2007-01-04T04:55:14Z", "bug_id": 39890, "creation_time": "2007-01-04T04:55:14Z", "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 39890, "attachment_id": null, "text": "There is still a webapp/usecases/kupu directory.", "id": 97877, "time": "2007-01-10T06:08:26Z", "creator": "andreas@apache.org", "creation_time": "2007-01-10T06:08:26Z", "is_private": false}, {"count": 14, "tags": [], "text": "(In reply to comment #13)\n> There is still a webapp/usecases/kupu directory.\n\nSorry, I had an old version.", "attachment_id": null, "bug_id": 39890, "id": 97884, "time": "2007-01-10T06:20:18Z", "creator": "andreas@apache.org", "creation_time": "2007-01-10T06:20:18Z", "is_private": false}, {"count": 15, "attachment_id": null, "bug_id": 39890, "is_private": false, "id": 97886, "time": "2007-01-10T06:25:19Z", "creator": "jonathan.addison@wyona.com", "creation_time": "2007-01-10T06:25:19Z", "tags": [], "text": "I just realized that the Kupu module is missing it's sitemap.xmap and kupu.js\nfiles.  Joern, did these not get committed from the patch?"}, {"count": 16, "tags": [], "bug_id": 39890, "attachment_id": null, "id": 97887, "time": "2007-01-10T06:29:18Z", "creator": "andreas@apache.org", "creation_time": "2007-01-10T06:29:18Z", "is_private": false, "text": "Do we really need this in the core?\n\nIndex: src/webapp/global-sitemap.xmap\n===================================================================\n--- src/webapp/global-sitemap.xmap\t(revision 469275)\n+++ src/webapp/global-sitemap.xmap\t(working copy)\n@@ -99,7 +99,7 @@\n     <!-- Editor Kupu -->\n     <map:pipeline>\n       <map:match pattern=\"kupu/**\">\n-        <map:read src=\"lenya/resources/kupu/{1}\"/>\n+        <map:read src=\"fallback://lenya/modules/kupu/resources/kupu/{1}\"/>\n       </map:match>\n     </map:pipeline>\n"}, {"count": 17, "tags": [], "text": "(In reply to comment #15)\n> I just realized that the Kupu module is missing it's sitemap.xmap and kupu.js\n> files.  Joern, did these not get committed from the patch?\n\nI added them now.", "attachment_id": null, "bug_id": 39890, "id": 97888, "time": "2007-01-10T06:32:29Z", "creator": "andreas@apache.org", "creation_time": "2007-01-10T06:32:29Z", "is_private": false}, {"count": 18, "tags": [], "text": "Apparently there are no more Kupu references/files in the core.", "is_private": false, "id": 102065, "creator": "andreas@apache.org", "time": "2007-04-23T02:09:48Z", "bug_id": 39890, "creation_time": "2007-04-23T02:09:48Z", "attachment_id": null}]