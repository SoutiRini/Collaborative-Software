[{"count": 0, "tags": [], "creator": "bill@tangoone.com", "is_private": false, "text": "The following exception trace will appear in the catalina logs.\n\n2002-04-03 09:58:49 HttpProcessor[8080][49] process.finish\njava.lang.IllegalStateException: Current state = FLUSHED, new state = CODING_END\n\tat\njava.nio.charset.CharsetEncoder.throwIllegalStateException(CharsetEncoder.java:933)\n\tat java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:529)\n\tat sun.nio.cs.StreamEncoder$CharsetSE.flushLeftoverChar(StreamEncoder.java:356)\n\tat sun.nio.cs.StreamEncoder$CharsetSE.implClose(StreamEncoder.java:413)\n\tat sun.nio.cs.StreamEncoder.close(StreamEncoder.java:158)\n\tat java.io.OutputStreamWriter.close(OutputStreamWriter.java:222)\n\tat java.io.PrintWriter.close(PrintWriter.java:137)\n\tat org.apache.catalina.connector.ResponseBase.finishResponse(ResponseBase.java:482)\n\tat\norg.apache.catalina.connector.HttpResponseBase.finishResponse(HttpResponseBase.java:237)\n\tat\norg.apache.catalina.connector.http.HttpResponseImpl.finishResponse(HttpResponseImpl.java:287)\n\tat org.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:1044)\n\tat org.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1115)\n\tat java.lang.Thread.run(Thread.java:536)\n\nAs far as I've been able to determine, this occurs when a filter or servlet\nforwards to a page that performs a redirect AND if the forwarding includes a\nresponse wrapper rather than the original response. For example,\n\nhttpServletRequest.getRequestDispatcher( resourcePath ).forward(\n httpServletRequest,\n new MyServletResponse( httpServletResponse )\n);", "id": 12771, "time": "2002-04-03T17:08:15Z", "bug_id": 7725, "creation_time": "2002-04-03T17:08:15Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 12824, "time": "2002-04-04T21:27:18Z", "bug_id": 7725, "creation_time": "2002-04-04T21:27:18Z", "text": "Yes, it is a known issue. Either use JDK 1.3 or the Coyote HTTP/1.1 connector to\nsolve the problem.\n\n*** This bug has been marked as a duplicate of 6519 ***"}, {"count": 2, "attachment_id": null, "creator": "stefan.damian@snt.ro", "text": "Any solution yet?\n\n\njava.lang.IllegalStateException: Current state = FLUSHED, new state = CODING_END\n\tat\njava.nio.charset.CharsetEncoder.throwIllegalStateException\n(CharsetEncoder.java:933)\n\tat java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:529)\n\tat sun.nio.cs.StreamEncoder$CharsetSE.flushLeftoverChar\n(StreamEncoder.java:356)\n\tat sun.nio.cs.StreamEncoder$CharsetSE.implClose(StreamEncoder.java:413)\n\tat sun.nio.cs.StreamEncoder.close(StreamEncoder.java:158)\n\tat java.io.OutputStreamWriter.close(OutputStreamWriter.java:222)\n\tat java.io.PrintWriter.close(PrintWriter.java:137)\n\tat org.apache.catalina.connector.ResponseBase.finishResponse\n(ResponseBase.java:482)\n\tat\norg.apache.catalina.connector.HttpResponseBase.finishResponse\n(HttpResponseBase.java:237)\n", "id": 17861, "time": "2002-06-15T15:42:14Z", "bug_id": 7725, "creation_time": "2002-06-15T15:42:14Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 7725, "is_private": false, "count": 3, "id": 17863, "time": "2002-06-15T16:00:32Z", "creator": "remm@apache.org", "creation_time": "2002-06-15T16:00:32Z", "text": "The solution is mentioned in the previous comments."}]