[{"attachment_id": null, "tags": [], "bug_id": 19866, "text": "The available task does not seem to be using the passed in filepath.  I've\nattempted to include it in two ways: via the nested <filepath> attribute (with\nenclosed <dirset> and by generating a path object in the same way, using\n<pathconvert> and passing it in as an attribute.  Finally, I hard-coded a string\ninto the attribute.\n\nThis code:\n<project name=\"temp\" basedir=\"C:\\\" default=\"test\">\n  <target name=\"test\">\n    <available file=\"jedit.exe\" property=\"jedit.exists\" filepath=\"C:\\jedit\"/>\n    <echo message=\"jedit.exists: ${jedit.exists}\"/>\n  </target>\n</project>\n\nYields the following:\nApache Ant version 1.5.3 compiled on April 16 2003\nSearching for build.xml ...\nBuildfile: C:\\sdk\\build.xml\nDetected Java version: 1.4 in: C:\\jdk\\jre\nDetected OS: Windows 2000\nparsing buildfile C:\\sdk\\build.xml with URI = file:C:/sdk/build.xml\nProject base dir set to: C:\\\nBuild sequence for target `test' is [test]\nComplete build sequence is [test]\n\ntest:\nUnable to find file C:\\jedit.exe to set property jedit.exists\nProperty ${jedit.exists} has not been set\njedit.exists: ${jedit.exists}\n\nNote that it only tested for C:\\jedit.exe.  It should have tested for\nC:\\jedit\\jedit.exe", "count": 0, "id": 37090, "time": "2003-05-12T20:11:17Z", "creator": "jhkeller@ucdavis.edu", "creation_time": "2003-05-12T20:11:17Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "id": 45596, "creation_time": "2003-10-14T12:23:39Z", "time": "2003-10-14T12:23:39Z", "bug_id": 19866, "text": "Could you give us the -debug output of Ant, please?", "attachment_id": null}, {"count": 2, "tags": [], "creator": "jhkeller@ucdavis.edu", "is_private": false, "text": "Created attachment 8568\nDebug output of task", "id": 45646, "time": "2003-10-14T15:56:14Z", "bug_id": 19866, "creation_time": "2003-10-14T15:56:14Z", "attachment_id": 8568}, {"count": 3, "tags": [], "creator": "peter.reilly@corvil.com", "attachment_id": null, "id": 45648, "time": "2003-10-14T16:42:13Z", "bug_id": 19866, "creation_time": "2003-10-14T16:42:13Z", "is_private": false, "text": "This may be a problem on a windows platform.\nThe follows works on unix:\n<project name=\"temp\" basedir=\"/\" default=\"test\">\n  <target name=\"test\">\n    <available file=\"jedit.jar\" property=\"jedit.exists\"\n               filepath=\"/home/preilly/apps/jedit\"/>\n    <echo message=\"jedit.exists: ${jedit.exists}\"/>\n  </target>\n</project>\n\nI do not have windows, so cannot test.\nTry dropping the basedir setting.\n\nThe code that looks incorrect with c:\\ is:\nAvailable.java:\n    public void setFile(File file) {\n        this.file = FileUtils.newFileUtils()\n            .removeLeadingPath(getProject().getBaseDir(), file);\n    }\n\n\nYour trace shows that it adds the c:\\ to the file, on unix\nthis is not the case.\n\n"}, {"attachment_id": null, "tags": [], "bug_id": 19866, "text": "I changed the basedir to \".\" (as I have it on most of my projects) and the tag\nworked correctly.\n\nA co-worker extracted this from a script used for installing software, hence the\nabsolute root path.", "count": 4, "id": 45662, "time": "2003-10-14T17:57:14Z", "creator": "jhkeller@ucdavis.edu", "creation_time": "2003-10-14T17:57:14Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 19866, "attachment_id": null, "is_private": false, "id": 45815, "time": "2003-10-17T07:51:58Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-10-17T07:51:58Z", "text": "Ok I have tested this with the absolute c:\\ as basedir\non ant 1.6 and ant 1.5 on windows.\nThe problem exists for ant 1.5 but is fixed in ant 1.6."}]