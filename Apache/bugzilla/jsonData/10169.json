[{"count": 0, "tags": [], "bug_id": 10169, "attachment_id": null, "id": 18446, "time": "2002-06-24T08:33:55Z", "creator": "supra@netvision.net.il", "creation_time": "2002-06-24T08:33:55Z", "is_private": false, "text": "Here is my compilation procedure of apache-1.3.26:\n-----------------------------------------------------------------------\ngzip -dc openssl-0.9.6d.tar.gz | tar xvf -\ncd openssl-0.9.6d\n./config --prefix=/usr/local --openssldir=/usr/local/openssl\nmake\nmake install\ncd ..\ngzip -dc apache_1.3.26.tar.gz | tar xvf -\ngzip -dc mod_auth_mysql-2.20.tar.gz | tar xvf -\ngzip -dc php-4.2.1.tar.gz | tar xvf -\ngzip -dc mod_ssl-2.8.9-1.3.26.tar.gz | tar xvf -\ncd apache_1.3.26\n./configure\ncd ../php-4.2.1\n./configure --with-mysql --with-apache=../apache_1.3.26 --enable-track-vars\nmake\nmake install\ncd ../mod_auth_mysql-2.20\n./configure --with-mysql=/usr/local/mysql --with-apache=../apache_1.3.26\nmake install\ncd ../mod_ssl-2.8.9-1.3.26\n./configure --with-apache=../apache_1.3.26 --with-ssl=../openssl-0.9.6d\ncd ../apache_1.3.26\nsetenv OPTIM \" -g -ggdb \"\n./configure --prefix=/usr/local/apache-ssl --activate-\nmodule=src/modules/php4/libphp4.a --activate-\nmodule=src/modules/auth_mysql/libauth_mysql.a --enable-module=ssl\nmake\nmake install\ncd ..\ncd apache_1.3.26/src\nmake certificate\n-----------------------------------------------------------------------\n\nEverything goes ok (except for a rule on alloc.h in \nsrc/modules/auth_mysql/Makefile, that could be resolved by simple comment out)\n\nThe problem appears when apache runs. Childs dying when trying to get *.gif \nfiles (for example).\nWhen debugging the apache (with \u2013X) I see that there is a moment when static \nhash_buckets[] array from mod_mime.c gets overwritten. Here is an example:\n\n(gdb) p hash_buckets\t// This is after init_mime()\n$4 =   {0x82ccb54,\n  0x82ccbbc,\n  0x82ccc24,\n  0x82ccc8c,\n  0x82cccf4,\n  0x82ccd5c,\n  0x82ccdc4,\n  0x82cce2c,\n  0x82cce94,\n  0x82ccefc,\n  0x82ccf64,\n  0x82ccfcc,\n  0x82cd034,\n  0x82cd09c,\n  0x82cd104,\n  0x82cd16c,\n  0x82cd1d4,\n  0x82cd23c,\n  0x82cd2a4,\n  0x8305eb4,\n  0x8305f1c,\n  0x8305f84,\n  0x8305fec,\n  0x8306054,\n  0x83060bc,\n  0x8306124,\n  0x830618c,\n  0x83061f4,\n  0x830625c,\n  0x83062c4,\n  0x830632c,\n  0x8306394}\n(gdb) c\nContinuing.\nProgram received signal SIGSEGV, Segmentation fault.\n0x814ae03 in ap_table_get (t=0x6b2b587a, key=0x8309dec \"gif\") at alloc.c:1479\n1473        table_entry *elts = (table_entry *) t->a.elts;\n(gdb) where\n#0  0x814ae03 in ap_table_get (t=0x2956574b, key=0x8309d94 \"gif\")\n    at alloc.c:1473\n#1  0x807f5e8 in find_ct (r=0x8307e9c) at mod_mime.c:656\n#2  0x814eae4 in run_method (r=0x8307e9c, offset=17, run_all=0)\n    at http_config.c:369\n#3  0x814eb88 in ap_find_types (r=0x8307e9c) at http_config.c:391\n#4  0x8163c0d in process_request_internal (r=0x8307e9c) at http_request.c:1297\n#5  0x8163ccc in ap_process_request (r=0x8307e9c) at http_request.c:1324\n#6  0x815adce in child_main (child_num_arg=0) at http_main.c:4681\n#7  0x815af80 in make_child (s=0x82a09ec, slot=0, now=1024906769)\n    at http_main.c:4805\n#8  0x815b0d9 in startup_children (number_to_start=5) at http_main.c:4887\n#9  0x815b736 in standalone_main (argc=4, argv=0xbffffa24) at http_main.c:5195\n#10 0x815bf13 in main (argc=4, argv=0xbffffa24) at http_main.c:5558\n(gdb) p hash_buckets\t// This is when trying to get .gif file\n$5 =   {0x0,\n  0x0,\n  0x0,\n  0x0,\n  0x0,\n  0x0,\n  0x0,\n  0x6b2b587a,\n  0x62216a5c,\n  0x0,\n  0x8261934,\n  0x0,\n  0x82cd234,\n  0x82cd29c,\n  0x8305eb4,\n  0x8305f1c,\n  0x8305f84,\n  0x8305fec,\n  0x8306054,\n  0x83060bc,\n  0x8306124,\n  0x830618c,\n  0x83061f4,\n  0x830625c,\n  0x83062c4,\n  0x830632c,\n  0x8306394,\n  0x83063fc,\n  0x8306464,\n  0x83064cc,\n  0x8306534,\n  0x830659c}\n(gdb) \n\nThe strange thing is that it doesn't happen all the time. Please help."}, {"attachment_id": null, "tags": [], "creator": "nd@perlig.de", "text": "Does the issue still persist in 1.3.29?", "count": 1, "id": 51345, "time": "2004-01-28T23:15:21Z", "bug_id": 10169, "creation_time": "2004-01-28T23:15:21Z", "is_private": false}]