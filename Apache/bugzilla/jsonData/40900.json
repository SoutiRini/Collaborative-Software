[{"count": 0, "tags": [], "bug_id": 40900, "attachment_id": null, "is_private": false, "id": 95448, "time": "2006-11-05T15:54:39Z", "creator": "dim@colebatch.com", "creation_time": "2006-11-05T15:54:39Z", "text": "I have a javadoc task that looks like:\n\n\t\t<javadoc\n            docletpath=\"C:\\bea\\weblogic81\\server\\lib\\ejbgen.jar\"\n            destdir=\"C:\\dev\\tmp\\ibus-param\\gensrc\"\n\t\t\tfailonerror=\"yes\"\n            >\n            <classpath>\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\patches\\wlSecurityProviders.jar\" />\n\t\t\t\t<pathelement location=\"C:\\bea\\weblogic81\n\\server\\lib\\weblogic.jar\" />\n\t\t\t\t<pathelement location=\"C:\\bea\\weblogic81\n\\server\\lib\\mbeantypes\\wlManagement.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\junit.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\mockobjects\\mockobjects-core-\n0.10dev.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\mockobjects\\mockobjects-jdk1.4-\n0.10dev.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\mockobjects\\mockobjects-jdk1.4-j2ee1.3-\n0.10dev.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\mockejb\\commons-logging.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\mockejb\\mockejb.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\commons-collections.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\commons-logging.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\ehcache-1.1.jar\" />\n\t\t\t\t<pathelement \nlocation=\"C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\log4j.jar\" />\n\t\t\t</classpath>\n            <sourcepath>\n                <pathelement location=\"C:\\dev\\ibus\\param\\src\"/>\n                <pathelement location=\"C:\\dev\\tmp\\ibus-param\\gensrc\"/>\n            </sourcepath>\n            <fileset dir=\"C:\\dev\\ibus\\param\\src\">\n                <include name=\"**/*Bean.java\"/>\n            </fileset>\n            <doclet name=\"weblogic.tools.ejbgen.EJBGen\"/>\n        </javadoc>\n\nIt is obviously heavily dependent on my environment so I haven't gone as far \nas creating a testcase that works aside, but I can replicate the bug by adding \nthe above to the javadoc.xml test case and adding the corresponding test in \nJavadocTest.\n\nUnder 1.6.5 this gives:\n\n  [javadoc] Generating Javadoc\n  [javadoc] Executing 'C:\\Program Files\\Java\\jdk1.5.0_05\\bin\\javadoc.exe' with \narguments:\n  [javadoc] '-d'\n  [javadoc] 'C:\\dev\\tmp\\ibus-param\\gensrc'\n  [javadoc] '-classpath'\n  \n[javadoc] 'C:\\dev\\ibus\\thirdparty\\patches\\wlSecurityProviders.jar;C:\\bea\\weblog\nic81\\server\\lib\\weblogic.jar;C:\\bea\\weblogic81\n\\server\\lib\\mbeantypes\\wlManagement.jar;C:\\dev\\ibus\\thirdparty\\lib\\junit.jar;C:\n\\dev\\ibus\\thirdparty\\lib\\mockobjects\\mockobjects-core-\n0.10dev.jar;C:\\dev\\ibus\\thirdparty\\lib\\mockobjects\\mockobjects-jdk1.4-\n0.10dev.jar;C:\\dev\\ibus\\thirdparty\\lib\\mockobjects\\mockobjects-jdk1.4-j2ee1.3-\n0.10dev.jar;C:\\dev\\ibus\\thirdparty\\lib\\mockejb\\commons-\nlogging.jar;C:\\dev\\ibus\\thirdparty\\lib\\mockejb\\mockejb.jar;C:\\dev\\ibus\\thirdpar\nty\\lib\\ehcache\\commons-\ncollections.jar;C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\commons-\nlogging.jar;C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\ehcache-\n1.1.jar;C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\log4j.jar'\n  [javadoc] '-sourcepath'\n  [javadoc] 'C:\\dev\\ibus\\param\\src;C:\\dev\\tmp\\ibus-param\\gensrc'\n  [javadoc] '-doclet'\n  [javadoc] 'weblogic.tools.ejbgen.EJBGen'\n  [javadoc] '-docletpath'\n  [javadoc] 'C:\\bea\\weblogic81\\server\\lib\\ejbgen.jar'\n  [javadoc] 'C:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityBean.java'\n  \n[javadoc] 'C:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityGroupROBean.j\nava'\n  \n[javadoc] 'C:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityROBean.java'\n  [javadoc] 'C:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamSessionBean.java'\n  [javadoc]\n  [javadoc] The ' characters around the executable and arguments are\n  [javadoc] not part of the command.\n  [javadoc] Javadoc execution\n  [javadoc] Loading source file \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityBean.java...\n  [javadoc] Loading source file \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityGroupROBean.java...\n  [javadoc] Loading source file \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityROBean.java...\n  [javadoc] Loading source file \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamSessionBean.java...\n  [javadoc] Constructing Javadoc information...\n  [javadoc] \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityBean.java:167: cannot \nfind symbol\n  [javadoc] symbol  : class ParamEntityPK\n  [javadoc] location: class com.toyota.ibus.param.ParamEntityBean\n  [javadoc]     public ParamEntityPK ejbCreate(\n  [javadoc]                ^\n  [javadoc] \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityROBean.java:172: cannot \nfind symbol\n  [javadoc] symbol  : class ParamEntityPK\n  [javadoc] location: class com.toyota.ibus.param.ParamEntityROBean\n  [javadoc]     public ParamEntityPK ejbCreate(\n  [javadoc]                ^\n  [javadoc] \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamSessionBean.java:52: cannot \nfind symbol\n  [javadoc] symbol  : class ParamEntityLocalHome\n  [javadoc] location: class com.toyota.ibus.param.ParamSessionBean\n  [javadoc]     private ParamEntityLocalHome            _paramEntityHome;\n  [javadoc]                 ^\n  [javadoc] \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamSessionBean.java:53: cannot \nfind symbol\n  [javadoc] symbol  : class ParamEntityROLocalHome\n  [javadoc] location: class com.toyota.ibus.param.ParamSessionBean\n  [javadoc]     private ParamEntityROLocalHome          _paramEntityROHome;\n  [javadoc]                 ^\n  [javadoc] \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamSessionBean.java:54: cannot \nfind symbol\n  [javadoc] symbol  : class ParamEntityGroupROLocalHome\n  [javadoc] location: class com.toyota.ibus.param.ParamSessionBean\n  [javadoc]     private ParamEntityGroupROLocalHome     _paramGroupHome;\n  [javadoc]                 ^\n  [javadoc] EJBGen 2.16\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamSessionHome.java\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamSession.java\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamEntityLocal.java\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamEntityGroupROLocal.java\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamEntityROLocal.java\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamEntityLocalHome.java\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamEntityGroupROLocalHome.java\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamEntityROLocalHome.java\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamEntityPK.java\n  [javadoc] [Info:] ParamEntityRO EJB file is more recent, not regenerating \nPrimary key class\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamEntityValue.java\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-\nparam\\gensrc\\com\\toyota\\ibus\\param\\ParamEntityROValue.java\n  [javadoc] \nC:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamSessionBean.java:23: Warning: \nFound several ejbgen:ejb-client-jar.  Will use only one of them.\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-param\\gensrc\\\\ejb-jar.xml\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-param\\gensrc\\\\weblogic-ejb-\njar.xml\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-param\\gensrc\\\\weblogic-cmp-rdbms-\njar.xml\n  [javadoc] [Info:]  Creating C:\\dev\\tmp\\ibus-param\\gensrc\\ejbgen-build.xml5 \nwarnings\n\nBut under 1.7.0Beta3 i get:\n\n  [javadoc] C:\\dev\\tmp\\ibus-param\\gensrc doesn't contain any packages, \ndropping it.\n  [javadoc] Generating Javadoc\n  [javadoc] Executing 'C:\\Program Files\\Java\\jdk1.5.0_05\\bin\\javadoc.exe' with \narguments:\n  [javadoc] '-d'\n  [javadoc] 'C:\\dev\\tmp\\ibus-param\\gensrc'\n  [javadoc] '-classpath'\n  \n[javadoc] 'C:\\dev\\ibus\\thirdparty\\patches\\wlSecurityProviders.jar;C:\\bea\\weblog\nic81\\server\\lib\\weblogic.jar;C:\\bea\\weblogic81\n\\server\\lib\\mbeantypes\\wlManagement.jar;C:\\dev\\ibus\\thirdparty\\lib\\junit.jar;C:\n\\dev\\ibus\\thirdparty\\lib\\mockobjects\\mockobjects-core-\n0.10dev.jar;C:\\dev\\ibus\\thirdparty\\lib\\mockobjects\\mockobjects-jdk1.4-\n0.10dev.jar;C:\\dev\\ibus\\thirdparty\\lib\\mockobjects\\mockobjects-jdk1.4-j2ee1.3-\n0.10dev.jar;C:\\dev\\ibus\\thirdparty\\lib\\mockejb\\commons-\nlogging.jar;C:\\dev\\ibus\\thirdparty\\lib\\mockejb\\mockejb.jar;C:\\dev\\ibus\\thirdpar\nty\\lib\\ehcache\\commons-\ncollections.jar;C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\commons-\nlogging.jar;C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\ehcache-\n1.1.jar;C:\\dev\\ibus\\thirdparty\\lib\\ehcache\\log4j.jar'\n  [javadoc] '-sourcepath'\n  [javadoc] 'C:\\dev\\ibus\\param\\src;C:\\dev\\tmp\\ibus-param\\gensrc'\n  [javadoc] '-doclet'\n  [javadoc] 'weblogic.tools.ejbgen.EJBGen'\n  [javadoc] 'com.toyota.ibus.param'\n  [javadoc] 'C:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityBean.java'\n  \n[javadoc] 'C:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityGroupROBean.j\nava'\n  \n[javadoc] 'C:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamEntityROBean.java'\n  [javadoc] 'C:\\dev\\ibus\\param\\src\\com\\toyota\\ibus\\param\\ParamSessionBean.java'\n  [javadoc]\n  [javadoc] The ' characters around the executable and arguments are\n  [javadoc] not part of the command.\n  [javadoc] Javadoc execution\n  [javadoc] javadoc: error - Cannot find doclet class \nweblogic.tools.ejbgen.EJBGen\n  [javadoc] 1 error\n\nThis is a showstopper for us and I imagine for many other users.  I'll happily \nassist in helping to test/fix this if someone wants to point me in the right \ndirection."}, {"count": 1, "tags": [], "bug_id": 40900, "attachment_id": null, "is_private": false, "id": 95461, "time": "2006-11-06T02:50:03Z", "creator": "peterreilly@apache.org", "creation_time": "2006-11-06T02:50:03Z", "text": "I see the problem,\nit is due to a check in processing of attributes and elements\nin core-ant.\n"}, {"count": 2, "tags": [], "bug_id": 40900, "text": "Thanks for the report and for the -verbose output,\nit helped in tracking down the problem.\n\nI have fixed this in svn.\nUnfortunately, the fix will not make the cut\nfor ant 1.7.0rc1.\n\nIf you want to test the fix, apply the following patch to\nJavadoc.java, compile ant.jar ($ANT_SRC: ./build.sh or build.bat)\nand copy $ANT_SRC/dist/lib/ant.jar to $ANT_HOME/lib\n\n\nIndex: src/main/org/apache/tools/ant/taskdefs/Javadoc.java\n===================================================================\n--- src/main/org/apache/tools/ant/taskdefs/Javadoc.java (revision 471908)\n+++ src/main/org/apache/tools/ant/taskdefs/Javadoc.java (working copy)\n@@ -732,7 +732,9 @@\n      * @return a new DocletInfo instance to be configured.\n      */\n     public DocletInfo createDoclet() {\n-        doclet = new DocletInfo();\n+        if (doclet == null) {\n+            doclet = new DocletInfo();\n+        }\n         return doclet;\n     }", "id": 95500, "time": "2006-11-06T14:47:07Z", "creator": "peterreilly@apache.org", "creation_time": "2006-11-06T14:47:07Z", "is_private": false, "attachment_id": null}]