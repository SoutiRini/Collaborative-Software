[{"count": 0, "tags": [], "bug_id": 47710, "attachment_id": 24149, "id": 129794, "time": "2009-08-19T11:31:53Z", "creator": "adelmelle@apache.org", "creation_time": "2009-08-19T11:31:53Z", "is_private": false, "text": "Created attachment 24149\nFO file reproducing the issue\n\nIf a fo:marker only contains inline-content, this may produce 'dangling'\nreferences to the inlines that are never released, and can lead to a\nNullPointerException in some cases.\n\nSee attached, minimized FO, for an example."}, {"count": 1, "tags": [], "text": "Created attachment 24150\nProposed quick-fix\n\nThe patch in attach fixes the problem by resetting the XMLWhiteSpaceHandler every time a new page-sequence starts. (Note: doing this at the end of the page-sequence does not help, because marker white-space handling is performed in between the start- and endPageSequence events)", "is_private": false, "id": 129796, "creation_time": "2009-08-19T11:42:50Z", "time": "2009-08-19T11:42:50Z", "creator": "adelmelle@apache.org", "bug_id": 47710, "attachment_id": 24150}, {"count": 2, "tags": [], "text": "(In reply to comment #1)\n> (Note: doing this at the end of the\n> page-sequence does not help, because marker white-space handling is performed\n> in between the start- and endPageSequence events)\n\nCorrection: of course, I actually mean 'between end- and startPageSequence' of two consecutive page-sequences. The endPageSequence event is triggered before the marker's white-space is handled, and currently, that leads to references being carried over.\n\nTechnically, the cause is that white-space handling does not really 'continue' from the surrounding block, so the normal cleanup of the 'pending' inline is never triggered.", "attachment_id": null, "bug_id": 47710, "id": 129797, "time": "2009-08-19T11:46:58Z", "creator": "adelmelle@apache.org", "creation_time": "2009-08-19T11:46:58Z", "is_private": false}, {"count": 3, "tags": [], "text": "\nQuick fix committed in r806361.\n\nI'm inclined to leave this bug open for the moment, as this is not really the cleanest way to solve it. The real issue may ultimately still cause incorrect preservation of trailing white-space in such markers. Likely to be hardly noticeable, but still...", "attachment_id": null, "bug_id": 47710, "id": 129826, "time": "2009-08-20T14:19:21Z", "creator": "adelmelle@apache.org", "creation_time": "2009-08-20T14:19:21Z", "is_private": false}, {"count": 4, "tags": [], "creator": "gadams@apache.org", "text": "resetting P2 open bugs to P3 pending further review", "id": 157493, "time": "2012-04-07T01:43:53Z", "bug_id": 47710, "creation_time": "2012-04-07T01:43:53Z", "is_private": false, "attachment_id": null}]