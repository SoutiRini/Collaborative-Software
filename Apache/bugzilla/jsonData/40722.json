[{"count": 0, "tags": [], "bug_id": 40722, "attachment_id": null, "id": 94710, "time": "2006-10-11T01:54:12Z", "creator": "caster@gentoo.org", "creation_time": "2006-10-11T01:54:12Z", "is_private": false, "text": "src/ has two files, Class1.java and Class2.java\n\nbuild.xml:\n\n<javac destdir=\"classes\" srcdir=\"src\">\n  <include if=\"trigger.include\" name=\"Class1.java\"/>\n</javac>\n\nWhen ${trigger.include} property is set, only Class1.java is compiled. Fine.\nHowever, if the property is not set, ant 1.6.5 compiles nothing, while ant\n1.7.0_beta2 (and also svn r462730) compiles whole src (both source files).\n\nEither it's a bug, or was intended change, but then it should go to \"Changes\nthat could break older environments\" section of changelog (from discussion on\ndev ML it looks like a bug though)."}, {"count": 1, "tags": [], "creator": "caster@gentoo.org", "text": "Created attachment 18988\nbuild.xml to test with\n\nrun \"ant prepare\" to get the needed dir/file structure, then you can run \"ant\"\nand \"ant -Dtrigger.include=true\" with 1.6.5 and 1.7.0 to see the difference in\nwhat it compiles (don't forget \"ant clean\" after each try :)", "id": 94711, "time": "2006-10-11T01:56:24Z", "bug_id": 40722, "creation_time": "2006-10-11T01:56:24Z", "is_private": false, "attachment_id": 18988}, {"count": 2, "tags": [], "bug_id": 40722, "attachment_id": 19048, "text": "Created attachment 19048\nupdated build.xml\n\nThe target \"fileset\" of this build.xml works with Ant 1.6.5\nIt fails with the current SVN.\nThis issue is more general than an issue with the <javac/> task, it is a change\nin the behavior of fileset. Could it be even due to changes in introspection\nmechanisms ?", "id": 95179, "time": "2006-10-28T12:32:56Z", "creator": "antoine@apache.org", "creation_time": "2006-10-28T12:32:56Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 40722, "attachment_id": null, "id": 95180, "time": "2006-10-28T14:13:42Z", "creator": "antoine@apache.org", "creation_time": "2006-10-28T14:13:42Z", "is_private": false, "text": "It looks like the classes which control this behavior are AbstractFileSet.java,\nPatternSet.java, DirectoryScanner.java\nrunning ant -debug with ant-1.6.5 gives this output\nfileset: Setup scanner in dir C:\\dev\\40722\\src with patternSet{ includes:\n[Class1.java:if->trigger.include] excludes: [] }\n\nwith the latest SVN\nfileset: Setup scanner in dir C:\\dev\\40722\\src with patternSet{ includes: []\nexcludes: [] }\n\n"}, {"count": 4, "tags": [], "bug_id": 40722, "attachment_id": null, "text": "fixed in SVN. \nI have had to shunt the procedure mergePatterns in AbstractFileset to do this.\nThe code which has been put back in setupDirectoryScanner(FileScanner ds,\nProject p) comes from Ant 1.6.5", "id": 95182, "time": "2006-10-28T15:56:39Z", "creator": "antoine@apache.org", "creation_time": "2006-10-28T15:56:39Z", "is_private": false}]