[{"count": 0, "tags": [], "text": "Stas Bekman wrote:\n> Matthew Darwin wrote:\n> \n>> If you build apache with\n>>\n>>     ./configure \\\n>>         --prefix=/kinnetics/component/httpd\n>>\n>>     make install DESTDIR=/tmp/apache-kinnetics-$USER\n> \n> \n> When you do that, does apxs get affected? i.e. does it get all the \n> directories adjusted. If not (which I suppose is the case) it's a bug in \n> httpd build. You should report it to httpd as:\n> \n> I did:\n>  ./configure --prefix=/kinnetics/component/httpd\n>   make install DESTDIR=/tmp/apache-kinnetics-$USER\n> but apxs still points to the old location:\n>   /tmp/apache-kinnetics-darwin/kinnetics/component/httpd/bin/apxs -q\n>   INCLUDEDIR' failed:\n>   !!! cannot open /kinnetics/component/httpd/build/config_vars.mk: No such\n>    file or directory at\n>   /tmp/apache-kinnetics-darwin/kinnetics/component/httpd/bin/apxs line 256.\n> unless it's documented to behave this way\n> \n>> then when you try compiling mod_perl you get:\n>>\n>>    perl Makefile.PL \\\n>>    MP_AP_PREFIX=/tmp/apache-kinnetics-$USER/kinnetics/component/httpd \\\n>>    LIB=/tmp/apache-kinnetics-$USER/kinnetics/component/httpd/site_perl \\\n>>    PREFIX=/tmp\n>>\n>> ************* WARNING *************\n>> !!! '/tmp/apache-kinnetics-darwin/kinnetics/component/httpd/bin/apxs \n>> -q INCLUDEDIR' failed:\n>> !!! cannot open /kinnetics/component/httpd/build/config_vars.mk: No \n>> such file or directory at \n>> /tmp/apache-kinnetics-darwin/kinnetics/component/httpd/bin/apxs line 256.\n>>\n>>\n>> Note that this works just fine under mod_perl 1.99_10-dev.\n> \n> \n> right, we just didn't use apxs in earlier versions (and the build \n> couldn't handle this situation). mod_perl relies on a working apxs. If \n> that's broken it needs to be fixed.\n> \n>", "is_private": false, "id": 50430, "creator": "matthew@davin.ottawa.on.ca", "time": "2004-01-12T23:30:19Z", "bug_id": 26076, "creation_time": "2004-01-12T23:30:19Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "matthew@davin.ottawa.on.ca", "is_private": false, "id": 50431, "time": "2004-01-12T23:30:39Z", "bug_id": 26076, "creation_time": "2004-01-12T23:30:39Z", "tags": [], "text": "Well, presumably it points to the directory where it gets installed.  However, I\nhaven't installed it yet because I need to compile mod_perl.\n(My runtime machine doesn't have a compiler).\n\nIf that variable is changed, then how would apxs find things after I tar it up\n(not that I use it after it is in the correct location).\n\nI'm happy to open a apache bug."}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "text": "That's not a bug: a $DESTDIR installation is an intermediate install step.  The\napxs in the $DESTDIR root would not be expected to work, since all its embedded\nfilenames will point into the real install --prefix.  Complete the install and\napxs will work.", "id": 50438, "time": "2004-01-13T07:18:32Z", "bug_id": 26076, "creation_time": "2004-01-13T07:18:32Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 26076, "attachment_id": null, "is_private": false, "id": 50464, "time": "2004-01-13T13:23:58Z", "creator": "matthew@davin.ottawa.on.ca", "creation_time": "2004-01-13T13:23:58Z", "text": "This still doesn't resolve my situation.\n\nI can't build mod_perl until apache is installed, but I can't install apache\nuntil I've built mod_perl since \n\n1) I don't have permission to build into the destdir on the compile machine.\n2) The target machine doesn't have a compiler.\n\nI can mangle the code in \"apxs\" to make thing works, but this doesn't seem\nlike the correct solution."}, {"count": 4, "tags": [], "bug_id": 26076, "attachment_id": null, "is_private": false, "id": 50466, "time": "2004-01-13T13:39:01Z", "creator": "jorton@redhat.com", "creation_time": "2004-01-13T13:39:01Z", "text": "Does mod_perl still support building into the httpd source tree with 2.0?  I'd\nguess that's the only solution available for you.  Regardless, this isn't the\ncorrect forum to discuss it, try the mod_perl documentation (then mailing list)."}]