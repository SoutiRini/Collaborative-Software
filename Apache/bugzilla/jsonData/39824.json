[{"count": 0, "tags": [], "creator": "agharta@katamail.com", "attachment_id": null, "text": "Hi,\nI've encountered a serious problem with tomcat 5.5.16+ and memory realm in my\ncontext.xml app.\nThe code:\ncontext.xml\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Context path=\"/customers\"  unpackWAR=\"false\">\n    <Realm className=\"org.apache.catalina.realm.MemoryRealm\"\npathname=\"conf/customers-users.xml\" />\n</Context>\n\nI've create a ${CATALINA_HOME}/conf/customers-users.xml:\n\n<?xml version='1.0' encoding='utf-8'?>\n<tomcat-users>\n  <role rolename=\"default\"/>\n  <user username=\"theuser\" password=\"thepassword\" roles=\"default\"/>\n</tomcat-users>\n\n....and the web.xml (part of)\n\n<welcome-file-list>\n        <welcome-file>index.jsp</welcome-file>\n    </welcome-file-list>\n    <security-constraint>\n        <display-name>Example Security Constraint</display-name>\n        <web-resource-collection>\n            <web-resource-name>Protected Area</web-resource-name>\n            <url-pattern>/*</url-pattern>\n        </web-resource-collection>\n        <auth-constraint>\n            <role-name>default</role-name>\n        </auth-constraint>\n    </security-constraint>\n    <login-config>\n        <auth-method>BASIC</auth-method>\n        <realm-name>CLIENT ACCESS</realm-name>\n    </login-config>\n    <security-role>\n        <role-name>default</role-name>\n    </security-role>\n\n\nNow, the problem:\nIf i launch my app under tomcat 5.5.16+ the access popup form does not appear\nand the application server return a 401 error code, without any\nauthentication!!!!!! \nIf i ran the same webapp in tomcat 5.5.15 and earlier, my app works fine.\n\nAny idea??????", "id": 90301, "time": "2006-06-16T13:02:17Z", "bug_id": 39824, "creation_time": "2006-06-16T13:02:17Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 39824, "text": "This works for me using exact copies of your configuration files.\n\nThere must be some other configuration problem. I suggest you follow up on the\nTomcat users mailing list.", "id": 90325, "time": "2006-06-17T14:55:41Z", "creator": "markt@apache.org", "creation_time": "2006-06-17T14:55:41Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "agharta@katamail.com", "is_private": false, "text": "(In reply to comment #1)\n> This works for me using exact copies of your configuration files.\n> \n> There must be some other configuration problem. I suggest you follow up on the\n> Tomcat users mailing list.\n\n\nThanks for reply Mark Thomas!!!!!!!!\n\nI've found the problem!!!\nIn my web.xml i have this error page config:\n\n    <error-page>\n        <error-code>403</error-code>\n        <location>/error.jsp?errorCode=403</location>\n    </error-page>\n    <error-page>\n        <error-code>404</error-code>\n        <location>/error.jsp?errorCode=404</location>\n    </error-page>\n    <error-page>\n        <error-code>401</error-code>\n        <location>/error.jsp?errorCode=401</location>\n    </error-page>\n\nNow, look the last error code: i've added a 401 code catch. This error code\nconfig cause the problem.\n\nI'm sorry, the code extract was not complete.\n\nPlease try it! With tomcat 5.5.15-- the problem does not exists.\n\nRegards,\n         Agharta\n", "id": 90336, "time": "2006-06-18T08:39:18Z", "bug_id": 39824, "creation_time": "2006-06-18T08:39:18Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "Now I can see what you are doing, it is clear this bug is invalid. If you\nover-ride tomcat's 401 response you have to do the authentication yourself. If\nyou need any further help, please use the users list.", "attachment_id": null, "id": 90342, "creator": "markt@apache.org", "time": "2006-06-18T23:11:22Z", "bug_id": 39824, "creation_time": "2006-06-18T23:11:22Z", "is_private": false}]