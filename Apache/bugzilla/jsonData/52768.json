[{"count": 0, "attachment_id": null, "creator": "msrbugzilla@gmail.com", "text": "This is Ken Cheung, a Computer Science M.Phil. student. I observed some\ncode clones in Tomcat and found inconsistent code:\n\n/tomcat/trunk/java/org/apache/tomcat/util/net/AprEndpoint.java\n\n1048\t                try {\n1049\t                    Thread.sleep(1000);\n1050\t                } catch (InterruptedException e) {\n1051\t                    // Ignore\n1052\t                }\n1053\t                long now = System.currentTimeMillis();\n1054\t                Iterator<SocketWrapper<Long>> sockets =\n1055\t                    waitingRequests.iterator();\n1056\t                while (sockets.hasNext()) {\n1057\t                    SocketWrapper<Long> socket = sockets.next();\n1058\t                    if (socket.async) {\n1059\t                        long access = socket.getLastAccess();\n1060\t                        if (socket.getTimeout() > 0 &&\n1061\t                                (now-access)>socket.getTimeout()) {\n1062\t                            processSocketAsync(socket,SocketStatus.TIMEOUT);\n1063\t                        }\n1064\t                    }\n1065\t                }\n\n/tomcat/trunk/java/org/apache/tomcat/util/net/JIoEndpoint.java\n\n147\t                try {\n148\t                    Thread.sleep(1000);\n149\t                } catch (InterruptedException e) {\n150\t                    // Ignore\n151\t                }\n152\t                long now = System.currentTimeMillis();\n153\t                Iterator<SocketWrapper<Socket>> sockets =\n154\t                    waitingRequests.iterator();\n155\t                while (sockets.hasNext()) {\n156\t                    SocketWrapper<Socket> socket = sockets.next();\n157\t                    long access = socket.getLastAccess();\n158\t                    if (socket.getTimeout() > 0 &&\n159\t                            (now-access)>socket.getTimeout()) {\n160\t                        processSocketAsync(socket,SocketStatus.TIMEOUT);\n161\t                    }\n162\t                }\n\nQuick description of the inconsistency\nTwo code snippets are very similar code, but as you see, in JIoEndpoint.java does not check \"if (socket.async)\" while AprEndpoint.java has the checker.\n\nWe thought it could be a potential bug or inconsistency. Hope this helps.", "id": 154141, "time": "2012-02-25T14:47:46Z", "bug_id": 52768, "creation_time": "2012-02-25T14:47:46Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "text": "(In reply to comment #0)\n> We thought it could be a potential bug or inconsistency. Hope this helps.\n\nBugzilla is not for reporting \"potential bugs\". If you aren't 100% sure you are\nreporting a bug you shouldn't be going anywhere near Bugzilla. Just because you\ndon't understand something, that does not make it a bug.\n\nIf there is a part of the Tomcat source code you don't understand, the users\nlist (not the developers list) is the place to seek clarification.\n\nThere is no bug here. If you want an explanation of why, the users list is the\nplace to ask.", "attachment_id": null, "bug_id": 52768, "id": 154156, "time": "2012-02-25T23:35:15Z", "creator": "markt@apache.org", "creation_time": "2012-02-25T23:35:15Z", "is_private": false}]