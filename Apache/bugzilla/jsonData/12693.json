[{"count": 0, "tags": [], "bug_id": 12693, "is_private": false, "id": 22926, "attachment_id": null, "creator": "serg@odessa.net", "creation_time": "2002-09-16T16:38:10Z", "time": "2002-09-16T16:38:10Z", "text": "Hi,\n've found that in Apache 2.0.40 ( at least this version, don't have tested nay\nother 2.x ) in mod_rewrite variable %{REMOTE_USER} have empty value. Debugging\nsrc, found that in mod_rewrite.c, func do_expand(), value of r->user is a NULL\nptr; at the same time, REMOTE_HOST and othe vars are set to some value,\nand also REMOTE_USER is correctly shown in logs and in PHP module ( in phpinfo()\nfunc ).\nI need to do a mapping on username. Mod_rewrite config used in virtualhost\ncontext was:\n\nRewriteEngine on\nRewriteMap REDIRECT txt:/WWW/site2-members/public_html/pass/.redirected_users\nRewriteCond ${REDIRECT:_0_%{REMOTE_USER}_1_%{HTTP_HOST}_2_%{REMOTE_HOST}} true\n\nAnd what I've seen in rewrite log:\n\nnet.like - - [10/Sep/2002:18:08:17 +0300]\nmembers.site2.org/sid#810f650][rid#818c050/initial] (5) map lookup FAILED:\nmap=REDIRECT[txt] key=_0__1_members.site2.org:8080_2_net.like\n\nNote the \"key\" value where REMOTE_USER must be...but isn't\n\nThat's all the story. Is it a bug or a feature ? ;) This was working in Apache\n1.3.x...\n\nWBRG, serg@odessa.net"}, {"attachment_id": null, "tags": [], "bug_id": 12693, "is_private": false, "count": 1, "id": 22934, "time": "2002-09-16T17:20:41Z", "creator": "slive@apache.org", "creation_time": "2002-09-16T17:20:41Z", "text": "It was working with EXACTLY the same configuration in 1.3?  It shouldn't have.\n\nSee point 4 under the \"special notes\" section of\nhttp://httpd.apache.org/docs-2.0/mod/mod_rewrite.html#rewritecond"}]