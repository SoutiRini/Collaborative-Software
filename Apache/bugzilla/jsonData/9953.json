[{"count": 0, "tags": [], "bug_id": 9953, "attachment_id": null, "id": 17984, "time": "2002-06-18T12:43:30Z", "creator": "mavricknz@yahoo.com", "creation_time": "2002-06-18T12:43:30Z", "is_private": false, "text": "The standard headers disappear when using an ssl server and the +ExportCertData \noption is added to SSLOptions. The certificate data when present is truncated \nto \"----- BEGIN CERTIFICATE -----\". Tested using printenv script.\n\nstandard RedHat 7.2/apache 2.0.36 worker MPM\n\n# This just has the SSL variable set, no http varibles are avaliable\nSSLOptions +StdEnvVars +ExportCertData   \n###\nHTTPS=\"on\"\nSSL_CIPHER=\"RC4-MD5\"\nSSL_CIPHER_ALGKEYSIZE=\"128\"\nSSL_CIPHER_EXPORT=\"false\"\nSSL_CIPHER_USEKEYSIZE=\"128\"\nSSL_CLIENT_A_KEY=\"rsaEncryption\"\nSSL_CLIENT_A_SIG=\"sha1WithRSAEncryption\"\nSSL_CLIENT_CERT=\"-----BEGIN CERTIFICATE-----\" ### Wrong as well\n.\n.\n.\n\n\n# This works fine\nSSLOptions +StdEnvVars\n\n# CGI variables avaliable ...\nDOCUMENT_ROOT=\"/opt/DKBapache2.0/htdocs\"\nGATEWAY_INTERFACE=\"CGI/1.1\"\nHTTP_ACCEPT=\"image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, \napplication/vnd.ms-excel, application/msword, application/vnd.ms-powerpoint, \n*/*\"\nHTTP_ACCEPT_ENCODING=\"gzip, deflate\"\n+ SSL standard variables"}, {"count": 1, "tags": [], "creator": "mavricknz@yahoo.com", "text": "Bug in 2.0.39 as well.\n\nLooking at modules/ssl/ssl_engine_kernel.c and replacing the SSL_CLIENT_CERT \nand SSL_SERVER_CERT headers as ...\n\n   val = ssl_var_lookup(r->pool, r->server, r->connection,\n                             r, \"SSL_SERVER_CERT\");\n   val = \"boo\";\n   apr_table_setn(env, \"SSL_SERVER_CERT\", val);\n   val = ssl_var_lookup(r->pool, r->server, r->connection,\n                             r, \"SSL_CLIENT_CERT\");\n   val = \"hoo\";\n   apr_table_setn(env, \"SSL_CLIENT_CERT\", val);\n\nThen everything is fine. val = \"boo\\n\" is also fine. However changing to\n\n   val \n= \"oooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooo\nooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooooooooooooooooooooooo\nooooooooooooooooooooo\\nooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\no\\noooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooo\nooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooooooooooooooooooooooo\nooooooooooooooooooooo\\nooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\no\\noooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooo\nooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooooooooooooooooooooooo\nooooooooooooooooooooo\\nooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\no\\noooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooo\nooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooooooooooooooooooooooo\nooooooooooooooooooooo\\nooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\no\\noooooooooooooooooooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooo\nooooooooooooooooooooooooooooooooooooooooo\\nooooooooooooooooooooooooooooooooooooo\nooooooooooooooooooooo\\n\";\n\nAnd things break again... Getting rid of the line feeds and it's fine. Looks \nlike an issue with large headers with embeded line feeds.", "id": 18074, "time": "2002-06-19T14:34:15Z", "bug_id": 9953, "creation_time": "2002-06-19T14:34:15Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9953, "attachment_id": null, "text": "Bug 18989 has a workaround for this problem.\n\n*** This bug has been marked as a duplicate of 18989 ***", "id": 41071, "time": "2003-07-21T14:05:02Z", "creator": "jorton@redhat.com", "creation_time": "2003-07-21T14:05:02Z", "is_private": false}, {"count": 3, "tags": [], "creator": "jorton@redhat.com", "text": "This is not a duplicate.", "id": 53153, "time": "2004-02-27T17:53:45Z", "bug_id": 9953, "creation_time": "2004-02-27T17:53:45Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 53829, "time": "2004-03-10T18:12:37Z", "bug_id": 9953, "creation_time": "2004-03-10T18:12:37Z", "is_private": false, "text": "Ah ha.  Mishandling of environment variables containing newlines with worker MPM\nis mod_cgid bug 14550; fixed since 2.0.44.\n\n\n*** This bug has been marked as a duplicate of 14550 ***"}]