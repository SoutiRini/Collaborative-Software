[{"count": 0, "tags": [], "creator": "ijackson@banta-im.com", "attachment_id": null, "text": "I created a file of comma seperated values and used open office to write an\nexcel file.\n\nI found in smaller data sets with java hprof that over 30% of the time was spent\nin SSTderializer.addToStringTable and what it called mostly creating the\nexception in put. Nothing else was over 5%. The precentage of time in\naddToStringTable increased as my data set got larger.\n   static public void addToStringTable( BinaryTree strings, Integer integer,\nUnicodeString string )\n   {\n\n       if ( string.isRichText() )\n           string.setOptionFlags( (byte) ( string.getOptionFlags() & ( ~8 ) ) );\n       if ( string.isExtendedText() )\n           string.setOptionFlags( (byte) ( string.getOptionFlags() & ( ~4 ) ) );\n\n       boolean added = false;\n       while ( added == false )\n       {\n           try\n           {\n               strings.put( integer, string );\n               added = true;\n           }\n           catch ( Exception ignore )\n           {\n               string.setString( string.getString() + \" \" );\n           }\n       }\n\n   }\n\n\nOf course, if you are really expecting the values might be the same a different\ndata struture should be used like a straight hash map.", "id": 67088, "time": "2004-11-17T22:48:03Z", "bug_id": 32286, "creation_time": "2004-11-17T22:48:03Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 32286, "attachment_id": 13486, "text": "Created attachment 13486\nThe version created by open office", "id": 67089, "time": "2004-11-17T22:49:32Z", "creator": "ijackson@banta-im.com", "creation_time": "2004-11-17T22:49:32Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 32286, "attachment_id": 13487, "id": 67090, "time": "2004-11-17T22:51:32Z", "creator": "ijackson@banta-im.com", "creation_time": "2004-11-17T22:51:32Z", "is_private": false, "text": "Created attachment 13487\nThe orginal\n\nI cut 100 lines off the file to create the 900 records"}, {"count": 3, "tags": [], "text": "It shouldnot contain any rich text", "attachment_id": null, "bug_id": 32286, "id": 67091, "time": "2004-11-17T22:52:20Z", "creator": "ijackson@banta-im.com", "creation_time": "2004-11-17T22:52:20Z", "is_private": false}, {"count": 4, "tags": [], "creator": "jheight@apache.org", "attachment_id": null, "text": "This is now corrected in SVN (or has been for quite some time). Previously we\ndidnt understand rich text, so the exception below was used to append a space on\nthe send of the string to preserve its uniqueness.\n\nNow that rich text handling is correct, that block of code is now gone ie we\ndont use exceptions at that low level, hence the code is much faster.\n\nMarking as fixed.\n\nJason\n\n*** This bug has been marked as a duplicate of 25039 ***", "id": 91682, "time": "2006-07-28T03:23:25Z", "bug_id": 32286, "creation_time": "2006-07-28T03:23:25Z", "is_private": false}]