[{"count": 0, "tags": [], "bug_id": 8241, "attachment_id": null, "id": 13951, "time": "2002-04-18T08:45:17Z", "creator": "jacekchmiel@wp.pl", "creation_time": "2002-04-18T08:45:17Z", "is_private": false, "text": "CONFIG:\nI use apache 2.0.35 under windows xp with mod_dav enabled.\nConfiguration is extremely simple - the only option is \"Dav On\"\ninside <Directory ...> section.\n\nAdded apache web folder to windows explorer (web folder).\n\nPROBLEM: All operations work perefecty except DELETE.\n\nExplorer displays \"Unable to delete Calendar.htm\".\nBut... when I press F5 to refresh dir content the file is gone.\nIt means FILE IS DELETED but wrong response (code 500) \nis returned by Apache.\n\nIn error.log something like that appears:\n\nmike/cd_temp/cd7-EmpireStrikesBack/Calendar.htm\n[Wed Apr 17 15:29:40 2002] [error] [client 10.29.0.63] Could not DELETE\n/cd/cd7-EmpireStrikesBack/Calendar.htm.  [500, #0]\n[Wed Apr 17 15:29:40 2002] [error] [client 10.29.0.63] Could not remove\nproperties.  [500, #0]"}, {"count": 1, "tags": [], "creator": "ellisteer_box8003@sitepen.com", "attachment_id": null, "id": 18782, "time": "2002-07-01T02:52:51Z", "bug_id": 8241, "creation_time": "2002-07-01T02:52:51Z", "is_private": false, "text": "Apache 2.0.39 Windows OpenSSL\n\nSame issue.  DAV in this case is over SSL.  Deletes always return a 500 error. \nError occurs when using either MS WebDav or DAVExplorer clients.\n\n-Ellis"}, {"count": 2, "tags": [], "creator": "benoit.tanguy@solucom.fr", "is_private": false, "text": "I did investigate on the bug on NT/2000 OS.\nThe problem seem to be linked to an error number problem when mod_dav try to \nremove the file property file (for instance  \nc:\\apache\\htdocs\\file\\.DAV\\my_file.txt.dir )\nIn fact if you create the directory .DAV it works. So the problem is only when \nit try to remove a file from a directory that does not exist.\n\nHere are some information I collect when debuggingI\nTeh problem is in repos.c : the functiuon dav_fs_deleteset call apr_file_remove.\nThen it test the status code (OK or no file) and continue.\nBut in our case (NT 2000) when the directory where it try to remove the file \ndoes not exist the return code is not well treated (code 225003)\nIn fact it the apr file_io functions seems to use Unix error code.\nBut in our case the error code after the deleting of a file is seems to be \nspecific to windows (Code 3 ERROR_PATH_NOT_FOUND).\n\nSo I have find a solution (I did modify repos.c to test the code). But it's not \na clean one. It may be better to change the way APR fucntion treat Windows \nerror code.\nIt's the first time I'm debugging apache. I would like to have a suggestion \nfrom someone experimented.\nThanks for your help.\n\n\n", "id": 18978, "time": "2002-07-03T21:48:06Z", "bug_id": 8241, "creation_time": "2002-07-03T21:48:06Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "id": 19130, "time": "2002-07-08T19:02:01Z", "bug_id": 8241, "creation_time": "2002-07-08T19:02:01Z", "is_private": false, "text": "\n  Good call.  ENOENT and ENOTDIR don't match exactly to the win32 counterparts.\n\n  We patched the server to answer APR_STATUS_IS_ENOENT and APR_STATUS_IS_ENOTDIR\n  both as true for the PATH_NOT_FOUND case.  Try the patch cited in the URL\n\n    http://cvs.apache.org/viewcvs.cgi/apr/include/apr_errno.h.diff?r1=1.91&r2=1.92\n\n  and report back if that patch fixes your observed bug.  Thanks for the followup!\n"}, {"count": 4, "tags": [], "creator": "benoit.tanguy@solucom.fr", "attachment_id": null, "id": 19556, "time": "2002-07-15T13:54:33Z", "bug_id": 8241, "creation_time": "2002-07-15T13:54:33Z", "is_private": false, "text": "OK\nWill Rowe patch works well.\nI restored the original Apache 2.0.39 and patch apr_errno.h.\nI rebuild the whole server.\nThe DAV delete works well on W2K now.\nThanks,\nB. TANGUY\n"}, {"count": 5, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "is_private": false, "id": 19571, "time": "2002-07-15T17:52:06Z", "bug_id": 8241, "creation_time": "2002-07-15T17:52:06Z", "text": "\n  Brane's fix to apr_errno does the trick [will be in the 2.0.40 release]\n\n  Closing report."}]