[{"count": 0, "tags": [], "creator": "zenzhong8383@gmail.com", "attachment_id": null, "is_private": false, "id": 178788, "time": "2014-10-28T09:34:58Z", "bug_id": 57158, "creation_time": "2014-10-28T09:34:58Z", "text": "Servlet.service / ReadListener / WriteListener are executed in the same thread pool, there may be performance issue when ReadListener / WriteListener is used and tomcat is on high load.\n\nRelated log:\n2014-10-28 15:58:04,497 DEBUG [http-nio-8080-exec-1] EchoAsyncServlet3: test\njava.lang.Exception: test\n        at EchoAsyncServlet3.service(EchoAsyncServlet3.java:16) [EchoAsyncServlet3.class:na]\n\n2014-10-28 15:58:04,501 DEBUG [http-nio-8080-exec-1] TextReadListener: onAllDataRead\njava.lang.Exception: onAllDataRead\n        at TextReadListener.onAllDataRead(TextReadListener.java:43) [TextReadListener.class:na]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:570) [catalina.jar:8.0.14]\n\n2014-10-28 15:58:04,501 DEBUG [http-nio-8080-exec-1] TextReadListener: onAllDataRead> text=\n2014-10-28 15:58:04,502 DEBUG [http-nio-8080-exec-1] TextReadListener: onAllDataRead> uri=/chatdemo/echo_async3, User-Agent=curl/7.32.0, params={}\n2014-10-28 15:58:04,502 DEBUG [http-nio-8080-exec-1] TextReadListener: start sleep\n2014-10-28 15:58:05,502 DEBUG [http-nio-8080-exec-1] TextReadListener: sleep finished, start writing\n2014-10-28 15:58:05,506 DEBUG [http-nio-8080-exec-1] TextWriteListener: onWritePossible\njava.lang.Exception: onWritePossible\n        at TextWriteListener.onWritePossible(TextWriteListener.java:39) [TextWriteListener.class:na]\n        at org.apache.coyote.Response.onWritePossible(Response.java:630) [tomcat-coyote.jar:8.0.14]\n        at org.apache.coyote.http11.AbstractHttp11Processor.asyncDispatch(AbstractHttp11Processor.java:1675) [tomcat-coyote.jar:8.0.14]"}, {"count": 1, "text": "This is as designed. Size your thread pool appropriately for your load.", "bug_id": 57158, "is_private": false, "id": 178789, "time": "2014-10-28T10:19:48Z", "creator": "markt@apache.org", "creation_time": "2014-10-28T10:19:48Z", "tags": [], "attachment_id": null}]