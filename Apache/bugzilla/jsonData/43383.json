[{"count": 0, "tags": [], "bug_id": 43383, "text": "When i print a specific document with 2 pages with AWT Renderer, the second page\nis printed first, and then the first page.\nEven if i select a PDF pseudo printer driver (WIN2PDF), the generated PDF\ncontains first the second page, then the first page (see attached PDF).\n\nPrinting code:\nPageable p = getFop93Pageable(fopString);\nprintJavaxDefault(p,DocFlavor.SERVICE_FORMATTED.PAGEABLE);\n\n\nUtility method code for generating Pageable:\n\n    public static Pageable getFop93Pageable(String fopString){\n       StringReader reader = new StringReader(fopString);\n\n       if(fopFactory == null){\n           fopFactory = FopFactory.newInstance();\n       }\n\n        try {\n            AWTRenderer renderer = new AWTRenderer();\n            FOUserAgent agent = fopFactory.newFOUserAgent();\n            agent.setRendererOverride(renderer);\n            renderer.setPreviewDialogDisplayed(false);\n            renderer.setUserAgent(agent);\n            Fop fop = fopFactory.newFop(AWTRenderer.MIME_TYPE, agent);\n            TransformerFactory factory = TransformerFactory.newInstance();\n            Transformer transformer = factory.newTransformer();\n            Source src = new StreamSource(reader);\n            Result res = new SAXResult(fop.getDefaultHandler());\n            transformer.transform(src, res);\n            return renderer;\n        } catch (Exception e) {\n            e.printStackTrace();\n            throw new RuntimeException(e);\n        } finally{\n            if(reader != null)\n                reader.close();\n        }\n    }\n\nUtility method code for printing pageable:\n\n    public static void printJavaxDefault(Object input, DocFlavor flavor){\n        PrintService pservice = PrintServiceLookup.lookupDefaultPrintService();\n        if(pservice==null) {\n            throw new RuntimeException(\"No print service available\");\n        }\n        DocPrintJob pj = pservice.createPrintJob();\n        Doc doc = new SimpleDoc(input, flavor, null);\n        PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\n        aset.add(MediaSizeName.ISO_A4);\n        try {\n              pj.print(doc, aset);\n         } catch (PrintException e) {\n             throw new RuntimeException(e);\n         }\n    }\n\n\nThe used FOP XML document (fopString) is attached to this bug report.", "id": 108130, "time": "2007-09-13T05:45:49Z", "creator": "wolfc@spardat.at", "creation_time": "2007-09-13T05:45:49Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 43383, "text": "Created attachment 20815\nPrinted Document on PDF pseudo printer\n\nDocument printed to the WIN2PDF pseudo printer", "id": 108131, "time": "2007-09-13T05:47:27Z", "creator": "wolfc@spardat.at", "creation_time": "2007-09-13T05:47:27Z", "is_private": false, "attachment_id": 20815}, {"count": 2, "attachment_id": 20816, "creator": "wolfc@spardat.at", "is_private": false, "id": 108132, "time": "2007-09-13T05:48:06Z", "bug_id": 43383, "creation_time": "2007-09-13T05:48:06Z", "tags": [], "text": "Created attachment 20816\nUsed FOP XML document for printing"}, {"count": 3, "tags": [], "bug_id": 43383, "text": "We experimented a little bit with the document and could confirm that this bug \nis related with the usage of the total numer of pages in the document footer.\n\n <fo:block text-align=\"end\">\n  Seite \n  <fo:page-number /> \n  von \n  <fo:page-number-citation ref-id=\"LASTBLOCK1\" /> \n </fo:block>\n\n\nIf we don't generate the total numer of pages in the footer, the pages are \nprinted in the correct order!\n", "id": 109194, "time": "2007-10-10T08:22:10Z", "creator": "wolfc@spardat.at", "creation_time": "2007-10-10T08:22:10Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "jeremias@apache.org", "attachment_id": null, "text": "As a short-term work-around, can you please modify\nAWTRenderer.supportsOutOfOrder() and make sure it returns \"false\"? I'm pretty\nsure that's the problem. Of course, you'll need the sources for that and you\nhave to rebuild FOP yourself. HTH", "id": 109197, "time": "2007-10-10T08:52:03Z", "bug_id": 43383, "creation_time": "2007-10-10T08:52:03Z", "is_private": false}, {"count": 5, "tags": [], "text": "\nThanks for the hint, but we removed the total number of pages from the footer \nas a workaround, until the bug is fixed.", "is_private": false, "bug_id": 43383, "id": 109233, "time": "2007-10-11T03:46:09Z", "creator": "wolfc@spardat.at", "creation_time": "2007-10-11T03:46:09Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "Had the same problem generating total numer of pages and applied the patch\nmentioned above.\n\nAWTRenderer.java:\n    /** @see org.apache.fop.render.Renderer */\n    public boolean supportsOutOfOrder() {\n        return false; // TODO true?\n    }\n\nIt works fine!", "is_private": false, "bug_id": 43383, "id": 109586, "time": "2007-10-23T05:11:29Z", "creator": "surf.incognito@gmx.net", "creation_time": "2007-10-23T05:11:29Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 43383, "text": "Set out-of-order support to false to make sure this cannot happen anymore:\nhttp://svn.apache.org/viewvc?rev=649149&view=rev", "id": 115675, "time": "2008-04-17T08:14:03Z", "creator": "jeremias@apache.org", "creation_time": "2008-04-17T08:14:03Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "gadams@apache.org", "is_private": false, "count": 8, "id": 155673, "time": "2012-04-01T06:34:53Z", "bug_id": 43383, "creation_time": "2012-04-01T06:34:53Z", "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed"}]