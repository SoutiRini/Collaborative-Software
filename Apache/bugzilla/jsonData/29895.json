[{"count": 0, "tags": [], "text": "I was trying to deploy an application using Manager from local file system, \nonto local server.  Manager has two options:  load by specifing XML file, or \nby specifing web directory or war.\n\nYou can see my configuration below, but basically, deploying by specifying the \nfolder does not read META-INF/context.xml properly.  It read the <context \npath=\"/ablogic\"> value, but it doesn't read the <Resource stuff.  \n\nSo, if I deploy by specifying XML file (and specifying <context docBas=\"\">), \neverything works fine.  However, if I use a folder, I get the following:\n\nError message: Cannot create JDBC driver of class '' for connect URL 'null'\n\norg.apache.commons.dbcp.BasicDataSource.createDataSource\n(BasicDataSource.java:750)\n\norg.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:518)\n\norg.ablogic.db.Manager.getConnection(Manager.java:41)\n\norg.ablogic.db.Manager.testQuery(Manager.java:85)\n\norg.apache.jsp.init._2_jsp._jspService(_2_jsp.java:78)\n\norg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)\n\njavax.servlet.http.HttpServlet.service(HttpServlet.java:810)\n\norg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:298)\n\norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\njavax.servlet.http.HttpServlet.service(HttpServlet.java:810)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:237)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\ncom.jspbook.GZIPFilter.doFilter(GZIPFilter.java:37)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\norg.ablogic.web.CacheFilter.doFilter(CacheFilter.java:130)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\norg.ablogic.web.IPBlockFilter.doFilter(IPBlockFilter.java:135)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\norg.ablogic.web.TraceFilter.doFilter(TraceFilter.java:69)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\norg.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:214)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\norg.apache.catalina.core.StandardContextValve.invokeInternal\n(StandardContextValve.java:198)\n\norg.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:152)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n\norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:102)\n\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\norg.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:109)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\norg.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\n\norg.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)\n\norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:793)\n\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:702)\n\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:571)\n\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:644)\n\njava.lang.Thread.run(Unknown Source)\n\n\n\n-------- C A U S E ----------\n\nError message: No suitable driver\n\njava.sql.DriverManager.getDriver(Unknown Source)\n\norg.apache.commons.dbcp.BasicDataSource.createDataSource\n(BasicDataSource.java:743)\n\norg.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:518)\n\norg.ablogic.db.Manager.getConnection(Manager.java:41)\n\norg.ablogic.db.Manager.testQuery(Manager.java:85)\n\norg.apache.jsp.init._2_jsp._jspService(_2_jsp.java:78)\n\norg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)\n\njavax.servlet.http.HttpServlet.service(HttpServlet.java:810)\n\norg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:298)\n\norg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\norg.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\njavax.servlet.http.HttpServlet.service(HttpServlet.java:810)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:237)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\ncom.jspbook.GZIPFilter.doFilter(GZIPFilter.java:37)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\norg.ablogic.web.CacheFilter.doFilter(CacheFilter.java:130)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\norg.ablogic.web.IPBlockFilter.doFilter(IPBlockFilter.java:135)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\norg.ablogic.web.TraceFilter.doFilter(TraceFilter.java:69)\n\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n\norg.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n\norg.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:214)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\norg.apache.catalina.core.StandardContextValve.invokeInternal\n(StandardContextValve.java:198)\n\norg.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:152)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n\norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:102)\n\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\norg.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:109)\n\norg.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n\norg.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)\n\norg.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)\n\norg.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)\n\norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:793)\n\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:702)\n\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:571)\n\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:644)\n\njava.lang.Thread.run(Unknown Source)\n\n\n\nHere's my configuration:\n\nMETA-INF/context.xml:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?> \n\n<Context path=\"/ablogic\" docBase=\"C:\\Documents and Settings\\SysOp\\My \nDocuments\\AB LOGIC\\Eclipse Workspace\\abLogic\\web\" debug=\"9\" reloadable=\"true\">\n\n\t<Resource name=\"jdbc/ablogic\" auth=\"Container\" \ntype=\"javax.sql.DataSource\"/>\n\t\n    <ResourceParams name=\"jdbc/ablogic\">\n\t\t<!-- Max pool connections -->\n\t\t<parameter><name>maxActive</name><value>5</value></parameter>\n\t\t<!-- Max idle connections -->\n\t\t<parameter><name>maxIdle</name><value>5</value></parameter>\n\t\t<!-- Username -->\n\t\t<parameter><name>username</name><value>ivan</value></parameter>\n\t\t<!-- Password -->\n\t\n\t<parameter><name>password</name><value>kittiesrcute</value></parameter>\n\t\t<!--DB Driver -->\n\t\n\t<parameter><name>driverClassName</name><value>com.mysql.jdbc.Driver</va\nlue></parameter>\n\t\t<!--DB URL -->\n\t    \n<parameter><name>url</name><value>jdbc:mysql://192.168.0.1:3306/school?\nautoReconnect=true</value></parameter>\n\t</ResourceParams>\n\t\n</Context>\n\n\nAnd here's the relevant part of my WEB-INF/web.xml file:\n\n\t<resource-ref>\n\t\t<description>DB Connection</description>\n\t\t<res-ref-name>jdbc/ablogic</res-ref-name>\n\t\t<res-type>javax.sql.DataSource</res-type>\n\t\t<res-auth>Container</res-auth>\n\t</resource-ref>\n\n\nSo it took me a LOT of time to get it to work, but I finally did, and I \nthought I'd let you know about the problems.\n\nAlso, one thing is bugging me - how can you deploy onto a SPECIFIC host.  \nRight now I have only one host, and it deploys onto my localhost.  But in the \nfuture, I'll have many hosts, so how can I specify a certain host to deploy to?\n\nThanks guys!", "attachment_id": null, "bug_id": 29895, "id": 60106, "time": "2004-07-02T23:08:13Z", "creator": "ivj@comcast.net", "creation_time": "2004-07-02T23:08:13Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 29895, "is_private": false, "id": 61264, "attachment_id": null, "creator": "yoavs@computer.org", "creation_time": "2004-07-28T17:35:28Z", "time": "2004-07-28T17:35:28Z", "text": "You deploy to a specific Host by accessing the Manager URL for that Host.  Each \nHost must have its own Manager webapp.  One Manager webapp cannot work with \nmultiple Hosts.  In the future, I suggest using the mailing lists rather than \nBugzilla to ask questions: you will get more and better answers.\n\nAs for your bug submission itself, let me see if I understand correctly.\n- When you deploying using appname.xml, everything works fine.\n- When you deploy a WAR file which has META-INF/context.xml, the Resource \ninformation from context.xml is not read.\n- When you deploy using a folder on the hard drive, you get the error message \nabout the JDBC driver of class '' for connect URL 'null'.\n\nIs that right?  The configuration is the same for your tests, specifically the \nDBCP and your JDBC driver JARs are in the same directory?\n"}, {"count": 2, "tags": [], "creator": "ivj@comcast.net", "attachment_id": null, "id": 61267, "time": "2004-07-28T19:28:34Z", "bug_id": 29895, "creation_time": "2004-07-28T19:28:34Z", "is_private": false, "text": "Yes u got it right"}, {"attachment_id": null, "tags": [], "creator": "yoavs@computer.org", "text": "I'm downgrading the priority on this to normal: it's certainly not a \nblocker ;)  I'm also changing the Component to Webapps:Manager.\n\nCan you check if this still happens on 5.0.28?", "count": 3, "id": 62820, "time": "2004-08-31T00:13:43Z", "bug_id": 29895, "creation_time": "2004-08-31T00:13:43Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 29895, "attachment_id": null, "id": 63062, "creation_time": "2004-09-03T18:40:31Z", "time": "2004-09-03T18:40:31Z", "creator": "yoavs@computer.org", "text": "Both folder and war test cases work for me out of the box on 5.0.28.  I had to \nput my JDBC driver jar (ojdbc14.jar in my case, I'm using an Oracle database) \nin $CATALINA_HOME/common/lib, of course.  When I use context.xml inside a WAR, \nI specify docBase=\"test.war\" (or whatever the WAR file name is) rather than a \ndirectory.", "is_private": false}]