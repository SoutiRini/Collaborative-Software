[{"count": 0, "tags": [], "bug_id": 37840, "attachment_id": null, "id": 83415, "creation_time": "2005-12-08T14:19:26Z", "time": "2005-12-08T14:19:26Z", "creator": "pao@darkheim.freeserve.co.uk", "text": "There are several programming errors in the 2.2.0 code that prevent this from\nbuilding on AIX 5.2 with the IBM native Visual Age C/C++ compilers (V6+).\n\nOn a sidenote, the duplication of multiple configure points take forever to run.\n\nDetails:\n\nAIX oslevel -r:  5200-05\nvac.C:           6.0.0.11\nvacpp.cmp.core:  6.0.0.12\n\nPatches that fix these defects:\n\n*** apr_dbd.c   Thu Aug 11 15:06:26 2005\n--- apr_dbd.c.new       Wed Dec  7 12:17:37 2005\n***************\n*** 160,166 ****\n  {\n      int ret = driver->start_transaction(pool, handle, trans);\n      if (*trans) {\n!         apr_pool_cleanup_register(pool, *trans, (void*)driver->end_transaction,\n                                    apr_pool_cleanup_null);\n      }\n      return ret;\n--- 160,166 ----\n  {\n      int ret = driver->start_transaction(pool, handle, trans);\n      if (*trans) {\n!         apr_pool_cleanup_register(pool, *trans, driver->end_transaction,\n                                    apr_pool_cleanup_null);\n      }\n      return ret;\n***************\n*** 169,175 ****\n                                           apr_pool_t *pool,\n                                           apr_dbd_transaction_t *trans)\n  {\n!     apr_pool_cleanup_kill(pool, trans, (void*)driver->end_transaction);\n      return driver->end_transaction(trans);\n  }\n\n--- 169,175 ----\n                                           apr_pool_t *pool,\n                                           apr_dbd_transaction_t *trans)\n  {\n!     apr_pool_cleanup_kill(pool, trans, driver->end_transaction);\n      return driver->end_transaction(trans);\n  }\n\n*** apr_dbd_internal.h  Mon Aug 22 01:24:11 2005\n--- apr_dbd_internal.h.new      Wed Dec  7 12:16:38 2005\n***************\n*** 97,103 ****\n       *  @param transaction - the transaction.\n       *  @return 0 for success or error code\n       */\n!     int (*end_transaction)(apr_dbd_transaction_t *trans);\n\n      /** query: execute an SQL query that doesn't return a result set\n       *\n--- 97,103 ----\n       *  @param transaction - the transaction.\n       *  @return 0 for success or error code\n       */\n!     int (*end_transaction)(void *trans);\n\n      /** query: execute an SQL query that doesn't return a result set\n       *\n*** bio.h       Tue May 17 01:08:27 2005\n--- bio.h.new   Wed Dec  7 12:38:09 2005\n***************\n*** 676,682 ****\n\n  /*long BIO_ghbn_ctrl(int cmd,int iarg,char *parg);*/\n\n! #ifndef __GNUC__\n  #define __attribute__(x)\n  #endif\n  int BIO_printf(BIO *bio, const char *format, ...)\n--- 676,682 ----\n\n  /*long BIO_ghbn_ctrl(int cmd,int iarg,char *parg);*/\n\n! #ifndef __attribute__\n  #define __attribute__(x)\n  #endif\n  int BIO_printf(BIO *bio, const char *format, ...)\n*** httpd.h     Thu Sep 29 21:44:53 2005\n--- httpd.h.new Wed Dec  7 12:24:16 2005\n***************\n*** 1074,1080 ****\n  typedef enum  {\n      CONN_STATE_CHECK_REQUEST_LINE_READABLE,\n      CONN_STATE_READ_REQUEST_LINE,\n!     CONN_STATE_LINGER,\n  } conn_state_e;\n\n  /**\n--- 1074,1080 ----\n  typedef enum  {\n      CONN_STATE_CHECK_REQUEST_LINE_READABLE,\n      CONN_STATE_READ_REQUEST_LINE,\n!     CONN_STATE_LINGER\n  } conn_state_e;\n\n  /**\n*** sockets.c   Fri Sep  9 09:21:17 2005\n--- sockets.c.new       Wed Dec  7 12:05:15 2005\n***************\n*** 422,428 ****\n      return APR_SUCCESS;\n  }\n\n! APR_POOL_IMPLEMENT_ACCESSOR(socket);\n\n  APR_IMPLEMENT_INHERIT_SET(socket, inherit, pool, socket_cleanup)\n\n--- 422,428 ----\n      return APR_SUCCESS;\n  }\n\n! APR_POOL_IMPLEMENT_ACCESSOR(socket)\n\n  APR_IMPLEMENT_INHERIT_SET(socket, inherit, pool, socket_cleanup)", "is_private": false}, {"count": 1, "tags": [], "bug_id": 37840, "is_private": false, "text": "BIO.h is for OpenSSL and not apache, this incompatibility is seen with 0.9.8a\nOpenSSL.", "id": 83416, "time": "2005-12-08T14:32:33Z", "creator": "pao@darkheim.freeserve.co.uk", "creation_time": "2005-12-08T14:32:33Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 37840, "is_private": false, "id": 83430, "creation_time": "2005-12-08T18:17:13Z", "time": "2005-12-08T18:17:13Z", "creator": "jorton@redhat.com", "text": "Thanks for the report and patches.  Have you passed on the bio.h problem to the\nOpenSSL developers?\n\nThe apr_dbd.c thing was already fixed on the trunk, I've committed the sockets.c\nand httpd.h fixes too and proposed the latter for inclusion in the next 2.2.x\nrelease.\n\nhttp://svn.apache.org/viewcvs?rev=355141&view=rev\nhttp://svn.apache.org/viewcvs?rev=355143&view=rev\n", "attachment_id": null}, {"count": 3, "tags": [], "creator": "pao@darkheim.freeserve.co.uk", "is_private": false, "text": "Yes I emailed in a bug to the openssl guys.\n\nopenssl.org #1252", "id": 83465, "time": "2005-12-09T00:43:20Z", "bug_id": 37840, "creation_time": "2005-12-09T00:43:20Z", "attachment_id": null}]