[{"count": 0, "tags": [], "bug_id": 16533, "is_private": false, "text": "Apologies if this has already been reported / fixed.\n\n[Wed Jan 29 15:11:09 2003] [notice] child pid 44946 exit signal Segmentation\nfault (11)\n[Wed Jan 29 15:11:12 2003] [notice] child pid 52174 exit signal Segmentation\nfault (11)\n\n(dbx) where\napr_pool_cleanup_kill(p = 0x3c68746d6c3e0a3c, data = 0x00000001102e5880,\ncleanup_fn = 0x09001000a02074c8), line 1926 in \"apr_pools.c\"\nmmap_bucket_destroy(data = 0x00000001102e5880), line 99 in \"apr_buckets_mmap.c\"\nmmap_bucket_setaside(b = 0x00000001102dea18, p = 0x00000001102ea8b8), line 167\nin \"apr_buckets_mmap.c\"\nap_save_brigade(f = 0x00000001102dcfe8, saveto = 0x00000001102dd058, b =\n0x0ffffffffffff1d8, p = 0x00000001102ea8b8), line 560 in \"util_filter.c\"\nunnamed block $b319, line 3932 in \"core.c\"\ncore_output_filter(f = 0x00000001102dcfe8, b = 0x00000001102ea920), line 3932 in\n\"core.c\"\nunnamed block $b263, line 540 in \"util_filter.c\"\nap_pass_brigade(next = 0x00000001102dcfe8, bb = 0x00000001102e54b8), line 540 in\n\"util_filter.c\"\nap_http_header_filter(f = 0x00000001102e1bc8, b = 0x00000001102e54b8), line 1716\nin \"http_protocol.c\"\nunnamed block $b263, line 540 in \"util_filter.c\"\nap_pass_brigade(next = 0x00000001102e1bc8, bb = 0x00000001102e54b8), line 540 in\n\"util_filter.c\"\nap_content_length_filter(0x1, 0x78280), line 1299 in \"protocol.c\"\nunnamed block $b263, line 540 in \"util_filter.c\"\nap_pass_brigade(next = 0x00000001102e1ba0, bb = 0x00000001102e54b8), line 540 in\n\"util_filter.c\"\nunnamed block $b125, line 2881 in \"http_protocol.c\"\nap_byterange_filter(f = 0x00000001102e1b78, bb = 0x00000001102e54b8), line 2881\nin \"http_protocol.c\"\nunnamed block $b263, line 540 in \"util_filter.c\"\nap_pass_brigade(next = 0x00000001102e1b78, bb = 0x00000001102e54b8), line 540 in\n\"util_filter.c\"\ndefault_handler(r = 0x00000001102e0880), line 3384 in \"core.c\"\nap_run_handler(0x0), line 194 in \"config.c\"\nap_invoke_handler(0x0), line 401 in \"config.c\"\nap_process_request(0x0), line 288 in \"http_request.c\"\nap_process_http_connection(0x1), line 293 in \"http_core.c\"\nap_run_process_connection(0x1), line 85 in \"connection.c\"\nap_process_connection(0x0, 0x0), line 207 in \"connection.c\"\nchild_main(child_num_arg = 2), line 696 in \"prefork.c\"\nmake_child(s = 0x000000011022a168, slot = 2), line 790 in \"prefork.c\"\nperform_idle_server_maintenance(p = 0x00000001102263b8), line 925 in \"prefork.c\"\nap_mpm_run(_pconf = 0x00000001102263b8, plog = 0x0000000110252678, s =\n0x000000011022a168), line 1120 in \"prefork.c\"\nmain(argc = 3, argv = 0x00000000200fe8d0), line 651 in \"main.c\"\n(dbx)\n\nInteresting argument p = 0x3c68746d6c3e0a3c = \"<html>\\n<\" :-)\n\nI managed to fix the coredumps by patching like so, but it does seem a little\ntoo simple to be correct.\n\n*** apr_buckets_mmap.c  Wed Jan 29 17:59:09 2003\n--- apr_buckets_mmap.c.orig     Wed Jan 29 17:58:50 2003\n***************\n*** 164,170 ****\n      }\n\n      /* decrement refcount on old apr_bucket_mmap */\n!     mmap_bucket_destroy(m);\n\n      /* create new apr_bucket_mmap pointing to new apr_mmap_t */\n      apr_bucket_mmap_make(b, new_mm, b->start, b->length);\n--- 164,170 ----\n      }\n\n      /* decrement refcount on old apr_bucket_mmap */\n!     mmap_bucket_destroy(mm);\n\n      /* create new apr_bucket_mmap pointing to new apr_mmap_t */\n      apr_bucket_mmap_make(b, new_mm, b->start, b->length);", "id": 30244, "time": "2003-01-29T09:49:20Z", "creator": "geviston@bigpond.net.au", "creation_time": "2003-01-29T09:49:20Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "jwoolley@apache.org", "attachment_id": null, "id": 30283, "time": "2003-01-29T18:09:08Z", "bug_id": 16533, "creation_time": "2003-01-29T18:09:08Z", "is_private": false, "text": "Ouch!!!!  Yes that's a very big bug.  void* killed me on that one.  :-/  Thanks for the great catch \nand for the patch!  It's now committed to 2.1.0-dev and will be suggested for inclusion in \n2.0.45. \n \n--Cliff "}]