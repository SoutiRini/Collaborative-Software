[{"count": 0, "tags": [], "bug_id": 43472, "is_private": false, "text": "I am using a front Apache compiled with worker MPM acting as a reverse proxy \nto access back-end http servers\n\nWhile upgrading to 2.2.6 (from 2.2.4), back-end HTTP connections are no longer \nkept alive. While investigating, i found that connections were kept in the \npool but were closed when later being reused.\n\nFound the fix for patch \n(http://svn.apache.org/viewvc/httpd/httpd/branches/2.2.x/modules/proxy/proxy_ut\nil.c?r1=488822&r2=536291&diff_format=h) introduced the wrong behaviour: new \nversion of is_socket_connected fails and connection is believed to be no \nlonger usable.\n\nWhen defining USE_ALTERNATE_IS_CONNECTED to 0 (to revert to old mechanism), \neverything is back to normal.\n\nI have using Solaris 2.9 (which defines MSG_PEEK).", "id": 108576, "time": "2007-09-25T09:22:41Z", "creator": "christian_boitel@yahoo.fr", "creation_time": "2007-09-25T09:22:41Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 43472, "attachment_id": 20877, "id": 108582, "time": "2007-09-25T11:23:11Z", "creator": "rpluem@apache.org", "creation_time": "2007-09-25T11:23:11Z", "is_private": false, "text": "Created attachment 20877\nPatch proposal against trunk\n\nCan you please check if the attached patch fixes your problem after you set\nUSE_ALTERNATE_IS_CONNECTED back to 1? Thanks."}, {"text": "(In reply to comment #1)\n\nApplied patch and perform testes: it fixes problem.\n\nI believe patch should also be backported to 2.2.x branch.", "tags": [], "bug_id": 43472, "is_private": false, "count": 2, "id": 108610, "time": "2007-09-25T23:50:02Z", "creator": "christian_boitel@yahoo.fr", "creation_time": "2007-09-25T23:50:02Z", "attachment_id": null}, {"text": "Fixed in trunk - r580466", "tags": [], "bug_id": 43472, "is_private": false, "count": 3, "id": 108775, "time": "2007-09-28T12:31:06Z", "creator": "nick@webthing.com", "creation_time": "2007-09-28T12:31:06Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 43472, "text": "Proposed for backport to  2.2.x as r580625\n(http://svn.apache.org/viewcvs.cgi?rev=580466&view=rev).", "id": 108814, "time": "2007-09-29T12:04:35Z", "creator": "rpluem@apache.org", "creation_time": "2007-09-29T12:04:35Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 43472, "text": "Fix backported in r582620", "id": 109070, "time": "2007-10-07T05:36:49Z", "creator": "nick@webthing.com", "creation_time": "2007-10-07T05:36:49Z", "is_private": false, "attachment_id": null}]