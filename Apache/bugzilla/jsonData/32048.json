[{"count": 0, "tags": [], "creator": "sadiklis@mail.lt", "attachment_id": null, "is_private": false, "id": 66381, "time": "2004-11-03T21:49:22Z", "bug_id": 32048, "creation_time": "2004-11-03T21:49:22Z", "text": "Tomcat manager fails to undeploy Struts web app (e.g. struts-examples.war from\n1.2.4 Struts distro). I've tried tar.gz and exe packages of Tomcat.\n\nHere is how to reproduce it:\n\n1. Make sure you've noticed that we talk about Tomcat 5.5.4, Struts 1.2.4 and\nWindows 2000 SP4.\n\n2. Tweak Tomcat/conf/context.xml by adding either or both attributes\n(antiJARLocking antiResourceLocking) to the <context> tag (set them to \"true\").\n\n3. Launch Tomcat.\n\n4. Use this (or something similar):\n\n<project>\n<property name=\"contextPath\" value=\"/examples\"/>\n<property name=\"appWAR\" value=\"struts-examples.war\"/>\n\n<property environment=\"env\"/>\n<property name=\"strutsApps\" value=\"${env.STRUTS_HOME}/webapps\"/>\n\n<taskdef name=\"deploy\" classname=\"org.apache.catalina.ant.DeployTask\"/>\n<taskdef name=\"undeploy\" classname=\"org.apache.catalina.ant.UndeployTask\"/>\n\n<property file=\"${env.TOMCAT_PROPERTIES}\"/>\n\n<target name=\"deploy\" description=\"(Re)deploy application to Tomcat\">\n    <deploy url=\"${managerURL}\" username=\"${username}\" password=\"${password}\"\n                war=\"${strutsApps}/${appWAR}\"\n                path=\"${contextPath}\" update=\"true\"/>\n</target>\n\n<target name=\"undeploy\" description=\"Remove application from Tomcat\">\n    <undeploy url=\"${managerURL}\" username=\"${username}\"\n                password=\"${password}\" path=\"${contextPath}\"/>\n</target>\n\n</project>\n\n5. Deploy the war, invoking the \"deploy\" target. Enjoy OK message.\n\n6. Navigate to the url: http://localhost[:port]/examples. Enjoy how it forwards\nto welcome.do.\n\n7. Undeploy the app using \"undeploy\" target. Enjoy OK message.\n\n8. Notice that struts.jar is still stuck in the\nTomcat\\webapps\\examples\\WEB-INF\\lib directory and refuses to be deleted by hand.\nFigure that the OK message in step 7 was a lie and get mad.\n\n9. Shutdown tomcat and erase directory Tomcat\\webapps\\examples (and\nTomcat\\work\\Catalina\\localhost\\examples BTW).\n\n10. Try not to close this bugreport prematurely (it's boring to resubmit them,\nyou know)."}, {"count": 1, "tags": [], "text": "I suppose my answer to your previous \"issue\" was far too nice. I should have\nreferred you to tomcat-user instead.\nPlease do not reopen this bug report.", "attachment_id": null, "bug_id": 32048, "id": 66382, "time": "2004-11-03T21:52:59Z", "creator": "remm@apache.org", "creation_time": "2004-11-03T21:52:59Z", "is_private": false}, {"count": 2, "tags": [], "text": "Your suggestion (for bug 32017) was useless because it did not work.\n\nEven if it did work the situation would still qualify as a bug because:\n\n1. I've submited this as a Windows-specific issue. Therefore tales about Unix\nperformance tweaks do not apply.\n2. I've been using Windows .exe Tomcat installer. It should configure stuff so\nthat it actually works.\n3. Undeploy task reports success where it fails. Not exactly correct behavior.\n\nAnyway, i'm not gonna waste my time testing alpha Tomcat anymore. Let the crap\nhit the release.\n", "is_private": false, "id": 66387, "creator": "sadiklis@mail.lt", "time": "2004-11-03T22:11:25Z", "bug_id": 32048, "creation_time": "2004-11-03T22:11:25Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 32048, "attachment_id": null, "is_private": false, "id": 70827, "time": "2005-02-11T11:24:51Z", "creator": "sadiklis@mail.lt", "creation_time": "2005-02-11T11:24:51Z", "text": "The problem is absent in 5.5.7 stable.\n\nI've added antiJARLocking=\"true\" to <Context> in tomcat\\conf\\context.xml and it\nworks as advertised."}, {"count": 4, "tags": [], "text": "I would also like to report, in case anyone else stumbles across this bug, that\nI hit the same problem but in tomcat 5.5.17.  The environment in my case is\nWindows XP, struts 1.3.5, Tomcat 5.5.17, and the library that is locked is\nstruts-core-1.3.5.jar\n\nso if this bug disappeared in version 5.5.7 then it came back.  and it's not\njust me  http://comments.gmane.org/gmane.comp.jakarta.tomcat.user/133414\n\nBy the way, i tried the antiJARLocking attribute and it didnt work but\nantiResourceLocking did (again for information purposes).  I would also agree\nthat the manager application shouldnt report that the application undeployed OK,\nbecause it clearly didnt.", "attachment_id": null, "bug_id": 32048, "id": 98220, "time": "2007-01-18T07:40:18Z", "creator": "r.l.wilson@qmul.ac.uk", "creation_time": "2007-01-18T07:40:18Z", "is_private": false}]