[{"count": 0, "tags": [], "text": "Hi, i'm reporting here cause when trying a \"gmake install\" in PHP source tree i\nget this:\n\nInstalling PHP SAPI module:       apache2handler\n/patch/php/apache/build/instdso.sh SH_LIBTOOL='/patch/php/apache/build/libtool'\nlibphp5.la /patch/php/apache/modules\nrm -f /patch/php/apache/modules/libphp5.so\n/patch/php/apache/build/libtool --mode=install cp libphp5.la\n/patch/php/apache/modules/\ncp .libs/libphp5.a /patch/php/apache/modules/libphp5.a\ncp .libs/libphp5.lai /patch/php/apache/modules/libphp5.la\nlibtool: install: warning: remember to run `libtool --finish\n/patch/php/php-5.2.3/libs'\nchmod 755 /patch/php/apache/modules/libphp5.so\nchmod: /patch/php/apache/modules/libphp5.so: A file or directory in the path\nname does not exist.\napxs:Error: Command failed with rc=65536\n.\ngmake: *** [install-sapi] Error 1\n\n\nAnd after commenting those lines in apache/build/instdso.sh, all work fine :\n\nif test \"$SYS\" = \"AIX\"\nthen\n   # on AIX, shared libraries remain in storage even when\n   # all processes using them have exited; standard practice\n   # prior to installing a shared library is to rm -f first\n    CMD=\"rm -f $TARGETDIR/$TARGET_NAME\"\n    echo $CMD\n    $CMD || exit $?\nfi\n\nIf you need some number versions of the tools i use, please let me know.\nThanks", "is_private": false, "id": 106166, "creator": "jeremy.jacque@maximo.fr", "time": "2007-08-02T00:01:34Z", "bug_id": 43012, "creation_time": "2007-08-02T00:01:34Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Not an Apache bug", "is_private": false, "id": 106293, "creator": "jim@apache.org", "time": "2007-08-03T08:14:21Z", "bug_id": 43012, "creation_time": "2007-08-03T08:14:21Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 43012, "attachment_id": null, "id": 106300, "time": "2007-08-03T09:00:22Z", "creator": "nick@webthing.com", "creation_time": "2007-08-03T09:00:22Z", "is_private": false, "text": "Jim, the reference to PHP is a red herring.  He's pointing to /instdso.sh, which\n*is* an apache matter.\n\nNeeds someone who knows AIX to look."}, {"count": 3, "tags": [], "bug_id": 43012, "text": "Glad you noticed the red herring (php) as I was complaining about being called\nbogus on this!\n\nThe starting situation on my system is:\n\nmichael@x054:[/home/michael/prj/php-5.2.4]ls -l *la\n-rw-r--r--   1 root     system         1208 Oct 25 13:49 libphp5.la\n------------------------------------------------------------------------\nmichael@x054:[/home/michael/prj/php-5.2.4]cat libphp5.la\n# libphp5.la - a libtool library file\n# Generated by ltmain.sh - GNU libtool 1.5.20 (1.1220.2.287 2005/08/31 18:54:15)\n#\n# Please DO NOT delete this file!\n# It is necessary for linking the library.\n\n# The name that we can dlopen(3).\ndlname='libphp5.so'\n\n# Names of this library.\nlibrary_names='libphp5.a libphp5.a'\n\n# The name of the static archive.\nold_library=''\n\n# Libraries that this one depends upon.\ndependency_libs=' -lz -lssl -lcrypto -lz -lssl -lcrypto -lm -liconv -lm -liconv\n-lm -liconv -lm -liconv -lm -liconv -lm -liconv -lm -L/usr/local/lib\n-L/usr/local/ssl/lib -L/usr/local/mysql/lib -lrt -lmysqlclient\n/usr/local/lib/libfreetype.la -lz /usr/local/lib/libpng.la -lz -lm -lz -ljpeg\n-lssl -lcrypto -lz -lssl -lcrypto -lm -liconv -lm -liconv -lm -liconv -lm\n-liconv -lm -liconv -lm /usr/local/lib/libxml2.la -lpthread -liconv -lm -liconv -lm'\n\n# Version information for libphp5.\ncurrent=0\nage=0\nrevision=0\n\n# Is this an already installed library?\ninstalled=no\n\n# Should we warn about portability when linking against -modules?\nshouldnotlink=yes\n\n# Files to dlopen/dlpreopen\ndlopen=''\ndlpreopen=''\n\n# Directory that this library needs to be installed in:\nlibdir='/home/michael/prj/php-5.2.4/libs'\n\n--------------------\n\nmichael@x054:[/home/michael/prj/php-5.2.4]ls -l .libs libs\n.libs:\ntotal 81744\n-rw-r--r--   1 root     system     21062992 Oct 25 13:49 libphp5.a\n-rw-r--r--   1 root     system       105041 Oct 25 13:49 libphp5.exp\nlrwxrwxrwx   1 root     system           13 Oct 25 13:49 libphp5.la -> ../libphp5.la\n-rw-r--r--   1 root     system         1209 Oct 25 13:49 libphp5.lai\n-rwxr-xr-x   1 root     system     20671264 Oct 25 13:49 libphp5.so\n\nlibs:\ntotal 41152\n-rw-r--r--   1 root     system     21062992 Oct 25 13:49 libphp5.a\n-rw-r--r--   1 root     system         1209 Oct 25 13:49 libphp5.la\n\nregards,\nMichael\n\n\n", "id": 109730, "time": "2007-10-25T05:44:45Z", "creator": "mamfelt@acm.org", "creation_time": "2007-10-25T05:44:45Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 43012, "text": "The real command being called by the PHP Makefile is:\n\nINSTALL_IT = $(mkinstalldirs) '$(INSTALL_ROOT)/usr/local/apache2/modules' && $(m\nkinstalldirs) '$(INSTALL_ROOT)/usr/local/apache2/conf' && /usr/local/apache2/bin\n/apxs -S LIBEXECDIR='$(INSTALL_ROOT)/usr/local/apache2/modules' -S SYSCONFDIR='$\n(INSTALL_ROOT)/usr/local/apache2/conf' -i -a -n php5 libphp5.la\n\n## concluding lines of install-sapi:\n\n        @echo \"Installing PHP SAPI module:       $(PHP_SAPI)\"\n        @$(INSTALL_IT)\n\napxs is calling instdso.sh\n\nFor debug information I added:\nCMD=\"$SH_LIBTOOL --mode=install cp $DSOARCHIVE $TARGETDIR/\"\necho Starting: $CMD\nksh -x $CMD || exit $?\necho Finished: $CMD\n\nThe make install-sapi output now ends with:\n\n+ print -r libtool: install: warning: remember to run `libtool --finish\n/home/michael/prj/php-5.2.4/libs'\n+ 1>& 2\nlibtool: install: warning: remember to run `libtool --finish\n/home/michael/prj/php-5.2.4/libs'\n+ test -n\n+ exit 0\nFinished: /usr/local/apache2/build/libtool --mode=install cp libphp5.la\n/usr/local/apache2/modules/\nchmod 755 /usr/local/apache2/modules/libphp5.so\nchmod: /usr/local/apache2/modules/libphp5.so: A file or directory in the path\nname does not exist.\napxs:Error: Command failed with rc=65536\n.\nmake: 1254-004 The error code from the last command is 1.\n\n\nStop.", "id": 109777, "time": "2007-10-26T04:32:25Z", "creator": "mamfelt@acm.org", "creation_time": "2007-10-26T04:32:25Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 43012, "attachment_id": null, "text": "Thus, looking in apxs I find this piece of code I dont really want to mess with:\n\n        #  use .so unambigiously for installed shared library modules\n        $t =~ s|\\.[^./\\\\]+$|\\.so|;\n        if ($opt_i) {\n            push(@cmds, \"$installbuilddir/instdso.sh SH_LIBTOOL='\" .\n                 \"$libtool' $f $CFG_LIBEXECDIR\");\n            push(@cmds, \"chmod 755 $CFG_LIBEXECDIR/$t\");\n        }\n\nWhat I see isthat $t is being set to a .so file always, and on AIX, it isn't\nthere, and chmod fails.\n\nHope this helps get this resolved!", "id": 109778, "time": "2007-10-26T04:45:27Z", "creator": "mamfelt@acm.org", "creation_time": "2007-10-26T04:45:27Z", "is_private": false}, {"attachment_id": 21596, "tags": [], "creator": "cdukes@us.ibm.com", "text": "Created attachment 21596\nPatch to instdso.sh to handle extracting .so files from libtool libraries on AIX and other platforms where libtool installs a .a", "count": 6, "id": 114066, "time": "2008-02-27T09:50:55Z", "bug_id": 43012, "creation_time": "2008-02-27T09:50:55Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 43012, "text": "(In reply to comment #6)\nThe long term solution is to approach the libtool developers on providing an option for libtool to provide the .so instead of the .a on platforms such as AIX.\n", "id": 114067, "time": "2008-02-27T09:52:53Z", "creator": "cdukes@us.ibm.com", "creation_time": "2008-02-27T09:52:53Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 43012, "text": "Hi,\n\nI met the similar problem when I configure mod_jk.so.Detail is :\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=45346\n\nI use the instdso.sh patch but I'm still failed.When I make the jk,geting the following errors:\n\n(cd /home/viador/apache2.0.59/tomcat-connectors-1.2.23-src/native/apache-2.0 &&\nar x mod_jk.a mod_jk.so)\nar: 0707-109 Member name mod_jk.so does not exist.\nmake: 1254-004 The error code from the last command is 1.\n\nRegards,\nAaron", "id": 118311, "time": "2008-07-05T22:39:35Z", "creator": "mingzhao.chen@hingesoftware.com", "creation_time": "2008-07-05T22:39:35Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 43012, "attachment_id": null, "text": "(In reply to comment #7)\n> (In reply to comment #6)\n> The long term solution is to approach the libtool developers on providing an\n> option for libtool to provide the .so instead of the .a on platforms such as\n> AIX.\n\nHow do you change the libtool version in a build. I suspect I have a new problem concerning libtool. The configure and make process works fine when using AIX 5.3, but on AIX 6.1 I am not getting .so files in the modules directory (but am getting .slo - is this an expected result).\n\nI am hoping this problem with AIX 6.1 would be resolved with a newer version of libtool in the package. -- I'll test it for you!\n\nmichael@x054:[/data/prj/httpd-2.2.14]srclib/apr/libtool --version\nltmain.sh (GNU libtool) 1.5.26 (1.1220.2.492 2008/01/30 06:40:56)\n\nCopyright (C) 2008  Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.", "id": 130880, "time": "2009-10-04T13:43:20Z", "creator": "mamfelt@acm.org", "creation_time": "2009-10-04T13:43:20Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 43012, "attachment_id": null, "id": 130881, "time": "2009-10-04T14:09:23Z", "creator": "rpluem@apache.org", "creation_time": "2009-10-04T14:09:23Z", "is_private": false, "text": "Set your PATH such that your new libtool binary appears before the system one and then call buildconf in the root of the unpacked httpd.tar.gz. Keep in mind that you require Python on your box to do this."}, {"count": 11, "tags": [], "bug_id": 43012, "attachment_id": null, "text": "Still having the same issues - libraries are being deleted ALWAYS\nI added \nset -x to instdso.sh to follow what is happening\n\nAded some debug info as follows:\nif test \"$SYS\" = \"AIX\"\nthen\n    # on AIX, shared libraries remain in storage even when\n    # all processes using them have exited; standard practice\n    # prior to installing a shared library is to rm -f first\n    CMD=\"rm -f $TARGETDIR/$TARGET_NAME\"\n    echo $CMD\n    $CMD || exit $?\nfi\n\nCMD=\"$SH_LIBTOOL --mode=install cp $DSOARCHIVE $TARGETDIR/\"\necho $CMD\n$CMD || exit $?\necho \"DEBUG INFO Added\" ===========\nls -l  $DSOARCHIVE $TARGETDIR/\necho ==============\n\nif test \"$SYS\" = \"OS/2\"\nthen\n    # on OS/2, aplibtool --install doesn't copy the .la files & we can't\n    # rename DLLs to have a .so extension or they won't load so none of the\n    # steps below make sense.\n\nSo now it is easy to verify what \nCMD=\"$SH_LIBTOOL --mode=install cp $DSOARCHIVE $TARGETDIR/\"\necho $CMD\n$CMD || exit $?\nactually does.\n\nFarther down seems to be the logic error:\n\nif test \"$DLNAME\" != \"$TARGET_NAME\"\nthen\n    mv $TARGETDIR/$DLNAME $TARGETDIR/$TARGET_NAME\nfi\n\nrm -f $TARGETDIR/$DSOARCHIVE_BASENAME\nrm -f $TARGETDIR/$DSOBASE.a\nrm -f $TARGETDIR/lib$DSOBASE.a\nrm -f $TARGETDIR/lib$TARGET_NAME\n\nfrom the output below it seems $DLNAME and $TARGET_NAME are the same, so the move never occurs - and the file is not there to be chmoded\n\n==========================================\n\nroot@x104:[/data/prj/php/php-5.3.17]make INSTALL_ROOT=/var/tmp/root/php-5.3.17.0 install\nInstalling PHP SAPI module:       apache2handler\n/var/httpd/build/instdso.sh SH_LIBTOOL='/var/apr/build-1/libtool' libphp5.la /var/tmp/root/php-5.3.17.0/opt/httpd/libexec\n+ test 3 != 3\n+ + echo SH_LIBTOOL=/var/apr/build-1/libtool\n+ sed -e s/^SH_LIBTOOL=//\nSH_LIBTOOL=/var/apr/build-1/libtool\n+ DSOARCHIVE=libphp5.la\n+ + basename libphp5.la\nDSOARCHIVE_BASENAME=libphp5.la\n+ TARGETDIR=/var/tmp/root/php-5.3.17.0/opt/httpd/libexec\n+ + sed -e s/\\.la$//\n+ echo libphp5.la\nDSOBASE=libphp5\n+ TARGET_NAME=libphp5.so\n+ + uname -s\nSYS=AIX\n+ test AIX = AIX\n+ CMD=rm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.so\n+ echo rm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.so\nrm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.so\n+ rm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.so\n+ CMD=/var/apr/build-1/libtool --mode=install cp libphp5.la /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/\n+ echo /var/apr/build-1/libtool --mode=install cp libphp5.la /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/\n/var/apr/build-1/libtool --mode=install cp libphp5.la /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/\n+ /var/apr/build-1/libtool --mode=install cp libphp5.la /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/\nlibtool: install: cp .libs/libphp5.a /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.a\nlibtool: install: cp .libs/libphp5.lai /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.la\nlibtool: install: warning: remember to run `libtool --finish /data/prj/php/php-5.3.17/libs'\n+ echo DEBUG INFO Added ===========\nDEBUG INFO Added ===========\n+ ls -l libphp5.la /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/\n-rw-r--r-- 1 root system 1199 Sep 28 19:16 libphp5.la\n\n/var/tmp/root/php-5.3.17.0/opt/httpd/libexec/:\ntotal 28444\n-rw-r--r-- 1 root system 29114841 Sep 29 17:04 libphp5.a\n-rw-r--r-- 1 root system     1200 Sep 29 17:04 libphp5.la\n+ echo ==============\n==============\n+ test AIX = OS/2\n+ + sed -n /^dlname=/{s/.*='\\([^']*\\)'/\\1/;p;} /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.la\nDLNAME=libphp5.so\n+ + sed -n /^library_names/{s/library_names='\\([^']*\\)'/\\1/;p;} /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.la\nLIBRARY_NAMES=libphp5.a libphp5.a\n+ + echo libphp5.a libphp5.a\n+ sed -e s/ *libphp5.so//g\nLIBRARY_NAMES=libphp5.a libphp5.a\n+ test -z libphp5.so\n+ test -n libphp5.a libphp5.a\n+ rm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.a\n+ rm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.a\n+ test libphp5.so != libphp5.so ## FAILED TEST I am guessing \n# if test \"$DLNAME\" != \"$TARGET_NAME\"\n# then\n#    mv $TARGETDIR/$DLNAME $TARGETDIR/$TARGET_NAME\n#fi\n+ rm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.la\n+ rm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.a\n+ rm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/liblibphp5.a\n+ rm -f /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/liblibphp5.so\n+ exit 0\nchmod 755 /var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.so\nchmod: cannot access `/var/tmp/root/php-5.3.17.0/opt/httpd/libexec/libphp5.so': A file or directory in the path name does not exist.\napxs:Error: Command failed with rc=65536\n.\nmake: *** [install-sapi] Error 1\nroot@x104:[/data/prj/php/php-5.3.17]", "id": 162462, "time": "2012-09-29T15:21:56Z", "creator": "mamfelt@gmail.com", "creation_time": "2012-09-29T15:21:56Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 43012, "attachment_id": null, "id": 162463, "time": "2012-09-29T15:31:57Z", "creator": "mamfelt@gmail.com", "creation_time": "2012-09-29T15:31:57Z", "is_private": false, "text": "Just a hack - but it gets it done.\n\nif test -z \"$DLNAME\"\nthen\n  echo \"Warning!  dlname not found in $TARGETDIR/$DSOARCHIVE_BASENAME.\"\n  echo \"Assuming installing a .so rather than a libtool archive.\"\n  exit 0\nfi\n## PATHC ## HACK\n[[ -e  $TARGETDIR/$DSOBASE.a && ! -e  $TARGETDIR/$TARGET_NAME ]] && \\\n        mv  $TARGETDIR/$DSOBASE.a $TARGETDIR/$TARGET_NAME      \n## END\nif test -n \"$LIBRARY_NAMES\"\nthen\n    for f in $LIBRARY_NAMES\n    do\n        rm -f $TARGETDIR/$f\n    done\nfi"}, {"count": 13, "tags": [], "bug_id": 43012, "text": "This is something taht has been here for years - would be good to get it settled.\n\nperhaps having the environment before/after would help!\n\nroot@x104:[/tmp/httpd/build]diff -u *.st*\n--- instdso.9502830.start       2012-10-05 14:43:35 +0200\n+++ instdso.9502830.stop        2012-10-05 14:43:37 +0200\n@@ -1,7 +1,12 @@\n AUTHSTATE=compat\n CLCMD_PASSTHRU=1\n+CMD='/var/apr/build-1/libtool --mode=install cp libphp5.la /var/tmp/root/php-RC1.0.0.0/opt/httpd/libexec/'\n+DLNAME=libphp5.so\n+DSOARCHIVE=libphp5.la\n+DSOARCHIVE_BASENAME=libphp5.la\n+DSOBASE=libphp5\n EDITOR=/usr/bin/vi\n-ERRNO=25\n+ERRNO=2\n FCEDIT=/usr/bin/ed\n HOME=/\n IFS='  \n@@ -9,7 +14,8 @@\n INSTALL_ROOT=/var/tmp/root/php-RC1.0.0.0\n LANG=en_US\n LC__FASTMSG=true\n-LINENO=29\n+LIBRARY_NAMES='libphp5.a libphp5.a'\n+LINENO=104\n LOCPATH=/usr/lib/nls/loc\n LOGIN=root\n LOGNAME=root\n@@ -29,14 +35,19 @@\n PS3='#? '\n PS4='+ '\n PWD=/data/prj/php/php-RC1-5.3.18\n-RANDOM=30138\n-SECONDS=0\n+RANDOM=11335\n+SECONDS=2\n SHELL=/usr/bin/ksh\n+SH_LIBTOOL=/var/apr/build-1/libtool\n SSH_CLIENT='192.168.129.45 54211 22'\n SSH_CONNECTION='192.168.129.45 54211 192.168.129.104 22'\n SSH_TTY=/dev/pts/0\n+SYS=AIX\n+TARGETDIR=/var/tmp/root/php-RC1.0.0.0/opt/httpd/libexec\n+TARGET_NAME=libphp5.so\n TERM=vt100\n TMOUT=0\n TZ=Europe/Amsterdam\n USER=root\n-_=/tmp/httpd/build\n+_=/var/tmp/root/php-RC1.0.0.0/opt/httpd/libexec/liblibphp5.so\n+f=libphp5.a\nroot@x104:[/tmp/httpd/build]\n\n===\nplease note: to get this to work at all I have added the HACK\n\nif test -z \"$DLNAME\"\nthen\n  echo \"Warning!  dlname not found in $TARGETDIR/$DSOARCHIVE_BASENAME.\"\n  echo \"Assuming installing a .so rather than a libtool archive.\"\n  exit 0\nfi\n\n# HACK to move .a archive to .so archive\n[[ -e  $TARGETDIR/$DSOBASE.a && ! -e  $TARGETDIR/$TARGET_NAME ]] && \\\n        mv  $TARGETDIR/$DSOBASE.a $TARGETDIR/$TARGET_NAME\n# end HACK\n\nif test -n \"$LIBRARY_NAMES\"\nthen\n    for f in $LIBRARY_NAMES\n    do\n        rm -f $TARGETDIR/$f\n    done\nfi", "id": 162585, "time": "2012-10-05T12:57:49Z", "creator": "mamfelt@gmail.com", "creation_time": "2012-10-05T12:57:49Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 43012, "attachment_id": null, "text": "This is problem that will not go away... And, I am thinking it is actually an apr bug, not httpd.\n\nAnd this seems to be related to make install in a DESTDIR.\n\nIn php-X.Y.Z/Makefile\n\nI am calling apxs, that calls instdso.sh, that calls ../apr/build-1/libtool\n\nI modified instdso.sh (restored the 'original' from httpd-2.2.x aka 2.2.24) with\nroot@x104:[/data/prj/httpd/httpd-2.2.x]diff -u build/instdso.sh /var/httpd/build/instdso.sh                                 \n--- build/instdso.sh    2012-08-31 12:41:37 +0200\n+++ /var/httpd/build/instdso.sh 2013-01-03 15:41:43 +0100\n@@ -49,9 +49,15 @@\n     $CMD || exit $?\n fi\n \n-CMD=\"$SH_LIBTOOL --mode=install cp $DSOARCHIVE $TARGETDIR/\"\n-echo $CMD\n+CMD=\"$SH_LIBTOOL --debug --mode=install cp $DSOARCHIVE $TARGETDIR/\"\n+echo ==============@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+++++++++++++++++++++++ >`tty`\n+echo CMD: $CMD >`tty`\n+echo ==============@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+++++++++++++++++++++++ >`tty`\n $CMD || exit $?\n+CMD=\"ls -l $DSOARCHIVE $TARGETDIR/\"\n+echo ============== R E S U L T @@@@@@@@@@@@@@@@+++++++++++++++++++++++ >`tty`\n+echo CMD: $CMD >`tty`\n+echo ============== R E S U L T @@@@@@@@@@@@@@@@+++++++++++++++++++++++ >`tty`\n \n if test \"$SYS\" = \"OS/2\"\n then\n\n\nMy result is:\n/var/httpd/build/instdso.sh SH_LIBTOOL='/var/apr/build-1/libtool' libphp5.la /var/tmp/root/php-5.3.20.0/opt/httpd/libexec\n==============@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+++++++++++++++++++++++\nCMD: /var/apr/build-1/libtool --debug --mode=install cp libphp5.la /var/tmp/root/php-5.3.20.0/opt/httpd/libexec/\n==============@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+++++++++++++++++++++++\n+ test 4 -gt 0\n+ opt=--mode=install\n+ shift\n+ func_split_long_opt --mode=install\n+ set dummy --mode install cp libphp5.la /var/tmp/root/php-5.3.20.0/opt/httpd/libexec/\n+ shift\n+ test 5 -gt 0\n+ opt=--mode\n+ shift\n+ test 4 = 0\n+ optarg=install\n+ opt_mode=install\n+ shift\n+ test 3 -gt 0\n+ opt=cp\n+ shift\n+ set dummy cp libphp5.la /var/tmp/root/php-5.3.20.0/opt/httpd/libexec/\n+ shift\n+ break\n+ test 3 -gt 0\n+ nonopt=cp\n+ shift\n+ test set -x = :\n+ preserve_args= --debug\n+ opt_duplicate_compiler_generated_deps=false\n+ false\n+ func_check_version_match\n+ test yes != yes\n+ eval std_shrext=\".so\"\n+ std_shrext=.so\n+ test -n \n+ generic_help=Try `libtool --help' for more information.\n+ help=Try `libtool --help --mode=install' for more information.\n+ : 1\n+ to_host_path_cmd=\n+ false\n+ test install = compile\n+ false\n+ test install = execute\n+ test install = finish\n+ test install = install\n+ func_mode_install libphp5.la /var/tmp/root/php-5.3.20.0/opt/httpd/libexec/\n+ test cp = /bin/sh\n+ test cp = /bin/sh\n+ false\n+ install_prog=\n+ arg=cp\n+ func_quote_for_eval cp\n+ install_prog=cp\n+ install_shared_prog=cp\n+ install_cp=:\n+ dest=\n+ files=\n+ opts=\n+ prev=\n+ install_type=\n+ isdir=no\n+ stripme=\n+ no_mode=:\n+ arg2=\n+ test -n \n+ test -n \n+ dest=libphp5.la\n+ continue\n+ arg2=\n+ test -n libphp5.la\n+ files= libphp5.la\n+ dest=/var/tmp/root/php-5.3.20.0/opt/httpd/libexec/\n+ continue\n+ test -z cp\n+ test -n \n+ test -n \n+ test -z  libphp5.la\n+ func_stripname  / /var/tmp/root/php-5.3.20.0/opt/httpd/libexec/\n+ dest=/var/tmp/root/php-5.3.20.0/opt/httpd/libexec\n+ test -d /var/tmp/root/php-5.3.20.0/opt/httpd/libexec\n+ isdir=yes\n+ test yes = yes\n+ destdir=/var/tmp/root/php-5.3.20.0/opt/httpd/libexec\n+ destname=\n+ libtool_install_magic=%%%MAGIC variable%%%\n+ staticlibs=\n+ future_libdirs=\n+ current_libdirs=\n+ func_resolve_sysroot libphp5.la\n+ file=libphp5.la\n+ func_lalib_unsafe_p libphp5.la\n+ library_names=\n+ old_library=\n+ relink_command=\n+ func_source libphp5.la\n+ . ./libphp5.la\n+ dlname=libphp5.so\n+ library_names=libphp5.a libphp5.a\n+ old_library=\n+ dependency_libs= -lrt -liconv -lz -lz -lcrypto -lcrypto -lrt -lm -liconv -lm -liconv -lm -liconv -lm -liconv -lm -liconv -lm -liconv -lm -L/opt/lib -lrt -liconv /opt/lib/libgmp.la /opt/lib/libintl.la -liconv -lc /opt/lib/libfreetype.la -lz -lX11 -lXpm /opt/lib/libpng.la -lz -lm -lz -ljpeg -lz -lcrypto -lssl -lcrypto -lrt -lm -liconv -lm -liconv -lm -liconv -lm -liconv -lm -liconv -lm /opt/lib/libxml2.la -lpthread -liconv -lm -liconv -lm\n+ current=0\n+ age=0\n+ revision=0\n+ installed=no\n+ shouldnotlink=yes\n+ dlopen=\n+ dlpreopen=\n+ libdir=/data/prj/php/php-5.3.20/libs\n+ test X/var/tmp/root/php-5.3.20.0/opt/httpd/libexec = X/data/prj/php/php-5.3.20/libs\n+ future_libdirs= /data/prj/php/php-5.3.20/libs\n+ func_dirname libphp5.la / \n+ dir=\n+ dir=.libs\n+ test -n \n+ set dummy libphp5.a libphp5.a\n+ shift\n+ test -n libphp5.a\n+ realname=libphp5.a\n+ shift\n+ srcname=libphp5.a\n+ test -n \n+ func_show_eval cp .libs/libphp5.a /var/tmp/root/php-5.3.20.0/opt/httpd/libexec/libphp5.a exit $?\n+ tstripme=\n+ test -n \n+ test 1 -gt 0\n+ test libphp5.a != libphp5.a\n+ lib=/var/tmp/root/php-5.3.20.0/opt/httpd/libexec/libphp5.a\n+ func_execute_cmds  exit $?\n+ save_ifs=     \n\n+ IFS=~\n+ IFS=  \n\n+ func_basename libphp5.la\n+ name=libphp5.la\n+ instname=.libs/libphp5.lai\n+ func_show_eval cp .libs/libphp5.lai /var/tmp/root/php-5.3.20.0/opt/httpd/libexec/libphp5.la exit $?\n+ test -n \n+ test -n  /data/prj/php/php-5.3.20/libs\n+ func_warning remember to run `libtool --finish /data/prj/php/php-5.3.20/libs'\nlibtool: install: warning: remember to run `libtool --finish /data/prj/php/php-5.3.20/libs'\n+ test -n \n+ exit 0\n============== R E S U L T @@@@@@@@@@@@@@@@+++++++++++++++++++++++\nCMD: ls -l libphp5.la /var/tmp/root/php-5.3.20.0/opt/httpd/libexec/\n============== R E S U L T @@@@@@@@@@@@@@@@+++++++++++++++++++++++\nchmod 755 /var/tmp/root/php-5.3.20.0/opt/httpd/libexec/libphp5.so\nchmod: cannot access `/var/tmp/root/php-5.3.20.0/opt/httpd/libexec/libphp5.so': A file or directory in the path name does not exist.\napxs:Error: Command failed with rc=65536\n.\nmake: *** [install-sapi] Error 1\nmake install returned an error\n===========\nNot sure what the command above should be doing, but the contents of .libs is:\n\nroot@x104:[/data/prj/php/php-5.3.20]ls -l .libs\ntotal 56732\n-rw-r--r-- 1 root system 29144491 Jan  3  2013 libphp5.a\n-rw-r--r-- 1 root system   127810 Jan  3  2013 libphp5.exp\nlrwxrwxrwx 1 root system       13 Jan  3  2013 libphp5.la -> ../libphp5.la\n-rw-r--r-- 1 root system     1200 Jan  3  2013 libphp5.lai\n-rwxr-xr-x 1 root system 28785709 Jan  3  2013 libphp5.so\nroot@x104:[/data/prj/php/php-5.3.20]ar tv .libs/libphp5.a\nrwxr-xr-x     0/0     28785709 Jan 03 15:53 2013 libphp5.so\n\n\nSuggestions! e.g., a new bug in APR? or is it ultimately \"libtool\" that is failing?", "id": 164355, "time": "2013-01-03T14:56:20Z", "creator": "mamfelt@gmail.com", "creation_time": "2013-01-03T14:56:20Z", "is_private": false}, {"count": 15, "tags": [], "bug_id": 43012, "text": "btw: applying the patch from 2008 does \"fix it\", in as much as the make install continues - but I think the real issue lies in either apr or libtool.", "id": 164356, "time": "2013-01-03T15:03:57Z", "creator": "mamfelt@gmail.com", "creation_time": "2013-01-03T15:03:57Z", "is_private": false, "attachment_id": null}]