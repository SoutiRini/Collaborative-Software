[{"count": 0, "tags": [], "bug_id": 50690, "text": "Created attachment 26577\nchanged OCIAttrGet(OCI_ATTR_STMT_TYPE) output parameter from int to apr_int16_t.\n\nThe apr dbd oracle driver works fine under Linux/x86, Solaris/x86 and Windows x86. However under AIX/ppc and Solaris/sparc the check connection select fails. Oracle returns the error \"ORA-24374: define not done before fetch or execute and fetch\".\n\nThis bug is caused by an inproper use of OCIAttrGet(OCI_ATTR_STMT_TYPE). The out parameter for the statement type should be an 16-bit integer, but its currently just an int (normally 32-bit). Under x86 systems the correct type is returned and the following if() statement is executed:\n\nif (stmt->type == OCI_STMT_SELECT) {\n    ret = outputParams(sql, stmt);\n}\n\nBut under ppc or sparc (big-endian) the returned statement type is wrong and therefore outputParams() is not called which will result in the ORA-24374 when trying to fetch the result of the SELECT.\n\nThe attached patch uses an apr_int16_t variable to retrieve the statement type and it works find under AIX.", "id": 143808, "time": "2011-01-30T05:33:43Z", "creator": "sr@myarm.com", "creation_time": "2011-01-30T05:33:43Z", "is_private": false, "attachment_id": 26577}, {"count": 1, "tags": [], "bug_id": 50690, "attachment_id": null, "text": "Fixed in trunk in r1065258 .\nWill leave time for someone to scream if necessary before backporting!", "id": 143810, "time": "2011-01-30T07:53:19Z", "creator": "nick@webthing.com", "creation_time": "2011-01-30T07:53:19Z", "is_private": false}, {"count": 2, "tags": [], "text": "fixed in apr-util 1.3.x branch, soon to have a new release", "attachment_id": null, "id": 145641, "creator": "trawick@apache.org", "time": "2011-04-08T07:54:02Z", "bug_id": 50690, "creation_time": "2011-04-08T07:54:02Z", "is_private": false}]