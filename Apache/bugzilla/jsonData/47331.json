[{"attachment_id": null, "tags": [], "bug_id": 47331, "text": "JSP.2.2 requires a translation error when an #{...} EL expression is used in templated text.\n(See also the Section 1.2.4 of \"JavaServer Pages 2.1 Expression\nLanguage Specification\".)\n\nTomcat 6.0.18 *erronously* parse the expression.\nTomcat 6.0.20 *rightly* does not but it also does not issue any error like the JSP specs requires.\n\nAn example might clarify. Given the following JSP snip:\n--- [snip] ---\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<jsp:root version=\"2.1\"\n  xmlns:jsp=\"http://java.sun.com/JSP/Page\"\n  xmlns:c=\"http://java.sun.com/jsp/jstl/core\"\n  xmlns:f=\"http://java.sun.com/jsf/core\"\n  xmlns:h=\"http://java.sun.com/jsf/html\">\n\n  <jsp:directive.page contentType=\"text/html;charset=UTF-8\" pageEncoding=\"UTF-8\"/>\n  <jsp:output omit-xml-declaration=\"no\"\n    doctype-root-element=\"html\"\n    doctype-public=\"-//W3C//DTD XHTML 1.0 Transitional//EN\" doctype-system=\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"/>\n  <f:view>\n    <html xmlns=\"http://www.w3.org/1999/xhtml\">\n      <head>\n        <link rel=\"stylesheet\" href=\"#{facesContext.externalContext.requestContextPath}/resources/theme/current/css/screen.css\" type=\"text/css\" />\n        <link rel=\"shortcut icon\" href=\"#{facesContext.externalContext.requestContextPath}/resources/theme/current/img/favicon.ico\" type=\"image/x-icon\"/>\n      </head>\n      <body>\n        <!-- ... -->\n      </body>\n    </html>\n  </f:view>\n</jsp:root>\n--- [/snip] ---\n\nWith Tomcat 6.0.18 I get:\n--- [snip] ---\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n<!-- ... -->\n\n<link rel=\"stylesheet\"\nhref=\"/my-web-app/resources/theme/current/css/screen.css\"\ntype=\"text/css\" />\n<link rel=\"shortcut icon\"\nhref=\"/my-web-app/resources/theme/current/img/favicon.ico\"\ntype=\"image/x-icon\"/>\n\n</head>\n<!-- ... -->\n</html>.\n--- [/snip] ---\n\nInstead with Tomcat 6.0.20:\n--- [snip] ---\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n<!-- ... -->\n\n<link rel=\"stylesheet\"\nhref=\"#{facesContext.externalContext.requestContextPath}/resources/theme/current/css/screen.css\"\ntype=\"text/css\" />\n<link rel=\"shortcut icon\"\nhref=\"#{facesContext.externalContext.requestContextPath}/resources/theme/current/img/favicon.ico\"\ntype=\"image/x-icon\"/>\n\n</head>\n<!-- ... -->\n</html>.\n--- [/snip] ---\n\nBut neither an error nor a warning message appear in the log.\n\n\nFor a discussion about this see the following post on the tomcat-user ML:\n\nhttp://mail-archives.apache.org/mod_mbox/tomcat-users/200906.mbox/%3ca764c6280906070128j2bfdc49fvf6a0fb31d3165cc1@mail.gmail.com%3e\n\nand the subsequent replies.", "count": 0, "id": 127732, "time": "2009-06-08T02:22:52Z", "creator": "marco.guazzone@gmail.com", "creation_time": "2009-06-08T02:22:52Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "This has been fixed in trunk and proposed for 6.0.x", "id": 131542, "time": "2009-11-01T18:36:15Z", "bug_id": 47331, "creation_time": "2009-11-01T18:36:15Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "This has been fixed in 6.0.x and will be included in 6.0.21 onwards.", "id": 131643, "time": "2009-11-03T15:05:30Z", "bug_id": 47331, "creation_time": "2009-11-03T15:05:30Z", "attachment_id": null}]