[{"count": 0, "tags": [], "bug_id": 5291, "text": "I've been trying to set up an ant task to check my java source code for\nadherence to coding standards using the 'checkstyle' product\n(http://checkstyle.sourceforge.net).  \n\nEverytime that I run ant against my build file, I get a class not found error\nfor the class, 'org.apache.tools.ant.ProjectComponent'.  I'm running this on a\nRedHat Linux 7.1 PC with JDK1.3.1, but I get the same exact results on a Sun\nSolaris 2.6 with JDK1.2.2.\n\nI've grepped through the ant and the checkstyle .java files for\n'ProjectComponent' with no luck.  None of them seem to have it.\n\nany ideas?\n\nHere's the output when running ant -debug\n=========================================\nBuildfile: build.xml\nSetting project property: ant.java.version -> 1.3\nDetected Java Version: 1.3\nDetected OS: Linux\n +User task: tar     org.apache.tools.ant.taskdefs.Tar\n +User task: fail     org.apache.tools.ant.taskdefs.Exit\n +User task: uptodate     org.apache.tools.ant.taskdefs.UpToDate\n +User task: java     org.apache.tools.ant.taskdefs.Java\n +User task: execon     org.apache.tools.ant.taskdefs.ExecuteOn\n +User task: echo     org.apache.tools.ant.taskdefs.Echo\n +User task: native2ascii    \norg.apache.tools.ant.taskdefs.optional.Native2Ascii\n +User task: jjtree     org.apache.tools.ant.taskdefs.optional.javacc.JJTree\n +User task: compileTask     org.apache.tools.ant.taskdefs.CompileTask\n +User task: chmod     org.apache.tools.ant.taskdefs.Chmod\n +User task: javadoc2     org.apache.tools.ant.taskdefs.Javadoc\n +User task: deltree     org.apache.tools.ant.taskdefs.Deltree\n +User task: cvs     org.apache.tools.ant.taskdefs.Cvs\n +User task: jlink     org.apache.tools.ant.taskdefs.optional.jlink.JlinkTask\n +User task: tstamp     org.apache.tools.ant.taskdefs.Tstamp\n +User task: unjar     org.apache.tools.ant.taskdefs.Expand\n +User task: patch     org.apache.tools.ant.taskdefs.Patch\n +User task: sound     org.apache.tools.ant.taskdefs.optional.sound.SoundTask\n +User task: cccheckout    \norg.apache.tools.ant.taskdefs.optional.clearcase.CCCheckout\n +User task: mail     org.apache.tools.ant.taskdefs.SendEmail\n +User task: gzip     org.apache.tools.ant.taskdefs.GZip\n +User task: wlrun     org.apache.tools.ant.taskdefs.optional.ejb.WLRun\n +User task: copy     org.apache.tools.ant.taskdefs.Copy\n +User task: filter     org.apache.tools.ant.taskdefs.Filter\n +User task: jar     org.apache.tools.ant.taskdefs.Jar\n +User task: unzip     org.apache.tools.ant.taskdefs.Expand\n +User task: rename     org.apache.tools.ant.taskdefs.Rename\n +User task: propertyfile    \norg.apache.tools.ant.taskdefs.optional.PropertyFile\n +User task: copyfile     org.apache.tools.ant.taskdefs.Copyfile\n +User task: gunzip     org.apache.tools.ant.taskdefs.GUnzip\n +User task: antcall     org.apache.tools.ant.taskdefs.CallTarget\n +User task: taskdef     org.apache.tools.ant.taskdefs.Taskdef\n +User task: mkdir     org.apache.tools.ant.taskdefs.Mkdir\n +User task: sql     org.apache.tools.ant.taskdefs.SQLExec\n +User task: replace     org.apache.tools.ant.taskdefs.Replace\n +User task: ant     org.apache.tools.ant.taskdefs.Ant\n +User task: style     org.apache.tools.ant.taskdefs.XSLTProcess\n +User task: fixcrlf     org.apache.tools.ant.taskdefs.FixCRLF\n +User task: vssget     org.apache.tools.ant.taskdefs.optional.vss.MSVSSGET\n +User task: genkey     org.apache.tools.ant.taskdefs.GenerateKey\n +User task: zip     org.apache.tools.ant.taskdefs.Zip\n +User task: antstructure     org.apache.tools.ant.taskdefs.AntStructure\n +User task: javah     org.apache.tools.ant.taskdefs.optional.Javah\n +User task: javac     org.apache.tools.ant.taskdefs.Javac\n +User task: test     org.apache.tools.ant.taskdefs.optional.Test\n +User task: cab     org.apache.tools.ant.taskdefs.optional.Cab\n +User task: mparse     org.apache.tools.ant.taskdefs.optional.metamata.MParse\n +User task: ccuncheckout    \norg.apache.tools.ant.taskdefs.optional.clearcase.CCUnCheckout\n +User task: ejbjar     org.apache.tools.ant.taskdefs.optional.ejb.EjbJar\n +User task: available     org.apache.tools.ant.taskdefs.Available\n +User task: vsslabel     org.apache.tools.ant.taskdefs.optional.vss.MSVSSLABEL\n +User task: wljspc     org.apache.tools.ant.taskdefs.optional.jsp.WLJspc\n +User task: move     org.apache.tools.ant.taskdefs.Move\n +User task: csc     org.apache.tools.ant.taskdefs.optional.dotnet.CSharp\n +User task: signjar     org.apache.tools.ant.taskdefs.SignJar\n +User task: javacc     org.apache.tools.ant.taskdefs.optional.javacc.JavaCC\n +User task: cccheckin    \norg.apache.tools.ant.taskdefs.optional.clearcase.CCCheckin\n +User task: property     org.apache.tools.ant.taskdefs.Property\n +User task: unwar     org.apache.tools.ant.taskdefs.Expand\n +User task: touch     org.apache.tools.ant.taskdefs.Touch\n +User task: ilasm     org.apache.tools.ant.taskdefs.optional.dotnet.Ilasm\n +User task: get     org.apache.tools.ant.taskdefs.Get\n +User task: javadoc     org.apache.tools.ant.taskdefs.Javadoc\n +User task: antlr     org.apache.tools.ant.taskdefs.optional.ANTLR\n +User task: untar     org.apache.tools.ant.taskdefs.Untar\n +User task: delete     org.apache.tools.ant.taskdefs.Delete\n +User task: ejbc     org.apache.tools.ant.taskdefs.optional.ejb.Ejbc\n +User task: copydir     org.apache.tools.ant.taskdefs.Copydir\n +User task: war     org.apache.tools.ant.taskdefs.War\n +User task: ccupdate    \norg.apache.tools.ant.taskdefs.optional.clearcase.CCUpdate\n +User task: depend     org.apache.tools.ant.taskdefs.optional.depend.Depend\n +User task: renameext    \norg.apache.tools.ant.taskdefs.optional.RenameExtensions\n +User task: exec     org.apache.tools.ant.taskdefs.ExecTask\n +User task: apply     org.apache.tools.ant.taskdefs.Transform\n +User task: wlstop     org.apache.tools.ant.taskdefs.optional.ejb.WLStop\n +User task: rmic     org.apache.tools.ant.taskdefs.Rmic\n +User datatype: fileset     org.apache.tools.ant.types.FileSet\n +User datatype: patternset     org.apache.tools.ant.types.PatternSet\n +User datatype: path     org.apache.tools.ant.types.Path\n +User datatype: mapper     org.apache.tools.ant.types.Mapper\nSetting project property: java.runtime.name -> Java(TM) 2 Runtime Environment,\nStandard Edition\nSetting project property: sun.boot.library.path ->\n/usr/local/software/java/jdk1.3.1_01/jre/lib/i386\nSetting project property: java.vm.version -> 1.3.1_01\nSetting project property: java.vm.vendor -> Sun Microsystems Inc.\nSetting project property: java.vendor.url -> http://java.sun.com/\nSetting project property: path.separator -> :\nSetting project property: java.vm.name -> Java HotSpot(TM) Client VM\nSetting project property: file.encoding.pkg -> sun.io\nSetting project property: java.vm.specification.name -> Java Virtual Machine\nSpecification\nSetting project property: user.dir -> /home/bn388572/temp/broken_ant\nSetting project property: java.runtime.version -> 1.3.1_01\nSetting project property: java.awt.graphicsenv -> sun.awt.X11GraphicsEnvironment\nSetting project property: os.arch -> i386\nSetting project property: java.io.tmpdir -> /tmp\nSetting project property: line.separator -> \n\nSetting project property: java.vm.specification.vendor -> Sun Microsystems Inc.\nSetting project property: java.awt.fonts -> \nSetting project property: os.name -> Linux\nSetting project property: ant.home -> /home/bn388572/sandbox/ant/bin/..\nSetting project property: java.library.path ->\n/usr/local/software/java/jdk1.3.1_01/jre/lib/i386:/usr/local/software/java/jdk1.3.1_01/jre/lib/i386/native_threads/:/usr/local/software/java/jdk1.3.1_01/jre/lib/i386/client:/usr/local/software/java/jdk1.3.1_01/jre/../lib/i386::/usr/local/lib:/usr/local/lib\nSetting project property: java.specification.name -> Java Platform API\nSpecification\nSetting project property: java.class.version -> 47.0\nSetting project property: os.version -> 2.4.2-2\nSetting project property: user.home -> /home/bn388572\nSetting project property: user.timezone -> \nSetting project property: java.awt.printerjob -> sun.awt.motif.PSPrinterJob\nSetting project property: file.encoding -> ISO-8859-1\nSetting project property: java.specification.version -> 1.3\nSetting project property: java.class.path ->\n:/home/bn388572/sandbox/webmacro/webmacro.jar:/home/bn388572/sandbox/ant/lib/ant.jar:/home/bn388572/sandbox/ant/lib/optional/optional.jar:/home/bn388572/sandbox/junit/junit.jar:/home/bn388572/sandbox/httpunit/lib/httpunit.jar:/home/bn388572/sandbox/httpunit/lib/Tidy.jar:/usr/local/software/java/j2sdkee1.3/lib/j2ee.jar:/opt/bea/wls6.1/lib/weblogic.jar:/home/bn388572/sandbox/grems/src/lib/log4j.jar:/home/bn388572/sandbox/gps/src:/home/bn388572/sandbox/grems/src:/home/bn388572/sandbox/webmacro/webmacro.jar:/home/bn388572/sandbox/ant/lib/ant.jar:/home/bn388572/sandbox/ant/lib/optional/optional.jar:/home/bn388572/sandbox/junit/junit.jar:/home/bn388572/sandbox/httpunit/lib/httpunit.jar:/home/bn388572/sandbox/httpunit/lib/Tidy.jar:/usr/local/software/java/j2sdkee1.3/lib/j2ee.jar:/opt/bea/wls6.1/lib/weblogic.jar:/home/bn388572/sandbox/grems/src/lib/log4j.jar:/home/bn388572/sandbox/gps/src:/home/bn388572/sandbox/grems/src::/home/bn388572/sandbox/ant/bin/../lib/ant.jar:/home/bn388572/sandbox/ant/bin/../lib/jaxp.jar:/home/bn388572/sandbox/ant/bin/../lib/parser.jar:/usr/local/software/java/jdk1.3.1_01//lib/tools.jar\nSetting project property: user.name -> bn388572\nSetting project property: java.vm.specification.version -> 1.0\nSetting project property: java.home -> /usr/local/software/java/jdk1.3.1_01/jre\nSetting project property: user.language -> en\nSetting project property: java.specification.vendor -> Sun Microsystems Inc.\nSetting project property: java.vm.info -> mixed mode\nSetting project property: java.version -> 1.3.1_01\nSetting project property: java.ext.dirs ->\n/usr/local/software/java/jdk1.3.1_01/jre/lib/ext\nSetting project property: sun.boot.class.path ->\n/usr/local/software/java/jdk1.3.1_01/jre/lib/rt.jar:/usr/local/software/java/jdk1.3.1_01/jre/lib/i18n.jar:/usr/local/software/java/jdk1.3.1_01/jre/lib/sunrsasign.jar:/usr/local/software/java/jdk1.3.1_01/jre/classes\nSetting project property: java.vendor -> Sun Microsystems Inc.\nSetting project property: file.separator -> /\nSetting project property: java.vendor.url.bug ->\nhttp://java.sun.com/cgi-bin/bugreport.cgi\nSetting project property: sun.io.unicode.encoding -> UnicodeLittle\nSetting project property: sun.cpu.endian -> little\nSetting project property: user.region -> US\nSetting project property: sun.cpu.isalist -> \nSetting ro project property: ant.file ->\n/home/bn388572/temp/broken_ant/build.xml\nparsing buildfile /home/bn388572/temp/broken_ant/build.xml with URI =\nfile:/home/bn388572/temp/broken_ant/build.xml\nSetting ro project property: ant.project.name -> testAnt\nSetting project property: basedir -> /home/bn388572/temp/broken_ant\nProject base dir set to: /home/bn388572/temp/broken_ant\n +Target: checkStyle\n   +Task: taskdef\nBuild sequence for target `checkStyle' is [checkStyle]\nComplete build sequence is [checkStyle]\n\ncheckStyle:\nFinding class com.puppycrawl.tools.checkstyle.CheckStyleTask\nClass org.apache.tools.ant.Task loaded from system loader\nClass com.puppycrawl.tools.checkstyle.CheckStyleTask loaded from ant loader\n +User task: checkstyle     com.puppycrawl.tools.checkstyle.CheckStyleTask\nFinding class org.apache.tools.ant.ProjectComponent\n\nBUILD FAILED\n\n/home/bn388572/temp/broken_ant/build.xml:15: Could not create task of type:\ncheckstyle due to java.lang.NoClassDefFoundError:\norg/apache/tools/ant/ProjectComponent\n--- Nested Exception ---\njava.lang.NoClassDefFoundError: org/apache/tools/ant/ProjectComponent\n        at java.lang.Class.newInstance0(Native Method)\n        at java.lang.Class.newInstance(Class.java:237)\n        at org.apache.tools.ant.Project.createTask(Project.java:439)\n        at\norg.apache.tools.ant.UnknownElement.maybeConfigure(UnknownElement.java:83)\n        at org.apache.tools.ant.Target.execute(Target.java:152)\n        at org.apache.tools.ant.Project.runTarget(Project.java:898)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:536)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:510)\n        at org.apache.tools.ant.Main.runBuild(Main.java:421)\n        at org.apache.tools.ant.Main.main(Main.java:149)\n\nTotal time: 1 second\n\n\nHere's the buildfile\n====================\n<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<project name=\"testAnt\" default=\"checkStyle\" basedir=\".\">\n    <target name=\"checkStyle\">\n        <!-- Java Style checker from http://checkstyle.sourceforge.net -->   \n        <taskdef name=\"checkstyle\"\n            classpath=\"./checkstyle-all-1.3.jar\"\n            classname=\"com.puppycrawl.tools.checkstyle.CheckStyleTask\" />\n        <checkstyle file=\"./Security.java\"/>\n    </target>\n</project>     \n     \nHere's the Security.java file\n=============================\n// -----------------------------------------------------------------------\n//\n//    Copyright (c) FEDERAL EXPRESS CORPORATION 2001\n//    This document contains information proprietary and\n//    confidential to Federal Express Corporation and may\n//    not be copied or reproduced without permission.\n//\n// -----------------------------------------------------------------------\n//\n//    $Id: Security.java,v 1.2 2001/12/05 00:03:41 bn388572 Exp $\n//\n// NOTES:\n//\n//    Remote interface of security bean\n//\n//\n// OWNER:\n//\n//    LHSD-CSSD Properties and Facilities Group\n//\n// -----------------------------------------------------------------------\n\npackage com.fedex.properties.grems.ejb;\n\nimport java.rmi.RemoteException;\nimport java.util.Vector;\nimport javax.ejb.EJBObject;\n\n/**\n *  This EJB is responsible for handling the login of users.\n *  \n *  @author  $Author: bn388572 $\n *  @version $Revision: 1.2 $\n */\npublic interface Security extends EJBObject\n{\n    /**\n     *  Checks to see that the session id is still valid.  That is,\n     *  the user is still logged in on the Eureka Portal server\n     *\n     *  @param sessionId  The session id associated with this user.\n     *  @return <code>true</code> if the session is still good\n     *          <code>false</code> otherwise\n     *  @throws RemoteException Standard EJB fair\n     */\n    public boolean isLoggedIn( String sessionId )\n    throws RemoteException;\n\n    /**\n     *  Checks the user's name and password for validity and returns\n     *  any session id's associated with the user.  If there are no\n     *  current sessions for this user, and the password is correct,\n     *  then it creates a session.\n     *\n     *  @param username The user's account name\n     *  @param password The user's account password\n     *  @return A list of valid session id's for this user.\n     *  @throws RemoteException Standard EJB fair\n     */\n    public Vector logIn( String username, String password )\n    throws RemoteException;\n\n    /**\n     *  Retrieves the user's business group affiliation.  For example. \n     *  MIS, Contract Administrator or Real Estate.\n     *\n     *  @param username The user's account name\n     *  @return A list of valid session id's for this user.\n     *  @throws RemoteException Standard EJB fair\n     */\n    public String getUserGroup( String username )\n    throws RemoteException;\n}", "id": 8621, "time": "2001-12-05T12:44:33Z", "creator": "bwnations@fedex.com", "creation_time": "2001-12-05T12:44:33Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 5291, "attachment_id": 874, "id": 8623, "time": "2001-12-05T12:49:21Z", "creator": "bwnations@fedex.com", "creation_time": "2001-12-05T12:49:21Z", "is_private": false, "text": "Created attachment 874\ntar ball with a set of files that demo the bug"}, {"count": 2, "tags": [], "bug_id": 5291, "text": "The ProjectComponent.java file was added to Ant version 1.4(.1)  I guess you are\nusing a build file meant to be used with Ant1.4.1 with Ant1.3.  Please upgrade\nto Ant1.4.1 and check if the error persists.  If it does, please repoen the \ncase.\n\nThanks,\nMagesh\n", "id": 8625, "time": "2001-12-05T13:13:21Z", "creator": "umagesh@apache.org", "creation_time": "2001-12-05T13:13:21Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 5291, "attachment_id": null, "id": 8627, "time": "2001-12-05T13:31:54Z", "creator": "bwnations@fedex.com", "creation_time": "2001-12-05T13:31:54Z", "is_private": false, "text": "Magesh,\n\nYep, that fixed it.  Please excuse me while I go wipe the egg off of my face.\n\nThanks for your timely help,\n\nBobby"}, {"count": 4, "tags": [], "creator": "umagesh@apache.org", "attachment_id": null, "text": "Bobby:\n> Yep, that fixed it.  Please excuse me while I go wipe the egg off of my face.\n\nWe, here at ant-dev, are equally at fault for not providing a mechanism to\ntell which version(s) of Ant a build file is compatible with.  We are working \non that.\n\nMagesh\n", "id": 8628, "time": "2001-12-05T13:35:30Z", "bug_id": 5291, "creation_time": "2001-12-05T13:35:30Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 5291, "attachment_id": null, "id": 8635, "time": "2001-12-05T14:03:36Z", "creator": "bwnations@fedex.com", "creation_time": "2001-12-05T14:03:36Z", "is_private": false, "text": "Just curious, what is it about the build file that makes it incompatible with\nant 1.3?  I'd still love to get the checkstyle task working under version 1.3\nsince 1.4.1 gives me problems with my ejbc tasks using bea weblogic 6.1."}, {"count": 6, "tags": [], "bug_id": 5291, "attachment_id": null, "id": 8636, "time": "2001-12-05T14:15:51Z", "creator": "umagesh@apache.org", "creation_time": "2001-12-05T14:15:51Z", "is_private": false, "text": "You have to contact the CheckStyle folks for a response to that.  Ant-dev\ncannot extend support to 3rd party task implementations.\n\nI still strongly suggest you upgrade to Ant 1.4.1 and post your EJBC issues\nto ant-user@jakarta.apache.org to get an idea on what you might be doing wrong.\n\nCheers,\nMagesh"}]