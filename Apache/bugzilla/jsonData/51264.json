[{"count": 0, "tags": [], "bug_id": 51264, "attachment_id": null, "is_private": false, "id": 146619, "time": "2011-05-25T10:48:09Z", "creator": "gjblajian@gmail.com", "creation_time": "2011-05-25T10:48:09Z", "text": "Why is it the Persistent Store Store element does not contain a means to reference a database link defined in the globalnamingresources, for example:\n\nThis is what is required\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Context path=\"/App1\" docbase=\" App1\" reloadable=\"false\" crossContext=\"true\" debug=\"1\">\n    <Manager className=\"org.apache.catalina.session.PersistentManager\" distributable=\"true\" maxIdleBackup=\"5\">\n      <Store className=\"org.apache.catalina.session.JDBCStore\" connectionURL=\"jdbc:oracle:thin:username/password@servername:port:schema\"\n        driverName=\"oracle.jdbc.OracleDriver\" sessionAppCol=\"app_name\" sessionDataCol=\"session_data\" \n        sessionIdCol=\"session_id\" sessionLastAccessedCol=\"last_access\" sessionMaxInactiveCol=\"max_inactive\"\n        sessionTable=\"tomcat_sessions\" sessionValidCol=\"valid_session\" />\n    </Manager>\n    <ResourceLink global=\"jdbc/dbName\" name=\"jdbc/dbName\" type=\"javax.sql.DataSource\"/>\n</Context>\n\nBUT couldn\u2019t the tomcat accept this?\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Context path=\"/App1\" docbase=\" App1\" reloadable=\"false\" crossContext=\"true\" debug=\"1\">\n    <Manager className=\"org.apache.catalina.session.PersistentManager\" distributable=\"true\" maxIdleBackup=\"5\">\n      <Store className=\"org.apache.catalina.session.JDBCStore\" resourceLink=\"jdbc/dbName\"\n        resourceType=\"javax.sql.DataSource\" sessionAppCol=\"app_name\" sessionDataCol=\"session_data\" \n        sessionIdCol=\"session_id\" sessionLastAccessedCol=\"last_access\" sessionMaxInactiveCol=\"max_inactive\"\n        sessionTable=\"tomcat_sessions\" sessionValidCol=\"valid_session\" />\n    </Manager>\n    <ResourceLink global=\"jdbc/dbName\" name=\"jdbc/dbName\" type=\"javax.sql.DataSource\"/>\n</Context>\n\nThat way the application developer does not need to know the username and password to the production database server nor does it need to be packaged in his/her war file."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "Patches welcome.", "id": 146620, "time": "2011-05-25T11:14:25Z", "bug_id": 51264, "creation_time": "2011-05-25T11:14:25Z", "is_private": false, "attachment_id": null}, {"attachment_id": 27084, "tags": [], "bug_id": 51264, "is_private": false, "count": 2, "id": 146710, "time": "2011-05-28T14:34:24Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2011-05-28T14:34:24Z", "text": "Created attachment 27084\nImplements configuration option for jndi based DataSource.\n\nImplements configuration option for jndi based DataSource.\n\nNew attribute \"dataSourceName\" for JDBCStore. If this attribute is set, it will be used to get a DataSource from JNDI. If a DataSource was found, it will be used instead of direct configuration via \"connectionURL\" and \"driverName\"."}, {"count": 3, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Many thanks for the patch.\n\nIt has been applied to 7.0.x and will be included in 7.0.15 onwards.", "id": 146849, "time": "2011-06-03T22:13:19Z", "bug_id": 51264, "creation_time": "2011-06-03T22:13:19Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "markt@apache.org", "text": "*** Bug 47061 has been marked as a duplicate of this bug. ***", "id": 146865, "time": "2011-06-04T17:33:38Z", "bug_id": 51264, "creation_time": "2011-06-04T17:33:38Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "felix.schumacher@internetallee.de", "is_private": false, "id": 146927, "creation_time": "2011-06-07T13:26:37Z", "time": "2011-06-07T13:26:37Z", "bug_id": 51264, "text": "Pooled connections should be released as early as possible. Otherwise \"removeAbandoned\" will likely cause havoc.", "attachment_id": null}, {"attachment_id": 27125, "tags": [], "bug_id": 51264, "text": "Created attachment 27125\nreturn pooled connections as early as poosible", "count": 6, "id": 146928, "time": "2011-06-07T13:28:44Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2011-06-07T13:28:44Z", "is_private": false}, {"count": 7, "tags": [], "creator": "felix.schumacher@internetallee.de", "is_private": false, "text": "Created attachment 27127\nreturn pooled connections as early as poosible\n\nremove can now reuse a connection.", "id": 146934, "time": "2011-06-07T15:21:51Z", "bug_id": 51264, "creation_time": "2011-06-07T15:21:51Z", "attachment_id": 27127}, {"count": 8, "tags": [], "bug_id": 51264, "text": "Fixed in 7.0.x (with some minor tweaks) and will be in 7.0.16 onwards.", "id": 146942, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2011-06-07T19:29:10Z", "time": "2011-06-07T19:29:10Z", "is_private": false}]