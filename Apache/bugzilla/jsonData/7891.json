[{"count": 0, "attachment_id": null, "bug_id": 7891, "is_private": false, "id": 13131, "time": "2002-04-09T20:25:00Z", "creator": "misko@hevery.com", "creation_time": "2002-04-09T20:25:00Z", "tags": [], "text": "Class loader can load the same class twice upon startup throwing the following \nexception:\n\nREPRODUCE:\n1.) Set up fames page pointing to two seperate jsp pages. The frames pages \nshould not couses any class loading itself. (simple HTML page will do)\n2.) The two pages which will be both loaded into the frameset need to attempt \nto load a class using the catalina class loader.\n3.) Restart Catalina to dump all the classes.\n4.) Refresh the framset. On Internet Explorer this will cuse the 2 pages to be \nrequested simultaniusly. The catalina will get 2 simultanius requests for two \npages both of which will attempt to load the same class. A race condition \noccures and one of the pages fails to load with the following exception.\n5.) After the initial error. All pages work fine. To reproduce restart Catalina.\n\n\tException:  java.lang.LinkageError: duplicate class definition: \norg/apache/turbine/services/rundata/DefaultTurbineRunData\n\tStack Trace follows:\n\tjava.lang.LinkageError: duplicate class definition: \norg/apache/turbine/services/rundata/DefaultTurbineRunData\n\tat java.lang.ClassLoader.defineClass0(Native Method)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:486)\n\tat java.security.SecureClassLoader.defineClass\n(SecureClassLoader.java:111)\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:248)\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:56)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:195)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:188)\n\tat org.apache.catalina.loader.StandardClassLoader.findClass\n(StandardClassLoader.java:664)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:1077)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:976)\n\tat org.apache.turbine.services.factory.TurbineFactoryService.loadClass\n(TurbineFactoryService.java:551)\n\tat org.apache.turbine.services.factory.TurbineFactoryService.getInstance\n(TurbineFactoryService.java:213)\n\tat org.apache.turbine.services.pool.TurbinePoolService.getInstance\n(TurbinePoolService.java:398)\n\tat org.apache.turbine.services.rundata.TurbineRunDataService.getRunData\n(TurbineRunDataService.java:264)\n\tat org.apache.turbine.services.rundata.TurbineRunDataService.getRunData\n(TurbineRunDataService.java:215)\n\tat org.apache.turbine.util.RunDataFactory.getRunData\n(RunDataFactory.java:135)\n\tat org.apache.turbine.Turbine.doGet(Turbine.java:261)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:255)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:225)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2252)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:164)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:446)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:163)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:875)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:952)\n\tat java.lang.Thread.run(Thread.java:484)"}, {"count": 1, "text": "This has been fixed a long time ago. I don't remember the original bug number. \nYou should upgrade to a newer release (although you can probably live with that \nbug).", "bug_id": 7891, "is_private": false, "id": 13132, "time": "2002-04-09T20:35:22Z", "creator": "remm@apache.org", "creation_time": "2002-04-09T20:35:22Z", "tags": [], "attachment_id": null}]