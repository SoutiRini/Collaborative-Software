[{"count": 0, "tags": [], "bug_id": 51691, "text": "I've already reported the issue long time ago. Now I don't see that issue in the list :(\n\nThe problem is that when I'm using Authentication feature with JMS Publisher sample (ON \"Use Authorization?\" checkbox, with correct user/password) - the sample will fail with the error = \"User name or password is invalid\".\n\nBelow is BeanShell sample that work fine with Authentication for the same JMS server.\nSo, this is my proving that it is JMeter issue (means JMS Publisher sample).\n\nI believe that the issue is valid for JMS Subscriber as well.\n\nWorkaround - disabling Authentication on JMS server.\n============\n\nimport javax.jms.ConnectionFactory;\nimport javax.jms.Connection;\nimport javax.jms.Session;\nimport javax.jms.MessageProducer;\nimport javax.jms.MessageConsumer;\nimport javax.jms.Queue;\nimport javax.jms.Session;\nimport javax.jms.Message;\nimport javax.jms.TextMessage;\n//Import the classes to use JNDI.\nimport javax.naming.*;\nimport java.util.*;\n\nimport org.apache.activemq.ActiveMQConnectionFactory;\nimport org.apache.activemq.command.ActiveMQQueue;\n\nSystem.out.println(\"TEST\");\n                                    String myhostname = \"tcp://mdmcdocr-esbqa.mcgov.org:61616\";\n                                    ConnectionFactory factory = new ActiveMQConnectionFactory(myhostname);\n\n                                   connection = factory.createConnection(\"user\", \"password\");\n//                                   connection = factory.createConnection();\n                                   session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);\n                                   queue = session.createQueue(\"Elite_To_MorphoTrak\");\n                                   MessageConsumer consumer = session.createConsumer(queue,\"JMSCorrelationID='e884b430-c9fb-11e0-9279-79bc5a87f8d4'\");\n  \n                                    connection.start();\nSystem.out.println(\"TEST 2\");\n                                    Message myMessage = consumer.receive(2000);\nSystem.out.println(\"TEST 3\");\n                                    session.close(); \n                                    connection.close();\nSystem.out.println(\"TEST 4\");\n//                TextMessage txtMsg = (TextMessage) myMessage;\n//                System.out.println(\"Read Message: \" + txtMsg.getText());\n                System.out.println(\"Read Message: \" + myMessage);\nSystem.out.println(\"TEST 6\");", "id": 148716, "time": "2011-08-19T18:37:16Z", "creator": "slavko_h@yahoo.com", "creation_time": "2011-08-19T18:37:16Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 51691, "is_private": false, "text": "Hello,\nCan you post your JMX file.\nAre you sure you set JNDI properties for user and password ?\n\nRegards\nPhilippe Mouawad", "id": 149090, "time": "2011-09-07T20:13:37Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-09-07T20:13:37Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 51691, "is_private": false, "text": "Created attachment 27496\nJMS Subscriber screenshot", "id": 149243, "time": "2011-09-14T21:08:08Z", "creator": "slavko_h@yahoo.com", "creation_time": "2011-09-14T21:08:08Z", "attachment_id": 27496}, {"count": 3, "tags": [], "creator": "slavko_h@yahoo.com", "text": "I do not use \"JNDI Properties\" flag.\nSee attached screenshot.", "id": 149244, "time": "2011-09-14T21:09:32Z", "bug_id": 51691, "creation_time": "2011-09-14T21:09:32Z", "is_private": false, "attachment_id": null}, {"attachment_id": 27522, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Created attachment 27522\nTest JMX\n\nScenario that shows the issue.\nIt works with ActiveMQ:\nIt requires setting in credentials-enc.properties:\nactivemq.username=system\nactivemq.password=ENC(bNDG0WY3R49MCylXtUWfGW1SAy563g6E)\nguest.password=ENC(bNDG0WY3R49MCylXtUWfGW1SAy563g6E)\n\nAnd using activemq-security.xml and changing:\n<authenticationUser username=\"system\" password=\"${activemq.password}\"\n                    groups=\"users,admins\"/>\n\nAnd starting it with:\nexport ACTIVEMQ_ENCRYPTION_PASSWORD=activemq\n/activemq start xbean:conf/activemq-security.xml", "count": 4, "id": 149430, "time": "2011-09-17T20:46:52Z", "bug_id": 51691, "creation_time": "2011-09-17T20:46:52Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 51691, "attachment_id": 27523, "text": "Created attachment 27523\nFix to the issue\n\nHello,\nHere is the fix, it fixes the following issues related to this:\n1) Issue in JMS Subscriber and JMS Publisher with the checkbox, when \"Use Authorization\" is checked User name and password are disabled (which is wrong) => I fixed it\n2) Issue in Utils where createConnection was not called with user/password => That's why it didn't work\n3) Issue if you have a mix of Authenticated connection and not\n\n\nRegards\nPhilippe Mouawad", "id": 149431, "time": "2011-09-17T20:51:57Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-09-17T20:51:57Z", "is_private": false}, {"count": 6, "tags": [], "text": "Thanks again!\n\nFix applied:\n\nURL: http://svn.apache.org/viewvc?rev=1172077&view=rev\nLog:\nBug 51691 - Authorization does not work for JMS Publisher and JMS Subscriber\n\nModified:\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/Utils.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/client/InitialContextFactory.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/control/gui/JMSPublisherGui.java\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/control/gui/JMSSubscriberGui.java\n   jakarta/jmeter/trunk/xdocs/changes.xml", "is_private": false, "id": 149442, "creator": "sebb@apache.org", "time": "2011-09-17T22:09:03Z", "bug_id": 51691, "creation_time": "2011-09-17T22:09:03Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 51691, "text": "*** Bug 51667 has been marked as a duplicate of this bug. ***", "id": 149447, "time": "2011-09-18T08:38:11Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-09-18T08:38:11Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "creator": "slavko_h@yahoo.com", "text": "Jmeter 2.5.1 (r1177103)\n\nSimple TP - just one \"JMS Subscriber\" sample (see YH1168.jpg attached).\n\nRun from GUI produces \"NullPoinerException\" error - see jmeter.log attached;\n\nI'm using activemq-all-5.3.1.jar (attached). The file has to be placed into \"lib\\ext\" directory.\n\nSo, the issue is reopened.\n\nQuestion: why activemq-all-5.3.1.jar has to be placed into \"lib\\ext\" rather than just into \"lib\" directory?", "id": 150336, "time": "2011-10-08T00:04:32Z", "bug_id": 51691, "creation_time": "2011-10-08T00:04:32Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 51691, "attachment_id": 27734, "text": "Created attachment 27734\njmeter log", "id": 150339, "time": "2011-10-08T00:08:13Z", "creator": "slavko_h@yahoo.com", "creation_time": "2011-10-08T00:08:13Z", "is_private": false}, {"attachment_id": 27735, "tags": [], "creator": "slavko_h@yahoo.com", "is_private": false, "count": 10, "id": 150340, "time": "2011-10-08T00:08:52Z", "bug_id": 51691, "creation_time": "2011-10-08T00:08:52Z", "text": "Created attachment 27735\nTest Plan screenshot"}, {"count": 11, "tags": [], "text": "Sorry cannot attach activemq-all-5.3.1.jar due to size-limiting.", "is_private": false, "id": 150341, "creator": "slavko_h@yahoo.com", "time": "2011-10-08T00:10:56Z", "bug_id": 51691, "creation_time": "2011-10-08T00:10:56Z", "attachment_id": null}, {"count": 12, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Please attach:\n- activemq configuration files, no need for jar\n- test plan not just screenshot \n- any file you use in test plan\n\nThank you", "id": 150344, "time": "2011-10-08T06:58:10Z", "bug_id": 51691, "creation_time": "2011-10-08T06:58:10Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Also try to replace in your test variables by their real values to exclude any misloading of CVS.\n\nTest against ActiveMQ5 is OK for me with one subscriber as in your Test Plan.\nRegards\nPhilippe", "count": 13, "id": 150347, "time": "2011-10-08T07:53:59Z", "bug_id": 51691, "creation_time": "2011-10-08T07:53:59Z", "is_private": false}, {"count": 14, "text": "Hi Philippe,\n\n1) why do you ask for activemq files if the java-code in Description works fine; NP, I will provide;\n2) it does not work when I provide user/password by their values;\n3) Jmeter 2.4 provides handled-error that user/paswword is not correct;", "creator": "slavko_h@yahoo.com", "is_private": false, "id": 150358, "time": "2011-10-08T16:29:24Z", "bug_id": 51691, "creation_time": "2011-10-08T16:29:24Z", "tags": [], "attachment_id": null}, {"count": 15, "tags": [], "text": "1) activemq conf files are attached (some security files are not included);\n2) TP is attached;\n3) TP is simplified and does not use any data files;\n4) TP is updated to not use variables;", "is_private": false, "id": 150359, "creator": "slavko_h@yahoo.com", "time": "2011-10-08T17:04:38Z", "bug_id": 51691, "creation_time": "2011-10-08T17:04:38Z", "attachment_id": null}, {"count": 16, "tags": [], "creator": "slavko_h@yahoo.com", "text": "Created attachment 27739\nactivemq conf files", "id": 150360, "time": "2011-10-08T17:05:37Z", "bug_id": 51691, "creation_time": "2011-10-08T17:05:37Z", "is_private": false, "attachment_id": 27739}, {"count": 17, "tags": [], "creator": "slavko_h@yahoo.com", "text": "Created attachment 27740\njmeter test plan", "id": 150361, "time": "2011-10-08T17:06:20Z", "bug_id": 51691, "creation_time": "2011-10-08T17:06:20Z", "is_private": false, "attachment_id": 27740}, {"count": 18, "tags": [], "creator": "slavko_h@yahoo.com", "text": "Once again, the java-code provided in the description works fine with my activemq configuration (username and password need to change).", "id": 150362, "time": "2011-10-08T17:08:04Z", "bug_id": 51691, "creation_time": "2011-10-08T17:08:04Z", "is_private": false, "attachment_id": null}, {"count": 19, "tags": [], "bug_id": 51691, "is_private": false, "text": "I reproduced NPE with your test case.\nRegarding your question, you can put libraries in lib also.\n\nIssue has been fixed in trunk by fixing 51996.\nBut your test plan also enabled me to see a NPE that occurs when user/password is wrong, fix will be available within minutes.\n\nSo thank you very much.\nRegards\nPhilippe", "id": 150363, "time": "2011-10-08T18:07:56Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-08T18:07:56Z", "attachment_id": null}, {"count": 20, "tags": [], "bug_id": 51691, "text": "(In reply to comment #19)\n> I reproduced NPE with your test case.\n> Regarding your question, you can put libraries in lib also.\n> \n> Issue has been fixed in trunk by fixing 51996.\n\nStart Of wrong comment\n> But your test plan also enabled me to see a NPE that occurs when user/password\n> is wrong, fix will be available within minutes.\n> \nIgnore from \"Start Of wrong comment\" \n> So thank you very much.\n> Regards\n> Philippe", "id": 150364, "time": "2011-10-08T19:03:05Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-10-08T19:03:05Z", "is_private": false, "attachment_id": null}, {"count": 21, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Date: Sat Oct  8 19:06:06 2011\nNew Revision: 1180462\n\nURL: http://svn.apache.org/viewvc?rev=1180462&view=rev\nLog:\nBug 51691 - Authorization does not work for JMS Publisher and JMS Subscriber\n\nAdding some comments just to clarify why 51996 fix fixes this NPE issue\n\nModified:\n   jakarta/jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/client/InitialContextFactory.java\n   jakarta/jmeter/trunk/xdocs/changes.xml", "id": 150365, "time": "2011-10-08T19:06:54Z", "bug_id": 51691, "creation_time": "2011-10-08T19:06:54Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "count": 22, "id": 150376, "time": "2011-10-09T10:03:26Z", "bug_id": 51691, "creation_time": "2011-10-09T10:03:26Z", "text": "Hello Yaroslav,\nYou can test if fix is OK by getting ,nightly build at:\nhttps://builds.apache.org/job/JMeter-trunk/lastSuccessfulBuild/artifact/trunk/dist/\n\nRegards\nPhilippe"}, {"attachment_id": null, "tags": [], "creator": "slavko_h@yahoo.com", "text": "Verified r1183374\n\nThe issue has been passed QA", "count": 23, "id": 150587, "time": "2011-10-14T19:46:38Z", "bug_id": 51691, "creation_time": "2011-10-14T19:46:38Z", "is_private": false}, {"count": 24, "tags": [], "bug_id": 51691, "attachment_id": null, "is_private": false, "id": 152800, "time": "2012-01-15T13:43:09Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-01-15T13:43:09Z", "text": "Thanks for verification.\nMarking issue as RESOLVED to avoid it appearing in Bug Report."}]