[{"count": 0, "tags": [], "creator": "jliang@andera.com", "attachment_id": 31199, "text": "Created attachment 31199\nenhanced jmeter.sh\n\nHi guys,\n\nThe bin/jmeter.sh script will fail to launch if it is called via symlink or called from outside of bin.\n\nAdding the following snippet of script will resolve the true path, cd to it, and then start jmeter.  I've attached full script with the enhancements.\n\n-------------\n\n#! /bin/sh\n## ...\n\n# add the following starting line 32\n# resolve the true full path (e.g. called from outside of bin, called via symlinks, and etc.)\nSOURCE=\"${BASH_SOURCE[0]}\"\nwhile [ -h \"$SOURCE\" ]; do # resolve $SOURCE until the file is no longer a symlink\n  DIR=\"$( cd -P \"$( dirname \"$SOURCE\" )\" && pwd )\"\n  SOURCE=\"$(readlink \"$SOURCE\")\"\n  [[ $SOURCE != /* ]] && SOURCE=\"$DIR/$SOURCE\" # if $SOURCE was a relative symlink, we need to resolve it relative to the path where the symlink file was located\ndone\nDIR=\"$( cd -P \"$( dirname \"$SOURCE\" )\" && pwd )\"\n\necho \"start jmeter.sh from $DIR\"\ncd \"$DIR\"\n\n# the rest of jmeter.sh\n...", "id": 172319, "time": "2014-01-13T04:31:49Z", "bug_id": 55994, "creation_time": "2014-01-13T04:31:49Z", "is_private": false}, {"count": 1, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "(In reply to James Liang from comment #0)\n...\n> #! /bin/sh\n> ## ...\n> \n> # add the following starting line 32\n> # resolve the true full path (e.g. called from outside of bin, called via\n> symlinks, and etc.)\n> SOURCE=\"${BASH_SOURCE[0]}\"\n\nThat is specific to the Bash shell.\n\nHowever, there are systems where /bin/sh is not the Bash shell.\n\nFor example, on a Ubuntu system I am currently using, Bash is at /bin/bash whereas /bin/sh is the Bourne shell. On another system /bin/sh is indeed Bash.\n\nThe script must cater for the minimum supported command set.", "id": 172338, "time": "2014-01-13T17:19:39Z", "bug_id": 55994, "creation_time": "2014-01-13T17:19:39Z", "is_private": false}, {"count": 2, "tags": [], "text": "Can we put the following at top of the script?  Bash is the most common shell.  I think that should be good enough.  Otherwise, it may not be worthwhile to go too far for the lowest common denominator.\n\n#! /bin/bash\n\n\nAlso, just to clarify, should I make these simple code change in the source control?  I don't have a preference either way.  I don't know what is the right etiquette for contributing code changes.", "is_private": false, "id": 172346, "creator": "jliang@andera.com", "time": "2014-01-13T21:00:53Z", "bug_id": 55994, "creation_time": "2014-01-13T21:00:53Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 172349, "creation_time": "2014-01-13T22:53:37Z", "time": "2014-01-13T22:53:37Z", "bug_id": 55994, "text": "(In reply to James Liang from comment #2)\n> Can we put the following at top of the script?  Bash is the most common\n> shell.  I think that should be good enough.  Otherwise, it may not be\n> worthwhile to go too far for the lowest common denominator.\n> \n> #! /bin/bash\n\nThat may not exist, so that is not an option.\n\nI'm sure there must be a way to recode the patch so that it works with Bourne shell.\n\n> \n> Also, just to clarify, should I make these simple code change in the source\n> control?  I don't have a preference either way.  I don't know what is the\n> right etiquette for contributing code changes.\n\nThrough Bugzilla.\n\nOnly committers can update the source code.", "is_private": false}, {"count": 4, "tags": [], "text": "This seems to be a duplicate of Bug 21695. Looks like there is a solution in comment 1.\n\nIn any case, I don't think the jmeter.sh script should change directory internally.\n\nIf you really want to do that, just create a shell script that does so, rather than creating a soft link.", "attachment_id": null, "id": 172351, "creator": "sebb@apache.org", "time": "2014-01-13T23:28:13Z", "bug_id": 55994, "creation_time": "2014-01-13T23:28:13Z", "is_private": false}, {"count": 5, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of bug 21695 ***", "is_private": false, "id": 172376, "creator": "sebb@apache.org", "time": "2014-01-14T17:49:48Z", "bug_id": 55994, "creation_time": "2014-01-14T17:49:48Z", "attachment_id": null}]