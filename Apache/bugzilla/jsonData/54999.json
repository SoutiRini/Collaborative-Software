[{"count": 0, "tags": [], "creator": "kmashint@yahoo.com", "attachment_id": null, "text": "In testing I found that the JSESSIONIDSSO was not re-created upon re-authentication via logout() and login(username,password) in the same request.  The problem stemmed from the REQ_SSOID_NOTE that was was not reset upon request.logout(), whereas the documentation indicates that a logout() from any web-app should logout() from all web-apps.  When the REQ_SSOID_NOTE is not removed upon logout(), a subsequent login(username,password) on the same request will re-create a JSESSIONID for the current web-app but fails to re-create a JSESSIONIDSSO since the REQ_SSO_ID_NOTE still lingers on the request.\n\nAuthenticatorBase.java adjustment for logout(request) that removes the REQ_SSOID_NOTE so that a subsequent login(username,password) will work on the same request:\n\n    @Override\n    public void logout(Request request) throws ServletException {\n        register(request, request.getResponse(), null,\n                null, null, null);\n    \trequest.removeNote(Constants.REQ_SSOID_NOTE);\n    }\n\nI'll upload a diff-patch against the trunk and for 7.0.40.", "id": 167330, "time": "2013-05-21T19:50:48Z", "bug_id": 54999, "creation_time": "2013-05-21T19:50:48Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 54999, "text": "Created attachment 30313\nFix for Bug 54999 to ensure JSESSIONIDSSO can be re-created\n\nIn the Bug comments I chose to @override the AuthenticatorBase logout(Request)  but the more self-consistent place to patch this seems to be in AuthenticatorBase.register(Request,...) that I've done here against the tc7.0.x/trunk/tc7.0.x/java/org/apache/catalina/authenticator/AuthenticatorBase.java.", "id": 167358, "time": "2013-05-22T13:18:26Z", "creator": "kmashint@yahoo.com", "creation_time": "2013-05-22T13:18:26Z", "is_private": false, "attachment_id": 30313}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Thanks for the report, analysis and patch. It all looks good to me.\n\nI have applied the patch to trunk and 7.0.x and the fix will be included in 7.0.41 onwards.", "id": 167508, "time": "2013-05-30T13:54:12Z", "bug_id": 54999, "creation_time": "2013-05-30T13:54:12Z", "is_private": false}]