[{"count": 0, "tags": [], "text": "Configuration:\n\nApache/2.0.40 (Red Hat Linux)\nmod_jk 1.2.8\nTomcat 5.5.7\nRed Hat Linux 9\nj2sdk-1_4_2_07\n\nHow to reproduce\n\n- Deploy your application with multiple jar files in your application's lib\ndirectory.\n- The contents of one jar file are not required by the application (obsolete).\n- The name of the obsolete jar file is such that it appears first in\n  what I guess is Java's list() command.\n- Delete the obsolete jar file.\n- Request content of a servlet that has not been loaded before you deleted the\n  obsolete file.\n\nExpected behavior:\n\nTomcat should load the required class, or if it cannot load the class, then it\nshould print a helpful error message.\n\nIf the root cause is that a jar file cannot be opened, then the complete\nfilename of the jar file should be printed in the error message.\n\n\nActual behavior:\n\nIt appears (I am guessing here) that Tomcat caches the list of jar files in the\nlib directory. It tries to open all files, including deleted ones.\n\nIt crashes with two errors:\n\n1) WARNING: Failed to open JAR\njava.util.zip.ZipException: No such file or directory\nThere are two issues here that need to be addressed:\na) Tomcat insists that a file that was available at deployment is available.\n   It should ignore it if it does not exist.\nb) It does not print the filename of the file it tries to open.\n\n2) SEVERE: Allocate exception for servlet <your servlet here>\njavax.servlet.ServletException: Error instantiating servlet <your servlet class\nhere>\n\n\nComment:\n\nIt might be better that Tomcat tests for the existence of the file and\nif it does not exist then it should ignore it.\nIf that is not possible e.g. because Tomcat keeps an index of the file's\ncontents then it should print in the error message the complete filename of the\nfile it can't find.\n\nVery much like in Java.io.FileNotFoundException where the filename is included\nin the stack trace.", "attachment_id": null, "bug_id": 35056, "id": 75333, "time": "2005-05-25T10:28:21Z", "creator": "bht@actrix.gen.nz", "creation_time": "2005-05-25T10:28:21Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 35056, "attachment_id": null, "id": 75334, "time": "2005-05-25T11:20:48Z", "creator": "remm@apache.org", "creation_time": "2005-05-25T11:20:48Z", "is_private": false, "text": "Sorry, we will not implement that."}]