[{"attachment_id": 31326, "tags": [], "creator": "fileformat@gmail.com", "text": "Created attachment 31326\nexample build.xml with input and output files\n\nWe are using <apply> with a <redirector> to gzip some files.  The output is corrupt unless I put logError=\"true\" on either the apply or the redirector.  \n\nThere is no error output, so logError should not have any impact on the output.\n\nThe attachment includes\n- a sample build.xml that does it both with and without logError\n- a sample .txt file for input\n- the two output files, one corrupted and one okay\n- the hd output of the two output files\n- the output from ant -debug\n- the output from ant -diagnostics\n\nCorruption happens even on small files.\n\nIt does not happen in version 1.8.2.\n\nIt appears to be something with line endings or text modes, since the corrupted output has 0x0A converted to 0x0D, and 0x0D removed (as far as I can tell).  I am running on Ubuntu 13.10 with bash and am not doing anything out of the ordinary (as far as I know).", "count": 0, "id": 173339, "time": "2014-02-18T16:52:24Z", "bug_id": 56156, "creation_time": "2014-02-18T16:52:24Z", "is_private": false}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "first of all I can reproduce what you see.\n\nThis happens because of the branch around line 720 in Redirector where the output stream is wrapped in a LineOrientedStream unless error and output go to different streams.  This is why logError affects this.\n\nI vaguely recall we changed the code in order to have out and err split into separate lines rather than mixed up in a single line.  I need to look through the history to be sure.  In either case we are going to make somebody unhappy.\n\nI assume you example is really just an example as you could achive the same without redirecting output.  For your real problem, is using errorProperty with a throw-away property an option?  This way you could split the streams without cluttering your log output.", "id": 173552, "time": "2014-02-28T16:53:44Z", "bug_id": 56156, "creation_time": "2014-02-28T16:53:44Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 56156, "text": "this was in order to fix bug #50507", "id": 173553, "time": "2014-02-28T16:55:37Z", "creator": "bodewig@apache.org", "creation_time": "2014-02-28T16:55:37Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 56156, "text": "the same change is responsible for bug #55667", "id": 173554, "time": "2014-02-28T17:15:33Z", "creator": "bodewig@apache.org", "creation_time": "2014-02-28T17:15:33Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "redirector now has a binaryOutput attribute which when set to true prevents Ant from splitting the output into lines.\n\nsvn revision 1573617", "id": 173593, "time": "2014-03-03T17:12:50Z", "bug_id": 56156, "creation_time": "2014-03-03T17:12:50Z", "is_private": false}]