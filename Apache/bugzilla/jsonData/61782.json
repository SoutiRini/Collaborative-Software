[{"count": 0, "attachment_id": 35536, "bug_id": 61782, "text": "Created attachment 35536\nsample app\n\nAuthConfigFactoryImpl.doRegisterConfigProvider() first tries to load the provider class with the thread context class loader (which is the application loader) and after that it retries with its own loader. \nHowever, the retry is always done, even if the first loading was successful. The result is that if the provider implementation is in the application the second loading fails and the provider registration throws ClassNotFound\n\nThe attached war contains a very sample application illustrating the problem. It contains a sample provider implementation and a ServletContextListener which tries to register the provider it in its contextInitialized.", "id": 202227, "time": "2017-11-18T14:05:48Z", "creator": "lazar.kirchev@gmail.com", "creation_time": "2017-11-18T14:05:48Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 61782, "text": "This pull request contains a fix for it: https://github.com/apache/tomcat/pull/90", "id": 202228, "time": "2017-11-18T14:07:08Z", "creator": "lazar.kirchev@gmail.com", "creation_time": "2017-11-18T14:07:08Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 61782, "attachment_id": null, "id": 202282, "time": "2017-11-20T18:28:19Z", "creator": "markt@apache.org", "creation_time": "2017-11-20T18:28:19Z", "is_private": false, "text": "Many thanks.\n\nFixed in:\n- trunk for 9.0.2 onwards\n- 8.5.x for 8.5.24 onwards"}]