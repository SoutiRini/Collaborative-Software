[{"count": 0, "tags": [], "bug_id": 55508, "attachment_id": null, "text": "I have moved my web app from Tomcat 6.0.35 to Tomcat 7.0.42 and the custom TLDs are not being located.\n\n50783 is similar, but my issue is with custom TLDs located in WEB-INF/lib.\n\nTldLocationsCache does not locate them or add them to it's internal map of TLD locations.", "id": 169830, "time": "2013-08-30T07:48:14Z", "creator": "alan.mcl@gmail.com", "creation_time": "2013-08-30T07:48:14Z", "is_private": false}, {"count": 1, "tags": [], "creator": "alan.mcl@gmail.com", "is_private": false, "id": 169831, "creation_time": "2013-08-30T07:50:39Z", "time": "2013-08-30T07:50:39Z", "bug_id": 55508, "text": "I posted more context on StackOverflow: http://stackoverflow.com/questions/18383997/jsp-jsf-documents-not-rendering-correctly-after-upgrade-to-tomcat-7", "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 169834, "creation_time": "2013-08-30T08:12:56Z", "time": "2013-08-30T08:12:56Z", "bug_id": 55508, "text": "JSP Specification  (2.1 - Tomcat 6, 2.2 - Tomcat 7) section JSP.7.3.1 states:\n<quote>\nWhen deployed directly into a web application, the tag library descriptor\nfiles must always be in the WEB-INF directory, or some subdirectory of it. TLD\nfiles should not be placed in /WEB-INF/classes or /WEB-INF/lib ...\n</quote>\n\nTomcat 7 is simply stricter about enforcing this requirement as a result of some refactoring of TLD processing that took place between Tomcat 6 and Tomcat 7.", "attachment_id": null}, {"count": 3, "tags": [], "creator": "alan.mcl@gmail.com", "attachment_id": null, "is_private": false, "id": 169835, "time": "2013-08-30T08:26:57Z", "bug_id": 55508, "creation_time": "2013-08-30T08:26:57Z", "text": "Thanks for the speedy response Mark, and for the clarification."}, {"count": 4, "tags": [], "bug_id": 55508, "attachment_id": null, "is_private": false, "id": 170079, "time": "2013-09-13T05:27:19Z", "creator": "jboynes@apache.org", "creation_time": "2013-09-13T05:27:19Z", "text": "Reopening this for further discussion, and to see whether I need to change TldScanner in trunk as I think I introduced a regression here.\n\nI interpreted the spec as saying that all TLDs under /WEB-INF *must* be included except for any under /WEB-INF/tags (except for any implicit.tld found there). As a result, although applications *should* not place them in /WEB-INF/lib or /WEB-INF/classes, that was a recommendation and if they were there the container would need to include them.\n\nThe change to TldScanner in TC8 unintentionally resurrected the behaviour from TC6 that was removed in TC7."}, {"count": 5, "tags": [], "bug_id": 55508, "attachment_id": null, "id": 170152, "time": "2013-09-18T11:23:16Z", "creator": "violetagg@apache.org", "creation_time": "2013-09-18T11:23:16Z", "is_private": false, "text": "Changing the product to Tomcat 8 as this discussion may affect Tomcat 8."}, {"count": 6, "tags": [], "creator": "markt@apache.org", "text": "I've restored the Tomcat 7 behavior in Tomcat 8.\n\nMy reading of the spec is TLDs should not be scanned if they are in WEB-INF/[classes|lib] but I appreciate it could be read either way. If this turns out to be an issue (unlikely given the amount of time 7.0.x has enforced this) then we can always make it optional.", "id": 170537, "time": "2013-10-10T12:30:48Z", "bug_id": 55508, "creation_time": "2013-10-10T12:30:48Z", "is_private": false, "attachment_id": null}]