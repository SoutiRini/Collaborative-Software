[{"count": 0, "tags": [], "text": "Created attachment 28491\nthree build scripts to reproduce the issue\n\nI have a fairly complex build process that relies upon importing several build scripts and target overriding that has been working for several older versions of Ant that no longer works with the 1.8.3 release.\n\nI have attached three simple ant scripts which allow you to reproduce the problem.  After unpacking the attached zip, run the following command and you should get the same output as below.  Running this same command in Ant 1.8.2 works correctly.\n\n\nC:\\dev\\test\\ant_defect>ant -v clean\nApache Ant(TM) version 1.8.3 compiled on February 26 2012\nTrying the default build file: build.xml\nBuildfile: C:\\dev\\test\\ant_defect\\build.xml\nDetected Java version: 1.6 in: C:\\Program Files\\Java\\jdk1.6.0_30\\jre\nDetected OS: Windows 7\nparsing buildfile C:\\dev\\test\\ant_defect\\build.xml with URI = file:/C:/dev/test/\nant_defect/build.xml\nProject base dir set to: C:\\dev\\test\nparsing buildfile jar:file:/C:/tools/apache-ant-1.8.3/lib/ant.jar!/org/apache/to\nols/ant/antlib.xml with URI = jar:file:/C:/tools/apache-ant-1.8.3/lib/ant.jar!/o\nrg/apache/tools/ant/antlib.xml from a zip file\nImporting file C:\\dev\\test\\ant_defect\\x.xml from C:\\dev\\test\\ant_defect\\build.xm\nl\nOverriding previous definition of reference to ant.projectHelper\nparsing buildfile C:\\dev\\test\\ant_defect\\x.xml with URI = file:/C:/dev/test/ant_\ndefect/x.xml\nAlready defined in main or a previous import, ignore clean\nImporting file C:\\dev\\test\\ant_defect\\compile.xml from C:\\dev\\test\\ant_defect\\x.\nxml\nOverriding previous definition of reference to ant.projectHelper\nparsing buildfile C:\\dev\\test\\ant_defect\\compile.xml with URI = file:/C:/dev/tes\nt/ant_defect/compile.xml\nAlready defined in main or a previous import, ignore initProperties\nOverriding previous definition of reference to ant.projectHelper\nOverriding previous definition of reference to ant.projectHelper\nImporting file C:\\dev\\test\\ant_defect\\compile.xml from C:\\dev\\test\\ant_defect\\bu\nild.xml\nSkipped already imported file:\n   C:\\dev\\test\\ant_defect\\compile.xml\n\n\nBUILD FAILED\nTarget \"compile.initProperties\" does not exist in the project \"common test\". It\nis used from target \"initProperties\".\n        at org.apache.tools.ant.Project.tsort(Project.java:1912)\n        at org.apache.tools.ant.Project.tsort(Project.java:1919)\n        at org.apache.tools.ant.Project.tsort(Project.java:1919)\n        at org.apache.tools.ant.Project.topoSort(Project.java:1820)\n        at org.apache.tools.ant.Project.topoSort(Project.java:1783)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExe\ncutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)\n        at org.apache.tools.ant.Main.runBuild(Main.java:811)\n        at org.apache.tools.ant.Main.startAnt(Main.java:217)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)\n\nTotal time: 0 seconds", "is_private": false, "bug_id": 52960, "id": 155182, "time": "2012-03-21T15:06:15Z", "creator": "jasondonmoyer@gmail.com", "creation_time": "2012-03-21T15:06:15Z", "attachment_id": 28491}, {"count": 1, "attachment_id": null, "creator": "jasondonmoyer@gmail.com", "text": "also an issue with Ant 1.8.4", "id": 160400, "time": "2012-07-02T17:46:48Z", "bug_id": 52960, "creation_time": "2012-07-02T17:46:48Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 52960, "attachment_id": null, "is_private": false, "id": 173857, "time": "2014-03-15T20:51:10Z", "creator": "bodewig@apache.org", "creation_time": "2014-03-15T20:51:10Z", "text": "this happens because compile.xml is not imported at all the second time.  The manual says so much:\n\n> It is possible to include the same file more than once by using different prefixes, it is not possible to import the same file more than once.\n\nTo be fair I'm not sure it said so is 1.8.3.\n\nIn your case you want to use include for compile.xml inside of build.xml."}]