[{"count": 0, "tags": [], "text": "I was enhancing the nteventlog.cpp file, the source of the native library\nNTEventLogAppender.dll. I noticed following call in function regSetString:\n\nRegSetValueEx(hkey, name, 0, REG_SZ, (LPBYTE)value, lstrlen(value));\n\nThough it doesn't produce any error (for the present :-), it is IMHO in\ncontradiction with MSDN documentation, where following is said:\n\n\"If the data is of type REG_SZ, REG_EXPAND_SZ, or REG_MULTI_SZ, cbData must\ninclude the size of the terminating null character or characters.\"\n(http://msdn.microsoft.com/library/default.asp?url=/library/en-us/sysinfo/base/regsetvalueex.asp)\n\nSo the correct call should be\nRegSetValueEx(hkey, name, 0, REG_SZ, (LPBYTE)value, lstrlen(value) + 1);\n\nThanks", "attachment_id": null, "bug_id": 34981, "id": 75104, "time": "2005-05-20T10:45:10Z", "creator": "tomas.zalusky@asei.cz", "creation_time": "2005-05-20T10:45:10Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 34981, "is_private": false, "count": 1, "id": 78775, "time": "2005-08-22T00:43:58Z", "creator": "carnold@apache.org", "creation_time": "2005-08-22T00:43:58Z", "text": "Since TCHAR can be either char or wchar_t (but likely char) in this instance, it should be\n\nRegSetValueEx(hkey, name, 0, REG_SZ, (LPBYTE)value, lstrlen(value) + sizeof(TCHAR));\n"}, {"count": 2, "tags": [], "bug_id": 34981, "attachment_id": null, "text": "Applied Curt's change.  It will be in the v1.2.12rc5 build.", "id": 78870, "time": "2005-08-23T07:29:17Z", "creator": "mwomack@apache.org", "creation_time": "2005-08-23T07:29:17Z", "is_private": false}]