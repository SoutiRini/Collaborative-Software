[{"count": 0, "tags": [], "bug_id": 56382, "attachment_id": null, "text": "Tomcat logs the start of the deployment directory, but doesn't log finish.\nI've created the small patch, which logs when the particular deployment is finished, with the deployment time.\n\nSo output will be like this:\n\nApr 10, 2014 4:26:17 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory C:\\AAA\\Tools\\apache-tomcat-7.0.52\\webapps\\aaa-admin\n\n....\n\nApr 10, 2014 4:31:10 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deployment of web application directory C:\\AAA\\Tools\\apache-tomcat-7.0.52\\webapps\\aaa-admin has finished in 292,516 ms.", "id": 174439, "time": "2014-04-10T12:49:45Z", "creator": "bgrh@mail.ru", "creation_time": "2014-04-10T12:49:45Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 56382, "attachment_id": 31506, "is_private": false, "id": 174440, "time": "2014-04-10T12:50:29Z", "creator": "bgrh@mail.ru", "creation_time": "2014-04-10T12:50:29Z", "text": "Created attachment 31506\nProposed patch"}, {"text": "Comment on attachment 31506\nProposed patch\n\nIn reply to attachment 31506\n\n>         if( log.isInfoEnabled() )\n> +            startTime = System.currentTimeMillis();\n>             log.info(sm.getString(\"hostConfig.deployDir\",\n>                     dir.getAbsolutePath()));\n\n1. The above change breaks the code, because of missing '{' after an 'if' above.\n\n> System.currentTimeMillis() - startTime\n\n2. Boxing and unboxing have to be explicit, per our coding rules.\n\n3. This covers only 'deployDirectory(..)' method. What about the others?", "tags": [], "bug_id": 56382, "is_private": false, "count": 2, "id": 174456, "time": "2014-04-10T16:47:35Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-04-10T16:47:35Z", "attachment_id": 31506}, {"count": 3, "tags": [], "bug_id": 56382, "attachment_id": null, "text": "(In reply to Konstantin Kolinko from comment #2)\n> Comment on attachment 31506 [details]\n> Proposed patch\n> \n> In reply to attachment 31506 [details]\n> \n> >         if( log.isInfoEnabled() )\n> > +            startTime = System.currentTimeMillis();\n> >             log.info(sm.getString(\"hostConfig.deployDir\",\n> >                     dir.getAbsolutePath()));\n> \n> 1. The above change breaks the code, because of missing '{' after an 'if'\n> above.\nFixed.\n \n> > System.currentTimeMillis() - startTime\n> \n> 2. Boxing and unboxing have to be explicit, per our coding rules.\nFixed.\n \n> 3. This covers only 'deployDirectory(..)' method. What about the others?\nDone for deployDirectory, deployWAR and deployDescriptor methods.", "id": 174464, "time": "2014-04-11T09:56:50Z", "creator": "bgrh@mail.ru", "creation_time": "2014-04-11T09:56:50Z", "is_private": false}, {"count": 4, "tags": [], "creator": "bgrh@mail.ru", "attachment_id": 31511, "is_private": false, "id": 174465, "time": "2014-04-11T09:57:12Z", "bug_id": 56382, "creation_time": "2014-04-11T09:57:12Z", "text": "Created attachment 31511\nProposed patch - corrected"}, {"count": 5, "tags": [], "creator": "bgrh@mail.ru", "attachment_id": 31512, "text": "Created attachment 31512\nProposed patch - corrected 2", "id": 174466, "time": "2014-04-11T09:59:02Z", "bug_id": 56382, "creation_time": "2014-04-11T09:59:02Z", "is_private": false}, {"count": 6, "tags": [], "creator": "bgrh@mail.ru", "attachment_id": null, "id": 174665, "time": "2014-04-17T10:18:31Z", "bug_id": 56382, "creation_time": "2014-04-17T10:18:31Z", "is_private": false, "text": "Is it ok now?"}, {"count": 7, "tags": [], "creator": "violetagg@apache.org", "attachment_id": null, "is_private": false, "id": 174839, "time": "2014-04-24T13:02:17Z", "bug_id": 56382, "creation_time": "2014-04-24T13:02:17Z", "text": "Thanks for the report and the patch. This has been fixed in trunk for 8.0.6 and in 7.0.x for 7.0.54 onwards."}]