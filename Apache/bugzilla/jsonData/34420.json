[{"count": 0, "tags": [], "bug_id": 34420, "text": "HttpServletResponse.encodeURL(String url) is returning an encoded url (ie. \nadding the \";jsessionid=\" + sessionId) during the generation of the response \nof the first request.\nThe first request comes from a browser with no session cookie (normal).\nThe isEncodeable() method called by encodeURL() returns true because only a \ntest on HttpServletRequest.isRequestedSessionIdFromCookie() is made.\nThis test is necessary but not sufficient.\nThe method isRequestedSessionIdFromCookie() does not makes the difference \nbetween a request having no session cookies because the browser of the user \nrefuses the cookies and a request having no session cookies because the \nsession has just been created !\n\nThis is creating a lot of problems when the first request is cached\nor when search engines are indexing the webapp.\n\nSample JSP page showing the problem:\n\n<%@ taglib uri=\"http://java.sun.com/jsp/jstl/core\" prefix=\"c\" %>\n<c:url var=\"test\" value=\"/test.jsp\"/>\n<html>\n   <head>\n      <title>encodeURL test</title>\n   </head>\n   <body>\n      <h1>encodeURL test</h1>\n      <p>\n         Link: <a href=\"${test}\">click here</a>\n      </p>\n   </body>\n</html>", "id": 73569, "time": "2005-04-12T16:19:10Z", "creator": "laurent.dauvilaire@atosorigin.com", "creation_time": "2005-04-12T16:19:10Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 34420, "text": "If you want to discuss a behavior which is intentional, try tomcat-user or\ntomcat-dev (however, there's no development issue to discuss, really).", "id": 73571, "time": "2005-04-12T17:09:03Z", "creator": "remm@apache.org", "creation_time": "2005-04-12T17:09:03Z", "is_private": false, "attachment_id": null}]