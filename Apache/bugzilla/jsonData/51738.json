[{"count": 0, "tags": [], "bug_id": 51738, "text": "I am sending a HTTP Request sampler together with a HTTP Header Manager, which Accept-Encoding has: gzip,deflate.\n\nThe responses are sent deflated from the web server, and I use to perform the deflation of responses by hand with a post processor in order to report the right number of bytes, and also display the decompressed text in the tree result listener, but in version 2.5 this mechanism is not working anymore.\n\nThe post processor which uses beanshell for inflating the response is not working anymore, the code is the following:\n\ncompressSize = prev.getBytes();\ndecompresser = new java.util.zip.Inflate(true);\ndecompresser.setInput(prev.getResponseData(), 0, prev.getBytes());\nresult = new byte[LARGE_ARRAY];\nresultLength = decompresser.inflate(result);\ndecompresser.end();\n\noutputString = new String(result,0,resultLength, \"UTF-8\");\nprev.setResponseData(outputString, \"UTF-8\");\nprev.setBytes(compressSize);\n\nIn the tree listener everything looks compressed instead of readable text.\n\nHelp is needed to make this backwards compatible.", "id": 148886, "time": "2011-08-29T13:23:16Z", "creator": "herminio.vazquez@humint.eu", "creation_time": "2011-08-29T13:23:16Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 51738, "text": "Since 2.5, JMeter has a new behavior for compressed response.\nhttp://jakarta.apache.org/jmeter/changes.html\nThe HTTP Sampler can now report the size of a request before decompression. \n\nYou can change this, in jmeter.properties, section:\n\n# Network response size calculation method\n# Use real size: number of bytes for response body return by webserver\n# (i.e. the network bytes received for response)\n# if set to false, the (uncompressed) response data size will used (default before 2.5)\n# Include headers: add the headers size in real size\n#sampleresult.getbytes.body_real_size=true\n#sampleresult.getbytes.headers_size=true\n\nPlease use jmeter-user list to ask question before declare a ask/bug.", "id": 148912, "time": "2011-08-29T21:28:12Z", "creator": "milamber@apache.org", "creation_time": "2011-08-29T21:28:12Z", "is_private": false, "attachment_id": null}]