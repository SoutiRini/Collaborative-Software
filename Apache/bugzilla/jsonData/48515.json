[{"count": 0, "attachment_id": null, "bug_id": 48515, "text": "LDAPConnectionTimeout Directive not working in case, if primary ldap goes down or unreachable or network time out from isp, then it not forward authentication request or switch to secondary ldap.\n\nI can try to use this directive but it not working\n\nLDAPConnectionTimeout 4\n\nAuthLDAPURL \"ldap://ldap1.mydomain.com dap2.mydomain.com/dc=mydomain,dc=com?uid??\"\n\nAs above i defined two ldap hosts, ldap1 is primary and ldap2 is secondary so as per this directive if ldap1 is down or unreachable then it should switch to ldap2 after desire define seconds like above i define 4 seconds.\n\nKindly test it and suggest its bug or require some additional parameter.\n\nThanks", "id": 133461, "time": "2010-01-09T09:45:36Z", "creator": "muzammel.linux@gmail.com", "creation_time": "2010-01-09T09:45:36Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of bug 48505 ***", "id": 133462, "time": "2010-01-09T09:53:13Z", "bug_id": 48515, "creation_time": "2010-01-09T09:53:13Z", "is_private": false}, {"count": 2, "tags": [], "creator": "muzammel.linux@gmail.com", "text": "\n(In reply to comment #1)\n> \n> *** This bug has been marked as a duplicate of bug 48505 ***\n\nHow it resolved :( , with out any info, its dishearted me, either i waste my time ? , if its working then please give a proof, or guide me where i wrong. Its not good, you just changed the status, i am now reopened it again and assume, to discuss in professional way.\n\nThanks", "id": 133465, "time": "2010-01-09T10:34:35Z", "bug_id": 48515, "creation_time": "2010-01-09T10:34:35Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "muzammel.linux@gmail.com", "attachment_id": null, "text": "i can found this on apache docs url\n\nhttp://httpd.apache.org/docs/2.2/mod/mod_ldap.html#ldapcacheentries\n\nLDAPConnectionTimeout is only available when the LDAP client library linked with the server supports the LDAP_OPT_NETWORK_TIMEOUT option, and the ultimate behavior is dictated entirely by the LDAP client library.\n\nSo i have a now doubt on it, but i install all of ldap packages on apache server with rpm\n\npython-ldap-2.3.6-1.fc11.i586\napr-util-ldap-1.3.9-1.fc11.i586\nnss_ldap-264-2.fc11.i586\nopenldap-2.4.15-6.fc11.i586\nopenldap-clients-2.4.15-6.fc11.i586\nphp-ldap-5.2.11-2.fc11.i586\nmod_authz_ldap-0.26-12.i586\nopenldap-devel-2.4.15-6.fc11.i586\n\ncan you please suggest how i can verify LDAP_OPT_NETWORK_TIMEOUT option ?\n\nThanks", "id": 133467, "time": "2010-01-09T11:27:35Z", "bug_id": 48515, "creation_time": "2010-01-09T11:27:35Z", "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 48515, "text": "Don't create duplicate bugs for the same issue and put information in both.\n\n*** This bug has been marked as a duplicate of bug 48505 ***", "id": 133468, "time": "2010-01-09T11:30:29Z", "creator": "covener@gmail.com", "creation_time": "2010-01-09T11:30:29Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "text": "(In reply to comment #4)\n> Don't create duplicate bugs for the same issue and put information in both.\n> \n> *** This bug has been marked as a duplicate of bug 48505 ***\n\nOk, but please reply me and help if its not a bug. I assume some comments on it.", "attachment_id": null, "bug_id": 48515, "id": 133470, "time": "2010-01-09T11:35:56Z", "creator": "muzammel.linux@gmail.com", "creation_time": "2010-01-09T11:35:56Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 48515, "attachment_id": null, "text": "(In reply to comment #5)\n> (In reply to comment #4)\n> > Don't create duplicate bugs for the same issue and put information in both.\n> > \n> > *** This bug has been marked as a duplicate of bug 48505 ***\n> \n> Ok, but please reply me and help if its not a bug. I assume some comments on\n> it.\n\nClosing. it\n\nOpen it mistakely i am now in touch with Mr Eric on users mailing list.\n\nThanks for guidance.", "id": 133472, "time": "2010-01-09T12:24:29Z", "creator": "muzammel.linux@gmail.com", "creation_time": "2010-01-09T12:24:29Z", "is_private": false}, {"count": 7, "tags": [], "creator": "sf@sfritsch.de", "attachment_id": null, "text": "I think the problem is that LDAPConnectionTimeout really affects only the timeout for creating the tcp connection. If an existing connection to a failed LDAP server is reused, LDAPConnectionTimeout has no influence whatsoever (at least with openldap).\n\nWhat would be needed is a way to set the LDAP op timeout. I think I have some partially working patch for this somewhere. I will see if I can get it into shape.", "id": 133473, "time": "2010-01-09T12:40:23Z", "bug_id": 48515, "creation_time": "2010-01-09T12:40:23Z", "is_private": false}, {"count": 8, "tags": [], "creator": "muzammel.linux@gmail.com", "attachment_id": null, "text": "(In reply to comment #7)\n> I think the problem is that LDAPConnectionTimeout really affects only the\n> timeout for creating the tcp connection. If an existing connection to a failed\n> LDAP server is reused, LDAPConnectionTimeout has no influence whatsoever (at\n> least with openldap).\n> \n> What would be needed is a way to set the LDAP op timeout. I think I have some\n> partially working patch for this somewhere. I will see if I can get it into\n> shape.\n\nRight, can u please guide me how can i make effective with apache or its a bug that LDAPConnectionTimeout directive not working properly ?. I have only this problem that if ldap1 down or unreachable apache still trying to connect with ldap1 not forward the request to ldap2.", "id": 133474, "time": "2010-01-09T12:55:31Z", "bug_id": 48515, "creation_time": "2010-01-09T12:55:31Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 48515, "attachment_id": null, "text": "Muzi, do you only have this problem when you let apache establish connections to server1 before simulating it going down?", "id": 133475, "time": "2010-01-09T13:27:59Z", "creator": "covener@gmail.com", "creation_time": "2010-01-09T13:27:59Z", "is_private": false}, {"count": 10, "tags": [], "text": "(In reply to comment #9)\n> Muzi, do you only have this problem when you let apache establish connections\n> to server1 before simulating it going down?\n\nNo, let me explain \n\nI have two ldap servers, like ldap1 (master) and ldap2 (slave), i want if ldap1 is down/unreachable, then apache use ldap2 for authentication, \n\ncurrently failover works only if ldap1 is up and pinging but ldap service is not running on it, then it immediately forward request to ldap2, but it not works if ldap1 is down/unreachable/network timeout from isp, then apache still trying to connect with ldap1 and not forward requests to ldap2. \n\nSo as per docs i use the ldapconnectiontimeout directive which also not helpful, so please suggest.\n\nThanks", "attachment_id": null, "bug_id": 48515, "id": 133476, "time": "2010-01-09T13:33:48Z", "creator": "muzammel.linux@gmail.com", "creation_time": "2010-01-09T13:33:48Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 48515, "attachment_id": null, "text": "(In reply to comment #7)\n> I think the problem is that LDAPConnectionTimeout really affects only the\n> timeout for creating the tcp connection. If an existing connection to a failed\n> LDAP server is reused, LDAPConnectionTimeout has no influence whatsoever (at\n> least with openldap).\n> \n> What would be needed is a way to set the LDAP op timeout. I think I have some\n> partially working patch for this somewhere. I will see if I can get it into\n> shape.\n\nHi Stephin\n\nCan you please tell me more, how i can enable LDAP op timeout, as you above mentioned, as i think openldap client library already compile with it, i am using standard fc11 rpm, or you will currently work on it that apache will support this after you will fix ?. I appreciate your and Mr Eric support. \n\nThanks", "id": 133513, "time": "2010-01-11T10:29:07Z", "creator": "muzammel.linux@gmail.com", "creation_time": "2010-01-11T10:29:07Z", "is_private": false}, {"count": 12, "tags": [], "creator": "muzammel.linux@gmail.com", "attachment_id": null, "text": "I got the issue and i resolved it successfully :)\n\nNeed to define only NETWORK_TIMEOUT option in ldap client so it redirects automatically request to ldap2 if ldap1 is down.\n\nMuzi", "id": 133517, "time": "2010-01-11T11:50:48Z", "bug_id": 48515, "creation_time": "2010-01-11T11:50:48Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 48515, "text": "The timeout I meant would correspond to the TIMEOUT option in ldap.conf (for OpenLDAP). There is currently no way to set it in Apache.\n\n(In reply to comment #12)\n> I got the issue and i resolved it successfully :)\n> \n> Need to define only NETWORK_TIMEOUT option in ldap client so it redirects\n> automatically request to ldap2 if ldap1 is down.\n\nOut of interest: Which value for NETWORK_TIMEOUT worked for you?", "id": 133523, "time": "2010-01-11T14:49:55Z", "creator": "sf@sfritsch.de", "creation_time": "2010-01-11T14:49:55Z", "is_private": false, "attachment_id": null}, {"count": 14, "attachment_id": null, "bug_id": 48515, "text": "(In reply to comment #13)\n> The timeout I meant would correspond to the TIMEOUT option in ldap.conf (for\n> OpenLDAP). There is currently no way to set it in Apache.\n> \n> (In reply to comment #12)\n> > I got the issue and i resolved it successfully :)\n> > \n> > Need to define only NETWORK_TIMEOUT option in ldap client so it redirects\n> > automatically request to ldap2 if ldap1 is down.\n> \n> Out of interest: Which value for NETWORK_TIMEOUT worked for you?\n\nApache works with ldap client libraries, its works 4 me. I use 4second delay.\n\nNETWORK_TIMEOUT 4", "id": 134246, "time": "2010-02-04T14:10:09Z", "creator": "muzammel.linux@gmail.com", "creation_time": "2010-02-04T14:10:09Z", "tags": [], "is_private": false}]