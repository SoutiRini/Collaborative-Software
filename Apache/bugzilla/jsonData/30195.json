[{"count": 0, "tags": [], "creator": "tony_clayton@mitel.com", "is_private": false, "text": "There are no hooks in mod_proxy to discover from what src port mod_proxy is\ninitiating a proxy connection.  This information can be useful for logging\npurposes.  I've implemented a patch for both apache-1.3.31 and apache-2.0 HEAD\nthat accomplishes this.\n\nHere's another example of how this could be useful:\n\nI want to allow CONNECT requests to localhost on port 5000, for proxying\nprotocol P over port 80.  Application 'MyAPP' listens on port 5000 for protocol\nP.  I want MyAPP to know the real source IP/Port that the connection came in on,\nbut MyAPP and mod_proxy don't know about each other at all.  The only\npseudo-unique shared key between them is the source port used by mod_proxy to\ninitiate the connection.  If I could run a PerlCleanupHandler that will take the\n\"proxy_source_port\" from r->notes and store it in a database along with the\nclient_source_port and client_source_ip, then MyAPP could read this from the\ndatabase and retrieve the client_source_port and client_source_ip.", "id": 60836, "time": "2004-07-19T22:00:59Z", "bug_id": 30195, "creation_time": "2004-07-19T22:00:59Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 30195, "attachment_id": 12171, "id": 60837, "time": "2004-07-19T22:02:13Z", "creator": "tony_clayton@mitel.com", "creation_time": "2004-07-19T22:02:13Z", "is_private": false, "text": "Created attachment 12171\napache_1.3.31-modproxy_src_port_note.patch"}, {"count": 2, "attachment_id": 12172, "bug_id": 30195, "text": "Created attachment 12172\napache-2.x-modproxy_src_port_note.patch", "id": 60838, "time": "2004-07-19T22:02:43Z", "creator": "tony_clayton@mitel.com", "creation_time": "2004-07-19T22:02:43Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "I wrote this patch for apache-1.3.31, and it works well for me.  \n\nThe apache-2.x patch below is completely untested, and in fact broken.  It will\nneed some reworking to fit into the apache-2.x stream.  Sorry :(\n\nI'll wait to hear from the maintainers before doing any more work here.", "attachment_id": null, "id": 60839, "creator": "tony_clayton@mitel.com", "time": "2004-07-19T22:12:05Z", "bug_id": 30195, "creation_time": "2004-07-19T22:12:05Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 30195, "attachment_id": null, "id": 148432, "time": "2011-08-05T18:36:08Z", "creator": "sf@sfritsch.de", "creation_time": "2011-08-05T18:36:08Z", "is_private": false, "text": "fixed in trunk in r1154342"}, {"count": 5, "tags": [], "creator": "sf@sfritsch.de", "attachment_id": null, "text": "fixed in 2.4.1", "id": 154175, "time": "2012-02-26T16:34:52Z", "bug_id": 30195, "creation_time": "2012-02-26T16:34:52Z", "is_private": false}]