[{"count": 0, "tags": [], "creator": "fcalfo@yahoo.com", "is_private": false, "text": "We started receiving this error after our AIX server was upgraded from 5.2 to \n5.3\n\nFrom a discussion about this on the JSch forums at: \nhttp://sourceforge.net/mailarchive/forum.php?\nforum_id=12628&max_rows=25&style=nested&viewmonth=200412\nit seems like it's related to differences between OpenSSH 3.4 and 3.9\n\nThe patch described in this post fixed our problem so it seemed like something \nthat might be good for the official Ant release.\n\nhttp://www.openbsd.org/cgi-bin/cvsweb/src/usr.bin/ssh/scp.c.diff?\nr1=1.113&r2=1.114\n\n\ndiff -Naur apache-ant-\n1.6.2/src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessage.java \napache-ant-\n1.6.2.new/src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessage.java\n--apache-ant-\n1.6.2/src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessage.java\n\tFri Jul 16 00:57:40 2004\n+++ apache-ant-\n1.6.2.new/src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessage.java\n\tSat Dec 18 05:51:39 2004\n@@ -112,7 +112,7 @@\n     }\n \n     private void doMultipleTransfer() throws IOException, JSchException {\n-        Channel channel = openExecChannel(\"scp -d -t \" + remotePath);\n+        Channel channel = openExecChannel(\"scp -r -d -t \" + remotePath);\n         try {\n             OutputStream out = channel.getOutputStream();\n             InputStream in = channel.getInputStream();\n\n\nHere's the build target that we encountered the error with:\n  <target name=\"send\" depends=\"fix\">\n    <scp todir=\"${remote.path}\" trust=\"true\"\n      keyfile=\"${key.filepath}\" passphrase=\"${key.passphrase}\">\n      <fileset dir=\"${src}\">\n        <include name=\"build.sh\" />\n        <include name=\"Makefile\" />\n      \t<include name=\"drop/*.*\" />\n      \t<include name=\"schema*/**/*.*\" />\n      \t<include name=\"data/**/*.*\" />\n      </fileset>\n    </scp>\n  </target>\n\nWe're running the build script on a W2K PC, transfering files to an AIX 5.3 \nserver\n\nThanks!", "id": 88974, "time": "2006-05-09T20:28:38Z", "bug_id": 39536, "creation_time": "2006-05-09T20:28:38Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 39536, "is_private": false, "text": "(In reply to comment #0)\n> We started receiving this error after our AIX server was upgraded from 5.2 to \n> 5.3\n> \n> From a discussion about this on the JSch forums at: \n> http://sourceforge.net/mailarchive/forum.php?\n> forum_id=12628&max_rows=25&style=nested&viewmonth=200412\n> it seems like it's related to differences between OpenSSH 3.4 and 3.9\n> \n> The patch described in this post fixed our problem so it seemed like something \n> that might be good for the official Ant release.\n...\n\nThat patch has been already applied[1] to SVN trunk.\nPlease try recent nightly build.\n\n\n[1]\nhttp://svn.apache.org/viewcvs.cgi/ant/core/trunk/src/main/org/apache/tools/ant/taskdefs/optional/ssh/ScpToMessage.java?rev=277253&r1=277184&r2=277253", "id": 88976, "time": "2006-05-10T03:34:32Z", "creator": "ymnk@jcraft.com", "creation_time": "2006-05-10T03:34:32Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "mbenson@apache.org", "text": "after checking, please report here and change status from NEEDINFO as appropriate.\n\nThanks,\nMatt", "id": 88994, "time": "2006-05-10T13:58:29Z", "bug_id": 39536, "creation_time": "2006-05-10T13:58:29Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "fcalfo@yahoo.com", "text": "(In reply to comment #2)\n> after checking, please report here and change status from NEEDINFO as \nappropriate.\n> Thanks,\n> Matt\n\nOk - thanks - is there a tracking number for this patch so I can detect it in \nthe next production release ?  Is this a duplicate of another bug ?", "id": 89050, "time": "2006-05-11T18:11:58Z", "bug_id": 39536, "creation_time": "2006-05-11T18:11:58Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "mbenson@apache.org", "is_private": false, "text": "It is a duplicate, and was actually fixed for version 1.6.3.  1.6.3 and 1.6.4\nhad showstopper bugs in them, but if you use 1.6.5 you should be in good shape.", "id": 89054, "time": "2006-05-11T19:13:25Z", "bug_id": 39536, "creation_time": "2006-05-11T19:13:25Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 39536, "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 31939 ***", "id": 89055, "time": "2006-05-11T19:13:37Z", "creator": "mbenson@apache.org", "creation_time": "2006-05-11T19:13:37Z", "attachment_id": null}]