[{"count": 0, "tags": [], "text": "Attempt to compile httpd 2.4.7 results in the following : \n\n.\n.\n.\ngmake[3]: Entering directory `/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/slotmem'\nBuilding shared: mod_slotmem_shm.la\ngmake[4]: Entering directory `/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/slotmem'\n/usr/local/build-1/libtool --silent --mode=compile /opt/solarisstudio12.3/bin/cc -D_STDC_C99=    -errfmt=error -erroff=%none -errshort=full -xstrconst -xildoff -m64 -xmemalign=8s -xnolibmil -Xa -xcode=pic32 -xregs=no%appl -xlibmieee -mc -g -xs -ftrap=%none -Qy -xbuiltin=%none -xdebugformat=dwarf -xunroll=1 -xtarget=ultraT2 -xcache=8/16/4:4096/64/16 -D_TS_ERRNO -D_POSIX_PTHREAD_SEMANTICS -D_LARGEFILE64_SOURCE    -DSOLARIS2=10 -D_REENTRANT  -I/usr/local/include -I/usr/local/ssl/include -D_TS_ERRNO -D_POSIX_PTHREAD_SEMANTICS -D_LARGEFILE64_SOURCE   -I. -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/os/unix -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/include -I/usr/local/include/apr-1 -I/usr/local/ssl/include -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/aaa -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/cache -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/core -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/database -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/filters -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/ldap -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/server -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/loggers -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/lua -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/proxy -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/session -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/ssl -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/test -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/server -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/arch/unix -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/dav/main -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/generators -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/mappers -I/usr/local/include -prefer-pic -c mod_slotmem_shm.c && touch mod_slotmem_shm.slo\n\"mod_slotmem_shm.c\", line 181: error: undefined symbol: APR_MD5_DIGESTSIZE\n\"mod_slotmem_shm.c\", line 204: warning: implicit function declaration: apr_md5\n\"mod_slotmem_shm.c\", line 223: error: undefined symbol: APR_MD5_DIGESTSIZE\ncc: acomp failed for mod_slotmem_shm.c\ngmake[4]: *** [mod_slotmem_shm.slo] Error 1\ngmake[4]: Leaving directory `/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/slotmem'\ngmake[3]: *** [shared-build-recursive] Error 1\ngmake[3]: Leaving directory `/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/slotmem'\ngmake[2]: *** [shared-build-recursive] Error 1\ngmake[2]: Leaving directory `/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules'\ngmake[1]: *** [shared-build-recursive] Error 1\ngmake[1]: Leaving directory `/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001'\ngmake: *** [all-recursive] Error 1\nnode002$ \n\n\nThe required symbols are not defined anywhere in the sources : \n\nnode002$ find . -type f | xargs grep \"APR_MD5_DIGESTSIZE\" | cut -f1 -d\\: | sort -u\n./docs/manual/developer/modguide.html.en\n./modules/aaa/mod_auth_digest.c\n./modules/slotmem/mod_slotmem_shm.c\n./modules/ssl/mod_ssl.c\n./modules/ssl/ssl_engine_kernel.c\n./server/util_md5.c\n\nWhat we need is in apr_md5.h from apr-util-1.5.3 : \n\nnode002$ find /usr/local/include -type f | xargs grep \"APR_MD5_DIGESTSIZE\" | cut -f1 -d\\: | sort -u\n/usr/local/include/apr-1/apr_md5.h\n\n\nThis simple include solves the problem if we have -I/usr/local/include/apr-1 add to the compile : \n\nnode002$ diff mod_slotmem_shm.c mod_slotmem_shm.c_backup\n25d24\n< #include  \"apr_md5.h\"\n\n\nnode002$ cd /usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/slotmem\nnode002$ /opt/solarisstudio12.3/bin/cc -D_STDC_C99= -errfmt=error -erroff=%none \\\n> -errshort=full -xstrconst -xildoff -m64 -xmemalign=8s -xnolibmil -Xa -xcode=pic32 \\\n> -xregs=no%appl -xlibmieee -mc -g -xs -ftrap=%none -Qy -xbuiltin=%none -xdebugformat=dwarf \\\n> -xunroll=1 -xtarget=ultraT2 -xcache=8/16/4:4096/64/16 -D_TS_ERRNO -D_POSIX_PTHREAD_SEMANTICS \\                    \n> -D_LARGEFILE64_SOURCE -DSOLARIS2=10 -D_REENTRANT -D_TS_ERRNO \\\n> -I/usr/local/include -I/usr/local/ssl/include -I/usr/local/include/apr-1 \\\n> -I. -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/os/unix \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/include -I/usr/local/include/apr-1 -I/usr/local/ssl/include \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/aaa \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/cache \\\n>  -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/core \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/database \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/filters \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/ldap \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/server \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/loggers \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/lua \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/proxy \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/session \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/ssl \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/test \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/server \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/arch/unix \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/dav/main \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/generators \\\n> -I/usr/local/build/httpd-2.4.7_SunOS5.10_sparcv9.001/modules/mappers \\\n> -I/usr/local/include -prefer-pic -H -c mod_slotmem_shm.c \n/usr/local/include/ap_slotmem.h\n        /usr/local/include/httpd.h\n                /usr/local/include/ap_config.h\n                        /usr/local/include/ap_hooks.h\n                                /usr/local/include/apr-1/apr.h\n                                        /usr/include/sys/types.h\n                                                /usr/include/sys/feature_tests.h\n                                                        /usr/include/sys/ccompile.h\n                                                        /usr/include/sys/isa_defs.h\n                                                /usr/include/sys/machtypes.h\n                                                /usr/include/sys/int_types.h\n                                                /usr/include/sys/select.h\n                                                        /usr/include/sys/time_impl.h\n                                                        /usr/include/sys/time.h\n                                                                /usr/include/sys/types.h\n                                                                /usr/include/time.h\n                                                                        /usr/include/iso/time_iso.h\n                                                                /usr/include/sys/select.h\n                                        /usr/include/sys/socket.h\n                                                /usr/include/sys/uio.h\n                                                /usr/include/sys/socket_impl.h\n                                                        /usr/include/sys/un.h\n                                                        /usr/include/net/if_dl.h\n                                                /usr/include/sys/netconfig.h\n                                                /usr/include/netinet/in.h\n                                                        /usr/include/sys/stream.h\n                                                                /usr/include/sys/vnode.h\n                                                                        /usr/include/sys/t_lock.h\n                                                                                /usr/include/sys/machlock.h\n                                                                                /usr/include/sys/param.h\n                                                                                        /usr/include/sys/unistd.h\n                                                                                /usr/include/sys/mutex.h\n                                                                                /usr/include/sys/rwlock.h\n                                                                                /usr/include/sys/semaphore.h\n                                                                                /usr/include/sys/condvar.h\n                                                                        /usr/include/sys/rwstlock.h\n                                                                                /usr/include/sys/ksynch.h\n                                                                        /usr/include/sys/cred.h\n                                                                        /usr/include/sys/resource.h\n                                                                        /usr/include/vm/seg_enum.h\n                                                                        /usr/include/sys/kstat.h\n                                                                        /usr/include/sys/kmem.h\n                                                                                /usr/include/sys/vmem.h\n                                                                /usr/include/sys/poll.h\n                                                                /usr/include/sys/strmdep.h\n                                                                /usr/include/sys/model.h\n                                                                /usr/include/sys/strft.h\n                                                        /usr/include/sys/byteorder.h\n                                        /usr/include/stdint.h\n                                                /usr/include/sys/stdint.h\n                                                        /usr/include/sys/int_limits.h\n                                                        /usr/include/sys/int_const.h\n                                        /usr/include/sys/wait.h\n                                                /usr/include/sys/siginfo.h\n                                                        /usr/include/sys/machsig.h\n                                                /usr/include/sys/procset.h\n                                                        /usr/include/sys/signal.h\n                                                                /usr/include/sys/iso/signal_iso.h\n                                        /usr/include/limits.h\n                                                /usr/include/iso/limits_iso.h\n                                /usr/local/include/apr-1/apr_hooks.h\n                                        /usr/local/include/apr-1/apu.h\n                                        /usr/local/include/apr-1/apr_tables.h\n                                                /usr/local/include/apr-1/apr_pools.h\n                                                        /usr/local/include/apr-1/apr_errno.h\n                                                                /usr/include/errno.h\n                                                                        /usr/include/sys/errno.h\n                                                        /usr/local/include/apr-1/apr_general.h\n                                                                /usr/local/include/apr-1/apr_pools.h\n                                                                /usr/include/signal.h\n                                                                        /usr/include/iso/signal_iso.h\n                                                        /usr/local/include/apr-1/apr_want.h\n                                                                /usr/include/string.h\n                                                                        /usr/include/iso/string_iso.h\n                                                        /usr/local/include/apr-1/apr_allocator.h\n                                                                /usr/local/include/apr-1/apr_want.h\n                                                                /usr/local/include/apr-1/apr_thread_mutex.h\n                                                /usr/include/stdarg.h\n                                                        /usr/include/iso/stdarg_iso.h\n                                                                /usr/include/sys/va_impl.h\n                                                                        /usr/include/sys/va_list.h\n                                                        /usr/include/iso/stdarg_c99.h\n                                /usr/local/include/apr-1/apr_optional_hooks.h\n                        /usr/local/include/os.h\n                                /usr/local/include/ap_config.h\n                        /usr/local/include/ap_config_auto.h\n                        /usr/local/include/ap_config_layout.h\n                        /usr/local/include/apache_noprobes.h\n                /usr/local/include/ap_mmn.h\n                /usr/local/include/ap_release.h\n                /usr/local/include/apr-1/apr_time.h\n                /usr/local/include/apr-1/apr_network_io.h\n                        /usr/local/include/apr-1/apr_file_io.h\n                                /usr/local/include/apr-1/apr_file_info.h\n                                        /usr/local/include/apr-1/apr_user.h\n                                /usr/local/include/apr-1/apr_inherit.h\n                                /usr/local/include/apr-1/apr_want.h\n                                        /usr/include/stdio.h\n                                                /usr/include/iso/stdio_iso.h\n                                                        /usr/include/stdio_tag.h\n                                                        /usr/include/stdio_impl.h\n                                                /usr/include/iso/stdio_c99.h\n                /usr/local/include/apr-1/apr_buckets.h\n                        /usr/local/include/apr-1/apr_mmap.h\n                                /usr/local/include/apr-1/apr_ring.h\n                /usr/local/include/apr-1/apr_poll.h\n                /usr/local/include/apr-1/apr_thread_proc.h\n                /usr/local/include/ap_regex.h\n                /usr/include/stdlib.h\n                        /usr/include/iso/stdlib_iso.h\n                        /usr/include/iso/stdlib_c99.h\n                /usr/local/include/apr-1/apr_uri.h\n        /usr/local/include/http_config.h\n                /usr/local/include/util_cfgtree.h\n        /usr/local/include/http_log.h\n                /usr/include/syslog.h\n                        /usr/include/sys/syslog.h\n        /usr/local/include/ap_provider.h\n        /usr/local/include/apr-1/apr_strings.h\n                /usr/local/include/apr-1/apr_want.h\n        /usr/local/include/apr-1/apr_shm.h\n        /usr/local/include/apr-1/apr_global_mutex.h\n                /usr/local/include/apr-1/apr_proc_mutex.h\n        /usr/include/unistd.h\n/usr/local/include/apr-1/apr_md5.h\n        /usr/local/include/apr-1/apr_xlate.h\n/usr/local/include/http_main.h\n        /usr/local/include/apr-1/apr_optional.h\n/usr/local/include/unixd.h\n        /usr/local/include/ap_listen.h\n        /usr/include/pwd.h\n        /usr/include/grp.h\n        /usr/include/sys/ipc.h\n/usr/include/sys/shm.h\nnode002$ \n\nPerhaps I missed a configure option or I need to manually ensure that \nthe apr headers from /usr/local/include/apr-1 are found ? \n\nDennis", "attachment_id": null, "id": 171654, "creator": "dclarke@blastwave.org", "time": "2013-12-08T22:23:19Z", "bug_id": 55861, "creation_time": "2013-12-08T22:23:19Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 55861, "attachment_id": null, "id": 171655, "time": "2013-12-08T23:19:27Z", "creator": "dclarke@blastwave.org", "creation_time": "2013-12-08T23:19:27Z", "is_private": false, "text": "well now I feel silly ... turns out all we need is this : \n\nnode002$ echo $CPPFLAGS\n-I/usr/local/include -I/usr/local/ssl/include -I/usr/local/include/apr-1 -D_TS_ERRNO -D_POSIX_PTHREAD_SEMANTICS -D_LARGEFILE64_SOURCE\n\neverything just compiles as expected."}]