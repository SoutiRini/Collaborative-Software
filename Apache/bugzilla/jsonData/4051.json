[{"count": 0, "tags": [], "text": "Interesting things noted when downloading and comparing Tomcat 4.0 to Tomcat-\n4.0.1-b1 (the tar.gz image of each one) when running on Linux (RH 7.0) platform:\n\n- several files are in DOS format in the 4.0.1-b1 package, but in normal unix \nformat in the 4.0 package. \n  (for example server.xml, web.xml, etc)\n\n- Tomcat 4.0 vs Tomcat 4.0.1-b1, out of the box, no changes made to any files \nafter untaring both packages(on Linux):\n\n            jdk1.3.1         jdk1.3.1_01         jdk1.4b2\n          \n4.0           OK                OK                   OK\n\n4.0.1b1      SEGDUMP         SEGDUMP                 OK\n\n\nOK = Can get the welcome screen via http://hostname:8080\n\nSegDump = get a segmentation dump during startup.  Seg dump wasn't seen from \nthe terminal where startup.sh command was started, so the actual java command \nwas picked out of the script and run by hand from command line:\n\n/u02/jdk1.3.1/bin/java -\nclasspath ./../bin/bootstrap.jar:/u02/jdk1.3.1/lib/tools.jar -\nDcatalina.base=./.. -Dcatalina.home=./.. org.apache.catalina.startup.Bootstrap \nstart\nSegmentation fault\n\n/u02/j2sdk1.4.0/bin/java -\nclasspath ./../bin/bootstrap.jar:/u02/j2sdk1.4.0/lib/tools.jar -\nDcatalina.base=./.. -Dcatalina.home=./.. org.apache.catalina.startup.Bootstrap \nstart\nStarting service Tomcat-Standalone\nApache Tomcat/4.0.1-b1\nStarting service Tomcat-Apache\nApache Tomcat/4.0.1-b1", "attachment_id": null, "id": 6507, "creator": "apahce_bugzilla@jonchristiansen.com", "time": "2001-10-09T10:07:21Z", "bug_id": 4051, "creation_time": "2001-10-09T10:07:21Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "remm@apache.org", "is_private": false, "count": 1, "id": 6518, "time": "2001-10-09T15:14:57Z", "bug_id": 4051, "creation_time": "2001-10-09T15:14:57Z", "text": "The JDKs before 1.4 are not working very well on recent Linux kernels, except \nif you use some special parameter which I don't remember.\n\nLinux users could provide additional feedback on this. I don't see any \nsignificant changes which would cause this. Maybe by looking at the logs you \ncould get some information on when it does crash.\n\nThe packaging was dne on Windows, so that could explain the eol problems in the \nconfig files, which I'll attempt to fix in the final.\n\nI'll leave the bug open waiting for more feedbacks, but overall Linux 2.4 users \nwill have to upgrade to JDK 1.4 anyway."}, {"count": 2, "tags": [], "text": "Weird, the Sun Linux JDK's have always worked perfectly for me until now with \n4.0.1-b1.\n\nHere's another JDK to throw into the mix: (this one works fine with both 4.0 \nand 4.0.1-b1)\n\n$JAVA_HOME/bin/java -version\njava version \"1.3.0\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.3.0)\nClassic VM (build 1.3.0, J2RE 1.3.0 IBM build cx130-20010626 (JIT enabled: \njitc))\n\n$JAVA_HOME/bin/java -fullversion\njava full version \"J2RE 1.3.0 IBM build cx130-20010626\"", "attachment_id": null, "id": 6519, "creator": "apahce_bugzilla@jonchristiansen.com", "time": "2001-10-09T15:51:08Z", "bug_id": 4051, "creation_time": "2001-10-09T15:51:08Z", "is_private": false}, {"count": 3, "tags": [], "creator": "bojan@binarix.com", "attachment_id": null, "id": 6524, "time": "2001-10-09T18:28:41Z", "bug_id": 4051, "creation_time": "2001-10-09T18:28:41Z", "is_private": false, "text": "These are bugs in Sun's HotSpot 1.3.1 for Linux. I have filled numerous reports\nto Sun about those issues (I doesn't just happen with TC 4.0.1 - I don't even\nuse it), but they wouldn't listen since I didn't provide 'sufficient\ninformation' (they were give the full JVM crash log file).\n\nSun's JDK 1.3.0_04 doesn't have those problems to the best of my knowledge.\n\nThe problems Remy mentioned are slightly different in nature and are related to\nglibc/kernel combinations and floating stack support. The link to that bug\nreport is here:\nhttp://developer.java.sun.com/developer/bugParade/bugs/4466587.html.\n\nWho knows, the workarounds in the above bug report might actually work for you.\n\nAnyway, I don't think those things are TC bugs. Theoretically, one should be\nable to give to JVM a piece of Motorola 68k assembly code and it shouldn't\nsegfault if there are no bugs in it ;-)"}, {"count": 4, "tags": [], "text": "THANK YOU!!!!\n\nThanks for passing on the URL to the bug in the Sun's Linux JVM you were \ntalking about.  \n\nFrom there, I found the workaround: ulimit -s 2048\n\nNow I can successfully run 4.0.1-b1 on RH7.0\n\nThanks again,\nJon", "is_private": false, "bug_id": 4051, "id": 6525, "time": "2001-10-09T19:03:15Z", "creator": "apahce_bugzilla@jonchristiansen.com", "creation_time": "2001-10-09T19:03:15Z", "attachment_id": null}, {"count": 5, "text": "I mark the bug as invalid. The various links and information will be added to \nthe release notes. Thanks a lot Bojan :)\n\nI would be curious to know what is the change which triggered that, though.", "bug_id": 4051, "is_private": false, "id": 6527, "time": "2001-10-09T19:27:26Z", "creator": "remm@apache.org", "creation_time": "2001-10-09T19:27:26Z", "tags": [], "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 4051, "attachment_id": null, "id": 6533, "time": "2001-10-10T02:42:31Z", "creator": "bojan@binarix.com", "creation_time": "2001-10-10T02:42:31Z", "is_private": false, "text": "Wouldn't know about TC 4.0.1, but on my systems, which are running 3.3 from CVS,\nwhen I start using part of the application that uses Dom4J, 1.3.1 and 1.3.1_01\nsegfault.\n\nIn my case (I run kernel 2.4.10 and glibc 2.2.4 from Rawhide on RH 7.0) the\nulimit -s doesn't make any difference. It still segfaults. 1.3.0_04 doesn't.\n\nIf you check the release notes for JDK 1.3.1/Linux, you find that there were\nHotSpot changes. They say mostly error handling stuff, but who can really tell.\nI guess once it becomes open source...\n\nAlthough I use Sun's JDK, I think IBM did a better job. It's faster most of the\ntime and it's rock solid on Linux."}]