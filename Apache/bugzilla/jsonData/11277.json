[{"count": 0, "tags": [], "text": "I have the following statements in a servlet to create a PDF file from FO file. \nMeanwhile, I also added a chinese font to FOP to generate a PDF file with \nchinese character.\n\n    ByteArrayOutputStream out1 = new ByteArrayOutputStream();\n    log = new ConsoleLogger(ConsoleLogger.LEVEL_WARN);  \t        \n    MessageHandler.setScreenLogger(log);\n    FileInputStream file = new FileInputStream(new File\n(\"C:\\\\eFactoring_Data\\\\ADVICE\\\\EditFinancing_AdvC_TX_tx1.xml.fo\"));\n\n    InputSource foFile = new InputSource(file);\n    foFile.setEncoding(\"UTF-8\");\n \n    Driver driver = new Driver(foFile, out1);\n    Options options = new Options(new File(\"./fo/userconfig.xml\"));\n\n    driver.setLogger(log);\n    driver.setRenderer(Driver.RENDER_PDF);\n    driver.run();\n\n***** Font in userconfig.xml *****\n<font metrics-file=\"c:\\FONTS\\MingLiU.xml\" kerning=\"yes\" embed-\nfile=\"c:\\FONTS\\mingliu.ttc\">\n    <font-triplet name=\"MingLiU\" style=\"normal\" weight=\"normal\"/>\n    <font-triplet name=\"MingLiU\" style=\"normal\" weight=\"bold\"/>\n </font>\n</fonts>\n\n\nThis servlet is works OK in J2EE server. However , when I deployed in \nwebsphere, the generated PDF seem to be corrupted and not able to view by \nAcrobat Reader. The Websphere console have about 3000 lines logged like below:\n[2002/7/30   16:11:37:625 CST] 447ecfb2 SystemOut     U illegal char value -23\n[2002/7/30   16:11:37:625 CST] 447ecfb2 SystemOut     U illegal char value -17\n[2002/7/30   16:11:37:625 CST] 447ecfb2 SystemOut     U illegal char value 120\n[2002/7/30   16:11:37:625 CST] 447ecfb2 SystemOut     U illegal char value -26\n[2002/7/30   16:11:37:625 CST] 447ecfb2 SystemOut     U illegal char value 124\n[2002/7/30   16:11:37:625 CST] 447ecfb2 SystemOut     U illegal char value -22\n[2002/7/30   16:11:37:641 CST] 447ecfb2 SystemOut     U illegal char value -21\n[2002/7/30   16:11:37:641 CST] 447ecfb2 SystemOut     U illegal char value -15\n[2002/7/30   16:11:37:641 CST] 447ecfb2 SystemOut     U illegal char value 120\n[2002/7/30   16:11:37:641 CST] 447ecfb2 SystemOut     U illegal char value -16\n[2002/7/30   16:11:37:656 CST] 447ecfb2 SystemOut     U illegal char value -98\n\n\nWhat is the problem ?\nIs FOP with additional fonts not support in websphere ?", "attachment_id": null, "bug_id": 11277, "id": 20398, "time": "2002-07-30T09:26:35Z", "creator": "davidlau@conven.com.hk", "creation_time": "2002-07-30T09:26:35Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 11277, "attachment_id": null, "text": "The output seems to come from the ASCII85Filter which encodes the compressend\ncharacter stream for PDF text into printable characters. This has nothing to do\nwith fonts or whatever. Inspection of the code doesn't turn up anything\nsispucious, and it is very unlikely that this well tested routine has a bug.\nThHerefore the most likely explanation is a bug in the JVM, check whether your\nWebSphere uses a recent conformant JVM version, or at least the same as the\nserver where your example works. Another possibility is a corrupted fop.jar,\nbut the JVM should have caught this too.", "id": 20404, "time": "2002-07-30T10:35:19Z", "creator": "j3322ptm@yahoo.de", "creation_time": "2002-07-30T10:35:19Z", "is_private": false}, {"count": 2, "tags": [], "text": "*** Bug 13927 has been marked as a duplicate of this bug. ***", "attachment_id": null, "bug_id": 11277, "id": 25946, "time": "2002-11-08T15:42:19Z", "creator": "j3322ptm@yahoo.de", "creation_time": "2002-11-08T15:42:19Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 11277, "attachment_id": null, "id": 25948, "time": "2002-11-08T15:43:34Z", "creator": "j3322ptm@yahoo.de", "creation_time": "2002-11-08T15:43:34Z", "is_private": false, "text": "*** Bug 14387 has been marked as a duplicate of this bug. ***"}, {"count": 4, "tags": [], "creator": "markusmueller@web.de", "attachment_id": null, "text": "Hi,\n\nI had the same problem when using TTF on UNIX. There are two things to \nconsider: TTF must be copied in binary mode from Win32 to UNIX, and the \nencoding of the font-metrics file must be correct. The simplest way, which \nworked fine, is to omit the encoding statement.\n\nMM", "id": 26128, "time": "2002-11-12T11:31:54Z", "bug_id": 11277, "creation_time": "2002-11-12T11:31:54Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 11277, "attachment_id": null, "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "id": 156864, "time": "2012-04-01T13:54:04Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T13:54:04Z", "is_private": false}]