[{"count": 0, "tags": [], "bug_id": 45273, "attachment_id": null, "id": 117954, "time": "2008-06-24T16:34:36Z", "creator": "anr@safira.com", "creation_time": "2008-06-24T16:34:36Z", "is_private": false, "text": "Requests handled by mod_dir are not cached. Examples below.\n\n\n1) Cached request:\n\n$ curl -s http://localhost/index.html > /dev/null\n$ curl -I http://localhost/index.html\nHTTP/1.1 200 OK\nDate: Tue, 24 Jun 2008 23:19:41 GMT\nServer: Apache/2.2.9 (Unix)\nLast-Modified: Mon, 09 Jun 2008 13:16:13 GMT\nETag: \"481a3-10c0-44f3b9d9fc140\"\nAccept-Ranges: bytes\nContent-Length: 4288\nCache-Control: max-age=120\nExpires: Tue, 24 Jun 2008 23:21:28 GMT\nAge: 13\nContent-Type: text/html\n\n\n2) Uncached request (via mod_dir):\n\n$ curl -s http://localhost/ > /dev/null\n$ curl -I http://localhost/\nHTTP/1.1 200 OK\nDate: Tue, 24 Jun 2008 23:22:39 GMT\nServer: Apache/2.2.9 (Unix)\nLast-Modified: Mon, 09 Jun 2008 13:16:13 GMT\nETag: \"481a3-10c0-44f3b9d9fc140\"\nAccept-Ranges: bytes\nContent-Length: 4288\nCache-Control: max-age=120\nExpires: Tue, 24 Jun 2008 23:24:39 GMT\nContent-Type: text/html\n\n\nSome snippets of the httpd.conf file:\n\n---------------------------------\n\n<Directory \"/var/www/html\">\n    Options Indexes FollowSymLinks\n    AllowOverride None\n    Order allow,deny\n    Allow from all\n\n    ExpiresActive On\n\n    <Files ~ \"^index.html$\">\n         ExpiresDefault A120\n    </Files>\n</Directory>\n\nCacheRoot   /var/cache/apache/\nCacheEnable disk /\nCacheDirLevels 2\nCacheDirLength 1\n\nCacheIgnoreCacheControl On\n\n<IfModule dir_module>\n    DirectoryIndex index.html\n</IfModule>\n\n---------------------------------"}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "id": 118314, "creation_time": "2008-07-06T06:21:27Z", "time": "2008-07-06T06:21:27Z", "bug_id": 45273, "text": "*** Bug 45347 has been marked as a duplicate of this bug. ***", "is_private": false}, {"count": 2, "tags": [], "creator": "hustdcy@gmail.com", "attachment_id": null, "text": "\nIn mod_dir,  used ap_internal_fast_redirect, so  CACHE_SAVE filter is not executed. \n\nmod_dir use fast_redirect only when the file is local static file. \n\n        if (rr->status == HTTP_OK\n            && (   (rr->handler && !strcmp(rr->handler, \"proxy-server\"))\n                || rr->finfo.filetype == APR_REG)) {\n            ap_internal_fast_redirect(rr, r); \n            return OK; \n        }", "id": 135164, "time": "2010-03-08T11:26:10Z", "bug_id": 45273, "creation_time": "2010-03-08T11:26:10Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 45273, "text": "\nIn mod_dir,  used ap_internal_fast_redirect, so  CACHE_SAVE filter is not executed. \n\nmod_dir use fast_redirect only when the file is local static file. \n\n        if (rr->status == HTTP_OK\n            && (   (rr->handler && !strcmp(rr->handler, \"proxy-server\"))\n                || rr->finfo.filetype == APR_REG)) {\n            ap_internal_fast_redirect(rr, r); \n            return OK; \n        }", "id": 135165, "time": "2010-03-08T11:28:01Z", "creator": "hustdcy@gmail.com", "creation_time": "2010-03-08T11:28:01Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 45273, "attachment_id": null, "id": 145762, "time": "2011-04-13T18:19:52Z", "creator": "gmillikan@t1shopper.com", "creation_time": "2011-04-13T18:19:52Z", "is_private": false, "text": "As described on duplicate Bug 51057, this bug produces a significant loss of functionality for example:\n\nThis URL is cached (because the DirectoryIndex of mod_dir is not being used):\nhttp://www.my-company.com/index.php\n\nThis URL is _not_ cached because it is using the DirectoryIndex directive:\nhttp://www.my-company.com/\n\nThe \"home page\" of a web site is frequently visited.  And it's not getting cached.  This is a significant loss of functionality mod_disk_cache is desired to provide."}, {"count": 5, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "text": "*** Bug 51057 has been marked as a duplicate of this bug. ***", "id": 145767, "time": "2011-04-13T20:41:25Z", "bug_id": 45273, "creation_time": "2011-04-13T20:41:25Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 45273, "attachment_id": null, "id": 145770, "time": "2011-04-14T02:28:42Z", "creator": "rpluem@apache.org", "creation_time": "2011-04-14T02:28:42Z", "is_private": false, "text": "This should be fixed in the latest 2.2.x release. Can you please test?"}, {"count": 7, "tags": [], "bug_id": 45273, "text": "Yes, in production release of 2.2.17 I confirm it's fixed.  I compiled from source for CentOS 5.6.\n\n---== Details ==---\n# cat /etc/*release*\nCentOS release 5.6 (Final)\n\n#uname -a \nOS: Linux 2.6.18-238.5.1.el5 #1 SMP Fri Apr 1 18:41:58 EDT 2011 x86_64\n\n# /usr/local/apache2/bin/httpd -V\nServer version: Apache/2.2.17 (Unix)\nServer built:   Apr 22 2011 21:56:30\nServer's Module Magic Number: 20051115:25\nServer loaded:  APR 1.4.2, APR-Util 1.3.10\nCompiled using: APR 1.4.2, APR-Util 1.3.10\nArchitecture:   64-bit\nServer MPM:     Prefork\n  threaded:     no\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=2\n -D HTTPD_ROOT=\"/usr/local/apache2\"\n -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\n---== Configure statement ==---\n./configure --prefix=\"/usr/local/apache2\" CFLAGS=\"-DDYNAMIC_MODULE_LIMIT=2 -DDEFAULT_PIDLOG=\\\"run/httpd.pid\\\"\" --disable-imagemap --disable-userdir --disable-asis --disable-actions --disable-authn-default --disable-authz-groupfile --disable-authz-default --disable-filter --disable-negotiation --disable-version --disable-cgi --enable-autoindex --enable-cache --enable-expires=shared --enable-disk-cache --enable-deflate --enable-headers --enable-info=shared --enable-rewrite --enable-ssl --enable-proxy --disable-proxy-balancer --disable-proxy-ftp --disable-proxy-scgi --disable-proxy-ajp --disable-proxy-balancer --enable-reqtimeout --enable-vhost-alias --enable-mime --with-mpm=prefork", "id": 145963, "time": "2011-04-22T18:53:39Z", "creator": "gmillikan@t1shopper.com", "creation_time": "2011-04-22T18:53:39Z", "is_private": false, "attachment_id": null}]