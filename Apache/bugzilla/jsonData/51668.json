[{"count": 0, "tags": [], "creator": "jglick@apache.org", "attachment_id": null, "id": 148654, "time": "2011-08-16T22:06:37Z", "bug_id": 51668, "creation_time": "2011-08-16T22:06:37Z", "is_private": false, "text": "Fails with: \"Use of the extension element 'redirect' is not allowed when the secure processing feature is set to true.\"\n\nOriginally filed under https://netbeans.org/bugzilla/show_bug.cgi?id=201022 but it turns out to apply to any environment in which there is a system security manager set.\n\nJDK 7's TransformerFactoryImpl constructor introduced:\n\n        if (System.getSecurityManager() != null) {\n            _isSecureMode = true;\n            _isNotSecureProcessing = false;\n        }\n\nwhich conflicts with <redirect:write>.\n\nSee also: http://jaxp.java.net/1.4/JAXP-Compatibility.html#JAXP_security (bug #6863312 is \"not publicly available\")"}, {"count": 1, "tags": [], "creator": "jglick@apache.org", "text": "Unfortunately just calling tfactory.setFeature(\"http://javax.xml.XMLConstants/feature/secure-processing\", false) in TraXLiaison.getFactory does not work:\n\njavax.xml.transform.TransformerConfigurationException: FEATURE_SECURE_PROCESSING: Cannot set the feature to false when security manager is present.\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.setFeature(TransformerFactoryImpl.java:417)", "id": 148655, "time": "2011-08-16T22:29:07Z", "bug_id": 51668, "creation_time": "2011-08-16T22:29:07Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 51668, "text": "Only workaround seems to be to use reflection to override the state of _isNotSecureProcessing.", "id": 148656, "time": "2011-08-16T22:55:50Z", "creator": "jglick@apache.org", "creation_time": "2011-08-16T22:55:50Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 51668, "text": "Fixed: revision 1158470", "id": 148657, "time": "2011-08-16T23:08:19Z", "creator": "jglick@apache.org", "creation_time": "2011-08-16T23:08:19Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "markuskeller@fastmail.fm", "attachment_id": null, "id": 161223, "time": "2012-08-10T09:46:18Z", "bug_id": 51668, "creation_time": "2012-08-10T09:46:18Z", "is_private": false, "text": "(In reply to comment #3)\n> Fixed: revision 1158470\n\nThis fix has NOT been shipped with Ant 1.8.3 nor 1.8.4, see e.g.\n  http://archive.apache.org/dist/ant/source/apache-ant-1.8.3-src.tar.gz\n\nThis bug is supposed to fix https://bugs.eclipse.org/bugs/show_bug.cgi?id=384757"}, {"count": 5, "attachment_id": null, "bug_id": 51668, "text": "The fix is indeed in 1.8.3; you need to see http://svn.apache.org/viewvc?view=revision&revision=1222724 from bug #52382 for the revised patch (since the change to AggregateTransformer.java was reverted).\n\nWhether this patch is \"supposed\" to fix the Eclipse bug you quote, or indeed if that bug is even related, is a question which I do not know the answer to; if you continue to have problems in Eclipse using 1.8.3+ then probably you should file a separate bug report after doing some investigation to confirm that the problem lies in Ant code.", "id": 161229, "time": "2012-08-10T12:09:58Z", "creator": "jglick@apache.org", "creation_time": "2012-08-10T12:09:58Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "text": "OK, thanks for the infos and sorry for interrupting.\n\nIt looks like this workaround is not enough to fix the bug we're seeing in Eclipse. I'll follow up there and see if there's abetter fix for the root cause in the Oracle JDK when a SecurityManager is present.", "attachment_id": null, "bug_id": 51668, "id": 161235, "time": "2012-08-10T14:10:35Z", "creator": "markuskeller@fastmail.fm", "creation_time": "2012-08-10T14:10:35Z", "is_private": false}, {"count": 7, "tags": [], "creator": "jglick@apache.org", "attachment_id": null, "id": 165663, "time": "2013-03-06T02:16:46Z", "bug_id": 51668, "creation_time": "2013-03-06T02:16:46Z", "is_private": false, "text": "(In reply to comment #6)\n> not enough to fix the bug we're seeing in Eclipse\n\nbug #54641"}, {"count": 8, "tags": [], "bug_id": 51668, "attachment_id": null, "text": "It looks as if the bug was back with JDK9-ea128, looking into it.", "id": 192726, "time": "2016-07-31T08:02:35Z", "creator": "bodewig@apache.org", "creation_time": "2016-07-31T08:02:35Z", "is_private": false}, {"count": 9, "tags": [], "creator": "bodewig@apache.org", "text": "(In reply to Stefan Bodewig from comment #8)\n> It looks as if the bug was back with JDK9-ea128, looking into it.\n\nhttps://bz.apache.org/bugzilla/show_bug.cgi?id=60060", "id": 193377, "time": "2016-08-28T17:30:08Z", "bug_id": 51668, "creation_time": "2016-08-28T17:30:08Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 51668, "attachment_id": null, "text": "CI which shows this error:\n\nhttps://builds.apache.org/view/All/job/Ant-Build-Matrix-master-Linux/lastCompletedBuild/jdk=JDK%209%20b132%20(early%20access%20build),label=Ubuntu/testReport/org.apache.tools.ant.taskdefs.optional.junit/XMLResultAggregatorTest/testFrames/", "id": 194486, "time": "2016-10-18T11:01:19Z", "creator": "jan@materne.de", "creation_time": "2016-10-18T11:01:19Z", "is_private": false}]