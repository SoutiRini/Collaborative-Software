[{"count": 0, "tags": [], "creator": "stevel@apache.org", "text": "I have a resource that generates random numbers: \nhttp://antbook.cvs.sourceforge.net/antbook/examples/sections/extending/ch18_extras/resources/src/org/antbook/resources/RandomResource.java?view=markup\n\nand a build file that compiles and tests it in one go:\n\nhttp://antbook.cvs.sourceforge.net/antbook/examples/sections/extending/ch18_extras/resources/build.xml?view=markup\n\nOne attribute is to set the generator's seed, so that it regenerates the same\nrandom stream as before, which is something I test for \n\n <target name=\"testSeed\"\n   xmlns:res=\"antlib:org.antbook.resources\"\n   depends=\"define\">\n   <loadresource property=\"set1\">\n     <res:random size=\"10\" seed=\"1\"/>\n   </loadresource>\n   <loadresource property=\"set2\">\n     <res:random size=\"10\" seed=\"1\"/>\n   </loadresource>\n   <au:assertPropertySet name=\"set1\"/>\n   <au:assertPropertyEquals name=\"set1\" value=\"${set2}\"/>\n </target>\n\nThis test works on the command line, but under antunit it fails\n\n[au:antunit] Target: testSeed  FAILED\n[au:antunit]    at line 137, column 59\n[au:antunit]    Message: Expected property 'set1' to have value\n'keqegnwrkf' but was 'pkvryxjfnf'\n[au:antunit]    took 0.008 sec\n\nI dont know what is going on here, because the unexpected value is consistent on\nevery run. It isnt random either, just either off a different seed, or the\ngenerator isnt resetting itself properly between runs, even though I create a\nnew one every time.\n\nMaybe I could add some more logging to determine internal state.", "id": 93952, "attachment_id": null, "bug_id": 40567, "creation_time": "2006-09-21T09:18:44Z", "time": "2006-09-21T09:18:44Z", "is_private": false}, {"count": 1, "tags": [], "creator": "gscokart@gmail.com", "text": "I reproduced this with the sources of 2006, but it appears to be fixed with the trunk.\n\n(Note that testCreateFileNoName of http://antbook.cvs.sourceforge.net/antbook/examples/sections/extending/ch18_extras/resources/build.xml?view=markup\nis failing, as described in bug #39960 , but that has nothing to do with this bug)", "id": 130045, "time": "2009-08-29T09:27:53Z", "bug_id": 40567, "creation_time": "2009-08-29T09:27:53Z", "is_private": false, "attachment_id": null}]