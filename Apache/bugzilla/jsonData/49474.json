[{"count": 0, "attachment_id": null, "bug_id": 49474, "is_private": false, "id": 137771, "time": "2010-06-20T09:53:20Z", "creator": "tee.bee@gmx.de", "creation_time": "2010-06-20T09:53:20Z", "tags": [], "text": "Overview:\nDue to RFC 2616 (3.6.1) a request may be chunked encoded. Moreover the chunk-size line can be extended by zero or more chunk extensions. Apache http-2 fails in processing such requests if the length of a chunk-size / -extension line exceeds 31 bytes (including CRLF).\n\nSteps to Reproduce:\n1) A chunked encoded POST request with chunk-size / -extension lines of length at most 31 bytes is handled correctly:\n    $ telnet localhost 80\n    Trying ::1...\n    Trying 127.0.0.1...\n    Connected to localhost.\n    Escape character is '^]'.\n    POST /cgi-bin/printenv HTTP/1.1\n    Host: $host\n    Connection: close\n    Transfer-Encoding: chunked\n    \n    5;ext-name=ext-val\n    01234\n    0\n    \n    HTTP/1.1 200 OK\n[...]\n\n2) However, a chunked encoded POST request a with chunk-size / -extension line of length 32 bytes or more is not processed:\n    $ telnet localhost 80\n    Trying ::1...\n    Trying 127.0.0.1...\n    Connected to localhost.\n    Escape character is '^]'.\n    POST /cgi-bin/printenv HTTP/1.1\n    Host: $host\n    Connection: close\n    Transfer-Encoding: chunked\n    \n    5;ext-name=very-long-ext-val32\n    01234\n    0\n    \nNo response.\n\nActual Results:\nThe server does not answer the request.\n\nExpected Results:\nThe server should be RFC 2616 (3.6.1) compliant and process the request.\n\nBuild Date & Platform:\n$. /httpd -V\nServer version: Apache/2.2.15 (Unix)\nServer built:   Jun 20 2010 15:03:53\nServer's Module Magic Number: 20051115:24\nServer loaded:  APR 1.4.2, APR-Util 1.3.9\nCompiled using: APR 1.4.2, APR-Util 1.3.9\nArchitecture:   32-bit\nServer MPM:     Prefork\n  threaded:     no\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=128\n -D HTTPD_ROOT=\"[...]/apache2\"\n -D SUEXEC_BIN=\"[...]/apache2/bin/suexec\"\n -D DEFAULT_PIDLOG=\"logs/httpd.pid\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_LOCKFILE=\"logs/accept.lock\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\n$uname -srvmpio\nLinux 2.6.32-22-generic #36-Ubuntu SMP Thu Jun 3 22:02:19 UTC 2010 i686 unknown unknown GNU/Linux\n\nAdditional Information:\nIt is likely that the problem could be fixed by (re-)setting\n    ctx->pos = ctx->chunk_ln;\nat the end of\n    get_remaining_chunk_line()\nin\n    httpd-2.2.15/modules/http/http_filters.c\n."}, {"count": 1, "tags": [], "text": "Good catch!  Your suggested fix works for me.  r965824", "attachment_id": null, "bug_id": 49474, "id": 138549, "time": "2010-07-20T08:24:01Z", "creator": "nick@webthing.com", "creation_time": "2010-07-20T08:24:01Z", "is_private": false}, {"count": 2, "tags": [], "text": "fixed in 2.4.1", "is_private": false, "id": 154238, "creator": "sf@sfritsch.de", "time": "2012-02-26T17:05:36Z", "bug_id": 49474, "creation_time": "2012-02-26T17:05:36Z", "attachment_id": null}]