[{"count": 0, "tags": [], "bug_id": 35536, "attachment_id": null, "text": "We are getting the following errors on our linux and windows 2000 server \nplatform. Tomcat is our web server.\n\nWe are running Borland BES 6.01 on RedHat AS 3 update 4, and the following \nerror occurs after the system running 3-4 hours, some times after 50 hours.\n\n----------------------------------------------------------------\n2005-06-27 04:05:40,760 ERROR  - Exception in acceptSocket\n\njava.lang.NullPointerException\n\n        at java.lang.System.getProperty(System.java:573)\n\n        at sun.security.action.GetPropertyAction.run(GetPropertyAction.java:66)\n\n        at java.security.AccessController.doPrivileged(Native Method)\n\n        at java.net.Socket.checkSocks(Socket.java:1396)\n\n        at java.net.Socket.setImpl(Socket.java:360)\n\n        at java.net.ServerSocket.implAccept(ServerSocket.java:443)\n\n        at java.net.ServerSocket.accept(ServerSocket.java:419)\n\n        at org.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(De\n\nfaultServerSocketFactory.java:107)\n\n        at org.apache.tomcat.util.net.PoolTcpEndpoint.acceptSocket(PoolTcpEndpoi\n\nnt.java:377)\n\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java\n\n:550)\n\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadP\n\nool.java:619)\n\n        at java.lang.Thread.run(Thread.java:534)\n\n2005-06-27 04:05:40,791 ERROR  - Caught exception executing org.apache.tomcat.ut\n\nil.net.TcpWorkerThread@15ea801, terminating thread\n\njava.lang.IllegalStateException: Terminating thread\n\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java\n\n:553)\n\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadP\n\nool.java:619)\n\n        at java.lang.Thread.run(Thread.java:534)\n\n------------------------------------------------------------------------------\nOur linux configuration:\n\n[root@iba-bessin root]# ulimit -a\ncore file size        (blocks, -c) 0\ndata seg size         (kbytes, -d) unlimited\nfile size             (blocks, -f) unlimited\nmax locked memory     (kbytes, -l) 4\nmax memory size       (kbytes, -m) unlimited\nopen files                    (-n) 65535\npipe size          (512 bytes, -p) 8\nstack size            (kbytes, -s) 512\ncpu time             (seconds, -t) unlimited\nmax user processes            (-u) 7168\nvirtual memory        (kbytes, -v) unlimited\n\n----------------------------------------------------------------\n\nOur Tomcat Configuration\n\n      <Connector acceptCount=\"100\" \nclassName=\"org.apache.coyote.tomcat4.CoyoteConnector\" connectionTimeout=\"20000\" \ndebug=\"0\" disableUploadTimeout=\"true\" enableLookups=\"true\" maxProcessors=\"75\" \nminProcessors=\"5\" port=\"8084\" redirectPort=\"8443\" useURIValidationHack=\"false\"/>", "id": 76793, "time": "2005-06-29T10:20:43Z", "creator": "huiqun.liu@ibatech.com", "creation_time": "2005-06-29T10:20:43Z", "is_private": false}, {"count": 1, "tags": [], "text": "What version of the JVM are you using?\n\nAlso, what happens to Tomcat when this error occurs?", "attachment_id": null, "id": 76811, "creator": "markt@apache.org", "time": "2005-06-29T20:42:57Z", "bug_id": 35536, "creation_time": "2005-06-29T20:42:57Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 35536, "attachment_id": null, "text": "We are using JVM  1.4.2_06 & 1.4.2_03b1\n\nWHen this error occurs, Tomcat is freezed and our Borland BES partition hangs.", "id": 76825, "time": "2005-06-30T04:20:09Z", "creator": "huiqun.liu@ibatech.com", "creation_time": "2005-06-30T04:20:09Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 35536, "attachment_id": null, "is_private": false, "id": 76858, "time": "2005-06-30T21:55:21Z", "creator": "markt@apache.org", "creation_time": "2005-06-30T21:55:21Z", "text": "Looking at the source for java.lang.System this looks like a JVM bug.\n\nSystem.getProperty() first checks if the security manager is null, and if not\ncalls checkPropertyAccess(). The problem appears to be that the security manager\n!= null when the check is done but is null by the next line when\ncheckPropertyAccess() is called.\n\nIt looks like this is possible if another thread calls calls\nSystem.setSecurityManager(null) but you would have to be really unlucky to be\nhit by this. I have searched the Tomcat code and nothing calls\nSystem.setSecurityManager() at all.\n\nSince the root cause is a JVM bug and I can't see anything that Tomcat is doing\nthat might cause this, I am going to resolve this as invalid.\n\nMy suggestion for you to progress this is:\n- raise a bug report with Sun\n- look to see if any of your webapps are setting the security manager"}]