[{"count": 0, "tags": [], "bug_id": 4399, "attachment_id": null, "id": 7105, "time": "2001-10-24T09:02:05Z", "creator": "mlegault@cplane.com", "creation_time": "2001-10-24T09:02:05Z", "is_private": false, "text": "What happens if an error occurs?  All BuildListeners are alerted.  That's fine.\n\nBut what if I want to send myself an email whenever the build fails?  It's so \nmuch easier to add a target to a buildfile than writing a custom build \nlistener...\n\nHere's my suggestion: change the project tag to include a \"failure\" attribute \nwhose value would represent the target to call in case of failure.  So you get:\n\n  <project name=\"my_project\" default=\"buildAll\" failure=\"buildFailed\" \nbasedir=\".\">\n    <target name=\"buildAll\">\n      ...\n    </target>\n\n    ...\n\n    <target name=\"buildFailed\">\n      <echo message=\"My build failed!\"/>\n    </target>\n  </project>\n\nMatt"}, {"count": 1, "tags": [], "bug_id": 4399, "attachment_id": null, "id": 7110, "time": "2001-10-24T11:27:34Z", "creator": "umagesh@rediffmail.com", "creation_time": "2001-10-24T11:27:34Z", "is_private": false, "text": "Hmmm...  What would happen if tasks in that target fail?"}, {"count": 2, "tags": [], "bug_id": 4399, "attachment_id": null, "text": "You said it yourself\n\n\"It's so much easier to add a target to a buildfile than writing\n a custom build listener...\"\n\nTherefore the bug isn't that you need a \"failure\" attribute, but that you need \nbuild listeners to be simpler.\n\nAnt should probably ship with a set of build listeners, including the one from \nthe FAQ. ( http://jakarta.apache.org/ant/faq.html#mail-logger )\n\n\nIt would appear from a quick look, that there is no technical reason why \nlisteners couldn't be specified from within a buildfile, although I'm not sure \nif that is a good idea.\n\nListeners are absolutely the correct way to send messages on failures.\nIf they are too hard to manage, then they should be fixed.\nPutting in a hack like \"on fail\" is the wrong solution.\n\nI think this should be marked as a duplicate of 4113 (yes?)\n", "id": 7134, "time": "2001-10-24T23:58:03Z", "creator": "tim@adjective.org", "creation_time": "2001-10-24T23:58:03Z", "is_private": false}, {"count": 3, "tags": [], "creator": "jakarta@ehatchersolutions.com", "attachment_id": null, "is_private": false, "id": 7169, "time": "2001-10-25T13:02:50Z", "bug_id": 4399, "creation_time": "2001-10-25T13:02:50Z", "text": "I have submitted a MailLogger patch to make it part of the core.  Hopefully \nthat will get committed when a committer has time to sweep through the patches \nsubmitted.\n\nI've also considered making an enhancement to allow build listeners to be \nattached in the build file itself.  There is an issue with this in that any \nlistener not attached at the command-line will not receive at least the \nbuildStarted event unfortunately."}, {"count": 4, "text": "MailLogger has found its place in the CVS development tree.  The 'feature' of\nof having a fasilure attribute to project is not a good approach as I have \npointed out earlier.  Marking this as WONTFIX.  Ant2 will have sophistcated\nfailure handling features.  Till then, please use the MailLogger...", "bug_id": 4399, "attachment_id": null, "id": 10228, "time": "2002-02-02T17:12:08Z", "creator": "umagesh@apache.org", "creation_time": "2002-02-02T17:12:08Z", "tags": [], "is_private": false}]