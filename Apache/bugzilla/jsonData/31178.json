[{"count": 0, "tags": [], "creator": "apache@cashby.me.uk", "attachment_id": null, "text": "See below for error, log4j.properties entries, etc.\n\nClassNotFoundException is thrown in chainsaw when trying to use a default \nSocketAppender and SimpleListener.\n\nChainsaw v2.0alpha loaded via WebStart on JDK 1.4.2 IE 6 Windows XP SP2, log4j \nversion 1.2.8\n\nTried reinstall of jdk, jvm and chainsaw\n\nException thrown:\n-----------------\nLevel\nERROR\nLogger\norg.apache.log4j.net.SocketNode\nTime\n2004-09-11 11:09:18,046\nThread\nThread-10\nMessage\nUnexpected exception. Closing connection.\nNDC\nnull\nClass\n\nMethod\n\nLine\n\nFile\n\nProperties\n{{log4jid,1}}\nThrowable\njava.lang.ClassNotFoundException: org.apache.log4j.spi.LocationInfo\n\tat com.sun.jnlp.JNLPClassLoader$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat com.sun.jnlp.JNLPClassLoader.findClass(Unknown Source)\n\tat java.lang.ClassLoader.loadClass(Unknown Source)\n\tat java.lang.ClassLoader.loadClass(Unknown Source)\n\tat java.lang.ClassLoader.loadClassInternal(Unknown Source)\n\tat java.lang.Class.forName0(Native Method)\n\tat java.lang.Class.forName(Unknown Source)\n\tat java.io.ObjectInputStream.resolveClass(Unknown Source)\n\tat java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)\n\tat java.io.ObjectInputStream.readClassDesc(Unknown Source)\n\tat java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)\n\tat java.io.ObjectInputStream.readObject0(Unknown Source)\n\tat java.io.ObjectInputStream.defaultReadFields(Unknown Source)\n\tat java.io.ObjectInputStream.defaultReadObject(Unknown Source)\n\tat org.apache.log4j.spi.LoggingEvent.readObject(LoggingEvent.java:848)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Unknown Source)\n\tat java.io.ObjectStreamClass.invokeReadObject(Unknown Source)\n\tat java.io.ObjectInputStream.readSerialData(Unknown Source)\n\tat java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)\n\tat java.io.ObjectInputStream.readObject0(Unknown Source)\n\tat java.io.ObjectInputStream.readObject(Unknown Source)\n\tat org.apache.log4j.net.SocketNode.run(SocketNode.java:134)\n\tat java.lang.Thread.run(Unknown Source)\n\nProperties file:\n----------------\n# Set root logger level to DEBUG and its appenders to stdout and R.\nlog4j.rootLogger=debug, stdout, R, Socket\n\nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout\n\n# Pattern to output the caller's file name and line number.\nlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%c\\:%L) - %m%n\n\nlog4j.appender.R=org.apache.log4j.RollingFileAppender\nlog4j.appender.R.File=c:/spl_log4j.log\nlog4j.appender.R.MaxFileSize=512KB\nlog4j.appender.R.MaxBackupIndex=1\nlog4j.appender.R.layout=org.apache.log4j.PatternLayout\nlog4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n\n\nlog4j.appender.Socket=org.apache.log4j.net.SocketAppender\nlog4j.appender.Socket.RemoteHost=localhost\nlog4j.appender.Socket.Port=4445\n\nTest class for debugging:\n-------------------------\npublic class test {\n\n\tpublic static void main( String[] args ) {\n\t\torg.apache.log4j.Logger.getLogger(\"test class\").debug(\"Testing \nlogging\");\n\t}\n}\n\n(Class being compiled & run with just log4j in the classpath)\n(log4j.properties is being read correctly)\n\nOutput in file that is logged (works as expected)\n-----------------------------\nDEBUG main test class - Testing logging", "id": 63403, "time": "2004-09-11T18:34:17Z", "bug_id": 31178, "creation_time": "2004-09-11T18:34:17Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 31178, "text": "This would be because of a package reshuffle in the core log4j library.  It has \nbeen recently resovled.\n\nThe new web start version uploaded as of 2004-09-13 08:30 GMT+10 should have \nthis fixed.", "id": 63432, "time": "2004-09-12T22:16:33Z", "creator": "psmith@apache.org", "creation_time": "2004-09-12T22:16:33Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 31178, "text": "Doesn't work on the version on the site as of 1600 GMT-8", "id": 63435, "time": "2004-09-12T23:45:30Z", "creator": "apache@cashby.me.uk", "creation_time": "2004-09-12T23:45:30Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 31178, "is_private": false, "count": 3, "id": 63436, "time": "2004-09-13T00:04:01Z", "creator": "psmith@apache.org", "creation_time": "2004-09-13T00:04:01Z", "text": "Working for me... Has your webstart loaded the new version?  (sometimes it only \nchecks every other launch)."}, {"attachment_id": null, "tags": [], "creator": "apache@cashby.me.uk", "is_private": false, "count": 4, "id": 63437, "time": "2004-09-13T02:13:15Z", "bug_id": 31178, "creation_time": "2004-09-13T02:13:15Z", "text": "The version I have (and that installed cleanly for the first time on a virgin \nsystem) is 1.99.99 (According to the release notes)\n\nI see the error on both machines."}, {"count": 5, "tags": [], "bug_id": 31178, "text": "As a workaround, you can take the 'locationinfo' param out of the layout and\nevents should load correctly in Chainsaw.", "id": 63501, "time": "2004-09-13T21:59:44Z", "creator": "sdeboy@iname.com", "creation_time": "2004-09-13T21:59:44Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 31178, "is_private": false, "count": 6, "id": 63505, "time": "2004-09-13T23:27:49Z", "creator": "apache@cashby.me.uk", "creation_time": "2004-09-13T23:27:49Z", "text": "If I understand correctly, org.apache.log4j.net.SocketAppender doesn't use a \nlayout, right?\n\nIf so, how do I remove locationInfo?"}, {"count": 7, "tags": [], "bug_id": 31178, "text": "LocationInfo should be off by default.\n\nTo explicitly disable, add a locationInfo param to the socketappender config:\n<param name=\"LocationInfo\" value=\"false\"/>\n", "id": 63507, "time": "2004-09-14T00:20:00Z", "creator": "sdeboy@iname.com", "creation_time": "2004-09-14T00:20:00Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 31178, "is_private": false, "count": 8, "id": 63533, "time": "2004-09-14T16:22:45Z", "creator": "dcowan@apc.com", "creation_time": "2004-09-14T16:22:45Z", "text": "I have tried setting locationInfo=false and I still see this problem.  This is \nonly after webstart updated from the previous version to 2.0alpha"}, {"count": 9, "tags": [], "bug_id": 31178, "text": "The setting of locationInfo on the appender sets a boolean.\n\nAre you using log4j 1.2.8?  I've tested and verified that if you using a\nSocketAppender from log4j1.2.8 you can send events to Chainsaw V2.  \n\nI was able to reproduce the classnotfoundexception only by explicitly setting\nthe LocationInfo param to true.  Setting this param explicitly to false, while\nunnecessary, resulted in the events successfully getting loaded by Chainsaw V2.\n\nHere is a link to the source (this is a link to the 1.2.7 tagged version):\nhttp://cvs.apache.org/viewcvs.cgi/logging-log4j/src/java/org/apache/log4j/net/SocketAppender.java?rev=1.12.2.1&view=markup\n\nNote that the locationInfo boolean is used in the 'append' method.\n\nIf you are not using log4j 1.2.8 on the appender side, give us more information\non your configuration and we can reopen.\n", "id": 63546, "time": "2004-09-14T20:42:48Z", "creator": "sdeboy@iname.com", "creation_time": "2004-09-14T20:42:48Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 31178, "is_private": false, "text": "This is actually a workaround and probably shouldn't be marked as closed without\ndiscussing whether or not we want to provide serial backward-compatibility with\nlog4j 1.2.8.", "id": 63549, "time": "2004-09-14T22:13:34Z", "creator": "sdeboy@iname.com", "creation_time": "2004-09-14T22:13:34Z", "attachment_id": null}, {"count": 11, "attachment_id": null, "bug_id": 31178, "text": "Not only is this a workaround, it's also broken against the current stable \nrelease of its parent product.\n\nSome testing of the log4j version must be done before this bug can be closed at \nleast until log4j 1.2.8 becomes an archive rather than production / stable \nrelease.", "id": 63575, "time": "2004-09-15T13:07:35Z", "creator": "ant@cashby.me.uk", "creation_time": "2004-09-15T13:07:35Z", "tags": [], "is_private": false}, {"count": 12, "tags": [], "bug_id": 31178, "text": "As I mentioned, I can use the log4j 1.2.8 SocketAppender to send events to\nChainsaw V2 - it is only when I explicitly set the locationInfo parameter to\nfalse that I get the error.\n\nWould you mind attaching your appender configuration file?\n\nI would like to ensure we can at least provide a temporary solution to folks\nusing log4j1.2.8 and SocketAppender with Chainsaw V2 while we work through\ncompatibility issues.\n", "id": 63581, "time": "2004-09-15T14:20:20Z", "creator": "sdeboy@iname.com", "creation_time": "2004-09-15T14:20:20Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 31178, "text": "correction of previous entry - I am able to reproduce the problem only when\nexplicitly setting the locationInfo param on SocketAppender to TRUE", "id": 63582, "time": "2004-09-15T14:22:13Z", "creator": "sdeboy@iname.com", "creation_time": "2004-09-15T14:22:13Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 31178, "text": "The properties file is included in my original report\n\n(I'm not yet using XML configuration)", "id": 63583, "time": "2004-09-15T14:22:45Z", "creator": "ant@cashby.me.uk", "creation_time": "2004-09-15T14:22:45Z", "is_private": false, "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 31178, "text": "I am having the same problem.  I am using log4j1.2.8 on the appender side.  \nLeaving out locationInfo or setting it to false has no affect.  \n\nThe test case supplied with this bug proves it very nicely.\n\nIt appears that if I remove the stdout conversionPattern property, the \nlocationinfo exception goes away.  %L seems to be the offending parameter in \nthe conversion pattern.", "id": 63585, "time": "2004-09-15T14:25:06Z", "creator": "g_emerick@yahoo.com", "creation_time": "2004-09-15T14:25:06Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "sdeboy@iname.com", "is_private": false, "count": 16, "id": 63586, "time": "2004-09-15T14:42:19Z", "bug_id": 31178, "creation_time": "2004-09-15T14:42:19Z", "text": "Nice work.  \n\nOne easier workaround (since appenders are processed in order), is set the\nSocketAppender as the first appender - the LocationInfo won't be set until the\nFileAppender is processed, so the SocketAppender will work fine but not have the\nLocationInfo:\n\nlog4j.rootLogger=debug, stdout, Socket, R"}, {"count": 17, "tags": [], "bug_id": 31178, "text": "Doing this works just fine for me.\n\nThanks for your support guys, and I hope a fix gets added soon!", "id": 63637, "time": "2004-09-15T22:05:11Z", "creator": "ant@cashby.me.uk", "creation_time": "2004-09-15T22:05:11Z", "is_private": false, "attachment_id": null}, {"count": 18, "attachment_id": null, "creator": "kuki.szabolcs@gmail.com", "text": "I just want to let you know that this problem is still active, I've taken the\nlatest chainsaw code (using install-chainsaw.xml) + WebStart, tested with jdk\n1.4.2. \n\nFor SocketAppender I tested with log4j 1.2.8, 1.2.9, 1.3alpha.\nI had beside the SocketApender an XMLLayot with locationInfo set\n\nlog4j.appender.fileXMLTARGET.layout=org.apache.log4j.xml.XMLLayout\nlog4j.appender.fileXMLTARGET.layout.LocationInfo=true\n\nlog4j.appender.CHAINSAW_CLIENT=org.apache.log4j.net.SocketAppender\nlog4j.appender.CHAINSAW_CLIENT.RemoteHost=127.0.0.1\nlog4j.appender.CHAINSAW_CLIENT.Port=4445\nlog4j.appender.CHAINSAW_CLIENT.LocationInfo=false\n\nChanging the order (placing fileXMLTARGET after CHAINSAW_CLIENT) solved the\nproblem, any location information before the Appender will generate this exception.\n\nAs an ideea check where org.apache.log4j.spi.LocationInfo is refered and try to\nfix it, so it would refer to org.apache.log4j.spi.location.LocationInfo.\n\nThanks for the great job :).", "id": 69698, "time": "2005-01-14T19:29:45Z", "bug_id": 31178, "creation_time": "2005-01-14T19:29:45Z", "tags": [], "is_private": false}, {"count": 19, "tags": [], "creator": "thorbjoern@gmail.com", "attachment_id": null, "text": "Is this bug still a problem?  I have used chainsaw a bit recently and not seen this issue?", "id": 118123, "time": "2008-06-30T12:51:37Z", "bug_id": 31178, "creation_time": "2008-06-30T12:51:37Z", "is_private": false}]