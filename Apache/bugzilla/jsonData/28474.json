[{"count": 0, "tags": [], "bug_id": 28474, "attachment_id": null, "text": "In case of loading junit task and junit.jar with its own clasloader (using\ntaskdef) and junit runs inJVM (no fork) an exception occurs:\n\n-----------------------------------------------------------------------------\norg.apache.tools.ant.taskdefs.optional.junit.PlainJUnitResultFormatter is not a\nJUnitResultFormatter\n        at\norg.apache.tools.ant.taskdefs.optional.junit.FormatterElement.createFormatter(FormatterElement.java:254)\n        at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTask.executeInVM(JUnitTask.java:987)\n        at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:663)\n        at\norg.apache.tools.ant.taskdefs.optional.junit.JUnitTask.execute(JUnitTask.java:637)\n-------------CUT -----------------\n\nThe reason should be in line 253 of FormatterElement.java:\n\n253:        if (!(o instanceof JUnitResultFormatter)) {\n254:            throw new BuildException(classname\n255:                + \" is not a JUnitResultFormatter\");\n256:        }\n\nJUnitResultFormatter and o will be loaded by different classloaders in the\ndescribed scenario.\n\nSetting fork to true will be a workaround.", "id": 56035, "time": "2004-04-19T17:51:28Z", "creator": "cthiele@ct42.de", "creation_time": "2004-04-19T17:51:28Z", "is_private": false}, {"count": 1, "tags": [], "creator": "peterreilly@apache.org", "text": "This is now fixed in the current cvs.", "id": 68038, "time": "2004-12-07T11:31:03Z", "bug_id": 28474, "creation_time": "2004-12-07T11:31:03Z", "is_private": false, "attachment_id": null}]