[{"count": 0, "tags": [], "bug_id": 44668, "is_private": false, "id": 114916, "creation_time": "2008-03-24T07:22:51Z", "time": "2008-03-24T07:22:51Z", "creator": "alvins1982@hotmail.com", "text": "This is a stack trace. Note that this only occurs when I am using JDK6 - JDK5 works fine. Furthermore - this error only eventuates if I have deployed multiple wars. If I run each war individually it works fine. I am not sure if this is a Tomcat bug but thought I would file it. It seems that people have seen something similiar before - http://issues.appfuse.org/browse/APF-846 .\n\nI am guessing to reproduce this - run two instances of war which uses Spring (i.e. so it utilizes xerces) on tomcat 6 using jdk6.\n\n\nMar 24, 2008 10:08:47 AM org.apache.catalina.core.StandardContext filterStart\nSEVERE: Exception starting filter struts2\nCaught exception while loading file struts-default.xml - Class: org.apache.xerces.parsers.DOMParser\nFile: DOMParser.java\nMethod: <init>\nLine: 153 - org/apache/xerces/parsers/DOMParser.java:153:-1\n\tat com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:839)\n\tat com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:131)\n\tat com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:100)\n\tat com.opensymphony.xwork2.config.impl.DefaultConfiguration.reload(DefaultConfiguration.java:130)\n\tat com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:52)\n\tat org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:395)\n\tat org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:452)\n\tat org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:201)\n\tat org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)\n\tat org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:397)\n\tat org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)\n\tat org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3709)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4356)\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:525)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:626)\n\tat org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:553)\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:488)\n\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1147)\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:719)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:516)\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:710)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:578)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nCaused by: java.lang.ClassCastException: org.apache.xerces.parsers.StandardParserConfiguration cannot be cast to org.apache.xerces.xni.parser.XMLParserConfiguration\n\tat org.apache.xerces.parsers.DOMParser.<init>(DOMParser.java:153)\n\tat org.apache.xerces.parsers.DOMParser.<init>(DOMParser.java:137)\n\tat org.apache.xerces.jaxp.DocumentBuilderImpl.<init>(DocumentBuilderImpl.java:102)\n\tat org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.newDocumentBuilder(DocumentBuilderFactoryImpl.java:88)\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.<init>(SAX2DOM.java:69)\n\tat com.sun.org.apache.xalan.internal.xsltc.runtime.output.TransletOutputHandlerFactory.getSerializationHandler(TransletOutputHandlerFactory.java:187)\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.getOutputHandler(TransformerImpl.java:392)\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerHandlerImpl.setResult(TransformerHandlerImpl.java:137)\n\tat com.opensymphony.xwork2.util.DomHelper$DOMBuilder.setup(DomHelper.java:213)\n\tat com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:198)\n\tat com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:189)\n\tat com.opensymphony.xwork2.util.DomHelper$DOMBuilder.<init>(DomHelper.java:175)\n\tat com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:115)\n\tat com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:830)\n\t... 34 more\nMar 24, 2008 10:08:47 AM org.apache.catalina.core.StandardContext start\nSEVERE: Error filterStart\nMar 24, 2008 10:08:47 AM org.apache.catalina.core.StandardContext start\nSEVERE: Context [] startup failed due to previous errors", "attachment_id": null}, {"count": 1, "tags": [], "text": "I agree with the assessment in APF-846 - a conflict is occurring between Xerces included in the JDK and the version in the application.\n\nThe solutions described there should also work for Tomcat 6. Note that the shared loader only exists as a separate loader if configured in $CATALINA_BASE/conf/catalina.properties\n\nNote that you also have the option of setting the $JAVA_ENDORSED_DIRS environment variable.\n", "attachment_id": null, "id": 114917, "creation_time": "2008-03-24T08:08:58Z", "time": "2008-03-24T08:08:58Z", "creator": "markt@apache.org", "bug_id": 44668, "is_private": false}]