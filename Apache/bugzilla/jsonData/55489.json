[{"count": 0, "tags": [], "creator": "andrejohn.mas@gmail.com", "attachment_id": null, "text": "The 'get' task should support an alternative user-agent being specified. \n\nThis is useful in situations where the server is accepting connections only from clients providing a given user-agent or possibly rejecting clients with specific user-agents.", "id": 169737, "time": "2013-08-27T15:54:37Z", "bug_id": 55489, "creation_time": "2013-08-27T15:54:37Z", "is_private": false}, {"count": 1, "tags": [], "creator": "andrejohn.mas@gmail.com", "attachment_id": null, "id": 169739, "time": "2013-08-27T17:38:46Z", "bug_id": 55489, "creation_time": "2013-08-27T17:38:46Z", "is_private": false, "text": "It has come to my attention that \"http.agent\" can be passed as a system property to over-ride this value.\n\nIf there is interest in having this for the 'get' command, then I can submit the work I have done so far (I still need to do a test case for this)."}, {"count": 2, "tags": [], "creator": "andrejohn.mas@gmail.com", "attachment_id": null, "is_private": false, "id": 169749, "time": "2013-08-27T21:23:45Z", "bug_id": 55489, "creation_time": "2013-08-27T21:23:45Z", "text": "In relation to https://issues.apache.org/jira/browse/IVY-1435, should we be considering creating a new default user-agent as part of this ticket? Maybe something of the form \"Apache Ant/X.Y\"?"}, {"count": 3, "tags": [], "text": "I agree...\n\n(1) Ant should by default use \"Apache Ant/X.Y\" as User-Agent; and\n(2) The <get> task should support an optional \"useragent\" attribute.", "is_private": false, "bug_id": 55489, "id": 169750, "time": "2013-08-27T21:36:34Z", "creator": "archie@dellroad.org", "creation_time": "2013-08-27T21:36:34Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 55489, "text": "Created attachment 30771\nProposed patch\n\nI have created a patch with an amended unit test for the Get task.\n\nThe code:\n - Defaults to user agent \"Apache Ant/x.y\", where x.y is the Ant version\n - Allows specifying of the user-agent from an Ant project\n - Validates specified userAgent is not empty\n\nOne limitation that I am looking to see resolved is validation of valid characters for the user-agent. At the moment I am wondering to what extent we should be testing for them?", "id": 169754, "time": "2013-08-27T22:58:02Z", "creator": "andrejohn.mas@gmail.com", "creation_time": "2013-08-27T22:58:02Z", "is_private": false, "attachment_id": 30771}, {"count": 5, "tags": [], "bug_id": 55489, "is_private": false, "text": "Looking through the patch I fail to see where userAgent actually gets used.  It is stored in GetThread but then?\n\nOne nit - I'd use the ant.version property rather than depending on Main, IDEs may not be using Main and I wouldn't want to rely on its methods working properly.\n\nAs for character validation for user agents: we could verify it contains only proper tokens and is either ISO8859-1 or quoted, but I'd prefer to have the underlying lib take care of that for us - if URLConnection doesn't fail, why should we?", "id": 170023, "time": "2013-09-11T10:44:48Z", "creator": "bodewig@apache.org", "creation_time": "2013-09-11T10:44:48Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "andrejohn.mas@gmail.com", "attachment_id": null, "text": "Thanks for the feedback.\n\nuserAgent is meant to be passed through the methods until the point it is used. I'll double check my code.\n\nI'll change the way I get the version. I was have difficulty trying to establish the the accepted way, via the docs, but I could probably have asked in the mailing-list.", "id": 170025, "time": "2013-09-11T11:05:22Z", "bug_id": 55489, "creation_time": "2013-09-11T11:05:22Z", "is_private": false}, {"count": 7, "tags": [], "creator": "andrejohn.mas@gmail.com", "attachment_id": null, "id": 171407, "time": "2013-11-23T01:55:34Z", "bug_id": 55489, "creation_time": "2013-11-23T01:55:34Z", "is_private": false, "text": "There was indeed a piece of code missing for the userAgent, which will be corrected in my next patch. The only thing is that the only \"ant.version\" value I am finding it attached to the project scope, by using:\n\ngetProject().getProperty(MagicNames.ANT_VERSION)\n\nThe issue with that value, is that it is not a 'short' value, returning a string of the form \"Apache Ant(TM) version 1.9.3alpha compiled on November 22 2013\", which is not ideal.\n\nI am going to see whether I can propose a related to change to have a 'short' ant version string?"}, {"attachment_id": 31084, "tags": [], "bug_id": 55489, "text": "Created attachment 31084\nProposed patch 2\n\nNew version of the patch. Changes (relative to last patch):\n - Added Main.getShortAntVersion()\n - User-agent is not being added to the header\n\nI opted not to use the ant.version, since this requires a project scope. If you feel strongly about this, then I will need to modify more code to create a 'ant.short.version' value.\n\nPlease let me know what other tweaks may need to be done.", "count": 8, "id": 171499, "time": "2013-11-29T03:22:32Z", "creator": "andrejohn.mas@gmail.com", "creation_time": "2013-11-29T03:22:32Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 55489, "text": "svn revision 1548232 contains your patch.  Many thanks.\n\nI'm still a bit uncomfortable with using Main directly, will think about it for a while.  We also need to modify the documentation :-)", "count": 9, "id": 171595, "time": "2013-12-05T18:27:37Z", "creator": "bodewig@apache.org", "creation_time": "2013-12-05T18:27:37Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 55489, "is_private": false, "count": 10, "id": 171863, "time": "2013-12-20T21:11:02Z", "creator": "andrejohn.mas@gmail.com", "creation_time": "2013-12-20T21:11:02Z", "text": "Can I mark this ticket resolved?"}, {"attachment_id": null, "tags": [], "bug_id": 55489, "is_private": false, "count": 11, "id": 171874, "time": "2013-12-21T19:56:54Z", "creator": "bodewig@apache.org", "creation_time": "2013-12-21T19:56:54Z", "text": "as soon as the documentation is there."}, {"count": 12, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 171978, "time": "2013-12-31T11:57:44Z", "bug_id": 55489, "creation_time": "2013-12-31T11:57:44Z", "is_private": false, "text": "documentation added with svn revision 1554406"}]