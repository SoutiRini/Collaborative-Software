[{"count": 0, "tags": [], "bug_id": 17183, "is_private": false, "id": 31551, "attachment_id": null, "creator": "nicolas.socheleau@bitflash.com", "creation_time": "2003-02-18T21:37:26Z", "time": "2003-02-18T21:37:26Z", "text": "here is an example of usage of baseline-shift. the second line is the expected \nresult for the first line.\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" \nxmlns:bf=\"http://www.bitflash.com/2002/svg\" stroke=\"#000\" xml:space=\"preserve\" \nwidth=\"10.0in\" stroke-miterlimit=\"8\" fill=\"#fff\" stroke-width=\"6.0\" \nviewBox=\"0.0, 0.0, 5760.0, 4320.0\" height=\"7.5in\" \nxmlns=\"http://www.w3.org/2000/svg\" fill-rule=\"evenodd\">\n<defs/>\n<rect fill=\"#fff\" width=\"5760.0\" x=\"0.0\" height=\"4320.0\" y=\"0.0\"/>\n<text x=\"2880.0\" font-size=\"352\" y=\"1926.0\" text-anchor=\"middle\" fill=\"#000\" \nfont-family=\"'Times New Roman'\" baseline-shift=\"0.0%\" stroke=\"none\">\n<bf:p/>\nTest Superscripts</text>\n<g fill=\"#000\" font-size=\"256\" font-family=\"'Times New Roman'\" stroke=\"none\">\n<text x=\"2880.0\" font-size=\"257\" y=\"2721.0\" fill=\"#000\" text-anchor=\"middle\" \nfont-family=\"'Times New Roman'\" baseline-shift=\"0.0%\">\n<bf:p/>\nThis reference<tspan font-size=\"166.39999\" baseline-shift=\"30.0%\">\n1</tspan>\n<tspan>\n has a number.</tspan>\n</text>\n\n<text x=\"2880.0\" font-size=\"257\" y=\"3088.0\" fill=\"#000\" text-anchor=\"middle\" \nfont-family=\"'Times New Roman'\" baseline-shift=\"0.0%\">\n<bf:p/>\nThis reference<tspan font-size=\"166.39999\" baseline-shift=\"76.8\">\n1</tspan>\n<tspan>\n has a number.</tspan>\n</text>\n</g>\n</svg>\n\n\nThe line-height the baseline-shift depends on should be provided by the parent \nof the element that has the baseline-shift attribute.\nhttp://www.w3.org/TR/SVG11/text.html#BaselineShiftProperty\n\nsee org.apache.batik.css.engine.value.svg.BaselineShiftManager\nline 108 :\n\n    public Value computeValue(CSSStylableElement elt,\n                              String pseudo,\n                              CSSEngine engine,\n                              int idx,\n                              StyleMap sm,\n                              Value value) {\n        if (value.getPrimitiveType() == CSSPrimitiveValue.CSS_PERCENTAGE) {\n            sm.putLineHeightRelative(idx, true);\n\n            int fsi = engine.getLineHeightIndex();\n            Value fs = engine.getComputedStyle(elt, pseudo, fsi);\n                                                ^\n--> retrieve the parent line-height not the element \n\n            float fsv = fs.getFloatValue();\n            float v = value.getFloatValue();\n            return new FloatValue(CSSPrimitiveValue.CSS_NUMBER,\n                                  (fsv * v) / 100f);\n        }\n        return super.computeValue(elt, pseudo, engine, idx, sm, value);\n    }"}, {"count": 1, "tags": [], "text": "This should be fixed shortly in CVS.", "attachment_id": null, "bug_id": 17183, "id": 32379, "time": "2003-03-03T23:31:56Z", "creator": "deweese@apache.org", "creation_time": "2003-03-03T23:31:56Z", "is_private": false}]