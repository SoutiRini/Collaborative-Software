[{"count": 0, "tags": [], "bug_id": 15989, "attachment_id": null, "id": 29179, "time": "2003-01-11T07:38:43Z", "creator": "xschinnerlx@webdynamite.com", "creation_time": "2003-01-11T07:38:43Z", "is_private": false, "text": "Dear Jakarta-Team,\n\nI've a small problem with the i18n taglib. If I use the message tag with\narguments (example below) I get a NullPointerException (NPE). (Environment:\nLinux, Java 1.4.1_01, JBoss 3.0.4/Jetty)\n\nHowever if I change line 268 of the MessageTag class (change shown below)\neverything works fine (the NPE doesn't occur anymore). To me the change makes\nsense, but maybe it breaks something which I'm not aware of.\n\nIf I can be of any help, please let me know.\n\nBest regards,\nDietmar\n\n---- JSP snippet ----\n\n[...]\n<i18n:bundle i18n=\"bundle\" baseName=\"com.sony.emo2.backoffice.Texts\"\nlocaleRef=\"<%= com.sony.framework.command.BaseCommand.LOCALE %>\" />\n[...]\n            <%  \n            if (pageTitle != null) {\n            %>\n              <h1><i18n:message key=\"<%= pageTitle %>\" /></h1>\n\n              <%\n               Object[] args = new Object[] { \"abcdef\" };\n              %>\n              <i18n:message bundleRef=\"bundle\" key=\"<%= pageTitle %>\" args=\"<%=\nargs %>\" />\n            <%\n            }\n            %>\n[...]\n\n---- log4j snippet ----\n\n[...]\n2003-01-11 08:17:55,646 WARN  [org.jboss.jbossweb] (SocketListener-1:) WARNING:\nException for /emo2bo/command.jsp?cmd=login\njava.lang.NullPointerException\n        at org.apache.taglibs.i18n.MessageTag.doEndTag(MessageTag.java:268)\n        at org.apache.jsp.menu$jsp._jspService(menu$jsp.java:563)\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at\norg.apache.jasper.servlet.JspServlet$JspServletWrapper.service(JspServlet.java:201)\n[...]\n\n---- diff ----\n\n[dietmar@wd1w i18n]$ cvs diff -u src/org/apache/taglibs/i18n/MessageTag.java \nIndex: src/org/apache/taglibs/i18n/MessageTag.java\n===================================================================\nRCS file:\n/home/cvspublic/jakarta-taglibs/i18n/src/org/apache/taglibs/i18n/MessageTag.java,v\nretrieving revision 1.5\ndiff -u -r1.5 MessageTag.java\n--- src/org/apache/taglibs/i18n/MessageTag.java 17 Dec 2002 04:18:59 -0000      1.5\n+++ src/org/apache/taglibs/i18n/MessageTag.java 11 Jan 2003 07:29:28 -0000\n@@ -265,7 +265,7 @@\n             // perform parameter substitutions\n             if ( _value != null && _arguments != null && _arguments.size() > 0) {\n                 // reformat the value as specified\n-                _messageFormat.setLocale(_bundle.getLocale());\n+                _messageFormat.setLocale(getBundle().getLocale());\n                 _messageFormat.applyPattern(_value);\n                 _value = _messageFormat.format(_arguments.toArray());\n             }"}, {"count": 1, "attachment_id": null, "creator": "glenn@apache.org", "text": "\n\n*** This bug has been marked as a duplicate of 15840 ***", "id": 29188, "time": "2003-01-11T14:44:40Z", "bug_id": 15989, "creation_time": "2003-01-11T14:44:40Z", "tags": [], "is_private": false}]