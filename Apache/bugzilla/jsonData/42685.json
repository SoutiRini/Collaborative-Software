[{"count": 0, "tags": [], "bug_id": 42685, "attachment_id": null, "is_private": false, "id": 104482, "time": "2007-06-17T23:20:43Z", "creator": "bjoern.mahler@lineas.de", "creation_time": "2007-06-17T23:20:43Z", "text": "After generating a postscript-file with fop and sending the file/stream to the\nprinter (Lexmark T632 and 630 - no other printers here for testing), the printer\nrestarts ~30 seconds after printing the last page of the document (runs on again\nbut nothing else happens). This failure appears not on all Windows-XP Versions.\nAfter hours of debugging i found the bug in the PSRenderer-Class and the builded\nPS-File: At the end an EOF-Command is send, but before there should be an\nend-of-page \"eop\"-command as well. \nFrankly - please add in stopRenderer() the line: gen.writeln(\"eop\"); before the\ntrailer and everything is fine ;)"}, {"count": 1, "tags": [], "creator": "dev@cumiskey.com", "attachment_id": null, "id": 104497, "time": "2007-06-18T06:09:35Z", "bug_id": 42685, "creation_time": "2007-06-18T06:09:35Z", "is_private": false, "text": "Could you please attach the FO that you used which produced this problem.  Can I\nalso verify with you that this happened on a 0.93 version of FOP."}, {"count": 2, "tags": [], "text": "Created attachment 20369\nFO File example\n\nexample fo file", "is_private": false, "bug_id": 42685, "id": 104519, "time": "2007-06-19T05:56:14Z", "creator": "bjoern.mahler@lineas.de", "creation_time": "2007-06-19T05:56:14Z", "attachment_id": 20369}, {"count": 3, "tags": [], "bug_id": 42685, "attachment_id": 20370, "is_private": false, "id": 104520, "time": "2007-06-19T05:57:10Z", "creator": "bjoern.mahler@lineas.de", "creation_time": "2007-06-19T05:57:10Z", "text": "Created attachment 20370\nExtract of the generated Postscript-File\n\nThe header and footer part of the fop-generated .ps file"}, {"count": 4, "attachment_id": null, "creator": "bjoern.mahler@lineas.de", "is_private": false, "id": 104522, "time": "2007-06-19T07:00:29Z", "bug_id": 42685, "creation_time": "2007-06-19T07:00:29Z", "tags": [], "text": "Every fo file i used produced this problem, because the bug is in the\nPSRenderer-Class.\n\nI also attached an extract of the generated .ps file showing the header and\nfooter information produced by the renderer. As you can see, the version of fop\nis 0.9.3 ... the version of xmlgraphics-commons is 1.1.\n\nBeside that - the bug only appears on \"some\" xp-versions i tested. The customer\nuses a specialised customer version of win-xp - the bug does not appear on my\npersonal version of xp. Nevertheless as i understand the postscript\nspecification an eop must exist after a page ends. So it would be great to\ninclude this command in the stopRenderer-Method of the renderer."}, {"count": 5, "tags": [], "bug_id": 42685, "attachment_id": 20371, "is_private": false, "id": 104524, "time": "2007-06-19T09:05:52Z", "creator": "dev@cumiskey.com", "creation_time": "2007-06-19T09:05:52Z", "text": "Created attachment 20371\npatch file to fix page width reset behaviour\n\nI couldn't reproduce this printer reseting behaviour with my HP Laserjet\nprinter.  I don't believe the fix is to issue an \"eop\" instruction after the\npage trailer.\n\nHowever, when I tried producing a postscript rendition of the FO file you\nprovided it seemed to produce incorrectly formatted output with the page width\nnot being adhered to.  I believe this problem (well the problem I found at\nleast..) was caused by the /ImagingBBox null instruction following the\n/PageSize instruction when rendering the page.\tThis may somehow be causing the\nproblem you are experiencing on your printer.\n\nAnyhow, please try out your Lexmark printer again with fop patched with this\npatch file and let me know if this seems to fix the restart problem.\n\nAdrian."}, {"count": 6, "tags": [], "bug_id": 42685, "attachment_id": null, "is_private": false, "id": 104536, "time": "2007-06-20T02:19:56Z", "creator": "bjoern.mahler@lineas.de", "creation_time": "2007-06-20T02:19:56Z", "text": "I'm looking around whether i could get the time to test that patch... because\nafterall i fixed the misbehaviour of the printer by adding an EOP after the\npage-content - you can believe it or not ;)"}, {"count": 7, "tags": [], "text": "I believe the EOP may fix the problem on your printer for you, and it also fixed\nthe page width problem in my testing.\n\nFrom what I can gather EOP is a very old postscript (postscript level 1)\ninstruction which I believe was used with dot matrix style line printers, it\nappears to be little used these days and largely undocumented.  I don't believe\nit should be necessary.  Please try out my patch, it will only take you a couple\nof seconds ;-).\n\nAdrian.\n\n(In reply to comment #6)\n> I'm looking around whether i could get the time to test that patch... because\n> afterall i fixed the misbehaviour of the printer by adding an EOP after the\n> page-content - you can believe it or not ;)\n\n", "attachment_id": null, "id": 104537, "creator": "dev@cumiskey.com", "time": "2007-06-20T02:28:41Z", "bug_id": 42685, "creation_time": "2007-06-20T02:28:41Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 42685, "attachment_id": null, "is_private": false, "id": 104538, "time": "2007-06-20T03:02:20Z", "creator": "bjoern.mahler@lineas.de", "creation_time": "2007-06-20T03:02:20Z", "text": "> From what I can gather EOP is a very old postscript (postscript level 1)\n> instruction which I believe was used with dot matrix style line printers, it\n> appears to be little used these days and largely undocumented.  I don't believe\n> it should be necessary.  Please try out my patch, it will only take you a couple\n> of seconds ;-).\nOkay - i'll do my very best... have to switch the pc and make some physical work\nto do that *g*"}, {"count": 9, "tags": [], "text": "What concerns me about the use of EOP is that other PS generators do not add \nEOP at the end of their Postscript stream yet we print thousands of documents \non hundreds of different printers and do not run into a problem. Therefore I \nwould be reluctant to add EOP to the end of the stream because whilst it may \nwork for your printer it may break other printers. And as Adrian already said \nits a legacy command with no mention in PS Red Book.\n\nSetting /ImagingBBox to null seems unnecessary because changing the page size \nshould do this anyway (according to the PS spec). Removing this superflous \nstatement seems to fix the odd behaviour in the FO you provided. Well for the \nprinters I had within easy reach at least :)", "attachment_id": null, "id": 104539, "creator": "bowditch_chris@hotmail.com", "time": "2007-06-20T03:07:05Z", "bug_id": 42685, "creation_time": "2007-06-20T03:07:05Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 42685, "attachment_id": null, "is_private": false, "id": 157533, "time": "2012-04-07T01:44:18Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:44:18Z", "text": "resetting P2 open bugs to P3 pending further review"}, {"count": 11, "tags": [], "text": "change status from ASSIGNED to NEW for consistency", "attachment_id": null, "id": 157920, "creator": "gadams@apache.org", "time": "2012-04-11T06:18:02Z", "bug_id": 42685, "creation_time": "2012-04-11T06:18:02Z", "is_private": false}]