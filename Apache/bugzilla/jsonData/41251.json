[{"count": 0, "attachment_id": null, "bug_id": 41251, "is_private": false, "id": 97399, "time": "2006-12-28T02:29:26Z", "creator": "myprivat65@hotmail.com", "creation_time": "2006-12-28T02:29:26Z", "tags": [], "text": "Making 5 fop threads work simultaneiousely leads to a failure every 1000 task.\nThat means, when the process is invoked 5000 times (only f threads are allowed \nat one time) about 5 out of the 5000 tasks fail and result in the following \nexception.\n\nThe same tasks which failed, can be successful processed when invoked again, \nwhich means it has nothing to do with the tasks themselves. And the failure \nhappens randomly at any time, but i never noticed that it happened at the very \nbeginning of the processing. Usually it happenes after few hundreds of tasks \nwere processed.   \n\njava.lang.ArrayIndexOutOfBoundsException: -2; Line#: 51; Column#: 106 \nat com.mycompany.rendering.engine.FopRenderer.render(FopRenderer.java:254) \nat com.mycompany.rendering.engine.XmlHtmlRenderer.render\n(XmlHtmlRenderer.java:92) \nat com.mycompany.rendering.engine.XmlHtmlRenderer.render\n(XmlHtmlRenderer.java:124) \nat com.mycompany.myproduct.postprocessing.CDefaultPostProcessor.transform\n(CDefaultPostProcessor.java:320) \nat com.mycompany.myproduct.postprocessing.CDefaultPostProcessor.xml2pdf\n(CDefaultPostProcessor.java:274) \nat com.mycompany.myproduct.postprocessing.CDefaultPostProcessor.postprocess\n(CDefaultPostProcessor.java:207) \nat com.mycompany.myproduct.postprocessing.CTaxCertPostProcessor.postprocess\n(CTaxCertPostProcessor.java:78) \nat com.mycompany.myproduct.processors.CReportProcessor.postProcessRequest\n(CReportProcessor.java:251) \nat com.mycompany.myproduct.processors.CReportProcessor.doExecute\n(CReportProcessor.java:183) \nat com.mycompany.myproduct.processors.CReportRequestProcessor.doExecute\n(CReportRequestProcessor.java:454) \nat com.mycompany.myproduct.CmyproductProcess.execute\n(CmyproductProcess.java:183) \nat com.mycompany.myproduct.processors.CReportRequestProcessor.process\n(CReportRequestProcessor.java:157) \nat com.mycompany.myproduct.workflow.queues.WorkerMDEJB.onMessage\n(WorkerMDEJB.java:126) \nat weblogic.ejb20.internal.MDListener.execute(MDListener.java:370) \nat weblogic.ejb20.internal.MDListener.onMessage(MDListener.java:262) \nat weblogic.jms.client.JMSSession.onMessage(JMSSession.java:2678) \nat weblogic.jms.client.JMSSession.execute(JMSSession.java:2598) \nat weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:219) \nat weblogic.kernel.ExecuteThread.run(ExecuteThread.java:178) \njavax.xml.transform.TransformerException: \njava.lang.ArrayIndexOutOfBoundsException: -2 \nat org.apache.xalan.transformer.TransformerImpl.executeChildTemplates\n(TransformerImpl.java:2344) \nat org.apache.xalan.transformer.TransformerImpl.applyTemplateToNode\n(TransformerImpl.java:2160) \nat org.apache.xalan.transformer.TransformerImpl.transformNode\n(TransformerImpl.java:1213) \nat org.apache.xalan.transformer.TransformerImpl.transform\n(TransformerImpl.java:668) \nat org.apache.xalan.transformer.TransformerImpl.transform\n(TransformerImpl.java:1129) \nat org.apache.xalan.transformer.TransformerImpl.transform\n(TransformerImpl.java:1107) \nat com.mycompany.rendering.engine.FopRenderer.render(FopRenderer.java:241) \nat com.mycompany.rendering.engine.XmlHtmlRenderer.render\n(XmlHtmlRenderer.java:92) \nat com.mycompany.rendering.engine.XmlHtmlRenderer.render\n(XmlHtmlRenderer.java:124) \nat com.mycompany.myproduct.postprocessing.CDefaultPostProcessor.transform\n(CDefaultPostProcessor.java:320) \nat com.mycompany.myproduct.postprocessing.CDefaultPostProcessor.xml2pdf\n(CDefaultPostProcessor.java:274) \nat com.mycompany.myproduct.postprocessing.CDefaultPostProcessor.postprocess\n(CDefaultPostProcessor.java:207) \nat com.mycompany.myproduct.postprocessing.CTaxCertPostProcessor.postprocess\n(CTaxCertPostProcessor.java:78) \nat com.mycompany.myproduct.processors.CReportProcessor.postProcessRequest\n(CReportProcessor.java:251) \nat com.mycompany.myproduct.processors.CReportProcessor.doExecute\n(CReportProcessor.java:183) \nat com.mycompany.myproduct.processors.CReportRequestProcessor.doExecute\n(CReportRequestProcessor.java:454) \nat com.mycompany.myproduct.CmyproductProcess.execute\n(CmyproductProcess.java:183) \nat com.mycompany.myproduct.processors.CReportRequestProcessor.process\n(CReportRequestProcessor.java:157) \nat com.mycompany.myproduct.workflow.queues.WorkerMDEJB.onMessage\n(WorkerMDEJB.java:126) \nat weblogic.ejb20.internal.MDListener.execute(MDListener.java:370) \nat weblogic.ejb20.internal.MDListener.onMessage(MDListener.java:262) \nat weblogic.jms.client.JMSSession.onMessage(JMSSession.java:2678) \nat weblogic.jms.client.JMSSession.execute(JMSSession.java:2598) \nat weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:219) \nat weblogic.kernel.ExecuteThread.run(ExecuteThread.java:178) \njava.lang.ArrayIndexOutOfBoundsException: -2 \nat org.apache.fop.fo.flow.TableRow$CellArray.getNextFreeCell(TableRow.java:130) \nat org.apache.fop.fo.flow.TableRow.initCellArray(TableRow.java:505) \nat org.apache.fop.fo.flow.TableRow.layout(TableRow.java:271) \nat org.apache.fop.fo.flow.AbstractTableBody.layout(AbstractTableBody.java:236) \nat org.apache.fop.fo.flow.Table.layout(Table.java:302) \nat org.apache.fop.fo.flow.AbstractFlow.layout(AbstractFlow.java:154) \nat org.apache.fop.fo.flow.AbstractFlow.layout(AbstractFlow.java:110) \nat org.apache.fop.fo.pagination.PageSequence.makePage(PageSequence.java:400) \nat org.apache.fop.fo.pagination.PageSequence.format(PageSequence.java:338) \nat org.apache.fop.apps.StreamRenderer.render(StreamRenderer.java:262) \nat org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:223) \nat org.apache.xalan.transformer.ResultTreeHandler.endElement\n(ResultTreeHandler.java:309) \nat org.apache.xalan.templates.ElemLiteralResult.execute\n(ElemLiteralResult.java:716) \nat org.apache.xalan.transformer.TransformerImpl.executeChildTemplates\n(TransformerImpl.java:2339) \nat org.apache.xalan.transformer.TransformerImpl.applyTemplateToNode\n(TransformerImpl.java:2160) \nat org.apache.xalan.transformer.TransformerImpl.transformNode\n(TransformerImpl.java:1213) \nat org.apache.xalan.transformer.TransformerImpl.transform\n(TransformerImpl.java:668) \nat org.apache.xalan.transformer.TransformerImpl.transform\n(TransformerImpl.java:1129) \nat org.apache.xalan.transformer.TransformerImpl.transform\n(TransformerImpl.java:1107) \nat com.mycompany.rendering.engine.FopRenderer.render(FopRenderer.java:241) \nat com.mycompany.rendering.engine.XmlHtmlRenderer.render\n(XmlHtmlRenderer.java:92) \nat com.mycompany.rendering.engine.XmlHtmlRenderer.render\n(XmlHtmlRenderer.java:124) \nat com.mycompany.myproduct.postprocessing.CDefaultPostProcessor.transform\n(CDefaultPostProcessor.java:320) \nat com.mycompany.myproduct.postprocessing.CDefaultPostProcessor.xml2pdf\n(CDefaultPostProcessor.java:274) \nat com.mycompany.myproduct.postprocessing.CDefaultPostProcessor.postprocess\n(CDefaultPostProcessor.java:207) \nat com.mycompany.myproduct.postprocessing.CTaxCertPostProcessor.postprocess\n(CTaxCertPostProcessor.java:78) \nat com.mycompany.myproduct.processors.CReportProcessor.postProcessRequest\n(CReportProcessor.java:251) \nat com.mycompany.myproduct.processors.CReportProcessor.doExecute\n(CReportProcessor.java:183) \nat com.mycompany.myproduct.processors.CReportRequestProcessor.doExecute\n(CReportRequestProcessor.java:454) \nat com.mycompany.myproduct.CmyproductProcess.execute\n(CmyproductProcess.java:183) \nat com.mycompany.myproduct.processors.CReportRequestProcessor.process\n(CReportRequestProcessor.java:157) \nat com.mycompany.myproduct.workflow.queues.WorkerMDEJB.onMessage\n(WorkerMDEJB.java:126) \nat weblogic.ejb20.internal.MDListener.execute(MDListener.java:370) \nat weblogic.ejb20.internal.MDListener.onMessage(MDListener.java:262) \nat weblogic.jms.client.JMSSession.onMessage(JMSSession.java:2678) \nat weblogic.jms.client.JMSSession.execute(JMSSession.java:2598) \nat weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:219) \nat weblogic.kernel.ExecuteThread.run(ExecuteThread.java:178)"}, {"count": 1, "attachment_id": null, "bug_id": 41251, "text": "Bugzilla cleanup:\n\nThis is unrelated to FOP. The error occurs in the calling code, not FOP itself.", "id": 99536, "time": "2007-02-18T04:51:17Z", "creator": "adelmelle@apache.org", "creation_time": "2007-02-18T04:51:17Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 41251, "attachment_id": null, "id": 99539, "time": "2007-02-18T05:02:53Z", "creator": "myprivat65@hotmail.com", "creation_time": "2007-02-18T05:02:53Z", "is_private": false, "text": "(In reply to comment #1)\n> Bugzilla cleanup:\n> This is unrelated to FOP. The error occurs in the calling code, not FOP \nitself.\n\nThe Exception was thrown by FOP-Code!"}, {"count": 3, "attachment_id": null, "bug_id": 41251, "is_private": false, "id": 99540, "time": "2007-02-18T05:10:29Z", "creator": "adelmelle@apache.org", "creation_time": "2007-02-18T05:10:29Z", "tags": [], "text": "(In reply to comment #2)\n> \n> The Exception was thrown by FOP-Code!\n\nNot according to the stack trace you posted. \n\"com.mycompany.rendering.engine\" is definitely not a FOP package."}, {"count": 4, "tags": [], "text": "(In reply to comment #3)\n> (In reply to comment #2)\n> > \n> > The Exception was thrown by FOP-Code!\n> \n> Not according to the stack trace you posted. \n> \"com.mycompany.rendering.engine\" is definitely not a FOP package.\n\nLook closely, Andreas:\njava.lang.ArrayIndexOutOfBoundsException: -2 \nat org.apache.fop.fo.flow.TableRow$CellArray.getNextFreeCell(TableRow.java:130) \nat org.apache.fop.fo.flow.TableRow.initCellArray(TableRow.java:505) \nat org.apache.fop.fo.flow.TableRow.layout(TableRow.java:271) \nat org.apache.fop.fo.flow.AbstractTableBody.layout(AbstractTableBody.java:236) \nat org.apache.fop.fo.flow.Table.layout(Table.java:302) ", "attachment_id": null, "id": 99541, "creator": "jeremias@apache.org", "time": "2007-02-18T05:12:13Z", "bug_id": 41251, "creation_time": "2007-02-18T05:12:13Z", "is_private": false}, {"count": 5, "tags": [], "text": "(In reply to comment #4)\n> Look closely, Andreas:\n> java.lang.ArrayIndexOutOfBoundsException: -2 \n> at org.apache.fop.fo.flow.TableRow$CellArray.getNextFreeCell(TableRow.java:130) \n\nRight, sorry. My bad.\n\nOTOH, this bug does not seem to applicable to the Trunk anymore, so that would make it... a WONTFIX?\n\n", "is_private": false, "id": 99542, "creator": "adelmelle@apache.org", "time": "2007-02-18T05:19:50Z", "bug_id": 41251, "creation_time": "2007-02-18T05:19:50Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "based on comments below, this no longer applies to trunk", "is_private": false, "id": 157023, "creator": "gadams@apache.org", "time": "2012-04-01T19:12:55Z", "bug_id": 41251, "creation_time": "2012-04-01T19:12:55Z", "attachment_id": null}, {"text": "batch transition resolved+wontfix to closed+wontfix", "tags": [], "creator": "gadams@apache.org", "is_private": false, "count": 7, "id": 158586, "time": "2012-04-30T00:15:06Z", "bug_id": 41251, "creation_time": "2012-04-30T00:15:06Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 41251, "attachment_id": null, "id": 158631, "time": "2012-04-30T00:17:27Z", "creator": "gadams@apache.org", "creation_time": "2012-04-30T00:17:27Z", "is_private": false, "text": "batch transition resolved+wontfix to closed+wontfix; if you believe this remains a bug and can demonstrate it with appropriate input FO file and output PDF file (as applicable), then you may reopen"}]