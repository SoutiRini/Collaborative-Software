[{"count": 0, "tags": [], "creator": "mathieu.carbonneaux@ch2o.info", "attachment_id": null, "id": 56110, "time": "2004-04-20T15:04:30Z", "bug_id": 28503, "creation_time": "2004-04-20T15:04:30Z", "is_private": false, "text": "Have also open bug on PHP bugtrack system...but i'm not sure how the probleme\ncan be resolved.. \n\nonly in php or in php and apache... \n\nseem to be a hp-ux related probleme with Dynamics loading library...\n\n\nProbleme Description:\n\nhave compile apache2 with dso support, and i tested it separatly...it's ok! work\nfin with apache included dso!\n\nafter, i've compiled php with apxs2 support, without probleme... \n\nThe php module has been correctly installed in apache modules directory and\nthe apache conf have been correctly modify by the php installer...\n\nbut... when i try to start apache with php module, \nthey can't load php module...\n\nwhen i verify with ldd -d why the module don't load, i've this result:\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/lib/libdld.2 =>    /usr/lib/libdld.2\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/lib/libintl.sl =>    /usr/local/lib/libintl.sl\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/lib/libiconv.sl =>   /usr/local/lib/libiconv.sl\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/lib/libxml2.sl =>    /usr/local/lib/libxml2.sl\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/lib/libintl.sl =>    /usr/local/lib/libintl.sl\n        /usr/lib/libm.2 =>      /usr/lib/libm.2\n        /usr/local/lib/libz.sl =>       /usr/local/lib/libz.sl\n        /usr/lib/libpthread.1 =>        /usr/lib/libpthread.1\n        /usr/lib/libm.2 =>      /usr/lib/libm.2\n        /usr/local/lib/libbz2.sl =>     /usr/local/lib/libbz2.sl\n        /usr/local/lib/libdb.sl =>      /usr/local/lib/libdb.sl\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/lib/libxslt.sl =>    /usr/local/lib/libxslt.sl\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/lib/libm.2 =>      /usr/lib/libm.2\n        /usr/local/lib/libintl.sl =>    /usr/local/lib/libintl.sl\n        /usr/lib/libpthread.1 =>        /usr/lib/libpthread.1\n        /usr/local/lib/libz.sl =>       /usr/local/lib/libz.sl\n        /usr/local/lib/libxml2.sl =>    /usr/local/lib/libxml2.sl\n        /usr/local/lib/libxsltbreakpoint.sl =>  /usr/local/lib/libxsltbreakpoint.sl\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/lib/libjpeg.sl =>    /usr/local/lib/libjpeg.sl\n        /usr/local/lib/libz.sl =>       /usr/local/lib/libz.sl\n        /usr/local/lib/libpng.sl =>     /usr/local/lib/libpng.sl\n        /usr/local/lib/X11/libXpm.sl => /usr/local/lib/X11/libXpm.sl\n        /usr/lib/libX11.3 =>    /usr/lib/libX11.3\n        /usr/local/lib/libt1.sl =>      /usr/local/lib/libt1.sl\n        /usr/local/lib/libgd.sl =>      /usr/local/lib/libgd.sl\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/lib/libiconv.sl =>   /usr/local/lib/libiconv.sl\n        /usr/lib/libm.2 =>      /usr/lib/libm.2\n        /usr/local/lib/libz.sl =>       /usr/local/lib/libz.sl\n        /usr/local/lib/libpng.sl =>     /usr/local/lib/libpng.sl\n        /usr/local/lib/libfreetype.sl =>        /usr/local/lib/libfreetype.sl\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/lib/libjpeg.sl =>    /usr/local/lib/libjpeg.sl\n        /usr/lib/libX11.3 =>    /usr/lib/libX11.3\n        /usr/local/lib/X11/libXpm.sl => /usr/local/lib/libXpm.sl\n        /usr/lib/libdld.2 =>    /usr/lib/libdld.2\n        /usr/lib/libpthread.1 =>        /usr/lib/libpthread.1\n        /usr/local/lib/libexpat.sl =>   /usr/local/lib/libexpat.sl\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/apache2/lib/libaprutil-0.sl.9 =>    \n/usr/local/apache2/lib/libaprutil-0.sl.9\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/local/apache2/lib/libapr-0.sl.9 => /usr/local/apache2/lib/libapr-0.sl.9\n        /usr/lib/libc.2 =>      /usr/lib/libc.2\n        /usr/lib/libdld.2 =>    /usr/lib/libdld.2\n        /usr/lib/libpthread.1 =>        /usr/lib/libpthread.1\n        /usr/lib/libnsl.1 =>    /usr/lib/libnsl.1\n        /usr/lib/libxti.2 =>    /usr/lib/libxti.2\n        /usr/lib/libm.2 =>      /usr/lib/libm.2\n        /usr/lib/libcl.2 =>     /usr/lib/libcl.2\n        /usr/lib/libisamstub.1 =>       /usr/lib/libisamstub.1\n        /usr/lib/libdld.2 =>    /usr/lib/libdld.2\n        symbol not found: _SYSTEM_ID    (/usr/lib/libc.2)\n        symbol not found: _end  (/usr/lib/libc.2)\n        symbol not found: __dld_loc     (/usr/lib/libdld.2)\n        symbol not found: ap_loaded_modules    \n(/usr/local/apache2/modules/libphp4.so)\n        symbol not found: unixd_config  (/usr/local/apache2/modules/libphp4.so)\n        symbol not found: ap_server_root       \n(/usr/local/apache2/modules/libphp4.so)\n        symbol not found: _SYSTEM_ID    (/usr/lib/libcl.2)\n        symbol not found: __dld_loc     (/usr/lib/libcl.2)\n\nsome symbole seem to not be resolved....\n\nhave searched for this symbole....\n\nand i have found some of this symbol in httpd binary\n\n#nm httpd | grep ap_server_root\nap_hack_ap_server_root_relative|1073780904|extern|data   |$DATA$\nap_server_root      |1073757188|extern|data   |$DATA$\nap_server_root_relative|    303164|extern|entry  |\nap_server_root_relative|    303216|extern|code   |$CODE$\n\n#nm httpd | grep ap_loaded_modules\nap_loaded_modules   |1073757324|extern|data   |$DATA$\n\nthis global export seem to be correctly exported by httpd....\n\nbut unixd_config is undef...!!??? i'm not sure wat correct... but apache work\nfine without libphp4.so...!!!\n\n#nm httpd | grep unixd_config\nunixd_config        |1073807808|undef |common |$BSS$\n\ni've found the other symbol in hp-ux library....\n\nbut i've seen before similare probleme with \"mod_auth_ldap\" module from musquit, \nbut only _SYSTEM_ID, _end and __dld_loc symbol i've not been resolved...\nfor this i've found on hp-ux support site how to correct the probleme, \nin using \"export LD_PRELOAD=/usr/bin/libcl.sl\" or in adding CFLAGS=\"-lcl\" before\ncompiling apache...\n\nbut with php this trick don't work....\n\ni think is globale visibility probleme between httpd binary and (libphp4.so)\nloaded librairy...\n\ni think that dyn lib can't access to global export of the binary who have loaded\nthe library...\n\nhave you any idea to correct this!!!!?\n\nhow to remplace the use of apache global whith apr like fonction???!!!\n\nhave tried to upgrade to libtool v1.5 but without amelioration...\n\nBest Regards,\nMathieu"}, {"count": 1, "tags": [], "bug_id": 28503, "attachment_id": null, "text": "apache works fine by itself -> bug in php.", "id": 66423, "time": "2004-11-04T03:46:28Z", "creator": "chip@force-elite.com", "creation_time": "2004-11-04T03:46:28Z", "is_private": false}]