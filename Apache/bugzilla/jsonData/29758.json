[{"count": 0, "tags": [], "bug_id": 29758, "text": "# hardware \n \ncpu             : TI UltraSparc II  (BlackBird) \nfpu             : UltraSparc II integrated FPU \npromlib         : Version 3 Revision 12 \nprom            : 3.12.3 \ntype            : sun4u \nncpus probed    : 4 \nncpus active    : 4 \n \n# ipv4 socket doesn't work. logs contains lots of warnings... \n \n(...) \n[warn] child process 20501 still did not exit, sending a SIGTERM \n[warn] child process 20502 still did not exit, sending a SIGTERM \n[warn] child process 20503 still did not exit, sending a SIGTERM \n[warn] child process 4106 still did not exit, sending a SIGTERM \n[warn] child process 30439 still did not exit, sending a SIGTERM \n[warn] child process 30440 still did not exit, sending a SIGTERM \n[warn] child process 12903 still did not exit, sending a SIGTERM \n[warn] child process 15845 still did not exit, sending a SIGTERM \n(...) \n \n# ipv6 works fine. \n \n$ telnet ::1 80 \nTrying ::1.80... \nConnected to ipv6-localhost. \nEscape character is '^]'. \nGET / HTTP/1.0 \n \nHTTP/1.1 200 OK \nDate: Wed, 23 Jun 2004 14:13:24 GMT \nServer: Apache/2.0.49 (Unix) PHP/4.3.7 \nX-Powered-By: PHP/4.3.7 \nConnection: close \nContent-Type: text/html \n(...)", "id": 59762, "time": "2004-06-23T12:35:42Z", "creator": "pluto@pld-linux.org", "creation_time": "2004-06-23T12:35:42Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "pluto@pld-linux.org", "is_private": false, "id": 59824, "time": "2004-06-24T06:56:13Z", "bug_id": 29758, "creation_time": "2004-06-24T06:56:13Z", "tags": [], "text": "# testcase: \n \nListen 0.0.0.0       - doesn't work (2.6.7) \nListen <my_ipv4>     - works fine (2.4.20,2.6.7) \nListen ::            - works fine (always). "}, {"count": 2, "tags": [], "bug_id": 29758, "text": "So you're saying that if configured with one Listen statement:\n\nListen 0.0.0.0:80\n\nthen httpd will accept connections on IPv6 addresses but not IPv4 addresses?\nCan you post the output of:\n\nstrace -e bind httpd -X\n\nfor that configuration.", "id": 59830, "time": "2004-06-24T08:06:08Z", "creator": "jorton@redhat.com", "creation_time": "2004-06-24T08:06:08Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 29758, "text": "Pawel, the strace output requested above is needed if you want help tracking\nthis down.", "id": 60435, "time": "2004-07-11T10:48:51Z", "creator": "jorton@redhat.com", "creation_time": "2004-07-11T10:48:51Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 29758, "text": "Hmm, now it works fine. \nI thing the reason is in one of the kernel's changeset. \nNow I'm tracking csets... \n ", "id": 60441, "time": "2004-07-11T12:19:51Z", "creator": "pluto@pld-linux.org", "creation_time": "2004-07-11T12:19:51Z", "is_private": false, "attachment_id": null}, {"count": 5, "attachment_id": null, "creator": "jorton@redhat.com", "is_private": false, "id": 60972, "time": "2004-07-22T15:57:56Z", "bug_id": 29758, "creation_time": "2004-07-22T15:57:56Z", "tags": [], "text": "Ah, I'm seeing this problem now on 2.6.7 ppc64 too.  It appears to be a bug in\nthe setsockopt() handling for 32-bit binaries on a 64-bit kernel, such compat\nsyscall issues are not uncommon.  httpd (somewhat redundantly) calls setsockopt\nto set the IPV6_V6ONLY setting to 0 on Linux, but the 64-bit kernel interprets\nthis as a \"1\".  For a 64-bit binary it works OK.\n\nI've reported the issue to the authorities: if you tracked this down more\nprecisely please let me know.  This is not really an Apache bug, anyway."}, {"count": 6, "attachment_id": null, "creator": "jorton@redhat.com", "is_private": false, "id": 63194, "time": "2004-09-08T08:43:43Z", "bug_id": 29758, "creation_time": "2004-09-08T08:43:43Z", "tags": [], "text": "This got tracked down, in case you see the problem again:\n\nhttp://oss.sgi.com/projects/netdev/archive/2004-09/msg00161.html"}]