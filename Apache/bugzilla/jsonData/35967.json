[{"count": 0, "tags": [], "bug_id": 35967, "attachment_id": null, "text": "From my tomcat-users-list posting:\n\nI've never had TC bind itself to 127.0.0.1:8005 to allow correct shutdown to\noccur.  I've always had to kill the TC JVM.\n\nI use JSVC to be able to get a non-root userid.  Does this affect how the\nshutdown port works ?\n\nMy startup command line:\n\n./bin/jsvc -Djava.endorsed.dirs=./common/endorsed -classpath\n:/opt/jakarta-tomcat-5.5.9/bin/bootstrap.jar:/opt/jakarta-tomcat-5.5.9/bin/commons-logging-api.jar\n-Dcatalina.base=/opt/jakarta-tomcat-5.5.9\n-Dcatalina.home=/opt/jakarta-tomcat-5.5.9\n-Djava.io.tmpdir=/opt/jakarta-tomcat-5.5.9/temp -outfile ./logs/catalina.out\n-errfile ./logs/catalina.err -user jakarta -Xmx2048M -Xms512M\n-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager\norg.apache.catalina.startup.Bootstrap start\n\n$ netstat -tanp | grep 80\ntcp        0      0 ::ffff:127.0.0.1:8009       :::*                       \nLISTEN      4621/jsvc.exec\ntcp        0      0 ::ffff:127.0.0.1:8080       :::*                       \nLISTEN      4621/jsvc.exec\n\n\n8009 is my AJP13, I have added address=\"127.0.0.1\" to the default config, and\n8080 is Coyete HTTP listener.\n\nIf I start TC up without jsvc, then I can get it to listen on the shutdown port,\nwhy is there a difference.\n\n\n\nFor interest I run the following to setup jsvc, should you wish to test for\nyourself:\n\n# Extracted TC to /opt/jakarta-tomcat-5.5.9\n# To run it as java service need to build jsvc\ncd /opt/jakarta-tomcat-5.5.9/bin\ntar -zxvf jsvc.tar.gz\ncd jsvc-src\nautoconf\nJAVA_HOME=\"/opt/jdk1.5.0_04\"\nexport JAVA_HOME\nsh ./configure\nmake\ncp jsvc ..\ncd ..", "id": 77923, "time": "2005-08-02T03:17:41Z", "creator": "darryl@darrylmiles.org", "creation_time": "2005-08-02T03:17:41Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 35967, "text": "This is by design.  With jsvc, you are supposed to shutdown Tomcat by:\n  kill -TERM `cat $PIDFILE`\n\nAs a result, jsvc doesn't tell Tomcat to listen on port 8005.", "count": 1, "id": 77924, "time": "2005-08-02T03:51:48Z", "creator": "william.barker@wilshire.com", "creation_time": "2005-08-02T03:51:48Z", "is_private": false}]