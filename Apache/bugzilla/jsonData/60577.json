[{"count": 0, "attachment_id": 34612, "bug_id": 60577, "text": "Created attachment 34612\nConfiguration of httpd\n\nWhen apache is set as forward http proxy, CacheEnable disk http://, should cache all http content and it is not working (CacheQuickHandler is Off). It should be caused by this commit: https://github.com/apache/httpd/commit/cc21a5acc79e1d8522373061dd3c2e91487bdc7b by comparing uri and path in file modules/cache/cache_util.c. Complete configuration attached.", "id": 196012, "time": "2017-01-12T11:33:30Z", "creator": "kudlacak1@gmail.com", "creation_time": "2017-01-12T11:33:30Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": 34613, "bug_id": 60577, "text": "Created attachment 34613\nPossible patch\n\nWe are hiting the same issue with 2.4.25. Attached is patch which seems to resolve the issue (uses the same value as 2.4.23 did).", "id": 196013, "time": "2017-01-12T12:03:55Z", "creator": "petr.sumbera@oracle.com", "creation_time": "2017-01-12T12:03:55Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "jim@apache.org", "attachment_id": null, "id": 196022, "time": "2017-01-12T13:42:22Z", "bug_id": 60577, "creation_time": "2017-01-12T13:42:22Z", "is_private": false, "text": "Thanks. Will review."}, {"attachment_id": 34616, "tags": [], "creator": "ylavic.dev@gmail.com", "is_private": false, "count": 3, "id": 196024, "time": "2017-01-12T14:13:01Z", "bug_id": 60577, "creation_time": "2017-01-12T14:13:01Z", "text": "Created attachment 34616\nAnother proposed patch\n\nWouldn't this patch be better?\n\nOne might still want to cache based on the rewritten URL, and attachment 34613 reverts that (was the purpose of r1756553)."}, {"count": 4, "tags": [], "bug_id": 60577, "text": "I'm not expert here. I can just confirm that 34616 makes our test case to pass.", "id": 196028, "attachment_id": null, "creator": "petr.sumbera@oracle.com", "creation_time": "2017-01-12T14:34:28Z", "time": "2017-01-12T14:34:28Z", "is_private": false}, {"count": 5, "attachment_id": 34770, "creator": "ylavic.dev@gmail.com", "text": "Created attachment 34770\nEarly vs final URIs used by mod_cache\n\nDepending on whether mod_cache runs in forward proxy and quick handler modes, or normal handler mode, its base path and query string references/canonicalizations are not computed at the same time (before or after quick_handler and proxy_detect transforms) and thus may differ.\n\nThis patch defines the cache_use_early_url() helper and use it wherever appropriate for mod_cache to consistently refer to the same entity while serving and/or caching the response, in both early and late cases.", "id": 197171, "time": "2017-02-20T21:26:32Z", "bug_id": 60577, "creation_time": "2017-02-20T21:26:32Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 60577, "is_private": false, "text": "Hey,\n\nI can confirm, that following example ([2] subexample, forward proxy):\n\nhttps://github.com/pgajdos/apache-rex/tree/master/mod_proxy-cache\n\nfails before and pass after the patch in comment 5 on the top of 2.4.25.\n\nThank you!", "id": 197175, "time": "2017-02-21T07:17:20Z", "creator": "pgajdos@suse.cz", "creation_time": "2017-02-21T07:17:20Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "ylavic.dev@gmail.com", "is_private": false, "text": "Thanks all for the test(s), committed to trunk (r1783842) and proposed for backport to 2.4.x.", "id": 197176, "time": "2017-02-21T08:30:01Z", "bug_id": 60577, "creation_time": "2017-02-21T08:30:01Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 60577, "is_private": false, "text": "fixed in 2.4.25 with a followup in .26", "id": 199395, "time": "2017-06-25T12:44:25Z", "creator": "covener@gmail.com", "creation_time": "2017-06-25T12:44:25Z", "attachment_id": null}]