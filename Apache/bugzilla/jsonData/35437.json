[{"count": 0, "tags": [], "creator": "jglick@apache.org", "attachment_id": null, "id": 76565, "time": "2005-06-20T22:04:34Z", "bug_id": 35437, "creation_time": "2005-06-20T22:04:34Z", "is_private": false, "text": "For example (JAVA_HOME set to JDK 1.5):\n\ntmp$ cat foo.xml\n<project default=\"x\">\n    <target name=\"x\">\n        <echo file=\"X.java\">public class X {}</echo>\n        <javac executable=\"/space/jdk1.3/bin/javac\" fork=\"yes\" target=\"1.3\"\nincludes=\"X.java\" srcdir=\".\"/>\n    </target>\n</project>\ntmp$ /space/ant162/bin/ant -f foo.xml\nBuildfile: foo.xml\n\nx:\n    [javac] Compiling 1 source file\n\nBUILD SUCCESSFUL\nTotal time: 2 seconds\ntmp$ /space/ant163/bin/ant -f foo.xml\nBuildfile: foo.xml\n\nx:\n    [javac] Compiling 1 source file\n\n    [javac]           WARNING\n\n    [javac] The -source switch defaults to 1.5 in JDK 1.5.\n    [javac] If you specify -target 1.3 you now must also specify -source 1.3.\n    [javac] Ant will implicitly add -source 1.3 for you.  Please change your\nbuild file.\n    [javac] javac: invalid flag: -source\n    [javac] Usage: javac <options> <source files>\n    [javac] where possible options include:\n    [javac]   -g                        Generate all debugging info\n    [javac]   -g:none                   Generate no debugging info\n    [javac]   -g:{lines,vars,source}    Generate only some debugging info\n    [javac]   -O                        Optimize; may hinder debugging or\nenlarge class file\n    [javac]   -nowarn                   Generate no warnings\n    [javac]   -verbose                  Output messages about what the compiler\nis doing\n    [javac]   -deprecation              Output source locations where deprecated\nAPIs are used\n    [javac]   -classpath <path>         Specify where to find user class files\n    [javac]   -sourcepath <path>        Specify where to find input source files\n    [javac]   -bootclasspath <path>     Override location of bootstrap class files\n    [javac]   -extdirs <dirs>           Override location of installed extensions\n    [javac]   -d <directory>            Specify where to place generated class files\n    [javac]   -encoding <encoding>      Specify character encoding used by\nsource files\n    [javac]   -target <release>         Generate class files for specific VM version\n\n\nBUILD FAILED\n/tmp/foo.xml:4: Compile failed; see the compiler error output for details.\n\nTotal time: 1 second\n\n(It works if JAVA_HOME is JDK 1.4.)\n\nThis breaks usage of JDK 1.3 for NetBeans projects (when running the IDE in JDK\n1.5):\n\nhttp://www.netbeans.org/issues/show_bug.cgi?id=60218\n\nDefaultCompilerAdapter.java 1.54 is responsible: assumeJava15 returns true when\n\"extjavac\" is the compiler and the JDK running Ant is 1.5. This may be wrong if\nyou are using 'executable'."}, {"count": 1, "tags": [], "bug_id": 35437, "attachment_id": null, "is_private": false, "id": 76568, "time": "2005-06-21T07:57:11Z", "creator": "bodewig@apache.org", "creation_time": "2005-06-21T07:57:11Z", "text": "use compiler=\"javac1.3\" in addition to your other attributes in the task.\n\nUnless you specify the attribute Ant will assume your forked javac belongs to the\nsame version as the currently running VM.\n"}]