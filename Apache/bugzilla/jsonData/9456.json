[{"count": 0, "tags": [], "creator": "richard@thehusses.freeserve.co.uk", "attachment_id": null, "is_private": false, "id": 16809, "time": "2002-05-28T13:01:26Z", "bug_id": 9456, "creation_time": "2002-05-28T13:01:26Z", "text": "I have been having a little trouble with the new admin application in 4.1.2 \n(which is /very/ nice, BTW). I added an access log valve to localhost, using \nthe 'common' log format which is equivalent to the pattern %h %l %u %t \"%r\" %s %\nb\n\nUnfortunately, when you commit the changes this results in a server.xml file \nthat is not valid XML. I am getting the following entry in server.xml:\n\n  <Valve className=\"org.apache.catalina.valves.AccessLogValve\" debug=\"0\"\n   prefix=\"access_log.localhost.\" directory=\"logs\"\n   pattern=\"%h %l %u %t \"%r\" %s %b\" resolveHosts=\"false\" suffix=\".txt\"/>\n\nNote the quote signs within the pattern attribute; the StandardServerMBean \nstoreAttributes(PrintWriter, boolean, Object) method is simply writing out the \nattribute value without any escaping &c.\n\nBut I also wonder whether it would be worth changing AccessLogValve so that its \ngetPattern() method returns \"common\" or \"combined\" for those shortcuts, rather \nthan expanding them to \"%h %l %u %t \\\"%r\\\" %s %b\" and \"%h %l %u %t \\\"%r\\\" %s %b \n\\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" ? This would make saved server.xml files \neasier to read; the present behaviour is a little disconcerting."}, {"text": "The attribute values need some escaping. The fix has been implemented, and will \nbe present in 4.1.3. So at least, it won't crash.\n\nI agree it may be a good idea to select only \"common\" and \"combined\", for ease \nof use reasons.\nConverting to enhancement, as the bug does not exist anymore.", "tags": [], "bug_id": 9456, "is_private": false, "count": 1, "id": 16819, "time": "2002-05-28T15:35:08Z", "creator": "remm@apache.org", "creation_time": "2002-05-28T15:35:08Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9456, "attachment_id": null, "id": 134230, "time": "2010-02-04T12:00:30Z", "creator": "markt@apache.org", "creation_time": "2010-02-04T12:00:30Z", "is_private": false, "text": "Since the admin app has been removed in 6.0.x onwards, I don't see this enhancement being implemented."}]