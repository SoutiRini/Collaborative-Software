[{"count": 0, "tags": [], "bug_id": 3752, "is_private": false, "text": "JspFactory.getDefaultFactory().getPageContext(...) returns null everytime i \ncall it.\n\n--- test servlet ---\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.jsp.JspFactory;\nimport javax.servlet.jsp.JspWriter;\nimport javax.servlet.jsp.PageContext;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n\npublic class PageContextServlet extends HttpServlet {\n\n  public void doGet(HttpServletRequest request,\n                    HttpServletResponse response) throws ServletException,\n                                                         IOException {\n\n      PageContext pageContext = JspFactory.getDefaultFactory()\n                                           .getPageContext(this,\n                                                           request,\n                                                           response,\n                                                           \"/error.html\",\n                                                           false,\n                                                           \nJspWriter.DEFAULT_BUFFER,\n                                                           true);\n\n      System.out.println(\"pageContext = \" + pageContext);\n  }\n\n}\n--- end test servlet ---\n\nprints out. \"pageContext = null\"\n\nor am i just too stupid to get the PageContext the right way ;-) (btw, bea \nweblogic (6.0 final, sp1, sp2 and 6.1) works.", "id": 5832, "time": "2001-09-20T08:35:43Z", "creator": "birkl@akt-infosys.de", "creation_time": "2001-09-20T08:35:43Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 3752, "attachment_id": null, "is_private": false, "id": 5854, "time": "2001-09-20T15:03:11Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-09-20T15:03:11Z", "text": "The JspFactory.getDefaultFactory() method will only return a non-null result if\nsomeone has called JspFactory.setDefaultFactory() to set it.  In Tomcat, this\nonly happens automatically for JSP pages themselves, so it won't work in an\narbitrary servlet.  And I don't see any spec requirement that it is supposed to.\n"}, {"count": 2, "tags": [], "bug_id": 3752, "attachment_id": null, "is_private": false, "id": 5867, "time": "2001-09-21T03:47:52Z", "creator": "birkl@akt-infosys.de", "creation_time": "2001-09-21T03:47:52Z", "text": "> The JspFactory.getDefaultFactory() method will only\n> return a non-null result if someone has called\n> JspFactory.setDefaultFactory() to set it.  \n\nehm, the JspFactory.getDefaultFactory() didn't return null. It returns a object \nof class org.apache.jasper.runtime.JspFactoryImpl. The getPageContext() method \nof the JspFactory returns null.\n\n<snip type=\"source\">\n    System.out.println(\"JspFactory.getDefaultFactory() = \"\n                       + JspFactory.getDefaultFactory());\n    System.out.println(\"JspFactory.getDefaultFactory().getPageContext(...) = \"\n                       + JspFactory.getDefaultFactory()\n                                   .getPageContext(this,\n                                                   request,\n                                                   response,\n                                                   \"/error.html\",\n                                                   false,\n                                                   JspWriter.DEFAULT_BUFFER,\n                                                   true));\n</snip>\n\n<snip type=\"output\">\n  JspFactory.getDefaultFactory() = \norg.apache.jasper.runtime.JspFactoryImpl@2e7820\n  JspFactory.getDefaultFactory().getPageContext(...) = null\n</snip>\n\nSo you don't want to fix/change this behaviour? Is there another\npossibilty to include one or more Jsp Pages through a Servlet?\n"}, {"count": 3, "tags": [], "creator": "birkl@akt-infosys.de", "is_private": false, "text": "I could use request.getRequestDispatcher(\"jspfile.jsp\").include(request, \nforward), sorry.\n\nAnyway, a \"user-written\" servlet can never access the PageContext object in \nTomcat? Is this the way it's supposed to be? Why is there no exception thrown?", "id": 5870, "time": "2001-09-21T04:01:40Z", "bug_id": 3752, "creation_time": "2001-09-21T04:01:40Z", "attachment_id": null}]