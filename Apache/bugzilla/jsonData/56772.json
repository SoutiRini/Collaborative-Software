[{"count": 0, "attachment_id": null, "bug_id": 56772, "is_private": false, "id": 176685, "time": "2014-07-25T10:03:11Z", "creator": "irshad.ahmad@spanservices.com", "creation_time": "2014-07-25T10:03:11Z", "tags": [], "text": "Hi Team,\n\nJmeter is downloading sub requests wihci is if IE 8 only javascript , even though User-Agent is Chrome 30."}, {"count": 1, "tags": [], "bug_id": 56772, "attachment_id": null, "text": "Please provide sample URL that exhibits the problem.", "id": 176691, "time": "2014-07-25T22:32:01Z", "creator": "sebb@apache.org", "creation_time": "2014-07-25T22:32:01Z", "is_private": false}, {"count": 2, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "I think what is being reported here relates to embedded resources download.\nIn this case I suppose there is javascript in conditional block dedicated to IE8 browser.\nIs the download feature supposed to handle this ?", "id": 176853, "time": "2014-08-03T13:45:32Z", "bug_id": 56772, "creation_time": "2014-08-03T13:45:32Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "sebb@apache.org", "text": "(In reply to Philippe Mouawad from comment #2)\n> I think what is being reported here relates to embedded resources download.\n> In this case I suppose there is javascript in conditional block dedicated to\n> IE8 browser.\n\nLooks like it\n\n> Is the download feature supposed to handle this ?\n\nJMeter does not interpret javascript so almost certainly it cannot detect this.\n\nI wonder if all browsers detect it?\nWithout a test sample it's hard to know.", "id": 176857, "time": "2014-08-03T22:06:17Z", "bug_id": 56772, "creation_time": "2014-08-03T22:06:17Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 56772, "is_private": false, "text": "Hi Team,\n\nSorry for Late reply and Due to Security issues I cannot share the Application URL, Below is the explanation, let me know If you require anything else.\n\n@Philippe Mouawad   : Yes this is about the embedded URL, Actually in Chrome browser this Specific IE8 only js is not downloading, Jmeter User-Agent is set to Chrome 30, but Jmeter is downloading this js file and which is leading to 404 Error. Since 404 error is the issue for Load Test and we are unable to supress the same.\n\nI have below queries.\n1. Is there any way in Jmeter we can avoid specific embedded resources?\n2. Is there any problem with User-Agent settings?\n\nand this is happening only in Jmeter 10 & 11, but Jmeter 9 works fine:)", "id": 176858, "time": "2014-08-04T04:45:36Z", "creator": "irshad.ahmad@spanservices.com", "creation_time": "2014-08-04T04:45:36Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "(In reply to Irshad Ahmad from comment #4)\n> Hi Team,\n> \n> Sorry for Late reply and Due to Security issues I cannot share the\n> Application URL, Below is the explanation, let me know If you require\n> anything else.\n\nCan you share the offending HTML?\nThe URLs and any other content can be redacted so long as the syntax/structure is retained.\n\n> @Philippe Mouawad   : Yes this is about the embedded URL, Actually in Chrome\n> browser this Specific IE8 only js is not downloading, Jmeter User-Agent is\n> set to Chrome 30, but Jmeter is downloading this js file and which is\n> leading to 404 Error. Since 404 error is the issue for Load Test and we are\n> unable to supress the same.\n> \n> I have below queries.\n> 1. Is there any way in Jmeter we can avoid specific embedded resources?\n\nhttp://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request\nSee \"Embedded URLs must match\"\n\nIt looks like the following RE should match all but your URL:\n\n^(?!regex)\n\nwhere regex matches the URL.\n\n> 2. Is there any problem with User-Agent settings?\n\nJMeter does not change its behaviour based on the User Agent, but your server might.\n \n> and this is happening only in Jmeter 10 & 11, but Jmeter 9 works fine:)\n\nProbably JMeter 2.9 fails to extract the embedded URL, but without the sample HTML it's impossible to say.", "is_private": false, "id": 176861, "creator": "sebb@apache.org", "time": "2014-08-04T10:21:34Z", "bug_id": 56772, "creation_time": "2014-08-04T10:21:34Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 56772, "attachment_id": null, "id": 177019, "time": "2014-08-08T14:41:01Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-08T14:41:01Z", "is_private": false, "text": "@Ahmad, can you provide request elements by sebb ?\nOtherwise we won't be able to fix bug\n\nThanks"}, {"count": 7, "tags": [], "bug_id": 56772, "attachment_id": null, "is_private": false, "id": 177330, "time": "2014-08-22T22:13:48Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-22T22:13:48Z", "text": "I reproduced issue.\nIn fact the issue comes from switching :\nhtmlParser.className=org.apache.jmeter.protocol.http.parser.HtmlParserHTMLParser\nto\nhtmlParser.className=org.apache.jmeter.protocol.http.parser.LagartoBasedHtmlParser\n\nsince JMeter 2.10.\n\nWhat happens is that HtmlParserHTMLParser simply ignored or was not able to parse correctly this kind of html:\n<!--[if lte IE 8]>\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"./ie8-and-down.css\" />\n<![endif]-->\n\n\nSo it didn't extract the link.\nNew parser knows how to extract it.\n\nAs a workaround you can switch to :\nhtmlParser.className=org.apache.jmeter.protocol.http.parser.LagartoBasedHtmlParser\n\n\n@JMeter Dev Team:\nTo fix issue we need to add user agent as a parameter of HTMLParser#getEmbeddedResourceURLs\nAnd then for example with Lagarto :\n- Implement condComment callback in a way similar to what is done here:\nhttps://github.com/oblac/jodd/blob/master/jodd-lagarto/src/main/java/jodd/lagarto/dom/LagartoDOMBuilderTagVisitor.java\n\nwhere enabled controls wether addition to list of urls to parse should occur or not"}, {"count": 8, "tags": [], "bug_id": 56772, "attachment_id": null, "id": 177344, "time": "2014-08-24T21:26:34Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-24T21:26:34Z", "is_private": false, "text": "Date: Sun Aug 24 21:09:04 2014\nNew Revision: 1620188\n\nURL: http://svn.apache.org/r1620188\nLog:\nBug 56772 - Handle IE Conditional comments when parsing embedded resources\nBugzilla Id: 56772\n\nAdded:\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1.html   (with props)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1_FF.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1_IE6.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1_IE7.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1_IE8.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2.html   (with props)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2_FF.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2_IE7.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2_IE8.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2_IE9.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3.html   (with props)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3_FF.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3_IE10.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3_IE55.all\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3_IE6.all\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/parser/HTMLParser.java\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/parser/HtmlParserHTMLParser.java\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/parser/JTidyHTMLParser.java\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/parser/JsoupBasedHtmlParser.java\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/parser/LagartoBasedHtmlParser.java\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/parser/RegexpHTMLParser.java\n    jmeter/trunk/test/src/org/apache/jmeter/protocol/http/parser/TestHTMLParser.java\n    jmeter/trunk/xdocs/changes.xml\n    \nDate: Sun Aug 24 21:18:30 2014\nNew Revision: 1620189\n\nURL: http://svn.apache.org/r1620189\nLog:\nBug 56772 - Handle IE Conditional comments when parsing embedded resources\nUpgrade to Jodd 3.6.0-BETA2 as conditional comments have been introduced in BETA1 (some useful extra classes like HtmlCCommentExpressionMatcher)\nBugzilla Id: 56772\n\nAdded:\n    jmeter/trunk/licenses/bin/jodd-core-3.6.0-BETA2.txt   (contents, props changed)\n      - copied, changed from r1613729, jmeter/trunk/licenses/bin/jodd-core-3.5.2.txt\n    jmeter/trunk/licenses/bin/jodd-lagarto-3.6.0-BETA2.txt   (contents, props changed)\n      - copied, changed from r1613729, jmeter/trunk/licenses/bin/jodd-lagarto-3.5.2.txt\n    jmeter/trunk/licenses/bin/jodd-log-3.6.0-BETA2.txt   (props changed)\n      - copied unchanged from r1613729, jmeter/trunk/licenses/bin/jodd-log-3.5.2.txt\nRemoved:\n    jmeter/trunk/licenses/bin/jodd-core-3.5.2.txt\n    jmeter/trunk/licenses/bin/jodd-lagarto-3.5.2.txt\n    jmeter/trunk/licenses/bin/jodd-log-3.5.2.txt\nModified:\n    jmeter/trunk/build.properties\n    jmeter/trunk/eclipse.classpath\n    jmeter/trunk/res/maven/ApacheJMeter_parent.pom\n    jmeter/trunk/xdocs/changes.xml\n    \nDate: Sun Aug 24 21:20:16 2014\nNew Revision: 1620190\n\nURL: http://svn.apache.org/r1620190\nLog:\nBug 56772 - Handle IE Conditional comments when parsing embedded resources\nsvn eol\nBugzilla Id: 56772\n\nModified:\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1.html   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1_FF.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1_IE6.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1_IE7.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional1_IE8.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2.html   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2_FF.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2_IE7.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2_IE8.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional2_IE9.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3.html   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3_FF.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3_IE10.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3_IE55.all   (props changed)\n    jmeter/trunk/bin/testfiles/HTMLParserTestCaseWithConditional3_IE6.all   (props changed)\n    \nDate: Sun Aug 24 21:25:16 2014\nNew Revision: 1620191\n\nURL: http://svn.apache.org/r1620191\nLog:\nBug 56772 - Handle IE Conditional comments when parsing embedded resources\nUpgrade to Jodd 3.6.0-BETA2\nBugzilla Id: 56772\n\nAdded:\n    jmeter/trunk/lib/mongo-java-driver-2.12.3.jar   (with props)\n    jmeter/trunk/lib/xstream-1.4.6.jar   (with props)\nModified:\n    jmeter/trunk/lib/   (props changed)\n    jmeter/trunk/lib/aareadme.txt"}, {"count": 9, "tags": [], "bug_id": 56772, "text": "Resolved for Lagarto implementation.\nFor JSoup waiting for answers from group.\nFor other implementation not sure it is useful to implement this feature.", "id": 177345, "time": "2014-08-24T21:27:28Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-08-24T21:27:28Z", "is_private": false, "attachment_id": null}]