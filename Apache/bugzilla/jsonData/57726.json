[{"attachment_id": 32587, "tags": [], "bug_id": 57726, "text": "Created attachment 32587\nLog files for error\n\nHello\n\nI am using Redmine project management (www.redmine.org) software (similar to bugzilla) and I am using Bitnami (www.bitnami.com) bundle installer for Redmine instance for Windows. Bitnami uses Apache 2.4 for Redmine bundle installer. Starting from version 3.0.0 (and 3.0.1 too) I have found error, that a Redmine Wiki page, that has specific Russian word \"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f\" (translation: Information) written from capital letter only! causes Internal server error while trying to open such page. Redmine itself seems not affected by this problem, because I am able to create such page at their official web site redmine.org , so its a problem with my installation. Its easy to reproduce, just get latest bitnami Redmine 3.0.1 installer (https://bitnami.com/redirect/to/51600/bitnami-redmine-3.0.1-0-windows-installer.exe), setup it, and try to access \"http://localhost/redmine/%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F\"\npage - it leads to internal server error.\n\nBelow is my logs for this error, I dont know what to do really, because Redmine Team says its not their error and Bitnami Team seems dont know what to do too...\n\nbugreport: http://www.redmine.org/issues/193212 - on redmine.org here\nvideo recording for this problem: http://youtu.be/r3TITwOP_Fk\nApache error logs: find 22:02:48 time, at error.log and access.log\nhttps://cloud.mail.ru/public/5fb423d7bb7e/updatedlogs.zip\nBitnami support thread: https://community.bitnami.com/t/problems-with-3-0-1-installation-see-report-inside/30195\n\nHelp me please, I dont know where else to go with this :'(", "count": 0, "id": 181881, "time": "2015-03-18T19:44:05Z", "creator": "escdagent@mail.ru", "creation_time": "2015-03-18T19:44:05Z", "is_private": false}, {"count": 1, "tags": [], "creator": "escdagent@mail.ru", "attachment_id": null, "id": 182012, "time": "2015-03-23T20:17:47Z", "bug_id": 57726, "creation_time": "2015-03-23T20:17:47Z", "is_private": false, "text": "Any news on my report?"}, {"count": 2, "tags": [], "text": "Try LogLevel trace8 and attaching the errorlog directly to this bug report.  Presumably the encoding of that character matches some blacklisted octet for the platform httpd is on.", "attachment_id": null, "bug_id": 57726, "id": 182013, "time": "2015-03-23T20:20:36Z", "creator": "covener@gmail.com", "creation_time": "2015-03-23T20:20:36Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 57726, "attachment_id": null, "text": "https://cloud.mail.ru/public/b4d5322419d3/part1%20logs_24032015_11h21m50s%20event%20time.zip\nhttps://cloud.mail.ru/public/bd9b45aff45e/part2%20logs_24032015_11h26m00s%20event%20time.zip\n\nattached please find 2 log archives with trace8 level.", "id": 182036, "time": "2015-03-24T08:37:22Z", "creator": "escdagent@mail.ru", "creation_time": "2015-03-24T08:37:22Z", "is_private": false}, {"count": 4, "tags": [], "text": "Created attachment 32598\naccess part1 logs_24032015_11h21m50s event time", "attachment_id": 32598, "bug_id": 57726, "id": 182039, "time": "2015-03-24T10:46:22Z", "creator": "escdagent@mail.ru", "creation_time": "2015-03-24T10:46:22Z", "is_private": false}, {"count": 5, "tags": [], "creator": "escdagent@mail.ru", "attachment_id": 32599, "id": 182040, "time": "2015-03-24T10:46:52Z", "bug_id": 57726, "creation_time": "2015-03-24T10:46:52Z", "is_private": false, "text": "Created attachment 32599\naccess part2 logs_24032015_11h26m00s event time"}, {"count": 6, "attachment_id": 32600, "bug_id": 57726, "is_private": false, "id": 182041, "time": "2015-03-24T10:47:09Z", "creator": "escdagent@mail.ru", "creation_time": "2015-03-24T10:47:09Z", "tags": [], "text": "Created attachment 32600\nerror part1 logs_24032015_11h21m50s event time"}, {"count": 7, "tags": [], "creator": "escdagent@mail.ru", "attachment_id": 32601, "id": 182042, "time": "2015-03-24T10:47:25Z", "bug_id": 57726, "creation_time": "2015-03-24T10:47:25Z", "is_private": false, "text": "Created attachment 32601\nerror part2 logs_24032015_11h26m00s event time"}, {"attachment_id": null, "tags": [], "bug_id": 57726, "text": "It seems that the redmine itself (127.0.0.1:3001) responds with status 500 (Internal Server Error) with path \"/%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F\", mod_proxy is simply forwarding that error response.\n\nYou probably have to check redmine's logs for the original cause.", "count": 8, "id": 182045, "time": "2015-03-24T11:07:47Z", "creator": "ylavic.dev@gmail.com", "creation_time": "2015-03-24T11:07:47Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 57726, "is_private": false, "text": "Here are some relevent log lines :\n\n[Tue Mar 24 11:21:50.890271 2015] [proxy_http:trace1] [pid 5360:tid 1364] mod_proxy_http.c(1944): [client ::1:62027] HTTP: serving URL http://127.0.0.1:3001/redmine/projects/fsfsdfds/wiki/%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F\n[Tue Mar 24 11:21:50.890271 2015] [proxy:debug] [pid 5360:tid 1364] proxy_util.c(2138): AH00942: HTTP: has acquired connection for (127.0.0.1)\n[Tue Mar 24 11:21:50.890271 2015] [proxy:debug] [pid 5360:tid 1364] proxy_util.c(2192): [client ::1:62027] AH00944: connecting http://127.0.0.1:3001/redmine/projects/fsfsdfds/wiki/%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F to 127.0.0.1:3001\n[Tue Mar 24 11:21:50.890271 2015] [proxy:debug] [pid 5360:tid 1364] proxy_util.c(2393): [client ::1:62027] AH00947: connected /redmine/projects/fsfsdfds/wiki/%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F to 127.0.0.1:3001\n[Tue Mar 24 11:21:50.890271 2015] [proxy:trace2] [pid 5360:tid 1364] proxy_util.c(2735): HTTP: fam 2 socket created to connect to 127.0.0.1\n[Tue Mar 24 11:21:50.890271 2015] [proxy:debug] [pid 5360:tid 1364] proxy_util.c(2767): AH02824: HTTP: connection established with 127.0.0.1:3001 (127.0.0.1)\n[Tue Mar 24 11:21:50.891273 2015] [proxy:debug] [pid 5360:tid 1364] proxy_util.c(2921): AH00962: HTTP: connection complete to 127.0.0.1:3001 (127.0.0.1)\n[Tue Mar 24 11:21:50.891273 2015] [core:trace6] [pid 5360:tid 1364] core_filters.c(525): [remote 127.0.0.1:3001] core_output_filter: flushing because of FLUSH bucket\n[Tue Mar 24 11:21:50.897289 2015] [proxy_http:trace3] [pid 5360:tid 1364] mod_proxy_http.c(1423): [client ::1:62027] Status from backend: 500\n[Tue Mar 24 11:21:50.897289 2015] [proxy_http:trace4] [pid 5360:tid 1364] mod_proxy_http.c(1098): [client ::1:62027] Headers received from backend:\n[Tue Mar 24 11:21:50.897289 2015] [proxy_http:trace4] [pid 5360:tid 1364] mod_proxy_http.c(1101): [client ::1:62027] Content-Type: text/plain\n[Tue Mar 24 11:21:50.897289 2015] [proxy_http:trace4] [pid 5360:tid 1364] mod_proxy_http.c(1101): [client ::1:62027] Connection: keep-alive\n[Tue Mar 24 11:21:50.897289 2015] [proxy_http:trace4] [pid 5360:tid 1364] mod_proxy_http.c(1101): [client ::1:62027] Content-Length: 21\n[Tue Mar 24 11:21:50.897289 2015] [proxy_http:trace4] [pid 5360:tid 1364] mod_proxy_http.c(1101): [client ::1:62027] Server: thin 1.6.1 codename Death Proof", "id": 182046, "time": "2015-03-24T11:10:28Z", "creator": "ylavic.dev@gmail.com", "creation_time": "2015-03-24T11:10:28Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 57726, "attachment_id": null, "text": "I have checked for redmine production log, but it does not make any recordings even at \"debug\" log mode. The last recording is \"200 OK\" for previous page that was loaded normally. Thanks for help anyway, Ill point Redmine team to this thread, probably they will find something...", "id": 182057, "time": "2015-03-24T14:35:19Z", "creator": "escdagent@mail.ru", "creation_time": "2015-03-24T14:35:19Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 57726, "attachment_id": 32603, "text": "Created attachment 32603\nredmine production log (debug mode)", "id": 182058, "time": "2015-03-24T14:35:49Z", "creator": "escdagent@mail.ru", "creation_time": "2015-03-24T14:35:49Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 57726, "text": "Have you tried the \"nocanon\" option?", "count": 12, "id": 182059, "time": "2015-03-24T14:38:06Z", "creator": "covener@gmail.com", "creation_time": "2015-03-24T14:38:06Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 57726, "text": "No, i have not tested nocanon. I have tried googling how to turn on nocanon option, but there is no clear info. I can try, pls tell me how to do it.", "count": 13, "id": 182065, "time": "2015-03-24T16:40:00Z", "creator": "escdagent@mail.ru", "creation_time": "2015-03-24T16:40:00Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 57726, "is_private": false, "count": 14, "id": 182066, "time": "2015-03-24T16:41:58Z", "creator": "covener@gmail.com", "creation_time": "2015-03-24T16:41:58Z", "text": "Look for the text here: http://httpd.apache.org/docs/2.4/mod/mod_proxy.html"}, {"count": 15, "tags": [], "bug_id": 57726, "is_private": false, "text": "Thanks to Toshi MARUYAMA from Redmine Team, this problem is resolved!\n\n\"https://github.com/macournoyer/thin/issues/268\"\n\"https://github.com/marutosi/rails/commit/c53a49e0bbe615d5ff51620a993c4d3d79c73370\"\n\nI have updated line 32 at my file\\apps\\redmine\\htdocs\\vendor\\bundle\\ruby\\2.0.0\\gems\\actionpack-4.2.0\\lib\\action_dispatch\\middleware\\static.rb\nfrom \"path = File.join(@root, p)\"\nto \"path = File.join(@root, p.force_encoding('UTF-8'))\"\n\nAnd now links with capital \"\u0418\" opens correctly! Thanks to everyone who take part in resolving this problem.", "id": 182128, "time": "2015-03-26T20:19:51Z", "creator": "escdagent@mail.ru", "creation_time": "2015-03-26T20:19:51Z", "attachment_id": null}]