[{"count": 0, "tags": [], "text": "According to this link\n\nhttp://httpd.apache.org/docs/trunk/mod/mod_authz_dbd.html\n\nAuthzDBDQuery Directive\n\nWhen used with a Require dbd-group directive, it specifies a query to look up groups for the current user. This is the standard functionality of other authorization modules such as mod_authz_groupfile and mod_authz_dbm. The first column value of each row returned by the query statement should be a string containing a group name. Zero, one, or more rows may be returned.\n\nI found that if the query returned more than one row, the authorization failed with \"Sun Aug 16 14:09:54.566429 2015] [authz_core:error] [pid 27034] [client 81.174.4.175:52849] AH01631: user john@erba.tv: authorization failure for \"/awstats/awstats.pl\": \"\n\nIf the query contains a single row, then it is successful. The returned value in the single row may contain more than one group name separated by white space.\n\nEither the documentation should be changed to explain the functionality or the code should be changed to handle multiple rows.", "attachment_id": null, "id": 184579, "creator": "john@voipsupport.it", "time": "2015-08-16T13:15:00Z", "bug_id": 58246, "creation_time": "2015-08-16T13:15:00Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 58246, "is_private": false, "text": "Hi and thanks for the report.\n\n\nThis looks like https://bz.apache.org/bugzilla/show_bug.cgi?id=46421 which has been fixed in release 2.4.13.\n\n\nCan you try with version 2.4.16?\n(2.4.13, .14 and .15 have not been officially released, so the .16 is the latest version that should include the fix to your problem)", "id": 184590, "time": "2015-08-17T08:01:59Z", "creator": "christophe.jaillet@wanadoo.fr", "creation_time": "2015-08-17T08:01:59Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "This report can be marked as a duplicate of https://bz.apache.org/bugzilla/show_bug.cgi?id=46421.\n\nFrom the description it looks exactly like the same issue.\n\nI am not able to easily try 2.4.16 to verify the fix, since I am using a distribution based install (Centos 7.1) where the latest version is 2.4.6.\n\nI am currently using a workaround (which I'll mention for the benefit of who cannot upgrade) of ensuring that the query returns no more than one row, by specifying the group name in the query. It will be a redundant configuration if using the fixed version, but works fine for now.\n\nRequire dbd-group mygroup\nAuthzDBDQuery \"SELECT groupname FROM user_group WHERE username = %s AND status='a' and groupname='mygroup'\"", "attachment_id": null, "id": 184591, "creator": "john@voipsupport.it", "time": "2015-08-17T10:12:13Z", "bug_id": 58246, "creation_time": "2015-08-17T10:12:13Z", "is_private": false}, {"count": 3, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of bug 46421 ***", "attachment_id": null, "id": 184592, "creator": "john@voipsupport.it", "time": "2015-08-17T10:13:21Z", "bug_id": 58246, "creation_time": "2015-08-17T10:13:21Z", "is_private": false}]