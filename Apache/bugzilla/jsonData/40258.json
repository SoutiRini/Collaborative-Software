[{"count": 0, "tags": [], "creator": "riverofcode@gmail.com", "attachment_id": null, "text": "I am using a task like:\n<target name=\"doLibZip\">\n  <zip duplicate=\"preserve\" update=\"true\" basedir=\"${lib.dir}\"  \n                zipfile=\"${ear.dir}\\${targetEnvironment}\\app_lib_.zip\">\n  </zip>\n</target>\n\nUsing ant 1.6.2 the default \"whenempty skip\" behavior works normally. I upgraded\nto 1.6.5 and noticed that I am getting zip files with no files in them just\ndirectories. If I explicity put whenempty=\"skip\" in the zip task it behaves\ncorrectly per the ant task pdf guide. I saw this was \"fixed\" in bug 30365.", "id": 92232, "time": "2006-08-15T19:53:47Z", "bug_id": 40258, "creation_time": "2006-08-15T19:53:47Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 40258, "text": "I cannot reproduce this.  Please attach the smallest possible example that\nexhibits the problem described.\n\nThanks,\nMatt", "id": 92233, "time": "2006-08-15T20:31:25Z", "creator": "mbenson@apache.org", "creation_time": "2006-08-15T20:31:25Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 40258, "attachment_id": 18723, "id": 92262, "time": "2006-08-16T14:00:03Z", "creator": "riverofcode@gmail.com", "creation_time": "2006-08-16T14:00:03Z", "is_private": false, "text": "Created attachment 18723\nSample run of a stripped down build.xml showing 1.6.2 and 1.6.5 runs\n\nThis is a sample run of ant 1.6.2 and 1.6.5 with the issue I am seeing. Both\nant builds are from source downloaded from ant.apache.org. I created a empty\ndirectory tree under the location of build.xml and tested zipping it."}, {"count": 3, "tags": [], "bug_id": 40258, "text": "gee, thanks for the presumptuousness in assigning the bug to me.  I am looking\nat this as my time allows.", "id": 92348, "time": "2006-08-18T19:38:11Z", "creator": "mbenson@apache.org", "creation_time": "2006-08-18T19:38:11Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "My diagnosis:  the behavior you see for this example is correct.  There are\nfiles to add to the archive; they just happen to be directories.  HOWEVER, if\nyou run <zip> or subclasses with filesonly=\"true\", or against a completely empty\nparent directory, a completely empty archive is created, and this is a bug.  It\nhappens to be a bug that appears fixable by a single if statement in the <zip>\ntask.  Unfortunately I won't be able to commit the fix until next week as I'll\nbe on vacation (holiday to my Euro friends!).  But then...", "id": 92351, "time": "2006-08-18T22:02:02Z", "bug_id": 40258, "creation_time": "2006-08-18T22:02:02Z", "is_private": false}, {"count": 5, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "Fixed the filesonly=\"true\" manifestation of this bug in SVN HEAD.  Should be\npart of the (I suppose now mandatory) second Ant 1.7 beta.", "id": 92640, "time": "2006-08-28T19:51:51Z", "bug_id": 40258, "creation_time": "2006-08-28T19:51:51Z", "is_private": false}]