[{"count": 0, "tags": [], "creator": "paulmcmahan@gmail.com", "attachment_id": null, "is_private": false, "id": 98911, "time": "2007-02-02T11:22:54Z", "bug_id": 41530, "creation_time": "2007-02-02T11:22:54Z", "text": "Geronimo embeds tomcat by wrappering org.apache.catalina.startup.Embedded as a\ngbean.  Geronimo stops an http connector by calling the stop() method of\norg.apache.catalina.connector.Connector.  Depending on the current state of the\nconnector when it is stopped, the socket connected to it can throw the following\nexception:\n\nFeb 2, 2007 2:20:05 PM org.apache.tomcat.util.net.JIoEndpoint$Acceptor run\nSEVERE: Socket accept failed\njava.net.SocketException: Socket closed\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:384)\n        at java.net.ServerSocket.implAccept(ServerSocket.java:450)\n        at java.net.ServerSocket.accept(ServerSocket.java:421)\n        at\norg.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(DefaultServerSocketFactory.java:61)\n        at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:310)\n        at java.lang.Thread.run(Thread.java:613)\n\nThis behavior is intermittent but occurs frequently in the unit test cases for\nGeronimo's tomcat gbean and when the Geronimo server is shut down.\n\nThe exception occurs when the socket opened by JIoEndpoint.Acceptor.run() is\nclosed by JIoEndpoint.unlockAccept().  In that case it seems that the\nSocketException should be ignored.  Checking to see if the JIoEndpoint is\nactually running before logging the error is one way to avoid this problem.  I\nwill attach a patch for that approach shortly."}, {"count": 1, "tags": [], "bug_id": 41530, "is_private": false, "text": "Created attachment 19501\npatch avoids logging SocketException when endpoint has been stopped\n\npatch created against https://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk", "id": 98912, "time": "2007-02-02T11:25:03Z", "creator": "paulmcmahan@gmail.com", "creation_time": "2007-02-02T11:25:03Z", "attachment_id": 19501}, {"count": 2, "text": "Fixed in 6.0.11. I am changing status from VERIFIED to CLOSED.", "bug_id": 41530, "attachment_id": null, "id": 128973, "time": "2009-07-18T06:40:56Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2009-07-18T06:40:56Z", "tags": [], "is_private": false}]