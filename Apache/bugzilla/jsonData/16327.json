[{"count": 0, "text": "Since the new Apache v2.0.44 one of the two Apache processes needs 80 percent \nof processor time while noone is connected to the Apache server. This problem \nwas not in version v2.0.43 and I have only changed the document root while \nletting all other settings in the httpd.conf unchanged from the default config.\nIt's nearly impossible to access my Apache server from now, because each HTTP \naccess takes some minutes to process.", "bug_id": 16327, "attachment_id": null, "id": 29871, "time": "2003-01-22T13:44:10Z", "creator": "knoke@cs.tu-berlin.de", "creation_time": "2003-01-22T13:44:10Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 16327, "attachment_id": null, "id": 29890, "time": "2003-01-22T16:17:18Z", "creator": "wrowe@apache.org", "creation_time": "2003-01-22T16:17:18Z", "is_private": false, "text": "\n  Very little changed in the 'sleeping' accept loop;\n\nhttp://cvs.apache.org/viewcvs/httpd-2.0/server/mpm/winnt/child.c.diff?r1=1.6&r2=1.9\n\n  That code works around some network filters (e.g. firewall & antivirus \n  software) which abused the result code from AcceptEx().\n\n  Because that accept code is optimized for the native Win32 WinSock2 API, it\n  doesn't use the APR network code at all.\n\n  Likewise, the service manager code has no significant changes (it runs it's\n  own thread waiting for service control 'wakeup' events.\n\nhttp://cvs.apache.org/viewcvs/httpd-2.0/server/mpm/winnt/service.c.diff?r1=1.57&r2=1.58\n\n  Do you have any interesting (read: 3rd party) modules installed on this\n  server?  Also, please check your error log for unusual activitiy... you\n  might even want to set the directive LogLevel debug just so you see the\n  low-level errors.  (If you like, *attach*, don't paste, a relevant chunk\n  of that log to this report.)\n\n  Open the task manager, and choose 'View', 'Select Columns...' and add \n  'Threads' to the list.  This will help you identify for us if the parent\n  (a couple of threads) or the child (many threads) is having problems.\n  Please update the bug report when you have more clues.  Thanks.\n\n"}, {"count": 2, "tags": [], "text": "I have no other then the default modules installed. The error.log in \"warn\" \nmode only contains \"normal\" activity like starting the worker threads. But \nthere are a lot of errors (the formerly cleared error.log has 600kb after 20 \nseconds of running Apache) if I set the LogLevel to debug (thx for this hint). \nThe errors are all the same and looking like this:\n\n[Wed Jan 22 17:32:09 2003] [debug] .\\server\\mpm\\winnt\\child.c(523): (OS 10038)\nAn operation was attempted on something that is not a socket.  : winnt_accept: \nAcceptEx failed due to early client disconnect. Reallocate the accept socket \nand try again.\n\nThe process which uses to much processor time is the thread with many childs \n(I have set the count of workers to 250 and it is the process with now 253 \nchild threads).\n", "attachment_id": null, "id": 29894, "creator": "knoke@cs.tu-berlin.de", "time": "2003-01-22T16:42:22Z", "bug_id": 16327, "creation_time": "2003-01-22T16:42:22Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 16327, "is_private": false, "text": "\n  First don't panic... the extra 3 (of 253) threads are maintenance workers.\n\n  So, what to do.  Do you have IPV6 installed on this machine?  Any sort of\n  antivirus or firewall or vpn software? \n\n", "id": 29901, "time": "2003-01-22T19:31:28Z", "creator": "wrowe@apache.org", "creation_time": "2003-01-22T19:31:28Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 16327, "text": "I have running Norton Personal Firewall 2003 and McAfee Antivirus v7.01 on my \nWindowsXP system (without IPv6). I got this error if I disable both programs, \ntoo. Maybe they can not be completely deactivated, because especially the \nfirewall runs deep in the operating system environment.\nBut both programs were running with Apache v2.0.43 without any problems.\nShould I test some other things?\n", "count": 4, "id": 29929, "time": "2003-01-23T13:08:22Z", "creator": "knoke@cs.tu-berlin.de", "creation_time": "2003-01-23T13:08:22Z", "is_private": false}, {"count": 5, "tags": [], "text": "I can cofirm this. I'm running Apache2 on Windows XP with BlackICE as a \nfirewall (as seen in bug #15282). This might be related to the changes made in \nlibhttpd.dll, because I saw the same on .43 when using the \"new\" DLL, although \nit did resolve the AcceptEx issues. I'm not conviced the 3rd party softwares \nare fully to blame (as claimed in bug #8325), because other socket-intensive \napplications work flawlessly despite these softwares. I'm puzzled Apache would \nreact this way if it's due to a less-than-optimal implementation of the TCP/IP-\nstack. That said, I'll run it by ISS and see what they say.", "is_private": false, "id": 29994, "creator": "Kristian.Bergmann@nvg.org", "time": "2003-01-24T11:36:36Z", "bug_id": 16327, "creation_time": "2003-01-24T11:36:36Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 16327, "text": "hmm.. it seems that's all with my bug report. Is it possible to discard some \nchanges from Apache 2.0.44 because all previous versions were running fine on \nmy machine and I haven't changed the firewall settings?\nAnd to agree with Kristian, all other applications are running fine.", "count": 6, "id": 30278, "time": "2003-01-29T16:43:12Z", "creator": "knoke@cs.tu-berlin.de", "creation_time": "2003-01-29T16:43:12Z", "is_private": false}, {"count": 7, "tags": [], "text": "Additionally, just for the heck of it I put up a 1.3.27 server to see if it \ndisplayed any of these features. Oddly enough, it runs without a hitch. Now, \nthat could mean that the v1 series are less strict with regards to how other \napplications interact with it, but that would be illogical. Still, it makes \nfor a nice backup-server.", "is_private": false, "id": 30396, "creator": "Kristian.Bergmann@nvg.org", "time": "2003-01-31T09:51:26Z", "bug_id": 16327, "creation_time": "2003-01-31T09:51:26Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 16327, "attachment_id": null, "is_private": false, "id": 30626, "time": "2003-02-04T11:30:39Z", "creator": "knoke@cs.tu-berlin.de", "creation_time": "2003-02-04T11:30:39Z", "text": "I have tried all 2.0.x versions on my systems right now and (sorry for my \nfirst opinion that all previous 2.0.x versions are working) all these versions \nare not working. But the 1.3.27 version works flawlessly without a single \nerror entry in my error.log (loglevel=debug).\nIt's time to find the bug and I have seen many different knowledge base \narticles in the MSDN library for the \"WSAENOTSOCK\" bug."}, {"count": 9, "tags": [], "bug_id": 16327, "text": "I'm having similar problems, too, running 2.0.44 on Windows 2K. My symptoms \nwere a touch different. The error log showed appropriate startup and shutdown \nmessages, but the CPU utilization was 98-99%. The page never would resolve, it \nwould just hang. Mine hung for about 20 minutes before I killed it in one test. \nIf I stop the server, then the browser would resolve in error page of no answer.\n\nI tried .43 as well and it gave me the error someone else got: \"An operation \nwas attempted on something that is not a socket.  : winnt_accept: AcceptEx \nfailed due to early client disconnect. Reallocate the accept socket and try \nagain.\" My CPU utilization was around 2-3% but still the page wouldn't resolve. \nThe hard drive was spinning hard filling the log with this same error over and \nover again.\n\nI wasn't getting any errors in the Windows error log either.\n\nI finally put in 1.3.27 per suggestions and it worked just fine. No problems.\n", "id": 31650, "time": "2003-02-20T05:29:50Z", "creator": "mark.boyden@noise.org", "creation_time": "2003-02-20T05:29:50Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 16327, "attachment_id": null, "is_private": false, "id": 33699, "time": "2003-03-24T15:30:51Z", "creator": "phil@quietthenloud.net", "creation_time": "2003-03-24T15:30:51Z", "text": "I am getting the same errors. I am using Windows XP Pro (latest patches), \nMcAfee VirusScan 6.0, Apache 2.0.44. I turned off VirusScan and IE still hangs \nwhen I try to access http://localhost:8080. I installed 1.3.27 and I have no \nproblems whatsoever. There is also a 95% CPU utilization by one of the Apache \nthreads. I have no VPN installed. I am also using IIS 5 on port 80 and that \nworks great. IIS 5 and Apache 1.3.27 work on the same machine but 2.0.44 \ndoesn't."}, {"count": 11, "tags": [], "bug_id": 16327, "text": "Minor update:\nAfter an upgrade to BlackICE 2.0.44 appears to start okay (as seen by \nthe \"normal\" entries in the error-log), there's no more looping errors, just a \nsingle warning as the server starts:\n\n[Wed Mar 26 00:36:27 2003] [warn] (OS 10057)A request to send or receive data \nwas disallowed because the socket is not connected and (when sending on a \ndatagram socket using a sendto call) no address was supplied.  : setsockopt\n(SO_UPDATE_ACCEPT_CONTEXT) failed.\n\nUnfortunately, it still uses 90-95% of the CPU when idle, so I'm guessing that \nwarning is a tad more serious than the error-level indicates.", "id": 33815, "time": "2003-03-26T09:22:37Z", "creator": "Kristian.Bergmann@nvg.org", "creation_time": "2003-03-26T09:22:37Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 16327, "text": "I'm also having this problem - it's basically the stock 2.0.45; I had the php \nmodule installed but I removed it to confirm it wasn't that.  I'm using OpenBSD \n3.1.  After I flooded the server for a minute or so of heavy use, three httpd \nthreads consume 100% of the CPU... even after I stopped flooding it.\n\nThis happens (not exclusively) when I run a CGI script (written in C) that \nproduces a lot of output; I run the script from several browser windows just to \nget a few connections.  While the scripts running, I see it listed in 'top' \n(the program only takes 5% or so while running)... but eventually, I see a \nfew 'httpd' entries up there, taking 100% total (and neither the scripts nor \nany pages will be served).", "count": 12, "id": 35706, "time": "2003-04-21T14:42:22Z", "creator": "capnjack41@yahoo.com", "creation_time": "2003-04-21T14:42:22Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 16327, "attachment_id": null, "is_private": false, "id": 35709, "time": "2003-04-21T16:08:06Z", "creator": "trawick@apache.org", "creation_time": "2003-04-21T16:08:06Z", "text": "for the OpenBSD user:\n\ncan you attach to the looping httpd processes with gdb and see what they are doing?\n"}, {"count": 14, "tags": [], "bug_id": 16327, "attachment_id": null, "id": 35720, "time": "2003-04-21T18:47:34Z", "creator": "capnjack41@yahoo.com", "creation_time": "2003-04-21T18:47:34Z", "is_private": false, "text": "I tried attaching, but it appears gdb can't find a symbol for where they all \nseem to be at when I attach to them:\n\n  (gdb) attach 7411\n  Attaching to process 7411\n  0x40127618 in ?? ()\n\nI also tried compiling with different ./configure flags, such as --enable-\nmaintainer-mode  and  --without-exec-strip, make/make install-ing, and creating \nthis scenario by hitting the server with requests for my script repeatedly.  \nThe configure options don't seem to help, though; it just gives that address.\n\nHere's my configure line, if that's at all helpful:\n./configure --without-exec-strip --prefix=/opt/httpd --enable-so"}, {"count": 15, "tags": [], "bug_id": 16327, "attachment_id": null, "is_private": false, "id": 41549, "time": "2003-07-26T09:22:34Z", "creator": "rolfbasura@ya.com", "creation_time": "2003-07-26T09:22:34Z", "text": "I had the same problem, after installing McAfee Home Edition 7.02 Demo 30 \nApache2 didn't respond anymore, and in TaskManager one of the two apache \nprocesses was running without stop (95-97%). Uninstalled McAfee and Apache2 \nworks perfectly..."}, {"count": 16, "tags": [], "creator": "jwoolley@apache.org", "attachment_id": null, "id": 43505, "time": "2003-08-31T02:16:25Z", "bug_id": 16327, "creation_time": "2003-08-31T02:16:25Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 8325 ***"}]