[{"count": 0, "tags": [], "bug_id": 6787, "is_private": false, "text": "build.xml:\n\n<?xml version=\"1.0\"?>\n<project name=\"test\" default=\"compile\">\n    <property name=\"build.compiler\" value=\"javac1.3\"/>\n\n    <property name=\"src\" value=\"./src\"/>\n    <property name=\"classes\" value=\"./classes\"/>\n\n    <target name=\"init\">\n        <mkdir dir=\"${classes}\"/>\n    </target>\n\n    <target name=\"compile\" depends=\"init\">\n        <javac srcdir=\"${src}\" destdir=\"${classes}\" debug=\"on\"/>\n    </target>\n</project>\n\nBut I've received:\n\nAnt version 1.4.1 compiled on November 20 2001\nBuildfile: build.xml\nDetected Java version: 1.3 in: /soft/opt/j2sdk1.3.1/jre\nDetected OS: Linux\nparsing buildfile /home/karpov/temp/ant_test/build.xml with URI = file:/home/karpov/temp/ant_test/build.xml\nProject base dir set to: /home/karpov/temp/ant_test\n [property] Override ignored for build.compiler\nBuild sequence for target `compile' is [init, compile]\nComplete build sequence is [init, compile]\n\ninit:\n    [mkdir] Created dir: /home/karpov/temp/ant_test/classes\n\ncompile:\n    [javac] Test.java added as /home/karpov/temp/ant_test/classes/Test.class doesn't exist.\n    [javac] Compiling 1 source file to /home/karpov/temp/ant_test/classes\n    [javac] Using jikes compiler\n    [javac] Compilation args: jikes -d /home/karpov/temp/ant_test/classes -classpath \n/home/karpov/temp/ant_test/classes:/usr/share/java/ant.jar:/usr/share/java/ant-optional.jar:/usr/share/java/jaxp_parser.jar:/soft/opt/j2sdk1.3.1/lib/tools.jar:/soft/opt/j2sdk1.3.1/jre/lib/rt.jar:/home/karpov/temp/ant_test/src \n-g\n    [javac] File to be compiled:\n    /home/karpov/temp/ant_test/src/Test.java", "id": 11346, "time": "2002-03-01T15:09:45Z", "creator": "karpov@ispras.ru", "creation_time": "2002-03-01T15:09:45Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 6787, "text": "Note this line of the output:\n\n[property] Override ignored for build.compiler\n\nIn other words, this has nothing to do with compilation itself - your problem \nis that your build.compiler property is being set and then can't be overridden.\n\nJon\n", "count": 1, "id": 11348, "time": "2002-03-01T15:13:16Z", "creator": "skeet@pobox.com", "creation_time": "2002-03-01T15:13:16Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 6787, "is_private": false, "text": "I am going to close this; jon's comment is correct. if you want to change \ncompiler and something has set the property before ant starts, you need to use \nthe compiler attribute of <javac>", "id": 11409, "time": "2002-03-03T07:20:38Z", "creator": "steve_l@iseran.com", "creation_time": "2002-03-03T07:20:38Z", "attachment_id": null}, {"count": 3, "text": "Excuse me.\nBut javadocs for this version of Ant does not contains information about\n\"compiler\" attribute of <javac> task. And, as I see from source code, Javac\ntask does not support this property.\nBut, instead of this, I see the following lines at JavaDoc:\n<...\nIt is possible to use different compilers. This can be selected with the\n\"build.compiler\" property. Here are the choices:-\n    * classic (the standard compiler of JDK 1.1/1.2) - javac1.1 and javac1.2 can\n      be used as aliases\n    * modern (the standard compiler of JDK 1.3/1.4) - javac1.3 and javac1.4 can\n      be used as aliases\n    * jikes (the Jikes compiler)\n    * jvc (the Command-Line Compiler from Microsoft's SDK for Java / Visual J++) -\n      microsoft can be used as an alias\n    * kjc (the kopi compiler)\n    * gcj (the gcj compiler from gcc)\n    * sj (Symantec java compiler) - symantec can be used as an alias\n    * extJavac (run either modern or classic in a JVM of its own)\n...>\n", "creator": "karpov@ispras.ru", "attachment_id": null, "id": 11430, "time": "2002-03-04T13:23:36Z", "bug_id": 6787, "creation_time": "2002-03-04T13:23:36Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 6787, "is_private": false, "text": "I believe the \"compiler\" attribute is part of 1.5 - at least that's the way\nit looks from the docs.\n\nUntil then, you can use the build.compiler property, but I suspect you'll\nneed to set it on the command line.\n\nJon\n", "id": 11431, "time": "2002-03-04T13:28:23Z", "creator": "skeet@pobox.com", "creation_time": "2002-03-04T13:28:23Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 6787, "text": "aah, you are both right; it only went in to CVS last month. Sorry for the \nconfusion.\n\nAnyway, to get the new behavior you probably need to upgrade; a hack using \n<antcall> to call the compile target with a new property wont work if the \ncompiler has been set in the ANT_OPTS env variable because those properties \noverride everything.\n\nEugene, looks like your ANT_OPTS does set build.compiler to jikes or \nsomething; unset this if you want to control compilers, if you dont want to \nrun 1.5 yet", "count": 5, "id": 11440, "time": "2002-03-04T18:27:57Z", "creator": "steve_l@iseran.com", "creation_time": "2002-03-04T18:27:57Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 6787, "attachment_id": null, "id": 11468, "time": "2002-03-05T13:05:49Z", "creator": "karpov@ispras.ru", "creation_time": "2002-03-05T13:05:49Z", "is_private": false, "text": "I've checked ant executing script and occurs the following lines:\n\n# Allow Jikes support\nif [ -f /usr/bin/jikes ] ; then\n  # Jikes specific options\n  if [ ! -z $JIKESPATH ] ; then\n    JIKES_OPTS=\"-Dbuild.compiler=jikes -Djikes.class.path=$JIKESPATH\"\n  else\n    JIKES_OPTS=\"-Dbuild.compiler=jikes\"\n  fi\n  # Append to other Ant options\n  ANT_OPTS=\"$ANT_OPTS $JIKES_OPTS\"\nfi\n\nSo, if I have jikes installed, I can not use other compilers at all. I even can not\nuse ANT_OPTS specify my own compiler.\n"}, {"count": 7, "tags": [], "creator": "skeet@pobox.com", "is_private": false, "id": 11469, "attachment_id": null, "bug_id": 6787, "creation_time": "2002-03-05T13:07:46Z", "time": "2002-03-05T13:07:46Z", "text": "I agree that we should fix this somehow, but for the moment it seems reasonable\nfor the OP to just change the script - that's what's causing the problem, and\nthe exact bit of it has been identified. Changing it shouldn't be difficult.\n\nJon\n"}, {"count": 8, "tags": [], "text": "Eugene, the script snippet is not from a script that ships with Ant - not an\nAnt bug.\n\nThe CVS version gives you the compiler attribute to override the build.compiler\nsetting.\n\nI'm closing this bug.", "is_private": false, "id": 12118, "creator": "bodewig@apache.org", "time": "2002-03-21T09:21:34Z", "bug_id": 6787, "creation_time": "2002-03-21T09:21:34Z", "attachment_id": null}]