[{"count": 0, "tags": [], "bug_id": 35622, "attachment_id": null, "is_private": false, "id": 77021, "time": "2005-07-06T01:13:01Z", "creator": "alnath@gmx.de", "creation_time": "2005-07-06T01:13:01Z", "text": "I am getting Segmentation Faults with apache 2.0.54 with php-4.3.11.\nThis happens when I test the web-server with \"siege\" a load testing and\nbenchmarking tool. Hundreds of this messages are in the log:\n....\n[Tue Jul 05 23:40:44 2005] [notice] child pid 1117 exit signal Bus error (10)\n[Tue Jul 05 23:40:52 2005] [notice] child pid 1118 exit signal Segmentation\nfault (11)\n....\nI compiled the server with gcc 2.95, running Solaris 9 on a sparc-system.\nThe same happens with gcc 3.4. \nI start the configure script with the following options:\n./configure --prefix=/usr/apache2 --enable-so --enable-ssl --with-mpm=worker\n\nThe server produces no coredump, although I put the CoreDumpDirectory Directive\nin the conf-file. So I started httpd with gdb, to get a backtrace :\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to LWP 23]\n0xfe907d74 in ?? ()\n(gdb) where\n#0  0xfe907d74 in ?? ()\n#1  0xfe8fac60 in ?? ()\n#2  0xfe8fad84 in ?? ()\n#3  0xfe8f49c8 in ?? ()\n#4  0xfe8f4c0c in ?? ()\n#5  0xfe8f4c34 in ?? ()\n#6  0xfe9fd4b0 in ?? ()\n#7  0xfe9fd72c in ?? ()\n#8  0xfea025b8 in ?? ()\n#9  0xfe9e6790 in ?? ()\n#10 0xfe9af5b4 in ?? ()\n#11 0xfea060b0 in ?? ()\n#12 0x00063ea0 in ap_run_handler (r=0x4503f0) at config.c:152\n#13 0x0006449c in ap_invoke_handler (r=0x4503f0) at config.c:364\n#14 0x0004ea40 in ap_process_request (r=0x4503f0) at http_request.c:249\n#15 0x00049cec in ap_process_http_connection (c=0x2795b8) at http_core.c:251\n#16 0x0006f9e8 in ap_run_process_connection (c=0x2795b8) at connection.c:43\n#17 0x0006fcfc in ap_process_connection (c=0x2795b8, csd=0x2794c8) at\nconnection.c:176\n#18 0x00060868 in process_socket (p=0x279490, sock=0x2794c8, my_child_num=0,\nmy_thread_num=20, bucket_alloc=0x44e3b0)\n    at worker.c:521\n#19 0x00060f48 in worker_thread (thd=0x13f548, dummy=0x14) at worker.c:835\n#20 0xff13609c in ?? ()\n\n \nkind regards"}, {"count": 1, "tags": [], "bug_id": 35622, "attachment_id": null, "text": "It looks like this is most likely a bug in PHP.  Can you compile PHP with debug\nsymbols?  It looks like they were stripped.", "id": 77022, "time": "2005-07-06T01:28:24Z", "creator": "chip@force-elite.com", "creation_time": "2005-07-06T01:28:24Z", "is_private": false}, {"count": 2, "text": "Ugh, you are using PHP with a threaded MPM.  This is not supported upstream. \nTread carefully.  Consider using Prefork.", "bug_id": 35622, "is_private": false, "id": 77023, "time": "2005-07-06T01:29:05Z", "creator": "chip@force-elite.com", "creation_time": "2005-07-06T01:29:05Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 35622, "attachment_id": null, "id": 77030, "time": "2005-07-06T11:42:54Z", "creator": "alnath@gmx.de", "creation_time": "2005-07-06T11:42:54Z", "is_private": false, "text": "(In reply to comment #2)\n> Ugh, you are using PHP with a threaded MPM.  This is not supported upstream. \n> Tread carefully.  Consider using Prefork.\n\nok, that was the problem, I use mpm-worker=PREFORK\nand it is working fine now.\n\nThanks a lot for your help  "}]