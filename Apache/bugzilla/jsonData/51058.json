[{"count": 0, "tags": [], "creator": "chris@blaze.io", "attachment_id": 26884, "text": "Created attachment 26884\nSuggested patch\n\nThe Javadoc for javax.servlet.AsyncContext.setTimeout() and javax.servlet.AsyncContext.getTimeout() states that:\n\n\"A timeout value of zero or less indicates no timeout.\"\n\nHowever, this doesn't seem to be the case. A timeout value of zero or less will result in an immediate timeout.\n\nLooking through the code, I think the timeout is enforced in org.apache.tomcat.util.net.AprEndpoint.AsyncTimeout.run() or org.apache.tomcat.util.net.JIoEndpoint.AsyncTimeout.run().\n\nI've attached a patch which changes the timeout logic. I believe org.apache.tomcat.util.net.NioEndpoint.timeout() also needs a change, but that one's not as clear to me.", "id": 145760, "time": "2011-04-13T16:22:42Z", "bug_id": 51058, "creation_time": "2011-04-13T16:22:42Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 51058, "text": "This has been fixed in 7.0.x and will be included in 7.0.13 onwards.\n\nThanks for the patch. It was inverted but it was simple enough to figure out what you were getting at.", "id": 145824, "time": "2011-04-16T19:48:30Z", "creator": "markt@apache.org", "creation_time": "2011-04-16T19:48:30Z", "is_private": false, "attachment_id": null}]