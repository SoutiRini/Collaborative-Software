[{"count": 0, "text": "Hello,\nI don't know if this is the right component.\nMy Enhancement concerns new Tomcat JDBC POOL.\n\nLooking at code I think that DataSourceProxy#createPool should not be synchronized but use another private method that is synchronized and used only when creation is needed, something like that:\n    /**\n     * Sets up the connection pool, by creating a pooling driver.\n     * @return Driver\n     * @throws SQLException\n     */\n    public ConnectionPool createPool() throws SQLException {\n        if (pool != null) {\n            return pool;\n        } else {\n        \treturn pCreatePool();\n        }\n    }\n\n    /**\n     * \n     * @return\n     * @throws SQLException\n     */\n    private synchronized ConnectionPool pCreatePool() throws SQLException {\n        if (pool != null) {\n            return pool;\n        } else {\n            pool = new ConnectionPool(poolProperties);\n            return pool;\n        }\n    }\n\n\nCurrently since createPool() is called for lots of getters we get this synchro IMPACT without really needing it.\n\nRegards\nPhilippe\nhttp://www.ubik-ingenierie.com", "bug_id": 51185, "is_private": false, "id": 146264, "time": "2011-05-11T10:21:44Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-05-11T10:21:44Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "Fix product / component", "id": 146265, "time": "2011-05-11T10:32:34Z", "bug_id": 51185, "creation_time": "2011-05-11T10:32:34Z", "is_private": false, "attachment_id": null}, {"count": 2, "text": "Created attachment 26984\nPatch that changes synchronization", "bug_id": 51185, "is_private": false, "id": 146267, "time": "2011-05-11T19:39:42Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-05-11T19:39:42Z", "tags": [], "attachment_id": 26984}, {"count": 3, "text": "Created attachment 27023\nFix to synchro issue\n\nThis patch cancels the previous one which was bugged.\nPhilippe", "bug_id": 51185, "is_private": false, "id": 146423, "time": "2011-05-18T16:22:27Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-05-18T16:22:27Z", "tags": [], "attachment_id": 27023}, {"count": 4, "text": "Created attachment 27025\nReal fix\n\nSorry I messed up with another bug.\n\nPhilippe Mouawad\nhttp://www.ubik-ingenierie.com", "bug_id": 51185, "is_private": false, "id": 146425, "time": "2011-05-18T16:34:19Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-05-18T16:34:19Z", "tags": [], "attachment_id": 27025}, {"count": 5, "tags": [], "bug_id": 51185, "text": "Hello,\nIs there something missing in the patch ?\nDo you think it is wrong  ?\n\nThank you\nRegards\nPhilippe", "id": 146497, "time": "2011-05-20T21:06:25Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2011-05-20T21:06:25Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 51185, "text": "sorry for the delay, fixed in r1125573", "id": 146503, "time": "2011-05-20T22:03:36Z", "creator": "fhanik@apache.org", "creation_time": "2011-05-20T22:03:36Z", "is_private": false, "attachment_id": null}]