[{"count": 0, "tags": [], "bug_id": 52830, "is_private": false, "text": "I try to use tomcat 7 with hibernate 4.x I got an Naming exception on getting dataSource with javax.naming.Name.\n\nWorks when search with string. But hibernate migrate to Name in their code.\n\nSee:\nhttps://hibernate.onjira.com/browse/HHH-7012", "id": 154540, "time": "2012-03-05T15:25:49Z", "creator": "easyrasta@gmail.com", "creation_time": "2012-03-05T15:25:49Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 52830, "attachment_id": null, "is_private": false, "id": 154560, "time": "2012-03-06T09:57:15Z", "creator": "easyrasta@gmail.com", "creation_time": "2012-03-06T09:57:15Z", "text": "Doesn't work with a javax.naming.Name create with key \"java:comp/env/jdbc/mydb\"\nIf you look at http://svn.apache.org/viewvc/tomcat/trunk/java/org/apache/naming/SelectorContext.java?revision=1225625&view=markup\n\nYou could see that prefix is only \"java:\" and  protected Name parseName(Name name) return name.getSuffix(1)"}, {"attachment_id": null, "tags": [], "bug_id": 52830, "is_private": false, "count": 2, "id": 154716, "time": "2012-03-08T22:44:45Z", "creator": "markt@apache.org", "creation_time": "2012-03-08T22:44:45Z", "text": "Fixed in trunk and 7.0.x and will be included in 7.0.27 onwards.\n\nThanks for the report."}, {"attachment_id": null, "tags": [], "bug_id": 52830, "text": "The same bug happen on Tomcat 6.", "count": 3, "id": 154834, "time": "2012-03-12T18:20:16Z", "creator": "lachamelle@gmail.com", "creation_time": "2012-03-12T18:20:16Z", "is_private": false}, {"count": 4, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Re-opening to fix in Tomcat 6.", "id": 154843, "time": "2012-03-12T19:52:17Z", "bug_id": 52830, "creation_time": "2012-03-12T19:52:17Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "Fix proposed for 6.0.x.", "attachment_id": null, "bug_id": 52830, "id": 154844, "time": "2012-03-12T19:53:46Z", "creator": "markt@apache.org", "creation_time": "2012-03-12T19:53:46Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 52830, "attachment_id": null, "text": "Regarding the patch - r1298635 - I see one minor (theoretical?) issue.\n\nIt calls\nName result = new CompositeName();\n..\nresult.addAll(name.getSuffix(1));\n\n\nLooking at CompositeName#addAll(Name) in Java 6u31 I see that it expects that (Name instanceof CompositeName) and throws InvalidNameException if it is not. With a generic Name.getSuffix(int) that is not true.\n\nThough I do not see how other name implementations could be used here.\n\nHere is alternative implementation of the fix:\nTestNamingContext passes with it as well.\n[[[\n                Name result = name.getSuffix(1);\n                result.add(0, name.get(0).substring(prefixLength));\n                return result;\n]]]", "id": 155162, "time": "2012-03-21T00:47:51Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2012-03-21T00:47:51Z", "is_private": false}, {"count": 7, "tags": [], "text": "(In reply to comment #6)\nI've applied this alternative implementation in r1304468 (trunk), r1304471 (TC7)", "attachment_id": null, "bug_id": 52830, "id": 155264, "time": "2012-03-23T16:44:30Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2012-03-23T16:44:30Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 52830, "is_private": false, "text": "Fixed in 6.0.x and will be included in 6.0.36 onwards.", "id": 160352, "time": "2012-06-29T19:38:24Z", "creator": "markt@apache.org", "creation_time": "2012-06-29T19:38:24Z", "attachment_id": null}, {"count": 9, "tags": [], "creator": "sebastien.michea@manaty.net", "is_private": false, "text": "on tomcat 7.0.29, with hibernate 4.1.5 final, i get the same error when defining my jdbc/mbsousdb in web.xml and context.xml then using\n\n        <non-jta-data-source>java:/comp/env/jdbc/mbsousdb</non-jta-data-source>  \n\nin persistence.xml.\nI tried jdbc/mbsousdb, java:comp/env/jdbc/mbsousdb an java:/comp//env/jdbc/mbsousdb, without success.", "id": 160811, "time": "2012-07-23T05:47:11Z", "bug_id": 52830, "creation_time": "2012-07-23T05:47:11Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Bugzilla is not a support forum and there is insufficient information in comment #9 to determine if there is a bug or if it is just a configuration error. Please follow-up on the users mailing list and only re-open this issue if it is determined there is still a bug to fix. If you do re-open this issue, you'll need to provide a test case (ideally the simplest web application possible - i.e. without hibernate) that demonstrates the issue. The simpler the tets case, the easier it will be for the developers to investigate,", "id": 160870, "time": "2012-07-24T16:34:40Z", "bug_id": 52830, "creation_time": "2012-07-24T16:34:40Z", "attachment_id": null}]