[{"count": 0, "tags": [], "creator": "colbec@start.ca", "attachment_id": null, "text": "Using fresh install of Opensuse 11.4, kernel 2.6.38, httpd 2.2.17.\nCompile of httpd with --enable-so for use with PHP appears to work correctly.\n\nWith the following HTML code\n\n<html>\n<p>crash test</p>\n<p>\n<form action='phpcrashtest.html' method='POST'>\n<input type='submit' name='button' value='submit' />\n</form>\n</p>\n<p>ended</p>\n</html>\n\nThe page initially loads correctly, but clicking the submit button with method=POST causes segmentation fault in httpd. method=GET works correctly.\n\nUsing httpd -X to restrict to one process and tracking with gdb:\n\n(gdb) backtrace\n#0  0xffffe424 in __kernel_vsyscall ()\n#1  0xb75d7a08 in accept4 () from /lib/libc.so.6\n#2  0xb76ea411 in apr_socket_accept (new=0xbfb123cc, sock=0x80d3758, \n    connection_context=0x83655a8) at network_io/unix/sockets.c:210\n#3  0x080ad9cc in unixd_accept (accepted=0xbfb1242c, lr=0x80d3738, \n    ptrans=0x83655a8) at unixd.c:506\n#4  0x080ab920 in child_main (child_num_arg=<value optimized out>)\n    at prefork.c:643\n#5  0x080abc9f in make_child (s=0x80d9ce0, slot=0) at prefork.c:707\n#6  0x080ac4fc in ap_mpm_run (_pconf=0x80d50a8, plog=0x81131a0, s=0x80d9ce0)\n    at prefork.c:983\n#7  0x080693fc in main (argc=2, argv=0xbfb12774) at main.c:739\n\nI have reinstalled OS, kernel and httpd several times, result is consistent. Opensuse 11.3 installation was not a problem, Apache httpd worked correctly. I have opened the issue on Opensuse forums but no feedback.\n\nI have marked this a major issue since when working with method=POST in PHP, the segfault can result in Apache trying to serve up PHP code in plain text format. Suggestions appreciated to get more information.", "id": 145310, "time": "2011-03-27T07:46:32Z", "bug_id": 50978, "creation_time": "2011-03-27T07:46:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 50978, "text": "I have the similar problem. after updating to version,the server loads the files but does not process any data from the user. Chromium gives an empty response error.\n\nLog file :\n(relevant info)\n\n\n[Mon May 09 22:21:10 2011] [notice] Apache/2.2.17 (Unix) mod_ssl/2.2.17 OpenSSL/1.0.0d DAV/2 PHP/5.3.6 with Suhosin-Patch configured -- resuming normal operations\n[Mon May 09 22:21:35 2011] [notice] child pid 4799 exit signal Segmentation fault (11)\n[Mon May 09 22:21:35 2011] [notice] child pid 4802 exit signal Segmentation fault (11)", "id": 146229, "time": "2011-05-10T04:31:05Z", "creator": "eshtonrob@gmail.com", "creation_time": "2011-05-10T04:31:05Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 50978, "attachment_id": null, "id": 146231, "time": "2011-05-10T05:35:45Z", "creator": "wrowe@apache.org", "creation_time": "2011-05-10T05:35:45Z", "is_private": false, "text": "With the php module not loaded, does the segfault remain?\n\nIt's entirely possible your mod_php is closing the sd of the listener or\naccept socket.\n\nYou can try disabling EnableSendfile and EnableMMAP.  We don't currently\nhave a way to disable socket reuse, which I expect is the origin of the\nissue and bound to either the behavior of your kernel/network stack socket\nfd handling or something your mod_php is doing."}, {"count": 3, "tags": [], "creator": "eshtonrob@gmail.com", "attachment_id": null, "text": "(In reply to comment #2)\n> With the php module not loaded, does the segfault remain?\n> \n> It's entirely possible your mod_php is closing the sd of the listener or\n> accept socket.\n> \n> You can try disabling EnableSendfile and EnableMMAP.  We don't currently\n> have a way to disable socket reuse, which I expect is the origin of the\n> issue and bound to either the behavior of your kernel/network stack socket\n> fd handling or something your mod_php is doing.\n\nUnloaded the php module and the server seems find. Most of my website is written in php so i need at least a workaround though.", "id": 146232, "time": "2011-05-10T06:36:01Z", "bug_id": 50978, "creation_time": "2011-05-10T06:36:01Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 50978, "text": "You need to reach out to your module author, the PHP module is not maintained\nby the ASF.", "id": 146233, "time": "2011-05-10T06:39:33Z", "creator": "wrowe@apache.org", "creation_time": "2011-05-10T06:39:33Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "text": "Note that your PHP module isn't maintained by the PHP group, either.\n\nYou need to go to the author of the PHP forked module.", "id": 146234, "time": "2011-05-10T06:40:30Z", "bug_id": 50978, "creation_time": "2011-05-10T06:40:30Z", "is_private": false}]