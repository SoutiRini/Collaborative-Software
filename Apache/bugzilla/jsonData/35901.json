[{"count": 0, "tags": [], "creator": "chuck.sumpter@lmco.com", "attachment_id": null, "text": "Jk version in use is a 1.2.14 binary.\n\nScenario: jkstatus page opens, click worker #1, check \"Stopped\" and \"Update\nWorker\".  Stat now shows stopped. \n\nOpen second browser (on a server).  Navigate to the same jkstatus page.  Worker\n#1 stat is OK.\n\nBoth browsers are IE5.", "id": 77729, "time": "2005-07-27T17:47:20Z", "bug_id": 35901, "creation_time": "2005-07-27T17:47:20Z", "is_private": false}, {"text": "Maybe your shared memory setup for mod_jk is not correct. Could you post mod_jk\nconfiguration (e.g. workers.properties) and the Jk directives from httpd.conf?\n\nWhich web server are you using (type and version)?\n\nI assume mod_jk (i.e. the web server) is running on Win2003?\n\nYou should also set JkLogLevel to trace and post the part of the JkLogFile from\naccessing /status with correct information, then changing the stopped, until\naccessing /status and again seeing the worker non-stopped.\n", "tags": [], "bug_id": 35901, "is_private": false, "count": 1, "id": 77917, "time": "2005-08-01T21:17:47Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2005-08-01T21:17:47Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 35901, "attachment_id": null, "id": 77921, "time": "2005-08-01T23:00:48Z", "creator": "chuck.sumpter@lmco.com", "creation_time": "2005-08-01T23:00:48Z", "is_private": false, "text": "(In reply to comment #1)\n> Maybe your shared memory setup for mod_jk is not correct. Could you post \nmod_jk\n> configuration (e.g. workers.properties) and the Jk directives from httpd.conf?\n> Which web server are you using (type and version)?\n> I assume mod_jk (i.e. the web server) is running on Win2003?\n> You should also set JkLogLevel to trace and post the part of the JkLogFile \nfrom\n> accessing /status with correct information, then changing the stopped, until\n> accessing /status and again seeing the worker non-stopped.\n\nI thought I'd given the environment, but let me try again.  The server OS is \nWin2003.  The JK (ISAPI) plugin has been configured according to \nhttp://jakarta.apache.org/tomcat/connectors-doc/howto/iis.html\n\nI wondered what happened to the shm, expecting something similar to the one \nused by jk2, but could find no reference to it in any of the how-to doc. Or the \ndoc with the source code.  \n\nI will defer the config and log postings until the issue of shared memory in \nthe jk1.2.14 is resolved. \n\nBTW - URL for the binary dist that I used was: \n\nhttp://www.apache.org/dist/jakarta/tomcat-connectors/jk/binaries/win32/jk-\n1.2.14/"}, {"text": "(In reply to comment #1)\n> Maybe your shared memory setup for mod_jk is not correct. Could you post mod_jk\n> configuration (e.g. workers.properties) and the Jk directives from httpd.conf?\n> \n> Which web server are you using (type and version)?\n> \n> I assume mod_jk (i.e. the web server) is running on Win2003?\n> \n> You should also set JkLogLevel to trace and post the part of the JkLogFile from\n> accessing /status with correct information, then changing the stopped, until\n> accessing /status and again seeing the worker non-stopped.\n> \n\n\n\nFYI - according to the Apache Jakarta Tomcat Connectors change log ...\n\n\"Added shared memory to allow dynamic configuration. Shared memory is needed\nonly for unix platform and web servers having multiple child processes. For\nApache web server two new directives has been added (JkShmFile and JkShmSize).\n(mturk)\" \n\nSee: http://jakarta.apache.org/tomcat/tomcat-4.1-doc/jk2/changelog.html", "tags": [], "bug_id": 35901, "is_private": false, "count": 3, "id": 77935, "time": "2005-08-02T15:13:18Z", "creator": "chuck.sumpter@lmco.com", "creation_time": "2005-08-02T15:13:18Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 35901, "attachment_id": 15926, "id": 78184, "time": "2005-08-05T22:06:43Z", "creator": "chuck.sumpter@lmco.com", "creation_time": "2005-08-05T22:06:43Z", "is_private": false, "text": "Created attachment 15926\nJK log.  Loglevel=trace\n\nSee most recent comments"}, {"count": 5, "tags": [], "bug_id": 35901, "text": "Created attachment 15927\nworkers.properties", "id": 78185, "time": "2005-08-05T22:07:08Z", "creator": "chuck.sumpter@lmco.com", "creation_time": "2005-08-05T22:07:08Z", "is_private": false, "attachment_id": 15927}, {"count": 6, "tags": [], "creator": "chuck.sumpter@lmco.com", "attachment_id": 15928, "text": "Created attachment 15928\nuriworkermap.properties", "id": 78186, "time": "2005-08-05T22:07:37Z", "bug_id": 35901, "creation_time": "2005-08-05T22:07:37Z", "is_private": false}, {"count": 7, "tags": [], "creator": "chuck.sumpter@lmco.com", "attachment_id": null, "text": "Attached log reflect the following activity. \n\nOpened jkstatus in browser.  Clicked on apj13 Tomcat1.  Checked the Disabled\ncheck box.  Clicked Update Worker.  tomcat1 stat=Disabled. \n\nOpened jkstatus in second browser.  tomcat1 stat=OK.", "id": 78187, "time": "2005-08-05T22:09:53Z", "bug_id": 35901, "creation_time": "2005-08-05T22:09:53Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 35901, "is_private": false, "id": 78232, "creation_time": "2005-08-08T17:05:45Z", "time": "2005-08-08T17:05:45Z", "creator": "mturk@apache.org", "text": "This works although it might give some problems with already\nopened browsers and hitting 'refresh'.\n\nIf you open a new browser instance the values will be shown correctly.\nEven for the existing browsers the correct values will be shown after\n60 seconds, and that depends on the browser itself an how it deals with\n'Pragma: no-cache' header.\n\nI see this as irrelevant for any 'normal' usage of the lb manager.\n", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 35901, "text": "(In reply to comment #8)\n> This works although it might give some problems with already\n> opened browsers and hitting 'refresh'.\n> \n> If you open a new browser instance the values will be shown correctly.\n> Even for the existing browsers the correct values will be shown after\n> 60 seconds, and that depends on the browser itself an how it deals with\n> 'Pragma: no-cache' header.\n> \n> I see this as irrelevant for any 'normal' usage of the lb manager.\n> \n\nA Browser refresh retained the settings after the use of the Disabled check box\nand the Update Worker button.  \n\n\"values will be shown correctly\".  Do you mean by this, that the\nworkers.properties will be read and those values displayed.  If this is true,\nthen the update worker dynamically is pretty worthless. \n\n\"'Pragma: no-cache' header\" The application I support uses this header. We've\nnever had any problems with it. \n\n\"I see this as irrelevant for any 'normal' usage of the lb manager.\" One has to\nwonder what you call 'normal'?  \n\nLet me frame my response from the perspective of someone moving from JK2 to\njk1.2.14.  We made heavy use of the Disabled flag in the workers2.properties to\nshut off new sessions to a worker (jvmroute).  Under JK2, when this setting was\nchanged and the reset link used on the jkstatus page, the disabled setting was\nretained until changed.  \n\nMy expectations for jk1.2.14 were that it would act in a similar manner.  If\nthat was a bad assumption, then what does dynamic configuration mean.  I've read\nevery scrap of doc I can find on this topic.  If I missed something, please\npoint me to where this is discussed.", "id": 78235, "time": "2005-08-08T17:21:04Z", "creator": "chuck.sumpter@lmco.com", "creation_time": "2005-08-08T17:21:04Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 35901, "is_private": false, "text": "Please do not reopen this case.\nIf you think that this is still a problem then open a thread on\nthe tomcat-dev@.\n\nAll that I can say is that it works for me. If I update any param it\nis correctly shown in the browser.\nIt is also correctly shown in any newly opened browser. I agree that there\nmight be problems with already opened browsers, but I really have no idea\nwhy, and like said, I suspect it has to be related with browser catching\nthe data.\n\n", "id": 78236, "time": "2005-08-08T17:32:52Z", "creator": "mturk@apache.org", "creation_time": "2005-08-08T17:32:52Z", "attachment_id": null}]