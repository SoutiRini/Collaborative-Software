[{"count": 0, "tags": [], "text": "stephanie.bodoff@sun.com wrote:\n\n> I just tried renaming all my included JSP page fragments to use the \n> extension .jspf and discovered that if I try to do a pageContext.include \n> of one of these fragments, it bombs with the exception below.\n> \n> If you're curious, the reason why I am doing a pageContext.include is \n> that the fragments are composed into a page with my template tag library.\n> \n> This bug is very reproducible. I go back and forth renaming my banner \n> fragment banner.jsp and banner.jspf and it only fails when its named \n> .jspf. It fails the same way on Tomcat and J2EE SDK 1.4.\n> \n> \n> 2002-10-16 17:30:54 ApplicationDispatcher[/bookstore3] Servlet.service() \n> for servlet default threw exception\n> \n> java.lang.IllegalStateException\n> \n>     at \n>\norg.apache.jasper.runtime.ServletResponseWrapperInclude.getOutputStream(ServletResponseWrapperInclude.java:110)\n> \n>     at \n>\norg.apache.catalina.servlets.DefaultServlet.serveResource(DefaultServlet.java:1022)\n> \n>     at \n> org.apache.catalina.servlets.DefaultServlet.doGet(DefaultServlet.java:506)\n> \n>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n> \n>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:194)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:727)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:616)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)\n> \n>     at \n>\norg.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:833)\n> \n>     at \n> org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:427)\n> \n>     at template.InsertTag.doEndTag(Unknown Source)\n> \n>     at \n> org.apache.jsp.template_jsp._jspx_meth_tt_insert_1(template_jsp.java:912)\n> \n>     at org.apache.jsp.template_jsp._jspService(template_jsp.java:100)\n> \n>     at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:136)\n> \n>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n> \n>     at \n>\norg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:315)\n> \n>     at \n> org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:289)\n> \n>     at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n> \n>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:194)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:727)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:464)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:356)\n> \n>     at Dispatcher.doGet(Unknown Source)\n> \n>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n> \n>     at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)\n> \n>     at \n>\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:194)\n> \n>     at \n>\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:271)\n> \n>     at \n>\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n> \n>     at \n> org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n> \n>     at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n> \n>     at \n>\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n> \n>     at \n>\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n> \n>     at \n> org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n> \n>     at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n> \n>     at \n> org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2505)\n> \n>     at \n> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n> \n>     at \n>\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n> \n>     at \n>\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:170)\n> \n>     at \n>\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n> \n>     at \n> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n> \n>     at \n>\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n> \n>     at \n> org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n> \n>     at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n> \n>     at \n>\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n> \n>     at \n>\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n> \n>     at \n> org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n> \n>     at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n> \n>     at \n> org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:223)\n> \n>     at \n> org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:405)\n> \n>     at \n>\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:380)\n> \n>     at \n> org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:508)\n> \n>     at \n>\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:533)\n> \n>     at java.lang.Thread.run(Thread.java:536)\n> \n>", "is_private": false, "id": 24668, "creator": "jan.luehe@sun.com", "time": "2002-10-17T00:57:17Z", "bug_id": 13715, "creation_time": "2002-10-17T00:57:17Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 13715, "is_private": false, "id": 24761, "attachment_id": null, "creator": "remm@apache.org", "creation_time": "2002-10-17T07:09:42Z", "time": "2002-10-17T07:09:42Z", "text": "Just add a MIME type for jspf (starting with \"text/\"). I thought this was there\nby default, though, and will check if the appropriate patches have been ported."}, {"count": 2, "tags": [], "text": "The patch which should fix the problem has been ported to 5.0, and is included\nin the 5.0.0 milestone. However, it doesn't look like it has been integrated in\nany J2EE related tags.", "is_private": false, "id": 24764, "creator": "remm@apache.org", "time": "2002-10-17T08:11:13Z", "bug_id": 13715, "creation_time": "2002-10-17T08:11:13Z", "attachment_id": null}]