[{"count": 0, "tags": [], "creator": "gil@magisto.com", "attachment_id": null, "is_private": false, "id": 169552, "time": "2013-08-18T11:41:23Z", "bug_id": 55445, "creation_time": "2013-08-18T11:41:23Z", "text": "(see also http://apache-http-server.18135.x6.nabble.com/PATCH-mod-socache-memcache-don-t-ignore-expiry-td5007649.html)\n\nsocache_memcache ignores shared object expiry settings, creating keys which are never cleared from the memcache daemon.\n\nthere is a one-line patch and further discussion at the above URL, reposted for convenience:\n\n--- modules/cache/mod_socache_memcache.c\t(revision 1510425) \n+++ modules/cache/mod_socache_memcache.c\t(working copy) \n@@ -205,9 +205,10 @@ \n         return APR_EINVAL; \n     } \n  \n-    /* In APR-util - unclear what 'timeout' is, as it was not implemented */ \n-    rv = apr_memcache_set(ctx->mc, buf, (char*)ucaData, nData, 0, 0); \n+    rv = apr_memcache_set(ctx->mc, buf, (char*)ucaData, nData, \n+                          apr_time_sec(expiry), 0); \n  \n+ \n     if (rv != APR_SUCCESS) { \n         ap_log_error(APLOG_MARK, APLOG_CRIT, rv, s, APLOGNO(00790) \n                      \"scache_mc: error setting key '%s' \" \n\nI have tested this patch myself and it does indeed cause the correct values to be sent to the server."}, {"count": 1, "tags": [], "creator": "paravoid@debian.org", "attachment_id": null, "is_private": false, "id": 169846, "time": "2013-08-31T12:37:16Z", "bug_id": 55445, "creation_time": "2013-08-31T12:37:16Z", "text": "That was me, thanks for forwarding the patch. I'm adding myself to Cc, in case there are any questions."}, {"count": 2, "tags": [], "bug_id": 55445, "text": "I realize this post is quite old, but I ran into this same bug today and it looks from everything I see like this patch was never taken to correct it?  Perhaps I'm missing something, but this module is not as useable as it could be without the patch provided, since cache entries cannot be expired?\n\nShould this patch be merged or is there some other fix available?", "id": 179888, "time": "2014-12-20T06:37:47Z", "creator": "matt@mattjamison.com", "creation_time": "2014-12-20T06:37:47Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 55445, "attachment_id": null, "text": "someone just needs to commit the thing - I have no idea how things get done here in the apache project... I just added the patch that someone else already did for this little bug. FWIW I am also very keen on seeing this fixed myself, but I sure as hell can't commit it.", "id": 179910, "time": "2014-12-21T13:41:46Z", "creator": "gil@magisto.com", "creation_time": "2014-12-21T13:41:46Z", "is_private": false}, {"count": 4, "tags": [], "creator": "matt@mattjamison.com", "is_private": false, "text": "Strange, I'm going to tweak some things in the bug just to see if it'll get someone's attention.  Hopefully we can at least get a pointer on how to get this committed...", "id": 180195, "time": "2015-01-06T20:35:39Z", "bug_id": 55445, "creation_time": "2015-01-06T20:35:39Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "covener@gmail.com", "is_private": false, "text": "fixed in trunk http://svn.apache.org/r1649491", "id": 180196, "time": "2015-01-06T20:38:08Z", "bug_id": 55445, "creation_time": "2015-01-06T20:38:08Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "christophe.jaillet@wanadoo.fr", "is_private": false, "text": "Backported in r1772331 and part of version 2.4.24", "id": 201835, "time": "2017-11-01T17:36:39Z", "bug_id": 55445, "creation_time": "2017-11-01T17:36:39Z", "attachment_id": null}]