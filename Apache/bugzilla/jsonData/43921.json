[{"count": 0, "tags": [], "bug_id": 43921, "attachment_id": null, "text": "I'm having problems attempting to run a forking junit task from a 64-bit sparc\njava instance.\n\nIt seems getJreExecutable(\"java\") returns ${java.home}/bin/java, but in Solaris,\nthis will be the 32-bit java binary and not the 64 bit.  The correct answer\nwould be ${java.home}/bin/sparcv9/java in this case.\n\nDiff'ing System.getProperties() between 32-bit and 64-bit jdk1.5.0_13, we see\nthe following differences, which provide the contextual clues to correct this\nproblem..  Maybe the solution might be:\n\n  if (new File(${java.home}/bin/${os.arch}/${cmd}).exists()) ... ?\n\ndifferences:\n\n-sun.boot.library.path=/usr/jdk1.5.0_13/jre/lib/sparc\n+sun.boot.library.path=/usr/jdk1.5.0_13/jre/lib/sparcv9\n\n-java.vm.name=Java HotSpot(TM) Server VM\n+java.vm.name=Java HotSpot(TM) 64-Bit Server VM\n\n-os.arch=sparc\n+os.arch=sparcv9\n\n-java.library.path=/usr/jdk1.5.0_13/jre/lib/sparc/server:...\n+java.library.path=/usr/jdk1.5.0_13/jre/lib/sparcv9/server:...\n\n-sun.management.compiler=HotSpot Server Compiler\n+sun.management.compiler=HotSpot 64-Bit Server Compiler\n\n-sun.arch.data.model=32\n+sun.arch.data.model=64", "id": 110898, "time": "2007-11-20T17:19:08Z", "creator": "muaddib@erf.net", "creation_time": "2007-11-20T17:19:08Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 43921, "is_private": false, "text": "I can see this is a problem, but before we rush to fix it with a simple check,\nnote that I do test and run ant on 64-bit linux, first with the Sun JRE, more\nrecently with JRockit. And there bin/java is the name of the program \n\nOne workaround: could you do things with symlinks?", "id": 110915, "time": "2007-11-21T04:22:57Z", "creator": "stevel@apache.org", "creation_time": "2007-11-21T04:22:57Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 43921, "attachment_id": null, "text": "Well, I'm afraid we will be messing with symlinks to get around this.  We want\nto seamlessly force everyone to use 64-bit java, so we're contemplating\nsomething like the following.\n\n  cd $JAVA_HOME/bin\n  mv java java.sparcv8\n  ln -s sparcv9/java\n\nI think this must be uncomfortably irregular, even while I don't understand\nenough to agree with Sun's rationale for making it so difficult to run 64-bit\nbinaries.", "id": 111106, "time": "2007-11-26T08:47:18Z", "creator": "muaddib@erf.net", "creation_time": "2007-11-26T08:47:18Z", "is_private": false}]