[{"count": 0, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "I have a response that contains this:\nframeset rows=\"120px,*\"\n\n\nClicking on response in View Results Tree whith HTML view results in the following stacktrace:\n2013/02/19 22:43:34 ERROR - jmeter.JMeter: Uncaught exception:  java.lang.NumberFormatException: For input string: \"120px\"\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\n\tat java.lang.Integer.parseInt(Integer.java:458)\n\tat java.lang.Integer.parseInt(Integer.java:499)\n\tat javax.swing.text.html.FrameSetView.init(FrameSetView.java:122)\n\tat javax.swing.text.html.FrameSetView.layoutMajorAxis(FrameSetView.java:156)\n\tat javax.swing.text.BoxView.setSpanOnAxis(BoxView.java:313)\n\tat javax.swing.text.BoxView.layout(BoxView.java:692)\n\tat javax.swing.text.BoxView.setSize(BoxView.java:380)\n\tat javax.swing.text.BoxView.updateChildSizes(BoxView.java:349)\n\tat javax.swing.text.BoxView.setSpanOnAxis(BoxView.java:331)\n\tat javax.swing.text.BoxView.layout(BoxView.java:691)\n\tat javax.swing.text.BoxView.setSize(BoxView.java:380)\n\tat javax.swing.text.BoxView.updateChildSizes(BoxView.java:349)\n\tat javax.swing.text.BoxView.setSpanOnAxis(BoxView.java:331)\n\tat javax.swing.text.BoxView.layout(BoxView.java:691)\n\tat javax.swing.text.BoxView.setSize(BoxView.java:380)\n\tat javax.swing.plaf.basic.BasicTextUI$RootView.setSize(BasicTextUI.java:1703)\n\tat javax.swing.plaf.basic.BasicTextUI.getPreferredSize(BasicTextUI.java:901)\n\tat javax.swing.JComponent.getPreferredSize(JComponent.java:1642)\n\tat javax.swing.JEditorPane.getPreferredSize(JEditorPane.java:1412)\n\tat javax.swing.JViewport.getViewSize(JViewport.java:1066)\n\tat javax.swing.plaf.basic.BasicScrollPaneUI.syncScrollPaneWithViewport(BasicScrollPaneUI.java:265)\n\tat javax.swing.plaf.basic.BasicScrollPaneUI$Handler.viewportStateChanged(BasicScrollPaneUI.java:1067)\n\tat javax.swing.plaf.basic.BasicScrollPaneUI$Handler.stateChanged(BasicScrollPaneUI.java:1009)\n\tat javax.swing.JViewport.fireStateChanged(JViewport.java:1432)\n\tat javax.swing.JViewport.setView(JViewport.java:1038)\n\tat javax.swing.JScrollPane.setViewportView(JScrollPane.java:985)\n\tat org.apache.jmeter.visualizers.RenderAsHTML.showRenderedResponse(RenderAsHTML.java:107)\n\tat org.apache.jmeter.visualizers.RenderAsHTML.showRenderedResponse(RenderAsHTML.java:55)\n\tat org.apache.jmeter.visualizers.RenderAsHTML.renderResult(RenderAsHTML.java:51)\n\tat org.apache.jmeter.visualizers.ViewResultsFullVisualizer.valueChanged(ViewResultsFullVisualizer.java:253)\n\tat javax.swing.JTree.fireValueChanged(JTree.java:2820)\n\tat javax.swing.JTree$TreeSelectionRedirector.valueChanged(JTree.java:3191)\n\tat javax.swing.tree.DefaultTreeSelectionModel.fireValueChanged(DefaultTreeSelectionModel.java:629)\n\tat javax.swing.tree.DefaultTreeSelectionModel.notifyPathChange(DefaultTreeSelectionModel.java:1078)\n\tat javax.swing.tree.DefaultTreeSelectionModel.setSelectionPaths(DefaultTreeSelectionModel.java:287)\n\tat javax.swing.tree.DefaultTreeSelectionModel.setSelectionPath(DefaultTreeSelectionModel.java:170)\n\tat javax.swing.JTree.setSelectionPath(JTree.java:1598)\n\tat javax.swing.plaf.basic.BasicTreeUI.selectPathForEvent(BasicTreeUI.java:2311)\n\tat javax.swing.plaf.basic.BasicTreeUI$Handler.handleSelection(BasicTreeUI.java:3520)\n\tat javax.swing.plaf.basic.BasicTreeUI$Handler.mousePressed(BasicTreeUI.java:3459)\n\tat java.awt.Component.processMouseEvent(Component.java:6379)\n\tat javax.swing.JComponent.processMouseEvent(JComponent.java:3275)\n\tat java.awt.Component.processEvent(Component.java:6147)\n\tat java.awt.Container.processEvent(Container.java:2083)\n\tat java.awt.Component.dispatchEventImpl(Component.java:4744)\n\tat java.awt.Container.dispatchEventImpl(Container.java:2141)\n\tat java.awt.Component.dispatchEvent(Component.java:4572)\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)\n\tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4277)\n\tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)\n\tat java.awt.Container.dispatchEventImpl(Container.java:2127)\n\tat java.awt.Window.dispatchEventImpl(Window.java:2489)\n\tat java.awt.Component.dispatchEvent(Component.java:4572)\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:710)\n\tat java.awt.EventQueue.access$400(EventQueue.java:82)\n\tat java.awt.EventQueue$2.run(EventQueue.java:669)\n\tat java.awt.EventQueue$2.run(EventQueue.java:667)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\n\tat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)\n\tat java.awt.EventQueue$3.run(EventQueue.java:683)\n\tat java.awt.EventQueue$3.run(EventQueue.java:681)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:680)\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:122)", "id": 165385, "time": "2013-02-19T21:44:07Z", "bug_id": 54586, "creation_time": "2013-02-19T21:44:07Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Created attachment 29969\nHTML page to put on tomcat in /examples/jsp folder", "id": 165386, "time": "2013-02-19T21:44:49Z", "bug_id": 54586, "creation_time": "2013-02-19T21:44:49Z", "is_private": false, "attachment_id": 29969}, {"count": 2, "tags": [], "bug_id": 54586, "attachment_id": 29970, "id": 165387, "creation_time": "2013-02-19T21:48:12Z", "time": "2013-02-19T21:48:12Z", "creator": "p.mouawad@ubik-ingenierie.com", "text": "Created attachment 29970\nTest Plan", "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 54586, "text": "That looks like a Java library bug.\n\nNot sure there's much we can do about that.", "id": 165388, "time": "2013-02-19T22:29:13Z", "creator": "sebb@apache.org", "creation_time": "2013-02-19T22:29:13Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Yes I looked at Java code and it does not handle this case which seems not legal.\nShould we try/catch around the method for cleaner display of error . Today error kind of block UI for some time", "id": 165389, "time": "2013-02-19T22:30:59Z", "bug_id": 54586, "creation_time": "2013-02-19T22:30:59Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 54586, "attachment_id": null, "id": 165391, "time": "2013-02-19T22:41:34Z", "creator": "sebb@apache.org", "creation_time": "2013-02-19T22:41:34Z", "is_private": false, "text": "Well, we could catch the error, but what would we display?\n\nWe cannot display the HTML as is.\n\nI suppose we could work-round the Java bug by adjusting the source accordingly.\nIf we do, we should log a message to say we have done so.\n\nShould also ensure that the bug is reported to Oracle."}, {"count": 6, "attachment_id": null, "bug_id": 54586, "text": "I created the bug with sample program:\npackage org.apache.jmeter;\n\nimport javax.swing.JEditorPane;\nimport javax.swing.JFrame;\nimport javax.swing.JScrollPane;\nimport javax.swing.text.EditorKit;\n\npublic class Bug {\n    private static final String TEXT_HTML = \"text/html\"; \n    private static final EditorKit defaultHtmlEditor = JEditorPane\n            .createEditorKitForContentType(TEXT_HTML);\n\n    public static void main(String[] args) {\n\n        JEditorPane results = new JEditorPane();\n        results.setEditable(false);\n        results.setEditorKitForContentType(TEXT_HTML, defaultHtmlEditor);\n        results.setContentType(TEXT_HTML);\n        results.getDocument().putProperty(\"IgnoreCharsetDirective\",\n                Boolean.TRUE); \n        try {\n            String html = \"<html>\"\n                    + \"<head>\"\n                    + \"<meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=iso-8859-1\\\">\"\n                    + \"<title></title>\"\n                    + \"</head>\"\n                    + \"<frameset rows=\\\"120px,*\\\" frameborder=\\\"0\\\" border=\\\"0\\\" framespacing=\\\"0\\\">\"\n                    + \"    <frame src=\\\"http://www.google.com/\\\" scrolling=\\\"auto\\\" name=\\\"entete\\\">  \"\n                    + \"    <frame src=\\\"http://www.google.com/\\\" scrolling=\\\"auto\\\" name=\\\"detail\\\">  \"\n                    + \"</frameset>\" + \"<noframes>\" + \"<body>\" + \"</body>\"\n                    + \"</noframes>\" + \"</html>\";\n            results.setText(html); // Bug can generate RTE\n        } catch (Exception e) {\n            results.setContentType(\"text/html\");\n            results.setText(e.getMessage());\n        }\n        JScrollPane scrollPane = new JScrollPane(results);\n        JFrame f = new JFrame(\"Bug\");\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        f.getContentPane().add(scrollPane);\n        f.setSize(512, 342);\n        f.show();\n    }\n}", "id": 166246, "time": "2013-03-30T13:50:40Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-03-30T13:50:40Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=9001188.\n\nNot visible yet.", "id": 166247, "time": "2013-03-30T13:51:23Z", "bug_id": 54586, "creation_time": "2013-03-30T13:51:23Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 54586, "attachment_id": null, "id": 166249, "time": "2013-03-30T16:05:30Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-03-30T16:05:30Z", "is_private": false, "text": "Date: Sat Mar 30 15:58:18 2013\nNew Revision: 1462788\n\nURL: http://svn.apache.org/r1462788\nLog:\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=54586\nDisplay exception to indicate parsing\nBugzilla Id: 54586\n\nModified:\n    jmeter/trunk/src/components/org/apache/jmeter/visualizers/RenderAsHTML.java"}, {"count": 9, "tags": [], "bug_id": 54586, "attachment_id": null, "id": 166611, "time": "2013-04-14T21:21:45Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-04-14T21:21:45Z", "is_private": false, "text": "Strange, bug still does not appear although I received this mail:\nDear Java Developer,\n\nThank you for reporting this issue.\n\nWe have determined that this report is a new bug and entered the bug into our internal bug tracking system under Bug Id: 9001188.\n\nYou can monitor this bug on the Java Bug Database at\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=9001188.\n\nIt may take a day or two before your bug shows up in this external database.\n\nRegards,\nJava Developer Support"}, {"count": 10, "tags": [], "bug_id": 54586, "attachment_id": null, "id": 172770, "time": "2014-01-28T20:55:30Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2014-01-28T20:55:30Z", "is_private": false, "text": "Java bug here:\n\n- https://bugs.openjdk.java.net/browse/JDK-8031109"}, {"count": 11, "tags": [], "bug_id": 54586, "attachment_id": null, "text": "Date: Sat Jun 13 20:54:32 2015\nNew Revision: 1685332\n\nURL: http://svn.apache.org/r1685332\nLog:\nBug 54586 - View Results Tree : HTML view fails to display html page that contains frameset with px due to Java bug JDK-8031109\nBugzilla Id: 54586\n\nModified:\n    jmeter/trunk/xdocs/changes.xml", "id": 183515, "time": "2015-06-13T20:55:06Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2015-06-13T20:55:06Z", "is_private": false}]