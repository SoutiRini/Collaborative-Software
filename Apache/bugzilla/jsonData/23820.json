[{"count": 0, "attachment_id": null, "bug_id": 23820, "is_private": false, "id": 45657, "time": "2003-10-14T17:46:15Z", "creator": "hauser@acm.org", "creation_time": "2003-10-14T17:46:15Z", "tags": [], "text": "When doing\n<classes dir=\"${build.dir}\">\n\t<and>\n\t\t<filename name=\"**/*.class\"/>\n\t\t<filename name=\"${build.resources.include}\"/>\n\t   <not>\n\t        <filename\n\t\t     name=\"**//control/action/abc.class\"/>\n\t   </not>\n        </and>\n</classes>\nI only see\n<<ZipFileSet: Setup scanner in dir /myProj/WEB-INF/classes with patternSet{\nincludes: [] excludes: [] }>> but the scanner for the <and> and the <not>\ncontained therein are not visible.\n\n========================================================\nTherefore my suggestion: make also those scanners of\n \"non-nested filesets\" visible in the debug output too!.\n========================================================\n\nJust for comparison: in the <war> task's main body, the fileset there results in\na nicely debuggable\n<<fileset: Setup scanner in dir C:\\myProj with patternSet{ includes: [**/*.*]\nexcludes: [*.war, **/*.nbattrs, ./\nWEB-INF/web.*xml, **/WEB-INF/**/*.*, **/project-files/**/*.*, source/**/*.*,\nbuild.*, include/**/*.*, misc/**/*.*] }>>\n\nAs to be expected, bracketing the above <and> with a <fileset> results in: \n<zipfileset> type doesn't support the nested \"fileset\" element.\n\nP.S.: Also, I don't really understand the error\n      [war] error while reading original manifest: error in opening zip file\n\nrelated RFE http://nagoya.apache.org/bugzilla/show_bug.cgi?id=23760"}, {"count": 1, "tags": [], "bug_id": 23820, "is_private": false, "text": "<filename/> is a selector, not a fileset or directoryscanner. That is why there\nis not the same kind of debug output.\n\nBy the way :\n------------\nIf you can, use the include/exclude patterns. Include patterns which do not\nbegin by ** are optimized in ant1.6 (ie the scanner goes directly to the non\nwildcarded part of the pattern).\n\nOnly use the filename selector rather than the include/exclude patterns of\nfileset when you cannot achieve the same result with pure include/exclude\npatterns. For instance, \n<or>\n<date datetime=\"01/01/2001 12:00 AM\" when=\"before\"/>\n<filename name=\"*.gif\"/>\n</or>\nis a selector construct which you cannot achieve with pure include/exclude patterns.\n\n", "id": 45707, "time": "2003-10-15T07:01:17Z", "creator": "antoine@apache.org", "creation_time": "2003-10-15T07:01:17Z", "attachment_id": null}]