[{"count": 0, "attachment_id": null, "bug_id": 54641, "is_private": false, "id": 165662, "time": "2013-03-06T02:16:02Z", "creator": "jglick@apache.org", "creation_time": "2013-03-06T02:16:02Z", "tags": [], "text": "XMLResultAggregatorTest.testFrames fails on JDK 7u17 with:\n\nFatal error during transformation\n\tat org.apache.tools.ant.taskdefs.optional.TraXLiaison.fatalError(TraXLiaison.java:531)\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:895)\n\tat org.apache.tools.ant.taskdefs.optional.TraXLiaison.readTemplates(TraXLiaison.java:300)\n\tat org.apache.tools.ant.taskdefs.optional.TraXLiaison.createTransformer(TraXLiaison.java:317)\n\tat org.apache.tools.ant.taskdefs.optional.TraXLiaison.transform(TraXLiaison.java:178)\n\tat org.apache.tools.ant.taskdefs.XSLTProcess.process(XSLTProcess.java:850)\n\t... 19 more\nCaused by: javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:885)\n\t... 23 more\n\nBug #51668 comment #6 notes that this is known as https://bugs.eclipse.org/bugs/show_bug.cgi?id=384757 and (cannot read it but) http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7167657 as well.\n\nhttp://xml.apache.org/xalan-j/extensions.html#ext-func-calls says\n\nTransformerFactory.newInstance().newTemplates(new StreamSource(new File(\"\u2026src/etc/junit-noframes.xsl\")));\n\nshould work but it fails:\n\nERROR:  'The first argument to the non-static Java function 'replace' is not a valid object reference.'\nFATAL ERROR:  'Could not compile stylesheet'\nException in thread \"main\" javax.xml.transform.TransformerConfigurationException: Could not compile stylesheet\n\tat com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl.newTemplates(TransformerFactoryImpl.java:843)\n\nApparently newer versions of XSLTC try to verify extension method signatures, or something like that, and StringUtils does not work here."}, {"count": 1, "tags": [], "text": "Created attachment 30021\nFirst attempt at a fix\n\nMakes XMLResultAggregatorTest pass but causes failures in JUnitReportTest.", "is_private": false, "bug_id": 54641, "id": 165664, "time": "2013-03-06T02:20:32Z", "creator": "jglick@apache.org", "creation_time": "2013-03-06T02:20:32Z", "attachment_id": 30021}, {"count": 2, "tags": [], "creator": "jglick@apache.org", "attachment_id": null, "text": "http://stackoverflow.com/a/12364925/12916 claims to have a fix, will test.", "id": 165675, "time": "2013-03-06T12:04:49Z", "bug_id": 54641, "creation_time": "2013-03-06T12:04:49Z", "is_private": false}, {"count": 3, "tags": [], "creator": "jglick@apache.org", "text": "I think fixed in revision 1453414 (not in 1.9.0). Markus if you could verify that would be appreciated.", "id": 165687, "time": "2013-03-06T16:44:56Z", "bug_id": 54641, "creation_time": "2013-03-06T16:44:56Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 54641, "attachment_id": null, "id": 165694, "time": "2013-03-06T19:52:08Z", "creator": "markuskeller@fastmail.fm", "creation_time": "2013-03-06T19:52:08Z", "is_private": false, "text": "(In reply to comment #0)\n> Apparently newer versions of XSLTC try to verify extension method\n> signatures, or something like that, and StringUtils does not work here.\n\nNote that Apache Xalan works fine, but Oracle copied Xalan and added changes like http://java.net/projects/jaxp-sources/sources/svn/revision/3040 , which broke some XSLTC functions when a security manager is present.\n\nUnfortunately, Oracle's public bug database is in a horrible read-only state for more than a year now, and it continues to hide bug reports that used to be available. I also can't read their 7167657 any more."}, {"count": 5, "tags": [], "creator": "markuskeller@fastmail.fm", "text": "(In reply to comment #3)\n> I think fixed in revision 1453414 (not in 1.9.0). Markus if you could verify\n> that would be appreciated.\n\nThe stylesheets look good and they do fix the problem in the Eclipse Ant runner (\nhttps://bugs.eclipse.org/bugs/show_bug.cgi?id=384757 ).\n\nI verified that funny characters are properly replaced; also with Java 1.4.", "id": 165695, "time": "2013-03-06T20:00:04Z", "bug_id": 54641, "creation_time": "2013-03-06T20:00:04Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "creator": "jglick@apache.org", "text": "Not in 1.9.0.", "id": 165696, "time": "2013-03-06T20:36:07Z", "bug_id": 54641, "creation_time": "2013-03-06T20:36:07Z", "tags": [], "is_private": false}]