[{"count": 0, "tags": [], "bug_id": 20585, "text": "Currently, CoyoteConnector read jk2.properties file from catalina.base\nproperties. It make problem with JBoss. So I attached the patch for jboss.\nBy this patch, CoyoteConnector read jk2.properties from\nJBOSS_HOME/server/{server-name}/conf/jk2.properties.\n\nCould you commit it?\n\nregards,\n\nTakashi Okamoto\n\n\nIndex: CoyoteConnector.java\n===================================================================\nRCS file: /home/cvspublic/jakarta-tomcat-connectors/coyote/src/java/org/apache/c\noyote/tomcat4/CoyoteConnector.java,v\nretrieving revision 1.26\ndiff -u -r1.26 CoyoteConnector.java\n--- CoyoteConnector.java        3 May 2003 01:05:56 -0000       1.26\n+++ CoyoteConnector.java        8 Jun 2003 10:02:50 -0000\n@@ -1104,9 +1104,16 @@\n         }\n         protocolHandler.setAdapter(adapter);\n \n-        IntrospectionUtils.setProperty(protocolHandler, \"jkHome\",\n+        String jbosshome = System.getProperty(\"jboss.server.home.dir\");     \n+        if (jbosshome != null) {\n+            // set jkHome to jboss server home dir.\n+            // (ex. $JBOSS_HOME/server/default)\n+            IntrospectionUtils.setProperty(protocolHandler, \"jkHome\", \n+                                           jbosshome);\n+        } else {\n+            IntrospectionUtils.setProperty(protocolHandler, \"jkHome\",\n                                        System.getProperty(\"catalina.base\"));\n-\n+        }\n         // Set attributes\n         IntrospectionUtils.setProperty(protocolHandler, \"port\", \"\" + port);\n         IntrospectionUtils.setProperty(protocolHandler, \"maxThreads\",", "id": 38555, "time": "2003-06-08T10:10:29Z", "creator": "toraneko@kun.ne.jp", "creation_time": "2003-06-08T10:10:29Z", "is_private": false, "attachment_id": null}, {"text": "I'll throw this out and hopefully someone else will join in for the discussion.\n\nI am hesitant to have code in tomcat to tie itself to a specific container when\nbeing embedded. I am guessing others feel the same.\n\nIs there any reason jboss cannot set the system property catalina.base instead\nof using this other property (jboss.server.home.dir)?\n\n", "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "count": 1, "id": 38564, "time": "2003-06-08T18:34:16Z", "bug_id": 20585, "creation_time": "2003-06-08T18:34:16Z", "is_private": false}]