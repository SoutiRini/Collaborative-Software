[{"count": 0, "tags": [], "bug_id": 32345, "attachment_id": null, "text": "I have a test case where I use an HTTP Request Default config element to specify\nthe path to call and HTTP samplers which specify only request parameters. Using\nthe HTTP URL-Rewriting Modifier to include the session id in the subsequent\nrequests (format:\nhttp://server:port/path/to/servlet.do;jsessionid=asessionid?ID=value) does not\nwork. The requests made are in format\nhttp://server:port/;jsessionid=asessionid?ID=value. Only if I specify the path\nin each HTTP sampler the subsequent requests are made correctly.", "id": 67329, "time": "2004-11-22T12:30:36Z", "creator": "octi73@gmx.de", "creation_time": "2004-11-22T12:30:36Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 13517\nTestcase", "is_private": false, "id": 67330, "creator": "octi73@gmx.de", "time": "2004-11-22T12:32:20Z", "bug_id": 32345, "creation_time": "2004-11-22T12:32:20Z", "attachment_id": 13517}, {"attachment_id": null, "tags": [], "creator": "sebb@apache.org", "is_private": false, "count": 2, "id": 67437, "time": "2004-11-25T00:52:12Z", "bug_id": 32345, "creation_time": "2004-11-25T00:52:12Z", "text": "The attached testplan has two HTTP Request Default elements; these are both in\nthe scope of all the HTTP Samplers. It would be better to combine these, as\nthere's no guarantee which one will be applied first.\n\nMay I suggest that you try the test again with a single HTTP Request Default\nelement? This might fix the problem."}, {"count": 3, "text": "(In reply to comment #2)\n> The attached testplan has two HTTP Request Default elements; these are both in\n> the scope of all the HTTP Samplers. It would be better to combine these, as\n> there's no guarantee which one will be applied first.\n\nThe had the inner HTTP Request Default elements disabled and it didn't work\neither. Now I tested it again with removing it. So I had only one request\ndefault element with all the information including path and the bug was still alive.\n\nBy the way having the two request default elements worked perfectly when I\ndisabled the URL-rewriting modifier.\n\n> \n> May I suggest that you try the test again with a single HTTP Request Default\n> element? This might fix the problem.\n\n", "bug_id": 32345, "is_private": false, "id": 67443, "time": "2004-11-25T06:53:31Z", "creator": "octi73@gmx.de", "creation_time": "2004-11-25T06:53:31Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 32345, "text": "After debugging a bit I noticed that swapping two lines in\norg.apache.jmeter.threads.TestCompiler.configureSampler(Sampler) solved the\nproblem for me.\nWhen configureWithConfigElements(sampler, pack.getConfigs()); goes before\nrunPreProcessors(pack.getPreProcessors()); then the substitution is done correctly.\nExcerpt from revision 1.42 with my change applied:\n    public SamplePackage configureSampler(Sampler sampler)\n    {\n        //NOTREAD currentSampler = sampler;\n        SamplePackage pack = (SamplePackage) samplerConfigMap.get(sampler);\n        pack.setSampler(sampler);\n        configureWithConfigElements(sampler, pack.getConfigs());\n        runPreProcessors(pack.getPreProcessors());\n        //replaceStatics(ret);\n        return pack;\n    }\nI did not verify this change with the latest Nightly Build but with release 2.0.2.\n\nRegards,\nStefan", "id": 68641, "time": "2004-12-17T08:28:34Z", "creator": "octi73@gmx.de", "creation_time": "2004-12-17T08:28:34Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "text": "I think you've hit the nail on the head.\n\nMakes sense to apply the Config elements before the Pre-Processors.\n\nI've committed the change to the 2.0 branch.", "is_private": false, "id": 68675, "creator": "sebb@apache.org", "time": "2004-12-18T00:22:07Z", "bug_id": 32345, "creation_time": "2004-12-18T00:22:07Z", "attachment_id": null}]