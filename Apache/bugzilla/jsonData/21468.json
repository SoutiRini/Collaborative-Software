[{"count": 0, "attachment_id": null, "creator": "philippe.haution@mines-paris.org", "text": "When started with CATALINA_OPTS=\"-Xcheck:jni\", the Tomcat Server fails with the\nfollowing log message in catalina.out (everything works fine when this option is\nnot used) :\n\n10-Jul-2003 15:46:30 org.apache.commons.modeler.Registry loadRegistry\nINFO: Loading registry information\n10-Jul-2003 15:46:30 org.apache.commons.modeler.Registry getRegistry\nINFO: Creating new Registry instance\n10-Jul-2003 15:46:31 org.apache.commons.modeler.Registry getServer\nINFO: Creating MBeanServer\n10-Jul-2003 15:46:33 org.apache.coyote.http11.Http11Protocol init\nINFO: Initializing Coyote HTTP/1.1 on port 8080\nStarting service Tomcat-Standalone\nApache Tomcat/4.1.24\nFATAL ERROR in native method: JNI received a class argument that is not a class\n\tat java.lang.Class.isAssignableFrom(Native Method)\n\tat org.apache.commons.digester.CallMethodRule.end(CallMethodRule.java:448)\n\tat org.apache.commons.digester.Rule.end(Rule.java:276)\n\tat org.apache.commons.digester.Digester.endElement(Digester.java:1064)\n\tat org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)\n\tat org.apache.xerces.impl.dtd.XMLDTDValidator.endNamespaceScope(Unknown Source)\n\tat org.apache.xerces.impl.dtd.XMLDTDValidator.handleEndElement(Unknown Source)\n\tat org.apache.xerces.impl.dtd.XMLDTDValidator.endElement(Unknown Source)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown\nSource)\n\tat\norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown\nSource)\n\tat org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n\tat org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n\tat org.apache.commons.digester.Digester.parse(Digester.java:1543)\n\tat org.apache.catalina.startup.ContextConfig.defaultConfig(ContextConfig.java:548)\n\t- locked <f107a9d8> (a org.apache.commons.digester.Digester)\n\tat org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:638)\n\t- locked <f1092150> (a org.apache.catalina.startup.ContextConfig)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:243)\n\tat\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:166)\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:3567)\n\t- locked <f108c6f0> (a org.apache.catalina.core.StandardContext)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1188)\n\t- locked <f107aeb8> (a org.apache.catalina.core.StandardHost)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:738)\n\t- locked <f107aeb8> (a org.apache.catalina.core.StandardHost)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1188)\n\t- locked <f10587e0> (a org.apache.catalina.core.StandardEngine)\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:347)\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:497)\n\t- locked <f10587e0> (a org.apache.catalina.core.StandardEngine)\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:2190)\n\t- locked <f1093ab0> (a [Lorg.apache.catalina.Service;)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:512)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)", "id": 40338, "time": "2003-07-10T13:51:40Z", "bug_id": 21468, "creation_time": "2003-07-10T13:51:40Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "creator": "markt@apache.org", "is_private": false, "id": 57029, "time": "2004-05-08T16:12:43Z", "bug_id": 21468, "creation_time": "2004-05-08T16:12:43Z", "tags": [], "text": "This works for me. I don't see any exceptions on startup with:\nCATALINA_OPTS=-Xcheck:jni"}]