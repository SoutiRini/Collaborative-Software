[{"count": 0, "attachment_id": 31059, "creator": "maciej.lypik@gmail.com", "is_private": false, "id": 171342, "time": "2013-11-20T09:57:24Z", "bug_id": 55801, "creation_time": "2013-11-20T09:57:24Z", "tags": [], "text": "Created attachment 31059\nProposed patch\n\nCurrently the only available customisation is setting trust store via SSL_TRUSTSTORE_PROPERTY. This is not enough in situations where custom trust manager has to be used. The most trivial example I can think of is accepting all certificates.\n\nMy proposition is to use new property to pass SSLContext using user properties of ClientEndpointConfig.\n\nAttached is a proposed patch to add this capability."}, {"count": 1, "tags": [], "text": "Hello,\nWhat is the chance to have this patch integrated into trunk? I want to avoid keeping my fork of tomcat that is only for client code.\n\nThis patch would be useful also for those who cope with self-signed certificates for test purposes.\nThanks,\n\nMarek", "is_private": false, "id": 171376, "creation_time": "2013-11-21T14:39:17Z", "time": "2013-11-21T14:39:17Z", "creator": "marek.jagielski@gmail.com", "bug_id": 55801, "attachment_id": null}, {"count": 2, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "text": "(In reply to Marek Jagielski from comment #1)\n> This patch would be useful also for those who cope with self-signed\n> certificates for test purposes.\n\nI'm just curious how this would help with self-signed certificates. What can you not accomplish with existing APIs/configuration?", "id": 171385, "time": "2013-11-21T23:07:07Z", "bug_id": 55801, "creation_time": "2013-11-21T23:07:07Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "maciej.lypik@gmail.com", "is_private": false, "id": 171388, "time": "2013-11-22T08:53:07Z", "bug_id": 55801, "creation_time": "2013-11-22T08:53:07Z", "tags": [], "text": "(In reply to Christopher Schultz from comment #2)\n> (In reply to Marek Jagielski from comment #1)\n> > This patch would be useful also for those who cope with self-signed\n> > certificates for test purposes.\n> \n> I'm just curious how this would help with self-signed certificates. What can\n> you not accomplish with existing APIs/configuration?\n\nIf certificate is known beforehand there is no problem - it can be simply added to the trust store.\n\nMy problem is that clients do not know anything about the server they are connecting to. I work in cloud environment and servers are instantiated and terminated as they are needed. Every time new server instance is created it gets new self-signed certificate. The only thing client knows about server is its IP address. Ability to temporarily ignore certificates would solve this problem for me.\n\nAdditionally, even if trust store solves problem for most cases, some people prefer to ignore certificates. I think it's fairly common practice in HTTPS clients. I remember doing so myself in Jersey Client API."}, {"count": 4, "tags": [], "bug_id": 55801, "is_private": false, "text": "I'm wondering if I could get any feedback on this patch. I'd like for it to be integrated, as it is the only feasible solution to my problem.\n\nI hate to push this myself, but with time it's becoming a blocking issue for me.", "id": 171448, "time": "2013-11-26T12:41:55Z", "creator": "maciej.lypik@gmail.com", "creation_time": "2013-11-26T12:41:55Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 55801, "text": "It is OK for me, but here are two minor glitches\n\n1. Wasted work.\n\n> SSLContext sslContext = SSLContext.getInstance(\"TLS\");\n\nSuch getInstance() calls are usually slow. It'd be better to skip it if you are ignoring its result.\n\n2. You have Javadoc (good), but these properties are also mentioned at the bottom of\n\\webapps\\docs\\web-socket-howto.xml\n\nIt would be good to mention somewhere that the value of a SSL_TRUSTSTORE_PROPERTY is ignored when using SSL_CONTEXT_PROPERTY.", "id": 171450, "time": "2013-11-26T22:48:34Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2013-11-26T22:48:34Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 55801, "is_private": false, "id": 171452, "time": "2013-11-26T23:35:25Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-11-26T23:35:25Z", "tags": [], "text": "I haven't looked at the Websocket client code, but if it's using HttpsURLConnection (which is a big IF) to negotiate the initial connection, it's trivial to re-configure it using the standard API."}, {"count": 7, "tags": [], "bug_id": 55801, "is_private": false, "text": "Created attachment 31080\nCorrected patch", "id": 171459, "time": "2013-11-27T09:17:28Z", "creator": "maciej.lypik@gmail.com", "creation_time": "2013-11-27T09:17:28Z", "attachment_id": 31080}, {"count": 8, "tags": [], "bug_id": 55801, "text": "Sorry for commenting so late. I've fixed the logic and added description to websocket-howto so it should be OK now.\n\nI was also looking for a better solution to this problem.  I checked Tyrus and it also uses custom properties to configure SSLEngine. So I guess there is no perfect answer until client-side SSL configuration is defined in WebSocket spec.", "id": 171531, "time": "2013-12-02T16:53:40Z", "creator": "maciej.lypik@gmail.com", "creation_time": "2013-12-02T16:53:40Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "text": "Hi,\nCan you give any feedback on this issue? I need to take a decision to move my project forward. I want to know if I will stay with tomcat implementation of websocket client or look for something else. I have already removed jwebsocket proprietary implementation to replace it with jsr356 one. \nI would like to use Tomcat implementation as I have a huge confidence to your project. However discussed ability will be crucial for me in the future. \nThanks\n\nMarek", "is_private": false, "id": 171559, "creation_time": "2013-12-04T15:04:51Z", "time": "2013-12-04T15:04:51Z", "creator": "marek.jagielski@gmail.com", "bug_id": 55801, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "markt@apache.org", "text": "Thanks for the patch. This has been applied to 8.0.x and 7.0.x for 8.0.0-RC6 and 7.0.48 respectively.", "count": 10, "id": 171627, "time": "2013-12-07T20:20:12Z", "bug_id": 55801, "creation_time": "2013-12-07T20:20:12Z", "is_private": false}]