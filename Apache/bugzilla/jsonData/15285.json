[{"count": 0, "tags": [], "creator": "jarno.pelkonen@exidio.com", "text": "There is a bug in Jmeter 1.8. The bug exist in CVS version too (11.12.2002 \n17:55 UTC). \n\nThe bug occurs if one uses regexfunction to form a request with the way that \nNth match should be returned (\"which match to use\" -field). If there is no Nth \nmatch, but only N-1 matches the most, Jmeter quietly cancels the request \nwithout leaving any indication that something went wrong. \n\n\nthe error is in file: \n/functions/org/apache/jmeter/functions/RegexFunction.java \n\nand in method \"execute\". (lines 125->) \n\nThe code does not consider such a situation that there are matches but not Nth \nmatch. The \"try - catch\" catches only \"NumberFormatExceptions\", not for \nIndexOutOfBoundsException\". \"execute\" method should return \"defaultValue\", but \nit does not. \n\nMy suggestion is to add a \"try - catch\" clause around the \"else\" -branch as \nshown below. Compiles and works. I don't have (non-anonymous) CVS access, so I \ncan't do it myself.\n\nRegards, \n\nJarno\n\njarno.pelkonen@exidio.com\n\n\n------CVS Version 1.6  ------------------\ntry {\n    int index = Integer.parseInt(valueIndex) - 1;\n    MatchResult result = (MatchResult)collectAllMatches.get(index);\n    return generateResult(result);\n} catch(NumberFormatException e) {\n    float ratio = Float.parseFloat(valueIndex);\n    MatchResult result = (MatchResult)collectAllMatches.get(\n    (int)(collectAllMatches.size() * ratio + .5) - 1);\n    return generateResult(result);\n}\n\n---------- FIX --------------------\n\ntry {\n    try {\n\tint index = Integer.parseInt(valueIndex) - 1;\n\tMatchResult result = (MatchResult)collectAllMatches.get(index);\n\treturn generateResult(result);\n    } catch(NumberFormatException e) {\n\tfloat ratio = Float.parseFloat(valueIndex);\n\tMatchResult result = (MatchResult)collectAllMatches.get((int)\n(collectAllMatches.size() * ratio + .5) - 1);\n\treturn generateResult(result);\n    }\n}  catch (IndexOutOfBoundsException e) {\n    return defaultValue;\n}  \n--------------------------------", "id": 27673, "time": "2002-12-11T18:22:43Z", "bug_id": 15285, "creation_time": "2002-12-11T18:22:43Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 15285, "text": "Thanks.  Done.", "id": 30271, "time": "2003-01-29T16:03:19Z", "creator": "mstover1@apache.org", "creation_time": "2003-01-29T16:03:19Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "jsalvata@atg.com", "is_private": false, "text": "Bulk-editing to close all bugs reported fixed by 1.8.1.", "id": 32829, "time": "2003-03-10T09:40:45Z", "bug_id": 15285, "creation_time": "2003-03-10T09:40:45Z", "attachment_id": null}]