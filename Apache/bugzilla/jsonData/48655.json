[{"count": 0, "tags": [], "bug_id": 48655, "attachment_id": null, "is_private": false, "id": 134127, "time": "2010-02-02T02:12:30Z", "creator": "lyle@winton.id.au", "creation_time": "2010-02-02T02:12:30Z", "text": "I was testing stability of Tomcat Native for high performance file downloads.  Specifically I was downloading a 2GB file using a download manager that supports multi-part downloads (simultaneous download of file segments).  Download works fine, however, if you try to shutdown tomcat during the multipart download it hangs indefinitely and the CPU of the tomcat java process goes up.  (Single part downloads work fine, completed multi-part download causes no shutdown problems, and with tomcat native turned off the shutdown works fine.)\n\nTomcat version:  6.0.24\nOS:  Windows XP SP3\nTomcat Native binaries from:\n  http://apache.16degrees.com.au/tomcat/tomcat-connectors/native/1.1.19/binaries/\nAPR binaries:  apr-1.3.6-iconv-1.2.1-util-1.3.8-win32-x86-msvcrt60.zip"}, {"count": 1, "tags": [], "bug_id": 48655, "attachment_id": null, "text": "Which tool are you using?", "id": 144906, "time": "2011-03-10T06:07:24Z", "creator": "jfclere@gmail.com", "creation_time": "2011-03-10T06:07:24Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 48655, "is_private": false, "text": "I can re-create this with Tomcat trunk, Tomcat Native trunk and the \"Download them all\" add-on for Firefox.\n\nStopping Tomcat in the middle of a large download triggered a JVM crash. Not a major problem since Tomcat was stopping anyway but it would be better to shutdown cleanly.", "id": 200404, "time": "2017-08-21T16:17:38Z", "creator": "markt@apache.org", "creation_time": "2017-08-21T16:17:38Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 200407, "time": "2017-08-21T17:04:11Z", "bug_id": 48655, "creation_time": "2017-08-21T17:04:11Z", "is_private": false, "text": "In the current code at least, this appears to have been an issue in Tomcat rather than the native library.\n\nFixed in:\n- trunk for 9.0.0.M27 onwards\n- 8.5.x for 8.5.21 onwards\n- 8.0.x for 8.0.47 onwards\n- 7.0.x for 7.0.82 onwards"}]