[{"count": 0, "attachment_id": null, "bug_id": 3871, "text": "The following sequence of calls on SVGGraphics2D instance g2d: \n\n  g2d.translate(10,10);        \n  g2d.scale(2, 2);        \n  g2d.scale(0.5, 0.5);\n  g2d.translate(20,40);\n  g2d.rotate(0);\n  g2d.translate(-30,-50);\n\n  g2d.fillRect(10,10, 100,80);\n\nresults in this SVG being generated:\n\n<rect x=\"10\" y=\"10\" transform=\"translate(10,10)  translate(20,40)  \ntranslate(-30,-50)\" width=\"100\" style=\"fill:black; stroke:none;\" height=\"80\" />\n\nObviously, the transform string is not optimized. This is due to the \"scale\" \ntransforms (which, taken together, form an identity) and the \"rotate\" (which is \nalso an identity). Identity transforms are not converted to SVG (note the \ndouble spaces between the \"translate\"s). This is correct. However, the first \n\"translate\" is by then already converted, and can no longer be concatenated to \nthe next.\n\nI have created a patch which addresses this issue. It adds an \"isIdentity()\" \nmethod to the TransformStackElement class, and reconstructs the public \n\"toSVGTransform()\" method in SVGTransform, so that identities do not keep \nsimilar transforms from being concatenated, not even if they are \"hidden\", like \nthe paired scale transforms above.\n\nGenerated output of the patched code reads:\n\n<rect x=\"10\" y=\"10\" width=\"100\" style=\"fill:black; stroke:none;\" height=\"80\" />", "id": 6171, "time": "2001-09-28T10:17:12Z", "creator": "paul_evenblij@nl.compuware.com", "creation_time": "2001-09-28T10:17:12Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "paul_evenblij@nl.compuware.com", "text": "Created attachment 609\ndiff for org.apache.batik.svggen.SVGTransform.java, 1.3", "id": 6172, "time": "2001-09-28T10:21:50Z", "bug_id": 3871, "creation_time": "2001-09-28T10:21:50Z", "is_private": false, "attachment_id": 609}, {"count": 2, "tags": [], "bug_id": 3871, "attachment_id": 610, "id": 6173, "time": "2001-09-28T10:23:35Z", "creator": "paul_evenblij@nl.compuware.com", "creation_time": "2001-09-28T10:23:35Z", "is_private": false, "text": "Created attachment 610\ndiff for org.apache.batik.ext.awt.g2d.TransformStackElement.java, 1.1"}, {"count": 3, "tags": [], "bug_id": 3871, "attachment_id": null, "id": 6225, "time": "2001-10-01T05:40:32Z", "creator": "vincent.hardy@sun.com", "creation_time": "2001-10-01T05:40:32Z", "is_private": false, "text": "See test-sources/org/apache/batik/svggen/IdentityTest.java for a test \nexercising the problem (from bug report).\nTest case integrated in test suite with reference SVG showing proper\nresult (i.e., no transform on <rect>)."}]