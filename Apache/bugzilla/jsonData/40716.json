[{"count": 0, "tags": [], "text": "The new feature of JK1.2.19:\n-reference- This directive allows to copy configurations ...\ndoesn't seem to work. I tried several configurations, different names for my \nworkers, with or without \"worker.\" - prefix. The workers won't inherit the \nproperties of my template-worker.", "attachment_id": null, "bug_id": 40716, "id": 94676, "time": "2006-10-10T07:43:28Z", "creator": "bjoern@syltonline.de", "creation_time": "2006-10-10T07:43:28Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 40716, "attachment_id": 18982, "text": "Created attachment 18982\nMy isapi_redirect.properties\n\nThe config is done here, not in the registry.", "id": 94677, "time": "2006-10-10T07:46:06Z", "creator": "bjoern@syltonline.de", "creation_time": "2006-10-10T07:46:06Z", "is_private": false}, {"count": 2, "tags": [], "creator": "bjoern@syltonline.de", "attachment_id": 18983, "id": 94678, "time": "2006-10-10T07:49:06Z", "bug_id": 40716, "creation_time": "2006-10-10T07:49:06Z", "is_private": false, "text": "Created attachment 18983\nMy workers.properties\n\nAs you can see, i've been experimenting a lot with our 6-node-cluster. nothing\nworked. Now nearly all is commented out, so that only 2 TCs are working. Still\nno inheritance. The settings from worker \"template\" won't appear in the jk\nmanager."}, {"attachment_id": null, "tags": [], "creator": "bjoern@syltonline.de", "is_private": false, "count": 3, "id": 94679, "time": "2006-10-10T07:53:01Z", "bug_id": 40716, "creation_time": "2006-10-10T07:53:01Z", "text": "Uriworkermap.properties consists only of 4 lines:\n\n/myweb.mydomain.de*/herstportal/*.jsp=LBPTomHH\n/myweb.mydomain.de*/herstportal/*.do=LBPTomHH\n/myweb.mydomain.de*/herstportal/*.servlet=LBPTomHH\n/myweb.mydomain.de*/jkmanager=jkstatus\n\nno magic.\nBtw, all works fine if I define the settings in the workers directly.\nSo I got a workaround. But we also got much bigger clusters, so a function \nlike \"reference\" would realy come in handy."}, {"attachment_id": 18984, "tags": [], "creator": "bjoern@syltonline.de", "text": "Created attachment 18984\nLog file in debug Mode\n\nHere the log in debug mode, with just one request to jkmanager.", "count": 4, "id": 94680, "time": "2006-10-10T08:01:39Z", "bug_id": 40716, "creation_time": "2006-10-10T08:01:39Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 40716, "attachment_id": null, "id": 94681, "time": "2006-10-10T08:10:05Z", "creator": "mturk@apache.org", "creation_time": "2006-10-10T08:10:05Z", "is_private": false, "text": "Don't know why it doesn't work.\n\nAnyhow you have some errors in the workers.propeties\nworker.template.connect_timeout=90\nworker.template.reply_timeout=900\n\nRemember that those values are in miliseconds (unlike other\ntimeouts that are in seconds).\n\nI think I'll add a simple rule:\n(if timeout < 1000 then timeout = timeout * 1000)\n\nHaving timeouts smaller then 1 second is insane anyhow, and\nthis would help deling with obvious typos like this."}, {"attachment_id": null, "tags": [], "creator": "jjohnson@livedatagroup.com", "is_private": false, "count": 6, "id": 94682, "time": "2006-10-10T08:31:50Z", "bug_id": 40716, "creation_time": "2006-10-10T08:31:50Z", "text": "I had in the past used timeouts of 500 milliseconds so that if a server was\nun-responsive jk would fail over to another server very quickly without the\ncustomer waiting.  Half a second doesn't seem that short when our average page\ntime delivered back to the customer across the internet is only 330 milliseconds.\n"}, {"count": 7, "tags": [], "bug_id": 40716, "attachment_id": null, "is_private": false, "id": 94684, "time": "2006-10-10T08:38:53Z", "creator": "bjoern@syltonline.de", "creation_time": "2006-10-10T08:38:53Z", "text": "Of cause Mladen Turk is right, i misread the configuration there. Set it to \n5000 onthe connect timeout and 900000 on the reply timeout (yes, we have some \nverry long running servlets).\nJeff Johnson might have a point there, but we got a multitier environment with \ndatabase and mainframe-backends. so no way in answering in that time.\n\nNevertheless, nice comments, but the reported bug is still there, even with \nthe new more sane values."}, {"count": 8, "tags": [], "bug_id": 40716, "attachment_id": null, "text": "I agree that the reply_timeout below 1000 is aggressive but the connect_timeout\nand prepost_timeout (ping/pong) below a second seems very reasonable. \nEspecially when running a cluster that doesn't need sessions.  \n\nIf tomcat can't say that its alive in less than a second, something is probably\nwrong with it.  IIRC we used to have this problem when our garbage collection\nwasn't tuned well.\n\nRegarding the reference problem, I almost reported a bug yesterday saying that\nreference didn't work but I had forgot the \"worker.\" prefix (which I see that\nyou tried).  As soon as I fixed that, my workers did indeed inherit the lbfactor\nsetting so I know it works at least for that in my case.", "id": 94687, "time": "2006-10-10T08:58:06Z", "creator": "jjohnson@livedatagroup.com", "creation_time": "2006-10-10T08:58:06Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 40716, "attachment_id": null, "is_private": false, "id": 94691, "time": "2006-10-10T09:53:02Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2006-10-10T09:53:02Z", "text": "You are right. The reference feature is missing for non-Apache webservers.\nWe'll clarify the docs and add it to the other webservers.\n\nThank you for your observation and sorry for any inconvenience."}, {"count": 10, "tags": [], "bug_id": 40716, "attachment_id": 18986, "text": "Created attachment 18986\nAdding the reference feature to IIS and Netscape\n\nYou might want to try this patch, since the next release will not be available\nsoon.", "id": 94704, "time": "2006-10-10T19:08:19Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2006-10-10T19:08:19Z", "is_private": false}, {"count": 11, "tags": [], "bug_id": 40716, "attachment_id": null, "is_private": false, "id": 94705, "time": "2006-10-10T19:32:55Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2006-10-10T19:32:55Z", "text": "The feature will work for IIS and Netscape to, sarting in 1.2.20. Since that\nversion will not be released soon, you might want to try the attached patch for\n1.2.19.\n\nThe docs have been updated with a warning."}, {"count": 12, "tags": [], "bug_id": 40716, "attachment_id": null, "id": 112402, "time": "2008-01-01T16:51:28Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2008-01-01T16:51:28Z", "is_private": false, "text": "Move a couple of fixed JK issues from resolved to closed."}]