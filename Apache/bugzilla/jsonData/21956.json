[{"count": 0, "tags": [], "creator": "lowwk@sg.fujitsu.com", "attachment_id": null, "id": 41704, "time": "2003-07-29T08:58:56Z", "bug_id": 21956, "creation_time": "2003-07-29T08:58:56Z", "is_private": false, "text": "I'm running tomcat 4.1.24 on Solaris 8\n\norg.apache.coyote.tomcat4.CoyoteServerSocketFactory seems to be ignoring the \nkeystoreType attribute.  I've generate a .keystore file in $CATALINA_HOME.\n\nI'm using the following in my server.xml.\n\n<Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\n               port=\"8443\" minProcessors=\"5\" maxProcessors=\"75\"\n               enableLookups=\"true\"\n\t       acceptCount=\"100\" debug=\"0\" scheme=\"https\" secure=\"true\"\n               useURIValidationHack=\"false\" disableUploadTimeout=\"true\">\n <Factory className=\"org.apache.coyote.tomcat4.CoyoteServerSocketFactory\"\n          clientAuth=\"false\" \n          protocol=\"TLS\" \n          keystoreFile=\"/usr/local/jakarta-tomcat-4.1.24/.keystore\"\n          keystorePass=\"tomcat\"/>\n    </Connector>\n\nAnd I receive the following error in catalina.out.\n\nINFO: Creating new Registry instance\nJul 25, 2003 4:20:56 PM org.apache.commons.modeler.Registry getServer\nINFO: Creating MBeanServer\nJul 25, 2003 4:21:07 PM org.apache.coyote.http11.Http11Protocol init\nINFO: Initializing Coyote HTTP/1.1 on port 80\nJul 25, 2003 4:21:11 PM org.apache.coyote.http11.Http11Protocol init\nSEVERE: Error initializing endpoint\njava.io.IOException\n\tat org.apache.tomcat.util.net.jsse.JSSESocketFactory.initProxy\n(JSSESocketFactory.java:231)\n\tat org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket\n(JSSESocketFactory.java:138)\n\tat org.apache.tomcat.util.net.PoolTcpEndpoint.initEndpoint\n(PoolTcpEndpoint.java:277)\n\tat org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:150)\n\tat org.apache.coyote.tomcat4.CoyoteConnector.initialize\n(CoyoteConnector.java:1117)\n\tat org.apache.catalina.core.StandardService.initialize\n(StandardService.java:579)\n\tat org.apache.catalina.core.StandardServer.initialize\n(StandardServer.java:2246)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:511)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\nCatalina.start: LifecycleException:  Protocol handler initialization failed: \njava.io.IOException\nLifecycleException:  Protocol handler initialization failed: java.io.IOException\n\tat org.apache.coyote.tomcat4.CoyoteConnector.initialize\n(CoyoteConnector.java:1119)\n\tat org.apache.catalina.core.StandardService.initialize\n(StandardService.java:579)\n\tat org.apache.catalina.core.StandardServer.initialize\n(StandardServer.java:2246)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:511)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\nCatalina.stop: LifecycleException:  This server has not yet been started\nLifecycleException:  This server has not yet been started\n\tat org.apache.catalina.core.StandardServer.stop\n(StandardServer.java:2213)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:543)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke\n(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke\n(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:324)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:203)\n\n\nIf I use default keystoreType = \"JKS\", it works fine.  If using \"JCEKS\" on \nWin2k, it works fine.  This seems to occur only on Solaris."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 59580, "time": "2004-06-19T12:24:25Z", "bug_id": 21956, "creation_time": "2004-06-19T12:24:25Z", "is_private": false, "text": "This bug report has been transferred to Tomcat 5 because TC4 and TC5 share the \nconnectors and TC5 is now the focus of development effort"}, {"count": 2, "tags": [], "bug_id": 21956, "text": "Shouldn't have moved this one - it is clearly TC4 specific.", "id": 59588, "time": "2004-06-19T15:29:47Z", "creator": "markt@apache.org", "creation_time": "2004-06-19T15:29:47Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 21956, "attachment_id": null, "id": 76519, "time": "2005-06-18T17:19:10Z", "creator": "markt@apache.org", "creation_time": "2005-06-18T17:19:10Z", "is_private": false, "text": "I don't have access to a solaris box to test this on but I have tested it on\nboth Windows (XP SP2) and Linux (Mandrake 10.0).\n\nGiven that JCEKS keystores worked for me on both this looks like either a\nconfiguration error when you setup your solaris box or a Solaris specific JSSE\nissue. My money would be on a configuration error but either way this isn't a\nTomcat issue."}]