[{"count": 0, "tags": [], "creator": "jborchers@crimsonwing.com", "text": "Created attachment 29814\nLog with Firefox Live HTTP Headers\n\nLogin with Safari on the Mac and on IOS with DIGEST authentication fails. Also with IE8/9 the login fails.\nWith Firefox and Chrome login works perfect.\n\nI did store the password in tomcat-users.xml as plain text.\nThen I did configure the realm as MD5 and stored the password as a MD5 hash of [user]:[realm]:[password].\nAlso then Firefox and Chrome login perfectly and Safari and IE8/9 are failing.\n\nI did attach a log file of the headers with Firefox succeeding to login.\n\nThanks,\n\nJohan Borchers", "id": 164376, "time": "2013-01-04T12:38:53Z", "bug_id": 54372, "creation_time": "2013-01-04T12:38:53Z", "is_private": false, "attachment_id": 29814}, {"attachment_id": null, "tags": [], "bug_id": 54372, "text": "Version 7.0.30 and 7.0.32 are working fine with the same configuration.\nSafari can login with DIGEST authentication.\n\nVersion 7.0.33 is not working anymore and has the same problem as described for version 7.0.34.", "count": 1, "id": 164377, "time": "2013-01-04T14:05:07Z", "creator": "jborchers@crimsonwing.com", "creation_time": "2013-01-04T14:05:07Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 54372, "text": "The likely suspect is the new lightweight HTTP header parser that we switched to in 7.0.33. The question at the moment is whether it is the parser or the client that is non-spec compliant.", "count": 2, "id": 164380, "time": "2013-01-04T16:09:19Z", "creator": "markt@apache.org", "creation_time": "2013-01-04T16:09:19Z", "is_private": false}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "IE8 is not compliant with RFC2617 so the authentication request is rejected. The browser is adding quotes to the qop field which is meant to be a token (and hence not quoted). Tomcat is rejecting this malformed request. You need to raise a bug with Microsoft to get that fixed.\n\nI suspect IE9 has the same problem.\n\nSafari is also adding quotes to the qop field. You'll need to raise a bug with Apple to get that fixed.\n\nIt seems the browser developers were confusing the server qop field (which is a quoted, comma separated list of tokens) with the browser qop field which is a token (i.e. not quoted).\n\nWeb servers are encouraged to be tolerant of misbehaving clients where they can. I'll see if there is a way this invalid header can be safely (since this is security related) parsed.", "id": 164382, "time": "2013-01-04T16:36:36Z", "bug_id": 54372, "creation_time": "2013-01-04T16:36:36Z", "is_private": false}, {"count": 4, "tags": [], "creator": "jborchers@crimsonwing.com", "attachment_id": null, "is_private": false, "id": 164428, "time": "2013-01-07T12:10:13Z", "bug_id": 54372, "creation_time": "2013-01-07T12:10:13Z", "text": "Oke, thanks for clearing the problem.\nThe problem is who is doing something to solve the problem. If I manage to report a bug to Apple or Microsoft will it be fixed? an if so in what time frame?\nHow can I see that Safari is sending back the qop value as a quoted string and not as a token?\nI do use Live HTTP Headers in Firefox but Safari ??"}, {"attachment_id": null, "tags": [], "bug_id": 54372, "text": "Reported the bug to Apple for Safari : Problem ID: 12964948", "count": 5, "id": 164429, "time": "2013-01-07T12:33:49Z", "creator": "jborchers@crimsonwing.com", "creation_time": "2013-01-07T12:33:49Z", "is_private": false}, {"count": 6, "tags": [], "creator": "knst.kolinko@gmail.com", "text": "By the way, a workaround was implemented in r1429124\nIt will be included in 7.0.35 onwards.", "id": 164523, "time": "2013-01-09T12:45:03Z", "bug_id": 54372, "creation_time": "2013-01-09T12:45:03Z", "is_private": false, "attachment_id": null}]