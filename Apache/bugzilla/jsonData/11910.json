[{"count": 0, "attachment_id": null, "creator": "lolo@elline.sk", "is_private": false, "id": 21503, "time": "2002-08-21T20:36:08Z", "bug_id": 11910, "creation_time": "2002-08-21T20:36:08Z", "tags": [], "text": "1) This example doesn't support other content-types.\nPrintWriter in getWriter() method should be created in this way:\n\nString charset = getCharsetFromContentType(contentType);\nif (charset == null) charset = {default charset}\nwriter = new PrintWriter(new OutputStreamWriter(stream, charset));\n\nwhere getCharsetFromContentType returns charset according to set content-type.\n\n2) There can be problem when somebody sets threshold:\n\nMethod should look like this:\n    public void write(int b) throws IOException {\n        if (closed)\n            throw new IOException(\"Cannot write to a closed output stream\");\n\n        if ((bufferCount >= buffer.length) || (count>=compressionThreshold)) {\n            compressionThresholdReached = true;\n        }\n\n        if (compressionThresholdReached) {\n            // rajo - bugfix\n            if (bufferCount > 0) {\n              writeToGZip(buffer, 0, bufferCount);\n              bufferCount = 0;\n            }\n            writeToGZip(b);\n        } else {\n            buffer[bufferCount++] = (byte) b;\n        }\n        count++; // rajo - bugfix\n    }\n\nSimilary method (byte b[], int off, int len).\n\nThanks."}, {"count": 1, "tags": [], "text": "Can you send the actual patch files if you think there're bugs?  I'll take a \nlook and apply the patches if it makes sense.\n\nThanks,\nAmy", "attachment_id": null, "id": 21506, "creation_time": "2002-08-21T21:30:44Z", "time": "2002-08-21T21:30:44Z", "creator": "amyroh@apache.org", "bug_id": 11910, "is_private": false}, {"count": 2, "tags": [], "text": "Support for other content types has been added.  The bug reporter agrees that \nthe second issue about threshold was resolved with the newest source code.", "attachment_id": null, "bug_id": 11910, "id": 21915, "time": "2002-08-28T18:39:20Z", "creator": "amyroh@apache.org", "creation_time": "2002-08-28T18:39:20Z", "is_private": false}, {"count": 3, "tags": [], "creator": "a.brazhnyk@biconsulting.ws", "attachment_id": null, "id": 22924, "time": "2002-09-16T16:31:25Z", "bug_id": 11910, "creation_time": "2002-09-16T16:31:25Z", "is_private": false, "text": "Why not to search for encoding in original response first? Such behavior can \nreduce overhead of content-type parsing. \nI'd like to see status of <a \nhref=\"http://nagoya.apache.org/bugzilla/show_bug.cgi?id=10444\">bug 10444</a> \nchanged, anyway."}, {"text": "*** Bug 10444 has been marked as a duplicate of this bug. ***", "tags": [], "bug_id": 11910, "attachment_id": null, "count": 4, "id": 22953, "time": "2002-09-16T19:59:17Z", "creator": "amyroh@apache.org", "creation_time": "2002-09-16T19:59:17Z", "is_private": false}]