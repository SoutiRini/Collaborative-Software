[{"count": 0, "attachment_id": null, "creator": "jjyooi@yahoo.com", "text": "I've just downloaded the latest version of log4j from the site (v1.1.3) and I copied the example \nprovided by Vipan Singla's article linked from your site. I added an extra appender so I have an \nextra file. I used the org.apache.log4j.HTMLLayout which should do the following:\n\n<!-- HTML \nheader code -->\n\n<!-- Log events -->\n\n<!-- HTML footer code -->\n\nAnd looking at the source, I can see \nthat the methods should be called in this order:\n\ngetHeader();\n\nformat(); //As many times \nas is needed\n\ngetFooter();\n\nHowever, getFooter is NEVER called. And this happens on all of \nthe layout appenders, even if I subclass one of the existing layouts (say HTMLLayout or \nXMLLayout) and modify it.\n\nIf you want to try this, here's the property file I'm \nusing:\n\n#Add \", dest2\" to the end of this line for an extra, HTML log \nfile\nlog4j.rootCategory=DEBUG, dest1, \ndest2\n\nlog4j.appender.dest1=org.apache.log4j.ConsoleAppender\nlog4j.appender.dest1.layout=org.apache.log4j.PatternLayout\nlog4j.appender.dest1.layout.ConversionPattern=%-\n5p: \n%m%n\n\nlog4j.appender.dest2.layout=org.apache.log4j.HTMLLayout\nlog4j.appender.dest2=org.apache.log4j.FileAppender\nlog4j.appender.dest2.File=logfile.html", "id": 13226, "time": "2002-04-11T08:16:46Z", "bug_id": 7948, "creation_time": "2002-04-11T08:16:46Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "ceki@apache.org", "is_private": false, "id": 14782, "creation_time": "2002-04-25T21:27:03Z", "time": "2002-04-25T21:27:03Z", "bug_id": 7948, "text": "\nDo you see this bug in log4j 1.2?", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 7948, "attachment_id": null, "id": 14822, "time": "2002-04-26T08:16:28Z", "creator": "jjyooi@yahoo.com", "creation_time": "2002-04-26T08:16:28Z", "is_private": false, "text": "Yes. And I found out that it maybe because I didn't shut the object down \nproperly, so I tried calling the shutdown method, and it still happened. Ceki, \nI'll try to see if I can find a solution as well. It could simply be that I'm \nforgetting to call some method before doing something else. Until then, we'll \nleave this bug marked as RESOLVED WORKSFORME.\n\n\nLoopy"}, {"count": 3, "tags": [], "creator": "engrean@hotmail.com", "attachment_id": null, "id": 44913, "time": "2003-10-01T01:00:04Z", "bug_id": 7948, "creation_time": "2003-10-01T01:00:04Z", "is_private": false, "text": "This bug is still present in 1.2.8. It seems it is for all WriterAppenders"}, {"count": 4, "attachment_id": null, "bug_id": 7948, "text": "Changed the severity from ehancement to normal, since it is actually a bug. \nChanged the OS to \"All\" since I have seen this problem under Windows \n98/2000/XP and a few flavors of Linux (not that it matters since it's Java) \n \nThis bug is pretty annoying. I would think that it could be fixed by someone \nfamiliar with the codebase with very little effort or at least taken from the \njavadocs as being supported. \n ", "id": 48309, "time": "2003-11-29T19:55:49Z", "creator": "engrean@hotmail.com", "creation_time": "2003-11-29T19:55:49Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 7948, "attachment_id": null, "id": 48318, "time": "2003-11-29T22:50:54Z", "creator": "engrean@hotmail.com", "creation_time": "2003-11-29T22:50:54Z", "is_private": false, "text": "I could be wrong, but I think I have this nailed down to two main places. \n#1 Not all of the removeAppender methods end up actually calling close() on the\nappender before removing them. This means that the writerFooter and getFooter\nmethods will never get called depending on how you have the appenders\nregistered. To fix this, I simply added calls to Appendor's close method to the\nmethods that didn't already have them in the AppenderAttachableImpl class.\n\n#2 For some reason the shutdown method doesn't get called. It seems that this\nshutdown method is the one that spawns all of the cleanup of log4j. So I put a\nsimple log message in the Hierarchy shutdown method and I found it NEVER got\ncalled. My hack around this is to simply call the shutdown method on the very\nlast line of code that gets executed. \n\nBasically, after fixing #1, everything should work if the shutdown method gets\ncalled when it's supposed, which it doesn't seem to."}, {"count": 6, "tags": [], "bug_id": 7948, "text": "*** Bug 11446 has been marked as a duplicate of this bug. ***", "id": 68392, "time": "2004-12-13T17:43:31Z", "creator": "yoavs@computer.org", "creation_time": "2004-12-13T17:43:31Z", "is_private": false, "attachment_id": null}, {"text": "*** Bug 21794 has been marked as a duplicate of this bug. ***", "tags": [], "bug_id": 7948, "is_private": false, "count": 7, "id": 68398, "time": "2004-12-13T17:57:02Z", "creator": "yoavs@computer.org", "creation_time": "2004-12-13T17:57:02Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 7948, "is_private": false, "id": 68581, "creation_time": "2004-12-15T17:35:05Z", "time": "2004-12-15T17:35:05Z", "creator": "ceki@apache.org", "text": "\nIn log4j 1.3, the getFooter method of the layout is called whenever an instance of \nWriterAppender (and derivatives such as FileAppender, o.a.l.rolling.RollingAppender) \nare closed. ", "attachment_id": null}]