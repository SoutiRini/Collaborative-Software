[{"count": 0, "tags": [], "creator": "fernando.ribeiro@upic.com.br", "text": "There are some fixes to make in the documentation of the JDBC-based store [1]:\n\n1- The connectionName and connectionPassword parameters are missing\n\n2- The sessionAppCol, sessionDataCol, sessionIdCol, sessionLastAccessedCol, sessionMaxInactiveCol, sessionTable and sessionValidCol parameters, which are optional, seem to be marked as required\n\n3- The DDL for the sessions table doesn't match the defaults in the JDBCStore class [2]:\n\nCREATE TABLE tomcat$sessions (\n  id VARCHAR(100) NOT NULL PRIMARY KEY,\n  app VARCHAR(255),\n  data MEDIUMBLOB,\n  lastaccess BIGINT NOT NULL,\n  maxinactive INT NOT NULL,\n  valid CHAR(1) NOT NULL\n);\n\n[1] http://tomcat.apache.org/tomcat-8.0-doc/config/manager.html\n[2] http://svn.apache.org/viewvc/tomcat/trunk/java/org/apache/catalina/session/JDBCStore.java", "id": 178758, "time": "2014-10-26T21:27:44Z", "bug_id": 57147, "creation_time": "2014-10-26T21:27:44Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 57147, "text": "(In reply to Fernando Ribeiro from comment #0)\n> 3- The DDL for the sessions table doesn't match the defaults in the\n> JDBCStore class [2]:\n> \n> CREATE TABLE tomcat$sessions (\n>   id VARCHAR(100) NOT NULL PRIMARY KEY,\n>   app VARCHAR(255),\n>   data MEDIUMBLOB,\n>   lastaccess BIGINT NOT NULL,\n>   maxinactive INT NOT NULL,\n>   valid CHAR(1) NOT NULL\n> );\n\nI see no such DDL code as above in JDBCStore class. Where is it from?\nDid you take the default column names and wrote it by yourself?\n\nI would say that the DDL in documentation has more readable column names. It also specifies \"KEY kapp_name(app_name)\".  Is any substantial missing in documented DDL?\n\nI wonder whether \"MEDIUMBLOB\" is specific to MySQL or is actually defined in some specification.\n\n> 1- The connectionName and connectionPassword parameters are missing\n\nThose have to be documented.\nThough a better recommendation is to use a DataSource, referenced via dataSourceName property.\n\nWhen a DataSource is used, the \"connectionURL\", \"driverName\" properties are no more required.", "id": 178761, "time": "2014-10-26T23:15:31Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-10-26T23:15:31Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "fernando.ribeiro@upic.com.br", "text": "(In reply to Konstantin Kolinko from comment #1)\n> (In reply to Fernando Ribeiro from comment #0)\n> > 3- The DDL for the sessions table doesn't match the defaults in the\n> > JDBCStore class [2]:\n> > \n> > CREATE TABLE tomcat$sessions (\n> >   id VARCHAR(100) NOT NULL PRIMARY KEY,\n> >   app VARCHAR(255),\n> >   data MEDIUMBLOB,\n> >   lastaccess BIGINT NOT NULL,\n> >   maxinactive INT NOT NULL,\n> >   valid CHAR(1) NOT NULL\n> > );\n> \n> I see no such DDL code as above in JDBCStore class. Where is it from?\n> Did you take the default column names and wrote it by yourself?\n\nRight.\n\n> I would say that the DDL in documentation has more readable column names. It\n> also specifies \"KEY kapp_name(app_name)\".  Is any substantial missing in\n> documented DDL?\n\nThey may be more readable but they are not the defaults. The key may really need to be added to my DDL.\n\n> I wonder whether \"MEDIUMBLOB\" is specific to MySQL or is actually defined in\n> some specification.\n\nIt is a MySQL data type not available in many other databases.\n\n> > 1- The connectionName and connectionPassword parameters are missing\n> \n> Those have to be documented.\n> Though a better recommendation is to use a DataSource, referenced via\n> dataSourceName property.\n> \n> When a DataSource is used, the \"connectionURL\", \"driverName\" properties are\n> no more required.", "id": 178764, "time": "2014-10-27T01:14:45Z", "bug_id": 57147, "creation_time": "2014-10-27T01:14:45Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "text": "Fixed in 8.0.x for 8.0.15 onwards.", "id": 178839, "time": "2014-10-29T23:20:35Z", "bug_id": 57147, "creation_time": "2014-10-29T23:20:35Z", "is_private": false, "attachment_id": null}]