[{"count": 0, "tags": [], "creator": "rainer.jung@kippdata.de", "attachment_id": null, "id": 180075, "time": "2014-12-30T10:10:45Z", "bug_id": 57402, "creation_time": "2014-12-30T10:10:45Z", "is_private": false, "text": "Since version 2.4 of the Apache web server it has a feature named correlation ID, that allows to log a unique id in the error log and the access log. If you want to identify a request which triggered an error message, you can pick the correlation id from the error message and look for the same id in the access log. The id will be unique per request. Furthermore for cases where the error occured before reading the request, there is also a connection correlation id. The IDs are in the log_id member of the requets and connection structs.\n\nIt would be nice if mod_jk would also add the ID to its mod_jk log.\n\nThere are several implementation problems though:\n\n- mod_jk doesn't pass a request or connection struct down to the log implementation. So we can't easily access log_id. It might be possible by introducing thread local storage - which is supported by many platforms - and set a TLS pointer to the connection and request objects early during processing.\n\n- Apache sets the log_id not for every request, but only when it needs to write an error message for a request. We could set the log_id fields in mod_jk though (if not already set). It seems Apache won't overwrite them if they are already set (needs checking, see add_log_id() in server/log.c).\n\n- Making this work for Apache before 2.4 must be based on a different storage location for the log_id.\n\n- I haven't thought about making this even work for ISAPI.\n\nI currently don't plan working on this. Patches welcome."}]