[{"count": 0, "tags": [], "bug_id": 33540, "text": "apxs is called like this:\napxs2 -c -o mod_caml.so -I/usr/lib/ocaml/3.08 /tmp/camlprimdb957f.c\n-L/usr/lib/ocaml/3.08/pcre -L/usr/lib/ocaml/3.08 -lunix -lpcre_stubs -lpcre\n-lstr mod_caml_c.o apache_c.o wrappers.o -I/usr/include/apache2\n-I/usr/include/apr-0 -pipe -I/usr/include/xmltok -I/usr/include/openssl -Wall\n-O2 -lcamlrun -ltermcap -lunix -lstr -lcamlrun -lm -ldl -lcurses -lpthread\n\n/usr/bin/libtool --silent --mode=compile gcc -prefer-pic -pipe\n-I/usr/include/xmltok -I/usr/include/openssl -Wall -O2\n-DAP_HAVE_DESIGNATED_INITIALIZER -DLINUX=2 -D_REENTRANT -D_XOPEN_SOURCE=500\n-D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE\n-I/build/buildd/apache2-2.0.53/build-tree/apache2-build/prefork/srclib/pcre\n-pipe -I/usr/include/xmltok -I/usr/include/openssl -Wall -O2 -pthread\n-I/usr/include/apache2  -I/usr/include/apr-0   -I/usr/include/apr-0\n-I/usr/include -I/usr/lib/ocaml/3.08  -c -o /tmp/camlprimdb957f.lo\n/tmp/camlprimdb957f.c && touch /tmp/camlprimdb957f.slo\n\n/usr/bin/libtool --silent --mode=link gcc -o mod_caml.la  -rpath\n/usr/lib/apache2/modules -module -avoid-version    /tmp/camlprimdb957f.lo\n-L/usr/lib/ocaml/3.08/pcre -L/usr/lib/ocaml/3.08 -lunix -lpcre_stubs -lpcre\n-lstr mod_caml_c.o apache_c.o wrappers.o -I/usr/include/apache2\n-I/usr/include/apr-0 -pipe -I/usr/include/xmltok -I/usr/include/openssl -Wall\n-O2 -lcamlrun -ltermcap -lunix -lstr -lcamlrun -lm -ldl -lcurses -lpthread\n\nWhich means it doesn't create mod_caml.so . The file exists in .libs, however.\nI'm not yet sure if this one works.", "id": 70895, "time": "2005-02-13T10:33:01Z", "creator": "Gabriel.de-Perthuis@laPoste.net", "creation_time": "2005-02-13T10:33:01Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 33540, "text": ".libs/mod_caml.so should be a usable module. APXS uses GNU libtool under the hood, and this how \nGNU libtool comes out of the link phase. If you call APXS again with -i (for install), you'll get that same \nmod_caml.so in your Apache 2.0 modules directory. ", "id": 70908, "time": "2005-02-13T21:52:04Z", "creator": "sander@temme.net", "creation_time": "2005-02-13T21:52:04Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 33540, "is_private": false, "count": 2, "id": 70938, "time": "2005-02-14T17:51:00Z", "creator": "Gabriel.de-Perthuis@laPoste.net", "creation_time": "2005-02-14T17:51:00Z", "text": "This prevents apxs from being used in place of a compiler. For example, in a\nmakefile that involves OCaml and its special linking of C to bytecode, the OCaml\nlinker assumes that the compiler it calls with -o my_module.so assumes\n(reasonnably?) it will get my_module.so .\nThis can be solved by writing a wrapper around apxs2 that copies the file,\nhowever that doesn't integrate well with the autoconf infrastructure that uses\nan APXS variable.\nSo I think you should consider a switch that makes apxs create that file."}, {"count": 3, "tags": [], "bug_id": 33540, "is_private": false, "text": "(I should proofread myself, sorry)", "id": 70939, "time": "2005-02-14T17:52:45Z", "creator": "Gabriel.de-Perthuis@laPoste.net", "creation_time": "2005-02-14T17:52:45Z", "attachment_id": null}]