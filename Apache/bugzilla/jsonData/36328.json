[{"count": 0, "tags": [], "creator": "hassan@webtuitive.com", "attachment_id": null, "text": "In the absence of an explicit locale setting, fmt:formatNumber ignores the\nmaxFractionDigits attribute.\n\nTest case:\n--------------------------------------------------------------------\n<%@ taglib uri=\"http://java.sun.com/jsp/jstl/core\" prefix=\"c\" %>\n<%@ taglib uri=\"http://java.sun.com/jsp/jstl/fmt\" prefix=\"fmt\" %>\n\n<c:set var=\"someCount\" value=\"61\"/>\n<c:set var=\"counter1\">\n<fmt:formatNumber type=\"number\"\n    maxFractionDigits=\"0\" value=\"${ someCount / 3 }\"/></c:set>\n\n${counter1}\n|\n<fmt:setLocale value=\"en_US\"/>\n<c:set var=\"counter2\">\n<fmt:formatNumber type=\"number\"\n    maxFractionDigits=\"0\" value=\"${ someCount / 3 }\"/></c:set>\n\n${counter2}\n--------------------------------------------------------------------\n\nMost browsers will show\n 20 | 20\n\nbut user-agents not providing a Locale via an Accept-Language header\nlike wget (and Amaya) retrieve\n\n 20.333333333333332 | 20\n\nIf I manually add a header to wget, e.g.\n   wget --header='Accept-Language: en-us,en'\nthen the result is '20 | 20' \n\ndemonstration environment: Sun JDK 1.5.0_03 and JSTL 1.1.2", "id": 78887, "time": "2005-08-23T20:13:09Z", "bug_id": 36328, "creation_time": "2005-08-23T20:13:09Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 36328, "text": "The spec says the following:\n\n  If this action fails to determine a formatting locale, it uses Number.toString()\n  as the output format.\n\nThis explains why the maxFractionDigits attribute is ignored.\n", "count": 1, "id": 83471, "time": "2005-12-09T07:46:10Z", "creator": "pierre.delisle@sun.com", "creation_time": "2005-12-09T07:46:10Z", "is_private": false}, {"count": 2, "tags": [], "creator": "pierre.delisle@sun.com", "is_private": false, "id": 83490, "creation_time": "2005-12-09T19:36:25Z", "time": "2005-12-09T19:36:25Z", "bug_id": 36328, "text": "An RFE has been files with the JSTL spec. See:\nhttps://jstl-spec-public.dev.java.net/issues/show_bug.cgi?id=23", "attachment_id": null}]