[{"count": 0, "tags": [], "creator": "rolf@rolf.mueller.name", "text": "If I start ant from a bash shell script, then it fails,\nif I start it directly through the console, it works fine.\n\nHere is the shell script:\n\n#!/bin/sh\necho JAVA_HOME is set to: $JAVA_HOME\necho ANT_HOME  is set to: $ANT_HOME\necho This script will deploy IMS.Server\necho If you get a BUILD FAILED error, try to run\necho the command 'ant deploy.instances' directly.\n\nant -verbose deploy.instances\n\nRunning it as ./install.sh, the result is the following:\n\nJAVA_HOME is set to: /usr/java/j2sdk1.4.2_05\nANT_HOME is set to: /usr/local/apache-ant-1.6.2\nThis script will deploy IMS.Server\nIf you get a BUILD FAILED error, try to run\nthe command ant deploy.instances directly.\nApache Ant version 1.6.2 compiled on July 16 2004\nBuildfile: build.xml\nDetected Java version: 1.4 in: /usr/java/j2sdk1.4.2_05/jre\nDetected OS: Linux\nparsing buildfile /var/managedimages/install.linux/build.xml with URI =\nfile:///var/managedimages/install.linux/build.xml\nProject base dir set to: /var/managedimages/install.linux\n                                                                                \nBUILD FAILED\n' does not exist in this project.\n        at org.apache.tools.ant.Project.tsort(Project.java:1665)\n        at org.apache.tools.ant.Project.topoSort(Project.java:1587)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1191)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\n\n\nNow, when I directly run ant, as in 'ant deploy.instances', then\nthe build goes through fine.\n\nHere is some additional information about the working directory and the content:\n\n[root@rm12 install.linux]# pwd\n/var/managedimages/install.linux\n[root@rm12 install.linux]# ls -al\ntotal 28\ndrwxr-xr-x    2 root     root         4096 Oct 12 01:13 .\ndrwxr-xr-x    8 root     root         4096 Oct 12 01:05 ..\n-rw-r--r--    1 root     root          335 Oct 11 23:35 build.properties\n-rw-r--r--    1 root     root         7134 Oct 11 23:35 build.xml\n-rwxr--r--    1 root     root          254 Oct 12 01:13 install.sh", "id": 64935, "time": "2004-10-11T15:36:13Z", "bug_id": 31648, "creation_time": "2004-10-11T15:36:13Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 31648, "text": "Try a couple of things from within a test version of your script:\n\n1.  Add a 'which ant' prior to your Ant invocation.\n2.  Change your command to 'ant --execdebug -verbose deploy.instances'\n\nLet us know what you get.\n\n-Matt", "id": 64936, "attachment_id": null, "creator": "mbenson@apache.org", "creation_time": "2004-10-11T15:39:46Z", "time": "2004-10-11T15:39:46Z", "is_private": false}, {"count": 2, "tags": [], "text": "This is not an ant problem; install.sh is not an ant redistributable. Sorry. \nyou need to take it up with whoever supplied the shell script.", "is_private": false, "id": 64937, "creator": "stevel@apache.org", "time": "2004-10-11T15:50:07Z", "bug_id": 31648, "creation_time": "2004-10-11T15:50:07Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "As requested, the install.sh file looks like following:\n\n#!/bin/sh\necho JAVA_HOME is set to: $JAVA_HOME\necho ANT_HOME  is set to: $ANT_HOME\necho This script will deploy IMS.Server\necho If you get a BUILD FAILED error, try to run\necho the command 'ant deploy.instances' directly.\n\nwhich ant\nant --execdebug -verbose deploy.instances\n\n\nStarting it with ./install.sh results in the following output:\n\nJAVA_HOME is set to: /usr/java/j2sdk1.4.2_05\nANT_HOME is set to: /usr/local/apache-ant-1.6.2\nThis script will deploy IMS.Server\nIf you get a BUILD FAILED error, try to run\nthe command ant deploy.instances directly.\n/usr/local/apache-ant-1.6.2/bin/ant\nexec \"/usr/java/j2sdk1.4.2_05/bin/java\" -classpath\n\"/usr/local/apache-ant-1.6.2/lib/ant-launcher.jar\"\n-Dant.home=\"/usr/local/apache-ant-1.6.2\"\n-Dant.library.dir=\"/usr/local/apache-ant-1.6.2/lib\"\norg.apache.tools.ant.launch.Launcher -lib \"\"\n\"-verbose\" \"deploy.instances\nApache Ant version 1.6.2 compiled on July 16 2004\nBuildfile: build.xml\nDetected Java version: 1.4 in: /usr/java/j2sdk1.4.2_05/jre\nDetected OS: Linux\nparsing buildfile /var/managedimages/install.linux/build.xml with URI =\nfile:///var/managedimages/install.linux/build.xml\nProject base dir set to: /var/managedimages/install.linux\n \nBUILD FAILED\n' does not exist in this project.\n        at org.apache.tools.ant.Project.tsort(Project.java:1665)\n        at org.apache.tools.ant.Project.topoSort(Project.java:1587)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1191)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\n \nTotal time: 0 seconds\n\n", "is_private": false, "id": 64953, "creator": "rolf@rolf.mueller.name", "time": "2004-10-11T23:33:04Z", "bug_id": 31648, "creation_time": "2004-10-11T23:33:04Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 31648, "text": "Not familiar with this system yet... ;-)\nProblem is not solved, hence repoen bug...", "id": 64954, "attachment_id": null, "creator": "rolf@rolf.mueller.name", "creation_time": "2004-10-11T23:34:24Z", "time": "2004-10-11T23:34:24Z", "is_private": false}, {"count": 5, "tags": [], "creator": "rolf@rolf.mueller.name", "text": "Hello Steve,\n\nSorry, oversaw your comment.\nIt's myself who supplied the shell script.\nI thought it is pretty straight forward,\ninstead of calling ant from the console,\nI do exactly the same in the script (nothing more),\nand it fails with an exceptions which provides\nnot understandable information.\nAm I doing something basically wrong?\n\nThanks for your help!\n\nRolf", "id": 64955, "time": "2004-10-11T23:38:56Z", "bug_id": 31648, "creation_time": "2004-10-11T23:38:56Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 31648, "attachment_id": null, "text": "I ran the \"install.sh\"\nand it ran fine:\npreilly@angel:~/learning/a/x > ./install.sh\nJAVA_HOME is set to: /usr/java/jdk1.5.0\nANT_HOME is set to: /home/preilly/apps/apache-ant-1.6.2\nThis script will deploy IMS.Server\nIf you get a BUILD FAILED error, try to run\nthe command ant deploy.instances directly.\n/home/preilly/bin/ant\nexec \"/usr/java/jdk1.5.0/bin/java\" -Xms200m -Xmx1000m -classpath\n\"/home/preilly/apps/apache-ant-1.6.2/lib/ant-launcher.jar\"\n-Dant.home=\"/home/preilly/apps/apache-ant-1.6.2\"\n-Dant.library.dir=\"/home/preilly/apps/apache-ant-1.6.2/lib\"\norg.apache.tools.ant.launch.Launcher -lib \"\" \"-verbose\" \"deploy.instances\"\nApache Ant version 1.6.2 compiled on July 16 2004\nBuildfile: build.xml\nDetected Java version: 1.5 in: /fc1/usr/java/jdk1.5.0/jre\nDetected OS: Linux\nparsing buildfile /home/preilly/learning/a/x/build.xml with URI =\nfile:///home/preilly/learning/a/x/build.xml\nProject base dir set to: /home/preilly/learning/a/x\nBuild sequence for target `deploy.instances' is [deploy.instances]\nComplete build sequence is [deploy.instances, hello, ]\n\ndeploy.instances:\n\nBUILD SUCCESSFUL\n\nYour build works from the command line so try to\ngo from a working case to the failure case step by\nstep.\n\n1) make a test.sh containing\nant deploy.instances\nand run it by\nsh deploy.instances\n2) make \"test.sh\" an executalbe and run that\nchmod +x test.sh\n./test.sh\n3) line by line add in the the contents of install.sh\n   to test.sh, checking ./test.sh each time\n", "id": 64974, "time": "2004-10-12T08:49:04Z", "creator": "peterreilly@apache.org", "creation_time": "2004-10-12T08:49:04Z", "is_private": false}, {"count": 7, "tags": [], "creator": "rolf@rolf.mueller.name", "is_private": false, "id": 65293, "creation_time": "2004-10-19T00:03:00Z", "time": "2004-10-19T00:03:00Z", "bug_id": 31648, "text": "I did some testing again, and I found out, that my shell script\nhad a problem. I created it on a Windows system using Eclipse,\nbut run it on Linux. The problem was, that the shell script\nhad <LF><CR> instead of just <LF>. I saw similar reaction\nwith starting plain Java programs from the shell script.\nI just found it strange, how ant reacts in this case. \nWasn't better with java either...\nThanks,\nRolf", "attachment_id": null}]