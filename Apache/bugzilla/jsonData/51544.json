[{"count": 0, "tags": [], "creator": "glamd@abv.bg", "attachment_id": null, "text": "When I return Collections.emptyList() and then use ${list.isEmpty()} in a JSP, a problem occurs (see below). It didn't occur in older Tomcat 7 versions (like 7.0.5).\n\n15:             ${user.names}<br />\n16:         </div>\n17:     </c:forEach>\n18:     <c:if test=\"${users.isEmpty()}\">\n19:         <div>${msg.noResults}</div>\n20:     </c:if>\n21: </div>\n\n\nStacktrace:] with root cause\njava.lang.IllegalAccessException: Class javax.el.BeanELResolver can not access a member of class java.util.Collections$EmptyList with modifiers \"public\"\n\tat sun.reflect.Reflection.ensureMemberAccess(Reflection.java:95)\n\tat java.lang.reflect.Method.invoke(Method.java:607)\n\tat javax.el.BeanELResolver.invoke(BeanELResolver.java:467)\n\tat javax.el.CompositeELResolver.invoke(CompositeELResolver.java:161)\n\tat org.apache.el.parser.AstValue.getValue(AstValue.java:159)\n\tat org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)\n\tat org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:985)\n\tat org.apache.jsp.WEB_002dINF.jsp.externalUsers_jsp._jspx_meth_c_005fif_005f2(externalUsers_jsp.java:2060)\n\tat org.apache.jsp.WEB_002dINF.jsp.externalUsers_jsp._jspService(externalUsers_jsp.java:396)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:722)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)\n\tat org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)\n\tat org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1120)\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:890)", "id": 148094, "time": "2011-07-23T08:17:58Z", "bug_id": 51544, "creation_time": "2011-07-23T08:17:58Z", "is_private": false}, {"count": 1, "tags": [], "text": "I have added unit tests for this in Tomcat 7 that access the list in EL as a property of a bean, in EL directly and from within a JSP and all pass.\n\nAt this points it looks an application issue.\n\nIf you still see this problem with the latest Tomcat 7 release then to re-open this issue you'll need to provide the simplest possible JSP that demonstrates this issue.", "attachment_id": null, "id": 148102, "creator": "markt@apache.org", "time": "2011-07-24T11:14:51Z", "bug_id": 51544, "creation_time": "2011-07-24T11:14:51Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 51544, "text": "Gump caught this error with the tests that Mark wrote for this issue.\n\nTestsuite: org.apache.el.TestValueExpressionImpl\nTests run: 7, Failures: 0, Errors: 2, Time elapsed: 0.131 sec\nFailed:\n- testBug51544Bean\n- testBug51544Direct\n\nTestsuite: org.apache.el.TestELInJsp\nTests run: 14, Failures: 0, Errors: 1, Time elapsed: 23.259 sec\nFailed:\n- testBug51544", "id": 148118, "time": "2011-07-25T09:30:50Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2011-07-25T09:30:50Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": 27311, "text": "Created attachment 27311\nA copy of two files from gump output, 25 Jul 2011 08:58:47 (UTC)\n\n1. I am attaching a copy from the logs produced by gump run\n\nThe log files are\nhttp://vmgump.apache.org/gump/public/tomcat-trunk/tomcat-trunk-test/gump_file/TEST-org.apache.el.TestValueExpressionImpl.BIO.txt.html\n\nhttp://vmgump.apache.org/gump/public/tomcat-trunk/tomcat-trunk-test/gump_file/TEST-org.apache.el.TestELInJsp.BIO.txt.html\n\n\n2. I am not able to reproduce this in my environment (Sun JDK 6u26 32-bit, WinXP): tested with BIO connector, like gump did. All tests run fine.\n\nbozho, what version of java runtime are you using?", "id": 148119, "time": "2011-07-25T10:31:29Z", "bug_id": 51544, "creation_time": "2011-07-25T10:31:29Z", "is_private": false}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Gump is running open JDK:\n\njava version \"1.6.0_20\" OpenJDK Runtime Environment (IcedTea6 1.9.8) (6b20-1.9.8-0ubuntu1~10.04.1) OpenJDK 64-Bit Server VM (build 19.0-b09, mixed mode)", "id": 148120, "time": "2011-07-25T10:36:51Z", "bug_id": 51544, "creation_time": "2011-07-25T10:36:51Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 51544, "text": "Hi,\n\nMy version is:\n\njava version \"1.6.0_20\"\nOpenJDK Runtime Environment (IcedTea6 1.9.1) (amazon-44.1.9.1.18.amzn1-i386)\nOpenJDK Client VM (build 19.0-b06, mixed mode)", "id": 148121, "time": "2011-07-25T10:44:31Z", "creator": "glamd@abv.bg", "creation_time": "2011-07-25T10:44:31Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "glamd@abv.bg", "attachment_id": null, "id": 148122, "time": "2011-07-25T10:46:04Z", "bug_id": 51544, "creation_time": "2011-07-25T10:46:04Z", "is_private": false, "text": "it's still in testing mode, hence the -client VM. I will change to -server, but I guess it will still be there."}, {"count": 7, "tags": [], "bug_id": 51544, "text": "I took a look at the Oracle and OpenJDK implementations of emptyList(). If I modify the test to use size() rather than isEmpty() it fails on the Oracle JDK as well.", "id": 148128, "time": "2011-07-25T14:05:50Z", "creator": "markt@apache.org", "creation_time": "2011-07-25T14:05:50Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 51544, "text": "Fixed in 7.0.x and will be included in 7.0.20 onwards.", "id": 148133, "time": "2011-07-25T16:23:38Z", "creator": "markt@apache.org", "creation_time": "2011-07-25T16:23:38Z", "is_private": false, "attachment_id": null}]