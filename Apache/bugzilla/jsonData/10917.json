[{"count": 0, "tags": [], "text": "This is a little weird, but if you have a long classpath, the ant.bat wrapper \nwill not properly run org.apache.tools.ant.Main.  My classpath is as follows:\n\nClassPath=c:\\Classes\\activation.jar;c:\\Classes\\ejb.jar;c:\\Classes\\hpjdbc.jar;c:\\\nClasses\\jaxp.jar;c:\\Classes\\jcifs-\n0.6.5.jar;c:\\Classes\\jconn2.jar;c:\\Classes\\jdbc2_0-\nstdext.jar;c:\\Classes\\mail.jar;c:\\Classes\\parser.jar;c:\\Classes\\regex4j.jar;c:\\C\nlasses\\servlet.jar;c:\\Classes\\soap.jar;c:\\Classes\\tspaces_client.jar;.;C:\\\n\nRunning ant.bat will report me the java usage.  Somehow the long classpath is \nmaking the java class fall off, so java reports an error because it is missing \na class.\n\nThe workaround is to modify ant.bat and remove the double quotes around \nclasspath.  Before:\n  \"%_JAVACMD%\" -classpath \"%LOCALCLASSPATH%\" ...\nAfter:\n  \"%_JAVACMD%\" -classpath %LOCALCLASSPATH% ...\n\nOddly enough, this works.  Note that I do not have any spaces in my classpath, \nwhich is probably why you have the double quotes there.  If the classpath is \nmuch simpler/smaller, the problem disappears.\n\nThere must be a way to modify ant.bat so that it accomodates a long classpath.", "attachment_id": null, "id": 19707, "creation_time": "2002-07-17T19:10:07Z", "time": "2002-07-17T19:10:07Z", "creator": "awhitford@fftw.com", "bug_id": 10917, "is_private": false}, {"count": 1, "tags": [], "bug_id": 10917, "attachment_id": null, "id": 19709, "time": "2002-07-17T19:43:09Z", "creator": "sbailliez@apache.org", "creation_time": "2002-07-17T19:43:09Z", "is_private": false, "text": "I have a hard time understanding this or your bug report is not complete.\n\nI suppose your classpath is what you have as a env. variable..now what is the \nfinal classpath ? I believe it is close to 1024Kb, right ?\n\nDo a echo of the command line into a file and copy paste it here.\n\nYour workaround will fail with a path containing a space.\n\nI recommend you to change the way you do things as well and do not use \nclasspath anymore. AFAIK all people using Ant have a classpath that is close \nto zero. Personally, I'm always working with a classpath limited to '.' just \nso that I can quickly launch anything from command line but that's all.\n\nWhat you are doing here is shooting yourself in the foot IMHO."}, {"attachment_id": null, "tags": [], "bug_id": 10917, "is_private": false, "count": 2, "id": 19711, "time": "2002-07-17T19:46:46Z", "creator": "sbailliez@apache.org", "creation_time": "2002-07-17T19:46:46Z", "text": "Read '2048 bytes' instead of '1024kb'.. dunno what I was thinking about"}, {"count": 3, "tags": [], "creator": "ddevienne@lgc.com", "attachment_id": null, "text": "This is a DOS limitation. To go around it, use the python or perl Ant launcher.", "id": 19714, "time": "2002-07-17T20:34:36Z", "bug_id": 10917, "creation_time": "2002-07-17T20:34:36Z", "is_private": false}, {"count": 4, "tags": [], "text": "Wait for his reply you don't know it yet even though probability is very close \nto 1, this is why I asked.", "is_private": false, "bug_id": 10917, "id": 19716, "time": "2002-07-17T20:44:55Z", "creator": "sbailliez@apache.org", "creation_time": "2002-07-17T20:44:55Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "> ClassPath=[...];C:\\\n\nDoes your classpath actually end like this? I think I remember something either \nin the bug reports or in mail about classpaths shouldn't end in a backslash \n(maybe it ends up quoting the closing quote?) I don't have time to try and \ntrack it down right now, but you may want to just try moving that last one to a \ndifferent place in the list and see if that fixes it.", "attachment_id": null, "id": 19719, "creation_time": "2002-07-17T20:54:56Z", "time": "2002-07-17T20:54:56Z", "creator": "holtdl@yahoo.com", "bug_id": 10917, "is_private": false}, {"count": 6, "tags": [], "creator": "ddevienne@lgc.com", "attachment_id": null, "text": "True. I was bite by that weird thing. I solved it by the following two lines of \nBAT, where the two env. vars where referenced on the Java command line as \nin 'java %_sysproperties% %_ovproperties% MyClass arguments'. Since the \nclasspath is surrounded by quotes, you may end up with the fatal \\\" \ncombination. Maybe ant.bat should have such voodoo (only tested in WinNT, \nWin2K, so don't know if it works on Win95 / Win98 / WinMe).\n\n:: replace all the trailing \\\" by \\\\\" to avoid the java program\n:: misunderstanding the command line\nset _sysproperties=%_sysproperties:\\\"=\\\\\"%\nset _ovproperties=%_ovproperties:\\\"=\\\\\"%", "id": 19721, "time": "2002-07-17T21:03:13Z", "bug_id": 10917, "creation_time": "2002-07-17T21:03:13Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 10917, "is_private": false, "count": 7, "id": 19809, "time": "2002-07-18T19:40:39Z", "creator": "awhitford@fftw.com", "creation_time": "2002-07-18T19:40:39Z", "text": "Yes, the problem was that the classpath ended with a back-slash.  Looks like \nthe c:\\\" at the end of the classpath was confusing Windows.  Thanks for your \nhelp!"}]