[{"count": 0, "tags": [], "text": "Hi All,\n\nI hope you folks can help get to the bottom of \"(104)Connection reset by\npeer:ap_content_length_filter: apr_bucket_read() failed\" errors in the apache\nerror log.\n\nThe error occurs when two conditions are met: 1) htaccess authentication is\nturned on, and 2) a skin other than classic is being used.\n\nAdditionally, when the error condition is present, a Mozilla/Firefox user will\nlikely have their comment added although they may have to add comment or saved\ntheir edit more than once (perhaps resulting in duplicate postings). An Internet\nExplorer user on the other hand will probably not be able to comment or edit at\nall -- after pressing the button the browser sits there 'receiving' indefinately.\n\nThe server environment is is Linux kernel 2.6.9, Apache/2.0.52, perl 5.8.3, and\nTWiki 01 Sep 2004 $Rev: 1742 $. Mod_perl, speedycgi etc are not used or loaded.\n\nI have STDERR redirected to a log file, but it doesn't produce any errors\nrelated to this.\n\nI am not the administrator of this machine, e.g. I cannot restart the apache\nserver, but I do have read access to the relevant configs if necessary and can\npoke around via ssh.\n\nA page which demonstrates the problem can be seen at:\nhttp://yukongis.ca/bin/view/Sandbox/BucketFailure\nand the same page using a skin which doesn't exhibit the problem:\nhttp://yukongis.ca/bin/view/Sandbox/BucketFailure?skin=classic\n\nThank you in advance for any assistance you may be able to provide. \n\nI've spent a few hours on irc://irc.freenode.net/#apache where there was some\nindication it might be a problem with authentication being asked for on linked\ncss files. There is nothing in my configuration to ask for authorisation on\nthese though. There are many other sites with very similar configurations to\nmine which haven't reported this problem.\n\nI did find an irc log of one person using Apache2 and TWiki which mentioned this\nerror. It went away when he changed from the worker config to pre-fork. This is\nnot an option for my host.\n\nI've also sent a message very similar to this one to the apache users mailing\nlist, which didn't get a single reply.\n\nModules: (from apachectl -e debug)\n\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module vhost_alias_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module env_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module log_config_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module mime_magic_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module mime_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module negotiation_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module status_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module info_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module include_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module autoindex_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module dir_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module cgid_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module asis_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module imap_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module actions_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module speling_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module userdir_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module alias_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module access_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module auth_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module auth_anon_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module auth_dbm_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module cern_meta_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module expires_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module headers_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module usertrack_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module unique_id_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module setenvif_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module ssl_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module rewrite_module\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module jk2_module\n[Thu Dec 16 21:47:51 2004] [debug]\n/tmp/jakarta-tomcat-connectors-4.1.24-src/jk/native2/server/apache2/mod_jk2.c(344):\nmod_jk Create config for default server (null)\\n\n[Thu Dec 16 21:47:51 2004] [debug] mod_so.c(247): loaded module php5_module", "is_private": false, "id": 68639, "creator": "maphew@zworg.com", "time": "2004-12-17T07:12:24Z", "bug_id": 32744, "creation_time": "2004-12-17T07:12:24Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "the httpd.conf and .htaccess file is posted at\nhttp://yukongis.ca/bin/view/Sandbox/BucketFailure. I can duplicate those here if\nyou like.", "attachment_id": null, "id": 68640, "creator": "maphew@zworg.com", "time": "2004-12-17T07:16:09Z", "bug_id": 32744, "creation_time": "2004-12-17T07:16:09Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 32744, "attachment_id": null, "is_private": false, "id": 68647, "time": "2004-12-17T12:32:21Z", "creator": "nick@webthing.com", "creation_time": "2004-12-17T12:32:21Z", "text": "> The error occurs when two conditions are met: 1) htaccess authentication is\n> turned on, and 2) a skin other than classic is being used.\n\nThat's enough to tell us it's an application problem somewhere.  Apache has no\nnotion of a \"skin\", classic or otherwise.  Look to whatever it is that gives you\n\"skins\".  Except ... it seems to be a local issue ...\n\nFWIW it worked for me, but showed config issues (authentication on submit, and\nan apparent redirect) and badly mangled HTML.  Please reopen if you can fix your\nproblems and identify an issue in Apache."}]