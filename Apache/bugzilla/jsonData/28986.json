[{"count": 0, "tags": [], "bug_id": 28986, "attachment_id": null, "id": 57429, "time": "2004-05-14T16:49:52Z", "creator": "trond@aasan.org", "creation_time": "2004-05-14T16:49:52Z", "is_private": false, "text": "Using tomcat 5.0.24\n\nThis may belong to commons-el\n\nJasper uses the org.apache.commons.el implementation.\n\npageContext.getExpressionEvaluator() returns a\norg.apache.commons.el.ExpressionEvaluatorImpl\n\nFrom org.apache.commons.el.ImplicitObjects.java (which is the identical to\norg.apache.taglibs.standard.lang.jstl.ImplicitObjects)\n\n  static final String sAttributeName = \n    \"org.apache.taglibs.standard.ImplicitObjects\";\n\n\nThis line fails (ImplicitObjects.java:121)\n  public static ImplicitObjects getImplicitObjects (PageContext pContext)\n  {\n    ImplicitObjects objs = \n      (ImplicitObjects)\n      pContext.getAttribute (sAttributeName,\n\t\t\t     PageContext.PAGE_SCOPE);\n\n\nTrying to cast org.apache.taglibs.standard.lang.jstl.ImplicitObjects to\norg.apache.commons.el.ImplicitObjects\n\nThis means I can not use ExpressionEvaluators in my own taglibs."}, {"count": 1, "text": "Hi Trond,\n\nCould you give more details on how does it fails? Does it fail when you try to\nuse commons-el in your own tag handler? If so, could you please provide a simple\ntest case (i.e., a tag handler that tries to use commons-el and gets an exception)?\n\nTIA,\n\nFelipe\n", "bug_id": 28986, "is_private": false, "id": 59164, "time": "2004-06-13T18:25:57Z", "creator": "nagoya@felipeal.net", "creation_time": "2004-06-13T18:25:57Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 28986, "attachment_id": null, "id": 59200, "creation_time": "2004-06-14T17:30:54Z", "time": "2004-06-14T17:30:54Z", "creator": "trond@aasan.org", "text": "Stacktrace\n\njava.lang.ClassCastException\n\torg.apache.commons.el.ImplicitObjects.getImplicitObjects(ImplicitObjects.java:123)\n\torg.apache.commons.el.VariableResolverImpl.resolveVariable(VariableResolverImpl.java:130)\n\torg.apache.jasper.runtime.PageContextImpl.resolveVariable(PageContextImpl.java:833)\n\torg.apache.commons.el.NamedValue.evaluate(NamedValue.java:124)\n\torg.apache.commons.el.ComplexValue.evaluate(ComplexValue.java:140)\n\torg.apache.commons.el.ExpressionEvaluatorImpl.evaluate(ExpressionEvaluatorImpl.java:263)\n\torg.apache.commons.el.ExpressionEvaluatorImpl.evaluate(ExpressionEvaluatorImpl.java:190)\n\torg.example.StoryTag.setStoryId(StoryTag.java:88)\n\torg.apache.jsp.edit.view_jspx._jspx_meth_model_story_0(view_jspx.java:263)\n...\n...\n\nOffending method in StoryTag.java:\n\n    public void setStoryId(String storyId) throws JspException {\n\ttry {\n\t    Long value = (Long) pageContext.getExpressionEvaluator().evaluate(storyId,\nLong.class, pageContext.getVariableResolver(), null);\n\t    this.storyId = value;\n\t} catch (ELException e) {\n\t    throw new JspException(e);\n\t}\n    }\n\nClumsy coding (first attempt in trying to use EL in custom tags) :-)\n\nThis is a rather complex Struts application. I can't seem to create a simple\ntest case, but somewhere in the app the pageContext attribute\n\"org.apache.taglibs.standard.ImplicitObjects\" is set to an instance of\norg.apache.taglibs.standard.lang.jstl.ImplicitObjects and later retrieved (in\norg.apache.commons.el.ImplicitObjects) as an\norg.apache.commons.el.ImplicitObjects which causes the ClassCastException", "is_private": false}, {"count": 3, "text": "\n\n*** This bug has been marked as a duplicate of 29402 ***", "bug_id": 28986, "is_private": false, "id": 59430, "time": "2004-06-17T16:57:27Z", "creator": "justyna.horwat@sun.com", "creation_time": "2004-06-17T16:57:27Z", "tags": [], "attachment_id": null}, {"count": 4, "text": "Changed resolution to INVALID since duplicate bug has been deleted from Bugzilla and leaving as DUPLICATE creates referential integrity issues for the underlying database.", "bug_id": 28986, "is_private": false, "id": 119069, "time": "2008-07-28T05:55:01Z", "creator": "markt@apache.org", "creation_time": "2008-07-28T05:55:01Z", "tags": [], "attachment_id": null}]