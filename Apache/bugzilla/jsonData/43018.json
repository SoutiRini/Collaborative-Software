[{"count": 0, "tags": [], "bug_id": 43018, "text": "Hello,\n\nThis is a script in PHP that is called by the a CGI handler in Apache. HTTP\nAuthentification.\n\nIn a normal Apache module environnement, a HTTP Authentification is called and\nwe can see on the log of Apache :\nIP - USER - [DATETIME] \"GET / HTTP/1.1\" 200 SIZE \"REFERER\" \"AGENT\"\n\nMeanwhile, in a CGI environnement, Apache call a CGI script, in my exemple PHP\nand pass him variables.\nSo in order of compatibility to pass the authentification to the PHP script, we\nhave to set a .htaccess where :\nRewriteEngine on\nRewriteRule .* - [E=REMOTE_USER:%{HTTP:Authorization},L]\n\nSo with it in environnement variables we can see :\n[REDIRECT_REMOTE_USER] => Basic dGl0aTp0b3Rv\n[REDIRECT_STATUS] => 200\nwhere dGl0aTp0b3Rv is corresponding to user:password titi:toto (base64)\n\nOf course, with network analyzer, we can see that the browser send to the Apache\nserveur in HTTP headers :\nAuthorization: Basic dGl0aTp0b3Rv\n(our titi:toto)\n\nIn this cas, Apache log don't indicate the user :\nIP - - - [DATETIME] \"GET / HTTP/1.1\" 200 SIZE \"REFERER\" \"AGENT\"\n\nOk, the use of PHP is independant of Apache log writes but if browser send\nAuthorization: Basic dGl0aTp0b3Rv in a module Apache or CGI Apache (PHP), why\nApache, that see the basic, don't write the remote_user in the log ?\n\nIn normal environnement, whithout CGI, handler ..., the browser send the same\nrequest and the log indicate the USER.\n\nThank you for any help.", "id": 106224, "time": "2007-08-02T15:34:38Z", "creator": "apache.org@eurower.com", "creation_time": "2007-08-02T15:34:38Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "Sounds like you are internally redirecting from an authenticated resource to an\nunauthenticated one, in which case you would need to use %<u in your logformat\nstring to get the originally authenticated user.\n\nPlease address this type of issue to the users@httpd.apache.org mailing list\nbefore filing a bug.", "attachment_id": null, "id": 106226, "creator": "slive@apache.org", "time": "2007-08-02T16:39:22Z", "bug_id": 43018, "creation_time": "2007-08-02T16:39:22Z", "is_private": false}]