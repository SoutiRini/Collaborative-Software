[{"count": 0, "tags": [], "bug_id": 45809, "text": "Created attachment 22567\nA screenshot illustrating the problem\n\nAt least some 24-bit PNG files, but probably all of them, are rendered by FOP with dull colors (see example.png).\nThis can be seen even in a simple 8 pixel example. The image and its colors are correct (object 11 in the PDF); and the soft mask too (object 10 in the PDF). So there could be a problem with the ICC color profile after all (obj 5).", "id": 120613, "time": "2008-09-15T07:11:35Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-15T07:11:35Z", "is_private": false, "attachment_id": 22567}, {"count": 1, "tags": [], "bug_id": 45809, "is_private": false, "text": "Created attachment 22568\nFO file\n\nFO source file for the example.", "id": 120614, "time": "2008-09-15T07:13:00Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-15T07:13:00Z", "attachment_id": 22568}, {"count": 2, "tags": [], "bug_id": 45809, "text": "Created attachment 22569\nThe test image.", "id": 120615, "time": "2008-09-15T07:13:34Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-15T07:13:34Z", "is_private": false, "attachment_id": 22569}, {"count": 3, "tags": [], "bug_id": 45809, "text": "Created attachment 22570\nThe generated PDF", "id": 120616, "time": "2008-09-15T07:14:23Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-15T07:14:23Z", "is_private": false, "attachment_id": 22570}, {"count": 4, "tags": [], "bug_id": 45809, "attachment_id": 22572, "text": "Created attachment 22572\nThe PDF obtained without a soft mask\n\nThis PDF is generated without a PDF soft mask by commenting out this.softmask =... in ImageRenderedAdapter.java:102\nThe colors are now bright and the PDF no longer has a soft mask bound to the image. But the third pixel from the left is now rendered opaque, while it should be completely transparent (thus, gray here).\nIt's hard to understand whether the soft mask is conceptually \"on top\" of the image (thus, making the colors dull by interposing a sort of \"veil\") or related to the image transparency, thus between the image and the media ?", "id": 120621, "time": "2008-09-15T08:35:59Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-15T08:35:59Z", "is_private": false}, {"count": 5, "tags": [], "creator": "jean-francois@elfouly.nom.fr", "is_private": false, "text": "Created attachment 22573\nThe Java source that generated the test image\n\nThis is a fully stripped-down version of the custom cockpit-screenshots generator/editor that is used by our customer. Creates the test image in pretty much the same technical context as the \"real\" ones.", "id": 120622, "time": "2008-09-15T08:50:34Z", "bug_id": 45809, "creation_time": "2008-09-15T08:50:34Z", "attachment_id": 22573}, {"attachment_id": null, "tags": [], "creator": "jeremias@apache.org", "text": "For reference: http://markmail.org/message/ykcb7re4bm4xyufs\nThe thread contains some initial analysis of the problem but no solution, yet.", "count": 6, "id": 120623, "time": "2008-09-15T08:51:46Z", "bug_id": 45809, "creation_time": "2008-09-15T08:51:46Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 45809, "attachment_id": 22574, "text": "Created attachment 22574\nImage dump in the PDF\n\nExactly what you would expect when reading the java code that generated the image.", "id": 120624, "time": "2008-09-15T08:52:56Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-15T08:52:56Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 45809, "attachment_id": 22575, "text": "Created attachment 22575\nSoft mask dump from the PDF\n\nSays in a rather straight manner that the thrid pixel is transparent and the rest is opaque; which is also what one would expect when reading the java source or looking at the PNG file at the bit level.", "id": 120625, "time": "2008-09-15T08:54:21Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-15T08:54:21Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 45809, "text": "Created attachment 22587\nTest case with changing background\n\nReading the chapter 7 (Transparency) of PDF 1.4 specification, I understood transparency is much about blending. So I tried the render with different color backgrounds but there seems to be no influence...", "id": 120650, "time": "2008-09-16T00:42:28Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-16T00:42:28Z", "is_private": false, "attachment_id": 22587}, {"count": 10, "tags": [], "bug_id": 45809, "text": "Created attachment 22588\nPDF render with different backgrounds.", "id": 120651, "time": "2008-09-16T00:43:01Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-16T00:43:01Z", "is_private": false, "attachment_id": 22588}, {"count": 11, "tags": [], "bug_id": 45809, "text": "\nAlso discussed previously (by the same):\nhttp://markmail.org/message/gjrau3dfjmyfhne4", "id": 120652, "time": "2008-09-16T00:48:01Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-09-16T00:48:01Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "creator": "jean-francois@elfouly.nom.fr", "is_private": false, "text": "Playing with the AIS (Alpha Is Shape) parameter in the Graphics state does not fix the problem.", "id": 121451, "time": "2008-10-12T16:26:09Z", "bug_id": 45809, "creation_time": "2008-10-12T16:26:09Z", "attachment_id": null}, {"count": 13, "tags": [], "creator": "jean-francois@elfouly.nom.fr", "is_private": false, "text": "Created attachment 22715\nSame test case, FOP patched to add /AIS false", "id": 121452, "time": "2008-10-12T16:27:19Z", "bug_id": 45809, "creation_time": "2008-10-12T16:27:19Z", "attachment_id": 22715}, {"count": 14, "tags": [], "bug_id": 45809, "attachment_id": 22716, "text": "Created attachment 22716\nSame test case, FOP patched to add /AIS true", "id": 121453, "time": "2008-10-12T16:27:56Z", "creator": "jean-francois@elfouly.nom.fr", "creation_time": "2008-10-12T16:27:56Z", "is_private": false}, {"count": 15, "tags": [], "bug_id": 45809, "text": "The dull colors are visible in Adobe Reader but not in Evince! Could the issue be with the viewer?", "id": 154559, "time": "2012-03-06T09:43:46Z", "creator": "lmpmbernardo@gmail.com", "creation_time": "2012-03-06T09:43:46Z", "is_private": false, "attachment_id": null}, {"count": 16, "tags": [], "bug_id": 45809, "attachment_id": null, "text": "resetting P2 open bugs to P3 pending further review", "id": 157328, "time": "2012-04-07T01:41:30Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:41:30Z", "is_private": false}]