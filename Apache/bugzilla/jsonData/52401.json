[{"count": 0, "tags": [], "creator": "aiwilson79@gmail.com", "attachment_id": null, "is_private": false, "id": 152478, "time": "2011-12-30T18:57:49Z", "bug_id": 52401, "creation_time": "2011-12-30T18:57:49Z", "text": "No logs are written whenever the appender's threshold property is set.  Below is the configuration.  Note, the JBOSS appender is used for the root logger via the ASYNC appender.  The FILE appender is the main application log file appender that does *NOT* have a threshold set.  The TOPIC_APPENDER is a JMSAppender that has it's threshold set to ERROR.  The FILE and TOPIC_APPENDER are referenced via the APP-ASYNC appender.  This configuration prints nothing to any logs or topic.  If I comment out the threshold on the TOPIC_APPENDER it will log to all appenders.  I even tried a RollingFileAppender instead of the JMSAppender and the same issue occurs if the threshold is set.\n\n<appender name=\"JBOSS\" class=\"org.jboss.logging.appender.DailyRollingFileAppender\">\n            <errorHandler class=\"org.jboss.logging.util.OnlyOnceErrorHandler\" />\n            <param name=\"File\" value=\"${jboss.server.log.dir}/server.log\" />\n            <param name=\"Append\" value=\"true\" />\n\n            <!-- Rollover at midnight each day -->\n            <param name=\"DatePattern\" value=\"'.'yyyy-MM-dd\" />\n\n            <layout class=\"org.apache.log4j.PatternLayout\">\n                    <!--\n                            The default pattern: Date Priority [Category] Message\\n\n                            <param name=\"ConversionPattern\" value=\"%d %-5p [%c] %m%n\"/>\n                    -->\n\n                    <!--\n                            The full pattern: Date MS Priority [Category] (Thread:MDC) Message\\n\n                    -->\n                    <param name=\"ConversionPattern\" value=\"%d %-5r %-5p [%c] (%t:%X{TXID}) %m%n\" />\n            </layout>\n    </appender>\n\n    <appender name=\"FILE\" class=\"org.jboss.logging.appender.DailyRollingFileAppender\">\n            <errorHandler class=\"org.jboss.logging.util.OnlyOnceErrorHandler\" />\n            <param name=\"File\" value=\"${jboss.server.log.dir}/app.log\" />\n            <param name=\"Append\" value=\"true\" />\n            <param name=\"Threshold\" value=\"DEBUG\" />\n            <!-- Rollover at midnight each day -->\n            <param name=\"DatePattern\" value=\"'.'yyyy-MM-dd\" />\n\n            <layout class=\"org.apache.log4j.PatternLayout\">\n                    <!--\n                            The default pattern: Date Priority [Category] Message\\n\n                            <param name=\"ConversionPattern\" value=\"%d %-5p [%c] %m%n\"/>\n                    -->\n\n                    <!--\n                            The full pattern: Date MS Priority [Category] (Thread:MDC) Message\\n\n                    -->\n                    <param name=\"ConversionPattern\" value=\"%d %-5r %-5p [%c] (%t:%X{TXID}) %m%n\" />\n            </layout>\n    </appender>\n\n\n\n    <appender name=\"TOPIC_APPENDER\" class=\"org.apache.log4j.net.JMSAppender\">\n            <errorHandler class=\"org.jboss.logging.util.OnlyOnceErrorHandler\" />\n            <param name=\"Threshold\" value=\"ERROR\">\n            <param name=\"ProviderURL\" value=\"jnp://SERVERX:1099/\" />\n            <param name=\"InitialContextFactoryName\" value=\"org.jnp.interfaces.NamingContextFactory\" />\n            <param name=\"URLPkgPrefixes\" value=\"org.jboss.naming:org.jnp.interfaces\" />\n            <param name=\"TopicConnectionFactoryBindingName\" value=\"ClusteredConnectionFactory\"/>\n            <param name=\"TopicBindingName\" value=\"errorLogTopic\"/>\n    </appender>\n\n    <!-- Buffer events and log them asynchronously -->\n\n    <appender name=\"ASYNC\" class=\"org.apache.log4j.AsyncAppender\">\n            <errorHandler class=\"org.jboss.logging.util.OnlyOnceErrorHandler\" />\n            <appender-ref ref=\"JBOSS\" />\n    </appender>\n\n    <appender name=\"APP-ASYNC\" class=\"org.apache.log4j.AsyncAppender\">\n            <errorHandler class=\"org.jboss.logging.util.OnlyOnceErrorHandler\" />\n            <appender-ref ref=\"FILE\" />\n            <appender-ref ref=\"TOPIC_APPENDER\" />\n    </appender>\n\n\n\n    <!-- ================ -->\n    <!-- Limit categories -->\n    <!-- ================ -->\n\n     <!--\n            This is the top of the logging configuration. APP events will not go\n            to the JBoss logger.\n    -->\n\n    <category name=\"com.app.pkg\" additivity=\"false\">\n            <priority value=\"DEBUG\" />\n            <appender-ref ref=\"APP-ASYNC\" />\n    </category>\n\n    <root>\n            <priority value=\"INFO\" />\n            <appender-ref ref=\"ASYNC\" />\n    </root>"}]