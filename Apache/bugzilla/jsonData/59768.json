[{"count": 0, "tags": [], "creator": "tim.kieritz@cai-world.com", "text": "Created attachment 33994\nStacktrace of the problem\n\nWhen calling org.apache.catalina.core.ApplicationHttpRequest.getParameter in two different threads at the same time then the following exception accurs:\njava.lang.IllegalStateException: No modifications are allowed to a locked ParameterMap\n        at org.apache.catalina.util.ParameterMap.put(ParameterMap.java:164)\n        at java.util.HashMap.putAll(HashMap.java:643)\n        at org.apache.catalina.util.ParameterMap.putAll(ParameterMap.java:186)\n        at org.apache.catalina.core.ApplicationHttpRequest.parseParameters(ApplicationHttpRequest.java:739)\n        at org.apache.catalina.core.ApplicationHttpRequest.getParameter(ApplicationHttpRequest.java:376)\n(Full stack trace in attachment)\n\nReason is that parseParameters() is called in parallel.\n\nI looked at the javadoc of javax.servlet.ServletRequest and javax.servlet.ServletRequestWrapper and didn't see any mentioning that the access to this objects should be sequential. \n\nI could not find the javadoc for org.apache.catalina.core.ApplicationHttpRequest. But I think that is because it is an internal class.\n\nEither the parallel access to the ServletRequest should be possible or the classes should be better documented.\n\nOracle Java version:\njava version \"1.7.0_80\"\nJava(TM) SE Runtime Environment (build 1.7.0_80-b15)\nJava HotSpot(TM) 64-Bit Server VM (build 24.80-b11, mixed mode)\n\nThe tomcat runs behind a Apache2 with mod_proxy connector.", "id": 191997, "attachment_id": 33994, "bug_id": 59768, "creation_time": "2016-06-28T10:09:57Z", "time": "2016-06-28T10:09:57Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Please see section 2.3.3.4 of the Servlet 3.0 specification.", "id": 191998, "time": "2016-06-28T10:31:12Z", "bug_id": 59768, "creation_time": "2016-06-28T10:31:12Z", "is_private": false}]