[{"count": 0, "tags": [], "creator": "kfujino@apache.org", "text": "In BackupManager#startInternal,\nWhen constructor of LazyReplicatedMap throws exception, \nsessions is not LazyReplicatedMap.\nActually, AbstractReplicatedMap#init has the possibility of throwing RuntimeException. \n\nIn BackupManager#stopInternal ClassCastException is thrown \nbecause AbstractReplicatedMap#breakdown is executed regardless of the type of sessions. \n\nshould be changed as follows to avoid ClassCastException. \n===\nskip.\nif (sessions instanceof LazyReplicatedMap) {\n    LazyReplicatedMap map = (LazyReplicatedMap)sessions;\n    if ( map!=null ) {\n        map.breakdown();\n    }\n}\nskip.\n===\n\nThis problem exists in Tomcat7.0 and 6.0.\n\nBest Regards.", "id": 136235, "time": "2010-04-19T05:02:32Z", "bug_id": 49151, "creation_time": "2010-04-19T05:02:32Z", "is_private": false, "attachment_id": null}, {"count": 1, "text": "Fixed in trunk and proposed for 6.0.x.", "bug_id": 49151, "is_private": false, "id": 136238, "time": "2010-04-19T06:29:11Z", "creator": "kfujino@apache.org", "creation_time": "2010-04-19T06:29:11Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 136279, "time": "2010-04-20T15:46:04Z", "bug_id": 49151, "creation_time": "2010-04-20T15:46:04Z", "is_private": false, "text": "Moving to 6 since this is fixed in trunk"}, {"count": 3, "tags": [], "bug_id": 49151, "attachment_id": null, "text": "This fix applied to 6.0, will be in 6.0.27 onwards.", "id": 136308, "time": "2010-04-22T04:49:49Z", "creator": "kfujino@apache.org", "creation_time": "2010-04-22T04:49:49Z", "is_private": false}]