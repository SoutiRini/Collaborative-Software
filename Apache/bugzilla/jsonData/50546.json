[{"count": 0, "tags": [], "bug_id": 50546, "text": "My folder structure:\n\n    - nameoftherootfolder\n    -- app\n    -- public\n    --- .htaccess\n    --- index.php\n\nNow I have the problem that in some cases my apache rewrites too often internal that I get an 500 server error, here the log:\n\n    [Wed Jan 05 17:51:54 2011] [error] [client 127.0.0.1] Request exceeded the limit of 3 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace.\n    [Wed Jan 05 17:51:54 2011] [debug] core.c(3046): [client 127.0.0.1] r->uri = /nameoftherootfolder/public/index.php\n    [Wed Jan 05 17:51:54 2011] [debug] core.c(3052): [client 127.0.0.1] redirected from r->uri = /nameoftherootfolder/public/index.php\n    [Wed Jan 05 17:51:54 2011] [debug] core.c(3052): [client 127.0.0.1] redirected from r->uri = /nameoftherootfolder/public/index.php\n    [Wed Jan 05 17:51:54 2011] [debug] core.c(3052): [client 127.0.0.1] redirected from r->uri = /nameoftherootfolder/nothere/\n\nMy .htaccess:\n\n    RewriteEngine On\n    RewriteCond %{REQUEST_FILENAME} -s [OR]\n    RewriteCond %{REQUEST_FILENAME} -l [OR]\n    RewriteCond %{REQUEST_FILENAME} -d\n    RewriteRule ^.*$ - [NC,L]\n    RewriteRule ^.*$ index.php [NC,L]\n\nI tried also this .htaccess:\n\n    RewriteEngine On\n    RewriteCond %{REQUEST_FILENAME} !-s\n    RewriteCond %{REQUEST_FILENAME} !-l \n    RewriteCond %{REQUEST_FILENAME} !-d\n    RewriteCond %{REQUEST_URI} !^/index\\.php$\n    RewriteRule ^.*$ index.php [NC,L]\n\n\nThe index.php handles all requests and handle also if the accessed url is wrong, e.g. not exists.\n\nIt works if the accessed url exists but it the url is \"wrong\" I get that error.\nI get this just since I set an Apache alias:\n\n    Alias /nameoftherootfolder/ \"C:/somepathshere/WAMP/www/nameoftherootfolder/public/\" \n\n    <Directory \"C:/somepathshere/WAMP/www/nameoftherootfolder/public/\">\n        Options Indexes FollowSymLinks MultiViews\n        AllowOverride all\n            Order allow,deny\n        Allow from all\n    </Directory>\n\nThere are now internal redirects with Apache till it returns the 500 error.\nI'm using Apache 2.2.17.\n\nNote:\nIf I put a `index.php/` inside the uri it works, but that is SEO unfriendly, user unfriendly and looks horrible, e.g. request.\n`http://localhost/nameoftherootfolder/index.php/nothere/` or `http://localhost/nameoftherootfolder/index.php/index/`", "id": 143106, "time": "2011-01-05T16:00:27Z", "creator": "david@mailinator.com", "creation_time": "2011-01-05T16:00:27Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 50546, "is_private": false, "text": "Please add RewriteBase /nameoftherootfolder/ and generate/attach a RewriteLog with RewriteLogLevel 9 as well as the verbatim htaccess you used.\n\nYour config presumably should stop rewriting since index.php should pass the RewriteCond -s test.\n\nAnd a question:\n\n\"The index.php handles all requests and handle also if the accessed url is\nwrong, e.g. not exists.\"\n\nHow does it handle other files that exist?  Doesn't seem to be reflected in these rules and could cause your looping.", "id": 143108, "time": "2011-01-05T18:09:52Z", "creator": "covener@gmail.com", "creation_time": "2011-01-05T18:09:52Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 50546, "attachment_id": null, "is_private": false, "id": 143109, "time": "2011-01-05T18:54:18Z", "creator": "david@mailinator.com", "creation_time": "2011-01-05T18:54:18Z", "text": "After I added the RewriteBase it works :)!"}]