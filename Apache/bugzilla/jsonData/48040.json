[{"count": 0, "tags": [], "creator": "globulenann@free.fr", "text": "Let's say you have the following task snippet:\n\n \t<target name=\"testsshexec\">\n\t\t<sshexec host=\"unixbox\"\n\t\t\t\t command=\"echo &quot;test&quot;\"\n\t\t\t\t trust=\"yes\"\n\t\t\t\t username=\"user\"\n\t\t\t\t password=\"user\n\t\t\t\t outputproperty=\"outprop\"\n\t\t\t\t />\n \t\t<echo message=\"Output from sshexec : ${outprop}\"/>\n \t</target>\n\nWhen executing this with Ant 1.7.0, the outputproperty \"outprop\" was getting filled in with the output of the command, the string \"test\" for say in this example.\n\nNow with Ant 1.7.1, the same code makes the outputproperty \"outprop\" getting filled in with the string \"echo \"test\"  : test\", where the sshexec task is repeating the command given to the \"command\" attribute.\n\nThis is a regression as the outputproperty cannot be used directly within the ant build file as it contains unwanted stuff rather than just the output of the command.\n\nI identified that the regression happened between revisions 577765 and 581576 with the correction of \"open session once for a command resource not each command\".\n\nThanks for looking into it.\n\nThe correction looks very simple, one just need to remove the code at line 194 of SSHExec.java. (I'm looking at latest SVN SSHExec.java rev. 772543).", "id": 131309, "time": "2009-10-22T09:10:21Z", "bug_id": 48040, "creation_time": "2009-10-22T09:10:21Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 131352, "time": "2009-10-23T23:25:39Z", "bug_id": 48040, "creation_time": "2009-10-23T23:25:39Z", "is_private": false, "text": "There are more statements in lines 203 and 205 one could argue should be removed, but this is becoming a backwards compatible with 1.7.0 vs 1.7.1 problem quickly.\n\nI've decided to keep the code for the commandResource case as is and only modify the command attribute case (as you suggest) to reinstate backwards compatibility with Ant 1.6.x and 1.7.0 here.  The commandResource didn't exist prior to Ant 1.7.1 so I decided to keep its behavior.\n\nsvn revision 829311"}]