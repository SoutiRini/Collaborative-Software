[{"count": 0, "tags": [], "creator": "support@inmarket.lviv.ua", "text": "There is a little problem with Apache not understanding ETag responce header \nfrom PHP script. Specifically, if there comes a request with \"If-None-Match\" \nand the script responces with \"Etag\" that matches it, the server still responds \nwith \"200 OK\" status. When checked with static content, Apache has no problem \nresponding with \"304 Not Modified\". \nI notices this misbehavior while testing Apache for script-generated responces \nwith \"Last-Modified\", and Apache again perfectly responds with \"304 Not \nModified\". \nAs I figured out from rfc2616, the server ought to respond \"304 Not Modified\" \nif the ETag of\nrequested resource matches \"If-None-Match\" request header even if there are no \ntime-related headers. Apache does follow this guideline for static content and \nmisbehaves with PHP script.\nCould you please inform me whether this is designed behavior or this is a bug \nso it will be fixed soon. I searched thru docs and maillists, but found nothing \nrelated to this.\nMy Apache is win32 1/3/28\n\nTo give you the clear picture with php script:\n\nRequest:\nGET /temp/etag.php HTTP/1.1\n...\nIf-None-Match: \"0-1234-12345678\"\n...\n\nResponce:\nHTTP/1.1 200 OK  -- should be 304 as for static content is\n...\nETag: \"0-1234-12345678\"\n...\n\nWhereas using time-related headers, Apache behaves as expected:\n\nRequest:\nGET /temp/etag.php HTTP/1.1\n...\nIf-Modified-Since: Thu, 31 Jul 2003 19:12:11 GMT\n...\n\nResponce:\nHTTP/1.1 304 Not Modified  -- as expected\n...\nLast-Modified: Thu, 31 Jul 2003 19:12:11 GMT\n...\n\nAlso note that combining two kinds of headers is also useless:\n\nRequest:\nGET /temp/etag.php HTTP/1.1\n...\nIf-None-Match: \"0-1234-12345678\"\nIf-Modified-Since: Thu, 31 Jul 2003 19:12:11 GMT\n...\n\nResponce:\nHTTP/1.1 200 OK  -- Note this happens despite Last-Modified!\n...\nETag: \"0-1234-12345678\"\nLast-Modified: Thu, 31 Jul 2003 19:12:11 GMT\n...\n\nRegards,\nDennis", "id": 43064, "time": "2003-08-20T22:31:19Z", "bug_id": 22606, "creation_time": "2003-08-20T22:31:19Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "id": 43067, "time": "2003-08-20T23:54:17Z", "bug_id": 22606, "creation_time": "2003-08-20T23:54:17Z", "is_private": false, "text": "This is a php bug. The handler (read: PHP) is responsible for calling\nap_meets_conditions at the proper place (i.e. before sending the content) or\ndoing the evaluation that takes place there itself.\n\nPlease address this issue to the php bug database.\n\nThanks for using Apache."}]