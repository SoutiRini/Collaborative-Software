[{"count": 0, "tags": [], "bug_id": 41523, "attachment_id": null, "is_private": false, "id": 98892, "time": "2007-02-01T21:19:35Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2007-02-01T21:19:35Z", "text": "Hello!\n\nThe patch I'm about to attach allows to build websh with gcc's strict `-Wall\n-Werror' cleanly on FreeBSD/amd64. In addition to removing unused variables, the\npatch also removes some redundant initializations-at-declaration and quiets down\na few pointer-to-int-conversion warnings.\n\nCompiling with `-Wall -Werror' is a good way of catching bugs quickly. Even\nthough the patch does not fix any real bugs, it will allow to use the strict\ncompiler flags in the future aiding development."}, {"count": 1, "tags": [], "bug_id": 41523, "attachment_id": 19496, "is_private": false, "id": 98893, "time": "2007-02-01T21:21:05Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2007-02-01T21:21:05Z", "text": "Created attachment 19496\nAllow compiles with `-Wall -Werror'"}, {"count": 2, "tags": [], "text": "Most fixes are OK, but I'll have to look at some details.\nE.g. your patch doesn't compile under Windows:\nfilelock.c\n../generic\\filelock.c(29) : error C2065: 'intptr_t' : undeclared identifier\n\nAnd I don't agree with all removals of redundant initializations because some\ninitializations are within #ifdef pragmas and I want to be sure that the\nvariables are always initialized...", "is_private": false, "bug_id": 41523, "id": 99165, "time": "2007-02-09T03:01:13Z", "creator": "ronnie.brunner@netcetera.ch", "creation_time": "2007-02-09T03:01:13Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "ronnie.brunner@netcetera.ch", "attachment_id": null, "text": "I checked your patch and agree with most changes. However, there are some\ninitializations, I want to keep (e.g. where instead of a direct assignment only\nthe address of the variable is passed to a function and the value should be\ninitialized in that function. I know, the contract should then indicate that the\nvariable is always set, but I rather be safe than sorry ;-)\n\nI also removed the additional type cast you used in src/generic/filelock.c:\n\n filedes = (int)(intptr_t)handle;\n\nand changed it back to \n\n filedes = (int)handle;\n\nbecause it doesn't compile under Windows.\n\nI'm ready to commit the changes and I'd like to give you proper credit. Let me\nknow if you want your email included and maybe you have a full name too ;-)\nThanks for your patch.", "id": 99185, "time": "2007-02-09T08:41:06Z", "bug_id": 41523, "creation_time": "2007-02-09T08:41:06Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 41523, "is_private": false, "text": "Yes, you can use my e-mail address -- it's been around for 12 years or so and is\nalready a target of hundreds of spams per day.\n\nAs far as the intptr_t, maybe, you can find something, that would still compile\non Windows? Maybe, implicit #include of <sys/types.h> or <stdint.h>?\n\nWithout the intermediate cast, compilers (such as gcc) complain on systems,\nwhere int and void* are of different width (such as my FreeBSD/amd64), because\nthey are afraid, the cast will lose bits. They don't realize, that in this case\nthe \"pointer\" is storing an int (a file descriptor) to begin with...\n\nThanks for the response. I'm finishing up a FreeBSD port of websh and will have\nsome more comments for you later :-)", "id": 99202, "time": "2007-02-09T14:43:58Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2007-02-09T14:43:58Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 41523, "is_private": false, "text": "Changes committed to HEAD incl a workaround for the missing intptr_t in Win32", "id": 99273, "time": "2007-02-12T06:06:56Z", "creator": "ronnie.brunner@netcetera.ch", "creation_time": "2007-02-12T06:06:56Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 41523, "text": "Created attachment 25057\nResolve two new warnings\n\nI'm attaching a new patch, that's required for the warning-free build...\n\nIt is much smaller than before :) and addresses two issues, both in request_ap.c:\n\n 1. isspace() requires inclusion of <ctype.h>\n 2. A variable is declared, but not used in one of the functions.", "id": 134878, "time": "2010-02-25T03:35:40Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2010-02-25T03:35:40Z", "is_private": false, "attachment_id": 25057}, {"count": 7, "tags": [], "creator": "mi+apache@aldan.algebra.com", "text": "Created attachment 25058\nResolve three new warnings\n\nAn uninitialized variable caught by compiling with optimization on.", "id": 134880, "time": "2010-02-25T03:58:14Z", "bug_id": 41523, "creation_time": "2010-02-25T03:58:14Z", "is_private": false, "attachment_id": 25058}, {"count": 8, "tags": [], "bug_id": 41523, "is_private": false, "text": "Thanks for the patch. I'm running the test suite over it (3 OS times 3 versions of Apache times 3 versions of Tcl...)\n\nI disagree on the TCL_ERROR default for res in logutl.c line 89. imo this should default to TCL_OK, as there should not be an error returned if there is no destination to send the log to.\n\nDo you agree on changing it to TCL_OK?", "id": 134883, "time": "2010-02-25T08:47:54Z", "creator": "ronnie.brunner@netcetera.ch", "creation_time": "2010-02-25T08:47:54Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "mi+apache@aldan.algebra.com", "is_private": false, "count": 9, "id": 134888, "time": "2010-02-25T15:37:04Z", "bug_id": 41523, "creation_time": "2010-02-25T15:37:04Z", "text": "(In reply to comment #8)\n> Do you agree on changing it to TCL_OK?\n\nI don't even have an opinion... I didn't read the code too deeply -- my approach, when seeing the \"possibly uninitialized\" warnings is to initialize to something BAD. That way, the error, if any, is more likely to transpire in testing.\n\nSo, change it to whatever you think is appropriate -- I'm glad, the '-Wall' dragnet picked-up something real for once :-)"}, {"count": 10, "tags": [], "bug_id": 41523, "text": "Committed fixes according to patch except for initialization value of ret in logImpl, which is now set to TCL_OK.\n\nThanx for submitting the patch.", "id": 134893, "time": "2010-02-25T17:21:40Z", "creator": "ronnie.brunner@netcetera.ch", "creation_time": "2010-02-25T17:21:40Z", "is_private": false, "attachment_id": null}]