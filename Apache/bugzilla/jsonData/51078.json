[{"count": 0, "tags": [], "creator": "thangaraj@gmail.com", "attachment_id": 26897, "text": "Created attachment 26897\nPatch to fix mod_fcgid spwaned CGI process orphaning when Apache is restarted/killed\n\nProblem:\nmod_fcgid created CGI processes get orphaned during Apache shutdown or abrupt child process termination. \n\nReproduction steps:\nAllow Apache Child process to spwan few CGI process via mod_fcgid. Kill the Apache child process.\n\nRoot Cause:\nApache when run as windows service during shutdown/restart of service process (master/parent) will terminate child httpd process within 30 seconds (refer \\server\\mpm\\winnt\\mpm_winnt.c:master_main()  int timeout = 30000), therefore if Apache worker threads are too busy to react to Master's graceful exit signal within 30 seconds - mod_fcgid cleanup routines will not get invoked (refer \\server\\mpm\\winnt\\child.c: child_main() apr_pool_destroy(pchild); ) thereby orphaning all mod_fcgid spwaned CGI processes. \n  \nSolution (implemented in patch):\nUtilize Win32 JobObjects to clean up child processes automatically so that CGI processes are gauranteed to get killed during abnormal mod_fcgid/Apache termination. Created a new Fcgid configuration option called FcgidWin32PreventOrphans.", "id": 145841, "time": "2011-04-18T19:36:29Z", "bug_id": 51078, "creation_time": "2011-04-18T19:36:29Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 51078, "text": "Attention to Bug report 50309, patch there addresses same issue.", "id": 148651, "time": "2011-08-16T19:38:37Z", "creator": "info@apachelounge.com", "creation_time": "2011-08-16T19:38:37Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 51078, "attachment_id": null, "id": 176697, "time": "2014-07-26T17:07:50Z", "creator": "JBlond@gmail.com", "creation_time": "2014-07-26T17:07:50Z", "is_private": false, "text": "isn't that issues fixed with https://issues.apache.org/bugzilla/show_bug.cgi?id=50309 ?"}]