[{"attachment_id": null, "tags": [], "creator": "mnemo@minimum.se", "text": "Hi,\n\nAt runtime my program is stored like this:\n\n./myprogram.jar\n./lib/commons/commons-net.jar\n./lib/commons/commons-configuration.jar\n./lib/spring/spring_jar1.jar\n./lib/spring/spring_jar2.jar\n./lib/some/other/jarfile.jar\n\nAnd I would like my ANT script to create this .jar file plus manifest \nautomatically. I tried this target:\n\n<target name=\"dist\" depends=\"compile\">\n   <mkdir dir=\"${build.dist.dir}/lib\"/>\n   <copy todir=\"${build.dist.dir}/lib\">\n      <fileset dir=\"${lib.runtime.dir}\" includes=\"**/*.jar\"/>\n   </copy>\n   <path id=\"manifest.classpath.path\">\n      <fileset dir=\"${build.dist.dir}\" includes=\"lib/**/*.jar\"/>\n   </path>\n   <pathconvert property=\"manifest.classpath.prop\" pathsep=\" \">\n      <path refid=\"manifest.classpath.path\"/>\n   </pathconvert>\n   <property name=\"manifest.classpath.prop\" refid=\"manifest.classpath.path\"/>\n   <jar destfile=\"${build.dist.dir}/${dist.jar.filename}\">\n      <fileset dir=\"${build.classes.dir}\" includes=\"**/*.class\"/>\n      <manifest>\n         <attribute name=\"Built-By\" value=\"${user.name}\"/>\n         <attribute name=\"Main-Class\" value=\"${project.main.class}\"/>\n         <attribute name=\"Class-Path\" value=\"${manifest.classpath.prop}\"/>\n      </manifest>\n   </jar>\n</target>\n\n\nHowever, this target only writes absolute paths which is not allowed or \npractical in the manifest Class-Path. I would like to be able to convert \nabsolute paths into relative ones (conversion with respect to some given \nbasedir). I looked at the pathconvert task and at a bunch of mappers but none \nof them seem to do what I need.", "count": 0, "id": 77180, "time": "2005-07-11T13:19:15Z", "bug_id": 35685, "creation_time": "2005-07-11T13:19:15Z", "is_private": false}, {"count": 1, "tags": [], "creator": "carej@us.ibm.com", "text": "You should be able to couple what you already have with the <propertyregex> task\nfrom AntContrib\n(http://ant-contrib.sourceforge.net/tasks/tasks/propertyregex.html) to do what\nyou want.", "id": 77182, "time": "2005-07-11T14:46:33Z", "bug_id": 35685, "creation_time": "2005-07-11T14:46:33Z", "is_private": false, "attachment_id": null}]