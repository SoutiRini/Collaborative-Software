[{"count": 0, "tags": [], "text": "For deployment environments where the pooled data source configuration is either complex, controlled, or both, it would be helpful to allow externalization of the data source credentials.  For example, it would be straightforward to reference a properties file containing credentials.  This would allow the context definition containing the pooled data source configuration to be invariant with respect to environment, which would simplify migration of the data source between hosts or tiers.", "attachment_id": null, "bug_id": 53283, "id": 159266, "time": "2012-05-23T21:18:42Z", "creator": "marvin.addison@gmail.com", "creation_time": "2012-05-23T21:18:42Z", "is_private": false}, {"count": 1, "tags": [], "text": "This is already supported. Ask on the users list if you need help with configuration.", "is_private": false, "id": 159267, "creator": "markt@apache.org", "time": "2012-05-23T21:20:28Z", "bug_id": 53283, "creation_time": "2012-05-23T21:20:28Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Created attachment 28828\nPatch for externalized credentials in properties file.\n\nAttached patch for this feature made against jdbc-pool-1.2-SNAPSHOT.  I've tested this against tomcat-7.0.27 and works as expected.", "is_private": false, "id": 159271, "creator": "marvin.addison@gmail.com", "time": "2012-05-23T21:25:20Z", "bug_id": 53283, "creation_time": "2012-05-23T21:25:20Z", "attachment_id": 28828}, {"count": 3, "tags": [], "text": "I'm embarrassed if that's supported and I missed it.  I took the time for a thoughtful code review of jdbc-pool and didn't see what I was looking for, so wrote a simple patch.  If it's not too much trouble, I wonder if you'd quickly review the patch to see if similar functionality is supported.  If so I'll follow up on list.", "is_private": false, "id": 159273, "creator": "marvin.addison@gmail.com", "time": "2012-05-23T21:27:40Z", "bug_id": 53283, "creation_time": "2012-05-23T21:27:40Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 53283, "attachment_id": null, "is_private": false, "id": 159275, "time": "2012-05-23T21:33:35Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2012-05-23T21:33:35Z", "text": "http://wiki.apache.org/tomcat/FAQ/Password"}, {"count": 5, "tags": [], "bug_id": 53283, "attachment_id": null, "id": 159276, "time": "2012-05-23T21:37:23Z", "creator": "markt@apache.org", "creation_time": "2012-05-23T21:37:23Z", "is_private": false, "text": "http://tomcat.apache.org/tomcat-7.0-doc/config/index.html\n\nSecond paragraph. Lots of ways to set the property values for replacement."}, {"count": 6, "tags": [], "bug_id": 53283, "attachment_id": null, "id": 159277, "time": "2012-05-23T21:49:20Z", "creator": "marvin.addison@gmail.com", "creation_time": "2012-05-23T21:49:20Z", "is_private": false, "text": "Actually, it was leveraging the system property replacement feature in the docs you cited that led to this enhancement request.  We were setting system properties in setenv.sh, but then discovered that had the very undesirable consequence of leaking sensitive data to anyone on the system via ps output.  While I could have engineered a valve or something to set system properties more discretely, storing credentials in a global, long-term facility seemed less desirable than a more targeted solution.\n\nThe patch here is about 20 lines and adds reasonable value.  I hope you'll consider it.  I'm happy to respond to feedback on the patch if that will increase the likelihood of acceptance."}, {"count": 7, "tags": [], "bug_id": 53283, "attachment_id": null, "id": 160277, "time": "2012-06-26T20:37:01Z", "creator": "fhanik@apache.org", "creation_time": "2012-06-26T20:37:01Z", "is_private": false, "text": "No need for the patch, if you implement an object that has the interface:\norg.apache.tomcat.util.IntrospectionUtils.PropertySource\nand set the PROPERTY_SOURCE system variable as described in\nhttp://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html\n\nthen your object can read the property file itself."}]