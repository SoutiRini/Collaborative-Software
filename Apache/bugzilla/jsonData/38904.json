[{"count": 0, "tags": [], "bug_id": 38904, "attachment_id": null, "text": "Hi,\n \nTomcat throws exceptions when the AutoDeploy/redeploy is true and the webapp\ncontext the reloader attribute is set to true. There are no changes to the \ntimestamp of the files that are used in the WEB-INF\\lib, WEB-INF\\classes. We In\nour lab-env. we were able to find this in the logs. \n\n2006-03-08 22:44:49 - LogEvents: preServletDestroy DEFAULT:/website ServletH\nWT(SW (null CN=com.avaya.icm.servlet.WT))\n2006-03-08 22:44:49 - LogEvents: postServletDestroy DEFAULT:/website ServletH\nWT(SW (null CN=com.avaya.icm.servlet.WT))\n2006-03-08 22:44:49 - LogEvents: preServletDestroy DEFAULT:/website ServletH\nTS(SW (null CN=com.avaya.icm.tunn.TS))\n2006-03-08 22:44:49 - LogEvents: postServletDestroy DEFAULT:/website ServletH\nTS(SW (null CN=com.avaya.icm.tunn.TS))\n2006-03-08 22:44:49 - LogEvents: preServletDestroy DEFAULT:/website ServletH\nCIRS(SW (null CN=com.avaya.icm.servlet.CIRS))\n2006-03-08 22:44:49 - LogEvents: postServletDestroy DEFAULT:/website ServletH\nCIRS(SW (null CN=com.avaya.icm.servlet.CIRS))\n2006-03-08 22:44:49 - LogEvents: preServletDestroy DEFAULT:/website ServletH\nInitServlet(SW (null CN=com.quintus.servlet.InitServlet))\n2006-03-08 22:44:49 - LogEvents: postServletDestroy DEFAULT:/website ServletH\nInitServlet(SW (null CN=com.quintus.servlet.InitServlet))\n2006-03-08 22:44:49 - LogEvents: preServletDestroy DEFAULT:/website ServletH\nTOMCAT/JSP/public/wru.jsp(SW (/public/wru.jsp CN=_public.wru_1))\n2006-03-08 22:44:49 - LogEvents: postServletDestroy DEFAULT:/website ServletH\nTOMCAT/JSP/public/wru.jsp(SW (/public/wru.jsp CN=_public.wru_1))\n2006-03-08 22:44:49 - LogEvents: preServletDestroy DEFAULT:/website ServletH\nTOMCAT/JSP/public/account.jsp(SW (/public/account.jsp CN=_public.account_1))\n2006-03-08 22:44:49 - LogEvents: postServletDestroy DEFAULT:/website ServletH\nTOMCAT/JSP/public/account.jsp(SW (/public/account.jsp CN=_public.account_1))\n2006-03-08 22:44:49 - LogEvents: preServletDestroy DEFAULT:/website ServletH\nTOMCAT/JSP/public/index.jsp(SW (/public/index.jsp CN=_public.index_1))\n2006-03-08 22:44:49 - LogEvents: postServletDestroy DEFAULT:/website ServletH\nTOMCAT/JSP/public/index.jsp(SW (/public/index.jsp CN=_public.index_1))\n2006-03-08 22:44:49 - LogEvents: preServletDestroy DEFAULT:/website ServletH\nTOMCAT/JSP/public/escalate.jsp(SW (/public/escalate.jsp CN=_public.escalate_1))\n2006-03-08 22:44:49 - LogEvents: postServletDestroy DEFAULT:/website ServletH\nTOMCAT/JSP/public/escalate.jsp(SW (/public/escalate.jsp CN=_public.escalate_1))\n2006-03-08 22:44:49 - AutoDeploy: Reloading true\n2006-03-08 22:44:49 - ReloadInterceptor: Reloading context DEFAULT:/website\n2006-03-08 22:44:49 - LogEvents: handleError R( /website + /public/index.jsp +\nnull) java.lang.ClassCastException: java.lang.String\n2006-03-08 22:44:49 - Ctx(/website) : Exception in R( /website +\n/public/index.jsp + null) - java.lang.ClassCastException: java.lang.String\n\tat\norg.apache.tomcat.modules.session.SimpleSessionStore.reload(SimpleSessionStore.java:124)\n\tat\norg.apache.tomcat.modules.mappers.ReloadInterceptor.contextMap(ReloadInterceptor.java:269)\n\tat org.apache.tomcat.core.ContextManager.processRequest(ContextManager.java:946)\n\tat org.apache.tomcat.core.ContextManager.internalService(ContextManager.java:875)\n\tat org.apache.tomcat.core.ContextManager.service(ContextManager.java:833)\n\tat\norg.apache.tomcat.modules.server.Ajp13Interceptor.processConnection(Ajp13Interceptor.java:341)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:494)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:516)\n\tat java.lang.Thread.run(Thread.java:479)\n\n2006-03-08 22:45:09 - LogEvents: preService R( /website + /public/error.jsp + null)\n2006-03-08 22:45:09 - LogEvents: postService R( /website + /public/error.jsp + null)\n\nOn our customer site though we found a different error in the\nwebsite-jvm-stderr.log. There it says \"Class not found\" and then returns 404 for\nall the requests \n \n2006-02-22 09:34:16 - Ctx(/website) : Class not found: cirs\n2006-02-22 09:34:16 - Ctx(/website) : Status code:404 request:R( /website +\n/servlet/cirs + null) msg:null\n\nThis happens failry regularly for all the servlets we have and there is no fixed\npattern for it.\n \n2006-02-24 07:31:48 - Ctx(/website) : Class not found: cirs\n2006-02-24 07:31:48 - Ctx(/website) : Status code:404 request:R( /website +\n/servlet/cirs + null) msg:null\n2006-02-24 07:31:48 - Ctx(/website) : Class not found: wt\n2006-02-24 07:31:48 - Ctx(/website) : Status code:404 request:R( /website +\n/servlet/wt + /callersu) msg:null\n\nWe are frustrated with these repeated failures.\n\nThanks,\n-Prashant.", "id": 86629, "time": "2006-03-09T05:26:18Z", "creator": "psaraf@avaya.com", "creation_time": "2006-03-09T05:26:18Z", "is_private": false}, {"count": 1, "tags": [], "creator": "william.barker@wilshire.com", "attachment_id": null, "id": 86742, "time": "2006-03-12T23:05:13Z", "bug_id": 38904, "creation_time": "2006-03-12T23:05:13Z", "is_private": false, "text": "This looks like one of the many reloading fixes since 3.3.1, and since I can't \nreproduce this.....\n\nIf you can't upgrade to 3.3.2, then I would suggest that you configure your \ncontext as non-reloadable (which is the preferred configuration for a \nproduction environment anyway :).\n\nIn conf/apps-website.xml you do:\n  <webapps>\n    <Context path=\"/website\" docBase=\"webapps/website\" reloadable=\"false\" />\n  </webapps>\n\nAlternatively, simply comment out the ReloadInterceptor in server.xml\n"}]