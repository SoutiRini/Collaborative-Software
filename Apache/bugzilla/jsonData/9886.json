[{"count": 0, "tags": [], "creator": "vpatryshev@borland.com", "attachment_id": null, "id": 17827, "time": "2002-06-14T22:04:35Z", "bug_id": 9886, "creation_time": "2002-06-14T22:04:35Z", "is_private": false, "text": "Running Ant on a machine with JDK 1.4, I am getting the following exception,\nobviously due to differences between SAX1 and SAX2:\n\n[c:\\metro1]\\tools\\metro1\\ant\\bin\\ant -debug\nAnt version 1.4 compiled on September 3 2001\nBuildfile: build.xml\nSetting project property: ant.java.version -> 1.4\nDetected Java version: 1.4 in: C:\\tools\\metro1\\java\\jre\nDetected OS: Windows XP\n +User task: tar     org.apache.tools.ant.taskdefs.Tar\n +User task: fail     org.apache.tools.ant.taskdefs.Exit\n +User task: uptodate     org.apache.tools.ant.taskdefs.UpToDate\n +User task: jpcoverage     org.apache.tools.ant.taskdefs.optional.sitraka.Cover\nage\n +User task: dependset     org.apache.tools.ant.taskdefs.DependSet\n +User task: vsscheckin     org.apache.tools.ant.taskdefs.optional.vss.MSVSSCHEC\nKIN\n +User task: java     org.apache.tools.ant.taskdefs.Java\n +User task: execon     org.apache.tools.ant.taskdefs.ExecuteOn\n +User task: echo     org.apache.tools.ant.taskdefs.Echo\n +User task: native2ascii     org.apache.tools.ant.taskdefs.optional.Native2Asci\ni\n +User task: jjtree     org.apache.tools.ant.taskdefs.optional.javacc.JJTree\n +User task: chmod     org.apache.tools.ant.taskdefs.Chmod\n +User task: javadoc2     org.apache.tools.ant.taskdefs.Javadoc\n +User task: deltree     org.apache.tools.ant.taskdefs.Deltree\n +User task: cvs     org.apache.tools.ant.taskdefs.Cvs\n +User task: ccmcreatetask     org.apache.tools.ant.taskdefs.optional.ccm.CCMCre\nateTask\n +User task: jlink     org.apache.tools.ant.taskdefs.optional.jlink.JlinkTask\n +User task: tstamp     org.apache.tools.ant.taskdefs.Tstamp\n +User task: icontract     org.apache.tools.ant.taskdefs.optional.IContract\n +User task: pathconvert     org.apache.tools.ant.taskdefs.PathConvert\n +User task: unjar     org.apache.tools.ant.taskdefs.Expand\n +User task: patch     org.apache.tools.ant.taskdefs.Patch\n +User task: sound     org.apache.tools.ant.taskdefs.optional.sound.SoundTask\n +User task: cccheckout     org.apache.tools.ant.taskdefs.optional.clearcase.CCC\nheckout\n +User task: mail     org.apache.tools.ant.taskdefs.SendEmail\n +User task: p4reopen     org.apache.tools.ant.taskdefs.optional.perforce.P4Reop\nen\n +User task: gzip     org.apache.tools.ant.taskdefs.GZip\n +User task: p4label     org.apache.tools.ant.taskdefs.optional.perforce.P4Label\n\n +User task: wlrun     org.apache.tools.ant.taskdefs.optional.ejb.WLRun\n +User task: jpcovreport     org.apache.tools.ant.taskdefs.optional.sitraka.CovR\neport\n +User task: copy     org.apache.tools.ant.taskdefs.Copy\n +User task: filter     org.apache.tools.ant.taskdefs.Filter\n +User task: jar     org.apache.tools.ant.taskdefs.Jar\n +User task: unzip     org.apache.tools.ant.taskdefs.Expand\n +User task: rename     org.apache.tools.ant.taskdefs.Rename\n +User task: mmetrics     org.apache.tools.ant.taskdefs.optional.metamata.MMetri\ncs\n +User task: propertyfile     org.apache.tools.ant.taskdefs.optional.PropertyFil\ne\n +User task: copyfile     org.apache.tools.ant.taskdefs.Copyfile\n +User task: ccmcheckintask     org.apache.tools.ant.taskdefs.optional.ccm.CCMCh\neckinDefault\n +User task: p4submit     org.apache.tools.ant.taskdefs.optional.perforce.P4Subm\nit\n +User task: gunzip     org.apache.tools.ant.taskdefs.GUnzip\n +User task: antcall     org.apache.tools.ant.taskdefs.CallTarget\n +User task: taskdef     org.apache.tools.ant.taskdefs.Taskdef\n +User task: mkdir     org.apache.tools.ant.taskdefs.Mkdir\n +User task: sql     org.apache.tools.ant.taskdefs.SQLExec\n +User task: replace     org.apache.tools.ant.taskdefs.Replace\n +User task: ear     org.apache.tools.ant.taskdefs.Ear\n +User task: ant     org.apache.tools.ant.taskdefs.Ant\n +User task: vsshistory     org.apache.tools.ant.taskdefs.optional.vss.MSVSSHIST\nORY\n +User task: style     org.apache.tools.ant.taskdefs.XSLTProcess\n +User task: p4sync     org.apache.tools.ant.taskdefs.optional.perforce.P4Sync\n +User task: fixcrlf     org.apache.tools.ant.taskdefs.FixCRLF\n +User task: sequential     org.apache.tools.ant.taskdefs.Sequential\n +User task: vssget     org.apache.tools.ant.taskdefs.optional.vss.MSVSSGET\n +User task: genkey     org.apache.tools.ant.taskdefs.GenerateKey\n +User task: p4edit     org.apache.tools.ant.taskdefs.optional.perforce.P4Edit\n +User task: zip     org.apache.tools.ant.taskdefs.Zip\n +User task: condition     org.apache.tools.ant.taskdefs.ConditionTask\n +User task: antstructure     org.apache.tools.ant.taskdefs.AntStructure\n +User task: pvcs     org.apache.tools.ant.taskdefs.optional.pvcs.Pvcs\n +User task: javah     org.apache.tools.ant.taskdefs.optional.Javah\n +User task: p4counter     org.apache.tools.ant.taskdefs.optional.perforce.P4Cou\nnter\n +User task: javac     org.apache.tools.ant.taskdefs.Javac\n +User task: test     org.apache.tools.ant.taskdefs.optional.Test\n +User task: p4revert     org.apache.tools.ant.taskdefs.optional.perforce.P4Reve\nrt\n +User task: xmlvalidate     org.apache.tools.ant.taskdefs.optional.XMLValidateT\nask\n +User task: ccmreconfigure     org.apache.tools.ant.taskdefs.optional.ccm.CCMRe\nconfigure\n +User task: cab     org.apache.tools.ant.taskdefs.optional.Cab\n +User task: typedef     org.apache.tools.ant.taskdefs.Typedef\n +User task: mparse     org.apache.tools.ant.taskdefs.optional.metamata.MParse\n +User task: ccuncheckout     org.apache.tools.ant.taskdefs.optional.clearcase.C\nCUnCheckout\n +User task: ejbjar     org.apache.tools.ant.taskdefs.optional.ejb.EjbJar\n +User task: jpcovmerge     org.apache.tools.ant.taskdefs.optional.sitraka.CovMe\nrge\n +User task: available     org.apache.tools.ant.taskdefs.Available\n +User task: p4have     org.apache.tools.ant.taskdefs.optional.perforce.P4Have\n +User task: rpm     org.apache.tools.ant.taskdefs.optional.Rpm\n +User task: vsslabel     org.apache.tools.ant.taskdefs.optional.vss.MSVSSLABEL\n +User task: cvspass     org.apache.tools.ant.taskdefs.CVSPass\n +User task: move     org.apache.tools.ant.taskdefs.Move\n +User task: wljspc     org.apache.tools.ant.taskdefs.optional.jsp.WLJspc\n +User task: junitreport     org.apache.tools.ant.taskdefs.optional.junit.XMLRes\nultAggregator\n +User task: javacc     org.apache.tools.ant.taskdefs.optional.javacc.JavaCC\n +User task: signjar     org.apache.tools.ant.taskdefs.SignJar\n +User task: csc     org.apache.tools.ant.taskdefs.optional.dotnet.CSharp\n +User task: p4change     org.apache.tools.ant.taskdefs.optional.perforce.P4Chan\nge\n +User task: cccheckin     org.apache.tools.ant.taskdefs.optional.clearcase.CCCh\neckin\n +User task: property     org.apache.tools.ant.taskdefs.Property\n +User task: iplanet-ejbc     org.apache.tools.ant.taskdefs.optional.ejb.IPlanet\nEjbcTask\n +User task: unwar     org.apache.tools.ant.taskdefs.Expand\n +User task: touch     org.apache.tools.ant.taskdefs.Touch\n +User task: ilasm     org.apache.tools.ant.taskdefs.optional.dotnet.Ilasm\n +User task: ccmcheckin     org.apache.tools.ant.taskdefs.optional.ccm.CCMChecki\nn\n +User task: get     org.apache.tools.ant.taskdefs.Get\n +User task: blgenclient     org.apache.tools.ant.taskdefs.optional.ejb.BorlandG\nenerateClient\n +User task: vsscheckout     org.apache.tools.ant.taskdefs.optional.vss.MSVSSCHE\nCKOUT\n +User task: stylebook     org.apache.tools.ant.taskdefs.optional.StyleBook\n +User task: javadoc     org.apache.tools.ant.taskdefs.Javadoc\n +User task: netrexxc     org.apache.tools.ant.taskdefs.optional.NetRexxC\n +User task: antlr     org.apache.tools.ant.taskdefs.optional.ANTLR\n +User task: record     org.apache.tools.ant.taskdefs.Recorder\n +User task: untar     org.apache.tools.ant.taskdefs.Untar\n +User task: delete     org.apache.tools.ant.taskdefs.Delete\n +User task: ejbc     org.apache.tools.ant.taskdefs.optional.ejb.Ejbc\n +User task: ddcreator     org.apache.tools.ant.taskdefs.optional.ejb.DDCreator\n +User task: copydir     org.apache.tools.ant.taskdefs.Copydir\n +User task: war     org.apache.tools.ant.taskdefs.War\n +User task: ccupdate     org.apache.tools.ant.taskdefs.optional.clearcase.CCUpd\nate\n +User task: depend     org.apache.tools.ant.taskdefs.optional.depend.Depend\n +User task: parallel     org.apache.tools.ant.taskdefs.Parallel\n +User task: ccmcheckout     org.apache.tools.ant.taskdefs.optional.ccm.CCMCheck\nout\n +User task: renameext     org.apache.tools.ant.taskdefs.optional.RenameExtensio\nns\n +User task: exec     org.apache.tools.ant.taskdefs.ExecTask\n +User task: apply     org.apache.tools.ant.taskdefs.Transform\n +User task: wlstop     org.apache.tools.ant.taskdefs.optional.ejb.WLStop\n +User task: maudit     org.apache.tools.ant.taskdefs.optional.metamata.MAudit\n +User task: jdepend     org.apache.tools.ant.taskdefs.optional.jdepend.JDependT\nask\n +User task: sleep     org.apache.tools.ant.taskdefs.Sleep\n +User task: rmic     org.apache.tools.ant.taskdefs.Rmic\n +User datatype: fileset     org.apache.tools.ant.types.FileSet\n +User datatype: patternset     org.apache.tools.ant.types.PatternSet\n +User datatype: filterset     org.apache.tools.ant.types.FilterSet\n +User datatype: filelist     org.apache.tools.ant.types.FileList\n +User datatype: description     org.apache.tools.ant.types.Description\n +User datatype: path     org.apache.tools.ant.types.Path\n +User datatype: mapper     org.apache.tools.ant.types.Mapper\nSetting project property: java.runtime.name -> Java(TM) 2 Runtime Environment, S\ntandard Edition\nSetting project property: sun.boot.library.path -> C:\\tools\\metro1\\java\\jre\\bin\nSetting project property: java.vm.version -> 1.4-internal-release\nSetting project property: java.vm.vendor -> Sun Microsystems Inc.\nSetting project property: java.vendor.url -> http://java.sun.com/\nSetting project property: path.separator -> ;\nSetting project property: java.vm.name -> Java HotSpot(TM) Client VM\nSetting project property: file.encoding.pkg -> sun.io\nSetting project property: user.country -> US\nSetting project property: sun.os.patch.level ->\nSetting project property: java.vm.specification.name -> Java Virtual Machine Spe\ncification\nSetting project property: user.dir -> C:\\metro1\nSetting project property: java.runtime.version -> 1.4.0_01_04302002\nSetting project property: java.awt.graphicsenv -> sun.awt.Win32GraphicsEnvironme\nnt\nSetting project property: java.endorsed.dirs -> C:\\tools\\metro1\\java\\jre\\lib\\end\norsed\nSetting project property: os.arch -> x86\nSetting project property: java.io.tmpdir -> C:\\TEMP\\\nSetting project property: line.separator ->\n\nSetting project property: java.vm.specification.vendor -> Sun Microsystems Inc.\nSetting project property: user.variant ->\nSetting project property: os.name -> Windows XP\nSetting project property: ant.home -> \\tools\\metro1\\ant\nSetting project property: sun.java2d.fontpath ->\nSetting project property: java.library.path -> C:\\tools\\metro1\\java\\bin;.;C:\\WIN\nDOWS\\System32;C:\\WINDOWS;c:\\tools\\metro1\\java\\bin;c:\\tools\\metro1\\bin;c:\\tools\\m\netro1\\msdev\\bin;c:\\tools\\metro1\\perl\\bin;c:\\tools\\metro1\\tkit\\tools;C:\\WINDOWS\\s\nystem32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\system32\\nls;C:\\WINDOWS\\s\nystem32\\nls\\ENGLISH;C:\\Program Files\\Symantec\\pcAnywhere;C:\\Program Files\\Winzip\n;c:\\utils;z:\\integ\\tools;z:\\integ\\scripts\\library;z:\\integ\\tools;;z:\\mkssi7\nSetting project property: java.specification.name -> Java Platform API Specifica\ntion\nSetting project property: java.class.version -> 48.0\nSetting project property: java.util.prefs.PreferencesFactory -> java.util.prefs.\nWindowsPreferencesFactory\nSetting project property: os.version -> 5.1\nSetting project property: user.home -> C:\\Documents and Settings\\~samwise\nSetting project property: user.timezone ->\nSetting project property: java.awt.printerjob -> sun.awt.windows.WPrinterJob\nSetting project property: file.encoding -> Cp1252\nSetting project property: java.specification.version -> 1.4\nSetting project property: java.class.path -> c:\\tools\\metro1\\java\\lib\\tools.jar;\n\\tools\\metro1\\ant\\lib\\jaxp.jar;\\tools\\metro1\\ant\\lib\\jakarta-ant-1.4-optional.ja\nr;\\tools\\metro1\\ant\\lib\\crimson.jar;\\tools\\metro1\\ant\\lib\\ant.jar;z:\\integ\\tools\n\\classes;z:\\integ\\tools\\classes\\mocha.zip;z:\\integ\\tools\\classes\\pmegen.zip;z:\\i\nnteg\\tools\\classes\\crema.zip;z:\\integ\\tools\\classes\\stripper.zip;z:\\integ\\tools\\\nclasses\\harness.zip\nSetting project property: user.name -> ~samwise\nSetting project property: java.vm.specification.version -> 1.0\nSetting project property: java.home -> C:\\tools\\metro1\\java\\jre\nSetting project property: sun.arch.data.model -> 32\nSetting project property: user.language -> en\nSetting project property: java.specification.vendor -> Sun Microsystems Inc.\nSetting project property: awt.toolkit -> sun.awt.windows.WToolkit\nSetting project property: java.vm.info -> mixed mode\nSetting project property: java.version -> 1.4.0_01_04302002\nSetting project property: java.ext.dirs -> C:\\tools\\metro1\\java\\jre\\lib\\ext\nSetting project property: sun.boot.class.path -> C:\\tools\\metro1\\java\\jre\\lib\\rt\n.jar;C:\\tools\\metro1\\java\\jre\\lib\\i18n.jar;C:\\tools\\metro1\\java\\jre\\lib\\sunrsasi\ngn.jar;C:\\tools\\metro1\\java\\jre\\lib\\jsse.jar;C:\\tools\\metro1\\java\\jre\\lib\\jce.ja\nr;C:\\tools\\metro1\\java\\jre\\lib\\charsets.jar;C:\\tools\\metro1\\java\\jre\\classes\nSetting project property: java.vendor -> Sun Microsystems Inc.\nSetting project property: file.separator -> \\\nSetting project property: java.vendor.url.bug -> http://java.sun.com/cgi-bin/bug\nreport.cgi\nSetting project property: sun.io.unicode.encoding -> UnicodeLittle\nSetting project property: sun.cpu.endian -> little\nSetting project property: sun.cpu.isalist -> pentium i486 i386\nSetting ro project property: ant.version -> Ant version 1.4 compiled on Septembe\nr 3 2001\nSetting ro project property: ant.file -> C:\\metro1\\build.xml\nparsing buildfile C:\\metro1\\build.xml with URI = file:C:/metro1/build.xml\nSetting ro project property: ant.project.name -> lawt\nAdding reference: lawt -> org.apache.tools.ant.Project@d63e39\nSetting project property: basedir -> C:\\metro1\nProject base dir set to: C:\\metro1\n   +Task: property\nSetting project property: project_name -> lefthook\n   +Task: property\nSetting project property: module_name -> lawt\n   +Task: property\nSetting project property: para -> $\n   +Task: property\n [property] Loading Environment env.\n\nBUILD FAILED\n\nC:\\metro1\\build.xml:9: java.lang.NullPointerException\n        at org.apache.tools.ant.ProjectHelper.parse(ProjectHelper.java:135)\n        at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.jav\na:85)\n        at org.apache.tools.ant.Main.runBuild(Main.java:439)\n        at org.apache.tools.ant.Main.start(Main.java:153)\n        at org.apache.tools.ant.Main.main(Main.java:176)\n--- Nested Exception ---\njava.lang.NullPointerException\n        at org.apache.tools.ant.taskdefs.Property.loadEnvironment(Property.java:\n253)\n        at org.apache.tools.ant.taskdefs.Property.execute(Property.java:183)\n        at org.apache.tools.ant.ProjectHelper$TaskHandler.finished(ProjectHelper\n.java:489)\n        at org.apache.tools.ant.ProjectHelper$AbstractHandler.endElement(Project\nHelper.java:204)\n        at org.xml.sax.helpers.XMLReaderAdapter.endElement(XMLReaderAdapter.java\n:347)\n        at org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1536)\n        at org.apache.crimson.parser.Parser2.content(Parser2.java:1779)\n        at org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1507)\n        at org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:500)\n        at org.apache.crimson.parser.Parser2.parse(Parser2.java:305)\n        at org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:442)\n\n        at org.xml.sax.helpers.XMLReaderAdapter.parse(XMLReaderAdapter.java:223)\n\n        at javax.xml.parsers.SAXParser.parse(SAXParser.java:314)\n        at org.apache.tools.ant.ProjectHelper.parse(ProjectHelper.java:117)\n        at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.jav\na:85)\n        at org.apache.tools.ant.Main.runBuild(Main.java:439)\n        at org.apache.tools.ant.Main.start(Main.java:153)\n        at org.apache.tools.ant.Main.main(Main.java:176)\n\nTotal time: 30 seconds\n..................................\n\nBUILD FAILED\n\nC:\\metro1\\build.xml:9: java.lang.NullPointerException\n        at org.apache.tools.ant.ProjectHelper.parse(ProjectHelper.java:135)\n        at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.jav\na:85)\n        at org.apache.tools.ant.Main.runBuild(Main.java:439)\n        at org.apache.tools.ant.Main.start(Main.java:153)\n        at org.apache.tools.ant.Main.main(Main.java:176)\n--- Nested Exception ---\njava.lang.NullPointerException\n        at org.apache.tools.ant.taskdefs.Property.loadEnvironment(Property.java:\n253)\n        at org.apache.tools.ant.taskdefs.Property.execute(Property.java:183)\n        at org.apache.tools.ant.ProjectHelper$TaskHandler.finished(ProjectHelper\n.java:489)\n        at org.apache.tools.ant.ProjectHelper$AbstractHandler.endElement(Project\nHelper.java:204)\n        at org.xml.sax.helpers.XMLReaderAdapter.endElement(XMLReaderAdapter.java\n:347)\n        at org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1536)\n        at org.apache.crimson.parser.Parser2.content(Parser2.java:1779)\n        at org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1507)\n        at org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:500)\n        at org.apache.crimson.parser.Parser2.parse(Parser2.java:305)\n        at org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:442)\n\n        at org.xml.sax.helpers.XMLReaderAdapter.parse(XMLReaderAdapter.java:223)\n\n        at javax.xml.parsers.SAXParser.parse(SAXParser.java:314)\n        at org.apache.tools.ant.ProjectHelper.parse(ProjectHelper.java:117)\n        at org.apache.tools.ant.ProjectHelper.configureProject(ProjectHelper.jav\na:85)\n        at org.apache.tools.ant.Main.runBuild(Main.java:439)\n        at org.apache.tools.ant.Main.start(Main.java:153)\n        at org.apache.tools.ant.Main.main(Main.java:176)\n\nTotal time: 30 seconds\n\n[c:\\metro1]java -version\njava version \"1.4.0_01_04302002\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.0_01_04302002)\nJava HotSpot(TM) Client VM (build 1.4-internal-release, mixed mode)"}, {"count": 1, "tags": [], "bug_id": 9886, "text": "I was wrong, SAX2 has nothing to do with that. It crashes because in my case the\nvector returned by getProcEnvironment consists of one null string. This null\nstring gets there due to a bug in org.apache.tools.ant.taskdefs.Execute, line 191:\n\n            // Since we \"look ahead\" before adding, there's one last env var.\n            procEnvironment.addElement(var);\n\nIt should be like this:\n            if (var != null) procEnvironment.addElement(var);\n\nNow, why is it null? In general, there can be plenty of reasons. In my case it\nwas just that under 4nt (on Windows XP) command.com was not found. Stupid\nenough, yes, but not enough to cause an exception.\n\nThanks,\nVlad", "id": 17829, "time": "2002-06-14T23:18:54Z", "creator": "vpatryshev@borland.com", "creation_time": "2002-06-14T23:18:54Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9886, "attachment_id": null, "text": "It would be useful to select the appropriate operating system from the OS list\nwhen you report bugs. \n\nPlease try the current 1.5 beta where this issue should be fixed.\n\nThanks\n\n*** This bug has been marked as a duplicate of 6456 ***", "id": 17837, "time": "2002-06-15T00:30:00Z", "creator": "conor@apache.org", "creation_time": "2002-06-15T00:30:00Z", "is_private": false}]