[{"count": 0, "tags": [], "bug_id": 48815, "text": "I have spent a long time trying to assert what has been causing a NoClassDefFoundError in my build script and have finally worked out that if the jvmargs element value attribute is blank it tries to execute this value as the main class rather than the classname attribute of the java element.  There is no information or stack track because it was literally trying to execute \"\".  It is useful to be able to pass in arguments which may or may not be blank as a jvmarg and this functionality works in the Windows implementation.  I have found this bug to be present in Ant 1.5.0_19 and 1.7.1.\n\nI couldn't see anything open for this at the moment, nor could I see anything in the fixes for 1.8.", "id": 134885, "time": "2010-02-25T11:24:01Z", "creator": "daniel.hall@pcmsgroup.com", "creation_time": "2010-02-25T11:24:01Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 48815, "attachment_id": null, "text": "there is a patch attached t bug 43586 which is supposed to fix this.\n\nI'm not sure whether disallowing any blank args in jvmargs would be a good thing or whether there may be any legitimate reasons to have literal blank args - like a blank classpath as companion to a -classpath argument.\n\nMaybe we should print a warning if we encounter blank args that makes debugging such a situation easier.  This way we won't give up the flexibility we currently allow.", "id": 135629, "time": "2010-03-25T15:18:12Z", "creator": "bodewig@apache.org", "creation_time": "2010-03-25T15:18:12Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 48815, "attachment_id": null, "text": "(In reply to comment #0)\n> It is useful to be able to pass in arguments which may or may not be blank as a\n> jvmarg\n\nYou can use line=\"${possiblyBlank}\". Unfortunately this assumes that ${possiblyBlank} contains no spaces. Best would be the ability to pass if/unless attrs (or nested <condition>s) on <arg> variants.", "id": 135632, "time": "2010-03-25T16:55:32Z", "creator": "jglick@apache.org", "creation_time": "2010-03-25T16:55:32Z", "is_private": false}, {"count": 3, "tags": [], "creator": "antoine@apache.org", "attachment_id": null, "id": 135650, "time": "2010-03-26T00:20:19Z", "bug_id": 48815, "creation_time": "2010-03-26T00:20:19Z", "is_private": false, "text": "I agree with Jesse that if and unless on jvmargs, and also on <arg/> inside <exec/> and <java/> would be ideal.\n\n\n\nRegards,\n\nAntoine"}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 135862, "time": "2010-04-03T06:46:30Z", "bug_id": 48815, "creation_time": "2010-04-03T06:46:30Z", "is_private": false, "text": "(In reply to comment #2)\n> (In reply to comment #0)\n> > It is useful to be able to pass in arguments which may or may not be blank as a\n> > jvmarg\n> \n> You can use line=\"${possiblyBlank}\". Unfortunately this assumes that\n> ${possiblyBlank} contains no spaces.\n\nThis is a good workaround for the current bug report.\n\nWhat I meant was something different, though.  The patch attached to bug 43586 would remove all blank command line arguments and I argued this would be going too far since there might be legitimate reasons for a blank arg.\n\n> Best would be the ability to pass\n> if/unless attrs (or nested <condition>s) on <arg> variants.\n\nAgreed.\n\nI thought there must already be a bugzilla issue for this, but can't find one."}, {"count": 5, "tags": [], "creator": "bodewig@apache.org", "attachment_id": 25339, "id": 136340, "time": "2010-04-23T05:16:07Z", "bug_id": 48815, "creation_time": "2010-04-23T05:16:07Z", "is_private": false, "text": "Created attachment 25339\nPatch consolidating Brian's changes and Jan's testcase\n\nI have modified Brian's original change to use a linked list rather than a vector and a two-element string array rather than a map, but these changes are really minor."}, {"count": 6, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "(In reply to comment #5)\n> Created an attachment (id=25339) [details]\n\nwrong issue, sorry.", "id": 136341, "time": "2010-04-23T05:17:50Z", "bug_id": 48815, "creation_time": "2010-04-23T05:17:50Z", "is_private": false}]