[{"count": 0, "attachment_id": null, "creator": "bob.stone@hp.com", "is_private": false, "id": 39356, "time": "2003-06-24T16:38:05Z", "bug_id": 21055, "creation_time": "2003-06-24T16:38:05Z", "tags": [], "text": "Xindice running as an webapp on Weblogic 6.1 (W2000, JDK1.3.1, also verified on \nTomcat4.1.24)\n\nI created several indexes on the collection.\nHere is the printout from the same shell before and after WL reboot:\n\nC:\\java\\xml-xindice\\bin>client li -c \nxmldb:xindice://localhost:7001/db/athp/lifework\nserviceLocation=</Xindice/>\nIndexes:\n\nlanguageIdx\ncountryIdx\nbaseIdx\nroleIdx\n\nTotal Indexes: 4\n\nC:\\java\\xml-xindice\\bin>client li -c\nxmldb:xindice://localhost:7001/db/athp/lifework\nserviceLocation=</Xindice/>\nIndexes:\n\n\nTotal Indexes: 0\n\nThe data in the table is still accessible however the access speed is back\nto its pre-indexed level.\nThe database is in location separate from WEB-INF and I can see all the\nindex files on the disc (non 0 size). In the prior builds I noticed the\nopposite problem when the indexes wouldn't be deleted at all."}, {"count": 1, "tags": [], "bug_id": 21055, "attachment_id": null, "id": 39559, "time": "2003-06-27T17:51:06Z", "creator": "bob.stone@hp.com", "creation_time": "2003-06-27T17:51:06Z", "is_private": false, "text": "1. While stepping through the code, I realized that there is no mechanism for \ndiscovering existing index files. During startup, IndexerManager searches for \nthe \"index\" nodes in the configuration file if none is found it happily ignores \nany index files that already exist on the disk.\n\n2. Now, moving to the creation of an index - list of the existing indexes is \nobtained from the Configuration object driven by system.xml. Because of #1 - \nlist is empty and the IndexManager happily creates the index again and stores \nit on disk. It also adds the child \"index\" node to the configuration. However, \nthis updated configuration is never persisted back to the system.xml, and after \nreboot the index node is lost.\n\nI'm not attempting to fix this because I don't know how this was envisioned. I \nsee two possibilities:\n1. Add code that searches the file system for the index files and updates the \nConfiguration accordingly\n2. Overwrite the system.xml file on index add/remove\n\nPlease advice,\n\nBob Stone\n"}, {"count": 2, "tags": [], "bug_id": 21055, "attachment_id": null, "is_private": false, "id": 45460, "time": "2003-10-13T05:45:23Z", "creator": "andrew.e.white@motorola.com", "creation_time": "2003-10-13T05:45:23Z", "text": "Further data:\n\nIndexes can prevent search from working correctly even after being deleted and\nrecreated.\n\n(1) Create DB.  Create index.  Search (index works).\n(2) Reboot.\n(3) Run search again (with index).  Search fails.\n(4) Delete index.  Run search.  Search succeeds.\n(5) Create index again.  Run search.  Search fails.\n\nSpecifically, I am using an attribute index of the form:\n  'elem@attr'\nand search of the form:\n  '/full/path/to/elem[@attr=\"value\"]'\n\nPlatform is OS X 10.2.6 / Java 1.4.1 (update 1)\n"}, {"count": 3, "text": "Turns out that elem@attr indexes cause searches to fail, but not elem indexes.\n\nDuplicated results on Linux box.", "bug_id": 21055, "attachment_id": null, "id": 45771, "time": "2003-10-16T03:05:39Z", "creator": "andrew.e.white@motorola.com", "creation_time": "2003-10-16T03:05:39Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 21055, "attachment_id": null, "is_private": false, "id": 49084, "time": "2003-12-14T01:55:53Z", "creator": "vgritsenko@apache.org", "creation_time": "2003-12-14T01:55:53Z", "text": "Just tried with latest CVS: (1) create index, (2) restart xindice, (3) list\nindex. It correctly listed the index. So at least one problem has been solved.\n\nBob, can you try your tests and see what's broken in current CVS?\n\nThanks,\nVadim"}, {"count": 5, "tags": [], "bug_id": 21055, "attachment_id": null, "text": "Closing. If you still have this issue, please re-open.", "id": 49687, "time": "2003-12-25T04:08:43Z", "creator": "vgritsenko@apache.org", "creation_time": "2003-12-25T04:08:43Z", "is_private": false}]