[{"count": 0, "attachment_id": null, "bug_id": 45297, "is_private": false, "id": 118061, "time": "2008-06-27T05:16:08Z", "creator": "titetluc@gmail.com", "creation_time": "2008-06-27T05:16:08Z", "tags": [], "text": "I have a problem retrieving the user identity (r->user) in a specific configuration (using mod_perl). I sent a mail on the mod_perl mailing list to verify if the pb came from mod_perl.\n\nThe thread can be found here: \n\nhttp://www.gossamer-threads.com/lists/modperl/modperl/97533\n\nTorsten Foertsch (thanks to him) configured a basic httpd configuration to locate the problem. It seems that mod_dir does not work properly.\n\nAll the story in the previous link !"}, {"count": 1, "tags": [], "bug_id": 45297, "is_private": false, "id": 118066, "attachment_id": null, "creator": "torsten.foertsch@gmx.net", "creation_time": "2008-06-27T08:05:58Z", "time": "2008-06-27T08:05:58Z", "text": "I have verified it without mod_perl with apache 2.2.9:\n\nDirectoryIndex index.shtml\nOptions Includes Indexes\nAddType text/html .shtml\nAddOutputFilter INCLUDES .shtml\n\n<Location /index.shtml>\n    Require valid-user\n    AuthType basic\n    AuthName \"Something very secret\"\n    AuthUserFile /path/to/htpasswd\n</Location>\n\nMy index.shtml reads:\n\n<html>\n<body>\n<h1>Hello <!--#echo var=\"REMOTE_USER\" --></h1>\n<pre>\n<!--#printenv -->\n</pre>\n</body>\n</html>\n\nIf /index.shtml is requested all works normal. If only / is requested I get \nthe password prompt. Then it shows the page but the REMOTE_USER variable is \nunset. This variable is r->user.\n"}, {"count": 2, "tags": [], "creator": "torsten.foertsch@gmx.net", "attachment_id": 22189, "id": 118067, "time": "2008-06-27T08:28:47Z", "bug_id": 45297, "creation_time": "2008-06-27T08:28:47Z", "is_private": false, "text": "Created attachment 22189\nadds \"r->user = rr->user\" to ap_internal_fast_redirect\n\nap_internal_fast_redirect looks to me like a very ugly hack. Its name suggests that it does an internal redirect but it doesn't. It simply destroyes the current main request and overrides it with the other.\n\nWhy is it used instead of ap_run_sub_req?"}]