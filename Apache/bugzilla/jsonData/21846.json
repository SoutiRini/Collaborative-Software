[{"count": 0, "tags": [], "creator": "gvrossum@springsite.com", "text": "When rendering svg through FOP using Batik (1.5beta4) it seems that '<svg:use>' \nis not supported. When using '<svg:use ...>' nothing is rendered, when using \n<use ...> the object that should be used is not rendered.\n\nI tested the the following code to be rendered by FOP/Batik.\nThe 'Star' is not rendered, only the line:\n\n<fo:instream-foreign-object \n\txmlns:fo='http://www.w3.org/1999/XSL/Format' \n\txmlns:svg='http://www.w3.org/2000/svg' \n\txmlns:xlink='http://www.w3.org/1999/xlink'>\n\n\t<svg:svg width='300' height='250'>\n\t\t<svg:defs>\n\t\t\t<svg:polygon id=\"Star\" points=\"1,4 4,4 5,1 6,4 9,4 7,6 \n8,9 5,7 2,9 3,6\"/>\n\t\t</svg:defs>\n\t\t<!-- NOTE: svg:use will result in no rendering at all!-->\n\t\t<use x=\"1.8cm\" y=\"1.5910794092155711cm\" xlink:href=\"#Star\" \nstyle=\"fill:yellow;stroke:black;stroke-width:0.7px;\"/>\n\t\t<svg:line x1=\"10\" y1=\"10\" x2=\"290\" y2=\"240\" \nstyle=\"stroke:green; stroke-width:1px;\" />\n\t</svg:svg>\n\n</fo:instream-foreign-object>\n\nIs svg:use supported?", "id": 41275, "time": "2003-07-24T10:18:04Z", "bug_id": 21846, "creation_time": "2003-07-24T10:18:04Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "gvrossum@springsite.com", "attachment_id": null, "id": 42043, "time": "2003-08-04T08:36:27Z", "bug_id": 21846, "creation_time": "2003-08-04T08:36:27Z", "is_private": false, "text": "Hi,\n\nI found out that it has something to do with the unit 'cm' that is used for \nsetting x and y in svg:use.\n\nThe following NullPointerException occurs when using FOP 0.20.5:\n\njava.lang.NullPointerException\n        at \norg.apache.batik.bridge.UnitProcessor$DefaultContext.getPixelUnitToMillimeter\n(UnitProcessor.java:350)\n        at org.apache.batik.util.UnitProcessor.svgToUserSpace\n(UnitProcessor.java:154)\n        at org.apache.batik.util.UnitProcessor.svgToUserSpace\n(UnitProcessor.java:131)\n        at org.apache.batik.bridge.UnitProcessor.svgToUserSpace\n(UnitProcessor.java:313)\n        at \norg.apache.batik.bridge.UnitProcessor.svgHorizontalCoordinateToUserSpace\n(UnitProcessor.java:247)\n        at org.apache.batik.bridge.SVGUseElementBridge.computeTransform\n(SVGUseElementBridge.java:178)\n        at org.apache.batik.bridge.SVGUseElementBridge.createGraphicsNode\n(SVGUseElementBridge.java:152)\n        at org.apache.batik.bridge.GVTBuilder.buildGraphicsNode\n(GVTBuilder.java:182)\n        at org.apache.batik.bridge.GVTBuilder.buildComposite\n(GVTBuilder.java:148)\n        at org.apache.batik.bridge.GVTBuilder.build(GVTBuilder.java:76)\n        at org.apache.fop.render.pdf.PDFRenderer.renderSVGDocument\n(PDFRenderer.java:590)\n        at org.apache.fop.render.pdf.PDFRenderer.renderSVGArea\n(PDFRenderer.java:549)\n        at org.apache.fop.svg.SVGArea.render(SVGArea.java:98)\n        at org.apache.fop.render.pdf.PDFRenderer.renderForeignObjectArea\n(PDFRenderer.java:533)\n        at org.apache.fop.layout.inline.ForeignObjectArea.render\n(ForeignObjectArea.java:89)\n        at org.apache.fop.render.AbstractRenderer.renderLineArea\n(AbstractRenderer.java:516)\n        at org.apache.fop.layout.LineArea.render(LineArea.java:519)\n        at org.apache.fop.render.AbstractRenderer.renderBlockArea\n(AbstractRenderer.java:485)\n        at org.apache.fop.layout.BlockArea.render(BlockArea.java:117)\n        at org.apache.fop.render.AbstractRenderer.renderAreaContainer\n(AbstractRenderer.java:451)\n        at org.apache.fop.layout.ColumnArea.render(ColumnArea.java:71)\n        at org.apache.fop.render.AbstractRenderer.renderSpanArea\n(AbstractRenderer.java:100)\n        at org.apache.fop.layout.SpanArea.render(SpanArea.java:94)\n        at org.apache.fop.render.AbstractRenderer.renderBodyAreaContainer\n(AbstractRenderer.java:368)\n        at org.apache.fop.layout.BodyAreaContainer.render\n(BodyAreaContainer.java:137)\n        at org.apache.fop.render.AbstractRenderer.renderRegions\n(AbstractRenderer.java:529)\n        at org.apache.fop.render.pdf.PDFRenderer.renderPage\n(PDFRenderer.java:904)\n        at org.apache.fop.render.pdf.PDFRenderer.render(PDFRenderer.java:880)\n        at org.apache.fop.apps.StreamRenderer.queuePage(StreamRenderer.java:302)\n        at org.apache.fop.layout.AreaTree.addPage(AreaTree.java:108)\n        at org.apache.fop.fo.pagination.PageSequence.makePage\n(PageSequence.java:415)\n        at org.apache.fop.fo.pagination.PageSequence.format\n(PageSequence.java:338)\n        at org.apache.fop.apps.StreamRenderer.render(StreamRenderer.java:262)\n        at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:223)\n        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown \nSource)\n        at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement\n(Unknown Source)\n        at \norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.\ndispatch(Unknown Source)\n        at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument\n(Unknown Source)\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n        at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)\n        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n        at org.apache.fop.apps.Driver.render(Driver.java:498)\n        at org.apache.fop.apps.CommandLineStarter.run\n(CommandLineStarter.java:106)\n        at org.apache.fop.apps.Fop.main(Fop.java:62)\n\nHowever, when viewing the SVG in Batiks SVG Browser there is no problem at all.\nIs this because of FOP implemented Batik 1.5beta4 vs. the current Batik 1.5 \nrelease??"}, {"count": 2, "tags": [], "creator": "deweese@apache.org", "text": "I suspect that when they construct the toplevel SVG for some reason\nit is not establishing a viewport as it must for proper unit resolution.", "id": 44776, "time": "2003-09-28T00:00:40Z", "bug_id": 21846, "creation_time": "2003-09-28T00:00:40Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "The example you gave works with CVS FOP/Batik.\n", "attachment_id": null, "bug_id": 21846, "id": 45248, "time": "2003-10-08T13:26:32Z", "creator": "deweese@apache.org", "creation_time": "2003-10-08T13:26:32Z", "is_private": false}]