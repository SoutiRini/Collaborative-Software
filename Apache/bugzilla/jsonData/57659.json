[{"count": 0, "tags": [], "text": "This issue is related to bug ID 54527.\n\nIn this earlier defect, the mime mappings in Tomcat 6.0.37 \"web.xml\" were \"synchronized\" with the Tomcat 7 mapping.\n\nOne such mapping that was synchronized was the \"js\" mapping.  It was changed from \"text/javascript\" to \"application/javascript\".   \n\nHowever, there is another aspect of the synchronization that was omitted.   \nIn Tomcat 7, the \"serveResource\" method of \"DefaultServlet.java\" contains NEW logic that allows 'contentType.contains(\"/javascript\")' to be included.   This logic is not present in Tomcat 6.0.37.    Because it is not present, the new mime-mapping for js files will cause an \"IllegalStateException\" when trying to \"include\" JS files from JSP pages:\n\nSEVERE: Servlet.service() for servlet default threw exception\njava.lang.IllegalStateException\n\tat org.apache.jasper.runtime.ServletResponseWrapperInclude.getOutputStream(ServletResponseWrapperInclude.java:63)\n\tat org.apache.catalina.servlets.DefaultServlet.serveResource(DefaultServlet.java:884)\n\tat org.apache.catalina.servlets.DefaultServlet.doGet(DefaultServlet.java:422)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:617)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:723)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\t:\n\tat org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)", "is_private": false, "id": 181486, "creator": "d.avant75@gmail.com", "time": "2015-03-03T21:08:47Z", "bug_id": 57659, "creation_time": "2015-03-03T21:08:47Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 181499, "creation_time": "2015-03-04T13:01:26Z", "time": "2015-03-04T13:01:26Z", "bug_id": 57659, "text": "Backport of r1139280 proposed for 6.0.x to address this.", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 57659, "attachment_id": null, "text": "Fixed in 6.0.x for 6.0.44 onwards.", "id": 181548, "time": "2015-03-06T08:55:51Z", "creator": "markt@apache.org", "creation_time": "2015-03-06T08:55:51Z", "is_private": false}]