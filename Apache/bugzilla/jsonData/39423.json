[{"count": 0, "tags": [], "bug_id": 39423, "attachment_id": null, "is_private": false, "id": 88539, "time": "2006-04-27T06:24:48Z", "creator": "sophia.xie@vodafone.com", "creation_time": "2006-04-27T06:24:48Z", "text": "We found one of our JBoss/Struts based application's heap usage (full GC \nsurvivals in Tenured space) slowly creeping up, which resulted application \nslowly got into heap contention and performance deteriates. After integrated \nwith OptimizeIt, we finally found some objects \n(org.apache.tomcat.util.buf.ByteChunk, \norg.apache.tomcat.util.buf.MessageBytes, org.apache.tomcat.util.buf.CharChunk) \nthat are all related to methods in org.tomcat.util.http.MimeHeaders class. \nAttached please find the heap data and some of the reference \ntraces."}, {"count": 1, "tags": [], "text": "Created attachment 18190\nHeap state (after forced full gc) after slowly loading up heap \n\nTHis sheet shows the non-freeable objects in the heap in between the first\ncheck point and after putting load to the application (followed by forced full\ngc).", "is_private": false, "id": 88540, "creator": "sophia.xie@vodafone.com", "time": "2006-04-27T06:31:32Z", "bug_id": 39423, "creation_time": "2006-04-27T06:31:32Z", "attachment_id": 18190}, {"count": 2, "tags": [], "bug_id": 39423, "attachment_id": 18191, "id": 88541, "time": "2006-04-27T06:33:06Z", "creator": "sophia.xie@vodafone.com", "creation_time": "2006-04-27T06:33:06Z", "is_private": false, "text": "Created attachment 18191\nThis file contains call trace and reference graph for some of the objects in the last xls sheet"}, {"count": 3, "tags": [], "text": "It's not a leak, the objects are being recycled and reused.", "attachment_id": null, "bug_id": 39423, "id": 88550, "time": "2006-04-27T10:05:01Z", "creator": "remm@apache.org", "creation_time": "2006-04-27T10:05:01Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 39423, "attachment_id": null, "is_private": false, "id": 88559, "time": "2006-04-27T14:50:39Z", "creator": "sophia.xie@vodafone.com", "creation_time": "2006-04-27T14:50:39Z", "text": "(In reply to comment #3)\n> It's not a leak, the objects are being recycled and reused.\n\nCan you give some more details? Why you think it's being reused. From \nOptimizeIt, I see none of them was freed every time after a forced full gc. \nThanks."}, {"count": 5, "tags": [], "bug_id": 39423, "attachment_id": null, "id": 88563, "time": "2006-04-27T15:22:45Z", "creator": "sophia.xie@vodafone.com", "creation_time": "2006-04-27T15:22:45Z", "is_private": false, "text": "(In reply to comment #4)\n> (In reply to comment #3)\n> > It's not a leak, the objects are being recycled and reused.\n> Can you give some more details? Why you think it's being reused. From \n> OptimizeIt, I see none of them was freed every time after a forced full gc. \n> Thanks.\n\n\nNot only they can't be freed, but the # of such objects were growing slowly \nwhen under load. \n"}, {"attachment_id": null, "tags": [], "bug_id": 39423, "is_private": false, "count": 6, "id": 88564, "time": "2006-04-27T15:30:40Z", "creator": "sophia.xie@vodafone.com", "creation_time": "2006-04-27T15:30:40Z", "text": "(In reply to comment #5)\n> (In reply to comment #4)\n> > (In reply to comment #3)\n> > > It's not a leak, the objects are being recycled and reused.\n> > Can you give some more details? Why you think it's being reused. From \n> > OptimizeIt, I see none of them was freed every time after a forced full \ngc. \n> > Thanks.\n> Not only they can't be freed, but the # of such objects were growing slowly \n> when under load. \n\n"}, {"count": 7, "tags": [], "text": "As Remy previously stated these objects are re-cycled and re-used. As such the\nbehaviour you see is both as expected and as designed.", "attachment_id": null, "bug_id": 39423, "id": 90071, "time": "2006-06-11T22:33:01Z", "creator": "markt@apache.org", "creation_time": "2006-06-11T22:33:01Z", "is_private": false}]