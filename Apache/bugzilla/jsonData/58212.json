[{"count": 0, "attachment_id": null, "creator": "18616998458@163.com", "is_private": false, "id": 184325, "time": "2015-08-05T08:41:56Z", "bug_id": 58212, "creation_time": "2015-08-05T08:41:56Z", "tags": [], "text": "During tomcat startup, it takes most of time on annotation scanning.\nFor our case, our apps have over 500 jars in class path.\nTomcat startup takes 28 seconds and annotation scanning takes 23 seconds.\n\nSo idea is: scan jars in parallel, per our benchmark testing, it could save 9 seconds. And jetty9 already support this feature.\n\nI'll provide patch onto tomcat70 in github.\nWill provide patch onto tomcat80 as well later."}, {"count": 1, "tags": [], "creator": "18616998458@163.com", "attachment_id": null, "text": "Filed PR for this enhancement:\nhttps://github.com/apache/tomcat70/pull/8", "id": 184326, "time": "2015-08-05T08:47:36Z", "bug_id": 58212, "creation_time": "2015-08-05T08:47:36Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 58212, "text": "Annotation scanning is relatively slow but there are ways to avoid it in some cases:\nhttp://wiki.apache.org/tomcat/HowTo/FasterStartUp\n\nAs always, patches will be judged on the benefits they provide vs. the invasiveness and size of the patch.\n\nNew features are first added to trunk and then back-ported. A patch that only addresses 7.0.x is less likely to attract developer attention.", "id": 184328, "time": "2015-08-05T09:07:12Z", "creator": "markt@apache.org", "creation_time": "2015-08-05T09:07:12Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 58212, "text": "I did read that page, that's great.\nBut parallel annotation scanning is also a better solution, that's why jetty also support it.\n\nMaybe my description is not clear, this should be a new feature indeed.\nAnd that isn't only for tomcat-7.0.x, I'll provide PR for tomcat-8.0.x also.\nIt could benefit both of them.\n\nAs for size of code change, because I moved out annotation scanning logic to be an new class(new class would be paralleled), but their logic isn't changed at all. From this perspective, changes not so much.\n\nAfter do that, code is clearer.\n\nAnd also, since its a good feature, we should go with better way in the end. :)", "id": 184329, "time": "2015-08-05T09:22:33Z", "creator": "18616998458@163.com", "creation_time": "2015-08-05T09:22:33Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 184536, "creation_time": "2015-08-13T07:23:22Z", "time": "2015-08-13T07:23:22Z", "bug_id": 58212, "text": "The duplicate has been opened against trunk so track this there.\n\n*** This bug has been marked as a duplicate of bug 58242 ***", "is_private": false}]