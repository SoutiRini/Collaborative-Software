[{"count": 0, "tags": [], "bug_id": 57954, "text": "I am trying to deploy code on Weblogic server. We have the credentials to deploy on the server in import.properties file. The values of username and password are encrypted using base64 algorithm. But when the file is loaded into the ant script it throws an exception as below:\n\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.6:run (sca-deploy) on project ABC: An Ant BuildException has occured: Unable to load file: java.io.UnsupportedEncodingException: base64 -> [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.6:run (sca-deploy) on project ABC: An Ant BuildException has occured: Unable to load file: java.io.UnsupportedEncodingException: base64\n\nPlease let me know what is missed.\n\nWe are loading the file as:\n\n<loadproperties srcFile=\"import.properties\" encoding=\"base64\" />", "id": 183122, "time": "2015-05-27T10:50:27Z", "creator": "peeyush_bansal@infosys.com", "creation_time": "2015-05-27T10:50:27Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 57954, "text": "import.properties contains below entries: (values are encoded in base64)\n\nusername=d2VibG9naWM=\npassword=d2VsY29tZTE=", "id": 183123, "time": "2015-05-27T10:54:50Z", "creator": "peeyush_bansal@infosys.com", "creation_time": "2015-05-27T10:54:50Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "ddevienne@gmail.com", "attachment_id": null, "id": 183124, "time": "2015-05-27T11:21:01Z", "bug_id": 57954, "creation_time": "2015-05-27T11:21:01Z", "is_private": false, "text": "the encoding attribute is for the whole file, not property values. Load the property file \"normally\", get the values for username and password, and if you need those decoded from base64, you'll have to do it \"manually\" or coax Ant into doing it (I suspect it's possible, but convoluted and not straightforward.).\n\nThis is not a bug IMHO. --DD"}, {"count": 3, "tags": [], "creator": "peeyush_bansal@infosys.com", "text": "Thanks Dominique for the guidance.\nBut is there any link or blog or document that I can follow to achieve this functionality.\n\nAny help would be appreciated.", "id": 183125, "time": "2015-05-27T11:32:26Z", "bug_id": 57954, "creation_time": "2015-05-27T11:32:26Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "text": "In addition to what Dominique said - the encoding attribute expects a charset name supported by the Java classlib, \"base64\" is not such an encoding name.\n\nUnrelated: do yourself a favor and don't call base64-encoding a string an \"encryption\".  This is obfuscation at best, since everybody can \"decrypt\" it easily.  You should be using real crypto if you want to store your passwords safely.", "id": 183126, "attachment_id": null, "bug_id": 57954, "creation_time": "2015-05-27T11:33:56Z", "time": "2015-05-27T11:33:56Z", "is_private": false}, {"count": 5, "tags": [], "creator": "peeyush_bansal@infosys.com", "text": "ok.\n\nso can anyone help me in doing that. I don't want to specify the credentials separately, they should remain in the properties file hidden by some encryption method and when loaded ant can decrypt the values.", "id": 183127, "time": "2015-05-27T11:38:36Z", "bug_id": 57954, "creation_time": "2015-05-27T11:38:36Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "bodewig@apache.org", "text": "To be honest I can't think of a combination of Ant tasks that would base64-decode only the value side of a property file.\n\nI see two approaches:\n\n* a custom PropertyEvaluator that decoded values on the fly\n\n* a custom FilterReader http://ant.apache.org/manual/Types/filterchain.html or string filter for a TokenFilter http://ant.apache.org/manual/Types/filterchain.html#tokenfilter that splits the line, base64-decodes the value part and reassembles the line.\n\nThe second one is probably easier to implement and integrate.  Either case it will require you to write your own code in Java, compile it, and make it available to the build process.", "id": 183128, "time": "2015-05-27T11:39:06Z", "bug_id": 57954, "creation_time": "2015-05-27T11:39:06Z", "is_private": false, "attachment_id": null}, {"count": 7, "attachment_id": null, "bug_id": 57954, "text": "See also http://stackoverflow.com/questions/10132221/how-do-i-use-base64-encoding-with-loadproperties-in-ant and the link in the one answer, which uses Groovy to script to decrypting within Ant (could probably use another scripting language and leverage the JDK APIs. With a recent enough JDK, the scripting might even be built-in to the JDK).", "id": 183129, "time": "2015-05-27T11:59:15Z", "creator": "ddevienne@gmail.com", "creation_time": "2015-05-27T11:59:15Z", "tags": [], "is_private": false}, {"count": 8, "attachment_id": null, "bug_id": 57954, "text": "Team\n\nCan someone give me a sample ant file with java code for encryption and decryption of credentials in properties file. The method to encrypt can be any.\nAlso the blog mentioned in the comments does not work.", "id": 183237, "time": "2015-06-01T13:53:26Z", "creator": "peeyush_bansal@infosys.com", "creation_time": "2015-06-01T13:53:26Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "creator": "jan@materne.de", "text": "If you store encrypted values in a properties file you cant mix encrypted+plain values in one file without additional to specify which values are encrypted.\n<property file=\"\">\n  <encrypted-values prefix=\"encrypted\"/>\n  <encrypted-values match=\".*\\.md5$\"/>\n  ...\n\nHaving different encryption algorithm would encrease that amount of work.\n\n\nAnother approach is having a Decrypt/EncryptFilter, so you could load one value.\n<loadfile property=\"password\" srcFile=\"encrypted\">\n  <filterchain>\n    <decrypt algorithm=\"base64\"/>", "id": 183455, "time": "2015-06-11T07:00:08Z", "bug_id": 57954, "creation_time": "2015-06-11T07:00:08Z", "is_private": false, "attachment_id": null}]