[{"count": 0, "tags": [], "text": "Typically the importHandler.resolveClass(String) function is used something like...\n  result = ctx.getImportHandler().resolveClass(\"MyClass\");\n  if (result != null)\n    return result;\n\nHowever the current functionality will fail (before classes are cached) if MyClass is in package \"com.test\" and \"org.apache\" is imported after com.test is... eg.\n\nctx.getImportHandler().importPackage(\"com.test\");\nctx.getImportHandler().importPackage(\"org.apache\");\n\nObject result = ctx.getImportHandler().resolveClass(\"MyClass\");\n\nAt this point result is null the first time ran through, because resolveClass loops through all packages finding the className in each package before it returns the temp variable its been using... which when it comes to org.apache.MyClass it will be null, when com.test.MyClass was actually found... but method returns null. \n\nI would think the expected result should be to return the first matching class. To continue its current logic for multi match detection, it can be modified to save the first match and return that variable... Like so.\n\n\npublic java.lang.Class<?> resolveClass(String name) {\n    Class<?> result = clazzes.get(name);\n\n    if (result == null) {\n        // Search the package imports - note there may be multiple matches\n        // (which correctly triggers an error)\n        for (String p : packages) {\n            String className = p + '.' + name;\n            Class<?> tmpClass = findClass(className, true);\n            if (result == null && tmpClass != null) {\n                result = tmpClass;\n            } \n        }\n    }\n\n    return result;\n}", "attachment_id": null, "id": 178576, "creator": "artfiedler@gmail.com", "time": "2014-10-18T07:52:40Z", "bug_id": 57113, "creation_time": "2014-10-18T07:52:40Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 57113, "attachment_id": null, "id": 178654, "time": "2014-10-21T19:26:29Z", "creator": "markt@apache.org", "creation_time": "2014-10-21T19:26:29Z", "is_private": false, "text": "Thanks for the report. This has been fixed in 8.0.x for 8.0.15 onwards."}]