[{"count": 0, "tags": [], "bug_id": 46827, "is_private": false, "text": "Created attachment 23365\nadd DBDInitSQL parameter to mod_dbd\n\nUsually, after connection to DB has been established, user has to execute some initialization statement.\n\nFor example this one:\n\nSET NAMES 'utf8';\n\nAttached patch adds configuration parameter DBDInitSQL, which enables user to specify which statement(s) to execute after connection has been established.\n\nSame like parameter for prepared statements:\n\nDBDInitSQL \"SET NAMES 'utf8'\" label\n\nThis patch is part of major change to mod_dbd concerning DBDPool-s. See http://www.mail-archive.com/dev@httpd.apache.org/msg42922.html", "id": 125459, "time": "2009-03-10T02:30:27Z", "creator": "mkevac@gmail.com", "creation_time": "2009-03-10T02:30:27Z", "attachment_id": 23365}, {"count": 1, "tags": [], "text": "Created attachment 23379\n add DBDInitSQL parameter to mod_dbd\n\nhttp://www.mail-archive.com/dev@httpd.apache.org/msg43269.html\n\nNick Kew proposed use of hook instead of function call. So I'v implemented that and now i am adding new patch.", "is_private": false, "bug_id": 46827, "id": 125537, "time": "2009-03-13T03:19:31Z", "creator": "mkevac@gmail.com", "creation_time": "2009-03-13T03:19:31Z", "attachment_id": 23379}, {"count": 2, "tags": [], "text": "Comments from Ronald Park on dev@httpd.apache.org:\n(http://marc.info/?l=apache-httpd-dev&m=123792143900952&w=2)\n\nI think this is an excellent set of patches.  I had developed a similar enhancement to allow mod_dbd to connect with multiple databases at my last job but never had a chance to make it available here.  Your version is far more clever and configurable.\n\nI did have one minor nit to pick with the implementation of the DBDInitSQL command.  A user might presume that the order of commands listed in the config file would be preserved when the commands are run.  By using a hash table, you'll likely get a random order causing problems.  For example, perhaps the user needs to first load one table then choose a subset from that first table to file another; if you run them in the reserve order, the second table will likely be empty. :(\n\nIf you choose not to change the implementation, then the documentation should make this clear.", "is_private": false, "bug_id": 46827, "id": 125827, "time": "2009-03-26T11:30:26Z", "creator": "chrisd@apache.org", "creation_time": "2009-03-26T11:30:26Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "mkevac@gmail.com", "attachment_id": 23482, "text": "Created attachment 23482\nmain patch\n\nThis patch adds ability to the mod_dbd Apache module to execute any SQL statements after DB connection have been established.\n\nPatch is against httpd trunk.\n\nConfiguration example:\n\n        DBDriver mysql\n        DBDParams host=localhost,user=root,reconnect=0\n        DBDPersist On\n        DBDInitSQL \"USE passport\"\n        DBDInitSQL \"SET NAMES utf8\"\n        DBDMin 1\n\nOrder of the DBDInitSQL statements is preserved (statements will be executed in same order they were in httpd.conf file).\n\nAlso this patch introduces optional post_connection hook, which enables any other module to hook after connection were established.", "id": 126195, "time": "2009-04-12T08:34:01Z", "bug_id": 46827, "creation_time": "2009-04-12T08:34:01Z", "is_private": false}, {"count": 4, "tags": [], "text": "Created attachment 23500\nnew patch\n\nRemoved DBD_DECLARE_NONSTD(void) from ap_dbd_sql_init function definition.", "is_private": false, "bug_id": 46827, "id": 126293, "time": "2009-04-16T10:51:31Z", "creator": "mkevac@gmail.com", "creation_time": "2009-04-16T10:51:31Z", "attachment_id": 23500}, {"count": 5, "tags": [], "creator": "minfrin@sharp.fm", "attachment_id": null, "id": 131042, "time": "2009-10-09T15:35:37Z", "bug_id": 46827, "creation_time": "2009-10-09T15:35:37Z", "is_private": false, "text": "My understanding is that this was committed to trunk, can you confirm whether this was resolved?\n\nCan you reopen this if not."}]