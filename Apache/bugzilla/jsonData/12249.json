[{"count": 0, "tags": [], "text": "The \"address\" parameter to the HTTP/1.1 connector is supposed to tell Tomcat to\nbind to a specific IP address. This worked fine in v4.0.3. In v4.0.4 Tomcat\nbinds to all available addresses on the machine, even when told not to. This\nenables a Tomcat protected by the proxy to be bypassable, which is a security issue.\n\nThis same problem exists on both the old HTTP/1.1 connector, and the new Coyote\nHTTP/1.1 connector.\n\nHas this option been renamed and the docs not updated?", "attachment_id": null, "bug_id": 12249, "id": 22147, "time": "2002-09-03T09:12:51Z", "creator": "minfrin@sharp.fm", "creation_time": "2002-09-03T09:12:51Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 12249, "attachment_id": null, "id": 22149, "time": "2002-09-03T09:16:48Z", "creator": "remm@apache.org", "creation_time": "2002-09-03T09:16:48Z", "is_private": false, "text": "AFAIK, this works in recent Coyote builds."}, {"count": 2, "tags": [], "creator": "minfrin@sharp.fm", "attachment_id": null, "text": "Define \"recent coyote builds\". This bug seems to exist in the final release of\nv4.0.4, and there are no later versions as far as I can see. If v4.0.4 is\nbroken, what version should I be using in a production environment?\n", "id": 22150, "time": "2002-09-03T09:23:41Z", "bug_id": 12249, "creation_time": "2002-09-03T09:23:41Z", "is_private": false}, {"count": 3, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 22151, "time": "2002-09-03T09:29:36Z", "bug_id": 12249, "creation_time": "2002-09-03T09:29:36Z", "text": "Build it from CVS or use a build from TC 4.1.x."}, {"count": 4, "tags": [], "text": "Remy, I hope you don't mind that I reopen this bug, for my reasoning below.  In \na separate email thread, I believe you mentioned that the Coyote connector is \nNOT supported/recommended for Tomcat 4.0.4, and to stick with HttpConnector \nwhen running 4.0.4 in a production environment.  If Tomcat binds to any IP \naddress, regardless of what it is configured to do, this sounds like a major \n[security] problem -- perhaps one that the solution for shouldn't be to just \nuse the newer [non-production quality] Tomcat 4.1.x.\n\nGraham, can you specify how to reproduce the problem?  Also, what Connector \nsettings do you have in your server.xml?  Perhaps I or someone else can look \ninto what the bug is exactly and post a patch?\n\nThanks,\nEddie", "attachment_id": null, "bug_id": 12249, "id": 22200, "time": "2002-09-03T17:36:38Z", "creator": "ruvinsky@yahoo.com", "creation_time": "2002-09-03T17:36:38Z", "is_private": false}, {"count": 5, "tags": [], "creator": "david.dawkins@brooks-pri.com", "attachment_id": null, "text": "Graham, can you see either of these two log messages in any of the log files in \n$CATALINA_HOME/logs?\n\n   httpConnector.allAddresses\nor\n   httpConnector.anAddress\n\nIf you find either of these messages in a log file for version that doesn't \nwork for, please add it as an attachment to this issue.", "id": 22205, "time": "2002-09-03T21:20:16Z", "bug_id": 12249, "creation_time": "2002-09-03T21:20:16Z", "is_private": false}, {"count": 6, "tags": [], "creator": "minfrin@sharp.fm", "attachment_id": null, "is_private": false, "id": 22233, "time": "2002-09-04T07:38:08Z", "bug_id": 12249, "creation_time": "2002-09-04T07:38:08Z", "text": "I installed an RPM of v4.0.4, and changed HTTP/1.1 connector in the default\nconfig file to this:\n\n<Connector className=\"org.apache.catalina.connector.http.HttpConnector\"\naddress=\"127.0.0.1\" port=\"8280\" minProcessors=\"5\" maxProcessors=\"75\"\nproxyName=\"xxx\" proxyPort=\"80\"\nenableLookups=\"true\" redirectPort=\"8443\"\nacceptCount=\"10\" debug=\"0\" connectionTimeout=\"60000\"/>\n\nI also tried this:\n\n<Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\naddress=\"127.0.0.1\" port=\"8280\" minProcessors=\"5\" maxProcessors=\"75\"\nenableLookups=\"true\" redirectPort=\"8443\"\nacceptCount=\"10\" debug=\"0\" connectionTimeout=\"20000\"/>\n\nIn both cases, I find that Tomcat binds itself to the ethernet interface as well\nas localhost, which is what I need to avoid.\n\nNeither the string httpConnector.allAddresses nor httpConnector.anAddress\nappears in any logfiles.\n"}, {"count": 7, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "is_private": false, "id": 22234, "time": "2002-09-04T08:04:29Z", "bug_id": 12249, "creation_time": "2002-09-04T08:04:29Z", "text": "I stand by my comments. I tried it on 4.1.10, and it works. So a CVS build of\nCoyote would work. It is known that earlier Coyote builds had the bug.\nI am extremely surprised that the default HTTP/1.1 connector would also have the\nbug in 4.0.4."}, {"count": 8, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "I have justed tested this with the CVS version of TC4 and the http connector \nworks correctly. I have also reviewed the connector source and can not see any \nchanges since 4.0.4 that would affect the binding behaviour of the connector.\n\nBased on this, and on Remy's original comments, I am resolving this as works \nfor me.", "id": 50378, "time": "2004-01-11T19:24:36Z", "bug_id": 12249, "creation_time": "2004-01-11T19:24:36Z", "is_private": false}]