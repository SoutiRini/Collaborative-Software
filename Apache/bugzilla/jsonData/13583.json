[{"count": 0, "tags": [], "bug_id": 13583, "attachment_id": null, "id": 24431, "time": "2002-10-13T21:04:44Z", "creator": "karl@xk72.com", "creation_time": "2002-10-13T21:04:44Z", "is_private": false, "text": "I believe that relative includes/forwards that include ../s are broken in \nTomcat 4.1.12. The ../s are not getting removed and thus the resource cannot \nbe found.\n\nI have currently seen this when the webapp is served from a WAR using \nintegrated JBoss 3.0.3 and Tomcat 4.1.12. This may be related to bug 13538\n\nI believe the problem is that the path is not normalised. I have corrected the \nproblem by adding the *****d line below to the getRequestDispatcher( String \npath ) method in org.apache.catalina.core.ApplicationContext:\n\n\n        // Validate the path argument\n        if (path == null)\n            return (null);\n        if (!path.startsWith(\"/\"))\n            throw new IllegalArgumentException\n              (sm.getString(\"applicationContext.requestDispatcher.iae\", path));\n        if (normalize(path) == null)\n            return (null);\n******  path = normalize(path);\n\n        // Construct a \"fake\" request to be mapped by our Context\n        String contextPath = context.getPath();\n        if (contextPath == null)\n            contextPath = \"\";\n        String relativeURI = path;\n        String queryString = null;"}, {"count": 1, "tags": [], "bug_id": 13583, "attachment_id": null, "text": "Are you trying to use \"..\" in a path from a servlet ? This is not particularly\nuseful as you have to produce an aboslute URL, but I can see why it's not\nworking looking at the code. I cannot reproduce bug 13538, but this is a\ndifferent issue.", "id": 24449, "time": "2002-10-14T08:11:04Z", "creator": "remm@apache.org", "creation_time": "2002-10-14T08:11:04Z", "is_private": false}, {"count": 2, "tags": [], "creator": "karl@xk72.com", "attachment_id": null, "id": 24454, "time": "2002-10-14T09:44:55Z", "bug_id": 13583, "creation_time": "2002-10-14T09:44:55Z", "is_private": false, "text": "I'm using this in a JSP page as follows:\n\n<jsp:forward page=\"../fragments/container_content.jsp\"/>\n"}, {"count": 3, "tags": [], "bug_id": 13583, "is_private": false, "id": 24455, "creation_time": "2002-10-14T09:50:45Z", "time": "2002-10-14T09:50:45Z", "creator": "remm@apache.org", "text": "Then, I tried with the example attached to bug 13538, and it worked for me. If\nyou'd like to reopen the bug, please attach a complete test case.\n\n*** This bug has been marked as a duplicate of 13538 ***", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 13583, "is_private": false, "id": 24490, "creation_time": "2002-10-14T20:01:13Z", "time": "2002-10-14T20:01:13Z", "creator": "karl@xk72.com", "text": "Created attachment 3461\nA zip including a war and the source for the war", "attachment_id": 3461}, {"count": 5, "tags": [], "bug_id": 13583, "is_private": false, "id": 24491, "creation_time": "2002-10-14T20:03:24Z", "time": "2002-10-14T20:03:24Z", "creator": "karl@xk72.com", "text": "Sorry I didn't make this clearer! I have now verified that it only happens \nwhen the webapp is served from a war (as when deployed on JBoss/Tomcat or on \nTomcat with unpackWARS=\"false\"). The attachment above is a WAR that is \nprobably very similar to the test code you have used, I have verified that the \nbug exists on Tomcat 4.1.12 and Tomcat 4.1.10.", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 13583, "attachment_id": null, "id": 24533, "time": "2002-10-15T06:54:22Z", "creator": "remm@apache.org", "creation_time": "2002-10-15T06:54:22Z", "is_private": false, "text": "Probably the canonicalization code present in the filesystem context is not\npresent in the WAR context, which causes problems. Moving the path\ncanonicalization code in the request dispatcher seems like the solution."}, {"count": 7, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 25774, "time": "2002-11-06T13:19:53Z", "bug_id": 13583, "creation_time": "2002-11-06T13:19:53Z", "is_private": false, "text": "*** Bug 13538 has been marked as a duplicate of this bug. ***"}, {"count": 8, "tags": [], "bug_id": 13583, "attachment_id": null, "text": "*** Bug 10629 has been marked as a duplicate of this bug. ***", "id": 25777, "time": "2002-11-06T13:36:27Z", "creator": "remm@apache.org", "creation_time": "2002-11-06T13:36:27Z", "is_private": false}, {"count": 9, "attachment_id": null, "bug_id": 13583, "text": "This should be fixed in Tomcat 4.1.15.", "id": 25778, "time": "2002-11-06T13:41:05Z", "creator": "remm@apache.org", "creation_time": "2002-11-06T13:41:05Z", "tags": [], "is_private": false}, {"count": 10, "attachment_id": null, "bug_id": 13583, "text": "I ran into the same problem and I wanted to mention that I tested this with\n4.1.18 and its fixed.", "id": 28995, "time": "2003-01-08T03:26:28Z", "creator": "jmwhite5@yahoo.com", "creation_time": "2003-01-08T03:26:28Z", "tags": [], "is_private": false}]