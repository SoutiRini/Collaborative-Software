[{"attachment_id": null, "tags": [], "bug_id": 3797, "text": "When the attribute includeEmptyDirs in a delete task is set to true \nthe exclude attribute of the file set is not use \n\nfile tree:\n/tmp/src\n/tmp/src/toto\n/tmp/src/toto/foo \n\n\n<delete includeEmptyDirs=\"true\" >\n<fileset dir=\"/tmp/src/\" >\n\t<exclude name=\"/tmp/src/\">\n</fileset>\n</delete>\n\n\nand /tmp/src is deleted", "count": 0, "id": 5963, "time": "2001-09-24T10:31:14Z", "creator": "thierry.hanot@ms.alcatel.fr", "creation_time": "2001-09-24T10:31:14Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 3797, "is_private": false, "id": 6096, "attachment_id": null, "creator": "bodewig@apache.org", "creation_time": "2001-09-27T04:19:17Z", "time": "2001-09-27T04:19:17Z", "text": "The exclude pattern will be used, but yours doesn't match /tmp/src - patterns\nare always considered to be relative to the dir attribute.\n\nThere is no way to specify a pattern that matches /tmp/src itself (as the\npattern \"\" would be ignored) - this is covered in the WHATSNEW file and the\nrelease notes for Ant 1.4 in the \"Changes that could break older environments\"\nsection:\n\n* A delete task like\n  <delete includeEmptyFilesets=\"true\">\n    <fileset dir=\"somedir\" />\n  </delete>\n  will now remove \"somedir\" as well, unless there are still files left\n  in it (matched by the default excludes).\n  \n"}]