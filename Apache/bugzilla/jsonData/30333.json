[{"count": 0, "tags": [], "bug_id": 30333, "attachment_id": null, "text": "Similar to Bug 2499 - \"A timeout failure does not generate any xml output\".\n\nA simple test to reproduce this problem would be to within a test call\nSystem.exit(256) (or otherwise cause your test to core the jvm).  Ex)\n\n\nimport junit.framework.TestCase;\n                                                                                \npublic class NeatoTest extends TestCase\n{\n    public void testCrash()\n    {\n        System.exit(256);\n    }\n}\n                                                                                \n\n\n****************************************************************************\n\nWe have a complicated build.xml here to run our tests, but to reproduce it\nshould only need:\n\n  <!-- timeout is in milliseconds -->\n  <junit timeout=\"600000\" fork=\"yes\" printsummary=\"yes\" haltonfailure=\"no\"\nshowoutput=\"${show}\" failureproperty=\"test.failure\">\n\n    <formatter type=\"xml\"/>\n    <test name=\"${testSuite}\" todir=\"${reportsDir}\" if=\"testSuite\"/>\n    <batchtest todir=\"${reportsDir}\" unless=\"testSuite\">\n      <fileset dir=\"${classes.dir}\">\n\t<include name=\"${testDir2}/*Test.class\" if=\"testDir2\"/>\n\t<!-- Default case to recurse through all dirs in sf -->\n\t<include name=\"**/*Test.class\" unless=\"testDir2\"/>\n      </fileset>\n    </batchtest>\n  </junit>\n\n  <junitreport todir=\"${reportsDir}\">\n    <fileset dir=\"${reportsDir}\">\n      <include name=\"TEST-*.xml\"/>\n    </fileset>\n    <report format=\"frames\" todir=\"${reportsDir}\"/>\n  </junitreport>\n\n**************************************************************************\n\nIt *seems* that the solution would be something similar to that of Bug 2499, but\nI'm unsure how to test for the jvm crash.  A solution would be to after a test\nis run (perhaps when the failureproperty is being set), check if the TEST-*.xml\nis empty, and if so, fill it with something to say that it failed.  Otherwise\nthe report can't read it (it's invalid xml) and the report doesn't show that\ntest as ever being run (and thus that failure is not reported in the HTML).", "id": 61154, "time": "2004-07-26T22:44:32Z", "creator": "lenore@invidi.com", "creation_time": "2004-07-26T22:44:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 30333, "attachment_id": null, "text": "should be fixed in CVS HEAD, needs some more testing before it gets merged into\n1.6.x.\n", "id": 64694, "time": "2004-10-06T15:00:04Z", "creator": "bodewig@apache.org", "creation_time": "2004-10-06T15:00:04Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 30333, "attachment_id": null, "id": 72391, "time": "2005-03-14T16:35:22Z", "creator": "bodewig@apache.org", "creation_time": "2005-03-14T16:35:22Z", "is_private": false, "text": "*** Bug 27536 has been marked as a duplicate of this bug. ***"}]