[{"count": 0, "tags": [], "text": "I get the follow stack dump when loading a servlet. ( Works fine in Tomcat 3.2.1)\n\njava.lang.ClassCastException: com.supertracker.Servlets.Home.Frame\n\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:740)\n\tat org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:544)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:227)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:977)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:196)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:977)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2041)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)\n\tat org.apache.catalina.valves.ValveBase.invokeNext(ValveBase.java:242)\n\tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:414)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:975)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:159)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:977)\n\tat org.apache.catalina.connector.http.HttpProcessor.process(HttpProcessor.java:818)\n\tat org.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:897)\n\tat java.lang.Thread.run(Thread.java:484)", "is_private": false, "bug_id": 1033, "id": 1394, "time": "2001-03-19T15:27:19Z", "creator": "nigel@lecklogic.com.au", "creation_time": "2001-03-19T15:27:19Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 1033, "attachment_id": null, "id": 1542, "time": "2001-03-21T13:54:40Z", "creator": "craig.mcclanahan@sun.com", "creation_time": "2001-03-21T13:54:40Z", "is_private": false, "text": "So far, I haven't been able to reproduce this.  Can you create a small\ntest case that causes this problem for you, and submit it as an attachment\nto this bug report?\n"}, {"count": 2, "tags": [], "text": "I get similar with the latest version; tomcat installed via RPMS\n(tomcat4-4.0-b3.1.noarch.rpm)\njavax.servlet.ServletException: Class com.ts.app.kiosk.KioskServlet2 is not a\nServlet\n        at java.lang.Throwable.<init>(Throwable.java:96)\n        at java.lang.Exception.<init>(Exception.java:44)\n        at javax.servlet.ServletException.<init>(ServletException.java:132)\n       at\norg.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:790)\n        at\norg.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:583)\n  \n[..]\n----- Root Cause -----\njava.lang.ClassCastException: com.ts.app.kiosk.KioskServlet2\n        at\norg.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:787)\n        at\norg.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:583)\n        at\norg.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java:337)\n        at\norg.apache.catalina.servlets.InvokerServlet.doGet(InvokerServlet.java:144)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\n", "attachment_id": null, "id": 1945, "creator": "dsl@ts.com", "time": "2001-04-20T02:37:35Z", "bug_id": 1033, "creation_time": "2001-04-20T02:37:35Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 1033, "attachment_id": null, "id": 2114, "time": "2001-04-26T04:53:42Z", "creator": "dsl@ts.com", "creation_time": "2001-04-26T04:53:42Z", "is_private": false, "text": "RTFM for me perhaps.  This stuff works correctly for me if the servlet's classes\nare in a WAR file.  Getting tomcat4 to run a plain old simple servlet outside of\nthe war causes the same class cast exception.  Is this expected behaviour\nthough?  Clearly a classloader related problem: where the exception is thrown I\ndid a toString on the classloader, and on the servlet's classloader which gets:\nsun.misc.LaunchStandardClassLoader$AppClassLoader@605f6a8e - for the servlet\nand \nStandardClassLoader\n  available:\n  delegate: false\n  repositories:\n    file:/var/tomcat4/server/lib/catalina.jar\n    file:/var/tomcat4/server/lib/jmxri.jar\n    file:/var/tomcat4/server/lib/regexp.jar\n    file:/var/tomcat4/server/lib/warp.jar\n    file:/var/tomcat4/server/lib/xerces.jar\n  required:\n----------> Parent Classloader:\nStandardClassLoader\n  available:\n  delegate: false\n  repositories:\n    file:/var/tomcat4/common/lib/naming.jar\n    file:/var/tomcat4/common/lib/servlet.jar\n  required:\n----------> Parent Classloader:\nsun.misc.Launcher$AppClassLoader@605f6a8e\n\nfor the classloader of the StandardWrapper.load method.\n"}, {"count": 4, "attachment_id": null, "creator": "craig.mcclanahan@sun.com", "is_private": false, "id": 3591, "time": "2001-07-10T16:47:16Z", "bug_id": 1033, "creation_time": "2001-07-10T16:47:16Z", "tags": [], "text": "Where is the servlet class itself being loaded from?\n\nIt is not valid to have servlets loaded from outside of a web application.  The\nfact that you get the classloader string that you do implies that the servlet\nclass is either in $JAVA_HOME/jre/lib/ext or on the system classpath.\n"}]