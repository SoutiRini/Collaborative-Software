[{"count": 0, "tags": [], "creator": "johne@miles33.co.uk", "attachment_id": null, "id": 1033, "time": "2001-03-07T06:10:34Z", "bug_id": 881, "creation_time": "2001-03-07T06:10:34Z", "is_private": false, "text": "Using the following simple DTD d.dtd\n\n<?xml version='1.0' encoding='UTF-8' ?>\n\n<!--Generated by XML Authority-->\n\n<!ENTITY % global-attributes \" id ID #IMPLIED\">\n<!ELEMENT THINGS (#PCDATA)>\n<!ATTLIST THINGS URL CDATA #REQUIRED >\n\n<!ELEMENT GOODSTUFF (#PCDATA)>\n<!ATTLIST GOODSTUFF %global-attributes;\nURL CDATA #IMPLIED >\n<!ELEMENT TESTS (THINGS , GOODSTUFF)>\n\nand the XML\n\n<?xml version = \"1.0\" encoding = \"UTF-8\"?>\n<!DOCTYPE TESTS SYSTEM \"d.dtd\">\n<TESTS>\n\t<THINGS URL = \"d:/ddd/ddd/dd\">My things are fun</THINGS>\n\t<GOODSTUFF>Mygood</GOODSTUFF>\n</TESTS>\n\n\nThe using the test frame of dom.traversal.TreeWalkerView the \n\n<!ATTLIST GOODSTUFF %global-attributes;\n\ndoes not load the correct 'global-attributes' parameter entity because it has \nbeen orphaned by the line of code (and later overwritten by THINGS) \n\nin src\\org\\apache\\xerces\\parsers\\domparser.java \n\n    public void internalPEDecl(int entityNameIndex, int entityValueIndex) \nthrows Exception {\n\n...\n...\n\n                str.append(\"<!ENTITY % \");\n                str.append(fStringPool.toString(entityNameIndex));\n                str.append(\" \\\"\");\n// bad          str.append(fStringPool.orphanString(entityValueIndex));\n//fix???\n                str.append(fStringPool.toString(entityValueIndex));\n\n\nHope this helps \n\n      John Eliasson - Miles33"}, {"count": 1, "tags": [], "bug_id": 881, "is_private": false, "text": "I really don't understand how you can use the TreeWalkerView to exhibit this \nbug but I agree with your patch, so I checked it in! Thanks.\n\n", "id": 2388, "time": "2001-05-10T08:54:09Z", "creator": "lehors@apache.org", "creation_time": "2001-05-10T08:54:09Z", "attachment_id": null}]