[{"count": 0, "tags": [], "bug_id": 39358, "attachment_id": null, "text": "If define a Realm like this in context.xml in META-INF folder, it will read \nthe class as \"test.SecurityComponentImpl\\InternalUserPrincipal\" not the \none \"test.SecurityComponentImpl$InternalUserPrincipal\". so \nJAASRealm.createPrincipal() method will always return null; then the user will \nnever login into the system.\n\n<Realm className=\"org.apache.catalina.realm.JAASRealm\" \n\t\t\tappName=\"Test\" \n\t\t\n\tuserClassNames=\"test.SecurityComponentImpl$InternalUserPrincipal\" \n\t\t\n\troleClassNames=\"test.SecurityComponentImpl$InternalRolePrincipal\" \n\t\t\tuseContextClassLoader=\"false\" \n\t\t\tdebug=\"0\" />", "id": 88292, "time": "2006-04-19T16:49:06Z", "creator": "jjliu@huawei.com", "creation_time": "2006-04-19T16:49:06Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jjliu@huawei.com", "is_private": false, "text": "Sorry, after the parsing, it will remove the character \"$\" not replace it \nwith \"\\\".\n\nand I found that there is defect in  IntrospectionUtils.replaceProperties() \nmethod.\n\nthis method is used for replease ${NAME} with the property value, but if the \nstring is like this \"test.SecurityComponentImpl$InternalUserPrincipal\", it \nalso will remove the \"$\" character.\n\nThat's the reason for this defect.", "id": 88302, "time": "2006-04-20T05:03:55Z", "bug_id": 39358, "creation_time": "2006-04-20T05:03:55Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "jjliu@huawei.com", "is_private": false, "text": "This is solved in tomcat 5.5.17,  i think.\n\nif (pos == (value.length() - 1)) {\n                sb.append('$');\n                prev = pos + 1;\n            } else if (value.charAt(pos + 1) != '{') {\n                sb.append('$');\n                prev = pos + 1; // XXX\n            } else {\n...", "id": 88303, "time": "2006-04-20T05:25:51Z", "bug_id": 39358, "creation_time": "2006-04-20T05:25:51Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "yoavs@computer.org", "text": "If you provide a patch against 5.0.30 (not 5.5.17), I'll gladly apply it.", "id": 97252, "time": "2006-12-24T19:15:05Z", "bug_id": 39358, "creation_time": "2006-12-24T19:15:05Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "This is fixed in 5.5.x\n5.0.x is no longer supported.", "id": 109576, "time": "2007-10-22T17:52:02Z", "bug_id": 39358, "creation_time": "2007-10-22T17:52:02Z", "attachment_id": null}]