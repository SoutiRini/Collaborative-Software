[{"count": 0, "tags": [], "creator": "rde@webtrak.co.uk", "text": "I want to use the apply taks to make a TAGS file.  The command is like:\n\netags src1 src2 src3 ....\n\nThe output is a single FILE.  The problem is that using apply with a merge mappper\nmeans that only the source files newer than the TAGS file get used in the command.\n\nI want _all_ the files to be used, if _any_ are newer than the output.  Right now\nI have to use a dependset task to delete the file if any sources are newer.  It\nseems to be this could be a common case which should be handled by apply.", "id": 40896, "time": "2003-07-17T11:22:24Z", "bug_id": 21681, "creation_time": "2003-07-17T11:22:24Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "You can store the list of files in a property.\n\n<fileset id=\"fs\" ... />\n<pathconvert property=\"files\" refid=\"fs\" dirsep=\" \"/>\n<apply ...>\n    <arg line=\"${files}\"/>\n    <fileset refid=\"fs\"/>\n</apply>", "attachment_id": null, "id": 40897, "creator": "jan@materne.de", "time": "2003-07-17T11:30:43Z", "bug_id": 21681, "creation_time": "2003-07-17T11:30:43Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 21681, "is_private": false, "text": "Yes, I can list files in a property.  But the point here is using apply in\nconjunction with a merge mapper when a set of input files are combined to make\none output file in a single command.  Currently apply with a merge mapper will\njust use the files which are newer than the output, even if the parallel attribute\nis set to true.\n\nThis is exactly the same as using apply to make (for example) a zip or tar file - \nyou want to list all the input files, even if they are not all newer than the\noutput.", "id": 40898, "time": "2003-07-17T11:42:48Z", "creator": "rde@webtrak.co.uk", "creation_time": "2003-07-17T11:42:48Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "I still can't find a way to do this simply in Ant 1.6.  To recap, I'm trying to\nemulate a make rule like:\n\nTAGS: $(SRC)\n    etags $(SRC)\n\nusing the apply task.  A simple use of apply with a merge mapper will list\ninclude just those files which are more recent than the target.  I want the\napply to run with all the files, if _any_ are newer than the target.\n\nI read the comment below and tried the pathconvert option, but this makes a list\nof files with absolute names; I need the original relative names for this task.\n\nAnother exampe would be using apply to recreate an archive file if any of the\ncontents have been updated - again you have a single target but want to include\nall the files on the command line generated by the apply.\n\nRight now I have to use a dependset to delete the TAGS if any of the files have\nbeen updated; this works fine but is clumsy.", "is_private": false, "id": 50533, "creation_time": "2004-01-14T11:59:50Z", "time": "2004-01-14T11:59:50Z", "creator": "rde@webtrak.co.uk", "bug_id": 21681, "attachment_id": null}, {"count": 4, "tags": [], "text": "You could use outofdate from ant-contrib.", "is_private": false, "id": 50534, "creator": "peter.reilly@corvil.com", "time": "2004-01-14T12:19:22Z", "bug_id": 21681, "creation_time": "2004-01-14T12:19:22Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 21681, "attachment_id": null, "id": 75516, "time": "2005-05-27T15:20:41Z", "creator": "mbenson@apache.org", "creation_time": "2005-05-27T15:20:41Z", "is_private": false, "text": "Using the force attribute (available since Ant 1.6.3) in parallel mode should \naccomplish this.\n\nThanks"}, {"count": 6, "tags": [], "text": "(In reply to comment #5)\n> Using the force attribute (available since Ant 1.6.3) in parallel mode should \n> accomplish this.\n> Thanks\n\nReally? But won't that always run the command, even if *all* files are up-to-\ndate? --DD", "is_private": false, "id": 75557, "creation_time": "2005-05-28T01:32:09Z", "time": "2005-05-28T01:32:09Z", "creator": "ddevienne@lgc.com", "bug_id": 21681, "attachment_id": null}, {"count": 7, "tags": [], "text": "You're right.  :) / :(", "is_private": false, "id": 75648, "creator": "mbenson@apache.org", "time": "2005-05-31T15:58:14Z", "bug_id": 21681, "creation_time": "2005-05-31T15:58:14Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "alexeys@inventigo.com", "text": "It is still possible to use <if><uptodate>... in this situation. <apply> works with one-to-one mapping, anything more complex would require more comlex constructs. I think this bug is still \"resolved\", because there is a solution for the problem.", "id": 75662, "time": "2005-05-31T17:44:42Z", "bug_id": 21681, "creation_time": "2005-05-31T17:44:42Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 21681, "is_private": false, "count": 9, "id": 75665, "time": "2005-05-31T18:57:25Z", "creator": "mbenson@apache.org", "creation_time": "2005-05-31T18:57:25Z", "text": "well, true, once you open up the door to ant-contrib, your most terse solution \nmight be, essentially:\n\n<ac:outofdate>\n  <sequential>\n    <apply force=\"true\" />\n  </sequential>\n</ac:outofdate>\n\nso, yes, we could mark as WORKSFORME."}, {"count": 10, "tags": [], "bug_id": 21681, "attachment_id": 15267, "text": "Created attachment 15267\nAnt build file\n\nThis build file shows how to accomplish this using ant-contrib's outofdate task\nin conjunction with apply's force attribute.  It uses an \"echo\" executable so\nmay not work on windows (worked for me under cygwin and win2k and should work\non unix-type systems).\tAnd of course you need ant-contrib installed as well.", "id": 75811, "time": "2005-06-02T18:31:35Z", "creator": "mbenson@apache.org", "creation_time": "2005-06-02T18:31:35Z", "is_private": false}, {"count": 11, "attachment_id": 15268, "creator": "mbenson@apache.org", "is_private": false, "id": 75813, "time": "2005-06-02T18:33:14Z", "bug_id": 21681, "creation_time": "2005-06-02T18:33:14Z", "tags": [], "text": "Created attachment 15268\nAnt build file\n\noops--previous attachment uses Ant 1.7 features; this attachment should work\nwith current Ant versions."}]