[{"count": 0, "tags": [], "bug_id": 37335, "attachment_id": null, "text": "We have a Windows 2003 cluster config , SQL Server 2K and  using Tomcat 4. \nEvery now again (about 50 times a day)  when an instructor tries to upload a \nfile  in Blackboard 6.2.2 we get a  Error 500 in IE Explorer 6. Closing down \nthe browser and trying again usually works but sometimes the error persists. We \nhave opened a ticket with Bb but  have found out the it's usually quicker to \nget a solution here. I have replicated part of  Tomcat's log below.\nTIA.\nZee Nagre\nWestminster Kingsway College\nLondon WC1 8JB\n\n---------------------------------------------------------------------\n\nStandardWrapperValve[DefaultServlet]: Servlet.service() for servlet \nDefaultServlet threw exception\nblackboard.base.NestedRuntimeException: java.net.SocketException: Connection \nreset by peer: socket write error\n   at blackboard.webapps.content.servlet.ContentFilter.doFilter\n(ContentFilter.java:161)\n   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:213)\n   at org.apache.catalina.core.ApplicationFilterChain.access$000\n(ApplicationFilterChain.java:98)\n   at org.apache.catalina.core.ApplicationFilterChain$1.run\n(ApplicationFilterChain.java:176)\n   at java.security.AccessController.doPrivileged(Native Method)\n   at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:172)\n   at blackboard.platform.servlet.ResponseHeaderFilter.doFilter\n(ResponseHeaderFilter.java:28)\n   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:213)\n   at org.apache.catalina.core.ApplicationFilterChain.access$000\n(ApplicationFilterChain.java:98)\n   at org.apache.catalina.core.ApplicationFilterChain$1.run\n(ApplicationFilterChain.java:176)\n   at java.security.AccessController.doPrivileged(Native Method)\n   at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:172)\n   at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n   at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n   at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2416)\n   at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n   at org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n   at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n   at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n   at blackboard.servletcontainer.tomcat.BbSessionValve.invoke\n(BbSessionValve.java:125)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n   at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n   at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:263)\n   at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:360)\n   at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:604)\n   at org.apache.jk.common.ChannelSocket.processConnection\n(ChannelSocket.java:562)\n   at org.apache.jk.common.SocketConnection.runIt(ChannelSocket.java:679)\n   at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n   at java.lang.Thread.run(Thread.java:534)\nRoot Cause:\njava.net.SocketException: Connection reset by peer: socket write error\n   at java.net.SocketOutputStream.socketWrite0(Native Method)\n   at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)\n   at java.net.SocketOutputStream.write(SocketOutputStream.java:136)\n   at org.apache.jk.common.ChannelSocket.send(ChannelSocket.java:407)\n   at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:599)\n   at org.apache.jk.server.JkCoyoteHandler.doWrite(JkCoyoteHandler.java:218)\n   at org.apache.coyote.Response.doWrite(Response.java:524)\n   at org.apache.coyote.tomcat4.OutputBuffer.realWriteBytes\n(OutputBuffer.java:384)\n   at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:439)\n   at org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:359)\n   at org.apache.coyote.tomcat4.OutputBuffer.writeBytes(OutputBuffer.java:411)\n   at org.apache.coyote.tomcat4.OutputBuffer.write(OutputBuffer.java:398)\n   at org.apache.coyote.tomcat4.CoyoteOutputStream.write\n(CoyoteOutputStream.java:110)\n   at org.apache.catalina.servlets.DefaultServlet.copyRange\n(DefaultServlet.java:1996)\n   at org.apache.catalina.servlets.DefaultServlet.copy(DefaultServlet.java:1745)\n   at org.apache.catalina.servlets.DefaultServlet.serveResource\n(DefaultServlet.java:1073)\n   at org.apache.catalina.servlets.DefaultServlet.doGet(DefaultServlet.java:506)\n   at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n   at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n   at org.apache.catalina.core.ApplicationFilterChain.access$000\n(ApplicationFilterChain.java:98)\n   at org.apache.catalina.core.ApplicationFilterChain$1.run\n(ApplicationFilterChain.java:176)\n   at java.security.AccessController.doPrivileged(Native Method)\n   at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:172)\n   at blackboard.webapps.content.servlet.ContentFilter.doFilter\n(ContentFilter.java:150)\n   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:213)\n   at org.apache.catalina.core.ApplicationFilterChain.access$000\n(ApplicationFilterChain.java:98)\n   at org.apache.catalina.core.ApplicationFilterChain$1.run\n(ApplicationFilterChain.java:176)\n   at java.security.AccessController.doPrivileged(Native Method)\n   at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:172)\n   at blackboard.platform.servlet.ResponseHeaderFilter.doFilter\n(ResponseHeaderFilter.java:28)\n   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:213)\n   at org.apache.catalina.core.ApplicationFilterChain.access$000\n(ApplicationFilterChain.java:98)\n   at org.apache.catalina.core.ApplicationFilterChain$1.run\n(ApplicationFilterChain.java:176)\n   at java.security.AccessController.doPrivileged(Native Method)\n   at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:172)\n   at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n   at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n   at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2416)\n   at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n   at org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n   at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:172)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n   at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n   at blackboard.servletcontainer.tomcat.BbSessionValve.invoke\n(BbSessionValve.java:125)\n   at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n   at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n   at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n   at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n   at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:263)\n   at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:360)\n   at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:604)\n   at org.apache.jk.common.ChannelSocket.processConnection\n(ChannelSocket.java:562)\n   at org.apache.jk.common.SocketConnection.runIt(ChannelSocket.java:679)\n   at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:619)\n   at java.lang.Thread.run(Thread.java:534)", "id": 82068, "time": "2005-11-02T21:19:10Z", "creator": "zee.nagre@westking.ac.uk", "creation_time": "2005-11-02T21:19:10Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 37335, "attachment_id": null, "text": "\"Connection reset by peer\" means that the client closed the connection when the\nserver wasn't expecting it to. This doesn't look like a Tomcat bug to me. I am\nafraid you will have to rely on Bb for a fix.", "id": 82323, "time": "2005-11-10T00:14:59Z", "creator": "markt@apache.org", "creation_time": "2005-11-10T00:14:59Z", "is_private": false}]