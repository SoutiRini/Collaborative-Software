[{"count": 0, "tags": [], "creator": "tysonrudgey@outlook.com", "attachment_id": null, "id": 190339, "time": "2016-04-18T11:45:15Z", "bug_id": 59347, "creation_time": "2016-04-18T11:45:15Z", "is_private": false, "text": "+++ This bug was initially created as a clone of Bug #41435 +++\n\nI'm running into a problem with mod_ldap on Windows.  When I try to authenticate\nwithout passing in a username, I get a 500 server error.  Since the browser\ndoesn't get back a 401, it caches the user's credentials and I have to restart\nthe browser session in order to attempt to login again.\nThis is only happening on Windows, so I'm sure it's a difference (bug?) in the\nMicrosoft LDAP SDK.  Below is a proposed fix on top of Apache 2.2.4.  I added\nthe #if APR_HAS_MICROSOFT_LDAPSDK block.\n\nmodules/ldap/util_ldap.c (line 933):\n    /* try do the search */\n    if ((result = ldap_search_ext_s(ldc->ldap,\n                                    (char *)basedn, scope,\n                                    (char *)filter, attrs, 0,\n                                    NULL, NULL, NULL, -1, &res))\n            == LDAP_SERVER_DOWN)\n    {\n        ldc->reason = \"ldap_search_ext_s() for user failed with server down\";\n        uldap_connection_unbind(ldc);\n        goto start_over;\n    }\n\n#if APR_HAS_MICROSOFT_LDAPSDK\n    if ( result == LDAP_FILTER_ERROR )\n    { // no username was supplied, so fail with invalid credentials\n        /* failure? if so - return */\n        ldc->reason = \"ldap_search_ext_s() to search for user failed\";\n        ldap_msgfree(res);\n        uldap_connection_unbind(ldc);\n        return LDAP_INVALID_CREDENTIALS;\n    }\n#endif\n\n    /* if there is an error (including LDAP_NO_SUCH_OBJECT) return now */\n    if (result != LDAP_SUCCESS) {\n        ldc->reason = \"ldap_search_ext_s() for user failed\";\n        return result;\n    }\n\n\n\nIt would be great if this patch or something with similar affect could be\nincluded in the next Apache 2.2 release.  Thanks.\n,\nJosh."}, {"count": 1, "tags": [], "bug_id": 59347, "attachment_id": null, "text": "doesn't really look like an Ant issue :-)", "id": 190342, "time": "2016-04-18T12:10:29Z", "creator": "bodewig@apache.org", "creation_time": "2016-04-18T12:10:29Z", "is_private": false}, {"count": 2, "tags": [], "creator": "guido.wischrop@mgm-tp.com", "attachment_id": null, "id": 198015, "time": "2017-03-27T16:05:13Z", "bug_id": 59347, "creation_time": "2017-03-27T16:05:13Z", "is_private": false, "text": "Fixed status - sorry wrong bug."}]