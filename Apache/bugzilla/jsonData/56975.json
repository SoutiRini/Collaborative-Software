[{"count": 0, "tags": [], "creator": "raman.batra@live.com", "attachment_id": null, "id": 177796, "time": "2014-09-12T10:23:58Z", "bug_id": 56975, "creation_time": "2014-09-12T10:23:58Z", "is_private": false, "text": "Hi Team,\n\nI am using UBIK plugin for flex. I am able to create scripts successfully without any issue. When i ran the load test run and save the JTL, after completion of load test run JTL file is not opening in any JMeter Listener and we are getting the below error message (stack-trace of log file):\n\"\nError was: com.thoughtworks.xstream.converters.ConversionException: No field 'sample' found in class 'org.apache.jmeter.samplers.SampleSaveConfiguration' : No field 'sample' found in class 'org.apache.jmeter.samplers.SampleSaveConfiguration'\".\n\nBelow is the stack-trace of JTL created after Load Test run:\n\"ERROR - jmeter.reporters.ResultCollector: Error trying to record a sample com.thoughtworks.xstream.core.TreeMarshaller$CircularReferenceException: Recursive reference to parent object\n---- Debugging information ----\nitem-type           : org.apache.jmeter.samplers.SampleResult\nconverter-type      : org.apache.jmeter.save.converters.SampleResultConverter\n-------------------------------\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.convert(TreeMarshaller.java:63)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshallField(AbstractReflectionConverter.java:229)\n\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:208)\n\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.<init>(AbstractReflectionConverter.java:171)\n\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:116)\n\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:72)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.convert(TreeMarshaller.java:70)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\n    at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n\n    at org.apache.jmeter.save.converters.SampleResultConverter.saveSubResults(SampleResultConverter.java:208)\n\n    at org.apache.jmeter.save.converters.SampleResultConverter.marshal(SampleResultConverter.java:119)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.convert(TreeMarshaller.java:70)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.start(TreeMarshaller.java:82)\n\n    at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.marshal(AbstractTreeMarshallingStrategy.java:37)\n\n    at com.thoughtworks.xstream.XStream.marshal(XStream.java:895)\n\n    at org.apache.jmeter.save.SaveService.saveSampleResult(SaveService.java:359)\n\n    at org.apache.jmeter.reporters.ResultCollector.sampleOccurred(ResultCollector.java:535)\n\n    at org.apache.jmeter.threads.ListenerNotifier.notifyListeners(ListenerNotifier.java:84)\n\n    at org.apache.jmeter.threads.JMeterThread.notifyListeners(JMeterThread.java:783)\n\n    at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:388)\n\n    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:257)\n\n    at java.lang.Thread.run(Unknown Source)\"\n\n\nRegards,\n-Raman"}, {"count": 1, "tags": [], "creator": "support@ubikloadpack.com", "attachment_id": null, "id": 177799, "time": "2014-09-12T10:56:13Z", "bug_id": 56975, "creation_time": "2014-09-12T10:56:13Z", "is_private": false, "text": "Hello,\nThis may be of interest for JMeter Team project, these are our Support answers:\n----------------- FIRST ANSWER -----------------\nHello,\nI analyzed your issue and it seems to be caused by this stacktrace, as you can see it seems to point to a JMeter issue in serializing SampleResult to XML due to some circular reference.\nYou would need to find which sample is generating it.\nAs a workaround I suggest you generate CSV instead of XML or try playing with the XML output options.\n\nTo help JMeter Team find the bug cause and fix it, you should open a Bugzilla at :\nhttps://issues.apache.org/bugzilla/buglist.cgi?bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&bug_status=NEEDINFO&bug_severity=Blocker&bug_severity=Critical&bug_severity=Major&bug_severity=Normal&bug_severity=Regression&bug_severity=Minor&bug_severity=Trivial&product=JMeter&cmdtype=doit&order=Bug+Number\n\nProviding the stacktrace, if possible the Sample request/response that leads to this issue.\n\nAs per this http://xstream.10960.n7.nabble.com/Hints-for-Tracking-down-a-CircularReferenceException-td4531.html, JMeter uses the mode that can generate this issue:\nhttps://github.com/apache/jmeter/blob/trunk/src/core/org/apache/jmeter/save/CSVSaveService.java:\n    static {\n        JTLSAVER.setMode(XStream.NO_REFERENCES); // This is needed to stop XStream keeping copies of each class\n    }\nHere is the stacktrace:\n\n014/09/04 15:20:43 ERROR - jmeter.reporters.ResultCollector: Error trying to record a sample com.thoughtworks.xstream.core.TreeMarshaller$CircularReferenceException: Recursive reference to parent object\n---- Debugging information ----\nitem-type           : org.apache.jmeter.samplers.SampleResult\nconverter-type      : org.apache.jmeter.save.converters.SampleResultConverter\n-------------------------------\n    at com.thoughtworks.xstream.core.TreeMarshaller.convert(TreeMarshaller.java:63)\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshallField(AbstractReflectionConverter.java:229)\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.writeField(AbstractReflectionConverter.java:208)\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$2.<init>(AbstractReflectionConverter.java:171)\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doMarshal(AbstractReflectionConverter.java:116)\n    at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.marshal(AbstractReflectionConverter.java:72)\n    at com.thoughtworks.xstream.core.TreeMarshaller.convert(TreeMarshaller.java:70)\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n    at com.thoughtworks.xstream.converters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n    at org.apache.jmeter.save.converters.SampleResultConverter.saveSubResults(SampleResultConverter.java:208)\n    at org.apache.jmeter.save.converters.SampleResultConverter.marshal(SampleResultConverter.java:119)\n    at com.thoughtworks.xstream.core.TreeMarshaller.convert(TreeMarshaller.java:70)\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:58)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.convertAnother(TreeMarshaller.java:43)\n\n    at com.thoughtworks.xstream.core.TreeMarshaller.start(TreeMarshaller.java:82)\n\n    at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.marshal(AbstractTreeMarshallingStrategy.java:37)\n\n    at com.thoughtworks.xstream.XStream.marshal(XStream.java:895)\n\n    at org.apache.jmeter.save.SaveService.saveSampleResult(SaveService.java:359)\n\n    at org.apache.jmeter.reporters.ResultCollector.sampleOccurred(ResultCollector.java:535)\n\n    at org.apache.jmeter.threads.ListenerNotifier.notifyListeners(ListenerNotifier.java:84)\n\n    at org.apache.jmeter.threads.JMeterThread.notifyListeners(JMeterThread.java:783)\n\n    at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:388)\n\n    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:257)\n\n    at java.lang.Thread.run(Unknown Source)\n\n\n\n\n\n----------------------SECOND ANSWER (Further investigation) ------------------\nHello,\nAfter further more analysis, I can guarantee issue is not related to Ubik Load Pack Flex plugin because as you can see in stacktraces:\nat com.thoughtworks.xstream.\nconverters.collections.AbstractCollectionConverter.writeItem(AbstractCollectionConverter.java:64)\n    at org.apache.jmeter.save.converters.SampleResultConverter.saveSubResults(SampleResultConverter.java:208)\n\n\nThis code is only called if there are subresults and our plugin does not create any.\n\nSo issue comes either from JMeter core or third party plugin (you use jmeter_plugins).\nAs a conclusion, a possible workaround is to uncheck Save Sub Results (XML) in View Results Tree \"Configure\"\n\nIf you reproduce it after removing jmeter_plugins, It would be very useful to submit this bug to Apache core JMeter, and if not to jmeter_plugins project.\n\nRegards\n------------------------------------------------------------------------------"}, {"count": 2, "tags": [], "bug_id": 56975, "text": "@Raman did you make a test after removing jmeter-plugins ?\nCould you provide some log files and Sample Result file after removing any confidential information ?\n\n@JMeter Team : Sorry if it's not the place for this discussion.\nIf it's not then feel free to close issue.\n\nThank you", "id": 177800, "attachment_id": null, "creator": "support@ubikloadpack.com", "creation_time": "2014-09-12T10:57:46Z", "time": "2014-09-12T10:57:46Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 56975, "attachment_id": null, "text": "@UbikLoadPack Support: i tried it without using jmeter-plugins too and still observing the same issue.", "id": 177804, "time": "2014-09-12T11:53:03Z", "creator": "raman.batra@live.com", "creation_time": "2014-09-12T11:53:03Z", "is_private": false}, {"count": 4, "tags": [], "text": "Please provide the smallest possible test script that causes the issue, together with the generated JTL file and jmeter.log file.\n\nIf necessary, redact the files to change URLs etc, but don't change the structure of the files. Please check that that redacted JTL file still causes the issue.", "is_private": false, "bug_id": 56975, "id": 177839, "time": "2014-09-12T22:11:11Z", "creator": "sebb@apache.org", "creation_time": "2014-09-12T22:11:11Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "support@ubikloadpack.com", "text": "Created attachment 32018\nPatch to add more informations when exception occurs\n\nHello,\nPleae find attached a patch that adds more information when this kind of exception occurs.\nThis will help locate the Sampler in fault and give as much information as possible.\n\nWe hope this can be shipped in next version.\nThanks\nRegards", "id": 177844, "time": "2014-09-13T12:18:24Z", "bug_id": 56975, "creation_time": "2014-09-13T12:18:24Z", "is_private": false, "attachment_id": 32018}, {"count": 6, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Date: Sun Sep 14 14:08:19 2014\nNew Revision: 1624851\n\nURL: http://svn.apache.org/r1624851\nLog:\nBug 56975 - Error when opening JTL(XML) file (that saves sub samplers results) due to TreeMarshaller$CircularReferenceException: Recursive reference to parent object\nAdding more infos when error occurs (UbikLoadPack patch)\nBugzilla Id: 56975\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/save/SaveService.java", "id": 177857, "time": "2014-09-14T14:09:57Z", "bug_id": 56975, "creation_time": "2014-09-14T14:09:57Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "creator": "raman.batra@live.com", "attachment_id": null, "id": 177866, "time": "2014-09-15T05:41:54Z", "bug_id": 56975, "creation_time": "2014-09-15T05:41:54Z", "is_private": false, "text": "Hi Sebb,\n\nPlease find attached required files at location 'https://www.dropbox.com/s/vlfx44wgw7gwbgq/Test_JTL.zip?dl=0'.\n\nThanks"}, {"count": 8, "tags": [], "creator": "support@ubikloadpack.com", "attachment_id": null, "id": 177883, "time": "2014-09-15T13:41:12Z", "bug_id": 56975, "creation_time": "2014-09-15T13:41:12Z", "is_private": false, "text": "Hello,\nFor information, with provided patch, customer ran again his test and we were able to narrow the issue.\nIt was happening on TransactionController when Generate Parent Sample was checked and only in this case.\n\nIt was related to wrong converter used for serialization of our custom SampleResult implementation.\nWe were able to provide a fix.\n\nThanks for integrating our patch which will be very useful to narrow this kind of issues.\n\nRegards\nUbik Load Pack Support Team"}]