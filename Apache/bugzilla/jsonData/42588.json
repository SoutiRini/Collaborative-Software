[{"count": 0, "tags": [], "text": "The manual entry for return codes contains the following sentence:\n\n\"the ant start up scripts (in their Windows and Unix version) return the return\ncode of the java program. So a successful build returns 0, failed builds return\nother values.\"\n\nAt no point is a list given of what these other return codes are.\n\nAs a result, it is not possible to debug or analyse failures in ant scripts with\nrunning ant in a debugger.", "attachment_id": null, "id": 104076, "creator": "minfrin@sharp.fm", "time": "2007-06-05T06:11:07Z", "bug_id": 42588, "creation_time": "2007-06-05T06:11:07Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 42588, "text": "Normally error code of one is used, - unless\nthe reason is due to a process failing, in which\ncase the error code of that process is used.\n\nUse -verbose to get more info on the command-line\nused (if this is the cause).\n\nI have added a small note to the manual:\n For the most part error code of 1\nis used for failed builds, however if the cause of the error is an external\nprocess, the\nerror code of that process will be propagated.\n", "id": 104079, "time": "2007-06-05T06:38:51Z", "creator": "peterreilly@apache.org", "creation_time": "2007-06-05T06:38:51Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 42588, "attachment_id": null, "text": "- The exit codes vary from platform to platform...even if we exit -1 on Java, on\na SYSV system that would come out as 255. \n\n- similarly, if java itself fails, its with whatever reason java chose to fail.\nthese are platform specific. \n\n- Partly its laziness, we'd have to find every constructor of ExitStatus and\ndetermine which error code is raised.\n\n- and finally its complexity: there is nothing to stop tasks triggering an exit\nif they try hard enough (throwing their own ExitStatus).\n\nSo all we could do at best it make a list of some possible failures you may see,\nwith the caveats that they may different on different platforms/java versions.\nThe 0==success rule is the only thing we can guarantee.\n\nif you are debugging, I suggest you look at the following classes for more\ndetails of what is going on.\n\nhttp://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/launch/Launcher.java?view=markup\nhttp://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/Main.java?view=markup\nhttp://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/ExitStatusException.java?view=markup\n\nPeter: Launcher exits with a 2 for trouble, Main with a 1. so you can sort of\ndetermine the origin...those values may be different by the time they go through\nthe .bat file though, the win9x one loses most of the data.\n\nSomeone could volunteer to define some exit codes, preferably in AntMain, as the\nlauncher imports that file. We'd then be able to have have the built in exit\ncodes formalised in the javadocs.\n\n", "id": 104080, "time": "2007-06-05T06:47:44Z", "creator": "stevel@apache.org", "creation_time": "2007-06-05T06:47:44Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 42588, "text": "Opps, Yes I did not see launcher,\n\nI will pull the change made and mark this as wont fix.\n", "id": 104081, "time": "2007-06-05T06:54:33Z", "creator": "peterreilly@apache.org", "creation_time": "2007-06-05T06:54:33Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 42588, "attachment_id": null, "id": 104082, "time": "2007-06-05T06:54:54Z", "creator": "peterreilly@apache.org", "creation_time": "2007-06-05T06:54:54Z", "is_private": false, "text": "See #2"}, {"count": 5, "tags": [], "bug_id": 42588, "attachment_id": null, "text": "To beat the living ##@% out of this dead horse, note that the error code can be buildfile-specific by using \n<fail status=\"666\" /> or what-have-you...", "id": 104085, "time": "2007-06-05T07:34:15Z", "creator": "mbenson@apache.org", "creation_time": "2007-06-05T07:34:15Z", "is_private": false}]