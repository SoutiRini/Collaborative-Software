[{"count": 0, "tags": [], "creator": "whisp@users.sf.net", "text": "Fop 0.20.1 reports 'ERROR: The id \"b2\" already exists in this document' on\nexecuting \"java org.apache.fop.apps.Fop spanbug.fo spanbug.pdf\" with the input file\n\nspanbug.fo:\n------------------------------------------------------------\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\n<fo:root xmlns:fo=\"http://www.w3.org/1999/XSL/Format\">\n\t<fo:layout-master-set>\n\t\t<fo:simple-page-master master-name=\"first\">\n\t\t\t<fo:region-body column-count=\"2\" column-gap=\"5mm\"/>\n\t\t</fo:simple-page-master>\n\n\t\t<fo:page-sequence-master master-name=\"standard\">\n\t\t\t<fo:repeatable-page-master-reference master-name=\"first\" />\n\t\t</fo:page-sequence-master>\n\t</fo:layout-master-set>\n\n\t<fo:page-sequence master-name=\"standard\">\n\t\t<fo:flow flow-name=\"xsl-region-body\">\n\n\t\t\t<fo:block id=\"b1\" span=\"all\" text-align=\"center\">\n\t\t\t\tBlock 1\n\t\t\t</fo:block>\n\n\t\t\t<!-- If you add a span=\"all\" here, the error does not occur! -->\n\t\t\t<fo:block id=\"b2\" text-align=\"center\">\n\t\t\t\tBlock 2\n\t\t\t</fo:block>\n\n\t\t\t<fo:block id=\"b3\" span=\"all\" text-align=\"center\">\n\t\t\t\tBlock 3\n\t\t\t</fo:block>\n\n\t\t\t<fo:block id=\"b4\"  text-align=\"center\">\n\t\t\t\tBlock 4\n\t\t\t</fo:block>\n\n\t\t</fo:flow>\n\t</fo:page-sequence>\n</fo:root>\n\n------------------------------------------------------------\n\nIf the second block has a span=\"all\" attribute like the first and the third,\nfop proceeds without error and produced the correct output.\n\nSince usage of the id-attribute and of alternating spanning / non spanning\nblocks is quite important for large documents, books, etc., i think this is a\nserious problem.", "id": 5206, "time": "2001-09-07T09:28:11Z", "bug_id": 3497, "creation_time": "2001-09-07T09:28:11Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "dave.carlson@westgroup.com", "text": "I have just run into this bug when there is a span=\"1\".  Prior to this week I \ndid not use span in my block tags.  Adding them (spans) this week has resulted \nsome docs failing with the id already exists error.\n\n", "id": 7213, "time": "2001-10-26T12:26:02Z", "bug_id": 3497, "creation_time": "2001-10-26T12:26:02Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "nancyd@spiders.com", "attachment_id": 1606, "text": "Created attachment 1606\nPossible fix, for ids associated with <fo:block>", "id": 13887, "time": "2002-04-17T18:20:30Z", "bug_id": 3497, "creation_time": "2002-04-17T18:20:30Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 3497, "attachment_id": null, "text": "As far as I have been able to tell, this is due to FOP having to \nreconsider how it is laying out the elements on the page.  It starts\nfilling up one column, then encounters the span=\"all\" block so it has\nto rebalance what came before.  It rolls back the layout, but leaves\nany id registered so far still registered.\n\nThe solution is to make sure that ids are unregistered after a rollback.\n\nThe attached patch fixes the problem when the id that supposedly exists\nbelongs to a <fo:block>.  A better solution would fix the problem for\nall the objects that call IDReferences().createID().  The patch was\ncreated against version 0.20.3\n\n", "id": 13888, "time": "2002-04-17T18:23:10Z", "creator": "nancyd@spiders.com", "creation_time": "2002-04-17T18:23:10Z", "is_private": false}, {"count": 4, "tags": [], "creator": "Barnaby@EchelonL.com", "text": "Created attachment 8169\nUpdated patch for FOP 0.20.5", "id": 44067, "time": "2003-09-11T19:56:47Z", "bug_id": 3497, "creation_time": "2003-09-11T19:56:47Z", "is_private": false, "attachment_id": 8169}, {"count": 5, "tags": [], "bug_id": 3497, "text": "I have attached an updated version of the patch for 0.20.5. Is there a reason \nthis patch hasn\u2019t made it into the main releases? It seems to, at least partly, \nsolve a quite major bug.", "id": 44068, "time": "2003-09-11T19:58:44Z", "creator": "Barnaby@EchelonL.com", "creation_time": "2003-09-11T19:58:44Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 3497, "attachment_id": null, "text": "*** Bug 23256 has been marked as a duplicate of this bug. ***", "id": 44317, "time": "2003-09-18T21:52:58Z", "creator": "j3322ptm@yahoo.de", "creation_time": "2003-09-18T21:52:58Z", "is_private": false}, {"count": 7, "attachment_id": null, "creator": "conal.tuohy@vuw.ac.nz", "is_private": false, "id": 71154, "time": "2005-02-18T05:33:26Z", "bug_id": 3497, "creation_time": "2005-02-18T05:33:26Z", "tags": [], "text": "Any chance that some kind committer will commit this patch? The patch has been\nlanguishing for ALMOST THREE YEARS, which is quite a while in \"internet time\" :-)\n\nI have applied it and it fixed a bug for me too (NB the bug is not dependent on\nspan=\"all\"). \n\nBut it would be nice not to have to maintain a private build of FOP. I would\nlike to see it fixed in Cocoon, but this will have to wait for an official FOP\nrelease."}, {"count": 8, "tags": [], "creator": "vhennebert@gmail.com", "text": "Fixed since at least version 0.93", "id": 109582, "time": "2007-10-23T02:40:42Z", "bug_id": 3497, "creation_time": "2007-10-23T02:40:42Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 3497, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155608, "time": "2012-04-01T06:30:34Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:30:34Z", "is_private": false, "attachment_id": null}]