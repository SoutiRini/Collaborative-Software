[{"count": 0, "tags": [], "bug_id": 16106, "is_private": false, "id": 29396, "attachment_id": null, "creator": "Conrad@Pino.com", "creation_time": "2003-01-15T12:43:35Z", "time": "2003-01-15T12:43:35Z", "text": "Steps to Reproduce:\n 0. Setup environment, .profile, etc.\n 1. Unpack distribution tar ball.\n 2. Edit tomcat-users.xml to make tomcat an admin.\n 3. Run startup.sh script.\n 4. Navigate to Administration Tool main page.\n 5. Click \"Commit Changes\" button.\n 6. Run shutdown.sh script.\n 7. Run startup.sh script.\n 8. Application stops after logging an exception.\n 9. Rollback \"server.xml\" to prior version.\n10. Run startup.sh script.\n11. Normal operation resumes.\n\nBuild Date & Platform:\nUnknown, I installed from binary distribution release.\n\nAdditional Information:\nUNIX: Sun Solaris 8 Intel 4/01 media with latest recommended patches.\nJava: Installed during operating system intallation.\n      java version \"1.2.2\"\n      Solaris VM (build Solaris_JDK_1.2.2_07a, native threads, sunwjit)\nHardware: Compaq ProSignia 720, 400 MHz Pentium II, 512Meg RAM\nUser: Non-root user account.\n\nhttp://www.pino.com/tomcat4/startup-crash.zip contains .profile,\nhome dir listing, key conf dir files and complete logs.\n\nHappy to answer questions by e-mail or phone (510) 848-3929.\nWill provide access to system for testing via SSH if requested.\n\nBest regards,\n\nConrad Pino\n=====================================================================\n[INFO] Registry - -Loading registry information\n[INFO] Registry - -Creating new Registry instance\n[INFO] Registry - -Creating MBeanServer\njava.lang.IllegalAccessException: org/apache/catalina/core/StandardContextValve\n\tat java.lang.Class.newInstance0(Native Method)\n\tat java.lang.Class.newInstance0(Compiled Code)\n\tat java.lang.Class.newInstance(Compiled Code)\n\tat org.apache.commons.digester.ObjectCreateRule.begin(Compiled Code)\n\tat org.apache.commons.digester.Digester.startElement(Compiled Code)\n\tat org.apache.xerces.parsers.AbstractSAXParser.startElement(Compiled \nCode)\n\tat org.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement\n(Compiled Code)\n\tat org.apache.xerces.impl.XMLNamespaceBinder.emptyElement(Compiled Code)\n\tat \norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Compiled \nCode)\n\tat \norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.\ndispatch(Compiled Code)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument\n(Compiled Code)\n\tat org.apache.xerces.parsers.DTDConfiguration.parse\n(DTDConfiguration.java:525)\n\tat org.apache.xerces.parsers.DTDConfiguration.parse\n(DTDConfiguration.java:581)\n\tat org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:152)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse\n(AbstractSAXParser.java:1175)\n\tat org.apache.commons.digester.Digester.parse(Digester.java:1495)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:449)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat java.lang.reflect.Method.invoke(Compiled Code)\n\tat org.apache.catalina.startup.Bootstrap.main(Compiled Code)\n[ERROR] Digester - -Begin event threw exception \n<java.lang.IllegalAccessException: \norg/apache/catalina/core/StandardContextValve>\nCatalina.start: java.lang.IllegalAccessException: \norg/apache/catalina/core/StandardContextValve\njava.lang.IllegalAccessException: org/apache/catalina/core/StandardContextValve\n\tat java.lang.Throwable.fillInStackTrace(Native Method)\n\tat java.lang.Throwable.fillInStackTrace(Compiled Code)\n\tat java.lang.Throwable.<init>(Compiled Code)\n\tat java.lang.Exception.<init>(Compiled Code)\n\tat org.xml.sax.SAXException.<init>(SAXException.java:78)\n\tat org.xml.sax.SAXParseException.<init>(SAXParseException.java:84)\n\tat org.apache.commons.digester.Digester.createSAXException\n(Digester.java:2312)\n\tat org.apache.commons.digester.Digester.createSAXException(Compiled \nCode)\n\tat org.apache.commons.digester.Digester.startElement(Compiled Code)\n\tat org.apache.xerces.parsers.AbstractSAXParser.startElement(Compiled \nCode)\n\tat org.apache.xerces.parsers.AbstractXMLDocumentParser.emptyElement\n(Compiled Code)\n\tat org.apache.xerces.impl.XMLNamespaceBinder.emptyElement(Compiled Code)\n\tat \norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Compiled \nCode)\n\tat \norg.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.\ndispatch(Compiled Code)\n\tat org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument\n(Compiled Code)\n\tat org.apache.xerces.parsers.DTDConfiguration.parse\n(DTDConfiguration.java:525)\n\tat org.apache.xerces.parsers.DTDConfiguration.parse\n(DTDConfiguration.java:581)\n\tat org.apache.xerces.parsers.XMLParser.parse(XMLParser.java:152)\n\tat org.apache.xerces.parsers.AbstractSAXParser.parse\n(AbstractSAXParser.java:1175)\n\tat org.apache.commons.digester.Digester.parse(Digester.java:1495)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:449)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:400)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:180)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat java.lang.reflect.Method.invoke(Compiled Code)\n\tat org.apache.catalina.startup.Bootstrap.main(Compiled Code)"}, {"count": 1, "tags": [], "text": "Created attachment 4428\nZip file with .profile, conf & log files.", "attachment_id": 4428, "bug_id": 16106, "id": 29397, "time": "2003-01-15T12:45:37Z", "creator": "Conrad@Pino.com", "creation_time": "2003-01-15T12:45:37Z", "is_private": false}, {"count": 2, "tags": [], "text": "We've seen this same problem on Tru64 UNIX.  Tracked it down to a bogus\nstring comparison in org/apache/catalina/core/StandardServer.java, here's\na fix:\n\n*** StandardServer.java.orig    Mon Feb  3 16:01:21 2003\n--- StandardServer.java    Mon Feb  3 16:02:59 2003\n***************\n*** 930,936 ****\n      private boolean isSkippable(String className) {\n\n          for (int i = 0; i < skippables.length; i++) {\n!             if (skippables[i] == className) {\n                  return (true);\n              }\n          }\n--- 930,936 ----\n      private boolean isSkippable(String className) {\n\n          for (int i = 0; i < skippables.length; i++) {\n!             if (skippables[i].equals(className)) {\n                  return (true);\n              }\n          }\n", "is_private": false, "id": 30599, "creator": "Richard.June@hp.com", "time": "2003-02-03T22:00:42Z", "bug_id": 16106, "creation_time": "2003-02-03T22:00:42Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "The patch is applied.  Please reopen the bug if the fix doesn't solve the problem.", "is_private": false, "id": 30604, "creator": "amyroh@apache.org", "time": "2003-02-03T23:16:34Z", "bug_id": 16106, "creation_time": "2003-02-03T23:16:34Z", "attachment_id": null}]