[{"count": 0, "tags": [], "creator": "vbloise@comcast.net", "text": "In processing the filter chain in a class that implements the Filter \ninterface, the request parameter has a null session and nulled out parameters. \nThis only happens after the first use of the filter. The first time the filter \nis executed the session is populated and everything works.", "id": 69583, "time": "2005-01-12T10:46:38Z", "bug_id": 33058, "creation_time": "2005-01-12T10:46:38Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "I don't understand what your problem is. Please submit a ready to test war.", "id": 69584, "time": "2005-01-12T11:02:23Z", "bug_id": 33058, "creation_time": "2005-01-12T11:02:23Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "vbloise@comcast.net", "text": "The linked war file (http://www.vincebloise.info/bfg.war) contains the source \nas well as class files. Please run the application and notice how the Filter \nimplementation request has a null session when filtering from the main.jsp \npage.\n\nThe application asks for a user id and password, but it will take anything in \nthese fields.", "id": 69634, "time": "2005-01-13T15:01:28Z", "bug_id": 33058, "creation_time": "2005-01-13T15:01:28Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 33058, "is_private": false, "id": 69635, "attachment_id": null, "creator": "remm@apache.org", "creation_time": "2005-01-13T15:03:42Z", "time": "2005-01-13T15:03:42Z", "text": "I cannot access your test case. Please attach it to the bug report (it's quite\neasy to do)."}, {"count": 4, "tags": [], "bug_id": 33058, "attachment_id": null, "text": "I got the \"test case\" (which is an anything but minimal JSF-Struts webapp :( ;\nthis is not a user support forum, and we don't do\nfind-whatever-is-wrong-in-your-webapp work), and I still do not understand what\nthe problem could be. Please state clearly what the problem is.\n\nOverall, I doubt there's a bug with session handling.", "id": 69642, "time": "2005-01-13T18:22:27Z", "creator": "remm@apache.org", "creation_time": "2005-01-13T18:22:27Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 33058, "attachment_id": null, "text": "(In reply to comment #4)\n> I got the \"test case\" (which is an anything but minimal JSF-Struts webapp :( ;\n> this is not a user support forum, and we don't do\n> find-whatever-is-wrong-in-your-webapp work), and I still do not understand \nwhat\n> the problem could be. Please state clearly what the problem is.\n> Overall, I doubt there's a bug with session handling.\n\n(In reply)\nThe problem:\n\nAn object is placed in the session scope via HttpSession = request.getSession() \nsession.setAttribute(...) in a servlet. That servlet then forwards the request \nto a JSP page in a directory that is monitored by a filter servlet. The filter \nservlet attempts to retrieve the session attribute from the request via \nsession.getSessionAttribute(...) and finds that the request's session has all \nits attributes set to null.\n", "id": 69643, "time": "2005-01-13T19:01:05Z", "creator": "vbloise@comcast.net", "creation_time": "2005-01-13T19:01:05Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 33058, "is_private": false, "text": "Then, this works for me. Please do not reopen the report.", "id": 69645, "time": "2005-01-13T19:07:48Z", "creator": "remm@apache.org", "creation_time": "2005-01-13T19:07:48Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 33058, "attachment_id": null, "text": "i have also tried this out for you. i wrote 1 basic servlet that acquired the \nsession and added a String attribute, 1 basic filter that attempted to acquire \nthat attribute from the session, and 1 jsp that was forwarded to using a \nRequestDispatcher from the basic servlet after the session attribute was added. \nthis was configured in web.xml with a filter-mapping using a url-pattern for \nthe location of the jsp, i.e /tests/33058.jsp. the jsp also tries to output the \nsession attribute.\n\ntest 1 revealed that the filter is not even touched when the basic servlet is \nrequested. the jsp is arrived at however, and does output the correct session \nattribute.\n\ni consulted the servlet 2.4 specification and found that in 2.4 you add an \nelement called \"dispatcher\" to the filter-mapping so that RequestDispatchers \nwork with the url-pattern (section 6.2.5)\n\ni change the filter-mapping to \n\n<filter-mapping>\n  <filter-name>Basic Filter</filter-name>\n  <url-pattern>/views/test/*</url-pattern>\n  <dispatcher>FORWARD</dispatcher>\n</filter-mapping>\n\nrunning this test reveals that the filter _can_ access the session value:\n\nString myAttribute = (String) ((HttpServletRequest) request).\n  getSession().getAttribute(\"myAttribute\");\n\nhope this helps.\n", "id": 69668, "time": "2005-01-14T10:44:13Z", "creator": "allistair.crossley@qas.com", "creation_time": "2005-01-14T10:44:13Z", "is_private": false}]