[{"count": 0, "tags": [], "bug_id": 57275, "attachment_id": null, "id": 179330, "time": "2014-11-27T13:32:35Z", "creator": "optimusprimed@live.co.uk", "creation_time": "2014-11-27T13:32:35Z", "is_private": false, "text": "We use the isapi_redirect.dll 1.2.40 (401920 bytes) from Adobe with ColdFusion 10 on Windows 2012R2/IIS 8.5. The previous connector that Adobe released (update 14) caused a IIS application pool crash for us, and so Adobe released a DLL to address our particular scenario.\n\nThroughout the day, the log will fill with these errors:\n\n[Thu Nov 27 13:20:38.621 2014] [21352:21236] [error] isapi_write_client::jk_isapi_plugin.c (1400): WriteClient failed with 995 (0x000003e3)\n[Thu Nov 27 13:20:38.655 2014] [21352:21236] [info] ajp_process_callback::jk_ajp_common.c (2089): Writing to client aborted or client network problems\n[Thu Nov 27 13:20:38.701 2014] [21352:21236] [info] ajp_service::jk_ajp_common.c (2795): (cfusion) sending request to tomcat failed (unrecoverable), because of client write error (attempt=1)\n[Thu Nov 27 13:20:38.743 2014] [21352:21236] [info] HttpExtensionProc::jk_isapi_plugin.c (2603): service() failed because client aborted connection\n[Thu Nov 27 13:20:39.669 2014] [21352:15436] [error] start_response::jk_isapi_plugin.c (1271): HSE_REQ_SEND_RESPONSE_HEADER failed with error=87 (0x00000057)\n[Thu Nov 27 13:20:39.700 2014] [21352:15436] [error] isapi_write_client::jk_isapi_plugin.c (1400): WriteClient failed with 1229 (0x000004cd)\n[Thu Nov 27 13:20:39.721 2014] [21352:15436] [info] ajp_process_callback::jk_ajp_common.c (2089): Writing to client aborted or client network problems\n[Thu Nov 27 13:20:39.829 2014] [21352:15436] [info] ajp_service::jk_ajp_common.c (2795): (cfusion) sending request to tomcat failed (unrecoverable), because of client write error (attempt=1)\n[Thu Nov 27 13:20:39.868 2014] [21352:15436] [info] HttpExtensionProc::jk_isapi_plugin.c (2603): service() failed because client aborted connection\n\n\nWe have dynamic and static compression enabled on the server, but disabling both/either does not stop the error. We have tried to tune the connector with various settings (increasing/decreating timeouts/threads etc) and still nothing will stop the errors.\n\nIn addition, the log level of the connector is not adhered to. We have log_level set to \"info\", yet we see \"error\", \"warn\" and \"info\".\n\nOur settings:\n\nisapi_redirect.properties:\n\nworker.list=cfusion\nworker.cfusion.type=ajp13\nworker.cfusion.host=localhost\nworker.cfusion.port=8012\nworker.cfusion.max_reuse_connections=250\nworker.cfusion.connection_pool_size=500\nworker.cfusion.connection_pool_timeout=60\n\nworkers.properties:\n\nextension_uri=/jakarta/isapi_redirect.dll\nlog_file=C:\\ColdFusion10\\config\\wsconfig\\2\\isapi_redirect.log\nlog_level=info\nworker_file=C:\\ColdFusion10\\config\\wsconfig\\2\\workers.properties\nworker_mount_file=C:\\ColdFusion10\\config\\wsconfig\\2\\uriworkermap.properties\niis_buffer_enable=true\n\nPlease can someone tell me if this version of the connector has an issue/bug?"}, {"attachment_id": null, "tags": [], "bug_id": 57275, "text": "The messages that you observed are normal when the connection between the client and IIS can no longer be used to write back the response. This could either mean your response generation is very slow, so that users have already reloaded the page or changed to another page, or you have a network stability problem.\n\nWindows error codes 995 and 1229 are documented as\n\n\n\n    995 (0x3E3)\n\n    The I/O operation has been aborted because of either a thread exit or an application request.\n\n\nand\n\n\n\n    1229 (0x4CD)\n\n    An operation was attempted on a nonexistent network connection.\n\n\n\nSee also here\n\nhttp://msdn.microsoft.com/en-us/library/windows/desktop/ms681388%28v=vs.85%29.aspx\n\n\nConcerning the log level: if you choose some log level, you will always get the messages for that log level and all more serious log levels. That's normal product behavior. If you don't want \"info\", increase configured log level to \"warn\" etc.\n\nPlease continue this discussion if needed on the tomcat users list:\n\nhttp://tomcat.eu.apache.org/lists.html\n\nBugzilla is not a support forum.\n\nThanks\n\nRainer", "count": 1, "id": 179368, "time": "2014-11-29T17:37:07Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2014-11-29T17:37:07Z", "is_private": false}, {"count": 2, "tags": [], "text": "\"Concerning the log level: if you choose some log level, you will always get the messages for that log level and all more serious log levels. That's normal product behavior. If you don't want \"info\", increase configured log level to \"warn\" etc.\"\n\nNot for us, Rainer. We have log_level \"error\" and we get \"info\" and \"warn\" as well as \"error\". So much for normal product behaviour. That is a bug, is it not?", "is_private": false, "bug_id": 57275, "id": 179379, "time": "2014-11-30T07:27:48Z", "creator": "optimusprimed@live.co.uk", "creation_time": "2014-11-30T07:27:48Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "rainer.jung@kippdata.de", "is_private": false, "id": 179380, "creation_time": "2014-11-30T11:18:52Z", "time": "2014-11-30T11:18:52Z", "bug_id": 57275, "text": "(In reply to optimusprimed from comment #2)\n> \"Concerning the log level: if you choose some log level, you will always get\n> the messages for that log level and all more serious log levels. That's\n> normal product behavior. If you don't want \"info\", increase configured log\n> level to \"warn\" etc.\"\n> \n> Not for us, Rainer. We have log_level \"error\" and we get \"info\" and \"warn\"\n> as well as \"error\". So much for normal product behaviour. That is a bug, is\n> it not?\n\nYou originally write \"In addition, the log level of the connector is not adhered to. We have log_level set to \"info\", yet we see \"error\", \"warn\" and \"info\".\" and also your configuration shows it set to \"info\". In that case it is normal, that info, warn and error occur.\n\nIf you have changed in the meantime to \"error\" and the behavior didn't change, then I suspect that the configuration is not found or used. Setting the log level works since many years.\n\nIt also seems you flipped the configuration file names in your original problem report.", "attachment_id": null}]