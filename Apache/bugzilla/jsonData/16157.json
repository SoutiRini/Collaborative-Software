[{"count": 0, "tags": [], "bug_id": 16157, "is_private": false, "id": 29496, "creation_time": "2003-01-16T05:54:01Z", "time": "2003-01-16T05:54:01Z", "creator": "TonyWhite@worldlingo.com.au", "text": "The AuthType is not being set on the HttpServletRequest when using JK2 between \nApache and Tomcat.  I believe it should most likely be set on/around line 255 \nof CoyoteAdapter.java", "attachment_id": null}, {"count": 1, "tags": [], "text": "The problem seems to also exist in version 4.1.19.", "attachment_id": null, "id": 29690, "creator": "TonyWhite@worldlingo.com.au", "time": "2003-01-20T02:20:24Z", "bug_id": 16157, "creation_time": "2003-01-20T02:20:24Z", "is_private": false}, {"count": 2, "tags": [], "text": "Calls to the method getAuthType() on the class HttpServletRequest still fail to \nreturn the correct value with jakarta tomcat 4.1.24 and its appropriate \nconnectors.", "attachment_id": null, "id": 33724, "creator": "TonyWhite@worldlingo.com.au", "time": "2003-03-25T01:31:49Z", "bug_id": 16157, "creation_time": "2003-03-25T01:31:49Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 16157, "text": "Calls to \"getUserPrincipal()\" also fail meaning that you cannot get the \nusername that was used for the Apache 'basic' authentication,  however the \nmethods (getUserPrincipal, getAuthType)  do work with \"Apache Tomcat/4.0.3\".", "count": 3, "id": 33803, "time": "2003-03-26T01:33:06Z", "creator": "TonyWhite@worldlingo.com.au", "creation_time": "2003-03-26T01:33:06Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 16157, "text": "i think you need to set the request.tomcatAuthentication=false, in you \njk2.properties files, please try this recipe, to is anything changes..", "count": 4, "id": 34638, "time": "2003-04-07T19:14:51Z", "creator": "nacho@apache.org", "creation_time": "2003-04-07T19:14:51Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 16157, "is_private": false, "count": 5, "id": 34666, "time": "2003-04-08T05:13:51Z", "creator": "TonyWhite@worldlingo.com.au", "creation_time": "2003-04-08T05:13:51Z", "text": "Well that seemed to help with the UserPrincipal but AuthType is still NULL.\n\nResults of printing out req.getUserPrincipal() and req.getAuthType() are shown \nbelow.\n\nOutput from Tomcat 4.0.3:\n[08/04/2003 15:04:53:828 EST] User principal is xyz\n[08/04/2003 15:04:53:829 EST] AuthType is Basic\n\nOutput from Tomcat 4.1.24:\n[08/04/2003 15:07:37:864 EST] User principal is CoyotePrincipal[xyz]\n[08/04/2003 15:07:37:865 EST] AuthType is null\n\nAs you can see even the Principal is not exactly the same...\n\nI am open to any other ideas you might suggest?"}, {"count": 6, "tags": [], "text": "Created attachment 5732\nThe patch which fixed this problem.", "attachment_id": 5732, "id": 34788, "creator": "super-creek@jcom.home.ne.jp", "time": "2003-04-09T12:11:22Z", "bug_id": 16157, "creation_time": "2003-04-09T12:11:22Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 16157, "text": "Even if \"request.tomcatAuthentication=false\" is set in the configuration \nfile \"jk2.properties\", this bug always occurs.\nBecause the auth-type setting isn't implemented in the CoyoteAdapter at all.\n\nSo, I will suggest the patch that fixed this.\nPlease review it.", "count": 7, "id": 34791, "time": "2003-04-09T12:38:32Z", "creator": "super-creek@jcom.home.ne.jp", "creation_time": "2003-04-09T12:38:32Z", "is_private": false}, {"count": 8, "tags": [], "text": "Furthermore, I give some supplementary explanations.\n\nI think that this problem is occured on all the plathomes using the JK2 \nconnector.\nI represented it on Windows2000 (Tomcat 4.1.24 + Apache 2.0.44 + JK2) and the \npatch that I recently suggested here was tested on it.\n\nRegards,\nKan Ogawa", "attachment_id": null, "id": 34846, "creator": "super-creek@jcom.home.ne.jp", "time": "2003-04-10T02:22:26Z", "bug_id": 16157, "creation_time": "2003-04-10T02:22:26Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 16157, "is_private": false, "count": 9, "id": 35049, "time": "2003-04-12T04:50:07Z", "creator": "super-creek@jcom.home.ne.jp", "creation_time": "2003-04-12T04:50:07Z", "text": "The test result using Tomcat examples application is:\n\nPlathome:\n Windows2000 Professinal SP3\n J2SE 1.4.1\n Apache 2.0.44 (\"AuthType\" is \"Basic\")\n Tomcat 4.1.24 (\"request.tomcatAuthentication\" is \"false\" in jk2.properties)\n JK 1.2.2 / JK2 2.0.2\n\nBefore:\n HttpServletRequest#getHeader(\"authorization\") -> \"Basic [The String encoded by \nBASE64]\"\n HttpServletRequest#getRemoteUser() -> \"[Username]\"\n HttpServletRequest#getAuthType() -> \"null\"\n HttpServletRequest#getUserPrincipal() -> \"CoyotePrincipal[Username]\"\n\nAfter appling the patch I reported:\n HttpServletRequest#getHeader(\"authorization\") -> \"Basic [The String encoded by \nBASE64]\"\n HttpServletRequest#getRemoteUser() -> \"[Username]\"\n HttpServletRequest#getAuthType() -> \"Basic\"\n HttpServletRequest#getUserPrincipal() -> \"CoyotePrincipal[Username]\""}, {"attachment_id": null, "tags": [], "bug_id": 16157, "text": "I have committed your patch to CVS.\n\nMany thanks.", "count": 10, "id": 55268, "time": "2004-04-04T19:11:16Z", "creator": "markt@apache.org", "creation_time": "2004-04-04T19:11:16Z", "is_private": false}]