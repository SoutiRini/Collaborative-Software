[{"count": 0, "text": "Hi,\n\nWhen tc-native-1.dll is present,\nhttps://localhost hangs for a few minutes before displaying \"page cannot be\ndisplayed\".\n\nIt works fine if tcnative-1.dll is removed.\n\nHere is an extract from my server.xml\n<Connector port=\"443\" maxHttpHeaderSize=\"8192\"\n           maxThreads=\"150\" minSpareThreads=\"25\" maxSpareThreads=\"75\"\n           enableLookups=\"false\" disableUploadTimeout=\"true\"\n           acceptCount=\"100\" scheme=\"https\" secure=\"true\"\n           clientAuth=\"false\" sslProtocol=\"TLS\"\n           keystoreFile=\"c:\\Documents and Settings\\Owner\\.keystore\"\n           keystorePass=\"mypassword\" />\n\nI created the keystore with keygen of jdk 1.5.\n\nIt worked fine with Tomcat 5.5.9 using the same configuration\nand keystore.\n\nI am using Windows XP Service Pack 2 with Sun Java 1.5.0.4.\n\nThanks\nJean-Pierre Pelletier\ne-djuster", "bug_id": 37455, "is_private": false, "id": 82364, "time": "2005-11-10T19:58:15Z", "creator": "pelletier_32@sympatico.ca", "creation_time": "2005-11-10T19:58:15Z", "tags": [], "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 37455, "is_private": false, "id": 82367, "time": "2005-11-10T20:40:03Z", "creator": "william.barker@wilshire.com", "creation_time": "2005-11-10T20:40:03Z", "tags": [], "text": "The configuration is wrong for using the APR Connector.  The configuration is \nmore like that of mod_ssl.  In particular, you can't use a JKS format keystore.\n\nSee http://tomcat.apache.org/tomcat-5.5-doc/apr.html for the details on how to \nconfigure the APR Connector."}, {"count": 2, "attachment_id": null, "bug_id": 37455, "is_private": false, "id": 82370, "time": "2005-11-10T21:01:36Z", "creator": "pelletier_32@sympatico.ca", "creation_time": "2005-11-10T21:01:36Z", "tags": [], "text": "There is no easy way for users to find out that https connectors suddently \n(with 5.5.12 & native) becomes APR connectors.\n\nI suggest an error be logged complaining about the connector and keystore \nincompatibility.\n\nThe https/ssl howto documentation could also explain the native/APR impact.\n"}, {"count": 3, "tags": [], "bug_id": 37455, "attachment_id": null, "text": "So,  For the uninitiated noob like me, what ought a https connector look like?\n\n", "id": 86318, "time": "2006-03-01T06:55:34Z", "creator": "Poubelle@cogeco.ca", "creation_time": "2006-03-01T06:55:34Z", "is_private": false}, {"count": 4, "text": "And is keytool still useable?  \n\nIn Short, Will the SSL Howto be rewritten?", "bug_id": 37455, "is_private": false, "id": 86319, "time": "2006-03-01T06:56:55Z", "creator": "Poubelle@cogeco.ca", "creation_time": "2006-03-01T06:56:55Z", "tags": [], "attachment_id": null}, {"count": 5, "text": "It took me two days to find out that my \"full install\" of tomcat 5.5.15 on\nWindows 2003 actually had APR enabled, and that my SSL config did not work\nbecause of this.\n\nThe log should most definitely contain an error if the wrong configuration\nformat is used, and it should contain the information during startup if APR is\nenabled.", "bug_id": 37455, "is_private": false, "id": 87206, "time": "2006-03-24T08:19:03Z", "creator": "christian@wilde-welt.de", "creation_time": "2006-03-24T08:19:03Z", "tags": [], "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 37455, "text": "I had the same problem where HTTP worked fine, but HTTPS did not repsonde and\nthere was no log entries.\n\nI resolved it by not installing the native libs, and now HTTPS also works.  So\nthe issues is releated to the native libs not doing HTTPS correctly", "id": 91889, "time": "2006-08-04T11:26:01Z", "creator": "ulrichenslin@gmail.com", "creation_time": "2006-08-04T11:26:01Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "fhanik@apache.org", "attachment_id": null, "id": 91894, "time": "2006-08-04T13:26:49Z", "bug_id": 37455, "creation_time": "2006-08-04T13:26:49Z", "is_private": false, "text": "It is unfortunate that Tomcat does the auto-APR when the settings are different.\nThis leads users to think that the regular HTTPS settings would work with APR,\nthey don't.\n\nIn order for the tcnative.dll (the APR connector) to work in HTTPS, you have to\nconfigure it with a key and a certificate.\n\nThe bottom of the documentation http://tomcat.apache.org/tomcat-5.5-doc/apr.html\ndescribes that."}, {"count": 8, "attachment_id": null, "bug_id": 37455, "is_private": false, "id": 96253, "time": "2006-11-27T21:41:48Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2006-11-27T21:41:48Z", "tags": [], "text": "Filip,\n\nThe bottom line is that tcnative-1.dll is misleading. Yes I understand that APR\nconfiguration is different than non-APR configuration but it is completely\nmisleading that a non-APR configuration fails simply because tcnative-1.dll\nexists in the bin directory. I was under the impression (and I suspect many\nothers as well) that so long as APR is disabled in server.xml then it isn't on\nand the non-APR configuration should work just fine.\n\nAt the very least Tomcat should note a WARNING that the user specified non-APR\nSSL configuration but APR is enabled. Can I reopen this issue?"}, {"count": 9, "tags": [], "bug_id": 37455, "attachment_id": null, "text": "Ugh, many apologies, I configured APR with AJP (damn those acronyms!). So the\nproblem isn't as bad as I had originally suspected but I still think Tomcat\nshould log a warning if the user tries using non-APR configuration with APR enabled.", "id": 96254, "time": "2006-11-27T21:45:43Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2006-11-27T21:45:43Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 37455, "text": "rather, I *confused* APR with AJP", "id": 96255, "time": "2006-11-27T21:46:17Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2006-11-27T21:46:17Z", "is_private": false, "attachment_id": null}, {"count": 11, "text": "Hi\nAfter read the http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html, it said that the implementation used by tomcat is chosen automatically and it depends if you have installed the native library tcnative-1.dll. \nif you not want remove the tcnative-1.dll you have to modify the protocol in your connector\n\n<Connector protocol=\"org.apache.coyote.http11.Http11NioProtocol\" \n           port=\"443\" maxHttpHeaderSize=\"8192\"\n           maxThreads=\"150\" minSpareThreads=\"25\" maxSpareThreads=\"75\"\n           enableLookups=\"false\" disableUploadTimeout=\"true\"\n           acceptCount=\"100\" scheme=\"https\" secure=\"true\"\n           clientAuth=\"false\" sslProtocol=\"TLS\"\n           keystoreFile=\"c:\\Documents and Settings\\Owner\\.keystore\"\n           keystorePass=\"mypassword\" />", "bug_id": 37455, "is_private": false, "id": 160564, "time": "2012-07-10T15:50:15Z", "creator": "solo.programas017@gmail.com", "creation_time": "2012-07-10T15:50:15Z", "tags": [], "attachment_id": null}]