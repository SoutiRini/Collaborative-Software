[{"count": 0, "tags": [], "text": "This is related to https://github.com/mcasperson/wildfly_jstl_bug/\n\nThere is a bug that occurs when you have a x:forEach in a JSP page, and inside this x:forEach you call a tag that itself has a x:forEach. The variable created by the second x:forEach is inaccessible to any nested x:out elements.\n\nThis happens because the x:out pagecontext is assigned from the parent x:forEach (from the tag file), which in turn has its pageContext assigned from its parent x:forEach (from the JSP page). This means the x:out element has no access to page scoped variables from the tag.\n\nThis bug is known to affect WildFly 10.0.0, which uses code forked from the Apache TagLib project. See https://github.com/mcasperson/wildfly_jstl_bug/blob/master/src/main/webapp/index.jsp and https://github.com/mcasperson/wildfly_jstl_bug/blob/master/src/main/webapp/WEB-INF/tags/my.tag for more details. When run, this JSP page produces the exception:\n\nCaused by: javax.xml.transform.TransformerException: Could not resolve XPath variable: $childNode\n            at org.apache.taglibs.standard.tag.common.xml.JSTLVariableStack.getVariableOrParam(JSTLVariableStack.java:93)\n            at org.apache.xpath.operations.Variable.execute(Variable.java:219)\n            at org.apache.xpath.operations.Variable.execute(Variable.java:188)\n            at org.apache.xpath.axes.FilterExprIteratorSimple.executeFilterExpr(FilterExprIteratorSimple.java:116)\n            at org.apache.xpath.axes.FilterExprWalker.setRoot(FilterExprWalker.java:131)\n            at org.apache.xpath.axes.WalkingIterator.setRoot(WalkingIterator.java:157)\n            at org.apache.xpath.axes.NodeSequence.setRoot(NodeSequence.java:265)\n            at org.apache.xpath.axes.LocPathIterator.execute(LocPathIterator.java:212)\n            at org.apache.xpath.XPath.execute(XPath.java:337)\n            ... 41 more\n\nWe have a fix which you can view at https://github.com/jboss/jboss-jstl-api_spec/pull/12/files/e0b0140c879c43c8dc2cc881e5cd3d857935d685..b03bea7ad4d3a92a16d8a9f67434cf033f72ca09. It is a nasty hack so I am not suggesting this is how the problem should be solved, but it does demonstrate how pageContexts are being incorrectly assigned with the x:forEach element and nested tags.", "attachment_id": null, "id": 191437, "creation_time": "2016-06-06T20:52:17Z", "time": "2016-06-06T20:52:17Z", "creator": "matthewcasperson@gmail.com", "bug_id": 59668, "is_private": false}]