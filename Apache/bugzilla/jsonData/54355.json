[{"count": 0, "tags": [], "creator": "ynmanware@gmail.com", "attachment_id": null, "id": 164268, "time": "2012-12-28T08:27:47Z", "bug_id": 54355, "creation_time": "2012-12-28T08:27:47Z", "is_private": false, "text": "Issue: java.lang.IllegalStateException: getAttribute: Session already invalidated\n\nIn our application, when the user logs out, we are invoking httpSession.invalidate(); and then we are redirecting user to login page. But many a times httpSession.invalidate() is executed in concurrent thread. This results into IllegalStateException in later stages. \n\nFollowing is the console trace\n{code}\n1. 14:03:10 DEBUG [ttp-8082-4] Startup   \t\t - #Session Id:  AEBD73C3F228729C90BFC5498B4481FD\n2. 14:03:10 DEBUG [ttp-8082-4] Startup           \t - #httpSession.invalidate() invoked...\n3. 14:03:10 DEBUG [ttp-8082-5] LoginFilter               - #request.getSession(false).getId(): AEBD73C3F228729C90BFC5498B4481FD\n4. 14:03:10 DEBUG [ttp-8082-5] LoginFilter               - #request.isRequestedSessionIdValid(): true\n5. 14:03:10 DEBUG [ttp-8082-1] SessionContextListener    - #sessionDestroyed(HttpSessionEvent event) exiting...\n6. 14:03:10 DEBUG [ttp-8082-1] SessionContextListener    - #sessionCreated(HttpSessionEvent event)\n7. 14:03:10 DEBUG [ttp-8082-1] SessionContextListener    - #Session Id:  0662CA084CBC71F4A7722E05E909E3CF\n8. 14:03:10 DEBUG [ttp-8082-1] SessionContextListener    - #Returning from sessionCreated(HttpSessionEvent event)\n9. 14:03:10 DEBUG [ttp-8082-1] IppAuthenticationProvider - #IppAuthenticationProvider initialized....\n10. 14:03:10 INFO  [Thread-73 ] Parameters               - CARNOT version: 7.1.0.30-r61111\nNov 29, 2012 2:03:10 PM org.apache.catalina.core.ApplicationDispatcher invoke\nSEVERE: Servlet.service() for servlet Persistent Faces Servlet threw exception\njava.lang.IllegalStateException: getAttribute: Session already invalidated\n\tat org.apache.catalina.session.StandardSession.getAttribute(StandardSession.java:1077)\n\tat org.apache.catalina.session.StandardSessionFacade.getAttribute(StandardSessionFacade.java:110)\n\tat com.icesoft.faces.webapp.http.servlet.ProxyHttpSession.getAttribute(ProxyHttpSession.java:107)\n\tat com.icesoft.faces.webapp.http.servlet.ServletSessionAttributeMap.getAttribute(ServletSessionAttributeMap.java:48)\n        ....\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n        at <path>.LoginFilter.doFilter(LoginFilter.java:385)\n{code}\n\nhttpSession.invalidate() is invoked at line 2 but it actually completes at line 5."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 164269, "time": "2012-12-28T09:06:32Z", "bug_id": 54355, "creation_time": "2012-12-28T09:06:32Z", "is_private": false, "text": "Bugzilla is not a support forum. Please use the users mailing list."}]