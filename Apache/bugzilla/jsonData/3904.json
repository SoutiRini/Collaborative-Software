[{"count": 0, "tags": [], "creator": "brobinson@hp.com", "text": "The method in which response headers are checked is done in a case sensitive \nmanner.  From what I've seen and heard, there is no requirement that headers be \ncase sensitive in the HTTP specs.  \n\nIf the headers returned with the response are in a different case than those \nexpected, there is no case insensitive checking for the names of the headers.  \nThe expected headers are simply keyed by the name set in the configuration of \nconf/gtest-servlet.xml in a hashtable.\n\nBelow is the suggested code fix in GTest.checkResponse() method:\n\n\tif( expectHeaders != null ) {\n\t    // Check if we got the expected headers\n\t    if(headers==null) {\n\t\tSystem.out.println(\"ERROR no response header, expecting \nheader\");\n\t    }\n\t    Enumeration e=expectHeaders.keys();\n\t    while( e.hasMoreElements()) {\n\t\tString key=(String)e.nextElement();\n\t\tString value=(String)expectHeaders.get(key);\n\t\tString respValue=(String)headers.get(key);\n/*\n      Addition here\n*/\n      Enumeration enumeration = headers.keys();\n      while( enumeration.hasMoreElements() )\n      {\n         String actualKey = (String) enumeration.nextElement();\n         if( actualKey.equalsIgnoreCase( key ) )\n         {\n            respValue = (String) headers.get( actualKey );\n            break;\n         }\n      }\n/*\n      End addition\n*/\n\t\tif( respValue==null || respValue.indexOf( value ) <0 ) {\n\t\t    System.out.println(\"ERROR expecting header \" + key + \":\" +\n\t\t\t\t       value + \" GOT: \" + respValue+ \" HEADERS\n(\" + headers + \")\");\n\t\t\tif ( resultOut != null )\n\t\t\t{\n\t\t\t\texpectedString = \"<expectedHeader>\" + key \n+ \":\"+ value + \"</expectedHeader>\\n\";\n\t\t\t\tactualString = \"<actualHeader>\"+ key + \":\" + \nrespValue + \"</actualHeader>\\n\";\n\t\t\t\tresultOut.write(expectedString.getBytes() );\n\t\t\t\tresultOut.write(actualString.getBytes() );\n\t\n\t\t\t}\n\t\t    \n\t\t    return false;\n\t\t}\n\t    }\n\n\t}", "id": 6233, "time": "2001-10-01T10:27:50Z", "bug_id": 3904, "creation_time": "2001-10-01T10:27:50Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 3904, "text": "This issue was resolved during a refresh of the GTest code.\n", "id": 8994, "time": "2001-12-18T06:51:33Z", "creator": "Ryan.Lubke@Sun.COM", "creation_time": "2001-12-18T06:51:33Z", "tags": [], "is_private": false}]