[{"count": 0, "tags": [], "bug_id": 1239, "text": "If I have placed the optional.jar and junit.jar files into the ant lib\ndirectory so that I can run without these files in my CLASSPATH, I\nam still required to do so when the junit task uses fork=true as the\ncodebase of the junit task is not included in the forked java command\nline as shown below. So in order to run the forked junit task I need\nthe optional.jar and junit.jar in my CLASSPATH which defeats the purpose\nof adding these jars to the ant lib directory.\n\n\nbuild 790>ant -verbose unit-tests\nAnt version 1.3 compiled on March 2 2001\n\nBuildfile: build.xml\nDetected Java Version: 1.3\nDetected OS: Windows 2000\n...\nunit-tests:\n    [junit] Executing: java -classpath D:\\usr\\local\\src\\cvsroot\\jBoss\\jbosssx\\bu\nild\\classes;D:\\usr\\local\\src\\cvsroot\\jBoss\\jbosssx\\lib\\ejb.jar;D:\\usr\\local\\src\\\ncvsroot\\jBoss\\jbosssx\\lib\\jaas.jar;D:\\usr\\local\\src\\cvsroot\\jBoss\\jbosssx\\lib\\ja\nxp.jar;D:\\usr\\local\\src\\cvsroot\\jBoss\\jbosssx\\lib\\jdbc2_0-stdext.jar;D:\\usr\\loca\nl\\src\\cvsroot\\jBoss\\jbosssx\\lib\\jmxri.jar;D:\\usr\\local\\src\\cvsroot\\jBoss\\jbosssx\n\\lib\\jta-spec1_0_1.jar;D:\\usr\\local\\src\\cvsroot\\jBoss\\jbosssx\\lib\\crimson.jar;D:\n\\usr\\local\\src\\cvsroot\\jBoss\\jbosssx\\lib\\log4j.jar;D:\\usr\\local\\src\\cvsroot\\jBos\ns\\jboss\\dist\\lib\\ext\\jboss.jar;D:\\usr\\local\\src\\cvsroot\\jBoss\\jboss\\dist\\lib\\ext\n\\jnpserver.jar org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner org.\njboss.test.LoginModulesTest haltOnError=false haltOnFailure=true formatter=org.a\npache.tools.ant.taskdefs.optional.junit.PlainJUnitResultFormatter\n    [junit] java.lang.NoClassDefFoundError: org/apache/tools/ant/taskdefs/option\nal/junit/JUnitTestRunner", "id": 1760, "time": "2001-04-05T20:24:18Z", "creator": "Scott_Stark@displayscape.com", "creation_time": "2001-04-05T20:24:18Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "bodewig@apache.org", "text": "I don't think we should implicitly add Ant's runtime classes to the classpath\nfor <junit> - some things work if you run junit forked but not if you run\nthings in VM, just because we don't include everything from ANT_HOME/lib (tests\nthat require a different XML parser for example).\n\nIf we had a way to only include the classpath entries that contain the junit\ntask and junit.jar itself, fine. But this may be difficult to find out - I'll \ninvestigate this a little.  You cannot rely on the task being defined in\noptional.jar.\n\nFinally, you should get a running fork=\"true\" version, if you give a nested\nclasspath element to <junit> that contains all required classes.", "id": 2260, "time": "2001-05-04T02:12:33Z", "bug_id": 1239, "creation_time": "2001-05-04T02:12:33Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 1239, "text": "fixed for JDK > 1.1 starting with nightly build 2001-07-13", "id": 3663, "time": "2001-07-12T00:10:05Z", "creator": "bodewig@apache.org", "creation_time": "2001-07-12T00:10:05Z", "is_private": false, "attachment_id": null}]