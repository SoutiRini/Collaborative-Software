[{"count": 0, "tags": [], "bug_id": 4030, "attachment_id": null, "is_private": false, "id": 6480, "time": "2001-10-08T15:39:13Z", "creator": "tbrinson@express-scripts.com", "creation_time": "2001-10-08T15:39:13Z", "text": "When a file with external graphics is processed a write error occured for the\nfirst grahpic referenced in the file.  The rest of the file processed fine\nexcept the first graphic.\n\nThis did not occur on NT but did on Solaris.\n\nThe there are two possible exceptions that are raised from the same stack trace\n(See below).  The outcome is the same in both cases.  Not sure why one exception\nis raised some times and the other one other tiems.\n\n----------------------------------------------------------------------\nError1:\n----------------------------------------------------------------------\n\n\nFOP 0.20.1\nusing SAX parser org.apache.xerces.parsers.SAXParser\nbuilding formatting object tree\nsetting up fonts\nrendering areas to PostScript\n [1]\n [2]java.io.IOException: Pipe broken\n\tat java.lang.Throwable.fillInStackTrace(Native Method)\n\tat java.lang.Throwable.fillInStackTrace(Compiled Code)\n\tat java.lang.Throwable.<init>(Compiled Code)\n\tat java.lang.Exception.<init>(Compiled Code)\n\tat java.io.IOException.<init>(Compiled Code)\n\tat java.io.PipedInputStream.receive(Compiled Code)\n\tat java.io.PipedInputStream.receive(Compiled Code)\n\tat java.io.PipedOutputStream.write(PipedOutputStream.java:136)\n\tat java.util.zip.DeflaterOutputStream.deflate(Compiled Code)\n\tat java.util.zip.DeflaterOutputStream.finish(Compiled Code)\n\tat java.util.zip.DeflaterOutputStream.close(DeflaterOutputStream.java:132)\n\tat org.apache.fop.render.ps.FlateEncodeFilter.doFilter(FlateEncodeFilter.java:34)\n\tat org.apache.fop.render.ps.FilterThread.run(FilterThread.java:27)\n\n [3]\nParsing of document complete, stopping renderer\nwritten out PostScript\nInitial heap size: 975Kb\nCurrent heap size: 2356Kb\nTotal memory used: 1381Kb\n  Memory use is indicative; no GC was performed\n  These figures should not be used comparatively\nTotal time used: 3988ms\nPages rendererd: 3\nAvg render time: 1329ms/page\nMon Oct 8 17:22:53 CDT 2001\n\n\n\n\n----------------------------------------------------------------------\nError2:\n----------------------------------------------------------------------\n\n\nFOP 0.20.1\nusing SAX parser org.apache.xerces.parsers.SAXParser\nbuilding formatting object tree\nsetting up fonts\nrendering areas to PostScript\n [1]java.io.IOException: Read end dead\n\tat java.lang.Throwable.fillInStackTrace(Native Method)\n\tat java.lang.Throwable.fillInStackTrace(Compiled Code)\n\tat java.lang.Throwable.<init>(Compiled Code)\n\tat java.lang.Exception.<init>(Compiled Code)\n\tat java.io.IOException.<init>(Compiled Code)\n\tat java.io.PipedInputStream.receive(Compiled Code)\n\tat java.io.PipedInputStream.receive(Compiled Code)\n\tat java.io.PipedOutputStream.write(PipedOutputStream.java:136)\n\tat java.util.zip.DeflaterOutputStream.deflate(Compiled Code)\n\tat java.util.zip.DeflaterOutputStream.finish(Compiled Code)\n\tat java.util.zip.DeflaterOutputStream.close(DeflaterOutputStream.java:132)\n\tat org.apache.fop.render.ps.FlateEncodeFilter.doFilter(FlateEncodeFilter.java:34)\n\tat org.apache.fop.render.ps.FilterThread.run(FilterThread.java:27)\n\n [2]\n [3]\nParsing of document complete, stopping renderer\nwritten out PostScript\nInitial heap size: 975Kb\nCurrent heap size: 2356Kb\nTotal memory used: 1381Kb\n  Memory use is indicative; no GC was performed\n  These figures should not be used comparatively\nTotal time used: 4056ms\nPages rendererd: 3\nAvg render time: 1352ms/page\nMon Oct 8 17:33:46 CDT 2001"}, {"count": 1, "tags": [], "creator": "tbrinson@express-scripts.com", "attachment_id": 651, "text": "Created attachment 651\nThe FO file that causes the problem.", "id": 6482, "time": "2001-10-08T15:45:30Z", "bug_id": 4030, "creation_time": "2001-10-08T15:45:30Z", "is_private": false}, {"count": 2, "text": "As I run it more the symptoms change a little (for no appearant reason).  Now it\nis occuring on the second and third graphic in the file and not the first one. \nAll else is the same.\n\nBTW, the version of FOP is 0.20.1 and the version of java is 1.2.2.", "creator": "tbrinson@express-scripts.com", "attachment_id": null, "id": 6483, "time": "2001-10-08T15:52:37Z", "bug_id": 4030, "creation_time": "2001-10-08T15:52:37Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "Created attachment 652\nAnother error output when there are 100 graphic references.  Shows they only occur sometimes.", "attachment_id": 652, "id": 6485, "creator": "tbrinson@express-scripts.com", "time": "2001-10-08T16:20:07Z", "bug_id": 4030, "creation_time": "2001-10-08T16:20:07Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 4030, "attachment_id": null, "id": 6490, "time": "2001-10-08T23:18:38Z", "creator": "jeremias.maerki@outline.ch", "creation_time": "2001-10-08T23:18:38Z", "is_private": false, "text": "I feared that something like this might happen. The problem seems to be \nsomething related to different implementations of threads between the JDK on \nWindows and Solaris. Maybe there is also a problem with piped streams that I'm \nusing to run the filters. When I wrote those filters I was a bit lazy to \nimplement proper descendants of FilterOutputStreams. Instead I implemented them \nso they rather worked on the whole stream at once than in chunks like it would \nhave to being implemented as FilterOutputStreams. That's why I had to introduce \nthe piped streams.\n\nSo, to resolve this we have to find out if there's a known problem with threads \nor piped stream in Solaris JDK and maybe try to find a work-around. \nUnfortunately, I can't help here because I don't have a Solaris machine handy. \nYou might also try another version of the JDK.\n\nThe other solution would be to reimplement the filters as descendants of \nFilterOutputStream. It would be so nice if someone could do this and also \nimplement the RunLengthFilter which is part of PostScript Level 2, so we have \nat least some kind of compression on bitmaps. The problem here is that PS Level \n2 supports LZW compression which brings up licence issues, but the RunLength \ncompression is free. Only PS Level 3 has Flate compression."}, {"count": 5, "tags": [], "bug_id": 4030, "attachment_id": null, "id": 122087, "time": "2008-11-01T08:23:44Z", "creator": "jeremias@apache.org", "creation_time": "2008-11-01T08:23:44Z", "is_private": false, "text": "In recent versions of FOP this is no longer implemented this way and this particular bug shouldn't pop up anymore. Closing this issue."}, {"count": 6, "tags": [], "bug_id": 4030, "attachment_id": null, "id": 156160, "time": "2012-04-01T07:01:36Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T07:01:36Z", "is_private": false, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed"}]