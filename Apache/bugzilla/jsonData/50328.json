[{"count": 0, "text": "I have read everything regarding using TraceEnable off and adding it to the\nhttpd.conf in Apache 2.2.x\n\nYour documents say it should work with all Apache:\n\nCompatibility:\tAvailable in Apache 1.3.34, 2.0.55 and later\n\nHowever, I cannot get this to turn off: Whether I have it on or off, I still get the same output. Please see as follows. (Again NOTE: I am adding it the main config in httpd.conf).\n\n\nThe HTTP/1.1 should return METHOD NOT ALLOWED , however I receive the following\nafter I telnet to web server I called it:\n\napachewebserver-2.2.17.host.server.com.\n\nThen I entered the text and hit return twice:\n\nTRACE / HTTP/1.0\nHost: foo\nAny text entered here will be echoed back in the response\n\n\nSee the exact output below:\n\n*****************************************************\n\nConnected to apachewebserver-2.2.17.host.server.com.\nEscape character is '^]'.\nTRACE / HTTP/1.0\nHost: foo\nAny text entered here will be echoed back in the response\n\nHTTP/1.1 400 Bad Request\nDate: Wed, 24 Nov 2010 15:19:00 GMT\nServer: Apache\nContent-Length: 349\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>400 Bad Request</title>\n</head><body>\n<h1>Bad Request</h1>\n<p>Your browser sent a request that this server could not understand.<br />\nRequest header field is missing ':' separator.<br />\n<pre>\nAny text entered here will be echoed back in the response</pre>\n</p>\n</body></html>\nConnection closed by foreign host.\n\n\n\n\nNote the data gets echoed back \"Any text entered here will be echoed back in the response\"\n\nThis indicates that \"TraceEnable off\" is not working.\n\nPlease advise.\n\nThank you,", "bug_id": 50328, "attachment_id": null, "id": 141966, "time": "2010-11-24T10:34:33Z", "creator": "mishra@nrl.navy.mil", "creation_time": "2010-11-24T10:34:33Z", "tags": [], "is_private": false}, {"count": 1, "text": "You send a request that is syntactically malformed HTTP, you get a 400 response.\n\nIf you need clarification of that, please use a user support forum.", "bug_id": 50328, "attachment_id": null, "id": 141967, "time": "2010-11-24T11:09:03Z", "creator": "nick@webthing.com", "creation_time": "2010-11-24T11:09:03Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 50328, "attachment_id": null, "is_private": false, "id": 141968, "time": "2010-11-24T11:51:46Z", "creator": "mishra@nrl.navy.mil", "creation_time": "2010-11-24T11:51:46Z", "text": "(In reply to comment #1)\n> You send a request that is syntactically malformed HTTP, you get a 400\n> response.\n> \n> If you need clarification of that, please use a user support forum.\n\n\nOur security scans are showing that TRACE is enabled on our apache server.\nI have read documentation that this method was a way to manually test it.\n\nAre you saying that TraceEnable off  is working correctly?\n\nIs it or is it not suppose to return METHOD NOT ALLOWED?\n\nHow do you propose testing the TraceEnable feature if the following is not\nthe way to do it:\n\nTRACE / HTTP/1.0\nHost: foo\nAny text entered here will be echoed back in the response\n\nWhy was I able to get the text echoed back if the TraceEnable off is working?\nWhere was the METHOD NOT ALLOWED response.\n\nI looked at the http_filters.c and it showed that with TraceEnable off, I should\nget return information as such:\n                      \"TRACE denied by server configuration\");\n        return HTTP_METHOD_NOT_ALLOWED;\n\n\nBut I am not getting that, either are our security scans.\nIt does not seem like TraceEnable off directive is working correctly.\n\nPlease test this and advise?\n\n\n\nThanks,"}, {"count": 3, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "is_private": false, "id": 142052, "time": "2010-11-27T13:23:53Z", "bug_id": 50328, "creation_time": "2010-11-27T13:23:53Z", "text": "Take it to the users list, along with the verbatim request/response and the configuration of the vhost that has traceenable off."}, {"count": 4, "tags": [], "creator": "sf@sfritsch.de", "attachment_id": null, "is_private": false, "id": 142084, "time": "2010-11-28T17:53:54Z", "bug_id": 50328, "creation_time": "2010-11-28T17:53:54Z", "text": "The test of your security scanner is wrong. It should do something like\n\nTRACE / HTTP/1.0\nHost: foo\nX-Secret: Any text entered here will be echoed back in the response"}, {"count": 5, "tags": [], "bug_id": 50328, "attachment_id": null, "id": 142137, "creation_time": "2010-11-29T12:45:13Z", "time": "2010-11-29T12:45:13Z", "creator": "mishra@nrl.navy.mil", "text": "(In reply to comment #4)\n> The test of your security scanner is wrong. It should do something like\n> \n> TRACE / HTTP/1.0\n> Host: foo\n> X-Secret: Any text entered here will be echoed back in the response\n\nWhat do see from a working Apache 2.2.x server with TraceEnable off, if you send them this data:\n\nI get the following results:\n\nEscape character is '^]'.\nTRACE / HTTP/1.0\nHost: foo\nX-Secret: Any text entered here will be echoed back in the response\n\nHTTP/1.1 302 Found\nDate: Mon, 29 Nov 2010 17:29:24 GMT\nServer: Apache\nLocation: https://apachewebserver-2.2.17.host.server.com/\nContent-Length: 214\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>302 Found</title>\n</head><body>\n<h1>Found</h1>\n<p>The document has moved <a href=\"https://apachewebserver-2.2.17.host.server.com/\">here</a>.</p>\n</body></html>\nConnection closed by foreign host.\n\n\n\nI get the exact same output if I use \"TraceEnable On\"\n\nAgain, I don't see the difference if TraceEnable is on or if TraceEnable is off\nin Apache 2.2.x (2.2.17 in this case).\n\n\nI think you said it WORKSFORME:\n\nCan you please provide the output and difference of using TraceEnable on vs TraceEnable off.\n\nIf it works for you, then there should be some difference in the output to indicate the TraceEnable function is actually working.\n\nAlso, are you putting the directive in the httpd.conf or in the extra/httpd-vhosts.conf, in either place for me it does not work or make a difference in the output.\n\nThanks.", "is_private": false}, {"count": 6, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "is_private": false, "id": 142166, "time": "2010-11-29T23:15:13Z", "bug_id": 50328, "creation_time": "2010-11-29T23:15:13Z", "text": "Do not reopen, the response will be revocation of your bugzilla account."}, {"count": 7, "tags": [], "bug_id": 50328, "attachment_id": null, "id": 152823, "time": "2012-01-16T11:02:16Z", "creator": "jai.steave@gmail.com", "creation_time": "2012-01-16T11:02:16Z", "is_private": false, "text": "Hi Team,\n\nIam also facing the same issue,The TraceEnable On or Off is not making any difference for \"TRACE / HTTP/1.0\" output.\nMy Apache version is 2.2.21,Could you please guide me.\n\nThanks in Advance,\nJayaram."}, {"count": 8, "tags": [], "bug_id": 50328, "attachment_id": null, "is_private": false, "id": 152828, "time": "2012-01-16T13:20:16Z", "creator": "nick@webthing.com", "creation_time": "2012-01-16T13:20:16Z", "text": "1. I just looked.  It seems TraceEnable is allowed in a VirtualHost context, which leaves scope for configuration errors.  Anyone who gets this should perhaps start by checking TraceEnable Off is set at top-level.\n\n2. Comment #5, unlike the original report, looks like valid HTTP.  I just spotted that today.\n\nI think there could be a real bug here: ap_send_http_trace is a map_to_storage hook with priority APR_HOOK_MIDDLE.  map_to_storage is RUN_FIRST, which opens the possibility of never checking for TraceEnable if another module gets in first.  And we could already be in an errordocument before we hit map_to_storage.\n\nIf someone can post an actual config that provokes this, please reopen.  Though the apparent bug is nothing to do with TraceEnable, rather it's the TRACE method being treated as a regular GET/HEAD."}]