[{"count": 0, "tags": [], "text": "When rendering SVG images obtained from a web server, PNG sub-images render as\nbroken images unless the server (Apache 1.3.x) has KeepAlive On set in the\nconfiguration file.  This happens in both the SVG Viewer (Squiggle) and the SVG\nRasterizer.  PNGs render correctly when input is from a file rather than the web.\n\nThe tested configuration was Batik 1.5beta4b, j2sdk1.4.1_01, RedHat Linux 7.3\n(with servers on several different machines).  I also tried rebuilding 1.5beta4b\nfrom sources with no effect, and thrashed around with Batik 1.1.1 and jdk1.3.1.\n\nTo reproduce, put the following toward the end of your httpd.conf file:\n  KeepAlive Off\n  Alias /samples/ \"/usr/local/xml-batik-1.5b4/samples/\"\n\nThen this command sequence:\n  cd <batik install directory>\n  java -jar batik-squiggle.jar http://localhost/samples/mapSpain.svg\n\nproduces the following exceptions (repeated twice):\n\njava.io.EOFException\n        at java.io.DataInputStream.readInt(DataInputStream.java:397)\n        at org.apache.batik.ext.awt.image.codec.PNGRed.readChunk(Unknown Source)\n        at org.apache.batik.ext.awt.image.codec.PNGRed.<init>(Unknown Source)\n        at org.apache.batik.ext.awt.image.spi.PNGRegistryEntry$1.run(Unknown Sou\nrce)\njava.lang.NullPointerException\n        at org.apache.batik.ext.awt.image.codec.PNGRed.<init>(Unknown Source)\n        at org.apache.batik.ext.awt.image.spi.PNGRegistryEntry$1.run(Unknown Sou\nrce)\n\nChanging the \"KeepAlive Off\" to \"KeepAlive On\" and restarting Apache fixes the\nproblem.", "attachment_id": null, "id": 31636, "creator": "steve@rii.ricoh.com", "time": "2003-02-20T00:55:24Z", "bug_id": 17226, "creation_time": "2003-02-20T00:55:24Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 17226, "is_private": false, "id": 45292, "attachment_id": null, "creator": "deweese@apache.org", "creation_time": "2003-10-09T14:32:31Z", "time": "2003-10-09T14:32:31Z", "text": "I believe when we reworked loading images this problem\nwas fixed.  Can you verify?\n"}, {"count": 2, "tags": [], "text": "Reassigning all open bugs to the development list.\nSorry for the mass mailing.", "is_private": false, "id": 40379, "creator": "deweese@apache.org", "time": "2005-03-22T12:15:41Z", "bug_id": 17226, "creation_time": "2005-03-22T12:15:41Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 17226, "text": "I'm almost certain that this is fixed for a while. I began experimenting with  Batik using version 1.6 within an HTTP 1.0 (which doesn't support keep-alive) proxy environment and have never experienced this issue. Confirmed using a test from the SVG 1.2 test suite [1], naturally behind the same proxy.\n\nMost probably, as Thomas has stated (and checked with Cameron also), this is likely fixed for a long time, so marking as fixed until proved otherwise. Please reopen if this doesn't fit your situation, but remember to update Batik version first [2] (to the latest release or, preferably to a trunk check out).\n\n[1] http://www.w3.org/Graphics/SVG/Test/20080912/svggen/struct-image-01-t.svg\n[2] http://xmlgraphics.apache.org/batik/download.cgi", "id": 122770, "time": "2008-11-24T04:18:17Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2008-11-24T04:18:17Z", "is_private": false, "attachment_id": null}]