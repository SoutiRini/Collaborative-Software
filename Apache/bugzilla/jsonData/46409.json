[{"count": 0, "tags": [], "text": "Compilation of Apache 2.2.11 on Solaris 10 fails due to dependency on flex in the SSL module.\n\nThe Configuration option used is:\n\n./configure --with-mpm=worker --prefix=/usr/local/apache2 --enable-mods-shared=all --enable-ssl --with-ssl=/usr/local/ssl --enable-proxy --enable-proxy-http\n\nWhen i run make, the compilation will eventually get the following error:\n\nBuilding shared: mod_ssl.la\nmake[4]: Entering directory `/usr/share/src/httpd-2.2.11/modules/ssl'\nflex -Pssl_expr_yy -s -B /usr/src/httpd-2.2.11/modules/ssl/ssl_expr_scan.l\n/bin/bash: flex: command not found\nmake[4]: *** [ssl_expr_scan.c] Error 127\nmake[4]: Leaving directory `/usr/share/src/httpd-2.2.11/modules/ssl'\nmake[3]: *** [shared-build-recursive] Error 1\nmake[3]: Leaving directory `/usr/share/src/httpd-2.2.11/modules/ssl'\nmake[2]: *** [shared-build-recursive] Error 1\nmake[2]: Leaving directory `/usr/share/src/httpd-2.2.11/modules'\nmake[1]: *** [shared-build-recursive] Error 1\nmake[1]: Leaving directory `/usr/share/src/httpd-2.2.11'\nmake: *** [all-recursive] Error 1\n\nThis same configure and compile command works fine in http 2.2.10.  Checking the Makefile in /usr/src/httpd-2.2.11/modules/ssl, i can see the following:\n\n#\n#   developer stuff\n#   (we really don't expect end users to use these targets!)\n#\n\nssl_expr_scan.c: $(top_srcdir)/modules/ssl/ssl_expr_scan.l ssl_expr_parse.h\n        flex -Pssl_expr_yy -s -B $(top_srcdir)/modules/ssl/ssl_expr_scan.l\n        sed -e '/$$Header:/d' -e \"s|\\\"`pwd`/|\\\"|g\" <lex.ssl_expr_yy.c >ssl_expr_scan.c && rm -f lex.ssl_expr_yy.c\n\nAssuming that the comment is correct and end users should not use those targets, then why did flex run in the first place?\n\nCompilation on a Linux server (Debian build) is successful, even without flex.\n\nOn Solaris 10, manually removing those \"developer stuff\" targets produce a successful compile and fully running server.", "is_private": false, "id": 123363, "creator": "lawrence.ong@synecho.com", "time": "2008-12-16T18:23:01Z", "bug_id": 46409, "creation_time": "2008-12-16T18:23:01Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 46409, "attachment_id": null, "is_private": false, "id": 123366, "time": "2008-12-17T01:29:26Z", "creator": "rpluem@apache.org", "creation_time": "2008-12-17T01:29:26Z", "text": "Nothing has changed in this area between 2.2.10 and 2.2.11 and things work fine on my Solaris 10 box. Please check the timestamps of ssl_expr_scan.l and ssl_expr_scan.c. Both should have the same timestamp.\nWhat kind of package did you use (tar.gz / tar.bz2) and how did you unpack\n(Solaris tar / gnu tar)."}, {"count": 2, "tags": [], "text": "The Makefile in modules/ssl contains dependencies of ssl_expr_parse.c and ssl_expr_parse.h (they depend on ssl_expr_parse.y) and ssl_expr_scan.c (it depends on ssl_expr_scan.l and ssl_expr_parse.h).\n\nSo whenever one of the dependencies is newer than the dependent file, the Makefile triggers a regeneration, using yacc in the first case and flex in the second one.\n\nThat's why R\u00fcdiger asks you to check the file system time stamps. On Solaris 10 you can do\n\nls -Et modules/ssl\n\nand post the result.\n\nI tried with the tar.gz source download once more on Solaris 8 and 10, and for me neither flex nor yacc were run. The timestamps of the relevant files were:\n\n...   22299 2008-12-06 16:18:01.000000000 +0100 ssl_expr_parse.c\n...     577 2008-12-06 16:18:01.000000000 +0100 ssl_expr_parse.h\n...   58235 2008-12-06 16:18:01.000000000 +0100 ssl_expr_scan.c\n...    4921 2008-12-06 16:18:00.000000000 +0100 ssl_expr_scan.l\n...    5343 2008-12-06 16:17:59.000000000 +0100 ssl_expr_parse.y\n...   11132 2007-12-15 09:42:11.000000000 +0100 ssl_expr_eval.c\n\nso ssl_expr_scan.c has the same timestamp as ssl_expr_parse.h and is younger than ssl_expr_scan.l.\n\nAs a workaround you can touch first touch ssl_expr_parse.h and then ssl_expr_scan.c after extracting the source archive and before building it.\n", "is_private": false, "id": 123381, "creator": "rainer.jung@kippdata.de", "time": "2008-12-17T15:03:16Z", "bug_id": 46409, "creation_time": "2008-12-17T15:03:16Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 46409, "is_private": false, "id": 123382, "time": "2008-12-17T15:12:58Z", "creator": "lawrence.ong@synecho.com", "creation_time": "2008-12-17T15:12:58Z", "tags": [], "text": "Ok. This is somewhat interesting.  I have tested it again and i can no longer reproduce it.  It is likely that it have something to do with the timestamp.\n\nI was using Solaris tar to unpack (tar.bz2 package).  Anyhow, thanks for the help."}]