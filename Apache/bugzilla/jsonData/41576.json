[{"count": 0, "tags": [], "text": "Currently the compiled contents of the WebSH sources is installed in three copies:\n\n1) libwebsh8X.so.1\n2) mod_websh.so\n3) websh executable\n\nThe patch I am about to attach changes Makefile.in to link the 2) and the 3)\nwith the 1) (dynamically). On my FreeBSD/amd64 this cuts the size of\nmod_websh.so from  165Kb to 35Kb.\n\nMore importantly, it ensures, that\n\na) Tcl scripts (which load libwebsh8X.so.1)\nb) websh scripts (which refer to #!.../bin/websh directly)\nc) web-pages\n\nare all processed by _the same_ code, rather than (possibly divergent) copies\nthereof.\n\nThis also allows more optimal memory sharing between all of the a), b), and c)\nprocesses on the same machine.", "is_private": false, "bug_id": 41576, "id": 99145, "time": "2007-02-08T18:29:44Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2007-02-08T18:29:44Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "mi+apache@aldan.algebra.com", "is_private": false, "text": "Created attachment 19551\nMake src/unix/Makefile.in link websh and mod_websh dynamically", "id": 99146, "time": "2007-02-08T18:30:52Z", "bug_id": 41576, "creation_time": "2007-02-08T18:30:52Z", "attachment_id": 19551}, {"count": 2, "tags": [], "bug_id": 41576, "text": "I'm looking at it, but it needs some additional tests and the documentation must\nbe adapted. Also the dependencies in the Makefile.in patch are not sound imo...", "id": 100580, "time": "2007-03-19T03:48:06Z", "creator": "ronnie.brunner@netcetera.ch", "creation_time": "2007-03-19T03:48:06Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 41576, "text": "The simple approach does not work: the dynamically linked version then has the\nsame objects twice: the *_cgi.c and the *_ap.c implementations, which at least\nunder Windows results in strange effects because the wrong implementation is\nchosen (what if you have the same method implemented differently in your code\nand in a shared library?)\n-> To fix this, the code must be rewritten, so that mod_websh.so can properly\n(deterministically) chose the apache implementation over the cgi implementation\nthat is available in the shared library.\n", "id": 108464, "time": "2007-09-21T01:42:38Z", "creator": "ronnie.brunner@netcetera.ch", "creation_time": "2007-09-21T01:42:38Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 41576, "attachment_id": null, "id": 127270, "time": "2009-05-22T03:17:07Z", "creator": "ronnie.brunner@netcetera.ch", "creation_time": "2009-05-22T03:17:07Z", "is_private": false, "text": "Finally implemented all the changes needed to make this dynamic linking actually work..."}]