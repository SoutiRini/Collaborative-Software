[{"count": 0, "tags": [], "creator": "gadbois@computer.org", "attachment_id": null, "id": 63668, "time": "2004-09-16T16:09:35Z", "bug_id": 31264, "creation_time": "2004-09-16T16:09:35Z", "is_private": false, "text": "The manager webapp doPut() processing (which is what the Ant manager tasks use),\nextracts a war file from the HTTP request, saves it to appBase, and then tries\nto copy the war on to itself, resulting in a zero-length war file.  The code\nthat does this is in org.apache.catalina.manager.ManagerServlet line 642 in\nmethod deploy(PrintWriter, String, String, boolean, HttpServletRequest):\n\n            if (!isServiced(path)) {\n                addServiced(path);\n--->            copy(localWar, new File(getAppBase(), basename + \".war\"));\n                check(path);\n                removeServiced(path);\n            }\n\nIn the call to copy(), the source and destination files are the same."}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 63671, "time": "2004-09-16T17:14:59Z", "bug_id": 31264, "creation_time": "2004-09-16T17:14:59Z", "is_private": false, "text": "That's possible, I didn't test uploading with the Ant task. If it works like\nthat, it should be modified to do the upload somewhere else (and when it's done,\ncopy to the final location)."}, {"count": 2, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 64086, "time": "2004-09-23T07:11:06Z", "bug_id": 31264, "creation_time": "2004-09-23T07:11:06Z", "is_private": false, "text": "This issue is now fixed. Sorry for the trouble."}]