[{"count": 0, "tags": [], "bug_id": 386, "text": "Tomcat 3.2.1 with jdk 1.3 seg faults on startup.\r\n\r\nTomcat 3.2b7 and jdk 1.3 work fine on this machine.\r\nTomcat 3.2.1 and jdk 1.2.2 work fine on this machine.\r\nTomcat 3.2b7 and jdk 1.2.2 work fine on this machine.\r\nOnly the combination of Tomcat 3.2.1 and jdk 1.3 cause the seg fault.\r\n\r\nThe priority is set to medium on this report because I can run with jdk 1.2.2.  If you feel the priority should be higher or lower please feel free to adjust.\r\n\r\nBelow is a dump of the error report.  I don't have enough experience in this environment to suggest the source of the problem, but would be happy to try scenarios to help track this down.\r\n\r\nThe directory /usr/local/jsdk is sym linked to which ever jdk version I want to run, and the same for the /usr/local/jakarta-tomcat directory.\r\n\r\nLet me know if there is anything else I can do to help,\r\n\r\nFrank\r\n<mailto:tomcat@ByteLightning.com>\r\n\r\n----------------------------------------------------------\r\n\r\n[root@iNetServer jakarta-tomcat]# bin/startup.sh\r\nGuessing TOMCAT_HOME from tomcat.sh to bin/..\r\nSetting TOMCAT_HOME to bin/..\r\nUsing classpath: bin/../lib/ant.jar:bin/../lib/jasper.jar:bin/../lib/jaxp.jar:bi\r\nn/../lib/parser.jar:bin/../lib/servlet.jar:bin/../lib/test:bin/../lib/webserver.\r\njar:/usr/local/jsdk/bin/../lib/tools.jar\r\n[root@iNetServer jakarta-tomcat]# SIGSEGV   11*  segmentation violation\r\n    si_signo [0]: no signal\r\n    si_errno [0]: Success\r\n    si_code [268548760]: unknown siginfo\r\n        stackpointer=0x7fffcff8\r\n\r\nFull thread dump Classic VM (Blackdown-1.3.0-FCS, native threads):\r\n    \"Thread-0\" (TID:0x30cd9f20, sys_thread_t:0x101ecec0, state:CW, native ID:0x1\r\n005) prio=5\r\n        at java.lang.Object.wait(Native Method)\r\n        at java.lang.Object.wait(Object.java:420)\r\n        at org.apache.tomcat.util.Queue.pull(Queue.java:89)\r\n        at org.apache.tomcat.logging.LogDaemon$1.run(TomcatLogger.java:238)\r\n        at org.apache.tomcat.logging.LogDaemon.run(TomcatLogger.java:254)\r\n    \"Finalizer\" (TID:0x30cc0528, sys_thread_t:0x10060318, state:CW, native ID:0x\r\nc04) prio=8\r\n        at java.lang.Object.wait(Native Method)\r\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:108)\r\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:123)\r\n        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:162)\r\n    \"Reference Handler\" (TID:0x30cc0300, sys_thread_t:0x1005a208, state:CW, nati\r\nve ID:0x803) prio=10\r\n        at java.lang.Object.wait(Native Method)\r\n        at java.lang.Object.wait(Object.java:420)\r\n        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:110)\r\n    \"Signal Dispatcher\" (TID:0x30cc0330, sys_thread_t:0x10056818, state:CW, nati\r\nve ID:0x402) prio=5\r\n    \"main\" (TID:0x30cc01a0, sys_thread_t:0x1001bb18, state:R, native ID:0x400) p\r\nrio=5\r\n        at java.lang.reflect.Method.copy(Method.java:280)\r\n        at java.lang.reflect.Method.getParameterTypes(Method.java:90)\r\n        at org.apache.tomcat.util.xml.SetProperties.setProperty(XmlMapper.java:6\r\n31)\r\n        at org.apache.tomcat.util.xml.SetProperties.start(XmlMapper.java:611)\r\n        at org.apache.tomcat.util.xml.XmlMapper.matchStart(XmlMapper.java:384)\r\n        at org.apache.tomcat.util.xml.XmlMapper.startElement(XmlMapper.java:81)        at com.sun.xml.parser.Parser.maybeElement(Parser.java:1391)\r\n        at com.sun.xml.parser.Parser.content(Parser.java:1499)\r\n        at com.sun.xml.parser.Parser.maybeElement(Parser.java:1400)\r\n        at com.sun.xml.parser.Parser.content(Parser.java:1499)\r\n        at com.sun.xml.parser.Parser.maybeElement(Parser.java:1400)\r\n", "id": 360, "attachment_id": null, "creator": "dev@tomcat.apache.org", "creation_time": "2000-12-31T19:34:09Z", "time": "2000-12-31T19:34:09Z", "is_private": false}, {"count": 1, "tags": [], "creator": "cmanolache@yahoo.com", "text": "This is a JDK problem - even if we do a workaround in tomcat ( which is very \nhard, BTW), you may have a servlet doing the wrong sequence. Change the VM.", "id": 507, "time": "2001-02-01T23:32:35Z", "bug_id": 386, "creation_time": "2001-02-01T23:32:35Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "For query purposes, mark as fixed in Tomcat 3.3:\nFixed in Tomcat 3.3", "attachment_id": null, "bug_id": 386, "id": 582, "time": "2001-02-06T13:22:16Z", "creator": "Larry.Isaacs@sas.com", "creation_time": "2001-02-06T13:22:16Z", "is_private": false}]