[{"count": 0, "tags": [], "bug_id": 27605, "text": "We are using cronolog (1.6.1) with apache 2.0.39 and we are experiencing\na great problem with log rotate\n\nLog properties (from httpd.conf):\n\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %b %T \\\"%{User-Agent}i\\\" <%{Cookie}i>\n<%{Set-Cookie}o> \\\"%{Referer}i\\\" %p\" accrue\n\nCustomLog \"|/app/apache/cronlog/bin/cronolog\n--symlink=/app/apachedocs/VOWeb/OmniPRI/logs/access_log\n/apachelogs/VOWeb/OmniPRI/logs/%Y/%m/%d/access_log\"  accrue\n\nProblem Description:\n\nApache write access info, at the same time, in the yesterday acccess_log\nand in the current access_log, for example in the next lines You can see\nthe time stamp of the 2 access_log and the list of processes...\n\napache@xxxxxx# ls -la 11/\ntotal 530004\ndrwxrwsr-x   2 apache   tlg2acc      512 Mar 11 00:00 .\ndrwxrwsr-x  13 apache   tlg2acc      512 Mar 11 00:00 ..\n-rw-rw-r--   1 apache   tlg2acc  217858448 Mar 11 12:05 access_log\n-rw-rw-r--   1 apache   tlg2acc  53337282 Mar 11 12:05 ssl_request_log\napache@xxxxxx# ls -la 10/\ntotal 1896772\ndrwxrwsr-x   2 apache   tlg2acc      512 Mar 10 00:00 .\ndrwxrwsr-x  13 apache   tlg2acc      512 Mar 11 00:00 ..\n-rw-rw-r--   1 apache   tlg2acc  805104905 Mar 11 12:05 access_log\n-rw-rw-r--   1 apache   tlg2acc  165535930 Mar 10 23:59 ssl_request_log\napache@xxxxxx# /usr/sbin/fuser 10/access_log\n10/access_log:     3472o    3409o    2956o    2950o    2949o    2918o\n22082o\napache@xxxxxx# /usr/sbin/fuser 11/access_log\n11/access_log:    22083o\napache@xxxxxx# ps -ef | grep 22083\n  apache 22083 22082  1   Mar 10 ?        3:56 /app/apache/cronlog/bin/cronolog\n--symlink=/app/apachedocs/VOWeb/OmniPRI/logs/a \napache@xxxxxx# ps -ef | grep 3472\n  apache  3472 22082  0 11:35:58 ?        0:33\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\napache@xxxxxx# ps -ef | grep 3409\n  apache  3409 22082  0 11:35:29 ?        0:35\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\napache@xxxxxx# ps -ef | grep 2956\n  apache  2956 22082  0 11:34:34 ?        0:33\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\napache@xxxxxx# ps -ef | grep 2950\n  apache  2950 22082  0 11:34:12 ?        0:36\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\napache@xxxxxx# ps -ef | grep 2949\n  apache  2949 22082  0 11:34:10 ?        0:36\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\napache@xxxxxx# ps -ef | grep 2918\n  apache  2918 22082  0 11:34:03 ?        0:36\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\napache@xxxxxx# ps -ef | grep 22082\n  apache 22083 22082  1   Mar 10 ?        3:57 /app/apache/cronlog/bin/cronolog\n--symlink=/app/apachedocs/VOWeb/OmniPRI/logs/a\n  apache  2918 22082  0 11:34:03 ?        0:37\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\n  apache  2949 22082  0 11:34:10 ?        0:36\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\n  apache  2950 22082  0 11:34:12 ?        0:37\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\n  apache  3409 22082  0 11:35:29 ?        0:35\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\n  apache  2956 22082  0 11:34:34 ?        0:34\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\n  apache  3472 22082  0 11:35:58 ?        0:34\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\n  apache 22084 22082  0   Mar 10 ?        0:40 /app/apache/cronlog/bin/cronolog\n--symlink=/app/apachedocs/VOWeb/OmniPRI/logs/s\n  apache 22082     1  0   Mar 10 ?        0:01\n/app/apache/apache-2.0.39/bin/httpd -DOmniPRI -DSSL -f /app/apachedocs/VOWeb/Om\n\n\nCan You help us in some way, please?\n\nThanks again.\nBest regards.\nAntenore.", "id": 53870, "time": "2004-03-11T14:23:32Z", "creator": "agatta@inwind.it", "creation_time": "2004-03-11T14:23:32Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 27605, "text": "Hmm. At the first point, I don't really understand what your problem is, sorry.\n\nBut secondly and more important. Your httpd is _ancient_. Please upgrade and see\nif the problem still persists.\n\nThanks.", "id": 53880, "time": "2004-03-11T17:00:14Z", "creator": "nd@perlig.de", "creation_time": "2004-03-11T17:00:14Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "is_private": false, "id": 53911, "time": "2004-03-12T08:36:37Z", "bug_id": 27605, "creation_time": "2004-03-12T08:36:37Z", "text": "Any comment why it's invalid? :)"}, {"text": "Sorry for my poor english...\nThanks.. Now we want to upgrade cronolog and next, only if is necessary, we'll\nupgrade apache...\nFor some strange reason there are some processes thath write on yesterday log\nand some processes thath write on current (today) access_log.\nFor statistical pourpose we need to have access information only in one file...\nFor us is Critical to correct this situation\n\nYou write to me thath our apache installation is _ancient_ and so I've changed\nthe status to invalid...\n\nOur configuration, I think, is correct and we have no way to open a bug to\ncronolog...\n\nNow we cannot upgrade Apache, so can You help us in some way, please?\nWath type of information do You need?\n\nCan You change the status of the bug in the right way please?\nThanks again for your patient.\nBye, Antenore.", "tags": [], "bug_id": 27605, "attachment_id": null, "count": 3, "id": 53927, "time": "2004-03-12T11:56:52Z", "creator": "agatta@inwind.it", "creation_time": "2004-03-12T11:56:52Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 27605, "text": "Try upgrading first. There were some fixes (including security!) made in recent\nversion. If the problem persists with the current httpd, please reopen the report.", "id": 55246, "time": "2004-04-03T22:44:13Z", "creator": "nd@perlig.de", "creation_time": "2004-04-03T22:44:13Z", "is_private": false, "attachment_id": null}]