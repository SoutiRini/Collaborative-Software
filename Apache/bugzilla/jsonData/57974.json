[{"count": 0, "tags": [], "bug_id": 57974, "attachment_id": null, "id": 183186, "time": "2015-05-29T11:26:59Z", "creator": "dstojkov2002@yahoo.fr", "creation_time": "2015-05-29T11:26:59Z", "is_private": false, "text": "the method getOpenSessions() in the class Session return sessions that are not bound with the endpoint.\n\nIn my case I have 2 Endpoints one working with a login/password(go through request.login ) the other not.\nWhen requesting the open sessions for the \"logged\" one i get even the session of the others.\nThe specification said that getOpenSessions() return the opened sessions of only one endpoint"}, {"count": 1, "tags": [], "text": "Actually the endpoint share all the sessions with others Endpoints no matter if it is through login/password or not. \n\nI dont know how you implemented it but this should be something like:\n\n...\nprivate Map<Endpoint, List<Sessions>>  endPointMappers\n...\nSet<Sessions> getSessions(Endpoint ep) {\n    synchronized(lock) {\n        return new TreeSet<>(endPointMappers.get(ep));\n    }\n}\n\n\nAny fix in view ? Or at least a comment on this ? This make the use of websockets a true nightmare", "is_private": false, "bug_id": 57974, "id": 183463, "time": "2015-06-11T13:31:41Z", "creator": "dstojkov2002@yahoo.fr", "creation_time": "2015-06-11T13:31:41Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 57974, "attachment_id": null, "id": 183482, "time": "2015-06-12T14:37:33Z", "creator": "remm@apache.org", "creation_time": "2015-06-12T14:37:33Z", "is_private": false, "text": "Did you look at the code ? The endpointSessionMap map is keyed on the class (rather than the endpoint instance) so what you describe can only occur when you have multiple endpoints from the same endpoint class. This is probably not correct (need to check first though ...), and is easy to fix, but running into this issue should not be very common, and it also has an easy workaround. Adjusting severity accordingly."}, {"count": 3, "tags": [], "bug_id": 57974, "attachment_id": null, "is_private": false, "id": 183490, "time": "2015-06-12T16:45:15Z", "creator": "remm@apache.org", "creation_time": "2015-06-12T16:45:15Z", "text": "Attempting fix in trunk, will backport if there are no issues."}, {"count": 4, "tags": [], "bug_id": 57974, "attachment_id": null, "text": "This issue will occur frequently in POJO endpoints since they all share the same Endpoint implementation class (which is how I suspect the OP hit this issue).", "id": 183491, "time": "2015-06-12T17:23:31Z", "creator": "markt@apache.org", "creation_time": "2015-06-12T17:23:31Z", "is_private": false}, {"count": 5, "tags": [], "text": "Good point. So I'll backport the fix then.", "attachment_id": null, "bug_id": 57974, "id": 183492, "time": "2015-06-12T17:43:06Z", "creator": "remm@apache.org", "creation_time": "2015-06-12T17:43:06Z", "is_private": false}, {"count": 6, "attachment_id": null, "bug_id": 57974, "is_private": false, "id": 183493, "time": "2015-06-12T19:05:43Z", "creator": "remm@apache.org", "creation_time": "2015-06-12T19:05:43Z", "tags": [], "text": "TestWsWebSocketContainer, so it needs more work/review."}, {"count": 7, "tags": [], "bug_id": 57974, "attachment_id": null, "text": "r1685562 included in 8.0.24\nr1685570 included in 7.0.63", "id": 183532, "time": "2015-06-15T12:35:04Z", "creator": "remm@apache.org", "creation_time": "2015-06-15T12:35:04Z", "is_private": false}]