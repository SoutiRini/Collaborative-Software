[{"count": 0, "tags": [], "bug_id": 4975, "attachment_id": null, "text": "If a Servlet's service() method returns very early (just setting\nresponse code, not doing IO on the response), the client of the\nHttp10Adaptor sometimes sees a closed socket before the response \nis recieved.\n\nAdding a Thread.yield() to the servlet's service() method helps.\nThe effect is not noticeable when the servlet yields.\n\nThis looks like a race condition in conjunction with Thread scheduler\ntiming.", "id": 8093, "time": "2001-11-20T06:42:33Z", "creator": "stefan.eissing@greenbytes.de", "creation_time": "2001-11-20T06:42:33Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 4975, "attachment_id": null, "id": 9697, "time": "2002-01-16T20:05:04Z", "creator": "Larry.Isaacs@sas.com", "creation_time": "2002-01-16T20:05:04Z", "is_private": false, "text": "Jakarta Cactus was experiencing the same kind of problem when running on a high\npowered Windows system.  I would be curious if in your situation, the client\nwas also on the same system.\n\nThe fix was to add a delaySocketClose attribute to the Http10Connector which\nif set to \"true\", would add the Thread.yield() you are looking for.  The\ndefault is currently \"false\".  This fix is present in the current nightly 3.3.1\nbuild."}, {"count": 2, "tags": [], "creator": "william.barker@wilshire.com", "is_private": false, "id": 43309, "attachment_id": null, "bug_id": 4975, "creation_time": "2003-08-26T06:06:56Z", "time": "2003-08-26T06:06:56Z", "text": "*** Bug 22588 has been marked as a duplicate of this bug. ***"}]