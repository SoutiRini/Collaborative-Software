[{"count": 0, "attachment_id": null, "bug_id": 21335, "text": "I keep having this problem, that when ever I restart apache, and the start fails\n(f.ex. because I'm testing a php-module that doesn't work),\napache won't start afterwards. It complains about File exists(17): Cannot\nallocate shared memory.\n\nI remove the ssl_scache file - so that's not it - I belive it's these \n\nipcs -a | grep apache\n\n------ Semaphore Arrays --------\nkey        semid      owner      perms      nsems\n0x00000000 32768      apache    600        1\n0x00000000 2490434    apache    600        1\n0x00000000 2555971    apache    600        1\n0x00000000 2621508    apache    600        1\n\nI tried to remove them, but ipcrm sem 1 \nsaid, cannot remove id.\n\nIt's that annoying SSL that breaks EVERY time I try something and apache won't\nstart. when I fix it, and apache won't start due to this annoying SSL problem.\n\nThis has NEVER been there with mod_ssl and apache1 - and I've done this in many\nyears.", "id": 39971, "time": "2003-07-04T07:02:34Z", "creator": "kl@vsen.dk", "creation_time": "2003-07-04T07:02:34Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 21335, "attachment_id": null, "text": "1) stray semaphores don't affect whether or not Apache can allocate\nshared memory\n\nDoesn't ipcs show some shared memory owned by the user that started Apache?\n\nSee if deleting that will allow Apache to start again.\n\n2) cleaning up those stray semaphores:\n\nThe command to remove the sem is \"ipcrm sem ###\", such as\n\nipcrm sem 32768\n\nAlso, you have to do this as a user with the proper permissions.\n", "id": 40352, "time": "2003-07-10T15:23:59Z", "creator": "trawick@apache.org", "creation_time": "2003-07-10T15:23:59Z", "is_private": false}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "text": "Yeah, this stuff is bad, the APR shm code is more _EXCL-happy than MM was.\nI've got a change to mod_ssl to make it use anon shm by default and fall back on\nfile-based which makes most of these problems go away on modern platforms. ", "id": 40371, "time": "2003-07-10T20:59:21Z", "bug_id": 21335, "creation_time": "2003-07-10T20:59:21Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "john@benden.co.uk", "attachment_id": null, "text": "I'm getting this loads of times on HPUX 11i using Apache 2.0.48 mod_perl \n0.9_10. It seems to happen whenever you do a graceful and sometimes removing \nthe shared memory using ipcs does not work, you have to remove the whole /logs \ndirectory (where ever ssl_scache is being stored). Is there an ETA for a fix on \nthis?", "id": 53599, "time": "2004-03-07T09:00:03Z", "bug_id": 21335, "creation_time": "2004-03-07T09:00:03Z", "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 21335, "text": "If you use \"SSLMutex default\", and the shmcb session cache with this fix applied:\n\nhttp://cvs.apache.org/viewcvs.cgi/httpd-2.0/modules/ssl/ssl_scache_shmcb.c?r1=1.23&r2=1.24\n\nI think that avoids the problems.", "id": 53609, "time": "2004-03-07T18:37:23Z", "creator": "jorton@redhat.com", "creation_time": "2004-03-07T18:37:23Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "bug_id": 21335, "attachment_id": null, "text": "*** Bug 29177 has been marked as a duplicate of this bug. ***", "id": 58018, "time": "2004-05-25T08:23:09Z", "creator": "jorton@redhat.com", "creation_time": "2004-05-25T08:23:09Z", "is_private": false}, {"count": 6, "tags": [], "creator": "jorton@redhat.com", "is_private": false, "text": "*** Bug 30147 has been marked as a duplicate of this bug. ***", "id": 60791, "time": "2004-07-19T10:15:34Z", "bug_id": 21335, "creation_time": "2004-07-19T10:15:34Z", "attachment_id": null}, {"count": 7, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 144222, "time": "2011-02-12T09:52:25Z", "bug_id": 21335, "creation_time": "2011-02-12T09:52:25Z", "is_private": false, "text": "I don't think this issue remains in current 2.2.x releases, possibly not even 2.0.x."}]