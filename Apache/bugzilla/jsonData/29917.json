[{"count": 0, "attachment_id": null, "creator": "martin.schloeter@mb-interactive.de", "is_private": false, "id": 60147, "time": "2004-07-05T10:58:15Z", "bug_id": 29917, "creation_time": "2004-07-05T10:58:15Z", "tags": [], "text": "We have the effect, that data posted from a html form is truncated/corrupted \ndependend on size of data if we use Tomcat 5 together with IIS 5 connected via \nisapi_redirector2.dll version 2.0.4. \nThe resulting effect is, that there is no server response (browser \nshows \"Server not found\" etc) OR the some fields of the form which are ordered \nbehind the fields with large content are missing, arriving as null in the \nTomcat request object. Direcly using Tomcat via port 8080 the effect does not \noccur, all's fine.\n\nThe strange effect is, that this only happens within a specific range of data \nsize. Up to around 53485 bytes of data all works fine. With some bytes more \nthere is the crash. With a couple more of data - seems to be when all over \nsize exceed something like 64k - all works fine again !?!\n\nThe following simple JSP demonstrates this effekt when used on this \nconfiguration.\nThere is a hidden field with a basic data amount of 50000 characters. \nAdditional amount can be entered in text field. With 3485 characters a default \n(making 53485 chars payload) it's still working on my config. If you enter \n3490 as additional amount there is the crash (sometimes you have to post \ntwice).\nWith 14000 chars additional data it works again on my config.\nThe hidden field \"hiddenField\" is just do demonstrate that with some amounts \nof data the server will still be alive after post, but that data is missing \n(hard to reproduce).\nI took a look into the source of the ISAPI-DLL, but I'm not experienced enough \non this terretory to fix it myself, sorry.\n\nThanks in advance\nMartin Schl\u00f6ter\n---- JSP demonstration problem\n<%@page contentType=\"text/html\"%>\n<html>\n<head><title>bigForm.jsp</title></head>\n<body>\n<h1>bigForm.jsp</h1>\n<%\n\tfinal int BASIC_AMOUNT = 50000;\n\t\n\tStringBuffer basicData = new StringBuffer(BASIC_AMOUNT);\n\tfor(int i = 0; i < BASIC_AMOUNT; i++) {\n\t\tbasicData.append('a');\n\t}\n\t\n\tString additionalData = null;\n\tif(\"POST\".equalsIgnoreCase(request.getMethod())) {\n\t\tString basicDataReceived = request.getParameter(\"basicData\");\n\t\tadditionalData = request.getParameter(\"additionalData\");\n\t\t\n%>\n<p>\tReceived <%=basicDataReceived.length()%> bytes for basic data field<br>\n\tReceived <%=additionalData.length()%> bytes for additional data \nfield<br>\n\tmyHiddenField=<%=request.getParameter(\"myHiddenField\")%>\n</p>\n\n<%\n\t}\n\tif(additionalData == null) additionalData  = \"\";\n%>\t\t\n<script language=\"JavaScript\">\n<!--\n\tfunction prepareData() {\n\t\tvar data = \"\";\n\t\tvar num = document.getElementById(\"dataAmountToSend\").value;\n\t\tfor(var i = 0; i < num; i++) data += \"x\";\n\t\tdocument.getElementById(\"additionalData\").innerText = data;\n\t\treturn true;\n\t}\n// -->\n</script>\nBasic data amount = <%=BASIC_AMOUNT%> bytes<br>\nAdditional data amount to send (bytes): <input type=\"text\" \nid=\"dataAmountToSend\" name=\"dataAmountToSend\" value=\"3485\" ><br>\n<form method=\"POST\" action=\"\" onsubmit=\"prepareData()\">\n<input type=\"hidden\" name=\"basicData\" value=\"<%=basicData.toString()%>\">\nData:<br>\n<textarea id=\"additionalData\" name=\"additionalData\" cols=\"60\" rows=\"10\"><%\n=additionalData%></textarea>\n<input type=\"hidden\" name=\"myHiddenField\" value=\"42\">\n<br>\n<input type=\"submit\">\n</form>\n</body>\n</html>"}, {"count": 1, "text": "This bug is really a serious problem, and makes our \"useless\" in combination \nwith IE. I can not understand why noone fixes it? We've been waiting for a \nsolution for a long time..", "bug_id": 29917, "is_private": false, "id": 64216, "time": "2004-09-25T23:15:05Z", "creator": "tsi@enonic.com", "creation_time": "2004-09-25T23:15:05Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 29917, "text": "A few typos there. Meant that our _application_ is useless when combined with \n_iis_  :)", "id": 64217, "time": "2004-09-25T23:17:33Z", "creator": "tsi@enonic.com", "creation_time": "2004-09-25T23:17:33Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 29917, "text": "I don't know if the following patch still works but it did fix the problem\nfor me in JK2.0.2 (i think):\n\nhttp://marc.theaimsgroup.com/?l=tomcat-dev&m=103944368410308&w=2", "id": 65178, "time": "2004-10-15T12:49:49Z", "creator": "j.tervoorde@home.nl", "creation_time": "2004-10-15T12:49:49Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "yoavs@computer.org", "attachment_id": null, "text": "As of November 15, 2004, JK2 is no longer supported. All bugs related to JK2 \nwill be marked as WONTFIX. In its place, some of its features have been \nbackported to jk1. Most of those features will be seen in 1.2.7, which is \nslated for release on November 30th, 2004.\n\nAnother alternative is the ajp addition to mod_proxy which will be part of \napache 2.\n\nFor more information on the Tomat connectors docs at\nhttp://jakarta.apache.org/tomcat/connectors-doc/\n", "id": 67565, "time": "2004-11-29T19:50:37Z", "bug_id": 29917, "creation_time": "2004-11-29T19:50:37Z", "is_private": false}]