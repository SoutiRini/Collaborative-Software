[{"count": 0, "tags": [], "bug_id": 54051, "text": "Method getDefaultCacheFile() returns an invalid file name if the user has no home directory set. In that case the name of the fop user directory (FOP_USER_DIR!) is returned and not the name of the cache file (DEFAULT_CACHE_FILENAME).\n\nWrong Code:\n\n    public static File getDefaultCacheFile(boolean forWriting) {\n        File userHome = getUserHome();\n        if (userHome != null) {\n            File fopUserDir = new File(userHome, FOP_USER_DIR);\n            if (forWriting) {\n                boolean writable = fopUserDir.canWrite();\n                if (!fopUserDir.exists()) {\n                    writable = fopUserDir.mkdir();\n                }\n                if (!writable) {\n                    userHome = getTempDirectory();\n                    fopUserDir = new File(userHome, FOP_USER_DIR);\n                    fopUserDir.mkdir();\n                }\n            }\n            return new File(fopUserDir, DEFAULT_CACHE_FILENAME);\n        }\n        return new File(FOP_USER_DIR);\n    }\n\nIf getUserHome() does not return a directory the default name must be returned (and not the name of the directory):\n\n        return new File(DEFAULT_CACHE_FILENAME);", "id": 162926, "time": "2012-10-25T12:09:59Z", "creator": "mg@abas.de", "creation_time": "2012-10-25T12:09:59Z", "is_private": false, "attachment_id": null}]