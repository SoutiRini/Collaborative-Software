[{"count": 0, "tags": [], "bug_id": 7690, "text": "I found that the org.apache.coyote.tomcat4.CoyoteConnector connector logs all \nremote IP addresses as 127.0.0.1. This behavior is different than that of \norg.apache.catalina.connector.http.HttpConnector. i.e. if you swap out \norg.apache.coyote.tomcat4.CoyoteConnector with \norg.apache.catalina.connector.http.HttpConnector in the below config file, the \naccess log file will contain the client's true IP address. With the Coyote \nconnector it always prints out the localhost address.\n\n<Server port=\"8005\"\n        shutdown=\"SHUTDOWN\"\n        debug=\"0\">\n        <Service name=\"Tomcat-Standalone\">\n                <Connector \nclassName=\"org.apache.coyote.tomcat4.CoyoteConnector\"\n                        port=\"80\"\n                        minProcessors=\"5\"\n                        maxProcessors=\"75\"\n                        enableLookups=\"true\"\n                        redirectPort=\"443\"\n                        acceptCount=\"10\"\n                        debug=\"0\"\n                        connectionTimeout=\"20000\"/>\n                <Connector \nclassName=\"org.apache.coyote.tomcat4.CoyoteConnector\"\n                        port=\"443\"\n                        minProcessors=\"5\"\n                        maxProcessors=\"75\"\n                        enableLookups=\"true\"\n                        acceptCount=\"10\"\n                        debug=\"0\"\n                        scheme=\"https\"\n                        secure=\"true\">\n                        <Factory \nclassName=\"org.apache.catalina.net.SSLServerSocketFactory\"\n                                clientAuth=\"false\"\n                                protocol=\"TLS\"/>\n                </Connector>\n                <Engine name=\"Standalone\"\n                        defaultHost=\"localhost\"\n                        debug=\"0\">\n                        <Logger \nclassName=\"org.apache.catalina.logger.FileLogger\"\n                                prefix=\"catalina_log.\"\n                                suffix=\".txt\"\n                                timestamp=\"true\"/>\n                        <Host name=\"localhost\"\n                                debug=\"0\"\n                                appBase=\"webapps\"\n                                unpackWARs=\"true\">\n                                <Valve \nclassName=\"org.apache.catalina.valves.AccessLogValve\"\n                                        directory=\"logs\"\n                                        prefix=\"localhost_access_log.\"\n                                        suffix=\".txt\"\n                                        pattern=\"common\"/>\n                                <Logger \nclassName=\"org.apache.catalina.logger.FileLogger\"\n                                        directory=\"logs\"\n                                        prefix=\"localhost_log.\"\n                                        suffix=\".txt\"\n                                        timestamp=\"true\"/>\n                                <Context path=\"\"\n                                        docBase=\"ROOT\"\n                                        debug=\"0\"\n                                        reloadable=\"true\"/>\n                        </Host>\n                </Engine>\n        </Service>\n</Server>", "id": 12701, "time": "2002-04-02T17:47:59Z", "creator": "jemiller@uchicago.edu", "creation_time": "2002-04-02T17:47:59Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 7690, "text": "It turns out it is not implemented (although I thought it was). I will port some\ncode from the old HTTP/1.1 connector to fix this.", "id": 12707, "time": "2002-04-02T19:30:51Z", "creator": "remm@apache.org", "creation_time": "2002-04-02T19:30:51Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 7690, "text": "It is fixed in Coyote 1.0 beta 5.", "count": 2, "id": 13028, "time": "2002-04-08T14:22:08Z", "creator": "remm@apache.org", "creation_time": "2002-04-08T14:22:08Z", "is_private": false}]