[{"count": 0, "tags": [], "creator": "pcliuyang@gmail.com", "attachment_id": 29971, "text": "Created attachment 29971\njmx log screenshot\n\nI find if webpage is not utf8,View Results Tree have a lot of Garbage characters Garbage characters(even I changed Content coding),why?\n\nJMeter:v2.9\njmeter-plugins :v0.56\nJRE:java 7 u13\nOS:windows 7 x64\n\n\nDebug Sampler:\nJMeterVariables:\nJMeterThread.last_sample_ok=true\nJMeterThread.pack=org.apache.jmeter.threads.SamplePackage@15d30b6\nSTART.HMS=172634\nSTART.MS=1361352394201\nSTART.YMD=20130220\nTESTSTART.MS=1361352405017\n\nJMeterProperties:\nHTTPResponse.parsers=htmlParser wmlParser\nSTART.HMS=172634\nSTART.MS=1361352394201\nSTART.YMD=20130220\nTESTSTART.MS=1361352405017\nbeanshell.server.file=../extras/startup.bsh\nclassfinder.functions.contain=.functions.\nclassfinder.functions.notContain=.gui.\ncookies=cookies\nhtmlParser.types=text/html application/xhtml+xml application/xml text/xml\njmeter.laf.mac=System\njmeter.version=2.9 r1437961\nlog_level.jmeter=INFO\nlog_level.jmeter.junit=DEBUG\nlog_level.jorphan=INFO\nnot_in_menu=HTML Parameter Mask,HTTP User Parameter Modifier\nremote_hosts=127.0.0.1\nsampleresult.timestamp.start=true\nsystem.properties=system.properties\nupgrade_properties=/bin/upgrade.properties\nuser.properties=user.properties\nwmlParser.className=org.apache.jmeter.protocol.http.parser.RegexpHTMLParser\nwmlParser.types=text/vnd.wap.wml \nxml.parser=org.apache.xerces.parsers.SAXParser\n\nSystemProperties:\nawt.toolkit=sun.awt.windows.WToolkit\nfile.encoding=GBK\nfile.encoding.pkg=sun.io\nfile.separator=\\\njava.awt.graphicsenv=sun.awt.Win32GraphicsEnvironment\njava.awt.printerjob=sun.awt.windows.WPrinterJob\njava.class.path=S:\\apache-jmeter-2.9\\bin\\ApacheJMeter.jar;S:\\apache-jmeter-2.9\\lib\\activation-1.1.1.jar;S:\\apache-jmeter-2.9\\lib\\avalon-framework-4.1.4.jar;S:\\apache-jmeter-2.9\\lib\\bsf-2.4.0.jar;S:\\apache-jmeter-2.9\\lib\\bsh-2.0b5.jar;S:\\apache-jmeter-2.9\\lib\\bshclient.jar;S:\\apache-jmeter-2.9\\lib\\commons-codec-1.6.jar;S:\\apache-jmeter-2.9\\lib\\commons-collections-3.2.1.jar;S:\\apache-jmeter-2.9\\lib\\commons-httpclient-3.1.jar;S:\\apache-jmeter-2.9\\lib\\commons-io-2.2.jar;S:\\apache-jmeter-2.9\\lib\\commons-jexl-1.1.jar;S:\\apache-jmeter-2.9\\lib\\commons-jexl-2.1.1.jar;S:\\apache-jmeter-2.9\\lib\\commons-lang-2.6.jar;S:\\apache-jmeter-2.9\\lib\\commons-lang3-3.1.jar;S:\\apache-jmeter-2.9\\lib\\commons-logging-1.1.1.jar;S:\\apache-jmeter-2.9\\lib\\commons-net-3.1.jar;S:\\apache-jmeter-2.9\\lib\\excalibur-datasource-1.1.1.jar;S:\\apache-jmeter-2.9\\lib\\excalibur-instrument-1.0.jar;S:\\apache-jmeter-2.9\\lib\\excalibur-logger-1.1.jar;S:\\apache-jmeter-2.9\\lib\\excalibur-pool-1.2.jar;S:\\apache-jmeter-2.9\\lib\\geronimo-jms_1.1_spec-1.1.1.jar;S:\\apache-jmeter-2.9\\lib\\htmllexer-2.1.jar;S:\\apache-jmeter-2.9\\lib\\htmlparser-2.1.jar;S:\\apache-jmeter-2.9\\lib\\httpclient-4.2.3.jar;S:\\apache-jmeter-2.9\\lib\\httpcore-4.2.3.jar;S:\\apache-jmeter-2.9\\lib\\httpmime-4.2.3.jar;S:\\apache-jmeter-2.9\\lib\\jcharts-0.7.5.jar;S:\\apache-jmeter-2.9\\lib\\jdom-1.1.2.jar;S:\\apache-jmeter-2.9\\lib\\jodd-core-3.4.1.jar;S:\\apache-jmeter-2.9\\lib\\jodd-lagarto-3.4.1.jar;S:\\apache-jmeter-2.9\\lib\\jorphan.jar;S:\\apache-jmeter-2.9\\lib\\jsoup-1.7.1.jar;S:\\apache-jmeter-2.9\\lib\\jtidy-r938.jar;S:\\apache-jmeter-2.9\\lib\\junit-4.10.jar;S:\\apache-jmeter-2.9\\lib\\logkit-2.0.jar;S:\\apache-jmeter-2.9\\lib\\mail-1.4.4.jar;S:\\apache-jmeter-2.9\\lib\\oro-2.0.8.jar;S:\\apache-jmeter-2.9\\lib\\rhino-1.7R4.jar;S:\\apache-jmeter-2.9\\lib\\serializer-2.7.1.jar;S:\\apache-jmeter-2.9\\lib\\slf4j-api-1.7.2.jar;S:\\apache-jmeter-2.9\\lib\\soap-2.3.1.jar;S:\\apache-jmeter-2.9\\lib\\tika-core-1.3.jar;S:\\apache-jmeter-2.9\\lib\\tika-parsers-1.3.jar;S:\\apache-jmeter-2.9\\lib\\xalan-2.7.1.jar;S:\\apache-jmeter-2.9\\lib\\xercesImpl-2.9.1.jar;S:\\apache-jmeter-2.9\\lib\\xml-apis-1.3.04.jar;S:\\apache-jmeter-2.9\\lib\\xmlgraphics-commons-1.3.1.jar;S:\\apache-jmeter-2.9\\lib\\xmlpull-1.1.3.1.jar;S:\\apache-jmeter-2.9\\lib\\xpp3_min-1.1.4c.jar;S:\\apache-jmeter-2.9\\lib\\xstream-1.4.2.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_components.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_core.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_ftp.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_functions.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_http.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_java.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_jdbc.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_jms.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_junit.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_ldap.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_mail.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_monitors.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_native.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_report.jar;S:\\apache-jmeter-2.9\\lib\\ext\\ApacheJMeter_tcp.jar;S:\\apache-jmeter-2.9\\lib\\junit\\test.jar\njava.class.version=51.0\njava.endorsed.dirs=D:\\Program Files\\java\\lib\\endorsed\njava.ext.dirs=D:\\Program Files\\java\\lib\\ext;C:\\Windows\\Sun\\Java\\lib\\ext\njava.home=D:\\Program Files\\java\njava.io.tmpdir=C:\\Users\\admin\\AppData\\Local\\Temp\\\njava.library.path=D:\\Program Files\\java\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files (x86)\\Common Files\\NetSarang;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;D:\\Program Files\\fast;d:\\Program Files\\Bitvise Tunnelier\\;d:\\.android\\/tools;d:\\Program Files\\VDownloader;D:\\PROGRA~1\\CONDUS~1\\DISKEE~1\\;D:\\Program Files\\nodejs\\;C:\\Users\\admin\\AppData\\Roaming\\npm\\;.\njava.runtime.name=Java(TM) SE Runtime Environment\njava.runtime.version=1.7.0_13-b20\njava.specification.name=Java Platform API Specification\njava.specification.vendor=Oracle Corporation\njava.specification.version=1.7\njava.vendor=Oracle Corporation\njava.vendor.url=http://java.oracle.com/\njava.vendor.url.bug=http://bugreport.sun.com/bugreport/\njava.version=1.7.0_13\njava.vm.info=mixed mode, sharing\njava.vm.name=Java HotSpot(TM) Client VM\njava.vm.specification.name=Java Virtual Machine Specification\njava.vm.specification.vendor=Oracle Corporation\njava.vm.specification.version=1.7\njava.vm.vendor=Oracle Corporation\njava.vm.version=23.7-b01\nline.separator=\n\nlog4j.configuration=file:S:\\apache-jmeter-2.9\\bin\\log4j.conf\norg.apache.commons.logging.Log=org.apache.commons.logging.impl.LogKitLogger\nos.arch=x86\nos.name=Windows 7\nos.version=6.1\npath.separator=;\nsun.arch.data.model=32\nsun.awt.enableExtraMouseButtons=true\nsun.boot.class.path=D:\\Program Files\\java\\lib\\resources.jar;D:\\Program Files\\java\\lib\\rt.jar;D:\\Program Files\\java\\lib\\sunrsasign.jar;D:\\Program Files\\java\\lib\\jsse.jar;D:\\Program Files\\java\\lib\\jce.jar;D:\\Program Files\\java\\lib\\charsets.jar;D:\\Program Files\\java\\lib\\jfr.jar;D:\\Program Files\\java\\classes\nsun.boot.library.path=D:\\Program Files\\java\\bin\nsun.cpu.endian=little\nsun.cpu.isalist=pentium_pro+mmx pentium_pro pentium+mmx pentium i486 i386 i86\nsun.desktop=windows\nsun.io.unicode.encoding=UnicodeLittle\nsun.java.command=S:\\apache-jmeter-2.9\\bin\\ApacheJMeter.jar\nsun.java.launcher=SUN_STANDARD\nsun.jnu.encoding=GBK\nsun.management.compiler=HotSpot Client Compiler\nsun.net.http.allowRestrictedHeaders=true\nsun.os.patch.level=Service Pack 1\nuser.country=CN\nuser.dir=S:\\apache-jmeter-2.9\\bin\nuser.home=D:\nuser.language=zh\nuser.name=admin\nuser.script=\nuser.timezone=Asia/Shanghai\nuser.variant=", "id": 165398, "time": "2013-02-20T09:27:33Z", "bug_id": 54589, "creation_time": "2013-02-20T09:27:33Z", "is_private": false}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "text": "Date: Sun Feb 24 21:46:53 2013\nNew Revision: 1449555\n\nURL: http://svn.apache.org/r1449555\nLog:\nBug 54589 - View Results Tree have a lot of Garbage characters Garbage characters\nBugzilla Id: 54589\n\nModified:\n    jmeter/trunk/src/core/org/apache/jmeter/samplers/SampleResult.java\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSampleResult.java\n    jmeter/trunk/xdocs/changes.xml", "id": 165465, "time": "2013-02-24T22:06:49Z", "bug_id": 54589, "creation_time": "2013-02-24T22:06:49Z", "is_private": false}, {"count": 2, "tags": [], "text": "Hello,\nThanks for report.\n\nIssues comes from the fact that response does not contain charset indication.\n\nSo you need to add this (you must use nightly build that will be available in some time):\nsampleresult.default.encoding=GBK", "is_private": false, "id": 165466, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2013-02-24T22:08:22Z", "bug_id": 54589, "creation_time": "2013-02-24T22:08:22Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 54589, "attachment_id": null, "is_private": false, "id": 165468, "time": "2013-02-25T00:32:53Z", "creator": "sebb@apache.org", "creation_time": "2013-02-25T00:32:53Z", "text": "(In reply to comment #2)\n> \n> Issues comes from the fact that response does not contain charset indication.\n\nThe HTTP response headers don't contain the info, but the HTML does.\n\nHowever JMeter does not currently detect that; perhaps it should if there is no charset in the header.\n\n> So you need to add this (you must use nightly build that will be available\n> in some time):\n> sampleresult.default.encoding=GBK\n\nThat assumes all the pages in the test have the same default."}, {"count": 4, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "(In reply to comment #3)\n> (In reply to comment #2)\n> > \n> > Issues comes from the fact that response does not contain charset indication.\n> \n> The HTTP response headers don't contain the info, but the HTML does.\n> \n> However JMeter does not currently detect that; perhaps it should if there is\n> no charset in the header.\n\nActually, the code does try to extract the <meta http-equiv=\"content-type\" tag.\nBut it fails in this case because of a bug in handling double-byte encodings.\n\nI'm working on fixing that.\n\n> > So you need to add this (you must use nightly build that will be available\n> > in some time):\n> > sampleresult.default.encoding=GBK\n\nThis will be reverted, as it's not needed.\n \n> That assumes all the pages in the test have the same default.", "id": 165491, "time": "2013-02-26T16:03:08Z", "bug_id": 54589, "creation_time": "2013-02-26T16:03:08Z", "is_private": false}, {"count": 5, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "Fixed in SVN by correcting extraction of meta content-type:\n\n\nURL: http://svn.apache.org/r1450262\nLog:\nView Results Tree have a lot of Garbage characters if html page uses double-byte charset\nBugzilla Id: 54589\n\nModified:\n    jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPSampleResult.java\n    jmeter/trunk/xdocs/changes.xml\n\n\nThe fix will be in snapshot builds from r1450262.", "id": 165492, "time": "2013-02-26T16:34:23Z", "bug_id": 54589, "creation_time": "2013-02-26T16:34:23Z", "is_private": false}]