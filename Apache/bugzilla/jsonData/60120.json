[{"count": 0, "text": "Created attachment 34238\nSimple test plan with HTTP POST Request\n\nA HTTP Request configured to POST a parameter containing the @ symbol sees that parameter silently encoded. The @ symbol is incorrectly encoded as %40. This occurs whether I tick the 'Encode?' check box or not. \n\nTo demonstrate the issue I have attached a simple .jmx that should be executed against the following HTML. \n\n<html><body>\n<img alt=\"Captcha\" class=\"captcha-image\" width=\"100\" height=\"50\"\n             src=\"/IqGo6EM1JEVZ+MSRJqUSo@qhjVMSFBTs/37/0/1\">\n</img>\n<input type=\"hidden\" name=\"captchaCapiId\" value=\"IqGo6EM1JEVZ+MSRJqUSo@qhjVMSFBTs\">\n</body></html>", "creator": "stuart.barlow@gmail.com", "is_private": false, "id": 193649, "time": "2016-09-12T14:46:26Z", "bug_id": 60120, "creation_time": "2016-09-12T14:46:26Z", "tags": [], "attachment_id": 34238}, {"count": 1, "tags": [], "bug_id": 60120, "is_private": false, "id": 193777, "attachment_id": null, "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-09-17T13:03:09Z", "time": "2016-09-17T13:03:09Z", "text": "Hi Stuart,\nThe attached test plan does not have a POST method.\nCan you provide the correct one ?\nThank you"}, {"count": 2, "tags": [], "creator": "stuart.barlow@gmail.com", "is_private": false, "text": "Created attachment 34259\nTest Plan with POST", "id": 193778, "time": "2016-09-17T13:18:52Z", "bug_id": 60120, "creation_time": "2016-09-17T13:18:52Z", "attachment_id": 34259}, {"count": 3, "tags": [], "text": "Sorry. I attached the wrong .jmx\nThe correct one has been attached now.", "attachment_id": null, "id": 193779, "creator": "stuart.barlow@gmail.com", "time": "2016-09-17T13:20:44Z", "bug_id": 60120, "creation_time": "2016-09-17T13:20:44Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 60120, "is_private": false, "id": 193782, "attachment_id": 34260, "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-09-17T13:50:35Z", "time": "2016-09-17T13:50:35Z", "text": "Created attachment 34260\nWorkaround\n\nHello,\nYour issue is due to the fact that we use UrlEncodedFormEntity class from HTTPClient when posting a form.\n\nI'll investigate if it's a bug or not.\nMeanwhile attached a way to workaround your problem.\nRegards"}, {"count": 5, "tags": [], "bug_id": 60120, "attachment_id": null, "id": 193832, "time": "2016-09-20T10:43:52Z", "creator": "stuart.barlow@gmail.com", "creation_time": "2016-09-20T10:43:52Z", "is_private": false, "text": "The workaround worked. Thanks.\n\nPersonally I think it is a bug. I'd expect the Encode? checkbox to alter the paramter. At the moment it appears from a user perspective to have no affect."}, {"count": 6, "tags": [], "text": "(In reply to Stuart Barlow from comment #5)\n> The workaround worked. Thanks.\n> \n> Personally I think it is a bug. I'd expect the Encode? checkbox to alter the\n> paramter. At the moment it appears from a user perspective to have no affect.\n\nHi Stuart,\nIf you feel it's a bug, then can you joint httpclient-users@hc.apache.org and participate to discussion \"UrlEncodedFormEntity and parameter value encoding\"\n\nThank you\nRegards", "attachment_id": null, "id": 193966, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2016-09-24T08:53:09Z", "bug_id": 60120, "creation_time": "2016-09-24T08:53:09Z", "is_private": false}, {"count": 7, "text": "(In reply to Stuart Barlow from comment #5)\n> The workaround worked. Thanks.\n> \n> Personally I think it is a bug. I'd expect the Encode? checkbox to alter the\n> paramter. At the moment it appears from a user perspective to have no affect.\n\nHi Stuart,\nIn fact maybe you should check that the bug is not in your server stack.\nEncoding of @ should not break your code.\nFrankly the RFC is not very clear on that side so it's hard to tell if encoding should be done or not.\nAnyway JAva encodes it so I think it's not a bug.\n\nI am closing issue as WORKSFORME. Feel free to reopen if you find a reference telling it should not be.\nAnd I am of course interested if it ends up to be a bug in your server stack.\nRegards", "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "id": 194021, "time": "2016-09-27T09:01:39Z", "bug_id": 60120, "creation_time": "2016-09-27T09:01:39Z", "tags": [], "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 60120, "is_private": false, "id": 194029, "attachment_id": null, "creator": "stuart.barlow@gmail.com", "creation_time": "2016-09-27T10:34:48Z", "time": "2016-09-27T10:34:48Z", "text": "Hi Philippe\n\nI'm not sure a Wikipedia page can be used definitively but I found this\nhttps://en.wikipedia.org/wiki/Percent-encoding#Percent-encoding_reserved_characters\n\n\"When a character from the reserved set (a \"reserved character\") has special meaning (a \"reserved purpose\") in a certain context, and a URI scheme says that it is necessary to use that character for some other purpose, then the character must be percent-encoded.\"\n\nI think the RFCs leave it open and optional. It depends on the context. Likewise it should probably be optional for JMeter users too. \n\nThanks for looking into it and I see you've put effort in but I would still disagree. I feel JMeter is defective. From the users' perspective, whether they click the 'encode?' checkbox or not should influence whether that parameter is percent-encoded or not. At the moment @ is encoded whether the check box is clicked or not. The user isn't aware or concerned what underlying API is used. Just because Java does it, doesn't mean it is right :)\n\nRegards"}]