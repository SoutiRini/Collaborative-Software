[{"count": 0, "tags": [], "bug_id": 429, "is_private": false, "text": "The same code works just fine on tomcat 3.1.1.\r\n\r\nThe problem to me appears to be due the fact that I save a referance to the HttpSessionFacade ( HttpSession to the servlet) in the ServletContext.\r\nIn the next request when I try to access this object after retrieving it from the context, tomcat has already called the method recycle() on the facade object and the HttpSession reference inside the class HttpSessionFacade is null and I end up with NullPointerException. \r\n\r\n========= 8<===== EXCEPTION THROWN==== 8< =====\r\n\r\njava.lang.NullPointerException\r\n at\r\norg.apache.tomcat.facade.HttpSessionFacade.invalidate(HttpSessionFacade.java\r\n:136)\r\n at TestSessionBehaviour.doPost(TestSessionBehaviour.java:33)\r\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\r\n at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\r\n at org.apache.tomcat.core.ServletWrapper.doService(ServletWrapper.java:404)\r\n at org.apache.tomcat.core.Handler.service(Handler.java:286)\r\n at org.apache.tomcat.core.ServletWrapper.service(ServletWrapper.java:372)\r\n at\r\norg.apache.tomcat.core.ContextManager.internalService(ContextManager.java:79\r\n7)\r\n at org.apache.tomcat.core.ContextManager.service(ContextManager.java:743)\r\n at\r\norg.apache.tomcat.service.http.HttpConnectionHandler.processConnection(HttpC\r\nonnectionHandler.java:210)\r\n at\r\norg.apache.tomcat.service.TcpWorkerThread.runIt(PoolTcpEndpoint.java:416)\r\n at\r\norg.apache.tomcat.util.ThreadPool$ControlRunnable.run(ThreadPool.java:498)\r\n at java.lang.Thread.run(Thread.java:484)\r\n", "id": 399, "time": "2001-01-11T06:11:18Z", "creator": "dev@tomcat.apache.org", "creation_time": "2001-01-11T06:11:18Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 429, "is_private": false, "text": "Fixed in nightly build, will be available in 3.3M2", "id": 1136, "time": "2001-03-09T15:37:35Z", "creator": "cmanolache@yahoo.com", "creation_time": "2001-03-09T15:37:35Z", "attachment_id": null}]