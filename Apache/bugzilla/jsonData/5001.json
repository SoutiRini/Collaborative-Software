[{"count": 0, "tags": [], "creator": "jamie.lokier@degree2.com", "attachment_id": null, "text": "I am trying to scale an SVG image, by using external-graphic with\nthe content-width and content-height attributes set.\n\nUnfortunately whether I use \"scale-to-fit\" (to fit the width/height attributes),\nor an explicit length, the graphic itself is not scaled.\n\nI was not 100% sure that content-width and content-height should scale\nthe image, so I looked at the \"XHTML to XSL formatting objects\" example\nXSLT file at http://www.antennahouse.com/axf11sampleEN.htm.\n\nFrom there it looks like I'm generating the right XSL, and FOP is\nnot scaling the images as it should.\n\nI have seen the example of a scaled image in the FOP documentation.\nIt uses an instream-foreign-object SVG, which references the external\nSVG using \"svg:image\" and explicitly set width and height.\n\nThis does rescale the image, but unfortunately there is no way to have\nthe image size determined from the layout context.  For example, XSL\nsizes such as \"80%\" to show an image with 80% of the width of the\ncurrent reference port do not work.\n\nI am stuck working around this problem by using explicit sizes, and the\ninstream-foreign-object method for rescaling the image.\n\nIt would be nice if content-width and content-height were honoured.\n\ncheers,\n-- Jamie", "id": 8144, "time": "2001-11-21T07:11:02Z", "bug_id": 5001, "creation_time": "2001-11-21T07:11:02Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 5001, "attachment_id": null, "is_private": false, "id": 8195, "time": "2001-11-22T06:09:01Z", "creator": "corinna@infix.de", "creation_time": "2001-11-22T06:09:01Z", "text": "Yes, these properties are ignored, see bug 3279.\n\nTo scale an image using external-graphic, put it into a table-cell of \nappropriate width. The height will then be scaled automatically."}, {"count": 2, "tags": [], "bug_id": 5001, "text": "Unfortunately I didn't have much luck with that.\nThe image was scaled but positioned wrongly, off the bottom of its\narea instead of in the area.\n\nI have tried to fix content-width and content-height and I've had some\nluck.  (\"scale-to-fit\" now works).  However now I don't have the image\nat the correct horizontal position, and I don't really understand the\nflow of position data well enough.\n\ncontent-width=\"scale-to-fit\" width=\"80%\" doesn't work (it produces a bad PDF\ncontaining \"NaN\"), which of course is really what I want to do.\n", "id": 8392, "time": "2001-11-28T07:54:15Z", "creator": "jamie.lokier@degree2.com", "creation_time": "2001-11-28T07:54:15Z", "is_private": false, "attachment_id": null}, {"attachment_id": 846, "tags": [], "bug_id": 5001, "text": "Created attachment 846\nThis patch makes content-width work to some extent", "count": 3, "id": 8393, "time": "2001-11-28T07:58:14Z", "creator": "jamie.lokier@degree2.com", "creation_time": "2001-11-28T07:58:14Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 5001, "attachment_id": null, "is_private": false, "id": 8395, "time": "2001-11-28T08:08:28Z", "creator": "jamie.lokier@degree2.com", "creation_time": "2001-11-28T08:08:28Z", "text": "The above patch makes content-width (and height) accept \"scale-to-fit\", and does\nscale an SVG image if they are used.  Absolute sizes also work.  Percentage\nsizes in content-width/height should work (they are percentage of the image\nintrinsic size), but I haven't tried them.\n\nI have only tested instream-foreign-object containing an SVG.\nIt's entirely possible that external-graphic doesn't scale properly.\n\nSpecifying only one dimension to hasn't been properly coded (for calculating\nthe surrounding area size while preserving the image aspect ratio), and I've no\nparticular intention of doing that.\n\nSpecifying \"width='80%' content-width='scale-to-fit'\" doesn't work.  It\ngenerates a bad PDF containing \"NaN\".  I don't understand how widths\nare propagated through the area hierarchy so I won't be fixing this.\n\nThe image, though scaled nicely (on a PDF), is rendered at the wrong position.\nThere's a hack (x -= width/2) to move it which does help, but that's still\nwrong.  I have no idea how to get the right position.\n\n(It's taken me 3 weeks to understand Fop well enough to get this patch going,\nwhich is too long for me so I'm giving up).\n\nHope the patch helps."}, {"count": 5, "tags": [], "creator": "oleg@tkachenko.com", "is_private": false, "id": 26216, "creation_time": "2002-11-13T18:51:45Z", "time": "2002-11-13T18:51:45Z", "bug_id": 5001, "text": "*** Bug 2867 has been marked as a duplicate of this bug. ***", "attachment_id": null}, {"count": 6, "tags": [], "creator": "andreas.zielke@gmx.net", "attachment_id": null, "id": 66504, "creation_time": "2004-11-05T07:06:02Z", "time": "2004-11-05T07:06:02Z", "bug_id": 5001, "text": "We had the same problem. Using width instead of content-width seems to fix the\nproblem...", "is_private": false}, {"count": 7, "tags": [], "bug_id": 5001, "attachment_id": null, "text": "Bugzilla cleanup:\nShould be fixed in FOP 0.93/Trunk, where there is fully compliant support for the respective properties \nheight, width, content-height and content-width on any fo:external-graphic or fo:instream-foreign-\nobject.", "id": 99523, "time": "2007-02-18T02:44:46Z", "creator": "adelmelle@apache.org", "creation_time": "2007-02-18T02:44:46Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 5001, "attachment_id": null, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155667, "time": "2012-04-01T06:34:21Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:34:21Z", "is_private": false}]