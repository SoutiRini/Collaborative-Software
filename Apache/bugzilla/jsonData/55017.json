[{"text": "Created attachment 30319\nPatch to provider bind rmi bind address setup ability\n\nThere is a patch which adds rmiBindAddress property to JmxRemoteLifecycleListener, which allows to bind RMI server to specific interface instead of 0.0.0.0.\n\nIt may useful for binding RMI to localhost and avoiding firewall configuration (and then monitoring through SSH tunnel).\n\nUnfortunatly using of rmiBindAddress incompatible with rmiSSL, but i think it's not an issue because of rarely intersecting use cases.", "tags": [], "creator": "alexey.noskov@gmail.com", "is_private": false, "count": 0, "id": 167399, "time": "2013-05-24T14:50:10Z", "bug_id": 55017, "creation_time": "2013-05-24T14:50:10Z", "attachment_id": 30319}, {"count": 1, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "text": "I think the code starting at line 217 should probably be an \"else\" of this if clause:\n\n            if (rmiSSL) {\n                csf = new SslRMIClientSocketFactory();\n                ssf = new SslRMIServerSocketFactory(ciphers, protocols,\n                            clientAuth);\n            }\n\nOtherwise, if rmiSSL and rmiBindAddress are both set, rmiBindAddress will take precedence and a) we'll create and discard objects for no reason and b) potentially open a security vulnerability because the user might think they can have both SSL and a specific address.\n\nWe might even want to detect the current incompatibility (I also don't see a way to specify an interface when creating an SslRMIServerSocketFactory) and throw an error.\n\nCan you adjust your patch?", "id": 167403, "time": "2013-05-24T19:28:03Z", "bug_id": 55017, "creation_time": "2013-05-24T19:28:03Z", "is_private": false}, {"text": "Created attachment 30320\nPatch to provider bind rmi bind address setup ability (updated)\n\nJust adjusted patch: added else clause + warning if both options are set", "tags": [], "creator": "alexey.noskov@gmail.com", "is_private": false, "count": 2, "id": 167404, "time": "2013-05-24T19:48:39Z", "bug_id": 55017, "creation_time": "2013-05-24T19:48:39Z", "attachment_id": 30320}, {"text": "I think conflicting settings should actually fail to configure the connector, rather than playing favorites.", "tags": [], "creator": "chris@christopherschultz.net", "is_private": false, "count": 3, "id": 167405, "time": "2013-05-24T20:19:09Z", "bug_id": 55017, "creation_time": "2013-05-24T20:19:09Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "alexey.noskov@gmail.com", "attachment_id": null, "text": "Well. But then which exception should be thrown here? Or there is other preferred way to fail configuring the connector?", "id": 167406, "time": "2013-05-24T20:24:28Z", "bug_id": 55017, "creation_time": "2013-05-24T20:24:28Z", "is_private": false}, {"text": "Hmm... I thought sure that LifecycleListeners could throw checked exceptions, but it seems they can't. I'm still not happy with this not failing-fast.\n\nWhat happens if you throw an IllegalStateException... will Tomcat fail to start? If it doesn't, we might have to re-think things.", "tags": [], "creator": "chris@christopherschultz.net", "is_private": false, "count": 5, "id": 167409, "time": "2013-05-24T21:13:00Z", "bug_id": 55017, "creation_time": "2013-05-24T21:13:00Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 55017, "attachment_id": 30321, "id": 167410, "time": "2013-05-24T21:38:32Z", "creator": "alexey.noskov@gmail.com", "creation_time": "2013-05-24T21:38:32Z", "is_private": false, "text": "Created attachment 30321\nPatch to provider bind rmi bind address setup ability (updated, 2)\n\nYes, with IllegalStateException Tomcat fails to start.\nUpdated patch with it."}, {"count": 7, "tags": [], "bug_id": 55017, "attachment_id": null, "is_private": false, "id": 167626, "time": "2013-06-03T19:57:08Z", "creator": "markt@apache.org", "creation_time": "2013-06-03T19:57:08Z", "text": "The patch needs to include the associated documentation changes. It would also be nice if it used StringManager for i18n."}, {"count": 8, "tags": [], "bug_id": 55017, "attachment_id": null, "id": 167660, "time": "2013-06-04T19:46:50Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-06-04T19:46:50Z", "is_private": false, "text": "(In reply to Mark Thomas from comment #7)\n> The patch needs to include the associated documentation changes. It would\n> also be nice if it used StringManager for i18n.\n\nAlexey, if you'd care to make those documentation patches and include them, it would be great. If not, someone else will do them but the patch will take longer to accept. Let us know if you need any instructions for how to do that: it's not hard, but just in case you needed some encouragement.\n\nLook at other classes in the same package for uses of StringManager: it's fairly simple. Basically, anything that is going to end up in a log file, shown to the user, etc. should be localized. Providing an English translation is usually sufficient, though it would be nice to provide Spanish and Japanese if you happen to be multilingual."}, {"count": 9, "tags": [], "bug_id": 55017, "attachment_id": null, "is_private": false, "id": 167663, "time": "2013-06-04T19:55:02Z", "creator": "alexey.noskov@gmail.com", "creation_time": "2013-06-04T19:55:02Z", "text": "Yes, I already found how it's used.\n\nI'll make documentation and i18n changes in nearest days."}, {"count": 10, "tags": [], "bug_id": 55017, "text": "Created attachment 30398\nPatch to provider bind rmi bind address setup ability (updated, 3)\n\nJust added i18n and documentation changes.", "id": 167680, "time": "2013-06-05T15:45:11Z", "creator": "alexey.noskov@gmail.com", "creation_time": "2013-06-05T15:45:11Z", "is_private": false, "attachment_id": 30398}, {"count": 11, "tags": [], "creator": "alexey.noskov@gmail.com", "attachment_id": null, "text": "Are there other areas in which this patch should be improved?", "id": 167865, "time": "2013-06-16T19:54:31Z", "bug_id": 55017, "creation_time": "2013-06-16T19:54:31Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 55017, "attachment_id": null, "id": 167934, "time": "2013-06-20T15:54:43Z", "creator": "markt@apache.org", "creation_time": "2013-06-20T15:54:43Z", "is_private": false, "text": "Overall patch looks OK.\n\nOne questions: Why are SSL and rmiBindAddress mutually exclusive?"}, {"count": 13, "tags": [], "bug_id": 55017, "text": "It's because I found no way to specify bind address when using SslRMIServerSocketFactory.", "id": 167935, "time": "2013-06-20T15:59:53Z", "creator": "alexey.noskov@gmail.com", "creation_time": "2013-06-20T15:59:53Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "I see what you mean. Fair enough.", "id": 167942, "time": "2013-06-20T19:48:09Z", "bug_id": 55017, "creation_time": "2013-06-20T19:48:09Z", "is_private": false}, {"count": 15, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Thanks for the patch.\n\nIt has been applied to trunk and 7.0.x and will be included in 7.0.42 onwards.", "id": 168167, "time": "2013-07-01T09:53:55Z", "bug_id": 55017, "creation_time": "2013-07-01T09:53:55Z", "is_private": false}]