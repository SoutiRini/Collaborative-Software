[{"count": 0, "tags": [], "creator": "much99@yahoo.com", "attachment_id": null, "text": "The javac -parameters switch adds meta information about method parameters (e.g. name) to the bytecode. If I enable this for my project (e.g. in Eclipse it is Java -> Compiler -> Store Information About Method Parameters) then deployment will break with the following stacktrace:\n\nException in thread \"ContainerBackgroundProcessor[StandardEngine[Catalina]]\" java.lang.OutOfMemoryError: Java heap space\n\tat org.apache.tomcat.util.bcel.classfile.Utility.swallowUnknownAttribute(Utility.java:156)\n\tat org.apache.tomcat.util.bcel.classfile.Attribute.readAttribute(Attribute.java:102)\n\tat org.apache.tomcat.util.bcel.classfile.FieldOrMethod.<init>(FieldOrMethod.java:76)\n\tat org.apache.tomcat.util.bcel.classfile.ClassParser.readMethods(ClassParser.java:226)\n\tat org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:101)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1987)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1940)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1915)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1876)\n\tat org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1145)\n\tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:767)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:302)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)\n\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5083)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n\tat org.apache.catalina.core.StandardContext.reload(StandardContext.java:3780)\n\tat org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:293)\n\tat org.apache.catalina.core.StandardContext.backgroundProcess(StandardContext.java:5539)\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1365)\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1369)\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1369)\n\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1345)\n\tat java.lang.Thread.run(Thread.java:745)", "id": 182354, "time": "2015-04-14T15:39:32Z", "bug_id": 57812, "creation_time": "2015-04-14T15:39:32Z", "is_private": false}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 182367, "time": "2015-04-14T18:53:46Z", "bug_id": 57812, "creation_time": "2015-04-14T18:53:46Z", "text": "There is no demonstrable Tomcat bug here.\n\nYou need to allocate more heap.\n\nIf you need any further help, please follow-up on the users mailing list."}, {"count": 2, "tags": [], "creator": "much99@yahoo.com", "attachment_id": null, "text": "There is more than enough heap. Also the applications deploys just fine, if said parameter is not set. There seems to be an error processing the jars, the out of memory seems to be just a followup exception:\n\nSCHWERWIEGEND: Unable to process Jar entry [redacted] from Jar [redacted] for annotations\njava.io.EOFException\n\tat java.io.DataInputStream.readUnsignedShort(DataInputStream.java:340)\n\tat org.apache.tomcat.util.bcel.classfile.Utility.swallowMethodParameters(Utility.java:187)\n\tat org.apache.tomcat.util.bcel.classfile.Attribute.readAttribute(Attribute.java:159)\n\tat org.apache.tomcat.util.bcel.classfile.FieldOrMethod.<init>(FieldOrMethod.java:76)\n\tat org.apache.tomcat.util.bcel.classfile.ClassParser.readMethods(ClassParser.java:226)\n\tat org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:101)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1987)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsJar(ContextConfig.java:1940)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsUrl(ContextConfig.java:1915)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotations(ContextConfig.java:1876)\n\tat org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1145)\n\tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:767)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:302)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)\n\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5083)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n\tat java.lang.Thread.run(Thread.java:745)\n\nFurther search has provided the info at http://stackoverflow.com/questions/25279729/tomcat-7-annotation-scanner-and-jdk-8-with-parameters-compiler-flag-exceptions that this or something similar has been fixed in Tomcat 7, but it seems to occur again.", "id": 182377, "time": "2015-04-15T07:59:48Z", "bug_id": 57812, "creation_time": "2015-04-15T07:59:48Z", "is_private": false}, {"count": 3, "tags": [], "creator": "much99@yahoo.com", "attachment_id": null, "is_private": false, "id": 182378, "time": "2015-04-15T09:06:30Z", "bug_id": 57812, "creation_time": "2015-04-15T09:06:30Z", "text": "I made a very easy sample war (source is in the zip file) that breaks my Tomcat when compiled with the -parameters switch:\nApr 15, 2015 11:05:20 AM org.apache.tomcat.util.digester.SetPropertiesRule begin\nWARNUNG: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:AnnotationTest' did not find a matching property.\nApr 15, 2015 11:05:20 AM org.apache.coyote.AbstractProtocol init\nINFORMATION: Initializing ProtocolHandler [\"http-nio-8080\"]\nApr 15, 2015 11:05:20 AM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector\nINFORMATION: Using a shared selector for servlet write/read\nApr 15, 2015 11:05:20 AM org.apache.coyote.AbstractProtocol init\nINFORMATION: Initializing ProtocolHandler [\"ajp-nio-8009\"]\nApr 15, 2015 11:05:20 AM org.apache.tomcat.util.net.NioSelectorPool getSharedSelector\nINFORMATION: Using a shared selector for servlet write/read\nApr 15, 2015 11:05:20 AM org.apache.catalina.startup.Catalina load\nINFORMATION: Initialization processed in 1340 ms\nApr 15, 2015 11:05:20 AM org.apache.catalina.core.StandardService startInternal\nINFORMATION: Starting service Catalina\nApr 15, 2015 11:05:20 AM org.apache.catalina.core.StandardEngine startInternal\nINFORMATION: Starting Servlet Engine: Apache Tomcat/8.0.9\nApr 15, 2015 11:05:21 AM org.apache.jasper.servlet.TldScanner scanJars\nINFORMATION: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nApr 15, 2015 11:05:21 AM org.apache.catalina.util.SessionIdGenerator createSecureRandom\nINFORMATION: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [403] milliseconds.\nApr 15, 2015 11:05:21 AM org.apache.catalina.startup.ContextConfig processAnnotationsWebResource\nSCHWERWIEGEND: Unable to process web resource [/WEB-INF/classes/com/test/TestServlet.class] for annotations\njava.io.EOFException\n\tat java.io.DataInputStream.readUnsignedShort(DataInputStream.java:340)\n\tat org.apache.tomcat.util.bcel.classfile.Utility.swallowMethodParameters(Utility.java:188)\n\tat org.apache.tomcat.util.bcel.classfile.Attribute.readAttribute(Attribute.java:159)\n\tat org.apache.tomcat.util.bcel.classfile.FieldOrMethod.<init>(FieldOrMethod.java:76)\n\tat org.apache.tomcat.util.bcel.classfile.ClassParser.readMethods(ClassParser.java:226)\n\tat org.apache.tomcat.util.bcel.classfile.ClassParser.parse(ClassParser.java:101)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:1987)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsWebResource(ContextConfig.java:1897)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsWebResource(ContextConfig.java:1892)\n\tat org.apache.catalina.startup.ContextConfig.processAnnotationsWebResource(ContextConfig.java:1892)\n\tat org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1135)\n\tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:767)\n\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:302)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:117)\n\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5083)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n\tat java.lang.Thread.run(Thread.java:745)\n\nApr 15, 2015 11:05:22 AM org.apache.jasper.servlet.TldScanner scanJars\nINFORMATION: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nApr 15, 2015 11:05:22 AM org.apache.coyote.AbstractProtocol start\nINFORMATION: Starting ProtocolHandler [\"http-nio-8080\"]\nApr 15, 2015 11:05:22 AM org.apache.coyote.AbstractProtocol start\nINFORMATION: Starting ProtocolHandler [\"ajp-nio-8009\"]\nApr 15, 2015 11:05:22 AM org.apache.catalina.startup.Catalina start\nINFORMATION: Server startup in 1325 ms"}, {"count": 4, "tags": [], "bug_id": 57812, "is_private": false, "text": "Created attachment 32650\nTestwar", "id": 182379, "time": "2015-04-15T09:07:22Z", "creator": "much99@yahoo.com", "creation_time": "2015-04-15T09:07:22Z", "attachment_id": 32650}, {"count": 5, "tags": [], "bug_id": 57812, "text": "Created attachment 32651\nSourcecode", "id": 182380, "time": "2015-04-15T09:07:45Z", "creator": "much99@yahoo.com", "creation_time": "2015-04-15T09:07:45Z", "is_private": false, "attachment_id": 32651}, {"count": 6, "tags": [], "creator": "much99@yahoo.com", "attachment_id": null, "text": "After a quick test i can say this is not an issue on Tomcat 8.0.21", "id": 182382, "time": "2015-04-15T09:47:03Z", "bug_id": 57812, "creation_time": "2015-04-15T09:47:03Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 57812, "text": "Can this be reproduced on any current version of Tomcat (6.0.43, 7.0.61, Tomcat 8.0.21)? If not, then we should mark this as FIXED and you should upgrade to the latest version in your branch (8.0.21 based upon your bug report).", "id": 182384, "time": "2015-04-15T12:46:37Z", "creator": "chris@christopherschultz.net", "creation_time": "2015-04-15T12:46:37Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 57812, "text": "Please see Comment#6.", "id": 182385, "time": "2015-04-15T12:52:30Z", "creator": "much99@yahoo.com", "creation_time": "2015-04-15T12:52:30Z", "is_private": false, "attachment_id": null}]