[{"count": 0, "tags": [], "text": "log4j-sandbox, org.apache.log4j.net.IMAppender\n\nModify IMAppender class to support comma-seperated 'recipient' field in the\nlog4j properties file to allow for broadcast/multiple recipients.\n-dhartford, 4/13/05\n\n/*\n * Copyright 1999,2004 The Apache Software Foundation.\n * \n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * \n *      http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport java.util.StringTokenizer;\n.....\nprotected void sendBuffer() {\n.....\n      if (chatroom) {\n        groupchat.sendMessage(buf.toString());\n      } else {\n//DRH 4/13/05 change in favor of recipient list.       \n//chat.sendMessage(buf.toString());\n\t\t  psuedoBroadcast(buf.toString());\n\t  }\n    } catch (Exception e) {\n      errorHandler.error(\n        \"Could not send message in IMAppender [\" + name + \"]\", e,\n        ErrorCode.GENERIC_FAILURE);\n    }\n  }\n\n  /**\n   * This method breaks up a comma-seperated recipient list\n   * to allow for psuedo-broadcasting.\n   */\n  private void psuedoBroadcast(String bufferedmessage) throws XMPPException{\n\t\tStringTokenizer st = new StringTokenizer(recipient, \",\"); \n\t\twhile (st.hasMoreTokens()) {\n\t        chat = con.createChat(st.nextToken());\n\t\t\tchat.sendMessage(bufferedmessage);\n\t\t}  \n  }\n\n//=====end snippet=====", "attachment_id": null, "id": 73632, "creator": "dhartford@ghsinc.com", "time": "2005-04-13T17:15:31Z", "bug_id": 34440, "creation_time": "2005-04-13T17:15:31Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 34440, "attachment_id": null, "id": 73635, "time": "2005-04-14T00:21:42Z", "creator": "psmith@apache.org", "creation_time": "2005-04-14T00:21:42Z", "is_private": false, "text": "Could you please do us a favour and attach the patch as an actual attachment\ntext file/patch attachment?  This makes applying them much easier (patch text\ncan get mangled otherwise).\n\ncheers,\n\nPaul"}]