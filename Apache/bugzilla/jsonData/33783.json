[{"count": 0, "tags": [], "text": "Input template:\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\n\n<xsl:template match=\"/\">\n<core:Display\n\txmlns:core=\"http://example.com/core\"\n\txmlns:foo=\"http://example.com/java/foo\"\n\t>\n\t<core:Styles xmlns=\"http://example.com/java/foo\">\n\t\t<Constant/>\n\t</core:Styles>\n\t<core:View xmlns=\"http://example.com/java/javax.swing\">\n\t\t<!-- workaround for buggy(?) XSLT processor.-->\n\t\t<!--This should work:-->\n\t\t<foo:Constant/>\n\t\t<!--Workaround is:-->\n\t\t<!--xsl:element\n\t\t\tnamespace=\"http://example.com/java/foo\"\n\t\t\tname=\"Constant\"\n\t\t\t/-->\n\t</core:View>\n</core:Display>\n</xsl:template>\n</xsl:stylesheet>\n\nInput document:\n<doc/>\n\nExpected result:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<core:Display xmlns:core=\"http://example.com/core\"\nxmlns:foo=\"http://example.com/java/foo\">\n<core:Styles xmlns=\"http://example.com/java/foo\">\n<Constant/>\n</core:Styles>\n<core:View xmlns=\"http://example.com/java/javax.swing\">\n<foo:Constant/>\n</core:View>\n</core:Display>\n\nActual result:\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<core:Display xmlns:core=\"http://example.com/core\"\nxmlns:foo=\"http://example.com/java/foo\">\n<core:Styles xmlns=\"http://example.com/java/foo\">\n<Constant/>\n</core:Styles>\n<core:View xmlns=\"http://example.com/java/javax.swing\">\n<Constant/>\n</core:View>\n</core:Display>\n\n(Note second Constant tag is missing namespace prefix)\n\nThe error only occurs when a node is defined when its namespace was the default,\nthen later the same node is defined when its namespace is no longer the default.\nThe lack of prefix the second time around means it goes into the new (now\nincorrect) default namespace. This example is a cut-down version of working\nsoftware.\n\nI'm fairly new to the Java sphere, so am not 100% sure of version numbers. I'm\nrunning Eclipse 3.0 and the 1.5.0 Java SDK and am using whatever the combination\nof these two forces brings in by default. The classes that get instantiated\nappear to be XSLTC-related, and I'm using the JAXP interface. My code looks\nsomething like this:\n\nDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\nfactory.setNamespaceAware(true);\nDocumentBuilder parser = factory.newDocumentBuilder();\nDocument template = parser.parse(\"transform.xsl\");\nDocument instance = parser.parse(\"doc.xsli\");\nDocument result = parser.newDocument();\nTransformerFactory factory = TransformerFactory.newInstance();\nTransformer transform = factory.newTransformer(new DOMSource(template));\nDOMResult doc = new DOMResult(result);\ntransform.transform(new DOMSource(instance), doc);\n\nBenjamin.", "attachment_id": null, "id": 71656, "creator": "ben.carlyle@invensys.com", "time": "2005-03-01T05:00:56Z", "bug_id": 33783, "creation_time": "2005-03-01T05:00:56Z", "is_private": false}, {"count": 1, "tags": [], "text": "I probably should note that Bugzilla didn't permit me to select XalanJ2 as the\nrelated product and I was unable to find a specific XSLT component to place it\nagainst. I suggest the assignee of this bug push it to the right person...\n\nBenjamin.", "attachment_id": null, "id": 71657, "creator": "ben.carlyle@invensys.com", "time": "2005-03-01T05:05:54Z", "bug_id": 33783, "creation_time": "2005-03-01T05:05:54Z", "is_private": false}, {"count": 2, "attachment_id": null, "creator": "ben.carlyle@invensys.com", "is_private": false, "id": 71698, "time": "2005-03-02T10:08:13Z", "bug_id": 33783, "creation_time": "2005-03-02T10:08:13Z", "tags": [], "text": "Thanks to Jeff Turner and Sander Temme who directed me to the new bug database\nfor XSLTC. I've filed it there as XALANJ-2032. I am happy for this bug to be\nresolved as a duplicate of that (hopefully) correctly-filed bug.\n\nBenjamin."}, {"count": 3, "tags": [], "text": "Ben has re-filed in Jira. ", "attachment_id": null, "id": 71720, "creator": "sander@temme.net", "time": "2005-03-02T16:55:18Z", "bug_id": 33783, "creation_time": "2005-03-02T16:55:18Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 33783, "attachment_id": null, "id": 71721, "time": "2005-03-02T16:55:37Z", "creator": "sander@temme.net", "creation_time": "2005-03-02T16:55:37Z", "is_private": false, "text": "Closing out."}]