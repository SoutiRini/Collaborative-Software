[{"count": 0, "tags": [], "creator": "mmanders@novell.com", "attachment_id": null, "id": 3851, "time": "2001-07-19T13:52:14Z", "bug_id": 2696, "creation_time": "2001-07-19T13:52:14Z", "is_private": false, "text": "I have a webapp that preloads servlets via the web.xml file.  With the latest \nnightly build, Tomcat 3.3 blows up while it is reading the web.xml file for my \ncontext.  After playing with the file a little bit, I determined that it was the\n<load-on-startup></load-on-startup> line that caused it to stop with an \nexception.  To duplicate this, I just added the <load-on-startup></load-on-\nstartup> tags to the web.xml file for the examples context in the section \ndefining the snoop servlet.  I've duplicated this on Win2K and NetWare.  Here \nis a dump of what I get at startup:\n\nTomcat: setAttribute home=..\n2001-07-19 14:39:51 - Ajp14Interceptor: Password=changeme\n2001-07-19 14:39:51 - ContextXmlReader: Context config=$TOMCAT_HOME\\conf\\apps-ex\namples.xml\n2001-07-19 14:39:51 - ContextXmlReader: Context config=$TOMCAT_HOME\\conf\\apps-12\n7.0.0.1.xml\n2001-07-19 14:39:51 - ContextXmlReader: Context config=$TOMCAT_HOME\\conf\\apps-ad\nmin.xml\n2001-07-19 14:39:51 - AutoWebApp: Already loaded: DEFAULT:/examples\n2001-07-19 14:39:51 - AutoWebApp: Already loaded: DEFAULT:/admin\n2001-07-19 14:39:51 - AutoWebApp: Auto-Adding DEFAULT:/\n2001-07-19 14:39:51 - ContextManager: Adding  DEFAULT:/examples\n2001-07-19 14:39:51 - ContextManager: Adding  DEFAULT:/admin\n2001-07-19 14:39:52 - ContextManager: Adding  DEFAULT:/ROOT\nGuessed home=..\njava.lang.reflect.InvocationTargetException: \njavax.xml.parsers.FactoryConfigurationError: Provider \norg.apache.crimson.jaxp.SAXParserFactoryImpl not found\n        at javax.xml.parsers.SAXParserFactory.newInstance\n(SAXParserFactory.java:141)\n        at org.apache.tomcat.util.xml.XmlMapper.readXml(XmlMapper.java:270)\n        at org.apache.tomcat.modules.aaa.SimpleRealm$MemoryRealm.readMemoryRealm\n(SimpleRealm.java:188)\n        at org.apache.tomcat.modules.aaa.SimpleRealm.contextInit\n(SimpleRealm.java:116)\n        at org.apache.tomcat.core.Context.init(Context.java:501)\n        at org.apache.tomcat.core.ContextManager.init(ContextManager.java:574)\n        at org.apache.tomcat.startup.EmbededTomcat.initContextManager\n(EmbededTomcat.java:310)\n        at org.apache.tomcat.startup.Tomcat.startTomcat(Tomcat.java:176)\n        at org.apache.tomcat.startup.Tomcat.execute(Tomcat.java:120)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at org.apache.tomcat.util.IntrospectionUtils.execute\n(IntrospectionUtils.java:87)\n        at org.apache.tomcat.startup.Main.execute(Main.java:305)\n        at org.apache.tomcat.startup.Main.main(Main.java:191)"}, {"count": 1, "tags": [], "creator": "cmanolache@yahoo.com", "attachment_id": null, "id": 3853, "time": "2001-07-19T14:44:15Z", "bug_id": 2696, "creation_time": "2001-07-19T14:44:15Z", "is_private": false, "text": "Jaxp1.1 is using the context class loader first to find the impl.\n\nJdk12Interceptor is not reseting the ccl. \n\nI fixed XmlMapper to reset the CCL to the container loader. ( it may be \nneeded to do the same in jasper ). I've also fixed jdk12i to reset\nthe ccl after init/destroy. "}]