[{"count": 0, "text": "when we start the apache, everything works fine, but after a while (not a fixed\ninterval or something) the processes start to die due to segfault signal. A few\nprocesses die, and the server gets into a degradation problem, which no process\ngets started without exiting with signal 11.\n\n- modules loaded:\nLoadModule authz_host_module modules/mod_authz_host.so\nLoadModule log_config_module modules/mod_log_config.so\nLoadModule headers_module modules/mod_headers.so\nLoadModule setenvif_module modules/mod_setenvif.so\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nLoadModule proxy_balancer_module modules/mod_proxy_balancer.so\nLoadModule mime_module modules/mod_mime.so\nLoadModule status_module modules/mod_status.so\nLoadModule negotiation_module modules/mod_negotiation.so\nLoadModule dir_module modules/mod_dir.so\nLoadModule alias_module modules/mod_alias.so\n\n- configuration (just used to reproduce, we noted this problem in other\nenvironment):\n<VirtualHost loghost:80>\n        ProxyRequests Off\n        ProxyTimeout 8\n        ProxyMaxForwards 2\n        ProxyPreserveHost On\n        ProxyErrorOverride On\n\n        ProxyPass /server-status  !\n        ProxyPass /server-info  !\n        ProxyPass /balancer-manager  !\n        ProxyPass / balancer://local/ \n        <Proxy balancer://local/>\n                Order deny,allow\n                Allow from all\n                BalancerMember http://localhost:3128 retry=10\n                BalancerMember http://localhost:3129 retry=10\n        </Proxy>\n</VirtualHost>\n\n<VirtualHost localhost:3128>\n        DocumentRoot /export/htdocs/test\n</VirtualHost>\n<VirtualHost localhost:3129>\n        DocumentRoot /export/htdocs/test\n</VirtualHost>\n\n$ httpd -V\nServer version: Apache/2.2.6 (Unix)\nServer built:   Oct 28 2007 02:49:07\nServer's Module Magic Number: 20051115:5\nServer loaded:  APR 1.2.11, APR-Util 1.2.10\nCompiled using: APR 1.2.11, APR-Util 1.2.10\nArchitecture:   32-bit\nServer MPM:     Worker\n  threaded:     yes (fixed thread count)\n    forked:     yes (variable process count)\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/worker\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D DYNAMIC_MODULE_LIMIT=128\n -D HTTPD_ROOT=\"/opt/apache-2.2.6\"\n -D SUEXEC_BIN=\"/opt/apache-2.2.6/bin/suexec\"\n -D DEFAULT_SCOREBOARD=\"logs/apache_runtime_status\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\nbacktrace for the thread that received the signal:\n\n$ gdb httpd -c core.16218\n(gdb) thread apply 2 bt full\nThread 2 (process 16225):\n#0  0xffffe402 in __kernel_vsyscall ()\nNo symbol table info available.\n#1  0xf7d80af6 in kill () from /lib/libc.so.6\nNo symbol table info available.\n#2  0x080843bb in sig_coredump (sig=16218) at mpm_common.c:1235\nNo locals.\n#3  <signal handler called>\nNo symbol table info available.\n#4  0xf7eed4a8 in apr_pollset_poll (pollset=0x813bc60, timeout=-1, num=0xf4cd443c, \n    descriptors=0xf4cd4438) at poll/unix/epoll.c:251\n        ret = 2\n        rv = <value optimized out>\n#5  0x08092bd9 in listener_thread (thd=0x812bf60, dummy=0x8161fb0) at worker.c:687\n        numdesc = 2\n        pdesc = (const apr_pollfd_t *) 0x0\n        process_slot = <value optimized out>\n        tpool = <value optimized out>\n        csd = (void *) 0x0\n        ptrans = (apr_pool_t *) 0x0\n        pollset = (apr_pollset_t *) 0x813bc60\n        rv = <value optimized out>\n        lr = <value optimized out>\n        have_idle_worker = 1\n        last_poll_idx = 0\n#6  0xf7ef3464 in dummy_worker (opaque=0x812bf60) at threadproc/unix/thread.c:142\nNo locals.\n#7  0xf7e8134b in start_thread () from /lib/libpthread.so.0\nNo symbol table info available.\n#8  0xf7e1565e in clone () from /lib/libc.so.6\nNo symbol table info available.\n#0  0xffffe402 in __kernel_vsyscall ()\n\n\nI couldn't find anything related in the bugzilla, or in source code (I'm not\nfamiliar with apache source code). If there is anything that is missing, just ask me\n\nthanks in advance", "creator": "wfelipe@gmail.com", "is_private": false, "id": 109782, "time": "2007-10-26T05:40:23Z", "bug_id": 43703, "creation_time": "2007-10-26T05:40:23Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 43703, "text": "some more information: the running machine is x86_64, but the compiled binary is\ni586", "id": 109783, "time": "2007-10-26T05:41:24Z", "creator": "wfelipe@gmail.com", "creation_time": "2007-10-26T05:41:24Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 43703, "text": "Can you please install httpd, apr and apr-util debug info and make stack trace \nagain...", "id": 111133, "time": "2007-11-27T07:12:24Z", "creator": "asm@uezku.kemsu.ru", "creation_time": "2007-11-27T07:12:24Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 43703, "is_private": false, "id": 162168, "attachment_id": null, "creator": "trawick@apache.org", "creation_time": "2012-09-13T20:41:09Z", "time": "2012-09-13T20:41:09Z", "text": "bug nearly 5 years old, showing a symptom of basic brokenness...  reopen bug if you can reproduce with current httpd/apr versions"}]