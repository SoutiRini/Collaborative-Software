[{"count": 0, "tags": [], "text": "In Apache 2.2, we had a RewriteCond rule that tested for the existence of a specific file and redirect most requests to a static HTML file when the file existed.  Creating the file while apache was running would cause the static HTML file to be displayed immediately, and removing the file while apache was running would bypass the RewriteRule.  The set of rules is:\n\nRewriteCond /opt/app/workload/nas/reldir/dev3/cmnshr/maintenance/wiki.txt -f\nRewriteCond %{HTTP_COOKIE} !AllowMaintenance\nRewriteCond %{REQUEST_URI} !^/cmn/(.*)\nRewriteCond %{REQUEST_URI} !^/common/(.*)\nRewriteRule ^/.* /cmn/maintenance-wiki.html [NE,L,P]\n\nWith version 2.4, it appears that apache is caching the result of the -f test.  Thus, creating the file while apache is running has no effect.  Restarting apache after creating the file causes the test to behave as expected.  However, apache must be restarted for the removal of the file to be effective as well.", "is_private": false, "id": 198823, "creator": "sg3235@att.com", "time": "2017-05-19T18:41:01Z", "bug_id": 61108, "creation_time": "2017-05-19T18:41:01Z", "attachment_id": null}, {"count": 1, "text": "There's no cache for -f or -d,   Can you share LogLevel trace8 output in a recreate?", "creator": "covener@gmail.com", "is_private": false, "id": 198825, "time": "2017-05-19T20:54:57Z", "bug_id": 61108, "creation_time": "2017-05-19T20:54:57Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 61108, "attachment_id": null, "id": 198826, "time": "2017-05-19T21:52:56Z", "creator": "sg3235@att.com", "creation_time": "2017-05-19T21:52:56Z", "is_private": false, "text": "I had set the trace level to 6 earlier.  I was seeing this trace message even though the file existed:\n\n[Fri May 19 14:36:56.405217 2017] [rewrite:trace4] [pid 67508:tid 139724855404288] mod_rewrite.c(477): [client 135.213.232.7:1465] 135.213.232.7 - - [wiki3.dev.att.com/sid#d4bf78][rid#7f14400d41f0/initial] RewriteCond: input='/opt/app/workload/nas/reldir/dev3/cmnshr/maintenance/wiki.txt' pattern='-f' => not-matched\n\nAfter restarting apache, it changed to this:\n\n[Fri May 19 14:44:58.340292 2017] [rewrite:trace4] [pid 67514:tid 139724519728896] mod_rewrite.c(477): [client 135.213.232.6:2005] 135.213.232.6 - - [wiki3.dev.att.com/sid#d4bf78][rid#7f140800bf60/initial] RewriteCond: input='/opt/app/workload/nas/reldir/dev3/cmnshr/maintenance/wiki.txt' pattern='-f' => matched\n\nHoping to get the information you asked for, I set the trace level to 8.  I don't see any additional messages, but I'm getting the behavior I expect.  I went back and set the log level back to warn, and I'm still getting the behavior I expect.  So I guess there's nothing to do here.  Not sure what was happening before or how I may have screwed up the test, but I'm sorry to have wasted your time."}]