[{"count": 0, "tags": [], "creator": "stehmana@cadmus.com", "attachment_id": null, "is_private": false, "id": 51501, "time": "2004-01-30T19:44:31Z", "bug_id": 26560, "creation_time": "2004-01-30T19:44:31Z", "text": "***IMPORTANT NOTE:*************************************************\nThe build in question works perfectly fine on a comparable XP box.  \nThe only difference between the two environments is that the \nenvironment in which the build works is on a Compaq EVO desktop and\nthe environment in which the build does not work is on a HP Compaq\nnx9010 laptop.  Both are Windows XP (env var reports that \nOS = WINDOWS_NT) and both were running same versions of Java and\nAnt.  This has been tried with both Ant 1.5.4 and 1.6, with no \nimprovement.\n*********************************************************************\n\nPROBLEM DESCRIPTION:\n\nThe parent build file utilizes several other *.xml files to build\nthe entire project.  It starts off by successfully building several\ntargets until it seems to kick into an infinite loop for some unknown\nreason (there is no error reported anywhere).  It does this in\nthe same place every time:\n\n------------- ant output -----------------------------------------------\n\nbuild.domain:\n\ncompile.domain:\n     [echo] Compiling c:\\rpm_current\\rpm\\Domain...\n    [javac] Compiling 3283 source files to C:\\rpm_current\\build\\Server\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\n<ad infinitum />\n\n------------- /ant output ----------------------------------------------\n\nIt goes ad infinitum - or seemingly - until it seems to 'catch' on \nsomething and then start building again, but it seems to have lost all\nreferences to the libraries defined in the <classpath> element, even\nthough classes12.zip and quartz1.2.3 are both included in the\nclasspath - it also reports this for all EJB and JMS stuff, anything\nwhich requires an imported library - these two entries are ONLY an \nexample, it scrolls on for quite a while:\n\n\n------------- ant output -----------------------------------------------\n\ncount = 0, total = 477\ncount = 0, total = 139\n    [javac] \nC:\\rpm_current\\rpm\\Domain\\<deletedForIntellectualPropertyReasons>.java:103: \npackage oracle.jdbc does not exist\n    [javac] import oracle.jdbc.OraclePreparedStatement;\n    [javac]                    ^\ncount = 0, total = 477\ncount = 0, total = 139\n    [javac] \nC:\\rpm_current\\rpm\\Domain\\<deletedForIntellectualPropertyReasons>.java:4: \npackage org.quartz does not exist\n    [javac] import org.quartz.Job;\n    [javac]                   ^\n------------- /ant output ----------------------------------------------\n\n\n\nThe build finally ends with these errors:\n\n------------- ant output -----------------------------------------------\n<scrolling for 100's of entries before getting here>\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\ncount = 0, total = 477\ncount = 0, total = 139\n\n    [javac] Note: C:\\rpm_current\\rpm\\<deleted for intellectual property \nreasons>.java uses or overrides a deprecated API.\n    [javac] Note: Recompile with -deprecation for details.\n    [javac] 100 errors\n\nbuild.xml:323: Following error occured while executing this line\nbuild.xml:203: Following error occured while executing this line\nbuild.xml:129: Following error occured while executing this line\nbuild.xml:79: Following error occured while executing this line\ndomain.xml:98: Compile failed; see the compiler error output for details.\n\n------------- /ant output -----------------------------------------------\n\n\nThe interesting thing is to look at line 98 of domain.xml:\n\n\n------------- domain.xml -----------------------------------------------\n\n\t  <target name=\"compile.domain\">\n\t    <echo message=\"Compiling ${work.dir}\\Domain...\"/>\n\t    <!--\n\t    <mkdir dir=\"${build.dir}/Domain\"/>\n\t    -->\n\t    <javac classpathref=\"classpath.compilation.domain\"\n\t        srcdir=\"${work.dir}/Domain\"\n\t        destdir=\"${build.dir}/Server\"\n\t        debug=\"on\"/>\nLINE 98 -->     <!-- destdir=\"${build.dir}/Domain\"/> -->\n\t  </target>\n\n------------- /domain.xml ----------------------------------------------\n\nWhere work.dir and build.dir are defined in the parent build.xml.\n\nMy guess is this may be a manifestation of the infinite loop problem, similar\nto losing the classpath - it is also losing the ant variables.\n\nWhy this occurs on one XP box and not the other is baffling to me.  The\nsource is checked out from CVS, the same repository, the same version, the\nsame time, and every time it works on one and not the other.  It has been \nseriously aggravating me for over a month now.  I have to go to other\ndevelopers and ask them to check out and build for me to see if my\nchanges don't break the build."}, {"count": 1, "text": "One of the jars in your classpath is corrupt. Try comparing the jars with the\nbuild on the good machine. The output \n\ncount = 0, total = 477\n\nis symptomatic of this problem in the JVM/javac. I do not think this is a\nproblem in Ant. The line number is not so surprising - it is just probably the\npoint where the <javac> tag closes.\n\n\n", "creator": "conor@apache.org", "attachment_id": null, "id": 51519, "time": "2004-01-31T09:44:46Z", "bug_id": 26560, "creation_time": "2004-01-31T09:44:46Z", "tags": [], "is_private": false}]