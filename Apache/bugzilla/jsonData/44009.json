[{"count": 0, "tags": [], "creator": "faujdar@gmail.com", "attachment_id": null, "text": "I tried using the Maillogger but continuously get \nMailLogger failed to send e-mail!\njava.lang.NullPointerException\n        at org.apache.tools.ant.taskdefs.email.MimeMailer.send(MimeMailer.java:2\n06)\n        at org.apache.tools.ant.listener.MailLogger.sendMimeMail(MailLogger.java\n:271)\n        at org.apache.tools.ant.listener.MailLogger.buildFinished(MailLogger.jav\na:139)\n        at org.apache.tools.ant.Project.fireBuildFinished(Project.java:2008)\n        at org.apache.tools.ant.Main.runBuild(Main.java:718)\n        at org.apache.tools.ant.Main.startAnt(Main.java:199)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\n\n-----------------------------------------------------------------\nAs the initial analysis it appears the following code is playing foul.\n\n\tfor (Iterator iter = headers.iterator(); iter.hasNext();) {\n\t    Header h = (Header) iter.next();\n            msg.addHeader(h.getName(), h.getValue());\n\t}\n\nThe settings i used for maillogger:\nMailLogger.mailhost=exchange.usa.net\nMailLogger.user=<Removed>\nMailLogger.password=<Removed>\nMailLogger.from=<Removed>\nMailLogger.failure.to=<Removed>\nMailLogger.success.to=<Removed>\nMailLogger.failure.subject=BuildFailed\nMailLogger.success.subject=successful", "id": 111338, "time": "2007-12-03T02:11:25Z", "bug_id": 44009, "creation_time": "2007-12-03T02:11:25Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 44009, "text": "The piece of code referred to in my above comment is from the file MimeMailer.java\nlines 207-210", "id": 111339, "time": "2007-12-03T02:12:57Z", "creator": "faujdar@gmail.com", "creation_time": "2007-12-03T02:12:57Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "stevel@apache.org", "is_private": false, "id": 111343, "time": "2007-12-03T02:23:54Z", "bug_id": 44009, "creation_time": "2007-12-03T02:23:54Z", "tags": [], "text": "line 216 is the iterator below, at least in SVN_HEAD:\n\n            msg.addHeader(\"Date\", getDate());\n\n            for (Iterator iter = headers.iterator(); iter.hasNext();) {\n                Header h = (Header) iter.next();\n                msg.addHeader(h.getName(), h.getValue());\n            }\n\nAn NPE could be triggered by headers==null. There's nothing in the class\ninitialiser to set up these headers; it relies on setHeaders() being called,\nwhich presumably, it isnt in this case, or the vector is being set with a null\npointer)\n\nI'll do two things\n-always initialise the vector\n-skip the iteration if the vector is null (in case someone assigns a null vector"}, {"count": 3, "tags": [], "bug_id": 44009, "text": "i tried making the following change on my local machine \n\n\tif(headers!=null){\n\t\tfor (Iterator iter = headers.iterator(); iter.hasNext();) {\n\t\t        Header h = (Header) iter.next();\n\t\t\tmsg.addHeader(h.getName(), h.getValue());\n\t\t}\n\t}\n\nand got the following stacktrace:\n\nMailLogger failed to send e-mail!\nProblem while sending mime mail:\n        at org.apache.tools.ant.taskdefs.email.MimeMailer.send(MimeMailer.java:2\n43)\n        at org.apache.tools.ant.listener.MailLogger.sendMimeMail(MailLogger.java\n:271)\n        at org.apache.tools.ant.listener.MailLogger.buildFinished(MailLogger.jav\na:139)\n        at org.apache.tools.ant.Project.fireBuildFinished(Project.java:2008)\n        at org.apache.tools.ant.Main.runBuild(Main.java:718)\n        at org.apache.tools.ant.Main.startAnt(Main.java:199)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\nCaused by: javax.mail.MessagingException: [EOF]\n        at com.sun.mail.smtp.SMTPTransport.issueCommand(SMTPTransport.java:1481)\n\n        at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1\n512)\n        at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1054)\n        at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:634)\n        at javax.mail.Transport.send0(Transport.java:189)\n        at javax.mail.Transport.send(Transport.java:118)\n        at org.apache.tools.ant.taskdefs.email.MimeMailer.send(MimeMailer.java:2\n41)\n        ... 7 more\n--- Nested Exception ---\njavax.mail.MessagingException: [EOF]\n        at com.sun.mail.smtp.SMTPTransport.issueCommand(SMTPTransport.java:1481)\n\n        at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1\n512)\n        at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1054)\n        at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:634)\n        at javax.mail.Transport.send0(Transport.java:189)\n        at javax.mail.Transport.send(Transport.java:118)\n        at org.apache.tools.ant.taskdefs.email.MimeMailer.send(MimeMailer.java:2\n41)\n        at org.apache.tools.ant.listener.MailLogger.sendMimeMail(MailLogger.java\n:271)\n        at org.apache.tools.ant.listener.MailLogger.buildFinished(MailLogger.jav\na:139)\n        at org.apache.tools.ant.Project.fireBuildFinished(Project.java:2008)\n        at org.apache.tools.ant.Main.runBuild(Main.java:718)\n        at org.apache.tools.ant.Main.startAnt(Main.java:199)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)", "id": 111345, "time": "2007-12-03T02:50:27Z", "creator": "faujdar@gmail.com", "creation_time": "2007-12-03T02:50:27Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 44009, "text": "(In reply to comment #2)\n> line 216 is the iterator below, at least in SVN_HEAD:\n> \n>             msg.addHeader(\"Date\", getDate());\n> \n>             for (Iterator iter = headers.iterator(); iter.hasNext();) {\n>                 Header h = (Header) iter.next();\n>                 msg.addHeader(h.getName(), h.getValue());\n>             }\n> \n> An NPE could be triggered by headers==null. There's nothing in the class\n> initialiser to set up these headers; it relies on setHeaders() being called,\n> which presumably, it isnt in this case, or the vector is being set with a null\n> pointer)\n> \n> I'll do two things\n> -always initialise the vector\n> -skip the iteration if the vector is null (in case someone assigns a null vector\n\nThis happens if you are calling the mailer from the MailLogger, i.e.:\n\n ant -logger org.apache.tools.ant.listener.MailLogger fred\n\nMailLogger.sendMimeMail doesn't set the headers.", "id": 108926, "time": "2008-02-23T06:28:28Z", "creator": "kevin.glynn@gmail.com", "creation_time": "2008-02-23T06:28:28Z", "is_private": false, "attachment_id": null}, {"count": 5, "attachment_id": null, "creator": "bodewig@apache.org", "is_private": false, "id": 121491, "time": "2008-10-14T05:00:37Z", "bug_id": 44009, "creation_time": "2008-10-14T05:00:37Z", "tags": [], "text": "fixed with svn revision 704496.\n\nI think the new error reported in comment #3 is not related to this bug."}]