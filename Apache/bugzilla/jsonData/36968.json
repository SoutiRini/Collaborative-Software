[{"count": 0, "tags": [], "bug_id": 36968, "is_private": false, "text": "I have a build script that precompiles JSPs in web applications.  There are \nseveral different web applications that I precompile.  When I compile a single \nweb application with my Ant script, it works fine.  If I try to compile \nmultiple (it fails on the second web app) web apps, it fails with the \nexception at the end of this message.  I am using a version of Jasper that is \nbundled with Jetty 5 so, I am not 100% sure what Jasper version it is.\n\nHere is my Ant target:\n    <target name=\"jspc\">\n        <taskdef classname=\"org.apache.jasper.JspC\" name=\"jasper2\">\n            <classpath refid=\"all.class.path\"/>\n        </taskdef>\n\n        <jasper2\n            package=\"com.stoneware.${webapp.target}\"\n            validateXml=\"false\"\n            uriroot=\"${basedir}/webapps/${webapp.target}\"\n            outputDir=\"${basedir}/webapps/${webapp.target}/WEB-INF/src\"/>\n    </target>\n\n\njava.lang.ExceptionInInitializerError\n        at org.apache.tools.ant.ProjectHelper.addLocationToBuildException\n(ProjectHelper.java:539)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:388)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:106)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nCaused by: D:\\webNetwork\\build.xml:170: The following error occurred while \nexecuting this line:\njava.lang.ExceptionInInitializerError\n        at org.apache.tools.ant.ProjectHelper.addLocationToBuildException\n(ProjectHelper.java:539)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:388)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:106)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:386)\n        ... 11 more\nCaused by: java.lang.ExceptionInInitializerError\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1223)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:386)\n        ... 18 more\nCaused by: java.lang.ExceptionInInitializerError\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:219)\n        at org.apache.tools.ant.taskdefs.Definer.addDefinition\n(Definer.java:457)\n        at org.apache.tools.ant.taskdefs.Definer.execute(Definer.java:183)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        ... 19 more\nCaused by: org.apache.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: org.apache.\ncommons.logging.LogConfigurationException: Invalid class loader hierarchy.  \nYou have more than one version of 'org.apache.commons.\nlogging.Log' visible, which is not allowed. (Caused by \norg.apache.commons.logging.LogConfigurationException: Invalid class loader\nhierarchy.  You have more than one version of 'org.apache.commons.logging.Log' \nvisible, which is not allowed.) (Caused by org.apac\nhe.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: Invalid class loader \nhierarchy\n.  You have more than one version of 'org.apache.commons.logging.Log' visible, \nwhich is not allowed. (Caused by org.apache.commons\n.logging.LogConfigurationException: Invalid class loader hierarchy.  You have \nmore than one version of 'org.apache.commons.logging\n.Log' visible, which is not allowed.))\n        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance\n(LogFactoryImpl.java:543)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance\n(LogFactoryImpl.java:235)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance\n(LogFactoryImpl.java:209)\n        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)\n        at org.apache.jasper.JspC.<clinit>(JspC.java:90)\n        ... 28 more\nCaused by: org.apache.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: Invalid cla\nss loader hierarchy.  You have more than one version \nof 'org.apache.commons.logging.Log' visible, which is not allowed. (Caused by\n org.apache.commons.logging.LogConfigurationException: Invalid class loader \nhierarchy.  You have more than one version of 'org.apa\nche.commons.logging.Log' visible, which is not allowed.)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor\n(LogFactoryImpl.java:397)\n        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance\n(LogFactoryImpl.java:529)\n        ... 32 more\nCaused by: org.apache.commons.logging.LogConfigurationException: Invalid class \nloader hierarchy.  You have more than one version o\nf 'org.apache.commons.logging.Log' visible, which is not allowed.\n        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor\n(LogFactoryImpl.java:385)\n        ... 33 more\n--- Nested Exception ---\nD:\\webNetwork\\build.xml:170: The following error occurred while executing this \nline:\njava.lang.ExceptionInInitializerError\n        at org.apache.tools.ant.ProjectHelper.addLocationToBuildException\n(ProjectHelper.java:539)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:388)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:106)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:386)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:106)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nCaused by: java.lang.ExceptionInInitializerError\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1223)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:386)\n        ... 18 more\nCaused by: java.lang.ExceptionInInitializerError\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:219)\n        at org.apache.tools.ant.taskdefs.Definer.addDefinition\n(Definer.java:457)\n        at org.apache.tools.ant.taskdefs.Definer.execute(Definer.java:183)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        ... 19 more\nCaused by: org.apache.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: org.apache.\ncommons.logging.LogConfigurationException: Invalid class loader hierarchy.  \nYou have more than one version of 'org.apache.commons.\nlogging.Log' visible, which is not allowed. (Caused by \norg.apache.commons.logging.LogConfigurationException: Invalid class loader\nhierarchy.  You have more than one version of 'org.apache.commons.logging.Log' \nvisible, which is not allowed.) (Caused by org.apac\nhe.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: Invalid class loader \nhierarchy\n.  You have more than one version of 'org.apache.commons.logging.Log' visible, \nwhich is not allowed. (Caused by org.apache.commons\n.logging.LogConfigurationException: Invalid class loader hierarchy.  You have \nmore than one version of 'org.apache.commons.logging\n.Log' visible, which is not allowed.))\n        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance\n(LogFactoryImpl.java:543)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance\n(LogFactoryImpl.java:235)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance\n(LogFactoryImpl.java:209)\n        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)\n        at org.apache.jasper.JspC.<clinit>(JspC.java:90)\n        ... 28 more\nCaused by: org.apache.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: Invalid cla\nss loader hierarchy.  You have more than one version \nof 'org.apache.commons.logging.Log' visible, which is not allowed. (Caused by\n org.apache.commons.logging.LogConfigurationException: Invalid class loader \nhierarchy.  You have more than one version of 'org.apa\nche.commons.logging.Log' visible, which is not allowed.)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor\n(LogFactoryImpl.java:397)\n        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance\n(LogFactoryImpl.java:529)\n        ... 32 more\nCaused by: org.apache.commons.logging.LogConfigurationException: Invalid class \nloader hierarchy.  You have more than one version o\nf 'org.apache.commons.logging.Log' visible, which is not allowed.\n        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor\n(LogFactoryImpl.java:385)\n        ... 33 more\n--- Nested Exception ---\njava.lang.ExceptionInInitializerError\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1223)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:386)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:106)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:386)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:106)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nCaused by: java.lang.ExceptionInInitializerError\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:219)\n        at org.apache.tools.ant.taskdefs.Definer.addDefinition\n(Definer.java:457)\n        at org.apache.tools.ant.taskdefs.Definer.execute(Definer.java:183)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        ... 19 more\nCaused by: org.apache.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: org.apache.\ncommons.logging.LogConfigurationException: Invalid class loader hierarchy.  \nYou have more than one version of 'org.apache.commons.\nlogging.Log' visible, which is not allowed. (Caused by \norg.apache.commons.logging.LogConfigurationException: Invalid class loader\nhierarchy.  You have more than one version of 'org.apache.commons.logging.Log' \nvisible, which is not allowed.) (Caused by org.apac\nhe.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: Invalid class loader \nhierarchy\n.  You have more than one version of 'org.apache.commons.logging.Log' visible, \nwhich is not allowed. (Caused by org.apache.commons\n.logging.LogConfigurationException: Invalid class loader hierarchy.  You have \nmore than one version of 'org.apache.commons.logging\n.Log' visible, which is not allowed.))\n        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance\n(LogFactoryImpl.java:543)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance\n(LogFactoryImpl.java:235)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance\n(LogFactoryImpl.java:209)\n        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)\n        at org.apache.jasper.JspC.<clinit>(JspC.java:90)\n        ... 28 more\nCaused by: org.apache.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: Invalid cla\nss loader hierarchy.  You have more than one version \nof 'org.apache.commons.logging.Log' visible, which is not allowed. (Caused by\n org.apache.commons.logging.LogConfigurationException: Invalid class loader \nhierarchy.  You have more than one version of 'org.apa\nche.commons.logging.Log' visible, which is not allowed.)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor\n(LogFactoryImpl.java:397)\n        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance\n(LogFactoryImpl.java:529)\n        ... 32 more\nCaused by: org.apache.commons.logging.LogConfigurationException: Invalid class \nloader hierarchy.  You have more than one version o\nf 'org.apache.commons.logging.Log' visible, which is not allowed.\n        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor\n(LogFactoryImpl.java:385)\n        ... 33 more\n--- Nested Exception ---\njava.lang.ExceptionInInitializerError\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:219)\n        at org.apache.tools.ant.taskdefs.Definer.addDefinition\n(Definer.java:457)\n        at org.apache.tools.ant.taskdefs.Definer.execute(Definer.java:183)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:386)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:106)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:386)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:106)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1214)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1062)\n        at org.apache.tools.ant.Main.runBuild(Main.java:673)\n        at org.apache.tools.ant.Main.startAnt(Main.java:188)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:196)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:55)\nCaused by: org.apache.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: org.apache.\ncommons.logging.LogConfigurationException: Invalid class loader hierarchy.  \nYou have more than one version of 'org.apache.commons.\nlogging.Log' visible, which is not allowed. (Caused by \norg.apache.commons.logging.LogConfigurationException: Invalid class loader\nhierarchy.  You have more than one version of 'org.apache.commons.logging.Log' \nvisible, which is not allowed.) (Caused by org.apac\nhe.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: Invalid class loader \nhierarchy\n.  You have more than one version of 'org.apache.commons.logging.Log' visible, \nwhich is not allowed. (Caused by org.apache.commons\n.logging.LogConfigurationException: Invalid class loader hierarchy.  You have \nmore than one version of 'org.apache.commons.logging\n.Log' visible, which is not allowed.))\n        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance\n(LogFactoryImpl.java:543)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance\n(LogFactoryImpl.java:235)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getInstance\n(LogFactoryImpl.java:209)\n        at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)\n        at org.apache.jasper.JspC.<clinit>(JspC.java:90)\n        ... 28 more\nCaused by: org.apache.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: Invalid cla\nss loader hierarchy.  You have more than one version \nof 'org.apache.commons.logging.Log' visible, which is not allowed. (Caused by\n org.apache.commons.logging.LogConfigurationException: Invalid class loader \nhierarchy.  You have more than one version of 'org.apa\nche.commons.logging.Log' visible, which is not allowed.)\n        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor\n(LogFactoryImpl.java:397)\n        at org.apache.commons.logging.impl.LogFactoryImpl.newInstance\n(LogFactoryImpl.java:529)\n        ... 32 more\nCaused by: org.apache.commons.logging.LogConfigurationException: Invalid class \nloader hierarchy.  You have more than one version o\nf 'org.apache.commons.logging.Log' visible, which is not allowed.\n        at org.apache.commons.logging.impl.LogFactoryImpl.getLogConstructor\n(LogFactoryImpl.java:385)\n        ... 33 more", "id": 80907, "time": "2005-10-07T18:00:16Z", "creator": "Tony.Thompson@stone-ware.com", "creation_time": "2005-10-07T18:00:16Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 36968, "text": "Please find out what Jasper version it is, or try your compilation stuff with a\nknown Tomcat version, and update this issue when you have the information. \nThank you.", "id": 81439, "time": "2005-10-20T03:50:42Z", "creator": "yoavs@computer.org", "creation_time": "2005-10-20T03:50:42Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "pr@objektpark.de", "attachment_id": null, "text": "Please check your classpath for different commons logging jars !\n\n--\nCaused by: org.apache.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: org.apache.\ncommons.logging.LogConfigurationException: Invalid class loader hierarchy.  \nYou have more than one version of 'org.apache.commons.\nlogging.Log' visible, which is not allowed. (Caused by \norg.apache.commons.logging.LogConfigurationException: Invalid class loader\nhierarchy.  You have more than one version of 'org.apache.commons.logging.Log' \nvisible, which is not allowed.) (Caused by org.apac\nhe.commons.logging.LogConfigurationException: \norg.apache.commons.logging.LogConfigurationException: Invalid class loader \nhierarchy\n---", "id": 81449, "time": "2005-10-20T08:10:32Z", "bug_id": 36968, "creation_time": "2005-10-20T08:10:32Z", "is_private": false}, {"count": 3, "tags": [], "creator": "Tony.Thompson@stone-ware.com", "attachment_id": null, "is_private": false, "id": 81474, "time": "2005-10-20T18:27:14Z", "bug_id": 36968, "creation_time": "2005-10-20T18:27:14Z", "text": "I tried the Jasper out of Tomcat versions:\n\n5.0.28 - does not work (throws the error I reported)\n5.0.30 - gives another error and won't compile anything\n\nThe absolute uri: http://java.sun.com/jstl/core cannot be resolved in either \nweb.xml or the jar files deployed with this application\n\n5.5.12 - works\n\nIt appears Jetty bundles the Jasper from either Tomcat 5.0.27 or 5.0.28 (not \nsure if they are any different).  I am not sure why Tomcat has a 5.0 and 5.5 \nversion so maybe you can explain the Jasper differences between each."}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "As reported by the OP. This is fixed in 5.5.x\n\nAn explanation of the difference between 5.0.x and 5.5.x is:\nhttp://tomcat.apache.org/whichversion.html\n\nThe complete list of Jasper fixes in 5.5.x is:\nhttp://tomcat.apache.org/tomcat-5.5-doc/changelog.html", "id": 94634, "time": "2006-10-08T11:12:33Z", "bug_id": 36968, "creation_time": "2006-10-08T11:12:33Z", "is_private": false}]