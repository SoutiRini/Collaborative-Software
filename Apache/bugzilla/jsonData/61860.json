[{"count": 0, "tags": [], "bug_id": 61860, "attachment_id": null, "id": 202579, "time": "2017-12-05T16:23:25Z", "creator": "blaah@yopmail.com", "creation_time": "2017-12-05T16:23:25Z", "is_private": false, "text": "Hi,\n\napache duplicates some specific headers when a 416 error occurs:\n\n\n[root@S1 ~]# curl https://192.168.122.183/ -kv --header \"Range: bytes=6549-\"\n* About to connect() to 192.168.122.183 port 443 (#0)\n*   Trying 192.168.122.183...\n* Connected to 192.168.122.183 (192.168.122.183) port 443 (#0)\n* Initializing NSS with certpath: sql:/etc/pki/nssdb\n* skipping SSL peer certificate verification\n* SSL connection using TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\n* Server certificate:\n* \tsubject: C=FR\n* \tstart date: d\u00e9c. 05 12:18:20 2017 GMT\n* \texpire date: d\u00e9c. 05 12:18:20 2018 GMT\n* \tcommon name: (nil)\n* \tissuer: C=FR\n> GET / HTTP/1.1\n> User-Agent: curl/7.29.0\n> Host: 192.168.122.183\n> Accept: */*\n> Range: bytes=6549-\n> \n< HTTP/1.1 416 Requested Range Not Satisfiable\n< Date: Tue, 05 Dec 2017 15:43:52 GMT\n< Server: Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips\n< Public-Key-Pins-Report-Only: pin-sha256=\"Jh0ZSUYEc97HRYcwZIOkH2jKOUpmQhLO48MYd1s5pRM=\"; pin-sha256=\"2ZnCTNQBrKShr4c1olKfwNG53KiL6qoNcQi65YGRBn8=\"; pin-sha256=\"1D76xWwHug9p4iQWVBiDZF+e3UcxtPte/ig5pkYnmRU=\"; max-age=300; report-uri=\"https://protonmail.com/pkp-report\"\n< X-Frame-Options: deny\n< X-Content-Type-Options: nosniff\n< X-XSS-Protection: 1; mode=block\n< Public-Key-Pins-Report-Only: pin-sha256=\"Jh0ZSUYEc97HRYcwZIOkH2jKOUpmQhLO48MYd1s5pRM=\"; pin-sha256=\"2ZnCTNQBrKShr4c1olKfwNG53KiL6qoNcQi65YGRBn8=\"; pin-sha256=\"1D76xWwHug9p4iQWVBiDZF+e3UcxtPte/ig5pkYnmRU=\"; max-age=300; report-uri=\"https://protonmail.com/pkp-report\"\n< X-Frame-Options: deny\n< X-Content-Type-Options: nosniff\n< X-XSS-Protection: 1; mode=block\n< Transfer-Encoding: chunked\n< Content-Type: text/html; charset=iso-8859-1\n< \n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html><head>\n<title>416 Requested Range Not Satisfiable</title>\n</head><body>\n<h1>Requested Range Not Satisfiable</h1>\n<p>None of the range-specifier values in the Range\nrequest-header field overlap the current extent\nof the selected resource.</p>\n</body></html>\n* Connection #0 to host 192.168.122.183 left intact\n[root@S1 ~]# \n\n\n\nThe expected behavior is to not get the headers duplicated, here's the configuration of the vhost:\n\n\n<VirtualHost *:443>\n\n\tServerName backend\n\tDocumentRoot /var/www/html/\n\tSSLEngine on\n   \tSSLProtocol all -SSLv2 -SSLv3\n   \tSSLCipherSuite HIGH:!aNULL:!MD5\n   \tSSLOptions +FakeBasicAuth +ExportCertData +StdEnvVars +OptRenegotiate\n   \tSSLCertificateFile /etc/ssl/apache2/cert.pem\n   \tSSLCertificateKeyFile /etc/ssl/apache2/key.pem\n\n\t    Header always set Public-Key-Pins-Report-Only \"pin-sha256=\\\"Jh0ZSUYEc97HRYcwZIOkH2jKOUpmQhLO48MYd1s5pRM=\\\"; pin-sha256=\\\"2ZnCTNQBrKShr4c1olKfwNG53KiL6qoNcQi65YGRBn8=\\\"; pin-sha256=\\\"1D76xWwHug9p4iQWVBiDZF+e3UcxtPte/ig5pkYnmRU=\\\"; max-age=300;\"\n    Header always set X-Frame-Options \"deny\"\n    Header always set X-Content-Type-Options \"nosniff\"\n    Header always set X-XSS-Protection \"1; mode=block\"\n\n\n\n\t<Directory \"/var/www/html\">\n\t\tOptions ExecCGI FollowSymLinks Includes\n       AllowOverride All\n       order deny,allow\n       allow from all\n\t</Directory>\n\n\n\tErrorLog /var/log/httpd/error_log\n    CustomLog /var/log/httpd/access_log common\n</VirtualHost>\n\n\nI installed apache on CentOS 7 through yum install."}]