[{"count": 0, "tags": [], "bug_id": 38387, "attachment_id": null, "id": 85004, "time": "2006-01-25T20:35:02Z", "creator": "hauser@acm.org", "creation_time": "2006-01-25T20:35:02Z", "is_private": false, "text": "http://www.bouncycastle.org/ appears to have the classes needed for this!\n\n\nsee also bug 38384 re sPop3 and smtps (TLS/SSL)"}, {"count": 1, "tags": [], "bug_id": 38387, "attachment_id": null, "text": "would BC be acceptable license-wise?\n\nsee also bug 45053", "id": 117169, "time": "2008-05-30T00:07:57Z", "creator": "hauser@acm.org", "creation_time": "2008-05-30T00:07:57Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 38387, "is_private": false, "count": 2, "id": 117577, "time": "2008-06-11T08:27:59Z", "creator": "haeberling@privasphere.com", "creation_time": "2008-06-11T08:27:59Z", "text": "\nFor reading signed email messages, it would be nice to be able to test the following:\n\n1. Whether a mail message was signed\n2. Who signed the mail message\n3. is the signature valid\n\n(1) is already possible to some extend with the current Mail Reader Sampler: One can use a Response Assertion that checks the content-type of the message.\n\nFor (2) and (3) it would be best to create a new Assertion\nFurther the Mail Reader Sampler has to be extended to store the whole Mime message it receives. This is needed to verify the signature in the Assertion.\n\n"}, {"count": 3, "tags": [], "creator": "haeberling@privasphere.com", "is_private": false, "text": "Created attachment 22123\nSMIMEAssertion\n\nCreated an SMIME Assertion for Jemeter. It depends on the Bouncycastle, namely on the bcprov.jar and the bcmail.jar.\nIt only works together with a MailReaderSampler. I had to make some changes original MailReaderSampler which did not store the whole MIME message retrieved. See Bug 45200\n\nFeatures:\n- checks that a mail was signed / or not signed\n- verifies the signature\n- checks the identity of the signer. I.e. allows to set constraints on the signer certificate", "id": 117663, "time": "2008-06-13T07:14:53Z", "bug_id": 38387, "creation_time": "2008-06-13T07:14:53Z", "attachment_id": 22123}, {"count": 4, "tags": [], "creator": "haeberling@privasphere.com", "attachment_id": 22165, "id": 117919, "time": "2008-06-23T08:44:39Z", "bug_id": 38387, "creation_time": "2008-06-23T08:44:39Z", "is_private": false, "text": "Created attachment 22165\nSMIMEAssertion 2\n\nAdapted the patch such that it works together with the patch in Bug 45200\n\ncurrently only checks the signature of the first child sample result."}, {"count": 5, "attachment_id": null, "bug_id": 38387, "is_private": false, "id": 137016, "time": "2010-05-21T07:55:23Z", "creator": "moreira@privasphere.com", "creation_time": "2010-05-21T07:55:23Z", "tags": [], "text": "I am currently working on this topic and have used this class with the svn version: 946591\n\nIs there any reason to not include it in the main distribution? I would be willing to correct things that may be pending."}, {"count": 6, "tags": [], "bug_id": 38387, "attachment_id": null, "is_private": false, "id": 137025, "time": "2010-05-21T18:14:09Z", "creator": "sebb@apache.org", "creation_time": "2010-05-21T18:14:09Z", "text": "(In reply to comment #1)\n> would BC be acceptable license-wise?\n> \n> see also bug 45053\n\nYes, Bouncy Castle is OK license-wise"}, {"count": 7, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "It would be possible to add this, but I think the jars would have to be optional.\n\nIt looks as though each version of Java needs its own jar, and the jars are relatively large for a feature which is likely to be needed by a small percentage of JMeter users.\n\nI don't know if it is possible to code the GUI class so it fails gracefully at run-time if the jars are not present?", "id": 137026, "time": "2010-05-21T18:28:18Z", "bug_id": 38387, "creation_time": "2010-05-21T18:28:18Z", "is_private": false}, {"count": 8, "attachment_id": null, "bug_id": 38387, "is_private": false, "id": 137099, "time": "2010-05-25T06:48:55Z", "creator": "moreira@privasphere.com", "creation_time": "2010-05-25T06:48:55Z", "tags": [], "text": "Coding the GUI class to fail gracefully in the absence of the jars is not a problem. We can do it by testing if we can instantiate the BouncyCastleProvider:\n\n\tpublic static boolean isBouncyCastleAvailable() {\n\t\ttry {\n\t\t\tClass.forName(\"org.bouncycastle.jce.provider.BouncyCastleProvider\");\n\t\t} catch (ClassNotFoundException e) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\nThe problem is that the SMIMEAssertion class is also instantiated when we try to open a file that has this assertion. Since the SMIMEAssertion class has several bouncy castle imports, the class loading breaks before we can reach the graceful fail approach of the GUI class.\n\nI suppose we can modify the architecture a bit to migrate all BC dependent calls to an auxiliary class.\n\nBut please keep in mind that the SMTPSampler also references the BC library. But I suppose we can also implement a graceful failure interface there. See bug45053"}, {"count": 9, "tags": [], "text": "Created attachment 25481\nSMIMEAssertion patch\n\nThis patch contains a SMIMEAssertion with a graceful failure presentation at the GUI level when the bouncy castle jar is not present.", "attachment_id": 25481, "bug_id": 38387, "id": 137103, "time": "2010-05-25T08:41:58Z", "creator": "moreira@privasphere.com", "creation_time": "2010-05-25T08:41:58Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 38387, "attachment_id": null, "id": 137232, "time": "2010-05-31T08:01:55Z", "creator": "moreira@privasphere.com", "creation_time": "2010-05-31T08:01:55Z", "is_private": false, "text": "Do we have progress on the acceptance of this patch? Is there anything else missing? I still have some time that I can invest on this topic."}, {"count": 11, "tags": [], "creator": "sebb@apache.org", "is_private": false, "text": "Latest Patch looks good.\n\nThe GUI loads fine even if the BC jars are missing so they are only needed for compiling JMeter. [I think the \"Check values\" option should be last as this will allow the radio buttons to appear closer together, but I can fix that later.]\n\nIt would be helpful to have a patch for the documentation as well, i.e. \nxdocs/user_manual/component_reference.xml.\n\nWould you be able to provide that? \nThe new info should go at the end of the Assertions section (to avoid renumbering everything).\n\nAlso, some test cases would be good.", "id": 137283, "time": "2010-06-02T12:28:20Z", "bug_id": 38387, "creation_time": "2010-06-02T12:28:20Z", "attachment_id": null}, {"count": 12, "tags": [], "creator": "sebb@apache.org", "is_private": false, "text": "Note: existing JUnit tests for Assertions are here:\n\nhttp://svn.apache.org/repos/asf/jakarta/jmeter/trunk/test/src/org/apache/jmeter/assertions\n\nin case that helps.", "id": 137376, "time": "2010-06-05T18:37:10Z", "bug_id": 38387, "creation_time": "2010-06-05T18:37:10Z", "attachment_id": null}, {"attachment_id": 25573, "tags": [], "creator": "moreira@privasphere.com", "is_private": false, "count": 13, "id": 137524, "time": "2010-06-10T05:17:06Z", "bug_id": 38387, "creation_time": "2010-06-10T05:17:06Z", "text": "Created attachment 25573\nSMIME Assertion screenshot"}, {"count": 14, "tags": [], "text": "Created attachment 25574\nPatch for the screen shot\n\nI have also added the png file as another attachment", "attachment_id": 25574, "bug_id": 38387, "id": 137525, "time": "2010-06-10T05:18:25Z", "creator": "moreira@privasphere.com", "creation_time": "2010-06-10T05:18:25Z", "is_private": false}, {"count": 15, "tags": [], "bug_id": 38387, "attachment_id": 25575, "is_private": false, "id": 137526, "time": "2010-06-10T05:20:08Z", "creator": "moreira@privasphere.com", "creation_time": "2010-06-10T05:20:08Z", "text": "Created attachment 25575\nDocumentation patch\n\nI am unsure on how to process this xml file to generate the documentation. It may not generate the output that I expected."}, {"count": 16, "tags": [], "creator": "moreira@privasphere.com", "is_private": false, "text": "Junit tests will need to wait a couple more days, but I believe I will be able to work on it.", "id": 137527, "time": "2010-06-10T05:21:03Z", "bug_id": 38387, "creation_time": "2010-06-10T05:21:03Z", "attachment_id": null}, {"count": 17, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 137909, "time": "2010-06-25T13:01:32Z", "bug_id": 38387, "creation_time": "2010-06-25T13:01:32Z", "is_private": false, "text": "Thanks again.\n\nCode has been added to SVN:\n\nURL: http://svn.apache.org/viewvc?rev=958022&view=rev\nLog:\nBug 38387  - Add SMIME Assertion\nInitial checkin, with minor adjustments\n\nAdded:\n   jakarta/jmeter/trunk/src/components/org/apache/jmeter/assertions/SMIMEAssertion.java   (with props)\n   jakarta/jmeter/trunk/src/components/org/apache/jmeter/assertions/SMIMEAssertionTestElement.java   (with props)\n   jakarta/jmeter/trunk/src/components/org/apache/jmeter/assertions/gui/SMIMEAssertionGui.java   (with props)\nModified:\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/resources/messages.properties\n   jakarta/jmeter/trunk/xdocs/usermanual/component_reference.xml\n\nURL: http://svn.apache.org/viewvc?rev=958031&view=rev\nLog:\nRaw types\nMissing @Override marker\n\nModified:\n   jakarta/jmeter/trunk/src/components/org/apache/jmeter/assertions/SMIMEAssertion.java\n   jakarta/jmeter/trunk/src/components/org/apache/jmeter/assertions/gui/SMIMEAssertionGui.java\n\nURL: http://svn.apache.org/viewvc?rev=958033&view=rev\nLog:\nAllow for empty sub-results.\n\nModified:\n   jakarta/jmeter/trunk/src/components/org/apache/jmeter/assertions/SMIMEAssertion.java\n\nURL: http://svn.apache.org/viewvc?rev=958035&view=rev\nLog:\nBug 38387  - Add SMIME Assertion\nUpdated screenshot\n\nAdded:\n   jakarta/jmeter/trunk/docs/images/screenshots/assertion/smime.png   (with props)\n   jakarta/jmeter/trunk/xdocs/images/screenshots/assertion/smime.png   (with props)\nModified:\n   jakarta/jmeter/trunk/xdocs/usermanual/component_reference.xml\n\nI had to make a few changes (e.g. GUI now shows normal screen regardless; it's only at run-time that the BC jars are detected). However these were very easy to do as the BC-dependent code is nicely packaged in a single class.\n\n==\n\nIf you do find time to add some JUnit tests, please attach to this issue.\nOr, if you only have test files and certs, please attach those.\n\nAlso, if you get a chance to test the code, it will be in nightly builds from r958035 - thanks!"}, {"count": 18, "tags": [], "bug_id": 38387, "attachment_id": null, "is_private": false, "id": 137913, "time": "2010-06-25T14:05:31Z", "creator": "milamber@apache.org", "creation_time": "2010-06-25T14:05:31Z", "text": "Missing some bouncy castle jar in ant script (download_jars)?"}, {"count": 19, "tags": [], "bug_id": 38387, "attachment_id": null, "is_private": false, "id": 137914, "time": "2010-06-25T14:55:58Z", "creator": "sebb@apache.org", "creation_time": "2010-06-25T14:55:58Z", "text": "(In reply to comment #18)\n> Missing some bouncy castle jar in ant script (download_jars)?\n\nWell spotted!\n\nFixed in SVN:\n\nURL: http://svn.apache.org/viewvc?rev=958074&view=rev\nLog:\nOops - forgot to include the BC jars in the download\nProps to Milamber for spotting this!\n\nModified:\n   jakarta/jmeter/trunk/build.properties\n   jakarta/jmeter/trunk/build.xml"}, {"count": 20, "tags": [], "bug_id": 38387, "is_private": false, "text": "Compile works fine, thanks!", "id": 137915, "time": "2010-06-25T15:18:57Z", "creator": "milamber@apache.org", "creation_time": "2010-06-25T15:18:57Z", "attachment_id": null}, {"count": 21, "tags": [], "bug_id": 38387, "attachment_id": 25650, "text": "Created attachment 25650\nSmall patch for saveservice.properties\n\nInclude two changes:\n1- SMIME\n2- JMS (recent changes) https://issues.apache.org/bugzilla/show_bug.cgi?id=49482 \n\nAll tests works with this patch\n     [java] OK (1984 tests)", "id": 137954, "time": "2010-06-28T16:22:16Z", "creator": "milamber@apache.org", "creation_time": "2010-06-28T16:22:16Z", "is_private": false}, {"count": 22, "tags": [], "bug_id": 38387, "attachment_id": null, "is_private": false, "id": 137957, "time": "2010-06-28T18:00:50Z", "creator": "sebb@apache.org", "creation_time": "2010-06-28T18:00:50Z", "text": "(In reply to comment #21)\n> Created an attachment (id=25650) [details]\n> Small patch for saveservice.properties\n> \n> Include two changes:\n> 1- SMIME\n> 2- JMS (recent changes)\n> https://issues.apache.org/bugzilla/show_bug.cgi?id=49482 \n> \n> All tests works with this patch\n>      [java] OK (1984 tests)\n\nThanks again for finding these bugs!\n\nFixed in\n\nURL: http://svn.apache.org/viewvc?rev=958761&view=rev\nLog:\nBug 38387  - Add SMIME Assertion\nForgot to add saveservice shorthand property names\n\nModified:\n   jakarta/jmeter/trunk/bin/saveservice.properties"}, {"count": 23, "tags": [], "bug_id": 38387, "attachment_id": 25661, "is_private": false, "id": 138006, "time": "2010-06-29T13:50:23Z", "creator": "moreira@privasphere.com", "creation_time": "2010-06-29T13:50:23Z", "text": "Created attachment 25661\nsmime assertion with added fields"}, {"count": 24, "tags": [], "bug_id": 38387, "attachment_id": 25662, "is_private": false, "id": 138007, "time": "2010-06-29T13:53:10Z", "creator": "moreira@privasphere.com", "creation_time": "2010-06-29T13:53:10Z", "text": "Created attachment 25662\nThis patch allows the specification of the message position\n\nSince we are working on this assertion I thought I should submit this small patch.\n\nI have added a small functionality to this assertion. This patch allows to specify the message position that should be asserted. As it currently is implemented it always takes the first one, which is not optimal."}, {"count": 25, "tags": [], "text": "Created attachment 25663\nNew screenshot for documentation", "attachment_id": 25663, "id": 138008, "creator": "moreira@privasphere.com", "time": "2010-06-29T13:53:47Z", "bug_id": 38387, "creation_time": "2010-06-29T13:53:47Z", "is_private": false}, {"count": 26, "tags": [], "text": "Good addition, but it would be simpler (and more flexible) to use just a message number, where negative numbers count from the last message, i.e. -1 = last, -2 = penultimate etc.\n\nThis also means that a variable reference can be used.", "attachment_id": null, "id": 138009, "creator": "sebb@apache.org", "time": "2010-06-29T14:21:41Z", "bug_id": 38387, "creation_time": "2010-06-29T14:21:41Z", "is_private": false}, {"count": 27, "tags": [], "creator": "moreira@privasphere.com", "is_private": false, "text": "What you are suggesting is the same as the message position option but starting from the last and counting backwards. Currently the message position counts from the first message.\n\nHaving only relative positioning does not solve the problem of the last message (in my patch) or the first message (in your proposition). This occurs since you don't know in advance the number of messages that may be available in the INBOX.", "id": 138014, "time": "2010-06-29T16:53:14Z", "bug_id": 38387, "creation_time": "2010-06-29T16:53:14Z", "attachment_id": null}, {"count": 28, "attachment_id": null, "bug_id": 38387, "is_private": false, "id": 138017, "time": "2010-06-29T17:31:31Z", "creator": "sebb@apache.org", "creation_time": "2010-06-29T17:31:31Z", "tags": [], "text": "(In reply to comment #27)\n> What you are suggesting is the same as the message position option but starting\n> from the last and counting backwards.\n\nOnly for negative numbers.\n\n> Currently the message position counts from the first message.\n\nIn my version, positive numbers would still do so.\n\n> Having only relative positioning does not solve the problem of the last message\n> (in my patch) or the first message (in your proposition). This occurs since you\n> don't know in advance the number of messages that may be available in the\n> INBOX.\n\nHuh?\n\nFor LAST, your code does:\n   msg = getMessageFromResponse(response,subResults.length -1);\n\nThis is identical to my proposal:\n   int offset = -1;\n   msg = getMessageFromResponse(response,subResults.length+offset);\n\nThe code would be almost identical, except that instead of 3 radio buttons and a text field, there would only be a text field. \n\nI'll probably implement that shortly.\n\nHowever, I'm not yet sure whether to start numbering messages at 0 or 1.\nMaybe 0 should be reserved for the container message (if there is one), or maybe 0 and 1 should both indicate first."}, {"count": 29, "attachment_id": null, "bug_id": 38387, "is_private": false, "id": 138028, "time": "2010-06-30T04:53:54Z", "creator": "moreira@privasphere.com", "creation_time": "2010-06-30T04:53:54Z", "tags": [], "text": "I see your point. I thought you only wanted to have negative numbers. In that case in your approach it would not be possible to know in advance what would be the first element since you don't know how many messages will come (subResults.length).\n\nIf you allow positive AND negative numbers than the user can easily specify last and first. Agreed :)"}, {"count": 30, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "text": "I think this is now complete", "id": 138060, "time": "2010-07-01T14:00:21Z", "bug_id": 38387, "creation_time": "2010-07-01T14:00:21Z", "is_private": false}]