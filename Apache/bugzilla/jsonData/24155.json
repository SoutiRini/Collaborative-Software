[{"count": 0, "tags": [], "creator": "willy@debian.org", "text": "It's legitimate for Unix filenames to contain a literal \"?\".\nThe original submitter of this bug has a patch to add a configuration\noption to not split on a \"?\".  Could you consider the patch in the\nURL for application?", "id": 46325, "time": "2003-10-27T17:20:50Z", "bug_id": 24155, "creation_time": "2003-10-27T17:20:50Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 24155, "attachment_id": null, "text": "Thom May and /me talked about this one a while ago on IRC and came to the\nconclusion that there's no issue to fix. One can easily use %3F in conclusion\nwith NE option to treat the question mark as part of the name. That is what NE\nis intended for -- and how URIs *have to* be written.", "id": 46327, "time": "2003-10-27T17:25:57Z", "creator": "nd@perlig.de", "creation_time": "2003-10-27T17:25:57Z", "is_private": false}, {"count": 2, "tags": [], "creator": "willy@debian.org", "text": "Hi Andre.  I received feedback from this user suggesting that your\nconclusion is incorrect.  Here is the mail he sent me:\n\nFrom: Jade Nicoletti <nicoletti@nns.ch>\n\nHi Matthew\n\nIt is _not_ possible to use NE and %3F, at least not if I don't want to\ndo a redirect. In the mod_rewrite reference manual, there's an example:\n        RewriteRule /foo/(.*) /bar?arg=P1\\%3d$1 [R,NE]\nThis produces a redirect, which leads to a new request, where the new uri\nis parsed again by apache (core probably, not mod_rewrite) and the %3F\nis translated to a '?'. But that is not what I am looking for. I don't\nwant a redirect, I don't want a second request to be made.\n\nI have something like the following:\n\nAddEncoding gzip .gz\nRewriteEngine On\nRewriteCond %{HTTP:Accept-Encoding} gzip\nRewriteRule ^/static/(.+).html$ /static/$1.html.gz [L,nosplit]\n\nWhere $1 does contain a \"%3F\", like in\n        http://olwm2003.ch/static/page.php%3Fid=30&lang=en.html\n\nI've tried very hard to get a configuration for this without the patch.\nI've carefully studied the manual and the guide. I've read the source.\nBut I really cound't get it set up without \"nosplit\". The subject is\nsomewhat complex, but i am very sure that it's not possible without\nthe patch. If I'm wrong, please explain me how it is done the right way.\n\nThank you\n\nJade Nicoletti\n\nPS: mod_gzip is slow like a dog. mod_rewrite flies. That's why I'm\n        using it and not mod_gzip.\n", "id": 46335, "time": "2003-10-27T19:05:30Z", "bug_id": 24155, "creation_time": "2003-10-27T19:05:30Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 24155, "attachment_id": null, "text": "> RewriteRule /foo/(.*) /bar?arg=P1\\%3d$1 [R,NE]\n\nSure it produces a new redirect. Because of the [R] option. What happens without it?", "id": 46359, "time": "2003-10-28T07:25:01Z", "creator": "nd@perlig.de", "creation_time": "2003-10-28T07:25:01Z", "is_private": false}, {"count": 4, "tags": [], "creator": "willy@debian.org", "text": "Submitter got back to me with some more information:\n\nMy working config (using phaethon.ch/static/ for testing purposes):\n\nAddEncoding gzip .gz\nRewriteEngine On\nRewriteLog \"/tmp/rewrite.log\"\nRewriteLogLevel 3\nRewriteCond %{HTTP:Accept-Encoding} gzip\nRewriteRule ^/static/(.+).html$ /static/$1.html.gz [L,nosplit]\n\ngives:\n\n[phaethon.ch/sid#817517c][rid#818e454/initial] (2) init rewrite engine with\nrequested uri /static/page.php?id=3.html\n[phaethon.ch/sid#817517c][rid#818e454/initial] (3) applying pattern\n'^/static/(.+).html$' to uri '/static/page.php?id=3.html'\n[phaethon.ch/sid#817517c][rid#818e454/initial] (2) rewrite\n/static/page.php?id=3.html -> /static/page.php?id=3.html.gz\n[phaethon.ch/sid#817517c][rid#818e454/initial] (2) local path result:\n/static/page.php?id=3.html.gz\n[phaethon.ch/sid#817517c][rid#818e454/initial] (2) prefixed with document_root\nto /home/project/web-site/phaethon/web-files/static/page.php?id=3.html.gz\n[phaethon.ch/sid#817517c][rid#818e454/initial] (1) go-ahead with\n/home/project/web-site/phaethon/web-files/static/page.php?id=3.html.gz [OK]\n\n\nyour suggested config:\nRewriteRule ^/static/(.+).html$ /static/$1.html.gz [L,NE]\n\ngives (the nonworking result):\n\n[phaethon.ch/sid#81aae9c][rid#8187ec4/initial] (2) init rewrite engine with\nrequested uri /static/page.php?id=4.html\n[phaethon.ch/sid#81aae9c][rid#8187ec4/initial] (3) applying pattern\n'^/static/(.+).html$' to uri '/static/page.php?id=4.html'\n[phaethon.ch/sid#81aae9c][rid#8187ec4/initial] (2) rewrite\n/static/page.php?id=4.html -> /static/page.php?id=4.html.gz\n[phaethon.ch/sid#81aae9c][rid#8187ec4/initial] (3) split\nuri=/static/page.php?id=4.html.gz -> uri=/static/page.php, args=id=4.html.gz\n[phaethon.ch/sid#81aae9c][rid#8187ec4/initial] (2) local path result:\n/static/page.php\n[phaethon.ch/sid#81aae9c][rid#8187ec4/initial] (2) prefixed with document_root\nto /home/project/web-site/phaethon/web-files/static/page.php\n[phaethon.ch/sid#81aae9c][rid#8187ec4/initial] (1) go-ahead with\n/home/project/web-site/phaethon/web-files/static/page.php [OK]\n\n\nor did you mean (which works neither):\nRewriteRule ^/static/(.+)\\?(.+).html$ /static/$1\\%3F$2.html.gz [L,NE]\n\ngives:\n\n[phaethon.ch/sid#81ff69c][rid#816dd24/initial] (2) init rewrite engine with\nrequested uri /static/page.php?id=8.html\n[phaethon.ch/sid#81ff69c][rid#816dd24/initial] (3) applying pattern\n'^/static/(.+)\\?(.+).html$' to uri '/static/page.php?id=8.html'\n[phaethon.ch/sid#81ff69c][rid#816dd24/initial] (2) rewrite\n/static/page.php?id=8.html -> /static/page.php%3Fid=8.html.gz\n[phaethon.ch/sid#81ff69c][rid#816dd24/initial] (2) local path result:\n/static/page.php%3Fid=8.html.gz\n[phaethon.ch/sid#81ff69c][rid#816dd24/initial] (2) prefixed with document_root\nto /home/project/web-site/phaethon/web-files/static/page.php%3Fid=8.html.gz\n[phaethon.ch/sid#81ff69c][rid#816dd24/initial] (1) go-ahead with\n/home/project/web-site/phaethon/web-files/static/page.php%3Fid=8.html.gz [OK]", "id": 46379, "time": "2003-10-28T17:48:59Z", "bug_id": 24155, "creation_time": "2003-10-28T17:48:59Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "id": 46381, "time": "2003-10-28T18:02:45Z", "bug_id": 24155, "creation_time": "2003-10-28T18:02:45Z", "is_private": false, "text": "Ok, I'm conviced. It's on my todo. Thanks for your patience with me :)"}, {"count": 6, "tags": [], "bug_id": 24155, "attachment_id": null, "id": 106197, "time": "2007-08-02T12:57:11Z", "creator": "willy@debian.org", "creation_time": "2007-08-02T12:57:11Z", "is_private": false, "text": "Has Andre Malo disappeared?  The last comment on this bug indicates he accepts\nthis to be a legitimate bug and is working on it.  Is this fixed in Apache 2.2?\nSome form of reason would be helpful, so I can close the Debian bug gracefully."}, {"count": 7, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "id": 106225, "time": "2007-08-02T16:33:40Z", "bug_id": 24155, "creation_time": "2007-08-02T16:33:40Z", "is_private": false, "text": "Please don't add other peoples' addresses to the cc list.\n\nThis is a minor bug in an obsolete version, so there is no developer time to fix\nit. If it still exists in 2.2, feel free to refile (or reopen and change the\nversion). You can pass that exact message downstream if you wish.\n\nSorry, but our limited developer resources are much better spent working on bugs\nknown to exist in current versions."}]