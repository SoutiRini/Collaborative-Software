[{"count": 0, "attachment_id": null, "creator": "cowwoc@bbs.darktech.org", "is_private": false, "id": 68893, "time": "2004-12-23T07:23:23Z", "bug_id": 32820, "creation_time": "2004-12-23T07:23:23Z", "tags": [], "text": "Hi,\n\nWhen JDK 1.5.0_01 is installed, Ant 1.6.2 breaks. It complains:\n\nUnable to locate tools.jar. Expected to find it in C:\\Program\nFiles\\Java\\jre1.5.0_01\\lib\\tools.jar\n\nBut in reality this file does not exist. In JDK 1.5.0_01, tools.jar only exists\nin C:\\Program Files\\Java\\jdk1.5.0_01\\lib\\tools.jar\n\nPlease post a workaround until this is fixed in the next release of Ant."}, {"count": 1, "tags": [], "creator": "jan@materne.de", "text": "Workaround is including that file by hand:\n\nant -lib C:\\Program Files\\Java\\jdk1.5.0_01\\lib\\tools.jar\n\n\nBut I think your environment is net set correctly. Just a view into ant.bat:\n- execute %HOME%\\antrc_pre.bat\n- check ANT_HOME\n- check Java\n  1) set _JAVACMD=%JAVACMD%\n  2) use java.exe from JAVA_HOME\\bin\n  3) use java.exe from PATH\n- start Ant\n- execute %HOME%\\antrc_post.bat\n\n1) I think your JAVA_HOME points to the JRE and not to the JDK.\n2) If you cant reset your JAVA_HOME you could try to reset it in the %HOME%\n\\antrc_pre.bat and restore it in %HOME%\\antrc_post.bat\n3) If that doesnt work you could include tools.jar in CLASSPATH (maybe set in \nthe pre bat).\n\n\nThese are the first statements about \"Workaround\" and first thoughts. I havent \nverified that behaviour yet.", "id": 68895, "time": "2004-12-23T07:58:09Z", "bug_id": 32820, "creation_time": "2004-12-23T07:58:09Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "cowwoc@bbs.darktech.org", "text": "Jan,\n\nYou are a life saver. Turns out my JAVA_HOME still pointed to jdk1.5.0 instead\nof jdk1.5.0_01. I don't know why this caused Ant to look inside my JRE directory\ninstead of JDK (maybe it got the wrong key from the registry?!) but anyway\nfixing this value fixed the problem.\n\nI don't think that the JDK/JRE installer sets JAVA_HOME, so you guys should\nreally have this working if it is undefined. I tried undefining it and it keeps\non looking inside my JRE directory. Any idea why?\n\nThanks,\nGili", "id": 68898, "time": "2004-12-23T08:15:20Z", "bug_id": 32820, "creation_time": "2004-12-23T08:15:20Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "jkf@apache.org", "text": "JAVA_HOME is an environment variable both on windows flavours and unix flavours.\n\nIf no JAVA_HOME is set ant uses the location of the found java executable to\ndetermine JAVA_HOME itself. In case the found java executable is from the JRE\nand not the JDK then tools will not be found.\n\nIn case a wrong JAVA_HOME is provided which has been either set by you, or your\nadministrator (or by an installer of some other program) it will be happily\nused, and not yield the desired effect.\n\n", "id": 68953, "time": "2004-12-24T09:34:19Z", "bug_id": 32820, "creation_time": "2004-12-24T09:34:19Z", "is_private": false, "attachment_id": null}]