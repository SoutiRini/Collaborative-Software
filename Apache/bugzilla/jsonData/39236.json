[{"count": 0, "tags": [], "creator": "blogarithme@gmail.com", "attachment_id": null, "text": "SUMMARY:\nI was running Apache 2.0.52 . Yesterday I upgraded to 2.2.0 and all 'include \nvirtual' stop to work. After some investigations if found that 'include \nvirtual' is only working if the file to include is less than 256 bytes.\n\n\nHOW TO REPRODUCE:\nThe config of my virtual host is very simple:\n\n  AddType text/html .shtml\n  AddOutputFilter   INCLUDES .shtml\n\n  Document", "id": 87664, "time": "2006-04-07T11:42:29Z", "bug_id": 39236, "creation_time": "2006-04-07T11:42:29Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 39236, "text": "(I add here what was truncated in my original description)\n\nHOW TO REPRODUCE:\nThe config of the virtual host is very simple:\n\n  AddType text/html .shtml\n  AddOutputFilter   INCLUDES .shtml\n\n  DocumentRoot  /home/web/htdocs\n  <Directory    /home/web/htdocs>\n    Options       Includes\n    AllowOverride None    \n    Order         allow,deny\n    Allow         from all  \n  </Directory>\n  \n\nI use two small files:\n  > ls -l test*\n  -rw-r--r--   1 web web    51  Apr 7 07:20 test.shtml\n  -rw-r--r--   1 web web   255  Apr 7 07:21 test.txt\n  \n> cat test.shtml\n  <html>\n  <!--#include virtual='test.txt' -->\n  </html>\n\n> cat test.txt\n  123456789 123456789 123456789 123456789 123456789\n  123456789 123456789 123456789 123456789 123456789\n  ...\n\n> wc -c test.txt\n    255 test.txt\n\nIn this situation (where the size of test.txt is 255 bytes or less) the 'include\nvirtual' is working as expected.\n\nNow, I add at least one byte to test.txt Its new size is > 255. \nIn this new situation the 'include' is no more working.\n\nI think there is no interaction with other modules because I use a very limited\nnumber of modules:\n\n(output from /server-info?list)\nServer Module List\n    mod_dir.c\n    mod_vhost_alias.c\n    mod_info.c\n    mod_status.c\n    mod_mime.c\n    mod_log_config.c\n    mod_filter.c\n    mod_include.c\n    mod_authz_host.c\n    mod_so.c\n    http_core.c\n    prefork.c\n    core.c\n\nEven with the 'LogLevel' set to 'debug' there is nothing interesting in the logs.\n\n\n(Output from /server-info)\nServer Settings\n  Server Version: Apache/2.2.0 (Unix)\n  Server Built: Jan 1 2006 02:14:58\n  Module Magic Number: 20051115:0\n  Timeouts: connection: 300    keep-alive: 300\n  MPM Name: Prefork\n  MPM Information: Max Daemons: 256 Threaded: no Forked: yes\n  Server Architecture: 32-bit\n  Server Root: /usr/local/apache2\n  Config File: /usr/local/apache2/conf/httpd.conf\n  Server Built With: \n  -D APACHE_MPM_DIR=\"server/mpm/prefork\" \n  -D APR_HAS_SENDFILE \n  -D APR_HAS_MMAP \n  -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled) \n  -D APR_USE_FCNTL_SERIALIZE \n  -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT \n  -D APR_HAS_OTHER_CHILD \n  -D AP_HAVE_RELIABLE_PIPED_LOGS \n  -D HTTPD_ROOT=\"/usr/local/apache2\" \n  -D SUEXEC_BIN=\"/usr/local/apache2/bin/suexec\" \n  -D DEFAULT_ERRORLOG=\"logs/error_log\" \n  -D AP_TYPES_CONFIG_FILE=\"conf/mime.types\" \n  -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\nNB: The XBitHack is a workaround only for text/html files\nnot for those used by wap (.wml)\n\n\nI hope this can help...\n", "id": 87668, "time": "2006-04-07T14:19:48Z", "creator": "blogarithme@gmail.com", "creation_time": "2006-04-07T14:19:48Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "text": "any errors reported?  (to browser or web server error log)?", "id": 87672, "time": "2006-04-07T16:15:43Z", "bug_id": 39236, "creation_time": "2006-04-07T16:15:43Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 39236, "text": "(In reply to comment #2)\n> any errors reported?  (to browser or web server error log)?\n\nNo :( \n- nothing in the Apache error logs. Neither in the global server nor in the\nvirtual host. Even with 'LogLevel' set to 'debug'.\n- nothing in the browser (I tried with Opera 8, Firefox 1.5 and IE6)\n", "id": 87725, "time": "2006-04-10T13:42:04Z", "creator": "blogarithme@gmail.com", "creation_time": "2006-04-10T13:42:04Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 39236, "text": "I haven't compiled myself the apache server.\nI use a package from the SunFreeware.com site.\n\n  http://sunfreeware.nl.uu.net/programlistsparc8.html#apache22", "id": 87819, "time": "2006-04-12T08:37:14Z", "creator": "blogarithme@gmail.com", "creation_time": "2006-04-12T08:37:14Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 39236, "attachment_id": null, "id": 88745, "time": "2006-05-03T10:39:13Z", "creator": "jorton@redhat.com", "creation_time": "2006-05-03T10:39:13Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of 39463 ***"}]