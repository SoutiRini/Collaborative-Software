[{"count": 0, "tags": [], "text": "For example move keepass.kdbx.tmp2 to keepass.kdbx fails with 404, but moving keepass.kdbx.tmp to keepass.kdbx.tmp2 works fine.  This breaks the KeePass program as it uses move in this fashion.\n\nFrom cadaver:\n\ndav:/webdav/> mv keepass.kdbx keepass.kdbx.tmp\nMoving `/webdav/keepass.kdbx' to `/webdav/keepass.kdbx.tmp':  succeeded.\ndav:/webdav/> mv keepass.kdbx.tmp keepass.kdbx.tmp2\nMoving `/webdav/keepass.kdbx.tmp' to `/webdav/keepass.kdbx.tmp2':  succeeded.\ndav:/webdav/> mv keepass.kdbx.tmp2 keepass.kdbx\nMoving `/webdav/keepass.kdbx.tmp2' to `/webdav/keepass.kdbx':  failed:\n404 Not Found\ndav:/webdav/> ls\nListing collection `/webdav/': succeeded.\n        KeePass.zip                      6164267  Dec 26 16:25\n        keepass.kdbx.tmp2                  38206  Jan 18 16:50\ndav:/webdav/>", "is_private": false, "bug_id": 48576, "id": 133707, "time": "2010-01-19T13:45:38Z", "creator": "presslab@hotmail.com", "creation_time": "2010-01-19T13:45:38Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Is something logged in the error log?\n\nMake sure you have disabled MultiViews for the /webdav directory.", "is_private": false, "id": 134032, "creation_time": "2010-01-29T15:13:57Z", "time": "2010-01-29T15:13:57Z", "creator": "sf@sfritsch.de", "bug_id": 48576, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 48576, "is_private": false, "text": "(In reply to comment #1)\n> Is something logged in the error log?\n> Make sure you have disabled MultiViews for the /webdav directory.\n\nThere was nothing in the error log when I received that 404 reply.\n\nI have disabled MultiViews and it solved the problem!  Apparantly KeePass changed the way it saves in version 2.09.\n\nhttp://kerkhove.net/glob/1/2009-11-29/hello-world.html/comment-page-1\n\nI read about MultiViews and it doesn't seem like it should break anything that KeePass does.  It should only look for other files if the requested one does not exist.\n\nhttp://httpd.apache.org/docs/2.0/mod/mod_negotiation.html\n\nIt still seems like a bug, yes?\n\nThanks for your help!", "id": 134074, "time": "2010-01-31T09:24:51Z", "creator": "presslab@hotmail.com", "creation_time": "2010-01-31T09:24:51Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 48576, "is_private": false, "text": "I agree that this seems like a bug. The WebDAV WG decided not to try to figure out the right interaction between DAV and content negotiation, so it's probably best to just disable MultiViews on a DAV directory, but Apache's current behavior seems unambiguously wrong.\n\nThe general case that causes this problem for me is MOVEing a collection to a destination URL which is only mapped as a result of content-negotiation. For example, if I have file Foo.txt and collection Bar, then moving Bar to Foo will fail with 404.\n\nIMHO Apache should do one of:\n\n1: Fail with 412 if Overwrite: F was sent; succeed if Overwrite: T was sent.\n2: Succeed whether or not Overwrite: T was sent (on the theory that you're not overwriting anything)\n3: Fail with another 4xx error code such as 409 Conflict.\n\nI think #1 is probably most correct. #2 is probably closest to what most clients want, but I don't think it is truly correct from a webdav point of view: The Foo resource does actually exist, even though \"overwriting\" it does not result in the loss of any data.\n\n#3 would be a compromise to keep Apache's current behavior but return a more accurate error code.", "id": 146068, "time": "2011-05-02T18:50:14Z", "creator": "wiml@omnigroup.com", "creation_time": "2011-05-02T18:50:14Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "This bug/behavior seems to still exist in 2.4.12, even with various settings of MultiviewsMatch.\n\nFor example, in a directory in which thing2.txt.en exists, and with mod_negotiation and mod_mime applied:\n\ndav:/> cat thing2.txt.en\nDisplaying `/thing2.txt.en':\nThe contents of a thing. Random number: 917\ndav:/> cat thing2.txt\nDisplaying `/thing2.txt':\nFailed: 404 Not Found\ndav:/> cat thing2\nDisplaying `/thing2':\nFailed: 404 Not Found\ndav:/> mv thing2.txt.en thing2\nMoving `/thing2.txt.en' to `/thing2':  failed:\n404 Not Found\ndav:/> mv thing2.txt.en thing2.txt\nMoving `/thing2.txt.en' to `/thing2.txt':  failed:\n404 Not Found\n\nBut, with MultiViews disabled:\n\ndav:/> mv thing2.txt.en thing2.txt\nMoving `/thing2.txt.en' to `/thing2.txt':  succeeded.\ndav:/> mv thing2.txt thing2\nMoving `/thing2.txt' to `/thing2':  succeeded.", "is_private": false, "bug_id": 48576, "id": 181660, "time": "2015-03-11T02:26:09Z", "creator": "wiml@omnigroup.com", "creation_time": "2015-03-11T02:26:09Z", "attachment_id": null}]