[{"count": 0, "attachment_id": null, "bug_id": 23850, "text": "1) Create directory off root of server\n2) Put in following .htaccess\n\nAuthType Basic \nAuthName Restricted\nSatisfy Any\n\nAuthDBMUserFile /local/server/.htpasswd\n\n<Limit GET POST>\norder deny,allow\ndeny from all\nallow from 216.231.111.17\nallow from 64.21.99.146\n\nrequire valid-user \n</Limit>\n\n3) Access from 216.231.111.17, requests a password\n4) Access from 64.21.99.146, doesn't request a password\n5) Put change statement to \"allow from 216.231.111.17/32\"\n6) Access from 216.231.111.17 no longer asks for password\n7) Add \"Allow from 204.107.90.128\" (Out of the /19 that the server\nand 216.231.111.17 are in, but still advertised via BGP locally) and can't\naccess. Use \"Allow from 204.107.90.128/32\", can.\n\nWhy does it seem like if the IP is in a network local we have to put /32 on it,\nand if its remote it works ok?", "id": 45763, "time": "2003-10-15T21:11:26Z", "creator": "apache@t-b-o-h.com", "creation_time": "2003-10-15T21:11:26Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "text": "I'm very skeptical you've identified a bug here for several reasons:\n\n1. I've never heard of any problem remotely like this before,\nand these features are used frequently.\n\n2. The fact that you are using <Limit GET POST> shows that you\nare not following recommended practices for apache configuration,\nand therefore there could be many other things wrong with your config.\n\nI suggest you start with an absolutely default install of apache\nwith no extra modules and no config modifications except the\nones you suggest below.  If it still doesn't work, you can reopen\nthis bug, but be sure to provide more details about what is\nin your logs, the exact OS version, etc.\n\nThanks for using Apache!", "id": 45837, "time": "2003-10-17T14:20:11Z", "bug_id": 23850, "creation_time": "2003-10-17T14:20:11Z", "is_private": false}, {"count": 2, "tags": [], "creator": "apache@t-b-o-h.com", "attachment_id": null, "is_private": false, "id": 46627, "time": "2003-11-02T01:25:05Z", "bug_id": 23850, "creation_time": "2003-11-02T01:25:05Z", "text": "Hi,\n\nOk, we did some investigation. \n\n1) Download/uncompress/untar source\n2) Compile with gcc 3.2.3 with just ./configure;make;make install\n3) Create a directory under htdocs called testing, put in an .htaccess of :\n\nAuthDBMUserFile /local/wwwcust/passes/sample\nAuthDBMGroupFile /dev/null\nAuthName Members_Only\nAuthType Basic\n Satisfy Any\n order deny,allow\n deny from all\n allow from 24.193.48.116\n allow from 202.139.152\n allow from 210.80.149\n allow from 216.183.31.224/27\n allow from 209.88.233.224/27\n allow from 209.88.69.192/27\n allow from 209.135.126\n allow from 64.8.218\n allow from 63.201.23\n allow from 217.145.67.0/25\n allow from 62.39.85\n allow from 216.231.111.14\nrequire valid-user\n\n4) Edit the stock httpd.conf where it depicts the default document root like\n<Directory /usr/local/etc/httpd/htdocs> and change the \"AllowOverride None\" to\n\"AllowOverride All\". Start server\n5) From 216.231.111.14 attempt to access the directory, it will ask for an id/pass\n6) Change it to 216.231.111.14/32, it works.\n\nDelete all directories and configs. \n\nStart the instructions again, except in step 2 , change it to \"CC=gcc -m32\"\ninfront of the ./configure;make;make install\nAt step 5, it will let you in immediately.\n\n\nSo, it seems, in 64 bit mode it has issues, but not 32 bit.\n\nWe can reproduce this on mutiple machine that we own, and others own."}, {"count": 3, "attachment_id": null, "bug_id": 23850, "text": "Interesting.  I assume that it doesn't matter if you remove the\nAuth*/Require/Satisfy directives and just test mod_access?\n\nI don't have a solaris system handy to test on, but if someone does,\nI'm sure they'd be interested in your exact OS/patch level.", "id": 46629, "time": "2003-11-02T03:03:29Z", "creator": "slive@apache.org", "creation_time": "2003-11-02T03:03:29Z", "tags": [], "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 23850, "is_private": false, "id": 46643, "time": "2003-11-02T20:31:00Z", "creator": "apache@t-b-o-h.com", "creation_time": "2003-11-02T20:31:00Z", "tags": [], "text": "With only the following in .htaccess:\n\n\norder deny,allow\ndeny from all\nallow from 216.231.113.11\nallow from 24.193.48.116\n\n\nI see the same symptoms, coming from the 24.* address I get in (Outside our\nnetwork) , from 216.* (local subnet) I get forbidden, if I add the /32 it works\nfine.\n\nThis server is running Solaris 9, kernel patch level 112233-07, apache 1.3.28\ncompiled with 64-bit gcc3.2.3 with a standard build , using gnu make 3.80 (also\nbuilt 64-bit)."}, {"count": 5, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "is_private": false, "id": 46646, "time": "2003-11-02T23:01:52Z", "bug_id": 23850, "creation_time": "2003-11-02T23:01:52Z", "text": "What's the result of running:\n\n$ cd srclib/apr/test\n$ make testall\n$ ./testall -v testipsub\n\nfrom the 64-bit build tree?\n"}, {"count": 6, "tags": [], "creator": "apache@t-b-o-h.com", "attachment_id": null, "is_private": false, "id": 46647, "time": "2003-11-02T23:19:20Z", "bug_id": 23850, "creation_time": "2003-11-02T23:19:20Z", "text": "Hi,\n\nI find no \"apr\" directory anywhere in the Apache 1.3.X tree when I untar it.\n\nThanks, Tuc/TTSG Internet Services, Inc."}, {"count": 7, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "is_private": false, "id": 53639, "time": "2004-03-07T22:11:04Z", "bug_id": 23850, "creation_time": "2004-03-07T22:11:04Z", "text": "This was found and fixed independently by Henning Brauer from the OpenBSD team;\nthe fix is checked in here for the next 1.3 release; thanks for the report.\n\nhttp://cvs.apache.org/viewcvs.cgi/apache-1.3/src/modules/standard/mod_access.c?r1=1.46&r2=1.47\n\n"}]