[{"count": 0, "tags": [], "bug_id": 34569, "attachment_id": null, "text": "I have define several macro like:\n\n<macrodef name=\"test1\" >\n    <attribute name=\"moduleName\" />\n    <sequential>\n        <!-- do some things for test1 -->\n    </sequential>\n</macrodef>\n\n<macrodef name=\"test2\" >\n    <attribute name=\"moduleName\" />\n    <sequential>\n        <!-- do some things for test2 -->\n    </sequential>\n</macrodef>\n\n<macrodef name=\"test3\" >\n    <attribute name=\"moduleName\" />\n    <sequential>\n        <!-- do some things for test3 -->\n    </sequential>\n</macrodef>\n\nNow I define other macro named \"caller\"\n\n<macrodef name=\"caller\" >\n    <attribute name=\"moduleName\" />\n    <attribute name=\"version\" />\n    <sequential>\n        <macrocall macro=\"test@{version}\" >\n            <param name=\"moduleName\" value=\"@{moduleName}\" />\n        </macrocall>\n    </sequential>\n</macrodef>\n\nAs you see, I want to call different macro depend on the different value of \nversion. But I don't want to hardcode like : (task \"if\" is a user-defined task \nby me)\n    <if condition=\"@{version}=='1'\" >\n         <test1 moduleName=\"@{moduleName}\" />\n    <if>\n    <if condition=\"@{version}=='2'\" >\n         <test2 moduleName=\"@{moduleName}\" />\n    <if>\n    <if condition=\"@{version}=='3'\" >\n         <test3 moduleName=\"@{moduleName}\" />\n    <if>\nBecause this don't have expansibility. e.g. iIf I define a new macro \nnamed \"test4\", I must modify the macro \"caller\". I'd like \"caller\" can decide \nit automated.\n\nI read the source code of task \"callTarget\", but I can't find some helpful \ninformation. I want to build a \"UnknownElement\" object to solve this problem, \nbut I meet some difficulty.\n\nCould you give some advice or a example?", "id": 73958, "time": "2005-04-22T11:58:08Z", "creator": "yanjun.tang@citigroup.com", "creation_time": "2005-04-22T11:58:08Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 34569, "attachment_id": null, "text": "Using <target>s instead of <macrodef> a \n  <antcall target=\"test${version}\"/>\nwould work.\n\n\nI played a little ... that should work\n\n<project>\n\n<macrodef name=\"test1\" >\n    <attribute name=\"moduleName\" />\n    <sequential>\n        <echo>Test 1</echo>\n    </sequential>\n</macrodef>\n\n<macrodef name=\"test2\" >\n    <attribute name=\"moduleName\" />\n    <sequential>\n        <echo>Test 2</echo>\n    </sequential>\n</macrodef>\n\n<macrodef name=\"test3\" >\n    <attribute name=\"moduleName\" />\n    <sequential>\n        <echo>Test 3</echo>\n    </sequential>\n</macrodef>\n\n<scriptdef name=\"caller\" language=\"javascript\">\n    <attribute name=\"modulename\" />\n    <attribute name=\"version\" />\n\n    <![CDATA[\n        modulename = attributes.get(\"modulename\");\n        version    = attributes.get(\"version\");\n        task = project.createTask(\"test\" + version);\n        task.setDynamicAttribute(\"modulename\", modulename);\n        task.perform();\n    ]]>\n</scriptdef>\n\n\n\n\n<echo> Direct Call </echo>\n<test1 moduleName=\"mod\"/>\n<test2 moduleName=\"mod\"/>\n<test3 moduleName=\"mod\"/>\n\n<echo> Indirect Call </echo>\n<caller version=\"1\" moduleName=\"mod\"/>\n<caller version=\"2\" moduleName=\"mod\"/>\n<caller version=\"3\" moduleName=\"mod\"/>\n\n\n</project>", "id": 73960, "time": "2005-04-22T12:38:52Z", "creator": "jan@materne.de", "creation_time": "2005-04-22T12:38:52Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 34569, "attachment_id": null, "id": 90990, "time": "2006-07-07T13:07:54Z", "creator": "jan@materne.de", "creation_time": "2006-07-07T13:07:54Z", "is_private": false, "text": "> Could you give some advice or a example?\n\nI think that advice is enough - no questions were asked since 2005."}]