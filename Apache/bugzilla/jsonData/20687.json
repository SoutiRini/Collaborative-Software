[{"count": 0, "tags": [], "creator": "gus.heck@olin.edu", "text": "As per my corespondance with Stefan on the dev list, \n\nhttp://marc.theaimsgroup.com/?l=ant-dev&m=105367047624558&w=2 \n\nI have added dirset support to ExecOn.java (and thus to attrib, chmod, chgrp,\nand chown). Making it work and not messing up the old type=file but not\nrequiring type=dir to use dirsets took a little thinking. I settled on an\nimplementation that esentially checks to see if it is handling a dirset and\ngives the nested dirset priorety over the type=\"file\". This seems to provide\nfull back compatability and the nice feature that you can still control the\nbehavior of filesets with type=\"file\" and then slip in a few directories with a\ndirset.\n\nThe cost of course is that reading type=\"file\" in the top line of a long chmod,\nnolonger guarantees that nothing below represents a directory, but only\nspecifies how filesets will be handled.\n\nNot specifying type is the same as specifying type=\"file\" so people who just\nwant to use a dirset can just use it.", "id": 38729, "time": "2003-06-11T18:35:24Z", "bug_id": 20687, "creation_time": "2003-06-11T18:35:24Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 20687, "attachment_id": 6769, "text": "Created attachment 6769\npatch file adding support for dirsets to ExecOn.java", "id": 38730, "time": "2003-06-11T18:37:01Z", "creator": "gus.heck@olin.edu", "creation_time": "2003-06-11T18:37:01Z", "is_private": false}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 39318, "time": "2003-06-24T09:18:54Z", "bug_id": 20687, "creation_time": "2003-06-24T09:18:54Z", "is_private": false, "text": "I've modified the patch slightly (well, the docs more than slightly 8-).  Let me\nknow whether I've broken something.\n\n<dirsets> will now also ignore type=\"both\" as that seemed closer to the intent\nto me.\n\nShould appear in nightly build 2003-06-25.\n\nThere is a strange part in the ExecuteOn patch that adds a paragraph about order\nto javdocs for setMaxparallel - I assumed it should have gone to addDirset and\nmoved it there.  There's been no patch to apply.html, so I made up my own."}, {"count": 3, "tags": [], "bug_id": 20687, "text": "hmm that strange part I think is an accidental paste. I think I might have\npasted in some code from elsewhere and then cut this out. \n\nSince clicking with the scroll wheel pastes for me, scrolling fast can drop\nthings in. This one got lucky enough to land in a comment and be a comment too,\nand thus escaped notice (the usual result when this happens is just a compiler\nerror which is easily fixed).\n\nA little grepping reveals that I pasted from subant... as an example of adding\ndirsets I think. That fragment should simply be eliminated. I am reopening until\nmy doc error is fixed. Let me know if you want a patch for it.\n\nAs a further note, I will paste below my build file for checking this\nfunctionality. Not a junit test case, but with java not understanding groups and\nowners, this will have to do. \n\n<?xml version=\"1.0\"?>\n\n<project name=\"test\" default=\"def\" basedir=\".\">\n  <target name=\"def\">\n    <delete>\n      <fileset dir=\".\" includes=\"test-*\"/>\n    </delete>\n    <mkdir dir=\"test-fs\"/>\n    <mkdir dir=\"test-ds\"/>\n    <touch file=\"test-ffs\"/>\n    <touch file=\"test-fds\"/>\n    <apply type=\"both\" executable=\"chmod\">\n      <arg value=\"444\"/>\n      <fileset dir=\".\" includes=\"test-*\"/>\n    </apply>\n    <chmod perm=\"777\" type=\"file\">\n      <fileset dir=\".\" includes=\"*fs\"/>\n      <dirset dir=\".\" includes=\"*ds\"/>\n    </chmod> \n  </target>\n</project>\n\nThis should result in something that looks like this when you do ls -l:\n\ndrwxrwxrwx    2 gus      gus          4096 Jun 24 12:15 test-ds\n-r--r--r--    1 gus      gus             0 Jun 24 12:28 test-fds\n-rwxrwxrwx    1 gus      gus             0 Jun 24 12:28 test-ffs\ndr--r--r--    2 gus      gus          4096 Jun 24 12:15 test-fs\n\n\nhmm perhaps something can be done with File.canWrite() now that I think of it...\n can't do it today though.", "id": 39357, "time": "2003-06-24T17:03:18Z", "creator": "gus.heck@olin.edu", "creation_time": "2003-06-24T17:03:18Z", "is_private": false, "attachment_id": null}, {"count": 4, "attachment_id": null, "creator": "bodewig@apache.org", "is_private": false, "id": 39410, "time": "2003-06-25T12:16:30Z", "bug_id": 20687, "creation_time": "2003-06-25T12:16:30Z", "tags": [], "text": "[bodewig@bodewig tmp]$ ls -ld test-*\ndrwxrwxrwx    2 bodewig  bodewig      4096 Jun 25 14:11 test-ds\n-r--r--r--    1 bodewig  bodewig         0 Jun 25 14:11 test-fds\n-rwxrwxrwx    1 bodewig  bodewig         0 Jun 25 14:11 test-ffs\ndr--r--r--    2 bodewig  bodewig      4096 Jun 25 14:11 test-fs\n\nso it works on my machine.\n\nI've removed the javadoc snippet (and never use the scroll wheel of my mouse ;-)."}]