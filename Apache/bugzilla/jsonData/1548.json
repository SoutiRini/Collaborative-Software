[{"count": 0, "tags": [], "text": "I'm using log4j 1.0.4 and Visual Age for Java 3.02 with JDK 1.1.7A. I imported \nthe log4j classes as class files, not as java files, so they were not compiled.\n\nI was playing with org.apache.log4j.net.SocketAppender and \norg.apache.log4j.net.SocketServer. When the socketserver was sent it's first \nmessage it fell over with a java.lang.NoSuchMethodError.\n\nI imported and compiled the original JAR file, and it turns out that the \nSocketServer.configureHierarchy() and SocketServer.genericHierarchy() method \nboth call Java.io.File.toUrl(), which does not exist in my JDK.\n\nNow it does state in the faq that \"Log4j is JDK 1.1.x compatible\". Not quite \nsure why you want to treat the file as a Url, but here's my fix:\n\n--------------------------------------------------------------------------------\n-----------------------------------------------------------\nOld code in SocketServer.configureHierarchy():\n--------------------------------------------------------------------------------\n-----------------------------------------------------------\n\t\t\ttry {\n\t\t\t\tnew PropertyConfigurator().doConfigure\n(configFile.toUrl(), h);\n\t\t\t}\n\t\t\tcatch (MalformedURLException e) {\n\t\t\t\tcat.error(\"Could not convert\" + configFile + \" \nto a URL.\", e);\n\t\t\t}\n\t\t\treturn h;\n--------------------------------------------------------------------------------\n-----------------------------------------------------------\nreplaced it with:\n--------------------------------------------------------------------------------\n-----------------------------------------------------------\n\t\t\tnew PropertyConfigurator().doConfigure\n(configFile.toString(), h);\n\t\t\treturn h;\n\n\n--------------------------------------------------------------------------------\n-----------------------------------------------------------\nOld code in SocketServer.genericHierarchy():\n--------------------------------------------------------------------------------\n-----------------------------------------------------------\n\t\t\ttry {\n\t\t\t\tnew PropertyConfigurator().doConfigure(f.toUrl\n(), genericHierarchy);\n\t\t\t}\n\t\t\tcatch (MalformedURLException e) {\n\t\t\t\tcat.error(\"Could not convert\" + f + \" to a URL. \nReverting to default hierarchy\", e);\n\t\t\t\tgenericHierarchy = Category.getDefaultHierarchy\n();\n\t\t\t}\n--------------------------------------------------------------------------------\n-----------------------------------------------------------\nreplaced it with:\n--------------------------------------------------------------------------------\n-----------------------------------------------------------\n\t\t\tnew PropertyConfigurator().doConfigure(f.toString(), \ngenericHierarchy);\n--------------------------------------------------------------------------------\n-----------------------------------------------------------\n\n\nPropertyConfigurator().doConfigure takes either a string or a url, so this \nworks fine...", "is_private": false, "id": 2133, "creator": "jcranney@westpac.com.au", "time": "2001-04-26T22:32:33Z", "bug_id": 1548, "creation_time": "2001-04-26T22:32:33Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 1548, "attachment_id": null, "id": 2165, "time": "2001-04-29T17:59:21Z", "creator": "jcranney@westpac.com.au", "creation_time": "2001-04-29T17:59:21Z", "is_private": false, "text": "Fixed in 1.1\nJC"}]