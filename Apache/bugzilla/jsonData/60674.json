[{"attachment_id": null, "tags": [], "bug_id": 60674, "is_private": false, "count": 0, "id": 196620, "time": "2017-02-01T09:52:09Z", "creator": "hauser@acm.org", "creation_time": "2017-02-01T09:52:09Z", "text": "1) why is the class \"final\"?\n  ==> pls remove that\n\nSimilarly, please make the variables like allowedHttpHeaders \"protected\" instead of \"private final\" or is there some \"rationale\" behind this (coding guidelines mandating this)?"}, {"count": 1, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "text": "(In reply to Ralf Hauser from comment #0)\n> 1) why is the class \"final\"?\n>   ==> pls remove that\n\nInteresting: it's been final since the class was first introduced. markt would have to comment on that decision.\n\nMy guess is that, since this is a security-related class, it's best to have the configuration as immutable as possible.\n\n> Similarly, please make the variables like allowedHttpHeaders \"protected\"\n> instead of \"private final\" or is there some \"rationale\" behind this (coding\n> guidelines mandating this)?\n\nSee above.\n\nRather than making the members protected, there should be a protected constructor, and the fields can therefore remain final.", "id": 196624, "time": "2017-02-01T15:03:45Z", "bug_id": 60674, "creation_time": "2017-02-01T15:03:45Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 60674, "is_private": false, "text": "Other security classes are not final.\nAnd an attacker would also have to alter the web.xml to have the subclass used at all to begin with.\n\nIMHO, putting such a class as \"final\" is also against the open source spirit:\n\n\"No one after me will be smarter than and adding more value with sub-classing it\" or are there other reasonings behind this?", "id": 196949, "time": "2017-02-12T20:19:51Z", "creator": "hauser@acm.org", "creation_time": "2017-02-12T20:19:51Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 60674, "is_private": false, "text": "(In reply to Ralf Hauser from comment #2)\n> Other security classes are not final.\n> And an attacker would also have to alter the web.xml to have the subclass\n> used at all to begin with.\n> \n> IMHO, putting such a class as \"final\" is also against the open source spirit:\n> \n> \"No one after me will be smarter than and adding more value with\n> sub-classing it\" or are there other reasonings behind this?\n\nThere is no need for such an antagonistic comment.\n\nA review of the history of the file shows that the explanation is as simple as the class was marked as final in the contribution from the original developer.\n\nIt is always easier to start off with a more restrictive API and relax it as necessary, than to start with everything open and try and lock it down later.\n\nThe fields are private (and final where marked) by design. Getters are provided (which for the collections also allow modification). If you'd like additional getters (or setters) then please make your case. The expectation is that the configuration is set on init and remains unchanged for the lifetime of the Filter. Changing that expectation is not impossible but is likely to be a very invasive change.", "id": 196965, "time": "2017-02-13T16:58:38Z", "creator": "markt@apache.org", "creation_time": "2017-02-13T16:58:38Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 60674, "is_private": false, "text": "final removed in\n- trunk for 9.0.0.M18 onwards\n- 8.5.x for 8.5.12 onwards\n- 8.0.x for 8.0.42 onwards\n- 7.0.x for 7.0.76 onwards", "id": 196966, "time": "2017-02-13T17:08:23Z", "creator": "markt@apache.org", "creation_time": "2017-02-13T17:08:23Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 60674, "attachment_id": null, "is_private": false, "id": 199013, "time": "2017-06-02T07:12:04Z", "creator": "hauser@acm.org", "creation_time": "2017-06-02T07:12:04Z", "text": "Tested in 8.5.14 --> works fine.\n\nThx for the clarifications that make my comment obsolete - sorry."}]