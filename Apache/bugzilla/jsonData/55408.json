[{"count": 0, "tags": [], "bug_id": 55408, "is_private": false, "text": "Prequisites:\nmod_auth_basic is enabled\nmod_vhost_alias is enabled\nYou've created an .htpasswd file in /etc/apache2, with 1 user, \"johndoe\".\n\napache.conf\n<Directory /var/www>\nRequire all granted\n</Directory>\n\n1 vhost is enabled:\n/etc/apache2/sites-enabled/[000-site.conf -> ../sites-available/000-site.conf]\n\n000-site.conf\n<VirtualHost *:80>\nServerName site.com\nServerAlias *.site.com\nVirtualDocumentRoot \"/var/www/%0/public\"\n<Directory \"/var/www/%0/public\">\n Options All\n AllowOverride All\n AuthName \"Private\"\n AuthType Basic\n AuthBasicProvider file\n AuthUserFile \"/etc/apache2/.htpasswd\"\n Require user \"johndoe\"\n</Directory>\n</VirtualHost>\n\n\nTo test this configuration from your command line:\ncurl my.site.com\n\nResult:\nHTTP/1.1 200 OK\n\nExpected:\nHTTP/1.1 401 Unauthorized\n\n\n\nTo get around this odd behavior:\n000-site.conf\n<VirtualHost *:80>\nServerName site.com\nServerAlias *.site.com\nVirtualDocumentRoot \"/var/www/%0/public\"\n<Directory \"/var/www\">\n Require all denied\n AuthName \"Private\"\n AuthType Basic\n AuthBasicProvider file\n AuthUserFile \"/etc/apache2/.htpasswd\"\n Require user \"johndoe\"\n</Directory>\n<Directory \"/var/www/%0/public\">\n Options All\n AllowOverride All\n</Directory>\n</VirtualHost>\n\n\nTest:\ncurl my.site.com\n\nResult:\nHTTP/1.1 401 Unauthorized\n\n\nPossibly related bugs:\nhttps://issues.apache.org/bugzilla/show_bug.cgi?id=55392", "id": 169391, "time": "2013-08-13T04:51:41Z", "creator": "wjaspers4@gmail.com", "creation_time": "2013-08-13T04:51:41Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "covener@gmail.com", "attachment_id": null, "id": 169402, "time": "2013-08-13T11:18:08Z", "bug_id": 55408, "creation_time": "2013-08-13T11:18:08Z", "is_private": false, "text": "> <Directory \"/var/www/%0/public\">\n\nthis is invalid"}, {"count": 2, "tags": [], "bug_id": 55408, "attachment_id": null, "is_private": false, "id": 169416, "time": "2013-08-14T01:44:15Z", "creator": "wjaspers4@gmail.com", "creation_time": "2013-08-14T01:44:15Z", "text": "(In reply to Eric Covener from comment #1)\n> > <Directory \"/var/www/%0/public\">\n> \n> this is invalid\n\nHow so? Although no examples explicitly define this, I've never had a problem serving pages with this configuration in Apache 2.2. I also tried using <DirectoryMatch>, but with the same results.\n\nSee: http://httpd.apache.org/docs/2.2/vhosts/mass.html"}, {"count": 3, "tags": [], "creator": "covener@gmail.com", "text": "(In reply to will jaspers from comment #2)\n> (In reply to Eric Covener from comment #1)\n> > > <Directory \"/var/www/%0/public\">\n> > \n> > this is invalid\n> \n> How so? Although no examples explicitly define this, I've never had a\n> problem serving pages with this configuration in Apache 2.2. I also tried\n> using <DirectoryMatch>, but with the same results.\n> \n> See: http://httpd.apache.org/docs/2.2/vhosts/mass.html\n\nOnly the 4 directives in mod_vhost_alias can use %0 to refer to part of the servername, not any of the other directives.", "id": 169419, "time": "2013-08-14T03:35:29Z", "bug_id": 55408, "creation_time": "2013-08-14T03:35:29Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 55408, "attachment_id": null, "is_private": false, "id": 169454, "time": "2013-08-15T02:09:03Z", "creator": "wjaspers4@gmail.com", "creation_time": "2013-08-15T02:09:03Z", "text": "Ah; good to know then."}]