[{"count": 0, "tags": [], "creator": "hans@koerber-net.com", "attachment_id": null, "id": 125241, "time": "2009-03-02T01:21:58Z", "bug_id": 46784, "creation_time": "2009-03-02T01:21:58Z", "is_private": false, "text": "Re-indexing either authoring or live results in below error:\n\nHTTP ERROR: 500\n\norg/bouncycastle/jce/provider/BouncyCastleProvider\n\nThe site seems to get indexed but I have no inidication if the index is complete or not."}, {"count": 1, "tags": [], "creator": "rudolf.korhummel@uniklinik-freiburg.de", "text": "I get the same message when I upload a special kind of pdf documents. The upload works, but the indexing afterwards seems to fail. After that upload Re-indexing of of site also fails. Before the upload Re-indexing worked fine. I'll try to find out what's the differce to \"ordenary pdf documents\".", "id": 125307, "time": "2009-03-04T00:04:32Z", "bug_id": 46784, "creation_time": "2009-03-04T00:04:32Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "The failing pdf documents are write protected.", "attachment_id": null, "bug_id": 46784, "id": 125311, "time": "2009-03-04T05:02:12Z", "creator": "rudolf.korhummel@uniklinik-freiburg.de", "creation_time": "2009-03-04T05:02:12Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 46784, "text": "(In reply to comment #0)\n> Re-indexing either authoring or live results in below error:\n> \n> HTTP ERROR: 500\n> \n> org/bouncycastle/jce/provider/BouncyCastleProvider\n> \n> The site seems to get indexed but I have no inidication if the index is\n> complete or not.\n\nHi Hans,\n\nare you using an extension that is based on the BouncyCastle JCE implementation (cryptography/PKI)? Is there a stack trace in the logs which might help identifying the cause of the error?", "id": 125315, "time": "2009-03-04T07:11:59Z", "creator": "andreas@apache.org", "creation_time": "2009-03-04T07:11:59Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 46784, "text": "(In reply to comment #2)\n> The failing pdf documents are write protected.\n\nRudolf,\n\nin this case the cause of the error is identified. I'm not sure if it is related the the issue Hans reported \u2013\u00a0maybe it makes sense to open another bug?\n\nBTW, would you mind attaching one of the offending PDFs so that the error can be reproduced? TIA!", "id": 125316, "time": "2009-03-04T07:13:34Z", "creator": "andreas@apache.org", "creation_time": "2009-03-04T07:13:34Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 46784, "text": "Created attachment 23330\nPDF file producing the error", "id": 125317, "time": "2009-03-04T10:12:42Z", "creator": "rudolf.korhummel@uniklinik-freiburg.de", "creation_time": "2009-03-04T10:12:42Z", "is_private": false, "attachment_id": 23330}, {"count": 6, "tags": [], "creator": "rudolf.korhummel@uniklinik-freiburg.de", "attachment_id": null, "text": "Hi Andreas,\n\nHere is the error message when I upload the file. \n\nHTTP ERROR: 500\n\norg/bouncycastle/jce/provider/BouncyCastleProvider\n\nRequestURI=/default/authoring/search.html\n\nPowered by Jetty://\n\nWhen I try to re-index the site afterwards I'm getting the same message.\nI assume that's the same problem. If a user form Hans website has uploaded a write protected file before, he'll get the problem he describes.", "id": 125318, "time": "2009-03-04T10:18:33Z", "bug_id": 46784, "creation_time": "2009-03-04T10:18:33Z", "is_private": false}, {"count": 7, "tags": [], "creator": "rudolf.korhummel@uniklinik-freiburg.de", "attachment_id": null, "text": "The bouncycastle libs bcprov-jdk16-141.jar and bcmail-jdk16-141.jar\n(jars depend on the jdk version !?) \nfrom http://www.bouncycastle.org/ are needed to read the write-protected pdf documents, but are not included in the lenya distribution.\nI copied these file into the lib directory, rebuilded and restarted. \nRe-indexing works now.\n\nTo fix this problem there are two open questions for me:\n1) Is it allowed to include the jar's form bouncycastle.org into the lenya distribution ? (I assume yes, because the Apache incubator project pdfbox includes these files, but I'm not shure)\n2) How can we inlcude files  depending on the jdk version?", "id": 125380, "time": "2009-03-06T04:02:37Z", "bug_id": 46784, "creation_time": "2009-03-06T04:02:37Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 46784, "text": "(In reply to comment #7)\n> To fix this problem there are two open questions for me:\n> 1) Is it allowed to include the jar's form bouncycastle.org into the lenya\n> distribution ? (I assume yes, because the Apache incubator project pdfbox\n> includes these files, but I'm not shure)\n\nBouncyCastle uses the MIT license, it is fine to redistribute these libraries.\n\n> 2) How can we inlcude files  depending on the jdk version?\n\nI guess we could just modify the build script accordingly. I wrote a little extension which allows to execute build files in modules ($MODULE_HOME/build.xml) when the module is deployed; maybe this could be useful here. Or we introduce something generic like\n\n$MODULE_HOME/java/lib/1.6/", "count": 8, "id": 125382, "time": "2009-03-06T04:40:02Z", "creator": "andreas@apache.org", "creation_time": "2009-03-06T04:40:02Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 46784, "text": "(In reply to comment #8)\n\n> \n> BouncyCastle uses the MIT license, it is fine to redistribute these libraries.\n>\n\n :-)\n\n> > 2) How can we inlcude files  depending on the jdk version?\n> \n> I guess we could just modify the build script accordingly. I wrote a little\n> extension which allows to execute build files in modules\n> ($MODULE_HOME/build.xml) when the module is deployed; maybe this could be\n> useful here. Or we introduce something generic like\n> \n> $MODULE_HOME/java/lib/1.6/\n\nIf there are often modules with jdk version dependencies, the generic solution is fine from my POV.  If this happens very seldom, I would prefer the modules build file.  \n\nIf a bouncycastle lib made with a lower jdk version works with a higher jdk version (I'll try at the weekend), it would also be possible to use the jdk 1.4. version. \n\nWDYT", "id": 125390, "time": "2009-03-06T06:57:20Z", "creator": "rudolf.korhummel@uniklinik-freiburg.de", "creation_time": "2009-03-06T06:57:20Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 46784, "text": "(In reply to comment #9)\n\n> If a bouncycastle lib made with a lower jdk version works with a higher jdk\n> version (I'll try at the weekend), it would also be possible to use the jdk\n> 1.4. version. \n\nThat would of course be great. I guess 1.5 would also be acceptable for the next release.\n\nOr maybe there's a PDFBox bundle that includes the BouncyCastle libs?", "count": 10, "id": 125397, "time": "2009-03-06T07:52:50Z", "creator": "andreas@apache.org", "creation_time": "2009-03-06T07:52:50Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 46784, "text": "(In reply to comment #10)\n> \n> > If a bouncycastle lib made with a lower jdk version works with a higher jdk\n> > version (I'll try at the weekend), it would also be possible to use the jdk\n> > 1.4. version. \n> \n> That would of course be great. I guess 1.5 would also be acceptable for the\n> next release.\n> \n> Or maybe there's a PDFBox bundle that includes the BouncyCastle libs?\n\nThere is no new release since PDFBox has moved to apache:\nhttp://incubator.apache.org/pdfbox/download.html#distribution \nThe svn repository of PDFBox contains bcmail-jdk14-132.jar and bcprov-jdk14-132.jar. So a quick solution would be to try the jdk1.5 lib's.\n\nWDYT", "count": 11, "id": 125399, "time": "2009-03-06T10:14:44Z", "creator": "rudolf.korhummel@uniklinik-freiburg.de", "creation_time": "2009-03-06T10:14:44Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 46784, "text": "(In reply to comment #11)\n> (In reply to comment #10)\n> > \n> > > If a bouncycastle lib made with a lower jdk version works with a higher jdk\n> > > version (I'll try at the weekend), it would also be possible to use the jdk\n> > > 1.4. version. \n> > \n> > That would of course be great. I guess 1.5 would also be acceptable for the\n> > next release.\n> > \n> > Or maybe there's a PDFBox bundle that includes the BouncyCastle libs?\n> \n> There is no new release since PDFBox has moved to apache:\n> http://incubator.apache.org/pdfbox/download.html#distribution \n> The svn repository of PDFBox contains bcmail-jdk14-132.jar and\n> bcprov-jdk14-132.jar. So a quick solution would be to try the jdk1.5 lib's.\n\nbcmail-jdk15-141.jar and bcprov-jdk15-141.jar work together with JRE 1.6.0_11, so I would propose the following proceeding:\n\nWe include this libs and the license file of bouncycastle in the BRANCH_2_0_X.\nAfter a new PDFBox release is available, we can replace the current PDFBox release with the new one.\n\nIf there are no objections I would commit the files.", "count": 12, "id": 125419, "time": "2009-03-08T08:30:36Z", "creator": "rudolf.korhummel@uniklinik-freiburg.de", "creation_time": "2009-03-08T08:30:36Z", "is_private": false}, {"count": 13, "tags": [], "creator": "andreas@apache.org", "attachment_id": null, "text": "(In reply to comment #12)\n\n[\u2026]\n\n> bcmail-jdk15-141.jar and bcprov-jdk15-141.jar work together with JRE 1.6.0_11,\n> so I would propose the following proceeding:\n> \n> We include this libs and the license file of bouncycastle in the BRANCH_2_0_X.\n> After a new PDFBox release is available, we can replace the current PDFBox\n> release with the new one.\n> \n> If there are no objections I would commit the files.\n\n+1 to commit these libs (incl. the corresponding license files)", "id": 125432, "time": "2009-03-09T02:32:13Z", "bug_id": 46784, "creation_time": "2009-03-09T02:32:13Z", "is_private": false}, {"count": 14, "tags": [], "creator": "hans@koerber-net.com", "attachment_id": null, "text": "(In reply to comment #12)\n> (In reply to comment #11)\n> > (In reply to comment #10)\n> > > \n> > > > If a bouncycastle lib made with a lower jdk version works with a higher jdk\n> > > > version (I'll try at the weekend), it would also be possible to use the jdk\n> > > > 1.4. version. \n> > > \n> > > That would of course be great. I guess 1.5 would also be acceptable for the\n> > > next release.\n> > > \n> > > Or maybe there's a PDFBox bundle that includes the BouncyCastle libs?\n> > \n> > There is no new release since PDFBox has moved to apache:\n> > http://incubator.apache.org/pdfbox/download.html#distribution \n> > The svn repository of PDFBox contains bcmail-jdk14-132.jar and\n> > bcprov-jdk14-132.jar. So a quick solution would be to try the jdk1.5 lib's.\n> \n> bcmail-jdk15-141.jar and bcprov-jdk15-141.jar work together with JRE 1.6.0_11,\n> so I would propose the following proceeding:\n> \n> We include this libs and the license file of bouncycastle in the BRANCH_2_0_X.\n> After a new PDFBox release is available, we can replace the current PDFBox\n> release with the new one.\n> \n> If there are no objections I would commit the files.\n\nThanks a lot, folks. Including the two jars fixed it.\nCheers,\nHans.", "id": 125434, "time": "2009-03-09T06:44:24Z", "bug_id": 46784, "creation_time": "2009-03-09T06:44:24Z", "is_private": false}, {"count": 15, "tags": [], "creator": "rudolf.korhummel@uniklinik-freiburg.de", "attachment_id": null, "text": "You're welcome!\n\nfixed rev: 751854", "id": 125453, "time": "2009-03-09T14:43:38Z", "bug_id": 46784, "creation_time": "2009-03-09T14:43:38Z", "is_private": false}]