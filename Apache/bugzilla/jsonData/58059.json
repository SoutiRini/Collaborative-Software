[{"count": 0, "tags": [], "bug_id": 58059, "attachment_id": 32837, "text": "Created attachment 32837\nTest projects to show @PathParam issues\n\nWhen connecting to a websocket server endpoint in Tomcat 8.0.23, the mechanism for populating a @PathParam annotated variable in the @OnOpen method does not appear to be thread safe.\n\nI have set up 2 test projects;  one that is a single class container web-application that handles websockets, and a client that connects to said websocket.\n\nWhen multiple requests come in with different path params, the value that is passed on to the @OnOpen annotated method into the @PathParam annotated variable does not match the value that is found in the Session.getPathParameters() collection for the same session.  It appears that the @PathParam annotated variable is being overwritten with another connection request's path param.\n\nHere is some sample output from the attached \"WebsocketPathParamIssueClient\" project showing the path param that was sent, what was set in the @PathParam annotated variable, and what is in the Session.getPathParaters() collection:\n\n2015-06-19 15:07:22.460 INFO  [Grizzly(2)] \n[pathParam=DDDDD, sessionId=c880b807-8a9e-4180-9bdb-3bc65e358556] pathParamVariable=BBBBB | pathParamSession=DDDDD\n2015-06-19 15:07:22.460 INFO  [Grizzly(2)] \n[pathParam=CCCCC, sessionId=9fa55740-30b5-41ad-8871-dfb553d04dc5] pathParamVariable=CCCCC | pathParamSession=CCCCC\n2015-06-19 15:07:22.460 INFO  [Grizzly(2)] \n[pathParam=BBBBB, sessionId=a578cd97-94d7-4d69-9e26-3862d8447a53] pathParamVariable=BBBBB | pathParamSession=BBBBB\n2015-06-19 15:07:22.460 INFO  [Grizzly(2)] \n[pathParam=AAAAA, sessionId=2540e0ef-2c8a-456b-9d9e-ee0f1550840d] pathParamVariable=BBBBB | pathParamSession=AAAAA", "id": 183652, "time": "2015-06-19T21:41:11Z", "creator": "ktmnealio@gmail.com", "creation_time": "2015-06-19T21:41:11Z", "is_private": false}, {"count": 1, "tags": [], "creator": "violetagg@apache.org", "attachment_id": null, "id": 183654, "time": "2015-06-20T04:30:46Z", "bug_id": 58059, "creation_time": "2015-06-20T04:30:46Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of bug 57969 ***"}]