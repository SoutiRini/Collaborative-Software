[{"count": 0, "tags": [], "bug_id": 39452, "attachment_id": null, "id": 88681, "time": "2006-04-30T19:56:58Z", "creator": "mjgroff@yahoo.com", "creation_time": "2006-04-30T19:56:58Z", "is_private": false, "text": "I wanted the default document in IIS to be index.jsp and handled by Tomcat. I \ncouldn't write a URI rule to match this so I configured isapi_redirect.dll to \nrun as an application extension for .jsp. I found this didn't work in all \nbrowsers. I use virtual hosts and depending on what browser I used, Tomcat \nwasn't matching the host in server.xml. The reason is jk_isapi_plugin.c was \nomitting the last two headers in all cases, assuming they were the special \nones added by the filter. In my case those two weren't there and depending on \nwhat headers a certain browser sent, HTTP_HOST was one of the last two that \ngot ommitted.\n\nSince there was already code to ignore the special headers if they weren't \nskipped by subtracting 2 off the header count, I just had to comment out one \nline of code:\n   cnt -= 2;           /* For our two special headers:\nand insert one:\n   cnt--;\njust after the if clause that starts with:\n   if (!strnicmp(tmp, URI_HEADER_NAME, strlen(URI_HEADER_NAME))"}, {"count": 1, "tags": [], "bug_id": 39452, "attachment_id": null, "text": "IIS can use the default doc as .jsp if you setup your\nconfiguration correctly.\nIt has nothing to do with IIS but rather with Tomcat.\nIf you make your default doc for abc app is index.jsp\nit will be served by Tomcat.\n", "id": 91029, "time": "2006-07-09T09:25:34Z", "creator": "mturk@apache.org", "creation_time": "2006-07-09T09:25:34Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 39452, "text": "(In reply to comment #1)\n> IIS can use the default doc as .jsp if you setup your\n> configuration correctly.\n> It has nothing to do with IIS but rather with Tomcat.\n> If you make your default doc for abc app is index.jsp\n> it will be served by Tomcat.\n\nYes, your workaround would work if I wanted to make TomCat handle all \ndocuments types but I want IIS to handle everything other than jsp, including \nIIS default docs of type jsp. isapi_redirect.dll needs the described above to \nwork in this case.", "id": 91038, "time": "2006-07-09T22:44:44Z", "creator": "mjgroff@yahoo.com", "creation_time": "2006-07-09T22:44:44Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 39452, "attachment_id": null, "text": "Please do not reopen this bug.\n\nLike said, this is configuration problem.\nIt can be easily resolved with a simple thing like:\n/myapp/*=worker\n!/myapp/*.gif=worker\n!/myapp/*.jpg=worker\n!/myapp/*.pdf=worker\n\nNote that exclamation mark in front will unmap the specific content\nso in the above example, no .gif, .jpg or .pdf extensions will be\nhandled by the Tomcat, but rather leaved to the IIS.\n\nSince the default document for any web application is determined\nby the content of the web.xml by the servlet spec itself, the patch\nthat would change that will never be commited!\n\nRegards.\n", "id": 91049, "time": "2006-07-10T08:51:49Z", "creator": "mturk@apache.org", "creation_time": "2006-07-10T08:51:49Z", "is_private": false}]