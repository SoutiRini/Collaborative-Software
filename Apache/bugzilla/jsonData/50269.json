[{"count": 0, "tags": [], "text": "My current environment to build APR 1.4.2 on Mac OS X 10.6.5 (Intel) is:\n\nCFLAGS=         -arch i386 -arch x86_64 -Os\nLDFLAGS=        -arch i386 -arch x86_64\n\nThen I do ./configure and make test, after this testsock fails with the following status:\n\ntestsock            : -Line 221: Determine whether at EOF, #1 (20014): Internal error\n\nWhen CFLAGS and LDFLAGS are not present, testsock stills fails but in line 233 (same error message)", "is_private": false, "id": 141708, "creator": "ruda.moura@gmail.com", "time": "2010-11-14T17:05:38Z", "bug_id": 50269, "creation_time": "2010-11-14T17:05:38Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "poirier@pobox.com", "text": "FYI, I've seen the same error.  It might be intermittent.  It has to do with the return value of poll on a socket after the other end has sent all its data and closed its end, I think, but didn't get beyond that.", "id": 141736, "time": "2010-11-15T16:27:56Z", "bug_id": 50269, "creation_time": "2010-11-15T16:27:56Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 50269, "is_private": false, "text": "I see this error reliably as well (apr trunk revision (2.0.0 in development), OSX 10.6.7, sometimes #1 and sometimes #2). The problem is that apr_socket_atreadeof() is falling through to the \"Should not fall through here\" at the end of the function. It turns out that apr_poll() is returning APR_POLLHUP|APR_POLLIN, rather than just APR_POLLIN which apr_socket_atreadeof() tests for. This is clearly a bug in apr_socket_atreadeof().", "id": 148691, "time": "2011-08-18T17:01:47Z", "creator": "wiml@omnigroup.com", "creation_time": "2011-08-18T17:01:47Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 50269, "text": "This bug is still present in 1.4.6. Mac OS X 10.7 (Lion)\n\nNote that neither apr 1.4.6 nor OS X 10.7 are available in Bugzilla.\n\n\ntestsock            : FAILED 1 of 9\ntestsockets         : SUCCESS\ntestsockopt         : SUCCESS\nteststr             : SUCCESS\nteststrnatcmp       : SUCCESS\ntesttable           : SUCCESS\ntesttemp            : SUCCESS\ntestthread          : SUCCESS\ntesttime            : SUCCESS\ntestud              : SUCCESS\ntestuser            : SUCCESS\ntestvsn             : SUCCESS\nFailed Tests   \t\tTotal\tFail\tFailed %\n===================================================\ntestsock       \t\t    9\t   1\t 11.11%\nPrograms failed: testall\nmake[1]: *** [check] Error 1\nmake: *** [check] Error 2", "id": 154276, "time": "2012-02-27T09:12:39Z", "creator": "lists@pbw.id.au", "creation_time": "2012-02-27T09:12:39Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 50269, "is_private": false, "count": 4, "id": 162293, "time": "2012-09-19T20:12:35Z", "creator": "mamfelt@gmail.com", "creation_time": "2012-09-19T20:12:35Z", "text": "Also getting error on AIX 6.1\n\nFailed Tests            Total   Fail    Failed %\n===================================================\ntestsock                    9      1     11.11%\n\nLooks to be IPv6 related on AIX.\n\nroot@x104:[/data/prj/apr/apr-1.4.x/test]./testall -v testsock\ntestsock            : \\Line 327: expected <0.0.0.0>, but saw <::ffff:0.0.0.0>\nFAILED 1 of 9\nFailed Tests            Total   Fail    Failed %\n===================================================\ntestsock                    9      1     11.11%\n\nCannot be sure if it is the same error, but it is one :)"}, {"count": 5, "tags": [], "text": "This error still occurs (I'm compiling apr-1.4.8 on Mac OS X Lion (10.7.5) using the clang compiler).  The error is not intermittent for me.\n\n\nI modified line 49 of socket_util.c to be\n\n    else if (nfds == 1 && (pfds[0].rtnevents & APR_POLLIN) == APR_POLLIN) {\n\nand it now passes.\n\nSo a question remains: if a socket returns APR_POLLHUP at the same time as APR_POLLIN, is it a fatal condition?", "is_private": false, "id": 170068, "creator": "michael.leahy1@comcast.net", "time": "2013-09-12T13:35:49Z", "bug_id": 50269, "creation_time": "2013-09-12T13:35:49Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "jim@apache.org", "text": "I also noticed this with OSX... my investigation shows the same as the below. A fix is in apr trunk and apr 1.5.1-dev", "id": 171287, "time": "2013-11-18T14:37:58Z", "bug_id": 50269, "creation_time": "2013-11-18T14:37:58Z", "is_private": false, "attachment_id": null}]