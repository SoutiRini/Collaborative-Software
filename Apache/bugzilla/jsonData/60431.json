[{"count": 0, "tags": [], "creator": "apache@ben.eflow.org", "attachment_id": null, "id": 195295, "time": "2016-11-29T21:36:14Z", "bug_id": 60431, "creation_time": "2016-11-29T21:36:14Z", "is_private": false, "text": "The varargs implementation of the ASTFunction treats arrays in the final parameter as a single parameter. \n\nExample jsp:\n\n<%@ taglib uri=\"/myfunctions\" prefix=\"myfn\"%>\n<c:set var=\"myarray\" value=\"${myfn:split( myvar, '@' )}\")\n<c:set var=\"pageTitle\" value=\"${myfn:getTitle( myobj, myarray )}\"/>\n\nmyfunctions.java has:\npublic static String getTitle(String key, String... args) { }\n\nThe array passed in jsp should be treated as the whole argument to getTitle.  The current implementation converts the passed array to be the first element in a new array and passes that to getTitle."}, {"count": 1, "tags": [], "creator": "apache@ben.eflow.org", "attachment_id": 34489, "id": 195296, "time": "2016-11-29T21:42:17Z", "bug_id": 60431, "creation_time": "2016-11-29T21:42:17Z", "is_private": false, "text": "Created attachment 34489\nAstFunction patch"}, {"count": 2, "tags": [], "creator": "apache@ben.eflow.org", "attachment_id": null, "id": 195297, "time": "2016-11-29T21:42:45Z", "bug_id": 60431, "creation_time": "2016-11-29T21:42:45Z", "is_private": false, "text": "Attached patch against trunk to fix this."}, {"count": 3, "tags": [], "text": "In addition to fixing this issue, the proposed patch also converts a List into a set of varargs parameters. What is the specification based justification for this? I can see why one would want to do this but Java doesn't do this and I couldn't find any reference to this conversion in the UEL spec.\n\nI'm working on the array to varargs mapping which, in my view, is justified by how Java behaves even through the UEL spec doesn't mention it.", "is_private": false, "id": 195318, "creation_time": "2016-12-01T14:36:39Z", "time": "2016-12-01T14:36:39Z", "creator": "markt@apache.org", "bug_id": 60431, "attachment_id": null}, {"count": 4, "tags": [], "creator": "apache@ben.eflow.org", "attachment_id": null, "id": 195319, "time": "2016-12-01T14:44:13Z", "bug_id": 60431, "creation_time": "2016-12-01T14:44:13Z", "is_private": false, "text": "The java list --> array is not strictly necessary. I only added that in while writing the test cases.  I wanted a simple test case like \"fn:echo(['a', 'b'])\", but el converts raw [] to a List, not an array.  \n\nIn order for the param to remain an array I have to put it into a separate variable and pass that variable (which is actually my use-case).  See other test-case that does this."}, {"count": 5, "tags": [], "bug_id": 60431, "attachment_id": null, "id": 195327, "time": "2016-12-01T21:00:24Z", "creator": "markt@apache.org", "creation_time": "2016-12-01T21:00:24Z", "is_private": false, "text": "Thanks for the patch.\n\nFixed in:\n- trunk for 9.0.0.M14 onwards\n- 8.5.x for 8.5.9 onwards\n- 8.0.x for 8.0.40 onwards\n- 7.0.x for 7.0.74 onwards\n- 6.0.x for 6.0.49 onwards"}]