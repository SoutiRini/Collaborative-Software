[{"count": 0, "tags": [], "text": "When the child process needs to be replaced because MaxRequestsPerChild has been reached, there is an attempt to wait for the threads running in the older child to be over. If it takes longer than 5 minutes, the threads are killed. In case a thread is killed, the existing child (the newer child) is no longer replaced.\n\nIn the logs, it looks like this:\n\n[Sun Feb 12 09:58:18 2012] [notice] Child 10508: Process exiting because it reached MaxRequestsPerChild. Signaling the parent to restart a new child process.\n[Sun Feb 12 09:58:18 2012] [notice] Parent: Received restart signal -- Restarting the server.\n[Sun Feb 12 09:58:18 2012] [notice] Digest: generating secret for digest authentication ...\n[Sun Feb 12 09:58:18 2012] [notice] Digest: done\n[Sun Feb 12 09:58:18 2012] [notice] Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/0.9.8r configured -- resuming normal operations\n[Sun Feb 12 09:58:18 2012] [notice] Server built: Sep  9 2011 10:26:10\n[Sun Feb 12 09:58:18 2012] [notice] Parent: Created child process 8816\n[Sun Feb 12 09:58:19 2012] [notice] Digest: generating secret for digest authentication ...\n[Sun Feb 12 09:58:19 2012] [notice] Digest: done\n[Sun Feb 12 09:58:19 2012] [notice] Child 10508: Released the start mutex\n[Sun Feb 12 09:58:19 2012] [notice] Child 8816: Child process is running\n[Sun Feb 12 09:58:19 2012] [notice] Child 8816: Acquired the start mutex.\n[Sun Feb 12 09:58:19 2012] [notice] Child 8816: Starting 500 worker threads.\n[Sun Feb 12 09:58:19 2012] [notice] Child 8816: Starting thread to listen on port 443.\n[Sun Feb 12 09:58:19 2012] [notice] Child 8816: Starting thread to listen on port 80.\n[Sun Feb 12 09:58:52 2012] [notice] Child 10508: Waiting 270 more seconds for 2 worker threads to finish.\n[Sun Feb 12 09:59:25 2012] [notice] Child 10508: Waiting 240 more seconds for 2 worker threads to finish.\n[Sun Feb 12 09:59:58 2012] [notice] Child 10508: Waiting 210 more seconds for 2 worker threads to finish.\n[Sun Feb 12 10:00:31 2012] [notice] Child 10508: Waiting 180 more seconds for 2 worker threads to finish.\n[Sun Feb 12 10:01:04 2012] [notice] Child 10508: Waiting 150 more seconds for 2 worker threads to finish.\n[Sun Feb 12 10:01:36 2012] [notice] Child 10508: Waiting 120 more seconds for 2 worker threads to finish.\n[Sun Feb 12 10:02:09 2012] [notice] Child 10508: Waiting 90 more seconds for 2 worker threads to finish.\n[Sun Feb 12 10:02:42 2012] [notice] Child 10508: Waiting 60 more seconds for 2 worker threads to finish.\n[Sun Feb 12 10:03:15 2012] [notice] Child 10508: Waiting 30 more seconds for 2 worker threads to finish.\n[Sun Feb 12 10:03:48 2012] [notice] Child 10508: Waiting 0 more seconds for 2 worker threads to finish.\n[Sun Feb 12 10:03:48 2012] [notice] Child 10508: Terminating 2 threads that failed to exit.\n[Sun Feb 12 10:03:48 2012] [notice] Child 10508: All worker threads have exited.\n[Sun Feb 12 10:03:48 2012] [notice] Child 10508: Child process is exiting\n\nOur relevant configuration is:\n\nThreadLimit 500\nThreadsPerChild 500\nMaxRequestsPerChild 500\nKeepAlive On\nMaxKeepAliveRequests 500\nKeepAliveTimeout 60", "attachment_id": null, "id": 154531, "creator": "mosheb@perfectomobile.com", "time": "2012-03-05T07:52:47Z", "bug_id": 52828, "creation_time": "2012-03-05T07:52:47Z", "is_private": false}]