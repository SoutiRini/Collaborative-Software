[{"count": 0, "tags": [], "bug_id": 27770, "attachment_id": null, "is_private": false, "id": 54216, "time": "2004-03-18T11:48:37Z", "creator": "mark@tranchant.plus.com", "creation_time": "2004-03-18T11:48:37Z", "text": "I'm trying to implement MultiViews to avoid using filename extensions. It works\nwell, except when certain user agents (typically crawlers) try to access a\nnon-extensioned URI that MultiViews resolves to a PHP file.\n\nWhen the UA sends an Accept header of, say, \"text/*\", MultiViews reads the .php\nfile as being of type application/x-httpd-php (due to the PHP AddType line), and\nreturns a 406 Not Acceptable error. Of course, a processed .php file leaves the\nserver as text/html (for example), but MultiViews doesn't know this.\n\nI thought I could get around this using RequestHeader to add\n\"application/x-httpd-php\" to the incoming Accept header, but it seems that\nMultiViews fakes up its type map based on the original Accept header, not the\nmodified one.\n\nThere may be other preferred ways to fix this, but asking MultiViews to use the\nmodified header would seem to make sense, and I suspect it would fix this problem."}, {"count": 1, "tags": [], "creator": "mark@tranchant.plus.com", "is_private": false, "text": "Created attachment 10846\nHTTP transcript showing the 406 error", "id": 54218, "time": "2004-03-18T11:52:43Z", "bug_id": 27770, "creation_time": "2004-03-18T11:52:43Z", "attachment_id": 10846}, {"count": 2, "tags": [], "text": "That's why you shouldn't change the file type when what you really want\nis to designate a handler.  (I know that is what the php manual says; \nbut it is wrong.)\n\nTry\nAddHandler php-script php\nin place of you AddType directive.\n\nI haven't looked at the specific problem with RequestHeader, but I suspect\nthat directive does its work too late for it to affect content negotiation.", "attachment_id": null, "id": 54226, "creator": "slive@apache.org", "time": "2004-03-18T15:35:15Z", "bug_id": 27770, "creation_time": "2004-03-18T15:35:15Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 27770, "attachment_id": null, "is_private": false, "id": 55242, "time": "2004-04-03T22:38:41Z", "creator": "nd@perlig.de", "creation_time": "2004-04-03T22:38:41Z", "text": "No further response. Assuming issue resolved."}, {"count": 4, "tags": [], "text": "Agreed, closed. Any future complainants may be redirected to\nhttp://tranchant.plus.com/notes/multiviews if that helps! Thanks for the assistance.", "attachment_id": null, "bug_id": 27770, "id": 55754, "time": "2004-04-14T13:29:15Z", "creator": "mark@tranchant.plus.com", "creation_time": "2004-04-14T13:29:15Z", "is_private": false}]