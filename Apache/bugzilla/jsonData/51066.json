[{"count": 0, "tags": [], "text": "If the ivy.xml is encoded in UTF-8 and contains the UTF-8 BOM at the begging of the file, the parser throws a ParseException.  See below for a sample stack trace.  Please allow such ivy.xml files without throwing an exception.\n\nBUILD FAILED\n/apps/hudson/slave/workspace/WE-EC-dux-BUILDandDEPLOY-DEV/Tools/build/module.xml:71: mycompany#compile;working@buildnode11: java.lang.RuntimeException: bad ivy file in cache for mycompany#compile;working@buildnode11: please clean '/apps/hudson/slave/workspace/WE-EC-dux-BUILDandDEPLOY-DEV/cloud/ec/ecweb/trunk/duxtemplates/.ivy2.cache/resolved-compile-working@buildnode11.xml' and resolve again\n        at org.apache.ivy.core.deliver.DeliverEngine.deliver(DeliverEngine.java:128)\n        at org.apache.ivy.Ivy.deliver(Ivy.java:586)\n        at org.apache.ivy.ant.IvyDeliver.doExecute(IvyDeliver.java:423)\n        at org.apache.ivy.ant.IvyTask.execute(IvyTask.java:277)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)\n        at net.sf.antcontrib.logic.IfTask.execute(IfTask.java:197)\n        at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n        at org.apache.tools.ant.TaskAdapter.execute(TaskAdapter.java:154)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:390)\n        at org.apache.tools.ant.Target.performTasks(Target.java:411)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)\n       at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)\n        at org.apache.tools.ant.Main.runBuild(Main.java:809)\n        at org.apache.tools.ant.Main.startAnt(Main.java:217)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)\nCaused by: java.text.ParseException: [[Fatal Error] resolved-compile-working@buildnode11.xml:1:1: Content is not allowed in prolog. in file:/apps/hudson/slave/workspace/WE-EC-dux-BUILDandDEPLOY-DEV/cloud/ec/ecweb/trunk/duxtemplates/.ivy2.cache/resolved-compile-working@buildnode11.xml\n]\n        at org.apache.ivy.plugins.parser.AbstractModuleDescriptorParser$AbstractParser.checkErrors(AbstractModuleDescriptorParser.java:89)\n        at org.apache.ivy.plugins.parser.xml.XmlModuleDescriptorParser$Parser.parse(XmlModuleDescriptorParser.java:272)\n        at org.apache.ivy.plugins.parser.xml.XmlModuleDescriptorParser.parseDescriptor(XmlModuleDescriptorParser.java:112)\n        at org.apache.ivy.plugins.parser.AbstractModuleDescriptorParser.parseDescriptor(AbstractModuleDescriptorParser.java:48)\n        at org.apache.ivy.core.deliver.DeliverEngine.deliver(DeliverEngine.java:119)\n        ... 32 more", "attachment_id": null, "bug_id": 51066, "id": 145795, "time": "2011-04-14T16:28:44Z", "creator": "ken_c_chu@yahoo.com", "creation_time": "2011-04-14T16:28:44Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nicolas.lalevee@hibnet.org", "text": "Your issue comes from the XML parser you're using. For instance the Crimson parser is known to not support the BOM whereas the xerces one does.\n\nSo look into Ant's classpath for an xml parser to change.\nOr look into the one provided by your JRE. In that case just add xerces into Ant's classpath\n\n\nAnd as a side note, bugs report regarding Ivy should better be entered there https://issues.apache.org/jira/browse/IVY", "id": 145796, "time": "2011-04-14T16:58:54Z", "bug_id": 51066, "creation_time": "2011-04-14T16:58:54Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "ken_c_chu@yahoo.com", "text": "Thanks for the pointer to the Ivy bugzilla.  I'll change the classpath and give that a try.", "id": 145798, "time": "2011-04-15T01:37:41Z", "bug_id": 51066, "creation_time": "2011-04-15T01:37:41Z", "is_private": false, "attachment_id": null}]