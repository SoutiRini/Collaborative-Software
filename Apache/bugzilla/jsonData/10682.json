[{"count": 0, "tags": [], "creator": "thorsten.sommermann@vsa.de", "attachment_id": null, "text": "The error occurs, when launching a \"java\"-task in the same VM (no fork). I ran \nit on win2000 (SP2) with jdk1.4.0_01 and tried to invoke the Castor XML binder. \nCastor obviously used a \"sun.reflect.MethodAccessorImpl\" instance. A debugging \nsession on ant showed the reason for not finding the appropriate class. I fixed \nthe error in the following two classes:\n\norg.apache.tools.ant.util.JavaEnvUtils: method \"buildJrePackages()\"\n\nadding a new entry within the case block:\n\n    case 12:\n      jrePackages.addElement(\"sun.misc\");\n      jrePackages.addElement(\"sun.reflect\");    <----- add entry\n\n\norg.apache.tools.ant.AntClassLoader: Constructor\n\n\"addJavaLibraries\" de-comment:\n\n    this.parentFirst = parentFirst;\n    //TODO: turn on\n    addJavaLibraries();                  <-- was commented out !\n    addSystemPackageRoot(\"java\");\n    addSystemPackageRoot(\"javax\");", "id": 19316, "time": "2002-07-11T12:45:48Z", "bug_id": 10682, "creation_time": "2002-07-11T12:45:48Z", "is_private": false}, {"count": 1, "tags": [], "creator": "ddevienne@lgc.com", "attachment_id": null, "text": "Welcome to the club of people bitten by the class loader architecture of \nAnt1!!! I read the doco for Mutant around that topic, and I which it was there \nright now (and I'm assuming Myrmidon has something similar). That Conor would \nabondon Mutant makes me sad... --DD", "id": 19320, "time": "2002-07-11T14:04:48Z", "bug_id": 10682, "creation_time": "2002-07-11T14:04:48Z", "is_private": false}, {"count": 2, "tags": [], "text": "This is a duplicate of the long standing 3158 bug; you have just noticed that we\nhave a potential fix for that bug that is not yet enabled in ant1.5, because we\nwere scared about side effects. \n\n1. I agree with the addition on the sun.reflect package. See below.\n\n2. The reason the addJavaLibraries();  call was turned off was that we havent\ndone enough regression testing to see what breaks, or written the tests to\nverify it all works. So although I was tempted to turn the switch on in 1.5\nrelease, it was too late in the beta program to change fundamental behavior.\n\nthe workaround for now is set fork=true. When you are doing castor stuff, btw,\nyou also need to set whatever option it is to turn off interactive\ninput/overwrite existing files, otherwise it hands waiting for input.\n\nnb, not applying your patch as the latest version of the code (on CS head) has\n            default:\n                //things like sun.reflection, sun.misc, sun.net\n                jrePackages.addElement(\"sun.\");\n\nbecause I have been running the modified build and noticed the same problem with\nsome Axis code. \n-steve\n\n\n\n*** This bug has been marked as a duplicate of 3158 ***", "is_private": false, "bug_id": 10682, "id": 19430, "time": "2002-07-12T17:28:17Z", "creator": "stevel@apache.org", "creation_time": "2002-07-12T17:28:17Z", "attachment_id": null}]