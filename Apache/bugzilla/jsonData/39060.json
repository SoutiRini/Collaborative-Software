[{"count": 0, "tags": [], "text": "Naturally, this kind of situation should be handled just like if the user was\nnot a member of the required group. The server process should not die.\n\nI got this error with using mod_auth_kerb to authenticate and mod_auth_dbm to\nauthorize. It seems like mod_auth_dbm was not written with this in mind. ;)", "is_private": false, "id": 87104, "creator": "jval@wippies.com", "time": "2006-03-22T13:38:27Z", "bug_id": 39060, "creation_time": "2006-03-22T13:38:27Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "nick@webthing.com", "text": "1.  Indeed, it shouldn't just die, and it's a bug if it does.  It should, at  \nworst, return Internal Server Error (500).  \n  \n2.  You're right, none of the authentication in 2.0 was designed as  \nmix-and-match.  That's one of the headline changes in 2.2.  \n  \n3.  Since 2.2 is available and does support this kind of thing, there seems  \nlittle point in devoting time and effort to fixing it in 2.0.  \n  \n4.  You could of course patch it yourself, or pay someone to do it.  Or it's  \npossible someone else will take a different view.  \n  \nLeaving bug as NEW to give others time to comment.  If you can provide an  \nexact use case (preferably one that doesn't rely on third-party modules such  \nas mod_auth_kerb), I or someone might try to reproduce it (but no promises). ", "id": 87108, "time": "2006-03-22T17:35:33Z", "bug_id": 39060, "creation_time": "2006-03-22T17:35:33Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "I guess it depends on the amount of work that is needed to fix this. To get an\nestimate it would be helpful if you can provide a gdb backtrace of the crashed\nprocess.", "is_private": false, "id": 87122, "creator": "rpluem@apache.org", "time": "2006-03-22T20:26:32Z", "bug_id": 39060, "creation_time": "2006-03-22T20:26:32Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "jval@wippies.com", "is_private": false, "text": "This problem seems to occure only when KrbMethodNegotiate is on and the client\nhas a valid Kerberos ticket. So I can't produce this issue with other\nauthentication modules (I have not tried other negotiating modules though - I\nwonder if this is related to negotiation generally or just to mod_auth_kerb).\n\nThe server process exits with return value 0 and writes to the log file:\n\n[<date here>] [error] [client <ip here>] user <user here> not in DBM group file\n<AuthDBMGroupFile here>: <requested uri here>\n\nAs the server doesn't respond anything to the client, the client retries again\nand again (server's error log gets 10 messages per second - and this continues a\nfew seconds until the client gives up).", "id": 87134, "time": "2006-03-23T08:22:08Z", "bug_id": 39060, "creation_time": "2006-03-23T08:22:08Z", "attachment_id": null}, {"count": 4, "text": "Maybe too impatient :-), but you talked about a crash of the server. So any\nbacktrace information available from that crash?", "creator": "rpluem@apache.org", "is_private": false, "id": 87172, "time": "2006-03-23T20:50:42Z", "bug_id": 39060, "creation_time": "2006-03-23T20:50:42Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 39060, "attachment_id": null, "is_private": false, "id": 87181, "time": "2006-03-23T21:44:22Z", "creator": "jval@wippies.com", "creation_time": "2006-03-23T21:44:22Z", "text": "It doesn't cause a segfault. It just never responds to the browser. So I had to\nstop it myself with Ctrl+c:\n\nProgram received signal SIGINT, Interrupt.\n[Switching to Thread -1214361472 (LWP 6359)]\n0xb7ba74d9 in poll () from /lib/tls/libc.so.6\n\nHere's the backtrace:\n\n(gdb) bt\n#0  0xb7ba74d9 in poll () from /lib/tls/libc.so.6\n#1  0xb7c754fd in apr_poll () from /usr/lib/libapr-0.so.0\n#2  0xb7c75c33 in apr_wait_for_io_or_timeout () from /usr/lib/libapr-0.so.0\n#3  0xb7c6aeb4 in apr_socket_recv () from /usr/lib/libapr-0.so.0\n#4  0xb7dba0d5 in apr_bucket_mmap_create () from /usr/lib/libaprutil-0.so.0\n#5  0xb7dbaa0e in apr_brigade_split_line () from /usr/lib/libaprutil-0.so.0\n#6  0x0808ea27 in ap_core_translate ()\n#7  0x080860d6 in ap_get_brigade ()\n#8  0x08063cc7 in _start ()\n#9  0x081fc890 in ?? ()\n#10 0x0820c040 in ?? ()\n#11 0x00000001 in ?? ()\n#12 0x00000000 in ?? ()\n#13 0x00000000 in ?? ()\n#14 0x00e4e1c0 in ?? ()\n#15 0x00000000 in ?? ()\n#16 0x0820b3a0 in ?? ()\n#17 0x00000000 in ?? ()\n#18 0x00000000 in ?? ()\n#19 0xbf8662c8 in ?? ()\n#20 0x080860d6 in ap_get_brigade ()\n#21 0x080860d6 in ap_get_brigade ()\n#22 0x080860d6 in ap_get_brigade ()\n#23 0x08087538 in ap_rgetline_core ()\n#24 0x08087a77 in ap_parse_uri ()\n#25 0x08088241 in ap_read_request ()\n#26 0x08065058 in _start ()\n#27 0x081fc510 in ?? ()\n#28 0x00001000 in ?? ()\n#29 0x00000001 in ?? ()\n#30 0x0808370c in ap_run_pre_connection ()\n#31 0x080835c5 in ap_run_process_connection ()\n#32 0x08076974 in ap_graceful_stop_signalled ()\n#33 0x08076b8b in ap_graceful_stop_signalled ()\n#34 0x08076be8 in ap_graceful_stop_signalled ()\n#35 0x0807745a in ap_mpm_run ()\n#36 0x0807da8d in main ()"}, {"count": 6, "tags": [], "text": "Thanks for the backtrace. It looks somewhat weird. I guess you did not compile\nyour httpd with -g. Could you try this again with a -g compiled httpd?\nAdditional questions:\n\n- What OS are you using?\n- What MPM are you using?\n", "is_private": false, "id": 87241, "creator": "rpluem@apache.org", "time": "2006-03-24T22:57:54Z", "bug_id": 39060, "creation_time": "2006-03-24T22:57:54Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 39060, "text": "Linux localhost 2.6.15.4-generic-p4-1095 #1 SMP Sun Feb 26 10:17:45 EET 2006\ni686 GNU/Linux\n\nDebian GNU/Linux 3.1 (sarge)\n\nApache HTTP Server 2.0.54 (Debian package version: 2.0.54-5)\n\nMPM: prefork", "count": 7, "id": 87244, "time": "2006-03-25T01:00:10Z", "creator": "jval@wippies.com", "creation_time": "2006-03-25T01:00:10Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 39060, "is_private": false, "count": 8, "id": 91158, "time": "2006-07-11T19:42:15Z", "creator": "rpluem@apache.org", "creation_time": "2006-07-11T19:42:15Z", "text": "Thanks for the feedback, but without a good stacktrace there is nothing I can\ndo. Please have a look at http://httpd.apache.org/dev/debugging.html."}, {"count": 9, "tags": [], "bug_id": 39060, "attachment_id": null, "is_private": false, "id": 123527, "time": "2008-12-26T11:22:06Z", "creator": "nick@webthing.com", "creation_time": "2008-12-26T11:22:06Z", "text": "Assuming not applicable in 2.2, and too obscure/underspecified to deal with in a long-obsolete version."}]