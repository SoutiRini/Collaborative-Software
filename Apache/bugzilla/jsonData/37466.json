[{"count": 0, "tags": [], "text": "Attempting to use c:import to read in a file results in no content if the\nrequest sent the the web server is a HEAD instead of a GET.  This causes things\nlike parsing XML documents to fail, as well as anything else that might depend\non files being read correctly.\nI'll attach an example jsp and xml file that demonstrates the problem.", "attachment_id": null, "bug_id": 37466, "id": 82382, "time": "2005-11-11T09:03:45Z", "creator": "erh+apache@nimenees.com", "creation_time": "2005-11-11T09:03:45Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 37466, "attachment_id": 16947, "is_private": false, "id": 82383, "time": "2005-11-11T09:05:38Z", "creator": "erh+apache@nimenees.com", "creation_time": "2005-11-11T09:05:38Z", "text": "Created attachment 16947\nA JSP file that will demonstrate the c:import problem."}, {"attachment_id": 16948, "tags": [], "creator": "erh+apache@nimenees.com", "is_private": false, "count": 2, "id": 82384, "time": "2005-11-11T09:06:07Z", "bug_id": 37466, "creation_time": "2005-11-11T09:06:07Z", "text": "Created attachment 16948\nXML data file to go along with testit.jsp."}, {"count": 3, "tags": [], "bug_id": 37466, "attachment_id": null, "text": "To see the problem, copy testit.jsp and testit.xml to a webapp.  Then send a\nHEAD request, perhaps like this:\n\n> telnet localhost 8080\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nHEAD /mywebapp/testit.jsp HTTP/1.1\nHost: localhost 8080\n\nHTTP/1.1 500 Internal Server Error\nContent-Type: text/html;charset=utf-8\nTransfer-Encoding: chunked\nDate: Fri, 11 Nov 2005 08:07:55 GMT\nServer: Apache-Coyote/1.1\nConnection: close\n\nConnection closed by foreign host.\n>\n\nThe internal server error is due to x:parse complaining with:\norg.xml.sax.SAXParseException: Premature end of file.\n", "id": 82385, "time": "2005-11-11T09:11:38Z", "creator": "erh+apache@nimenees.com", "creation_time": "2005-11-11T09:11:38Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 37466, "is_private": false, "id": 82386, "creation_time": "2005-11-11T09:13:10Z", "time": "2005-11-11T09:13:10Z", "creator": "erh+apache@nimenees.com", "text": "d'oh! cut'n'paste error.  The Host: line is missing a colon:\nHost: localhost:8080", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 37466, "attachment_id": 19364, "is_private": false, "id": 97673, "time": "2007-01-04T17:28:30Z", "creator": "bjorn@sourcelabs.com", "creation_time": "2007-01-04T17:28:30Z", "text": "Created attachment 19364\nUnit test patch to taglibs test system for this bug."}, {"count": 6, "tags": [], "bug_id": 37466, "is_private": false, "text": "Problem occurs regardless of whether var=\"..\" or varReader=\"..\" is used in the\nc:import.", "id": 97910, "time": "2007-01-10T13:13:38Z", "creator": "bayard@apache.org", "creation_time": "2007-01-10T13:13:38Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 37466, "attachment_id": null, "text": "This issue was brought up on tomcat-dev by the original poster, and Bill Barker\nsuggests a JSTL fix:\n\nhttp://mail-archives.apache.org/mod_mbox/tomcat-users/200512.mbox/%3cdo4qqm$eg4$1@sea.gmane.org%3e", "id": 97912, "time": "2007-01-10T14:03:46Z", "creator": "bayard@apache.org", "creation_time": "2007-01-10T14:03:46Z", "is_private": false}, {"attachment_id": 19388, "tags": [], "bug_id": 37466, "text": "Created attachment 19388\nPatch to fix the issue.", "count": 8, "id": 97913, "time": "2007-01-10T14:08:07Z", "creator": "bayard@apache.org", "creation_time": "2007-01-10T14:08:07Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 37466, "attachment_id": null, "is_private": false, "id": 97914, "time": "2007-01-10T14:09:39Z", "creator": "bayard@apache.org", "creation_time": "2007-01-10T14:09:39Z", "text": "svn ci -m \"Applying Bjorn Townsend's unit test and the fix for #37466 - c:import\ndoesn't work with HEAD requests. Many thanks to Bill Barker on tomcat-dev for\nproviding the idea behind the fix. \"\n\nSending        src/org/apache/taglibs/standard/tag/common/core/ImportSupport.java\nAdding         test/org/apache/taglibs/standard/tag/ImportTagTest\nAdding         test/org/apache/taglibs/standard/tag/ImportTagTest/core\nAdding        \ntest/org/apache/taglibs/standard/tag/ImportTagTest/core/Test37466.java\nAdding         test/web/org/apache/taglibs/standard/tag/ImportTagTest\nAdding         test/web/org/apache/taglibs/standard/tag/ImportTagTest/core\nAdding        \ntest/web/org/apache/taglibs/standard/tag/ImportTagTest/core/Test37466.jsp\nAdding        \ntest/web/org/apache/taglibs/standard/tag/ImportTagTest/core/Test37466.xml\nTransmitting file data ....\nCommitted revision 495005."}, {"count": 10, "tags": [], "bug_id": 37466, "text": "The patch in r495005 attempts to address this by wrapping the HttpServletRequest and overriding the getMethod() call to always return GET.\n\nThe works on Tomcat when importing a static resource as it causes the DefaultServlet to return content (when the method is HEAD DefaultServlet always returns no content). However, it breaks other servlets that may rely on the method, for example, a servlet that overrides doPost().", "id": 181148, "time": "2015-02-18T16:14:39Z", "creator": "jboynes@apache.org", "creation_time": "2015-02-18T16:14:39Z", "is_private": false, "attachment_id": null}, {"count": 11, "attachment_id": null, "bug_id": 37466, "text": "Reverted the fix in http://svn.apache.org/r1663321 to be included in Taglibs 1.2.4\n\nThe associated change to Tomcat means the patch that addressed this is no longer appropriate. Resolving as INVALID.", "id": 181439, "time": "2015-03-02T14:55:39Z", "creator": "jboynes@apache.org", "creation_time": "2015-03-02T14:55:39Z", "tags": [], "is_private": false}]