[{"count": 0, "attachment_id": null, "creator": "normandviking@gmail.com", "text": "Under a tclsh, if you type this command, you get:\n\n% set res{<?xml version='1.0' encoding='utf-8'?><rows><page>0</page><total>0</total></rows>}\n<?xml version='1.0' encoding='utf-8'?><rows><page>0</page><total>0</total></rows>\n\nAll is fine.\n\nBut within a rivet page,\n\n<?\nset res {<?xml version='1.0' encoding='utf-8'?><rows><page>0</page><total>0</total></rows>}\n?>\n\nyou get:\n\n[Thu Oct 24 17:00:52 2013] [error] RivetErrorScript called!: missing close-brace\\n    while executing\\n\"namespace eval request {\"\n\nSo a perfectly correct TCL string set with { } is parsed incorrectly within the rivet parser.\n\nIt is minor but a reference at it should be in the documentation.\nWe might want to add dual markers <rvt and <? for backward compatibility?", "id": 170850, "time": "2013-10-25T21:30:17Z", "bug_id": 55710, "creation_time": "2013-10-25T21:30:17Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "ronnie.brunner@netcetera.ch", "attachment_id": null, "is_private": false, "id": 182883, "time": "2015-05-07T20:28:51Z", "bug_id": 55710, "creation_time": "2015-05-07T20:28:51Z", "text": "For what it's worth: In Websh we allow properly nested tags and for cases where they're not properly nested, you can escape them with a '\\'. By default, Websh uses braces for embedded scripts, but this can be configured to tags with\n\n   web::config putxmarkup tag\n\nSo, this is valid (and working as expected):\n\n<?\nset res {<?xml version='1.0' encoding='utf-8'?><rows><page>0</page><total>0</total></rows>}\n?>\n\nbut invalid would be (not properly nested: \n\n<?\nset res {?>xml version='1.0' encoding='utf-8'<?<rows><page>0</page><total>0</total></rows>}\n?>\n\nDoesn't make much sense, I know, but to make that a valid statement (though pretty useless), you'd escape as follows:\n\n<?\nset res {\\?>xml version='1.0' encoding='utf-8'\\<?<rows><page>0</page><total>0</total></rows>}\n?>\n\nThis could be an option for you to solve that rather than adding <rvt a alternative ending up needing both rvt> and ?> in the same statement, just as in this sentence. :-)"}, {"count": 2, "attachment_id": null, "creator": "jlawson-apache@bovine.net", "text": "You can use backslashes to break up the magic character sequence so that Rivet does not get confused by it, though you have to use double-quotes instead of braces.\n\n<?\nset res \"<\\?xml version='1.0' encoding='utf-8'?\\><rows><page>0</page><total>0</total></rows>\"\n\n?>", "id": 182885, "time": "2015-05-07T23:25:02Z", "bug_id": 55710, "creation_time": "2015-05-07T23:25:02Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 55710, "text": "Hi Brice, this bug has been around for quite a long time now, can you provide a patch to be applied to the parser? We may consider changing the unsung hero of Rivet (the Rivet parser) for Rivet 3.0 (code in trunk). If we want to modify it it's perhaps the right time to dare a patch for this fundamental component\n\n -- Massimo", "id": 195050, "time": "2016-11-16T23:22:30Z", "creator": "mxmanghi@apache.org", "creation_time": "2016-11-16T23:22:30Z", "is_private": false, "attachment_id": null}]