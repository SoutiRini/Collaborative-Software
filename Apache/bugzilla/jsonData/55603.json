[{"count": 0, "tags": [], "creator": "jorgevpinho@gmail.com", "text": "This code works correctly in a java program (command line), but NOT when called inside a servlet (I am currently calling from a Struts 1.2.8 Action)\n\nI only get an endless spooling.\n\n-- START CODE --\n\nMyPainter myp = new MyPainter(); // Implements Printable interface\n\nDocFlavor flavor = DocFlavor.SERVICE_FORMATTED.PRINTABLE;\n\nPrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\naset.add(new JobName(\"myjob\", Locale.getDefault()));\n\nPrintService [] pservices = PrintServiceLookup.lookupPrintServices(flavor, aset);\n\nDocPrintJob pj = pservices[0].createPrintJob();\n\nDoc doc = new SimpleDoc(myp, flavor, null);\n\npj.print(doc, aset);\n\n-- END CODE --\n\nI think it is a bug, because my code never gets called, i.e. the print() method in the painter is never called.", "id": 170305, "time": "2013-09-27T14:37:50Z", "bug_id": 55603, "creation_time": "2013-09-27T14:37:50Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "What user runs the CLI version, and what user runs Tomcat? Could this be a permissions issue? Most services have virtually no local permissions (including access to printers).", "attachment_id": null, "bug_id": 55603, "id": 170309, "time": "2013-09-27T14:55:57Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-09-27T14:55:57Z", "is_private": false}, {"count": 2, "tags": [], "text": "If it was security issue, there would be no spooling! Plus there is no exceptions.", "attachment_id": null, "bug_id": 55603, "id": 170310, "time": "2013-09-27T15:02:31Z", "creator": "jorgevpinho@gmail.com", "creation_time": "2013-09-27T15:02:31Z", "is_private": false}, {"count": 3, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "is_private": false, "id": 170318, "time": "2013-09-27T21:17:49Z", "bug_id": 55603, "creation_time": "2013-09-27T21:17:49Z", "text": "Can you define \"spooling\"? You say it never calls your paint() method, so it's probably not printing. If it's not printing, then it's not \"spooling\" because that implies it's doing *something* simultaneously with another process. It sounds like it's doing *nothing* which isn't really something.\n\nPerhaps you could provide a thread dump showing that Tomcat is making some kind of mistake, here?"}, {"count": 4, "tags": [], "creator": "jorgevpinho@gmail.com", "attachment_id": 30892, "id": 170327, "time": "2013-09-27T23:18:18Z", "bug_id": 55603, "creation_time": "2013-09-27T23:18:18Z", "is_private": false, "text": "Created attachment 30892\nThread dump of Tomcat 7.0.42\n\n\nThis is a thread dump of Tomcat while the printer queue shows the status \"spooling\"\n\nany package like \"sirios.*\" is the business layer of my software."}, {"count": 5, "tags": [], "text": "I don't see a bug in Tomcat, here. The printing code is all your own. Tomcat is waiting on your code to complete. If you can demonstrate a failure in Tomcat, here, we'll take a look.\n\nIf you want to discuss potential reasons why this is happening and maybe get some troubleshooting help, head on over to the users' list.\n\nWithout any further information showing that this is a bug in Tomcat, this bug will be closed INVALID shortly.", "is_private": false, "bug_id": 55603, "id": 170331, "time": "2013-09-28T00:04:18Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-09-28T00:04:18Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 170333, "time": "2013-09-28T09:11:42Z", "bug_id": 55603, "creation_time": "2013-09-28T09:11:42Z", "text": "There is no Tomcat bug here. The threads are hanging in native code provided by the JRE. While this isn't a Tomcat issue, the users list is usually pretty good at helping folks figure out these sorts of problems."}, {"count": 7, "tags": [], "bug_id": 55603, "attachment_id": null, "text": "\nWell... tomcat must have its own share of responsability, because everything works perfectly in the CLI.\n\nHowever, you are the experts here, this not being a bug is a great help, because now I will look somewhere else!\n\nI believe that tomcat (or JRE on tomcat ?!?!) messes up things with printing. Did you know that the default printer is ignored when printing from servlet ? (it just prints to the first printer listed) But this is a bug on its own.", "id": 170334, "time": "2013-09-28T10:45:24Z", "creator": "jorgevpinho@gmail.com", "creation_time": "2013-09-28T10:45:24Z", "is_private": false}]