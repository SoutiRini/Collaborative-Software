[{"count": 0, "tags": [], "text": "This is a re-submission of old bug (mod_cgi/PR#4490, 1999) that was once \nconfirmed but was lost for some unknown reason (probably during transition to \nnew bug database?).\n\nThe problem resides in following code in mod_cgi.c:\n\n    if (r->method_number == M_OPTIONS) {\n        /* 99 out of 100 CGI scripts, this is all they support */\n        r->allowed |= (1 << M_GET);\n        r->allowed |= (1 << M_POST);\n        return DECLINED;\n    }\n\nThis code obviously prevents userland CGI to handle OPTIONS request.\nBecause of this code, I've been unable to release/distribute CGI-based\nWebDAV provider script as WebDAV protocol requires service endpoint to\nhandle OPTIONS request properly.\n\nThis same report was once submitted to apache-bugdb list in 1999 and\nseems to have been confirmed and almost got accepted. You can read\nhow last conversation went in the following URL:\n\n  http://www.geocrawler.com/mail/thread.php3?subject=mod_cgi%2F4490%\n3A+mod_cgi+prevents+handling+of+OPTIONS+requests&list=192\n\nIt seems the last piece needed to get the fix done is a submission of\na patch, and here I'm submitting it. You can download the patch from\n\n  http://www.imasy.or.jp/~tai/temp/mod_cgi.c.patch\n\nThis patch will add \"ScriptTrapOptions (on|off)\" directive, which\nallows user to control whether CGI script will handle OPTIONS request\nor not.\n\nJust FYI, during googling, I also found Zope people is also hit by\nthis bug. In fact, author of the patch below is the one who have\nsubmitted last bug report on this issue.\n\n  http://www.zope.org/Members/Brian/Misc/mod_cgi_webdav_patch.html\n\nHis patch simply removes above code block, whereas mine adds new\ndiretive to control the behavior.\n\nIf this patch gets accepted, I will also submit a report for apache-2.0,\nas mod_cgi.c in 2.0 also has this code.", "attachment_id": null, "id": 27613, "creator": "tyamadajp@list.rakugaki.org", "time": "2002-12-10T16:46:39Z", "bug_id": 15242, "creation_time": "2002-12-10T16:46:39Z", "is_private": false}, {"count": 1, "tags": [], "creator": "tyamadajp@list.rakugaki.org", "is_private": false, "text": "Created attachment 4116\nPatch to configure whether userland CGI could handle OPTIONS request.", "id": 27614, "time": "2002-12-10T16:50:08Z", "bug_id": 15242, "creation_time": "2002-12-10T16:50:08Z", "attachment_id": 4116}, {"count": 2, "tags": [], "bug_id": 15242, "attachment_id": 4117, "id": 27615, "time": "2002-12-10T16:53:00Z", "creator": "tyamadajp@list.rakugaki.org", "creation_time": "2002-12-10T16:53:00Z", "is_private": false, "text": "Created attachment 4117\nPatch to configure whether userland CGI could handle OPTIONS request."}, {"count": 3, "tags": [], "bug_id": 15242, "attachment_id": null, "id": 47829, "time": "2003-11-21T18:09:08Z", "creator": "trawick@apache.org", "creation_time": "2003-11-21T18:09:08Z", "is_private": false, "text": "I'm going through the bug db to make sure patches are findable.  Please see \nhttp://httpd.apache.org/dev/patches.html\n"}, {"count": 4, "tags": [], "bug_id": 15242, "attachment_id": 11102, "id": 55151, "time": "2004-04-02T13:01:04Z", "creator": "thomas.jarosch@intra2net.com", "creation_time": "2004-04-02T13:01:04Z", "is_private": false, "text": "Created attachment 11102\nFixed for the Windows Update problem"}, {"attachment_id": null, "tags": [], "bug_id": 15242, "is_private": false, "count": 5, "id": 73159, "time": "2005-03-31T18:48:08Z", "creator": "mnot@mnot.net", "creation_time": "2005-03-31T18:48:08Z", "text": "Just a thought -- requiring extra configuration will be onerous for some users (e.g., those at certain \nhosting providers). Rather than adding a configuration directive, why not require the script that wants \nto handle OPTIONS to just emit an Apache-Specified HTTP header that gets consumed?\n\nE.g.,\n\nprint \"Status: 200 OK\"\nprint \"Handling-OPTIONS: 1\"\nprint \"Allow: GET, POST\"\n..."}, {"attachment_id": null, "tags": [], "bug_id": 15242, "is_private": false, "count": 6, "id": 73169, "time": "2005-04-01T00:17:44Z", "creator": "mnot@mnot.net", "creation_time": "2005-04-01T00:17:44Z", "text": "Did you ever submit a report for 2.0? Can't seem to find anything, and 2.0.53 seems to have the same \nproblem."}, {"count": 7, "tags": [], "text": "Hmm, never mind the previous suggestion; if the script had side effects, they'd still take place, which \nwon't be good.", "attachment_id": null, "id": 73278, "creator": "mnot@mnot.net", "time": "2005-04-05T01:40:52Z", "bug_id": 15242, "creation_time": "2005-04-05T01:40:52Z", "is_private": false}, {"count": 8, "tags": [], "creator": "tyamadajp@list.rakugaki.org", "is_private": false, "text": "Wow, it's been long time since I submitted this one...\n\nNo, I haven't submitted patch for 2.0.\nAt that time, 2.0 was not really for production, so I simply\nwaited for 1.3 patch to get in.\n\nIt 2005 now, so maybe I should push this patch for 2.0\n- I guess developers are more active on 2.0 than on 1.3.\n", "id": 73595, "time": "2005-04-13T04:39:50Z", "bug_id": 15242, "creation_time": "2005-04-13T04:39:50Z", "attachment_id": null}, {"count": 9, "tags": [], "text": "I'd just like to add that it's been awhile and it would be nice if the patch was\naccepted.", "attachment_id": null, "id": 79300, "creator": "bshanks3@hotmail.com", "time": "2005-09-01T20:20:31Z", "bug_id": 15242, "creation_time": "2005-09-01T20:20:31Z", "is_private": false}, {"count": 10, "tags": [], "bug_id": 15242, "attachment_id": null, "is_private": false, "id": 81355, "time": "2005-10-19T00:05:20Z", "creator": "fielding@apache.org", "creation_time": "2005-10-19T00:05:20Z", "text": "Also known as\n\n   http://archive.apache.org/gnats/4490\n\nThis misfeature was supposed to be deleted almost immediately following its\naddition to the server, as described in\n\n<http://mail-archives.apache.org/mod_mbox/httpd-dev/199608.mbox/%3c9608132318.aa12603@paris.ics.uci.edu%3e>\n\nYep, that's Aug 1996.  In fact, I thought that I had deleted it, and if\nthis issue had been under \"core\" I would have noticed it a long long time ago.\nOh well...\n\nThe block has now been deleted from all active branches of httpd (1.3.35,\n2.0.56, 2.1+).  Thanks for sending in the more complicated patches, but I\nfeel that CGI scripts should be able to handle all methods by now (or be\nfixed to do so properly).\n\n....Roy\n"}]