[{"count": 0, "tags": [], "bug_id": 21946, "is_private": false, "id": 41685, "creation_time": "2003-07-28T20:52:08Z", "time": "2003-07-28T20:52:08Z", "creator": "isales@klocwork.com", "text": "I am having a big problem with fop when trying to use the code below. Whenever\nI run it with this code, I get the exceptions listed at the bottom of the\nmessage. Whenever I run it with the commented code instead (using Fop.main), it\nruns fine. I figured the problem is because my svg has references such as\n'url(#clipPath2)' inside, and the way I am running below is not allowing fop to\nresolve these uri's properly, or not finding the path to the input source\neither. Is there something I am  missing?\n\nThanks,\nIgor.\n\n  /**\n   * Creates the final pdf document\n   * @throws Exception in case something goes wrong\n   */\n  protected void createPDF() throws Exception\n  {\n    Logger logger = new ConsoleLogger(ConsoleLogger.LEVEL_INFO);\n    org.apache.fop.messaging.MessageHandler.setScreenLogger(logger);\n\n    InputHandler inputHandler = new FOInputHandler( new File(\nfTempOut.getAbsolutePath() ) );\n\n    XMLReader parser = inputHandler.getParser();\n   \n    Driver driver = new Driver();\n\n    driver.setLogger(logger);\n   \n    driver.setRenderer(Driver.RENDER_PDF);\n    driver.setErrorDump(true);\n\n    driver.setOutputStream( osDest );\n\n    driver.render( parser, inputHandler.getInputSource() );\n\n    /*\n    String args[] = new String[4];\n    args[0] = \"-fo\";\n    args[1] = fTempOut.getAbsolutePath();\n    args[2] = \"-pdf\";\n    args[3] = \"/tmp/test.pdf\";\n    org.apache.fop.apps.Fop.main( args );*/\n  }\n\nError dump:\n\n[INFO] building formatting object tree\n[INFO] [1]\n[INFO] [2]\n[INFO] [3]\n[INFO] [4]\n[INFO] [5]\n[ERROR] svg graphic could not be built: null\njava.lang.NullPointerException\n        at java.net.URL.<init>(URL.java:328)\n        at java.net.URL.<init>(URL.java:253)\n        at java.net.URL.<init>(URL.java:276)\n        at org.apache.batik.util.ParsedURLData.buildURL(Unknown Source)\n        at org.apache.batik.util.ParsedURLData.openStreamInternal(Unknown Source)\n        at org.apache.batik.util.ParsedURLData.openStream(Unknown Source)\n        at org.apache.batik.util.ParsedURL.openStream(Unknown Source)\n        at org.apache.batik.dom.svg.SAXSVGDocumentFactory.createDocument(Unknown\nSource)\n        at org.apache.batik.bridge.DocumentLoader.loadDocument(Unknown Source)\n        at org.apache.batik.bridge.URIResolver.getNode(Unknown Source)\n        at org.apache.batik.bridge.URIResolver.getElement(Unknown Source)\n        at org.apache.batik.bridge.BridgeContext.getReferencedElement(Unknown\nSource)\n        at org.apache.batik.bridge.CSSUtilities.convertClipPath(Unknown Source)\n        at\norg.apache.batik.bridge.AbstractGraphicsNodeBridge.buildGraphicsNode(Unknown Source)\n        ... a lot more exceptions", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 21946, "attachment_id": null, "id": 41697, "time": "2003-07-29T03:16:40Z", "creator": "glenmazza@yahoo.com", "creation_time": "2003-07-29T03:16:40Z", "is_private": false, "text": "Usually best to post to FOP-USER ML first, for guidance, and then submit as a \nbug only when it's apparent the error is with FOP.  That will give you the \nwidest possible help for your issue.  It's certainly possible, but less likely \nFOP is in error, given that the command line option works and what you're \ntrying to do is quite common. \n\nOffhand, your declaration of inputHandler to be of type InputHandler (instead \nof FOInputHandler), may be a problem.  Also, check the examples on the \nhttp://xml.apache.org/fop/embedding.html page, there may be simpler ways of \ndoing what you're trying to accomplish.\n"}, {"attachment_id": null, "tags": [], "bug_id": 21946, "text": "Please upgrade to FOP 0.20.5 and use the Batik version that comes with FOP.", "count": 2, "id": 41709, "time": "2003-07-29T12:28:55Z", "creator": "jeremias@apache.org", "creation_time": "2003-07-29T12:28:55Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 21946, "attachment_id": null, "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "id": 156420, "time": "2012-04-01T13:47:50Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T13:47:50Z", "is_private": false}]