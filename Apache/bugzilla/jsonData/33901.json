[{"count": 0, "tags": [], "bug_id": 33901, "attachment_id": null, "id": 71964, "time": "2005-03-08T13:27:58Z", "creator": "sekiguchi.kaoru@nttcom.co.jp", "creation_time": "2005-03-08T13:27:58Z", "is_private": false, "text": "When I passed the several attibutes as the attrs argument to \nutil_ldap_cache_getuserdn and the first attribute value from a LDAP entry was \nnull, all attribute values weren't cached.\n\nI think that the following codes in util_ldap_cache.c are causes.\nIf node->vals[0] is null, all node->vals[i] aren't copied to cache.\n\nvoid *util_ldap_search_node_copy(util_ald_cache_t *cache, void *c)\n...\n        /* copy vals */\n        if (node->vals) {\n            int k = 0;\n            int i = 0;\n            while (node->vals[k++]);\n            if (!(newnode->vals = util_ald_alloc(cache, sizeof(char *) * \n(k+1)))) {\n                util_ldap_search_node_free(cache, newnode);\n                return NULL;\n            }\n            while (node->vals[i]) {\n                if (!(newnode->vals[i] = util_ald_strdup(cache, node->vals\n[i]))) {\n                    util_ldap_search_node_free(cache, newnode);\n                    return NULL;\n                }\n                i++;\n            }\n        }\n..."}, {"attachment_id": null, "tags": [], "bug_id": 33901, "is_private": false, "count": 1, "id": 72029, "time": "2005-03-09T01:18:07Z", "creator": "bnicholes@apache.org", "creation_time": "2005-03-09T01:18:07Z", "text": "Fixed in 2.1/2.2 version of util_ldap.  The number of attributes is stored \nalong with the values so that the code can rely on an actual count rather than \nterminating at the first NULL value."}, {"count": 2, "tags": [], "creator": "bnicholes@apache.org", "attachment_id": null, "id": 79693, "time": "2005-09-08T23:51:53Z", "bug_id": 33901, "creation_time": "2005-09-08T23:51:53Z", "is_private": false, "text": "*** Bug 36563 has been marked as a duplicate of this bug. ***"}]