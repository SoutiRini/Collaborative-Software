[{"count": 0, "tags": [], "bug_id": 6643, "attachment_id": null, "id": 11097, "time": "2002-02-22T12:00:08Z", "creator": "zorro.desbois@wanadoo.fr", "creation_time": "2002-02-22T12:00:08Z", "is_private": false, "text": "My environment :\n Tomcat 3.3a (or tomcat 3.3.1b1)\n (with apache 1.3.22/mok_jk/ajp13 or with tomcat:8080)\n Java HotSpot(TM) Server VM (build 1.3.1_02-b02, mixed mode)\n Linux 2.4.16 i686\nwith URLRewriting :\n  <SessionId cookiesFirst=\"true\" noCookies=\"true\" /> and netscape 4.77 don't accept cookies\n\nI have error :\nIntrouvabble(404)\nRequ\u00eate originale: /AppliTestServlet/servlet/DisplayArticlesServlet;jsessionid=tsayz1to62 \nRequ\u00eate introuvable: /AppliTestServlet/servlet/DisplayArticlesServlet;jsessionid=tsayz1to62 \n\nlogs =\nAppliTestServlet: [info] [tsayz1to62][SupprimerPanierServlet] doPost\nAppliTestServlet: [debug]  [SupprimerPanierServlet] version dispatcher, suivant=../servlet/DisplayBagListServlet;jsessionid=tsayz1to62\n2002-02-22 12:47:12 - Ctx(/AppliTestServlet) : Class not found: DisplayBagListServlet;jsessionid=tsayz1to62\n2002-02-22 12:47:12 - Ctx(/AppliTestServlet) : Status code:404 request:R( /AppliTestServlet + /servlet/DisplayBagListServlet;jsessionid=tsayz1to62 + \nnull) msg:null\n\nIt occurs when I come from a \nPOST /AppliTestServlet/servlet/SupprimerPanierServlet;jsessionid=tsayz1to62\n\nand, at the end of this servlet, I do :\n  res.setHeader(\"Pragma\",\"No-cache\");\n  res.setHeader(\"Cache-Control\",\"no-cache\");\n  res.setDateHeader(\"Expires\",0);\n// the GET works :\n// log(Logger.LOG_DEBUG,\"version sendRedirect, suivant=\"+fenetreSuivante);\n// res.sendRedirect(fenetreSuivante);\n// the POST fails :\n  log(Logger.LOG_DEBUG,\"version dispatcher, suivant=\"+fenetreSuivante);\n  req.getRequestDispatcher(fenetreSuivante).forward(req,res);\n\n\nI thought it was a bug fixed in tomcat 3.3.1 because the release-notes-3.3.1.txt says :\n\"Fixed logic for response.encodeURL() so that it will work correctly if the input URL includes an anchor tag\"\n\nbut in tomcat 3.3.1b1, it is the same problem!!\n\nthanks.\nYo."}, {"count": 1, "tags": [], "bug_id": 6643, "text": "Section 8.1 of the servlet spec (either 2.2 or 2.3) states that you should \npass a path to getRequestDispatcher, not a URL.  If you don't call \nresponse.encodeURL on \"fenetreSuivante\", everything will work \nfine.  \"DisplayBagListServlet\" will still be able to access the correct \nsession, since the session ID is already stored in the request object.", "id": 11129, "time": "2002-02-25T19:24:24Z", "creator": "william.barker@wilshire.com", "creation_time": "2002-02-25T19:24:24Z", "is_private": false, "attachment_id": null}, {"count": 2, "text": "Yes : Section 8.1 of the servlet spec (either 2.2 or 2.3) states that I should \npass a path to getRequestDispatcher, not a URL.  \nYes : If I don't call response.encodeURL on \"fenetreSuivante\", everything will\nwork fine. \n\nBut Section 7.1.1 of the Servlet Spec (2.2) states that \"The session id must be\nencoded as a path parameter in the resulting URL string. ... URL containing\nencoded path ...\"\n\nThus, I can consider that, an encoded path (containing the session id) is a\n\"particular\" path that can be passed to getRequestDispatcher.\nFurthermore, other Web Application Servers (like Resin for example) consider\nthis parameter as an encoded path and know how to treat it.\nIt is also more simple for a programmer to encode \"fenetreSuivante\" (in my\nexample) without knowing if this  field will be treated by a sendRedirect, a\ngetRequestDispatcher(..).forward or other.\nI Know I am annoying but I consider this as a bug (not corrected).\n\nthanks.\nYo", "creator": "zorro.desbois@wanadoo.fr", "is_private": false, "id": 11572, "time": "2002-03-08T13:25:44Z", "bug_id": 6643, "creation_time": "2002-03-08T13:25:44Z", "tags": [], "attachment_id": null}, {"count": 3, "text": "Created attachment 1324\npatch to \"fix\" this", "bug_id": 6643, "attachment_id": 1324, "id": 11605, "time": "2002-03-09T06:40:46Z", "creator": "william.barker@wilshire.com", "creation_time": "2002-03-09T06:40:46Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 6643, "attachment_id": null, "id": 11606, "time": "2002-03-09T06:54:20Z", "creator": "william.barker@wilshire.com", "creation_time": "2002-03-09T06:54:20Z", "is_private": false, "text": "I'm against relying on container-specific implementations, but I'm not \nannoying. :-)\n\nApplying the attached patch will give you the behavior you want.  I don't plan \nto commit it for the reasons above, but I also won't object if someone else \nfeels that this is useful extension.\n\nAFAIK, your example will fail in Tomcat 4.x (and that group is even harder to \nsell to than me. :-)\n\nFor now, I'm leaving the status unchanged to increase the visiblilty to other \ndevelopers."}, {"count": 5, "tags": [], "bug_id": 6643, "attachment_id": null, "text": "I agree with Bill that getRequestDispatcher() accepts paths within the\nweb application which should not include the \";jsessionid\" URL parameter.\nThis would be inappropriate for the reference inplementation.", "id": 12041, "time": "2002-03-20T03:19:35Z", "creator": "Larry.Isaacs@sas.com", "creation_time": "2002-03-20T03:19:35Z", "is_private": false}]