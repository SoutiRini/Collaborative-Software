[{"count": 0, "tags": [], "creator": "davidmboon@hotmail.com", "attachment_id": null, "is_private": false, "id": 65369, "time": "2004-10-20T17:13:02Z", "bug_id": 31805, "creation_time": "2004-10-20T17:13:02Z", "text": "I have the following task:\n\n  <property name=\"windows.specific\"         value=\"Windows XP, Windows 2000,\nWindows NT\"/>\n  <property name=\"linux.specific\"           value=\"Linux\"/>\n<target name=\"test-os-name\">\n  <echo>${os.name}</echo>\n  <exec dir=\"${basedir}\"\n        os=\"${windows.specific}\"\n        executable=\"ls\">\n    <arg line=\"-ltr\"/>\n  </exec>\n  \n  <exec dir=\"${env.HOME}/khub/build\"\n        os=\"${linux.specific}\"\n        executable=\"ls\">\n    <arg line=\"-ltr\"/>\n  </exec>\n</target>\n\nThe first exec should run on windows, the second should run on linux.  The\nproblem is, in the second exec the directory only exists on linux, not on\nwindows.  However this method checks for the directory before the os: \n\n    public void execute() throws BuildException {\n        File savedDir = dir; // possibly altered in prepareExec\n        cmdl.setExecutable(resolveExecutable(executable, false));\n        checkConfiguration();\n        if (isValidOs()) {\n            try {\n                runExec(prepareExec());\n            } finally {\n                dir = savedDir;\n            }\n        }\n    }\n\nSeems like the checkConfiguration() should be run after the isValidOs()."}, {"count": 1, "tags": [], "text": "I have checked the 1.6.2 version and the same condition exists there as well.", "is_private": false, "bug_id": 31805, "id": 65370, "time": "2004-10-20T17:19:03Z", "creator": "davidmboon@hotmail.com", "creation_time": "2004-10-20T17:19:03Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "peterreilly@apache.org", "text": "Yep, you are correct.\nThe dir check should be after the os check.\nThis is fixed in cvs and will be in the next\nant release.\nThanks for the report.", "id": 65423, "time": "2004-10-21T10:35:16Z", "bug_id": 31805, "creation_time": "2004-10-21T10:35:16Z", "is_private": false, "attachment_id": null}]