[{"count": 0, "tags": [], "bug_id": 55849, "is_private": false, "id": 171586, "attachment_id": 31094, "creator": "sivasankar.manu@gmail.com", "creation_time": "2013-12-05T14:28:34Z", "time": "2013-12-05T14:28:34Z", "text": "Created attachment 31094\nCore analysis and find some out put\n\nHi Team,\n\nWe have Segmentation Fault error since one year in our PROD and Non_Prod environments.\n\nServer version: Apache/2.2.23 (Unix) \nServer built:   Jan 16 2013 17:16:27 \nServer's Module Magic Number: 20051115:31 \nServer loaded:  APR 1.4.6, APR-Util 1.4.1 \nCompiled using: APR 1.4.6, APR-Util 1.4.1 \nArchitecture:   32-bit \nServer MPM:     Worker \n  threaded:     yes (fixed thread count) \n    forked:     yes (variable process count) \n\nErrors:\n\n[Thu Nov 14 02:41:30 2013] [notice] child pid 11702 exit signal Segmentation fault (11), possible coredump in /ufscmsw1/apache \n[Thu Nov 14 02:42:51 2013] [notice] child pid 13294 exit signal Segmentation fault (11), possible coredump in /ufscmsw1/apache \n[Thu Nov 14 02:42:54 2013] [notice] child pid 12880 exit signal Segmentation fault (11), possible coredump in /ufscmsw1/apache \n[Wed Nov 20 02:36:24 2013] [notice] child pid 12494 exit signal Segmentation fault (11), possible coredump in /ufscmsw1/apache \n[Wed Nov 20 02:36:27 2013] [notice] child pid 12496 exit signal Segmentation fault (11), possible coredump in /ufscmsw1/apache \n[Wed Nov 20 02:39:02 2013] [notice] child pid 12493 exit signal Segmentation fault (11), possible coredump in /ufscmsw1/apache \n[Wed Nov 20 02:39:06 2013] [notice] child pid 12495 exit signal Segmentation fault (11), possible coredump in /ufscmsw1/apache \n[Tue Nov 26 07:54:38 2013] [notice] child pid 12701 exit signal Segmentation fault (11), possible coredump in /ufscmsw1/apache"}, {"count": 1, "tags": [], "bug_id": 55849, "is_private": false, "id": 171587, "attachment_id": null, "creator": "trawick@apache.org", "creation_time": "2013-12-05T14:38:13Z", "time": "2013-12-05T14:38:13Z", "text": "Is this ct_* stuff RSA ClearTrust?  If so, report it to them.\n\nThis third-party module passed NULL to fprintf() and crashed.  We can't handle it here.\n\nThread 1 is stuck in read(); it can't segfault.  (I think something that httpd is doing with signals may trigger a common mis-identification of thread 1 by pflags.)"}, {"count": 2, "tags": [], "bug_id": 55849, "is_private": false, "text": "(In reply to Jeff Trawick from comment #1)\n> Is this ct_* stuff RSA ClearTrust?  If so, report it to them.\n> \n> This third-party module passed NULL to fprintf() and crashed.  We can't\n> handle it here.\n> \n> Thread 1 is stuck in read(); it can't segfault.  (I think something that\n> httpd is doing with signals may trigger a common mis-identification of\n> thread 1 by pflags.)\n\nHi Jeff,\n\nIn such case, in the same server but with different user and application having the same problem.\nBelow are the findings;\n\nSTEP1:\n\nRun pflags and look for signals that caused a crash. Here I found a SIGSEGV signal.\n\nbash-3.2$ pflags core\ncore 'core' of 24067:   /dinftksw/apache2/bin/httpd -f /dinftksw/apache2/conf/httpd.conf\n        data model = _ILP32  flags = MSACCT|MSFORK\n /1:    flags = 0\n        sigmask = 0xffffbefc,0x0000ffff  cursig = SIGSEGV\n\nWe have only one thread and crash occured in thread number 1\n\nSTEP2:\nDo pstack and look for the thread one. I got below out put for thread one\n\nbash-3.2$ pstack core\ncore 'core' of 24067:   /dinftksw/apache2/bin/httpd -f /dinftksw/apache2/conf/httpd.conf\n fee013f0 fprintf  (0, fe955128, fe9c6148, a1010, fe7ffe04, 7ffffffe) + 24\n fe7fd8b4 ct_uprint_private (4, ffbfd5f8, 1, 1, ff00, ff0000) + 210\n fe7fda64 ct_debug_uprintln (fe93d150, 1e14, 35b, fe93d4d0, 0, 0) + 24\n fe78f39c ct_child_process_init (19d7b0, 10cf70, 2, 0, 10cf70, 192aa8) + 70\n 00043680 ap_run_child_init (19d7b0, 10cf70, 0, feaa8, 0, 103228) + 40\n 000adeec child_main (0, acc6c, 0, 0, feea79a0, fed12a00) + 7c\n 000ae2c0 make_child (f7000, 0, 1, fa000, f6400, f9c00) + 128\n 000aeaf0 ap_mpm_run (fe5c00a8, 9, 0, 10, 1, 32) + 740\n 00030784 main     (104a80, f4800, f7000, f7000, 102a78, 0) + 774\n 0002fb40 _start   (0, 0, 0, 0, 0, 0) + 5c\n\nThe function fprintf is causing the crash. It is located in memory address fee013f0.\n\n\nSTEP3:\n\nDo the pmap and search for that near for that address\nbash-3.2$ pmap core >pmap.txt\n\nbash-3.2$ ls -lrt pmap.txt\n-rw-r-----   1 dinftksw dinftk      5357 Dec  4 12:26 pmap.txt\n\nbash-3.2$ grep -i \"fee\" pmap.txt\nFEE90000       8K r-x--  /lib/libc.so.1\nFEEA2000      40K rwx--  /lib/libc.so.1\nFEEAC000       8K rwx--  /lib/libc.so.1\nFEEB0000     576K r-x--  /lib/libnsl.so.1\n\n\nPlease help me to know right contact details if it is not the right place to discuss above issue", "id": 171593, "time": "2013-12-05T17:48:12Z", "creator": "sivasankar.manu@gmail.com", "creation_time": "2013-12-05T17:48:12Z", "attachment_id": null}, {"count": 3, "tags": [], "text": ">The function fprintf is causing the crash. It is located in memory address fee013f0.\n\nTo be more accurate: The caller of fprintf is causing the crash by passing an invalid FILE pointer (0).\n\nSo look in the pmap output to see what shared library contains fe7fd8b4.\n\n>Please help me to know right contact details if it is not the right place to discuss above issue\n\nIf it is some third-party module, which I think it is, you'd need to contact the provider of it.", "attachment_id": null, "bug_id": 55849, "id": 171594, "time": "2013-12-05T18:13:10Z", "creator": "trawick@apache.org", "creation_time": "2013-12-05T18:13:10Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 55849, "is_private": false, "id": 171596, "attachment_id": 31096, "creator": "sivasankar.manu@gmail.com", "creation_time": "2013-12-05T18:34:33Z", "time": "2013-12-05T18:34:33Z", "text": "Created attachment 31096\npmap output file"}, {"count": 5, "tags": [], "creator": "sivasankar.manu@gmail.com", "attachment_id": null, "id": 171597, "time": "2013-12-05T18:40:47Z", "bug_id": 55849, "creation_time": "2013-12-05T18:40:47Z", "is_private": false, "text": "(In reply to Siva from comment #4)\n> Created attachment 31096 [details]\n> pmap output file\n\n=====================\n\n).So look in the pmap output to see what shared library contains fe7fd8b4.\n\nPlease find the attached pmap complete output and suggest me if anything need to do\n\n2).If it is some third-party module, which I think it is, you'd need to contact the provider of it.\n\nHow to find is it third party tool or not. Please help me"}, {"count": 6, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "id": 171599, "time": "2013-12-05T18:52:54Z", "bug_id": 55849, "creation_time": "2013-12-05T18:52:54Z", "is_private": false, "text": "The module in question is /dinftksw/apache2/lib/libct_apache22_agent.so -- RSA Access Manager Agents.\n.\nYour enterprise has presumably licensed that from RSA.  They need to be contacted about this crash.\n.\nFWIW, you also are using the WLS plugin from Oracle (/dinftksw/apache2/modules/mod_wl_22.so), but it doesn't seem to be related to the problem.\n.\nSomething else interesting: /dinftksw/apache2/lib/isso_wax_apache2.2.4_solaris10.so; I have no idea what that is.\n.\nThat's all I can help with.  Find somebody at your company that is the liason with RSA."}, {"count": 7, "tags": [], "creator": "sivasankar.manu@gmail.com", "attachment_id": null, "id": 171601, "time": "2013-12-05T19:14:12Z", "bug_id": 55849, "creation_time": "2013-12-05T19:14:12Z", "is_private": false, "text": "(In reply to Jeff Trawick from comment #6)\n> The module in question is /dinftksw/apache2/lib/libct_apache22_agent.so --\n> RSA Access Manager Agents.\n> .\n> Your enterprise has presumably licensed that from RSA.  They need to be\n> contacted about this crash.\n> .\n> FWIW, you also are using the WLS plugin from Oracle\n> (/dinftksw/apache2/modules/mod_wl_22.so), but it doesn't seem to be related\n> to the problem.\n> .\n> Something else interesting:\n> /dinftksw/apache2/lib/isso_wax_apache2.2.4_solaris10.so; I have no idea what\n> that is.\n> .\n> That's all I can help with.  Find somebody at your company that is the\n> liason with RSA.\n\n=========\n\nHi Jeff,\n\nBut we are using same setup in SIT/LT/UAT environments. There we don't have any issue."}, {"count": 8, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "id": 171602, "time": "2013-12-05T19:17:50Z", "bug_id": 55849, "creation_time": "2013-12-05T19:17:50Z", "is_private": false, "text": ">But we are using same setup in SIT/LT/UAT environments. There we don't have any issue.\n\nThat's not an uncommon scenario unfortunately; possibly that information will be of use to the third-party module vendor.\n\nIf you have further questions about this issue, please bring it up on the user support mailing list."}, {"count": 9, "tags": [], "creator": "sivasankar.manu@gmail.com", "text": "(In reply to Jeff Trawick from comment #8)\n> >But we are using same setup in SIT/LT/UAT environments. There we don't have any issue.\n\nThat's not an uncommon scenario unfortunately; possibly that information will be of use to the third-party module vendor.\n\nIf you have further questions about this issue, please bring it up on the user support mailing list.\n\n==========\n\nCould you please let us know the \"user support mailing list\". I am new for this site.", "id": 171604, "time": "2013-12-06T05:46:08Z", "bug_id": 55849, "creation_time": "2013-12-06T05:46:08Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "creator": "mike.rumph@oracle.com", "text": "Hello Siva,\n\nYou can find information on the Apache user mailing list at the following link:\n\n- http://httpd.apache.org/userslist.html \n\nThanks,\n\nMike Rumph", "id": 171611, "time": "2013-12-06T14:56:42Z", "bug_id": 55849, "creation_time": "2013-12-06T14:56:42Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "creator": "sivasankar.manu@gmail.com", "attachment_id": null, "id": 174066, "time": "2014-03-25T09:34:41Z", "bug_id": 55849, "creation_time": "2014-03-25T09:34:41Z", "is_private": false, "text": "Hi Jeff,\n\nExcellent....As you suggested we went to third party and given these output to them then they said, current using WAX and Agent files are old and need to replace with latest files and we have done the same.\n\nSince three months we didn't see the error and we are promoting the same to PROD.\n\nThank you very very veryyyyyyy muchhhhhhhhhh........:):)"}, {"count": 12, "tags": [], "bug_id": 55849, "is_private": false, "text": "I'm so glad you resolved it.\n\nAs a bookkeeping matter, I'm changing this back to INVALID since an httpd code fix or documentation change was not required to resolve your issue.", "id": 174075, "time": "2014-03-25T18:29:10Z", "creator": "trawick@apache.org", "creation_time": "2014-03-25T18:29:10Z", "attachment_id": null}]