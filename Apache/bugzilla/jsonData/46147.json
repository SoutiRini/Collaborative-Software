[{"count": 0, "tags": [], "bug_id": 46147, "is_private": false, "text": "When <condition><or>...</or></condition> contains more than two tests, the condition is set when all tests individually return false.\n\nThis was exposed when installing Metro 1.4.\n\n<project name=\"test\" default=\"x\" basedir=\".\">\n\n    <!-- Check if we are running JAVA SE 6 update release 3 or older -->\n    <condition property=\"jdk6\">\n        <or>\n            <contains string=\"${java.version}\" substring=\"1.6.0_1\"/>\n            <contains string=\"${java.version}\" substring=\"1.6.0_2\"/>\n            <contains string=\"${java.version}\" substring=\"1.6.0_03\"/>\n        </or>\n    </condition>\n\n    <target name=\"jdk6-message\" if=\"jdk6\">\n        <echo message=\"NOTE: Metro is being installed using JDK6.\"/>\n        <echo/>\n    </target>\n\n  <target name=\"x\" depends=\"jdk6-message\">\n      <echo>java.version = ${java.version}</echo>\n      <echo>ant.version = ${ant.version}</echo>\n  </target>\n\n</project>\n\nThe above file output is:\n\nBuildfile: build.xml\n\njdk6-message:\n     [echo] NOTE: Metro is being installed using JDK6.\n     [echo]\n\nx:\n     [echo] java.version = 1.6.0_10\n     [echo] ant.version = Apache Ant version 1.7.1 compiled on June 27 2008\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds\n\nThat is, the condition jdk6 is true. Note that the java.version is 1.6.0_10.\n\nIf the condition is changed by removing out one of the three active \"contains\" tests, the result is:\n\n\nBuildfile: build.xml\n\njdk6-message:\n\nx:\n     [echo] java.version = 1.6.0_10\n     [echo] ant.version = Apache Ant version 1.7.1 compiled on June 27 2008\n\nBUILD SUCCESSFUL\nTotal time: 0 seconds\n\nThe condition also seems to be sensitive to the presence of comments within the <or/>.", "id": 122191, "time": "2008-11-04T15:28:07Z", "creator": "lists@pbw.id.au", "creation_time": "2008-11-04T15:28:07Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "id": 122192, "time": "2008-11-04T16:01:39Z", "bug_id": 46147, "creation_time": "2008-11-04T16:01:39Z", "is_private": false, "text": "I can't reproduce this.  I am running with JDK 1.5 so all tests individually return false for me."}, {"count": 2, "tags": [], "bug_id": 46147, "is_private": false, "text": "\"1.6.0_1\" (your first condition) is a substring of \"1.6.0_10\" so you'd expect\nit to return true.", "id": 122195, "time": "2008-11-04T21:13:30Z", "creator": "bodewig@apache.org", "creation_time": "2008-11-04T21:13:30Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 46147, "attachment_id": null, "is_private": false, "id": 122199, "time": "2008-11-05T00:58:37Z", "creator": "lists@pbw.id.au", "creation_time": "2008-11-05T00:58:37Z", "text": "Pretty obvious really. Sorry about that."}]