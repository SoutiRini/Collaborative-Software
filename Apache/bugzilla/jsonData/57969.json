[{"count": 0, "tags": [], "bug_id": 57969, "is_private": false, "id": 183173, "attachment_id": null, "creator": "peter_kovac11@hotmail.com", "creation_time": "2015-05-28T20:58:49Z", "time": "2015-05-28T20:58:49Z", "text": "Under high load, given a @ServerEndpoint like\n\n\n@ServerEndpoint(value=\"/websocket/{key}\", configurator=MyConfigurator.class)\npublic class ExecutionMonitoringEndpoint{\n...\n@OnMessage\npublic void onMessage(@PathParam(\"key\") String key, String payload) {\n   ...\n}\n}\n//where MyConfigurator is used to only inject a custom property like ServerEndpointConfig.conf.getUserProperties().put(...);\n\nwe noticed that the captured PathParam (\"key\" in this case) was sometimes mixed up with another concurrent request - causing double subscriptions in our pub/sub application.\n\n\nChanging the above to\n\n@ServerEndpoint(value=\"/websocket/{key}\", configurator=MyConfigurator.class)\npublic class ExecutionMonitoringEndpoint{\n...\n@OnMessage\npublic void onMessage(Session session, String payload) {\n  String key = session.getPathParameters().get(\"key\");\n}\n}\n\nfixed the problem."}, {"count": 1, "tags": [], "bug_id": 57969, "text": "Created attachment 32794\nPatch proposal\n\nHi,\n\nI succeeded to reproduce the issue.\nI'm attaching a patch proposal.\n\nRegards,\nVioleta", "id": 183325, "time": "2015-06-04T14:34:37Z", "creator": "violetagg@apache.org", "creation_time": "2015-06-04T14:34:37Z", "is_private": false, "attachment_id": 32794}, {"count": 2, "tags": [], "bug_id": 57969, "text": "Hi,\n\nThis is fixed in trunk, in 8.0.x for 8.0.24 and in 7.0.x for 7.0.63 onwards.\n\nRegards,\nVioleta", "id": 183361, "attachment_id": null, "creator": "violetagg@apache.org", "creation_time": "2015-06-08T14:30:40Z", "time": "2015-06-08T14:30:40Z", "is_private": false}, {"count": 3, "tags": [], "creator": "violetagg@apache.org", "attachment_id": null, "text": "*** Bug 58059 has been marked as a duplicate of this bug. ***", "id": 183655, "time": "2015-06-20T04:30:46Z", "bug_id": 57969, "creation_time": "2015-06-20T04:30:46Z", "is_private": false}]