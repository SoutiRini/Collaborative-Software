[{"count": 0, "tags": [], "text": "We are using an Ant script to apply SQL scripts to a database.  This is done using the core <sql> task within a macro passing the script as a parameter, ie\n\n<sql driver=\"oracle.jdbc.driver.OracleDriver\" url=\"@{url}\" userid=\"@{user}\" password=\"@{password}\" classpathref=\"database.drivers\" >\n                                <transaction src=\"@{script}\" />\n                        </sql>\n\nA controlling shell script calls several Ant targets (each with a new instance of Ant).  We have reproduced the problem just calling Ant several times from the shell.\n\nThe first call works fine but subsequent calls report\n\nBUILD FAILED\n.../build.xml:106: The following error occurred while executing this line:\n.../build.xml:29: java.sql.SQLException: IO Error: Connection reset\n\nAfter some delay (several minutes) running the same script works fine.\n\nThis does not seem related to the content of the SQL script - even simple select statements show this problem.\n\nWe have recently updated to use the newer Oracle ojdbc5.jar reverting back to the ojdbc14.jar fixes the problem.\n\nWe are using Ant 1.7.1 (but have reproduced the problem with 1.8.1)\n\nRunning on an Ubuntu server:\n2.6.24-28-generic #1 SMP Wed Nov 24 09:30:14 UTC 2010 i686 GNU/Linux\n\nJava version:\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_16-b02)\n\nThe Oracle ojdbc5.jar reports its version as:\nOracle 11.2.0.2.0 JDBC 3.0 compiled with JDK5 on Sat_Aug_14_12:16:40_PDT_2010\n\nThe Oracle ojdbc14.jar fails to report its version - ie there is no manifest in that jar file.", "is_private": false, "id": 142770, "creator": "keith@octavia-scot.co.uk", "time": "2010-12-16T07:34:53Z", "bug_id": 50484, "creation_time": "2010-12-16T07:34:53Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 50484, "attachment_id": null, "is_private": false, "id": 148684, "time": "2011-08-18T13:19:58Z", "creator": "oafanasiev@gmail.com", "creation_time": "2011-08-18T13:19:58Z", "text": "We experienced the same problem when upgrading oracle drivers from 10.x to 11.2.0.2.\n\nIssue could be resolved by adding -Djava.security.egd=file:///dev/urandom to jvm system properties by doing\nexport ANT_OPTS=\"-Djava.security.egd=file:///dev/urandom\"\nprior to running ant.\n\nIt is not specific to ant, but to jdbc driver which is now using /dev/random which doesn't have enough entropy on servers.\nMore info could be found in:\nhttps://forums.oracle.com/forums/thread.jspa?messageID=3793101\nhttp://www.usn-it.de/index.php/2009/02/20/oracle-11g-jdbc-driver-hangs-blocked-by-devrandom-entropy-pool-empty/"}]