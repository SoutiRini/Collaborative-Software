[{"attachment_id": null, "tags": [], "creator": "August.heinsen@jpmorgan.com", "text": "Hello, for anyone attempting to reproduce this issue. I have done a base installation of ANT 1.7.0 on a virtual desktop. ANT_HOME and JAVA_HOME are both set to their respective homes, and my path variable includes them as well with the bin location. \n\n\nSo I have not made any custom changes to the build.xml, ant.bat, etc. \n\nFrom the command line, I have inputted these two types of options:\n\nant \n\nant -version\n\nthis is the output:\n\nUnrecognized option: -dant.home=C:\\ANT\\1.7.0\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n\nERROR: The file is either empty or does not contain the valid choices.\n\nMicrosoft Windows [Version 6.1.7601]\nCopyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\nC:\\Windows\\SysWOW64>ant\nUnrecognized option: -dant.home=C:\\ANT\\1.7.0\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n\nERROR: The file is either empty or does not contain the valid choices.\n\n\nJust for an indicator, here is my java version so that you may see my JRE.\n\n\nC:\\Windows\\SysWOW64>java -version\njava version \"1.6.0_31-rev\"\nJava(TM) SE Runtime Environment (build 1.6.0_31-rev-b23)\nJava HotSpot(TM) Client VM (build 20.6-b02, mixed mode)\n\n\nAnd to restate everything, I just installed the version of Ant that was available to me for my virtual desktop. Any help is greatly appreciated!", "count": 0, "id": 176388, "time": "2014-07-14T17:33:47Z", "bug_id": 56720, "creation_time": "2014-07-14T17:33:47Z", "is_private": false}, {"count": 1, "tags": [], "text": "The -d needs to be an upper-case -D.\n\nCan you confirm that the distributed ant.bat contains such an error?", "is_private": false, "bug_id": 56720, "id": 176392, "time": "2014-07-14T23:18:17Z", "creator": "cduffy@apache.org", "creation_time": "2014-07-14T23:18:17Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "cduffy@apache.org", "attachment_id": null, "text": "I've looked at the relevant source tree, and the ant.bat in upstream correctly uses a capital -D -- and has since that line was last changed in 2006. I'd strongly suggest checking whether you might have any local wrappers with a higher precedence in PATH than the upstream-provided one.", "id": 176393, "time": "2014-07-14T23:28:28Z", "bug_id": 56720, "creation_time": "2014-07-14T23:28:28Z", "is_private": false}, {"count": 3, "tags": [], "creator": "August.heinsen@jpmorgan.com", "attachment_id": null, "is_private": false, "id": 176402, "time": "2014-07-15T13:15:36Z", "bug_id": 56720, "creation_time": "2014-07-15T13:15:36Z", "text": "(In reply to Charles Duffy from comment #2)\n> I've looked at the relevant source tree, and the ant.bat in upstream\n> correctly uses a capital -D -- and has since that line was last changed in\n> 2006. I'd strongly suggest checking whether you might have any local\n> wrappers with a higher precedence in PATH than the upstream-provided one.\n\nHi Charles, when I do this check this is the PATH provided by an echo :\n\n\nMicrosoft Windows [Version 6.1.7601]\nCopyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\nC:\\Windows\\SysWOW64>echo %PATH%\nC:\\Program Files (x86)\\Attachmate\\Reflection\\;C:\\Windows\\system32;C:\\Windows;C:\\\nWindows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Fil\nes (x86)\\Citrix\\ICAService\\;C:\\Program Files (x86)\\Citrix\\System32\\;C:\\Program F\niles\\Symantec\\Workspace Virtualization\\;C:\\Program Files (x86)\\Windows Kits\\8.0\\\nWindows Performance Toolkit\\;C:\\Program Files\\Symantec\\Workspace Virtualization\\\n;C:\\ANT\\1.7.0\\bin;C:\\Program Files (x86)\\apache-maven-3.0.3\\bin\\;C:\\Program File\ns (x86)\\Java\\jdk1.7.0_04\\bin\n\nC:\\Windows\\SysWOW64>\n\nI'd like to reply to comment #1 as well from you. I looked into it and it appears that you could be right, I changed all encounters of -dant.home to -Dant.home which was 4 lines in the batch file. It does still reproduce the error however.\n\nI'm not sure though of the local wrappers containing a higher precedence in PATH, I believe that ANT is seen by my OS though. Is this what you were asking? Hopefully that helps with the error checking. Also, I can echo out the ant.bat to see where it is going wrong and add that in my initial post if that might help anyone else who may reach this issue."}, {"attachment_id": null, "tags": [], "creator": "jan@materne.de", "text": "What if you change your path to a minimum?\n\nset ANT_HOME=???\nset JAVA_HOME=???\nset PATH=%ANT_HOME%\\bin;%JAVA_HOME%\\bin", "count": 4, "id": 176409, "time": "2014-07-15T20:49:27Z", "bug_id": 56720, "creation_time": "2014-07-15T20:49:27Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "german.gonzalez@gmail.com", "text": "Certainly, still you have \"-dant.home=C:\\ANT\\1.7.0\" in the execution of it.\n\nif you test:\n\nc:\\where ant\n\nwhat do you get ?\n\n\nThe best would be to set the last idea about cleaning up on the environment variables.", "count": 5, "id": 176938, "time": "2014-08-05T21:35:27Z", "bug_id": 56720, "creation_time": "2014-08-05T21:35:27Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 56720, "text": "Seems to an invalid user environment.\nNo reaction from the user since last suggestion.", "id": 182297, "time": "2015-04-10T07:06:44Z", "creator": "jan@materne.de", "creation_time": "2015-04-10T07:06:44Z", "is_private": false, "attachment_id": null}]