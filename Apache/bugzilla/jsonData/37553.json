[{"count": 0, "attachment_id": null, "bug_id": 37553, "is_private": false, "id": 82637, "time": "2005-11-18T06:38:56Z", "creator": "chrisd@apache.org", "creation_time": "2005-11-18T06:38:56Z", "tags": [], "text": "The (soon to be) attached two patches for mod_dbd.c and mod_dbd.h\nimplement the following:\n\n- convert expiry/time-to-live values to seconds\n\n- make DBDKeep accept On and Off flag values\n\n- add *_set flags to svr_cfg so that, for example, if the main server\n  config specifies a non-default value, then a virtual host can\n  override it\n  - using the COND_PARAM(nmin, DEFAULT_NMIN) method would mean that\n    a virtual host with an explicit setting of DEFAULT_NMIN via a\n    DBDMin directive would be overridden by the main server's\n    configuration; see mod_cache for example I cribbed from\n\n- create a private memory pool for use by the reslist so that\n  threads using the reslist via ap_dbd_acquire, etc. don't conflict\n  with the owner of the pool (i.e., the pool passed in ap_run_child_init\n  to dbd_setup)\n\n- create a private memory pool for each ap_dbd_t, primarily so that\n  prepared statements will be cleaned up when the connection is\n  closed (otherwise they linger until the reslist or s->process->pool\n  is destroyed, as do any cleanup callbacks registered in the\n  apr_dbd_prepare driver code)\n\n- wrap dbd_setup in separate logic for the init and retry cases\n  - for the retry case, where init failed, create a thread mutex\n    to serialize competing retries by multiple ap_dbd_open calls\n\n- adds status values to log messages where possible\n\n- prevent params being dumped to the log file when unable to connect\n  to DB since this string may contain a DB password"}, {"count": 1, "tags": [], "creator": "chrisd@apache.org", "text": "Created attachment 16992\npatch for modules/database/mod_dbd.c", "id": 82638, "attachment_id": 16992, "bug_id": 37553, "creation_time": "2005-11-18T06:39:36Z", "time": "2005-11-18T06:39:36Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 37553, "is_private": false, "id": 82639, "creation_time": "2005-11-18T06:39:55Z", "time": "2005-11-18T06:39:55Z", "creator": "chrisd@apache.org", "text": "Created attachment 16993\npatch for modules/database/mod_dbd.h", "attachment_id": 16993}, {"count": 3, "tags": [], "bug_id": 37553, "is_private": false, "text": "Fixed in trunk; hopefully getting some review there. \nhttp://svn.apache.org/viewcvs?rev=348026&view=rev ", "id": 82718, "time": "2005-11-22T00:50:08Z", "creator": "nick@webthing.com", "creation_time": "2005-11-22T00:50:08Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 37553, "is_private": false, "id": 92064, "creation_time": "2006-08-08T21:55:31Z", "time": "2006-08-08T21:55:31Z", "creator": "nick@webthing.com", "text": "Was fixed in 2.2.2.", "attachment_id": null}]