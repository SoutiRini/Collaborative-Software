[{"attachment_id": null, "tags": [], "bug_id": 26051, "text": "According to the SRV.7.5 in the Servlet spec v2.4:\n\"The session invalidation will not take effect until all servlets using that\nsession have exited the service method.\"\n\nTomcat doesn't try to ensure this in any way.\n\nTo reproduce, use a servlet with session-timeout 1 and put the following code to\nthe service method:\n\nHttpSession session = request.getSession();\nThread.sleep(120);\nsession.getLastAccessedTime(); // InvalidStateException gets thrown", "count": 0, "id": 50384, "time": "2004-01-12T07:42:40Z", "creator": "jarno.peltoniemi@uta.fi", "creation_time": "2004-01-12T07:42:40Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 50397, "time": "2004-01-12T10:12:49Z", "bug_id": 26051, "creation_time": "2004-01-12T10:12:49Z", "is_private": false, "text": "Indeed. As I don't see how to implement this (trying to keep a state flag would\nbe a nightmare, and there's no real way to know the state since it is\nmultithreaded), this will not be fixed. Session expiration was calculated wrong,\nand this was fixed. This could help a lot for this case."}, {"count": 2, "tags": [], "bug_id": 26051, "text": "I should assume we will find a way to fix this, somehow.", "id": 50402, "time": "2004-01-12T13:10:47Z", "creator": "remm@apache.org", "creation_time": "2004-01-12T13:10:47Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 26051, "text": ".", "id": 50886, "time": "2004-01-21T15:46:26Z", "creator": "remm@apache.org", "creation_time": "2004-01-21T15:46:26Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 26051, "is_private": false, "count": 4, "id": 50888, "time": "2004-01-21T15:48:33Z", "creator": "remm@apache.org", "creation_time": "2004-01-21T15:48:33Z", "text": "I have attempted to fix this, using the algorithm you suggested. It could cause\nregressions, so it might be reverted. For now, this should be fixed in the CVS code."}, {"count": 5, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "*** Bug 26324 has been marked as a duplicate of this bug. ***", "id": 50915, "time": "2004-01-21T21:34:56Z", "bug_id": 26051, "creation_time": "2004-01-21T21:34:56Z", "is_private": false}]