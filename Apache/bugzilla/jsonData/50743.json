[{"count": 0, "tags": [], "bug_id": 50743, "attachment_id": 26627, "id": 144092, "time": "2011-02-09T05:43:49Z", "creator": "oliver@puppycrawl.com", "creation_time": "2011-02-09T05:43:49Z", "is_private": false, "text": "Created attachment 26627\nPatch to enable caching\n\nCheckstyle supports caching files that have successfully passed with no errors, so that these files are not processed again on subsequent invocations of Checkstyle until the files are modified again. As the output below shows, this speeds up the Checkstyle from 51 seconds to 15 seconds.\n\nThe attached patch, based on trunk, adds support for caching Checkstyle results. The cache files are stored in the ${tomcat.output} directory, so are removed whenever an \"ant clean\" is performed.\n\nYou could get more sophisticated and store the cache files outside of the ${tomcat.output} directory to save history across \"ant clean\" invocations. In this case, you then need to make the build logic smarter to invalidate the cache files if any of the Checkstyle configuration files change. Let me know if you are interested in a patch to do this.\n\n=======================================================\noliver@oliver-laptop tomcat-trunk]$ ant -q validate\n     [echo] Testing  for /tmp/tomcat/checkstyle-5.1/checkstyle-all-5.1.jar\n[checkstyle] /home/oliver/play/tomcat-trunk/java/org/apache/catalina/tribes/group/ExtendedRpcCallback.java:21:8: Unused import - org.apache.catalina.tribes.ErrorHandler.\n\nBUILD FAILED\n/home/oliver/play/tomcat-trunk/build.xml:430: Got 1 errors and 0 warnings.\n\nTotal time: 55 seconds\n[oliver@oliver-laptop tomcat-trunk]$ ant -q validate\n     [echo] Testing  for /tmp/tomcat/checkstyle-5.1/checkstyle-all-5.1.jar\n[checkstyle] /home/oliver/play/tomcat-trunk/java/org/apache/catalina/tribes/group/ExtendedRpcCallback.java:21:8: Unused import - org.apache.catalina.tribes.ErrorHandler.\n\nBUILD FAILED\n/home/oliver/play/tomcat-trunk/build.xml:430: Got 1 errors and 0 warnings.\n\nTotal time: 15 seconds"}, {"text": "Thanks for the patch. I applied a slightly modified version to 7.0.x which will ship with 7.0.9 onwards.\n\nI'm happy with a clean clearing out the cache - I think that makes sense.", "tags": [], "creator": "markt@apache.org", "is_private": false, "count": 1, "id": 144412, "time": "2011-02-18T11:53:52Z", "bug_id": 50743, "creation_time": "2011-02-18T11:53:52Z", "attachment_id": null}]