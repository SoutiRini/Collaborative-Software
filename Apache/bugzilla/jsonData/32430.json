[{"count": 0, "tags": [], "creator": "mac@donnell.com", "attachment_id": null, "is_private": false, "id": 67573, "time": "2004-11-29T20:57:41Z", "bug_id": 32430, "creation_time": "2004-11-29T20:57:41Z", "text": "In addition to bug 32429, there are other issues I found with the CGI servlet.  \nThere was a type-o in sending the content to the process, a problem with \nprinting debug output, and a problem processing large content.  The large \ncontent issue is the big one.\n\nThe problem is the existing 4.1.31 code is this:\n     int lenRead = stdin.read(content);\nwhen it should be in some sort of read loop to ensure all the data is read.  \n\nI don't know if fix I did to the  toString() and blanksToString() is valid, but \nI was repeatedly getting:\njava.lang.ClassCastException\n        at dsi.app.tomcat.DCGIServlet$CGIEnvironment.toString\n(DCGIServlet.java:1241)\n        at dsi.app.tomcat.DCGIServlet.doGet(DCGIServlet.java:596)\n        at dsi.app.tomcat.DCGIServlet.doPost(DCGIServlet.java:544)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n...\n\nAttached is the file I made to fix the issues we were having.  It is based on \nthe 4.1.31 source code and a diff with tell what changes I made.  The 5.0.28 \nsource looks similar to the 4.1 source and so will have the problem as well."}, {"count": 1, "tags": [], "bug_id": 32430, "text": "Created attachment 13584\nA working CGI servlet class\n\nDon't know what type of file a \"patch\" file is supposed to be, but this the fix\nfor the large file issue we were having.", "id": 67574, "time": "2004-11-29T21:01:33Z", "creator": "mac@donnell.com", "creation_time": "2004-11-29T21:01:33Z", "is_private": false, "attachment_id": 13584}, {"count": 2, "tags": [], "bug_id": 32430, "text": "Patches are supposed to be in diff -u format, not the whole file.  For this and \nother information, please read \nhttp://www.apache.org/dev/contributors.html#patches.", "id": 67576, "time": "2004-11-29T21:04:07Z", "creator": "yoavs@computer.org", "creation_time": "2004-11-29T21:04:07Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Everything but the toString() issue has been fixed as a result of fixing other \nbugs. Fix for this has been applied to 4.1.x and 5.5.x\n\nThe root cause of the cast exception is at line 1710 (for CVS revision 1.31 in \nTC4.1.x) where the content length is added as an integer rather than as a \nstring. I have fixed the root cause rather than apply your toString() changes.\n\nThanks again for your CGI bug reports. If you find any more, let us know.", "id": 67597, "time": "2004-11-29T23:57:23Z", "bug_id": 32430, "creation_time": "2004-11-29T23:57:23Z", "attachment_id": null}]