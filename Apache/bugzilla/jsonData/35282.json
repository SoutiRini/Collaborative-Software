[{"count": 0, "tags": [], "text": "On a W2003 server with IIS 6.0, we used JBOSS 3.2.5 for our application.\nWe try to use the AJP connector. So we get the dll isapi_redirect-1.2.13.dll \nand the howto document.\n\nSo, i create an ISAPI filter called jakarta on IIS Web Site. I create a virtual \ndirectory called jakarta. I create a virtual directory called CCS on my \napplication.war under JBOSS.\n\nI create file uriworkermap.properties:\n/CCS/*.jsp=titi\n\nI create file workers.properties:\nworkers.tomcat_home=c:/xxx/jboss-3.2.5/server/CCS/deploy/jbossweb-tomcat50.sar\nworkers.java_home=c:/j2sdk1.4.2_04\nps=\\\nworker.list=titi\nworker.titi.port=8009\nworker.titi.host=localhost\nworker.titi.type=ajp13\nworker.ajp13.lbfactor=1\n\nI update the registry database:\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Apache Software Foundation\\Jakarta Isapi \nRedirector\\1.0]\n\"extension_uri\"=\"/jakarta/isapi_redirect-1.2.13.dll\"\n\"log_file\"=\"C:\\\\xxx\\\\jboss-3.2.5\\\\server\\\\CCS\\\\log\\\\isapi.log\"\n\"log_level\"=\"debug\"\n\"worker_file\"=\"C:\\\\xxx\\\\jboss-3.2.5\\\\server\\\\CCS\\\\deploy\\\\jbossweb-\ntomcat50.sar\\\\META-INF\\\\workers.properties\"\n\"worker_mount_file\"=\"C:\\\\xxx\\\\jboss-3.2.3\\\\server\\\\CCS\\\\deploy\\\\jbossweb-\ntomcat50.sar\\\\META-INF\\\\uriworkermap.properties\"\n\nI restart IIS. My filter ISAPI is green.\nI start JBOSS.\nI fail to connect to http://localhost/CCS/User/Login.jsp.\nIn my isapi.log file, i have:\n\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] jk_shm_open::jk_shm.c (91): \nInitialized shared memory size=66560 free=65536 addr=0x13a9310\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] init_jk::jk_isapi_plugin.c \n(1132): Using registry.\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] init_jk::jk_isapi_plugin.c \n(1135): Using log file C:\\AccessCommerce\\CCS42\\jboss-3.2.5\n\\server\\CCS\\log\\isapi.log.\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] init_jk::jk_isapi_plugin.c \n(1136): Using log level 1.\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] init_jk::jk_isapi_plugin.c \n(1137): Using extension uri .\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] init_jk::jk_isapi_plugin.c \n(1138): Using worker file C:\\AccessCommerce\\CCS42\\jboss-3.2.5\n\\server\\CCS\\deploy\\jbossweb-tomcat50.sar\\workers.properties.\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] init_jk::jk_isapi_plugin.c \n(1139): Using worker mount file C:\\AccessCommerce\\CCS42\\jboss-3.2.5\n\\server\\CCS\\deploy\\jbossweb-tomcat50.sar\\uriworkermap.properties.\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] init_jk::jk_isapi_plugin.c \n(1141): Using uri select 0.\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nuri_worker_map_add::jk_uri_worker_map.c (260): wildchar rule /CCS/*=titi was \nadded\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] build_worker_map::jk_worker.c \n(236): creating worker titi\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] wc_create_worker::jk_worker.c \n(141): about to create instance titi of ajp13\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] wc_create_worker::jk_worker.c \n(154): about to validate and init titi\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_validate::jk_ajp_common.c \n(1794): worker titi contact is 'localhost:8009'\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1883): setting socket keepalive to 0\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1922): setting socket timeout to -1\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1926): setting socket buffer size to 0\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1930): setting connection recycle timeout to 0\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1934): setting cache timeout to 0\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1938): setting connect timeout to 0\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1942): setting reply timeout to 0\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1946): setting prepost timeout to 0\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1950): setting recovery opts to 0\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] ajp_init::jk_ajp_common.c \n(1954): setting number of retries to 3\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \najp_create_endpoint_cache::jk_ajp_common.c (1831): setting connection cache \nsize to 10\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] build_worker_map::jk_worker.c \n(248): removing old titi worker\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nHttpFilterProc::jk_isapi_plugin.c (696): Detected IIS >= 5.0\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nHttpFilterProc::jk_isapi_plugin.c (747): Filter started\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nHttpFilterProc::jk_isapi_plugin.c (813): Virtual Host redirection \nof /127.0.0.1/CCS/\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nmap_uri_to_worker::jk_uri_worker_map.c (442): Attempting to map \nURI '/127.0.0.1/CCS/' from 1 maps\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nmap_uri_to_worker::jk_uri_worker_map.c (454): Attempting to map context \nURI '/CCS/*'\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nHttpFilterProc::jk_isapi_plugin.c (820): Default redirection of /CCS/\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nmap_uri_to_worker::jk_uri_worker_map.c (442): Attempting to map URI '/CCS/' \nfrom 1 maps\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nmap_uri_to_worker::jk_uri_worker_map.c (454): Attempting to map context \nURI '/CCS/*'\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nmap_uri_to_worker::jk_uri_worker_map.c (468): Found a wildchar match titi -\n> /CCS/*\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nHttpFilterProc::jk_isapi_plugin.c (830): check if [/CCS/] is points to the web-\ninf directory\n[Thu Jun 09 10:04:32 2005] [2408:2416] [debug] \nHttpFilterProc::jk_isapi_plugin.c (848): [/CCS/] is a servlet url - should \nredirect to titi\n\nWhat can i do?", "is_private": false, "id": 76200, "creator": "calonso@access-commerce.com", "time": "2005-06-09T11:32:33Z", "bug_id": 35282, "creation_time": "2005-06-09T11:32:33Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Please try the mailing list as users@tomcat.apache.org for support questions\nlike this.  It's not clear that this is a Tomcat bug, much less a reproducible one.", "attachment_id": null, "id": 81189, "creator": "yoavs@computer.org", "time": "2005-10-16T07:23:08Z", "bug_id": 35282, "creation_time": "2005-10-16T07:23:08Z", "is_private": false}]