[{"count": 0, "tags": [], "bug_id": 37565, "is_private": false, "text": "To reproduce (on WinXP SP2 Professional, IIS 5.1)\n\n1. Install isapi_redirect.dll 1.2.15 from the MSI installer.\n2. In the registry, change the log level to debug.\n3. Restart IIS through Windows Services applet. (Worldwide Web Publishing \nService)\n4. isapi_redirect.dll shows up as ISAPI Filter in IIS Manager Console.\n5. For the very first request, invoke http://locahost/jsp-examples/. The page\n   loads, and only the \"execute.gif\" image. (On some tries, none of the images \nwill load. The only successful request is the page itself.\n6. No further requests will work. In the IIS Manager Console, however, it \nstill shows isapi_redirect.dll loaded and up as an ISAPI filter. The log shows \nthat after the initial request, close_workers is called. The last lines of the \nlog file look like this:\n\n[0428:1684] [debug] jk_ajp_common.c (2074): recycling connection cache slot=0 \nfor worker ajp13w\n[0428:1684] [debug] jk_isapi_plugin.c (1031): service() returned OK\n[0428:0492] [debug] jk_worker.c (212): close_workers will destroy worker wlb\n[0428:0492] [debug] jk_ajp_common.c (2012): up to 10 endpoints to close\n[0428:0492] [debug] jk_ajp_common.c (723): closed socket with sd = 2292\n[0428:0492] [debug] jk_worker.c (212): close_workers will destroy worker \njkstatus\n\nAnd any further request will fail, and no more activity is seen in the log. \nThe response headers are this:\n\nHTTP/1.1 404 Object Not Found\nServer: Microsoft-IIS/5.1\nDate: Sat, 19 Nov 2005 20:38:42 GMT\nConnection: close\nContent-Length: 4040\nContent-Type: text/html", "id": 82682, "time": "2005-11-19T21:42:49Z", "creator": "dglasser@pobox.com", "creation_time": "2005-11-19T21:42:49Z", "attachment_id": null}, {"count": 1, "attachment_id": 16997, "bug_id": 37565, "is_private": false, "id": 82683, "time": "2005-11-19T21:44:45Z", "creator": "dglasser@pobox.com", "creation_time": "2005-11-19T21:44:45Z", "tags": [], "text": "Created attachment 16997\nLog file for bug \n\nI stopped IIS, deleted the existing log file, restarted IIS and then recreated\nthe bug as per the report. The attached file is the entire log."}, {"count": 2, "tags": [], "text": "From googling, it's apparent to me now that the call to close_workers is \nnormal. Anyway, I look in the Windows Event log, and under System events, at \nthe same time that my isapi_redirect dies, I see this error message:\n\nThe HTTP server encountered an unhandled exception while processing the ISAPI \nApplication '\nntdll!RtlpWaitForCriticalSection + 0x5B\nntdll!RtlEnterCriticalSection + 0x46\ninetinfo + 0x7F\n'. \n", "attachment_id": null, "id": 82687, "creator": "dglasser@pobox.com", "time": "2005-11-19T22:19:44Z", "bug_id": 37565, "creation_time": "2005-11-19T22:19:44Z", "is_private": false}, {"count": 3, "tags": [], "text": "I'm going to close this as invalid. I think the problem was due to my IIS \ninstall being hosed. I tried going back to 1.2.14 and experienced the same \nproblems. Then, I couldn't even get the localstart.asp page to work. I \nreinstalled IIS and then installed 1.2.15, and it seems to be working fine for \nthe moment.", "attachment_id": null, "id": 82688, "creator": "dglasser@pobox.com", "time": "2005-11-20T05:31:21Z", "bug_id": 37565, "creation_time": "2005-11-20T05:31:21Z", "is_private": false}]