[{"count": 0, "tags": [], "creator": "alexs@w-m.ru", "text": "I needed to obtain a list of the host names those served by our several Apaches.\nI found the option -S which reports the ServerNames but that was not enough for\nme since the most important information in the most cases was listed in the\nServerAlias directive. So I added to http_vhost.c the function dump_aliases()\nwhich dumps all aliases for the given server to the given file. Probably it\nshould be useful for other people using -S option. Changes made by me is pretty\nsimple and strightforward. The patch is following. It is applied cleanly at\nleast on 1.3.27 and 1.3.28.\n\n--- src/main/http_vhost.c.old\tThu Sep  4 19:47:46 2003\n+++ src/main/http_vhost.c\tThu Sep  4 18:28:33 2003\n@@ -410,6 +410,30 @@\n     return NULL;\n }\n \n+static void dump_aliases(FILE *f, server_rec *s)\n+{\n+    int i;\n+    array_header *names;\n+\n+    /* search all the aliases from ServerAlias directive */\n+    names = s->names;\n+    if (names) {\n+\tchar **name = (char **) names->elts;\n+\tfor (i = 0; i < names->nelts; ++i) {\n+\t    if(!name[i]) continue;\n+\t    fprintf(f, \"%-22s alias %s\\n\", \">\", name[i]);\n+\t}\n+    }\n+    names = s->wild_names;\n+    if (names) {\n+\tchar **name = (char **) names->elts;\n+\tfor (i = 0; i < names->nelts; ++i) {\n+\t    if(!name[i]) continue;\n+\t    fprintf(f, \"%-22s wildalias %s\\n\", \">\", name[i]);\n+\t}\n+    }\n+}\n+\n static void dump_a_vhost(FILE *f, ipaddr_chain *ic)\n {\n     name_chain *nc;\n@@ -452,6 +476,7 @@\n \t}\n \tfprintf(f, \"namevhost %s (%s:%u)\\n\", nc->server->server_hostname,\n \t\tnc->server->defn_name, nc->server->defn_line_number);\n+\tdump_aliases(f, nc->server);\n     }\n }", "id": 43725, "time": "2003-09-04T16:11:24Z", "bug_id": 22936, "creation_time": "2003-09-04T16:11:24Z", "is_private": false, "attachment_id": null}, {"count": 1, "text": "I'm going through the bug db to make sure patches are findable.  Please see \nhttp://httpd.apache.org/dev/patches.html\n", "creator": "trawick@apache.org", "attachment_id": null, "id": 47841, "time": "2003-11-21T18:20:11Z", "bug_id": 22936, "creation_time": "2003-11-21T18:20:11Z", "tags": [], "is_private": false}]