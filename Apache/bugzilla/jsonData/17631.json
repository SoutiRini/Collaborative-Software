[{"count": 0, "tags": [], "creator": "kees@uvt.nl", "text": "Anytime I tried to use basic authentication, whether it be from .htaccess or \nfrom global configuration files, apache aborts the child process. Error \nmessages show up in the global error log, rather than in the specific virtual \nhost error log and typically look like:\n\n[Tue Mar 04 09:23:20 2003] [notice] child pid 32161 exit signal Segmentation \nfault (11)\n[Tue Mar 04 09:23:20 2003] [notice] child pid 32156 exit signal Segmentation \nfault (11)\n\nEach request results in two lines in the error log. The problem happens with \nall version 2 apaches, with or without the php module loaded. An strace of the \nthe child processes shows that the process terminates at exactly same time, \nevery time. If so desired, I'll send the entire strace output. Here are the few \nlast lines:\n\n# strace -p 32157\n\n[ deleted ]\n\nopen(\"/var/www/error/include/spacer.html\", O_RDONLY) = 16\nlseek(16, 0, SEEK_SET)                  = 0\nread(16, \"</dd></dl><dl><dd>\\n\", 19)    = 19\n--- SIGSEGV (Segmentation fault) ---", "id": 32391, "time": "2003-03-04T08:20:55Z", "bug_id": 17631, "creation_time": "2003-03-04T08:20:55Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "trawick@apache.org", "text": "What would be helpful would be a backtrace from the segfault.\n\nIf this is Linux 2.4 kernel, you'll probably need to start Apache as non-root in\norder to get coredumps.  With a coredump, do this\n\n  gdb /path/to/httpd /path/to/core\n  (gdb) where\n   [save this output]\n\nIf that isn't easy, attach to a child with gdb, and when gdb sees the SIGSEGV do\n\"where\" to get a backtrace.\n\n  gdb /path/to/httpd processid\n  (gdb) cont\n  [wait for SIGSEGV]\n  (gdb) where\n  [save this output]\n", "id": 33017, "time": "2003-03-12T10:30:22Z", "bug_id": 17631, "creation_time": "2003-03-12T10:30:22Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "kees@uvt.nl", "attachment_id": null, "id": 33019, "time": "2003-03-12T11:08:54Z", "bug_id": 17631, "creation_time": "2003-03-12T11:08:54Z", "is_private": false, "text": "As requested by Jeff, I attached to the first child of the running httpd since \nI could not get it to dump core. Here is the requested output:\n\n[ removed many other load&read symbols lines ]\n\nLoaded symbols for /usr/lib/php4/mysql.so\nReading symbols from /usr/lib/mysql/libmysqlclient.so.10...done.\nLoaded symbols for /usr/lib/mysql/libmysqlclient.so.10\n0x420daa02 in accept () from /lib/i686/libc.so.6\n(gdb) cont\nContinuing.\n\nProgram received signal SIGSEGV, Segmentation fault.\n[Switching to Thread 8192 (LWP 5009)]\n0x4207c145 in strcasecmp () from /lib/i686/libc.so.6\n(gdb) where\n#0  0x4207c145 in strcasecmp () from /lib/i686/libc.so.6\n#1  0x40220ae5 in overlap_hash () from /usr/lib/libapr.so.0\n#2  0x40220df3 in apr_table_overlap () from /usr/lib/libapr.so.0\n#3  0x0807db5e in ap_add_common_vars ()\n#4  0x403228f1 in __pthread_handles () from /etc/httpd/modules/libphp4.so\n#5  0x0807169c in ap_pass_brigade ()\n#6  0x40760cf7 in send_parsed_content () from /etc/httpd/modules/mod_include.so\n#7  0x40761a80 in includes_filter () from /etc/httpd/modules/mod_include.so\n#8  0x0807169c in ap_pass_brigade ()\n#9  0x08078e47 in default_handler ()\n#10 0x08065bf5 in ap_run_handler ()\n#11 0x0806620d in ap_invoke_handler ()\n#12 0x0807d53a in ap_run_sub_req ()\n#13 0x4075e11e in handle_include () from /etc/httpd/modules/mod_include.so\n#14 0x407610bb in send_parsed_content () from /etc/httpd/modules/mod_include.so\n#15 0x40761a80 in includes_filter () from /etc/httpd/modules/mod_include.so\n#16 0x0807169c in ap_pass_brigade ()\n#17 0x407cb4e9 in handle_map_file () from /etc/httpd/modules/mod_negotiation.so\n#18 0x08065bf5 in ap_run_handler ()\n#19 0x0806620d in ap_invoke_handler ()\n#20 0x08062f31 in ap_internal_redirect ()\n#21 0x080629ac in ap_process_request ()\n#22 0x0805e0ac in ap_process_http_connection ()\n#23 0x0806f0d5 in ap_run_process_connection ()\n#24 0x08064238 in child_main ()\n#25 0x08064394 in make_child ()\n#26 0x080644b6 in startup_children ()\n#27 0x08064cdf in ap_mpm_run ()\n#28 0x0806ac5f in main ()\n#29 0x420158d4 in __libc_start_main () from /lib/i686/libc.so.6\n(gdb) The program is running.  Quit anyway (and detach it)? (y or n) y\nDetaching from program: /usr/sbin/httpd, process 5009\n\nThank you!\n\nKees"}, {"count": 3, "tags": [], "creator": "farukokcu@yahoo.com", "text": "I figured out that this only happens if you let .html files to be interpreted by\nPHP in php.conf file. If you leave php.conf file unchanged or say the extension\n.phtml, this issue disappers and auth works fine. May help to fix the bug.", "id": 35077, "time": "2003-04-13T08:53:01Z", "bug_id": 17631, "creation_time": "2003-04-13T08:53:01Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "trawick@apache.org", "text": "Please try to recreate this with recent Apache (e.g, 2.0.48) and newer PHP and\nre-open the PR if it still occurs.\n", "id": 47037, "time": "2003-11-08T11:45:28Z", "bug_id": 17631, "creation_time": "2003-11-08T11:45:28Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "erik@codefaktor.de", "text": "No further response from reporter.", "id": 48836, "time": "2003-12-10T17:41:55Z", "bug_id": 17631, "creation_time": "2003-12-10T17:41:55Z", "is_private": false, "attachment_id": null}]