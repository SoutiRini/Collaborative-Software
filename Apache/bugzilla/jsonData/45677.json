[{"count": 0, "tags": [], "text": "When trying to apply different certificates through SSLCACertificateFile under different <Location> directives in ssl.conf, apache2 applies the last of the <Location>-directives instead of the one actually matching.\nIn the example below the last certificate, certificate3, is always served to the browser, if any of the above <Location>-directives match. Thus entering \nhttp://my.domain.se/path1 will prompt you with certificate3, as will http://my.domain.se/path2, and of course the last url will also give the third cirtificate. LocationMatch and tons of different matching patterns has been tested without any luck. LocationMatch is showing the exact same behaviour.\n\nssl.conf:\nLoadModule ssl_module modules/mod_ssl.so\nListen 443\nAddType application/x-x509-ca-cert .crt\nAddType application/x-pkcs7-crl    .crl\nSSLPassPhraseDialog  builtin\nSSLSessionCache         shmcb:/var/cache/mod_ssl/scache(512000)\nSSLSessionCacheTimeout  300\nSSLMutex default\nSSLRandomSeed startup file:/dev/urandom  256\nSSLRandomSeed connect builtin\nSSLCryptoDevice builtin\n\n<VirtualHost _default_:443>\nServerName my.domain.se:443\nJkMount /* loadbalancer\n\nSSLCertificateFile /etc/pki/tls/certs/my_domain_se_VeriSign_Class_Extended_Validation_SSL_SGC_CA.pem\nSSLCACertificateFile /etc/pki/tls/certs/intermediate.crt\n\n<LocationMatch /path1>\n        SSLVerifyClient require\n        SSLVerifyDepth 2\n        SSLCACertificateFile /etc/pki/tls/certs/certificate1.cer\n</LocationMatch>\n\n<LocationMatch /path2>\n        SSLVerifyClient require\n        SSLVerifyDepth 1\n        SSLCACertificateFile /etc/pki/tls/certs/certificate2.cer\n</LocationMatch>\n\n<LocationMatch /path/that/should/not/match>\n        SSLVerifyClient require\n        SSLVerifyDepth 2\n        SSLCACertificateFile /etc/pki/tls/certs/certificate3.cer\n</LocationMatch>\n\n#... log stuff here\n\n</VirtualHost>", "is_private": false, "bug_id": 45677, "id": 120044, "time": "2008-08-23T04:53:42Z", "creator": "etirk@hotmail.com", "creation_time": "2008-08-23T04:53:42Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Please note SSLCACertificate file is documented as working in server config or virtual host.  The fact that it doesn't throw a syntax error in <Location> is incidental; it doesn't mean it's valid there.\n\nI'll leave this report open to nudge myself or anyone else who has the spare time to make your configuration throw a syntax error.", "is_private": false, "bug_id": 45677, "id": 120047, "time": "2008-08-23T06:55:52Z", "creator": "nick@webthing.com", "creation_time": "2008-08-23T06:55:52Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "That was done in r757380, as it happens.", "is_private": false, "bug_id": 45677, "id": 128192, "time": "2009-06-23T07:43:44Z", "creator": "jorton@redhat.com", "creation_time": "2009-06-23T07:43:44Z", "attachment_id": null}]