[{"count": 0, "tags": [], "creator": "nlv11370@natlab.research.philips.com", "is_private": false, "id": 72474, "attachment_id": null, "bug_id": 34030, "creation_time": "2005-03-16T09:49:44Z", "time": "2005-03-16T09:49:44Z", "text": "When I view the following code in the batik squiggle viewer and click the\nrectangle the viewer hangs and consumes a lot of processing power.\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<svg id=\"svgdoc\" xmlns=\"http://www.w3.org/2000/svg\"\nxmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<script type=\"text/ecmascript\">\n<![CDATA[\nfunction testFunction()\n{\n\tvar testObj = document.getElementById(\"test\");\n\tvar newElem = document.createElement(\"text\");\n\tnewElem.appendChild(document.createTextNode(\"tester\"));\n\ttestObj.appendChild(testObj);\n}\n]]>\n</script>\n<rect x=\"30\" y=\"30\" width=\"40\" height=\"40\" onclick=\"testFunction()\" />\n<g id=\"test\">\n\t<text x=\"10\" y=\"10\" id=\"test3\">test2</text>\n</g>\n</svg>\n\nThe method where the browser hangs on is appendChild. I suspect that it has\nsomething to do with the org.apache.batik.css.engine because somethimes I get\nthe following message at my java console (when I keep the DOM viewer open).\n\nat org.apache.batik.css.engine.CSSEngine.getComputedStyle(Unknown Source\n\nHope someone can help me with this problem.\n\nGreetings,\nGertjan"}, {"count": 1, "tags": [], "creator": "nlv11370@natlab.research.philips.com", "is_private": false, "id": 72475, "attachment_id": null, "bug_id": 34030, "creation_time": "2005-03-16T09:58:27Z", "time": "2005-03-16T09:58:27Z", "text": "I saw I made a mistake in the example. The following is what I intended to do\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<svg id=\"svgdoc\" xmlns=\"http://www.w3.org/2000/svg\"\nxmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<script type=\"text/ecmascript\">\n<![CDATA[\nfunction testFunction()\n{\n\tvar testObj = document.getElementById(\"test\");\n\tvar newElem = document.createElement(\"text\");\n\tnewElem.setAttribute(\"x\",\"150\");\n\tnewElem.setAttribute(\"Y\",\"150\");\n\tnewElem.setAttribute(\"fill\",\"black\");\n\tnewElem.appendChild(document.createTextNode(\"tester\"));\n\ttestObj.appendChild(newElem);\n}\n]]>\n</script>\n<rect x=\"30\" y=\"30\" width=\"40\" height=\"40\" onclick=\"testFunction()\" />\n<g id=\"test\">\n\t<text x=\"10\" y=\"10\" id=\"test3\">test2</text>\n</g>\n</svg>\n\nNow the problem is that the element that I add is not shown in the SVG viewer.\nIt is however shown in the DOM viewer. Nothing hangs in this example, but\nsomething should happen right?\n\nGreetings,\nGertjan"}, {"count": 2, "tags": [], "creator": "nlv11370@natlab.research.philips.com", "attachment_id": null, "is_private": false, "id": 72483, "time": "2005-03-16T14:41:29Z", "bug_id": 34030, "creation_time": "2005-03-16T14:41:29Z", "text": "Seems like batik only supports dom level 2 and not dom level 1..... The\nfollowing example works\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<svg id=\"svgdoc\" xmlns=\"http://www.w3.org/2000/svg\"\nxmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<script type=\"text/ecmascript\">\n<![CDATA[\nfunction testFunction()\n{\n\tvar testObj = document.getElementById(\"test\");\n\tvar newElem = document.createElementNS(\"http://www.w3.org/2000/svg\",\"text\");\n\tnewElem.appendChild(document.createTextNode(\"tester\"));\n\tnewElem.setAttributeNS(null,\"x\",\"150\");\n\tnewElem.setAttributeNS(null,\"y\",\"150\");\n\ttestObj.appendChild(newElem);\t\n}\n]]>\n</script>\n<rect x=\"30\" y=\"30\" width=\"40\" height=\"40\" onclick=\"testFunction()\" />\n<g id=\"test\">\n\t<text x=\"10\" y=\"10\" id=\"test3\">test2</text>\n</g>\n</svg>"}, {"count": 3, "tags": [], "creator": "deweese@apache.org", "is_private": false, "id": 72541, "attachment_id": null, "bug_id": 34030, "creation_time": "2005-03-17T02:48:38Z", "time": "2005-03-17T02:48:38Z", "text": "Correct SVG is a namespace aware language (e.g. xlink:href).\nIt doesn't make sense to use DOM 1 with SVG."}]