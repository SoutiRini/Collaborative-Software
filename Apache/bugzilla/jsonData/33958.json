[{"count": 0, "tags": [], "bug_id": 33958, "attachment_id": null, "text": "When ant compilers are used under eclipse, the loading of the eclipse compiler\n(org.eclipse.jdt.core.JDTCompilerAdapter) fails. The problem comes from the\nclassloader used to load the class.  The loading is done by the method \norg.apache.tools.ant.taskdefs.compilers.CompilerAdapterFactory.resolveClassName(String).\nThe used classloader is the System classloader. Below you will found the patch\nof the class. My patch try to use the classloader of the current class instead\nof the system classloader.\n\n\n--- CompilerAdapterFactory.java.orig    2005-03-11 10:35:44.000000000 +0100\n+++ CompilerAdapterFactory.java 2005-03-11 10:38:50.000000000 +0100\n@@ -162,7 +162,13 @@\n     private static CompilerAdapter resolveClassName(String className)\n         throws BuildException {\n         try {\n-            Class c = Class.forName(className);\n+            ClassLoader cl = CompilerAdapterFactory.class.getClassLoader();\n+            Class c;\n+            if (cl != null) {\n+                c = cl.loadClass(className);\n+            } else {\n+                c = Class.forName(className);\n+            }\n             Object o = c.newInstance();\n             return (CompilerAdapter) o;\n         } catch (ClassNotFoundException cnfe) {", "id": 72188, "time": "2005-03-11T10:53:01Z", "creator": "sebastien.chassandebarrioz@rd.francetelecom.com", "creation_time": "2005-03-11T10:53:01Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 33958, "text": "Created attachment 14464\nthe patch for fixing the bug", "id": 72189, "time": "2005-03-11T10:53:50Z", "creator": "sebastien.chassandebarrioz@rd.francetelecom.com", "creation_time": "2005-03-11T10:53:50Z", "is_private": false, "attachment_id": 14464}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "text": "Does the patch fix your problem?\n\nIf so I'm surprised it does since Class.forName() is supposed to use the \nclassloader that has loaded the class using it.  Your patch shouldn't change\nanything.", "id": 72202, "attachment_id": null, "bug_id": 33958, "creation_time": "2005-03-11T15:57:34Z", "time": "2005-03-11T15:57:34Z", "is_private": false}, {"count": 3, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "is_private": false, "id": 92948, "time": "2006-09-03T16:53:58Z", "bug_id": 33958, "creation_time": "2006-09-03T16:53:58Z", "text": "Marking as fixed since the current code uses\na varient of the patch provided.\n"}]