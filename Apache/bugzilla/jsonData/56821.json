[{"count": 0, "tags": [], "creator": "ricardo.da.silva.ist@gmail.com", "attachment_id": null, "id": 176958, "time": "2014-08-06T16:46:15Z", "bug_id": 56821, "creation_time": "2014-08-06T16:46:15Z", "is_private": false, "text": "Hi, i created a simple test plan plugin, which does:\n\n@Override\npublic SampleResult runTest(JavaSamplerContext context) {\n        try {\n\t\t\tThread.currentThread().sleep(25);\n\t\t} catch (InterruptedException e) {\n\t\t\t// stuff to log\n\t\t}\n\t\t\n\t\tSampleResult sampleResult = new SampleResult();\n\t\tsampleResult.setSampleLabel(Thread.currentThread().getName());\n\t\tsampleResult.setResponseOK(); \n\t\treturn sampleResult;\n\t}\n}\n\n\nVery simple as you see, with Thread Group definitions:\n- Number of threads = 1000;\n- Rump-up-Period = 0;\n- Loop-count = 2;\n\nWhen i run this Test Plan, mostly performs well. As expected in Summary Report i have 2000 samples. But sometimes, i only have 1998 samples and 1 thread that never ends, even if i request Stop Test in Jmeter GUI. When that situation happen i noticed this lines appears in jmeter log:\n\n2014/08/06 17:35:37 INFO  AWT-EventQueue-0     jmeter.gui.action.Start: Stopping test \n2014/08/06 17:35:37 INFO  Thread-7             jmeter.threads.JMeterThread: Stopping: Thread Group 1-834 \n2014/08/06 17:35:37 WARN  Thread-7             jmeter.threads.JMeterThread: Sampler is not Interruptible: Java Request \n2014/08/06 17:35:42 WARN  Thread-7             jmeter.threads.ThreadGroup: Thread won't exit: Thread Group 1-834 \n\n\nI even tried to perform this test using jmeter-server in a linux based OS, with same consequences. I already increased jmeter memory parameters with any sucess and tried the exactly test plan in jmeter 2.10. \n\nAfter all tests i have done, i m forced to concluded that this situation can be some kind of jmeter bug.\n\n\nBest regards,\nRicardo Silva."}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 177018, "time": "2014-08-08T14:39:26Z", "bug_id": 56821, "creation_time": "2014-08-08T14:39:26Z", "is_private": false, "text": "can you try with ramp-up period set to 1?\n\nDoes it hang if you don't stop or only when you stop ?\n\nThanks"}, {"count": 2, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 177329, "time": "2014-08-22T21:43:44Z", "bug_id": 56821, "creation_time": "2014-08-22T21:43:44Z", "is_private": false, "text": "Your issue is due to the following:\n- Java Request is not interruptible\nSo when you call stop, JMeter does nothing for it\nIt then waits 10*Number of still active threads millis\nAnd then checks if threads are stopped\nIf it is still not stopped it issues the warning\n\nLooking at your code, you have a 25 ms sleep which could be running during the stop and may explain your issue.\nBut we would really need more details otherwise we will have to close bug as cannot reproduce."}, {"count": 3, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": 31952, "id": 177447, "time": "2014-08-29T21:05:46Z", "bug_id": 56821, "creation_time": "2014-08-29T21:05:46Z", "is_private": false, "text": "Created attachment 31952\nTest plan showing issue cannot be reproduced"}, {"count": 4, "tags": [], "text": "Attached test plan uses SleepTest which does what you describe, running it many times with your config, I was not able to reproduce.\nClosed issue, feel free to reopen but with more details", "is_private": false, "id": 177448, "creation_time": "2014-08-29T21:37:16Z", "time": "2014-08-29T21:37:16Z", "creator": "p.mouawad@ubik-ingenierie.com", "bug_id": 56821, "attachment_id": null}, {"count": 5, "tags": [], "text": "Tks guys,\n\nwith \"ramp-up period set to 1\" and explanation that \"So when you call stop, JMeter does nothing for it. It then waits 10*Number of still active threads millis. And then checks if threads are stopped\" e adjust my proprieties and timers. \n\nNow performs correctly, tks.", "is_private": false, "bug_id": 56821, "id": 177513, "time": "2014-09-03T14:21:55Z", "creator": "ricardo.da.silva.ist@gmail.com", "creation_time": "2014-09-03T14:21:55Z", "attachment_id": null}]