[{"count": 0, "tags": [], "creator": "t.scholten@kpn-is.nl", "attachment_id": null, "text": "Adding to the headers of the bug;\nApache 2.0.54 was used with mod_jk 1.2.13 on Redhat 9\n\nHi,\n\nOne of our customers uses SSI (mod_include) to include their jsp's\n\neg file index.shtml (located in /web/customer/www)\n<!--#include virtual=\"top.html\"-->\n<!--#include virtual=\"active/news.jsp?${QUERY_STRING}\"-->\n<!--#include virtual=\"bottom.html\"-->\n\nWhat happens is that \"top\" and \"news\" are displayed correctly, but bottom fails\nwith \"[an error occurred while processing this directive]\". If we move the\ninclude of \"bottom.html\" above the jsp line it works (besides from the webpage\nnot displaying as desired :)\n\nThe errorlog contains the following lines after requesting the page from apache;\nFile does not exist: /web/customer/www/active/bottom.html\nunable to include \"bottom.html\" in parsed file /web/customer/www/index.shtml\n\nIf found Bug #34232 mentioning the same, but it was discarded as being apache\nand/or mod_include. I didn't find any references to a new(er) ticket in ASF. The\ncurrent workaround for our customer would be to update their files to 'include\nvirtual=\"../bottom.html\"' or revert back to their original \"exec cgi\" statements\n(which worked, but we agreed with them upon that being deprecated).\n\nFor some reason the \"include virtual\" (or include file which causes the same)\nthat executes the 'jsp' sets the current working directory to \"active\" instead\nof going 'back' to the directory where index.shtml was parsed from.\n\nAny suggestions or options are welcome,\n\nTom", "id": 78350, "time": "2005-08-10T15:25:07Z", "bug_id": 36121, "creation_time": "2005-08-10T15:25:07Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 36121, "text": "Also reported Bug #36191 to Apache/mod_include but the conclusion was it wasn't\nmod_include. Can anyone help us with this issue?\n\nTom", "id": 78572, "time": "2005-08-17T14:25:18Z", "creator": "t.scholten@kpn-is.nl", "creation_time": "2005-08-17T14:25:18Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 80239, "attachment_id": null, "bug_id": 36121, "creation_time": "2005-09-21T01:01:15Z", "time": "2005-09-21T01:01:15Z", "text": "I have replicated this problem with Apache 2.0.54 and JK 1.2.14 with the latest\nversions (from SVN/CVS) of both TC4 and TC5.\n\nIt looks like the problem is in the native JK code but I am afraid I don't know\nwhere to start looking. I am moving this issue to TC5 since that is the current\nfocus of development."}, {"count": 3, "tags": [], "text": "I don't have a fix for this yet (I'm not going to delve into JK for something\nlike this), but I would always caution against relying on a working directory as\na reference.  It's a bad practice that leads to reduced portability when it\ndoesn't outright fail.", "is_private": false, "id": 81083, "creator": "yoavs@computer.org", "time": "2005-10-13T05:38:56Z", "bug_id": 36121, "creation_time": "2005-10-13T05:38:56Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 36121, "text": "Please post a WAR file we can use to reproduce this issue.", "id": 83103, "time": "2005-12-01T23:00:46Z", "creator": "yoavs@computer.org", "creation_time": "2005-12-01T23:00:46Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 36121, "attachment_id": 18959, "id": 94460, "time": "2006-10-03T20:23:45Z", "creator": "markt@apache.org", "creation_time": "2006-10-03T20:23:45Z", "is_private": false, "text": "Created attachment 18959\nProposed patch\n\nI have been looking into this and have tracked down the root cause and have\nidentified a patch (attached) that fixes the issue. \n\nHowever, I am concerned about possible side-effects particularly with mod_dir.\nI have tested this as far as my mod_jk understanding allows and I don't think\nanything is broken but I would rather someone who knows the mod_jk codebase\nrather better than I reviewed this patch before I commit it."}, {"count": 6, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 96132, "attachment_id": 18959, "bug_id": 36121, "creation_time": "2006-11-23T16:18:14Z", "time": "2006-11-23T16:18:14Z", "text": "Comment on attachment 18959\nProposed patch\n\nI have done some more testing and the patch is bad - it causes some mod_dir\nrequests to fail. I'm working on a new patch."}, {"count": 7, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "I have a new patch which I have tested with mod_dir and this test case and both\nnow work as expected. This fix will be included in the mod_jk 1.2.20 onwards.", "id": 96134, "time": "2006-11-23T17:50:27Z", "bug_id": 36121, "creation_time": "2006-11-23T17:50:27Z", "is_private": false}, {"count": 8, "tags": [], "creator": "rainer.jung@kippdata.de", "is_private": false, "id": 98675, "attachment_id": null, "bug_id": 36121, "creation_time": "2007-01-29T03:51:55Z", "time": "2007-01-29T03:51:55Z", "text": "The patch caused other problems, see\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=41430.\n\nTo find a good solution please participate in the discussion:\n\nhttp://marc.theaimsgroup.com/?l=tomcat-dev&m=117007124924707&w=2"}, {"count": 9, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "This is still fixed in svn so I am marking this as fixed. If the fix for this\ngets reverted, I will re-open this bug.", "id": 107812, "time": "2007-09-06T20:38:56Z", "bug_id": 36121, "creation_time": "2007-09-06T20:38:56Z", "is_private": false}]