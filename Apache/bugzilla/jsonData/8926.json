[{"count": 0, "tags": [], "text": "This is the error message:\n\n===========================================================================\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: 38 in the jsp file: /Orders.jsp\n\nGenerated servlet error:\nC:\\Programmi\\User\\Programming\\Tomcat 4.0\n\\work\\localhost\\mokabook\\Orders$jsp.java:226: Variable 'currentValue' is \nalready defined in this method.\n                              String currentValue = null;\n==========================================================================\n\nThe JSP translator erroneously generates multiple variable definitions, with \nthe same name in the same scope, to store the same value of an implicit \nvariable (defined as a VariableInfo in a TagExtraInfo class), as you can see in \nthe generated Java source if you search for 'currentValue':\n\n=======================================================================\npublic class Orders$jsp extends HttpJspBase {\n\n    // begin [file=\"/Orders.jsp\";from=(8,0);to=(8,54)]\n    // end\n\n    static {\n    }\n    public Orders$jsp( ) {\n    }\n\n    private static boolean _jspx_inited = false;\n\n    public final void _jspx_init() throws \norg.apache.jasper.runtime.JspException {\n    }\n\n    public void _jspService(HttpServletRequest request, HttpServletResponse  \nresponse)\n        throws java.io.IOException, ServletException {\n\n        JspFactory _jspxFactory = null;\n        PageContext pageContext = null;\n        HttpSession session = null;\n        ServletContext application = null;\n        ServletConfig config = null;\n        JspWriter out = null;\n        Object page = this;\n        String  _value = null;\n        try {\n\n            if (_jspx_inited == false) {\n                synchronized (this) {\n                    if (_jspx_inited == false) {\n                        _jspx_init();\n                        _jspx_inited = true;\n                    }\n                }\n            }\n            _jspxFactory = JspFactory.getDefaultFactory();\n            response.setContentType(\"text/html;charset=ISO-8859-1\");\n            pageContext = _jspxFactory.getPageContext(this, request, response,\n            \t\t\t\"\", true, 8192, true);\n\n            application = pageContext.getServletContext();\n            config = pageContext.getServletConfig();\n            session = pageContext.getSession();\n            out = pageContext.getOut();\n\n            // HTML // begin [file=\"/Orders.jsp\";from=(0,74);to=(1,0)]\n                out.write(\"\\r\\n\");\n\n            // end\n            // HTML // begin [file=\"/Orders.jsp\";from=(1,41);to=(8,0)]\n                out.write\n(\"\\r\\n\\r\\n<html>\\r\\n<head>\\r\\n\\t<title>Ordini</title>\\r\\n</head>\\r\\n\\r\\n\");\n\n            // end\n            // begin [file=\"/Orders.jsp\";from=(8,0);to=(8,54)]\n                beans.OrderBook orderBook = null;\n                boolean _jspx_specialorderBook  = false;\n                 synchronized (pageContext) {\n                    orderBook= (beans.OrderBook)\n                    pageContext.getAttribute\n(\"orderBook\",PageContext.PAGE_SCOPE);\n                    if ( orderBook == null ) {\n                        _jspx_specialorderBook = true;\n                        try {\n                            orderBook = (beans.OrderBook) \njava.beans.Beans.instantiate(this.getClass().getClassLoader\n(), \"beans.OrderBook\");\n                        } catch (ClassNotFoundException exc) {\n                             throw new InstantiationException(exc.getMessage());\n                        } catch (Exception exc) {\n                             throw new ServletException (\" Cannot create bean \nof class \"+\"beans.OrderBook\", exc);\n                        }\n                        pageContext.setAttribute(\"orderBook\", orderBook, \nPageContext.PAGE_SCOPE);\n                    }\n                 } \n                if(_jspx_specialorderBook == true) {\n            // end\n            // begin [file=\"/Orders.jsp\";from=(8,0);to=(8,54)]\n                }\n            // end\n            // HTML // begin [file=\"/Orders.jsp\";from=(8,54);to=(10,0)]\n                out.write(\"\\r\\n\\r\\n\");\n\n            // end\n            // begin [file=\"/Orders.jsp\";from=(10,2);to=(21,0)]\n                \n                    Date date = new Date();\n                    Order order = new Order(\"order 1\", date, \"Mario Rossi\");\n                    order.addItem(new OrderItem(\"CD\", 2));\n                    order.addItem(new OrderItem(\"Libri\", 4));\n                    order.addItem(new OrderItem(\"DVD\", 1));\n                    orderBook.add(order);\n                    order = new Order(\"order 2\", date, \"Francesca Verdi\");\n                    order.addItem(new OrderItem(\"CD\", 5));\n                    order.addItem(new OrderItem(\"Libri\", 3));\n                    orderBook.add(order);\n            // end\n            // HTML // begin [file=\"/Orders.jsp\";from=(21,2);to=(27,0)]\n                out.write(\"\\r\\n\\r\\n<body>\\r\\n\\r\\n<h3>Lista degli \nordini:</h3>\\r\\n\\r\\n\");\n\n            // end\n            // begin [file=\"/Orders.jsp\";from=(27,0);to=(27,51)]\n                /* ----  mb:iterate ---- */\n                mbtags.IterateTag _jspx_th_mb_iterate_0 = new mbtags.IterateTag\n();\n                _jspx_th_mb_iterate_0.setPageContext(pageContext);\n                _jspx_th_mb_iterate_0.setParent(null);\n                _jspx_th_mb_iterate_0.setBeanName(\"orderBook\");\n                _jspx_th_mb_iterate_0.setProperty(\"orders\");\n                try {\n                    int _jspx_eval_mb_iterate_0 = \n_jspx_th_mb_iterate_0.doStartTag();\n                    if (_jspx_eval_mb_iterate_0 != \njavax.servlet.jsp.tagext.Tag.SKIP_BODY) {\n                        try {\n                            if (_jspx_eval_mb_iterate_0 != \njavax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {\n                              out = pageContext.pushBody();\n                              _jspx_th_mb_iterate_0.setBodyContent\n((javax.servlet.jsp.tagext.BodyContent) out);\n                              _jspx_th_mb_iterate_0.doInitBody();\n                          }\n                          do {\n                              String currentValue = null;\n                              currentValue = (String) pageContext.findAttribute\n(\"currentValue\");\n                          // end\n                          // HTML // begin [file=\"/Orders.jsp\";from=(27,51);to=\n(29,13)]\n                              out.write(\"\\r\\n    <hr>\\r\\n\\t<b>Ordine N.\");\n\n                          // end\n                          // begin [file=\"/Orders.jsp\";from=(29,13);to=(29,32)]\n                              /* ----  mb:getItemNumber ---- */\n                              mbtags.GetItemNumberTag \n_jspx_th_mb_getItemNumber_0 = new mbtags.GetItemNumberTag();\n                              _jspx_th_mb_getItemNumber_0.setPageContext\n(pageContext);\n                              _jspx_th_mb_getItemNumber_0.setParent\n(_jspx_th_mb_iterate_0);\n                              try {\n                              int _jspx_eval_mb_getItemNumber_0 = \n_jspx_th_mb_getItemNumber_0.doStartTag();\n                              if (_jspx_eval_mb_getItemNumber_0 == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_BUFFERED)\n                              throw new JspTagException(\"Since tag handler \nclass mbtags.GetItemNumberTag does not implement BodyTag, it can't return \nBodyTag.EVAL_BODY_TAG\");\n                          if (_jspx_eval_mb_getItemNumber_0 != \njavax.servlet.jsp.tagext.Tag.SKIP_BODY) {\n                              do {\n                          // end\n                          // begin [file=\"/Orders.jsp\";from=(29,13);to=(29,32)]\n                          } while (_jspx_th_mb_getItemNumber_0.doAfterBody() == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN);\n                      }\n                      if (_jspx_th_mb_getItemNumber_0.doEndTag() == \njavax.servlet.jsp.tagext.Tag.SKIP_PAGE)\n                          return;\n                  } finally {\n                      _jspx_th_mb_getItemNumber_0.release();\n                  }\n              // end\n              // HTML // begin [file=\"/Orders.jsp\";from=(29,32);to=(30,15)]\n                  out.write(\"</b><br>\\r\\n    Data:&nbsp;\");\n\n              // end\n              // begin [file=\"/Orders.jsp\";from=(30,15);to=(30,45)]\n                  /* ----  mb:getValue ---- */\n                  mbtags.GetValueTag _jspx_th_mb_getValue_0 = new \nmbtags.GetValueTag();\n                  _jspx_th_mb_getValue_0.setPageContext(pageContext);\n                  _jspx_th_mb_getValue_0.setParent(_jspx_th_mb_iterate_0);\n                  _jspx_th_mb_getValue_0.setProperty(\"date\");\n                  try {\n                      int _jspx_eval_mb_getValue_0 = \n_jspx_th_mb_getValue_0.doStartTag();\n                      if (_jspx_eval_mb_getValue_0 == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_BUFFERED)\n                          throw new JspTagException(\"Since tag handler class \nmbtags.GetValueTag does not implement BodyTag, it can't return \nBodyTag.EVAL_BODY_TAG\");\n                      if (_jspx_eval_mb_getValue_0 != \njavax.servlet.jsp.tagext.Tag.SKIP_BODY) {\n                          do {\n                          // end\n                          // begin [file=\"/Orders.jsp\";from=(30,15);to=(30,45)]\n                          } while (_jspx_th_mb_getValue_0.doAfterBody() == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN);\n                      }\n                      if (_jspx_th_mb_getValue_0.doEndTag() == \njavax.servlet.jsp.tagext.Tag.SKIP_PAGE)\n                          return;\n                  } finally {\n                      _jspx_th_mb_getValue_0.release();\n                  }\n              // end\n              // HTML // begin [file=\"/Orders.jsp\";from=(30,45);to=(31,18)]\n                  out.write(\"<br>\\r\\n    Cliente:&nbsp;\");\n\n              // end\n              // begin [file=\"/Orders.jsp\";from=(31,18);to=(31,52)]\n                  /* ----  mb:getValue ---- */\n                  mbtags.GetValueTag _jspx_th_mb_getValue_1 = new \nmbtags.GetValueTag();\n                  _jspx_th_mb_getValue_1.setPageContext(pageContext);\n                  _jspx_th_mb_getValue_1.setParent(_jspx_th_mb_iterate_0);\n                  _jspx_th_mb_getValue_1.setProperty(\"customer\");\n                  try {\n                      int _jspx_eval_mb_getValue_1 = \n_jspx_th_mb_getValue_1.doStartTag();\n                      if (_jspx_eval_mb_getValue_1 == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_BUFFERED)\n                          throw new JspTagException(\"Since tag handler class \nmbtags.GetValueTag does not implement BodyTag, it can't return \nBodyTag.EVAL_BODY_TAG\");\n                      if (_jspx_eval_mb_getValue_1 != \njavax.servlet.jsp.tagext.Tag.SKIP_BODY) {\n                          do {\n                          // end\n                          // begin [file=\"/Orders.jsp\";from=(31,18);to=(31,52)]\n                          } while (_jspx_th_mb_getValue_1.doAfterBody() == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN);\n                      }\n                      if (_jspx_th_mb_getValue_1.doEndTag() == \njavax.servlet.jsp.tagext.Tag.SKIP_PAGE)\n                          return;\n                  } finally {\n                      _jspx_th_mb_getValue_1.release();\n                  }\n              // end\n              // HTML // begin [file=\"/Orders.jsp\";from=(31,52);to=(37,4)]\n                  out.write(\"<br>\\r\\n\\t<table border=\\\"0\\\" style=\\\"margin-left: \n20px;\\\">\\r\\n\\t<tr>\\r\\n\\t\\t<th>Prodotto</th>\\r\\n\\t\\t<th>Quantit\u00e0</th>\\r\\n\\t</tr>\n\\r\\n    \");\n\n              // end\n              // begin [file=\"/Orders.jsp\";from=(37,4);to=(37,33)]\n                  /* ----  mb:iterate ---- */\n                  mbtags.IterateTag _jspx_th_mb_iterate_1 = new \nmbtags.IterateTag();\n                  _jspx_th_mb_iterate_1.setPageContext(pageContext);\n                  _jspx_th_mb_iterate_1.setParent(_jspx_th_mb_iterate_0);\n                  _jspx_th_mb_iterate_1.setProperty(\"items\");\n                  try {\n                      int _jspx_eval_mb_iterate_1 = \n_jspx_th_mb_iterate_1.doStartTag();\n                      if (_jspx_eval_mb_iterate_1 != \njavax.servlet.jsp.tagext.Tag.SKIP_BODY) {\n                          try {\n                              if (_jspx_eval_mb_iterate_1 != \njavax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {\n                              out = pageContext.pushBody();\n                              _jspx_th_mb_iterate_1.setBodyContent\n((javax.servlet.jsp.tagext.BodyContent) out);\n                              _jspx_th_mb_iterate_1.doInitBody();\n                          }\n                          do {\n                              String currentValue = null;\n                              currentValue = (String) pageContext.findAttribute\n(\"currentValue\");\n                          // end\n                          // HTML // begin [file=\"/Orders.jsp\";from=(37,33);to=\n(39,12)]\n                              out.write(\"\\r\\n\\t\\t<tr>\\r\\n        <td>\");\n\n                          // end\n                          // begin [file=\"/Orders.jsp\";from=(39,12);to=(39,47)]\n                              /* ----  mb:getValue ---- */\n                              mbtags.GetValueTag _jspx_th_mb_getValue_2 = new \nmbtags.GetValueTag();\n                              _jspx_th_mb_getValue_2.setPageContext\n(pageContext);\n                              _jspx_th_mb_getValue_2.setParent\n(_jspx_th_mb_iterate_1);\n                              _jspx_th_mb_getValue_2.setProperty(\"productId\");\n                              try {\n                              int _jspx_eval_mb_getValue_2 = \n_jspx_th_mb_getValue_2.doStartTag();\n                              if (_jspx_eval_mb_getValue_2 == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_BUFFERED)\n                              throw new JspTagException(\"Since tag handler \nclass mbtags.GetValueTag does not implement BodyTag, it can't return \nBodyTag.EVAL_BODY_TAG\");\n                          if (_jspx_eval_mb_getValue_2 != \njavax.servlet.jsp.tagext.Tag.SKIP_BODY) {\n                              do {\n                          // end\n                          // begin [file=\"/Orders.jsp\";from=(39,12);to=(39,47)]\n                          } while (_jspx_th_mb_getValue_2.doAfterBody() == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN);\n                      }\n                      if (_jspx_th_mb_getValue_2.doEndTag() == \njavax.servlet.jsp.tagext.Tag.SKIP_PAGE)\n                          return;\n                  } finally {\n                      _jspx_th_mb_getValue_2.release();\n                  }\n              // end\n              // HTML // begin [file=\"/Orders.jsp\";from=(39,47);to=(40,12)]\n                  out.write(\"</td>\\r\\n        <td>\");\n\n              // end\n              // begin [file=\"/Orders.jsp\";from=(40,12);to=(40,46)]\n                  /* ----  mb:getValue ---- */\n                  mbtags.GetValueTag _jspx_th_mb_getValue_3 = new \nmbtags.GetValueTag();\n                  _jspx_th_mb_getValue_3.setPageContext(pageContext);\n                  _jspx_th_mb_getValue_3.setParent(_jspx_th_mb_iterate_1);\n                  _jspx_th_mb_getValue_3.setProperty(\"quantity\");\n                  try {\n                      int _jspx_eval_mb_getValue_3 = \n_jspx_th_mb_getValue_3.doStartTag();\n                      if (_jspx_eval_mb_getValue_3 == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_BUFFERED)\n                          throw new JspTagException(\"Since tag handler class \nmbtags.GetValueTag does not implement BodyTag, it can't return \nBodyTag.EVAL_BODY_TAG\");\n                      if (_jspx_eval_mb_getValue_3 != \njavax.servlet.jsp.tagext.Tag.SKIP_BODY) {\n                          do {\n                          // end\n                          // begin [file=\"/Orders.jsp\";from=(40,12);to=(40,46)]\n                          } while (_jspx_th_mb_getValue_3.doAfterBody() == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN);\n                      }\n                      if (_jspx_th_mb_getValue_3.doEndTag() == \njavax.servlet.jsp.tagext.Tag.SKIP_PAGE)\n                          return;\n                  } finally {\n                      _jspx_th_mb_getValue_3.release();\n                  }\n              // end\n              // HTML // begin [file=\"/Orders.jsp\";from=(40,46);to=(42,4)]\n                  out.write(\"</td>\\r\\n\\t\\t</tr>\\r\\n    \");\n\n              // end\n              // begin [file=\"/Orders.jsp\";from=(42,4);to=(42,17)]\n              } while (_jspx_th_mb_iterate_1.doAfterBody() == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN);\n          } finally {\n              if (_jspx_eval_mb_iterate_1 != \njavax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE)\n                  out = pageContext.popBody();\n          }\n      }\n      if (_jspx_th_mb_iterate_1.doEndTag() == \njavax.servlet.jsp.tagext.Tag.SKIP_PAGE)\n          return;\n  } finally {\n      _jspx_th_mb_iterate_1.release();\n  }\n// end\n// HTML // begin [file=\"/Orders.jsp\";from=(42,17);to=(44,0)]\n    out.write(\"\\r\\n\\t</table>\\r\\n\");\n\n// end\n// begin [file=\"/Orders.jsp\";from=(44,0);to=(44,13)]\n} while (_jspx_th_mb_iterate_0.doAfterBody() == \njavax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN);\n} finally {\n    if (_jspx_eval_mb_iterate_0 != \njavax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE)\n        out = pageContext.popBody();\n}\n}\nif (_jspx_th_mb_iterate_0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE)\n    return;\n} finally {\n    _jspx_th_mb_iterate_0.release();\n}\n// end\n// HTML // begin [file=\"/Orders.jsp\";from=(44,13);to=(48,0)]\n    out.write(\"\\r\\n\\r\\n</body>\\r\\n</html>\\r\\n\");\n\n// end\n\n} catch (Throwable t) {\n    if (out != null && out.getBufferSize() != 0)\n        out.clearBuffer();\n    if (pageContext != null) pageContext.handlePageException(t);\n} finally {\n    if (_jspxFactory != null) _jspxFactory.releasePageContext(pageContext);\n}\n}\n}\n==========================================================================", "is_private": false, "id": 15754, "creator": "p.aiello@tiscali.it", "time": "2002-05-09T00:19:27Z", "bug_id": 8926, "creation_time": "2002-05-09T00:19:27Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "kin-man.chung@sun.com", "attachment_id": null, "id": 15756, "time": "2002-05-09T00:38:57Z", "bug_id": 8926, "creation_time": "2002-05-09T00:38:57Z", "is_private": false, "text": "Can you also attach the jsp page (and other files) so that I can reproduce the\nbug?  Just by looking at the generated .java file, I cannot see why there is a\nmultiple definition error, since \"currentValue\" are defined in two different\nscopes, one nested in another.\n"}, {"count": 2, "tags": [], "bug_id": 8926, "text": "Created attachment 1819\nThe JSP page that cannot be compiled", "id": 15779, "time": "2002-05-09T11:04:57Z", "creator": "p.aiello@tiscali.it", "creation_time": "2002-05-09T11:04:57Z", "is_private": false, "attachment_id": 1819}, {"count": 3, "tags": [], "creator": "p.aiello@tiscali.it", "attachment_id": 1820, "id": 15780, "time": "2002-05-09T11:06:28Z", "bug_id": 8926, "creation_time": "2002-05-09T11:06:28Z", "is_private": false, "text": "Created attachment 1820\nThe tag class"}, {"count": 4, "tags": [], "bug_id": 8926, "text": "Created attachment 1821\nThe tag extra info class", "id": 15781, "time": "2002-05-09T11:07:18Z", "creator": "p.aiello@tiscali.it", "creation_time": "2002-05-09T11:07:18Z", "is_private": false, "attachment_id": 1821}, {"count": 5, "tags": [], "creator": "p.aiello@tiscali.it", "attachment_id": 1822, "text": "Created attachment 1822\nThe taglib descriptor", "id": 15782, "time": "2002-05-09T11:08:15Z", "bug_id": 8926, "creation_time": "2002-05-09T11:08:15Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 8926, "text": "Yes, I looked at the code with more attention: there's no duplicate definition, \nthe error should not be generated by the Java compiler.\nThe JSP page is an example of nested use of the \"iterate\" tag. To run the page \nseveral other Java source files are needed. Maybe you could reproduce the error \nwith some changes to the code. If you need the entire set of classes, please \nwrite me again.\nP.S. : I got the same error with Tomcat 3.2.3", "id": 15785, "time": "2002-05-09T11:23:21Z", "creator": "p.aiello@tiscali.it", "creation_time": "2002-05-09T11:23:21Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 8926, "text": "The JSP Attachment didn't seem to work.  Can you please re-attach it?  \nhttp://nagoya.apache.org/bugzilla/showattachment.cgi?attach_id=1819\n\n", "id": 16030, "time": "2002-05-13T20:55:19Z", "creator": "edburns@acm.org", "creation_time": "2002-05-13T20:55:19Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 8926, "is_private": false, "id": 17435, "attachment_id": null, "creator": "pgordon@fourthchannel.com", "creation_time": "2002-06-08T01:59:40Z", "time": "2002-06-08T01:59:40Z", "text": "This is the same bug that I just posted (9699).  I believe, I see that the \ndo...while() loop containing \"currentValue\" also contains another \ndo...while() loop with \"currentValue\" defined--although the code is a little \nhard to follow in this browser window.  This is improper java syntax.  It is a \nproblem with self nested tags.  You can duplicate this example using the \nsimple tag example FooTag, foo.jsp that installs with jakarta by nesting a \n<eg:foo> tag within the existing <eg:foo> tag.  See the other bug (9699) for \na little more detail.  This is critical for us, it blocks development on \nTomcat.  We are trying to port our application to Tomcat from Weblogic 6.  \nBy the way--this bugzilla thing is pretty cool, just used it for the first time \ntoday--and it sure beats Rational clearquest."}, {"count": 9, "tags": [], "bug_id": 8926, "is_private": false, "id": 17760, "attachment_id": null, "creator": "jan.luehe@sun.com", "creation_time": "2002-06-13T23:55:58Z", "time": "2002-06-13T23:55:58Z", "text": "Fixed. See email with subject \"[PATCH] Custom tag scripting variables\" sent to\ntomcat-dev on 12 Jun 2002 for patch.\n\nPatch summary:\n\nAs discussed with Kin-Man, the following patch (for Jasper2)\naddresses two issues related to scripting variables exposed by\ncustom tags (via TagExtraInfo class or TLD):\n\nISSUE 1:\n+++++++\nAccording to the JSP spec, scripting variables with scope AT_BEGIN\nor AT_END are supposed to be visible from the begin element or end\nelement, respectively, of the custom tag that is exposing them, all\nthe way to the *end* of the page. This currently is not the case.\n\nThe attached patch addresses this problem by determining the AT_BEGIN\nand AT_END scripting variables of any custom tag and declaring them as\nlocal variables of the _jspService() method.\n\n\nISSUE 2:\n+++++++\nIf a custom tag exposing scripting variables is nested inside\nitself, its scripting variables get declared multiple times within the\nsame scope of the generated code, resulting in compilation\nerrors. This problem has been filed as bug #8926 (Synopsis: \"Duplicate\nvariable definition in generated Java source, related to custom tag\nscripting variable\").\n\nThe attached patch addresses this problem by declaring AT_BEGIN and\nAT_END scripting variables once (as local variables of the\n_jspService() method, see above), and declaring NESTED scripting\nvariables only at the outermost nesting level of their custom tag,\nwhere \"nesting level\" corresponds the number of times the custom tag is\nnested inside itself.\n\nExample:\n \n  <g:h>\n    <a:b> -- nesting level 0, declares NESTED scripting variables\n      <c:d>\n        <e:f>\n          <a:b> -- nesting level 1, saves scripting variables\n            <a:b> -- nesting level 2, saves scripting variables\n            </a:b> -- restores scripting variables\n          </a:b> -- restores scripting variables\n          <a:b> -- nesting level 1, saves scripting variables\n          </a:b> -- restores scripting variables\n        </e:f>\n      </c:d>\n    </a:b>\n    <a:b> -- nesting level 0, does not declare any NESTED scripting variables\n    </a:b>\n  </g:h>\n\nIf <a:b> exposes any NESTED scripting variables, those variables are\ngoing to be declared only once in the generated code, namely by the\n*first* <a:b> at nesting level 0.\n\nAny <a:b> with a nesting level > 0 saves (in its begin element) the\ncurrent values of all its scripting variables to locale variables (named\nfor the scripting variable and the custom tag's nesting level) before\nsynchronizing the scripting variables as defined by the JSP spec. In\nits end element, the custom tag restores the original values of the\nscripting variables (that is, the values the scripting variables had when\nthe tag's begin element was encountered).\n\n\nIn addition, this patch stores a custom tag's scripting variables with\nthe custom tag itself, so the scripting variables don't need to be\ndetermined over and over again.\nThis has resulted in two new accessor methods for Node.CustomTag:\n\n\tpublic TagVariableInfo[] getTagVariableInfos()\n\tpublic VariableInfo[] getVariableInfos()\n"}, {"count": 10, "tags": [], "bug_id": 8926, "text": "*** Bug 9699 has been marked as a duplicate of this bug. ***", "id": 17951, "time": "2002-06-18T00:27:31Z", "creator": "kin-man.chung@sun.com", "creation_time": "2002-06-18T00:27:31Z", "is_private": false, "attachment_id": null}]