[{"count": 0, "tags": [], "bug_id": 18079, "is_private": false, "id": 33310, "creation_time": "2003-03-17T20:51:26Z", "time": "2003-03-17T20:51:26Z", "creator": "gawix@yahoo.com", "text": "According to online documentation, to de-activate caching of resources, we must\nuse the \"cached\" attribute of <Resources> element (nested in a <Context> element).  \n\n<Context path=\"/mypath\" docBase=\"/usr/local/mylocation\">\n\n  <Resources className=\"org.apache.naming.resources.FileDirContext\"             \n             cached=\"false\"/>\n\n</Context>\n\nThis is incorrect.  The org.apache.catalina.core.StandardContext will set the\ncaching value on the DirContext to the same value specified in the undocumented\n\"cachingAllowed\" attribute of <Context> (which default to true):\n\n(from org/apache/catalina/core/StandardContext.java)\n\n public synchronized void setResources(DirContext resources) {\n\n        if (started) {\n            throw new IllegalStateException\n                (sm.getString(\"standardContext.resources.started\"));\n        }\n\n        DirContext oldResources = this.webappResources;\n        if (oldResources == resources)\n            return;\n\n        if (resources instanceof BaseDirContext) {\n            ((BaseDirContext) resources).setCached(isCachingAllowed());\n        }\n        if (resources instanceof FileDirContext) {\n            filesystemBased = true;\n        }\n        this.webappResources = resources;\n\n        // The proxied resources will be refreshed on start\n        this.resources = null;\n\n        support.firePropertyChange(\"resources\", oldResources,\n                                   this.webappResources);\n\n    }\n\nBecause of that, the \"cached\" attribute of the <Resources> element is useless. \nThe only way to de-activate caching is to disable it at the context level:\n\n<Context path=\"/mypath\" docBase=\"/usr/local/mylocation\"\n         cachingAllowed=\"false\"/>\n\nI think the correct behaviour would be to logical-AND the \"cachingAllowed\"\nproperty of the Context and the \"cached\" property of the DirContext.", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 18079, "is_private": false, "id": 54119, "creation_time": "2004-03-16T23:43:21Z", "time": "2004-03-16T23:43:21Z", "creator": "markt@apache.org", "text": "This has been fixed in TC4.", "attachment_id": null}]