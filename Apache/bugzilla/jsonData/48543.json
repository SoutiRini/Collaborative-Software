[{"count": 0, "tags": [], "text": "Summary:\n\nThe catalina.config property (which specifies an alternate location for the information contained in catalina.properties) only understands a full URL.\n\nThis would be a change in the properties loader to check getCatalinaBase()/configUrl before checking new URL(configUrl).  I downloaded the latest source and I'm not sure where this change would be made.\n\no.a.t.util.loader.LoaderProperties (doesn't seem to exist anymore?)\n\nor\n\no.a.c.startup.CatalinaProperties\n\nIf the bug is a go, let me know and I'll submit a patch, thanks!\n\nDetails:\n\nDuring development, we override log4j.properties with log4j.development.properties by specifying -Dlog4j.properties=log4j.development.properties in our JAVA_OPTS when starting Tomcat.  It allows us to use a shared development configuration (shared IDEA project) without having to refer to hardcoded paths.\n\nDuring development, we override settings in server.xml (e.g. shutdown port, http, https ports) by using properties we define in catalina.properties.  Currently this means we each have to remember to change the value of -Dcatalina.config=file://... because it only takes a URL.", "is_private": false, "bug_id": 48543, "id": 133602, "time": "2010-01-14T07:50:44Z", "creator": "rslifka@sfu.ca", "creation_time": "2010-01-14T07:50:44Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "rslifka@sfu.ca", "attachment_id": null, "is_private": false, "id": 133608, "time": "2010-01-14T12:21:06Z", "bug_id": 48543, "creation_time": "2010-01-14T12:21:06Z", "text": "Apologies, I realized my summary was pretty bleak :)\n\nWhat is desired is to provide something like this:\n\n    -Dcatalina.config=catalina.developer.properties\n\nAnd during bootstrapping, Catalina would check for properties in this order:\n\n    1) getCatalinaBase()/getConfigUrl()\n    2) getConfigUrl()\n\nThis should preserve backwards compatibility with the full Url.\n\nThanks!\n\nRob"}, {"count": 2, "tags": [], "bug_id": 48543, "is_private": false, "text": "(In reply to comment #0)\n> Summary:\n> \n> The catalina.config property (which specifies an alternate location for the\n> information contained in catalina.properties) only understands a full URL.\n> \n\nRelative URLs are also allowed.\n\nE.g., the following works for me on Windows XP:\n\nset JAVA_OPTS=-Dcatalina.config=file:../conf/catalina2.properties\n\nThe URL is relative to the current directory at the time when the JVM is launched. On Windows that is determined by what is written in your shortcut, or what is the current directory in your shell when you launch %CATALINA_HOME%\\bin\\catalina.bat. The above example works when you are in %CATALINA_HOME%\\bin, which is the most usual case.\n\n\n> o.a.c.startup.CatalinaProperties\n\no.a.c.startup.Bootstrap\no.a.c.startup.CatalinaProperties", "id": 133617, "time": "2010-01-14T14:27:04Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-01-14T14:27:04Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "rslifka@sfu.ca", "attachment_id": null, "is_private": false, "id": 133618, "time": "2010-01-14T15:44:39Z", "bug_id": 48543, "creation_time": "2010-01-14T15:44:39Z", "text": "Hi Konstantin,\n\nMany thanks for the quick reply!\n\nUnfortunately, that relatively is different on every developer's machine based on their own CATALINA_HOME and where they've chosen to check out CATALINA_BASE for the branch they're working on.\n\nSo we still have to remember to change the custom property every time we work on a different branch inside of our project settings.\n\nThis is versus the log4j-like approach of looking for an unqualified filename in a known location (in log4j's case, it's the web app classloader, but I think you understand what I'm saying :)\n\nWould I be more likely to have a patch approved by overloading the use of the existing property or suggesting a new property?\n\n    catalina.config=foo.properties\n\nversus:\n\n    catalina.config.filename=foo.properties\n\nJust curious if/where I should spend my time.\n\nThanks again!!\n\nRob"}, {"count": 4, "tags": [], "creator": "rslifka@sfu.ca", "attachment_id": null, "id": 133746, "time": "2010-01-20T13:53:28Z", "bug_id": 48543, "creation_time": "2010-01-20T13:53:28Z", "is_private": false, "text": "Hi guys,\n\nFirst of all, amazing work on the build environment.  Instructions were easy to follow and everything (including the unit tests) worked on the first go.  Contributing could not be easier!\n\nAttached a patch containing the following:\n\n- Added \"catalina.config.filename\" system property with a default value of \"catalina.properties\".  This way you can specify another config file to use without having to worry about URLs or base directories.\n\n- Updated documentation to include a description of the new property.\n\nLet me know if there are any questions or anything missing from the patch.\n\nThanks!\n\nRob"}, {"count": 5, "attachment_id": 24869, "creator": "rslifka@sfu.ca", "is_private": false, "id": 133747, "time": "2010-01-20T13:53:59Z", "bug_id": 48543, "creation_time": "2010-01-20T13:53:59Z", "tags": [], "text": "Created attachment 24869\nPatch to add new catalina.config.filename property."}, {"count": 6, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 199004, "time": "2017-06-01T19:45:55Z", "bug_id": 48543, "creation_time": "2017-06-01T19:45:55Z", "text": "Thanks for the patch and sorry this didn't get looked at further at the time. I've just picked this up as part of my review of the remaining Tomcat 6 bugs.\n\nI opted to implement this as part of the existing catalina.config property rather than as a new property."}]