[{"count": 0, "tags": [], "bug_id": 41773, "attachment_id": null, "text": "This is a continuation of bug #31201. The fileEncoding parameter on the\nDefaultServlet doesn't go far enough. \nThe case I have is this:\nI have a webapp that serves some static html files directly to end user. They\nare encoded in shift_jis. With the current implementation the response header\nsays the charset is iso-8859-1 for my jvm. So now I can see the correct\ncharacters in the result page but only if I explicitly tell the browser to show\nthe page in shift_jis.\n\nI believe the DefaultServlet also needs to pass along the fileEncoding parameter\nas the charset in the response content type.\n\nI added the following line to the Default Servlet and it now returns a sensible\ncontent type header for any static html  or text files in my web application.\n\nCompare:\n(<)\\apache-tomcat-5.5.20-src\\container\\catalina\\src\\share\\org\\apache\\catalina\\servlets\\DefaultServlet.java\n\n\n738d738\n<             if(contentType.toLowerCase().indexOf(\"charset\") == -1 &&\nfileEncoding != null) contentType += \";charset=\"+fileEncoding; \n\nIt would be great if this could be applied to the official tomcat distribution.\nThanks", "id": 100097, "time": "2007-03-06T11:47:33Z", "creator": "brett@knightsofthenet.com", "creation_time": "2007-03-06T11:47:33Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "is_private": false, "text": "You can easily use your own extended servlet. I believe the current one provides\nthe necessary features encoding wise.", "id": 100106, "time": "2007-03-06T14:01:07Z", "bug_id": 41773, "creation_time": "2007-03-06T14:01:07Z", "attachment_id": null}]