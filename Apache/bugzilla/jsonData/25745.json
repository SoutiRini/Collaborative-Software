[{"count": 0, "tags": [], "creator": "pgdad@hotmail.com", "attachment_id": null, "text": "ClearCase Update task does not allow usage of the -force flag when invoked.\n\nThe force flag is need when (for example) an update operation is performed \nafter a stream (in UCM speak) has been rebased. An other example of needing \nthe -force flag is when an update is performed when clearcase thinks (at times \nwrongly) that there is already an update in process. Usage of -force aborts \nthe in-progress update and starts a new one.\n\nI would like to see this fixed on the 1.6 series.\n\nHere is the diff (both doc and code, taken on 12/24/2003):\n\nIndex: docs/manual/OptionalTasks/clearcase.html\n===================================================================\nRCS file: /home/cvspublic/ant/docs/manual/OptionalTasks/clearcase.html,v\nretrieving revision 1.8\ndiff -r1.8 clearcase.html\n251a252,256\n>     <td>force</td>\n>     <td>Specifies that confirmation prompts should be suppressed.</td>\n>     <td>No</td>\n>   </tr>\n>   <tr>\nIndex: src/main/org/apache/tools/ant/taskdefs/optional/clearcase/CCUpdate.java\n===================================================================\nRCS \nfile: /home/cvspublic/ant/src/main/org/apache/tools/ant/taskdefs/optional/clear\ncase/CCUpdate.java,v\nretrieving revision 1.12\ndiff -r1.12 CCUpdate.java\n119a120\n>     private boolean m_Force = false;\n188a190,193\n> \t\t\tif (getForce()) {\n> \t\t\t\tcmd.createArgument().setValue(FLAG_FORCE);\n> \t\t\t}\n> \n289a295,312\n>      * If true, update is done without asking for conformation\n>      *\n>      * @param f the status to set the flag to\n>      */\n>     public void setForce(boolean f) {\n>         m_Force = f;\n>     }\n> \n>     /**\n>      * Get force status\n>      *\n>      * @return boolean containing status of force flag\n>      */\n>     public boolean getForce() {\n>         return m_Force;\n>     }\n> \n>     /**\n355a379,382\n>     /**\n>      * -force flag -- no questions, just do it\n>      */\n>     public static final String FLAG_FORCE = \"-force\";", "id": 49670, "time": "2003-12-24T14:50:21Z", "bug_id": 25745, "creation_time": "2003-12-24T14:50:21Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 25745, "text": "Created attachment 9738\nImplements the -force cmd line option to the cleartool update task", "id": 49819, "time": "2003-12-29T20:44:52Z", "creator": "pgdad@hotmail.com", "creation_time": "2003-12-29T20:44:52Z", "is_private": false, "attachment_id": 9738}, {"count": 2, "tags": [], "bug_id": 25745, "text": "*** Bug 24166 has been marked as a duplicate of this bug. ***", "id": 51107, "time": "2004-01-24T13:47:56Z", "creator": "sbailliez@apache.org", "creation_time": "2004-01-24T13:47:56Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "m.holster@home.nl", "attachment_id": null, "text": "I needed the patch for a project I work on, but couldn't get it to work (could\nit be the cvs2svn conversion or don't i just get it....). Because the patch was\nmade a long time ago and I cound't get it to work I patched it again. Tested\nwith clearcase 2003.06.14. It would be really appreciated if the patch will be\napplied soon. Here's the patch:\n\nIndex: docs/manual/OptionalTasks/clearcase.html\n===================================================================\nRCS file: /home/cvspublic/ant/docs/manual/OptionalTasks/clearcase.html,v\nretrieving revision 1.13\ndiff -u -r1.13 clearcase.html\n--- docs/manual/OptionalTasks/clearcase.html\t29 Apr 2005 18:58:10 -0000\t1.13\n+++ docs/manual/OptionalTasks/clearcase.html\t27 Jun 2005 19:01:59 -0000\n@@ -297,6 +297,11 @@\n     Since ant 1.6.1</td>\n     <td>No</td>\n   </tr>\n+  <tr>\n+    <td>force</td>\n+    <td>Suppresses the confirmation prompts. Default is false.</td>\n+    <td>No</td>\n+  </tr>\n </table>\n <h3>Examples</h3>\n <blockquote>\nIndex: src/main/org/apache/tools/ant/taskdefs/optional/clearcase/CCUpdate.java\n===================================================================\nRCS file:\n/home/cvspublic/ant/src/main/org/apache/tools/ant/taskdefs/optional/clearcase/CCUpdate.java,v\nretrieving revision 1.17\ndiff -u -r1.17 CCUpdate.java\n--- src/main/org/apache/tools/ant/taskdefs/optional/clearcase/CCUpdate.java\t9\nMar 2004 16:48:16 -0000\t1.17\n+++ src/main/org/apache/tools/ant/taskdefs/optional/clearcase/CCUpdate.java\t27\nJun 2005 19:01:32 -0000\n@@ -75,6 +75,11 @@\n  *      <td>Throw an exception if the command fails. Default is true</td>\n  *      <td>No</td>\n  *   <tr>\n+ *   <tr>\n+ *      <td>force</td>\n+ *      <td>Suppresses the confirmation prompts. Default is false.</td>\n+ *      <td>No</td>\n+ *   </tr>\n  * </table>\n  *\n  */\n@@ -85,6 +90,7 @@\n     private boolean mCtime = false;\n     private boolean mPtime = false;\n     private String mLog = null;\n+    private boolean mForce = false;\n \n     /**\n      * Executes the task.\n@@ -157,7 +163,10 @@\n                     cmd.createArgument().setValue(FLAG_PRESERVETIME);\n                 }\n             }\n-\n+            if (getForce()) {\n+                // -force\n+                cmd.createArgument().setValue(FLAG_FORCE);\n+            }\n             // -log logname\n             getLogCommand(cmd);\n         }\n@@ -276,7 +285,24 @@\n     public String getLog() {\n         return mLog;\n     }\n+    \n+    /**\n+     * If true, confirmation prompt will be suppressed.\n+     *\n+     * @param force The status to set the flag to.\n+     */\n+    public void setForce(boolean force) {\n+        mForce = force;\n+    }\n \n+    /**\n+     * Get force status\n+     *\n+     * @return boolean containing status of force flag\n+     */\n+    public boolean getForce() {\n+        return mForce;\n+    }\n \n     /**\n      * Get the 'log' command\n@@ -325,6 +351,10 @@\n      * -ptime flag -- modified time is written as the VOB time\n      */\n     public static final String FLAG_PRESERVETIME = \"-ptime\";\n+    /**\n+     * -force flag -- suppresses the confirmation prompts \n+     */\n+    public static final String FLAG_FORCE = \"-force\";\n \n }", "id": 76770, "time": "2005-06-28T22:43:08Z", "bug_id": 25745, "creation_time": "2005-06-28T22:43:08Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 25745, "text": "I think it would be better to add arbitrary arguments to all ClearCase commands instead of just adding them one by one. In a case of <ccupdate> <exec> has much more functionality. Now with <macrodef> and <scriptdef> it is possible to create custom tasks without modifying ANT core. Why not to use it?", "id": 76783, "time": "2005-06-29T02:21:38Z", "creator": "alexeys@inventigo.com", "creation_time": "2005-06-29T02:21:38Z", "is_private": false, "attachment_id": null}]