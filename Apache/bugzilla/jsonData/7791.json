[{"count": 0, "tags": [], "bug_id": 7791, "attachment_id": null, "is_private": false, "id": 12912, "time": "2002-04-06T13:03:56Z", "creator": "oles@ovh.net", "creation_time": "2002-04-06T13:03:56Z", "text": "I have just compiled 2.0.35 and some of cgi script does not\nword anymore. I used to have 1.3.24 (with suexec too).\nSo, it should work with without any problem.\n\nthe problem is that the scripts do not take the variables\nin the right order:\nhttp://ping.ovh.net/traceroute_1.3.24.cgi works on 1.3.24 only\nand\nhttp://ping.ovh.net/traceroute_2.0.35.cgi works on 2.0.35 only\n\n# diff -u traceroute_1.3.24.cgi traceroute_2.0.35.cgi \n--- traceroute_1.3.24.cgi       Sat Apr  6 14:56:05 2002\n+++ traceroute_2.0.35.cgi       Sat Apr  6 14:56:00 2002\n@@ -49,7 +49,7 @@\n         else \n                 echo \"Result for <b>$1</b>:\"\n                 echo \\<PRE\\>\n-                nice $TRACEROUTE \"$1\" 2>&1\n+                nice $TRACEROUTE \"$2\" 2>&1\n                 echo \\</PRE\\>\n         fi\n else\n\nit is the same when you try to open a cgi with\nperl\n\n# telnet ping.ovh.net 80\nTrying 213.186.33.13...\nConnected to ping.ovh.net.\nEscape character is '^]'.\nHEAD / HTTP/1.0\n\n\n----> nothing\nwith ps auxw I see this:\novh      28262  0.2  0.4  2244 1180 ?        S    14:59   0:00 perl index.cgi \nindex.cgi\n\n(index.cgi 2 times ?)\n# kill 28262\nand telnet ping.ovh.net 80 gives:\n\nHTTP/1.1 200 OK\nDate: Sat, 06 Apr 2002 12:59:08 GMT\nServer: Apache/2.0.35 (Unix)\nConnection: close\nContent-Type: text/html; charset=ISO-8859-1\n\nConnection closed by foreign host.\n\nthe configuration:\n# uname -a\nLinux ping.ovh.net 2.2.20ext3 #2 Mon Jan 21 23:37:49 CET 2002 i686 unknown\n\n# /usr/local/apache/bin/httpd -V\nServer version: Apache/2.0.35\nServer built:   Apr  6 2002 14:18:38\nServer's Module Magic Number: 20020329:0\nArchitecture:   32-bit\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D HTTPD_ROOT=\"/usr/local/apache\"\n -D SUEXEC_BIN=\"/usr/local/apache/bin/suexec\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n# /usr/local/apache/bin/httpd -v\nServer version: Apache/2.0.35\nServer built:   Apr  6 2002 14:18:38\n# /usr/local/apache/bin/httpd -l\nCompiled in modules:\n  core.c\n  mod_access.c\n  mod_auth.c\n  mod_echo.c\n  mod_cache.c\n  mod_mem_cache.c\n  mod_include.c\n  mod_log_config.c\n  mod_env.c\n  mod_setenvif.c\n  prefork.c\n  http_core.c\n  mod_mime.c\n  mod_status.c\n  mod_autoindex.c\n  mod_asis.c\n  mod_suexec.c\n  mod_cgi.c\n  mod_negotiation.c\n  mod_dir.c\n  mod_imap.c\n  mod_actions.c\n  mod_speling.c\n  mod_userdir.c\n  mod_alias.c\n  mod_rewrite.c\n  mod_so.c\n\n<VirtualHost *>\nDocumentRoot /home/ovh/www\nServerName ping.ovh.net\nSuexecUserGroup ovh ovh\n</VirtualHost>\n\n[2002-04-06 15:00:17]: uid: (500/ovh) gid: (500/500) cmd: traceroute.cgi\n[2002-04-06 15:00:23]: uid: (500/ovh) gid: (500/500) cmd: traceroute.cgi"}, {"attachment_id": null, "tags": [], "bug_id": 7791, "text": "I have tester this on Redhat Linux 7.2 with cvs head of both apache-1.3 and\nhttpd-2.0. I get the same behavior from the identical cgi run on both versions\nof Apache. Parms $1, $2, and $3 all line up the same in my tests.\n\nCould you retry your tests with the latest versions of Apache 1.3 and 2.0?\nIf I don't hear from you to the contrary, I will close this in a couple of days\nsince it works for me.\n\nThank you.", "count": 1, "id": 16570, "time": "2002-05-22T21:04:52Z", "creator": "rederpj@apache.org", "creation_time": "2002-05-22T21:04:52Z", "is_private": false}, {"count": 2, "tags": [], "creator": "colmmacc@redbrick.dcu.ie", "is_private": false, "text": "I'm seeing this bug aswell in 2.036 and CVS. suexec is getting passed args \nala:\n\n   /path/to/suexec (~)uid gid cmdname argv0 argv1 argv2 \n\nand so on. Previously in 1.3 it was : \n\n   /path/to/suexec (~)uid gid argv0 argv1 argv2 \n\nand argv0 was assumed to == cmdname. This patch reverts to the previous\nbehaviour.\n\nIndex: os/unix/unixd.c\n===================================================================\nRCS file: /home/cvspublic/httpd-2.0/os/unix/unixd.c,v\nretrieving revision 1.52\ndiff -u -u -r1.52 unixd.c\n--- os/unix/unixd.c     17 May 2002 11:33:10 -0000      1.52\n+++ os/unix/unixd.c     26 May 2002 00:47:29 -0000\n@@ -350,16 +350,16 @@\n            }\n     }\n     /* allocate space for 4 new args, the input args, and a null terminator */\n-    newargs = apr_palloc(p, sizeof(char *) * (i + 5));\n+    newargs = apr_palloc(p, sizeof(char *) * (i + 4));\n     newprogname = SUEXEC_BIN;\n     newargs[0] = SUEXEC_BIN;\n     newargs[1] = execuser;\n     newargs[2] = execgroup;\n     newargs[3] = apr_pstrdup(p, progname);\n\n-    i = 0;\n+    i = 1;\n     do {\n-        newargs[i + 4] = args[i];\n+        newargs[i + 3] = args[i];\n     } while (args[i++]);\n\n     return apr_proc_create(newproc, newprogname, newargs, env, attr, p);", "id": 16714, "time": "2002-05-26T00:56:03Z", "bug_id": 7791, "creation_time": "2002-05-26T00:56:03Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 7791, "attachment_id": null, "is_private": false, "id": 16716, "time": "2002-05-26T01:13:24Z", "creator": "oles@ovh.net", "creation_time": "2002-05-26T01:13:24Z", "text": "patch works for me (2.0.35)\n\nOctave"}, {"count": 4, "tags": [], "creator": "brianp@apache.org", "text": "thanks, I've committed the patch", "id": 16727, "time": "2002-05-26T08:36:49Z", "bug_id": 7791, "creation_time": "2002-05-26T08:36:49Z", "is_private": false, "attachment_id": null}]