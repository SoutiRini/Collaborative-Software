[{"count": 0, "tags": [], "bug_id": 7552, "attachment_id": null, "text": "<project name=\"test\" default=\"foo\">\n\n    <target name=\"bug\">\n        <jar destfile=\"foo.jar\">\n            <fileset dir=\".\" includes=\"*.class\"/>\n        </jar>\n        <delete file=\"foo.jar\"/>\n    </target>\n\n    <target name=\"moo\" depends=\"bug\"/>\n\n    <target name=\"foo\" depends=\"bug\"/>\n\n</project>\n\nI get the following error when I run \"ant foo moo\":\nBUILD FAILED\n/home/pkilroy/antbug/build.xml:4: You must specify the\njar file to create!\n\n\n==================\n[Conor]\n\nAgreed. This bug arises from the tendency of many tasks to change, in their \nexecute method, the state setup by the core using IntrospectionHelper. In this \ncase it is the cleanup() method of Zip.java. In fact the cleanup method was \nchanged as part of bug 4366\nhttp://nagoya.apache.org/bugzilla/show_bug.cgi?id=4366\n\nI'm not sure I understand the original bug report but it is probably a symptom \nof the same problem, the changing of the filesets in the execute() method. The \nfix, however, almost guarantees that the instance cannot be reused.\n\n[...]\n\nI think that we need to perhaps examine how all tasks preserve their state as \nI'm sure this is not limited to the Zip task.", "id": 12440, "time": "2002-03-28T02:06:41Z", "creator": "paulkilroy@yahoo.com", "creation_time": "2002-03-28T02:06:41Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 7552, "text": "<zip> and <jar> are fixed in nightly build 2002-04-10.\n\nI'm not closing this bug now as a reminder that all tasks need to be audited.", "id": 13105, "time": "2002-04-09T15:22:19Z", "creator": "bodewig@apache.org", "creation_time": "2002-04-09T15:22:19Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "text": "All core tasks and <junit> are done for nightly build 2002-04-13.\n\nI'm closing this bug as fixed, this is a lie, I know.  There may be optional\ntasks that need to be adapted, but we can deal with them on a task by task basis.", "id": 13381, "time": "2002-04-12T15:09:53Z", "bug_id": 7552, "creation_time": "2002-04-12T15:09:53Z", "is_private": false, "attachment_id": null}]