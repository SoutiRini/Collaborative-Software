[{"count": 0, "tags": [], "creator": "vladimir@bossicard.com", "attachment_id": null, "text": "I had problems when registring/deregistring database (after registration, 3\ndatabases were registered, instead of 1).  \n\nWhen I worked with the XMLDB cvs repository everything was fine.  So it's now\ntime to create a new xmldb-api archive and commit it into the repo.\n\nI've talked with the xmldb guys and proposed that they start making releases. \nIt will be easier for external project to see when things have changed", "id": 24033, "time": "2002-10-06T21:57:51Z", "bug_id": 13350, "creation_time": "2002-10-06T21:57:51Z", "is_private": false}, {"count": 1, "tags": [], "creator": "vladimir@bossicard.com", "attachment_id": null, "text": "Copy of the mail I sent do the XMLDB API group:\n\n\nXindice wants to register three databases: \"xindice, xindice-embed,\nxindice-corba\".  That's the value the getName method returns.  The\nDatabaseManager takes this name as a key for the hashtable.  Consequently one\ndatabase object is registered with one single key.\n\nWhen I want to gain access to a collection I give \"xindice-embed\" as part of\nthe URI.  Since the DatabaseManager has not record with this key (only with\n\"xindice, xindice-embed, xindice-corba\") it returns null. :-(\n\nThe solution:\n- define the format of the getName method in the case of multiple\nimplementations (e.g. the names must be separated by a ',' or a space)\n- when registring a database, split the name according to the separator and\nstore one instance per separator in the hashtable.\n- when deregistring a database, go through all the keys and remove the instance\nfrom the hashtable.\n\nhere the code:\n\n   public static void registerDatabase (Database database) throws\nXMLDBException {\n      if ((database.getName() == null) || (database.getName().equals(\"\"))) {\n         throw new XMLDBException(ErrorCodes.INVALID_DATABASE);\n      }\n\n      StringTokenizer st = new StringTokenizer(database.getName(), \",\");\n      while (st.hasMoreTokens()) {\n         String token = st.nextToken();\n         databases.put(token.trim(), database);\n      }\n   }\n\n   public static void deregisterDatabase (Database database) \n         throws XMLDBException {\n      StringTokenizer st = new StringTokenizer(database.getName(), \",\");\n      while (st.hasMoreTokens()) {\n         String token = st.nextToken();\n         databases.remove(token.trim());\n      }\n   }\n\nOf course you can choose another separator than ',' and check is a database is\nalready registered.\n\n", "id": 24054, "time": "2002-10-07T07:08:32Z", "bug_id": 13350, "creation_time": "2002-10-07T07:08:32Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 13350, "text": "I just checked the xmldb cvs repository and they have fixed the bug. So ready to\nclose this bug once the new xmldb jar is imported.", "id": 24759, "time": "2002-10-17T06:56:32Z", "creator": "vladimir@bossicard.com", "creation_time": "2002-10-17T06:56:32Z", "tags": [], "is_private": false}]