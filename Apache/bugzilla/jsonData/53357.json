[{"count": 0, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "is_private": false, "id": 159684, "attachment_id": 28882, "bug_id": 53357, "creation_time": "2012-06-04T20:13:03Z", "time": "2012-06-04T20:13:03Z", "text": "Created attachment 28882\nTest Plan\n\nI configured a very simple Test plan with a JMS Point-to-Point where Request queue and Receive Queue are the same.\nIf I run 3 samples, randomly I can get one response time equal to Timeout while receive was in fact immediate.\n\nI added logs around wait in FixedQueueExecutor and notify in MessageAdmin.\n\n\nHere is the result:\n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.FixedQueueExecutor: wait for reply Milamber-1338839705293 started on 1338839705298 \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.FixedQueueExecutor: GU Point-\u00e0-Point 1-1 will wait on : ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:1, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705294, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705293, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705287} \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: RPL_ID [Milamber-1338839705293] for holder request=ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:1, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705294, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705293, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705287}, reply=null \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: GU Point-\u00e0-Point 1-1-JMS-Receiver notifying : ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:1, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705294, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705293, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705287} \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: GU Point-\u00e0-Point 1-1-JMS-Receiver notified : ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:1, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705294, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705293, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705287} \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.FixedQueueExecutor: done waiting for Milamber-1338839705293 on ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:1, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705294, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705293, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705287} ended on 1338839705320 \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: GET_ID [Milamber-1338839705293] for request=ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:1, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705294, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705293, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705287}, reply=ActiveMQTextMessage {commandId = 5, responseRequired = true, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:1, originalDestination = null, originalTransactionId = null, producerId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705294, arrival = 0, brokerInTime = 1338839705294, brokerOutTime = 1338839705295, correlationId = Milamber-1338839705293, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = true, readOnlyBody = true, droppable = false, text = Message de test\nID TEMPS = 1338839705287} \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: REQ_ID [Milamber-1338839705328] \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: RPL_ID [Milamber-1338839705328] for holder request=ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:2, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705328, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705328, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705328}, reply=null \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: GU Point-\u00e0-Point 1-1-JMS-Receiver notifying : ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:2, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705328, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705328, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705328} \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: GU Point-\u00e0-Point 1-1-JMS-Receiver notified : ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:2, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705328, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705328, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705328} \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.FixedQueueExecutor: wait for reply Milamber-1338839705328 started on 1338839705353 \n2012/06/04 21:55:05 DEBUG - jmeter.protocol.jms.sampler.FixedQueueExecutor: GU Point-\u00e0-Point 1-1 will wait on : ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:2, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705328, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705328, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705328} \n2012/06/04 21:55:25 DEBUG - jmeter.protocol.jms.sampler.FixedQueueExecutor: done waiting for Milamber-1338839705328 on ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:2, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705328, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705328, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705328} ended on 1338839725353 \n2012/06/04 21:55:25 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: GET_ID [Milamber-1338839705328] for request=ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:2, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705328, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839705328, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839705328}, reply=ActiveMQTextMessage {commandId = 6, responseRequired = true, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:2, originalDestination = null, originalTransactionId = null, producerId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839705328, arrival = 0, brokerInTime = 1338839705329, brokerOutTime = 1338839705329, correlationId = Milamber-1338839705328, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = true, readOnlyBody = true, droppable = false, text = Message de test\nID TEMPS = 1338839705328} \n2012/06/04 21:55:25 DEBUG - jmeter.protocol.jms.Utils: Adding property [JMSCorrelationId=Milamber-1338839725355] \n2012/06/04 21:55:25 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: REQ_ID [Milamber-1338839725355] \n2012/06/04 21:55:25 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: RPL_ID [Milamber-1338839725355] for holder request=ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:3, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839725356, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839725355, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839725355}, reply=null \n2012/06/04 21:55:25 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: GU Point-\u00e0-Point 1-1-JMS-Receiver notifying : ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:3, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839725356, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839725355, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839725355} \n2012/06/04 21:55:25 DEBUG - jmeter.protocol.jms.sampler.FixedQueueExecutor: wait for reply Milamber-1338839725355 started on 1338839725358 \n2012/06/04 21:55:25 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: GU Point-\u00e0-Point 1-1-JMS-Receiver notified : ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:3, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839725356, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839725355, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839725355} \n2012/06/04 21:55:25 DEBUG - jmeter.protocol.jms.sampler.FixedQueueExecutor: GU Point-\u00e0-Point 1-1 will wait on : ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:3, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839725356, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839725355, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839725355} \n2012/06/04 21:55:45 DEBUG - jmeter.protocol.jms.sampler.FixedQueueExecutor: done waiting for Milamber-1338839725355 on ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:3, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839725356, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839725355, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839725355} ended on 1338839745358 \n2012/06/04 21:55:45 DEBUG - jmeter.protocol.jms.sampler.MessageAdmin: GET_ID [Milamber-1338839725355] for request=ActiveMQTextMessage {commandId = 0, responseRequired = false, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:3, originalDestination = null, originalTransactionId = null, producerId = null, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839725356, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = Milamber-1338839725355, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false, text = Message de test\nID TEMPS = 1338839725355}, reply=ActiveMQTextMessage {commandId = 7, responseRequired = true, messageId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1:3, originalDestination = null, originalTransactionId = null, producerId = ID:macbook-pro-de-philippe-mouawad.local-64635-1338839705124-0:2:1:1, destination = queue://example.A, transactionId = null, expiration = 0, timestamp = 1338839725356, arrival = 0, brokerInTime = 1338839725356, brokerOutTime = 1338839725357, correlationId = Milamber-1338839725355, replyTo = queue://example.A, persistent = true, type = null, priority = 4, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = null, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = true, readOnlyBody = true, droppable = false, text = Message de test\nID TEMPS = 1338839725355} \n2012/06/04 21:55:45 INFO  - jmeter.threads.JMeterThread: Thread finished: GU Point-\u00e0-Point 1-1"}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "is_private": false, "id": 159685, "time": "2012-06-04T20:13:30Z", "bug_id": 53357, "creation_time": "2012-06-04T20:13:30Z", "text": "Issue is due to notify happening before wait has started."}, {"count": 2, "tags": [], "bug_id": 53357, "is_private": false, "text": "Date: Mon Jun  4 20:17:31 2012\nNew Revision: 1346144\n\nURL: http://svn.apache.org/viewvc?rev=1346144&view=rev\nLog:\nBug 53357 - JMS Point to Point reports too high response times in Request Response Mode\n\nModified:\n   jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/sampler/FixedQueueExecutor.java\n   jmeter/trunk/src/protocol/jms/org/apache/jmeter/protocol/jms/sampler/MessageAdmin.java\n   jmeter/trunk/xdocs/changes.xml", "id": 159686, "time": "2012-06-04T20:18:15Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-06-04T20:18:15Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "URL: http://svn.apache.org/viewvc?rev=1350918&view=rev\nLog:\nJMS Point to Point reports too high response times in Request Response Mode\n- ensure the timeout is actually used\nBugzilla Id: 53357", "is_private": false, "bug_id": 53357, "id": 160040, "time": "2012-06-16T12:59:13Z", "creator": "sebb@apache.org", "creation_time": "2012-06-16T12:59:13Z", "attachment_id": null}]