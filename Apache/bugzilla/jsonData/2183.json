[{"count": 0, "attachment_id": null, "bug_id": 2183, "text": "The following build file reproduces the bug. Copy it under the root of your Ant \nversion, and run Ant on it.\nThe build will fail in the clean target with the following error:\n\nclean:\n   [delete] Deleting: F:\\Projects\\xxxx\\zipfile1.zip\n\nBUILD FAILED\n\nF:\\Projects\\xxxx\\antbug.xml:40: Unable to delete file \nF:\\Projects\\xxxx\\zipfile1.zip\n\nNote: by commenting out some of the task (as described in the build file), the \nbuild succeeds.\n\n\n-----------------------\n<project name=\"mc_ro\" default=\"zip\" basedir=\".\" >\n<!-- comment out if you have an Ant version with JDepend task integrated -->\n<!--\t<taskdef\n\t\tname=\"jdepend\" \n\t\n\tclassname=\"org.apache.tools.ant.taskdefs.optional.jdepend.JDependTask\"\n\t\t>\n\n  \t   \t<classpath>\n\t    \t\t<pathelement path=\"${classes.dir}\"/>\n\t    \t\t<pathelement location=\"lib/jdepend/jdepend.jar\"/>\n\t    \t\t<pathelement location=\"lib/jdepend/JDependTask.jar\"/>\n\t    \t\t\t    \t\t\n\t  \t</classpath>\t\t\n\t</taskdef>\n-->\t\n\n\t<target name=\"jdepend\">\n\t<!-- comment out the jdepend task and it works -->\n    \t\t<jdepend \n    \t\t\toutputFile=\"depend_out.txt\">\n    \t\t\t<classpath refid=\"project.classpath\"/>    \t\t\n\t\n\t\t\t<sourcespath>\n        \t\t\t<pathelement location=\"src\" />\n    \t\t\t</sourcespath>\n    \t\t</jdepend>\n\t</target>\n\n\t<target name=\"zip\" depends=\"clean\">\n\t\t<zip zipfile=\"zipfile1.zip\" basedir=\"docs\" includes=\"**\" />\n\t<!-- or comment out the second zip task and it works -->\n\t\t<zip zipfile=\"zipfile2.zip\">\n\t\t\t<zipfileset src=\"zipfile1.zip\" />\n\t\t</zip>\n\t\n\t<!-- or comment out the antcall task and it works -->\n\t\t<antcall target=\"clean\" />\n\t</target>\n\n\t<target name=\"clean\">\n\t<!-- or comment out the first delete task and it works -->\n\t\t<delete file=\"zipfile1.zip\"/>\n\t\t<delete file=\"zipfile2.zip\"/>\n\t\t<delete file=\"jdepend_out.txt\"/> \n\t</target>\n</project>", "id": 2991, "time": "2001-06-14T08:38:20Z", "creator": "Jerome@jeromelacoste.com", "creation_time": "2001-06-14T08:38:20Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": 226, "bug_id": 2183, "text": "Created attachment 226\nSmaller build file that reproduces the bug", "id": 2993, "time": "2001-06-14T08:54:38Z", "creator": "Jerome@jeromelacoste.com", "creation_time": "2001-06-14T08:54:38Z", "tags": [], "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 2183, "text": "should be fixed since nightly build 2001-03-08", "id": 3160, "time": "2001-06-21T08:07:57Z", "creator": "bodewig@apache.org", "creation_time": "2001-06-21T08:07:57Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "can someboy tell me what the problem was here? because I am getting very similar\nsymptoms with ant 1.6.5?", "attachment_id": null, "id": 87349, "creator": "nikolaymetchev@gmail.com", "time": "2006-03-28T15:26:08Z", "bug_id": 2183, "creation_time": "2006-03-28T15:26:08Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 2183, "attachment_id": null, "id": 87350, "time": "2006-03-28T15:33:05Z", "creator": "mbenson@apache.org", "creation_time": "2006-03-28T15:33:05Z", "is_private": false, "text": "(In reply to comment #3)\n> can someboy tell me what the problem was here? because I am getting very similar\n> symptoms with ant 1.6.5?\n\nIt would be almost impossible to correlate 1.6.5 against 1.3, especially on an\nissue fixed five years ago... if you have questionable behavior, try to create,\nas was done here, a minimalist buildfile depicting the issue, possibly trying it\nat the user@ant.apache.org mailing list.  Then if it seems apparent that you are\nencountering a bug, go ahead and open a new issue.\n\nThanks,\nMatt"}]