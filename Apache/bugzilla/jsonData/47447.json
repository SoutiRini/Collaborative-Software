[{"count": 0, "attachment_id": 23897, "bug_id": 47447, "text": "Created attachment 23897\nmod_headers %a value format for client IP patch\n\nSome people may want to use Apache as a reverse proxy on a frontends. Alas, mod_rpaf is heavily bugged (.htaccess don't work), and existing small modules like mod_realip2 do not honor X-Forwarded-For header (that is not completely spoof proof also due to possibility of multiple values).\n\nSo I decided to add ability to use client IP as a value in mod_headers value formats. It is a small nice enhancement that allows me to add like \"X-Real-IP\" header on a backend.\n\nThe patch for 2.2.11 is attached, it is trivial enough.\n\nExample of use:\n\nRequestHeader set X-Real-IP %a", "id": 128374, "time": "2009-06-29T02:05:26Z", "creator": "alex@net13.info", "creation_time": "2009-06-29T02:05:26Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "alex@net13.info", "is_private": false, "text": "Sorry for small typos there.\n\n\"on a frontends\" must read \"on a frontend\"\n\"on a backend\" must read \"on a frontend\" too", "id": 128375, "time": "2009-06-29T02:07:02Z", "bug_id": 47447, "creation_time": "2009-06-29T02:07:02Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "wrowe@apache.org", "is_private": false, "text": "Here's my problem with the RequestHeader hacks.  They are hacks.\n\nWe have a whole registration system to provide additional providers to %*\nlog formats, and no way to then expose those to other modules providing\n%escape features like RequestHeader.  I had a solution for X-FF based on\npicking one of these up, and lo and behold, there is no API in mod_log_config\nto recover all the useful extensions added to logging.\n\nThe right way to fix this is to move the %escape registration from the\nmod_log_config to the core, and let every module who wants to call out to\na new provider in the core which collects all available features.", "id": 130667, "time": "2009-09-24T22:32:34Z", "bug_id": 47447, "creation_time": "2009-09-24T22:32:34Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 47447, "text": "What's wrong with using %{REMOTE_ADDR}e ?", "id": 153700, "time": "2012-02-12T14:44:55Z", "creator": "thecybershadow@gmail.com", "creation_time": "2012-02-12T14:44:55Z", "tags": [], "is_private": false}, {"count": 4, "attachment_id": null, "bug_id": 47447, "text": "> What's wrong with using %{REMOTE_ADDR}e ?\nJust does not work.", "id": 180337, "time": "2015-01-17T14:14:26Z", "creator": "alex@net13.info", "creation_time": "2015-01-17T14:14:26Z", "tags": [], "is_private": false}]