[{"count": 0, "tags": [], "bug_id": 41449, "attachment_id": null, "is_private": false, "id": 98436, "time": "2007-01-24T00:03:52Z", "creator": "Bjorn.Wiberg@uadm.uu.se", "creation_time": "2007-01-24T00:03:52Z", "text": "When adding the DAVGenericLockDB to the main server configuration, one gets\n(when performing a configuration test):\n\nSyntax error on line 1570 of /apache/etc/httpd.conf:\nDAVGenericLockDB not allowed here\n\nhttpd.conf looks like:\n\n#\n# mod_dav / mod_dav_fs / mod_dav_lock configuration\n#\n<IfModule mod_dav.c>\n\n  # Never allow Depth: Infinity PROPFIND requests\n  DavDepthInfinity off\n\n  # Specify DAV lock database\n  <IfModule mod_dav_fs.c>\n    DavLockDB /apache/tmp/hidden/DavLock\n  </IfModule>\n\n  # Specify generic DAV lock database\n  <IfModule mod_dav_lock.c>\n    DavGenericLockDB /apache/tmp/hidden/DavGenericLock\n  </IfModule>\n\n</IfModule>\n\n...which is followed by:\n\nNameVirtualHost *:80\n\n<IfDefine SSL>\n  NameVirtualHost *:443\n</IfDefine>\n\n...and later on, virtual hosts, such as:\n\n<VirtualHost _default_:80>"}, {"count": 1, "text": "Following workaround will allow you to specify a generic lock provider\non global level.\n\nHowever I don't yet understand if it make sense to have it declared globally.\nSubversion uses this directive and uses it inside Location directive.\n\nBjorn, can you explain how you are using DAVGenericLockDB directive.\n\nIndex: modules/dav/lock/mod_dav_lock.c\n===================================================================\n--- modules/dav/lock/mod_dav_lock.c     (revision 500367)\n+++ modules/dav/lock/mod_dav_lock.c     (working copy)\n@@ -80,7 +80,8 @@\n static const command_rec dav_lock_cmds[] =\n {\n     /* per server */\n-    AP_INIT_TAKE1(\"DAVGenericLockDB\", dav_lock_cmd_davlockdb, NULL, ACCESS_CONF,\n+    AP_INIT_TAKE1(\"DAVGenericLockDB\", dav_lock_cmd_davlockdb, NULL,\n+                  ACCESS_CONF|RSRC_CONF,\n                   \"specify a lock database\"),\n\n     { NULL }\n[", "bug_id": 41449, "attachment_id": null, "id": 99645, "time": "2007-02-21T14:38:30Z", "creator": "basant.kukreja@sun.com", "creation_time": "2007-02-21T14:38:30Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "basant.kukreja@sun.com", "attachment_id": null, "id": 99646, "time": "2007-02-21T14:40:39Z", "bug_id": 41449, "creation_time": "2007-02-21T14:40:39Z", "is_private": false, "text": "Marking the bug for \"ALL\" platform.\nThe bug reproduces on Linux too."}, {"count": 3, "tags": [], "bug_id": 41449, "is_private": false, "text": "Hello!\n\nCurrently we are not utilizing the generic lock DB at all -- I included it in\nthe configuration for completeness.\n\nI see that the documentation\n(http://httpd.apache.org/docs/2.2/mod/mod_dav_lock.html) states that \"without a\nbackend provider which makes use of it, it's useless and should not be loaded\ninto the server\", so I'll leave it commented out for now.\n\nHowever, the same documentation\n(http://httpd.apache.org/docs/2.2/mod/mod_dav_lock.html#davgenericlockdb) states\n\"Context: server config ...\", so from that, it appears that it should be\navailable to use in the main server configuration. I see no reason for not\nallowing it there, though (the lock database ought to be able to be shared\nbetween all modules needing it, and for all vhosts, in one go?).\n\nBest regards,\nBj\u00f6rn", "id": 99666, "time": "2007-02-21T23:58:45Z", "creator": "Bjorn.Wiberg@uadm.uu.se", "creation_time": "2007-02-21T23:58:45Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "basant.kukreja@sun.com", "is_private": false, "id": 99810, "attachment_id": null, "bug_id": 41449, "creation_time": "2007-02-26T11:06:35Z", "time": "2007-02-26T11:06:35Z", "text": "If backend lock provider provides support of multiple lockdb then in my opinion,\nDAVGenericLockDB must appear in <Directory> container. In that case this is a\ninvalid bug.\n\n<Directory /x>\n...\nDavGenericLockDB var/DAVLock1\n..\n</Directory>\n\n<Directory /x>\n...\nDavGenericLockDB var/DAVLock2\n..\n</Directory>\n\nIf the backend provider only supports a single lock db then it make sense to\nmake it a \"Main configuration\" directive.\n\nAs a safe option, it is made as a directive to be used in Directory container.\n\nSo I think we can mark this bug as \"Invalid\" bug."}, {"count": 5, "text": "Sorry, I meant to write :\n\n<Directory /x>\n...\nDavGenericLockDB var/DAVLock1\n..\n</Directory>\n\n<Directory /y>\n...\nDavGenericLockDB var/DAVLock2\n..\n</Directory>", "bug_id": 41449, "is_private": false, "id": 99811, "time": "2007-02-26T11:08:21Z", "creator": "basant.kukreja@sun.com", "creation_time": "2007-02-26T11:08:21Z", "tags": [], "attachment_id": null}, {"count": 6, "tags": [], "creator": "i.galic@brainsware.org", "is_private": false, "id": 137590, "attachment_id": null, "bug_id": 41449, "creation_time": "2010-06-12T05:36:17Z", "time": "2010-06-12T05:36:17Z", "text": "This directive has been extended to be allowed in VirtualHost and Directory Contexts as well."}]