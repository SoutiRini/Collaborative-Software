[{"count": 0, "tags": [], "text": "Currently, if a request comes in with a header longer than\nmaxHttpHeaderSize, Tomcat drops the connection and does not log\nanything.\n\nHere is what it looks like from client point of view with the default\nmaxHttpHeaderSize of 4K.\n\nOverly long header:\n\n% curl  -H \"$(perl -e 'print q{X: }, q{a}x10000')\" http://tomcat/admin/\ncurl: (52) Empty reply from server\n\nI am adding a small diagnostic message to catch such cases (patch\nattached).\n\nWith that patch in place we get a nice message in the logs and we can\ngrep and see how often we hit the limit:\n\njvm 1    | Sep 15, 2005 6:51:45 PM org.apache.coyote.http11.InternalInputBuffer fill\njvm 1    | INFO: Request header is too large", "is_private": false, "id": 80213, "creation_time": "2005-09-20T21:29:22Z", "time": "2005-09-20T21:29:22Z", "creator": "greg-apache-bugs@nest.cx", "bug_id": 36742, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 36742, "attachment_id": 16467, "id": 80214, "time": "2005-09-20T21:30:19Z", "creator": "greg-apache-bugs@nest.cx", "creation_time": "2005-09-20T21:30:19Z", "is_private": false, "text": "Created attachment 16467\npatch that adds a diagnostic message on header-too-long errors"}, {"count": 2, "tags": [], "bug_id": 36742, "attachment_id": null, "id": 80232, "time": "2005-09-20T22:27:11Z", "creator": "remm@apache.org", "creation_time": "2005-09-20T22:27:11Z", "is_private": false, "text": "Similarly, I don't see the point."}, {"count": 3, "tags": [], "bug_id": 36742, "text": "I actually like the diagnostic message, it's helpful.  It should be a rare event\n(so no big performance hit from logger.info), but when it does happen, the\ndeveloper would want to know...", "id": 80295, "time": "2005-09-22T02:10:16Z", "creator": "yoavs@computer.org", "creation_time": "2005-09-22T02:10:16Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "It would also create a nice way to have the server fills out log files\npredictably. Frankly, it's useless.", "is_private": false, "bug_id": 36742, "id": 80305, "time": "2005-09-22T07:56:03Z", "creator": "remm@apache.org", "creation_time": "2005-09-22T07:56:03Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "Since the patch is logging at the info level - I would guess that most\nproduction environments leave info turned off so the log filling issue wouldn't\nbe a non-issue.", "is_private": false, "bug_id": 36742, "id": 80314, "time": "2005-09-22T15:06:57Z", "creator": "funkman@joedog.org", "creation_time": "2005-09-22T15:06:57Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 80316, "time": "2005-09-22T15:25:40Z", "bug_id": 36742, "creation_time": "2005-09-22T15:25:40Z", "is_private": false, "text": "(In reply to comment #5)\n> Since the patch is logging at the info level - I would guess that most\n> production environments leave info turned off so the log filling issue wouldn't\n> be a non-issue.\n\nOk."}, {"attachment_id": null, "tags": [], "bug_id": 36742, "is_private": false, "count": 7, "id": 83150, "time": "2005-12-02T17:06:00Z", "creator": "yoavs@computer.org", "creation_time": "2005-12-02T17:06:00Z", "text": "Fix applied on 5.0 branch.  Thanks for contributing it."}]