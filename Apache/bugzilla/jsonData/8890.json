[{"count": 0, "tags": [], "bug_id": 8890, "text": "I have reproduced this on 3 different computers running Linux kernel >=2.4.17\nglibc >=2.2.4\nIt works for some time then suddenly it stops working and never seems to work\nagain, the process doesn't seem to be hanged, no 100% cpu load.\n\nI'm not used to debug stuff so please let me know if I can contribute with more\ninfo here's what I think is useful..\n\napache is configured with:\nCFLAGS=\"\" ./configure --prefix=/opt/apache --enable-ssl --enable-maintainer-mode\n\nsunkan:# tail /opt/apache/logs/ssl_engine_log\n[07/May/2002 22:33:42 23203] [info]  Subsequent (No.7) HTTPS request received\nfor child 6 (server new.host.name:443)\n[07/May/2002 22:33:42 23203] [info]  Subsequent (No.8) HTTPS request received\nfor child 6 (server new.host.name:443)\n[07/May/2002 22:33:57 23203] [info]  Connection to child 6 closed with standard\nshutdown(server new.host.name:443, client ::1)\n[07/May/2002 22:34:21 23195] [info]  Connection to child 1 established (server\nnew.host.name:443, client ::1)\n[07/May/2002 22:34:21 23195] [info]  Seeding PRNG with 136 bytes of entropy\n[07/May/2002 22:34:21 23195] [warn]  Failed to acquire global mutex lock\n[07/May/2002 22:34:21 23195] [warn]  Failed to release global mutex lock\nsunkan:#\n\nsunkan:# /opt/apache/bin/httpd -V\nServer version: Apache/2.0.36\nServer built:   May  7 2002 22:21:25\nServer's Module Magic Number: 20020329:1\nArchitecture:   32-bit\nServer compiled with....\n -D APACHE_MPM_DIR=\"server/mpm/prefork\"\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6\n -D APR_USE_SYSVSEM_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D HTTPD_ROOT=\"/opt/apache\"\n -D SUEXEC_BIN=\"/opt/apache/bin/suexec\"\n -D DEFAULT_ERRORLOG=\"logs/error_log\"\n -D SERVER_CONFIG_FILE=\"conf/httpd.conf\"\n\nWhen the server stops serving ssl pages I used this method to try and find out\nwhich process is responsible for that connection.\n\nsunkan:# netstat -anp|grep ht\ntcp        0      0 :::80                   :::*                    LISTEN     \n23193/httpd         \ntcp        0      0 :::443                  :::*                    LISTEN     \n23193/httpd         \ntcp      645      0 ::1:443                 ::1:32969               ESTABLISHED\n23195/httpd         \n\nsunkan:# gdb /opt/apache/bin/httpd 23195\n0x402aa815 in sigsuspend () from /lib/libc.so.6\n(gdb) bt\n#0  0x402aa815 in sigsuspend () from /lib/libc.so.6\n#1  0x4026fd8b in __pthread_wait_for_restart_signal () from /lib/libpthread.so.0\n#2  0x402714bb in __pthread_alt_lock () from /lib/libpthread.so.0\n#3  0x4026e895 in pthread_mutex_lock () from /lib/libpthread.so.0\n#4  0x40047143 in apr_thread_mutex_lock (mutex=0x8130780) at thread_mutex.c:149\n#5  0x40045ae2 in apr_global_mutex_lock (mutex=0x81306f8) at global_mutex.c:130\n#6  0x0807b01f in ssl_mutex_on (s=0x8131e40) at ssl_engine_mutex.c:101\n#7  0x080818f1 in ssl_scache_dbm_store (s=0x8131e40, id=0x8174ff8 \"\\035@z&#65533;&#65533;&#65533;\\203\n\\203&#65533;0*&#65533;c&#65533;5\\f&#65533;&#65533;\\232&#65533;&#65533;\\227&#65533;\\177&#65533;&#65533;&#65533;&#65533;L\\e\\036&#65533; \", idlen=32, expiry=1020803961,\nsess=0x8174fb0) at ssl_scache_dbm.c:172\n#8  0x08081184 in ssl_scache_store (s=0x8131e40, id=0x8174ff8 \"\\035@z&#65533;&#65533;&#65533;\\203\n\\203&#65533;0*&#65533;c&#65533;5\\f&#65533;&#65533;\\232&#65533;&#65533;\\227&#65533;\\177&#65533;&#65533;&#65533;&#65533;L\\e\\036&#65533; \", idlen=32, expiry=1020803961,\nsess=0x8174fb0) at ssl_scache.c:127\n#9  0x0807a0cf in ssl_callback_NewSessionCacheEntry (ssl=0x813f5e8,\nsession=0x8174fb0) at ssl_engine_kernel.c:1717\n#10 0x400daf7c in ssl_update_cache () from /usr/lib/libssl.so.0.9.6\nCannot access memory at address 0x3\n(gdb)", "id": 15670, "time": "2002-05-07T20:59:05Z", "creator": "sunkan@zappa.cx", "creation_time": "2002-05-07T20:59:05Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "jwoolley@apache.org", "attachment_id": null, "id": 15680, "time": "2002-05-07T22:40:37Z", "bug_id": 8890, "creation_time": "2002-05-07T22:40:37Z", "is_private": false, "text": "We've already been working on this issue.  A patch will be committed for 2.0.37 soon. "}, {"count": 2, "tags": [], "text": "\n\n*** This bug has been marked as a duplicate of 8124 ***", "is_private": false, "id": 15684, "creator": "jwoolley@apache.org", "time": "2002-05-07T22:42:57Z", "bug_id": 8890, "creation_time": "2002-05-07T22:42:57Z", "attachment_id": null}]