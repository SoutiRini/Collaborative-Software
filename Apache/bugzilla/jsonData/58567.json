[{"count": 0, "tags": [], "text": "The following page fails to compile in tomcat 8.0.27 and 8.0.28. It works in all prior versions that we ever tried, including earlier versions of 8.x, and also versions of 7.x and 6.x. It is a regression and it breaks many pages in my application.\n\nHere is the JSP text:\n\n<%@ page pageEncoding=\"UTF-8\" %>\n<%@ taglib uri=\"http://java.sun.com/jsp/jstl/core\" prefix=\"c\" %>\n<%\n\n\trequest.setAttribute(\"myAccountEmail\", \"test@example.com\");\n\n%>\n<c:if test=\"${(myAccountEmail != null) && (myAccountEmail != \\\"\\\")}\">\n\tnot empty\n</c:if>\n\nNote #1: trying to use system property org.apache.jasper.compiler. Parser.STRICT_QUOTE_ESCAPING=false doesn't help. Although, even if it did, I don't think it is a valid solution/workaround, as I am not in control of the tomcat deployment - I can't tell all my clients to add this property.\n\nNote #2: I know that I can use EL empty operator. My concern right now is with existing code deployed at clients' sites.", "is_private": false, "id": 186138, "creator": "amir.yoni@gmail.com", "time": "2015-11-01T09:31:22Z", "bug_id": 58567, "creation_time": "2015-11-01T09:31:22Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 58567, "attachment_id": null, "text": "I forgot to add the error itself:\n\norg.apache.jasper.JasperException: /index.jsp (line: 8, column: 12) attribute value for [test] is not properly terminated\n\torg.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:41)\n\torg.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:275)\n\torg.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:91)\n\torg.apache.jasper.compiler.Parser.parseAttributeValue(Parser.java:270)\n\torg.apache.jasper.compiler.Parser.parseAttribute(Parser.java:235)\n\torg.apache.jasper.compiler.Parser.parseAttributes(Parser.java:163)\n\torg.apache.jasper.compiler.Parser.parseAttributes(Parser.java:154)\n\torg.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1236)\n\torg.apache.jasper.compiler.Parser.parseElements(Parser.java:1455)\n\torg.apache.jasper.compiler.Parser.parse(Parser.java:139)\n\torg.apache.jasper.compiler.ParserController.doParse(ParserController.java:227)\n\torg.apache.jasper.compiler.ParserController.parse(ParserController.java:100)\n\torg.apache.jasper.compiler.Compiler.generateJava(Compiler.java:199)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:356)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:336)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:323)\n\torg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:585)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:363)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:396)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:340)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)", "id": 186139, "time": "2015-11-01T09:35:47Z", "creator": "amir.yoni@gmail.com", "creation_time": "2015-11-01T09:35:47Z", "is_private": false}, {"count": 2, "tags": [], "creator": "violetagg@apache.org", "attachment_id": null, "id": 186183, "time": "2015-11-02T12:55:32Z", "bug_id": 58567, "creation_time": "2015-11-02T12:55:32Z", "is_private": false, "text": "\n\n*** This bug has been marked as a duplicate of bug 57136 ***"}, {"count": 3, "tags": [], "bug_id": 58567, "text": "Why did you resolve this bug as duplicate? They may sound similar but I think the severity of them is much different.\nThe other bug, 57136, exists in tomcat 7, and I never encountered it in my life or felt its pain in any way.\nThis bug, however, is a regression between 8.0.26 and 8.0.27 and is hurting my JSPs very badly.\n57136 is about $ and #, this bug is about quotes.", "id": 186185, "time": "2015-11-02T13:01:24Z", "creator": "amir.yoni@gmail.com", "creation_time": "2015-11-02T13:01:24Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 58567, "attachment_id": null, "text": "This was correctly marked as a duplicate of 57136.\n\nThis issue described is not a regression, it is a side effect of fixing the long standing bug in EL parsing described in 57136.\n\n*** This bug has been marked as a duplicate of bug 57136 ***", "id": 186186, "time": "2015-11-02T13:03:27Z", "creator": "markt@apache.org", "creation_time": "2015-11-02T13:03:27Z", "is_private": false}, {"count": 5, "tags": [], "creator": "amir.yoni@gmail.com", "attachment_id": null, "id": 186189, "time": "2015-11-02T13:09:42Z", "bug_id": 58567, "creation_time": "2015-11-02T13:09:42Z", "is_private": false, "text": "Hi Mark,\nI am not sure if I understand your claim: you are saying that the side-effect is not a regression. Are you saying that it is a desired side-effect?\nAlso, I see that 57136 is still open. Are there plans to fix it soon? Was this fix that you refer to (the one that created the side-effect) applied in 8.0.27?\nThanks,\nYoni"}, {"count": 6, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 186191, "attachment_id": null, "bug_id": 58567, "creation_time": "2015-11-02T13:32:20Z", "time": "2015-11-02T13:32:20Z", "text": "(In reply to Yoni Amir from comment #5)\n\nTry reading the bug report for 57136. The answers to all of your questions may be found there.\n\n> I am not sure if I understand your claim: you are saying that the\n> side-effect is not a regression.\n\nYes.\n\n> Are you saying that it is a desired side-effect?\n\nYes.\n\n> Also, I see that 57136 is still open.\n\nIt is open for an enhancement to add an option to restore the broken behaviour to give those users with broken web applications to upgrade to newer Tomcat versions without having to fix their applications.\n\n> Are there plans to fix it soon?\n\nThe issue has already been fixed. There are no plans to implement the enhancement that I am aware of.\n\n> Was  this fix that you refer to (the one that created the side-effect)\n> applied in 8.0.27?\n\nYes."}]