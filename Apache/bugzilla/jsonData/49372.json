[{"count": 0, "tags": [], "bug_id": 49372, "text": "Using the current pre-7.0.0 trunk as of now (r950811),\nto reproduce:\n1) start an instance of Tomcat\n2) start the second instance of Tomcat using the same configuration\n\nThe start fails (as expected), but the messages are accompanied with \nLifecycleException:  An invalid Lifecycle transition was attempted ([before_stop]) for component [StandardServer[8005]] in state [STARTING]\n\nSee the log below.\n\n03.06.2010 3:14:08 org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 3145 ms\n03.06.2010 3:14:09 org.apache.catalina.core.StandardService startInternal\nINFO: Starting service Catalina\n03.06.2010 3:14:09 org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.0-dev\n03.06.2010 3:14:09 org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory docs\n03.06.2010 3:14:11 org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory examples\n03.06.2010 3:14:12 org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory host-manager\n03.06.2010 3:14:13 org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory manager\n03.06.2010 3:14:13 org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory ROOT\n03.06.2010 3:14:13 org.apache.coyote.http11.Http11Protocol init\nSEVERE: Error initializing endpoint\njava.net.BindException: Address already in use: JVM_Bind <null>:8080\n\tat org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:368)\n\tat org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:125)\n\tat org.apache.catalina.connector.Connector.startInternal(Connector.java:866)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:137)\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:437)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:137)\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:648)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:137)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:576)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:415)\nCaused by: java.net.BindException: Address already in use: JVM_Bind\n\tat java.net.PlainSocketImpl.socketBind(Native Method)\n\tat java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)\n\tat java.net.ServerSocket.bind(ServerSocket.java:319)\n\tat java.net.ServerSocket.<init>(ServerSocket.java:185)\n\tat java.net.ServerSocket.<init>(ServerSocket.java:141)\n\tat org.apache.tomcat.util.net.DefaultServerSocketFactory.createSocket(DefaultServerSocketFactory.java:52)\n\tat org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:357)\n\t... 14 more\n03.06.2010 3:14:13 org.apache.catalina.startup.Catalina start\nSEVERE: Catalina.start: \nLifecycleException:  Protocol handler initialization failed: java.net.BindException: Address already in use: JVM_Bind <null>:8080\n\tat org.apache.catalina.connector.Connector.startInternal(Connector.java:868)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:137)\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:437)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:137)\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:648)\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:137)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:576)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:415)\n03.06.2010 3:14:13 org.apache.catalina.startup.Catalina start\nINFO: Server startup in 4737 ms\n03.06.2010 3:14:13 org.apache.catalina.core.StandardServer await\nSEVERE: StandardServer.await: create[localhost:8005]: \njava.net.BindException: Address already in use: JVM_Bind\n\tat java.net.PlainSocketImpl.socketBind(Native Method)\n\tat java.net.PlainSocketImpl.bind(PlainSocketImpl.java:365)\n\tat java.net.ServerSocket.bind(ServerSocket.java:319)\n\tat java.net.ServerSocket.<init>(ServerSocket.java:185)\n\tat org.apache.catalina.core.StandardServer.await(StandardServer.java:359)\n\tat org.apache.catalina.startup.Catalina.await(Catalina.java:654)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:608)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\tat java.lang.reflect.Method.invoke(Method.java:597)\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:415)\n03.06.2010 3:14:13 org.apache.catalina.startup.Catalina stop\nSEVERE: Catalina.stop\nLifecycleException:  An invalid Lifecycle transition was attempted ([before_stop]) for component [StandardServer[8005]] in state [STARTING]\n\tat org.apache.catalina.util.LifecycleBase.invalidTransition(LifecycleBase.java:315)\n\tat org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:204)\n\tat org.apache.catalina.startup.Catalina.stop(Catalina.java:641)\n\tat org.apache.catalina.startup.Catalina$CatalinaShutdownHook.run(Catalina.java:783)", "id": 137288, "attachment_id": null, "creator": "knst.kolinko@gmail.com", "creation_time": "2010-06-02T19:23:32Z", "time": "2010-06-02T19:23:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 49372, "attachment_id": null, "id": 137393, "time": "2010-06-06T17:53:16Z", "creator": "markt@apache.org", "creation_time": "2010-06-06T17:53:16Z", "is_private": false, "text": "Fixed in trunk. Will be in 7.0.0 onwards"}, {"count": 2, "tags": [], "creator": "vishal.jain.2@volvo.com", "text": "\nI am facing this issue with Apache Tomcat/7.0.5\nCheck the below Logs...\n\n====================\nJan 3, 2011 6:06:12 PM org.apache.coyote.ajp.AjpProtocol init\nINFO: Initializing Coyote AJP/1.3 on ajp-8009\nJan 3, 2011 6:06:12 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 757 ms\nJan 3, 2011 6:06:12 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service Catalina\nJan 3, 2011 6:06:12 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.5\nJan 3, 2011 6:06:12 PM org.apache.catalina.startup.HostConfig deployWAR\nINFO: Deploying web application archive xxx.war\nJan 3, 2011 6:06:13 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory manager\nJan 3, 2011 6:06:13 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory docs\nJan 3, 2011 6:06:13 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory ROOT\nJan 3, 2011 6:06:13 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory host-manager\nJan 3, 2011 6:06:13 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory examples\nJan 3, 2011 6:06:13 PM org.apache.catalina.core.StandardService startInternal\nSEVERE: Failed to start connector [Connector[HTTP/1.1-8080]]\nLifecycleException:  An invalid Lifecycle transition was attempted ([before_start]) for component [Connector[HTTP/1.1-8080]] in state [INITIALIZING]\n        at org.apache.catalina.util.LifecycleBase.invalidTransition(LifecycleBase.java:336)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:134)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:456)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:674)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:140)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:596)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431)\nJan 3, 2011 6:06:13 PM org.apache.coyote.ajp.AjpProtocol start\nINFO: Starting Coyote AJP/1.3 on ajp-8009\nJan 3, 2011 6:06:13 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 1093 ms\n========================", "id": 143034, "time": "2011-01-03T07:42:14Z", "bug_id": 49372, "creation_time": "2011-01-03T07:42:14Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 143069, "time": "2011-01-04T12:57:38Z", "bug_id": 49372, "creation_time": "2011-01-04T12:57:38Z", "is_private": false, "text": "Thanks for the report. This is fixed in 7.0.x and will be included in 7.0.6 onwards."}]