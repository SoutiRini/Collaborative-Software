[{"count": 0, "tags": [], "creator": "tims@lpl.arizona.edu", "attachment_id": null, "id": 83053, "time": "2005-12-01T02:13:40Z", "bug_id": 37729, "creation_time": "2005-12-01T02:13:40Z", "is_private": false, "text": "I can't apache 2.0.55 to build with the exact same environment/options that I\nused for 2.0.54:\n\nI assume this is an ssl issue.\n\n./configure WITH_LDAP=yes --prefix=/usr/local/apache2\n--exec-prefix=/usr/local/apache2/2.0.55 --enable-modules=all --enable-auth-anon\n--enable-auth-dbm --enable-auth-digest --enable-file-cache --enable-charset-lite\n--enable-cache --enable-disk-cache --enable-mem-cache --enable-deflate\n--enable-logio --enable-mime-magic --enable-cern-meta --enable-expires\n--enable-headers --enable-unique-id --enable-http --enable-status\n--enable-autoindex --enable-info --enable-cgi --enable-cgid --enable-vhost-alias\n--enable-speling --enable-userdir --enable-alias --enable-rewrite --enable-so\n--enable-ssl --enable-proxy --enable-proxy-connect --enable-proxy-http\n--with-ssl=/usr/local/ssl --with-mpm=worker --srcdir=../httpd-2.0.55 && make\n\nAt the end of the make I get:\n\nUndefined                       first referenced\n symbol                             in file\nX509_STORE_CTX_set_depth            modules/ssl/.libs/mod_ssl.a(ssl_engine_kernel.o)\nld: fatal: Symbol referencing errors. No output written to .libs/httpd\ncollect2: ld returned 1 exit status\nmake[1]: *** [httpd] Error 1\nmake[1]: Leaving directory `/export/src/svn/apache/build/httpd-2.0.55'\nmake: *** [all-recursive] Error 1\n\nI'll attach some more info in a minute"}, {"count": 1, "tags": [], "creator": "tims@lpl.arizona.edu", "attachment_id": 17096, "text": "Created attachment 17096\nConfigure Log\n\nConfigure Log for 2.0.54", "id": 83054, "time": "2005-12-01T02:17:11Z", "bug_id": 37729, "creation_time": "2005-12-01T02:17:11Z", "is_private": false}, {"count": 2, "text": "Created attachment 17097\nConfigure Log for 2.0.55", "bug_id": 37729, "attachment_id": 17097, "id": 83055, "time": "2005-12-01T02:17:44Z", "creator": "tims@lpl.arizona.edu", "creation_time": "2005-12-01T02:17:44Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 37729, "attachment_id": 17098, "id": 83056, "time": "2005-12-01T02:31:24Z", "creator": "tims@lpl.arizona.edu", "creation_time": "2005-12-01T02:31:24Z", "is_private": false, "text": "Created attachment 17098\nconfig/make output (2.0.55)\n\nSorry it's everything combined..."}, {"count": 4, "tags": [], "text": "Do you have another version of OpenSSL installed in /usr/local/lib?\n\nPlease run:\n\n  $ make LTFLAGS=\n\nand attach the output.", "is_private": false, "id": 83066, "creator": "jorton@redhat.com", "time": "2005-12-01T10:03:55Z", "bug_id": 37729, "creation_time": "2005-12-01T10:03:55Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 37729, "text": "I'm not in a position to verify on Solaris, but this looks remarkably like Bug \n#37562. ", "id": 83070, "time": "2005-12-01T13:29:28Z", "creator": "nick@webthing.com", "creation_time": "2005-12-01T13:29:28Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "(In reply to comment #4)\n> Do you have another version of OpenSSL installed in /usr/local/lib?\n> \n> Please run:\n> \n>   $ make LTFLAGS=\n> \n> and attach the output.\n\n/usr/local/lib contains:\n\n# ls -ls *ssl*\n-rw-r--r--   1 root     other     264318 Apr 21  2005 libssl.a\n\n\n/usr/.local/ssl/lib contains:\n\n# ls -la\ntotal 10700\ndrwxr-xr-x   4 root     bin          512 Oct 31 04:59 .\ndrwxr-xr-x  10 root     other        512 Oct 31 04:59 ..\ndrwxr-xr-x   2 root     bin          512 Oct 31 04:59 engines\n-rw-r--r--   1 root     bin      1973600 Oct 15 01:55 libcrypto.a\nlrwxrwxrwx   1 root     other         18 Oct  5 10:40 libcrypto.so ->\nlibcrypto.so.0.9.8\n-r-xr-xr-x   1 root     bin      1185760 Oct 15 03:10 libcrypto.so.0.9.7\n-r-xr-xr-x   1 root     bin      1404288 Oct 15 01:55 libcrypto.so.0.9.8\n-rw-r--r--   1 root     bin       347960 Oct 15 01:55 libssl.a\nlrwxrwxrwx   1 root     other         15 Oct  5 10:40 libssl.so -> libssl.so.0.9.8\n-r-xr-xr-x   1 root     bin       215596 Oct 15 03:10 libssl.so.0.9.7\n-r-xr-xr-x   1 root     bin       273396 Oct 15 01:55 libssl.so.0.9.8\ndrwxr-xr-x   2 root     bin          512 Oct 31 04:59 pkgconfig\n\n# make LTFLAGS=\n\nMaking all in srclib\nMaking all in apr\nMaking all in strings\nMaking all in passwd\nMaking all in tables\nMaking all in file_io/unix\nMaking all in network_io/unix\nMaking all in threadproc/unix\nMaking all in misc/unix\nMaking all in locks/unix\nMaking all in time/unix\nMaking all in mmap/unix\nMaking all in shmem/unix\nMaking all in user/unix\nMaking all in memory/unix\nMaking all in atomic/unix\nMaking all in poll/unix\nMaking all in support/unix\nMaking all in dso/unix\nMaking all in apr-util\nMaking all in buckets\nMaking all in crypto\nMaking all in dbm\nMaking all in sdbm\nMaking all in .\nMaking all in encoding\nMaking all in hooks\nMaking all in ldap\nMaking all in uri\nMaking all in xml\nMaking all in misc\nMaking all in strmatch\nMaking all in xlate\nMaking all in pcre\nMaking all in os\nMaking all in unix\nMaking all in server\nMaking all in mpm\nMaking all in worker\nMaking all in modules\nMaking all in aaa\nMaking all in cache\nMaking all in experimental\nMaking all in filters\nMaking all in loggers\nMaking all in metadata\nMaking all in proxy\nMaking all in ssl\nMaking all in http\nMaking all in dav/main\nMaking all in generators\nMaking all in dav/fs\nMaking all in mappers\nMaking all in support\n/export/src/svn/apache/build/httpd-2.0.55/srclib/apr/libtool --silent\n--mode=link gcc  -g -O2 -pthreads    -DSOLARIS2=9 -D_POSIX_PTHREAD_SEMANTICS\n-D_REENTRANT -DAP_HAVE_DESIGNATED_INITIALIZER  \n-I/export/src/svn/apache/build/httpd-2.0.55/srclib/apr/include\n-I/export/src/svn/apache/build/httpd-2.0.55/srclib/apr-util/include\n-I/usr/local/include -I. -I/export/src/svn/apache/build/httpd-2.0.55/os/unix\n-I/export/src/svn/apache/build/httpd-2.0.55/server/mpm/worker\n-I/export/src/svn/apache/build/httpd-2.0.55/modules/http\n-I/export/src/svn/apache/build/httpd-2.0.55/modules/filters\n-I/export/src/svn/apache/build/httpd-2.0.55/modules/proxy\n-I/export/src/svn/apache/build/httpd-2.0.55/include\n-I/export/src/svn/apache/build/httpd-2.0.55/modules/generators\n-I/export/src/svn/apache/build/httpd-2.0.55/server\n-I/usr/local/ssl/include/openssl -I/usr/local/ssl/include\n-I/export/src/svn/apache/build/httpd-2.0.55/modules/dav/main -export-dynamic\n-L/usr/local/lib -L/usr/local/ssl/lib -R/usr/local/ssl/lib   -o httpd \nmodules.lo  modules/aaa/mod_access.la modules/aaa/mod_auth.la\nmodules/aaa/mod_auth_anon.la modules/aaa/mod_auth_dbm.la\nmodules/aaa/mod_auth_digest.la modules/cache/mod_file_cache.la\nmodules/experimental/mod_charset_lite.la modules/experimental/mod_cache.la\nmodules/experimental/mod_disk_cache.la modules/experimental/mod_mem_cache.la\nmodules/filters/mod_ext_filter.la modules/filters/mod_include.la\nmodules/filters/mod_deflate.la modules/loggers/mod_log_config.la\nmodules/loggers/mod_log_forensic.la modules/loggers/mod_logio.la\nmodules/metadata/mod_env.la modules/metadata/mod_mime_magic.la\nmodules/metadata/mod_cern_meta.la modules/metadata/mod_expires.la\nmodules/metadata/mod_headers.la modules/metadata/mod_usertrack.la\nmodules/metadata/mod_unique_id.la modules/metadata/mod_setenvif.la\nmodules/proxy/mod_proxy.la modules/proxy/mod_proxy_connect.la\nmodules/proxy/mod_proxy_ftp.la modules/proxy/mod_proxy_http.la\nmodules/ssl/mod_ssl.la modules/http/mod_http.la modules/http/mod_mime.la\nmodules/dav/main/mod_dav.la modules/generators/mod_status.la\nmodules/generators/mod_autoindex.la modules/generators/mod_asis.la\nmodules/generators/mod_info.la modules/generators/mod_cgid.la\nmodules/generators/mod_cgi.la modules/dav/fs/mod_dav_fs.la\nmodules/mappers/mod_vhost_alias.la modules/mappers/mod_negotiation.la\nmodules/mappers/mod_dir.la modules/mappers/mod_imap.la\nmodules/mappers/mod_actions.la modules/mappers/mod_speling.la\nmodules/mappers/mod_userdir.la modules/mappers/mod_alias.la\nmodules/mappers/mod_rewrite.la modules/mappers/mod_so.la \nserver/mpm/worker/libworker.la  server/libmain.la  os/unix/libos.la -lz -lssl\n-lcrypto /export/src/svn/apache/build/httpd-2.0.55/srclib/pcre/libpcre.la\n/export/src/svn/apache/build/httpd-2.0.55/srclib/apr-util/libaprutil-0.la -lgdbm\n-ldb-4.3 -lexpat -liconv\n/export/src/svn/apache/build/httpd-2.0.55/srclib/apr/libapr-0.la -lsendfile -lrt\n-lm -lsocket -lnsl -lresolv -lpthread -ldl\nUndefined                       first referenced\n symbol                             in file\nX509_STORE_CTX_set_depth            modules/ssl/.libs/mod_ssl.a(ssl_engine_kernel.o)\nld: fatal: Symbol referencing errors. No output written to .libs/httpd\ncollect2: ld returned 1 exit status\n*** Error code 1\nmake: Fatal error: Command failed for target `httpd'\nCurrent working directory /export/src/svn/apache/build/httpd-2.0.55\n*** Error code 1\nmake: Fatal error: Command failed for target `all-recursive'\n", "attachment_id": null, "bug_id": 37729, "id": 83109, "time": "2005-12-02T00:55:50Z", "creator": "tims@lpl.arizona.edu", "creation_time": "2005-12-02T00:55:50Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 37729, "text": "(In reply to comment #5)\n> I'm not in a position to verify on Solaris, but this looks remarkably like Bug \n> #37562. \n\nIt looks very similar. I am currently using the --with-ssl flag pointed towards\na packaged installation of openssl inside of /usr/local/ssl\n\nSee the above comments (in the bug report) for the contents of those directories.", "id": 83110, "attachment_id": null, "creator": "tims@lpl.arizona.edu", "creation_time": "2005-12-02T00:59:41Z", "time": "2005-12-02T00:59:41Z", "is_private": false}, {"count": 8, "text": "Yes, this is the same problem the reporter had in bug 37562 - mismatched\nheader/libraries.\n\nThe OpenSSL libraries in /usr/local/{include,lib} will be picked up before those\nin /usr/local/ssl/{include,lib} - having two different installations like this\nis doomed to failure, you should remove one and rebuild.", "bug_id": 37729, "attachment_id": null, "id": 85982, "time": "2006-02-20T22:31:58Z", "creator": "jorton@redhat.com", "creation_time": "2006-02-20T22:31:58Z", "tags": [], "is_private": false}]