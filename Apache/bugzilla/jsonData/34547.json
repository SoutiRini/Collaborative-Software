[{"count": 0, "tags": [], "text": "Hi 'catters. I am having a small but annoying behavior in Tomcat. Tested on\n5.0.28 and 5.5.9\n\nI use Eclipse 3.02 for development, along the Sysdeo Tomcat Plugin and\nFreemarker for MVC. My context path is set to be reloadable, and when i am\ncoding, if i make some change to the code, the context gets reloaded by the\nplugin, and a session attribute gets null'ed.\n\nThe weirdest thing is that not all of the session attributes are nulled. Just\nthis one we will call \"user\".\n\nI will try to explain what happens with pseudocode.\n\nWhen the users log on to my application, this happens:\n\nForumUser user = run_sql_here;\n\nForumUser is a bean with some properties. That query stores:\n-a user id (int)\n-a timezone (string)\n-a language (string)\n\nAll of the other attributes in the object are not used at this time.\n\nsession.setAttribute(\"logged_user_name\",username);\nsession.setAttribute(\"permission\",permissions);\n\nif (user!=null) {\n    session.setAttribute(\"userpreferences\",user);\n}\n\nThis is the ONLY time that attribute gets set. It ONLY gets removed when the\nsession is invalidated.\n\nWhen i change code and the context gets reloaded, the \"user\" attribute gets\nnull, and the other 2 attributes (permission and logged_user_name) are OK\n\nIf i don't reload the context, everything is OK.\n\nDoes anyone have any idea of what is going on?\n\nDo you guys need my code? I will gladly do whatever test you need me to\ndo to resolve this. It is very annoying to keep logging out and back in to test\nnew code so my session gets corrected", "is_private": false, "id": 73877, "creator": "fleona@cantv.net", "time": "2005-04-21T04:11:12Z", "bug_id": 34547, "creation_time": "2005-04-21T04:11:12Z", "attachment_id": null}, {"count": 1, "text": "Oh sorry i should have mentioned that i use java 1.4.2_07 on linux (arch linux),\nkernel 2.6.11 with glibc 2.3.4 with NTPL", "bug_id": 34547, "is_private": false, "id": 73878, "time": "2005-04-21T04:13:36Z", "creator": "fleona@cantv.net", "creation_time": "2005-04-21T04:13:36Z", "tags": [], "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "remm@apache.org", "is_private": false, "id": 73884, "time": "2005-04-21T08:54:25Z", "bug_id": 34547, "creation_time": "2005-04-21T08:54:25Z", "tags": [], "text": "Please post on tomcat-user instead, as this does not look like a bug."}, {"count": 3, "attachment_id": null, "creator": "fleona@cantv.net", "is_private": false, "id": 73910, "time": "2005-04-21T16:46:15Z", "bug_id": 34547, "creation_time": "2005-04-21T16:46:15Z", "tags": [], "text": "Why this doesn't look like a bug? Tomcat deletes an object in my session. If it would delete all objects, \nthen i wouldn't have posted this, since i would have thought that reloading a context would delete the \nwhole session.\n\nI think my code is ok since i just set that attribute (the one that gets null) at login."}, {"count": 4, "tags": [], "bug_id": 34547, "attachment_id": null, "id": 73914, "time": "2005-04-21T18:18:37Z", "creator": "funkman@joedog.org", "creation_time": "2005-04-21T18:18:37Z", "is_private": false, "text": "Custom objects which do not implement java.io.Serializable cannot be persisted\nacross restarts. There should be a message in the logs stating so. Use\ntomcat-user  for more details.\n\nBugzilla is not a support forum/help desk."}, {"count": 5, "attachment_id": null, "creator": "fleona@cantv.net", "is_private": false, "id": 73917, "time": "2005-04-21T20:45:36Z", "bug_id": 34547, "creation_time": "2005-04-21T20:45:36Z", "tags": [], "text": "Yes, i asked in the list and indeed that was the problem. I of course know\nbugzilla isn't a help desk, i only posted this because i thought it was a bug,\nsince my other objects in the session were plain strings and weren't\nexperiencing this behavior. That probably means strings implement Serializable\nor something and i wasn't aware of that.\n\nThanks for the help! :)"}]