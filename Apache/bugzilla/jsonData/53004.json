[{"count": 0, "tags": [], "text": "I have ant 1.8.3 installed with all optional jars in it's lib directory (I ran fetch to retrieve them).\n\nI've created a simple mail task as shown below (mailhost and email addresses were valid).\n\n  <target name=\"mailtest\" description=\"Test of javamail\">\t\t\n    <echo message=\"Attempting to send email\"/>\n    <mail mailhost=\"my.mailserver.com\" mailport=\"25\" subject=\"Test build\">\n      <from address=\"myname@email.com\"/>\n      <to address=\"myname@email.com\"/>\n      <message>Test</message>\n    </mail>\n  </target>\n\nThe task works perfectly when my JAVA_HOME points to Java 6 (jdk1.6.0_31) but when I change it to Java 7 (jdk1.7.0_03) I get the Exception SMTPSendFailedException: 354 go ahead.\n\nStack Trace shown below ...\n\nc:\\opt\\ntc\\include\\testtargets.xml:85: Problem while sending mime mail:\n\tat org.apache.tools.ant.ProjectHelper.addLocationToBuildException(ProjectHelper.java:551)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:444)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n\tat sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:601)\n\tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n\tat org.apache.tools.ant.Task.perform(Task.java:348)\n\tat org.apache.tools.ant.Target.execute(Target.java:392)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:413)\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1368)\n\tat org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1251)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:811)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:217)\n\tat org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)\n\tat org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)\nCaused by: c:\\opt\\ntc\\include\\testtargets.xml:85: Problem while sending mime mail:\n\tat org.apache.tools.ant.taskdefs.email.MimeMailer.send(MimeMailer.java:261)\n\tat org.apache.tools.ant.taskdefs.email.EmailTask.execute(EmailTask.java:577)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n\tat sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:601)\n\tat org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)\n\tat org.apache.tools.ant.Task.perform(Task.java:348)\n\tat org.apache.tools.ant.Target.execute(Target.java:392)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:413)\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)\n\tat org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1251)\n\tat org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442)\n\t... 16 more\nCaused by: com.sun.mail.smtp.SMTPSendFailedException: 354 go ahead\n\n\tat com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:1388)\n\tat com.sun.mail.smtp.SMTPTransport.finishData(SMTPTransport.java:1215)\n\tat com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:586)\n\tat org.apache.tools.ant.taskdefs.email.MimeMailer.send(MimeMailer.java:258)\n\t... 29 more\n\nWe use the same functionality in our application using Java 7 (although we use the Transport.send() static method to send MIME mail rather than the transport.sendMessage() method) without an issue (so this could potentially be an issue with Java 7 instead).", "is_private": false, "bug_id": 53004, "id": 155367, "time": "2012-03-29T15:22:50Z", "creator": "nanthomp1@gmail.com", "creation_time": "2012-03-29T15:22:50Z", "attachment_id": null}]