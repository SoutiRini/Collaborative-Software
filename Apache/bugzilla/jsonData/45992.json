[{"count": 0, "tags": [], "bug_id": 45992, "attachment_id": null, "is_private": false, "id": 121444, "time": "2008-10-12T08:42:17Z", "creator": "florent.andre-dev@4sengines.com", "creation_time": "2008-10-12T08:42:17Z", "text": "I have an error with the display of subnews. \n\nI want to create this architecture : \n- parent news folder (eg : \"all news\") \n-- child news folder 1 (eg : \"Financial news\") \n--- news item 1 \n--- news item 2 \n-- child news folder 2 (eg : \"Motor news\") \n\nIf child news don't have news item inside (xhtml document), a clic on the \"parent news folder\" (\"all news\") fired an error. \n\n\nI found a solution with this two modifications  \n\n1--------- news module : sitemap.xmap--------------------\nIn the :\n <map:match pattern=\"feedContent/news/*/*/*/*/*\">\n__\nAfter : \n<map:transform src=\"fallback://lenya/modules/news/xslt/includeSubNews.xsl\">\n          <map:parameter name=\"pub\" value=\"{2}\"/>\n          <map:parameter name=\"area\" value=\"{3}\"/>\n          <map:parameter name=\"format\" value=\"{1}\"/>\n        </map:transform>\n        <map:transform type=\"include\"/>\n__\nAdd:\n <map:transform src=\"fallback://lenya/modules/collection/xslt/prepareInclude.xsl\">\n          <map:parameter name=\"pub\" value=\"{2}\"/>\n          <map:parameter name=\"area\" value=\"{3}\"/>\n          <map:parameter name=\"uuid\" value=\"{4}\"/>\n          <map:parameter name=\"language\" value=\"{5}\"/>\n          <map:parameter name=\"format\" value=\"{1}\"/>\n        </map:transform>\n        <map:transform type=\"include\"/>\n\n<map:transform src=\"fallback://lenya/modules/news/xslt/includeSubNews.xsl\">\n          <map:parameter name=\"pub\" value=\"{2}\"/>\n          <map:parameter name=\"area\" value=\"{3}\"/>\n          <map:parameter name=\"format\" value=\"{1}\"/>\n        </map:transform>\n        <map:transform type=\"include\"/>\n\n2 --------------- news module : /xslt/collection2xhtml.xsl ---------\nIN : \n<xsl:template match=\"col:document\">\n__\nComment : \n      <xsl:apply-templates select=\"xhtml:html/xhtml:body//xhtml:p[1]\" mode=\"excerpt\"/>\n__\nADD after the comment : \n        <xsl:apply-templates select=\"xhtml:html/xhtml:body//xhtml:div[@class='newsItem']\"/>\n__\nADD this new template : \n      <xsl:template match=\"xhtml:div[@class='newsItem']\">\n                <div id=\"body\">\n                        <xsl:apply-templates select=\"@*|node()\"/>\n<!-- this is another solution, display are similars\n                <xsl:copy-of select=\"xhtml:h2\"/>\n-->\n                </div>\n        </xsl:template>\n\n========== Note and problem =======\nNote : \n\n* The <div id=\"body\"> in the <xsl:template match=\"xhtml:div[@class='newsItem']\"> is just for have an indent display. Another id, to define in the CSS, have to put here.\n\nProblem : \n\n* I don't find the solution for display for each post the first $maxword of the first paragraph.\n\nAttachment : \nBeforeCollection2-XX-XX.xml : the input flow of collection2xhtml.xsl."}, {"count": 1, "tags": [], "creator": "florent.andre-dev@4sengines.com", "text": "Created attachment 22714\nThe flow input of the collection2xhtml", "id": 121445, "time": "2008-10-12T08:43:58Z", "bug_id": 45992, "creation_time": "2008-10-12T08:43:58Z", "is_private": false, "attachment_id": 22714}]