[{"count": 0, "attachment_id": null, "bug_id": 59024, "text": "When Tomcat Native is dynamically linked with OpenSSL, the same OpenSSL version number is reported in catalina.out when Tomcat is started up even after the shared OpenSSL libraries are replaced with different versions. For example, if Tomcat Native was built with OpenSSL version 1.0.2d, the following will appear in catalina.out whenever Tomcat is started even if the shared OpenSSL library actually being used is version 1.0.2f:\n\nINFO: OpenSSL successfully initialized (OpenSSL 1.0.2d 9 Jul 2015)\n\nThis is because the OPENSSL_VERSION_TEXT macro that's defined in openssl/opensslv.h is used to report the version number instead of the value returned by the SSLeay_version() function defined in crypto.h.\n\nThe fix for this is simple: replace \"OPENSSL_VERSION_TEXT\" in the definition of versionString() in /native/src/ssl.c with \"SSLeay_version(SSLEAY_VERSION)\" so that it looks like this:\n\nTCN_IMPLEMENT_CALL(jstring, SSL, versionString)(TCN_STDARGS)\n{\n    UNREFERENCED(o);\n    return AJP_TO_JSTRING(SSLeay_version(SSLEAY_VERSION));\n}\n\nI have verified this fix works with Tomcat Native 1.2.4 built on CentOS 6.7.", "id": 188539, "time": "2016-02-17T22:27:14Z", "creator": "gkiessling@teradici.com", "creation_time": "2016-02-17T22:27:14Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 59024, "is_private": false, "id": 188556, "time": "2016-02-18T07:36:20Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2016-02-18T07:36:20Z", "tags": [], "text": "Thanks for the report. I have tweaked to change a bit to make it compatible with OpenSSL 1.1.0 as well and I have also changed version() for OpenSSL 1.1.0.\n\nThis will be part of the next tcnative release 1.2.5 and - if we release 1.1.x again - also of 1.1.35.\n\nChange revisions are r1731004 + r1731006 (1.2.x) resp. r1731007 (1.1.x)."}]