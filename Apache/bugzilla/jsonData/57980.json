[{"count": 0, "tags": [], "text": "In a jsp, a form is created with enctype=\"multipart/form-data\". we submit the form\nafter uploading a file (say of size 10MB) to a servlet (jdk 1.7u80).\n\nIn servlet.doPost() followings code snippet is written to validate the max file size that can be uploaded and if size exceed a fixed limit servlet redirects control to a the same jsp page without parsing the multipart request.\n------------------------------------------------\nlong contentLength = request.getContentLength();\nlong uploadFileSize = 1000000;\n\nif(contentLength > uploadFileSize){\n            \t   getServletContext().getRequestDispatcher(\"/upload.jsp\").forward(request, response);\n  return;\n}\n-------------------------------------------------\nThis code causes browser crashed and a message 'Program cannot display the webpage' gets displayed by the browser to user.\n\nThis problem got resolved if we parse the request object before redirecting as below.\n\norg.apache.commons.fileupload.servlet.ServletFileUpload.parse(request);\n\nHowever it causes performance issue.\n\nNote: This problem is not there with Tomcat6 and jdk1.5 .\n\nAdditional Detail: Servlet 2.5 , JSP 2.1 and jdk1.7u80", "is_private": false, "id": 183234, "creator": "pgarnaik.world@gmail.com", "time": "2015-06-01T13:48:13Z", "bug_id": 57980, "creation_time": "2015-06-01T13:48:13Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 57980, "attachment_id": null, "is_private": false, "id": 183236, "time": "2015-06-01T13:53:00Z", "creator": "chris@christopherschultz.net", "creation_time": "2015-06-01T13:53:00Z", "text": "A few comments:\n\n1. The browser has not crashed.\n2. You are not redirecting anything.\n\nPlease post to the users' list with your question. If this turns out to be a bug, feel free to REOPEN this issue."}, {"count": 2, "tags": [], "bug_id": 57980, "attachment_id": 32779, "is_private": false, "id": 183278, "time": "2015-06-02T10:05:48Z", "creator": "pgarnaik.world@gmail.com", "creation_time": "2015-06-02T10:05:48Z", "text": "Created attachment 32779\nBefore submit screen shot"}, {"count": 3, "tags": [], "bug_id": 57980, "attachment_id": 32780, "id": 183279, "time": "2015-06-02T10:06:55Z", "creator": "pgarnaik.world@gmail.com", "creation_time": "2015-06-02T10:06:55Z", "is_private": false, "text": "Created attachment 32780\nAfter screen shot"}, {"count": 4, "tags": [], "bug_id": 57980, "attachment_id": 32781, "is_private": false, "id": 183280, "time": "2015-06-02T10:12:54Z", "creator": "pgarnaik.world@gmail.com", "creation_time": "2015-06-02T10:12:54Z", "text": "Created attachment 32781\nJsp page from the J2EE POC"}, {"count": 5, "tags": [], "text": "Created attachment 32782\nServlet from J2EE POC", "is_private": false, "id": 183281, "creator": "pgarnaik.world@gmail.com", "time": "2015-06-02T10:13:47Z", "bug_id": 57980, "creation_time": "2015-06-02T10:13:47Z", "attachment_id": 32782}, {"count": 6, "tags": [], "text": "Issue is obhivious.\n\n1) Screen shots attached for before and after form submit.\n2) As per J2EE coding, Its forwarded(or redirected) to upload.jsp.\n\nFor reference of other developers, the small POC is also attached in zipped format.", "is_private": false, "id": 183282, "creator": "pgarnaik.world@gmail.com", "time": "2015-06-02T10:14:28Z", "bug_id": 57980, "creation_time": "2015-06-02T10:14:28Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 57980, "attachment_id": null, "is_private": false, "id": 183284, "time": "2015-06-02T11:53:06Z", "creator": "chuck.caldarale@unisys.com", "creation_time": "2015-06-02T11:53:06Z", "text": "As stated before, the browser has not crashed, and there is zero evidence of a Tomcat problem.  Your <Connector> configuration is likely wrong for your environment, but you didn't bother to present that.  (Hint: look at maxSwallowSize.)  Post your query on the users' mailing list.  Do not reopen this issue until discussion on the mailing list indicates it's appropriate to do so."}, {"count": 8, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "text": "to add to Chuck's comment, you will need to post the stack trace of the actual exception that occurs on the server side. I suspect once you find the stack trace, you'll understand the problem, and likely the solution to it.", "id": 183297, "time": "2015-06-02T22:32:38Z", "bug_id": 57980, "creation_time": "2015-06-02T22:32:38Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 57980, "attachment_id": null, "id": 183315, "time": "2015-06-04T05:29:28Z", "creator": "pgarnaik.world@gmail.com", "creation_time": "2015-06-04T05:29:28Z", "is_private": false, "text": "Thanks a lot, Chuck's hint  'maxSwallowSize' resolves the issue.\nI was not aware of this attribute."}, {"count": 10, "tags": [], "text": "(In reply to pgarnaik.world from comment #9)\n\n> Thanks a lot, Chuck's hint  'maxSwallowSize' resolves the issue.\n\nNote that a large value makes DoS attacks more effective.  Use the mailing list for further discussion.\n\n> I was not aware of this attribute.\n\nWhy it pays to read the documentation...", "is_private": false, "id": 183322, "creator": "chuck.caldarale@unisys.com", "time": "2015-06-04T11:12:23Z", "bug_id": 57980, "creation_time": "2015-06-04T11:12:23Z", "attachment_id": null}]