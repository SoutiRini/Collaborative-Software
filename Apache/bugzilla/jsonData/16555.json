[{"count": 0, "attachment_id": null, "bug_id": 16555, "text": "Java task used with output attribute looses last output line if the line does \nnot end with \\r\\n.\n \nExample:\n\n\t<target name=\"test\" depends=\"init\">\n\t\t<java classname=\"com.sergiu.utils.test00\"\n\t\t\tclasspathref=\"run.classpath\"\n\t\t\toutput=\"${tmp}/run.test00\">\n\t\t</java>\n\t\t<loadfile property=\"LOADED.PROP\" srcFile=\"${tmp}/run.test00\"/>\n\t\t<echoproperties/>\n\t</target>\n\n\n\npackage com.sergiu.utils;\npublic class test00 {\n\tpublic static void main(String[] args) {\n\t\t\t\tSystem.out.println(\"this is line 00\");\n\t\t\t\tSystem.out.println(\"this is line 01\");\n\t\t\t\tSystem.out.print(\"this is line 02\");\n\t}\n}\n\n\n$ cat var/tmp/run.test00\nthis is line 00\nthis is line 01", "id": 30290, "time": "2003-01-29T19:59:22Z", "creator": "oohay19592002@yahoo.com", "creation_time": "2003-01-29T19:59:22Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 16555, "is_private": false, "text": "I've fixed this in HEAD (Ant 1.6) for now. The new code will flush the buffers\nat the end of a java task and them propagate whether a end-of-line marker is\nrequired. I'm not sure yet whether to include for 1.5.2 due to the extensive\nnature of the fix.\n\nFor 1.5.1, a workaround is to fork the java task - this gives the correct output.\n\nOne alternative for 1.5.2 would be to just flush the output but leave out the\neol indication. This will have the effect of adding an eol to the last line\n", "id": 30350, "time": "2003-01-30T15:18:57Z", "creator": "conor@apache.org", "creation_time": "2003-01-30T15:18:57Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Fix now available in 1.5.2 release.", "is_private": false, "id": 30406, "creator": "conor@apache.org", "time": "2003-01-31T13:12:09Z", "bug_id": 16555, "creation_time": "2003-01-31T13:12:09Z", "attachment_id": null}]