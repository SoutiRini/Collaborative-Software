[{"count": 0, "tags": [], "bug_id": 5114, "attachment_id": null, "id": 8303, "time": "2001-11-27T00:12:58Z", "creator": "Jean.Salminen@cargo.sj.se", "creation_time": "2001-11-27T00:12:58Z", "is_private": false, "text": "An URL containing swedish characters, like '\u00e5', '\u00e4' or '\u00f6' which all are \nincluded in the Latin-1 set, gives different path information in the Tomcat \n4.01 implementation of the methods getPathInfo() and getRequestURL() of the \nHttpServletReguest interface. \n\nThe getPathInfo() method seems to interpret the characters in a succesful \nmanner while getRequestURL() fails. \nI wrote a wrapper method, using getPathInfo(), for the getRequestURL() to fix \nthis:\n\npublic static String getRequestURLWrapper(HttpServletRequest req) \n{\n  StringBuffer url  = new StringBuffer();\n  String protocol = req.getScheme();\n \n  url.append(protocol); \n  url.append(\"://\");\n  url.append(req.getServerName()); \n\n  int port = req.getServerPort(); \n  if ((protocol.equals(\"http\") && (port != 80))\n      || (protocol.equals(\"https\") && (port != 443))) {\n    url.append(':');\n    url.append(port);\n  }\n\n  url.append(req.getServletPath());\n \n  String pathInfo = req.getPathInfo();\n  if (pathInfo != null) url.append(pathInfo); \n\n  return (url.toString());\n}"}, {"attachment_id": null, "tags": [], "creator": "remm@apache.org", "text": "There is no reliable way to find out the URL encoding, unfortunately.\nThe emerging \"standard\" seems to be to use UTF8, which is what Tomcat is doing \n(which of course isn't matching your platform encoding that the file operations \nuse).\n\nMany discussions on this occurred on tomcat-dev in the past. Please feel free \nto ask for more information (I know Costin loves this subject).", "count": 1, "id": 8331, "time": "2001-11-27T08:50:32Z", "bug_id": 5114, "creation_time": "2001-11-27T08:50:32Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 5114, "attachment_id": null, "id": 11976, "time": "2002-03-19T00:38:42Z", "creator": "remm@apache.org", "creation_time": "2002-03-19T00:38:42Z", "is_private": false, "text": "Reopen."}, {"count": 3, "tags": [], "bug_id": 5114, "attachment_id": null, "id": 11977, "time": "2002-03-19T00:45:12Z", "creator": "remm@apache.org", "creation_time": "2002-03-19T00:45:12Z", "is_private": false, "text": "getRequestURL will return the original URI used by the client, which may have\nbeen encoded."}]