[{"attachment_id": null, "tags": [], "creator": "tietew@gmail.com", "text": "I tried following configurations:\n\nFilterProvider SSI INCLUDES env=PATH_INFO $index.html\nFilterChain SSI\n\nEXPECT results are:\nApplied SSI for URL: /some.cgi/index.html\nNot applied SSI for URL: /some.cgi/another.html\nNot applied SSI for URL: /some.cgi\n\nACTUAL results are:\nApplied SSI for URL: /some.cgi/index.html\nNot applied SSI for URL: /some.cgi/another.html\nApplied SSI for URL: /some.cgi\n\nIn filter_lookup() at mod_filter.c, when the \"dispatch\" string does not exist, \"matched\" status will be changed to \"not matched\" only if match_type == DEFINED (means FilterProvider's match argument is \"*\").\n\nBut above configurations expects to apply filters only if environment PATH_INFO contains \"index.html\", and not to apply if PATH_INFO is empty or is not defined.\n\nThe proposed change is simply\n\nif (!str) {\n    if (provider->match_type == DEFINED && provider->match.string) {\n        match = 0;\n    }\n}\n\nchange to\n\nif (!str) {\n    match = 0;\n}", "count": 0, "id": 131375, "time": "2009-10-25T21:11:16Z", "bug_id": 48054, "creation_time": "2009-10-25T21:11:16Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nick@webthing.com", "attachment_id": 24418, "is_private": false, "id": 131376, "time": "2009-10-25T23:56:50Z", "bug_id": 48054, "creation_time": "2009-10-25T23:56:50Z", "text": "Created attachment 24418\npatch\n\nYou're probably right.  I'm struggling to figure out the original logic: it may have pre-dated the introduction of NOT.\n\nJust attaching a patch of it, that can feature in a proposal in STATUS.  We can't apply this to trunk, because all that condition logic is replaced by the general-purpose expression parser."}, {"attachment_id": null, "tags": [], "creator": "nick@webthing.com", "text": "Fixed in r892261", "count": 2, "id": 133129, "time": "2009-12-26T17:12:11Z", "bug_id": 48054, "creation_time": "2009-12-26T17:12:11Z", "is_private": false}]