[{"count": 0, "tags": [], "bug_id": 35713, "text": "I regularily see this in my tomcat logs:\n\njava.lang.StackOverflowError\n\tat sun.nio.cs.StreamEncoder.write(Unknown Source)\n\tat java.io.OutputStreamWriter.write(Unknown Source)\n\tat org.apache.tomcat.util.buf.WriteConvertor.write(C2BConverter.java:189)\n\tat org.apache.tomcat.util.buf.C2BConverter.convert(C2BConverter.java:80)\n\tat org.apache.catalina.connector.OutputBuffer.realWriteChars(OutputBuffer.java:535)\n\tat org.apache.tomcat.util.buf.CharChunk.flushBuffer(CharChunk.java:439)\n\tat org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:310)\n\tat org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:293)\n\tat org.apache.catalina.connector.CoyoteWriter.flush(CoyoteWriter.java:82)\n\tat org.apache.jasper.runtime.JspWriterImpl.flush(JspWriterImpl.java:174)\n\tat java.io.PrintWriter.flush(Unknown Source)\n        at org.apache.jasper.runtime.JspWriterImpl.flush(JspWriterImpl.java:174)\n\tat java.io.PrintWriter.flush(Unknown Source)\n[snip]\n\nAnyway, this looks like a pretty clear-cut bug in JspWriterImpl.flush()\ntriggering PrintWriter.flush() which triggers JspWriterImpl.flush() again. I'm\nnot sure how to reproduce this (it occurs randomly), but the stack-trace should\nbe enough to fix the problem.", "id": 77245, "time": "2005-07-13T08:10:06Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2005-07-13T08:10:06Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 35713, "is_private": false, "count": 1, "id": 77253, "time": "2005-07-13T12:23:09Z", "creator": "remm@apache.org", "creation_time": "2005-07-13T12:23:09Z", "text": "(In reply to comment #0)\n> Anyway, this looks like a pretty clear-cut bug in JspWriterImpl.flush()\n> triggering PrintWriter.flush() which triggers JspWriterImpl.flush() again. I'm\n> not sure how to reproduce this (it occurs randomly), but the stack-trace should\n> be enough to fix the problem.\n\nActually, it's not enough. I'd like to know where the PrintWriter comes from,\nbecause Jasper does not use this type."}, {"count": 2, "tags": [], "bug_id": 35713, "attachment_id": null, "text": "Look at JspWriterImpl.initOut:\n\n    private void initOut() throws IOException {\n        if (out == null) {\n            out = response.getWriter();\n        }\n    }\n\nResponse.getWriter() returns a PrintWriter.", "id": 77264, "time": "2005-07-13T16:48:56Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2005-07-13T16:48:56Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 35713, "attachment_id": null, "text": "(In reply to comment #2)\n> Look at JspWriterImpl.initOut:\n> \n>     private void initOut() throws IOException {\n>         if (out == null) {\n>             out = response.getWriter();\n>         }\n>     }\n> \n> Response.getWriter() returns a PrintWriter.\n\nThe said PrintWriter is a CoyoteWriter instance (if it's not, then it's this is\nINVALID), and feel free to look at its flush method. Any other ideas before I\nclose the report ? ;)\n", "id": 77265, "time": "2005-07-13T16:52:40Z", "creator": "remm@apache.org", "creation_time": "2005-07-13T16:52:40Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 35713, "is_private": false, "count": 4, "id": 77267, "time": "2005-07-13T17:21:00Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2005-07-13T17:21:00Z", "text": "I suspect JRoller's code is at fault. If I find out otherwise, I will reopen\nthis issue."}]