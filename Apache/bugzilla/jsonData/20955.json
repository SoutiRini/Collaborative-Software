[{"attachment_id": null, "tags": [], "bug_id": 20955, "text": "Hi,\nI configured Apache to listen port 81 :\nListen 81\n\nI also configured an ErrorDocument :\nAlias /error/ \"/usr/local/apache2_0_46/error/\" \nErrorDocument 404 /error/HTTP_ERROR.php\n\nWhen a 404 error occurs, the request is redirected HTTP_ERROR.php\nIn HTTP_ERROR.php the value of $_SERVER['SERVER_PORT'] is 80.\n\nThe good port number (81) can be read in $_SERVER['REDIRECTED_SERVER_PORT'] so \nthe problem isn't critical, but the question is why $_SERVER['SERVER_PORT']\n=80 ?\n\nBest regards,\nF.SURLEAU", "count": 0, "id": 39170, "time": "2003-06-20T14:35:06Z", "creator": "fred@surleau.com", "creation_time": "2003-06-20T14:35:06Z", "is_private": false}, {"count": 1, "tags": [], "creator": "trawick@apache.org", "text": "See the doc for UseCanonicalName and ServerName:\n\nhttp://httpd.apache.org/docs-2.0/mod/core.html#usecanonicalname\nhttp://httpd.apache.org/docs-2.0/mod/core.html#servername\n\nYou can set \"UseCanonicalName off\" to use the server name and port from the\nincoming request.", "id": 39171, "time": "2003-06-20T14:41:02Z", "bug_id": 20955, "creation_time": "2003-06-20T14:41:02Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "fred@surleau.com", "attachment_id": null, "id": 39172, "time": "2003-06-20T14:59:41Z", "bug_id": 20955, "creation_time": "2003-06-20T14:59:41Z", "is_private": false, "text": "Hi again...\n\nThe server is already configured with \"UseCanonicalName off\".\n\nIt works only if I explicitly configure the ServerName with port 81.\n\nThe docs says : \"If no port is specified in the servername, then the server \nwill use the port from the incoming request.\"\nIt's the case for 'REDIRECT_SERVER_PORT', but not for 'SERVER_PORT'.\n\nBut I should have read more : \"For optimal reliability and predictability, you \nshould specify an explicit hostname and port using the ServerName directive.\"\n\nThanks,\nF.SURLEAU\n\n"}]