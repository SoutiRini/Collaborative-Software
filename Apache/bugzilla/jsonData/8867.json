[{"count": 0, "tags": [], "bug_id": 8867, "attachment_id": null, "id": 15623, "time": "2002-05-07T13:10:08Z", "creator": "jeff@exlibris.co.il", "creation_time": "2002-05-07T13:10:08Z", "is_private": false, "text": "I am successful doing configure (without any additional modules) and make with \nhttpd 2.0.36. The problem occurs when doing make install. Here is part of the \noutput:\n\nexports.c:900: `ap_hack_apr_xml_quote_string' previously defined here\nexports.c:2097: redefinition of `ap_hack_apr_xml_quote_elem'\nexports.c:901: `ap_hack_apr_xml_quote_elem' previously defined here\nexports.c:2098: redefinition of `ap_hack_apr_xml_insert_uri'\nexports.c:902: `ap_hack_apr_xml_insert_uri' previously defined here\nmake: Fatal error: Command failed for target `exports.lo'\nCurrent working directory /aleph1/product/httpd-2.0.36/server\nmake: Fatal error: Command failed for target `install-recursive'\nCurrent working directory /aleph1/product/httpd-2.0.36/server\nmake: Fatal error: Command failed for target `install-recursive'\n\nThis output is from the gcc command that follows the nawk command:\n\nnawk -f /aleph1/product/httpd-2.0.36/build/make_exports.awk /aleph1/product/http\nd-2.0.36/include/*.h  /aleph1/product/httpd-2.0.36/os/unix/*.h  /aleph1/product/\nhttpd-2.0.36/srclib/apr/include/*.h  /aleph1/product/httpd-2.0.36/srclib/apr-uti\nl/include/*.h  /aleph1/product/httpd-2.0.36/modules/http/*.h > exports.c\n/bin/bash /aleph1/product/httpd-2.0.36/srclib/apr/libtool --silent --mode=compil\ne gcc  -g -O2 -pthreads    -DSOLARIS2=8 -D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT\n-DAP_HAVE_DESIGNATED_INITIALIZER   -I. -I/aleph1/product/httpd-2.0.36/os/unix -I\n/aleph1/product/httpd-2.0.36/server/mpm/prefork -I/aleph1/product/httpd-2.0.36/m\nodules/http -I/aleph1/product/httpd-2.0.36/modules/proxy -I/aleph1/product/httpd\n-2.0.36/include -I/aleph1/product/httpd-2.0.36/srclib/apr/include -I/aleph1/prod\nuct/httpd-2.0.36/srclib/apr-util/include -I/aleph1/product/httpd-2.0.36/modules/\ndav/main -I/aleph1/product/httpd-2.0.36/srclib/apr-util/xml/expat/lib -prefer-no\nn-pic -static -c exports.c && touch exports.lo\n\nFollowing is some info on the relevant machine:\n\nram12=M505>>gcc -v\nReading specs from /usr/local/lib/gcc-lib/sparc-sun-solaris2.8/2.95.2/specs\ngcc version 2.95.2 19991024 (release)\nram12=M505>>uname -a\nSunOS ram12 5.8 Generic_108528-03 sun4u sparc SUNW,UltraSPARC-IIi-Engine\n\n\nThanks for your coop,\nJeff"}, {"count": 1, "tags": [], "text": "Could you please attach your copy of exports.c?\n\nThanks!\n", "attachment_id": null, "id": 16104, "creator": "trawick@apache.org", "time": "2002-05-14T20:57:52Z", "bug_id": 8867, "creation_time": "2002-05-14T20:57:52Z", "is_private": false}, {"count": 2, "tags": [], "creator": "rbb@apache.org", "attachment_id": null, "text": "*** Bug 9490 has been marked as a duplicate of this bug. ***", "id": 17833, "time": "2002-06-14T23:57:16Z", "bug_id": 8867, "creation_time": "2002-06-14T23:57:16Z", "is_private": false}, {"count": 3, "text": "Could you please attach the broken exports.c?\n\nThanks!\n", "creator": "trawick@apache.org", "is_private": false, "id": 18292, "time": "2002-06-21T11:41:08Z", "bug_id": 8867, "creation_time": "2002-06-21T11:41:08Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "text": "Created attachment 2159\nAttached it exports.c for Apache 2.0.36 - Same problem found with Apache 2.0.39", "attachment_id": 2159, "id": 18420, "creator": "diana.horvitz@exlibris.co.il", "time": "2002-06-23T15:42:56Z", "bug_id": 8867, "creation_time": "2002-06-23T15:42:56Z", "is_private": false}, {"count": 5, "tags": [], "text": "I am having a similar problem building 2.0.40 under SGI IRIX 6.5.\n\nMy make process does not get as far, and reports the following :\n\nMaking all in prefork                                                           \n        /bin/sh /data1/local/apache3/srclib/apr/libtool --silent --mode=compile \ncc  -g    -D_POSIX_THREAD_SAFE_FUNCTIONS    -I/data1/local/apache3/srclib/apr/in\nclude -I/data1/local/apache3/srclib/apr-util/include -I/data1/local/apache3/srcl\nib/apr-util/xml/expat/lib -I. -I/data1/local/apache3/os/unix -I/data1/local/apac\nhe3/server/mpm/prefork -I/data1/local/apache3/modules/http -I/data1/local/apache\n3/modules/filters -I/data1/local/apache3/modules/proxy -I/data1/local/apache3/in\nclude -I/data1/local/apache3/modules/dav/main -prefer-non-pic -static -c exports\n.c && touch exports.lo                                                          \ncc-1144 cc: ERROR File = exports.c, Line = 1473                                 \n  The variable \"ap_hack_apr_allocator_create\" has already been initialized.     \n                                                                                \n  const void *ap_hack_apr_allocator_create = (const void *)apr_allocator_create;\n              ^                                                                 \n\nMANY MORE ERRORS ALONG THE SAME LINES \"already been initialised\"....\n\n\nuntil:\n\ncc-3452 cc: ERROR File = exports.c, Line = 1635            \n  The compilation is aborted due to the number of errors.  \n                                                           \n                                                           \n101 errors detected in the compilation of \"exports.c\".     \n*** Error code 1 (bu21)                                    \n*** Error code 1 (bu21)                                    \n*** Error code 1 (bu21)                                    \n\nIt appears that make_exports.awk pulls in a number of header files, some from \nthe apr and some from the server subsystems, that have the same objects defined.\n\nI don't know enough about these inclusions to attempt changing them - Please \nhelp...\n\nThanks,\n\nGary Farley\n\n", "attachment_id": null, "id": 21579, "creator": "gfarley@comcab.co.uk", "time": "2002-08-23T09:38:48Z", "bug_id": 8867, "creation_time": "2002-08-23T09:38:48Z", "is_private": false}, {"count": 6, "tags": [], "text": "[This is a mass bug update.]\nThis bug reports a problem in an older version of Apache 2.\nCould you please update to the most recent version and see\nif you can reproduce this problem.  If the bug still exists,\nplease update the bug with the latest version number.  If \nthe bug no longer exists, please close the bug report.\n\nSorry for this impersonal response, but we get many more bug\nreports than our volunteers can keep up with.\nThanks for using Apache!", "attachment_id": null, "id": 24750, "creator": "slive@apache.org", "time": "2002-10-17T02:35:32Z", "bug_id": 8867, "creation_time": "2002-10-17T02:35:32Z", "is_private": false}, {"count": 7, "text": "Not applicable anymore.\nHave a later version installed.", "creator": "david_clancy@csgsystems.com", "is_private": false, "id": 25112, "time": "2002-10-24T10:18:29Z", "bug_id": 8867, "creation_time": "2002-10-24T10:18:29Z", "tags": [], "attachment_id": null}, {"count": 8, "tags": [], "text": "I'm trying to upgrade to 2.0.45 as per the instructions to do so before 8th and\nhaving the error messages appear under Solaris 8. I'm having no problems\ncompiling 2.0.39, 2.0.43 and 2.0.44 on the same machine using the exact same\nsettings so this is new to 2.0.45. I read the changelog and it said there's a\nnew apr included with the .45, is this related?", "attachment_id": null, "id": 34326, "creator": "sulka@sulake.com", "time": "2003-04-02T13:05:30Z", "bug_id": 8867, "creation_time": "2003-04-02T13:05:30Z", "is_private": false}, {"count": 9, "tags": [], "text": "Sorry, didn't change the version to target 2.0.45 in the previous submit.", "is_private": false, "id": 34327, "creator": "sulka@sulake.com", "time": "2003-04-02T13:06:40Z", "bug_id": 8867, "creation_time": "2003-04-02T13:06:40Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 8867, "attachment_id": null, "id": 34615, "time": "2003-04-07T10:06:49Z", "creator": "sulka@sulake.com", "creation_time": "2003-04-07T10:06:49Z", "is_private": false, "text": "Ok I found the cause of the problem.\n\nIf the path to Apache source has a symlink, the code that generates exports.c\nuses both the absolute path (symlink parsed out) and the path with the symlink\nduring the generation process. The end result is that some files (namely apr\nstuff) is included twice into exports.c.\n\nYou can replicate this by downloading the source, decompress the source, then\nsymlink the source \"ln -s httpd-2.0.45 httpd\", \"cd http\", \"./configure\", \"make\".\nThe make fill fail and complain about duplicate apr symbols in exports.c. If you\nlook at exports.c, you'll see all apr-related files have been included using\nboth the \"httpd-2.0.45\" and the \"httpd\" paths.\n\nIt's probably just a line or two that needs to be changed to fix this."}, {"count": 11, "tags": [], "bug_id": 8867, "attachment_id": null, "is_private": false, "id": 34716, "time": "2003-04-08T11:45:07Z", "creator": "trawick@apache.org", "creation_time": "2003-04-08T11:45:07Z", "text": "*** Bug 18635 has been marked as a duplicate of this bug. ***"}, {"count": 12, "tags": [], "bug_id": 8867, "attachment_id": null, "id": 35078, "time": "2003-04-13T16:23:52Z", "creator": "laurent.goujon@online.fr", "creation_time": "2003-04-13T16:23:52Z", "is_private": false, "text": "I've also some problems with Apache 2.0.45. I am trying to build in my home\ndirectory and after some investigations, i've noticed that APR_INCLUDEDIR and\nAPU_INCLUDEDIR include my home directory twice with two different pathname\n(because the users directory are in /users and are also symlinked in /home)"}, {"text": "This problem may also occur when building on NFS. (See bug report #19229).", "tags": [], "creator": "zulic@roguewave.com", "attachment_id": null, "count": 13, "id": 35823, "time": "2003-04-22T21:20:30Z", "bug_id": 8867, "creation_time": "2003-04-22T21:20:30Z", "is_private": false}, {"count": 14, "tags": [], "text": "On my box the problem is the same. Here my system:\nSunOS ife.ee.ethz.ch 5.9 Generic_112233-04 sun4u sparc\ngcc 3.2.2 and Forte cc 7.0\n\nI wrote a little perl script that converts the defect exports.c. After applying\nthis script httpd compiled fine:\n\n#!/usr/bin/perl -w\nuse strict;\n$|++;\n# httpd 2.0.45/server/exports.c\nmy %hash;       # Zeile -> Nummer\nprint \"/* $0: \", scalar(localtime), \" */\\n\";\n\nwhile(<STDIN>)\n{\n if (/^const/)\n {\n  chomp;\n  if (defined $hash{$_})\n  {\n   print \"/* $hash{$_}: $_ */\\n\";\n  }\n  else\n  {\n   $hash{$_} = $.;\n   print \"$_\\n\";\n  }\n }\n else\n {\n  print;\n }\n}\n", "is_private": false, "id": 37665, "creator": "zosh@ife.ee.ethz.ch", "time": "2003-05-23T11:18:45Z", "bug_id": 8867, "creation_time": "2003-05-23T11:18:45Z", "attachment_id": null}, {"count": 15, "tags": [], "bug_id": 8867, "attachment_id": null, "id": 38033, "time": "2003-05-30T09:40:56Z", "creator": "Robert.Dahlem@gmx.net", "creation_time": "2003-05-30T09:40:56Z", "is_private": false, "text": "With 2.0.46 this is even messier: Up to 2.0.45 a workaround was\n    cd `/bin/pwd -P`\n(cd to the physical path) before running configure. This does no longer help."}, {"count": 16, "tags": [], "bug_id": 8867, "attachment_id": null, "id": 38168, "time": "2003-06-02T13:04:48Z", "creator": "trawick@apache.org", "creation_time": "2003-06-02T13:04:48Z", "is_private": false, "text": "*** Bug 20401 has been marked as a duplicate of this bug. ***"}, {"count": 17, "tags": [], "bug_id": 8867, "attachment_id": null, "id": 38924, "time": "2003-06-16T13:46:15Z", "creator": "trawick@apache.org", "creation_time": "2003-06-16T13:46:15Z", "is_private": false, "text": "*** Bug 20793 has been marked as a duplicate of this bug. ***"}, {"count": 18, "tags": [], "text": "This bug still occurs on Solaris 8 with httpd-2.0.46.  It seems that the /bin/sh\nbuiltin version of 'pwd' automatically resolves symlinks.  I do *not* have\n'realpath' installed, as indicated might help in apr-config:\n----\n# If we have the realpath program, use it to resolve symlinks\n# Otherwise, being in a symlinked dir may result in incorrect output.\nif test -x \"`which realpath 2>/dev/null`\"; then\n...\n----\nWhat seems to be happening to cause *both* paths to get included is this:\n() $thispath gets set to the symlink-resolved path\n() $thispath is compared with $APR_SOURCE_DIR, which is set by configure and is\nnot symlink-resolved.  While they should match, they do not.\n() because of the mismatch, $location is set to 'build' while it should be 'source'.\n() checking under the --includes case in the command-line switch, we see that\nthis choice of $location is interpreted to be a VPATH build, so both\n$thisdir/include and $APR_SOURCE_DIR/include are returned, giving duplicate headers.\n\nThis is fairly easy to work around by just compiling in /tmp or something.  If\nthere are issues (beyond this one) with compiling in a symlinked directory,\nperhaps a warning in INSTALL or during configure would be enough to resolve this\nbug.", "attachment_id": null, "id": 38970, "creator": "dustin@cs.uchicago.edu", "time": "2003-06-17T14:09:01Z", "bug_id": 8867, "creation_time": "2003-06-17T14:09:01Z", "is_private": false}, {"count": 19, "tags": [], "bug_id": 8867, "attachment_id": null, "is_private": false, "id": 39039, "time": "2003-06-18T15:37:33Z", "creator": "slive@apache.org", "creation_time": "2003-06-18T15:37:33Z", "text": "*** Bug 20861 has been marked as a duplicate of this bug. ***"}, {"count": 20, "tags": [], "text": "*** Bug 20914 has been marked as a duplicate of this bug. ***", "attachment_id": null, "id": 39095, "creator": "trawick@apache.org", "time": "2003-06-19T15:04:49Z", "bug_id": 8867, "creation_time": "2003-06-19T15:04:49Z", "is_private": false}, {"count": 21, "tags": [], "bug_id": 8867, "attachment_id": null, "is_private": false, "id": 39451, "time": "2003-06-25T23:00:51Z", "creator": "andrea@fon.fon.bg.ac.yu", "creation_time": "2003-06-25T23:00:51Z", "text": "I found out that the problem is also if httpd source dir is in a symlinked \ndir: on Solaris, by default /usr/src is a symlink to /usr/share/src.\nSo, exports.c makes a problem with duplicate definitiopns, as said.\n\nThe solution: have httpd source unpacked freshly in a normal directory, that \nis not a symlink to anything (such as /tmp)."}, {"count": 22, "tags": [], "bug_id": 8867, "attachment_id": null, "is_private": false, "id": 39580, "time": "2003-06-28T17:46:57Z", "creator": "dustin@cs.uchicago.edu", "creation_time": "2003-06-28T17:46:57Z", "text": "From the autoconf manual:\n--\nPOSIX 1003.1-2001 requires that pwd must support the `-L' (\"logical\") and `-P'\n(\"physical\") options, with `-L' being the default. However, traditional shells\ndo not support these options, and their pwd command has the `-P' behavior.\n\nPortable scripts should assume neither option is supported, and should assume\nneither behavior is the default. Also, on many hosts `/bin/pwd' is equivalent to\n`pwd -P', but POSIX does not require this behavior and portable scripts should\nnot rely on it.\n--\nPerhaps a configure test could be added that tries -L, and uses it where\nsupported (for example, on Solaris 8!)\n\nEmail/comment if you'd like me to do this and submit a patch."}, {"count": 23, "tags": [], "text": "*** Bug 23577 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 45339, "creator": "trawick@apache.org", "time": "2003-10-10T12:13:25Z", "bug_id": 8867, "creation_time": "2003-10-10T12:13:25Z", "attachment_id": null}, {"count": 24, "text": "*** Bug 23225 has been marked as a duplicate of this bug. ***", "creator": "trawick@apache.org", "is_private": false, "id": 45347, "time": "2003-10-10T12:41:27Z", "bug_id": 8867, "creation_time": "2003-10-10T12:41:27Z", "tags": [], "attachment_id": null}, {"count": 25, "tags": [], "bug_id": 8867, "attachment_id": null, "is_private": false, "id": 51138, "time": "2004-01-25T16:03:16Z", "creator": "jorton@redhat.com", "creation_time": "2004-01-25T16:03:16Z", "text": "*** Bug 21718 has been marked as a duplicate of this bug. ***"}, {"text": "Created attachment 10090\nProposed workaround for duplicate definitions in exports.c", "tags": [], "creator": "jorton@redhat.com", "attachment_id": 10090, "count": 26, "id": 51197, "time": "2004-01-26T17:08:26Z", "bug_id": 8867, "creation_time": "2004-01-26T17:08:26Z", "is_private": false}, {"count": 27, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "text": "Fixing the apr-config problem is difficult, fixing the symptom which causes this\nissue is relatively simple though: can someone with the symlinked build problem\ntry the patch to make_exports.awk attached above, or download the pre-patched\nversion from: http://people.redhat.com/jorton/misc/make_exports.awk", "id": 51198, "time": "2004-01-26T17:12:10Z", "bug_id": 8867, "creation_time": "2004-01-26T17:12:10Z", "is_private": false}, {"count": 28, "tags": [], "bug_id": 8867, "attachment_id": null, "id": 51246, "time": "2004-01-27T13:55:54Z", "creator": "admin@optogone.com", "creation_time": "2004-01-27T13:55:54Z", "is_private": false, "text": "*** Bug 26458 has been marked as a duplicate of this bug. ***"}, {"count": 29, "text": "Tried the new make_exports.awk it with Apache 2.0.48, again on Solaris 8 (same machine, as a \nmatter of fact).  Worked like a champ.  What a nasty, ugly hack!  You're not really going to put that \ninto a release, are you? :)", "creator": "dustin@cs.uchicago.edu", "is_private": false, "id": 51517, "time": "2004-01-31T05:40:30Z", "bug_id": 8867, "creation_time": "2004-01-31T05:40:30Z", "tags": [], "attachment_id": null}, {"count": 30, "tags": [], "text": "Sometimes nasty, ugly hacks are required to get the ugly police off their\nbehinds to fix it correctly.  Go Joe!!!!", "attachment_id": null, "id": 51524, "creator": "trawick@apache.org", "time": "2004-01-31T12:51:02Z", "bug_id": 8867, "creation_time": "2004-01-31T12:51:02Z", "is_private": false}, {"count": 31, "tags": [], "bug_id": 8867, "attachment_id": null, "id": 55233, "time": "2004-04-03T20:39:19Z", "creator": "nd@perlig.de", "creation_time": "2004-04-03T20:39:19Z", "is_private": false, "text": "*** Bug 28166 has been marked as a duplicate of this bug. ***"}, {"count": 32, "tags": [], "bug_id": 8867, "attachment_id": null, "is_private": false, "id": 60349, "time": "2004-07-09T09:51:30Z", "creator": "jorton@redhat.com", "creation_time": "2004-07-09T09:51:30Z", "text": "*** Bug 29994 has been marked as a duplicate of this bug. ***"}, {"count": 33, "tags": [], "bug_id": 8867, "attachment_id": null, "is_private": false, "id": 62138, "time": "2004-08-18T18:56:12Z", "creator": "deisner@gmail.com", "creation_time": "2004-08-18T18:56:12Z", "text": "Joe Orton's modifed make_exports.awk fixed the problem for me as well, building\nhttpd-2.0.50 on Solaris 9.\n\nI wasted some time tracking this down yesterday. It was frustrating. Sulka\ndiscovered the cause of this problem over a year ago. Symlinks are not uncommon,\nespecially with automounting.  At the very least, perhaps the INSTALL file could\nbe updated to say \"NOTE: Apache will not compile if the sources are located in a\npath with a symlink.\"\n\n\n\n\n"}, {"count": 34, "tags": [], "bug_id": 8867, "attachment_id": 12476, "id": 62139, "time": "2004-08-18T18:58:10Z", "creator": "deisner@gmail.com", "creation_time": "2004-08-18T18:58:10Z", "is_private": false, "text": "Created attachment 12476\nProposed change to INSTALL file."}, {"count": 35, "tags": [], "bug_id": 8867, "attachment_id": null, "id": 62891, "time": "2004-09-01T10:23:56Z", "creator": "jorton@redhat.com", "creation_time": "2004-09-01T10:23:56Z", "is_private": false, "text": "The proper fixes have been backported to the stable branch now, and should make\nit into the 2.0.51 release."}, {"count": 36, "tags": [], "text": "I checked out trunk, and I stepped into the same issue trying to compile it on my laptop with OsX ... the perl hack above solved it, but still, googling I found lot of people with the same issue but they probably never reached the informations in this ticket\n\nI dare to reopen it... feel free to shoot me :)", "is_private": false, "id": 160919, "creator": "zeph@fsfe.org", "time": "2012-07-26T11:39:01Z", "bug_id": 8867, "creation_time": "2012-07-26T11:39:01Z", "attachment_id": null}]