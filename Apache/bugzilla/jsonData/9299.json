[{"count": 0, "tags": [], "bug_id": 9299, "attachment_id": null, "text": "In the source to mod_userdir, the usage comments says that you may \ncombine UserDir entries to allow alternates.  The given example is:\n\nUserDir public_html /usr/web http://www.xyz.com/users\n\nwhich says to search for ~username/public_html then /usr/web/\nusername and finally do a redirect to http://www.xyz.com/users/username.  \nHowever, this example does not work in Apache 2.0.36.\n\nImagine that we have \"real\" users of aaa and bbb (that is, with a login/\nhomedir), a set of \"fake\" users yyy and zzz with only a directory under /usr/\nweb, and a set of redirected users mmm and nnn.  Now, using the above \nconfiguration, point a browser to http://host/~aaa and ~bbb - it works.  \nHowever ~yyy ~zzz ~mmm ~nnn do not work.  If you swap /usr/web and \npublic_html, now ~yyy and ~zzz work, yet ~mmm and ~nnn do not work.  \nThus, there is no way to make all three alternates work on the same \nsystem and no way to do preference of order of search either.\n\nThe solution is to change the \"return DECLINED\" in the #if \nAPR_HAS_USER section of mod_user to a \"continue\".  The diff -u is:\n\n--- mod_userdir.c.orig  Tue May 21 16:03:22 2002\n+++ mod_userdir.c       Tue May 21 16:03:50 2002\n@@ -330,10 +330,10 @@\n                 filename = apr_pstrcat(r->pool, homedir, \"/\", userdir,\n                         NULL);\n             }\n             else {\n                 -                return DECLINED;\n                 +                continue;\n                              }\n #else\n-            return DECLINED;\n+            continue;\n #endif\n         }\n\n-----end-diff----\n\nCurrently, /usr/web or /web/*/html style UserDir entries will search for the \nexact file for the username+dir and if it is not found, it move on to the next \nentry on the UserDir line.\n\nHowever, for the \"public_html\" style UserDir entry, if we do not find \n~username/public_html then we decline to process this request and do \nnot go to the next entry on the UserDir line.  So, end of request, 404.  If we \nchange the \"return DECLINED\" to \"continue\" as above, then we can move\non to the next UserDir entry.\n\nEntries in the form of http:// are redirects and must come last.  Apache\ndoes not know if the user exists on the remote machine, thus it must\ncome last on the line.  This fact should be mentioned in the docs and\nsource.\n\nYet, the ability to even use alternates in not mentioned in the docs,\nonly in the source.  This needs to be added too.  I can write a paragraph if \nsomeone wants\n\n(oh, and while we're working on mod_userdir.c, around line 351, can we \nchange the tabs to spaces?  ;-)", "id": 16519, "time": "2002-05-22T04:25:48Z", "creator": "jay@veggiespam.com", "creation_time": "2002-05-22T04:25:48Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 9299, "text": "Yes\nI have set UserDir to public_html but in order the access the users web site \nyou must add a / at the end line\n~user/ instead of just ~user\n\nBug or my fault?", "id": 19579, "time": "2002-07-15T23:38:51Z", "creator": "rea@lklnd.usf.edu", "creation_time": "2002-07-15T23:38:51Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9299, "text": "rea: Please don't modify someone else's bug unless you are sure you are adding\nuseful information.  The problem you are reporting has nothing to do with the\noriginal bug and is answered at\nhttp://httpd.apache.org/docs/misc/FAQ.html#set-servername", "id": 19605, "attachment_id": null, "creator": "slive@apache.org", "creation_time": "2002-07-16T14:14:46Z", "time": "2002-07-16T14:14:46Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 9299, "attachment_id": null, "text": "I have committed the patch below with a slight modification, along with some\ndocumentation.  Thank you for the bug report, and thank you for using Apache 2.0.", "id": 23603, "time": "2002-09-28T06:11:18Z", "creator": "rbb@apache.org", "creation_time": "2002-09-28T06:11:18Z", "is_private": false}]