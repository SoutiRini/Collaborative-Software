[{"count": 0, "tags": [], "bug_id": 22961, "attachment_id": null, "id": 43801, "time": "2003-09-06T21:47:42Z", "creator": "tagunov@motor.ru", "creation_time": "2003-09-06T21:47:42Z", "is_private": false, "text": "Just have been reading WebAppClassLoader.java for self-education,\nand it seems that every \nclass not found in the system ClassLoader\nis being attempted to be loaded from it twice (some \ncode has been\nremoved):\n\n        // (0.2)\n            clazz = system.loadClass(name);\n            if (clazz != null) \n{\n                return (clazz);\n            }\n        // (1)\n        \n            ClassLoader loader = parent;\n            if (loader == null)\n                loader \n= system;\n            try {\n                clazz = loader.loadClass(name);"}, {"count": 1, "text": "Created attachment 8083\nA possible fix (just a sketch)", "creator": "tagunov@motor.ru", "is_private": false, "id": 43802, "time": "2003-09-06T21:48:52Z", "bug_id": 22961, "creation_time": "2003-09-06T21:48:52Z", "tags": [], "attachment_id": 8083}, {"count": 2, "tags": [], "bug_id": 22961, "attachment_id": null, "id": 43803, "time": "2003-09-06T21:52:53Z", "creator": "tagunov@motor.ru", "creation_time": "2003-09-06T21:52:53Z", "is_private": false, "text": "Oh, yes, this happens only if we have no parent classloader - do we commonly have one? If yes, I must \nhave been on drugs to try to optimize code that is not being run.. Sorry then!"}, {"count": 3, "text": "WebAppClassLoader will always have a parent (with classpath \n$CATALINA_HOME/shared/classes:$CATALINA_HOME/shared/lib/*.jar).\n\nLay off the drugs ;-).", "creator": "william.barker@wilshire.com", "is_private": false, "id": 43806, "time": "2003-09-07T03:18:18Z", "bug_id": 22961, "creation_time": "2003-09-07T03:18:18Z", "tags": [], "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 22961, "attachment_id": null, "id": 43817, "time": "2003-09-07T19:01:00Z", "creator": "remm@apache.org", "creation_time": "2003-09-07T19:01:00Z", "is_private": false, "text": "Nice optimization. The patch seems ok, but there's no need for it, as Bill said.\nThanks anyway. Even in embedded mode, there's a need for a parent classloader\nwhich holds the Catalina classes. Of course, you could choose to put everything\nin the classpath, but that would be quite crazy (and I'm not completely certain\nit works) ;-)"}]