[{"count": 0, "tags": [], "bug_id": 31700, "attachment_id": null, "id": 65061, "time": "2004-10-13T11:06:42Z", "creator": "sf21@inf.tu-dresden.de", "creation_time": "2004-10-13T11:06:42Z", "is_private": false, "text": "The user names as retrieved from the JNDI path were real life names in our user \ndomain. I made an extension with an \nadditional attribute \"jndi.attributes.userprincipalname\" that names a JNDI \nattribute which contains the login name. If set the user name \ntransformation is activated. Otherwise not."}, {"count": 1, "tags": [], "creator": "sf21@inf.tu-dresden.de", "attachment_id": 13072, "text": "Created attachment 13072\nInclusion of objectname mapping", "id": 65062, "time": "2004-10-13T11:07:39Z", "bug_id": 31700, "creation_time": "2004-10-13T11:07:39Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "masonjm@apache.org", "text": "Stefan,\n\nCan you explain this a bit? To me this sounds exactly the same as the \"rdn\"\nparameter: it specifies the name of the ldap attribute that contains the\n\"username\". Maybe if you describe your LDAP schema I'll get it ;).\n\n-James", "count": 2, "id": 65413, "time": "2004-10-21T05:50:47Z", "bug_id": 31700, "creation_time": "2004-10-21T05:50:47Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 31700, "attachment_id": null, "text": "James,\n\nI have tried to get the wanted effect with setting the \"jndi.attributes.rdn\" \nparameter with the value of a property which should be mapped as user name. It \ndidn't work. Ok, I try to explain our LDAP schema. I'm not a big specialist in \nLDAP, so I just tell you what I see with the LDAP browser/editor of Jarek Gawor \n(see http://www-unix.mcs.anl.gov/~gawor/ldap/).\n\nThe \"jndi.container\" parameter is set to CN=Users,DC=...,DC=...,DC=de. The nodes \nunder this directory have names like:\n\n  CN=Stefan Fromm\n  CN=Admin his name\n  ...\n\nThe store parameter \"jndi.attributes.rdn\" is set to CN. This means that the \nusers mapped into Slide will have the names\n\n  /users/Stefan Fromm\n  /users/Admin his name\n\nIn my configuration I used the Krb5LoginModule to directly authenticate against \nthe LDAP directory. My login name is not \"Stefan Fromm\", it is \"pommes\". So it \nmeans authorization in Slide is tried to be done with \"pommes\". Since this user \ndoes not exist under the /users collection the checking fails.\n\nMy solution to this is instead of mapping \"Stefan Fromm\" into Slide I map \n\"pommes\" into Slide. In our LDAP directory there is provided an attribute to \neach user node which contains the real login name called \"sAMAccountName\". If I \nset this attribute value to be the \"jndi.attributes.rdn\" parameter the \nJNDIPrincipalStore doesn't work. I think because the rdn parameter corresponds \nto the node name, not to node attributes.\n\nSo I introduced a map in the JNDIPrincipalStore which saves the relations \nbetween our \"real\" names and the login names. This map is only used if the \noptional parameter \"jndi.attributes.userprincipalname\" is present. Then via the \nWebDAV interface I see users like\n\n  /users/pommes\n  /users/adminloginname\n  ...", "id": 65426, "time": "2004-10-21T11:17:05Z", "creator": "sf21@inf.tu-dresden.de", "creation_time": "2004-10-21T11:17:05Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "masonjm@apache.org", "text": "Stefan,\n\nGreat explanation, you've convinced me :).\n\nCan you submit a new patch against CVS head, perhaps in unified format? When I\ntry to apply the current patch I get errors that it's not a valid patch.\n\n-James", "count": 4, "id": 65454, "time": "2004-10-21T17:19:27Z", "bug_id": 31700, "creation_time": "2004-10-21T17:19:27Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "sf21@inf.tu-dresden.de", "text": "Hi James,\n\nnice to have convinced you :)\n\nBut I must ask you: what is a patch in unified format? It's first time that I \ncreated patches with CVS. How do I create it in unified format?\n\nBest regards\nStefan", "count": 5, "id": 65487, "time": "2004-10-22T08:27:44Z", "bug_id": 31700, "creation_time": "2004-10-22T08:27:44Z", "is_private": false}, {"count": 6, "tags": [], "creator": "masonjm@apache.org", "text": "Stefan,\n\nUnified diff is just a different diff format. Just add a -u parameter when you\ncreate the diff (cvs diff -u ...). I don't know that it will make a difference,\nbut it might be worth a try. I've been having a lot of trouble with patch\nlately, though, so the problem might be on my end. If you can successfully apply\nthe patch you submitted then the problem is probably on my end and attaching a\npatched copy of the class would be better.\n\n-James", "id": 65565, "attachment_id": null, "bug_id": 31700, "creation_time": "2004-10-23T03:06:05Z", "time": "2004-10-23T03:06:05Z", "is_private": false}, {"count": 7, "tags": [], "creator": "sf21@inf.tu-dresden.de", "attachment_id": 13221, "text": "Created attachment 13221\nComplete JNDIPrincipalStore Java source code", "id": 65747, "time": "2004-10-26T15:31:11Z", "bug_id": 31700, "creation_time": "2004-10-26T15:31:11Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 31700, "text": "James,\n\nI've tried to apply my patch (finally I found the utility to do that). It does \nnot work. I tried it in several formats (unified, context, normal). No way!\n\nI've sent the whole Java source code now. Hope this helps. But I really have no \nidea why the patch couldn't be applied. Does anyone know a good tutorial on \nthat?\n\n--Stefan\n", "id": 65748, "time": "2004-10-26T15:33:15Z", "creator": "sf21@inf.tu-dresden.de", "creation_time": "2004-10-26T15:33:15Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "text": "Stefan,\n\nThanks for your work. I've applied the \"patch\" ;).\n\n-James", "attachment_id": null, "bug_id": 31700, "id": 65799, "time": "2004-10-27T06:16:35Z", "creator": "masonjm@apache.org", "creation_time": "2004-10-27T06:16:35Z", "is_private": false}]