[{"count": 0, "attachment_id": null, "creator": "dev@tomcat.apache.org", "text": "Hello, \r\n\r\nI ran into a little problem: it's so much a bug as an ambiguous error message \r\nwhich made it a *real* PITA to run down the problem. The problem turned out \r\nto be that I had a broken symlink to a jar file in my WEB-INF/lib directory (the \r\nsymlink was in that directory, not the target).\r\n\r\nWhen the jar file can't be opened, an exception is thrown by AdapativeClassLoader\r\nand caught by LoadOnStartupInterceptor, but the only message printed is that\r\nthe servlet can't be loaded. The jar file may well have nothing to do with the\r\nservlet being loaded: in my case, the error printed to stdout after Tomcat's\r\nstartup was: \"cannot load servlet name: jsp\"\r\n\r\nI propose that LoadOnStartupInterceptor be modified to print the message\r\nfrom the Exception which is caught:\r\n\r\nsrc/share/org/apache/tomcat/context/LoadOnStartupInterceptor.java\r\n*** 132,136 ****\r\n                    } catch (Exception ee) {\r\n                        String msg = sm.getString(\"context.loadServlet.e\",\r\n!                                                 servletName);\r\n                        System.out.println(msg);\r\n                    } \r\n--- 132,136 ----\r\n                    } catch (Exception ee) {\r\n                        String msg = sm.getString(\"context.loadServlet.e\",\r\n!                                                 servletName) + \": \" + ee.getMessage();\r\n                        System.out.println(msg);\r\n                    } \r\n\r\nIt looks like there are a fair number of other errors which can be thrown\r\nwhen a servlet is loaded, so this should be more generally useful than\r\nmy specific case.\r\n\r\nHere's a patch, sorry if it's not in the proper format.\r\n\r\n134c134\r\n<                                                 servletName);\r\n---\r\n>                                                 servletName) + \": \" + ee.getMessage();\r\n\r\n\r\nKief\r\n", "id": 247, "time": "2000-11-30T11:09:51Z", "bug_id": 270, "creation_time": "2000-11-30T11:09:51Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "nacho@apache.org", "attachment_id": null, "id": 1167, "time": "2001-03-11T11:28:27Z", "bug_id": 270, "creation_time": "2001-03-11T11:28:27Z", "is_private": false, "text": "Fixed on Tomcat 3.2.2.\nFixed on Tomcat 3.3.\n"}]