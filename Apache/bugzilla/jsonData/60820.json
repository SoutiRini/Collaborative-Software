[{"count": 0, "tags": [], "text": "Hi, \n\nWe are getting the following exception stacktrace while calling getParameter method in servlet request object,\n\njava.lang.ClassCastException: java.lang.String cannot be cast to [Ljava.lang.String; at org.apache.catalina.core.ApplicationHttpRequest.getParameter(ApplicationHttpRequest.java:371) at javax.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:153)\n\nSeeing the source code for tomcat 8.0.38 we see some changes to the getParameter method. When the catalina code is doing parameter.get(name) the return value is a String which is being taken in a String[] I see the parseParameter() method call before this but is this a case that method fails for some scenarios? The query parameter for which it is failing in p=<someSimpleContiniousString> which in any case is not an Array. Please note, we are running our application in liferay 6.2.14 and tomcat 8.0.38 in jdk 8.", "attachment_id": null, "id": 197460, "creator": "vivek_nadar@yahoo.co.in", "time": "2017-03-05T10:12:20Z", "bug_id": 60820, "creation_time": "2017-03-05T10:12:20Z", "is_private": false}, {"count": 1, "tags": [], "text": "The parameter map is Map<String,String[]> and if Tomcat was coded to put anything other than String[] into the Map we'd see a compilation error - which we don't.\n\nThe parameter map should be immutable but there are circumstances (bug 60808) in which it can be manipulated.\n\nIt you can provide a simple test case that demonstrates this (it should be possible with a single Servlet or JSP) then please feel free to re-open this and provide that test case. If not, you may want to consider approaching Liferay.", "is_private": false, "bug_id": 60820, "id": 197465, "time": "2017-03-05T18:45:20Z", "creator": "markt@apache.org", "creation_time": "2017-03-05T18:45:20Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "See also bug 58946.", "attachment_id": null, "id": 197466, "creator": "markt@apache.org", "time": "2017-03-05T18:48:16Z", "bug_id": 60820, "creation_time": "2017-03-05T18:48:16Z", "is_private": false}]