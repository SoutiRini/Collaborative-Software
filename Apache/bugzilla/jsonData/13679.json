[{"count": 0, "tags": [], "bug_id": 13679, "attachment_id": null, "is_private": false, "id": 24606, "time": "2002-10-16T07:19:34Z", "creator": "koester@self.de", "creation_time": "2002-10-16T07:19:34Z", "text": "I am using ant and have installed the version 2.2.0 of xerces\nbuild.xml:\n...\n<!DOCTYPE project PUBLIC \"-//ANT//DTD project//EN\" \"project.dtd\" [\n  <!ENTITY includePaths SYSTEM \"paths.xml\">\n]>\n...\n\nBoth paths.xml and build.xml are in the same directory. If this directory\ncontains a blank, xerces fails. With no white space everything works fine."}, {"count": 1, "tags": [], "bug_id": 13679, "attachment_id": null, "is_private": false, "id": 24809, "time": "2002-10-17T17:11:35Z", "creator": "sandygao@ca.ibm.com", "creation_time": "2002-10-17T17:11:35Z", "text": "It's more an Ant's bug than Xerces'. Transferring it to Ant.\n\nWhen Ant calls the parser to parse build.xml, it stores a FileInputStream in \nthe InputSource. It also sets a system ID for absolutizing relative URI's \nappearing in build.xml. But in the parse() method of the class \norg.apache.tools.ant.helper.ProjectHelperImpl, the file path is not fully \nconverted to a URI. The result is, if the folder has a space ' ' in it, an \ninvalid URI is passed to the parser, and the parser can't use it to abosolutize \nthe references to project.dtd or paths.xml.\n\nXerces recently fixed a similar bug in the JAXP code. You can refer to the \nclass javax.xml.parsers.ConvertToURI for further detail.\n\nAn alternative is to look at the getUserDir() method of class \norg.apache.xerces.xni.parser.XMLInputSource.XMLEntityManager."}, {"count": 2, "tags": [], "bug_id": 13679, "text": "Sorry, the last class name should be\n\"org.apache.xerces.impl.XMLEntityManager\".", "id": 24829, "attachment_id": null, "creator": "sandygao@ca.ibm.com", "creation_time": "2002-10-17T21:55:00Z", "time": "2002-10-17T21:55:00Z", "is_private": false}, {"count": 3, "tags": [], "creator": "sandygao@ca.ibm.com", "text": "And reassign it to ant-dev.", "id": 24830, "time": "2002-10-17T22:00:03Z", "bug_id": 13679, "creation_time": "2002-10-17T22:00:03Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 13679, "text": "Where do I find ConvertToURI?  Didn't see it in xml-commons.\n\n", "id": 26361, "attachment_id": null, "creator": "bodewig@apache.org", "creation_time": "2002-11-15T12:40:10Z", "time": "2002-11-15T12:40:10Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 13679, "attachment_id": null, "is_private": false, "id": 26391, "time": "2002-11-15T15:00:57Z", "creator": "sandygao@ca.ibm.com", "creation_time": "2002-11-15T15:00:57Z", "text": "Hi. The JAXP code had the same problem before (the file path from File objects \nwere not converted to valid URI's). Xerces fixed this problem in its own copy \nof the JAXP code. You can look at the following file for how filepath-to-uri \nworks. (We've moved from ConvertToURI to FilePathToURI, which uses a different \nalgorithm for escaping illegal URI characters, and can also handle non-ascii \ncharacters correctly.) We are working on merging the fix to the JAXP code in \nxml-commons. Cheers.\n\nhttp://cvs.apache.org/viewcvs.cgi/xml-\nxerces/java/src/javax/xml/parsers/FilePathToURI.java?rev=1.2&content-\ntype=text/vnd.viewcvs-markup"}, {"count": 6, "tags": [], "bug_id": 13679, "text": "I haven't been aware that the Xerces team was using a different JAXP version that\nxml-commons, thanks.  I'll look into your code.\n\nWould File.toURI.toURL.toExternalForm work for JDK 1.4 (trading reflection costs\nfor converting it ourselves might be worth it when on 1.4).\n", "id": 26454, "attachment_id": null, "creator": "bodewig@apache.org", "creation_time": "2002-11-18T08:07:37Z", "time": "2002-11-18T08:07:37Z", "is_private": false}, {"count": 7, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "CVS HEAD should now deal with spaces in the path.  I have simplified the Xerces\ncode by not dealing with non-ASCII for now, but this may change.\n\nLeaving it open to remind myself to look into it again for a potential 1.5.2\nAnt release.", "id": 26472, "time": "2002-11-18T14:35:23Z", "bug_id": 13679, "creation_time": "2002-11-18T14:35:23Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "stevel@apache.org", "is_private": false, "text": "*** Bug 17163 has been marked as a duplicate of this bug. ***", "id": 32924, "time": "2003-03-11T07:15:16Z", "bug_id": 13679, "creation_time": "2003-03-11T07:15:16Z", "attachment_id": null}, {"count": 9, "tags": [], "creator": "bodewig@apache.org", "text": "Won't fix in the 1.5 branch, it is fixed in 1.6, so there is no reason to keep\nit open any longer.", "id": 34054, "time": "2003-03-28T14:09:49Z", "bug_id": 13679, "creation_time": "2003-03-28T14:09:49Z", "is_private": false, "attachment_id": null}]