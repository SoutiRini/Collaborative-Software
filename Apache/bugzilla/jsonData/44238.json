[{"count": 0, "tags": [], "bug_id": 44238, "attachment_id": null, "text": "Create an NIO SSL connector:\n     <Connector protocol=\"org.apache.coyote.http11.Http11NioProtocol\" \n           port=\"9505\" minSpareThreads=\"5\" maxSpareThreads=\"75\"\n           scheme=\"https\" secure=\"true\" SSLEnabled=\"true\"\n           keystoreFile=\"d:/temp/server.keystore\"\n           keystorePass=\"changeit\"  \n           clientAuth=\"false\" sslProtocol=\"TLS\"/>\n\n\nIf requesting a small file (e.g. 20KB) from browser:\nhttps://localhost:9505/small.swf\nIt works fine.\n\nBut if requesting a large file (e.g. 2MB) from browser:\nhttps://localhost:9505/large.swf\nThe following exception raised in the log file:\n(But non-NIO SSL connector still works fine.)\n\nJan 15, 2008 4:50:14 PM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Servlet.service() for servlet default threw exception\njava.nio.BufferOverflowException\n\tat java.nio.HeapByteBuffer.put(HeapByteBuffer.java:190)\n\tat\norg.apache.tomcat.util.net.NioBlockingSelector.write(NioBlockingSelector.java:51)\n\tat org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:135)\n\tat org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:130)\n\tat org.apache.tomcat.util.net.SecureNioChannel.flush(SecureNioChannel.java:109)\n\tat\norg.apache.coyote.http11.InternalNioOutputBuffer.writeToSocket(InternalNioOutputBuffer.java:436)\n\tat\norg.apache.coyote.http11.InternalNioOutputBuffer.flushBuffer(InternalNioOutputBuffer.java:761)\n\tat\norg.apache.coyote.http11.InternalNioOutputBuffer$SocketOutputBuffer.doWrite(InternalNioOutputBuffer.java:789)\n\tat\norg.apache.coyote.http11.filters.IdentityOutputFilter.doWrite(IdentityOutputFilter.java:118)\n\tat\norg.apache.coyote.http11.InternalNioOutputBuffer.doWrite(InternalNioOutputBuffer.java:578)\n\tat org.apache.coyote.Response.doWrite(Response.java:560)\n\tat org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.java:353)\n\tat org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:434)\n\tat org.apache.tomcat.util.buf.ByteChunk.append(ByteChunk.java:349)\n\tat org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.java:381)\n\tat org.apache.catalina.connector.OutputBuffer.write(OutputBuffer.java:370)\n\tat\norg.apache.catalina.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)\n\tat org.apache.catalina.servlets.DefaultServlet.copyRange(DefaultServlet.java:1971)\n\tat org.apache.catalina.servlets.DefaultServlet.copy(DefaultServlet.java:1714)\n\tat\norg.apache.catalina.servlets.DefaultServlet.serveResource(DefaultServlet.java:809)\n\tat org.apache.catalina.servlets.DefaultServlet.doGet(DefaultServlet.java:325)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:690)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:803)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:263)\n\tat org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:887)\n\tat\norg.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:696)\n\tat\norg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2009)\n\tat\njava.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n\tat java.lang.Thread.run(Thread.java:619)", "id": 112854, "time": "2008-01-15T01:01:08Z", "creator": "apolloemc@yahoo.com", "creation_time": "2008-01-15T01:01:08Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 44238, "attachment_id": null, "is_private": false, "id": 112874, "time": "2008-01-15T08:37:39Z", "creator": "fhanik@apache.org", "creation_time": "2008-01-15T08:37:39Z", "text": "Would you mind trying with trunk, there are a few fixes that has gone into this,\nI suspect this one would be part of that.\n\nto get the latest, you can follow these steps\n1. have ANT, JDK 1.5 and SVN installed\n2. check out the codfe\n   svn co http://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk\n   cd trunk\n3. build the code\n   ant download\n   ant\n\nand the output is generated in \n   cd output/build\n\nFilip"}, {"count": 2, "text": "This problem seems to have been fixed in the current trunk.", "creator": "apolloemc@yahoo.com", "attachment_id": null, "id": 113066, "time": "2008-01-22T23:00:22Z", "bug_id": 44238, "creation_time": "2008-01-22T23:00:22Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 44238, "attachment_id": null, "id": 113090, "time": "2008-01-23T10:58:09Z", "creator": "fhanik@apache.org", "creation_time": "2008-01-23T10:58:09Z", "is_private": false, "text": "marked as fixed, based on user feedback"}]