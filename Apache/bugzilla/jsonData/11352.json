[{"count": 0, "tags": [], "bug_id": 11352, "text": "Environment:\nJ2SDK1.4, Red Hat Linux 7.3, using Tomcat as the web server (no other web server\non the machine). Used both Netscape Communicator 4.79 and Mozilla 0.9.9 with\nsame results.\n\nAs per jakarta-tomcat-3.3.1/doc/tomcat-ssl-howto.html, I wrote this entry in\nserver.xml and then restarted Tomcat:\n\n<Http10Connector  port=\"8443\" \n                  secure=\"true\"\n                  keystore=\"/home/davpfg2/jakarta-tomcat-3.3.1/JSSEkeystore\"\n                  keypass=\"keypass\"\n                  clientauth=\"false\"\n          SSLImplementation=\"org.apache.tomcat.util.net.JSSEImplementation\" />\n\nWhen I opened https://localhost:8443/index.html in my Netscape browser, I\nreceived several certificate dialogs (as expected, and which demonstrate that\nTomcat successfully found the keystore) and then I received an error message\nthat stated that localhost had requested client authorization but that I did not\nhave a personal certificate. For what it's worth, Tomcat also complained about\nthe missing client certificate:\n\nUsing classpath: /home/davpfg2/jakarta-tomcat-3.3.1/bin/../lib/tomcat.jar\nUsing JAVA_HOME: /usr/java/j2sdk1.4.0_01\nUsing TOMCAT_HOME: /home/davpfg2/jakarta-tomcat-3.3.1\n2002-07-30 20:45:29 - SessionIdGenerator: Opening /dev/urandom\n2002-07-30 20:45:29 - ServerXmlReader: Config=$TOMCAT_HOME/conf/server.xml\n2002-07-30 20:45:29 - PathSetter: home=/home/davpfg2/jakarta-tomcat-3.3.1\n2002-07-30 20:45:29 - ContextXmlReader: Context\nconfig=$TOMCAT_HOME/conf/apps-127.0.0.1.xml\n2002-07-30 20:45:29 - ContextXmlReader: Context\nconfig=$TOMCAT_HOME/conf/apps-admin.xml\n2002-07-30 20:45:29 - ContextXmlReader: Context\nconfig=$TOMCAT_HOME/conf/apps-examples.xml\n2002-07-30 20:45:29 - AutoWebApp: Loaded from config: DEFAULT:/admin\n2002-07-30 20:45:29 - AutoWebApp: Auto-Adding DEFAULT:/\n2002-07-30 20:45:29 - AutoWebApp: Loaded from config: DEFAULT:/examples\n2002-07-30 20:45:29 - AutoWebApp: Auto-Adding DEFAULT:/soap\n2002-07-30 20:45:29 - ContextManager: Tomcat configured and in stable state \n2002-07-30 20:45:29 - ContextManager: Adding  DEFAULT:/admin\n2002-07-30 20:45:29 - ContextManager: Adding  DEFAULT:/examples\n2002-07-30 20:45:29 - ContextManager: Adding  DEFAULT:/ROOT\n2002-07-30 20:45:29 - ContextManager: Adding  DEFAULT:/soap\nEmbededTomcat: Init time 1603\n2002-07-30 20:45:30 - Http10Interceptor: Starting on 8080\n2002-07-30 20:45:30 - Http10Interceptor: Starting on 8443\n2002-07-30 20:45:30 - Ajp12Interceptor: Starting on 8007\n2002-07-30 20:45:30 - Ajp13Interceptor: Starting on 8009\nEmbededTomcat: Startup time 680\nPoolTcpEndpoint: Handshake failed\njavax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException:\nhandshake alert:  no_certificate\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.b(DashoA6275)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.a(DashoA6275)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.a(DashoA6275)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.a(DashoA6275)\n        at com.sun.net.ssl.internal.ssl.AppOutputStream.write(DashoA6275)\n        at java.io.OutputStream.write(OutputStream.java:58)\n        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(DashoA6275)\n        at\norg.apache.tomcat.util.net.JSSESocketFactory.handshake(JSSESocketFactory.java:270)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:479)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:516)\n        at java.lang.Thread.run(Thread.java:536)\nThreadPool: Caught exception executing\norg.apache.tomcat.util.net.TcpWorkerThread@f4f44a, terminating thread\njava.lang.NullPointerException\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:498)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:516)\n        at java.lang.Thread.run(Thread.java:536)\nStop reaper \nSUPER org.apache.tomcat.util.qlog.LogDaemon@4c4975 Exiting\nContextManager: Exiting \n\nWorkaround:\nI double-checked the manual and found that the default is clientauth=\"false\", so\nI simply removed the clientauth line from server.xml and restarted Tomcat. When\nI tried the URL again, my browser successfully displayed index.html.", "id": 20505, "time": "2002-07-31T22:50:01Z", "creator": "habecker@zentek.com", "creation_time": "2002-07-31T22:50:01Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "william.barker@wilshire.com", "attachment_id": null, "text": "With clientauth=\"true\", you are telling Tomcat that the user must present a \npersonal certificate.  Since it seems that you hadn't installed any in \nNetscape, Netscape couldn't send one, and the request failed (just like you \nasked it to :).", "id": 49111, "time": "2003-12-15T00:01:48Z", "bug_id": 11352, "creation_time": "2003-12-15T00:01:48Z", "is_private": false}]