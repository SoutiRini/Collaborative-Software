[{"count": 0, "tags": [], "bug_id": 15259, "text": "When Xindice is embedded within an application and Kernel.shutdown(status_code, \nfalse) is called to stop the server its worker threads do not exit from run and \nresult in the server not fully stopping until the Java VM exits. This is a \nproblem because often times future instances cannot be instantiated because of \nthe current instance which is still running. \n\nSuggested resolution assuming that Kernel is the base and that all Runnable \nhave access to Kernel:\n\nAll workers threads could have a pointer the kernel. Most already do so. When \nshutdown() is called its sets some boolean, like shutdown, to true, a new \npublic method like shutdown() can be added that the worker threads can check \nwhile they loop in run to see if the server has shutdown if it has these worker \nthreads could clean up and exit the run loop.\n\nAs far as I know this affects IndexManager, DBConduit, APIService, HTTPServer, \nSocketServer and Kernel.\n\nI can easily enough patch most of the Runnable classes, but IndexManager does \nnot directly have access to kernel.\n\nThis is not a problem is shutdown(statuscode, true) is called because \nSystem.exit(statuscode) is called, but a problem when embedded because \nSystem.exit(statuscode) cannot be called.\n\nI marked this as Major because once it hangs on shutdown another instance of \nXindice cannot be successfully instantiated.", "id": 27636, "time": "2002-12-11T01:44:14Z", "creator": "goya@servertec.com", "creation_time": "2002-12-11T01:44:14Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "Kevin.Ross@iVerticalLeap.com", "attachment_id": null, "text": "embedded is 1.1 version", "id": 38092, "time": "2003-05-30T23:48:18Z", "bug_id": 15259, "creation_time": "2003-05-30T23:48:18Z", "is_private": false}, {"count": 2, "tags": [], "creator": "Kevin.Ross@iVerticalLeap.com", "attachment_id": null, "text": "I will gladly review and commit your patch for this bug.  Please attach a \npatch in diff -u format, and send a [patch] email to the dev list as a \nreminder.  Thanks!", "id": 38093, "time": "2003-05-30T23:51:28Z", "bug_id": 15259, "creation_time": "2003-05-30T23:51:28Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 15259, "text": "I've been looking at the drivers so I thought I'd take a look at this bug. The\nissue I have with it is that I can't find the class Kernel in the source tree.\nIf it's gone the way of the dodo then is this bug still applicable?", "id": 40154, "time": "2003-07-08T07:32:01Z", "creator": "kevin@rocketred.com.au", "creation_time": "2003-07-08T07:32:01Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 15259, "text": "The kernel has been removed.  If you find this issue with the latest 1.1b2\ndistribution, please reopen this bug.", "id": 40276, "time": "2003-07-09T17:24:33Z", "creator": "Kevin.Ross@iVerticalLeap.com", "creation_time": "2003-07-09T17:24:33Z", "is_private": false, "attachment_id": null}]