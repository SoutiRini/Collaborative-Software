[{"count": 0, "tags": [], "bug_id": 36171, "attachment_id": null, "id": 78455, "time": "2005-08-12T20:37:18Z", "creator": "BBurgess@tiaa-cref.org", "creation_time": "2005-08-12T20:37:18Z", "is_private": false, "text": "On a Windows machine without a 'CLASSPATH' environment variable defined, running\n\"ant -noclasspath\" or having \"-noclasspath\" set anywhere in 'ANT_ARGS' causes\nant to fail with \"Unknown argument: -noclasspath\" followed by the help message.\n\nThis is due to a bug in Launcher.java as well as a couple bugs in the ant.bat file.\n\nI am attaching a patch to fix Launcher.java (which will fix ant.bat's problems\nas well) and also, I suggest reverting ant.bat back to revision 1.38 before\nthese bugs where introduced in it.\n\nThe rollback of ant.bat is because the \"-noclasspath\" argument is handled by\nLauncher.java and therefore does not need to be/should not be handled within\nant.bat (where added complexity is unecessary and causes other bugs.  Plus\nant.bat should mimic the ant shell script which lets Launcher handle the\n\"-noclasspath\" argument)."}, {"count": 1, "tags": [], "text": "Created attachment 16025\nfix for Launcher.java to prevent accidently passing -noclasspath and -nouserlib to the main class", "attachment_id": 16025, "id": 78456, "creator": "BBurgess@tiaa-cref.org", "time": "2005-08-12T20:39:36Z", "bug_id": 36171, "creation_time": "2005-08-12T20:39:36Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 36171, "attachment_id": null, "id": 78457, "time": "2005-08-12T21:01:25Z", "creator": "BBurgess@tiaa-cref.org", "creation_time": "2005-08-12T21:01:25Z", "is_private": false, "text": "instead of the change in the attached patch, another more flexible way of doing\nit would be to do \"if (argList.size() == args.length)\" so that this if statement\nwill not need to be updated every time a new Launcher specific argument is added."}, {"count": 3, "tags": [], "creator": "BBurgess@tiaa-cref.org", "attachment_id": 16050, "is_private": false, "id": 78513, "time": "2005-08-15T16:23:32Z", "bug_id": 36171, "creation_time": "2005-08-15T16:23:32Z", "text": "Created attachment 16050\nupdate to bug fix patch"}, {"count": 4, "tags": [], "bug_id": 36171, "attachment_id": null, "is_private": false, "id": 78881, "time": "2005-08-23T16:19:59Z", "creator": "stevel@apache.org", "creation_time": "2005-08-23T16:19:59Z", "text": "fixed in CVS. Please test!"}, {"count": 5, "tags": [], "creator": "BBurgess@tiaa-cref.org", "attachment_id": null, "id": 78886, "time": "2005-08-23T20:00:42Z", "bug_id": 36171, "creation_time": "2005-08-23T20:00:42Z", "is_private": false, "text": "I have verified that the Lancher.java on the HEAD of CVS is indeed fixed.\n\nSpecifically, I copied the 4 java files from CVS in the\n\"org.apache.tools.ant.launch\" package to a clean download of Ant 1.6.5 src. \nThen I built and the bug is no longer present (\"ant -noclasspath\" works without\nerrors)."}, {"text": "Thanks for the patch.\nI think that -nouserlib causes\nthe same problem on windows.\n\nThe reason that this has not caused a problem on unix is that\nthe -cp param is always passed in and so a new array of\nparameters is always created. \n\nThe reason that ant.bat was modified is that there has\nbeen a lot of reports of problems with classpaths on dos:\n  - backslashs at the end of the classpath\n  - a classpath with double quotes\n  - classpath with spaces (usually with double quotes)\n\nthese cause problems with ant.bat - the idea of -noclasspath is\nthat we can tell people to do that and then if that works to\ncheck the classpath.\n", "tags": [], "creator": "peterreilly@apache.org", "is_private": false, "count": 6, "id": 79135, "time": "2005-08-29T16:39:21Z", "bug_id": 36171, "creation_time": "2005-08-29T16:39:21Z", "attachment_id": null}, {"count": 7, "attachment_id": null, "bug_id": 36171, "text": "Sorry, I re-read the messsages and see that you mention -nouserlib.", "id": 79136, "time": "2005-08-29T17:19:42Z", "creator": "peterreilly@apache.org", "creation_time": "2005-08-29T17:19:42Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "text": "*** Bug 38744 has been marked as a duplicate of this bug. ***", "attachment_id": null, "id": 86056, "creator": "BBurgess@tiaa-cref.org", "time": "2006-02-21T23:12:42Z", "bug_id": 36171, "creation_time": "2006-02-21T23:12:42Z", "is_private": false}]