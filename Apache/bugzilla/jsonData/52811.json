[{"count": 0, "tags": [], "text": "When creating the HttpServletResponse the setContentType(type) is used for setting the content type and character encoding.\nIf the type is for example:\n\nmultipart/related;boundary=1_4F50BD36_CDF8C28;Start=\"<31671603.smil>\";Type=\"application/smil;charset=UTF-8\"\n\nit is parsed and the content type is set to:\n\nmultipart/related;boundary=1_4F50BD36_CDF8C28;Start=\"<31671603.smil>\";Type=\"application/smil\n\nand character encoding to:\n\nUTF-8\n\nI believe it is incorrect, the content type should be:\n\nmultipart/related;boundary=1_4F50BD36_CDF8C28;Start=\"<31671603.smil>\";Type=\"application/smil;charset=UTF-8\"\n\nand the character encoding should be set to default (ISO-8859-1).", "is_private": false, "id": 154435, "creation_time": "2012-03-02T12:56:46Z", "time": "2012-03-02T12:56:46Z", "creator": "Martin.Havel@acision.com", "bug_id": 52811, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "is_private": false, "id": 154875, "time": "2012-03-13T14:48:09Z", "bug_id": 52811, "creation_time": "2012-03-13T14:48:09Z", "text": "That was fun. Lots of sneaky edge cases parsing that little lot. Ended up implementing a new HTTP header parser.\n\nFixed in trunk and 7.0.x and will be included in 7.0.27 onwards.\n\nI have proposed the fix for 6.0.x."}, {"count": 2, "tags": [], "bug_id": 52811, "attachment_id": null, "id": 160824, "creation_time": "2012-07-23T10:55:46Z", "time": "2012-07-23T10:55:46Z", "creator": "n.v.harikrishna.apache@gmail.com", "text": "(In reply to comment #1)\n> That was fun. Lots of sneaky edge cases parsing that little lot. Ended up\n> implementing a new HTTP header parser.\n> \n> Fixed in trunk and 7.0.x and will be included in 7.0.27 onwards.\n> \n> I have proposed the fix for 6.0.x.\n\nI do have similar issue and tested with latest Tomcat 7 code. What I observed is:\n\n1. When the content type is ending with  'start-info=\"text/xml;charset=UTF-8\"', at the browser I am getting: 'start-info=\"text/xml;charset=UTF-8\";charset=ISO-8859-1'. charset=ISO-8859-1 is appended to content type.\n\n2. When the content type is ending with 'start-info=\"text/xml\"; charset=UTF-8', at the browser I am getting the same thing. There is not problem with this case.\n\nMy question is:\n\nIn case 1: even though charset exist (which is mentioned as UTF-8) in content type string, I am getting another extra charset (which is ISO-8859-1). Is it the expected behavior? Does the given content type is considered to as invalid/unknown content type?", "is_private": false}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 160834, "time": "2012-07-23T12:06:46Z", "bug_id": 52811, "creation_time": "2012-07-23T12:06:46Z", "is_private": false, "text": "(In reply to comment #2)\n> My question is:\n\nThose are all questions for the users list. There is no Tomcat bug in the behavior you describe."}, {"count": 4, "tags": [], "text": "The back-port proposal has been withdrawn due to a lack of support. A simpler solution is required.", "attachment_id": null, "bug_id": 52811, "id": 162485, "time": "2012-10-01T08:41:59Z", "creator": "markt@apache.org", "creation_time": "2012-10-01T08:41:59Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 52811, "attachment_id": null, "id": 168983, "time": "2013-07-31T16:42:24Z", "creator": "markt@apache.org", "creation_time": "2013-07-31T16:42:24Z", "is_private": false, "text": "The original proposal used a pasrer generated by javacc. That has since been replaced in trunk and 7.0.x with a simpler implemenation. I have proposed a back-port of that simpler implementation."}, {"count": 6, "tags": [], "bug_id": 52811, "text": "The backport of the simpler implementation has been committed and will be included in 6.0.38 onwards.", "id": 171629, "time": "2013-12-07T21:19:37Z", "creator": "markt@apache.org", "creation_time": "2013-12-07T21:19:37Z", "is_private": false, "attachment_id": null}]