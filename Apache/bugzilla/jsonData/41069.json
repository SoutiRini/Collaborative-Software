[{"count": 0, "tags": [], "bug_id": 41069, "attachment_id": null, "is_private": false, "id": 96337, "time": "2006-11-29T03:56:28Z", "creator": "elessar@gdnmail.net", "creation_time": "2006-11-29T03:56:28Z", "text": "The following class is accepted by JustIce (BCEL 5.2), whereas Sun verifier (correctly) rejects it:\n\nCompiled from \"Test.java\"\npublic class Test extends java.lang.Object{\npublic Test();\n  Code:\n   0:   aload_0\n   1:   invokespecial   #9; //Method java/lang/Object.\"<init>\":()V\n   4:   return\n\npublic static void main(java.lang.String[]);\n  Code:\n   0:   aload_0\n   1:   iconst_0\n   2:   caload\n   3:   return\n\n}\n\nIn the \"main\" method we are trying to read a char from an array of Strings and this is of course type-\nincorrect.\n\nMy take on the solution is that in the org.apache.bcel.verifier.structurals.InstConstraintVisitor class, in \nthe visitCALOAD method, there are only two checks being made: whether the index is of int type, and \nwhether there is really an array on the stack.  What is missing is the check, whether the array holds \nelement of 'char' type."}, {"count": 1, "attachment_id": 19195, "bug_id": 41069, "text": "Created attachment 19195\nthe class illustrating the problem", "id": 96338, "time": "2006-11-29T03:57:32Z", "creator": "elessar@gdnmail.net", "creation_time": "2006-11-29T03:57:32Z", "tags": [], "is_private": false}]