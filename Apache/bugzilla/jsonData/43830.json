[{"attachment_id": null, "tags": [], "creator": "brian-apache@vfive.com", "text": "Mod_jrun20.so is a module provided by Adobe for the ColdFusion product.  It is\nvery similar to PHP, Ruby, etc.  When enabling mod_deflate, only SOME dynamic\ncontent is compressed while all static content is compressed.\n\nI have enabled gzip compression with the following configuration:\n\n<Location />\n  AddOutputFilterByType DEFLATE text/html text/plain text/css text/javascript\ntext/xml application/x-javascript\n</Location>\n\nI am unable to use SetOutputFilter DEFLATE with exceptions as we use ColdFusion\nto generate files dynamically like PDF, SWF and JPG that cannot be compressed.\n\nUsing the AddOutputFilterByType, CSS and Javascript are compressed but HTML and\nXML returned from ColdFusion is not.\n\nWith the help of rici on #apache, we tried adding the following configuration\noptions:\n\n    AddType text/html .cfm\n    AddOutputFilter DEFLATE cfm\n\nFirst one at a time and then both together.  Here is where things turn\ninconsistent.  Situations under which text/html is returned properly:\n\n * HTTP/1.0 requests\n * HTTP/1.0 or /1.1 requests that do not include a specific filename but resolve\nto a ColdFusion file by way of \"DirectoryIndex index.cfm\".\n \nAll other HTML and XML pages are returned without compression.  This is verified\nby way of Firefox's LiveHTTPHeaders and third party site WebSiteOptimization.com.\n\nI have enabled deflate logging that includes the initial and final response\nstatus as well as the mime type to verify that these are being seen correctly. \nHere are some examples from the log where it is working.  Non-HTML content (CSS/JS):\n\n[09/Nov/2007:10:22:55 -0800] 200 200 text/css GET /bits/css/pap.css HTTP/1.1\n4792 19638 24\n[09/Nov/2007:10:26:05 -0800] 200 200 application/x-javascript GET\n/bits/library/jquery/1.2.1/jquery.js HTTP/1.1 14437 46179 31\n\ntext/html in both 1.0 and 1.1 without referencing the filename:\n\n[09/Nov/2007:10:18:04 -0800] 200 200 text/html GET / HTTP/1.1 3352 9877 33\n[09/Nov/2007:10:23:16 -0800] 200 200 text/html GET / HTTP/1.0 3352 9877 33\n[09/Nov/2007:10:25:55 -0800] 200 200 text/html GET /pmp/ HTTP/1.1 1311 2959 44\n\nAnd instances where it is not.  GET with the filename specified:\n\n[09/Nov/2007:10:18:24 -0800] 200 200 text/html GET /index.cfm HTTP/1.1 - - -\n[09/Nov/2007:10:26:04 -0800] 200 200 text/html POST /pmp/index.cfm HTTP/1.1 - -  -\n[09/Nov/2007:10:26:14 -0800] 200 200 text/xml GET /calendar/rss.cfm?type=rss HTT\nP/1.0 - - -\n\nThere may be something done incorrectly in Adobe's mod_jrun module w/r/t adding\noutput filters however the fact that DirectoryIndex influences the results here\nindicates to me something else is going on and why I'm filing this bug.\n\nI have the mod_jrun source available and can upload it if desired.", "count": 0, "id": 110372, "time": "2007-11-09T11:40:01Z", "bug_id": 43830, "creation_time": "2007-11-09T11:40:01Z", "is_private": false}, {"count": 1, "text": "Created attachment 21107\n\n\nThe mod_jrun20.so source code.\tNote that both Apache 1.3 and 2.0 modules are\nin this zip; mod_jrun20.c is the 2.0.x version.", "bug_id": 43830, "is_private": false, "id": 110373, "time": "2007-11-09T11:43:59Z", "creator": "brian-apache@vfive.com", "creation_time": "2007-11-09T11:43:59Z", "tags": [], "attachment_id": 21107}, {"count": 2, "tags": [], "bug_id": 43830, "text": "This is a bug in mod_jrun. They are not calling ap_set_content_type to set the\ncontent type but they assign the value directly to r->content_type.\nPlease do NOT attach data for which you do NOT own the copyright.", "id": 110380, "time": "2007-11-09T14:37:04Z", "creator": "rpluem@apache.org", "creation_time": "2007-11-09T14:37:04Z", "is_private": false, "attachment_id": null}]