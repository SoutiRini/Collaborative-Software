[{"count": 0, "tags": [], "creator": "dsail@zedo.com", "is_private": false, "text": "The following was shown when valgrind was used on rotatelogs.c file \n\ndeep@dev03:~/src/httpd-\n2.0.58/support> /home/deep/valgrind/runvalgrind/bin/valgrind --tool=memcheck --\nleak-check=yes ./rotatelogs\n==26239== Memcheck, a memory error detector.\n==26239== Copyright (C) 2002-2005, and GNU GPL'd, by Julian Seward et al.\n==26239== Using LibVEX rev 1575, a library for dynamic binary translation.\n==26239== Copyright (C) 2004-2005, and GNU GPL'd, by OpenWorks LLP.\n==26239== Using valgrind-3.1.1, a dynamic binary instrumentation framework.\n==26239== Copyright (C) 2000-2005, and GNU GPL'd, by Julian Seward et al.\n==26239== For more details, rerun with: -v\n==26239==\n==26240==\n==26240== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 4)\n==26240== malloc/free: in use at exit: 18,956 bytes in 531 blocks.\n==26240== malloc/free: 1,086 allocs, 555 frees, 58,905 bytes allocated.\n==26240== For counts of detected errors, rerun with: -v\n==26240== searching for pointers to 531 not-freed blocks.\n==26240== checked 982,680 bytes.\n==26240==\n==26240== 33 bytes in 1 blocks are definitely lost in loss record 1 of 3\n==26240==    at 0x4A18CF6: malloc (vg_replace_malloc.c:149)\n==26240==    by 0x454375: xmalloc (in /bin/bash)\n==26240==    by 0x440394: execute_command_internal (in /bin/bash)\n==26240==    by 0x43F83E: execute_command (in /bin/bash)\n==26240==    by 0x440FEA: execute_command_internal (in /bin/bash)\n==26240==    by 0x43F83E: execute_command (in /bin/bash)\n==26240==    by 0x43781A: reader_loop (in /bin/bash)\n==26240==    by 0x4368F5: main (in /bin/bash)\n==26240==\n==26240== LEAK SUMMARY:\n==26240==    definitely lost: 33 bytes in 1 blocks.\n==26240==      possibly lost: 0 bytes in 0 blocks.\n==26240==    still reachable: 18,923 bytes in 530 blocks.\n==26240==         suppressed: 0 bytes in 0 blocks.\n==26240== Reachable blocks (those to which a pointer was found) are not shown.\n==26240== To see them, rerun with: --show-reachable=yes\n==26242==\n==26242== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 4)\n==26242== malloc/free: in use at exit: 43,569 bytes in 1,259 blocks.\n==26242== malloc/free: 4,137 allocs, 2,878 frees, 226,494 bytes allocated.\n==26242== For counts of detected errors, rerun with: -v\n==26242== searching for pointers to 1,259 not-freed blocks.\n==26242== checked 1,005,000 bytes.\n==26242==\n==26242== 27 bytes in 1 blocks are definitely lost in loss record 1 of 4\n==26242==    at 0x4A18CF6: malloc (vg_replace_malloc.c:149)\n==26242==    by 0x454375: xmalloc (in /bin/bash)\n==26242==    by 0x440394: execute_command_internal (in /bin/bash)\n==26242==    by 0x454E2F: parse_and_execute (in /bin/bash)\n==26242==    by 0x44BCF1: command_substitute (in /bin/bash)\n==26242==    by 0x44CCD3: (within /bin/bash)\n==26242==    by 0x44C9CE: (within /bin/bash)\n==26242==    by 0x44F818: (within /bin/bash)\n==26242==    by 0x441732: (within /bin/bash)\n==26242==    by 0x43FB69: execute_command_internal (in /bin/bash)\n==26242==    by 0x43F83E: execute_command (in /bin/bash)\n==26242==    by 0x43FD9C: execute_command_internal (in /bin/bash)\n==26242==\n==26242== LEAK SUMMARY:\n==26242==    definitely lost: 27 bytes in 1 blocks.\n==26242==      possibly lost: 0 bytes in 0 blocks.\n==26242==    still reachable: 43,542 bytes in 1,258 blocks.\n==26242==         suppressed: 0 bytes in 0 blocks.\n==26242== Reachable blocks (those to which a pointer was found) are not shown.\n==26242== To see them, rerun with: --show-reachable=yes\n==26241==\n==26241== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 4)\n==26241== malloc/free: in use at exit: 42,739 bytes in 1,234 blocks.\n==26241== malloc/free: 4,097 allocs, 2,863 frees, 224,510 bytes allocated.\n==26241== For counts of detected errors, rerun with: -v\n==26241== searching for pointers to 1,234 not-freed blocks.\n==26241== checked 1,004,200 bytes.\n==26241==\n==26241== LEAK SUMMARY:\n==26241==    definitely lost: 0 bytes in 0 blocks.\n==26241==      possibly lost: 0 bytes in 0 blocks.\n==26241==    still reachable: 42,739 bytes in 1,234 blocks.\n==26241==         suppressed: 0 bytes in 0 blocks.\n==26241== Reachable blocks (those to which a pointer was found) are not shown.\n==26241== To see them, rerun with: --show-reachable=yes\n==26244==\n==26244== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 4)\n==26244== malloc/free: in use at exit: 43,495 bytes in 1,255 blocks.\n==26244== malloc/free: 4,173 allocs, 2,918 frees, 226,612 bytes allocated.\n==26244== For counts of detected errors, rerun with: -v\n==26244== searching for pointers to 1,255 not-freed blocks.\n==26244== checked 1,005,256 bytes.\n==26244==\n==26244== LEAK SUMMARY:\n==26244==    definitely lost: 0 bytes in 0 blocks.\n==26244==      possibly lost: 0 bytes in 0 blocks.\n==26244==    still reachable: 43,495 bytes in 1,255 blocks.\n==26244==         suppressed: 0 bytes in 0 blocks.\n==26244== Reachable blocks (those to which a pointer was found) are not shown.\n==26244== To see them, rerun with: --show-reachable=yes\n==26243==\n==26243== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 4)\n==26243== malloc/free: in use at exit: 42,360 bytes in 1,219 blocks.\n==26243== malloc/free: 4,160 allocs, 2,941 frees, 226,216 bytes allocated.\n==26243== For counts of detected errors, rerun with: -v\n==26243== searching for pointers to 1,219 not-freed blocks.\n==26243== checked 1,003,704 bytes.\n==26243==\n==26243== LEAK SUMMARY:\n==26243==    definitely lost: 0 bytes in 0 blocks.\n==26243==      possibly lost: 0 bytes in 0 blocks.\n==26243==    still reachable: 42,360 bytes in 1,219 blocks.\n==26243==         suppressed: 0 bytes in 0 blocks.\n==26243== Reachable blocks (those to which a pointer was found) are not shown.\n==26243== To see them, rerun with: --show-reachable=yes\n==26246==\n==26246== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 4)\n==26246== malloc/free: in use at exit: 42,274 bytes in 1,217 blocks.\n==26246== malloc/free: 4,230 allocs, 3,013 frees, 228,079 bytes allocated.\n==26246== For counts of detected errors, rerun with: -v\n==26246== searching for pointers to 1,217 not-freed blocks.\n==26246== checked 1,003,456 bytes.\n==26246==\n==26246== LEAK SUMMARY:\n==26246==    definitely lost: 0 bytes in 0 blocks.\n==26246==      possibly lost: 0 bytes in 0 blocks.\n==26246==    still reachable: 42,274 bytes in 1,217 blocks.\n==26246==         suppressed: 0 bytes in 0 blocks.\n==26246== Reachable blocks (those to which a pointer was found) are not shown.\n==26246== To see them, rerun with: --show-reachable=yes\n==26249==\n==26249== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 4)\n==26249== malloc/free: in use at exit: 41,845 bytes in 1,204 blocks.\n==26249== malloc/free: 4,295 allocs, 3,091 frees, 229,537 bytes allocated.\n==26249== For counts of detected errors, rerun with: -v\n==26249== searching for pointers to 1,204 not-freed blocks.\n==26249== checked 1,002,848 bytes.\n==26249==\n==26249== LEAK SUMMARY:\n==26249==    definitely lost: 0 bytes in 0 blocks.\n==26249==      possibly lost: 0 bytes in 0 blocks.\n==26249==    still reachable: 41,845 bytes in 1,204 blocks.\n==26249==         suppressed: 0 bytes in 0 blocks.\n==26249== Reachable blocks (those to which a pointer was found) are not shown.\n==26249== To see them, rerun with: --show-reachable=yes\n==26252==\n==26252== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 4)\n==26252== malloc/free: in use at exit: 327,087 bytes in 2,094 blocks.\n==26252== malloc/free: 7,274 allocs, 5,180 frees, 586,780 bytes allocated.\n==26252== For counts of detected errors, rerun with: -v\n==26252== searching for pointers to 2,094 not-freed blocks.\n==26252== checked 1,021,688 bytes.\n==26252==\n==26252== 1,718 bytes in 1 blocks are definitely lost in loss record 1 of 4\n==26252==    at 0x4A18CF6: malloc (vg_replace_malloc.c:149)\n==26252==    by 0x454375: xmalloc (in /bin/bash)\n==26252==    by 0x440394: execute_command_internal (in /bin/bash)\n==26252==    by 0x454E2F: parse_and_execute (in /bin/bash)\n==26252==    by 0x43F5F1: (within /bin/bash)\n==26252==    by 0x4418ED: (within /bin/bash)\n==26252==    by 0x43FB69: execute_command_internal (in /bin/bash)\n==26252==    by 0x454E2F: parse_and_execute (in /bin/bash)\n==26252==    by 0x44BCF1: command_substitute (in /bin/bash)\n==26252==    by 0x44CCD3: (within /bin/bash)\n==26252==    by 0x44D5C8: (within /bin/bash)\n==26252==    by 0x44D95A: (within /bin/bash)\n==26252==\n==26252== LEAK SUMMARY:\n==26252==    definitely lost: 1,718 bytes in 1 blocks.\n==26252==      possibly lost: 0 bytes in 0 blocks.\n==26252==    still reachable: 325,369 bytes in 2,093 blocks.\n==26252==         suppressed: 0 bytes in 0 blocks.\n==26252== Reachable blocks (those to which a pointer was found) are not shown.\n==26252== To see them, rerun with: --show-reachable=yes\n==26251==\n==26251== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 7 from 4)\n==26251== malloc/free: in use at exit: 308,442 bytes in 1,329 blocks.\n==26251== malloc/free: 5,583 allocs, 4,254 frees, 560,353 bytes allocated.\n==26251== For counts of detected errors, rerun with: -v\n==26251== searching for pointers to 1,329 not-freed blocks.\n==26251== checked 1,008,248 bytes.\n==26251==\n==26251== LEAK SUMMARY:\n==26251==    definitely lost: 0 bytes in 0 blocks.\n==26251==      possibly lost: 0 bytes in 0 blocks.\n==26251==    still reachable: 308,442 bytes in 1,329 blocks.\n==26251==         suppressed: 0 bytes in 0 blocks.\n==26251== Reachable blocks (those to which a pointer was found) are not shown.\n==26251== To see them, rerun with: --show-reachable=yes\nUsage: /home/deep/src/httpd-2.0.58/support/.libs/lt-rotatelogs [-l] <logfile> \n<rotation time in seconds> [offset minutes from UTC] or <rotation size in \nmegabytes>\n\nAdd this:\n\nTransferLog \"|/home/deep/src/httpd-2.0.58/support/.libs/lt-\nrotatelogs /some/where 86400\"\n\nor\n\nTransferLog \"|/home/deep/src/httpd-2.0.58/support/.libs/lt-\nrotatelogs /some/where 5M\"\n\nto httpd.conf. The generated name will be /some/where.nnnn where nnnn is the\nsystem time at which the log nominally starts (N.B. if using a rotation time,\nthe time will always be a multiple of the rotation time, so you can synchronize\ncron scripts with it). At the end of each rotation time or when the file size\nis reached a new log is started.", "id": 88752, "time": "2006-05-03T12:57:40Z", "bug_id": 39471, "creation_time": "2006-05-03T12:57:40Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 39471, "attachment_id": null, "text": "You're running valgrind, the *uninstalled* rotatelogs program, which is actually\na libtool wrapper script.  Run valgrind on the *installed* rotatelogs program,\nand you might get interesting results.  But since rotatelogs does not use\nmalloc/free directly, only pools, this is unlikely too.", "id": 88754, "time": "2006-05-03T13:31:05Z", "creator": "jorton@redhat.com", "creation_time": "2006-05-03T13:31:05Z", "is_private": false}]