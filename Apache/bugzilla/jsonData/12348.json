[{"count": 0, "tags": [], "bug_id": 12348, "attachment_id": null, "text": "The tests: ServletToServletErrorPageTest ServletToServletError501PageTest\nServletToJSPErrorPageTest and ServletToJSPError502PageTest have golden files that\nexpect the request uri to be set as the URI of the resource forward to.\n\nAre you sure this is correct?  The spec says in 9.9:\n\n\"The error page mechanism described does not intervene when errors occur in\nservlets invoked using the RequestDispatcher. In this way, a servlet using the\nRequestDispatcher to call another servlet has the opportunity to handle errors\ngenerated in the servlet it calls.\"\n\nThis indicates that it is the context of the exception should be considered\nto be the first called by the container.    \n\nIt is possible for a servlet to:\n + try a RD.forward\n + catch an exception from it\n + try another RD.forward\n + catch an exception from it\n + decide to throw one or the other exception or a new exception \n   to the container.\n\nIn this case, what should request_uri be? the first or second forward?\nThe container cannot work this out from the exception.", "id": 22342, "time": "2002-09-05T23:58:08Z", "creator": "gregw@mortbay.org", "creation_time": "2002-09-05T23:58:08Z", "is_private": false}, {"count": 1, "tags": [], "creator": "Ryan.Lubke@Sun.COM", "attachment_id": null, "id": 22359, "time": "2002-09-06T13:13:56Z", "bug_id": 12348, "creation_time": "2002-09-06T13:13:56Z", "is_private": false, "text": "The ServletToXXXErrorPage tests do not use an RD.\n\nThey merely confirm the Servlet and JSP resources can be used as an error page.\n\nSo in the case of ServletToServletErrorPageTest the sequence of events is:\n1.  Client sends request to ServletToServletErrorPageTest\n2.  ServletToServletErrorPageTest throws an ArithmeticException (unhandled)\n3.  Servlet error page as defined in web.xml should be invoked.  \n    \nThe Goldenfile expects the request URI to be that of the page that cause the\noriginal exception, in this case ServletToServlerErrorPageTest should be in the\nrequest URI.\n\n"}, {"count": 2, "tags": [], "creator": "gregw@mortbay.org", "attachment_id": null, "id": 26179, "time": "2002-11-13T15:03:50Z", "bug_id": 12348, "creation_time": "2002-11-13T15:03:50Z", "is_private": false, "text": "\nOK - I think my description of the problem was wrong.  \nBut I still think it is a problem.\n\nThe golden file for ServletToServletErrorPageTest contains:\n\nrequest_uri=/servlet-tests/tests/javax_servlet/Error/ServletToServletErrorPageTest\n\nI don't know what that URI is?   It is not the original URI, which is\n\n  /servlet-tests/ServletToServletErrorPageTest\n\nIt is not the error page URL, as the error page definition is:\n\n  <error-page>\n    <exception-type>java.lang.ArithmeticException</exception-type>\n    <location>/ServletErrorPage</location>\n  </error-page>\n\nSo it is not the error page URI either?\n\nWhen Jetty runs this test, it gets:\n\nin ServletErrorPage\nstatus_code=500\nexception_type=class java.lang.ArithmeticException\nmessage=This is an ArithmeticException\nexception=java.lang.ArithmeticException: This is an ArithmeticException\nrequest_uri=/servlet-tests/ServletToServletErrorPageTest\nservlet_name=ServletToServletErrorPageTest\n\nBut fails the test, even though I think that is the correct request_uri - No?\n\nDitto for the other related error page tests.\n\nthanks"}, {"count": 3, "tags": [], "bug_id": 12348, "attachment_id": null, "text": "Greg,\n\nThis issue was corrected last week, so you may want to update your repository.", "id": 26200, "time": "2002-11-13T16:57:10Z", "creator": "Ryan.Lubke@Sun.COM", "creation_time": "2002-11-13T16:57:10Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 12348, "attachment_id": null, "text": "No comment from Greg.  Will assume he's all set.", "id": 26748, "time": "2002-11-21T22:25:27Z", "creator": "Ryan.Lubke@Sun.COM", "creation_time": "2002-11-21T22:25:27Z", "is_private": false}]