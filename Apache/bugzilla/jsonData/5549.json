[{"count": 0, "tags": [], "bug_id": 5549, "attachment_id": null, "id": 9111, "time": "2001-12-20T23:41:00Z", "creator": "misciii@hotmail.com", "creation_time": "2001-12-20T23:41:00Z", "is_private": false, "text": "I am currently trying to upload binary files with apache 1.3.22, tomcat 4.0.1, \nand mod_webapp 1.0.1-tc401.  I am getting the same \"unexpected end of part\" \nexception from MultipartRequest that many others have mentioned.  A file is \ncreated in the directory that I specify to upload the file into, but it is 0 \nbytes.  Yet the upload works perfectly if I go directly through tomcat."}, {"count": 1, "tags": [], "bug_id": 5549, "attachment_id": null, "id": 9297, "time": "2002-01-02T14:11:12Z", "creator": "roger@livesidebar.com", "creation_time": "2002-01-02T14:11:12Z", "is_private": false, "text": "Confirming. I'm having the same problem on linux with the warp connector, but\nthe files are uploaded with lower bytes then the original. Works fine directly\nthrough tomcat."}, {"count": 2, "tags": [], "bug_id": 5549, "attachment_id": null, "text": "Pier fixed this a while back.  Here's the patch:\n\nIndex: catalina/src/share/org/apache/catalina/connector/warp/WarpRequest.java  \n===================================================================  \nRCS file: /home/cvs/jakarta-tomcat-connectors/webapp/java/WarpRequest.java,v  \nretrieving revision 1.9  \nretrieving revision 1.10  \ndiff -u -r1.9 -r1.10  \n--- catalina/src/share/org/apache/catalina/connector/warp/WarpRequest.java \n200\\1/07/25 22:32:05     1.9  \n+++ catalina/src/share/org/apache/catalina/connector/warp/WarpRequest.java \n200\\1/10/19 19:18:28     1.10  \n@@ -139,7 +139,7 @@  \n                 throw new IOException(\"Invalid WARP packet type for body\");  \n \n             if (this.packet.pointer<this.packet.size) \n-                return((int)this.packet.buffer[this.packet.pointer++]); \n+                return(((int)this.packet.buffer[this.packet.pointer++])&0x0ff)\\; \n \n             this.packet.reset(); \n             this.packet.setType(Constants.TYPE_CBK_READ); \n\n*** This bug has been marked as a duplicate of 3534 ***", "id": 9331, "time": "2002-01-03T17:25:24Z", "creator": "dlr@finemaltcoding.com", "creation_time": "2002-01-03T17:25:24Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 5549, "attachment_id": null, "id": 9333, "time": "2002-01-03T18:49:37Z", "creator": "misciii@hotmail.com", "creation_time": "2002-01-03T18:49:37Z", "is_private": false, "text": "I don't think that patch fixed this problem.  I'm looking at the source of the \nversion of mod_webapp that I am using from 26-Nov-2001, and the patch is \nalready there in WarpRequest.java, but the problem remains.  Can this bug be \nreevaluated?"}, {"count": 4, "text": "The development source for mod_webapp is from the jakarta-tomcat-connectors\n(j-t-c) CVS module (both the Java and C code lives there).  However, an older\nversion of the Java connector code also exists in the jakarta-tomcat-4.0\nrepository.  This older version is what ships with Tomcat 4.0.1.  Unless you\nbuilt Catalina from modified source, it's highly unlikely that you have patches\nfrom j-t-c CVS (as they have not yet made it into Catalina CVS).\n\nPlease verify and mark this issue as a duplicate (again).\n", "bug_id": 5549, "attachment_id": null, "id": 9358, "time": "2002-01-04T10:34:39Z", "creator": "dlr@finemaltcoding.com", "creation_time": "2002-01-04T10:34:39Z", "tags": [], "is_private": false}, {"attachment_id": null, "tags": [], "creator": "misciii@hotmail.com", "is_private": false, "count": 5, "id": 9373, "time": "2002-01-05T08:49:08Z", "bug_id": 5549, "creation_time": "2002-01-05T08:49:08Z", "text": "I believe I understand the problem now, thanks for the explanation.  Can we \nexpect to see the latest version of mod_webapp (with the file upload patch) \neffective in Tomcat 4.0.2?\n\n*** This bug has been marked as a duplicate of 3534 ***"}]