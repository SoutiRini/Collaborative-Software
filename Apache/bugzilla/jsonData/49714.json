[{"count": 0, "tags": [], "creator": "kfujino@apache.org", "attachment_id": null, "id": 138939, "time": "2010-08-05T22:06:15Z", "bug_id": 49714, "creation_time": "2010-08-05T22:06:15Z", "is_private": false, "text": "Even if < distributable/> is set to web.xml(servlet3.0), \ndistributable is changed from true to false by the annotation process of JAR. \n\nContextConfig#processAnnotations is as follows. \n===ContextConfig#processAnnotations\nprotected void processAnnotations(Set<WebXml> fragments) {\n    for(WebXml fragment : fragments) {\n        if (!fragment.isMetadataComplete()) {\n            WebXml annotations = new WebXml();\n            URL url = fragment.getURL();\n            processAnnotationsUrl(url, annotations);\n            Set<WebXml> set = new HashSet<WebXml>();\n            set.add(annotations);\n            // Merge annotations into fragment - fragment takes priority\n            fragment.merge(set);\n        }\n    }\n}\n===\ndistributable of \"annotations\" created by new WebXml() is false (default). \nIf \"annotations\" is merged with \"fragment\", distributable of \"fragment\" becomes false. \n\nBecause \"fragment\" is merged with web.xml of the web application,\neven if < distributable/> is set to web.xml, distributable is changed from true to false. \n\nThe following are necessary. \nannotations.setDistributable(true);\n\nBest regards."}, {"count": 1, "tags": [], "creator": "kfujino@apache.org", "attachment_id": null, "text": "Fixed in trunk.\nThis fix applied to 7.0, will be in 7.0.3 onwards.", "id": 138940, "time": "2010-08-05T22:23:16Z", "bug_id": 49714, "creation_time": "2010-08-05T22:23:16Z", "is_private": false}]