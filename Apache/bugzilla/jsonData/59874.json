[{"count": 0, "tags": [], "text": "The javadoc for ServletRequest.getParameterValues() states:\n\n\"Returns an array of String objects containing all of the values the given request parameter has, or null if the parameter does not exist.\"\n\nIn other words, when a parameter does not exist in the request, this method is supposed to return null.\n\nTomcat is returning an empty String array (new String[0]) instead of null.\n\nThis nonconformity to the Servlet API causes other software to fail. For example Spring Framework relies on this method returning null for their \"defaultValue\" functionality for \"@RequestParam\" and this bug causes Spring to not resolve \"defaultValue\" correctly.\n\nThis issue may also affect Tomcat 9 - please check.\n\n\nBTW, my personal opinion is that the standard is broken (in this case the sensible thing to do is to return an empty array, not null), but sometimes you are forced to implement broken APIs, especially when others rely on the documented broken behavior.", "is_private": false, "id": 192445, "creator": "cvmocanu@gmail.com", "time": "2016-07-17T12:44:01Z", "bug_id": 59874, "creation_time": "2016-07-17T12:44:01Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 59874, "is_private": false, "id": 192450, "attachment_id": null, "creator": "knst.kolinko@gmail.com", "creation_time": "2016-07-17T13:34:28Z", "time": "2016-07-17T13:34:28Z", "text": "I do not confirm your issue.\n\nUsing Tomcat 8.0.36 (the version you reported this bug against)\n1. Place the following file as webapps/ROOT/test.jsp\n\n[[[\n<%@page contentType=\"text/plain;charset=UTF-8\"%><%\nout.println(\"RESULT: \" + request.getParameterValues(\"foo\"));\n%>\n]]]\n\n2. Start Tomcat and open the following address in a web browser\nhttp://localhost:8080/test.jsp \n\nThe page displays:\n\nRESULT: null\n\n\nThus the method returned null as expected."}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 192888, "time": "2016-08-04T16:46:39Z", "bug_id": 59874, "creation_time": "2016-08-04T16:46:39Z", "is_private": false, "text": "No response from the OP and testing clearly shows Tomcat is behaving as required by the spec."}]