[{"count": 0, "tags": [], "creator": "Jean-Francois.Morneau@ift.ulaval.ca", "is_private": false, "text": "The optinal task does not go recursively in the specified directory accroding \nthe fileset!\n\nI've fixed the bug:\nChange the old function to this one and it's fixed!\n\nprotected void scandir(String dir, String vpath, boolean fast) {\n            try {\n                if (!ftp.changeWorkingDirectory(dir)) {\n                    System.out.println(\"ERROR: \" + dir);\n                    return;\n                }\n                System.out.println(\"CHDir:\" + ftp.printWorkingDirectory());\n                FTPFile[] newfiles = ftp.listFiles();\n\n                if (newfiles == null) {\n                    ftp.changeToParentDirectory();\n                    return;\n                }\n\n                for (int i = 0; i < newfiles.length; i++) {\n                    FTPFile file = newfiles[i];\n                    if(file.getName().equals(\".\") || file.getName().equals\n(\"..\")){\n                    }else{\n                        if (file.isDirectory()) {\n                            String name = file.getName();\n                            if (isIncluded(name)) {\n                                if (!isExcluded(name)) {\n                                    dirsIncluded.addElement(name);\n                                    if (fast) {\n                                        scandir(name, vpath + name + \nFile.separator, fast);\n                                    }\n                                } else {\n                                    dirsExcluded.addElement(name);\n                                }\n                            } else {\n                                dirsNotIncluded.addElement(name);\n                                if (fast && couldHoldIncluded(name)) {\n                                    scandir(name, vpath + name + \nFile.separator, fast);\n                                }\n                            }\n                            if (!fast) {\n                                scandir(name, vpath + name + File.separator, \nfast);\n                            }\n                        } else {\n                            if (file.isFile()) {\n                                String name = vpath + file.getName();\n                                if (isIncluded(name)) {\n                                    if (!isExcluded(name)) {\n                                        filesIncluded.addElement(name);\n                                    } else {\n                                        filesExcluded.addElement(name);\n                                    }\n                                } else {\n                                    filesNotIncluded.addElement(name);\n                                }\n                            }\n                        }\n                    }\n                }\n                ftp.changeToParentDirectory();\n            } catch (IOException e) {\n                throw new BuildException(\"Error while communicating with FTP \nserver: \", e);\n            }\n        }\n    }", "id": 3192, "time": "2001-06-22T07:49:28Z", "bug_id": 2285, "creation_time": "2001-06-22T07:49:28Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Created attachment 248\nNew source with correction", "attachment_id": 248, "id": 3193, "creator": "Jean-Francois.Morneau@ift.ulaval.ca", "time": "2001-06-22T07:53:55Z", "bug_id": 2285, "creation_time": "2001-06-22T07:53:55Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 2285, "text": "Note:\nI also removed the \".\" and \"..\" from the directory to scan!", "id": 3194, "time": "2001-06-22T07:54:56Z", "creator": "Jean-Francois.Morneau@ift.ulaval.ca", "creation_time": "2001-06-22T07:54:56Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "finally applied patch for nightly build 2001-07-05", "attachment_id": null, "id": 3402, "creator": "bodewig@apache.org", "time": "2001-07-04T08:05:25Z", "bug_id": 2285, "creation_time": "2001-07-04T08:05:25Z", "is_private": false}]