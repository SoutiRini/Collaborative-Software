[{"count": 0, "tags": [], "creator": "coad@measurement-factory.com", "text": "Looks like a possible RFC 2616 MUST violation.\nApache does not validate responses with \nCache-Control: no-cache directive. If bug #14376 \ncomments by wrowe at apache.org are correct, \nthen the bug may be caused by the presence\nof the Expires header. An Expires-less test case\nwill be added to Co-Advisor, but that\nwill not change this bug.\n\nSee attached trace(s) for details and ways to reproduce\nthe violation mentioned above.\n\nTest case IDs in the trace link to human-oriented test case\ndescription and RFC quotes, if available.", "id": 29455, "time": "2003-01-15T20:06:10Z", "bug_id": 16133, "creation_time": "2003-01-15T20:06:10Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": 4443, "bug_id": 16133, "text": "Created attachment 4443\ntest case trace", "id": 29456, "time": "2003-01-15T20:06:54Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-01-15T20:06:54Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 16133, "attachment_id": 7118, "text": "Created attachment 7118\nPatch", "id": 40054, "time": "2003-07-07T10:49:41Z", "creator": "sragavan@novell.com", "creation_time": "2003-07-07T10:49:41Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 16133, "attachment_id": 7131, "text": "Created attachment 7131\nweak ETag and strong If-None-Match non-empty entity tags", "id": 40099, "time": "2003-07-07T20:22:39Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-07-07T20:22:39Z", "is_private": false}, {"count": 4, "tags": [], "creator": "coad@measurement-factory.com", "attachment_id": 7132, "id": 40100, "time": "2003-07-07T20:24:33Z", "bug_id": 16133, "creation_time": "2003-07-07T20:24:33Z", "is_private": false, "text": "Created attachment 7132\nweak ETag and strong If-None-Match empty entity tags"}, {"count": 5, "tags": [], "bug_id": 16133, "attachment_id": null, "text": "Oof. The last two attachments were meant\nfor bug 16126. Bugzilla has this annoying\n\"feature\" to silently switch to some other \nbug after a comment is submitted...", "id": 40101, "time": "2003-07-07T20:28:28Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-07-07T20:28:28Z", "is_private": false}, {"count": 6, "tags": [], "creator": "coad@measurement-factory.com", "attachment_id": null, "id": 40109, "time": "2003-07-07T21:23:41Z", "bug_id": 16133, "creation_time": "2003-07-07T21:23:41Z", "is_private": false, "text": "Partial success: Patched Apache no longer\nviolates RFC 2616. However, please note that\nthe cache now seems to refuse to store responses\nwith Cache-Control: no-cache header, which\nis a compliant but sub-optimal behavior.\nMany caches store such responses and revalidate\nthem on each request, increasing byte hit ratio.\n\nThe corresponding test case trace will be attached.\nNote that the case indicates a failure (not a violation)\nbecause Apache does not optimize as described above,\nmaking it impossible to test the revalidation part\nof the RFC requirement."}, {"count": 7, "tags": [], "creator": "coad@measurement-factory.com", "attachment_id": 7137, "id": 40111, "time": "2003-07-07T21:24:49Z", "bug_id": 16133, "creation_time": "2003-07-07T21:24:49Z", "is_private": false, "text": "Created attachment 7137\ntest case trace against patched 2.0.46 (failure)"}, {"count": 8, "tags": [], "creator": "sragavan@novell.com", "text": "Created attachment 7150\nThe attached patch, will cache the response and also treats that as stale while processing the next request for the same resource.", "id": 40147, "time": "2003-07-08T06:12:55Z", "bug_id": 16133, "creation_time": "2003-07-08T06:12:55Z", "is_private": false, "attachment_id": 7150}, {"count": 9, "tags": [], "creator": "sragavan@novell.com", "text": "The response allowed to store in the cache. But while responding from the \ncache, it is checked that, does it specify a no-cache directive. If so it is \ntreated as stale.", "id": 40148, "time": "2003-07-08T06:17:22Z", "bug_id": 16133, "creation_time": "2003-07-08T06:17:22Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "creator": "coad@measurement-factory.com", "attachment_id": 7169, "id": 40212, "time": "2003-07-08T20:19:09Z", "bug_id": 16133, "creation_time": "2003-07-08T20:19:09Z", "is_private": false, "text": "Created attachment 7169\ntest case trace against 2.0.46 patched with p#7150 only (violation)"}, {"count": 11, "tags": [], "bug_id": 16133, "attachment_id": 7170, "text": "Created attachment 7170\ntest case trace against 2.0.46 patched with p#7150 only (violation w/o Expires)", "id": 40213, "time": "2003-07-08T20:21:19Z", "creator": "coad@measurement-factory.com", "creation_time": "2003-07-08T20:21:19Z", "is_private": false}, {"count": 12, "tags": [], "creator": "coad@measurement-factory.com", "attachment_id": null, "id": 40214, "time": "2003-07-08T20:25:35Z", "bug_id": 16133, "creation_time": "2003-07-08T20:25:35Z", "is_private": false, "text": "It looks like responses are now indeed cached.\nHowever they are not treated as stale, leading\nto freshness violations. Note that a response\nwithout Expires is also cached now, a violation\nwhich, IIRC, was not happening before. Traces\nfor both cases are attached.\n\nNote that this test was run against 2.0.46 patched\nwith your attachment 7150 and nothing else.\n\nFWIW, the desired behavior for the cache is to\nstore responses with no-cache and then revalidate\nthem on every hit."}, {"count": 13, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "id": 47804, "time": "2003-11-21T17:16:57Z", "bug_id": 16133, "creation_time": "2003-11-21T17:16:57Z", "is_private": false, "text": "I'm going through the bug db to make sure patches are findable.  Please see \nhttp://httpd.apache.org/dev/patches.html\n"}, {"count": 14, "tags": [], "text": "Six years since this was updated.  Please re-open if the problems still exist on current versions.", "attachment_id": null, "bug_id": 16133, "id": 127963, "time": "2009-06-16T07:47:10Z", "creator": "poirier@pobox.com", "creation_time": "2009-06-16T07:47:10Z", "is_private": false}, {"count": 15, "tags": [], "creator": "poirier@pobox.com", "text": "Re-open.  Per dev list, keep track of potential protocol violations indefinitely until evaluated and fixed or determined not valid.", "id": 127983, "time": "2009-06-16T10:27:52Z", "bug_id": 16133, "creation_time": "2009-06-16T10:27:52Z", "is_private": false, "attachment_id": null}, {"count": 16, "tags": [], "bug_id": 16133, "attachment_id": null, "text": "httpd-trunk now respects the no-cache response header in cached responses and revalidates every time (not-fresh), and supports no-cache-with-header as well:\n\n    /* These come from the cached entity. */\n    if (h->cache_obj->info.control.no_cache\n            || h->cache_obj->info.control.no_cache_header\n            || h->cache_obj->info.control.private_header) {\n        /*\n         * The cached entity contained Cache-Control: no-cache, or a\n         * no-cache with a header present, or a private with a header\n         * present, so treat as stale causing revalidation.\n         */\n        return 0;\n    }\n\nWould it be possible to retest trunk to see if this issue is indeed fixed?", "id": 140812, "time": "2010-10-18T19:57:10Z", "creator": "minfrin@sharp.fm", "creation_time": "2010-10-18T19:57:10Z", "is_private": false}, {"count": 17, "attachment_id": null, "bug_id": 16133, "text": "Marking as fixed in httpd-trunk, please reopen if this still fails validation.", "id": 144212, "time": "2011-02-11T18:15:33Z", "creator": "minfrin@sharp.fm", "creation_time": "2011-02-11T18:15:33Z", "tags": [], "is_private": false}]