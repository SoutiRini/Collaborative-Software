[{"count": 0, "tags": [], "bug_id": 33946, "attachment_id": null, "is_private": false, "id": 72108, "time": "2005-03-10T09:19:50Z", "creator": "new@foo-baz.com", "creation_time": "2005-03-10T09:19:50Z", "text": "When using apr-iconv to build apr-util I got an error about missing definition\nof EILSEQ in xlate.c line 322. It seems that OpenBSD 3.6 doesn't have it in\nerrno.h. Linux have EILSEQ defined.\n\nI also found that there no EILSEQ reference in apr-iconv sources \n(I grepped sources). It's only used in xlate.c."}, {"count": 1, "tags": [], "text": "It looks like the error codes in that switch statement are all wrong; can you\ntry replacing EILSEQ with APR_BADCH?  Running the test suite would be useful:\n\ncd test\nmake testxlate && ./testxlate\n\n", "attachment_id": null, "id": 72120, "creator": "jorton@redhat.com", "time": "2005-03-10T13:58:40Z", "bug_id": 33946, "creation_time": "2005-03-10T13:58:40Z", "is_private": false}, {"count": 2, "tags": [], "text": "(In reply to comment #1)\n> It looks like the error codes in that switch statement are all wrong; can you\n> try replacing EILSEQ with APR_BADCH?  Running the test suite would be useful:\n\nDone that. Results (3 cases):\n\n* 1 case, apr-util configured without --with-iconv:\n\nERROR: apr_xlate_open(UTF-8, UTF-8)\n      This function has not been implemented on this platform\nFAIL:  UTF-8 -> UTF-8\nERROR: apr_xlate_open(ISO-8859-1, UTF-8)\n      This function has not been implemented on this platform\nFAIL:  UTF-8 -> ISO-8859-1\nERROR: apr_xlate_open(UTF-8, ISO-8859-1)\n      This function has not been implemented on this platform\nFAIL:  ISO-8859-1 -> UTF-8\nERROR: apr_xlate_open(ISO-8859-2, ISO-8859-1)\n      This function has not been implemented on this platform\nFAIL:  ISO-8859-1 -> ISO-8859-2\nERROR: apr_xlate_open(ISO-8859-1, ISO-8859-2)\n      This function has not been implemented on this platform\nFAIL:  ISO-8859-2 -> ISO-8859-1\nERROR: apr_xlate_open(UTF-7, UTF-8)\n      This function has not been implemented on this platform\nFAIL:  UTF-8 -> UTF-7\nERROR: apr_xlate_open(UTF-8, UTF-7)\n      This function has not been implemented on this platform\nFAIL:  UTF-7 -> UTF-8\n\n* 2 case, apr-util configured with --with-iconv pointing to source directory of\napr-iconv\n\nPASS:  UTF-8 -> UTF-8\nERROR: apr_xlate_open(ISO-8859-1, UTF-8)\n      Invalid argument\nFAIL:  UTF-8 -> ISO-8859-1\nERROR: apr_xlate_open(UTF-8, ISO-8859-1)\n      Invalid argument\nFAIL:  ISO-8859-1 -> UTF-8\nERROR: apr_xlate_open(ISO-8859-2, ISO-8859-1)\n      Invalid argument\nFAIL:  ISO-8859-1 -> ISO-8859-2\nERROR: apr_xlate_open(ISO-8859-1, ISO-8859-2)\n      Invalid argument\nFAIL:  ISO-8859-2 -> ISO-8859-1\nERROR: apr_xlate_open(UTF-7, UTF-8)\n      Invalid argument\nFAIL:  UTF-8 -> UTF-7\nERROR: apr_xlate_open(UTF-8, UTF-7)\n      Invalid argument\nFAIL:  UTF-7 -> UTF-8\n\n* case 3, apr-util configured with --with-iconv=/usr/local, which points to\nnormal iconv\n\nPASS:  UTF-8 -> UTF-8\nPASS:  UTF-8 -> ISO-8859-1\nPASS:  ISO-8859-1 -> UTF-8\nPASS:  ISO-8859-1 -> ISO-8859-2\nPASS:  ISO-8859-2 -> ISO-8859-1\nPASS:  UTF-8 -> UTF-7\nPASS:  UTF-7 -> UTF-8", "attachment_id": null, "id": 72187, "creator": "new@foo-baz.com", "time": "2005-03-11T10:22:06Z", "bug_id": 33946, "creation_time": "2005-03-11T10:22:06Z", "is_private": false}, {"count": 3, "tags": [], "text": "Can you work out what's going wrong in the second case, which is the only\nunexpected failure?  I'd recommend simply using GNU libiconv in the first place,\nnobody is maintaining apr-iconv.", "attachment_id": null, "id": 72198, "creator": "jorton@redhat.com", "time": "2005-03-11T14:39:27Z", "bug_id": 33946, "creation_time": "2005-03-11T14:39:27Z", "is_private": false}, {"count": 4, "tags": [], "text": "Mass reassign the 44 open apr-bugs to apr bug list", "attachment_id": null, "bug_id": 33946, "id": 93839, "time": "2006-09-19T19:54:39Z", "creator": "wrowe@apache.org", "creation_time": "2006-09-19T19:54:39Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 33946, "attachment_id": null, "id": 105821, "time": "2007-07-21T19:22:57Z", "creator": "davi@apache.org", "creation_time": "2007-07-21T19:22:57Z", "is_private": false, "text": "Patch committed to trunk in revision 558449:\n\nhttp://svn.apache.org/viewvc?view=rev&revision=558449\n\nAlso, the case 1 and 2 fails because the library path (APR_ICONV_PATH)\nis embedded into the binary."}]