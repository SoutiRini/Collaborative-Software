[{"count": 0, "tags": [], "bug_id": 50659, "is_private": false, "text": "In case multiple computers running JMeter servers are shared and could be used by different users running JMeter in client mode to run tests, the remote JMeter engine implementation should throw an exception (e.g. in configure) when it currently still is executing a test (that could be started by another JMeter client instance).\n\nThe current implementation stops the test it currently is running and starts the new one.", "id": 143659, "time": "2011-01-26T09:34:06Z", "creator": "jens_0@hotmail.com", "creation_time": "2011-01-26T09:34:06Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "sebb@apache.org", "text": "Agreed, the current behaviour is not ideal.\n\nI don't know how easy it is to determine when the test has finished.", "id": 143782, "time": "2011-01-28T21:50:11Z", "bug_id": 50659, "creation_time": "2011-01-28T21:50:11Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 50659, "text": "StandardJMeterEngine has\n    private volatile boolean running = false;\nmaybe this could be read when Configure or runTest is called, and throw an exception which would be communicated back to RemoteJMeterEngineImpl and then back over RMI to the local JMeter instance?", "id": 143817, "time": "2011-01-31T04:08:24Z", "creator": "jens_0@hotmail.com", "creation_time": "2011-01-31T04:08:24Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "(In reply to comment #0)\n> \n> The current implementation stops the test it currently is running and starts\n> the new one.\n\nAre you sure? I just tried running 2 tests at once, and the server coped fine.\n\nHowever, there is a small window between configuring a test and running it, in which case the original engine will be overwritten.\n\nI suppose it's possible you hit that window?\n\n==\n\nIt is possible to prevent more than one client running at once. \nThis could be a server option (I don't think it should be enforced).\n\nOtherwise, the server engine startup code should somehow ensure that the clients cannot interfere with each other.", "is_private": false, "id": 143926, "creator": "sebb@apache.org", "time": "2011-02-02T15:15:21Z", "bug_id": 50659, "creation_time": "2011-02-02T15:15:21Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 50659, "text": "Oops! \n\nJust realised that although a simple test such as the one I ran may work OK, the design of JMeter assumes that only one test is runninng at any one time. For example, there is only one set of JMeter properties.\n\nChanging this would be a big undertaking, if it is indeed possible.\n\nSo it is necessary for the server to reject attempts to run two tests at once.\n\nThe 'running' flag is unfortunately not suitable, as it is true only whilst the main test is running - it is false during startup and shutdown. However it's easy enough to add another boolean.", "id": 143932, "time": "2011-02-02T17:55:20Z", "creator": "sebb@apache.org", "creation_time": "2011-02-02T17:55:20Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 50659, "is_private": false, "text": "Fixed:\n\nURL: http://svn.apache.org/viewvc?rev=1066684&view=rev\nLog:\nBug 50659 - JMeter server does not support concurrent tests - prevent client\nfrom starting another\n\nModified:\n\njakarta/jmeter/trunk/src/core/org/apache/jmeter/engine/ClientJMeterEngine.java\n  jakarta/jmeter/trunk/src/core/org/apache/jmeter/engine/JMeterEngine.java\n\njakarta/jmeter/trunk/src/core/org/apache/jmeter/engine/RemoteJMeterEngineImpl.java\n\njakarta/jmeter/trunk/src/core/org/apache/jmeter/engine/StandardJMeterEngine.java\n  jakarta/jmeter/trunk/xdocs/changes.xml", "id": 143935, "time": "2011-02-02T18:12:55Z", "creator": "sebb@apache.org", "creation_time": "2011-02-02T18:12:55Z", "attachment_id": null}, {"count": 6, "tags": [], "text": "(In reply to comment #5)\n> Fixed:\n> URL: http://svn.apache.org/viewvc?rev=1066684&view=rev\n\nHi,\n\nI don't like the usability in the catch ServerException block in ClientJMeterEngine where you use System.exit(1); to exit JMeter. In case of a Gui-Run I would inform the user that the one of the used JMeter Servers is executing a test right now.", "is_private": false, "bug_id": 50659, "id": 143956, "time": "2011-02-03T07:26:44Z", "creator": "jens_0@hotmail.com", "creation_time": "2011-02-03T07:26:44Z", "attachment_id": null}, {"count": 7, "attachment_id": null, "creator": "sebb@apache.org", "is_private": false, "id": 143957, "time": "2011-02-03T07:32:50Z", "bug_id": 50659, "creation_time": "2011-02-03T07:32:50Z", "tags": [], "text": "Good catch - I had only tested using non-GUI.\n\nNeeds to be looked at further."}, {"count": 8, "tags": [], "text": "Turned out to be a bit involved, but I think I've now fixed the code.\n\nThe fix is in nightly builds from r1067038.\n\nIf you can try one out and report back, that would be very helpful.\n\n\nURL: http://svn.apache.org/viewvc?rev=1067038&view=rev\nLog:\nBug 50659 - JMeter server does not support concurrent tests - prevent client from starting another\n(part deux)\nRemove thread from ClientJMeterEngine - if it is required for GUI, then let the GUI create the thread\nThis allows proper return of error conditions\nAlso replace System.exit() with interrupt() of RMI thread\n\nModified:\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/JMeter.java\n   jakarta/jmeter/trunk/src/core/org/apache/jmeter/engine/ClientJMeterEngine.java", "is_private": false, "bug_id": 50659, "id": 143970, "time": "2011-02-03T19:01:54Z", "creator": "sebb@apache.org", "creation_time": "2011-02-03T19:01:54Z", "attachment_id": null}, {"count": 9, "tags": [], "text": "(In reply to comment #8)\n> Turned out to be a bit involved, but I think I've now fixed the code.\n> \n> The fix is in nightly builds from r1067038.\n> \nThanks. Commit 1067029 is also related I found out.\n\nCan you explain me what that owner thread checking is about in RemoteJMeterEngineImpl?", "is_private": false, "bug_id": 50659, "id": 143976, "time": "2011-02-04T04:58:37Z", "creator": "jens_0@hotmail.com", "creation_time": "2011-02-04T04:58:37Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "sebb@apache.org", "is_private": false, "text": "(In reply to comment #9)\n> Can you explain me what that owner thread checking is about in\n> RemoteJMeterEngineImpl?\n\nStart up involves 2-3 method calls:\n- config\n- setProperties (optional)\n- runTest\n\nWithout owner checking, client A could call config, then client B, then client A could call runTest - which would use the wrong test plan.\n\nLikewise for reset(), only the owner is allowed to reset, otherwise the GUI can kill off another test (I think this must be what you were experiencing originally).", "id": 143981, "time": "2011-02-04T05:31:12Z", "bug_id": 50659, "creation_time": "2011-02-04T05:31:12Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "jens_0@hotmail.com", "is_private": false, "text": "\n> Without owner checking, client A could call config, then client B, then client\n> A could call runTest - which would use the wrong test plan.\n> \n> Likewise for reset(), only the owner is allowed to reset, otherwise the GUI can\n> kill off another test (I think this must be what you were experiencing\n> originally).\n\nOk, all right - thanks!", "id": 144014, "time": "2011-02-07T06:41:11Z", "bug_id": 50659, "creation_time": "2011-02-07T06:41:11Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 50659, "is_private": false, "text": "*** Bug 43168 has been marked as a duplicate of this bug. ***", "id": 159394, "time": "2012-05-28T13:55:43Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-05-28T13:55:43Z", "attachment_id": null}]