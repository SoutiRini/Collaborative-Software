[{"count": 0, "attachment_id": 28797, "bug_id": 53253, "is_private": false, "id": 159123, "time": "2012-05-17T11:15:55Z", "creator": "ftigeot@wolfpond.org", "creation_time": "2012-05-17T11:15:55Z", "tags": [], "text": "Created attachment 28797\nRemove the use of TCP_NOPUSH with sendfile(2)\n\nHaving updated a web server to apache-2.4 (sendfile enabled), I noticed\nsome static images didn't load in one go:\n\n- top parts were displayed instantly\n- image downloads were frozen for a few seconds\n- missing bottom parts were then downloaded and displayed instantly\n\nSwitching EnableSendfile between on/off in httpd.conf enables or disables\nthis behavior 100% of the time\n\nAfter some investigation, it was found this behavior was caused by the use\nof APR_TCP_NOPUSH in the code path using sendfile(2).\n\nOnce patch-server_core_filters.c.txt is applied, Apache-2.4 works perfectly\nfine with sendfile.\n\n\nDragonFly BSD bug report:\nhttp://bugs.dragonflybsd.org/issues/2368\n\npkgsrc problem report:\nhttp://gnats.netbsd.org/cgi-bin/query-pr-single.pl?number=46458"}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "attachment_id": 29020, "id": 160391, "time": "2012-07-02T09:08:47Z", "bug_id": 53253, "creation_time": "2012-07-02T09:08:47Z", "is_private": false, "text": "Created attachment 29020\npossible fix for TCP_NOPUSH usage\n\nCan you try this patch instead?\n\nCoverity's static analysis noticed a bug in this code which could well explain the symptoms you're seeing here."}, {"count": 2, "tags": [], "creator": "ftigeot@wolfpond.org", "text": "I'm sadly unable to reproduce the original issue with Apache 2.4.10.\n\nThe last patch doesn't have any visible effect.", "id": 178285, "time": "2014-10-04T15:08:24Z", "bug_id": 53253, "creation_time": "2014-10-04T15:08:24Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "text": "The patch proposed by Joe Orton has been merged into 2.4.x branch in r1670328", "is_private": false, "id": 182252, "creator": "christophe.jaillet@wanadoo.fr", "time": "2015-04-04T21:53:06Z", "bug_id": 53253, "creation_time": "2015-04-04T21:53:06Z", "attachment_id": null}]