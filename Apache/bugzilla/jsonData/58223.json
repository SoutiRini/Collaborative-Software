[{"count": 0, "tags": [], "text": "Created attachment 32981\nannotated WebSocket server demonstrating issue\n\nSomewhere between 7.0.55 and 7.0.63, the behavior of WsSession.getOpenSessions was broken in such a way that it now returns only the current session, not all open sessions as specified by the API documents for javax.websocket.Session.\n\nThe attached tarball contains a minimal example that exhibits the issue, using these steps:\n\n * mvn package to build the war (tomcat-ws-bug.war) \n\nWorking behavior:\n\n * deploy war to Tomcat 7.0.55\n a) use Tomcat's examples/websocket/echo.xhtml to connect to ws://<your-server>/tomcat-ws-bug/broadcast from more than one browser window\n * send a message, confirm that it's received in all connected browsers\n * verify that logs/catalina.out shows \"<n> open sessions\" for n = the number of connected browsers\n\nBroken behavior:\n\n * deploy war to Tomcat 7.0.63\n * repeat a) above\n * note that the message is only sent back to the sender, not to other connected browsers\n * note that logs/catalina.out shows \"1 open sessions\", regardless of the number of connected browsers", "attachment_id": 32981, "id": 184413, "creator": "kajsa.anderson@gmail.com", "time": "2015-08-07T15:52:54Z", "bug_id": 58223, "creation_time": "2015-08-07T15:52:54Z", "is_private": false}, {"count": 1, "tags": [], "text": "Hello,\n\nCheck the Tomcat 7 changelog carefully:\n\n\"57974: Session.getOpenSessions should return all sessions associated with a given endpoint instance, rather than all sessions from the endpoint class.\"\n\ngetOpenSessions will return all sessions to a given instance, not class\n\nRegards,\nVioleta", "attachment_id": null, "id": 184431, "creator": "violetagg@apache.org", "time": "2015-08-10T07:42:56Z", "bug_id": 58223, "creation_time": "2015-08-10T07:42:56Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "tsuhtan@ngmat.com", "is_private": false, "count": 2, "id": 193562, "time": "2016-09-08T03:00:27Z", "bug_id": 58223, "creation_time": "2016-09-08T03:00:27Z", "text": "*** Bug 60096 has been marked as a duplicate of this bug. ***"}]