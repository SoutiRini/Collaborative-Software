[{"count": 0, "tags": [], "bug_id": 34, "attachment_id": null, "id": 16, "time": "2001-01-12T14:36:31Z", "creator": "achan@altaworks.com", "creation_time": "2001-01-12T14:36:31Z", "is_private": false, "text": "I'm using the SocketAppender.  Whenever I try to send a message to the \nlogServer, the following stack appears:\n\nC:\\temp\\foo>java -cp C:\\projects\\astonc_t2_smp_mainline\\aw\\classes;C:\\projects\\A\nstonc_t2_smp_mainline\\aw\\hedzup\\lib\\log4j.jar org.apache.log4j.net.SocketServer\n12345 C:\\projects\\Astonc_t2_smp_mainline\\config\\SMPLog.properties C:\\temp\n01/12/2001 17:18 SocketServer INFO  Listening on port 12345\n01/12/2001 17:18 SocketServer INFO  Waiting to accept a new client.\n01/12/2001 17:18 SocketServer INFO  Connected to client at 127.0.0.1/127.0.0.1\n01/12/2001 17:18 SocketServer INFO  Locating configuration file for 127.0.0.1/12\n7.0.0.1\n01/12/2001 17:18 SocketServer WARN  Could not find config file [C:\\temp\\127.0.0.\n1.lcf].\n01/12/2001 17:18 SocketServer WARN  Could not find config file [C:\\temp\\generic.\nlcf]. Will use the default hierarchy.\n01/12/2001 17:18 SocketServer INFO  Starting new socket node.\n01/12/2001 17:18 SocketNode ERROR Could not open ObjectInputStream to Socket[add\nr=127.0.0.1/127.0.0.1,port=1511,localport=12345]\njava.io.StreamCorruptedException: Caught EOFException while reading the stream h\neader\n        at java.io.ObjectInputStream.readStreamHeader(Unknown Source)\n        at java.io.ObjectInputStream.<init>(Unknown Source)\n        at org.apache.log4j.net.SocketNode.<init>(SocketNode.java:52)\n        at org.apache.log4j.net.SocketServer.main(SocketServer.java:115)\n01/12/2001 17:18 SocketServer INFO  Waiting to accept a new client.\n01/12/2001 17:18 SocketServer INFO  Connected to client at 127.0.0.1/127.0.0.1\n01/12/2001 17:18 SocketServer INFO  Locating configuration file for 127.0.0.1/12\n7.0.0.1\n01/12/2001 17:18 SocketServer WARN  Could not find config file [C:\\temp\\127.0.0.\n1.lcf].\n01/12/2001 17:18 SocketServer INFO  Starting new socket node.\n01/12/2001 17:18 SocketServer INFO  Waiting to accept a new client.\n01/12/2001 17:18 SocketNode ERROR Unexpected exception. Closing conneciton.\njava.lang.NullPointerException\n        at org.apache.log4j.net.SocketNode.run(SocketNode.java:71)\n        at java.lang.Thread.run(Unknown Source)\n01/12/2001 17:18 SocketNode INFO  Could not close connection.\njava.lang.NullPointerException\n        at org.apache.log4j.net.SocketNode.run(SocketNode.java:89)\n        at java.lang.Thread.run(Unknown Source)\n01/12/2001 17:18 dsamanager INFO  DSAManagerImpl called\n\n\nAfter that, everything seems to work fine.\n\nThanks.\n\n-Aston"}, {"count": 1, "tags": [], "bug_id": 34, "text": "One more comment.  On the client side, I'm getting the RootCategory and adding \nthe SocketAppender to it.  I'm doing it because my port is dynamic so I can't \nspecify it in the property file.  Instead, I'm creating the SocketAppender by \nusing the hostname and port #.  Many thanks.  -Aston", "id": 17, "time": "2001-01-12T14:42:15Z", "creator": "achan@altaworks.com", "creation_time": "2001-01-12T14:42:15Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "bugzilla@apache.org", "attachment_id": null, "id": 18, "time": "2001-01-12T15:19:49Z", "bug_id": 34, "creation_time": "2001-01-12T15:19:49Z", "is_private": false, "text": "Aston,\n\nThe errors show that on the server side the ObjectInputStream creation failed. \nI do not know the reason for this but I very much doubt that the server logs \nanything coming from the client.\n\nWhich Operating System and JDK is this?  Ceki"}, {"count": 3, "tags": [], "bug_id": 34, "text": "\nI think I know what the problem is. Try invoking Category.shutdown before you \nexit the application (on the client side). That should do it. Ceki\n\nps: Let me know the results so that I can close this bug report.", "id": 19, "time": "2001-01-13T00:31:18Z", "creator": "bugzilla@apache.org", "creation_time": "2001-01-13T00:31:18Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "Ceki,\n\nFirst, I didn't use the SocketServer as my remote server.  Instead, I created a \nServerSocket myself and called SocketNode directly.  In my server code, I tried \nto check for the existing of the Socket.  If failed, I'll start the server \nmyself.  Here is how I did it:\n\nSocket socket = new Socket(host, port);\n\nIt triggered the exception.\n\nInstead of trying to open a socket, I now do:\n\nObjectOutputStream oos = new ObjectOutputStream(new Socket(host, \nport).getOutputStream());\n\nIt worked like a charm!\n\nThanks.\n\n-Aston\n\n", "attachment_id": null, "id": 21, "creator": "achan@altaworks.com", "time": "2001-01-15T06:28:12Z", "bug_id": 34, "creation_time": "2001-01-15T06:28:12Z", "is_private": false}]