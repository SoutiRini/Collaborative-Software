[{"count": 0, "attachment_id": null, "bug_id": 59947, "is_private": false, "id": 192903, "time": "2016-08-05T06:16:13Z", "creator": "astrange@ithinksw.com", "creation_time": "2016-08-05T06:16:13Z", "tags": [], "text": "Found this crash on a web server.\n\n# httpd -V\nServer version: Apache/2.4.23 (Unix)\nServer built:   Aug  4 2016 02:49:24\nServer's Module Magic Number: 20120211:61\nServer loaded:  APR 1.5.2, APR-UTIL 1.5.4\nCompiled using: APR 1.5.2, APR-UTIL 1.5.4\nArchitecture:   64-bit\nServer MPM:     event\n  threaded:     yes (fixed thread count)\n    forked:     yes (variable process count)\nServer compiled with....\n -D APR_HAS_SENDFILE\n -D APR_HAS_MMAP\n -D APR_HAVE_IPV6 (IPv4-mapped addresses disabled)\n -D APR_USE_FLOCK_SERIALIZE\n -D APR_USE_PTHREAD_SERIALIZE\n -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT\n -D APR_HAS_OTHER_CHILD\n -D AP_HAVE_RELIABLE_PIPED_LOGS\n -D BUFFERED_LOGS\n -D PIPE_BUF=512\n -D DYNAMIC_MODULE_LIMIT=256\n\n\n(gdb) bt full\n#0  0x0000000801c653b4 in run_cleanups (cref=0x70) at memory/unix/apr_pools.c:2348\n        c = 0x802dbe238\n#1  0x0000000801c642a5 in apr_pool_destroy (pool=0x0) at memory/unix/apr_pools.c:804\n        active = 0x4a3d8b <invalidate_entity+155>\n        allocator = 0x80cc2e550\n#2  0x00000000004a3e5f in commit_entity (r=0x80cc25bb0, h=<optimized out>) at mod_cache_socache.c:1126\n        conf = 0x802db28e8\n        obj = 0x80cc2e380\n        sobj = 0x80cc2e3e8\n        rv = 0\n#3  invalidate_entity (h=<optimized out>, r=0x80cc25bb0) at mod_cache_socache.c:1165\nNo locals.\n#4  0x0000000000498fb7 in cache_invalidate (cache=cache@entry=0x80cc25828, r=r@entry=0x80cc25bb0) at cache_storage.c:748\n        list = 0x80cc25810\n        rv = <optimized out>\n        status = <optimized out>\n        h = 0x80cc2e368\n        location_uri = {scheme = 0x7ffff43a1930 \"p\\031:\\364\\377\\177\", \n          hostinfo = 0x8017e6bbd <apr_bucket_heap_make+253> \"H\\211E\\350H\\213E\\350H\\213\\025\\224]\\\"\", user = 0x43c170 <apr_bucket_free@plt> \"\\377%\\252\\276=\", \n          password = 0x1f40 <error: Cannot access memory at address 0x1f40>, \n          hostname = 0x80cc2f048 \"HTTP/1.1 200 OK\\r\\nDate: Fri, 05 Aug 2016 03:05:15 GMT\\r\\nServer: Apache\\r\\nCache-Control: public, max-age=120, s-maxage=120\\r\\nVary: Cookie,Accept-Encoding\\r\\nContent-Encoding: gzip\\r\\nX-Frame-Options: SAMEORIGI\"..., port_str = 0x80cc1e4c8 \"\\320\\340\\302\\f\\b\", \n          path = 0x80cc1e548 \"\\240\", query = 0x80cc1e568 \"\\001\", fragment = 0x7ffff43a1970 \" \\032:\\364\\377\\177\", \n          hostent = 0x8017e6c4d <apr_bucket_heap_create+119>, port = 57384, is_initialized = 1, dns_looked_up = 0, dns_resolved = 0}\n        content_location_uri = {scheme = 0x1f40 <error: Cannot access memory at address 0x1f40>, \n          hostinfo = 0x80cc2f048 \"HTTP/1.1 200 OK\\r\\nDate: Fri, 05 Aug 2016 03:05:15 GMT\\r\\nServer: Apache\\r\\nCache-Control: public, max-age=120, s-maxage=120\\r\\nVary: Cookie,Accept-Encoding\\r\\nContent-Encoding: gzip\\r\\nX-Frame-Options: SAMEORIGI\"..., user = 0x80cc2dbf0 \"text/html; charset=UTF-8\", \n          password = 0x80cc1e4c8 \"\\320\\340\\302\\f\\b\", hostname = 0x7ffff43a1a20 \"\\310\\340\\302\\f\\b\", \n          port_str = 0x8017e5880 <apr_brigade_writev+805> \"H\\213E\\330H\\001E\\250H\\203E\\240\\001H\\213E\\240H;\\205h\\377\\377\\377r\\236H\\213E\\270H\\213P\\030H\\213E\\230H\\001\\302H\\213E\\270H\\211P\\030\\270\", path = 0x1000266eafc <error: Cannot access memory at address 0x1000266eafc>, \n          query = 0x20 <error: Cannot access memory at address 0x20>, fragment = 0x80cc2e128 \"\\250\\333\\302\\f\\b\", hostent = 0x0, port = 0, \n          is_initialized = 0, dns_looked_up = 0, dns_resolved = 0}\n        location = <optimized out>\n        location_key = 0x0\n        content_location = <optimized out>\n        content_location_key = 0x0\n---Type <return> to continue, or q <return> to quit---\n#5  0x0000000000493d9b in cache_invalidate_filter (f=0x80cc25930, in=0x80cc2e0c8) at mod_cache.c:1682\n        r = 0x80cc25bb0\n        cache = 0x80cc25828\n#6  0x00000000004cd9b3 in ap_http_header_filter (f=<optimized out>, b=0x80cc2dd48) at http_filters.c:1354\n        r = 0x80cc25bb0\n        c = <optimized out>\n        clheader = <optimized out>\n        protocol = 0x5c0ae5 \"HTTP/1.1\"\n        e = <optimized out>\n        b2 = 0x80cc2e0c8\n        h = {pool = 0x80cc20028, bb = 0x80cc2e0c8}\n        ctx = 0x0\n        ctype = <optimized out>\n        eb = <optimized out>\n#7  0x0000000000454528 in ap_content_length_filter (f=0x80cc21710, b=0x80cc2dd48) at protocol.c:1443\n        r = 0x80cc25bb0\n        ctx = 0x80cc2de00\n        e = 0x80cc1e248\n        eos = <optimized out>\n        eblock = <optimized out>\n#8  0x00000000004cfceb in ap_byterange_filter (f=0x80cc216e8, bb=<optimized out>) at byterange_filter.c:494\n        r = 0x80cc25bb0\n        c = 0x80b0e0338\n        e = <optimized out>\n        bsend = <optimized out>\n        tmpbb = <optimized out>\n        range_start = <optimized out>\n        range_end = <optimized out>\n        clength = <optimized out>\n        rv = <optimized out>\n        found = 0\n        bound_head = 0x0\n        indexes = <optimized out>\n        idx = <optimized out>\n        i = <optimized out>\n        original_status = <optimized out>\n---Type <return> to continue, or q <return> to quit---\n        max_ranges = <optimized out>\n        max_overlaps = <optimized out>\n        max_reversals = 20\n        overlaps = <optimized out>\n        reversals = <optimized out>\n        core_conf = <optimized out>\n#9  0x000000000050a957 in session_output_filter (f=0x80cc2a160, in=0x80cc2dd48) at mod_session.c:478\n        r = 0x0\n#10 0x00000000004c2c97 in deflate_out_filter (f=0x80cc2a138, bb=<optimized out>) at mod_deflate.c:893\n        buf = <optimized out>\n        b = <optimized out>\n        e = 0x80cc1e248\n        r = 0x80cc25bb0\n        ctx = 0x80cc2dc60\n        zRC = <optimized out>\n        len = 0\n        blen = 34359738368\n        data = 0x20 <error: Cannot access memory at address 0x20>\n        c = 0x802c99738\n#11 0x00000000004b9c1d in filter_harness (f=0x80cc2a138, bb=0x80cc2dda8) at mod_filter.c:323\n        ret = <optimized out>\n        cachecontrol = <optimized out>\n        ctx = 0x80cc2a1c8\n        filter = <optimized out>\n#12 0x0000000000574196 in action_handler (r=0x80cc200a0) at mod_actions.c:205\n        conf = <optimized out>\n        t = <optimized out>\n        action = <optimized out>\n        script = 0x802daf741\n        i = <optimized out>\n#13 0x000000000046e60a in ap_run_handler (r=0x80cc200a0) at config.c:170\n        pHook = <optimized out>\n        n = 15\n        rv = -1\n#14 ap_invoke_handler (r=r@entry=0x80cc200a0) at config.c:434\n        handler = <optimized out>\n---Type <return> to continue, or q <return> to quit---\n        p = <optimized out>\n        result = <optimized out>\n        old_handler = 0x802daf240 \"php-fcgi\"\n        ignore = <optimized out>\n#15 0x00000000004ca8db in ap_process_async_request (r=r@entry=0x80cc200a0) at http_request.c:410\n        c = 0x80b0e0338\n        access_status = 0\n#16 0x00000000004c6181 in ap_process_http_async_connection (c=0x80b0e0338) at http_core.c:154\n        r = 0x80cc200a0\n        cs = 0x80b0e0310\n#17 ap_process_http_connection (c=0x80b0e0338) at http_core.c:248\nNo locals.\n#18 0x0000000000478e6a in ap_run_process_connection (c=c@entry=0x80b0e0338) at connection.c:42\n        pHook = <optimized out>\n        n = 4\n        rv = -1\n#19 0x0000000000583b40 in process_socket (my_thread_num=42, my_child_num=2, cs=0x80b0e02a8, sock=0x80b0e00a0, p=0x80b0e0028, thd=0x80b0119d8) at event.c:1102\n        c = 0x80b0e0338\n        sbh = 0x80b0e0290\n        conn_id = <optimized out>\n        rc = <optimized out>\n#20 worker_thread (thd=0x80b0119d8, dummy=<optimized out>) at event.c:1963\n        ti = <optimized out>\n        process_slot = 2\n        thread_slot = 42\n        csd = 0x80b0e00a0\n        cs = 0x0\n        ptrans = 0x80b0e0028\n        rv = <optimized out>\n        is_idle = 0\n        te = 0x0\n#21 0x0000000801c73125 in dummy_worker (opaque=0x80b0119d8) at threadproc/unix/thread.c:142\n        thread = 0x80b0119d8\n#22 0x00000008020a8585 in thread_start (curthread=0x80b020c00) at /usr/src/lib/libthr/thread/thr_create.c:284\n        set = {__bits = {0, 0, 0, 0}}\n#23 0x0000000000000000 in ?? ()\n---Type <return> to continue, or q <return> to quit---\nNo symbol table info available.\nBacktrace stopped: Cannot access memory at address 0x7ffff43a2000\n(gdb)"}, {"count": 1, "tags": [], "bug_id": 59947, "text": "The server is using cache/socache/proxy_fcgi/event mpm.\n\nNew backtrace:\n\n(gdb) info locals\nc = 0x802dbe238\n(gdb) info registers\nrax            0x70\t112\nrbx            0x81081bbd8\t34636676056\nrcx            0x19319\t103193\nrdx            0x0\t0\nrsi            0x16\t22\nrdi            0x70\t112\nrbp            0x7ffff43a1850\t0x7ffff43a1850\nrsp            0x7ffff43a1830\t0x7ffff43a1830\nr8             0x0\t0\nr9             0xfffffe0000444010\t-2199018782704\nr10            0xb5c1f\t744479\nr11            0x202\t514\nr12            0x810824968\t34636712296\nr13            0x81081bb70\t34636675952\nr14            0x802db28e8\t34407655656\nr15            0x0\t0\nrip            0x801c63372\t0x801c63372 <run_cleanups+16>\neflags         0x10206\t[ PF IF RF ]\ncs             0x43\t67\nss             0x3b\t59\nds             <unavailable>\nes             <unavailable>\nfs             <unavailable>\ngs             <unavailable>\n(gdb) print *c\n$1 = {next = 0x802c21028, data = 0x802c1c330, plain_cleanup_fn = 0x802dbe218, child_cleanup_fn = 0x802dbe238}\n(gdb) x/i $pc\n=> 0x801c63372 <run_cleanups+16>:\tmov    (%rax),%rax\n(gdb) bt full\n#0  0x0000000801c63372 in run_cleanups (cref=0x70) at memory/unix/apr_pools.c:2348\n        c = 0x802dbe238\n#1  0x0000000801c6225d in apr_pool_destroy (pool=0x0) at memory/unix/apr_pools.c:804\n        active = 0x4a2bae <invalidate_entity+158>\n        allocator = 0x81081bd40\n#2  0x00000000004a2c7c in commit_entity (r=0x810824968, h=<optimized out>) at mod_cache_socache.c:1155\n        conf = <optimized out>\n        obj = <optimized out>\n        sobj = <optimized out>\n        rv = <optimized out>\n#3  invalidate_entity (h=<optimized out>, r=0x810824968) at mod_cache_socache.c:1165\nNo locals.\n#4  0x0000000000498503 in cache_invalidate (cache=cache@entry=0x8108245e0, r=r@entry=0x810824968) at cache_storage.c:748\n        list = 0x8108245c8\n        rv = <optimized out>\n        status = <optimized out>\n        h = 0x81081bb58\n        location_uri = {scheme = 0x7ffff43a1980 \"\\260\\031:\\364\\377\\177\", \n          hostinfo = 0x801c7194f <explode_time+274> \"\\211\\302H\\213E\\250\\211P(\\220\\311\\303UH\\211\\345H\\203\\354 H\\211}\\370H\\211u\\360\\211U\\354\\213U\\354H\\213u\\360H\\213E\\370\\271\", user = 0x43c170 <apr_bucket_free@plt> \"\\377%\\252\\233=\", password = 0x0, \n          hostname = 0x5398268793c1c <error: Cannot access memory at address 0x5398268793c1c>, port_str = 0x7ffff43a19e0 \"\\340E\\202\\020\\b\", \n          path = 0x1f60 <error: Cannot access memory at address 0x1f60>, query = 0x57a7af28 <error: Cannot access memory at address 0x57a7af28>, \n          fragment = 0x3b00000004 <error: Cannot access memory at address 0x3b00000004>, hostent = 0x700000015, port = 7, is_initialized = 0, \n          dns_looked_up = 0, dns_resolved = 0}\n        content_location_uri = {scheme = 0x0, hostinfo = 0x0, user = 0x802668710 \"UTC\", password = 0x81080e4c8 \"\\300\\270\\201\\020\\b\", \n          hostname = 0x7ffff43a19b0 \"\", \n          port_str = 0x8017e388b <apr_brigade_writev+805> \"H\\213E\\330H\\001E\\250H\\203E\\240\\001H\\213E\\240H;\\205h\\377\\377\\377r\\236H\\213E\\270H\\213P\\030H\\213E\\230H\\001\\302H\\213E\\270H\\211P\\030\\270\", path = 0x1000266cafc <error: Cannot access memory at address 0x1000266cafc>, \n          query = 0x20 <error: Cannot access memory at address 0x20>, fragment = 0x81081b918 \"\\230\\263\\201\\020\\b\", hostent = 0x0, port = 0, \n          is_initialized = 0, dns_looked_up = 0, dns_resolved = 0}\n        location = <optimized out>\n        location_key = 0x0\n        content_location = <optimized out>\n        content_location_key = 0x0\n#5  0x0000000000493c7a in cache_invalidate_filter (f=0x8108246e8, in=0x81081b8b8) at mod_cache.c:1682\n        r = 0x810824968\n---Type <return> to continue, or q <return> to quit---\n        cache = 0x8108245e0\n#6  0x00000000004cc857 in ap_http_header_filter (f=<optimized out>, b=0x81081b538) at http_filters.c:1354\n        r = 0x810824968\n        c = <optimized out>\n        clheader = <optimized out>\n        protocol = 0x5bf58d \"HTTP/1.1\"\n        e = <optimized out>\n        b2 = <optimized out>\n        h = {pool = 0x810816028, bb = 0x81081b8b8}\n        ctx = 0x0\n        ctype = <optimized out>\n        eb = <optimized out>\n#7  0x0000000000454248 in ap_content_length_filter (f=0x810817710, b=0x81081b538) at protocol.c:1443\n        r = 0x810824968\n        ctx = 0x81081b5f0\n        e = 0x81080e1a8\n        eos = <optimized out>\n        eblock = <optimized out>\n#8  0x00000000004ce936 in ap_byterange_filter (f=0x8108176e8, bb=0x81081b538) at byterange_filter.c:494\n        r = 0x810824968\n        c = <optimized out>\n        e = <optimized out>\n        bsend = <optimized out>\n        tmpbb = <optimized out>\n        range_start = <optimized out>\n        range_end = <optimized out>\n        clength = <optimized out>\n        rv = <optimized out>\n        found = 0\n        bound_head = 0x0\n        indexes = <optimized out>\n        idx = <optimized out>\n        i = <optimized out>\n        original_status = <optimized out>\n        max_ranges = <optimized out>\n        max_overlaps = <optimized out>\n---Type <return> to continue, or q <return> to quit---\n        max_reversals = <optimized out>\n        overlaps = <optimized out>\n        reversals = <optimized out>\n        core_conf = <optimized out>\n#9  0x0000000000508d04 in session_output_filter (f=0x810810e08, in=0x81081b538) at mod_session.c:478\n        r = 0x0\n#10 0x00000000004c21ab in deflate_out_filter (f=0x810810de0, bb=<optimized out>) at mod_deflate.c:893\n        buf = <optimized out>\n        b = <optimized out>\n        e = 0x81080e1a8\n        r = 0x810824968\n        ctx = 0x81081b450\n        zRC = <optimized out>\n        len = 0\n        blen = 5025667\n        data = 0x0\n        c = 0x802c99738\n#11 0x00000000004b8c55 in filter_harness (f=0x810810de0, bb=0x81081b598) at mod_filter.c:323\n        ret = <optimized out>\n        cachecontrol = <optimized out>\n        ctx = 0x810810e70\n        filter = <optimized out>\n#12 0x0000000000572f52 in action_handler (r=0x8108160a0) at mod_actions.c:205\n        conf = <optimized out>\n        t = <optimized out>\n        action = <optimized out>\n        script = 0x802daf741 \"/php-www\"\n        i = <optimized out>\n#13 0x000000000046d9d9 in ap_run_handler (r=0x8108160a0) at config.c:170\n        pHook = <optimized out>\n        n = <optimized out>\n        rv = <optimized out>\n#14 ap_invoke_handler (r=r@entry=0x8108160a0) at config.c:434\n        handler = <optimized out>\n        p = <optimized out>\n        result = <optimized out>\n---Type <return> to continue, or q <return> to quit---\n        old_handler = 0x802daf240 \"php-fcgi\"\n        ignore = <optimized out>\n#15 0x00000000004c9b23 in ap_process_async_request (r=r@entry=0x8108160a0) at http_request.c:410\n        access_status = 0\n#16 0x00000000004c52f1 in ap_process_http_async_connection (c=0x80b0b2338) at http_core.c:154\n        r = 0x8108160a0\n        cs = 0x80b0b2310\n#17 ap_process_http_connection (c=0x80b0b2338) at http_core.c:248\nNo locals.\n#18 0x0000000000478ac3 in ap_run_process_connection (c=c@entry=0x80b0b2338) at connection.c:42\n        pHook = <optimized out>\n        n = 4\n        rv = -1\n#19 0x0000000000583c9d in process_socket (my_thread_num=42, my_child_num=15, cs=0x80b0b22a8, sock=0x80b0b20a0, p=0x80b0b2028, thd=0x80b0119d8)\n    at event.c:1102\n        c = 0x80b0b2338\n        sbh = 0x80b0b2dc0\n        conn_id = <optimized out>\n        rc = <optimized out>\n#20 worker_thread (thd=0x80b0119d8, dummy=<optimized out>) at event.c:1963\n        ti = <optimized out>\n        process_slot = 15\n        thread_slot = 42\n        csd = 0x80b0b20a0\n        cs = 0x80b0b22a8\n        ptrans = 0x80b0b2028\n        rv = <optimized out>\n        is_idle = 0\n        te = 0x0\n#21 0x0000000801c711f8 in dummy_worker (opaque=0x80b0119d8) at threadproc/unix/thread.c:142\n        thread = 0x80b0119d8\n#22 0x00000008020a6585 in thread_start (curthread=0x80b020c00) at /usr/src/lib/libthr/thread/thr_create.c:284\n        set = {__bits = {0, 0, 0, 0}}\n#23 0x0000000000000000 in ?? ()\nNo symbol table info available.\nBacktrace stopped: Cannot access memory at address 0x7ffff43a2000\n(gdb)", "id": 192952, "time": "2016-08-08T05:27:54Z", "creator": "astrange@ithinksw.com", "creation_time": "2016-08-08T05:27:54Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 59947, "text": "What socache provider are you using?", "id": 195125, "time": "2016-11-21T20:35:19Z", "creator": "jim@apache.org", "creation_time": "2016-11-21T20:35:19Z", "is_private": false, "attachment_id": null}]