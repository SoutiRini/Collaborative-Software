[{"count": 0, "tags": [], "creator": "mi+apache@aldan.algebra.com", "attachment_id": 29202, "id": 161208, "time": "2012-08-09T19:40:45Z", "bug_id": 53689, "creation_time": "2012-08-09T19:40:45Z", "is_private": false, "text": "Created attachment 29202\nAlter the \"prepare\" API call to pass offsets found by apr_dbd_prepare to the drivers\n\nWhile trying to fix the FreeTDS driver (see Bug 53666), it occurred to me, that -- because the work of parsing the statement-templates is already done by the global apr_dbd_prepare() -- the function should share its findings with the drivers' prepare-calls.\n\nFreeTDS would certainly benefit from it, while others will not be hurt -- there need not be an ABI change and the existing drivers will not need recompiling.\n\nA brief discussion with bojan@ revealed, that he is hesitant to change the API, which is understandable. I, however, believe, that the change's usefulness makes it worthwhile.\n\nThe argument, that the list of offsets would only be useful to FreeTDS is countered by the fact, that \"label\" is ignored by most drivers too.\n\nThough I'm submitting a patch for Bug 53666 fixing FreeTDS-driver without this change, I'd much rather avoid the work-duplication and hackery involved in reparsing the string, that was already processed above..."}, {"count": 1, "tags": [], "text": "Comment on attachment 29202\nAlter the \"prepare\" API call to pass offsets found by apr_dbd_prepare to the drivers\n\nIf need be, the creation and population of the proposed offsets-array can be made conditional on driver->pformat being empty...", "is_private": false, "bug_id": 53689, "id": 161209, "time": "2012-08-09T19:42:15Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2012-08-09T19:42:15Z", "attachment_id": 29202}]