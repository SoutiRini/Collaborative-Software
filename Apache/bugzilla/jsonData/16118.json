[{"count": 0, "tags": [], "creator": "jfarcand@apache.org", "text": "Platform: Cygwin/win32 (win2k)\n\nUsing exec or java from a build.xml file, Ant always hangs when Tomcat 4.1.x/5\nis started. As an example (trying to find a worksaround), I have written a class\nthat start process (similar to Exec). When I'm doing:\n\n        <java classname=\"RuntimeProcess\" fork=\"true\">\n            <arg value=\"catalina start\"/>\n            <arg value=\"c:/src/jakarta-tomcat-5/build/bin\"/>\n            <arg value=\"Catalina 5.0\"/>\n       </java>\n\nTomcat starts but Ant hangs. The same behaviour occurs using the Exec task. The\ntimeout aatribute doesn't work for both command (java and exec). Any help will\nbe appreciated (if it's not a bug). I'm trying to automate the Tomcat startup\nand then run jakarta-watchdog automatically, but Ant hang just after starting\nTomcat (waiting for some signal I guess) \n\nAnother example is if you download jakarta-tomcat-5 and do ant watchdog, the\nsame problem will happen (this time using commons-launcher).\n\nThanks\n\n-- Jeanfrancois", "id": 29421, "time": "2003-01-15T17:28:19Z", "bug_id": 16118, "creation_time": "2003-01-15T17:28:19Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 16118, "attachment_id": 4431, "text": "Created attachment 4431\nExample of a class that hangs", "id": 29422, "time": "2003-01-15T17:31:57Z", "creator": "jfarcand@apache.org", "creation_time": "2003-01-15T17:31:57Z", "is_private": false}, {"count": 2, "tags": [], "text": "Doing a Ctrl-break gives:\n\nFull thread dump Java HotSpot(TM) Client VM (1.4.1_01-b01 mixed mode):\n\n\"Thread-3\" daemon prio=5 tid=0x0ACF43D0 nid=0x25c runnable [b2cf000..b2cfd8c]\n        at java.io.FileInputStream.readBytes(Native Method)\n        at java.io.FileInputStream.read(FileInputStream.java:174)\n        at org.apache.tools.ant.taskdefs.StreamPumper.run(StreamPumper.java:105)\n        at java.lang.Thread.run(Thread.java:536)\n\n\"Thread-2\" daemon prio=5 tid=0x0ACF4278 nid=0x4f4 runnable [b28f000..b28fd8c]\n        at java.io.FileInputStream.readBytes(Native Method)\n        at java.io.FileInputStream.read(FileInputStream.java:191)\n        at java.io.BufferedInputStream.fill(BufferedInputStream.java:183)\n        at java.io.BufferedInputStream.read1(BufferedInputStream.java:222)\n        at java.io.BufferedInputStream.read(BufferedInputStream.java:277)\n        - locked <02A55170> (a java.io.BufferedInputStream)\n        at java.io.FilterInputStream.read(FilterInputStream.java:90)\n        at org.apache.tools.ant.taskdefs.StreamPumper.run(StreamPumper.java:105)\n        at java.lang.Thread.run(Thread.java:536)\n\n\"Signal Dispatcher\" daemon prio=10 tid=0x008F8C20 nid=0x830 waiting on condition\n[0..0]\n\n\"Finalizer\" daemon prio=9 tid=0x008F7088 nid=0x6c4 in Object.wait()\n[ab4f000..ab4fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02EE8230> (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)\n        - locked <02EE8230> (a java.lang.ref.ReferenceQueue$Lock)\n        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\n\n\"Reference Handler\" daemon prio=10 tid=0x008F5C00 nid=0x760 in Object.wait()\n[ab0f000..ab\n0fd8c]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02EE8298> (a java.lang.ref.Reference$Lock)\n        at java.lang.Object.wait(Object.java:426)\n        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:113)\n        - locked <02EE8298> (a java.lang.ref.Reference$Lock)\n\n\"main\" prio=5 tid=0x002350C8 nid=0x630 in Object.wait() [6f000..6fc40]\n        at java.lang.Object.wait(Native Method)\n        - waiting on <02A55A00> (a java.lang.Thread)\n        at java.lang.Thread.join(Thread.java:1008)\n        - locked <02A55A00> (a java.lang.Thread)\n        at java.lang.Thread.join(Thread.java:1061)\n        at\norg.apache.tools.ant.taskdefs.PumpStreamHandler.stop(PumpStreamHandler.java:11\n2)\n        at\norg.apache.tools.ant.taskdefs.LogStreamHandler.stop(LogStreamHandler.java:83)\n        at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:458)\n        at org.apache.tools.ant.taskdefs.Java.run(Java.java:460)\n        at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:160)\n        at org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)\n        at org.apache.tools.ant.Task.perform(Task.java:319)\n        at org.apache.tools.ant.Target.execute(Target.java:309)\n        at org.apache.tools.ant.Target.performTasks(Target.java:336)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1306)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1250)\n        at org.apache.tools.ant.Main.runBuild(Main.java:610)\n        at org.apache.tools.ant.Main.start(Main.java:196)\n        at org.apache.tools.ant.Main.main(Main.java:235)\n\n\"VM Thread\" prio=5 tid=0x008F49C8 nid=0x62c runnable\n\n\"VM Periodic Task Thread\" prio=10 tid=0x0023EE90 nid=0x648 waiting on condition\n\"Suspend Checker Thread\" prio=10 tid=0x0023FD18 nid=0x7dc runnable", "attachment_id": null, "bug_id": 16118, "id": 29423, "time": "2003-01-15T17:35:12Z", "creator": "jfarcand@apache.org", "creation_time": "2003-01-15T17:35:12Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 16118, "text": "I guess this is not a bug. Every application started from ANT hangs, so that's\nprobably the proper behaviour.\n\n-- Jeanfrancois", "id": 29476, "time": "2003-01-15T22:15:03Z", "creator": "jfarcand@apache.org", "creation_time": "2003-01-15T22:15:03Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 16118, "attachment_id": null, "text": "well, there have been requests before for a <spawn> task; though nobody has\ndared to think about all the cross platform implementation details. Maybe its\ntime to do it.", "id": 29481, "time": "2003-01-15T23:04:49Z", "creator": "stevel@apache.org", "creation_time": "2003-01-15T23:04:49Z", "is_private": false}, {"count": 5, "tags": [], "creator": "jfarcand@apache.org", "attachment_id": null, "id": 29484, "time": "2003-01-15T23:41:11Z", "bug_id": 16118, "creation_time": "2003-01-15T23:41:11Z", "is_private": false, "text": "This is exactly what I'm working on it rigth now :-) I should have something\nbasic for win32 by the end of the week. If I think it is stable enough, I may\nsubmit a patche...\n\nThanks,\n\n-- Jeanfrancois"}]