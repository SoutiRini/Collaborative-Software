[{"count": 0, "tags": [], "bug_id": 44236, "attachment_id": null, "id": 112849, "time": "2008-01-14T20:37:42Z", "creator": "mpc8250@gmail.com", "creation_time": "2008-01-14T20:37:42Z", "is_private": false, "text": "Z W wrote:\n> Hi\n>\n> I'm trying to \"ping\" hosts on network using <isreachable> with ant-contrib.\n> All these hosts variables point to the same host ie linpac2.\n\n>\n\n> [echo] start isreachable linpac2\n>\n> Dynamically discovered 'isreachable'\n> org.apache.tools.ant.taskdefs.condition.IsReachable@1f3aa07\n>\n> Probing host linpac2\n>\n> Unknown host: linpac2\n>\n> Condition false; not setting offline\n>\n> [echo] build_main.debug=0\n>\n> [sleep] sleeping for 5000 milliseconds\n>\n> Why on both consecutive \"pinging\" to the same host, it works the first time\n> but not the second ?\n>\n\n\nI'm the author of that task, so blame me.\nHere's the source\nhttp://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/taskd\nefs/condition/IsReachable.java?view=markup\n\n-isreachable uses Sun's API InetAddress.isReachable() , the exact\nbehaviour of which is undocumented (they dont say how it pings)\n\nIf its playing up, its probably the implementation. I see that java 6.4\nmentions three fixes for this\n\n6587875         java    classes_net     InetAddress.isReachable() will not \nwork for\nsuper users with \"large\" process ids\n6599750         java    classes_net     InetAddress.isReachable implementation \nnot\ncompletely thread safe\n6601686         java    classes_net     InetAddress.isReachable(timeout) may \nnot\nreturn after timout milliseconds\n\n1. please open a bugrep on issues.apache.org/bugzilla\n2. try with the latest sun JVM update; if it goes away, then we've found\nthe problem\n\nI've found I dont use the condition much, because\n -some of the hosts I deploy to have ping locked down\n -it doesnt go through firewalls\n -when a machine is booting up, ping starts ahead of the services I need\n\nI prefer to use <http> and <socket>. Could they work for you ?"}, {"count": 1, "attachment_id": null, "bug_id": 44236, "text": "ZW \n\n-try upgrading to java 1.6.0_04, which has some documented changes to the\nIsReachable() code\n\n", "id": 112855, "time": "2008-01-15T01:45:27Z", "creator": "stevel@apache.org", "creation_time": "2008-01-15T01:45:27Z", "tags": [], "is_private": false}]