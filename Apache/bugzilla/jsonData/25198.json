[{"count": 0, "tags": [], "text": "I configured httpd-2.0.48 with mod_proxy as intranet proxy server. When\nconnecting to http://www.mydrive.netapp-web.com/ httpd child coredumps on every\ngraphic load attempt. Graphics from other sites are working.\n\nI'm using SunOS 5.9 (Solaris9) on an E2/sparc.\n\ngcc -v:\nReading specs from /usr/local/lib/gcc-lib/sparc-sun-solaris2.9/3.2.2/specs\nConfigured with: ../configure --disable-nls --with-ld=/usr/ccs/bin/ld\n--with-as=/usr/ccs/bin/as\nThread model: posix\ngcc version 3.2.2\n\n\nhttpd configure command:\n./configure --enable-mods-shared=all --enable-file-cache=shared\n--enable-cache=shared --enable-disk-cache=shared --enable-mem-cache=shared\n--enable-ext-filter=shared --enable-deflate=shared --enable-logio=shared\n--enable-unique-id=shared --enable-proxy=shared --enable-proxy-connect=shared\n--enable-proxy-ftp=shared --enable-proxy-http=shared --enable-ssl=shared\n--enable-cgi=shared --enable-dav-fs=shared --enable-vhost-alias=shared\n--enable-rewrite=shared --with-mpm=worker \n\ngdb backtrace:\ntlin@shgate: $ gdb /usr/local/apache2/bin/httpd core \nGNU gdb 5.0\n[..]\nThis GDB was configured as \"sparc-sun-solaris2.8\"...\nCore was generated by `/usr/local/apache2/bin/httpd -f /home/tlin/.ap2/proxy.conf'.\nProgram terminated with signal 9, Killed.\n[..]\n#0  0xfecf1934 in memcmp () from /usr/platform/SUNW,Ultra-2/lib/libc_psr.so.1\n(gdb) bt\n#0  0xfecf1934 in memcmp () from /usr/platform/SUNW,Ultra-2/lib/libc_psr.so.1\n#1  0xfeb8279c in proxy_fixup (r=0x173250) at mod_proxy.c:279\n#2  0x4966c in ap_run_fixups (r=0x173250) at request.c:114\n#3  0x49e74 in ap_process_request_internal (r=0x173250) at request.c:286\n#4  0x2f378 in ap_process_request (r=0x173250) at http_request.c:286\n#5  0x2a844 in ap_process_http_connection (c=0x14f548) at http_core.c:293\n#6  0x3deb4 in ap_run_process_connection (c=0x14f548) at connection.c:85\n#7  0x30690 in process_socket (p=0x14f420, sock=0x14f458, my_child_num=0,\nmy_thread_num=8, bucket_alloc=0x171210) at worker.c:632\n#8  0x30dd4 in worker_thread (thd=0x11ada0, dummy=0x14f420) at worker.c:946\n#9  0xff0546b8 in dummy_worker (opaque=0x11ada0) at thread.c:127\n\n\nerror_log:\n[Thu Dec 04 12:12:14 2003] [notice] child pid 2943 exit signal Segmentation\nfault (11)\n[Thu Dec 04 12:12:14 2003] [notice] child pid 2942 exit signal Segmentation\nfault (11)\n[Thu Dec 04 12:12:15 2003] [notice] child pid 2945 exit signal Segmentation\nfault (11)\n[Thu Dec 04 12:12:15 2003] [notice] child pid 2944 exit signal Segmentation\nfault (11)\n\nThere are no correspondig access log entries.\n\n\n\nkind regards, Tom", "attachment_id": null, "id": 48476, "creator": "tom@izb.net", "time": "2003-12-04T11:48:00Z", "bug_id": 25198, "creation_time": "2003-12-04T11:48:00Z", "is_private": false}, {"count": 1, "text": "Loading the URL you referenced with images using Apache 2.0.48 as forward proxy\nserver works for me with Solaris9/Sparc, but I'm using Sun compiler instead of\ngcc and I couldn't enable ssl because I didn't have suitable openssl installed.\n I tested with IE 6.\n\nIn gdb can you go up a frame to proxy_fixups and display the request_rec?\n\ngdb /path/to/httpd /path/to/core\n(gdb) up\n(gdb) list 275\n(gdb) print *r\n\nThe line number seems weird too.  There's no call on line 279.  Maybe it is for\nstrncmp call on line before.  gdb has some other challenge too, stating that\ncore dump is for signal 9.\n\nPossibly a prefork build will present fewer challenges to the debugger since the\nprocess won't be threaded; dunno for sure though.\n", "creator": "trawick@apache.org", "is_private": false, "id": 48865, "time": "2003-12-10T21:54:38Z", "bug_id": 25198, "creation_time": "2003-12-10T21:54:38Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "is_private": false, "text": "There is an r->filename == NULL bug when the cache modules serve a 304 if\nmod_proxy is in use, I think these got fixed on HEAD already.", "id": 48890, "time": "2003-12-11T10:09:25Z", "bug_id": 25198, "creation_time": "2003-12-11T10:09:25Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 25198, "attachment_id": null, "id": 48913, "time": "2003-12-11T15:12:58Z", "creator": "trawick@apache.org", "creation_time": "2003-12-11T15:12:58Z", "is_private": false, "text": "dangit, of course your right, Joe  (I thought I was looking at APACHE_2_0_48\nversion of the file but not so.)\n\nThomas, make line 278 look like this:\n   if (!r->proxyreq || !r->filename || strncmp(r->filename, \"proxy:\", 6) != 0)\n        return DECLINED;\n\nThe fix is already in the stable branch for 2.0.next.\n\nPlease re-open if this doesn't resolve the problem.\n"}]