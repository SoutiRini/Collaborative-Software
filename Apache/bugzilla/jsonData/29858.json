[{"count": 0, "tags": [], "creator": "asmodai@tendra.org", "attachment_id": null, "id": 60044, "time": "2004-06-29T10:01:35Z", "bug_id": 29858, "creation_time": "2004-06-29T10:01:35Z", "is_private": false, "text": "Placeholder for DragonFly BSD support patches for APR."}, {"count": 1, "tags": [], "creator": "asmodai@tendra.org", "attachment_id": 11992, "id": 60045, "time": "2004-06-29T10:02:40Z", "bug_id": 29858, "creation_time": "2004-06-29T10:02:40Z", "is_private": false, "text": "Created attachment 11992\nsendrecv.c patch for supporting DragonFly's sendfile()"}, {"count": 2, "tags": [], "creator": "asmodai@tendra.org", "attachment_id": null, "id": 60046, "time": "2004-06-29T10:25:34Z", "bug_id": 29858, "creation_time": "2004-06-29T10:25:34Z", "is_private": false, "text": "Please also update config.guess and config.sub in build with the new versions \nfrom the config project (http://savannah.gnu.org/projects/config/).  This goes \nfor both APR and APR-util."}, {"count": 3, "tags": [], "text": "Created attachment 11993\nsendrecv.c patch against HEAD (apr-APR_0_9_BRANCH_20040629043529)", "is_private": false, "id": 60047, "creator": "asmodai@tendra.org", "time": "2004-06-29T11:19:16Z", "bug_id": 29858, "creation_time": "2004-06-29T11:19:16Z", "attachment_id": 11993}, {"count": 4, "tags": [], "bug_id": 29858, "attachment_id": null, "id": 60051, "time": "2004-06-29T15:43:15Z", "creator": "chip@force-elite.com", "creation_time": "2004-06-29T15:43:15Z", "is_private": false, "text": "Why can't you modify the existing FreeBSD Sendfile function?\n\nFrom the patch, the DragonFly and FreeBSD sendfile functions look nearly the\nsame.  Is there any reason you couldn't combine them into one?\n"}, {"count": 5, "tags": [], "creator": "chip@force-elite.com", "attachment_id": null, "is_private": false, "id": 60335, "time": "2004-07-09T07:45:08Z", "bug_id": 29858, "creation_time": "2004-07-09T07:45:08Z", "text": "Jeroen, Feedback Please.\n\nWhy can't you use the FreeBSD function?  Why do you need to copy and paste the\nentire freebsd function in the patch?\n\nIm about to just mark this as invalid.\n\n-Paul Querna\n\n"}, {"count": 6, "tags": [], "bug_id": 29858, "attachment_id": null, "id": 60340, "time": "2004-07-09T08:12:32Z", "creator": "asmodai@tendra.org", "creation_time": "2004-07-09T08:12:32Z", "is_private": false, "text": "Paul,\n\nwe do not carry FreeBSD's historical bagage, nor do we keep the version numbers \nFreeBSD uses.\n\nFurthermore, we have been diverting API/ABI wise from FreeBSD on some levels \nalready and I am just trying to be ahead of the curve of having to redo this at \nnear point in time."}, {"count": 7, "tags": [], "text": "This snippet is especially crucial:\n\n#define KERNEL_WITH_SENDFILE_LENGTH_FIX 460001\n\n[snip]\n\n    kernel_version = 0;    /* silence compiler warning */\n    kernel_version_size = sizeof(kernel_version);\n    if (sysctlbyname(\"kern.osreldate\", &kernel_version,\n                     &kernel_version_size, NULL, NULL) == 0 &&\n        kernel_version < KERNEL_WITH_SENDFILE_LENGTH_FIX) {\n        api = OLD;\n        return 1;\n    }\n\n$ sysctl kern.osreldate \nkern.osreldate: 100000", "attachment_id": null, "id": 60341, "creator": "asmodai@tendra.org", "time": "2004-07-09T08:19:40Z", "bug_id": 29858, "creation_time": "2004-07-09T08:19:40Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 29858, "text": "That code is bogus, and already has a bug against it w/ a Patch to remove it.\n\nSee Bug #25718\n\nIf the patch there was applied, is there any other parts of the FreeBSD function\nthat would not work on DragonFly?\n\n-Paul", "id": 60342, "time": "2004-07-09T08:30:22Z", "creator": "chip@force-elite.com", "creation_time": "2004-07-09T08:30:22Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 29858, "text": "If and when said patch is applied it would seem that you could collapse both \nDragonFly and FreeBSD together for now.  So no, 't would work.", "id": 60344, "time": "2004-07-09T08:47:00Z", "creator": "asmodai@tendra.org", "creation_time": "2004-07-09T08:47:00Z", "is_private": false, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 29858, "is_private": false, "text": "Created attachment 14031\nsendrecv.c patch for DragonFly sendfile() support against rev 125405", "id": 69765, "time": "2005-01-17T12:10:01Z", "creator": "asmodai@tendra.org", "creation_time": "2005-01-17T12:10:01Z", "attachment_id": 14031}, {"count": 11, "tags": [], "text": "Created attachment 14032\npatch to properly use dlopen() in dso.c against rev 125405", "attachment_id": 14032, "id": 69766, "creator": "asmodai@tendra.org", "time": "2005-01-17T12:23:45Z", "bug_id": 29858, "creation_time": "2005-01-17T12:23:45Z", "is_private": false}, {"count": 12, "tags": [], "text": "Created attachment 14033\npatch to get DLSYM_NEEDS_UNDERSCORE defined, against rev 125407", "is_private": false, "id": 69767, "creator": "asmodai@tendra.org", "time": "2005-01-17T12:27:30Z", "bug_id": 29858, "creation_time": "2005-01-17T12:27:30Z", "attachment_id": 14033}, {"count": 13, "tags": [], "creator": "asmodai@tendra.org", "attachment_id": null, "id": 69846, "time": "2005-01-19T16:57:21Z", "bug_id": 29858, "creation_time": "2005-01-19T16:57:21Z", "is_private": false, "text": "These are all the patches DragonFly needs at this time.  Just to be absolutely\nclear on the issue. : )"}, {"count": 14, "tags": [], "bug_id": 29858, "text": "Thanks, I will try to commit them in the next few days before 1.1.0.", "id": 69848, "time": "2005-01-19T18:33:33Z", "creator": "chip@force-elite.com", "creation_time": "2005-01-19T18:33:33Z", "is_private": false, "attachment_id": null}, {"count": 15, "tags": [], "creator": "chip@force-elite.com", "attachment_id": null, "id": 69900, "time": "2005-01-21T04:51:15Z", "bug_id": 29858, "creation_time": "2005-01-21T04:51:15Z", "is_private": false, "text": "Commited to trunk in r125880."}]