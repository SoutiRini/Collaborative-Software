[{"count": 0, "tags": [], "bug_id": 51412, "text": "Created attachment 27190\nProperly parse buffer-size\n\nBuilding the module on my 64-bit machine, I get the following warning:\n\nftp_commands.c:1694: warning: comparison is always false due to limited range of data type\n\nIndeed, although ftp_connection's pbsz field is of type int, it is compared to LONG_MAX.\n\nThe attached patch uses a private long variable to check the value supplied by the client. Only if the value is positive and below INT_MAX is it assigned to fc->pbsz.", "id": 147346, "time": "2011-06-21T18:57:48Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2011-06-21T18:57:48Z", "is_private": false, "attachment_id": 27190}, {"count": 1, "tags": [], "bug_id": 51412, "text": "Created attachment 27191\nProperly parse buffer-size\n\nThis version ensures, the requested size is positive -- refusing size 0.", "id": 147347, "time": "2011-06-21T18:59:57Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2011-06-21T18:59:57Z", "is_private": false, "attachment_id": 27191}, {"count": 2, "tags": [], "bug_id": 51412, "text": "Thanks Mikhail, reviewing your patch!", "id": 147380, "time": "2011-06-22T21:00:57Z", "creator": "wrowe@apache.org", "creation_time": "2011-06-22T21:00:57Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 51412, "text": "BTW, even INT_MAX is far too much for a buffer-size. Perhaps, the maximum allowed size should be a configuration option -- defaulting to something like 8192 or 16384?..", "id": 147386, "time": "2011-06-22T21:16:25Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2011-06-22T21:16:25Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 51412, "attachment_id": null, "text": "Looks like this problem is fixed in the svn-trunk...", "id": 182801, "time": "2015-05-02T02:51:46Z", "creator": "mi+apache@aldan.algebra.com", "creation_time": "2015-05-02T02:51:46Z", "is_private": false}]