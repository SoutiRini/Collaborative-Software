[{"count": 0, "attachment_id": 29143, "bug_id": 53629, "text": "Created attachment 29143\nPatch to modules.mk.win\n\nThere is a bug in modules.mk.win causing broken build for x64 using Visual C++. Patch attached.", "id": 161029, "time": "2012-07-31T13:33:20Z", "creator": "vali@kamarad.cz", "creation_time": "2012-07-31T13:33:20Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 53629, "text": "After going through the hoops of picking out just what is changing in your patch, here is what I found:\n\n--- modules.mk.mak\t2012-10-07 17:25:50.904000000 -0700\n+++ modules.mk.mak\t2012-10-07 17:22:12.453000000 -0700\n@@ -167,10 +167,10 @@\n \n !IF \"$(BIND_MODE)\" == \"shared\"\n API_LIBS = $(APR_SOURCE)\\x64\\Debug\\libapr-1.lib \\\n-\t   $(API_SOURCE)\\x64\\Debug\\libapriconv-1.lib\n+\t   $(API_SOURCE)\\Debug\\libapriconv-1.lib\n CFG_CFLAGS  = /MDd /Zi /Od /EHsc /D \"_DEBUG\"\n CFG_LDFLAGS = /debug /incremental:no /machine:X64\n-CFG_OUTPUT  = x64\\Debug\\iconv\n+CFG_OUTPUT  = Debug\\iconv\n \n !ELSEIF \"$(BIND_MODE)\" == \"static\"\n APR_LIB = $(APR_SOURCE)\\x64\\LibD\\apr-1.lib \\\n\nWithout any more info than it breaks the VC++ compile I could not get behind this change. I build x64 often and do not have a problem with this. \n\nIf this is breaking your build, how come APR is not since it is output to \\x64\\Debug also?", "id": 162616, "time": "2012-10-08T01:54:44Z", "creator": "gls@gknw.net", "creation_time": "2012-10-08T01:54:44Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "vali@kamarad.cz", "attachment_id": null, "is_private": false, "id": 162619, "time": "2012-10-08T09:10:32Z", "bug_id": 53629, "creation_time": "2012-10-08T09:10:32Z", "text": "Hi Gregg,\n\nit looks like you applied the patch in the opposite direction. And it looks like you had the correct makefile?\n\nIf I download the recommended release from a mirror, e.g. http://apache.miloslavbrada.cz/apr/apr-iconv-1.2.1-win32-src-r2.zip, then in the section \"x64 Debug\" there are the two incorrect lines I wanted to patch:\n\nln 170:\n\t   $(API_SOURCE)\\Debug\\libapriconv-1.lib\n\nln 173:\nCFG_OUTPUT  = Debug\\iconv\n\nThey should be:\n\nln 170:\n\t   $(API_SOURCE)\\x64\\Debug\\libapriconv-1.lib\n\nln 173:\nCFG_OUTPUT  = x64\\Debug\\iconv\n\nAnd the same is in head revision in the SVN repository.\n\nI hope everything is clear now.\n\nCheers,\n- Vali"}, {"count": 3, "attachment_id": 29461, "bug_id": 53629, "text": "Created attachment 29461\nPatch of just the needed fixes\n\nOk, I see the problem now and you are correct. Thanks.", "id": 162627, "time": "2012-10-08T18:37:30Z", "creator": "gls@gknw.net", "creation_time": "2012-10-08T18:37:30Z", "tags": [], "is_private": false}]