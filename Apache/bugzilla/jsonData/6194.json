[{"count": 0, "tags": [], "creator": "rimovm@centercomp.com", "text": "This was done with jdk 1.3.1 on a Win2K machine all security patches installed:\n\nEasiest way to reproduce:\n\n1 - Download the 4.02 Expresso Complete from www.jcorporate.com and unpack.\n2 - Launch catalina - everything should work.\n3 - cd to the webapps\\expresso directory and type: jar -cvf expresso.war *\n4 - move the expresso.war file up to the webapps directory\n5 - Delete the old expresso directory.\n6 - Launch Catalina\n\nWhat happens for me is that catalina unpacks the war file, but then the initial \nservlets aren't called, and any web activity to \nlocalhost:8080/expresso/expresso/frame.jsp gets me '404 Not Available'\n\n7- Kill catalina and restart\n\nShould work fine now.\n\n[Although on a side note, since the java files are in the web-inf directory, it \nseems that jasper tries to recompile things?  I usually get several errors \npointing into the expresso source file... delete the source and the jsp \ndisplays fine]\n\nThis happens for me all the time, although apparantly for others it works well \nunder Linux.\n\nThanks for your time!\n\n-Mike", "id": 10199, "time": "2002-02-02T04:10:13Z", "bug_id": 6194, "creation_time": "2002-02-02T04:10:13Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 6194, "attachment_id": null, "text": "Downloaded the WAR distribution of the Expresso framework\n(http://www.jcorporate.com/Download.do?file=138&state=begin).\nOther than the usual XML parser problems, it works.", "id": 10219, "time": "2002-02-02T12:11:17Z", "creator": "remm@apache.org", "creation_time": "2002-02-02T12:11:17Z", "is_private": false}, {"text": "This also happens for me using Tomcat 4.0.3 on Windows 2000 and Windows NT both \nas an application and as a service.\n\nThe steps are essentially the same:\n\n1) Install Tomcat\n2) Configure app in server.xml\n3) Drop war file in webapps directory\n4) Start tomcat\n   --> tomcat unpacks the war file but serves a 401 error for every page.\n5) Stop tomcat\n6) Start tomcat\n   --> tomcat now serves everything properly.\n\n\nI haven't tried this on linux, but I will. Regardless, I don't have a choice \nwhat OS to deploy this on, so it kinda has to work on Win2K/NT. I'm not sure \nwhy it would matter anyway.\n\n", "tags": [], "bug_id": 6194, "attachment_id": null, "count": 2, "id": 17523, "time": "2002-06-10T19:29:46Z", "creator": "swilson@ecount.com", "creation_time": "2002-06-10T19:29:46Z", "is_private": false}, {"count": 3, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 17524, "time": "2002-06-10T19:57:45Z", "bug_id": 6194, "creation_time": "2002-06-10T19:57:45Z", "is_private": false, "text": "As I said, it works for me. I tried the expresso framework, and it worked.\nYou'll have to explain to me what is different in your configuration or WAR\nwhich makes it fail."}, {"count": 4, "tags": [], "creator": "swilson@ecount.com", "text": "I am not using the expresso framework, I'm using a WAR file built with the ANT \nbuild script given in the Tomcat programmer's guide.\n\nHere's my host/context config in server.xml:\n\n      \t<Host name=\"wb.local\" debug=\"0\" appBase=\"webapps\" unpackWARs=\"true\">\n\t\t\n\t\t<Valve className=\"org.apache.catalina.valves.AccessLogValve\"\n\t\t       directory=\"logs\"  prefix=\"wb_local_access_log.\" \nsuffix=\".txt\"\n\t\t       pattern=\"common\"/>\n\n\t\t<Logger className=\"org.apache.catalina.logger.FileLogger\"\n\t\t        directory=\"logs\"  prefix=\"wb_local_log.\" suffix=\".txt\"\n\t\t        timestamp=\"true\"/>\n\n\t  <Context path=\"\" docBase=\"workbench\" debug=\"0\">\n\t\t<Logger className=\"org.apache.catalina.logger.FileLogger\"\n\t\t        prefix=\"workbench_log.\" suffix=\".txt\"\n\t\t        timestamp=\"true\"/>\n\t  </Context>\n\t</Host>\n\nHere's what is showing up in the Host's log file:\n\n2002-06-11 10:33:16 StandardHost[wb.local]: Installing web application at \ncontext path /workbench from URL jar:file:C:\\c-\nbase\\opt\\tomcat\\webapps\\workbench.war!/\n2002-06-11 10:33:17 WebappLoader[/workbench]: Deploying class repositories to \nwork directory C:\\c-base\\opt\\tomcat\\work\\wb.local\\workbench\n2002-06-11 10:33:17 StandardManager[/workbench]: Seeding random number \ngenerator class java.security.SecureRandom\n2002-06-11 10:33:17 StandardManager[/workbench]: Seeding of random number \ngenerator has been completed\n2002-06-11 10:33:19 ContextConfig[/workbench]: Missing application web.xml, \nusing defaults only\n2002-06-11 10:33:19 ContextConfig[/workbench]: Added certificates -> request \nattribute Valve\n2002-06-11 10:33:19 StandardWrapper[/workbench:default]: Loading container \nservlet default\n2002-06-11 10:33:19 default: init\n2002-06-11 10:33:19 StandardWrapper[/workbench:invoker]: Loading container \nservlet invoker\n2002-06-11 10:33:19 invoker: init\n2002-06-11 10:33:19 jsp: init\n2002-06-11 10:33:19 Internal Error: File /WEB-INF/web.xml not found\n\n\nHere's what is showing up in the context's log file:\n\n2002-06-11 10:17:08 StandardContext[]: Error initializing resources: Document \nbase C:\\c-base\\opt\\tomcat\\webapps\\workbench does not exist or is not a readable \ndirectory\n2002-06-11 10:17:08 StandardContext[]: Context startup failed due to previous \nerrors\n2002-06-11 10:17:08 StandardContext[]: Exception during cleanup after start \nfailed\nLifecycleException:  Container StandardContext[] has not been started\n\tat org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1147)\n\tat org.apache.catalina.core.StandardContext.stop\n(StandardContext.java:3451)\n\tat org.apache.catalina.core.StandardContext.start\n(StandardContext.java:3408)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:614)\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n\tat org.apache.catalina.core.StandardEngine.start\n(StandardEngine.java:343)\n\tat org.apache.catalina.core.StandardService.start\n(StandardService.java:388)\n\tat org.apache.catalina.core.StandardServer.start\n(StandardServer.java:506)\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:781)\n\tat org.apache.catalina.startup.Catalina.execute(Catalina.java:681)\n\tat org.apache.catalina.startup.Catalina.process(Catalina.java:179)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:243)\n\nI'm not sure why that would happen, because after the file is unpacked, that \ndirectory most certainly exists. Could it be that the context is starting \nbefore the war file is unpackaged? Is this a thread timing issue? I am \nunfamiliar with the internals of Tomcat so I wouldn't know (hence the bug \nnote). Perhaps on Linux platforms a particular locking takes place that ensures \nthe war file is unpackaged before the context is started and that isn't \nhappening on Windows? Just a shot in the dark...\n\nAlso, I found this post on google groups:\n\nhttp://groups.google.com/groups?q=%\n22Error+initializing+resources:+Document+base%\n22&hl=en&lr=&ie=UTF8&oe=UTF8&selm=3c98c45e.53699265%40news.earthlink.net&rnum=1\n\nThe author had a similar problem to mine, however I found that the lower casing \nof the directory name for the web.xml file seems to be a problem with WinZIP, \nnot JAR or tomcat. Essentially, every time I tried to add web.xml to the \narchive using WinZIP it would always convert the path to lower case.\n\nWhat I also tried was letting Tomcat unpackage the directory and then using \nWinZIP to rearchive it (rather than using the jar utility). This eliminated the \nlower case directory name for web.xml, but did not resolve the problem.\n\nMy current work around is to start tomcat, let it unpack the war file and then \nrestart tomcat. This generally works, but will be a pain in the neck in a \nproduction environment. Fortunately I'm only working on an internal app right \nnow. If I can't get this to work I may have to use a different servlet engine \nwhen I go after customer facing systems, which would suck because I otherwise \ngenerally like Tomcat/Apache.\n\nYour assistance/guidance is very much appreciated.\n\nThanks in advance,\n\nSam Wilson", "id": 17594, "time": "2002-06-11T14:42:35Z", "bug_id": 6194, "creation_time": "2002-06-11T14:42:35Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 6194, "attachment_id": null, "id": 35414, "creation_time": "2003-04-17T13:50:17Z", "time": "2003-04-17T13:50:17Z", "creator": "remm@apache.org", "text": "I was never able to reproduce this bug.", "is_private": false}]