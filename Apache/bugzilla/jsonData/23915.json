[{"count": 0, "attachment_id": null, "bug_id": 23915, "text": "In my build file I have several tasks/types whose <taskdef>/<typedef> are \ninside a target.\nWhen I execute an unrelated target that contains a <script> task,\nI get the infamous:\n===========================================================\nBUILD FAILED\nE:\\projects\\ant1_6-branch-20031018\\pita\\newbuild.xml:1881: Could not create \ntask or type of type: prefcatalog.\n\nAnt could not find the task or a class this task relies upon.\n...\n===========================================================\nThis hapens while trying to run the <script> task, and the error being\nreported correspond to a completely unrelated target and task that has no \nreason to be evaluated (except for having an id).\n\nIf I comment the <script> task, the build succeeds with no problems.\n\nI think the problem is when trying to make the ID available to the script.\nThis does not occurs in 1.5.3 but it does in 1.6b2.\nAlso extrange is the fact that the ID used is \"catalog.app\" which should\nnot be added to the script because it is not a valid java identifier.", "id": 45889, "time": "2003-10-18T19:50:33Z", "creator": "j_a_fernandez@yahoo.com", "creation_time": "2003-10-18T19:50:33Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 23915, "is_private": false, "id": 45913, "time": "2003-10-20T10:47:43Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-10-20T10:47:43Z", "tags": [], "text": "Here is an example showing the problem:\n\n<project default=\"script\">\n  <target name=\"script\">\n    <script language=\"javascript\">\n      a = 1\n    </script>\n  </target>\n  <target name=\"define\">\n    <taskdef name=\"myecho\" classname=\"org.apache.tools.ant.taskdefs.Echo\"/>\n    <myecho id=\"hello.world\">Hello world</myecho>\n  </target>\n</project>\n"}, {"count": 2, "tags": [], "bug_id": 23915, "text": "The problem stems from the fact that registering of references is\ndone at xml parse time and not at run-time.\n\nI have made a change to fix this particular symptom.", "id": 46038, "time": "2003-10-22T09:36:35Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-10-22T09:36:35Z", "is_private": false, "attachment_id": null}]