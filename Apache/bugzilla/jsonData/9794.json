[{"count": 0, "tags": [], "text": "SetContentLengthTestServlet.java does this:\n\n        response.setContentLength( PASSED.length() + 2 );\n        out.println( PASSED );\n \n which assumes that EOL two characters long. That assumption\nis wrong on some platforms, since it depends on the system\nproperty \"line.separator\".\n\n Note that while HTTP defines EOL as crlf for the first line\nand headers, there is no such convention for the body.\n\n Fix is either to get line.separator and find the length, or\njust use print() instead of println, like this:\n\n       out.print( PASSED + \"\\r\\n\" );\n\n I'd submit a patch, but it's a trivial fix. It looks like\nthe same problem over at:\n\n ServletResponseWrapperSetContentLengthTestServlet\n\n Generally, any sort of hardcoded lengths (like \"2\" or \"48\") are\ngoing to cause problems down the line, and are a maintenance\nnightmare. Not quite sure of the fix for SRWSCLTS, though, since\nit depends on the output of something else.", "is_private": false, "id": 17635, "creation_time": "2002-06-11T23:26:31Z", "time": "2002-06-11T23:26:31Z", "creator": "apache-bugzilla@distributopia.com", "bug_id": 9794, "attachment_id": null}, {"count": 1, "tags": [], "creator": "Ryan.Lubke@Sun.COM", "text": "Patches applied.  Thanks!", "id": 18329, "attachment_id": null, "bug_id": 9794, "creation_time": "2002-06-21T15:33:23Z", "time": "2002-06-21T15:33:23Z", "is_private": false}]