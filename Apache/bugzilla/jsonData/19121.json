[{"count": 0, "tags": [], "bug_id": 19121, "attachment_id": null, "id": 35454, "time": "2003-04-17T17:39:37Z", "creator": "sfandino@yahoo.com", "creation_time": "2003-04-17T17:39:37Z", "is_private": false, "text": "I have compiled httpd 2.0.45 on NetBSD/sparc with option --enable-mods-shared=all\n\nand the error\n\n[error] (35)Resource temporarily unavailable: apr_accept: (client socket)\n\nappears continuosly on the log when running.\n\nPlaying with the prefork configuration I have found that only one subprocess can\nbe waiting on accept, other subprocesses get error 35 from the OS and die (then\nthe master proccess spawns another proccess that tries to accept again and\nfails, etc., etc.).\n\nI have 2.0.44 installed with the same conf and it works fine.\n\nBye,\n\n  - Salva"}, {"count": 1, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "id": 35459, "time": "2003-04-17T17:47:19Z", "bug_id": 19121, "creation_time": "2003-04-17T17:47:19Z", "is_private": false, "text": "This has been reported before (we need to see if it is still open).\n\nCan you try adding a second listening socket to see if the symptom goes away?\nWith > 1 listening socket, Apache will need to mutex around a poll+accept call,\nso you won't have multiple processes in accept at the same time, and perhaps\nthat circumvents whatever is going wrong.\n\nAlternatively, find this code in configure.in:\n\n  *486-*-bsdi* | *-netbsd* | *-freebsd* | *-apple-darwin* | *-dec-osf* | *-qnx)\n      APR_SETVAR(SINGLE_LISTEN_UNSERIALIZED_ACCEPT, [1])\n      ;;\n\ndelete those three lines, make extraclean && ./buildconf && ./configure\n--whatever && make && make install and see if the symptom goes away without\nhaving to add an additional listening socket\n\nas far as real problem resolution, I suspect this needs some dedicated debugging :)\n\n"}, {"count": 2, "tags": [], "text": "After some debugging I have found what the problem is:\n\nNetBSD has IPv6 support but  I have dissabled it on my server kernel.\n\napr configure finds the header files and gets erroneously compiled for IPv6. If\nI add the --disable-ipv6 option everything runs fine again.\n\nThe question open now is why \"resource temporarily unavailable\", opening the\nIPv6 socket should have failed from the first time.\n\nBye,\n\n  - Salva", "is_private": false, "id": 35563, "creator": "sfandino@yahoo.com", "time": "2003-04-18T16:04:51Z", "bug_id": 19121, "creation_time": "2003-04-18T16:04:51Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "good debugging!\n\nAlso, using IPv4 statement on Listen directive should do it too\n\nListen 0.0.0.0 80\n\nNote that Apache has some logic to try to look for weird IPv6 setups, where we\ncan get an IPv6 socket but it still isn't valid to use an IPv6 socket.  That\nlogic is in file server/listen.c in function find_default_family().  It would be\nnice to modify it to handle a setup like yours, but if your symptom is that one\nprocess blocked in accept() is okay but additional sockets in accept() get\nEAGAIN, I doubt that we can do anything about it. (I'd fear that such a\ncomplicated test at startup would create more problems than it is worth.)", "attachment_id": null, "id": 35569, "creator": "trawick@apache.org", "time": "2003-04-18T17:07:54Z", "bug_id": 19121, "creation_time": "2003-04-18T17:07:54Z", "is_private": false}, {"count": 4, "tags": [], "text": "Is this still reproducible with 2.0.53?", "is_private": false, "bug_id": 19121, "id": 73235, "time": "2005-04-04T11:19:12Z", "creator": "jorton@redhat.com", "creation_time": "2005-04-04T11:19:12Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 19121, "attachment_id": null, "id": 104264, "time": "2007-06-09T07:21:38Z", "creator": "davi@apache.org", "creation_time": "2007-06-09T07:21:38Z", "is_private": false, "text": "Closing due to inactivity, length of time and absence of of user information.\nIf more information appears later, please re-open the bug."}]