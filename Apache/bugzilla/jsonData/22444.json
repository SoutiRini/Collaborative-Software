[{"count": 0, "tags": [], "text": "If I specify a property location with a trailing slash (i.e. <property \nname=\"Dir2\" location=\"/usr/tmp/\"/>) the trailing slash is removed by Ant.\n\nThis doesn't happen with property value.\n\nHere's a test case:\n\n\n$ cat build.xml\n<project name=\"testslashes\" default=\"\" basedir=\".\">\n    <property name=\"Dir1\" value=\"/usr/tmp/\"/>\n    <property name=\"Dir2\" location=\"/usr/tmp/\"/>\n    <property name=\"Dir3\" value=\"/usr/tmp\"/>\n    <property name=\"Dir4\" location=\"/usr/tmp\"/>\n\n    <target name=\"init\">\n        <exec executable=\"echo\">\n            <arg line=\"'this should have a trailing slash: ' '${Dir1}'\"/>\n        </exec>\n        <exec executable=\"echo\">\n            <arg line=\"'this should have a trailing slash: ' '${Dir2}'\"/>\n        </exec>\n        <exec executable=\"echo\">\n            <arg line=\"'this should not have a trailing slash: ' '${Dir3}'\"/>\n        </exec>\n        <exec executable=\"echo\">\n            <arg line=\"'this should not have a trailing slash: ' '${Dir4}'\"/>\n        </exec>\n    </target>\n</project>\n\n$ ant init\nBuildfile: build.xml\n\ninit:\n     [exec] this should have a trailing slash:  /usr/tmp/\n     [exec] this should have a trailing slash:  /usr/tmp\n     [exec] this should not have a trailing slash:  /usr/tmp\n     [exec] this should not have a trailing slash:  /usr/tmp\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n$", "is_private": false, "bug_id": 22444, "id": 42785, "time": "2003-08-15T02:48:08Z", "creator": "eric@timebytes.com", "creation_time": "2003-08-15T02:48:08Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "The definition of the location property is that\n\"Sets the property to the absolute filename of the given file\"\nThe absolute filename does not include\na trailing directory separator.", "is_private": false, "bug_id": 22444, "id": 42792, "time": "2003-08-15T08:38:35Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-08-15T08:38:35Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 22444, "attachment_id": null, "id": 42813, "creation_time": "2003-08-15T16:33:58Z", "time": "2003-08-15T16:33:58Z", "creator": "eric@timebytes.com", "text": "Actually, the manual (http://ant.apache.org/manual/) says:\n\"Sets the property to the absolute filename of the given file. If the value of \nthis attribute is an absolute path, it is left unchanged (with / and \\ \ncharacters converted to the current platforms conventions). Otherwise it is \ntaken as a path relative to the project's basedir and expanded.\"\n\nNote that in the example case, the value of the attribute *is already* an \nabsolute path - therefore it must be *left unchanged* - as per the \ndocumentation.\n\n", "is_private": false}, {"count": 3, "tags": [], "bug_id": 22444, "attachment_id": null, "id": 42815, "creation_time": "2003-08-15T16:49:15Z", "time": "2003-08-15T16:49:15Z", "creator": "peter.reilly@corvil.com", "text": "What I meant was that the doc explanation after the\nfirst sentence is a little misleading.\n\"the absolute filename of the given file\" means the result\nof File#getAbsolutePath(), which documenation is also\na little misleading.\nimport java.io.File;\n\nimport org.apache.tools.ant.Task;\n\npublic class Abs extends Task {\n    String name;\n    public void setName(String name) {dd\n        this.name = name;\n    }\n    public void execute() {\n        log(\"name is \" + name + \" file is \" + new File(name).getAbsolutePath());\n    }\n}\nwith the ant fragment:\n  <javac srcdir=\"src\"/>\n  <taskdef name=\"abs\" classname=\"Abs\" classpath=\"src\"/>\n  <abs name=\"this/\"/>\n  <abs name=\"/tmp/\"/>\n\nGives: \nname is this/ file is /home/preilly/proj/learning/abs/this\nname is /tmp/ file is /tmp\n\non a unix system", "is_private": false}, {"count": 4, "tags": [], "creator": "eric@timebytes.com", "attachment_id": null, "id": 42817, "time": "2003-08-15T17:18:16Z", "bug_id": 22444, "creation_time": "2003-08-15T17:18:16Z", "is_private": false, "text": "Well, I can't speak to the question of File#getAbsolutePath() - \nI could argue that it's not a reasonable implementation.\n\nFor our purposes, however, I would simply suggest not calling \ngetAbsolutePath() in the first place if the property is already\nabsolute - meaning it begins with a slash.\n\nIn pseudocode,\n\nif (location does not begin with a slash)\n    set location to getAbsolutePath()\n\nThis would be reasonable, and consistent with the documentation."}, {"count": 5, "tags": [], "creator": "conor@apache.org", "attachment_id": null, "id": 43717, "time": "2003-09-04T12:06:18Z", "bug_id": 22444, "creation_time": "2003-09-04T12:06:18Z", "is_private": false, "text": "I d not think this is a bug. For example the current working directory\n\n$ pwd\n/home/conor/development/apache/ant\n\nLocations, even for directories, do not have trailing slashes.\n"}]