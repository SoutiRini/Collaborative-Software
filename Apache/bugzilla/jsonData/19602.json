[{"count": 0, "tags": [], "text": "CURRENT STATE:\nIt is not possible to set the docBase to a specific value. The docBase \nparameter is always calculated at StandardHostDeployer.java and cannot be set \nby the user by setting the docBase-attribute at context.xml.\n\nENHANCEMENT:\nI changed StandardHostDeployer.java to check whether the parameter \noverrideDocBase is set to false. If this is the case, I do not override the \ndocBase, but use the docBase set by the user at context.xml.\nline 446ff.\npublic synchronized void install(URL config, URL war) throws IOException {\n\nI also needed some additional libraries, which I added at the top.\nThe changes have been marked with comments.\n\nI suspect the first install routine at line 356 may also need some changes, but \nI don't know how to test it and so I left it unchanged. Additionally, I am \nsatisfied with the change of the install routine at line 446ff.\n\nUSE CASE:\nant deploy with a context.xml with\n<Context overrideDocBase=\"false\" docBase=\"c:\\...\\XXX.war\" ...>\nwill set the docBase to XXX.war at the server side.\n\noverrideDocBase=\"true\" or omitting overrideDocBase will use the default \nbehaviour.", "attachment_id": null, "id": 36598, "creator": "johannes.fiala@fwd.at", "time": "2003-05-02T16:46:30Z", "bug_id": 19602, "creation_time": "2003-05-02T16:46:30Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 6171\ncontains the isolated changes to StandardHostDeployer.java for TC 5.0.1", "is_private": false, "id": 36599, "creator": "johannes.fiala@fwd.at", "time": "2003-05-02T16:48:19Z", "bug_id": 19602, "creation_time": "2003-05-02T16:48:19Z", "attachment_id": 6171}, {"count": 2, "tags": [], "text": "more infos about the reasons for this enhancement can be found at the following \nHOWTO:\nhttp://www.fwd.at/tomcat/upgrade-webapps-howto.html", "is_private": false, "id": 36600, "creator": "johannes.fiala@fwd.at", "time": "2003-05-02T16:50:06Z", "bug_id": 19602, "creation_time": "2003-05-02T16:50:06Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "Ok, this will likely sound harsher than it's meant to be, but I am -1 on doing\nany incremental hacks to the deployer. Instead, we should work on a well thought\nout spec (possibly with incremental changes over what we currently have), and\nthen implement it.\n\nBTW, I don't quite understand what your change is supposed to do; from what I\nunderstand of it, I don't like it (yet another ugly hack in that poor component).", "is_private": false, "bug_id": 19602, "id": 36602, "time": "2003-05-02T17:22:17Z", "creator": "remm@apache.org", "creation_time": "2003-05-02T17:22:17Z", "attachment_id": null}]