[{"count": 0, "tags": [], "creator": "tom.ball@sun.com", "attachment_id": null, "id": 65669, "time": "2004-10-25T19:40:36Z", "bug_id": 31885, "creation_time": "2004-10-25T19:40:36Z", "is_private": false, "text": "The NetBeans IDE now uses Ant as its build engine and JUnit for unit testing,\nand we want to provide a progress bar UI when running unit tests like JUnit's\nSwing TestRunner.  To support this with the JUnitTask and JUnitTestRunner\nclasses in the optional JUnit task, we need for it to log the number of tests\nwhich will be run, as well as each test completion.  Unlike the normal test\noutput, these \"events\" should be logged as they occur, rather than batched. \nWith this support, we can attach a BuildListener and retrieve these log messages\nwithout the project's Ant files having to be modified.\n\nI'm attaching a patch that implements this change.  Since JUnitTestRunner needs\nto be able to be run either within Ant's process, a separate process or\nstandalone, the patch outputs the necessary events to System.out.  The stream\nforwarders in JUnitTestRunner and JUnitTask then filter out these messages and\nlog them in verbose mode.  This prevents the event text from changing any\nformatter or logged output text (except when run in verbose mode)."}, {"count": 1, "attachment_id": 13217, "creator": "tom.ball@sun.com", "is_private": false, "id": 65670, "time": "2004-10-25T19:41:23Z", "bug_id": 31885, "creation_time": "2004-10-25T19:41:23Z", "tags": [], "text": "Created attachment 13217\nProposed patch for this enhancement"}, {"count": 2, "tags": [], "text": "Created attachment 13540\nAdded TestListener event logging, useful for IDE integration.\n\nEnhanced the string prefix used to mark TestListener messages for logging; this\nsignificantly reduces the chance of a normal test output line getting logged. \nAlso fixed bug where messages were not being logged if the task was run\nunforked.", "attachment_id": 13540, "bug_id": 31885, "id": 67444, "time": "2004-11-25T07:09:57Z", "creator": "tom.ball@sun.com", "creation_time": "2004-11-25T07:09:57Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 31885, "attachment_id": 13541, "is_private": false, "id": 67445, "time": "2004-11-25T07:11:12Z", "creator": "tom.ball@sun.com", "creation_time": "2004-11-25T07:11:12Z", "text": "Created attachment 13541\nUnit test for the JUnitTask TestListener event logging."}, {"count": 4, "tags": [], "bug_id": 31885, "attachment_id": null, "id": 73014, "time": "2005-03-29T21:12:46Z", "creator": "jglick@apache.org", "creation_time": "2005-03-29T21:12:46Z", "is_private": false, "text": "I will apply it for Ant 1.7 at least. It could, I think, be merged to 1.6.3 if\n\n- no public API changes were made to support it in ANT_16_BRANCH (e.g. use\npackage-private access)\n\n- the diff were reworked to support that branch: I had to make a couple fixes to\nmake it apply against trunk, but there are even more rejected hunks in the branch"}, {"count": 5, "tags": [], "creator": "jglick@apache.org", "is_private": false, "text": "Checking in src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java;\n/home/cvs/ant/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTask.java,v\n <--  JUnitTask.java\nnew revision: 1.116; previous revision: 1.115\ndone\nChecking in\nsrc/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTestRunner.java;\n/home/cvs/ant/src/main/org/apache/tools/ant/taskdefs/optional/junit/JUnitTestRunner.java,v\n <--  JUnitTestRunner.java\nnew revision: 1.57; previous revision: 1.56\ndone\nRCS file:\n/home/cvs/ant/src/testcases/org/apache/tools/ant/taskdefs/optional/junit/JUnitTestListenerTest.java,v\ndone\nChecking in\nsrc/testcases/org/apache/tools/ant/taskdefs/optional/junit/JUnitTestListenerTest.java;\n/home/cvs/ant/src/testcases/org/apache/tools/ant/taskdefs/optional/junit/JUnitTestListenerTest.java,v\n <--  JUnitTestListenerTest.java\ninitial revision: 1.1\ndone\n", "id": 73015, "time": "2005-03-29T21:19:47Z", "bug_id": 31885, "creation_time": "2005-03-29T21:19:47Z", "attachment_id": null}]