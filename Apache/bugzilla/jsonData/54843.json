[{"count": 0, "tags": [], "creator": "cs@schulte.it", "text": "Upgrading from 1.8.4 to 1.9.0, I am getting:\n\njava.io.InvalidClassException: org.apache.tools.ant.Location; local class incompatible: stream classdesc serialVersionUID = -2242957035428169563, local class serialVersionUID = 1\n        at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:604)\n        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1601)\n        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)\n        at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1970)\n        at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1894)\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1777)\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)\n        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)\n\nduring deserialization of custom exception classes extending 'org.apache.tools.ant.BuildException'.\n\nThis is happening due to the addition of \n\nprivate static final long serialVersionUID = 1L;\n\nto class org.apache.tools.ant.Location.\n\nThe serial version UID of that class should be corrected.", "id": 166590, "time": "2013-04-13T23:19:41Z", "bug_id": 54843, "creation_time": "2013-04-13T23:19:41Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 54843, "attachment_id": null, "is_private": false, "id": 166919, "time": "2013-04-28T20:52:37Z", "creator": "antoine@apache.org", "creation_time": "2013-04-28T20:52:37Z", "text": "The private static final long  serialVersionUID = 1L was added between Ant 1.8.4 and Ant 1.9.0 in Revision 1375137 as part of a series of Java 5 updates.\n\nIt looks like this is a change which has broken some degree of compatibility between Ant 1.8.4 and Ant 1.9.0 but this is a one time change.\n\nThis change should have been documented in WHATSNEW and ReleaseNotes as a change that could break older environment.\n\nI will revert to the dev at ant.apache.org list to see whether we should close this bug report as WONTFIX - my personal inclination."}, {"count": 2, "tags": [], "bug_id": 54843, "attachment_id": null, "is_private": false, "id": 167002, "time": "2013-05-03T02:24:34Z", "creator": "antoine@apache.org", "creation_time": "2013-05-03T02:24:34Z", "text": "Quoting Conor MacNeill\n\n>Yes, I think WONTFIX is the correct approach.\n\n>I don't think we want to give any guarantees about compatibility of\n>object serializations across Ant versions. I think object\n>serialization is not really intended for long term object storage,\n>more just for object transmission.\n\n>Do we know why Ant objects are being serialized at all?\n\nClosing as WONTFIX."}, {"count": 3, "tags": [], "bug_id": 54843, "attachment_id": null, "is_private": false, "id": 167087, "time": "2013-05-08T09:24:27Z", "creator": "cs@schulte.it", "creation_time": "2013-05-08T09:24:27Z", "text": "> but this is a one time change.\n\nIt is a bug. There is no reason to use 1L as the serial version UID instead of the implicit serial version UID corresponding to this class for years.\n\nSeems like someone got rid of some warning about a missing serial version UID without understanding what that warning is about."}, {"count": 4, "tags": [], "bug_id": 54843, "text": "Can you bring up this discussion to the Ant developer's list.\nI would be afraid of hurting people who are using Ant 1.9.0 by removing this serial version uid.", "id": 167089, "time": "2013-05-08T09:51:20Z", "creator": "antoine@apache.org", "creation_time": "2013-05-08T09:51:20Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 54843, "attachment_id": null, "is_private": false, "id": 171984, "time": "2013-12-31T14:57:47Z", "creator": "bodewig@apache.org", "creation_time": "2013-12-31T14:57:47Z", "text": "I'm afraid it is too late to go back now after we had four (point-)releases using 1 as serialVersionUid - if we restore compatibility with 1.8.4 we break compatibility with 1.9.[0-3]."}]