[{"count": 0, "tags": [], "bug_id": 57935, "attachment_id": 32743, "is_private": false, "id": 183030, "time": "2015-05-19T07:25:23Z", "creator": "loisel.jerome@gmail.com", "creation_time": "2015-05-19T07:25:23Z", "text": "Created attachment 32743\nJMX to reproduce the issue\n\nI was undergoing tests on our AWS platform and JMeter was failing to query HTTPS CloudFront urls. The following exception happens when executing an HTTP Sampler with HC4 implementation:\n\n> javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n>\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:192)\n>\tat sun.security.ssl.Alerts.getSSLException(Alerts.java:154)\n>\tat sun.security.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:2011)\n>\tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1113)\n>\tat > sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1363)\n...\n\nAfter investigating more about this issue, i found out the bug is related to the Server Name Extension.\n\nHTTPClient 4.2.x sends the following handshake:\n\n> Thread Group 1-1, WRITE: TLSv1.2 Handshake, length = 207\n> Thread Group 1-1, READ: TLSv1.2 Alert, length = 2\n> Thread Group 1-1, RECV TLSv1.2 ALERT:  fatal, handshake_failure\n> Thread Group 1-1, called closeSocket()\n> Thread Group 1-1, handling exception: javax.net.ssl.SSLHandshakeException: > Received fatal alert: handshake_failure\n\nHTTPClient 3.1 which works fine, it sends the following handshake:\n\n> Extension server_name, server_name: [type=host_name (0), > value=d1lto7any9tcj3.cloudfront.net]\n> ***\n> Thread Group 1-1, WRITE: TLSv1.2 Handshake, length = 245\n> Thread Group 1-1, READ: TLSv1.2 Handshake, length = 61\n> *** ServerHello, TLSv1.2\n\nThe current version of JMeter's HttpClient (4.2.6) has a major SSL issue, it does not support SSL Server Name Extension (SNI):\nhttps://issues.apache.org/jira/browse/HTTPCLIENT-1119\n\nAs HTTPClient 3.1 will be discontinued and usage is discouraged, we should upgrade HTTPClient to the latest version to benefit bug fixes and improvements."}, {"text": "+1 for this issue.\n\nThis is also related to #57319.\n\nWhen trying to verify SNI handling behaviours in a proxy it would be better to be able to use supported versions than something that is approaching EOL.", "tags": [], "bug_id": 57935, "is_private": false, "count": 1, "id": 183474, "time": "2015-06-12T05:23:25Z", "creator": "william.law@bluereef.com.au", "creation_time": "2015-06-12T05:23:25Z", "attachment_id": null}, {"text": "Created attachment 33372\nTest plan to reproduce issue", "tags": [], "bug_id": 57935, "attachment_id": 33372, "count": 2, "id": 187103, "time": "2015-12-23T13:31:04Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2015-12-23T13:31:04Z", "is_private": false}, {"count": 3, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "text": "Author: \tpmouawad\nDate: \tWed Feb 17 10:47:40 2016 UTC (4 minutes, 21 seconds ago)\nNew revision : 1730810\n\nURL : http://svn.apache.org/viewvc?view=revision&revision=1730810\nChanged paths: \t3\nLog Message: \t\n\nBug 57935 - SSL SNI extension not supported by HttpClient 4.2.6\nBugzilla Id: 57935\n\nAdded:\njmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/JMeterClientConnectionOperator.java\n\nModified:\njmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/MeasuringConnectionManager.java\njmeter/trunk/xdocs/changes.xml", "id": 188496, "time": "2016-02-17T10:55:58Z", "bug_id": 57935, "creation_time": "2016-02-17T10:55:58Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 57935, "text": "Hi reporter, commenters,\nissue is fixed in nightly build (available tomorrow), your feedback is welcome.\nThanks", "id": 188497, "time": "2016-02-17T10:58:28Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2016-02-17T10:58:28Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 57935, "attachment_id": null, "id": 188728, "time": "2016-02-23T18:46:12Z", "creator": "loisel.jerome@gmail.com", "creation_time": "2016-02-23T18:46:12Z", "is_private": false, "text": "Hi Philippe,\n\nThanks for the fix, i tested Build #4986 and it works fine.\n\nBest regards,\nJerome Loisel"}]