[{"count": 0, "tags": [], "bug_id": 44343, "text": "Error occurs in the combination of <fo:inline> of font-size=\"smaller\"/\"bigger\" \nwithin <fo:block> of font-size in percentage. The error is \"getBaselength \ncalled without context\".\n  \n  <fo:block font-style=\"normal\" font-size=\"80%\" role=\"html:div\"\n    <fo:inline baseline-shift=\"super\" font-size=\"smaller\" \nrole=\"html:sup\">th</fo:inline>of each month. \n  </fo:block>\n\n=====Original Post on fop-users mailing list===========\nOn Feb 1, 2008, at 18:36, Li, Hao wrote:\n\n> You are right. The sample I posted actually works. I apologize not \n> recognizing the real problem. It is tricky and only occurs in the \n> combination of <fo:inline> of font-size=\"smaller\"/\"bigger\" within \n> <fo:block> of font-size in percentage:\n\nOK, now I see it too.\n\nI'll run it through the debugger, but already think I know what is going on. \nThe property resolution mechanism tries to resolve to smaller/larger font-\nsizes too early. Percentages are resolved (mostly\nanyway) during the layout-stage, where FOP tries to already resolve \nthe \"smaller\" keyword long before that.\n\nI haven't tried yet, but using em's could also lead to trouble in combination \nwith percentages, as in:\n\n<fo:block>\n   <fo:block font-size=\"80%\">\n     <fo:inline font-size=\"8em\">\n\n\nWill keep you posted.\n\nCheers\n\nAndreas", "id": 113347, "time": "2008-02-01T13:15:52Z", "creator": "lih@peacetech.com", "creation_time": "2008-02-01T13:15:52Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 44343, "attachment_id": null, "id": 113350, "time": "2008-02-01T14:24:03Z", "creator": "adelmelle@apache.org", "creation_time": "2008-02-01T14:24:03Z", "is_private": false, "text": "\nAlready had a quick look, and just one question. \nDoes FOP also hang on your end? FOP Trunk indeed shows the error you mention, then simply hangs \nhere... Seems like this is going to take some time figuring out."}, {"count": 2, "tags": [], "creator": "adelmelle@apache.org", "is_private": false, "id": 113352, "creation_time": "2008-02-01T14:38:47Z", "time": "2008-02-01T14:38:47Z", "bug_id": 44343, "text": "(In reply to comment #1)\n> ... Seems like this is going to take some time figuring out.\n\nI take that back. Already found the related piece of code.\n\nFor other interested parties: in case the parent's font-size is a percentage, the getValue() call in \nFontSizePropertyMaker.convertProperty() returns a base-size of 0. This case does not seem to be \ncatered for in the loop in computeClosestAbsoluteFontSize() a bit further below, which becomes infinite \nso the method never returns.\n\nIt seems like percentage font-sizes can already be resolved at parse-time. There seems to be no need \nto create PercentLengths and delay the resolution until the layout-context is available. I'm going to \ninvestigate this. In the meantime, if anyone has ideas or insights... always welcome.\n", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 44343, "text": "\nFixed in FOP Trunk.\n\nsee: http://svn.apache.org/viewvc?rev=617708&view=rev\n\nThanks for reporting.", "id": 113355, "time": "2008-02-01T15:32:14Z", "creator": "adelmelle@apache.org", "creation_time": "2008-02-01T15:32:14Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 44343, "attachment_id": null, "id": 156197, "time": "2012-04-01T07:04:03Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T07:04:03Z", "is_private": false, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed"}]