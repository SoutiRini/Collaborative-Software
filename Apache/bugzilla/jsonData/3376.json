[{"count": 0, "tags": [], "bug_id": 3376, "attachment_id": null, "text": "There appears to be a bug in \ndrawImage(Image,int,int,int,int,Color,ImageObserver), implemented in \nAbstractGraphics2D. The following function, when called on SVGGraphics2D:\n\nvoid paint(Graphics g) {\n            \n    // \"smiley.gif\" has size (16,16)\n    ImageIcon image1 = new ImageIcon(\"smiley.gif\");\n\n    // signature 1\n    g.drawImage(image1.getImage(), 10,10, 32,32, null);\n\n    // signature 2\n    g.drawImage(image1.getImage(), 60,10, 32,32, Color.red, null);\n\n}\n\n... results in the following being generated:\n\n<!--Generated by the Batik Graphics2D SVG Generator-->\n<defs id=\"genericDefs\" />\n<g>\n  <g>\n    <image x=\"10\" width=\"32\" y=\"10\" height=\"32\" \nxlink:href=\"data:image/png;base64,[b64 data skipped]\" />\n    <rect x=\"60\" y=\"10\" width=\"32\" style=\"fill:red; stroke:none;\" height=\"32\" />\n    <image width=\"16\" x=\"60\" height=\"16\" y=\"10\" \nxlink:href=\"data:image/png;base64,[b64 data skipped]\" />\n  </g>\n</g>\n\nThe first image element has its width and height set correctly, the second one \nhas not.\n\nAnalysis: drawImage with signature 2 is implemented in AbstractGraphics2D and \ncalls another drawImage, which is implemented in SVGGraphics2D. This other call \n*should* be signature 1, but currently isn't. The fix seems to be: just add \nwidth and height to the invocation there.\n\nPATCH:\n\n--- AbstractGraphics2D.java.orig     Wed Mar 21 10:37:15 2001\n+++ AbstractGraphics2D.java          Sun Sep  2 00:47:16 2001\n@@ -683,7 +683,7 @@\n         gc.setPaint(bgcolor);\n         fillRect(x, y, width, height);\n         gc.setPaint(paint);\n-        drawImage(img, x, y, observer);\n+        drawImage(img, x, y, width, height, observer);\n \n         return true;\n     }", "id": 5049, "time": "2001-09-03T01:11:24Z", "creator": "paul_evenblij@nl.compuware.com", "creation_time": "2001-09-03T01:11:24Z", "is_private": false}, {"count": 1, "tags": [], "creator": "vincent.hardy@sun.com", "attachment_id": null, "text": "Fixed as suggested, as shown by DrawImage test in \norg.apache.batik.svggen.DrawImage.java.\n\nbuild showpainter org.apache.batik.svggen.DrawImage\n\n", "id": 6158, "time": "2001-09-28T05:16:56Z", "bug_id": 3376, "creation_time": "2001-09-28T05:16:56Z", "is_private": false}]