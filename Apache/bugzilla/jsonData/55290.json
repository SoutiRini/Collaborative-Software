[{"count": 0, "tags": [], "creator": "matthias.bhend@swisscom.com", "text": "Created attachment 30611\npatch\n\nThe method org.apache.tools.ant.util.ResourceUtils#copyResource is not threadsafe. It will fail sometimes with the \"failed to create the parent directory\" - error message. The problem is the following statement:\n\n   if (parent != null && !parent.isDirectory()\n           && !destFile.getParentFile().mkdirs()) {\n           throw new IOException(\"failed to create the parent directory\"\n                                      + \" for \" + destFile);\n   }\n\nAssumption: Two threads \"A\" and \"B\" are trying to create a new directory \"X\".\nIf the thread \"B\" creates the directory \"X\" after thread \"A\" has already executed parent.isDirectory() but not destFile.getParentFile().mkdirs() then the execution of destFile.getParentFile().mkdirs() from thread \"A\" will throw a new IOException (false)....\n\nFix: \n  File parent = destFile.getParentFile();\n  if (parent != null && !parent.isDirectory()) {\n    \tparent.mkdirs();\n      \tif (!parent.exists()) {\n   \t  throw new IOException(\"failed to create the parent directory for \" + destFile);\t\n        }\n  }", "id": 168711, "time": "2013-07-22T12:47:02Z", "bug_id": 55290, "creation_time": "2013-07-22T12:47:02Z", "is_private": false, "attachment_id": 30611}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 171976, "time": "2013-12-31T11:37:24Z", "bug_id": 55290, "creation_time": "2013-12-31T11:37:24Z", "is_private": false, "text": "fixed with svn revision 1554403"}]