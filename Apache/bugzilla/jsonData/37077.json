[{"count": 0, "tags": [], "creator": "toralf.foerster@gmx.de", "attachment_id": null, "text": "Defining a DAVFS in /etc/apache2/modules.d/45_mod_dav.conf and creating the\nappropriate directories in a ramdisk of a size of 660 MB results  in the\nfollowing bug:\n\ntfoerste@n22 ~ $ df -m /mnt/ramdisk/dav/ /mnt/dav_n22/\nFilesystem           1M-blocks      Used Available Use% Mounted on\ntmpfs                      660         1       660   1% /mnt/ramdisk\n/dev/hda9                13684     10477      2512  81% /\n\n13 GB and 2.5 GB free ?!?\n\nHere are the definitions of the file systems:\ntfoerste@n22 ~ $ grep -e davfs@n22 -e /ramdisk /etc/fstab\ntmpfs                   /mnt/ramdisk    tmpfs           noauto,user,size=660M   0 0\nhttp://n22/davfs@n22/   /mnt/dav_n22    davfs           noauto,user,askauth     0 0\n\n\nThe bug results from wrong values of the statfs64-call I think:\n\ntfoerste@n22 ~ $  strace -e statfs64 df -m /mnt/ramdisk/dav/ /mnt/dav_n22/\nFilesystem           1M-blocks      Used Available Use% Mounted on\nstatfs64(\"/mnt/ramdisk\", 84, {f_type=0x1021994, f_bsize=4096, f_blocks=168960,\nf_bfree=168958, f_bavail=168958, f_files=129449, f_ffree=129442, f_fsid={0, 0},\nf_namelen=255, f_frsize=4096}) = 0\ntmpfs                      660         1       660   1% /mnt/ramdisk\nstatfs64(\"/\", 84, {f_type=\"EXT2_SUPER_MAGIC\", f_bsize=4096, f_blocks=3502925,\nf_bfree=820853, f_bavail=642910, f_files=1782368, f_ffree=1253799, f_fsid={0,\n0}, f_namelen=255, f_frsize=4096}) = 0\n/dev/hda9                13684     10477      2512  81% /\n\n\nHere is the definition if the davfs in the apache config file:\n\ntfoerste@n22 ~ $ cat /etc/apache2/modules.d/45_mod_dav.conf\n<IfDefine DAV>\n  <IfModule !mod_dav.c>\n    LoadModule dav_module    modules/mod_dav.so\n  </IfModule>\n</IfDefine>\n\n<IfDefine DAV_FS>\n  <IfModule !mod_dav_fs.c>\n    LoadModule dav_fs_module   modules/mod_dav_fs.so\n  </IfModule>\n</IfDefine>\n\n<IfModule mod_dav.c>\n\n    DavMinTimeout 600\n    Alias /davfs@n22 /mnt/ramdisk/dav/fs\n        <Location /davfs@n22>\n\n                Options None\n                Dav On\n                SVNAutoversioning on\n\n                <Limit GET OPTIONS PUT POST DELETE PROPFIND PROPPATCH MKCOL COPY\nMOVE LOCK UNLOCK>\n                        AuthType Basic\n                        AuthName \"WebDAV (ramdisk)\"\n                        AuthUserFile /mnt/ramdisk/dav/conf/davpasswd\n                        Require valid-user\n                </Limit>\n\n                AllowOverride None\n                Order deny,allow\n                Deny from all\n                Allow from 127.0.0.1 192.168.0.2/24\n        </Location>\n\n</IfModule>\n\n<IfModule mod_dav_fs.c>\n\n    # Location of the WebDAV lock database.\n    DavLockDB /mnt/ramdisk/dav/lib/lockdb\n\n</IfModule>", "id": 81132, "time": "2005-10-13T16:43:07Z", "bug_id": 37077, "creation_time": "2005-10-13T16:43:07Z", "is_private": false}, {"count": 1, "tags": [], "text": "Sorry, but davfs is not part of the httpd server it is a kernel module of your OS.\nBTW: Is it possible that /mnt/dav_n22/ is not mounted?", "is_private": false, "bug_id": 37077, "id": 81141, "time": "2005-10-13T17:27:40Z", "creator": "rpluem@apache.org", "creation_time": "2005-10-13T17:27:40Z", "attachment_id": null}]