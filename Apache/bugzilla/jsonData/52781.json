[{"count": 0, "tags": [], "bug_id": 52781, "attachment_id": null, "id": 154306, "time": "2012-02-28T06:24:56Z", "creator": "takatsuru.tetsuya@nttcom.co.jp", "creation_time": "2012-02-28T06:24:56Z", "is_private": false, "text": "Some browsers (IE, FF, Opera, etc...) uses raw filename for \"filename\" parameter of Content-Disposition header in the part of multipart post request.\n\nfor example:\n\n-----(bounary)-----\nContent-Disposition: form-data; name=\"uploadFile\"; filename=\"\u79c1\u306e\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb.txt\"\nContent-Type: text/plain\n\n... (content of file)\n-----(bounary)-----\n\nNow, the filename is changed to \"????????.txt\" regardless of \"browser compatible headers\" option:\n\n-----(bounary)-----\nContent-Disposition: form-data; name=\"uploadFile\"; filename=\"????????.txt\"\nContent-Type: text/plain\n\n... (content of file)\n-----(bounary)-----\n\nHowever, HTTPHC4Impl is expected to send request the same as browsers when \"browser compatible mode\" is checked.\n\nCharset is needed for constructor of MultipartEntity so that browser compatible mode works correctly.\nHere is a patch fixing it."}, {"count": 1, "tags": [], "creator": "takatsuru.tetsuya@nttcom.co.jp", "attachment_id": 28394, "id": 154307, "time": "2012-02-28T06:27:44Z", "bug_id": 52781, "creation_time": "2012-02-28T06:27:44Z", "is_private": false, "text": "Created attachment 28394\npatch on HTTPHC4Impl"}, {"count": 2, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Applied partly with fix when content encoding is empty or null.\nAlso fixed Test Case TestHTTPSamplersAgainstHttpMirrorServer that computed wrong boundary\n\n\nDate: Tue Feb 28 10:03:45 2012\nNew Revision: 1294541\n\nURL: http://svn.apache.org/viewvc?rev=1294541&view=rev\nLog:\nBug 52781 - Content-Disposition header garbled even if browser compatible headers is checked (HC4)\n\nModified:\n   jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java\n\nDate: Tue Feb 28 12:03:41 2012\nNew Revision: 1294596\n\nURL: http://svn.apache.org/viewvc?rev=1294596&view=rev\nLog:\nBug 52781 - Content-Disposition header garbled even if browser compatible headers is checked (HC4)\nHandle correctly null contentEncoding\n\nModified:\n   jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/sampler/HTTPHC4Impl.java\n\n\nDate: Tue Feb 28 12:05:02 2012\nNew Revision: 1294598\n\nURL: http://svn.apache.org/viewvc?rev=1294598&view=rev\nLog:\nBug 52781 - Content-Disposition header garbled even if browser compatible headers is checked (HC4)\nFixed wrong Boundary extraction\n\nModified:\n   jmeter/trunk/test/src/org/apache/jmeter/protocol/http/sampler/TestHTTPSamplersAgainstHttpMirrorServer.java", "id": 154318, "time": "2012-02-28T12:06:55Z", "bug_id": 52781, "creation_time": "2012-02-28T12:06:55Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "attachment_id": null, "id": 154322, "time": "2012-02-28T12:37:33Z", "bug_id": 52781, "creation_time": "2012-02-28T12:37:33Z", "is_private": false, "text": "Thanks for patch and clear submission."}]