[{"count": 0, "tags": [], "creator": "bclozel@pivotal.io", "attachment_id": null, "is_private": false, "id": 179292, "time": "2014-11-26T09:24:14Z", "bug_id": 57263, "creation_time": "2014-11-26T09:24:14Z", "text": "As part of my work (so not running this in production!), I'm testing the latest JDK8 early access versions.\n\n> java version \"1.8.0_40-ea\"\n> Java(TM) SE Runtime Environment (build 1.8.0_40-ea-b15)\n> Java HotSpot(TM) 64-Bit Server VM (build 25.40-b18, mixed mode)\n\nI get the following exception:\n\nUsing CATALINA_BASE:   /Users/bclozel/devtools/apache-tomcat-7.0.57\nUsing CATALINA_HOME:   /Users/bclozel/devtools/apache-tomcat-7.0.57\nUsing CATALINA_TMPDIR: /Users/bclozel/devtools/apache-tomcat-7.0.57/temp\nUsing JRE_HOME:        /Library/Java/JavaVirtualMachines/jdk1.8.0_40.jdk/Contents/Home\nUsing CLASSPATH:       /Users/bclozel/devtools/apache-tomcat-7.0.57/bin/bootstrap.jar:/Users/bclozel/devtools/apache-tomcat-7.0.57/bin/tomcat-juli.jar\nnov. 26, 2014 10:14:37 AM org.apache.catalina.startup.Bootstrap initClassLoaders\nGRAVE: Class loader creation threw exception\njava.lang.NoClassDefFoundError: sun/management/ExtendedPlatformComponent\n\tat java.lang.management.ManagementFactory.getPlatformMBeanServer(ManagementFactory.java:494)\n\tat org.apache.catalina.startup.Bootstrap.createClassLoader(Bootstrap.java:157)\n\tat org.apache.catalina.startup.Bootstrap.initClassLoaders(Bootstrap.java:90)\n\tat org.apache.catalina.startup.Bootstrap.init(Bootstrap.java:226)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:425)\n\n\nIn two different occasions:\n* when launching an embedded tomcat\n* or easier to reproduce, when shutting down a tomcat instance with tomcat/bin/shutdown.sh\n\nNote: I can't reproduce this issue on Tomcat 8.0.15"}, {"count": 1, "tags": [], "bug_id": 57263, "attachment_id": null, "id": 179293, "creation_time": "2014-11-26T09:39:26Z", "time": "2014-11-26T09:39:26Z", "creator": "bclozel@pivotal.io", "text": "Note: I can't reproduce this issue with Tomcat 8.0.15 standalone, but I can when using it in embedded mode.", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 57263, "is_private": false, "id": 179294, "time": "2014-11-26T10:05:46Z", "creator": "markt@apache.org", "creation_time": "2014-11-26T10:05:46Z", "tags": [], "text": "Looks like a JVM packaging bug on OSX:\nhttp://tomcat.markmail.org/thread/kpkgz6j6xofsuzi7\n\nThis is one for Apple."}, {"count": 3, "tags": [], "creator": "bclozel@pivotal.io", "attachment_id": null, "id": 179296, "time": "2014-11-26T10:11:41Z", "bug_id": 57263, "creation_time": "2014-11-26T10:11:41Z", "is_private": false, "text": "Thanks, missed that message in the ML..."}, {"text": "I just got the same thing under linux.\n\ntc@8208c76bea75:/tomcat# bin/catalina.sh run\nUsing CATALINA_BASE:   /tomcat\nUsing CATALINA_HOME:   /tomcat\nUsing CATALINA_TMPDIR: /tomcat/temp\nUsing JRE_HOME:        /jre1.8.0_40\nUsing CLASSPATH:       /tomcat/bin/bootstrap.jar:/tomcat/bin/tomcat-juli.jar\n28-Nov-2014 09:48:16.029 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version: Apache Tomcat/8.0.14\n28-Nov-2014 09:48:16.031 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:   Sep 24 2014 09:01:51\n28-Nov-2014 09:48:16.031 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server number:  8.0.14.0\n28-Nov-2014 09:48:16.032 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:        Linux\n28-Nov-2014 09:48:16.032 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:     3.10.53-56.140.amzn1.x86_64\n28-Nov-2014 09:48:16.033 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:   amd64\n28-Nov-2014 09:48:16.033 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:    1.8.0_40-ea-b15\n28-Nov-2014 09:48:16.041 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:     Oracle Corporation\n28-Nov-2014 09:48:17.664 SEVERE [main] org.apache.tomcat.util.digester.Digester.startElement Begin event threw error\n java.lang.NoClassDefFoundError: sun/management/ExtendedPlatformComponent\n\tat java.lang.management.ManagementFactory.getPlatformMBeanServer(ManagementFactory.java:494)\n\tat org.apache.tomcat.util.modeler.Registry.getMBeanServer(Registry.java:443)\n\tat org.apache.catalina.mbeans.MBeanUtils.createServer(MBeanUtils.java:580)\n\tat org.apache.catalina.mbeans.MBeanUtils.<clinit>(MBeanUtils.java:77)", "tags": [], "bug_id": 57263, "is_private": false, "count": 4, "id": 179342, "time": "2014-11-28T09:53:44Z", "creator": "koen.serry@gmail.com", "creation_time": "2014-11-28T09:53:44Z", "attachment_id": null}, {"count": 5, "tags": [], "text": "OK. That makes it an Oracle problem then.", "attachment_id": null, "bug_id": 57263, "id": 179343, "time": "2014-11-28T10:00:21Z", "creator": "markt@apache.org", "creation_time": "2014-11-28T10:00:21Z", "is_private": false}]