[{"count": 0, "attachment_id": null, "bug_id": 56925, "text": "Consider the following setup for a reverse proxy. \n\nProxyRequests Off\nProxyErrorOverride On\nProxyPass /error !\nErrorDocument 500 /error/500.html\n\nProxyPass / balancer://cluster/ nocanon\nProxyPassReverse / balancer://cluster/\n\n<Proxy balancer://cluster>\n    BalancerMember http://localhost:9001 route=node0 keepalive=On ping=3 retry=60 loadfactor=100\n    BalancerMember http://localhost:9011 route=node1 keepalive=On ping=3 retry=60 loadfactor=100\n\n    ProxySet stickysession=JSESSIONID|jsessionid lbmethod=byrequests timeout=90 nofailover=On\n</Proxy>\n\nIf I generate a request for a buggy page that causes a 500 error, the worker would be put in error state for one minute according to the retry parameter, regardless if subsequent requests are successful. \n\nHowever, if I switch ProxyErrorOverride to Off, the worker would not be put in error state after a request that generates a 500 error, and other clients can still use the same worker.\n\nBased on the documentation, if the failonstatus does not contain the 500 status code the worker should not be put in error state in case of a single request generating a 500 error.", "id": 177613, "time": "2014-09-08T05:09:19Z", "creator": "cristian.httpd@gmail.com", "creation_time": "2014-09-08T05:09:19Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 56925, "attachment_id": null, "text": "Hi, is there an update on this ticket? It would be nice to know if it is confirmed as an issue or not.", "id": 181903, "time": "2015-03-19T00:21:52Z", "creator": "cristian.httpd@gmail.com", "creation_time": "2015-03-19T00:21:52Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 56925, "attachment_id": null, "text": "I can confirm this issue for 2.4.12, came here for the same reason. (With ProxyErrorOverride, worker is put in error state for 500 responses, without ProxyErrorOverride, it is not.)", "id": 182327, "time": "2015-04-13T07:17:13Z", "creator": "s9flschr@stud.uni-saarland.de", "creation_time": "2015-04-13T07:17:13Z", "is_private": false}, {"count": 3, "attachment_id": 32648, "bug_id": 56925, "text": "Created attachment 32648\ntrunk: don't put the backend in error state (by default) when 500/503 is overridden\n\nThis can be forced by failonstatus, but can't be the default for overridden errors since those come from the backend (and not the scheme_handler).", "id": 182339, "time": "2015-04-13T21:27:33Z", "creator": "ylavic.dev@gmail.com", "creation_time": "2015-04-13T21:27:33Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 56925, "attachment_id": 32649, "id": 182340, "time": "2015-04-13T21:30:54Z", "creator": "ylavic.dev@gmail.com", "creation_time": "2015-04-13T21:30:54Z", "is_private": false, "text": "Created attachment 32649\n2.4.x: don't put the backend in error state (by default) when 500/503 is overridden\n\nSame against 2.4.x.\n\nCan you please test one of these patches (easiest for you) and report if it works as expected?"}, {"count": 5, "tags": [], "bug_id": 56925, "attachment_id": null, "id": 183108, "time": "2015-05-26T14:21:58Z", "creator": "ylavic.dev@gmail.com", "creation_time": "2015-05-26T14:21:58Z", "is_private": false, "text": "Committed in r1681694 (backport proposed in r1681765)."}, {"count": 6, "attachment_id": null, "bug_id": 56925, "text": "Hello Yann,\nThank you for fixing this. I tested your fix and it appears to work fine for mod_proxy_http. Can you please fix the same issue for mod_proxy_ajp as well and provide a patch?", "id": 183300, "time": "2015-06-03T09:13:41Z", "creator": "cristian.httpd@gmail.com", "creation_time": "2015-06-03T09:13:41Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "creator": "ylavic.dev@gmail.com", "attachment_id": null, "id": 183303, "time": "2015-06-03T09:38:02Z", "bug_id": 56925, "creation_time": "2015-06-03T09:38:02Z", "is_private": false, "text": "Thanks for testing.\n\nThe AJP part was done in r1682907 and the whole backported to 2.4.13 in r1683112."}, {"count": 8, "tags": [], "bug_id": 56925, "attachment_id": null, "id": 183313, "time": "2015-06-03T20:40:10Z", "creator": "cristian.httpd@gmail.com", "creation_time": "2015-06-03T20:40:10Z", "is_private": false, "text": "Thank you for all the help, I will try to cherry pick it unless 2.4.13 comes soon. Do you know when 2.4.13 will be released ?"}, {"count": 9, "tags": [], "bug_id": 56925, "text": "Possibly (probably) next week.", "id": 183314, "time": "2015-06-03T22:13:00Z", "creator": "ylavic.dev@gmail.com", "creation_time": "2015-06-03T22:13:00Z", "is_private": false, "attachment_id": null}]