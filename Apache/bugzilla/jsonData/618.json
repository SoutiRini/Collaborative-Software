[{"count": 0, "tags": [], "bug_id": 618, "attachment_id": null, "id": 706, "creation_time": "2001-02-15T09:03:05Z", "time": "2001-02-15T09:03:05Z", "creator": "aboyett@gollaborate.com", "text": "Other than setting JAVA_HOME and TOMCAT_HOME, I have changed nothing in the \nconfiguration files that I downloaded with 4.0 milestone 5. I am running it in \nstandalone mode. I've been testing extensively with the JSPs using the \"new\" \nXML syntax of JSP 1.2. The use of the <jsp:params> and <jsp:include> tags are \nthe only XML syntax elements that appear to be \"broken,\" and I've encountered \nno other errors other than what you see below, which is consistent and \npersistent:\n\nthis jsp in \"standard\" syntax works:\n\n<jsp:plugin type=\"applet\" code=\"Button.class\" >\n   <jsp:params>\n\t<jsp:param name=\"Background\" value=\"background1.jpg\" />\n\t<jsp:param name=\"Image1\" value=\"button1.gif\" />\n   </jsp:params>\n</jsp:plugin>\n\n\nBut this jsp in XML syntax throws a servlet exception (see below):\n<jsp:root>\n<jsp:plugin type=\"applet\" code=\"Button.class\" >\n   <jsp:params>\n\t<jsp:param name=\"Background\" value=\"background1.jpg\" />\n\t<jsp:param name=\"Image1\" value=\"button1.gif\" />\n   </jsp:params>\n</jsp:plugin>\n</jsp:root>\n\nThe second example works just fine if I take *out* the jsp:params tags.\nSeems like it should work the same whether I am in standard syntax or XML\nsyntax.\n\nWhile we're on the topic . . . this works:\n\n<jsp:include page=\"foo.jsp\" flush=\"true\" />\n\nbut this does not (same exception):\n<jsp:root>\n<jsp:include page=\"foo.jsp flush=\"true\" />\n</jsp:root>\n\nIt does not matter if the included page is in standard or XML syntax -- it\nalways works correctly if the container page is standard syntax and never works \nif the container page is XML syntax (assuming, of course, that the included \npage does not attempt to use <jsp:params> or <jsp:include>). I entered this \nas \"normal\" but it is \"major\" for me because I am interested in developing JSPs \nexclusively using the XML syntax defined in JSP 1.2 spec. Thanks for looking \ninto this. Error report below . . .\n\nException Report:\norg.apache.jasper.JasperException: \norg.apache.jasper.compiler.ParserXJspSaxHandler$Node\n\tat org.apache.jasper.compiler.ParserXJspSax.parse\n(ParserXJspSax.java:199)\n\tat org.apache.jasper.compiler.ParserController.parse\n(ParserController.java:212)\n\tat org.apache.jasper.compiler.ParserController.parse\n(ParserController.java:165)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:193)\n\tat org.apache.jasper.servlet.JspServlet.doLoadJSP(JspServlet.java:464)\n\tat org.apache.jasper.servlet.JasperLoader12.loadJSP\n(JasperLoader12.java:146)\n\tat org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:435)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary\n(JspServlet.java:156)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:168)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:314)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:393)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:208)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:251)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:977)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:196)\n\tat org.apache.catalina.valves.ValveBase.invokeNext(ValveBase.java:242)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:443)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:975)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2038)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:161)\n\tat org.apache.catalina.valves.ValveBase.invokeNext(ValveBase.java:242)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:414)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:975)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:159)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:977)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:811)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:890)\n\tat java.lang.Thread.run(Thread.java:484)\n\nRoot Cause:\njava.lang.ClassCastException: \norg.apache.jasper.compiler.ParserXJspSaxHandler$Node\n\tat org.apache.jasper.compiler.ParserXJspSaxHandler.endElement\n(ParserXJspSaxHandler.java:382)\n\tat org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1490)\n\tat org.apache.crimson.parser.Parser2.content(Parser2.java:1695)\n\tat org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1461)\n\tat org.apache.crimson.parser.Parser2.content(Parser2.java:1695)\n\tat org.apache.crimson.parser.Parser2.maybeElement(Parser2.java:1461)\n\tat org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:499)\n\tat org.apache.crimson.parser.Parser2.parse(Parser2.java:304)\n\tat org.apache.crimson.parser.XMLReaderImpl.parse(XMLReaderImpl.java:433)\n\tat org.apache.jasper.compiler.ParserXJspSax.parse\n(ParserXJspSax.java:180)\n\tat org.apache.jasper.compiler.ParserController.parse\n(ParserController.java:212)\n\tat org.apache.jasper.compiler.ParserController.parse\n(ParserController.java:165)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:193)\n\tat org.apache.jasper.servlet.JspServlet.doLoadJSP(JspServlet.java:464)\n\tat org.apache.jasper.servlet.JasperLoader12.loadJSP\n(JasperLoader12.java:146)\n\tat org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:435)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary\n(JspServlet.java:156)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:168)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:314)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:393)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:208)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:251)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:977)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:196)\n\tat org.apache.catalina.valves.ValveBase.invokeNext(ValveBase.java:242)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:443)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:975)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2038)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:161)\n\tat org.apache.catalina.valves.ValveBase.invokeNext(ValveBase.java:242)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:414)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:975)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:159)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:977)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:811)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:890)\n\tat java.lang.Thread.run(Thread.java:484)", "is_private": false}, {"count": 1, "tags": [], "text": "Sorry, I forgot that I'd had similar problems with <jsp:forward> . . . it \nthrows the same exception.\nThis works:\n<jsp:forward page = \"foo.jsp\" />\nBut this does not:\n<jsp:root>\n<jsp:forward page = \"foo.jsp\" />\n</jsp:root>\n\n-Amy", "attachment_id": null, "bug_id": 618, "id": 707, "time": "2001-02-15T09:11:50Z", "creator": "aboyett@gollaborate.com", "creation_time": "2001-02-15T09:11:50Z", "is_private": false}, {"count": 2, "tags": [], "text": "Fixed jsp xml syntax handling in Tomcat 4.0. The </jsp:params> end tag wasn't\nhandled properly.\n\nI tried both the forward and include examples using the xml syntax and both\nworked correctly in the latest version of Tomcat 4.0.", "is_private": false, "bug_id": 618, "id": 1654, "time": "2001-03-30T14:34:11Z", "creator": "justyna.horwat@sun.com", "creation_time": "2001-03-30T14:34:11Z", "attachment_id": null}]