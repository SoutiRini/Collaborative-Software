[{"count": 0, "tags": [], "bug_id": 57020, "attachment_id": 32057, "id": 178117, "time": "2014-09-25T18:03:24Z", "creator": "jesper@jdj-it.com", "creation_time": "2014-09-25T18:03:24Z", "is_private": false, "text": "Created attachment 32057\nLog file\n\nI have a very simple (almost empty, I'm just starting a project) Java webapp that uses the Servlet 3.1 API.\n\nI currently have a single JSP with only static HTML code.\n\nWhen I deply and run my webapp on Tomcat 8.0.12, I get a compile error in the JSP. Note: This works correctly on Tomcat 8.0.11. It seems to be an issue introduced in 8.0.12.\n\n25-Sep-2014 19:53:14.726 SEVERE [http-nio-8080-exec-1] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet jsp threw exception\n org.apache.jasper.JasperException: Unable to compile class for JSP: \n\nAn error occurred at line: [42] in the generated java file: [C:\\Users\\Jesper\\.IntelliJIdea13\\system\\tomcat\\Unnamed_spring-webmvc-thymeleaf_3\\work\\Catalina\\localhost\\ROOT\\org\\apache\\jsp\\WEB_002dINF\\jsp\\welcome_jsp.java]\nThe method getDispatcherType() is undefined for the type HttpServletRequest\n\nStacktrace:\n\tat org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:103)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:199)\n\tat org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:446)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:361)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:336)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:323)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:564)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:335)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:725)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:721)\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:466)\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:391)\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:318)\n\tat org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:172)\n\tat org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:303)\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1228)\n\tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1011)\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:955)\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:877)\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:961)\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:852)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:618)\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:837)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:725)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:219)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:505)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n\tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:610)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:534)\n\tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1081)\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:658)\n\tat org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:222)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1566)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1523)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\tat java.lang.Thread.run(Thread.java:745)"}, {"count": 1, "tags": [], "bug_id": 57020, "attachment_id": 32058, "is_private": false, "id": 178118, "time": "2014-09-25T18:05:14Z", "creator": "jesper@jdj-it.com", "creation_time": "2014-09-25T18:05:14Z", "text": "Created attachment 32058\nJSP Java file"}, {"count": 2, "tags": [], "bug_id": 57020, "attachment_id": null, "id": 178119, "time": "2014-09-25T18:17:10Z", "creator": "markt@apache.org", "creation_time": "2014-09-25T18:17:10Z", "is_private": false, "text": "You have a problem with your dev environment. This doesn't happen with a clean Tomcat install and HttpServletRequest.getDispatcherType() is a valid method."}, {"count": 3, "tags": [], "bug_id": 57020, "attachment_id": null, "id": 178120, "creation_time": "2014-09-25T18:46:51Z", "time": "2014-09-25T18:46:51Z", "creator": "jesper@jdj-it.com", "text": "I know that HttpServletRequest.getDispatcherType() is a valid method, it's a new method in the Servlet 3.0 API.\n\nI created a new project with a minimal setup to try to reproduce the problem, but it now works as expected. I threw away my IDE-specific project files and re-imported the project from the Maven pom.xml, and threw away the Tomcat configurations in IntelliJ.\n\nThe problem went away.\n\nApparently there was indeed something wrong with my development environment setup.\n\nThanks and sorry for the inconvenience.", "is_private": false}, {"count": 4, "tags": [], "bug_id": 57020, "attachment_id": null, "is_private": false, "id": 178221, "time": "2014-10-02T07:30:38Z", "creator": "pavelcibulka@gmail.com", "creation_time": "2014-10-02T07:30:38Z", "text": "I have same problem with package:\n\n                            <dependency>\n                                <groupId>javax.servlet.jsp.jstl</groupId>\n                                <artifactId>jstl-api</artifactId>\n                                <version>1.2-rev-1</version>\n                                <exclusions>\n                                    <exclusion>\n                                        <groupId>javax.servlet</groupId>\n                                        <artifactId>servlet-api</artifactId>\n                                    </exclusion>\n                                    <exclusion>\n                                        <groupId>javax.servlet.jsp</groupId>\n                                        <artifactId>jsp-api</artifactId>\n                                    </exclusion>\n                                </exclusions>\n                            </dependency>\n\nI have changed version to <version>1.2</version> and it is working fine now."}]