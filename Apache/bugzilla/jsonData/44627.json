[{"attachment_id": 21678, "tags": [], "creator": "flester@gmail.com", "text": "Created attachment 21678\nsvn diff text for POILogFactory thread safety issue\n\nPOILogFactory is not threadsafe and even with the default NullLogger I am getting JVM lockups in a multi-threaded environment. Since the POILogger property is really only used for debugging POI itself according to the docs, I provide a patch that makes the default (i.e. no logger specified) operation thread safe.\nAlternatively the entire mechanism could be made threadsafe by switching the map in POILogFactory from a HashMap to a Hashtable, or synchronizing the getLogger method. Since it is rarely used, that seemed a little heavy handed to propose initially.\n\nThe patch is svn diff text. The only file modified is POILogFactory.", "count": 0, "id": 114711, "time": "2008-03-18T09:05:12Z", "bug_id": 44627, "creation_time": "2008-03-18T09:05:12Z", "is_private": false}, {"count": 1, "tags": [], "text": "Thanks for the patch. I've ended up applying something slightly similar, as shifting the environment variable fetching back to class initialisation did break some things. Hopefully it now works just fine for you.\n\nI believe the new version is now completely thread safe when using NullLogger. The rest ought to be thread safe, but not always thread efficient (as it's possible that two thread will both create their own loggers for something, but one overwrites the others)", "attachment_id": null, "id": 114741, "creator": "apache@gagravarr.org", "time": "2008-03-19T05:51:00Z", "bug_id": 44627, "creation_time": "2008-03-19T05:51:00Z", "is_private": false}]