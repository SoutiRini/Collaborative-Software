[{"count": 0, "tags": [], "bug_id": 33412, "attachment_id": null, "id": 70551, "time": "2005-02-06T03:38:06Z", "creator": "andre.fuegenschuh@gmx.de", "creation_time": "2005-02-06T03:38:06Z", "is_private": false, "text": "Some trouble with create/update an archive using 'defaultexcludes'.\n\nGuess the following directory structure:\n\ndomain/SomeGeneralFile\ndomain/project/build.xml                (s. b.)\ndomain/project/package/SomeSourceFile\ndomain/project/package/SomeSourceFile~  (a backup file)\n\nand an ant build file with two targets (s. b.) creating the projects archive and\nsubsequently updating it with some general files from 'domain/'.\n\nThe first step works fine using the 'defaultexcludes=\"yes\"' attribute, the \nbackup file (SomeSourceFile~) is included. But running the second step, \nupdating this archive, the backup file is lost/removed.\n\nIncluding the original fileset has no impact, but using the \nglobal 'defaultexcludes' task (since Ant 1.6.0) will make it work (s. b.).\n\nThe question is: is it a bug or 'works as intended/designed'?\n\nIf the latter, especially using the 'defaultexcludes' task, it will be helpful \nto have some comment lines and/or a sample in the documentation.\n\nOUTPUT:\ncreate.jar:\n      [jar] Building jar: MyArchive.jar\n      [jar] adding directory META-INF/\n      [jar] adding entry META-INF/MANIFEST.MF\n      [jar] adding entry build.xml\n      [jar] adding directory package/\n      [jar] adding entry package/SomeSourceFile\n      [jar] adding entry package/SomeSourceFile~\n\nupdate.jar:\n      [jar] project added as project doesn't exist.\n      [jar] SomeGeneralFile added as SomeGeneralFile doesn't exist.\n      [jar] Updating jar: MyArchive.jar\n      [jar] adding directory META-INF/\n      [jar] adding entry META-INF/MANIFEST.MF\n      [jar] adding directory project/\n      [jar] adding entry SomeGeneralFile\n      [jar] adding directory package/\n      [jar] adding entry build.xml\n      [jar] adding entry package/SomeSourceFile\n\n<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<project name=\"AntBuildTest\">\n\n  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->\n  <target name=\"create.jar\">\n\n    <jar destfile=\"MyArchive.jar\">\n\n      <fileset dir=\"domain/project\"\n               includes=\"**\"\n               defaultexcludes=\"no\"/>\n    </jar>\n  </target>\n\n  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->\n  <target name=\"update.jar\">\n    <!-- Set/reset the global 'defaultexcludes' will make it work! -->\n    <!--defaultexcludes remove=\"**/*~\"/-->\n\n    <jar destfile=\"MyArchive.jar\"\n         update=\"true\"\n         defaultexcludes=\"no\">\n\n      <fileset dir=\"domain\"\n               includes=\"*\"\n               defaultexcludes=\"no\"/>\n\n      <!-- Including the original fileset has no impact. -->\n      <!--fileset dir=\"domain/project\"\n               includes=\"**\"\n               defaultexcludes=\"no\"/-->\n    </jar>\n\n    <!--defaultexcludes default=\"true\"/-->\n  </target>\n\n</project>"}, {"count": 1, "tags": [], "bug_id": 33412, "attachment_id": null, "text": "please verify the problem has been fixed with a nightly build of 2005-02-19 or\nlater.", "id": 71167, "time": "2005-02-18T13:24:06Z", "creator": "bodewig@apache.org", "creation_time": "2005-02-18T13:24:06Z", "is_private": false}]