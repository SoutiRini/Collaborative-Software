[{"count": 0, "tags": [], "creator": "tony@bci.gb.com", "attachment_id": null, "id": 29186, "time": "2003-01-11T13:43:57Z", "bug_id": 15995, "creation_time": "2003-01-11T13:43:57Z", "is_private": false, "text": "The command passed by cvstagdiff to cvs when using the startdate and enddate \nattributes is incorrect when using a cvs date formatted as \"dd-MM-yy hh:mm:ss\". \nThe command passed to cvs does not take into account the consequences of the \nspace separating the two portions of the date/time value. The command passed to \ncvs is:\n\ncvs rdiff -s -D 2003-01-10 12:15:19 -D 2003-01-10 14:50:31 <package>\n\nwhen it should be:\n\ncvs rdiff -s -D '2003-01-10 12:15:19' -D '2003-01-10 14:50:31' <package>\n\nWith the incorrect form of the command, cvs reports (via the ant log.xml file) \nthat '12:15:19' '-D' '2003-01-10' and '14:50:31' are unknown module names.\n\nOne workaround is to add the quotes in the startdate and enddate attributes \nvalue in the build.xml, but this is clumsy and not really obvious:\n\n<cvstagdiff startdate = \"'2003-01-10 12:15:19'\" ... etc\n\nA better fix is to correct the code in CvsTagDiff.java (lines 309 to 313 - in \nthe 'execute' method) from:\n\nString rdiff = \"rdiff -s \" +\n   (m_startTag != null ? (\"-r \" + m_startTag) : (\"-D \" + m_startDate))\n    + \" \"\n    + (m_endTag != null ? (\"-r \" + m_endTag) : (\"-D \" + m_endDate))\n    + \" \" + m_package;\n\nto:\n\nString rdiff = \"rdiff -s \" +\n   (m_startTag != null ? (\"-r \" + m_startTag) : (\"-D '\" + m_startDate + \"'\"))\n    + \" \"\n    + (m_endTag != null ? (\"-r \" + m_endTag) : (\"-D '\" + m_endDate + \"'\"))\n    + \" \" + m_package;\n\nI have tested this fix on a local build of Ant 1.5.1 (Windows 2000, Java 1.4) \nand the problem is cured. I'm not sure if this fix takes into account cvs \nrunning on different OSes."}, {"count": 1, "tags": [], "bug_id": 15995, "attachment_id": 6841, "text": "Created attachment 6841\ncode patch", "id": 38874, "time": "2003-06-15T18:50:05Z", "creator": "rob@springwellfarms.ca", "creation_time": "2003-06-15T18:50:05Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 15995, "is_private": false, "id": 38875, "time": "2003-06-15T18:52:04Z", "creator": "rob@springwellfarms.ca", "creation_time": "2003-06-15T18:52:04Z", "tags": [], "text": "Changed version to 1.6Alpha since that's where I fixed it.\n\nPlease verify this on the main trunk once the patch is committed. Don't know \nif we want to apply this to the 1.5.x branch as well."}, {"count": 3, "tags": [], "creator": "levylambert@tiscali-dsl.de", "attachment_id": null, "id": 38880, "time": "2003-06-15T19:41:56Z", "bug_id": 15995, "creation_time": "2003-06-15T19:41:56Z", "is_private": false, "text": "patch submitted, thanks.\nI do not know if and when there will be a new 1.5.x version. \nMy understanding is that the next ant version will be ant 1.6"}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "text": "*** Bug 24282 has been marked as a duplicate of this bug. ***", "id": 46676, "time": "2003-11-03T15:11:02Z", "bug_id": 15995, "creation_time": "2003-11-03T15:11:02Z", "is_private": false, "attachment_id": null}]