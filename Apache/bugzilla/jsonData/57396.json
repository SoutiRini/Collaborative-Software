[{"count": 0, "tags": [], "creator": "1279962985@qq.com", "attachment_id": 32332, "id": 180023, "time": "2014-12-25T02:23:59Z", "bug_id": 57396, "creation_time": "2014-12-25T02:23:59Z", "is_private": false, "text": "Created attachment 32332\nThe debug info\n\nBrowser <---> https <---> Nginx <---> http <---> Tomcat\n\nAbove is the structure that I use, and I use org.apache.catalina.filters.RemoteIpFilter to get the real ip and scheme.\nBut when I use the getRequestURL() method to get the url in the user's browser, it returns a incorrect scheme.\nFor example, in user's browser, the location is https://www.example.com/foo/bar , but the getRequestURL() method returns http://www.example.com/foo/bar ."}, {"count": 1, "tags": [], "text": "Bugzilla is not a support forum. Please post your question on the Tomcat users list: http://tomcat.apache.org/lists.html.\n\nA look at http://tomcat.apache.org/tomcat-7.0-doc/config/http.html might help you, especially check the \"scheme\" and \"secure\" attributes. You might also be interested in \"proxyName\" and \"proxyPort\".\n\nPlease direct further questions to the users list.", "attachment_id": null, "bug_id": 57396, "id": 180024, "time": "2014-12-25T16:35:37Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2014-12-25T16:35:37Z", "is_private": false}]