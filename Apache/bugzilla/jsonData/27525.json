[{"count": 0, "tags": [], "bug_id": 27525, "attachment_id": null, "id": 53684, "time": "2004-03-08T21:55:35Z", "creator": "dkalkar@hutchison.com.au", "creation_time": "2004-03-08T21:55:35Z", "is_private": false, "text": "Hello,\ni am trying to startssl on Sun-sparc Solaris 9 machine with Apache2.0.48\nIt gives the follwing error.\n\n[Tue Mar 09 19:40:37 2004] [crit] [Tue Mar 09 19:40:37 2004] file vhost.c, line \n232, assertion \"rv == APR_SUCCESS\" failed\nAbort - core dumped\n\nit works fine with \"start\" option.\ni have installed the Sun recommened Patch cluster.\n\nCan u suggest something.\n\nRegards,\nDheerajk."}, {"count": 1, "tags": [], "bug_id": 27525, "text": "Just to verify that we know which getaddrinfo call is failing, please try the\ntest program gawild.c, which I'll attach in a sec.  It *should* run like this:\n\n[trawick@sol9 platform_test]$ gcc -Wall -o gawild gawild.c -lsocket -lnsl\n[trawick@sol9 platform_test]$ ./gawild \nit worked\n[trawick@sol9 platform_test]$", "id": 53685, "time": "2004-03-08T22:06:12Z", "creator": "trawick@apache.org", "creation_time": "2004-03-08T22:06:12Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": 10713, "creator": "trawick@apache.org", "text": "Created attachment 10713\ngetaddrinfo(255.255.255.255)", "id": 53686, "time": "2004-03-08T22:07:01Z", "bug_id": 27525, "creation_time": "2004-03-08T22:07:01Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 27525, "attachment_id": null, "text": "Please re-open bug when you get a chance to try attached program on the Solaris\nbox with the problem and report the results.  Thanks!\n", "id": 54326, "time": "2004-03-21T11:31:47Z", "creator": "trawick@apache.org", "creation_time": "2004-03-21T11:31:47Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 27525, "is_private": false, "text": "I have the same problem on Solaris 9, httpd 2.0.49. I tried the program and the \noutput is:\ngetaddrinfo->1\n\nAny clue?", "id": 56579, "time": "2004-04-28T21:26:59Z", "creator": "ncohen@ebsonline.com", "creation_time": "2004-04-28T21:26:59Z", "attachment_id": null}, {"count": 5, "attachment_id": null, "creator": "jlaidman@rebel-it.com.au", "text": "I've run the tool on two sun sparc systems with different results.\n\n  fwa$ ~/gawild\n  it worked\n  fwa$ uname -a\n  SunOS fwa 5.8 Generic_108528-23 sun4u sparc SUNW,Sun-Fire-480R\n\n  tii$ ~/gawild\n  getaddrinfo->1\n  fwa$ uname -a\n  SunOS tii 5.8 Generic_108528-23 sun4u sparc SUNW,Sun-Fire-V210\n\nI wouldn't expect it'd be a hardware issue.  As expected, apache runs fine on \none of them but not the other.\n", "id": 56846, "time": "2004-05-05T05:24:50Z", "bug_id": 27525, "creation_time": "2004-05-05T05:24:50Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "text": "In a different PR, it was suggested that it can fail when DNS is disabled but\nwork otherwise.  Is that possibly the case, or is there a difference in DNS\nsearch order between the two machines?\n\nI think we need to change APR to deal with this consistently.\n", "is_private": false, "bug_id": 27525, "id": 56856, "time": "2004-05-05T11:32:00Z", "creator": "trawick@apache.org", "creation_time": "2004-05-05T11:32:00Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 27525, "attachment_id": null, "text": "I can't find that PR now, but yes, this is reproducible when /etc/nsswitch.conf\nhas \"hosts: files\" not the normal \"hosts: files dns\".", "id": 56864, "time": "2004-05-05T13:17:52Z", "creator": "jorton@redhat.com", "creation_time": "2004-05-05T13:17:52Z", "is_private": false}, {"count": 8, "attachment_id": null, "creator": "arieh.markel@sun.com", "text": "(In reply to comment #0)\n> Hello,\n> i am trying to startssl on Sun-sparc Solaris 9 machine with Apache2.0.48\n> It gives the follwing error.\n> \n> [Tue Mar 09 19:40:37 2004] [crit] [Tue Mar 09 19:40:37 2004] file vhost.c, line \n> 232, assertion \"rv == APR_SUCCESS\" failed\n> Abort - core dumped\n> \n> it works fine with \"start\" option.\n> i have installed the Sun recommened Patch cluster.\n> \n> Can u suggest something.\n> \n> Regards,\n> Dheerajk.\n\n(In reply to comment #7)\n> I can't find that PR now, but yes, this is reproducible when /etc/nsswitch.conf\n> has \"hosts: files\" not the normal \"hosts: files dns\".\n\nI verified that it also fails when:\n\n           hosts:     nis [NOTFOUND=return] files\n\nIt fails with:\n\n           hosts:     files nis [NOTFOUND=return] files\n\nIt works with:\n\n           hosts:     files dns nis [NOTFOUND=return] files", "id": 68202, "time": "2004-12-09T19:18:00Z", "bug_id": 27525, "creation_time": "2004-12-09T19:18:00Z", "tags": [], "is_private": false}, {"count": 9, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "is_private": false, "id": 69489, "time": "2005-01-10T16:57:21Z", "bug_id": 27525, "creation_time": "2005-01-10T16:57:21Z", "text": "Someone marked this as fixed; this case should at least be handled gracefully\nwithout an abort() so it's not really fixed."}, {"count": 10, "tags": [], "text": "This is a very annoying and unintuitive situation. We are using mod_ssl with\nApache 2.0.52 in Solaris 9/x86 and as we turned on the SSL it just occured and\nstarted dumping core. We also turned off the ServerName directive hoping that it\nwill make it go away but still continued.\n\nNeed some graceful error message at the least.", "attachment_id": null, "bug_id": 27525, "id": 70224, "time": "2005-01-28T13:59:22Z", "creator": "ant-venkatp@sneakemail.com", "creation_time": "2005-01-28T13:59:22Z", "is_private": false}, {"count": 11, "attachment_id": null, "creator": "jorton@redhat.com", "text": "*** Bug 21682 has been marked as a duplicate of this bug. ***", "id": 71527, "time": "2005-02-25T17:50:10Z", "bug_id": 27525, "creation_time": "2005-02-25T17:50:10Z", "tags": [], "is_private": false}, {"count": 12, "tags": [], "bug_id": 27525, "attachment_id": null, "text": "*** Bug 28537 has been marked as a duplicate of this bug. ***", "id": 71529, "time": "2005-02-25T17:53:57Z", "creator": "jorton@redhat.com", "creation_time": "2005-02-25T17:53:57Z", "is_private": false}, {"count": 13, "tags": [], "text": "This happens when the VirtualHost entry contains _default_.  If I change it to\nan actual IP it works!", "attachment_id": null, "bug_id": 27525, "id": 76812, "time": "2005-06-29T21:58:05Z", "creator": "luis@instantsys.com", "creation_time": "2005-06-29T21:58:05Z", "is_private": false}, {"count": 14, "attachment_id": null, "creator": "jorton@redhat.com", "text": "*** Bug 35646 has been marked as a duplicate of this bug. ***", "id": 78152, "time": "2005-08-05T14:41:11Z", "bug_id": 27525, "creation_time": "2005-08-05T14:41:11Z", "tags": [], "is_private": false}, {"count": 15, "tags": [], "bug_id": 27525, "is_private": false, "text": "*** Bug 36650 has been marked as a duplicate of this bug. ***", "id": 79932, "time": "2005-09-14T11:21:33Z", "creator": "jorton@redhat.com", "creation_time": "2005-09-14T11:21:33Z", "attachment_id": null}, {"count": 16, "tags": [], "text": "In 2.1.x the assert()s in vhost.c now fail gracefully with a configuration error\nfor cases where the system resolver is not configured properly.  Probably not\nworth a backport to 2.0.x since it's just an error case and relatively rare.", "is_private": false, "bug_id": 27525, "id": 81897, "time": "2005-10-28T17:32:07Z", "creator": "jorton@redhat.com", "creation_time": "2005-10-28T17:32:07Z", "attachment_id": null}, {"count": 17, "attachment_id": null, "creator": "jorton@redhat.com", "is_private": false, "id": 96763, "time": "2006-12-11T07:31:00Z", "bug_id": 27525, "creation_time": "2006-12-11T07:31:00Z", "tags": [], "text": "*** Bug 30901 has been marked as a duplicate of this bug. ***"}, {"count": 18, "tags": [], "bug_id": 27525, "is_private": false, "text": "*** Bug 30901 has been marked as a duplicate of this bug. ***", "id": 104518, "time": "2007-06-19T02:57:31Z", "creator": "jorton@redhat.com", "creation_time": "2007-06-19T02:57:31Z", "attachment_id": null}, {"count": 19, "tags": [], "text": "Regardsing this issue we find that if we change _default_ in the\nvirtualhostsetion of http.conf to an IP Address this issue does not happen.\nWhere does _default_ get it's address from (dns? etx/hosts?) ?? ", "attachment_id": null, "bug_id": 27525, "id": 110422, "time": "2007-11-12T05:06:50Z", "creator": "mickly@hotmail.com", "creation_time": "2007-11-12T05:06:50Z", "is_private": false}, {"count": 20, "attachment_id": null, "creator": "mickly@hotmail.com", "text": "On our server when we change _default_ to an IP Address it no longer core dumps,\nwhere does _default_ get populated from?\n", "id": 110423, "time": "2007-11-12T05:09:07Z", "bug_id": 27525, "creation_time": "2007-11-12T05:09:07Z", "tags": [], "is_private": false}, {"count": 21, "tags": [], "bug_id": 27525, "text": "This bug is indeed caused by a Solaris bug, namely by\nhttp://bugs.opensolaris.org/view_bug.do?bug_id=4944187\nwhich causes the getaddrinfo(\"255.255.255.255\",...) to fail.\n\nBug 4944187 is scheduled to be fixed in the following forthcoming Solaris 10\npatches:\n\n125553-03 SunOS 5.10: libnsl and nfsmapid patch\n125554-03 SunOS 5.10_x86: libnsl and nfsmapid patch\n\nThese two patches still have to pass the patch test cycle.", "id": 112945, "time": "2008-01-17T04:15:41Z", "creator": "thomas.dehn@sun.com", "creation_time": "2008-01-17T04:15:41Z", "is_private": false, "attachment_id": null}, {"count": 22, "attachment_id": null, "creator": "strube@physik3.gwdg.de", "text": "Even if the behaviour of Solaris getaddrinfo must be considered faulty, apache\ncould easily account for this misbehaviour, since the function find_adresses\ncomes in two versions in srclib/apr/network_io/unix/sockaddr.c, the first\ncalling call_resolver and, from there, getaddrinfo; the second treating\naddresses 0.0.0.0 and 255.255.255.255 specially and otherwise calling\ngethostbyname or gethostbyname_r. Thus, there is an simply way to fix this:\nin srclib/apr/configure, change the test address for getaddrinfo (line numbers\nfor httpd-2.2.8):\n@@ -46266,7 +46266,7 @@\n     memset(&hints, 0, sizeof(hints));\n     hints.ai_family = AF_UNSPEC;\n     hints.ai_socktype = SOCK_STREAM;\n-    error = getaddrinfo(\"127.0.0.1\", NULL, &hints, &ai);\n+    error = getaddrinfo(\"255.255.255.255\", NULL, &hints, &ai);\n     if (error) {\n         exit(1);\n     }\nThen the test would fail in faulty Solaris and the second version of\nfind_adresses be used.", "id": 113176, "time": "2008-01-28T01:52:28Z", "bug_id": 27525, "creation_time": "2008-01-28T01:52:28Z", "tags": [], "is_private": false}]