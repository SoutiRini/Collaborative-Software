[{"count": 0, "tags": [], "text": "Objects stored in HTTP Session should be serializable. Right now when you try \nto reload application (tomcat 5.5.8) you will get java.io.NotSerializableException.\n\nStack trace is\n\nWARN \norg.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/lenya].writeObject():1442\n - Cannot serialize sessionattribute org.apache.lenya.ac.Identity for session\n9E47AB9939F10F7A030B68CEC3039B8F\njava.io.NotSerializableException: org.apache.lenya.ac.World\n        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1075)\n        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:291)\n        at java.util.HashSet.writeObject(HashSet.java:254)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:890)\n        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1333)\n        at\njava.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1284)\n        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1073)\n        at\njava.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1369)\n        at\njava.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:380)\n        at org.apache.lenya.ac.Identity.writeObject(Identity.java:51)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:585)\n        at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:890)\n        at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1333)\n        at\njava.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1284)\n        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1073)\n        at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:291)\n        at\norg.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1436)\n        at\norg.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:911)\n        at\norg.apache.catalina.session.StandardManager.doUnload(StandardManager.java:516)\n        at\norg.apache.catalina.session.StandardManager.unload(StandardManager.java:462)\n        at\norg.apache.catalina.session.StandardManager.stop(StandardManager.java:664)\n\nand so on...\n\n\nSame exception for org.apache.lenya.ac.file.FileUser. Others will show when this \nwill be fixed. \n\nWithout this lenya cannot be run in a cluster. On systems with only one tomcat,\nsessions are lost.", "is_private": false, "bug_id": 34127, "id": 36434, "time": "2005-03-22T16:08:17Z", "creator": "M.Hankus@ce3.pl", "creation_time": "2005-03-22T16:08:17Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 34127, "attachment_id": null, "id": 32431, "time": "2005-03-22T16:52:58Z", "creator": "gregor@apache.org", "creation_time": "2005-03-22T16:52:58Z", "is_private": false, "text": "would you mind to send a patch?"}, {"count": 2, "tags": [], "text": "i applied your FileUser patch, and you mentioned that there are other areas\nwhere it throws errors. could you name them here?", "attachment_id": null, "id": 72903, "creator": "gregor@apache.org", "time": "2005-03-26T23:33:36Z", "bug_id": 34127, "creation_time": "2005-03-26T23:33:36Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 34127, "attachment_id": 14581, "id": 72959, "time": "2005-03-29T11:30:41Z", "creator": "M.Hankus@ce3.pl", "creation_time": "2005-03-29T11:30:41Z", "is_private": false, "text": "Created attachment 14581\nPatch making some classes serializable\n\nHere is a patch with some classes made serializable. \n\nIn o.a.l.ac.World I moved initialization of instance variable from getInstance\nto  \nstatic initializer.\n\nRight now session sometimes do serialize sometimes not. New exception is raised\n(see below). Object causing this exception is  not from lenya source, but I\ndon't know what to do about that. Is it a bug in Cocoon or maybe object does\nnot have to be stored in session ?? Any ideas what to do about that ?\n\nMirek\n\n\n1869394 2005-03-29 10:51:19,425 [http-8080-Processor23] WARN \norg.apache.catalina.core.ContainerBase.[Catalina].[localhost].\n[/len1].writeObject():1451  - Cannot serialize session attribute FOM JavaScript\nGLOBAL SCOPE/file:/opt/jakarta-tomcat-5.5.9/\nwebapps/len1/lenya/admin.xmap:24:35 for session\n4A754EE52F9E3E6AF53FF88F8BE5EC28\njava.io.NotSerializableException:\norg.apache.cocoon.components.flow.javascript.fom.CompilingClassLoader\n\tat\njava.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1075)\n\tat\njava.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1369)\n\tat\njava.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1341)\n\tat\njava.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1284)\n\tat\njava.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1073)\n\tat\njava.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1369)\n\tat\njava.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1341)\n\tat\njava.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1284)\n\tat\njava.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1073)\n\tat java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1245)\n\tat\njava.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1069)\n\tat\njava.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1369)\n\tat\njava.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1341)\n\tat\njava.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1284)\n\tat\njava.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1073)\n\tat java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:291)\n\tat\norg.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1445)\n\n\tat\norg.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:920)"}, {"count": 4, "tags": [], "text": "(In reply to comment #3)\n\n> Here is a patch with some classes made serializable. \n\nthanks, i will take a look.\n\n> Right now session sometimes do serialize sometimes not. New exception is raised\n> (see below). Object causing this exception is  not from lenya source, but I\n> don't know what to do about that. Is it a bug in Cocoon or maybe object does\n> not have to be stored in session ?? Any ideas what to do about that ?\n\nthis is a known issue: http://issues.apache.org/bugzilla/show_bug.cgi?id=33324\n\nbasically, until cocoon figures out how to serialize flow, this will be a problem", "is_private": false, "id": 73042, "creation_time": "2005-03-30T06:02:40Z", "time": "2005-03-30T06:02:40Z", "creator": "gregor@apache.org", "bug_id": 34127, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 34127, "attachment_id": null, "id": 74596, "time": "2005-05-08T23:12:57Z", "creator": "gregor@apache.org", "creation_time": "2005-05-08T23:12:57Z", "is_private": false, "text": "thanks, applied"}]