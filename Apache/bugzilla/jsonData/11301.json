[{"count": 0, "tags": [], "bug_id": 11301, "attachment_id": null, "text": "Most JPEG images with ICC Profiles display correctly in FOP 0.20.2, but appear \nas black boxes in FOP 0.20.3 and 0.20.4.  This only occurs if the client \n(win2000, acrobat reader) is using 16 bit or higher color.  With 256 colors, \nthe images appear correctly.  The url field above has an example.\n\nComments from Jeremias Maerki below:\n------------------------------------\nProbably. Support was added for JPEG images to be embedded directly into\nPDF. Until then JPEGS were read into memory by Jimi and written to the\nPDF as a normal bitmap equal to the way GIFs and PNGs are written (using\nnon-lossy ZLib compression). So probably, Jimi was able to open those\nJPEG images but something goes wrong today with the JPEGs that are\ndirectly embedded in a PDF.\n\nAs the whole image support stuff is rather hardcoded at the moment, you\nmight want to try to modify org.apache.fop.images.FopImageFactory and\norg.apache.fop.images.analyser.ImageReaderFactory to comment out JPEG\nsupport. That will restore the way JPEG images were handled back in\n0.20.2. But you will get bigger PDFs.\n\nThis is of course a short-term work-around. We still need to find out\nthe real problem. Would you mind checking BugZilla, if there's already\nan entry for this problem? If not, please open a new bug report and add\none or two of your problem-JPEGs as an attachment. This way we can fix\nit eventually. No idea if I get to have a look at it, because I wanted\nto work mostly on the redesign during the next few weeks. So takers are\nwelcome.", "id": 20436, "time": "2002-07-30T17:33:14Z", "creator": "darrel.riekhof@tririga.com", "creation_time": "2002-07-30T17:33:14Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 11301, "is_private": false, "id": 20448, "attachment_id": null, "creator": "darrel.riekhof@tririga.com", "creation_time": "2002-07-30T22:34:03Z", "time": "2002-07-30T22:34:03Z", "text": "Temporary fix is to replace org.apache.fop.image.JpegImage in fop-0.20.3 and \nfop-0.20.4 with the version of this class in fop-0.20.2."}, {"count": 2, "tags": [], "bug_id": 11301, "is_private": false, "id": 20492, "attachment_id": null, "creator": "j3322ptm@yahoo.de", "creation_time": "2002-07-31T15:56:38Z", "time": "2002-07-31T15:56:38Z", "text": "The image mentioned in the URL works for me (CVS maintenance branch). I vaguely\nremember a ICC related patch submitted a while ago, though I can't find it in the\narchives."}, {"count": 3, "tags": [], "text": "Probably this patch:\n\nhttp://marc.theaimsgroup.com/?l=fop-dev&m=102458916106538&w=2\n\nwhich AFAIK has not been applied yet", "attachment_id": null, "id": 20494, "creator": "christian.geisert@isu-gmbh.de", "time": "2002-07-31T16:15:45Z", "bug_id": 11301, "creation_time": "2002-07-31T16:15:45Z", "is_private": false}, {"count": 4, "tags": [], "creator": "keiron@aftexsw.com", "attachment_id": null, "id": 22828, "time": "2002-09-13T13:14:08Z", "bug_id": 11301, "creation_time": "2002-09-13T13:14:08Z", "is_private": false, "text": "It appears that current cvs can properly imbed a jpeg image so that it works in \nacrobat reader 4.0 but when the same document is viewed in acrobat reader 5.0 \nthe image is all black.\nThere could be a problem with the way the icc profile is specified."}, {"count": 5, "tags": [], "creator": "christian.geisert@isu-gmbh.de", "attachment_id": null, "id": 26109, "time": "2002-11-11T23:39:58Z", "bug_id": 11301, "creation_time": "2002-11-11T23:39:58Z", "is_private": false, "text": "The above mentioned \"patch\" seems to fix the problem"}, {"count": 6, "tags": [], "creator": "gadams@apache.org", "is_private": false, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed", "id": 155509, "time": "2012-04-01T06:25:12Z", "bug_id": 11301, "creation_time": "2012-04-01T06:25:12Z", "attachment_id": null}]