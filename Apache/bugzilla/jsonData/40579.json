[{"count": 0, "tags": [], "bug_id": 40579, "attachment_id": null, "id": 93999, "time": "2006-09-22T11:45:49Z", "creator": "weiss.seal@gmx.de", "creation_time": "2006-09-22T11:45:49Z", "is_private": false, "text": "I\u2019m, trying to build Apache 2.0.58 with dynamic linking on HP-UX with this\nconfiguration:\n./configure \t--prefix=/home/scratch/apache2 \n\t    \t--libdir=/home/scratch/apache2/bin \n            \t--enable-so --enable-static-support \n\n./make\n./make install\nAfter that httpd runs fine in the PREFIX-Folder.\n\nNow I move the apache to another directory and add the directory to the\n\u2018SHLIB_PATH\u2019, following error occurs:\n/usr/lib/dld.sl: Can't open shared library: /home/scratch/apache2/bin/libapr-0.sl.9\n/usr/lib/dld.sl: No such file or directory\n\nI tried different HP-UX system versions:\n\nHP-UX 11.00 with aCC Version A.03.55\nand\nHP-UX 11.11 with gcc Version 3.3.2\n\nI also tried different versions of Apache2: 2.0.47, 2.0.59 and 2.2.3.\n, but no constellation leads to success.\n\nDidn't you know what's the matter? Other UNIX systems, just like SunOS or IBM\nwork fine.\nCould you please help me?"}, {"count": 1, "tags": [], "bug_id": 40579, "attachment_id": null, "id": 95253, "time": "2006-10-31T08:19:03Z", "creator": "jorton@redhat.com", "creation_time": "2006-10-31T08:19:03Z", "is_private": false, "text": "Did you really mean \"--libdir=/home/scratch/apache2/bin\"?\n\n(not --bindir=... or --libdir=.../lib)\n\nIf you configure and install without passing any such arguments, does it work?"}, {"count": 2, "tags": [], "creator": "laurent.faillie@st.com", "attachment_id": null, "text": "Hi,\n\nI add the same problem recently.\nThe solution I found was to install the latest version of GNU libtool (from GNU\nftp repository) and then to rebuild almost all library used by apache/php.\n\nldd can help to determine which libraries need to be rebuilded.\n\nBest regards,\n\nLaurent\n\nPS: HP-UX dynamic linker is really the worst linker I used :-(", "id": 102428, "time": "2007-04-26T02:24:38Z", "bug_id": 40579, "creation_time": "2007-04-26T02:24:38Z", "is_private": false}, {"count": 3, "tags": [], "creator": "wrowe@apache.org", "is_private": false, "text": "It's simply a libtool bug.  But I don't have enough info to answer, did you\nhappen to run ./buildconf?  If so, what version of libtool is installed on\nthe box?\n\nIt seems the HPUX libtool maintainer is adverse to relocatable binaries,\nbecause getting it right is trivial.\n", "id": 102432, "time": "2007-04-26T02:42:27Z", "bug_id": 40579, "creation_time": "2007-04-26T02:42:27Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "Hi,\n\nI run the configure command I described above, without './buildconf' .\n\nThe first libtool version I used was 'libtool version 1.5' .\nNow I tried 'libtool version 1.5.22' and then '1.5.24', but without success.\n\nI also tried to add my '--libdir' to the 'SHLIB_PATH', but the httpd file did\nnot used the entry.", "is_private": false, "id": 105924, "creator": "weiss.seal@gmx.de", "time": "2007-07-24T23:43:14Z", "bug_id": 40579, "creation_time": "2007-07-24T23:43:14Z", "attachment_id": null}, {"count": 5, "attachment_id": null, "bug_id": 40579, "text": "I'm try to build the Apache2.0.59 on HP-UX with this configuration:\n./configure --prefix=/export/home/apache2 --enable-ssl --with-ssl=/usr/local/openssl --with-expat=builtin \n./make\n./make install\n\nThen I execute the ./apachectl start in the /export/home/apache2/bin,it can run normally.But when I move the apache to another directory(/opt/oracle/apache2) and I remove the /export/home/apache2,and I edit the PREFIX(/export/home/apache2) to new directory in the following files:apachectl,apxs,envvars,httpd.conf,ssl.conf.When I run the apache ,I get following error:\n\n/usr/lib/dld.sl: Can't open shared library: /export/home/apache2/bin/libapr.sl.0\n/usr/lib/dld.sl: No such file or directory\n\nAnd I copy the apache to another HP-UX and also edit the above PREFIX info,I get the same error.\n\nI echo the 'SHLIB_PATH' and it just the new lib path:/opt/oracle/apache2/lib;\n\nIn the PREFIX/bin,#chatr httpd,the httpd's info is :\n\nhttpd:\n         shared executable\n         shared library dynamic path search:\n             SHLIB_PATH     enabled   second\n             embedded path  disabled  first  /export/home/apache2/lib\n         shared library list:\n             static    /export/home/apache2/lib/libaprutil.sl.0\n             static    /export/home/apache2/lib/libexpat.sl.1\n             static    /export/home/apache2/lib/libapr.sl.0\n             dynamic   /usr/lib/libm.2\n             dynamic   /usr/lib/libnsl.1\n             dynamic   /usr/lib/libpthread.1\n             dynamic   /usr/lib/libc.2\n         shared library binding:\n             deferred\n         global hash table disabled\n         plabel caching disabled\n         global hash array size:1103\n         global hash array nbuckets:3\n         shared vtable support disabled\n         static branch prediction disabled\n         executable from stack: D (default)\n         kernel assisted branch prediction enabled\n         lazy swap allocation disabled\n         text segment locking disabled\n         data segment locking disabled\n         third quadrant private data space disabled\n         fourth quadrant private data space disabled\n         third quadrant global data space disabled\n         data page size: D (default)\n         instruction page size: D (default)\n         nulptr references disabled\n         shared library private mapping disabled\n         shared library text merging disabled\n\n\n\nDidn't you know what's the matter? Other UNIX systems, just like SunOS work fine.Could you please help me?Thanks very much!\n\n", "id": 118001, "time": "2008-06-25T20:49:50Z", "creator": "mingzhao.chen@hingesoftware.com", "creation_time": "2008-06-25T20:49:50Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 40579, "attachment_id": 22198, "id": 118112, "time": "2008-06-30T00:25:39Z", "creator": "mingzhao.chen@hingesoftware.com", "creation_time": "2008-06-30T00:25:39Z", "is_private": false, "text": "Created attachment 22198\nAdd the flag of the '--enable-shared=no' to the configure"}, {"count": 7, "tags": [], "bug_id": 40579, "attachment_id": null, "is_private": false, "id": 118113, "time": "2008-06-30T00:32:07Z", "creator": "mingzhao.chen@hingesoftware.com", "creation_time": "2008-06-30T00:32:07Z", "text": "Hi,\n\nThe problem has been resolved.You should add the flag of the '--enable-shared=no' to the configure apr,apr-util and pcre in the configure file in the httpd-2.0.59 directory if you use this version.The attachment is the configure file has beend edited.\n\nAaron,\n2008-06-30"}, {"count": 8, "attachment_id": null, "bug_id": 40579, "is_private": false, "id": 118179, "time": "2008-07-01T18:30:46Z", "creator": "wrowe@apache.org", "creation_time": "2008-07-01T18:30:46Z", "tags": [], "text": "Note that solving this the \"right\" way is a matter of convincing the libtool\nmaintainers that +s +b is right way to go.  Today, libtool does all it can\nto ensure an HP/UX binary is not relocatable.\n\nAlso you can relocate individual .sl's with the chatr tool"}, {"count": 9, "tags": [], "text": "Hi, Will Rowe\n\nCould you please provide a example how to relocate individual .sl's with the chatr tool?\n\nAfter configure the apache with the flag of '--enable-shared=no', and chatr the \nhttpd,httpd's info is :\n\n\nhttpd:\n         shared executable\n         shared library dynamic path search:\n             SHLIB_PATH     disabled  second\n             embedded path  disabled  first  Not Defined\n         shared library list:\n             dynamic   /usr/lib/libm.2\n             dynamic   /usr/lib/libnsl.1\n             dynamic   /usr/lib/libpthread.1\n             dynamic   /usr/lib/libdld.2\n             dynamic   /usr/lib/libc.2\n         shared library binding:\n             deferred\n         global hash table disabled\n         plabel caching disabled\n         global hash array size:1103\n         global hash array nbuckets:3\n         shared vtable support disabled\n         explicit unloading enabled\n         static branch prediction disabled\n         executable from stack: D (default)\n         kernel assisted branch prediction enabled\n         lazy swap allocation disabled\n         text segment locking disabled\n         data segment locking disabled\n         third quadrant private data space disabled\n         fourth quadrant private data space disabled\n         third quadrant global data space disabled\n         data page size: D (default)\n         instruction page size: D (default)\n         nulptr references enabled\n         shared library private mapping disabled\n         shared library text merging disabled\n\nThere are no 'static ' flag in the httpd's infomation.\n\nBTW,there are some similar problem on the AIX 5 before with the flag.And I resoved it use the same way.But when I configure the JK(tomcat-connectors-1.2.23) with apache it can not generate mod_jk.so.The following is the the commands:\n$./configure --with-apxs=/opt/oracle/apache2/bin/apxs\nAnd it's OK on the HP-UX.\n\nSo I remove the flag for the pcre and I can generate the mod_jk.so.But when I run the apache,I get the following error:\n\n\"Cannot load /opt/oracle/apache2/modules/mod_jk.so into server: rtld: 0712-001 Symbol apr_pool_create_ex was referenced from module /opt/oracle/apache2/modules/mod_jk.so(), but a runtime definition of the symbol was not found.\"\n\nIt sames that the mod_jk.so can not complie with apache in the shared way.Can you help me to resolve it? Thanks.\n\nAaron\n2008-07-02\n\n(In reply to comment #8)\n> Note that solving this the \"right\" way is a matter of convincing the libtool\n> maintainers that +s +b is right way to go.  Today, libtool does all it can\n> to ensure an HP/UX binary is not relocatable.\n> Also you can relocate individual .sl's with the chatr tool\n\n", "is_private": false, "id": 118184, "creator": "mingzhao.chen@hingesoftware.com", "time": "2008-07-02T01:28:51Z", "bug_id": 40579, "creation_time": "2008-07-02T01:28:51Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 40579, "attachment_id": null, "is_private": false, "id": 118195, "time": "2008-07-02T07:49:43Z", "creator": "wrowe@apache.org", "creation_time": "2008-07-02T07:49:43Z", "text": "HP documents their chatr tool, you'll notice the +b, +s flags work very\nsimilarly to the original linker.  Pay particular attention to:\n\n         shared library dynamic path search:\n             SHLIB_PATH     disabled  second\n             embedded path  disabled  first  Not Defined\n\nfrom the chatr information dump... you don't have SHLIB_PATH enabled.  The\nman chatr page tells you how."}, {"count": 11, "tags": [], "text": "(In reply to comment #10)\n> HP documents their chatr tool, you'll notice the +b, +s flags work very\n> similarly to the original linker.  Pay particular attention to:\n>          shared library dynamic path search:\n>              SHLIB_PATH     disabled  second\n>              embedded path  disabled  first  Not Defined\n> from the chatr information dump... you don't have SHLIB_PATH enabled.  The\n> man chatr page tells you how.\n\nHi,Will Rowe\n\nYes,I did use the chatr command ,such as 'chatr +s enable httpd' etc,before I configure the apache with the flag of '--enable-shared=no'.This way can make SHLIB_PATH enabled.You can see the Comment #5 by me.The SHLIB_PATH have been enabled.But there are still flag of 'static' to the .sl and the apache can not work on the other machine.\n\nBy the way,as to the problem occured on the AIX,could you tell mey what's happend?Tanks a lot.\n\nAaron,\n2008-07-03", "is_private": false, "id": 118221, "creator": "mingzhao.chen@hingesoftware.com", "time": "2008-07-02T19:06:08Z", "bug_id": 40579, "creation_time": "2008-07-02T19:06:08Z", "attachment_id": null}]