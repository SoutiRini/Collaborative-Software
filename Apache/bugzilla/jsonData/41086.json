[{"count": 0, "tags": [], "bug_id": 41086, "is_private": false, "id": 96415, "creation_time": "2006-11-30T09:32:23Z", "time": "2006-11-30T09:32:23Z", "creator": "dlipofsky@gmail.com", "text": "This worked with Ant 1.6.5 but fails with 1.7.0RC1.\n\n==> build.xml <==\n<project name=\"test\" default=\"test\" basedir=\".\">\n    <target name=\"test\">\n        <filter filtersfile=\"filter.properties\" />\n        <copy file=\"test.txt\" tofile=\"filtered.txt\"\n              filtering=\"true\" overwrite=\"true\"/>\n    </target>\n</project>\n\n==> filter.properties <==\na=aaa\nb=bbb\nc=@a@:@b@\n\n==> test.txt <==\n@a@\n@b@\n@c@\n\nThis is the output I get\n\n$ ant -v\nApache Ant version 1.7.0RC1 compiled on November 5 2006\nBuildfile: build.xml\nDetected Java version: 1.4 in: C:\\jdk1.4.2\\jre\nDetected OS: Windows XP\nparsing buildfile C:\\src\\tmp\\build.xml with URI = file:/C:/src/tmp/build.xml\nProject base dir set to: C:\\src\\tmp\nBuild sequence for target(s) `test' is [test]\nComplete build sequence is [test, ]\n\ntest:\n[antlib:org.apache.tools.ant] Could not load definitions from resource\norg/apache/tools/ant/antlib.xml. It could not be found.\n   [filter] Reading filters from C:\\src\\tmp\\filter.properties\nReading filters from C:\\src\\tmp\\filter.properties\n     [copy] Copying 1 file to C:\\src\\tmp\n     [copy] Copying C:\\src\\tmp\\test.txt to C:\\src\\tmp\\filtered.txt\nReplacing: @a@ -> aaa\nReplacing: @b@ -> bbb\nReplacing: @a@ -> aaa\n\nBUILD FAILED\nC:\\src\\tmp\\build.xml:4: java.lang.NullPointerException\n        at\norg.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:115)\n        at org.apache.tools.ant.Task.perform(Task.java:342)\n        at org.apache.tools.ant.Target.execute(Target.java:357)\n        at org.apache.tools.ant.Target.performTasks(Target.java:385)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1292)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1261)\n        at\norg.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1144)\n        at org.apache.tools.ant.Main.runBuild(Main.java:698)\n        at org.apache.tools.ant.Main.startAnt(Main.java:199)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:298)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\nCaused by: java.lang.NullPointerException\n        at org.apache.tools.ant.types.FilterSet.replaceTokens(FilterSet.java:565)\n        at org.apache.tools.ant.types.FilterSet.iReplaceTokens(FilterSet.java:525)\n        at org.apache.tools.ant.types.FilterSet.replaceTokens(FilterSet.java:576)\n        at org.apache.tools.ant.types.FilterSet.iReplaceTokens(FilterSet.java:525)\n        at org.apache.tools.ant.types.FilterSet.replaceTokens(FilterSet.java:389)\n        at\norg.apache.tools.ant.types.FilterSetCollection.replaceTokens(FilterSetCollection.java:78)\n        at\norg.apache.tools.ant.util.ResourceUtils.copyResource(ResourceUtils.java:311)\n        at org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:507)\n        at org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:322)\n        at org.apache.tools.ant.taskdefs.Copy.doFileOperations(Copy.java:793)\n        at org.apache.tools.ant.taskdefs.Copy.execute(Copy.java:532)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at\norg.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:105)\n        ... 11 more\n--- Nested Exception ---\njava.lang.NullPointerException\n        at org.apache.tools.ant.types.FilterSet.replaceTokens(FilterSet.java:565)\n        at org.apache.tools.ant.types.FilterSet.iReplaceTokens(FilterSet.java:525)\n        at org.apache.tools.ant.types.FilterSet.replaceTokens(FilterSet.java:576)\n        at org.apache.tools.ant.types.FilterSet.iReplaceTokens(FilterSet.java:525)\n        at org.apache.tools.ant.types.FilterSet.replaceTokens(FilterSet.java:389)\n        at\norg.apache.tools.ant.types.FilterSetCollection.replaceTokens(FilterSetCollection.java:78)\n        at\norg.apache.tools.ant.util.ResourceUtils.copyResource(ResourceUtils.java:311)\n        at org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:507)\n        at org.apache.tools.ant.util.FileUtils.copyFile(FileUtils.java:322)\n        at org.apache.tools.ant.taskdefs.Copy.doFileOperations(Copy.java:793)\n        at org.apache.tools.ant.taskdefs.Copy.execute(Copy.java:532)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at\norg.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:105)\n        at org.apache.tools.ant.Task.perform(Task.java:342)\n        at org.apache.tools.ant.Target.execute(Target.java:357)\n        at org.apache.tools.ant.Target.performTasks(Target.java:385)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1292)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1261)\n        at\norg.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1144)\n        at org.apache.tools.ant.Main.runBuild(Main.java:698)\n        at org.apache.tools.ant.Main.startAnt(Main.java:199)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:298)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)", "attachment_id": null}, {"count": 1, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "is_private": false, "id": 96419, "time": "2006-11-30T10:00:48Z", "bug_id": 41086, "creation_time": "2006-11-30T10:00:48Z", "text": "This appears to have been introduced in the fix for bug 38456."}, {"count": 2, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "is_private": false, "id": 96425, "time": "2006-11-30T11:11:34Z", "bug_id": 41086, "creation_time": "2006-11-30T11:11:34Z", "text": "fixed in SVN HEAD. Thanks!"}]