[{"count": 0, "tags": [], "creator": "wlpa2008@gmail.com", "attachment_id": 32642, "text": "Created attachment 32642\nThe way I modified the EL support(but i suggested a solution in the bug comment)\n\nI noticed that some pages using boolean or String resulting EL expression which used to function well under Tomcat 7 and earlier versions of Tomcat 8.\n\nThe source of this is the use of ELContext in some methods of org.apache.el.lang.ELSupport. ELContext is used starting from JSF 1.2(unles I'm wrong, then feel free to notice it to me). Trying to use it with JSF 1.1 app results sometimes in null references giving NPE on the specified screens. To correct it, i commented the relevant blocks of code. What I might suggest is, for ascending compatibility, to use the following procedure:\n-try to look for the value in ELContext\n-if the result is null, then fallback to the older versions(e.g. Tomcat 7) ways of resolving EL values", "id": 182301, "time": "2015-04-10T10:42:35Z", "bug_id": 57802, "creation_time": "2015-04-10T10:42:35Z", "is_private": false}, {"text": "See the comment in the EL spec regarding backwards compatability.\n\nTomcaat has the org.apache.el.parser.COERCE_TO_ZERO configuration option (see http://tomcat.apache.org/tomcat-8.0-doc/config/systemprops.html#Expression_Language).", "tags": [], "bug_id": 57802, "is_private": false, "count": 1, "id": 182307, "time": "2015-04-10T13:46:38Z", "creator": "markt@apache.org", "creation_time": "2015-04-10T13:46:38Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 57802, "attachment_id": null, "id": 182320, "creation_time": "2015-04-11T15:27:10Z", "time": "2015-04-11T15:27:10Z", "creator": "wlpa2008@gmail.com", "text": "I'm already using that option", "is_private": false}, {"count": 3, "tags": [], "creator": "wlpa2008@gmail.com", "attachment_id": null, "is_private": false, "id": 182321, "time": "2015-04-11T15:28:03Z", "bug_id": 57802, "creation_time": "2015-04-11T15:28:03Z", "text": "That's why i posted that bug"}, {"count": 4, "tags": [], "creator": "wlpa2008@gmail.com", "attachment_id": null, "text": "Th\u00e9 fact ils that i have NPE for even ont NULL expressions.", "id": 182322, "time": "2015-04-11T15:31:36Z", "bug_id": 57802, "creation_time": "2015-04-11T15:31:36Z", "is_private": false}, {"count": 5, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "text": "Care to post a JSP code sample that should work but doesn't? That would be the best thing to provide in a bug report such as this.", "id": 182324, "time": "2015-04-13T02:47:14Z", "bug_id": 57802, "creation_time": "2015-04-13T02:47:14Z", "is_private": false}, {"count": 6, "tags": [], "creator": "wlpa2008@gmail.com", "attachment_id": null, "text": "(In reply to Christopher Schultz from comment #5)\n> Care to post a JSP code sample that should work but doesn't? That would be\n> the best thing to provide in a bug report such as this.\n\n<ice:panelBorder id=\"page\" styleClass=\"pnlBrdrDemo\"\n\t\t\t\t\t\t\tstyle=\"width:100%\" renderNorth=\"#{not uihome.showTitle}\"\n\t\t\t\t\t\t\trenderSouth=\"#{false}\" renderCenter=\"#{true}\"\n\t\t\t\t\t\t\trenderWest=\"#{false}\" renderEast=\"#{false}\">\n\nuihome refers to a not null JSF managed bean. The expression \"not uihome.showTitle\" gives a NPE.", "id": 182381, "time": "2015-04-15T09:39:08Z", "bug_id": 57802, "creation_time": "2015-04-15T09:39:08Z", "is_private": false}, {"count": 7, "tags": [], "bug_id": 57802, "attachment_id": null, "id": 182386, "time": "2015-04-15T12:53:23Z", "creator": "chris@christopherschultz.net", "creation_time": "2015-04-15T12:53:23Z", "is_private": false, "text": "Can you please paste a *complete* code example, including any JSP headers and JAR libraries that might be necessary to get that to compile and run?\n\nRemember that not everybody is using your stack."}, {"count": 8, "tags": [], "creator": "wlpa2008@gmail.com", "attachment_id": null, "text": "(In reply to Christopher Schultz from comment #7)\n> Can you please paste a *complete* code example, including any JSP headers\n> and JAR libraries that might be necessary to get that to compile and run?\n> \n> Remember that not everybody is using your stack.\n\nBasically, I'm using JSP Xml syntax. My pages are using pure XML so basically no headers. For the librairies, there are ICEfaces 1.8.1, MyFaces 1.1.5 API and IMPL(and dependencies in apache commons), Spring 2.5.5, Hibernate 3.2.5, axis2 1.4.1, BIRT 3.2.7(embedded). The fact is the class and page are part of a very big project. That's why i'm extracting the problematic part.", "id": 182421, "time": "2015-04-16T11:01:41Z", "bug_id": 57802, "creation_time": "2015-04-16T11:01:41Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 57802, "is_private": false, "text": "There is insufficient information in this report for a Tomcat developer to reproduce it. Please keep in mind that the Tomcat developers may have zero knowledge of JSF.\n\nAs Chris previously requested, a complete example needs to be provided. Whether this is a single JSP and a list of required libraries (my preference) or a zipped Maven project is a secondary issue. The primary issue is that a test case needs to be provide that will enable a Tomcat developer to build a web application that demonstrates this bug.", "id": 182561, "time": "2015-04-22T14:50:25Z", "creator": "markt@apache.org", "creation_time": "2015-04-22T14:50:25Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 57802, "attachment_id": null, "id": 182706, "creation_time": "2015-04-28T20:39:47Z", "time": "2015-04-28T20:39:47Z", "creator": "markt@apache.org", "text": "Without a test case this is going to get resolved as INVALID.", "is_private": false}, {"count": 11, "tags": [], "bug_id": 57802, "attachment_id": null, "id": 182709, "creation_time": "2015-04-28T20:46:42Z", "time": "2015-04-28T20:46:42Z", "creator": "wlpa2008@gmail.com", "text": "Sorry for the silence. I'm a bit busy right now since I'm building the test case part time. I'll come back to you once it's done.", "is_private": false}, {"count": 12, "tags": [], "bug_id": 57802, "attachment_id": null, "id": 182710, "time": "2015-04-28T20:51:12Z", "creator": "markt@apache.org", "creation_time": "2015-04-28T20:51:12Z", "is_private": false, "text": "OK. No rush. We don't normally close things until there has been at least a month of inactivity. Worst case if this gets closed before you have a test case you can always re-open it when you have the test case."}, {"count": 13, "tags": [], "bug_id": 57802, "is_private": false, "text": "I have a test case but it's a 16MB WAR file. Can I upload it?", "id": 182742, "time": "2015-04-29T22:47:03Z", "creator": "wlpa2008@gmail.com", "creation_time": "2015-04-29T22:47:03Z", "attachment_id": null}, {"text": "Created attachment 32699\nICEfaces 1.8.1 component showcase on Myfaces 1.1.5/Tomahawk 1.1.6\n\nThe attachment works on Tomcat version 6.0.43 and 7.0.57 but not on 8.0.21", "tags": [], "bug_id": 57802, "is_private": false, "count": 14, "id": 182743, "time": "2015-04-29T22:59:16Z", "creator": "wlpa2008@gmail.com", "creation_time": "2015-04-29T22:59:16Z", "attachment_id": 32699}, {"count": 15, "tags": [], "creator": "wlpa2008@gmail.com", "attachment_id": null, "is_private": false, "id": 182744, "time": "2015-04-29T23:00:56Z", "bug_id": 57802, "creation_time": "2015-04-29T23:00:56Z", "text": "I provided a uptobox link instead"}, {"count": 16, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "The download appears to require registration and/or payment.\n\nI suggest you remove the JARs from WEB-INF/lib and replace them with a list of files and versions (assuming we can grab them from Maven central). That should bring the example under the BZ attachment limit. Alternatively, place the file somewhere that doesn't require payment or registration.", "id": 182756, "time": "2015-04-30T10:13:16Z", "bug_id": 57802, "creation_time": "2015-04-30T10:13:16Z", "is_private": false}, {"count": 17, "tags": [], "creator": "wlpa2008@gmail.com", "attachment_id": 32699, "text": "Comment on attachment 32699\nICEfaces 1.8.1 component showcase on Myfaces 1.1.5/Tomahawk 1.1.6\n\nhttp://dl.free.fr/fKFKRAwpc", "id": 182769, "time": "2015-04-30T18:17:47Z", "bug_id": 57802, "creation_time": "2015-04-30T18:17:47Z", "is_private": false}, {"count": 18, "tags": [], "bug_id": 57802, "attachment_id": null, "id": 182841, "time": "2015-05-05T12:57:13Z", "creator": "markt@apache.org", "creation_time": "2015-05-05T12:57:13Z", "is_private": false, "text": "Thanks for the test case.\n\nYour analysis was heading in the right direction but missed the real root cause. The problem was the incorrect default implementation of ELResolver.convertToType(). It failed to call context.setPropertyResolved(false). This meant older ELResolver implementations that inherited this method would return null and if ELContext.getPropertyResolved() was true, that null was treated as a valid conversion triggering the NPE.\n\nThis has been fixed in trunk and 8.0.x for 8.0.23 onwards."}, {"count": 19, "tags": [], "bug_id": 57802, "attachment_id": null, "id": 182858, "time": "2015-05-06T11:01:21Z", "creator": "wlpa2008@gmail.com", "creation_time": "2015-05-06T11:01:21Z", "is_private": false, "text": "(In reply to Mark Thomas from comment #18)\n> Thanks for the test case.\n> \n> Your analysis was heading in the right direction but missed the real root\n> cause. The problem was the incorrect default implementation of\n> ELResolver.convertToType(). It failed to call\n> context.setPropertyResolved(false). This meant older ELResolver\n> implementations that inherited this method would return null and if\n> ELContext.getPropertyResolved() was true, that null was treated as a valid\n> conversion triggering the NPE.\n> \n> This has been fixed in trunk and 8.0.x for 8.0.23 onwards.\n\nI hope I helped. When will Tomcat 8.0.23 be released?"}]