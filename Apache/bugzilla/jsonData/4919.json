[{"attachment_id": null, "tags": [], "bug_id": 4919, "text": "I have a custom tag that Tomcat (Jasper) won't compile.\n\nThe problem is one of its attributes called \"class\". I want to include this \nattribute so that users of the tag can set the style sheet attribute in the \nsame way as for other HTML4 tags.\n\nCorresponding to the \"class\" attribute, there is a setClass(String) method. \nThere is not a getClass() method as it clashes with the getClass() method of \nthe underlying Object class.\n\nI have tried this on Tomcat to 3.3 and it produces the following error message:\n\n    - org.apache.jasper.compiler.CompileException:\n    /usr3/jakarta-tomcat-3.3/webapps/panportalDev/forms/ieformtest.jsp(41,0)\n    Unable to find setter method for attribute: class\n    at org.apache.jasper.compiler.TagBeginGenerator.generateSetters\n\nThere is public void setClass(String s) in the Tag\nbut, of course, no property called 'class'.\n\n\nUsing \"class\" as an attribute is very natural for page designers so I expect \nthere is a workaround.", "count": 0, "id": 7986, "time": "2001-11-16T04:52:30Z", "creator": "nickp@panorama.com", "creation_time": "2001-11-16T04:52:30Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 4919, "text": "The source code corresponding to the compile-time exception that is thrown in \n3.2.2 is below:\n\n    private final void generateSetters(ServletWriter writer, String parent)\n        throws JasperException\n    {\n        writer.println(thVarName+\".setPageContext(pageContext);\");\n        writer.println(thVarName+\".setParent(\"+parent+\");\");\n\n        if (attributes.length != 0)\n\t    for(int i = 0; i < attributes.length; i++) {\n                String attrValue = (String) attrs.get(attributes[i].getName());\n                if (attrValue != null) {\n\t\t    String attrName = attributes[i].getName();\n\t\t    Method m = tc.getSetterMethod(attrName);\n\t\t    if (m == null)\n\t\t\tthrow new CompileException\n\t\t\t    (start, Constants.getString\n\t\t\t     (\"jsp.error.unable.to_find_method\",\n\t\t\t      new Object[] { attrName }));\n                    Class c[] = m.getParameterTypes();\n                    // assert(c.length > 0)\n\n                    if (attributes[i].canBeRequestTime()) {\n\t\t\tif (JspUtil.isExpression(attrValue))\n\t\t\t    attrValue = JspUtil.getExpr(attrValue);\n\t\t\telse\n                            attrValue = convertString(c[0], attrValue, writer, \nattrName);\n\t\t    } else\n\t\t\tattrValue = convertString(c[0], attrValue, writer, \nattrName);\n\t\t    writer.println(thVarName+\".\"+m.getName()\n+\"(\"+attrValue+\");\");\n                }\n            }\n    }\n\nIt fails on the\n\n\tMethod m = tc.getSetterMethod(attrName);\n\nThe previous line\n\n\tString attrName = attributes[i].getName();\n\nreturns null because there is no attribute called \"class\"\n\n\nIt is, of course, legal to have a\n\n        public void setClass(String klass) {...}\n\nalthough, of course, not legal to have a\n\n        public String getClass();\n\nas it can't override the Object getClass() method.\n\n\n\n", "count": 1, "id": 7987, "time": "2001-11-16T05:00:29Z", "creator": "nickp@panorama.com", "creation_time": "2001-11-16T05:00:29Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 4919, "text": "The only workarounds I know of is to either:\n\n(1) do not include a \"class\" attribute\n\n(2) call it something else, \"klass\", say :)", "id": 7988, "time": "2001-11-16T05:07:40Z", "creator": "nickp@panorama.com", "creation_time": "2001-11-16T05:07:40Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 4919, "is_private": false, "text": "As much as I would like to fix this, doing so would violate the JSP spec.  The \ncontainer is required to use JavaBean introspection to determine the attributes \nof the tag (section 5.4 in the 1.1 spec, clarified in section 10.2 of the 1.2 \nspec).  Unfortunately, the \"class\" property is defined (from a JavaBean point \nof view) by java.lang.Object.getClass and can't be overridden in the subclass. \nThe proper place to send complaints is: jsp-spec-comments@eng.sun.com", "id": 8026, "time": "2001-11-17T20:48:31Z", "creator": "william.barker@wilshire.com", "creation_time": "2001-11-17T20:48:31Z", "attachment_id": null}]