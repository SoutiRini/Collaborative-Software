[{"count": 0, "tags": [], "bug_id": 13084, "attachment_id": null, "text": "I've configured tomcat to use jikes (ver. 1.16 = latest) with \n    <servlet>\n        <servlet-name>jsp</servlet-name>\n        <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>\n        <init-param>\n            <param-name>logVerbosityLevel</param-name>\n            <param-value>WARNING</param-value>\n        </init-param>\n        <init-param>\n            <param-name>compiler</param-name>\n            <param-value>jikes</param-value>\n        </init-param>\n        <load-on-startup>3</load-on-startup>\n    </servlet>\nas suggested in the docs.\n\nWhen I run a webapp and try to compile a jsp I get the following error:\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n    [javac] Compiling 1 source file\n    [javac] use: jikes [options] [@files] file.java...\n    [javac] For more help, try -help or -version.\n    [javac] Error: The option \"-encoding\" is unsupported in this build.\n\n\n\n\tat\norg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:120)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:293)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:313)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:324)\n\tat org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:474)\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:184)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:289)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:240)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:432)\n\tat\norg.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:356)\n\tat de.uni_tuebingen.prometheus.vl.VlController.doPost(VlController.java:56)\n\tat de.uni_tuebingen.prometheus.vl.VlController.doGet(VlController.java:64)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:740)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)\n\tat\norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)\n\tat\norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:260)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2396)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat\norg.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:170)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat\norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)\n\tat\norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)\n\tat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n\tat org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:405)\n\tat\norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:380)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:508)\n\tat\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:533)\n\tat java.lang.Thread.run(Thread.java:498)\n\nI've then tried to set \n        <init-param>\n        \t<param-name>javaEncoding</param-name>\n        \t<param-value>ISO-8859-1</param-value>\n        </init-param>\n as suggested, but get the same error.\n\nAny fix/workaround for this???", "id": 23552, "time": "2002-09-27T15:44:56Z", "creator": "Holger@Morgenstern.net", "creation_time": "2002-09-27T15:44:56Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 13084, "is_private": false, "text": "You need a version of jikes with support for encoding.\n\nIf you execute the jikes compiler from a shell with -help and don't\nsee the option \"-encoding\" then jikes isn't built with support for\nencoding.", "id": 23589, "time": "2002-09-27T22:33:15Z", "creator": "glenn@apache.org", "creation_time": "2002-09-27T22:33:15Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "pascalpt@yahoo.com", "attachment_id": null, "text": "This is a problem under windows as jikes doesn't support the encoding option.\nWould it be possible to add a parameter to disable passing the -encoding option\nto jikes?", "id": 23877, "time": "2002-10-04T02:57:46Z", "bug_id": 13084, "creation_time": "2002-10-04T02:57:46Z", "is_private": false}, {"count": 3, "tags": [], "creator": "Holger@Morgenstern.net", "attachment_id": null, "text": "I would definatly vote for this option since in the current state it excludes\nthe whole windows-branch from using jikes!!\n\n(Or give us a jikes with encoding option under windows ;-)\n\n--Holger", "id": 23898, "time": "2002-10-04T10:24:37Z", "bug_id": 13084, "creation_time": "2002-10-04T10:24:37Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 13084, "attachment_id": null, "is_private": false, "id": 24114, "time": "2002-10-08T04:46:19Z", "creator": "hoju@visi.com", "creation_time": "2002-10-08T04:46:19Z", "text": "I'm trying to use jikes-1.17 under windows and it has the same issue.  No -\nencoding option.  However, there are already bugs reported on this on the jikes \nsite.\n\nSee:\n\nhttp://oss.software.ibm.com/developerworks/bugs/?\nfunc=detailbug&bug_id=2645&group_id=10\n\nand \n\nhttp://oss.software.ibm.com/developerworks/bugs/?\nfunc=detailbug&bug_id=2889&group_id=10\n\nand\n\nhttp://oss.software.ibm.com/developerworks/bugs/?\nfunc=detailbug&bug_id=2963&group_id=10\n\n\nLooks like the solution is here:\n\n<quotes frombug=\"2889\">\n<quote>\nThere is no iconv support under Windows and the ICU support \nrequires ICU so you would need to build it yourself. I don't see any way to \nbuild a Windows version that supports -encoding. Oh, also there are cross \ncompile problems since \nwe could not detect iconv support even if it existed. \n\nIt seems like fixing the docs to mention that this option \nis not available on all systems is the way to go.\n</quote>\n\n<quote>\nThis is because Windows does not support encoding transformations by default, \nand we don't want to ship a secondary .dll to accompany Jikes. If you want \nencoding, you must download the iconv package, build it, then build Jikes \nyourself. Or else write your own decoder and contribute it as a patch. \n</quote>\n</quotes>\n\nSo, if someone took their advice and did a custom compile of jikes to enable \nthe -encoding option and provided it to the Tomcat community, our problems \nwould be solved.  Anyone have the knowledge and time to do this?\n\n\nJake"}, {"count": 5, "tags": [], "text": "I am also having this problem on solaris 8, encoding enabled.", "is_private": false, "id": 24175, "creator": "mparker@computer.org", "time": "2002-10-09T01:49:23Z", "bug_id": 13084, "creation_time": "2002-10-09T01:49:23Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 13084, "attachment_id": null, "text": "Sorry, I didn't read the posts carefully enough. My problem isn't the encoding--\nIt looks like the jikes compilation command is not including the filename to be \ncompiled. Here's the output with DEBUG verbosityLevel:\n\nAn error occurred at line: -1 in the jsp file: null\n\nGenerated servlet error:\n    [javac] jsp/error500_jsp.java added as /export/home/mpark/jakarta-tomcat-\n4.1.12/work/Standalone/localhost/memento/jsp/error500_jsp.class doesn't exist.\n    [javac] Compiling 1 source file\n    [javac] Using jikes compiler\ndropping /usr/java1.2/jre/jre/lib/rt.jar from path as it doesn't exist\ndropping /usr/java1.2/Classes/classes.jar from path as it doesn't exist\ndropping /usr/java1.2/Classes/ui.jar from path as it doesn't exist\n    [javac] Compilation arguments:\n    [javac] '-classpath'\n    \n[javac] '/usr/java1.2/jre/lib/ext/iiimp.jar:/usr/java/lib/tools.jar:/export/home\n/mpark/jakarta-tomcat-4.1.12/bin/bootstrap.jar:/export/home/mpark/jakarta-\ntomcat-4.1.12/webapps/memento/WEB-INF/classes:/export/home/mpark/jakarta-tomcat-\n4.1.12/webapps/memento/WEB-INF/lib/log4j-1.2.6.jar:/export/home/mpark/jakarta-\ntomcat-4.1.12/webapps/memento/WEB-\nINF/lib/memento.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/webapps/memento/WEB-INF/lib/webapp.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/shared/classes:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/classes:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/endorsed/xercesImpl.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/endorsed/xmlParserAPIs.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/jasper-compiler.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/commons-logging-api.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/naming-factory.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/ant.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/naming-common.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/naming-resources.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/commons-collections.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/activation.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/jta.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/commons-dbcp.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/mail.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/jasper-runtime.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/jdbc2_0-stdext.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/jndi.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/commons-pool.jar:/export/home/mpark/jakarta-tomcat-\n4.1.12/common/lib/servlet.jar:/usr/java1.2/jre/lib/rt.jar:/export/home/mpark/jak\narta-tomcat-4.1.12/work/Standalone/localhost/memento'\n    [javac] '-encoding'\n    [javac] 'ISO-8859-1'\n    [javac] '-g'\n    [javac]\n    [javac] The ' characters around the executable and arguments are\n    [javac] not part of the command.\n    [javac] File to be compiled:\n    [javac]     /export/home/mpark/jakarta-tomcat-\n4.1.12/work/Standalone/localhost/memento/jsp/error500_jsp.java\n\n", "id": 24176, "time": "2002-10-09T01:56:43Z", "creator": "mparker@computer.org", "creation_time": "2002-10-09T01:56:43Z", "is_private": false}, {"count": 7, "tags": [], "creator": "hoju@visi.com", "text": "Matt,\n\nJust because you have a related problem on Solaris doesn't mean you change the \noriginal OS version.  Given everyone's comments in this bug, this is an issue \non Windows.  If this exact issue was happening on Solaris, the solution would \nbe to change the OS to \"All\", not switch it to your own platform.\n\nI'm changing it back to the Original value \"Windows XP\".  I think we can assume \nany version of Windows.  If you think this is wrong, change the OS to all, but \nsince your issue seems different from this one, I suggest a new bug report \ninstead.\n\nJake", "id": 24181, "time": "2002-10-09T03:54:44Z", "bug_id": 13084, "creation_time": "2002-10-09T03:54:44Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "creator": "mparker@computer.org", "is_private": false, "text": "My apologies. I'm still getting used to bugzilla, and thought the OS version \nwas only related to the comment that I was posting. I'll open a new bug.\n\nMatt\n", "id": 24219, "time": "2002-10-09T18:03:07Z", "bug_id": 13084, "creation_time": "2002-10-09T18:03:07Z", "attachment_id": null}, {"count": 9, "tags": [], "text": "*** Bug 20391 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 51166, "creator": "markt@apache.org", "time": "2004-01-25T23:24:08Z", "bug_id": 13084, "creation_time": "2004-01-25T23:24:08Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "hoju@visi.com", "text": "This should be useful.  Jikes compiled *with* encoding enabled on Windows...\nhttp://www.javaroom.de/index.html\n\nJake", "id": 51170, "time": "2004-01-26T05:30:17Z", "bug_id": 13084, "creation_time": "2004-01-26T05:30:17Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "creator": "markt@apache.org", "text": "Since a version of jikes that supports the -encoding option is available I am \ngoing to close this bug as wontfix.\n\nThanks for the tip Jake.", "id": 51205, "time": "2004-01-26T18:55:33Z", "bug_id": 13084, "creation_time": "2004-01-26T18:55:33Z", "is_private": false, "attachment_id": null}]