[{"count": 0, "tags": [], "bug_id": 59714, "is_private": false, "text": "When I want to view response of HTTP Sampler, that has enabled folow redirects (and there are redirects in this request), the Sampler Result, Request details and Response Data of last request is not displayed, in console I get message:\n\nUncaught Exception java.lang.NullPointerException. See log file for details.\n\nand in jmeter.log there is stack trace:\n\n2016/06/17 09:44:24 ERROR - jmeter.JMeter: Uncaught exception:  java.lang.NullPointerException\n\tat org.apache.jmeter.protocol.http.visualizers.RequestViewHTTP.getQueryMap(RequestViewHTTP.java:304)\n\tat org.apache.jmeter.protocol.http.visualizers.RequestViewHTTP.setSamplerResult(RequestViewHTTP.java:223)\n\tat org.apache.jmeter.visualizers.RequestPanel.setSamplerResult(RequestPanel.java:109)\n\tat org.apache.jmeter.visualizers.SamplerResultTab.setupTabPane(SamplerResultTab.java:229)\n\tat org.apache.jmeter.visualizers.ViewResultsFullVisualizer.valueChanged(ViewResultsFullVisualizer.java:263)\n\tat javax.swing.JTree.fireValueChanged(Unknown Source)\n\tat javax.swing.JTree$TreeSelectionRedirector.valueChanged(Unknown Source)\n\tat javax.swing.tree.DefaultTreeSelectionModel.fireValueChanged(Unknown Source)\n\tat javax.swing.tree.DefaultTreeSelectionModel.notifyPathChange(Unknown Source)\n\tat javax.swing.tree.DefaultTreeSelectionModel.setSelectionPaths(Unknown Source)\n\tat javax.swing.tree.DefaultTreeSelectionModel.setSelectionPath(Unknown Source)\n\tat javax.swing.JTree.setSelectionPath(Unknown Source)\n\tat javax.swing.plaf.basic.BasicTreeUI.selectPathForEvent(Unknown Source)\n\tat javax.swing.plaf.basic.BasicTreeUI$Handler.handleSelection(Unknown Source)\n\tat javax.swing.plaf.basic.BasicTreeUI$Handler.mousePressed(Unknown Source)\n\tat java.awt.Component.processMouseEvent(Unknown Source)\n\tat javax.swing.JComponent.processMouseEvent(Unknown Source)\n\tat java.awt.Component.processEvent(Unknown Source)\n\tat java.awt.Container.processEvent(Unknown Source)\n\tat java.awt.Component.dispatchEventImpl(Unknown Source)\n\tat java.awt.Container.dispatchEventImpl(Unknown Source)\n\tat java.awt.Component.dispatchEvent(Unknown Source)\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)\n\tat java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)\n\tat java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)\n\tat java.awt.Container.dispatchEventImpl(Unknown Source)\n\tat java.awt.Window.dispatchEventImpl(Unknown Source)\n\tat java.awt.Component.dispatchEvent(Unknown Source)\n\tat java.awt.EventQueue.dispatchEventImpl(Unknown Source)\n\tat java.awt.EventQueue.access$500(Unknown Source)\n\tat java.awt.EventQueue$3.run(Unknown Source)\n\tat java.awt.EventQueue$3.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)\n\tat java.awt.EventQueue$4.run(Unknown Source)\n\tat java.awt.EventQueue$4.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)\n\tat java.awt.EventQueue.dispatchEvent(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\n\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\n\tat java.awt.EventDispatchThread.run(Unknown Source)\n\n\n\nIn this case I have 2 redirects (HTTP 302), details are viible for all but last redirects. NullPointerException is whe I click directly on tree result and when I unfold subresults and click on the last one.", "id": 191731, "time": "2016-06-17T07:51:40Z", "creator": "przeszotek@t-mobile.pl", "creation_time": "2016-06-17T07:51:40Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 59714, "is_private": false, "text": "Could you have a look inside your log files? There should be an exception logged, that your query parameter is not properly encoded.\n\nNontheless, I think the NPE should be avoided.\n\nThis bug is related to https://bz.apache.org/bugzilla/show_bug.cgi?id=59712\nas it has the same root cause. The query param decoding seems to be to harsh for the real world.", "id": 191755, "time": "2016-06-17T16:28:10Z", "creator": "felix.schumacher@internetallee.de", "creation_time": "2016-06-17T16:28:10Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "felix.schumacher@internetallee.de", "attachment_id": 33958, "text": "Created attachment 33958\nUse the original query when decoding of it fails\n\nThis patch changes the behaviour of the method RequestViewHTTP#decodeQuery from returning 'null' to returning the original query.\n\nI think it is OK, but I am interested, what others think about this.", "id": 191756, "time": "2016-06-17T16:41:02Z", "bug_id": 59714, "creation_time": "2016-06-17T16:41:02Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 59714, "text": "(In reply to Felix Schumacher from comment #1)\n> Could you have a look inside your log files? There should be an exception\n> logged, that your query parameter is not properly encoded.\n> \n> Nontheless, I think the NPE should be avoided.\n> \n> This bug is related to https://bz.apache.org/bugzilla/show_bug.cgi?id=59712\n> as it has the same root cause. The query param decoding seems to be to harsh\n> for the real world.\n\nThere is nothing more in log file - this stacktrace is from logi file. After clicking in result tree, there is only new stack trace logged.", "id": 191857, "time": "2016-06-21T06:17:43Z", "creator": "przeszotek@t-mobile.pl", "creation_time": "2016-06-21T06:17:43Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "felix.schumacher@internetallee.de", "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of bug 59712 ***", "id": 191874, "time": "2016-06-21T18:01:43Z", "bug_id": 59714, "creation_time": "2016-06-21T18:01:43Z", "is_private": false}]