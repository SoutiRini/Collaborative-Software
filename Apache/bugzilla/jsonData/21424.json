[{"count": 0, "tags": [], "creator": "weiqigao@networkusa.net", "attachment_id": null, "is_private": false, "id": 40236, "time": "2003-07-09T00:14:40Z", "bug_id": 21424, "creation_time": "2003-07-09T00:14:40Z", "text": "I have observed some behavioral changed of the StarTeam checkout task \nstcheckout between Ant 1.5.1 and Ant 1.5.3.\n\nI'm using the task this way:\n  <target name=\"checkout\">\n    <stcheckout username=\"me\"\n            password=\"mysecret\"\n            url=\"myserver:49201/myproject/myproject\"\n            rootstarteamfolder=\"java\"\n            createworkingdirs=\"true\"\n            includes=\"*\"\n            excludes=\"*Src.jar\"\n            deleteuncontrolled=\"true\"/>\n  </target>\n\nI switched from using Ant 1.5.1 to Ant 1.5.3 last week, and experienced \ntwo changes of behavior:\n\n1. An empty set of working directories is created in the directory where \nI run the build.  Although the actual checked out files are in the \ncorrect place (the StarTeam default working folder as setup in the \nStarTeam GUI).\n\n2. The stcheckout task doesn't seem to delete all the files that are NOT \nin StarTeam anymore, even though I have set deleteuncontolled to true.\n\nBoth were working properly in Ant 1.5.1 but not in 1.5.3.\n\nWe are using StarTeam 5.2.118 and the StarGate Runtime 5.2.  And Sun JDK 1.4.2.\n\nI have tracked it down to this line of code in \norg.apache.tools.ant.tasfdef.optional.starteam.TreeBasedTask.getLocalRootMapping(Folder\n\nstarteamrootfolder):\n\nlocalrootfolder = starteamrootfolder.getPathFragment();\n\nOn my system, this returns the final portion of my starteamrootfolder \nrather than the full path of the default working folder, which was what \nwe want.\n\nFor my build file, I have\n    starteamroolfolder=\"aaaa/bbbb/cccc\"\nand the localrootfolder gets set to \"cccc\" after this line.  It should probably\nbe set to \"C:/myproject/aaaa/bbbb/cccc\"."}, {"attachment_id": null, "tags": [], "creator": "antoine@apache.org", "is_private": false, "count": 1, "id": 40477, "time": "2003-07-11T15:26:36Z", "bug_id": 21424, "creation_time": "2003-07-11T15:26:36Z", "text": "Could you download ant1.6alpha, including the source code, and check whether \nyour problem still occurs with ant 1.6.\nIf your problem still occurs with ant 1.6, it would be useful if you could \nprepare a patch that could solve the issue."}, {"count": 2, "tags": [], "bug_id": 21424, "is_private": false, "text": "Antoine -\nI am unaware of any code changes between 1.5.3 and 1.6 that would have changed\nthis behavior.", "id": 40479, "time": "2003-07-11T15:36:40Z", "creator": "scohen@apache.org", "creation_time": "2003-07-11T15:36:40Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 21424, "is_private": false, "text": "The behavior is still present in the 1.6alpha nightly from 2003-07-11.", "id": 40500, "time": "2003-07-11T18:56:29Z", "creator": "weiqigao@networkusa.net", "creation_time": "2003-07-11T18:56:29Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 21424, "attachment_id": null, "id": 40504, "creation_time": "2003-07-11T19:24:27Z", "time": "2003-07-11T19:24:27Z", "creator": "antoine@apache.org", "text": "this confirms what Steve Cohen wrote. Can you try to prepare a patch to solve \nthis issue ? There are few committers who have the necessary environment \n(StarTeam) to do that. A patch against 1.6alpha would be the best, since there \nhave been some recent formatting changes in the code. Antoine.", "is_private": false}, {"count": 5, "tags": [], "bug_id": 21424, "is_private": false, "text": "Actually, Weiqi Gao did prepare a patch and submitted it via the list.  I\nrejected it as being aimed at a point too deep in the code - its side effects\nwould have been much worse than this problem.  Basically, it would have broken\nthe task.  \n\nI promised to take a look at it when time permits but I have very little time\nnow, unfortunately.  In a couple of weeks, I may have more opportunity.\n\nIs there a release coming up soon?  Is that the reason for your push here, Antoine?", "id": 40505, "time": "2003-07-11T19:31:23Z", "creator": "scohen@apache.org", "creation_time": "2003-07-11T19:31:23Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 21424, "is_private": false, "text": "Created attachment 7259\nI'm attaching my rejected patch here, just for the record.", "id": 40512, "time": "2003-07-11T20:49:35Z", "creator": "weiqigao@networkusa.net", "creation_time": "2003-07-11T20:49:35Z", "attachment_id": 7259}, {"count": 7, "tags": [], "bug_id": 21424, "attachment_id": null, "id": 44360, "creation_time": "2003-09-19T18:11:03Z", "time": "2003-09-19T18:11:03Z", "creator": "weiqigao@networkusa.net", "text": "Just a friendly ping to see how this issue with be dealt with in 1.6.", "is_private": false}, {"count": 8, "tags": [], "bug_id": 21424, "is_private": false, "text": "starteam ant tasks have been removed starting with Ant 1.8.0", "id": 165937, "time": "2013-03-18T02:25:43Z", "creator": "antoine@apache.org", "creation_time": "2013-03-18T02:25:43Z", "attachment_id": null}]