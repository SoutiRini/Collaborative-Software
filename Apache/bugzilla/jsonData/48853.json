[{"count": 0, "tags": [], "bug_id": 48853, "text": "It seems the changes for bug 20174 have a serious performance impact.\n\nNot reading the bytes individually in getCertificates might help, but I intend to look at Harmony's implmentation of JerEntry#getCertificates to see whether we can do better than reading the entry completely.", "id": 135038, "time": "2010-03-04T05:16:38Z", "creator": "bodewig@apache.org", "creation_time": "2010-03-04T05:16:38Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 48853, "attachment_id": null, "id": 135049, "time": "2010-03-04T13:56:17Z", "creator": "bodewig@apache.org", "creation_time": "2010-03-04T13:56:17Z", "is_private": false, "text": "svn revision 918989 uses buffering as a simple measure and immediately performs\na lot better.  The new AntClassLoaderPerformance test of svn revision 918979\nstill takes about 50% longer than using Ant 1.7.1, though (but it now takes\nless than a fifth of the time Ant 1.8.0 needs).\n\nImplementing getCertifactes on top of ZipFile is non-trivial and would force us\nto do signature verification ourselves.\n\nIt may be better to use java.util.JarFile instead of Ant's ZipFile directly for\nsigned jars and return a null certificate array for unsigned jars directly."}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "is_private": false, "id": 135050, "time": "2010-03-04T14:21:41Z", "bug_id": 48853, "creation_time": "2010-03-04T14:21:41Z", "text": "I just realized we are not using Ant's zip package at all, so it should be pretty easy to go straight to JarFile all the way.\n\nI think this is because AntClassLoader predates Java 1.2 or at least was supposed to work on Java 1.1 as well."}, {"count": 3, "tags": [], "bug_id": 48853, "attachment_id": null, "id": 135052, "time": "2010-03-04T15:17:48Z", "creator": "bodewig@apache.org", "creation_time": "2010-03-04T15:17:48Z", "is_private": false, "text": "with svn revision 919018 we've reached almost the same performance as 1.7.1."}]