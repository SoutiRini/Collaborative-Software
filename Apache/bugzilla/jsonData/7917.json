[{"count": 0, "tags": [], "bug_id": 7917, "is_private": false, "id": 13170, "creation_time": "2002-04-10T11:45:02Z", "time": "2002-04-10T11:45:02Z", "creator": "preziosi@cnam.fr", "text": "Please find enclosed a small fix to allow mod_auth_db to compile\n with DB 4.xx.\n\n Best regards\n\n*** mod_auth_db.c.~1~\tWed Mar 13 22:05:33 2002\n--- mod_auth_db.c\tWed Apr 10 13:35:58 2002\n***************\n*** 105,110 ****\n--- 105,113 ----\n  #if (DB_VERSION_MAJOR == 3)\n  #define DB3\n  #endif\n+ #if (DB_VERSION_MAJOR == 4)\n+ #define DB4\n+ #endif\n  #endif\n  \n  typedef struct {\n***************\n*** 167,173 ****\n      q.data = user;\n      q.size = strlen(q.data);\n  \n! #if defined(DB3)\n      if (   db_create(&f, NULL, 0) != 0 \n          || f->open(f, auth_dbpwfile, NULL, DB_HASH, DB_RDONLY, 0664) != 0) {\n  #elif defined(DB2)\n--- 170,176 ----\n      q.data = user;\n      q.size = strlen(q.data);\n  \n! #if defined(DB3) || defined(DB4)\n      if (   db_create(&f, NULL, 0) != 0 \n          || f->open(f, auth_dbpwfile, NULL, DB_HASH, DB_RDONLY, 0664) != 0) {\n  #elif defined(DB2)\n***************\n*** 180,186 ****\n  \treturn NULL;\n      }\n  \n! #if defined(DB2) || defined(DB3)\n      if (!((f->get) (f, NULL, &q, &d, 0))) {\n  #else\n      if (!((f->get) (f, &q, &d, 0))) {\n--- 183,189 ----\n  \treturn NULL;\n      }\n  \n! #if defined(DB2) || defined(DB3) || defined(DB4)\n      if (!((f->get) (f, NULL, &q, &d, 0))) {\n  #else\n      if (!((f->get) (f, &q, &d, 0))) {\n***************\n*** 190,196 ****\n  \tpw[d.size] = '\\0';\t/* Terminate the string */\n      }\n  \n! #if defined(DB2) || defined(DB3)\n      (f->close) (f, 0);\n  #else\n      (f->close) (f);\n--- 193,199 ----\n  \tpw[d.size] = '\\0';\t/* Terminate the string */\n      }\n  \n! #if defined(DB2) || defined(DB3) || defined(DB4)\n      (f->close) (f, 0);\n  #else\n      (f->close) (f);", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 7917, "is_private": false, "id": 13537, "creation_time": "2002-04-15T00:18:45Z", "time": "2002-04-15T00:18:45Z", "creator": "jerenkrantz@apache.org", "text": "While this patch is valid, Apache 2.0.35 supports DB 4.xx out-of-the-box.  I am\nnot unsure whether we will be allowing code patches into the 1.3 series.\n\nYou may be best off trying to use Apache 2.0 instead.\n\nThanks for using Apache!", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 7917, "attachment_id": null, "text": "Change to state to get it off the \"new\" radar.", "id": 14099, "time": "2002-04-19T21:50:19Z", "creator": "slive@apache.org", "creation_time": "2002-04-19T21:50:19Z", "is_private": false}]