[{"count": 0, "tags": [], "text": "Scripting variables declared within tag implementing TryCatchFinally interface\nare positioned inside try block in the generated code thus hiding their\nvisibility to rest of the page.\n\nExample (foo.tld not included):\n\ntest.jsp:\n<%@taglib uri=\"foo\" prefix=\"foo\" %>\n\n<foo:foo>\n</foo:foo>\n\n<%= test %>\n\nFooTag.java:\npackage foo;\n\nimport javax.servlet.jsp.tagext.*;\n\npublic class FooTag extends BodyTagSupport implements TryCatchFinally {\n\t\n\tpublic int doEndTag() {\n\t\tpageContext.setAttribute(\"test\", \"testValue\");\n\t\treturn EVAL_PAGE;\n\t}\n\t\n\tpublic void doCatch(Throwable exc) {\n\t}\n\t\n\tpublic void doFinally() {\n\t}\n}\n\nFooTEI.java:\npackage foo;\n\nimport javax.servlet.jsp.tagext.*;\n\npublic class FooTEI extends TagExtraInfo {\n\tprivate static final String DEFAULT_VAR_NAME = \"test\";\n\t\n    public VariableInfo[] getVariableInfo(TagData tagData) {\n    \tString varName = null;\n        VariableInfo varInfo = new VariableInfo(\n            (varName==null?DEFAULT_VAR_NAME:varName), \n            \"java.lang.String\", true, \n            VariableInfo.AT_END);\n        return new VariableInfo[] {varInfo};\n    }\n}\n\nResulting compile exception:\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: 5 in the jsp file: /test.jsp\n\nGenerated servlet error:\n    [javac] Compiling 1 source file\n\nC:\\Server\\Tomcat4.1\\work\\Standalone\\localhost\\_\\test_jsp.java:86: cannot resolve\nsymbol\nsymbol  : variable test \nlocation: class org.apache.jsp.test_jsp\n      out.print( test );\n                 ^\n1 error", "attachment_id": null, "bug_id": 14699, "id": 26625, "time": "2002-11-20T08:49:52Z", "creator": "sami.pajunen@almare.com", "creation_time": "2002-11-20T08:49:52Z", "is_private": false}]