[{"count": 0, "tags": [], "bug_id": 44407, "attachment_id": null, "is_private": false, "id": 113687, "time": "2008-02-13T03:09:35Z", "creator": "mamm_soy@yahoo.es", "creation_time": "2008-02-13T03:09:35Z", "text": "I'm trying to send a file through the http response.\n\nWhen the information arrives to the browser, this doesn't indentify de name of \nfile. It sets the name of 'jsp' file as file name to download.\n\nI'm adding in the response the http header \"Content-Type:...\" and \"Content-\nDisposition\", \"attachment; filename=...\".\n\nThe http header \"Content-Disposition\" doesn\u00b4t arrive to the browser.\n\nI send some information about the communication: \n\nRequest sent:\n\n(Request-Line)\tGET /java/sit/warranty/attachment/attachmentViewer.jsp?id=5 \nHTTP/1.1\nAccept\t*/*\nAccept-Encoding\tgzip, deflate\nAccept-Language\tes\nConnection\tKeep-Alive\nCookie\tJSESSIONID=0000AZSBjefgsR7F0HBfeJLDPpa:-1\nHost\t192.168.0.201:81\nReferer\thttp://192.168.0.201:81/java/sit/warranty/attachment/attach.jsp?\nw=81185930&c=1\nUA-CPU\tx86\nUser-Agent\tMozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; \nInfoPath.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)\n\nRequest Received:\n\n(Status-Line)\tHTTP/1.1 200 OK\nCache-Control\tno-cache\nConnection\tKeep-Alive\nContent-Language\tes-ES\nContent-Type\tapplication/octet-stream\nDate\tWed, 13 Feb 2008 09:24:27 GMT\nExpires\tThu, 01 Jan 1970 00:00:00 GMT\nKeep-Alive\ttimeout=300, max=92\nPragma\tno-cache\nServer\tWebSphere Application Server/6.0\nTransfer-Encoding\tchunked\n\nJSP Source:\n... \nresponse.setContentType(att.getMimeType());\nresponse.setHeader(\"Content-Disposition\", \"attachment; filename=\" + \natt.getFileName());\n...\n\nBrowsers used:\n\nMSIE v7.5730.13\nFireFox v2.0.0.12\n\nHTTP Server:\n\nApache/2.0.58\n\nWeb Application Server:\n\nWebSphere Application Server - V6.0.2.19\n\nThanks."}, {"count": 1, "attachment_id": null, "creator": "nick@webthing.com", "is_private": false, "id": 113693, "time": "2008-02-13T03:50:48Z", "bug_id": 44407, "creation_time": "2008-02-13T03:50:48Z", "tags": [], "text": "Do you have any evidence that your backend is sending a Content-Disposition\nheader to Apache?\n\nWhat connector are you using?   proxy_ajp, proxy_http, mod_jk? other?"}, {"count": 2, "tags": [], "text": "(In reply to comment #1)\n> Do you have any evidence that your backend is sending a Content-Disposition\n> header to Apache?\n> What connector are you using?   proxy_ajp, proxy_http, mod_jk? other?\n\nI don't know what kind of connector it's using.\n\n\u00bfHow can i see it?\n\nThe content of httpd.conf is:\n\n  1    \nWebSpherePluginConfig /QIBM/UserData/WebSphere/AppServer/V6/Base/profiles/WAS6TE\nST/config/cells/I5_WAS6TEST/nodes/IHS_I5_WAS6TEST_node/servers/IHS_I5_WAS6TEST/p\nlugin-cfg.xml \n  2    LoadModule was_ap20_module /QSYS.LIB/QWAS6.LIB/QSVTAP20.SRVPGM \n  3    Listen *:81 \n  4    DocumentRoot /www/was6test/htdocs \n  5    Options -ExecCGI -FollowSymLinks -SymLinksIfOwnerMatch -Includes -\nIncludesNoExec -Indexes -MultiViews \n  6    LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" \ncombined \n  7    LogFormat \"%{Cookie}n \\\"%r\\\" %t\" cookie \n  8    LogFormat \"%{User-agent}i\" agent \n  9    LogFormat \"%{Referer}i -> %U\" referer \n  10    LogFormat \"%h %l %u %t \\\"%r\\\" %>s %b\" common \n  11    CustomLog logs/access_log combined \n  12    LogMaint logs/access_log 7 0 \n  13    LogMaint logs/error_log 7 0 \n  14    SetEnvIf \"User-Agent\" \"Mozilla/2\" nokeepalive \n  15    SetEnvIf \"User-Agent\" \"JDK/1\\.0\" force-response-1.0 \n  16    SetEnvIf \"User-Agent\" \"Java/1\\.0\" force-response-1.0 \n  17    SetEnvIf \"User-Agent\" \"RealPlayer 4\\.0\" force-response-1.0 \n  18    SetEnvIf \"User-Agent\" \"MSIE 4\\.0b2;\" nokeepalive \n  19    SetEnvIf \"User-Agent\" \"MSIE 4\\.0b2;\" force-response-1.0 \n...\n\n", "is_private": false, "id": 113715, "creator": "mamm_soy@yahoo.es", "time": "2008-02-13T07:28:02Z", "bug_id": 44407, "creation_time": "2008-02-13T07:28:02Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 44407, "is_private": false, "text": "It is most likely that things get messed up by the WebSphere plugin or\nWebsphere. Please open a ticket with IBM to ensure that this is not the case.\nFurthermore please sniff the network traffic between your application server and\nhttpd to find out as suggested by Nick if the backend is really sending a\nContent-Disposition header. BTW: Who provided the httpd you are using? Did you\ncompile it yourself or was it delivered with WebSphere?", "id": 113723, "time": "2008-02-13T12:21:23Z", "creator": "rpluem@apache.org", "creation_time": "2008-02-13T12:21:23Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 44407, "is_private": false, "text": "We opened a ticket in IBM as well as Apache.\n\nThe IBM's technician has told us that we must update the version of OS/400.\n\nLet's hope we can solve this problem.\n\nI'll keep you informed.\n\nThanks again.", "id": 113739, "time": "2008-02-14T01:57:52Z", "creator": "mamm_soy@yahoo.es", "creation_time": "2008-02-14T01:57:52Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 44407, "text": "We have updated the version of the WebSphere Application Server the last week and the error has been resolved.\n\nThanks for your help and excuse for making yourselves lose the time.\n\n\n\n", "count": 5, "id": 114186, "time": "2008-03-03T00:45:26Z", "creator": "mamm_soy@yahoo.es", "creation_time": "2008-03-03T00:45:26Z", "is_private": false}]