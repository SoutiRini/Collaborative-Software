[{"attachment_id": null, "tags": [], "bug_id": 28492, "text": "When including a directory of configuration files, the reference must not contain\na symbolic link. I e.g. have the following case:\n\n/mnt/disk0/www.server1/<lots of virtual servers>.conf\n/mnt/disk0/www.server2/<lots of virtual servers>.conf\n\n/virtual/www.server1 --- symbolic link --> /mnt/disk0/www.server1/\n/virtual/www.server2 --- symbolic link --> /mnt/disk0/www.server2/\n\nIf I put\n\nInclude /mnt/disk0/www.server1/*.conf\n\ninto httpd.conf, it works. If I put\n\nInclude /virtual/www.server1/*.conf\n\ninto httpd.conf, it works not. In the strace of the httpd process, it is visible\nthat apache tests, whether the /virtual/www.server1 reference is a directory but\ngets an error and halts. \n\nApache should test, whether an include reference is a symbolic link and if yes, \ntest its target to be a directory.", "count": 0, "id": 56076, "time": "2004-04-20T09:46:35Z", "creator": "hps@intermeta.de", "creation_time": "2004-04-20T09:46:35Z", "is_private": false}, {"count": 1, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "id": 56077, "creation_time": "2004-04-20T09:59:56Z", "time": "2004-04-20T09:59:56Z", "bug_id": 28492, "text": "That is by intention in order to avoid infinite loops. It just needs to be\nbetter documented.", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 28492, "text": "Sorry to bother you, but IMHO this is still a bug.\n\nWe e.g. have a scenario where this include link points to an NFS mounted\ndirectory which can change due to failover reasons. This is how I found the\nproblem. Basically I have a Include \"/virtual/foo/*.conf\" and the foo can be\ndynamically change doing a failover and a httpd restart. Our current solution\nrewrites the config files using sed and is awkward at best (pun intended).\n\nCan we have an IncludeFollowLinksYesIveReadTheManualAndKnowAboutPossibleLoops\ndirective? :-)  (Would you accept patches?)\n\nFor content we have \"FollowSymLinks\".Why not the same thing for the configuration? ", "count": 2, "id": 56101, "time": "2004-04-20T14:01:53Z", "creator": "hps@intermeta.de", "creation_time": "2004-04-20T14:01:53Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 28492, "is_private": false, "count": 3, "id": 56153, "time": "2004-04-21T07:22:03Z", "creator": "nd@perlig.de", "creation_time": "2004-04-21T07:22:03Z", "text": "I've finally found a way to stop include directive recursion (by using the pool\ncontext). So I no longer see a need for the symlink stopper at all, hence I'm\ngoing to patch it out. (just replacing ap_is_rdirectory with ap_is_directory in\nap_process_resource_config and process_resource_config_nofnmatch).\n\nThe recursion stopper is currently in 2.1 and proposed for backport into 2.0."}, {"count": 4, "tags": [], "bug_id": 28492, "attachment_id": null, "id": 56157, "time": "2004-04-21T09:02:38Z", "creator": "hps@intermeta.de", "creation_time": "2004-04-21T09:02:38Z", "is_private": false, "text": "Thanks a lot! This will really help me with our HA environments and future\nreleases of the httpd."}, {"count": 5, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "text": "FYI: The fix will be in 2.0.51.", "id": 62606, "time": "2004-08-27T19:14:45Z", "bug_id": 28492, "creation_time": "2004-08-27T19:14:45Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 28492, "is_private": false, "id": 63162, "attachment_id": null, "creator": "nd@perlig.de", "creation_time": "2004-09-07T17:12:38Z", "time": "2004-09-07T17:12:38Z", "text": "*** Bug 31099 has been marked as a duplicate of this bug. ***"}]