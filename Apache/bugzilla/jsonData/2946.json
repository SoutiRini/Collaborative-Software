[{"count": 0, "tags": [], "bug_id": 2946, "attachment_id": null, "id": 4205, "time": "2001-08-01T05:05:43Z", "creator": "mauro.bertapelle@jmatica.com", "creation_time": "2001-08-01T05:05:43Z", "is_private": false, "text": "configurations tested:\n\ntomcat 4.0b6 standalone\nlinux mandrake + sun jdk 1.3.0_02\nlinux mandrake + sun jdk 1.2.2\nsolaris 2.8 sparc + built in sun jdk 1.2.2_05a native threads\njsse 1.0.2\n\nWhat I've found is that, using the ssl connector, if the user\npress the stop button while waiting for a servlet returning\nfrom a post/get action, the jvm jump to a 100% cpu utilization and\nnever return.\n\nHow to reproduce:\n\nmodify the servlet RequestParamExample in the examples webapp:\n--\n    public void doPost(HttpServletRequest request,\n                      HttpServletResponse response)\n        throws IOException, ServletException\n    {\n      response.setContentType(\"text/html\");\n      PrintWriter out = response.getWriter();\n      try {\n        Thread.sleep(2000);\n      }\n      catch (InterruptedException e) {}\n      out.println(\"<html><body>\");\n      for (int i=0; i < 1000; i++) {\n        out.println(\"<br>XXXXXXXXXXXXXXXXXXX\");\n      }\n      out.println(\"</body></html>\");\n\n//        doGet(request, response);\n    }\n--\n\nnavigate to the url:\n\nhttps://localhost/examples/servlet/RequestParamExample\n\npress the submit button and then rapidly press the stop button, you should\nnotice the problem.\n\n(sorry for my english..)\n\nMauro Bertapelle\nJMatica Srl\nmauro.bertapelle@jmatica.com\n--"}, {"count": 1, "tags": [], "text": "I was able to reproduce the bug over SSL.\n\nI wasn't able to reproduce the problem with normal non-SSL socket (which your \nbug report doesn't mentioned, so I suppose it doesn't happen for you either). \nCan you confirm this ?", "attachment_id": null, "bug_id": 2946, "id": 4223, "time": "2001-08-01T15:41:48Z", "creator": "remm@apache.org", "creation_time": "2001-08-01T15:41:48Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 2946, "attachment_id": null, "is_private": false, "id": 4224, "time": "2001-08-01T19:01:38Z", "creator": "remm@apache.org", "creation_time": "2001-08-01T19:01:38Z", "text": "I failed to find the root cause of the bug, but it's fixed.\n\nIt was triggered by the fact that a SSLSocket doesn't behave the same way as a \nSocket does (it's a known bug with JSSE), and it made the data flush algorithm \nin Catalina do strange things."}]