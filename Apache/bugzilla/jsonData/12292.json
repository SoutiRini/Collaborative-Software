[{"count": 0, "tags": [], "creator": "nicolaken@apache.org", "attachment_id": null, "is_private": false, "id": 22248, "time": "2002-09-04T11:46:45Z", "bug_id": 12292, "creation_time": "2002-09-04T11:46:45Z", "text": "It enables to use  <depends target=\"\"/> tag inside targets, not only in the\ndepends attribute.\n\nExample:\n\n<?xml version=\"1.0\"?>\n<project default=\"test\" basedir=\".\" name=\"test\">\n    \t\n    <target  name=\"pre1\">\n       <echo message=\"pre1\"/>\n    </target>\n\n    <target  name=\"pre2\">\n       <echo message=\"pre2\"/>\n    </target>\n    \n    <target  name=\"test\" depends=\"pre1,innerpre1,test2\">\n    </target>\n    \n    <target  name=\"test2\" depends=\"pre1,pre2\">\n       <echo message=\"test-before\"/>\n       <depends target=\"c\"/>\n<!--   <depends target=\"test\"/>  -->\n       <echo message=\"test-after\"/>\n    </target>\n        \n    <target  name=\"c\" depends=\"innerpre1,innerpre2\">\n       <echo message=\"c\"/>\n    </target>\n    \n    <target  name=\"innerpre1\">\n       <echo message=\"innerpre1\"/>\n    </target>\n    \n    <target  name=\"innerpre2\">\n       <echo message=\"innerpre2\"/>\n    </target>\n    \n</project>\n\nWill yield:\n\npre1:\n     [echo] pre1\n\ninnerpre1:\n     [echo] innerpre1\n\npre2:\n     [echo] pre2\n\ntest2:\n     [echo] test-before\n\ninnerpre2:\n     [echo] innerpre2\n\nc:\n     [echo] c\n     [echo] test-after\n\ntest:\n\nBUILD SUCCESSFUL\nTotal time: 1 second\n\n@todo check the if-unless-etc stuff."}, {"count": 1, "tags": [], "bug_id": 12292, "attachment_id": 2913, "id": 22250, "time": "2002-09-04T11:57:36Z", "creator": "nicolaken@apache.org", "creation_time": "2002-09-04T11:57:36Z", "is_private": false, "text": "Created attachment 2913\ndepends.zip; contains the files that were changed and a new Depends.java class"}, {"count": 2, "tags": [], "creator": "conor@apache.org", "attachment_id": null, "is_private": false, "id": 30261, "time": "2003-01-29T13:46:30Z", "bug_id": 12292, "creation_time": "2003-01-29T13:46:30Z", "text": "What is the use case? I'm not sure why this would be a good thing. It would seem\nto make the dependency graph no longer obvious. In the example shown, the output\nof \"test-after\" is misleadingly asssociated with the \"c\" target."}, {"count": 3, "tags": [], "creator": "nicolaken@apache.org", "attachment_id": null, "is_private": false, "id": 30262, "time": "2003-01-29T14:16:54Z", "bug_id": 12292, "creation_time": "2003-01-29T14:16:54Z", "text": "The use case is that of syntax sugar.\n\nInstead of using it, one could simply split the target in many pieces and add\ndependencies on those, but this many times makes the build really hard to read\nand maintain.\n\nIn this case it's simple:\n\n    <target  name=\"test2\" depends=\"pre1, pre2, c, testafter\">\n       <echo message=\"test-before\"/>\n    </target>\n\n    <target  name=\"testafter\">\n       <echo message=\"test-after\"/>\n    </target>\n\nSo users use <antcall> for it, with the associated new-project overhead etc.\n\nTaken from Myrmidon \nhttp://ant.apache.org/myrmidon/differences.html\n\n\" As well as the depends attribute of the Target there is a new <depends> task\nthat allows you to evaluate dependencies inside a target just like executing a\nnormal task. This change was made as previously users have tried to achieve this\nbehaviour by using antcall. However you had to add if attributes to the common\ntargets to make sure that they were not evaluated multiple times. This was\ndifficult and error prone. Building it into the tool helps directly supports\nthis usecase.\"\n\nAs for the misleading target association, it's a bug 8-)"}]