[{"count": 0, "tags": [], "creator": "frederic.vanclef@ucb-group.com", "attachment_id": null, "id": 9835, "time": "2002-01-24T07:47:57Z", "bug_id": 6000, "creation_time": "2002-01-24T07:47:57Z", "is_private": false, "text": "Hello,\n\n\nI want to use a jsp page to retrieve binary data.\n\nhere is the code of the jsp page : \n<%@ page language=\"java\" %>\n<%@ page import=\"java.io.*\" %>\n<jsp:useBean id=\"transform\" scope=\"page\" class=\"transform.Transform\"/>\n<%    \n    OutputStream out1 = response.getOutputStream();\n%>\n \nand here is the message I receive from the Server.\n\nError: 500\nLocation: /activities/jsp/transform.jsp\nErreur interne de servlet:\n\njava.lang.IllegalStateException: getOutputStream() a d\u00e9j\u00e0 \u00e9t\u00e9 appel\u00e9\n\tat org.apache.tomcat.facade.HttpServletResponseFacade.getWriter(Unknown \nSource)\n\tat org.apache.jasper.runtime.JspWriterImpl.initOut(Unknown Source)\n\tat org.apache.jasper.runtime.JspWriterImpl.flushBuffer(Unknown Source)\n\tat jsp.transform_11._jspService(transform_11.java:111)\n\tat org.apache.jasper.runtime.HttpJspBase.service(Unknown Source)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java)\n\tat org.apache.tomcat.facade.ServletHandler.doService(Unknown Source)\n\tat org.apache.tomcat.core.Handler.invoke(Unknown Source)\n\tat org.apache.tomcat.core.Handler.service(Unknown Source)\n\tat org.apache.tomcat.facade.ServletHandler.service(Unknown Source)\n\tat org.apache.tomcat.core.ContextManager.internalService(Unknown Source)\n\tat org.apache.tomcat.core.ContextManager.service(Unknown Source)\n\tat org.apache.tomcat.modules.server.Http10Interceptor.processConnection\n(Unknown Source)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt(Unknown Source)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(Unknown Source)\n\tat java.lang.Thread.run(Thread.java:484)"}, {"count": 1, "tags": [], "bug_id": 6000, "is_private": false, "text": "If you want to retrieve binary data, then you must use request.getInputStream.  \nJSP pages (as required by the spec) use response.getWriter, so that calls to \nresponse.getOutputStream are then correctly faulted.", "id": 9837, "time": "2002-01-24T08:05:35Z", "creator": "william.barker@wilshire.com", "creation_time": "2002-01-24T08:05:35Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "brian@experts-exchange.com", "attachment_id": null, "id": 14490, "time": "2002-04-23T18:27:06Z", "bug_id": 6000, "creation_time": "2002-04-23T18:27:06Z", "is_private": false, "text": "Should binary data be written as a char[], doesn't this do some type of encoding\non the binary data?  The javadoc for java 1.3.1 says to use getOutputStream to\nprint binary data."}]