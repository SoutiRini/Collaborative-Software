[{"count": 0, "tags": [], "bug_id": 21037, "text": "Junit task creates XML files for print summary. It also outputs all the \nSystem.out in that XML under <system-out> element as CDATA. If the output \nitself have an XML having CDATA it complains while generating the html report. \nFoolowing is the ant task used and the error which I am getting.\n\n    <target name=\"test\">\n\t\t<junit fork=\"true\" printsummary=\"true\" \nerrorproperty=\"JUnitErrorProperty\" failureproperty=\"JUnitFailureProperty\" \nshowoutput=\"false\">\n\t\t\t<formatter type=\"xml\"/>\n\t\t\t\n\t\t\t<batchtest>\n\t\t\t\t<fileset dir=\"${build.classes.dir}\">\n\t\t\t\t\t <include \nname=\"**/testcases/**/*Test.class\"/>\n\t\t\t\t\t <exclude \nname=\"**/testcases/AllTests.class\"/>\n\t\t\t\t</fileset>\n\t\t\t</batchtest>\n      \n\t\t\t<classpath>\n\t\t\t\t<path refid=\"compile.classpath\"/>\n\t\t\t\t<pathelement path=\"${deployable.build.dir}\"/>\n\t\t\t</classpath>\n\t\t</junit>\n\t\t\n\t\t<echo>Creating JUnit report in html</echo>\n\t\t<mkdir dir=\"${junit.reports}/html\"/>\n\t\t<junitreport todir=\"${junit.reports}\">\n\t\t\t<fileset dir=\".\">\n\t\t\t\t<include name=\"TEST-*.xml\"/>\n\t\t\t</fileset>\n\t\t\t\n\t\t\t<report format=\"frames\" todir=\"${junit.reports}/html\" />\n\t\t</junitreport>\n\t</target>\n\n[junitreport] [Fatal Error] TEST-\ncom.lastminute.charter.testcases.util.MailSenderTest.xml:262:7: The element \ntype \"system-out\" must be terminated by the matching end-tag \"</system-out>\".\n[junitreport] The file /home/bbhangal/build/webapps/charters/TEST-\ncom.lastminute.charter.testcases.util.MailSenderTest.xml is not a valid XML \ndocument. It is possibly corrupted.\n[junitreport] Using Xalan version: Xalan Java 2.4.D1\n[junitreport] Transform time: 1078ms", "id": 39313, "time": "2003-06-24T07:39:01Z", "creator": "bbhangale@lastminute.com", "creation_time": "2003-06-24T07:39:01Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "text": "This is supposed to be fixed in Ant 1.5.2 and newer (1.5.3 being the recommended\nupgrade).", "id": 39314, "time": "2003-06-24T07:44:10Z", "bug_id": 21037, "creation_time": "2003-06-24T07:44:10Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 21037, "text": "I tried the apache-ant-1.5.3-1 version as well but same problem. I know the \nnested CDATA creates a problem in XML but my System.out have a XML with CDATA.\n\n<system-out><![CDATA[\n<!-- Error response XML syntax which will be sent to client -->\n    <ERROR>\n        <![CDATA[<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\t\t\t<RESPONSE>\n\t\t\t\t<GDS/>\n\t\t\t\t<ERROR>\n\t\t\t\t\t<ID/>\n\t\t\t\t\t<MESSAGE/>\n\t\t\t\t\t<REQUEST_TYPE/>\n\t\t\t\t\t<RESEND/>\n\t\t\t\t\t<RAW_RESPONSE/>\n\t\t\t\t</ERROR>\n\t\t\t</RESPONSE>\n\t\t]]>\n    </ERROR>\n]]></system-out>", "id": 39315, "time": "2003-06-24T07:54:41Z", "creator": "bbhangale@lastminute.com", "creation_time": "2003-06-24T07:54:41Z", "tags": [], "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 21037, "is_private": false, "id": 39316, "time": "2003-06-24T08:27:45Z", "creator": "bodewig@apache.org", "creation_time": "2003-06-24T08:27:45Z", "tags": [], "text": "Are you absolutely sure you've tried with 1.5.3?  It is supposed to replace the\nclosing bracket in your inner CDATA section with &gt; - that way your section\ndoesn't do any harm."}, {"count": 4, "tags": [], "creator": "bbhangale@lastminute.com", "is_private": false, "id": 39331, "creation_time": "2003-06-24T12:04:36Z", "time": "2003-06-24T12:04:36Z", "bug_id": 21037, "text": "Yes I am sure and I reconfirmed it with my unix admin guys who installed the \nANT on linux boxes. The directory name is also the same apache-ant-1.5.3-1 ", "attachment_id": null}, {"count": 5, "tags": [], "creator": "gus.heck@olin.edu", "text": "Best way to confirm is with ant -version", "id": 39358, "time": "2003-06-24T17:48:39Z", "bug_id": 21037, "creation_time": "2003-06-24T17:48:39Z", "is_private": false, "attachment_id": null}, {"count": 6, "attachment_id": null, "bug_id": 21037, "is_private": false, "id": 39359, "time": "2003-06-24T17:53:14Z", "creator": "bbhangale@lastminute.com", "creation_time": "2003-06-24T17:53:14Z", "tags": [], "text": "ant -version prints following line ->\n\nApache Ant version 1.5.3 compiled on April 16 2003"}, {"count": 7, "tags": [], "text": "Created attachment 7536\nTestcase for XML output (passes, the ]]> sequence is replaced by something else) Even with manual verification.", "is_private": false, "id": 41609, "creator": "jkf@apache.org", "time": "2003-07-27T23:05:12Z", "bug_id": 21037, "creation_time": "2003-07-27T23:05:12Z", "attachment_id": 7536}, {"count": 8, "tags": [], "text": "To be more exact: &#x5d;&#x5d;&gt;\nTests run on a Linux machine with fork = yes.\nI did not manage to get standard output to xml working without forking in the\nstandard ant test runs.\n\n      <system-out><![CDATA[<?xml version=\"1.0\"?>\n<!-- Just some XML output -->\n<main>\n<should>be handled correctly in the reports</should>\n<data><![CDATA[blah di blah di blah\n&#x5d;&#x5d;&gt;\n</data>\n</main>\n]]></system-out>\n                                                                                \n      <system-err><![CDATA[<?xml version=\"1.0\"?>\n<!-- Just some XML output -->\n<main>\n<should>be handled correctly in the reports</should>\n<data><![CDATA[blah di blah di blah\n&#x5d;&#x5d;&gt;\n</data>\n</main>\n]]></system-err>\n", "attachment_id": null, "id": 41610, "creator": "jkf@apache.org", "time": "2003-07-27T23:08:50Z", "bug_id": 21037, "creation_time": "2003-07-27T23:08:50Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 21037, "attachment_id": null, "text": "I've added a testcase to Ant's CVS HEAD and tried it with Ant 1.5.4.  I use exactly\nyour output and don't get an invalid ]]> sequence.  I.e. the bug is fixed in\n1.5.4.  Maybe you have optional.jar (the jar that contains the <junit> task and\nfriends) of an older installation on your CLASSPATH?\n", "id": 44484, "time": "2003-09-23T06:35:42Z", "creator": "bodewig@apache.org", "creation_time": "2003-09-23T06:35:42Z", "is_private": false}]