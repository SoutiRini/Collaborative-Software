[{"count": 0, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "id": 163435, "time": "2012-11-13T22:39:44Z", "bug_id": 54143, "creation_time": "2012-11-13T22:39:44Z", "is_private": false, "text": "It would be nice to add display of the PermGen memory pool usage to the Status page of the Manager webapp.\n\nThis is because OutOfMemoryError's caused by PermGen pool exhaustion are fatal for the server and are hard to predict, as they are are not visible from the simple Free/Max/Total Heap statistics.\n\nTechnically speaking, the information is provided by \"MemoryPool\" MBeans. It is easier to display all memory pools at once rather than to search for specific one.\n\nThe beans could be obtained via a query, e.g. [1], but it is much easier to use standard API that is available in Java SE [2].\n\n[1] http://localhost:8080/manager/jmxproxy/?qry=java.lang%3Atype%3DMemoryPool%2C*\n[2] http://docs.oracle.com/javase/6/docs/api/java/lang/management/MemoryPoolMXBean.html\n\nI have an implementation ready and will commit it shortly.\n\nA small question is whether it is suitable for the simple \"Server Status\" page or is better for the \"Complete Server Status\" one. I think it is OK on the simple page, as this information is important."}, {"count": 1, "attachment_id": null, "creator": "knst.kolinko@gmail.com", "is_private": false, "id": 163436, "time": "2012-11-13T22:59:01Z", "bug_id": 54143, "creation_time": "2012-11-13T22:59:01Z", "tags": [], "text": "Implemented by r1409014 and will be in 7.0.33."}, {"count": 2, "tags": [], "text": "Created attachment 32252\n2014-12-02_tc6_54143_v1.patch\n\nPatch for Tomcat 6\nAdd display of memory pools. Update and fix XSL style and schema.\n\nBackport of r1409014, r1453106, r1453119, r1348992 from tomcat/tc7.0.x/trunk.\n\n      <add>\n        <bug>54143</bug>: Add display of the memory pools usage (including\n        PermGen) to the Status page of the Manager web application. (kkolinko)\n      </add>\n      <fix>\n        Fix several issues with <code>status.xsd</code> schema in Manager web\n        application, testing it against actual output of StatusTransformer\n        class. (kkolinko)\n      </fix>\n\nTo test the schema, one can save output of /manager/status?XML=true command and add the following attributes to the root <status> element:\n\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:noNamespaceSchemaLocation=\"status.xsd\"", "is_private": false, "bug_id": 54143, "id": 179450, "time": "2014-12-02T15:14:27Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-12-02T15:14:27Z", "attachment_id": 32252}, {"count": 3, "tags": [], "text": "Applied to Tomcat 6 in r1643600 and will be in 6.0.44 onwards.", "is_private": false, "id": 179588, "creator": "knst.kolinko@gmail.com", "time": "2014-12-06T20:07:08Z", "bug_id": 54143, "creation_time": "2014-12-06T20:07:08Z", "attachment_id": null}]