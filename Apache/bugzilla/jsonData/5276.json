[{"count": 0, "tags": [], "bug_id": 5276, "text": "Hi there,\n\nI would like to report a bug which relates to the ANT utility program. I wanted \nto build a JAR file with the following BUILD.XML file:\n\n<?xml version=\"1.0\" encoding=\"windows-1250\" ?>\n\n<project name = \"ant-bug\" default = \"build_jar\">\n\n   <property name=\"srcDir\" value=\"d:\\andrej\\java\\ShowDocInBrowser\\ant-bug\" />\n   <property name=\"jar_name\" value=\"${srcDir}\\test.jar\" />\n\n   <target name=\"delete_jar\" >\n      <delete file=\"${jar_name}\" />\n   </target>\n\n   <target name=\"build_jar\" depends=\"delete_jar\" >\n      <jar jarfile=\"${jar_name}\" compress=\"yes\" >\n         <fileset dir=\"${srcDir}\"  >\n            <patternset id = \"JarClasses\" >  \n               <include name=\"**/ShowDoc$ShowDocumentActionListener.class\" />\n            </patternset>\n         </fileset>       \n      </jar>  \n   </target>\n\n</project>\n\nBefore that I had created an inner class \nnamed \"ShowDoc$ShowDocumentActionListener.class\". After running ANT program \nusing option -VERBOSE I received the following output:\n\nAnt version 1.4.1 compiled on October 11 2001\nBuildfile: build.xml\nDetected Java version: 1.4 in: d:\\java\\j2sdk1_4_0_beta3\\jre\nDetected OS: Windows NT\nparsing buildfile D:\\Andrej\\java\\ShowDocInBrowser\\ant-bug\\build.xml with URI = \nfile:D:/Andrej/java/ShowDocInBro\nwser/ant-bug/build.xml\nProject base dir set to: D:\\Andrej\\java\\ShowDocInBrowser\\ant-bug\nBuild sequence for target `build_jar' is [delete_jar, build_jar]\nComplete build sequence is [delete_jar, build_jar]\n\ndelete_jar:\n   [delete] Could not find file D:\\andrej\\java\\ShowDocInBrowser\\ant-\nbug\\test.jar to delete.\n\nbuild_jar:\nOverriding previous definition of reference to JarClasses\n      [jar] Updating jar since cannot read current jar manifest: \njava.util.zip.ZipExceptionThe system cannot fi\nnd the file specified\n      [jar] Building jar: D:\\andrej\\java\\ShowDocInBrowser\\ant-bug\\test.jar\n\nBUILD SUCCESSFUL\n\nTotal time: 2 seconds\n\n\nThe final Jar file is empty - file \"ShowDoc$ShowDocumentActionListener.class\" \nis not included. Is this an error? Using statement \n\n<include name=\"**/*.class\" /> \n\nactually does include the file. \n\nIf I list current directory I get:\n\nD:\\Andrej\\java\\ShowDocInBrowser\\ant-bug>dir\n Volume in drive D is DiskD\n Volume Serial Number is BC93-A441\n\n Directory of D:\\Andrej\\java\\ShowDocInBrowser\\ant-bug\n\n05.12.01  09:38         <DIR>          .\n05.12.01  09:38         <DIR>          ..\n05.12.01  09:37                    708 build.xml\n04.12.01  15:12                  2.361 ShowDoc$ShowDocumentActionListener.class\n05.12.01  09:38                  1.697 test.jar\n               5 File(s)          4.766 bytes\n                            590.098.432 bytes free\n\nI hope that this report will help you to reproduce the error and improve \nalready know very good software.\n\nBest regards,\nAndrej Navodnik", "id": 8592, "time": "2001-12-05T00:50:15Z", "creator": "anavodnik@src.si", "creation_time": "2001-12-05T00:50:15Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 5276, "is_private": false, "count": 1, "id": 8593, "time": "2001-12-05T01:03:48Z", "creator": "bodewig@apache.org", "creation_time": "2001-12-05T01:03:48Z", "text": "The $ character is special within Ant build files, you need to escape it with\na second $ character.\n\nMake your line look like\n\n<include name=\"**/ShowDoc$$ShowDocumentActionListener.class\" />\n\nand it should work as expected."}]