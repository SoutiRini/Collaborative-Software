[{"count": 0, "tags": [], "bug_id": 55956, "attachment_id": null, "id": 172097, "creation_time": "2014-01-06T08:28:39Z", "time": "2014-01-06T08:28:39Z", "creator": "bhatu.mali@gmail.com", "text": "In Tomcat Manager Application, when we browse status page report for currently running request, there is column name which shows Client IP address. If my tomcat is running Behind Proxy or Behind NGINX or Behind Apache Mod Proxy, then Client IP is IP address of Last Proxy.\n\nI have tried to pass X-Forwarded-For parameter but there is no change in Client IP address.\n\nSame problem exist in request.getRemoteAddr() (always returns proxy IP address) and Access Log Configuration (logs proxy IP address in access log file).\n\nIt would be nice if we can incorporate X-Forwarded-For (or like wise HTTP_X_FORWARDED_FOR,Proxy-Client-IP etc) in above situations.", "is_private": false}, {"count": 1, "tags": [], "creator": "chris@christopherschultz.net", "attachment_id": null, "id": 172130, "time": "2014-01-06T22:20:21Z", "bug_id": 55956, "creation_time": "2014-01-06T22:20:21Z", "is_private": false, "text": "I think you may be looking for:\nhttp://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Remote_IP_Filter"}, {"text": "This is a configuration issue. As Chris pointed out, you need to configure either http://tomcat.apache.org/tomcat-7.0-doc/config/valve.html#Remote_IP_Valve or http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Remote_IP_Filter\n\nIf you need help doing that, the users list is the place to ask.", "tags": [], "bug_id": 55956, "attachment_id": null, "count": 2, "id": 172192, "time": "2014-01-08T20:47:47Z", "creator": "markt@apache.org", "creation_time": "2014-01-08T20:47:47Z", "is_private": false}, {"count": 3, "tags": [], "creator": "bhatu.mali@gmail.com", "attachment_id": 31221, "id": 172434, "time": "2014-01-17T07:13:11Z", "bug_id": 55956, "creation_time": "2014-01-17T07:13:11Z", "is_private": false, "text": "Created attachment 31221\nTomcat Managet Status Page"}, {"count": 4, "attachment_id": 31221, "creator": "bhatu.mali@gmail.com", "is_private": false, "id": 172435, "time": "2014-01-17T07:18:25Z", "bug_id": 55956, "creation_time": "2014-01-17T07:18:25Z", "tags": [], "text": "Comment on attachment 31221\nTomcat Managet Status Page\n\nUsing \"Remote IP Valve\", access log writes proper IP of remote machine, but Tomcat Manager Status page still shows Proxy Servers IP adress as shows in screenshot. My Proxy server and Tomcat is in same machine as of now, so Tomcat Manager Status page shows Proxy Servers IP address as 127.0.0.1."}, {"count": 5, "tags": [], "bug_id": 55956, "attachment_id": null, "is_private": false, "id": 172439, "time": "2014-01-17T09:30:02Z", "creator": "markt@apache.org", "creation_time": "2014-01-17T09:30:02Z", "text": "OK, I'll take a look."}, {"count": 6, "tags": [], "bug_id": 55956, "attachment_id": null, "id": 172503, "time": "2014-01-19T19:48:22Z", "creator": "markt@apache.org", "creation_time": "2014-01-19T19:48:22Z", "is_private": false, "text": "The information you are looking at comes from the request processors. They look at the CoyoteRequest and that is not modified by the RemoteIp[Filter|Valve].\n\nI'm currently pondering how to best address this."}, {"count": 7, "attachment_id": null, "creator": "markt@apache.org", "is_private": false, "id": 172549, "time": "2014-01-20T14:08:17Z", "bug_id": 55956, "creation_time": "2014-01-20T14:08:17Z", "tags": [], "text": "This has now been fixed in 8.0.x for 8.0.0 onwards and 7.0.x for 7.0.51 onwards."}, {"count": 8, "tags": [], "bug_id": 55956, "attachment_id": null, "id": 175021, "time": "2014-05-05T08:31:25Z", "creator": "chandureddy897@gmail.com", "creation_time": "2014-05-05T08:31:25Z", "is_private": false, "text": "Hello ,\n\nWe use Tomcat which comes bundled with SAP Business objects and the version of tomcat to use is more or less packaged (I am not very sure at the momemnt if we are allowed to patch it independently)\n\nAnyways, is it possible to downport this correction to 7.0.32 onwards please?\n\nThx"}, {"count": 9, "tags": [], "bug_id": 55956, "is_private": false, "id": 175027, "creation_time": "2014-05-05T14:01:14Z", "time": "2014-05-05T14:01:14Z", "creator": "chris@christopherschultz.net", "text": "The Tomcat team does not back-port patches to older versions of Tomcat. Instead, we release a new version. You are welcome to locate the apply the patch yourself, but it will be a source-level patch and you'll have to recompile from source yourself.\n\nFortunately, building Tomcat 7 from source is dead simple. If you have further questions, please post to the Tomcat users' mailing list.", "attachment_id": null}]