[{"text": "Configure:\n==========\n\nCONFIGURE_OPTIONS=--prefix=$(DIR_PROD) --enable-ssl\n--with-ssl=$(OPENSSL_DIRECTORY)   \\\n                  --enable-mods-shared=most --with-mpm=worker\n--without-berkeley-db   \\\n                 \n--with-expat=$(DIR_SRC)/$(CURRENT_DISTRO)/srclib/apr-util/xml/expat \\\n  \nEnvironment:\n============\n\noslevel -r\n5200-02\n\nor\n\noslevel -r\n4330-11\n\nBoth environments using Visual Age C/C++ at V6 with February 2005 PTFs applied\n(ie. fairly up-to-date ...).\nlslpp -L vac\\*\n  Fileset                      Level  State  Type  Description (Uninstaller)\n  ----------------------------------------------------------------------------\n  vac.C                     6.0.0.11    A     F    C for AIX Compiler\n  vac.C.readme.ibm           6.0.0.1    A     F    C for AIX iFOR/LS Information\n  vac.Dt.common              6.0.0.0    C     F    C for AIX Desktop Integration\n                                                   Common Files\n  vac.Dt.help                6.0.0.0    C     F    C for AIX Help Desktop\n                                                   Integration\n  vac.html.DBCS.search       6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation Search Double\n                                                   Byte Common Files\n  vac.html.EN_US             6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation (HTML)--U.S.\n                                                   English UTF\n  vac.html.JA_JP             6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation (HTML)--Japanese\n                                                   UTF\n  vac.html.Ja_JP.C           6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation (HTML)--Japanese\n  vac.html.Ja_JP.search      6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation Search--Japanese\n  vac.html.SBCS.search       6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation Search Single\n                                                   Byte Common Files\n  vac.html.ZH_CN             6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation\n                                                   (HTML)--Simplified Chinese UTF\n  vac.html.common.search     6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation Search Common\n                                                   Files\n  vac.html.en_US.C           6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation (HTML)--U.S.\n                                                   English\n  vac.html.en_US.search      6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation Search--U.S.\n                                                   English\n  vac.html.ja_JP             6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation (HTML)--Japanese\n                                                   IBM-eucJP\n  vac.html.zh_CN.C           6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation\n                                                   (HTML)--Simplified Chinese\n  vac.html.zh_CN.search      6.0.0.0    C     F    C for AIX Compiler\n                                                   Documentation\n                                                   Search--Simplified Chinese\n  vac.lic                    6.0.0.0    C     F    C for AIX Licence Files\n  vac.msg.en_US.C            6.0.0.2    A     F    C for AIX Compiler Messages -\n                                                   en_US\n  vac.ndi                    6.0.0.7    A     F    C for AIX Non-Default\n                                                   Installation Script\n  vac.pdf.en_US.C            6.0.0.0    C     F    C for AIX Documentation\n                                                   (PDF)--U.S. English\n  vacpp.Dt.common            6.0.0.0    C     F    VisualAge C++ Desktop\n                                                   Integration Common Files\n  vacpp.Dt.help              6.0.0.0    C     F    VisualAge C++ Help Desktop\n                                                   Integration\n  vacpp.cmp.aix50.lib       6.0.0.10    A     F    VisualAge C++ Libraries for\n                                                   AIX 5.0\n  vacpp.cmp.aix50.tools      6.0.0.1    A     F    VisualAge C++ Tools for AIX\n                                                   5.0\n  vacpp.cmp.core            6.0.0.12    A     F    VisualAge C++ Compiler\n  vacpp.cmp.include         6.0.0.10    A     F    VisualAge C++ Compiler Include\n                                                   Files\n  vacpp.cmp.lib              6.0.0.0    C     F    VisualAge C++ Libraries\n  vacpp.cmp.rte              6.0.0.0    C     F    VisualAge C++ Compiler\n                                                   Application Runtime\n  vacpp.cmp.tools           6.0.0.10    A     F    VisualAge C++ Tools\n  vacpp.html.DBCS            6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--Double Byte Common\n                                                   Files\n  vacpp.html.EN_US           6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--U.S. English UTF\n  vacpp.html.JA_JP           6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--Japanese UTF\n  vacpp.html.Ja_JP           6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--Japanese\n  vacpp.html.SBCS            6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--Single Byte Common\n                                                   Files\n  vacpp.html.ZH_CN           6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--Simplified Chinese UTF\n  vacpp.html.common          6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--Common Files\n  vacpp.html.en_US           6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--U.S. English\n  vacpp.html.help            6.0.0.0    C     F    VisualAge C++ HTML Help Engine\n  vacpp.html.ja_JP           6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--Japanese IBM-eucJP\n  vacpp.html.zh_CN           6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (HTML)--Simplified Chinese\n  vacpp.lic                  6.0.0.0    C     F    VisualAge C++ Licence Files\n  vacpp.memdbg.aix50.lib     6.0.0.7    A     F    VA C++ User Heap/Memory Debug\n                                                   AIX 5.0 Libraries\n  vacpp.memdbg.aix50.rte    6.0.0.10    A     F    VA C++ User Heap/Memory Debug\n                                                   AIX 5.0 Runtime\n  vacpp.memdbg.lib           6.0.0.0    C     F    VisualAge C++ User Heap and\n                                                   Memory Debug Static Libraries\n  vacpp.memdbg.rte           6.0.0.0    C     F    VisualAge C++ User Heap and\n                                                   Memory Debug Runtime\n  vacpp.msg.en_US.cmp.core   6.0.0.7    A     F    VisualAge Compiler C++\n                                                   Messages--U.S. English\n  vacpp.msg.en_US.cmp.tools  6.0.0.0    C     F    VisualAge C++ Tools\n                                                   Messages--U.S. English\n  vacpp.msg.en_US.html.help  6.0.0.0    C     F    VisualAge C++ Help Engine\n                                                   Messages--U.S. English\n  vacpp.ndi                  6.0.0.7    A     F    VisualAge C++ Non-Default\n                                                   Installation Script\n  vacpp.pdf.Ja_JP            6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (PDF)--Japanese\n  vacpp.pdf.common           6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (PDF)--Common Files\n  vacpp.pdf.en_US            6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (PDF)--U.S. English\n  vacpp.pdf.zh_CN            6.0.0.0    C     F    VisualAge C++ Documentation\n                                                   (PDF)--Simplified Chinese\n  vacpp.samples.ansicl       6.0.0.6    A     F    ANSI CLass Library Samples\n\nCause:\n======\n\n  Signature:\n\n  /vobs/openssl/prod/include/openssl/ssl2.h:\n\n  SSL_SESSION *d2i_SSL_SESSION(SSL_SESSION **a,const unsigned char * const *pp,\n\t\t\t     long length);\n\n  Code:\n  \n  pSession = d2i_SSL_SESSION(NULL, &ptr, SSL_SESSION_MAX_DER);\n\n  Pre-processed:\n\n  unsigned char *ptr;\n  ...\n  pSession = d2i_SSL_SESSION(0, &ptr, 1024*10);\n\n                  CC=xlc_r\n\nBug:\n====\n\ngmake[4]: Entering directory `/vobs/apache/src/httpd-2.0.54/modules/ssl'\n/vobs/apache/src/httpd-2.0.54/srclib/apr/libtool --silent --mode=compile xlc_r \n-g -qHALT=E    -U__STR__ -D_THREAD_SAFE -D_USE_IRS   \n-I/vobs/apache/src/httpd-2.0.54/srclib/apr/include\n-I/vobs/apache/src/httpd-2.0.54/srclib/apr-util/include\n-I/vobs/apache/src/httpd-2.0.54/srclib/apr-util/xml/expat/lib -I.\n-I/vobs/apache/src/httpd-2.0.54/os/unix\n-I/vobs/apache/src/httpd-2.0.54/server/mpm/worker\n-I/vobs/apache/src/httpd-2.0.54/modules/http\n-I/vobs/apache/src/httpd-2.0.54/modules/filters\n-I/vobs/apache/src/httpd-2.0.54/modules/proxy\n-I/vobs/apache/src/httpd-2.0.54/include\n-I/vobs/apache/src/httpd-2.0.54/modules/generators\n-I/vobs/openssl/prod/include/openssl -I/vobs/openssl/prod/include\n-I/vobs/apache/src/httpd-2.0.54/modules/dav/main -prefer-pic -c\nssl_scache_shmcb.c && touch ssl_scache_shmcb.slo\n\"ssl_scache_shmcb.c\", line 1248.46: 1506-280 (E) Function argument assignment\nbetween types \"const unsigned char* const*\" and \"unsigned char**\" is not allowed.\n\"ssl_scache_shmcb.c\", line 1327.46: 1506-280 (E) Function argument assignment\nbetween types \"const unsigned char* const*\" and \"unsigned char**\" is not allowed.\ngmake[4]: *** [ssl_scache_shmcb.slo] Error 1\ngmake[4]: Leaving directory `/vobs/apache/src/httpd-2.0.54/modules/ssl'\ngmake[3]: *** [shared-build-recursive] Error 1\ngmake[3]: Leaving directory `/vobs/apache/src/httpd-2.0.54/modules/ssl'\ngmake[2]: *** [shared-build-recursive] Error 1\ngmake[2]: Leaving directory `/vobs/apache/src/httpd-2.0.54/modules'\ngmake[1]: *** [shared-build-recursive] Error 1\ngmake[1]: Leaving directory `/vobs/apache/src/httpd-2.0.54'\ngmake: *** [all-recursive] Error 1", "tags": [], "bug_id": 34520, "attachment_id": null, "count": 0, "id": 73802, "time": "2005-04-19T15:30:58Z", "creator": "pao@darkheim.freeserve.co.uk", "creation_time": "2005-04-19T15:30:58Z", "is_private": false}, {"count": 1, "attachment_id": 14755, "creator": "pao@darkheim.freeserve.co.uk", "text": "Created attachment 14755\nlibtool patch to enable different (hard-coded) deployment directory \n\nThis patch is not suitable for inclusion to apache, but just shows how/what\ndiffers from the vanilla source.", "id": 73805, "time": "2005-04-19T15:41:26Z", "bug_id": 34520, "creation_time": "2005-04-19T15:41:26Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "text": "We have one patch applied to libtool applied to enable us to use a dedicated\nbuild host which builds in one directory structure\n(/appl/cm/build/<env>/<component>/... while we deploy into an environment which\nexpects things to reside under /appl/active/apache/... I never saw any other way\nof achieving this and as far as I can tell it has no bearing on this defect. The\npatch is listed below.\n\nOtherwise there has been no other changes to the distro version and the\nconfigure options etc are the same as we use for a 2.0.51 build.\n\n", "is_private": false, "id": 73806, "creator": "pao@darkheim.freeserve.co.uk", "time": "2005-04-19T15:42:32Z", "bug_id": 34520, "creation_time": "2005-04-19T15:42:32Z", "attachment_id": null}, {"count": 3, "tags": [], "text": "  SSL_SESSION *d2i_SSL_SESSION(SSL_SESSION **a,const unsigned char * const *pp,\n\t\t\t     long length);\n\nthat's not from any OpenSSL release.  What SSL library are you using?", "attachment_id": null, "id": 73809, "creator": "jorton@redhat.com", "time": "2005-04-19T15:46:46Z", "bug_id": 34520, "creation_time": "2005-04-19T15:46:46Z", "is_private": false}, {"count": 4, "tags": [], "text": "We are using OpenSSL v0.9.7g. However this bug is in mod_ssl...\n\nIs apache/modssl incompatible with 0.9.7g?", "attachment_id": null, "id": 73811, "creator": "pao@darkheim.freeserve.co.uk", "time": "2005-04-19T15:54:57Z", "bug_id": 34520, "creation_time": "2005-04-19T15:54:57Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 34520, "attachment_id": null, "id": 73813, "time": "2005-04-19T16:06:11Z", "creator": "pao@darkheim.freeserve.co.uk", "creation_time": "2005-04-19T16:06:11Z", "is_private": false, "text": "Sorry, the signature comes from openssl/include/ssl.h...and I can't see that\nthat has changed recently."}, {"count": 6, "tags": [], "text": "Cripes, yes, they changed it between .7f and .7g! Very bad :( We'll have to fix\nthis in mod_ssl with a bunch of ifdef fun, yes.\n\n@@ -1268,17 +1268,18 @@\n int    SSL_set_generate_session_id(SSL *, GEN_SESSION_CB);\n int    SSL_has_matching_session_id(const SSL *ssl, const unsigned char *id,\n                                        unsigned int id_len);\n-SSL_SESSION *d2i_SSL_SESSION(SSL_SESSION **a,unsigned char **pp,long length);\n+SSL_SESSION *d2i_SSL_SESSION(SSL_SESSION **a,const unsigned char * const *pp,\n+                            long length);\n", "attachment_id": null, "id": 73814, "creator": "jorton@redhat.com", "time": "2005-04-19T16:13:31Z", "bug_id": 34520, "creation_time": "2005-04-19T16:13:31Z", "is_private": false}, {"count": 7, "attachment_id": null, "creator": "pao@darkheim.freeserve.co.uk", "text": "Okay, so the story is that 0.9.7g isn't supported with current version of apache\n2.0.54!", "id": 73816, "time": "2005-04-19T16:30:11Z", "bug_id": 34520, "creation_time": "2005-04-19T16:30:11Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "creator": "jorton@redhat.com", "text": "If you edit build/config_vars.mk and remove the \"-qHALT=E\" from whichever CFLAGS\nline it ends up in, it should compile OK with warnings.", "id": 75009, "time": "2005-05-18T14:25:22Z", "bug_id": 34520, "creation_time": "2005-05-18T14:25:22Z", "is_private": false, "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 34520, "attachment_id": null, "id": 77052, "creation_time": "2005-07-07T00:27:10Z", "time": "2005-07-07T00:27:10Z", "creator": "wrowe@apache.org", "text": "  \"Okay, so the story is that 0.9.7g isn't supported with current version \n   of apache 2.0.54!\"\n\n<rant>\nPeople quit your bitching!!!  If a library vendor screws with declarations\nin the midst of subversion bumps, you expect us to be psychic?!?  Someone\nshould have mentioned this to the SSL project, but I suppose noone here\nbothers to test OpenSSL cvs HEAD.\n</rant>\n\nIn the coming 2.0/2.1-dev releases this is addressed.  It's now committed\nto cvs HEAD.  Thanks Joe for calling out the specific bump :)", "is_private": false}, {"count": 10, "tags": [], "text": "Ease up, Bill.  Per just made a semi-accurate statement of the current state of\nplay, the fact that someone took the time to report the issue is appreciated. \nYes, the API break has been mentioned to openssl-dev, too.", "is_private": false, "id": 77079, "creator": "jorton@redhat.com", "time": "2005-07-07T17:40:14Z", "bug_id": 34520, "creation_time": "2005-07-07T17:40:14Z", "attachment_id": null}]