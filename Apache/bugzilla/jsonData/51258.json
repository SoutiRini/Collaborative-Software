[{"count": 0, "tags": [], "bug_id": 51258, "attachment_id": null, "id": 146586, "time": "2011-05-24T13:21:45Z", "creator": "horowity@gmail.com", "creation_time": "2011-05-24T13:21:45Z", "is_private": false, "text": "features included:\n1. Support for SubstituteCond - ability to apply substitute rule only if the configured conditions are met.\n   The conditions input could be compared to request data, environment variables and internal Apache notes.\n   -- This section is similiar to RewriteCond, and I think it should go to a common section in the code.\n\n2. Support for SubstituteCheck \u2013 ability to perform quick search on the data and use the results in order to avoid using \u201cexpensive\u201d regular expression.\n\n3. Supporting evaluation (at run time) of the searched and replaced patterns before application (instead of static evaluation in configuration time).\n    Evaluation result could be taken from request/response headers, environment variables and internal Apache notes.\n\n4. Adding some more options:\n\n    a. Skip the replaced text from being processed by following rules.\n       -- For this, I used a binary tree, which I didn't find in APR, can you consider adding such implementation to APR?\n\n    b. Stop applying other rules after specific rule is matched.\n\n    c.\tOption not to break the response into lines (and apply the substitute rules on the whole response).\n\t\nI know these changes need documentation, which I can provide, just I want to know if they will accepted into the trunk, before writing it.\n\nI hope you will find these changes helpful, and I'll be glad to hear your opinion about them."}, {"count": 1, "text": "Created attachment 27051\nPatch + new .h file as gzipped tarball", "creator": "horowity@gmail.com", "is_private": false, "id": 146587, "time": "2011-05-24T13:24:25Z", "bug_id": 51258, "creation_time": "2011-05-24T13:24:25Z", "tags": [], "attachment_id": 27051}, {"count": 2, "tags": [], "bug_id": 51258, "is_private": false, "text": "*** Bug 47220 has been marked as a duplicate of this bug. ***", "id": 146589, "time": "2011-05-24T13:28:11Z", "creator": "horowity@gmail.com", "creation_time": "2011-05-24T13:28:11Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 51258, "attachment_id": null, "is_private": false, "id": 146595, "time": "2011-05-24T16:42:57Z", "creator": "wrowe@apache.org", "creation_time": "2011-05-24T16:42:57Z", "text": "Thank you for your interest, and contribution.\n\nNote that it is very unlikely to be adopted at this time, as httpd 2.3-beta\n(soon to be 2.4) deprecated mod_substitute, and introduced mod_sed.\n\nI'd strongly encourage you to review mod_sed and determine if any of the\nimprovements you propose to mod_substitute remain applicable to mod_sed,\nand absolutely offer them as a patch to httpd 2.3.\n\nAll this said, httpd is a collaborative environment, and I will leave your\nticket open for others to evaluate.  It's entirely possible you would find\nenough httpd committers to entertain the idea of restoring an enhanced\nmod_substitute, if mod_sed is not so easily tailored."}, {"count": 4, "tags": [], "bug_id": 51258, "attachment_id": null, "id": 146598, "time": "2011-05-24T18:31:56Z", "creator": "horowity@gmail.com", "creation_time": "2011-05-24T18:31:56Z", "is_private": false, "text": "Hi\n\nI think that mod_substitute with my new features is doing very good job (depends on Admin configuration).\nI don't see any reason why to dreprecate the existing mod_substitute (taking into account that new module usually brings new bugs).\n\nSince mod_sed is not exist in \"released\" version, it is hard for me to use it in my environement (and I'm quite sure there are many developers with this problem).\n\nWhy not give the user option to choose which module she wants to use?\n\nRegards,\n\nYehezkel"}, {"count": 5, "tags": [], "bug_id": 51258, "attachment_id": null, "id": 174145, "time": "2014-03-27T19:57:26Z", "creator": "chrissmith51@gmail.com", "creation_time": "2014-03-27T19:57:26Z", "is_private": false, "text": "I've tried the patch specifically to substitute in environment variables (%{env:var_name}) but it seems to only allow access to local variables created by the use of 'define' (${var_name}).\n\nPlease could you confirm how your code is to be used in this manner?"}, {"count": 6, "attachment_id": null, "creator": "chrissmith51@gmail.com", "is_private": false, "id": 174165, "time": "2014-03-28T18:10:58Z", "bug_id": 51258, "creation_time": "2014-03-28T18:10:58Z", "tags": [], "text": "Thanks Yehezkel,\n\nFor anyone else who has this problem - it can be fixed by appending 'e' to the substitution command."}, {"count": 7, "tags": [], "text": "How to use the patch file? Can't seem to use it with patch tool for Windows.\n\nThanks!", "attachment_id": null, "id": 183621, "creator": "ambqqpdp@sharklasers.com", "time": "2015-06-18T10:36:07Z", "bug_id": 51258, "creation_time": "2015-06-18T10:36:07Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 51258, "attachment_id": null, "is_private": false, "id": 183623, "time": "2015-06-18T11:17:19Z", "creator": "horowity@gmail.com", "creation_time": "2015-06-18T11:17:19Z", "text": "(In reply to ambqqpdp from comment #7)\n> How to use the patch file? Can't seem to use it with patch tool for Windows.\n> \n> Thanks!\n\nIt was created with Unix diff command.\nUse Unix patch command to apply it."}, {"count": 9, "tags": [], "bug_id": 51258, "attachment_id": null, "is_private": false, "id": 183624, "time": "2015-06-18T11:32:05Z", "creator": "ylavic.dev@gmail.com", "creation_time": "2015-06-18T11:32:05Z", "text": "Hmm, it seems that the attachement is a tar.gz at first.\nThe patch itself may be contained."}, {"count": 10, "tags": [], "bug_id": 51258, "attachment_id": null, "is_private": false, "id": 183630, "time": "2015-06-19T03:26:37Z", "creator": "ambqqpdp@sharklasers.com", "creation_time": "2015-06-19T03:26:37Z", "text": "(In reply to Yann Ylavic from comment #9)\n> Hmm, it seems that the attachement is a tar.gz at first.\n> The patch itself may be contained.\n\nI tried saving it as tar.gz but uncompressing it returns an error. I will try horowity's suggestion. Thanks!"}, {"count": 11, "tags": [], "text": "(In reply to horowity@checkpoint.com from comment #8)\n> (In reply to ambqqpdp from comment #7)\n> > How to use the patch file? Can't seem to use it with patch tool for Windows.\n> > \n> > Thanks!\n> \n> It was created with Unix diff command.\n> Use Unix patch command to apply it.\n\npatch unexpectedly ends in middle of line\npatch: **** Only garbage was found in the patch input.", "attachment_id": null, "id": 183631, "creator": "ambqqpdp@sharklasers.com", "time": "2015-06-19T04:57:40Z", "bug_id": 51258, "creation_time": "2015-06-19T04:57:40Z", "is_private": false}, {"count": 12, "text": "Comment on attachment 27051\nPatch + new .h file as gzipped tarball\n\nThe attachment is in tar.gz format. I have changed the meta data so that browsers won't try to display the raw binary file.", "creator": "rainer.jung@kippdata.de", "is_private": false, "id": 183635, "time": "2015-06-19T06:34:20Z", "bug_id": 51258, "creation_time": "2015-06-19T06:34:20Z", "tags": [], "attachment_id": 27051}, {"count": 13, "tags": [], "bug_id": 51258, "is_private": false, "text": "(In reply to Rainer Jung from comment #12)\n> Comment on attachment 27051 [details]\n> Patch + new .h file as gzipped tarball\n> \n> The attachment is in tar.gz format. I have changed the meta data so that\n> browsers won't try to display the raw binary file.\n\nThank you very much", "id": 183636, "time": "2015-06-19T07:01:34Z", "creator": "ambqqpdp@sharklasers.com", "creation_time": "2015-06-19T07:01:34Z", "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 51258, "attachment_id": null, "is_private": false, "id": 183784, "time": "2015-06-29T04:12:27Z", "creator": "ambqqpdp@sharklasers.com", "creation_time": "2015-06-29T04:12:27Z", "text": "I'm having problems upon compiling the patched source when targeting Apache 2.2, but for 2.4 it's perfectly working. The error seems to be coming from some functions not defined in 2.2 such as ap_regexec_len, etc."}, {"count": 15, "text": "(In reply to ambqqpdp from comment #14)\n> I'm having problems upon compiling the patched source when targeting Apache\n> 2.2, but for 2.4 it's perfectly working. The error seems to be coming from\n> some functions not defined in 2.2 such as ap_regexec_len, etc.\n\nThe ap_regexec_len was submitted in #51231, and is very easy to adopt.\nSo if you need these features in 2.2.x - you can just apply both of patches.", "creator": "horowity@gmail.com", "is_private": false, "id": 185748, "time": "2015-10-14T07:05:09Z", "bug_id": 51258, "creation_time": "2015-10-14T07:05:09Z", "tags": [], "attachment_id": null}, {"count": 16, "tags": [], "text": "Created attachment 33182\nUpdate of original patch.\n\nIn how, the original patch is not applying to 2.2.x any more due to a code change, so I attach an update patch.", "attachment_id": 33182, "id": 185749, "creator": "horowity@gmail.com", "time": "2015-10-14T07:15:08Z", "bug_id": 51258, "creation_time": "2015-10-14T07:15:08Z", "is_private": false}, {"count": 17, "tags": [], "bug_id": 51258, "attachment_id": null, "id": 185750, "time": "2015-10-14T07:21:13Z", "creator": "horowity@gmail.com", "creation_time": "2015-10-14T07:21:13Z", "is_private": false, "text": "Hi\n\nseveral years were passed since my original commit and I got several private mails with questions about the patch, so you might want to reconsider adopting the patch to 2.4/trunk (even if mod_sed is considered as replacement of mod_substitute).\n\nAnyhow, the original patch is not applying to 2.2.x any more due to a code change, so I attach an update patch (#33182).\n\nRegards,\nYehezkel Horowitz"}]