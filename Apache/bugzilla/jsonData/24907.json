[{"count": 0, "tags": [], "bug_id": 24907, "attachment_id": null, "text": "Because error log file descriptors do not register a \"magic\" cleanup but only a\nregular one, if ap_cleanup_for_exec() is not called, then the file descriptors\nof Apache error_log files are leaked to sub-processes.\n\nThis is visible when perl's system() or exec() is called from mod_perl code. Up\nto and including Apache 1.3.27, if mod_perl code wanted to use system() or\nexec() cleanly, it had to use Apache::SubProcess module. This module exports\ninto the Perl space ap_cleanup_for_exec(). Thanks to the addition of\nap_register_cleanup_ex() and the related fix, usage of Apache::SubProcess may\nbecome unnecessarily if this bug is fixed too. If Apache::SubProcess is not\nrequired anymore, then the Perl code may become simpler because it does not have\nto use two different ways to create sub-processes, one for Apache/mod_perl and\none for standalone usage.", "id": 47875, "time": "2003-11-21T22:02:49Z", "creator": "rgreab@fx.ro", "creation_time": "2003-11-21T22:02:49Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 24907, "attachment_id": 9234, "text": "Created attachment 9234\nThis patch works for me.", "id": 47877, "time": "2003-11-21T22:07:29Z", "creator": "rgreab@fx.ro", "creation_time": "2003-11-21T22:07:29Z", "is_private": false}]