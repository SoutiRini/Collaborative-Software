[{"attachment_id": null, "tags": [], "bug_id": 7195, "text": "In apache 1.3.23, the new mod_proxy removes cookies headers: some sites, as \nhotmail, return more than one Set-cookie headers. After ap_overlap_tables in \nproxy_http.c # 530, there is only one remaining!\nThis is blocking since access to hotmail, yahoo ... is no longer possible.", "count": 0, "id": 11921, "time": "2002-03-18T08:35:03Z", "creator": "siegfried.delwiche@sbs.be", "creation_time": "2002-03-18T08:35:03Z", "is_private": false}, {"count": 1, "tags": [], "creator": "siegfried.delwiche@sbs.be", "is_private": false, "text": "Created attachment 1364\nproposal of correction for proxy_http.c", "id": 11925, "time": "2002-03-18T11:08:23Z", "bug_id": 7195, "creation_time": "2002-03-18T11:08:23Z", "attachment_id": 1364}, {"count": 2, "tags": [], "text": "Created attachment 1365\nproposal of correction for proxy_util.c", "attachment_id": 1365, "id": 11926, "creator": "siegfried.delwiche@sbs.be", "time": "2002-03-18T11:09:05Z", "bug_id": 7195, "creation_time": "2002-03-18T11:09:05Z", "is_private": false}, {"attachment_id": 1366, "tags": [], "bug_id": 7195, "text": "Created attachment 1366\nproposal of correction for mod_proxy.h", "count": 3, "id": 11927, "time": "2002-03-18T11:09:57Z", "creator": "siegfried.delwiche@sbs.be", "creation_time": "2002-03-18T11:09:57Z", "is_private": false}, {"count": 4, "tags": [], "creator": "jerenkrantz@apache.org", "attachment_id": null, "id": 11940, "time": "2002-03-18T15:33:42Z", "bug_id": 7195, "creation_time": "2002-03-18T15:33:42Z", "is_private": false, "text": "I believe this has been fixed in HEAD of Apache 1.3.  Please try the\nlatest CVS version.\n\nThis should be included in the forthcoming 1.3.24 release (possibly\nthis week)."}, {"count": 5, "tags": [], "text": "*** Bug 7362 has been marked as a duplicate of this bug. ***", "attachment_id": null, "bug_id": 7195, "id": 12181, "time": "2002-03-22T15:22:02Z", "creator": "slive@apache.org", "creation_time": "2002-03-22T15:22:02Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 7195, "text": "This bug still seems to exist in 1.3.24.\n\nI upgraded our 1.3.20 to 1.3.24 and pages using mulitple cookies were broken, due to only the LAST \"Set-Cookie:\" being passed thru the mod_proxy server.", "count": 6, "id": 12455, "time": "2002-03-28T13:40:55Z", "creator": "brian.bothwell@wisdomtools.com", "creation_time": "2002-03-28T13:40:55Z", "is_private": false}, {"count": 7, "tags": [], "text": "There was another fix for this issue committed just after 1.3.24 was released.\nYou can grab a snapshot of the current code at:\nhttp://cvs.apache.org/snapshots/apache-1.3/\nor you can find a patch at\nhttp://cvs.apache.org/viewcvs.cgi/apache-1.3/src/modules/proxy/proxy_http.c.diff?r1=1.89&r2=1.90\n\nPlease reopen this report again if the problem is not fixed.", "attachment_id": null, "bug_id": 7195, "id": 12468, "time": "2002-03-28T19:14:57Z", "creator": "slive@apache.org", "creation_time": "2002-03-28T19:14:57Z", "is_private": false}, {"count": 8, "tags": [], "text": "The current snaphsot and the version 1.3.24 do not contain the fixes made in \nthe snapshot /proxy_http.c/1.87/Wed Mar 13 23:12:04 2002//\nThe problem is not fixed currently!", "is_private": false, "id": 12656, "creation_time": "2002-04-02T08:05:55Z", "time": "2002-04-02T08:05:55Z", "creator": "siegfried.delwiche@sbs.be", "bug_id": 7195, "attachment_id": null}, {"count": 9, "tags": [], "text": "Your message is unclear.  As I said, the additional fix was committed after 1.3.24\nwas released:\nhttp://cvs.apache.org/viewcvs.cgi/apache-1.3/src/modules/proxy/proxy_http.c.diff?r1=1.89&r2=1.90\nAre you saying that this additional fix does not fix the problem?", "is_private": false, "id": 12694, "creation_time": "2002-04-02T15:32:41Z", "time": "2002-04-02T15:32:41Z", "creator": "slive@apache.org", "bug_id": 7195, "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 7195, "attachment_id": null, "id": 12889, "time": "2002-04-05T21:59:46Z", "creator": "slive@apache.org", "creation_time": "2002-04-05T21:59:46Z", "is_private": false, "text": "*** Bug 7748 has been marked as a duplicate of this bug. ***"}, {"count": 11, "tags": [], "text": "A fix for this bug was committed to 1.3.24-dev, but this fix didn't work\nproperly due to the existence of commas in cookies. A new fix was committed\nand released in v1.3.24, but this fix was broken. The fix to the fix to the\nfix was committed to v1.3.25-dev, and with some luck the bug is at last,\ndead.\n", "is_private": false, "bug_id": 7195, "id": 12960, "time": "2002-04-07T18:46:16Z", "creator": "minfrin@sharp.fm", "creation_time": "2002-04-07T18:46:16Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 7195, "text": "*** Bug 7874 has been marked as a duplicate of this bug. ***", "id": 13123, "time": "2002-04-09T19:13:24Z", "creator": "slive@apache.org", "creation_time": "2002-04-09T19:13:24Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "text": "*** Bug 8382 has been marked as a duplicate of this bug. ***", "is_private": false, "id": 14446, "creator": "slive@apache.org", "time": "2002-04-23T13:29:23Z", "bug_id": 7195, "creation_time": "2002-04-23T13:29:23Z", "attachment_id": null}, {"count": 14, "tags": [], "creator": "dauhee@gmail.com", "attachment_id": null, "id": 14890, "time": "2002-04-27T02:54:34Z", "bug_id": 7195, "creation_time": "2002-04-27T02:54:34Z", "is_private": false, "text": "I patched 1.3.24 with \nhttp://cvs.apache.org/viewcvs.cgi/apache-\n1.3/src/modules/proxy/proxy_http.c.diff?r1=1.89&r2=1.90\nand installed it.\n\nThe Set-cookie bug is fixed. However I am seeing weird characters added to \nhtml pages that are proxied by mod_proxy. After viewing the source, this is \nwhat I see.\n\n\"\n4d\n<BODY>\nnormal html\n</BODY>\n0\n\"\n\nThe additional characters are '4d'(before the <BODY>) and '0'(after </BODY>).\n\nI have captured an image of another page and you can see it here.\nhttp://www.singaporeinvestor.com/sembcorp.jpg\nThe additional characters are \"8c8\" and \"0\"\n\nI have reverted back to 1.3.22 and the problem is gone.\n\n\n\n\n\n"}, {"count": 15, "tags": [], "text": "What you're seeing is the proxy dechunk bug, which is different than the issue \nin this PR.  It is also fixed in CVS.", "is_private": false, "id": 14891, "creation_time": "2002-04-27T03:02:20Z", "time": "2002-04-27T03:02:20Z", "creator": "jwoolley@apache.org", "bug_id": 7195, "attachment_id": null}, {"count": 16, "tags": [], "creator": "jwoolley@apache.org", "attachment_id": null, "id": 16346, "time": "2002-05-17T21:00:00Z", "bug_id": 7195, "creation_time": "2002-05-17T21:00:00Z", "is_private": false, "text": "*** Bug 9212 has been marked as a duplicate of this bug. ***"}, {"count": 17, "tags": [], "creator": "com@foobbs.org", "attachment_id": null, "id": 18433, "time": "2002-06-23T21:10:41Z", "bug_id": 7195, "creation_time": "2002-06-23T21:10:41Z", "is_private": false, "text": "The bug does not seem do be fixed for me. I work with the 1.3.26 version of\napache, I also tried to download the current version of proxy_http.c from the\nCVS, and both give the same result :\n\nThe result of a query, by direct access :\n\nHTTP/1.1 200 OK\nServer: Zope/(Zope 2.5.1 (source release, python 2.1, linux2), python 2.1.3,\nlinux2) ZServer/1.1b1\nDate: Sun, 23 Jun 2002 20:56:39 GMT\nContent-Type: text/html\nEtag:\nContent-Length: 3897\nSet-Cookie: __ac_plebia=\"FLP2aWVyOmRk%0A\"; Expires=31 Dec 2020 00:00:00 GMT; Path=/\nSet-Cookie: __ac_name=\"Xavier\"; Expires=Mon, 23 Jun 2003 20:56:39 GMT; Path=/\n\nThe result of the same query, through apache and mod_proxy :\n\nHTTP/1.1 200 OK\nDate: Sun, 23 Jun 2002 20:51:38 GMT\nServer: Zope/(Zope 2.5.1 (source release, python 2.1, linux2), python 2.1.3,\nlinux2) ZServer/1.1b1\nContent-Length: 3882\nContent-Type: text/html\nEtag:\nSet-Cookie: __ac_name=\"Xavier\"; Expires=Mon, 23 Jun 2003 20:51:39 GMT; Path=/\nX-Cache: MISS from www.plebia.org\nKeep-Alive: timeout=15, max=95\nConnection: Keep-Alive\n\nAs you can see, the __ac_plebia cookie seems to be dropped."}, {"count": 18, "tags": [], "text": "Just to confirm, this bug is still present.  With the advent of the\nchunked-encoding issue, users experiencing this bug can't afford *not* to\nupgrade.  Sorry, I'm not a C hacker so I can't help fix it...", "is_private": false, "id": 19037, "creation_time": "2002-07-05T09:19:52Z", "time": "2002-07-05T09:19:52Z", "creator": "seb.bacon@jamkit.com", "bug_id": 7195, "attachment_id": null}, {"count": 19, "tags": [], "text": "I too see this problem using 1.3.26 proxying for an application server. An \nolder proxy (1.3.14) handles the multiple cookies OK. I hope this helps.", "is_private": false, "id": 20546, "creation_time": "2002-08-01T16:52:02Z", "time": "2002-08-01T16:52:02Z", "creator": "huw.jones@globalcrossing.com", "bug_id": 7195, "attachment_id": null}, {"count": 20, "attachment_id": 2562, "creator": "laxbugzilla@amar.com", "is_private": false, "id": 20555, "time": "2002-08-01T18:23:03Z", "bug_id": 7195, "creation_time": "2002-08-01T18:23:03Z", "tags": [], "text": "Created attachment 2562\nSuccessful fix on 2.24 with this series of changes"}, {"attachment_id": 2563, "tags": [], "bug_id": 7195, "text": "Created attachment 2563\nSuccessful fix on 2.24 with this series of changes", "count": 21, "id": 20556, "time": "2002-08-01T18:24:35Z", "creator": "laxbugzilla@amar.com", "creation_time": "2002-08-01T18:24:35Z", "is_private": false}, {"attachment_id": 2564, "tags": [], "bug_id": 7195, "text": "Created attachment 2564\nSuccessful fix on 2.24 with this series of changes", "count": 22, "id": 20557, "time": "2002-08-01T18:25:05Z", "creator": "laxbugzilla@amar.com", "creation_time": "2002-08-01T18:25:05Z", "is_private": false}, {"count": 23, "tags": [], "text": "Created attachment 2565\nSuccessful fix on 2.24 with this series of changes", "is_private": false, "bug_id": 7195, "id": 20558, "time": "2002-08-01T18:25:28Z", "creator": "laxbugzilla@amar.com", "creation_time": "2002-08-01T18:25:28Z", "attachment_id": 2565}, {"count": 24, "tags": [], "text": "Created attachment 2566\nSuccessful fix on 2.24 with this series of changes", "is_private": false, "bug_id": 7195, "id": 20559, "time": "2002-08-01T18:25:47Z", "creator": "laxbugzilla@amar.com", "creation_time": "2002-08-01T18:25:47Z", "attachment_id": 2566}, {"count": 25, "tags": [], "text": "Created attachment 2567\nSuccessful fix on 2.24 with this series of changes", "is_private": false, "id": 20560, "creation_time": "2002-08-01T18:26:17Z", "time": "2002-08-01T18:26:17Z", "creator": "laxbugzilla@amar.com", "bug_id": 7195, "attachment_id": 2567}, {"attachment_id": 2568, "tags": [], "bug_id": 7195, "text": "Created attachment 2568\nSuccessful fix on 2.24 with this series of changes", "count": 26, "id": 20561, "time": "2002-08-01T18:26:40Z", "creator": "laxbugzilla@amar.com", "creation_time": "2002-08-01T18:26:40Z", "is_private": false}, {"attachment_id": 2569, "tags": [], "bug_id": 7195, "text": "Created attachment 2569\nmod_proxy_cookie_fix.tgz - Tar/zipped file of successful fix on 2.24 (Sorry for previous posts)", "count": 27, "id": 20564, "time": "2002-08-01T18:32:22Z", "creator": "laxbugzilla@amar.com", "creation_time": "2002-08-01T18:32:22Z", "is_private": false}, {"count": 28, "tags": [], "text": " I was successful in modifying/compiling mod_proxy and have had no multiple \ncookie errors since. I'm not sure if I modified any other files, please tell me \nif you get a compile error and I'll look up any other file. \n \n ", "attachment_id": null, "bug_id": 7195, "id": 20565, "time": "2002-08-01T18:34:35Z", "creator": "laxbugzilla@amar.com", "creation_time": "2002-08-01T18:34:35Z", "is_private": false}, {"count": 29, "tags": [], "bug_id": 7195, "text": "Unresolved for 1.3.x - still requires a fix", "id": 20615, "time": "2002-08-02T15:27:46Z", "creator": "huw.jones@globalcrossing.com", "creation_time": "2002-08-02T15:27:46Z", "is_private": false, "attachment_id": null}, {"count": 30, "tags": [], "bug_id": 7195, "attachment_id": null, "id": 22122, "time": "2002-09-02T15:07:39Z", "creator": "minfrin@sharp.fm", "creation_time": "2002-09-02T15:07:39Z", "is_private": false, "text": "Is it possible for you to use the diff tool to create a patch for us? In the\nfiles you uploaded, it is difficult to figure out what you changed."}, {"count": 31, "tags": [], "creator": "minfrin@sharp.fm", "attachment_id": null, "is_private": false, "id": 22136, "time": "2002-09-02T20:44:34Z", "bug_id": 7195, "creation_time": "2002-09-02T20:44:34Z", "text": "Looking at this patch further, it seems to try and fix this bug in v1.3.24. This\nbug has already been fixed in v1.3.26 - please confirm that the problem is fixed\nthere.\n\n(Please don't confuse this bug with a separate problem where cookies set within\nthe proxy itself, ie cookies that do not originate from the backend server, are\nadded to the response twice, this causing cookie duplication)."}, {"count": 32, "tags": [], "bug_id": 7195, "text": "Same problem exist in Apache 2.0 for windows. Anyone has a solution?", "id": 25219, "time": "2002-10-26T03:46:42Z", "creator": "patrickthun@yahoo.com.sg", "creation_time": "2002-10-26T03:46:42Z", "is_private": false, "attachment_id": null}, {"count": 33, "attachment_id": null, "creator": "wrowe@apache.org", "is_private": false, "id": 25220, "time": "2002-10-26T05:36:02Z", "bug_id": 7195, "creation_time": "2002-10-26T05:36:02Z", "tags": [], "text": "\n  Then why did you reopen an apache 1.3 bug?\n\n  Please submit a new bug AFTER you search for a corresponding 2.0 bug,\n  and make sure to note this original 1.3 bug.\n\n  And be sure you FIRST confirm it still exists in the 2.0.43 release."}, {"count": 34, "tags": [], "creator": "patrickthun@yahoo.com.sg", "attachment_id": null, "is_private": false, "id": 25260, "time": "2002-10-28T09:46:30Z", "bug_id": 7195, "creation_time": "2002-10-28T09:46:30Z", "text": "Please disregard my previous comment about the bug in Apache 2.0 for windows.\n\nThe cause of the Set-cookie bug was due to my particular implementation to \ntranslate the domain value in the Set-cookie field.\n\nI have corrected this problem. Sorry for any trouble caused."}]