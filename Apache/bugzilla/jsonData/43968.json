[{"count": 0, "tags": [], "creator": "mashmk02@gmail.com", "attachment_id": null, "id": 111115, "time": "2007-11-26T15:26:35Z", "bug_id": 43968, "creation_time": "2007-11-26T15:26:35Z", "is_private": false, "text": "Dear developers.\n\nI made the mod_jk patch to support ipv6 between mod_jk and Tomcat.\nThe detection of getaddrinfo() and implementation of jk_resolve()\nreferred to APR.\n\nThis patch was tested in the following environments (Do not compile in\nother OS's).\n1.RHEL4/5 with Apache 2.x\n Link-Local address cannot be used.\n\n2.Windows XP Pro with IIS 5.1\n isapi_redirector.dll was constructed by VS 2005 Express + PSDK.\n when constructing the isapi_redirector.dll,  '/D \"HAVE_IPV6\"' and\n'/D \"HAVE_GETADDRINFO\"' were specified.\n\nMy best regards."}, {"count": 1, "attachment_id": 21189, "bug_id": 43968, "text": "Created attachment 21189\nipv6 support patch", "id": 111116, "time": "2007-11-26T15:27:43Z", "creator": "mashmk02@gmail.com", "creation_time": "2007-11-26T15:27:43Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "creator": "mashmk02@gmail.com", "is_private": false, "text": "Created attachment 21463\npatch for mod_jk-1.2.27-dev\n\nnew patch for mod_jk-1.2.27-dev", "id": 113396, "time": "2008-02-03T22:38:59Z", "bug_id": 43968, "creation_time": "2008-02-03T22:38:59Z", "attachment_id": 21463}, {"count": 3, "tags": [], "text": "Created attachment 27058\npatch for 1.2.30\n\nPatch for 1.2.30.\nI did only an easy connection test.\n\n<<workers.properties>>\nworker.ajp1.host=::1\nworker.ajp1.port=8009\n\nregards.", "attachment_id": 27058, "id": 146616, "creator": "mashmk02@gmail.com", "time": "2011-05-25T09:01:07Z", "bug_id": 43968, "creation_time": "2011-05-25T09:01:07Z", "is_private": false}, {"count": 4, "tags": [], "creator": "mashmk02@gmail.com", "is_private": false, "text": "Created attachment 27059\npatch for trunk\n\nPatch for trunk.\nI did only an easy connection test.\n\n<<workers.properties>>\nworker.ajp1.host=::1\nworker.ajp1.port=8009\n\nregards.", "id": 146617, "time": "2011-05-25T09:01:43Z", "bug_id": 43968, "creation_time": "2011-05-25T09:01:43Z", "attachment_id": 27059}, {"count": 5, "tags": [], "text": "I used ipv6_for_1230.patch on 64bit's linux OS, But it also failed when workers.properties file's host is ipv6 address.\n\nmy works.properties is like following:\n-----------\nworker.list=lb1\n\nworker.ci1.type=ajp13\nworker.ci1.host=2001::178\nworker.ci1.port=18009\nworker.ci1.lbfactor=50\nworker.ci1.socket_connect_timeout=3000\n\nworker.ci2.type=ajp13\nworker.ci2.host=2001::178\nworker.ci2.port=28009\nworker.ci2.lbfactor=50\nworker.ci2.socket_connect_timeout=3000\n\nworker.lb1.type=lb\nworker.lb1.balance_workers=ci1,ci2\nworker.lb1.sticky_session=false\nworker.lb1.sticky_session_force=false\nworker.lb1.retries=0\n-----------\n\nI patched the ipv6_for_1230.patch and rebuilded jk\n----\n$patch -p1 < ipv6_for_1230.patch\n$cd tomcat-connector-1.2.30-src/native\n$CFLAGS=\"-m64\" ./configure --with-apxs=$apache2.2.15_root/bin/apxs && make && make install\n$$apache2.2.15_root/bin/apachectl -k start\n----\n\nthen,vi $apache2.2.15_root/logs/mod_jk.log, Threr are following error messages\n---\najp_validate::jk_ajp_common.c (2619): worker ci1 can't resolve tomcat address 2001::178\najp_validate::jk_ajp_common.c (2624): worker ci1 contact is disabled\n...", "is_private": false, "bug_id": 43968, "id": 146650, "time": "2011-05-26T09:19:16Z", "creator": "xuqingkang2@163.com", "creation_time": "2011-05-26T09:19:16Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "mashmk02@gmail.com", "is_private": false, "text": "(In reply to comment #5)\n(snip)\n> I patched the ipv6_for_1230.patch and rebuilded jk\n> ----\n> $patch -p1 < ipv6_for_1230.patch\n> $cd tomcat-connector-1.2.30-src/native\nBefore you do the configure command, execute buildconf.sh.\n\n> $CFLAGS=\"-m64\" ./configure --with-apxs=$apache2.2.15_root/bin/apxs && make &&\n> make install\n> $$apache2.2.15_root/bin/apachectl -k start\n> ----\n> \n> then,vi $apache2.2.15_root/logs/mod_jk.log, Threr are following error messages\n> ---\n> ajp_validate::jk_ajp_common.c (2619): worker ci1 can't resolve tomcat address\n> 2001::178\n> ajp_validate::jk_ajp_common.c (2624): worker ci1 contact is disabled\n> ...\n\nregards.", "id": 146651, "time": "2011-05-26T10:26:10Z", "bug_id": 43968, "creation_time": "2011-05-26T10:26:10Z", "attachment_id": null}, {"count": 7, "tags": [], "text": "*** Bug 51261 has been marked as a duplicate of this bug. ***", "attachment_id": null, "bug_id": 43968, "id": 150857, "time": "2011-10-23T20:17:34Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2011-10-23T20:17:34Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 43968, "attachment_id": null, "id": 150879, "time": "2011-10-24T18:37:25Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2011-10-24T18:37:25Z", "is_private": false, "text": "Hi Eiji,\n\nin jk_connect.c your removed a big block, which was executed when HAVE_APR was defined. Below the block it saqys we should use gethostbyname_r in a multi-threaded environment, which works here at least when using APR, because then we fall back to using APR.\n\nWhen removing the block this is no longer true. Can you comment, why you removed that block starting at line 350?\n\nAnother question: will your patch only work for Apache, or also for IIS and NSAPI? Even without that it is an improvement, just trying to understand.\n\nRegards,\n\nRainer"}, {"count": 9, "tags": [], "text": "Hi,\n\nI ran into this problem of mod_jk not supporting ipv6, and found this bug.  Is this going to be fixed,  or is mod_jk obsolete? On the Tomcat FAQ page on connectors (http://wiki.apache.org/tomcat/FAQ/Connectors),  mod_jk is presented as the preferred connector:\n\n\"mod_jk is mature, stable and extremely flexible.. It is under active development by members of the Tomcat community.\"\n\nI found out that mod_proxy and mod_proxy_ajp do work with ipv6, so I guess I will try to use those instead.\n\nThanks,", "attachment_id": null, "id": 160717, "creator": "y3x1-wwm9@spamex.com", "time": "2012-07-18T18:22:31Z", "bug_id": 43968, "creation_time": "2012-07-18T18:22:31Z", "is_private": false}, {"count": 10, "tags": [], "text": "I'm going to work on this feature this and next week, so hopefully we'll have IPV6 support inside mod_jk.\n\nFirst thing is that APR should be used for name resolution whenever present, so this means that the provided patch removing APR support completely will have to be modified.\n\nNext thing is how to preserve backward compatibility for existing configurations where IPV4 is preferred over IPV6 when resolving hostnames.\n\nThere are two options.\na) have worker.name.hostname6 = localhost\nb) have worker.name.hostname = ::localhost\n\nIn case there is a colon inside name (eg. ::1) use IPV6\n\nBeside that most of the Eiji's patch can be reused.", "attachment_id": null, "id": 169895, "creator": "mturk@apache.org", "time": "2013-09-04T07:22:40Z", "bug_id": 43968, "creation_time": "2013-09-04T07:22:40Z", "is_private": false}, {"count": 11, "tags": [], "creator": "knst.kolinko@gmail.com", "is_private": false, "text": "IPv6 support in mod_jk has been added in 1.2.39.\n\nIs there anything left here, or this can be closed as FIXED?", "id": 175624, "time": "2014-06-03T22:25:54Z", "bug_id": 43968, "creation_time": "2014-06-03T22:25:54Z", "attachment_id": null}, {"count": 12, "attachment_id": null, "bug_id": 43968, "is_private": false, "id": 175625, "time": "2014-06-04T04:35:54Z", "creator": "mturk@apache.org", "creation_time": "2014-06-04T04:35:54Z", "tags": [], "text": "Resolving the issue since it's been implemented"}]