[{"count": 0, "tags": [], "creator": "den04304@gmail.com", "attachment_id": null, "id": 138626, "time": "2010-07-21T23:58:10Z", "bug_id": 49635, "creation_time": "2010-07-21T23:58:10Z", "is_private": false, "text": "I can't run a below code.\n\n@WebServlet(urlPatterns={\"/async\"}, asyncSupported=true)\npublic class AsyncServlet extends HttpServlet {\n\tprivate static final long serialVersionUID = 1L;\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n\t\tAsyncContext context = request.startAsync(request, response);\n\t\t\n\t\tcontext.start(new Runnable() {\n\t\t\t@Override\n\t\t\tpublic void run() {\n\t\t\t\tSystem.out.println(\"async!!\");\n\t\t\t}\n\t\t});\n\t}\n}\n\nIt occur java.lang.StackOverflowError.\n\njava.lang.StackOverflowError\n\tat org.apache.catalina.connector.RequestFacade.startAsync(RequestFacade.java:963)\n\tat org.apache.catalina.connector.RequestFacade.startAsync(RequestFacade.java:963)\n\tat org.apache.catalina.connector.RequestFacade.startAsync(RequestFacade.java:963)\n.\n.\n.\n\nSo, I think that org.apache.catalina.connector.RequestFacade has wrong implementation.I show part of source code in RequestFacade line number is 961 to 964.\n\npublic AsyncContext startAsync(ServletRequest request, ServletResponse response)\n    throws IllegalStateException {\n    return request.startAsync(request, response);\n}\n\nI think it should have \"this.\" before \"request\" next \"return\"."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "text": "The analysis is wrong but there is an issue. The root cause is the same as the duplicate where a fix is currently being worked on.\n\n*** This bug has been marked as a duplicate of bug 49567 ***", "id": 138627, "time": "2010-07-22T02:08:44Z", "bug_id": 49635, "creation_time": "2010-07-22T02:08:44Z", "is_private": false, "attachment_id": null}]