[{"count": 0, "tags": [], "creator": "bherndon@kodakgallery.com", "attachment_id": null, "is_private": false, "id": 84588, "time": "2006-01-13T07:43:56Z", "bug_id": 38256, "creation_time": "2006-01-13T07:43:56Z", "text": "JMeter's HTTP CookieManager (as of 2.1.20060112) processes set-cookie headers by\ninitially setting the new cookie's path to the same path as the requested URL\n(modified slightly to trim the terminal page name).  When a set-cookie header\ncomes in with no path attribute, the URL's path is left in the cookie and that\npath is used as the lookup key.  This is different than contemporary browsers\nthat use the root path (i.e., \"/\") as the path for set-cookie headers that lack\na path attribute.\n\nThe current behavior can cause many requests to set cookies with incorrect path\ncausing downstream failures for HTTP requests that need cookies that would\nordinarily be passed becauese thay have a root path.\n\nThe problem seems to be lines 327 through 336 of:\n\norg.apache.jmeter.protocol.http.control.CookieManager\n\n...method setCookieFromHeader()"}, {"count": 1, "tags": [], "creator": "bherndon@kodakgallery.com", "attachment_id": 17406, "text": "Created attachment 17406\nPatch for CookieManager#setCookieFromHeader\n\nI should note that I don't think that the URL setting that is being replaced is\nnecessary since browsers don't behave as if they ever use the submission URL. \nHowever, the the replaced code could be useful if moved to the section where\nthe set-cookie header *WITH* a path attribute is detected.", "id": 84589, "time": "2006-01-13T08:30:13Z", "bug_id": 38256, "creation_time": "2006-01-13T08:30:13Z", "is_private": false}, {"attachment_id": 17407, "tags": [], "creator": "bherndon@kodakgallery.com", "text": "Created attachment 17407\nPatch for CookieManager#setCookieFromHeader\n\nI should note that I don't think that the URL setting that is being replaced is\nnecessary since browsers don't behave as if they ever use the submission URL. \nHowever, the the replaced code could be useful if moved to the section where\nthe set-cookie header *WITH* a path attribute is detected.", "count": 2, "id": 84590, "time": "2006-01-13T08:30:18Z", "bug_id": 38256, "creation_time": "2006-01-13T08:30:18Z", "is_private": false}, {"attachment_id": 17408, "tags": [], "creator": "bherndon@kodakgallery.com", "text": "Created attachment 17408\n4 JUnit test cases to cover the set-cookie behavior\n\nThe first two of these test cases should fail on 2.1.20060112 and succeed after\napplication of patch 17406.  The other two are included for completeness.", "count": 3, "id": 84591, "time": "2006-01-13T08:33:11Z", "bug_id": 38256, "creation_time": "2006-01-13T08:33:11Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "bherndon@kodakgallery.com", "text": "Sorry my comment for attachment 38406 should have said the replaced code is *not\nnecessary* but could be useful elsewhere.\n", "count": 4, "id": 84592, "time": "2006-01-13T08:36:29Z", "bug_id": 38256, "creation_time": "2006-01-13T08:36:29Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "sebb@apache.org", "is_private": false, "count": 5, "id": 84616, "time": "2006-01-13T21:12:34Z", "bug_id": 38256, "creation_time": "2006-01-13T21:12:34Z", "text": "Thanks, applied to 2.1 branch.\n\nBy the way, the patches were quite difficult to use.\nThey were not in unified diff format, so could not be used by Eclipse."}]