[{"count": 0, "tags": [], "text": "Enabling proxy disk caching, when the validity of a cached page expires, the\nheader file in the relevant directory below CacheRoot gets refreshed but the\n\"data\" file does not. The old version of the data file is served to the client.\nA corrsponding stale \"aptmpxxxxxx\" is left in the CacheRoot.\nThe server thinks everything whent fine.\n\nRelevant configuration:\n-----------\nCacheRoot c:/apache_cache\nCacheMaxExpire 10000\nCacheDirLevels 3\nCacheDirLength 1\nCacheEnable disk /\n-----------\n\nEnabling debug level error logging:\n proxy_util.c(1816): proxy: HTTP: has released connection for (server04)\n mod_disk_cache.c(477): disk_cache: Recalled cached URL info header\nhttp://localhost:8280/intranet/internet.nsf/X1017?ReadForm\n mod_disk_cache.c(750): disk_cache: Recalled headers for URL\nhttp://localhost:8280/intranet/internet.nsf/X1017?ReadForm\n cache_storage.c(272): Cached response for /intranet/internet.nsf/X1017 isn't\nfresh.  Adding/replacing conditional request headers.\n mod_cache.c(129): Adding CACHE_SAVE filter for /intranet/internet.nsf/X1017\n mod_cache.c(136): Adding CACHE_REMOVE_URL filter for /intranet/internet.nsf/X1017\n mod_proxy_http.c(54): proxy: HTTP: canonicalising URL\n//server04/intranet/internet.nsf/X1017\n proxy_util.c(1378): [client 127.0.0.1] proxy: http: found worker\nhttp://server04/ for http://server04/intranet/internet.nsf/X1017?ReadForm\n mod_proxy.c(777): Running scheme http handler (attempt 0)\n mod_proxy_http.c(1662): proxy: HTTP: serving URL\nhttp://server04/intranet/internet.nsf/X1017?ReadForm\n proxy_util.c(1798): proxy: HTTP: has acquired connection for (server04)\n proxy_util.c(1859): proxy: connecting\nhttp://server04/intranet/internet.nsf/X1017?ReadForm to server04:80\n proxy_util.c(1955): proxy: connected /intranet/internet.nsf/X1017?ReadForm to\nserver04:80\n proxy_util.c(2050): proxy: HTTP: fam 2 socket created to connect to server04\n proxy_util.c(2146): proxy: HTTP: connection complete to 192.168.12.4:80 (server04)\n mod_proxy_http.c(1448): proxy: start body send\n mod_cache.c(609): cache: Caching url: /intranet/internet.nsf/X1017?ReadForm\n mod_cache.c(615): cache: Removing CACHE_REMOVE_URL filter.\n mod_disk_cache.c(954): disk_cache: Stored headers for URL\nhttp://localhost:8280/intranet/internet.nsf/X1017?ReadForm\n mod_disk_cache.c(1043): disk_cache: Body for URL\nhttp://localhost:8280/intranet/internet.nsf/X1017?ReadForm cached.\n mod_proxy_http.c(1537): proxy: end body send", "is_private": false, "bug_id": 44104, "id": 111903, "time": "2007-12-19T03:58:13Z", "creator": "dcanazz@gmail.com", "creation_time": "2007-12-19T03:58:13Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "is_private": false, "text": "It seems like there is a problem with moving the temporary file to the final\ndestination (aka the data file). Please apply the following patch to get more\ninformation:\n\nhttp://svn.apache.org/viewvc/httpd/httpd/trunk/modules/cache/mod_disk_cache.c?r1=409942&r2=409941&pathrev=409942&view=patch", "id": 111964, "time": "2007-12-20T13:46:08Z", "bug_id": 44104, "creation_time": "2007-12-20T13:46:08Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 44104, "attachment_id": null, "is_private": false, "id": 111974, "time": "2007-12-21T02:21:34Z", "creator": "dcanazz@gmail.com", "creation_time": "2007-12-21T02:21:34Z", "text": "(In reply to comment #1)\n> It seems like there is a problem with moving the temporary file to the final\n> destination (aka the data file). Please apply the following patch to get more\n> information:\nThank you Ruediger, but currently I am using the binary distribution and I am\nnot ready to compile the program myself. Maybe I will be in the next days, but\nin the meantime (it's a production sever and my company relies on it), we\nswitched to memory caching that works flawlessly."}, {"attachment_id": null, "tags": [], "creator": "wrowe@apache.org", "is_private": false, "count": 3, "id": 112338, "time": "2007-12-30T23:13:11Z", "bug_id": 44104, "creation_time": "2007-12-30T23:13:11Z", "text": "AIUI this is patched for 2.2.7 so we'd encourage you to retest that once it\nbecomes available in the coming week."}, {"count": 4, "tags": [], "creator": "nick@webthing.com", "is_private": false, "text": "As per Comment 3, assuming fixed.  Please reopen if not.", "id": 123536, "time": "2008-12-26T12:01:09Z", "bug_id": 44104, "creation_time": "2008-12-26T12:01:09Z", "attachment_id": null}]