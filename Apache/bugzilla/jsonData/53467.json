[{"count": 0, "attachment_id": null, "bug_id": 53467, "is_private": false, "id": 160253, "time": "2012-06-25T21:56:46Z", "creator": "apache@natecarlson.com", "creation_time": "2012-06-25T21:56:46Z", "tags": [], "text": "We are currently running Tomcat7 7.0.27, and attempting to upgrade to 7.0.28.\n\nSome of our jsp files have square brackets and commas in the filenames, ie:\n\nWEB-INF/templates/com.example.standard/Container.asHeaderItem[_,_,closings].jsp\n\nWith 7.0.27, this works fine. With 7.0.28, an error is thrown to the 'localhost.<date>.log' file, IE:\n\n\n\nJun 25, 2012 4:17:42 PM org.apache.catalina.core.ApplicationContext log\nSEVERE: Failed to locate resource [/WEB-INF/templates//com.example.standard/CMContainer.asHeaderItem[_,_,closings].jsp] in context [/cae]\njava.net.URISyntaxException: Illegal character in path at index 123: jndi:/localhost/cae/WEB-INF/templates/com.example.standard/Container.asHeaderItem[_,_,closings].jsp\n        at java.net.URI$Parser.fail(URI.java:2810)\n        at java.net.URI$Parser.checkChars(URI.java:2983)\n        at java.net.URI$Parser.parseHierarchical(URI.java:3067)\n        at java.net.URI$Parser.parse(URI.java:3015)\n        at java.net.URI.<init>(URI.java:806)\n        at org.apache.catalina.core.ApplicationContext.getResource(ApplicationContext.java:537)\n        at org.apache.catalina.core.ApplicationContextFacade.getResource(ApplicationContextFacade.java:201)\n        at org.springframework.web.context.support.ServletContextResource.exists(ServletContextResource.java:101)\n\n\nLooks like this is the change that is breaking things:\nhttp://svn.apache.org/viewvc/tomcat/trunk/java/org/apache/catalina/core/ApplicationContext.java?r1=1344890&r2=1345357&pathrev=1345357\n\nWas this intentional? Or is our naming actually OK and this is a new bug?"}, {"count": 1, "attachment_id": null, "bug_id": 53467, "text": "Just for information (to save others having to look up RFC 2396) ',' is reserved, '[' is not permitted and ']' is not permitted. All three must be escaped before being used.\n\nThis does look like a Tomcat bug at this stage.", "id": 160291, "time": "2012-06-27T12:59:09Z", "creator": "markt@apache.org", "creation_time": "2012-06-27T12:59:09Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 53467, "attachment_id": null, "is_private": false, "id": 160302, "time": "2012-06-27T17:53:05Z", "creator": "markt@apache.org", "creation_time": "2012-06-27T17:53:05Z", "text": "r1345357 is not responsible for this. It looks like r1344890 is.\n\nI am currently looking for a solution that works with this bug, bug53257 and bug51584."}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 160307, "time": "2012-06-27T18:55:11Z", "bug_id": 53467, "creation_time": "2012-06-27T18:55:11Z", "is_private": false, "text": "Fixed in trunk and 7.0.x and will be included in 7.0.29 onwards."}]