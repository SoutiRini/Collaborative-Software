[{"count": 0, "tags": [], "creator": "roberto@connexer.com", "attachment_id": null, "id": 97454, "time": "2006-12-29T12:35:02Z", "bug_id": 41262, "creation_time": "2006-12-29T12:35:02Z", "is_private": false, "text": "When building the latest stable httpd on Mac OS X, the server segfaults if the\nusertrack module is enabled.  This can be corrected by upgrading the embedded\npcre or using an external pcre.  I first tried to update the embedded pcre in\nsrclib to a newer version (7.0), but it caused the build to fail because of\nunexpanded macros in the Makefile.  However, by compiling it seperately and\ninstalling it in /usr/local/pcre, I was able to recompile httpd and have it work\nwith all the modules loaded.  I am using the Apple Developer tools and\nconfigured with this command: './configure --enable-modules=all\n--enable-mods-shared=all --with-included-apr --with-mpm=prefork --enable-ldap\n--enable-authnz-ldap --enable-ssl --with-ldap --with-pcre=/usr/local/pcre' (To\nreproduce the segfault, don't use --with-pcre).  I did not modify any of the\nconfiguration files after running 'make install' and before running\n'/usr/local/apache2/bin/apachectl start'.  I recommend updating the embedded\npcre in srclib.\n\nHere is the gdb output of the segfaulted server:\n\n$ gdb /usr/local/apache2/bin/httpd\nGNU gdb 6.1-20040303 (Apple version gdb-437) (Fri Jan 13 18:45:48 GMT 2006)\nCopyright 2004 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"i386-apple-darwin\"...Reading symbols for shared\nlibraries ........ done\n\n(gdb) run -k start\nStarting program: /usr/local/apache2/bin/httpd -k start\nReading symbols for shared libraries ......+++ done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries .. done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\n \nProgram received signal EXC_BAD_ACCESS, Could not access memory.\nReason: KERN_INVALID_ADDRESS at address: 0x7fffd69b\n0x0002da60 in compile_regex (options=0, oldims=0, brackets=0xbfffefe4,\ncodeptr=0xbfffeb10, ptrptr=0xbfffeb0c, errorptr=0xbffff03c, lookbehind=0,\nskipbytes=0, firstbyteptr=0xbfffeb04, reqbyteptr=0xbfffeafc, bcptr=0xbfffeaf4,\ncd=0xbfffef98) at pcre.c:2463\n2463                for (c = 0; c < 32; c++) classbits[c] |= ~cbits[c+cbit_digit];\n\n(gdb) bt\n#0  0x0002da60 in compile_regex (options=0, oldims=0, brackets=0xbfffefe4,\ncodeptr=0xbfffeb10, ptrptr=0xbfffeb0c, errorptr=0xbffff03c, lookbehind=0,\nskipbytes=0, firstbyteptr=0xbfffeb04, reqbyteptr=0xbfffeafc, bcptr=0xbfffeaf4,\ncd=0xbfffef98) at pcre.c:2463\n#1  0x0002d6c7 in compile_regex (options=0, oldims=0, brackets=0xbfffefe4,\ncodeptr=0xbfffefe0, ptrptr=0xbfffefdc, errorptr=0xbffff03c, lookbehind=0,\nskipbytes=0, firstbyteptr=0xbfffefec, reqbyteptr=0xbfffefe8, bcptr=0x0,\ncd=0xbfffef98) at pcre.c:3666\n#2  0x00030114 in pcre_compile (pattern=0x1849380 \"^Apache=([^;,]+)|[;,][\n\\t]*Apache=([^;,]+)\", options=0, errorptr=0xbffff03c, erroroffset=0xbffff038,\ntables=0x3f2a0 \"\") at pcre.c:5509\n#3  0x00008470 in ap_regcomp (preg=0x18493b0, pattern=0x1849380\n\"^Apache=([^;,]+)|[;,][ \\t]*Apache=([^;,]+)\", cflags=0) at util_pcre.c:135\n#4  0x000053a7 in ap_pregcomp (p=0x1806418, pattern=0x1849380\n\"^Apache=([^;,]+)|[;,][ \\t]*Apache=([^;,]+)\", cflags=0) at util.c:268\n#5  0x005a6b18 in set_and_comp_regexp (dcfg=0x1849368, p=0x1806418,\ncookie_name=0x5a6ff4 \"Apache\") at mod_usertrack.c:203\n#6  0x005a6c38 in make_cookie_dir (p=0x1806418, d=0x0) at mod_usertrack.c:268\n#7  0x0001a3dc in ap_single_module_configure (p=0x1806418, s=0x180bda0,\nm=0x5a7020) at config.c:2031\n#8  0x00028eac in load_module (cmd=0xbffff668, dummy=0xbffff4b4,\nmodname=0x18491b0 \"usertrack_module\", filename=0x18491c8\n\"modules/mod_usertrack.so\") at mod_so.c:294\n#9  0x00017a36 in invoke_cmd (cmd=0x40060, parms=0xbffff668, mconfig=0xbffff4b4,\nargs=0x183d44c \"\") at config.c:768\n#10 0x0001853a in ap_build_config_sub (p=0x180b878, temp_pool=0x184938d,\nl=0xbfffe918 \"h\u00ed\u00ff\u00bf\", parms=0xbffff668, current=0xbffff51c,\ncurr_parent=0xbffff518, conftree=0x3f0a8) at config.c:1419\n#11 0x00018b05 in ap_build_config (parms=0xbffff668, p=0x1806418,\ntemp_pool=0x1836418, conftree=0x3f0a8) at config.c:1202\n#12 0x000192d0 in process_resource_config_nofnmatch (s=0x180bda0,\nfname=0x1838ef0 \"/usr/local/apache2/conf/httpd.conf\", conftree=0x3f0a8,\np=0x1806418, ptemp=0x1836418, depth=0) at config.c:1612\n#13 0x000195d8 in ap_process_resource_config (s=0x180bda0, fname=0x1838ef0\n\"/usr/local/apache2/conf/httpd.conf\", conftree=0x3f0a8, p=0x1806418,\nptemp=0x1836418) at config.c:1644\n#14 0x0001a1eb in ap_read_config (process=0x18044a0, ptemp=0x1836418,\nfilename=0x3567c \"conf/httpd.conf\", conftree=0x3f0a8) at config.c:2004\n#15 0x00003272 in main (argc=3, argv=0xbffff98c) at main.c:610\n(gdb)"}, {"count": 1, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "id": 97461, "time": "2006-12-29T15:41:39Z", "bug_id": 41262, "creation_time": "2006-12-29T15:41:39Z", "is_private": false, "text": "Please execute the following additional gdb commands in the case of a crash:\n\nbt full\ninfo frame\ninfo registers\np *cd\n\nThis will help us to find out which of the variables points to the offending\naddress (0x7fffd69b in the case below).\n"}, {"count": 2, "tags": [], "creator": "roberto@connexer.com", "text": "$ gdb /usr/local/apache2-crash/bin/httpd GNU gdb 6.1-20040303 (Apple version\ngdb-437) (Fri Jan 13 18:45:48 GMT 2006)\nCopyright 2004 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"i386-apple-darwin\"...Reading symbols for shared\nlibraries ........ done\n\n(gdb) run -k start\nStarting program: /usr/local/apache2-crash/bin/httpd -k start\nReading symbols for shared libraries ......+++ done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries .. done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\nReading symbols for shared libraries . done\n\nProgram received signal EXC_BAD_ACCESS, Could not access memory.\nReason: KERN_INVALID_ADDRESS at address: 0x7fffd5fb\n0x0002da58 in compile_regex (options=0, oldims=0, brackets=0xbfffef94,\ncodeptr=0xbfffeac0, ptrptr=0xbfffeabc, errorptr=0xbfffefec, lookbehind=0,\nskipbytes=0, firstbyteptr=0xbfffeab4, reqbyteptr=0xbfffeaac, bcptr=0xbfffeaa4,\ncd=0xbfffef48) at pcre.c:2463\n2463                for (c = 0; c < 32; c++) classbits[c] |= ~cbits[c+cbit_digit];\n(gdb) bt full\n#0  0x0002da58 in compile_regex (options=0, oldims=0, brackets=0xbfffef94,\ncodeptr=0xbfffeac0, ptrptr=0xbfffeabc, errorptr=0xbfffefec, lookbehind=0,\nskipbytes=0, firstbyteptr=0xbfffeab4, reqbyteptr=0xbfffeaac, bcptr=0xbfffeaa4,\ncd=0xbfffef48) at pcre.c:2463\n        cbits = (const uschar *) 0xbfffe8c8 \"\\030\u00ed\u00ff\u00bf\"\n        possessive_quantifier = 0\n        is_quantifier = 0\n        subreqbyte = -1866673032\n        subfirstbyte = -1073746528\n        class_lastchar = 25465965\n        skipbytes = 16\n        repeat_max = 0\n        bravalue = 0\n        condcount = -1073747768\n        groupsetfirstbyte = 0\n        repeat_type = 0\n        req_caseopt = 0\n        tempcode = (uschar *) 0x8fe53840\n\"\u00f8P\u00e0\\217\u00a6&\u00e0\\2178Q\u00e0\\217\u00a66\u00e0\\217\\2046\u00e0\\217\u00e4\\027\u00e0\\217h7\u00e0\\217\\214Q\u00e0\\2176'\u00e0\\217\"\n        inescq = 0\n        ptr = (const uschar *) 0x184946d \"]+)|[;,][ \\t]*Apache=([^;,]+)\"\n        tempptr = (const uschar *) 0x9114b3dc \"/usr/lib/libSystem.B.dylib\"\n        classbits = \"\\000\\000\\000\\000\\000\\020\\000\\b\", '\\0' <repeats 23 times>\n        repeat_min = 0\n        after_manual_callout = 0\n        c = 16\n        op_type = -1073747768\n        reqvary = 0\n        tempreqvary = 0\n        ptr = (const uschar *) 0x184946d \"]+)|[;,][ \\t]*Apache=([^;,]+)\"\n        code = (uschar *) 0x5d <Address 0x5d out of bounds>\n        last_branch = (uschar *) 0x400a1a \"Q\"\n        reverse_count = (uschar *) 0x0\n        firstbyte = -2\n        reqbyte = -2\n        branchfirstbyte = -2\n        branchreqbyte = -2\n        bc = {\n  outer = 0xbfffeaa4,\n  current = 0x400a1a \"Q\"\n}\n        bcptr = (branch_chain *) 0x5d\n#1  0x0002d6bf in compile_regex (options=0, oldims=0, brackets=0xbfffef94,\ncodeptr=0xbfffef90, ptrptr=0xbfffef8c, errorptr=0xbfffefec, lookbehind=0,\nskipbytes=0, firstbyteptr=0xbfffef9c, reqbyteptr=0xbfffef98, bcptr=0x0,\ncd=0xbfffef48) at pcre.c:3666\n        possessive_quantifier = -1880803264\n        is_quantifier = 0\n        subreqbyte = -1881125354\n        subfirstbyte = 0\n        class_lastchar = 25465965\n        skipbytes = 0\n        repeat_max = 0\n        bravalue = 81\n        condcount = -1073747768\n        groupsetfirstbyte = 0\n        repeat_type = 0\n        req_caseopt = 0\n        tempcode = (uschar *) 0x400a1a \"Q\"\n        inescq = 0\n        ptr = (const uschar *) 0x1849469 \"[^;,]+)|[;,][ \\t]*Apache=([^;,]+)\"\n        tempptr = (const uschar *) 0x0\n        classbits =\n\"\\000\\000\\000\\000\\000\\000\\000\\000H$\\000\\220\u00e2\\000\\000\\000\\003\\000\\000\\000\u00e8\u00ea\u00ff\u00bf\\217&\\000\\220\\000\\000\\200\\001\"\n        repeat_min = 0\n        after_manual_callout = 0\n        c = 0\n        op_type = -1073747768\n        reqvary = 0\n        tempreqvary = 0\n        ptr = (const uschar *) 0x184946d \"]+)|[;,][ \\t]*Apache=([^;,]+)\"\n        code = (uschar *) 0x5d <Address 0x5d out of bounds>\n        last_branch = (uschar *) 0x400a08 \"P\"\n        reverse_count = (uschar *) 0x0\n        firstbyte = -2\n        reqbyte = -2\n        branchfirstbyte = 65\n        branchreqbyte = 101\n        bc = {\n  outer = 0x0,\n  current = 0x400a08 \"P\"\n}\n        bcptr = (branch_chain *) 0x5d\n#2  0x0003010c in pcre_compile (pattern=0x1849460 \"^Apache=([^;,]+)|[;,][\n\\t]*Apache=([^;,]+)\", options=0, errorptr=0xbfffefec, erroroffset=0xbfffefe8,\ntables=0x3f2a0 \"\") at pcre.c:5509\n        re = (real_pcre *) 0x4009e0\n        length = 182\n        c = 44\n        firstbyte = 46\n        reqbyte = 2118144\n        bracount = 1\n        branch_extra = 0\n        branch_newextra = 93\n        item_count = 26\n        name_count = 0\n        max_name_size = 93\n        lastitemlength = 1\n        inescq = 0\n        brastackptr = 0\n        size = 0\n        code = (uschar *) 0x400a08 \"P\"\n        codestart = (const uschar *) 0x400a08 \"P\"\n        ptr = (const uschar *) 0x1849460 \"^Apache=([^;,]+)|[;,][\n\\t]*Apache=([^;,]+)\"\n        compile_block = {\n  lcc = 0x3f2a0 \"\",\n  fcc = 0x3f3a0 \"\",\n  cbits = 0x3f4a0 \"\",\n  ctypes = 0x3f5e0 \"\\200\",\n  start_code = 0x400a08 \"P\",\n  start_pattern = 0x1849460 \"^Apache=([^;,]+)|[;,][ \\t]*Apache=([^;,]+)\",\n  name_table = 0x400a08 \"P\",\n  names_found = 0,\n  name_entry_size = 3,\n  top_backref = 0,\n  backref_map = 0,\n  req_varyopt = 0,\n  nopartial = 0\n}\n        brastack = {142, 25465536, -1073747000, -1881125354, 0 <repeats 12\ntimes>, -1073745932, -1073745872, 25465536, 0, 0, 0, 0, -1881125179, 0,\n25465536, -1073745896, -1881125075, 0, 0, 0, -1881125628, -1073745680, 0,\n-1073746904, 19822, 0, 0, 0, 0, 0, 0, 0, 2103264, 2103264, 0, 1, -1880969622,\n2103264, 0, -1073746840, -1880928605, 8388608, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0,\n302448, 2103264, 0, -1073746808, -1881105009, 8388608, 0, 0, 2113664, 2113664,\n2103296, 0, 3154053, 2103296, 2103584, 0, 2, -1073745488, 654696, 11,\n-1880947369, 3835618, 3466792, 172, -1881077209, 5942910, 3492403, 48,\n-1881089198, -1879046316, -1073746720, 13, -1880969622, 1835166060, 5, 24,\n-1880928605, 1831747, 46, 672912, -1881098623, 23, 48, 672912, 655464, 1,\n3470204, 3272944, 3481620, 173, 171, 0, -1880947369, 1, 2, 0, -1880928605,\n2118512, 48, -1073746296, -1879016158, 4196784, 48, 48, -1881131634, 2099984, 2,\n0, 131072, -1073746260, 653400, 23, -1881076672, 5942857, 675941, -1073746504,\n2118544, 2118544, 48, 0, -1880947369, 1, 651528, 11, -1881076672, 5942826,\n707312, 0, 5251095, 16772780, 211008, 672912, 653124, 47, 3470204, 3272944,\n3481620, 278, 278, 203, -1881077209, 5942928, 3481856, 672912, 651396, 23, 0,\n1270440, -1881131938, 2097248, 0, -1073746312, -1881131634, 2097248, 653400, 0,\n0, -1073746084, 98427, 672912, 655464, -1880982564, -1512901655, -1881085377,\n-1881084870, -2035352088, 834625679, -1512901655, 834625791, 5931118, 1,\n-1073746264, -1881084176, -1880803264, 5942857, -1073746280, -1881131329}\n        bralenstack = \"\\000\u00ef\u00ff\u00bf\\006\\000\\000\\000\u00e8\u00ee\u00ff\u00bf\\2165\u00e0\\217\\020\\v\n\\000\u00c0\u00db4\\000\u00f8\u00ee\u00ff\u00bf[\u00f0\u00e0\\217\u00f3\\000\n\\000X\u00f8\\t\\000\\\\\u00ef\u00ff\u00bf\u00bf6\u00e0\\217\u00d2{\u00e2\\217\u00e9\u00a2\\210\u00d6?\u00ea\u00e0\\217:\u00ec\u00e0\\217\u00a5W\u00af\\206\\217\u00e8R\u00af\u00e9\u00a2\\210\u00d6\u00ff\u00e8R\u00af\u00ff\\200Z\\000\\b\u00f1\\t\\000\\214\u00ef\u00ff\u00bfX\u00f8\\t\\000@8\u00e5\\217\\220\u00aeZ\\000\\b\u00ef\u00ff\u00bf0\u00f5\u00e0\\217I\u00aeZ\\000 RZ\\000x\u00ef\u00ff\u00bfi\u00f6\u00e0\\217\u00e0Q\n\\000n\\200Z\\000 RZ\\000I\u00aeZ\\000fS\\000\\000`\\000\n\\000@8\u00e5\\2170\u00f5\u00e0\\217\\210\u00aeZ\\000 RZ\\000\u00a8\u00ef\u00ff\u00bfn\\000\\000\\000\u00d6Q\n\\000\\017\\200Z\\000 RZ\\000*\u00aeZ\\000\\a\\000\\000\\000\\020\u00adZ\"\n#3  0x00008468 in ap_regcomp (preg=0x1849490, pattern=0x1849460\n\"^Apache=([^;,]+)|[;,][ \\t]*Apache=([^;,]+)\", cflags=0) at util_pcre.c:135\n        errorptr = 0x0\n        erroffset = 0\n        preg = (ap_regex_t *) 0x1849490\n        pattern = 0x5d <Address 0x5d out of bounds>\n        cflags = 93\n#4  0x0000539f in ap_pregcomp (p=0x1806418, pattern=0x1849460\n\"^Apache=([^;,]+)|[;,][ \\t]*Apache=([^;,]+)\", cflags=0) at util.c:268\n        preg = (ap_regex_t *) 0x1849490\n        p = (struct apr_pool_t *) 0x1806418\n        pattern = 0x5d <Address 0x5d out of bounds>\n        cflags = 93\n#5  0x005a6b18 in set_and_comp_regexp (dcfg=0x1849448, p=0x1806418,\ncookie_name=0x5a6ff4 \"Apache\") at mod_usertrack.c:203\n        danger_chars = 0\n        sp = 0x0\n#6  0x005a6c38 in make_cookie_dir (p=0x1806418, d=0x0) at mod_usertrack.c:268\n        p = (struct apr_pool_t *) 0x1806418\n#7  0x0001a3d4 in ap_single_module_configure (p=0x1806418, s=0x180bda0,\nm=0x5a7020) at config.c:2031\n        m = (module *) 0x5a7020\n#8  0x00028ea4 in load_module (cmd=0xbffff618, dummy=0xbffff464,\nmodname=0x1849288 \"usertrack_module\", filename=0x18492a0\n\"modules/mod_usertrack.so\") at mod_so.c:294\n        modhandle = (struct apr_dso_handle_t *) 0x18492f8\n        modsym = 0x5a7020\n        modp = (module *) 0x5a7020\n        szModuleFile = 0x18492c0 \"/usr/local/apache2-crash/modules/mod_usertrack.so\"\n        modi = (ap_module_symbol_t *) 0x1838508\n        modie = (ap_module_symbol_t *) 0x5d\n        i = 5926944\n        error = 0x0\n        dummy = (void *) 0x5d\n        filename = 0x0\n#9  0x00017a2e in invoke_cmd (cmd=0x40060, parms=0xbffff618, mconfig=0xbffff464,\nargs=0x183d44c \"\") at config.c:768\n        w = 0x40060 \"(\u00c5\\003\"\n        w2 = 0x5d <Address 0x5d out of bounds>\n        w3 = 0x184946d \"]+)|[;,][ \\t]*Apache=([^;,]+)\"\n        errmsg = 0x0\n#10 0x00018532 in ap_build_config_sub (p=0x180b878, temp_pool=0x184946d,\nl=0xbfffe8c8 \"\\030\u00ed\u00ff\u00bf\", parms=0xbffff618, current=0xbffff4cc,\ncurr_parent=0xbffff4c8, conftree=0x3f0a8) at config.c:1419\n        ml = (ap_mod_list *) 0x180b878\n        dir = 0x180b878 \"\"\n        args = 0x183d423 \"usertrack_module modules/mod_usertrack.so\"\n        sub_tree = (ap_directive_t *) 0x0\n        retval = 0x184946d \"]+)|[;,][ \\t]*Apache=([^;,]+)\"\n        args = 0x183d423 \"usertrack_module modules/mod_usertrack.so\"\n        cmd_name = 0x1849218 \"LoadModule\"\n        mod = (module *) 0x3f1e0\n        cmd = (const command_rec *) 0x5d\n#11 0x00018afd in ap_build_config (parms=0xbffff618, p=0x1806418,\ntemp_pool=0x1836418, conftree=0x3f0a8) at config.c:1202\n        current = (ap_directive_t *) 0x183a0a0\n        curr_parent = (ap_directive_t *) 0x0\n        l = 0x183d418 \"LoadModule usertrack_module modules/mod_usertrack.so\"\n        errmsg = 0x184946d \"]+)|[;,][ \\t]*Apache=([^;,]+)\"\n        conftree = (ap_directive_t **) 0x3f0a8\n#12 0x000192c8 in process_resource_config_nofnmatch (s=0x180bda0,\nfname=0x1838ef0 \"/usr/local/apache2-crash/conf/httpd.conf\", conftree=0x3f0a8,\np=0x1806418, ptemp=0x1836418, depth=0) at config.c:1612\n        parms = {\n  info = 0x0,\n  override = 150,\n  limited = -1,\n  limited_xmethods = 0x0,\n  xlimited = 0x0,\n  config_file = 0x1839fb0,\n  directive = 0x0,\n  pool = 0x1806418,\n  temp_pool = 0x1836418,\n  server = 0x180bda0,\n  path = 0x0,\n  cmd = 0x40060,\n  context = 0x0,\n  err_directive = 0x1849228,\n  override_opts = 239\n}\n        cfp = (ap_configfile_t *) 0x1839fb0\n        error = 0x5d <Address 0x5d out of bounds>\n        rv = 25465965\n#13 0x000195d0 in ap_process_resource_config (s=0x180bda0, fname=0x1838ef0\n\"/usr/local/apache2-crash/conf/httpd.conf\", conftree=0x3f0a8, p=0x1806418,\nptemp=0x1836418) at config.c:1644\n        fname = 0x1838ef0 \"/usr/local/apache2-crash/conf/httpd.conf\"\n        dirp = (struct apr_dir_t *) 0x0\n        dirent = {\n  pool = 0x18,\n  valid = 25,\n  protection = 40,\n  filetype = 4294967295,\n  user = 4294967295,\n  group = 4294967295,\n  inode = 4294967295,\n  device = 232508,\n  nlink = 263868,\n  size = 436166814044096,\n  csize = 25398056,\n  atime = 436384783398840,\n  mtime = 939553087027116,\n  ctime = 137439172227,\n  fname = 0x1806418 \"\\030D\\200\\001\\030d\\204\\001\",\n  name = 0xef <Address 0xef out of bounds>,\n  filehand = 0x1808450\n}\n        current = 25399024\n        candidates = (apr_array_header_t *) 0x5\n        rv = 25465965\n        path = 0x200080 \"0\\002 \"\n        finfo = {\n  pool = 0x18,\n  valid = 25,\n  protection = 40,\n  filetype = 4294967295,\n  user = 4294967295,\n  group = 4294967295,\n  inode = 4294967295,\n  device = 232508,\n  nlink = 263868,\n  size = 436166814044096,\n  csize = 25398056,\n  atime = 436384783398840,\n  mtime = 939553087027116,\n  ctime = 137439172227,\n  fname = 0x1806418 \"\\030D\\200\\001\\030d\\204\\001\",\n  name = 0xef <Address 0xef out of bounds>,\n  filehand = 0x1808450\n}\n        dirp = (struct apr_dir_t *) 0x0\n        dirent = {\n  pool = 0x18,\n  valid = 25,\n  protection = 40,\n  filetype = 4294967295,\n  user = 4294967295,\n  group = 4294967295,\n  inode = 4294967295,\n  device = 232508,\n  nlink = 263868,\n  size = 436166814044096,\n  csize = 25398056,\n  atime = 436384783398840,\n  mtime = 939553087027116,\n  ctime = 137439172227,\n  fname = 0x1806418 \"\\030D\\200\\001\\030d\\204\\001\",\n  name = 0xef <Address 0xef out of bounds>,\n  filehand = 0x1808450\n}\n        candidates = (apr_array_header_t *) 0x5\n        path = 0x200080 \"0\\002 \"\n        dirp = (struct apr_dir_t *) 0x0\n        dirent = {\n  pool = 0x18,\n  valid = 25,\n  protection = 40,\n  filetype = 4294967295,\n  user = 4294967295,\n  group = 4294967295,\n  inode = 4294967295,\n  device = 232508,\n  nlink = 263868,\n  size = 436166814044096,\n  csize = 25398056,\n  atime = 436384783398840,\n  mtime = 939553087027116,\n  ctime = 137439172227,\n  fname = 0x1806418 \"\\030D\\200\\001\\030d\\204\\001\",\n  name = 0xef <Address 0xef out of bounds>,\n  filehand = 0x1808450\n}\n        candidates = (apr_array_header_t *) 0x5\n        path = 0x200080 \"0\\002 \"\n        dirp = (struct apr_dir_t *) 0x0\n        dirent = {\n  pool = 0x18,\n  valid = 25,\n  protection = 40,\n  filetype = 4294967295,\n  user = 4294967295,\n  group = 4294967295,\n  inode = 4294967295,\n  device = 232508,\n  nlink = 263868,\n  size = 436166814044096,\n  csize = 25398056,\n  atime = 436384783398840,\n  mtime = 939553087027116,\n  ctime = 137439172227,\n  fname = 0x1806418 \"\\030D\\200\\001\\030d\\204\\001\",\n  name = 0xef <Address 0xef out of bounds>,\n  filehand = 0x1808450\n}\n        candidates = (apr_array_header_t *) 0x5\n        path = 0x200080 \"0\\002 \"\n#14 0x0001a1e3 in ap_read_config (process=0x18044a0, ptemp=0x1836418,\nfilename=0x35674 \"conf/httpd.conf\", conftree=0x3f0a8) at config.c:2004\n        confname = 0x5d <Address 0x5d out of bounds>\n        error = 0x5d <Address 0x5d out of bounds>\n        p = (struct apr_pool_t *) 0x1806418\n        s = (server_rec *) 0x180bda0\n        process = (process_rec *) 0x1838b28\n#15 0x0000326a in main (argc=3, argv=0xbffff940) at main.c:610\n        c = 0 '\\0'\n        configtestonly = 0\n        confname = 0x35674 \"conf/httpd.conf\"\n        def_server_root = 0x35684 \"/usr/local/apache2-crash\"\n        temp_error_log = 0x0\n        error = 0x5d <Address 0x5d out of bounds>\n        process = (process_rec *) 0x18044a0\n        server_conf = (server_rec *) 0x18044a0\n        pglobal = (struct apr_pool_t *) 0x1804418\n        pconf = (struct apr_pool_t *) 0x1806418\n        plog = (struct apr_pool_t *) 0x1834418\n        ptemp = (struct apr_pool_t *) 0x1836418\n        pcommands = (struct apr_pool_t *) 0x1808418\n        opt = (apr_getopt_t *) 0x18084b0\n        rv = 258216\n        optarg = 0x79645f5f <Address 0x79645f5f out of bounds>\n(gdb) info frame\nStack level 0, frame at 0xbfffe950:\n eip = 0x2da58 in compile_regex (pcre.c:2463); saved eip 0x2d6bf\n called by frame at 0xbfffeaf0\n source language c.\n Arglist at 0xbfffe948, args: options=0, oldims=0, brackets=0xbfffef94,\ncodeptr=0xbfffeac0, ptrptr=0xbfffeabc, errorptr=0xbfffefec, lookbehind=0,\nskipbytes=0, firstbyteptr=0xbfffeab4, reqbyteptr=0xbfffeaac, bcptr=0xbfffeaa4,\ncd=0xbfffef48\n Locals at 0xbfffe948, Previous frame's sp is 0xbfffe950\n Saved registers:\n  ebx at 0xbfffe93c, ebp at 0xbfffe948, esi at 0xbfffe940, edi at 0xbfffe944,\neip at 0xbfffe94c\n(gdb) info registers\neax            0x5d     93\necx            0xbfffe8c8       -1073747768\nedx            0x184946d        25465965\nebx            0x2d0e7  184551\nesp            0xbfffe7b0       0xbfffe7b0\nebp            0xbfffe948       0xbfffe948\nesi            0xbfffecf4       -1073746700\nedi            0x10     16\neip            0x2da58  0x2da58\neflags         0x10246  66118\ncs             0x17     23\nss             0x1f     31\nds             0x1f     31\nes             0x1f     31\nfs             0x0      0\ngs             0x37     55\n(gdb) p *cd\n$1 = {\n  lcc = 0x3f2a0 \"\",\n  fcc = 0x3f3a0 \"\",\n  cbits = 0x3f4a0 \"\",\n  ctypes = 0x3f5e0 \"\\200\",\n  start_code = 0x400a08 \"P\",\n  start_pattern = 0x1849460 \"^Apache=([^;,]+)|[;,][ \\t]*Apache=([^;,]+)\",\n  name_table = 0x400a08 \"P\",\n  names_found = 0,\n  name_entry_size = 3,\n  top_backref = 0,\n  backref_map = 0,\n  req_varyopt = 0,\n  nopartial = 0\n}\n\nHope this helps.", "id": 97463, "time": "2006-12-29T16:37:09Z", "bug_id": 41262, "creation_time": "2006-12-29T16:37:09Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "id": 97474, "time": "2006-12-30T01:27:57Z", "bug_id": 41262, "creation_time": "2006-12-30T01:27:57Z", "is_private": false, "text": "Thanks for the quick update, but to be honest at the moment I have no idea why\nthis happens."}, {"count": 4, "tags": [], "bug_id": 41262, "attachment_id": null, "text": "No problem.  I don't understand either.  However, it appears that the embedded\nversion of pcre in the httpd source is version 5.0, which is now over two years\nold.  I have apache successfully working with the latest upstream, version 7.0.\n Of course, this would need to be tested thouroughly to ensure that it does not\nintroduce any regressions.  I'd recommend updating the pcre included with httpd.", "id": 97485, "time": "2006-12-30T07:11:08Z", "creator": "roberto@connexer.com", "creation_time": "2006-12-30T07:11:08Z", "is_private": false}, {"count": 5, "tags": [], "creator": "nick@webthing.com", "attachment_id": null, "id": 97492, "time": "2006-12-30T18:58:40Z", "bug_id": 41262, "creation_time": "2006-12-30T18:58:40Z", "is_private": false, "text": "This is an instance of a frequently-recurring problem that comes with bundling\n*any* PCRE version.  The solution is to unbundle it."}, {"count": 6, "tags": [], "creator": "ianh@apache.org", "text": "is the 'solution' here to check at compile time on OS/X and refuse to build\nunless the person has specified a external pcre?\n\nThe bug is marked as needsinfo. what other information is required?", "id": 103068, "time": "2007-05-10T22:25:54Z", "bug_id": 41262, "creation_time": "2007-05-10T22:25:54Z", "is_private": false, "attachment_id": null}]