[{"count": 0, "tags": [], "creator": "arh14@cornell.edu", "text": "Original post to list:\n\nI have written a pre-processor that modifies headers on an HTTPSampler (I need \nto do this because the header is dynamically derived), but the call \ngetHeaderManager() on the HTTPSampler object always returns null.  Even if I \nhave actually created a HeaderManager in the test configuration.  Creating a \nnew HeaderManager object and programmatically calling setHeaderManager on the \nHTTPSampler object in my preprocessor doesn't do anything either.  Is there a \nway to dynamically modify outgoing request headers?\n\n----\n\n<code>\npublic void process() {\n   ...\n \n   Header header = new Header(\"Authorization\", authstring);\n   HeaderManager manager = sampler.getHeaderManager();\n   if (manager != null) {\n     manager.add(header);\n   } else {\n     log.error(\"No header manager configured for sampler: \" + sampler);\n     manager = new HeaderManager();\n     manager.add(header);\n     sampler.setHeaderManager(manager);\n     System.out.println(\"manager size: \" + manager.size());\n     for (int i = 0; i < manager.size(); i++) {\n       System.out.println(\"header: \" + manager.get(i));\n     }\n     System.out.println(\"manager: \" + sampler.getHeaderManager());\n   }\n</code>\n\n----\n\n I moved the manager.add(header) call up above \nsampler.setHeaderManager() to ensure that the manager being set in fact \nhas at least one header already in it.  The manager object subsequently \nretrieved is indeed the same object (object hashcode) that was set (I \nchecked just for sanity).  But the header is still not coming through.  \n\n----\n\nPosting this as a bug as I have not had time to look further into it myself, \nand it should be noted.", "id": 44997, "time": "2003-10-02T11:58:27Z", "bug_id": 23562, "creation_time": "2003-10-02T11:58:27Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 23562, "attachment_id": null, "id": 51021, "time": "2004-01-23T00:20:06Z", "creator": "jsalvata@atg.com", "creation_time": "2004-01-23T00:20:06Z", "is_private": false, "text": "Being able to send dynamic headers is a legitimate concern, but the fact that\nthis particular way of doing it doesn't work (or even if there were no reasonable\nway to do it) is not a bug.\n\nConverting to an enhancement request."}, {"id": 82537, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "count": 2, "text": "This now seems to work in the 2.1 branch code", "time": "2005-11-16T00:54:45Z", "bug_id": 23562, "creation_time": "2005-11-16T00:54:45Z", "is_private": false}]