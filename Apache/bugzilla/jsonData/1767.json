[{"count": 0, "attachment_id": null, "creator": "carnold@houston.rr.com", "text": "When the offset equals the length, insertData should append to the \nend of the character data.  The current implementation throws an\nexception and fails NIST DOM test CharacterDataInsertDataEnd.\nChanging a condition from >= to > lets the test pass.\n\nFrom the DOM 2 Core Spec\n\ninsertData \nInsert a string at the specified 16-bit unit offset. \nParameters \noffset of type unsigned long \nThe character offset at which to insert.\n\narg of type DOMString \nThe DOMString to insert.\n\nExceptions \nDOMException\n INDEX_SIZE_ERR: Raised if the specified offset is negative or greater than the \nnumber of 16-bit units in data.\n\nNO_MODIFICATION_ALLOWED_ERR: Raised if this node is readonly.\n \n\n\n\ncvs diff AbstractCharacterData.java (in directory D:\\apache-xml\\xml-\nbatik\\sources\\org\\apache\\batik\\dom\\)\nIndex: AbstractCharacterData.java\n===================================================================\nRCS file: /home/cvspublic/xml-\nbatik/sources/org/apache/batik/dom/AbstractCharacterData.java,v\nretrieving revision 1.1.1.1\ndiff -r1.1.1.1 AbstractCharacterData.java\n119c119\n< \tif (offset < 0 || offset >= getLength()) {\n---\n> \tif (offset < 0 || offset > getLength()) {\n125c125\n< \tsetNodeValue(v.substring(0, offset) + \n---\n> \tsetNodeValue(v.substring(0, offset) +", "id": 2460, "time": "2001-05-15T22:51:03Z", "bug_id": 1767, "creation_time": "2001-05-15T22:51:03Z", "tags": [], "is_private": false}]