[{"count": 0, "attachment_id": null, "creator": "wburrows@e2open.com", "is_private": false, "id": 65789, "time": "2004-10-27T00:56:43Z", "bug_id": 31908, "creation_time": "2004-10-27T00:56:43Z", "tags": [], "text": "As noted in defect 31907 the getUri(String) calls is inappropriate for places \nwhere the returned Uri object will be used to make store calls because the \ntoken in the uri is null and doesn't contain an indicator as to whether the \nstore calls should be enlisted for the current transaction. There are some \nplaces in  hasPermission() in the SecurityImpl class where getUri(String) is \nused to make store calls. hasPermission() makes calls to the store using three \ndifferent Uris it constructs using just getUri(String). So for those using the \naccess control and a jdbc store these calls may result in a deadlock just as \nhappened for defect 31907. hasPermission() needs to be revised to determine \nwhether the slide token for the current transaction needs to be passed to the \ngetUri() calls so that a valid Uri is returned that can make store calls within \nanother transaction."}, {"count": 1, "tags": [], "bug_id": 31908, "attachment_id": null, "is_private": false, "id": 65806, "time": "2004-10-27T08:31:50Z", "creator": "ozeigermann@apache.org", "creation_time": "2004-10-27T08:31:50Z", "text": "Patch applied"}, {"count": 2, "tags": [], "text": "Sorry, misunderstood that and thought it was fixed with the same patch as 31907.\nReopening it...", "attachment_id": null, "id": 65839, "creator": "ozeigermann@apache.org", "time": "2004-10-27T15:53:03Z", "bug_id": 31908, "creation_time": "2004-10-27T15:53:03Z", "is_private": false}]