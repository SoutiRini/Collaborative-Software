[{"count": 0, "tags": [], "creator": "chrisd@apache.org", "attachment_id": null, "text": "There's no need to create a sub-pool in dbd_oracle_open() for the\napr_dbd_t.pool structure element.  The only use of that element is as the\nparent pool passed to apr_pool_create() in dbd_oracle_query().  Since\ndbd_oracle_query() is thread-safe because it uses only its own private\nsub-pool, we don't need another extra layer of sub-pool creation and\ndeletion.\n\nMore importantly, consider the case where apr_dbd_close() is called in a\ncleanup function registered on the pool passed to apr_dbd_open().\nWhen apr_pool_destroy() is called on that pool, it will first destroy all\nsub-pools of that pool -- including sub-pools created in driver open\nfunctions, such as dbd_oracle_open() -- and then call the cleanup function.\nWhen the cleanup function runs apr_dbd_open(), dbd_oracle_close() will\nattempt to destroy the sub-pool that has already been destroyed.  So,\nwe should act like other APR DBD drivers and not create any sub-pools in\ndbd_oracle_open().", "id": 97393, "time": "2006-12-27T21:05:51Z", "bug_id": 41250, "creation_time": "2006-12-27T21:05:51Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 41250, "text": "Created attachment 19313\nremoves apr_pool_create() and apr_pool_destroy() in open and close", "id": 97394, "time": "2006-12-27T21:06:49Z", "creator": "chrisd@apache.org", "creation_time": "2006-12-27T21:06:49Z", "is_private": false, "attachment_id": 19313}, {"count": 2, "tags": [], "bug_id": 41250, "text": "Fixed in r537001. Thanks for the patch Chris!", "id": 103058, "time": "2007-05-10T14:36:05Z", "creator": "bojan@rexursive.com", "creation_time": "2007-05-10T14:36:05Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 41250, "text": "Thanks Bojan -- much appreciated, and makes it play nicely with\nmod_dbd again -- see:\n\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=39985#c21\nhttp://svn.apache.org/viewvc?view=rev&revision=496831", "id": 103064, "time": "2007-05-10T20:55:34Z", "creator": "chrisd@apache.org", "creation_time": "2007-05-10T20:55:34Z", "is_private": false, "attachment_id": null}]