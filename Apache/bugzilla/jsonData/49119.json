[{"count": 0, "tags": [], "bug_id": 49119, "attachment_id": null, "text": "Here is the detail of the issue with ANT.  When running the static data portion of the migration (via the attached ANT script) we are prompted to enter the date the system should be set to:\n\n\u2018<!-- Standalone jobs (Reserve extra archive day, Set retention days?)-->\n        <echo message=\"Running standalone job Reserve Extra Archive Day ...\"/>\n        <tstamp>\n            <format property=\"TODAY\" pattern=\"yyyy-MM-dd\" locale=\"en,US\"/>\n        </tstamp>\n\n        <input message=\"Please provide business date in yyyy-mm-dd format\" addproperty=\"inputdate\"\n               defaultvalue=\"${TODAY}\"/>\n\n        <java classname=\"com.dovetailsys.jobprocessing.StandAloneJobInvoker\" fork=\"yes\" failonerror=\"true\" inputstring=\"\">\n            <classpath path=\"${local.run.classpath}\"/>\n            <arg value=\"Reserve Extra Archive Day\"/>\n            <arg value=\"JPMC\"/>\n            <arg value=\"Utility\"/>\n            <arg value=\"-jobInvokerStandalone\"/>\n            <arg value=\"${inputdate}\"/>\n        </java>\u2019\n\nYou key in the date and hit enter, at this point the processing halts until the enter key is pressed a second time.  If you don\u2019t enter the date again before pressing enter a second time you get the default value applied (TODAY in the extract above).", "id": 136128, "time": "2010-04-14T06:04:38Z", "creator": "steve.welch@jpmorgan.com", "creation_time": "2010-04-14T06:04:38Z", "is_private": false}, {"count": 1, "tags": [], "creator": "steve.welch@jpmorgan.com", "text": "Input from the vendor supplying the ANT scripts:\n\nI can\u2019t put my finger on the documentation about this defect. I recall at the time we first discovered this, it was caused by a following <java> task stealing the input stream before the <input> task completed and one thing that greatly reduced the occurrences of this happening was the addition of the inputstring=\u201d\u201d  attribute on the <java> task. That doesn\u2019t seem to have helped in this case so the peculiarity remains and for now the best we can do is just be aware of it.", "id": 136187, "time": "2010-04-15T11:38:17Z", "bug_id": 49119, "creation_time": "2010-04-15T11:38:17Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "bodewig@apache.org", "is_private": false, "id": 136209, "time": "2010-04-16T16:24:05Z", "bug_id": 49119, "creation_time": "2010-04-16T16:24:05Z", "tags": [], "text": "first of all, 1.7.0 has been released more than three years ago and any bugs\ncould have been fixed by one of the two subsequent releases.\n\nGiven that you have to press enter twice makes it more likely that there is an\n<exec> or <java> task before your <input> task that was stealing the first enter.\nIs there any such task and does it help if you provide inputstring=\"\" to it?"}, {"count": 3, "tags": [], "creator": "nicolas.lalevee@hibnet.org", "text": "I did faced this issue on an Ubuntu, and with Ant 1.8.0 if I remember correctly. There was probably some call to java around. I will get back with a proper test case.", "id": 136750, "time": "2010-05-10T07:58:41Z", "bug_id": 49119, "creation_time": "2010-05-10T07:58:41Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 49119, "attachment_id": null, "id": 137955, "time": "2010-06-28T16:24:52Z", "creator": "nicolas.lalevee@hibnet.org", "creation_time": "2010-06-28T16:24:52Z", "is_private": false, "text": "I have not a proper test case but I can reproduce the bug on ubuntu with Ant 1.8.0 and on Mac OSX 10.6 with Ant 1.8.2-trunk.\n\nSo I do have some <java> before the <input>. And inputstring=\"\" or removing the fork makes the bug disappear.\n\nFor the little I looked into, I did found some issues but not related to this one. I have found some not flushed error output stream, see my commit r958704."}, {"count": 5, "tags": [], "bug_id": 49119, "text": "Actually a simple build.xml help reproduce it:\n\n<project default=\"test\">\n    <target name=\"test\">\n        <java classname=\"org.apache.tools.ant.Main\" fork=\"true\">\n            <classpath>\n                <fileset dir=\"${ant.home}\">\n                    <include name=\"lib/*.jar\" />\n                </fileset>\n            </classpath>\n            <arg line=\"-version\" />\n        </java>\n        <input message=\"hum ?\" addproperty=\"hum\" />\n        <echo>${hum}</echo>\n    </target>\n</project>\n\nAs an input is required here, I don't know how to unit test it.\n\nSee r985632 for the fix.", "id": 139094, "time": "2010-08-15T05:13:43Z", "creator": "nicolas.lalevee@hibnet.org", "creation_time": "2010-08-15T05:13:43Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "nicolas.lalevee@hibnet.org", "text": "Actually my fix is making the unit test on <java> to hang, reverting r985632.", "id": 139095, "time": "2010-08-15T05:34:55Z", "bug_id": 49119, "creation_time": "2010-08-15T05:34:55Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 49119, "attachment_id": null, "id": 139138, "creation_time": "2010-08-17T08:27:44Z", "time": "2010-08-17T08:27:44Z", "creator": "bodewig@apache.org", "text": "*** Bug 49587 has been marked as a duplicate of this bug. ***", "is_private": false}, {"count": 8, "tags": [], "creator": "nicolas.lalevee@hibnet.org", "text": "finally I got it fixed in r986668", "id": 139201, "time": "2010-08-18T09:41:13Z", "bug_id": 49119, "creation_time": "2010-08-18T09:41:13Z", "is_private": false, "attachment_id": null}]