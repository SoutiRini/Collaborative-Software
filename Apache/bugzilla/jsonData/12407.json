[{"count": 0, "tags": [], "bug_id": 12407, "attachment_id": null, "id": 22474, "time": "2002-09-09T02:37:42Z", "creator": "careye@spamcop.net", "creation_time": "2002-09-09T02:37:42Z", "is_private": false, "text": "I'm using the ReplaceRegExp task to remove extra newlines from our JSPs before\nthey get deployed, like this:\n\n    <replaceregexp\n        match='([\"\\s])((--)?%>)(([\\r\\n]*)(&lt;/jsp:useBean&gt;))?([\\r\\n]+)'\n        replace=\"\\1\\5\\7\\2\\6\" flags=\"g\">\n      <fileset dir=\"${web.destdir}\" includes=\"*.jsp\"/>\n    </replaceregexp>\n\nHowever, I get an extra \\r\\n at the end of the result, when I don't want the\nfile to end with any newline at all.\n\nThe problem seems to be at line 357 of\nsrc/main/org/apache/tools/ant/taskdefs/optional/ReplaceRegExp.java:\n\n                pw.println(res);\n\nwhere, for consistency with the br.read(...) above, it should be:\n\n                pw.write(res);"}, {"count": 1, "tags": [], "bug_id": 12407, "text": "Created attachment 3035\nTrivial patch to change pw.println(res) to pw.write(res)", "id": 22775, "time": "2002-09-13T00:13:37Z", "creator": "careye@spamcop.net", "creation_time": "2002-09-13T00:13:37Z", "is_private": false, "attachment_id": 3035}, {"count": 2, "tags": [], "bug_id": 12407, "text": "This is only half of the story as your patch fixes the byline=false case only.\nThis part will be fixed in nightly build 2002-09-17, the missing part will be\ndone later this week.", "id": 22923, "time": "2002-09-16T16:22:07Z", "creator": "bodewig@apache.org", "creation_time": "2002-09-16T16:22:07Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 12407, "attachment_id": null, "id": 22973, "time": "2002-09-17T05:19:28Z", "creator": "careye@spamcop.net", "creation_time": "2002-09-17T05:19:28Z", "is_private": false, "text": "Thanks.\n\nFor the byline=true case, I had assumed that since BufferedReader.readLine()\nremoves any line termination characters, that the println method would be needed\nto put them back on, accepting that the end of line characters would be changed from\nwhatever was in the file to line.separator.  On the other hand, I don't use\nbyline=true myself, so I haven't looked at it much at all."}, {"count": 4, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "text": "byline=\"true\" is now FIXED in CVS as well, will be merged into the 1.5 maintenance\nbranch shortly.", "id": 23239, "time": "2002-09-23T10:38:58Z", "bug_id": 12407, "creation_time": "2002-09-23T10:38:58Z", "is_private": false}]