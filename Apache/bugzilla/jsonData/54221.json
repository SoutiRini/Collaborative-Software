[{"count": 0, "tags": [], "creator": "mark.tischler@alcatel-lucent.com", "text": "Created attachment 29647\nerror log snippet from before the upgrade\n\nWas running Apache 2.2.15 up until mid-October.  Then upgraded to Apache 2.4.3.  There are statements that are coming out in the error log rather routinely, so they were coming out before the upgrade, and they are coming out since the upgrade.  These are generated by some web application running a shell script on our web server.  The problem is that these lines lack full information in the new Apache version, which makes debugging hard.  I have been searching the internet on and off for the past several weeks trying to figure out what might be wrong, but have had no success.  So, unfortunately, I'm having to resort to this method of solving my problem.  I have attached a file snippet from our error log *prior* to the upgrade, a file snippet from our error log *after* to the upgrade, as well as our httpd.conf.  In the case of the two file snippets, you will see that the information associated with the middle 4 lines is severely lacking in the one from *after* our upgrade.  Can you identify if there's a problem in our configuration, or if there is something wrong with Apache?", "id": 163708, "time": "2012-11-28T22:40:42Z", "bug_id": 54221, "creation_time": "2012-11-28T22:40:42Z", "is_private": false, "attachment_id": 29647}, {"count": 1, "tags": [], "bug_id": 54221, "is_private": false, "id": 163709, "attachment_id": 29648, "creator": "mark.tischler@alcatel-lucent.com", "creation_time": "2012-11-28T22:41:29Z", "time": "2012-11-28T22:41:29Z", "text": "Created attachment 29648\nerror log snippet from after the upgrade"}, {"count": 2, "tags": [], "creator": "mark.tischler@alcatel-lucent.com", "is_private": false, "text": "Created attachment 29649\nconfig file", "id": 163710, "time": "2012-11-28T22:41:50Z", "bug_id": 54221, "creation_time": "2012-11-28T22:41:50Z", "attachment_id": 29649}, {"count": 3, "attachment_id": null, "bug_id": 54221, "is_private": false, "id": 163711, "time": "2012-11-28T22:48:01Z", "creator": "mark.tischler@alcatel-lucent.com", "creation_time": "2012-11-28T22:48:01Z", "tags": [], "text": "Note that I'm just giving one example of this.  There are many more lines that come out in the error log without any additional information.  I haven't been able to establish a pattern of what gets printed with additional information and what does not."}, {"count": 4, "tags": [], "bug_id": 54221, "is_private": false, "id": 163713, "attachment_id": null, "creator": "covener@gmail.com", "creation_time": "2012-11-29T00:14:04Z", "time": "2012-11-29T00:14:04Z", "text": "LoadModule info_module modules/mod_info.so\n\t# mdt - 2012-09-14 - comment out because this module is not built by default as of Apache 2.4.2\n#LoadModule cgi_module modules/mod_cgi.so\n\t# mdt - 2012-09-14 - add this module to take the place of mod_cgi as of Apache 2.4.2\nLoadModule cgid_module modules/mod_cgid.so\n\nDid your logging difference happen during the change from mod_cgi to mod_cgid?\n\nDid you change your MPM as well?"}, {"count": 5, "tags": [], "text": "I made the change from mod_cgi to mod_cgid simultaneous with the move from 2.2.15 to 2.4.3, so I don't know what caused it.  As I noted in the httpd.conf, I had to make that change to get things to work.  Should I have done something different?\n\nI do not know what MPM is, so I guess I don't know if changed it.  I will attach my old httpd.conf -- the one from 2.2.15.  Perhaps that answers this question.", "is_private": false, "id": 163734, "creator": "mark.tischler@alcatel-lucent.com", "time": "2012-11-29T15:06:02Z", "bug_id": 54221, "creation_time": "2012-11-29T15:06:02Z", "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 54221, "is_private": false, "id": 163735, "attachment_id": 29657, "creator": "mark.tischler@alcatel-lucent.com", "creation_time": "2012-11-29T15:13:47Z", "time": "2012-11-29T15:13:47Z", "text": "Created attachment 29657\nold config file"}, {"count": 7, "tags": [], "creator": "mark.tischler@alcatel-lucent.com", "text": "Eric,\n\nYou were so good about responding quickly the first time.  Any thoughts on what the problem might be?", "id": 164447, "time": "2013-01-07T21:45:44Z", "bug_id": 54221, "creation_time": "2013-01-07T21:45:44Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "creator": "covener@gmail.com", "text": "The prefix is a difference between mod_cgi and mod_cgid.", "id": 164449, "time": "2013-01-07T22:23:27Z", "bug_id": 54221, "creation_time": "2013-01-07T22:23:27Z", "is_private": false, "attachment_id": null}, {"id": 164451, "tags": [], "creator": "mark.tischler@alcatel-lucent.com", "is_private": false, "count": 9, "text": "So, are you saying that I need to load mod_cgi instead of mod_cgid?  If so, as I recall (it's been several months, though), when I tried loading mod_cgi, it told me that this module was obsolete (you actually captured this implication in your Nov. 29th response).  So, how do you suggest I get mod_cgi to work?  At the time, my only recourse seemed to be to *not* load mod_cgi, but to instead load mod_cgid.", "time": "2013-01-07T22:28:38Z", "bug_id": 54221, "creation_time": "2013-01-07T22:28:38Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "covener@gmail.com", "text": "I'm only saying it's the explanation of the different behavior when you changed from one CGI module to the other, which had been misinterpreted as something that changed just due to the update.", "id": 164454, "time": "2013-01-07T22:32:16Z", "bug_id": 54221, "creation_time": "2013-01-07T22:32:16Z", "is_private": false, "attachment_id": null}, {"count": 11, "attachment_id": null, "bug_id": 54221, "text": "So, are you confirming that I can no longer use the mod_cgi module with Apache 2.4.3?  And, if so, are you saying that there is no way to get the prefixes back?", "id": 164456, "time": "2013-01-07T22:34:15Z", "creator": "mark.tischler@alcatel-lucent.com", "creation_time": "2013-01-07T22:34:15Z", "tags": [], "is_private": false}, {"count": 12, "tags": [], "creator": "covener@gmail.com", "text": "There's no new restrictions on mod_cgi in 2.4.  Just like in 2.2, you can only use it with the prefork MPM, not worker or event.", "id": 164458, "time": "2013-01-07T22:47:42Z", "bug_id": 54221, "creation_time": "2013-01-07T22:47:42Z", "is_private": false, "attachment_id": null}, {"text": "Then I'm confused.  What would I have inadvertently changed so that I'm not using prefork MPM in Apache 2.4 vs. (apparently I was) in Apache 2.2?  Is there something in the httpd.conf files for 2.2 and 2.4 that leads to that answer?", "tags": [], "creator": "mark.tischler@alcatel-lucent.com", "is_private": false, "count": 13, "id": 164459, "time": "2013-01-07T22:50:19Z", "bug_id": 54221, "creation_time": "2013-01-07T22:50:19Z", "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 54221, "attachment_id": null, "text": "(In reply to comment #13)\n> Then I'm confused.  What would I have inadvertently changed so that I'm not\n> using prefork MPM in Apache 2.4 vs. (apparently I was) in Apache 2.2?  Is\n> there something in the httpd.conf files for 2.2 and 2.4 that leads to that\n> answer?\n\nIt's a build time decision in 2.2.  In 2.4, you can build multiple MPM's and choose whichever you like at runtime by LoadModule on exactly one.", "id": 164462, "time": "2013-01-07T23:16:01Z", "creator": "covener@gmail.com", "creation_time": "2013-01-07T23:16:01Z", "is_private": false}, {"count": 15, "attachment_id": null, "bug_id": 54221, "text": "OK.  So, I'm looking for some advice on how to configure the httpd.conf for 2.4.3, so that I get the correct module(s).  As I said, when I tried to load mog_cgi, it complained.  It sounds (from what you're saying) that I simply need to adjust the httpd.conf to load some new or different modules.", "id": 164463, "time": "2013-01-07T23:20:52Z", "creator": "mark.tischler@alcatel-lucent.com", "creation_time": "2013-01-07T23:20:52Z", "tags": [], "is_private": false}, {"count": 16, "tags": [], "bug_id": 54221, "attachment_id": null, "text": "http://httpd.apache.org/userslist.html", "id": 164464, "time": "2013-01-07T23:34:40Z", "creator": "covener@gmail.com", "creation_time": "2013-01-07T23:34:40Z", "is_private": false}, {"count": 17, "tags": [], "creator": "mark.tischler@alcatel-lucent.com", "text": "OK.  So, I rebuilt the web server, this time with the '--enable-cgi' flag in the config for both building Apache as well as PHP.  I loaded the mod_cgi module instead of the mod_cgid module, ran the following script, and still got the problem:\n\n<?php\nprint \"Content-type: text/html\\n\\nhi\\n\";\n$STDERR = fopen('php://stderr', 'w+');\nfwrite($STDERR, \"Error: cannot execute query\\n\");\n?>\n\nRunning this as a URL, yields simply:\n\nError: cannot execute query\n\ninstead of something like:\n\n[Tue Jan 29 12:51:44.330891 2013] [:note] [pid 19732:tid 5] [client 135.185.197.151:3798] Error: cannot execute query\n\nYou had said that it was because I was now using mod_cgid, instead of mod_cgi.  Given that I am now using mod_cgi and I still have this problem, what's the next step?", "id": 164936, "time": "2013-01-29T19:01:26Z", "bug_id": 54221, "creation_time": "2013-01-29T19:01:26Z", "is_private": false, "attachment_id": null}, {"text": "Eric, I need advice from you.  This is not something I can go to the forums with, because I need insider knowledge of what's causing this issue.  You had one theory, but, either there's something additional at play, or there is something completely different causing this.  Please respond with your insight.", "tags": [], "creator": "mark.tischler@alcatel-lucent.com", "is_private": false, "count": 18, "id": 165179, "time": "2013-02-11T20:14:01Z", "bug_id": 54221, "creation_time": "2013-02-11T20:14:01Z", "attachment_id": null}, {"count": 19, "tags": [], "creator": "covener@gmail.com", "text": "I have no idea, you'll have to wait for a volunteer to look further.  Are you sure your PHP runs as CGI?", "id": 165180, "time": "2013-02-11T20:30:04Z", "bug_id": 54221, "creation_time": "2013-02-11T20:30:04Z", "is_private": false, "attachment_id": null}, {"count": 20, "tags": [], "bug_id": 54221, "is_private": false, "id": 165181, "attachment_id": null, "creator": "mark.tischler@alcatel-lucent.com", "creation_time": "2013-02-11T20:53:31Z", "time": "2013-02-11T20:53:31Z", "text": "The .php script I included above is run as a web page under that newly-built web server, so it should be running as a built-in, not CGI, because I build PHP with Apache.  At least, that's the way I was understanding it.  Besides the .conf file, which I attached to the ticket, I could include the instructions I used to build the product, if you think that would help.\n\nWhen you say that I would have to wait for another volunteer to see and grab this ticket, it's been 2 weeks since I posted that even using mod_cgi didn't help.  So, what time period would I expect to have to wait until someone else jumps in?  How does someone know that you are \"detaching\" from this ticket?  Perhaps every other volunteer figures that you are still handling it, and, thus, they do not need to jump in."}, {"count": 21, "attachment_id": null, "bug_id": 54221, "text": "> When you say that I would have to wait for another volunteer to see and grab\n> this ticket, it's been 2 weeks since I posted that even using mod_cgi didn't\n> help.  So, what time period would I expect to have to wait until someone\n> else jumps in?  How does someone know that you are \"detaching\" from this\n> ticket?  Perhaps every other volunteer figures that you are still handling\n> it, and, thus, they do not need to jump in.\n\nBugzilla isn't for support, It's for reporting bugs. \n\nIt's still unclear what component writes to your error log differently after your upgrade and reconfguration, but no matter what it is originators are expected to do their homework in the report.\n\nAnyone who takes interest is always free to comment.    Again, I think you might get some guidance on the users list which has more eyes.", "id": 165182, "time": "2013-02-11T21:11:13Z", "creator": "covener@gmail.com", "creation_time": "2013-02-11T21:11:13Z", "tags": [], "is_private": false}, {"count": 22, "attachment_id": null, "bug_id": 54221, "text": "The problem is that this appears to me to be a bug.  I think I have followed the instructions to build a web server properly, but, as yet, there's been no explanation as to why it doesn't work the way it used to work.  Once there's a plausible explanation (and I thought it was that I was supposed to use mod_cgi instead of mod_cgid) as to why it's not working, then, to me, it would make sense to go to the user list.", "id": 165184, "time": "2013-02-11T21:33:00Z", "creator": "mark.tischler@alcatel-lucent.com", "creation_time": "2013-02-11T21:33:00Z", "tags": [], "is_private": false}, {"count": 23, "attachment_id": null, "bug_id": 54221, "text": "No one has responded to this ticket in a very long time.  If, indeed, Eric, you were waiting for someone else to jump in and take it (as you indicated on February 11), it appears that nothing is triggering anyone else to look at this.  Is there a way to trigger someone else to look at this in a timely fashion?", "id": 165550, "time": "2013-02-28T16:26:32Z", "creator": "mark.tischler@alcatel-lucent.com", "creation_time": "2013-02-28T16:26:32Z", "tags": [], "is_private": false}, {"count": 24, "attachment_id": null, "bug_id": 54221, "is_private": false, "id": 165576, "time": "2013-03-01T21:38:28Z", "creator": "covener@gmail.com", "creation_time": "2013-03-01T21:38:28Z", "tags": [], "text": "(In reply to comment #23)\n> No one has responded to this ticket in a very long time.  If, indeed, Eric,\n> you were waiting for someone else to jump in and take it (as you indicated\n> on February 11), it appears that nothing is triggering anyone else to look\n> at this.  Is there a way to trigger someone else to look at this in a timely\n> fashion?\n\nI'm not waiting for anything. We're all volunteers motivated by different things without any implied level of service.   As an originator, the best you can do is provide your own detail and analysis to not reduce the overhead of whoever looks at the bug report.\n\nOn 2.4, I can switch between mod_cgid and mod_cgi and run a CGI that does:\n\necho \"XXX CGI TEST\" >&2\n\nAnd with mod_cgi, it shows up with the erorrlog prefix, and with mod_cgid it shows up without it.\n\nI confirmed on 2.2, mod_cgid behaves the same as it does in 2.4. I didn't bother testing mod_cgi in 2.2.\n\nI didn't go back to 2.2.15, just 2.2.latest.  You'll need a more concrete reproducible report to minimize the effort of anyone trying to find the bug here."}, {"count": 25, "tags": [], "creator": "mark.tischler@alcatel-lucent.com", "text": "I'm not sure what else someone would need.  I provided the httpd.conf files from 2.2.15 and 2.4.3, and I provided an actual example on my posting of 2013-01-29 19:01:26 UTC.", "id": 165712, "time": "2013-03-07T22:21:12Z", "bug_id": 54221, "creation_time": "2013-03-07T22:21:12Z", "is_private": false, "attachment_id": null}]