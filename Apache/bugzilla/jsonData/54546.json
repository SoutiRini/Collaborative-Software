[{"count": 0, "tags": [], "creator": "ikonta@yandex.ru", "is_private": false, "text": "/var/log/apache/error_log on debug loglevel (normal start):\n[Mon Feb 11 13:08:31 2013] [notice] caught SIGTERM, shutting down\n[Mon Feb 11 13:08:31 2013] [info] Init: Seeding PRNG with 144 bytes of entropy\n[Mon Feb 11 13:08:31 2013] [info] Init: Generating temporary RSA private keys (512/1024 bits)\n[Mon Feb 11 13:08:31 2013] [info] Init: Generating temporary DH parameters (512/1024 bits)\n[Mon Feb 11 13:08:31 2013] [info] Init: Initializing (virtual) servers for SSL\n[Mon Feb 11 13:08:31 2013] [info] mod_ssl/2.2.23 compiled against Server: Apache/2.2.23, Library: OpenSSL/1.0.1c\n[Mon Feb 11 13:08:31 2013] [info] mod_unique_id: using ip addr 192.168.1.1\n[Mon Feb 11 13:08:32 2013] [info] Init: Seeding PRNG with 144 bytes of entropy\n[Mon Feb 11 13:08:32 2013] [info] Init: Generating temporary RSA private keys (512/1024 bits)\n[Mon Feb 11 13:08:32 2013] [info] Init: Generating temporary DH parameters (512/1024 bits)\n[Mon Feb 11 13:08:32 2013] [debug] ssl_scache_shmcb.c(253): shmcb_init allocated 512000 bytes of shared memory\n[Mon Feb 11 13:08:32 2013] [debug] ssl_scache_shmcb.c(272): for 511920 bytes (512000 including header), recommending 32 subcaches, 133 indexes each\n[Mon Feb 11 13:08:32 2013] [debug] ssl_scache_shmcb.c(306): shmcb_init_memory choices follow\n[Mon Feb 11 13:08:32 2013] [debug] ssl_scache_shmcb.c(308): subcache_num = 32\n[Mon Feb 11 13:08:32 2013] [debug] ssl_scache_shmcb.c(310): subcache_size = 15992\n[Mon Feb 11 13:08:32 2013] [debug] ssl_scache_shmcb.c(312): subcache_data_offset = 3208\n[Mon Feb 11 13:08:32 2013] [debug] ssl_scache_shmcb.c(314): subcache_data_size = 12784\n[Mon Feb 11 13:08:32 2013] [debug] ssl_scache_shmcb.c(316): index_num = 133\n[Mon Feb 11 13:08:32 2013] [info] Shared memory session cache initialised\n[Mon Feb 11 13:08:32 2013] [info] Init: Initializing (virtual) servers for SSL\n[Mon Feb 11 13:08:32 2013] [info] mod_ssl/2.2.23 compiled against Server: Apache/2.2.23, Library: OpenSSL/1.0.1c\n[Mon Feb 11 13:08:32 2013] [info] mod_unique_id: using ip addr 192.168.1.1\n[Mon Feb 11 13:08:33 2013] [notice] Apache/2.2.23 (Unix) mod_ssl/2.2.23 OpenSSL/1.0.1c PHP/5.4.8--pl0-gentoo configured -- resuming normal operations\n[Mon Feb 11 13:08:33 2013] [info] Server built: Feb  8 2013 10:05:00\n[Mon Feb 11 13:08:33 2013] [debug] prefork.c(1023): AcceptMutex: sysvsem (default: sysvsem)\n\n# vim /etc/apache2/vhosts.d/00_default_vhost.conf\n(now change Listen directory value from\nListen 80\nto\nListen 192.168.1.1:80)\n\n# cat /var/run/apache2.pid \n19605\n# kill -HUP 19605\n# /etc/init.d/apache2 status\n * status: crashed\n\nEvent in log:\n[Mon Feb 11 13:10:31 2013] [notice] SIGHUP received.  Attempting to restart\n(98)Address already in use: make_sock: could not bind to address 192.168.1.1:80\nno listening sockets available, shutting down\nUnable to open logs\n\n# /etc/init.d/apache2 restart\n * Stopping apache2 ...\nhttpd (pid 19605?) not running                                                                                                   [ ok ]\n * Starting apache2 ...                                                                                                          [ ok ]\n\n\n/var/log/apache/error_log on debug loglevel (start after crash):\n[Mon Feb 11 13:11:44 2013] [info] Init: Seeding PRNG with 144 bytes of entropy\n[Mon Feb 11 13:11:44 2013] [info] Init: Generating temporary RSA private keys (512/1024 bits)\n[Mon Feb 11 13:11:45 2013] [info] Init: Generating temporary DH parameters (512/1024 bits)\n[Mon Feb 11 13:11:45 2013] [info] Init: Initializing (virtual) servers for SSL\n[Mon Feb 11 13:11:45 2013] [info] mod_ssl/2.2.23 compiled against Server: Apache/2.2.23, Library: OpenSSL/1.0.1c\n[Mon Feb 11 13:11:45 2013] [info] mod_unique_id: using ip addr 192.168.1.1\n[Mon Feb 11 13:11:46 2013] [info] Init: Seeding PRNG with 144 bytes of entropy\n[Mon Feb 11 13:11:46 2013] [info] Init: Generating temporary RSA private keys (512/1024 bits)\n[Mon Feb 11 13:11:46 2013] [info] Init: Generating temporary DH parameters (512/1024 bits)\n[Mon Feb 11 13:11:46 2013] [debug] ssl_scache_shmcb.c(253): shmcb_init allocated 512000 bytes of shared memory\n[Mon Feb 11 13:11:46 2013] [debug] ssl_scache_shmcb.c(272): for 511920 bytes (512000 including header), recommending 32 subcaches, 133 indexes each\n[Mon Feb 11 13:11:46 2013] [debug] ssl_scache_shmcb.c(306): shmcb_init_memory choices follow\n[Mon Feb 11 13:11:46 2013] [debug] ssl_scache_shmcb.c(308): subcache_num = 32\n[Mon Feb 11 13:11:46 2013] [debug] ssl_scache_shmcb.c(310): subcache_size = 15992\n[Mon Feb 11 13:11:46 2013] [debug] ssl_scache_shmcb.c(312): subcache_data_offset = 3208\n[Mon Feb 11 13:11:46 2013] [debug] ssl_scache_shmcb.c(314): subcache_data_size = 12784\n[Mon Feb 11 13:11:46 2013] [debug] ssl_scache_shmcb.c(316): index_num = 133\n[Mon Feb 11 13:11:46 2013] [info] Shared memory session cache initialised\n[Mon Feb 11 13:11:46 2013] [info] Init: Initializing (virtual) servers for SSL\n[Mon Feb 11 13:11:46 2013] [info] mod_ssl/2.2.23 compiled against Server: Apache/2.2.23, Library: OpenSSL/1.0.1c\n[Mon Feb 11 13:11:46 2013] [info] mod_unique_id: using ip addr 192.168.1.1\n[Mon Feb 11 13:11:47 2013] [warn] pid file /var/run/apache2.pid overwritten -- Unclean shutdown of previous Apache run?\n[Mon Feb 11 13:11:47 2013] [notice] Apache/2.2.23 (Unix) mod_ssl/2.2.23 OpenSSL/1.0.1c PHP/5.4.8--pl0-gentoo configured -- resuming normal operations\n[Mon Feb 11 13:11:47 2013] [info] Server built: Feb  8 2013 10:05:00\n[Mon Feb 11 13:11:47 2013] [debug] prefork.c(1023): AcceptMutex: sysvsem (default: sysvsem)\n\nReceived later (Listen directory in config is unchanged) HUP signals are hanled correctly, as expected.\n\nChecked on www-servers/apache-2.2.23 on Gentoo GNU/Linux, but issue also seems to be reproducable on FreeBSD (at least 7.x branch).", "id": 165170, "time": "2013-02-11T09:42:19Z", "bug_id": 54546, "creation_time": "2013-02-11T09:42:19Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "I've forgot, to tell, that restart using init script (i.e. /etc/init.d/apache2 restart) works fine both on first and latest restarts of daemon.", "is_private": false, "id": 165171, "creator": "ikonta@yandex.ru", "time": "2013-02-11T09:56:08Z", "bug_id": 54546, "creation_time": "2013-02-11T09:56:08Z", "attachment_id": null}]