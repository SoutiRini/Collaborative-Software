[{"count": 0, "tags": [], "text": "Hello everybody,\n\nI have a hard issue with the execution of a web application. I have compiled and\nbuilt an Apache server with the following config:\nApache/2.0.59 (Unix) mod_ssl/2.0.59 OpenSSL/0.9.8f DAV/2 PHP/5.2.3\nmod_apreq2-20051231/2.6.0 mod_perl/2.0.3 Perl/v5.8.4\n\nI have a mixture of php and cgi scripts in my web application, using mod_perl. I\ncan init without problems the Apache server, but when I try to request a cgi\npage , the browser doesn't show anything but the Apache's \"error_log\" print out\na line like this:\n\"child pid xxxxx exit signal Segmentation fault (11), possible coredump in\n/export/home/cores\" (however, when I try to request a php page, it loads without\nerrors nor segfaults).\n\nWhile debugging with gdb that corefile and doing a backtrace, I get:\n\n#0  0xd21d727c in finddatum () from /usr/lib/libc.so.1\n#1  0xd21d634b in dbm_store () from /usr/lib/libc.so.1\n#2  0xd0f41b27 in XS_NDBM_File_STORE ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/auto/NDBM_File/NDBM_File.so\n#3  0xd1e5943a in Perl_pp_entersub ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#4  0xd1e8431c in Perl_runops_standard ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#5  0xd1e2e34b in S_call_body ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#6  0xd1e2e281 in Perl_call_sv ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#7  0xd1e2dcf0 in Perl_call_method ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#8  0xd1e16d92 in S_magic_methcall ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#9  0xd1e17098 in Perl_magic_setpack ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#10 0xd1e14ca4 in Perl_mg_set ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#11 0xd1e526ae in Perl_pp_sassign ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#12 0xd1e8431c in Perl_runops_standard ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#13 0xd1e2e34b in S_call_body ()\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#14 0xd1e2e175 in Perl_call_sv ()\n---Type <return> to continue, or q <return> to quit---\n   from /usr/perl5/5.8.4/lib/i86pc-solaris-64int/CORE/libperl.so.1\n#15 0xd20b95be in modperl_callback (handler=0x8193840, p=0x8b367b0, r=0x8b367e8,\ns=0x8111678, \n    args=0x8aa2c0c) at modperl_callback.c:101\n#16 0xd20b9be8 in modperl_callback_run_handlers (idx=6, type=4, r=0x8b367e8, c=0x0, \n    s=0x8111678, pconf=0x0, plog=0x0, ptemp=0x0, run_mode=MP_HOOK_RUN_FIRST)\n    at modperl_callback.c:262\n#17 0xd20b9f70 in modperl_callback_per_dir (idx=6, r=0x8b367e8,\nrun_mode=MP_HOOK_RUN_FIRST)\n    at modperl_callback.c:369\n#18 0xd20b5c86 in modperl_response_handler_run (r=0x8b367e8, finish=0) at\nmod_perl.c:995\n#19 0xd20b5ec2 in modperl_response_handler_cgi (r=0x8b367e8) at mod_perl.c:1090\n#20 0x080b0426 in ap_run_handler (r=0x88cb97c) at config.c:152\n#21 0x080b07f1 in ap_invoke_handler (r=0x8b367e8) at config.c:364\n#22 0x0808b825 in ap_process_request (r=0x8b367e8) at http_request.c:249\n#23 0x08087339 in ap_process_http_connection (c=0x8b308a8) at http_core.c:253\n#24 0x080b9a76 in ap_run_process_connection (c=0x8b308a8) at connection.c:43\n#25 0x080aec3d in child_main (child_num_arg=0) at prefork.c:610\n#26 0x080aee67 in make_child (s=0xf, slot=7) at prefork.c:704\n#27 0x080af829 in ap_mpm_run (_pconf=0x1, plog=0x814a208, s=0x2) at prefork.c:839\n#28 0x080b4853 in main (argc=3, argv=0x8047434) at main.c:623\n\nFor me it is obvious that is an error related to mod_perl, so give you more\ninfo, here is part of httpd.conf and startup.pl:\n\nhttpd.conf\n------------\n\nLoadModule perl_module  modules/mod_perl.so\nLoadModule apreq_module    modules/mod_apreq2.so\nLoadModule auth_ldap_module   modules/mod_auth_ldap.so\nLoadModule php5_module        modules/libphp5.so\n\nPerlInitHandler Apache2::Reload\nPerlSetVar ReloadAll On\nPerlSetVar ReloadTouchFile /usr/local/apache2/conf/reload_modules\nPerlRequire \"conf/startup.pl\"\n...\n...\n...\n<Directory />\n    Options FollowSymLinks IncludesNoExec ExecCGI\n    AllowOverride None\n</Directory>\n...\n...\n...\nAddHandler cgi-script .cgi\n\n\nstartup.pl\n------------\n#!/usr/local/bin/perl\n\n#use Apache2 ();\n\n# enable if the mod_perl 1.0 compatibility is needed\n# use Apache::compat ();\n\n# preload all mp2 modules\n# use ModPerl::MethodLookup;\n# ModPerl::MethodLookup::preload_all_modules();\n\nuse ModPerl::Util (); #for CORE::GLOBAL::exit\n\nuse Apache2::RequestRec ();\nuse Apache2::RequestIO ();\nuse Apache2::RequestUtil ();\n\n#use Apache::Server ();\nuse Apache2::ServerUtil ();\nuse Apache2::Connection ();\nuse Apache2::Log ();\n\nuse APR::Table ();\n\nuse ModPerl::Registry ();\n\nuse Apache2::Const -compile => ':common';\nuse APR::Const -compile => ':common';\n\nuse Net::LDAP ();\nuse LWP::Simple ();\nuse AnyDBM_File ();\n\nuse lib qw(/misc1/temp_project/bel_ngnsite/libs);\nuse CgiLib;\nuse ScmConf;\nuse ScmLib;\nuse CinsLib;\nuse HtmlLib;\nuse GlossaryLib;\nuse RefLib;\nuse DDTSRefLib;\nuse PccLib;\nuse HistoryLib;\nuse CommentLib;\nuse Dictionary;\n\n1;\n\n\nI have disabled the \"use Apache2 ();\" and \"use Apache::Server\", and also\nrenaming the other Apache calls from Apache to Apache2 as given in\n\"http://perl.apache.org/docs/2.0/user/porting/compat.html\". I also have modified\nthe libraries and scripts according to that web instructions.\n\nIf anyone could help with this it should be great, because I have been checking\na lot of things, but I haven't found any solution to this issue.\n\nThanks in advance, and if you need some several info, please ask me for it\nHector", "is_private": false, "id": 111942, "creator": "hecoo@yahoo.es", "time": "2007-12-20T02:52:57Z", "bug_id": 44112, "creation_time": "2007-12-20T02:52:57Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 44112, "is_private": false, "text": "*** Bug 44114 has been marked as a duplicate of this bug. ***", "id": 111952, "time": "2007-12-20T07:02:00Z", "creator": "takashi.asfbugzilla@tks.st", "creation_time": "2007-12-20T07:02:00Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "I think this is more likely due to a conflict in shared libraries\nbetween perl and mod_perl.  In any case, neither is part of httpd-2,\nso you should report it to the mod_perl list as described in\n\nhttp://perl.apache.org/bugs/index.html\n\nIn addition, please consider upgrading to a more recent version\nof Apache httpd.  Installing a fresh version of Apache httpd 2.2.x\nand mod_perl 2.0.x (compiled from source) will resolve the problem\nif it is due to incompatible shared libraries.\n\n", "is_private": false, "id": 112263, "creator": "fielding@apache.org", "time": "2007-12-28T16:44:44Z", "bug_id": 44112, "creation_time": "2007-12-28T16:44:44Z", "attachment_id": null}]