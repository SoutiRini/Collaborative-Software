[{"count": 0, "tags": [], "bug_id": 57687, "attachment_id": null, "is_private": false, "id": 181665, "time": "2015-03-11T12:14:50Z", "creator": "gernot_@nurfuerspam.de", "creation_time": "2015-03-11T12:14:50Z", "text": "Deploying a webapp myapp.war at context path \"some/path/myapp\"\nand unpackWARs is set to \"false\".\nSo there's a conf/Catalina/localhost/some#path#myapp.xml with\n\"<Context docBase=\"/somewhere/myapp.war\">...\"\n\nIn Tomcat 7 (and also Tomcat 6 and Tomcat 5.5) you can add following codeBase in catalina.policy for granting permissions:\ngrant codeBase \"file:${catalina.base}/work/Catalina/localhost/some_path_myapp/-\"\nor\ngrant codeBase \"file:${catalina.base}/work/Catalina/localhost/some_path_myapp/WEB-INF/lib/somejar.jar\"\n\nIn Tomcat 8 these codeBases does not work. \nThere's also no info about that in http://tomcat.apache.org/tomcat-8.0-doc/security-manager-howto.html.\n\nActually there seems to be no way to denote a codeBase for WARs which are deployed as unpackWARs=false."}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 181710, "time": "2015-03-12T19:14:09Z", "bug_id": 57687, "creation_time": "2015-03-12T19:14:09Z", "is_private": false, "text": "WARs use the same format as JARs so the URL for codebase is the same is the URL for any resource inside a JAR. e.g.:\n\ngrant codeBase \"jar:file:${catalina.base}/webapps/bug57687.war!/WEB-INF/lib/test-lib.jar\" {\n    permission java.security.AllPermission;\n};"}]