[{"count": 0, "text": "Hi,\n\nI'm trying to move an application to Tomcat from another application server and \none of my JSP pages won't compile.  I get the following error (I replaced the \nsite specific information with ...):\n\n#########################\nError: 500\nLocation: /.../...jsp\nInternal Servlet Error:\n\norg.apache.jasper.compiler.CompileException: E:\\...\\...\\...jsp(44,9) useBean: \nDuplicate bean name: beanTest\n\tat org.apache.jasper.compiler.BeanGenerator.checkSyntax\n(BeanGenerator.java:125)\n\tat org.apache.jasper.compiler.BeanGenerator.generate\n(BeanGenerator.java:95)\n\tat \norg.apache.jasper.compiler.JspParseEventListener$GeneratorWrapper.generate\n(JspParseEventListener.java, Compiled Code)\n\tat org.apache.jasper.compiler.JspParseEventListener.generateAll\n(JspParseEventListener.java, Compiled Code)\n\tat org.apache.jasper.compiler.JspParseEventListener.generateHeader\n(JspParseEventListener.java, Compiled Code)\n\tat org.apache.jasper.compiler.JspParseEventListener.endPageProcessing\n(JspParseEventListener.java:173)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java, Compiled \nCode)\n\tat org.apache.jasper.servlet.JspServlet.doLoadJSP(JspServlet.java:462)\n\tat org.apache.jasper.servlet.JasperLoader12.loadJSP\n(JasperLoader12.java:146)\n\tat org.apache.jasper.servlet.JspServlet.loadJSP(JspServlet.java:433)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary\n(JspServlet.java:152)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:164)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:318)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java, \nCompiled Code)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.tomcat.core.ServletWrapper.doService\n(ServletWrapper.java:404)\n\tat org.apache.tomcat.core.Handler.service(Handler.java:286)\n\tat org.apache.tomcat.core.ServletWrapper.service\n(ServletWrapper.java:372)\n\tat org.apache.tomcat.core.ContextManager.internalService\n(ContextManager.java:797)\n\tat org.apache.tomcat.core.ContextManager.service\n(ContextManager.java:743)\n\tat \norg.apache.tomcat.service.http.HttpConnectionHandler.processConnection\n(HttpConnectionHandler.java:210)\n\tat org.apache.tomcat.service.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java, Compiled Code)\n\tat org.apache.tomcat.util.ThreadPool$ControlRunnable.run\n(ThreadPool.java, Compiled Code)\n\tat java.lang.Thread.run(Thread.java, Compiled Code)\n#########################\n\nThe code looks something like this:\n\n<%\n\n   if (request.getParameter(\"which_bean\").equals(\"hello1\")) {\n      pageContext.setAttribute(\"beanTest\", new BeanTestClass(), \nPageContext.PAGE_SCOPE);\n%>\n         <jsp:useBean id=\"beanTest\" scope=\"page\" class=\"BeanTestClass\" />\n         <jsp:setProperty name=\"beanTest\" property=\"myBeanProperty\" value=\"1\"/>\n         <jsp:getProperty name=\"beanTest\" property=\"myBeanProperty\"/>\n\n<%\n      }\n\n   if (request.getParameter(\"which_bean\").equals(\"hello2\")) {\n      pageContext.setAttribute(\"beanTest\", new BeanTestClass(), \nPageContext.PAGE_SCOPE);\n%>\n         <jsp:useBean id=\"beanTest\" scope=\"page\" class=\"BeanTestClass\" />\n         <jsp:setProperty name=\"beanTest\" property=\"myBeanProperty\" value=\"2\"/>\n         <jsp:getProperty name=\"beanTest\" property=\"myBeanProperty\"/>\n\n<%\n      }\n%>\n\nThis compiles and works in the other application server that I'm using, but \nJasper tells me that the Bean is incorrectly being duplicated.  I think that \nthis should be ok because the variable declarations in the Java source file \nthat will be produced will be in different blocks.  However, from what I can \ntell, Jasper might be checking the useBean tags first and giving an error \nbefore creating the Java source file.  Again, it does work in the other \napplication server.  We can resolve the issue by giving each bean instance a \ndifferent ID, so this isn't a major issue.  I just wanted to let you know what \nI found.  From reading the specifications, I couldn't determine which way of \nhandling this issue is actually correct.\n\nRegards,\n\nJacob Shukert", "bug_id": 1247, "attachment_id": null, "id": 1768, "time": "2001-04-06T06:15:19Z", "creator": "Jacob.Shukert@WCom.com", "creation_time": "2001-04-06T06:15:19Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 1247, "attachment_id": null, "id": 1775, "time": "2001-04-06T15:18:50Z", "creator": "justyna.horwat@sun.com", "creation_time": "2001-04-06T15:18:50Z", "is_private": false, "text": "The ID value has to be unique in the JSP source file and any included files.\n\nIn section 2.1.13 of the JSP 1.2 spec it states:\n\n\"The id=\"name\" attribute/value tuple in an element has special meaning to a\nJSP container, both at page translation time, and at client request\nprocessing time; in particular: the name must be unique within the\ntranslation unit, and identifies the particular element in which it appears\nto the JSP container and page. Duplicate id's found in the same translation\nunit shall result in a fatal translation error.\"\n\n"}]