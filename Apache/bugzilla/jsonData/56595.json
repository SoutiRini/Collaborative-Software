[{"attachment_id": null, "tags": [], "bug_id": 56595, "text": "Copied over comment after resolving Bug 56563 (likely a result of caching/synchronization added in Bug 55611):\n\n----\nNote that every call to DateUtil.isCellDateFormatted(a-numeric-cell) ends up in a call to DateUtil.isADateFormat() which itself also maintains a static cache of the last result and synchronizes on DateUtil.class.\n\nIn my case for example, the issue with the formatString arises by a call to DateUtil.isCellDateFormatted(cell), so I still get monitor locks upon each call even though you use thread locals for the style formatString cache. \n\nSeems like it would be a good idea to use the same strategy and switch the DateUtil.isADateFormat() cache to be ThreadLocal based rather than synchronization based.\n----", "count": 0, "id": 175685, "time": "2014-06-05T20:15:14Z", "creator": "dominik.stadler@gmx.at", "creation_time": "2014-06-05T20:15:14Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 56595, "text": "We now switched the cache in DateUtil.isADateFormat() to ThreadLocals as well to not have another syncpoint here. \n\nAgain only very little data is kept, so no memory bloat should happen because of this.\n\nSee r1647296 for details.", "id": 179937, "time": "2014-12-22T12:09:35Z", "creator": "dominik.stadler@gmx.at", "creation_time": "2014-12-22T12:09:35Z", "is_private": false, "attachment_id": null}]