[{"count": 0, "tags": [], "bug_id": 45896, "text": "When using jboss cache and jgroups library I have this error in my logs :\n\nSep 25, 2008 7:50:36 PM org.apache.catalina.startup.HostConfig deployWAR\nINFO: Deploying web application archive ROOT.war\nSep 25, 2008 7:55:33 PM org.apache.catalina.startup.HostConfig checkResources\nINFO: Undeploying context []\nSep 25, 2008 7:55:33 PM org.apache.catalina.startup.HostConfig deployWAR\nINFO: Deploying web application archive ROOT.war\nSep 25, 2008 7:55:34 PM org.apache.catalina.loader.WebappClassLoader loadClass\nINFO: Illegal access: this web application instance has been stopped already. Could not load java.io.PrintWriter. The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.\njava.lang.IllegalStateException\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1246)\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1206)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        at org.apache.log4j.spi.LoggingEvent.<init>(LoggingEvent.java:154)\n        at org.apache.log4j.Category.forcedLog(Category.java:388)\n        at org.apache.log4j.Category.log(Category.java:853)\n        at org.apache.commons.logging.impl.Log4JLogger.error(Log4JLogger.java:193)\n        at org.jgroups.protocols.MPING.run(MPING.java:362)\n        at java.lang.Thread.run(Thread.java:619)\nSep 25, 2008 7:55:34 PM org.apache.catalina.loader.WebappClassLoader loadClass\nINFO: Illegal access: this web application instance has been stopped already. Could not load org.apache.log4j.spi.VectorWriter. The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.\njava.lang.IllegalStateException\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1246)\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1206)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        at org.apache.log4j.spi.LoggingEvent.<init>(LoggingEvent.java:154)\n        at org.apache.log4j.Category.forcedLog(Category.java:388)\n        at org.apache.log4j.Category.log(Category.java:853)\n        at org.apache.commons.logging.impl.Log4JLogger.error(Log4JLogger.java:193)\n        at org.jgroups.protocols.MPING.run(MPING.java:362)\n        at java.lang.Thread.run(Thread.java:619)\nSep 25, 2008 7:55:34 PM org.apache.catalina.loader.WebappClassLoader loadClass\nINFO: Illegal access: this web application instance has been stopped already. Could not load org.apache.log4j.spi.VectorWriter. The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.\njava.lang.IllegalStateException\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1246)\n        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1206)\n        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)\n        at org.apache.log4j.spi.LoggingEvent.<init>(LoggingEvent.java:154)\n        at org.apache.log4j.Category.forcedLog(Category.java:388)\n        at org.apache.log4j.Category.log(Category.java:853)\n        at org.apache.commons.logging.impl.Log4JLogger.error(Log4JLogger.java:193)\n        at org.jgroups.protocols.Discovery$PingSenderTask$1.run(Discovery.java:389)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\n        at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:181)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:205)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:885)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)\n        at java.lang.Thread.run(Thread.java:619)\nSep 25, 2008 7:55:36 PM org.apache.catalina.loader.WebappClassLoader loadClass\nINFO: Illegal access: this web application instance has been stopped already. Could not load org.apache.log4j.spi.VectorWriter. The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact. \n\nI also add the issue in the jgroups bug tracker and they said that it's a log4j problem : https://jira.jboss.org/jira/browse/JGRP-826?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=12431338\n\nThey recommand to put log4j and jgroups in the tomcat/lib directory but it's very annoying to that because until now all the library management was centralized in the webapp itself, this way it was easy to upgrade library version etc...\nI tried to migrate the log4j version to 1.2.15 in my pom.xml but it's doesn't work. I saw here that some people are the same migration problem : http://yoavs.blogspot.com/2008/05/caution-log4j-1215-brings-in-bunch-of.html and decided to continue to use the 1.2.14 version.", "id": 121011, "time": "2008-09-26T04:09:37Z", "creator": "mimounl@gmail.com", "creation_time": "2008-09-26T04:09:37Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "If you need some, don't hesitate to ask me more detailed informations on how reproduce the crash.", "is_private": false, "bug_id": 45896, "id": 121012, "time": "2008-09-26T04:13:06Z", "creator": "mimounl@gmail.com", "creation_time": "2008-09-26T04:13:06Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "mimounl@gmail.com", "attachment_id": null, "is_private": false, "id": 121023, "time": "2008-09-26T09:12:44Z", "bug_id": 45896, "creation_time": "2008-09-26T09:12:44Z", "text": "oki the problem is not from log4j. I invalid this issue."}]