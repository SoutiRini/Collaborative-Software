[{"count": 0, "tags": [], "text": "Created attachment 28762\nPatch to fix this problem\n\nIncorrect syntax in the sql query and \"ON DELETE CASCADE\" is only available for mysql-engine INNODB. May make sense a cleaning table through a script? The table rivet_session_cache is cleared only by a foreign key.", "is_private": false, "id": 158978, "creator": "shtumff@gmail.com", "time": "2012-05-12T10:55:29Z", "bug_id": 53223, "creation_time": "2012-05-12T10:55:29Z", "attachment_id": 28762}, {"count": 1, "tags": [], "creator": "mxmanghi@apache.org", "attachment_id": null, "is_private": false, "id": 158980, "time": "2012-05-12T14:26:05Z", "bug_id": 53223, "creation_time": "2012-05-12T14:26:05Z", "text": "Having a script for cleaning up the rivet_session_cache table would be more portable but it would also add extra overheads in the operation. I expect Mysql internal mechanics to be more efficient, but I could be wrong, I never tested this assumption. We should probably more explicit about the Mysql version requirements (AFAIK 'ON DELETE CASCADE' has been supported since version 5.0) and force the tables be INNODB. Would it be acceptable to address the problem?"}, {"count": 2, "tags": [], "creator": "shtumff@gmail.com", "attachment_id": null, "id": 159034, "time": "2012-05-14T12:40:59Z", "bug_id": 53223, "creation_time": "2012-05-14T12:40:59Z", "is_private": false, "text": "MySQL supports constraints for the foreign key since a version 3.23.50 (in InnoDB) and this feature not realized at the moment for the default MyISAM engine.\nhttp://dev.mysql.com/doc/refman/5.0/en/ansi-diff-foreign-keys.html\n\nI use mysql version 5.1.62 \nForeign key does provide better performance, but is not portable. An alternative solution would be to use both methods for clean up this table."}, {"count": 3, "text": "Created attachment 28777\nanother way to fix this issue", "creator": "shtumff@gmail.com", "attachment_id": 28777, "id": 159035, "time": "2012-05-14T12:41:46Z", "bug_id": 53223, "creation_time": "2012-05-14T12:41:46Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 53223, "attachment_id": null, "id": 159053, "time": "2012-05-14T22:27:03Z", "creator": "mxmanghi@apache.org", "creation_time": "2012-05-14T22:27:03Z", "is_private": false, "text": "fixed in trunk"}]