[{"count": 0, "tags": [], "creator": "vspa@mail.ru", "attachment_id": null, "text": "If I have an HttpSessionListener implementation defined in web.xml, or I have an attributes in \nsession which implement HttpSessionBindingListener, neither one gets notified when I \nredeploy war file via manager (ant task) nor if I stop/remove it via manager's web interface. Also \nthose events are not fired if I stop tomcat.\n\nIn code below \"SESSION TERMINATED\" never gets \nprinted when you close tomcat or redeploy/remove/stop webapplication via manager.\n\nI \nbelieve, it should happen. That is, session must be invalidated by container upon destroyng \nwebapplication. \n\nFor instance, in my case, we need to notify a legacy system, that our user \nfinished his work, we can't force him to click on \"Log out\" button, so we must track session \nexpiration. It all works fine (natural expiration by timeout), but when I redeploy new version of \nour webapp via ant task, existing sessions are not terminated properly.\n\n=== Test code \n===\npackage test;\n\nimport javax.servlet.http.HttpSessionBindingEvent;\nimport \njavax.servlet.http.HttpSessionBindingListener;\nimport \njavax.servlet.http.HttpSessionEvent;\nimport \njavax.servlet.http.HttpSessionListener;\n\npublic class MySessionListener implements \nHttpSessionListener {\n\n\tpublic void sessionCreated(HttpSessionEvent _aArg0) \n{\n\t\tSystem.out.println(\"SESSION CREATED\");\n\t\t\n\t}\n\n\tpublic void \nsessionDestroyed(HttpSessionEvent _aArg0) {\n\t\tSystem.out.println(\"SESSION \nTERMINATED\");\n\t}\n}\n\n=== goes to web.xml ===\n<listener>\n <listener-\nclass>test.MySessionListener</listener-class>\n</listener>", "id": 51295, "time": "2004-01-28T16:09:21Z", "bug_id": 26496, "creation_time": "2004-01-28T16:09:21Z", "is_private": false}, {"count": 1, "text": "I forgot to mention, that the same problem apparently exists in Tomcat 4.x series(tested against \n4.1.24).", "creator": "vspa@mail.ru", "attachment_id": null, "id": 51296, "time": "2004-01-28T16:41:24Z", "bug_id": 26496, "creation_time": "2004-01-28T16:41:24Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 26496, "attachment_id": null, "id": 51297, "time": "2004-01-28T17:22:06Z", "creator": "remm@apache.org", "creation_time": "2004-01-28T17:22:06Z", "is_private": false, "text": "This is invalid (there are even working examples of this in the two examples\nwebapps). Please don't reopen the report, and instead post to tomcat-user for\nadvice. Thanks."}]