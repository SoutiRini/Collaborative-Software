[{"count": 0, "tags": [], "bug_id": 42343, "attachment_id": null, "id": 102885, "time": "2007-05-06T22:05:33Z", "creator": "tedmanleung@gmail.com", "creation_time": "2007-05-06T22:05:33Z", "is_private": false, "text": "when submitting a form post with parameters, if you post to a directory instead\nof an exact file you don't receive the form post parameters.\n\nAs an example if you have a web page with\n\n <form method=\"post\" action=\"/test\" >\n    parameter1 <input type=\"text\" name=\"parameter1\" /> <br />\n    parameter2 <input type=\"text\" name=\"parameter2\" /> <br />\n    parameter3 <input type=\"text\" name=\"parameter3\" /> <br />\n    <input type=\"submit\" />\n </form>\n\nwhere /test is the contextPath or a directory\n\nif you have a ServletFilter, the filter will not get the parameters, i.e. if I\nhave request.getParameter(\"parameter1\"); it will return null. Also if I have an\nindex.jsp in the test directory (or contextRoot) and I do request.getParameter()\nfrom the page, I also don't get the parameters.\n\nIf I change the form action to action=\"/test/index.jsp\" both the filter and the\nindex.jsp will receive the post parameters as expected.\n\nI should also note that I'm fairly sure this worked in tomcat 5.5.20 as I had\nworking code for that which now doesn't work in tomcat 6.0.10\n\nSome additional information is as follows \n   Linux version 2.6.11-1.1369_FC4 (fedora core 4)\n   java full version \"1.6.0-b105\"\n   tomcat 6.0.10\n\nThe code I used for getting the parameters was \n\t\n\tpublic void doFilter(ServletRequest request, ServletResponse response,\nFilterChain chain) throws IOException, ServletException\n    {\n\t\tSystem.err.println(\"*** doFilter()\");\n\t    \t\t\n\t\tMap parameters=request.getParameterMap();\n\t\tfor (Object o : parameters.entrySet())\n\t\t{\n\t\t\tMap.Entry entry=(Map.Entry)o;\n\t\t\tSystem.err.println(\"Entry: \"+entry.getKey()+'='+entry.getValue());\n\t\t}\n\t\t\n\t    chain.doFilter(request, response);\n    }\n    \nMy web.xml was configured as follows \n\n\t<filter>\n\t\t<filter-name>TestFilter</filter-name>\n\t\t<filter-class>TestFilter</filter-class>\n\t</filter>\n\n\t<filter-mapping>\n\t\t<filter-name>TestFilter</filter-name>\n\t\t<url-pattern>/*</url-pattern>\n\t</filter-mapping>"}, {"count": 1, "tags": [], "text": "Tomcat will do a redirect in this situation, this is why it does not work. This\nissue will not be fixed.", "is_private": false, "bug_id": 42343, "id": 102886, "time": "2007-05-07T01:15:19Z", "creator": "remm@apache.org", "creation_time": "2007-05-07T01:15:19Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 42343, "text": "Although I recognise the techical reason as to why it doesn't work and I can\nalso some what agree that the index.jsp may arguably not receive the posted\nparameters, I have to put my 2 cent protest into the servlet filter which is\nmapped to /*, not receiving the posted parameters.\n\nI guess it's not too important since there's a work around via just putting the\nactual filename in my case.\n\nthanx.", "id": 102906, "attachment_id": null, "creator": "tedmanleung@gmail.com", "creation_time": "2007-05-07T08:17:56Z", "time": "2007-05-07T08:17:56Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 42343, "attachment_id": null, "text": "Interesting approach... What if the URL I am trying to filter doesn't correspond\nto a file, directory, or even a servlet mapping?", "id": 103799, "time": "2007-05-29T20:56:01Z", "creator": "roger.keays@ninthavenue.com.au", "creation_time": "2007-05-29T20:56:01Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 42343, "text": "(In reply to comment #3)\n> Interesting approach... What if the URL I am trying to filter doesn't correspond\n> to a file, directory, or even a servlet mapping?\n\nit shouldn't be a problem in that case, it's only a problem because a reference\nto a directory / path with out a file also maps to the index pages, such as\nindex.html index.jsp, (or what ever you have configured in your web.xml) and\ncauses a redirect on the server side (but no a normal servlet redirect).", "id": 103812, "time": "2007-05-30T06:34:29Z", "creator": "tedmanleung@gmail.com", "creation_time": "2007-05-30T06:34:29Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "text": "(In reply to comment #4)\nI'm having the same problem, but with a Servlet mapping. No servlet is able to\nobtain HTTP Post parameters from the HttpRequest object. Here's web.xml:\n\n    <servlet>\n        <servlet-name>mpp</servlet-name>\n        <description>My Servlet</description>\n        <servlet-class>\n            org.whatever.MyServlet\n        </servlet-class>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n\nIn Tomcat 5, posts to localhost/mpp would result in org.whatever.MyServlet\ncorrectly able to get the request parameters. In Tomcat 6 this is no longer the\ncase. Is there some additional server settings I need to change in order to\nre-enable this?\n\n> (In reply to comment #3)\n> > Interesting approach... What if the URL I am trying to filter doesn't correspond\n> > to a file, directory, or even a servlet mapping?\n> \n> it shouldn't be a problem in that case, it's only a problem because a reference\n> to a directory / path with out a file also maps to the index pages, such as\n> index.html index.jsp, (or what ever you have configured in your web.xml) and\n> causes a redirect on the server side (but no a normal servlet redirect).\n\n", "is_private": false, "bug_id": 42343, "id": 105892, "time": "2007-07-24T07:00:22Z", "creator": "philippe.desrosiers@gmail.com", "creation_time": "2007-07-24T07:00:22Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "tedmanleung@gmail.com", "attachment_id": null, "id": 105899, "time": "2007-07-24T07:43:19Z", "bug_id": 42343, "creation_time": "2007-07-24T07:43:19Z", "is_private": false, "text": "(In reply to comment #5)\n> I'm having the same problem, but with a Servlet mapping. No servlet is able to\n> obtain HTTP Post parameters from the HttpRequest object. Here's web.xml:\n\nI don't have problems with servlets; however, I don't think I tried POST, I only\ntried GET. I didn't think this problem affected servlets."}]