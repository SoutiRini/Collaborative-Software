[{"count": 0, "tags": [], "bug_id": 2949, "attachment_id": null, "text": "I aplogize for the format, but since Craig and I did a bit of troubleshooting\nvia email, I figured it would be best to just include the email history as the\ndescription, thus saving a few steps for you\n\nBob Evans\n\n---- begin email attachment -----\n\nAlas, no :-(.  It wasn't in Bugzilla, so this conversation got lost in my\ninbox.\n\n\nCould you please put in a bug report describing the symptoms?  That way,\nwe can track it until it's fixed.\n\n\n  http://jakarta.apache.org/bugzilla/\n\n\nCraig\n\n\n\nOn Fri, 20 Jul 2001, Robert Evans wrote:\n\n\n> Craig,\n>\n> I noticed Tomcat 4.0B6 has been released (from you email on the mailing\n> list).  Did you have a chance to fix the public_html bug that we had discussed?\n>\n> Bob\n>\n> At 01:24 PM 6/15/2001 -0700, you wrote:\n> >OK, from the log it really is trying to deploy your webapp.  The problem\n> >is that you are referencing a class (listeners.ContextListener) in your\n> >web.xml file that is not present in your webapp directory.  Did you simply\n> >copy the web.xml file from the Tomcat \"examples\" app?  If so, you'll need\n> >to copy the contents of WEB-INF/classes and WEB-INF/jsp as well.\n> >\n> >Craig\n> >\n> >\n> >On Fri, 15 Jun 2001, Robert Evans wrote:\n> >\n> > > Craig,\n> > >\n> > > One last thing.  I noticed this posted on the mail list.  I noticed that I\n> > > tried the PasswdUserDatabase option.  It didn't work.  Then I tried the\n> > > homeBase, but I forgot to use HomesUserDatabase.  Unfortunately, it didn't\n> > > make any difference.\n> > >\n> > > This means that my last email with the error log may be misleading.  Since\n> > > I used the wrong option, it may have caused the wrong error.  When I went\n> > > back to the PasswdUserDatabase option, I still couldn't access ~rbevans.\n> > >\n> > > So when I have the following in server.xml:\n> > >\n> > >          <Listener className=\"org.apache.catalina.startup.UserConfig\"\n> > >                    directoryName=\"public_html\"\n> > >\n> > userClass=\"org.apache.catalina.startup.PasswdUserDatabase\"/>\n> > >\n> > > I get the following in my web browser:\n> > >\n> > >     HTTP Status 404 - /~rbevans\n> > >\n> > >     The requested resource (/~rbevans) is not available.\n> > >\n> > > The complete localhost_log.2001-06-15.txt is as follows: (I think this may\n> > > include some shutdown code as well as startup...the first part is me\n> > > stopping tomcat, then I restarted)\n> > >\n> > > 2001-06-15 15:01:52 StandardHost[localhost]: Removing web application at\n> > > context path /foo\n> > > 2001-06-15 15:01:52 SessionListener: contextDestroyed()\n> > > 2001-06-15 15:01:52 ContextListener: contextDestroyed()\n> > > 2001-06-15 15:01:52 ssi: destroy\n> > > 2001-06-15 15:01:52 HostConfig[localhost] Error undeploying web\n> > application\n> > > at context path ~rbevans\n> > > java.lang.IllegalArgumentException: Invalid context path: ~rbevans\n> > >          at\n> > org.apache.catalina.core.StandardHost.remove(StandardHost.java:708)\n> > >          at\n> > > org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:422)\n> > >          at\n> > org.apache.catalina.startup.HostConfig.stop(HostConfig.java:402)\n> > >          at\n> > > org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:234)\n> > >          at\n> > >\n> >\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:155)\n> > >          at\n> > > org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1151)\n> > >          at\n> > > org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1163)\n> > >          at\n> > > org.apache.catalina.core.StandardService.stop(StandardService.java:400)\n> > >          at\n> > > org.apache.catalina.core.StandardServer.stop(StandardServer.java:487)\n> > >          at org.apache.catalina.startup.Catalina.start(Catalina.java:743)\n> > >          at org.apache.catalina.startup.Catalina.execute(Catalina.java:647)\n> > >          at org.apache.catalina.startup.Catalina.process(Catalina.java:177)\n> > >          at java.lang.reflect.Method.invoke(Native Method)\n> > >          at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:196)\n> > >\n> > > 2001-06-15 15:01:52 StandardHost[localhost]: Removing web application at\n> > > context path /examples\n> > > 2001-06-15 15:01:52 StandardHost[localhost]: Removing web application at\n> > > context path /webdav\n> > > 2001-06-15 15:01:52 ssi: destroy\n> > > 2001-06-15 15:01:52 StandardHost[localhost]: Removing web application at\n> > > context path /manager\n> > > 2001-06-15 15:01:52 ssi: destroy\n> > > 2001-06-15 15:01:52 StandardHost[localhost]: Removing web application at\n> > > context path\n> > > 2001-06-15 15:01:52 ssi: destroy\n> > > 2001-06-15 15:01:52 UserConfig[localhost]: UserConfig: Processing STOP\n> > > 2001-06-15 15:01:57 StandardLoader[/foo]: Reloading checks are enabled for\n> > > this Context\n> > > 2001-06-15 15:01:57 StandardManager[/foo]: Seeding random number generator\n> > > class java.security.SecureRandom\n> > > 2001-06-15 15:01:57 StandardManager[/foo]: Seeding of random number\n> > > generator has been completed\n> > > 2001-06-15 15:01:58 ContextConfig[/foo]: Added certificates -> request\n> > > attribute Valve\n> > > 2001-06-15 15:01:58 ContextConfig[/foo]: Configured an authenticator for\n> > > method FORM\n> > > 2001-06-15 15:01:58 ContextListener: contextInitialized()\n> > > 2001-06-15 15:01:58 SessionListener: contextInitialized()\n> > > 2001-06-15 15:01:58 ContextListener:\n> > > attributeReplaced('org.apache.catalina.WELCOME_FILES',\n> > > '[Ljava.lang.String;@1173ef')\n> > > 2001-06-15 15:01:58 StandardWrapper[/foo:default]: Loading container\n> > > servlet default\n> > > 2001-06-15 15:01:59 default: init\n> > > 2001-06-15 15:01:59 StandardWrapper[/foo:invoker]: Loading container\n> > > servlet invoker\n> > > 2001-06-15 15:01:59 invoker: init\n> > > 2001-06-15 15:01:59 StandardWrapper[/foo:jsp]: Using Jasper classloader\n> > for\n> > > servlet jsp\n> > > 2001-06-15 15:01:59 jsp: init\n> > > 2001-06-15 15:02:00 StandardWrapper[/foo:ssi]: Loading container\n> > servlet ssi\n> > > 2001-06-15 15:02:00 ssi: init\n> > > 2001-06-15 15:02:01 StandardHost[localhost]: Installing web application at\n> > > context path  from URL\n> > > file:/usr/local/jakarta/jakarta-tomcat-4.0-b5-src/build/webapps/ROOT\n> > > 2001-06-15 15:02:01 StandardManager[]: Seeding random number generator\n> > > class java.security.SecureRandom\n> > > 2001-06-15 15:02:01 StandardManager[]: Seeding of random number generator\n> > > has been completed\n> > > 2001-06-15 15:02:04 ContextConfig[]: Added certificates -> request\n> > > attribute Valve\n> > > 2001-06-15 15:02:04 StandardWrapper[:default]: Loading container servlet\n> > > default\n> > > 2001-06-15 15:02:04 default: init\n> > > 2001-06-15 15:02:04 StandardWrapper[:invoker]: Loading container servlet\n> > > invoker\n> > > 2001-06-15 15:02:04 invoker: init\n> > > 2001-06-15 15:02:04 StandardWrapper[:jsp]: Using Jasper classloader for\n> > > servlet jsp\n> > > 2001-06-15 15:02:04 jsp: init\n> > > 2001-06-15 15:02:07 StandardWrapper[:ssi]: Loading container servlet ssi\n> > > 2001-06-15 15:02:07 ssi: init\n> > > 2001-06-15 15:02:07 StandardHost[localhost]: Installing web application at\n> > > context path /webdav from URL\n> > > file:/usr/local/jakarta/jakarta-tomcat-4.0-b5-src/build/webapps/webdav\n> > > 2001-06-15 15:02:07 StandardManager[/webdav]: Seeding random number\n> > > generator class java.security.SecureRandom\n> > > 2001-06-15 15:02:07 StandardManager[/webdav]: Seeding of random number\n> > > generator has been completed\n> > > 2001-06-15 15:02:08 ContextConfig[/webdav]: Added certificates -> request\n> > > attribute Valve\n> > > 2001-06-15 15:02:08 StandardWrapper[/webdav:default]: Loading container\n> > > servlet default\n> > > 2001-06-15 15:02:08 default: init\n> > > 2001-06-15 15:02:08 StandardWrapper[/webdav:invoker]: Loading container\n> > > servlet invoker\n> > > 2001-06-15 15:02:08 invoker: init\n> > > 2001-06-15 15:02:08 StandardWrapper[/webdav:jsp]: Using Jasper classloader\n> > > for servlet jsp\n> > > 2001-06-15 15:02:08 jsp: init\n> > > 2001-06-15 15:02:09 StandardWrapper[/webdav:ssi]: Loading container\n> > servlet ssi\n> > > 2001-06-15 15:02:09 ssi: init\n> > > 2001-06-15 15:02:09 StandardHost[localhost]: Installing web application at\n> > > context path /manager from URL\n> > > file:/usr/local/jakarta/jakarta-tomcat-4.0-b5-src/build/webapps/manager\n> > > 2001-06-15 15:02:09 StandardManager[/manager]: Seeding random number\n> > > generator class java.security.SecureRandom\n> > > 2001-06-15 15:02:09 StandardManager[/manager]: Seeding of random number\n> > > generator has been completed\n> > > 2001-06-15 15:02:09 ContextConfig[/manager]: Added certificates -> request\n> > > attribute Valve\n> > > 2001-06-15 15:02:09 ContextConfig[/manager]: Configured an authenticator\n> > > for method BASIC\n> > > 2001-06-15 15:02:09 StandardWrapper[/manager:default]: Loading container\n> > > servlet default\n> > > 2001-06-15 15:02:09 default: init\n> > > 2001-06-15 15:02:09 StandardWrapper[/manager:invoker]: Loading container\n> > > servlet invoker\n> > > 2001-06-15 15:02:09 invoker: init\n> > > 2001-06-15 15:02:09 StandardWrapper[/manager:jsp]: Using Jasper\n> > classloader\n> > > for servlet jsp\n> > > 2001-06-15 15:02:09 jsp: init\n> > > 2001-06-15 15:02:10 StandardWrapper[/manager:ssi]: Loading container\n> > > servlet ssi\n> > > 2001-06-15 15:02:10 ssi: init\n> > > 2001-06-15 15:02:10 UserConfig[localhost]: UserConfig: Processing START\n> > > 2001-06-15 15:02:10 UserConfig[localhost]: Cannot find message associated\n> > > with key 'userConfig.deploying'\n> > > 2001-06-15 15:02:10 UserConfig[localhost]: Deploying web application for\n> > > user rbevans\n> > > 2001-06-15 15:02:10 StandardManager[~rbevans]: Seeding random number\n> > > generator class java.security.SecureRandom\n> > > 2001-06-15 15:02:10 StandardManager[~rbevans]: Seeding of random number\n> > > generator has been completed\n> > > 2001-06-15 15:02:10 ContextConfig[~rbevans]: Added certificates -> request\n> > > attribute Valve\n> > > 2001-06-15 15:02:10 ContextConfig[~rbevans]: Configured an authenticator\n> > > for method FORM\n> > > 2001-06-15 15:02:10 StandardContext[~rbevans]: Error configuring\n> > > application listener of class listeners.ContextListener\n> > > java.lang.ClassNotFoundException: listeners.ContextListener\n> > >          at\n> > >\n> >\norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLoader.java:1111)\n> > >          at\n> > >\n> >\norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLoader.java:976)\n> > >          at\n> > >\n> >\norg.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3060)\n> > >          at\n> > > org.apache.catalina.core.StandardContext.start(StandardContext.java:3218)\n> > >          at\n> > > org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:785)\n> > >          at\n> > > org.apache.catalina.core.StandardHost.addChild(StandardHost.java:413)\n> > >          at\n> > org.apache.catalina.startup.UserConfig.deploy(UserConfig.java:376)\n> > >          at\n> > org.apache.catalina.startup.UserConfig.deploy(UserConfig.java:336)\n> > >          at\n> > org.apache.catalina.startup.UserConfig.start(UserConfig.java:435)\n> > >          at\n> > > org.apache.catalina.startup.UserConfig.lifecycleEvent(UserConfig.java:301)\n> > >          at\n> > >\n> >\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:155)\n> > >          at\n> > > org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1131)\n> > >          at\n> > > org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n> > >          at\n> > > org.apache.catalina.core.StandardEngine.start(StandardEngine.java:278)\n> > >          at\n> > > org.apache.catalina.core.StandardService.start(StandardService.java:353)\n> > >          at\n> > > org.apache.catalina.core.StandardServer.start(StandardServer.java:458)\n> > >          at org.apache.catalina.startup.Catalina.start(Catalina.java:725)\n> > >          at org.apache.catalina.startup.Catalina.execute(Catalina.java:647)\n> > >          at org.apache.catalina.startup.Catalina.process(Catalina.java:177)\n> > >          at java.lang.reflect.Method.invoke(Native Method)\n> > >          at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:196)\n> > >\n> > > 2001-06-15 15:02:10 StandardContext[~rbevans]: Error configuring\n> > > application listener of class listeners.SessionListener\n> > > java.lang.ClassNotFoundException: listeners.SessionListener\n> > >          at\n> > >\n> >\norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLoader.java:1111)\n> > >          at\n> > >\n> >\norg.apache.catalina.loader.StandardClassLoader.loadClass(StandardClassLoader.java:976)\n> > >          at\n> > >\n> >\norg.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3060)\n> > >          at\n> > > org.apache.catalina.core.StandardContext.start(StandardContext.java:3218)\n> > >          at\n> > > org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:785)\n> > >          at\n> > > org.apache.catalina.core.StandardHost.addChild(StandardHost.java:413)\n> > >          at\n> > org.apache.catalina.startup.UserConfig.deploy(UserConfig.java:376)\n> > >          at\n> > org.apache.catalina.startup.UserConfig.deploy(UserConfig.java:336)\n> > >          at\n> > org.apache.catalina.startup.UserConfig.start(UserConfig.java:435)\n> > >          at\n> > > org.apache.catalina.startup.UserConfig.lifecycleEvent(UserConfig.java:301)\n> > >          at\n> > >\n> >\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:155)\n> > >          at\n> > > org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1131)\n> > >          at\n> > > org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n> > >          at\n> > > org.apache.catalina.core.StandardEngine.start(StandardEngine.java:278)\n> > >          at\n> > > org.apache.catalina.core.StandardService.start(StandardService.java:353)\n> > >          at\n> > > org.apache.catalina.core.StandardServer.start(StandardServer.java:458)\n> > >          at org.apache.catalina.startup.Catalina.start(Catalina.java:725)\n> > >          at org.apache.catalina.startup.Catalina.execute(Catalina.java:647)\n> > >          at org.apache.catalina.startup.Catalina.process(Catalina.java:177)\n> > >          at java.lang.reflect.Method.invoke(Native Method)\n> > >          at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:196)\n> > >\n> > > 2001-06-15 15:02:10 StandardContext[~rbevans]: Skipped installing\n> > > application listeners due to previous error(s)\n> > > 2001-06-15 15:02:10 StandardContext[~rbevans]: Context startup failed due\n> > > to previous errors\n> > >\n> > >\n> > > And this is the localhost_access_log.2001-06-15.txt\n> > >\n> > > 128.244.68.121 - - [15/Jun/2001:07:41:23 -0500] \"GET / HTTP/1.0\" 302 234\n> > > 128.244.68.121 - - [15/Jun/2001:07:41:23 -0500] \"GET /index.html HTTP/1.0\"\n> > > 304 -\n> > > 128.244.68.121 - - [15/Jun/2001:07:41:23 -0500] \"GET /tomcat.gif HTTP/1.0\"\n> > > 304 -\n> > > 128.244.68.121 - - [15/Jun/2001:07:41:23 -0500] \"GET /tomcat-power.gif\n> > > HTTP/1.0\" 304 \\\n> > > -\n> > > 128.244.68.121 - - [15/Jun/2001:07:41:31 -0500] \"GET /~rbevans HTTP/1.0\"\n> > > 404 195\n> > > 128.244.68.121 - - [15/Jun/2001:07:43:59 -0500] \"GET /~rbevans HTTP/1.0\"\n> > > 404 195\n> > > 128.244.68.121 - - [15/Jun/2001:07:44:15 -0500] \"GET /~rbevans/index.html\n> > > HTTP/1.0\" 4\\\n> > > 04 217\n> > > 128.244.68.121 - - [15/Jun/2001:07:45:01 -0500] \"GET /~rbevans HTTP/1.0\"\n> > > 404 195\n> > > 128.244.68.121 - - [15/Jun/2001:07:45:03 -0500] \"GET /~rbevans/index.html\n> > > HTTP/1.0\" 4\\\n> > > 04 217\n> > > 128.244.68.121 - - [15/Jun/2001:08:01:23 -0500] \"GET /~rbevans/index.html\n> > > HTTP/1.0\" 4\\\n> > > 04 217\n> > > 128.244.68.121 - - [15/Jun/2001:08:01:27 -0500] \"GET /~rbevans/index.html\n> > > HTTP/1.0\" 4\\\n> > > 04 217\n> > > 128.244.68.121 - - [15/Jun/2001:08:01:48 -0500] \"GET /foo HTTP/1.0\" 302 234\n> > > 128.244.68.121 - - [15/Jun/2001:08:01:48 -0500] \"GET /foo/ HTTP/1.0\"\n> > 200 1272\n> > > 128.244.68.121 - - [15/Jun/2001:08:04:13 -0500] \"GET /~rbevans HTTP/1.0\"\n> > > 404 195\n> > > 128.244.68.121 - - [15/Jun/2001:08:12:39 -0500] \"GET / HTTP/1.0\" 302 234\n> > > 128.244.68.121 - - [15/Jun/2001:08:12:39 -0500] \"GET /index.html HTTP/1.0\"\n> > > 304 -\n> > > 128.244.68.121 - - [15/Jun/2001:08:12:39 -0500] \"GET /tomcat.gif HTTP/1.0\"\n> > > 304 -\n> > > 128.244.68.121 - - [15/Jun/2001:08:12:39 -0500] \"GET /tomcat-power.gif\n> > > HTTP/1.0\" 304 \\\n> > > -\n> > > 128.244.68.121 - - [15/Jun/2001:08:12:44 -0500] \"GET /~rbevans HTTP/1.0\"\n> > > 404 195\n> > > 128.244.68.121 - - [15/Jun/2001:08:12:56 -0500] \"GET /examples/\n> > HTTP/1.0\" 304 -\n> > > 128.244.68.121 - - [15/Jun/2001:14:47:54 -0500] \"GET /index.html HTTP/1.0\"\n> > > 304 -\n> > > 128.244.68.121 - - [15/Jun/2001:14:47:54 -0500] \"GET / HTTP/1.0\" 302 234\n> > > 128.244.68.121 - - [15/Jun/2001:14:47:54 -0500] \"GET /tomcat.gif HTTP/1.0\"\n> > > 304 -\n> > > 128.244.68.121 - - [15/Jun/2001:14:47:54 -0500] \"GET /tomcat-power.gif\n> > > HTTP/1.0\" 304 \\\n> > > -\n> > > 128.244.68.121 - - [15/Jun/2001:14:47:59 -0500] \"GET /~rbevans HTTP/1.0\"\n> > > 404 195\n> > > 128.244.68.121 - - [15/Jun/2001:14:52:58 -0500] \"GET / HTTP/1.0\" 302 234\n> > > 128.244.68.121 - - [15/Jun/2001:14:52:58 -0500] \"GET /index.html HTTP/1.0\"\n> > > 304 -\n> > > 128.244.68.121 - - [15/Jun/2001:14:52:58 -0500] \"GET /tomcat.gif HTTP/1.0\"\n> > > 304 -\n> > > 128.244.68.121 - - [15/Jun/2001:14:52:58 -0500] \"GET /tomcat-power.gif\n> > > HTTP/1.0\" 304 \\\n> > > -\n> > > 128.244.68.121 - - [15/Jun/2001:14:53:04 -0500] \"GET /~rbevans HTTP/1.0\"\n> > > 404 195\n> > >\n> > >\n> > > Hopefully I'm not confusing things.\n> > >\n> > > Bob\n> > >\n> > >\n> > > At 11:37 AM 6/15/2001 -0700, you wrote:\n> > > >On Fri, 15 Jun 2001, Robert Evans wrote:\n> > > >\n> > > > > Craig,\n> > > > >\n> > > > > Thanks!  I missed that in the docs when I first went through them.  I\n> > > > found\n> > > > > the documentation on this feature, and now am wondering how much\n> > you know\n> > > > > about it.\n> > > > >\n> > > > > On the system I am forced to configure this on, the users accounts are\n> > > > > mounted from a central nfs server.  This means that they do not have\n> > > > > entries in the /etc/passwd file, which I gather from the\n> > documentation is\n> > > > > used to generate the default Contexts.  It appears there is a\n> > \"homeBase\"\n> > > > > option which allows you to specify the location of a series of home\n> > > > > directories.  Do you know if I can use \"/home\", as the students\n> > > > directories\n> > > > > are automounted there?  Or do the home directories have to be\n> > hardmounted?\n> > > > >\n> > > > > I'm experimenting with this option on a test server I have, and haven't\n> > > > > gotten it to work with a test case yet...If I get something working\n> > I'll\n> > > > > let you know.\n> > > > >\n> > > >\n> > > >Well, since you're willing to be a bleeding edge pioneer (and since I\n> > > >wrote this stuff), I'd *better* be willing to help!  :-)\n> > > >\n> > > >If the users do not have entries in /etc/passwd, you are going to want to\n> > > >use an alternative strategy to tell Tomcat what directories to look\n> > > >at.  Try something like this:\n> > > >\n> > > >   <Listener className=\"org.apache.catalina.startup.UserConfig\"\n> > > >        directory_name=\"public_html\"\n> > > >              homeBase=\"/home\"\n> > > >             userClass=\"org.apache.catalina.startup.HomesUserDatabase\"/>\n> > > >\n> > > >The key difference is that we're using a different \"userClass\" attribute\n> > > >-- the one that says \"mount all the user directories found in the\n> > > >directory named by the 'homeBase' attribute\" instead of the one that says\n> > > >\"mount all the user directories found in /etc/passwd\".\n> > > >\n> > > >Note also that, currently, Tomcat requires a user's public_html directory\n> > > >to have a WEB-INF/web.xml file in it before it's recognized as a web\n> > > >app.  That requirement is subject to negotiation (or perhaps even a\n> > > >configuration flag) as far as I'm concerned, but it seemed correct when I\n> > > >originally wrote this code.\n> > > >\n> > > >And, of course, the operating system username under which you're running\n> > > >Tomcat must have read access to the contents of the users's public_html\n> > > >directories, and all the directories above them in the filesystem.\n> > > >\n> > > > > A very appreciative,\n> > > > >\n> > > > > Bob Evans\n> > > > >\n> > > >\n> > > >Craig\n> > > >\n> > > >\n> > > > >\n> > > > > At 10:56 AM 6/14/2001 -0700, you wrote:\n> > > > >\n> > > > >\n> > > > > >On Thu, 14 Jun 2001, Robert Evans wrote:\n> > > > > >\n> > > > > > > Greetings,\n> > > > > > >\n> > > > > > > I am in the process of configuring Tomcat to be used with several\n> > > > classes\n> > > > > > > at the Johns Hopkins University.  I would like to have each\n> > student\n> > > > have\n> > > > > > > their own webapp in their public_html directory.\n> > > > > > >\n> > > > > > > I tried Tomcat 3.2.1, but couldn't get the security policy to work\n> > > > right\n> > > > > > > (all jsp pages kept wanting to use the examples directory?)\n> > > > > > >\n> > > > > > > I am trying Tomcat 4.0B5, and was going to use soft links in the\n> > > > webapps\n> > > > > > > directory to point to each students public_html directory.  The\n> > only\n> > > > > > > problem is that Tomcat doesn't seem to want to follow the soft\n> > > > > > links.  If I\n> > > > > > > make a real directory in the webapps dir, everything works fine,\n> > > > but if I\n> > > > > > > try to use a soft linked one, I get:\n> > > > > > >\n> > > > > > >       Http Status 503 - This application is not currently available\n> > > > > > >\n> > > > > > >       The requested service(This application is not currently\n> > > > > > available) is\n> > > > > > > not currently available\n> > > > > > >\n> > > > > > > Any suggestions/help would be greatly appreciated.  If I don't\n> > get this\n> > > > > > > working within a week, it'll be back to the Java Web Server.  :-(\n> > > > > > >\n> > > > > > > Bob\n> > > > > > >\n> > > > > > >\n> > > > > >\n> > > > > >Not following symlinks is an unfortunate side effect of the processing\n> > > > > >that Tomcat has to do to avoid directory name spoofing (/WeB-iNf)\n> > on case\n> > > > > >insensitive platforms).  :-(\n> > > > > >\n> > > > > >For Tomcat 4, have you tried using the \"user home directories\"\n> > option, to\n> > > > > >automatically recognize each student's public_html\n> > directory?  This will\n> > > > > >save you having to configure them all into server.xml:\n> > > > > >\n> > > > > >     <Host name=\"localhost\" ...>\n> > > > > >\n> > > > > >       ...\n> > > > > >\n> > > > > >       <Listener className=\"org.apache.catalina.startup.UserConfig\"\n> > > > > >             directoryName=\"public_html\"\n> > > > > >\n> > > > userClass=\"org.apache.catalina.startup.PasswdUserDatabase\"/>\n> > > > > >\n> > > > > >       ...\n> > > > > >\n> > > > > >     </Host>\n> > > > > >\n> > > > > >Craig McClanahan\n> > > > >\n> > > > >\n> > > > >\n> > >\n> > >\n> > >\n>\n>", "id": 4217, "time": "2001-08-01T09:43:33Z", "creator": "rbe@akane.jhuapl.edu", "creation_time": "2001-08-01T09:43:33Z", "is_private": false}, {"count": 1, "tags": [], "creator": "craig.mcclanahan@sun.com", "attachment_id": null, "text": "Fixed in nightly build 20010905.\n\nAlso, relaxed the rules for recognizing public_html directories to simply\ntesting that the directory exists and is readable.  Previously, it required that\na WEB-INF/web.xml file be present as well, but this is overkill for users who\nare publishing static web sites under their user directories.\n\nI also verified that it works when the \"public_html\" directory is a symbolic\nlink.\n", "id": 5101, "time": "2001-09-04T17:35:54Z", "bug_id": 2949, "creation_time": "2001-09-04T17:35:54Z", "is_private": false}]