[{"count": 0, "tags": [], "creator": "pgenz@hotmail.com", "attachment_id": null, "id": 51658, "time": "2004-02-03T15:19:26Z", "bug_id": 26632, "creation_time": "2004-02-03T15:19:26Z", "is_private": false, "text": "tried <rexec server=\"172.19.21.215\"  userid=\"username\" password=\"password\" \ncommand=\"ls -la\" />\n\nit just hangs. I can run rexec from the command line to this ip address and \nothers and rexec works. The only thing is that I must supply a password after I \nexecute rexec. I think the password is the problem in ant."}, {"count": 1, "tags": [], "bug_id": 26632, "attachment_id": null, "id": 52245, "time": "2004-02-13T14:27:34Z", "creator": "rooneyp1976@yahoo.com", "creation_time": "2004-02-13T14:27:34Z", "is_private": false, "text": "looks like another person is having this problem also : \nhttp://216.239.37.104/search?q=cache:mQ9-\nQr9UeyIJ:java2.5341.com/msg/48437.html+rexec+hangs&hl=en&lr=lang_en&ie=UTF-8\n\nor just search google for \"rexec hangs\" \n\nis it just me or are the remote commands giving trouble?"}, {"id": 52246, "tags": [], "bug_id": 26632, "attachment_id": null, "count": 2, "text": "think I've worked out what's going on here. Ant's rexec task tries to login \nusing this code : \n    /**\n     *  Process a 'typical' login.  If it differs, use the read\n     *  and write tasks explicitely\n     */\n    private void login() {\n        if (addCarriageReturn) {\n            rexec.sendString(\"\\n\", true);\n        }\n        rexec.waitForString(\"ogin:\");\n        rexec.sendString(userid, true);\n        rexec.waitForString(\"assword:\");\n        rexec.sendString(password, false);\n    }\n\n\nIt is expecting the username and password prompts to be 'Login' & 'Password'. \nI am running REXECD/NT from denicomp.com on a win2k server as win2k doesn't \nship with a RexecD service. Its rexec login is in this format \n\nName (a.machine.com:auser):  myusername\nPassword (a.machine.com:auser): mypassword\n\nSo this is what's causing the hang.\n\nTo solve this I believe we need to explicitly use <read> & <writes> within our \n<rexec> task (as per the javadoc comments).\n\n\nOne point I might make is that the rexecClient provided by commons-net logs on \nin the following independant manner\n\n        _output_.write(username.getBytes());\n        _output_.write('\\0');\n        _output_.write(password.getBytes());\n        _output_.write('\\0');\n        _output_.write(command.getBytes());\n        _output_.write('\\0');\n        _output_.flush();\n\nI've used the example in net-commons : /net-commons/src/java/examples/rexec.java\n successfully with my rexecD on a win2k server\n", "time": "2004-02-13T15:49:27Z", "creator": "rooneyp1976@yahoo.com", "creation_time": "2004-02-13T15:49:27Z", "is_private": false}, {"count": 3, "tags": [], "creator": "emichele@gmail.com", "text": "I would suggest to replace the login helper method invocation in class\nRExecTask (implementation dependent) with a direct invocation to method\nRExecClient.rexec() which performs, as pointed out by Paul Rooney, a\nportable authentication, according to the rexec standard protocol as\ndescribed in in.rexecd(1M).", "id": 70305, "attachment_id": null, "bug_id": 26632, "creation_time": "2005-02-01T16:50:49Z", "time": "2005-02-01T16:50:49Z", "is_private": false}, {"count": 4, "text": "The main problem with using rexec() is that we provide support for more than one\ncommand using nested read/write elements - though I don't have the slightest idea\nwhether this is actually going to work at all.\n\nI've changed the code to use the rexec call in the (common, I guess) situation\nthat username, password and command have been specified and no additional\nread/write elements are there.\n\nI've also fixed the docs that (wrongly) stated username, password and command were\nrequired.  But I've also noted that this probably is the best way to use the task.\n\nReading through the code, I don't understand how the command attribute does\nanything.  Does it actually work for anybody?\n\nAnyway, could you please try nightly build 2005-03-15 or later to see whether\nit works now?\n\nThis fix still needs to get merged into Ant 1.6.3, which I won't do unless I\nget confirmation that it actually works (I lack the environment to test it).", "bug_id": 26632, "is_private": false, "id": 72328, "time": "2005-03-14T09:56:59Z", "creator": "bodewig@apache.org", "creation_time": "2005-03-14T09:56:59Z", "tags": [], "attachment_id": null}, {"count": 5, "text": "As mentioned by you, I downloaded the nightly build that was uploaded today \ni.e. commons-net-20050329.zip and tried to use it for rexec via ant. But still \nAnt just hangs waiting for some thing. Am i doing the wrong thing? or the bug \nstill needs to be fixed ?\n\nThanks\nAnumeh Andharmule\n\n(In reply to comment #4)\n> The main problem with using rexec() is that we provide support for more than \none\n> command using nested read/write elements - though I don't have the slightest \nidea\n> whether this is actually going to work at all.\n> I've changed the code to use the rexec call in the (common, I guess) situation\n> that username, password and command have been specified and no additional\n> read/write elements are there.\n> I've also fixed the docs that (wrongly) stated username, password and command \nwere\n> required.  But I've also noted that this probably is the best way to use the \ntask.\n> Reading through the code, I don't understand how the command attribute does\n> anything.  Does it actually work for anybody?\n> Anyway, could you please try nightly build 2005-03-15 or later to see whether\n> it works now?\n> This fix still needs to get merged into Ant 1.6.3, which I won't do unless I\n> get confirmation that it actually works (I lack the environment to test it).\n\n", "bug_id": 26632, "is_private": false, "id": 73021, "time": "2005-03-29T22:06:43Z", "creator": "anumeh@yahoo.com", "creation_time": "2005-03-29T22:06:43Z", "tags": [], "attachment_id": null}, {"count": 6, "text": "You need a nightly build of Ant, not commons-net.\n\nSee <http://brutus.apache.org/~nightlybuild/builds/ant/>", "bug_id": 26632, "is_private": false, "id": 73050, "time": "2005-03-30T09:04:25Z", "creator": "bodewig@apache.org", "creation_time": "2005-03-30T09:04:25Z", "tags": [], "attachment_id": null}, {"id": 73112, "tags": [], "creator": "anumeh@yahoo.com", "is_private": false, "count": 7, "text": "As mentioned, I downloaded the alpha release apache-ant-1.7alpha-bin.zip (29th \nMarch 2005) but still the rexec is hanging. I tried other releases also but \ndidn't succeed. Then I downloaded the source code and traced into the Ant \npackage. I found that the RExecTask.java file contains the same logic as it was \ncontaining before! It is hanging exactly in the waitForString() function at \nline 180 in the while loop. \n\nCan you please tell me if i m wrong or right? and whats the next thing to do?\n\nThanks\nAnumeh Andharmule\n\n\n\n(In reply to comment #6)\n> You need a nightly build of Ant, not commons-net.\n> See <http://brutus.apache.org/~nightlybuild/builds/ant/>\n\n(In reply to comment #6)\n> You need a nightly build of Ant, not commons-net.\n> See <http://brutus.apache.org/~nightlybuild/builds/ant/>\n\n", "time": "2005-03-30T22:29:58Z", "bug_id": 26632, "creation_time": "2005-03-30T22:29:58Z", "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 26632, "is_private": false, "text": "Which source did you grab?  The source corresponding to 1.7-alpha (i.e. CVS HEAD)\ndoes not have a while loop in or around line 180.\n\nThe task will still use the old logic if you use nested <read> or <write> elements,\nit will only use the new logic if you use the command attribute.\n\nWe can't use the proposed for the <read>/<write> case since it only supports\nrunning a single command and closing the connection after that.", "id": 73139, "time": "2005-03-31T08:56:50Z", "creator": "bodewig@apache.org", "creation_time": "2005-03-31T08:56:50Z", "attachment_id": null}, {"id": 73152, "tags": [], "creator": "anumeh@yahoo.com", "is_private": false, "count": 9, "text": "OK. Here is what I did:\n\n1) I went to the following site:\nhttp://brutus.apache.org/~nightlybuild/builds/ant/20050329/src/\n\n2) I downloaded the apache-ant-1.7alpha-src.zip file. After unzipping it, i \nfound that RExecTask.java has the while loop exactly at line 181 because of \nwhich rexec is hanging.\n\nAm I wrong ? Please let me know\nThanks\nAnumeh andharmule\n\n\n\n(In reply to comment #8)\n> Which source did you grab?  The source corresponding to 1.7-alpha (i.e. CVS \nHEAD)\n> does not have a while loop in or around line 180.\n> The task will still use the old logic if you use nested <read> or <write> \nelements,\n> it will only use the new logic if you use the command attribute.\n> We can't use the proposed for the <read>/<write> case since it only supports\n> running a single command and closing the connection after that.\n\n", "time": "2005-03-31T16:18:33Z", "bug_id": 26632, "creation_time": "2005-03-31T16:18:33Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 26632, "attachment_id": null, "id": 73154, "time": "2005-03-31T16:58:42Z", "creator": "g-ole@online.no", "creation_time": "2005-03-31T16:58:42Z", "is_private": false, "text": "I had the same problem with the nightly build until I discovered that the \nbinaries for ant-commons-net.jar were the old version! When I rebuilt this \nlibrary, rexec worked like I charm (at least when I run it towards an OS/2 \nclient!(?))"}, {"count": 11, "text": "Ant#s nightly build system was broken, I'm working on it.  In fact it hasn't\npicked up changes since a rather long time.\n", "bug_id": 26632, "is_private": false, "id": 73185, "time": "2005-04-01T15:42:37Z", "creator": "bodewig@apache.org", "creation_time": "2005-04-01T15:42:37Z", "tags": [], "attachment_id": null}, {"count": 12, "text": "The 2005-04-01 version should work, sorry.", "bug_id": 26632, "is_private": false, "id": 73186, "time": "2005-04-01T15:48:09Z", "creator": "bodewig@apache.org", "creation_time": "2005-04-01T15:48:09Z", "tags": [], "attachment_id": null}]