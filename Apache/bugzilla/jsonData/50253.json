[{"count": 0, "tags": [], "creator": "spepping@apache.org", "attachment_id": null, "is_private": false, "id": 141625, "time": "2010-11-11T08:24:31Z", "bug_id": 50253, "creation_time": "2010-11-11T08:24:31Z", "text": "In FOP's junit-transcoder tests in headless mode a HeadlessException is thrown with this stack trace:\n\n    [junit] No X11 DISPLAY variable was set, but this program performed an\noperation which requires it.\n    [junit] java.awt.HeadlessException: \n    [junit] No X11 DISPLAY variable was set, but this program performed an\noperation which requires it.\n    [junit]     at\nsun.java2d.HeadlessGraphicsEnvironment.getDefaultScreenDevice(HeadlessGraphicsEnvironment.java:82)\n    [junit]     at\norg.apache.xmlgraphics.java2d.ps.PSGraphics2D.getDeviceConfiguration(PSGraphics2D.java:824)\n    [junit]     at\norg.apache.batik.ext.awt.image.GraphicsUtil.getDestination(Unknown Source)\n\n...\n\n    [junit]     at\norg.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(Unknown Source)\n    [junit]     at org.apache.batik.gvt.AbstractGraphicsNode.paint(Unknown\nSource)\n    [junit]     at\norg.apache.fop.render.ps.AbstractPSTranscoder.transcode(AbstractPSTranscoder.java:154)\n\nThe exception is due to the method PSGraphics2D.getDeviceConfiguration, which calls GraphicsEnvironment.getDefaultScreenDevice. A solution would be to construct (in headless mode) a new PSGraphicsConfiguration object similar to PDFGraphics2D.getDeviceConfiguration."}, {"count": 1, "attachment_id": null, "bug_id": 50253, "text": "Should be fixed with http://svn.apache.org/viewvc?rev=1034385&view=rev but I haven't actually tested if the HeadlessException went away, only that the PS output still works in general.", "id": 141657, "time": "2010-11-12T08:08:10Z", "creator": "jeremias@apache.org", "creation_time": "2010-11-12T08:08:10Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 50253, "attachment_id": null, "text": "Tested that the change does remove the HeadlessException. I will add xmlgraphics-commons-1.5svn.jar to fop.", "id": 141759, "time": "2010-11-17T07:26:15Z", "creator": "spepping@apache.org", "creation_time": "2010-11-17T07:26:15Z", "is_private": false}]