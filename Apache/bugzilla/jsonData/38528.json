[{"count": 0, "tags": [], "creator": "postmaster@t-hosting.hu", "attachment_id": null, "id": 85456, "time": "2006-02-06T11:23:12Z", "bug_id": 38528, "creation_time": "2006-02-06T11:23:12Z", "is_private": false, "text": "I'm not sure if it is a real bug. Even if it isn't it is a documentation\ndeficiency. I've upgraded from 2.0.x to 2.2.0 and httpd complained that my cert\nis a cacert. It worked with 2.0.x I haven't changed the cert. This change in\nbehavior isn't documented anywhere, at least I couldn't find it.\n\nSo, I generated a separate cert and a cacert to sign with. Now I have three files:\ncert.pem - the server certificate\nkey.pem - the private key fro the certificate\ncacert.pem - the cacert cert.pem signed with\n\nI configured the server according to the docs. If SSLEngine on is set globally\nhttpd doesn't even start and I get no useful logs even with the highest loglevel:\n\n[Thu Feb 02 17:35:06 2006] [info] mod_unique_id: using ip addr 217.20.133.7\n[Thu Feb 02 17:35:07 2006] [info] Init: Seeding PRNG with 0 bytes of entropy\n[Thu Feb 02 17:35:07 2006] [info] Loading certificate & private key of SSL-aware\nserver\n[Thu Feb 02 17:35:07 2006] [debug] ssl_engine_pphrase.c(469): unencrypted RSA\nprivate key - pass phrase not required\n[Thu Feb 02 17:35:07 2006] [info] Init: Generating temporary RSA private keys\n(512/1024 bits)\n[Thu Feb 02 17:35:07 2006] [info] Init: Generating temporary DH parameters\n(512/1024 bits)\n[Thu Feb 02 17:35:07 2006] [debug] ssl_scache_dbm.c(409): Inter-Process Session\nCache (DBM) Expiry: old: 0, new: 0, removed: 0\n[Thu Feb 02 17:35:07 2006] [info] Init: Initializing (virtual) servers for SSL\n[Thu Feb 02 17:35:07 2006] [info] Configuring server for SSL protocol\n[Thu Feb 02 17:35:07 2006] [debug] ssl_engine_init.c(405): Creating new SSL\ncontext (protocols: SSLv2, SSLv3, TLSv1)\n[Thu Feb 02 17:35:07 2006] [debug] ssl_engine_init.c(729): Configuring RSA\nserver certificate\n[Thu Feb 02 17:35:07 2006] [debug] ssl_engine_init.c(768): Configuring RSA\nserver private key \n\nThat's all and if I check now it's not running.\n\nIf I set SSLEngine on only in a VirtualHost block, I get this when trying to\naccess that virtualhost via ssl:\n\n[Thu Feb 02 17:51:21 2006] [debug] prefork.c(991): AcceptMutex: flock (default:\nflock)\n[Thu Feb 02 17:51:25 2006] [error] [client 80.98.231.227] Invalid method in\nrequest \\x80U\\x01\\x03\\x01\n[Thu Feb 02 17:51:25 2006] [error] [client 80.98.231.227] Invalid method in\nrequest \\x80U\\x01\\x03 \n\nI've posted my issue to the Apache webserver users mailig list, but I got no\nanswer. I've posted it to more mailing list and forums, but absolutely got no\nanswer. I googled a lot but found no useful information.\n\nPlease look at this issue to realize whether this is a bug or not. If not please\ndocument the changed behavior since 2.0. My configuration worked fine with 2.0\nbut I'm unable to get this new version to work.\n\nAnyway, I use FreeBSD 5.3 on amd64.\n\nThanks in advance,\n\nGabor Kovesdan"}, {"count": 1, "tags": [], "bug_id": 38528, "attachment_id": null, "id": 85457, "time": "2006-02-06T11:25:20Z", "creator": "postmaster@t-hosting.hu", "creation_time": "2006-02-06T11:25:20Z", "is_private": false, "text": "Btw, I made online the contents of my /usr/local/etc/apache22 directory in a\nbzipped tarball:\n\nhttp://tux.t-hosting.hu/config.bz2\n\nEven the certificates are included, if you want to try to reproduce this."}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 85529, "time": "2006-02-07T14:44:58Z", "bug_id": 38528, "creation_time": "2006-02-07T14:44:58Z", "is_private": false, "text": "This is a configuration error, you're missing missing \"SSLEngine On\".  I'll\nfollow up to your post to users@ to help track down your issue."}, {"count": 3, "tags": [], "creator": "postmaster@t-hosting.hu", "attachment_id": null, "id": 85531, "time": "2006-02-07T15:12:00Z", "bug_id": 38528, "creation_time": "2006-02-07T15:12:00Z", "is_private": false, "text": "(In reply to comment #2)\n> This is a configuration error, you're missing missing \"SSLEngine On\".  I'll\n> follow up to your post to users@ to help track down your issue.\n\nThanks, I replied your answer on the list, but please think about the\ndocumentation issue, too. It should be documented anyway, that Apache 2.2\ndoesn't accept cacerts any more. For users and small companies who don't need a\ntrusted certificate just want to easily secure the connection it is important.\nThanks in advance."}]