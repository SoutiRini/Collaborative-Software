[{"count": 0, "tags": [], "bug_id": 22506, "attachment_id": null, "is_private": false, "id": 42892, "time": "2003-08-18T10:25:12Z", "creator": "vesely@tana.it", "creation_time": "2003-08-18T10:25:12Z", "text": "Hi,\nin an attempt to match typical Debian settings, I had the\nbad idea to use --with-layout. For some reason, \"manualdir\"\nended up blank. Since configure and make were fine, I did\nmake install... oh God!! I whish I never had done it.\n\nIt began writing lines like\n\n  Copying tree ./htdocs/manual -> //\n  chmod: changing permissions of `/proc/1': Operation not permitted\n  chmod: changing permissions of `/proc/2': Operation not permitted\n  ...\n  make[1]: [install-data] Error 123 (ignored)\n\nIt went around all file system doing chmod a+r[x] for each file [directory]\nfound around from the following excerpt in Makefile, where $(manualdir) was\nnot set\n\n\techo \"Copying tree $(TOP)/htdocs/manual -> $(root)/$(manualdir)/\"; \\\n\t(cd $(TOP)/htdocs/manual/ && $(TAR) $(TAROPT) - *) |\\\n\t(cd $(root)$(manualdir)/ && $(TAR) -xf -); \\\n\tfind $(root)$(manualdir)/ -type d -exec chmod a+rx {} \\; ; \\\n\tfind $(root)$(manualdir)/ -type f -print | xargs chmod a+r ; \\\n\nThere was \"manualdir =\" in the installation paths section, which I don't\nthink is a bug by itself, since someone may omit to install manuals. The\ndisaster results from careless usage of find. I will submit a patch in that\nsense.\n\nAlthough I think the diagnosis is clear enough, I will also upload another\ncouple of files with the full configure command line and the layout file\nI used.\n\nCiao\nAle"}, {"count": 1, "tags": [], "creator": "vesely@tana.it", "attachment_id": 7867, "is_private": false, "id": 42893, "time": "2003-08-18T10:27:55Z", "bug_id": 22506, "creation_time": "2003-08-18T10:27:55Z", "text": "Created attachment 7867\nPatch for Makefile.tmpl"}, {"count": 2, "tags": [], "creator": "vesely@tana.it", "attachment_id": 7868, "id": 42894, "time": "2003-08-18T10:31:09Z", "bug_id": 22506, "creation_time": "2003-08-18T10:31:09Z", "is_private": false, "text": "Created attachment 7868\nFull configure command line"}, {"count": 3, "tags": [], "bug_id": 22506, "attachment_id": 7869, "id": 42896, "time": "2003-08-18T10:36:54Z", "creator": "vesely@tana.it", "creation_time": "2003-08-18T10:36:54Z", "is_private": false, "text": "Created attachment 7869\nthe \"../config.layout\" file mentioned in the configure command line"}, {"count": 4, "tags": [], "bug_id": 22506, "is_private": false, "text": "Some comments.\n1) I like the spirit of the patch, I'll review and check that in soon.\n2) Manualdir was blank because you didn't set it. Did you look at the \"Debian\"\nlayout in config.layout? ", "id": 42899, "time": "2003-08-18T10:56:28Z", "creator": "thom@planetarytramp.net", "creation_time": "2003-08-18T10:56:28Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 22506, "attachment_id": null, "id": 42903, "time": "2003-08-18T11:33:23Z", "creator": "vesely@tana.it", "creation_time": "2003-08-18T11:33:23Z", "is_private": false, "text": "> 1) I like the spirit of the patch, I'll review and check that in soon.\n\nFine, I didn't thoroughly test that patch. I set \"critical\" severity\nbecause the effect may have security implications.\n\n> 2) Manualdir was blank because you didn't set it.\n\nYes, I had that layout file from a previous install and didn't\nnotice that manualdirs had been added\n\n> Did you look at the \"Debian\" layout in config.layout?\n\nI couldn't find any such section:\n\n  $ grep '<Layout' ./apache_1.3.28/config.layout\n  <Layout Apache>\n  <Layout GNU>\n  <Layout BinaryDistribution>\n  <Layout Mac OS X Server>\n  <Layout Darwin>\n  <Layout RedHat>\n  <Layout opt>\n  <Layout beos>\n  <Layout SuSE>\n  <Layout BSDI>\n  <Layout Solaris>\n  <Layout FreeBSD>\n  <Layout OpenBSD>\n  <Layout Cygwin>\n"}, {"count": 6, "tags": [], "bug_id": 22506, "attachment_id": null, "is_private": false, "id": 42904, "time": "2003-08-18T11:41:58Z", "creator": "thom@planetarytramp.net", "creation_time": "2003-08-18T11:41:58Z", "text": "Oh, my bad. Thought that was in 1.3 as well. I was a bit confused because I\nfixed the makefile stuff in 2.0 a while ago as well ;-)\n"}]