[{"count": 0, "text": "I want to use Slide as a file server to handle a continuous file transfer \naction, which I need to connect, put file, delete file and disconnect to the \nserver repeatly. When I use a test program to run such action for a night, I \nfind that the Slide server will throw OutOfMemory Error.\nThe Exception is captured as below:\n\nhttp-8080-Processor5, 05-\u0152\u00dc\u0152\u017d-2005 03:22:35, root, PUT, 201 \"Created\", 18000 \nms, /files/TestFile3/TestFile3.dat\n05 May 2005 03:22:58 - \norg.apache.commons.transaction.file.FileResourceManager - EMERGENCY - Fatal \nerror during critical commit/rollback of transaction [B@bf006\nf, setting database to dirty.\n05 May 2005 03:22:58 - \norg.apache.commons.transaction.file.FileResourceManager - EMERGENCY - \njava.lang.OutOfMemoryError\njava.lang.OutOfMemoryError\n05 May 2005 03:22:58 - org.apache.slide.transaction.SlideTransaction - \nWARNING - Commit failure: Resource manager TxContentFileStore at \nstore/content  working o\nn work/content Error code java.lang.OutOfMemoryError\n in Transaction 123117 xid http-8080-Processor19-1115234562203-123117- in \nthread http-8080-Processor19\njava.lang.OutOfMemoryError\n05 May 2005 03:22:58 - org.apache.slide.webdav.method.AbstractWebdavMethod - \nERROR - javax.transaction.HeuristicMixedException\njavax.transaction.HeuristicMixedException\n        at org.apache.slide.transaction.SlideTransaction.commit\n(SlideTransaction.java:332)\n        at org.apache.slide.transaction.SlideTransactionManager.commit\n(SlideTransactionManager.java:186)\n        at org.apache.slide.common.NamespaceAccessTokenImpl.commit\n(NamespaceAccessTokenImpl.java:423)\n        at org.apache.slide.webdav.method.AbstractWebdavMethod.run\n(AbstractWebdavMethod.java:408)\n        at org.apache.slide.webdav.WebdavServlet.service\n(WebdavServlet.java:155)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:237)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n        at org.apache.slide.webdav.filter.LogFilter.doFilter\n(LogFilter.java:141)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:214)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.StandardContextValve.invokeInternal\n(StandardContextValve.java:198)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:152)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:540)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:102)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:137)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:118)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:102)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:109)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:929)\n        at org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:160)\n        at org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:799)\n        at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:705)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:577)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:683)\n        at java.lang.Thread.run(Thread.java:534)\njavax.transaction.HeuristicMixedException\n        at org.apache.slide.transaction.SlideTransaction.commit\n(SlideTransaction.java:332)\n        at org.apache.slide.transaction.SlideTransactionManager.commit\n(SlideTransactionManager.java:186)\n        at org.apache.slide.common.NamespaceAccessTokenImpl.commit\n(NamespaceAccessTokenImpl.java:423)\n        at org.apache.slide.webdav.method.AbstractWebdavMethod.run\n(AbstractWebdavMethod.java:408)\n        at org.apache.slide.webdav.WebdavServlet.service\n(WebdavServlet.java:155)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:237)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n        at org.apache.slide.webdav.filter.LogFilter.doFilter\n(LogFilter.java:141)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:214)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.StandardContextValve.invokeInternal\n(StandardContextValve.java:198)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:152)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:540)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:102)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:137)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:118)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:102)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:109)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:929)\n        at org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:160)\n        at org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:799)\n        at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:705)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:577)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:683)\n        at java.lang.Thread.run(Thread.java:534)\njava.lang.IllegalStateException\n        at org.apache.slide.transaction.SlideTransactionManager.rollback\n(SlideTransactionManager.java:213)\n        at org.apache.slide.common.NamespaceAccessTokenImpl.rollback\n(NamespaceAccessTokenImpl.java:443)\n        at org.apache.slide.webdav.method.AbstractWebdavMethod.run\n(AbstractWebdavMethod.java:429)\n        at org.apache.slide.webdav.WebdavServlet.service\n(WebdavServlet.java:155)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:237)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n        at org.apache.slide.webdav.filter.LogFilter.doFilter\n(LogFilter.java:141)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:186)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:157)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:214)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.StandardContextValve.invokeInternal\n(StandardContextValve.java:198)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:152)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:540)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:102)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:137)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:118)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:102)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:109)\n        at org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:104)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:520)\n        at org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:929)\n        at org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:160)\n        at org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:799)\n        at \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:705)\n        at org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:577)\n        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:683)\n        at java.lang.Thread.run(Thread.java:534)\n05 May 2005 03:22:59 - org.apache.slide.webdav.WebdavServlet - ERROR - \norg.apache.slide.webdav.WebdavException: Internal Server Error\norg.apache.slide.webdav.WebdavException: Internal Server Error\n        at org.apache.slide.webdav.method.AbstractWebdavMethod.run\n(AbstractWebdavMethod.java:424)\n        at org.apache.slide.webdav.WebdavServlet.service\n(WebdavServlet.java:155)\n\nAnd my testing program has a test loop as follows: (I use 8600 as my default \nport)\n \ntry {\n\tint loopCount = 0;\n\tboolean executeResult = true;\n\tHttpURL homeUrl = new HttpURL(\"http://192.168.0.21:8600/slide/\");\n\thomeUrl.setUserinfo(\"root\", \"root\");\n\tWebdavResource res = new WebdavResource(homeUrl);\n\tif(res == null) {\n\t    throw new PerformanceTestException(\"Something is Wrong!\");\n\t}\n\texecuteResult = executeResult & res.mkcolMethod(\"/slide/files/abc/\");\n\tif (executeResult) System.out.println(\"Folder cannot be created.\");\n\texecuteResult = true;\n\twhile (executeResult && loopCount < 86400) {\n\t\tlong thisRunTime = System.currentTimeMillis();\n\t\texecuteResult = executeResult & res.putMethod\n(\"/slide/files/abc/def.dat\", new java.io.File(\"def.dat\"));\n\t\texecuteResult = executeResult & res.deleteMethod\n(\"/slide/files/abc/def.dat\");\n\t\tloopCount++;\n\t\tSystem.out.print(\"\\rloopCount: \" + loopCount + \" \");\n\t\twhile ((System.currentTimeMillis() - thisRunTime) < 1000) {\n\t\t\tThread.sleep(1000 - System.currentTimeMillis() + \nthisRunTime);\n\t\t}\n\t}\n\texecuteResult = executeResult & res.deleteMethod(\"/slide/files/abc/\");\n\tres.close();\n} catch (Throwable t) {\n\tt.printStackTrace();\n}\n\nIn fact I had tested to repeat actions on\nOpen and Close connection only\nMake Collection and delete collection only\nPut file only\nbut I still find somekind like OutOfMemoryError. It seems like that Slide will \neat up some memory for any Transastion-related actions.\n\nMy config for Slide use default config from Slide site.\n<nodestore classname=\"org.apache.slide.store.txfile.TxXMLFileDescriptorsStore\">", "bug_id": 34753, "is_private": false, "id": 74470, "time": "2005-05-05T11:23:06Z", "creator": "cmhocm@gmail.com", "creation_time": "2005-05-05T11:23:06Z", "tags": [], "attachment_id": null}, {"count": 1, "text": "I met the same problem.With none-transaction actions too", "bug_id": 34753, "is_private": false, "id": 86898, "time": "2006-03-16T07:16:47Z", "creator": "chutianxing@hotmail.com", "creation_time": "2006-03-16T07:16:47Z", "tags": [], "attachment_id": null}]