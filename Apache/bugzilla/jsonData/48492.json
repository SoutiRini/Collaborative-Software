[{"count": 0, "tags": [], "bug_id": 48492, "is_private": false, "text": "The response of the including Servlet/JSP is always put after all responses\nof all included Servlets/JSP:\n\nB.jsp\n---------------------------------------------------------\nLine B\n---------------------------------------------------------\n\nABC.jsp\n---------------------------------------------------------\nLine A\n<% RequestDispatcher dispatcher = request.getRequestDispatcher(\"/B.jsp\");\n   dispatcher.include( request, response ); %>\nLine C\n---------------------------------------------------------\n\nExpected Response of ABC.jsp:\n---------------------------------------------------------\nLine A\nLine B\nLine C\n---------------------------------------------------------\n\nActual Response of ABC.jsp:\n---------------------------------------------------------\nLine B\nLine A\nLine C\n---------------------------------------------------------", "id": 133381, "time": "2010-01-06T04:26:31Z", "creator": "mozilla@horz.de", "creation_time": "2010-01-06T04:26:31Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 48492, "is_private": false, "id": 133383, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2010-01-06T06:34:52Z", "time": "2010-01-06T06:34:52Z", "text": "This is as expected. Search the JSP spec for \"flush\". If you need further assistance please ask on the users list."}, {"count": 2, "tags": [], "bug_id": 48492, "is_private": false, "id": 133385, "attachment_id": null, "creator": "mozilla@horz.de", "creation_time": "2010-01-06T07:10:48Z", "time": "2010-01-06T07:10:48Z", "text": "> This is as expected. Search the JSP spec for \"flush\".\nCould you please point out why the actual behaviour should be expected \naccording to the spec?\n\nIMHO, the actual result is NOT expected (cf. JavaTM Servlet Specification, Version 2.5 MR6, p. 61):\n------------------------------------------------------------------------\nSRV.8.3\tThe Include Method\n\nThe include method of the RequestDispatcher interface may be called at\nany time. The target servlet of the include method has access to all\naspects of the request object, but its use of the response object is\nmore limited.\n\nIt can only write information to the ServletOutputStream or Writer of\nthe response object and commit a response by writing content past the\nend of the response buffer, or by explicitly calling the flushBuffer\nmethod of the ServletResponse interface. It cannot set headers [...]\n------------------------------------------------------------------------\n\nIn addition, you may find (on p. 62 of the spec.):\n------------------------------------------------------------------------\nSRV.8.4\tThe Forward Method\n\nThe forward method of the RequestDispatcher interface may be called\nby the calling servlet only when no output has been committed to the\nclient. [...]\n------------------------------------------------------------------------\n\nThese two occurences are the only two near to RequestDispatcher.include().\nCould you please provide a page or section number where to look for?\n\nAnyway, in both cases (includ() or forward()) the target servlet is\nexpected to write to the OutputStream or Writer of the calling servlet.\nHence, if the target servlet calls the flushBuffer method, the output\nof the calling servlet is expected to be appear *before* the output of\nthe target servlet."}, {"count": 3, "tags": [], "bug_id": 48492, "is_private": false, "id": 133386, "attachment_id": null, "creator": "markt@apache.org", "creation_time": "2010-01-06T07:14:12Z", "time": "2010-01-06T07:14:12Z", "text": "Bugzilla is not the correct forum to ask questions about spec interpretation. Please follow my previous advice and read the JSP spec (not the Servlet spec) and if things are still not clear use the users list for further assistance."}]