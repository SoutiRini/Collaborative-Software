[{"count": 0, "tags": [], "creator": "rszalai@aitia.ai", "text": "I've found a strange bug in Batik 1.6.\n\nI want to save a simple pie chart (created with jfreechart) to SVG format.\nWhen I use batik 1.5, everything works fine...\nI got the following result:\n\nhttp://people.inf.elte.hu/robi/svg/test1.svg\n\nWith 1.6 (using the same code and the same jfreechart lib)\nthe result looks interesting:\n\nhttp://people.inf.elte.hu/robi/svg/test2.svg\n\nThe complete code is the following:\n\nBEGIN CODE -------------------------------------------------\n\nimport java.awt.geom.Rectangle2D;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.OutputStreamWriter;\nimport java.io.UnsupportedEncodingException;\nimport java.io.Writer;\n\nimport org.apache.batik.dom.GenericDOMImplementation;\nimport org.apache.batik.svggen.SVGGraphics2D;\nimport org.apache.batik.svggen.SVGGraphics2DIOException;\nimport org.jfree.chart.ChartFactory;\nimport org.jfree.chart.JFreeChart;\nimport org.jfree.data.general.DefaultPieDataset;\nimport org.w3c.dom.DOMImplementation;\nimport org.w3c.dom.Document;\n\n/*\n * Created on 2005.07.05.\n *\n * TODO To change the template for this generated file go to\n * Window - Preferences - Java - Code Style - Code Templates\n */\n\n/**\n * @author rszalai\n *\n * TODO To change the template for this generated type comment go to\n * Window - Preferences - Java - Code Style - Code Templates\n */\npublic class SVGTest1 {\n\n\tpublic static void main(String[] args) throws SVGGraphics2DIOException,\nUnsupportedEncodingException, FileNotFoundException {\n\t\t\n\t\t// Create a Pie dataset...\n\t\tDefaultPieDataset data = new DefaultPieDataset();\n\t\tdata.setValue(\"Category 1\", 43.2);\n\t\tdata.setValue(\"Category 2\", 27.9);\n\t\tdata.setValue(\"Category 3\", 79.5);\n\t\t\n\t\t// Create a Pie chart...\n\t\tJFreeChart chart = ChartFactory.createPieChart(\"Sample Pie Chart\", data, true,\ntrue, false);\n\t\t\n\t\t// Get a DOMImplementation\n\t\tDOMImplementation domImpl = GenericDOMImplementation.getDOMImplementation();\n\t\t\n\t\tDocument document = domImpl.createDocument(null, \"svg\", null);\n\t\t\n\t\tSVGGraphics2D svgGenerator = new SVGGraphics2D(document);\n\t\t\n\t\tchart.draw(svgGenerator, new Rectangle2D.Double(0, 0, 400, 300));\n\t\t\n\t\tboolean useCSS = true;\n\t\t\n\t\tWriter out = new OutputStreamWriter(new FileOutputStream(new\nFile(\"test.svg\")), \"UTF-8\");\n\t\t\n\t\tsvgGenerator.stream(out, useCSS);\n\t\t\n\t}\n}\n\nEND CODE -------------------------------------------------------------", "id": 77091, "time": "2005-07-08T08:43:29Z", "bug_id": 35655, "creation_time": "2005-07-08T08:43:29Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 35655, "attachment_id": 15616, "is_private": false, "id": 77092, "time": "2005-07-08T08:45:16Z", "creator": "rszalai@aitia.ai", "creation_time": "2005-07-08T08:45:16Z", "text": "Created attachment 15616\nThe good result with 1.5"}, {"count": 2, "tags": [], "bug_id": 35655, "attachment_id": 15617, "is_private": false, "id": 77093, "time": "2005-07-08T08:45:48Z", "creator": "rszalai@aitia.ai", "creation_time": "2005-07-08T08:45:48Z", "text": "Created attachment 15617\nThe bad result with 1.6"}, {"count": 3, "tags": [], "creator": "deweese@apache.org", "text": "A Number of bugs have been fixed in the SVN version of Batik\ndealing with arcs with the SVGGraphics2D since the 1.6 release.  \n\nCan you please try the latest version out of SVN and see if the bug \nis still present?", "id": 77099, "time": "2005-07-08T11:28:26Z", "bug_id": 35655, "creation_time": "2005-07-08T11:28:26Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 35655, "attachment_id": null, "text": "Ok, it works well with\nhttp://svn.apache.org/builds/xml-batik/batik-svn-05-08-06.zip", "id": 79132, "time": "2005-08-29T12:57:36Z", "creator": "rszalai@aitia.ai", "creation_time": "2005-08-29T12:57:36Z", "is_private": false}]