[{"count": 0, "tags": [], "text": "I'm using the org.apache.bcel.Repository class to do class hierarchy tests\n(finding out if one class is an instance of another, etc.)  My program uses\nRepository.addClass() to add all of the classes in an analyzed application to\nthe repository.  Some of the classes in the analyzed application extend or\nimplement types in external jar files: for example, java.io.Serializable in the\nrt.jar from the JDK.\n\nThe problem, as far as I can tell, is that\norg.apache.bcel.classfile.JavaClass.getInterfaces() calls loadClass() on its\ninternal org.apache.bcel.util.Repository object to convert interface references\nto the JavaClass objects for those interfaces.  As implemented in\nSyntheticRepository, the loadClass() method ignores all currently loaded\nclasses.  Because the application classes are not part of the runtime CLASSPATH,\nthey are reported as missing.\n\nI will attach a stack trace showing the problem to this bug report.  Note that\nthe class reported as missing (edu.umd.cs.pugh.visitclass.Constants2) is in the\nrepository.\n\nOne thing that seems confusing to me is that the org.apache.bcel.util.Repository\nclass does not have a method which looks in both the internal cache to find a\nclass, and if that fails tries to load the class from an external source.", "attachment_id": null, "id": 35456, "creator": "daveho@cs.umd.edu", "time": "2003-04-17T17:45:21Z", "bug_id": 19122, "creation_time": "2003-04-17T17:45:21Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 5880\nstack trace showing a bug in resolution of a class in the Repository", "is_private": false, "id": 35458, "creator": "daveho@cs.umd.edu", "time": "2003-04-17T17:47:01Z", "bug_id": 19122, "creation_time": "2003-04-17T17:47:01Z", "attachment_id": 5880}, {"count": 2, "text": "Oops, please ignore the first attached file.  That shows failure to resolve a\nclass that is neither in the Repository nor the classpath.  The second attached\nfile is the correct one; it shows a class that is definitely in the Repository.\n If you examine that stack trace, you will see that at no point does BCEL try to\nlook for the class in the Repository.", "bug_id": 19122, "attachment_id": null, "id": 35461, "time": "2003-04-17T17:53:13Z", "creator": "daveho@cs.umd.edu", "creation_time": "2003-04-17T17:53:13Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 19122, "attachment_id": 5881, "id": 35462, "time": "2003-04-17T17:56:41Z", "creator": "daveho@cs.umd.edu", "creation_time": "2003-04-17T17:56:41Z", "is_private": false, "text": "Created attachment 5881\nthis is the CORRECT stack trace showing the problem"}, {"count": 4, "tags": [], "text": "Created attachment 5882\nHere is a simple fix for the problem", "attachment_id": 5882, "bug_id": 19122, "id": 35464, "time": "2003-04-17T18:06:14Z", "creator": "daveho@cs.umd.edu", "creation_time": "2003-04-17T18:06:14Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 19122, "is_private": false, "id": 77357, "attachment_id": null, "creator": "dbrosius@mebigfatguy.com", "creation_time": "2005-07-17T02:36:33Z", "time": "2005-07-17T02:36:33Z", "text": "this patch appears to have been already applied."}]