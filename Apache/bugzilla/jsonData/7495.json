[{"count": 0, "tags": [], "bug_id": 7495, "attachment_id": null, "id": 12352, "time": "2002-03-26T18:54:42Z", "creator": "cwg-apache@deepeddy.com", "creation_time": "2002-03-26T18:54:42Z", "is_private": false, "text": "I'm trying for the first time to use the auth_ldap module and find that it won't\nwork against my ldap database.\n\nThe reason it won't work is that I have references in the database so I can\nvalidate users who are maintained in more than one location.\n\nWhen I attempt to validate a user with auth_ldap, I get this in the log:\n\n[Tue Mar 26 12:32:54 2002] [error] [client 10.1.2.1] Search must return exactly\n1 entry; found 6 entries for search (&(objectclass=vircioUser)(uid=test)): URI /\n\nIf I do the same query by hand, I get this:\n\n[root@deepeddy html]# ldapsearch -x '(&(objectclass=vircioUser)(uid=test))'\nversion: 2\n\n#\n# filter: (&(objectclass=vircioUser)(uid=test))\n# requesting: ALL\n#\n\n# search reference\nref: ldap://10.1.2.1/ou=hosts,o=vircio,c=US\n\n# search reference\nref: ldap://10.1.2.1/ou=group,o=vircio,c=US\n\n# search reference\nref: ldap://10.1.2.1/ou=services,o=vircio,c=US\n\n# search reference\nref: ldap://10.1.2.1/ou=people,o=vircio,c=US\n\n# search reference\nref: ldap://10.1.2.1/ou=networks,o=vircio,c=US\n\n# search reference\nref: ldap://10.1.2.1/ou=domains,o=vircio,c=US\n\n# search reference\nref: ldap://10.1.2.1/ou=protocols,o=vircio,c=US\n\n# search reference\nref: ldap://10.1.2.1/ou=rpc,o=vircio,c=US\n\n# test, People, deepeddy, com\ndn: uid=test,ou=People,dc=deepeddy,dc=com\nloginShell: /bin/bash\nuid: test\nuidNumber: 511\ngidNumber: 100\nhomeDirectory: /home/test\nrid: 5e7\nqmailGID: 100\nqmailUID: 511\naccountStatus: active\nmailMessageStore: ./.Maildir/\nmail: test@deepeddy.com\nmailForwardingAddress: cwg-test@deepeddy.com\ndeliveryMode: normal\nmailAlternateAddress: testuser@deepeddy.com\nsn: Test\nobjectClass: account\nobjectClass: posixAccount\nobjectClass: shadowAccount\nobjectClass: sambaAccount\nobjectClass: qmailUser\nobjectClass: vircioUser\nobjectClass: inetOrgPerson\nobjectClass: organizationalPerson\nobjectClass: person\ngecos: Joe Test\ncn: Joe Test\ngivenName: Joe\nntPassword: <censored>\nuserPassword:: <censored>\nlmPassword: <censored>\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 10\n# numEntries: 1\n\nor, if I follow referrals, this:\n\n[root@deepeddy html]# ldapsearch -xC '(&(objectclass=vircioUser)(uid=test))'\nversion: 2\n\n#\n# filter: (&(objectclass=vircioUser)(uid=test))\n# requesting: ALL\n#\n\n# test, People, deepeddy, com\ndn: uid=test,ou=People,dc=deepeddy,dc=com\nloginShell: /bin/bash\nuid: test\nuidNumber: 511\ngidNumber: 100\nhomeDirectory: /home/test\nrid: 5e7\nqmailGID: 100\nqmailUID: 511\naccountStatus: active\nmailMessageStore: ./.Maildir/\nmail: test@deepeddy.com\nmailForwardingAddress: cwg-test@deepeddy.com\ndeliveryMode: normal\nmailAlternateAddress: testuser@deepeddy.com\nsn: Test\nobjectClass: account\nobjectClass: posixAccount\nobjectClass: shadowAccount\nobjectClass: sambaAccount\nobjectClass: qmailUser\nobjectClass: vircioUser\nobjectClass: inetOrgPerson\nobjectClass: organizationalPerson\nobjectClass: person\ngecos: Joe Test\ncn: Joe Test\ngivenName: Joe\nntPassword: <censored>\nuserPassword:: <censored>\nlmPassword: <censored>\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 2\n# numEntries: 1\n\nI'd be happy if there were a way to simply follow references when doing the\nquery."}, {"count": 1, "tags": [], "creator": "slive@apache.org", "attachment_id": null, "text": "I'm sorry, but since we don't distribute mod_auth_ldap for apache 1.3,\nwe really can't help with problems.  Please contact the distributer of\nthe ldap module.\nThanks for using Apache!", "id": 12353, "time": "2002-03-26T18:57:32Z", "bug_id": 7495, "creation_time": "2002-03-26T18:57:32Z", "is_private": false}]