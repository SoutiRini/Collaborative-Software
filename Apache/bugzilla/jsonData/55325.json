[{"count": 0, "tags": [], "text": "Created attachment 30645\nJtl file\n\nHi,\n\nI am using WebService(SOAP) requests to load test a web service for 400 users and duration of 5 minutes.On starting the test,after some time the average column in the aggregate report starts showing negative value.The response time increases and turns negative.\n\nI have attached the jtl file.\n\nPlease provide a solution on how to get rid of it.\n\nThanks,\nUddi", "is_private": false, "id": 168891, "creator": "uddirulz@gmail.com", "time": "2013-07-29T09:55:32Z", "bug_id": 55325, "creation_time": "2013-07-29T09:55:32Z", "attachment_id": 30645}, {"count": 1, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "It seems you are using a third party plugin.\nCould you try without it and with last version 2.9 of JMeter ?\nThank you", "id": 168892, "time": "2013-07-29T10:03:31Z", "bug_id": 55325, "creation_time": "2013-07-29T10:03:31Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 55325, "attachment_id": null, "is_private": false, "id": 168893, "time": "2013-07-29T10:13:48Z", "creator": "uddirulz@gmail.com", "creation_time": "2013-07-29T10:13:48Z", "text": "I have added jmeter plugin 1.1.0.\nLatest version is also giving the same issue.Can you provide a solution?\nThanks"}, {"count": 3, "tags": [], "bug_id": 55325, "attachment_id": null, "text": "Thanks but that's not what was required which is:\n- upgrade to jmeter 2.9\n- remove jmeter-plugins\n\nThanks", "id": 168897, "time": "2013-07-29T10:33:05Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-07-29T10:33:05Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 55325, "attachment_id": null, "text": "I have upgraded to Jmeter 2.9.And removed the additional plugins. But the matter still persists.\nAfter some time negative values are getting generated in the aggregate report.\nThanks", "id": 168898, "time": "2013-07-29T10:52:48Z", "creator": "uddirulz@gmail.com", "creation_time": "2013-07-29T10:52:48Z", "is_private": false}, {"count": 5, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "Hello,\nCan you attach jmeter.log file ?\nAre you using distributed testing ?\n\nThanks", "id": 168902, "time": "2013-07-29T12:13:53Z", "bug_id": 55325, "creation_time": "2013-07-29T12:13:53Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 55325, "attachment_id": null, "text": "The attached JTL file shows that the elapsed times start out OK, but after a certain point (Line 1058) all of them become negative.\n\nIt also shows that the test seems to be using the 3rd party Stepping Thread Group.\nWhether or not that is the cause is not clear at present, but it's certainly a possibility.\n\nIf you can provide a simple test case that uses standard JMeter code only, that will be a lot easier to investigate.", "id": 168907, "time": "2013-07-29T14:05:58Z", "creator": "sebb@apache.org", "creation_time": "2013-07-29T14:05:58Z", "is_private": false}, {"count": 7, "tags": [], "creator": "sebb@apache.org", "text": "Sorry, forgot to say: the negative value in the Aggregate Report is only the symptom of the problem.\n\nThe actual problem is that some elapsed times are negative.", "id": 168908, "time": "2013-07-29T14:08:40Z", "bug_id": 55325, "creation_time": "2013-07-29T14:08:40Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 55325, "attachment_id": null, "is_private": false, "id": 168919, "time": "2013-07-29T17:34:45Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2013-07-29T17:34:45Z", "text": "I haven't looked at the code, but could it be that the clock on the system was set back? For instance on some virtualizations the clock can jump quite a bit during normal operations, because simulating CPU interrupts is too expensive and NTP only adjusts small clock jitter. So if the clock gets out of sync by too much an external apparatus often lets the clock jump to the correct time.\n\nIs this system virtualized? If not, does it use NTP successfully?"}, {"count": 9, "tags": [], "text": "I don't think a changed clock could affect more than a few samples, because the time is refetched per sample. Unless all the negative samples started before the clock was reset, which seems unlikely as the negative times started at 04:28:17 and lasted until the end at 04:31:31.\n\nBut there is another oddity in the elapsed times - they seem to get bigger and bigger, starting at 40308 and reaching 755182 just before the negative times start. That's a ratio of about 15:1 which is very strange.\n\nIt might just possibly be worth trying disabling the nano-second time resolution by setting the JMeter property:\n\nsampleresult.useNanoTime=false\n\nI suppose if the nano-second clock is very badly behaved it might cause some issues, but I'm not sure how the negative times can come about.", "is_private": false, "id": 168925, "creator": "sebb@apache.org", "time": "2013-07-29T20:14:36Z", "bug_id": 55325, "creation_time": "2013-07-29T20:14:36Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 55325, "is_private": false, "text": "(In reply to Sebb from comment #9)\n\n> It might just possibly be worth trying disabling the nano-second time\n> resolution by setting the JMeter property:\n> \n> sampleresult.useNanoTime=false\n> \n> I suppose if the nano-second clock is very badly behaved it might cause some\n> issues, but I'm not sure how the negative times can come about.\n\nThere are some indications that the nano second timers can be problematic:\n\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6458294\nhttp://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6440250\n\nand an article about how it's supposed to work:\n\nhttps://blogs.oracle.com/dholmes/entry/inside_the_hotspot_vm_clocks\n\nSome of this indicates that on Windows XP before SP2 a CPU local counter is used that is not synchronized between cores and can vary in frequency between cores due to power management. So when threads are switched between cores bad things can happen. This specific problem should have been fixed in Windows XP SP 2.\n\nMeasuring time is really something complicated :(", "id": 168926, "time": "2013-07-29T20:55:52Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2013-07-29T20:55:52Z", "attachment_id": null}, {"count": 11, "tags": [], "creator": "sebb@apache.org", "text": "Yes, there may be issues with nanotime on specific systems. \nBut if it were a general problem I would expect a lot more complaints.\n\nWhen using nanotime, JMeter regularly (default every 5s) recalculates its offset from systemTime, so even if the nanotimer is static it should not behave as we are seeing.\n\nAlso, the start time is calaculated using the same clock type, and the start time appears to be OK in the result file - it is incrementing normally.\n\nIt's looking much more like a buggy 3rd party sampler.", "id": 168929, "time": "2013-07-29T23:23:50Z", "bug_id": 55325, "creation_time": "2013-07-29T23:23:50Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "text": "I am connecting to a remote desktop and running the test there. I have not seen the clock getting affected as such.Running the test even with the simple thread group is giving the same negative values.\nDont know what is the issue!! :(", "is_private": false, "id": 168933, "creator": "uddirulz@gmail.com", "time": "2013-07-30T06:04:00Z", "bug_id": 55325, "creation_time": "2013-07-30T06:04:00Z", "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 55325, "text": "Have you tried setting the JMeter property\n\nsampleresult.useNanoTime=false\n\non the host where the test runs?\n\nCan you provide a copy of the jmeter.log file? From both server and client please.\nYou may need to redact it for sensitive information (server names etc.)\n\nCan you provide the JMX file you use?\nAgain, redact any private settings first.\n\nAlso, try running the test locally, not via client-server mode.", "id": 168941, "time": "2013-07-30T08:48:59Z", "creator": "sebb@apache.org", "creation_time": "2013-07-30T08:48:59Z", "is_private": false, "attachment_id": null}, {"count": 14, "attachment_id": null, "creator": "p.mouawad@ubik-ingenierie.com", "text": "*** Bug 55337 has been marked as a duplicate of this bug. ***", "id": 168997, "time": "2013-08-01T09:23:12Z", "bug_id": 55325, "creation_time": "2013-08-01T09:23:12Z", "tags": [], "is_private": false}, {"count": 15, "tags": [], "creator": "p.mouawad@ubik-ingenierie.com", "text": "*** Bug 55337 has been marked as a duplicate of this bug. ***", "id": 169003, "time": "2013-08-01T09:40:21Z", "bug_id": 55325, "creation_time": "2013-08-01T09:40:21Z", "is_private": false, "attachment_id": null}, {"count": 16, "tags": [], "bug_id": 55325, "text": "Can you provide your Test Plan and also generated JTL without Third party plugin ?\n\nThis will help investigation.\nAlso did you try setting this in user.properties:\n\nsampleresult.useNanoTime=false", "id": 169010, "time": "2013-08-01T10:20:32Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2013-08-01T10:20:32Z", "is_private": false, "attachment_id": null}, {"count": 17, "tags": [], "bug_id": 55325, "text": "Created attachment 30672\nThe jmx file of the test", "id": 169115, "time": "2013-08-05T09:47:58Z", "creator": "uddirulz@gmail.com", "creation_time": "2013-08-05T09:47:58Z", "is_private": false, "attachment_id": 30672}, {"count": 18, "tags": [], "creator": "uddirulz@gmail.com", "text": "Created attachment 30673\nThe jtl file without ant 3rd party plugins", "id": 169116, "time": "2013-08-05T09:48:49Z", "bug_id": 55325, "creation_time": "2013-08-05T09:48:49Z", "is_private": false, "attachment_id": 30673}, {"count": 19, "tags": [], "bug_id": 55325, "text": "I have attached the jmx file and the jtl file without any 3rd party plugins. -ve results are still persisting.\nAnd i have searched for sampleresult.useNanoTime=false in the properties file but couldnt find any such thing. :(", "id": 169117, "time": "2013-08-05T09:51:26Z", "creator": "uddirulz@gmail.com", "creation_time": "2013-08-05T09:51:26Z", "is_private": false, "attachment_id": null}, {"count": 20, "tags": [], "creator": "uddirulz@gmail.com", "text": "Created attachment 30674\nThe jmx file of the test", "id": 169119, "time": "2013-08-05T09:59:31Z", "bug_id": 55325, "creation_time": "2013-08-05T09:59:31Z", "is_private": false, "attachment_id": 30674}, {"count": 21, "attachment_id": null, "creator": "sebb@apache.org", "is_private": false, "id": 169147, "time": "2013-08-05T18:18:25Z", "bug_id": 55325, "creation_time": "2013-08-05T18:18:25Z", "tags": [], "text": "The JTL file still does not appear to correspond with the JMX file.\nThe JMX file contains more samplers than there are samples in the JTL file.\n\nAlso, we need the jmeter.log file that corresponds with the test run.\n\nThe Test Plan itself has lots of unusual features (though these should not cause the issue):\n- a loop count of 1 with a thread count of 400 won't produce useful test results\n- the Transaction Controllers only have a single child sampler, so they don't do anything useful.\n- the BeanShell pre-processor concatenates strings multiple times.\n\nI suggest you try running the test with far fewer threads. It looks like the server is being overwhelmed with requests, otherwise why are the responses taking longer and longer?"}, {"count": 22, "tags": [], "bug_id": 55325, "attachment_id": null, "is_private": false, "id": 169164, "time": "2013-08-06T05:46:47Z", "creator": "uddirulz@gmail.com", "creation_time": "2013-08-06T05:46:47Z", "text": "True that the server is getting pent up with requests.I have tried with fewer threads.Its working fine.But my requirement is to test with large no. of threads.\nOther samplers present in the jmx file r not getting executed in the specified duration of the test run so they are not present in the jtl file.\nMy question is even if the server is overwhelmed with requests why will negative response time come?"}, {"count": 23, "tags": [], "bug_id": 55325, "text": "(In reply to uddirulz from comment #22)\n> True that the server is getting pent up with requests.I have tried with\n> fewer threads.Its working fine.But my requirement is to test with large no.\n> of threads.\n\nIn that case, maybe try with two JMeter instances, each with half the load.\nOr three, etc.\n\nPerhaps try disabling the samplers that don't actually get run.\n\nAlso try removing the unnecessary Transaction Controllers.\n\n> Other samplers present in the jmx file r not getting executed in the\n> specified duration of the test run so they are not present in the jtl file.\n> My question is even if the server is overwhelmed with requests why will\n> negative response time come?\n\nThat's the question. We don't know what the problem is. But we still don't have all the information we have requested. We still need the JMeter log file that corresponds with the JTL file you have provided.", "id": 169180, "time": "2013-08-06T12:29:44Z", "creator": "sebb@apache.org", "creation_time": "2013-08-06T12:29:44Z", "is_private": false, "attachment_id": null}, {"count": 24, "tags": [], "text": "Closing as user did not provide required information.\nCannot do anything without it.\n\nFeel free to reopen with required information.", "is_private": false, "id": 170337, "creator": "p.mouawad@ubik-ingenierie.com", "time": "2013-09-28T20:57:09Z", "bug_id": 55325, "creation_time": "2013-09-28T20:57:09Z", "attachment_id": null}]