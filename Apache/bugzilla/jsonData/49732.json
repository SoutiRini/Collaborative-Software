[{"count": 0, "tags": [], "bug_id": 49732, "attachment_id": 25869, "text": "Created attachment 25869\nLog and configuration for this mod_jk's test\n\nI tested following JSP file on the Tomcat.\n\n\n<%\n  try {\n    Thread.sleep(10000);\n  } catch (Exception e) {}\n%>\n<html>\n<head><title>Timeout</title></head>\n<body>Timeout</body>\n</html>\n\n\n workers.properties configuration was following:\n\nworker.list=ap1\n\nworker.template.type=ajp13\nworker.template.port=8009\nworker.template.lbfactor=1\nworker.template.socket_timeout=5\nworker.template.connect_timeout=3000\nworker.template.prepost_timeout=3000\nworker.template.recovery_options=3\n\nworker.template.reply_timeout=0\n\nworker.ap1.reference=worker.template\nworker.ap1.host=127.0.0.1\nworker.ap1.port=8009\n\n\n***\n\n\n For mod_jk 1.2.22, Apache access_log was followig after this test.\n\n127.0.0.1 - - [05/Aug/2010:14:11:41 +0900] \"GET /ap001/timeout.jsp HTTP/1.1\" 200 73 11163952\n\n\n For mod_jk 1.2.30, Apache access_log was followig after this test.\n\n127.0.0.1 - - [05/Aug/2010:11:44:17 +0900] \"GET /ap001/timeout.jsp HTTP/1.1\" 502 306 7007548\n\n\n Reference Guide say\n\n  http://tomcat.apache.org/connectors-doc/reference/workers.html\n  reply_timeout\n  > By default (value zero) the webserver will wait forever which could be an issue for you.\n\n However, I guess mod_jk 1.2.30 does not wait for response forever.\n \n I think influence of following fix.\n  http://svn.apache.org/viewvc/tomcat/connectors/trunk/jk/native/common/jk_connect.c?view=markup&pathrev=705977\n\n\n Best regards", "id": 139013, "time": "2010-08-10T00:29:00Z", "creator": "yoshihara.ryuiti@oss.ntt.co.jp", "creation_time": "2010-08-10T00:29:00Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 49732, "attachment_id": null, "id": 139045, "time": "2010-08-10T17:04:02Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2010-08-10T17:04:02Z", "is_private": false, "text": "I expect this is a side effect of your socket_timeout. Remove it and retest. If there still is an issue, you can reopen the ticket. Please do attach a debug log file then.\n\nSome more information about timeouts is contained in\n\nhttp://tomcat.apache.org/connectors-doc/generic_howto/timeouts.html\n\nRegards,\n\nRainer"}, {"count": 2, "tags": [], "bug_id": 49732, "attachment_id": 26244, "text": "Created attachment 26244\nPatch of \"jk_ajp_common.c\" and \"jk_connect.c\"\n\n Surely, remove socket_timeout, wait forever.\n However, socket_timeout influences all of connections.\n I want it to wait forever only when the response is returned from Tomcat.\n\n I made patch.\n\n Best regards.", "id": 141293, "time": "2010-11-01T04:14:53Z", "creator": "yoshihara.ryuiti@oss.ntt.co.jp", "creation_time": "2010-11-01T04:14:53Z", "is_private": false}, {"count": 3, "tags": [], "text": "Reverted \"Assigned To\" field to the default value.\nPlease, do not change it.", "is_private": false, "bug_id": 49732, "id": 141294, "time": "2010-11-01T05:24:13Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-11-01T05:24:13Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 49732, "attachment_id": null, "id": 179994, "time": "2014-12-23T12:51:35Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2014-12-23T12:51:35Z", "is_private": false, "text": "The general socket_timeout is not recommended exactly because of its side effects. We do have individual timeouts for the connection setup, the cping/cpong, the reply and the connection idle time. So why do you think you still need to use the general socket_timeout?"}, {"count": 5, "tags": [], "bug_id": 49732, "attachment_id": null, "text": "No response to Rainer's question. Closing as invalid since individual timeout settings are available.", "id": 193661, "time": "2016-09-12T19:25:40Z", "creator": "markt@apache.org", "creation_time": "2016-09-12T19:25:40Z", "is_private": false}]