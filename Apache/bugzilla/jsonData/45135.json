[{"count": 0, "tags": [], "creator": "ivan.veselovsky@sun.com", "attachment_id": null, "text": "regression against ant 1.6.5: a patternset cannot be redefined through itself.\nthe problem may be illustrated using the following sample:\n----------------------------------\n<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n\n<project name=\"Show Bug\" default=\"all\" basedir=\".\">\n\n\t<target name=\"all\">\n\t\t<patternset id=\"x.id\">\n\t\t\t<include name=\"*.a\"/>\n\t\t</patternset>\n\t\t\n\t\t<patternset id=\"x.id\">\n\t\t\t<patternset refid=\"x.id\"/>\n                \t<include name=\"*.b\"/>\n\t\t</patternset>\n\t\t\n\t\t\n        \t<mkdir dir=\"target\"/>\n        \t<mkdir dir=\"src\"/>\n\t\n\t\t<copy todir=\"target\">\n\t\t\t<fileset dir=\"src\">\n\t\t\t\t<patternset refid=\"x.id\"/>\n\t\t\t</fileset>\n\t\t</copy>\n    \t</target>\n\t\n</project>\n\n----------------------------------\n\nexecute this sample with \"-debug\" key with ant 1.6.5 and 1.7.0:\nthe log line where the patternset is shown is:\n----\nSetup scanner in dir /tmp with patternSet{ includes: [*.b, *.a] excludes: [] }\n----\nfor ant 1.6.5, and \n----\nSetup scanner in dir /tmp with patternSet{ includes: [*.b] excludes: [] }\n----\n\nWe can see that in 1.7.0 the previous content of the referred patternset is lost. This is the problem.", "id": 117362, "time": "2008-06-05T03:39:58Z", "bug_id": 45135, "creation_time": "2008-06-05T03:39:58Z", "is_private": false}, {"count": 1, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "that is simply the way Ant references work.  You could use a scriptdef to programmatically retrieve the original reference, then assign a new object which refers to the original object back to the same reference name.  Another option would be to use the Ant 1.8 properties API to add a PropertySetter capable of setting a reference (so you use a different mechanism to set and get the reference).  I will add this to the list of things to do for the props antlib as well.", "id": 117378, "time": "2008-06-05T07:37:26Z", "bug_id": 45135, "creation_time": "2008-06-05T07:37:26Z", "is_private": false}, {"count": 2, "tags": [], "creator": "ivan.veselovsky@sun.com", "text": "(In reply to comment #1)\n> that is simply the way Ant references work.  You could use a scriptdef to\n> programmatically retrieve the original reference, then assign a new object\n> which refers to the original object back to the same reference name.  Another\n> option would be to use the Ant 1.8 properties API to add a PropertySetter\n> capable of setting a reference (so you use a different mechanism to set and get\n> the reference).  I will add this to the list of things to do for the props\n> antlib as well.\n> \n\nHi, Matt,\nsure, this may be easily worked around using another reference, for example. \n\nBut the point of this bug request is just *compatibility* with 1.6.5 release.\nDo you know, why that worked in 1.6.5 in a different way than in 1.7.0?", "id": 117386, "attachment_id": null, "bug_id": 45135, "creation_time": "2008-06-05T08:19:52Z", "time": "2008-06-05T08:19:52Z", "is_private": false}, {"count": 3, "tags": [], "text": "Ah... you should then have marked that as a regression.  That would require a little more research as I wouldn't have expected this ever to have worked.", "attachment_id": null, "id": 117389, "creator": "mbenson@apache.org", "time": "2008-06-05T08:40:46Z", "bug_id": 45135, "creation_time": "2008-06-05T08:40:46Z", "is_private": false}]