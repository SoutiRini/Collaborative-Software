[{"count": 0, "tags": [], "creator": "apache@dettorer.net", "is_private": false, "text": "Created attachment 30662\n`strace -f /usr/sbin/apache2 -f /home/usertest/apache/apache.conf`\n\nHi.\n\nI try to run apache from an unprivileged user which is on quota (set up with quotatool on a XFS partition).\n\nWhen the hard limit of the disk quota is reached, apache fails to launch (which is ok), but a process stays in the background and uses 100% of one CPU core until I kill it (with `pkill -9 apache2` for example)\n\nI attached an output of the command `strace -f /usr/sbin/apache2 -f /home/usertest/apache/apache.conf` to the report.\n\nHere are two backtraces of the looping process (the only two I get when attaching to process at random times):\n---\n#0  0x00007fffea30ca56 in gettimeofday ()\n#1  0x00007fce95746f8a in gettimeofday () from /lib/x86_64\n#2  0x00007fce95c7ebb0 in apr_time_now () from /usr/lib/li\n#3  0x00007fce94a2ade2 in scan_busylist () from /usr/lib/a\n#4  0x00007fce94a2c066 in pm_main () from /usr/lib/apache2\n#5  0x00007fce94a2df8c in create_process_manager () from /\n#6  0x00007fce94a2e37f in procmgr_post_config () from /usr\n#7  0x00007fce94a2673d in fcgid_init () from /usr/lib/apac\n#8  0x00007fce96553d99 in ap_run_post_config ()\n#9  0x00007fce9653eec3 in main ()\n---\n#0  0x00007fce95779df8 in poll () from /lib/x86_64-linux-gnu/libc.so.6\n#1  0x00007fce95c7cb07 in apr_wait_for_io_or_timeout () from /usr/lib/libapr-1.so.0\n#2  0x00007fce94a2e73c in procmgr_peek_cmd () from /usr/lib/apache2/modules/mod_fcgid.so\n#3  0x00007fce94a2bfe9 in pm_main () from /usr/lib/apache2/modules/mod_fcgid.so\n#4  0x00007fce94a2df8c in create_process_manager () from /usr/lib/apache2/modules/mod_fcgid.so\n#5  0x00007fce94a2e37f in procmgr_post_config () from /usr/lib/apache2/modules/mod_fcgid.so\n#6  0x00007fce94a2673d in fcgid_init () from /usr/lib/apache2/modules/mod_fcgid.so\n#7  0x00007fce96553d99 in ap_run_post_config ()\n#8  0x00007fce9653eec3 in main ()\n---\n\nAnd here is the /home/usertest/apache/apache.conf:\nServerRoot /home/usertest/apache\nListen     127.0.0.1:8080\nLoadModule fcgid_module /usr/lib/apache2/modules/mod_fcgid.so\n\nA few data:\n`uname -a`:\n    Linux testbox 3.2.0-4-amd64 #1 SMP Debian 3.2.46-1 x86_64 GNU/Linux\n\n`apache2 -v`:\n    Server version: Apache/2.2.22 (Debian)\n    Server built:   Mar  4 2013 22:05:29\n\nmod_fcgid version:\n    2.3.7 (compiled from http://httpd.apache.org/download.cgi#mod_fcgid)", "id": 169036, "time": "2013-08-02T12:33:29Z", "bug_id": 55346, "creation_time": "2013-08-02T12:33:29Z", "attachment_id": 30662}]