[{"count": 0, "tags": [], "bug_id": 13597, "text": "description : FULL PRODUCT VERSION :\njava version \"1.4.1\"\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.4.1-b21)\nJava HotSpot(TM) Client VM (build 1.4.1-b21, mixed mode)\n\nJava 2 Enterprise Edition version 1.3.1, build 1.3.1-b17\n\nFULL OPERATING SYSTEM VERSION :\nMicrosoft Windows 2000 [Version 5.00.2195]\n\nEXTRA RELEVANT SYSTEM CONFIGURATION :\nApache Tomcat/4.0.1\nSun ONE Studio 4.0 update 1\n\nA DESCRIPTION OF THE PROBLEM :\n\nWhen an editor class is set to the property in the\nBeanInfo, the jsp tag setProperty throw a\nClassCastException.\n\nSTEPS TO FOLLOW TO REPRODUCE THE PROBLEM :\n1. execute the given web application\n2. Go to URL http://localhost:8081/webapp/login.jsp\n3. type the username toto\n4. type enter.\n5. you should see the exception\n\nEXPECTED VERSUS ACTUAL BEHAVIOR :\nExpected result:\n\nWelcome toto\n\nActual Result:\n\nClassCastException\n\nERROR MESSAGES/STACK TRACES THAT OCCUR :\nroot cause\n\norg.apache.jasper.JasperException: Unable to convert string 'toto' to \nclass\njava.lang.String for attribute username: java.lang.ClassCastException\n\tat org.apache.jasper.runtime.JspRuntimeLibrary.convert\n(JspRuntimeLibrary.java:184)\n\tat \norg.apache.jasper.runtime.JspRuntimeLibrary.internalIntrospecthelper\n(JspRuntimeLibrary.java:267)\n\tat org.apache.jasper.runtime.JspRuntimeLibrary.introspecthelper\n(JspRuntimeLibrary.java:219)\n\tat org.apache.jsp.welcome$jsp._jspService(welcome$jsp.java:105)\n\n\n\nREPRODUCIBILITY :\nThis bug can be reproduced always.\n\n---------- BEGIN SOURCE ----------\nFile LoginBean.java\n===================\npublic class LoginBean {\n  private String username = \"\";\n  public void setUsername(String username) {this.username = username;}\n  public String getUsername() {return username;}\n}\nFile LoginBeanBeanInfo.java\n===================\nimport java.beans.*;\nimport java.io.*;\n\npublic class LoginBeanBeanInfo extends SimpleBeanInfo {\n  private Class beanClass = LoginBean.class;\n\n  public LoginBeanBeanInfo() {\n  }\n\n  public PropertyDescriptor[] getPropertyDescriptors() {\n    try {\n      PropertyDescriptor _username = new PropertyDescriptor(\"username\",\nbeanClass, \"getUsername\", \"setUsername\");\n      _username.setDisplayName(\"username\");\n      _username.setShortDescription(\"username\");\n      _username.setPropertyEditorClass(javax.swing.JTextField.class);\n      PropertyDescriptor[] pds = new PropertyDescriptor[] {_username};\n      return pds;\n    }\n    catch(IntrospectionException ex) {\n      ex.printStackTrace();\n      return null;\n    }\n  }\n}\nFile login.jsp\n===================\n<html>\n<head>\n<title>login</title>\n</head>\n<jsp:useBean id=\"loginBeanId\" scope=\"session\" class=\"LoginBean\" />\n<body>\n<h1>Login Page</h1>\n<form method=\"post\" action=<%= \nrequest.getContextPath()+\"/welcome.jsp\"%>\n    <br>Username   :  <input name=\"username\"><br>\n    <input type=\"submit\" name=\"Submit\" value=\"OK\">\n    <input type=\"reset\" value=\"Reset\">\n</form>\n</body>\n</html>\n\nFile welcome.jsp\n===================\n<%@page import=\"LoginBean\"%>\n<html>\n<head><title>Welcome Page</title></head>\n<body>\n\n<jsp:useBean id=\"loginBeanId\" scope=\"session\" class=\"LoginBean\" />\n<jsp:setProperty name=\"loginBeanId\" property=\"username\" />\nWelcome <jsp:getProperty name=\"loginBeanId\"  property=\"username\" />\n\n</body>\n</html>\n\n---------- END SOURCE ----------\n\nCUSTOMER WORKAROUND :\nreplace the line\n<jsp:setProperty name=\"loginBeanId\" property=\"username\" />\nby\n<%\n    String s = request.getParameter(\"username\");\n    loginBeanId.setUsername(s);\n%>", "id": 24461, "time": "2002-10-14T12:16:33Z", "creator": "alain_bouvet@yahoo.fr", "creation_time": "2002-10-14T12:16:33Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 13597, "attachment_id": null, "text": "Your bean is not correctly configured. javax.swing.JTextField does not \nimplement java.beans.PropertyEditor\n\n", "id": 51554, "time": "2004-02-01T21:43:54Z", "creator": "markt@apache.org", "creation_time": "2004-02-01T21:43:54Z", "is_private": false}]