[{"count": 0, "tags": [], "creator": "elena.yanchyn@airnz.co.nz", "attachment_id": 28535, "is_private": false, "id": 157087, "time": "2012-04-02T22:10:50Z", "bug_id": 53027, "creation_time": "2012-04-02T22:10:50Z", "text": "Created attachment 28535\nJMeter test plan and log\n\nIf a Test Plan contains (HTTP Request Defauls OR HTTP Cookie Manager) AND (SMTP Sampler), and you try to loop through it (run more than one iteration), SMTP Sampler will be executed only first time and then each following iteration JMeter throws following exceptions into the log:\nERROR - jmeter.threads.JMeterThread: Error while processing sampler 'SMTP Sampler - false' : java.lang.ClassCastException: org.apache.jmeter.testelement.property.NullProperty cannot be cast to org.apache.jmeter.testelement.property.CollectionProperty\n\tat org.apache.jmeter.protocol.smtp.sampler.SmtpSampler.sample(SmtpSampler.java:182)\n\tat org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:416)\n\tat org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:271)\n\tat java.lang.Thread.run(Unknown Source)\n\nIf you remove HTTP Request Defauls and HTTP Cookie Manager from the test - it works fine, calling SMTP Sample each iteration. The problem is exactly when these two elements presented in a Test Plan together.\n\nNote: If you run the test only once, it works fine. If you run it manually several times in a row (i.e., clicking Run over and over again) - it works fine too. The problem occurs only when you either loop through the test inside a test plan, or when you specify \"forever\" or \"run 10 times\" or \"run several minutes\" kind of pattern in the thread.\n\nI'm doing a web site availability and functionality check every 30 minutes, and need to send an email every time it succeeded or failed. So, I need my test plan constantly running and I need both HTTP Cookie Manager and SMTP Sampler - and this problem is really a blocker for me now.\n\nSample Test Plan attached (included only minimum necessary elements to reproduce the problem); jmeter.log file attached.\n\nJMeter version: 2.6 (r1237317)\nJava version: 1.6.0_16 (build 14.2-b01)\nOS: Win XP 2002 sp3"}, {"text": "Hello,\nMeanwhile you CAN use mailer visualiser in last nightly build to do what you want.\nRegards\nPhilippe", "tags": [], "bug_id": 53027, "attachment_id": null, "count": 1, "id": 157093, "time": "2012-04-03T05:58:01Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-04-03T05:58:01Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 53027, "is_private": false, "text": "Date: Thu Apr  5 21:56:32 2012\nNew Revision: 1310093\n\nURL: http://svn.apache.org/viewvc?rev=1310093&view=rev\nLog:\nBug 53027 - Jmeter starts throwing exceptions while using SMTP Sample in a test plan with HTTP Cookie Mngr or HTTP Request Defaults\n\nModified:\n   jmeter/trunk/src/protocol/mail/org/apache/jmeter/protocol/smtp/sampler/SmtpSampler.java\n   jmeter/trunk/xdocs/changes.xml", "id": 157230, "time": "2012-04-05T21:58:37Z", "creator": "p.mouawad@ubik-ingenierie.com", "creation_time": "2012-04-05T21:58:37Z", "attachment_id": null}]