[{"count": 0, "tags": [], "creator": "tom@thpf.de", "attachment_id": null, "text": "var ts=SVGDoc.createElement(\"tspan\")\n  set(ts,\"dy\",\"1em\") \n  set(ts,\"x\",x)\n  var tn=SVGDoc.createTextNode(\"xyz\")\n  ts.appendChild(tn) \n  existingText.appendChild(ts) \n->\njava.lang.NullPointerException\n\tat org.apache.batik.dom.svg.SVGLocatableSupport$1.getX(Unknown Source)\n\tat java.lang.reflect.Method.invoke(Native Method)\n\tat org.mozilla.javascript.NativeJavaMethod.call(Unknown Source)\n\tat org.mozilla.javascript.ScriptRuntime.call(Unknown Source)\n\tat org.mozilla.javascript.gen.c222.call(<SVG>:500)\n\tat org.mozilla.javascript.ScriptRuntime.call(Unknown Source)\n\tat org.mozilla.javascript.gen.c206.call(<SVG>:57)\n\tat org.mozilla.javascript.optimizer.OptRuntime.callSimple(Unknown \nSource)\n\tat org.mozilla.javascript.gen.c241.call(<SVG>:1)\n\tat org.mozilla.javascript.gen.c241.exec(<SVG>)\n\tat org.mozilla.javascript.Context.evaluateReader(Unknown Source)\n\tat org.apache.batik.script.rhino.RhinoInterpreter.evaluate(Unknown \nSource)\n\tat org.apache.batik.bridge.BaseScriptingEnvironment$1.handleEvent\n(Unknown Source)\n\tat org.apache.batik.dom.events.EventSupport.fireEventListeners(Unknown \nSource)\n\tat org.apache.batik.dom.events.EventSupport.dispatchEvent(Unknown \nSource)\n\tat org.apache.batik.dom.AbstractNode.dispatchEvent(Unknown Source)\n\tat org.apache.batik.bridge.BaseScriptingEnvironment.dispatchSVGLoad\n(Unknown Source)\n\tat org.apache.batik.bridge.BaseScriptingEnvironment.dispatchSVGLoadEvent\n(Unknown Source)\n\tat org.apache.batik.bridge.UpdateManager.dispatchSVGLoadEvent(Unknown \nSource)\n\tat org.apache.batik.swing.svg.SVGLoadEventDispatcher.run(Unknown Source)", "id": 23364, "time": "2002-09-25T14:33:32Z", "bug_id": 12996, "creation_time": "2002-09-25T14:33:32Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 12996, "attachment_id": null, "id": 39677, "time": "2003-06-30T15:43:05Z", "creator": "vincent.hardy@sun.com", "creation_time": "2003-06-30T15:43:05Z", "is_private": false, "text": "The following test shows that appending tspans work. The error you were seing\nvery likely comes from the use of createElement instead of createElementNS for\ncreating the <tspan> element.\n\n<?xml version=\"1.0\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.0//EN\"\n\"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n\n\n<!-- ========================================================================= -->\n<!-- Copyright (C) The Apache Software Foundation. All rights reserved.        -->\n<!--                                                                           -->\n<!-- This software is published under the terms of the Apache Software License -->\n<!-- version 1.1, a copy of which has been included with this distribution in  -->\n<!-- the LICENSE file.                                                         -->\n<!-- ========================================================================= -->\n\n<!-- ========================================================================= -->\n<!--                                                                           -->\n<!-- @author vincent.hardy@sun.com                                             -->\n<!-- @version $Id$          -->\n<!-- ========================================================================= -->\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" \n     xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n     xmlns:test=\"http://xml.apache.org/batik/test\"\n     width=\"350\" height=\"350\" onload=\"runTest(evt)\" >\n\n    <test:testResult id=\"testResult\" result=\"failed\" code=\"invalid.path.seg.value\"/>\n\n    <script type=\"text/ecmascript\"><![CDATA[\n   var testNS = \"http://xml.apache.org/batik/test\";\n   var svgNS = \"http://www.w3.org/2000/svg\";\n\n   function runTest() {\n       var result = document.getElementById(\"testResult\");\n\n       var ts = document.createElementNS(svgNS, \"tspan\")\n       ts.setAttributeNS(null, \"fill\", \"blue\");\n       ts.appendChild(document.createTextNode(\"Appended\"));\n       \n       var target = document.getElementById(\"target\");\n       target.appendChild(ts);\n\n       var t = document.getElementById(\"text\");\n       t.setAttributeNS(null, \"fill\", \"#0F0\");\n       result.setAttributeNS(null, \"result\", \"passed\");\n   }\n\n]]></script>\n\n    <text id=\"text\" x=\"50%\" y=\"50%\" text-anchor=\"middle\" fill=\"red\">This string\nis red if test failed, green otherwise</text>\n    <text id=\"target\" x=\"50%\" y=\"50%\" transform=\"translate(0,20)\"\ntext-anchor=\"middle\" fill=\"black\">Append here : </text>\n</svg>\n\n"}]