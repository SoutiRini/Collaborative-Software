[{"count": 0, "tags": [], "text": "The method resolveClass from ImportHandler class uses a Map to cache the classes it resolves using their simple name as key.\n\n  Class<?> result = clazzes.get(name);\n\nIt has two methods to resolve a class. \nIf we use the package name to import our class (my.package.*), it stores it in the cache using the simple name (correct):\n\n  clazzes.put(name, result);\n  // http://svn.apache.org/viewvc/tomcat/tc8.0.x/tags/TOMCAT_8_0_16/java/javax/el/ImportHandler.java?revision=1680308&view=markup#l180\n\nBut when we import the class in the jsp (my.package.Class), it stores it using its full class name (incorrect):\n\n  clazzes.put(className, clazz);\n  // http://svn.apache.org/viewvc/tomcat/tc8.0.x/tags/TOMCAT_8_0_16/java/javax/el/ImportHandler.java?revision=1680308&view=markup#l160\n\nClasses resolved like this are always a miss in the cache.\n\nSo, when importing packages (<%@ page import=\"my.package.*\" %>) the cache will work as expected.\nBut if we import the class (<%@ page import=\"my.package.Class\" %>) we will always get a miss on the cache.\n\nYou can find this problem in versions 8.0.16 and up.", "is_private": false, "id": 198642, "creator": "jagoba@arima.eu", "time": "2017-05-03T16:05:07Z", "bug_id": 61065, "creation_time": "2017-05-03T16:05:07Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "violetagg@apache.org", "attachment_id": null, "id": 198649, "time": "2017-05-03T21:03:14Z", "bug_id": 61065, "creation_time": "2017-05-03T21:03:14Z", "is_private": false, "text": "Hi,\n\nThanks for the report.\nThe fix was committed in:\n- trunk for 9.0.0.M21 onwards\n- 8.5.x for 8.5.15 onwards\n- 8.0.x for 8.0.44 onwards\n\nRegards,\nVioleta"}]