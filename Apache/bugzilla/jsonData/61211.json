[{"count": 0, "tags": [], "bug_id": 61211, "text": "Hello Devs.\n\nAfter upgrading to apache-2.4.26 my nextcloud installation was broken partly. I could not click on the share button anymore. A quick search revealed there was a change in the ProxyFCGIBackendType variable. It is now set to FPM? Changing it back to GENERIC fixed my nextcloud installation. Here is the thread of the person who found this issue. \n\nhttps://stackoverflow.com/questions/44657362/wrong-script-filename-in-apache-2-4-26/44714794#44714794\n\nthanks and cheers", "id": 199355, "time": "2017-06-23T07:10:06Z", "creator": "himbeere@meine-oma.de", "creation_time": "2017-06-23T07:10:06Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "jchampion@apache.org", "is_private": false, "id": 199369, "attachment_id": null, "bug_id": 61211, "creation_time": "2017-06-23T17:08:45Z", "time": "2017-06-23T17:08:45Z", "text": "Thanks for the report; see bug 61202.\n\nIf you have the time, can you share a couple of things?\n\n1) The part of your configuration that proxies PHP files to PHP-FPM (SetHandler, ProxyPassMatch, or otherwise)\n2) Add 'proxy_fcgi:trace8' to your LogLevel, and show the SCRIPT_NAME, PATH_INFO, QUERY_STRING, SCRIPT_FILENAME, and PATH_TRANSLATED variables that the log shows when you have the BackendType set to FPM. The entries should look something like\n\nmod_proxy_fcgi.c(417): [client 127.0.0.1:30000] AH01062: sending env var 'SCRIPT_NAME' value '/path'\n\n3) Repeat step 2 with the BackendType set to GENERIC.\n\nThanks!\n\n*** This bug has been marked as a duplicate of bug 61202 ***"}, {"count": 2, "tags": [], "creator": "himbeere@meine-oma.de", "is_private": false, "id": 199379, "attachment_id": null, "bug_id": 61211, "creation_time": "2017-06-24T10:58:40Z", "time": "2017-06-24T10:58:40Z", "text": "Currently i'm using.\n\n     ProxyFCGIBackendType GENERIC\n\n\n    <FilesMatch \\.php$>\n       SetHandler \"proxy:unix:/run/fpm.nextcloud.sock|fcgi://localhost\"\n    </FilesMatch>\n    <IfModule dir_module>\n       DirectoryIndex index.php index.html\n    </IfModule>\n\nUsually without the ProxyFCGIBackendType GENERIC.\n\nWithout that i get:\n\n[Sat Jun 24 12:47:19.554176 2017] [proxy_fcgi:trace4] [pid 25463:tid 140322389583616] mod_proxy_fcgi.c(396): [client 92.195.83.223:55762] fpm:virtual_script: Modified SCRIPT_NAME to: /v2.php\n[Sat Jun 24 12:47:19.556158 2017] [proxy_fcgi:trace8] [pid 25463:tid 140322389583616] mod_proxy_fcgi.c(419): [client 92.195.83.223:55762] AH01062: sending env var 'SCRIPT_NAME' value '/v2.php'\n\n[Sat Jun 24 12:51:40.707406 2017] [proxy_fcgi:trace8] [pid 25943:tid 140604341266176] mod_proxy_fcgi.c(419): [client 92.195.83.223:55800] AH01062: sending env var 'PATH_INFO' value '/apps/files_sharing/api/v1/shares'\n[Sat Jun 24 12:51:56.222826 2017] [proxy_fcgi:trace8] [pid 25943:tid 140604341266176] mod_proxy_fcgi.c(419): [client 92.195.83.223:55800] AH01062: sending env var 'PATH_INFO' value '/apps/notifications/api/v2/notifications'\n\n[Sat Jun 24 12:52:26.317539 2017] [proxy_fcgi:trace8] [pid 25943:tid 140604341266176] mod_proxy_fcgi.c(419): [client 92.195.83.223:55806] AH01062: sending env var 'QUERY_STRING' value ''\n[Sat Jun 24 12:52:56.331814 2017] [proxy_fcgi:trace8] [pid 25943:tid 140604341266176] mod_proxy_fcgi.c(419): [client 92.195.83.223:55810] AH01062: sending env var 'QUERY_STRING' value ''\n\n[Sat Jun 24 12:52:56.331612 2017] [proxy_fcgi:trace8] [pid 25943:tid 140604341266176] mod_proxy_fcgi.c(419): [client 92.195.83.223:55810] AH01062: sending env var 'SCRIPT_FILENAME' value 'proxy:fcgi://localhost/var/www/nextcloud.dev.lordcritical.de/htdocs/ocs/v2.php'\n[Sat Jun 24 12:53:26.320188 2017] [proxy_fcgi:trace8] [pid 25942:tid 140604584654592] mod_proxy_fcgi.c(419): [client 92.195.83.223:55814] AH01062: sending env var 'SCRIPT_FILENAME' value 'proxy:fcgi://localhost/var/www/nextcloud.dev.lordcritical.de/htdocs/ocs/v2.php'\n\n[Sat Jun 24 12:53:26.320553 2017] [proxy_fcgi:trace8] [pid 25942:tid 140604584654592] mod_proxy_fcgi.c(419): [client 92.195.83.223:55814] AH01062: sending env var 'PATH_TRANSLATED' value '/var/www/nextcloud.dev.lordcritical.de/htdocs/apps/notifications/api/v2/notifications'\n[Sat Jun 24 12:53:56.321178 2017] [proxy_fcgi:trace8] [pid 25942:tid 140604584654592] mod_proxy_fcgi.c(419): [client 92.195.83.223:55818] AH01062: sending env var 'PATH_TRANSLATED' value '/var/www/nextcloud.dev.lordcritical.de/htdocs/apps/notifications/api/v2/notifications'\n\n\nWith:\n\n[Sat Jun 24 12:49:05.275502 2017] [proxy_fcgi:trace8] [pid 25715:tid 139686829803264] mod_proxy_fcgi.c(419): [client 92.195.83.223:55780] AH01062: sending env var 'SCRIPT_NAME' value '/ocs/v2.php'\n[Sat Jun 24 12:49:05.527225 2017] [proxy_fcgi:trace8] [pid 25715:tid 139686829803264] mod_proxy_fcgi.c(419): [client 92.195.83.223:55780] AH01062: sending env var 'SCRIPT_NAME' value '/index.php'\n\n[Sat Jun 24 12:55:33.970034 2017] [proxy_fcgi:trace8] [pid 26162:tid 139848234387200] mod_proxy_fcgi.c(419): [client 92.195.83.223:55830] AH01062: sending env var 'PATH_INFO' value '/apps/files_sharing/api/v1/shares'\n[Sat Jun 24 12:55:34.160694 2017] [proxy_fcgi:trace8] [pid 26162:tid 139848234387200] mod_proxy_fcgi.c(419): [client 92.195.83.223:55830] AH01062: sending env var 'PATH_INFO' value '/apps/files_sharing/api/v1/shares'\n\n[Sat Jun 24 12:55:58.672944 2017] [proxy_fcgi:trace8] [pid 26162:tid 139848234387200] mod_proxy_fcgi.c(419): [client 92.195.83.223:55834] AH01062: sending env var 'QUERY_STRING' value ''\n[Sat Jun 24 12:56:28.662622 2017] [proxy_fcgi:trace8] [pid 26162:tid 139848234387200] mod_proxy_fcgi.c(419): [client 92.195.83.223:55838] AH01062: sending env var 'QUERY_STRING' value ''\n\n[Sat Jun 24 12:56:58.670460 2017] [proxy_fcgi:trace8] [pid 26161:tid 139848511346432] mod_proxy_fcgi.c(419): [client 92.195.83.223:55842] AH01062: sending env var 'SCRIPT_FILENAME' value '/var/www/nextcloud.dev.lordcritical.de/htdocs/ocs/v2.php'\n[Sat Jun 24 12:57:28.670697 2017] [proxy_fcgi:trace8] [pid 26162:tid 139848234387200] mod_proxy_fcgi.c(419): [client 92.195.83.223:55850] AH01062: sending env var 'SCRIPT_FILENAME' value '/var/www/nextcloud.dev.lordcritical.de/htdocs/ocs/v2.php'\n\n[Sat Jun 24 12:57:28.671061 2017] [proxy_fcgi:trace8] [pid 26162:tid 139848234387200] mod_proxy_fcgi.c(419): [client 92.195.83.223:55850] AH01062: sending env var 'PATH_TRANSLATED' value '/var/www/nextcloud.dev.lordcritical.de/htdocs/apps/notifications/api/v2/notifications'\n[Sat Jun 24 12:57:58.667021 2017] [proxy_fcgi:trace8] [pid 26161:tid 139848511346432] mod_proxy_fcgi.c(419): [client 92.195.83.223:55854] AH01062: sending env var 'PATH_TRANSLATED' value '/var/www/nextcloud.dev.lordcritical.de/htdocs/apps/notifications/api/v2/notifications'\n\n\nHope that helps."}, {"count": 3, "tags": [], "creator": "jchampion@apache.org", "is_private": false, "id": 199434, "attachment_id": null, "bug_id": 61211, "creation_time": "2017-06-26T16:21:26Z", "time": "2017-06-26T16:21:26Z", "text": "(In reply to Thomas Stein from comment #2)\n> Hope that helps.\n\nIt does, thank you!"}]