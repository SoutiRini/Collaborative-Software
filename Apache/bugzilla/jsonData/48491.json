[{"count": 0, "tags": [], "creator": "nrc@cs.berkeley.edu", "attachment_id": null, "id": 133360, "time": "2010-01-05T20:34:07Z", "bug_id": 48491, "creation_time": "2010-01-05T20:34:07Z", "is_private": false, "text": "In pollset_remove() for the kqueue pollset provider, there is a loop over a linked list containing all the active pollfd_t's. I think this is a potentially serious problem: one of the major advantages of kqueue is the ability to scale to a large number of descriptors. O(n) on remove could potentially be very expensive, especially since pollfd_t's need to be removed and re-added to change their reqevents.\n\nOne way to fix this is to replace the linked list with a hash table, hashing on the pollfd_t's \"desc\" field.\n\n(The epoll provider has similar behavior, but at least that can be avoided by specifying APR_POLLSET_NOCOPY.)"}, {"text": "pollcb_remove() for the poll method appears to have the same property, BTW.", "tags": [], "bug_id": 48491, "attachment_id": null, "count": 1, "id": 133396, "time": "2010-01-06T15:02:13Z", "creator": "nrc@cs.berkeley.edu", "creation_time": "2010-01-06T15:02:13Z", "is_private": false}]