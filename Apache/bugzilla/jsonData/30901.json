[{"count": 0, "tags": [], "bug_id": 30901, "is_private": false, "text": "The mod_perl module (version 1.99_16 aka 2.0 beta) fails to begin tests\nbecause of the following error:\n=====================\nwaiting 120 seconds for server to start: .[Tue Aug 24 16:58:02 2004] [crit] \n[Tue Aug 24 16:58:02 2004] file vhost.c, line 189, assertion \"rv == APR_SUCCESS\"\nfailed\n.........................................................................................................................\nwaiting 120 seconds for server to start: not ok\n=====================\n\nThe guilty section of vhost.c is:\n    182     if (strcmp(host, \"*\") == 0) {\n    183         rv = apr_sockaddr_info_get(&my_addr, \"0.0.0.0\", APR_INET, port,\n0, p);\n    184         ap_assert(rv == APR_SUCCESS); /* must be bug or out of storage */\n    185     }\n    186     else if (strcasecmp(host, \"_default_\") == 0\n    187         || strcmp(host, \"255.255.255.255\") == 0) {\n    188         rv = apr_sockaddr_info_get(&my_addr, \"255.255.255.255\",\nAPR_INET, port, 0, p);\n    189         ap_assert(rv == APR_SUCCESS); /* must be bug or out of storage */\n    190     }\n    191     else {\n    192         rv = apr_sockaddr_info_get(&my_addr, host, APR_UNSPEC, port, 0, p);\n    193         if (rv != APR_SUCCESS) {\n    194             ap_log_error(APLOG_MARK, APLOG_ERR, rv, NULL,\n    195                 \"Cannot resolve host name %s --- ignoring!\", host);\n    196             return NULL;\n    197         }\n    198     }\n\nand the server never starts. No core dump is produced and no error log either.\nAttempts to install (without testing) succeed but the resulting mod_perl \nrefuses to run.\n\nHere is the configuration of httpd-2.0.50:\n\n./configure --prefix=/var/apache  --enable-mime-magic --enable-usertrack\n--enable-ssl --enable-dav --enable-info --enable-cgi --enable-speling\n--enable-so --enable-rule=SSL_SDBM  --with-ssl=/opt/local/openssl --with-mpm=prefork\n\nHttpd-2.0.50 runs fine (without mod_perl) but since the entire application\nis perl code, it runs soooo sloooowly. Perl version is 5.8.4 and the OS is\nSolaris 9 on Sun Sparc.\n\nThis error was previously reported on the mod_perl bug mailing list and\nthe explanation given was that it was a httpd problem. And perhaps it is.\nI do know that if the mod_perl test httpd configuration file:\n\n/opt/local/pkg/mod_perl-1.99_16/t/conf/httpd.conf\n\nis edited to replace _default_ with the fully qualified name of the \nhttpd server, the test httpd will start. Unfortunately, no tests can \nbe run because the testing procedure overwrites the httpd.conf file\nwith the non-working values.\n\nFull logs & etc are available if required\n\nCheers.....", "id": 62593, "time": "2004-08-27T16:21:55Z", "creator": "RenquistIsMe@comcast.net", "creation_time": "2004-08-27T16:21:55Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 30901, "attachment_id": null, "text": "\n\n*** This bug has been marked as a duplicate of 27525 ***", "id": 96762, "time": "2006-12-11T07:31:00Z", "creator": "jorton@redhat.com", "creation_time": "2006-12-11T07:31:00Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 30901, "attachment_id": null, "text": "reopening this bug as i don't see any documented workaround and can not\nunderstand why it is duplicate as bug 27525\n\nwith this bug have no way to run the test suite available : is there a\nworkaround or fix available ?\n\n\non 06/12/07 facing this bug with on a solaris 10 target\n\n# more /etc/release\n     Solaris 10 11/06 s10s_u3wos_10 SPARC\n           Copyright 2006 Sun Microsystems, Inc.  All Rights Reserved.\n                        Use is subject to license terms.\n                           Assembled 14 November 2006\n\n\n# ./apachectl -v\nServer version: Apache/2.0.58\nServer built:   Sep  5 2006 07:46:49\n\nget mod_perl-2.0.3 from http://perl.apache.org/download/index.html\n\n# perl Makefile.PL\n=> ok\n\n# make\n=> output is ok\n\n# make test\n\ncd \"src/modules/perl\" && make\n/opt/csw/bin/perl -Iblib/arch -Iblib/lib \\\nt/TEST -clean\nAPACHE_TEST_GROUP= APACHE_TEST_HTTPD= APACHE_TEST_PORT= APACHE_TEST_USER=\nAPACHE_TEST_APXS= \\\n/opt/csw/bin/perl -Iblib/arch -Iblib/lib \\\nt/TEST -bugreport -verbose=0\n[warning] root mode: changing the files ownership to 'nobody' (60001:60001)\n[warning] testing whether 'nobody' is able to -rwx /tmp/mod_perl-2.0.3/t\n\"/opt/csw/bin/perl\" -Mlib=/tmp/mod_perl-2.0.3/Apache-Test/lib -MApache::TestRun\n-e 'eval { Apache::TestRun::run_root_fs_test(60001, 60001,\nq[/tmp/mod_perl-2.0.3/t]) }';\n\n\n[warning] result: OK\n[warning] the client side drops 'root' permissions and becomes 'nobody'\n/usr/apache2/bin/httpd  -d /tmp/mod_perl-2.0.3/t -f\n/tmp/mod_perl-2.0.3/t/conf/httpd.conf -D APACHE2 -D PERL_USEITHREADS\nusing Apache/2.0.58 (prefork MPM)\n\nwaiting 120 seconds for server to start: .[Tue Jun 12 16:50:50 2007] [crit] [Tue\nJun 12 16:50:50 2007] file vhost.c, line 190, assertion \"rv == APR_SUCCESS\" failed\n........................................................................................................................\nwaiting 120 seconds for server to start: not ok\n[  error] giving up after 121 secs. If you think that your system\nis slow or overloaded try again with a longer timeout value.\nby setting the environment variable APACHE_TEST_STARTUP_TIMEOUT\nto a high value (e.g. 420) and repeat the last command.\n\n[  error] server failed to start! (t/logs/error_log wasn't created, start the\nserver in the debug mode)\n+--------------------------------------------------------+\n| Please file a bug report: http://perl.apache.org/bugs/ |\n+--------------------------------------------------------+\n*** Error code 1\nmake: Fatal error: Command failed for target `run_tests'", "id": 104344, "time": "2007-06-12T08:08:21Z", "creator": "jean.jayet@sun.com", "creation_time": "2007-06-12T08:08:21Z", "is_private": false}, {"count": 3, "tags": [], "creator": "jorton@redhat.com", "text": "The failure is because the system resolver is not configured, so httpd fails to\nstart (and hence, the mod_perl test suite fails to run).\n\nSee bug 27525 comment 6 onwards.\n\n*** This bug has been marked as a duplicate of 27525 ***", "id": 104517, "time": "2007-06-19T02:57:31Z", "bug_id": 30901, "creation_time": "2007-06-19T02:57:31Z", "is_private": false, "attachment_id": null}]