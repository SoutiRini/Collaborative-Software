[{"count": 0, "tags": [], "bug_id": 11143, "attachment_id": null, "id": 20168, "time": "2002-07-24T20:56:41Z", "creator": "wr0ngway@yahoo.com", "creation_time": "2002-07-24T20:56:41Z", "is_private": false, "text": "If I use build.compiler to specify a classname to be used as my compiler, I\nshould have a way to have that class loaded using a path I have defined in my\nbuild file rather that being forced to include the class in the System classpath.\n\nPossibly a compilerclasspath[ref] attribute on the javac task?  Or just reuse\nthe compile classpath to load the complier class as well."}, {"count": 1, "tags": [], "creator": "badorek_jeffrey_w@cat.com", "is_private": false, "text": "If any committers are interested, I made the following three changes to fix this\nproblem. Granted I didn't run any regression tests to determine impact... :)\n\nIn org.apache.tools.ant.taskdefs.compilers.CompilerAdapterFactory\n\nLine 130: return resolveClassName(compilerType, task);\n\nLine 162: private static CompilerAdapter resolveClassName(String className, Task\ntask)\n\nLine 165: Class c = Class.forName(className, true,\ntask.getProject().getCoreLoader());", "id": 75024, "time": "2005-05-18T16:22:39Z", "bug_id": 11143, "creation_time": "2005-05-18T16:22:39Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 11143, "text": "This is actually a bug.  When a taskdef is used to create a task, the classpath of that taskdef is ignored when loading build.compiler.  This bug is still present in SVN HEAD.\n\nThe fix is indeed to pass the task into resolveClassName() and to use its classloader to load the build.compiler class.  Instead of using task.getProject().getCoreLoader() (as in comment #1), one could use task.getClass().getClassLoader() (since the task class itself would have been loaded from the right classpath).\n\nSince this affects older versions of ant as well, perhaps it should also be back-ported to maintenance releases for 1.5 through 1.6.5...", "id": 126168, "time": "2009-04-09T08:11:45Z", "creator": "pechtcha@cs.nyu.edu", "creation_time": "2009-04-09T08:11:45Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "Added a nested compilerClasspath element to javac - and to rmic, javah and native2ascii while I was at it.\n\nsvn revision 796188", "id": 129012, "time": "2009-07-21T01:52:26Z", "bug_id": 11143, "creation_time": "2009-07-21T01:52:26Z", "attachment_id": null}]