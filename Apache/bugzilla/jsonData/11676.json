[{"count": 0, "tags": [], "creator": "glerma@dal.dset.com", "attachment_id": null, "id": 20990, "time": "2002-08-13T20:14:45Z", "bug_id": 11676, "creation_time": "2002-08-13T20:14:45Z", "is_private": false, "text": "I keep getting core dumps from httpd binary after a few hours of running. This \nis my development environment, so no heavy load testing is being done or \nanything like that. \n\nI do have several mods compiled into my server.\nI am using the following components with Apache Web Server 1.3.26 on a Solaris \n9 platform:\nopenssl-engine-0.9.6d\nmm-1.1.3\nmod_ssl-2.8.10-1.3.26\nphp-4.2.2   \n\nI have tried building on Solaris 8 and Solaris 9, with same results. How can I \ndebug this?\n\nYou can obtain a copy of my core file by going to ftp.dal.dset.com\n\nlogin: anonymous\npassword: anonymous\n\ntype: cd /outgoing\ntype: bi\ntype: get core_dset.apache.021302.gz\ntype: get error_log_dset.apache\n\nPlease help!"}, {"count": 1, "tags": [], "creator": "glerma@dal.dset.com", "attachment_id": null, "id": 20991, "time": "2002-08-13T21:07:37Z", "bug_id": 11676, "creation_time": "2002-08-13T21:07:37Z", "is_private": false, "text": "Also did a truss on httpd while the Seg Faults are occurring:\n\nPartial output of truss at approximate seg fault\n\nerror_log:\n[Tue Aug 13 16:00:39 2002] [notice] child pid 1837 exit signal Bus Error (10), \npossible coredump in /data2/www/i-webdev1/apache\n\npartial truss output of parent pid 1484 when dump occurs:\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272431\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272432\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)       (sleeping...)\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272433\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)       (sleeping...)\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272434\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272435\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272436\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272437\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)       (sleeping...)\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272438\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272439\nfork1()                                         = 1891\nlwp_schedctl(SC_STATE|SC_PREEMPT, 0, 0xFFBFF5AC) = 0\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\ntime()                                          = 1029272439\nwrite(15, \" [ T u e   A u g   1 3  \".., 128)    = 128\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272440\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272441\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272442\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\npoll(0xFFBFF780, 0, 1000)                       = 0\ntime()                                          = 1029272443\nwaitid(P_ALL, 0, 0xFFBFF710, WEXITED|WTRAPPED|WNOHANG) = 0\n\n\n\n"}, {"count": 2, "tags": [], "creator": "glerma@dal.dset.com", "attachment_id": null, "id": 20992, "time": "2002-08-13T21:23:03Z", "bug_id": 11676, "creation_time": "2002-08-13T21:23:03Z", "is_private": false, "text": "Actually hear is a slightly better output of truss on the Parent PID\ntruss -t open,close,read,write -d -p 1484 -f\n\n[Tue Aug 13 16:14:22 2002] [notice] child pid 1910 exit signal Bus Error (10), \npossible coredump in /data2/www/i-webdev1/apache\n\n\ni-webdev1@webdev >: truss -t open,close,read,write -d -p 1484 -f\ntruss: non-existent process ignored: -f\nBase time stamp:  1029273250.4556  [ Tue Aug 13 16:14:10 CDT 2002 ]\n12.1595 write(15, \" [ T u e   A u g   1 3  \".., 128)    = 128\n\n\nI'm not sure where this is happening but this dump occurred just by hitting \nthe \"Back\" button on my browser."}, {"count": 3, "tags": [], "creator": "jwoolley@apache.org", "attachment_id": null, "id": 20993, "time": "2002-08-13T21:25:14Z", "bug_id": 11676, "creation_time": "2002-08-13T21:25:14Z", "is_private": false, "text": "We really need a backtrace to figure out what's going on here.  Please see \nhttp://httpd.apache.org/dev/debugging.html for info on how to generate one for \nus. \n \nThanks, \nCliff "}, {"count": 4, "tags": [], "bug_id": 11676, "attachment_id": null, "text": "Not sure if this is what you mean. I'm sorry if it's not:\n\ni-webdev1@webdev >: /usr/proc/bin/pstack 2127       \n2127:   /data2/www/i-webdev1/apache/bin/httpd -f /data2/www/i-webdev1/apache/c\n ff21ae00 poll     (ffbff780, 0, 3e8)\n ff1cd474 _select  (3e8, ff23d19c, 0, ff23d19c, ff23d19c, 0) + 2ec\n ff15ec7c select   (0, 0, 0, 0, ffbff858, 8b0c0) + 6c\n 0002f584 wait_or_timeout (ffbff8dc, a6d44, d, a9810, 8b0c0, 89da0) + e0\n 000327b0 standalone_main (3, ffbffa14, a6c9c, 2f, ffbffb1a, 0) + 468\n 00033270 main     (3, ffbffa14, ffbffa24, a7450, 0, 0) + 55c\n 0001761c _start   (0, 0, 0, 0, 0, 0) + 5c\n\n\nI have gdb,but not really sure what is needed at this point, other than a \nbacktrace.", "id": 20995, "time": "2002-08-13T22:04:50Z", "creator": "glerma@dal.dset.com", "creation_time": "2002-08-13T22:04:50Z", "is_private": false}, {"count": 5, "tags": [], "text": "Getting there, but not quite. \n \nYou have a corefile, right?  From the command prompt, do this: \n \ngdb /path/to/httpd /path/to/corefile \n \nYou'll then get a (gdb) prompt.  Type \"bt\" to see what the stack was at the \ntime of the segfault. \n \n--Cliff ", "attachment_id": null, "bug_id": 11676, "id": 20996, "time": "2002-08-13T22:10:53Z", "creator": "jwoolley@apache.org", "creation_time": "2002-08-13T22:10:53Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 11676, "attachment_id": null, "text": "Output from gdb backtrace:\n\n#0  ps_mm_destroy (data=0x1091b8) at mod_mm.c:241\n#1  0xfeca8348 in zm_shutdown_ps_mm (type=0, module_number=10) at mod_mm.c:293\n#2  0xfec56eac in module_destructor (module=0x113650) at zend_API.c:1127\n#3  0xfec59014 in zend_hash_destroy (ht=0xfed6ee7c) at zend_hash.c:541\n#4  0xfec53d98 in zend_shutdown () at zend.c:490\n#5  0xfec6289c in php_module_shutdown () at main.c:1050\n#6  0xfec6284c in php_module_shutdown_wrapper (sapi_globals=0x0) at main.c:1027\n#7  0xfec5fd48 in apache_php_module_shutdown_wrapper () at mod_php4.c:795\n#8  0x1a9f0 in run_cleanups ()\n#9  0x1825c in ap_clear_pool ()\n#10 0x182f0 in ap_destroy_pool ()\n#11 0x18244 in ap_clear_pool ()\n#12 0x182f0 in ap_destroy_pool ()\n#13 0x2e9c8 in clean_parent_exit ()\n#14 0x32a7c in standalone_main ()\n#15 0x33278 in main ()\n\nI surely hope this is what you need. Thanks for the help, sir!\n-George L.", "id": 20997, "time": "2002-08-13T22:24:34Z", "creator": "glerma@dal.dset.com", "creation_time": "2002-08-13T22:24:34Z", "is_private": false}, {"count": 7, "tags": [], "creator": "jwoolley@apache.org", "text": "Exactly what I was looking for.  Unfortunately this means the problem is almost  \ncertainly over in PHP and there's nothing we (the HTTP server team) can do  \nabout it.  :-(  Check over at bugs.php.net and report it there if it hasn't  \nbeen already.  \n  \nThanks!  ", "id": 20998, "time": "2002-08-13T22:28:53Z", "bug_id": 11676, "creation_time": "2002-08-13T22:28:53Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 11676, "attachment_id": null, "text": "Sure thing. That's all i needed too. To find out who's dumping.\n\nThanks again.\n-George.", "id": 20999, "time": "2002-08-13T23:02:51Z", "creator": "glerma@dal.dset.com", "creation_time": "2002-08-13T23:02:51Z", "is_private": false}]