[{"count": 0, "attachment_id": null, "bug_id": 44274, "is_private": false, "id": 113029, "time": "2008-01-20T23:08:53Z", "creator": "mashmk02@gmail.com", "creation_time": "2008-01-20T23:08:53Z", "tags": [], "text": "Hi.\n\nI tested mod_jk 1.2.27-dev (checkout from trunk head) on RHEL 4u5, i got segfault. \n\nMy setting includes two virtual host settings. \nThis problem occurs when \"JkMountCopy off\" is included in the virtual host\nsetting(When \"JkMountCopy all\" is not included in the global setting, and\n\"JkMountCopy on\" is not included in the virtual host setting, it is similar).\n\nBacktrace is as follows. \n-----start-----\n(gdb) bt full\n#0  0x0000002a99f776b8 in uri_worker_map_ext (uw_map=0x0, l=0x552ad0d630)\n    at jk_uri_worker_map.c:469\n        i = 0\n        __FUNCTION__ = \"uri_worker_map_ext\"\n#1  0x0000002a99f67086 in jk_post_config (pconf=0x552ac01138, plog=Variable\n\"plog\" is not available.\n)\n    at mod_jk.c:2979\n        sconf = (jk_server_conf_t *) 0x0\n        rv = Variable \"rv\" is not available.\n-----end-----\n\nand patch. Is this patch correct?\n===================================================================\n--- mod_jk/native/apache-2.0/mod_jk.c   (revision 613744)\n+++ mod_jk/native/apache-2.0/mod_jk.c   (working copy)\n@@ -2975,7 +2975,7 @@\n             for (srv = s; srv; srv = srv->next) {\n                 jk_server_conf_t *sconf = (jk_server_conf_t\n*)ap_get_module_config(srv->module_config,\n\n    &jk_module);\n-                if (conf->uw_map != sconf->uw_map)\n+                if (conf->uw_map != sconf->uw_map && sconf->uw_map)\n                     uri_worker_map_ext(sconf->uw_map, sconf->log);\n             }"}, {"count": 1, "tags": [], "creator": "rainer.jung@kippdata.de", "text": "Thanks a lot for testing, analyzing and providing the patch. Applied to 1.2.27-dev.\n\n", "id": 113036, "time": "2008-01-21T02:36:48Z", "bug_id": 44274, "creation_time": "2008-01-21T02:36:48Z", "is_private": false, "attachment_id": null}]